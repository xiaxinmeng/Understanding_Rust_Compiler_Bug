{"sha": "f14decafae0d1771e16498e693e7bf2f7058e88e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjE0ZGVjYWZhZTBkMTc3MWUxNjQ5OGU2OTNlN2JmMmY3MDU4ZTg4ZQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2015-10-01T11:23:39Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2015-10-01T11:23:39Z"}, "message": "Save-and-restore errno more carefully in libstdc++\n\n\t* doc/xml/manual/diagnostics.xml: Document use of errno.\n\t* doc/html/*: Regenerate.\n\t* config/locale/generic/c_locale.cc (_Save_errno): New helper.\n\t(__convert_to_v): Use _Save_errno.\n\t* include/ext/string_conversions.h (__stoa): Only restore errno when\n\tit isn't set to non-zero.\n\nFrom-SVN: r228328", "tree": {"sha": "a019470ff02af16e5d85abeda9ad9e5dc945f92f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a019470ff02af16e5d85abeda9ad9e5dc945f92f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f14decafae0d1771e16498e693e7bf2f7058e88e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f14decafae0d1771e16498e693e7bf2f7058e88e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f14decafae0d1771e16498e693e7bf2f7058e88e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f14decafae0d1771e16498e693e7bf2f7058e88e/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aabef2de2f99d4a67840480eddf224ca1b43320e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aabef2de2f99d4a67840480eddf224ca1b43320e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aabef2de2f99d4a67840480eddf224ca1b43320e"}], "stats": {"total": 87, "additions": 70, "deletions": 17}, "files": [{"sha": "4199ede06fda06d90de25e32bc9f06359d1f621a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -1,3 +1,12 @@\n+2015-10-01  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* doc/xml/manual/diagnostics.xml: Document use of errno.\n+\t* doc/html/*: Regenerate.\n+\t* config/locale/generic/c_locale.cc (_Save_errno): New helper.\n+\t(__convert_to_v): Use _Save_errno.\n+\t* include/ext/string_conversions.h (__stoa): Only restore errno when\n+\tit isn't set to non-zero.\n+\n 2015-09-30  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n \t    Jonathan Wakely  <jwakely@redhat.com>\n "}, {"sha": "8dfea6b0682c8aa1a4b76eb79f67147f4cee469b", "filename": "libstdc++-v3/config/locale/generic/c_locale.cc", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Fc_locale.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Fc_locale.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flocale%2Fgeneric%2Fc_locale.cc?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -44,6 +44,16 @@ namespace std _GLIBCXX_VISIBILITY(default)\n {\n _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n+  namespace\n+  {\n+    struct _Save_errno\n+    {\n+      _Save_errno() : _M_errno(errno) { errno = 0; }\n+      ~_Save_errno() { if (errno == 0) errno = _M_errno; }\n+      int _M_errno;\n+    };\n+  }\n+\n   template<>\n     void\n     __convert_to_v(const char* __s, float& __v, ios_base::iostate& __err,\n@@ -59,7 +69,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       bool __overflow = false;\n \n #if !__FLT_HAS_INFINITY__\n-      errno = 0;\n+      const _Save_errno __save_errno;\n #endif\n \n #ifdef _GLIBCXX_HAVE_STRTOF\n@@ -123,7 +133,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       char* __sanity;\n \n #if !__DBL_HAS_INFINITY__\n-      errno = 0;\n+      const _Save_errno __save_errno;\n #endif\n \n       __v = strtod(__s, &__sanity);\n@@ -167,7 +177,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       setlocale(LC_ALL, \"C\");\n \n #if !__LDBL_HAS_INFINITY__\n-      errno = 0;\n+      const _Save_errno __save_errno;\n #endif\n \n #if defined(_GLIBCXX_HAVE_STRTOLD) && !defined(_GLIBCXX_HAVE_BROKEN_STRTOLD)"}, {"sha": "a01957d5e27eabcb23bc4b5bf1f0c3c0aead2121", "filename": "libstdc++-v3/doc/html/manual/concept_checking.html", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fconcept_checking.html", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fconcept_checking.html", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fconcept_checking.html?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -1,5 +1,5 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n-<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\"><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><title>Concept Checking</title><meta name=\"generator\" content=\"DocBook XSL-NS Stylesheets V1.78.1\" /><meta name=\"keywords\" content=\"ISO C++, library\" /><meta name=\"keywords\" content=\"ISO C++, runtime, library\" /><link rel=\"home\" href=\"../index.html\" title=\"The GNU C++ Library\" /><link rel=\"up\" href=\"diagnostics.html\" title=\"Chapter\u00a05.\u00a0 Diagnostics\" /><link rel=\"prev\" href=\"diagnostics.html\" title=\"Chapter\u00a05.\u00a0 Diagnostics\" /><link rel=\"next\" href=\"utilities.html\" title=\"Chapter\u00a06.\u00a0 Utilities\" /></head><body><div class=\"navheader\"><table width=\"100%\" summary=\"Navigation header\"><tr><th colspan=\"3\" align=\"center\">Concept Checking</th></tr><tr><td width=\"20%\" align=\"left\"><a accesskey=\"p\" href=\"diagnostics.html\">Prev</a>\u00a0</td><th width=\"60%\" align=\"center\">Chapter\u00a05.\u00a0\n+<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\"><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><title>Concept Checking</title><meta name=\"generator\" content=\"DocBook XSL-NS Stylesheets V1.78.1\" /><meta name=\"keywords\" content=\"ISO C++, library\" /><meta name=\"keywords\" content=\"ISO C++, runtime, library\" /><link rel=\"home\" href=\"../index.html\" title=\"The GNU C++ Library\" /><link rel=\"up\" href=\"diagnostics.html\" title=\"Chapter\u00a05.\u00a0 Diagnostics\" /><link rel=\"prev\" href=\"errno.html\" title=\"Use of errno by the library\" /><link rel=\"next\" href=\"utilities.html\" title=\"Chapter\u00a06.\u00a0 Utilities\" /></head><body><div class=\"navheader\"><table width=\"100%\" summary=\"Navigation header\"><tr><th colspan=\"3\" align=\"center\">Concept Checking</th></tr><tr><td width=\"20%\" align=\"left\"><a accesskey=\"p\" href=\"errno.html\">Prev</a>\u00a0</td><th width=\"60%\" align=\"center\">Chapter\u00a05.\u00a0\n   Diagnostics\n   \n </th><td width=\"20%\" align=\"right\">\u00a0<a accesskey=\"n\" href=\"utilities.html\">Next</a></td></tr></table><hr /></div><div class=\"section\"><div class=\"titlepage\"><div><div><h2 class=\"title\" style=\"clear: both\"><a id=\"std.diagnostics.concept_checking\"></a>Concept Checking</h2></div></div></div><p>\n@@ -41,10 +41,7 @@\n    for example template argument types may need to be complete when used in\n    a template definition, rather than at the point of instantiation.\n    There are no plans to address these shortcomings.\n- </p></div><div class=\"navfooter\"><hr /><table width=\"100%\" summary=\"Navigation footer\"><tr><td width=\"40%\" align=\"left\"><a accesskey=\"p\" href=\"diagnostics.html\">Prev</a>\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"u\" href=\"diagnostics.html\">Up</a></td><td width=\"40%\" align=\"right\">\u00a0<a accesskey=\"n\" href=\"utilities.html\">Next</a></td></tr><tr><td width=\"40%\" align=\"left\" valign=\"top\">Chapter\u00a05.\u00a0\n-  Diagnostics\n-  \n-\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"h\" href=\"../index.html\">Home</a></td><td width=\"40%\" align=\"right\" valign=\"top\">\u00a0Chapter\u00a06.\u00a0\n+ </p></div><div class=\"navfooter\"><hr /><table width=\"100%\" summary=\"Navigation footer\"><tr><td width=\"40%\" align=\"left\"><a accesskey=\"p\" href=\"errno.html\">Prev</a>\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"u\" href=\"diagnostics.html\">Up</a></td><td width=\"40%\" align=\"right\">\u00a0<a accesskey=\"n\" href=\"utilities.html\">Next</a></td></tr><tr><td width=\"40%\" align=\"left\" valign=\"top\">Use of errno by the library\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"h\" href=\"../index.html\">Home</a></td><td width=\"40%\" align=\"right\" valign=\"top\">\u00a0Chapter\u00a06.\u00a0\n   Utilities\n   \n </td></tr></table></div></body></html>\n\\ No newline at end of file"}, {"sha": "a90d5dfcc1daa1fe9eb1bfaf52d2d2e401ab210f", "filename": "libstdc++-v3/doc/html/manual/diagnostics.html", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fdiagnostics.html", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fdiagnostics.html", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fdiagnostics.html?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -1,13 +1,13 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n-<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\"><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><title>Chapter\u00a05.\u00a0 Diagnostics</title><meta name=\"generator\" content=\"DocBook XSL-NS Stylesheets V1.78.1\" /><meta name=\"keywords\" content=\"ISO C++, library\" /><meta name=\"keywords\" content=\"ISO C++, runtime, library\" /><link rel=\"home\" href=\"../index.html\" title=\"The GNU C++ Library\" /><link rel=\"up\" href=\"std_contents.html\" title=\"Part\u00a0II.\u00a0 Standard Contents\" /><link rel=\"prev\" href=\"termination.html\" title=\"Termination\" /><link rel=\"next\" href=\"concept_checking.html\" title=\"Concept Checking\" /></head><body><div class=\"navheader\"><table width=\"100%\" summary=\"Navigation header\"><tr><th colspan=\"3\" align=\"center\">Chapter\u00a05.\u00a0\n+<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\"><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /><title>Chapter\u00a05.\u00a0 Diagnostics</title><meta name=\"generator\" content=\"DocBook XSL-NS Stylesheets V1.78.1\" /><meta name=\"keywords\" content=\"ISO C++, library\" /><meta name=\"keywords\" content=\"ISO C++, runtime, library\" /><link rel=\"home\" href=\"../index.html\" title=\"The GNU C++ Library\" /><link rel=\"up\" href=\"std_contents.html\" title=\"Part\u00a0II.\u00a0 Standard Contents\" /><link rel=\"prev\" href=\"termination.html\" title=\"Termination\" /><link rel=\"next\" href=\"errno.html\" title=\"Use of errno by the library\" /></head><body><div class=\"navheader\"><table width=\"100%\" summary=\"Navigation header\"><tr><th colspan=\"3\" align=\"center\">Chapter\u00a05.\u00a0\n   Diagnostics\n   \n </th></tr><tr><td width=\"20%\" align=\"left\"><a accesskey=\"p\" href=\"termination.html\">Prev</a>\u00a0</td><th width=\"60%\" align=\"center\">Part\u00a0II.\u00a0\n     Standard Contents\n-  </th><td width=\"20%\" align=\"right\">\u00a0<a accesskey=\"n\" href=\"concept_checking.html\">Next</a></td></tr></table><hr /></div><div class=\"chapter\"><div class=\"titlepage\"><div><div><h2 class=\"title\"><a id=\"std.diagnostics\"></a>Chapter\u00a05.\u00a0\n+  </th><td width=\"20%\" align=\"right\">\u00a0<a accesskey=\"n\" href=\"errno.html\">Next</a></td></tr></table><hr /></div><div class=\"chapter\"><div class=\"titlepage\"><div><div><h2 class=\"title\"><a id=\"std.diagnostics\"></a>Chapter\u00a05.\u00a0\n   Diagnostics\n   <a id=\"id-1.3.4.3.1.1.1\" class=\"indexterm\"></a>\n-</h2></div></div></div><div class=\"toc\"><p><strong>Table of Contents</strong></p><dl class=\"toc\"><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions\">Exceptions</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.api\">API Reference</a></span></dt><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.data\">Adding Data to <code class=\"classname\">exception</code></a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"concept_checking.html\">Concept Checking</a></span></dt></dl></div><div class=\"section\"><div class=\"titlepage\"><div><div><h2 class=\"title\" style=\"clear: both\"><a id=\"std.diagnostics.exceptions\"></a>Exceptions</h2></div></div></div><div class=\"section\"><div class=\"titlepage\"><div><div><h3 class=\"title\"><a id=\"std.diagnostics.exceptions.api\"></a>API Reference</h3></div></div></div><p>\n+</h2></div></div></div><div class=\"toc\"><p><strong>Table of Contents</strong></p><dl class=\"toc\"><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions\">Exceptions</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.api\">API Reference</a></span></dt><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.data\">Adding Data to <code class=\"classname\">exception</code></a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"errno.html\">Use of errno by the library</a></span></dt><dt><span class=\"section\"><a href=\"concept_checking.html\">Concept Checking</a></span></dt></dl></div><div class=\"section\"><div class=\"titlepage\"><div><div><h2 class=\"title\" style=\"clear: both\"><a id=\"std.diagnostics.exceptions\"></a>Exceptions</h2></div></div></div><div class=\"section\"><div class=\"titlepage\"><div><div><h3 class=\"title\"><a id=\"std.diagnostics.exceptions.api\"></a>API Reference</h3></div></div></div><p>\n       All exception objects are defined in one of the standard header\n       files: <code class=\"filename\">exception</code>,\n       <code class=\"filename\">stdexcept</code>, <code class=\"filename\">new</code>, and\n@@ -39,4 +39,4 @@\n        int    e;\n        DBID   id;     // some user-defined type\n    };\n-   </pre></div></div></div><div class=\"navfooter\"><hr /><table width=\"100%\" summary=\"Navigation footer\"><tr><td width=\"40%\" align=\"left\"><a accesskey=\"p\" href=\"termination.html\">Prev</a>\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"u\" href=\"std_contents.html\">Up</a></td><td width=\"40%\" align=\"right\">\u00a0<a accesskey=\"n\" href=\"concept_checking.html\">Next</a></td></tr><tr><td width=\"40%\" align=\"left\" valign=\"top\">Termination\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"h\" href=\"../index.html\">Home</a></td><td width=\"40%\" align=\"right\" valign=\"top\">\u00a0Concept Checking</td></tr></table></div></body></html>\n\\ No newline at end of file\n+   </pre></div></div></div><div class=\"navfooter\"><hr /><table width=\"100%\" summary=\"Navigation footer\"><tr><td width=\"40%\" align=\"left\"><a accesskey=\"p\" href=\"termination.html\">Prev</a>\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"u\" href=\"std_contents.html\">Up</a></td><td width=\"40%\" align=\"right\">\u00a0<a accesskey=\"n\" href=\"errno.html\">Next</a></td></tr><tr><td width=\"40%\" align=\"left\" valign=\"top\">Termination\u00a0</td><td width=\"20%\" align=\"center\"><a accesskey=\"h\" href=\"../index.html\">Home</a></td><td width=\"40%\" align=\"right\" valign=\"top\">\u00a0Use of errno by the library</td></tr></table></div></body></html>\n\\ No newline at end of file"}, {"sha": "fbe657ef9dcb65d37192f6b591a30f5e6341b426", "filename": "libstdc++-v3/doc/html/manual/index.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Findex.html", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Findex.html", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Findex.html?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -12,7 +12,7 @@\n </a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"support.html#std.support.types\">Types</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"support.html#std.support.types.fundamental\">Fundamental Types</a></span></dt><dt><span class=\"section\"><a href=\"support.html#std.support.types.numeric_limits\">Numeric Properties</a></span></dt><dt><span class=\"section\"><a href=\"support.html#std.support.types.null\">NULL</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"dynamic_memory.html\">Dynamic Memory</a></span></dt><dt><span class=\"section\"><a href=\"termination.html\">Termination</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"termination.html#support.termination.handlers\">Termination Handlers</a></span></dt><dt><span class=\"section\"><a href=\"termination.html#support.termination.verbose\">Verbose Terminate Handler</a></span></dt></dl></dd></dl></dd><dt><span class=\"chapter\"><a href=\"diagnostics.html\">5. \n   Diagnostics\n   \n-</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions\">Exceptions</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.api\">API Reference</a></span></dt><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.data\">Adding Data to <code class=\"classname\">exception</code></a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"concept_checking.html\">Concept Checking</a></span></dt></dl></dd><dt><span class=\"chapter\"><a href=\"utilities.html\">6. \n+</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions\">Exceptions</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.api\">API Reference</a></span></dt><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.data\">Adding Data to <code class=\"classname\">exception</code></a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"errno.html\">Use of errno by the library</a></span></dt><dt><span class=\"section\"><a href=\"concept_checking.html\">Concept Checking</a></span></dt></dl></dd><dt><span class=\"chapter\"><a href=\"utilities.html\">6. \n   Utilities\n   \n </a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"utilities.html#std.util.functors\">Functors</a></span></dt><dt><span class=\"section\"><a href=\"pairs.html\">Pairs</a></span></dt><dt><span class=\"section\"><a href=\"memory.html\">Memory</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#std.util.memory.allocator\">Allocators</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#allocator.req\">Requirements</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.design_issues\">Design Issues</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.impl\">Implementation</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#allocator.interface\">Interface Design</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.default\">Selecting Default Allocation Policy</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.caching\">Disabling Memory Caching</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#allocator.using\">Using a Specific Allocator</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.custom\">Custom Allocators</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.ext\">Extension Allocators</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#std.util.memory.auto_ptr\">auto_ptr</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#auto_ptr.limitations\">Limitations</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#auto_ptr.using\">Use in Containers</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#std.util.memory.shared_ptr\">shared_ptr</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.req\">Requirements</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.design_issues\">Design Issues</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.impl\">Implementation</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.hier\">Class Hierarchy</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.thread\">Thread Safety</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.policy\">Selecting Lock Policy</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.rel\">Related functions and classes</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.using\">Use</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.examples\">Examples</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.issues\">Unresolved Issues</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.ack\">Acknowledgments</a></span></dt></dl></dd></dl></dd><dt><span class=\"section\"><a href=\"traits.html\">Traits</a></span></dt></dl></dd><dt><span class=\"chapter\"><a href=\"strings.html\">7. "}, {"sha": "c7c6114aa637263dd6498bb2c60d94c096145664", "filename": "libstdc++-v3/doc/html/manual/std_contents.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fstd_contents.html", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fstd_contents.html", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fhtml%2Fmanual%2Fstd_contents.html?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -9,7 +9,7 @@\n </a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"support.html#std.support.types\">Types</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"support.html#std.support.types.fundamental\">Fundamental Types</a></span></dt><dt><span class=\"section\"><a href=\"support.html#std.support.types.numeric_limits\">Numeric Properties</a></span></dt><dt><span class=\"section\"><a href=\"support.html#std.support.types.null\">NULL</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"dynamic_memory.html\">Dynamic Memory</a></span></dt><dt><span class=\"section\"><a href=\"termination.html\">Termination</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"termination.html#support.termination.handlers\">Termination Handlers</a></span></dt><dt><span class=\"section\"><a href=\"termination.html#support.termination.verbose\">Verbose Terminate Handler</a></span></dt></dl></dd></dl></dd><dt><span class=\"chapter\"><a href=\"diagnostics.html\">5. \n   Diagnostics\n   \n-</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions\">Exceptions</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.api\">API Reference</a></span></dt><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.data\">Adding Data to <code class=\"classname\">exception</code></a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"concept_checking.html\">Concept Checking</a></span></dt></dl></dd><dt><span class=\"chapter\"><a href=\"utilities.html\">6. \n+</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions\">Exceptions</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.api\">API Reference</a></span></dt><dt><span class=\"section\"><a href=\"diagnostics.html#std.diagnostics.exceptions.data\">Adding Data to <code class=\"classname\">exception</code></a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"errno.html\">Use of errno by the library</a></span></dt><dt><span class=\"section\"><a href=\"concept_checking.html\">Concept Checking</a></span></dt></dl></dd><dt><span class=\"chapter\"><a href=\"utilities.html\">6. \n   Utilities\n   \n </a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"utilities.html#std.util.functors\">Functors</a></span></dt><dt><span class=\"section\"><a href=\"pairs.html\">Pairs</a></span></dt><dt><span class=\"section\"><a href=\"memory.html\">Memory</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#std.util.memory.allocator\">Allocators</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#allocator.req\">Requirements</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.design_issues\">Design Issues</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.impl\">Implementation</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#allocator.interface\">Interface Design</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.default\">Selecting Default Allocation Policy</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.caching\">Disabling Memory Caching</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#allocator.using\">Using a Specific Allocator</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.custom\">Custom Allocators</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#allocator.ext\">Extension Allocators</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#std.util.memory.auto_ptr\">auto_ptr</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#auto_ptr.limitations\">Limitations</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#auto_ptr.using\">Use in Containers</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#std.util.memory.shared_ptr\">shared_ptr</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.req\">Requirements</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.design_issues\">Design Issues</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.impl\">Implementation</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.hier\">Class Hierarchy</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.thread\">Thread Safety</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.policy\">Selecting Lock Policy</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.rel\">Related functions and classes</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.using\">Use</a></span></dt><dd><dl><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.examples\">Examples</a></span></dt><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.issues\">Unresolved Issues</a></span></dt></dl></dd><dt><span class=\"section\"><a href=\"memory.html#shared_ptr.ack\">Acknowledgments</a></span></dt></dl></dd></dl></dd><dt><span class=\"section\"><a href=\"traits.html\">Traits</a></span></dt></dl></dd><dt><span class=\"chapter\"><a href=\"strings.html\">7. "}, {"sha": "67620e2cb403486120a8c8cdaa789bb303afe90e", "filename": "libstdc++-v3/doc/xml/manual/diagnostics.xml", "status": "modified", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fdiagnostics.xml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fdiagnostics.xml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2Fxml%2Fmanual%2Fdiagnostics.xml?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -71,6 +71,39 @@\n   </section>\n </section>\n \n+<section xml:id=\"std.diagnostics.errno\" xreflabel=\"errno\"><info><title>Use of errno by the library</title></info>\n+  <?dbhtml filename=\"errno.html\"?>\n+\n+  <para>\n+    The C and POSIX standards guarantee that <varname>errno</varname>\n+    is never set to zero by any library function.\n+    The C++ standard has less to say about when <varname>errno</varname>\n+    is or isn't set, but libstdc++ follows the same rule and never sets\n+    it to zero.\n+  </para>\n+\n+  <para>\n+    On the other hand, there are few guarantees about when the C++ library\n+    sets <varname>errno</varname> on error, beyond what is specified for\n+    functions that come from the C library.\n+    For example, when <function>std::stoi</function> throws an exception of\n+    type <classname>std::out_of_range</classname>, <varname>errno</varname>\n+    may or may not have been set to <constant>ERANGE</constant>.\n+  </para>\n+\n+  <para>\n+    Parts of the C++ library may be implemented in terms of C library\n+    functions, which may result in <varname>errno</varname> being set\n+    with no explicit call to a C function. For example, on a target where\n+    <function>operator new</function> uses <function>malloc</function>\n+    a failed memory allocation with <function>operator new</function> might\n+    set <varname>errno</varname> to <constant>ENOMEM</constant>.\n+    Which C++ library functions can set <varname>errno</varname> in this way\n+    is unspecified because it may vary between platforms and between releases.\n+  </para>\n+\n+</section>\n+\n <section xml:id=\"std.diagnostics.concept_checking\" xreflabel=\"Concept Checking\"><info><title>Concept Checking</title></info>\n   <?dbhtml filename=\"concept_checking.html\"?>\n   "}, {"sha": "7f37e694182574014d05e61f173da196c0135b1c", "filename": "libstdc++-v3/include/ext/string_conversions.h", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstring_conversions.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f14decafae0d1771e16498e693e7bf2f7058e88e/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstring_conversions.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstring_conversions.h?ref=f14decafae0d1771e16498e693e7bf2f7058e88e", "patch": "@@ -58,8 +58,13 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       _Ret __ret;\n \n       _CharT* __endptr;\n-      const int __saved_errno = errno;\n-      errno = 0;\n+\n+      struct _Save_errno {\n+\t_Save_errno() : _M_errno(errno) { errno = 0; }\n+\t~_Save_errno() { if (errno == 0) errno = _M_errno; }\n+\tint _M_errno;\n+      } const __save_errno;\n+\n       const _TRet __tmp = __convf(__str, &__endptr, __base...);\n \n       if (__endptr == __str)\n@@ -71,7 +76,6 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \tstd::__throw_out_of_range(__name);\n       else\n \t__ret = __tmp;\n-      errno = __saved_errno;\n \n       if (__idx)\n \t*__idx = __endptr - __str;"}]}