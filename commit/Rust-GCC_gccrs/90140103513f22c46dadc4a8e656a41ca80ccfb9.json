{"sha": "90140103513f22c46dadc4a8e656a41ca80ccfb9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAxNDAxMDM1MTNmMjJjNDZkYWRjNGE4ZTY1NmE0MWNhODBjY2ZiOQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-11-11T00:11:24Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-11-11T00:11:24Z"}, "message": "(FUNCTION_{PRO,EPI}LOGUE): Add code to adjust stack when no frame\npointer.\n\nFrom-SVN: r8415", "tree": {"sha": "8f68e38b7a5720ac4060fa2aafb4d291f88f9d8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f68e38b7a5720ac4060fa2aafb4d291f88f9d8d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90140103513f22c46dadc4a8e656a41ca80ccfb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90140103513f22c46dadc4a8e656a41ca80ccfb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90140103513f22c46dadc4a8e656a41ca80ccfb9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90140103513f22c46dadc4a8e656a41ca80ccfb9/comments", "author": null, "committer": null, "parents": [{"sha": "931493c6b26bf46d23d9a746d2bb58237e0e436b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/931493c6b26bf46d23d9a746d2bb58237e0e436b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/931493c6b26bf46d23d9a746d2bb58237e0e436b"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "edcacdf944d236ccc0d0754f80767c1686f77ebd", "filename": "gcc/config/m68k/crds.h", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90140103513f22c46dadc4a8e656a41ca80ccfb9/gcc%2Fconfig%2Fm68k%2Fcrds.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90140103513f22c46dadc4a8e656a41ca80ccfb9/gcc%2Fconfig%2Fm68k%2Fcrds.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fcrds.h?ref=90140103513f22c46dadc4a8e656a41ca80ccfb9", "patch": "@@ -493,6 +493,18 @@ do {  int i;\t\t\t\t\t\t\t\t\\\n         fprintf (FILE, \"\\tlink a6,$%d\\n\", -fsize);\t\t\\\n       else\t\t\t\t\t\t\t\\\n \tfprintf (FILE, \"\\tlink a6,$0\\n\\tsubl $%d,sp\\n\", fsize); }  \\\n+  else if (fsize)\t\t\t\t\t\t      \\\n+    {\t\t\t\t\t\t\t\t      \\\n+      /* Adding negative number is faster on the 68040.  */\t      \\\n+      if (fsize + 4 < 0x8000)\t\t\t\t\t      \\\n+\t{\t\t\t\t\t\t\t      \\\n+\t  fprintf (FILE, \"\\tadd.w #%d,sp\\n\", - (fsize + 4));\t      \\\n+\t}\t\t\t\t\t\t\t      \\\n+      else\t\t\t\t\t\t\t      \\\n+\t{\t\t\t\t\t\t\t      \\\n+\t  fprintf (FILE, \"\\tadd.l #%d,sp\\n\", - (fsize + 4));          \\\n+\t}\t\t\t\t\t\t\t      \\\n+    }\t\t\t\t\t\t\t\t      \\\n   for (regno = 24; regno < 56; regno++)\t\t\t\t\\\n     if (regs_ever_live[regno] && ! call_used_regs[regno])\t\\\n       fprintf(FILE, \"\\tfpmoved %s, sp@-\\n\",\t\t\t\\\n@@ -602,6 +614,17 @@ do {  int i;\t\t\t\t\t\t\t\t\\\n       }\t\t\t\t\t\t\t\t\\\n   if (frame_pointer_needed)\t\t\t\t\t\\\n     fprintf (FILE, \"\\tunlk a6\\n\");\t\t\t\t\\\n+  else if (fsize)                                                     \\\n+    {                                                                 \\\n+      if (fsize + 4 < 0x8000)                                         \\\n+\t{                                                             \\\n+\t  fprintf (FILE, \"\\tadd.w #%d,sp\\n\", fsize + 4);              \\\n+\t}                                                             \\\n+      else                                                            \\\n+\t{                                                             \\\n+\t  fprintf (FILE, \"\\tadd.l #%d,sp\\n\", fsize + 4);              \\\n+\t}                                                             \\\n+    }                                                                 \\\n   if (current_function_pops_args)\t\t\t\t\\\n     fprintf (FILE, \"\\trtd $%d\\n\", current_function_pops_args);\t\\\n   else fprintf (FILE, \"\\trts\\n\"); }"}]}