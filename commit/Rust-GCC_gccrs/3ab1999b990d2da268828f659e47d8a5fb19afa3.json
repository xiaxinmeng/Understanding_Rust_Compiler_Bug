{"sha": "3ab1999b990d2da268828f659e47d8a5fb19afa3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FiMTk5OWI5OTBkMmRhMjY4ODI4ZjY1OWU0N2Q4YTVmYjE5YWZhMw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-06-09T22:37:37Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-06-09T22:37:37Z"}, "message": "(c_build_type_variant): Don't futz with main type variant of array since C...\n\n(c_build_type_variant): Don't futz with main type variant of array\nsince C Standard requires main type variant of array-of-const also be\narray-of-const.\n\nFrom-SVN: r14195", "tree": {"sha": "ecfefe9fdf758f59d455a04d5c1cec44a4cbfd4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ecfefe9fdf758f59d455a04d5c1cec44a4cbfd4a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ab1999b990d2da268828f659e47d8a5fb19afa3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ab1999b990d2da268828f659e47d8a5fb19afa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ab1999b990d2da268828f659e47d8a5fb19afa3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ab1999b990d2da268828f659e47d8a5fb19afa3/comments", "author": null, "committer": null, "parents": [{"sha": "a68d4b75929b0247ce8dfd6e63e8ef17d2549111", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a68d4b75929b0247ce8dfd6e63e8ef17d2549111", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a68d4b75929b0247ce8dfd6e63e8ef17d2549111"}], "stats": {"total": 25, "additions": 3, "deletions": 22}, "files": [{"sha": "c282f16663e13e68c20ec9ec64135f259669ae9d", "filename": "gcc/c-common.c", "status": "modified", "additions": 3, "deletions": 22, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ab1999b990d2da268828f659e47d8a5fb19afa3/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ab1999b990d2da268828f659e47d8a5fb19afa3/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=3ab1999b990d2da268828f659e47d8a5fb19afa3", "patch": "@@ -2514,27 +2514,8 @@ c_build_type_variant (type, constp, volatilep)\n      int constp, volatilep;\n {\n   if (TREE_CODE (type) == ARRAY_TYPE)\n-    {\n-      tree real_main_variant = TYPE_MAIN_VARIANT (type);\n-\n-      push_obstacks (TYPE_OBSTACK (real_main_variant),\n-\t\t     TYPE_OBSTACK (real_main_variant));\n-      type = build_array_type (c_build_type_variant (TREE_TYPE (type),\n-\t\t\t\t\t\t     constp, volatilep),\n-\t\t\t       TYPE_DOMAIN (type));\n-\n-      /* TYPE must be on same obstack as REAL_MAIN_VARIANT.  If not,\n-\t make a copy.  (TYPE might have come from the hash table and\n-\t REAL_MAIN_VARIANT might be in some function's obstack.)  */\n-\n-      if (TYPE_OBSTACK (type) != TYPE_OBSTACK (real_main_variant))\n-\t{\n-\t  type = copy_node (type);\n-\t  TYPE_POINTER_TO (type) = TYPE_REFERENCE_TO (type) = 0;\n-\t}\n-\n-      TYPE_MAIN_VARIANT (type) = real_main_variant;\n-      pop_obstacks ();\n-    }\n+    return build_array_type (c_build_type_variant (TREE_TYPE (type),\n+\t\t\t\t\t\t   constp, volatilep),\n+\t\t\t     TYPE_DOMAIN (type));\n   return build_type_variant (type, constp, volatilep);\n }"}]}