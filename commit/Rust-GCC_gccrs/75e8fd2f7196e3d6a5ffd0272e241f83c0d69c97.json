{"sha": "75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzVlOGZkMmY3MTk2ZTNkNmE1ZmZkMDI3MmUyNDFmODNjMGQ2OWM5Nw==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2008-05-27T18:57:10Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2008-05-27T18:57:10Z"}, "message": "fortran-torture.exp (get-fortran-torture-options): New function, replacing old FORTRAN_TORTURE_OPTIONS code.\n\ngcc/testsuite/\n\t* lib/fortran-torture.exp (get-fortran-torture-options):\n\tNew function, replacing old FORTRAN_TORTURE_OPTIONS code.\n\t* gfortran.fortran-torture/compile/compile.exp: Use\n\t[get-fortran-torture-options] instead of $FORTRAN_TORTURE_OPTIONS.\n\t* gfortran.fortran-torture/execute/execute.exp: Likewise.\n\nFrom-SVN: r136050", "tree": {"sha": "85583dd10e025d8214565b0252caef2a519217ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85583dd10e025d8214565b0252caef2a519217ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3395aa0532ff98b73cc64ad83e8940c40e78acae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3395aa0532ff98b73cc64ad83e8940c40e78acae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3395aa0532ff98b73cc64ad83e8940c40e78acae"}], "stats": {"total": 37, "additions": 27, "deletions": 10}, "files": [{"sha": "b94e9d92f9cca7e1cc727d2996cb86b20622869c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "patch": "@@ -1,3 +1,11 @@\n+2008-05-27  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* lib/fortran-torture.exp (get-fortran-torture-options):\n+\tNew function, replacing old FORTRAN_TORTURE_OPTIONS code.\n+\t* gfortran.fortran-torture/compile/compile.exp: Use\n+\t[get-fortran-torture-options] instead of $FORTRAN_TORTURE_OPTIONS.\n+\t* gfortran.fortran-torture/execute/execute.exp: Likewise.\n+\n 2008-05-27  Michael Matz  <matz@suse.de>\n \n \tPR c++/27975"}, {"sha": "6c4890d7b72f475549d2e984ce36cd55ef5b7d72", "filename": "gcc/testsuite/gfortran.fortran-torture/compile/compile.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fcompile.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fcompile.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fcompile.exp?ref=75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "patch": "@@ -26,7 +26,7 @@ load_lib fortran-torture.exp\n load_lib torture-options.exp\n \n torture-init\n-set-torture-options $FORTRAN_TORTURE_OPTIONS\n+set-torture-options [get-fortran-torture-options]\n \n foreach testcase [lsort [glob -nocomplain $srcdir/$subdir/*.f]] {\n     # If we're only testing specific files and this isn't one of them, skip it."}, {"sha": "2dd408df2d6023ec3517033b947591ccacae0bcb", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/execute.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fexecute.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fexecute.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fexecute.exp?ref=75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "patch": "@@ -30,7 +30,7 @@ load_lib fortran-torture.exp\n load_lib torture-options.exp\n \n torture-init\n-set-torture-options $FORTRAN_TORTURE_OPTIONS\n+set-torture-options [get-fortran-torture-options]\n \n foreach testcase [lsort [glob -nocomplain $srcdir/$subdir/*.f]] {\n     # If we're only testing specific files and this isn't one of them, skip it."}, {"sha": "6e49fac834c111c15685c4cd60cd3eea805c38d1", "filename": "gcc/testsuite/lib/fortran-torture.exp", "status": "modified", "additions": 17, "deletions": 8, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp?ref=75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "patch": "@@ -22,12 +22,16 @@\n \n load_lib target-supports.exp\n \n+# Return the list of options to use for fortran torture tests.\n # The default option list can be overridden by\n # TORTURE_OPTIONS=\"{ { list1 } ... { listN } }\"\n+proc get-fortran-torture-options { } {\n+    global TORTURE_OPTIONS\n+\n+    if [info exists TORTURE_OPTIONS] {\n+\treturn $TORTURE_OPTIONS\n+    }\n \n-if [info exists TORTURE_OPTIONS] {\n-    set FORTRAN_TORTURE_OPTIONS $TORTURE_OPTIONS\n-} else {\n     # determine if host supports vectorization, and the necessary set\n     # of options, based on code from testsuite/vect/vect.exp\n \n@@ -61,17 +65,22 @@ if [info exists TORTURE_OPTIONS] {\n \tset test_tree_vectorize 0\n     }\n \n-    set FORTRAN_TORTURE_OPTIONS [list \\\n-\t{ -O0 } { -O1 } { -O2 } \\\n+    set options {}\n+\n+    lappend options \\\n+\t{ -O0 } \\\n+\t{ -O1 } \\\n+\t{ -O2 } \\\n \t{ -O2 -fomit-frame-pointer -finline-functions } \\\n \t{ -O2 -fomit-frame-pointer -finline-functions -funroll-loops } \\\n \t{ -O2 -fbounds-check } \\\n \t{ -O3 -g } \\\n-\t{ -Os }]\n-\n+\t{ -Os }\n     if { $test_tree_vectorize } {\n-\tlappend FORTRAN_TORTURE_OPTIONS $vectorizer_options\n+\tlappend options $vectorizer_options\n     }\n+\n+    return $options\n }\n \n "}]}