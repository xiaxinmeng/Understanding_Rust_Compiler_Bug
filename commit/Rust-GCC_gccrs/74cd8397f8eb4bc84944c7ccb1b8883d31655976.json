{"sha": "74cd8397f8eb4bc84944c7ccb1b8883d31655976", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzRjZDgzOTdmOGViNGJjODQ5NDRjN2NjYjFiODg4M2QzMTY1NTk3Ng==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-11-28T10:30:44Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-11-28T10:30:44Z"}, "message": "pt.c (check_explicit_specialization): Complain about using a template-id for a non-specialization.\n\n\t* pt.c (check_explicit_specialization): Complain about using a\n\ttemplate-id for a non-specialization.\n\nFri Nov 28 01:56:35 1997  Bruno Haible  <bruno@linuix.mathematik.uni-karlsruhe.de>\n\n        * error.c (dump_decl): Handle TEMPLATE_ID_EXPR.\n\nFrom-SVN: r16818", "tree": {"sha": "e9b9014de908dd14b658cdeee6cb4f339ef09d5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9b9014de908dd14b658cdeee6cb4f339ef09d5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74cd8397f8eb4bc84944c7ccb1b8883d31655976", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74cd8397f8eb4bc84944c7ccb1b8883d31655976", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74cd8397f8eb4bc84944c7ccb1b8883d31655976", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74cd8397f8eb4bc84944c7ccb1b8883d31655976/comments", "author": null, "committer": null, "parents": [{"sha": "6a0d3671ed17ad3114170c5d79e1ca75c68946d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a0d3671ed17ad3114170c5d79e1ca75c68946d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a0d3671ed17ad3114170c5d79e1ca75c68946d1"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "7ceb75a00d56aff9f8c17c5d39239f880f5ce167", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74cd8397f8eb4bc84944c7ccb1b8883d31655976/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74cd8397f8eb4bc84944c7ccb1b8883d31655976/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=74cd8397f8eb4bc84944c7ccb1b8883d31655976", "patch": "@@ -1,3 +1,12 @@\n+Fri Nov 28 01:58:14 1997  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* pt.c (check_explicit_specialization): Complain about using a \n+\ttemplate-id for a non-specialization.\n+\n+Fri Nov 28 01:56:35 1997  Bruno Haible  <bruno@linuix.mathematik.uni-karlsruhe.de>\n+\n+        * error.c (dump_decl): Handle TEMPLATE_ID_EXPR.\n+\n Thu Nov 27 00:59:46 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* typeck.c (build_const_cast): Handle references here instead of"}, {"sha": "ccc5b46113ec595ac4f42b37c3e7d978d53adb5a", "filename": "gcc/cp/error.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74cd8397f8eb4bc84944c7ccb1b8883d31655976/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74cd8397f8eb4bc84944c7ccb1b8883d31655976/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=74cd8397f8eb4bc84944c7ccb1b8883d31655976", "patch": "@@ -776,6 +776,24 @@ dump_decl (t, v)\n       }\n       break;\n \n+    case TEMPLATE_ID_EXPR:\n+      {\n+\ttree args;\n+\tdump_type (TREE_OPERAND (t, 0), v);\n+\tOB_PUTC ('<');\n+\tfor (args = TREE_OPERAND (t, 1); args; args = TREE_CHAIN (args))\n+\t  {\n+\t    if (TREE_CODE_CLASS (TREE_CODE (TREE_VALUE (args))) == 't')\n+\t      dump_type (TREE_VALUE (args), 0);\n+\t    else\n+\t      dump_expr (TREE_VALUE (args), 0);\n+\t    if (TREE_CHAIN (args))\n+\t      OB_PUTC2 (',', ' ');\n+\t  }\n+\tOB_PUTC ('>');\n+      }\n+      break;\n+\n     case LABEL_DECL:\n       OB_PUTID (DECL_NAME (t));\n       break;"}, {"sha": "1e9c9053717af83b5c60edbeaddc588c3296bed5", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74cd8397f8eb4bc84944c7ccb1b8883d31655976/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74cd8397f8eb4bc84944c7ccb1b8883d31655976/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=74cd8397f8eb4bc84944c7ccb1b8883d31655976", "patch": "@@ -496,12 +496,19 @@ check_explicit_specialization (declarator, decl, template_count, flags)\n \t  && !processing_explicit_specialization (template_count)\n \t  && !is_friend)\n \t{\n-\t  if (!have_def)\n+\t  if (!have_def && ! template_header_count)\n \t    /* This is not an explicit specialization.  It must be\n \t       an explicit instantiation.  */\n \t    return 2;\n+\t  else if (template_header_count > template_count\n+\t\t   && !processing_specialization)\n+\t    {\n+\t      cp_error (\"template-id `%D' in declaration of primary template\",\n+\t\t\tdeclarator);\n+\t      return 0;\n+\t    }\n \t  else if (pedantic)\n-\t    pedwarn (\"Explicit specialization not preceeded by `template <>'\");\n+\t    pedwarn (\"explicit specialization not preceeded by `template <>'\");\n \t}\n \n       if (TREE_CODE (declarator) != TEMPLATE_ID_EXPR)"}]}