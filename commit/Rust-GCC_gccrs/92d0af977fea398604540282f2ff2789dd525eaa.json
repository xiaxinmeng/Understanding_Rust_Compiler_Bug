{"sha": "92d0af977fea398604540282f2ff2789dd525eaa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJkMGFmOTc3ZmVhMzk4NjA0NTQwMjgyZjJmZjI3ODlkZDUyNWVhYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-08-28T16:08:02Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-08-28T16:08:02Z"}, "message": "re PR c++/32596 (ICE with inline template specialization in anonymous namespace)\n\n\tPR c++/32596\n\tPR c++/32400\n\t* pt.c (check_explicit_specialization): Set DECL_INTERFACE_KNOWN\n\tand DECL_NOT_REALLY_EXTERN if tmpl_func is not public.\n\n\t* g++.dg/ext/visibility/anon5.C: New test.\n\nFrom-SVN: r127863", "tree": {"sha": "2419cf0c920ad4437cda9f7d671ade83c7f294b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2419cf0c920ad4437cda9f7d671ade83c7f294b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92d0af977fea398604540282f2ff2789dd525eaa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92d0af977fea398604540282f2ff2789dd525eaa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92d0af977fea398604540282f2ff2789dd525eaa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92d0af977fea398604540282f2ff2789dd525eaa/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6a1eb6a415d1a6336064babf147fba345e0d42bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a1eb6a415d1a6336064babf147fba345e0d42bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a1eb6a415d1a6336064babf147fba345e0d42bb"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "f612c9cb9d6ad26219a37918997e55e1c5e51281", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=92d0af977fea398604540282f2ff2789dd525eaa", "patch": "@@ -1,3 +1,10 @@\n+2007-08-28  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/32596\n+\tPR c++/32400\n+\t* pt.c (check_explicit_specialization): Set DECL_INTERFACE_KNOWN\n+\tand DECL_NOT_REALLY_EXTERN if tmpl_func is not public.\n+\n 2007-08-27  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/28558"}, {"sha": "e33197c5c45dd33256b2959a22f16a194b36adb9", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=92d0af977fea398604540282f2ff2789dd525eaa", "patch": "@@ -2217,6 +2217,11 @@ check_explicit_specialization (tree declarator,\n               /* This specialization has the same linkage and visibility as\n                  the function template it specializes.  */\n               TREE_PUBLIC (decl) = TREE_PUBLIC (tmpl_func);\n+\t      if (! TREE_PUBLIC (decl))\n+\t\t{\n+\t\t  DECL_INTERFACE_KNOWN (decl) = 1;\n+\t\t  DECL_NOT_REALLY_EXTERN (decl) = 1;\n+\t\t}\n               DECL_THIS_STATIC (decl) = DECL_THIS_STATIC (tmpl_func);\n               if (DECL_VISIBILITY_SPECIFIED (tmpl_func))\n                 {"}, {"sha": "0bbe27a9befcb7da6f245945f707d1041d43dd0c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=92d0af977fea398604540282f2ff2789dd525eaa", "patch": "@@ -1,3 +1,8 @@\n+2007-08-28  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/32596\n+\t* g++.dg/ext/visibility/anon5.C: New test.\n+\n 2007-07-28  Dominique d'Humieres  <dominiq@lps.ens.fr>\n \n \t* gfortran.dg/gamma_4.f90: Fix large-real kind selection."}, {"sha": "d069eeab661d725f5a12490ede0f3352f0722e08", "filename": "gcc/testsuite/g++.dg/ext/visibility/anon5.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92d0af977fea398604540282f2ff2789dd525eaa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvisibility%2Fanon5.C?ref=92d0af977fea398604540282f2ff2789dd525eaa", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/32596\n+// { dg-do compile }\n+\n+namespace\n+{\n+  template<class T> inline void char_less(void) { }\n+  template<> inline void char_less<char>(void) { }\n+}"}]}