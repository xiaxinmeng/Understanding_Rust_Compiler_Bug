{"sha": "5e40542f878127a1dd0421831c03cda1b977f2a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU0MDU0MmY4NzgxMjdhMWRkMDQyMTgzMWMwM2NkYTFiOTc3ZjJhMA==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2021-02-11T23:07:56Z"}, "committer": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2021-02-11T23:07:56Z"}, "message": "libgomp/i386: Revert the type of syscall wrappers output back to long.\n\nLinux man-pages 5.07 wrongly declares syscall output type as int.  This error\nwas fixed in release 5.10, so this patch reverts my recent change.\n\n2021-02-11  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n\nlibgomp/\n\t* config/linux/x86/futex.h (__futex_wait):\n\tRevert output type back to long.\n\t(__futex_wake): Ditto.\n\t(futex_wait): Update for revert.\n\t(futex_wake): Ditto.", "tree": {"sha": "140c99a6b23345ab632f58cb37bdb0876d4d063a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/140c99a6b23345ab632f58cb37bdb0876d4d063a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e40542f878127a1dd0421831c03cda1b977f2a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e40542f878127a1dd0421831c03cda1b977f2a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e40542f878127a1dd0421831c03cda1b977f2a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e40542f878127a1dd0421831c03cda1b977f2a0/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c36ad24e8a4098e2b3e59f682a6ae751d656102c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c36ad24e8a4098e2b3e59f682a6ae751d656102c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c36ad24e8a4098e2b3e59f682a6ae751d656102c"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "e7f53399a4e03848f8ea9afedc66ac8c469897a9", "filename": "libgomp/config/linux/x86/futex.h", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e40542f878127a1dd0421831c03cda1b977f2a0/libgomp%2Fconfig%2Flinux%2Fx86%2Ffutex.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e40542f878127a1dd0421831c03cda1b977f2a0/libgomp%2Fconfig%2Flinux%2Fx86%2Ffutex.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfig%2Flinux%2Fx86%2Ffutex.h?ref=5e40542f878127a1dd0421831c03cda1b977f2a0", "patch": "@@ -30,10 +30,10 @@\n #  define SYS_futex\t202\n # endif\n \n-static inline int\n+static inline long\n __futex_wait (int *addr, int futex_op, int val)\n {\n-  int res;\n+  long res;\n \n   register void *timeout __asm (\"r10\") = NULL;\n   __asm volatile (\"syscall\"\n@@ -44,10 +44,10 @@ __futex_wait (int *addr, int futex_op, int val)\n   return res;\n }\n \n-static inline int\n+static inline long\n __futex_wake (int *addr, int futex_op, int count)\n {\n-  int res;\n+  long res;\n \n   __asm volatile (\"syscall\"\n \t\t  : \"=a\" (res)\n@@ -61,10 +61,10 @@ __futex_wake (int *addr, int futex_op, int count)\n #  define SYS_futex\t240\n # endif\n \n-static inline int\n+static inline long\n __futex_wait (int *addr, int futex_op, int val)\n {\n-  int res;\n+  long res;\n \n   void *timeout = NULL;\n   __asm volatile (\"int $0x80\"\n@@ -75,10 +75,10 @@ __futex_wait (int *addr, int futex_op, int val)\n   return res;\n }\n \n-static inline int\n+static inline long\n __futex_wake (int *addr, int futex_op, int count)\n {\n-  int res;\n+  long res;\n \n   __asm volatile (\"int $0x80\"\n \t\t  : \"=a\" (res)\n@@ -92,9 +92,9 @@ __futex_wake (int *addr, int futex_op, int count)\n static inline void\n futex_wait (int *addr, int val)\n {\n-  int res = __futex_wait (addr, gomp_futex_wait, val);\n+  long err = __futex_wait (addr, gomp_futex_wait, val);\n \n-  if (__builtin_expect (res == -ENOSYS, 0))\n+  if (__builtin_expect (err == -ENOSYS, 0))\n     {\n       gomp_futex_wait &= ~FUTEX_PRIVATE_FLAG;\n       gomp_futex_wake &= ~FUTEX_PRIVATE_FLAG;\n@@ -106,9 +106,9 @@ futex_wait (int *addr, int val)\n static inline void\n futex_wake (int *addr, int count)\n {\n-  int res = __futex_wake (addr, gomp_futex_wake, count);\n+  long err = __futex_wake (addr, gomp_futex_wake, count);\n \n-  if (__builtin_expect (res == -ENOSYS, 0))\n+  if (__builtin_expect (err == -ENOSYS, 0))\n     {\n       gomp_futex_wait &= ~FUTEX_PRIVATE_FLAG;\n       gomp_futex_wake &= ~FUTEX_PRIVATE_FLAG;"}]}