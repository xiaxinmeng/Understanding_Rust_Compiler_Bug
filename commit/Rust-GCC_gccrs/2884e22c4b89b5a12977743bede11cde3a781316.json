{"sha": "2884e22c4b89b5a12977743bede11cde3a781316", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg4NGUyMmM0Yjg5YjVhMTI5Nzc3NDNiZWRlMTFjZGUzYTc4MTMxNg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2006-08-25T17:03:50Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2006-08-25T17:03:50Z"}, "message": "re PR c++/28056 (enum accepted as scope)\n\n\tPR c++/28056\n\t* decl.c (grokdeclarator): Disallow declarations with qualified\n\tnames in local scopes.\n\tPR c++/28056\n\t* g++.dg/parse/local1.C: New test.\n\nFrom-SVN: r116410", "tree": {"sha": "a2988c448d8b37ffa24849355e13f63dc860b19d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2988c448d8b37ffa24849355e13f63dc860b19d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2884e22c4b89b5a12977743bede11cde3a781316", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2884e22c4b89b5a12977743bede11cde3a781316", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2884e22c4b89b5a12977743bede11cde3a781316", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2884e22c4b89b5a12977743bede11cde3a781316/comments", "author": null, "committer": null, "parents": [{"sha": "7d3bec9db50a2d46f697ad621edd50165e51c168", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d3bec9db50a2d46f697ad621edd50165e51c168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d3bec9db50a2d46f697ad621edd50165e51c168"}], "stats": {"total": 53, "additions": 51, "deletions": 2}, "files": [{"sha": "24fbf9aef27b2308279821ab476983ccef8db030", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2884e22c4b89b5a12977743bede11cde3a781316", "patch": "@@ -1,3 +1,9 @@\n+2006-08-25  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/28056\n+\t* decl.c (grokdeclarator): Disallow declarations with qualified\n+\tnames in local scopes.\n+\n 2006-08-25  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/27787"}, {"sha": "2d69cdbae0478b563847d889d7ee4382b51ecfc7", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=2884e22c4b89b5a12977743bede11cde3a781316", "patch": "@@ -6948,7 +6948,27 @@ grokdeclarator (const cp_declarator *declarator,\n \t      break;\n \t    if (qualifying_scope)\n \t      {\n-\t\tif (TYPE_P (qualifying_scope))\n+\t\tif (at_function_scope_p ())\n+\t\t  {\n+\t\t    /* [dcl.meaning] \n+\n+\t\t       A declarator-id shall not be qualified except\n+\t\t       for ... \n+\n+\t\t       None of the cases are permitted in block\n+\t\t       scope.  */\n+\t\t    if (qualifying_scope == global_namespace)\n+\t\t      error (\"invalid use of qualified-name %<::%D%>\",\n+\t\t\t     decl);\n+\t\t    else if (TYPE_P (qualifying_scope))\n+\t\t      error (\"invalid use of qualified-name %<%T::%D%>\",\n+\t\t\t     qualifying_scope, decl);\n+\t\t    else \n+\t\t      error (\"invalid use of qualified-name %<%D::%D%>\",\n+\t\t\t     qualifying_scope, decl);\n+\t\t    return error_mark_node;\n+\t\t  }\n+\t\telse if (TYPE_P (qualifying_scope))\n \t\t  {\n \t\t    ctype = qualifying_scope;\n \t\t    if (innermost_code != cdk_function"}, {"sha": "ee47bb34347d4d7a34ee3d9c492fdf7775e06e1f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2884e22c4b89b5a12977743bede11cde3a781316", "patch": "@@ -1,3 +1,8 @@\n+2006-08-25  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/28056\n+\t* g++.dg/parse/local1.C: New test.\n+\n 2006-08-25  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/27787"}, {"sha": "e4bae2315c244305cd33f87159f72691c2b2bbf1", "filename": "gcc/testsuite/g++.dg/other/qual1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fqual1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fqual1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fqual1.C?ref=2884e22c4b89b5a12977743bede11cde3a781316", "patch": "@@ -6,6 +6,6 @@ struct A\n   int i;\n   void foo()\n   {\n-    int A::i = i;  // { dg-error \"extra qualification|not a static member\" }\n+    int A::i = i;  // { dg-error \"qualified\" }\n   }\n };"}, {"sha": "cfcffc90864bc6f7b090dfaaf7b46751cbd4276c", "filename": "gcc/testsuite/g++.dg/parse/local1.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Flocal1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2884e22c4b89b5a12977743bede11cde3a781316/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Flocal1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Flocal1.C?ref=2884e22c4b89b5a12977743bede11cde3a781316", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/28056\n+\n+void f1();\n+\n+namespace N {\n+  void f2();\n+}\n+\n+class C {\n+  static void f3();\n+};\n+\n+void foo() { \n+  void ::f1();  // { dg-error \"qualified\" }\n+  void N::f2(); // { dg-error \"qualified\" }\n+  void C::f3(); // { dg-error \"qualified\" }\n+  void ::f4();  // { dg-error \"qualified\" }\n+}"}]}