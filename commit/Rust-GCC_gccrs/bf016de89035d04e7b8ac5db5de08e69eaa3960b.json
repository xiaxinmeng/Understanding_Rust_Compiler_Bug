{"sha": "bf016de89035d04e7b8ac5db5de08e69eaa3960b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmYwMTZkZTg5MDM1ZDA0ZTdiOGFjNWRiNWRlMDhlNjllYWEzOTYwYg==", "commit": {"author": {"name": "Rafael Avila de Espindola", "email": "espindola@google.com", "date": "2009-05-05T19:14:20Z"}, "committer": {"name": "Rafael Espindola", "email": "espindola@gcc.gnu.org", "date": "2009-05-05T19:14:20Z"}, "message": "Makefile.in (enable_plugin, [...]): New.\n\n2009-05-05  Rafael Avila de Espindola  <espindola@google.com>\n\n\t* Makefile.in (enable_plugin, plugin_includedir): New.\n\t(install): Depend on install-plugin.\n\t(PLUGIN_HEADERS): New.\n\t(install-plugin): New.\n\t* config.gcc: Add vxworks-dummy.h to tm_file for x86 and x86-64.\n\nFrom-SVN: r147130", "tree": {"sha": "283505dcbcebb39c8b8eb4682de5333f1c2bca12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/283505dcbcebb39c8b8eb4682de5333f1c2bca12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf016de89035d04e7b8ac5db5de08e69eaa3960b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf016de89035d04e7b8ac5db5de08e69eaa3960b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf016de89035d04e7b8ac5db5de08e69eaa3960b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf016de89035d04e7b8ac5db5de08e69eaa3960b/comments", "author": null, "committer": null, "parents": [{"sha": "7f8fdb9ff9fb2b2a67adcdb822956275e6c9fcdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f8fdb9ff9fb2b2a67adcdb822956275e6c9fcdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f8fdb9ff9fb2b2a67adcdb822956275e6c9fcdb"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "25b9af9a7a94c4a4fc38fe519eb34b9d52d00018", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf016de89035d04e7b8ac5db5de08e69eaa3960b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf016de89035d04e7b8ac5db5de08e69eaa3960b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bf016de89035d04e7b8ac5db5de08e69eaa3960b", "patch": "@@ -1,3 +1,11 @@\n+2009-05-05  Rafael Avila de Espindola  <espindola@google.com>\n+\n+\t* Makefile.in (enable_plugin, plugin_includedir): New.\n+\t(install): Depend on install-plugin.\n+\t(PLUGIN_HEADERS): New.\n+\t(install-plugin): New.\n+\t* config.gcc: Add vxworks-dummy.h to tm_file for x86 and x86-64.\n+\n 2009-05-05  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/40022"}, {"sha": "89ac51606b9943a7f6010287a72f0a160a4e17d8", "filename": "gcc/Makefile.in", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf016de89035d04e7b8ac5db5de08e69eaa3960b/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf016de89035d04e7b8ac5db5de08e69eaa3960b/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=bf016de89035d04e7b8ac5db5de08e69eaa3960b", "patch": "@@ -286,6 +286,8 @@ CLOOGINC = @CLOOGINC@\n # Libs and linker option needed for plugin support\n PLUGINLIBS = @pluginlibs@\n \n+enable_plugin = @enable_plugin@\n+\n CPPLIB = ../libcpp/libcpp.a\n CPPINC = -I$(srcdir)/../libcpp/include\n \n@@ -481,6 +483,8 @@ libexecdir = @libexecdir@\n libsubdir = $(libdir)/gcc/$(target_noncanonical)/$(version)\n # Directory in which the compiler finds executables\n libexecsubdir = $(libexecdir)/gcc/$(target_noncanonical)/$(version)\n+# Directory in which plugin headers are installed\n+plugin_includedir = $(libsubdir)/plugin/include\n # Used to produce a relative $(gcc_tooldir) in gcc.o\n unlibsubdir = ../../..\n # $(prefix), expressed as a path relative to $(libsubdir).\n@@ -3973,6 +3977,10 @@ install: install-common $(INSTALL_HEADERS) \\\n     install-cpp install-man install-info install-@POSUB@ \\\n     install-driver\n \n+ifeq ($(enable_plugin),yes)\n+install: install-plugin\n+endif\n+\n # Handle cpp installation.\n install-cpp: installdirs cpp$(exeext)\n \t-rm -f $(DESTDIR)$(bindir)/$(CPP_INSTALL_NAME)$(exeext)\n@@ -3994,6 +4002,35 @@ installdirs:\n \t$(mkinstalldirs) $(DESTDIR)$(man1dir)\n \t$(mkinstalldirs) $(DESTDIR)$(man7dir)\n \n+PLUGIN_HEADERS = $(TREE_H) $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) \\\n+  $(TOPLEV_H) $(BASIC_BLOCK_H) $(GIMPLE_H) $(TREE_PASS_H) gcc-plugin.h intl.h \\\n+  $(PLUGIN_VERSION_H)\n+\n+# Install the headers needed to build a plugin.\n+install-plugin: installdirs\n+# We keep the directory structure for files in config and .def files. All\n+# other files are flattened to a single directory.\n+\t$(mkinstalldirs) $(DESTDIR)$(plugin_includedir)\n+\theaders=`echo $(PLUGIN_HEADERS) | tr ' ' '\\n' | sort -u`; \\\n+\tfor file in $$headers; do \\\n+\t  if [ -f $$file ] ; then \\\n+\t    path=$$file; \\\n+\t  elif [ -f $(srcdir)/$$file ]; then \\\n+\t    path=$(srcdir)/$$file; \\\n+\t  else continue; \\\n+\t  fi; \\\n+\t  case $$path in \\\n+\t  \"$(srcdir)\"*/config/* | \"$(srcdir)\"*.def ) \\\n+\t    base=`echo $$path | sed \"s|$(srcdir)||\"`;; \\\n+\t  *) base=`basename $$path` ;; \\\n+\t  esac; \\\n+\t  dest=$(plugin_includedir)/$$base; \\\n+\t  echo $(INSTALL_DATA) $$path $(DESTDIR)/$$dest; \\\n+\t  dir=`dirname $$dest`; \\\n+\t  $(mkinstalldirs) $$dir; \\\n+\t  $(INSTALL_DATA) $$path $(DESTDIR)/$$dest; \\\n+\tdone\n+\n # Install the compiler executables built during cross compilation.\n install-common: native lang.install-common installdirs\n \tfor file in $(COMPILERS); do \\"}, {"sha": "503babea088ae87e4914c742a0e5d4fc61342a11", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf016de89035d04e7b8ac5db5de08e69eaa3960b/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf016de89035d04e7b8ac5db5de08e69eaa3960b/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=bf016de89035d04e7b8ac5db5de08e69eaa3960b", "patch": "@@ -375,12 +375,14 @@ i[34567]86-*-*)\n \tif test \"x$enable_cld\" = xyes; then\n \t\ttm_defines=\"${tm_defines} USE_IX86_CLD=1\"\n \tfi\n+\ttm_file=\"vxworks-dummy.h ${tm_file}\"\n \t;;\n x86_64-*-*)\n \ttm_file=\"i386/biarch64.h ${tm_file}\"\n \tif test \"x$enable_cld\" = xyes; then\n \t\ttm_defines=\"${tm_defines} USE_IX86_CLD=1\"\n \tfi\n+\ttm_file=\"vxworks-dummy.h ${tm_file}\"\n \t;;\n esac\n "}]}