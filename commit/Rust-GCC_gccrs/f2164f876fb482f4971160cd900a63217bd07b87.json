{"sha": "f2164f876fb482f4971160cd900a63217bd07b87", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjIxNjRmODc2ZmI0ODJmNDk3MTE2MGNkOTAwYTYzMjE3YmQwN2I4Nw==", "commit": {"author": {"name": "Ira Rosen", "email": "ira.rosen@linaro.org", "date": "2011-06-10T07:19:28Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2011-06-10T07:19:28Z"}, "message": "re PR tree-optimization/49318 (177.mesa in SPEC CPU 2000 failed to build)\n\n\n        PR tree-optimization/49318\n        * tree-vect-loop.c (vect_determine_vectorization_factor):\n        Remove irrelevant pattern statements.\n\nFrom-SVN: r174891", "tree": {"sha": "b517446256e9cd7f40f107096c251b33b283a257", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b517446256e9cd7f40f107096c251b33b283a257"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2164f876fb482f4971160cd900a63217bd07b87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2164f876fb482f4971160cd900a63217bd07b87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2164f876fb482f4971160cd900a63217bd07b87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2164f876fb482f4971160cd900a63217bd07b87/comments", "author": null, "committer": null, "parents": [{"sha": "6904f4b401d50c17b1a0dbd6eac64212700973fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6904f4b401d50c17b1a0dbd6eac64212700973fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6904f4b401d50c17b1a0dbd6eac64212700973fa"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "d6a320b8a2f53d45afc6c92a949e197cba307f35", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f2164f876fb482f4971160cd900a63217bd07b87", "patch": "@@ -1,3 +1,9 @@\n+2011-06-10  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/49318\n+\t* tree-vect-loop.c (vect_determine_vectorization_factor): Remove\n+\tirrelevant pattern statements.\n+\n 2011-06-10  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* system.h (SETJMP_VIA_SAVE_AREA): Poison."}, {"sha": "3ad4c213841c60b2c500815e45cf2311d136f4d9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f2164f876fb482f4971160cd900a63217bd07b87", "patch": "@@ -1,3 +1,8 @@\n+2011-06-10  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/49318\n+\t* gcc.dg/vect/pr49318.c: New test.\n+\n 2011-06-09  David Krauss  <potswa@mac.com>\n \n \t* g++.dg/template/arrow1.C: New."}, {"sha": "d1c270d6870c402867d7775243c4f632ff5552d8", "filename": "gcc/testsuite/gcc.dg/vect/pr49318.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr49318.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr49318.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr49318.c?ref=f2164f876fb482f4971160cd900a63217bd07b87", "patch": "@@ -0,0 +1,22 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target vect_int } */\n+/* { dg-require-effective-target vect_float } */\n+\n+typedef enum { GL_FALSE } GLenum;\n+typedef unsigned char GLboolean;\n+typedef int GLint;\n+typedef unsigned int GLuint;\n+typedef float GLfloat;\n+typedef double GLdouble;\n+typedef struct gl_context GLcontext;\n+struct gl_context {\n+  GLfloat TextureMatrix[16];\n+  GLenum Primitive;\n+};\n+void gl_GetDoublev( GLcontext *ctx, GLenum pname, GLdouble *params ) {\n+  GLuint i;\n+  for (i=0; i<16; i++)\n+    params[i] = (GLint) ctx->TextureMatrix[i];\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "8ff5ad04b33a00fe3c2aad67debd002ddca8979e", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2164f876fb482f4971160cd900a63217bd07b87/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=f2164f876fb482f4971160cd900a63217bd07b87", "patch": "@@ -255,10 +255,20 @@ vect_determine_vectorization_factor (loop_vec_info loop_vinfo)\n \n \t  gcc_assert (stmt_info);\n \n-\t  /* skip stmts which do not need to be vectorized.  */\n+\t  /* Skip stmts which do not need to be vectorized.  */\n \t  if (!STMT_VINFO_RELEVANT_P (stmt_info)\n \t      && !STMT_VINFO_LIVE_P (stmt_info))\n \t    {\n+              if (is_pattern_stmt_p (stmt_info))\n+                {\n+                   /* We are not going to vectorize this pattern statement,\n+                      therefore, remove it.  */\n+                  gimple_stmt_iterator tmp_gsi = gsi_for_stmt (stmt);\n+                  STMT_VINFO_RELATED_STMT (stmt_info) = NULL;\n+                  gsi_remove (&tmp_gsi, true);\n+                  free_stmt_vec_info (stmt);\n+                }\n+\n \t      if (vect_print_dump_info (REPORT_DETAILS))\n \t        fprintf (vect_dump, \"skip.\");\n \t      continue;"}]}