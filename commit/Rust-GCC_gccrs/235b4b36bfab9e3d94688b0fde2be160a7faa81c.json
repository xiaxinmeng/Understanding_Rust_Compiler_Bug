{"sha": "235b4b36bfab9e3d94688b0fde2be160a7faa81c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjM1YjRiMzZiZmFiOWUzZDk0Njg4YjBmZGUyYmUxNjBhN2ZhYTgxYw==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2003-08-14T00:11:19Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2003-08-14T00:11:19Z"}, "message": "linux.h (DBX_REGISTER_NUMBER): Define so to map a special index for MD_FALLBACK_FRAME_STATE_FOR to itself.\n\n\t* config/sh/linux.h (DBX_REGISTER_NUMBER): Define so to map a\n\tspecial index for MD_FALLBACK_FRAME_STATE_FOR to itself.\n\nFrom-SVN: r70422", "tree": {"sha": "1f75726a825173c0ad2abd1afabd29f18e317953", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f75726a825173c0ad2abd1afabd29f18e317953"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/235b4b36bfab9e3d94688b0fde2be160a7faa81c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/235b4b36bfab9e3d94688b0fde2be160a7faa81c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/235b4b36bfab9e3d94688b0fde2be160a7faa81c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/235b4b36bfab9e3d94688b0fde2be160a7faa81c/comments", "author": null, "committer": null, "parents": [{"sha": "996b4f8f5aa2ef2b0f6861d7093b520c3b89e99d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/996b4f8f5aa2ef2b0f6861d7093b520c3b89e99d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/996b4f8f5aa2ef2b0f6861d7093b520c3b89e99d"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "c91f30128bd55589d6a7f8253fc4f20ff2eacf90", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/235b4b36bfab9e3d94688b0fde2be160a7faa81c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/235b4b36bfab9e3d94688b0fde2be160a7faa81c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=235b4b36bfab9e3d94688b0fde2be160a7faa81c", "patch": "@@ -1,3 +1,8 @@\n+2003-08-13  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\t* config/sh/linux.h (DBX_REGISTER_NUMBER): Define so to map a\n+\tspecial index for MD_FALLBACK_FRAME_STATE_FOR to itself.\n+\n 2003-08-13  J\"orn Rennecke <joern.rennecke@superh.com>\n \n \t* sh.c (sh_get_pr_initial_val): Always wrap in unspec for TARGET_SH1."}, {"sha": "1ba1a1a85a2dc0254e30e59d93569ecd42508b7b", "filename": "gcc/config/sh/linux.h", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/235b4b36bfab9e3d94688b0fde2be160a7faa81c/gcc%2Fconfig%2Fsh%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/235b4b36bfab9e3d94688b0fde2be160a7faa81c/gcc%2Fconfig%2Fsh%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Flinux.h?ref=235b4b36bfab9e3d94688b0fde2be160a7faa81c", "patch": "@@ -277,3 +277,14 @@ do { \\\n \n #endif /* defined (__SH5__) */\n #endif /* IN_LIBGCC2 */\n+\n+/* For SH3 and SH4, we use a slot of the unwind frame which correspond\n+   to a fake register number 16 as a placeholder for the return address\n+   in MD_FALLBACK_FRAME_STATE_FOR and its content will be read with\n+   _Unwind_GetGR which uses dwarf_reg_size_table to get the size of\n+   the register.  So the entry of dwarf_reg_size_table corresponding to\n+   this slot must be set.  To do this, we redefine DBX_REGISTER_NUMBER\n+   so as to return itself for 16.  */\n+#undef DBX_REGISTER_NUMBER\n+#define DBX_REGISTER_NUMBER(REGNO) \\\n+  ((! TARGET_SH5 && (REGNO) == 16) ? 16 : SH_DBX_REGISTER_NUMBER (REGNO))"}]}