{"sha": "d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDYxODFiMWJkY2JjNmRmODZjMGE1ODliN2VkOTkwNWVlNjM0YWEzZQ==", "commit": {"author": {"name": "Michael Hayes", "email": "m.hayes@elec.canterbury.ac.nz", "date": "2000-01-23T23:10:09Z"}, "committer": {"name": "Michael Hayes", "email": "m.hayes@gcc.gnu.org", "date": "2000-01-23T23:10:09Z"}, "message": "basic-block.h (struct loops): New field `levels'.\n\n2000-01-24  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>\n\n\t* basic-block.h (struct loops): New field `levels'.\n\t* flow.c (flow_loops_level_compute): Traverse all outer loops.\n\t(flow_loop_level_compute): Initialise level to 1.\n\t(flow_loops_find): Set loops->levels.\n\t(flow_loops_dump): Print loops->levels.\n\nFrom-SVN: r31577", "tree": {"sha": "b1bc6f8655c4fc318b0bfa0bb32853a20303f802", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b1bc6f8655c4fc318b0bfa0bb32853a20303f802"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e/comments", "author": null, "committer": null, "parents": [{"sha": "7e259f255fcf3d41e85f0ec2dec1143983c4d828", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e259f255fcf3d41e85f0ec2dec1143983c4d828", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e259f255fcf3d41e85f0ec2dec1143983c4d828"}], "stats": {"total": 36, "additions": 30, "deletions": 6}, "files": [{"sha": "b00f9af055efac9480a1a0269a8446de048f3b52", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e", "patch": "@@ -1,3 +1,11 @@\n+2000-01-24  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>\n+\n+\t* basic-block.h (struct loops): New field `levels'.\n+\t* flow.c (flow_loops_level_compute): Traverse all outer loops.\n+\t(flow_loop_level_compute): Initialise level to 1.\n+\t(flow_loops_find): Set loops->levels.\n+\t(flow_loops_dump): Print loops->levels.\n+\n 2000-01-23  Richard Henderson  <rth@cygnus.com>\n \n \t* libgcc2.c (dwarf_reg_size_table): Size with DWARF_FRAME_REGISTERS."}, {"sha": "c5c29c9b1274f25244daea970f79fc6a59895d81", "filename": "gcc/basic-block.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e/gcc%2Fbasic-block.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e/gcc%2Fbasic-block.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbasic-block.h?ref=d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e", "patch": "@@ -325,6 +325,9 @@ struct loops\n   /* Number of natural loops in the function.  */\n   int num;\n \n+  /* Maxium nested loop level in the function.  */\n+  int levels;\n+\n   /* Array of natural loop descriptors (scanning this array in reverse order\n      will find the inner loops before their enclosing outer loops).  */\n   struct loop *array;"}, {"sha": "2e4b66617d4f074668a8cbf9e9dc0b1a2d76dff0", "filename": "gcc/flow.c", "status": "modified", "additions": 19, "deletions": 6, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=d6181b1bdcbc6df86c0a589b7ed9905ee634aa3e", "patch": "@@ -6387,7 +6387,8 @@ flow_loops_dump (loops, file, verbose)\n   if (! num_loops || ! file)\n     return;\n \n-  fprintf (file, \";; %d loops found\\n\", num_loops);\n+  fprintf (file, \";; %d loops found, %d levels\\n\", \n+\t   num_loops, loops->levels);\n \n   for (i = 0; i < num_loops; i++)\n     {\n@@ -6783,15 +6784,16 @@ flow_loop_level_compute (loop, depth)\n      int depth;\n {\n   struct loop *inner;\n-  int level = 0;\n+  int level = 1;\n \n   if (! loop)\n     return 0;\n \n   /* Traverse loop tree assigning depth and computing level as the\n      maximum level of all the inner loops of this loop.  The loop\n      level is equivalent to the height of the loop in the loop tree\n-     and corresponds to the number of enclosed loop levels.  */\n+     and corresponds to the number of enclosed loop levels (including\n+     itself).  */\n   for (inner = loop->inner; inner; inner = inner->next)\n     {\n       int ilevel;\n@@ -6811,11 +6813,22 @@ flow_loop_level_compute (loop, depth)\n    hierarchy tree specfied by LOOPS.  Return the maximum enclosed loop\n    level.  */\n \n-static int \n+static int\n flow_loops_level_compute (loops)\n      struct loops *loops;\n {\n-  return flow_loop_level_compute (loops->tree, 1);\n+  struct loop *loop;\n+  int level;\n+  int levels = 0;\n+\n+  /* Traverse all the outer level loops.  */\n+  for (loop = loops->tree; loop; loop = loop->next)\n+    {\n+      level = flow_loop_level_compute (loop, 1);\n+      if (level > levels)\n+\tlevels = level;\n+    }\n+  return levels;\n }\n \n \n@@ -6970,7 +6983,7 @@ flow_loops_find (loops)\n \n   /* Assign the loop nesting depth and enclosed loop level for each\n      loop.  */\n-  flow_loops_level_compute (loops);\n+  loops->levels = flow_loops_level_compute (loops);\n \n   return num_loops;\n }"}]}