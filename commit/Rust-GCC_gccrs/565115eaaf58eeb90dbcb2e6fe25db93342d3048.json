{"sha": "565115eaaf58eeb90dbcb2e6fe25db93342d3048", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY1MTE1ZWFhZjU4ZWViOTBkYmNiMmU2ZmUyNWRiOTMzNDJkMzA0OA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2014-11-04T02:49:33Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2014-11-04T02:49:33Z"}, "message": "Make reference_wrapper trivially copyable.\n\n\t* include/std/functional (reference_wrapper): Define copy constructor\n\tand copy assignment as defaulted.\n\t* testsuite/20_util/bind/ref_neg.cc: Adjust dg-error.\n\t* testsuite/20_util/reference_wrapper/requirements.cc: New.\n\nFrom-SVN: r217067", "tree": {"sha": "7b05f82cfd431ef0b9956d4ec15d48f07910a3ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b05f82cfd431ef0b9956d4ec15d48f07910a3ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/565115eaaf58eeb90dbcb2e6fe25db93342d3048", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/565115eaaf58eeb90dbcb2e6fe25db93342d3048", "html_url": "https://github.com/Rust-GCC/gccrs/commit/565115eaaf58eeb90dbcb2e6fe25db93342d3048", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/565115eaaf58eeb90dbcb2e6fe25db93342d3048/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ac6f071ad92bdfc57674d1d7ac2a5c3c831c4603", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac6f071ad92bdfc57674d1d7ac2a5c3c831c4603", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac6f071ad92bdfc57674d1d7ac2a5c3c831c4603"}], "stats": {"total": 55, "additions": 43, "deletions": 12}, "files": [{"sha": "4f2c9b5ab65fd06f7fd1d5ddef64df63aeb64842", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=565115eaaf58eeb90dbcb2e6fe25db93342d3048", "patch": "@@ -11,6 +11,11 @@\n \t* include/bits/regex.tcc (regex_traits::lookup_classname): Use\n \tctype_base::blank.\n \n+\t* include/std/functional (reference_wrapper): Define copy constructor\n+\tand copy assignment as defaulted.\n+\t* testsuite/20_util/bind/ref_neg.cc: Adjust dg-error.\n+\t* testsuite/20_util/reference_wrapper/requirements.cc: New.\n+\n 2014-11-03  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* include/parallel/algo.h: Do not use default arguments in function"}, {"sha": "25ec1b351b8b59147f1a3d242b6311b8970ab894", "filename": "libstdc++-v3/include/std/functional", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffunctional", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffunctional", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffunctional?ref=565115eaaf58eeb90dbcb2e6fe25db93342d3048", "patch": "@@ -410,16 +410,10 @@ _GLIBCXX_HAS_NESTED_TYPE(result_type)\n \n       reference_wrapper(_Tp&&) = delete;\n \n-      reference_wrapper(const reference_wrapper<_Tp>& __inref) noexcept\n-      : _M_data(__inref._M_data)\n-      { }\n+      reference_wrapper(const reference_wrapper&) = default;\n \n       reference_wrapper&\n-      operator=(const reference_wrapper<_Tp>& __inref) noexcept\n-      {\n-\t_M_data = __inref._M_data;\n-\treturn *this;\n-      }\n+      operator=(const reference_wrapper&) = default;\n \n       operator _Tp&() const noexcept\n       { return this->get(); }"}, {"sha": "4e627cfaf487d5a550e38abb66e332c4d8fb4518", "filename": "libstdc++-v3/testsuite/20_util/bind/ref_neg.cc", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbind%2Fref_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbind%2Fref_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbind%2Fref_neg.cc?ref=565115eaaf58eeb90dbcb2e6fe25db93342d3048", "patch": "@@ -30,10 +30,10 @@ void test01()\n {\n   const int dummy = 0;\n   std::bind(&inc, _1)(0);               // { dg-error  \"no match\" }\n-  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1213 }\n-  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1227 }\n-  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1241 }\n-  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1255 }\n+  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1207 }\n+  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1221 }\n+  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1235 }\n+  // { dg-error \"rvalue|const\" \"\" { target *-*-* } 1249 }\n   std::bind(&inc, std::ref(dummy))();\t// { dg-error  \"no match\" }\n }\n "}, {"sha": "c4d784cf59d1a4af350f81fddfb1510a8db40900", "filename": "libstdc++-v3/testsuite/20_util/reference_wrapper/requirements.cc", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Freference_wrapper%2Frequirements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/565115eaaf58eeb90dbcb2e6fe25db93342d3048/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Freference_wrapper%2Frequirements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Freference_wrapper%2Frequirements.cc?ref=565115eaaf58eeb90dbcb2e6fe25db93342d3048", "patch": "@@ -0,0 +1,32 @@\n+// Copyright (C) 2014 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// { dg-options \"-std=gnu++11\" }\n+// { dg-do compile }\n+\n+#include <functional>\n+\n+struct NonTrivial\n+{\n+  ~NonTrivial() { }\n+};\n+\n+using R = std::reference_wrapper<NonTrivial>;\n+\n+static_assert(std::is_copy_constructible<R>::value, \"copy constructible\");\n+static_assert(std::is_copy_assignable<R>::value, \"copy assignable\");\n+static_assert(std::is_trivially_copyable<R>::value, \"trivially copyable\");"}]}