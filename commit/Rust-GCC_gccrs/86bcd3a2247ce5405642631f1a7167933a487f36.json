{"sha": "86bcd3a2247ce5405642631f1a7167933a487f36", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODZiY2QzYTIyNDdjZTU0MDU2NDI2MzFmMWE3MTY3OTMzYTQ4N2YzNg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2005-12-16T00:00:43Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2005-12-16T00:00:43Z"}, "message": "re PR java/25429 (can't see private static final int CREATE = 1)\n\ngcc/java:\n\tPR java/25429\n\t* parse.y (resolve_expression_name): Don't generate accessor\n\tmethods for constant fields.\nlibjava:\n\t* testsuite/libjava.compile/rh175833.java: New file.\n\t* testsuite/libjava.compile/pr25429.java: New file.\n\nCo-Authored-By: Andrew Haley <aph@redhat.com>\n\nFrom-SVN: r108608", "tree": {"sha": "e06c0bfb5fa1f496d9e6efbc365804803285a3a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e06c0bfb5fa1f496d9e6efbc365804803285a3a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86bcd3a2247ce5405642631f1a7167933a487f36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86bcd3a2247ce5405642631f1a7167933a487f36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86bcd3a2247ce5405642631f1a7167933a487f36", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86bcd3a2247ce5405642631f1a7167933a487f36/comments", "author": null, "committer": null, "parents": [{"sha": "094bb856e66fc86a004c604331cbc4bd17472369", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/094bb856e66fc86a004c604331cbc4bd17472369", "html_url": "https://github.com/Rust-GCC/gccrs/commit/094bb856e66fc86a004c604331cbc4bd17472369"}], "stats": {"total": 49, "additions": 47, "deletions": 2}, "files": [{"sha": "9843b6cbedd725bfd3748b38b2acb8fec30c79d2", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86bcd3a2247ce5405642631f1a7167933a487f36/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86bcd3a2247ce5405642631f1a7167933a487f36/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=86bcd3a2247ce5405642631f1a7167933a487f36", "patch": "@@ -1,3 +1,10 @@\n+2005-12-15  Tom Tromey  <tromey@redhat.com>\n+\t    Andrew Haley  <aph@redhat.com>\n+\n+\tPR java/25429\n+\t* parse.y (resolve_expression_name): Don't generate accessor\n+\tmethods for constant fields.\n+\n 2005-12-13  Andrew Haley  <aph@redhat.com>\n \n \tPR java/25366"}, {"sha": "a467ff15a79fe63b12cce66a662cd20302743fd8", "filename": "gcc/java/parse.y", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86bcd3a2247ce5405642631f1a7167933a487f36/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86bcd3a2247ce5405642631f1a7167933a487f36/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=86bcd3a2247ce5405642631f1a7167933a487f36", "patch": "@@ -9584,8 +9584,15 @@ resolve_expression_name (tree id, tree *orig)\n \n \t      /* If we're processing an inner class and we're trying\n \t\t to access a field belonging to an outer class, build\n-\t\t the access to the field.  */\n-\t      if (nested_member_access_p (current_class, decl))\n+\t\t the access to the field.\n+\t\t As usual, we have to treat initialized static final\n+\t\t variables as a special case.  */\n+              if (nested_member_access_p (current_class, decl)\n+                  && ! (JDECL_P (decl) && CLASS_FINAL_VARIABLE_P (decl)\n+                        && DECL_INITIAL (decl) != NULL_TREE\n+\t\t\t&& (JSTRING_TYPE_P (TREE_TYPE (decl))\n+\t\t\t    || JNUMERIC_TYPE_P (TREE_TYPE (decl)))\n+\t\t\t&& TREE_CONSTANT (DECL_INITIAL (decl))))\n \t\t{\n \t\t  if (!fs && CLASS_STATIC (TYPE_NAME (current_class)))\n \t\t    {"}, {"sha": "b3a03b720d356e5742b087459bcea21eaa20385d", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86bcd3a2247ce5405642631f1a7167933a487f36/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86bcd3a2247ce5405642631f1a7167933a487f36/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=86bcd3a2247ce5405642631f1a7167933a487f36", "patch": "@@ -1,3 +1,8 @@\n+2005-12-15  Tom Tromey  <tromey@redhat.com>\n+\n+\t* testsuite/libjava.compile/rh175833.java: New file.\n+\t* testsuite/libjava.compile/pr25429.java: New file.\n+\n 2005-12-15  Alan Modra  <amodra@bigpond.net.au>\n \n \t* testsuite/lib/libjava.exp: Revert 2005-12-01."}, {"sha": "a869b585c4beb39db512f78f60f295c586854847", "filename": "libjava/testsuite/libjava.compile/pr25429.java", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86bcd3a2247ce5405642631f1a7167933a487f36/libjava%2Ftestsuite%2Flibjava.compile%2Fpr25429.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86bcd3a2247ce5405642631f1a7167933a487f36/libjava%2Ftestsuite%2Flibjava.compile%2Fpr25429.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.compile%2Fpr25429.java?ref=86bcd3a2247ce5405642631f1a7167933a487f36", "patch": "@@ -0,0 +1,13 @@\n+public class pr25429\n+{\n+  private static final int CONST  = 0;\n+  class I {\n+    public void f () {\n+      switch(0) {\n+      case CONST:\n+      }\n+    }\n+  }\n+\n+  public static void main(String[] args) { }\n+}"}, {"sha": "6bdec57cb6e782ee41ee75f831dcaf1732fa9f89", "filename": "libjava/testsuite/libjava.compile/rh175833.java", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86bcd3a2247ce5405642631f1a7167933a487f36/libjava%2Ftestsuite%2Flibjava.compile%2Frh175833.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86bcd3a2247ce5405642631f1a7167933a487f36/libjava%2Ftestsuite%2Flibjava.compile%2Frh175833.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.compile%2Frh175833.java?ref=86bcd3a2247ce5405642631f1a7167933a487f36", "patch": "@@ -0,0 +1,13 @@\n+// Follow-on to PR 25429\n+public class rh175833\n+{\n+  private static final Object CONST  = new Object();\n+    class I {\n+        public Object f () {\n+\t  // We need an accessor here.\n+\t  return CONST;\n+        }\n+    }\n+\n+  public static void main(String[] args) { }\n+}"}]}