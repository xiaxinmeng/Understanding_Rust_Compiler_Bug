{"sha": "09ff8283a84ea06073df34b17baad67126f5b68e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDlmZjgyODNhODRlYTA2MDczZGYzNGIxN2JhYWQ2NzEyNmY1YjY4ZQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2000-11-08T22:43:50Z"}, "committer": {"name": "Gerald Pfeifer", "email": "gerald@gcc.gnu.org", "date": "2000-11-08T22:43:50Z"}, "message": "snapshot: New file.\n\n\t* snapshot: New file.\n\nCo-Authored-By: Gerald Pfeifer <pfeifer@dbai.tuwien.ac.at>\n\nFrom-SVN: r37328", "tree": {"sha": "ba9bb377a163bc5bcfcbc79d15eea33575a15d0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba9bb377a163bc5bcfcbc79d15eea33575a15d0b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09ff8283a84ea06073df34b17baad67126f5b68e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09ff8283a84ea06073df34b17baad67126f5b68e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09ff8283a84ea06073df34b17baad67126f5b68e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09ff8283a84ea06073df34b17baad67126f5b68e/comments", "author": null, "committer": null, "parents": [{"sha": "221948ffaf39fe6a55f59fa8e9359ae69e96b7a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/221948ffaf39fe6a55f59fa8e9359ae69e96b7a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/221948ffaf39fe6a55f59fa8e9359ae69e96b7a6"}], "stats": {"total": 179, "additions": 179, "deletions": 0}, "files": [{"sha": "556d5da236bf2617fb6122feaa69579d7c427039", "filename": "contrib/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09ff8283a84ea06073df34b17baad67126f5b68e/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09ff8283a84ea06073df34b17baad67126f5b68e/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=09ff8283a84ea06073df34b17baad67126f5b68e", "patch": "@@ -1,3 +1,8 @@\n+2000-11-08  Jeff Law  <law@redhat.com>,\n+\t    Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n+\n+\t* snapshot: New file.\n+\n 2000-11-08  Jeffrey Oldham  <oldham@oz.codesourcery.com>\n \n \t* gcc_build (bootstrap_gcc): New function."}, {"sha": "b8f1f9e1674451ffe2c5dc8689bd67e247861580", "filename": "contrib/snapshot", "status": "added", "additions": 174, "deletions": 0, "changes": 174, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09ff8283a84ea06073df34b17baad67126f5b68e/contrib%2Fsnapshot", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09ff8283a84ea06073df34b17baad67126f5b68e/contrib%2Fsnapshot", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fsnapshot?ref=09ff8283a84ea06073df34b17baad67126f5b68e", "patch": "@@ -0,0 +1,174 @@\n+#! /bin/csh \n+#\n+# GCC snapshot generation script.\n+#\n+# Originally written by Jeff Law <law@redhat.com>. Most minor modifications\n+# by Gerald Pfeifer <pfeifer@dbai.tuwien.ac.at>.\n+\n+# TODO: Include the FAQ and installation instructions in the snapshot\n+\n+set SCRIPTDIR=/home/law/gcc\n+set STATEDIR=/home/law\n+set TMPDIR=/var/tmp\n+\n+set path = (/usr/local/bin $path)\n+\n+# Get somewhere useful with a lot of disk space.\n+cd $TMPDIR\n+\n+# Get date of current and previous snapshot.\n+set date=`date +%Y%m%d`\n+set last_date=`cat $STATEDIR/.snapshot_date`\n+set snapdir=`date +%Y-%m-%d`\n+\n+# Update and uncomment the following lines to run a particular snapshot pair.\n+#set date=971215\n+#set last_date=19990920\n+\n+# We run this on the cvs server itself so we can get at\n+# the cvs files quickly.\n+setenv CVSROOT /cvs/gcc\n+\n+# Get into a temporary directory so as not to be confused by\n+# any existing CVS administration files.\n+rm -rf $$\n+mkdir $$\n+cd $$\n+\n+# Tag the current sources for the snapshot\n+cvs -z 9 -Q rtag -F gcc_ss_$date gcc\n+\n+# Get an exported copy of the last gcc-core module snapshot\n+# arggh gcc-core doesn't work right now, so check out the whole\n+# thing and remove bits we don't need.\n+#zcat ~ftp/pub/gcc/snapshots/1998-05-31/gcc-$last_date.tar.gz | tar xf -\n+cvs -z 9 -Q export -rgcc_ss_$last_date gcc\n+cd gcc\n+find . -type f -print | sort > ../files_$last_date\n+~law/bin/brik -Gb -f ../files_$last_date > ../.brik_$last_date\n+cp ../.brik_$last_date ./.brik\n+cd ..\n+rm -rf gcc/{libio,libstdc++,libstdc++-v3,libf2c,libchill,libobjc}\n+rm -rf gcc/gcc/{testsuite,f,objc,cp,java,ch}\n+mv gcc gcc-$last_date\n+\n+# Similarly for today's gcc-core module snapshot\n+cvs -z 9 -Q export -rgcc_ss_$date gcc\n+cd gcc\n+contrib/gcc_update --touch\n+find . -type f -print  | sort > ../files_$date\n+~law/bin/brik -Gb -f ../files_$date > ../.brik_$date\n+cp ../.brik_$date ./.brik\n+cd ..\n+rm -rf gcc/{libio,libstdc++,libstdc++-v3,libf2c,libchill,libobjc}\n+rm -rf gcc/gcc/{testsuite,f,objc,cp,java,ch}\n+mv gcc gcc-$date\n+\n+rm -rf files_$date\n+rm -rf files_$last_date\n+\n+# Diff them\n+diff  -Nrc3p gcc-$last_date gcc-$date > gcc-core-$last_date-$date.diff\n+\n+# Make the tarball for the core\n+tar cf - gcc-$date | gzip --best > gcc-core-$date.tar.gz\n+\n+# Remove the core gunk and get the whole thing back.\n+rm -rf gcc-$last_date\n+rm -rf gcc-$date\n+#zcat ~ftp/pub/gcc/snapshots/1998-05-31/gcc-$last_date.tar.gz | tar xf -\n+cvs -z 9 -Q export -rgcc_ss_$last_date gcc\n+mv gcc gcc-$last_date\n+cp .brik_$last_date gcc-$last_date/.brik\n+cvs -z 9 -Q export -rgcc_ss_$date gcc\n+cd gcc\n+contrib/gcc_update --touch\n+cd ..\n+mv gcc gcc-$date\n+cp .brik_$date gcc-$date/.brik\n+\n+# We don't need this anymore.\n+rm -rf .brik_$date\n+rm -rf .brik_$last_date\n+\n+# Now make diffs for g77, g77-testsuite chill, java objc, g++, g++-testsuite,\n+# testsuite, then the whole bloody thing.\n+diff  -Nrc3p gcc-$last_date/gcc/f gcc-$date/gcc/f > gcc-g77-$last_date-$date.diff\n+diff  -Nrc3p gcc-$last_date/libf2c gcc-$date/libf2c >> gcc-g77-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date/gcc/testsuite/g77.f-torture  gcc-$date/gcc/testsuite/g77.f-torture > gcc-g77-testsuite-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date/gcc/objc gcc-$date/gcc/objc > gcc-objc-$last_date-$date.diff\n+diff  -Nrc3p gcc-$last_date/libobjc gcc-$date/libobjc >> gcc-objc-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date/gcc/java gcc-$date/gcc/java > gcc-java-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date/gcc/ch gcc-$date/gcc/ch > gcc-chill-$last_date-$date.diff\n+diff  -Nrc3p gcc-$last_date/libchill gcc-$date/libchill >> gcc-chill-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date/gcc/cp gcc-$date/gcc/cp > gcc-g++-$last_date-$date.diff\n+diff  -Nrc3p gcc-$last_date/libio gcc-$date/libio >> gcc-g++-$last_date-$date.diff\n+diff  -Nrc3p gcc-$last_date/libstdc++ gcc-$date/libstdc++ >> gcc-g++-$last_date-$date.diff\n+diff  -Nrc3p gcc-$last_date/libstdc++-v3 gcc-$date/libstdc++-v3 >> gcc-g++-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date/gcc/testsuite/g++.old-deja gcc-$date/gcc/testsuite/g++.old-deja > gcc-g++-tests-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date/gcc/testsuite gcc-$date/gcc/testsuite > gcc-tests-$last_date-$date.diff\n+\n+diff  -Nrc3p gcc-$last_date gcc-$date > gcc-$last_date-$date.diff\n+\n+\n+# Apply the patches to the old snapshot and run another diff to see if anything\n+# bad happened.\n+cd gcc-$last_date\n+patch -p1 -E -s < ../gcc-$last_date-$date.diff\n+find . -name \\*.orig -print | xargs rm -rf\n+rm -rf .brik.orig\n+find . -name \\*.rej > $STATEDIR/CHECKME\n+~law/bin/brik -C .brik >> $STATEDIR/CHECKME\n+cd ..\n+diff  -Nrc3p gcc-$last_date gcc-$date >> $STATEDIR/CHECKME\n+\n+# Remove the old snapshot, we're done with it.\n+#rm -rf gcc-$last_date\n+\n+# Make tarballs\n+# Touch all the machine generated files so people don't need gperf, bison and friends.\n+\n+tar cf - gcc-$date/.brik gcc-$date/gcc/f gcc-$date/libf2c | gzip --best > gcc-g77-$date.tar.gz\n+tar cf - gcc-$date/.brik gcc-$date/gcc/testsuite/g77.f-torture | gzip --best > gcc-g77-testsuite-$date.tar.gz\n+tar cf - gcc-$date/.brik gcc-$date/gcc/objc gcc-$date/libobjc | gzip --best > gcc-objc-$date.tar.gz\n+tar cf - gcc-$date/.brik gcc-$date/gcc/java | gzip --best > gcc-java-$date.tar.gz\n+tar cf - gcc-$date/.brik gcc-$date/gcc/ch gcc-$date/libchill | gzip --best > gcc-chill-$date.tar.gz\n+tar cf - gcc-$date/.brik gcc-$date/gcc/cp gcc-$date/{libio,libstdc++,libstdc++-v3} | gzip --best > gcc-g++-$date.tar.gz\n+tar cf - gcc-$date/.brik gcc-$date/gcc/testsuite/g++.old-deja | gzip --best > gcc-g++-tests-$date.tar.gz\n+tar cf - gcc-$date/.brik gcc-$date/gcc/testsuite | gzip --best > gcc-tests-$date.tar.gz\n+tar cf - gcc-$date | gzip --best > gcc-$date.tar.gz\n+\n+# Compress the diff files.\n+gzip --best *.diff\n+\n+# Copy them to the FTP server XXX\n+mkdir ~ftp/pub/gcc/snapshots/$snapdir\n+chmod 775 ~ftp/pub/gcc/snapshots/$snapdir\n+cp *.gz ~ftp/pub/gcc/snapshots/$snapdir\n+foreach tst (*.gz)\n+  echo $tst `sum $tst` >>~ftp/pub/gcc/snapshots/$snapdir/CHECKSUMS\n+end\n+\n+# Update links on the ftp server\n+$SCRIPTDIR/update_links $date\n+\n+# Get back to the toplevel directory before we update the date.\n+cd  $STATEDIR\n+\n+# Note that we made a snapshot today\n+mv .snapshot_date .prev_snapshot_date\n+echo $date > .snapshot_date\n+\n+$SCRIPTDIR/update_tags\n+\n+# Announce it XXX\n+mail -s \"gcc-ss-$date is now available\" gcc@gcc.gnu.org < ~ftp/pub/gcc/snapshots/README\n+mail -s \"snapshot:CHECKME\" law@cygnus.com < $STATEDIR/CHECKME\n+rm -rf $TMPDIR/$$"}]}