{"sha": "366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzY2ZWU5NGI0NDVmZDk1OWM3OTQ3ZTQ1ZDJjYjlhMmE0YTBiNDUwOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2015-04-15T11:47:44Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2015-04-15T11:47:44Z"}, "message": "re PR ipa/65765 (Compiling Firefox with GCC 5 leads to broken javascript engine on x86-64)\n\n\tPR ipa/65765\n\t* ipa-icf-gimple.c (func_checker::compare_bb): For GIMPLE_NOP\n\tand GIMPLE_PREDICT use break instead of return true. For\n\tGIMPLE_EH_DISPATCH, compare dispatch region.\n\n\t* g++.dg/ipa/pr65765.C: New test.\n\nFrom-SVN: r222123", "tree": {"sha": "7f625d6c00ba51bc474ba5e8d9355cf7d4f4512b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f625d6c00ba51bc474ba5e8d9355cf7d4f4512b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "html_url": "https://github.com/Rust-GCC/gccrs/commit/366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f8a7e15406265eb0bdc15f2bb0f57f32d549fca0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8a7e15406265eb0bdc15f2bb0f57f32d549fca0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8a7e15406265eb0bdc15f2bb0f57f32d549fca0"}], "stats": {"total": 63, "additions": 62, "deletions": 1}, "files": [{"sha": "f1a96f270b5d1354212881a3aef9b0f3838fd6db", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "patch": "@@ -1,3 +1,10 @@\n+2015-04-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR ipa/65765\n+\t* ipa-icf-gimple.c (func_checker::compare_bb): For GIMPLE_NOP\n+\tand GIMPLE_PREDICT use break instead of return true. For\n+\tGIMPLE_EH_DISPATCH, compare dispatch region.\n+\n 2015-04-14  Matthew Wahab  <matthew.wahab@arm.com>\n \n \t* doc/extend.texi (__sync Builtins): Simplify some text.  Update"}, {"sha": "9efdea465c292778a8249348c55a534f91590c9f", "filename": "gcc/ipa-icf-gimple.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2Fipa-icf-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2Fipa-icf-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-icf-gimple.c?ref=366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "patch": "@@ -706,7 +706,11 @@ func_checker::compare_bb (sem_bb *bb1, sem_bb *bb2)\n \t    return return_different_stmts (s1, s2, \"GIMPLE_SWITCH\");\n \t  break;\n \tcase GIMPLE_DEBUG:\n+\t  break;\n \tcase GIMPLE_EH_DISPATCH:\n+\t  if (gimple_eh_dispatch_region (as_a <geh_dispatch *> (s1))\n+\t      != gimple_eh_dispatch_region (as_a <geh_dispatch *> (s2)))\n+\t    return return_different_stmts (s1, s2, \"GIMPLE_EH_DISPATCH\");\n \t  break;\n \tcase GIMPLE_RESX:\n \t  if (!compare_gimple_resx (as_a <gresx *> (s1),\n@@ -734,7 +738,7 @@ func_checker::compare_bb (sem_bb *bb1, sem_bb *bb2)\n \t  break;\n \tcase GIMPLE_PREDICT:\n \tcase GIMPLE_NOP:\n-\t  return true;\n+\t  break;\n \tdefault:\n \t  return return_false_with_msg (\"Unknown GIMPLE code reached\");\n \t}"}, {"sha": "1df85887f666f07ed1035799096025aa607db392", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "patch": "@@ -1,3 +1,8 @@\n+2015-04-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR ipa/65765\n+\t* g++.dg/ipa/pr65765.C: New test.\n+\n 2015-04-15  Nick Clifton  <nickc@redhat.com>\n \n \t* gcc.target/rx/builtins.c: Disable RMPA test if string"}, {"sha": "ff8dc33a1a43c65aecefebe254c7e2cc36b1878f", "filename": "gcc/testsuite/g++.dg/ipa/pr65765.C", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr65765.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/366ee94b445fd959c7947e45d2cb9a2a4a0b4509/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr65765.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr65765.C?ref=366ee94b445fd959c7947e45d2cb9a2a4a0b4509", "patch": "@@ -0,0 +1,45 @@\n+// PR ipa/65765\n+// { dg-do run }\n+// { dg-options \"-O2\" }\n+\n+int a, b, c, d, e;\n+unsigned char h[] = { 1, 1 };\n+\n+__attribute__ ((cold)) int ModRM_Mode () { return a; }\n+\n+int\n+ModRM_RM (int p1)\n+{\n+  return p1;\n+}\n+\n+__attribute__ ((cold)) static bool ModRM_hasSIB (unsigned char p1)\n+{\n+  return ModRM_Mode () != 1 && ModRM_RM (p1);\n+}\n+\n+__attribute__ ((cold)) static bool ModRM_hasRIP (unsigned char p1)\n+{\n+  return ModRM_Mode () && ModRM_RM (p1);\n+}\n+\n+unsigned char *\n+DisassembleHeapAccess (unsigned char *p1)\n+{\n+  b = *p1++;\n+  if (ModRM_hasSIB (b))\n+    c = *p1++;\n+  int f = c, g = 0;\n+  d = ModRM_hasRIP (g);\n+  e = f == 0;\n+  if (e)\n+    p1 += sizeof 0;\n+  return p1;\n+}\n+\n+int\n+main ()\n+{\n+  if (DisassembleHeapAccess (h) != h + 2)\n+    __builtin_abort ();\n+}"}]}