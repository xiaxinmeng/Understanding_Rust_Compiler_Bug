{"sha": "77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdkMWQ4ZTAxZmY2OTUyMTk3NGQyMGMwZjNmZWY3NWUzYzJmODYxNA==", "commit": {"author": {"name": "James A. Morrison", "email": "phython@gcc.gnu.org", "date": "2005-07-28T04:40:05Z"}, "committer": {"name": "James A. Morrison", "email": "phython@gcc.gnu.org", "date": "2005-07-28T04:40:05Z"}, "message": "re PR rtl-optimization/23047 (Combine ignores flag_wrapv)\n\n2005-07-27  James A. Morrison  <phython@gcc.gnu.org>\n\n        PR rtl-optimization/23047\n        * simplify-rtx.c (simplify_const_relational_operation): Respect\n        flag_wrapv for comparisons with ABS.\n\nFrom-SVN: r102459", "tree": {"sha": "21416a93a08c2c026822da31c2e1d7f8bb065aef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/21416a93a08c2c026822da31c2e1d7f8bb065aef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/comments", "author": null, "committer": null, "parents": [{"sha": "ff08cbee5d5465c88852dbb3cff344c45d98c95e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff08cbee5d5465c88852dbb3cff344c45d98c95e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff08cbee5d5465c88852dbb3cff344c45d98c95e"}], "stats": {"total": 40, "additions": 37, "deletions": 3}, "files": [{"sha": "d888c82e23fc18344b013ede8a5434f11d9a7e3f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "patch": "@@ -1,3 +1,9 @@\n+2005-07-25  James A. Morrison  <phython@gcc.gnu.org>\n+\n+\tPR rtl-optimization/23047\n+\t* simplify-rtx.c (simplify_const_relational_operation): Respect\n+\tflag_wrapv for comparisons with ABS.\n+\n 2005-07-27  James A. Morrison  <phython@gcc.gnu.org>\n \n \tPR tree-optimization/22493"}, {"sha": "e3e29991af8f9b11d396da6139a7593f1ce1b721", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "patch": "@@ -3236,7 +3236,9 @@ simplify_const_relational_operation (enum rtx_code code,\n \n \tcase LT:\n \t  /* Optimize abs(x) < 0.0.  */\n-\t  if (trueop1 == CONST0_RTX (mode) && !HONOR_SNANS (mode))\n+\t  if (trueop1 == CONST0_RTX (mode)\n+\t      && !HONOR_SNANS (mode)\n+\t      && !(flag_wrapv && INTEGRAL_MODE_P (mode)))\n \t    {\n \t      tem = GET_CODE (trueop0) == FLOAT_EXTEND ? XEXP (trueop0, 0)\n \t\t\t\t\t\t       : trueop0;\n@@ -3247,7 +3249,9 @@ simplify_const_relational_operation (enum rtx_code code,\n \n \tcase GE:\n \t  /* Optimize abs(x) >= 0.0.  */\n-\t  if (trueop1 == CONST0_RTX (mode) && !HONOR_NANS (mode))\n+\t  if (trueop1 == CONST0_RTX (mode)\n+\t      && !HONOR_NANS (mode)\n+\t      && !(flag_wrapv && INTEGRAL_MODE_P (mode)))\n \t    {\n \t      tem = GET_CODE (trueop0) == FLOAT_EXTEND ? XEXP (trueop0, 0)\n \t\t\t\t\t\t       : trueop0;"}, {"sha": "ddf272d6885817354a0a0a5ff60e4d23a5d8b3df", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "patch": "@@ -1,6 +1,12 @@\n 2005-07-27  James A. Morrison  <phython@gcc.gnu.org>\n \n-\tPR rtl-optimization/22493\n+\tPR rtl-optimization/23047\n+\t* gcc.c-torture/execute/pr23047.c: New test.\n+\t* gcc.c-torture/execute/pr23047.x: New.\n+\n+2005-07-27  James A. Morrison  <phython@gcc.gnu.org>\n+\n+\tPR tree-optimization/22493\n \t* gcc.c-torture/execute/pr22493-1.c: New test.\n \t* gcc.c-torture/execute/pr22493-1.x: New.\n \t* gcc.c-torture/execute/vrp-1.c: New test."}, {"sha": "7557fc2beca12a6a9885b44d4845179f83a4ac6d", "filename": "gcc/testsuite/gcc.c-torture/execute/pr23047.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23047.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23047.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23047.c?ref=77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "patch": "@@ -0,0 +1,16 @@\n+#include <limits.h>\n+extern void abort ();\n+extern void exit (int);\n+void f(int i)\n+{\n+  i = i > 0 ? i : -i;\n+  if (i<0)\n+    return;\n+  abort ();\n+}\n+\n+int main(int argc, char *argv[])\n+{\n+  f(INT_MIN);\n+  exit (0);\n+}"}, {"sha": "36a58395004c352395b3ff7d4877f1fbee5a758e", "filename": "gcc/testsuite/gcc.c-torture/execute/pr23047.x", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23047.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d1d8e01ff69521974d20c0f3fef75e3c2f8614/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23047.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr23047.x?ref=77d1d8e01ff69521974d20c0f3fef75e3c2f8614", "patch": "@@ -0,0 +1,2 @@\n+set additional_flags \"-fwrapv\"\n+return 0"}]}