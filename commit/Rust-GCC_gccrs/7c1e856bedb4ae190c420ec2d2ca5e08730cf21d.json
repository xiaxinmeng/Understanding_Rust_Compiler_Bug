{"sha": "7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2MxZTg1NmJlZGI0YWUxOTBjNDIwZWMyZDJjYTVlMDg3MzBjZjIxZA==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2020-06-25T09:59:42Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2021-03-25T13:11:50Z"}, "message": "libgomp HSA/GCN plugins: don't prepend the 'HSA_RUNTIME_LIB' path to 'libhsa-runtime64.so'\n\nFor unknown reasons, this had gotten added for the libgomp HSA plugin in commit\nb8d89b03db5f212919e4571671ebb4f5f8b1e19d (r242749) \"Remove build dependence on\nHSA run-time\", and later propagated into the GCN plugin.\n\n\tlibgomp/\n\t* plugin/plugin-gcn.c (init_environment_variables): Don't prepend\n\tthe 'HSA_RUNTIME_LIB' path to 'libhsa-runtime64.so'.\n\t* plugin/configfrag.ac (HSA_RUNTIME_LIB): Clean up.\n\t* config.h.in: Regenerate.\n\t* configure: Likewise.", "tree": {"sha": "fecde9cf9b90ac745fdc61b18ff72fdab8bb1a71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fecde9cf9b90ac745fdc61b18ff72fdab8bb1a71"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "068d02e896d3df17b59b013a82ca0bf9faf058f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/068d02e896d3df17b59b013a82ca0bf9faf058f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/068d02e896d3df17b59b013a82ca0bf9faf058f3"}], "stats": {"total": 22, "additions": 1, "deletions": 21}, "files": [{"sha": "03123dc1e60c78e5d25b126d04929bdc2bae18f7", "filename": "libgomp/config.h.in", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfig.h.in?ref=7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "patch": "@@ -130,9 +130,6 @@\n /* Define to 1 if you have the `__secure_getenv' function. */\n #undef HAVE___SECURE_GETENV\n \n-/* Define path to HSA runtime. */\n-#undef HSA_RUNTIME_LIB\n-\n /* Define to 1 if GNU symbol versioning is used for libgomp. */\n #undef LIBGOMP_GNU_SYMBOL_VERSIONING\n "}, {"sha": "1917d7e273b0402b99d2c4d6d7d4df71569af885", "filename": "libgomp/configure", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "patch": "@@ -15448,16 +15448,6 @@ cat >>confdefs.h <<_ACEOF\n _ACEOF\n \n \n-if test \"$HSA_RUNTIME_LIB\" != \"\"; then\n-  HSA_RUNTIME_LIB=\"$HSA_RUNTIME_LIB/\"\n-fi\n-\n-\n-cat >>confdefs.h <<_ACEOF\n-#define HSA_RUNTIME_LIB \"$HSA_RUNTIME_LIB\"\n-_ACEOF\n-\n-\n \n # Check for functions needed.\n for ac_func in getloadavg clock_gettime strtoull"}, {"sha": "f447def3f28398de676ee1daf0bdcbdec951b063", "filename": "libgomp/plugin/configfrag.ac", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fplugin%2Fconfigfrag.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fplugin%2Fconfigfrag.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fplugin%2Fconfigfrag.ac?ref=7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "patch": "@@ -272,10 +272,3 @@ AC_DEFINE_UNQUOTED([PLUGIN_NVPTX_DYNAMIC], [$PLUGIN_NVPTX_DYNAMIC],\n AM_CONDITIONAL([PLUGIN_GCN], [test $PLUGIN_GCN = 1])\n AC_DEFINE_UNQUOTED([PLUGIN_GCN], [$PLUGIN_GCN],\n   [Define to 1 if the GCN plugin is built, 0 if not.])\n-\n-if test \"$HSA_RUNTIME_LIB\" != \"\"; then\n-  HSA_RUNTIME_LIB=\"$HSA_RUNTIME_LIB/\"\n-fi\n-\n-AC_DEFINE_UNQUOTED([HSA_RUNTIME_LIB], [\"$HSA_RUNTIME_LIB\"],\n-  [Define path to HSA runtime.])"}, {"sha": "8aab708b0efeb9c124c71a904ea29de9a3b3f0a2", "filename": "libgomp/plugin/plugin-gcn.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fplugin%2Fplugin-gcn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c1e856bedb4ae190c420ec2d2ca5e08730cf21d/libgomp%2Fplugin%2Fplugin-gcn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fplugin%2Fplugin-gcn.c?ref=7c1e856bedb4ae190c420ec2d2ca5e08730cf21d", "patch": "@@ -1072,7 +1072,7 @@ init_environment_variables (void)\n \n   hsa_runtime_lib = secure_getenv (\"HSA_RUNTIME_LIB\");\n   if (hsa_runtime_lib == NULL)\n-    hsa_runtime_lib = HSA_RUNTIME_LIB \"libhsa-runtime64.so.1\";\n+    hsa_runtime_lib = \"libhsa-runtime64.so.1\";\n \n   support_cpu_devices = secure_getenv (\"GCN_SUPPORT_CPU_DEVICES\");\n "}]}