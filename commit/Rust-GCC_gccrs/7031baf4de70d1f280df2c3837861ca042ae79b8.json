{"sha": "7031baf4de70d1f280df2c3837861ca042ae79b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzAzMWJhZjRkZTcwZDFmMjgwZGYyYzM4Mzc4NjFjYTA0MmFlNzliOA==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2004-06-14T18:50:44Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2004-06-14T18:50:44Z"}, "message": "re PR fortran/15211 (ICE with LEN intrinsic)\n\nfortran/\nPR fortran/15211\n* trans-intrinsic.c (gfc_conv_intrinsic_len): Deal with arrays\nof strings.\n\ntestsuite/\nPR fortran/15211\n* gfortran.fortran-torture/execute/intrinsic_len.f90: Also test\nLEN of a character array.\n\nFrom-SVN: r83126", "tree": {"sha": "27a33ac55c433ba5387fb8cf06aaf3598f5881a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27a33ac55c433ba5387fb8cf06aaf3598f5881a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7031baf4de70d1f280df2c3837861ca042ae79b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7031baf4de70d1f280df2c3837861ca042ae79b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7031baf4de70d1f280df2c3837861ca042ae79b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7031baf4de70d1f280df2c3837861ca042ae79b8/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f1c3e0a60cd1fd42147cb79c8ee19d6a0f224303", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1c3e0a60cd1fd42147cb79c8ee19d6a0f224303", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1c3e0a60cd1fd42147cb79c8ee19d6a0f224303"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "04e529005f1453fa74a7dc83fef581684dd95aba", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7031baf4de70d1f280df2c3837861ca042ae79b8", "patch": "@@ -1,3 +1,9 @@\n+2004-05-31  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/15211\n+\t* trans-intrinsic.c (gfc_conv_intrinsic_len): Deal with arrays\n+\tof strings. \n+\n 2004-06-14  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/15510"}, {"sha": "67b6cc46dad77540be114e5ddf70ef62d5c51e01", "filename": "gcc/fortran/trans-intrinsic.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ffortran%2Ftrans-intrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ffortran%2Ftrans-intrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-intrinsic.c?ref=7031baf4de70d1f280df2c3837861ca042ae79b8", "patch": "@@ -1874,8 +1874,12 @@ gfc_conv_intrinsic_len (gfc_se * se, gfc_expr * expr)\n       break;\n \n     default:\n-\tif (arg->expr_type == EXPR_VARIABLE && arg->ref == NULL)\n+\tif (arg->expr_type == EXPR_VARIABLE && arg->ref == NULL\n+\t    || (arg->ref->next == NULL && arg->ref->type == REF_ARRAY))\n \t  {\n+\t    /* This doesn't catch all cases. \n+\t       See http://gcc.gnu.org/ml/fortran/2004-06/msg00165.html\n+\t       and the surrounding thread.  */\n \t    sym = arg->symtree->n.sym;\n \t    decl = gfc_get_symbol_decl (sym);\n \t    if (decl == current_function_decl && sym->attr.function"}, {"sha": "36cb478b01c5d51c251cde08d4e2b2e9ae79042e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7031baf4de70d1f280df2c3837861ca042ae79b8", "patch": "@@ -1,3 +1,9 @@\n+2004-06-14  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/15211\n+\t* gfortran.fortran-torture/execute/intrinsic_len.f90: Also test\n+\tLEN of a character array.\n+\n 2004-06-14  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/15096"}, {"sha": "9db8d407a941e9c761a8fc008025d4dbcfb8658b", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/intrinsic_len.f90", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_len.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7031baf4de70d1f280df2c3837861ca042ae79b8/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_len.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_len.f90?ref=7031baf4de70d1f280df2c3837861ca042ae79b8", "patch": "@@ -12,6 +12,7 @@ program test\n \n   if ((a .ne. \"01234567\") .or. (n .ne. 8)) call abort\n   if (len(Tom%name) .ne. 10) call abort\n+  call array_test()\n end\n \n function w(i)\n@@ -20,3 +21,11 @@ function w(i)\n   w = \"01234567\"\n   i = len(w)\n end\n+\n+! This is the testcase from PR 15211 converted to a subroutine\n+subroutine array_test\n+   implicit none\n+   character(len=10) a(4)\n+   if (len(a) .NE. 10) call abort()\n+end subroutine array_test\n+"}]}