{"sha": "2c4ed4565a5bc1cc785dc95d36df2414c06c709b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM0ZWQ0NTY1YTViYzFjYzc4NWRjOTVkMzZkZjI0MTRjMDZjNzA5Yg==", "commit": {"author": {"name": "Hosaka Yuji", "email": "hos@tamanegi.org", "date": "2003-12-02T05:39:06Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2003-12-02T05:39:06Z"}, "message": "re PR libffi/13221 (libffi's closure couldn't pass sequence of char and/or short arguments.)\n\n2003-12-02  Hosaka Yuji  <hos@tamanegi.org>\n\n\tPR other/13221\n\t* src/x86/ffi.c (ffi_prep_args, ffi_prep_incoming_args_SYSV):\n\tAlign arguments to 32 bits.\n\nFrom-SVN: r74161", "tree": {"sha": "6e68cc307e392203998ed80c0370307d4906a49a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e68cc307e392203998ed80c0370307d4906a49a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c4ed4565a5bc1cc785dc95d36df2414c06c709b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c4ed4565a5bc1cc785dc95d36df2414c06c709b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c4ed4565a5bc1cc785dc95d36df2414c06c709b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c4ed4565a5bc1cc785dc95d36df2414c06c709b/comments", "author": null, "committer": null, "parents": [{"sha": "c25d9caa3ba2ed27a6d5d0284af2bb576a584c28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c25d9caa3ba2ed27a6d5d0284af2bb576a584c28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c25d9caa3ba2ed27a6d5d0284af2bb576a584c28"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "557cf7fde363966cc93ba41f12e9f01e632d84f8", "filename": "libffi/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c4ed4565a5bc1cc785dc95d36df2414c06c709b/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c4ed4565a5bc1cc785dc95d36df2414c06c709b/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=2c4ed4565a5bc1cc785dc95d36df2414c06c709b", "patch": "@@ -1,3 +1,9 @@\n+2003-12-02  Hosaka Yuji  <hos@tamanegi.org>\n+\n+\tPR other/13221\n+\t* src/x86/ffi.c (ffi_prep_args, ffi_prep_incoming_args_SYSV):\n+\tAlign arguments to 32 bits.\n+\n 2003-12-01  Andreas Tobler  <a.tobler@schweiz.ch>\n \n \tPR other/13221"}, {"sha": "14b0295e1e1e7339d395f427027ab3d3542c73e3", "filename": "libffi/src/x86/ffi.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c4ed4565a5bc1cc785dc95d36df2414c06c709b/libffi%2Fsrc%2Fx86%2Fffi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c4ed4565a5bc1cc785dc95d36df2414c06c709b/libffi%2Fsrc%2Fx86%2Fffi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fx86%2Fffi.c?ref=2c4ed4565a5bc1cc785dc95d36df2414c06c709b", "patch": "@@ -62,8 +62,8 @@ void ffi_prep_args(char *stack, extended_cif *ecif)\n       size_t z;\n \n       /* Align if necessary */\n-      if (((*p_arg)->alignment - 1) & (unsigned) argp)\n-\targp = (char *) ALIGN(argp, (*p_arg)->alignment);\n+      if ((sizeof(int) - 1) & (unsigned) argp)\n+\targp = (char *) ALIGN(argp, sizeof(int));\n \n       z = (*p_arg)->size;\n       if (z < sizeof(int))\n@@ -301,8 +301,8 @@ ffi_prep_incoming_args_SYSV(char *stack, void **rvalue,\n       size_t z;\n \n       /* Align if necessary */\n-      if (((*p_arg)->alignment - 1) & (unsigned) argp) {\n-\targp = (char *) ALIGN(argp, (*p_arg)->alignment);\n+      if ((sizeof(int) - 1) & (unsigned) argp) {\n+\targp = (char *) ALIGN(argp, sizeof(int));\n       }\n \n       z = (*p_arg)->size;"}]}