{"sha": "e91de072adbe07ae528857a75c9ef4f1d12e5688", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTkxZGUwNzJhZGJlMDdhZTUyODg1N2E3NWM5ZWY0ZjFkMTJlNTY4OA==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2006-09-26T15:36:21Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2006-09-26T15:36:21Z"}, "message": "re PR objc/29195 (ICE in expand_expr_real_1, at expr.c:6932)\n\n2006-09-26  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR objc/29195\n        * objc-act.c (objc_push_parm): If we change the type of the\n        decl, relayout the decl.\n2006-09-26  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR objc/29195\n        * objc/compile/method-1.m: New test.\n\nFrom-SVN: r117229", "tree": {"sha": "c375a10a62d82187241f5638ddcb0c9b2d0368cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c375a10a62d82187241f5638ddcb0c9b2d0368cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e91de072adbe07ae528857a75c9ef4f1d12e5688", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e91de072adbe07ae528857a75c9ef4f1d12e5688", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e91de072adbe07ae528857a75c9ef4f1d12e5688", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e91de072adbe07ae528857a75c9ef4f1d12e5688/comments", "author": null, "committer": null, "parents": [{"sha": "32d662aa80bd3c9a6daa74a4e34757da900657fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32d662aa80bd3c9a6daa74a4e34757da900657fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32d662aa80bd3c9a6daa74a4e34757da900657fd"}], "stats": {"total": 58, "additions": 46, "deletions": 12}, "files": [{"sha": "df8a5872220cba0a3ee7f087d8dbca18a1fb47bb", "filename": "gcc/objc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Fobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Fobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2FChangeLog?ref=e91de072adbe07ae528857a75c9ef4f1d12e5688", "patch": "@@ -1,3 +1,9 @@\n+2006-09-26  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR objc/29195\n+\t* objc-act.c (objc_push_parm): If we change the type of the\n+\tdecl, relayout the decl.\n+\n 2006-09-19  Eric Christopher  <echristo@apple.com>\n \n \t* objc-act.c (JBLEN): Rename to OBJC_JBLEN,"}, {"sha": "1d3513b6a58f021ed36c2e0c328fd397840ef9c4", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=e91de072adbe07ae528857a75c9ef4f1d12e5688", "patch": "@@ -8223,11 +8223,22 @@ static GTY(()) tree objc_parmlist = NULL_TREE;\n static void\n objc_push_parm (tree parm)\n {\n+  bool relayout_needed = false;\n   /* Decay arrays and functions into pointers.  */\n   if (TREE_CODE (TREE_TYPE (parm)) == ARRAY_TYPE)\n-    TREE_TYPE (parm) = build_pointer_type (TREE_TYPE (TREE_TYPE (parm)));\n+    {\n+      TREE_TYPE (parm) = build_pointer_type (TREE_TYPE (TREE_TYPE (parm)));\n+      relayout_needed = true;\n+    }\n   else if (TREE_CODE (TREE_TYPE (parm)) == FUNCTION_TYPE)\n-    TREE_TYPE (parm) = build_pointer_type (TREE_TYPE (parm));\n+    {\n+      TREE_TYPE (parm) = build_pointer_type (TREE_TYPE (parm));\n+      relayout_needed = true;\n+    }\n+\n+  if (relayout_needed)\n+    relayout_decl (parm);\n+  \n \n   DECL_ARG_TYPE (parm)\n     = lang_hooks.types.type_promotes_to (TREE_TYPE (parm));"}, {"sha": "b196528b820683afb61a1e720f20c1261f2ca631", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 15, "deletions": 10, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e91de072adbe07ae528857a75c9ef4f1d12e5688", "patch": "@@ -1,18 +1,23 @@\n+2006-09-26  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR objc/29195\n+\t* objc/compile/method-1.m: New test.\n+\n 2006-09-25  Lee Millward  <lee.millward@codesourcery.com>\n \n-        PR c++/26938\n-        * g++.dg/template/crash58.C: New test.\n-        * g++.dg/parse/crash28.C: Adjust error markers.\n-        * g++.dg/template/crash34.C: Likewise.\n-        * g++.dg/template/friend31.C: Likewise.\n-        * g++.dg/template/crash32.C: Likewise.\n+\tPR c++/26938\n+\t* g++.dg/template/crash58.C: New test.\n+\t* g++.dg/parse/crash28.C: Adjust error markers.\n+\t* g++.dg/template/crash34.C: Likewise.\n+\t* g++.dg/template/friend31.C: Likewise.\n+\t* g++.dg/template/crash32.C: Likewise.\n \n-        PR c++/27329\n-        * g++.dg/template/crash59.C: New test.\n+\tPR c++/27329\n+\t* g++.dg/template/crash59.C: New test.\n \n \tPR c++/27667\n-        * g++.dg/template/spec33.C: New test.\n-        * g++.old-deja/g++.pt/spec20.C: Adjust error markers.\n+\t* g++.dg/template/spec33.C: New test.\n+\t* g++.old-deja/g++.pt/spec20.C: Adjust error markers.\n \t\n 2006-09-24  Zdenek Dvorak <dvorakz@suse.cz>\n \t    Adam Nemet  <anemet@caviumnetworks.com>"}, {"sha": "e9bb989bef6d73e9e0e0488a07d8a1f2de1739a3", "filename": "gcc/testsuite/objc/compile/method-1.m", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Ftestsuite%2Fobjc%2Fcompile%2Fmethod-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e91de072adbe07ae528857a75c9ef4f1d12e5688/gcc%2Ftestsuite%2Fobjc%2Fcompile%2Fmethod-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc%2Fcompile%2Fmethod-1.m?ref=e91de072adbe07ae528857a75c9ef4f1d12e5688", "patch": "@@ -0,0 +1,12 @@\n+/* PR objc/29195 */\n+/* Test that array decls are changed to a pointer type\n+   correctly and make sure we don't crash because the\n+   decl was not relayed out.   */\n+\n+@ implementation NGActiveSocket \n++ (void) socketPair:(int [2])\n+     _pair \n+{\n+  _pair[0] = 0;\n+}\n+@end"}]}