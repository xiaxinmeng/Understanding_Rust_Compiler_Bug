{"sha": "bd9431157f40688ff519cc600b66990248f3b068", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQ5NDMxMTU3ZjQwNjg4ZmY1MTljYzYwMGI2Njk5MDI0OGYzYjA2OA==", "commit": {"author": {"name": "Thomas Koenig", "email": "Thomas.Koenig@online.de", "date": "2007-01-21T20:51:53Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2007-01-21T20:51:53Z"}, "message": "re PR libfortran/30525 ([4.2, 4.1 only] character comparisons with padding)\n\n2007-01-21  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR libfortran/30525\n\t* intrinsics/string_intrinsics.c(compare_string):  Make\n\tsure that comparisons are done unsigned.\n\n2007-01-21  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR libfortran/30525\n\t* gfortran.dg/char_comparison_1.f:  New test.\n\nFrom-SVN: r121035", "tree": {"sha": "da0f261c2091d8c049c3b6d2fe7280f6763ef07e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da0f261c2091d8c049c3b6d2fe7280f6763ef07e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd9431157f40688ff519cc600b66990248f3b068", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd9431157f40688ff519cc600b66990248f3b068", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd9431157f40688ff519cc600b66990248f3b068", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd9431157f40688ff519cc600b66990248f3b068/comments", "author": null, "committer": null, "parents": [{"sha": "7fa49e7be7cf815dd55f9ef2ead04ee002d687a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fa49e7be7cf815dd55f9ef2ead04ee002d687a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fa49e7be7cf815dd55f9ef2ead04ee002d687a8"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "e92e40bcf4f70e3bf3602977422a776436071d88", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd9431157f40688ff519cc600b66990248f3b068/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd9431157f40688ff519cc600b66990248f3b068/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bd9431157f40688ff519cc600b66990248f3b068", "patch": "@@ -1,3 +1,8 @@\n+2007-01-21  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR libfortran/30525\n+\t* gfortran.dg/char_comparison_1.f:  New test.\n+\n 2007-01-21  Ira Rosen  <irar@il.ibm.com> \n \n \t* gcc.dg/vect/vect-strided-same-dr.c: New test. "}, {"sha": "9a316b74f7d3b5f4e1ae37d82afa2aeb79558c31", "filename": "gcc/testsuite/gfortran.dg/char_comparison_1.f", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd9431157f40688ff519cc600b66990248f3b068/gcc%2Ftestsuite%2Fgfortran.dg%2Fchar_comparison_1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd9431157f40688ff519cc600b66990248f3b068/gcc%2Ftestsuite%2Fgfortran.dg%2Fchar_comparison_1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fchar_comparison_1.f?ref=bd9431157f40688ff519cc600b66990248f3b068", "patch": "@@ -0,0 +1,26 @@\n+C { dg-do run }\n+C     PR 30525 - comparisons with padded spaces were done\n+C     signed.\n+      program main\n+      character*2 c2\n+      character*1 c1, c3, c4\n+C\n+C  Comparison between char(255) and space padding\n+C\n+      c2 = 'a' // char(255)\n+      c1 = 'a'\n+      if (.not. (c2 .gt. c1)) call abort\n+C\n+C  Comparison between char(255) and space\n+C\n+      c3 = ' '\n+      c4 = char(255)\n+      if (.not. (c4 .gt. c3)) call abort\n+\n+C\n+C  Check constant folding\n+C\n+      if (.not. ('a' // char(255) .gt. 'a')) call abort\n+\n+      if (.not. (char(255) .gt. 'a')) call abort\n+      end"}, {"sha": "f12f83ee441d4a61a221e64b05b00b51899ea303", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd9431157f40688ff519cc600b66990248f3b068/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd9431157f40688ff519cc600b66990248f3b068/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=bd9431157f40688ff519cc600b66990248f3b068", "patch": "@@ -1,3 +1,9 @@\n+2007-01-21  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR libfortran/30525\n+\t* intrinsics/string_intrinsics.c(compare_string):  Make\n+\tsure that comparisons are done unsigned.\n+\n 2006-12-09  Tobias Burnus  <burnus@net-b.de>\n \n \tPR libfortran/30015"}, {"sha": "e432987dcad049ef15f5df099138d1bbbb70de74", "filename": "libgfortran/intrinsics/string_intrinsics.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd9431157f40688ff519cc600b66990248f3b068/libgfortran%2Fintrinsics%2Fstring_intrinsics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd9431157f40688ff519cc600b66990248f3b068/libgfortran%2Fintrinsics%2Fstring_intrinsics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Fstring_intrinsics.c?ref=bd9431157f40688ff519cc600b66990248f3b068", "patch": "@@ -83,7 +83,7 @@ compare_string (GFC_INTEGER_4 len1, const char * s1,\n \t\tGFC_INTEGER_4 len2, const char * s2)\n {\n   int res;\n-  const char *s;\n+  const unsigned char *s;\n   int len;\n \n   res = memcmp (s1, s2, (len1 < len2) ? len1 : len2);\n@@ -96,13 +96,13 @@ compare_string (GFC_INTEGER_4 len1, const char * s1,\n   if (len1 < len2)\n     {\n       len = len2 - len1;\n-      s = &s2[len1];\n+      s = (unsigned char *) &s2[len1];\n       res = -1;\n     }\n   else\n     {\n       len = len1 - len2;\n-      s = &s1[len2];\n+      s = (unsigned char *) &s1[len2];\n       res = 1;\n     }\n "}]}