{"sha": "bce54832de15ae651be11fda3b84b07dd0f2663e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmNlNTQ4MzJkZTE1YWU2NTFiZTExZmRhM2I4NGIwN2RkMGYyNjYzZQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-03-29T21:58:49Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2002-03-29T21:58:49Z"}, "message": "parse.y (check_inner_circular_reference): Ignore incomplete types.\n\n2002-03-29  Tom Tromey  <tromey@redhat.com>\n\n\t* parse.y (check_inner_circular_reference): Ignore incomplete\n\ttypes.\n\n(http://gcc.gnu.org/ml/gcc-patches/2002-03/msg01987.html)\n\nFrom-SVN: r51573", "tree": {"sha": "94e55504d59895bde52c7317e9f1e8b303f7cda0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94e55504d59895bde52c7317e9f1e8b303f7cda0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bce54832de15ae651be11fda3b84b07dd0f2663e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce54832de15ae651be11fda3b84b07dd0f2663e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bce54832de15ae651be11fda3b84b07dd0f2663e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce54832de15ae651be11fda3b84b07dd0f2663e/comments", "author": null, "committer": null, "parents": [{"sha": "cb260b11817187e933bba141210f3af571f6b351", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb260b11817187e933bba141210f3af571f6b351", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb260b11817187e933bba141210f3af571f6b351"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "5adea4c8216e36973620e9b66650d21a8de08184", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bce54832de15ae651be11fda3b84b07dd0f2663e/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bce54832de15ae651be11fda3b84b07dd0f2663e/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=bce54832de15ae651be11fda3b84b07dd0f2663e", "patch": "@@ -1,3 +1,8 @@\n+2002-03-29  Tom Tromey  <tromey@redhat.com>\n+\n+\t* parse.y (check_inner_circular_reference): Ignore incomplete\n+\ttypes.\n+\n 2002-03-29  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* Make-lang.in (builtins.o): Update."}, {"sha": "6dccb3b23e36b0c82d94055ef5179d41db2d2c12", "filename": "gcc/java/parse.y", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bce54832de15ae651be11fda3b84b07dd0f2663e/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bce54832de15ae651be11fda3b84b07dd0f2663e/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=bce54832de15ae651be11fda3b84b07dd0f2663e", "patch": "@@ -5245,14 +5245,23 @@ check_inner_circular_reference (source, target)\n \n   if (!basetype_vec)\n     return NULL_TREE;\n-  \n+\n   for (i = 0; i < TREE_VEC_LENGTH (basetype_vec); i++)\n     {\n-      tree su = BINFO_TYPE (TREE_VEC_ELT (basetype_vec, i));\n+      tree su;\n+\n+      /* We can end up with a NULL_TREE or an incomplete type here if\n+\t we encountered previous type resolution errors. It's safe to\n+\t simply ignore these cases.  */\n+      if (TREE_VEC_ELT (basetype_vec, i) == NULL_TREE)\n+\tcontinue;\n+      su = BINFO_TYPE (TREE_VEC_ELT (basetype_vec, i));\n+      if (INCOMPLETE_TYPE_P (su))\n+\tcontinue;\n \n       if (inherits_from_p (su, target))\n \treturn lookup_cl (TYPE_NAME (su));\n-      \n+\n       for (ctx = DECL_CONTEXT (TYPE_NAME (su)); ctx; ctx = DECL_CONTEXT (ctx))\n \t{\n \t  /* An enclosing context shouldn't be TARGET */"}]}