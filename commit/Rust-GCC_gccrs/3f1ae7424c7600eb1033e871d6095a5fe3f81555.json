{"sha": "3f1ae7424c7600eb1033e871d6095a5fe3f81555", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2YxYWU3NDI0Yzc2MDBlYjEwMzNlODcxZDYwOTVhNWZlM2Y4MTU1NQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2012-07-04T13:49:19Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2012-07-04T13:49:19Z"}, "message": "re PR middle-end/53321 (LTO bootstrap failed with bootstrap-profiled)\n\n\tPR middle-end/53321\n\t* ipa.c (symtab_remove_unreachable_nodes): Partially revert r187375\n\tto not call cgraph_propagate_frequency if something was changed.\n\ntestsuite/ChangLog:\n\n\tPR middle-end/53321\n\t* g++.dg/torture/pr53321.C: New test.\n\nFrom-SVN: r189261", "tree": {"sha": "6c9e74b6518a79df559a867dacf83d7c6d47ae70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c9e74b6518a79df559a867dacf83d7c6d47ae70"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3f1ae7424c7600eb1033e871d6095a5fe3f81555", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f1ae7424c7600eb1033e871d6095a5fe3f81555", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f1ae7424c7600eb1033e871d6095a5fe3f81555", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f1ae7424c7600eb1033e871d6095a5fe3f81555/comments", "author": null, "committer": null, "parents": [{"sha": "23af816cc9efadb9f038a66c8757446e9ce4deeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23af816cc9efadb9f038a66c8757446e9ce4deeb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23af816cc9efadb9f038a66c8757446e9ce4deeb"}], "stats": {"total": 54, "additions": 48, "deletions": 6}, "files": [{"sha": "3c3ba0ed321d0ac4e4fb699ed40c9f9900f2c0d4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3f1ae7424c7600eb1033e871d6095a5fe3f81555", "patch": "@@ -1,3 +1,9 @@\n+2012-07-04  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR middle-end/53321\n+\t* ipa.c (symtab_remove_unreachable_nodes): Partially revert r187375\n+\tto not call cgraph_propagate_frequency if something was changed.\n+\n 2012-07-04  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/53433\n@@ -31,7 +37,7 @@\n \tas in free_lang_data_in_type.\n \n 2012-07-04  Tobias Grosser <tobias@grosser.es>\n-\tMichael Matz  <matz@suse.de>\n+\t    Michael Matz  <matz@suse.de>\n \n \t* Makefile.in (OBJS): Add graphite-optimize-isl.o.\n \t(graphite-optimize-isl.o): Add dependencies."}, {"sha": "09351a79c2eaea0bb22d58f1a1b1e39887449cf5", "filename": "gcc/ipa.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2Fipa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2Fipa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa.c?ref=3f1ae7424c7600eb1033e871d6095a5fe3f81555", "patch": "@@ -449,11 +449,6 @@ symtab_remove_unreachable_nodes (bool before_inlining_p, FILE *file)\n   verify_symtab ();\n #endif\n \n-  /* If we removed something, perhaps profile could be improved.  */\n-  if (changed && optimize && inline_edge_summary_vec)\n-    FOR_EACH_DEFINED_FUNCTION (node)\n-      cgraph_propagate_frequency (node);\n-\n   return changed;\n }\n "}, {"sha": "2833385b50a6a04a0b50f4d2e82653fbd94e6964", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3f1ae7424c7600eb1033e871d6095a5fe3f81555", "patch": "@@ -1,3 +1,8 @@\n+2012-07-04  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR middle-end/53321\n+\t* g++.dg/torture/pr53321.C: New test.\n+\n 2012-07-04  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/53844"}, {"sha": "40a2de731d7849b2b229d2d824d7984c8a45204f", "filename": "gcc/testsuite/g++.dg/torture/pr53321.C", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr53321.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f1ae7424c7600eb1033e871d6095a5fe3f81555/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr53321.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr53321.C?ref=3f1ae7424c7600eb1033e871d6095a5fe3f81555", "patch": "@@ -0,0 +1,36 @@\n+// { dg-do compile }\n+// { dg-require-profiling \"-fprofile-generate\" }\n+// { dg-options \"-fprofile-generate\" }\n+\n+typedef long unsigned int size_t;\n+\n+extern \"C\"\n+{\n+  extern void *memcpy (void *__dest, __const void *__src, size_t __n);\n+}\n+\n+extern char *src, *sources;\n+extern int n_sources;\n+\n+static void\n+find_source (const char *file_name)\n+{\n+  memcpy (src, sources, n_sources * sizeof (*sources));\n+}\n+\n+extern const char *gcov_read_string (void);\n+\n+static void read_graph_file (void)\n+{\n+  find_source (gcov_read_string ());\n+}\n+\n+static void process_file (void)\n+{\n+  read_graph_file ();\n+}\n+\n+int main ()\n+{\n+  process_file ();\n+}"}]}