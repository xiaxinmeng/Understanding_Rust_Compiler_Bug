{"sha": "d9490f2f4ebedc6c568b963b230f20b298a22159", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk0OTBmMmY0ZWJlZGM2YzU2OGI5NjNiMjMwZjIwYjI5OGEyMjE1OQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-04-22T18:34:59Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-04-22T18:34:59Z"}, "message": "predict.c (expected_value_to_br_prob): Don't bomb if op1 of the collected condition is not a constant.\n\n        * predict.c (expected_value_to_br_prob): Don't bomb if op1 of\n        the collected condition is not a constant.\n\nFrom-SVN: r33340", "tree": {"sha": "b190cb47708cbc1a7a252efd379c6490dbfa1776", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b190cb47708cbc1a7a252efd379c6490dbfa1776"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9490f2f4ebedc6c568b963b230f20b298a22159", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9490f2f4ebedc6c568b963b230f20b298a22159", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9490f2f4ebedc6c568b963b230f20b298a22159", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9490f2f4ebedc6c568b963b230f20b298a22159/comments", "author": null, "committer": null, "parents": [{"sha": "1143c0a03fac4518d8ab72b375269b88302dfc49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1143c0a03fac4518d8ab72b375269b88302dfc49", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1143c0a03fac4518d8ab72b375269b88302dfc49"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "be2cd8a000a3591aae8959677ba988515b6355f5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9490f2f4ebedc6c568b963b230f20b298a22159/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9490f2f4ebedc6c568b963b230f20b298a22159/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d9490f2f4ebedc6c568b963b230f20b298a22159", "patch": "@@ -1,3 +1,8 @@\n+2000-04-22  Richard Henderson  <rth@cygnus.com>\n+\n+\t* predict.c (expected_value_to_br_prob): Don't bomb if op1 of\n+\tthe collected condition is not a constant.\n+\n 2000-04-22  Gabriel Dos Reis  <gdr@codesourcery.com>\n \n \t* diagnostic.h: New file."}, {"sha": "57b71e2d9c289e4bff94473281cdc8bdc7f85f42", "filename": "gcc/predict.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9490f2f4ebedc6c568b963b230f20b298a22159/gcc%2Fpredict.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9490f2f4ebedc6c568b963b230f20b298a22159/gcc%2Fpredict.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpredict.c?ref=d9490f2f4ebedc6c568b963b230f20b298a22159", "patch": "@@ -248,9 +248,19 @@ expected_value_to_br_prob ()\n \t}\n \n       /* Collect the branch condition, hopefully relative to EV_REG.  */\n+      /* ???  At present we'll miss things like\n+\t\t(expected_value (eq r70 0))\n+\t\t(set r71 -1)\n+\t\t(set r80 (lt r70 r71))\n+\t\t(set pc (if_then_else (ne r80 0) ...))\n+\t as canonicalize_condition will render this to us as \n+\t\t(lt r70, r71)\n+\t Could use cselib to try and reduce this further.  */\n       cond = XEXP (SET_SRC (PATTERN (insn)), 0);\n       cond = canonicalize_condition (insn, cond, 0, NULL, ev_reg);\n-      if (! cond || XEXP (cond, 0) != ev_reg)\n+      if (! cond\n+\t  || XEXP (cond, 0) != ev_reg\n+\t  || GET_CODE (XEXP (cond, 1)) != CONST_INT)\n \tcontinue;\n \n       /* Substitute and simplify.  Given that the expression we're "}]}