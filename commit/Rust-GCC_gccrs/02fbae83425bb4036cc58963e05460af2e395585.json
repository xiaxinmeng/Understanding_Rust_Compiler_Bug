{"sha": "02fbae83425bb4036cc58963e05460af2e395585", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDJmYmFlODM0MjViYjQwMzZjYzU4OTYzZTA1NDYwYWYyZTM5NTU4NQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2004-12-08T00:12:03Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2004-12-08T00:12:03Z"}, "message": "re PR c/18867 (ICE on invalid switch quantity)\n\n        PR c/18867\n        * c-typeck.c (c_start_case): Set orig_type to error_mark_node\n        when the type of the controlling expression is not a valid type.\n\ntestsuite/\n        * gcc.dg/noncompile/20041207.c: New test.\n\nFrom-SVN: r91837", "tree": {"sha": "201a6333e6bc0735dfcd4a3615016230541afc32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/201a6333e6bc0735dfcd4a3615016230541afc32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02fbae83425bb4036cc58963e05460af2e395585", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02fbae83425bb4036cc58963e05460af2e395585", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02fbae83425bb4036cc58963e05460af2e395585", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02fbae83425bb4036cc58963e05460af2e395585/comments", "author": null, "committer": null, "parents": [{"sha": "665fcad835bb6ac9d2d41077bd74b8ba66ebfecc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/665fcad835bb6ac9d2d41077bd74b8ba66ebfecc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/665fcad835bb6ac9d2d41077bd74b8ba66ebfecc"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "70747e28fca0aa20523f2a29f5d249fe4f288752", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fbae83425bb4036cc58963e05460af2e395585/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fbae83425bb4036cc58963e05460af2e395585/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=02fbae83425bb4036cc58963e05460af2e395585", "patch": "@@ -1,3 +1,9 @@\n+2004-12-07  Steven Bosscher  <stevenb@suse.de>\n+\n+\tPR c/18867\n+\t* c-typeck.c (c_start_case): Set orig_type to error_mark_node\n+\twhen the type of the controlling expression is not a valid type.\n+\n 2004-12-07  Steven Bosscher  <stevenb@suse.de>\n \n \tPR tree-optimization/17340"}, {"sha": "e5c8ef5234e4c12fab05dfffec156aa8b47d4223", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fbae83425bb4036cc58963e05460af2e395585/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fbae83425bb4036cc58963e05460af2e395585/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=02fbae83425bb4036cc58963e05460af2e395585", "patch": "@@ -6507,6 +6507,7 @@ c_start_case (tree exp)\n \t{\n \t  error (\"switch quantity not an integer\");\n \t  exp = integer_zero_node;\n+\t  orig_type = error_mark_node;\n \t}\n       else\n \t{"}, {"sha": "440f30900866d518d1b3b4e837357836f049bae3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fbae83425bb4036cc58963e05460af2e395585/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fbae83425bb4036cc58963e05460af2e395585/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=02fbae83425bb4036cc58963e05460af2e395585", "patch": "@@ -1,3 +1,7 @@\n+2004-12-07  Steven Bosscher  <stevenb@suse.de>\n+\n+\t* gcc.dg/noncompile/20041207.c: New test.\n+\n 2004-12-07  Volker Reichelt  <reichelt@gcc.gnu.org>\n \n \t* g++.dg/other/unreachable-1.C: New test."}, {"sha": "702424590f8781ca941942c980e67b39c3e403af", "filename": "gcc/testsuite/gcc.dg/noncompile/20041207.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02fbae83425bb4036cc58963e05460af2e395585/gcc%2Ftestsuite%2Fgcc.dg%2Fnoncompile%2F20041207.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02fbae83425bb4036cc58963e05460af2e395585/gcc%2Ftestsuite%2Fgcc.dg%2Fnoncompile%2F20041207.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnoncompile%2F20041207.c?ref=02fbae83425bb4036cc58963e05460af2e395585", "patch": "@@ -0,0 +1,8 @@\n+/* PR18867 - ICE on a switch controlling expressions with an\n+   invalid type.  Origin: Serge Belyshev <belyshev@lubercy.com>  */\n+   \n+void f()\n+{\n+  float x;\n+  switch (x) {case 0: break;}; /* {dg-error \"not an integer\" } */\n+}"}]}