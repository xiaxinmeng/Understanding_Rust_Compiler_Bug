{"sha": "d3010d7286ad5f894ef662ea189c201f2a724290", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMwMTBkNzI4NmFkNWY4OTRlZjY2MmVhMTg5YzIwMWYyYTcyNDI5MA==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-04-11T18:25:08Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-04-11T18:25:08Z"}, "message": "alias-1.c: New test.\n\n2005-04-11  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        * gcc.dg/tree-ssa/alias-1.c: New test.\n2005-04-11  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        * tree-ssa-alias.c (may_alias_p): If the variable\n        is a global variable and the pointer is parameter\n        and -fargument-noalias-global is used, then\n        the pointer cannot alias the variable.\n\nFrom-SVN: r97978", "tree": {"sha": "2fb8bffafb98984edbf0a9a76142caf122f481d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fb8bffafb98984edbf0a9a76142caf122f481d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3010d7286ad5f894ef662ea189c201f2a724290", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3010d7286ad5f894ef662ea189c201f2a724290", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3010d7286ad5f894ef662ea189c201f2a724290", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3010d7286ad5f894ef662ea189c201f2a724290/comments", "author": null, "committer": null, "parents": [{"sha": "78a7dc9032e96f6a507d96bc7f3999ff3c9b4c42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78a7dc9032e96f6a507d96bc7f3999ff3c9b4c42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78a7dc9032e96f6a507d96bc7f3999ff3c9b4c42"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "2c7195401c84b991a06fe8b8830da862ce997295", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d3010d7286ad5f894ef662ea189c201f2a724290", "patch": "@@ -1,3 +1,10 @@\n+2005-04-11  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t* tree-ssa-alias.c (may_alias_p): If the variable\n+\tis a global variable and the pointer is parameter\n+\tand -fargument-noalias-global is used, then\n+\tthe pointer cannot alias the variable.\n+\n 2005-04-11  James A. Morrison  <phython@gcc.gnu.org>\n \n \t* config/sparc/sparc.c: Use gcc_assert and gcc_unreachable."}, {"sha": "ff03dbee86b0065c1fb2e094d1df86d0a6ae4dad", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d3010d7286ad5f894ef662ea189c201f2a724290", "patch": "@@ -1,3 +1,7 @@\n+2005-04-11  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t* gcc.dg/tree-ssa/alias-1.c: New test.\n+\n 2005-04-11  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR tree-optimization/20920"}, {"sha": "4e6cc5ad448cfaae97ac97c8ac3e5221f3367ff5", "filename": "gcc/testsuite/gcc.dg/tree-ssa/alias-1.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Falias-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Falias-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Falias-1.c?ref=d3010d7286ad5f894ef662ea189c201f2a724290", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-options \"-O2 -fargument-noalias-global -fdump-tree-optimizated\" } */\n+int f;\n+void link_error ();\n+\n+void g(int *i)\n+{\n+  *i = 0;\n+  f = 1;\n+  if (*i != 0)\n+    link_error ();\n+}\n+\n+\n+/* We should have removed the link_error on the tree level as we told GCC\n+   that *i cannot point to f via the option -fargument-noalias-global. */\n+/* { dg-final { scan-tree-dump-times \"link_error\" 0 \"optimized\"} } */"}, {"sha": "0f7001757c5f436539fb8042b2e699069881776c", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3010d7286ad5f894ef662ea189c201f2a724290/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=d3010d7286ad5f894ef662ea189c201f2a724290", "patch": "@@ -1708,6 +1708,16 @@ may_alias_p (tree ptr, HOST_WIDE_INT mem_alias_set,\n       alias_stats.simple_resolved++;\n       return false;\n     }\n+  \n+  /* If -fargument-noalias-global is >1, pointer arguments may\n+     not point to global variables.  */\n+  if (flag_argument_noalias > 1 && is_global_var (var)\n+      && TREE_CODE (ptr) == PARM_DECL)\n+    {\n+      alias_stats.alias_noalias++;\n+      alias_stats.simple_resolved++;\n+      return false;\n+    }\n \n   m_ann = var_ann (mem);\n "}]}