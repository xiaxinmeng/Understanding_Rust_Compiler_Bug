{"sha": "59a8062a6a11ed4be77fb103a37433f66e5c9d21", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTlhODA2MmE2YTExZWQ0YmU3N2ZiMTAzYTM3NDMzZjY2ZTVjOWQyMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-03-13T10:04:51Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-03-13T10:04:51Z"}, "message": "re PR lto/84805 (ICE in get_odr_type, at ipa-devirt.c:2096 since r258133)\n\n\tPR lto/84805\n\t* ipa-devirt.c (odr_subtypes_equivalent_p): Do not get the ODR type of\n\tincomplete types.\n\nFrom-SVN: r258481", "tree": {"sha": "1e1d0e9808fba5db56bad62d497dd59f27c39489", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e1d0e9808fba5db56bad62d497dd59f27c39489"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/59a8062a6a11ed4be77fb103a37433f66e5c9d21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59a8062a6a11ed4be77fb103a37433f66e5c9d21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59a8062a6a11ed4be77fb103a37433f66e5c9d21", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59a8062a6a11ed4be77fb103a37433f66e5c9d21/comments", "author": null, "committer": null, "parents": [{"sha": "0dbacfcfadec514b5ccd4ae70fe53dc589ae7439", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0dbacfcfadec514b5ccd4ae70fe53dc589ae7439", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0dbacfcfadec514b5ccd4ae70fe53dc589ae7439"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "0937241a0584bf6691f96701dc58d13e559fa7a1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59a8062a6a11ed4be77fb103a37433f66e5c9d21/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59a8062a6a11ed4be77fb103a37433f66e5c9d21/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=59a8062a6a11ed4be77fb103a37433f66e5c9d21", "patch": "@@ -1,3 +1,9 @@\n+2018-03-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR lto/84805\n+\t* ipa-devirt.c (odr_subtypes_equivalent_p): Do not get the ODR type of\n+\tincomplete types.\n+\n 2018-03-13  Martin Liska  <mliska@suse.cz>\n \n \tPR ipa/84658."}, {"sha": "30d37574bbec45bfc6accfb0ef3ed7c3d86a56b6", "filename": "gcc/ipa-devirt.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59a8062a6a11ed4be77fb103a37433f66e5c9d21/gcc%2Fipa-devirt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59a8062a6a11ed4be77fb103a37433f66e5c9d21/gcc%2Fipa-devirt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-devirt.c?ref=59a8062a6a11ed4be77fb103a37433f66e5c9d21", "patch": "@@ -656,7 +656,7 @@ set_type_binfo (tree type, tree binfo)\n       gcc_assert (!TYPE_BINFO (type));\n }\n \n-/* Compare T2 and T2 based on name or structure.  */\n+/* Compare T1 and T2 based on name or structure.  */\n \n static bool\n odr_subtypes_equivalent_p (tree t1, tree t2,\n@@ -678,7 +678,7 @@ odr_subtypes_equivalent_p (tree t1, tree t2,\n     return false;\n \n   /* For ODR types be sure to compare their names.\n-     To support -wno-odr-type-merging we allow one type to be non-ODR\n+     To support -Wno-odr-type-merging we allow one type to be non-ODR\n      and other ODR even though it is a violation.  */\n   if (types_odr_comparable (t1, t2, true))\n     {\n@@ -690,6 +690,8 @@ odr_subtypes_equivalent_p (tree t1, tree t2,\n \t therefore which call will report the ODR violation, if any.  */\n \t if (!odr_type_p (t1)\n \t     || !odr_type_p (t2)\n+\t     || !COMPLETE_TYPE_P (t1)\n+\t     || !COMPLETE_TYPE_P (t2)\n \t     || (!get_odr_type (t1, true)->odr_violated\n \t\t && !get_odr_type (t2, true)->odr_violated))\n         return true;"}]}