{"sha": "f5b02f1ec1a25063efed41329cee69a6c530b0ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjViMDJmMWVjMWEyNTA2M2VmZWQ0MTMyOWNlZTY5YTZjNTMwYjBlZA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-10-11T10:29:54Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-10-11T10:29:54Z"}, "message": "c-ada-spec.c (dump_ada_template): Bail out for template declarations declaring something coming from another file.\n\n\t* c-ada-spec.c (dump_ada_template): Bail out for template declarations\n\tdeclaring something coming from another file.\n\nFrom-SVN: r192353", "tree": {"sha": "ff32c81097404a5c83b7f08bba9d0881d180a0ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff32c81097404a5c83b7f08bba9d0881d180a0ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5b02f1ec1a25063efed41329cee69a6c530b0ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5b02f1ec1a25063efed41329cee69a6c530b0ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5b02f1ec1a25063efed41329cee69a6c530b0ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5b02f1ec1a25063efed41329cee69a6c530b0ed/comments", "author": null, "committer": null, "parents": [{"sha": "770e9be943fdf95399494d595c3e2cefa02d5b0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770e9be943fdf95399494d595c3e2cefa02d5b0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/770e9be943fdf95399494d595c3e2cefa02d5b0e"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "04b6971fef76cdc60f867ee36cfc006441096eb4", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5b02f1ec1a25063efed41329cee69a6c530b0ed/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5b02f1ec1a25063efed41329cee69a6c530b0ed/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=f5b02f1ec1a25063efed41329cee69a6c530b0ed", "patch": "@@ -1,6 +1,11 @@\n+2012-10-11  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-ada-spec.c (dump_ada_template): Bail out for template declarations\n+\tdeclaring something coming from another file.\n+\n 2012-10-10  Arnaud Charlet  <charlet@adacore.com>\n \n-PR ada/54845\n+\tPR ada/54845\n \t* c-ada-spec.c (print_ada_struct_decl): Increase buf size.\n \n 2012-10-09  Paolo Carlini  <paolo.carlini@oracle.com>"}, {"sha": "631ee7a5843a4a0b5b0a24d6067c02cd93f693dd", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5b02f1ec1a25063efed41329cee69a6c530b0ed/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5b02f1ec1a25063efed41329cee69a6c530b0ed/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=f5b02f1ec1a25063efed41329cee69a6c530b0ed", "patch": "@@ -1700,10 +1700,18 @@ static int\n dump_ada_template (pretty_printer *buffer, tree t,\n \t\t   int (*cpp_check)(tree, cpp_operation), int spc)\n {\n-  tree inst = DECL_VINDEX (t);\n   /* DECL_VINDEX is DECL_TEMPLATE_INSTANTIATIONS in this context.  */\n+  tree inst = DECL_VINDEX (t);\n+  /* DECL_RESULT_FLD is DECL_TEMPLATE_RESULT in this context.  */\n+  tree result = DECL_RESULT_FLD (t);\n   int num_inst = 0;\n \n+  /* Don't look at template declarations declaring something coming from\n+     another file.  This can occur for template friend declarations.  */\n+  if (LOCATION_FILE (decl_sloc (result, false))\n+      != LOCATION_FILE (decl_sloc (t, false)))\n+    return 0;\n+\n   while (inst && inst != error_mark_node)\n     {\n       tree types = TREE_PURPOSE (inst);"}]}