{"sha": "6bf0b59cbfea56724632a81aa5a0623e2e6d3297", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJmMGI1OWNiZmVhNTY3MjQ2MzJhODFhYTVhMDYyM2UyZTZkMzI5Nw==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2003-10-29T12:21:58Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-10-29T12:21:58Z"}, "message": "locale_facets.tcc (time_put::put): Absolutely avoid dereferencing end iterators; clean up.\n\n2003-10-29  Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/bits/locale_facets.tcc (time_put::put): Absolutely\n\tavoid dereferencing end iterators; clean up.\n\n\t* include/bits/locale_facets.tcc (num_get::_M_extract_float,\n\tnum_get::_M_extract_int): Minor tweak.\n\nFrom-SVN: r73035", "tree": {"sha": "f1f39a67b8a640ad13cab7f25e359a43456d9fd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1f39a67b8a640ad13cab7f25e359a43456d9fd6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6bf0b59cbfea56724632a81aa5a0623e2e6d3297", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bf0b59cbfea56724632a81aa5a0623e2e6d3297", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bf0b59cbfea56724632a81aa5a0623e2e6d3297", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bf0b59cbfea56724632a81aa5a0623e2e6d3297/comments", "author": null, "committer": null, "parents": [{"sha": "9c9081ae918ff0873d692348b88b00d83ab0f509", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c9081ae918ff0873d692348b88b00d83ab0f509", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c9081ae918ff0873d692348b88b00d83ab0f509"}], "stats": {"total": 41, "additions": 24, "deletions": 17}, "files": [{"sha": "264136df7e4a53ac4d9316f651439027482ac214", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bf0b59cbfea56724632a81aa5a0623e2e6d3297/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bf0b59cbfea56724632a81aa5a0623e2e6d3297/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=6bf0b59cbfea56724632a81aa5a0623e2e6d3297", "patch": "@@ -1,3 +1,11 @@\n+2003-10-29  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/bits/locale_facets.tcc (time_put::put): Absolutely\n+\tavoid dereferencing end iterators; clean up.\n+\n+\t* include/bits/locale_facets.tcc (num_get::_M_extract_float,\n+\tnum_get::_M_extract_int): Minor tweak.\n+\n 2003-10-29  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/bits/locale_facets.tcc: Remove some unnecessary"}, {"sha": "681a4c3870e3f9e561e9c33291d8941796ae2f4c", "filename": "libstdc++-v3/include/bits/locale_facets.tcc", "status": "modified", "additions": 16, "deletions": 17, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bf0b59cbfea56724632a81aa5a0623e2e6d3297/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bf0b59cbfea56724632a81aa5a0623e2e6d3297/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc?ref=6bf0b59cbfea56724632a81aa5a0623e2e6d3297", "patch": "@@ -219,10 +219,9 @@ namespace std\n \t    {\n \t      // Scientific notation.\n \t      __xtrc += __e ? _S_atoms_in[_S_ie] : _S_atoms_in[_S_iE];\n-\t      ++__beg;\n \t      \n \t      // Remove optional plus or minus sign, if they exist.\n-\t      if (__beg != __end)\n+\t      if (++__beg != __end)\n \t\t{\n \t\t  const bool __plus = __traits_type::eq(*__beg, __lit[_S_iplus]);\n \t\t  if (__plus || __traits_type::eq(*__beg, __lit[_S_iminus]))\n@@ -327,9 +326,8 @@ namespace std\n \t  if (__beg != __end && __traits_type::eq(*__beg, __lit[_S_izero]))\n \t    {\n \t      __xtrc += _S_atoms_in[_S_izero];\n-\t      ++__beg; \n \t      \n-\t      if (__beg != __end)\n+\t      if (++__beg != __end)\n \t\t{\n \t\t  const bool __x = __traits_type::eq(*__beg, __lit[_S_ix]);\n \t\t  if (__x || __traits_type::eq(*__beg, __lit[_S_iX]))\n@@ -1995,31 +1993,32 @@ namespace std\n     {\n       const locale __loc = __io.getloc();\n       ctype<_CharT> const& __ctype = use_facet<ctype<_CharT> >(__loc);\n-      while (__beg != __end)\n+      for (; __beg != __end; ++__beg)\n \t{\n-\t  const _CharT __tmp = *__beg;\n-\t  ++__beg;\n-\t  if (__ctype.narrow(__tmp, 0) == '%' && __beg != __end)\n+\t  if (__ctype.narrow(*__beg, 0) != '%')\n+\t    {\n+\t      *__s = *__beg;\n+\t      ++__s;\n+\t    }\n+\t  else if (++__beg != __end)\n \t    {\n \t      char __format;\n \t      char __mod = 0;\n \t      const char __c = __ctype.narrow(*__beg, 0);\n-\t      ++__beg;\n-\t      if (__c == 'E' || __c == 'O')\n+\t      if (__c != 'E' && __c != 'O')\n+\t\t__format = __c;\n+\t      else if (++__beg != __end)\n \t\t{\n \t\t  __mod = __c;\n \t\t  __format = __ctype.narrow(*__beg, 0);\n-\t\t  ++__beg;\n \t\t}\n \t      else\n-\t\t__format = __c;\n-\t      __s = this->do_put(__s, __io, __fill, __tm, __format, __mod);\n+\t\tbreak;\n+\t      __s = this->do_put(__s, __io, __fill, __tm,\n+\t\t\t\t __format, __mod);\n \t    }\n \t  else\n-\t    {\n-\t      *__s = __tmp;\n-\t      ++__s;\n-\t    }\n+\t    break;\n \t}\n       return __s;\n     }"}]}