{"sha": "9d9165ef4838d286ac546d6168ffa8a4712acc2c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ5MTY1ZWY0ODM4ZDI4NmFjNTQ2ZDYxNjhmZmE4YTQ3MTJhY2MyYw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-05-10T05:31:15Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-05-10T05:31:15Z"}, "message": "typeck.c (build_unary_op): Do not resort to address arithmetic when taking the address of a COMPONENT_REF.\n\n\t* typeck.c (build_unary_op): Do not resort to address arithmetic\n\twhen taking the address of a COMPONENT_REF.\n\nFrom-SVN: r99503", "tree": {"sha": "daaa213b949f3072f2aae9c12d1da4ef4fd5b0b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/daaa213b949f3072f2aae9c12d1da4ef4fd5b0b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d9165ef4838d286ac546d6168ffa8a4712acc2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d9165ef4838d286ac546d6168ffa8a4712acc2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d9165ef4838d286ac546d6168ffa8a4712acc2c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d9165ef4838d286ac546d6168ffa8a4712acc2c/comments", "author": null, "committer": null, "parents": [{"sha": "6323b34eeb914d6b63cb4dce5212f13f1e345370", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6323b34eeb914d6b63cb4dce5212f13f1e345370", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6323b34eeb914d6b63cb4dce5212f13f1e345370"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "82415340a9e55479a426b2173bceb306a7522f3b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d9165ef4838d286ac546d6168ffa8a4712acc2c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d9165ef4838d286ac546d6168ffa8a4712acc2c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9d9165ef4838d286ac546d6168ffa8a4712acc2c", "patch": "@@ -1,3 +1,8 @@\n+2005-05-09  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* typeck.c (build_unary_op): Do not resort to address arithmetic\n+\twhen taking the address of a COMPONENT_REF.\n+\t\n 2005-05-08  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* class.c (vtbl_init_data_s): Change the type of fns to"}, {"sha": "bd73969058ecd80c5b6981a2d52f036b116d8a71", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d9165ef4838d286ac546d6168ffa8a4712acc2c/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d9165ef4838d286ac546d6168ffa8a4712acc2c/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=9d9165ef4838d286ac546d6168ffa8a4712acc2c", "patch": "@@ -4107,15 +4107,10 @@ build_unary_op (enum tree_code code, tree xarg, int noconvert)\n \t  }\n \telse\n \t  {\n+\t    tree object = TREE_OPERAND (arg, 0);\n \t    tree field = TREE_OPERAND (arg, 1);\n-\t    tree rval = build_unary_op (ADDR_EXPR, TREE_OPERAND (arg, 0), 0);\n-\t    tree binfo = lookup_base (TREE_TYPE (TREE_TYPE (rval)),\n-\t\t\t\t      decl_type_context (field),\n-\t\t\t\t      ba_check, NULL);\n-\t    \n-\t    rval = build_base_path (PLUS_EXPR, rval, binfo, 1);\n-\n-\t    TREE_OPERAND (arg, 0) = build_indirect_ref (rval, NULL);\n+\t    gcc_assert (same_type_ignoring_top_level_qualifiers_p\n+\t\t\t(TREE_TYPE (object), decl_type_context (field)));\n \t    addr = build_address (arg);\n \t  }\n "}]}