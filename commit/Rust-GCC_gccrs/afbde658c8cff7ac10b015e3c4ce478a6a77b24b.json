{"sha": "afbde658c8cff7ac10b015e3c4ce478a6a77b24b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZiZGU2NThjOGNmZjdhYzEwYjAxNWUzYzRjZTQ3OGE2YTc3YjI0Yg==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.ibm.com", "date": "2019-06-28T19:52:52Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2019-06-28T19:52:52Z"}, "message": "re PR target/91009 (Bug with future PowerPC patches with lfiwax/lfiwzx (related to PR 90822))\n\nFix PR target/91009\n\n2019-06-27   Michael Meissner  <meissner@linux.ibm.com>\n\n\tPR target/91009\n\t* config/rs6000/rs6000.md (floatsi<mode>2_lfiwax): Add non-VSX\n\talternative.\n\t(floatsi<mode>2_lfiwax_mem): Add non-VSX alternative.\n\t(floatunssi<mode>2_lfiwzx): Add non-VSX alternative.\n\t(floatunssi<mode>2_lfiwzx_mem): Add non-VSX alternative.\n\nFrom-SVN: r272791", "tree": {"sha": "cd434f4f8d41fb5fcc14b98b2260adbff785da4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd434f4f8d41fb5fcc14b98b2260adbff785da4f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afbde658c8cff7ac10b015e3c4ce478a6a77b24b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afbde658c8cff7ac10b015e3c4ce478a6a77b24b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afbde658c8cff7ac10b015e3c4ce478a6a77b24b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afbde658c8cff7ac10b015e3c4ce478a6a77b24b/comments", "author": null, "committer": null, "parents": [{"sha": "415f0387fb414a66970352ab2ce540295edf0487", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/415f0387fb414a66970352ab2ce540295edf0487", "html_url": "https://github.com/Rust-GCC/gccrs/commit/415f0387fb414a66970352ab2ce540295edf0487"}], "stats": {"total": 33, "additions": 21, "deletions": 12}, "files": [{"sha": "21d2977736c92032b425d5f087796b7a4ce9b176", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afbde658c8cff7ac10b015e3c4ce478a6a77b24b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afbde658c8cff7ac10b015e3c4ce478a6a77b24b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=afbde658c8cff7ac10b015e3c4ce478a6a77b24b", "patch": "@@ -1,3 +1,12 @@\n+2019-06-28   Michael Meissner  <meissner@linux.ibm.com>\n+\n+\tPR target/91009\n+\t* config/rs6000/rs6000.md (floatsi<mode>2_lfiwax): Add non-VSX\n+\talternative.\n+\t(floatsi<mode>2_lfiwax_mem): Add non-VSX alternative.\n+\t(floatunssi<mode>2_lfiwzx): Add non-VSX alternative.\n+\t(floatunssi<mode>2_lfiwzx_mem): Add non-VSX alternative.\n+\n 2019-06-28  Iain Sandoe  <iain@sandoe.co.uk>\n \n \t* config.gcc (powerpc-*-darwin*, powerpc64-*-darwin*): Remove"}, {"sha": "5947a43440b67ef273d9248409b4459d3b775401", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afbde658c8cff7ac10b015e3c4ce478a6a77b24b/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afbde658c8cff7ac10b015e3c4ce478a6a77b24b/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=afbde658c8cff7ac10b015e3c4ce478a6a77b24b", "patch": "@@ -5232,9 +5232,9 @@\n ; not be needed and also in case the insns are deleted as dead code.\n \n (define_insn_and_split \"floatsi<mode>2_lfiwax\"\n-  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=<Fv>\")\n-\t(float:SFDF (match_operand:SI 1 \"nonimmediate_operand\" \"r\")))\n-   (clobber (match_scratch:DI 2 \"=wa\"))]\n+  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=d,<Fv>\")\n+\t(float:SFDF (match_operand:SI 1 \"nonimmediate_operand\" \"r,r\")))\n+   (clobber (match_scratch:DI 2 \"=d,wa\"))]\n   \"TARGET_HARD_FLOAT && TARGET_LFIWAX\n    && <SI_CONVERT_FP> && can_create_pseudo_p ()\"\n   \"#\"\n@@ -5271,11 +5271,11 @@\n    (set_attr \"type\" \"fpload\")])\n \n (define_insn_and_split \"floatsi<mode>2_lfiwax_mem\"\n-  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=<Fv>\")\n+  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=d,<Fv>\")\n \t(float:SFDF\n \t (sign_extend:DI\n-\t  (match_operand:SI 1 \"indexed_or_indirect_operand\" \"Z\"))))\n-   (clobber (match_scratch:DI 2 \"=wa\"))]\n+\t  (match_operand:SI 1 \"indexed_or_indirect_operand\" \"Z,Z\"))))\n+   (clobber (match_scratch:DI 2 \"=d,wa\"))]\n   \"TARGET_HARD_FLOAT && TARGET_LFIWAX && <SI_CONVERT_FP>\"\n   \"#\"\n   \"\"\n@@ -5308,9 +5308,9 @@\n    (set_attr \"isa\" \"*,p8v,p8v,p9v\")])\n \n (define_insn_and_split \"floatunssi<mode>2_lfiwzx\"\n-  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=<Fv>\")\n-\t(unsigned_float:SFDF (match_operand:SI 1 \"nonimmediate_operand\" \"r\")))\n-   (clobber (match_scratch:DI 2 \"=wa\"))]\n+  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=d,<Fv>\")\n+\t(unsigned_float:SFDF (match_operand:SI 1 \"nonimmediate_operand\" \"r,r\")))\n+   (clobber (match_scratch:DI 2 \"=d,wa\"))]\n   \"TARGET_HARD_FLOAT && TARGET_LFIWZX && <SI_CONVERT_FP>\"\n   \"#\"\n   \"\"\n@@ -5346,11 +5346,11 @@\n    (set_attr \"type\" \"fpload\")])\n \n (define_insn_and_split \"floatunssi<mode>2_lfiwzx_mem\"\n-  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=<Fv>\")\n+  [(set (match_operand:SFDF 0 \"gpc_reg_operand\" \"=d,<Fv>\")\n \t(unsigned_float:SFDF\n \t (zero_extend:DI\n-\t  (match_operand:SI 1 \"indexed_or_indirect_operand\" \"Z\"))))\n-   (clobber (match_scratch:DI 2 \"=wa\"))]\n+\t  (match_operand:SI 1 \"indexed_or_indirect_operand\" \"Z,Z\"))))\n+   (clobber (match_scratch:DI 2 \"=d,wa\"))]\n   \"TARGET_HARD_FLOAT && TARGET_LFIWZX && <SI_CONVERT_FP>\"\n   \"#\"\n   \"\""}]}