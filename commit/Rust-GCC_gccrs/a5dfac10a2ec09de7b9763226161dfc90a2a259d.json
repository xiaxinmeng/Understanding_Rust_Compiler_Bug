{"sha": "a5dfac10a2ec09de7b9763226161dfc90a2a259d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVkZmFjMTBhMmVjMDlkZTdiOTc2MzIyNjE2MWRmYzkwYTJhMjU5ZA==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2006-05-01T20:02:27Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2006-05-01T20:02:27Z"}, "message": "configure.ac: Simplify the mmap check a bit more.\n\n2006-05-01  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* configure.ac: Simplify the mmap check a bit more.\n\t* configure: Rebuilt.\n\t* include/config.h.in: Likewise.\n\nFrom-SVN: r113426", "tree": {"sha": "59eda92264b56d60be33d4927a6af5bea2a4c477", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59eda92264b56d60be33d4927a6af5bea2a4c477"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5dfac10a2ec09de7b9763226161dfc90a2a259d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5dfac10a2ec09de7b9763226161dfc90a2a259d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5dfac10a2ec09de7b9763226161dfc90a2a259d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5dfac10a2ec09de7b9763226161dfc90a2a259d/comments", "author": null, "committer": null, "parents": [{"sha": "763f45275b818e0e55fb069c096c5fcfc02865bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/763f45275b818e0e55fb069c096c5fcfc02865bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/763f45275b818e0e55fb069c096c5fcfc02865bd"}], "stats": {"total": 117, "additions": 10, "deletions": 107}, "files": [{"sha": "c002c28eea708b4cceb9aaaeb69c35a548f24674", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a5dfac10a2ec09de7b9763226161dfc90a2a259d", "patch": "@@ -1,3 +1,9 @@\n+2006-05-01  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* configure.ac: Simplify the mmap check a bit more.\n+\t* configure: Rebuilt.\n+\t* include/config.h.in: Likewise.\n+\n 2006-05-01  Roger Sayle  <roger@eyesopen.com>\n \t    Andrew Haley  <aph@redhat.com>\n "}, {"sha": "070b010a3b5591eb5db435e694acd829dd5e4eed", "filename": "libjava/configure", "status": "modified", "additions": 2, "deletions": 79, "changes": 81, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=a5dfac10a2ec09de7b9763226161dfc90a2a259d", "patch": "@@ -9425,14 +9425,15 @@ else\n \n \n \n+\n \n \n for ac_func in strerror ioctl select fstat open fsync sleep opendir \\\n                    gmtime_r localtime_r readdir_r getpwuid_r getcwd \\\n \t\t   access stat mkdir rename rmdir unlink realpath utime chmod \\\n \t\t   nl_langinfo setlocale \\\n \t\t   inet_pton uname inet_ntoa \\\n-\t\t   fork execvp pipe sigaction ftruncate\n+\t\t   fork execvp pipe sigaction ftruncate mmap\n do\n as_ac_var=`echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n echo \"$as_me:$LINENO: checking for $ac_func\" >&5\n@@ -16410,84 +16411,6 @@ _ACEOF\n fi\n \n \n-# AC_FUNC_MMAP goes to far and checks for mmap fixed, we do only need mmap\n-# at a mmap selected address. See\n-# gnu/java/nio/channels/natFileChannelPosix.cc\n-\n-echo \"$as_me:$LINENO: checking for mmap\" >&5\n-echo $ECHO_N \"checking for mmap... $ECHO_C\" >&6\n-if test \"${ac_cv_func_mmap_ok+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  if test x$gcc_no_link = xyes; then\n-  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n-echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n-   { (exit 1); exit 1; }; }\n-fi\n-cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-\n-#include <unistd.h>\n-#include <sys/mman.h>\n-#include <sys/stat.h>\n-#include <fcntl.h>\n-\n-int\n-main ()\n-{\n-    mmap((void *)0, 0, PROT_READ, 0, 0, 0);\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext conftest$ac_exeext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n-  (eval $ac_link) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest$ac_exeext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_cv_func_mmap_ok=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_cv_func_mmap_ok=no\n-fi\n-rm -f conftest.err conftest.$ac_objext \\\n-      conftest$ac_exeext conftest.$ac_ext\n-fi\n-\n-echo \"$as_me:$LINENO: result: $ac_cv_func_mmap_ok\" >&5\n-echo \"${ECHO_T}$ac_cv_func_mmap_ok\" >&6\n-if test $ac_cv_func_mmap_ok = yes\n-then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define HAVE_MMAP 1\n-_ACEOF\n-\n-fi\n-\n for ac_prog in perl\n do\n   # Extract the first word of \"$ac_prog\", so it can be a program name with args."}, {"sha": "69f43174b1c7fa03e764f23021570de8f75dcbb2", "filename": "libjava/configure.ac", "status": "modified", "additions": 1, "deletions": 26, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=a5dfac10a2ec09de7b9763226161dfc90a2a259d", "patch": "@@ -895,7 +895,7 @@ else\n \t\t   access stat mkdir rename rmdir unlink realpath utime chmod \\\n \t\t   nl_langinfo setlocale \\\n \t\t   inet_pton uname inet_ntoa \\\n-\t\t   fork execvp pipe sigaction ftruncate])\n+\t\t   fork execvp pipe sigaction ftruncate mmap])\n    AC_CHECK_FUNCS(inet_aton inet_addr, break)\n    AC_CHECK_HEADERS(execinfo.h unistd.h dlfcn.h)\n    # Do an additional check on dld, HP-UX for example has dladdr in libdld.sl\n@@ -1352,31 +1352,6 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <time.h>]], [[struct tm tim; tim.t\n \n AC_FUNC_ALLOCA\n \n-dnl Check for mmap()\n-# AC_FUNC_MMAP goes to far and checks for mmap fixed, we do only need mmap\n-# at a mmap selected address. See\n-# gnu/java/nio/channels/natFileChannelPosix.cc\n-\n-AC_MSG_CHECKING([for mmap])\n-AC_CACHE_VAL(ac_cv_func_mmap_ok,\n-    [AC_TRY_LINK(\n-    changequote(<<, >>)dnl\n-    <<\n-#include <unistd.h>\n-#include <sys/mman.h>\n-#include <sys/stat.h>\n-#include <fcntl.h>\n-    >>,\n-    changequote([, ])dnl\n-    [mmap((void *)0, 0, PROT_READ, 0, 0, 0);],\n-    ac_cv_func_mmap_ok=yes,\n-    ac_cv_func_mmap_ok=no)] )\n-AC_MSG_RESULT($ac_cv_func_mmap_ok)\n-if test $ac_cv_func_mmap_ok = yes\n-then\n-  AC_DEFINE(HAVE_MMAP, 1, [ Define to 1 if you have a working `mmap' system call w/o fixed address ability.])\n-fi\n-\n AC_CHECK_PROGS(PERL, perl, false)\n \n SYSDEP_SOURCES="}, {"sha": "a57dd8325ee9d5bd2c0c6abfac29f2ea0e778958", "filename": "libjava/include/config.h.in", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2Finclude%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5dfac10a2ec09de7b9763226161dfc90a2a259d/libjava%2Finclude%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fconfig.h.in?ref=a5dfac10a2ec09de7b9763226161dfc90a2a259d", "patch": "@@ -184,8 +184,7 @@\n /* Define is you have 'mktime' in <time.h> */\n #undef HAVE_MKTIME\n \n-/* Define to 1 if you have a working `mmap' system call w/o fixed address\n-   ability. */\n+/* Define to 1 if you have the `mmap' function. */\n #undef HAVE_MMAP\n \n /* Define to 1 if you have the <netdb.h> header file. */"}]}