{"sha": "0bb97bdf5adbeedb4de5551438a65554c99befaf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGJiOTdiZGY1YWRiZWVkYjRkZTU1NTE0MzhhNjU1NTRjOTliZWZhZg==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2016-07-07T12:59:06Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-07-07T12:59:06Z"}, "message": "sem_ch6.adb (Process_Formals): Set ghost flag on formal entities of ghost subprograms.\n\n2016-07-07  Yannick Moy  <moy@adacore.com>\n\n\t* sem_ch6.adb (Process_Formals): Set ghost flag\n\ton formal entities of ghost subprograms.\n\t* ghost.adb (Check_Ghost_Context.Is_OK_Ghost_Context): Accept ghost\n\tentities in use type clauses.\n\nFrom-SVN: r238106", "tree": {"sha": "2424008a13a9abb7c2ef895df45f86d0050bcde6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2424008a13a9abb7c2ef895df45f86d0050bcde6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0bb97bdf5adbeedb4de5551438a65554c99befaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bb97bdf5adbeedb4de5551438a65554c99befaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bb97bdf5adbeedb4de5551438a65554c99befaf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bb97bdf5adbeedb4de5551438a65554c99befaf/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f965d3dad7edb527e465d7d2811294177daee53c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f965d3dad7edb527e465d7d2811294177daee53c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f965d3dad7edb527e465d7d2811294177daee53c"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "6303d819fd7cc9d0c7e58e341f2e98c718c62670", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bb97bdf5adbeedb4de5551438a65554c99befaf/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bb97bdf5adbeedb4de5551438a65554c99befaf/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0bb97bdf5adbeedb4de5551438a65554c99befaf", "patch": "@@ -1,3 +1,10 @@\n+2016-07-07  Yannick Moy  <moy@adacore.com>\n+\n+\t* sem_ch6.adb (Process_Formals): Set ghost flag\n+\ton formal entities of ghost subprograms.\n+\t* ghost.adb (Check_Ghost_Context.Is_OK_Ghost_Context): Accept ghost\n+\tentities in use type clauses.\n+\n 2016-07-06  Javier Miranda  <miranda@adacore.com>\n \n \t* sem_ch6.adb (Check_Inline_Pragma): if the subprogram has no spec"}, {"sha": "2a640a2b88c14b00b53928914109d2197cb114ea", "filename": "gcc/ada/ghost.adb", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bb97bdf5adbeedb4de5551438a65554c99befaf/gcc%2Fada%2Fghost.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bb97bdf5adbeedb4de5551438a65554c99befaf/gcc%2Fada%2Fghost.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fghost.adb?ref=0bb97bdf5adbeedb4de5551438a65554c99befaf", "patch": "@@ -469,6 +469,14 @@ package body Ghost is\n          if Ghost_Mode > None then\n             return True;\n \n+         --  A Ghost type may be referenced in a use_type clause\n+         --  (SPARK RM 6.9.10).\n+\n+         elsif Present (Parent (Context))\n+           and then Nkind (Parent (Context)) = N_Use_Type_Clause\n+         then\n+            return True;\n+\n          --  Routine Expand_Record_Extension creates a parent subtype without\n          --  inserting it into the tree. There is no good way of recognizing\n          --  this special case as there is no parent. Try to approximate the"}, {"sha": "dcec1e33d57a65be14d16ebf8f4d312a35abbbd1", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bb97bdf5adbeedb4de5551438a65554c99befaf/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bb97bdf5adbeedb4de5551438a65554c99befaf/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=0bb97bdf5adbeedb4de5551438a65554c99befaf", "patch": "@@ -10975,6 +10975,13 @@ package body Sem_Ch6 is\n \n          Set_Etype (Formal, Formal_Type);\n \n+         --  A formal parameter declared within a Ghost region is automatically\n+         --  Ghost (SPARK RM 6.9(2)).\n+\n+         if Ghost_Mode > None then\n+            Set_Is_Ghost_Entity (Formal);\n+         end if;\n+\n          --  Deal with default expression if present\n \n          Default := Expression (Param_Spec);"}]}