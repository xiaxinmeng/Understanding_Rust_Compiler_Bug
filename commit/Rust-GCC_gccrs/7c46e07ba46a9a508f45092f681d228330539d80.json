{"sha": "7c46e07ba46a9a508f45092f681d228330539d80", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2M0NmUwN2JhNDZhOWE1MDhmNDUwOTJmNjgxZDIyODMzMDUzOWQ4MA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-09-11T06:48:23Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-09-11T06:48:23Z"}, "message": "varpool.c (varpool_node::ctor_useable_for_folding_p): Do not try to access removed nodes.\n\n\t* varpool.c (varpool_node::ctor_useable_for_folding_p): Do not try\n\tto access removed nodes.\n\nFrom-SVN: r215150", "tree": {"sha": "9df9bc8d296b5ea59d173ab6f67a701e46098502", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9df9bc8d296b5ea59d173ab6f67a701e46098502"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c46e07ba46a9a508f45092f681d228330539d80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c46e07ba46a9a508f45092f681d228330539d80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c46e07ba46a9a508f45092f681d228330539d80", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c46e07ba46a9a508f45092f681d228330539d80/comments", "author": null, "committer": null, "parents": [{"sha": "412c4af7f17e3211b83bc66a4a1599e5f74eb167", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/412c4af7f17e3211b83bc66a4a1599e5f74eb167", "html_url": "https://github.com/Rust-GCC/gccrs/commit/412c4af7f17e3211b83bc66a4a1599e5f74eb167"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "40f912ab9d2910b908ac806d3f0c827e5e394867", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c46e07ba46a9a508f45092f681d228330539d80/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c46e07ba46a9a508f45092f681d228330539d80/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7c46e07ba46a9a508f45092f681d228330539d80", "patch": "@@ -1,3 +1,8 @@\n+2014-09-10  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* varpool.c (varpool_node::ctor_useable_for_folding_p): Do not try\n+\tto access removed nodes.\n+\n 2014-09-10  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR tree-optimization/63186"}, {"sha": "14ef0896eac21594d55c2beb4d866aff92d9e02b", "filename": "gcc/varpool.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c46e07ba46a9a508f45092f681d228330539d80/gcc%2Fvarpool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c46e07ba46a9a508f45092f681d228330539d80/gcc%2Fvarpool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarpool.c?ref=7c46e07ba46a9a508f45092f681d228330539d80", "patch": "@@ -316,6 +316,11 @@ varpool_node::ctor_useable_for_folding_p (void)\n       && !real_node->lto_file_data)\n     return false;\n \n+  /* Avoid attempts to load constructors that was not streamed.  */\n+  if (flag_ltrans && DECL_INITIAL (real_node->decl) == error_mark_node\n+      && real_node->body_removed)\n+    return false;\n+\n   /* Vtables are defined by their types and must match no matter of interposition\n      rules.  */\n   if (DECL_VIRTUAL_P (decl))"}]}