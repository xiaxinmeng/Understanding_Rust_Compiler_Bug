{"sha": "a31056e9196daf0a5b0e92d171b5227cc994103b", "node_id": "C_kwDOANBUbNoAKGEzMTA1NmU5MTk2ZGFmMGE1YjBlOTJkMTcxYjUyMjdjYzk5NDEwM2I", "commit": {"author": {"name": "Maciej W. Rozycki", "email": "macro@embecosm.com", "date": "2021-11-03T17:04:19Z"}, "committer": {"name": "Maciej W. Rozycki", "email": "macro@embecosm.com", "date": "2021-11-03T17:05:48Z"}, "message": "RISC-V: Fix register class subset checks for CLASS_MAX_NREGS\n\nFix the register class subset checks in the determination of the maximum\nnumber of consecutive registers needed to hold a value of a given mode.\n\nThe number depends on whether a register is a general-purpose or a\nfloating-point register, so check whether the register class requested\nis a subset (argument 1 to `reg_class_subset_p') rather than superset\n(argument 2) of GR_REGS or FP_REGS class respectively.\n\n\tgcc/\n\t* config/riscv/riscv.c (riscv_class_max_nregs): Swap the\n\targuments to `reg_class_subset_p'.", "tree": {"sha": "03a150751a29601a46f045f5d596d86f13bf645e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03a150751a29601a46f045f5d596d86f13bf645e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a31056e9196daf0a5b0e92d171b5227cc994103b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a31056e9196daf0a5b0e92d171b5227cc994103b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a31056e9196daf0a5b0e92d171b5227cc994103b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a31056e9196daf0a5b0e92d171b5227cc994103b/comments", "author": {"login": "maciej-w-rozycki", "id": 117297942, "node_id": "U_kgDOBv3TFg", "avatar_url": "https://avatars.githubusercontent.com/u/117297942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciej-w-rozycki", "html_url": "https://github.com/maciej-w-rozycki", "followers_url": "https://api.github.com/users/maciej-w-rozycki/followers", "following_url": "https://api.github.com/users/maciej-w-rozycki/following{/other_user}", "gists_url": "https://api.github.com/users/maciej-w-rozycki/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciej-w-rozycki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciej-w-rozycki/subscriptions", "organizations_url": "https://api.github.com/users/maciej-w-rozycki/orgs", "repos_url": "https://api.github.com/users/maciej-w-rozycki/repos", "events_url": "https://api.github.com/users/maciej-w-rozycki/events{/privacy}", "received_events_url": "https://api.github.com/users/maciej-w-rozycki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "maciej-w-rozycki", "id": 117297942, "node_id": "U_kgDOBv3TFg", "avatar_url": "https://avatars.githubusercontent.com/u/117297942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciej-w-rozycki", "html_url": "https://github.com/maciej-w-rozycki", "followers_url": "https://api.github.com/users/maciej-w-rozycki/followers", "following_url": "https://api.github.com/users/maciej-w-rozycki/following{/other_user}", "gists_url": "https://api.github.com/users/maciej-w-rozycki/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciej-w-rozycki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciej-w-rozycki/subscriptions", "organizations_url": "https://api.github.com/users/maciej-w-rozycki/orgs", "repos_url": "https://api.github.com/users/maciej-w-rozycki/repos", "events_url": "https://api.github.com/users/maciej-w-rozycki/events{/privacy}", "received_events_url": "https://api.github.com/users/maciej-w-rozycki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1e7a269856fd67aff78ac874bec96d31a54b2fd9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e7a269856fd67aff78ac874bec96d31a54b2fd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e7a269856fd67aff78ac874bec96d31a54b2fd9"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "a545dbf66f734855090568ce1a253b373345eec0", "filename": "gcc/config/riscv/riscv.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a31056e9196daf0a5b0e92d171b5227cc994103b/gcc%2Fconfig%2Friscv%2Friscv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a31056e9196daf0a5b0e92d171b5227cc994103b/gcc%2Fconfig%2Friscv%2Friscv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.c?ref=a31056e9196daf0a5b0e92d171b5227cc994103b", "patch": "@@ -4810,10 +4810,10 @@ riscv_modes_tieable_p (machine_mode mode1, machine_mode mode2)\n static unsigned char\n riscv_class_max_nregs (reg_class_t rclass, machine_mode mode)\n {\n-  if (reg_class_subset_p (FP_REGS, rclass))\n+  if (reg_class_subset_p (rclass, FP_REGS))\n     return riscv_hard_regno_nregs (FP_REG_FIRST, mode);\n \n-  if (reg_class_subset_p (GR_REGS, rclass))\n+  if (reg_class_subset_p (rclass, GR_REGS))\n     return riscv_hard_regno_nregs (GP_REG_FIRST, mode);\n \n   return 0;"}]}