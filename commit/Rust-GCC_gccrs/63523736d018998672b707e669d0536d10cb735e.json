{"sha": "63523736d018998672b707e669d0536d10cb735e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM1MjM3MzZkMDE4OTk4NjcyYjcwN2U2NjlkMDUzNmQxMGNiNzM1ZQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2017-05-30T07:35:23Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2017-05-30T07:35:23Z"}, "message": "Remove dump_file_info::dump_file_info and replace it with macro.\n\n2017-05-30  Martin Liska  <mliska@suse.cz>\n\n\t* dumpfile.c: Use newly added macro DUMP_FILE_INFO.\n\t* dumpfile.h (struct dump_file_info): Remove ctors.\n\nFrom-SVN: r248617", "tree": {"sha": "b27b868e0db12194dd12d7fb6d15d376bb1c623e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b27b868e0db12194dd12d7fb6d15d376bb1c623e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63523736d018998672b707e669d0536d10cb735e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63523736d018998672b707e669d0536d10cb735e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63523736d018998672b707e669d0536d10cb735e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63523736d018998672b707e669d0536d10cb735e/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "59075bc80894016c6f7fbf4b52bcd678601fce14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59075bc80894016c6f7fbf4b52bcd678601fce14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59075bc80894016c6f7fbf4b52bcd678601fce14"}], "stats": {"total": 54, "additions": 19, "deletions": 35}, "files": [{"sha": "2475e7afbc41a0e40a9e5f31ab6213b965f82e15", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63523736d018998672b707e669d0536d10cb735e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63523736d018998672b707e669d0536d10cb735e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=63523736d018998672b707e669d0536d10cb735e", "patch": "@@ -1,3 +1,8 @@\n+2017-05-30  Martin Liska  <mliska@suse.cz>\n+\n+\t* dumpfile.c: Use newly added macro DUMP_FILE_INFO.\n+\t* dumpfile.h (struct dump_file_info): Remove ctors.\n+\n 2017-05-30  Martin Liska  <mliska@suse.cz>\n \n \t* predict.def: Fix GNU coding style."}, {"sha": "b8bda3c918319c5449c068c4db82c270a6d1bddc", "filename": "gcc/dumpfile.c", "status": "modified", "additions": 14, "deletions": 28, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63523736d018998672b707e669d0536d10cb735e/gcc%2Fdumpfile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63523736d018998672b707e669d0536d10cb735e/gcc%2Fdumpfile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdumpfile.c?ref=63523736d018998672b707e669d0536d10cb735e", "patch": "@@ -47,41 +47,27 @@ FILE *alt_dump_file = NULL;\n const char *dump_file_name;\n dump_flags_t dump_flags;\n \n-CONSTEXPR dump_file_info::dump_file_info (): suffix (NULL), swtch (NULL),\n-  glob (NULL), pfilename (NULL), alt_filename (NULL), pstream (NULL),\n-  alt_stream (NULL), dkind (DK_none), pflags (), alt_flags (0),\n-  optgroup_flags (0), pstate (0), alt_state (0), num (0), owns_strings (false),\n-  graph_dump_initialized (false)\n-{\n-}\n-\n-dump_file_info::dump_file_info (const char *_suffix, const char *_swtch,\n-\t\t\t\tdump_kind _dkind, int _num):\n-  suffix (_suffix), swtch (_swtch), glob (NULL),\n-  pfilename (NULL), alt_filename (NULL), pstream (NULL), alt_stream (NULL),\n-  dkind (_dkind), pflags (), alt_flags (0), optgroup_flags (0),\n-  pstate (0), alt_state (0), num (_num), owns_strings (false),\n-  graph_dump_initialized (false)\n-{\n-}\n+#define DUMP_FILE_INFO(suffix, swtch, dkind, num) \\\n+  {suffix, swtch, NULL, NULL, NULL, NULL, NULL, dkind, 0, 0, 0, 0, 0, num, \\\n+   false, false}\n \n /* Table of tree dump switches. This must be consistent with the\n    TREE_DUMP_INDEX enumeration in dumpfile.h.  */\n static struct dump_file_info dump_files[TDI_end] =\n {\n-  dump_file_info (),\n-  dump_file_info (\".cgraph\", \"ipa-cgraph\", DK_ipa, 0),\n-  dump_file_info (\".type-inheritance\", \"ipa-type-inheritance\", DK_ipa, 0),\n-  dump_file_info (\".ipa-clones\", \"ipa-clones\", DK_ipa, 0),\n-  dump_file_info (\".original\", \"tree-original\", DK_tree, 3),\n-  dump_file_info (\".gimple\", \"tree-gimple\", DK_tree, 4),\n-  dump_file_info (\".nested\", \"tree-nested\", DK_tree, 5),\n+  DUMP_FILE_INFO (NULL, NULL, DK_none, 0),\n+  DUMP_FILE_INFO (\".cgraph\", \"ipa-cgraph\", DK_ipa, 0),\n+  DUMP_FILE_INFO (\".type-inheritance\", \"ipa-type-inheritance\", DK_ipa, 0),\n+  DUMP_FILE_INFO (\".ipa-clones\", \"ipa-clones\", DK_ipa, 0),\n+  DUMP_FILE_INFO (\".original\", \"tree-original\", DK_tree, 3),\n+  DUMP_FILE_INFO (\".gimple\", \"tree-gimple\", DK_tree, 4),\n+  DUMP_FILE_INFO (\".nested\", \"tree-nested\", DK_tree, 5),\n #define FIRST_AUTO_NUMBERED_DUMP 3\n \n-  dump_file_info (NULL, \"lang-all\", DK_lang, 0),\n-  dump_file_info (NULL, \"tree-all\", DK_tree, 0),\n-  dump_file_info (NULL, \"rtl-all\", DK_rtl, 0),\n-  dump_file_info (NULL, \"ipa-all\", DK_ipa, 0),\n+  DUMP_FILE_INFO (NULL, \"lang-all\", DK_lang, 0),\n+  DUMP_FILE_INFO (NULL, \"tree-all\", DK_tree, 0),\n+  DUMP_FILE_INFO (NULL, \"rtl-all\", DK_rtl, 0),\n+  DUMP_FILE_INFO (NULL, \"ipa-all\", DK_ipa, 0),\n };\n \n /* Define a name->number mapping for a dump flag value.  */"}, {"sha": "fda8d712c433d6d72da3c8ac227f8c43fb2031a5", "filename": "gcc/dumpfile.h", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63523736d018998672b707e669d0536d10cb735e/gcc%2Fdumpfile.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63523736d018998672b707e669d0536d10cb735e/gcc%2Fdumpfile.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdumpfile.h?ref=63523736d018998672b707e669d0536d10cb735e", "patch": "@@ -120,13 +120,6 @@ typedef uint64_t dump_flags_t;\n /* Define a tree dump switch.  */\n struct dump_file_info\n {\n-  /* Constructor.  */\n-  CONSTEXPR dump_file_info ();\n-\n-  /* Constructor.  */\n-  dump_file_info (const char *_suffix, const char *_swtch, dump_kind _dkind,\n-\t\t  int _num);\n-\n   /* Suffix to give output file.  */\n   const char *suffix;\n   /* Command line dump switch.  */"}]}