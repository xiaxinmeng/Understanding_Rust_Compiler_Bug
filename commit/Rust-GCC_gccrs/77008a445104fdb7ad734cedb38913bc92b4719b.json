{"sha": "77008a445104fdb7ad734cedb38913bc92b4719b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcwMDhhNDQ1MTA0ZmRiN2FkNzM0Y2VkYjM4OTEzYmM5MmI0NzE5Yg==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "amylaar@cygnus.co.uk", "date": "1998-03-11T10:33:51Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "1998-03-11T10:33:51Z"}, "message": "sh.h (LOOP_ALIGN): Only align when optimizing.\n\n\t* sh.h (LOOP_ALIGN): Only align when optimizing.\n\t* sh.c (find_barrier): Clear inc for CODE_LABELs.\n\tWhen not optimizing, calculate alignment for BARRIERs directly.\n\nFrom-SVN: r18473", "tree": {"sha": "d60c2b6909c2c8c97361ef5c60eed551f4a8bf1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d60c2b6909c2c8c97361ef5c60eed551f4a8bf1b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77008a445104fdb7ad734cedb38913bc92b4719b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77008a445104fdb7ad734cedb38913bc92b4719b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77008a445104fdb7ad734cedb38913bc92b4719b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77008a445104fdb7ad734cedb38913bc92b4719b/comments", "author": null, "committer": null, "parents": [{"sha": "283badc2c677ff45926217b0c3d8bf4f3a4dfeb5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/283badc2c677ff45926217b0c3d8bf4f3a4dfeb5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/283badc2c677ff45926217b0c3d8bf4f3a4dfeb5"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "6e9438d8a7d4e073b6fc8b383fc31a0ffa41b749", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77008a445104fdb7ad734cedb38913bc92b4719b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77008a445104fdb7ad734cedb38913bc92b4719b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77008a445104fdb7ad734cedb38913bc92b4719b", "patch": "@@ -1,3 +1,9 @@\n+Wed Mar 11 18:26:25 1998  J\"orn Rennecke <amylaar@cygnus.co.uk>\n+\n+\t* sh.h (LOOP_ALIGN): Only align when optimizing.\n+\t* sh.c (find_barrier): Clear inc for CODE_LABELs.\n+\tWhen not optimizing, calculate alignment for BARRIERs directly.\n+\n Wed Mar 11 15:07:18 1998  J\"orn Rennecke <amylaar@cygnus.co.uk>\n \n \t* final.c (shorten_branches): Remove conditionalizing on"}, {"sha": "9be63a4e59b5dd5d0ed1911de0a87a853a070d84", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77008a445104fdb7ad734cedb38913bc92b4719b/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77008a445104fdb7ad734cedb38913bc92b4719b/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=77008a445104fdb7ad734cedb38913bc92b4719b", "patch": "@@ -1908,7 +1908,15 @@ find_barrier (num_mova, mova, from)\n       int new_align = 1;\n \n       if (GET_CODE (from) == CODE_LABEL)\n-\tnew_align = optimize ? 1 << label_to_alignment (from) : 1;\n+\t{\n+\t  if (optimize)\n+\t    new_align = 1 << label_to_alignment (from);\n+\t  else if (GET_CODE (prev_nonnote_insn (from)) == BARRIER)\n+\t    new_align = 1 << barrier_align (from);\n+\t  else\n+\t    new_align = 1;\n+\t  inc = 0;\n+\t}\n \n       if (GET_CODE (from) == BARRIER)\n \t{"}, {"sha": "e0b05b68ea926da003622050575ad3ef76366ece", "filename": "gcc/config/sh/sh.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77008a445104fdb7ad734cedb38913bc92b4719b/gcc%2Fconfig%2Fsh%2Fsh.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77008a445104fdb7ad734cedb38913bc92b4719b/gcc%2Fconfig%2Fsh%2Fsh.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.h?ref=77008a445104fdb7ad734cedb38913bc92b4719b", "patch": "@@ -270,7 +270,8 @@ do {\t\t\t\t\t\t\t\t\\\n #define LABEL_ALIGN_AFTER_BARRIER(LABEL_AFTER_BARRIER) \\\n   barrier_align (LABEL_AFTER_BARRIER)\n \n-#define LOOP_ALIGN(A_LABEL) (TARGET_SMALLCODE ? 0 : 2)\n+#define LOOP_ALIGN(A_LABEL) \\\n+  ((! optimize || TARGET_SMALLCODE) ? 0 : 2)\n \n #define LABEL_ALIGN(A_LABEL) \\\n (\t\t\t\t\t\t\t\t\t\\"}]}