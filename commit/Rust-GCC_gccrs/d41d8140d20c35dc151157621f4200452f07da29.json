{"sha": "d41d8140d20c35dc151157621f4200452f07da29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQxZDgxNDBkMjBjMzVkYzE1MTE1NzYyMWY0MjAwNDUyZjA3ZGEyOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2008-12-29T08:32:21Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-12-29T08:32:21Z"}, "message": "re PR driver/38381 (-b option seems to be broken)\n\n\tPR driver/38381\n\t* gcc.c (process_command): Accept also -b with configuration name\n\tin the next argument.\n\t* doc/invoke.texi (-b): Document that no hyphen is required if\n\tconfiguration name is in the next argument after -b.\n\nFrom-SVN: r142947", "tree": {"sha": "95371f82b78423655768e43a1e0c334615bfd483", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95371f82b78423655768e43a1e0c334615bfd483"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d41d8140d20c35dc151157621f4200452f07da29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d41d8140d20c35dc151157621f4200452f07da29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d41d8140d20c35dc151157621f4200452f07da29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d41d8140d20c35dc151157621f4200452f07da29/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "19bb3aa5c5b80330b86ac07b0590573af43d83cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19bb3aa5c5b80330b86ac07b0590573af43d83cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19bb3aa5c5b80330b86ac07b0590573af43d83cc"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "1b9d89ff71824e74876940548b7fa9395dce6554", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d41d8140d20c35dc151157621f4200452f07da29/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d41d8140d20c35dc151157621f4200452f07da29/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d41d8140d20c35dc151157621f4200452f07da29", "patch": "@@ -1,3 +1,11 @@\n+2008-12-29  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR driver/38381\n+\t* gcc.c (process_command): Accept also -b with configuration name\n+\tin the next argument.\n+\t* doc/invoke.texi (-b): Document that no hyphen is required if\n+\tconfiguration name is in the next argument after -b.\n+\n 2008-12-27  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/38641"}, {"sha": "1bd99a7d8a572c626cc7ca507464715ddb06ae16", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d41d8140d20c35dc151157621f4200452f07da29/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d41d8140d20c35dc151157621f4200452f07da29/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=d41d8140d20c35dc151157621f4200452f07da29", "patch": "@@ -8601,7 +8601,8 @@ example, if a cross-compiler was configured with @samp{configure\n arm-elf}, meaning to compile for an arm processor with elf binaries,\n then you would specify @option{-b arm-elf} to run that cross compiler.\n Because there are other options beginning with @option{-b}, the\n-configuration must contain a hyphen.\n+configuration must contain a hyphen, or @option{-b} alone should be one\n+argument followed by the configuration in the next argument.\n \n @item -V @var{version}\n @opindex V"}, {"sha": "8e1938bd58a79bc919f72677de3917eba2f0af63", "filename": "gcc/gcc.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d41d8140d20c35dc151157621f4200452f07da29/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d41d8140d20c35dc151157621f4200452f07da29/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=d41d8140d20c35dc151157621f4200452f07da29", "patch": "@@ -3371,8 +3371,10 @@ process_command (int argc, const char **argv)\n      Use heuristic that all configuration names must have at least\n      one dash '-'. This allows us to pass options starting with -b.  */\n   if (argc > 1 && argv[1][0] == '-'\n-      && (argv[1][1] == 'V' ||\n-\t ((argv[1][1] == 'b') && (NULL != strchr(argv[1] + 2,'-')))))\n+      && (argv[1][1] == 'V'\n+\t  || (argv[1][1] == 'b'\n+\t      && (argv[1][2] == '\\0'\n+\t\t  || NULL != strchr (argv[1] + 2, '-')))))\n     {\n       const char *new_version = DEFAULT_TARGET_VERSION;\n       const char *new_machine = DEFAULT_TARGET_MACHINE;\n@@ -3382,8 +3384,10 @@ process_command (int argc, const char **argv)\n       int baselen;\n \n       while (argc > 1 && argv[1][0] == '-'\n-\t     && (argv[1][1] == 'V' ||\n-\t\t((argv[1][1] == 'b') && ( NULL != strchr(argv[1] + 2,'-')))))\n+\t     && (argv[1][1] == 'V'\n+\t\t || (argv[1][1] == 'b'\n+\t\t     && (argv[1][2] == '\\0'\n+\t\t\t || NULL != strchr (argv[1] + 2, '-')))))\n \t{\n \t  char opt = argv[1][1];\n \t  const char *arg;\n@@ -3842,7 +3846,7 @@ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\\n\\n\"\n \t  switch (c)\n \t    {\n \t    case 'b':\n-\t      if (NULL == strchr(argv[i] + 2, '-'))\n+\t      if (p[1] && NULL == strchr (argv[i] + 2, '-'))\n \t\tgoto normal_switch;\n \n \t      /* Fall through.  */"}]}