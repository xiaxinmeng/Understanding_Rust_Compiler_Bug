{"sha": "0f244d848cffeda68f0eb4c5bb9c7e629bf2e957", "node_id": "C_kwDOANBUbNoAKDBmMjQ0ZDg0OGNmZmVkYTY4ZjBlYjRjNWJiOWM3ZTYyOWJmMmU5NTc", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2022-09-29T10:32:53Z"}, "committer": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2022-09-29T10:32:53Z"}, "message": "aarch64: Remove AARCH64_FL_RCPC8_4 [PR107025]\n\nAARCH64_FL_RCPC8_4 is an odd-one-out in that it has no associated\nentry in aarch64-option-extensions.def.  This means that, although\nit is internally separated from AARCH64_FL_V8_4A, there is no\nmechanism for turning it on and off individually, independently\nof armv8.4-a.\n\nThe only place that the flag was used independently was in the\nentry for thunderx3t110, which enabled it alongside V8_3A.\nAs noted in PR107025, this means that any use of the extension\nwill fail to assemble.\n\nIn the PR trail, Andrew suggested removing the core entry.\nThat might be best long-term, but since the barrier for removing\ncommand-line options without a deprecation period is very high,\nthis patch instead just drops the flag from the core entry.\nWe'll still produce correct code.\n\ngcc/\n\tPR target/107025\n\t* config/aarch64/aarch64.h (oAARCH64_FL_RCPC8_4): Delete.\n\t(AARCH64_FL_FOR_V8_4A): Update accordingly.\n\t(AARCH64_ISA_RCPC8_4): Use AARCH64_FL_V8_4A directly.\n\t* config/aarch64/aarch64-cores.def (thunderx3t110): Remove\n\tAARCH64_FL_RCPC8_4.", "tree": {"sha": "7fdaa27069d5d7611c60be1e9d3f3ca1393df69f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7fdaa27069d5d7611c60be1e9d3f3ca1393df69f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "198bb6ed327c74eb2b0450bf978e4e6a64a6406c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/198bb6ed327c74eb2b0450bf978e4e6a64a6406c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/198bb6ed327c74eb2b0450bf978e4e6a64a6406c"}], "stats": {"total": 7, "additions": 3, "deletions": 4}, "files": [{"sha": "cf500d0a9814372ea124ee700cc00d67dbdc24cf", "filename": "gcc/config/aarch64/aarch64-cores.def", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957/gcc%2Fconfig%2Faarch64%2Faarch64-cores.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957/gcc%2Fconfig%2Faarch64%2Faarch64-cores.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-cores.def?ref=0f244d848cffeda68f0eb4c5bb9c7e629bf2e957", "patch": "@@ -133,7 +133,7 @@ AARCH64_CORE(\"tsv110\",  tsv110, tsv110, V8_2A,  AARCH64_FL_CRYPTO | AARCH64_FL_F\n /* ARMv8.3-A Architecture Processors.  */\n \n /* Marvell cores (TX3). */\n-AARCH64_CORE(\"thunderx3t110\",  thunderx3t110,  thunderx3t110, V8_3A,  AARCH64_FL_CRYPTO | AARCH64_FL_RCPC | AARCH64_FL_SM4 | AARCH64_FL_SHA3 | AARCH64_FL_F16FML | AARCH64_FL_RCPC8_4, thunderx3t110, 0x43, 0x0b8, 0x0a)\n+AARCH64_CORE(\"thunderx3t110\",  thunderx3t110,  thunderx3t110, V8_3A,  AARCH64_FL_CRYPTO | AARCH64_FL_RCPC | AARCH64_FL_SM4 | AARCH64_FL_SHA3 | AARCH64_FL_F16FML, thunderx3t110, 0x43, 0x0b8, 0x0a)\n \n /* ARMv8.4-A Architecture Processors.  */\n "}, {"sha": "8ea8e2a39132e3caba17d9390c2d7fef88d42c22", "filename": "gcc/config/aarch64/aarch64.h", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957/gcc%2Fconfig%2Faarch64%2Faarch64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f244d848cffeda68f0eb4c5bb9c7e629bf2e957/gcc%2Fconfig%2Faarch64%2Faarch64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.h?ref=0f244d848cffeda68f0eb4c5bb9c7e629bf2e957", "patch": "@@ -173,7 +173,6 @@\n #define AARCH64_FL_SM4\t      (1 << 17)  /* Has ARMv8.4-A SM3 and SM4.  */\n #define AARCH64_FL_SHA3\t      (1 << 18)  /* Has ARMv8.4-a SHA3 and SHA512.  */\n #define AARCH64_FL_F16FML     (1 << 19)  /* Has ARMv8.4-a FP16 extensions.  */\n-#define AARCH64_FL_RCPC8_4    (1 << 20)  /* Has ARMv8.4-a RCPC extensions.  */\n \n /* Statistical Profiling extensions.  */\n #define AARCH64_FL_PROFILE    (1 << 21)\n@@ -265,7 +264,7 @@\n   (AARCH64_FL_FOR_V8_2A | AARCH64_FL_V8_3A | AARCH64_FL_PAUTH)\n #define AARCH64_FL_FOR_V8_4A\t\t\t\\\n   (AARCH64_FL_FOR_V8_3A | AARCH64_FL_V8_4A | AARCH64_FL_F16FML \\\n-   | AARCH64_FL_DOTPROD | AARCH64_FL_RCPC8_4 | AARCH64_FL_FLAGM)\n+   | AARCH64_FL_DOTPROD | AARCH64_FL_FLAGM)\n #define AARCH64_FL_FOR_V8_5A\t\t\t\\\n   (AARCH64_FL_FOR_V8_4A | AARCH64_FL_V8_5A\t\\\n    | AARCH64_FL_SB | AARCH64_FL_SSBS | AARCH64_FL_PREDRES)\n@@ -313,7 +312,7 @@\n #define AARCH64_ISA_SM4\t           (aarch64_isa_flags & AARCH64_FL_SM4)\n #define AARCH64_ISA_SHA3\t   (aarch64_isa_flags & AARCH64_FL_SHA3)\n #define AARCH64_ISA_F16FML\t   (aarch64_isa_flags & AARCH64_FL_F16FML)\n-#define AARCH64_ISA_RCPC8_4\t   (aarch64_isa_flags & AARCH64_FL_RCPC8_4)\n+#define AARCH64_ISA_RCPC8_4\t   (aarch64_isa_flags & AARCH64_FL_V8_4A)\n #define AARCH64_ISA_RNG\t\t   (aarch64_isa_flags & AARCH64_FL_RNG)\n #define AARCH64_ISA_V8_5A\t   (aarch64_isa_flags & AARCH64_FL_V8_5A)\n #define AARCH64_ISA_TME\t\t   (aarch64_isa_flags & AARCH64_FL_TME)"}]}