{"sha": "f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEwMWM0YjQ3YTk4Yzk4MjM4YmJmMzFhN2VlNzliMWIyZTRjY2U3Yg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2015-01-27T09:49:29Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2015-01-27T09:49:29Z"}, "message": "re PR tree-optimization/56273 (Bogus -Warray-bounds warning)\n\n2015-01-27  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/56273\n\tPR tree-optimization/59124\n\tPR tree-optimization/64277\n\t* tree-vrp.c (vrp_finalize): Emit array-bound warnings only\n\tfrom the first VRP pass.\n\n\t* g++.dg/warn/Warray-bounds-6.C: New testcase.\n\t* gcc.dg/Warray-bounds-12.c: Likewise.\n\t* gcc.dg/Warray-bounds-13.c: Likewise.\n\nFrom-SVN: r220157", "tree": {"sha": "b08aee2370e01b303f880ce9649c1c711e51fa36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b08aee2370e01b303f880ce9649c1c711e51fa36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4eaf52aabba9299e6642ac1e88de0b56f0a81908", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4eaf52aabba9299e6642ac1e88de0b56f0a81908", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4eaf52aabba9299e6642ac1e88de0b56f0a81908"}], "stats": {"total": 89, "additions": 88, "deletions": 1}, "files": [{"sha": "7972a4dc29d73cf8285de89e0c9c20bc7abba082", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "patch": "@@ -1,3 +1,11 @@\n+2015-01-27  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/56273\n+\tPR tree-optimization/59124\n+\tPR tree-optimization/64277\n+\t* tree-vrp.c (vrp_finalize): Emit array-bound warnings only\n+\tfrom the first VRP pass.\n+\n 2015-01-27  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR ipa/64776"}, {"sha": "a27bf71ffc2d7b50b258f26a8013073c70872b4a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "patch": "@@ -1,3 +1,12 @@\n+2015-01-27  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/56273\n+\tPR tree-optimization/59124\n+\tPR tree-optimization/64277\n+\t* g++.dg/warn/Warray-bounds-6.C: New testcase.\n+\t* gcc.dg/Warray-bounds-12.c: Likewise.\n+\t* gcc.dg/Warray-bounds-13.c: Likewise.\n+\n 2015-01-27  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/61058"}, {"sha": "f2e5f2f597aa27b30ab2964e277220766641d5b8", "filename": "gcc/testsuite/g++.dg/warn/Warray-bounds-6.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWarray-bounds-6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWarray-bounds-6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWarray-bounds-6.C?ref=f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "patch": "@@ -0,0 +1,26 @@\n+// { dg-do compile }\n+// { dg-options \"-O3 -Warray-bounds\" }\n+\n+struct type {\n+    bool a, b;\n+    bool get_b() { return b; }\n+};\n+\n+type stuff[9u];\n+\n+void bar();\n+\n+void foo()\n+{\n+  for(unsigned i = 0u; i < 9u; i++)\n+    {\n+      if(!stuff[i].a)\n+\tcontinue;\n+\n+      bar();\n+\n+      for(unsigned j = i + 1u; j < 9u; j++)\n+\tif(stuff[j].a && stuff[j].get_b()) // { dg-bogus \"above array bounds\" }\n+\t  return;\n+    }\n+}"}, {"sha": "ef26c6596bf575efbca0cce3654cd941bfc7a1b8", "filename": "gcc/testsuite/gcc.dg/Warray-bounds-12.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-12.c?ref=f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "patch": "@@ -0,0 +1,26 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -Warray-bounds\" } */\n+/* { dg-additional-options \"-mssse3\" { target x86_64-*-* i?86-*-* } } */\n+\n+void foo(short a[], short m)\n+{\n+  int i, j;\n+  int f1[10];\n+  short nc;\n+\n+  nc = m + 1;\n+  if (nc > 3)\n+    {\n+      for (i = 0; i <= nc; i++)\n+\t{\n+\t  f1[i] = f1[i] + 1;\n+\t}\n+    }\n+\n+  for (i = 0, j = m; i < nc; i++, j--)\n+    {\n+      a[i] = f1[i]; /* { dg-bogus \"above array bounds\" } */\n+      a[j] = i;\n+    }\n+  return;\n+}"}, {"sha": "7b40a83887de76addd517e947ac9e475cdcff566", "filename": "gcc/testsuite/gcc.dg/Warray-bounds-13.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-13.c?ref=f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -Warray-bounds\" } */\n+\n+extern char *bar[17];\n+\n+int foo(int argc, char **argv)\n+{\n+  int i;\n+  int n = 0;\n+\n+  for (i = 0; i < argc; i++)\n+    n++;\n+\n+  for (i = 0; i < argc; i++)\n+    argv[i] = bar[i + n]; /* { dg-bogus \"above array bounds\" } */\n+\n+  return 0;\n+}"}, {"sha": "c5ca2876b57e223a99fdfc1a04acc3f7bab8b7c1", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=f101c4b47a98c98238bbf31a7ee79b1b2e4cce7b", "patch": "@@ -10229,7 +10229,7 @@ vrp_finalize (void)\n   substitute_and_fold (op_with_constant_singleton_value_range,\n \t\t       vrp_fold_stmt, false);\n \n-  if (warn_array_bounds)\n+  if (warn_array_bounds && first_pass_instance)\n     check_all_array_refs ();\n \n   /* We must identify jump threading opportunities before we release"}]}