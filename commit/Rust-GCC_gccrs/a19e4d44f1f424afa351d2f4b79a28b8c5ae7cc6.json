{"sha": "a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE5ZTRkNDRmMWY0MjRhZmEzNTFkMmY0Yjc5YTI4YjhjNWFlN2NjNg==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2011-03-07T15:32:25Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2011-03-07T15:32:25Z"}, "message": "re PR c/47786 (tree check: expected tree that contains 'decl minimal' structure, have 'tree_list' in c_type_hash, at c-family/c-common.c:4066)\n\n\tPR c/47786\n\t* c-common.c (c_type_hash): Call list_length instead of iterating\n\tthrough DECL_CHAIN.  Rename 'i' to 'n_elements'.\n\nFrom-SVN: r170739", "tree": {"sha": "963140ba824737698d21be14b933d8f0e66f3af1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/963140ba824737698d21be14b933d8f0e66f3af1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6/comments", "author": null, "committer": null, "parents": [{"sha": "59527282380bdf54087204235cc7330cd44b067a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59527282380bdf54087204235cc7330cd44b067a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59527282380bdf54087204235cc7330cd44b067a"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "60fc08fa8492f2b0254a97dda356704ab22fb900", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6", "patch": "@@ -1,3 +1,9 @@\n+2011-03-07  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\tPR c/47786\n+\t* c-common.c (c_type_hash): Call list_length instead of iterating\n+\tthrough DECL_CHAIN.  Rename 'i' to 'n_elements'.\n+\n 2011-02-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/47809"}, {"sha": "f0296612e5193eb9559417f5f77c9d0ca7163c09", "filename": "gcc/c-family/c-common.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6/gcc%2Fc-family%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6/gcc%2Fc-family%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.c?ref=a19e4d44f1f424afa351d2f4b79a28b8c5ae7cc6", "patch": "@@ -4035,7 +4035,7 @@ c_apply_type_quals_to_decl (int type_quals, tree decl)\n static hashval_t\n c_type_hash (const void *p)\n {\n-  int i = 0;\n+  int n_elements;\n   int shift, size;\n   const_tree const t = (const_tree) p;\n   tree t2;\n@@ -4064,14 +4064,15 @@ c_type_hash (const void *p)\n     default:\n       gcc_unreachable ();\n     }\n-  for (; t2; t2 = DECL_CHAIN (t2))\n-    i++;\n+  /* FIXME: We want to use a DECL_CHAIN iteration method here, but\n+     TYPE_VALUES of ENUMERAL_TYPEs is stored as a TREE_LIST.  */\n+  n_elements = list_length (t2);\n   /* We might have a VLA here.  */\n   if (TREE_CODE (TYPE_SIZE (t)) != INTEGER_CST)\n     size = 0;\n   else\n     size = TREE_INT_CST_LOW (TYPE_SIZE (t));\n-  return ((size << 24) | (i << shift));\n+  return ((size << 24) | (n_elements << shift));\n }\n \n static GTY((param_is (union tree_node))) htab_t type_hash_table;"}]}