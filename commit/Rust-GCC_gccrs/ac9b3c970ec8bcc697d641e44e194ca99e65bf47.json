{"sha": "ac9b3c970ec8bcc697d641e44e194ca99e65bf47", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWM5YjNjOTcwZWM4YmNjNjk3ZDY0MWU0NGUxOTRjYTk5ZTY1YmY0Nw==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "amylaar@cygnus.co.uk", "date": "1998-03-05T22:05:51Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-03-05T22:05:51Z"}, "message": "jump.c (jump_optimize): Call mark_jump_label also for deleted insns.\n\n        * jump.c (jump_optimize): Call mark_jump_label also for deleted\n        insns.\n        (mark_jump_label): Don't increment ref counts for deleted insns.\n\nFrom-SVN: r18420", "tree": {"sha": "00eaa7957d065f847be209659ab8054a2b40303b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00eaa7957d065f847be209659ab8054a2b40303b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac9b3c970ec8bcc697d641e44e194ca99e65bf47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac9b3c970ec8bcc697d641e44e194ca99e65bf47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac9b3c970ec8bcc697d641e44e194ca99e65bf47", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac9b3c970ec8bcc697d641e44e194ca99e65bf47/comments", "author": null, "committer": null, "parents": [{"sha": "6e92f4b6a2371ce4bb05f7021653f962d73605aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e92f4b6a2371ce4bb05f7021653f962d73605aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e92f4b6a2371ce4bb05f7021653f962d73605aa"}], "stats": {"total": 25, "additions": 16, "deletions": 9}, "files": [{"sha": "a9555d74d1af5fe27f5b6b1d6be0950c1fe6d2cd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac9b3c970ec8bcc697d641e44e194ca99e65bf47/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac9b3c970ec8bcc697d641e44e194ca99e65bf47/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ac9b3c970ec8bcc697d641e44e194ca99e65bf47", "patch": "@@ -1,3 +1,9 @@\n+Thu Mar  5 23:06:26 1998  J\"orn Rennecke <amylaar@cygnus.co.uk>\n+\n+\t* jump.c (jump_optimize): Call mark_jump_label also for deleted\n+\tinsns.\n+\t(mark_jump_label): Don't increment ref counts for deleted insns.\n+\n Thu Mar  5 09:55:15 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n         * mips/iris6.h (TARGET_DEFAULT): Parenthesize macro definition."}, {"sha": "4b7a5f4d035da22acfdff82373043fc19e0fff40", "filename": "gcc/jump.c", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac9b3c970ec8bcc697d641e44e194ca99e65bf47/gcc%2Fjump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac9b3c970ec8bcc697d641e44e194ca99e65bf47/gcc%2Fjump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjump.c?ref=ac9b3c970ec8bcc697d641e44e194ca99e65bf47", "patch": "@@ -212,11 +212,10 @@ jump_optimize (f, cross_jump, noop_moves, after_regscan)\n      also make a chain of all returns.  */\n \n   for (insn = f; insn; insn = NEXT_INSN (insn))\n-    if (GET_RTX_CLASS (GET_CODE (insn)) == 'i'\n-\t&& ! INSN_DELETED_P (insn))\n+    if (GET_RTX_CLASS (GET_CODE (insn)) == 'i')\n       {\n \tmark_jump_label (PATTERN (insn), insn, cross_jump);\n-\tif (GET_CODE (insn) == JUMP_INSN)\n+\tif (! INSN_DELETED_P (insn) && GET_CODE (insn) == JUMP_INSN)\n \t  {\n \t    if (JUMP_LABEL (insn) != 0 && simplejump_p (insn))\n \t      {\n@@ -3380,7 +3379,8 @@ mark_jump_label (x, insn, cross_jump)\n \t  }\n \n \tXEXP (x, 0) = label;\n-\t++LABEL_NUSES (label);\n+\tif (! insn || ! INSN_DELETED_P (insn))\n+\t  ++LABEL_NUSES (label);\n \n \tif (insn)\n \t  {\n@@ -3417,12 +3417,13 @@ mark_jump_label (x, insn, cross_jump)\n      ADDR_DIFF_VEC.  Don't set the JUMP_LABEL of a vector.  */\n     case ADDR_VEC:\n     case ADDR_DIFF_VEC:\n-      {\n-\tint eltnum = code == ADDR_DIFF_VEC ? 1 : 0;\n+      if (! INSN_DELETED_P (insn))\n+\t{\n+\t  int eltnum = code == ADDR_DIFF_VEC ? 1 : 0;\n \n-\tfor (i = 0; i < XVECLEN (x, eltnum); i++)\n-\t  mark_jump_label (XVECEXP (x, eltnum, i), NULL_RTX, cross_jump);\n-      }\n+\t  for (i = 0; i < XVECLEN (x, eltnum); i++)\n+\t    mark_jump_label (XVECEXP (x, eltnum, i), NULL_RTX, cross_jump);\n+\t}\n       return;\n       \n     default:"}]}