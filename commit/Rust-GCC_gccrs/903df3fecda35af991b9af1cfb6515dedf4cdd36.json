{"sha": "903df3fecda35af991b9af1cfb6515dedf4cdd36", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAzZGYzZmVjZGEzNWFmOTkxYjlhZjFjZmI2NTE1ZGVkZjRjZGQzNg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-01-15T23:44:42Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-01-15T23:44:42Z"}, "message": "(smulsi3_highpart): New pattern.\n\n(umulsi3_highpart): New pattern.\n\nFrom-SVN: r6396", "tree": {"sha": "58f9d05c5e5811f4afce1ef53e3674dcea9b006c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58f9d05c5e5811f4afce1ef53e3674dcea9b006c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/903df3fecda35af991b9af1cfb6515dedf4cdd36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/903df3fecda35af991b9af1cfb6515dedf4cdd36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/903df3fecda35af991b9af1cfb6515dedf4cdd36", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/903df3fecda35af991b9af1cfb6515dedf4cdd36/comments", "author": null, "committer": null, "parents": [{"sha": "e783e4c2b3c68d9628318249a3e6f59b0e30c5de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e783e4c2b3c68d9628318249a3e6f59b0e30c5de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e783e4c2b3c68d9628318249a3e6f59b0e30c5de"}], "stats": {"total": 111, "additions": 111, "deletions": 0}, "files": [{"sha": "60a4caa0991aa5ec3cac2655b2b9a93e34397aee", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 111, "deletions": 0, "changes": 111, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/903df3fecda35af991b9af1cfb6515dedf4cdd36/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/903df3fecda35af991b9af1cfb6515dedf4cdd36/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=903df3fecda35af991b9af1cfb6515dedf4cdd36", "patch": "@@ -946,6 +946,62 @@\n    (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"4\")])\t\t;; mult + mflo + mfhi + delay\n \n+(define_insn \"smulsi3_highpart\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n+\t(truncate:SI\n+\t (lshiftrt:DI (mult:DI (sign_extend:DI (match_operand:SI 1 \"register_operand\" \"d\"))\n+\t\t\t       (sign_extend:DI (match_operand:SI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 32))))\n+   (clobber (reg:SI 64))\n+   (clobber (reg:SI 65))]\n+  \"\"\n+  \"*\n+{\n+  rtx xoperands[10];\n+\n+  xoperands[0] = operands[0];\n+  xoperands[1] = gen_rtx (REG, SImode, HI_REGNUM);\n+\n+  output_asm_insn (\\\"mult\\\\t%1,%2\\\", operands);\n+  output_asm_insn (mips_move_1word (xoperands, insn), xoperands);\n+  return \\\"\\\";\n+}\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"3\")])\t\t;; mult + mfhi + delay\n+\n+(define_split\n+  [(set (match_operand:SI 0 \"register_operand\" \"\")\n+\t(truncate:SI\n+\t (lshiftrt:DI (mult:DI (sign_extend:DI (match_operand:SI 1 \"register_operand\" \"d\"))\n+\t\t\t       (sign_extend:DI (match_operand:SI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 32))))\n+   (clobber (reg:SI 64))\n+   (clobber (reg:SI 65))]\n+  \"!TARGET_DEBUG_D_MODE\"\n+  [(parallel [(set (reg:SI 64)\t\t;; high register\n+\t\t   (truncate:SI\n+\t\t    (lshiftrt:DI (mult:DI (sign_extend:DI (match_dup 1))\n+\t\t\t\t\t  (sign_extend:DI (match_dup 2)))\n+\t\t\t\t (const_int 32))))\n+\t      (clobber (reg:SI 65))])\n+   (set (match_dup 0)\n+\t(reg:SI 64))]\n+  \"\")\n+\n+(define_insn \"smulsi3_highpart_internal\"\n+  [(set (reg:SI 64)\t\t\t;; high register\n+\t(truncate:SI\n+\t (lshiftrt:DI (mult:DI (sign_extend:DI (match_operand:SI 0 \"register_operand\" \"d\"))\n+\t\t\t       (sign_extend:DI (match_operand:SI 1 \"register_operand\" \"d\")))\n+\t\t      (const_int 32))))\n+   (clobber (reg:SI 65))]\n+  \"\"\n+  \"mult\\\\t%0,%1\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"1\")])\n+\n (define_insn \"umulsidi3\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=d\")\n \t(mult:DI (zero_extend:DI (match_operand:SI 1 \"register_operand\" \"d\"))\n@@ -968,6 +1024,61 @@\n    (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"4\")])\t\t;; mult + mflo + mfhi + delay\n \n+(define_insn \"umulsi3_highpart\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n+\t(truncate:SI\n+\t (lshiftrt:DI (mult:DI (zero_extend:DI (match_operand:SI 1 \"register_operand\" \"d\"))\n+\t\t\t       (zero_extend:DI (match_operand:SI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 32))))\n+   (clobber (reg:SI 64))\n+   (clobber (reg:SI 65))]\n+  \"\"\n+  \"*\n+{\n+  rtx xoperands[10];\n+\n+  xoperands[0] = operands[0];\n+  xoperands[1] = gen_rtx (REG, SImode, HI_REGNUM);\n+\n+  output_asm_insn (\\\"multu\\\\t%1,%2\\\", operands);\n+  output_asm_insn (mips_move_1word (xoperands, insn), xoperands);\n+  return \\\"\\\";\n+}\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"3\")])\t\t;; multu + mfhi + delay\n+\n+(define_split\n+  [(set (match_operand:SI 0 \"register_operand\" \"\")\n+\t(truncate:SI\n+\t (lshiftrt:DI (mult:DI (zero_extend:DI (match_operand:SI 1 \"register_operand\" \"d\"))\n+\t\t\t       (zero_extend:DI (match_operand:SI 2 \"register_operand\" \"d\")))\n+\t\t      (const_int 32))))\n+   (clobber (reg:SI 64))\n+   (clobber (reg:SI 65))]\n+  \"!TARGET_DEBUG_D_MODE\"\n+  [(parallel [(set (reg:SI 64)\t\t;; high register\n+\t\t   (truncate:SI\n+\t\t    (lshiftrt:DI (mult:DI (zero_extend:DI (match_dup 1))\n+\t\t\t\t\t  (zero_extend:DI (match_dup 2)))\n+\t\t\t\t (const_int 32))))\n+\t      (clobber (reg:SI 65))])\n+   (set (match_dup 0)\n+\t(reg:SI 64))]\n+  \"\")\n+\n+(define_insn \"umulsi3_highpart_internal\"\n+  [(set (reg:SI 64)\t\t\t;; high register\n+\t(truncate:SI\n+\t (lshiftrt:DI (mult:DI (zero_extend:DI (match_operand:SI 0 \"register_operand\" \"d\"))\n+\t\t\t       (zero_extend:DI (match_operand:SI 1 \"register_operand\" \"d\")))\n+\t\t      (const_int 32))))\n+   (clobber (reg:SI 65))]\n+  \"\"\n+  \"multu\\\\t%0,%1\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"1\")])\n \f\n ;;\n ;;  ...................."}]}