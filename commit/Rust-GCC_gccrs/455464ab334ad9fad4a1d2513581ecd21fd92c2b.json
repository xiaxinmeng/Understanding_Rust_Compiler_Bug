{"sha": "455464ab334ad9fad4a1d2513581ecd21fd92c2b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDU1NDY0YWIzMzRhZDlmYWQ0YTFkMjUxMzU4MWVjZDIxZmQ5MmMyYg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2014-05-13T08:28:53Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2014-05-13T08:28:53Z"}, "message": "re PR target/61060 (ICE: in int_mode_for_mode, at stor-layout.c:400 with -free-ter)\n\n\tPR target/61060\n\t* config/i386/i386.c (ix86_expand_set_or_movmem): If count_exp\n\tis const0_rtx, return immediately.  Don't test count == 0 when\n\tit is always true.\n\n\t* gcc.dg/pr61060.c: New test.\n\nFrom-SVN: r210352", "tree": {"sha": "2a0f39c3ccc766e422926dec0b7ffe621b076dc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a0f39c3ccc766e422926dec0b7ffe621b076dc8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/455464ab334ad9fad4a1d2513581ecd21fd92c2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/455464ab334ad9fad4a1d2513581ecd21fd92c2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/455464ab334ad9fad4a1d2513581ecd21fd92c2b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/455464ab334ad9fad4a1d2513581ecd21fd92c2b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f30e25a336a39a990c82f8e3cdb507c73e38e84b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f30e25a336a39a990c82f8e3cdb507c73e38e84b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f30e25a336a39a990c82f8e3cdb507c73e38e84b"}], "stats": {"total": 42, "additions": 39, "deletions": 3}, "files": [{"sha": "a829af0f9af6eb03cfacbb1bc39efcaf0e1a6b53", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=455464ab334ad9fad4a1d2513581ecd21fd92c2b", "patch": "@@ -1,3 +1,10 @@\n+2014-05-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/61060\n+\t* config/i386/i386.c (ix86_expand_set_or_movmem): If count_exp\n+\tis const0_rtx, return immediately.  Don't test count == 0 when\n+\tit is always true.\n+\n 2014-05-13  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n \n \t* Makefile.in: add shrink-wrap.o."}, {"sha": "7a7a3fcc5ea60b02770fb462a3b9c1adc104173e", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=455464ab334ad9fad4a1d2513581ecd21fd92c2b", "patch": "@@ -24157,8 +24157,13 @@ ix86_expand_set_or_movmem (rtx dst, rtx src, rtx count_exp, rtx val_exp,\n     align = MEM_ALIGN (dst) / BITS_PER_UNIT;\n \n   if (CONST_INT_P (count_exp))\n-    min_size = max_size = probable_max_size = count = expected_size\n-      = INTVAL (count_exp);\n+    {\n+      min_size = max_size = probable_max_size = count = expected_size\n+\t= INTVAL (count_exp);\n+      /* When COUNT is 0, there is nothing to do.  */\n+      if (!count)\n+\treturn true;\n+    }\n   else\n     {\n       if (min_size_exp)\n@@ -24167,7 +24172,7 @@ ix86_expand_set_or_movmem (rtx dst, rtx src, rtx count_exp, rtx val_exp,\n \tmax_size = INTVAL (max_size_exp);\n       if (probable_max_size_exp)\n \tprobable_max_size = INTVAL (probable_max_size_exp);\n-      if (CONST_INT_P (expected_size_exp) && count == 0)\n+      if (CONST_INT_P (expected_size_exp))\n \texpected_size = INTVAL (expected_size_exp);\n      }\n "}, {"sha": "b99777ebf4173ea072fde66a4cf25f825d912aa5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=455464ab334ad9fad4a1d2513581ecd21fd92c2b", "patch": "@@ -1,3 +1,8 @@\n+2014-05-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/61060\n+\t* gcc.dg/pr61060.c: New test.\n+\n 2014-05-12  DJ Delorie  <dj@redhat.com>\n \n \t* gcc.dg/sibcall-3.c: MSP430 doesn't have sibcall."}, {"sha": "d2a1365076560c2d1185a5ce6bc99b3b22bc73bf", "filename": "gcc/testsuite/gcc.dg/pr61060.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2Ftestsuite%2Fgcc.dg%2Fpr61060.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455464ab334ad9fad4a1d2513581ecd21fd92c2b/gcc%2Ftestsuite%2Fgcc.dg%2Fpr61060.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr61060.c?ref=455464ab334ad9fad4a1d2513581ecd21fd92c2b", "patch": "@@ -0,0 +1,19 @@\n+/* PR target/61060 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O0 -ftree-ter\" } */\n+\n+typedef __SIZE_TYPE__ size_t;\n+\n+extern inline __attribute__ ((gnu_inline, always_inline, artificial))\n+void *memset (void *dest, int ch, size_t len)\n+{\n+  return __builtin_memset (dest, ch, len);\n+}\n+\n+char buf[10];\n+\n+void\n+foo (void)\n+{\n+  memset (buf, sizeof (buf), 0);\n+}"}]}