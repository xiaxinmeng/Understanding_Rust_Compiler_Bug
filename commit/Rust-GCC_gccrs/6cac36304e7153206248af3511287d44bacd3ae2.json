{"sha": "6cac36304e7153206248af3511287d44bacd3ae2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNhYzM2MzA0ZTcxNTMyMDYyNDhhZjM1MTEyODdkNDRiYWNkM2FlMg==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2008-01-26T15:22:59Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2008-01-26T15:22:59Z"}, "message": "re PR libfortran/34887 (reverse tabbing before slash descriptor (regression vs. g77))\n\n2008-01-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR libfofortran/34887\n\t* io/transfer.c (next_record_w): Always move to the farthest\n\tposition when completing the record (also when we are\n\tprocessing a slash edit descriptor).\n\n2008-01-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR libfofortran/34887\n\t* gfortran.dg/x_slash_2.f:  New test.\n\nFrom-SVN: r131864", "tree": {"sha": "fc4b24390f3439ee4e597fbe0adfce8a6dc647d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc4b24390f3439ee4e597fbe0adfce8a6dc647d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6cac36304e7153206248af3511287d44bacd3ae2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cac36304e7153206248af3511287d44bacd3ae2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cac36304e7153206248af3511287d44bacd3ae2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cac36304e7153206248af3511287d44bacd3ae2/comments", "author": null, "committer": null, "parents": [{"sha": "1230d7f8de706221a1b6f3d81a20efc2052b7e0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1230d7f8de706221a1b6f3d81a20efc2052b7e0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1230d7f8de706221a1b6f3d81a20efc2052b7e0a"}], "stats": {"total": 46, "additions": 33, "deletions": 13}, "files": [{"sha": "583a15890cf971cfe81613be4aa4250708b9a2e1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cac36304e7153206248af3511287d44bacd3ae2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cac36304e7153206248af3511287d44bacd3ae2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6cac36304e7153206248af3511287d44bacd3ae2", "patch": "@@ -1,3 +1,8 @@\n+2008-01-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR libfofortran/34887\n+\t* gfortran.dg/x_slash_2.f:  New test.\n+\n 2008-01-26  Richard Guenther  <rguenther@suse.de>\n \n \tPR c++/34235"}, {"sha": "6023b647d24dbc48fadee10b718bdd6bb5a979a6", "filename": "gcc/testsuite/gfortran.dg/x_slash_2.f", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cac36304e7153206248af3511287d44bacd3ae2/gcc%2Ftestsuite%2Fgfortran.dg%2Fx_slash_2.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cac36304e7153206248af3511287d44bacd3ae2/gcc%2Ftestsuite%2Fgfortran.dg%2Fx_slash_2.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fx_slash_2.f?ref=6cac36304e7153206248af3511287d44bacd3ae2", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do run }\n+! PR 34887 - reverse tabs followed by a slash used to confuse I/O.\n+      program main\n+      character(len=2) :: b, a\n+      open(10,form=\"formatted\")\n+      write (10,'(3X, A, T1, A,/)') 'aa', 'bb'\n+      rewind(10)\n+      read (10,'(A2,1X,A2)') b,a\n+      if (a /= 'aa' .or. b /= 'bb') call abort\n+      close(10,status=\"delete\")\n+      end"}, {"sha": "a83ee24daae774631bedd286471e548387668fb9", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cac36304e7153206248af3511287d44bacd3ae2/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cac36304e7153206248af3511287d44bacd3ae2/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=6cac36304e7153206248af3511287d44bacd3ae2", "patch": "@@ -1,3 +1,10 @@\n+2008-01-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR libfofortran/34887\n+\t* io/transfer.c (next_record_w): Always move to the farthest\n+\tposition when completing the record (also when we are\n+\tprocessing a slash edit descriptor).\n+\n 2008-01-25  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libfortran/34876"}, {"sha": "52c6314349db9abb8416a57a03fd21663c348ab0", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 10, "deletions": 13, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cac36304e7153206248af3511287d44bacd3ae2/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cac36304e7153206248af3511287d44bacd3ae2/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=6cac36304e7153206248af3511287d44bacd3ae2", "patch": "@@ -2573,21 +2573,18 @@ next_record_w (st_parameter_dt *dtp, int done)\n \t}\n       else\n \t{\n-\t  /* If this is the last call to next_record move to the farthest\n-\t  position reached in preparation for completing the record.\n-\t  (for file unit) */\n-\t  if (done)\n-\t    {\n-\t      m = dtp->u.p.current_unit->recl -\n-\t\t\tdtp->u.p.current_unit->bytes_left;\n-\t      if (max_pos > m)\n-\t\t{\n-\t\t  length = (int) (max_pos - m);\n-\t\t  p = salloc_w (dtp->u.p.current_unit->s, &length);\n-\t\t}\n- \t    }\n \t  size_t len;\n \t  const char crlf[] = \"\\r\\n\";\n+\n+\t  /* Move to the farthest position reached in preparation for\n+\t  completing the record.  (for file unit) */\n+\t  m = dtp->u.p.current_unit->recl -\n+\t    dtp->u.p.current_unit->bytes_left;\n+\t  if (max_pos > m)\n+\t    {\n+\t      length = (int) (max_pos - m);\n+\t      p = salloc_w (dtp->u.p.current_unit->s, &length);\n+\t    }\n #ifdef HAVE_CRLF\n \t  len = 2;\n #else"}]}