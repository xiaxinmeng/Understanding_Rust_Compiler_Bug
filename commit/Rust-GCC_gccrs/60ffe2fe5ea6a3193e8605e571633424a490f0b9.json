{"sha": "60ffe2fe5ea6a3193e8605e571633424a490f0b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjBmZmUyZmU1ZWE2YTMxOTNlODYwNWU1NzE2MzM0MjRhNDkwZjBiOQ==", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2008-09-19T17:37:13Z"}, "committer": {"name": "Andrew Macleod", "email": "amacleod@gcc.gnu.org", "date": "2008-09-19T17:37:13Z"}, "message": "re PR middle-end/37567 (tree SSA to normal checking takes abnormally long time)\n\n\n\tPR middle-end/37567\n\t* tree-ssa-ter.c (free_temp_expr_table): Make sure fields are actually\n\tempty before freeing them.\n\t(find_replaceable_exprs): Move asserts to free_temp_expr_table.\n\n\nCo-Authored-By: Jan Hubicka <jh@suse.cz>\n\nFrom-SVN: r140494", "tree": {"sha": "106b4f09aca3c4dd8a7f19cdcb27f65b79ab7822", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/106b4f09aca3c4dd8a7f19cdcb27f65b79ab7822"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60ffe2fe5ea6a3193e8605e571633424a490f0b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60ffe2fe5ea6a3193e8605e571633424a490f0b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60ffe2fe5ea6a3193e8605e571633424a490f0b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60ffe2fe5ea6a3193e8605e571633424a490f0b9/comments", "author": null, "committer": null, "parents": [{"sha": "c38b84d8f108cb3317475744fcb92c41324b4291", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c38b84d8f108cb3317475744fcb92c41324b4291", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c38b84d8f108cb3317475744fcb92c41324b4291"}], "stats": {"total": 35, "additions": 15, "deletions": 20}, "files": [{"sha": "3d86e5bf5d918f4be5eacf06c12fef7ca4ab28d8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ffe2fe5ea6a3193e8605e571633424a490f0b9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ffe2fe5ea6a3193e8605e571633424a490f0b9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=60ffe2fe5ea6a3193e8605e571633424a490f0b9", "patch": "@@ -1,3 +1,11 @@\n+2008-09-19  Andrew MacLeod  <amacleod@redhat.com>\n+\t    Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/37567\n+\t* tree-ssa-ter.c (free_temp_expr_table): Make sure fields are actually\n+\tempty before freeing them.\n+\t(find_replaceable_exprs): Move asserts to free_temp_expr_table.\n+\n 2008-09-18  Bob Wilson  <bob.wilson@acm.org>\n \n \t* configure.ac: Add HAVE_AS_TLS check for Xtensa."}, {"sha": "cb393fba32bbb3d956d486671f44325a64868f9e", "filename": "gcc/tree-ssa-ter.c", "status": "modified", "additions": 7, "deletions": 20, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60ffe2fe5ea6a3193e8605e571633424a490f0b9/gcc%2Ftree-ssa-ter.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60ffe2fe5ea6a3193e8605e571633424a490f0b9/gcc%2Ftree-ssa-ter.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-ter.c?ref=60ffe2fe5ea6a3193e8605e571633424a490f0b9", "patch": "@@ -220,22 +220,22 @@ static gimple *\n free_temp_expr_table (temp_expr_table_p t)\n {\n   gimple *ret = NULL;\n-  unsigned i;\n \n #ifdef ENABLE_CHECKING\n   unsigned x;\n   for (x = 0; x <= num_var_partitions (t->map); x++)\n     gcc_assert (!t->kill_list[x]);\n+  for (x = 0; x < num_ssa_names + 1; x++)\n+    {\n+      gcc_assert (t->expr_decl_uids[x] == NULL);\n+      gcc_assert (t->partition_dependencies[x] == NULL);\n+    }\n #endif\n \n   BITMAP_FREE (t->partition_in_use);\n   BITMAP_FREE (t->new_replaceable_dependencies);\n \n-  for (i = 0; i <= num_ssa_names; i++)\n-    if (t->expr_decl_uids[i])\n-      BITMAP_FREE (t->expr_decl_uids[i]);\n   free (t->expr_decl_uids);\n-\n   free (t->kill_list);\n   free (t->partition_dependencies);\n   free (t->num_in_part);\n@@ -664,27 +664,14 @@ find_replaceable_exprs (var_map map)\n   FOR_EACH_BB (bb)\n     {\n       find_replaceable_in_bb (table, bb);\n-      gcc_assert (bitmap_empty_p (table->partition_in_use));\n-\n #ifdef ENABLE_CHECKING\n-      {\n-\tunsigned i;\n-\t/* Make sure all the tables have been cleared out.  */\n-\tfor (i = 0; i < num_ssa_names + 1; i++)\n-\t  {\n-\t    gcc_assert (table->partition_dependencies[i] == NULL);\n-\t    gcc_assert (table->expr_decl_uids[i] == NULL);\n-\t    if (i < num_var_partitions (map))\n-\t      gcc_assert (table->kill_list[i] == NULL);\n-\t  }\n-      }\n+      gcc_assert (bitmap_empty_p (table->partition_in_use));\n #endif\n     }\n \n   ret = free_temp_expr_table (table);\n   return ret;\n-}\n-\n+} \n \n /* Dump TER expression table EXPR to file F.  */\n "}]}