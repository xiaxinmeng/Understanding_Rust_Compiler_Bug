{"sha": "77eb5950766876da857481b3dafc7ccd13b4b722", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdlYjU5NTA3NjY4NzZkYTg1NzQ4MWIzZGFmYzdjY2QxM2I0YjcyMg==", "commit": {"author": {"name": "Seongbae Park", "email": "seongbae.park@gmail.com", "date": "2007-03-20T15:42:37Z"}, "committer": {"name": "Seongbae Park", "email": "spark@gcc.gnu.org", "date": "2007-03-20T15:42:37Z"}, "message": "re PR tree-optimization/30590 (tree-nrv optimization clobbers return variable)\n\n2007-03-19  Seongbae Park <seongbae.park@gmail.com>\n\n\tPR tree-optimization/30590\n\t* g++.dg/opt/pr30590.C: New testcase.\n\nFrom-SVN: r123087", "tree": {"sha": "95a82fc829b709d0982639ee3934d07aba52e89a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95a82fc829b709d0982639ee3934d07aba52e89a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77eb5950766876da857481b3dafc7ccd13b4b722", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77eb5950766876da857481b3dafc7ccd13b4b722", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77eb5950766876da857481b3dafc7ccd13b4b722", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77eb5950766876da857481b3dafc7ccd13b4b722/comments", "author": null, "committer": null, "parents": [{"sha": "caaf5345bbdad6db838640bc77ddc7a7aeb87df4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caaf5345bbdad6db838640bc77ddc7a7aeb87df4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/caaf5345bbdad6db838640bc77ddc7a7aeb87df4"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "147dd302106b4640b3377e1e8324947006f7a652", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77eb5950766876da857481b3dafc7ccd13b4b722/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77eb5950766876da857481b3dafc7ccd13b4b722/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=77eb5950766876da857481b3dafc7ccd13b4b722", "patch": "@@ -1,3 +1,8 @@\n+2007-03-19  Seongbae Park <seongbae.park@gmail.com>\n+\n+\tPR tree-optimization/30590\n+\t* g++.dg/opt/pr30590.C: New testcase.\n+\n 2007-03-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/30762"}, {"sha": "42ae046db81354a50e9a8bc94055add6499dacac", "filename": "gcc/testsuite/g++.dg/opt/pr30590.C", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77eb5950766876da857481b3dafc7ccd13b4b722/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr30590.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77eb5950766876da857481b3dafc7ccd13b4b722/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr30590.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr30590.C?ref=77eb5950766876da857481b3dafc7ccd13b4b722", "patch": "@@ -0,0 +1,40 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O\" } */\n+struct test\n+{\n+  int type;\n+  char buffer[4242]; /* should trigger pass-by-reference */\n+};\n+\n+int flag = 0;\n+\n+struct test\n+reset (void)\n+{\n+  struct test retval;\n+  retval.type = 1;\n+  return retval;\n+}\n+\n+struct test\n+test (void)\n+{\n+  struct test result;\n+  result.type = 0;\n+\n+  for (int i = 0; i < 2; ++i)\n+    {\n+      struct test candidate = reset ();\n+      if (flag)\n+        result = candidate;\n+    }\n+\n+  return result;\n+}\n+\n+int\n+main (void)\n+{\n+  struct test result = test ();\n+  return result.type;\n+}"}]}