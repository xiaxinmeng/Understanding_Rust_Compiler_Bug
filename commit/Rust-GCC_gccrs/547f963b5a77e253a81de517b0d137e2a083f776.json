{"sha": "547f963b5a77e253a81de517b0d137e2a083f776", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ3Zjk2M2I1YTc3ZTI1M2E4MWRlNTE3YjBkMTM3ZTJhMDgzZjc3Ng==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2010-07-20T06:43:02Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2010-07-20T06:43:02Z"}, "message": "Makefile.am (doc-texinfo): New rule.\n\n2010-07-19  Benjamin Kosnik  <bkoz@redhat.com>\n\n\t* doc/Makefile.am (doc-texinfo): New rule.\n\t(doc-texinfo-docbook): New rule.\n\t(DB2TEXI_FLAGS): New.\n\t(doc-xml-single-docbook): Just the manual, not the set. Tweak flags.\n\t* doc/Makefile.in: Regenerate.\n\nFrom-SVN: r162327", "tree": {"sha": "623f468ed946a7025e06a945f3f8e793323fc5f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/623f468ed946a7025e06a945f3f8e793323fc5f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/547f963b5a77e253a81de517b0d137e2a083f776", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/547f963b5a77e253a81de517b0d137e2a083f776", "html_url": "https://github.com/Rust-GCC/gccrs/commit/547f963b5a77e253a81de517b0d137e2a083f776", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/547f963b5a77e253a81de517b0d137e2a083f776/comments", "author": null, "committer": null, "parents": [{"sha": "13411c9d4c0fb1c35998d67d6d9ce112db4651c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13411c9d4c0fb1c35998d67d6d9ce112db4651c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13411c9d4c0fb1c35998d67d6d9ce112db4651c9"}], "stats": {"total": 70, "additions": 58, "deletions": 12}, "files": [{"sha": "cb0c735a59d513024938eaa53e606266da13b6a1", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/547f963b5a77e253a81de517b0d137e2a083f776/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/547f963b5a77e253a81de517b0d137e2a083f776/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=547f963b5a77e253a81de517b0d137e2a083f776", "patch": "@@ -1,3 +1,11 @@\n+2010-07-19  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\t* doc/Makefile.am (doc-texinfo): New rule.\n+\t(doc-texinfo-docbook): New rule.\n+\t(DB2TEXI_FLAGS): New.\n+\t(doc-xml-single-docbook): Just the manual, not the set. Tweak flags.\n+\t* doc/Makefile.in: Regenerate.\n+\n 2010-07-14  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \t* doc/xml/manual/shared_ptr.xml: Update."}, {"sha": "1454140c94371dff379e17abf3acaf124c424a65", "filename": "libstdc++-v3/doc/Makefile.am", "status": "modified", "additions": 24, "deletions": 6, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/547f963b5a77e253a81de517b0d137e2a083f776/libstdc%2B%2B-v3%2Fdoc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/547f963b5a77e253a81de517b0d137e2a083f776/libstdc%2B%2B-v3%2Fdoc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2FMakefile.am?ref=547f963b5a77e253a81de517b0d137e2a083f776", "patch": "@@ -52,6 +52,9 @@ doc-html: doc-html-docbook doc-html-doxygen\n \tcp -R ${docbook_outdir}/html ./libstdc++-manual.html\n \tcp -R ${doxygen_outdir}/html ./libstdc++-api.html\n \n+# TEXINFO\n+doc-texinfo: doc-texinfo-docbook\n+\n # Doxygen configuration\n # Assumes doxygen, graphviz (with dot), pdflatex installed\n doxygen_script=${top_srcdir}/scripts/run_doxygen\n@@ -216,14 +219,17 @@ XSL_HTML_STYLE = $(XSL_STYLE_DIR)/xhtml/chunk.xsl\n #XSL_HTML_SINGLE_STYLE = $(XSL_STYLE_DIR)/xhtml/onechunk.xsl\n XSL_HTML_SINGLE_STYLE = $(XSL_STYLE_DIR)/xhtml/docbook.xsl\n \n+${docbook_outdir}/fo:\n+\tmkdir -p ${docbook_outdir}/fo\n+\n ${docbook_outdir}/html:\n \tmkdir -p ${docbook_outdir}/html\n \n ${docbook_outdir}/pdf:\n \tmkdir -p ${docbook_outdir}/pdf\n \n-${docbook_outdir}/fo:\n-\tmkdir -p ${docbook_outdir}/fo\n+${docbook_outdir}/texinfo:\n+\tmkdir -p ${docbook_outdir}/texinfo\n \n ${docbook_outdir}/xml:\n \tmkdir -p ${docbook_outdir}/xml\n@@ -239,11 +245,14 @@ doc-xml-validate-docbook: $(xml_sources)\n \t@echo \"Generating XML validation log...\"\n \t$(XMLLINT) $(XMLLINT_FLAGS) ${top_srcdir}/doc/xml/spine.xml\n \n-manual_xml = ${docbook_outdir}/xml/libstdc++-manual.xml\n+# XML, all one page\n+# Some info on canonicalization\n+# http://www.mail-archive.com/help-texinfo@gnu.org/msg00864.html\n+manual_xml = ${docbook_outdir}/xml/libstdc++-manual-single.xml\n doc-xml-single-docbook: $(xml_sources) ${docbook_outdir}/xml\n \t@echo \"Generating XML single...\"\n-\t$(XMLLINT) --xinclude --noent --noblanks \\\n-\t-o ${manual_xml} ${top_srcdir}/doc/xml/spine.xml\n+\t$(XMLLINT) --xinclude --noent --noblanks --nocdata --nsclean --c14n \\\n+\t${top_srcdir}/doc/xml/manual/spine.xml > ${manual_xml}\n \n # HTML, index plus chapters\n doc-html-docbook: $(xml_sources) ${docbook_outdir}/html\n@@ -267,13 +276,22 @@ doc-fo-docbook: $(xml_sources) ${docbook_outdir}/fo\n # PDF, via dblatex\n manual_pdf = ${docbook_outdir}/pdf/libstdc++-manual.pdf\n DBLATEX_FLAGS = --dump --verbose --pdf -o ${manual_pdf}\n-\n doc-pdf-docbook: doc-pdf-dblatex-docbook\n \n doc-pdf-dblatex-docbook: $(xml_sources) ${docbook_outdir}/pdf\n \t@echo \"Generating pdf dblatex files...\"\n \tdblatex $(DBLATEX_FLAGS) ${top_srcdir}/doc/xml/spine.xml\n \n+# Texinfo, via docbook2X\n+DB2TEXI_FLAGS = \\\n+\t--encoding=utf-8//TRANSLIT \\\n+\t--string-param output-file=\"libstdc++-manual\" \\\n+\t--string-param directory-category=\"GNU C++ Library\" \\\n+\t--string-param explicit-node-names=true \n+doc-texinfo-docbook: doc-xml-single-docbook ${docbook_outdir}/texinfo\n+\t@echo \"Generating texinfo files...\"\n+\tdb2x_docbook2texi $(DB2TEXI_FLAGS) ${manual_xml}\n+\n \n # Performance doc and graph configuration.\n # Assumes pychart, beautiful soup installed."}, {"sha": "fbdfb51ec01c54143005703875439b8bb8dc00fe", "filename": "libstdc++-v3/doc/Makefile.in", "status": "modified", "additions": 26, "deletions": 6, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/547f963b5a77e253a81de517b0d137e2a083f776/libstdc%2B%2B-v3%2Fdoc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/547f963b5a77e253a81de517b0d137e2a083f776/libstdc%2B%2B-v3%2Fdoc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdoc%2FMakefile.in?ref=547f963b5a77e253a81de517b0d137e2a083f776", "patch": "@@ -371,7 +371,11 @@ XMLLINT = xmllint\n LINT_FLAGS = --postvalid --debug --xinclude --noent --noblanks  --nonet --noout\n DTD_FLAGS = --dtdvalid http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd\n XMLLINT_FLAGS = $(LINT_FLAGS) $(DTD_FLAGS)\n-manual_xml = ${docbook_outdir}/xml/libstdc++-manual.xml\n+\n+# XML, all one page\n+# Some info on canonicalization\n+# http://www.mail-archive.com/help-texinfo@gnu.org/msg00864.html\n+manual_xml = ${docbook_outdir}/xml/libstdc++-manual-single.xml\n \n # HTML, all one page\n manual_html = ${docbook_outdir}/html/libstdc++-manual-single.html\n@@ -380,6 +384,14 @@ manual_html = ${docbook_outdir}/html/libstdc++-manual-single.html\n manual_pdf = ${docbook_outdir}/pdf/libstdc++-manual.pdf\n DBLATEX_FLAGS = --dump --verbose --pdf -o ${manual_pdf}\n \n+# Texinfo, via docbook2X\n+DB2TEXI_FLAGS = \\\n+\t--encoding=utf-8//TRANSLIT \\\n+\t--string-param output-file=\"libstdc++-manual\" \\\n+\t--string-param directory-category=\"GNU C++ Library\" \\\n+\t--string-param explicit-node-names=true \n+\n+\n # Performance doc and graph configuration.\n # Assumes pychart, beautiful soup installed.\n # Generates the plots and graphs for performance testing.\n@@ -572,6 +584,9 @@ doc-html: doc-html-docbook doc-html-doxygen\n \tcp -R ${docbook_outdir}/html ./libstdc++-manual.html\n \tcp -R ${doxygen_outdir}/html ./libstdc++-api.html\n \n+# TEXINFO\n+doc-texinfo: doc-texinfo-docbook\n+\n doc-html-doxygen:\n \t-(srcdir=`cd ${top_srcdir}; ${PWD_COMMAND}`; \\\n \t  builddir=`cd ..; ${PWD_COMMAND}`; \\\n@@ -634,14 +649,17 @@ stamp-latex-doxygen:\n \tfi\n \t$(STAMP) stamp-latex-doxygen\n \n+${docbook_outdir}/fo:\n+\tmkdir -p ${docbook_outdir}/fo\n+\n ${docbook_outdir}/html:\n \tmkdir -p ${docbook_outdir}/html\n \n ${docbook_outdir}/pdf:\n \tmkdir -p ${docbook_outdir}/pdf\n \n-${docbook_outdir}/fo:\n-\tmkdir -p ${docbook_outdir}/fo\n+${docbook_outdir}/texinfo:\n+\tmkdir -p ${docbook_outdir}/texinfo\n \n ${docbook_outdir}/xml:\n \tmkdir -p ${docbook_outdir}/xml\n@@ -650,8 +668,8 @@ doc-xml-validate-docbook: $(xml_sources)\n \t$(XMLLINT) $(XMLLINT_FLAGS) ${top_srcdir}/doc/xml/spine.xml\n doc-xml-single-docbook: $(xml_sources) ${docbook_outdir}/xml\n \t@echo \"Generating XML single...\"\n-\t$(XMLLINT) --xinclude --noent --noblanks \\\n-\t-o ${manual_xml} ${top_srcdir}/doc/xml/spine.xml\n+\t$(XMLLINT) --xinclude --noent --noblanks --nocdata --nsclean --c14n \\\n+\t${top_srcdir}/doc/xml/manual/spine.xml > ${manual_xml}\n \n # HTML, index plus chapters\n doc-html-docbook: $(xml_sources) ${docbook_outdir}/html\n@@ -668,12 +686,14 @@ doc-fo-docbook: $(xml_sources) ${docbook_outdir}/fo\n \t@echo \"Generating FO files...\"\n \t$(XSLTPROC) $(XSLTPROC_FLAGS) -o ${docbook_outdir}/fo/spine.fo \\\n \t$(XSL_FO_STYLE) ${top_srcdir}/doc/xml/spine.xml\n-\n doc-pdf-docbook: doc-pdf-dblatex-docbook\n \n doc-pdf-dblatex-docbook: $(xml_sources) ${docbook_outdir}/pdf\n \t@echo \"Generating pdf dblatex files...\"\n \tdblatex $(DBLATEX_FLAGS) ${top_srcdir}/doc/xml/spine.xml\n+doc-texinfo-docbook: doc-xml-single-docbook ${docbook_outdir}/texinfo\n+\t@echo \"Generating texinfo files...\"\n+\tdb2x_docbook2texi $(DB2TEXI_FLAGS) ${manual_xml}\n doc-html-performance:\n \t-@(chmod + ${doc_performance_script}; \\\n \t${doc_performance_script} ${top_srcdir} \\"}]}