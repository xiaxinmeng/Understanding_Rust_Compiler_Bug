{"sha": "8363b7738f923bff7a4ff0a58f2699fb3b40435d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM2M2I3NzM4ZjkyM2JmZjdhNGZmMGE1OGYyNjk5ZmIzYjQwNDM1ZA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2003-06-16T21:24:40Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-06-16T21:24:40Z"}, "message": "1-in.cc: Fix for systems with BUFSIZ != 8192.\n\n2003-06-16  Paolo Carlini  <pcarlini@unitus.it>\n\n\t* testsuite/27_io/basic_filebuf/sgetn/char/1-in.cc: Fix\n\tfor systems with BUFSIZ != 8192.\n\t* testsuite/27_io/basic_filebuf/sgetn/char/1-io.cc: Ditto.\n\t* testsuite/27_io/basic_filebuf/sgetn/char/1-out.cc:\n\tMinor tweaks.\n\nFrom-SVN: r68041", "tree": {"sha": "cd37e494e2157085e240e24ad33b7f59999bd878", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd37e494e2157085e240e24ad33b7f59999bd878"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8363b7738f923bff7a4ff0a58f2699fb3b40435d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8363b7738f923bff7a4ff0a58f2699fb3b40435d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8363b7738f923bff7a4ff0a58f2699fb3b40435d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8363b7738f923bff7a4ff0a58f2699fb3b40435d/comments", "author": null, "committer": null, "parents": [{"sha": "b57b79f767ad7d4ff784a597494be221700333cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b57b79f767ad7d4ff784a597494be221700333cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b57b79f767ad7d4ff784a597494be221700333cc"}], "stats": {"total": 31, "additions": 22, "deletions": 9}, "files": [{"sha": "b9df74030399b593e73b0332fb2db026abfa52c4", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=8363b7738f923bff7a4ff0a58f2699fb3b40435d", "patch": "@@ -1,3 +1,11 @@\n+2003-06-16  Paolo Carlini  <pcarlini@unitus.it>\n+\n+\t* testsuite/27_io/basic_filebuf/sgetn/char/1-in.cc: Fix\n+\tfor systems with BUFSIZ != 8192.\n+\t* testsuite/27_io/basic_filebuf/sgetn/char/1-io.cc: Ditto.\n+\t* testsuite/27_io/basic_filebuf/sgetn/char/1-out.cc:\n+\tMinor tweaks.\n+\n 2003-06-16  Andreas Jaeger  <aj@suse.de>\n \n \t* acinclude.m4 (GLIBCPP_CONFIGURE_TESTSUITE): Make"}, {"sha": "0f17624c58c6bce99541685472b37c795697f77b", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/sgetn/char/1-in.cc", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-in.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-in.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-in.cc?ref=8363b7738f923bff7a4ff0a58f2699fb3b40435d", "patch": "@@ -37,12 +37,12 @@ void test05()\n   typedef filebuf::int_type \tint_type;\n   typedef filebuf::traits_type \ttraits_type;\n \n-  bool \t\t\t\t\ttest = true;\n+  bool \t\t\t\ttest = true;\n \n   streamsize \t\t\tstrmsz_1, strmsz_2, strmsz_3;\n-  int \t\t\t\t\ti = 0, j = 0, k = 0;\n   char carray1[13] = \"\";\n   char carray2[8192] = \"\";\n+  char buffer[8192] = \"\";\n   int_type \t\t\tc1, c2, c3, c4;\n   \n   // streamsize sgetn(char_type *s, streamsize n)\n@@ -52,7 +52,10 @@ void test05()\n \n   // in \n   {\n-    constraint_filebuf fb_01; \n+    constraint_filebuf fb_01;\n+    // Need this since BUFSIZ is only guaranteed >= 255 and we want\n+    // to trigger the same underflow situation everywhere.\n+    fb_01.pubsetbuf(buffer, 8192);\n     fb_01.open(name_01, ios_base::in);\n     VERIFY( !fb_01.write_position() );\n     strmsz_1 = fb_01.in_avail(); // 8261"}, {"sha": "ff2663ef91158b41c1417e31958cf8af5459ccc8", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/sgetn/char/1-io.cc", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-io.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-io.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-io.cc?ref=8363b7738f923bff7a4ff0a58f2699fb3b40435d", "patch": "@@ -38,12 +38,12 @@ void test05()\n   typedef filebuf::int_type \tint_type;\n   typedef filebuf::traits_type \ttraits_type;\n \n-  bool \t\t\t\t\ttest = true;\n+  bool \t\t\t\ttest = true;\n \n   streamsize \t\t\tstrmsz_1, strmsz_2, strmsz_3;\n-  int \t\t\t\t\ti = 0, j = 0, k = 0;\n   char carray1[13] = \"\";\n   char carray2[8192] = \"\";\n+  char buffer[8192] = \"\";\n   int_type \t\t\tc1, c2, c3, c4;\n   \n   // streamsize sgetn(char_type *s, streamsize n)\n@@ -65,7 +65,10 @@ void test05()\n \n   // in | out 2\n   {\n-    constraint_filebuf fb_01; \n+    constraint_filebuf fb_01;\n+    // Need this since BUFSIZ is only guaranteed >= 255 and we want\n+    // to trigger the same underflow situation everywhere.\n+    fb_01.pubsetbuf(buffer, 8192);\n     fb_01.open(name_01, ios_base::in | ios_base::out);\n     VERIFY( fb_01.write_position() );\n     strmsz_1 = fb_01.in_avail();"}, {"sha": "7bd5e37e440f4c79ebbbe235cfbdd86236a519f0", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/sgetn/char/1-out.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-out.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8363b7738f923bff7a4ff0a58f2699fb3b40435d/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-out.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fsgetn%2Fchar%2F1-out.cc?ref=8363b7738f923bff7a4ff0a58f2699fb3b40435d", "patch": "@@ -37,10 +37,9 @@ void test05()\n   typedef filebuf::int_type \tint_type;\n   typedef filebuf::traits_type \ttraits_type;\n \n-  bool \t\t\t\t\ttest = true;\n+  bool \t\t\t\ttest = true;\n \n   streamsize \t\t\tstrmsz_1, strmsz_2, strmsz_3;\n-  int \t\t\t\t\ti = 0, j = 0, k = 0;\n   char carray1[13] = \"\";\n   char carray2[8192] = \"\";\n   int_type \t\t\tc1, c2, c3, c4;\n@@ -52,7 +51,7 @@ void test05()\n \n   // out\n   {\n-    constraint_filebuf fb_02; \n+    constraint_filebuf fb_02;\n     fb_02.open(name_02, ios_base::out | ios_base::trunc);\n     VERIFY( fb_02.write_position() );\n     VERIFY( !fb_02.read_position() );"}]}