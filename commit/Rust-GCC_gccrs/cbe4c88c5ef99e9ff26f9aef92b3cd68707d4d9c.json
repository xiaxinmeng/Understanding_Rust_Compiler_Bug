{"sha": "cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JlNGM4OGM1ZWY5OWU5ZmYyNmY5YWVmOTJiM2NkNjg3MDdkNGQ5Yw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2014-11-14T12:02:09Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2014-11-14T12:02:09Z"}, "message": "mangle.c (find_substitution): Look for abi_tag on class templates.\n\ngcc/cp:\n\t* mangle.c (find_substitution): Look for abi_tag on class templates.\n\ngcc/testsuite:\n\t* g++.dg/abi/abi-tag11.C: New.\n\nFrom-SVN: r217557", "tree": {"sha": "017766ed4bebcfb5b1632f1dc6e0ffea4be42f68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/017766ed4bebcfb5b1632f1dc6e0ffea4be42f68"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c7274165bd25121e2d7562718904f12126bf1b1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7274165bd25121e2d7562718904f12126bf1b1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7274165bd25121e2d7562718904f12126bf1b1e"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "ddef4ff68b21bd864e101000fe7518cea6747ecd", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "patch": "@@ -1,3 +1,7 @@\n+2014-11-14  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* mangle.c (find_substitution): Look for abi_tag on class templates.\n+\n 2014-11-13  Bernd Schmidt  <bernds@codesourcery.com>\n \t    Thomas Schwinge  <thomas@codesourcery.com>\n \t    Ilya Verbin  <ilya.verbin@intel.com>"}, {"sha": "576ad1d19780d1dea2cdeb16efbe25487a4866f8", "filename": "gcc/cp/mangle.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Fcp%2Fmangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Fcp%2Fmangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmangle.c?ref=cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "patch": "@@ -609,7 +609,7 @@ find_substitution (tree node)\n     }\n \n   tree tags = NULL_TREE;\n-  if (OVERLOAD_TYPE_P (node))\n+  if (OVERLOAD_TYPE_P (node) || DECL_CLASS_TEMPLATE_P (node))\n     tags = lookup_attribute (\"abi_tag\", TYPE_ATTRIBUTES (type));\n   /* Now check the list of available substitutions for this mangling\n      operation.  */"}, {"sha": "c7d7a904dc0ac2a8b63ff1dfac1e8419a8dfddc9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "patch": "@@ -1,3 +1,7 @@\n+2014-11-14  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* g++.dg/abi/abi-tag11.C: New.\n+\n 2014-11-14  Marek Polacek  <polacek@redhat.com>\n \n \t* c-c++-common/ubsan/overflow-negate-3.c: New test."}, {"sha": "36c1c9f0c099f44f3b039c479fe14d062c464f0c", "filename": "gcc/testsuite/g++.dg/abi/abi-tag11.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fabi-tag11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fabi-tag11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fabi-tag11.C?ref=cbe4c88c5ef99e9ff26f9aef92b3cd68707d4d9c", "patch": "@@ -0,0 +1,12 @@\n+// { dg-final { scan-assembler \"_Z1fSbB3fooIwSt11char_traitsIwESaIwEES3_\" } }\n+\n+namespace std {\n+  template <class T> struct char_traits {};\n+  template <class T> struct allocator {};\n+  template <class T, class U, class V>\n+  struct __attribute ((abi_tag (\"foo\"))) basic_string { };\n+  typedef basic_string<wchar_t,char_traits<wchar_t>,allocator<wchar_t> >\n+    wstring;\n+}\n+\n+void f(std::wstring,std::wstring) {}"}]}