{"sha": "b379e7b0e97d9355f3965c740270d9196efe1b2b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjM3OWU3YjBlOTdkOTM1NWYzOTY1Yzc0MDI3MGQ5MTk2ZWZlMWIyYg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2003-10-09T16:24:55Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-10-09T16:24:55Z"}, "message": "ClassLoader.java (setSigners): Implemented.\n\n\t* java/lang/ClassLoader.java (setSigners): Implemented.\n\t* boehm.cc (_Jv_MarkObj): Mark `signers' field.\n\t* java/lang/natClassLoader.cc (_Jv_InitNewClassFields):\n\tInitialize new fields.\n\t* java/lang/Class.java (getSigners): Now native.\n\t(setSigners): Declare.\n\t* java/lang/natClass.cc (getSigners): New method.\n\t(getSigners): Likewise.\n\t* java/lang/Class.h (Class::signers): New field.\n\t(Class::setSigners): New method.\n\nFrom-SVN: r72271", "tree": {"sha": "727452210eb531de02f4fcf33d696da39148dbce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/727452210eb531de02f4fcf33d696da39148dbce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b379e7b0e97d9355f3965c740270d9196efe1b2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b379e7b0e97d9355f3965c740270d9196efe1b2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b379e7b0e97d9355f3965c740270d9196efe1b2b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b379e7b0e97d9355f3965c740270d9196efe1b2b/comments", "author": null, "committer": null, "parents": [{"sha": "ae125b177e74ff5566bf16a80b4530d0c485c8c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae125b177e74ff5566bf16a80b4530d0c485c8c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae125b177e74ff5566bf16a80b4530d0c485c8c3"}], "stats": {"total": 43, "additions": 37, "deletions": 6}, "files": [{"sha": "0c6ec096682fce8d3992dfcf644745f80065dee3", "filename": "libjava/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=b379e7b0e97d9355f3965c740270d9196efe1b2b", "patch": "@@ -1,3 +1,16 @@\n+2003-10-09  Tom Tromey  <tromey@redhat.com>\n+\n+\t* java/lang/ClassLoader.java (setSigners): Implemented.\n+\t* boehm.cc (_Jv_MarkObj): Mark `signers' field.\n+\t* java/lang/natClassLoader.cc (_Jv_InitNewClassFields):\n+\tInitialize new fields.\n+\t* java/lang/Class.java (getSigners): Now native.\n+\t(setSigners): Declare.\n+\t* java/lang/natClass.cc (getSigners): New method.\n+\t(getSigners): Likewise.\n+\t* java/lang/Class.h (Class::signers): New field.\n+\t(Class::setSigners): New method.\n+\n 2003-10-09  Michael Koch  <konqueror@gmx.de>\n \n \t* java/rmi/server/RMIClassLoader.java:"}, {"sha": "732408855100d964da3bdaa666bf45b5c9a01d92", "filename": "libjava/boehm.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fboehm.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fboehm.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fboehm.cc?ref=b379e7b0e97d9355f3965c740270d9196efe1b2b", "patch": "@@ -206,6 +206,8 @@ _Jv_MarkObj (void *addr, void *msp, void *msl, void * /* env */)\n       MAYBE_MARK (p, mark_stack_ptr, mark_stack_limit, c, cDlabel);\n       p = (ptr_t) c->protectionDomain;\n       MAYBE_MARK (p, mark_stack_ptr, mark_stack_limit, c, cPlabel);\n+      p = (ptr_t) c->signers;\n+      MAYBE_MARK (p, mark_stack_ptr, mark_stack_limit, c, cSlabel);\n \n #ifdef INTERPRETER\n       if (_Jv_IsInterpretedClass (c))"}, {"sha": "5cf6e2c0ce3d1739ac0fd43c5a2e332c88d570f1", "filename": "libjava/java/lang/Class.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FClass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FClass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.h?ref=b379e7b0e97d9355f3965c740270d9196efe1b2b", "patch": "@@ -197,6 +197,7 @@ class java::lang::Class : public java::lang::Object\n   java::net::URL        *getResource (jstring resourceName);\n   java::io::InputStream *getResourceAsStream (jstring resourceName);\n   JArray<jobject> *getSigners (void);\n+  void setSigners(JArray<jobject> *);\n \n   inline jclass getSuperclass (void)\n     {\n@@ -433,6 +434,8 @@ class java::lang::Class : public java::lang::Object\n   jclass arrayclass;\n   // Security Domain to which this class belongs (or null).\n   java::security::ProtectionDomain *protectionDomain;\n+  // Signers of this class (or null).\n+  JArray<jobject> *signers;\n   // Used by Jv_PopClass and _Jv_PushClass to communicate with StackTrace.\n   jclass chain;\n };"}, {"sha": "6fd4ff07d48634d2eb496206b6f543abdf934e9e", "filename": "libjava/java/lang/Class.java", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FClass.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FClass.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.java?ref=b379e7b0e97d9355f3965c740270d9196efe1b2b", "patch": "@@ -193,11 +193,8 @@ private String resourcePath (String resourceName)\n       return packageName.substring (0, end+1) + resourceName;\n   }\n \n-  // FIXME: implement.  Requires java.security.\n-  public Object[] getSigners ()\n-  {\n-    return null;\n-  }\n+  public native Object[] getSigners ();\n+  native void setSigners(Object[] signers);\n \n   public native Class getSuperclass ();\n   public native boolean isArray ();"}, {"sha": "7bbd6412554c4f17a8bb1a2a0a2fe81c280bfff3", "filename": "libjava/java/lang/ClassLoader.java", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FClassLoader.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FClassLoader.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClassLoader.java?ref=b379e7b0e97d9355f3965c740270d9196efe1b2b", "patch": "@@ -502,7 +502,7 @@ public final ClassLoader getParent()\n    */\n   protected final void setSigners(Class c, Object[] signers)\n   {\n-    //    c.setSigners(signers);\n+    c.setSigners(signers);\n   }\n \n   /**"}, {"sha": "4c71ed1cea03fd4272fbe98b84665db6fc705504", "filename": "libjava/java/lang/natClass.cc", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FnatClass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FnatClass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClass.cc?ref=b379e7b0e97d9355f3965c740270d9196efe1b2b", "patch": "@@ -1534,6 +1534,18 @@ java::lang::Class::getProtectionDomain0 ()\n   return protectionDomain;\n }\n \n+JArray<jobject> *\n+java::lang::Class::getSigners()\n+{\n+  return signers;\n+}\n+\n+void\n+java::lang::Class::setSigners(JArray<jobject> *s)\n+{\n+  signers = s;\n+}\n+\n // Functions for indirect dispatch (symbolic virtual binding) support.\n \n // There are two tables, atable and otable.  atable is an array of"}, {"sha": "10b4bc64e23ab3ee81218a5eb598ab8526cb727e", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b379e7b0e97d9355f3965c740270d9196efe1b2b/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=b379e7b0e97d9355f3965c740270d9196efe1b2b", "patch": "@@ -539,6 +539,9 @@ _Jv_InitNewClassFields (jclass ret)\n   ret->field_count = 0;\n   ret->static_field_count = 0;\n   ret->vtable = NULL;\n+  ret->otable_syms = NULL;\n+  ret->atable = NULL;\n+  ret->atable_syms = NULL;\n   ret->interfaces = NULL;\n   ret->loader = NULL;\n   ret->interface_count = 0;\n@@ -549,6 +552,7 @@ _Jv_InitNewClassFields (jclass ret)\n   ret->idt = NULL;\n   ret->arrayclass = NULL;\n   ret->protectionDomain = NULL;\n+  ret->signers = NULL;\n   ret->chain = NULL;\n }\n "}]}