{"sha": "9181f8db39ecfa09bf38f8df8c59eddb3a0886cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTE4MWY4ZGIzOWVjZmEwOWJmMzhmOGRmOGM1OWVkZGIzYTA4ODZjYw==", "commit": {"author": {"name": "Jeff Knaggs", "email": "jknaggs@redhat.com", "date": "2002-03-22T22:03:04Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2002-03-22T22:03:04Z"}, "message": "typeck.c (expand_ptrmemfunc_cst): Scale idx down to an index into the vtable_entry array regardless of...\n\n* typeck.c (expand_ptrmemfunc_cst): Scale idx down to an index\ninto the vtable_entry array regardless of\nTARGET_PTRMEMFUNC_VBIT_LOCATION.\n\nFrom-SVN: r51192", "tree": {"sha": "73849e0d621e9d0f68227345dc0752890782ddc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/73849e0d621e9d0f68227345dc0752890782ddc8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc/comments", "author": null, "committer": null, "parents": [{"sha": "7f48c9e1504132e59676f4fda5c61fd26c293f52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f48c9e1504132e59676f4fda5c61fd26c293f52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f48c9e1504132e59676f4fda5c61fd26c293f52"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "87679b8fce5495fc157fed51a5cb8b24f1517e3a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9181f8db39ecfa09bf38f8df8c59eddb3a0886cc", "patch": "@@ -1,3 +1,9 @@\n+2002-03-22  Jeff Knaggs  <jknaggs@redhat.com>\n+\n+\t* typeck.c (expand_ptrmemfunc_cst): Scale idx down to an index\n+\tinto the vtable_entry array regardless of\n+\tTARGET_PTRMEMFUNC_VBIT_LOCATION.\n+\n 2002-03-21  Aldy Hernandez  <aldyh@redhat.com>\n \n         * tree.c (cp_cannot_inline_tree_fn): Same."}, {"sha": "767f90d72cb99eea692256751d7c4e41869ff99e", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9181f8db39ecfa09bf38f8df8c59eddb3a0886cc/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=9181f8db39ecfa09bf38f8df8c59eddb3a0886cc", "patch": "@@ -2890,19 +2890,18 @@ get_member_function_from_ptrfunc (instance_ptrptr, function)\n \t load-with-sign-extend, while the second used normal load then\n \t shift to sign-extend.  An optimizer flaw, perhaps, but it's\n \t easier to make this change.  */\n+      idx = cp_build_binary_op (TRUNC_DIV_EXPR, \n+\t\t\t\tbuild1 (NOP_EXPR, vtable_index_type, e3),\n+\t\t\t\tTYPE_SIZE_UNIT (vtable_entry_type));\n       switch (TARGET_PTRMEMFUNC_VBIT_LOCATION)\n \t{\n \tcase ptrmemfunc_vbit_in_pfn:\n-\t  idx = cp_build_binary_op (TRUNC_DIV_EXPR, \n-\t\t\t\t    build1 (NOP_EXPR, vtable_index_type, e3),\n-\t\t\t\t    TYPE_SIZE_UNIT (vtable_entry_type));\n \t  e1 = cp_build_binary_op (BIT_AND_EXPR,\n \t\t\t\t   build1 (NOP_EXPR, vtable_index_type, e3),\n \t\t\t\t   integer_one_node);\n \t  break;\n \n \tcase ptrmemfunc_vbit_in_delta:\n-\t  idx = build1 (NOP_EXPR, vtable_index_type, e3);\n \t  e1 = cp_build_binary_op (BIT_AND_EXPR,\n \t\t\t\t   delta, integer_one_node);\n \t  delta = cp_build_binary_op (RSHIFT_EXPR,"}]}