{"sha": "0cc063af32311944d66b6537aeade08038cabba9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNjMDYzYWYzMjMxMTk0NGQ2NmI2NTM3YWVhZGUwODAzOGNhYmJhOQ==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2019-12-10T21:59:09Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2019-12-10T21:59:09Z"}, "message": "re PR fortran/91643 (ICE in gfc_trans_create_temp_array, at fortran/trans-array.c:1265)\n\n2019-12-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n    PR fortran/91643\n    * trans-array.c (gfc_conv_array_parameter): Do not repack\n    an assumed rank dummy argument.\n\n2019-12-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n    PR fortran/91643\n    * gfortran.dg/assumed_rank_18.f90: New test.\n\nFrom-SVN: r279203", "tree": {"sha": "d7705b07002e84bfd4aea7d9f78005a4adfea35b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7705b07002e84bfd4aea7d9f78005a4adfea35b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0cc063af32311944d66b6537aeade08038cabba9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cc063af32311944d66b6537aeade08038cabba9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cc063af32311944d66b6537aeade08038cabba9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cc063af32311944d66b6537aeade08038cabba9/comments", "author": null, "committer": null, "parents": [{"sha": "6004c17b4d1a2dd1e1936b2e705a5ccfb6e48ab2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6004c17b4d1a2dd1e1936b2e705a5ccfb6e48ab2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6004c17b4d1a2dd1e1936b2e705a5ccfb6e48ab2"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "77675ab72b5d4f80a9793038b5f2962c24877d3e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=0cc063af32311944d66b6537aeade08038cabba9", "patch": "@@ -1,3 +1,9 @@\n+2019-12-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/91643\n+\t* trans-array.c (gfc_conv_array_parameter): Do not repack\n+\tan assumed rank dummy argument.\n+\n 2019-12-10  Martin Liska  <mliska@suse.cz>\n \n \tPR fortran/92874"}, {"sha": "e879ea12b5ccbdecf20d960826fa789f58e3f7db", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=0cc063af32311944d66b6537aeade08038cabba9", "patch": "@@ -8141,6 +8141,8 @@ gfc_conv_array_parameter (gfc_se * se, gfc_expr * expr, bool g77,\n \n       if (g77 && optimize && !optimize_size && expr->expr_type == EXPR_VARIABLE\n \t  && !is_pointer (expr) && ! gfc_has_dimen_vector_ref (expr)\n+\t  && !(expr->symtree->n.sym->as\n+\t       && expr->symtree->n.sym->as->type == AS_ASSUMED_RANK)\n \t  && (fsym == NULL || fsym->ts.type != BT_ASSUMED))\n \t{\n \t  gfc_conv_subref_array_arg (se, expr, g77,"}, {"sha": "b47cb9af89f64b7e9e99533410a4af3b9cea4586", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0cc063af32311944d66b6537aeade08038cabba9", "patch": "@@ -1,3 +1,8 @@\n+2019-12-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/91643\n+\t* gfortran.dg/assumed_rank_18.f90: New test.\n+\n 2019-12-10  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/92882"}, {"sha": "a8fa3ff78d917e993a6a20035ff65eda337ea9f4", "filename": "gcc/testsuite/gfortran.dg/assumed_rank_18.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_rank_18.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cc063af32311944d66b6537aeade08038cabba9/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_rank_18.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_rank_18.f90?ref=0cc063af32311944d66b6537aeade08038cabba9", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! PR 91643 - this used to cause an ICE.\n+! Original test case by Gerhard Steinmetz.\n+program p\n+   real :: z(3) = [1.0, 2.0, 3.0]\n+   call g(z)\n+contains\n+   subroutine g(x)\n+      real :: x(..)\n+      call h(x)\n+   end\n+   subroutine h(x)\n+      real :: x(*)\n+      if (x(1) /= 1.0) stop 1\n+   end\n+end"}]}