{"sha": "15bbad92434a184a0baac0c93c7111e6e7fcd9c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTViYmFkOTI0MzRhMTg0YTBiYWFjMGM5M2M3MTExZTZlN2ZjZDljMg==", "commit": {"author": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2019-09-30T07:54:52Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2019-09-30T07:54:52Z"}, "message": "config.gcc: Use the secure-plt on FreeBSD 13 and upwards for 32-bit PowerPC.\n\n2019-09-30  Andreas Tobler  <andreast@gcc.gnu.org>\n\n\t* config.gcc: Use the secure-plt on FreeBSD 13 and upwards for\n\t32-bit PowerPC.\n\tDefine TARGET_FREEBSD32_SECURE_PLT for 64-bit PowerPC.\n\t* config/rs6000/t-freebsd64: Make use of the above define and build\n\tthe 32-bit libraries with secure-plt.\n\nFrom-SVN: r276295", "tree": {"sha": "993759c721c79e6afaba2999f4619df18d093f4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/993759c721c79e6afaba2999f4619df18d093f4a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15bbad92434a184a0baac0c93c7111e6e7fcd9c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15bbad92434a184a0baac0c93c7111e6e7fcd9c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15bbad92434a184a0baac0c93c7111e6e7fcd9c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15bbad92434a184a0baac0c93c7111e6e7fcd9c2/comments", "author": null, "committer": null, "parents": [{"sha": "6a556ba414832a4ec9b1ea66d2a40940ba74706e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a556ba414832a4ec9b1ea66d2a40940ba74706e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a556ba414832a4ec9b1ea66d2a40940ba74706e"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "099d1b9a89fbcf6c62db7ee2addfda7ae4b50e6f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15bbad92434a184a0baac0c93c7111e6e7fcd9c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15bbad92434a184a0baac0c93c7111e6e7fcd9c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=15bbad92434a184a0baac0c93c7111e6e7fcd9c2", "patch": "@@ -1,3 +1,11 @@\n+2019-09-30  Andreas Tobler  <andreast@gcc.gnu.org>\n+\n+\t* config.gcc: Use the secure-plt on FreeBSD 13 and upwards for\n+\t32-bit PowerPC.\n+\tDefine TARGET_FREEBSD32_SECURE_PLT for 64-bit PowerPC.\n+\t* config/rs6000/t-freebsd64: Make use of the above define and build\n+\tthe 32-bit libraries with secure-plt.\n+\n 2019-09-30  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/91931"}, {"sha": "481bc9586a7bddd6088d2ae0a12f9d6b8f50cdab", "filename": "gcc/config.gcc", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15bbad92434a184a0baac0c93c7111e6e7fcd9c2/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15bbad92434a184a0baac0c93c7111e6e7fcd9c2/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=15bbad92434a184a0baac0c93c7111e6e7fcd9c2", "patch": "@@ -2687,8 +2687,14 @@ powerpc*-*-freebsd*)\n \t    \ttm_file=\"${tm_file} rs6000/default64.h rs6000/freebsd64.h\"\n \t\ttmake_file=\"${tmake_file} rs6000/t-freebsd64\"\n \t\textra_options=\"${extra_options} rs6000/linux64.opt\"\n+\t\tif test $fbsd_major -ge 13; then\n+\t\t    tm_defines=\"${tm_defines} TARGET_FREEBSD32_SECURE_PLT=1\"\n+\t\tfi\n \t\t;;\n \t     *)\n+\t\tif test $fbsd_major -ge 13; then\n+\t\t    tm_file=\"rs6000/secureplt.h ${tm_file}\"\n+\t\tfi\n \t        tm_file=\"${tm_file} rs6000/freebsd.h\"\n \t\t;;\n \tesac"}, {"sha": "dd0d5bb8ee2b50f785287ed687c404e431646dfd", "filename": "gcc/config/rs6000/t-freebsd64", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15bbad92434a184a0baac0c93c7111e6e7fcd9c2/gcc%2Fconfig%2Frs6000%2Ft-freebsd64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15bbad92434a184a0baac0c93c7111e6e7fcd9c2/gcc%2Fconfig%2Frs6000%2Ft-freebsd64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-freebsd64?ref=15bbad92434a184a0baac0c93c7111e6e7fcd9c2", "patch": "@@ -27,3 +27,6 @@ MULTILIB_EXTRA_OPTS     = fPIC mstrict-align\n MULTILIB_EXCEPTIONS     =\n MULTILIB_OSDIRNAMES\t= ../lib32\n \n+SECURE_PLT = $(if $(filter TARGET_FREEBSD32_SECURE_PLT=1, $(tm_defines)),msecure-plt)\n+\n+MULTILIB_EXTRA_OPTS += $(SECURE_PLT)"}]}