{"sha": "62e66c6a6cc52dc0e014141d369cff52757cd7ae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjJlNjZjNmE2Y2M1MmRjMGUwMTQxNDFkMzY5Y2ZmNTI3NTdjZDdhZQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2021-07-26T16:07:14Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2021-08-05T11:51:14Z"}, "message": "arm: ensure the arch_name is always set for the build target\n\nThis should never happen now if GCC is invoked by the driver, but in\nthe unusual case of calling cc1 (or its ilk) directly from the command\nline the build target's arch_name string can remain NULL.  This can\ncomplicate later processing meaning that we need to check for this\ncase explicitly in some circumstances.  Nothing should rely on this\nbehaviour, so it's simpler to always set the arch_name when\nconfiguring the build target and be done with it.\n\ngcc:\n\n\t* config/arm/arm.c (arm_configure_build_target): Ensure the target's\n\tarch_name is always set.", "tree": {"sha": "9a82d95ef5339dc67efea82a1ec5c1b67b9ac636", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9a82d95ef5339dc67efea82a1ec5c1b67b9ac636"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62e66c6a6cc52dc0e014141d369cff52757cd7ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62e66c6a6cc52dc0e014141d369cff52757cd7ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62e66c6a6cc52dc0e014141d369cff52757cd7ae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62e66c6a6cc52dc0e014141d369cff52757cd7ae/comments", "author": null, "committer": null, "parents": [{"sha": "0c3aab7f2a394b69a0cfd4852e33f11d9eb7e737", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c3aab7f2a394b69a0cfd4852e33f11d9eb7e737", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c3aab7f2a394b69a0cfd4852e33f11d9eb7e737"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "b2dd58d875178a17154bd6228be809fd6cdbbd63", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62e66c6a6cc52dc0e014141d369cff52757cd7ae/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62e66c6a6cc52dc0e014141d369cff52757cd7ae/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=62e66c6a6cc52dc0e014141d369cff52757cd7ae", "patch": "@@ -3432,6 +3432,8 @@ arm_configure_build_target (struct arm_build_target *target,\n   const cpu_tune *tune_data = &all_tunes[arm_selected_tune - all_cores];\n \n   /* Finish initializing the target structure.  */\n+  if (!target->arch_name)\n+    target->arch_name = arm_selected_arch->common.name;\n   target->arch_pp_name = arm_selected_arch->arch;\n   target->base_arch = arm_selected_arch->base_arch;\n   target->profile = arm_selected_arch->profile;"}]}