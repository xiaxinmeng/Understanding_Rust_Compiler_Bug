{"sha": "ce701d1bd7218c2c055840da396761814cf2fdf6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U3MDFkMWJkNzIxOGMyYzA1NTg0MGRhMzk2NzYxODE0Y2YyZmRmNg==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.co.uk", "date": "2000-09-08T09:41:07Z"}, "committer": {"name": "Bernd Schmidt", "email": "crux@gcc.gnu.org", "date": "2000-09-08T09:41:07Z"}, "message": "Fix computation of need_mode in choose_reload_regs.\n\nFrom-SVN: r36264", "tree": {"sha": "ee0af2c78bba9dd0a0782764cd3101f0cb7d711f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee0af2c78bba9dd0a0782764cd3101f0cb7d711f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce701d1bd7218c2c055840da396761814cf2fdf6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce701d1bd7218c2c055840da396761814cf2fdf6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce701d1bd7218c2c055840da396761814cf2fdf6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce701d1bd7218c2c055840da396761814cf2fdf6/comments", "author": null, "committer": null, "parents": [{"sha": "82be40f7eb85596f2d654e7eeee000972022d344", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82be40f7eb85596f2d654e7eeee000972022d344", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82be40f7eb85596f2d654e7eeee000972022d344"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "288f380afda9dadd0f56d2057fb6276db4daf1a1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce701d1bd7218c2c055840da396761814cf2fdf6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce701d1bd7218c2c055840da396761814cf2fdf6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ce701d1bd7218c2c055840da396761814cf2fdf6", "patch": "@@ -2,6 +2,8 @@\n \n \t* combine.c (combine_simplify_rtx): Try to simplify VEC_SELECT of a\n \tVEC_CONCAT.\n+\tFrom Richard Henderson:\n+\t* reload1.c (choose_reload_regs): Compute need_mode properly.\n \n 2000-09-07  Richard Henderson  <rth@cygnus.com>\n "}, {"sha": "fb840477ba76097ee6651e007aff89c6137cd9d7", "filename": "gcc/reload1.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce701d1bd7218c2c055840da396761814cf2fdf6/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce701d1bd7218c2c055840da396761814cf2fdf6/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=ce701d1bd7218c2c055840da396761814cf2fdf6", "patch": "@@ -5304,8 +5304,13 @@ choose_reload_regs (chain)\n \t\t  i = REGNO (last_reg) + word;\n \t\t  last_class = REGNO_REG_CLASS (i);\n \n-\t\t  need_mode = smallest_mode_for_size ((word+1) * UNITS_PER_WORD,\n-\t\t\t\t\t\t      GET_MODE_CLASS (mode));\n+\t\t  if (word == 0)\n+\t\t    need_mode = mode;\n+\t\t  else\n+\t\t    need_mode\n+\t\t      = smallest_mode_for_size (GET_MODE_SIZE (mode)\n+\t\t\t\t\t\t+ word * UNITS_PER_WORD,\n+\t\t\t\t\t\tGET_MODE_CLASS (mode));\n \n \t\t  if (\n #ifdef CLASS_CANNOT_CHANGE_MODE"}]}