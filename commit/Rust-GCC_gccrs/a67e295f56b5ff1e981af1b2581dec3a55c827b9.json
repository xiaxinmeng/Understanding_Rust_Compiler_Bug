{"sha": "a67e295f56b5ff1e981af1b2581dec3a55c827b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTY3ZTI5NWY1NmI1ZmYxZTk4MWFmMWIyNTgxZGVjM2E1NWM4MjdiOQ==", "commit": {"author": {"name": "Michael Koch", "email": "konqueror@gmx.de", "date": "2004-01-06T08:54:20Z"}, "committer": {"name": "Michael Koch", "email": "mkoch@gcc.gnu.org", "date": "2004-01-06T08:54:20Z"}, "message": "2004-01-06  Michael Koch  <konqueror@gmx.de>\n\n\t* java/net/URLConnection.java\n\t(contentHandler): Removed.\n\t(locale): Removed.\n\t(getHeaderFields): Return an empty map instead of null.\n\t(getContent): Connect if needed, renamed \"cType\" to \"type\" and\n\t\"contentHandler\" to \"ch\" and made it a local variable.\n\t(getPermission): Don't use package in class name.\n\t(setDefaultRequestProperty): Fixed typo in documentation.\n\t(initializeDateFormats): Made locale a local variable.\n\nFrom-SVN: r75466", "tree": {"sha": "1cfd998d0656b2ae8840635867e1bd1c0fe4cd22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1cfd998d0656b2ae8840635867e1bd1c0fe4cd22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a67e295f56b5ff1e981af1b2581dec3a55c827b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a67e295f56b5ff1e981af1b2581dec3a55c827b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a67e295f56b5ff1e981af1b2581dec3a55c827b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a67e295f56b5ff1e981af1b2581dec3a55c827b9/comments", "author": null, "committer": null, "parents": [{"sha": "907cdc7fad039a88c619a92107186ef03b9a816f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/907cdc7fad039a88c619a92107186ef03b9a816f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/907cdc7fad039a88c619a92107186ef03b9a816f"}], "stats": {"total": 37, "additions": 26, "deletions": 11}, "files": [{"sha": "4aec8fba261bd062830bd7566c282c0648553350", "filename": "libjava/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a67e295f56b5ff1e981af1b2581dec3a55c827b9/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a67e295f56b5ff1e981af1b2581dec3a55c827b9/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a67e295f56b5ff1e981af1b2581dec3a55c827b9", "patch": "@@ -1,3 +1,15 @@\n+2004-01-06  Michael Koch  <konqueror@gmx.de>\n+\n+\t* java/net/URLConnection.java\n+\t(contentHandler): Removed.\n+\t(locale): Removed.\n+\t(getHeaderFields): Return an empty map instead of null.\n+\t(getContent): Connect if needed, renamed \"cType\" to \"type\" and\n+\t\"contentHandler\" to \"ch\" and made it a local variable.\n+\t(getPermission): Don't use package in class name.\n+\t(setDefaultRequestProperty): Fixed typo in documentation.\n+\t(initializeDateFormats): Made locale a local variable.\n+\n 2004-01-06  Michael Koch  <konqueror@gmx.de>\n \n \t* java/lang/Package.java"}, {"sha": "4707d9cf3a9db06c16f04531e5580302293ae1fe", "filename": "libjava/java/net/URLConnection.java", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a67e295f56b5ff1e981af1b2581dec3a55c827b9/libjava%2Fjava%2Fnet%2FURLConnection.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a67e295f56b5ff1e981af1b2581dec3a55c827b9/libjava%2Fjava%2Fnet%2FURLConnection.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FURLConnection.java?ref=a67e295f56b5ff1e981af1b2581dec3a55c827b9", "patch": "@@ -41,8 +41,8 @@\n import java.io.InputStream;\n import java.io.IOException;\n import java.io.OutputStream;\n-import java.security.Permission;\n import java.security.AllPermission;\n+import java.security.Permission;\n import java.text.ParsePosition;\n import java.text.SimpleDateFormat;\n import java.util.Collections;\n@@ -165,9 +165,7 @@\n    */\n   protected URL url;\n \n-  private static ContentHandler contentHandler;\n   private static Hashtable handlers = new Hashtable();\n-  private static Locale locale; \n   private static SimpleDateFormat dateFormat1, dateFormat2, dateFormat3;\n   private static boolean dateformats_initialized = false;\n \n@@ -315,7 +313,7 @@ public String getHeaderField(String name)\n   public Map getHeaderFields()\n   {\n     // Subclasses for specific protocols override this.\n-    return null;\n+    return Collections.EMPTY_MAP;\n   }\n \n   /**\n@@ -419,16 +417,20 @@ public String getHeaderFieldKey (int index)\n    */\n   public Object getContent() throws IOException\n   {\n+    if (!connected)\n+      connect();\n+\n     // FIXME: Doc indicates that other criteria should be applied as\n     // heuristics to determine the true content type, e.g. see \n     // guessContentTypeFromName() and guessContentTypeFromStream methods\n     // as well as FileNameMap class & fileNameMap field & get/set methods.\n-    String cType = getContentType();\n-    contentHandler = setContentHandler(cType);\n-    if (contentHandler == null)\n+    String type = getContentType();\n+    ContentHandler ch = setContentHandler(type);\n+\n+    if (ch == null)\n       return getInputStream();\n \n-    return contentHandler.getContent(this);\n+    return ch.getContent(this);\n   }\n \n   /**\n@@ -463,7 +465,7 @@ public Object getContent(Class[] classes) throws IOException\n   public Permission getPermission() throws IOException\n   {\n     // Subclasses may override this.\n-    return new java.security.AllPermission();\n+    return new AllPermission();\n   }\n \n   /**\n@@ -803,7 +805,7 @@ public Map getRequestProperties()\n    * @deprecated 1.3 The method setRequestProperty should be used instead.\n    * This method does nothing now.\n    *\n-   * @see URLConnectionr#setRequestProperty(String key, String value)\n+   * @see URLConnection#setRequestProperty(String key, String value)\n    */\n   public static void setDefaultRequestProperty (String key, String value)\n   {\n@@ -1036,7 +1038,8 @@ private synchronized void initializeDateFormats()\n   {\n     if (dateformats_initialized)\n       return;\n-    locale = new Locale(\"En\", \"Us\", \"Unix\");\n+\n+    Locale locale = new Locale(\"En\", \"Us\", \"Unix\");\n     dateFormat1 = new SimpleDateFormat(\"EEE, dd MMM yyyy hh:mm:ss 'GMT'\", \n                                        locale);\n     dateFormat2 = new SimpleDateFormat(\"EEEE, dd-MMM-yy hh:mm:ss 'GMT'\", "}]}