{"sha": "e00388458d34ab0954df5d12c9d45ee0fd794e58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTAwMzg4NDU4ZDM0YWIwOTU0ZGY1ZDEyYzlkNDVlZTBmZDc5NGU1OA==", "commit": {"author": {"name": "Andrew Haley", "email": "aph@redhat.com", "date": "2005-12-08T13:52:39Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2005-12-08T13:52:39Z"}, "message": "java-tree.h (enum java_tree_index): Add JTI_SOFT_NOSUCHFIELD_NODE.\n\n2005-12-08  Andrew Haley  <aph@redhat.com>\n\n\t* java-tree.h (enum java_tree_index): Add JTI_SOFT_NOSUCHFIELD_NODE.\n\t(soft_abstractmethod_node): New.\n\t* expr.c (build_field_ref): Add in-line check for missing field.\n\t* decl.c (java_init_decl_processing): Add soft_nosuchfield_node.\n\n2005-12-08  Andrew Haley  <aph@redhat.com>\n\n\t* java/lang/Object.h (throwNoSuchMethodError): New method.\n\t* java/lang/Object.java (throwNoSuchMethodError): New method.\n\t* include/jvm.h (_Jv_ThrowNoSuchFieldError): Declare.\n\t* link.cc (_Jv_ThrowNoSuchFieldError): New.\n\t(link_symbol_table): Don't throw a NoSuchFieldError if a field is\n\tmissing.  Instead, set the otable entry to zero.\n\t(link_symbol_table): If we don't find a nonstatic method, insert\n\tthe vtable offset of Object.throwNoSuchMethodError() into the\n\totable.\n\n\n[[Split portion of a mixed commit.]]\n\nFrom-SVN: r108230.2", "tree": {"sha": "fce2e1ab440f686a57534e6eac2bcc137e816805", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fce2e1ab440f686a57534e6eac2bcc137e816805"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e00388458d34ab0954df5d12c9d45ee0fd794e58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e00388458d34ab0954df5d12c9d45ee0fd794e58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e00388458d34ab0954df5d12c9d45ee0fd794e58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e00388458d34ab0954df5d12c9d45ee0fd794e58/comments", "author": {"login": "theRealAph", "id": 254637, "node_id": "MDQ6VXNlcjI1NDYzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/254637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theRealAph", "html_url": "https://github.com/theRealAph", "followers_url": "https://api.github.com/users/theRealAph/followers", "following_url": "https://api.github.com/users/theRealAph/following{/other_user}", "gists_url": "https://api.github.com/users/theRealAph/gists{/gist_id}", "starred_url": "https://api.github.com/users/theRealAph/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theRealAph/subscriptions", "organizations_url": "https://api.github.com/users/theRealAph/orgs", "repos_url": "https://api.github.com/users/theRealAph/repos", "events_url": "https://api.github.com/users/theRealAph/events{/privacy}", "received_events_url": "https://api.github.com/users/theRealAph/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ac3ebe93b6ba2eb7c6b8f4f9e6bc2eb253fe586c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac3ebe93b6ba2eb7c6b8f4f9e6bc2eb253fe586c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac3ebe93b6ba2eb7c6b8f4f9e6bc2eb253fe586c"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "9e01fd090226784d4a0b87b6a954bfb8393923f5", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=e00388458d34ab0954df5d12c9d45ee0fd794e58", "patch": "@@ -1,3 +1,10 @@\n+2005-12-08  Andrew Haley  <aph@redhat.com>\n+\n+\t* java-tree.h (enum java_tree_index): Add JTI_SOFT_NOSUCHFIELD_NODE.\n+\t(soft_abstractmethod_node): New.\n+\t* expr.c (build_field_ref): Add in-line check for missing field.\n+\t* decl.c (java_init_decl_processing): Add soft_nosuchfield_node.\n+\n 2005-12-07  Rafael \ufffdvila de Esp\ufffdndola  <rafael.espindola@gmail.com>\n \n \t* Make-lang.in (java.all.build, java.install-normal): Remove."}, {"sha": "7ef1325be907c2cf2237ee343893f7fdac6855bc", "filename": "gcc/java/decl.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fdecl.c?ref=e00388458d34ab0954df5d12c9d45ee0fd794e58", "patch": "@@ -1116,6 +1116,15 @@ java_init_decl_processing (void)\n   TREE_THIS_VOLATILE (soft_abstractmethod_node) = 1;\n   TREE_SIDE_EFFECTS (soft_abstractmethod_node) = 1;\n \n+  soft_nosuchfield_node\n+    = builtin_function (\"_Jv_ThrowNoSuchFieldError\",\n+\t\t\tbuild_function_type (void_type_node, endlink),\n+\t\t\t0, NOT_BUILT_IN, NULL, NULL_TREE);\n+  /* Mark soft_nosuchfield_node as a `noreturn' function with side\n+     effects.  */\n+  TREE_THIS_VOLATILE (soft_nosuchfield_node) = 1;\n+  TREE_SIDE_EFFECTS (soft_nosuchfield_node) = 1;\n+\n   t = tree_cons (NULL_TREE, class_ptr_type,\n \t\t tree_cons (NULL_TREE, object_ptr_type_node, endlink));\n   soft_checkcast_node"}, {"sha": "e7b299245a1476486eebe642ec74adcff035c67e", "filename": "gcc/java/expr.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=e00388458d34ab0954df5d12c9d45ee0fd794e58", "patch": "@@ -1703,6 +1703,17 @@ build_field_ref (tree self_value, tree self_class, tree name)\n \t\t      NULL_TREE, NULL_TREE);\n \t  tree address;\n \n+\t  if (DECL_CONTEXT (field_decl) != output_class)\n+\t    field_offset\n+\t      = build3 (COND_EXPR, TREE_TYPE (field_offset),\n+\t\t\tbuild2 (EQ_EXPR, boolean_type_node,\n+\t\t\t\tfield_offset, integer_zero_node),\n+\t\t\tbuild3 (CALL_EXPR, void_type_node, \n+\t\t\t\tbuild_address_of (soft_nosuchfield_node),\n+\t\t\t\tbuild_tree_list (NULL_TREE, otable_index), \n+\t\t\t\tNULL_TREE),\n+\t\t\tfield_offset);\n+\t  \n \t  field_offset = fold (convert (sizetype, field_offset));\n \t  address \n \t    = fold_build2 (PLUS_EXPR, "}, {"sha": "d421b514a464dc760bdc6c4971a675f5dd4d4514", "filename": "gcc/java/java-tree.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2Fjava-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00388458d34ab0954df5d12c9d45ee0fd794e58/gcc%2Fjava%2Fjava-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjava-tree.h?ref=e00388458d34ab0954df5d12c9d45ee0fd794e58", "patch": "@@ -386,6 +386,7 @@ enum java_tree_index\n   JTI_SOFT_BADARRAYINDEX_NODE,\n   JTI_SOFT_NULLPOINTER_NODE,\n   JTI_SOFT_ABSTRACTMETHOD_NODE,\n+  JTI_SOFT_NOSUCHFIELD_NODE,\n   JTI_SOFT_CHECKARRAYSTORE_NODE,\n   JTI_SOFT_MONITORENTER_NODE,\n   JTI_SOFT_MONITOREXIT_NODE,\n@@ -648,6 +649,8 @@ extern GTY(()) tree java_global_trees[JTI_MAX];\n   java_global_trees[JTI_SOFT_NULLPOINTER_NODE]\n #define soft_abstractmethod_node \\\n   java_global_trees[JTI_SOFT_ABSTRACTMETHOD_NODE]\n+#define soft_nosuchfield_node \\\n+  java_global_trees[JTI_SOFT_NOSUCHFIELD_NODE]\n #define soft_checkarraystore_node \\\n   java_global_trees[JTI_SOFT_CHECKARRAYSTORE_NODE]\n #define soft_monitorenter_node \\"}]}