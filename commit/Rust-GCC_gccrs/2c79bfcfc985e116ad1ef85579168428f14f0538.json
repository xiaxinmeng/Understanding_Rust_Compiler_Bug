{"sha": "2c79bfcfc985e116ad1ef85579168428f14f0538", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM3OWJmY2ZjOTg1ZTExNmFkMWVmODU1NzkxNjg0MjhmMTRmMDUzOA==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2017-10-12T17:06:29Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2017-10-12T17:06:29Z"}, "message": "revert: re PR sanitizer/82353 (runtime ubsan crash)\n\n2017-10-12  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tRevert\n\t2017-10-11  Vladimir Makarov  <vmakarov@redhat.com>\n\tPR sanitizer/82353\n\t* lra.c (collect_non_operand_hard_regs): Don't ignore operator\n\tlocations.\n\t* lra-lives.c (bb_killed_pseudos, bb_gen_pseudos): Move up.\n\t(make_hard_regno_born, make_hard_regno_dead): Update\n\tbb_killed_pseudos and bb_gen_pseudos.\n\nFrom-SVN: r253685", "tree": {"sha": "4cc17adf56fea2bf8fe294fc7fb96f679373d21e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4cc17adf56fea2bf8fe294fc7fb96f679373d21e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c79bfcfc985e116ad1ef85579168428f14f0538", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c79bfcfc985e116ad1ef85579168428f14f0538", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c79bfcfc985e116ad1ef85579168428f14f0538", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c79bfcfc985e116ad1ef85579168428f14f0538/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3edf8a985bfd08f0b8585c514b2640d9ea5e6a61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3edf8a985bfd08f0b8585c514b2640d9ea5e6a61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3edf8a985bfd08f0b8585c514b2640d9ea5e6a61"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "430f3c9096b50ff39b55f86b507e734278c9bb84", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c79bfcfc985e116ad1ef85579168428f14f0538/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c79bfcfc985e116ad1ef85579168428f14f0538/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c79bfcfc985e116ad1ef85579168428f14f0538", "patch": "@@ -1,3 +1,14 @@\n+2017-10-12  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tRevert\n+\t2017-10-11  Vladimir Makarov  <vmakarov@redhat.com>\n+\tPR sanitizer/82353\n+\t* lra.c (collect_non_operand_hard_regs): Don't ignore operator\n+\tlocations.\n+\t* lra-lives.c (bb_killed_pseudos, bb_gen_pseudos): Move up.\n+\t(make_hard_regno_born, make_hard_regno_dead): Update\n+\tbb_killed_pseudos and bb_gen_pseudos.\n+\n 2017-10-12  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* x86-tune-sched.c (ix86_adjust_cost): Fix Zen support."}, {"sha": "4648eca5ace8af61875832324c997050125d4192", "filename": "gcc/lra-lives.c", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c79bfcfc985e116ad1ef85579168428f14f0538/gcc%2Flra-lives.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c79bfcfc985e116ad1ef85579168428f14f0538/gcc%2Flra-lives.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-lives.c?ref=2c79bfcfc985e116ad1ef85579168428f14f0538", "patch": "@@ -220,9 +220,6 @@ lra_intersected_live_ranges_p (lra_live_range_t r1, lra_live_range_t r2)\n   return false;\n }\n \n-/* The corresponding bitmaps of BB currently being processed.  */\n-static bitmap bb_killed_pseudos, bb_gen_pseudos;\n-\n /* The function processing birth of hard register REGNO.  It updates\n    living hard regs, START_LIVING, and conflict hard regs for living\n    pseudos.  Conflict hard regs for the pic pseudo is not updated if\n@@ -246,7 +243,6 @@ make_hard_regno_born (int regno, bool check_pic_pseudo_p ATTRIBUTE_UNUSED)\n \t|| i != REGNO (pic_offset_table_rtx))\n #endif\n       SET_HARD_REG_BIT (lra_reg_info[i].conflict_hard_regs, regno);\n-  bitmap_set_bit (bb_gen_pseudos, regno);\n }\n \n /* Process the death of hard register REGNO.  This updates\n@@ -259,8 +255,6 @@ make_hard_regno_dead (int regno)\n     return;\n   sparseset_set_bit (start_dying, regno);\n   CLEAR_HARD_REG_BIT (hard_regs_live, regno);\n-  bitmap_clear_bit (bb_gen_pseudos, regno);\n-  bitmap_set_bit (bb_killed_pseudos, regno);\n }\n \n /* Mark pseudo REGNO as living at program point POINT, update conflicting\n@@ -305,6 +299,9 @@ mark_pseudo_dead (int regno, int point)\n     }\n }\n \n+/* The corresponding bitmaps of BB currently being processed.  */\n+static bitmap bb_killed_pseudos, bb_gen_pseudos;\n+\n /* Mark register REGNO (pseudo or hard register) in MODE as live at\n    program point POINT.  Update BB_GEN_PSEUDOS.\n    Return TRUE if the liveness tracking sets were modified, or FALSE"}, {"sha": "a4737773b6e8fa74f58ed31340b4d6a32f623cb8", "filename": "gcc/lra.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c79bfcfc985e116ad1ef85579168428f14f0538/gcc%2Flra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c79bfcfc985e116ad1ef85579168428f14f0538/gcc%2Flra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra.c?ref=2c79bfcfc985e116ad1ef85579168428f14f0538", "patch": "@@ -820,8 +820,7 @@ collect_non_operand_hard_regs (rtx *x, lra_insn_recog_data_t data,\n   const char *fmt = GET_RTX_FORMAT (code);\n \n   for (i = 0; i < data->insn_static_data->n_operands; i++)\n-    if (! data->insn_static_data->operand[i].is_operator\n-\t&& x == data->operand_loc[i])\n+    if (x == data->operand_loc[i])\n       /* It is an operand loc. Stop here.  */\n       return list;\n   for (i = 0; i < data->insn_static_data->n_dups; i++)"}]}