{"sha": "c20c633782db5d659036ac7727549c26e7270001", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzIwYzYzMzc4MmRiNWQ2NTkwMzZhYzc3Mjc1NDljMjZlNzI3MDAwMQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-10-03T14:43:47Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-10-03T14:43:47Z"}, "message": "varasm.c (assemble_start_function, [...]): Do ASM_GLOBALIZE_LABEL for weak symbols, too.\n\n\t* varasm.c (assemble_start_function, assemble_variable, weak_finish,\n\tassemble_alias): Do ASM_GLOBALIZE_LABEL for weak symbols, too.\n\nFrom-SVN: r22791", "tree": {"sha": "f956ca3e5af7f3382bff23e892d51e198e3518da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f956ca3e5af7f3382bff23e892d51e198e3518da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c20c633782db5d659036ac7727549c26e7270001", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c20c633782db5d659036ac7727549c26e7270001", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c20c633782db5d659036ac7727549c26e7270001", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c20c633782db5d659036ac7727549c26e7270001/comments", "author": null, "committer": null, "parents": [{"sha": "69fba03777153dc075f7339ad8042c5ff7a45c56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69fba03777153dc075f7339ad8042c5ff7a45c56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69fba03777153dc075f7339ad8042c5ff7a45c56"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "0e46fb717d6ff576c759d0328fbfb126dda797b1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20c633782db5d659036ac7727549c26e7270001/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20c633782db5d659036ac7727549c26e7270001/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c20c633782db5d659036ac7727549c26e7270001", "patch": "@@ -1,3 +1,8 @@\n+Sat Oct  3 14:42:19 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* varasm.c (assemble_start_function, assemble_variable, weak_finish,\n+\tassemble_alias): Do ASM_GLOBALIZE_LABEL for weak symbols, too.\n+\n Sat Oct  3 16:14:44 1998  John Carr  <jfc@mit.edu>\n \n \t* dwarf2out.c (expand_builtin_dwarf_reg_size):  Initialize"}, {"sha": "8da99daf77dcd6f432f9839634346692d6849bbf", "filename": "gcc/varasm.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c20c633782db5d659036ac7727549c26e7270001/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c20c633782db5d659036ac7727549c26e7270001/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=c20c633782db5d659036ac7727549c26e7270001", "patch": "@@ -1005,12 +1005,11 @@ assemble_start_function (decl, fnname)\n \t  strcpy (*name, p);\n \t}\n \n+      ASM_GLOBALIZE_LABEL (asm_out_file, fnname);\n #ifdef ASM_WEAKEN_LABEL\n       if (DECL_WEAK (decl))\n \tASM_WEAKEN_LABEL (asm_out_file, fnname);\n-      else\n #endif\n-      ASM_GLOBALIZE_LABEL (asm_out_file, fnname);\n     }\n \n   /* Do any machine/system dependent processing of the function name */\n@@ -1426,12 +1425,11 @@ assemble_variable (decl, top_level, at_end, dont_output_data)\n   /* First make the assembler name(s) global if appropriate.  */\n   if (TREE_PUBLIC (decl) && DECL_NAME (decl))\n     {\n+      ASM_GLOBALIZE_LABEL (asm_out_file, name);\n #ifdef ASM_WEAKEN_LABEL\n       if (DECL_WEAK (decl))\n \tASM_WEAKEN_LABEL (asm_out_file, name);\n-      else\n #endif\n-      ASM_GLOBALIZE_LABEL (asm_out_file, name);\n     }\n #if 0\n   for (d = equivalents; d; d = TREE_CHAIN (d))\n@@ -4261,6 +4259,7 @@ weak_finish ()\n       struct weak_syms *t;\n       for (t = weak_decls; t; t = t->next)\n \t{\n+\t  ASM_GLOBALIZE_LABEL (asm_out_file, t->name);\n \t  ASM_WEAKEN_LABEL (asm_out_file, t->name);\n \t  if (t->value)\n \t    ASM_OUTPUT_DEF (asm_out_file, t->name, t->value);\n@@ -4283,12 +4282,11 @@ assemble_alias (decl, target)\n \n   if (TREE_PUBLIC (decl))\n     {\n+      ASM_GLOBALIZE_LABEL (asm_out_file, name);\n #ifdef ASM_WEAKEN_LABEL\n       if (DECL_WEAK (decl))\n \tASM_WEAKEN_LABEL (asm_out_file, name);\n-      else\n #endif\n-\tASM_GLOBALIZE_LABEL (asm_out_file, name);\n     }\n \n   ASM_OUTPUT_DEF (asm_out_file, name, IDENTIFIER_POINTER (target));"}]}