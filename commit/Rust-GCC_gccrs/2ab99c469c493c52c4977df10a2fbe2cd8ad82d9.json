{"sha": "2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFiOTljNDY5YzQ5M2M1MmM0OTc3ZGYxMGEyZmJlMmNkOGFkODJkOQ==", "commit": {"author": {"name": "Gabriel Dos Reis", "email": "gdr@codesourcery.com", "date": "2000-08-24T08:30:02Z"}, "committer": {"name": "Gabriel Dos Reis", "email": "gdr@gcc.gnu.org", "date": "2000-08-24T08:30:02Z"}, "message": "diagnostic.c (finish_diagnostic): Define.\n\n\t* diagnostic.c (finish_diagnostic): Define.\n\t(output_do_printf): Use wrap_text instead of output_add_string.\n\t(default_print_error_function): Avoid embedded '\\n'.\n\n\t* diagnostic.h (flush_diagnostic_buffer): Declare.\n\ncp/\n\t* error.c (print_instantiation_context): Don't forget to flush the\n\tbuffer.\n\nFrom-SVN: r35939", "tree": {"sha": "121cbb1202f3c2a0bf8cddde99e1cf439d814256", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/121cbb1202f3c2a0bf8cddde99e1cf439d814256"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/comments", "author": null, "committer": null, "parents": [{"sha": "1ff5e2eb01866adccbd9296d0cb9edcdd5fea39b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ff5e2eb01866adccbd9296d0cb9edcdd5fea39b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ff5e2eb01866adccbd9296d0cb9edcdd5fea39b"}], "stats": {"total": 32, "additions": 26, "deletions": 6}, "files": [{"sha": "f9f9c9614d30183ed5d12cccce4420bf18799bcd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "patch": "@@ -1,3 +1,11 @@\n+2000-08-24  Gabriel Dos Reis  <gdr@codesourcery.com>\n+\n+\t* diagnostic.c (finish_diagnostic): Define.\n+\t(output_do_printf): Use wrap_text instead of output_add_string.\n+\t(default_print_error_function): Avoid embedded '\\n'.\n+\n+\t* diagnostic.h (flush_diagnostic_buffer): Declare.\n+\n 2000-08-23  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* dependence.c: Replace `[][]' with `[][MAX_SUBSCRIPTS]'."}, {"sha": "7c9c887bc84de8f66e3cf65dcccd328ca9d47657", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "patch": "@@ -1,3 +1,8 @@\n+2000-08-24  Gabriel Dos Reis  <gdr@codesourcery.com>\n+\n+\t* error.c (print_instantiation_context): Don't forget to flush the\n+\tbuffer.\n+\n 2000-08-23  Jason Merrill  <jason@redhat.com>\n \n \t* typeck.c (build_ptrmemfunc): Save the input pmf."}, {"sha": "52612a763904edd4722cd30086524dc4ad6353ec", "filename": "gcc/cp/error.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "patch": "@@ -2594,4 +2594,5 @@ print_instantiation_context ()\n {\n   print_instantiation_partial_context\n     (diagnostic_buffer, current_instantiation (), input_filename, lineno);\n+  flush_diagnostic_buffer ();\n }"}, {"sha": "075f439a0e28ad7d9e9137effc25c950d3e43648", "filename": "gcc/diagnostic.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fdiagnostic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fdiagnostic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.c?ref=2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "patch": "@@ -362,6 +362,13 @@ output_finish (buffer)\n   return (const char *) obstack_finish (&buffer->obstack);\n }\n \n+void\n+flush_diagnostic_buffer ()\n+{\n+  output_to_stream (diagnostic_buffer, stderr);\n+  fflush (stderr);\n+}\n+\n /* Return the amount of characters BUFFER can accept to\n    make a full line.  */\n \n@@ -823,7 +830,7 @@ output_do_printf (buffer, msgid)\n   char *message = vbuild_message_string (msgid,\n                                          output_buffer_format_args (buffer));\n \n-  output_add_string (buffer, message);\n+  wrap_text (buffer, message, message + strlen (message));\n   free (message);\n }\n \n@@ -1214,21 +1221,19 @@ default_print_error_function (file)\n       output_set_prefix (diagnostic_buffer, prefix);\n       \n       if (current_function_decl == NULL)\n-        {\n           output_add_string (diagnostic_buffer, \"At top level:\");\n-          output_add_newline (diagnostic_buffer);\n-        }\n       else\n \t{\n \t  if (TREE_CODE (TREE_TYPE (current_function_decl)) == METHOD_TYPE)\n             output_printf\n-              (diagnostic_buffer, \"In method `%s':\\n\",\n+              (diagnostic_buffer, \"In method `%s':\",\n                (*decl_printable_name) (current_function_decl, 2));\n \t  else\n             output_printf\n-              (diagnostic_buffer, \"In function `%s':\\n\",\n+              (diagnostic_buffer, \"In function `%s':\",\n                (*decl_printable_name) (current_function_decl, 2));\n \t}\n+      output_add_newline (diagnostic_buffer);\n \n       record_last_error_function ();\n       output_to_stream (diagnostic_buffer, stderr);"}, {"sha": "39f650e10f544929bc7e8de835e00cb8825d11cc", "filename": "gcc/diagnostic.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fdiagnostic.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ab99c469c493c52c4977df10a2fbe2cd8ad82d9/gcc%2Fdiagnostic.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdiagnostic.h?ref=2ab99c469c493c52c4977df10a2fbe2cd8ad82d9", "patch": "@@ -168,6 +168,7 @@ void initialize_diagnostics     PARAMS ((void));\n void reshape_diagnostic_buffer  PARAMS ((void));\n void default_initialize_buffer  PARAMS ((output_buffer *));\n void init_output_buffer\t\tPARAMS ((output_buffer *, const char *, int));\n+void flush_diagnostic_buffer    PARAMS ((void));\n void output_clear\t\tPARAMS ((output_buffer *));\n const char *output_get_prefix\tPARAMS ((const output_buffer *));\n void output_set_prefix\t\tPARAMS ((output_buffer *, const char *));"}]}