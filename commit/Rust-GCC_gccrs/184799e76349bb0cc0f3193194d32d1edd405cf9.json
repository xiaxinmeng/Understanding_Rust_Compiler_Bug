{"sha": "184799e76349bb0cc0f3193194d32d1edd405cf9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTg0Nzk5ZTc2MzQ5YmIwY2MwZjMxOTMxOTRkMzJkMWVkZDQwNWNmOQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-08-28T15:04:15Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-08-28T15:04:15Z"}, "message": "lto-streamer-out.c (DFS_write_tree_body): Drop BINFO_INHERITANCE_CHAIN, BINFO_SUBVTT_INDEX and BINFO_VPTR_INDEX.\n\n\n\t* lto-streamer-out.c (DFS_write_tree_body): Drop\n\tBINFO_INHERITANCE_CHAIN, BINFO_SUBVTT_INDEX and BINFO_VPTR_INDEX.\n\t(hash_tree): Do not hash DECL_DEFER_OUTPUT, BINFO_INHERITANCE_CHAIN,\n\tBINFO_SUBVTT_INDEX, BINFO_VPTR_INDEX, DECL_IN_TEXT_SECTION.\n\t* tree-streamer-in.c (unpack_ts_decl_common_value_fields):\n\tDo not read DECL_ERROR_ISSUED.\n\t(unpack_ts_decl_with_vis_value_fields): Do not read\n\tDECL_DEFER_OUTPUT.\n\t(lto_input_ts_binfo_tree_pointers): Do not read BINFO_INHERITANCE_CHAIN,\n        BINFO_SUBVTT_INDEX, BINFO_VPTR_INDEX\n\t* tree-streamer-out.c (pack_ts_decl_common_value_fields): Do not\n\twrite DECL_ERROR_ISSUED..\n\t(pack_ts_decl_with_vis_value_fields): Do not write\n\tDECL_DEFER_OUTPUT.\n\t(write_ts_binfo_tree_pointers): Do not read BINFO_INHERITANCE_CHAIN,\n        BINFO_SUBVTT_INDEX, BINFO_VPTR_INDEX\n\t* print-tree.c (print_node): Do not print DECL_ERROR_ISSUED.\n\t* tree.h (tree_decl_common): Update comment.\n\t(DECL_ERROR_ISSUED): Remove.\n\nFrom-SVN: r202053", "tree": {"sha": "c2a4bf542d9e06a2e76a309c4f3052ec14c056c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2a4bf542d9e06a2e76a309c4f3052ec14c056c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/184799e76349bb0cc0f3193194d32d1edd405cf9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/184799e76349bb0cc0f3193194d32d1edd405cf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/184799e76349bb0cc0f3193194d32d1edd405cf9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/184799e76349bb0cc0f3193194d32d1edd405cf9/comments", "author": null, "committer": null, "parents": [{"sha": "c01c111b6fc91e9f354521e7d4dcbc44da092b14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c01c111b6fc91e9f354521e7d4dcbc44da092b14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c01c111b6fc91e9f354521e7d4dcbc44da092b14"}], "stats": {"total": 9, "additions": 2, "deletions": 7}, "files": [{"sha": "47a539acac78463eec80b39a07b44036a0dee778", "filename": "gcc/tree-streamer-in.c", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/184799e76349bb0cc0f3193194d32d1edd405cf9/gcc%2Ftree-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/184799e76349bb0cc0f3193194d32d1edd405cf9/gcc%2Ftree-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-streamer-in.c?ref=184799e76349bb0cc0f3193194d32d1edd405cf9", "patch": "@@ -209,7 +209,6 @@ unpack_ts_decl_common_value_fields (struct bitpack_d *bp, tree expr)\n \n   if (TREE_CODE (expr) == LABEL_DECL)\n     {\n-      DECL_ERROR_ISSUED (expr) = (unsigned) bp_unpack_value (bp, 1);\n       EH_LANDING_PAD_NR (expr) = (int) bp_unpack_var_len_unsigned (bp);\n \n       /* Always assume an initial value of -1 for LABEL_DECL_UID to\n@@ -258,7 +257,6 @@ unpack_ts_decl_wrtl_value_fields (struct bitpack_d *bp, tree expr)\n static void\n unpack_ts_decl_with_vis_value_fields (struct bitpack_d *bp, tree expr)\n {\n-  DECL_DEFER_OUTPUT (expr) = (unsigned) bp_unpack_value (bp, 1);\n   DECL_COMMON (expr) = (unsigned) bp_unpack_value (bp, 1);\n   DECL_DLLIMPORT_P (expr) = (unsigned) bp_unpack_value (bp, 1);\n   DECL_WEAK (expr) = (unsigned) bp_unpack_value (bp, 1);\n@@ -270,7 +268,6 @@ unpack_ts_decl_with_vis_value_fields (struct bitpack_d *bp, tree expr)\n   if (TREE_CODE (expr) == VAR_DECL)\n     {\n       DECL_HARD_REGISTER (expr) = (unsigned) bp_unpack_value (bp, 1);\n-      DECL_IN_TEXT_SECTION (expr) = (unsigned) bp_unpack_value (bp, 1);\n       DECL_IN_CONSTANT_POOL (expr) = (unsigned) bp_unpack_value (bp, 1);\n       DECL_TLS_MODEL (expr) = (enum tls_model) bp_unpack_value (bp,  3);\n     }\n@@ -923,10 +920,8 @@ lto_input_ts_binfo_tree_pointers (struct lto_input_block *ib,\n       tree a = stream_read_tree (ib, data_in);\n       (*BINFO_BASE_ACCESSES (expr))[i] = a;\n     }\n-\n-  BINFO_INHERITANCE_CHAIN (expr) = stream_read_tree (ib, data_in);\n-  BINFO_SUBVTT_INDEX (expr) = stream_read_tree (ib, data_in);\n-  BINFO_VPTR_INDEX (expr) = stream_read_tree (ib, data_in);\n+  /* Do not walk BINFO_INHERITANCE_CHAIN, BINFO_SUBVTT_INDEX\n+     and BINFO_VPTR_INDEX; these are used by C++ FE only.  */\n }\n \n "}]}