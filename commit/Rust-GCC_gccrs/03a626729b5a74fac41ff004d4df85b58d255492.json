{"sha": "03a626729b5a74fac41ff004d4df85b58d255492", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNhNjI2NzI5YjVhNzRmYWM0MWZmMDA0ZDRkZjg1YjU4ZDI1NTQ5Mg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-09-27T00:28:20Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-09-27T00:28:20Z"}, "message": "emit-rtl.c (active_insn_p): Consider a clobber of the function return value to be active even after reload.\n\n        * emit-rtl.c (active_insn_p): Consider a clobber of the\n        function return value to be active even after reload.\n\nFrom-SVN: r57561", "tree": {"sha": "9147409c450eebfa8fb9dcf10bc9017909163274", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9147409c450eebfa8fb9dcf10bc9017909163274"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03a626729b5a74fac41ff004d4df85b58d255492", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03a626729b5a74fac41ff004d4df85b58d255492", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03a626729b5a74fac41ff004d4df85b58d255492", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03a626729b5a74fac41ff004d4df85b58d255492/comments", "author": null, "committer": null, "parents": [{"sha": "a7215b32249d0936b0ebf1ab8b4176e6a55ceb24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7215b32249d0936b0ebf1ab8b4176e6a55ceb24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7215b32249d0936b0ebf1ab8b4176e6a55ceb24"}], "stats": {"total": 38, "additions": 33, "deletions": 5}, "files": [{"sha": "5638d5db78375903be9277f4084fac22964f4e72", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03a626729b5a74fac41ff004d4df85b58d255492/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03a626729b5a74fac41ff004d4df85b58d255492/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=03a626729b5a74fac41ff004d4df85b58d255492", "patch": "@@ -1,3 +1,8 @@\n+2002-09-26  Richard Henderson  <rth@redhat.com>\n+\n+\t* emit-rtl.c (active_insn_p): Consider a clobber of the\n+\tfunction return value to be active even after reload.\n+\n 2002-09-27  Alan Modra  <amodra@bigpond.net.au>\n \n \t* doloop.c (doloop_modify_runtime <biv skips initial incr>): Adjust"}, {"sha": "ccd6cbad0aa74ae93d65bad4144a63e5f1210b86", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 28, "deletions": 5, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03a626729b5a74fac41ff004d4df85b58d255492/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03a626729b5a74fac41ff004d4df85b58d255492/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=03a626729b5a74fac41ff004d4df85b58d255492", "patch": "@@ -3022,11 +3022,34 @@ int\n active_insn_p (insn)\n      rtx insn;\n {\n-  return (GET_CODE (insn) == CALL_INSN || GET_CODE (insn) == JUMP_INSN\n-\t  || (GET_CODE (insn) == INSN\n-\t      && (! reload_completed\n-\t\t  || (GET_CODE (PATTERN (insn)) != USE\n-\t\t      && GET_CODE (PATTERN (insn)) != CLOBBER))));\n+  if (GET_CODE (insn) == CALL_INSN || GET_CODE (insn) == JUMP_INSN)\n+    return true;\n+  if (GET_CODE (insn) == INSN)\n+    {\n+      if (reload_completed)\n+\t{\n+\t  rtx pat = PATTERN (insn);\n+\n+\t  /* After reload, remaining USE insns are noops.  */\n+\t  if (GET_CODE (pat) == USE)\n+\t    return false;\n+\n+\t  if (GET_CODE (pat) == CLOBBER)\n+\t    {\n+\t      /* ??? Don't skip past the clobber of the return register.\n+\t\t If we eliminate it, we risk a variety of life analysis\n+\t\t problems on broken code.  */\n+\t      if (GET_CODE (XEXP (pat, 0)) == REG\n+\t\t  && REG_FUNCTION_VALUE_P (XEXP (pat, 0)))\n+\t\treturn true;\n+\n+\t      /* Otherwise, clobbers don't do anything either.  */\n+\t      return false;\n+\t    }\n+\t}\n+      return true;\n+    }\n+  return false;\n }\n \n rtx"}]}