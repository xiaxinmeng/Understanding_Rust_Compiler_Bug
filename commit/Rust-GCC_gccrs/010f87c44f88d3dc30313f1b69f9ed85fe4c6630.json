{"sha": "010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDEwZjg3YzQ0Zjg4ZDNkYzMwMzEzZjFiNjlmOWVkODVmZTRjNjYzMA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2002-04-11T21:04:09Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-04-11T21:04:09Z"}, "message": "re PR rtl-optimization/6177 (ia64 ICE with single-element complex array in LAPACK)\n\n\tPR optimization/6177\n\t* expr.c (expand_expr) [COMPONENT_REF]: Handle op0 CONCAT if\n\tbitpos is 0 and bitsize CONCAT size.\n\n\t* gcc.c-torture/execute/20020411-1.c: New test.\n\nFrom-SVN: r52178", "tree": {"sha": "402f6049ff39cd859a6119c0c4355dc42a33f33b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/402f6049ff39cd859a6119c0c4355dc42a33f33b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "html_url": "https://github.com/Rust-GCC/gccrs/commit/010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "578fc63d144bcd49d723090a9c24f4cd69ce621d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/578fc63d144bcd49d723090a9c24f4cd69ce621d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/578fc63d144bcd49d723090a9c24f4cd69ce621d"}], "stats": {"total": 46, "additions": 43, "deletions": 3}, "files": [{"sha": "58f921dec24fe9af52cc58d4ccbe311aafcd6885", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "patch": "@@ -1,3 +1,9 @@\n+2002-04-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR optimization/6177\n+\t* expr.c (expand_expr) [COMPONENT_REF]: Handle op0 CONCAT if\n+\tbitpos is 0 and bitsize CONCAT size.\n+\n 2002-04-11  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/6223"}, {"sha": "a9ca3f6613bf7e1097608df2de86faa6722d3b8b", "filename": "gcc/expr.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "patch": "@@ -6954,6 +6954,16 @@ expand_expr (exp, target, tmode, modifier)\n \t    MEM_VOLATILE_P (op0) = 1;\n \t  }\n \n+\t/* The following code doesn't handle CONCAT.\n+\t   Assume only bitpos == 0 can be used for CONCAT, due to\n+\t   one element arrays having the same mode as its element.  */\n+\tif (GET_CODE (op0) == CONCAT)\n+\t  {\n+\t    if (bitpos != 0 || bitsize != GET_MODE_BITSIZE (GET_MODE (op0)))\n+\t      abort ();\n+\t    return op0;\n+\t  }\n+\n \t/* In cases where an aligned union has an unaligned object\n \t   as a field, we might be extracting a BLKmode value from\n \t   an integer-mode (e.g., SImode) object.  Handle this case"}, {"sha": "ccabe18f899627cdbeaee48038ed3bf6c1468f32", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "patch": "@@ -1,10 +1,9 @@\n 2002-04-11  Jakub Jelinek  <jakub@redhat.com>\n \n-\tPR c/6223\n-\t* combine.c (if_then_else_cond): Use trunc_int_for_mode on nz.\n-\n \t* gcc.dg/20020411-1.c: New test.\n \n+\t* gcc.c-torture/execute/20020411-1.c: New test.\n+\n 2002-04-10  Janis Johnson  <janis187@us.ibm.com>\n \n \t* g77.f-torture/execute/6177.f: New test."}, {"sha": "89e2bae703bc4efe52b238941786c4b7f030095f", "filename": "gcc/testsuite/gcc.c-torture/execute/20020411-1.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20020411-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/010f87c44f88d3dc30313f1b69f9ed85fe4c6630/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20020411-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20020411-1.c?ref=010f87c44f88d3dc30313f1b69f9ed85fe4c6630", "patch": "@@ -0,0 +1,25 @@\n+/* PR optimization/6177\n+   This testcase ICEd because expr.c did not expect to see a CONCAT\n+   as array rtl.  */\n+\n+extern void abort (void);\n+extern void exit (int);\n+\n+__complex__ float foo (void)\n+{\n+  __complex__ float f[1];\n+  __real__ f[0] = 1.0;\n+  __imag__ f[0] = 1.0;\n+  f[0] = __builtin_conjf (f[0]);\n+  return f[0];\n+}\n+\n+int main (void)\n+{\n+  __complex__ double d[1];\n+  d[0] = foo ();\n+  if (__real__ d[0] != 1.0\n+      || __imag__ d[0] != -1.0)\n+    abort ();\n+  exit (0);\n+}"}]}