{"sha": "cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2RjM2RkYjgxYzQ3MDEzYTg1ZTIyNDNhMWIxZGYyYzk5ZGQ0ODRiNw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-07-12T22:16:09Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-07-12T22:16:09Z"}, "message": "target.h (struct gcc_target): Move gimplify_va_arg_expr next to build_builtin_va_list.\n\n        * target.h (struct gcc_target): Move gimplify_va_arg_expr\n        next to build_builtin_va_list.\n        * target-def.h (TARGET_GIMPLIFY_VA_ARG_EXPR): Update to match.\n        * builtins.c (gimplify_va_arg_expr): Likewise.\n        * gimplify.c (copy_if_shared_r): Likewise.\n\nFrom-SVN: r84578", "tree": {"sha": "d1e20fa01bed55f7d3b56050b540b5eed22b2acf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d1e20fa01bed55f7d3b56050b540b5eed22b2acf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/comments", "author": null, "committer": null, "parents": [{"sha": "a0c71497f59230197b683c5a6a6190bcfcdf5dc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0c71497f59230197b683c5a6a6190bcfcdf5dc2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0c71497f59230197b683c5a6a6190bcfcdf5dc2"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "54541ef236bcd9be37acfae24141be9129fd9b7f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "patch": "@@ -1,3 +1,11 @@\n+2004-07-12  Richard Henderson  <rth@redhat.com>\n+\n+\t* target.h (struct gcc_target): Move gimplify_va_arg_expr\n+\tnext to build_builtin_va_list.\n+\t* target-def.h (TARGET_GIMPLIFY_VA_ARG_EXPR): Update to match.\n+\t* builtins.c (gimplify_va_arg_expr): Likewise.\n+\t* gimplify.c (copy_if_shared_r): Likewise.\n+\n 2004-07-12  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* passes.c (rest_of_decl_compilation): Don't defer call of"}, {"sha": "f8a794db0a7cfb6871151ed60b90b6c0f0a40044", "filename": "gcc/builtins.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "patch": "@@ -4642,11 +4642,11 @@ gimplify_va_arg_expr (tree *expr_p, tree *pre_p, tree *post_p)\n       else\n \tgimplify_expr (&valist, pre_p, post_p, is_gimple_min_lval, fb_lvalue);\n \n-      if (!targetm.calls.gimplify_va_arg_expr)\n+      if (!targetm.gimplify_va_arg_expr)\n \t/* Once most targets are converted this should abort.  */\n \treturn GS_ALL_DONE;\n \n-      *expr_p = targetm.calls.gimplify_va_arg_expr (valist, type, pre_p, post_p);\n+      *expr_p = targetm.gimplify_va_arg_expr (valist, type, pre_p, post_p);\n       return GS_OK;\n     }\n }"}, {"sha": "770739af04aa013478b04d40bfb8dca27a6b3ab4", "filename": "gcc/gimplify.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "patch": "@@ -667,7 +667,7 @@ copy_if_shared_r (tree *tp, int *walk_subtrees ATTRIBUTE_UNUSED,\n     {\n       TREE_VISITED (t) = 1;\n       if (TREE_CODE (*tp) == VA_ARG_EXPR\n-\t  && targetm.calls.gimplify_va_arg_expr == NULL)\n+\t  && targetm.gimplify_va_arg_expr == NULL)\n \t{\n \t  /* Mark any _DECL inside the operand as volatile to avoid\n \t     the optimizers messing around with it. We have to do this"}, {"sha": "14943da383f26d533c8399bafbe96209fcbab534", "filename": "gcc/target-def.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Ftarget-def.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Ftarget-def.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftarget-def.h?ref=cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "patch": "@@ -376,7 +376,6 @@ Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n    TARGET_STRICT_ARGUMENT_NAMING,\t\t\t\t\\\n    TARGET_PRETEND_OUTGOING_VARARGS_NAMED,\t\t\t\\\n    TARGET_SPLIT_COMPLEX_ARG,\t\t\t\t\t\\\n-   TARGET_GIMPLIFY_VA_ARG_EXPR,\t\t\t\t\t\\\n    }\n \n \n@@ -458,6 +457,7 @@ Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n   TARGET_CC_MODES_COMPATIBLE,\t\t\t\\\n   TARGET_MACHINE_DEPENDENT_REORG,\t\t\\\n   TARGET_BUILD_BUILTIN_VA_LIST,\t\t\t\\\n+  TARGET_GIMPLIFY_VA_ARG_EXPR,\t\t\t\\\n   TARGET_GET_PCH_VALIDITY,\t\t\t\\\n   TARGET_PCH_VALID_P,\t\t\t\t\\\n   TARGET_DEFAULT_SHORT_ENUMS,\t\t\t\\"}, {"sha": "befe67bf906f1664b688bb152a50cf4b2cafa76e", "filename": "gcc/target.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Ftarget.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdc3ddb81c47013a85e2243a1b1df2c99dd484b7/gcc%2Ftarget.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftarget.h?ref=cdc3ddb81c47013a85e2243a1b1df2c99dd484b7", "patch": "@@ -414,6 +414,10 @@ struct gcc_target\n   /* Create the __builtin_va_list type.  */\n   tree (* build_builtin_va_list) (void);\n \n+  /* Gimplifies a VA_ARG_EXPR.  */\n+  tree (* gimplify_va_arg_expr) (tree valist, tree type, tree *pre_p,\n+\t\t\t\t tree *post_p);\n+\n   /* Validity-checking routines for PCH files, target-specific.\n      get_pch_validity returns a pointer to the data to be stored,\n      and stores the size in its argument.  pch_valid_p gets the same\n@@ -458,10 +462,6 @@ struct gcc_target\n     /* Given a complex type T, return true if a parameter of type T\n        should be passed as two scalars.  */\n     bool (* split_complex_arg) (tree type);\n-\n-    /* Gimplifies a VA_ARG_EXPR.  */\n-    tree (* gimplify_va_arg_expr) (tree valist, tree type, tree *pre_p,\n-\t\t\t\t   tree *post_p);\n   } calls;\n \n   /* Functions specific to the C++ frontend.  */"}]}