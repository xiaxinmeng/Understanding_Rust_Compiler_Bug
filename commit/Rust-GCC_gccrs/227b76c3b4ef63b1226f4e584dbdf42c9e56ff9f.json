{"sha": "227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjI3Yjc2YzNiNGVmNjNiMTIyNmY0ZTU4NGRiZGY0MmM5ZTU2ZmY5Zg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2017-06-11T09:33:22Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2017-06-11T09:33:22Z"}, "message": "opts.c (finish_options): Move test for flag_split_stack after it has been initialized.\n\n\t* opts.c (finish_options): Move test for flag_split_stack after\n\tit has been initialized.\n\nFrom-SVN: r249105", "tree": {"sha": "01234a488925b1d0e85044e16a4344c28f955969", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01234a488925b1d0e85044e16a4344c28f955969"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f/comments", "author": null, "committer": null, "parents": [{"sha": "c3b0f4c600b0a551132e52446bdccc23952fdefb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3b0f4c600b0a551132e52446bdccc23952fdefb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3b0f4c600b0a551132e52446bdccc23952fdefb"}], "stats": {"total": 32, "additions": 19, "deletions": 13}, "files": [{"sha": "c3bd0402b25c387432235c70ab25d7ca75d45f97", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f", "patch": "@@ -1,3 +1,8 @@\n+2017-06-10  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* opts.c (finish_options): Move test for flag_split_stack after\n+\tit has been initialized.\n+\n 2017-06-11  Jason Merrill  <jason@redhat.com>\n \n \t* tree.h (id_equal): New."}, {"sha": "60ebe56c8a4e65d9074e6774e9daa571b14d6f38", "filename": "gcc/opts.c", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=227b76c3b4ef63b1226f4e584dbdf42c9e56ff9f", "patch": "@@ -863,19 +863,6 @@ finish_options (struct gcc_options *opts, struct gcc_options *opts_set,\n       opts->x_flag_reorder_blocks = 1;\n     }\n \n-  /* If stack splitting is turned on, and the user did not explicitly\n-     request function partitioning, turn off partitioning, as it\n-     confuses the linker when trying to handle partitioned split-stack\n-     code that calls a non-split-stack functions.  But if partitioning\n-     was turned on explicitly just hope for the best.  */\n-  if (opts->x_flag_split_stack\n-      && opts->x_flag_reorder_blocks_and_partition\n-      && !opts_set->x_flag_reorder_blocks_and_partition)\n-    opts->x_flag_reorder_blocks_and_partition = 0;\n-\n-  if (opts->x_flag_reorder_blocks_and_partition\n-      && !opts_set->x_flag_reorder_functions)\n-    opts->x_flag_reorder_functions = 1;\n \n   /* Pipelining of outer loops is only possible when general pipelining\n      capabilities are requested.  */\n@@ -927,6 +914,20 @@ finish_options (struct gcc_options *opts, struct gcc_options *opts_set,\n \t}\n     }\n \n+  /* If stack splitting is turned on, and the user did not explicitly\n+     request function partitioning, turn off partitioning, as it\n+     confuses the linker when trying to handle partitioned split-stack\n+     code that calls a non-split-stack functions.  But if partitioning\n+     was turned on explicitly just hope for the best.  */\n+  if (opts->x_flag_split_stack\n+      && opts->x_flag_reorder_blocks_and_partition\n+      && !opts_set->x_flag_reorder_blocks_and_partition)\n+    opts->x_flag_reorder_blocks_and_partition = 0;\n+\n+  if (opts->x_flag_reorder_blocks_and_partition\n+      && !opts_set->x_flag_reorder_functions)\n+    opts->x_flag_reorder_functions = 1;\n+\n   /* Tune vectorization related parametees according to cost model.  */\n   if (opts->x_flag_vect_cost_model == VECT_COST_MODEL_CHEAP)\n     {"}]}