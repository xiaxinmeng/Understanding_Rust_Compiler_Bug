{"sha": "f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjVmYzViOWQ3YjgwNDMxZTFmNjJiOTQwOTI5MTg5MzIwOWZiMmQxYg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-04T11:57:38Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-04T11:57:38Z"}, "message": "[multiple changes]\n\n2011-08-04  Emmanuel Briot  <briot@adacore.com>\n\n\t* projects.texi: Added documentation for the IDE'Gnat project file\n\tattribute.\n\n2011-08-04  Nicolas Roche  <roche@adacore.com>\n\n\t* gnat_rm.texi: Minor editing.\n\n2011-08-04  Javier Miranda  <miranda@adacore.com>\n\n\t* bindgen.adb (Gen_Adafinal_Ada): Do not differentiate the main case\n\tand the library case for VM targets.\n\t(Gen_Adainit_Ada): Likewise.\n\n2011-08-04  Robert Dewar  <dewar@adacore.com>\n\n\t* g-altive.ads: Minor comment updates.\n\t* prj-nmsc.adb: Minor reformatting.\n\n2011-08-04  Javier Miranda  <miranda@adacore.com>\n\n\t* opt.ads\n\t(Normalize_Scalars_Config): Value of the configuration switch set by\n\tpragma Normalize_Scalars when it appears in the gnat.adc file.\n\t(Normalize_Scalars): New field for record Config_Switches_Type. Used\n\tto save and restore settings of this pragma.\n\t* opt.adb\n\t(Register_Opt_Config_Switches, Save_Opt_Config_Switches,\n\tRestore_Opt_Config_Switches): Add missing support for Normalize_Scalars.\n\n2011-08-04  Vincent Celier  <celier@adacore.com>\n\n\t* gnat_ugn.texi: Document gnatlink options -M and -M=mapfile\n\nFrom-SVN: r177360", "tree": {"sha": "adf39c1d4a047200bbc2e48560a200b9fb9477f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/adf39c1d4a047200bbc2e48560a200b9fb9477f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/comments", "author": null, "committer": null, "parents": [{"sha": "0c4683cf87c9f224ee7efdd24fa3f9152cc2da16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c4683cf87c9f224ee7efdd24fa3f9152cc2da16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c4683cf87c9f224ee7efdd24fa3f9152cc2da16"}], "stats": {"total": 104, "additions": 84, "deletions": 20}, "files": [{"sha": "9d287ca86fefcdb172053948f254226b7933443f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -1,3 +1,38 @@\n+2011-08-04  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* projects.texi: Added documentation for the IDE'Gnat project file\n+\tattribute.\n+\n+2011-08-04  Nicolas Roche  <roche@adacore.com>\n+\n+\t* gnat_rm.texi: Minor editing.\n+\n+2011-08-04  Javier Miranda  <miranda@adacore.com>\n+\n+\t* bindgen.adb (Gen_Adafinal_Ada): Do not differentiate the main case\n+\tand the library case for VM targets.\n+\t(Gen_Adainit_Ada): Likewise.\n+\n+2011-08-04  Robert Dewar  <dewar@adacore.com>\n+\n+\t* g-altive.ads: Minor comment updates.\n+\t* prj-nmsc.adb: Minor reformatting.\n+\n+2011-08-04  Javier Miranda  <miranda@adacore.com>\n+\n+\t* opt.ads\n+\t(Normalize_Scalars_Config): Value of the configuration switch set by\n+\tpragma Normalize_Scalars when it appears in the gnat.adc file.\n+\t(Normalize_Scalars): New field for record Config_Switches_Type. Used\n+\tto save and restore settings of this pragma.\n+\t* opt.adb\n+\t(Register_Opt_Config_Switches, Save_Opt_Config_Switches,\n+\tRestore_Opt_Config_Switches): Add missing support for Normalize_Scalars.\n+\n+2011-08-04  Vincent Celier  <celier@adacore.com>\n+\n+\t* gnat_ugn.texi: Document gnatlink options -M and -M=mapfile\n+\n 2011-08-04  Arnaud Charlet  <charlet@adacore.com>\n \n \t* makeutl.adb: Minor reformatting."}, {"sha": "58636541215ce9efb4fddf34f77b3d18b30ef9d6", "filename": "gcc/ada/bindgen.adb", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fbindgen.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fbindgen.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbindgen.adb?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -428,7 +428,7 @@ package body Bindgen is\n    begin\n       WBI (\"   procedure \" & Ada_Final_Name.all & \" is\");\n \n-      if Bind_Main_Program and then VM_Target = No_VM then\n+      if VM_Target = No_VM and then Bind_Main_Program then\n          WBI (\"      procedure s_stalib_adafinal;\");\n          Set_String (\"      pragma Import (C, s_stalib_adafinal, \");\n          Set_String (\"\"\"system__standard_library__adafinal\"\");\");\n@@ -441,18 +441,18 @@ package body Bindgen is\n       WBI (\"      end if;\");\n       WBI (\"      Is_Elaborated := False;\");\n \n-      if not Bind_Main_Program then\n-         if Lib_Final_Built then\n+      --  On non-virtual machine targets, finalization is done differently\n+      --  depending on whether this is the main program or a library.\n+\n+      if VM_Target = No_VM then\n+         if Bind_Main_Program then\n+            WBI (\"      s_stalib_adafinal;\");\n+         elsif Lib_Final_Built then\n             WBI (\"      finalize_library;\");\n          else\n             WBI (\"      null;\");\n          end if;\n \n-      --  Main program case\n-\n-      elsif VM_Target = No_VM then\n-         WBI (\"      s_stalib_adafinal;\");\n-\n       --  Pragma Import C cannot be used on virtual machine targets, therefore\n       --  call the runtime finalization routine directly.\n \n@@ -882,11 +882,12 @@ package body Bindgen is\n          WBI (\"      Initialize_Stack_Limit;\");\n       end if;\n \n-      --  In the main program case, attach finalize_library to the soft link.\n+      --  On virtual machine targets, or on non-virtual machine ones if this\n+      --  is the main program case, attach finalize_library to the soft link.\n       --  Do it only when not using a restricted run time, in which case tasks\n       --  are non-terminating, so we do not want library-level finalization.\n \n-      if Bind_Main_Program\n+      if (VM_Target /= No_VM or else Bind_Main_Program)\n         and then not Configurable_Run_Time_On_Target\n         and then not Suppress_Standard_Library_On_Target\n       then"}, {"sha": "27b991503b6523e0fc3894da8bd2c80b8e240971", "filename": "gcc/ada/g-altive.ads", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fg-altive.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fg-altive.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-altive.ads?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -46,26 +46,27 @@\n --    and instruction set.\n \n --  These documents, as well as a number of others of general interest on the\n---  AltiVec technology, are available from the Motorola/AltiVec Web site at\n+--  AltiVec technology, are available from the Motorola/AltiVec Web site at:\n \n --  http://www.freescale.com/altivec\n \n --  The binding interface is structured to allow alternate implementations:\n --  for real AltiVec capable targets, and for other targets. In the latter\n---  case, everything is emulated in software. We refer to the two versions as:\n+--  case, everything is emulated in software. The two versions are referred\n+--  to as:\n \n --  o The Hard binding for AltiVec capable targets (with the appropriate\n --    hardware support and corresponding instruction set)\n \n --  o The Soft binding for other targets (with the low level primitives\n --    emulated in software).\n \n---  We also offer interfaces not strictly part of the base AltiVec API, such\n---  as vector conversions to/from array representations, which are of interest\n---  for client applications (e.g. for vector initialization purposes) and may\n---  also be used as implementation facilities.\n+--  In addition, interfaces that are not strictly part of the base AltiVec API\n+--  are provided, such as vector conversions to and from array representations,\n+--  which are of interest for client applications (e.g. for vector\n+--  initialization purposes).\n \n---  Only the soft binding is available today.\n+--  Only the soft binding is available today\n \n -----------------------------------------\n -- General package architecture survey --"}, {"sha": "2464fc4b03dda244b73c6a6d3b4a2391cbf204f6", "filename": "gcc/ada/gnat_rm.texi", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fgnat_rm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fgnat_rm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_rm.texi?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -4277,8 +4277,8 @@ packages:\n @item No_Dependence => Ada.Execution_Time.Timers\n @item No_Dependence => Ada.Task_Attributes\n @item No_Dependence => System.Multiprocessors.Dispatching_Domains\n-\n @end table\n+\n @noindent\n \n This set of configuration pragmas and restrictions correspond to the"}, {"sha": "1d87f4aebd943c71ac2f4ef5f9342bc51ab46195", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -9141,6 +9141,14 @@ when multiple versions of the GNAT compiler are available.\n for further details. You would normally use the @option{-b} or\n @option{-V} switch instead.\n \n+@item -M\n+When linking an executable, create a map file. The name of the map file\n+has the same name as the executable with extension \".map\".\n+\n+@item -M=mapfile\n+When linking an executable, create a map file. The name of the map file is\n+\"mapfile\".\n+\n @item --GCC=@var{compiler_name}\n @cindex @option{--GCC=compiler_name} (@command{gnatlink})\n Program used for compiling the binder file. The default is"}, {"sha": "4b66c34b5bf02bf28b252bf4305948dae430ec05", "filename": "gcc/ada/opt.adb", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fopt.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fopt.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fopt.adb?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2010, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2011, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -59,6 +59,7 @@ package body Opt is\n       Fast_Math_Config                      := Fast_Math;\n       Init_Or_Norm_Scalars_Config           := Init_Or_Norm_Scalars;\n       Initialize_Scalars_Config             := Initialize_Scalars;\n+      Normalize_Scalars_Config              := Normalize_Scalars;\n       Optimize_Alignment_Config             := Optimize_Alignment;\n       Persistent_BSS_Mode_Config            := Persistent_BSS_Mode;\n       Polling_Required_Config               := Polling_Required;\n@@ -93,6 +94,7 @@ package body Opt is\n       Fast_Math                      := Save.Fast_Math;\n       Init_Or_Norm_Scalars           := Save.Init_Or_Norm_Scalars;\n       Initialize_Scalars             := Save.Initialize_Scalars;\n+      Normalize_Scalars              := Save.Normalize_Scalars;\n       Optimize_Alignment             := Save.Optimize_Alignment;\n       Optimize_Alignment_Local       := Save.Optimize_Alignment_Local;\n       Persistent_BSS_Mode            := Save.Persistent_BSS_Mode;\n@@ -122,6 +124,7 @@ package body Opt is\n       Save.Fast_Math                      := Fast_Math;\n       Save.Init_Or_Norm_Scalars           := Init_Or_Norm_Scalars;\n       Save.Initialize_Scalars             := Initialize_Scalars;\n+      Save.Normalize_Scalars              := Normalize_Scalars;\n       Save.Optimize_Alignment             := Optimize_Alignment;\n       Save.Optimize_Alignment_Local       := Optimize_Alignment_Local;\n       Save.Persistent_BSS_Mode            := Persistent_BSS_Mode;\n@@ -189,6 +192,7 @@ package body Opt is\n          Fast_Math                   := Fast_Math_Config;\n          Init_Or_Norm_Scalars        := Init_Or_Norm_Scalars_Config;\n          Initialize_Scalars          := Initialize_Scalars_Config;\n+         Normalize_Scalars           := Normalize_Scalars_Config;\n          Optimize_Alignment          := Optimize_Alignment_Config;\n          Optimize_Alignment_Local    := False;\n          Persistent_BSS_Mode         := Persistent_BSS_Mode_Config;"}, {"sha": "563e57804c17cceee90396d00a6dcc217cf67d51", "filename": "gcc/ada/opt.ads", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fopt.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fopt.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fopt.ads?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -1730,6 +1730,13 @@ package Opt is\n    --  This switch is not set when the pragma appears ahead of a given\n    --  unit, so it does not affect the compilation of other units.\n \n+   Normalize_Scalars_Config : Boolean;\n+   --  GNAT\n+   --  This is the value of the configuration switch that is set by the\n+   --  pragma Normalize_Scalars when it appears in the gnat.adc file.\n+   --  This switch is not set when the pragma appears ahead of a given\n+   --  unit, so it does not affect the compilation of other units.\n+\n    Optimize_Alignment_Config : Character;\n    --  GNAT\n    --  This is the value of the configuration switch that controls the\n@@ -1911,6 +1918,7 @@ private\n       Fast_Math                      : Boolean;\n       Init_Or_Norm_Scalars           : Boolean;\n       Initialize_Scalars             : Boolean;\n+      Normalize_Scalars              : Boolean;\n       Optimize_Alignment             : Character;\n       Optimize_Alignment_Local       : Boolean;\n       Persistent_BSS_Mode            : Boolean;"}, {"sha": "a75ebfb8fdc7785f697e655ed441aff0598f61b9", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -592,7 +592,7 @@ package body Prj.Nmsc is\n          --  For instance a suffix \"configure.in\" must match a file with the\n          --  same name. To avoid dummy cases, though, a suffix starting with\n          --  '.' requires a file that is at least one character longer ('.cpp'\n-         --  should not match a file with the same name)\n+         --  should not match a file with the same name).\n \n          if Suf (Suf'First) = '.' then\n             Min_Prefix_Length := 1;"}, {"sha": "f5cc8ae71dcca26cf0f4c4e8194ef9c698987681", "filename": "gcc/ada/projects.texi", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fprojects.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5fc5b9d7b80431e1f62b9409291893209fb2d1b/gcc%2Fada%2Fprojects.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprojects.texi?ref=f5fc5b9d7b80431e1f62b9409291893209fb2d1b", "patch": "@@ -3393,6 +3393,7 @@ system (file). The text is between brackets ([]) if the index is optional.\n @item Compiler_Command @tab string @tab IDE @tab insensitive (language)\n @item Debugger_Command @tab string @tab IDE @tab -\n @item Gnatlist @tab string @tab IDE @tab -\n+@item Gnat @tab string @tab IDE @tab -\n @item VCS_Kind @tab string @tab IDE @tab -\n @item VCS_File_Check @tab string @tab IDE @tab -\n @item VCS_Log_Check @tab string @tab IDE @tab -\n@@ -4382,11 +4383,17 @@ value is a list of switches to use when invoking that tool.\n This is a simple attribute.  Its value is a string that specifies the name\n of the @command{gnatls} utility to be used to retrieve information about the\n predefined path; e.g., @code{\"gnatls\"}, @code{\"powerpc-wrs-vxworks-gnatls\"}.\n+\n @item VCS_Kind\n This is a simple attribute. Its value is a string used to specify the\n Version Control System (VCS) to be used for this project, e.g.@: CVS, RCS\n ClearCase or Perforce.\n \n+@item Gnat\n+This is a simple attribute. Its value is a string that specifies the name\n+of the @command{gnat} utility to be used when executing various tools from\n+GPS, in particular @code{\"gnat pp\"}, @code{\"gnat stub\"},@dots{}\n+\n @item VCS_File_Check\n This is a simple attribute. Its value is a string that specifies the\n command used by the VCS to check the validity of a file, either"}]}