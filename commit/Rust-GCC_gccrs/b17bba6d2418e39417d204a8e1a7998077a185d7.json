{"sha": "b17bba6d2418e39417d204a8e1a7998077a185d7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjE3YmJhNmQyNDE4ZTM5NDE3ZDIwNGE4ZTFhNzk5ODA3N2ExODVkNw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-04-06T15:55:00Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-04-06T15:55:00Z"}, "message": "re PR c++/20212 (attribute unused vs. member function template)\n\n\tPR c++/20212\n\t* pt.c (regenerate_decl_from_template): Copy attributes for\n\tparameters from the pattern to the instantiation.\n\n\tPR c++/20212\n\t* g++.dg/warn/Wunused-11.C: New test.\n\nFrom-SVN: r97726", "tree": {"sha": "fcd2fbe70a5a93fad69ed7c5e1225fc6d4b544f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fcd2fbe70a5a93fad69ed7c5e1225fc6d4b544f8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b17bba6d2418e39417d204a8e1a7998077a185d7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b17bba6d2418e39417d204a8e1a7998077a185d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b17bba6d2418e39417d204a8e1a7998077a185d7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b17bba6d2418e39417d204a8e1a7998077a185d7/comments", "author": null, "committer": null, "parents": [{"sha": "20bc438ce92474b44e45d2d2b2d14c04da412316", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20bc438ce92474b44e45d2d2b2d14c04da412316", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20bc438ce92474b44e45d2d2b2d14c04da412316"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "39e5a458e952774735e6ade026a805fa84321707", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b17bba6d2418e39417d204a8e1a7998077a185d7", "patch": "@@ -1,3 +1,9 @@\n+2005-04-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/20212\n+\t* pt.c (regenerate_decl_from_template): Copy attributes for\n+\tparameters from the pattern to the instantiation.\n+\n 2005-04-05  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/20734"}, {"sha": "a6f8ad2e33d33bbbbf19ecaa99b69153217428df", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=b17bba6d2418e39417d204a8e1a7998077a185d7", "patch": "@@ -11190,6 +11190,7 @@ regenerate_decl_from_template (tree decl, tree tmpl)\n       while (decl_parm)\n \t{\n \t  tree parm_type;\n+\t  tree attributes;\n \n \t  if (DECL_NAME (decl_parm) != DECL_NAME (pattern_parm))\n \t    DECL_NAME (decl_parm) = DECL_NAME (pattern_parm);\n@@ -11198,6 +11199,12 @@ regenerate_decl_from_template (tree decl, tree tmpl)\n \t  parm_type = type_decays_to (parm_type);\n \t  if (!same_type_p (TREE_TYPE (decl_parm), parm_type))\n \t    TREE_TYPE (decl_parm) = parm_type;\n+\t  attributes = DECL_ATTRIBUTES (pattern_parm);\n+\t  if (DECL_ATTRIBUTES (decl_parm) != attributes)\n+\t    {\n+\t      DECL_ATTRIBUTES (decl_parm) = attributes;\n+\t      cplus_decl_attributes (&decl_parm, attributes, /*flags=*/0);\n+\t    }\n \t  decl_parm = TREE_CHAIN (decl_parm);\n \t  pattern_parm = TREE_CHAIN (pattern_parm);\n \t}"}, {"sha": "e70b4b2c41a5fb946b18304dd82e7a0f43dfeb9b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b17bba6d2418e39417d204a8e1a7998077a185d7", "patch": "@@ -1,3 +1,8 @@\n+2005-04-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/20212\n+\t* g++.dg/warn/Wunused-11.C: New test.\n+\n 2005-04-06  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n \t* gcc.c-torture/execute/20020720-1.x: Disable on bfin*-*."}, {"sha": "4a151d24547e3196f2a6364ebe4670d9aca5d4e2", "filename": "gcc/testsuite/g++.dg/warn/Wunused-11.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWunused-11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b17bba6d2418e39417d204a8e1a7998077a185d7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWunused-11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWunused-11.C?ref=b17bba6d2418e39417d204a8e1a7998077a185d7", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/20212\n+// { dg-options \"-O2 -Wunused -Wextra\" }\n+\n+template<int> void f(int);\n+void g(int i)\n+{\n+  f<0>(i);\n+}\n+template<int> void f(int i __attribute__((unused)) )\n+{}\n+"}]}