{"sha": "d51ff7cb78e8de31e871d19aaa9990eb2e881969", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUxZmY3Y2I3OGU4ZGUzMWU4NzFkMTlhYWE5OTkwZWIyZTg4MTk2OQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "2000-08-25T21:50:06Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2000-08-25T21:50:06Z"}, "message": "Fix IA-64 abort on testcase with switch statement that can be optimized away.\n\n\t* cse.c (cse_insn): Don't pass label subtraction to force_const_mem.\n\nFrom-SVN: r35992", "tree": {"sha": "f0c898675419e8d912e9e12b38239b8cfc4d2098", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f0c898675419e8d912e9e12b38239b8cfc4d2098"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d51ff7cb78e8de31e871d19aaa9990eb2e881969", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d51ff7cb78e8de31e871d19aaa9990eb2e881969", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d51ff7cb78e8de31e871d19aaa9990eb2e881969", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d51ff7cb78e8de31e871d19aaa9990eb2e881969/comments", "author": null, "committer": null, "parents": [{"sha": "caa511fdfa952a7fff177e3f4963ec4e1f3f9166", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caa511fdfa952a7fff177e3f4963ec4e1f3f9166", "html_url": "https://github.com/Rust-GCC/gccrs/commit/caa511fdfa952a7fff177e3f4963ec4e1f3f9166"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "6424caea135e386cbd26d09a86779b047a20ccb5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51ff7cb78e8de31e871d19aaa9990eb2e881969/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51ff7cb78e8de31e871d19aaa9990eb2e881969/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d51ff7cb78e8de31e871d19aaa9990eb2e881969", "patch": "@@ -1,5 +1,7 @@\n 2000-08-25  Jim Wilson  <wilson@cygnus.com>\n \n+\t* cse.c (cse_insn): Don't pass label subtraction to force_const_mem.\n+\n \t* function.c (gen_mem_addressof): Clear MEM_ALIAS_SET if no decl.\n \n 2000-08-25  Greg McGary  <greg@mcgary.org>"}, {"sha": "c0b72e305745ab526953a41b53cf9286b0769f86", "filename": "gcc/cse.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51ff7cb78e8de31e871d19aaa9990eb2e881969/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51ff7cb78e8de31e871d19aaa9990eb2e881969/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=d51ff7cb78e8de31e871d19aaa9990eb2e881969", "patch": "@@ -5328,8 +5328,16 @@ cse_insn (insn, libcall_insn)\n \n \t  else if (constant_pool_entries_cost\n \t\t   && CONSTANT_P (trial)\n+\t\t   /* Reject cases that will abort in decode_rtx_const.\n+\t\t      On the alpha when simplifying a switch, we get\n+\t\t      (const (truncate (minus (label_ref) (label_ref)))).  */\n \t\t   && ! (GET_CODE (trial) == CONST\n \t\t\t && GET_CODE (XEXP (trial, 0)) == TRUNCATE)\n+\t\t   /* Likewise on IA-64, except without the truncate.  */\n+\t\t   && ! (GET_CODE (trial) == CONST\n+\t\t\t && GET_CODE (XEXP (trial, 0)) == MINUS\n+\t\t\t && GET_CODE (XEXP (XEXP (trial, 0), 0)) == LABEL_REF\n+\t\t\t && GET_CODE (XEXP (XEXP (trial, 0), 1)) == LABEL_REF)\n \t\t   && (src_folded == 0\n \t\t       || (GET_CODE (src_folded) != MEM\n \t\t\t   && ! src_folded_force_flag))"}]}