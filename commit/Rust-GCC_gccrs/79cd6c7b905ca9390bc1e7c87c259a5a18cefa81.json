{"sha": "79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzljZDZjN2I5MDVjYTkzOTBiYzFlN2M4N2MyNTlhNWExOGNlZmE4MQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-10-21T19:29:41Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-10-21T19:29:41Z"}, "message": "parser.c (cp_parser_class_head): Improve error recovery upon extra qualification error.\n\n/cp\n2019-10-21  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* parser.c (cp_parser_class_head): Improve error recovery upon\n\textra qualification error.\n\n/testsuite\n2019-10-21  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/parse/qualified2.C: Tighten dg-error directive.\n\t* g++.old-deja/g++.other/decl5.C: Don't expect redundant error.\n\nFrom-SVN: r277268", "tree": {"sha": "4c70fff8023627a84ce3887ab08492d416c7df86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4c70fff8023627a84ce3887ab08492d416c7df86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/comments", "author": null, "committer": null, "parents": [{"sha": "5b884e9400741569ee385f0de4590c1730aa600c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b884e9400741569ee385f0de4590c1730aa600c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b884e9400741569ee385f0de4590c1730aa600c"}], "stats": {"total": 27, "additions": 16, "deletions": 11}, "files": [{"sha": "19a687a4b795b760a610c2b2f0448715c5131af0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "patch": "@@ -1,3 +1,8 @@\n+2019-10-21  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* parser.c (cp_parser_class_head): Improve error recovery upon\n+\textra qualification error.\n+\n 2019-10-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/92015"}, {"sha": "6433f870b2e249aa7fd956562ecf6d03b1d755c2", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "patch": "@@ -24178,12 +24178,8 @@ cp_parser_class_head (cp_parser* parser,\n \t ... [or] the definition or explicit instantiation of a\n \t class member of a namespace outside of its namespace.  */\n       if (scope == nested_name_specifier)\n-\t{\n-\t  permerror (nested_name_specifier_token_start->location,\n-\t\t     \"extra qualification not allowed\");\n-\t  nested_name_specifier = NULL_TREE;\n-\t  num_templates = 0;\n-\t}\n+\tpermerror (nested_name_specifier_token_start->location,\n+\t\t   \"extra qualification not allowed\");\n     }\n   /* An explicit-specialization must be preceded by \"template <>\".  If\n      it is not, try to recover gracefully.  */"}, {"sha": "5aec5cd817a235b3f66ba7633b332e11ce8a2ec3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "patch": "@@ -1,3 +1,8 @@\n+2019-10-21  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/parse/qualified2.C: Tighten dg-error directive.\n+\t* g++.old-deja/g++.other/decl5.C: Don't expect redundant error.\n+\n 2019-10-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/92015"}, {"sha": "ef1bedb08ecbde533a0ea6dc99ee9b3705980521", "filename": "gcc/testsuite/g++.dg/parse/qualified2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fqualified2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fqualified2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fqualified2.C?ref=79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "patch": "@@ -1,4 +1,4 @@\n namespace Glib {\n   template <typename> class Value {};\n-  template <>         class Glib::Value<int> {}; // { dg-error \"\" }\n+  template <>         class Glib::Value<int> {}; // { dg-error \"29:extra qualification\" }\n }"}, {"sha": "26556aaa7ef51dde2371c8f8633d13be3d8315e1", "filename": "gcc/testsuite/g++.old-deja/g++.other/decl5.C", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdecl5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/79cd6c7b905ca9390bc1e7c87c259a5a18cefa81/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdecl5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdecl5.C?ref=79cd6c7b905ca9390bc1e7c87c259a5a18cefa81", "patch": "@@ -8,11 +8,10 @@\n \n \n struct A {\n-  int A::fn();        // { dg-error \"extra qualification\" } \n-  int A::m;           // { dg-error \"extra qualification\" } \n+  int A::fn();        // { dg-error \"7:extra qualification\" } \n+  int A::m;           // { dg-error \"7:extra qualification\" } \n   struct e;\n-  struct A::e {int i;}; // { dg-error \"extra qualification\" \"qual\" } \n-  // { dg-error \"anonymous struct\" \"anon\" { target *-*-* } .-1 }\n+  struct A::e {int i;}; // { dg-error \"10:extra qualification\" \"qual\" } \n   struct A::expand {  // { dg-error \"qualified name\" } \n   int m;\n   };"}]}