{"sha": "26658d3a35a9206153d7b1d5f03decd1bdf65062", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY2NThkM2EzNWE5MjA2MTUzZDdiMWQ1ZjAzZGVjZDFiZGY2NTA2Mg==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2008-03-26T07:39:39Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-03-26T07:39:39Z"}, "message": "exp_pakd.adb (Expand_Bit_Packed_Element_Set): If the component assignment is within the initialization procedure for a packed...\n\n2008-03-26  Ed Schonberg  <schonberg@adacore.com>\n\n\t* exp_pakd.adb (Expand_Bit_Packed_Element_Set): If the component\n\tassignment is within the initialization procedure for a packed array,\n\tand Initialize_Scalars is enabled, compile right-hand side with checks\n\toff, because the value is purposely out of range.\n\nFrom-SVN: r133566", "tree": {"sha": "49b583aa825aa02482631f1ef26b0030641c041b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49b583aa825aa02482631f1ef26b0030641c041b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26658d3a35a9206153d7b1d5f03decd1bdf65062", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26658d3a35a9206153d7b1d5f03decd1bdf65062", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26658d3a35a9206153d7b1d5f03decd1bdf65062", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26658d3a35a9206153d7b1d5f03decd1bdf65062/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c364d9be816f5f261d0ffaed6f0e87eed57731f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c364d9be816f5f261d0ffaed6f0e87eed57731f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c364d9be816f5f261d0ffaed6f0e87eed57731f4"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "68feec5aa3f115318a5822ae718b910863b92159", "filename": "gcc/ada/exp_pakd.adb", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26658d3a35a9206153d7b1d5f03decd1bdf65062/gcc%2Fada%2Fexp_pakd.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26658d3a35a9206153d7b1d5f03decd1bdf65062/gcc%2Fada%2Fexp_pakd.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_pakd.adb?ref=26658d3a35a9206153d7b1d5f03decd1bdf65062", "patch": "@@ -33,6 +33,7 @@ with Layout;   use Layout;\n with Namet;    use Namet;\n with Nlists;   use Nlists;\n with Nmake;    use Nmake;\n+with Opt;      use Opt;\n with Rtsfind;  use Rtsfind;\n with Sem;      use Sem;\n with Sem_Ch3;  use Sem_Ch3;\n@@ -1359,7 +1360,19 @@ package body Exp_Pakd is\n \n       Rhs := Convert_To (Ctyp, Rhs);\n       Set_Parent (Rhs, N);\n-      Analyze_And_Resolve (Rhs, Ctyp);\n+\n+      --  If we are building the initialization procedure for a packed array,\n+      --  and Initialize_Scalars is enabled, each component assignment is an\n+      --  out-of-range value by design.  Compile this value without checks,\n+      --  because a call to the array init_proc must not raise an exception.\n+\n+      if Within_Init_Proc\n+        and then Initialize_Scalars\n+      then\n+         Analyze_And_Resolve (Rhs, Ctyp, Suppress => All_Checks);\n+      else\n+         Analyze_And_Resolve (Rhs, Ctyp);\n+      end if;\n \n       --  Case of component size 1,2,4 or any component size for the modular\n       --  case. These are the cases for which we can inline the code."}]}