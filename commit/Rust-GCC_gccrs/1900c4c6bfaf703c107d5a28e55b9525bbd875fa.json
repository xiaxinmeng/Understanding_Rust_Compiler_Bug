{"sha": "1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTkwMGM0YzZiZmFmNzAzYzEwN2Q1YTI4ZTU1Yjk1MjViYmQ4NzVmYQ==", "commit": {"author": {"name": "Mark Wielaard", "email": "mark@klomp.org", "date": "2004-05-31T23:03:01Z"}, "committer": {"name": "Michael Koch", "email": "mkoch@gcc.gnu.org", "date": "2004-05-31T23:03:01Z"}, "message": "GtkComponentPeer.java (requestFocus): Implement by calling gtkRequestFocus.\n\n2004-06-01  Mark Wielaard  <mark@klomp.org>\n\n\t* gnu/java/awt/peer/gtk/GtkComponentPeer.java (requestFocus):\n\tImplement by calling gtkRequestFocus.\n\t(gtkRequestFocus): New native method.\n\t* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkComponentPeer.c\n\t(Java_gnu_java_awt_peer_gtk_GtkComponentPeer_requestFocus__):\n\tRenamed to ...\n\t(Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkRequestFocus):\n\tNew function name.\n\t(filter_expose_event_handler):\n\tMark static.\n\t* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkPopupMenuPeer.c\n\t(menu_pos): Mark static.\n\nFrom-SVN: r82517", "tree": {"sha": "feed0a2b7afb4720064d544589b45b59cab8561a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/feed0a2b7afb4720064d544589b45b59cab8561a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/comments", "author": null, "committer": null, "parents": [{"sha": "e17b3578a3b043e0ee9a8493224287e79f9bb2c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e17b3578a3b043e0ee9a8493224287e79f9bb2c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e17b3578a3b043e0ee9a8493224287e79f9bb2c9"}], "stats": {"total": 34, "additions": 26, "deletions": 8}, "files": [{"sha": "aed49734797a799161c96feab9b2b0b54b3d4b9b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "patch": "@@ -1,3 +1,18 @@\n+2004-06-01  Mark Wielaard  <mark@klomp.org>\n+\n+\t* gnu/java/awt/peer/gtk/GtkComponentPeer.java (requestFocus):\n+\tImplement by calling gtkRequestFocus.\n+\t(gtkRequestFocus): New native method.\n+\t* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkComponentPeer.c\n+\t(Java_gnu_java_awt_peer_gtk_GtkComponentPeer_requestFocus__):\n+\tRenamed to ...\n+\t(Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkRequestFocus):\n+\tNew function name.\n+\t(filter_expose_event_handler):\n+\tMark static.\n+\t* native/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkPopupMenuPeer.c\n+\t(menu_pos): Mark static.\n+\n 2004-06-01  Michael Koch  <konqueror@gmx.de>\n \n \t* java/text/CollationElementIterator.java,"}, {"sha": "15d3d5c4b02fc77226147b7bb8981d1164baa142", "filename": "libjava/gnu/java/awt/peer/gtk/GtkComponentPeer.java", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Fawt%2Fpeer%2Fgtk%2FGtkComponentPeer.java?ref=1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "patch": "@@ -353,10 +353,14 @@ public void repaint (long tm, int x, int y, int width, int height)\n \n   public void requestFocus ()\n   {\n-    gtkWidgetRequestFocus ();\n-    postFocusEvent (FocusEvent.FOCUS_GAINED, false);\n+    gtkRequestFocus();\n   }\n \n+  // Called from requestFocus, we don't want to make requestFocus itself\n+  // native since several JNI header generators have difficulties with\n+  // overridden and/or miranda methods. (Bug in gcjh < 3.5.)\n+  native private void gtkRequestFocus ();\n+\n   public void reshape (int x, int y, int width, int height) \n   {\n     setBounds (x, y, width, height);"}, {"sha": "565484c824febfdfe73b3a121b0dbc5d679e22a5", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkComponentPeer.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkComponentPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkComponentPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkComponentPeer.c?ref=1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "patch": "@@ -472,7 +472,7 @@ Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkWidgetSetCursor\n }\n \n JNIEXPORT void JNICALL\n-Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkWidgetRequestFocus\n+Java_gnu_java_awt_peer_gtk_GtkComponentPeer_gtkRequestFocus\n   (JNIEnv *env, jobject obj)\n {\n   void *ptr;\n@@ -1056,7 +1056,7 @@ Java_gnu_java_awt_peer_gtk_GtkComponentPeer_set__Ljava_lang_String_2Ljava_lang_O\n   (*env)->ReleaseStringUTFChars (env, jname, name);\n }\n \n-gboolean\n+static gboolean\n filter_expose_event_handler (GtkWidget *widget, GdkEvent *event, jobject peer)\n {\n   /*"}, {"sha": "41718017c0ab67371ce87075393cc2525dec8e2a", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkPopupMenuPeer.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkPopupMenuPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1900c4c6bfaf703c107d5a28e55b9525bbd875fa/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkPopupMenuPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkPopupMenuPeer.c?ref=1900c4c6bfaf703c107d5a28e55b9525bbd875fa", "patch": "@@ -39,15 +39,13 @@ exception statement from your version. */\n #include \"gtkpeer.h\"\n #include \"gnu_java_awt_peer_gtk_GtkPopupMenuPeer.h\"\n \n-void menu_pos (GtkMenu *, gint *, gint *, gboolean *, gpointer);\n-\n struct pos\n {\n   gint x;\n   gint y;\n };\n \n-void \n+static void \n menu_pos (GtkMenu *menu __attribute__((unused)),\n \t  gint *x, gint *y,\n \t  gboolean *push_in,\n@@ -93,7 +91,8 @@ Java_gnu_java_awt_peer_gtk_GtkPopupMenuPeer_setupAccelGroup\n   gdk_threads_enter ();\n   menu = GTK_MENU (GTK_MENU_ITEM (ptr1)->submenu);\n   gtk_menu_set_accel_group (menu, gtk_accel_group_new ());\n-  /* FIXME: update this to use GTK-2.4 GtkActions. */\n+  /* FIXME: _gtk_accel_group_attach is a GTK-private function, so\n+     we'll need a different approach here: */\n #if 0\n   _gtk_accel_group_attach (gtk_menu_get_accel_group (menu),\n \t\t\t   G_OBJECT (gtk_widget_get_toplevel (ptr2)));"}]}