{"sha": "31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFmYWQ1OGZiYjMwZjFmZDM3YzU3NDE3ZDBlMTJhMGNmMTMzMTZiNQ==", "commit": {"author": {"name": "Xianmiao Qu", "email": "xianmiao_qu@c-sky.com", "date": "2018-11-12T02:36:45Z"}, "committer": {"name": "Xianmiao Qu", "email": "xianmiao@gcc.gnu.org", "date": "2018-11-12T02:36:45Z"}, "message": "csky.md (*fpuv2_nmulsf3_1, [...]): Handle -frounding-math.\n\n2018-11-11  Xianmiao Qu  <xianmiao_qu@c-sky.com>\n\n\tgcc/\n\t* config/csky/csky.md (*fpuv2_nmulsf3_1, *fpuv2_nmuldf3_1): Handle\n\t-frounding-math.\n\n\tgcc/testsuite\n\t* gcc.target/csky/fnmul-1.c: New.\n\t* gcc.target/csky/fnmul-2.c: New.\n\t* gcc.target/csky/fnmul-3.c: New.\n\t* gcc.target/csky/fnmul-4.c: New.\n\nFrom-SVN: r266024", "tree": {"sha": "36a799d029974cbe0451332d728c4da4f22ebcff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36a799d029974cbe0451332d728c4da4f22ebcff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/comments", "author": null, "committer": null, "parents": [{"sha": "9510b56378a931af22c6dcccb8cf62105d0a69ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9510b56378a931af22c6dcccb8cf62105d0a69ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9510b56378a931af22c6dcccb8cf62105d0a69ba"}], "stats": {"total": 86, "additions": 84, "deletions": 2}, "files": [{"sha": "066ef79f51d3a6d9c057c8bc31be8f90356869b1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "patch": "@@ -1,3 +1,8 @@\n+2018-11-11  Xianmiao Qu  <xianmiao_qu@c-sky.com>\n+\n+\t* config/csky/csky.md (*fpuv2_nmulsf3_1, *fpuv2_nmuldf3_1): Handle\n+\t-frounding-math.\n+\n 2018-11-11  Sandra Loosemore  <sandra@codesourcery.com>\n \n \tPR c++/43105"}, {"sha": "0598203e48f3084ba6aac336ad9a49d17efb8e35", "filename": "gcc/config/csky/csky_insn_fpu.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Fconfig%2Fcsky%2Fcsky_insn_fpu.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Fconfig%2Fcsky%2Fcsky_insn_fpu.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcsky%2Fcsky_insn_fpu.md?ref=31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "patch": "@@ -131,7 +131,7 @@\n   [(set (match_operand:SF\t\t   0 \"register_operand\" \"=v\")\n \t(mult:SF (neg:SF (match_operand:SF 1 \"register_operand\" \"%v\"))\n \t\t (match_operand:SF\t   2 \"register_operand\" \"v\")))]\n-  \"CSKY_ISA_FEATURE (fpv2_sf)\"\n+  \"CSKY_ISA_FEATURE (fpv2_sf) && !flag_rounding_math\"\n   \"fnmuls\\t%0, %1, %2\")\n \n (define_insn \"*fpuv2_nmulsf3_2\"\n@@ -145,7 +145,7 @@\n   [(set (match_operand:DF\t\t   0 \"register_operand\" \"=v\")\n \t(mult:DF (neg:DF (match_operand:DF 1 \"register_operand\" \"%v\"))\n \t\t (match_operand:DF\t   2 \"register_operand\" \"v\")))]\n- \"CSKY_ISA_FEATURE (fpv2_df)\"\n+ \"CSKY_ISA_FEATURE (fpv2_df) && !flag_rounding_math\"\n  \"fnmuld\\t%0, %1, %2\")\n \n (define_insn \"*fpuv2_nmuldf3_2\""}, {"sha": "31ad101796cfab4b9151c4e7ed19eeaaaff75c02", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "patch": "@@ -1,3 +1,10 @@\n+2018-11-11  Xianmiao Qu  <xianmiao_qu@c-sky.com>\n+\n+\t* gcc.target/csky/fnmul-1.c: New.\n+\t* gcc.target/csky/fnmul-2.c: New.\n+\t* gcc.target/csky/fnmul-3.c: New.\n+\t* gcc.target/csky/fnmul-4.c: New.\n+\n 2018-11-11  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/87928"}, {"sha": "7e4f77ad2ccaa14fb9301d573387499f97e6636d", "filename": "gcc/testsuite/gcc.target/csky/fnmul-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-1.c?ref=31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mcpu=ck810f -mhard-float -O2\" } */\n+\n+double\n+fnmuld (double a, double b)\n+{\n+  /* { dg-final { scan-assembler \"fnmuld\" } } */\n+  return -a * b;\n+}\n+\n+float\n+fnmuls (float a, float b)\n+{\n+  /* { dg-final { scan-assembler \"fnmuls\" } } */\n+  return -a * b;\n+}\n+"}, {"sha": "f12ebc1f41ea24431c9eb419ca409134d0120dae", "filename": "gcc/testsuite/gcc.target/csky/fnmul-2.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-2.c?ref=31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mcpu=ck810f -mhard-float -O2 -frounding-math\" } */\n+\n+double\n+fnmuld (double a, double b)\n+{\n+  /* { dg-final { scan-assembler \"fnegd\" } } */\n+  /* { dg-final { scan-assembler \"fmuld\" } } */\n+  return -a * b;\n+}\n+\n+float\n+fnmuls (float a, float b)\n+{\n+  /* { dg-final { scan-assembler \"fnegs\" } } */\n+  /* { dg-final { scan-assembler \"fmuls\" } } */\n+  return -a * b;\n+}\n+"}, {"sha": "558e23cccaa3bc33df18cf0741627c550fd476f7", "filename": "gcc/testsuite/gcc.target/csky/fnmul-3.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-3.c?ref=31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mcpu=ck810f -mhard-float -O2\" } */\n+\n+double\n+fnmuld (double a, double b)\n+{\n+  /* { dg-final { scan-assembler \"fnmuld\" } } */\n+  return -(a * b);\n+}\n+\n+float\n+fnmuls (float a, float b)\n+{\n+  /* { dg-final { scan-assembler \"fnmuls\" } } */\n+  return -(a * b);\n+}\n+"}, {"sha": "fa186bbac1ddd15168d9ae35b2512e7d1b52957b", "filename": "gcc/testsuite/gcc.target/csky/fnmul-4.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31fad58fbb30f1fd37c57417d0e12a0cf13316b5/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcsky%2Ffnmul-4.c?ref=31fad58fbb30f1fd37c57417d0e12a0cf13316b5", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mcpu=ck810f -mhard-float -O2 -frounding-math\" } */\n+\n+double\n+fnmuld (double a, double b)\n+{\n+  /* { dg-final { scan-assembler \"fnmuld\" } } */\n+  return -(a * b);\n+}\n+\n+float\n+fnmuls (float a, float b)\n+{\n+  /* { dg-final { scan-assembler \"fnmuls\" } } */\n+  return -(a * b);\n+}\n+"}]}