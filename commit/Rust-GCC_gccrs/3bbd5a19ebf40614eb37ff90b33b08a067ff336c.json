{"sha": "3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2JiZDVhMTllYmY0MDYxNGViMzdmZjkwYjMzYjA4YTA2N2ZmMzM2Yw==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gnu.org", "date": "2007-06-14T08:10:41Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2007-06-14T08:10:41Z"}, "message": "acinclude.m4 (gcc_AC_CHECK_PROG_VER): Remove.\n\ngcc:\n2007-06-14  Paolo Bonzini  <bonzini@gnu.org>\n\n        * acinclude.m4 (gcc_AC_CHECK_PROG_VER): Remove.\n        * aclocal.m4: Regenerate.\n        * configure.ac: Use ACX_PROG_CC_WARNING_OPTS,\n        ACX_PROG_CC_WARNINGS_ARE_ERRORS,\n        ACX_PROG_CC_WARNING_ALMOST_PEDANTIC, ACX_CHECK_PROG_VER.\n\t* configure: Regenerate.\n        * Makefile.in (LOOSE_WARN): Subst loose_warn.\n\n        * Makefile.in (quickstrap): Build libgcc too.\n\nlibiberty:\n2007-06-14  Paolo Bonzini  <bonzini@gnu.org>\n\n        * aclocal.m4: Include config/warnings.m4.\n        * configure.ac: Use ACX_PROG_CC_WARNING_OPTS.\n\t* configure: Regenerate.\n\nconfig:\n2007-06-14  Paolo Bonzini  <bonzini@gnu.org>\n\n        * acx.m4 (ACX_CHECK_PROG_VER): Remove duplicate lines.\n\nFrom-SVN: r125700", "tree": {"sha": "e1649df2ad83de07dc779eac38c55ae683384d82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1649df2ad83de07dc779eac38c55ae683384d82"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/comments", "author": {"login": "bonzini", "id": 42082, "node_id": "MDQ6VXNlcjQyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonzini", "html_url": "https://github.com/bonzini", "followers_url": "https://api.github.com/users/bonzini/followers", "following_url": "https://api.github.com/users/bonzini/following{/other_user}", "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "organizations_url": "https://api.github.com/users/bonzini/orgs", "repos_url": "https://api.github.com/users/bonzini/repos", "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ab28cc38fd873f18a37addd30f196631c1406717", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab28cc38fd873f18a37addd30f196631c1406717", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab28cc38fd873f18a37addd30f196631c1406717"}], "stats": {"total": 594, "additions": 220, "deletions": 374}, "files": [{"sha": "af27fc693961d048a39762df961e6121db2caa50", "filename": "config/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -1,3 +1,7 @@\n+2007-06-14  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* acx.m4 (ACX_CHECK_PROG_VER): Remove duplicate lines.\n+\n 2007-06-04  Olivier Hainque  <hainque@adacore.com>\n \n \t* mh-ppc-aix: Add default ADAFLAGS to BOOT_ADAFLAGS."}, {"sha": "a70d4077c33ec97da109767fe77e2b8a9fbbf3da", "filename": "config/acx.m4", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/config%2Facx.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/config%2Facx.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Facx.m4?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -540,10 +540,6 @@ AC_DEFUN([ACX_CHECK_PROG_VER],[\n                       $5)  gcc_cv_prog_$2_modern=yes;;\n                       *)   gcc_cv_prog_$2_modern=no;;\n                     esac]\n-\n-                    if test $gcc_cv_prog_$2_modern = no; then\n-                      $1=\"${CONFIG_SHELL-/bin/sh} $ac_aux_dir/missing $2\"\n-                    fi\n                    ])\n   else\n     gcc_cv_prog_$2_modern=no"}, {"sha": "723786c3152c2fe9b6552ce692b205021d6cec5a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -1,3 +1,15 @@\n+2007-06-14  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* acinclude.m4 (gcc_AC_CHECK_PROG_VER): Remove.\n+\t* aclocal.m4: Regenerate.\n+\t* configure.ac: Use ACX_PROG_CC_WARNING_OPTS,\n+\tACX_PROG_CC_WARNINGS_ARE_ERRORS,\n+\tACX_PROG_CC_WARNING_ALMOST_PEDANTIC, ACX_CHECK_PROG_VER.\n+\t* configure: Regenerate.\n+        * Makefile.in (LOOSE_WARN): Subst loose_warn.\n+\n+        * Makefile.in (quickstrap): Build libgcc too.\n+\n 2007-06-14  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* configure.ac: Add --enable-checking=df.  Explicitly mention that"}, {"sha": "040007e975170edb912bf0ec25a87e427826a5a3", "filename": "gcc/Makefile.in", "status": "modified", "additions": 15, "deletions": 9, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -31,10 +31,6 @@\n # \"all.cross\" to build a cross compiler.\n all: @ALL@\n \n-# Provide quickstrap as a target that people can type into the gcc directory,\n-# and that fails if you're not into it.\n-quickstrap: all\n-\n # Depend on this to specify a phony target portably.\n force:\n \n@@ -83,22 +79,27 @@ abs_docdir = @abs_srcdir@/doc\n \n # Top build directory for this package, relative to here.\n top_builddir = .\n+\n # objdir is set by configure.\n # It's normally the absolute path to the current directory.\n objdir = @objdir@\n \n host_subdir=@host_subdir@\n build_subdir=@build_subdir@\n+target_subdir=@target_subdir@\n build_libsubdir=@build_libsubdir@\n \n+# Top build directory for the \"Cygnus tree\", relative to $(top_builddir).\n ifeq ($(host_subdir),.)\n-build_objdir := ../$(build_subdir)\n-build_libobjdir := ../$(build_libsubdir)\n+toplevel_builddir := ..\n else\n-build_objdir := ../../$(build_subdir)\n-build_libobjdir := ../../$(build_libsubdir)\n+toplevel_builddir := ../..\n endif\n \n+build_objdir := $(toplevel_builddir)/$(build_subdir)\n+build_libobjdir := $(toplevel_builddir)/$(build_libsubdir)\n+target_objdir := $(toplevel_builddir)/$(target_subdir)\n+\n # --------\n # Defined vpaths\n # --------\n@@ -166,7 +167,7 @@ coverageexts = .{gcda,gcno}\n # apply to the back end and the C front end, which may be compiled\n # with other compilers.\n # CXX_COMPAT_WARN are C++ source compatibility warnings.\n-LOOSE_WARN = -W -Wall -Wwrite-strings -Wstrict-prototypes -Wmissing-prototypes\n+LOOSE_WARN = @loose_warn@\n STRICT_WARN = @strict_warn@\n CXX_COMPAT_WARN = @cxx_compat_warn@\n \n@@ -1424,6 +1425,11 @@ config.status: $(srcdir)/configure $(srcdir)/config.gcc\n # UNSORTED\n # --------\n \n+# Provide quickstrap as a target that people can type into the gcc directory,\n+# and that fails if you're not into it.\n+quickstrap: all\n+\tcd $(toplevel_builddir) && $(MAKE) all-target-libgcc\n+\n all.internal: start.encap rest.encap doc\n # This is what to compile if making a cross-compiler.\n all.cross: native gcc-cross$(exeext) cpp$(exeext) specs \\"}, {"sha": "70322c75e6b96dbd337c91a537b2e6ad832a6ae5", "filename": "gcc/acinclude.m4", "status": "modified", "additions": 0, "deletions": 28, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Facinclude.m4?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -295,34 +295,6 @@ if test $gcc_cv_func_mmap_anon = yes; then\n fi\n ])\n \n-dnl Locate a program and check that its version is acceptable.\n-dnl AC_PROG_CHECK_VER(var, name, version-switch,\n-dnl                  version-extract-regexp, version-glob)\n-AC_DEFUN([gcc_AC_CHECK_PROG_VER],\n-[AC_REQUIRE([gcc_AC_BUILD_EXEEXT])\n-AC_CHECK_PROG([$1], [$2], [$2])\n-if test -n \"[$]$1\"; then\n-  # Found it, now check the version.\n-  AC_CACHE_CHECK(for modern $2, gcc_cv_prog_$2_modern,\n-[changequote(<<,>>)dnl\n-  ac_prog_version=`<<$>>$1 $3 2>&1 |\n-                   sed -n 's/^.*patsubst(<<$4>>,/,\\/).*$/\\1/p'`\n-changequote([,])dnl\n-  echo \"configure:__oline__: version of $2 is $ac_prog_version\" >&AS_MESSAGE_LOG_FD\n-changequote(<<,>>)dnl\n-  case $ac_prog_version in\n-    '')     gcc_cv_prog_$2_modern=no;;\n-    <<$5>>)\n-            gcc_cv_prog_$2_modern=yes;;\n-    *)      gcc_cv_prog_$2_modern=no;;\n-  esac\n-changequote([,])dnl\n-])\n-else\n-  gcc_cv_prog_$2_modern=no\n-fi\n-])\n-\n dnl Determine if enumerated bitfields are unsigned.   ISO C says they can \n dnl be either signed or unsigned.\n dnl"}, {"sha": "b89f4fa37668414c83e3e16cf05dece4911f7edc", "filename": "gcc/aclocal.m4", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Faclocal.m4?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -101,4 +101,5 @@ m4_include([../config/lib-ld.m4])\n m4_include([../config/lib-link.m4])\n m4_include([../config/lib-prefix.m4])\n m4_include([../config/progtest.m4])\n+m4_include([../config/warnings.m4])\n m4_include([acinclude.m4])"}, {"sha": "5900d2083d1dc52b56c8d8d355ca15801c275b11", "filename": "gcc/configure", "status": "modified", "additions": 137, "deletions": 191, "changes": 328, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_libsubdir build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP strict_warn cxx_compat_warn warn_cflags nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_decimal_float enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep datarootdir docdir htmldir SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LTLIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file extra_opt_files USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT host_cc_for_libada CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 gcc_cv_as ORIGINAL_AS_FOR_TARGET gcc_cv_ld ORIGINAL_LD_FOR_TARGET gcc_cv_nm ORIGINAL_NM_FOR_TARGET gcc_cv_objdump libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_compilers all_gtfiles all_lang_makefrags all_lang_makefiles all_languages all_selected_languages build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_libsubdir build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP loose_warn cxx_compat_warn strict_warn warn_cflags nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_decimal_float enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep datarootdir docdir htmldir SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LTLIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file extra_opt_files USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS DATADIRNAME INSTOBJEXT GENCAT CATOBJEXT host_cc_for_libada CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 gcc_cv_as ORIGINAL_AS_FOR_TARGET gcc_cv_ld ORIGINAL_LD_FOR_TARGET gcc_cv_nm ORIGINAL_NM_FOR_TARGET gcc_cv_objdump libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_compilers all_gtfiles all_lang_makefrags all_lang_makefiles all_languages all_selected_languages build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n ac_subst_files='language_hooks'\n \n # Initialize some variables set by options.\n@@ -862,7 +862,7 @@ Optional Features:\n                           put copies of generated files in source dir\n                           intended for creating source tarballs for users\n                           without texinfo bison or flex.\n-  --enable-werror-always         enable -Werror always\n+  --enable-werror-always  enable -Werror despite compiler version\n   --enable-checking=LIST\n \t\t\t  enable expensive run-time checks.  With LIST,\n \t\t\t  enable only specific categories of checks.\n@@ -6106,20 +6106,32 @@ fi\n # * overlong strings\n # So, we only use -pedantic if we can disable those warnings.\n \n-echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wno-long-long\" >&5\n-echo $ECHO_N \"checking whether ${CC} accepts -Wno-long-long... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_w_no_long_long+set}\" = set; then\n+loose_warn=\n+save_CFLAGS=\"$CFLAGS\"\n+for option in -W -Wall -Wwrite-strings -Wstrict-prototypes \\\n+\t\t\t  -Wmissing-prototypes; do\n+  as_acx_Woption=`echo \"acx_cv_prog_cc_warning_$option\" | $as_tr_sh`\n+\n+  echo \"$as_me:$LINENO: checking whether $CC supports $option\" >&5\n+echo $ECHO_N \"checking whether $CC supports $option... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_acx_Woption+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wno-long-long\"\n-  cat >conftest.$ac_ext <<_ACEOF\n+  CFLAGS=\"$option\"\n+    cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n \n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n _ACEOF\n rm -f conftest.$ac_objext\n if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n@@ -6143,34 +6155,50 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_w_no_long_long=yes\n+  eval \"$as_acx_Woption=yes\"\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-ac_cv_prog_cc_w_no_long_long=no\n+eval \"$as_acx_Woption=no\"\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-  CFLAGS=\"$save_CFLAGS\"\n \n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_no_long_long\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_w_no_long_long\" >&6\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_acx_Woption'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_acx_Woption'}'`\" >&6\n+  if test `eval echo '${'$as_acx_Woption'}'` = yes; then\n+  loose_warn=\"$loose_warn${loose_warn:+ }$option\"\n+fi\n+\n+  done\n+CFLAGS=\"$save_CFLAGS\"\n+\n+cxx_compat_warn=\n+save_CFLAGS=\"$CFLAGS\"\n+for option in -Wc++-compat; do\n+  as_acx_Woption=`echo \"acx_cv_prog_cc_warning_$option\" | $as_tr_sh`\n \n-echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wno-variadic-macros\" >&5\n-echo $ECHO_N \"checking whether ${CC} accepts -Wno-variadic-macros... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_w_no_variadic_macros+set}\" = set; then\n+  echo \"$as_me:$LINENO: checking whether $CC supports $option\" >&5\n+echo $ECHO_N \"checking whether $CC supports $option... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_acx_Woption+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wno-variadic-macros\"\n-  cat >conftest.$ac_ext <<_ACEOF\n+  CFLAGS=\"$option\"\n+    cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n \n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n _ACEOF\n rm -f conftest.$ac_objext\n if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n@@ -6194,34 +6222,51 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_w_no_variadic_macros=yes\n+  eval \"$as_acx_Woption=yes\"\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-ac_cv_prog_cc_w_no_variadic_macros=no\n+eval \"$as_acx_Woption=no\"\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-  CFLAGS=\"$save_CFLAGS\"\n \n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_no_variadic_macros\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_w_no_variadic_macros\" >&6\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_acx_Woption'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_acx_Woption'}'`\" >&6\n+  if test `eval echo '${'$as_acx_Woption'}'` = yes; then\n+  cxx_compat_warn=\"$cxx_compat_warn${cxx_compat_warn:+ }$option\"\n+fi\n+\n+  done\n+CFLAGS=\"$save_CFLAGS\"\n \n-echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wno-overlength-strings\" >&5\n-echo $ECHO_N \"checking whether ${CC} accepts -Wno-overlength-strings... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_w_no_overlength_strings+set}\" = set; then\n+strict_warn=\n+save_CFLAGS=\"$CFLAGS\"\n+for option in -Wold-style-definition \\\n+                          -Wmissing-format-attribute; do\n+  as_acx_Woption=`echo \"acx_cv_prog_cc_warning_$option\" | $as_tr_sh`\n+\n+  echo \"$as_me:$LINENO: checking whether $CC supports $option\" >&5\n+echo $ECHO_N \"checking whether $CC supports $option... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_acx_Woption+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wno-overlength-strings\"\n-  cat >conftest.$ac_ext <<_ACEOF\n+  CFLAGS=\"$option\"\n+    cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n \n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n _ACEOF\n rm -f conftest.$ac_objext\n if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n@@ -6245,42 +6290,50 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_w_no_overlength_strings=yes\n+  eval \"$as_acx_Woption=yes\"\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-ac_cv_prog_cc_w_no_overlength_strings=no\n+eval \"$as_acx_Woption=no\"\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-  CFLAGS=\"$save_CFLAGS\"\n \n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_no_overlength_strings\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_w_no_overlength_strings\" >&6\n-\n-strict_warn=\n-if test $ac_cv_prog_cc_w_no_long_long = yes \\\n-   && test $ac_cv_prog_cc_w_no_variadic_macros = yes \\\n-   && test $ac_cv_prog_cc_w_no_overlength_strings = yes ; then\n-  strict_warn=\"-pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings\"\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_acx_Woption'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_acx_Woption'}'`\" >&6\n+  if test `eval echo '${'$as_acx_Woption'}'` = yes; then\n+  strict_warn=\"$strict_warn${strict_warn:+ }$option\"\n fi\n \n-# Add -Wold-style-definition if it's accepted\n-echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wold-style-definition\" >&5\n-echo $ECHO_N \"checking whether ${CC} accepts -Wold-style-definition... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_w_old_style_definition+set}\" = set; then\n+  done\n+CFLAGS=\"$save_CFLAGS\"\n+\n+if test \"$GCC\" = yes; then\n+  echo \"$as_me:$LINENO: checking whether $CC supports -pedantic -Wno-long-long -Wno-variadic-macros \\\n+\t\t\t\t     -Wno-overlength-strings\" >&5\n+echo $ECHO_N \"checking whether $CC supports -pedantic -Wno-long-long -Wno-variadic-macros \\\n+\t\t\t\t     -Wno-overlength-strings... $ECHO_C\" >&6\n+if test \"${acx_cv_prog_cc_pedantic__Wno_long_long__Wno_variadic_macros_____________Wno_overlength_strings+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n   save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wold-style-definition\"\n-  cat >conftest.$ac_ext <<_ACEOF\n+CFLAGS=\"-pedantic -Wno-long-long -Wno-variadic-macros \\\n+\t\t\t\t     -Wno-overlength-strings\"\n+cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n \n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n _ACEOF\n rm -f conftest.$ac_objext\n if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n@@ -6304,151 +6357,44 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_w_old_style_definition=yes\n+  acx_cv_prog_cc_pedantic__Wno_long_long__Wno_variadic_macros_____________Wno_overlength_strings=yes\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-ac_cv_prog_cc_w_old_style_definition=no\n+acx_cv_prog_cc_pedantic__Wno_long_long__Wno_variadic_macros_____________Wno_overlength_strings=no\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-  CFLAGS=\"$save_CFLAGS\"\n-\n+CFLAGS=\"$save_CFLAGS\"\n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_old_style_definition\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_w_old_style_definition\" >&6\n-if test $ac_cv_prog_cc_w_old_style_definition = yes ; then\n-  strict_warn=\"${strict_warn} -Wold-style-definition\"\n+echo \"$as_me:$LINENO: result: $acx_cv_prog_cc_pedantic__Wno_long_long__Wno_variadic_macros_____________Wno_overlength_strings\" >&5\n+echo \"${ECHO_T}$acx_cv_prog_cc_pedantic__Wno_long_long__Wno_variadic_macros_____________Wno_overlength_strings\" >&6\n+if test $acx_cv_prog_cc_pedantic__Wno_long_long__Wno_variadic_macros_____________Wno_overlength_strings = yes; then\n+  strict_warn=\"$strict_warn${strict_warn:+ }-pedantic -Wno-long-long -Wno-variadic-macros \\\n+\t\t\t\t     -Wno-overlength-strings\"\n fi\n \n-# Add -Wmissing-format-attribute if it's accepted\n-echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wmissing-format-attribute\" >&5\n-echo $ECHO_N \"checking whether ${CC} accepts -Wmissing-format-attribute... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_w_missing_format_attribute+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wmissing-format-attribute\"\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n \n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_w_missing_format_attribute=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_cv_prog_cc_w_missing_format_attribute=no\n fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-  CFLAGS=\"$save_CFLAGS\"\n \n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_missing_format_attribute\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_w_missing_format_attribute\" >&6\n-if test $ac_cv_prog_cc_w_missing_format_attribute = yes ; then\n-  strict_warn=\"${strict_warn} -Wmissing-format-attribute\"\n-fi\n \n-# Enable -Werror, period.\n-# Check whether --enable-werror_always or --disable-werror_always was given.\n+# Check whether --enable-werror-always or --disable-werror-always was given.\n if test \"${enable_werror_always+set}\" = set; then\n   enableval=\"$enable_werror_always\"\n \n else\n   enable_werror_always=no\n fi;\n-if test x${enable_werror_always} = xyes ; then\n-  strict_warn=\"${strict_warn} -Werror\"\n-fi\n-\n-\n-# Get C++ compatibility warning flag, if supported.\n-echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wc++-compat\" >&5\n-echo $ECHO_N \"checking whether ${CC} accepts -Wc++-compat... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_w_cxx_compat+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wc++-compat\"\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_w_cxx_compat=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_cv_prog_cc_w_cxx_compat=no\n+if test $enable_werror_always = yes; then\n+  strict_warn=\"$strict_warn${strict_warn:+ }-Werror\"\n fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-  CFLAGS=\"$save_CFLAGS\"\n \n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_cxx_compat\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_w_cxx_compat\" >&6\n-if test x${ac_cv_prog_cc_w_cxx_compat} = xyes; then\n-  cxx_compat_warn=\"-Wc++-compat\"\n-fi\n \n \n \n-# If the native compiler is GCC, we can enable warnings even in stage1.\n-# That's useful for people building cross-compilers, or just running a\n-# quick `make'.\n+# The above macros do nothing if the compiler is not GCC.  However, the\n+# Makefile has more goo to add other flags, so this variabl is used to\n+# enables warnings only for GCC.\n warn_cflags=\n if test \"x$GCC\" = \"xyes\"; then\n   warn_cflags='$(GCC_WARN_CFLAGS)'\n@@ -6527,14 +6473,14 @@ _ACEOF\n \n   nocommon_flag=-fno-common\n fi\n+\n if test x$ac_df_checking != x ; then\n \n cat >>confdefs.h <<\\_ACEOF\n #define ENABLE_DF_CHECKING 1\n _ACEOF\n \n fi\n-\n if test x$ac_assert_checking != x ; then\n \n cat >>confdefs.h <<\\_ACEOF\n@@ -7622,14 +7568,10 @@ echo \"${ECHO_T}no\" >&6\n fi\n \n \n-MISSING=\"${CONFIG_SHELL-/bin/sh} $srcdir/../missing\"\n-\n # See if makeinfo has been installed and is modern enough\n # that we can use it.\n \n-ac_executable_extensions=\"$build_exeext\"\n-\n-# Extract the first word of \"makeinfo\", so it can be a program name with args.\n+  # Extract the first word of \"makeinfo\", so it can be a program name with args.\n set dummy makeinfo; ac_word=$2\n echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n@@ -7664,32 +7606,33 @@ else\n echo \"${ECHO_T}no\" >&6\n fi\n \n-if test -n \"$MAKEINFO\"; then\n-  # Found it, now check the version.\n-  echo \"$as_me:$LINENO: checking for modern makeinfo\" >&5\n+  if test -n \"$MAKEINFO\"; then\n+    # Found it, now check the version.\n+    echo \"$as_me:$LINENO: checking for modern makeinfo\" >&5\n echo $ECHO_N \"checking for modern makeinfo... $ECHO_C\" >&6\n if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-    ac_prog_version=`$MAKEINFO --version 2>&1 |\n-                   sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:7676: version of makeinfo is $ac_prog_version\" >&5\n-  case $ac_prog_version in\n-    '')     gcc_cv_prog_makeinfo_modern=no;;\n-    4.[4-9]*)\n-            gcc_cv_prog_makeinfo_modern=yes;;\n-    *)      gcc_cv_prog_makeinfo_modern=no;;\n-  esac\n+  ac_prog_version=`eval $MAKEINFO --version 2>&1 |\n+                                     sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n+\n+                    case $ac_prog_version in\n+                      '')  gcc_cv_prog_makeinfo_modern=no;;\n+                      4.[4-9]*)  gcc_cv_prog_makeinfo_modern=yes;;\n+                      *)   gcc_cv_prog_makeinfo_modern=no;;\n+                    esac\n \n fi\n echo \"$as_me:$LINENO: result: $gcc_cv_prog_makeinfo_modern\" >&5\n echo \"${ECHO_T}$gcc_cv_prog_makeinfo_modern\" >&6\n-else\n-  gcc_cv_prog_makeinfo_modern=no\n-fi\n+  else\n+    gcc_cv_prog_makeinfo_modern=no\n+  fi\n+  if test $gcc_cv_prog_makeinfo_modern = no; then\n+    MAKEINFO=\"${CONFIG_SHELL-/bin/sh} $ac_aux_dir/missing makeinfo\"\n+  fi\n \n if test $gcc_cv_prog_makeinfo_modern = no; then\n-  MAKEINFO=\"$MISSING makeinfo\"\n   { echo \"$as_me:$LINENO: WARNING:\n *** Makeinfo is missing or too old.\n *** Info documentation will not be built.\" >&5\n@@ -7716,6 +7659,8 @@ echo \"${ECHO_T}no\" >&6\n fi\n \n \n+MISSING=\"${CONFIG_SHELL-/bin/sh} $ac_aux_dir/missing\"\n+\n # How about lex?\n for ac_prog in flex\n do\n@@ -17671,8 +17616,9 @@ s,@NO_MINUS_C_MINUS_O@,$NO_MINUS_C_MINUS_O,;t t\n s,@OUTPUT_OPTION@,$OUTPUT_OPTION,;t t\n s,@CPP@,$CPP,;t t\n s,@EGREP@,$EGREP,;t t\n-s,@strict_warn@,$strict_warn,;t t\n+s,@loose_warn@,$loose_warn,;t t\n s,@cxx_compat_warn@,$cxx_compat_warn,;t t\n+s,@strict_warn@,$strict_warn,;t t\n s,@warn_cflags@,$warn_cflags,;t t\n s,@nocommon_flag@,$nocommon_flag,;t t\n s,@TREEBROWSER@,$TREEBROWSER,;t t"}, {"sha": "a6cde5bc47a87d85f85e70ca29dfda0ab36e6c73", "filename": "gcc/configure.ac", "status": "modified", "additions": 15, "deletions": 103, "changes": 118, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -319,105 +319,18 @@ AC_CHECK_TYPES([__int64], [AC_CHECK_SIZEOF(__int64)])\n # * overlong strings\n # So, we only use -pedantic if we can disable those warnings.\n \n-AC_CACHE_CHECK(\n-  [whether ${CC} accepts -Wno-long-long],\n-  [ac_cv_prog_cc_w_no_long_long],\n-  [save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wno-long-long\"\n-  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n-                    [ac_cv_prog_cc_w_no_long_long=yes],\n-                    [ac_cv_prog_cc_w_no_long_long=no])\n-  CFLAGS=\"$save_CFLAGS\"\n-  ])\n-\n-AC_CACHE_CHECK(\n-  [whether ${CC} accepts -Wno-variadic-macros],\n-  [ac_cv_prog_cc_w_no_variadic_macros],\n-  [save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wno-variadic-macros\"\n-  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n-                    [ac_cv_prog_cc_w_no_variadic_macros=yes],\n-                    [ac_cv_prog_cc_w_no_variadic_macros=no])\n-  CFLAGS=\"$save_CFLAGS\"\n-  ])\n-\n-AC_CACHE_CHECK(\n-  [whether ${CC} accepts -Wno-overlength-strings],\n-  [ac_cv_prog_cc_w_no_overlength_strings],\n-  [save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wno-overlength-strings\"\n-  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n-                    [ac_cv_prog_cc_w_no_overlength_strings=yes],\n-                    [ac_cv_prog_cc_w_no_overlength_strings=no])\n-  CFLAGS=\"$save_CFLAGS\"\n-  ])\n-\n-strict_warn=\n-if test $ac_cv_prog_cc_w_no_long_long = yes \\\n-   && test $ac_cv_prog_cc_w_no_variadic_macros = yes \\\n-   && test $ac_cv_prog_cc_w_no_overlength_strings = yes ; then\n-  strict_warn=\"-pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings\"\n-fi\n-\n-# Add -Wold-style-definition if it's accepted\n-AC_CACHE_CHECK(\n-  [whether ${CC} accepts -Wold-style-definition],\n-  [ac_cv_prog_cc_w_old_style_definition],\n-  [save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wold-style-definition\"\n-  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n-                    [ac_cv_prog_cc_w_old_style_definition=yes],\n-                    [ac_cv_prog_cc_w_old_style_definition=no])\n-  CFLAGS=\"$save_CFLAGS\"\n-  ])\n-if test $ac_cv_prog_cc_w_old_style_definition = yes ; then\n-  strict_warn=\"${strict_warn} -Wold-style-definition\"\n-fi\n-\n-# Add -Wmissing-format-attribute if it's accepted\n-AC_CACHE_CHECK(\n-  [whether ${CC} accepts -Wmissing-format-attribute],\n-  [ac_cv_prog_cc_w_missing_format_attribute],\n-  [save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wmissing-format-attribute\"\n-  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n-                    [ac_cv_prog_cc_w_missing_format_attribute=yes],\n-                    [ac_cv_prog_cc_w_missing_format_attribute=no])\n-  CFLAGS=\"$save_CFLAGS\"\n-  ])\n-if test $ac_cv_prog_cc_w_missing_format_attribute = yes ; then\n-  strict_warn=\"${strict_warn} -Wmissing-format-attribute\"\n-fi\n-\n-# Enable -Werror, period.\n-AC_ARG_ENABLE(werror_always, \n-[  --enable-werror-always         enable -Werror always], [],\n-[enable_werror_always=no])\n-if test x${enable_werror_always} = xyes ; then\n-  strict_warn=\"${strict_warn} -Werror\"\n-fi\n-AC_SUBST(strict_warn)\n-\n-# Get C++ compatibility warning flag, if supported.\n-AC_CACHE_CHECK(\n-  [whether ${CC} accepts -Wc++-compat],\n-  [ac_cv_prog_cc_w_cxx_compat],\n-  [save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wc++-compat\"\n-  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n-                    [ac_cv_prog_cc_w_cxx_compat=yes],\n-                    [ac_cv_prog_cc_w_cxx_compat=no])\n-  CFLAGS=\"$save_CFLAGS\"\n-  ])\n-if test x${ac_cv_prog_cc_w_cxx_compat} = xyes; then\n-  cxx_compat_warn=\"-Wc++-compat\"\n-fi\n-AC_SUBST(cxx_compat_warn)\n-\n-\n-# If the native compiler is GCC, we can enable warnings even in stage1.  \n-# That's useful for people building cross-compilers, or just running a\n-# quick `make'.\n+ACX_PROG_CC_WARNING_OPTS([-W -Wall -Wwrite-strings -Wstrict-prototypes \\\n+\t\t\t  -Wmissing-prototypes], [loose_warn])\n+ACX_PROG_CC_WARNING_OPTS([-Wc++-compat], [cxx_compat_warn])\n+ACX_PROG_CC_WARNING_OPTS([-Wold-style-definition \\\n+                          -Wmissing-format-attribute], [strict_warn])\n+ACX_PROG_CC_WARNING_ALMOST_PEDANTIC([-Wno-long-long -Wno-variadic-macros \\\n+\t\t\t\t     -Wno-overlength-strings], [strict_warn])\n+ACX_PROG_CC_WARNINGS_ARE_ERRORS([manual], [strict_warn])\n+\n+# The above macros do nothing if the compiler is not GCC.  However, the\n+# Makefile has more goo to add other flags, so this variabl is used to\n+# enables warnings only for GCC.\n warn_cflags=\n if test \"x$GCC\" = \"xyes\"; then\n   warn_cflags='$(GCC_WARN_CFLAGS)'\n@@ -888,15 +801,12 @@ gcc_AC_PROG_CMP_IGNORE_INITIAL\n # See if we have the mktemp command.\n AC_CHECK_PROG(have_mktemp_command, mktemp, yes, no)\n \n-MISSING=\"${CONFIG_SHELL-/bin/sh} $srcdir/../missing\"\n-\n # See if makeinfo has been installed and is modern enough\n # that we can use it.\n-gcc_AC_CHECK_PROG_VER(MAKEINFO, makeinfo, --version,\n+ACX_CHECK_PROG_VER(MAKEINFO, makeinfo, --version,\n   [GNU texinfo.* \\([0-9][0-9.]*\\)],\n   [4.[4-9]*])\n if test $gcc_cv_prog_makeinfo_modern = no; then\n-  MAKEINFO=\"$MISSING makeinfo\"\n   AC_MSG_WARN([\n *** Makeinfo is missing or too old.\n *** Info documentation will not be built.])\n@@ -917,6 +827,8 @@ else\n fi\n AC_SUBST(GENERATED_MANPAGES)\n \n+MISSING=\"${CONFIG_SHELL-/bin/sh} $ac_aux_dir/missing\"\n+\n # How about lex?\n dnl Don't use AC_PROG_LEX; we insist on flex.\n dnl LEXLIB is not useful in gcc."}, {"sha": "9a80ed4a1f2b8949d0087f0105f8c589bbeea7a4", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -1,3 +1,9 @@\n+2007-06-14  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* aclocal.m4: Include config/warnings.m4.\n+\t* configure.ac: Use ACX_PROG_CC_WARNING_OPTS.\n+\t* configure: Regenerate.\n+\n 2007-06-07  Geoffrey Keating  <geoffk@apple.com>\n \n \t* configure.ac: Non-default multilibs can be cross compilations."}, {"sha": "643939e9d78e7602e82d2c52fb41bb834445cc91", "filename": "libiberty/aclocal.m4", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Faclocal.m4?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -1,5 +1,6 @@\n sinclude(../config/acx.m4)\n sinclude(../config/no-executables.m4)\n+sinclude(../config/warnings.m4)\n \n dnl See whether strncmp reads past the end of its string parameters.\n dnl On some versions of SunOS4 at least, strncmp reads a word at a time"}, {"sha": "d350af78985b306a6bb4a428f90543592b5ce01b", "filename": "libiberty/configure", "status": "modified", "additions": 27, "deletions": 19, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -2953,22 +2953,33 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n ac_c_preproc_warn_flag=yes\n \n-# Warn C++ incompatibilities if supported.\n \n-echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wc++-compat\" >&5\n-echo $ECHO_N \"checking whether ${CC} accepts -Wc++-compat... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_w_cxx_compat+set}\" = set; then\n+ac_libiberty_warn_cflags=\n+save_CFLAGS=\"$CFLAGS\"\n+for option in -W -Wall -pedantic -Wwrite-strings -Wc++-compat \\\n+\t\t\t  -Wstrict-prototypes; do\n+  as_acx_Woption=`echo \"acx_cv_prog_cc_warning_$option\" | $as_tr_sh`\n+\n+  echo \"$as_me:$LINENO: checking whether $CC supports $option\" >&5\n+echo $ECHO_N \"checking whether $CC supports $option... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_acx_Woption+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n-  save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wc++-compat\"\n-  cat >conftest.$ac_ext <<_ACEOF\n+  CFLAGS=\"$option\"\n+    cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n \n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n _ACEOF\n rm -f conftest.$ac_objext\n if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n@@ -2992,28 +3003,25 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   ac_status=$?\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_w_cxx_compat=yes\n+  eval \"$as_acx_Woption=yes\"\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-ac_cv_prog_cc_w_cxx_compat=no\n+eval \"$as_acx_Woption=no\"\n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-  CFLAGS=\"$save_CFLAGS\"\n \n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_cxx_compat\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_w_cxx_compat\" >&6\n-\n-\n-if test x$GCC = xyes; then\n-  ac_libiberty_warn_cflags='-W -Wall -pedantic -Wwrite-strings -Wstrict-prototypes'\n-fi\n-if test $ac_cv_prog_cc_w_cxx_compat = yes ; then\n-  ac_libiberty_warn_cflags=\"${ac_libiberty_warn_cflags} -Wc++-compat\"\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_acx_Woption'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_acx_Woption'}'`\" >&6\n+  if test `eval echo '${'$as_acx_Woption'}'` = yes; then\n+  ac_libiberty_warn_cflags=\"$ac_libiberty_warn_cflags${ac_libiberty_warn_cflags:+ }$option\"\n fi\n \n+  done\n+CFLAGS=\"$save_CFLAGS\"\n+\n \n if test \"x$CC\" != xcc; then\n   echo \"$as_me:$LINENO: checking whether $CC and cc understand -c and -o together\" >&5"}, {"sha": "82123781b3920a63c2c1b4a403c024af944c2f32", "filename": "libiberty/configure.ac", "status": "modified", "additions": 2, "deletions": 20, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bbd5a19ebf40614eb37ff90b33b08a067ff336c/libiberty%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.ac?ref=3bbd5a19ebf40614eb37ff90b33b08a067ff336c", "patch": "@@ -132,26 +132,8 @@ GCC_NO_EXECUTABLES\n AC_PROG_CC\n AC_PROG_CPP_WERROR\n \n-# Warn C++ incompatibilities if supported.\n-AC_CACHE_CHECK(\n-  [whether ${CC} accepts -Wc++-compat],\n-  [ac_cv_prog_cc_w_cxx_compat],\n-  [save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\"-Wc++-compat\"\n-  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n-                    [ac_cv_prog_cc_w_cxx_compat=yes],\n-                    [ac_cv_prog_cc_w_cxx_compat=no])\n-  CFLAGS=\"$save_CFLAGS\"\n-  ])\n-\n-\n-if test x$GCC = xyes; then\n-  ac_libiberty_warn_cflags='-W -Wall -pedantic -Wwrite-strings -Wstrict-prototypes'\n-fi\n-if test $ac_cv_prog_cc_w_cxx_compat = yes ; then\n-  ac_libiberty_warn_cflags=\"${ac_libiberty_warn_cflags} -Wc++-compat\"\n-fi\n-AC_SUBST(ac_libiberty_warn_cflags)\n+ACX_PROG_CC_WARNING_OPTS([-W -Wall -pedantic -Wwrite-strings -Wc++-compat \\\n+\t\t\t  -Wstrict-prototypes], [ac_libiberty_warn_cflags])\n \n AC_PROG_CC_C_O\n # autoconf is lame and doesn't give us any substitution variable for this."}]}