{"sha": "ba169b74244d4c485f53841733dd82e7e48dc9bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmExNjliNzQyNDRkNGM0ODVmNTM4NDE3MzNkZDgyZTdlNDhkYzliZA==", "commit": {"author": {"name": "Chung-Ju Wu", "email": "jasonwucj@gmail.com", "date": "2018-04-25T12:08:14Z"}, "committer": {"name": "Chung-Ju Wu", "email": "jasonwucj@gcc.gnu.org", "date": "2018-04-25T12:08:14Z"}, "message": "[NDS32] Fix incorrect settings in sfp-machine.h and t-nds32-newlib for hard fp.\n\nlibgcc/\n\t* config/nds32/sfp-machine.h: Fix settings for NDS32_ABI_2FP_PLUS.\n\t* config/nds32/t-nds32-newlib (HOST_LIBGCC2_CFLAGS): Use -fwrapv.\n\nFrom-SVN: r259645", "tree": {"sha": "67d56c909b9c27ae9703d806717695925d0e6283", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67d56c909b9c27ae9703d806717695925d0e6283"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba169b74244d4c485f53841733dd82e7e48dc9bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba169b74244d4c485f53841733dd82e7e48dc9bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba169b74244d4c485f53841733dd82e7e48dc9bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba169b74244d4c485f53841733dd82e7e48dc9bd/comments", "author": {"login": "jasonwucj", "id": 5520732, "node_id": "MDQ6VXNlcjU1MjA3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/5520732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonwucj", "html_url": "https://github.com/jasonwucj", "followers_url": "https://api.github.com/users/jasonwucj/followers", "following_url": "https://api.github.com/users/jasonwucj/following{/other_user}", "gists_url": "https://api.github.com/users/jasonwucj/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonwucj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonwucj/subscriptions", "organizations_url": "https://api.github.com/users/jasonwucj/orgs", "repos_url": "https://api.github.com/users/jasonwucj/repos", "events_url": "https://api.github.com/users/jasonwucj/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonwucj/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bfeb66850ffd5f25430db8a42f1dbfdc224a4ac2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfeb66850ffd5f25430db8a42f1dbfdc224a4ac2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfeb66850ffd5f25430db8a42f1dbfdc224a4ac2"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "e5f44b346aa5b9b2e862ea9a6edc751881d962db", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba169b74244d4c485f53841733dd82e7e48dc9bd/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba169b74244d4c485f53841733dd82e7e48dc9bd/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=ba169b74244d4c485f53841733dd82e7e48dc9bd", "patch": "@@ -1,3 +1,8 @@\n+2018-04-25  Chung-Ju Wu  <jasonwucj@gmail.com>\n+\n+\t* config/nds32/sfp-machine.h: Fix settings for NDS32_ABI_2FP_PLUS.\n+\t* config/nds32/t-nds32-newlib (HOST_LIBGCC2_CFLAGS): Use -fwrapv.\n+\n 2018-04-24  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/linux-unwind.h: Add (__CET__ & 2) != 0 check"}, {"sha": "bfbdaf9c3bf2b5495dea4c71b950a873c424c6d0", "filename": "libgcc/config/nds32/sfp-machine.h", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba169b74244d4c485f53841733dd82e7e48dc9bd/libgcc%2Fconfig%2Fnds32%2Fsfp-machine.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba169b74244d4c485f53841733dd82e7e48dc9bd/libgcc%2Fconfig%2Fnds32%2Fsfp-machine.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fnds32%2Fsfp-machine.h?ref=ba169b74244d4c485f53841733dd82e7e48dc9bd", "patch": "@@ -76,6 +76,25 @@ typedef int __gcc_CMPtype __attribute__ ((mode (__libgcc_cmp_return__)));\n     R##_c = FP_CLS_NAN;\t\t\t\t\t\t\\\n   } while (0)\n \n+#ifdef NDS32_ABI_2FP_PLUS\n+#define FP_RND_NEAREST\t\t0x0\n+#define FP_RND_PINF\t\t0x1\n+#define FP_RND_MINF\t\t0x2\n+#define FP_RND_ZERO\t\t0x3\n+#define FP_RND_MASK\t\t0x3\n+\n+#define _FP_DECL_EX \\\n+  unsigned long int _fcsr __attribute__ ((unused)) = FP_RND_NEAREST\n+\n+#define FP_INIT_ROUNDMODE\t\t\t\\\n+  do {\t\t\t\t\t\t\\\n+    _fcsr = __builtin_nds32_fmfcsr ();\t\t\\\n+  } while (0)\n+\n+#define FP_ROUNDMODE (_fcsr & FP_RND_MASK)\n+\n+#endif\n+\n /* Not checked.  */\n #define _FP_TININESS_AFTER_ROUNDING 0\n "}, {"sha": "a59646fcff5ab4176127acff6cb80cc9c2927220", "filename": "libgcc/config/nds32/t-nds32-newlib", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba169b74244d4c485f53841733dd82e7e48dc9bd/libgcc%2Fconfig%2Fnds32%2Ft-nds32-newlib", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba169b74244d4c485f53841733dd82e7e48dc9bd/libgcc%2Fconfig%2Fnds32%2Ft-nds32-newlib", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fnds32%2Ft-nds32-newlib?ref=ba169b74244d4c485f53841733dd82e7e48dc9bd", "patch": "@@ -19,7 +19,7 @@\n # <http://www.gnu.org/licenses/>.\n \n # Compiler flags to use when compiling 'libgcc2.c'\n-HOST_LIBGCC2_CFLAGS = -O2\n+HOST_LIBGCC2_CFLAGS = -O2 -fwrapv\n \n \n #LIB1ASMSRC   = nds32/lib1asmsrc-newlib.S"}]}