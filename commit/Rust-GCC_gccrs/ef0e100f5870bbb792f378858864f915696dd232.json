{"sha": "ef0e100f5870bbb792f378858864f915696dd232", "node_id": "C_kwDOANBUbNoAKGVmMGUxMDBmNTg3MGJiYjc5MmYzNzg4NTg4NjRmOTE1Njk2ZGQyMzI", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-11-11T13:02:16Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-11-11T18:16:17Z"}, "message": "libstdc++: Remove public std::vector<bool>::data() member\n\nThis function only exists to avoid an error in the debug mode vector, so\ndoesn't need to be public.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/stl_bvector.h (vector<bool>::data()): Give\n\tprotected access, and delete for C++11 and later.", "tree": {"sha": "1e8384867f7dd146d30cfe137fd73bf91d1ff667", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e8384867f7dd146d30cfe137fd73bf91d1ff667"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef0e100f5870bbb792f378858864f915696dd232", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef0e100f5870bbb792f378858864f915696dd232", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef0e100f5870bbb792f378858864f915696dd232", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef0e100f5870bbb792f378858864f915696dd232/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dc002e31fb2d001703278263ea3d1cef366018ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc002e31fb2d001703278263ea3d1cef366018ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc002e31fb2d001703278263ea3d1cef366018ae"}], "stats": {"total": 22, "additions": 13, "deletions": 9}, "files": [{"sha": "31d878427c2822e2b29e73090f65c0f33a85eacb", "filename": "libstdc++-v3/include/bits/stl_bvector.h", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef0e100f5870bbb792f378858864f915696dd232/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_bvector.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef0e100f5870bbb792f378858864f915696dd232/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_bvector.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_bvector.h?ref=ef0e100f5870bbb792f378858864f915696dd232", "patch": "@@ -996,14 +996,6 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       back() const\n       { return *(end() - 1); }\n \n-      // _GLIBCXX_RESOLVE_LIB_DEFECTS\n-      // DR 464. Suggestion for new member functions in standard containers.\n-      // N.B. DR 464 says nothing about vector<bool> but we need something\n-      // here due to the way we are implementing DR 464 in the debug-mode\n-      // vector class.\n-      void\n-      data() _GLIBCXX_NOEXCEPT { }\n-\n       void\n       push_back(bool __x)\n       {\n@@ -1363,7 +1355,19 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n \n       iterator\n       _M_erase(iterator __first, iterator __last);\n-  };\n+\n+    protected:\n+      // _GLIBCXX_RESOLVE_LIB_DEFECTS\n+      // DR 464. Suggestion for new member functions in standard containers.\n+      // N.B. DR 464 says nothing about vector<bool> but we need something\n+      // here due to the using-declaration in __gnu_debug::vector.\n+      // vector class.\n+#if __cplusplus >= 201103L\n+      void data() = delete;\n+#else\n+      void data() { }\n+#endif\n+    };\n \n _GLIBCXX_END_NAMESPACE_CONTAINER\n "}]}