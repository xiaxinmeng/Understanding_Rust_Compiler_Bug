{"sha": "d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhhZjA4NjgwYjVjNjllYzdmNjljOTYxM2EyZjVhMjI2ZTYwMjlhMw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2002-04-29T19:42:41Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2002-04-29T19:42:41Z"}, "message": "inclhack.def (solaris_widec): Include <wchar.h> in Solaris 2 <widec.h> if missing.\n\n\t* fixinc/inclhack.def (solaris_widec): Include <wchar.h> in\n\tSolaris 2 <widec.h> if missing.\n\t* fixinc/fixincl.x: Regenerate.\n\t* fixinc/tests/base/widec.h: New file.\n\nFrom-SVN: r52906", "tree": {"sha": "a0171fd3bf46fb811d26490047c1105c0423c109", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0171fd3bf46fb811d26490047c1105c0423c109"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/comments", "author": null, "committer": null, "parents": [{"sha": "1034407f00b9aefde939c3273dce2dc3574a4857", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1034407f00b9aefde939c3273dce2dc3574a4857", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1034407f00b9aefde939c3273dce2dc3574a4857"}], "stats": {"total": 96, "additions": 93, "deletions": 3}, "files": [{"sha": "fbfdb69ce22c1b93b9db1109c5a6f372fa639122", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "patch": "@@ -1,3 +1,10 @@\n+2002-04-29  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* fixinc/inclhack.def (solaris_widec): Include <wchar.h> in\n+\tSolaris 2 <widec.h> if missing.\n+\t* fixinc/fixincl.x: Regenerate.\n+\t* fixinc/tests/base/widec.h: New file.\n+\n 2002-04-29  Nick Clifton  <nickc@cambridge.redhat.com>\n \n \t* toplev.c (f_options): Add \"profile\" switch so that"}, {"sha": "68de2fda973293e1b4bac63c4e9e5b0daee65ac3", "filename": "gcc/fixinc/fixincl.x", "status": "modified", "additions": 54, "deletions": 3, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2Ffixinc%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2Ffixinc%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.x?ref=d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "patch": "@@ -5,7 +5,7 @@\n  * files which are fixed to work correctly with ANSI C and placed in a\n  * directory that GNU C will search.\n  *\n- * This file contains 141 fixup descriptions.\n+ * This file contains 142 fixup descriptions.\n  *\n  * See README for more information.\n  *\n@@ -3726,6 +3726,51 @@ static const char* apzSolaris_Stdio_TagPatch[] = { \"sed\",\n     \"-e\", \"s/defined(__cplusplus) && (__cplusplus < 54321L)/0/\",\n     (char*)NULL };\n \n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Solaris_Widec fix\n+ */\n+tSCC zSolaris_WidecName[] =\n+     \"solaris_widec\";\n+\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zSolaris_WidecList[] =\n+  \"|widec.h|\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+tSCC* apzSolaris_WidecMachs[] = {\n+        \"*-*-solaris2.[0-5]*\",\n+        (const char*)NULL };\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zSolaris_WidecSelect0[] =\n+       \"#include <euc.h>\";\n+\n+/*\n+ *  content bypass pattern - skip fix if pattern found\n+ */\n+tSCC zSolaris_WidecBypass0[] =\n+       \"include.*wchar\\\\.h\";\n+\n+#define    SOLARIS_WIDEC_TEST_CT  2\n+static tTestDesc aSolaris_WidecTests[] = {\n+  { TT_NEGREP,   zSolaris_WidecBypass0, (regex_t*)NULL },\n+  { TT_EGREP,    zSolaris_WidecSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Solaris_Widec\n+ */\n+static const char* apzSolaris_WidecPatch[] = {\n+    \"format\",\n+    \"%0\\n\\\n+#include <wchar.h>\",\n+    (char*)NULL };\n+\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Statsswtch fix\n@@ -5536,9 +5581,9 @@ static const char* apzX11_SprintfPatch[] = {\n  *\n  *  List of all fixes\n  */\n-#define REGEX_COUNT          149\n+#define REGEX_COUNT          151\n #define MACH_LIST_SIZE_LIMIT 279\n-#define FIX_COUNT            141\n+#define FIX_COUNT            142\n \n /*\n  *  Enumerate the fixes\n@@ -5638,6 +5683,7 @@ typedef enum {\n     SCO_UTIME_FIXIDX,\n     SOLARIS_MUTEX_INIT_FIXIDX,\n     SOLARIS_STDIO_TAG_FIXIDX,\n+    SOLARIS_WIDEC_FIXIDX,\n     STATSSWTCH_FIXIDX,\n     STDIO_STDARG_H_FIXIDX,\n     STDIO_VA_LIST_FIXIDX,\n@@ -6158,6 +6204,11 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      SOLARIS_STDIO_TAG_TEST_CT, FD_MACH_ONLY,\n      aSolaris_Stdio_TagTests,   apzSolaris_Stdio_TagPatch, 0 },\n \n+  {  zSolaris_WidecName,    zSolaris_WidecList,\n+     apzSolaris_WidecMachs,\n+     SOLARIS_WIDEC_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n+     aSolaris_WidecTests,   apzSolaris_WidecPatch, 0 },\n+\n   {  zStatsswtchName,    zStatsswtchList,\n      apzStatsswtchMachs,\n      STATSSWTCH_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,"}, {"sha": "0f1a210764906e3884595ad1843d91d752abc862", "filename": "gcc/fixinc/inclhack.def", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2Ffixinc%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2Ffixinc%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.def?ref=d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "patch": "@@ -2092,6 +2092,23 @@ fix = {\n     test_text = '#if\\tdefined(__cplusplus) && (__cplusplus < 54321L)';\n };\n \n+/*\n+ * <widec.h> until Solaris 2.5.1 defines macros for a couple of <wchar.h>\n+ * functions, breaking their prototypes if that file is included afterwards.\n+ * Include <wchar.h> early to avoid this issue, as is done on Solaris 2.6\n+ * and up.\n+ */\n+fix = {\n+    hackname  = solaris_widec;\n+    files     = widec.h;\n+    mach      = '*-*-solaris2.[0-5]*';\n+    bypass    = \"include.*wchar\\\\.h\";\n+    select    = \"#include <euc.h>\";\n+    c_fix     = format;\n+    c_fix_arg = \"%0\\n#include <wchar.h>\";\n+    test_text = \"#include <euc.h>\";\n+};\n+\n /*\n  *  Sony NEWSOS 5.0 does not support the complete ANSI C standard.\n  */"}, {"sha": "e3c17fff77b7a43bfd122520cb3102af1a1db41e", "filename": "gcc/fixinc/tests/base/widec.h", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2Ffixinc%2Ftests%2Fbase%2Fwidec.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8af08680b5c69ec7f69c9613a2f5a226e6029a3/gcc%2Ffixinc%2Ftests%2Fbase%2Fwidec.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ftests%2Fbase%2Fwidec.h?ref=d8af08680b5c69ec7f69c9613a2f5a226e6029a3", "patch": "@@ -0,0 +1,15 @@\n+/*  DO NOT EDIT THIS FILE.\n+\n+    It has been auto-edited by fixincludes from:\n+\n+\t\"fixinc/tests/inc/widec.h\"\n+\n+    This had to be done to correct non-standard usages in the\n+    original, manufacturer supplied header file.  */\n+\n+\n+\n+#if defined( SOLARIS_WIDEC_CHECK )\n+#include <euc.h>\n+#include <wchar.h>\n+#endif  /* SOLARIS_WIDEC_CHECK */"}]}