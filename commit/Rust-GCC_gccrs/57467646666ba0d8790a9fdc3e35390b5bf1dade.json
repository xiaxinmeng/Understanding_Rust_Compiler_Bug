{"sha": "57467646666ba0d8790a9fdc3e35390b5bf1dade", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTc0Njc2NDY2NjZiYTBkODc5MGE5ZmRjM2UzNTM5MGI1YmYxZGFkZQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-09-28T21:18:17Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1992-09-28T21:18:17Z"}, "message": "(copy_loop_body, JUMP_INSN case): When setting JUMP_LABEL field, verify that what we think is a label actually is.\n\n(copy_loop_body, JUMP_INSN case): When setting\nJUMP_LABEL field, verify that what we think is a label actually\nis.  If it isn't then map the old JUMP_LABEL to find the new one.\n\nFrom-SVN: r2275", "tree": {"sha": "76970d172cc7d93f7ca44112361b1d4c5e78810c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76970d172cc7d93f7ca44112361b1d4c5e78810c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57467646666ba0d8790a9fdc3e35390b5bf1dade", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57467646666ba0d8790a9fdc3e35390b5bf1dade", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57467646666ba0d8790a9fdc3e35390b5bf1dade", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57467646666ba0d8790a9fdc3e35390b5bf1dade/comments", "author": null, "committer": null, "parents": [{"sha": "72f4648ec51398d2985f5b30922df02d8f8ade69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72f4648ec51398d2985f5b30922df02d8f8ade69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72f4648ec51398d2985f5b30922df02d8f8ade69"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "6ca4bad80e19caa4c80844af920fbe5989a63edd", "filename": "gcc/unroll.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57467646666ba0d8790a9fdc3e35390b5bf1dade/gcc%2Funroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57467646666ba0d8790a9fdc3e35390b5bf1dade/gcc%2Funroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funroll.c?ref=57467646666ba0d8790a9fdc3e35390b5bf1dade", "patch": "@@ -1692,23 +1692,28 @@ copy_loop_body (copy_start, copy_end, map, exit_label, last_iteration,\n \t     later passes of unroll_loop, if INSN had jump label set.  */\n \t  if (JUMP_LABEL (insn))\n \t    {\n+\t      rtx label = 0;\n+\n \t      /* Can't use the label_map for every insn, since this may be\n \t\t the backward branch, and hence the label was not mapped.  */\n \t      if (GET_CODE (pattern) == SET)\n \t\t{\n \t\t  tem = SET_SRC (pattern);\n \t\t  if (GET_CODE (tem) == LABEL_REF)\n-\t\t    JUMP_LABEL (copy) = XEXP (tem, 0);\n+\t\t    label = XEXP (tem, 0);\n \t\t  else if (GET_CODE (tem) == IF_THEN_ELSE)\n \t\t    {\n \t\t      if (XEXP (tem, 1) != pc_rtx)\n-\t\t\tJUMP_LABEL (copy) = XEXP (XEXP (tem, 1), 0);\n+\t\t\tlabel = XEXP (XEXP (tem, 1), 0);\n \t\t      else\n-\t\t\tJUMP_LABEL (copy) = XEXP (XEXP (tem, 2), 0);\n+\t\t\tlabel = XEXP (XEXP (tem, 2), 0);\n \t\t    }\n \t\t  else\n \t\t    abort ();\n \t\t}\n+\n+\t      if (label && GET_CODE (label) == CODE_LABEL)\n+\t\tJUMP_LABEL (copy) = label;\n \t      else\n \t\t{\n \t\t  /* An unrecognizable jump insn, probably the entry jump"}]}