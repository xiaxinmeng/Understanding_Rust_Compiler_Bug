{"sha": "2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI5YTMzYWVlYTNkNDlmNGU3MDM4ZWNkYzlkOTZiNjIyMDU5M2QxNQ==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2006-01-07T16:30:53Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2006-01-07T16:30:53Z"}, "message": "decl.c (gfc_match_function_decl): Correctly error out in case of omitted function argument list.\n\nfortran/\n* decl.c (gfc_match_function_decl): Correctly error out in case of\nomitted function argument list.\ntestsuite/\n* gfortran.dg/func_decl_1.f90: New.\n* gfortran.dg/array_alloc_1.f90: Fix wrong function declaration.\n* gfortran.dg/array_alloc_2.f90: Likewise.\n* gfortran.dg/char_result_8.f90: Likewise.\n* gfortran.dg/dup_save_1.f90: Likewise.\n* gfortran.dg/dup_save_2.f90: Likewise.\n* gfortran.dg/f2c_6.f90: Likewise.\n* gfortran.dg/f2c_7.f90: Likewise.\n* gfortran.dg/func_result_2.f90: Likewise.\n* gfortran.fortran-torture/execute/pr23373-2.f90: Likewise.\n\nFrom-SVN: r109451", "tree": {"sha": "0bfc332161d9cd9f0ae0b9ff15ede507bbf790d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0bfc332161d9cd9f0ae0b9ff15ede507bbf790d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5487b6e59724be488a6ec2bc510f43f88602dc7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5487b6e59724be488a6ec2bc510f43f88602dc7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5487b6e59724be488a6ec2bc510f43f88602dc7e"}], "stats": {"total": 95, "additions": 72, "deletions": 23}, "files": [{"sha": "112fc36dc9b5ef870806d061835aa1aea26302f0", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -1,3 +1,8 @@\n+2005-01-07  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* decl.c (gfc_match_function_decl): Correctly error out in case of\n+\tomitted function argument list.\n+\n 2006-01-07  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/22146"}, {"sha": "1d20a0d1eeeeda1e8c677f90448fa50d48e7660f", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -2548,7 +2548,12 @@ gfc_match_function_decl (void)\n \n   m = gfc_match_formal_arglist (sym, 0, 0);\n   if (m == MATCH_NO)\n-    gfc_error (\"Expected formal argument list in function definition at %C\");\n+    {\n+      gfc_error (\"Expected formal argument list in function \"\n+                \"definition at %C\");\n+      m = MATCH_ERROR;\n+      goto cleanup;\n+    }\n   else if (m == MATCH_ERROR)\n     goto cleanup;\n "}, {"sha": "12d45c8f56218a6f4ef0e817c7182a0222661f4c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -1,3 +1,16 @@\n+2005-01-07  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* gfortran.dg/func_decl_1.f90: New.\n+\t* gfortran.dg/array_alloc_1.f90: Fix wrong function declaration.\n+\t* gfortran.dg/array_alloc_2.f90: Likewise.\n+\t* gfortran.dg/char_result_8.f90: Likewise.\n+\t* gfortran.dg/dup_save_1.f90: Likewise.\n+\t* gfortran.dg/dup_save_2.f90: Likewise.\n+\t* gfortran.dg/f2c_6.f90: Likewise.\n+\t* gfortran.dg/f2c_7.f90: Likewise.\n+\t* gfortran.dg/func_result_2.f90: Likewise.\n+\t* gfortran.fortran-torture/execute/pr23373-2.f90: Likewise.\n+\n 2006-01-07  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/22146"}, {"sha": "17be757a918b5fbfe007dfa82380d6ad438040aa", "filename": "gcc/testsuite/gfortran.dg/array_alloc_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_alloc_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_alloc_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_alloc_1.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -13,7 +13,7 @@ subroutine test (x)\n     end do\n   end subroutine test\n \n-  function f\n+  function f ()\n     integer, dimension (10) :: f\n     integer :: i\n     forall (i = 1:10) f (i) = i * 100"}, {"sha": "a225854f097c939cac5c9578c0ab1315ee1c8c9d", "filename": "gcc/testsuite/gfortran.dg/array_alloc_2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_alloc_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_alloc_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Farray_alloc_2.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -17,7 +17,7 @@ subroutine test (expected, x)\n     end do\n   end subroutine test\n \n-  function f1\n+  function f1 ()\n     integer, dimension (n) :: f1\n     integer :: i\n     forall (i = 1:n) f1 (i) = i * 100"}, {"sha": "4da9febe6066e2ee6578a5c2dab93ccbaf65d2ee", "filename": "gcc/testsuite/gfortran.dg/char_result_8.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Fchar_result_8.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Fchar_result_8.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fchar_result_8.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -13,7 +13,7 @@ program main\n \n   call indirect (100)\n contains\n-  function f1\n+  function f1 ()\n     character (len = 30) :: f1\n     f1 = ''\n   end function f1\n@@ -24,7 +24,7 @@ function f2 (i)\n     f2 = ''\n   end function f2\n \n-  function f3\n+  function f3 ()\n     character (len = 30), pointer :: f3\n     f3 => string\n   end function f3"}, {"sha": "7f22b62d16749b8c6331f268ad6ba3e25f3820ab", "filename": "gcc/testsuite/gfortran.dg/dup_save_1.f90", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_1.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -19,7 +19,7 @@ program save_1\n   end do\n end program save_1\n \n-integer function foo1\n+integer function foo1 ()\n   integer j\n   save\n   save ! { dg-warning \"Blanket SAVE\" }\n@@ -28,7 +28,7 @@ integer function foo1\n   foo1 = j\n end function foo1\n \n-integer function foo2\n+integer function foo2 ()\n   integer j\n   save j\n   save j ! { dg-warning \"Duplicate SAVE\" }\n@@ -37,7 +37,7 @@ integer function foo2\n   foo2 = j\n end function foo2\n \n-integer function foo3\n+integer function foo3 ()\n   integer j ! { dg-warning \"Duplicate SAVE\" }\n   save\n   save j ! { dg-warning \"SAVE statement\" }\n@@ -46,7 +46,7 @@ integer function foo3\n   foo3 = j\n end function foo3\n \n-integer function foo4\n+integer function foo4 ()\n   integer j ! { dg-warning \"Duplicate SAVE\" }\n   save j\n   save"}, {"sha": "3a24bdc9c5ee2eec4b657df2ebba04a5cfaf8464", "filename": "gcc/testsuite/gfortran.dg/dup_save_2.f90", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_2.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -20,7 +20,7 @@ program save_2\n   end do\n end program save_2\n \n-integer function foo1\n+integer function foo1 ()\n   integer j\n   save\n   save ! { dg-error \"Blanket SAVE\" }\n@@ -29,7 +29,7 @@ integer function foo1\n   foo1 = j\n end function foo1\n \n-integer function foo2\n+integer function foo2 ()\n   integer j\n   save j\n   save j ! { dg-error \"Duplicate SAVE\" }\n@@ -38,7 +38,7 @@ integer function foo2\n   foo2 = j\n end function foo2\n \n-integer function foo3\n+integer function foo3 ()\n   integer j\n   save\n   save j ! { dg-error \"SAVE statement\" }\n@@ -47,7 +47,7 @@ integer function foo3\n   foo3 = j\n end function foo3\n \n-integer function foo4\n+integer function foo4 ()\n   integer j ! { dg-error \"Duplicate SAVE\" }\n   save j\n   save"}, {"sha": "d28724cfa5670afc7a704f6b3a37d8000c3853fd", "filename": "gcc/testsuite/gfortran.dg/f2c_6.f90", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2c_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2c_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2c_6.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -38,22 +38,22 @@ function f() result(r)\n end function f\n \n interface\n-   function c\n+   function c ()\n      complex, pointer :: c\n    end function c\n end interface\n interface\n-   function d\n+   function d()\n      complex, pointer :: d\n    end function d\n end interface\n interface\n-   function e result(r)\n+   function e () result(r)\n      complex, pointer :: r\n    end function e\n end interface\n interface\n-   function f result(r)\n+   function f () result(r)\n      complex, pointer :: r\n    end function f\n end interface"}, {"sha": "d67e10bc2c7c5629c633d0402500f7a09e7d5068", "filename": "gcc/testsuite/gfortran.dg/f2c_7.f90", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2c_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2c_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ff2c_7.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -17,12 +17,12 @@ end function d\n \n subroutine test_without_result\n interface\n-   function c\n+   function c ()\n      complex :: c(5)\n    end function c\n end interface\n interface\n-   function d\n+   function d ()\n      complex :: d(5)\n    end function d\n end interface\n@@ -35,12 +35,12 @@ end subroutine test_without_result\n \n subroutine test_with_result\n interface\n-   function c result(r)\n+   function c () result(r)\n      complex :: r(5)\n    end function c\n end interface\n interface\n-   function d result(r)\n+   function d () result(r)\n      complex :: r(5)\n    end function d\n end interface"}, {"sha": "c5576ef48dedfaa2655b07bdf89a060e0cbd0a27", "filename": "gcc/testsuite/gfortran.dg/func_decl_1.f90", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunc_decl_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunc_decl_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunc_decl_1.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -0,0 +1,26 @@\n+! { dg-do compile }\n+! we didn't correctly reject function declarations without argument lists\n+! note that there are no end statements for syntactically wrong function\n+! declarations\n+  interface\n+     function f1     ! { dg-error \"Expected formal argument list\" }\n+     function f3()\n+     end function f3\n+     function f4 result (x) ! { dg-error \"Expected formal argument list\" }\n+     function f5() result (x)\n+     end function f5\n+   end interface\n+  f1 = 1.\n+end\n+\n+FUNCTION f1          ! { dg-error \"Expected formal argument list\" }\n+\n+function f2()\n+  f2 = 1.\n+end function f2\n+\n+function f3 result (x) ! { dg-error \"Expected formal argument list\" }\n+\n+function f4 () result (x)\n+  x = 4.\n+end function f4"}, {"sha": "6b91653ed9da878c317fa6158573076f72e50944", "filename": "gcc/testsuite/gfortran.dg/func_result_2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunc_result_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunc_result_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffunc_result_2.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -3,7 +3,7 @@\n program testch\n   if (ch().ne.\"hello     \") call abort()\n contains\n-  function ch result(str)\n+  function ch () result(str)\n     character(len = 10)  :: str\n     str =\"hello\"\n   end function ch"}, {"sha": "f90a7357756d385bf0f76060134dd010051374cf", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/pr23373-2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fpr23373-2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b9a33aeea3d49f4e7038ecdc9d96b6220593d15/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fpr23373-2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fpr23373-2.f90?ref=2b9a33aeea3d49f4e7038ecdc9d96b6220593d15", "patch": "@@ -6,7 +6,7 @@ program main\n   if (.not. associated (x)) call abort\n   if (size (x) .ne. 10) call abort\n contains\n-  function test\n+  function test()\n     real, dimension (:), pointer :: test\n     if (associated (x)) call abort\n     allocate (test (10))"}]}