{"sha": "a0a34f94fa3e47e07d747d4d17fb6198bcc22724", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTBhMzRmOTRmYTNlNDdlMDdkNzQ3ZDRkMTdmYjYxOThiY2MyMjcyNA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-07-28T19:35:58Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-07-28T19:35:58Z"}, "message": "(expand_return): Set TREE_SIDE_EFFECTS on MODIFY_EXPR.\n\nFrom-SVN: r5033", "tree": {"sha": "6171a58dd6dbcdeb89e672a27ac76d417250574f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6171a58dd6dbcdeb89e672a27ac76d417250574f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a0a34f94fa3e47e07d747d4d17fb6198bcc22724", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0a34f94fa3e47e07d747d4d17fb6198bcc22724", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0a34f94fa3e47e07d747d4d17fb6198bcc22724", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0a34f94fa3e47e07d747d4d17fb6198bcc22724/comments", "author": null, "committer": null, "parents": [{"sha": "a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "52beb26af1fee13e96233f08ecacb83f605cb376", "filename": "gcc/stmt.c", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0a34f94fa3e47e07d747d4d17fb6198bcc22724/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0a34f94fa3e47e07d747d4d17fb6198bcc22724/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=a0a34f94fa3e47e07d747d4d17fb6198bcc22724", "patch": "@@ -2337,14 +2337,21 @@ expand_return (retval)\n \t  || TREE_CODE (TREE_OPERAND (retval_rhs, 2)) == CALL_EXPR))\n     {\n       rtx label = gen_label_rtx ();\n+      tree expr;\n+\n       do_jump (TREE_OPERAND (retval_rhs, 0), label, NULL_RTX);\n-      expand_return (build (MODIFY_EXPR, TREE_TYPE (current_function_decl),\n-\t\t\t    DECL_RESULT (current_function_decl),\n-\t\t\t    TREE_OPERAND (retval_rhs, 1)));\n+      expr = build (MODIFY_EXPR, TREE_TYPE (current_function_decl),\n+\t\t    DECL_RESULT (current_function_decl),\n+\t\t    TREE_OPERAND (retval_rhs, 1));\n+      TREE_SIDE_EFFECTS (expr) = 1;\n+      expand_return (expr);\n       emit_label (label);\n-      expand_return (build (MODIFY_EXPR, TREE_TYPE (current_function_decl),\n-\t\t\t    DECL_RESULT (current_function_decl),\n-\t\t\t    TREE_OPERAND (retval_rhs, 2)));\n+\n+      expr = build (MODIFY_EXPR, TREE_TYPE (current_function_decl),\n+\t\t    DECL_RESULT (current_function_decl),\n+\t\t    TREE_OPERAND (retval_rhs, 2));\n+      TREE_SIDE_EFFECTS (expr) = 1;\n+      expand_return (expr);\n       return;\n     }\n "}]}