{"sha": "9a3c2683a99eee640ea752cfaf5df84d1555de97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWEzYzI2ODNhOTllZWU2NDBlYTc1MmNmYWY1ZGY4NGQxNTU1ZGU5Nw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-09-28T09:29:08Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-09-28T09:29:08Z"}, "message": "re PR c++/31434 (ICE with invalid use of parameter pack in function arg)\n\n\tPR c++/31434\n\t* tree.c (cp_build_qualified_type_real): Handle TYPE_PACK_EXPANSION\n\tqualification by creating qualified PACK_EXPANSION_PATTERN and\n\tthen calling make_pack_expansion on it.\n\n\t* g++.dg/cpp0x/variadic80.C: New test.\n\nFrom-SVN: r128861", "tree": {"sha": "6e6ec0e15c711531f892ed8cd8f723e7d3b5d2c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e6ec0e15c711531f892ed8cd8f723e7d3b5d2c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a3c2683a99eee640ea752cfaf5df84d1555de97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a3c2683a99eee640ea752cfaf5df84d1555de97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a3c2683a99eee640ea752cfaf5df84d1555de97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a3c2683a99eee640ea752cfaf5df84d1555de97/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6bad46f7555ebbf45abd37ad40003bdcf64ae4c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bad46f7555ebbf45abd37ad40003bdcf64ae4c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bad46f7555ebbf45abd37ad40003bdcf64ae4c2"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "503af66d1a9346ae3e5194eabec9c0822f8598f5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9a3c2683a99eee640ea752cfaf5df84d1555de97", "patch": "@@ -1,3 +1,10 @@\n+2007-09-28  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/31434\n+\t* tree.c (cp_build_qualified_type_real): Handle TYPE_PACK_EXPANSION\n+\tqualification by creating qualified PACK_EXPANSION_PATTERN and\n+\tthen calling make_pack_expansion on it.\n+\n 2007-09-28  Jie Zhang  <jie.zhang@analog.com>\n \n \t* config.gcc (bfin*-linux-uclibc*): Set extra_parts"}, {"sha": "ca767a18247b2af99f482225a8f4851b84824ba4", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=9a3c2683a99eee640ea752cfaf5df84d1555de97", "patch": "@@ -773,6 +773,13 @@ cp_build_qualified_type_real (tree type,\n       t = cp_build_qualified_type_real (t, type_quals, complain);\n       return build_ptrmemfunc_type (t);\n     }\n+  else if (TREE_CODE (type) == TYPE_PACK_EXPANSION)\n+    {\n+      tree t = PACK_EXPANSION_PATTERN (type);\n+\n+      t = cp_build_qualified_type_real (t, type_quals, complain);\n+      return make_pack_expansion (t);\n+    }\n \n   /* A reference or method type shall not be cv qualified.\n      [dcl.ref], [dct.fct]  */"}, {"sha": "67e390a623b4de7df4f4da7ae39725fe1e47d454", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9a3c2683a99eee640ea752cfaf5df84d1555de97", "patch": "@@ -1,3 +1,8 @@\n+2007-09-28  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/31434\n+\t* g++.dg/cpp0x/variadic80.C: New test.\n+\n 2007-09-27  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \t* gfortran.dg/namelist_38.f90: Delete test for revertion of"}, {"sha": "a56cdb404c0e52b302da874c33755810bee7cca7", "filename": "gcc/testsuite/g++.dg/cpp0x/variadic80.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic80.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a3c2683a99eee640ea752cfaf5df84d1555de97/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic80.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic80.C?ref=9a3c2683a99eee640ea752cfaf5df84d1555de97", "patch": "@@ -0,0 +1,28 @@\n+// PR c++/31434\n+// { dg-do run }\n+// { dg-options \"-std=c++0x\" }\n+\n+extern \"C\" void abort ();\n+\n+template<typename... T> inline int foo (const T...) { return 1; }\n+template<typename... T> inline int foo (const T *...) { return 2; }\n+\n+void\n+bar (int *a)\n+{\n+  a[0] = foo (0);\n+  a[1] = foo (*a);\n+  a[2] = foo<int> (a);\n+  a[3] = foo<int> (2, 3, 4, 5);\n+  a[4] = foo<int> (a, a + 1, a + 2);\n+}\n+\n+int\n+main ()\n+{\n+  int a[5];\n+  bar (a);\n+  if (a[0] != 1 || a[1] != 1 || a[2] != 2 || a[3] != 1 || a[4] != 2)\n+    abort ();\n+  return 0;\n+}"}]}