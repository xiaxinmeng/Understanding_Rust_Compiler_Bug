{"sha": "6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU0ZjAxZmY0ZDMyMjRlMmY0OGJjZDNjZWQ0OWJjZjEyYmQ4M2QyNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-02-13T23:57:10Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-02-13T23:57:10Z"}, "message": "re PR c++/60894 (Use of redundant struct keyword in function prototype combined with using statement causes compilation error)\n\n/cp\n2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60894\n\t* decl.c (lookup_and_check_tag): Use strip_using_decl.\n\n/testsuite\n2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/60894\n\t* g++.dg/lookup/using54.C: New.\n\nFrom-SVN: r220702", "tree": {"sha": "f2909324ffffb5d02e6bc4849ff10cf4218c8d9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f2909324ffffb5d02e6bc4849ff10cf4218c8d9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/comments", "author": null, "committer": null, "parents": [{"sha": "c7a28c1bc27c8eb9fa223147c081588c7fd8a369", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7a28c1bc27c8eb9fa223147c081588c7fd8a369", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7a28c1bc27c8eb9fa223147c081588c7fd8a369"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "6d21c286686804b33c6afaab8c9d2153e88567b3", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "patch": "@@ -1,3 +1,8 @@\n+2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60894\n+\t* decl.c (lookup_and_check_tag): Use strip_using_decl.\n+\n 2015-02-13  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/65054"}, {"sha": "67c5ae73e361b6f28d8e9f201dd7fef31dd08f6f", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "patch": "@@ -12205,6 +12205,7 @@ lookup_and_check_tag (enum tag_types tag_code, tree name,\n       /* First try ordinary name lookup, ignoring hidden class name\n \t injected via friend declaration.  */\n       decl = lookup_name_prefer_type (name, 2);\n+      decl = strip_using_decl (decl);\n       /* If that fails, the name will be placed in the smallest\n \t non-class, non-function-prototype scope according to 3.3.1/5.\n \t We may already have a hidden name declared as friend in this"}, {"sha": "f6e5ccc1c3bc920e025001abb66ab3986832ef26", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "patch": "@@ -1,3 +1,8 @@\n+2015-02-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/60894\n+\t* g++.dg/lookup/using54.C: New.\n+\n 2015-02-13  Jeff Law  <law@redhat.com>\n \n \tPR bootstrap/65060\n@@ -17,7 +22,7 @@\n 2015-02-13  Jeff Law  <law@redhat.com>\n \n \tPR tree-optimization/64823\n-\tgcc.dg/uninit-20.c: New test.\n+\t* gcc.dg/uninit-20.c: New test.\n \n \tPR rtl-optimization/47477\n \t* gcc.dg/tree-ssa/pr47477.c: New test."}, {"sha": "680bdadaa26ee620e1b80649cfa67510a57084c0", "filename": "gcc/testsuite/g++.dg/lookup/using54.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing54.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing54.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing54.C?ref=6e4f01ff4d3224e2f48bcd3ced49bcf12bd83d24", "patch": "@@ -0,0 +1,16 @@\n+// PR c++/60894\n+\n+struct B\n+{\n+  struct S {};\n+};\n+\n+struct D : B\n+{\n+  using B::S;\n+  void doIt(struct S&);\n+};\n+\n+void D::doIt(struct S&)\n+{\n+}"}]}