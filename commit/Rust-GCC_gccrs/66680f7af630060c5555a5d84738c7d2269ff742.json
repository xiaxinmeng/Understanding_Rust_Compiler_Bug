{"sha": "66680f7af630060c5555a5d84738c7d2269ff742", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjY2ODBmN2FmNjMwMDYwYzU1NTVhNWQ4NDczOGM3ZDIyNjlmZjc0Mg==", "commit": {"author": {"name": "Jose Ruiz", "email": "ruiz@adacore.com", "date": "2007-06-06T10:37:53Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-06-06T10:37:53Z"}, "message": "Makefile.in (LIBGNAT_TARGET_PAIRS for VxWorks 6): For the RTP run time...\n\n2007-04-20  Jose Ruiz  <ruiz@adacore.com>\n\t    Arnaud Charlet  <charlet@adacore.com>\n\n\t* Makefile.in (LIBGNAT_TARGET_PAIRS for VxWorks 6): For the RTP run\n\ttime, use the default s-interr body that provides interrupt support\n\tbased on signals.\n\t(LIBGNAT_TARGET_PAIRS for x86-linux): Use specialized versions of\n\ta-exetim.ad{s,b}, a-extiti.ad{s,b}, a-rttiev.ad{s,b}, s-osinte.ad{s,b},\n\tg-soccon.ads, and s-taprop.adb for the marte run time.\n\t(EXTRA_GNATRTL_TASKING_OBJS for x86-linux): Execution time clocks and\n\ttimers are supported on marte.\n\t(EH_MECHANISM for marte): Do not use ZCX.\n\t(THREADSLIB for marte): Use -lmarte.\n\tAdd mlib-tgt-vms.o to the list of objects for gnatmake for VMS\n\tAdd mlib-tgt-specific.o to gnatmake objects\n\tmlib-tgt-<platforms>.adb is now the body of MLib.Tgt.Specific, no\n\tlonger of MLib.Tgt.\n\t(LIBGNAT_TARGET_PAIRS for vxworks): When building a run time for VxWorks\n\t6, either kernel or rtp, use a specialized version of s-osinte.ads.\n\nFrom-SVN: r125433", "tree": {"sha": "ab12136fd6fed8520785d98c42c03ca92e33cad5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab12136fd6fed8520785d98c42c03ca92e33cad5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66680f7af630060c5555a5d84738c7d2269ff742", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66680f7af630060c5555a5d84738c7d2269ff742", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66680f7af630060c5555a5d84738c7d2269ff742", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66680f7af630060c5555a5d84738c7d2269ff742/comments", "author": {"login": "JoseRuizAdaCore", "id": 22770339, "node_id": "MDQ6VXNlcjIyNzcwMzM5", "avatar_url": "https://avatars.githubusercontent.com/u/22770339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoseRuizAdaCore", "html_url": "https://github.com/JoseRuizAdaCore", "followers_url": "https://api.github.com/users/JoseRuizAdaCore/followers", "following_url": "https://api.github.com/users/JoseRuizAdaCore/following{/other_user}", "gists_url": "https://api.github.com/users/JoseRuizAdaCore/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoseRuizAdaCore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoseRuizAdaCore/subscriptions", "organizations_url": "https://api.github.com/users/JoseRuizAdaCore/orgs", "repos_url": "https://api.github.com/users/JoseRuizAdaCore/repos", "events_url": "https://api.github.com/users/JoseRuizAdaCore/events{/privacy}", "received_events_url": "https://api.github.com/users/JoseRuizAdaCore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d3cc6a322691df8a2732ec4ee5b0957caa057316", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3cc6a322691df8a2732ec4ee5b0957caa057316", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3cc6a322691df8a2732ec4ee5b0957caa057316"}], "stats": {"total": 161, "additions": 114, "deletions": 47}, "files": [{"sha": "aa85f9f4ed248502226035880e2fcd57f7c48129", "filename": "gcc/ada/Makefile.in", "status": "modified", "additions": 114, "deletions": 47, "changes": 161, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66680f7af630060c5555a5d84738c7d2269ff742/gcc%2Fada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66680f7af630060c5555a5d84738c7d2269ff742/gcc%2Fada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMakefile.in?ref=66680f7af630060c5555a5d84738c7d2269ff742", "patch": "@@ -1,5 +1,5 @@\n # Makefile for GNU Ada Compiler (GNAT).\n-#   Copyright (C) 1994-2006 Free Software Foundation, Inc.\n+#   Copyright (C) 1994-2007 Free Software Foundation, Inc.\n \n #This file is part of GCC.\n \n@@ -307,16 +307,16 @@ GNATMAKE_OBJS = a-except.o ali.o ali-util.o s-casuti.o \\\n  alloc.o atree.o binderr.o butil.o casing.o csets.o debug.o elists.o einfo.o\\\n  erroutc.o errutil.o err_vars.o fmap.o fname.o fname-uf.o fname-sf.o \\\n  gnatmake.o gnatvsn.o hostparm.o interfac.o i-c.o i-cstrin.o krunch.o lib.o \\\n- make.o makeusg.o makeutl.o mlib.o mlib-fil.o mlib-prj.o mlib-tgt.o mlib-utl.o \\\n- namet.o nlists.o opt.o osint.o osint-m.o output.o \\\n+ make.o makeusg.o makeutl.o mlib.o mlib-fil.o mlib-prj.o mlib-tgt.o \\\n+ mlib-tgt-specific.o mlib-utl.o namet.o nlists.o opt.o osint.o osint-m.o output.o \\\n  prj.o prj-attr.o prj-attr-pm.o prj-com.o prj-dect.o prj-env.o prj-err.o prj-ext.o prj-nmsc.o \\\n  prj-pars.o prj-part.o prj-proc.o prj-strt.o prj-tree.o prj-util.o \\\n  rident.o s-exctab.o s-secsta.o s-stalib.o s-stoele.o \\\n  scans.o scng.o sdefault.o sfn_scan.o s-purexc.o s-htable.o \\\n  sinfo.o sinput.o sinput-c.o sinput-p.o \\\n  snames.o stand.o stringt.o styleg.o stylesw.o system.o validsw.o switch.o switch-m.o \\\n  table.o targparm.o tempdir.o tree_io.o types.o \\\n- uintp.o  uname.o urealp.o usage.o widechar.o \\\n+ uintp.o uname.o urealp.o usage.o widechar.o \\\n  $(EXTRA_GNATMAKE_OBJS)\n \n # Convert the target variable into a space separated list of architecture,\n@@ -410,9 +410,11 @@ ifeq ($(strip $(filter-out m68k% wrs vx%,$(targ))),)\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-vxworks.adb \\\n+  g-sttsne.ads<g-sttsne-vxworks.ads \\\n   system.ads<system-vxworks-m68k.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-vxworks.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-vxworks.adb\n \n   EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o\n   EXTRA_GNATRTL_TASKING_OBJS=s-vxwork.o\n@@ -432,10 +434,8 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworks,$(targ))),)\n   a-intnam.ads<a-intnam-vxworks.ads \\\n   a-numaux.ads<a-numaux-vxworks.ads \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n-  s-interr.adb<s-interr-vxworks.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n-  s-osinte.ads<s-osinte-vxworks.ads \\\n   s-osprim.adb<s-osprim-vxworks.adb \\\n   s-parame.ads<s-parame-vxworks.ads \\\n   s-parame.adb<s-parame-vxworks.adb \\\n@@ -446,9 +446,11 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworks,$(targ))),)\n   g-soccon.ads<g-soccon-vxworks.ads \\\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n-  g-stsifd.adb<g-stsifd-sockets.adb\n+  g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-vxworks.adb \\\n+  g-sttsne.ads<g-sttsne-vxworks.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-vxworks.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-vxworks.adb\n \n   ifeq ($(strip $(filter-out yes,$(TRACE))),)\n     LIBGNAT_TARGET_PAIRS += \\\n@@ -462,16 +464,26 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworks,$(targ))),)\n   ifeq ($(strip $(filter-out rtp,$(THREAD_KIND))),)\n     LIBGNAT_TARGET_PAIRS += \\\n     s-osinte.adb<s-osinte-vxworks-rtp.adb \\\n+    s-osinte.ads<s-osinte-vxworks6.ads \\\n     s-tpopsp.adb<s-tpopsp-vxworks-rtp.adb \\\n     system.ads<system-vxworks-ppc-rtp.ads\n \n     EXTRA_GNATRTL_NONTASKING_OBJS=s-vxwexc.o\n   else\n     LIBGNAT_TARGET_PAIRS += \\\n+    s-interr.adb<s-interr-vxworks.adb \\\n     s-osinte.adb<s-osinte-vxworks.adb \\\n     s-tpopsp.adb<s-tpopsp-vxworks.adb \\\n     system.ads<system-vxworks-ppc.ads\n \n+    ifeq ($(strip $(filter-out kernel,$(THREAD_KIND))),)\n+      LIBGNAT_TARGET_PAIRS += \\\n+      s-osinte.ads<s-osinte-vxworks6.ads\n+    else\n+      LIBGNAT_TARGET_PAIRS += \\\n+      s-osinte.ads<s-osinte-vxworks.ads\n+    endif\n+\n     EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o s-vxwexc.o\n   endif\n \n@@ -504,9 +516,11 @@ ifeq ($(strip $(filter-out powerpc% wrs vxworksae,$(targ))),)\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-vxworks.adb \\\n+  g-sttsne.ads<g-sttsne-vxworks.ads \\\n   system.ads<system-vxworks-ppc-vthread.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-vxworks.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-vxworks.adb\n \n   EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o s-vxwexc.o\n   EXTRA_GNATRTL_TASKING_OBJS=s-vxwork.o\n@@ -550,9 +564,11 @@ ifeq ($(strip $(filter-out sparc% wrs vx%,$(targ))),)\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-vxworks.adb \\\n+  g-sttsne.ads<g-sttsne-vxworks.ads \\\n   system.ads<system-vxworks-sparcv9.ads   \\\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-vxworks.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-vxworks.adb\n \n   EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o\n   EXTRA_GNATRTL_TASKING_OBJS=s-vxwork.o\n@@ -563,12 +579,10 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n   a-intnam.ads<a-intnam-vxworks.ads \\\n   i-vxwork.ads<i-vxwork-x86.ads \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n-  s-interr.adb<s-interr-vxworks.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n   a-numaux.adb<a-numaux-x86.adb \\\n   a-numaux.ads<a-numaux-x86.ads \\\n-  s-osinte.ads<s-osinte-vxworks.ads \\\n   s-osprim.adb<s-osprim-vxworks.adb \\\n   s-parame.ads<s-parame-vxworks.ads \\\n   s-parame.adb<s-parame-vxworks.adb \\\n@@ -580,9 +594,11 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n   g-soccon.ads<g-soccon-vxworks.ads \\\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n-  g-stsifd.adb<g-stsifd-sockets.adb\n+  g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-vxworks.adb \\\n+  g-sttsne.ads<g-sttsne-vxworks.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-vxworks.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-vxworks.adb\n \n   ifeq ($(strip $(filter-out yes,$(TRACE))),)\n     LIBGNAT_TARGET_PAIRS += \\\n@@ -596,16 +612,26 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n   ifeq ($(strip $(filter-out rtp,$(THREAD_KIND))),)\n     LIBGNAT_TARGET_PAIRS += \\\n     s-osinte.adb<s-osinte-vxworks-rtp.adb \\\n+    s-osinte.ads<s-osinte-vxworks6.ads \\\n     s-tpopsp.adb<s-tpopsp-vxworks-rtp.adb \\\n     system.ads<system-vxworks-x86-rtp.ads\n \n     EXTRA_GNATRTL_NONTASKING_OBJS=s-vxwexc.o\n   else\n     LIBGNAT_TARGET_PAIRS += \\\n+    s-interr.adb<s-interr-vxworks.adb \\\n     s-osinte.adb<s-osinte-vxworks.adb \\\n     s-tpopsp.adb<s-tpopsp-vxworks.adb \\\n     system.ads<system-vxworks-x86.ads\n \n+    ifeq ($(strip $(filter-out kernel,$(THREAD_KIND))),)\n+      LIBGNAT_TARGET_PAIRS += \\\n+      s-osinte.ads<s-osinte-vxworks6.ads\n+    else\n+      LIBGNAT_TARGET_PAIRS += \\\n+      s-osinte.ads<s-osinte-vxworks.ads\n+    endif\n+\n     EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o s-vxwexc.o\n   endif\n \n@@ -634,9 +660,11 @@ ifeq ($(strip $(filter-out arm% coff wrs vx%,$(targ))),)\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-vxworks.adb \\\n+  g-sttsne.ads<g-sttsne-vxworks.ads \\\n   system.ads<system-vxworks-arm.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-vxworks.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-vxworks.adb\n \n   EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o\n   EXTRA_GNATRTL_TASKING_OBJS=s-vxwork.o\n@@ -664,9 +692,11 @@ ifeq ($(strip $(filter-out mips% wrs vx%,$(targ))),)\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-vxworks.adb \\\n+  g-sttsne.ads<g-sttsne-vxworks.ads \\\n   system.ads<system-vxworks-mips.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-vxworks.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-vxworks.adb\n \n   EXTRA_GNATRTL_NONTASKING_OBJS=i-vxwork.o i-vxwoio.o\n   EXTRA_GNATRTL_TASKING_OBJS=s-vxwork.o\n@@ -711,7 +741,7 @@ ifeq ($(strip $(filter-out sparc% sun solaris%,$(targ))),)\n     LIBGNAT_TARGET_PAIRS = $(LIBGNAT_TARGET_PAIRS_64)\n   endif\n   \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-solaris.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-solaris.adb\n \n   EH_MECHANISM=-gcc\n   THREADSLIB = -lposix4 -lthread\n@@ -765,7 +795,7 @@ ifeq ($(strip $(filter-out %86 solaris2%,$(arch) $(osys))),)\n   g-soliop.ads<g-soliop-solaris.ads \\\n   system.ads<system-solaris-x86.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-solaris.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-solaris.adb\n \n   THREADSLIB = -lposix4 -lthread\n   MISCLIB = -lposix4 -lnsl -lsocket\n@@ -782,23 +812,45 @@ ifeq ($(strip $(filter-out %86 linux%,$(arch) $(osys))),)\n   a-numaux.adb<a-numaux-x86.adb \\\n   a-numaux.ads<a-numaux-x86.ads \\\n   g-bytswa.adb<g-bytswa-x86.adb \\\n-  g-soccon.ads<g-soccon-linux-x86.ads \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n   s-intman.adb<s-intman-posix.adb \\\n-  s-osinte.adb<s-osinte-posix.adb \\\n-  s-osinte.ads<s-osinte-linux.ads \\\n   s-osprim.adb<s-osprim-posix.adb \\\n-  s-taprop.adb<s-taprop-linux.adb \\\n   s-taspri.ads<s-taspri-posix.ads \\\n   s-tpopsp.adb<s-tpopsp-posix-foreign.adb \\\n   system.ads<system-linux-x86.ads\n \n+  ifeq ($(strip $(filter-out marte,$(THREAD_KIND))),)\n+    LIBGNAT_TARGET_PAIRS += \\\n+    a-exetim.adb<a-exetim-linux-marte.adb \\\n+    a-exetim.ads<a-exetim-linux-marte.ads \\\n+    a-extiti.adb<a-extiti-linux-marte.adb \\\n+    a-extiti.ads<a-extiti-linux-marte.ads \\\n+    a-rttiev.adb<a-rttiev-linux-marte.adb \\\n+    a-rttiev.ads<a-rttiev-linux-marte.ads \\\n+    g-soccon.ads<g-soccon-linux-x86-marte.ads \\\n+    s-osinte.adb<s-osinte-linux-marte.adb \\\n+    s-osinte.ads<s-osinte-linux-marte.ads \\\n+    s-taprop.adb<s-taprop-linux-marte.adb\n+\n+    EXTRA_GNATRTL_TASKING_OBJS=a-exetim.o a-extiti.o\n+\n+    EH_MECHANISM=\n+    THREADSLIB = -lmarte\n+  else\n+    LIBGNAT_TARGET_PAIRS += \\\n+    g-soccon.ads<g-soccon-linux-x86.ads \\\n+    s-osinte.adb<s-osinte-posix.adb \\\n+    s-osinte.ads<s-osinte-linux.ads \\\n+    s-taprop.adb<s-taprop-linux.adb\n+\n+    EH_MECHANISM=-gcc\n+    THREADSLIB = -lpthread\n+  endif\n+\n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb \\\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb\n \n-  EH_MECHANISM=-gcc\n-  THREADSLIB = -lpthread\n   GNATLIB_SHARED = gnatlib-shared-dual\n   GMEM_LIB = gmemlib\n   PREFIX_OBJS = $(PREFIX_REAL_OBJS)\n@@ -851,7 +903,7 @@ ifeq ($(strip $(filter-out %86 freebsd%,$(arch) $(osys))),)\n   system.ads<system-freebsd-x86.ads\n \n   TOOLS_TARGET_PAIRS = \\\n-  mlib-tgt.adb<mlib-tgt-linux.adb\n+  mlib-tgt-specific.adb<mlib-tgt-linux.adb\n   GNATLIB_SHARED = gnatlib-shared-dual\n \n   EH_MECHANISM=-gcc\n@@ -889,7 +941,7 @@ ifeq ($(strip $(filter-out s390% linux%,$(arch) $(osys))),)\n   endif\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb\n \n   EH_MECHANISM=-gcc\n   THREADSLIB = -lpthread\n@@ -931,7 +983,7 @@ ifeq ($(strip $(filter-out mips sgi irix%,$(targ))),)\n   endif\n \n   EH_MECHANISM=-gcc\n-  TOOLS_TARGET_PAIRS = mlib-tgt.adb<mlib-tgt-irix.adb\n+  TOOLS_TARGET_PAIRS = mlib-tgt-specific.adb<mlib-tgt-irix.adb\n   TGT_LIB = -lexc\n   MISCLIB = -lexc\n   PREFIX_OBJS = $(PREFIX_REAL_OBJS)\n@@ -975,7 +1027,7 @@ ifeq ($(strip $(filter-out hppa% hp hpux11%,$(targ))),)\n   g-soccon.ads<g-soccon-hpux.ads \\\n   system.ads<system-hpux.ads\n \n-  TOOLS_TARGET_PAIRS = mlib-tgt.adb<mlib-tgt-hpux.adb\n+  TOOLS_TARGET_PAIRS = mlib-tgt-specific.adb<mlib-tgt-hpux.adb\n   EH_MECHANISM=-gcc\n   TGT_LIB = /usr/lib/libcl.a\n   THREADSLIB = -lpthread\n@@ -1005,15 +1057,15 @@ ifeq ($(strip $(filter-out ibm aix%,$(manu) $(osys))),)\n   PREFIX_OBJS=$(PREFIX_REAL_OBJS)\n \n   TOOLS_TARGET_PAIRS = \\\n-  mlib-tgt.adb<mlib-tgt-aix.adb \\\n+  mlib-tgt-specific.adb<mlib-tgt-aix.adb \\\n   indepsw.adb<indepsw-aix.adb\n \n   GMEM_LIB = gmemlib\n endif\n \n ifeq ($(strip $(filter-out lynxos,$(osys))),)\n   TOOLS_TARGET_PAIRS = \\\n-  mlib-tgt.adb<mlib-tgt-lynxos.adb \\\n+  mlib-tgt-specific.adb<mlib-tgt-lynxos.adb \\\n   indepsw.adb<indepsw-gnu.adb\n \n   ifeq ($(strip $(filter-out %86 lynxos,$(arch) $(osys))),)\n@@ -1022,6 +1074,7 @@ ifeq ($(strip $(filter-out lynxos,$(osys))),)\n     a-numaux.ads<a-numaux-x86.ads \\\n     a-intnam.ads<a-intnam-lynxos.ads \\\n     g-bytswa.adb<g-bytswa-x86.adb \\\n+    g-soccon.ads<g-soccon-lynxos.ads \\\n     s-inmaop.adb<s-inmaop-posix.adb \\\n     s-intman.adb<s-intman-posix.adb \\\n     s-osinte.adb<s-osinte-lynxos.adb \\\n@@ -1037,6 +1090,7 @@ ifeq ($(strip $(filter-out lynxos,$(osys))),)\n   else\n     LIBGNAT_TARGET_PAIRS = \\\n     a-intnam.ads<a-intnam-lynxos.ads \\\n+    g-soccon.ads<g-soccon-lynxos.ads \\\n     s-inmaop.adb<s-inmaop-posix.adb \\\n     s-intman.adb<s-intman-posix.adb \\\n     s-osinte.adb<s-osinte-lynxos.adb \\\n@@ -1082,7 +1136,7 @@ ifeq ($(strip $(filter-out alpha% dec osf%,$(targ))),)\n   g-soccon.ads<g-soccon-tru64.ads \\\n   system.ads<system-tru64.ads\n \n-  TOOLS_TARGET_PAIRS=mlib-tgt.adb<mlib-tgt-tru64.adb\n+  TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-tru64.adb\n \n   EH_MECHANISM=-gcc\n   GMEM_LIB=gmemlib\n@@ -1155,6 +1209,8 @@ endif\n   g-socthi.ads<g-socthi-vms.ads \\\n   g-socthi.adb<g-socthi-vms.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n+  g-sttsne.adb<g-sttsne-locking.adb \\\n+  g-sttsne.ads<g-sttsne-locking.ads \\\n   i-c.ads<i-c-vms_64.ads \\\n   i-cstrin.ads<i-cstrin-vms_64.ads \\\n   i-cstrin.adb<i-cstrin-vms_64.adb \\\n@@ -1179,17 +1235,19 @@ endif\n \n ifeq ($(strip $(filter-out ia64 hp vms% openvms%,$(targ))),)\n   TOOLS_TARGET_PAIRS= \\\n-  mlib-tgt.adb<mlib-tgt-vms-ia64.adb \\\n+  mlib-tgt-specific.adb<mlib-tgt-vms-ia64.adb \\\n   symbols.adb<symbols-vms.adb \\\n   symbols-processing.adb<symbols-processing-vms-ia64.adb\n else\n   TOOLS_TARGET_PAIRS= \\\n-  mlib-tgt.adb<mlib-tgt-vms-alpha.adb \\\n+  mlib-tgt-specific.adb<mlib-tgt-vms-alpha.adb \\\n   symbols.adb<symbols-vms.adb \\\n   symbols-processing.adb<symbols-processing-vms-alpha.adb\n endif\n \n \n+  EXTRA_GNATMAKE_OBJS = mlib-tgt-vms.o\n+\n   GMEM_LIB = gmemlib\n   EH_MECHANISM=-gcc\n   GNATLIB_SHARED=gnatlib-shared-vms\n@@ -1234,7 +1292,7 @@ ifeq ($(strip $(filter-out cygwin32% mingw32% pe,$(osys))),)\n   system.ads<system-mingw.ads\n \n   TOOLS_TARGET_PAIRS= \\\n-  mlib-tgt.adb<mlib-tgt-mingw.adb \\\n+  mlib-tgt-specific.adb<mlib-tgt-mingw.adb \\\n   indepsw.adb<indepsw-mingw.adb\n \n   MISCLIB = -lwsock32\n@@ -1265,7 +1323,7 @@ ifeq ($(strip $(filter-out powerpc% linux%,$(arch) $(osys))),)\n   system.ads<system-linux-ppc.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb \\\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb\n \n   EH_MECHANISM=-gcc\n@@ -1290,7 +1348,7 @@ ifeq ($(strip $(filter-out sparc% linux%,$(arch) $(osys))),)\n   system.ads<system-linux-sparc.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb \\\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb\n \n   EH_MECHANISM=-gcc\n@@ -1315,7 +1373,7 @@ ifeq ($(strip $(filter-out hppa% linux%,$(arch) $(osys))),)\n   system.ads<system-linux-hppa.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb \\\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb\n \n   EH_MECHANISM=-gcc\n@@ -1342,7 +1400,7 @@ ifeq ($(strip $(filter-out %ia64 linux%,$(arch) $(osys))),)\n   system.ads<system-linux-ia64.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb \\\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb\n \n   EH_MECHANISM=-gcc\n@@ -1368,7 +1426,7 @@ ifeq ($(strip $(filter-out alpha% linux%,$(arch) $(osys))),)\n   system.ads<system-linux-alpha.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb \\\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb\n \n   EH_MECHANISM=-gcc\n@@ -1396,7 +1454,7 @@ ifeq ($(strip $(filter-out %x86_64 linux%,$(arch) $(osys))),)\n   system.ads<system-linux-x86_64.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-linux.adb \\\n+    mlib-tgt-specific.adb<mlib-tgt-linux.adb \\\n     indepsw.adb<indepsw-gnu.adb\n \n   EH_MECHANISM=-gcc\n@@ -1410,6 +1468,10 @@ endif\n ifeq ($(strip $(filter-out powerpc darwin%,$(arch) $(osys))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-darwin.ads \\\n+  a-numaux.ads<a-numaux-darwin.ads \\\n+  a-numaux.adb<a-numaux-darwin.adb \\\n+  g-soccon.ads<g-soccon-darwin.ads \\\n+  i-forbla.adb<i-forbla-darwin.adb \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n   s-intman.adb<s-intman-posix.adb \\\n   s-osinte.adb<s-osinte-darwin.adb \\\n@@ -1418,13 +1480,10 @@ ifeq ($(strip $(filter-out powerpc darwin%,$(arch) $(osys))),)\n   s-taprop.adb<s-taprop-posix.adb \\\n   s-taspri.ads<s-taspri-posix.ads \\\n   s-tpopsp.adb<s-tpopsp-posix-foreign.adb \\\n-  g-soccon.ads<g-soccon-darwin.ads \\\n-  a-numaux.ads<a-numaux-darwin.ads \\\n-  a-numaux.adb<a-numaux-darwin.adb \\\n   system.ads<system-darwin-ppc.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n-    mlib-tgt.adb<mlib-tgt-darwin.adb\n+    mlib-tgt-specific.adb<mlib-tgt-darwin.adb\n \n   EH_MECHANISM=-gcc\n   GNATLIB_SHARED = gnatlib-shared-darwin\n@@ -1662,7 +1721,7 @@ install-gnatlib: ../stamp-gnatlib\n \t   fi; \\\n \tdone\n # This copy must be done preserving the date on the original file.\n-\tfor file in rts/*.adb rts/*.ads; do \\\n+\tfor file in rts/*.ad?; do \\\n \t    $(INSTALL_DATA_DATE) $$file $(DESTDIR)$(ADA_INCLUDE_DIR); \\\n \tdone\n \tcd $(DESTDIR)$(ADA_INCLUDE_DIR); $(CHMOD) a-wx *.adb\n@@ -1976,6 +2035,14 @@ a-except.o  : a-except.adb a-except.ads\n \t$(CC) -c $(ALL_ADAFLAGS) $(FORCE_DEBUG_ADAFLAGS) -O1 -fno-inline \\\n \t      $(NO_REORDER_ADAFLAGS) $(ADA_INCLUDES) $< $(OUTPUT_OPTION)\n \n+# compile s-except.o without optimization and with debug info to let the\n+# debugger set breakpoints and inspect subprogram parameters on exception\n+# related events.\n+\n+s-except.o  : s-except.adb s-except.ads\n+\t$(CC) -c $(ALL_ADAFLAGS) $(FORCE_DEBUG_ADAFLAGS) -O0 $(ADA_INCLUDES) \\\n+\t      $< $(OUTPUT_OPTION)\n+\n # force debugging information on s-assert.o so that it is always\n # possible to set breakpoint on assert failures.\n "}]}