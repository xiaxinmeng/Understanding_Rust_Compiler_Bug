{"sha": "cff559bcf04d458e886a61933641150cf4012ae8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ZmNTU5YmNmMDRkNDU4ZTg4NmE2MTkzMzY0MTE1MGNmNDAxMmFlOA==", "commit": {"author": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1998-06-10T10:22:54Z"}, "committer": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1998-06-10T10:22:54Z"}, "message": "New interface for lang_decode_option Wed Jun 10 13:07:02 1998 Dave Brolley <brolley@cygnus.com>\n\nNew interface for lang_decode_option\nWed Jun 10 13:07:02 1998  Dave Brolley  <brolley@cygnus.com>\n\t* objc/objc-act.c: Add cpplib declarations.\n\t(lang_decode_option): Initialize cpplib if necessary.\n\t(lang_decode_option): New argc/argv interface.\n\nFrom-SVN: r20410", "tree": {"sha": "457bf2888453ef09bf7ae0eca265e873910f6151", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/457bf2888453ef09bf7ae0eca265e873910f6151"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cff559bcf04d458e886a61933641150cf4012ae8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cff559bcf04d458e886a61933641150cf4012ae8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cff559bcf04d458e886a61933641150cf4012ae8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cff559bcf04d458e886a61933641150cf4012ae8/comments", "author": null, "committer": null, "parents": [{"sha": "ab9e0ff9c7fc514f6e5cfcadef49b233a706917b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab9e0ff9c7fc514f6e5cfcadef49b233a706917b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab9e0ff9c7fc514f6e5cfcadef49b233a706917b"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "e1cde90b094c3da90e9b0f4aeebc5acf432d6412", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 21, "deletions": 3, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cff559bcf04d458e886a61933641150cf4012ae8/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cff559bcf04d458e886a61933641150cf4012ae8/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=cff559bcf04d458e886a61933641150cf4012ae8", "patch": "@@ -51,6 +51,13 @@ Boston, MA 02111-1307, USA.  */\n #include \"output.h\"\n #include \"toplev.h\"\n \n+#if USE_CPPLIB\n+#include \"cpplib.h\"\n+extern cpp_reader  parse_in;\n+extern cpp_options parse_options;\n+static int cpp_initialized;\n+#endif\n+\n /* This is the default way of generating a method name.  */\n /* I am not sure it is really correct.\n    Perhaps there's a danger that it will make name conflicts\n@@ -666,9 +673,20 @@ lang_identify ()\n }\n \n int\n-lang_decode_option (p)\n-     char *p;\n+lang_decode_option (argc, argv)\n+     int argc;\n+     char **argv;\n {\n+  char *p = argv[0];\n+#if USE_CPPLIB\n+  if (! cpp_initialized)\n+    {\n+      cpp_reader_init (&parse_in);\n+      parse_in.data = &parse_options;\n+      cpp_options_init (&parse_options);\n+      cpp_initialized = 1;\n+    }\n+#endif\n   if (!strcmp (p, \"-lang-objc\"))\n     doing_objc_thang = 1;\n   else if (!strcmp (p, \"-gen-decls\"))\n@@ -692,7 +710,7 @@ lang_decode_option (p)\n   else if (!strcmp (p, \"-print-objc-runtime-info\"))\n     print_struct_values = 1;\n   else\n-    return c_decode_option (p);\n+    return c_decode_option (argc, argv);\n \n   return 1;\n }"}]}