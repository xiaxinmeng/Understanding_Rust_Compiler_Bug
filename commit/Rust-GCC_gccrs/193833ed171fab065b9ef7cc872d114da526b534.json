{"sha": "193833ed171fab065b9ef7cc872d114da526b534", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTkzODMzZWQxNzFmYWIwNjViOWVmN2NjODcyZDExNGRhNTI2YjUzNA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-07-16T21:04:16Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-07-16T21:04:16Z"}, "message": "cp-tree.h (THUNK_VCALL_OFFSET): Update documentation.\n\n\t* cp-tree.h (THUNK_VCALL_OFFSET): Update documentation.\n\t* method.c (use_thunk): Correct handling of vcall offsets.\n\nFrom-SVN: r35064", "tree": {"sha": "16e7fa4a4f75d64c88739f365852659a4d7d52d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16e7fa4a4f75d64c88739f365852659a4d7d52d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/193833ed171fab065b9ef7cc872d114da526b534", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/193833ed171fab065b9ef7cc872d114da526b534", "html_url": "https://github.com/Rust-GCC/gccrs/commit/193833ed171fab065b9ef7cc872d114da526b534", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/193833ed171fab065b9ef7cc872d114da526b534/comments", "author": null, "committer": null, "parents": [{"sha": "274077a44c1411b4d18040206355dbeaecc53f42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/274077a44c1411b4d18040206355dbeaecc53f42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/274077a44c1411b4d18040206355dbeaecc53f42"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "bba76feab8b65fe87a22de0392c4d6595749969e", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/193833ed171fab065b9ef7cc872d114da526b534/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/193833ed171fab065b9ef7cc872d114da526b534/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=193833ed171fab065b9ef7cc872d114da526b534", "patch": "@@ -3101,10 +3101,10 @@ extern int flag_new_for_scope;\n    `this' pointer when this function is called.  */\n #define THUNK_DELTA(DECL) (DECL_CHECK (DECL)->decl.u1.i)\n \n-/* An integer indicating how many bytes should be subtracted from the\n+/* A tree indicating how many bytes should be subtracted from the\n    vtable for the `this' pointer to find the vcall offset.  (The vptr\n    is always located at offset zero from the f `this' pointer.)  If\n-   zero, then there is no vcall offset.  */\n+   NULL, then there is no vcall offset.  */\n #define THUNK_VCALL_OFFSET(DECL) \\\n   (DECL_LANG_SPECIFIC (DECL)->decl_flags.u2.vcall_offset)\n "}, {"sha": "0926021afc0bc34a9560d1f7e8a03fadec1f80d5", "filename": "gcc/cp/method.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/193833ed171fab065b9ef7cc872d114da526b534/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/193833ed171fab065b9ef7cc872d114da526b534/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=193833ed171fab065b9ef7cc872d114da526b534", "patch": "@@ -2267,7 +2267,7 @@ use_thunk (thunk_fndecl, emit_p)\n     t = fold (build (PLUS_EXPR, TREE_TYPE (a), a, t));\n     /* If there's a vcall offset, look up that value in the vtable and\n        adjust the `this' pointer again.  */\n-    if (!integer_zerop (vcall_offset))\n+    if (vcall_offset && !integer_zerop (vcall_offset))\n       {\n \ttree orig_this;\n "}]}