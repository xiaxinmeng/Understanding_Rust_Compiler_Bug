{"sha": "0fac6b0b32f12da03f8443883fa6434db14b55a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGZhYzZiMGIzMmYxMmRhMDNmODQ0Mzg4M2ZhNjQzNGRiMTRiNTVhNg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-05-05T23:54:18Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-05-05T23:54:18Z"}, "message": "init.c (expand_vec_init): The initialization of each array element is a full-expression.\n\n\t* init.c (expand_vec_init): The initialization of each array\n\telement is a full-expression.\n\nFrom-SVN: r19557", "tree": {"sha": "e2cf380d5c76f06511c24bbb377d937c75317669", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e2cf380d5c76f06511c24bbb377d937c75317669"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0fac6b0b32f12da03f8443883fa6434db14b55a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fac6b0b32f12da03f8443883fa6434db14b55a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fac6b0b32f12da03f8443883fa6434db14b55a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fac6b0b32f12da03f8443883fa6434db14b55a6/comments", "author": null, "committer": null, "parents": [{"sha": "25cf40e29d42a562eeaad8d6015d9d7cd14b46f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25cf40e29d42a562eeaad8d6015d9d7cd14b46f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25cf40e29d42a562eeaad8d6015d9d7cd14b46f6"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "6b34102006d91aa686a9dcda9c0bb36891588bc4", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fac6b0b32f12da03f8443883fa6434db14b55a6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fac6b0b32f12da03f8443883fa6434db14b55a6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0fac6b0b32f12da03f8443883fa6434db14b55a6", "patch": "@@ -1,3 +1,8 @@\n+Tue May  5 23:54:04 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* init.c (expand_vec_init): The initialization of each array\n+\telement is a full-expression.\n+\n Tue May  5 18:24:13 EDT 1998  Andrew MacLeod  <amacleod@cygnus.com>\n \n \t* method.c: Add a call to build_type_variant to get the right type."}, {"sha": "d95de78206ac1f41651ca7931e621178971fd24b", "filename": "gcc/cp/init.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fac6b0b32f12da03f8443883fa6434db14b55a6/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fac6b0b32f12da03f8443883fa6434db14b55a6/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=0fac6b0b32f12da03f8443883fa6434db14b55a6", "patch": "@@ -2860,6 +2860,9 @@ expand_vec_init (decl, base, maxindex, init, from_array)\n \texpand_eh_region_start ();\n       expand_start_loop_continue_elsewhere (1);\n \n+      /* The initialization of each array element is a full-expression.  */\n+      expand_start_target_temps ();\n+\n       if (from_array)\n \t{\n \t  tree to = build1 (INDIRECT_REF, type, base);\n@@ -2895,6 +2898,10 @@ expand_vec_init (decl, base, maxindex, init, from_array)\n       if (base2)\n \texpand_assignment (base2,\n \t\t\t   build (PLUS_EXPR, build_pointer_type (type), base2, size), 0, 0);\n+\n+      /* Cleanup any temporaries needed for the initial value.  */\n+      expand_end_target_temps ();\n+\n       expand_loop_continue_here ();\n       expand_exit_loop_if_false (0, build (NE_EXPR, boolean_type_node,\n \t\t\t\t\t   build (PREDECREMENT_EXPR, ptrdiff_type_node, iterator, integer_one_node), minus_one));"}]}