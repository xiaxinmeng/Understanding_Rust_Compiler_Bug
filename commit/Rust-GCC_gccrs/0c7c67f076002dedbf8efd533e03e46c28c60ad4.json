{"sha": "0c7c67f076002dedbf8efd533e03e46c28c60ad4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM3YzY3ZjA3NjAwMmRlZGJmOGVmZDUzM2UwM2U0NmMyOGM2MGFkNA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-04-18T21:35:49Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-04-18T21:35:49Z"}, "message": "re PR libgcj/6158 (libgcj won't bootstrap on sparc-sun-solaris2.8 if already installed)\n\n\t* configure.in: Disallow configuring libgcj when it is already\n\tinstalled and we're using Solaris 2.8 linker.  Do enable libgcj on\n\tSolaris 2.8 by default.  For PR libgcj/6158.\n\nFrom-SVN: r52497", "tree": {"sha": "f476d9fbee74bb483b0d157d6728f3228cb08353", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f476d9fbee74bb483b0d157d6728f3228cb08353"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c7c67f076002dedbf8efd533e03e46c28c60ad4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c7c67f076002dedbf8efd533e03e46c28c60ad4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c7c67f076002dedbf8efd533e03e46c28c60ad4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c7c67f076002dedbf8efd533e03e46c28c60ad4/comments", "author": null, "committer": null, "parents": [{"sha": "51dcde6f95c8a107e0fb143210122eb49ee3c421", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51dcde6f95c8a107e0fb143210122eb49ee3c421", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51dcde6f95c8a107e0fb143210122eb49ee3c421"}], "stats": {"total": 42, "additions": 33, "deletions": 9}, "files": [{"sha": "d28b454f0198fe64ed277276005ff1c808d8010d", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c7c67f076002dedbf8efd533e03e46c28c60ad4/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c7c67f076002dedbf8efd533e03e46c28c60ad4/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=0c7c67f076002dedbf8efd533e03e46c28c60ad4", "patch": "@@ -1,3 +1,9 @@\n+2002-04-18  Tom Tromey  <tromey@redhat.com>\n+\n+\t* configure.in: Disallow configuring libgcj when it is already\n+\tinstalled and we're using Solaris 2.8 linker.  Do enable libgcj on\n+\tSolaris 2.8 by default.  For PR libgcj/6158.\n+\n 2002-04-17  Nathanael Nerode  <neroden@twcny.rr.com>\n \n \t* configure.in:  Move default CC setting out of config/mh-* fragments"}, {"sha": "f0e05c97636046a4aa8d5122cebfd4aba5a2c32d", "filename": "configure.in", "status": "modified", "additions": 27, "deletions": 9, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c7c67f076002dedbf8efd533e03e46c28c60ad4/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c7c67f076002dedbf8efd533e03e46c28c60ad4/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=0c7c67f076002dedbf8efd533e03e46c28c60ad4", "patch": "@@ -1046,15 +1046,6 @@ case \"${target}\" in\n     fi\n     ;;\n   sparc-*-solaris*)\n-    case \"${host}\" in\n-    sparc-*-solaris2.8)\n-      # According to Gerald Pfeifer <pfeifer@dbai.tuwien.ac.at>, libjava\n-      # won't build correctly on Solaris 8 if there's a\n-      # previously-installed version of GCC in the configured prefix.\n-      # This problem does not show up on earlier versions of Solaris.\n-      noconfigdirs=\"$noconfigdirs ${libgcj}\"\n-      ;;\n-    esac\n     ;;\n   v810-*-*)\n     noconfigdirs=\"$noconfigdirs bfd binutils gas gcc gdb ld ${libstdcxx_version} opcodes target-libgloss ${libgcj}\"\n@@ -1428,6 +1419,33 @@ case \"${host}\" in\n   ;;\n esac\n \n+# If we're building libgcj and we're using the Solaris 2.8 linker,\n+# then we check for a known problem.\n+if test \"x${libgcj}\" = x && test \"${with_gnu_ld}\" != yes \\\n+   && test \"${is_cross_compiler}\" = no; then\n+\n+   case \"${host}\" in\n+    sparc-*-solaris2.8)\n+       if test \"$libdir\" = '${exec_prefix}/lib';then\n+\t  if test \"$exec_prefix\" = '$(prefix)'; then\n+\t     tlibdir=\"$prefix/lib\"\n+\t  else\n+\t     tlibdir=\"$exec_prefix/lib\"\n+\t  fi\n+       else\n+\t  tlibdir=\"$libdir\"\n+       fi\n+       if test -f $tlibdir/libgcj.la; then\n+\t  echo \"*** You've already installed libgcj in $tlibdir.\" 1>&2\n+\t  echo \"    This causes problems when rebuilding libgcj with the Solaris 2.8 linker.\" 1>&2\n+\t  echo \"    Either disable the libgcj build, or remove the\" 1>&2\n+\t  echo \"    already-installed libgcj files.\" 1>&2\n+\t  exit 1\n+       fi\n+       ;;\n+   esac\n+fi\n+\n # If --enable-shared was set, we must set LD_LIBRARY_PATH so that the\n # binutils tools will find libbfd.so.\n if [ \"${shared}\" = \"yes\" ]; then"}]}