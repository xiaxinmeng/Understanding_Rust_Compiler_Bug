{"sha": "cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JhNTYzZjcxZGJjMTM3YTZjMGJhN2MxMGJjOGZlZjkwMjAzZWEwYw==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2018-07-20T16:38:43Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@gcc.gnu.org", "date": "2018-07-20T16:38:43Z"}, "message": "PR tree-optimization/86613 - missing -Warray-bounds on a wide string access due to ccp folding\n\nPR tree-optimization/86613 - missing -Warray-bounds on a wide string access due to ccp folding\nPR tree-optimization/86611 - missing -Warray-bounds on a large negative index into a string in lp64\n\ngcc/testsuite/ChangeLog:\n\t* gcc/testsuite/c-c++-common/Warray-bounds-2.c: Undefine macros and\n\tprune duplicate warnings.\n\t* gcc/testsuite/gcc.dg/Warray-bounds-31.c: Xfail test cases with\n\tdata-model-dependencies.\n\t* gcc/testsuite/gcc.dg/Warray-bounds-32.c: Ditto.\n\nFrom-SVN: r262906", "tree": {"sha": "de51a23aef5e4ccf08a02a362a2242ef04584ca8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de51a23aef5e4ccf08a02a362a2242ef04584ca8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4a4412b9de23b153481a60cd69abcee71c3e34fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a4412b9de23b153481a60cd69abcee71c3e34fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a4412b9de23b153481a60cd69abcee71c3e34fb"}], "stats": {"total": 29, "additions": 22, "deletions": 7}, "files": [{"sha": "538c7c3476b28d734e68b7d83cf68120b8b80de5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "patch": "@@ -1,3 +1,13 @@\n+2018-07-20  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR tree-optimization/86613\n+\tPR tree-optimization/86611\n+\t* gcc/testsuite/c-c++-common/Warray-bounds-2.c: Undefine macros and\n+\tprune duplicate warnings.\n+\t* gcc/testsuite/gcc.dg/Warray-bounds-31.c: Xfail test cases with\n+\tdata-model-dependencies.\n+\t* gcc/testsuite/gcc.dg/Warray-bounds-32.c: Ditto.\n+\n 2018-07-20  Richard Biener  <rguenther@suse.de>\n \n \tPR debug/86585"}, {"sha": "da5f64df9b7b314b84305b85dd22f6bdb75bb9b5", "filename": "gcc/testsuite/c-c++-common/Warray-bounds-2.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWarray-bounds-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWarray-bounds-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2FWarray-bounds-2.c?ref=cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "patch": "@@ -11,6 +11,10 @@\n #include <stddef.h>\n #include <string.h>\n \n+#undef memcpy\n+#undef strcpy\n+#undef strncpy\n+\n #define MAX  (__SIZE_MAX__ / 2)\n \n void sink (void*);\n@@ -210,3 +214,5 @@ void call_strncpy_dstarray_diff_neg (const char *s, size_t n)\n \n   sink (&ar10);\n }\n+\n+/* { dg-prune-output \"outside array bounds\" } */"}, {"sha": "389afaf045dc99cb689cddb5ce25eb6da39777ef", "filename": "gcc/testsuite/gcc.dg/Warray-bounds-31.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-31.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-31.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-31.c?ref=cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "patch": "@@ -23,7 +23,7 @@ void sink (int, ...);\n \n void narrow_direct_cst (void)\n {\n-  T (S1[MIN]);                /* { dg-warning \"array subscript -\\[0-9\\]+ is below array bounds of .char\\\\\\[2]\" \"\" { xfail *-*-* } } */\n+  T (S1[MIN]);                /* { dg-warning \"array subscript -\\[0-9\\]+ is below array bounds of .char\\\\\\[2]\" \"bug 86611\" { xfail lp64 } } */\n   T (S1[-1]);                 /* { dg-warning \"array subscript -1 is below array bounds of .char\\\\\\[2]\" } */\n   T (S1[0]);\n   T (S1[1]);\n@@ -37,7 +37,7 @@ void narrow_direct_cst (void)\n   T (&S1[3]);                 /* { dg-warning \"array subscript 3 is above array bounds of .char\\\\\\[2]\" } */\n   T (&S1[MAX]);               /* { dg-warning \"array subscript \\[0-9\\]+ is above array bounds of .char\\\\\\[2]\" } */\n \n-  T (S9[MIN]);                /* { dg-warning \"array subscript -\\[0-9\\]+ is below array bounds of .char\\\\\\[10]\" \"\" { xfail *-*-* } } */\n+  T (S9[MIN]);                /* { dg-warning \"array subscript -\\[0-9\\]+ is below array bounds of .char\\\\\\[10]\" \"xfail lp64\" { xfail lp64 } } */\n   T (S9[-1]);                 /* { dg-warning \"array subscript -1 is below array bounds of .char\\\\\\[10]\" } */\n   T (S9[9]);\n   T (S9[10]);                 /* { dg-warning \"array subscript 10 is above array bounds of .char\\\\\\[10]\" } */\n@@ -69,7 +69,7 @@ void narrow_ptr_index_cst (void)\n {\n   const char *p = S7;\n \n-  T (p[MIN + 1]);             /* { dg-warning \"array subscript -\\[0-9\\]+ is outside array bounds of .char\\\\\\[8].\" \"bug 84047\" { xfail *-*-* } } */\n+  T (p[MIN + 1]);             /* { dg-warning \"array subscript -\\[0-9\\]+ is outside array bounds of .char\\\\\\[8].\" \"bug 86611\" { xfail lp64 } } */\n   T (p[-1]);                  /* { dg-warning \"array subscript -1 is outside array bounds of .char\\\\\\[8].\" } */\n   T (p[0]);\n   T (p[1]);\n@@ -87,7 +87,7 @@ void narrow_ptr_index_cst (void)\n   T (&p[MAX]);                /* { dg-warning \"array subscript \\[0-9\\]+ is \\(above|outside\\) array bounds of .char\\\\\\[8].\" } */\n \n   const char *q = S8 + 4;\n-  T (q[MIN + 1]);             /* { dg-warning \"array subscript -?\\[0-9\\]+ is outside array bounds of .char\\\\\\[9].\" \"bug 84047\" { xfail *-*-* } } */\n+  T (q[MIN + 1]);             /* { dg-warning \"array subscript -?\\[0-9\\]+ is outside array bounds of .char\\\\\\[9].\" \"bug 86611\" { xfail lp64 } } */\n   T (q[-5]);                  /* { dg-warning \"array subscript -1 is outside array bounds of .char\\\\\\[9].\" } */\n   T (q[-4]);\n   T (q[0]);\n@@ -97,7 +97,7 @@ void narrow_ptr_index_cst (void)\n   T (q[5]);                   /* { dg-warning \"array subscript 9 is outside array bounds of .char\\\\\\[9].\" } */\n   T (q[99]);                  /* { dg-warning \"array subscript 103 is outside array bounds of .char\\\\\\[9].\" } */\n   T (q[MAX - 4]);             /* { dg-warning \"array subscript \\[0-9\\]+ is outside array bounds of .char\\\\\\[9].\" } */\n-  T (q[MAX - 3]);             /* { dg-warning \"array subscript \\[0-9\\]+ is outside array bounds of .char\\\\\\[9].\" \"bug 84047\" { xfail *-*-* } } */\n+  T (q[MAX - 3]);             /* { dg-warning \"array subscript -?\\[0-9\\]+ is outside array bounds of .char\\\\\\[9].\" \"bug 86611\" { xfail lp64 } } */\n \n   T (&q[MIN + 1]);            /* { dg-warning \"array subscript -?\\[0-9\\]+ is \\(below|outside\\) array bounds of .char\\\\\\[9].\" } */\n   T (&q[-5]);                 /* { dg-warning \"array subscript -1 is \\(below|outside\\) array bounds of .char\\\\\\[9].\" } */"}, {"sha": "54b09bc9b988a876056847ecfb139d73bc1fa08e", "filename": "gcc/testsuite/gcc.dg/Warray-bounds-32.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-32.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba563f71dbc137a6c0ba7c10bc8fef90203ea0c/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-32.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWarray-bounds-32.c?ref=cba563f71dbc137a6c0ba7c10bc8fef90203ea0c", "patch": "@@ -25,11 +25,10 @@ void sink (int);\n \n void wide_direct_cst (void)\n {\n-  T (W9[MIN]);                /* { dg-warning \"array subscript -\\[0-9\\]+ is below array bounds of .\\[a-z \\]+\\\\\\[10]\" \"\" } */\n+  T (W9[MIN]);                /* { dg-warning \"array subscript -\\[0-9\\]+ is below array bounds of .\\[a-z \\]+\\\\\\[10]\" \"bug 86611\" { xfail ilp32 } } */\n   T (W9[-1]);                 /* { dg-warning \"array subscript -1 is below array bounds of .\\[a-z \\]+\\\\\\[10]\" } */\n   T (W9[11]);                 /* { dg-warning \"array subscript 11 is above array bounds of .\\[a-z \\]+\\\\\\[10]\" } */\n   T (W9[MAX]);                /* { dg-warning \"array subscript \\[0-9\\]+ is above array bounds of .\\[a-z \\]+\\\\\\[10]\" } */\n-\n }\n \n void wide_ptr_deref_cst (void)"}]}