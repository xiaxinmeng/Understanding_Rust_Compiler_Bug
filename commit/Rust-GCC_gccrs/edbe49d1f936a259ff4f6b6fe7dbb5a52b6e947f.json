{"sha": "edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWRiZTQ5ZDFmOTM2YTI1OWZmNGY2YjZmZTdkYmI1YTUyYjZlOTQ3Zg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-11-19T11:25:15Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-11-19T11:25:15Z"}, "message": "init.c (__gnat_map_signal): map SIGSEGV to Storage_Error for AE653 vthreads.\n\n\t* init.c (__gnat_map_signal): map SIGSEGV to Storage_Error for AE653\n\tvthreads.\n\t(init_float): Eliminate initialization of floating point status for\n\tAE653. The instructions have no effect for vThreads.\n\nFrom-SVN: r90911", "tree": {"sha": "e6cb7234b46b272caa6b3438ab12f667a19c6fb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6cb7234b46b272caa6b3438ab12f667a19c6fb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f/comments", "author": null, "committer": null, "parents": [{"sha": "87b62748db18a61884ae1d37e8bbdf098400ddd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87b62748db18a61884ae1d37e8bbdf098400ddd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87b62748db18a61884ae1d37e8bbdf098400ddd8"}], "stats": {"total": 20, "additions": 14, "deletions": 6}, "files": [{"sha": "86152f9feded597613073118f374497b758c8202", "filename": "gcc/ada/init.c", "status": "modified", "additions": 14, "deletions": 6, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f/gcc%2Fada%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f/gcc%2Fada%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finit.c?ref=edbe49d1f936a259ff4f6b6fe7dbb5a52b6e947f", "patch": "@@ -1704,19 +1704,25 @@ __gnat_map_signal (int sig)\n       exception = &constraint_error;\n       msg = \"SIGILL\";\n       break;\n+#ifdef VTHREADS\n     case SIGSEGV:\n-      exception = &program_error;\n-      msg = \"SIGSEGV\";\n+      exception = &storage_error;\n+      msg = \"SIGSEGV: possible stack overflow\";\n       break;\n     case SIGBUS:\n-#ifdef VTHREADS\n       exception = &storage_error;\n       msg = \"SIGBUS: possible stack overflow\";\n+      break;\n #else\n+    case SIGSEGV:\n+      exception = &program_error;\n+      msg = \"SIGSEGV\";\n+      break;\n+    case SIGBUS:\n       exception = &program_error;\n       msg = \"SIGBUS\";\n-#endif\n       break;\n+#endif\n     default:\n       exception = &program_error;\n       msg = \"unhandled signal\";\n@@ -1777,8 +1783,10 @@ void\n __gnat_init_float (void)\n {\n   /* Disable overflow/underflow exceptions on the PPC processor, this is needed\n-     to get correct Ada semantic.  */\n-#if defined (_ARCH_PPC) && !defined (_SOFT_FLOAT)\n+     to get correct Ada semantics.  Note that for AE653 vThreads, the HW\n+     overflow settings are an OS configuration issue.  The instructions\n+     below have no effect */\n+#if defined (_ARCH_PPC) && !defined (_SOFT_FLOAT) && !defined (VTHREADS)\n   asm (\"mtfsb0 25\");\n   asm (\"mtfsb0 26\");\n #endif"}]}