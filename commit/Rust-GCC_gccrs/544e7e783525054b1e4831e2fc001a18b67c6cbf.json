{"sha": "544e7e783525054b1e4831e2fc001a18b67c6cbf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ0ZTdlNzgzNTI1MDU0YjFlNDgzMWUyZmMwMDFhMThiNjdjNmNiZg==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-10-13T13:21:34Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-10-13T13:21:34Z"}, "message": "ira.c (ira): Set current_loops to &ira_loops before recording loop exits.\n\n\t* ira.c (ira): Set current_loops to &ira_loops before recording\n\tloop exits.  Release recorded exits and loops early.\n\nFrom-SVN: r192423", "tree": {"sha": "645ddc683c9b0c8877caa17c71dce5e3a9122af7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/645ddc683c9b0c8877caa17c71dce5e3a9122af7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/544e7e783525054b1e4831e2fc001a18b67c6cbf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544e7e783525054b1e4831e2fc001a18b67c6cbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/544e7e783525054b1e4831e2fc001a18b67c6cbf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/544e7e783525054b1e4831e2fc001a18b67c6cbf/comments", "author": null, "committer": null, "parents": [{"sha": "5440a1b0fe1122a2e044023c9c7508d9205bfa14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5440a1b0fe1122a2e044023c9c7508d9205bfa14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5440a1b0fe1122a2e044023c9c7508d9205bfa14"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "804d74053d6ffd75a37fde2d01403a7758c42402", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7e783525054b1e4831e2fc001a18b67c6cbf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7e783525054b1e4831e2fc001a18b67c6cbf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=544e7e783525054b1e4831e2fc001a18b67c6cbf", "patch": "@@ -1,3 +1,8 @@\n+2012-10-13  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* ira.c (ira): Set current_loops to &ira_loops before recording\n+\tloop exits.  Release recorded exits and loops early.\n+\n 2012-10-13  Chung-Lin Tang  <cltang@codesourcery.com>\n \n \t* builtins.c (expand_builtin_set_thread_pointer): Use"}, {"sha": "9a93297b0d4b7ec220ec06d6839d341a4f1a3d6d", "filename": "gcc/ira.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/544e7e783525054b1e4831e2fc001a18b67c6cbf/gcc%2Fira.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/544e7e783525054b1e4831e2fc001a18b67c6cbf/gcc%2Fira.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira.c?ref=544e7e783525054b1e4831e2fc001a18b67c6cbf", "patch": "@@ -4233,8 +4233,8 @@ ira (FILE *f)\n   if (flag_ira_region == IRA_REGION_ALL || flag_ira_region == IRA_REGION_MIXED)\n     {\n       flow_loops_find (&ira_loops);\n-      record_loop_exits ();\n       current_loops = &ira_loops;\n+      record_loop_exits ();\n     }\n \n   if (internal_flag_ira_verbose > 0 && ira_dump_file != NULL)\n@@ -4277,9 +4277,14 @@ ira (FILE *f)\n \t     info.  */\n \t  df_analyze ();\n \n+\t  /* ??? Rebuild the loop tree, but why?  Does the loop tree\n+\t     change if new insns were generated?  Can that be handled\n+\t     by updating the loop tree incrementally?  */\n+\t  release_recorded_exits ();\n+\t  flow_loops_free (&ira_loops);\n \t  flow_loops_find (&ira_loops);\n-\t  record_loop_exits ();\n \t  current_loops = &ira_loops;\n+\t  record_loop_exits ();\n \n \t  setup_allocno_assignment_flags ();\n \t  ira_initiate_assign ();\n@@ -4363,6 +4368,7 @@ do_reload (void)\n \n   if (current_loops != NULL)\n     {\n+      release_recorded_exits ();\n       flow_loops_free (&ira_loops);\n       free_dominance_info (CDI_DOMINATORS);\n     }"}]}