{"sha": "a13d9afef7fc87c6ddd4420192370531ee02524c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEzZDlhZmVmN2ZjODdjNmRkZDQ0MjAxOTIzNzA1MzFlZTAyNTI0Yw==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T21:19:27Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T21:19:27Z"}, "message": "trans-array.c (gfc_trans_constant_array_constructor, [...]): Rename the former to the latter.\n\n\t* trans-array.c (gfc_trans_constant_array_constructor,\n\ttrans_constant_array_constructor): Rename the former to the latter.\n\tDon't set the rank of the temporary for the loop.  Remove then unused\n\tloop argument.\n\t(gfc_trans_array_constructor): Update call.\n\nFrom-SVN: r180856", "tree": {"sha": "1db5184d43a5718034688324d645a784dad6a1a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1db5184d43a5718034688324d645a784dad6a1a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a13d9afef7fc87c6ddd4420192370531ee02524c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a13d9afef7fc87c6ddd4420192370531ee02524c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a13d9afef7fc87c6ddd4420192370531ee02524c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a13d9afef7fc87c6ddd4420192370531ee02524c/comments", "author": null, "committer": null, "parents": [{"sha": "39abb03c4b6c5c49fbe038a1256a6074acfbfdf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39abb03c4b6c5c49fbe038a1256a6074acfbfdf0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39abb03c4b6c5c49fbe038a1256a6074acfbfdf0"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "2401c186ea3300f003f2fd2e60dceadd7fee8752", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a13d9afef7fc87c6ddd4420192370531ee02524c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a13d9afef7fc87c6ddd4420192370531ee02524c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a13d9afef7fc87c6ddd4420192370531ee02524c", "patch": "@@ -1,3 +1,11 @@\n+2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\t* trans-array.c (gfc_trans_constant_array_constructor,\n+\ttrans_constant_array_constructor): Rename the former to the latter.\n+\tDon't set the rank of the temporary for the loop.  Remove then unused\n+\tloop argument.\n+\t(gfc_trans_array_constructor): Update call.\n+\n 2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* trans-array.c (gfc_trans_scalarizing_loops): Stop loop before end"}, {"sha": "c39fc9e29b4277ca68ae4d5c76e9318758d9b98f", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a13d9afef7fc87c6ddd4420192370531ee02524c/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a13d9afef7fc87c6ddd4420192370531ee02524c/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=a13d9afef7fc87c6ddd4420192370531ee02524c", "patch": "@@ -1849,8 +1849,7 @@ gfc_build_constant_array_constructor (gfc_expr * expr, tree type)\n    gfc_build_constant_array_constructor.  */\n \n static void\n-gfc_trans_constant_array_constructor (gfc_loopinfo * loop,\n-\t\t\t\t      gfc_ss * ss, tree type)\n+trans_constant_array_constructor (gfc_ss * ss, tree type)\n {\n   gfc_ss_info *info;\n   tree tmp;\n@@ -1871,14 +1870,11 @@ gfc_trans_constant_array_constructor (gfc_loopinfo * loop,\n       info->end[i] = gfc_index_zero_node;\n       info->stride[i] = gfc_index_one_node;\n     }\n-\n-  if (info->dimen > loop->temp_dim)\n-    loop->temp_dim = info->dimen;\n }\n \n /* Helper routine of gfc_trans_array_constructor to determine if the\n    bounds of the loop specified by LOOP are constant and simple enough\n-   to use with gfc_trans_constant_array_constructor.  Returns the\n+   to use with trans_constant_array_constructor.  Returns the\n    iteration count of the loop if suitable, and NULL_TREE otherwise.  */\n \n static tree\n@@ -2033,7 +2029,7 @@ gfc_trans_array_constructor (gfc_loopinfo * loop, gfc_ss * ss, locus * where)\n \t  tree size = constant_array_constructor_loop_size (loop);\n \t  if (size && compare_tree_int (size, nelem) == 0)\n \t    {\n-\t      gfc_trans_constant_array_constructor (loop, ss, type);\n+\t      trans_constant_array_constructor (ss, type);\n \t      goto finish;\n \t    }\n \t}"}]}