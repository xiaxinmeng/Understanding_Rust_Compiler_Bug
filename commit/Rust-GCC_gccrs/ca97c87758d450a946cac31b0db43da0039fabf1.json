{"sha": "ca97c87758d450a946cac31b0db43da0039fabf1", "node_id": "C_kwDOANBUbNoAKGNhOTdjODc3NThkNDUwYTk0NmNhYzMxYjBkYjQzZGEwMDM5ZmFiZjE", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-05-10T12:06:47Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-05-10T15:40:22Z"}, "message": "libstdc++: Add <spanstream> declarations to <iosfwd> [PR105284]\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/105284\n\t* include/std/iosfwd: Add declarations for <spanstream> class\n\ttemplates and typedefs.\n\t* include/std/spanstream (basic_spanbuf, basic_ispanstream)\n\t(basic_ospanstream, basic_spanstream): Remove default template\n\targuments.\n\t* testsuite/27_io/headers/iosfwd/synopsis.cc: Add <spanstream>\n\tdeclarations.\n\t* testsuite/27_io/headers/iosfwd/types.cc: Check <spanstream>\n\tdefault arguments.", "tree": {"sha": "6ac24fa447a908c26fbd545407775639edb01f0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ac24fa447a908c26fbd545407775639edb01f0f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca97c87758d450a946cac31b0db43da0039fabf1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca97c87758d450a946cac31b0db43da0039fabf1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca97c87758d450a946cac31b0db43da0039fabf1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca97c87758d450a946cac31b0db43da0039fabf1/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1807e07825a86916bbfddca470708c5a8f613612", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1807e07825a86916bbfddca470708c5a8f613612", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1807e07825a86916bbfddca470708c5a8f613612"}], "stats": {"total": 94, "additions": 90, "deletions": 4}, "files": [{"sha": "ddf0c953856c797ad3909de86306b0f52891e8fb", "filename": "libstdc++-v3/include/std/iosfwd", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiosfwd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiosfwd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiosfwd?ref=ca97c87758d450a946cac31b0db43da0039fabf1", "patch": "@@ -225,6 +225,29 @@ _GLIBCXX_END_NAMESPACE_CXX11\n #endif\n #endif // C++20 && CXX11_ABI\n \n+#if __cplusplus > 202002L\n+  template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+    class basic_spanbuf;\n+  template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+    class basic_ispanstream;\n+  template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+    class basic_ospanstream;\n+  template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+    class basic_spanstream;\n+\n+  using spanbuf     = basic_spanbuf<char>;\n+  using ispanstream = basic_ispanstream<char>;\n+  using ospanstream = basic_ospanstream<char>;\n+  using spanstream  = basic_spanstream<char>;\n+\n+#ifdef _GLIBCXX_USE_WCHAR_T\n+  using wspanbuf     = basic_spanbuf<wchar_t>;\n+  using wispanstream = basic_ispanstream<wchar_t>;\n+  using wospanstream = basic_ospanstream<wchar_t>;\n+  using wspanstream  = basic_spanstream<wchar_t>;\n+#endif\n+#endif // C++23\n+\n   /** @}  */\n \n _GLIBCXX_END_NAMESPACE_VERSION"}, {"sha": "5855b286efe377713b2990bdce930201e64711eb", "filename": "libstdc++-v3/include/std/spanstream", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fspanstream", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fspanstream", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fspanstream?ref=ca97c87758d450a946cac31b0db43da0039fabf1", "patch": "@@ -45,7 +45,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n #define __cpp_lib_spanstream 202106L\n \n-template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+template<typename _CharT, typename _Traits>\n   class basic_spanbuf\n   : public basic_streambuf<_CharT, _Traits>\n   {\n@@ -218,7 +218,7 @@ template<typename _CharT, typename _Traits>\n using spanbuf = basic_spanbuf<char>;\n using wspanbuf = basic_spanbuf<wchar_t>;\n \n-template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+template<typename _CharT, typename _Traits>\n   class basic_ispanstream\n   : public basic_istream<_CharT, _Traits>\n   {\n@@ -310,7 +310,7 @@ template<typename _CharT, typename _Traits>\n using ispanstream = basic_ispanstream<char>;\n using wispanstream = basic_ispanstream<wchar_t>;\n \n-template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+template<typename _CharT, typename _Traits>\n   class basic_ospanstream\n   : public basic_ostream<_CharT, _Traits>\n   {\n@@ -378,7 +378,7 @@ template<typename _CharT, typename _Traits>\n using ospanstream = basic_ospanstream<char>;\n using wospanstream = basic_ospanstream<wchar_t>;\n \n-template<typename _CharT, typename _Traits = char_traits<_CharT>>\n+template<typename _CharT, typename _Traits>\n   class basic_spanstream\n   : public basic_iostream<_CharT, _Traits>\n   {"}, {"sha": "467d63609bdf475a836cd92bacaaceed5c2cba7c", "filename": "libstdc++-v3/testsuite/27_io/headers/iosfwd/synopsis.cc", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fheaders%2Fiosfwd%2Fsynopsis.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fheaders%2Fiosfwd%2Fsynopsis.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fheaders%2Fiosfwd%2Fsynopsis.cc?ref=ca97c87758d450a946cac31b0db43da0039fabf1", "patch": "@@ -75,6 +75,12 @@ _GLIBCXX_END_NAMESPACE_CXX11\n   typedef basic_ostringstream<char> ostringstream;\n   typedef basic_stringstream<char>  stringstream;\n \n+#if __cplusplus > 202002L\n+  typedef basic_spanbuf<char>     spanbuf;\n+  typedef basic_ispanstream<char> ispanstream;\n+  typedef basic_ospanstream<char> ospanstream;\n+  typedef basic_spanstream<char>  spanstream;\n+#endif\n \n   typedef basic_filebuf<char>  filebuf;\n   typedef basic_ifstream<char> ifstream;\n@@ -96,6 +102,13 @@ _GLIBCXX_END_NAMESPACE_CXX11\n   typedef basic_ostringstream<wchar_t> wostringstream;\n   typedef basic_stringstream<wchar_t>  wstringstream;\n \n+#if __cplusplus > 202002L\n+  typedef basic_spanbuf<wchar_t>     wspanbuf;\n+  typedef basic_ispanstream<wchar_t> wispanstream;\n+  typedef basic_ospanstream<wchar_t> wospanstream;\n+  typedef basic_spanstream<wchar_t>  wspanstream;\n+#endif\n+\n   typedef basic_filebuf<wchar_t>  wfilebuf;\n   typedef basic_ifstream<wchar_t> wifstream;\n   typedef basic_ofstream<wchar_t> wofstream;"}, {"sha": "baf37e910af798acfbda84c0c9299b8835712b29", "filename": "libstdc++-v3/testsuite/27_io/headers/iosfwd/types.cc", "status": "modified", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fheaders%2Fiosfwd%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca97c87758d450a946cac31b0db43da0039fabf1/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fheaders%2Fiosfwd%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fheaders%2Fiosfwd%2Ftypes.cc?ref=ca97c87758d450a946cac31b0db43da0039fabf1", "patch": "@@ -115,6 +115,56 @@ static_assert(Same<basic_stringstream<wchar_t>,\n \t\t   >::value,\n     \"std::basic_stringstream<wchar_t> has the correct default template argument\");\n \n+#if __cplusplus > 202002L\n+using std::basic_spanbuf;\n+\n+static_assert(Same<basic_spanbuf<char>,\n+\t\t   basic_spanbuf<char, Traits<char>>\n+\t\t   >::value,\n+    \"std::basic_spanbuf<char> has the correct default template argument\");\n+\n+static_assert(Same<basic_spanbuf<wchar_t>,\n+\t\t   basic_spanbuf<wchar_t, Traits<wchar_t>>\n+\t\t   >::value,\n+    \"std::basic_spanbuf<wchar_t> has the correct default template argument\");\n+\n+using std::basic_ispanstream;\n+\n+static_assert(Same<basic_ispanstream<char>,\n+\t\t   basic_ispanstream<char, Traits<char>>\n+\t\t   >::value,\n+    \"std::basic_ispanstream<char> has the correct default template argument\");\n+\n+static_assert(Same<basic_ispanstream<wchar_t>,\n+\t\t   basic_ispanstream<wchar_t, Traits<wchar_t>>\n+\t\t   >::value,\n+    \"std::basic_ispanstream<wchar_t> has the correct default template argument\");\n+\n+using std::basic_ospanstream;\n+\n+static_assert(Same<basic_ospanstream<char>,\n+\t\t   basic_ospanstream<char, Traits<char>>\n+\t\t   >::value,\n+    \"std::basic_ospanstream<char> has the correct default template argument\");\n+\n+static_assert(Same<basic_ospanstream<wchar_t>,\n+\t\t   basic_ospanstream<wchar_t, Traits<wchar_t>>\n+\t\t   >::value,\n+    \"std::basic_ospanstream<wchar_t> has the correct default template argument\");\n+\n+using std::basic_spanstream;\n+\n+static_assert(Same<basic_spanstream<char>,\n+\t\t   basic_spanstream<char, Traits<char>>\n+\t\t   >::value,\n+    \"std::basic_spanstream<char> has the correct default template argument\");\n+\n+static_assert(Same<basic_spanstream<wchar_t>,\n+\t\t   basic_spanstream<wchar_t, Traits<wchar_t>>\n+\t\t   >::value,\n+    \"std::basic_spanstream<wchar_t> has the correct default template argument\");\n+#endif\n+\n using std::basic_filebuf;\n \n static_assert(Same<basic_filebuf<char>,"}]}