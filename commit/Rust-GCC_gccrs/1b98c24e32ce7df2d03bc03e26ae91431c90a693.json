{"sha": "1b98c24e32ce7df2d03bc03e26ae91431c90a693", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWI5OGMyNGUzMmNlN2RmMmQwM2JjMDNlMjZhZTkxNDMxYzkwYTY5Mw==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2006-08-31T22:20:09Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2006-08-31T22:20:09Z"}, "message": "PR libstdc++/28671 continued\n\n2006-08-31  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/28671 continued\n\t* acinclude.m4 (GLIBCXX_ENABLE_ATOMIC_BUILTINS): Don't use\n\tCXXFLAGS when checking for atomic builtins.\n\t* configure: Regenerate.\n\t* include/bits/atomicity.h: Revert.\n\nFrom-SVN: r116608", "tree": {"sha": "c12dbe2c10f18d3245e82eafef8051e20aa47a4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c12dbe2c10f18d3245e82eafef8051e20aa47a4a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b98c24e32ce7df2d03bc03e26ae91431c90a693", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b98c24e32ce7df2d03bc03e26ae91431c90a693", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b98c24e32ce7df2d03bc03e26ae91431c90a693", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b98c24e32ce7df2d03bc03e26ae91431c90a693/comments", "author": null, "committer": null, "parents": [{"sha": "e282a2bc9f65e7476487a3e4e4e3476c20407c4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e282a2bc9f65e7476487a3e4e4e3476c20407c4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e282a2bc9f65e7476487a3e4e4e3476c20407c4e"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "705b2ca3530329df8baa8cb4a6a032e0e2f6e3f3", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=1b98c24e32ce7df2d03bc03e26ae91431c90a693", "patch": "@@ -1,3 +1,11 @@\n+2006-08-31  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/28671 continued\n+\t* acinclude.m4 (GLIBCXX_ENABLE_ATOMIC_BUILTINS): Don't use\n+\tCXXFLAGS when checking for atomic builtins.\n+\t* configure: Regenerate.\n+\t* include/bits/atomicity.h: Revert.\n+\t\n 2006-08-31  Richard Guenther  <rguenther@suse.de>\n \n \t* include/ext/mt_allocator.h: Remove volatile qualifiers"}, {"sha": "8fe294d4c40ab67f9dbf8182de660f091eb752eb", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=1b98c24e32ce7df2d03bc03e26ae91431c90a693", "patch": "@@ -2007,7 +2007,7 @@ int main()\n }\n EOF\n     old_CXXFLAGS=\"$CXXFLAGS\"\n-    CXXFLAGS=\"$CXXFLAGS -S\"\n+    CXXFLAGS=-S\n     if AC_TRY_EVAL(ac_compile); then\n       if grep __sync_fetch_and_add conftest.s >/dev/null 2>&1 ; then\n         enable_atomic_builtins=no"}, {"sha": "0050af38a225e8e1c87d1f854c5c035ecd6c4226", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=1b98c24e32ce7df2d03bc03e26ae91431c90a693", "patch": "@@ -8025,7 +8025,7 @@ int main()\n }\n EOF\n     old_CXXFLAGS=\"$CXXFLAGS\"\n-    CXXFLAGS=\"$CXXFLAGS -S\"\n+    CXXFLAGS=-S\n     if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?"}, {"sha": "79af99ec7241dd581151f68a2b0e9fa24c0fd747", "filename": "libstdc++-v3/include/bits/atomicity.h", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fatomicity.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b98c24e32ce7df2d03bc03e26ae91431c90a693/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fatomicity.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fatomicity.h?ref=1b98c24e32ce7df2d03bc03e26ae91431c90a693", "patch": "@@ -41,13 +41,23 @@\n \n _GLIBCXX_BEGIN_NAMESPACE(__gnu_cxx)\n \n+#ifdef _GLIBCXX_ATOMIC_BUILTINS\n+  static inline _Atomic_word \n+  __exchange_and_add(volatile _Atomic_word* __mem, int __val)\n+  { return __sync_fetch_and_add(__mem, __val); }\n+\n+  static inline void\n+  __atomic_add(volatile _Atomic_word* __mem, int __val)\n+  { __sync_fetch_and_add(__mem, __val); }\n+#else\n   _Atomic_word\n   __attribute__ ((__unused__))\n   __exchange_and_add(volatile _Atomic_word* __mem, int __val);\n \n   void\n   __attribute__ ((__unused__))\n   __atomic_add(volatile _Atomic_word* __mem, int __val);\n+#endif\n \n   static inline _Atomic_word\n   __exchange_and_add_single(_Atomic_word* __mem, int __val)"}]}