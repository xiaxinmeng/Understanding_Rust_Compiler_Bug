{"sha": "303a3927d2fa2568cacb701561150e5693633d99", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzAzYTM5MjdkMmZhMjU2OGNhY2I3MDE1NjExNTBlNTY5MzYzM2Q5OQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-04-19T16:21:58Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-04-19T16:21:58Z"}, "message": "re PR c++/6352 (GCC 3.1 inliner regression from March)\n\n\tPR c++/6352\n\t* toplev.c (rest_of_compilation): Do not defer functions for which\n\tTREE_SYMBOL_REFERENCED has already been set.\n\n\t* PR6352\n\t* g++.dg/opt/inline2.C: New test.\n\nFrom-SVN: r52521", "tree": {"sha": "b52945119ab792ef7821eee1b9de33e0f4bf07d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b52945119ab792ef7821eee1b9de33e0f4bf07d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/303a3927d2fa2568cacb701561150e5693633d99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/303a3927d2fa2568cacb701561150e5693633d99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/303a3927d2fa2568cacb701561150e5693633d99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/303a3927d2fa2568cacb701561150e5693633d99/comments", "author": null, "committer": null, "parents": [{"sha": "de80110b8836fd153e11d858b904b396f4b8960d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de80110b8836fd153e11d858b904b396f4b8960d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de80110b8836fd153e11d858b904b396f4b8960d"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "579cdf6802bc11b1ad6fbe8f3a34cae1f2de321e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/303a3927d2fa2568cacb701561150e5693633d99/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/303a3927d2fa2568cacb701561150e5693633d99/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=303a3927d2fa2568cacb701561150e5693633d99", "patch": "@@ -1,3 +1,9 @@\n+2002-04-19  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/6352\n+\t* toplev.c (rest_of_compilation): Do not defer functions for which\n+\tTREE_SYMBOL_REFERENCED has already been set.\n+\n Fri Apr 19 15:53:03 CEST 2002  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (movsi_1, movhi_1): Force reload to use more flexible"}, {"sha": "8cf71e96409ee63c99c40001af654bd58ed3a66b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/303a3927d2fa2568cacb701561150e5693633d99/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/303a3927d2fa2568cacb701561150e5693633d99/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=303a3927d2fa2568cacb701561150e5693633d99", "patch": "@@ -1,3 +1,8 @@\n+2002-04-19  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* PR6352\n+\t* g++.dg/opt/inline2.C: New test.\n+\n 2002-04-18  Richard Henderson  <rth@redhat.com>\n \n         * gcc.dg/20000906-1.c: Enable for all targets."}, {"sha": "6e6889fc7b71d0f4756fdb6e903f72bb139a1094", "filename": "gcc/testsuite/g++.dg/opt/inline2.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/303a3927d2fa2568cacb701561150e5693633d99/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Finline2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/303a3927d2fa2568cacb701561150e5693633d99/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Finline2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Finline2.C?ref=303a3927d2fa2568cacb701561150e5693633d99", "patch": "@@ -0,0 +1,18 @@\n+// { dg-do link }\n+// { dg-options \"-O1 -finline-functions\" }\n+\n+static void g ();\n+\n+void f()\n+{\n+  void g();\n+  g();\n+}\n+\n+void g()\n+{\n+}\n+\n+int main () {\n+  f ();\n+}"}, {"sha": "fa8e2893a54428dd1ff78e34c8cfe3a476a41b48", "filename": "gcc/toplev.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/303a3927d2fa2568cacb701561150e5693633d99/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/303a3927d2fa2568cacb701561150e5693633d99/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=303a3927d2fa2568cacb701561150e5693633d99", "patch": "@@ -2374,6 +2374,7 @@ rest_of_compilation (decl)\n       if (inlinable\n \t  || (DECL_INLINE (decl)\n \t      && ((! TREE_PUBLIC (decl) && ! TREE_ADDRESSABLE (decl)\n+\t\t   && ! TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (decl))\n \t\t   && ! flag_keep_inline_functions)\n \t\t  || DECL_EXTERNAL (decl))))\n \tDECL_DEFER_OUTPUT (decl) = 1;"}]}