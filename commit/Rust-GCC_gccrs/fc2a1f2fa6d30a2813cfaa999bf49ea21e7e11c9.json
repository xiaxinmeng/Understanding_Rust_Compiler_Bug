{"sha": "fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmMyYTFmMmZhNmQzMGEyODEzY2ZhYTk5OWJmNDllYTIxZTdlMTFjOQ==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2018-11-30T20:39:18Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2018-11-30T20:39:18Z"}, "message": "Clean up Fortran OpenACC wait clause handling\n\n\"wait\" can be deduced from \"wait_list\".\n\n\tgcc/fortran/\n\t* gfortran.h (struct gfc_omp_clauses): Remove \"wait\".  Adjust all\n\tusers.\n\nFrom-SVN: r266685", "tree": {"sha": "05ccf31d998623ac0c4f4ba4a4860259ef77dec4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05ccf31d998623ac0c4f4ba4a4860259ef77dec4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c34f4fbcc450474885baede3d5de8dcfcb9f103f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c34f4fbcc450474885baede3d5de8dcfcb9f103f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c34f4fbcc450474885baede3d5de8dcfcb9f103f"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "76bb0b9f5c0c090c40ced73ca3185d2d78365e8e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9", "patch": "@@ -1,5 +1,8 @@\n 2018-11-30  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\t* gfortran.h (struct gfc_omp_clauses): Remove \"wait\".  Adjust all\n+\tusers.\n+\n \t* openmp.c (gfc_match_omp_clauses): Support multiple OpenACC wait\n \tclauses.\n "}, {"sha": "a14b4c44a18a5368c69e32e0ee6f6473d3d98c44", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9", "patch": "@@ -1345,7 +1345,7 @@ typedef struct gfc_omp_clauses\n   gfc_expr_list *wait_list;\n   gfc_expr_list *tile_list;\n   unsigned async:1, gang:1, worker:1, vector:1, seq:1, independent:1;\n-  unsigned wait:1, par_auto:1, gang_static:1;\n+  unsigned par_auto:1, gang_static:1;\n   unsigned if_present:1, finalize:1;\n   locus loc;\n "}, {"sha": "fb9c073ff779cfaec028d6fbaf1daf546722886b", "filename": "gcc/fortran/openmp.c", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9/gcc%2Ffortran%2Fopenmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9/gcc%2Ffortran%2Fopenmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.c?ref=fc2a1f2fa6d30a2813cfaa999bf49ea21e7e11c9", "patch": "@@ -1878,7 +1878,6 @@ gfc_match_omp_clauses (gfc_omp_clauses **cp, const omp_mask mask,\n \t  if ((mask & OMP_CLAUSE_WAIT)\n \t      && gfc_match (\"wait\") == MATCH_YES)\n \t    {\n-\t      c->wait = true;\n \t      match m = match_oacc_expr_list (\" (\", &c->wait_list, false);\n \t      if (m == MATCH_ERROR)\n \t\t{\n@@ -4779,10 +4778,8 @@ resolve_omp_clauses (gfc_code *code, gfc_omp_clauses *omp_clauses,\n     resolve_positive_int_expr (omp_clauses->worker_expr, \"WORKER\");\n   if (omp_clauses->vector_expr)\n     resolve_positive_int_expr (omp_clauses->vector_expr, \"VECTOR\");\n-  if (omp_clauses->wait)\n-    if (omp_clauses->wait_list)\n-      for (el = omp_clauses->wait_list; el; el = el->next)\n-\tresolve_scalar_int_expr (el->expr, \"WAIT\");\n+  for (el = omp_clauses->wait_list; el; el = el->next)\n+    resolve_scalar_int_expr (el->expr, \"WAIT\");\n   if (omp_clauses->collapse && omp_clauses->tile_list)\n     gfc_error (\"Incompatible use of TILE and COLLAPSE at %L\", &code->loc);\n   if (omp_clauses->depend_source && code->op != EXEC_OMP_ORDERED)"}]}