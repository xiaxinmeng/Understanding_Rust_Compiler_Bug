{"sha": "c26b89b7bf848562e68d03d8ad668c3775542ca4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzI2Yjg5YjdiZjg0ODU2MmU2OGQwM2Q4YWQ2NjhjMzc3NTU0MmNhNA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2012-04-13T19:43:57Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2012-04-13T19:43:57Z"}, "message": "re PR c++/52824 ([C++11] expanding variadic template arguments into non-variadic template)\n\n\tPR c++/52824\n\t* pt.c (any_pack_expanson_args_p): New.\n\t(coerce_template_parms): Use it.\n\nFrom-SVN: r186434", "tree": {"sha": "d68998d48eccc360e011d67b38b43d76c0f1ee6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d68998d48eccc360e011d67b38b43d76c0f1ee6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c26b89b7bf848562e68d03d8ad668c3775542ca4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c26b89b7bf848562e68d03d8ad668c3775542ca4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c26b89b7bf848562e68d03d8ad668c3775542ca4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c26b89b7bf848562e68d03d8ad668c3775542ca4/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7aca561c8671a2ef8203c5571714b7886e2c8758", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7aca561c8671a2ef8203c5571714b7886e2c8758", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7aca561c8671a2ef8203c5571714b7886e2c8758"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "e7e9b7e8afbdd38a0892417ee047c972eea4ce96", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c26b89b7bf848562e68d03d8ad668c3775542ca4", "patch": "@@ -1,5 +1,9 @@\n 2012-04-13  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/52824\n+\t* pt.c (any_pack_expanson_args_p): New.\n+\t(coerce_template_parms): Use it.\n+\n \tPR c++/52905\n \t* call.c (joust): Handle comparing list and non-list ctors.\n "}, {"sha": "07a2cc00bb222b5984924ecb71f1230225f0a0ba", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=c26b89b7bf848562e68d03d8ad668c3775542ca4", "patch": "@@ -6725,6 +6725,20 @@ coerce_template_parameter_pack (tree parms,\n   return argument_pack;\n }\n \n+/* Returns true if the template argument vector ARGS contains\n+   any pack expansions, false otherwise.  */\n+\n+static bool\n+any_pack_expanson_args_p (tree args)\n+{\n+  int i;\n+  if (args)\n+    for (i = 0; i < TREE_VEC_LENGTH (args); ++i)\n+      if (PACK_EXPANSION_P (TREE_VEC_ELT (args, i)))\n+\treturn true;\n+  return false;\n+}\n+\n /* Convert all template arguments to their appropriate types, and\n    return a vector containing the innermost resulting template\n    arguments.  If any error occurs, return error_mark_node. Error and\n@@ -6790,6 +6804,7 @@ coerce_template_parms (tree parms,\n   if ((nargs > nparms && !variadic_p)\n       || (nargs < nparms - variadic_p\n \t  && require_all_args\n+\t  && !any_pack_expanson_args_p (inner_args)\n \t  && (!use_default_args\n \t      || (TREE_VEC_ELT (parms, nargs) != error_mark_node\n                   && !TREE_PURPOSE (TREE_VEC_ELT (parms, nargs))))))"}, {"sha": "3a31797faebde644a738deb1de17ebc2ba0bc137", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c26b89b7bf848562e68d03d8ad668c3775542ca4", "patch": "@@ -1,5 +1,9 @@\n 2012-04-13  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/52824\n+\t* g++.dg/cpp0x/variadic123.C: New.\n+\t* g++.dg/cpp0x/alias-decl-15.C: Remove dg-errors.\n+\n \tPR c++/52905\n \t* g++.dg/cpp0x/initlist-ctor1.C: New.\n "}, {"sha": "b23e4029f79c160ba8fc443ff4f7dd89b447ee19", "filename": "gcc/testsuite/g++.dg/cpp0x/alias-decl-15.C", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-15.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-15.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falias-decl-15.C?ref=c26b89b7bf848562e68d03d8ad668c3775542ca4", "patch": "@@ -2,16 +2,16 @@\n // { dg-options \"-std=c++0x\" }\n \n template<class U, class V> //#1\n-struct foo {}; // { dg-error \"provided for|foo\" }\n+struct foo {};\n \n template<class U, class V=char>\n struct P {};\n \n template<template<class... U> class... TT>\n struct bar {\n     template<class... Args>\n-    using mem = P<TT<Args...>...>;//#2 { dg-error \"wrong number of|arguments\" }\n+    using mem = P<TT<Args...>...>;//#2\n };\n \n-bar<foo>::mem<int, char> b;//#3 { dg-error \"invalid type\" }\n+bar<foo>::mem<int, char> b;//#3\n "}, {"sha": "f0ab9fc22a19c43cf19b69d852785c45079a49d7", "filename": "gcc/testsuite/g++.dg/cpp0x/variadic123.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic123.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26b89b7bf848562e68d03d8ad668c3775542ca4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic123.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic123.C?ref=c26b89b7bf848562e68d03d8ad668c3775542ca4", "patch": "@@ -0,0 +1,14 @@\n+// PR c++/52824\n+// { dg-do compile { target c++11 } }\n+\n+template<typename G, typename H>\n+struct foo\n+{};\n+\n+template<typename... G>\n+struct bar : foo<G...>\n+{};\n+\n+int main() {\n+  bar<int, float> f;\n+}"}]}