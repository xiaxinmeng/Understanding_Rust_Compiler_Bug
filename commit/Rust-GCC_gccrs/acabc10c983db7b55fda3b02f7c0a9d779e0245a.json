{"sha": "acabc10c983db7b55fda3b02f7c0a9d779e0245a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWNhYmMxMGM5ODNkYjdiNTVmZGEzYjAyZjdjMGE5ZDc3OWUwMjQ1YQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-24T04:02:33Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-24T04:02:33Z"}, "message": "Don't crash on type switch of untyped value.\n\nFrom-SVN: r170456", "tree": {"sha": "a06dfdf29bca59b52c07f8c4453bdce775ac7fcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a06dfdf29bca59b52c07f8c4453bdce775ac7fcb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/acabc10c983db7b55fda3b02f7c0a9d779e0245a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acabc10c983db7b55fda3b02f7c0a9d779e0245a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acabc10c983db7b55fda3b02f7c0a9d779e0245a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acabc10c983db7b55fda3b02f7c0a9d779e0245a/comments", "author": null, "committer": null, "parents": [{"sha": "6540ddba79e0f4286e5f8899691d9c29677222a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6540ddba79e0f4286e5f8899691d9c29677222a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6540ddba79e0f4286e5f8899691d9c29677222a0"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "c87574dff1c940adbe146d2f8a5dda22ca1c9c20", "filename": "gcc/go/gofrontend/statements.cc", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acabc10c983db7b55fda3b02f7c0a9d779e0245a/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acabc10c983db7b55fda3b02f7c0a9d779e0245a/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.cc?ref=acabc10c983db7b55fda3b02f7c0a9d779e0245a", "patch": "@@ -3911,7 +3911,11 @@ Type_switch_statement::do_lower(Gogo*, Block* enclosing)\n       if (val_type->is_nil_type())\n \trhs = Expression::make_nil(loc);\n       else\n-\trhs = Expression::make_type_descriptor(val_type, loc);\n+\t{\n+\t  if (val_type->is_abstract())\n+\t    val_type = val_type->make_non_abstract_type();\n+\t  rhs = Expression::make_type_descriptor(val_type, loc);\n+\t}\n       Statement* s = Statement::make_assignment(lhs, rhs, loc);\n       b->add_statement(s);\n     }"}]}