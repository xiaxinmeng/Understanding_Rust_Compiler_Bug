{"sha": "684d6ee140af6585c18c8790f8f5bddfcc6bd153", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njg0ZDZlZTE0MGFmNjU4NWMxOGM4NzkwZjhmNWJkZGZjYzZiZDE1Mw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-07-30T19:58:09Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-07-30T19:58:09Z"}, "message": "libstdc++: Make COW string use allocator_traits for nested types\n\nWhen compiled as C++20 the COW std::string fails due to assuming that\nthe allocator always defines size_type and difference_type. That has\nbeen incorrect since C++11, but we got away with it for specializations\nusing std::allocator until those members were removed in C++20.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/basic_string.h (size_type, difference_type):\n\tUse allocator_traits to obtain the allocator's size_type and\n\tdifference_type.", "tree": {"sha": "5ad38b724f2a24627474544eed30a5f536313637", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ad38b724f2a24627474544eed30a5f536313637"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/684d6ee140af6585c18c8790f8f5bddfcc6bd153", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/684d6ee140af6585c18c8790f8f5bddfcc6bd153", "html_url": "https://github.com/Rust-GCC/gccrs/commit/684d6ee140af6585c18c8790f8f5bddfcc6bd153", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/684d6ee140af6585c18c8790f8f5bddfcc6bd153/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e513e9aa53121e628e0403438a5bb3861a50c198", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e513e9aa53121e628e0403438a5bb3861a50c198", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e513e9aa53121e628e0403438a5bb3861a50c198"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "52cecdd7ca1eedfb00e5413882fdd369468a78e3", "filename": "libstdc++-v3/include/bits/basic_string.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/684d6ee140af6585c18c8790f8f5bddfcc6bd153/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/684d6ee140af6585c18c8790f8f5bddfcc6bd153/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h?ref=684d6ee140af6585c18c8790f8f5bddfcc6bd153", "patch": "@@ -3147,8 +3147,8 @@ _GLIBCXX_END_NAMESPACE_CXX11\n       typedef _Traits\t\t\t\t\t    traits_type;\n       typedef typename _Traits::char_type\t\t    value_type;\n       typedef _Alloc\t\t\t\t\t    allocator_type;\n-      typedef typename _CharT_alloc_type::size_type\t    size_type;\n-      typedef typename _CharT_alloc_type::difference_type   difference_type;\n+      typedef typename _CharT_alloc_traits::size_type\t    size_type;\n+      typedef typename _CharT_alloc_traits::difference_type difference_type;\n #if __cplusplus < 201103L\n       typedef typename _CharT_alloc_type::reference\t    reference;\n       typedef typename _CharT_alloc_type::const_reference   const_reference;"}]}