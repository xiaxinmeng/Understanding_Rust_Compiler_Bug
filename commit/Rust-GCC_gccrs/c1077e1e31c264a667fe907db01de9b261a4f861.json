{"sha": "c1077e1e31c264a667fe907db01de9b261a4f861", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzEwNzdlMWUzMWMyNjRhNjY3ZmU5MDdkYjAxZGU5YjI2MWE0Zjg2MQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-03-24T13:44:56Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-03-24T13:44:56Z"}, "message": "config.gcc (mips64vr-*-elf*, [...]): Remove tm_defines.\n\n\t* config.gcc (mips64vr-*-elf*, mips64vrel-*-elf*): Remove tm_defines.\n\t* config/mips/vr.h (DEFAULT_VR_ARCH): New macro, defined to vr4130.\n\t(MULTILIB_DEFAULTS): Use it.\n\t(MIPS_CPU_STRING_DEFAULT): Remove.\n\t(MIPS_ABI_DEFAULT, MIPS_MARCH_CONTROLS_SOFT_FLOAT): Define.\n\t(DRIVER_SELF_SPECS): Make -mfix-vr4122-bugs imply -march=vr4120.  Make\n\tEABI64 -mlong32 the default ABI.  Enforce the default architecture.\n\t* config/mips/t-vr (MULTILIB_OPTIONS): Add mfix-vr4122-bugs,\n\tmarch=vr4130, march=vr4300 and march=vr5000.\n\t(MULTILIB_MATCHES): Use -mfix-vr4122-bugs multilibs for -march=vr4120.\n\t(MULTILIB_EXCEPTIONS): Change choice of multilibs.  Update comments\n\taccordingly.\n\nFrom-SVN: r79915", "tree": {"sha": "d99b94fba92ef502e69d3f21c5d50ad0addb4042", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d99b94fba92ef502e69d3f21c5d50ad0addb4042"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1077e1e31c264a667fe907db01de9b261a4f861", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1077e1e31c264a667fe907db01de9b261a4f861", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1077e1e31c264a667fe907db01de9b261a4f861", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1077e1e31c264a667fe907db01de9b261a4f861/comments", "author": null, "committer": null, "parents": [{"sha": "c235ddf27585e26c1e86bfec25e72bfef0debba0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c235ddf27585e26c1e86bfec25e72bfef0debba0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c235ddf27585e26c1e86bfec25e72bfef0debba0"}], "stats": {"total": 119, "additions": 97, "deletions": 22}, "files": [{"sha": "4ac91fe2bc56fbf57a2c73e80df0feac6bd781ad", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1077e1e31c264a667fe907db01de9b261a4f861/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1077e1e31c264a667fe907db01de9b261a4f861/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c1077e1e31c264a667fe907db01de9b261a4f861", "patch": "@@ -1,3 +1,18 @@\n+2004-03-24  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config.gcc (mips64vr-*-elf*, mips64vrel-*-elf*): Remove tm_defines.\n+\t* config/mips/vr.h (DEFAULT_VR_ARCH): New macro, defined to vr4130.\n+\t(MULTILIB_DEFAULTS): Use it.\n+\t(MIPS_CPU_STRING_DEFAULT): Remove.\n+\t(MIPS_ABI_DEFAULT, MIPS_MARCH_CONTROLS_SOFT_FLOAT): Define.\n+\t(DRIVER_SELF_SPECS): Make -mfix-vr4122-bugs imply -march=vr4120.  Make\n+\tEABI64 -mlong32 the default ABI.  Enforce the default architecture.\n+\t* config/mips/t-vr (MULTILIB_OPTIONS): Add mfix-vr4122-bugs,\n+\tmarch=vr4130, march=vr4300 and march=vr5000.\n+\t(MULTILIB_MATCHES): Use -mfix-vr4122-bugs multilibs for -march=vr4120.\n+\t(MULTILIB_EXCEPTIONS): Change choice of multilibs.  Update comments\n+\taccordingly.\n+\n 2004-03-24  DJ Delorie  <dj@redhat.com>\n \t    Richard Sandiford  <rsandifo@redhat.com>\n "}, {"sha": "e342641fc9badc52df70638f1a1aa7bc0a41e6dc", "filename": "gcc/config/mips/t-vr", "status": "modified", "additions": 58, "deletions": 15, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1077e1e31c264a667fe907db01de9b261a4f861/gcc%2Fconfig%2Fmips%2Ft-vr", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1077e1e31c264a667fe907db01de9b261a4f861/gcc%2Fconfig%2Fmips%2Ft-vr", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-vr?ref=c1077e1e31c264a667fe907db01de9b261a4f861", "patch": "@@ -22,47 +22,90 @@ $(T)crtn.o: $(srcdir)/config/mips/crtn.asm $(GCC_PASSES)\n \n # END boiler-plate\n \n+# Main multilibs\n+# --------------\n+#\n # Endianness: EB or EL\n #\n # ABIs: mabi=32\n #\tmabi=o64\n #\tmabi=eabi\n-#\tmeabi=eabi/mlong32\n+#\tmabi=eabi/mlong32\n #\tmabi=eabi/mgp32\n #\tmabi=eabi/mgp32/mlong64\n #\n-# Architecture: march=vr5400\n-#\t\tmarch=vr4100\n-#\t\tmarch=vr4100/mips16\n+# Architecture: march=vr4120 with -mfix-vr4122-bugs\n+#\t\tmarch=vr4130 (default)\n+#\t\tmarch=vr5000\n+#\t\tmarch=vr5400\n+#\t\tmarch=vr5500\n+#\n+# Total: 2 * 6 * 5 = 60 multilibs.\n+#\n+#\n+# Extra vr4300 multilibs\n+# ----------------------\n+#\n+# Endianness: EB or EL\n+#\n+# ABI: o64\n+#\n+# Architecture: vr4300.\n+#\n+# Total: 2 * 1 * 2 = 2 multilibs.\n #\n-# Total: 2 * 6 * 3 = 36 multilibs.\n+#\n+# Extra MIPS16 multilibs\n+# ----------------------\n+#\n+# Endianness: EB or EL\n+#\n+# ABIs: mabi=o64\n+#\tmabi=eabi/mlong32\n+#\tmabi=eabi/mgp32\n+#\n+# Architecture: march=vr4120 with -mfix-vr4122-bugs\n+#\t\tmarch=vr4130 (default)\n+#\n+# Total: 2 * 3 * 2 = 12 multilibs.\n MULTILIB_OPTIONS =\t\t\t\\\n \tEL/EB\t\t\t\t\\\n \tmabi=32/mabi=o64/mabi=eabi\t\\\n \tmgp32\t\t\t\t\\\n \tmlong64\t\t\t\t\\\n \tmips16\t\t\t\t\\\n-\tmarch=vr5400/march=vr4100\n+\tmfix-vr4122-bugs/march=vr4130/march=vr4300/march=vr5000/march=vr5400/march=vr5500\n \n MULTILIB_DIRNAMES =\t\\\n \tel eb\t\t\\\n \to32 o64 eabi\t\\\n \tgp32\t\t\\\n \tlong64\t\t\\\n \tmips16\t\t\\\n-\tvr5400 vr4100\n+\tvr4120 vr4130 vr4300 vr5000 vr5400 vr5500\n \n-MULTILIB_MATCHES = EL=mel EB=meb\n+MULTILIB_MATCHES = EL=mel EB=meb mfix-vr4122-bugs=march?vr4120\n \n-# Assume a 4000-series is the default: we'd need a *mips16 entry if\n-# the default processor didn't support mips16.  Also assume o64,\n-# which means we need to extend the o64 exceptions to combinations\n-# without a -mabi flag.\n+# Assume a 41xx-series is the default: we'd need a *mips16 entry if\n+# the default processor didn't support mips16.  Also assume the\n+# default ABI is EABI64 -mlong32.\n MULTILIB_EXCEPTIONS =\t\t\t\t\\\n \t*mabi=32/mlong64*\t\t\t\\\n \t*mabi=32/mgp32*\t\t\t\t\\\n \t*mabi=o64/mgp32*\t\t\t\\\n \t*mabi=o64/mlong64*\t\t\t\\\n-\tmgp32* E[LB]/mgp32*\t\t\t\\\n-\tmlong64* E[LB]/mlong64*\t\t\t\\\n-\t*mips16/march=vr5*\n+\t*mips16/march=vr5*\t\t\t\\\n+\t*mips16/march=vr4300\t\t\t\\\n+\t$(MIPS16_EXCEPTIONS)\t\t\t\\\n+\t$(VR4300_EXCEPTIONS)\n+\n+MIPS16_EXCEPTIONS =\t\t\t\t\\\n+\t*mabi=32*mips16*\t\t\t\\\n+\t*mlong64*mips16*\n+\n+VR4300_EXCEPTIONS =\t\t\t\t\\\n+\t*mabi=32*march=vr4300\t\t\t\\\n+\t*mgp32*march=vr4300\t\t\t\\\n+\t*mlong64*march=vr4300\t\t\t\\\n+\tmarch=vr4300\t\t\t\t\\\n+\tE[LB]/march=vr4300"}, {"sha": "cbc73671c9eec0163ef6fd3bfcbe8b9f9af6cb45", "filename": "gcc/config/mips/vr.h", "status": "modified", "additions": 24, "deletions": 7, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1077e1e31c264a667fe907db01de9b261a4f861/gcc%2Fconfig%2Fmips%2Fvr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1077e1e31c264a667fe907db01de9b261a4f861/gcc%2Fconfig%2Fmips%2Fvr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fvr.h?ref=c1077e1e31c264a667fe907db01de9b261a4f861", "patch": "@@ -19,13 +19,30 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING.  If not, write to\n the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n-#define MIPS_CPU_STRING_DEFAULT \"vr4100\"\n+#define DEFAULT_VR_ARCH \"vr4130\"\n+#define MIPS_ABI_DEFAULT ABI_EABI\n+#define MIPS_MARCH_CONTROLS_SOFT_FLOAT 1\n #define MULTILIB_DEFAULTS \\\n-\t{ MULTILIB_ENDIAN_DEFAULT, MULTILIB_ABI_DEFAULT, \"march=vr4100\" }\n+\t{ MULTILIB_ENDIAN_DEFAULT,\t\t\\\n+\t  MULTILIB_ABI_DEFAULT,\t\t\t\\\n+\t  \"march=\" DEFAULT_VR_ARCH }\n \n-/* Make sure that -mlong64 always appears on the command line when\n-   64-bit longs are needed.  Also make sure that -mgp32 doesn't appear\n-   if it is redundant.  */\n #define DRIVER_SELF_SPECS \\\n-\t\"%{mabi=eabi:%{!mlong*:%{!mgp32:-mlong64}}}\", \\\n-\t\"%{mabi=32:%<mgp32}\"\n+\t/* Make -mfix-vr4122-bugs imply -march=vr4120.  This cuts down\t\\\n+\t   on command-line tautology and makes it easier for t-vr to\t\\\n+\t   provide a -mfix-vr4122-bugs multilib.  */\t\t\t\\\n+\t\"%{mfix-vr4122-bugs:%{!march=*:-march=vr4120}}\",\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+\t/* Make -mabi=eabi -mlong32 the default.  */\t\t\t\\\n+\t\"%{!mabi=*:-mabi=eabi %{!mlong*:-mlong32}}\",\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+\t/* Make sure -mlong64 multilibs are chosen when\t64-bit longs\t\\\n+\t   are needed.  */\t\t\t\t\t\t\\\n+\t\"%{mabi=eabi:%{!mlong*:%{!mgp32:-mlong64}}}\",\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+\t/* Remove -mgp32 if it is redundant.  */\t\t\t\\\n+\t\"%{mabi=32:%<mgp32}\",\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+\t/* Enforce the default architecture.  This is mostly for\t\\\n+\t   the assembler's benefit.  */\t\t\t\t\t\\\n+\t\"%{!march=*:-march=\" DEFAULT_VR_ARCH \"}\""}]}