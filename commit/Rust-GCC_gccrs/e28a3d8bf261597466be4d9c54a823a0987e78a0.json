{"sha": "e28a3d8bf261597466be4d9c54a823a0987e78a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTI4YTNkOGJmMjYxNTk3NDY2YmU0ZDljNTRhODIzYTA5ODdlNzhhMA==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-11-08T14:58:57Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-11-08T14:58:57Z"}, "message": "Fix Solaris/x86 libitm build\n\n\t* configure.tgt: Handle i386 like i[456]86.\n\t* config/generic/tls.h [!HAVE_ARCH_GTM_THREAD] (gtm_thr): Don't\n\ttake address.\n\t* config/generic/tls.cc [!HAVE_ARCH_GTM_THREAD ||\n\t!HAVE_ARCH_GTM_THREAD_DISP] (_gtm_thr_tls): New variable.\n\nFrom-SVN: r181163", "tree": {"sha": "38aea815839b6631ca1ae2c86e06be82652369da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38aea815839b6631ca1ae2c86e06be82652369da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e28a3d8bf261597466be4d9c54a823a0987e78a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e28a3d8bf261597466be4d9c54a823a0987e78a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e28a3d8bf261597466be4d9c54a823a0987e78a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e28a3d8bf261597466be4d9c54a823a0987e78a0/comments", "author": null, "committer": null, "parents": [{"sha": "dbe175248f4329c0f50d49ca860afc0ae3d7c0e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbe175248f4329c0f50d49ca860afc0ae3d7c0e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbe175248f4329c0f50d49ca860afc0ae3d7c0e6"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "c6421113c86f2a8bd8bd740f1e3a6f3645ee05d7", "filename": "libitm/config/generic/tls.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e28a3d8bf261597466be4d9c54a823a0987e78a0/libitm%2Fconfig%2Fgeneric%2Ftls.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e28a3d8bf261597466be4d9c54a823a0987e78a0/libitm%2Fconfig%2Fgeneric%2Ftls.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Fgeneric%2Ftls.cc?ref=e28a3d8bf261597466be4d9c54a823a0987e78a0", "patch": "@@ -26,6 +26,10 @@\n \n namespace GTM HIDDEN {\n \n+#if !defined(HAVE_ARCH_GTM_THREAD) || !defined(HAVE_ARCH_GTM_THREAD_DISP)\n+__thread gtm_thread_tls _gtm_thr_tls;\n+#endif\n+\n // Filter out any updates that overlap the libitm stack, as defined by\n // TOP (entry point to library) and BOT (below current function).  This\n // definition should be fine for all stack-grows-down architectures."}, {"sha": "6bbdccf2be17782d87837aecf0dc7d284a8b291d", "filename": "libitm/config/generic/tls.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e28a3d8bf261597466be4d9c54a823a0987e78a0/libitm%2Fconfig%2Fgeneric%2Ftls.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e28a3d8bf261597466be4d9c54a823a0987e78a0/libitm%2Fconfig%2Fgeneric%2Ftls.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Fgeneric%2Ftls.h?ref=e28a3d8bf261597466be4d9c54a823a0987e78a0", "patch": "@@ -49,7 +49,7 @@ extern __thread gtm_thread_tls _gtm_thr_tls;\n #ifndef HAVE_ARCH_GTM_THREAD\n // If the target does not provide optimized access to the thread-local\n // data, simply access the TLS variable defined above.\n-static inline gtm_thread *gtm_thr() { return &_gtm_thr_tls.thr; }\n+static inline gtm_thread *gtm_thr() { return _gtm_thr_tls.thr; }\n static inline void set_gtm_thr(gtm_thread *x) { _gtm_thr_tls.thr = x; }\n #endif\n "}, {"sha": "7d9b7f6c398326c24fff328ae68c24e4fa56c009", "filename": "libitm/configure.tgt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e28a3d8bf261597466be4d9c54a823a0987e78a0/libitm%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e28a3d8bf261597466be4d9c54a823a0987e78a0/libitm%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfigure.tgt?ref=e28a3d8bf261597466be4d9c54a823a0987e78a0", "patch": "@@ -52,7 +52,7 @@ case \"${target_cpu}\" in\n   powerpc*)\tARCH=powerpc ;;\n   s390*)\tARCH=s390 ;;\n \n-  i[456]86)\n+  i[3456]86)\n \tcase \" ${CC} ${CFLAGS} \" in\n \t  *\" -m64 \"*)\n \t    ;;"}]}