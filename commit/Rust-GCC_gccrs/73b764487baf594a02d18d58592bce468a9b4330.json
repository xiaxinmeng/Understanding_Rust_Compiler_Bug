{"sha": "73b764487baf594a02d18d58592bce468a9b4330", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNiNzY0NDg3YmFmNTk0YTAyZDE4ZDU4NTkyYmNlNDY4YTliNDMzMA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-07-14T10:50:48Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-07-14T10:50:48Z"}, "message": "(init_reg_sets): Invoke INIT_ONCE_REG_SET.\n\n(allocate_reg_info): Invoke MAX_REGNO_REG_SET.\n(regset_release_memory): Free basic_block_live_at_start storage.\n\nFrom-SVN: r14424", "tree": {"sha": "77565e1f3364d43945e4b20bde06dcc3ecaa4b1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77565e1f3364d43945e4b20bde06dcc3ecaa4b1b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73b764487baf594a02d18d58592bce468a9b4330", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73b764487baf594a02d18d58592bce468a9b4330", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73b764487baf594a02d18d58592bce468a9b4330", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73b764487baf594a02d18d58592bce468a9b4330/comments", "author": null, "committer": null, "parents": [{"sha": "a1493f9fb4aa7b24d143c8c2d8f6df34c75c5e97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1493f9fb4aa7b24d143c8c2d8f6df34c75c5e97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1493f9fb4aa7b24d143c8c2d8f6df34c75c5e97"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "f3bdc7ff997e364c8fde33929f8d8799a5204e41", "filename": "gcc/regclass.c", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73b764487baf594a02d18d58592bce468a9b4330/gcc%2Fregclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73b764487baf594a02d18d58592bce468a9b4330/gcc%2Fregclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregclass.c?ref=73b764487baf594a02d18d58592bce468a9b4330", "patch": "@@ -1,5 +1,5 @@\n /* Compute register class preferences for pseudo-registers.\n-   Copyright (C) 1987, 88, 91, 92, 93, 94, 96, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1987, 88, 91-96, 1997 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -346,6 +346,9 @@ init_reg_sets ()\n \n \tmay_move_cost[i][j] = cost;\n       }\n+\n+  /* Do any additional initialization regsets may need */\n+  INIT_ONCE_REG_SET ();\n }\n \n /* After switches have been processed, which perhaps alter\n@@ -1729,6 +1732,9 @@ allocate_reg_info (num_regs, new_p, renumber_p)\n   if (renumber_p)\n     reg_renumber = renumber;\n \n+  /* Tell the regset code about the new number of registers */\n+  MAX_REGNO_REG_SET (num_regs, new_p, renumber_p);\n+\n   regno_max = num_regs;\n }\n \n@@ -1943,3 +1949,17 @@ reg_classes_intersect_p (c1, c2)\n   return 0;\n }\n \n+/* Release any memory allocated by register sets.  */\n+\n+void\n+regset_release_memory ()\n+{\n+  if (basic_block_live_at_start)\n+    {\n+      free_regset_vector (basic_block_live_at_start, n_basic_blocks);\n+      basic_block_live_at_start = 0;\n+    }\n+\n+  FREE_REG_SET (regs_live_at_setjmp);\n+  bitmap_release_memory ();\n+}"}]}