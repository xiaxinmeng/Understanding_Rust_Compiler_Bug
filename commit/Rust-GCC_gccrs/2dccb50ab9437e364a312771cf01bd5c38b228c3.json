{"sha": "2dccb50ab9437e364a312771cf01bd5c38b228c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRjY2I1MGFiOTQzN2UzNjRhMzEyNzcxY2YwMWJkNWMzOGIyMjhjMw==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1995-04-18T06:35:02Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1995-04-18T06:35:02Z"}, "message": "ASM_OUTPUT_EXTERNAL revisited\n\nFrom-SVN: r9404", "tree": {"sha": "f687d6ca6ee8e639fde6b93e7e20b3aa52012f5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f687d6ca6ee8e639fde6b93e7e20b3aa52012f5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2dccb50ab9437e364a312771cf01bd5c38b228c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dccb50ab9437e364a312771cf01bd5c38b228c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2dccb50ab9437e364a312771cf01bd5c38b228c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dccb50ab9437e364a312771cf01bd5c38b228c3/comments", "author": null, "committer": null, "parents": [{"sha": "b13b05f6abdd70d9614501171640bf1c26615ddc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b13b05f6abdd70d9614501171640bf1c26615ddc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b13b05f6abdd70d9614501171640bf1c26615ddc"}], "stats": {"total": 37, "additions": 26, "deletions": 11}, "files": [{"sha": "5d0dce74b764eeaa50f93eaaa087b915f6ba1efa", "filename": "gcc/config/rs6000/aix3newas.h", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dccb50ab9437e364a312771cf01bd5c38b228c3/gcc%2Fconfig%2Frs6000%2Faix3newas.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dccb50ab9437e364a312771cf01bd5c38b228c3/gcc%2Fconfig%2Frs6000%2Faix3newas.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix3newas.h?ref=2dccb50ab9437e364a312771cf01bd5c38b228c3", "patch": "@@ -22,10 +22,6 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #include \"rs6000/rs6000.h\"\n \n-#if 0\n-/* Commented out because it breaks compiler bootstrapping because references\n-   to environ get hosed */\n-\n /* Tell the assembler to assume that all undefined names are external.  */\n \n #undef ASM_SPEC\n@@ -36,4 +32,16 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #undef ASM_OUTPUT_EXTERNAL\n #undef ASM_OUTPUT_EXTERNAL_LIBCALL\n-#endif\n+#define ASM_OUTPUT_EXTERNAL(FILE, DECL, NAME)\t\\\n+{ rtx _symref = XEXP (DECL_RTL (DECL), 0);\t\\\n+  if ((TREE_CODE (DECL) == VAR_DECL\t\t\\\n+       || TREE_CODE (DECL) == FUNCTION_DECL)\t\\\n+      && (NAME)[0] != '*'\t\t\t\\\n+      && (NAME)[strlen (NAME) - 1] != ']')\t\\\n+    {\t\t\t\t\t\t\\\n+      char *_name = (char *) permalloc (strlen (XSTR (_symref, 0)) + 5); \\\n+      strcpy (_name, XSTR (_symref, 0));\t\\\n+      strcat (_name, TREE_CODE (DECL) == FUNCTION_DECL ? \"[DS]\" : \"[RW]\"); \\\n+      XSTR (_symref, 0) = _name;\t\t\\\n+    }\t\t\t\t\t\t\\\n+}"}, {"sha": "7860acb1ce836faca7cbbe52d387718673f8c342", "filename": "gcc/config/rs6000/aix41.h", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dccb50ab9437e364a312771cf01bd5c38b228c3/gcc%2Fconfig%2Frs6000%2Faix41.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dccb50ab9437e364a312771cf01bd5c38b228c3/gcc%2Fconfig%2Frs6000%2Faix41.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faix41.h?ref=2dccb50ab9437e364a312771cf01bd5c38b228c3", "patch": "@@ -22,10 +22,6 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #include \"rs6000/rs6000.h\"\n \n-#if 0\n-/* Commented out because it breaks compiler bootstrapping because references\n-   to environ get hosed */\n-\n #undef ASM_SPEC\n #define ASM_SPEC \"-u -mpwr\"\n \n@@ -34,8 +30,19 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #undef ASM_OUTPUT_EXTERNAL\n #undef ASM_OUTPUT_EXTERNAL_LIBCALL\n-#endif\n-#endif\n+#define ASM_OUTPUT_EXTERNAL(FILE, DECL, NAME)\t\\\n+{ rtx _symref = XEXP (DECL_RTL (DECL), 0);\t\\\n+  if ((TREE_CODE (DECL) == VAR_DECL\t\t\\\n+       || TREE_CODE (DECL) == FUNCTION_DECL)\t\\\n+      && (NAME)[0] != '*'\t\t\t\\\n+      && (NAME)[strlen (NAME) - 1] != ']')\t\\\n+    {\t\t\t\t\t\t\\\n+      char *_name = (char *) permalloc (strlen (XSTR (_symref, 0)) + 5); \\\n+      strcpy (_name, XSTR (_symref, 0));\t\\\n+      strcat (_name, TREE_CODE (DECL) == FUNCTION_DECL ? \"[DS]\" : \"[RW]\"); \\\n+      XSTR (_symref, 0) = _name;\t\t\\\n+    }\t\t\t\t\t\t\\\n+}\n \n #undef LINK_SPEC\n #define LINK_SPEC \"-bpT:0x10000000 -bpD:0x20000000 %{!r:-btextro} -bnodelcsect\\"}]}