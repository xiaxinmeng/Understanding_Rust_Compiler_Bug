{"sha": "5b01bfeb8703c264ad402b77741f06f41d7fceac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIwMWJmZWI4NzAzYzI2NGFkNDAyYjc3NzQxZjA2ZjQxZDdmY2VhYw==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2021-08-26T12:31:50Z"}, "committer": {"name": "liuhongt", "email": "hongtao.liu@intel.com", "date": "2021-09-13T11:55:29Z"}, "message": "x86: Add TARGET_AVX256_[MOVE|STORE]_BY_PIECES\n\n1. Add TARGET_AVX256_MOVE_BY_PIECES to perform move by-pieces operation\nwith 256-bit AVX instructions.\n2. Add TARGET_AVX256_STORE_BY_PIECES to perform move and store by-pieces\noperations with 256-bit AVX instructions.\n\nThey are enabled only for Intel Alder Lake and Intel processors with\nAVX512.\n\ngcc/\n\n\tPR target/101935\n\t* config/i386/i386.h (TARGET_AVX256_MOVE_BY_PIECES): New.\n\t(TARGET_AVX256_STORE_BY_PIECES): Likewise.\n\t(MOVE_MAX): Check TARGET_AVX256_MOVE_BY_PIECES and\n\tTARGET_AVX256_STORE_BY_PIECES instead of\n\tTARGET_AVX256_SPLIT_UNALIGNED_LOAD and\n\tTARGET_AVX256_SPLIT_UNALIGNED_STORE.\n\t(STORE_MAX_PIECES): Check TARGET_AVX256_STORE_BY_PIECES instead\n\tof TARGET_AVX256_SPLIT_UNALIGNED_STORE.\n\t* config/i386/x86-tune.def (X86_TUNE_AVX256_MOVE_BY_PIECES): New.\n\t(X86_TUNE_AVX256_STORE_BY_PIECES): Likewise.\n\ngcc/testsuite/\n\n\tPR target/101935\n\t* g++.target/i386/pr80566-1.C: Add\n\t-mtune-ctrl=avx256_store_by_pieces.\n\t* gcc.target/i386/pr100865-4a.c: Likewise.\n\t* gcc.target/i386/pr100865-10a.c: Likewise.\n\t* gcc.target/i386/pr90773-20.c: Likewise.\n\t* gcc.target/i386/pr90773-21.c: Likewise.\n\t* gcc.target/i386/pr90773-22.c: Likewise.\n\t* gcc.target/i386/pr90773-23.c: Likewise.\n\t* g++.target/i386/pr80566-2.C: Add\n\t-mtune-ctrl=avx256_move_by_pieces.\n\t* gcc.target/i386/eh_return-1.c: Likewise.\n\t* gcc.target/i386/pr90773-26.c: Likewise.\n\t* gcc.target/i386/pieces-memcpy-12.c: Replace -mtune=haswell\n\twith -mtune-ctrl=avx256_move_by_pieces.\n\t* gcc.target/i386/pieces-memcpy-15.c: Likewise.\n\t* gcc.target/i386/pieces-memset-2.c: Replace -mtune=haswell\n\twith -mtune-ctrl=avx256_store_by_pieces.\n\t* gcc.target/i386/pieces-memset-5.c: Likewise.\n\t* gcc.target/i386/pieces-memset-11.c: Likewise.\n\t* gcc.target/i386/pieces-memset-14.c: Likewise.\n\t* gcc.target/i386/pieces-memset-20.c: Likewise.\n\t* gcc.target/i386/pieces-memset-23.c: Likewise.\n\t* gcc.target/i386/pieces-memset-29.c: Likewise.\n\t* gcc.target/i386/pieces-memset-30.c: Likewise.\n\t* gcc.target/i386/pieces-memset-33.c: Likewise.\n\t* gcc.target/i386/pieces-memset-34.c: Likewise.\n\t* gcc.target/i386/pieces-memset-44.c: Likewise.\n\t* gcc.target/i386/pieces-memset-37.c: Replace -mtune=generic\n\twith -mtune-ctrl=avx256_store_by_pieces.", "tree": {"sha": "d883af0149614d24c7c7aa237291f8153c91b8bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d883af0149614d24c7c7aa237291f8153c91b8bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b01bfeb8703c264ad402b77741f06f41d7fceac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b01bfeb8703c264ad402b77741f06f41d7fceac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b01bfeb8703c264ad402b77741f06f41d7fceac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b01bfeb8703c264ad402b77741f06f41d7fceac/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": {"login": "algebra84", "id": 22926165, "node_id": "MDQ6VXNlcjIyOTI2MTY1", "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algebra84", "html_url": "https://github.com/algebra84", "followers_url": "https://api.github.com/users/algebra84/followers", "following_url": "https://api.github.com/users/algebra84/following{/other_user}", "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}", "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions", "organizations_url": "https://api.github.com/users/algebra84/orgs", "repos_url": "https://api.github.com/users/algebra84/repos", "events_url": "https://api.github.com/users/algebra84/events{/privacy}", "received_events_url": "https://api.github.com/users/algebra84/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8e4cb8adf68730357888adf186ab2e686a220ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8e4cb8adf68730357888adf186ab2e686a220ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8e4cb8adf68730357888adf186ab2e686a220ad"}], "stats": {"total": 69, "additions": 42, "deletions": 27}, "files": [{"sha": "e76bb55c080d078e2a5334597a106b4331698e92", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -403,6 +403,10 @@ extern unsigned char ix86_tune_features[X86_TUNE_LAST];\n \tix86_tune_features[X86_TUNE_AVOID_LEA_FOR_ADDR]\n #define TARGET_SOFTWARE_PREFETCHING_BENEFICIAL \\\n \tix86_tune_features[X86_TUNE_SOFTWARE_PREFETCHING_BENEFICIAL]\n+#define TARGET_AVX256_MOVE_BY_PIECES \\\n+\tix86_tune_features[X86_TUNE_AVX256_MOVE_BY_PIECES]\n+#define TARGET_AVX256_STORE_BY_PIECES \\\n+\tix86_tune_features[X86_TUNE_AVX256_STORE_BY_PIECES]\n #define TARGET_AVX256_SPLIT_REGS \\\n \tix86_tune_features[X86_TUNE_AVX256_SPLIT_REGS]\n #define TARGET_GENERAL_REGS_SSE_SPILL \\\n@@ -1793,8 +1797,8 @@ typedef struct ix86_args {\n    ? 64 \\\n    : ((TARGET_AVX \\\n        && !TARGET_PREFER_AVX128 \\\n-       && !TARGET_AVX256_SPLIT_UNALIGNED_LOAD \\\n-       && !TARGET_AVX256_SPLIT_UNALIGNED_STORE) \\\n+       && (TARGET_AVX256_MOVE_BY_PIECES \\\n+\t   || TARGET_AVX256_STORE_BY_PIECES)) \\\n       ? 32 \\\n       : ((TARGET_SSE2 \\\n \t  && TARGET_SSE_UNALIGNED_LOAD_OPTIMAL \\\n@@ -1811,7 +1815,7 @@ typedef struct ix86_args {\n       ? 64 \\\n       : ((TARGET_AVX \\\n \t  && !TARGET_PREFER_AVX128 \\\n-\t  && !TARGET_AVX256_SPLIT_UNALIGNED_STORE) \\\n+\t  && TARGET_AVX256_STORE_BY_PIECES) \\\n \t  ? 32 \\\n \t  : ((TARGET_SSE2 \\\n \t      && TARGET_SSE_UNALIGNED_STORE_OPTIMAL) \\"}, {"sha": "2f221b1f8c9b8674dc17e67a91747e55fe59118e", "filename": "gcc/config/i386/x86-tune.def", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Fconfig%2Fi386%2Fx86-tune.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Fconfig%2Fi386%2Fx86-tune.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fx86-tune.def?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -484,6 +484,17 @@ DEF_TUNE (X86_TUNE_AVX128_OPTIMAL, \"avx128_optimal\", m_BDVER | m_BTVER2\n    instructions in the auto-vectorizer.  */\n DEF_TUNE (X86_TUNE_AVX256_OPTIMAL, \"avx256_optimal\", m_CORE_AVX512)\n \n+/* X86_TUNE_AVX256_MOVE_BY_PIECES: Optimize move_by_pieces with 256-bit\n+   AVX instructions.  */\n+DEF_TUNE (X86_TUNE_AVX256_MOVE_BY_PIECES, \"avx256_move_by_pieces\",\n+\t  m_ALDERLAKE | m_CORE_AVX512)\n+\n+/* X86_TUNE_AVX256_STORE_BY_PIECES: Optimize store_by_pieces with 256-bit\n+   AVX instructions.  */\n+DEF_TUNE (X86_TUNE_AVX256_STORE_BY_PIECES, \"avx256_store_by_pieces\",\n+\t  m_ALDERLAKE | m_CORE_AVX512)\n+\n+/*****************************************************************************/\n /*****************************************************************************/\n /* Historical relics: tuning flags that helps a specific old CPU designs     */\n /*****************************************************************************/"}, {"sha": "29da31d6bb62381db3196ea2f3ea228da04109ab", "filename": "gcc/testsuite/g++.target/i386/pr80566-1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fg%2B%2B.target%2Fi386%2Fpr80566-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fg%2B%2B.target%2Fi386%2Fpr80566-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.target%2Fi386%2Fpr80566-1.C?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-options \"-O2 -march=haswell\" }\n+// { dg-options \"-O2 -march=haswell -mtune-ctrl=avx256_store_by_pieces\" }\n \n #include <cstring>\n "}, {"sha": "9ffd2c8cadb83e0b32df83779516c4acaabd8d2e", "filename": "gcc/testsuite/g++.target/i386/pr80566-2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fg%2B%2B.target%2Fi386%2Fpr80566-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fg%2B%2B.target%2Fi386%2Fpr80566-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.target%2Fi386%2Fpr80566-2.C?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-options \"-O2 -march=haswell\" }\n+// { dg-options \"-O2 -march=haswell -mtune-ctrl=avx256_move_by_pieces\" }\n \n #include <cstring>\n "}, {"sha": "b21fd75fc93d96bba6d9c4df4c4667ae22b1ab8e", "filename": "gcc/testsuite/gcc.target/i386/eh_return-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Feh_return-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Feh_return-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Feh_return-1.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -march=haswell -mno-avx512f\" } */\n+/* { dg-options \"-O2 -march=haswell -mno-avx512f -mtune-ctrl=avx256_move_by_pieces\" } */\n \n struct _Unwind_Context\n {"}, {"sha": "8a82baff5f1ef913abba6200c192d4709454066a", "filename": "gcc/testsuite/gcc.target/i386/pieces-memcpy-12.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memcpy-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memcpy-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memcpy-12.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_move_by_pieces\" } */\n \n extern char *dst, *src;\n "}, {"sha": "4fb94ce7bd57e8618f387ae3c8b0856d5aa4b41e", "filename": "gcc/testsuite/gcc.target/i386/pieces-memcpy-15.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memcpy-15.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memcpy-15.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memcpy-15.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_move_by_pieces\" } */\n \n extern char *dst, *src;\n "}, {"sha": "3802eb7c14727199b70381e87c3ed5167c5ad94f", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-11.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-11.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "10bc085f83b39e5b88a096d1c0ac995192cdd6d1", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-14.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-14.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-14.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-14.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "4ebfc4df090ad4aea92f5f233818d92b9fb813a1", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-2.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "1dc4db180d307698122b07456cdb5e7c331a7629", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-20.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-20.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-20.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-20.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "9232864024e5c5dc3d421f1d00c43d1cf68cc020", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-23.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-23.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-23.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-23.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "3b07a64e3f632353d94cfb8770d6abe734c94d99", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-29.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-29.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-29.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-29.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "59595e6d3c4069b88c8391ddec628f8c114f5375", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-30.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-30.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-30.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-30.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx512f -mavx2 -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx512f -mavx2 -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "68646223b0edd1623fa1b75167f97df8e2a37b57", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-33.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-33.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-33.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-33.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "52a16a0292d1c7b4f446cb06031647a7e95731be", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-34.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-34.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-34.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-34.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx512f -mavx2 -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx512f -mavx2 -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "fd09bd153ce38f457c58e12360bbc28649b8847e", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-37.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-37.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-37.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-37.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx512f -mavx2 -mtune=generic\" } */\n+/* { dg-options \"-O2 -mno-avx512f -mavx2 -mtune-ctrl=avx256_store_by_pieces\" } */\n \n void\n foo (int a1, int a2, int a3, int a4, int a5, int a6, int x, char *dst)"}, {"sha": "5986f8e8b2392ba83165cd53dbb589a462f86d19", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-44.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-44.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-44.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-44.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "e2379df71aafbc46a52ee99dfb20eee06d617068", "filename": "gcc/testsuite/gcc.target/i386/pieces-memset-5.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpieces-memset-5.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mno-avx2 -mavx -mtune=haswell\" } */\n+/* { dg-options \"-O2 -mno-avx2 -mavx -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "1d849a381c05de8df0aee2bd601dd8b975ad2c00", "filename": "gcc/testsuite/gcc.target/i386/pr100865-10a.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr100865-10a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr100865-10a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr100865-10a.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile { target int128 } } */\n-/* { dg-options \"-O3 -march=skylake\" } */\n+/* { dg-options \"-O3 -march=skylake -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern __int128 array[16];\n "}, {"sha": "8609d1128b8dd6178253e576dfe18f7e198bf76b", "filename": "gcc/testsuite/gcc.target/i386/pr100865-4a.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr100865-4a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr100865-4a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr100865-4a.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -march=skylake\" } */\n+/* { dg-options \"-O2 -march=skylake -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char array[64];\n "}, {"sha": "884a5502b5925653b1dfc963fc313f7cde13ad5e", "filename": "gcc/testsuite/gcc.target/i386/pr90773-20.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-20.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-20.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-20.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -march=skylake\" } */\n+/* { dg-options \"-O2 -march=skylake -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "5bbb387a3ea692d2a39fde843c3a61180753011f", "filename": "gcc/testsuite/gcc.target/i386/pr90773-21.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-21.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-21.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-21.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -march=skylake\" } */\n+/* { dg-options \"-O2 -march=skylake -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "245a436b7eb1e518510e99882b647a0627b28b9d", "filename": "gcc/testsuite/gcc.target/i386/pr90773-22.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-22.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-22.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-22.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -march=skylake\" } */\n+/* { dg-options \"-O2 -march=skylake -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "ca4a86f30b854adf69a92294a0f50e645a351e31", "filename": "gcc/testsuite/gcc.target/i386/pr90773-23.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-23.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-23.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-23.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -march=skylake\" } */\n+/* { dg-options \"-O2 -march=skylake -mtune-ctrl=avx256_store_by_pieces\" } */\n \n extern char *dst;\n "}, {"sha": "76fb79f2e2031f182846c6b9622ff8251a364286", "filename": "gcc/testsuite/gcc.target/i386/pr90773-26.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-26.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b01bfeb8703c264ad402b77741f06f41d7fceac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-26.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr90773-26.c?ref=5b01bfeb8703c264ad402b77741f06f41d7fceac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -march=skylake\" } */\n+/* { dg-options \"-O2 -march=skylake -mtune-ctrl=avx256_move_by_pieces\" } */\n \n struct S\n {"}]}