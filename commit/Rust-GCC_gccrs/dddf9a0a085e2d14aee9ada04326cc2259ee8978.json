{"sha": "dddf9a0a085e2d14aee9ada04326cc2259ee8978", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGRkZjlhMGEwODVlMmQxNGFlZTlhZGEwNDMyNmNjMjI1OWVlODk3OA==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-10-16T21:13:11Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-10-16T21:13:11Z"}, "message": "re PR c++/23959 (-Wswitch-default reports missing default in a template that has one)\n\n2005-10-16  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR c++/23959\n        * decl.c (pop_switch): Only call c_do_switch_warnings\n        when not processing templates.\n\n2005-10-16  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR c++/23959\n        * g++.dg/warn/Wswitch-default-1.C: New test.\n        * g++.dg/warn/Wswitch-default-2.C: New test.\n\nFrom-SVN: r105466", "tree": {"sha": "fcf84681133a792ef1ab8dad9656bc93e33a864d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fcf84681133a792ef1ab8dad9656bc93e33a864d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dddf9a0a085e2d14aee9ada04326cc2259ee8978", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dddf9a0a085e2d14aee9ada04326cc2259ee8978", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dddf9a0a085e2d14aee9ada04326cc2259ee8978", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dddf9a0a085e2d14aee9ada04326cc2259ee8978/comments", "author": null, "committer": null, "parents": [{"sha": "5bf8b82d52a4192b4db5e38eade75108bc9da1a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bf8b82d52a4192b4db5e38eade75108bc9da1a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bf8b82d52a4192b4db5e38eade75108bc9da1a9"}], "stats": {"total": 62, "additions": 59, "deletions": 3}, "files": [{"sha": "022cad3a127bd63387dd406aad1be357b9616444", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=dddf9a0a085e2d14aee9ada04326cc2259ee8978", "patch": "@@ -1,3 +1,9 @@\n+2005-10-16  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR c++/23959\n+\t* decl.c (pop_switch): Only call c_do_switch_warnings\n+\twhen not processing templates.\n+\n 2005-10-16  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/22173"}, {"sha": "eafebc188b32d6aa5ea0b398c7905f6881455ce2", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=dddf9a0a085e2d14aee9ada04326cc2259ee8978", "patch": "@@ -2415,9 +2415,10 @@ pop_switch (void)\n     switch_location = EXPR_LOCATION (cs->switch_stmt);\n   else\n     switch_location = input_location;\n-  c_do_switch_warnings (cs->cases, switch_location,\n-\t\t\tSWITCH_STMT_TYPE (cs->switch_stmt),\n-\t\t\tSWITCH_STMT_COND (cs->switch_stmt));\n+  if (!processing_template_decl)\n+    c_do_switch_warnings (cs->cases, switch_location,\n+\t\t\t  SWITCH_STMT_TYPE (cs->switch_stmt),\n+\t\t\t  SWITCH_STMT_COND (cs->switch_stmt));\n \n   splay_tree_delete (cs->cases);\n   switch_stack = switch_stack->next;"}, {"sha": "034df7890921c36fc5413bff62a627a07efc11fd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dddf9a0a085e2d14aee9ada04326cc2259ee8978", "patch": "@@ -1,3 +1,9 @@\n+2005-10-16  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR c++/23959\n+\t* g++.dg/warn/Wswitch-default-1.C: New test.\n+\t* g++.dg/warn/Wswitch-default-2.C: New test.\n+\n 2005-10-16  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/22173"}, {"sha": "2236ae531e28eaa1eaa72d743e336e44ae490258", "filename": "gcc/testsuite/g++.dg/warn/Wswitch-default-1.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWswitch-default-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWswitch-default-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWswitch-default-1.C?ref=dddf9a0a085e2d14aee9ada04326cc2259ee8978", "patch": "@@ -0,0 +1,22 @@\n+// PR C++/21123\n+/* { dg-do compile } */\n+/* { dg-options \"-Wswitch-default\" } */\n+\n+\n+template <typename ArrayType>\n+void foo( )\n+{\n+    int i = 0;\n+\n+  switch ( i ) /* { dg-bogus \"switch missing default case\" } */\n+  {\n+  case 9:\n+  default:\n+  break;\n+  }\n+}\n+\n+void f()\n+{\n+  foo<int>();\n+}"}, {"sha": "832f867e07999a9a63fa7a127165bd7817731e3f", "filename": "gcc/testsuite/g++.dg/warn/Wswitch-default-2.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWswitch-default-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dddf9a0a085e2d14aee9ada04326cc2259ee8978/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWswitch-default-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWswitch-default-2.C?ref=dddf9a0a085e2d14aee9ada04326cc2259ee8978", "patch": "@@ -0,0 +1,21 @@\n+// PR C++/21123\n+/* { dg-do compile } */\n+/* { dg-options \"-Wswitch-default\" } */\n+\n+\n+template <typename ArrayType>\n+void foo( )\n+{\n+    int i = 0;\n+\n+  switch ( i ) /* { dg-warning \"switch missing default case\" } */\n+  {\n+  case 9:\n+  break;\n+  }\n+} \n+\n+void f()\n+{\n+  foo<int>();\n+} "}]}