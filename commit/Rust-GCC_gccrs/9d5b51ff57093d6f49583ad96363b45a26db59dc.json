{"sha": "9d5b51ff57093d6f49583ad96363b45a26db59dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ1YjUxZmY1NzA5M2Q2ZjQ5NTgzYWQ5NjM2M2I0NWEyNmRiNTlkYw==", "commit": {"author": {"name": "Andrew Haley", "email": "aph@redhat.com", "date": "2007-01-11T13:54:49Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2007-01-11T13:54:49Z"}, "message": "2007-01-11  Andrew Haley  <aph@redhat.com>\n\n        * prims.cc (jdwpOptions) Fix deprecated cast from char[] constant\n        to char*.\n        * include/x86_64-signal.h (HANDLE_DIVIDE_OVERFLOW): Rewrite to fix\n        aliasing violation.\n\nFrom-SVN: r120672", "tree": {"sha": "5fc380aa4ccb171608a6812ecebb5e079cf0f3f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5fc380aa4ccb171608a6812ecebb5e079cf0f3f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d5b51ff57093d6f49583ad96363b45a26db59dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d5b51ff57093d6f49583ad96363b45a26db59dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d5b51ff57093d6f49583ad96363b45a26db59dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d5b51ff57093d6f49583ad96363b45a26db59dc/comments", "author": {"login": "theRealAph", "id": 254637, "node_id": "MDQ6VXNlcjI1NDYzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/254637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theRealAph", "html_url": "https://github.com/theRealAph", "followers_url": "https://api.github.com/users/theRealAph/followers", "following_url": "https://api.github.com/users/theRealAph/following{/other_user}", "gists_url": "https://api.github.com/users/theRealAph/gists{/gist_id}", "starred_url": "https://api.github.com/users/theRealAph/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theRealAph/subscriptions", "organizations_url": "https://api.github.com/users/theRealAph/orgs", "repos_url": "https://api.github.com/users/theRealAph/repos", "events_url": "https://api.github.com/users/theRealAph/events{/privacy}", "received_events_url": "https://api.github.com/users/theRealAph/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e69bf64be925b71e9ba7e6ab13787b672f359ff4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e69bf64be925b71e9ba7e6ab13787b672f359ff4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e69bf64be925b71e9ba7e6ab13787b672f359ff4"}], "stats": {"total": 27, "additions": 18, "deletions": 9}, "files": [{"sha": "23ec9f58c930479f78c975e09a9f754a9bc5171d", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d5b51ff57093d6f49583ad96363b45a26db59dc/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d5b51ff57093d6f49583ad96363b45a26db59dc/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9d5b51ff57093d6f49583ad96363b45a26db59dc", "patch": "@@ -1,3 +1,10 @@\n+2007-01-11  Andrew Haley  <aph@redhat.com>\n+\n+\t* prims.cc (jdwpOptions) Fix deprecated cast from char[] constant\n+\tto char*.\n+\t* include/x86_64-signal.h (HANDLE_DIVIDE_OVERFLOW): Rewrite to fix\n+\taliasing violation.\n+\n 2007-01-10  Tom Tromey  <tromey@redhat.com>\n \n \t* gnu/gcj/xlib/*.h: New files."}, {"sha": "ede92a482f4938544d3ee6747ce5d2f6258e07f7", "filename": "libjava/include/x86_64-signal.h", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d5b51ff57093d6f49583ad96363b45a26db59dc/libjava%2Finclude%2Fx86_64-signal.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d5b51ff57093d6f49583ad96363b45a26db59dc/libjava%2Finclude%2Fx86_64-signal.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fx86_64-signal.h?ref=9d5b51ff57093d6f49583ad96363b45a26db59dc", "patch": "@@ -29,9 +29,8 @@ static void _Jv_##_name (int, siginfo_t *,\t\t\t\\\n do\t\t\t\t\t\t\t\t\t\\\n {\t\t\t\t\t\t\t\t\t\\\n   struct ucontext *_uc = (struct ucontext *)_p;\t\t\t\t\\\n-  volatile struct sigcontext *_sc = (struct sigcontext *) &_uc->uc_mcontext; \\\n-\t\t\t\t\t\t\t\t\t\\\n-  register unsigned char *_rip = (unsigned char *)_sc->rip;\t\t\\\n+  gregset_t &_gregs = _uc->uc_mcontext.gregs;\t\t\t\t\\\n+  unsigned char *_rip = (unsigned char *)_gregs[REG_RIP];\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n   /* According to the JVM spec, \"if the dividend is the negative\t\\\n    * integer of largest possible magnitude for the type and the\t\t\\\n@@ -64,15 +63,17 @@ do\t\t\t\t\t\t\t\t\t\\\n       if (((_modrm >> 3) & 7) == 7)\t\t\t\t\t\\\n \t{\t\t\t\t\t\t\t\t\\\n \t  if (_is_64_bit)\t\t\t\t\t\t\\\n-\t    _min_value_dividend = (_sc->rax == 0x8000000000000000L);\t\\\n+\t    _min_value_dividend =\t\t\t\t\t\\\n+\t      _gregs[REG_RAX] == (greg_t)0x8000000000000000UL;\t\t\\\n \t  else\t\t\t\t\t\t\t\t\\\n-\t    _min_value_dividend = ((_sc->rax & 0xffffffff) == 0x80000000); \\\n+\t    _min_value_dividend =\t\t\t\t\t\\\n+\t      (_gregs[REG_RAX] & 0xffffffff) == (greg_t)0x80000000UL;\t\\\n \t}\t\t\t\t\t\t\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n       if (_min_value_dividend)\t\t\t\t\t\t\\\n \t{\t\t\t\t\t\t\t\t\\\n \t  unsigned char _rm = _modrm & 7;\t\t\t\t\\\n-\t  _sc->rdx = 0; /* the remainder is zero */\t\t\t\\\n+\t  _gregs[REG_RDX] = 0; /* the remainder is zero */\t\t\\\n \t  switch (_modrm >> 6)\t\t\t\t\t\t\\\n \t    {\t\t\t\t\t\t\t\t\\\n \t    case 0:  /* register indirect */\t\t\t\t\\\n@@ -95,7 +96,7 @@ do\t\t\t\t\t\t\t\t\t\\\n \t      break;\t\t\t\t\t\t\t\\\n \t    }\t\t\t\t\t\t\t\t\\\n \t  _rip += 2;\t\t\t\t\t\t\t\\\n-\t  _sc->rip = (unsigned long)_rip;\t\t\t\t\\\n+\t  _gregs[REG_RIP] = (greg_t)_rip;\t\t\t\t\\\n \t  return;\t\t\t\t\t\t\t\\\n \t}\t\t\t\t\t\t\t\t\\\n     }\t\t\t\t\t\t\t\t\t\\"}, {"sha": "00d547017f46ae35466c715261ec49dc7eea6393", "filename": "libjava/prims.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d5b51ff57093d6f49583ad96363b45a26db59dc/libjava%2Fprims.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d5b51ff57093d6f49583ad96363b45a26db59dc/libjava%2Fprims.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fprims.cc?ref=9d5b51ff57093d6f49583ad96363b45a26db59dc", "patch": "@@ -87,7 +87,7 @@ static java::lang::OutOfMemoryError *no_memory;\n // Number of bytes in largest array object we create.  This could be\n // increased to the largest size_t value, so long as the appropriate\n // functions are changed to take a size_t argument instead of jint.\n-#define MAX_OBJECT_SIZE ((1<<31) - 1)\n+#define MAX_OBJECT_SIZE (((size_t)1<<31) - 1)\n \n // Properties set at compile time.\n const char **_Jv_Compiler_Properties = NULL;\n@@ -104,7 +104,8 @@ int _Jv_argc;\n \n // Debugging options\n static bool remoteDebug = false;\n-static char *jdwpOptions = \"\";\n+static char defaultJdwpOptions[] = \"\";\n+static char *jdwpOptions = defaultJdwpOptions;\n \n // Argument support.\n int"}]}