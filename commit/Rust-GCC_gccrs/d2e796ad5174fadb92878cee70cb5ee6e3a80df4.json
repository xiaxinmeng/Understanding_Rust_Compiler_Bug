{"sha": "d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDJlNzk2YWQ1MTc0ZmFkYjkyODc4Y2VlNzBjYjVlZTZlM2E4MGRmNA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-18T11:30:32Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-18T11:30:32Z"}, "message": "re PR preprocessor/7263 (__extension__ keyword doesn't suppress warning on LL or ULL constants)\n\n2008-08-18  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\tPR cpp/7263\n\t* c-opts.c (cpp_opts): Remove static.\n\t* c-parser.c (cpp_opts): Declare it extern.\n\t(disable_extension_diagnostics): Handle cpp options.\n\t(enable_extension_diagnostics): Likewise.\ntestsuite/\n\t* gcc.dg/cpp/pr7263-2.c: New.\n\t* gcc.dg/cpp/pr7263-2.h: New.\n\t* gcc.dg/cpp/pr7263-3.c: New.\n\t* gcc.dg/cpp/pr7263-3.h: New.\n\nFrom-SVN: r139194", "tree": {"sha": "a1b6b4f8b23e426f282ef94475efeba20d3aac5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a1b6b4f8b23e426f282ef94475efeba20d3aac5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/comments", "author": null, "committer": null, "parents": [{"sha": "cbe5f3b371c07c282d48d135cc5041092e1de28d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbe5f3b371c07c282d48d135cc5041092e1de28d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbe5f3b371c07c282d48d135cc5041092e1de28d"}], "stats": {"total": 91, "additions": 85, "deletions": 6}, "files": [{"sha": "747e45b061673983903aefd693efb91468f55446", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -1,3 +1,11 @@\n+2008-08-18  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR cpp/7263\n+\t* c-opts.c (cpp_opts): Remove static.\n+\t* c-parser.c (cpp_opts): Declare it extern.\n+\t(disable_extension_diagnostics): Handle cpp options.\n+\t(enable_extension_diagnostics): Likewise.\n+\n 2008-08-18  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n \t* diagnostics.c (permerror_at): Rename as permerror."}, {"sha": "dccb45ef26874f93bee5df50d1148afd9da61c2f", "filename": "gcc/c-opts.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -54,7 +54,7 @@ along with GCC; see the file COPYING3.  If not see\n #endif\n \n /* CPP's options.  */\n-static cpp_options *cpp_opts;\n+cpp_options *cpp_opts;\n \n /* Input filename.  */\n static const char *this_input_filename;"}, {"sha": "ccec66021076611640df7cc3a8034562db749f3e", "filename": "gcc/c-parser.c", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parser.c?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -805,6 +805,9 @@ c_parser_skip_to_end_of_block_or_statement (c_parser *parser)\n   parser->error = false;\n }\n \n+/* CPP's options (initialized by c-opts.c).  */\n+extern cpp_options *cpp_opts;\n+\n /* Save the warning flags which are controlled by __extension__.  */\n \n static inline int\n@@ -813,11 +816,15 @@ disable_extension_diagnostics (void)\n   int ret = (pedantic\n \t     | (warn_pointer_arith << 1)\n \t     | (warn_traditional << 2)\n-\t     | (flag_iso << 3));\n-  pedantic = 0;\n+\t     | (flag_iso << 3)\n+\t     | (warn_long_long << 4)\n+\t     | (cpp_opts->warn_long_long << 5));\n+  cpp_opts->pedantic = pedantic = 0;\n   warn_pointer_arith = 0;\n-  warn_traditional = 0;\n+  cpp_opts->warn_traditional = warn_traditional = 0;\n   flag_iso = 0;\n+  warn_long_long = 0;\n+  cpp_opts->warn_long_long = 0;\n   return ret;\n }\n \n@@ -827,10 +834,12 @@ disable_extension_diagnostics (void)\n static inline void\n restore_extension_diagnostics (int flags)\n {\n-  pedantic = flags & 1;\n+  cpp_opts->pedantic = pedantic = flags & 1;\n   warn_pointer_arith = (flags >> 1) & 1;\n-  warn_traditional = (flags >> 2) & 1;\n+  cpp_opts->warn_traditional = warn_traditional = (flags >> 2) & 1;\n   flag_iso = (flags >> 3) & 1;\n+  warn_long_long = (flags >> 4) & 1;\n+  cpp_opts->warn_long_long = (flags >> 5) & 1;\n }\n \n /* Possibly kinds of declarator to parse.  */"}, {"sha": "ff5dcd968b5af68fcb04c2009acebb2de0418df5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -1,3 +1,11 @@\n+2008-08-18  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR cpp/7263\n+\t* gcc.dg/cpp/pr7263-2.c: New.\n+\t* gcc.dg/cpp/pr7263-2.h: New.\n+\t* gcc.dg/cpp/pr7263-3.c: New.\n+\t* gcc.dg/cpp/pr7263-3.h: New.\n+\n 2008-08-18  Robert Dewar  <dewar@adacore.com>\n \n \tPR ada/30827"}, {"sha": "5ed10d0202a0292d7ae7301a82e89f1946fd443e", "filename": "gcc/testsuite/gcc.dg/cpp/pr7263-2.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-2.c?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -0,0 +1,28 @@\n+/* PR 7263:  __extension__ keyword doesn't suppress warning on LL or ULL constants.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=c89 -pedantic-errors\" } */\n+#include \"pr7263-2.h\"\n+unsigned long long /* { dg-error \"ISO C90 does not support .long long.\" } */\n+bar ()\n+{\n+  return BIG_EXT;\n+}\n+\n+unsigned long long /* { dg-error \"ISO C90 does not support .long long.\" } */\n+bar2 ()\n+{\n+  return 0x1b27da572ef3cd86ULL; /* { dg-error \"use of C99 long long integer constant\" } */\n+}\n+\n+\n+unsigned long long /* { dg-error \"ISO C90 does not support .long long.\" } */\n+bar3 ()\n+{\n+  return __extension__ (0x1b27da572ef3cd86ULL);\n+}\n+\n+__extension__ unsigned long long \n+bar4 ()\n+{\n+  return BIG; \n+}"}, {"sha": "54f1757c5e7b472ba748a18c758de15c88e8c44e", "filename": "gcc/testsuite/gcc.dg/cpp/pr7263-2.h", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-2.h?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -0,0 +1,4 @@\n+#define BIG_EXT  __extension__(0x1b27da572ef3cd86ULL)\n+\n+#define BIG  0x1b27da572ef3cd86ULL\n+"}, {"sha": "efa619ad3cd392487d1db5a7495647e8a20093ba", "filename": "gcc/testsuite/gcc.dg/cpp/pr7263-3.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-3.c?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -0,0 +1,19 @@\n+/* PR 7263:  __extension__ keyword doesn't suppress warning on LL or ULL constants.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=c99 -pedantic-errors\" } */\n+#include \"pr7263-3.h\"\n+__complex__  bar () /* { dg-error \"ISO C does not support plain .complex. meaning .double complex.\" } */\n+{\n+  return _Complex_I_ext;\n+}\n+\n+__extension__ __complex__ \n+bar2 ()\n+{\n+  return _Complex_I;\n+}\n+\n+__complex__ bar3 () /* { dg-error \"ISO C does not support plain .complex. meaning .double complex.\" } */\n+{\n+  return _Complex_I; /* { dg-error \"imaginary constants are a GCC extension\" } */\n+}"}, {"sha": "ad6690e2b8654eede0fecf4fe9b2097354d2a634", "filename": "gcc/testsuite/gcc.dg/cpp/pr7263-3.h", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-3.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2e796ad5174fadb92878cee70cb5ee6e3a80df4/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-3.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr7263-3.h?ref=d2e796ad5174fadb92878cee70cb5ee6e3a80df4", "patch": "@@ -0,0 +1,3 @@\n+#define _Complex_I_ext      (__extension__ 1.0iF)\n+\n+#define _Complex_I      (1.0iF)"}]}