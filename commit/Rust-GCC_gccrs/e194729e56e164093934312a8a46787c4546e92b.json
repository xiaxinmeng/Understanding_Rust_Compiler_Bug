{"sha": "e194729e56e164093934312a8a46787c4546e92b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTE5NDcyOWU1NmUxNjQwOTM5MzQzMTJhOGE0Njc4N2M0NTQ2ZTkyYg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-06-11T09:18:49Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-06-11T09:18:49Z"}, "message": "[Ada] Minor tweaks for Repinfo\n\n2018-06-11  Eric Botcazou  <ebotcazou@adacore.com>\n\ngcc/ada/\n\n\t* gnat1drv.adb: Remove use clause for Repinfo.\n\t(Gnat1drv): Beef up comment about the interplay between -gnatc and\n\tback-end annotations.  Use full qualified name for List_Rep_Info.\n\nFrom-SVN: r261420", "tree": {"sha": "0078b464d5ec9afb5fa6b2fe80b67aa65044e03c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0078b464d5ec9afb5fa6b2fe80b67aa65044e03c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e194729e56e164093934312a8a46787c4546e92b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e194729e56e164093934312a8a46787c4546e92b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e194729e56e164093934312a8a46787c4546e92b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e194729e56e164093934312a8a46787c4546e92b/comments", "author": null, "committer": null, "parents": [{"sha": "24d124a42aefdb882f393f6c2211d9c9c3914c70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24d124a42aefdb882f393f6c2211d9c9c3914c70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24d124a42aefdb882f393f6c2211d9c9c3914c70"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "f6902cfca718d7de91615a45d4388cf6fe4a6c72", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e194729e56e164093934312a8a46787c4546e92b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e194729e56e164093934312a8a46787c4546e92b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=e194729e56e164093934312a8a46787c4546e92b", "patch": "@@ -1,3 +1,9 @@\n+2018-06-11  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat1drv.adb: Remove use clause for Repinfo.\n+\t(Gnat1drv): Beef up comment about the interplay between -gnatc and\n+\tback-end annotations.  Use full qualified name for List_Rep_Info.\n+\n 2018-06-11  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* libgnat/g-arrspl.ads: Add pragma Preelaborate."}, {"sha": "95780624a86743ddde3a3447fa42d09464e70898", "filename": "gcc/ada/gnat1drv.adb", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e194729e56e164093934312a8a46787c4546e92b/gcc%2Fada%2Fgnat1drv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e194729e56e164093934312a8a46787c4546e92b/gcc%2Fada%2Fgnat1drv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat1drv.adb?ref=e194729e56e164093934312a8a46787c4546e92b", "patch": "@@ -50,7 +50,7 @@ with Osint.C;   use Osint.C;\n with Output;    use Output;\n with Par_SCO;\n with Prepcomp;\n-with Repinfo;   use Repinfo;\n+with Repinfo;\n with Restrict;\n with Rident;    use Rident;\n with Rtsfind;\n@@ -1442,7 +1442,9 @@ begin\n          Exit_Program (Ecode);\n       end if;\n \n-      --  In -gnatc mode, we only do annotation if -gnatt or -gnatR is also set\n+      --  In -gnatc mode we only do annotation if -gnatt or -gnatR is also set,\n+      --  or if -gnatwz is enabled (default setting) and there is an unchecked\n+      --  conversion that involves a type whose size is not statically known,\n       --  as indicated by Back_Annotate_Rep_Info being set to True.\n \n       --  We don't call for annotations on a subunit, because to process those\n@@ -1558,7 +1560,7 @@ begin\n \n       Errout.Finalize (Last_Call => True);\n       Errout.Output_Messages;\n-      List_Rep_Info (Ttypes.Bytes_Big_Endian);\n+      Repinfo.List_Rep_Info (Ttypes.Bytes_Big_Endian);\n       Inline.List_Inlining_Info;\n \n       --  Only write the library if the backend did not generate any error"}]}