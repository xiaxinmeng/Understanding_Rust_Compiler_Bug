{"sha": "01a2ccd010c3587d7db5d54e2c8d5b880415b414", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDFhMmNjZDAxMGMzNTg3ZDdkYjVkNTRlMmM4ZDViODgwNDE1YjQxNA==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2002-01-25T17:52:43Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2002-01-25T17:52:43Z"}, "message": "rs6000.md (prefetch): Make address V4SI mode so that the address is restricted to legitimate form for...\n\n        * rs6000.md (prefetch): Make address V4SI mode so that the address\n        is restricted to legitimate form for instruction.\n\nFrom-SVN: r49217", "tree": {"sha": "ddeec00db06f6bee078faac5a28fedefdb0d5618", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ddeec00db06f6bee078faac5a28fedefdb0d5618"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01a2ccd010c3587d7db5d54e2c8d5b880415b414", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01a2ccd010c3587d7db5d54e2c8d5b880415b414", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01a2ccd010c3587d7db5d54e2c8d5b880415b414", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01a2ccd010c3587d7db5d54e2c8d5b880415b414/comments", "author": null, "committer": null, "parents": [{"sha": "2fb4e07f24a248effea30f2fd56173d56d612088", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fb4e07f24a248effea30f2fd56173d56d612088", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fb4e07f24a248effea30f2fd56173d56d612088"}], "stats": {"total": 40, "additions": 11, "deletions": 29}, "files": [{"sha": "02c75c3947bdacd8d6b8b91fa93ce35f83c4e595", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01a2ccd010c3587d7db5d54e2c8d5b880415b414/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01a2ccd010c3587d7db5d54e2c8d5b880415b414/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=01a2ccd010c3587d7db5d54e2c8d5b880415b414", "patch": "@@ -1,3 +1,8 @@\n+2002-01-25  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* rs6000.md (prefetch): Make address V4SI mode so that the address\n+\tis restricted to legitimate form for instruction.\n+\n 2002-01-25  Bob Wilson  <bob.wilson@acm.org>\n \n \t* doc/install.texi (xtensa-*-elf): New target."}, {"sha": "c1a716d0440c54fc0a35418b956e3e40051b1b35", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 6, "deletions": 29, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01a2ccd010c3587d7db5d54e2c8d5b880415b414/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01a2ccd010c3587d7db5d54e2c8d5b880415b414/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=01a2ccd010c3587d7db5d54e2c8d5b880415b414", "patch": "@@ -13854,39 +13854,16 @@\n   DONE;\n }\")\n \n-(define_expand \"prefetch\"\n-  [(prefetch (match_operand 0 \"address_operand\" \"p\")\n-\t     (match_operand 1 \"const_int_operand\" \"n\")\n-\t     (match_operand 2 \"const_int_operand\" \"n\"))]\n-  \"TARGET_POWERPC\"\n-  \"\n-{\n-  if (TARGET_32BIT)\n-    emit_insn (gen_prefetchsi (operands[0], operands[1], operands[2]));\n-  else\n-    emit_insn (gen_prefetchdi (operands[0], operands[1], operands[2]));\n-  DONE;\n-}\")\n-\n-(define_insn \"prefetchsi\"\n-  [(prefetch (match_operand:SI 0 \"address_operand\" \"r\")\n+(define_insn \"prefetch\"\n+  [(prefetch (match_operand:V4SI 0 \"address_operand\" \"p\")\n \t     (match_operand:SI 1 \"const_int_operand\" \"n\")\n \t     (match_operand:SI 2 \"const_int_operand\" \"n\"))]\n-  \"TARGET_POWERPC && TARGET_32BIT\"\n-  \"*\n-{\n-  return INTVAL (operands[1]) ? \\\"dcbtst 0,%0\\\" : \\\"dcbt 0,%0\\\";\n-}\"\n-  [(set_attr \"type\" \"load\")])\n-\n-(define_insn \"prefetchdi\"\n-  [(prefetch (match_operand:DI 0 \"address_operand\" \"r\")\n-\t     (match_operand:DI 1 \"const_int_operand\" \"n\")\n-\t     (match_operand:DI 2 \"const_int_operand\" \"n\"))]\n-  \"TARGET_POWERPC && TARGET_64BIT\"\n+  \"TARGET_POWERPC\"\n   \"*\n {\n-  return INTVAL (operands[1]) ? \\\"dcbtst 0,%0\\\" : \\\"dcbt 0,%0\\\";\n+  if (GET_CODE (operands[0]) == REG)\n+    return INTVAL (operands[1]) ? \\\"dcbtst 0,%0\\\" : \\\"dcbt 0,%0\\\";\n+  return INTVAL (operands[1]) ? \\\"dcbtst %a0\\\" : \\\"dcbt %a0\\\";\n }\"\n   [(set_attr \"type\" \"load\")])\n \f"}]}