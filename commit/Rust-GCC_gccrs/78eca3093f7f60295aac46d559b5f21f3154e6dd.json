{"sha": "78eca3093f7f60295aac46d559b5f21f3154e6dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzhlY2EzMDkzZjdmNjAyOTVhYWM0NmQ1NTliNWYyMWYzMTU0ZTZkZA==", "commit": {"author": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2017-05-17T20:54:39Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2017-05-17T20:54:39Z"}, "message": "unwind-arm.h: Make _Unwind_GetIP...\n\n2017-05-17  Andreas Tobler  <andreast@gcc.gnu.org>\n\n    * config/arm/unwind-arm.h: Make _Unwind_GetIP, _Unwind_GetIPInfo and\n    _Unwind_SetIP available as functions for arm*-*-freebsd*.\n    * config/arm/unwind-arm.c: Implement the above.\n\nFrom-SVN: r248173", "tree": {"sha": "19ec67ede49fae8efe614e4e6b681e52df5a3ac1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19ec67ede49fae8efe614e4e6b681e52df5a3ac1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/78eca3093f7f60295aac46d559b5f21f3154e6dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78eca3093f7f60295aac46d559b5f21f3154e6dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78eca3093f7f60295aac46d559b5f21f3154e6dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78eca3093f7f60295aac46d559b5f21f3154e6dd/comments", "author": null, "committer": null, "parents": [{"sha": "0152001bc817eede5b0efbe8499cf92d99a57700", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0152001bc817eede5b0efbe8499cf92d99a57700", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0152001bc817eede5b0efbe8499cf92d99a57700"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "1d05cef858c0f6a698c8c97c58507f9c873ca88a", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78eca3093f7f60295aac46d559b5f21f3154e6dd/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78eca3093f7f60295aac46d559b5f21f3154e6dd/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=78eca3093f7f60295aac46d559b5f21f3154e6dd", "patch": "@@ -1,3 +1,9 @@\n+2017-05-17  Andreas Tobler  <andreast@gcc.gnu.org>\n+\n+\t* config/arm/unwind-arm.h: Make _Unwind_GetIP, _Unwind_GetIPInfo and\n+\t_Unwind_SetIP available as functions for arm*-*-freebsd*.\n+\t* config/arm/unwind-arm.c: Implement the above.\n+\n 2017-05-15  Adhemerval Zanella  <adhemerval.zanella@linaro.org>\n \n \t* config/sparc/lb1spc.S [__ELF__ && __linux__]: Emit .note.GNU-stack"}, {"sha": "c6bfe130b20d93bc5f3f7467d1df0766606d47c8", "filename": "libgcc/config/arm/unwind-arm.c", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78eca3093f7f60295aac46d559b5f21f3154e6dd/libgcc%2Fconfig%2Farm%2Funwind-arm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78eca3093f7f60295aac46d559b5f21f3154e6dd/libgcc%2Fconfig%2Farm%2Funwind-arm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farm%2Funwind-arm.c?ref=78eca3093f7f60295aac46d559b5f21f3154e6dd", "patch": "@@ -509,3 +509,25 @@ __aeabi_unwind_cpp_pr2 (_Unwind_State state,\n {\n   return __gnu_unwind_pr_common (state, ucbp, context, 2);\n }\n+\n+#ifdef __FreeBSD__\n+/* FreeBSD expects these to be functions */\n+inline _Unwind_Ptr\n+_Unwind_GetIP (struct _Unwind_Context *context)\n+{\n+  return _Unwind_GetGR (context, 15) & ~(_Unwind_Word)1;\n+}\n+\n+inline _Unwind_Ptr\n+_Unwind_GetIPInfo (struct _Unwind_Context *context, int *ip_before_insn)\n+{\n+  *ip_before_insn = 0;\n+  return _Unwind_GetIP (context);\n+}\n+\n+inline void\n+_Unwind_SetIP (struct _Unwind_Context *context, _Unwind_Ptr val)\n+{\n+  _Unwind_SetGR (context, 15, val | (_Unwind_GetGR (context, 15) & 1));\n+}\n+#endif"}, {"sha": "037be34cb1764ffd0dbe1474f326fdc2748bc05c", "filename": "libgcc/config/arm/unwind-arm.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78eca3093f7f60295aac46d559b5f21f3154e6dd/libgcc%2Fconfig%2Farm%2Funwind-arm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78eca3093f7f60295aac46d559b5f21f3154e6dd/libgcc%2Fconfig%2Farm%2Funwind-arm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farm%2Funwind-arm.h?ref=78eca3093f7f60295aac46d559b5f21f3154e6dd", "patch": "@@ -72,12 +72,19 @@ extern \"C\" {\n     {\n       return _URC_FAILURE;\n     }\n+#ifndef __FreeBSD__\n   /* Return the address of the instruction, not the actual IP value.  */\n #define _Unwind_GetIP(context) \\\n   (_Unwind_GetGR (context, 15) & ~(_Unwind_Word)1)\n \n #define _Unwind_SetIP(context, val) \\\n   _Unwind_SetGR (context, 15, val | (_Unwind_GetGR (context, 15) & 1))\n+#else\n+  #undef _Unwind_GetIPInfo\n+  _Unwind_Ptr _Unwind_GetIP (struct _Unwind_Context *);\n+  _Unwind_Ptr _Unwind_GetIPInfo (struct _Unwind_Context *, int *);\n+  void _Unwind_SetIP (struct _Unwind_Context *, _Unwind_Ptr);\n+#endif\n \n #ifdef __cplusplus\n }   /* extern \"C\" */"}]}