{"sha": "8b495402400e81c04278169c6176888f936fd6af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI0OTU0MDI0MDBlODFjMDQyNzgxNjljNjE3Njg4OGY5MzZmZDZhZg==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2004-04-21T00:24:05Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2004-04-21T00:24:05Z"}, "message": "dwarf2out.c (rtl_for_decl_location): Adjust rtl for byte variables stored in word registers, then in memory.\n\n* dwarf2out.c (rtl_for_decl_location): Adjust rtl for byte\nvariables stored in word registers, then in memory.\n\nFrom-SVN: r80941", "tree": {"sha": "d1f75e32e70eb5b6db5f1b876cf585a131e1711f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d1f75e32e70eb5b6db5f1b876cf585a131e1711f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b495402400e81c04278169c6176888f936fd6af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b495402400e81c04278169c6176888f936fd6af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b495402400e81c04278169c6176888f936fd6af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b495402400e81c04278169c6176888f936fd6af/comments", "author": null, "committer": null, "parents": [{"sha": "e3ab7ec73ddb1202f51a2475d16388029373aae2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3ab7ec73ddb1202f51a2475d16388029373aae2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3ab7ec73ddb1202f51a2475d16388029373aae2"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "3c7c4997e15c7ace8781d484ef384abbc389346d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b495402400e81c04278169c6176888f936fd6af/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b495402400e81c04278169c6176888f936fd6af/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8b495402400e81c04278169c6176888f936fd6af", "patch": "@@ -1,3 +1,8 @@\n+2004-04-20  DJ Delorie  <dj@redhat.com>\n+\t\n+\t* dwarf2out.c (rtl_for_decl_location): Adjust rtl for byte\n+\tvariables stored in word registers, then in memory.\n+\n 2004-04-20  Eric Christopher  <echristo@redhat.com>\n \n \t* cp/parser.c (cp_parser_declaration): Move translate"}, {"sha": "9cd05a0a6446d9f147cafbbed4e692af15ba5428", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b495402400e81c04278169c6176888f936fd6af/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b495402400e81c04278169c6176888f936fd6af/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=8b495402400e81c04278169c6176888f936fd6af", "patch": "@@ -9756,6 +9756,24 @@ rtl_for_decl_location (tree decl)\n \t\t\t     plus_constant (XEXP (rtl, 0), offset));\n \t}\n     }\n+  else if (TREE_CODE (decl) == VAR_DECL\n+\t   && GET_CODE (rtl) == MEM\n+\t   && GET_MODE (rtl) != TYPE_MODE (TREE_TYPE (decl))\n+\t   && BYTES_BIG_ENDIAN)\n+    {\n+      int rsize = GET_MODE_SIZE (GET_MODE (rtl));\n+      int dsize = GET_MODE_SIZE (TYPE_MODE (TREE_TYPE (decl)));\n+\n+      /* If a variable is declared \"register\" yet is smaller than\n+\t a register, then if we store the variable to memory, it\n+\t looks like we're storing a register-sized value, when in\n+\t fact we are not.  We need to adjust the offset of the\n+\t storage location to reflect the actual value's bytes,\n+\t else gdb will not be able to display it.  */\n+      if (rsize > dsize)\n+\trtl = gen_rtx_MEM (TYPE_MODE (TREE_TYPE (decl)),\n+\t\t\t   plus_constant (XEXP (rtl, 0), rsize-dsize));\n+    }\n \n   if (rtl != NULL_RTX)\n     {"}]}