{"sha": "848e631716a57a22ed7bf624bdd0e6aa2fedec51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODQ4ZTYzMTcxNmE1N2EyMmVkN2JmNjI0YmRkMGU2YWEyZmVkZWM1MQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-07-21T15:32:51Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-07-21T15:32:51Z"}, "message": "sse.md (vec_unpacku_float_hi_v4si): New expander.\n\n\t* config/i386/sse.md (vec_unpacku_float_hi_v4si): New expander.\n\t(vec_unpacku_float_lo_v4si): Ditto.\n\ntestsuite/ChangeLog:\n\n\t* gcc.target/i386/vectorize8.c: New test.\n\nFrom-SVN: r149862", "tree": {"sha": "53efce656c397848632f83829b61cda9b2e4f248", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/53efce656c397848632f83829b61cda9b2e4f248"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/848e631716a57a22ed7bf624bdd0e6aa2fedec51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/848e631716a57a22ed7bf624bdd0e6aa2fedec51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/848e631716a57a22ed7bf624bdd0e6aa2fedec51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/848e631716a57a22ed7bf624bdd0e6aa2fedec51/comments", "author": null, "committer": null, "parents": [{"sha": "54e86f6b4d2b10be3667d0caf6fb8ccb1c84cee1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54e86f6b4d2b10be3667d0caf6fb8ccb1c84cee1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54e86f6b4d2b10be3667d0caf6fb8ccb1c84cee1"}], "stats": {"total": 97, "additions": 93, "deletions": 4}, "files": [{"sha": "a62d79f4caeb2907abb7eda1098b12a41fcb5b4f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=848e631716a57a22ed7bf624bdd0e6aa2fedec51", "patch": "@@ -1,3 +1,8 @@\n+2009-07-21  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/sse.md (vec_unpacku_float_hi_v4si): New expander.\n+\t(vec_unpacku_float_lo_v4si): Ditto.\n+\n 2009-07-21  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/40811\n@@ -39,8 +44,7 @@\n \n 2009-07-20  Olatunji Ruwase  <tjruwase@google.com>\n \n-\t* toplev.c: Invoke FINISH_UNIT callbacks before call to\n-\tfinalize().\n+\t* toplev.c: Invoke FINISH_UNIT callbacks before call to finalize().\n \n 2009-07-20  Shujing Zhao  <pearly.zhao@oracle.com>\n \n@@ -75,7 +79,7 @@\n \t* tree.c (build_function_type_skip_args): Remove bogus assert.\n \n 2009-07-20  Jan Hubicka  <jh@suse.cz>\n-            Martin Jambor  <mjambor@suse.cz>\n+\t    Martin Jambor  <mjambor@suse.cz>\n \n \t* cgraph.h (combined_args_to_skip): New field.\n \t* cgraph.c (cgraph_create_virtual_clone): Properly handle\n@@ -465,7 +469,7 @@\n \talias information when not optimizing.\n \n 2009-07-14  Richard Guenther  <rguenther@suse.de>\n-\tAndrey Belevantsev <abel@ispras.ru>\n+\t    Andrey Belevantsev <abel@ispras.ru>\n \n \t* tree-ssa-alias.h (refs_may_alias_p_1): Declare.\n \t(pt_solution_set): Likewise."}, {"sha": "84af375a15de7c9900051fa0f235f9ee4d7505d5", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=848e631716a57a22ed7bf624bdd0e6aa2fedec51", "patch": "@@ -2970,6 +2970,71 @@\n \t    (parallel [(const_int 0) (const_int 1)]))))]\n   \"TARGET_SSE2\")\n \n+(define_expand \"vec_unpacku_float_hi_v4si\"\n+  [(set (match_dup 5)\n+\t(vec_select:V4SI\n+\t  (match_operand:V4SI 1 \"nonimmediate_operand\" \"\")\n+\t  (parallel [(const_int 2)\n+\t\t     (const_int 3)\n+\t\t     (const_int 2)\n+\t\t     (const_int 3)])))\n+   (set (match_dup 6)\n+        (float:V2DF\n+\t  (vec_select:V2SI\n+\t  (match_dup 5)\n+\t    (parallel [(const_int 0) (const_int 1)]))))\n+   (set (match_dup 7)\n+\t(lt:V2DF (match_dup 6) (match_dup 3)))\n+   (set (match_dup 8)\n+\t(and:V2DF (match_dup 7) (match_dup 4)))\n+   (set (match_operand:V2DF 0 \"register_operand\" \"\")\n+\t(plus:V2DF (match_dup 6) (match_dup 8)))]\n+ \"TARGET_SSE2\"\n+{\n+  REAL_VALUE_TYPE TWO32r;\n+  rtx x;\n+  int i;\n+\n+  real_ldexp (&TWO32r, &dconst1, 32);\n+  x = const_double_from_real_value (TWO32r, DFmode);\n+\n+  operands[3] = force_reg (V2DFmode, CONST0_RTX (V2DFmode));\n+  operands[4] = force_reg (V2DFmode, ix86_build_const_vector (DFmode, 1, x));\n+\n+  operands[5] = gen_reg_rtx (V4SImode);\n+ \n+  for (i = 6; i < 9; i++)\n+    operands[i] = gen_reg_rtx (V2DFmode);\n+})\n+\n+(define_expand \"vec_unpacku_float_lo_v4si\"\n+  [(set (match_dup 5)\n+\t(float:V2DF\n+\t  (vec_select:V2SI\n+\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"\")\n+\t    (parallel [(const_int 0) (const_int 1)]))))\n+   (set (match_dup 6)\n+\t(lt:V2DF (match_dup 5) (match_dup 3)))\n+   (set (match_dup 7)\n+\t(and:V2DF (match_dup 6) (match_dup 4)))\n+   (set (match_operand:V2DF 0 \"register_operand\" \"\")\n+\t(plus:V2DF (match_dup 5) (match_dup 7)))]\n+  \"TARGET_SSE2\"\n+{\n+  REAL_VALUE_TYPE TWO32r;\n+  rtx x;\n+  int i;\n+\n+  real_ldexp (&TWO32r, &dconst1, 32);\n+  x = const_double_from_real_value (TWO32r, DFmode);\n+\n+  operands[3] = force_reg (V2DFmode, CONST0_RTX (V2DFmode));\n+  operands[4] = force_reg (V2DFmode, ix86_build_const_vector (DFmode, 1, x));\n+\n+  for (i = 5; i < 8; i++)\n+    operands[i] = gen_reg_rtx (V2DFmode);\n+})\n+\n (define_expand \"vec_pack_trunc_v2df\"\n   [(match_operand:V4SF 0 \"register_operand\" \"\")\n    (match_operand:V2DF 1 \"nonimmediate_operand\" \"\")"}, {"sha": "ed0b13aae3597cef59d1f6f9024fa47433816d69", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=848e631716a57a22ed7bf624bdd0e6aa2fedec51", "patch": "@@ -1,3 +1,7 @@\n+2009-07-21  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* gcc.target/i386/vectorize8.c: New test.\n+\n 2009-07-21  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/40811"}, {"sha": "ed1517b93efcccc987ff07a72ae4cd783e5ef808", "filename": "gcc/testsuite/gcc.target/i386/vectorize8.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvectorize8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/848e631716a57a22ed7bf624bdd0e6aa2fedec51/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvectorize8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvectorize8.c?ref=848e631716a57a22ed7bf624bdd0e6aa2fedec51", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ftree-vectorize -msse2\" } */\n+\n+unsigned int a[256];\n+double b[256];\n+\n+void foo(void)\n+{\n+  int i;\n+\n+  for (i=0; i<256; ++i)\n+    b[i] = a[i];\n+}\n+\n+/* { dg-final { scan-assembler \"cvtdq2pd\" } } */\n+"}]}