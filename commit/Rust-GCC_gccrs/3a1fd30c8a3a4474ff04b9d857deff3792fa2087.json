{"sha": "3a1fd30c8a3a4474ff04b9d857deff3792fa2087", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ExZmQzMGM4YTNhNDQ3NGZmMDRiOWQ4NTdkZWZmMzc5MmZhMjA4Nw==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2011-04-26T22:07:11Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2011-04-26T22:07:11Z"}, "message": "decl.c (gfc_match_end): Check that the block name starts with \"block@\".\n\n2011-04-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\t* decl.c (gfc_match_end):  Check that the block name starts\n\twith \"block@\".\n\t* parse.c (gfc_build_block_ns):  Make block names unique by\n\tnumbering them.\n\nFrom-SVN: r172990", "tree": {"sha": "44987fd72abe0fd69b95ebb2eade3764b973156a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44987fd72abe0fd69b95ebb2eade3764b973156a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a1fd30c8a3a4474ff04b9d857deff3792fa2087", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a1fd30c8a3a4474ff04b9d857deff3792fa2087", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a1fd30c8a3a4474ff04b9d857deff3792fa2087", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a1fd30c8a3a4474ff04b9d857deff3792fa2087/comments", "author": null, "committer": null, "parents": [{"sha": "898b8927465614b911841f134f37165a613debf5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/898b8927465614b911841f134f37165a613debf5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/898b8927465614b911841f134f37165a613debf5"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "78d687dbeedba2bae88fb4934b5cfdfa6856f94a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a1fd30c8a3a4474ff04b9d857deff3792fa2087/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a1fd30c8a3a4474ff04b9d857deff3792fa2087/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=3a1fd30c8a3a4474ff04b9d857deff3792fa2087", "patch": "@@ -1,3 +1,10 @@\n+2011-04-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\t* decl.c (gfc_match_end):  Check that the block name starts\n+\twith \"block@\".\n+\t* parse.c (gfc_build_block_ns):  Make block names unique by\n+\tnumbering them.\n+\n 2011-04-26  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \t* frontend-passes.c (inserted_block):  New variable."}, {"sha": "9901fb16a73a08b3d4aad5d842aca15205b53e77", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a1fd30c8a3a4474ff04b9d857deff3792fa2087/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a1fd30c8a3a4474ff04b9d857deff3792fa2087/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=3a1fd30c8a3a4474ff04b9d857deff3792fa2087", "patch": "@@ -5746,7 +5746,7 @@ gfc_match_end (gfc_statement *st)\n     {\n     case COMP_ASSOCIATE:\n     case COMP_BLOCK:\n-      if (!strcmp (block_name, \"block@\"))\n+      if (!strncmp (block_name, \"block@\", strlen(\"block@\")))\n \tblock_name = NULL;\n       break;\n "}, {"sha": "ff029bf18f76ecd7259c9e75c13653d2d83e6c34", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a1fd30c8a3a4474ff04b9d857deff3792fa2087/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a1fd30c8a3a4474ff04b9d857deff3792fa2087/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=3a1fd30c8a3a4474ff04b9d857deff3792fa2087", "patch": "@@ -3135,6 +3135,7 @@ gfc_namespace*\n gfc_build_block_ns (gfc_namespace *parent_ns)\n {\n   gfc_namespace* my_ns;\n+  static int numblock = 1;\n \n   my_ns = gfc_get_namespace (parent_ns, 1);\n   my_ns->construct_entities = 1;\n@@ -3149,8 +3150,10 @@ gfc_build_block_ns (gfc_namespace *parent_ns)\n   else\n     {\n       gfc_try t;\n+      char buffer[20];  /* Enough to hold \"block@2147483648\\n\".  */\n \n-      gfc_get_symbol (\"block@\", my_ns, &my_ns->proc_name);\n+      snprintf(buffer, sizeof(buffer), \"block@%d\", numblock++);\n+      gfc_get_symbol (buffer, my_ns, &my_ns->proc_name);\n       t = gfc_add_flavor (&my_ns->proc_name->attr, FL_LABEL,\n \t\t\t  my_ns->proc_name->name, NULL);\n       gcc_assert (t == SUCCESS);"}]}