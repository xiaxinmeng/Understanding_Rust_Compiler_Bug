{"sha": "343fdf03d406d874d1a6fe90d94a16949a2d9f4b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzQzZmRmMDNkNDA2ZDg3NGQxYTZmZTkwZDk0YTE2OTQ5YTJkOWY0Yg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-11-11T04:10:30Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-11-11T04:10:30Z"}, "message": "decl.c (grokdeclarator): Tweak conditions for pedwarn in previous change.\n\n\t* decl.c (grokdeclarator): Tweak conditions for pedwarn in\n \tprevious change.\n\nMon Nov 10 20:08:29 1997  Bruno Haible  <bruno@linuix.mathematik.uni-karlsruhe.de>\n\n\t* pt.c (coerce_template_parms): Tweak error message.\n\n\t* decl.c (grokdeclarator): If -Wreturn-type, warn everytime a\n\treturn type defaults to `int', even if there are storage-class\n\tspecifiers.\n\nFrom-SVN: r16425", "tree": {"sha": "4078d9aa0ba92b2b4e240cfd05eb2c35b78e02d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4078d9aa0ba92b2b4e240cfd05eb2c35b78e02d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/343fdf03d406d874d1a6fe90d94a16949a2d9f4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/343fdf03d406d874d1a6fe90d94a16949a2d9f4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/343fdf03d406d874d1a6fe90d94a16949a2d9f4b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/343fdf03d406d874d1a6fe90d94a16949a2d9f4b/comments", "author": null, "committer": null, "parents": [{"sha": "6d1350cdde0d7241b4649729cb65ccf9d323feaa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d1350cdde0d7241b4649729cb65ccf9d323feaa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d1350cdde0d7241b4649729cb65ccf9d323feaa"}], "stats": {"total": 28, "additions": 23, "deletions": 5}, "files": [{"sha": "bd15ca1d3b6cb00eb356425dc784e039cf608d2d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343fdf03d406d874d1a6fe90d94a16949a2d9f4b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343fdf03d406d874d1a6fe90d94a16949a2d9f4b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=343fdf03d406d874d1a6fe90d94a16949a2d9f4b", "patch": "@@ -4,6 +4,19 @@ Sun Nov  9 01:29:55 1997  Jim Wilson  (wilson@cygnus.com)\n \t* init.c (build_vec_delete_1): Delete build_block and\n \tadd_block_current_level calls.\n \n+Mon Nov 10 20:08:38 1997  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* decl.c (grokdeclarator): Tweak conditions for pedwarn in\n+ \tprevious change.\n+\n+Mon Nov 10 20:08:29 1997  Bruno Haible  <bruno@linuix.mathematik.uni-karlsruhe.de>\n+\n+\t* pt.c (coerce_template_parms): Tweak error message.\n+\n+\t* decl.c (grokdeclarator): If -Wreturn-type, warn everytime a\n+\treturn type defaults to `int', even if there are storage-class\n+\tspecifiers.\n+\n Mon Nov 10 03:04:20 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \tComplete nested exception support."}, {"sha": "486897f0a950d2fc93e6d8e8b52f6d381d947a2a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343fdf03d406d874d1a6fe90d94a16949a2d9f4b/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343fdf03d406d874d1a6fe90d94a16949a2d9f4b/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=343fdf03d406d874d1a6fe90d94a16949a2d9f4b", "patch": "@@ -8104,10 +8104,15 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \t    }\n \t  else if (RIDBIT_SETP (RID_TYPEDEF, specbits))\n \t    pedwarn (\"ANSI C++ forbids typedef which does not specify a type\");\n-\t  else if (declspecs == NULL_TREE\n-\t\t   && (innermost_code != CALL_EXPR || pedantic))\n-\t    cp_pedwarn (\"ANSI C++ forbids declaration `%D' with no type or storage class\",\n-\t\t\tdname);\n+\t  else if (innermost_code != CALL_EXPR || pedantic\n+\t\t   || (warn_return_type && return_type == return_normal))\n+\t    {\n+\t      if (innermost_code == CALL_EXPR)\n+\t\tcp_pedwarn (\"return-type of `%D' defaults to `int'\", dname);\n+\t      else\n+\t\tcp_pedwarn (\"ANSI C++ forbids declaration `%D' with no type\",\n+\t\t\t    dname);\n+\t    }\n \t  type = integer_type_node;\n \t}\n     }"}, {"sha": "dff871d42888b7d2fa33ecdeafba996ea0f34d5b", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343fdf03d406d874d1a6fe90d94a16949a2d9f4b/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343fdf03d406d874d1a6fe90d94a16949a2d9f4b/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=343fdf03d406d874d1a6fe90d94a16949a2d9f4b", "patch": "@@ -1085,7 +1085,7 @@ coerce_template_parms (parms, arglist, in_decl)\n \t    }\n \t  else if (!TREE_CONSTANT (val))\n \t    {\n-\t      cp_error (\"non-const `%E' cannot be used as template argument\",\n+\t      cp_error (\"non-constant `%E' cannot be used as template argument\",\n \t\t\targ);\n \t      val = error_mark_node;\n \t    }"}]}