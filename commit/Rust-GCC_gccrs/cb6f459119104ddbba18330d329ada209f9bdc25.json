{"sha": "cb6f459119104ddbba18330d329ada209f9bdc25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2I2ZjQ1OTExOTEwNGRkYmJhMTgzMzBkMzI5YWRhMjA5ZjliZGMyNQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2015-05-11T09:35:53Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2015-05-11T09:35:53Z"}, "message": "re PR rtl-optimization/66076 (ICE: in vec_safe_grow, at vec.h:618 with -funroll-loops -mno-prefer-avx128 -march=bdver4)\n\ngcc/\n\tPR rtl-optimization/66076\n\t* rtlanal.c (generic_subrtx_iterator <T>::add_single_to_queue):\n\tDon't grow the heap array if it is already big enough from a\n\tprevious iteration.\n\ngcc/testsuite/\n\tPR rtl-optimization/66076\n\t* gcc.dg/torture/pr66076.c: New test.\n\nFrom-SVN: r222999", "tree": {"sha": "6d3db918d04de28fb93c948686fd0bd5c282dd5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d3db918d04de28fb93c948686fd0bd5c282dd5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb6f459119104ddbba18330d329ada209f9bdc25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb6f459119104ddbba18330d329ada209f9bdc25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb6f459119104ddbba18330d329ada209f9bdc25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb6f459119104ddbba18330d329ada209f9bdc25/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "258619bb2d420f54a510569cee8e642835f86023", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/258619bb2d420f54a510569cee8e642835f86023", "html_url": "https://github.com/Rust-GCC/gccrs/commit/258619bb2d420f54a510569cee8e642835f86023"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "5deba76159c21f044f7ef7c8e1d29d53917bfab3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cb6f459119104ddbba18330d329ada209f9bdc25", "patch": "@@ -1,3 +1,10 @@\n+2015-05-11  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\tPR rtl-optimization/66076\n+\t* rtlanal.c (generic_subrtx_iterator <T>::add_single_to_queue):\n+\tDon't grow the heap array if it is already big enough from a\n+\tprevious iteration.\n+\n 2015-05-11  Christian Bruel  <christian.bruel@st.com>\n \n \t* config/arm/arm-protos.h (arm_declare_function_name): Declare."}, {"sha": "68d9931940328b880a9276d8d56fbc7b00367750", "filename": "gcc/rtlanal.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2Frtlanal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2Frtlanal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtlanal.c?ref=cb6f459119104ddbba18330d329ada209f9bdc25", "patch": "@@ -104,7 +104,10 @@ generic_subrtx_iterator <T>::add_single_to_queue (array_type &array,\n \t  return base;\n \t}\n       gcc_checking_assert (i == LOCAL_ELEMS);\n-      vec_safe_grow (array.heap, i + 1);\n+      /* A previous iteration might also have moved from the stack to the\n+\t heap, in which case the heap array will already be big enough.  */\n+      if (vec_safe_length (array.heap) <= i)\n+\tvec_safe_grow (array.heap, i + 1);\n       base = array.heap->address ();\n       memcpy (base, array.stack, sizeof (array.stack));\n       base[LOCAL_ELEMS] = x;"}, {"sha": "3b327b75b7f241ce1e73f031976aac16fe50d7b1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cb6f459119104ddbba18330d329ada209f9bdc25", "patch": "@@ -1,3 +1,8 @@\n+2015-05-11  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\tPR rtl-optimization/66076\n+\t* gcc.dg/torture/pr66076.c: New test.\n+\n 2015-05-10  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/66041"}, {"sha": "7e7d34daac120350dcde160e4f0136403867c64c", "filename": "gcc/testsuite/gcc.dg/torture/pr66076.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr66076.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb6f459119104ddbba18330d329ada209f9bdc25/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr66076.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr66076.c?ref=cb6f459119104ddbba18330d329ada209f9bdc25", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+/* { dg-options \"-mno-prefer-avx128 -march=bdver4\" { target i?86-*-* x86_64-*-* } } */\n+\n+void\n+f0a (char *result, char *arg1, char *arg4, char temp_6)\n+{\n+  int idx = 0;\n+  for (idx = 0; idx < 416; idx += 1)\n+    result[idx] = (arg1[idx] + arg4[idx]) * temp_6;\n+}"}]}