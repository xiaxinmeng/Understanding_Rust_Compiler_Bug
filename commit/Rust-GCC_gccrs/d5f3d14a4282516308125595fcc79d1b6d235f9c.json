{"sha": "d5f3d14a4282516308125595fcc79d1b6d235f9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDVmM2QxNGE0MjgyNTE2MzA4MTI1NTk1ZmNjNzlkMWI2ZDIzNWY5Yw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-10T23:38:50Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-10T23:38:50Z"}, "message": "Don't crash on redefined variable.\n\nFrom-SVN: r170029", "tree": {"sha": "d2d355b333e597d396f653d8a6819b80bf8cd269", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d2d355b333e597d396f653d8a6819b80bf8cd269"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5f3d14a4282516308125595fcc79d1b6d235f9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5f3d14a4282516308125595fcc79d1b6d235f9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5f3d14a4282516308125595fcc79d1b6d235f9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5f3d14a4282516308125595fcc79d1b6d235f9c/comments", "author": null, "committer": null, "parents": [{"sha": "8629c99851908ef1b958c35be0fe2b279f1275b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8629c99851908ef1b958c35be0fe2b279f1275b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8629c99851908ef1b958c35be0fe2b279f1275b3"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "45ff33df3d8406bba9246beacddd5c34dc1bdd7f", "filename": "gcc/go/gofrontend/parse.cc", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5f3d14a4282516308125595fcc79d1b6d235f9c/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5f3d14a4282516308125595fcc79d1b6d235f9c/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fparse.cc?ref=d5f3d14a4282516308125595fcc79d1b6d235f9c", "patch": "@@ -1848,7 +1848,13 @@ Parse::init_var(const Typed_identifier& tid, Type* type, Expression* init,\n   *is_new = true;\n   Variable* var = new Variable(type, init, this->gogo_->in_global_scope(),\n \t\t\t       false, false, location);\n-  return this->gogo_->add_variable(tid.name(), var);\n+  Named_object* no = this->gogo_->add_variable(tid.name(), var);\n+  if (!no->is_variable())\n+    {\n+      // The name is already defined, so we just gave an error.\n+      return this->gogo_->add_sink();\n+    }\n+  return no;\n }\n \n // Create a dummy global variable to force an initializer to be run in"}]}