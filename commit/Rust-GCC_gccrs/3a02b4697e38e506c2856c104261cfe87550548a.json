{"sha": "3a02b4697e38e506c2856c104261cfe87550548a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2EwMmI0Njk3ZTM4ZTUwNmMyODU2YzEwNDI2MWNmZTg3NTUwNTQ4YQ==", "commit": {"author": {"name": "Bob Duff", "email": "duff@adacore.com", "date": "2019-08-14T09:51:57Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-08-14T09:51:57Z"}, "message": "[Ada] Tweak the sloc of Compile_Time_Warning warnings\n\n2019-08-14  Bob Duff  <duff@adacore.com>\n\ngcc/ada/\n\n\t* sem_prag.adb (Validate_Compile_Time_Warning_Error): Attach the\n\twarning to the Sloc of the first pragma argument, rather than to\n\tthe pragma itself. This is to make pragmas processed after the\n\tback end use the same Sloc as pragmas processed earlier, in the\n\tfront end. There's no reason for this discrepancy, and it\n\thinders further work on this ticket.\n\nFrom-SVN: r274461", "tree": {"sha": "63456a74e889d13b3259a2c0433e0b8f1222fb63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63456a74e889d13b3259a2c0433e0b8f1222fb63"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a02b4697e38e506c2856c104261cfe87550548a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a02b4697e38e506c2856c104261cfe87550548a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a02b4697e38e506c2856c104261cfe87550548a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a02b4697e38e506c2856c104261cfe87550548a/comments", "author": {"login": "bobduff", "id": 29099567, "node_id": "MDQ6VXNlcjI5MDk5NTY3", "avatar_url": "https://avatars.githubusercontent.com/u/29099567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobduff", "html_url": "https://github.com/bobduff", "followers_url": "https://api.github.com/users/bobduff/followers", "following_url": "https://api.github.com/users/bobduff/following{/other_user}", "gists_url": "https://api.github.com/users/bobduff/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobduff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobduff/subscriptions", "organizations_url": "https://api.github.com/users/bobduff/orgs", "repos_url": "https://api.github.com/users/bobduff/repos", "events_url": "https://api.github.com/users/bobduff/events{/privacy}", "received_events_url": "https://api.github.com/users/bobduff/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6d0ca6acd0616ddac74d23c0bec3791e6c721142", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d0ca6acd0616ddac74d23c0bec3791e6c721142", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d0ca6acd0616ddac74d23c0bec3791e6c721142"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "773b70523fdc551bda40a0ee48d04de917afc6ff", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a02b4697e38e506c2856c104261cfe87550548a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a02b4697e38e506c2856c104261cfe87550548a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3a02b4697e38e506c2856c104261cfe87550548a", "patch": "@@ -1,3 +1,12 @@\n+2019-08-14  Bob Duff  <duff@adacore.com>\n+\n+\t* sem_prag.adb (Validate_Compile_Time_Warning_Error): Attach the\n+\twarning to the Sloc of the first pragma argument, rather than to\n+\tthe pragma itself. This is to make pragmas processed after the\n+\tback end use the same Sloc as pragmas processed earlier, in the\n+\tfront end. There's no reason for this discrepancy, and it\n+\thinders further work on this ticket.\n+\n 2019-08-14  Bob Duff  <duff@adacore.com>\n \n \t* sem.ads (Inside_A_Generic): Remove the ??? comment."}, {"sha": "1db39f4a7f303e45c9c081d740dbbeaea540bc56", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a02b4697e38e506c2856c104261cfe87550548a/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a02b4697e38e506c2856c104261cfe87550548a/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=3a02b4697e38e506c2856c104261cfe87550548a", "patch": "@@ -336,8 +336,8 @@ package body Sem_Prag is\n    --  and alignment values performed by the back end.\n \n    --  Note: the reason we store a Source_Ptr value instead of a Node_Id is\n-   --  that by the time Validate_Unchecked_Conversions is called, Sprint will\n-   --  already have modified all Sloc values if the -gnatD option is set.\n+   --  that by the time Validate_Compile_Time_Warning_Errors is called, Sprint\n+   --  will already have modified all Sloc values if the -gnatD option is set.\n \n    type CTWE_Entry is record\n       Eloc  : Source_Ptr;\n@@ -32147,9 +32147,10 @@ package body Sem_Prag is\n    -----------------------------------------\n \n    procedure Validate_Compile_Time_Warning_Error (N : Node_Id) is\n+      Arg1  : constant Node_Id := First (Pragma_Argument_Associations (N));\n    begin\n       Compile_Time_Warnings_Errors.Append\n-        (New_Val => CTWE_Entry'(Eloc  => Sloc (N),\n+        (New_Val => CTWE_Entry'(Eloc  => Sloc (Arg1),\n                                 Scope => Current_Scope,\n                                 Prag  => N));\n    end Validate_Compile_Time_Warning_Error;"}]}