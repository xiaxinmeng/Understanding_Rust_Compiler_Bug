{"sha": "b2028d0b943dff90a98b9c095298ea6413238a88", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjIwMjhkMGI5NDNkZmY5MGE5OGI5YzA5NTI5OGVhNjQxMzIzOGE4OA==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T22:42:58Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T22:42:58Z"}, "message": "trans-array.c (gfc_conv_loop_setup, [...]): Move specloop arrays clearing from the former to the latter.\n\n\t* trans-array.c (gfc_conv_loop_setup, gfc_trans_create_temp_array):\n\tMove specloop arrays clearing from the former to the latter.\n\nFrom-SVN: r180881", "tree": {"sha": "ec4394047a34554df1efe9916d7a21a46692b43e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec4394047a34554df1efe9916d7a21a46692b43e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2028d0b943dff90a98b9c095298ea6413238a88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2028d0b943dff90a98b9c095298ea6413238a88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2028d0b943dff90a98b9c095298ea6413238a88", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2028d0b943dff90a98b9c095298ea6413238a88/comments", "author": null, "committer": null, "parents": [{"sha": "1d9370e9096e97e380a593039e755523345e530d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d9370e9096e97e380a593039e755523345e530d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d9370e9096e97e380a593039e755523345e530d"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "af37e211ca0a7f2334dd98a377b955c9629c327e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2028d0b943dff90a98b9c095298ea6413238a88/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2028d0b943dff90a98b9c095298ea6413238a88/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b2028d0b943dff90a98b9c095298ea6413238a88", "patch": "@@ -1,3 +1,8 @@\n+2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\t* trans-array.c (gfc_conv_loop_setup, gfc_trans_create_temp_array):\n+\tMove specloop arrays clearing from the former to the latter.\n+\n 2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* trans-array.c (set_loop_bounds): Separate the beginning of"}, {"sha": "545f2fb21a90c09ee439ae3f56656317b18eeb0a", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2028d0b943dff90a98b9c095298ea6413238a88/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2028d0b943dff90a98b9c095298ea6413238a88/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=b2028d0b943dff90a98b9c095298ea6413238a88", "patch": "@@ -902,6 +902,11 @@ gfc_trans_create_temp_array (stmtblock_t * pre, stmtblock_t * post,\n \t\t\tpre);\n       loop->from[n] = gfc_index_zero_node;\n \n+      /* We have just changed the loop bounds, we must clear the\n+\t corresponding specloop, so that delta calculation is not skipped\n+\t later in set_delta.  */\n+      loop->specloop[n] = NULL;\n+\n       /* We are constructing the temporary's descriptor based on the loop\n \t dimensions. As the dimensions may be accessed in arbitrary order\n \t (think of transpose) the size taken from the n'th loop may not map\n@@ -4136,7 +4141,6 @@ gfc_conv_loop_setup (gfc_loopinfo * loop, locus * where)\n {\n   gfc_ss *tmp_ss;\n   tree tmp;\n-  int n;\n \n   set_loop_bounds (loop);\n \n@@ -4172,9 +4176,6 @@ gfc_conv_loop_setup (gfc_loopinfo * loop, locus * where)\n \t\t\t\t   false, true, false, where);\n     }\n \n-  for (n = 0; n < loop->temp_dim; n++)\n-    loop->specloop[loop->order[n]] = NULL;\n-\n   /* For array parameters we don't have loop variables, so don't calculate the\n      translations.  */\n   if (loop->array_parameter)"}]}