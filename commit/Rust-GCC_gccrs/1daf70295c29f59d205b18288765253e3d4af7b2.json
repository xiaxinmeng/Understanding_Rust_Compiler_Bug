{"sha": "1daf70295c29f59d205b18288765253e3d4af7b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRhZjcwMjk1YzI5ZjU5ZDIwNWIxODI4ODc2NTI1M2UzZDRhZjdiMg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-25T21:05:29Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-25T21:05:29Z"}, "message": "Fix bad S_IS* macros in <sys/stat.h> on m88k-sysv3.\n\nFrom-SVN: r5884", "tree": {"sha": "fbf9d1506f369fe364b83462e93d4d14d7875f52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fbf9d1506f369fe364b83462e93d4d14d7875f52"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1daf70295c29f59d205b18288765253e3d4af7b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1daf70295c29f59d205b18288765253e3d4af7b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1daf70295c29f59d205b18288765253e3d4af7b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1daf70295c29f59d205b18288765253e3d4af7b2/comments", "author": null, "committer": null, "parents": [{"sha": "360b1451cbd3e2a74d305f4ee25a0ca168702b1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/360b1451cbd3e2a74d305f4ee25a0ca168702b1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/360b1451cbd3e2a74d305f4ee25a0ca168702b1f"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "57de8263a47052ea8301cbd64318201347dcb51f", "filename": "gcc/fixincludes", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1daf70295c29f59d205b18288765253e3d4af7b2/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1daf70295c29f59d205b18288765253e3d4af7b2/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=1daf70295c29f59d205b18288765253e3d4af7b2", "patch": "@@ -1175,6 +1175,25 @@ if [ -r ${LIB}/$file ]; then\n   fi\n fi\n \n+# Fix incorrect S_IF* definitions on m88k-sysv3.\n+file=sys/stat.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo Fixing $file\n+  sed -e 's/^\\(#define[ \t]*S_IS[A-Z]*(m)\\)[ \t]*(m[ \t]*&[ \t]*\\(S_IF[A-Z][A-Z][A-Z][A-Z]*\\)[ \t]*)/\\1 (((m)\\&S_IFMT)==\\2)/' \\\n+      -e 's/^\\(#define[ \t]*S_IS[A-Z]*(m)\\)[ \t]*(m[ \t]*&[ \t]*\\(0[0-9]*\\)[ \t]*)/\\1 (((m)\\&S_IFMT)==\\2)/' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    rm -f ${LIB}/$file\n+  fi\n+fi\n+\n # These two files on SunOS 4 are included by other files\n # in the same directory, using \"...\".  So we must make sure they exist\n # in the same directory as the other fixed files."}]}