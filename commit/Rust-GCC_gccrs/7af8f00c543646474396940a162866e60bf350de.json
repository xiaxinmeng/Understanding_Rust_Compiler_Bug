{"sha": "7af8f00c543646474396940a162866e60bf350de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FmOGYwMGM1NDM2NDY0NzQzOTY5NDBhMTYyODY2ZTYwYmYzNTBkZQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-08-14T16:15:40Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2005-08-14T16:15:40Z"}, "message": "re PR fortran/21432 (gfortran does not support printing of namelists)\n\n2005-08-14 Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/21432.\n\t* io.c (match_io): Add code to implement PRINT namelist.\n\n\n2005-08-14 Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/21432.\n\t* gfortran.dg/namelist_print_1.f: New test of functionality of\n\tPRINT namelist.\n\t* gfortran.dg/namelist_print_2.f: New test to check that PRINT\n\tnamelist generates error with -std=f95.\n\nFrom-SVN: r103079", "tree": {"sha": "ac2f22c51d35dc9fa5d7732e086d66a7d40f0e8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac2f22c51d35dc9fa5d7732e086d66a7d40f0e8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7af8f00c543646474396940a162866e60bf350de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af8f00c543646474396940a162866e60bf350de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7af8f00c543646474396940a162866e60bf350de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7af8f00c543646474396940a162866e60bf350de/comments", "author": null, "committer": null, "parents": [{"sha": "adb7b76436a93a635cb93e72ec6e701f4b10d6f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adb7b76436a93a635cb93e72ec6e701f4b10d6f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adb7b76436a93a635cb93e72ec6e701f4b10d6f5"}], "stats": {"total": 63, "additions": 63, "deletions": 0}, "files": [{"sha": "152ab005eefd26e286796473e222a5a5254046ca", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af8f00c543646474396940a162866e60bf350de/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af8f00c543646474396940a162866e60bf350de/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7af8f00c543646474396940a162866e60bf350de", "patch": "@@ -1,3 +1,8 @@\n+2005-08-14 Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/21432.\n+\t* io.c (match_io): Add code to implement PRINT namelist.\n+\n 2005-08-14  Canqun Yang  <canqun@nudt.edu.cn>\n \n \t* trans-stmt.c (gfc_trans_arithmetic_if): Optimized in case of equal"}, {"sha": "5b27eadc54435e4f55c2b84be8dc67d92e98f711", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af8f00c543646474396940a162866e60bf350de/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af8f00c543646474396940a162866e60bf350de/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=7af8f00c543646474396940a162866e60bf350de", "patch": "@@ -2133,6 +2133,30 @@ match_io (io_kind k)\n \n   if (gfc_match_char ('(') == MATCH_NO)\n     {\n+      /* Treat the non-standard case of PRINT namelist.  */\n+      if (k == M_PRINT && (gfc_match_name (name) == MATCH_YES)\n+\t    && !gfc_find_symbol (name, NULL, 1, &sym)\n+\t    && (sym->attr.flavor == FL_NAMELIST))\n+\t{\n+\t  if (gfc_notify_std (GFC_STD_GNU, \"PRINT namelist at \"\n+\t\t\t      \"%C is an extension\") == FAILURE)\n+\t    {\n+ \t      m = MATCH_ERROR;\n+\t      goto cleanup;\n+\t    }\n+\t  if (gfc_match_eos () == MATCH_NO)\n+\t    {\n+\t      gfc_error (\"Namelist followed by I/O list at %C\");\n+\t      m = MATCH_ERROR;\n+\t      goto cleanup;\n+\t    }\n+\n+\t  dt->io_unit = default_unit (k);\n+\t  dt->namelist = sym;\n+\t  goto get_io_list;\n+\t}\n+\n+\n       if (k == M_WRITE)\n \tgoto syntax;\n "}, {"sha": "b11e726d68dc6f26d39fcab20bd64d77654de3a9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af8f00c543646474396940a162866e60bf350de/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af8f00c543646474396940a162866e60bf350de/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7af8f00c543646474396940a162866e60bf350de", "patch": "@@ -1,3 +1,11 @@\n+2005-08-14 Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/21432.\n+\t* gfortran.dg/namelist_print_1.f: New test of functionality of\n+\tPRINT namelist.\n+\t* gfortran.dg/namelist_print_2.f: New test to check that PRINT\n+\tnamelist generates error with -std=f95.\n+\n 2005-08-14  Ira Rosen  <irar@il.ibm.com>   \n \n \tPR tree-optimization/23119"}, {"sha": "dfd2841f0229a546db842408c4564463e9059171", "filename": "gcc/testsuite/gfortran.dg/namelist_print_1.f", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af8f00c543646474396940a162866e60bf350de/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_print_1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af8f00c543646474396940a162866e60bf350de/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_print_1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_print_1.f?ref=7af8f00c543646474396940a162866e60bf350de", "patch": "@@ -0,0 +1,13 @@\n+! Test Non standard PRINT namelist - PR21432\n+!\n+! Contributor Paul Thomas  <pault@gcc.gnu.org>\n+!\n+! { dg-do run }\n+! { dg-options \"-std=gnu\" }\n+\n+      real  x\n+      namelist /mynml/ x\n+      x = 1\n+! ( dg-output \"^\" }\n+      print mynml ! { dg-output \"&MYNML(\\n|\\r\\n|\\r) X=  1.000000    ,  /(\\n|\\r\\n|\\r)\" }\n+      end"}, {"sha": "c37e3591d17fb3527b9b362b7e7bebc511a0083f", "filename": "gcc/testsuite/gfortran.dg/namelist_print_2.f", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7af8f00c543646474396940a162866e60bf350de/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_print_2.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7af8f00c543646474396940a162866e60bf350de/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_print_2.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_print_2.f?ref=7af8f00c543646474396940a162866e60bf350de", "patch": "@@ -0,0 +1,13 @@\n+! Test Non standard PRINT namelist - PR21432 is\n+! not accepted by -std=f95\n+!\n+! Contributor Paul Thomas  <pault@gcc.gnu.org>\n+!\n+! { dg-do compile }\n+! { dg-options \"-std=f95\" }\n+!\n+      real  x\n+      namelist /mynml/ x\n+      x = 1\n+      print mynml  ! { dg-error \"PRINT namelist.*extension\" \"\" }\n+      end"}]}