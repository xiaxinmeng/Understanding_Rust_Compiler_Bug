{"sha": "7e8b1c4bd8462271c21112f735c804a995a2d2f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2U4YjFjNGJkODQ2MjI3MWMyMTExMmY3MzVjODA0YTk5NWEyZDJmMw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-12-01T17:03:33Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-12-01T17:03:33Z"}, "message": "re PR tree-optimization/51246 (ICE in replace_ref_with, at tree-predcom.c:1309)\n\n\tPR tree-optimization/51246\n\t* tree-predcom.c (replace_ref_with): Handle also clobber on the\n\trhs.\n\n\t* gcc.c-torture/compile/pr51246.c: New test.\n\nFrom-SVN: r181884", "tree": {"sha": "5c2386eb5272e0528a4f005297028f3f5b9d53ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c2386eb5272e0528a4f005297028f3f5b9d53ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e8b1c4bd8462271c21112f735c804a995a2d2f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e8b1c4bd8462271c21112f735c804a995a2d2f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e8b1c4bd8462271c21112f735c804a995a2d2f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e8b1c4bd8462271c21112f735c804a995a2d2f3/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0397b9654739300f9a1e8a76c8cc816d3cb83bc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0397b9654739300f9a1e8a76c8cc816d3cb83bc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0397b9654739300f9a1e8a76c8cc816d3cb83bc7"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "f82b8bce40d299f7622d6cfbdad431ae51ac6ed3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7e8b1c4bd8462271c21112f735c804a995a2d2f3", "patch": "@@ -1,5 +1,9 @@\n 2011-12-01  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/51246\n+\t* tree-predcom.c (replace_ref_with): Handle also clobber on the\n+\trhs.\n+\n \tPR rtl-optimization/51014\n \t* loop-unroll.c (apply_opt_in_copies): Ignore label DEBUG_INSNs\n \tboth from bb and orig_bb."}, {"sha": "7d74e8b99aa6003f107cdc4434060f886c602828", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7e8b1c4bd8462271c21112f735c804a995a2d2f3", "patch": "@@ -1,5 +1,8 @@\n 2011-12-01  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/51246\n+\t* gcc.c-torture/compile/pr51246.c: New test.\n+\n \tPR rtl-optimization/51014\n \t* g++.dg/opt/pr51014.C: New test.\n "}, {"sha": "c206d8689f1ac138968bb62de6e7bf0f84825a9f", "filename": "gcc/testsuite/gcc.c-torture/compile/pr51246.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51246.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51246.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr51246.c?ref=7e8b1c4bd8462271c21112f735c804a995a2d2f3", "patch": "@@ -0,0 +1,14 @@\n+/* PR tree-optimization/51246 */\n+\n+int a, *b;\n+\n+void\n+test (void)\n+{\n+  while (1)\n+    {\n+      int c;\n+      a = c;\n+      b = &c;\n+    }\n+}"}, {"sha": "751bdebfa8a32555407b658921e8b38b28e5dd22", "filename": "gcc/tree-predcom.c", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2Ftree-predcom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8b1c4bd8462271c21112f735c804a995a2d2f3/gcc%2Ftree-predcom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-predcom.c?ref=7e8b1c4bd8462271c21112f735c804a995a2d2f3", "patch": "@@ -1306,8 +1306,20 @@ replace_ref_with (gimple stmt, tree new_tree, bool set, bool in_lhs)\n       val = gimple_assign_lhs (stmt);\n       if (TREE_CODE (val) != SSA_NAME)\n \t{\n-\t  gcc_assert (gimple_assign_copy_p (stmt));\n \t  val = gimple_assign_rhs1 (stmt);\n+\t  gcc_assert (gimple_assign_single_p (stmt));\n+\t  if (TREE_CLOBBER_P (val))\n+\t    {\n+\t      val = gimple_default_def (cfun, SSA_NAME_VAR (new_tree));\n+\t      if (val == NULL_TREE)\n+\t\t{\n+\t\t  val = make_ssa_name (SSA_NAME_VAR (new_tree),\n+\t\t\t\t       gimple_build_nop ());\n+\t\t  set_default_def (SSA_NAME_VAR (new_tree), val);\n+\t\t}\n+\t    }\n+\t  else\n+\t    gcc_assert (gimple_assign_copy_p (stmt));\n \t}\n     }\n   else"}]}