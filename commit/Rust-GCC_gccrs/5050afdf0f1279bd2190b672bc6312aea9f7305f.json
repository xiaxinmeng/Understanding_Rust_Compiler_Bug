{"sha": "5050afdf0f1279bd2190b672bc6312aea9f7305f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTA1MGFmZGYwZjEyNzliZDIxOTBiNjcyYmM2MzEyYWVhOWY3MzA1Zg==", "commit": {"author": {"name": "Kai Tietz", "email": "ktietz@redhat.com", "date": "2011-03-21T08:32:50Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2011-03-21T08:32:50Z"}, "message": "ChangeLog gcc/c-family\n\n2011-03-21  Kai Tietz  <ktietz@redhat.com>\n\n\tPR target/12171\n\t* c-pretty-print.c (pp_c_specifier_qualifier_list):\n\tDisplay allowed attributes for function pointer types.\n\t(pp_c_attributes_display): New function to display\n\tattributes having affects_type_identity flag set to true.\n\t* c-pretty-print.h (pp_c_attributes_display): New prototype.\n\nChangeLog gcc/cp\n\n2011-03-21  Kai Tietz  <ktietz@redhat.com>\n\n\tPR target/12171\n\t* cxx-pretty-print.c (pp_cxx_ptr_operator):\n\tDisplay allowed attributes for function pointer types.\n\t* error.c (dump_type_prefix): Likewise.\n\nFrom-SVN: r171210", "tree": {"sha": "5ed13e5b3cc506456eb82dc8e01503a616f1804b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ed13e5b3cc506456eb82dc8e01503a616f1804b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5050afdf0f1279bd2190b672bc6312aea9f7305f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5050afdf0f1279bd2190b672bc6312aea9f7305f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5050afdf0f1279bd2190b672bc6312aea9f7305f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5050afdf0f1279bd2190b672bc6312aea9f7305f/comments", "author": null, "committer": null, "parents": [{"sha": "62d784f7bdc63b09b0e2cee98aba71c921e2479c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62d784f7bdc63b09b0e2cee98aba71c921e2479c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62d784f7bdc63b09b0e2cee98aba71c921e2479c"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "5ac57926a6758e8c7ee0c78e5e660e664fa0cef3", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=5050afdf0f1279bd2190b672bc6312aea9f7305f", "patch": "@@ -1,6 +1,12 @@\n 2011-03-17  Kai Tietz\n \n \tPR target/12171\n+\t* c-pretty-print.c (pp_c_specifier_qualifier_list):\n+\tDisplay allowed attributes for function pointer types.\n+\t(pp_c_attributes_display): New function to display\n+\tattributes having affects_type_identity flag set to true.\n+\t* c-pretty-print.h (pp_c_attributes_display): New prototype.\n+\n \t* c-common.c (c_common_attribute_table):\n \tAdd new element.\n \t(c_common_format_attribute_table): Likewise."}, {"sha": "e41890370a1756818e5bc8778b6809a62a7fa6ad", "filename": "gcc/c-family/c-pretty-print.c", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fc-family%2Fc-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fc-family%2Fc-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-pretty-print.c?ref=5050afdf0f1279bd2190b672bc6312aea9f7305f", "patch": "@@ -460,6 +460,7 @@ pp_c_specifier_qualifier_list (c_pretty_printer *pp, tree t)\n \t  {\n \t    pp_c_whitespace (pp);\n \t    pp_c_left_paren (pp);\n+\t    pp_c_attributes_display (pp, TYPE_ATTRIBUTES (pointee));\n \t  }\n \telse if (!c_dialect_cxx ())\n \t  pp_c_whitespace (pp);\n@@ -790,6 +791,47 @@ pp_c_attributes (c_pretty_printer *pp, tree attributes)\n   pp_c_right_paren (pp);\n }\n \n+/* Pretty-print ATTRIBUTES using GNU C extension syntax for attributes\n+   marked to be displayed on disgnostic.  */\n+\n+void\n+pp_c_attributes_display (c_pretty_printer *pp, tree a)\n+{\n+  bool is_first = true;\n+\n+  if (a == NULL_TREE)\n+    return;\n+\n+  for (; a != NULL_TREE; a = TREE_CHAIN (a))\n+    {\n+      const struct attribute_spec *as;\n+      as = lookup_attribute_spec (TREE_PURPOSE (a));\n+      if (!as || as->affects_type_identity == false)\n+        continue;\n+      if (is_first)\n+       {\n+         pp_c_ws_string (pp, \"__attribute__\");\n+         pp_c_left_paren (pp);\n+         pp_c_left_paren (pp);\n+         is_first = false;\n+       }\n+      else\n+       {\n+         pp_separate_with (pp, ',');\n+       }\n+      pp_tree_identifier (pp, TREE_PURPOSE (a));\n+      if (TREE_VALUE (a))\n+       pp_c_call_argument_list (pp, TREE_VALUE (a));\n+    }\n+\n+  if (!is_first)\n+    {\n+      pp_c_right_paren (pp);\n+      pp_c_right_paren (pp);\n+      pp_c_whitespace (pp);\n+    }\n+}\n+\n /* function-definition:\n       declaration-specifiers declarator compound-statement  */\n "}, {"sha": "b41e8ed8d2ef6f74d280197ce727a38d3555ef33", "filename": "gcc/c-family/c-pretty-print.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fc-family%2Fc-pretty-print.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fc-family%2Fc-pretty-print.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-pretty-print.h?ref=5050afdf0f1279bd2190b672bc6312aea9f7305f", "patch": "@@ -177,6 +177,7 @@ void pp_c_space_for_pointer_operator (c_pretty_printer *, tree);\n void pp_c_tree_decl_identifier (c_pretty_printer *, tree);\n void pp_c_function_definition (c_pretty_printer *, tree);\n void pp_c_attributes (c_pretty_printer *, tree);\n+void pp_c_attributes_display (c_pretty_printer *, tree);\n void pp_c_cv_qualifiers (c_pretty_printer *pp, int qualifiers, bool func_type);\n void pp_c_type_qualifier_list (c_pretty_printer *, tree);\n void pp_c_parameter_type_list (c_pretty_printer *, tree);"}, {"sha": "b8069a81ce759f1b49e8b9b0c441cfaff955f993", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5050afdf0f1279bd2190b672bc6312aea9f7305f", "patch": "@@ -1,6 +1,10 @@\n 2011-03-21  Kai Tietz  <ktietz@redhat.com>\n \n \tPR target/12171\n+\t* cxx-pretty-print.c (pp_cxx_ptr_operator):\n+\tDisplay allowed attributes for function pointer types.\n+\t* error.c (dump_type_prefix): Likewise.\n+\n \t* tree.c (cxx_attribute_table): Adjust table.\n \n 2011-03-18  Jason Merrill  <jason@redhat.com>"}, {"sha": "d8bf9126e5b721aef7ea7bd8c47e22365d973e49", "filename": "gcc/cp/cxx-pretty-print.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fcp%2Fcxx-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fcp%2Fcxx-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcxx-pretty-print.c?ref=5050afdf0f1279bd2190b672bc6312aea9f7305f", "patch": "@@ -1323,6 +1323,8 @@ pp_cxx_ptr_operator (cxx_pretty_printer *pp, tree t)\n       if (TREE_CODE (TREE_TYPE (t)) == POINTER_TYPE\n \t  || TYPE_PTR_TO_MEMBER_P (TREE_TYPE (t)))\n \tpp_cxx_ptr_operator (pp, TREE_TYPE (t));\n+      pp_c_attributes_display (pp_c_base (pp),\n+\t\t\t       TYPE_ATTRIBUTES (TREE_TYPE (t)));\n       if (TREE_CODE (t) == POINTER_TYPE)\n \t{\n \t  pp_star (pp);"}, {"sha": "ec9b9fe85afa778d2507d0258dc9f71247458a76", "filename": "gcc/cp/error.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5050afdf0f1279bd2190b672bc6312aea9f7305f/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=5050afdf0f1279bd2190b672bc6312aea9f7305f", "patch": "@@ -661,6 +661,8 @@ dump_type_prefix (tree t, int flags)\n \t  {\n \t    pp_cxx_whitespace (cxx_pp);\n \t    pp_cxx_left_paren (cxx_pp);\n+\t    pp_c_attributes_display (pp_c_base (cxx_pp),\n+\t\t\t\t     TYPE_ATTRIBUTES (sub));\n \t  }\n \tif (TREE_CODE (t) == POINTER_TYPE)\n \t  pp_character(cxx_pp, '*');"}]}