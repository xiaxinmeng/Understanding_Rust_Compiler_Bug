{"sha": "d757eae968da4dee24c728784a65fee9a3bb7d58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDc1N2VhZTk2OGRhNGRlZTI0YzcyODc4NGE2NWZlZTlhM2JiN2Q1OA==", "commit": {"author": {"name": "Matthias Klose", "email": "doko@ubuntu.com", "date": "2012-11-21T03:20:12Z"}, "committer": {"name": "Matthias Klose", "email": "doko@gcc.gnu.org", "date": "2012-11-21T03:20:12Z"}, "message": "configure.ac: Substitute `with_cpu'.\n\n2012-11-20  Matthias Klose  <doko@ubuntu.com>\n\n        * configure.ac: Substitute `with_cpu'.\n        * configure: Regenerate.\n        * Makefile.in: Define `with_cpu'.\n        * config/rs6000/t-linux64: Add multiarch names in MULTILIB_OSDIRNAMES.\n        * config/rs6000/t-linux: New file; define MULTIARCH_DIRNAME.\n        * config/rs6000/t-fprules (SOFT_FLOAT_CPUS): New macro. Add e300c2\n        to the list.\n        (MULTILIB_MATCHES_FLOAT): Define in terms of SOFT_FLOAT_CPUS.\n        * config/rs6000/t-spe: Define MULTIARCH_DIRNAME.\n        * config.gcc <powerpc-*-linux* | powerpc64-*-linux*> (tmake_file):\n        Include rs6000/t-linux for 32bit non-biarch configurations.\n\nFrom-SVN: r193686", "tree": {"sha": "f045923719ecc99aab725410fb75827beb9e545d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f045923719ecc99aab725410fb75827beb9e545d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d757eae968da4dee24c728784a65fee9a3bb7d58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d757eae968da4dee24c728784a65fee9a3bb7d58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d757eae968da4dee24c728784a65fee9a3bb7d58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d757eae968da4dee24c728784a65fee9a3bb7d58/comments", "author": {"login": "doko42", "id": 11258518, "node_id": "MDQ6VXNlcjExMjU4NTE4", "avatar_url": "https://avatars.githubusercontent.com/u/11258518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doko42", "html_url": "https://github.com/doko42", "followers_url": "https://api.github.com/users/doko42/followers", "following_url": "https://api.github.com/users/doko42/following{/other_user}", "gists_url": "https://api.github.com/users/doko42/gists{/gist_id}", "starred_url": "https://api.github.com/users/doko42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doko42/subscriptions", "organizations_url": "https://api.github.com/users/doko42/orgs", "repos_url": "https://api.github.com/users/doko42/repos", "events_url": "https://api.github.com/users/doko42/events{/privacy}", "received_events_url": "https://api.github.com/users/doko42/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f4d9c89a860714058a3aedd8170cd964dce6909e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4d9c89a860714058a3aedd8170cd964dce6909e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4d9c89a860714058a3aedd8170cd964dce6909e"}], "stats": {"total": 49, "additions": 35, "deletions": 14}, "files": [{"sha": "c19eac0867f1f4a2f1733340d09f0e04b9e28130", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -1,3 +1,17 @@\n+2012-11-20  Matthias Klose  <doko@ubuntu.com>\n+\n+\t* configure.ac: Substitute `with_cpu'.\n+\t* configure: Regenerate.\n+\t* Makefile.in: Define `with_cpu'.\n+\t* config/rs6000/t-linux64: Add multiarch names in MULTILIB_OSDIRNAMES.\n+\t* config/rs6000/t-linux: New file; define MULTIARCH_DIRNAME.\n+\t* config/rs6000/t-fprules (SOFT_FLOAT_CPUS): New macro. Add e300c2\n+\tto the list.\n+\t(MULTILIB_MATCHES_FLOAT): Define in terms of SOFT_FLOAT_CPUS.\n+\t* config/rs6000/t-spe: Define MULTIARCH_DIRNAME.\n+\t* config.gcc <powerpc-*-linux* | powerpc64-*-linux*> (tmake_file):\n+\tInclude rs6000/t-linux for 32bit non-biarch configurations.\n+\n 2012-11-20  Matthias Klose  <doko@ubuntu.com>\n \n \t* doc/install.texi: Move multiarch paragraph out of multilib"}, {"sha": "17d5bd3ee355d52d25d06648e4188ec222111fda", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -532,6 +532,7 @@ host_hook_obj=@out_host_hook_obj@\n \n # Multiarch support\n enable_multiarch = @enable_multiarch@\n+with_cpu = @with_cpu@\n with_float = @with_float@\n ifeq ($(enable_multiarch),yes)\n   if_multiarch = $(1)"}, {"sha": "bd9067fd7dca332dbae01db72f5eb6d489827d2a", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -2059,6 +2059,7 @@ powerpc-*-linux* | powerpc64-*-linux*)\n \t\t;;\n \t    *)\n \t\ttm_file=\"${tm_file} rs6000/linux.h glibc-stdint.h\"\n+\t\ttmake_file=\"$tmake_file rs6000/t-linux\"\n \t\t;;\n \tesac\n \tcase ${target} in"}, {"sha": "2674c0ebd9324da04890ee94f27c6cb5d95d3548", "filename": "gcc/config/rs6000/t-fprules", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-fprules", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-fprules", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-fprules?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -16,17 +16,8 @@\n # along with GCC; see the file COPYING3.  If not see\n # <http://www.gnu.org/licenses/>.\n \n-MULTILIB_MATCHES_FLOAT\t= msoft-float=mcpu?401 \\\n-\t\t\t  msoft-float=mcpu?403 \\\n-\t\t\t  msoft-float=mcpu?405 \\\n-\t\t\t  msoft-float=mcpu?440 \\\n-\t\t\t  msoft-float=mcpu?464 \\\n-\t\t\t  msoft-float=mcpu?476 \\\n-\t\t\t  msoft-float=mcpu?ec603e \\\n-\t\t\t  msoft-float=mcpu?801 \\\n-\t\t\t  msoft-float=mcpu?821 \\\n-\t\t\t  msoft-float=mcpu?823 \\\n-\t\t\t  msoft-float=mcpu?860\n+SOFT_FLOAT_CPUS = e300c2 401 403 405 440 464 476 ec603e 801 821 823 860\n+MULTILIB_MATCHES_FLOAT = $(foreach cpu, $(SOFT_FLOAT_CPUS), msoft-float=mcpu?$(cpu))\n \n # Build the libraries for both hard and soft floating point by default\n "}, {"sha": "a9f9865796aa73eb3b696e6d85f7cdf5e8a5aaf5", "filename": "gcc/config/rs6000/t-linux", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-linux?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -0,0 +1,5 @@\n+# do not define the multiarch name if configured for a soft-float cpu\n+# or soft-float.\n+ifeq (,$(filter $(with_cpu),$(SOFT_FLOAT_CPUS))$(findstring soft,$(with_float))\n+MULTIARCH_DIRNAME = powerpc-linux-gnu\n+endif"}, {"sha": "b44f4ea499951e72705b51027e3cc9352c1d005c", "filename": "gcc/config/rs6000/t-linux64", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-linux64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-linux64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-linux64?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -29,4 +29,5 @@\n MULTILIB_OPTIONS        = m64/m32\n MULTILIB_DIRNAMES       = 64 32\n MULTILIB_EXTRA_OPTS     = fPIC\n-MULTILIB_OSDIRNAMES\t= ../lib64 $(if $(wildcard $(shell echo $(SYSTEM_HEADER_DIR))/../../usr/lib32),../lib32,../lib)\n+MULTILIB_OSDIRNAMES\t= ../lib64$(call if_multiarch,:powerpc64-linux-gnu)\n+MULTILIB_OSDIRNAMES    += $(if $(wildcard $(shell echo $(SYSTEM_HEADER_DIR))/../../usr/lib32),../lib32,../lib)$(call if_multiarch,:powerpc-linux-gnu)"}, {"sha": "90eb802a4957f0c9d5b05575f47bdb0761fdb7b5", "filename": "gcc/config/rs6000/t-spe", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-spe", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfig%2Frs6000%2Ft-spe", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-spe?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -71,3 +71,7 @@ MULTILIB_EXCEPTIONS\t= maltivec mabi=altivec mno-spe mabi=no-spe mno-isel \\\n \t\t\t  mabi=altivec/mlittle \\\n \t\t\t  maltivec/mlittle \\\n \t\t\t  maltivec/mabi=altivec/mlittle\n+\n+ifneq (,$(findstring linux, $(target)))\n+MULTIARCH_DIRNAME = powerpc-linux-gnuspe$(if $(findstring rs6000/e500-double.h, $(tm_file)),,v1)\n+endif"}, {"sha": "b16fb3f45bfb19b43a77778bd444dd992c37e5b0", "filename": "gcc/configure", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -766,6 +766,7 @@ enable_shared\n enable_fixed_point\n enable_decimal_float\n with_float\n+with_cpu\n enable_multiarch\n enable_multilib\n coverage_flags\n@@ -7050,6 +7051,7 @@ $as_echo \"$enable_multiarch$ma_msg_suffix\" >&6; }\n # needed for setting the multiarch name for soft-float/hard-float ABIs\n \n \n+\n # Enable __cxa_atexit for C++.\n # Check whether --enable-__cxa_atexit was given.\n if test \"${enable___cxa_atexit+set}\" = set; then :\n@@ -7072,6 +7074,7 @@ else\n \n   case $target in\n     powerpc*-*-linux* | i?86*-*-linux* | x86_64*-*-linux* | s390*-*-linux* | \\\n+    i?86*-*-gnu* | \\\n     i?86*-*-mingw* | x86_64*-*-mingw* | \\\n     i?86*-*-cygwin*)\n       enable_decimal_float=yes\n@@ -17819,7 +17822,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 17822 \"configure\"\n+#line 17825 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -17925,7 +17928,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 17928 \"configure\"\n+#line 17931 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H"}, {"sha": "4878c3567d8b796220b5bbfa2d783bc6dc30715e", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d757eae968da4dee24c728784a65fee9a3bb7d58/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=d757eae968da4dee24c728784a65fee9a3bb7d58", "patch": "@@ -636,6 +636,7 @@ AC_SUBST(enable_multiarch)\n AC_MSG_RESULT($enable_multiarch$ma_msg_suffix)\n \n # needed for setting the multiarch name for soft-float/hard-float ABIs\n+AC_SUBST(with_cpu)\n AC_SUBST(with_float)\n \n # Enable __cxa_atexit for C++."}]}