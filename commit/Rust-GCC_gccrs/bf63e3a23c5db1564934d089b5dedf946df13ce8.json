{"sha": "bf63e3a23c5db1564934d089b5dedf946df13ce8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY2M2UzYTIzYzVkYjE1NjQ5MzRkMDg5YjVkZWRmOTQ2ZGYxM2NlOA==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-05-23T04:34:36Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-05-23T04:34:36Z"}, "message": "h8300.h (CONSTANT_ADDRESS_P): Don't accept CONST or HIGH on the H8/300H.\n\n        * h8300/h8300.h (CONSTANT_ADDRESS_P): Don't accept CONST or HIGH\n        on the H8/300H.\n        * h8300.md: Use \"m\" rather than \"o\" constraint everywhere\n        appropriate.  Cleanup use of \"i\" and \"n\" constraints.\n\nFrom-SVN: r12081", "tree": {"sha": "9bb73254cd549c43e7bb4e81f92b04c5da316211", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9bb73254cd549c43e7bb4e81f92b04c5da316211"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf63e3a23c5db1564934d089b5dedf946df13ce8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf63e3a23c5db1564934d089b5dedf946df13ce8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf63e3a23c5db1564934d089b5dedf946df13ce8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf63e3a23c5db1564934d089b5dedf946df13ce8/comments", "author": null, "committer": null, "parents": [{"sha": "5169bda71da3dd1a076e9fc7eccd06f9d4468ea6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5169bda71da3dd1a076e9fc7eccd06f9d4468ea6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5169bda71da3dd1a076e9fc7eccd06f9d4468ea6"}], "stats": {"total": 56, "additions": 28, "deletions": 28}, "files": [{"sha": "18fc1446478577e22d247a1f15522115f3c8b9bf", "filename": "gcc/config/h8300/h8300.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf63e3a23c5db1564934d089b5dedf946df13ce8/gcc%2Fconfig%2Fh8300%2Fh8300.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf63e3a23c5db1564934d089b5dedf946df13ce8/gcc%2Fconfig%2Fh8300%2Fh8300.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.h?ref=bf63e3a23c5db1564934d089b5dedf946df13ce8", "patch": "@@ -739,8 +739,8 @@ struct rtx_def *function_arg();\n        /* We handle signed and unsigned offsets here.  */\t\\\n        && INTVAL (X) > (TARGET_H8300 ? -0x10000 : -0x1000000)\t\\\n        && INTVAL (X) < (TARGET_H8300 ? 0x10000 : 0x1000000))\t\\\n-   || GET_CODE (X) == CONST\t\t\t\t\t\\\n-   || GET_CODE (X) == HIGH)\n+   || ((GET_CODE (X) == HIGH || GET_CODE (X) == CONST\t\t\\\n+       && TARGET_H8300)))\n \n /* Nonzero if the constant value X is a legitimate general operand.\n    It is given that X satisfies CONSTANT_P or is a CONST_DOUBLE.  */"}, {"sha": "911295ef66f9c72664972319986622532e33bc2a", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 26, "deletions": 26, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf63e3a23c5db1564934d089b5dedf946df13ce8/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf63e3a23c5db1564934d089b5dedf946df13ce8/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=bf63e3a23c5db1564934d089b5dedf946df13ce8", "patch": "@@ -116,8 +116,8 @@\n    (set_attr \"cc\" \"set\")])\n \n (define_insn \"\"\n-  [(set (match_operand:QI 0 \"general_operand_dst\" \"=r,r,<,r,r,o\")\n-\t(match_operand:QI 1 \"general_operand_src\" \"I,r>,r,i,o,r\"))]\n+  [(set (match_operand:QI 0 \"general_operand_dst\" \"=r,r,<,r,r,m\")\n+\t(match_operand:QI 1 \"general_operand_src\" \"I,r>,r,n,m,r\"))]\n   \"register_operand (operands[0],QImode)\n    || register_operand (operands[1], QImode)\"\n   \"@\n@@ -149,7 +149,7 @@\n \n (define_insn \"movstrictqi\"\n   [(set (strict_low_part (match_operand:QI 0 \"general_operand_dst\" \"=r,r,r,r\"))\n-\t\t\t (match_operand:QI 1 \"general_operand_src\" \"I,r,i,o\"))]\n+\t\t\t (match_operand:QI 1 \"general_operand_src\" \"I,r,n,m\"))]\n   \"\"\n   \"@\n    sub.b\t%X0,%X0\n@@ -180,8 +180,8 @@\n    (set_attr \"cc\" \"set\")])\n \n (define_insn \"\"\n-  [(set (match_operand:HI 0 \"general_operand_dst\" \"=r,r,<,r,r,o\")\n-\t(match_operand:HI 1 \"general_operand_src\" \"I,r>,r,i,o,r\"))]\n+  [(set (match_operand:HI 0 \"general_operand_dst\" \"=r,r,<,r,r,m\")\n+\t(match_operand:HI 1 \"general_operand_src\" \"I,r>,r,i,m,r\"))]\n   \"register_operand (operands[0],HImode)\n    || register_operand (operands[1], HImode)\"\n   \"@\n@@ -213,7 +213,7 @@\n \n (define_insn \"movstricthi\"\n   [(set (strict_low_part (match_operand:HI 0 \"general_operand_dst\" \"=r,r,r,r\"))\n-\t\t\t (match_operand:HI 1 \"general_operand_src\" \"I,r,i,o\"))]\n+\t\t\t (match_operand:HI 1 \"general_operand_src\" \"I,r,i,m\"))]\n   \"\"\n   \"@\n    sub.w\t%T0,%T0\n@@ -396,8 +396,8 @@\n    (set_attr \"cc\" \"clobber\")])\n \n (define_insn \"movsi_h8300h\"\n-  [(set (match_operand:SI 0 \"general_operand_dst\" \"=r,r,r,o,<,r\")\n-\t(match_operand:SI 1 \"general_operand_src\" \"I,r,io,r,r,>\"))]\n+  [(set (match_operand:SI 0 \"general_operand_dst\" \"=r,r,r,m,<,r\")\n+\t(match_operand:SI 1 \"general_operand_src\" \"I,r,im,r,r,>\"))]\n   \"TARGET_H8300H\n    && (register_operand (operands[0], SImode)\n        || register_operand (operands[1], SImode))\"\n@@ -437,8 +437,8 @@\n    (set_attr \"cc\" \"set_zn_c0,set,set,set,set,set\")])\n \n (define_insn \"movsf_h8300h\"\n-  [(set (match_operand:SF 0 \"general_operand_dst\" \"=r,r,r,o,<,r\")\n-\t(match_operand:SF 1 \"general_operand_src\" \"I,r,io,r,r,>\"))]\n+  [(set (match_operand:SF 0 \"general_operand_dst\" \"=r,r,r,m,<,r\")\n+\t(match_operand:SF 1 \"general_operand_src\" \"I,r,im,r,r,>\"))]\n   \"TARGET_H8300H\n    && (register_operand (operands[0], SFmode)\n        || register_operand (operands[1], SFmode))\"\n@@ -534,7 +534,7 @@\n (define_insn \"cmpqi\"\n   [(set (cc0)\n \t(compare:QI (match_operand:QI 0 \"register_operand\" \"r\")\n-\t\t    (match_operand:QI 1 \"nonmemory_operand\" \"ri\")))]\n+\t\t    (match_operand:QI 1 \"nonmemory_operand\" \"rn\")))]\n   \"\"\n   \"cmp.b\t%X1,%X0\"\n   [(set_attr \"length\" \"2\")\n@@ -565,7 +565,7 @@\n (define_insn \"\"\n   [(set (cc0)\n \t(compare:HI (match_operand:HI 0 \"register_operand\" \"r,r\")\n-\t\t    (match_operand:HI 1 \"nonmemory_operand\" \"r,i\")))]\n+\t\t    (match_operand:HI 1 \"nonmemory_operand\" \"r,n\")))]\n   \"TARGET_H8300H\"\n   \"cmp.w\t%T1,%T0\"\n   [(set_attr \"length\" \"2,4\")\n@@ -587,7 +587,7 @@\n (define_insn \"addqi3\"\n   [(set (match_operand:QI 0 \"register_operand\" \"=r\")\n \t(plus:QI (match_operand:QI 1 \"register_operand\" \"%0\")\n-\t\t (match_operand:QI 2 \"nonmemory_operand\" \"ri\")))]\n+\t\t (match_operand:QI 2 \"nonmemory_operand\" \"rn\")))]\n   \"\"\n   \"add.b\t%X2,%X0\"\n   [(set_attr \"length\" \"2\")\n@@ -605,7 +605,7 @@\n (define_insn \"\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n \t(plus:HI (match_operand:HI 1 \"register_operand\" \"%0\")\n-\t\t (match_operand:HI 2 \"adds_subs_operand\" \"i\")))]\n+\t\t (match_operand:HI 2 \"adds_subs_operand\" \"n\")))]\n   \"\"\n   \"* return output_adds_subs (operands);\"\n   [(set_attr \"cc\" \"none_0hit\")\n@@ -630,7 +630,7 @@\n (define_insn \"\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r,r\")\n \t(plus:HI (match_operand:HI 1 \"register_operand\" \"%0,0\")\n-\t\t (match_operand:HI 2 \"nonmemory_operand\" \"i,r\")))]\n+\t\t (match_operand:HI 2 \"nonmemory_operand\" \"n,r\")))]\n   \"TARGET_H8300H\"\n   \"@\n    add.w\t%T2,%T0\n@@ -650,7 +650,7 @@\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n \t(plus:SI (match_operand:SI 1 \"register_operand\" \"%0\")\n-\t\t (match_operand:SI 2 \"adds_subs_operand\" \"i\")))]\n+\t\t (match_operand:SI 2 \"adds_subs_operand\" \"n\")))]\n   \"TARGET_H8300H\"\n   \"* return output_adds_subs (operands);\"\n   [(set_attr \"cc\" \"none_0hit\")\n@@ -690,7 +690,7 @@\n (define_insn \"subqi3\"\n   [(set (match_operand:QI 0 \"register_operand\" \"=r,r\")\n \t(minus:QI (match_operand:QI 1 \"register_operand\" \"0,0\")\n-\t\t  (match_operand:QI 2 \"nonmemory_operand\" \"r,i\")))]\n+\t\t  (match_operand:QI 2 \"nonmemory_operand\" \"r,n\")))]\n   \"\"\n   \"@\n    sub.b\t%X2,%X0\n@@ -711,7 +711,7 @@\n (define_insn \"\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n \t(minus:HI (match_operand:HI 1 \"register_operand\" \"r\")\n-\t\t  (match_operand:HI 2 \"adds_subs_operand\" \"i\")))]\n+\t\t  (match_operand:HI 2 \"adds_subs_operand\" \"n\")))]\n   \"\"\n   \"*\n {\n@@ -739,7 +739,7 @@\n (define_insn \"\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=r,&r\")\n \t(minus:HI (match_operand:HI 1 \"general_operand\" \"0,0\")\n-\t\t  (match_operand:HI 2 \"nonmemory_operand\" \"r,i\")))]\n+\t\t  (match_operand:HI 2 \"nonmemory_operand\" \"r,n\")))]\n   \"TARGET_H8300H\"\n   \"@\n    sub.w\t%T2,%T0\n@@ -769,7 +769,7 @@\n (define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n \t(minus:SI (match_operand:SI 1 \"general_operand\" \"0\")\n-\t\t  (match_operand:SI 2 \"adds_subs_operand\" \"i\")))]\n+\t\t  (match_operand:SI 2 \"adds_subs_operand\" \"n\")))]\n   \"TARGET_H8300H\"\n   \"*\n {\n@@ -1890,7 +1890,7 @@\n   [(set (match_operand:HI 0 \"register_operand\" \"=&r\")\n \t(zero_extract:HI (match_operand:HI 1 \"register_operand\" \"r\")\n \t\t\t (const_int 1)\n-\t\t\t (match_operand:HI 2 \"immediate_operand\" \"i\")))]\n+\t\t\t (match_operand:HI 2 \"immediate_operand\" \"n\")))]\n   \"\"\n   \"sub.w\t%0,%0\\;bld\t%Z2,%Y1\\;bst\t#0,%X0\"\n   [(set_attr \"cc\" \"clobber\")\n@@ -1901,7 +1901,7 @@\n \t(subreg:HI (zero_extract:SI\n \t\t     (match_operand:HI 1 \"register_operand\" \"r\")\n \t\t     (const_int 1)\n-\t\t     (match_operand:HI 2 \"immediate_operand\" \"i\")) 1))]\n+\t\t     (match_operand:HI 2 \"immediate_operand\" \"n\")) 1))]\n   \"\"\n   \"sub.w\t%0,%0\\;bld\t%Z2,%Y1\\;bst\t#0,%X0\"\n   [(set_attr \"cc\" \"clobber\")\n@@ -2133,7 +2133,7 @@\n (define_insn \"\"\n   [(set (zero_extract:HI (match_operand:HI 0 \"register_operand\" \"+r\")\n \t\t\t (const_int 1)\n-\t\t\t (match_operand:HI 1 \"immediate_operand\" \"i\"))\n+\t\t\t (match_operand:HI 1 \"immediate_operand\" \"n\"))\n \t(match_operand:HI 2 \"register_operand\" \"r\"))]\n   \"\"\n   \"bld\t#0,%R2\\;bst\t%Z1,%Y0 ; i1\"\n@@ -2164,7 +2164,7 @@\n \t(match_operator:HI 4 \"bit_operator\"\n \t   [(zero_extract:HI (match_operand:HI 1 \"register_operand\" \"r\")\n \t\t\t     (const_int 1)\n-\t\t\t     (match_operand:HI 2 \"immediate_operand\" \"i\"))\n+\t\t\t     (match_operand:HI 2 \"immediate_operand\" \"n\"))\n \t    (match_operand:HI 3 \"bit_operand\" \"0\")]))]\n   \"\"\n   \"bld\t%Z2,%Y1\\;%b4\t#0,%R0\\;bst\t#0,%R0; bl1\"\n@@ -2176,10 +2176,10 @@\n \t(match_operator:HI 5 \"bit_operator\"\n \t   [(zero_extract:HI (match_operand:HI 1 \"register_operand\" \"r\")\n \t\t\t     (const_int 1)\n-\t\t\t     (match_operand:HI 2 \"immediate_operand\" \"i\"))\n+\t\t\t     (match_operand:HI 2 \"immediate_operand\" \"n\"))\n \t    (zero_extract:HI (match_operand:HI 3 \"register_operand\" \"r\")\n \t\t\t     (const_int 1)\n-\t\t\t     (match_operand:HI 4 \"immediate_operand\" \"i\"))]))]\n+\t\t\t     (match_operand:HI 4 \"immediate_operand\" \"n\"))]))]\n   \"\"\n   \"bld\t%Z2,%Y1\\;%b5\t%Z4,%Y3\\;bst\t#0,%R0; bl3\"\n   [(set_attr \"cc\" \"clobber\")"}]}