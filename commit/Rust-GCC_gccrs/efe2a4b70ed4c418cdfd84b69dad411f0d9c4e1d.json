{"sha": "efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWZlMmE0YjcwZWQ0YzQxOGNkZmQ4NGI2OWRhZDQxMWYwZDljNGUxZA==", "commit": {"author": {"name": "Peter Bergner", "email": "bergner@vnet.ibm.com", "date": "2012-04-02T18:29:22Z"}, "committer": {"name": "Peter Bergner", "email": "bergner@gcc.gnu.org", "date": "2012-04-02T18:29:22Z"}, "message": "ffi.c (ffi_prep_args_SYSV): Declare double_tmp.\n\n\t* src/powerpc/ffi.c (ffi_prep_args_SYSV): Declare double_tmp.\n\tSilence casting pointer to integer of different size warning.\n\tDelete goto to previously deleted label.\n\t(ffi_call): Silence possibly undefined warning.\n\t(ffi_closure_helper_SYSV): Declare variable type.\n\nFrom-SVN: r186091", "tree": {"sha": "bfaedac23d1acff7885c30d0f190a65996d1a6ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bfaedac23d1acff7885c30d0f190a65996d1a6ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d/comments", "author": {"login": "peter-bergner", "id": 17504345, "node_id": "MDQ6VXNlcjE3NTA0MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter-bergner", "html_url": "https://github.com/peter-bergner", "followers_url": "https://api.github.com/users/peter-bergner/followers", "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}", "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions", "organizations_url": "https://api.github.com/users/peter-bergner/orgs", "repos_url": "https://api.github.com/users/peter-bergner/repos", "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}", "received_events_url": "https://api.github.com/users/peter-bergner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "24590f6607cdf19ef42d650ed1a8e6c66d2ef574", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24590f6607cdf19ef42d650ed1a8e6c66d2ef574", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24590f6607cdf19ef42d650ed1a8e6c66d2ef574"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "4f514f9f99903a8de379a0328254ea97a4b410ed", "filename": "libffi/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d", "patch": "@@ -1,3 +1,11 @@\n+2012-04-02  Peter Bergner  <bergner@vnet.ibm.com>\n+\n+\t* src/powerpc/ffi.c (ffi_prep_args_SYSV): Declare double_tmp.\n+\tSilence casting pointer to integer of different size warning.\n+\tDelete goto to previously deleted label.\n+\t(ffi_call): Silence possibly undefined warning.\n+\t(ffi_closure_helper_SYSV): Declare variable type.\n+\n 2012-03-13  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n \t* src/sh/ffi.c (ffi_prep_closure_loc): Don't ASSERT ABI test,"}, {"sha": "baca69448feb70b7d731e17da1d1f3aaf29daa3a", "filename": "libffi/src/powerpc/ffi.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fpowerpc%2Fffi.c?ref=efe2a4b70ed4c418cdfd84b69dad411f0d9c4e1d", "patch": "@@ -146,6 +146,7 @@ ffi_prep_args_SYSV (extended_cif *ecif, unsigned *const stack)\n   gpr_base.u = stacktop.u - ASM_NEEDS_REGISTERS - NUM_GPR_ARG_REGISTERS;\n   intarg_count = 0;\n #ifndef __NO_FPRS__\n+  double double_tmp;\n   fpr_base.d = gpr_base.d - NUM_FPR_ARG_REGISTERS;\n   fparg_count = 0;\n   copy_space.c = ((flags & FLAG_FP_ARGUMENTS) ? fpr_base.c : gpr_base.c);\n@@ -155,9 +156,9 @@ ffi_prep_args_SYSV (extended_cif *ecif, unsigned *const stack)\n   next_arg.u = stack + 2;\n \n   /* Check that everything starts aligned properly.  */\n-  FFI_ASSERT (((unsigned) (char *) stack & 0xF) == 0);\n-  FFI_ASSERT (((unsigned) copy_space.c & 0xF) == 0);\n-  FFI_ASSERT (((unsigned) stacktop.c & 0xF) == 0);\n+  FFI_ASSERT (((unsigned long) (char *) stack & 0xF) == 0);\n+  FFI_ASSERT (((unsigned long) copy_space.c & 0xF) == 0);\n+  FFI_ASSERT (((unsigned long) stacktop.c & 0xF) == 0);\n   FFI_ASSERT ((bytes & 0xF) == 0);\n   FFI_ASSERT (copy_space.c >= next_arg.c);\n \n@@ -211,8 +212,6 @@ ffi_prep_args_SYSV (extended_cif *ecif, unsigned *const stack)\n \n \tcase FFI_TYPE_DOUBLE:\n \t  /* With FFI_LINUX_SOFT_FLOAT doubles are handled like UINT64.  */\n-\t  if (ecif->cif->abi == FFI_LINUX_SOFT_FLOAT)\n-\t    goto soft_double_prep;\n \t  double_tmp = **p_argv.d;\n \n \t  if (fparg_count >= NUM_FPR_ARG_REGISTERS)\n@@ -925,7 +924,7 @@ ffi_call(ffi_cif *cif, void (*fn)(void), void *rvalue, void **avalue)\n    */\n   unsigned int smst_buffer[2];\n   extended_cif ecif;\n-  unsigned int rsize;\n+  unsigned int rsize = 0;\n \n   ecif.cif = cif;\n   ecif.avalue = avalue;\n@@ -1132,7 +1131,7 @@ ffi_closure_helper_SYSV (ffi_closure *closure, void *rvalue,\n \n \t  if (nf < 8)\n \t    {\n-\t      temp = pfr->d;\n+\t      double temp = pfr->d;\n \t      pfr->f = (float) temp;\n \t      avalue[i] = pfr;\n \t      nf++;"}]}