{"sha": "471a0d47ae10724631be478381821544932db99f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDcxYTBkNDdhZTEwNzI0NjMxYmU0NzgzODE4MjE1NDQ5MzJkYjk5Zg==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2016-09-19T10:02:56Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@gcc.gnu.org", "date": "2016-09-19T10:02:56Z"}, "message": "Fix zero-length parameter bug in pex_run.\n\n2016-09-19  Andrew Stubbs  <ams@codesourcery.com>\n\n\tlibiberty/\n\t* pex-win32.c (argv_to_cmdline): Quote zero-length parameters.\n\n\tlibiberty/testsuite/\n\t* test-pexecute.c (main): Insert check for zero-length parameters.\n\nFrom-SVN: r240229", "tree": {"sha": "25eb5fbad302b98d985cc4c7ec67c84c7fbe74b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25eb5fbad302b98d985cc4c7ec67c84c7fbe74b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/471a0d47ae10724631be478381821544932db99f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/471a0d47ae10724631be478381821544932db99f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/471a0d47ae10724631be478381821544932db99f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/471a0d47ae10724631be478381821544932db99f/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "321e76fbf83720a7d88948d3e157ea9097e099ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/321e76fbf83720a7d88948d3e157ea9097e099ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/321e76fbf83720a7d88948d3e157ea9097e099ad"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "5934bc1fa8a3325842902256183c5a918ce201c6", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/471a0d47ae10724631be478381821544932db99f/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/471a0d47ae10724631be478381821544932db99f/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=471a0d47ae10724631be478381821544932db99f", "patch": "@@ -1,3 +1,8 @@\n+2016-09-19  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* pex-win32.c (argv_to_cmdline): Quote zero-length parameters.\n+\t* testsuite/test-pexecute.c (main): Insert check for zero-length parameters.\n+\n 2016-09-10  Mark Wielaard  <mjw@redhat.com>\n \n \t* cp-demangle.c (d_substitution): Change struct demangle_component"}, {"sha": "4c15b0d11a0e0b89ec3e188b57020b55aebed8dc", "filename": "libiberty/pex-win32.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/471a0d47ae10724631be478381821544932db99f/libiberty%2Fpex-win32.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/471a0d47ae10724631be478381821544932db99f/libiberty%2Fpex-win32.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fpex-win32.c?ref=471a0d47ae10724631be478381821544932db99f", "patch": "@@ -370,6 +370,8 @@ argv_to_cmdline (char *const *argv)\n \t      cmdline_len++;\n \t    }\n \t}\n+      if (j == 0)\n+\tneeds_quotes = 1;\n       /* Trailing backslashes also need to be escaped because they will be\n          followed by the terminating quote.  */\n       if (needs_quotes)\n@@ -394,6 +396,8 @@ argv_to_cmdline (char *const *argv)\n               break;\n             }\n         }\n+      if (j == 0)\n+\tneeds_quotes = 1;\n \n       if (needs_quotes)\n         {"}, {"sha": "f62239d49b8d40dfcadb37400da929afa3c96cad", "filename": "libiberty/testsuite/test-pexecute.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/471a0d47ae10724631be478381821544932db99f/libiberty%2Ftestsuite%2Ftest-pexecute.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/471a0d47ae10724631be478381821544932db99f/libiberty%2Ftestsuite%2Ftest-pexecute.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Ftest-pexecute.c?ref=471a0d47ae10724631be478381821544932db99f", "patch": "@@ -285,6 +285,20 @@ main (int argc, char **argv)\n     ERROR (\"echo exit status failed\");\n   pex_free (pex1);\n \n+  /* Check empty parameters don't get lost.  */\n+  pex1 = TEST_PEX_INIT (PEX_USE_PIPES, \"temp\");\n+  subargv[1] = \"echo\";\n+  subargv[2] = \"foo\";\n+  subargv[3] = \"\";\n+  subargv[4] = \"bar\";\n+  subargv[5] = NULL;\n+  TEST_PEX_RUN (pex1, 0, \"./test-pexecute\", subargv, NULL, NULL);\n+  e = TEST_PEX_READ_OUTPUT (pex1);\n+  CHECK_LINE (e, \"foo  bar\");  /* Two spaces!  */\n+  if (TEST_PEX_GET_STATUS_1 (pex1) != 0)\n+    ERROR (\"echo exit status failed\");\n+  pex_free (pex1);\n+\n   pex1 = TEST_PEX_INIT (PEX_USE_PIPES, \"temp\");\n   subargv[1] = \"echo\";\n   subargv[2] = \"bar\";"}]}