{"sha": "f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI1OGU1ZTUzMWYzOTFlMWVjN2U2MmY5MjI1ZThiMjZiN2ZjMTdhYw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2008-07-14T21:25:27Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2008-07-14T21:25:27Z"}, "message": "i386.md (sse5 cmov pattern): Update call of ix86_sse5_valid_op_p\n\n\t* i386.md (sse5 cmov pattern): Update call of ix86_sse5_valid_op_p\n\t* sse.md (sse5 patterns): Update call of ix86_sse5_valid_op_p;\n\tfix predicates and constraints.\n\t* i386.c (ix86_sse5_valid_op_p): Add commutative parameter.\n\t* i386-protos.h (ix86_sse5_valid_op_p): Update declaration.\n\nFrom-SVN: r137800", "tree": {"sha": "cd13e2c119f2d4a314c1444b4c18664aa6454d56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd13e2c119f2d4a314c1444b4c18664aa6454d56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/comments", "author": null, "committer": null, "parents": [{"sha": "8abc1906c0af753560cc0233b0c1d112826396fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8abc1906c0af753560cc0233b0c1d112826396fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8abc1906c0af753560cc0233b0c1d112826396fc"}], "stats": {"total": 165, "additions": 89, "deletions": 76}, "files": [{"sha": "2c9f3cc2595ca2cf57ba927baa9376a637be4a40", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "patch": "@@ -1,3 +1,11 @@\n+2008-07-14  Jan Hubicka  <jh@suse.cz>\n+\n+\t* i386.md (sse5 cmov pattern): Update call of ix86_sse5_valid_op_p\n+\t* sse.md (sse5 patterns): Update call of ix86_sse5_valid_op_p;\n+\tfix predicates and constraints.\n+\t* i386.c (ix86_sse5_valid_op_p): Add commutative parameter.\n+\t* i386-protos.h (ix86_sse5_valid_op_p): Update declaration.\n+\n 2008-07-14  Doug Kwan  <dougkwan@google.com>\n \n \t* config.gcc (arm*-*-eabi*): Include arm/eabi.h and use"}, {"sha": "634a4254f06260ef8dbc0c35c7f4482343c4fdb9", "filename": "gcc/config/i386/i386-protos.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fi386-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fi386-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-protos.h?ref=f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "patch": "@@ -212,7 +212,7 @@ extern void ix86_expand_vector_set (bool, rtx, rtx, int);\n extern void ix86_expand_vector_extract (bool, rtx, rtx, int);\n extern void ix86_expand_reduc_v4sf (rtx (*)(rtx, rtx, rtx), rtx, rtx);\n \n-extern bool ix86_sse5_valid_op_p (rtx [], rtx, int, bool, int);\n+extern bool ix86_sse5_valid_op_p (rtx [], rtx, int, bool, int, bool);\n extern void ix86_expand_sse5_multiple_memory (rtx [], int, enum machine_mode);\n \n /* In winnt.c  */"}, {"sha": "b63deb834bf075a1f0977bbede057cd882ca66e3", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "patch": "@@ -25853,11 +25853,12 @@ ix86_expand_round (rtx operand0, rtx operand1)\n    OPERANDS is the array of operands.\n    NUM is the number of operands.\n    USES_OC0 is true if the instruction uses OC0 and provides 4 variants.\n-   NUM_MEMORY is the maximum number of memory operands to accept.  */\n+   NUM_MEMORY is the maximum number of memory operands to accept.  \n+   when COMMUTATIVE is set, operand 1 and 2 can be swapped.  */\n \n bool\n ix86_sse5_valid_op_p (rtx operands[], rtx insn ATTRIBUTE_UNUSED, int num,\n-\t\t      bool uses_oc0, int num_memory)\n+\t\t      bool uses_oc0, int num_memory, bool commutative)\n {\n   int mem_mask;\n   int mem_count;\n@@ -25941,6 +25942,8 @@ ix86_sse5_valid_op_p (rtx operands[], rtx insn ATTRIBUTE_UNUSED, int num,\n \n       /* format, example pmacsdd:\n \t xmm1, xmm2, xmm3/mem, xmm1 */\n+      if (commutative)\n+\treturn (mem_mask == (1 << 2) || mem_mask == (1 << 1));\n       else\n \treturn (mem_mask == (1 << 2));\n     }\n@@ -25975,6 +25978,8 @@ ix86_sse5_valid_op_p (rtx operands[], rtx insn ATTRIBUTE_UNUSED, int num,\n \n          For the integer multiply/add instructions be more restrictive and\n          require operands[2] and operands[3] to be the memory operands.  */\n+      if (commutative)\n+\treturn (mem_mask == ((1 << 1) | (1 << 3)) || ((1 << 2) | (1 << 3)));\n       else\n \treturn (mem_mask == ((1 << 2) | (1 << 3)));\n     }"}, {"sha": "45e5595fab25d231065d39e5ae5b013e9c4b2234", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "patch": "@@ -19508,7 +19508,7 @@\n \t  (match_operand:MODEF 1 \"register_operand\" \"x,0\")\n \t  (match_operand:MODEF 2 \"register_operand\" \"0,x\")\n \t  (match_operand:MODEF 3 \"register_operand\" \"x,x\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"pcmov\\t{%1, %3, %2, %0|%0, %2, %3, %1}\"\n   [(set_attr \"type\" \"sse4arg\")])\n "}, {"sha": "c1d306054ad0523d39dc13184f7bc3f54018a879", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 72, "deletions": 72, "changes": 144, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f258e5e531f391e1ec7e62f9225e8b26b7fc17ac/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=f258e5e531f391e1ec7e62f9225e8b26b7fc17ac", "patch": "@@ -868,7 +868,7 @@\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"xm,x,0,0\")))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, true)\"\n   \"fmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -882,8 +882,8 @@\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"\")))]\n   \"TARGET_SSE5\n-   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\n+   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, true)\n    && !reg_mentioned_p (operands[0], operands[1])\n    && !reg_mentioned_p (operands[0], operands[2])\n    && !reg_mentioned_p (operands[0], operands[3])\"\n@@ -909,7 +909,7 @@\n \t (match_dup 1)\n \t (const_int 1)))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\"\n   \"fmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -924,7 +924,7 @@\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"xm,x,0,0\")))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, true)\"\n   \"fmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -938,8 +938,8 @@\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"\")))]\n   \"TARGET_SSE5\n-   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\n+   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, true)\n    && !reg_mentioned_p (operands[0], operands[1])\n    && !reg_mentioned_p (operands[0], operands[2])\n    && !reg_mentioned_p (operands[0], operands[3])\"\n@@ -965,7 +965,7 @@\n \t (match_dup 1)\n \t (const_int 1)))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"fmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -982,7 +982,7 @@\n \t  (match_operand:SSEMODEF4 1 \"nonimmediate_operand\" \"%0,0,x,xm\")\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, true)\"\n   \"fnmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -996,8 +996,8 @@\n \t  (match_operand:SSEMODEF4 1 \"nonimmediate_operand\" \"\")\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"\"))))]\n   \"TARGET_SSE5\n-   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\n+   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, true)\n    && !reg_mentioned_p (operands[0], operands[1])\n    && !reg_mentioned_p (operands[0], operands[2])\n    && !reg_mentioned_p (operands[0], operands[3])\"\n@@ -1023,7 +1023,7 @@\n \t (match_dup 1)\n \t (const_int 1)))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\"\n   \"fnmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1040,7 +1040,7 @@\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"x,xm\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"xm,x\")))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, false)\"\n   \"fnmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1055,8 +1055,8 @@\n \t  (match_operand:SSEMODEF4 2 \"nonimmediate_operand\" \"\"))\n \t (match_operand:SSEMODEF4 3 \"nonimmediate_operand\" \"\")))]\n   \"TARGET_SSE5\n-   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\n+   && !ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, false)\n    && !reg_mentioned_p (operands[0], operands[1])\n    && !reg_mentioned_p (operands[0], operands[2])\n    && !reg_mentioned_p (operands[0], operands[3])\"\n@@ -1083,7 +1083,7 @@\n \t (match_dup 1)\n \t (const_int 1)))]\n   \"TARGET_SSE5 && TARGET_FUSED_MADD\n-   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2)\"\n+   && ix86_sse5_valid_op_p (operands, insn, 4, true, 2, false)\"\n   \"fnmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1121,7 +1121,7 @@\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))\n \t   (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x,0,0\"))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\"\n   \"fmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1151,11 +1151,11 @@\n \t(unspec:SSEMODEF2P\n \t [(minus:SSEMODEF2P\n \t   (mult:SSEMODEF2P\n-\t    (match_operand:SSEMODEF2P 1 \"register_operand\" \"%0,0,x,xm\")\n+\t    (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"%0,0,x,xm\")\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))\n \t   (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x,0,0\"))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\"\n   \"fmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1191,7 +1191,7 @@\n \t    (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"%0,0,x,xm\")\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm,xm,x\")))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\"\n   \"fnmadd<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1224,11 +1224,11 @@\n \t [(minus:SSEMODEF2P\n \t   (mult:SSEMODEF2P\n \t    (neg:SSEMODEF2P\n-\t     (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"%0,0,x,xm\"))\n+\t     (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"0,0,x,xm\"))\n \t    (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))\n \t   (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x,0,0\"))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"fnmsub<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -1271,7 +1271,7 @@\n \t   (match_dup 0)\n \t   (const_int 0))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"fmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -1305,13 +1305,13 @@\n \t [(vec_merge:SSEMODEF2P\n \t   (minus:SSEMODEF2P\n \t    (mult:SSEMODEF2P\n-\t     (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"0,0\")\n+\t     (match_operand:SSEMODEF2P 1 \"register_operand\" \"0,0\")\n \t     (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm\"))\n \t    (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))\n \t   (match_dup 1)\n \t   (const_int 1))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"fmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -1347,12 +1347,12 @@\n \t   (minus:SSEMODEF2P\n \t    (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\")\n \t    (mult:SSEMODEF2P\n-\t     (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"0,0\")\n+\t     (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"%0,0\")\n \t     (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm\")))\n \t   (match_dup 1)\n \t   (const_int 1))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, true)\"\n   \"fnmadd<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -1388,13 +1388,13 @@\n \t   (minus:SSEMODEF2P\n \t    (mult:SSEMODEF2P\n \t     (neg:SSEMODEF2P\n-\t      (match_operand:SSEMODEF2P 1 \"nonimmediate_operand\" \"0,0\"))\n+\t      (match_operand:SSEMODEF2P 1 \"register_operand\" \"0,0\"))\n \t     (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm\"))\n \t    (match_operand:SSEMODEF2P 3 \"nonimmediate_operand\" \"xm,x\"))\n \t   (match_dup 1)\n \t   (const_int 1))]\n \t UNSPEC_SSE5_INTRINSIC))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"fnmsub<ssemodesuffixf2s>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<ssescalarmode>\")])\n@@ -6842,10 +6842,10 @@\n   [(set (match_operand:V8HI 0 \"register_operand\" \"=x,x,x\")\n         (plus:V8HI\n \t (mult:V8HI\n-\t  (match_operand:V8HI 1 \"nonimmediate_operand\" \"%x,x,m\")\n-\t  (match_operand:V8HI 2 \"nonimmediate_operand\" \"x,m,x\"))\n-\t (match_operand:V8HI 3 \"nonimmediate_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 2)\"\n+\t  (match_operand:V8HI 1 \"nonimmediate_operand\" \"%x,x,xm\")\n+\t  (match_operand:V8HI 2 \"nonimmediate_operand\" \"x,xm,x\"))\n+\t (match_operand:V8HI 3 \"register_operand\" \"0,0,0\")))]\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 2, true)\"\n   \"@\n    pmacsww\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacsww\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -6861,8 +6861,8 @@\n \t\t    (match_operand:V8HI 2 \"nonimmediate_operand\" \"\"))\n \t (match_operand:V8HI 3 \"nonimmediate_operand\" \"\")))]\n   \"TARGET_SSE5\n-   && !ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\n-   && ix86_sse5_valid_op_p (operands, insn, 4, false, 2)\n+   && !ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\n+   && ix86_sse5_valid_op_p (operands, insn, 4, false, 2, true)\n    && !reg_mentioned_p (operands[0], operands[1])\n    && !reg_mentioned_p (operands[0], operands[2])\n    && !reg_mentioned_p (operands[0], operands[3])\"\n@@ -6879,8 +6879,8 @@\n         (ss_plus:V8HI\n \t (mult:V8HI (match_operand:V8HI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t\t    (match_operand:V8HI 2 \"nonimmediate_operand\" \"x,m,x\"))\n-\t (match_operand:V8HI 3 \"nonimmediate_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+\t (match_operand:V8HI 3 \"register_operand\" \"0,0,0\")))]\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacssww\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacssww\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -6898,8 +6898,8 @@\n \t (mult:V4SI\n \t  (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t  (match_operand:V4SI 2 \"nonimmediate_operand\" \"x,m,x\"))\n-\t (match_operand:V4SI 3 \"nonimmediate_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 2)\"\n+\t (match_operand:V4SI 3 \"register_operand\" \"0,0,0\")))]\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 2, true)\"\n   \"@\n    pmacsdd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacsdd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -6915,8 +6915,8 @@\n \t\t    (match_operand:V4SI 2 \"nonimmediate_operand\" \"\"))\n \t (match_operand:V4SI 3 \"nonimmediate_operand\" \"\")))]\n   \"TARGET_SSE5\n-   && !ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\n-   && ix86_sse5_valid_op_p (operands, insn, 4, false, 2)\n+   && !ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\n+   && ix86_sse5_valid_op_p (operands, insn, 4, false, 2, true)\n    && !reg_mentioned_p (operands[0], operands[1])\n    && !reg_mentioned_p (operands[0], operands[2])\n    && !reg_mentioned_p (operands[0], operands[3])\"\n@@ -6933,8 +6933,8 @@\n         (ss_plus:V4SI\n \t (mult:V4SI (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t\t    (match_operand:V4SI 2 \"nonimmediate_operand\" \"x,m,x\"))\n-\t (match_operand:V4SI 3 \"nonimmediate_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+\t (match_operand:V4SI 3 \"register_operand\" \"0,0,0\")))]\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacssdd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacssdd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -6948,15 +6948,15 @@\n \t (mult:V2DI\n \t  (sign_extend:V2DI\n \t   (vec_select:V2SI\n-\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)])))\n \t   (vec_select:V2SI\n \t    (match_operand:V4SI 2 \"nonimmediate_operand\" \"x,m,x\")\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)])))\n \t (match_operand:V2DI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacssdql\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacssdql\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -6970,7 +6970,7 @@\n \t (mult:V2DI\n \t  (sign_extend:V2DI\n \t   (vec_select:V2SI\n-\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 0)\n \t\t       (const_int 2)])))\n \t  (sign_extend:V2DI\n@@ -6979,7 +6979,7 @@\n \t    (parallel [(const_int 0)\n \t\t       (const_int 2)]))))\n \t (match_operand:V2DI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacssdqh\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacssdqh\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -6993,7 +6993,7 @@\n \t (mult:V2DI\n \t  (sign_extend:V2DI\n \t   (vec_select:V2SI\n-\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)])))\n \t  (sign_extend:V2DI\n@@ -7002,7 +7002,7 @@\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)]))))\n \t (match_operand:V2DI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacsdql\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacsdql\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -7016,7 +7016,7 @@\n \t (mult:V2DI\n \t  (sign_extend:V2DI\n \t   (vec_select:V2SI\n-\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)])))\n \t  (sign_extend:V2DI\n@@ -7025,7 +7025,7 @@\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)]))))\n \t (match_operand:V2DI 3 \"memory_operand\" \"m,m,m\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, -1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, -1, true)\"\n   \"#\"\n   \"&& (reload_completed\n        || (!reg_mentioned_p (operands[0], operands[1])\n@@ -7097,7 +7097,7 @@\n \t (mult:V2DI\n \t  (sign_extend:V2DI\n \t   (vec_select:V2SI\n-\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 0)\n \t\t       (const_int 2)])))\n \t  (sign_extend:V2DI\n@@ -7106,7 +7106,7 @@\n \t    (parallel [(const_int 0)\n \t\t       (const_int 2)]))))\n \t (match_operand:V2DI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacsdqh\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacsdqh\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -7120,7 +7120,7 @@\n \t (mult:V2DI\n \t  (sign_extend:V2DI\n \t   (vec_select:V2SI\n-\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V4SI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 0)\n \t\t       (const_int 2)])))\n \t  (sign_extend:V2DI\n@@ -7129,7 +7129,7 @@\n \t    (parallel [(const_int 0)\n \t\t       (const_int 2)]))))\n \t (match_operand:V2DI 3 \"memory_operand\" \"m,m,m\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, -1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, -1, true)\"\n   \"#\"\n   \"&& (reload_completed\n        || (!reg_mentioned_p (operands[0], operands[1])\n@@ -7202,7 +7202,7 @@\n \t (mult:V4SI\n \t  (sign_extend:V4SI\n \t   (vec_select:V4HI\n-\t    (match_operand:V8HI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V8HI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)\n \t\t       (const_int 5)\n@@ -7215,7 +7215,7 @@\n \t\t       (const_int 5)\n \t\t       (const_int 7)]))))\n \t (match_operand:V4SI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacsswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacsswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -7229,7 +7229,7 @@\n \t (mult:V4SI\n \t  (sign_extend:V4SI\n \t   (vec_select:V4HI\n-\t    (match_operand:V8HI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t    (match_operand:V8HI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t    (parallel [(const_int 1)\n \t\t       (const_int 3)\n \t\t       (const_int 5)\n@@ -7242,7 +7242,7 @@\n \t\t       (const_int 5)\n \t\t       (const_int 7)]))))\n \t (match_operand:V4SI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmacswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmacswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -7257,7 +7257,7 @@\n \t  (mult:V4SI\n \t   (sign_extend:V4SI\n \t    (vec_select:V4HI\n-\t     (match_operand:V8HI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t     (match_operand:V8HI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t     (parallel [(const_int 0)\n \t\t\t(const_int 2)\n \t\t\t(const_int 4)\n@@ -7285,7 +7285,7 @@\n \t\t\t(const_int 5)\n \t\t\t(const_int 7)])))))\n \t (match_operand:V4SI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmadcsswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmadcsswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -7300,7 +7300,7 @@\n \t  (mult:V4SI\n \t   (sign_extend:V4SI\n \t    (vec_select:V4HI\n-\t     (match_operand:V8HI 1 \"nonimmediate_operand\" \"x,x,m\")\n+\t     (match_operand:V8HI 1 \"nonimmediate_operand\" \"%x,x,m\")\n \t     (parallel [(const_int 0)\n \t\t\t(const_int 2)\n \t\t\t(const_int 4)\n@@ -7328,7 +7328,7 @@\n \t\t\t(const_int 5)\n \t\t\t(const_int 7)])))))\n \t (match_operand:V4SI 3 \"register_operand\" \"0,0,0\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, false, 1, true)\"\n   \"@\n    pmadcswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pmadcswd\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -7343,7 +7343,7 @@\n \t  (match_operand:SSEMODE 3 \"nonimmediate_operand\" \"0,0,xm,x\")\n \t  (match_operand:SSEMODE 1 \"vector_move_operand\" \"x,xm,0,0\")\n \t  (match_operand:SSEMODE 2 \"vector_move_operand\" \"xm,x,x,xm\")))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"@\n    pcmov\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n    pcmov\\t{%3, %2, %1, %0|%0, %1, %2, %3}\n@@ -7799,7 +7799,7 @@\n \t   (match_operand:V16QI 2 \"nonimmediate_operand\" \"x,xm,xm,x\")\n \t   (match_operand:V16QI 3 \"nonimmediate_operand\" \"xm,x,0,0\")]\n \t  UNSPEC_SSE5_PERMUTE))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"pperm\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"sse4arg\")\n    (set_attr \"mode\" \"TI\")])\n@@ -7902,7 +7902,7 @@\n \t (truncate:V2SI\n \t  (match_operand:V2DI 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))))\n    (use (match_operand:V16QI 3 \"nonimmediate_operand\" \"xm,x,0,0\"))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"pperm\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"sse4arg\")\n    (set_attr \"mode\" \"TI\")])\n@@ -7915,7 +7915,7 @@\n \t (truncate:V4HI\n \t  (match_operand:V4SI 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))))\n    (use (match_operand:V16QI 3 \"nonimmediate_operand\" \"xm,x,0,0\"))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"pperm\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"sse4arg\")\n    (set_attr \"mode\" \"TI\")])\n@@ -7928,7 +7928,7 @@\n \t (truncate:V8QI\n \t  (match_operand:V8HI 2 \"nonimmediate_operand\" \"x,xm,xm,x\"))))\n    (use (match_operand:V16QI 3 \"nonimmediate_operand\" \"xm,x,0,0\"))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"pperm\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"sse4arg\")\n    (set_attr \"mode\" \"TI\")])\n@@ -7941,7 +7941,7 @@\n \t  (match_operand:SSEMODEF2P 2 \"nonimmediate_operand\" \"x,xm,xm,x\")\n \t  (match_operand:V16QI 3 \"nonimmediate_operand\" \"xm,x,0,0\")]\n \t UNSPEC_SSE5_PERMUTE))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 4, true, 1, false)\"\n   \"perm<ssemodesuffixf4>\\t{%3, %2, %1, %0|%0, %1, %2, %3}\"\n   [(set_attr \"type\" \"sse4arg\")\n    (set_attr \"mode\" \"<MODE>\")])\n@@ -8068,7 +8068,7 @@\n \t (rotatert:SSEMODE1248\n \t  (match_dup 1)\n \t  (neg:SSEMODE1248 (match_dup 2)))))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 3, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 3, true, 1, false)\"\n   \"prot<ssevecsize>\\t{%2, %1, %0|%0, %1, %2}\"\n   [(set_attr \"type\" \"sseishft\")\n    (set_attr \"mode\" \"TI\")])\n@@ -8121,7 +8121,7 @@\n \t (ashiftrt:SSEMODE1248\n \t  (match_dup 1)\n \t  (neg:SSEMODE1248 (match_dup 2)))))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 3, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 3, true, 1, false)\"\n   \"psha<ssevecsize>\\t{%2, %1, %0|%0, %1, %2}\"\n   [(set_attr \"type\" \"sseishft\")\n    (set_attr \"mode\" \"TI\")])\n@@ -8138,7 +8138,7 @@\n \t (lshiftrt:SSEMODE1248\n \t  (match_dup 1)\n \t  (neg:SSEMODE1248 (match_dup 2)))))]\n-  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 3, true, 1)\"\n+  \"TARGET_SSE5 && ix86_sse5_valid_op_p (operands, insn, 3, true, 1, false)\"\n   \"pshl<ssevecsize>\\t{%2, %1, %0|%0, %1, %2}\"\n   [(set_attr \"type\" \"sseishft\")\n    (set_attr \"mode\" \"TI\")])"}]}