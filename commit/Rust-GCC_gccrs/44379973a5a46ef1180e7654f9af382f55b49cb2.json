{"sha": "44379973a5a46ef1180e7654f9af382f55b49cb2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQzNzk5NzNhNWE0NmVmMTE4MGU3NjU0ZjlhZjM4MmY1NWI0OWNiMg==", "commit": {"author": {"name": "Robert Millan", "email": "robertmh@gnu.org", "date": "2004-11-26T21:37:24Z"}, "committer": {"name": "Gerald Pfeifer", "email": "gerald@gcc.gnu.org", "date": "2004-11-26T21:37:24Z"}, "message": "Changes for k*bsd-gnu support.\n\n\t* config/i386/linux.h: Define REG_NAME to allow overriding of\n\tregister names in sc structure.\n\t* config/i386/linux-unwind.h: Refer to sc->REG_NAME(reg) instead\n\tof sc->reg.\n\t* config.gcc: Detect x86_64-k*bsd-gnu systems.\n\nFrom-SVN: r91350", "tree": {"sha": "f78a8676f3a7d6afea47bb02125193d52e3264ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f78a8676f3a7d6afea47bb02125193d52e3264ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44379973a5a46ef1180e7654f9af382f55b49cb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44379973a5a46ef1180e7654f9af382f55b49cb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44379973a5a46ef1180e7654f9af382f55b49cb2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44379973a5a46ef1180e7654f9af382f55b49cb2/comments", "author": null, "committer": null, "parents": [{"sha": "75a25e3f6558b1e05d4100a81ff36ac67e35ce62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75a25e3f6558b1e05d4100a81ff36ac67e35ce62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75a25e3f6558b1e05d4100a81ff36ac67e35ce62"}], "stats": {"total": 36, "additions": 26, "deletions": 10}, "files": [{"sha": "8faf51729e0dbe6086167d17684cf8abc5e84fa9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=44379973a5a46ef1180e7654f9af382f55b49cb2", "patch": "@@ -1,3 +1,12 @@\n+2004-11-26  Robert Millan  <robertmh@gnu.org>\n+\n+\tChanges for k*bsd-gnu support.\n+\t* config/i386/linux.h: Define REG_NAME to allow overriding of\n+\tregister names in sc structure.\n+\t* config/i386/linux-unwind.h: Refer to sc->REG_NAME(reg) instead\n+\tof sc->reg.\n+\t* config.gcc: Detect x86_64-k*bsd-gnu systems.\n+\n 2004-11-26  Jeff Law  <law@redhat.com>\n \n \t* tree-ssa.c (verify_flow_sensitive_alias_info): Don't"}, {"sha": "e7feac92aa9f35ce73c87b182876e907ae05fe74", "filename": "gcc/config.gcc", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=44379973a5a46ef1180e7654f9af382f55b49cb2", "patch": "@@ -951,9 +951,13 @@ i[34567]86-*-linux* | i[34567]86-*-kfreebsd*-gnu | i[34567]86-*-knetbsd*-gnu)\n \tesac\n \ttmake_file=\"${tmake_file} i386/t-crtstuff\"\n \t;;\n-x86_64-*-linux*)\n+x86_64-*-linux* | x86_64-*-kfreebsd*-gnu | x86_64-*-knetbsd*-gnu)\n \ttm_file=\"${tm_file} i386/unix.h i386/att.h dbxelf.h elfos.h svr4.h linux.h \\\n \t\t i386/x86-64.h i386/linux64.h\"\n+\tcase ${target} in\n+\tx86_64-*-kfreebsd*-gnu) tm_file=\"${tm_file} kfreebsd-gnu.h\" ;;\n+\tx86_64-*-knetbsd*-gnu) tm_file=\"${tm_file} knetbsd-gnu.h\" ;;\n+\tesac\n \ttmake_file=\"${tmake_file} i386/t-linux64\"\n \t;;\n i[34567]86-*-gnu*)"}, {"sha": "c746f4fcd6b94743e2dcf05148ca8f06f864ca3c", "filename": "gcc/config/i386/linux-unwind.h", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2Fconfig%2Fi386%2Flinux-unwind.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2Fconfig%2Fi386%2Flinux-unwind.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Flinux-unwind.h?ref=44379973a5a46ef1180e7654f9af382f55b49cb2", "patch": "@@ -135,28 +135,28 @@ x86_fallback_frame_state (struct _Unwind_Context *context,\n   else\n     return _URC_END_OF_STACK;\n \n-  new_cfa = sc->esp;\n+  new_cfa = sc->REG_NAME(esp);\n   fs->cfa_how = CFA_REG_OFFSET;\n   fs->cfa_reg = 4;\n   fs->cfa_offset = new_cfa - (long) context->cfa;\n \n   /* The SVR4 register numbering macros aren't usable in libgcc.  */\n   fs->regs.reg[0].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[0].loc.offset = (long)&sc->eax - new_cfa;\n+  fs->regs.reg[0].loc.offset = (long)&sc->REG_NAME(eax) - new_cfa;\n   fs->regs.reg[3].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[3].loc.offset = (long)&sc->ebx - new_cfa;\n+  fs->regs.reg[3].loc.offset = (long)&sc->REG_NAME(ebx) - new_cfa;\n   fs->regs.reg[1].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[1].loc.offset = (long)&sc->ecx - new_cfa;\n+  fs->regs.reg[1].loc.offset = (long)&sc->REG_NAME(ecx) - new_cfa;\n   fs->regs.reg[2].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[2].loc.offset = (long)&sc->edx - new_cfa;\n+  fs->regs.reg[2].loc.offset = (long)&sc->REG_NAME(edx) - new_cfa;\n   fs->regs.reg[6].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[6].loc.offset = (long)&sc->esi - new_cfa;\n+  fs->regs.reg[6].loc.offset = (long)&sc->REG_NAME(esi) - new_cfa;\n   fs->regs.reg[7].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[7].loc.offset = (long)&sc->edi - new_cfa;\n+  fs->regs.reg[7].loc.offset = (long)&sc->REG_NAME(edi) - new_cfa;\n   fs->regs.reg[5].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[5].loc.offset = (long)&sc->ebp - new_cfa;\n+  fs->regs.reg[5].loc.offset = (long)&sc->REG_NAME(ebp) - new_cfa;\n   fs->regs.reg[8].how = REG_SAVED_OFFSET;\n-  fs->regs.reg[8].loc.offset = (long)&sc->eip - new_cfa;\n+  fs->regs.reg[8].loc.offset = (long)&sc->REG_NAME(eip) - new_cfa;\n   fs->retaddr_column = 8;\n   return _URC_NO_REASON;\n }"}, {"sha": "b8dee2cb246fe71a48530ac04cd798c37863b0db", "filename": "gcc/config/i386/linux.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2Fconfig%2Fi386%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44379973a5a46ef1180e7654f9af382f55b49cb2/gcc%2Fconfig%2Fi386%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Flinux.h?ref=44379973a5a46ef1180e7654f9af382f55b49cb2", "patch": "@@ -182,3 +182,6 @@ Boston, MA 02111-1307, USA.  */\n #define NEED_INDICATE_EXEC_STACK 1\n \n #define MD_UNWIND_SUPPORT \"config/i386/linux-unwind.h\"\n+\n+/* This macro may be overriden in i386/k*bsd-gnu.h */\n+#define REG_NAME(reg) reg"}]}