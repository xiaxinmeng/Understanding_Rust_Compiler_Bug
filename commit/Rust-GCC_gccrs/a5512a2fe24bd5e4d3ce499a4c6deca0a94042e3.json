{"sha": "a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTU1MTJhMmZlMjRiZDVlNGQzY2U0OTlhNGM2ZGVjYTBhOTQwNDJlMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-06-11T17:02:13Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-06-11T17:02:13Z"}, "message": "re PR c++/11131 (Unrelated declaration removes inline flag from function)\n\n\tPR c++/11131\n\t* tree.c (cp_cannot_inline_fn): Check for \"inline\" before\n\tinstantiation.\n\nFrom-SVN: r67783", "tree": {"sha": "23fd100d83ba03cedc1c63d77eeaf018012cddbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23fd100d83ba03cedc1c63d77eeaf018012cddbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3/comments", "author": null, "committer": null, "parents": [{"sha": "c0081c100c88036f8c3914f049bfa087783cc277", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0081c100c88036f8c3914f049bfa087783cc277", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0081c100c88036f8c3914f049bfa087783cc277"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "0f79c7cc41f3e5ddc6b89f4446eebed4afaf5b79", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3", "patch": "@@ -1,3 +1,9 @@\n+2003-06-11  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/11131\n+\t* tree.c (cp_cannot_inline_fn): Check for \"inline\" before\n+\tinstantiation.\n+\n 2003-06-10  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/10968"}, {"sha": "2e907c0b837f61f53118b7aff6217cf6f65bcb07", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=a5512a2fe24bd5e4d3ce499a4c6deca0a94042e3", "patch": "@@ -2209,14 +2209,16 @@ cp_cannot_inline_tree_fn (fnp)\n   if (DECL_TEMPLATE_INFO (fn)\n       && TI_PENDING_TEMPLATE_FLAG (DECL_TEMPLATE_INFO (fn)))\n     {\n+      /* Don't instantiate functions that are not going to be\n+\t inlined.  */\n+      if (!DECL_INLINE (DECL_TEMPLATE_RESULT \n+\t\t\t(template_for_substitution (fn))))\n+\treturn 1;\n       fn = *fnp = instantiate_decl (fn, /*defer_ok=*/0);\n       if (TI_PENDING_TEMPLATE_FLAG (DECL_TEMPLATE_INFO (fn)))\n \treturn 1;\n     }\n \n-  if (!DECL_INLINE (fn))\n-    return 1;\n-\n   if (flag_really_no_inline\n       && lookup_attribute (\"always_inline\", DECL_ATTRIBUTES (fn)) == NULL)\n     return 1;"}]}