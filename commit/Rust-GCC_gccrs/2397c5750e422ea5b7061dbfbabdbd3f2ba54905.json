{"sha": "2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjM5N2M1NzUwZTQyMmVhNWI3MDYxZGJmYmFiZGJkM2YyYmE1NDkwNQ==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-02-13T00:29:17Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-02-13T00:29:17Z"}, "message": "re PR c/29521 (Confusing warning for return with expression in function returning void)\n\n2007-02-13  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\tPR c/29521\n\t* c-typeck.c (c_finish_return): Improve warning message.\n\ntestsuite/\n\t* gcc.dg/c90-return-1.c: Update output.\n\t* gcc.dg/c99-return-1.c: Likewise.\n\nFrom-SVN: r121876", "tree": {"sha": "cffb83fc878960a6c078d51494792251b606b706", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cffb83fc878960a6c078d51494792251b606b706"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/comments", "author": null, "committer": null, "parents": [{"sha": "bad333ffe374313f11880ee8b1792bd05ff9f725", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bad333ffe374313f11880ee8b1792bd05ff9f725", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bad333ffe374313f11880ee8b1792bd05ff9f725"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "a25d814af35442b09d7703f95b97d05dd855b646", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "patch": "@@ -1,3 +1,8 @@\n+2007-02-13  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c/29521\n+\t* c-typeck.c (c_finish_return): Improve warning message.\n+\n 2007-02-12  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n \t* alias.c (find_symbolic_term): Delete unused function."}, {"sha": "c807a7edfe9ef331cdbc886fa497390a0191d8a1", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "patch": "@@ -6935,8 +6935,10 @@ c_finish_return (tree retval)\n   else if (valtype == 0 || TREE_CODE (valtype) == VOID_TYPE)\n     {\n       current_function_returns_null = 1;\n-      if (pedantic || TREE_CODE (TREE_TYPE (retval)) != VOID_TYPE)\n+      if (TREE_CODE (TREE_TYPE (retval)) != VOID_TYPE)\n \tpedwarn (\"%<return%> with a value, in function returning void\");\n+      else if (pedantic)\n+\tpedwarn (\"ISO C forbids %<return%> with expression, in function returning void\");\n     }\n   else\n     {"}, {"sha": "7245d64e25d23bbe7e91799c9d46dbd94deea7e7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "patch": "@@ -1,3 +1,9 @@\n+2007-02-13  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c/29521\n+\t* gcc.dg/c90-return-1.c: Update output.\n+\t* gcc.dg/c99-return-1.c: Likewise.\n+\t\n 2007-02-13  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/30554"}, {"sha": "734652c90ca19d9aca4685421c20d95471c54a81", "filename": "gcc/testsuite/gcc.dg/pr29521-2.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Ftestsuite%2Fgcc.dg%2Fpr29521-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Ftestsuite%2Fgcc.dg%2Fpr29521-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr29521-2.c?ref=2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "patch": "@@ -0,0 +1,15 @@\n+/* PR 29521 : warning for return with expression in function returning void */\n+/* { dg-do compile } */\n+/* { dg-options \"-pedantic-errors\" } */\n+\n+void func (void) { }\n+\n+void func2 (void)\n+{\n+  return func (); /* { dg-error \"ISO C forbids 'return' with expression\" } */\n+}\n+\n+void func3 (void)\n+{\n+  return 1; /* { dg-error \"'return' with a value\" } */\n+}"}, {"sha": "b6fb535fab7ed1ea8431fbd3a1eca1fa56440199", "filename": "gcc/testsuite/gcc.dg/pr29521.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Ftestsuite%2Fgcc.dg%2Fpr29521.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2397c5750e422ea5b7061dbfbabdbd3f2ba54905/gcc%2Ftestsuite%2Fgcc.dg%2Fpr29521.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr29521.c?ref=2397c5750e422ea5b7061dbfbabdbd3f2ba54905", "patch": "@@ -0,0 +1,15 @@\n+/* PR 29521 : warning for return with expression in function returning void */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+void func (void) { }\n+\n+void func2 (void)\n+{\n+  return func ();\n+}\n+\n+void func3 (void)\n+{\n+  return 1;  /* { dg-warning \"'return' with a value\" } */\n+}"}]}