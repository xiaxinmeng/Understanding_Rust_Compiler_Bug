{"sha": "4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "node_id": "C_kwDOANBUbNoAKDRlM2RjZjIwNzYzZDdkNGIyYzA2NTUzZWUxNGM4OGI1NzNhYWJhZmM", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-11-13T20:59:42Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-11-14T08:35:06Z"}, "message": "Revert \"sphinx: support Sphinx in build system\"\n\nThis reverts commit 41a45cba0021f597dbfdec1f782026215ea21726.", "tree": {"sha": "a96d66a1b66aeae1cdda1a33bf9af50e70664452", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a96d66a1b66aeae1cdda1a33bf9af50e70664452"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ef0879e3b4243293daf7e5dcf2c20e013d1c7037", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef0879e3b4243293daf7e5dcf2c20e013d1c7037", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef0879e3b4243293daf7e5dcf2c20e013d1c7037"}], "stats": {"total": 1293, "additions": 897, "deletions": 396}, "files": [{"sha": "7efe98aaf960840b39de9d499d04bf82ac08b0d2", "filename": "config/acx.m4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/config%2Facx.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/config%2Facx.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Facx.m4?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -644,7 +644,7 @@ AC_DEFUN([ACX_BUGURL],[\n     REPORT_BUGS_TEXI=\n     ;;\n   *)\n-    REPORT_BUGS_TO=\"$BUGURL\"\n+    REPORT_BUGS_TO=\"<$BUGURL>\"\n     REPORT_BUGS_TEXI=@uref{`echo \"$BUGURL\" | sed 's/@/@@/g'`}\n     ;;\n   esac;"}, {"sha": "8899a67040b35fce0abf81153d6fd0dd14001b1b", "filename": "configure", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -10676,6 +10676,7 @@ case \" $configdirs \" in\n     ;;\n esac\n \n+\n # Host tools.\n ncn_tool_prefix=\n test -n \"$host_alias\" && ncn_tool_prefix=$host_alias-"}, {"sha": "1eb689d68b1ce59f3ce8fb8c240cd9a1ff3f1be0", "filename": "configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -3526,6 +3526,7 @@ case \" $configdirs \" in\n     ;;\n esac\n \n+\n # Host tools.\n NCN_STRICT_CHECK_TOOLS(AR, ar)\n NCN_STRICT_CHECK_TOOLS(AS, as)"}, {"sha": "3491ff66045aca99324c0137d5945f89093ad08a", "filename": "gcc/Makefile.in", "status": "modified", "additions": 226, "deletions": 142, "changes": 368, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -113,6 +113,14 @@ target_objdir := $(toplevel_builddir)/$(target_subdir)\n # Directory where sources are, from where we are.\n VPATH = @srcdir@\n \n+# We define a vpath for the sources of the .texi files here because they\n+# are split between multiple directories and we would rather use one implicit\n+# pattern rule for everything.\n+# This vpath could be extended within the Make-lang fragments.\n+\n+vpath %.texi $(gcc_docdir)\n+vpath %.texi $(gcc_docdir)/include\n+\n # --------\n # UNSORTED\n # --------\n@@ -313,6 +321,13 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_SCRIPT = @INSTALL@\n install_sh = $(SHELL) $(srcdir)/../install-sh\n INSTALL_STRIP_PROGRAM = $(install_sh) -c -s\n+MAKEINFO = @MAKEINFO@\n+MAKEINFOFLAGS = --no-split\n+TEXI2DVI = texi2dvi\n+TEXI2PDF = texi2pdf\n+TEXI2HTML = $(MAKEINFO) --html\n+TEXI2POD = perl $(srcdir)/../contrib/texi2pod.pl\n+POD2MAN = pod2man --center=\"GNU\" --release=\"gcc-$(version)\" --date=$(shell sed 's/\\(....\\)\\(..\\)\\(..\\)/\\1-\\2-\\3/' <$(DATESTAMP))\n # Some versions of `touch' (such as the version on Solaris 2.8)\n # do not correctly set the timestamp due to buggy versions of `utime'\n # in the kernel.  So, we use `echo' instead.\n@@ -763,8 +778,11 @@ LIBCONVERT =\n # Control whether header files are installed.\n INSTALL_HEADERS=install-headers install-mkheaders\n \n-# Control whether manpages generated by sphinx-build can be rebuilt.\n-SPHINX_BUILD = @SPHINX_BUILD@\n+# Control whether Info documentation is built and installed.\n+BUILD_INFO = @BUILD_INFO@\n+\n+# Control whether manpages generated by texi2pod.pl can be rebuilt.\n+GENERATED_MANPAGES = @GENERATED_MANPAGES@\n \n # Additional directories of header files to run fixincludes on.\n # These should be directories searched automatically by default\n@@ -888,6 +906,7 @@ PKGVERSION_s:= \"\\\"@PKGVERSION@\\\"\"\n BUGURL_s    := \"\\\"@REPORT_BUGS_TO@\\\"\"\n \n PKGVERSION  := @PKGVERSION@\n+BUGURL_TEXI := @REPORT_BUGS_TEXI@\n \n ifdef REVISION_c\n REVISION_s  := \\\n@@ -1173,6 +1192,8 @@ FLAGS_TO_PASS = \\\n \t\"LN=$(LN)\" \\\n \t\"LN_S=$(LN_S)\" \\\n \t\"RANLIB_FOR_TARGET=$(RANLIB_FOR_TARGET)\" \\\n+\t\"MAKEINFO=$(MAKEINFO)\" \\\n+\t\"MAKEINFOFLAGS=$(MAKEINFOFLAGS)\" \\\n \t\"MAKEOVERRIDES=\" \\\n \t\"SHELL=$(SHELL)\" \\\n \t\"TFLAGS=$(TFLAGS)\" \\\n@@ -2554,6 +2575,8 @@ s-cfn-operators: build/gencfn-macros$(build_exeext)\n cfn-operators.pd: s-cfn-operators; @true\n \n target-hooks-def.h: s-target-hooks-def-h; @true\n+# make sure that when we build info files, the used tm.texi is up to date.\n+$(srcdir)/doc/tm.texi: s-tm-texi; @true\n \n s-target-hooks-def-h: build/genhooks$(build_exeext)\n \t$(RUN_GEN) build/genhooks$(build_exeext) \"Target Hook\" \\\n@@ -2589,20 +2612,38 @@ s-d-target-hooks-def-h: build/genhooks$(build_exeext)\n \t\t\t\t\t     d/d-target-hooks-def.h\n \t$(STAMP) s-d-target-hooks-def-h\n \n-# The tm.rst.in we want to compare against / check into svn should have\n+# check if someone mistakenly only changed tm.texi.\n+# We use a different pathname here to avoid a circular dependency.\n+s-tm-texi: $(srcdir)/doc/../doc/tm.texi\n+\n+# The tm.texi we want to compare against / check into svn should have\n # unix-style line endings.  To make this work on MinGW, remove \\r.\n # \\r is not portable to Solaris tr, therefore we have a special\n # case for ASCII.  We use \\r for other encodings like EBCDIC.\n-s-tm-rst-in: build/genhooks$(build_exeext) $(srcdir)/doc/gccint/target-macros/tm.rst.in\n-\t$(RUN_GEN) build/genhooks$(build_exeext) > tmp-tm.rst.in\n-\t$(SHELL) $(srcdir)/../move-if-change tmp-tm.rst.in tm.rst.in\n-\n-\t@if cmp -s $(srcdir)/doc/gccint/target-macros/tm.rst.in tm.rst.in; then \\\n+s-tm-texi: build/genhooks$(build_exeext) $(srcdir)/doc/tm.texi.in\n+\t$(RUN_GEN) build/genhooks$(build_exeext) -d \\\n+\t\t\t$(srcdir)/doc/tm.texi.in > tmp-tm.texi\n+\tcase `echo X|tr X '\\101'` in \\\n+\t  A) tr -d '\\015' < tmp-tm.texi > tmp2-tm.texi ;; \\\n+\t  *) tr -d '\\r' < tmp-tm.texi > tmp2-tm.texi ;; \\\n+\tesac\n+\tmv tmp2-tm.texi tmp-tm.texi\n+\t$(SHELL) $(srcdir)/../move-if-change tmp-tm.texi tm.texi\n+\t@if cmp -s $(srcdir)/doc/tm.texi tm.texi; then \\\n \t  $(STAMP) $@; \\\n+\telif test $(srcdir)/doc/tm.texi -nt $(srcdir)/doc/tm.texi.in \\\n+\t  && ( test $(srcdir)/doc/tm.texi -nt $(srcdir)/target.def \\\n+\t    || test $(srcdir)/doc/tm.texi -nt $(srcdir)/c-family/c-target.def \\\n+\t    || test $(srcdir)/doc/tm.texi -nt $(srcdir)/common/common-target.def \\\n+\t    || test $(srcdir)/doc/tm.texi -nt $(srcdir)/d/d-target.def \\\n+\t  ); then \\\n+\t  echo >&2 ; \\\n+\t  echo You should edit $(srcdir)/doc/tm.texi.in rather than $(srcdir)/doc/tm.texi . >&2 ; \\\n+\t  false; \\\n \telse \\\n \t  echo >&2 ; \\\n \t  echo Verify that you have permission to grant a GFDL license for all >&2 ; \\\n-\t  echo new text in $(objdir)/tm.rst.in, then copy it to $(srcdir)/doc/gccint/target-macros/tm.rst.in. >&2 ; \\\n+\t  echo new text in $(objdir)/tm.texi, then copy it to $(srcdir)/doc/tm.texi. >&2 ; \\\n \t  false; \\\n \tfi\n \n@@ -3275,38 +3316,121 @@ install-no-fixedincludes:\n \n # Remake the info files.\n \n-doc: $(SPHINX_BUILD)\n+doc: $(BUILD_INFO) $(GENERATED_MANPAGES)\n \n-INFOFILES = doc/gcc/info/texinfo/gcc.info \\\n-\t    doc/gccint/info/texinfo/gccint.info \\\n-\t    doc/cpp/info/texinfo/cpp.info \\\n-\t    doc/cppinternals/info/texinfo/cppinternals.info \\\n-\t    doc/install/info/texinfo/install.info\n+INFOFILES = doc/cpp.info doc/gcc.info doc/gccint.info \\\n+            doc/gccinstall.info doc/cppinternals.info\n \n info: $(INFOFILES) lang.info @GENINSRC@ srcinfo lang.srcinfo\n \n srcinfo: $(INFOFILES)\n \t-cp -p $^ $(srcdir)/doc\n \n-PDFFILES = doc/gcc/pdf/latex/gcc.pdf doc/gccint/pdf/latex/gccint.pdf doc/install/pdf/latex/install.pdf \\\n-\t   doc/cpp/pdf/latex/cpp.pdf doc/cppinternals/pdf/latex/cppinternals.pdf\n+TEXI_CPP_FILES = cpp.texi fdl.texi cppenv.texi cppopts.texi\t\t\\\n+\t gcc-common.texi gcc-vers.texi\n+\n+TEXI_GCC_FILES = gcc.texi gcc-common.texi gcc-vers.texi frontends.texi\t\\\n+\t standards.texi invoke.texi extend.texi md.texi objc.texi\t\\\n+\t gcov.texi trouble.texi bugreport.texi service.texi\t\t\\\n+\t contribute.texi compat.texi funding.texi gnu.texi gpl_v3.texi\t\\\n+\t fdl.texi contrib.texi cppenv.texi cppopts.texi avr-mmcu.texi\t\\\n+\t implement-c.texi implement-cxx.texi gcov-tool.texi gcov-dump.texi \\\n+\t lto-dump.texi\n+\n+# we explicitly use $(srcdir)/doc/tm.texi here to avoid confusion with\n+# the generated tm.texi; the latter might have a more recent timestamp,\n+# but we don't want to rebuild the info files unless the contents of\n+# the *.texi files have changed.\n+TEXI_GCCINT_FILES = gccint.texi gcc-common.texi gcc-vers.texi\t\t\\\n+\t contribute.texi makefile.texi configterms.texi options.texi\t\\\n+\t portability.texi interface.texi passes.texi rtl.texi md.texi\t\\\n+\t $(srcdir)/doc/tm.texi hostconfig.texi fragments.texi\t\\\n+\t configfiles.texi collect2.texi headerdirs.texi funding.texi\t\\\n+\t gnu.texi gpl_v3.texi fdl.texi contrib.texi languages.texi\t\\\n+\t sourcebuild.texi gty.texi libgcc.texi cfg.texi tree-ssa.texi\t\\\n+\t loop.texi generic.texi gimple.texi plugins.texi optinfo.texi   \\\n+\t match-and-simplify.texi analyzer.texi ux.texi poly-int.texi\n+\n+TEXI_GCCINSTALL_FILES = install.texi fdl.texi\t\t\\\n+\t gcc-common.texi gcc-vers.texi\n+\n+TEXI_CPPINT_FILES = cppinternals.texi gcc-common.texi gcc-vers.texi\n+\n+# gcc-vers.texi is generated from the version files.\n+gcc-vers.texi: $(BASEVER) $(DEVPHASE)\n+\t(echo \"@set version-GCC $(BASEVER_c)\"; \\\n+\t if [ \"$(DEVPHASE_c)\" = \"experimental\" ]; \\\n+\t then echo \"@set DEVELOPMENT\"; \\\n+\t else echo \"@clear DEVELOPMENT\"; \\\n+\t fi) > $@T\n+\t$(build_file_translate) echo @set srcdir `echo $(abs_srcdir) | sed -e 's|\\\\([@{}]\\\\)|@\\\\1|g'` >> $@T\n+\tif [ -n \"$(PKGVERSION)\" ]; then \\\n+\t  echo \"@set VERSION_PACKAGE $(PKGVERSION)\" >> $@T; \\\n+\tfi\n+\techo \"@set BUGURL $(BUGURL_TEXI)\" >> $@T; \\\n+\tmv -f $@T $@\n \n-pdf:: $(PDFFILES) lang.pdf\n \n-doc/gcc/pdf/latex/gcc.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_docdir)/gcc BUILDDIR=$(objdir)/doc/gcc/pdf\n+# The *.1, *.7, *.info, *.dvi, and *.pdf files are being generated from implicit\n+# patterns.  To use them, put each of the specific targets with its\n+# specific dependencies but no build commands.\n+\n+doc/cpp.info: $(TEXI_CPP_FILES)\n+doc/gcc.info: $(TEXI_GCC_FILES)\n+doc/gccint.info: $(TEXI_GCCINT_FILES)\n+doc/cppinternals.info: $(TEXI_CPPINT_FILES)\n+\n+doc/%.info: %.texi\n+\tif [ x$(BUILD_INFO) = xinfo ]; then \\\n+\t\t$(MAKEINFO) $(MAKEINFOFLAGS) -I . -I $(gcc_docdir) \\\n+\t\t\t-I $(gcc_docdir)/include -o $@ $<; \\\n+\tfi\n+\n+# Duplicate entry to handle renaming of gccinstall.info\n+doc/gccinstall.info: $(TEXI_GCCINSTALL_FILES)\n+\tif [ x$(BUILD_INFO) = xinfo ]; then \\\n+\t\t$(MAKEINFO) $(MAKEINFOFLAGS) -I $(gcc_docdir) \\\n+\t\t\t-I $(gcc_docdir)/include -o $@ $<; \\\n+\tfi\n+\n+doc/cpp.dvi: $(TEXI_CPP_FILES)\n+doc/gcc.dvi: $(TEXI_GCC_FILES)\n+doc/gccint.dvi: $(TEXI_GCCINT_FILES)\n+doc/cppinternals.dvi: $(TEXI_CPPINT_FILES)\n+\n+doc/cpp.pdf: $(TEXI_CPP_FILES)\n+doc/gcc.pdf: $(TEXI_GCC_FILES)\n+doc/gccint.pdf: $(TEXI_GCCINT_FILES)\n+doc/cppinternals.pdf: $(TEXI_CPPINT_FILES)\n+\n+$(build_htmldir)/cpp/index.html: $(TEXI_CPP_FILES)\n+$(build_htmldir)/gcc/index.html: $(TEXI_GCC_FILES)\n+$(build_htmldir)/gccint/index.html: $(TEXI_GCCINT_FILES)\n+$(build_htmldir)/cppinternals/index.html: $(TEXI_CPPINT_FILES)\n+\n+DVIFILES = doc/gcc.dvi doc/gccint.dvi doc/gccinstall.dvi doc/cpp.dvi \\\n+           doc/cppinternals.dvi\n+\n+dvi:: $(DVIFILES) lang.dvi\n+\n+doc/%.dvi: %.texi\n+\t$(TEXI2DVI) -I . -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n \n-doc/gccint/pdf/latex/gccint.pdf: $(SPHINX_FILES) s-tm-rst-in\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_docdir)/gccint BUILDDIR=$(objdir)/doc/gccint/pdf\n+# Duplicate entry to handle renaming of gccinstall.dvi\n+doc/gccinstall.dvi: $(TEXI_GCCINSTALL_FILES)\n+\t$(TEXI2DVI) -I . -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n \n-doc/install/pdf/latex/install.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_docdir)/install BUILDDIR=$(objdir)/doc/install/pdf\n+PDFFILES = doc/gcc.pdf doc/gccint.pdf doc/gccinstall.pdf doc/cpp.pdf \\\n+           doc/cppinternals.pdf\n \n-doc/cpp/pdf/latex/cpp.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_docdir)/cpp BUILDDIR=$(objdir)/doc/cpp/pdf\n+pdf:: $(PDFFILES) lang.pdf\n+\n+doc/%.pdf: %.texi\n+\t$(TEXI2PDF) -I . -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n \n-doc/cppinternals/pdf/latex/cppinternals.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_docdir)/cppinternals BUILDDIR=$(objdir)/doc/cppinternals/pdf\n+# Duplicate entry to handle renaming of gccinstall.pdf\n+doc/gccinstall.pdf: $(TEXI_GCCINSTALL_FILES)\n+\t$(TEXI2PDF) -I . -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n \n # List the directories or single hmtl files which are installed by\n # install-html. The lang.html file triggers language fragments to build\n@@ -3316,75 +3440,70 @@ HTMLS_INSTALL=$(build_htmldir)/cpp $(build_htmldir)/gcc \\\n        $(build_htmldir)/cppinternals\n \n # List the html file targets.\n-HTMLS = doc/gcc/html/html/index.html doc/gccint/html/html/index.html doc/install/html/html/index.html \\\n-\tdoc/cpp/html/html/index.html doc/cppinternals/html/html/index.html\n-\n-html:: $(HTMLS) lang.html\n-\n-doc/gcc/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_docdir)/gcc BUILDDIR=$(objdir)/doc/gcc/html\n-\n-doc/gccint/html/html/index.html: $(SPHINX_FILES) s-tm-rst-in\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_docdir)/gccint BUILDDIR=$(objdir)/doc/gccint/html\n+HTMLS_BUILD=$(build_htmldir)/cpp/index.html $(build_htmldir)/gcc/index.html \\\n+       $(build_htmldir)/gccinstall/index.html $(build_htmldir)/gccint/index.html \\\n+       $(build_htmldir)/cppinternals/index.html lang.html\n \n-doc/install/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_docdir)/install BUILDDIR=$(objdir)/doc/install/html\n+html:: $(HTMLS_BUILD)\n \n-doc/cpp/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_docdir)/cpp BUILDDIR=$(objdir)/doc/cpp/html\n+$(build_htmldir)/%/index.html: %.texi\n+\t$(mkinstalldirs) $(@D)\n+\trm -f $(@D)/*\n+\t$(TEXI2HTML) -I $(abs_docdir) -I $(abs_docdir)/include -o $(@D) $<\n \n-doc/cppinternals/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_docdir)/cppinternals BUILDDIR=$(objdir)/doc/cppinternals/html\n+# Duplicate entry to handle renaming of gccinstall\n+$(build_htmldir)/gccinstall/index.html: $(TEXI_GCCINSTALL_FILES)\n+\t$(mkinstalldirs) $(@D)\n+\techo rm -f $(@D)/*\n+\tSOURCEDIR=$(abs_docdir) \\\n+\tDESTDIR=$(@D) \\\n+\t$(SHELL) $(srcdir)/doc/install.texi2html\n \n-MANFILES = doc/gcc/man/man/gcc.1 doc/cpp/man/man/cpp.1 \\\n-\t   doc/gcc/man/man/gfdl.7 doc/gcc/man/man/gpl.7 \\\n-           doc/gcc/man/man/fsf-funding.7 doc/gcc/man/man/gcov-tool.1 \\\n-\t   doc/gcc/man/man/gcov.1 doc/gcc/man/man/gcov-dump.1 \\\n-\t   $(if $(filter yes,@enable_lto@),doc/gcc/man/man/lto-dump.1)\n+MANFILES = doc/gcov.1 doc/cpp.1 doc/gcc.1 doc/gfdl.7 doc/gpl.7 \\\n+           doc/fsf-funding.7 doc/gcov-tool.1 doc/gcov-dump.1 \\\n+\t   $(if $(filter yes,@enable_lto@),doc/lto-dump.1)\n \n-export VERSION_PACKAGE=$(PKGVERSION)\n-export ENABLE_LTO=$(enable_lto)\n-export BUGURL=\"$(BUGURL_s)\"\n+generated-manpages: man\n \n man: $(MANFILES) lang.man @GENINSRC@ srcman lang.srcman\n \n srcman: $(MANFILES)\n \t-cp -p $^ $(srcdir)/doc\n \n-sphinx-build: man info\n-\n-RST_FILES:=$(shell find $(srcdir) -name *.rst -or -name *.rst.in)\n-SPHINX_CONFIG_FILES:=$(shell find $(srcdir)/.. -name conf.py) $(srcdir)/../doc/baseconf.py\n-SPHINX_FILES:=$(RST_FILES) $(SPHINX_CONFIG_FILES)\n-\n-doc/gcc/man/man/gcc.1: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc man SOURCEDIR=$(abs_docdir)/gcc BUILDDIR=$(objdir)/doc/gcc/man\n-\n-doc/gcc/man/man/gcov.1: doc/gcc/man/man/gcc.1\n-doc/gcc/man/man/gcov-tool.1: doc/gcc/man/man/gcc.1\n-doc/gcc/man/man/gcov-dump.1: doc/gcc/man/man/gcc.1\n-doc/gcc/man/man/lto-dump.1: doc/gcc/man/man/gcc.1\n-doc/gcc/man/man/gfdl.7: doc/gcc/man/man/gcc.1\n-doc/gcc/man/man/gpl.7: doc/gcc/man/man/gcc.1\n-doc/gcc/man/man/fsf-funding.7: doc/gcc/man/man/gcc.1\n-\n-doc/cpp/man/man/cpp.1: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc man SOURCEDIR=$(abs_docdir)/cpp BUILDDIR=$(objdir)/doc/cpp/man\n+doc/%.1: %.pod\n+\t$(STAMP) $@\n+\t-($(POD2MAN) --section=1 $< > $(@).T$$$$ && \\\n+\t\tmv -f $(@).T$$$$ $@) || \\\n+\t\t(rm -f $(@).T$$$$ && exit 1)\n \n-doc/gcc/info/texinfo/gcc.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_docdir)/gcc BUILDDIR=$(objdir)/doc/gcc/info\n+doc/%.7: %.pod\n+\t$(STAMP) $@\n+\t-($(POD2MAN) --section=7 $< > $(@).T$$$$ && \\\n+\t\tmv -f $(@).T$$$$ $@) || \\\n+\t\t(rm -f $(@).T$$$$ && exit 1)\n \n-doc/gccint/info/texinfo/gccint.info: $(SPHINX_FILES) s-tm-rst-in\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_docdir)/gccint BUILDDIR=$(objdir)/doc/gccint/info\n+%.pod: %.texi\n+\t$(STAMP) $@\n+\t-$(TEXI2POD) -DBUGURL=\"$(BUGURL_TEXI)\" $< > $@\n \n-doc/cpp/info/texinfo/cpp.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_docdir)/cpp BUILDDIR=$(objdir)/doc/cpp/info\n+.INTERMEDIATE: cpp.pod gcc.pod gfdl.pod fsf-funding.pod gpl.pod\n+cpp.pod: cpp.texi cppenv.texi cppopts.texi\n \n-doc/cppinternals/info/texinfo/cppinternals.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_docdir)/cppinternals BUILDDIR=$(objdir)/doc/cppinternals/info\n+# These next rules exist because the output name is not the same as\n+# the input name, so our implicit %.pod rule will not work.\n \n-doc/install/info/texinfo/install.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_docdir)/install BUILDDIR=$(objdir)/doc/install/info\n+gcc.pod: invoke.texi cppenv.texi cppopts.texi gcc-vers.texi\n+\t$(STAMP) $@\n+\t-$(TEXI2POD) $< > $@\n+gfdl.pod: fdl.texi\n+\t$(STAMP) $@\n+\t-$(TEXI2POD) $< > $@\n+fsf-funding.pod: funding.texi\n+\t$(STAMP) $@\n+\t-$(TEXI2POD) $< > $@\n+gpl.pod: gpl_v3.texi\n+\t$(STAMP) $@\n+\t-$(TEXI2POD) $< > $@\n \n #\f\n # Deletion of files made during compilation.\n@@ -3444,7 +3563,8 @@ clean: mostlyclean lang.clean\n \t-rm -f config.h tconfig.h bconfig.h tm_p.h tm.h\n \t-rm -f options.cc options.h optionlist\n \t-rm -f cs-*\n-\t-rm -rf doc\n+\t-rm -f doc/*.dvi\n+\t-rm -f doc/*.pdf\n # Delete the include directories.\n \t-rm -rf include include-fixed\n # Delete files used by the \"multilib\" facility (including libgcc subdirs).\n@@ -3472,6 +3592,7 @@ distclean: clean lang.distclean\n \t-cd testsuite && rm -f *.out *.gcov *$(coverageexts)\n \t-rm -rf ${QMTEST_DIR} stamp-qmtest\n \t-rm -f .gdbinit configargs.h\n+\t-rm -f gcov.pod\n # Delete po/*.gmo only if we are not building in the source directory.\n \t-if [ ! -f po/exgettext ]; then rm -f po/*.gmo; fi\n \t-rmdir ada cp f java objc intl po testsuite plugin 2>/dev/null\n@@ -3484,7 +3605,7 @@ maintainer-clean:\n \t$(MAKE) lang.maintainer-clean distclean\n \t-rm -f cpp.??s cpp.*aux\n \t-rm -f gcc.??s gcc.*aux\n-\t-rm -rf doc\n+\t-rm -f $(gcc_docdir)/*.info $(gcc_docdir)/*.1 $(gcc_docdir)/*.7 $(gcc_docdir)/*.dvi $(gcc_docdir)/*.pdf\n #\f\n # Entry points `install', `install-strip', and `uninstall'.\n # Also use `install-collect2' to install collect2 when the config files don't.\n@@ -3681,46 +3802,24 @@ install-info:: doc installdirs \\\n \t$(DESTDIR)$(infodir)/cpp.info \\\n \t$(DESTDIR)$(infodir)/gcc.info \\\n \t$(DESTDIR)$(infodir)/cppinternals.info \\\n-\t$(DESTDIR)$(infodir)/install.info \\\n+\t$(DESTDIR)$(infodir)/gccinstall.info \\\n \t$(DESTDIR)$(infodir)/gccint.info \\\n \tlang.install-info\n \n-$(DESTDIR)$(infodir)/gcc.info: doc/gcc/info/texinfo/gcc.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/gccint.info: doc/gccint/info/texinfo/gccint.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/install.info: doc/install/info/texinfo/install.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/cpp.info: doc/cpp/info/texinfo/cpp.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/cppinternals.info: doc/cppinternals/info/texinfo/cppinternals.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/gcov.info: doc/gcc/info/texinfo/gcov.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/gcov-tool.info: doc/gcc/info/texinfo/gcov-tool.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/gcov-dump.info: doc/gcc/info/texinfo/gcov-dump.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n-$(DESTDIR)$(infodir)/lto-dump.info: doc/gcc/info/texinfo/lto-dump.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n+$(DESTDIR)$(infodir)/%.info: doc/%.info installdirs\n+\trm -f $@\n+\tif [ -f $< ]; then \\\n+\t  for f in $(<)*; do \\\n+\t    realfile=`echo $$f | sed -e 's|.*/\\([^/]*\\)$$|\\1|'`; \\\n+\t    $(INSTALL_DATA) $$f $(DESTDIR)$(infodir)/$$realfile; \\\n+\t    chmod a-x $(DESTDIR)$(infodir)/$$realfile; \\\n+\t  done; \\\n+\telse true; fi\n+\t-if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then \\\n+\t  if [ -f $@ ]; then \\\n+\t    install-info --dir-file=$(DESTDIR)$(infodir)/dir $@; \\\n+\t  else true; fi; \\\n+\telse true; fi;\n \n dvi__strip_dir = `echo $$p | sed -e 's|^.*/||'`;\n \n@@ -3748,7 +3847,7 @@ install-pdf: $(PDFFILES) lang.install-pdf\n \n html__strip_dir = `echo $$p | sed -e 's|^.*/||'`;\n \n-install-html: $(HTMLS) lang.install-html\n+install-html: $(HTMLS_BUILD) lang.install-html\n \t@$(NORMAL_INSTALL)\n \ttest -z \"$(htmldir)\" || $(mkinstalldirs) \"$(DESTDIR)$(htmldir)\"\n \t@list='$(HTMLS_INSTALL)'; for p in $$list; do \\\n@@ -3782,47 +3881,32 @@ $(DESTDIR)$(man7dir)/%$(man7ext): doc/%.7 installdirs\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@\n \n-$(DESTDIR)$(man1dir)/$(GCC_INSTALL_NAME)$(man1ext): doc/gcc/man/man/gcc.1 installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\t-chmod a-x $@\n-\n-$(DESTDIR)$(man1dir)/$(CPP_INSTALL_NAME)$(man1ext): doc/cpp/man/man/cpp.1 installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\t-chmod a-x $@\n-\n-$(DESTDIR)$(man1dir)/$(GCOV_INSTALL_NAME)$(man1ext): doc/gcc/man/man/gcov.1 installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\t-chmod a-x $@\n-\n-$(DESTDIR)$(man1dir)/$(GCOV_TOOL_INSTALL_NAME)$(man1ext): doc/gcc/man/man/gcov-tool.1 installdirs\n+$(DESTDIR)$(man1dir)/$(GCC_INSTALL_NAME)$(man1ext): doc/gcc.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@\n \n-$(DESTDIR)$(man1dir)/$(GCOV_DUMP_INSTALL_NAME)$(man1ext): doc/gcc/man/man/gcov-dump.1 installdirs\n+$(DESTDIR)$(man1dir)/$(CPP_INSTALL_NAME)$(man1ext): doc/cpp.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@\n \n-$(DESTDIR)$(man1dir)/$(LTO_DUMP_INSTALL_NAME)$(man1ext): doc/gcc/man/man/lto-dump.1 installdirs\n+$(DESTDIR)$(man1dir)/$(GCOV_INSTALL_NAME)$(man1ext): doc/gcov.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@\n \n-$(DESTDIR)$(man7dir)/fsf-funding$(man7ext): doc/gcc/man/man/fsf-funding.7 installdirs\n+$(DESTDIR)$(man1dir)/$(GCOV_TOOL_INSTALL_NAME)$(man1ext): doc/gcov-tool.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@\n \n-$(DESTDIR)$(man7dir)/gfdl$(man7ext): doc/gcc/man/man/gfdl.7 installdirs\n+$(DESTDIR)$(man1dir)/$(GCOV_DUMP_INSTALL_NAME)$(man1ext): doc/gcov-dump.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@\n \n-$(DESTDIR)$(man7dir)/gpl$(man7ext): doc/gcc/man/man/gpl.7 installdirs\n+$(DESTDIR)$(man1dir)/$(LTO_DUMP_INSTALL_NAME)$(man1ext): doc/lto-dump.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@"}, {"sha": "aa0960991c92f130f53edcf70cc959b106efefe1", "filename": "gcc/configure", "status": "modified", "additions": 3, "deletions": 25, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -807,7 +807,6 @@ AR\n NM\n BISON\n FLEX\n-SPHINX_BUILD\n GENERATED_MANPAGES\n BUILD_INFO\n MAKEINFO\n@@ -8164,7 +8163,7 @@ fi\n     REPORT_BUGS_TEXI=\n     ;;\n   *)\n-    REPORT_BUGS_TO=\"$BUGURL\"\n+    REPORT_BUGS_TO=\"<$BUGURL>\"\n     REPORT_BUGS_TEXI=@uref{`echo \"$BUGURL\" | sed 's/@/@@/g'`}\n     ;;\n   esac;\n@@ -8806,27 +8805,6 @@ $as_echo \"no\" >&6; }\n fi\n \n \n-# See if sphinx-build has been installed and is modern enough\n-# that we can use it.\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for sphinx-build\" >&5\n-$as_echo_n \"checking for sphinx-build... \" >&6; }\n-if sphinx-build -j auto -h &>/dev/null ; then\n-  SPHINX_BUILD=sphinx-build\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: yes\" >&5\n-$as_echo \"yes\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n-  *** sphinx-build is missing or too old.\n-  *** Info and man pages documentation will not be built.\" >&5\n-$as_echo \"$as_me: WARNING:\n-  *** sphinx-build is missing or too old.\n-  *** Info and man pages documentation will not be built.\" >&2;}\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-  SPHINX_BUILD=\n-fi\n-\n-\n MISSING=\"${CONFIG_SHELL-/bin/sh} $ac_aux_dir/missing\"\n \n # How about lex?\n@@ -19732,7 +19710,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 19735 \"configure\"\n+#line 19713 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -19838,7 +19816,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 19841 \"configure\"\n+#line 19819 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H"}, {"sha": "7c55bff6cb0621a49f3d2fa95e5b6532344e64c3", "filename": "gcc/configure.ac", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -1253,21 +1253,6 @@ else\n fi\n AC_SUBST(GENERATED_MANPAGES)\n \n-# See if sphinx-build has been installed and is modern enough\n-# that we can use it.\n-AC_MSG_CHECKING([for sphinx-build])\n-if sphinx-build -j auto -h &>/dev/null ; then\n-  SPHINX_BUILD=sphinx-build\n-  AC_MSG_RESULT(yes)\n-else\n-  AC_MSG_WARN([\n-  *** sphinx-build is missing or too old.\n-  *** Info and man pages documentation will not be built.])\n-  AC_MSG_RESULT(no)\n-  SPHINX_BUILD=\n-fi\n-AC_SUBST(SPHINX_BUILD)\n-\n MISSING=\"${CONFIG_SHELL-/bin/sh} $ac_aux_dir/missing\"\n \n # How about lex?"}, {"sha": "291835d326ee5ac9b2dc92d58989992361f8feae", "filename": "gcc/cp/Make-lang.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fcp%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fcp%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FMake-lang.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -285,7 +285,7 @@ c++.install-common: installdirs\n \n # We can't use links because not everyone supports them.  So just copy the\n # manpage.\n-doc/g++.1: doc/gcc/man/man/gcc.1\n+doc/g++.1: doc/gcc.1\n \tcp $< doc/g++.1\n \n c++.install-man: $(DESTDIR)$(man1dir)/$(GXX_INSTALL_NAME)$(man1ext)"}, {"sha": "6f9b2e5c26a140e2468babe48073a200ac1bd606", "filename": "gcc/d/Make-lang.in", "status": "modified", "additions": 35, "deletions": 25, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fd%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fd%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2FMake-lang.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -236,28 +236,48 @@ d21$(exeext): $(D_ALL_OBJS) attribs.o $(BACKEND) $(LIBDEPS) $(d.prev)\n \t@$(call LINK_PROGRESS,$(INDEX.d),end)\n \n # Documentation.\n-doc/gdc/info/texinfo/gdc.info: $(SPHINX_FILES)\n-\t+ if [ x$(SPHINX_BUILD) = xsphinx-build ]; then \\\n-\t  make -C $(srcdir)/../doc info SOURCEDIR=$(abs_srcdir)/d/doc BUILDDIR=$(objdir)/doc/gdc/info; \\\n+\n+D_TEXI_FILES = \\\n+\td/gdc.texi \\\n+\t$(gcc_docdir)/include/fdl.texi \\\n+\t$(gcc_docdir)/include/gpl_v3.texi \\\n+\t$(gcc_docdir)/include/gcc-common.texi \\\n+\tgcc-vers.texi\n+\n+doc/gdc.info: $(D_TEXI_FILES)\n+\tif test \"x$(BUILD_INFO)\" = xinfo; then \\\n+\t  rm -f doc/gdc.info*; \\\n+\t  $(MAKEINFO) $(MAKEINFOFLAGS) -I $(gcc_docdir) \\\n+\t\t-I $(gcc_docdir)/include -o $@ $<; \\\n \telse true; fi\n \n+doc/gdc.dvi: $(D_TEXI_FILES)\n+\t$(TEXI2DVI) -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n+\n doc/gdc.pdf: $(D_TEXI_FILES)\n \t$(TEXI2PDF) -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n \n-doc/gdc/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_srcdir)/d/doc BUILDDIR=$(objdir)/doc/gdc/html\n+$(build_htmldir)/d/index.html: $(D_TEXI_FILES)\n+\t$(mkinstalldirs) $(@D)\n+\trm -f $(@D)/*\n+\t$(TEXI2HTML) -I $(gcc_docdir) -I $(gcc_docdir)/include \\\n+\t\t-I $(srcdir)/d -o $(@D) $<\n+\n+.INTERMEDIATE: gdc.pod\n+\n+gdc.pod: d/gdc.texi\n+\t-$(TEXI2POD) -D gdc < $< > $@\n+\n # Build hooks.\n \n d.all.cross: gdc-cross$(exeext)\n d.start.encap: gdc$(exeext)\n d.rest.encap:\n-d.info: doc/gdc/info/texinfo/gdc.info\n-gdc.info: doc/gdc/info/texinfo/gdc.info\n-d.pdf: doc/gdc/pdf/latex/gdc.pdf\n-gdc.pdf: doc/gdc/pdf/latex/gdc.pdf\n-d.html: doc/gdc/html/html/index.html\n-gdc.html: doc/gdc/html/html/index.html\n-d.srcinfo: doc/gdc/info/texinfo/gdc.info\n+d.info: doc/gdc.info\n+d.dvi: doc/gdc.dvi\n+d.pdf: doc/gdc.pdf\n+d.html: $(build_htmldir)/d/index.html\n+d.srcinfo: doc/gdc.info\n \t-cp -p $^ $(srcdir)/doc\n d.srcextra:\n \n@@ -266,13 +286,10 @@ d.tags: force\n \t$(ETAGS) -o TAGS.sub *.cc *.h dmd/*.h dmd/root/*.h; \\\n \t$(ETAGS) --include TAGS.sub --include ../TAGS.sub\n \n-d.man: doc/gdc/man/man/gdc.1\n-d.srcman: doc/gdc/man/man/gdc.1\n+d.man: doc/gdc.1\n+d.srcman: doc/gdc.1\n \t-cp -p $^ $(srcdir)/doc\n \n-doc/gdc/man/man/gdc.1: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc man SOURCEDIR=$(abs_srcdir)/d/doc BUILDDIR=$(objdir)/doc/gdc/man\n-\n # 'make check' in gcc/ looks for check-d, as do all toplevel D-related\n # check targets.  However, our DejaGNU framework requires 'check-gdc' as its\n # entry point.  We feed the former to the latter here.\n@@ -303,13 +320,6 @@ d.install-plugin:\n \n d.install-info: $(DESTDIR)$(infodir)/gdc.info\n \n-doc/gdc/pdf/latex/gdc.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_srcdir)/d/doc BUILDDIR=$(objdir)/doc/gdc/pdf\n-\n-$(DESTDIR)$(infodir)/gdc.info: doc/gdc/info/texinfo/gdc.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n d.install-pdf: doc/gdc.pdf\n \t@$(NORMAL_INSTALL)\n \ttest -z \"$(pdfdir)\" || $(mkinstalldirs) \"$(DESTDIR)$(pdfdir)/gcc\"\n@@ -349,7 +359,7 @@ d.install-html: $(build_htmldir)/d\n \n d.install-man: $(DESTDIR)$(man1dir)/$(D_INSTALL_NAME)$(man1ext)\n \n-$(DESTDIR)$(man1dir)/$(D_INSTALL_NAME)$(man1ext): doc/gdc/man/man/gdc.1 installdirs\n+$(DESTDIR)$(man1dir)/$(D_INSTALL_NAME)$(man1ext): doc/gdc.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@"}, {"sha": "1cb47cb1a5287cdccc7cede803d94cd6798295f7", "filename": "gcc/fortran/Make-lang.in", "status": "modified", "additions": 75, "deletions": 30, "changes": 105, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Ffortran%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Ffortran%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FMake-lang.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -109,23 +109,32 @@ fortran.all.cross: gfortran-cross$(exeext)\n fortran.start.encap: gfortran$(exeext)\n fortran.rest.encap:\n \n-fortran.srcinfo: doc/gfortran/info/texinfo/gfortran.info\n+fortran.srcinfo: doc/gfortran.info\n \t-cp -p $^ $(srcdir)/fortran\n \n fortran.tags: force\n \tcd $(srcdir)/fortran; $(ETAGS) -o TAGS.sub *.cc *.h; \\\n \t$(ETAGS) --include TAGS.sub --include ../TAGS.sub\n \n-fortran.info: doc/gfortran/info/texinfo/gfortran.info doc/gfc-internals/info/texinfo/gfc-internals.info\n+fortran.info: doc/gfortran.info doc/gfc-internals.info\n \n-doc/gfortran/info/texinfo/gfortran.info: $(SPHINX_FILES)\n-\t+ if [ x$(SPHINX_BUILD) = xsphinx-build ]; then \\\n-\t  make -C $(srcdir)/../doc info SOURCEDIR=$(abs_srcdir)/fortran/doc/gfortran BUILDDIR=$(objdir)/doc/gfortran/info; \\\n-\telse true; fi\n+F95_DVIFILES = doc/gfortran.dvi\n+\n+fortran.dvi: $(F95_DVIFILES) doc/gfc-internals.dvi\n \n-F95_HTMLFILES = doc/fortran/html/html/index.html\n+fortran.install-dvi: $(F95_DVIFILES)\n+\t@$(NORMAL_INSTALL)\n+\ttest -z \"$(dvidir)/gcc\" || $(mkinstalldirs) \"$(DESTDIR)$(dvidir)/gcc\"\n+\t@list='$(F95_DVIFILES)'; for p in $$list; do \\\n+\t  if test -f \"$$p\"; then d=; else d=\"$(srcdir)/\"; fi; \\\n+\t  f=$(dvi__strip_dir) \\\n+\t  echo \" $(INSTALL_DATA) '$$d$$p' '$(DESTDIR)$(dvidir)/gcc/$$f'\"; \\\n+\t  $(INSTALL_DATA) \"$$d$$p\" \"$(DESTDIR)$(dvidir)/gcc/$$f\"; \\\n+\tdone\n \n-fortran.html: $(F95_HTMLFILES) doc/gfc-internals/html/html/index.html\n+F95_HTMLFILES = $(build_htmldir)/gfortran\n+\n+fortran.html: $(F95_HTMLFILES)/index.html\n \n fortran.install-html: $(F95_HTMLFILES)\n \t@$(NORMAL_INSTALL)\n@@ -144,9 +153,9 @@ fortran.install-html: $(F95_HTMLFILES)\n \t  fi; \\\n \tdone\n \n-F95_PDFFILES = doc/fortran/pdf/latex/gfortran.pdf\n+F95_PDFFILES = doc/gfortran.pdf\n \n-fortran.pdf: $(F95_PDFFILES) doc/gfc-internals/pdf/latex/gfc-internals.pdf\n+fortran.pdf: $(F95_PDFFILES) doc/gfc-internals.pdf\n \n fortran.install-pdf: $(F95_PDFFILES)\n \t@$(NORMAL_INSTALL)\n@@ -158,10 +167,7 @@ fortran.install-pdf: $(F95_PDFFILES)\n \t  $(INSTALL_DATA) \"$$d$$p\" \"$(DESTDIR)$(pdfdir)/gcc/$$f\"; \\\n \tdone\n \n-F95_MANFILES = doc/gfortran/man/man/gfortran.1\n-\n-doc/gfortran/man/man/gfortran.1: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc man SOURCEDIR=$(abs_srcdir)/fortran/doc/gfortran BUILDDIR=$(objdir)/doc/gfortran/man\n+F95_MANFILES = doc/gfortran.1\n \n fortran.man: $(F95_MANFILES)\n \n@@ -182,23 +188,60 @@ check_gfortran_parallelize = 10000\n # No fortran-specific selftests\n selftest-fortran:\n \n-doc/fortran/pdf/latex/gfortran.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_srcdir)/fortran/doc/gfortran BUILDDIR=$(objdir)/doc/fortran/pdf\n+# GFORTRAN documentation.\n+GFORTRAN_TEXI = \\\n+  $(srcdir)/fortran/gfortran.texi \\\n+  $(srcdir)/fortran/intrinsic.texi \\\n+  $(srcdir)/fortran/invoke.texi \\\n+  $(srcdir)/doc/include/fdl.texi \\\n+  $(srcdir)/doc/include/gpl_v3.texi \\\n+  $(srcdir)/doc/include/funding.texi \\\n+  $(srcdir)/doc/include/gcc-common.texi \\\n+  gcc-vers.texi\n+\n+doc/gfortran.info: $(GFORTRAN_TEXI)\n+\tif [ x$(BUILD_INFO) = xinfo ]; then \\\n+\t  rm -f doc/gfortran.info-*; \\\n+\t  $(MAKEINFO) -I $(srcdir)/doc/include -I $(srcdir)/fortran \\\n+\t    -o $@ $<; \\\n+\telse true; fi\n+\n+doc/gfortran.dvi: $(GFORTRAN_TEXI)\n+\t$(TEXI2DVI) -I $(srcdir)/fortran -I $(abs_docdir)/include -o $@ $<\n \n-doc/fortran/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_srcdir)/fortran/doc/gfortran BUILDDIR=$(objdir)/doc/fortran/html\n+doc/gfortran.pdf: $(GFORTRAN_TEXI)\n+\t$(TEXI2PDF) -I $(srcdir)/fortran -I $(abs_docdir)/include -o $@ $<\n+\n+$(build_htmldir)/gfortran/index.html: $(GFORTRAN_TEXI)\n+\t$(mkinstalldirs) $(@D)\n+\trm -f $(@D)/*\n+\t$(TEXI2HTML) -I $(gcc_docdir)/include -I $(srcdir)/fortran -o $(@D) $<\n+\n+.INTERMEDIATE: gfortran.pod\n+\n+gfortran.pod: $(GFORTRAN_TEXI)\n+\t-$(TEXI2POD) -DBUGURL=\"$(BUGURL_TEXI)\" \\\n+\t  < $(srcdir)/fortran/invoke.texi > $@\n \n # GFORTRAN internals documentation.\n-doc/gfc-internals/info/texinfo/gfc-internals.info: $(SPHINX_FILES)\n-\t+ if [ x$(SPHINX_BUILD) = xsphinx-build ]; then \\\n-\t  make -C $(srcdir)/../doc info SOURCEDIR=$(abs_srcdir)/fortran/doc/gfc-internals BUILDDIR=$(objdir)/doc/gfc-internals/info; \\\n+GFC_INTERNALS_TEXI = \\\n+  $(srcdir)/fortran/gfc-internals.texi \\\n+  $(srcdir)/doc/include/fdl.texi \\\n+  $(srcdir)/doc/include/gcc-common.texi \\\n+  gcc-vers.texi\n+\n+doc/gfc-internals.info: $(GFC_INTERNALS_TEXI)\n+\tif [ x$(BUILD_INFO) = xinfo ]; then \\\n+\t  rm -f doc/gfc-internals.info-*; \\\n+\t  $(MAKEINFO) -I $(srcdir)/doc/include -I $(srcdir)/fortran \\\n+\t    -o $@ $<; \\\n \telse true; fi\n \n-doc/gfc-internals/pdf/latex/gfc-internals.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_srcdir)/fortran/doc/gfc-internals BUILDDIR=$(objdir)/doc/gfc-internals/pdf\n+doc/gfc-internals.dvi: $(GFC_INTERNALS_TEXI)\n+\t$(TEXI2DVI) -I $(srcdir)/fortran -I $(abs_docdir)/include -o $@ $<\n \n-doc/gfc-internals/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_srcdir)/fortran/doc/gfc-internals BUILDDIR=$(objdir)/doc/gfc-internals/html\n+doc/gfc-internals.pdf: $(GFC_INTERNALS_TEXI)\n+\t$(TEXI2PDF) -I $(srcdir)/fortran -I $(abs_docdir)/include -o $@ $<\n \n # Create or recreate the gfortran private include file directory.\n install-finclude-dir: installdirs\n@@ -226,13 +269,9 @@ fortran.install-plugin:\n \n fortran.install-info: $(DESTDIR)$(infodir)/gfortran.info\n \n-$(DESTDIR)$(infodir)/gfortran.info: doc/gfortran/info/texinfo/gfortran.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n fortran.install-man: $(DESTDIR)$(man1dir)/$(GFORTRAN_INSTALL_NAME)$(man1ext)\n \n-$(DESTDIR)$(man1dir)/$(GFORTRAN_INSTALL_NAME)$(man1ext): doc/gfortran/man/man/gfortran.1 \\\n+$(DESTDIR)$(man1dir)/$(GFORTRAN_INSTALL_NAME)$(man1ext): doc/gfortran.1 \\\n \t\tinstalldirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n@@ -260,6 +299,12 @@ fortran.mostlyclean:\n fortran.clean:\n fortran.distclean:\n \t-rm -f fortran/config.status fortran/Makefile\n+\n+fortran.extraclean:\n+fortran.maintainer-clean:\n+\t-rm -f doc/gfortran.info* fortran/gfortran.*aux\n+\t-rm -f $(docobjdir)/gfortran.1\n+\n #\f\n # Stage hooks:\n # The toplevel makefile has already created stage?/fortran at this point."}, {"sha": "6bae85d7b8dcf1b69513beee4e9b0ea0be960319", "filename": "gcc/genhooks.cc", "status": "modified", "additions": 185, "deletions": 50, "changes": 235, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fgenhooks.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fgenhooks.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenhooks.cc?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -48,76 +48,211 @@ upstrdup (const char *in)\n   return ret;\n }\n \n-/* Emit shared .rst.in file that is used by the corresponding\n-   .. include:: tm.rst.in\n-     :start-after: [HOOK_NAME]\n-     :end-before: [HOOK_NAME]\n+/* Struct for 'start hooks' which start a sequence of consecutive hooks\n+   that are defined in target.def and to be documented in tm.texi.  */\n+struct s_hook\n+{\n+  char *name;\n+  int pos;\n+};\n+\n+static hashval_t\n+s_hook_hash (const void *p)\n+{\n+  const struct s_hook *s_hook = (const struct s_hook *)p;\n+  return htab_hash_string (s_hook->name);\n+}\n \n+static int\n+s_hook_eq_p (const void *p1, const void *p2)\n+{\n+  return (strcmp (((const struct s_hook *) p1)->name, \n+\t\t  ((const struct s_hook *) p2)->name) == 0);\n+}\n+\n+/* Read the documentation file with name IN_FNAME, perform substitutions\n+   to incorporate information from hook_array, and emit the result on stdout.\n+   Hooks defined with DEFHOOK / DEFHOOKPOD are emitted at the place of a\n+   matching @hook in the input file; if there is no matching @hook, the\n+   hook is emitted after the hook that precedes it in target.def .\n+   Usually, the emitted hook documentation starts with the hook\n+   signature, followed by the string from the doc field.\n+   The documentation is bracketed in @deftypefn / @deftypevr and a matching\n+   @end.\n+   While emitting the doc field, an @findex entry is added\n+   to the affected paragraph.\n    If the doc field starts with '*', the leading '*' is stripped, and the doc\n    field is otherwise emitted unaltered; no function signature/\n    @deftypefn/deftypevr/@end is emitted.\n    In particular, a doc field of \"*\" means not to emit any ocumentation for\n    this target.def / hook_array entry at all (there might be documentation\n    for this hook in the file named IN_FNAME, though).\n-\n-   This allows all the free-form\n+   A doc field of 0 is used to append the hook signature after the previous\n+   hook's signture, so that one description can be used for a group of hooks.\n+   When the doc field is \"\", @deftypefn/@deftypevr and the hook signature\n+   is emitted, but not the matching @end.  This allows all the free-form\n    documentation to be placed in IN_FNAME, to work around GPL/GFDL\n    licensing incompatibility issues.  */\n-\n static void\n-emit_documentation (void)\n+emit_documentation (const char *in_fname)\n {\n+  int i, j;\n+  char buf[1000];\n+  htab_t start_hooks = htab_create (99, s_hook_hash, s_hook_eq_p, (htab_del) 0);\n+  FILE *f;\n+\n+  /* Enter all the start hooks in start_hooks.  */\n+  f = fopen (in_fname, \"r\");\n+  if (!f)\n+    {\n+      perror (\"\");\n+      fatal (\"Couldn't open input file\");\n+    }\n+  while (fscanf (f, \"%*[^@]\"), buf[0] = '\\0',\n+\t fscanf (f, \"@%5[^ \\n]\", buf) != EOF)\n+    {\n+      void **p;\n+      struct s_hook *shp;\n+\n+      if (strcmp (buf, \"hook\") != 0)\n+\tcontinue;\n+      buf[0] = '\\0';\n+      fscanf (f, \"%999s\", buf);\n+      shp = XNEW (struct s_hook);\n+      shp->name = upstrdup (buf);\n+      shp->pos = -1;\n+      p = htab_find_slot (start_hooks, shp, INSERT);\n+      if (*p != HTAB_EMPTY_ENTRY)\n+\tfatal (\"Duplicate placement for hook %s\\n\", shp->name);\n+      *(struct s_hook **) p = shp;\n+    }\n+  fclose (f);\n   /* For each hook in hook_array, if it is a start hook, store its position.  */\n-  for (int i = 0; i < (int) (ARRAY_SIZE (hook_array)); i++)\n+  for (i = 0; i < (int) (ARRAY_SIZE (hook_array)); i++)\n     {\n-      if (hook_array[i].doc == NULL\n-\t  || strcmp (hook_array[i].doc, \"\") == 0\n-\t  || strcmp (hook_array[i].doc, \"*\") == 0)\n+      struct s_hook sh, *shp;\n+      void *p;\n+\n+      if (!hook_array[i].doc || strcmp (hook_array[i].doc, \"*\") == 0)\n \tcontinue;\n-      const char *hook_name = upstrdup (hook_array[i].name);\n-      printf (\"[%s]\\n\", hook_name);\n-      /* Print header.  Function-valued hooks have a parameter list,\n-\t unlike POD-valued ones.  */\n-      const char *deftype = hook_array[i].param ? \"function\" : \"c:var\";\n-      printf (\".. %s:: \", deftype);\n-      if (strchr (hook_array[i].type, ' '))\n-\tprintf (\"%s\", hook_array[i].type);\n-      else\n-\tprintf (\"%s\", hook_array[i].type);\n-      printf (\" %s\", hook_name);\n-      if (hook_array[i].param)\n+      sh.name = upstrdup (hook_array[i].name);\n+      p = htab_find (start_hooks, &sh);\n+      if (p)\n \t{\n-\t  const char *q, *e;\n-\t  /* Print the parameter list, with the parameter names\n-\t     enclosed in @var{}.  */\n-\t  printf (\" \");\n-\t  for (q = hook_array[i].param; (e = strpbrk (q, \" *,)\"));\n-\t       q = e + 1)\n-\t    /* Type names like 'int' are followed by a space, sometimes\n-\t       also by '*'.  'void' should appear only in \"(void)\".  */\n-\t    if (*e == ' ' || *e == '*' || *q == '(')\n-\t      printf (\"%.*s\", (int) (e - q + 1), q);\n-\t    else\n-\t      printf (\"%.*s%c\", (int) (e - q), q, *e);\n+\t  shp = (struct s_hook *) p;\n+\t  if (shp->pos >= 0)\n+\t    fatal (\"Duplicate hook %s\\n\", sh.name);\n+\t  shp->pos = i;\n \t}\n+      else\n+\tfatal (\"No place specified to document hook %s\\n\", sh.name);\n+      free (sh.name);\n+    }\n+  /* Copy input file to stdout, substituting @hook directives with the\n+     corresponding hook documentation sequences.  */\n+  f = fopen (in_fname, \"r\");\n+  if (!f)\n+    {\n+      perror (\"\");\n+      fatal (\"Couldn't open input file\");\n+    }\n+  for (;;)\n+    {\n+      struct s_hook sh, *shp;\n+      int c = getc (f);\n+      char *name;\n \n-      printf (\"\\n\");\n-      if (hook_array[i].doc[0])\n+      if (c == EOF)\n+\tbreak;\n+      if (c != '@')\n+\t{\n+\t  putchar (c);\n+\t  continue;\n+\t}\n+      buf[0] = '\\0';\n+      fscanf (f, \"%5[^ \\n]\", buf);\n+      if (strcmp (buf, \"hook\") != 0)\n+\t{\n+\t  printf (\"@%s\", buf);\n+\t  continue;\n+\t}\n+      fscanf (f, \"%999s\", buf);\n+      sh.name = name = upstrdup (buf);\n+      shp = (struct s_hook *) htab_find (start_hooks, &sh);\n+      if (!shp || shp->pos < 0)\n+\tfatal (\"No documentation for hook %s\\n\", sh.name);\n+      i = shp->pos;\n+      do\n \t{\n+\t  const char *q, *e;\n+\t  const char *deftype;\n \t  const char *doc, *p_end;\n-\t  printf (\"\\n\");\n-\t  /* Print each documentation paragraph in turn.  */\n-\t  for (doc = hook_array[i].doc; *doc; doc = p_end)\n+\n+\t  /* A leading '*' means to output the documentation string without\n+\t     further processing.  */\n+\t  if (*hook_array[i].doc == '*')\n+\t    printf (\"%s\", hook_array[i].doc + 1);\n+\t  else\n \t    {\n-\t      /* Find paragraph end.  */\n-\t      p_end = strstr (doc, \"\\n\");\n-\t      p_end = (p_end ? p_end + 1 : doc + strlen (doc));\n-\t      printf (\"  %.*s\", (int) (p_end - doc), doc);\n+\t      if (i != shp->pos)\n+\t\tprintf (\"\\n\\n\");\n+\n+\t      /* Print header.  Function-valued hooks have a parameter list, \n+\t\t unlike POD-valued ones.  */\n+\t      deftype = hook_array[i].param ? \"deftypefn\" : \"deftypevr\";\n+\t      printf (\"@%s {%s} \", deftype, hook_array[i].docname);\n+\t      if (strchr (hook_array[i].type, ' '))\n+\t\tprintf (\"{%s}\", hook_array[i].type);\n+\t      else\n+\t\tprintf (\"%s\", hook_array[i].type);\n+\t      printf (\" %s\", name);\n+\t      if (hook_array[i].param)\n+\t\t{\n+\t\t  /* Print the parameter list, with the parameter names\n+\t\t     enclosed in @var{}.  */\n+\t\t  printf (\" \");\n+\t\t  for (q = hook_array[i].param; (e = strpbrk (q, \" *,)\"));\n+\t\t       q = e + 1)\n+\t\t    /* Type names like 'int' are followed by a space, sometimes\n+\t\t       also by '*'.  'void' should appear only in \"(void)\".  */\n+\t\t    if (*e == ' ' || *e == '*' || *q == '(')\n+\t\t      printf (\"%.*s\", (int) (e - q + 1), q);\n+\t\t    else\n+\t\t      printf (\"@var{%.*s}%c\", (int) (e - q), q, *e);\n+\t\t}\n+\t      /* POD-valued hooks sometimes come in groups with common\n+\t\t documentation.*/\n+\t      for (j = i + 1;\n+\t\t   j < (int) (ARRAY_SIZE (hook_array))\n+\t\t   && hook_array[j].doc == 0 && hook_array[j].type; j++)\n+\t\t{\n+\t\t  char *namex = upstrdup (hook_array[j].name);\n+\n+\t\t  printf (\"\\n@%sx {%s} {%s} %s\",\n+\t\t\t  deftype, hook_array[j].docname,\n+\t\t\t  hook_array[j].type, namex);\n+\t\t}\n+\t      if (hook_array[i].doc[0])\n+\t\t{\n+\t\t  printf (\"\\n\");\n+\t\t  /* Print each documentation paragraph in turn.  */\n+\t\t  for (doc = hook_array[i].doc; *doc; doc = p_end)\n+\t\t    {\n+\t\t      /* Find paragraph end.  */\n+\t\t      p_end = strstr (doc, \"\\n\\n\");\n+\t\t      p_end = (p_end ? p_end + 2 : doc + strlen (doc));\n+\t\t      printf (\"%.*s\", (int) (p_end - doc), doc);\n+\t\t    }\n+\t\t  printf (\"\\n@end %s\", deftype);\n+\t\t}\n \t    }\n-\t  printf (\"\\n\");\n+\t  if (++i >= (int) (ARRAY_SIZE (hook_array)) || !hook_array[i].doc)\n+\t    break;\n+\t  free (name);\n+\t  sh.name = name = upstrdup (hook_array[i].name);\n \t}\n-\n-      printf (\"\\n[%s]\\n\\n\", hook_name);\n+      while (!htab_find (start_hooks, &sh));\n+      free (name);\n     }\n }\n \n@@ -178,8 +313,8 @@ main (int argc, char **argv)\n {\n   progname = \"genhooks\";\n \n-  if (argc == 1)\n-    emit_documentation ();\n+  if (argc >= 3)\n+    emit_documentation (argv[2]);\n   else\n     emit_init_macros (argv[1]);\n   return 0;"}, {"sha": "0e81268ece32a38eeeb7660699a1a1514faaac51", "filename": "gcc/go/Make-lang.in", "status": "modified", "additions": 36, "deletions": 29, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fgo%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/gcc%2Fgo%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2FMake-lang.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -88,46 +88,57 @@ go1$(exeext): $(GO_OBJS) attribs.o $(BACKEND) $(LIBDEPS) $(go.prev)\n \n # Documentation.\n \n-doc/gccgo/info/texinfo/gccgo.info: $(SPHINX_FILES)\n-\t+ if [ x$(SPHINX_BUILD) = xsphinx-build ]; then \\\n-\t  make -C $(srcdir)/../doc info SOURCEDIR=$(abs_srcdir)/go/doc/ BUILDDIR=$(objdir)/doc/gccgo/info; \\\n+GO_TEXI_FILES = \\\n+\tgo/gccgo.texi \\\n+\t$(gcc_docdir)/include/fdl.texi \\\n+\t$(gcc_docdir)/include/gpl_v3.texi \\\n+\t$(gcc_docdir)/include/gcc-common.texi \\\n+\tgcc-vers.texi\n+\n+doc/gccgo.info: $(GO_TEXI_FILES)\n+\tif test \"x$(BUILD_INFO)\" = xinfo; then \\\n+\t  rm -f doc/gccgo.info*; \\\n+\t  $(MAKEINFO) $(MAKEINFOFLAGS) -I $(gcc_docdir) \\\n+\t\t-I $(gcc_docdir)/include -o $@ $<; \\\n \telse true; fi\n \n-doc/gccgo/pdf/latex/gccgo.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_srcdir)/go/doc/ BUILDDIR=$(objdir)/doc/gccgo/pdf\n+doc/gccgo.dvi: $(GO_TEXI_FILES)\n+\t$(TEXI2DVI) -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n \n-doc/gccgo/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_srcdir)/go/doc/ BUILDDIR=$(objdir)/doc/gccgo/html\n+doc/gccgo.pdf: $(GO_TEXI_FILES)\n+\t$(TEXI2PDF) -I $(abs_docdir) -I $(abs_docdir)/include -o $@ $<\n+\n+$(build_htmldir)/go/index.html: $(GO_TEXI_FILES)\n+\t$(mkinstalldirs) $(@D)\n+\trm -f $(@D)/*\n+\t$(TEXI2HTML) -I $(gcc_docdir) -I $(gcc_docdir)/include \\\n+\t\t-I $(srcdir)/go -o $(@D) $<\n+\n+.INTERMEDIATE: gccgo.pod\n+\n+gccgo.pod: go/gccgo.texi\n+\t-$(TEXI2POD) -D gccgo < $< > $@\n \n # Build hooks.\n \n go.all.cross: gccgo-cross$(exeext)\n go.start.encap: gccgo$(exeext)\n go.rest.encap:\n-\n-go.info: doc/gccgo/info/texinfo/gccgo.info\n-\n-go.pdf: doc/gccgo/pdf/latex/gccgo.pdf\n-\n-go.html: doc/gccgo/html/html/index.html\n-\n-go.srcinfo: doc/gccgo/info/texinfo/gccgo.info\n+go.info: doc/gccgo.info\n+go.dvi: doc/gccgo.dvi\n+go.pdf: doc/gccgo.pdf\n+go.html: $(build_htmldir)/go/index.html\n+go.srcinfo: doc/gccgo.info\n \t-cp -p $^ $(srcdir)/doc\n-\n go.srcextra:\n go.tags: force\n \tcd $(srcdir)/go; \\\n \t$(ETAGS) -o TAGS.sub *.cc *.h gofrontend/*.h gofrontend/*.cc; \\\n \t$(ETAGS) --include TAGS.sub --include ../TAGS.sub\n-\n-go.man: doc/gccgo/man/man/gccgo.1\n-\n-go.srcman: doc/gccgo/man/man/gccgo.1\n+go.man: doc/gccgo.1\n+go.srcman: doc/gccgo.1\n \t-cp -p $^ $(srcdir)/doc\n \n-doc/gccgo/man/man/gccgo.1: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc man SOURCEDIR=$(abs_srcdir)/go/doc BUILDDIR=$(objdir)/doc/gccgo/man\n-\n lang_checks += check-go\n lang_checks_parallelized += check-go\n check_go_parallelize = 10\n@@ -154,10 +165,6 @@ go.install-plugin:\n \n go.install-info: $(DESTDIR)$(infodir)/gccgo.info\n \n-$(DESTDIR)$(infodir)/gccgo.info: doc/gccgo/info/texinfo/gccgo.info installdirs\n-\t-rm -f $@\n-\t-$(INSTALL_DATA) $< $@\n-\n go.install-pdf: doc/gccgo.pdf\n \t@$(NORMAL_INSTALL)\n \ttest -z \"$(pdfdir)\" || $(mkinstalldirs) \"$(DESTDIR)$(pdfdir)/gcc\"\n@@ -187,7 +194,7 @@ go.install-html: $(build_htmldir)/go\n \n go.install-man: $(DESTDIR)$(man1dir)/$(GCCGO_INSTALL_NAME)$(man1ext)\n \n-$(DESTDIR)$(man1dir)/$(GCCGO_INSTALL_NAME)$(man1ext): doc/gccgo/man/man/gccgo.1 installdirs\n+$(DESTDIR)$(man1dir)/$(GCCGO_INSTALL_NAME)$(man1ext): doc/gccgo.1 installdirs\n \t-rm -f $@\n \t-$(INSTALL_DATA) $< $@\n \t-chmod a-x $@\n@@ -207,7 +214,7 @@ go.mostlyclean:\n go.clean:\n go.distclean:\n go.maintainer-clean:\n-\t-rm -f doc/doc/gccgo/man/man/gccgo.1\n+\t-rm -f $(docobjdir)/gccgo.1\n \n # Stage hooks.\n "}, {"sha": "8ffd45c9c418e8d1b8282d421b321e4b28b67f28", "filename": "libgomp/Makefile.in", "status": "modified", "additions": 124, "deletions": 26, "changes": 150, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libgomp%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libgomp%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FMakefile.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -273,12 +273,45 @@ AM_V_DVIPS = $(am__v_DVIPS_@AM_V@)\n am__v_DVIPS_ = $(am__v_DVIPS_@AM_DEFAULT_V@)\n am__v_DVIPS_0 = @echo \"  DVIPS   \" $@;\n am__v_DVIPS_1 = \n-INFO_DEPS = doc/info/texinfo/libgomp.info\n-PDFS = doc/pdf/latex/libgomp.pdf\n-HTMLS = doc/html/html/index.html\n+AM_V_MAKEINFO = $(am__v_MAKEINFO_@AM_V@)\n+am__v_MAKEINFO_ = $(am__v_MAKEINFO_@AM_DEFAULT_V@)\n+am__v_MAKEINFO_0 = @echo \"  MAKEINFO\" $@;\n+am__v_MAKEINFO_1 = \n+AM_V_INFOHTML = $(am__v_INFOHTML_@AM_V@)\n+am__v_INFOHTML_ = $(am__v_INFOHTML_@AM_DEFAULT_V@)\n+am__v_INFOHTML_0 = @echo \"  INFOHTML\" $@;\n+am__v_INFOHTML_1 = \n+AM_V_TEXI2DVI = $(am__v_TEXI2DVI_@AM_V@)\n+am__v_TEXI2DVI_ = $(am__v_TEXI2DVI_@AM_DEFAULT_V@)\n+am__v_TEXI2DVI_0 = @echo \"  TEXI2DVI\" $@;\n+am__v_TEXI2DVI_1 = \n+AM_V_TEXI2PDF = $(am__v_TEXI2PDF_@AM_V@)\n+am__v_TEXI2PDF_ = $(am__v_TEXI2PDF_@AM_DEFAULT_V@)\n+am__v_TEXI2PDF_0 = @echo \"  TEXI2PDF\" $@;\n+am__v_TEXI2PDF_1 = \n+AM_V_texinfo = $(am__v_texinfo_@AM_V@)\n+am__v_texinfo_ = $(am__v_texinfo_@AM_DEFAULT_V@)\n+am__v_texinfo_0 = -q\n+am__v_texinfo_1 = \n+AM_V_texidevnull = $(am__v_texidevnull_@AM_V@)\n+am__v_texidevnull_ = $(am__v_texidevnull_@AM_DEFAULT_V@)\n+am__v_texidevnull_0 = > /dev/null\n+am__v_texidevnull_1 = \n+INFO_DEPS = libgomp.info\n+am__TEXINFO_TEX_DIR = $(srcdir)/../gcc/doc/include\n+DVIS = libgomp.dvi\n+PDFS = libgomp.pdf\n+PSS = libgomp.ps\n+HTMLS = libgomp.html\n+TEXINFOS = libgomp.texi\n+TEXI2DVI = texi2dvi\n+TEXI2PDF = $(TEXI2DVI) --pdf --batch\n+MAKEINFOHTML = $(MAKEINFO) --html\n+AM_MAKEINFOHTMLFLAGS = $(AM_MAKEINFOFLAGS)\n+DVIPS = dvips\n RECURSIVE_TARGETS = all-recursive check-recursive cscopelist-recursive \\\n-\tctags-recursive html-recursive info-recursive \\\n-\tinstall-data-recursive \\\n+\tctags-recursive dvi-recursive html-recursive info-recursive \\\n+\tinstall-data-recursive install-dvi-recursive \\\n \tinstall-exec-recursive install-html-recursive \\\n \tinstall-info-recursive install-pdf-recursive \\\n \tinstall-ps-recursive install-recursive installcheck-recursive \\\n@@ -365,6 +398,7 @@ LIPO = @LIPO@\n LN_S = @LN_S@\n LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n+MAKEINFO = @MAKEINFO@\n MKDIR_P = @MKDIR_P@\n NM = @NM@\n NMEDIT = @NMEDIT@\n@@ -407,7 +441,6 @@ XLDFLAGS = @XLDFLAGS@\n abs_builddir = @abs_builddir@\n abs_srcdir = @abs_srcdir@\n abs_top_builddir = @abs_top_builddir@\n-abs_doc_builddir = @abs_top_builddir@/doc\n abs_top_srcdir = @abs_top_srcdir@\n ac_ct_CC = @ac_ct_CC@\n ac_ct_DUMPBIN = @ac_ct_DUMPBIN@\n@@ -428,6 +461,7 @@ config_path = @config_path@\n datadir = @datadir@\n datarootdir = @datarootdir@\n docdir = @docdir@\n+dvidir = @dvidir@\n enable_shared = @enable_shared@\n enable_static = @enable_static@\n exec_prefix = @exec_prefix@\n@@ -560,6 +594,16 @@ LINK = $(LIBTOOL) --tag CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=link \\\n \t$(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LTLDFLAGS) -o $@\n \n \n+# Automake Documentation:\n+# If your package has Texinfo files in many directories, you can use the\n+# variable TEXINFO_TEX to tell Automake where to find the canonical\n+# `texinfo.tex' for your package. The value of this variable should be\n+# the relative path from the current `Makefile.am' to `texinfo.tex'.\n+TEXINFO_TEX = ../gcc/doc/include/texinfo.tex\n+\n+# Defines info, dvi, pdf and html targets\n+MAKEINFOFLAGS = -I $(srcdir)/../gcc/doc/include\n+info_TEXINFOS = libgomp.texi\n @GENINSRC_FALSE@STAMP_GENINSRC = \n \n # AM_CONDITIONAL on configure option --generated-files-in-srcdir\n@@ -580,7 +624,7 @@ all: config.h\n \t$(MAKE) $(AM_MAKEFLAGS) all-recursive\n \n .SUFFIXES:\n-.SUFFIXES: .c .f90 .lo .o .obj .ps\n+.SUFFIXES: .c .dvi .f90 .lo .o .obj .ps\n am--refresh: Makefile\n \t@:\n $(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am $(top_srcdir)/plugin/Makefrag.am $(top_srcdir)/../multilib.am $(am__configure_deps)\n@@ -792,11 +836,48 @@ clean-libtool:\n distclean-libtool:\n \t-rm -f libtool config.lt\n \n-doc/pdf/latex/libgomp.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/pdf\n+libgomp.dvi: libgomp.texi  \n+\t$(AM_V_TEXI2DVI)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\tMAKEINFO='$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir)' \\\n+\t$(TEXI2DVI) $(AM_V_texinfo) --build-dir=$(@:.dvi=.t2d) -o $@ $(AM_V_texidevnull) \\\n+\t`test -f 'libgomp.texi' || echo '$(srcdir)/'`libgomp.texi\n+\n+libgomp.pdf: libgomp.texi  \n+\t$(AM_V_TEXI2PDF)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\tMAKEINFO='$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir)' \\\n+\t$(TEXI2PDF) $(AM_V_texinfo) --build-dir=$(@:.pdf=.t2p) -o $@ $(AM_V_texidevnull) \\\n+\t`test -f 'libgomp.texi' || echo '$(srcdir)/'`libgomp.texi\n+\n+libgomp.html: libgomp.texi  \n+\t$(AM_V_MAKEINFO)rm -rf $(@:.html=.htp)\n+\t$(AM_V_at)if $(MAKEINFOHTML) $(AM_MAKEINFOHTMLFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) \\\n+\t -o $(@:.html=.htp) `test -f 'libgomp.texi' || echo '$(srcdir)/'`libgomp.texi; \\\n+\tthen \\\n+\t  rm -rf $@ && mv $(@:.html=.htp) $@; \\\n+\telse \\\n+\t  rm -rf $(@:.html=.htp); exit 1; \\\n+\tfi\n+.dvi.ps:\n+\t$(AM_V_DVIPS)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\t$(DVIPS) $(AM_V_texinfo) -o $@ $<\n+\n+uninstall-dvi-am:\n+\t@$(NORMAL_UNINSTALL)\n+\t@list='$(DVIS)'; test -n \"$(dvidir)\" || list=; \\\n+\tfor p in $$list; do \\\n+\t  $(am__strip_dir) \\\n+\t  echo \" rm -f '$(DESTDIR)$(dvidir)/$$f'\"; \\\n+\t  rm -f \"$(DESTDIR)$(dvidir)/$$f\"; \\\n+\tdone\n \n-doc/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/html\n+uninstall-html-am:\n+\t@$(NORMAL_UNINSTALL)\n+\t@list='$(HTMLS)'; test -n \"$(htmldir)\" || list=; \\\n+\tfor p in $$list; do \\\n+\t  $(am__strip_dir) \\\n+\t  echo \" rm -rf '$(DESTDIR)$(htmldir)/$$f'\"; \\\n+\t  rm -rf \"$(DESTDIR)$(htmldir)/$$f\"; \\\n+\tdone\n \n uninstall-info-am:\n \t@$(PRE_UNINSTALL)\n@@ -860,8 +941,8 @@ mostlyclean-aminfo:\n \t-rm -rf libgomp.t2d libgomp.t2p\n \n clean-aminfo:\n-\t-test -z \"doc/pdf/latex/libgomp.pdf libgomp.html\" \\\n-\t|| rm -rf doc/pdf/latex/libgomp.pdf libgomp.html\n+\t-test -z \"libgomp.dvi libgomp.pdf libgomp.ps libgomp.html\" \\\n+\t|| rm -rf libgomp.dvi libgomp.pdf libgomp.ps libgomp.html\n \n maintainer-clean-aminfo:\n \t@list='$(INFO_DEPS)'; for i in $$list; do \\\n@@ -1091,6 +1172,9 @@ distclean: distclean-recursive\n distclean-am: clean-am distclean-compile distclean-generic \\\n \tdistclean-hdr distclean-libtool distclean-local distclean-tags\n \n+dvi: dvi-recursive\n+\n+dvi-am: $(DVIS)\n \n html: html-recursive\n \n@@ -1103,6 +1187,23 @@ info-am: $(INFO_DEPS)\n install-data-am: install-info-am install-nodist_fincludeHEADERS \\\n \tinstall-nodist_libsubincludeHEADERS\n \n+install-dvi: install-dvi-recursive\n+\n+install-dvi-am: $(DVIS)\n+\t@$(NORMAL_INSTALL)\n+\t@list='$(DVIS)'; test -n \"$(dvidir)\" || list=; \\\n+\tif test -n \"$$list\"; then \\\n+\t  echo \" $(MKDIR_P) '$(DESTDIR)$(dvidir)'\"; \\\n+\t  $(MKDIR_P) \"$(DESTDIR)$(dvidir)\" || exit 1; \\\n+\tfi; \\\n+\tfor p in $$list; do \\\n+\t  if test -f \"$$p\"; then d=; else d=\"$(srcdir)/\"; fi; \\\n+\t  echo \"$$d$$p\"; \\\n+\tdone | $(am__base_list) | \\\n+\twhile read files; do \\\n+\t  echo \" $(INSTALL_DATA) $$files '$(DESTDIR)$(dvidir)'\"; \\\n+\t  $(INSTALL_DATA) $$files \"$(DESTDIR)$(dvidir)\" || exit $$?; \\\n+\tdone\n install-exec-am: install-exec-local install-nodist_toolexeclibHEADERS \\\n \tinstall-toolexeclibLTLIBRARIES\n \n@@ -1225,7 +1326,7 @@ ps: ps-recursive\n \n ps-am: $(PSS)\n \n-uninstall-am: uninstall-html-am uninstall-info-am \\\n+uninstall-am: uninstall-dvi-am uninstall-html-am uninstall-info-am \\\n \tuninstall-nodist_fincludeHEADERS \\\n \tuninstall-nodist_libsubincludeHEADERS \\\n \tuninstall-nodist_toolexeclibHEADERS uninstall-pdf-am \\\n@@ -1239,9 +1340,9 @@ uninstall-am: uninstall-html-am uninstall-info-am \\\n \tclean-toolexeclibLTLIBRARIES cscope cscopelist-am ctags \\\n \tctags-am dist-info distclean distclean-compile \\\n \tdistclean-generic distclean-hdr distclean-libtool \\\n-\tdistclean-local distclean-tags html html-am info \\\n+\tdistclean-local distclean-tags dvi dvi-am html html-am info \\\n \tinfo-am install install-am install-data install-data-am \\\n-\tinstall-exec install-exec-am \\\n+\tinstall-dvi install-dvi-am install-exec install-exec-am \\\n \tinstall-exec-local install-html install-html-am install-info \\\n \tinstall-info-am install-man install-nodist_fincludeHEADERS \\\n \tinstall-nodist_libsubincludeHEADERS \\\n@@ -1253,7 +1354,7 @@ uninstall-am: uninstall-html-am uninstall-info-am \\\n \tmaintainer-clean-local mostlyclean mostlyclean-aminfo \\\n \tmostlyclean-compile mostlyclean-generic mostlyclean-libtool \\\n \tmostlyclean-local pdf pdf-am ps ps-am tags tags-am uninstall \\\n-\tuninstall-am uninstall-html-am \\\n+\tuninstall-am uninstall-dvi-am uninstall-html-am \\\n \tuninstall-info-am uninstall-nodist_fincludeHEADERS \\\n \tuninstall-nodist_libsubincludeHEADERS \\\n \tuninstall-nodist_toolexeclibHEADERS uninstall-pdf-am \\\n@@ -1292,18 +1393,15 @@ env.o: libgomp_f.h\n \n all-local: $(STAMP_GENINSRC)\n \n-RST_FILES:=$(shell find $(srcdir) -name *.rst)\n-SPHINX_CONFIG_FILES:=$(srcdir)/doc/conf.py $(srcdir)/../doc/baseconf.py\n-SPHINX_FILES:=$(RST_FILES) $(SPHINX_CONFIG_FILES)\n-\n-export BUGURL=$(PACKAGE_BUGURL)\n-\n-stamp-geninsrc: doc/info/texinfo/libgomp.info\n+stamp-geninsrc: libgomp.info\n \tcp -p $(top_builddir)/libgomp.info $(srcdir)/libgomp.info\n \t@touch $@\n \n-doc/info/texinfo/libgomp.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/info\n+libgomp.info: $(STAMP_BUILD_INFO)\n+\n+stamp-build-info: libgomp.texi\n+\t$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) -o libgomp.info $(srcdir)/libgomp.texi\n+\t@touch $@\n \n # target overrides\n -include $(tmake_file)"}, {"sha": "1b17c2e3a47eba7aa75c1564116b06621ef32e1d", "filename": "libiberty/Makefile.in", "status": "modified", "additions": 25, "deletions": 18, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libiberty%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libiberty%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FMakefile.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -21,10 +21,6 @@\n \n libiberty_topdir = @libiberty_topdir@\n srcdir = @srcdir@\n-abs_srcdir = @abs_srcdir@\n-abs_docdir = @abs_srcdir@/doc\n-abs_top_builddir = @abs_top_builddir@\n-abs_doc_builddir = @abs_top_builddir@/doc\n \n prefix = @prefix@\n \n@@ -61,6 +57,7 @@ CC = @CC@\n CFLAGS = @CFLAGS@\n CPPFLAGS = @CPPFLAGS@\n RANLIB = @RANLIB@\n+MAKEINFO = @MAKEINFO@\n PERL = @PERL@\n \n PICFLAG = @PICFLAG@\n@@ -277,7 +274,7 @@ $(TESTLIB): $(REQUIRED_OFILES) $(CONFIGURED_OFILES)\n \t  $(REQUIRED_OFILES) $(CONFIGURED_OFILES)\n \t$(RANLIB) $(TESTLIB)\n \n-info: doc/texinfo/libiberty.info info-subdir\n+info: libiberty.info info-subdir\n install-info: install-info-subdir\n clean-info: clean-info-subdir\n \n@@ -299,7 +296,7 @@ install-dvi: $(LIBIBERTY_DVIFILES)\n \t  $(INSTALL_DATA) \"$$d$$p\" \"$(DESTDIR)$(dvidir)/$$f\"; \\\n \tdone\n \n-LIBIBERTY_PDFFILES = doc/pdf/latex/libiberty.pdf\n+LIBIBERTY_PDFFILES = libiberty.pdf\n \n pdf: $(LIBIBERTY_PDFFILES) pdf-subdir\n \n@@ -318,7 +315,7 @@ install-pdf: $(LIBIBERTY_PDFFILES)\n \tdone\n \n # html, install-html targets\n-HTMLS = doc/html/html/index.html\n+HTMLS = libiberty.html\n \n html: $(HTMLS)\n \n@@ -348,24 +345,34 @@ install-html-am: $(HTMLS)\n \t  fi; \\\n \tdone\n \n-RST_FILES:=$(shell find $(srcdir) -name *.rst)\n-SPHINX_CONFIG_FILES:=$(srcdir)/doc/conf.py $(srcdir)/../doc/baseconf.py\n-SPHINX_FILES:=$(RST_FILES) $(SPHINX_CONFIG_FILES)\n+TEXISRC = \\\n+\t$(srcdir)/libiberty.texi \\\n+\t$(srcdir)/copying-lib.texi \\\n+\t$(srcdir)/obstacks.texi \\\n+\t$(srcdir)/functions.texi\n \n-doc/texinfo/libiberty.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_docdir) BUILDDIR=$(abs_doc_builddir)/info\n+# Additional files that have texi snippets that need to be collected\n+# and sorted.  Some are here because the sources are imported from\n+# elsewhere.  Others represent headers in ../include.\n+TEXIFILES = fnmatch.txh pexecute.txh simple-object.txh\n \n-doc/pdf/latex/libiberty.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_docdir) BUILDDIR=$(abs_doc_builddir)/pdf\n+libiberty.info : $(srcdir)/libiberty.texi $(TEXISRC)\n+\t$(MAKEINFO) -I$(srcdir) $(srcdir)/libiberty.texi\n \n-doc/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_docdir) BUILDDIR=$(abs_doc_builddir)/html\n+libiberty.dvi : $(srcdir)/libiberty.texi $(TEXISRC)\n+\ttexi2dvi $(srcdir)/libiberty.texi\n+\n+libiberty.pdf : $(srcdir)/libiberty.texi $(TEXISRC)\n+\ttexi2pdf $(srcdir)/libiberty.texi\n+\n+libiberty.html : $(srcdir)/libiberty.texi $(TEXISRC)\n+\t$(MAKEINFO) --no-split --html -I$(srcdir) -o $@ $<\n \n @MAINT@$(srcdir)/functions.texi : stamp-functions\n @MAINT@\t@true\n \n-@MAINT@stamp-functions : $(CFILES:%=$(srcdir)/%) $(srcdir)/gather-docs Makefile\n-@MAINT@@HAVE_PERL@\t$(PERL) $(srcdir)/gather-docs $(srcdir)\n+@MAINT@stamp-functions : $(CFILES:%=$(srcdir)/%) $(TEXIFILES:%=$(srcdir)/%) $(srcdir)/gather-docs Makefile\n+@MAINT@@HAVE_PERL@\t$(PERL) $(srcdir)/gather-docs $(srcdir) $(srcdir)/functions.texi $(CFILES) $(TEXIFILES)\n @MAINT@\techo stamp > stamp-functions\n \n INSTALL_DEST = @INSTALL_DEST@"}, {"sha": "7f53ea9b9db3c0a059c6158a31650e01680f9715", "filename": "libitm/Makefile.in", "status": "modified", "additions": 93, "deletions": 19, "changes": 112, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libitm%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libitm%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FMakefile.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -230,9 +230,46 @@ am__v_CCLD_ = $(am__v_CCLD_@AM_DEFAULT_V@)\n am__v_CCLD_0 = @echo \"  CCLD    \" $@;\n am__v_CCLD_1 = \n SOURCES = $(libitm_la_SOURCES)\n-INFO_DEPS = doc/info/texinfo/libitm.info\n-PDFS = doc/pdf/latex/libitm.pdf\n-HTMLS = doc/html/html/index.html\n+AM_V_DVIPS = $(am__v_DVIPS_@AM_V@)\n+am__v_DVIPS_ = $(am__v_DVIPS_@AM_DEFAULT_V@)\n+am__v_DVIPS_0 = @echo \"  DVIPS   \" $@;\n+am__v_DVIPS_1 = \n+AM_V_MAKEINFO = $(am__v_MAKEINFO_@AM_V@)\n+am__v_MAKEINFO_ = $(am__v_MAKEINFO_@AM_DEFAULT_V@)\n+am__v_MAKEINFO_0 = @echo \"  MAKEINFO\" $@;\n+am__v_MAKEINFO_1 = \n+AM_V_INFOHTML = $(am__v_INFOHTML_@AM_V@)\n+am__v_INFOHTML_ = $(am__v_INFOHTML_@AM_DEFAULT_V@)\n+am__v_INFOHTML_0 = @echo \"  INFOHTML\" $@;\n+am__v_INFOHTML_1 = \n+AM_V_TEXI2DVI = $(am__v_TEXI2DVI_@AM_V@)\n+am__v_TEXI2DVI_ = $(am__v_TEXI2DVI_@AM_DEFAULT_V@)\n+am__v_TEXI2DVI_0 = @echo \"  TEXI2DVI\" $@;\n+am__v_TEXI2DVI_1 = \n+AM_V_TEXI2PDF = $(am__v_TEXI2PDF_@AM_V@)\n+am__v_TEXI2PDF_ = $(am__v_TEXI2PDF_@AM_DEFAULT_V@)\n+am__v_TEXI2PDF_0 = @echo \"  TEXI2PDF\" $@;\n+am__v_TEXI2PDF_1 = \n+AM_V_texinfo = $(am__v_texinfo_@AM_V@)\n+am__v_texinfo_ = $(am__v_texinfo_@AM_DEFAULT_V@)\n+am__v_texinfo_0 = -q\n+am__v_texinfo_1 = \n+AM_V_texidevnull = $(am__v_texidevnull_@AM_V@)\n+am__v_texidevnull_ = $(am__v_texidevnull_@AM_DEFAULT_V@)\n+am__v_texidevnull_0 = > /dev/null\n+am__v_texidevnull_1 = \n+INFO_DEPS = libitm.info\n+am__TEXINFO_TEX_DIR = $(srcdir)/../gcc/doc/include\n+DVIS = libitm.dvi\n+PDFS = libitm.pdf\n+PSS = libitm.ps\n+HTMLS = libitm.html\n+TEXINFOS = libitm.texi\n+TEXI2DVI = texi2dvi\n+TEXI2PDF = $(TEXI2DVI) --pdf --batch\n+MAKEINFOHTML = $(MAKEINFO) --html\n+AM_MAKEINFOHTMLFLAGS = $(AM_MAKEINFOFLAGS)\n+DVIPS = dvips\n RECURSIVE_TARGETS = all-recursive check-recursive cscopelist-recursive \\\n \tctags-recursive dvi-recursive html-recursive info-recursive \\\n \tinstall-data-recursive install-dvi-recursive \\\n@@ -324,6 +361,7 @@ LIPO = @LIPO@\n LN_S = @LN_S@\n LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n+MAKEINFO = @MAKEINFO@\n MKDIR_P = @MKDIR_P@\n NM = @NM@\n NMEDIT = @NMEDIT@\n@@ -353,7 +391,6 @@ XLDFLAGS = @XLDFLAGS@\n abs_builddir = @abs_builddir@\n abs_srcdir = @abs_srcdir@\n abs_top_builddir = @abs_top_builddir@\n-abs_doc_builddir = @abs_top_builddir@/doc\n abs_top_srcdir = @abs_top_srcdir@\n ac_ct_CC = @ac_ct_CC@\n ac_ct_CXX = @ac_ct_CXX@\n@@ -451,6 +488,18 @@ libitm_la_SOURCES = aatree.cc alloc.cc alloc_c.cc alloc_cpp.cc \\\n \tmethod-serial.cc method-gl.cc method-ml.cc $(am__append_1) \\\n \t$(am__append_2) $(am__append_3)\n \n+# Automake Documentation:\n+# If your package has Texinfo files in many directories, you can use the\n+# variable TEXINFO_TEX to tell Automake where to find the canonical\n+# `texinfo.tex' for your package. The value of this variable should be\n+# the relative path from the current `Makefile.am' to `texinfo.tex'.\n+TEXINFO_TEX = ../gcc/doc/include/texinfo.tex\n+\n+# Defines info, dvi, pdf and html targets\n+MAKEINFOFLAGS = -I $(srcdir)/../gcc/doc/include\n+info_TEXINFOS = libitm.texi\n+@GENINSRC_FALSE@STAMP_GENINSRC = \n+\n # AM_CONDITIONAL on configure option --generated-files-in-srcdir\n @GENINSRC_TRUE@STAMP_GENINSRC = stamp-geninsrc\n @BUILD_INFO_FALSE@STAMP_BUILD_INFO = \n@@ -641,11 +690,39 @@ clean-libtool:\n distclean-libtool:\n \t-rm -f libtool config.lt\n \n-doc/pdf/latex/libitm.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/pdf\n+libitm.dvi: libitm.texi  \n+\t$(AM_V_TEXI2DVI)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\tMAKEINFO='$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir)' \\\n+\t$(TEXI2DVI) $(AM_V_texinfo) --build-dir=$(@:.dvi=.t2d) -o $@ $(AM_V_texidevnull) \\\n+\t`test -f 'libitm.texi' || echo '$(srcdir)/'`libitm.texi\n+\n+libitm.pdf: libitm.texi  \n+\t$(AM_V_TEXI2PDF)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\tMAKEINFO='$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir)' \\\n+\t$(TEXI2PDF) $(AM_V_texinfo) --build-dir=$(@:.pdf=.t2p) -o $@ $(AM_V_texidevnull) \\\n+\t`test -f 'libitm.texi' || echo '$(srcdir)/'`libitm.texi\n+\n+libitm.html: libitm.texi  \n+\t$(AM_V_MAKEINFO)rm -rf $(@:.html=.htp)\n+\t$(AM_V_at)if $(MAKEINFOHTML) $(AM_MAKEINFOHTMLFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) \\\n+\t -o $(@:.html=.htp) `test -f 'libitm.texi' || echo '$(srcdir)/'`libitm.texi; \\\n+\tthen \\\n+\t  rm -rf $@ && mv $(@:.html=.htp) $@; \\\n+\telse \\\n+\t  rm -rf $(@:.html=.htp); exit 1; \\\n+\tfi\n+.dvi.ps:\n+\t$(AM_V_DVIPS)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\t$(DVIPS) $(AM_V_texinfo) -o $@ $<\n \n-doc/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/html\n+uninstall-dvi-am:\n+\t@$(NORMAL_UNINSTALL)\n+\t@list='$(DVIS)'; test -n \"$(dvidir)\" || list=; \\\n+\tfor p in $$list; do \\\n+\t  $(am__strip_dir) \\\n+\t  echo \" rm -f '$(DESTDIR)$(dvidir)/$$f'\"; \\\n+\t  rm -f \"$(DESTDIR)$(dvidir)/$$f\"; \\\n+\tdone\n \n uninstall-html-am:\n \t@$(NORMAL_UNINSTALL)\n@@ -718,8 +795,8 @@ mostlyclean-aminfo:\n \t-rm -rf libitm.t2d libitm.t2p\n \n clean-aminfo:\n-\t-test -z \"doc/pdf/latex/libitm.pdf libitm.html\" \\\n-\t|| rm -rf doc/pdf/latex/libitm.pdf libitm.html\n+\t-test -z \"libitm.dvi libitm.pdf libitm.ps libitm.html\" \\\n+\t|| rm -rf libitm.dvi libitm.pdf libitm.ps libitm.html\n \n maintainer-clean-aminfo:\n \t@list='$(INFO_DEPS)'; for i in $$list; do \\\n@@ -1109,18 +1186,15 @@ vpath % $(strip $(search_path))\n \n all-local: $(STAMP_GENINSRC)\n \n-RST_FILES:=$(shell find $(srcdir) -name *.rst)\n-SPHINX_CONFIG_FILES:=$(srcdir)/doc/conf.py $(srcdir)/../doc/baseconf.py\n-SPHINX_FILES:=$(RST_FILES) $(SPHINX_CONFIG_FILES)\n-\n-export BUGURL=$(PACKAGE_BUGURL)\n-\n-stamp-geninsrc: doc/info/texinfo/libitm.info\n+stamp-geninsrc: libitm.info\n \tcp -p $(top_builddir)/libitm.info $(srcdir)/libitm.info\n \t@touch $@\n \n-doc/info/texinfo/libitm.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/info\n+libitm.info: $(STAMP_BUILD_INFO)\n+\n+stamp-build-info: libitm.texi\n+\t$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) -o libitm.info $(srcdir)/libitm.texi\n+\t@touch $@\n \n # GNU Make needs to see an explicit $(MAKE) variable in the command it\n # runs to enable its job server during parallel builds.  Hence the"}, {"sha": "8c0112122585353ca74b4a411e0ae42eaf74c40c", "filename": "libquadmath/Makefile.in", "status": "modified", "additions": 91, "deletions": 15, "changes": 106, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libquadmath%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e3dcf20763d7d4b2c06553ee14c88b573aabafc/libquadmath%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libquadmath%2FMakefile.in?ref=4e3dcf20763d7d4b2c06553ee14c88b573aabafc", "patch": "@@ -255,9 +255,46 @@ am__v_CCLD_ = $(am__v_CCLD_@AM_DEFAULT_V@)\n am__v_CCLD_0 = @echo \"  CCLD    \" $@;\n am__v_CCLD_1 = \n SOURCES = $(libquadmath_la_SOURCES)\n-INFO_DEPS = doc/info/texinfo/libquadmath.info\n-PDFS = doc/pdf/latex/libquadmath.pdf\n-HTMLS = doc/html/html/index.html\n+AM_V_DVIPS = $(am__v_DVIPS_@AM_V@)\n+am__v_DVIPS_ = $(am__v_DVIPS_@AM_DEFAULT_V@)\n+am__v_DVIPS_0 = @echo \"  DVIPS   \" $@;\n+am__v_DVIPS_1 = \n+AM_V_MAKEINFO = $(am__v_MAKEINFO_@AM_V@)\n+am__v_MAKEINFO_ = $(am__v_MAKEINFO_@AM_DEFAULT_V@)\n+am__v_MAKEINFO_0 = @echo \"  MAKEINFO\" $@;\n+am__v_MAKEINFO_1 = \n+AM_V_INFOHTML = $(am__v_INFOHTML_@AM_V@)\n+am__v_INFOHTML_ = $(am__v_INFOHTML_@AM_DEFAULT_V@)\n+am__v_INFOHTML_0 = @echo \"  INFOHTML\" $@;\n+am__v_INFOHTML_1 = \n+AM_V_TEXI2DVI = $(am__v_TEXI2DVI_@AM_V@)\n+am__v_TEXI2DVI_ = $(am__v_TEXI2DVI_@AM_DEFAULT_V@)\n+am__v_TEXI2DVI_0 = @echo \"  TEXI2DVI\" $@;\n+am__v_TEXI2DVI_1 = \n+AM_V_TEXI2PDF = $(am__v_TEXI2PDF_@AM_V@)\n+am__v_TEXI2PDF_ = $(am__v_TEXI2PDF_@AM_DEFAULT_V@)\n+am__v_TEXI2PDF_0 = @echo \"  TEXI2PDF\" $@;\n+am__v_TEXI2PDF_1 = \n+AM_V_texinfo = $(am__v_texinfo_@AM_V@)\n+am__v_texinfo_ = $(am__v_texinfo_@AM_DEFAULT_V@)\n+am__v_texinfo_0 = -q\n+am__v_texinfo_1 = \n+AM_V_texidevnull = $(am__v_texidevnull_@AM_V@)\n+am__v_texidevnull_ = $(am__v_texidevnull_@AM_DEFAULT_V@)\n+am__v_texidevnull_0 = > /dev/null\n+am__v_texidevnull_1 = \n+INFO_DEPS = libquadmath.info\n+am__TEXINFO_TEX_DIR = $(srcdir)/../gcc/doc/include\n+DVIS = libquadmath.dvi\n+PDFS = libquadmath.pdf\n+PSS = libquadmath.ps\n+HTMLS = libquadmath.html\n+TEXINFOS =\n+TEXI2DVI = texi2dvi\n+TEXI2PDF = $(TEXI2DVI) --pdf --batch\n+MAKEINFOHTML = $(MAKEINFO) --html\n+AM_MAKEINFOHTMLFLAGS = $(AM_MAKEINFOFLAGS)\n+DVIPS = dvips\n am__can_run_installinfo = \\\n   case $$AM_UPDATE_INFO_DIR in \\\n     n|no|NO) false;; \\\n@@ -325,6 +362,7 @@ LIPO = @LIPO@\n LN_S = @LN_S@\n LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n+MAKEINFO = @MAKEINFO@\n MKDIR_P = @MKDIR_P@\n NM = @NM@\n NMEDIT = @NMEDIT@\n@@ -352,7 +390,6 @@ XCFLAGS = @XCFLAGS@\n abs_builddir = @abs_builddir@\n abs_srcdir = @abs_srcdir@\n abs_top_builddir = @abs_top_builddir@\n-abs_doc_builddir = @abs_top_builddir@/doc\n abs_top_srcdir = @abs_top_srcdir@\n ac_ct_CC = @ac_ct_CC@\n ac_ct_DUMPBIN = @ac_ct_DUMPBIN@\n@@ -481,6 +518,7 @@ AUTOMAKE_OPTIONS = foreign info-in-builddir\n @BUILD_LIBQUADMATH_TRUE@\t\"LIBCFLAGS=$(LIBCFLAGS)\" \\\n @BUILD_LIBQUADMATH_TRUE@\t\"LIBCFLAGS_FOR_TARGET=$(LIBCFLAGS_FOR_TARGET)\" \\\n @BUILD_LIBQUADMATH_TRUE@\t\"MAKE=$(MAKE)\" \\\n+@BUILD_LIBQUADMATH_TRUE@\t\"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \\\n @BUILD_LIBQUADMATH_TRUE@\t\"PICFLAG=$(PICFLAG)\" \\\n @BUILD_LIBQUADMATH_TRUE@\t\"PICFLAG_FOR_TARGET=$(PICFLAG_FOR_TARGET)\" \\\n @BUILD_LIBQUADMATH_TRUE@\t\"SHELL=$(SHELL)\" \\\n@@ -525,6 +563,10 @@ AUTOMAKE_OPTIONS = foreign info-in-builddir\n TEXINFO_TEX = ../gcc/doc/include/texinfo.tex\n \n # Defines info, dvi, pdf and html targets\n+MAKEINFOFLAGS = -I $(srcdir)/../gcc/doc/include\n+@BUILD_LIBQUADMATH_FALSE@info_TEXINFOS = \n+@BUILD_LIBQUADMATH_TRUE@info_TEXINFOS = libquadmath.texi\n+libquadmath_TEXINFOS = libquadmath-vers.texi\n MULTISRCTOP = \n MULTIBUILDTOP = \n MULTIDIRS = \n@@ -949,11 +991,39 @@ clean-libtool:\n distclean-libtool:\n \t-rm -f libtool config.lt\n \n-doc/pdf/latex/libquadmath.pdf: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc latexpdf SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/pdf\n+libquadmath.dvi: libquadmath.texi $(libquadmath_TEXINFOS) \n+\t$(AM_V_TEXI2DVI)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\tMAKEINFO='$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir)' \\\n+\t$(TEXI2DVI) $(AM_V_texinfo) --build-dir=$(@:.dvi=.t2d) -o $@ $(AM_V_texidevnull) \\\n+\t`test -f 'libquadmath.texi' || echo '$(srcdir)/'`libquadmath.texi\n+\n+libquadmath.pdf: libquadmath.texi $(libquadmath_TEXINFOS) \n+\t$(AM_V_TEXI2PDF)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\tMAKEINFO='$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir)' \\\n+\t$(TEXI2PDF) $(AM_V_texinfo) --build-dir=$(@:.pdf=.t2p) -o $@ $(AM_V_texidevnull) \\\n+\t`test -f 'libquadmath.texi' || echo '$(srcdir)/'`libquadmath.texi\n+\n+libquadmath.html: libquadmath.texi $(libquadmath_TEXINFOS) \n+\t$(AM_V_MAKEINFO)rm -rf $(@:.html=.htp)\n+\t$(AM_V_at)if $(MAKEINFOHTML) $(AM_MAKEINFOHTMLFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) \\\n+\t -o $(@:.html=.htp) `test -f 'libquadmath.texi' || echo '$(srcdir)/'`libquadmath.texi; \\\n+\tthen \\\n+\t  rm -rf $@ && mv $(@:.html=.htp) $@; \\\n+\telse \\\n+\t  rm -rf $(@:.html=.htp); exit 1; \\\n+\tfi\n+.dvi.ps:\n+\t$(AM_V_DVIPS)TEXINPUTS=\"$(am__TEXINFO_TEX_DIR)$(PATH_SEPARATOR)$$TEXINPUTS\" \\\n+\t$(DVIPS) $(AM_V_texinfo) -o $@ $<\n \n-doc/html/html/index.html: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc html SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/html\n+uninstall-dvi-am:\n+\t@$(NORMAL_UNINSTALL)\n+\t@list='$(DVIS)'; test -n \"$(dvidir)\" || list=; \\\n+\tfor p in $$list; do \\\n+\t  $(am__strip_dir) \\\n+\t  echo \" rm -f '$(DESTDIR)$(dvidir)/$$f'\"; \\\n+\t  rm -f \"$(DESTDIR)$(dvidir)/$$f\"; \\\n+\tdone\n \n uninstall-html-am:\n \t@$(NORMAL_UNINSTALL)\n@@ -1364,16 +1434,22 @@ uninstall-am: uninstall-dvi-am uninstall-html-am uninstall-info-am \\\n @BUILD_LIBQUADMATH_TRUE@@LIBQUAD_USE_SYMVER_SUN_TRUE@@LIBQUAD_USE_SYMVER_TRUE@\t   sed 's,\\([^/ \t]*\\)\\.l\\([ao]\\),.libs/\\1.\\2,g'` \\\n @BUILD_LIBQUADMATH_TRUE@@LIBQUAD_USE_SYMVER_SUN_TRUE@@LIBQUAD_USE_SYMVER_TRUE@\t > $@ || (rm -f $@ ; exit 1)\n \n-all-local: $(ALL_LOCAL_DEPS)\n+@BUILD_LIBQUADMATH_TRUE@stamp-geninsrc: libquadmath.info\n+@BUILD_LIBQUADMATH_TRUE@\tcp -p $(top_builddir)/libquadmath.info $(srcdir)/libquadmath.info\n+@BUILD_LIBQUADMATH_TRUE@\t@touch $@\n \n-RST_FILES:=$(shell find $(srcdir) -name *.rst)\n-SPHINX_CONFIG_FILES:=$(srcdir)/doc/conf.py $(srcdir)/../doc/baseconf.py\n-SPHINX_FILES:=$(RST_FILES) $(SPHINX_CONFIG_FILES)\n+@BUILD_LIBQUADMATH_TRUE@stamp-build-info: libquadmath.texi $(libquadmath_TEXINFOS)\n+@BUILD_LIBQUADMATH_TRUE@\t$(MAKEINFO) $(AM_MAKEINFOFLAGS) $(MAKEINFOFLAGS) -I $(srcdir) -o libquadmath.info $(srcdir)/libquadmath.texi\n+@BUILD_LIBQUADMATH_TRUE@\t@touch $@\n+\n+all-local: $(ALL_LOCAL_DEPS)\n \n-export BUGURL=$(REPORT_BUGS_TO)\n+# Unconditionally override this target, so that automake's definition\n+# does not wrongly interfere.\n+libquadmath.info: $(STAMP_BUILD_INFO)\n \n-doc/info/texinfo/libquadmath.info: $(SPHINX_FILES)\n-\t+ make -C $(srcdir)/../doc info SOURCEDIR=$(abs_srcdir)/doc BUILDDIR=$(abs_doc_builddir)/info\n+libquadmath-vers.texi:\n+\techo \"@set BUGURL $(REPORT_BUGS_TEXI)\" > $@\n \n # GNU Make needs to see an explicit $(MAKE) variable in the command it\n # runs to enable its job server during parallel builds.  Hence the"}]}