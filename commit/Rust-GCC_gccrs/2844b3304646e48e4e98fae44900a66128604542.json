{"sha": "2844b3304646e48e4e98fae44900a66128604542", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg0NGIzMzA0NjQ2ZTQ4ZTRlOThmYWU0NDkwMGE2NjEyODYwNDU0Mg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-10T10:35:01Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-10T10:35:01Z"}, "message": "[multiple changes]\n\n2009-04-10  Vincent Celier  <celier@adacore.com>\n\n\t* prj-nmsc.adb (Check_Naming_Schemes): Initialize local variable Casing\n\tto avoid gcc warning.\n\n2009-04-10  Robert Dewar  <dewar@adacore.com>\n\n\t* g-comlin.adb: Add ??? comment\n\n2009-04-10  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_warn.adb (Check_Unused_Withs): Do not emit message about\n\tunreferenced entities for a package with no visible declarations.\n\n2009-04-10  Robert Dewar  <dewar@adacore.com>\n\n\t* exp_ch9.adb: Minor reformatting\n\nFrom-SVN: r145886", "tree": {"sha": "08f19541b2e232c7ac20c6ccc5c406ae9ee8e99f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08f19541b2e232c7ac20c6ccc5c406ae9ee8e99f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2844b3304646e48e4e98fae44900a66128604542", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2844b3304646e48e4e98fae44900a66128604542", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2844b3304646e48e4e98fae44900a66128604542", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2844b3304646e48e4e98fae44900a66128604542/comments", "author": null, "committer": null, "parents": [{"sha": "be21e9d8c7fcd3d6ac53d8ef77f02f21e788874a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be21e9d8c7fcd3d6ac53d8ef77f02f21e788874a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be21e9d8c7fcd3d6ac53d8ef77f02f21e788874a"}], "stats": {"total": 110, "additions": 91, "deletions": 19}, "files": [{"sha": "0da0147f6058ef52e2ebeab65ce21fe2aaf5b48c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2844b3304646e48e4e98fae44900a66128604542", "patch": "@@ -1,3 +1,21 @@\n+2009-04-10  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-nmsc.adb (Check_Naming_Schemes): Initialize local variable Casing\n+\tto avoid gcc warning.\n+\n+2009-04-10  Robert Dewar  <dewar@adacore.com>\n+\n+\t* g-comlin.adb: Add ??? comment\n+\n+2009-04-10  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_warn.adb (Check_Unused_Withs): Do not emit message about\n+\tunreferenced entities for a package with no visible declarations.\n+\n+2009-04-10  Robert Dewar  <dewar@adacore.com>\n+\n+\t* exp_ch9.adb: Minor reformatting\n+\n 2009-04-10  Thomas Quinot  <quinot@adacore.com>\n \n \t* sem_prag.adb: Minor reformatting"}, {"sha": "75603f0a4264a6b2ba67e3abb0992990b2304603", "filename": "gcc/ada/exp_ch9.adb", "status": "modified", "additions": 15, "deletions": 12, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fexp_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fexp_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch9.adb?ref=2844b3304646e48e4e98fae44900a66128604542", "patch": "@@ -738,22 +738,25 @@ package body Exp_Ch9 is\n       --  At the end of the statement sequence, Complete_Rendezvous is called.\n       --  A label skipping the Complete_Rendezvous, and all other accept\n       --  processing, has already been added for the expansion of requeue\n-      --  statements.\n+      --  statements. The Sloc is copied from the last statement since it\n+      --  is really part of this last statement.\n \n-      Call := Build_Runtime_Call (Sloc (Last (Statements (Stats))),\n-                                  RE_Complete_Rendezvous);\n+      Call :=\n+        Build_Runtime_Call\n+          (Sloc (Last (Statements (Stats))), RE_Complete_Rendezvous);\n       Insert_Before (Last (Statements (Stats)), Call);\n       Analyze (Call);\n \n       --  If exception handlers are present, then append Complete_Rendezvous\n-      --  calls to the handlers, and construct the required outer block.\n+      --  calls to the handlers, and construct the required outer block. As\n+      --  above, the Sloc is copied from the last statement in the sequence.\n \n       if Present (Exception_Handlers (Stats)) then\n          Hand := First (Exception_Handlers (Stats));\n-\n          while Present (Hand) loop\n-            Call := Build_Runtime_Call (Sloc (Last (Statements (Hand))),\n-                                        RE_Complete_Rendezvous);\n+            Call :=\n+              Build_Runtime_Call\n+                (Sloc (Last (Statements (Hand))), RE_Complete_Rendezvous);\n             Append (Call, Statements (Hand));\n             Analyze (Call);\n             Next (Hand);\n@@ -11996,11 +11999,11 @@ package body Exp_Ch9 is\n          --  side effects.\n \n          Append_To (Args,\n-           New_Copy_Tree (\n-             Expression (First (\n-               Pragma_Argument_Associations (\n-                 Find_Task_Or_Protected_Pragma\n-                   (Tdef, Name_Task_Name))))));\n+           New_Copy_Tree\n+             (Expression (First\n+                           (Pragma_Argument_Associations\n+                             (Find_Task_Or_Protected_Pragma\n+                               (Tdef, Name_Task_Name))))));\n \n       else\n          Append_To (Args, Make_Identifier (Loc, Name_uTask_Name));"}, {"sha": "adb1553836e479932703f8cae6cf4e2d6fd3b788", "filename": "gcc/ada/g-comlin.adb", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fg-comlin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fg-comlin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-comlin.adb?ref=2844b3304646e48e4e98fae44900a66128604542", "patch": "@@ -92,8 +92,9 @@ package body GNAT.Command_Line is\n       Index_In_Switches : out Integer;\n       Switch_Length     : out Integer;\n       Param             : out Switch_Parameter_Type);\n-   --  return the Longest switch from Switches that matches at least\n-   --  partially Arg. Index_In_Switches is set to 0 if none matches\n+   --  Return the Longest switch from Switches that at least partially\n+   --  partially Arg. Index_In_Switches is set to 0 if none matches.\n+   --  What are other parameters??? in particular Param is not always set???\n \n    procedure Unchecked_Free is new Ada.Unchecked_Deallocation\n      (Argument_List, Argument_List_Access);"}, {"sha": "7d532892b816d4d9ebb72e3c03c953ff4e00447a", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=2844b3304646e48e4e98fae44900a66128604542", "patch": "@@ -3280,7 +3280,7 @@ package body Prj.Nmsc is\n             --  value in the language config.\n \n             declare\n-               Dot_Repl        : constant  Variable_Value :=\n+               Dot_Repl        : constant Variable_Value :=\n                                    Util.Value_Of\n                                      (Name_Dot_Replacement,\n                                       Naming.Decl.Attributes, In_Tree);\n@@ -3291,17 +3291,21 @@ package body Prj.Nmsc is\n                                    (Name_Casing,\n                                     Naming.Decl.Attributes,\n                                     In_Tree);\n-               Casing          : Casing_Type;\n-               Casing_Defined  : Boolean := False;\n+\n+               Casing : Casing_Type := All_Lower_Case;\n+               --  Casing type (junk initialization to stop bad gcc warning)\n+\n+               Casing_Defined : Boolean := False;\n \n                Sep_Suffix : constant Variable_Value :=\n                               Prj.Util.Value_Of\n                                 (Variable_Name => Name_Separate_Suffix,\n                                  In_Variables  => Naming.Decl.Attributes,\n                                  In_Tree       => In_Tree);\n+\n                Separate_Suffix : File_Name_Type := No_File;\n+               Lang_Id         : Language_Index;\n \n-               Lang_Id : Language_Index;\n             begin\n                --  Check attribute Dot_Replacement\n "}, {"sha": "076355b7cd0ad645e292efcb981f12991da282de", "filename": "gcc/ada/sem_warn.adb", "status": "modified", "additions": 47, "deletions": 1, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fsem_warn.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2844b3304646e48e4e98fae44900a66128604542/gcc%2Fada%2Fsem_warn.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_warn.adb?ref=2844b3304646e48e4e98fae44900a66128604542", "patch": "@@ -1887,6 +1887,11 @@ package body Sem_Warn is\n          --  warn that the context clause could be moved to the body, because\n          --  the renaming may be intended to re-export the unit.\n \n+         function Has_Visible_Entities (P : Entity_Id) return Boolean;\n+         --  If a package has no declared entities, inhibit warning because\n+         --  there is nothing to be referenced. The package may be in the\n+         --  context just in order to carry a linker pragma for example.\n+\n          -------------------------\n          -- Check_Inner_Package --\n          -------------------------\n@@ -2011,6 +2016,47 @@ package body Sem_Warn is\n             return Empty;\n          end Find_Package_Renaming;\n \n+         --------------------------\n+         -- Has_Visible_Entities --\n+         --------------------------\n+\n+         function Has_Visible_Entities (P : Entity_Id) return Boolean is\n+            E : Entity_Id;\n+\n+         begin\n+\n+            --  If unit in context is not a package, it is a subprogram that\n+            --  is not called or a generic unit that is not instantiated\n+            --  in the current unit, and warning is appropriate.\n+\n+            if Ekind (P) /= E_Package then\n+               return True;\n+            end if;\n+\n+            --  If unit comes from a limited_with clause, look for declaration\n+            --  of shadow entities.\n+\n+            if Present (Limited_View (P)) then\n+               E := First_Entity (Limited_View (P));\n+            else\n+               E := First_Entity (P);\n+            end if;\n+\n+            while Present (E)\n+              and then E /= First_Private_Entity (P)\n+            loop\n+               if Comes_From_Source (E)\n+                 or else Present (Limited_View (P))\n+               then\n+                  return True;\n+               end if;\n+\n+               Next_Entity (E);\n+            end loop;\n+\n+            return False;\n+         end Has_Visible_Entities;\n+\n       --  Start of processing for Check_One_Unit\n \n       begin\n@@ -2066,7 +2112,7 @@ package body Sem_Warn is\n \n                      --  Otherwise simple unreferenced message\n \n-                     else\n+                     elsif Has_Visible_Entities (Entity (Name (Item))) then\n                         Error_Msg_N\n                           (\"?unit& is not referenced!\", Name (Item));\n                      end if;"}]}