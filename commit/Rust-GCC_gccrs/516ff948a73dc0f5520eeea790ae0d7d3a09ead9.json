{"sha": "516ff948a73dc0f5520eeea790ae0d7d3a09ead9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTE2ZmY5NDhhNzNkYzBmNTUyMGVlZWE3OTBhZTBkN2QzYTA5ZWFkOQ==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "2000-01-14T08:35:56Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2000-01-14T08:35:56Z"}, "message": "cse.c (cse_insn): When changing (set (pc) (reg)) to (set (pc) (label_ref))...\n\n        * cse.c (cse_insn): When changing (set (pc) (reg)) to\n        (set (pc) (label_ref)), verify the change creates a valid insn.\n\nFrom-SVN: r31407", "tree": {"sha": "e4089684e1d7c267db1bb44c506adcc2d83afe75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4089684e1d7c267db1bb44c506adcc2d83afe75"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/516ff948a73dc0f5520eeea790ae0d7d3a09ead9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/516ff948a73dc0f5520eeea790ae0d7d3a09ead9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/516ff948a73dc0f5520eeea790ae0d7d3a09ead9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/516ff948a73dc0f5520eeea790ae0d7d3a09ead9/comments", "author": null, "committer": null, "parents": [{"sha": "66ec08884147b3cd0638b20f625f3a87897fdd76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66ec08884147b3cd0638b20f625f3a87897fdd76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66ec08884147b3cd0638b20f625f3a87897fdd76"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "08ce9e2e328a9d1f134d3af6d6c8381d0706c1ff", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/516ff948a73dc0f5520eeea790ae0d7d3a09ead9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/516ff948a73dc0f5520eeea790ae0d7d3a09ead9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=516ff948a73dc0f5520eeea790ae0d7d3a09ead9", "patch": "@@ -1,5 +1,8 @@\n Fri Jan 14 00:28:06 2000  Jeffrey A Law  (law@cygnus.com)\n \n+\t* cse.c (cse_insn): When changing (set (pc) (reg)) to\n+\t(set (pc) (label_ref)), verify the change creates a valid insn.\n+\n \t* fr30.c (call_operand): Tighten and rework to match rules for\n \tcall RTL expressions.\n \t* fr30.h (PREDICATE_CODES, case call_operand): Only allow MEMs."}, {"sha": "40d30a79d389c529ff7e9961966c246f1a3ef368", "filename": "gcc/cse.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/516ff948a73dc0f5520eeea790ae0d7d3a09ead9/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/516ff948a73dc0f5520eeea790ae0d7d3a09ead9/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=516ff948a73dc0f5520eeea790ae0d7d3a09ead9", "patch": "@@ -5189,8 +5189,18 @@ cse_insn (insn, libcall_insn)\n \n \t\ttrial = gen_rtx_LABEL_REF (Pmode, get_label_after (trial));\n \n-\t      SET_SRC (sets[i].rtl) = trial;\n- \t      cse_jumps_altered = 1;\n+\t      if (trial == pc_rtx)\n+\t\t{\n+\t\t  SET_SRC (sets[i].rtl) = trial;\n+\t\t  cse_jumps_altered = 1;\n+\t\t  break;\n+\t\t}\n+\n+\t      /* We must actually validate the change.  Consider a target\n+\t\t where unconditional jumps are more complex than\n+\t\t (set (pc) (label_ref)) such as the fr30.  */\n+\t      if (validate_change (insn, &SET_SRC (sets[i].rtl), trial, 0))\n+\t\tcse_jumps_altered = 1;\n \t      break;\n \t    }\n \t   "}]}