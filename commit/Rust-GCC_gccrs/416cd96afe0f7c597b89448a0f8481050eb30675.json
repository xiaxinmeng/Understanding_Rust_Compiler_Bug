{"sha": "416cd96afe0f7c597b89448a0f8481050eb30675", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDE2Y2Q5NmFmZTBmN2M1OTdiODk0NDhhMGY4NDgxMDUwZWIzMDY3NQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-01-03T15:41:04Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2005-01-03T15:41:04Z"}, "message": "sem_ch12.adb (Analyze_Package_Instantiation): Create a separate node to use as the defining identifier for a formal package.\n\n\t* sem_ch12.adb (Analyze_Package_Instantiation): Create a separate node\n\tto use as the defining identifier for a formal package.\n\t(Remove_Parent): If the instance takes place within (an instance of)\n\ta sibling, preserve private declarations of common parent.\n\nFrom-SVN: r92848", "tree": {"sha": "ed29d62c20d45ff28b42facea335372a941e9e86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed29d62c20d45ff28b42facea335372a941e9e86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/416cd96afe0f7c597b89448a0f8481050eb30675", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/416cd96afe0f7c597b89448a0f8481050eb30675", "html_url": "https://github.com/Rust-GCC/gccrs/commit/416cd96afe0f7c597b89448a0f8481050eb30675", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/416cd96afe0f7c597b89448a0f8481050eb30675/comments", "author": null, "committer": null, "parents": [{"sha": "4bb6d5fd42cfe938b58575002a79ac332be552ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bb6d5fd42cfe938b58575002a79ac332be552ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bb6d5fd42cfe938b58575002a79ac332be552ab"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "588ce993dfb76ceab5d32d504cc21f71fa1e22f2", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/416cd96afe0f7c597b89448a0f8481050eb30675/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/416cd96afe0f7c597b89448a0f8481050eb30675/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=416cd96afe0f7c597b89448a0f8481050eb30675", "patch": "@@ -2849,6 +2849,17 @@ package body Sem_Ch12 is\n          Inline_Instance_Body (N, Gen_Unit, Act_Decl);\n       end if;\n \n+      --  The following is a tree patch for ASIS: ASIS needs separate nodes\n+      --  to be used as defining identifiers for a formal package and for the\n+      --  corresponding expanded package\n+\n+      if Nkind (N) = N_Formal_Package_Declaration then\n+         Act_Decl_Id := New_Copy (Defining_Entity (N));\n+         Set_Comes_From_Source (Act_Decl_Id, True);\n+         Set_Is_Generic_Instance (Act_Decl_Id, False);\n+         Set_Defining_Identifier (N, Act_Decl_Id);\n+      end if;\n+\n    exception\n       when Instantiation_Error =>\n          if Parent_Installed then\n@@ -8904,9 +8915,11 @@ package body Sem_Ch12 is\n                  and then P /= Current_Scope\n                then\n                   --  We are within an instance of some sibling. Retain\n-                  --  visibility of parent, for proper subsequent cleanup.\n+                  --  visibility of parent, for proper subsequent cleanup,\n+                  --  and reinstall private declarations as well.\n \n                   Set_In_Private_Part (P);\n+                  Install_Private_Declarations (P);\n                end if;\n \n             --  This looks incomplete: what about compilation units that"}]}