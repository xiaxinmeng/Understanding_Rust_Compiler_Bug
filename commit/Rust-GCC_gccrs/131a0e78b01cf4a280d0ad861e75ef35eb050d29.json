{"sha": "131a0e78b01cf4a280d0ad861e75ef35eb050d29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMxYTBlNzhiMDFjZjRhMjgwZDBhZDg2MWU3NWVmMzVlYjA1MGQyOQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-01-08T13:13:48Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-01-08T13:13:48Z"}, "message": "re PR lto/83719 (ICE (segfault) in hash_table<indirect_string_hasher, xcallocator>::elements())\n\n2018-01-08  Richard Biener  <rguenther@suse.de>\n\n\tPR lto/83719\n\t* dwarf2out.c (output_indirect_strings): Handle empty\n\tskeleton_debug_str_hash.\n\t(dwarf2out_early_finish): Index strings for -gsplit-dwarf.\n\n\t* gcc.dg/lto/pr83719_0.c: New testcase.\n\nFrom-SVN: r256338", "tree": {"sha": "e5595f68928e3529c93f816e4f49aa7c96cc5656", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5595f68928e3529c93f816e4f49aa7c96cc5656"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/131a0e78b01cf4a280d0ad861e75ef35eb050d29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/131a0e78b01cf4a280d0ad861e75ef35eb050d29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/131a0e78b01cf4a280d0ad861e75ef35eb050d29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/131a0e78b01cf4a280d0ad861e75ef35eb050d29/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4135a21f4dc1b490446722a40ce113a0f7a28305", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4135a21f4dc1b490446722a40ce113a0f7a28305", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4135a21f4dc1b490446722a40ce113a0f7a28305"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "0c9d6947d68a8df89592cc41a9800bb0fb479ba0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=131a0e78b01cf4a280d0ad861e75ef35eb050d29", "patch": "@@ -1,3 +1,10 @@\n+2018-01-08  Richard Biener  <rguenther@suse.de>\n+\n+\tPR lto/83719\n+\t* dwarf2out.c (output_indirect_strings): Handle empty\n+\tskeleton_debug_str_hash.\n+\t(dwarf2out_early_finish): Index strings for -gsplit-dwarf.\n+\n 2018-01-08  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* config/arc/arc.c (TARGET_TRAMPOLINE_ADJUST_ADDRESS): Delete."}, {"sha": "a34b294106c42e54c1196e60c5a4e95b1a358d93", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=131a0e78b01cf4a280d0ad861e75ef35eb050d29", "patch": "@@ -27795,8 +27795,9 @@ output_indirect_strings (void)\n       unsigned int offset = 0;\n       unsigned int cur_idx = 0;\n \n-      skeleton_debug_str_hash->traverse<enum dwarf_form,\n-\t\t\t\t\toutput_indirect_string> (DW_FORM_strp);\n+      if (skeleton_debug_str_hash)\n+        skeleton_debug_str_hash->traverse<enum dwarf_form,\n+\t\t\t\t\t  output_indirect_string> (DW_FORM_strp);\n \n       switch_to_section (debug_str_offsets_section);\n       debug_str_hash->traverse_noresize\n@@ -30819,6 +30820,12 @@ dwarf2out_early_finish (const char *filename)\n \n   save_macinfo_strings ();\n \n+  if (dwarf_split_debug_info)\n+    {\n+      unsigned int index = 0;\n+      debug_str_hash->traverse_noresize<unsigned int *, index_string> (&index);\n+    }\n+\n   /* Output all of the compilation units.  We put the main one last so that\n      the offsets are available to output_pubnames.  */\n   for (limbo_die_node *node = limbo_die_list; node; node = node->next)"}, {"sha": "ccc94d1b2a699542cc68dcba4fec8faa7e22cf95", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=131a0e78b01cf4a280d0ad861e75ef35eb050d29", "patch": "@@ -1,3 +1,8 @@\n+2018-01-08  Richard Biener  <rguenther@suse.de>\n+\n+\tPR lto/83719\n+\t* gcc.dg/lto/pr83719_0.c: New testcase.\n+\n 2018-01-08  Tom de Vries  <tom@codesourcery.com>\n \n \t* gcc.dg/graphite/interchange-7.c: Add dg-require-stack-size."}, {"sha": "6d5c16da7dad10afce3bfae7ae56df804eef180e", "filename": "gcc/testsuite/gcc.dg/lto/pr83719_0.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr83719_0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/131a0e78b01cf4a280d0ad861e75ef35eb050d29/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr83719_0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr83719_0.c?ref=131a0e78b01cf4a280d0ad861e75ef35eb050d29", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-lto-do assemble } */\n+/* { dg-lto-options { { -flto -g -gsplit-dwarf } } } */\n+\n+/* Empty.  */"}]}