{"sha": "9bedfe1899e6f29cb51a1bad06bab7d3082fe251", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWJlZGZlMTg5OWU2ZjI5Y2I1MWExYmFkMDZiYWI3ZDMwODJmZTI1MQ==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2019-04-24T02:04:04Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2019-04-24T02:04:04Z"}, "message": "libphobos: Fix link build errors when compiling with unsupported options\n\nThe first compilation test to get baseline warnings was getting more\nmessages due to a missing object.d file, compared to later configure\ntests where libphobos is in the include paths.\n\nBecause there must always be an object module during compilation, let\nthe tests themselves be an empty object module instead.\n\nlibphobos/ChangeLog:\n\n2019-04-24  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\tPR d/88431\n\t* configure: Regenerate.\n\t* m4/libtool.m4 (lt_simple_compile_test_code): Update to not have\n\tdependencies on libphobos.\n\t(lt_simple_link_test_code): Likewise.\n\t(GDCFLAGS): Don't override for D compiler tests.\n\nFrom-SVN: r270531", "tree": {"sha": "964c193191e124b66ce1520beb4ce0c5eac618e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/964c193191e124b66ce1520beb4ce0c5eac618e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9bedfe1899e6f29cb51a1bad06bab7d3082fe251", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bedfe1899e6f29cb51a1bad06bab7d3082fe251", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bedfe1899e6f29cb51a1bad06bab7d3082fe251", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bedfe1899e6f29cb51a1bad06bab7d3082fe251/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0c1eb9639d942e66ac61fd09ad371bfd33facac0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c1eb9639d942e66ac61fd09ad371bfd33facac0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c1eb9639d942e66ac61fd09ad371bfd33facac0"}], "stats": {"total": 37, "additions": 25, "deletions": 12}, "files": [{"sha": "fa5f7b1d718e1459ab22ed0330a8e67079960c91", "filename": "libphobos/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bedfe1899e6f29cb51a1bad06bab7d3082fe251/libphobos%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bedfe1899e6f29cb51a1bad06bab7d3082fe251/libphobos%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2FChangeLog?ref=9bedfe1899e6f29cb51a1bad06bab7d3082fe251", "patch": "@@ -1,3 +1,12 @@\n+2019-04-24  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\tPR d/88431\n+\t* configure: Regenerate.\n+\t* m4/libtool.m4 (lt_simple_compile_test_code): Update to not have\n+\tdependencies on libphobos.\n+\t(lt_simple_link_test_code): Likewise.\n+\t(GDCFLAGS): Don't override for D compiler tests.\n+\n 2019-04-24  Iain Buclaw  <ibuclaw@gdcproject.org>\n \n \t* configure.tgt: Add aarch64*-*-linux* as a supported target."}, {"sha": "7c019899c5c9610b70570ff04b3d184c24a184fc", "filename": "libphobos/configure", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bedfe1899e6f29cb51a1bad06bab7d3082fe251/libphobos%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bedfe1899e6f29cb51a1bad06bab7d3082fe251/libphobos%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fconfigure?ref=9bedfe1899e6f29cb51a1bad06bab7d3082fe251", "patch": "@@ -11981,10 +11981,16 @@ objext=o\n objext_D=$objext\n \n # Code to be used in simple compile tests\n-lt_simple_compile_test_code=\"module mod; extern(C) int main() { return 0; }\"\n+lt_simple_compile_test_code=\"\\\n+  module object;\n+  shared int some_variable = 0;\n+\"\n \n # Code to be used in simple link tests\n-lt_simple_link_test_code='module mod; extern(C) int main() { return 0; }'\n+lt_simple_link_test_code=\"\\\n+  module object;\n+  extern(C) int main() { return 0; }\n+\"\n \n # ltmain only uses $CC for tagged configurations so make sure $CC is set.\n \n@@ -12020,12 +12026,9 @@ $RM -r conftest*\n # Allow CC to be a program name with arguments.\n lt_save_CC=$CC\n lt_save_CFLAGS=$CFLAGS\n-lt_save_DFLAGS=$GDCFLAGS\n lt_save_GCC=$GCC\n GCC=yes\n CC=${GDC-\"gdc\"}\n-# Need to specify location for object.d\n-GDCFLAGS=\"-nophoboslib $GDCFLAGS\"\n CFLAGS=$GDCFLAGS\n compiler=$CC\n compiler_D=$CC\n@@ -13867,7 +13870,6 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n GCC=$lt_save_GCC\n CC=$lt_save_CC\n CFLAGS=$lt_save_CFLAGS\n-GDCFLAGS=$lt_save_DFLAGS\n \n   GDCFLAGS=$gdc_save_DFLAGS\n "}, {"sha": "0263a530cf01563ed0506164c5fbdcd268e7e8eb", "filename": "libphobos/m4/libtool.m4", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bedfe1899e6f29cb51a1bad06bab7d3082fe251/libphobos%2Fm4%2Flibtool.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bedfe1899e6f29cb51a1bad06bab7d3082fe251/libphobos%2Fm4%2Flibtool.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fm4%2Flibtool.m4?ref=9bedfe1899e6f29cb51a1bad06bab7d3082fe251", "patch": "@@ -20,10 +20,16 @@ objext=o\n _LT_TAGVAR(objext, $1)=$objext\n \n # Code to be used in simple compile tests\n-lt_simple_compile_test_code=\"module mod; extern(C) int main() { return 0; }\"\n+lt_simple_compile_test_code=\"\\\n+  module object;\n+  shared int some_variable = 0;\n+\"\n \n # Code to be used in simple link tests\n-lt_simple_link_test_code='module mod; extern(C) int main() { return 0; }'\n+lt_simple_link_test_code=\"\\\n+  module object;\n+  extern(C) int main() { return 0; }\n+\"\n \n # ltmain only uses $CC for tagged configurations so make sure $CC is set.\n _LT_TAG_COMPILER\n@@ -35,12 +41,9 @@ _LT_LINKER_BOILERPLATE\n # Allow CC to be a program name with arguments.\n lt_save_CC=$CC\n lt_save_CFLAGS=$CFLAGS\n-lt_save_DFLAGS=$GDCFLAGS\n lt_save_GCC=$GCC\n GCC=yes\n CC=${GDC-\"gdc\"}\n-# Need to specify location for object.d\n-GDCFLAGS=\"-nophoboslib $GDCFLAGS\"\n CFLAGS=$GDCFLAGS\n compiler=$CC\n _LT_TAGVAR(compiler, $1)=$CC\n@@ -74,5 +77,4 @@ AC_LANG_RESTORE\n GCC=$lt_save_GCC\n CC=$lt_save_CC\n CFLAGS=$lt_save_CFLAGS\n-GDCFLAGS=$lt_save_DFLAGS\n ])# _LT_LANG_D_CONFIG"}]}