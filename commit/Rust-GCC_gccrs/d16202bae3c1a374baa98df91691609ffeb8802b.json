{"sha": "d16202bae3c1a374baa98df91691609ffeb8802b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDE2MjAyYmFlM2MxYTM3NGJhYTk4ZGY5MTY5MTYwOWZmZWI4ODAyYg==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2012-07-08T22:50:38Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2012-07-08T22:50:38Z"}, "message": "sh.md (*return_i): Move trap_exit attribute check to ...\n\n\t* config/sh/sh.md (*return_i): Move trap_exit attribute check to ...\n\t* config/sh/sh.c (sh_cfun_trap_exit_p): ... this new function.\n\t* config/sh/sh-protos.h: Declare it.\n\nFrom-SVN: r189362", "tree": {"sha": "47e2a7d6633bf0a15b112a4d21a9ec9052feb278", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/47e2a7d6633bf0a15b112a4d21a9ec9052feb278"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d16202bae3c1a374baa98df91691609ffeb8802b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d16202bae3c1a374baa98df91691609ffeb8802b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d16202bae3c1a374baa98df91691609ffeb8802b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d16202bae3c1a374baa98df91691609ffeb8802b/comments", "author": null, "committer": null, "parents": [{"sha": "e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "6ff48665ed562cdfb212643ed5e5aa533dadcf54", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d16202bae3c1a374baa98df91691609ffeb8802b", "patch": "@@ -1,3 +1,9 @@\n+2012-07-08  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\t* config/sh/sh.md (*return_i): Move trap_exit attribute check to ...\n+\t* config/sh/sh.c (sh_cfun_trap_exit_p): ... this new function.\n+\t* config/sh/sh-protos.h: Declare it.\n+\n 2012-07-08  Steven Bosscher  <steven@gcc.gnu.org>\n \n \t* mcf.c: Do not include tm.h, tree.h, and langhooks.h."}, {"sha": "63fa599e7a5bea725ee270ce2616c89c327888d0", "filename": "gcc/config/sh/sh-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2Fconfig%2Fsh%2Fsh-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2Fconfig%2Fsh%2Fsh-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh-protos.h?ref=d16202bae3c1a374baa98df91691609ffeb8802b", "patch": "@@ -106,6 +106,7 @@ extern void sh_expand_binop_v2sf (enum rtx_code, rtx, rtx, rtx);\n extern bool sh_expand_t_scc (rtx *);\n extern rtx sh_gen_truncate (enum machine_mode, rtx, int);\n extern bool sh_vector_mode_supported_p (enum machine_mode);\n+extern bool sh_cfun_trap_exit_p (void);\n #endif /* RTX_CODE */\n \n extern const char *output_jump_label_table (void);"}, {"sha": "a53c3be91e9f6ad5f237fa68972b1b8c61096d38", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=d16202bae3c1a374baa98df91691609ffeb8802b", "patch": "@@ -9309,6 +9309,15 @@ sh_cfun_resbank_handler_p (void)\n               != NULL_TREE) && TARGET_SH2A);\n }\n \n+/* Returns true if the current function has a \"trap_exit\" attribute set.  */\n+\n+bool\n+sh_cfun_trap_exit_p (void)\n+{\n+  return lookup_attribute (\"trap_exit\", DECL_ATTRIBUTES (current_function_decl))\n+\t != NULL_TREE;\n+}\n+\n /* Implement TARGET_CHECK_PCH_TARGET_FLAGS.  */\n \n static const char *"}, {"sha": "bc2b7aeafc6e32da843b63ae85b97e3073fa07b8", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d16202bae3c1a374baa98df91691609ffeb8802b/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=d16202bae3c1a374baa98df91691609ffeb8802b", "patch": "@@ -9442,8 +9442,7 @@ label:\n \t\t    && (crtl->args.info.call_cookie\n \t\t\t& CALL_COOKIE_RET_TRAMP (1)))\n    && reload_completed\n-   && lookup_attribute (\\\"trap_exit\\\",\n-\t\t\tDECL_ATTRIBUTES (current_function_decl)) == NULL_TREE\"\n+   && ! sh_cfun_trap_exit_p ()\"\n {\n   if (TARGET_SH2A && (dbr_sequence_length () == 0)\n       && !current_function_interrupt)"}]}