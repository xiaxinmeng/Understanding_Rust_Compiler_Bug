{"sha": "7896a31d3003bad8b845881f59e570fbc3c78cfa", "node_id": "C_kwDOANBUbNoAKDc4OTZhMzFkMzAwM2JhZDhiODQ1ODgxZjU5ZTU3MGZiYzNjNzhjZmE", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2022-10-10T09:01:48Z"}, "committer": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2022-10-17T13:23:05Z"}, "message": "Add 3 floating NAN tests.\n\nx UNORD x should set NAN on the TRUE side.\nThe false side of x == x should set NAN.\nThe true side of x != x should set NAN.\n\n\tgcc/testsuite/\n\t* gcc.dg/tree-ssa/vrp-float-3a.c: New.\n\t* gcc.dg/tree-ssa/vrp-float-4a.c: New.\n\t* gcc.dg/tree-ssa/vrp-float-5a.c: New.", "tree": {"sha": "a9527564abfbc3e06d56fa40a129d6355909bc4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a9527564abfbc3e06d56fa40a129d6355909bc4f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7896a31d3003bad8b845881f59e570fbc3c78cfa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7896a31d3003bad8b845881f59e570fbc3c78cfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7896a31d3003bad8b845881f59e570fbc3c78cfa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7896a31d3003bad8b845881f59e570fbc3c78cfa/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b565ac19264a5827162d28537bccc8531c25e817", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b565ac19264a5827162d28537bccc8531c25e817", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b565ac19264a5827162d28537bccc8531c25e817"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "5aadaa7c4db61fcd4a1d5c5b1b79666b75443f46", "filename": "gcc/testsuite/gcc.dg/tree-ssa/vrp-float-3a.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7896a31d3003bad8b845881f59e570fbc3c78cfa/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-3a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7896a31d3003bad8b845881f59e570fbc3c78cfa/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-3a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-3a.c?ref=7896a31d3003bad8b845881f59e570fbc3c78cfa", "patch": "@@ -0,0 +1,19 @@\n+// { dg-do compile }\n+// { dg-options \"-O2 -fno-thread-jumps -fdisable-tree-fre1 -fdump-tree-evrp\" }\n+\n+void link_error ();\n+void bar ();\n+\n+float\n+foo (float x)\n+{\n+  if (x != x)\n+    {\n+      // The true side of x != x implies NAN, so we should be able to\n+      // fold this.\n+      if (!__builtin_isnan (x))\n+\tlink_error ();\n+    }\n+}\n+\n+// { dg-final { scan-tree-dump-not \"link_error\" \"evrp\" } }"}, {"sha": "7d3187b396244ececc5ed5e8747a452d9c0d15fe", "filename": "gcc/testsuite/gcc.dg/tree-ssa/vrp-float-4a.c", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7896a31d3003bad8b845881f59e570fbc3c78cfa/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-4a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7896a31d3003bad8b845881f59e570fbc3c78cfa/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-4a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-4a.c?ref=7896a31d3003bad8b845881f59e570fbc3c78cfa", "patch": "@@ -0,0 +1,23 @@\n+// { dg-do compile }\n+// { dg-options \"-O2 -fno-thread-jumps -fdisable-tree-fre1 -fdump-tree-evrp\" }\n+\n+void link_error ();\n+void bar ();\n+\n+float\n+foo (float x)\n+{\n+  if (x == x)\n+    {\n+      bar ();\n+    }\n+  else\n+    {\n+      // The false side of x == x implies NAN, so we should be able to\n+      // fold this.\n+      if (!__builtin_isnan (x))\n+\tlink_error ();\n+    }\n+}\n+\n+// { dg-final { scan-tree-dump-not \"link_error\" \"evrp\" } }"}, {"sha": "08332305f2c419f94e90b521c998ecc05ed2cc93", "filename": "gcc/testsuite/gcc.dg/tree-ssa/vrp-float-5a.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7896a31d3003bad8b845881f59e570fbc3c78cfa/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-5a.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7896a31d3003bad8b845881f59e570fbc3c78cfa/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-5a.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp-float-5a.c?ref=7896a31d3003bad8b845881f59e570fbc3c78cfa", "patch": "@@ -0,0 +1,16 @@\n+// { dg-do compile }\n+// { dg-options \"-O2 -fno-thread-jumps -fdisable-tree-fre1 -fdump-tree-evrp\" }\n+\n+void link_error ();\n+\n+float\n+foo (float x)\n+{\n+  if (__builtin_isnan (x))\n+    {\n+      if (!__builtin_isnan (x))\n+\tlink_error ();\n+    }\n+}\n+\n+// { dg-final { scan-tree-dump-not \"link_error\" \"evrp\" } }"}]}