{"sha": "f0ca30bf140486165af102ba9823f99b8eb0e558", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjBjYTMwYmYxNDA0ODYxNjVhZjEwMmJhOTgyM2Y5OWI4ZWIwZTU1OA==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2018-09-28T22:02:17Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2018-09-28T22:02:17Z"}, "message": "rs6000: Delete HAVE_AS_DCI\n\nEvery supported assembler supports these instructions.  Committing.\n\n\n\t* config.in: Delete HAVE_AS_DCI.\n\t* config/powerpcspe/powerpcspe.h: Treat HAVE_AS_DCI as always true.\n\t* config/rs6000/rs6000.h: Ditto.\n\t* configure.ac: Delete HAVE_AS_DCI.\n\t* configure: Regenerate.\n\nFrom-SVN: r264703", "tree": {"sha": "4e08c0e98ca331a7011cf09a6fcac077161156e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e08c0e98ca331a7011cf09a6fcac077161156e4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f0ca30bf140486165af102ba9823f99b8eb0e558", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0ca30bf140486165af102ba9823f99b8eb0e558", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0ca30bf140486165af102ba9823f99b8eb0e558", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0ca30bf140486165af102ba9823f99b8eb0e558/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2660fecc0c6cd1a0d4c67b6a50abb063f6a4b8d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2660fecc0c6cd1a0d4c67b6a50abb063f6a4b8d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2660fecc0c6cd1a0d4c67b6a50abb063f6a4b8d8"}], "stats": {"total": 82, "additions": 8, "deletions": 74}, "files": [{"sha": "dd520215cacd31e751c72bf81a9cab0e0c99113e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f0ca30bf140486165af102ba9823f99b8eb0e558", "patch": "@@ -1,3 +1,11 @@\n+2018-09-28  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config.in: Delete HAVE_AS_DCI.\n+\t* config/powerpcspe/powerpcspe.h: Treat HAVE_AS_DCI as always true.\n+\t* config/rs6000/rs6000.h: Ditto.\n+\t* configure.ac: Delete HAVE_AS_DCI.\n+\t* configure: Regenerate.\n+\n 2018-09-28  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config.in (HAVE_AS_LWSYNC): Delete."}, {"sha": "4db8aa1ea15405fc47f5f9e76ee6a220da59bec0", "filename": "gcc/config.in", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=f0ca30bf140486165af102ba9823f99b8eb0e558", "patch": "@@ -309,12 +309,6 @@\n #endif\n \n \n-/* Define if your assembler supports the DCI/ICI instructions. */\n-#ifndef USED_FOR_TARGET\n-#undef HAVE_AS_DCI\n-#endif\n-\n-\n /* Define if your assembler supports the --debug-prefix-map option. */\n #ifndef USED_FOR_TARGET\n #undef HAVE_AS_DEBUG_PREFIX_MAP"}, {"sha": "df0676a72a4d330b8a60c36c5c9a7ae56f413442", "filename": "gcc/config/powerpcspe/powerpcspe.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfig%2Fpowerpcspe%2Fpowerpcspe.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfig%2Fpowerpcspe%2Fpowerpcspe.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpowerpcspe%2Fpowerpcspe.h?ref=f0ca30bf140486165af102ba9823f99b8eb0e558", "patch": "@@ -77,11 +77,7 @@\n #define ASM_CPU_POWER8_SPEC \"-mpower8\"\n #define ASM_CPU_POWER9_SPEC \"-mpower9\"\n \n-#ifdef HAVE_AS_DCI\n #define ASM_CPU_476_SPEC \"-m476\"\n-#else\n-#define ASM_CPU_476_SPEC \"-mpower4\"\n-#endif\n \n /* Common ASM definitions used by ASM_SPEC among the various targets for\n    handling -mcpu=xxx switches.  There is a parallel list in driver-powerpcspe.c to"}, {"sha": "855de7ca60afce63deba1726cebc383248a8de0b", "filename": "gcc/config/rs6000/rs6000.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfig%2Frs6000%2Frs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfig%2Frs6000%2Frs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.h?ref=f0ca30bf140486165af102ba9823f99b8eb0e558", "patch": "@@ -78,11 +78,7 @@\n #define ASM_CPU_POWER8_SPEC \"-mpower8\"\n #define ASM_CPU_POWER9_SPEC \"-mpower9\"\n \n-#ifdef HAVE_AS_DCI\n #define ASM_CPU_476_SPEC \"-m476\"\n-#else\n-#define ASM_CPU_476_SPEC \"-mpower4\"\n-#endif\n \n /* Common ASM definitions used by ASM_SPEC among the various targets for\n    handling -mcpu=xxx switches.  There is a parallel list in driver-rs6000.c to"}, {"sha": "9fb0eb57a8a168a279b300a36d3e0376bd546b42", "filename": "gcc/configure", "status": "modified", "additions": 0, "deletions": 45, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=f0ca30bf140486165af102ba9823f99b8eb0e558", "patch": "@@ -26719,51 +26719,6 @@ if test $gcc_cv_as_powerpc_vsx = yes; then\n \n $as_echo \"#define HAVE_AS_VSX 1\" >>confdefs.h\n \n-fi\n-\n-\n-    case $target in\n-      *-*-aix*) conftest_s='\t.machine \"476\"\n-\t.csect .text[PR]\n-\tdci 0';;\n-      *) conftest_s='\t.machine \"476\"\n-\t.text\n-\tdci 0';;\n-    esac\n-\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking assembler for data cache invalidate support\" >&5\n-$as_echo_n \"checking assembler for data cache invalidate support... \" >&6; }\n-if test \"${gcc_cv_as_powerpc_dci+set}\" = set; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  gcc_cv_as_powerpc_dci=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 9 \\* 1000 \\) + 99 \\) \\* 1000 + 0`\n-  then gcc_cv_as_powerpc_dci=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n-    $as_echo \"$conftest_s\" > conftest.s\n-    if { ac_try='$gcc_cv_as $gcc_cv_as_flags -a32 -o conftest.o conftest.s >&5'\n-  { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n-  test $ac_status = 0; }; }\n-    then\n-\tgcc_cv_as_powerpc_dci=yes\n-    else\n-      echo \"configure: failed program was\" >&5\n-      cat conftest.s >&5\n-    fi\n-    rm -f conftest.o conftest.s\n-  fi\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gcc_cv_as_powerpc_dci\" >&5\n-$as_echo \"$gcc_cv_as_powerpc_dci\" >&6; }\n-if test $gcc_cv_as_powerpc_dci = yes; then\n-\n-$as_echo \"#define HAVE_AS_DCI 1\" >>confdefs.h\n-\n fi\n \n "}, {"sha": "ca51cdf751b99342172b2aa8b8732255da047602", "filename": "gcc/configure.ac", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0ca30bf140486165af102ba9823f99b8eb0e558/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=f0ca30bf140486165af102ba9823f99b8eb0e558", "patch": "@@ -4557,21 +4557,6 @@ LCF0:\n       [AC_DEFINE(HAVE_AS_VSX, 1,\n \t  [Define if your assembler supports VSX instructions.])])\n \n-    case $target in\n-      *-*-aix*) conftest_s='\t.machine \"476\"\n-\t.csect .text[[PR]]\n-\tdci 0';;\n-      *) conftest_s='\t.machine \"476\"\n-\t.text\n-\tdci 0';;\n-    esac\n-\n-    gcc_GAS_CHECK_FEATURE([data cache invalidate support],\n-      gcc_cv_as_powerpc_dci, [9,99,0], -a32,\n-      [$conftest_s],,\n-      [AC_DEFINE(HAVE_AS_DCI, 1,\n-\t  [Define if your assembler supports the DCI/ICI instructions.])])\n-\n     gcc_GAS_CHECK_FEATURE([.gnu_attribute support],\n       gcc_cv_as_powerpc_gnu_attribute, [2,18,0],,\n       [.gnu_attribute 4,1],,"}]}