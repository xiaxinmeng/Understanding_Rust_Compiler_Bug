{"sha": "c7c27cd3e267542ca6afbe5090d5a410bccfd0b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdjMjdjZDNlMjY3NTQyY2E2YWZiZTUwOTBkNWE0MTBiY2NmZDBiMg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-08-13T22:30:02Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-08-13T22:30:02Z"}, "message": "Remove duplicate volatile from sig_atomic_t in AIX sys/signal.h\n\nFrom-SVN: r12636", "tree": {"sha": "e25741513006fa22e29d6102a2954e13b63305fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e25741513006fa22e29d6102a2954e13b63305fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7c27cd3e267542ca6afbe5090d5a410bccfd0b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7c27cd3e267542ca6afbe5090d5a410bccfd0b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7c27cd3e267542ca6afbe5090d5a410bccfd0b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7c27cd3e267542ca6afbe5090d5a410bccfd0b2/comments", "author": null, "committer": null, "parents": [{"sha": "f7fba6aa123ca9279fbf11071d1019ff7fd5f63c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7fba6aa123ca9279fbf11071d1019ff7fd5f63c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7fba6aa123ca9279fbf11071d1019ff7fd5f63c"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "5b7ddfc0c76c7e1b69a5f4d533e71c56fc5530db", "filename": "gcc/fixincludes", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7c27cd3e267542ca6afbe5090d5a410bccfd0b2/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7c27cd3e267542ca6afbe5090d5a410bccfd0b2/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=c7c27cd3e267542ca6afbe5090d5a410bccfd0b2", "patch": "@@ -2673,6 +2673,33 @@ for file in signal.h sys/signal.h; do\n   fi\n done\n \n+# sys/signal.h on some versions of AIX uses volatile in the typedef of\n+# sig_atomic_t, which causes gcc to generate a warning about duplicate\n+# volatile when a sig_atomic_t variable is declared volatile, as\n+# required by ANSI C.\n+file=sys/signal.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo \"Checking for duplicate volatile in sys/signal.h\"\n+  sed -e 's/typedef volatile int sig_atomic_t/typedef int sig_atomic_t/' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    rm -f ${LIB}/$file\n+  else\n+    # Find any include directives that use \"file\".\n+    for include in `egrep '^[       ]*#[    ]*include[      ]*\"[^/]' ${LIB}/$file | sed -e 's/^[    ]*#[    ]*include[      ]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+      dir=`echo $file | sed -e s'|/[^/]*$||'`\n+      required=\"$required ${INPUT} $dir/$include ${LIB}/$dir/$include\"\n+    done\n+  fi\n+fi\n+\n # This loop does not appear to do anything, because it uses file\n # rather than $file when setting target.  It also appears to be\n # unnecessary, since the main loop processes symbolic links."}]}