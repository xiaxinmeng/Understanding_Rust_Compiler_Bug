{"sha": "b0b592fc7b750423b8310756a24a06b2ac7e412c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjBiNTkyZmM3Yjc1MDQyM2I4MzEwNzU2YTI0YTA2YjJhYzdlNDEyYw==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2018-03-20T09:14:07Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2018-03-20T09:14:07Z"}, "message": "[nvptx] Fix prevent_branch_around_nothing\n\n2018-03-20  Tom de Vries  <tom@codesourcery.com>\n\n\tPR target/84954\n\t* config/nvptx/nvptx.c (prevent_branch_around_nothing): Also update\n\tseen_label if seen_label is already set.\n\nFrom-SVN: r258674", "tree": {"sha": "5c3a9b59b3b4d6127fc57e45e0a1f3b47e64e9b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c3a9b59b3b4d6127fc57e45e0a1f3b47e64e9b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0b592fc7b750423b8310756a24a06b2ac7e412c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0b592fc7b750423b8310756a24a06b2ac7e412c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0b592fc7b750423b8310756a24a06b2ac7e412c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0b592fc7b750423b8310756a24a06b2ac7e412c/comments", "author": null, "committer": null, "parents": [{"sha": "ae6dca8c651783208564001c56786f3abc762cf3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae6dca8c651783208564001c56786f3abc762cf3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae6dca8c651783208564001c56786f3abc762cf3"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "460802d8b643027c7591c755a53268fa210b5fdb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0b592fc7b750423b8310756a24a06b2ac7e412c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0b592fc7b750423b8310756a24a06b2ac7e412c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b0b592fc7b750423b8310756a24a06b2ac7e412c", "patch": "@@ -1,3 +1,9 @@\n+2018-03-20  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR target/84954\n+\t* config/nvptx/nvptx.c (prevent_branch_around_nothing): Also update\n+\tseen_label if seen_label is already set.\n+\n 2018-03-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/84945"}, {"sha": "7b0b182deb2283bdf1235ac3e7de7155d954cd24", "filename": "gcc/config/nvptx/nvptx.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0b592fc7b750423b8310756a24a06b2ac7e412c/gcc%2Fconfig%2Fnvptx%2Fnvptx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0b592fc7b750423b8310756a24a06b2ac7e412c/gcc%2Fconfig%2Fnvptx%2Fnvptx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.c?ref=b0b592fc7b750423b8310756a24a06b2ac7e412c", "patch": "@@ -4419,14 +4419,15 @@ prevent_branch_around_nothing (void)\n   rtx_insn *seen_label = NULL;\n     for (rtx_insn *insn = get_insns (); insn; insn = NEXT_INSN (insn))\n       {\n-\tif (seen_label == NULL)\n+\tif (INSN_P (insn) && condjump_p (insn))\n \t  {\n-\t    if (INSN_P (insn) && condjump_p (insn))\n-\t      seen_label = label_ref_label (nvptx_condjump_label (insn, false));\n-\n+\t    seen_label = label_ref_label (nvptx_condjump_label (insn, false));\n \t    continue;\n \t  }\n \n+\tif (seen_label == NULL)\n+\t  continue;\n+\n \tif (NOTE_P (insn) || DEBUG_INSN_P (insn))\n \t  continue;\n "}]}