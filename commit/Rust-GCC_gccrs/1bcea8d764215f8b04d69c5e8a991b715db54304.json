{"sha": "1bcea8d764215f8b04d69c5e8a991b715db54304", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJjZWE4ZDc2NDIxNWY4YjA0ZDY5YzVlOGE5OTFiNzE1ZGI1NDMwNA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2001-05-01T10:53:09Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-05-01T10:53:09Z"}, "message": "spew.c (last_token_id): New static variable.\n\ncp:\n\t* spew.c (last_token_id): New static variable.\n\t(read_token): Set it here.\n\t(yyerror): Use it here.\n\nFrom-SVN: r41719", "tree": {"sha": "a2a7a74a9f17f7b22c02065ccda78f69942ed026", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2a7a74a9f17f7b22c02065ccda78f69942ed026"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1bcea8d764215f8b04d69c5e8a991b715db54304", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bcea8d764215f8b04d69c5e8a991b715db54304", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bcea8d764215f8b04d69c5e8a991b715db54304", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bcea8d764215f8b04d69c5e8a991b715db54304/comments", "author": null, "committer": null, "parents": [{"sha": "d0e66dbb95b7d611428f4974aebf0d3ac320ff41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0e66dbb95b7d611428f4974aebf0d3ac320ff41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0e66dbb95b7d611428f4974aebf0d3ac320ff41"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "5255f156ba89c34f8f80d3df6331730329889054", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bcea8d764215f8b04d69c5e8a991b715db54304/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bcea8d764215f8b04d69c5e8a991b715db54304/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1bcea8d764215f8b04d69c5e8a991b715db54304", "patch": "@@ -1,3 +1,9 @@\n+2001-05-01  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* spew.c (last_token_id): New static variable.\n+\t(read_token): Set it here.\n+\t(yyerror): Use it here.\n+\n 2001-04-30  Richard Henderson  <rth@redhat.com>\n \n         * cvt.c: Downcase C_PROMOTING_INTEGER_TYPE_P invocations."}, {"sha": "4a230f08298a1330f6ea584a7369cf317c037af5", "filename": "gcc/cp/spew.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bcea8d764215f8b04d69c5e8a991b715db54304/gcc%2Fcp%2Fspew.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bcea8d764215f8b04d69c5e8a991b715db54304/gcc%2Fcp%2Fspew.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fspew.c?ref=1bcea8d764215f8b04d69c5e8a991b715db54304", "patch": "@@ -140,6 +140,7 @@ static void debug_yychar PARAMS ((int));\n extern char *debug_yytranslate PARAMS ((int));\n #endif\n static enum cpp_ttype last_token;\n+static tree last_token_id;\n \n /* From lex.c: */\n /* the declaration found for the last IDENTIFIER token read in.\n@@ -259,7 +260,8 @@ read_token (t)\n {\n  retry:\n \n-  last_token = c_lex (&t->yylval.ttype);\n+  last_token = c_lex (&last_token_id);\n+  t->yylval.ttype = last_token_id;\n \n   switch (last_token)\n     {\n@@ -1499,10 +1501,12 @@ yyerror (msgid)\n     error (\"%s before numeric constant\", string);\n   else if (last_token == CPP_NAME)\n     {\n-      if (yylval.ttype && TREE_CODE (yylval.ttype) == IDENTIFIER_NODE)\n-        error (\"%s before `%s'\", string, IDENTIFIER_POINTER (yylval.ttype));\n-      else\n+      if (TREE_CODE (last_token_id) == IDENTIFIER_NODE)\n+        error (\"%s before `%s'\", string, IDENTIFIER_POINTER (last_token_id));\n+      else if (ISGRAPH (yychar))\n         error (\"%s before `%c'\", string, yychar);\n+      else\n+\terror (\"%s before `\\%o'\", string, yychar);\n     }\n   else\n     error (\"%s before `%s' token\", string, NAME (last_token));"}]}