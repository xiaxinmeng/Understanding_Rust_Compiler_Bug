{"sha": "3d1df1fa6beec8f46864e4698cb5d762548998e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2QxZGYxZmE2YmVlYzhmNDY4NjRlNDY5OGNiNWQ3NjI1NDg5OThlMg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-03-06T20:06:29Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-03-06T20:06:29Z"}, "message": "re PR c++/9791 (-Woverloaded-virtual reports hiding of destructor)\n\n\tPR c++/9791\n\t* class.c (get_basefndecls): Use lookup_fnfields_1.\n\n\tPR c++/9791\n\t* g++.dg/warn/Woverloaded-1.C: New test.\n\nFrom-SVN: r63899", "tree": {"sha": "184ac8f172c4e03b8748ef74fc3e06ba7cd2d5a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/184ac8f172c4e03b8748ef74fc3e06ba7cd2d5a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d1df1fa6beec8f46864e4698cb5d762548998e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d1df1fa6beec8f46864e4698cb5d762548998e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d1df1fa6beec8f46864e4698cb5d762548998e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d1df1fa6beec8f46864e4698cb5d762548998e2/comments", "author": null, "committer": null, "parents": [{"sha": "f3922fd2682929596da68ce0ec33ab02ddb775a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3922fd2682929596da68ce0ec33ab02ddb775a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3922fd2682929596da68ce0ec33ab02ddb775a2"}], "stats": {"total": 45, "additions": 40, "deletions": 5}, "files": [{"sha": "7d62350a0a41cc554fcbcaf3d68837bf3482c8c4", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3d1df1fa6beec8f46864e4698cb5d762548998e2", "patch": "@@ -1,3 +1,8 @@\n+2003-03-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/9791\n+\t* class.c (get_basefndecls): Use lookup_fnfields_1.\n+\n 2003-03-06  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \tPR c++/9188"}, {"sha": "6b89becf176399943c53f24ab12f7df43be9f4f3", "filename": "gcc/cp/class.c", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=3d1df1fa6beec8f46864e4698cb5d762548998e2", "patch": "@@ -2524,11 +2524,19 @@ get_basefndecls (tree name, tree t)\n   int n_baseclasses = CLASSTYPE_N_BASECLASSES (t);\n   int i;\n \n-  for (methods = TYPE_METHODS (t); methods; methods = TREE_CHAIN (methods))\n-    if (TREE_CODE (methods) == FUNCTION_DECL\n-\t&& DECL_VINDEX (methods) != NULL_TREE\n-\t&& DECL_NAME (methods) == name)\n-      base_fndecls = tree_cons (NULL_TREE, methods, base_fndecls);\n+  /* Find virtual functions in T with the indicated NAME.  */\n+  i = lookup_fnfields_1 (t, name);\n+  if (i != -1)\n+    for (methods = TREE_VEC_ELT (CLASSTYPE_METHOD_VEC (t), i);\n+\t methods;\n+\t methods = OVL_NEXT (methods))\n+      {\n+\ttree method = OVL_CURRENT (methods);\n+\n+\tif (TREE_CODE (method) == FUNCTION_DECL\n+\t    && DECL_VINDEX (method))\n+\t  base_fndecls = tree_cons (NULL_TREE, method, base_fndecls);\n+      }\n \n   if (base_fndecls)\n     return base_fndecls;"}, {"sha": "1b7c6d38bb6681616f9673dd6c3d6cad36c34c45", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3d1df1fa6beec8f46864e4698cb5d762548998e2", "patch": "@@ -1,3 +1,8 @@\n+2003-03-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/9791\n+\t* g++.dg/warn/Woverloaded-1.C: New test.\n+\n Wed Mar  5 23:18:11 CET 2003  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.dg/i386-local2.c: New."}, {"sha": "65a408b47d0e190358618c6aed2825681d8f01fe", "filename": "gcc/testsuite/g++.dg/warn/Woverloaded-1.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWoverloaded-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d1df1fa6beec8f46864e4698cb5d762548998e2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWoverloaded-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWoverloaded-1.C?ref=3d1df1fa6beec8f46864e4698cb5d762548998e2", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-options \"-Woverloaded-virtual\" } */\n+\n+class Base {\n+public:\n+  virtual ~Base() {\n+  }\n+};\n+\n+class Derived: public Base {\n+public:\n+  int Base() { // There should be no error here.\n+    return 5;\n+  }\n+};\n+\n+int main() {\n+}"}]}