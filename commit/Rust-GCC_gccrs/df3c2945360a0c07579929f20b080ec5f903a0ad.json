{"sha": "df3c2945360a0c07579929f20b080ec5f903a0ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGYzYzI5NDUzNjBhMGMwNzU3OTkyOWYyMGIwODBlYzVmOTAzYTBhZA==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2017-11-10T12:46:33Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2017-11-10T12:46:33Z"}, "message": "tree-predcom.c (determine_roots_comp): Avoid memory leak by freeing reference of trivial component.\n\n\t* tree-predcom.c (determine_roots_comp): Avoid memory leak by freeing\n\treference of trivial component.\n\nFrom-SVN: r254625", "tree": {"sha": "c14b7a29fc1876745e42b9f11b5b8badff9fe4b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c14b7a29fc1876745e42b9f11b5b8badff9fe4b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df3c2945360a0c07579929f20b080ec5f903a0ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df3c2945360a0c07579929f20b080ec5f903a0ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df3c2945360a0c07579929f20b080ec5f903a0ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df3c2945360a0c07579929f20b080ec5f903a0ad/comments", "author": null, "committer": null, "parents": [{"sha": "8cd119d857b727ce0ee7b3c7aead38d8fdcc1a7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cd119d857b727ce0ee7b3c7aead38d8fdcc1a7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cd119d857b727ce0ee7b3c7aead38d8fdcc1a7e"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "1ed540a29e3ee0144644ac0aa1d6e0588ce7376a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df3c2945360a0c07579929f20b080ec5f903a0ad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df3c2945360a0c07579929f20b080ec5f903a0ad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=df3c2945360a0c07579929f20b080ec5f903a0ad", "patch": "@@ -1,3 +1,8 @@\n+2017-11-10  Bin Cheng  <bin.cheng@arm.com>\n+\n+\t* tree-predcom.c (determine_roots_comp): Avoid memory leak by freeing\n+\treference of trivial component.\n+\n 2017-11-10  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR bootstrap/82916"}, {"sha": "d078b96cdf088e19c8afff885fc2a84871ffb209", "filename": "gcc/tree-predcom.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df3c2945360a0c07579929f20b080ec5f903a0ad/gcc%2Ftree-predcom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df3c2945360a0c07579929f20b080ec5f903a0ad/gcc%2Ftree-predcom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-predcom.c?ref=df3c2945360a0c07579929f20b080ec5f903a0ad", "patch": "@@ -1331,7 +1331,14 @@ determine_roots_comp (struct loop *loop,\n \n   /* Trivial component.  */\n   if (comp->refs.length () <= 1)\n-    return;\n+    {\n+      if (comp->refs.length () == 1)\n+\t{\n+\t  free (comp->refs[0]);\n+\t  comp->refs.truncate (0);\n+\t}\n+      return;\n+    }\n \n   comp->refs.qsort (order_drefs);\n   FOR_EACH_VEC_ELT (comp->refs, i, a)"}]}