{"sha": "9502c55830f2de2066d1671567d88a2a78361103", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUwMmM1NTgzMGYyZGUyMDY2ZDE2NzE1NjdkODhhMmE3ODM2MTEwMw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@redhat.com", "date": "2001-03-14T02:29:02Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2001-03-14T02:29:02Z"}, "message": "Fix reg-alloc error reported by Andreas Schwab to Trillian list.\n\n\t* config/ia64/ia64.c (find_gr_spill): Subtract frame_pointer_needed\n\tfrom 80 in try_locals code.\n\t(ia64_expand_prologue): Add comment pointing to find_gr_spill change.\n\nFrom-SVN: r40447", "tree": {"sha": "6bc77352a4d719088035b0f93c22be9d32dbf14b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bc77352a4d719088035b0f93c22be9d32dbf14b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9502c55830f2de2066d1671567d88a2a78361103", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9502c55830f2de2066d1671567d88a2a78361103", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9502c55830f2de2066d1671567d88a2a78361103", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9502c55830f2de2066d1671567d88a2a78361103/comments", "author": null, "committer": null, "parents": [{"sha": "75e93faacce9ef53574291df3ddc87783a39babc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75e93faacce9ef53574291df3ddc87783a39babc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75e93faacce9ef53574291df3ddc87783a39babc"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "0fcf77fcd6392b67402957194e9df3fb818701b2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9502c55830f2de2066d1671567d88a2a78361103/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9502c55830f2de2066d1671567d88a2a78361103/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9502c55830f2de2066d1671567d88a2a78361103", "patch": "@@ -1,3 +1,9 @@\n+2001-03-13  Jim Wilson  <wilson@redhat.com>\n+\n+\t* config/ia64/ia64.c (find_gr_spill): Subtract frame_pointer_needed\n+\tfrom 80 in try_locals code.\n+\t(ia64_expand_prologue): Add comment pointing to find_gr_spill change.\n+\n 2001-03-13  Zack Weinberg  <zackw@stanford.edu>\n \n \t* aclocal.m4 (gcc_AC_COMPILE_CHECK_SIZEOF, gcc_AC_C_CHAR_BIT,"}, {"sha": "fb8a5847ec2fe728995c930ca7787005f70536b4", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9502c55830f2de2066d1671567d88a2a78361103/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9502c55830f2de2066d1671567d88a2a78361103/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=9502c55830f2de2066d1671567d88a2a78361103", "patch": "@@ -1214,7 +1214,10 @@ find_gr_spill (try_locals)\n   if (try_locals)\n     {\n       regno = current_frame_info.n_local_regs;\n-      if (regno < 80)\n+      /* If there is a frame pointer, then we can't use loc79, because\n+\t that is HARD_FRAME_POINTER_REGNUM.  In particular, see the\n+\t reg_name switching code in ia64_expand_prologue.  */\n+      if (regno < (80 - frame_pointer_needed))\n \t{\n \t  current_frame_info.n_local_regs = regno + 1;\n \t  return LOC_REG (0) + regno;\n@@ -1874,6 +1877,10 @@ ia64_expand_prologue ()\n   /* Set the frame pointer register name.  The regnum is logically loc79,\n      but of course we'll not have allocated that many locals.  Rather than\n      worrying about renumbering the existing rtxs, we adjust the name.  */\n+  /* ??? This code means that we can never use one local register when\n+     there is a frame pointer.  loc79 gets wasted in this case, as it is\n+     renamed to a register that will never be used.  See also the try_locals\n+     code in find_gr_spill.  */\n   if (current_frame_info.reg_fp)\n     {\n       const char *tmp = reg_names[HARD_FRAME_POINTER_REGNUM];"}]}