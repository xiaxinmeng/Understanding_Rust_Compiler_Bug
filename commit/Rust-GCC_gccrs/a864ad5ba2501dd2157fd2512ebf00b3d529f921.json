{"sha": "a864ad5ba2501dd2157fd2512ebf00b3d529f921", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTg2NGFkNWJhMjUwMWRkMjE1N2ZkMjUxMmViZjAwYjNkNTI5ZjkyMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2016-02-09T17:21:57Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2016-02-09T17:21:57Z"}, "message": "gimple-ssa-backprop.c (optimize_phi): Do not replace an argument corresponding to an abnormal edge.\n\n\t* gimple-ssa-backprop.c (optimize_phi): Do not replace an argument\n\tcorresponding to an abnormal edge.\n\nFrom-SVN: r233248", "tree": {"sha": "3d14d10508e1d4a7e5509b5718d3106975df3043", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d14d10508e1d4a7e5509b5718d3106975df3043"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a864ad5ba2501dd2157fd2512ebf00b3d529f921", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a864ad5ba2501dd2157fd2512ebf00b3d529f921", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a864ad5ba2501dd2157fd2512ebf00b3d529f921", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a864ad5ba2501dd2157fd2512ebf00b3d529f921/comments", "author": null, "committer": null, "parents": [{"sha": "f10208b8e92668673de666c863b3db1834f62f09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f10208b8e92668673de666c863b3db1834f62f09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f10208b8e92668673de666c863b3db1834f62f09"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "9149642baa69656fea28ca4473f0f0c835d88a7f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a864ad5ba2501dd2157fd2512ebf00b3d529f921/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a864ad5ba2501dd2157fd2512ebf00b3d529f921/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a864ad5ba2501dd2157fd2512ebf00b3d529f921", "patch": "@@ -1,3 +1,8 @@\n+2016-02-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gimple-ssa-backprop.c (optimize_phi): Do not replace an argument\n+\tcorresponding to an abnormal edge.\n+\n 2016-02-09  Tom de Vries  <tom@codesourcery.com>\n \n \tPR tree-optimization/69599"}, {"sha": "d96bccac555f5fedfc5ceb08b1a7e8e672ccd1b6", "filename": "gcc/gimple-ssa-backprop.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a864ad5ba2501dd2157fd2512ebf00b3d529f921/gcc%2Fgimple-ssa-backprop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a864ad5ba2501dd2157fd2512ebf00b3d529f921/gcc%2Fgimple-ssa-backprop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-backprop.c?ref=a864ad5ba2501dd2157fd2512ebf00b3d529f921", "patch": "@@ -831,15 +831,21 @@ backprop::optimize_assign (gassign *assign, tree lhs, const usage_info *info)\n void\n backprop::optimize_phi (gphi *phi, tree var, const usage_info *info)\n {\n-  /* If the sign of the result doesn't matter, strip sign operations\n-     from all arguments.  */\n+  /* If the sign of the result doesn't matter, try to strip sign operations\n+     from arguments.  */\n   if (info->flags.ignore_sign)\n     {\n+      basic_block bb = gimple_bb (phi);\n       use_operand_p use;\n       ssa_op_iter oi;\n       bool replaced = false;\n       FOR_EACH_PHI_ARG (use, phi, oi, SSA_OP_USE)\n \t{\n+\t  /* Propagating along abnormal edges is delicate, punt for now.  */\n+\t  const int index = PHI_ARG_INDEX_FROM_USE (use);\n+\t  if (EDGE_PRED (bb, index)->flags & EDGE_ABNORMAL)\n+\t    continue;\n+\n \t  tree new_arg = strip_sign_op (USE_FROM_PTR (use));\n \t  if (new_arg)\n \t    {"}]}