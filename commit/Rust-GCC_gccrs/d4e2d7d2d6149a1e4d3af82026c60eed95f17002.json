{"sha": "d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRlMmQ3ZDJkNjE0OWExZTRkM2FmODIwMjZjNjBlZWQ5NWYxNzAwMg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2008-10-15T18:31:45Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2008-10-15T18:31:45Z"}, "message": "mn10300.h (OUTPUT_ADDR_CONST_EXTRA): Handle UNSPEC_GOTSYM_OFFs.\n\ngcc/\n\t* config/mn10300/mn10300.h (OUTPUT_ADDR_CONST_EXTRA): Handle\n\tUNSPEC_GOTSYM_OFFs.\n\t* config/mn10300/mn10300.c (legitimate_pic_operand_p): Return true\n\tfor UNSPEC_GOTSYM_OFFs.\n\t* config/mn10300/mn10300.md (UNSPEC_GOTSYM_OFF): New unspec.\n\t(add_GOT_to_pic_reg): Use it.\n\t* config/mn10300/constraints.md (S): Allow UNSPEC_GOTSYM_OFF.\n\nFrom-SVN: r141148", "tree": {"sha": "46265ecf55e614adcedb928b4081c0c3d5d5b2b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46265ecf55e614adcedb928b4081c0c3d5d5b2b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3a63c9cdfce73e8184b36a3b3a1a5001cb49ffe6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a63c9cdfce73e8184b36a3b3a1a5001cb49ffe6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a63c9cdfce73e8184b36a3b3a1a5001cb49ffe6"}], "stats": {"total": 40, "additions": 25, "deletions": 15}, "files": [{"sha": "a3b15b4161de097560369f4e523967dabb180c14", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "patch": "@@ -1,3 +1,13 @@\n+2008-10-15  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* config/mn10300/mn10300.h (OUTPUT_ADDR_CONST_EXTRA): Handle\n+\tUNSPEC_GOTSYM_OFFs.\n+\t* config/mn10300/mn10300.c (legitimate_pic_operand_p): Return true\n+\tfor UNSPEC_GOTSYM_OFFs.\n+\t* config/mn10300/mn10300.md (UNSPEC_GOTSYM_OFF): New unspec.\n+\t(add_GOT_to_pic_reg): Use it.\n+\t* config/mn10300/constraints.md (S): Allow UNSPEC_GOTSYM_OFF.\n+\n 2008-10-15  Jan Sjodin  <jan.sjodin@amd.com>\n     \t    Harsha Jagasia  <harsha.jagasia@amd.com>\n "}, {"sha": "8dbf63a75ba706af86d0a6c4b2b2702bb2d07100", "filename": "gcc/config/mn10300/constraints.md", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fconstraints.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fconstraints.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10300%2Fconstraints.md?ref=d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "patch": "@@ -68,7 +68,8 @@\n   (if_then_else (match_test \"flag_pic\")\n \t(and (match_test \"GET_CODE (op) == UNSPEC\")\n \t     (ior (match_test \"XINT (op, 1) == UNSPEC_PLT\")\n-\t\t  (match_test \"XINT (op, 1) == UNSPEC_PIC\")))\n+\t\t  (match_test \"XINT (op, 1) == UNSPEC_PIC\")\n+\t\t  (match_test \"XINT (op, 1) == UNSPEC_GOTSYM_OFF\")))\n \t(match_test \"GET_CODE (op) == SYMBOL_REF\")))\n \n ;; Integer constraints"}, {"sha": "eed829972443866d1646566bf20a56ca76c92a9f", "filename": "gcc/config/mn10300/mn10300.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fmn10300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fmn10300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10300%2Fmn10300.c?ref=d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "patch": "@@ -1869,7 +1869,8 @@ legitimate_pic_operand_p (rtx x)\n       && (XINT (x, 1) == UNSPEC_PIC\n \t  || XINT (x, 1) == UNSPEC_GOT\n \t  || XINT (x, 1) == UNSPEC_GOTOFF\n-\t  || XINT (x, 1) == UNSPEC_PLT))\n+\t  || XINT (x, 1) == UNSPEC_PLT\n+\t  || XINT (x, 1) == UNSPEC_GOTSYM_OFF))\n       return 1;\n \n   fmt = GET_RTX_FORMAT (GET_CODE (x));"}, {"sha": "d83eedfb08a914e98e215499dfdb8c11807f06c3", "filename": "gcc/config/mn10300/mn10300.h", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fmn10300.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fmn10300.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10300%2Fmn10300.h?ref=d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "patch": "@@ -738,7 +738,7 @@ while (0)\n    constants.  Used for PIC-specific UNSPECs.  */\n #define OUTPUT_ADDR_CONST_EXTRA(STREAM, X, FAIL) \\\n   do\t\t\t\t\t\t\t\t\t\\\n-    if (GET_CODE (X) == UNSPEC && XVECLEN ((X), 0) == 1)\t\\\n+    if (GET_CODE (X) == UNSPEC)\t\t\t\t\t\t\\\n       {\t\t\t\t\t\t\t\t\t\\\n \tswitch (XINT ((X), 1))\t\t\t\t\t\t\\\n \t  {\t\t\t\t\t\t\t\t\\\n@@ -762,6 +762,12 @@ while (0)\n \t    output_addr_const ((STREAM), XVECEXP ((X), 0, 0));\t\t\\\n \t    fputs (\"@PLT\", (STREAM));\t\t\t\t\t\\\n \t    break;\t\t\t\t\t\t\t\\\n+\t  case UNSPEC_GOTSYM_OFF:\t\t\t\t\t\\\n+\t    assemble_name (STREAM, GOT_SYMBOL_NAME);\t\t\t\\\n+\t    fputs (\"-(\", STREAM);\t\t\t\t\t\\\n+\t    output_addr_const (STREAM, XVECEXP (X, 0, 0));\t\t\\\n+\t    fputs (\"-.)\", STREAM);\t\t\t\t\t\\\n+\t    break;\t\t\t\t\t\t\t\\\n \t  default:\t\t\t\t\t\t\t\\\n \t    goto FAIL;\t\t\t\t\t\t\t\\\n \t  }\t\t\t\t\t\t\t\t\\"}, {"sha": "38aa37645ac28c532b86e804a6b3447d47e292f7", "filename": "gcc/config/mn10300/mn10300.md", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fmn10300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4e2d7d2d6149a1e4d3af82026c60eed95f17002/gcc%2Fconfig%2Fmn10300%2Fmn10300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10300%2Fmn10300.md?ref=d4e2d7d2d6149a1e4d3af82026c60eed95f17002", "patch": "@@ -45,6 +45,7 @@\n   (UNSPEC_GOT\t\t2)\n   (UNSPEC_GOTOFF\t3)\n   (UNSPEC_PLT\t\t4)\n+  (UNSPEC_GOTSYM_OFF\t5)\n ])\n \n (include \"predicates.md\")\n@@ -2619,18 +2620,9 @@\n   [(set (reg:SI PIC_REG)\n \t(plus:SI\n \t (reg:SI PIC_REG)\n-\t (const\n-\t  (unspec [(minus:SI\n-\t\t    (match_dup 1)\n-\t\t    (const (minus:SI\n-\t\t\t    (const (match_operand:SI 0 \"\" \"\"))\n-\t\t\t    (pc))))\n-\t\t  ] UNSPEC_PIC))))]\n-  \"\"\n-  \"\n-{\n-  operands[1] = gen_rtx_SYMBOL_REF (VOIDmode, GOT_SYMBOL_NAME);\n-}\")\n+\t (const:SI\n+\t  (unspec:SI [(match_operand:SI 0 \"\" \"\")] UNSPEC_GOTSYM_OFF))))]\n+  \"\")\n \n (define_expand \"symGOT2reg\"\n   [(match_operand:SI 0 \"\" \"\")"}]}