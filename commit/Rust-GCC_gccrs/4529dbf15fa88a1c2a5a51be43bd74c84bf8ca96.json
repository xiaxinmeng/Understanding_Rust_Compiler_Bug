{"sha": "4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDUyOWRiZjE1ZmE4OGExYzJhNWE1MWJlNDNiZDc0Yzg0YmY4Y2E5Ng==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-01-18T18:33:28Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-01-18T18:33:28Z"}, "message": "/home/richard/patches/freescale/head-submission/uclinux-oldabi.clog\n\nFrom-SVN: r120909", "tree": {"sha": "d7ebd741536894350f34b4c0c10cd8f5f6276a2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7ebd741536894350f34b4c0c10cd8f5f6276a2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/comments", "author": null, "committer": null, "parents": [{"sha": "150524cd4548de6c285f657c7362d83028b327d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/150524cd4548de6c285f657c7362d83028b327d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/150524cd4548de6c285f657c7362d83028b327d2"}], "stats": {"total": 101, "additions": 100, "deletions": 1}, "files": [{"sha": "286f5f285201028e4e15062a0a9ed06a98458d64", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "patch": "@@ -1,3 +1,10 @@\n+2007-01-18  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* doc/install.texi: Document m68k-uclinuxoldabi.\n+\t* config.gcc (m68k-*-uclinuxoldabi): New configuration.\n+\t* config/m68k/uclinux-oldabi.h: New file, copied from\n+\tconfig/m68k/uclinux.h.\n+\n 2007-01-18  Kaz Kojima  <kkojima@rr.iij4u.or.jp>\n \n \t* config/m32r/m32r-protos.h (m32r_expand_epilogue): Declare it."}, {"sha": "d611a8c2bc27e1ff4655725afa4f34c897fd205b", "filename": "gcc/config.gcc", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "patch": "@@ -1510,7 +1510,18 @@ m68k*-*-openbsd*)\n \t# we need collect2 until our bug is fixed...\n \tuse_collect2=yes\n \t;;\n-m68k-*-uclinux*)\t\t# Motorola m68k/ColdFire running uClinux with uClibc\n+m68k-*-uclinuxoldabi*)\t\t# Motorola m68k/ColdFire running uClinux\n+\t\t\t\t# with uClibc, using the original\n+\t\t\t\t# m68k-elf-based ABI\n+\tdefault_m68k_cpu=68020\n+\ttm_file=\"m68k/m68k.h m68k/m68k-none.h m68k/m68kelf.h dbxelf.h elfos.h m68k/uclinux-oldabi.h\"\n+ \ttm_defines=\"${tm_defines} MOTOROLA USE_GAS\"\n+\ttmake_file=m68k/t-uclinux\n+\tuse_fixproto=no\n+\t;;\n+m68k-*-uclinux*)\t\t# Motorola m68k/ColdFire running uClinux\n+\t\t\t\t# with uClibc, using the new GNU/Linux-style\n+\t\t\t\t# ABI.\n \tdefault_m68k_cpu=68020\n \ttm_file=\"m68k/m68k.h m68k/m68k-none.h m68k/m68kelf.h dbxelf.h elfos.h m68k/uclinux.h\"\n  \ttm_defines=\"${tm_defines} MOTOROLA USE_GAS\""}, {"sha": "82124f9619e03a20a43b754daa5da8efac76ff7c", "filename": "gcc/config/m68k/uclinux-oldabi.h", "status": "added", "additions": 65, "deletions": 0, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2Fconfig%2Fm68k%2Fuclinux-oldabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2Fconfig%2Fm68k%2Fuclinux-oldabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fuclinux-oldabi.h?ref=4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "patch": "@@ -0,0 +1,65 @@\n+/* Definitions of target machine for GCC.  m68k/ColdFire based uClinux system\n+   using ELF objects with special linker post-processing to produce FLAT\n+   executables.\n+\n+   Copyright (C) 2003 Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GCC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 51 Franklin Street, Fifth Floor,\n+Boston, MA 02110-1301, USA.  */\n+\n+\n+/* Undo the definition of STARTFILE_SPEC from m68kelf.h so we'll\n+   pick the default from gcc.c (just link crt0.o from multilib dir).  */\n+#undef\tSTARTFILE_SPEC\n+\n+/* Override the default LIB_SPEC from gcc.c.  We don't currently support\n+   profiling, or libg.a.  */\n+#undef LIB_SPEC\n+#define LIB_SPEC \"\\\n+%{mid-shared-library:-R libc.gdb%s -elf2flt -shared-lib-id 0} -lc \\\n+\"\n+\n+/* we don't want a .eh_frame section.  */\n+#define EH_FRAME_IN_DATA_SECTION\n+\n+/* ??? Quick hack to get constructors working.  Make this look more like a\n+   COFF target, so the existing dejagnu/libgloss support works.  A better\n+   solution would be to make the necessary dejagnu and libgloss changes so\n+   that we can use normal the ELF constructor mechanism.  */\n+#undef INIT_SECTION_ASM_OP\n+#undef FINI_SECTION_ASM_OP\n+#undef ENDFILE_SPEC\n+#define ENDFILE_SPEC \"\"\n+ \n+/* Bring in standard linux defines */\n+#undef TARGET_OS_CPP_BUILTINS\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+\tbuiltin_define_std (\"mc68000\");\t\t\\\n+\tbuiltin_define (\"__uClinux__\");\t\t\\\n+\tbuiltin_define_std (\"linux\");\t\t\\\n+\tbuiltin_define_std (\"unix\");\t\t\\\n+\tbuiltin_define (\"__gnu_linux__\");\t\\\n+\tbuiltin_assert (\"system=linux\");\t\\\n+\tbuiltin_assert (\"system=unix\");\t\t\\\n+\tbuiltin_assert (\"system=posix\");\t\\\n+\tif (TARGET_ID_SHARED_LIBRARY)\t\t\\\n+\t  builtin_define (\"__ID_SHARED_LIBRARY__\"); \\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n+"}, {"sha": "447c53d6a8adb76a0132f1944e10c75862a680c7", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=4529dbf15fa88a1c2a5a51be43bd74c84bf8ca96", "patch": "@@ -2429,6 +2429,8 @@ information are.\n @item\n @uref{#m68k-hp-hpux,,m68k-hp-hpux}\n @item\n+@uref{#m68k-uclinux,,m68k-uclinux}\n+@item\n @uref{#mips-x-x,,mips-*-*}\n @item\n @uref{#mips-sgi-irix5,,mips-sgi-irix5}\n@@ -3429,6 +3431,9 @@ This @var{target} can either be a @option{-mcpu} argument or one of the\n following values: @samp{m68000}, @samp{m68010}, @samp{m68020}, @samp{m68030},\n @samp{m68040}, @samp{m68060}, @samp{m68020-40} and @samp{m68020-60}.\n \n+@html\n+<hr />\n+@end html\n @heading @anchor{m68k-hp-hpux}m68k-hp-hpux\n HP 9000 series 300 or 400 running HP-UX@.  HP-UX version 8.0 has a bug in\n the assembler that prevents compilation of GCC@.  This\n@@ -3479,6 +3484,17 @@ to look like:\n #!/bin/ksh\n @end smallexample\n \n+@html\n+<hr />\n+@end html\n+@heading @anchor{m68k-x-uclinux}m68k-*-uclinux\n+GCC 4.3 changed the uClinux configuration so that it uses the\n+@samp{m68k-linux-gnu} ABI rather than the @samp{m68k-elf} ABI.\n+It also added improved support for C++ and flat shared libraries,\n+both of which were ABI changes.  However, you can still use the\n+original ABI by configuring for @samp{m68k-uclinuxoldabi} or\n+@samp{m68k-@var{vendor}-uclinuxoldabi}.\n+\n @html\n <hr />\n @end html"}]}