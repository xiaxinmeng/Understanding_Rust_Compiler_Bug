{"sha": "28354bc22bd66648891a875ee08ca2b27debf2a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjgzNTRiYzIyYmQ2NjY0ODg5MWE4NzVlZTA4Y2EyYjI3ZGViZjJhMg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-03-05T11:38:49Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-03-05T11:47:28Z"}, "message": "Fix undefined behavior spotted by the sanitizer\n\ngcc/\n\tPR rtl-optimization/99376\n\t* rtlanal.c (nonzero_bits1) <arithmetic operators>: If the number\n\tof low-order zero bits is too large, set the result to 0 directly.", "tree": {"sha": "b43b40b41ae00495bb1794bfe9c8fed15c784c85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b43b40b41ae00495bb1794bfe9c8fed15c784c85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28354bc22bd66648891a875ee08ca2b27debf2a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28354bc22bd66648891a875ee08ca2b27debf2a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28354bc22bd66648891a875ee08ca2b27debf2a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28354bc22bd66648891a875ee08ca2b27debf2a2/comments", "author": null, "committer": null, "parents": [{"sha": "6ddedd3efa3fe482f76a4037521a06b3ac9f2a8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ddedd3efa3fe482f76a4037521a06b3ac9f2a8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ddedd3efa3fe482f76a4037521a06b3ac9f2a8b"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "a8ea1d72636f293f602c6b4da3f102734eff3f2f", "filename": "gcc/rtlanal.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28354bc22bd66648891a875ee08ca2b27debf2a2/gcc%2Frtlanal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28354bc22bd66648891a875ee08ca2b27debf2a2/gcc%2Frtlanal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtlanal.c?ref=28354bc22bd66648891a875ee08ca2b27debf2a2", "patch": "@@ -5053,11 +5053,17 @@ nonzero_bits1 (const_rtx x, scalar_int_mode mode, const_rtx known_x,\n \t    gcc_unreachable ();\n \t  }\n \n+\t/* Note that mode_width <= HOST_BITS_PER_WIDE_INT, see above.  */\n \tif (result_width < mode_width)\n \t  nonzero &= (HOST_WIDE_INT_1U << result_width) - 1;\n \n \tif (result_low > 0)\n-\t  nonzero &= ~((HOST_WIDE_INT_1U << result_low) - 1);\n+\t  {\n+\t    if (result_low < HOST_BITS_PER_WIDE_INT)\n+\t      nonzero &= ~((HOST_WIDE_INT_1U << result_low) - 1);\n+\t    else\n+\t      nonzero = 0;\n+\t  }\n       }\n       break;\n "}]}