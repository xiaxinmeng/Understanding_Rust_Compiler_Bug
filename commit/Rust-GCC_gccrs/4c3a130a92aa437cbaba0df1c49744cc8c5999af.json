{"sha": "4c3a130a92aa437cbaba0df1c49744cc8c5999af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGMzYTEzMGE5MmFhNDM3Y2JhYmEwZGYxYzQ5NzQ0Y2M4YzU5OTlhZg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-30T09:21:34Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-30T09:21:34Z"}, "message": "On Net 2 system, don't test, define or undef _VA_LIST_.\n\nUse _ANSI_H_, __BSD_NET2__ and ____386BSD____ to test for this.\n\nFrom-SVN: r2657", "tree": {"sha": "54299ea21450b80484466d3c7b35b994ebf03344", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54299ea21450b80484466d3c7b35b994ebf03344"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c3a130a92aa437cbaba0df1c49744cc8c5999af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c3a130a92aa437cbaba0df1c49744cc8c5999af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c3a130a92aa437cbaba0df1c49744cc8c5999af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c3a130a92aa437cbaba0df1c49744cc8c5999af/comments", "author": null, "committer": null, "parents": [{"sha": "2a1f8b6bca3e10f7380a7165a3cb376a94ef6a39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a1f8b6bca3e10f7380a7165a3cb376a94ef6a39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a1f8b6bca3e10f7380a7165a3cb376a94ef6a39"}], "stats": {"total": 24, "additions": 8, "deletions": 16}, "files": [{"sha": "01d6c3d93d2c2adb6a65cb7c5728703f855b8b57", "filename": "gcc/ginclude/varargs.h", "status": "modified", "additions": 8, "deletions": 16, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c3a130a92aa437cbaba0df1c49744cc8c5999af/gcc%2Fginclude%2Fvarargs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c3a130a92aa437cbaba0df1c49744cc8c5999af/gcc%2Fginclude%2Fvarargs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fginclude%2Fvarargs.h?ref=4c3a130a92aa437cbaba0df1c49744cc8c5999af", "patch": "@@ -108,13 +108,6 @@ typedef void *__gnuc_va_list;\n #undef _VA_LIST\n #endif\n \n-/*  In 4.3bsd-net2, _VA_LIST_ is defined by machine/ansi.h, but no\n-    typedef for va_list is in that file.  Undef _VA_LIST_ here\n-    so we do define va_list.  */\n-#ifdef _ANSI_H_\n-#undef _VA_LIST_\n-#endif\n-\n #ifdef __SVR4_2__\n \n /* SVR4.2 uses _VA_LIST for an internal alias for va_list,\n@@ -127,23 +120,22 @@ typedef __gnuc_va_list va_list;\n #else /* not __SVR4_2__ */\n \n /* The macro _VA_LIST_ is the same thing used by this file in Ultrix.  */\n-#ifndef _VA_LIST_\n+/* However, 4.3bsd-net2 uses it in a completely different way.\n+   So if we are in 4.3bsd-net2, pay no attention to _VA_LIST_.  */\n+#if ! defined (_VA_LIST_) || defined (_ANSI_H_) || defined (__BSD_NET2__) || defined (____386BSD____)\n /* The macro _VA_LIST is used in SCO Unix 3.2.  */\n #ifndef _VA_LIST\n+#if !(defined (_ANSI_H_) || defined (__BSD_NET2__) || defined (____386BSD____))\n+   /* Don't mess with _VA_LIST_ at all, on 4.3bsd-net2.  */\n #define _VA_LIST_\n+#endif /* not net2 */\n #define _VA_LIST\n typedef __gnuc_va_list va_list;\n-#endif /* _VA_LIST */\n-#endif /* _VA_LIST_ */\n+#endif /* not _VA_LIST */\n+#endif /* not _VA_LIST_ (or _ANSI_H_) */\n \n #endif /* not __SVR4_2__ */\n \n-/*  I think that in 4.3bsd-net2 there is some need\n-    to leave _VA_LIST_ undefined after.  I don't know why. -- rms.  */\n-#ifdef _ANSI_H_\n-#undef _VA_LIST_\n-#endif\n-\n /* The next BSD release (if there is one) wants this symbol to be\n    undefined instead of _VA_LIST_.  */\n #ifdef _BSD_VA_LIST"}]}