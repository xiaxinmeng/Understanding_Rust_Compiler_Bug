{"sha": "6c1400dd58f277badc66633f5d26b7c9ba589a11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmMxNDAwZGQ1OGYyNzdiYWRjNjY2MzNmNWQyNmI3YzliYTU4OWExMQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2010-03-30T03:22:28Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2010-03-30T03:22:28Z"}, "message": "re PR fortran/43265 (No EOF condition if reading with '(x)' from an empty file)\n\n2010-03-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libfortran/43265\n\t* io/transfer.c (next_record_r): Only call hit_eof for specific\n\tconditions when an EOF is encountered.\n\nFrom-SVN: r157810", "tree": {"sha": "e7828efd56c2d143b2b7e19ee26f1ecefacc326f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7828efd56c2d143b2b7e19ee26f1ecefacc326f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c1400dd58f277badc66633f5d26b7c9ba589a11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c1400dd58f277badc66633f5d26b7c9ba589a11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c1400dd58f277badc66633f5d26b7c9ba589a11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c1400dd58f277badc66633f5d26b7c9ba589a11/comments", "author": null, "committer": null, "parents": [{"sha": "fff4363b3ea24e5cdde957aa199a991b5f5400e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fff4363b3ea24e5cdde957aa199a991b5f5400e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fff4363b3ea24e5cdde957aa199a991b5f5400e1"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "2385b64483c20d621f7fdccad73add09e727b060", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c1400dd58f277badc66633f5d26b7c9ba589a11/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c1400dd58f277badc66633f5d26b7c9ba589a11/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=6c1400dd58f277badc66633f5d26b7c9ba589a11", "patch": "@@ -1,3 +1,9 @@\n+2010-03-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libfortran/43265\n+\t* io/transfer.c (next_record_r): Only call hit_eof for specific\n+\tconditions when an EOF is encountered.\n+\n 2010-03-29  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/43551"}, {"sha": "93c0e03c25d5f6489be909263fcc50d4f1102c99", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c1400dd58f277badc66633f5d26b7c9ba589a11/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c1400dd58f277badc66633f5d26b7c9ba589a11/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=6c1400dd58f277badc66633f5d26b7c9ba589a11", "patch": "@@ -2848,9 +2848,14 @@ next_record_r (st_parameter_dt *dtp, int done)\n \t\t{\n                   if (errno != 0)\n                     generate_error (&dtp->common, LIBERROR_OS, NULL);\n-\t\t  else if (dtp->u.p.item_count == 1\n-\t\t\t   || dtp->u.p.pending_spaces == 0)\n-\t\t    hit_eof (dtp);\n+\t\t  else\n+\t\t    {\n+\t\t      if (is_stream_io (dtp)\n+\t\t\t  || dtp->u.p.current_unit->pad_status == PAD_NO\n+\t\t\t  || dtp->u.p.current_unit->bytes_left\n+\t\t\t     == dtp->u.p.current_unit->recl)\n+\t\t\thit_eof (dtp);\n+\t\t    }\n \t\t  break;\n                 }\n \t      "}]}