{"sha": "a39d2742befc2e715e90ddadbc63431252e3e09c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTM5ZDI3NDJiZWZjMmU3MTVlOTBkZGFkYmM2MzQzMTI1MmUzZTA5Yw==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2005-11-06T18:29:17Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2005-11-06T18:29:17Z"}, "message": "gcc_release: Further update for SVN.\n\n\t* gcc_release: Further update for SVN.  Don't set EXPORTTAG or\n\tEXPORTDATE; always determine SVNREV the same way.  Correct message\n\tabout what sources are being retrived.  Include branch information\n\tin LAST_UPDATED.\n\t* crontab: Don't include initial / in branch name.\n\nFrom-SVN: r106564", "tree": {"sha": "5974c8c68fd36357dcfce74e37db74be27665fcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5974c8c68fd36357dcfce74e37db74be27665fcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a39d2742befc2e715e90ddadbc63431252e3e09c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a39d2742befc2e715e90ddadbc63431252e3e09c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a39d2742befc2e715e90ddadbc63431252e3e09c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a39d2742befc2e715e90ddadbc63431252e3e09c/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5ef4b3bcbd6d8b166eeecab4581f196a3964697", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5ef4b3bcbd6d8b166eeecab4581f196a3964697", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5ef4b3bcbd6d8b166eeecab4581f196a3964697"}], "stats": {"total": 57, "additions": 24, "deletions": 33}, "files": [{"sha": "2054cb482ff41eec10c115f26dd4525aba222e97", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a39d2742befc2e715e90ddadbc63431252e3e09c/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a39d2742befc2e715e90ddadbc63431252e3e09c/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=a39d2742befc2e715e90ddadbc63431252e3e09c", "patch": "@@ -1,3 +1,11 @@\n+2005-11-06  Joseph S. Myers  <joseph@codesourcery.com>\n+\n+\t* gcc_release: Further update for SVN.  Don't set EXPORTTAG or\n+\tEXPORTDATE; always determine SVNREV the same way.  Correct message\n+\tabout what sources are being retrived.  Include branch information\n+\tin LAST_UPDATED.\n+\t* crontab: Don't include initial / in branch name.\n+\n 2005-11-05  Daniel Berlin  <dberlin@dberlin.org>\n \n \t* gcc_release:  Always determine revision number from date or tag,"}, {"sha": "5f2b36a85dee7a560016a26f29e1519d2d81c0e8", "filename": "maintainer-scripts/crontab", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a39d2742befc2e715e90ddadbc63431252e3e09c/maintainer-scripts%2Fcrontab", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a39d2742befc2e715e90ddadbc63431252e3e09c/maintainer-scripts%2Fcrontab", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fcrontab?ref=a39d2742befc2e715e90ddadbc63431252e3e09c", "patch": "@@ -1,6 +1,6 @@\n 16  0 * * * sh /home/gccadmin/scripts/update_version_svn\n 50  0 * * * sh /home/gccadmin/scripts/update_web_docs_svn\n 55  0 * * * sh /home/gccadmin/scripts/update_web_docs_libstdcxx_svn\n-32 22 * * 2 sh /home/gccadmin/scripts/gcc_release -s 3.4:/branches/gcc-3_4-branch -l -d /sourceware/snapshot-tmp/gcc all\n-32 22 * * 4 sh /home/gccadmin/scripts/gcc_release -s 4.0:/branches/gcc-4_0-branch -l -d /sourceware/snapshot-tmp/gcc all\n-43 17 * * 6 sh /home/gccadmin/scripts/gcc_release -s 4.1:/trunk           -l -d /sourceware/snapshot-tmp/gcc all\n+32 22 * * 2 sh /home/gccadmin/scripts/gcc_release -s 3.4:branches/gcc-3_4-branch -l -d /sourceware/snapshot-tmp/gcc all\n+32 22 * * 4 sh /home/gccadmin/scripts/gcc_release -s 4.0:branches/gcc-4_0-branch -l -d /sourceware/snapshot-tmp/gcc all\n+43 17 * * 6 sh /home/gccadmin/scripts/gcc_release -s 4.1:trunk           -l -d /sourceware/snapshot-tmp/gcc all"}, {"sha": "adba309303da30d64836bebf89ac712393be41b8", "filename": "maintainer-scripts/gcc_release", "status": "modified", "additions": 13, "deletions": 30, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a39d2742befc2e715e90ddadbc63431252e3e09c/maintainer-scripts%2Fgcc_release", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a39d2742befc2e715e90ddadbc63431252e3e09c/maintainer-scripts%2Fgcc_release", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fgcc_release?ref=a39d2742befc2e715e90ddadbc63431252e3e09c", "patch": "@@ -65,19 +65,19 @@ inform() {\n usage() {\n cat <<EOF\n gcc_release -r release [-f] [further options]\n-gcc_release -s name:cvsbranch [further options]\n+gcc_release -s name:svnbranch [further options]\n \n Options:\n \n   -r release           Version of the form X.Y or X.Y.Z.\n-  -s name:cvsbranch    Create a snapshot, not a real release.\n+  -s name:svnbranch    Create a snapshot, not a real release.\n \n   -d destination       Local working directory where we will build the release\n                        (default=${HOME}).\n   -f                   Create a final release (and update ChangeLogs,...).\n   -l                   Indicate that we are running on gcc.gnu.org.\n   -p previous-tarball  Location of a previous tarball (to generate diff files).\n-  -t tag               Tag to mark the release in CVS.\n+  -t tag               Tag to mark the release in SVN.\n   -u username          Username for upload operations.\n EOF\n     exit 1\n@@ -166,46 +166,32 @@ EOF\n   fi\n \n   # Tag the sources.\n-  EXPORTDATE=\"\"\n   if [ -n \"${TAG}\" ]; then\n     inform \"Tagging sources as ${TAG}\"\n-    EXPORTTAG=\"${TAG}\"\n-    # Try to check out a file using ${TAG}.  If the command succeeds,\n-    # then the sources have already been tagged.  We don't want to \n-    # overwrite an existing tag, so we don't want to use the \"-F\"\n-    # option to \"cvs rtag\" below.  So, if the tag already exists,\n-    # issue an error message; the release manager can manually remove\n-    # the tag if appropriate.\n-    echo \"${SVN} ls ${SVNROOT}/${EXPORTTAG}/ChangeLog\" \n-    if ${SVN} ls \"${SVNROOT}/${EXPORTTAG}/ChangeLog\"; then \n+    # We don't want to overwrite an existing tag.  So, if the tag\n+    # already exists, issue an error message; the release manager can\n+    # manually remove the tag if appropriate.\n+    echo \"${SVN} ls ${SVNROOT}/${TAG}/ChangeLog\" \n+    if ${SVN} ls \"${SVNROOT}/${TAG}/ChangeLog\"; then \n       error \"Tag ${TAG} already exists\"\n     fi\n     ${SVN} -m \"Tagging source as ${TAG}\" cp \"${SVNROOT}/${SVNBRANCH}\" \"${SVNROOT}/${TAG}\" || \\\n       error \"Could not tag sources\"\n-  else\n-    if [ ${SVNBRANCH} != \"/trunk\" ]; then\n-      EXPORTTAG=\"/branches/${SVNBRANCH}\"\n-      # It does not work to use both \"-r\" and \"-D\" with\n-      # \"cvs export\" so EXPORTDATE is not set here.\n-      SVNREV=`${SVN} info \"${SVNROOT}/${EXPORTTAG}\"|grep \"Revision:\"|awk '{print $2}'`\n-    else\n-      EXPORTTAG=\"\"\n-      EXPORTDATE=\"-D{`date --iso-8601=minutes`}\"\n-      SVNREV=`${SVN} info ${EXPORTDATE} \"${SVNROOT}/trunk\"|grep \"Revision:\"|awk '{print $2}'`\n-    fi\n+    SVNBRANCH=${TAG}\n   fi\n+  SVNREV=`${SVN} info \"${SVNROOT}/${SVNBRANCH}\"|awk '/Revision:/ {print $2}'`\n \n   # Export the current sources.\n-  inform \"Retrieving sources (svn export -r ${SVNREV} ${SVNROOT}/${SVNBRANCH}/gcc)\"\n+  inform \"Retrieving sources (svn export -r ${SVNREV} ${SVNROOT}/${SVNBRANCH})\"\n \n   ${SVN} -q export -r${SVNREV} \"${SVNROOT}/${SVNBRANCH}\" \"`basename ${SOURCE_DIRECTORY}`\" ||\\\n     error \"Could not retrieve sources\"\n \n   # Run gcc_update on them to set up the timestamps nicely, and (re)write\n-  # the LAST_UPDATED file containing the CVS tag/date used.\n+  # the LAST_UPDATED file containing the SVN tag/revision used.\n   changedir \"gcc-${RELEASE}\"\n   contrib/gcc_update --touch\n-  echo \"Obtained from SVN: Revision ${SVNREV}\" > LAST_UPDATED\n+  echo \"Obtained from SVN: ${SVNBRANCH} revision ${SVNREV}\" > LAST_UPDATED\n \n   # Obtain some documentation files from the wwwdocs module.\n   inform \"Retrieving HTML documentation\"\n@@ -720,9 +706,6 @@ if [ $SNAPSHOT -eq 0 ]; then\n else\n   RELEASE=${BRANCH}-${DATE}\n   FTP_PATH=\"${FTP_PATH}/snapshots/${RELEASE}\"\n-#  if [ ${SVNBRANCH} != \"/trunk\" ]; then\n-#    TAG=tags/gcc-ss-`echo ${RELEASE} | tr '.' '_'`\n-#  fi\n \n   # If diffs are requested when building locally on gcc.gnu.org, we (usually)\n   # know what the last snapshot date was and take the corresponding tarballs,"}]}