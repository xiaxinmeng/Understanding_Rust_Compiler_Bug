{"sha": "6ff6152d5046cab8da2873eb3a95bd85b7074194", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZmNjE1MmQ1MDQ2Y2FiOGRhMjg3M2ViM2E5NWJkODViNzA3NDE5NA==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2011-08-02T15:17:00Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-02T15:17:00Z"}, "message": "sem_aggr.adb (Resolve_Array_Aggregate): when copying the expression in an association...\n\n2011-08-02  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_aggr.adb (Resolve_Array_Aggregate): when copying the expression\n\tin an association, set parent field of copy before partial analysis.\n\t* sem_res.adb (Resolve_Slice): create reference to itype only when\n\texpansion is enabled.\n\nFrom-SVN: r177178", "tree": {"sha": "284c7b6bf8b1bd4eb4254d6f70b9600f3e895f8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/284c7b6bf8b1bd4eb4254d6f70b9600f3e895f8b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ff6152d5046cab8da2873eb3a95bd85b7074194", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ff6152d5046cab8da2873eb3a95bd85b7074194", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ff6152d5046cab8da2873eb3a95bd85b7074194", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ff6152d5046cab8da2873eb3a95bd85b7074194/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "975c689678295f3c614f55a84a62c49bdd866a6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/975c689678295f3c614f55a84a62c49bdd866a6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/975c689678295f3c614f55a84a62c49bdd866a6a"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "1d855df2a83a056f8409abd055a2da7e033cb379", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ff6152d5046cab8da2873eb3a95bd85b7074194/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ff6152d5046cab8da2873eb3a95bd85b7074194/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6ff6152d5046cab8da2873eb3a95bd85b7074194", "patch": "@@ -1,3 +1,10 @@\n+2011-08-02  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_aggr.adb (Resolve_Array_Aggregate): when copying the expression\n+\tin an association, set parent field of copy before partial analysis.\n+\t* sem_res.adb (Resolve_Slice): create reference to itype only when\n+\texpansion is enabled.\n+\n 2011-08-02  Yannick Moy  <moy@adacore.com>\n \n \t* einfo.adb, einfo.ads (Body_Is_In_ALFA, Set_Body_Is_In_ALFA): get/set"}, {"sha": "59374c203829df0e6dbf3b2c542df184dd1ea1c8", "filename": "gcc/ada/sem_aggr.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ff6152d5046cab8da2873eb3a95bd85b7074194/gcc%2Fada%2Fsem_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ff6152d5046cab8da2873eb3a95bd85b7074194/gcc%2Fada%2Fsem_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_aggr.adb?ref=6ff6152d5046cab8da2873eb3a95bd85b7074194", "patch": "@@ -1974,6 +1974,11 @@ package body Sem_Aggr is\n                   begin\n                      Expander_Mode_Save_And_Set (False);\n                      Full_Analysis := False;\n+\n+                     --  Analyze the expression, making sure it is properly\n+                     --  attached to the tree before we do the analysis.\n+\n+                     Set_Parent (Expr, Parent (Expression (Assoc)));\n                      Analyze (Expr);\n \n                      --  If the expression is a literal, propagate this info"}, {"sha": "84f03278de6bc0e1be2e537c63eeee848f79b396", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ff6152d5046cab8da2873eb3a95bd85b7074194/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ff6152d5046cab8da2873eb3a95bd85b7074194/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=6ff6152d5046cab8da2873eb3a95bd85b7074194", "patch": "@@ -9817,9 +9817,10 @@ package body Sem_Res is\n       --  so that the itype is frozen at the proper place in the tree (i.e. at\n       --  the point where actions for the slice are analyzed). Note that this\n       --  is different from freezing the itype immediately, which might be\n-      --  premature (e.g. if the slice is within a transient scope).\n+      --  premature (e.g. if the slice is within a transient scope). This needs\n+      --  to be done only if expansion is enabled.\n \n-      else\n+      elsif Expander_Active then\n          Ensure_Defined (Typ => Slice_Subtype, N => N);\n       end if;\n    end Set_Slice_Subtype;"}]}