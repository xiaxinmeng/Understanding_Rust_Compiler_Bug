{"sha": "98824c6fc45b6262b807091ec68193decef6ba0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg4MjRjNmZjNDViNjI2MmI4MDcwOTFlYzY4MTkzZGVjZWY2YmEwYw==", "commit": {"author": {"name": "Mingming Sun", "email": "mingm.sun@gmail.com", "date": "2010-11-13T17:30:52Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2010-11-13T17:30:52Z"}, "message": "invoke.texi (MIPS Options): Add loongson3a processor.\n\ngcc/\n2010-09-21  Mingming Sun  <mingm.sun@gmail.com>\n\n\t* doc/invoke.texi (MIPS Options): Add loongson3a processor.\n\t* config/mips/mips.md (define_attr \"cpu\"): Add loongson_3a.\n\t(define_insn \"prefetch\"): Add TARGET_LOONGSON_3A.\n\t* config/mips/mips.h (TARGET_LOONGSON_3A): Define.\n\t(TUNE_LOONGSON_3A): Define.\n\t(TARGET_LOONGSON_VECTORS): Add TARGET_LOONGSON_3A.\n\t(MIPS_ISA_LEVEL_SPEC): Add loongson3a.\n\t* config/mips/mips.c (mips_cpu_info_table): Add loongson3a.\n\t(mips_issue_rate): Add PROCESSOR_LOONGSON_3A.\n\t(mips_rtx_cost_data): Add Loongson-3A.\n\nFrom-SVN: r166716", "tree": {"sha": "53f9a44051921b255a54a1aa8a6d35a6648ac8e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/53f9a44051921b255a54a1aa8a6d35a6648ac8e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98824c6fc45b6262b807091ec68193decef6ba0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98824c6fc45b6262b807091ec68193decef6ba0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98824c6fc45b6262b807091ec68193decef6ba0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98824c6fc45b6262b807091ec68193decef6ba0c/comments", "author": null, "committer": null, "parents": [{"sha": "989b59db15278ce97f73b7c1fdb56959241cca01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/989b59db15278ce97f73b7c1fdb56959241cca01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/989b59db15278ce97f73b7c1fdb56959241cca01"}], "stats": {"total": 32, "additions": 27, "deletions": 5}, "files": [{"sha": "08dd481a6a8e5de8782228a30333e87e41cba78b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=98824c6fc45b6262b807091ec68193decef6ba0c", "patch": "@@ -1,3 +1,16 @@\n+2010-11-13  Mingming Sun  <mingm.sun@gmail.com>\n+\n+\t* doc/invoke.texi (MIPS Options): Add loongson3a processor.\n+\t* config/mips/mips.md (define_attr \"cpu\"): Add loongson_3a.\n+\t(define_insn \"prefetch\"): Add TARGET_LOONGSON_3A.\n+\t* config/mips/mips.h (TARGET_LOONGSON_3A): Define.\n+\t(TUNE_LOONGSON_3A): Define.\n+\t(TARGET_LOONGSON_VECTORS): Add TARGET_LOONGSON_3A.\n+\t(MIPS_ISA_LEVEL_SPEC): Add loongson3a.\n+\t* config/mips/mips.c (mips_cpu_info_table): Add loongson3a.\n+\t(mips_issue_rate): Add PROCESSOR_LOONGSON_3A.\n+\t(mips_rtx_cost_data): Add Loongson-3A.\n+\n 2010-11-13  Iain Sandoe  <iains@gcc.gnu.org>\n \n \t* config/darwin.h (LINK_COMMAND_SPEC_A): Update for changes to lto"}, {"sha": "de587a50747e8c45a9f9b35b90ecd278b4a9f05a", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=98824c6fc45b6262b807091ec68193decef6ba0c", "patch": "@@ -779,6 +779,7 @@ static const struct mips_cpu_info mips_cpu_info_table[] = {\n   { \"sb1a\", PROCESSOR_SB1A, 64, PTF_AVOID_BRANCHLIKELY },\n   { \"sr71000\", PROCESSOR_SR71000, 64, PTF_AVOID_BRANCHLIKELY },\n   { \"xlr\", PROCESSOR_XLR, 64, 0 },\n+  { \"loongson3a\", PROCESSOR_LOONGSON_3A, 64, PTF_AVOID_BRANCHLIKELY },\n \n   /* MIPS64 Release 2 processors.  */\n   { \"octeon\", PROCESSOR_OCTEON, 65, PTF_AVOID_BRANCHLIKELY }\n@@ -979,6 +980,9 @@ static const struct mips_rtx_cost_data\n   { /* Loongson-2F */\n     DEFAULT_COSTS\n   },\n+  { /* Loongson-3A */\n+    DEFAULT_COSTS\n+  },\n   { /* M4k */\n     DEFAULT_COSTS\n   },\n@@ -12040,6 +12044,7 @@ mips_issue_rate (void)\n \n     case PROCESSOR_LOONGSON_2E:\n     case PROCESSOR_LOONGSON_2F:\n+    case PROCESSOR_LOONGSON_3A:\n       return 4;\n \n     default:"}, {"sha": "392e4574ffdfd2bbd54c346ea1d77fa73c6c1df1", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=98824c6fc45b6262b807091ec68193decef6ba0c", "patch": "@@ -218,6 +218,7 @@ enum mips_code_readable_setting {\n #define TARGET_LOONGSON_2E          (mips_arch == PROCESSOR_LOONGSON_2E)\n #define TARGET_LOONGSON_2F          (mips_arch == PROCESSOR_LOONGSON_2F)\n #define TARGET_LOONGSON_2EF         (TARGET_LOONGSON_2E || TARGET_LOONGSON_2F)\n+#define TARGET_LOONGSON_3A          (mips_arch == PROCESSOR_LOONGSON_3A)\n #define TARGET_MIPS3900             (mips_arch == PROCESSOR_R3900)\n #define TARGET_MIPS4000             (mips_arch == PROCESSOR_R4000)\n #define TARGET_MIPS4120             (mips_arch == PROCESSOR_R4120)\n@@ -242,6 +243,7 @@ enum mips_code_readable_setting {\n \t\t\t\t     || mips_tune == PROCESSOR_74KF3_2)\n #define TUNE_LOONGSON_2EF           (mips_tune == PROCESSOR_LOONGSON_2E\t\\\n \t\t\t\t     || mips_tune == PROCESSOR_LOONGSON_2F)\n+#define TUNE_LOONGSON_3A            (mips_tune == PROCESSOR_LOONGSON_3A)\n #define TUNE_MIPS3000               (mips_tune == PROCESSOR_R3000)\n #define TUNE_MIPS3900               (mips_tune == PROCESSOR_R3900)\n #define TUNE_MIPS4000               (mips_tune == PROCESSOR_R4000)\n@@ -261,7 +263,8 @@ enum mips_code_readable_setting {\n    Loongson-2E/2F processors should be enabled.  In o32 pairs of\n    floating-point registers provide 64-bit values.  */\n #define TARGET_LOONGSON_VECTORS\t    (TARGET_HARD_FLOAT_ABI\t\t\\\n-\t\t\t\t     && TARGET_LOONGSON_2EF)\n+\t\t\t\t     && (TARGET_LOONGSON_2EF\t\t\\\n+\t\t\t\t\t || TARGET_LOONGSON_3A))\n \n /* True if the pre-reload scheduler should try to create chains of\n    multiply-add or multiply-subtract instructions.  For example,\n@@ -716,7 +719,7 @@ enum mips_code_readable_setting {\n      %{march=mips32r2|march=m4k|march=4ke*|march=4ksd|march=24k* \\\n        |march=34k*|march=74k*|march=1004k*: -mips32r2} \\\n      %{march=mips64|march=5k*|march=20k*|march=sb1*|march=sr71000 \\\n-       |march=xlr: -mips64} \\\n+       |march=xlr|march=loongson3a: -mips64} \\\n      %{march=mips64r2|march=octeon: -mips64r2} \\\n      %{!march=*: -\" MULTILIB_ISA_DEFAULT \"}}\"\n "}, {"sha": "2f9b77933fbbb6119964296cb02def58819aaebc", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=98824c6fc45b6262b807091ec68193decef6ba0c", "patch": "@@ -39,6 +39,7 @@\n   74kf3_2\n   loongson_2e\n   loongson_2f\n+  loongson_3a\n   m4k\n   octeon\n   r3900\n@@ -6247,8 +6248,8 @@\n \t     (match_operand 2 \"const_int_operand\" \"n\"))]\n   \"ISA_HAS_PREFETCH && TARGET_EXPLICIT_RELOCS\"\n {\n-  if (TARGET_LOONGSON_2EF)\n-    /* Loongson 2[ef] use load to $0 to perform prefetching.  */\n+  if (TARGET_LOONGSON_2EF || TARGET_LOONGSON_3A)\n+    /* Loongson 2[ef] and Loongson 3a use load to $0 to perform prefetching.  */\n     return \"ld\\t$0,%a0\";\n   operands[1] = mips_prefetch_cookie (operands[1], operands[2]);\n   return \"pref\\t%1,%a0\";"}, {"sha": "103aa78f22503d9688b221c7515ac9b7c95b9b2c", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98824c6fc45b6262b807091ec68193decef6ba0c/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=98824c6fc45b6262b807091ec68193decef6ba0c", "patch": "@@ -14035,7 +14035,7 @@ The processor names are:\n @samp{34kc}, @samp{34kf2_1}, @samp{34kf1_1},\n @samp{74kc}, @samp{74kf2_1}, @samp{74kf1_1}, @samp{74kf3_2},\n @samp{1004kc}, @samp{1004kf2_1}, @samp{1004kf1_1},\n-@samp{loongson2e}, @samp{loongson2f},\n+@samp{loongson2e}, @samp{loongson2f}, @samp{loongson3a},\n @samp{m4k},\n @samp{octeon},\n @samp{orion},"}]}