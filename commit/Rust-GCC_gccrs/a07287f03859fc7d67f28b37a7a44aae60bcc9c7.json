{"sha": "a07287f03859fc7d67f28b37a7a44aae60bcc9c7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTA3Mjg3ZjAzODU5ZmM3ZDY3ZjI4YjM3YTdhNDRhYWU2MGJjYzljNw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-10-08T23:12:20Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-10-08T23:12:20Z"}, "message": "(DBX_STATIC_BLOCK_START): For N_LCSYM, force change\nto text section to avoid assembler bug.\n\nFrom-SVN: r5693", "tree": {"sha": "8f007888e84cfb26d99befd6d99c53c4af94a4ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f007888e84cfb26d99befd6d99c53c4af94a4ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a07287f03859fc7d67f28b37a7a44aae60bcc9c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a07287f03859fc7d67f28b37a7a44aae60bcc9c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a07287f03859fc7d67f28b37a7a44aae60bcc9c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a07287f03859fc7d67f28b37a7a44aae60bcc9c7/comments", "author": null, "committer": null, "parents": [{"sha": "a3df8278df2a857541d0849bcc1fb2cef20c2c45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3df8278df2a857541d0849bcc1fb2cef20c2c45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3df8278df2a857541d0849bcc1fb2cef20c2c45"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "7efa984d08b2abd154f578ae6243c20aa9ae604a", "filename": "gcc/xcoffout.h", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a07287f03859fc7d67f28b37a7a44aae60bcc9c7/gcc%2Fxcoffout.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a07287f03859fc7d67f28b37a7a44aae60bcc9c7/gcc%2Fxcoffout.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fxcoffout.h?ref=a07287f03859fc7d67f28b37a7a44aae60bcc9c7", "patch": "@@ -28,14 +28,30 @@\n \n #define DBX_STATIC_CONST_VAR_CODE N_STSYM\n \n-/* For static variables, output code to define the start of a static block.  */\n+/* For static variables, output code to define the start of a static block.\n+\n+   ??? The IBM rs6000/AIX assembler has a bug that causes bss block debug\n+   info to be occasionally lost.  A simple example is this:\n+\tint a; static int b;\n+   The commands `gcc -g -c tmp.c; dump -t tmp.o' gives\n+[10]\tm   0x00000016         1     0    0x8f  0x0000            .bs\n+[11]\tm   0x00000000         1     0    0x90  0x0000            .es\n+...\n+[21]\tm   0x00000000        -2     0    0x85  0x0000            b:S-1\n+   which is wrong.  The `b:S-1' must be between the `.bs' and `.es'.\n+   We can apparently work around the problem by forcing the text section\n+   (even if we are already in the text section) immediately before outputting\n+   the `.bs'.  This should be fixed in the next major AIX release (3.3?).  */\n \n #define DBX_STATIC_BLOCK_START(ASMFILE,CODE)\t\t\t\t\\\n {\t\t\t\t\t\t\t\t\t\\\n   if ((CODE) == N_STSYM)\t\t\t\t\t\t\\\n     fprintf ((ASMFILE), \"\\t.bs\\t%s[RW]\\n\", xcoff_private_data_section_name);\\\n   else if ((CODE) == N_LCSYM)\t\t\t\t\t\t\\\n-    fprintf ((ASMFILE), \"\\t.bs\\t%s\\n\", xcoff_bss_section_name);\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      fprintf ((ASMFILE), \"%s\\n\", TEXT_SECTION_ASM_OP);\t\t\t\\\n+      fprintf ((ASMFILE), \"\\t.bs\\t%s\\n\", xcoff_bss_section_name);\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n }\n \n /* For static variables, output code to define the end of a static block.  */"}]}