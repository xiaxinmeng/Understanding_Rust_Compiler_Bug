{"sha": "900846cda693e199f4ebafd99af72445c3016629", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAwODQ2Y2RhNjkzZTE5OWY0ZWJhZmQ5OWFmNzI0NDVjMzAxNjYyOQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2020-12-17T00:14:58Z"}, "committer": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2020-12-17T00:14:58Z"}, "message": "reginfo: Add a global_reg_set\n\nA later patch wants to use the set of global registers as a HARD_REG_SET\nrather than a bool/char array.  Most other arrays already have a\nHARD_REG_SET counterpart, but this one didn't.\n\ngcc/\n\t* hard-reg-set.h (global_reg_set): Declare.\n\t* reginfo.c (global_reg_set): New variable.\n\t(init_reg_sets_1, globalize_reg): Update it when globalizing\n\tregisters.", "tree": {"sha": "3741d62cc4b98bee806d5b058c8663127be9a8e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3741d62cc4b98bee806d5b058c8663127be9a8e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/900846cda693e199f4ebafd99af72445c3016629", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/900846cda693e199f4ebafd99af72445c3016629", "html_url": "https://github.com/Rust-GCC/gccrs/commit/900846cda693e199f4ebafd99af72445c3016629", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/900846cda693e199f4ebafd99af72445c3016629/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c1e7eed891a7b8fd8bbe6a13e6435cfbe7e9055", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c1e7eed891a7b8fd8bbe6a13e6435cfbe7e9055", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c1e7eed891a7b8fd8bbe6a13e6435cfbe7e9055"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "787da3a4f02d3ebe9fbde9eb02b4a2877019f726", "filename": "gcc/hard-reg-set.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900846cda693e199f4ebafd99af72445c3016629/gcc%2Fhard-reg-set.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900846cda693e199f4ebafd99af72445c3016629/gcc%2Fhard-reg-set.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhard-reg-set.h?ref=900846cda693e199f4ebafd99af72445c3016629", "patch": "@@ -359,6 +359,8 @@ hard_reg_set_iter_next (hard_reg_set_iterator *iter, unsigned *regno)\n \n extern char global_regs[FIRST_PSEUDO_REGISTER];\n \n+extern HARD_REG_SET global_reg_set;\n+\n class simplifiable_subreg;\n class subreg_shape;\n "}, {"sha": "cc7d17460eb4ed14249da39a1252f624875dfa42", "filename": "gcc/reginfo.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900846cda693e199f4ebafd99af72445c3016629/gcc%2Freginfo.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900846cda693e199f4ebafd99af72445c3016629/gcc%2Freginfo.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freginfo.c?ref=900846cda693e199f4ebafd99af72445c3016629", "patch": "@@ -91,6 +91,9 @@ static const char initial_call_used_regs[] = CALL_USED_REGISTERS;\n    and are also considered fixed.  */\n char global_regs[FIRST_PSEUDO_REGISTER];\n \n+/* The set of global registers.  */\n+HARD_REG_SET global_reg_set;\n+\n /* Declaration for the global register. */\n tree global_regs_decl[FIRST_PSEUDO_REGISTER];\n \n@@ -390,6 +393,7 @@ init_reg_sets_1 (void)\n \t{\n \t  fixed_regs[i] = call_used_regs[i] = 1;\n \t  SET_HARD_REG_BIT (fixed_reg_set, i);\n+\t  SET_HARD_REG_BIT (global_reg_set, i);\n \t}\n     }\n \n@@ -724,6 +728,7 @@ globalize_reg (tree decl, int i)\n \n   global_regs[i] = 1;\n   global_regs_decl[i] = decl;\n+  SET_HARD_REG_BIT (global_reg_set, i);\n \n   /* If we're globalizing the frame pointer, we need to set the\n      appropriate regs_invalidated_by_call bit, even if it's already"}]}