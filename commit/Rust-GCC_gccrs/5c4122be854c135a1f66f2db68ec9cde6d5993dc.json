{"sha": "5c4122be854c135a1f66f2db68ec9cde6d5993dc", "node_id": "C_kwDOANBUbNoAKDVjNDEyMmJlODU0YzEzNWExZjY2ZjJkYjY4ZWM5Y2RlNmQ1OTkzZGM", "commit": {"author": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-01-20T23:39:35Z"}, "committer": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-01-20T23:39:35Z"}, "message": "PR-108136 modula-2 meets cppcheck part 2\n\nR-108136 modula-2 meets cppcheck part 2\n\nThis patch addresses the style warnings mentioned in the PR.\nThe array high style fixes to mc/keyc.mod and\ngm2-libs/M2Dependent.mod provoke a rebuild of pge and mc.\n\ngcc/m2/ChangeLog:\n\n\t* gm2-libs/Args.mod (GetArg): Check index before\n\taccessing array.\n\t* gm2-libs/M2Dependent.mod (toCString): Check index\n\tbefore accessing array.\n\t* mc-boot/GArgs.c: Rebuilt.\n\t* mc-boot/GM2Dependent.c: Rebuilt.\n\t* mc-boot/Gkeyc.c: Rebuilt.\n\t* mc/keyc.mod (seenUIntMin): Initialize once.\n\t(seenUIntMax): Initialize once.\n\t(checkLimits): Only test seenUIntMin and seenUIntMax\n\tonce.\n\t* pge-boot/GArgs.c:  Rebuilt.\n\t* pge-boot/GM2Dependent.c: Rebuilt.\n\nSigned-off-by: Gaius Mulley <gaiusmod2@gmail.com>", "tree": {"sha": "b6c3b98597b6314a7349e750d8817c570d4a50e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6c3b98597b6314a7349e750d8817c570d4a50e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c4122be854c135a1f66f2db68ec9cde6d5993dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c4122be854c135a1f66f2db68ec9cde6d5993dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c4122be854c135a1f66f2db68ec9cde6d5993dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c4122be854c135a1f66f2db68ec9cde6d5993dc/comments", "author": null, "committer": null, "parents": [{"sha": "0c193cabe1d8f209359f3ccb8e74cf87b38fc4bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c193cabe1d8f209359f3ccb8e74cf87b38fc4bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c193cabe1d8f209359f3ccb8e74cf87b38fc4bc"}], "stats": {"total": 22, "additions": 9, "deletions": 13}, "files": [{"sha": "fa14f8cedfbe2b405c3098656c3ee221289d03de", "filename": "gcc/m2/gm2-libs/Args.mod", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fgm2-libs%2FArgs.mod", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fgm2-libs%2FArgs.mod", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fgm2-libs%2FArgs.mod?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -62,7 +62,7 @@ BEGIN\n    IF i < GetArgC ()\n    THEN\n       Source := GetArgV () ;\n-      WHILE (Source^[i]^[j]#nul) AND (j<High) DO\n+      WHILE (j<High) AND (Source^[i]^[j]#nul) DO\n          a[j] := Source^[i]^[j] ;\n          INC(j)\n       END"}, {"sha": "f343ac3f185335955d3f6bac0c49446539aa1bfb", "filename": "gcc/m2/gm2-libs/M2Dependent.mod", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fgm2-libs%2FM2Dependent.mod", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fgm2-libs%2FM2Dependent.mod", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fgm2-libs%2FM2Dependent.mod?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -203,7 +203,7 @@ BEGIN\n    i := 0 ;\n    high := HIGH (str) ;\n    WHILE i < high DO\n-      IF (str[i] = \"\\\") AND (i < high)\n+      IF (i < high) AND (str[i] = \"\\\")\n       THEN\n          IF str[i+1] = \"n\"\n          THEN"}, {"sha": "bcb1b1323653cfd68e1951c00e028401cb0414ea", "filename": "gcc/m2/mc-boot/GArgs.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc-boot%2FGArgs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc-boot%2FGArgs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fmc-boot%2FGArgs.c?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -83,7 +83,7 @@ extern \"C\" unsigned int Args_GetArg (char *a, unsigned int _a_high, unsigned int\n   if (i < (UnixArgs_GetArgC ()))\n     {\n       Source = static_cast<Args__T1> (UnixArgs_GetArgV ());\n-      while (((*(*Source).array[i]).array[j] != ASCII_nul) && (j < High))\n+      while ((j < High) && ((*(*Source).array[i]).array[j] != ASCII_nul))\n         {\n           a[j] = (*(*Source).array[i]).array[j];\n           j += 1;"}, {"sha": "fb22f1b9145531bf5d3491475a4c45437005771e", "filename": "gcc/m2/mc-boot/GM2Dependent.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc-boot%2FGM2Dependent.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc-boot%2FGM2Dependent.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fmc-boot%2FGM2Dependent.c?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -457,7 +457,7 @@ static void toCString (char *str, unsigned int _str_high)\n   high = _str_high;\n   while (i < high)\n     {\n-      if ((str[i] == '\\\\') && (i < high))\n+      if ((i < high) && (str[i] == '\\\\'))\n         {\n           if (str[i+1] == 'n')\n             {"}, {"sha": "e000bfe60f01b85d1b2e3410bcdb249e9773fc59", "filename": "gcc/m2/mc-boot/Gkeyc.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc-boot%2FGkeyc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc-boot%2FGkeyc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fmc-boot%2FGkeyc.c?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -600,7 +600,7 @@ static void checkAbs (mcPretty_pretty p)\n \n static void checkLimits (mcPretty_pretty p)\n {\n-  if ((((((((((((((seenMemcpy || seenIntMin) || seenUIntMin) || seenLongMin) || seenULongMin) || seenCharMin) || seenUCharMin) || seenUIntMin) || seenIntMax) || seenUIntMax) || seenLongMax) || seenULongMax) || seenCharMax) || seenUCharMax) || seenUIntMax)\n+  if ((((((((((((seenMemcpy || seenIntMin) || seenUIntMin) || seenLongMin) || seenULongMin) || seenCharMin) || seenUCharMin) || seenIntMax) || seenUIntMax) || seenLongMax) || seenULongMax) || seenCharMax) || seenUCharMax)  /* OR seenUIntMax  */\n     {\n       checkGccConfigSystem (p);\n       if (! (mcOptions_getGccConfigSystem ()))\n@@ -1067,14 +1067,12 @@ static void init (void)\n   seenULongMin = FALSE;\n   seenCharMin = FALSE;\n   seenUCharMin = FALSE;\n-  seenUIntMin = FALSE;\n   seenIntMax = FALSE;\n   seenUIntMax = FALSE;\n   seenLongMax = FALSE;\n   seenULongMax = FALSE;\n   seenCharMax = FALSE;\n   seenUCharMax = FALSE;\n-  seenUIntMax = FALSE;\n   seenLabs = FALSE;\n   seenAbs = FALSE;\n   seenFabs = FALSE;"}, {"sha": "a57103b42a781883314f0bf0efc7f00613d6df83", "filename": "gcc/m2/mc/keyc.mod", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc%2Fkeyc.mod", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fmc%2Fkeyc.mod", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fmc%2Fkeyc.mod?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -457,9 +457,9 @@ PROCEDURE checkLimits (p: pretty) ;\n BEGIN\n    IF seenMemcpy OR seenIntMin OR seenUIntMin OR\n       seenLongMin OR seenULongMin OR seenCharMin OR\n-      seenUCharMin OR seenUIntMin OR seenIntMax OR\n+      seenUCharMin OR (* seenUIntMin OR *) seenIntMax OR\n       seenUIntMax OR seenLongMax OR seenULongMax OR\n-      seenCharMax OR seenUCharMax OR seenUIntMax\n+      seenCharMax OR seenUCharMax (* OR seenUIntMax *)\n    THEN\n       checkGccConfigSystem (p);\n       IF NOT getGccConfigSystem ()\n@@ -1118,14 +1118,12 @@ BEGIN\n    seenULongMin := FALSE ;\n    seenCharMin := FALSE ;\n    seenUCharMin := FALSE ;\n-   seenUIntMin := FALSE ;\n    seenIntMax := FALSE ;\n    seenUIntMax := FALSE ;\n    seenLongMax := FALSE ;\n    seenULongMax := FALSE ;\n    seenCharMax := FALSE ;\n    seenUCharMax := FALSE ;\n-   seenUIntMax := FALSE ;\n    seenLabs := FALSE ;\n    seenAbs := FALSE ;\n    seenFabs := FALSE ;"}, {"sha": "69fbdd006335441f23183ed71484f62dee98ed42", "filename": "gcc/m2/pge-boot/GArgs.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fpge-boot%2FGArgs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fpge-boot%2FGArgs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fpge-boot%2FGArgs.c?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -81,7 +81,7 @@ extern \"C\" unsigned int Args_GetArg (char *a, unsigned int _a_high, unsigned int\n   if (i < (UnixArgs_GetArgC ()))\n     {\n       Source = static_cast<Args__T1> (UnixArgs_GetArgV ());\n-      while (((*(*Source).array[i]).array[j] != ASCII_nul) && (j < High))\n+      while ((j < High) && ((*(*Source).array[i]).array[j] != ASCII_nul))\n         {\n           a[j] = (*(*Source).array[i]).array[j];\n           j += 1;"}, {"sha": "32c777c240235431b378b4598ad6760603a7fe41", "filename": "gcc/m2/pge-boot/GM2Dependent.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fpge-boot%2FGM2Dependent.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c4122be854c135a1f66f2db68ec9cde6d5993dc/gcc%2Fm2%2Fpge-boot%2FGM2Dependent.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fpge-boot%2FGM2Dependent.c?ref=5c4122be854c135a1f66f2db68ec9cde6d5993dc", "patch": "@@ -458,7 +458,7 @@ static void toCString (char *str, unsigned int _str_high)\n   high = _str_high;\n   while (i < high)\n     {\n-      if ((str[i] == '\\\\') && (i < high))\n+      if ((i < high) && (str[i] == '\\\\'))\n         {\n           if (str[i+1] == 'n')\n             {"}]}