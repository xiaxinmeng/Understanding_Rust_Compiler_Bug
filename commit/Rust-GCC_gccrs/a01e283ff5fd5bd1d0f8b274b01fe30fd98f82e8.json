{"sha": "a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTAxZTI4M2ZmNWZkNWJkMWQwZjhiMjc0YjAxZmUzMGZkOThmODJlOA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2007-11-14T18:31:57Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2007-11-14T18:31:57Z"}, "message": "trans.c (call_to_gnu): Always set the source location on the call expression.\n\n\t* trans.c (call_to_gnu): Always set the source location on the call\n\texpression.  If the function returns-by-target, also set it on the\n\taddress expression.\n\nFrom-SVN: r130184", "tree": {"sha": "ab17fafcf018fef0789d31b899c5a21afc6ead17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab17fafcf018fef0789d31b899c5a21afc6ead17"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8/comments", "author": null, "committer": null, "parents": [{"sha": "d76575caa512ad195c9f0f0993152618dbb8768f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d76575caa512ad195c9f0f0993152618dbb8768f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d76575caa512ad195c9f0f0993152618dbb8768f"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "c90fe05c504c5ea696eca19c5a7894fb84bc45f2", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8", "patch": "@@ -1,3 +1,9 @@\n+2007-11-14  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* trans.c (call_to_gnu): Always set the source location on the call\n+\texpression.  If the function returns-by-target, also set it on the\n+\taddress expression.\n+\n 2007-11-14  Samuel Tardieu  <sam@rfc1149.net>\n \n \t* adaint.c init.c initialize.c link.c: Remove system-specific"}, {"sha": "cd3c6a6be0f18772db46f0da55ab09952245c28c", "filename": "gcc/ada/trans.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8/gcc%2Fada%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8/gcc%2Fada%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftrans.c?ref=a01e283ff5fd5bd1d0f8b274b01fe30fd98f82e8", "patch": "@@ -2311,6 +2311,7 @@ call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target)\n   gnu_subprog_call = build_call_list (TREE_TYPE (gnu_subprog_type),\n \t\t\t\t      gnu_subprog_addr,\n \t\t\t\t      nreverse (gnu_actual_list));\n+  set_expr_location_from_node (gnu_subprog_call, gnat_node);\n \n   /* If we return by passing a target, the result is the target after the\n      call.  We must not emit the call directly here because this might be\n@@ -2336,6 +2337,7 @@ call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target)\n \n       tree gnu_target_address\n \t= build_unary_op (ADDR_EXPR, NULL_TREE, gnu_target);\n+      set_expr_location_from_node (gnu_target_address, gnat_node);\n \n       gnu_result\n \t= build2 (COMPOUND_EXPR, TREE_TYPE (gnu_target_address),\n@@ -2491,10 +2493,7 @@ call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target)\n \t  }\n \t}\n   else\n-    {\n-      set_expr_location_from_node (gnu_subprog_call, gnat_node);\n-      append_to_statement_list (gnu_subprog_call, &gnu_before_list);\n-    }\n+    append_to_statement_list (gnu_subprog_call, &gnu_before_list);\n \n   append_to_statement_list (gnu_after_list, &gnu_before_list);\n   return gnu_before_list;"}]}