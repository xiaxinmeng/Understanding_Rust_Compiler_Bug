{"sha": "22c75b4ed94bd731cb6e37c507de1d91954a17cf", "node_id": "C_kwDOANBUbNoAKDIyYzc1YjRlZDk0YmQ3MzFjYjZlMzdjNTA3ZGUxZDkxOTU0YTE3Y2Y", "commit": {"author": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2023-01-19T07:13:55Z"}, "committer": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2023-01-19T07:16:08Z"}, "message": "[aarch64] Use exact_log2 (INTVAL (operands[2])) >= 0 to gate for vec_merge patterns.\n\ngcc/ChangeLog:\n\t* config/aarch64/aarch64-simd.md (aarch64_simd_vec_set<mode>): Use\n\texact_log2 (INTVAL (operands[2])) >= 0 as condition for gating\n\tthe pattern.\n\t(aarch64_simd_vec_copy_lane<mode>): Likewise.\n\t(aarch64_simd_vec_copy_lane_<vswap_width_name><mode>): Likewise.", "tree": {"sha": "faad56f2ff8c529707f7976abaafaf2723ed1153", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/faad56f2ff8c529707f7976abaafaf2723ed1153"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22c75b4ed94bd731cb6e37c507de1d91954a17cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22c75b4ed94bd731cb6e37c507de1d91954a17cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22c75b4ed94bd731cb6e37c507de1d91954a17cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22c75b4ed94bd731cb6e37c507de1d91954a17cf/comments", "author": null, "committer": null, "parents": [{"sha": "3c99493bf39a7fef9213e6f5af94b78bb15fcfdc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c99493bf39a7fef9213e6f5af94b78bb15fcfdc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c99493bf39a7fef9213e6f5af94b78bb15fcfdc"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "7f212bf37cd2c120dceb7efa733c9fa76226f029", "filename": "gcc/config/aarch64/aarch64-simd.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22c75b4ed94bd731cb6e37c507de1d91954a17cf/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22c75b4ed94bd731cb6e37c507de1d91954a17cf/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-simd.md?ref=22c75b4ed94bd731cb6e37c507de1d91954a17cf", "patch": "@@ -1064,7 +1064,7 @@\n \t\t(match_operand:<VEL> 1 \"aarch64_simd_nonimmediate_operand\" \"w,?r,Utv\"))\n \t    (match_operand:VALL_F16 3 \"register_operand\" \"0,0,0\")\n \t    (match_operand:SI 2 \"immediate_operand\" \"i,i,i\")))]\n-  \"TARGET_SIMD\"\n+  \"TARGET_SIMD && exact_log2 (INTVAL (operands[2])) >= 0\"\n   {\n    int elt = ENDIAN_LANE_N (<nunits>, exact_log2 (INTVAL (operands[2])));\n    operands[2] = GEN_INT ((HOST_WIDE_INT) 1 << elt);\n@@ -1093,7 +1093,7 @@\n \t\t  [(match_operand:SI 4 \"immediate_operand\" \"i\")])))\n \t    (match_operand:VALL_F16 1 \"register_operand\" \"0\")\n \t    (match_operand:SI 2 \"immediate_operand\" \"i\")))]\n-  \"TARGET_SIMD\"\n+  \"TARGET_SIMD && exact_log2 (INTVAL (operands[2])) >= 0\"\n   {\n     int elt = ENDIAN_LANE_N (<nunits>, exact_log2 (INTVAL (operands[2])));\n     operands[2] = GEN_INT (HOST_WIDE_INT_1 << elt);\n@@ -1114,7 +1114,7 @@\n \t\t  [(match_operand:SI 4 \"immediate_operand\" \"i\")])))\n \t    (match_operand:VALL_F16_NO_V2Q 1 \"register_operand\" \"0\")\n \t    (match_operand:SI 2 \"immediate_operand\" \"i\")))]\n-  \"TARGET_SIMD\"\n+  \"TARGET_SIMD && exact_log2 (INTVAL (operands[2])) >= 0\"\n   {\n     int elt = ENDIAN_LANE_N (<nunits>, exact_log2 (INTVAL (operands[2])));\n     operands[2] = GEN_INT (HOST_WIDE_INT_1 << elt);"}]}