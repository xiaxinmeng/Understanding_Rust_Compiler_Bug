{"sha": "1dd4b7a8b1eff30db92d909df714905a09969619", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRkNGI3YThiMWVmZjMwZGI5MmQ5MDlkZjcxNDkwNWEwOTk2OTYxOQ==", "commit": {"author": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1995-04-28T17:04:06Z"}, "committer": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1995-04-28T17:04:06Z"}, "message": "(FRAME_POINTER_REQUIRED) Add -momit-leaf-frame-pointer\n\nFrom-SVN: r9537", "tree": {"sha": "b21c4f2db8fde1bca4931e695c32049ad6430c9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b21c4f2db8fde1bca4931e695c32049ad6430c9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1dd4b7a8b1eff30db92d909df714905a09969619", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dd4b7a8b1eff30db92d909df714905a09969619", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dd4b7a8b1eff30db92d909df714905a09969619", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dd4b7a8b1eff30db92d909df714905a09969619/comments", "author": null, "committer": null, "parents": [{"sha": "17a2962cbbe7bb8c1f49d2fafedcc0f656a1463d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17a2962cbbe7bb8c1f49d2fafedcc0f656a1463d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17a2962cbbe7bb8c1f49d2fafedcc0f656a1463d"}], "stats": {"total": 23, "additions": 14, "deletions": 9}, "files": [{"sha": "76a7083f3e8a1476c63e6233b7fd137c138ec264", "filename": "gcc/config/m88k/m88k.h", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dd4b7a8b1eff30db92d909df714905a09969619/gcc%2Fconfig%2Fm88k%2Fm88k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dd4b7a8b1eff30db92d909df714905a09969619/gcc%2Fconfig%2Fm88k%2Fm88k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fm88k.h?ref=1dd4b7a8b1eff30db92d909df714905a09969619", "patch": "@@ -115,6 +115,7 @@ extern int null_prologue ();\n extern int integer_ok_for_set ();\n extern int m88k_debugger_offset ();\n \n+\n extern void emit_bcnd ();\n extern void expand_block_move ();\n extern void m88k_layout_frame ();\n@@ -197,15 +198,15 @@ extern char * reg_names[];\n    Redefined in sysv4.h, and luna.h.  */\n #define VERSION_INFO1\t\"88open OCS/BCS, \"\n #ifndef VERSION_INFO2\n-#define VERSION_INFO2   \"$Revision: 1.61 $\"\n+#define VERSION_INFO2   \"$Revision: 1.1.1.2.2.2 $\"\n #endif\n \n #ifndef VERSION_STRING\n #define VERSION_STRING  version_string\n #ifdef __STDC__\n-#define TM_RCS_ID      \"@(#)\" __FILE__ \" $Revision: 1.61 $ \" __DATE__\n+#define TM_RCS_ID      \"@(#)\" __FILE__ \" $Revision: 1.1.1.2.2.2 $ \" __DATE__\n #else\n-#define TM_RCS_ID      \"$What$\"\n+#define TM_RCS_ID      \"$What: <@(#) m88k.h,v\t1.1.1.2.2.2> $\"\n #endif  /* __STDC__ */\n #else\n #define TM_RCS_ID      \"@(#)\" __FILE__ \" \" VERSION_INFO2 \" \" __DATE__\n@@ -221,6 +222,8 @@ extern char * reg_names[];\n \n #define MASK_88100\t\t0x00000001 /* Target m88100 */\n #define MASK_88110\t\t0x00000002 /* Target m88110 */\n+#define MASK_88000 \t\t(MASK_88100 | MASK_88110)\n+\n #define MASK_OCS_DEBUG_INFO\t0x00000004 /* Emit .tdesc info */\n #define MASK_OCS_FRAME_POSITION\t0x00000008 /* Debug frame = CFA, not r30 */\n #define MASK_SVR4\t\t0x00000010 /* Target is AT&T System V.4 */\n@@ -235,10 +238,10 @@ extern char * reg_names[];\n #define MASK_WARN_PASS_STRUCT\t0x00002000 /* Warn about passed structs */\n #define MASK_OPTIMIZE_ARG_AREA\t0x00004000 /* Save stack space */\n #define MASK_NO_SERIALIZE_VOLATILE 0x00008000 /* Serialize volatile refs */\n-\n-#define MASK_88000 (MASK_88100 | MASK_88110)\n #define MASK_EITHER_LARGE_SHIFT\t(MASK_TRAP_LARGE_SHIFT | \\\n \t\t\t\t MASK_HANDLE_LARGE_SHIFT)\n+#define MASK_OMIT_LEAF_FRAME_POINTER 0x00020000 /* omit leaf frame pointers */\n+\n \n #define TARGET_88100   \t\t ((target_flags & MASK_88000) == MASK_88100)\n #define TARGET_88110\t\t ((target_flags & MASK_88000) == MASK_88110)\n@@ -260,6 +263,7 @@ extern char * reg_names[];\n #define TARGET_SERIALIZE_VOLATILE (!(target_flags & MASK_NO_SERIALIZE_VOLATILE))\n \n #define TARGET_EITHER_LARGE_SHIFT (target_flags & MASK_EITHER_LARGE_SHIFT)\n+#define TARGET_OMIT_LEAF_FRAME_POINTER (target_flags & MASK_OMIT_LEAF_FRAME_POINTER)\n \n /*  Redefined in sysv3.h, sysv4.h, and dgux.h.  */\n #define TARGET_DEFAULT\t(MASK_CHECK_ZERO_DIV)\n@@ -289,6 +293,7 @@ extern char * reg_names[];\n     { \"no-optimize-arg-area\",\t\t-MASK_OPTIMIZE_ARG_AREA }, \\\n     { \"no-serialize-volatile\",\t\t MASK_NO_SERIALIZE_VOLATILE }, \\\n     { \"serialize-volatile\",\t\t-MASK_NO_SERIALIZE_VOLATILE }, \\\n+    { \"omit-leaf-frame-pointer\",\t MASK_OMIT_LEAF_FRAME_POINTER }, \\\n     SUBTARGET_SWITCHES \\\n     /* Default switches */ \\\n     { \"\",\t\t\t\t TARGET_DEFAULT }, \\\n@@ -973,11 +978,10 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n \n /* Value is the number of bytes of arguments automatically\n    popped when returning from a subroutine call.\n-   FUNDECL is the declaration node of the function (as a tree),\n    FUNTYPE is the data type of the function (as a tree),\n    or for a library call it is an identifier node for the subroutine name.\n    SIZE is the number of bytes of arguments passed on the stack.  */\n-#define RETURN_POPS_ARGS(FUNDECL,FUNTYPE,SIZE) 0\n+#define RETURN_POPS_ARGS(FUNTYPE,SIZE) 0\n \n /* Define how to find the value returned by a function.\n    VALTYPE is the data type of the value (as a tree).\n@@ -1136,8 +1140,9 @@ enum reg_class { NO_REGS, AP_REG, XRF_REGS, GENERAL_REGS, AGRF_REGS,\n    may be accessed via the stack pointer) in functions that seem suitable.\n    This is computed in `reload', in reload1.c.  */\n #define FRAME_POINTER_REQUIRED \\\n-  (frame_pointer_needed \\\n-   || (write_symbols != NO_DEBUG && !TARGET_OCS_FRAME_POSITION))\n+(current_function_varargs \t\t\t\t\t\\\n+ || (TARGET_OMIT_LEAF_FRAME_POINTER && !leaf_function_p ()) \t\\\n+ || (write_symbols != NO_DEBUG && !TARGET_OCS_FRAME_POSITION))\n \n /* Definitions for register eliminations.\n "}]}