{"sha": "11303d15ae2ef463efda87d80619f06dc1c9f8ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTEzMDNkMTVhZTJlZjQ2M2VmZGE4N2Q4MDYxOWYwNmRjMWM5ZjhhYg==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2002-01-22T21:25:15Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2002-01-22T21:25:15Z"}, "message": "Makefile.in (loop.o): Depend on OPTABS_H.\n\n        * Makefile.in (loop.o): Depend on OPTABS_H.\n        * loop.c (expand_builtin_prefetch): Check the prefetch operand\n        against the predicate.\n\nFrom-SVN: r49095", "tree": {"sha": "9bb3c7430ea1a6c8f5a120bf2e03e76529ac3173", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9bb3c7430ea1a6c8f5a120bf2e03e76529ac3173"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/11303d15ae2ef463efda87d80619f06dc1c9f8ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11303d15ae2ef463efda87d80619f06dc1c9f8ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11303d15ae2ef463efda87d80619f06dc1c9f8ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11303d15ae2ef463efda87d80619f06dc1c9f8ab/comments", "author": null, "committer": null, "parents": [{"sha": "3196dfde9a1b7facc176f069afe169f08d484b65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3196dfde9a1b7facc176f069afe169f08d484b65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3196dfde9a1b7facc176f069afe169f08d484b65"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "7b966f98a19b6f278e9abfa0067646d60c25a9f8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11303d15ae2ef463efda87d80619f06dc1c9f8ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11303d15ae2ef463efda87d80619f06dc1c9f8ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=11303d15ae2ef463efda87d80619f06dc1c9f8ab", "patch": "@@ -1,5 +1,9 @@\n 2002-01-22  Janis Johnson  <janis187@us.ibm.com>\n \n+        * Makefile.in (loop.o): Depend on OPTABS_H.\n+        * loop.c (expand_builtin_prefetch): Check the prefetch operand\n+        against the predicate.\n+\n \tPR target/5379\n \t* config/i386/i386.md (prefetch_sse): Specify \"p\" as a constraint\n \tfor the address operand."}, {"sha": "124e589d33364e70845207f91bdb7ceb4db3b56d", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11303d15ae2ef463efda87d80619f06dc1c9f8ab/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11303d15ae2ef463efda87d80619f06dc1c9f8ab/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=11303d15ae2ef463efda87d80619f06dc1c9f8ab", "patch": "@@ -1470,7 +1470,7 @@ profile.o : profile.c $(CONFIG_H) $(SYSTEM_H) $(RTL_H) $(TREE_H) flags.h \\\n loop.o : loop.c $(CONFIG_H) $(SYSTEM_H) $(RTL_H) flags.h $(LOOP_H) \\\n    insn-config.h $(REGS_H) hard-reg-set.h $(RECOG_H) $(EXPR_H) \\\n    real.h $(PREDICT_H) $(BASIC_BLOCK_H) function.h \\\n-   toplev.h varray.h except.h cselib.h $(TM_P_H)\n+   toplev.h varray.h except.h cselib.h $(OPTABS_H) $(TM_P_H)\n doloop.o : doloop.c $(CONFIG_H) $(SYSTEM_H) $(RTL_H) flags.h $(LOOP_H) \\\n    $(EXPR_H) hard-reg-set.h $(BASIC_BLOCK_H) $(TM_P_H) toplev.h\n unroll.o : unroll.c $(CONFIG_H) $(SYSTEM_H) $(RTL_H) insn-config.h function.h \\"}, {"sha": "1f2a5f3118055abb7f047b086c34123105fd3b28", "filename": "gcc/loop.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11303d15ae2ef463efda87d80619f06dc1c9f8ab/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11303d15ae2ef463efda87d80619f06dc1c9f8ab/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=11303d15ae2ef463efda87d80619f06dc1c9f8ab", "patch": "@@ -54,6 +54,7 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #include \"toplev.h\"\n #include \"predict.h\"\n #include \"insn-flags.h\"\n+#include \"optabs.h\"\n \n /* Not really meaningful values, but at least something.  */\n #ifndef SIMULTANEOUS_PREFETCHES\n@@ -4019,6 +4020,10 @@ emit_prefetch_instructions (loop)\n \t\t  loc = reg;\n \t\t}\n \n+\t      /* Make sure the address operand is valid for prefetch.  */\n+\t      if (! (*insn_data[(int)CODE_FOR_prefetch].operand[0].predicate)\n+\t\t    (loc, Pmode))\n+\t\tloc = force_reg (Pmode, loc);\n \t      emit_insn_before (gen_prefetch (loc, GEN_INT (info[i].write),\n \t\t                              GEN_INT (3)),\n \t\t\t\tbefore_insn);"}]}