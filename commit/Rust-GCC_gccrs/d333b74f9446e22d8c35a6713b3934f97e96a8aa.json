{"sha": "d333b74f9446e22d8c35a6713b3934f97e96a8aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMzM2I3NGY5NDQ2ZTIyZDhjMzVhNjcxM2IzOTM0Zjk3ZTk2YThhYQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2007-04-27T01:31:25Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2007-04-27T01:31:25Z"}, "message": "re PR c++/30016 (internal compiler error: in convert_move, at expr.c:362)\n\n2007-04-26  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR C++/30016\n        * typeck.c (build_reinterpret_cast_1): Only allow conversion to\n        integeral types from vectors types.\n\n2007-04-26  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR C++/30016\n        * g++.dg/ext/vector6.C: New test.\n\nFrom-SVN: r124208", "tree": {"sha": "a92e160dfec97dc7613b10e65f111c84dce8b678", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a92e160dfec97dc7613b10e65f111c84dce8b678"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d333b74f9446e22d8c35a6713b3934f97e96a8aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d333b74f9446e22d8c35a6713b3934f97e96a8aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d333b74f9446e22d8c35a6713b3934f97e96a8aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d333b74f9446e22d8c35a6713b3934f97e96a8aa/comments", "author": null, "committer": null, "parents": [{"sha": "45e6714b9a85d47d1ed481b1d27c62528cdd805d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45e6714b9a85d47d1ed481b1d27c62528cdd805d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45e6714b9a85d47d1ed481b1d27c62528cdd805d"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "4bab9ff9a2393d34f24cd6f110ee91ff124a6eeb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d333b74f9446e22d8c35a6713b3934f97e96a8aa", "patch": "@@ -1,3 +1,9 @@\n+2007-04-26  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR C++/30016\n+\t* typeck.c (build_reinterpret_cast_1): Only allow conversion to\n+\tintegeral types from vectors types.\n+\n 2007-04-26  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/31598"}, {"sha": "2b4e065913c4627b33e1bd6d367147b931d927d6", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=d333b74f9446e22d8c35a6713b3934f97e96a8aa", "patch": "@@ -5341,7 +5341,7 @@ build_reinterpret_cast_1 (tree type, tree expr, bool c_cast_p,\n     }\n   else if (TREE_CODE (type) == VECTOR_TYPE)\n     return fold_if_not_in_template (convert_to_vector (type, expr));\n-  else if (TREE_CODE (intype) == VECTOR_TYPE)\n+  else if (TREE_CODE (intype) == VECTOR_TYPE && INTEGRAL_TYPE_P (type))\n     return fold_if_not_in_template (convert_to_integer (type, expr));\n   else\n     {"}, {"sha": "6b7bcc7d67e82f3274267b12b73da3d8a08737a4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d333b74f9446e22d8c35a6713b3934f97e96a8aa", "patch": "@@ -1,3 +1,8 @@\n+2007-04-26  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR C++/30016\n+\t* g++.dg/ext/vector6.C: New test.\n+\n 2007-04-26  Kazu Hirata  <kazu@codesourcery.com>\n \n \t* gcc.c-torture/execute/ieee/20000320-1.x: New."}, {"sha": "9caf8c2f69aadfad4bf55edd03afa48abe048618", "filename": "gcc/testsuite/g++.dg/ext/vector6.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvector6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d333b74f9446e22d8c35a6713b3934f97e96a8aa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvector6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fvector6.C?ref=d333b74f9446e22d8c35a6713b3934f97e96a8aa", "patch": "@@ -0,0 +1,12 @@\n+// { dg-options \"\" }\n+// { dg-do compile }\n+// C++/30016, we were allowing conversion between vector types\n+// and union types which is invalid.\n+\n+typedef float __v_4F __attribute__ ((vector_size (16)));\n+typedef union {__v_4F v; float a[4];} __v4F;\n+void f(void)\n+{\n+      __v_4F b;\n+      (reinterpret_cast<__v4F>(b).a)[1] = 1; // { dg-error \"\" }\n+}"}]}