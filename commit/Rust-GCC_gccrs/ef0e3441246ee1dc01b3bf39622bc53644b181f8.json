{"sha": "ef0e3441246ee1dc01b3bf39622bc53644b181f8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWYwZTM0NDEyNDZlZTFkYzAxYjNiZjM5NjIyYmM1MzY0NGIxODFmOA==", "commit": {"author": {"name": "Renlin Li", "email": "renlin.li@arm.com", "date": "2017-06-13T13:57:45Z"}, "committer": {"name": "Renlin Li", "email": "renlin@gcc.gnu.org", "date": "2017-06-13T13:57:45Z"}, "message": "[ARM][Testsuite]make dump_stack function call conditional in cold-lc.c\n\nAfter r249013, die () and dump_stack () are both in cold section. This makes\nthe compiler generate bl instruction for the function call, instead of\nhonoring the -mlong-calls option.\n\nThis patch changes the dump_stack function call conditional, which fixes the\nregression.\n\ngcc/testsuite/\n\n\t* gcc.target/arm/cold-lc.c: Update coding style, call dump_stack\n\tconditionally.\n\nFrom-SVN: r249157", "tree": {"sha": "29cbc02ece61148554817c43818f33ca453eabf1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29cbc02ece61148554817c43818f33ca453eabf1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef0e3441246ee1dc01b3bf39622bc53644b181f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef0e3441246ee1dc01b3bf39622bc53644b181f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef0e3441246ee1dc01b3bf39622bc53644b181f8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef0e3441246ee1dc01b3bf39622bc53644b181f8/comments", "author": null, "committer": null, "parents": [{"sha": "09a871c46619af0461d2c079d4de953745a11b68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09a871c46619af0461d2c079d4de953745a11b68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09a871c46619af0461d2c079d4de953745a11b68"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "6b33a67c08c13963633811f3b0f5355411203bb4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef0e3441246ee1dc01b3bf39622bc53644b181f8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef0e3441246ee1dc01b3bf39622bc53644b181f8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ef0e3441246ee1dc01b3bf39622bc53644b181f8", "patch": "@@ -1,3 +1,8 @@\n+2017-06-13  Renlin Li  <renlin.li@arm.com>\n+\n+\t* gcc.target/arm/cold-lc.c: Update coding style, call dump_stack\n+\tconditionally.\n+\n 2017-06-13  Martin Jambor  <mjambor@suse.cz>\n \n \tPR tree-optimization/80803"}, {"sha": "f0cd6df34682401bebbb373280d013a0a7c11dff", "filename": "gcc/testsuite/gcc.target/arm/cold-lc.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef0e3441246ee1dc01b3bf39622bc53644b181f8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fcold-lc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef0e3441246ee1dc01b3bf39622bc53644b181f8/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fcold-lc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fcold-lc.c?ref=ef0e3441246ee1dc01b3bf39622bc53644b181f8", "patch": "@@ -11,13 +11,14 @@ extern int show_stack (struct task_struct *, unsigned long *);\n \n void dump_stack (void)\n {\n-    unsigned long stack;\n-    show_stack ((current_thread_info ()->task), &stack);\n+  unsigned long stack;\n+  show_stack ((current_thread_info ()->task), &stack);\n }\n \n void die (char *str, void *fp, int nr)\n {\n+  if (nr)\n     dump_stack ();\n-    while (1);\n+  while (1);\n }\n "}]}