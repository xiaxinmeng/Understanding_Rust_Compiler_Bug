{"sha": "d5b18b0b138cc89f02f972c51c35c3bf287c9693", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDViMThiMGIxMzhjYzg5ZjAyZjk3MmM1MWMzNWMzYmYyODdjOTY5Mw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-10-17T18:41:12Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-10-17T18:41:12Z"}, "message": "syscall: Add Dup3, {Get,List,Remove,Set}xattr, {Get,Set}priority.\n\nFrom-SVN: r203788", "tree": {"sha": "81d7fdbd8fba080a94f29216e39e955383aa3246", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81d7fdbd8fba080a94f29216e39e955383aa3246"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5b18b0b138cc89f02f972c51c35c3bf287c9693", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5b18b0b138cc89f02f972c51c35c3bf287c9693", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5b18b0b138cc89f02f972c51c35c3bf287c9693", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5b18b0b138cc89f02f972c51c35c3bf287c9693/comments", "author": null, "committer": null, "parents": [{"sha": "82e33890906a690158199ffddf4cd8b782252a07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82e33890906a690158199ffddf4cd8b782252a07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82e33890906a690158199ffddf4cd8b782252a07"}], "stats": {"total": 101, "additions": 99, "deletions": 2}, "files": [{"sha": "f6da8b982c4488bd6aae6c15e5078c11e0976c00", "filename": "libgo/config.h.in", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfig.h.in?ref=d5b18b0b138cc89f02f972c51c35c3bf287c9693", "patch": "@@ -39,6 +39,9 @@\n /* Define to 1 if you have the `dl_iterate_phdr' function. */\n #undef HAVE_DL_ITERATE_PHDR\n \n+/* Define to 1 if you have the `dup3' function. */\n+#undef HAVE_DUP3\n+\n /* Define to 1 if you have the `epoll_create1' function. */\n #undef HAVE_EPOLL_CREATE1\n \n@@ -66,6 +69,9 @@\n /* Define if _Unwind_GetIPInfo is available. */\n #undef HAVE_GETIPINFO\n \n+/* Define to 1 if you have the `getxattr' function. */\n+#undef HAVE_GETXATTR\n+\n /* Define to 1 if you have the `inotify_add_watch' function. */\n #undef HAVE_INOTIFY_ADD_WATCH\n \n@@ -111,6 +117,9 @@\n /* Define to 1 if you have the <linux/rtnetlink.h> header file. */\n #undef HAVE_LINUX_RTNETLINK_H\n \n+/* Define to 1 if you have the `listxattr' function. */\n+#undef HAVE_LISTXATTR\n+\n /* Define to 1 if the system has the type `loff_t'. */\n #undef HAVE_LOFF_T\n \n@@ -171,6 +180,9 @@\n /* Define to 1 if you have the `pipe2' function. */\n #undef HAVE_PIPE2\n \n+/* Define to 1 if you have the `removexattr' function. */\n+#undef HAVE_REMOVEXATTR\n+\n /* Define to 1 if you have the `renameat' function. */\n #undef HAVE_RENAMEAT\n \n@@ -180,6 +192,9 @@\n /* Define to 1 if you have the `setenv' function. */\n #undef HAVE_SETENV\n \n+/* Define to 1 if you have the `setxattr' function. */\n+#undef HAVE_SETXATTR\n+\n /* Define to 1 if you have the `sinl' function. */\n #undef HAVE_SINL\n "}, {"sha": "90cafb58f1cc47d903cc41f001f186f7c8c2e801", "filename": "libgo/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=d5b18b0b138cc89f02f972c51c35c3bf287c9693", "patch": "@@ -14706,7 +14706,7 @@ else\n fi\n \n \n-for ac_func in accept4 epoll_create1 faccessat fallocate fchmodat fchownat futimesat inotify_add_watch inotify_init inotify_init1 inotify_rm_watch mkdirat mknodat openat pipe2 renameat sync_file_range splice tee unlinkat unshare utimensat\n+for ac_func in accept4 dup3 epoll_create1 faccessat fallocate fchmodat fchownat futimesat getxattr inotify_add_watch inotify_init inotify_init1 inotify_rm_watch listxattr mkdirat mknodat openat pipe2 removexattr renameat setxattr sync_file_range splice tee unlinkat unshare utimensat\n do :\n   as_ac_var=`$as_echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n ac_fn_c_check_func \"$LINENO\" \"$ac_func\" \"$as_ac_var\""}, {"sha": "f7b780be3b31ec68a3f073e0528a1cf85ad43f17", "filename": "libgo/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=d5b18b0b138cc89f02f972c51c35c3bf287c9693", "patch": "@@ -503,7 +503,7 @@ AC_CHECK_FUNCS(strerror_r strsignal wait4 mincore setenv dl_iterate_phdr)\n AM_CONDITIONAL(HAVE_STRERROR_R, test \"$ac_cv_func_strerror_r\" = yes)\n AM_CONDITIONAL(HAVE_WAIT4, test \"$ac_cv_func_wait4\" = yes)\n \n-AC_CHECK_FUNCS(accept4 epoll_create1 faccessat fallocate fchmodat fchownat futimesat inotify_add_watch inotify_init inotify_init1 inotify_rm_watch mkdirat mknodat openat pipe2 renameat sync_file_range splice tee unlinkat unshare utimensat)\n+AC_CHECK_FUNCS(accept4 dup3 epoll_create1 faccessat fallocate fchmodat fchownat futimesat getxattr inotify_add_watch inotify_init inotify_init1 inotify_rm_watch listxattr mkdirat mknodat openat pipe2 removexattr renameat setxattr sync_file_range splice tee unlinkat unshare utimensat)\n AC_TYPE_OFF_T\n AC_CHECK_TYPES([loff_t])\n "}, {"sha": "60eecd9ef899832da154dcdeeef619648343a0f9", "filename": "libgo/go/syscall/libcall_linux.go", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go?ref=d5b18b0b138cc89f02f972c51c35c3bf287c9693", "patch": "@@ -190,6 +190,9 @@ func Accept4(fd int, flags int) (nfd int, sa Sockaddr, err error) {\n //sys\tAdjtimex(buf *Timex) (state int, err error)\n //adjtimex(buf *Timex) _C_int\n \n+//sysnb\tDup3(oldfd int, newfd int, flags int) (err error)\n+//dup3(oldfd _C_int, newfd _C_int, flags _C_int) _C_int\n+\n //sys\tFaccessat(dirfd int, path string, mode uint32, flags int) (err error)\n //faccessat(dirfd _C_int, pathname *byte, mode _C_int, flags _C_int) _C_int\n \n@@ -268,6 +271,9 @@ func ParseDirent(buf []byte, max int, names []string) (consumed int, count int,\n \treturn origlen - len(buf), count, names\n }\n \n+//sys\tGetxattr(path string, attr string, dest []byte) (sz int, err error)\n+//getxattr(path *byte, attr *byte, buf *byte, count Size_t) Ssize_t\n+\n //sys\tInotifyAddWatch(fd int, pathname string, mask uint32) (watchdesc int, err error)\n //inotify_add_watch(fd _C_int, pathname *byte, mask uint32) _C_int\n \n@@ -283,6 +289,9 @@ func ParseDirent(buf []byte, max int, names []string) (consumed int, count int,\n //sys\tKlogctl(typ int, buf []byte) (n int, err error)\n //klogctl(typ _C_int, bufp *byte, len _C_int) _C_int\n \n+//sys\tListxattr(path string, dest []byte) (sz int, err error)\n+//listxattr(path *byte, list *byte, size Size_t) Ssize_t\n+\n //sys\tMkdirat(dirfd int, path string, mode uint32) (err error)\n //mkdirat(dirfd _C_int, path *byte, mode Mode_t) _C_int\n \n@@ -305,6 +314,9 @@ func Pipe2(p []int, flags int) (err error) {\n //sys\tPivotRoot(newroot string, putold string) (err error)\n //pivot_root(newroot *byte, putold *byte) _C_int\n \n+//sys\tRemovexattr(path string, attr string) (err error)\n+//removexattr(path *byte, name *byte) _C_int\n+\n //sys\tRenameat(olddirfd int, oldpath string, newdirfd int, newpath string) (err error)\n //renameat(olddirfd _C_int, oldpath *byte, newdirfd _C_int, newpath *byte) _C_int\n \n@@ -338,6 +350,9 @@ func Sendfile(outfd int, infd int, offset *int64, count int) (written int, err e\n //sysnb\tSetresuid(ruid int, eguid int, suid int) (err error)\n //setresuid(ruid Uid_t, euid Uid_t, suid Uid_t) _C_int\n \n+//sys\tSetxattr(path string, attr string, data []byte, flags int) (err error)\n+//setxattr(path *byte, name *byte, value *byte, size Size_t, flags _C_int) _C_int\n+\n //sys\tsplice(rfd int, roff *_loff_t, wfd int, woff *_loff_t, len int, flags int) (n int64, err error)\n //splice(rfd _C_int, roff *_loff_t, wfd _C_int, woff *_loff_t, len Size_t, flags _C_uint) Ssize_t\n func Splice(rfd int, roff *int64, wfd int, woff *int64, len int, flags int) (n int64, err error) {"}, {"sha": "91ff59b6cfa9b1c4781f0a81eeb4ed64baa35f61", "filename": "libgo/go/syscall/libcall_posix.go", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go?ref=d5b18b0b138cc89f02f972c51c35c3bf287c9693", "patch": "@@ -238,6 +238,9 @@ func FDZero(set *FdSet) {\n //sysnb\tGetppid() (ppid int)\n //getppid() Pid_t\n \n+//sys Getpriority(which int, who int) (prio int, err error)\n+//getpriority(which _C_int, who _C_int) _C_int\n+\n //sysnb\tGetrlimit(resource int, rlim *Rlimit) (err error)\n //getrlimit(resource _C_int, rlim *Rlimit) _C_int\n \n@@ -307,6 +310,9 @@ func Gettimeofday(tv *Timeval) (err error) {\n //sysnb\tSetpgid(pid int, pgid int) (err error)\n //setpgid(pid Pid_t, pgid Pid_t) _C_int\n \n+//sys Setpriority(which int, who int, prio int) (err error)\n+//setpriority(which _C_int, who _C_int, prio _C_int) _C_int\n+\n //sysnb\tSetreuid(ruid int, euid int) (err error)\n //setreuid(ruid Uid_t, euid Uid_t) _C_int\n "}, {"sha": "71c328627a6c7b56ee9ed8653a5161b8138e21dd", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=d5b18b0b138cc89f02f972c51c35c3bf287c9693", "patch": "@@ -1035,6 +1035,10 @@ grep '^type _utimbuf ' gen-sysinfo.go | \\\n grep '^const _LOCK_' gen-sysinfo.go |\n     sed -e 's/^\\(const \\)_\\(LOCK_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n+# The PRIO constants.\n+grep '^const _PRIO_' gen-sysinfo.go | \\\n+  sed -e 's/^\\(const \\)_\\(PRIO_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+\n # The GNU/Linux LINUX_REBOOT flags.\n grep '^const _LINUX_REBOOT_' gen-sysinfo.go |\n     sed -e 's/^\\(const \\)_\\(LINUX_REBOOT_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}"}, {"sha": "f389dbe0cbe106fd198b2dec4146aa03f1729a6b", "filename": "libgo/runtime/go-nosys.c", "status": "modified", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fruntime%2Fgo-nosys.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b18b0b138cc89f02f972c51c35c3bf287c9693/libgo%2Fruntime%2Fgo-nosys.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-nosys.c?ref=d5b18b0b138cc89f02f972c51c35c3bf287c9693", "patch": "@@ -43,6 +43,17 @@ accept4 (int sockfd __attribute__ ((unused)),\n }\n #endif\n \n+#ifndef HAVE_DUP3\n+int\n+dup3 (int oldfd __attribute__ ((unused)),\n+      int newfd __attribute__ ((unused)),\n+      int flags __attribtue__ ((unused)))\n+{\n+  errno = ENOSYS;\n+  return -1;\n+}\n+#endif\n+\n #ifndef HAVE_EPOLL_CREATE1\n int\n epoll_create1 (int flags __attribute__ ((unused)))\n@@ -112,6 +123,18 @@ futimesat (int dirfd __attribute__ ((unused)),\n }\n #endif\n \n+#ifndef HAVE_GETXATTR\n+ssize_t\n+getxattr (const char *path __attribute__ ((unused)),\n+\t  const char *name __attribute__ ((unused)),\n+\t  void *value __attribute__ ((unused)),\n+\t  size_t size __attribute__ ((unused)))\n+{\n+  errno = ENOSYS;\n+  return -1;\n+}\n+#endif\n+\n #ifndef HAVE_INOTIFY_ADD_WATCH\n int\n inotify_add_watch (int fd __attribute__ ((unused)),\n@@ -151,6 +174,17 @@ inotify_rm_watch (int fd __attribute__ ((unused)),\n }\n #endif\n \n+#ifndef HAVE_LISTXATTR\n+ssize_t\n+listxattr (const char *path __attribute__ ((unused)),\n+\t   char *list __attribute__ ((unused)),\n+\t   size_t size __attribute__ ((unused)))\n+{\n+  errno = ENOSYS;\n+  return -1;\n+}\n+#endif\n+\n #ifndef HAVE_MKDIRAT\n int\n mkdirat (int dirfd __attribute__ ((unused)),\n@@ -196,6 +230,16 @@ pipe2 (int pipefd[2] __attribute__ ((unused)),\n }\n #endif\n \n+#ifndef HAVE_REMOVEXATTR\n+int\n+removexattr (const char *path __attribute__ ((unused)),\n+\t     const char *name __attribute__ ((unused)))\n+{\n+  errno = ENOSYS;\n+  return -1;\n+}\n+#endif\n+\n #ifndef HAVE_RENAMEAT\n int\n renameat (int olddirfd __attribute__ ((unused)),\n@@ -208,6 +252,19 @@ renameat (int olddirfd __attribute__ ((unused)),\n }\n #endif\n \n+#ifndef HAVE_SETXATTR\n+int\n+setxattr (const char *path __attribute__ ((unused)),\n+\t  const char *name __attribute__ ((unused)),\n+\t  const void *value __attribute__ ((unused)),\n+\t  size_t size __attribute__ ((unused)),\n+\t  int flags __attribute__ ((unused)))\n+{\n+  errno = ENOSYS;\n+  return -1;\n+}\n+#endif\n+\n #ifndef HAVE_SPLICE\n int\n splice (int fd __attribute__ ((unused)),"}]}