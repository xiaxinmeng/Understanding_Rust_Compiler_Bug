{"sha": "a4a4f7755b77fb859050d11f62645d3a80a56ac8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTRhNGY3NzU1Yjc3ZmI4NTkwNTBkMTFmNjI2NDVkM2E4MGE1NmFjOA==", "commit": {"author": {"name": "Kai Tietz", "email": "kai.tietz@onevision.com", "date": "2008-10-08T07:56:00Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2008-10-08T07:56:00Z"}, "message": "sdbout.c (sdbout_one_type): Treat the value type CONST_DECL for enumerals.\n\n2008-10-08  Kai Tietz  <kai.tietz@onevision.com>\n\n        * sdbout.c (sdbout_one_type): Treat the value type\n        CONST_DECL for enumerals.\n\nFrom-SVN: r140964", "tree": {"sha": "da3288f88a90aabebbda17d1a6577deb82574adb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da3288f88a90aabebbda17d1a6577deb82574adb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4a4f7755b77fb859050d11f62645d3a80a56ac8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4a4f7755b77fb859050d11f62645d3a80a56ac8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4a4f7755b77fb859050d11f62645d3a80a56ac8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4a4f7755b77fb859050d11f62645d3a80a56ac8/comments", "author": null, "committer": null, "parents": [{"sha": "1ffcdc0226e4cd06e28251b8836569356bb9b445", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ffcdc0226e4cd06e28251b8836569356bb9b445", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ffcdc0226e4cd06e28251b8836569356bb9b445"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "c7144e43b0e54709c24d98e61bb3dedeb60227ec", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a4f7755b77fb859050d11f62645d3a80a56ac8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a4f7755b77fb859050d11f62645d3a80a56ac8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a4a4f7755b77fb859050d11f62645d3a80a56ac8", "patch": "@@ -1,3 +1,8 @@\n+2008-10-08  Kai Tietz  <kai.tietz@onevision.com>\n+\n+\t* sdbout.c (sdbout_one_type): Treat the value type\n+\tCONST_DECL for enumerals.\n+\n 2008-10-07  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/i386.md: Remove trailing white spaces."}, {"sha": "fe08a0b636139ba5ac2e457ebe6bae417165ff3f", "filename": "gcc/sdbout.c", "status": "modified", "additions": 15, "deletions": 8, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a4f7755b77fb859050d11f62645d3a80a56ac8/gcc%2Fsdbout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a4f7755b77fb859050d11f62645d3a80a56ac8/gcc%2Fsdbout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsdbout.c?ref=a4a4f7755b77fb859050d11f62645d3a80a56ac8", "patch": "@@ -1177,14 +1177,21 @@ sdbout_one_type (tree type)\n \tif (TREE_CODE (type) == ENUMERAL_TYPE)\n \t  {\n \t    for (tem = TYPE_VALUES (type); tem; tem = TREE_CHAIN (tem))\n-\t      if (host_integerp (TREE_VALUE (tem), 0))\n-\t\t{\n-\t\t  PUT_SDB_DEF (IDENTIFIER_POINTER (TREE_PURPOSE (tem)));\n-\t\t  PUT_SDB_INT_VAL (tree_low_cst (TREE_VALUE (tem), 0));\n-\t\t  PUT_SDB_SCL (C_MOE);\n-\t\t  PUT_SDB_TYPE (T_MOE);\n-\t\t  PUT_SDB_ENDEF;\n-\t\t}\n+\t      {\n+\t        tree value = TREE_VALUE (tem);\n+\n+\t        if (TREE_CODE (value) == CONST_DECL)\n+\t          value = DECL_INITIAL (value);\n+\n+\t        if (host_integerp (value, 0))\n+\t\t  {\n+\t\t    PUT_SDB_DEF (IDENTIFIER_POINTER (TREE_PURPOSE (tem)));\n+\t\t    PUT_SDB_INT_VAL (tree_low_cst (value, 0));\n+\t\t    PUT_SDB_SCL (C_MOE);\n+\t\t    PUT_SDB_TYPE (T_MOE);\n+\t\t    PUT_SDB_ENDEF;\n+\t\t  }\n+\t      }\n \t  }\n \telse\t\t\t/* record or union type */\n \t  for (tem = TYPE_FIELDS (type); tem; tem = TREE_CHAIN (tem))"}]}