{"sha": "5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU3ZThiOThmNDllZGE5ZmZiOTgxN2Q5Nzk3NWEyMTFjODdjNWE1Mw==", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-04-25T01:16:59Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-04-25T01:16:59Z"}, "message": "c++: add \"'requires' only available with ...\" note\n\nThis adds a note suggesting to enable concepts whenever 'requires' is parsed as\nan invalid type name with concepts disabled.\n\ngcc/cp/ChangeLog:\n\n\t* parser.c (cp_parser_diagnose_invalid_type_name): Suggest enabling\n\tconcepts if the invalid identifier is 'requires'.\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/concepts/diagnostic11.C: New test.", "tree": {"sha": "1f66407215327fc43c4a91aed1623e9ef015abf4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f66407215327fc43c4a91aed1623e9ef015abf4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/comments", "author": null, "committer": null, "parents": [{"sha": "018730326d878d98b85b1256ff220e76665ed97e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/018730326d878d98b85b1256ff220e76665ed97e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/018730326d878d98b85b1256ff220e76665ed97e"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "2a5b417136685b5cea1bfae4a556a07ac6323383", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "patch": "@@ -1,3 +1,8 @@\n+2020-04-25  Patrick Palka  <ppalka@redhat.com>\n+\n+\t* parser.c (cp_parser_diagnose_invalid_type_name): Suggest enabling\n+\tconcepts if the invalid identifier is 'requires'.\n+\n 2020-04-25  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/94742"}, {"sha": "e1f9786893acd460c0e0e6adf1423dfc3b1d0e50", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "patch": "@@ -3378,6 +3378,9 @@ cp_parser_diagnose_invalid_type_name (cp_parser *parser, tree id,\n       else if (!flag_concepts && id == ridpointers[(int)RID_CONCEPT])\n \tinform (location, \"%<concept%> only available with %<-std=c++2a%> or \"\n \t\t\"%<-fconcepts%>\");\n+      else if (!flag_concepts && id == ridpointers[(int)RID_REQUIRES])\n+\tinform (location, \"%<requires%> only available with %<-std=c++2a%> or \"\n+\t\t\"%<-fconcepts%>\");\n       else if (processing_template_decl && current_class_type\n \t       && TYPE_BINFO (current_class_type))\n \t{"}, {"sha": "efbfe99d0d9ad4dce389ec63b19ecada0048bda9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "patch": "@@ -1,3 +1,7 @@\n+2020-04-25  Patrick Palka  <ppalka@redhat.com>\n+\n+\t* g++.dg/concepts/diagnostic11.C: New test.\n+\n 2020-04-25  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/94742"}, {"sha": "7c60912352ab7fa4f685c9b2b37463421722399d", "filename": "gcc/testsuite/g++.dg/concepts/diagnostic11.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fdiagnostic11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e7e8b98f49eda9ffb9817d97975a211c87c5a53/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fdiagnostic11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fdiagnostic11.C?ref=5e7e8b98f49eda9ffb9817d97975a211c87c5a53", "patch": "@@ -0,0 +1,6 @@\n+// { dg-do compile { target c++17_only } }\n+\n+template <bool B>\n+  requires B // { dg-error \".requires. does not name a type\" }\n+// { dg-message \".requires. only available with\" \"\" { target *-*-* } .-1 }\n+void foo() { }"}]}