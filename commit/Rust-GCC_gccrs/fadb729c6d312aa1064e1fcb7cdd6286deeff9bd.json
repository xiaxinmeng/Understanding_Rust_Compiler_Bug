{"sha": "fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmFkYjcyOWM2ZDMxMmFhMTA2NGUxZmNiN2NkZDYyODZkZWVmZjliZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2000-10-27T19:49:53Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2000-10-27T19:49:53Z"}, "message": "calls.c (expand_call): If sibcall_failure is set during pass 1, clear tail_call_insns as well.\n\n\t* calls.c (expand_call): If sibcall_failure is set during pass 1,\n\tclear tail_call_insns as well.\n\n\t* g++.old-deja/g++.other/eh2.C: New test.\n\nFrom-SVN: r37087", "tree": {"sha": "4a398dc7d2148fed77879fcff5b60217176f20e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a398dc7d2148fed77879fcff5b60217176f20e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "254bb25636bc50612a67ccad1563a4cc082c7e75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/254bb25636bc50612a67ccad1563a4cc082c7e75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/254bb25636bc50612a67ccad1563a4cc082c7e75"}], "stats": {"total": 36, "additions": 32, "deletions": 4}, "files": [{"sha": "35ae9ddc3353229188d7fdba1e381c0056f8362e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "patch": "@@ -1,3 +1,8 @@\n+2000-10-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* calls.c (expand_call): If sibcall_failure is set during pass 1,\n+\tclear tail_call_insns as well.\n+\n 2000-10-27  Nick Clifton  <nickc@redhat.com>\n \n \t* config/arm/arm-protos.h (arm_function_ok_for_sibcall): Add"}, {"sha": "da850ccada4b694018d92f1032def5f9daf07c62", "filename": "gcc/calls.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "patch": "@@ -3363,10 +3363,6 @@ expand_call (exp, target, ignore)\n \t{\n \t  tail_call_insns = insns;\n \n-\t  /* If something prevents making this a sibling call,\n-\t     zero out the sequence.  */\n-\t  if (sibcall_failure)\n-\t    tail_call_insns = NULL_RTX;\n \t  /* Restore the pending stack adjustment now that we have\n \t     finished generating the sibling call sequence.  */\n \n@@ -3385,6 +3381,11 @@ expand_call (exp, target, ignore)\n \t}\n       else\n \tnormal_call_insns = insns;\n+\n+      /* If something prevents making this a sibling call,\n+\t zero out the sequence.  */\n+      if (sibcall_failure)\n+\ttail_call_insns = NULL_RTX;\n     }\n \n   /* The function optimize_sibling_and_tail_recursive_calls doesn't"}, {"sha": "84b84c801a5b8f22836f7570d818a9aae2b56970", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "patch": "@@ -1,3 +1,7 @@\n+2000-10-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* g++.old-deja/g++.other/eh2.C: New test.\n+\n 2000-10-27  Bernd Schmidt  <bernds@cygnus.co.uk>\n \n \t* gcc.c-torture/execute/20001027-1.c: New test."}, {"sha": "514d645359cc4fa099962da2b349fdc9c7875fb2", "filename": "gcc/testsuite/g++.old-deja/g++.other/eh2.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Feh2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fadb729c6d312aa1064e1fcb7cdd6286deeff9bd/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Feh2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Feh2.C?ref=fadb729c6d312aa1064e1fcb7cdd6286deeff9bd", "patch": "@@ -0,0 +1,18 @@\n+// Build don't link:\n+// Origin: Jakub Jelinek <jakub@redhat.com>\n+// Special g++ Options: -O2\n+\n+class a {\n+public:\n+  double b;\n+  int c;\n+  ~a() { }\n+};\n+\n+int bar(a x);\n+a foo(double x);\n+\n+int baz(double x, int y)\n+{\n+   return bar(foo(x));\n+}"}]}