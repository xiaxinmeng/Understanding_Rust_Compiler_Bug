{"sha": "f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjJiMDFjZmI2ZGNiZjhkZDQ3MWVlZTYxMWQyNmMwY2YwOTQ2ODNmNQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-11-04T15:19:19Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-11-04T15:19:19Z"}, "message": "re PR tree-optimization/46183 (ICE: in calc_dfs_tree, at dominance.c:396 with -O -fno-dse -fgcse -ftree-pre)\n\n2010-11-04  Richard Guenther  <rguenther@suse.de>\n\n\tPR rtl-optimization/46183\n\t* gcse.c (execute_rtl_cprop): Cleanup the CFG if something changed.\n\t(execute_rtl_pre): Likewise.\n\t(execute_rtl_hoist): Likewise.\n\n\t* gcc.dg/torture/pr46183.c: New testcase.\n\nFrom-SVN: r166316", "tree": {"sha": "f3eb52d8af926dd9719f0f6e47ce85a8efb2f2f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f3eb52d8af926dd9719f0f6e47ce85a8efb2f2f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9f2fbc99445e45c894c6170bef9d7e10ba8cc2d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f2fbc99445e45c894c6170bef9d7e10ba8cc2d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f2fbc99445e45c894c6170bef9d7e10ba8cc2d9"}], "stats": {"total": 50, "additions": 47, "deletions": 3}, "files": [{"sha": "71bd8b4edc3f4bb56870c653f3037d6913f90717", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "patch": "@@ -1,3 +1,10 @@\n+2010-11-04  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR rtl-optimization/46183\n+\t* gcse.c (execute_rtl_cprop): Cleanup the CFG if something changed.\n+\t(execute_rtl_pre): Likewise.\n+\t(execute_rtl_hoist): Likewise.\n+\n 2010-11-04  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/46068"}, {"sha": "595fdb2b054ee50c3807146446b2d9c11567a3b1", "filename": "gcc/gcse.c", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2Fgcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2Fgcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcse.c?ref=f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "patch": "@@ -5246,10 +5246,14 @@ gate_rtl_cprop (void)\n static unsigned int\n execute_rtl_cprop (void)\n {\n+  int changed;\n   delete_unreachable_blocks ();\n   df_set_flags (DF_LR_RUN_DCE);\n   df_analyze ();\n-  flag_rerun_cse_after_global_opts |= one_cprop_pass ();\n+  changed = one_cprop_pass ();\n+  flag_rerun_cse_after_global_opts |= changed;\n+  if (changed)\n+    cleanup_cfg (0);\n   return 0;\n }\n \n@@ -5265,9 +5269,13 @@ gate_rtl_pre (void)\n static unsigned int\n execute_rtl_pre (void)\n {\n+  int changed;\n   delete_unreachable_blocks ();\n   df_analyze ();\n-  flag_rerun_cse_after_global_opts |= one_pre_gcse_pass ();\n+  changed = one_pre_gcse_pass ();\n+  flag_rerun_cse_after_global_opts |= changed;\n+  if (changed)\n+    cleanup_cfg (0);\n   return 0;\n }\n \n@@ -5286,9 +5294,13 @@ gate_rtl_hoist (void)\n static unsigned int\n execute_rtl_hoist (void)\n {\n+  int changed;\n   delete_unreachable_blocks ();\n   df_analyze ();\n-  flag_rerun_cse_after_global_opts |= one_code_hoisting_pass ();\n+  changed = one_code_hoisting_pass ();\n+  flag_rerun_cse_after_global_opts |= changed;\n+  if (changed)\n+    cleanup_cfg (0);\n   return 0;\n }\n "}, {"sha": "6928ea0b1840693f466b5b9d3acc6f084bf33649", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "patch": "@@ -1,3 +1,8 @@\n+2010-11-04  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR rtl-optimization/46183\n+\t* gcc.dg/torture/pr46183.c: New testcase.\n+\n 2010-11-04  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/46068"}, {"sha": "9582c34e08427ec3fe1f6d9b064e40a876a12117", "filename": "gcc/testsuite/gcc.dg/torture/pr46183.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr46183.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b01cfb6dcbf8dd471eee611d26c0cf094683f5/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr46183.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr46183.c?ref=f2b01cfb6dcbf8dd471eee611d26c0cf094683f5", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-dse\" } */\n+\n+void bar(void);\n+\n+void foo (int i, ...)\n+{\n+  __builtin_va_list ap;\n+  __builtin_va_start (ap, i);\n+  __builtin_va_arg (ap, int);\n+  while (i) i++;\n+  __builtin_va_arg (ap, int);\n+  while (i) i++;\n+  __builtin_va_arg (ap, int);\n+  while (i) i++;\n+  __builtin_va_arg (ap, int);\n+  if (i)\n+    bar ();\n+}\n+"}]}