{"sha": "c7e3443332f8c97305d401e1a35cd65a15ada235", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdlMzQ0MzMzMmY4Yzk3MzA1ZDQwMWUxYTM1Y2Q2NWExNWFkYTIzNQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-11-01T16:27:38Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-11-01T16:27:38Z"}, "message": "re PR fortran/90988 (Wrong error message with variables named \"PUBLIC*\")\n\n2019-11-01  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/90988\n\t* decl.c (gfc_match_private, gfc_match_public): Fixed-form source code\n\tdoes not require whitespace between PRIVATE (or PUBLIC) and an entity.\n\n2019-11-01  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/90988\n\t* gfortran.dg/pr90988_4.f: New test.\n\nFrom-SVN: r277714", "tree": {"sha": "38c51290fc835a6be42b6ccef728fa852515d474", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38c51290fc835a6be42b6ccef728fa852515d474"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7e3443332f8c97305d401e1a35cd65a15ada235", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7e3443332f8c97305d401e1a35cd65a15ada235", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7e3443332f8c97305d401e1a35cd65a15ada235", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7e3443332f8c97305d401e1a35cd65a15ada235/comments", "author": null, "committer": null, "parents": [{"sha": "783aea334097f8cb6dba904128ce34708373af1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/783aea334097f8cb6dba904128ce34708373af1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/783aea334097f8cb6dba904128ce34708373af1c"}], "stats": {"total": 48, "additions": 37, "deletions": 11}, "files": [{"sha": "34d7a718c3380bf10526fe689712010d276a0e36", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c7e3443332f8c97305d401e1a35cd65a15ada235", "patch": "@@ -1,3 +1,9 @@\n+2019-11-01  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/90988\n+\t* decl.c (gfc_match_private, gfc_match_public): Fixed-form source code\n+\tdoes not require whitespace between PRIVATE (or PUBLIC) and an entity.\n+\n 2019-11-01  Tobias Burnus  <tobias@codesourcery.com>\n \n \t* f95-lang.c (LANG_HOOKS_OMP_ARRAY_DATA): Set to gfc_omp_array_data."}, {"sha": "652b578b0dd944f07e950e1a162b4445fa2fbd54", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 16, "deletions": 11, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=c7e3443332f8c97305d401e1a35cd65a15ada235", "patch": "@@ -9059,7 +9059,6 @@ match\n gfc_match_private (gfc_statement *st)\n {\n   gfc_state_data *prev;\n-  char c;\n \n   if (gfc_match (\"private\") != MATCH_YES)\n     return MATCH_NO;\n@@ -9083,10 +9082,14 @@ gfc_match_private (gfc_statement *st)\n       return MATCH_YES;\n     }\n \n-  /* At this point, PRIVATE must be followed by whitespace or ::.  */\n-  c = gfc_peek_ascii_char ();\n-  if (!gfc_is_whitespace (c) && c != ':')\n-    return MATCH_NO;\n+  /* At this point in free-form source code, PRIVATE must be followed\n+     by whitespace or ::.  */\n+  if (gfc_current_form == FORM_FREE)\n+    {\n+      char c = gfc_peek_ascii_char ();\n+      if (!gfc_is_whitespace (c) && c != ':')\n+\treturn MATCH_NO;\n+    }\n \n   prev = gfc_state_stack->previous;\n   if (gfc_current_state () != COMP_MODULE\n@@ -9108,8 +9111,6 @@ gfc_match_private (gfc_statement *st)\n match\n gfc_match_public (gfc_statement *st)\n {\n-  char c;\n-\n   if (gfc_match (\"public\") != MATCH_YES)\n     return MATCH_NO;\n \n@@ -9127,10 +9128,14 @@ gfc_match_public (gfc_statement *st)\n       return MATCH_YES;\n     }\n \n-  /* At this point, PUBLIC must be followed by whitespace or ::.  */\n-  c = gfc_peek_ascii_char ();\n-  if (!gfc_is_whitespace (c) && c != ':')\n-    return MATCH_NO;\n+  /* At this point in free-form source code, PUBLIC must be followed\n+     by whitespace or ::.  */\n+  if (gfc_current_form == FORM_FREE)\n+    {\n+      char c = gfc_peek_ascii_char ();\n+      if (!gfc_is_whitespace (c) && c != ':')\n+\treturn MATCH_NO;\n+    }\n \n   if (gfc_current_state () != COMP_MODULE)\n     {"}, {"sha": "e7dec2ec88268a6b1de55ee53438163638547d5a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c7e3443332f8c97305d401e1a35cd65a15ada235", "patch": "@@ -1,3 +1,8 @@\n+2019-11-01  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/90988\n+\t* gfortran.dg/pr90988_4.f: New test.\n+\n 2019-11-01  Martin Sebor  <msebor@redhat.com>\n \n \t* gcc.dg/tree-ssa/builtin-sprintf-warn-3.c: Declare test functions"}, {"sha": "3379b2e128dcf074189c1c2213028f5dee17b362", "filename": "gcc/testsuite/gfortran.dg/pr90988_4.f", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr90988_4.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7e3443332f8c97305d401e1a35cd65a15ada235/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr90988_4.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr90988_4.f?ref=c7e3443332f8c97305d401e1a35cd65a15ada235", "patch": "@@ -0,0 +1,10 @@\n+c { dg-do compile }\n+       module foo\n+          implicit none\n+          real a,b,c\n+          integer i,j,k\n+          public a,b\n+          publicc\n+          private i,j\n+          privatek\n+       end module foo"}]}