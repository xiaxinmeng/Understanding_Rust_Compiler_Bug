{"sha": "0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "node_id": "C_kwDOANBUbNoAKDBmM2RmZTQxY2IyOTZmZjJhNTNiNmI5MTdhYTEwZmY1YTc4YzI0ZmU", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2021-11-10T11:41:19Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-12-01T10:24:40Z"}, "message": "[Ada] Replace low-level detection of subprograms with high-level wrapper\n\ngcc/ada/\n\n\t* exp_aggr.adb, sem_cat.adb, sem_ch10.adb, sem_ch12.adb,\n\tsem_elim.adb, sem_util.adb: Replace uses of Subprogram_Kind with\n\tIs_Subprogram.", "tree": {"sha": "265136ce66eadcb68ef6acdbeec2cc7da2f30fb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/265136ce66eadcb68ef6acdbeec2cc7da2f30fb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a41a9107459625a800cb424805a22991b3e038a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a41a9107459625a800cb424805a22991b3e038a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a41a9107459625a800cb424805a22991b3e038a4"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "af39ba58e1463623923ba849819e5b30802dcf30", "filename": "gcc/ada/exp_aggr.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fexp_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fexp_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_aggr.adb?ref=0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "patch": "@@ -9248,7 +9248,7 @@ package body Exp_Aggr is\n \n             when N_Object_Declaration =>\n                return not Constant_Present (C)\n-                 and then Ekind (Current_Scope) in Subprogram_Kind;\n+                 and then Is_Subprogram (Current_Scope);\n \n             --  False for all other contexts\n "}, {"sha": "6270b7c7aa55bff911ea8fb3746e7a51129fe51e", "filename": "gcc/ada/sem_cat.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_cat.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_cat.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_cat.adb?ref=0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "patch": "@@ -807,7 +807,7 @@ package body Sem_Cat is\n       end if;\n \n       if not Is_Remote_Call_Interface (E) then\n-         if Ekind (E) in Subprogram_Kind then\n+         if Is_Subprogram (E) then\n             Declaration := Unit_Declaration_Node (E);\n \n             if Nkind (Declaration) in"}, {"sha": "f4ce099884b74aa00cd197994ac60c6ca85d3af2", "filename": "gcc/ada/sem_ch10.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_ch10.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_ch10.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch10.adb?ref=0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "patch": "@@ -5271,7 +5271,7 @@ package body Sem_Ch10 is\n             end if;\n \n             if Is_Generic_Instance (Uname)\n-              and then Ekind (Uname) in Subprogram_Kind\n+              and then Is_Subprogram (Uname)\n             then\n                --  Set flag as well on the visible entity that denotes the\n                --  instance, which renames the current one."}, {"sha": "a37224a7b18db31395dac9283e0ff1bf23ec9e1b", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "patch": "@@ -5298,7 +5298,7 @@ package body Sem_Ch12 is\n \n          Scop := Scope (E);\n          while Scop /= Standard_Standard loop\n-            if Ekind (Scop) in Subprogram_Kind and then Is_Inlined (Scop) then\n+            if Is_Subprogram (Scop) and then Is_Inlined (Scop) then\n                return True;\n             end if;\n "}, {"sha": "bd3c2ef3235fcffe13a86fb0c9f2c2ae3bd1a20c", "filename": "gcc/ada/sem_elim.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_elim.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_elim.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_elim.adb?ref=0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "patch": "@@ -247,7 +247,7 @@ package body Sem_Elim is\n \n       --  Elimination of objects and types is not implemented yet\n \n-      elsif Ekind (E) not in Subprogram_Kind then\n+      elsif not Is_Subprogram (E) then\n          return;\n       end if;\n "}, {"sha": "f8e9888fdd6272c02f5d2ce7ec4eb1e851740e70", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=0f3dfe41cb296ff2a53b6b917aa10ff5a78c24fe", "patch": "@@ -29476,7 +29476,7 @@ package body Sem_Util is\n                   --  Since we are only interested in the formal case, avoid\n                   --  the anonymous access result type.\n \n-                  if Ekind (Def_Ent) in Subprogram_Kind\n+                  if Is_Subprogram (Def_Ent)\n                     and then not (Ekind (Def_Ent) = E_Function\n                                    and then Etype (Def_Ent) = Typ)\n                   then"}]}