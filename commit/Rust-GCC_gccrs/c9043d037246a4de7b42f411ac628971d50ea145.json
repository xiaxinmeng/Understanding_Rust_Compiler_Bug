{"sha": "c9043d037246a4de7b42f411ac628971d50ea145", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzkwNDNkMDM3MjQ2YTRkZTdiNDJmNDExYWM2Mjg5NzFkNTBlYTE0NQ==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-01-19T17:29:42Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-01-19T17:29:42Z"}, "message": "re PR c++/25854 (Bogus diagnostic with '<type error>')\n\n\tPR c++/25854\n\t* pt.c (maybe_process_partial_specialization): Return early on\n\terror_mark_node.\n\n\t* g++.dg/template/spec28.C: New test.\n\nFrom-SVN: r109975", "tree": {"sha": "cbb6e67b336ab512aca01d5fa4a0f497fb3a64f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cbb6e67b336ab512aca01d5fa4a0f497fb3a64f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9043d037246a4de7b42f411ac628971d50ea145", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9043d037246a4de7b42f411ac628971d50ea145", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9043d037246a4de7b42f411ac628971d50ea145", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9043d037246a4de7b42f411ac628971d50ea145/comments", "author": null, "committer": null, "parents": [{"sha": "9795d9fd7a80977d03a81e17f5d980e3b69f84d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9795d9fd7a80977d03a81e17f5d980e3b69f84d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9795d9fd7a80977d03a81e17f5d980e3b69f84d1"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "53b2953320a71e8b1866aee5ac5f7131dc34f96c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c9043d037246a4de7b42f411ac628971d50ea145", "patch": "@@ -1,3 +1,9 @@\n+2006-01-19  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/25854\n+\t* pt.c (maybe_process_partial_specialization): Return early on\n+\terror_mark_node.\n+\n 2006-01-19  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c++/16829"}, {"sha": "236145763addfda4a7dc51de3e4ec51a7d8fdc0b", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=c9043d037246a4de7b42f411ac628971d50ea145", "patch": "@@ -678,8 +678,12 @@ check_explicit_instantiation_namespace (tree spec)\n void\n maybe_process_partial_specialization (tree type)\n {\n-  /* TYPE maybe an ERROR_MARK_NODE.  */\n-  tree context = TYPE_P (type) ? TYPE_CONTEXT (type) : NULL_TREE;\n+  tree context;\n+\n+  if (type == error_mark_node)\n+    return;\n+\n+  context = TYPE_CONTEXT (type);\n \n   if (CLASS_TYPE_P (type) && CLASSTYPE_USE_TEMPLATE (type))\n     {"}, {"sha": "4e4c7e0c683914ca102089511bee2b55d3f88b85", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c9043d037246a4de7b42f411ac628971d50ea145", "patch": "@@ -1,3 +1,8 @@\n+2006-01-19  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/25854\n+\t* g++.dg/template/spec28.C: New test.\n+\n 2006-01-19  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* objc.dg/gnu-encoding/struct-layout-encoding-1_generate.c (switchfiles):"}, {"sha": "f0bb22caeb4041ada4d584b0ee2c4f89fc127941", "filename": "gcc/testsuite/g++.dg/template/spec28.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fspec28.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9043d037246a4de7b42f411ac628971d50ea145/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fspec28.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fspec28.C?ref=c9043d037246a4de7b42f411ac628971d50ea145", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/25854\n+// Bad diagnostic\n+// { dg-do compile }\n+\n+template<typename> struct A {};  // { dg-error \"provided\" }\n+template<> struct A<> {};        // { dg-error \"wrong number\" }"}]}