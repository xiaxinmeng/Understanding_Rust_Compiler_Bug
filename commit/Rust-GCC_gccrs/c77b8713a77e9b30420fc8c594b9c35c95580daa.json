{"sha": "c77b8713a77e9b30420fc8c594b9c35c95580daa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzc3Yjg3MTNhNzdlOWIzMDQyMGZjOGM1OTRiOWMzNWM5NTU4MGRhYQ==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2016-09-13T15:58:52Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@gcc.gnu.org", "date": "2016-09-13T15:58:52Z"}, "message": "re PR tree-optimization/77536 (Vectorizer not maintaining relationship of relative block frequencies in absence of real profile data)\n\n\tPR tree-optimization/77536\n\tPR rtl-optimization/68212\n\t* config/rs6000/rs6000.md (div->recip splitter): Remove\n\toptimize_insn_for_speed_p condition.\n\nFrom-SVN: r240113", "tree": {"sha": "c855b6cb054201fe7e84b3438c0d2ccd8521c473", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c855b6cb054201fe7e84b3438c0d2ccd8521c473"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c77b8713a77e9b30420fc8c594b9c35c95580daa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c77b8713a77e9b30420fc8c594b9c35c95580daa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c77b8713a77e9b30420fc8c594b9c35c95580daa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c77b8713a77e9b30420fc8c594b9c35c95580daa/comments", "author": null, "committer": null, "parents": [{"sha": "42763690bd1f536692054d4b8d530d1a5a9c29a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42763690bd1f536692054d4b8d530d1a5a9c29a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42763690bd1f536692054d4b8d530d1a5a9c29a1"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "58ab8355a75dae773d3cecefb51b0dff298938a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c77b8713a77e9b30420fc8c594b9c35c95580daa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c77b8713a77e9b30420fc8c594b9c35c95580daa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c77b8713a77e9b30420fc8c594b9c35c95580daa", "patch": "@@ -1,3 +1,10 @@\n+2016-09-13  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\tPR tree-optimization/77536\n+\tPR rtl-optimization/68212\n+\t* config/rs6000/rs6000.md (div->recip splitter): Remove\n+\toptimize_insn_for_speed_p condition.\n+\n 2016-09-13  Maciej W. Rozycki  <macro@imgtec.com>\n \n \t* optabs.c (prepare_cmp_insn): Update documentation comment."}, {"sha": "8d09c8cd2ddb583f60add5fbe024954abbc035c5", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c77b8713a77e9b30420fc8c594b9c35c95580daa/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c77b8713a77e9b30420fc8c594b9c35c95580daa/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=c77b8713a77e9b30420fc8c594b9c35c95580daa", "patch": "@@ -4323,13 +4323,15 @@\n ;; Split to create division from FRE/FRES/etc. and fixup instead of the normal\n ;; hardware division.  This is only done before register allocation and with\n ;; -ffast-math.  This must appear before the divsf3/divdf3 insns.\n+;; We used to also check optimize_insn_for_speed_p () but problems with guessed\n+;; frequencies (pr68212/pr77536) yields that unreliable so it was removed.\n (define_split\n   [(set (match_operand:RECIPF 0 \"gpc_reg_operand\" \"\")\n \t(div:RECIPF (match_operand 1 \"gpc_reg_operand\" \"\")\n \t\t    (match_operand 2 \"gpc_reg_operand\" \"\")))]\n   \"RS6000_RECIP_AUTO_RE_P (<MODE>mode)\n-   && can_create_pseudo_p () && optimize_insn_for_speed_p ()\n-   && flag_finite_math_only && !flag_trapping_math && flag_reciprocal_math\"\n+   && can_create_pseudo_p () && flag_finite_math_only\n+   && !flag_trapping_math && flag_reciprocal_math\"\n   [(const_int 0)]\n {\n   rs6000_emit_swdiv (operands[0], operands[1], operands[2], true);"}]}