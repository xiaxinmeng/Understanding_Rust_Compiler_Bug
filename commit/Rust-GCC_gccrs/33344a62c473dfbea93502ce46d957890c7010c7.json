{"sha": "33344a62c473dfbea93502ce46d957890c7010c7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzMzNDRhNjJjNDczZGZiZWE5MzUwMmNlNDZkOTU3ODkwYzcwMTBjNw==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2012-07-04T23:32:13Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2012-07-04T23:32:13Z"}, "message": "predicates.md (zero_extend_operand): New predicate.\n\n\t* config/sh/predicates.md (zero_extend_operand): New predicate.\n\t* config/sh/sh.md (zero_extendhisi2): Simplify by using new\n\tzero_extend_operand predicate.\n\t(zero_extendqisi2): Likewise.\n\nFrom-SVN: r189269", "tree": {"sha": "078f6998ad1cfcdef968e62adb1f0b310921acd9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/078f6998ad1cfcdef968e62adb1f0b310921acd9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33344a62c473dfbea93502ce46d957890c7010c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33344a62c473dfbea93502ce46d957890c7010c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33344a62c473dfbea93502ce46d957890c7010c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33344a62c473dfbea93502ce46d957890c7010c7/comments", "author": null, "committer": null, "parents": [{"sha": "7f426c93a7460029a565712e1665de1b9042ddca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f426c93a7460029a565712e1665de1b9042ddca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f426c93a7460029a565712e1665de1b9042ddca"}], "stats": {"total": 32, "additions": 18, "deletions": 14}, "files": [{"sha": "c1f8098c70bbbc116355e540c2955b8800b4baea", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33344a62c473dfbea93502ce46d957890c7010c7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33344a62c473dfbea93502ce46d957890c7010c7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33344a62c473dfbea93502ce46d957890c7010c7", "patch": "@@ -1,3 +1,10 @@\n+2012-07-04  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\t* config/sh/predicates.md (zero_extend_operand): New predicate.\n+\t* config/sh/sh.md (zero_extendhisi2): Simplify by using new\n+\tzero_extend_operand predicate.\n+\t(zero_extendqisi2): Likewise.\n+\n 2012-07-04  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR middle-end/53321"}, {"sha": "4d793b19c5250cd1a6d519c4103541b403544016", "filename": "gcc/config/sh/predicates.md", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33344a62c473dfbea93502ce46d957890c7010c7/gcc%2Fconfig%2Fsh%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33344a62c473dfbea93502ce46d957890c7010c7/gcc%2Fconfig%2Fsh%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fpredicates.md?ref=33344a62c473dfbea93502ce46d957890c7010c7", "patch": "@@ -368,6 +368,13 @@\n \t  : nonimmediate_operand) (op, mode);\n })\n \n+;; Returns 1 if the operand can be used in a zero_extend.\n+(define_predicate \"zero_extend_operand\"\n+  (ior (and (match_test \"TARGET_SHMEDIA\")\n+\t    (match_operand 0 \"general_extend_operand\"))\n+       (and (match_test \"! TARGET_SHMEDIA\")\n+\t    (match_operand 0 \"arith_reg_operand\"))))\n+\n ;; Returns 1 if OP can be source of a simple move operation. Same as\n ;; general_operand, but a LABEL_REF is valid, PRE_DEC is invalid as\n ;; are subregs of system registers."}, {"sha": "980aa6f30b1b47ef85e12ce1dd038400a3a3cdb7", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 4, "deletions": 14, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33344a62c473dfbea93502ce46d957890c7010c7/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33344a62c473dfbea93502ce46d957890c7010c7/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=33344a62c473dfbea93502ce46d957890c7010c7", "patch": "@@ -4725,13 +4725,8 @@ label:\n \t      (const_string \"ignore\")))])\n \n (define_expand \"zero_extendhisi2\"\n-  [(set (match_operand:SI 0 \"arith_reg_operand\" \"\")\n-\t(zero_extend:SI (match_operand:HI 1 \"general_extend_operand\" \"\")))]\n-  \"\"\n-{\n-  if (! TARGET_SHMEDIA && ! arith_reg_operand (operands[1], HImode))\n-    operands[1] = copy_to_mode_reg (HImode, operands[1]);\n-})\n+  [(set (match_operand:SI 0 \"arith_reg_dest\" \"\")\n+\t(zero_extend:SI (match_operand:HI 1 \"zero_extend_operand\" \"\")))])\n \n (define_insn \"*zero_extendhisi2_compact\"\n   [(set (match_operand:SI 0 \"arith_reg_dest\" \"=r\")\n@@ -4770,13 +4765,8 @@ label:\n })\n \n (define_expand \"zero_extendqisi2\"\n-  [(set (match_operand:SI 0 \"arith_reg_operand\" \"\")\n-\t(zero_extend:SI (match_operand:QI 1 \"general_extend_operand\" \"\")))]\n-  \"\"\n-{\n-  if (! TARGET_SHMEDIA && ! arith_reg_operand (operands[1], QImode))\n-    operands[1] = copy_to_mode_reg (QImode, operands[1]);\n-})\n+  [(set (match_operand:SI 0 \"arith_reg_dest\" \"\")\n+\t(zero_extend:SI (match_operand:QI 1 \"zero_extend_operand\" \"\")))])\n \n (define_insn \"*zero_extendqisi2_compact\"\n   [(set (match_operand:SI 0 \"arith_reg_dest\" \"=r\")"}]}