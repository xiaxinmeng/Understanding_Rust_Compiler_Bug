{"sha": "019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDE5ZjM2YTY0OGZkM2YzNWU1NjJlYjdkZGQzZmY2MzkzYjMwYjRjNw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2019-10-10T13:04:44Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2019-10-10T13:04:44Z"}, "message": "re PR middle-end/92037 (LTO bootstrap broken in selftests)\n\n\tPR middle-end/92037\n\t* cgraph.c (symbol_table_test::symbol_table_test): Use ggc_alloc\n\trather than ggc_alloc_cleared to alloc symbol table.\n\t* toplev.c (general_init): Likewise.\n\t* cgraph.h (symbol_table): Explicitly construct every field.\n\nFrom-SVN: r276804", "tree": {"sha": "3bccfeacaa19816afb231f29ac6f6a4f55cf7b36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3bccfeacaa19816afb231f29ac6f6a4f55cf7b36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/comments", "author": null, "committer": null, "parents": [{"sha": "9142736ee21629b159504a474f686cabb1612579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9142736ee21629b159504a474f686cabb1612579", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9142736ee21629b159504a474f686cabb1612579"}], "stats": {"total": 34, "additions": 26, "deletions": 8}, "files": [{"sha": "e97db14f8e58fc0ad637e138b1f39b9ef7413aa8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "patch": "@@ -1,3 +1,11 @@\n+2019-10-10  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR middle-end/92037\n+\t* cgraph.c (symbol_table_test::symbol_table_test): Use ggc_alloc\n+\trather than ggc_alloc_cleared to alloc symbol table.\n+\t* toplev.c (general_init): Likewise.\n+\t* cgraph.h (symbol_table): Explicitly construct every field.\n+\n 2019-10-10  Andreas Krebbel  <krebbel@linux.ibm.com>\n \n \t* common/config/s390/s390-common.c (PF_ARCH13): Rename to..."}, {"sha": "8b752d83809810624378f0e7e479d371247ac5c2", "filename": "gcc/cgraph.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "patch": "@@ -3835,7 +3835,7 @@ symbol_table_test::symbol_table_test ()\n {\n   gcc_assert (saved_symtab == NULL);\n   saved_symtab = symtab;\n-  symtab = new (ggc_cleared_alloc <symbol_table> ()) symbol_table ();\n+  symtab = new (ggc_alloc <symbol_table> ()) symbol_table ();\n }\n \n /* Destructor.  Restore the old value of symtab.  */"}, {"sha": "733d616fb8c3add97e19d8a2a3d870e86cc3cd98", "filename": "gcc/cgraph.h", "status": "modified", "additions": 16, "deletions": 6, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "patch": "@@ -2095,9 +2095,19 @@ class GTY((tag (\"SYMTAB\"))) symbol_table\n   friend struct cgraph_node;\n   friend struct cgraph_edge;\n \n-  symbol_table (): cgraph_max_uid (1), cgraph_max_summary_id (0),\n-  edges_max_uid (1), edges_max_summary_id (0),\n-  cgraph_released_summary_ids (), edge_released_summary_ids ()\n+  symbol_table (): \n+  cgraph_count (0), cgraph_max_uid (1), cgraph_max_summary_id (0),\n+  edges_count (0), edges_max_uid (1), edges_max_summary_id (0),\n+  cgraph_released_summary_ids (), edge_released_summary_ids (),\n+  nodes (NULL), asmnodes (NULL), asm_last_node (NULL),\n+  order (0), global_info_ready (false), state (PARSING),\n+  function_flags_ready (false), cpp_implicit_aliases_done (false),\n+  section_hash (NULL), assembler_name_hash (NULL), init_priority_hash (NULL),\n+  dump_file (NULL), ipa_clones_dump_file (NULL), cloned_nodes (),\n+  m_first_edge_removal_hook (NULL), m_first_cgraph_removal_hook (NULL),\n+  m_first_edge_duplicated_hook (NULL), m_first_cgraph_duplicated_hook (NULL),\n+  m_first_cgraph_insertion_hook (NULL), m_first_varpool_insertion_hook (NULL),\n+  m_first_varpool_removal_hook (NULL)\n   {\n   }\n \n@@ -2343,6 +2353,9 @@ class GTY((tag (\"SYMTAB\"))) symbol_table\n   /* Vector of released summary IDS for cgraph nodes.  */\n   vec<int> GTY ((skip)) edge_released_summary_ids;\n \n+  /* Return symbol used to separate symbol name from suffix.  */\n+  static char symbol_suffix_separator ();\n+\n   symtab_node* GTY(()) nodes;\n   asm_node* GTY(()) asmnodes;\n   asm_node* GTY(()) asm_last_node;\n@@ -2372,9 +2385,6 @@ class GTY((tag (\"SYMTAB\"))) symbol_table\n \n   FILE* GTY ((skip)) dump_file;\n \n-  /* Return symbol used to separate symbol name from suffix.  */\n-  static char symbol_suffix_separator ();\n-\n   FILE* GTY ((skip)) ipa_clones_dump_file;\n \n   hash_set <const cgraph_node *> GTY ((skip)) cloned_nodes;"}, {"sha": "b85d52ca9b797487ef91b04fab21150b0215645d", "filename": "gcc/toplev.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019f36a648fd3f35e562eb7ddd3ff6393b30b4c7/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=019f36a648fd3f35e562eb7ddd3ff6393b30b4c7", "patch": "@@ -1170,7 +1170,7 @@ general_init (const char *argv0, bool init_signals)\n   /* Create the passes.  */\n   g->set_passes (new gcc::pass_manager (g));\n \n-  symtab = new (ggc_cleared_alloc <symbol_table> ()) symbol_table ();\n+  symtab = new (ggc_alloc <symbol_table> ()) symbol_table ();\n \n   statistics_early_init ();\n   debuginfo_early_init ();"}]}