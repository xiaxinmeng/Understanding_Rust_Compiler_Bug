{"sha": "942047f22f64013b9f481a6390a25c345b265d66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTQyMDQ3ZjIyZjY0MDEzYjlmNDgxYTYzOTBhMjVjMzQ1YjI2NWQ2Ng==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-07-29T09:52:04Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-07-29T09:52:04Z"}, "message": "c-ada-spec.c (dump_generic_ada_node): Take into account signedness for enumeral types.\n\n\t* c-ada-spec.c (dump_generic_ada_node): Take into account signedness\n\tfor enumeral types.\n\t(print_ada_declaration): Add missing guard for record types.\n\nFrom-SVN: r250714", "tree": {"sha": "b990e90ce911119dbcb4f4c59c39f88629ced153", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b990e90ce911119dbcb4f4c59c39f88629ced153"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/942047f22f64013b9f481a6390a25c345b265d66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/942047f22f64013b9f481a6390a25c345b265d66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/942047f22f64013b9f481a6390a25c345b265d66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/942047f22f64013b9f481a6390a25c345b265d66/comments", "author": null, "committer": null, "parents": [{"sha": "e071b7678195f4176938730e348503cddc2a87b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e071b7678195f4176938730e348503cddc2a87b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e071b7678195f4176938730e348503cddc2a87b4"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "88752a88c22fb50f29e194cc0e94fd4319af4480", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=942047f22f64013b9f481a6390a25c345b265d66", "patch": "@@ -1,3 +1,9 @@\n+2017-07-29  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-ada-spec.c (dump_generic_ada_node): Take into account signedness\n+\tfor enumeral types.\n+\t(print_ada_declaration): Add missing guard for record types.\n+\n 2017-07-27  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/45784"}, {"sha": "de549501440e2d5827187b13428e6d449668729e", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=942047f22f64013b9f481a6390a25c345b265d66", "patch": "@@ -2055,7 +2055,10 @@ dump_generic_ada_node (pretty_printer *buffer, tree node, tree type, int spc,\n \t    }\n \t  else\n \t    {\n-\t      pp_string (buffer, \"unsigned\");\n+\t      if (TYPE_UNSIGNED (node))\n+\t\tpp_string (buffer, \"unsigned\");\n+\t      else\n+\t\tpp_string (buffer, \"int\");\n \t      for (; value; value = TREE_CHAIN (value))\n \t\t{\n \t\t  pp_semicolon (buffer);\n@@ -3097,7 +3100,7 @@ print_ada_declaration (pretty_printer *buffer, tree t, tree type, int spc)\n \t      if (TYPE_NAME (TREE_TYPE (t)))\n \t\tdump_generic_ada_node\n \t\t  (buffer, TREE_TYPE (t), t, spc, false, true);\n-\t      else\n+\t      else if (type)\n \t\tdump_ada_double_name (buffer, type, t);\n \t    }\n \t  else"}, {"sha": "20ea9de7555edbfb801ecd6b32a1ec5669a3b5fc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=942047f22f64013b9f481a6390a25c345b265d66", "patch": "@@ -1,3 +1,7 @@\n+2017-07-29  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-c++-common/dump-ada-spec-7.c: New test.\n+\n 2017-07-29  Jakub Jelinek  <jakub@redhat.com>\n \n \t* g++.dg/debug/dwarf2/inline-ns-1.C: New test."}, {"sha": "515d259766275a0b80552ae58cec88e672a23146", "filename": "gcc/testsuite/c-c++-common/dump-ada-spec-7.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdump-ada-spec-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942047f22f64013b9f481a6390a25c345b265d66/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdump-ada-spec-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fdump-ada-spec-7.c?ref=942047f22f64013b9f481a6390a25c345b265d66", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\r\n+/* { dg-options \"-fdump-ada-spec\" } */\r\n+\r\n+enum E1 {\r\n+    A1 = -1L,\r\n+    A2 = 0,\r\n+    A3 = 1\r\n+};\r\n+\r\n+static enum {B1 = -1L, B2, B3} Obj1;\r\n+\r\n+static struct { int i; } Obj2;\r\n+\r\n+/* { dg-final { scan-ada-spec-not \"unsigned\" } } */\r\n+/* { dg-final { cleanup-ada-spec } } */\r"}]}