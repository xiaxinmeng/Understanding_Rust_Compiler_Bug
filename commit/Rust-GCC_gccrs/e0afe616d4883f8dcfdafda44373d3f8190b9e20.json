{"sha": "e0afe616d4883f8dcfdafda44373d3f8190b9e20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTBhZmU2MTZkNDg4M2Y4ZGNmZGFmZGE0NDM3M2QzZjgxOTBiOWUyMA==", "commit": {"author": {"name": "Martin v. L\u00f6wis", "email": "loewis@informatik.hu-berlin.de", "date": "1998-10-22T14:48:22Z"}, "committer": {"name": "Martin v. L\u00f6wis", "email": "loewis@gcc.gnu.org", "date": "1998-10-22T14:48:22Z"}, "message": "* init.c (build_new_1): Delay cleanup until end of full expression.\n\nFrom-SVN: r23223", "tree": {"sha": "398582feb23b0a4ebae05a74cb692d990e07bc76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/398582feb23b0a4ebae05a74cb692d990e07bc76"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0afe616d4883f8dcfdafda44373d3f8190b9e20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0afe616d4883f8dcfdafda44373d3f8190b9e20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0afe616d4883f8dcfdafda44373d3f8190b9e20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0afe616d4883f8dcfdafda44373d3f8190b9e20/comments", "author": null, "committer": null, "parents": [{"sha": "298978c9331b7601a24eeb5d46a56ee88740c9c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/298978c9331b7601a24eeb5d46a56ee88740c9c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/298978c9331b7601a24eeb5d46a56ee88740c9c2"}], "stats": {"total": 15, "additions": 4, "deletions": 11}, "files": [{"sha": "f2be60cb0c90a22f27081b199d346e2073346fe6", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0afe616d4883f8dcfdafda44373d3f8190b9e20/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0afe616d4883f8dcfdafda44373d3f8190b9e20/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e0afe616d4883f8dcfdafda44373d3f8190b9e20", "patch": "@@ -1,3 +1,7 @@\n+1998-10-22  Martin v. L\ufffdwis <loewis@informatik.hu-berlin.de>\n+\n+        * init.c (build_new_1): Delay cleanup until end of full expression.\n+\n 1998-10-21  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* typeck.c (build_component_ref): Use of a type here is an error."}, {"sha": "87c4a596f6413bdaeb5db870ee7615da54b8b2f9", "filename": "gcc/cp/init.c", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0afe616d4883f8dcfdafda44373d3f8190b9e20/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0afe616d4883f8dcfdafda44373d3f8190b9e20/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=e0afe616d4883f8dcfdafda44373d3f8190b9e20", "patch": "@@ -2444,9 +2444,6 @@ build_new_1 (exp)\n \n \t  if (cleanup)\n \t    {\n-#if 0\n-\t      /* Disable this until flow is fixed so that it doesn't\n-\t\t think the initialization of sentry is a dead write.  */\n \t      tree end, sentry, begin, buf, t = TREE_TYPE (rval);\n \n \t      begin = get_target_expr (boolean_true_node);\n@@ -2469,14 +2466,6 @@ build_new_1 (exp)\n \t      rval = build (COMPOUND_EXPR, t, begin,\n \t\t\t    build (COMPOUND_EXPR, t, rval,\n \t\t\t\t   build (COMPOUND_EXPR, t, end, buf)));\n-#else\n-\t      /* FIXME: this is a workaround for a crash due to overlapping\n-\t\t exception regions.  Cleanups shouldn't really happen here.  */\n-\t      rval = build1 (CLEANUP_POINT_EXPR, TREE_TYPE (rval), rval);\n-\n-\t      rval = build (TRY_CATCH_EXPR, TREE_TYPE (rval), rval, cleanup);\n-\t      rval = build (COMPOUND_EXPR, TREE_TYPE (rval), alloc_expr, rval);\n-#endif\n \t    }\n \t}\n     }"}]}