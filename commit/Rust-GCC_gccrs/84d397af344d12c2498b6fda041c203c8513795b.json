{"sha": "84d397af344d12c2498b6fda041c203c8513795b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRkMzk3YWYzNDRkMTJjMjQ5OGI2ZmRhMDQxYzIwM2M4NTEzNzk1Yg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-09-12T18:07:28Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-09-12T18:07:28Z"}, "message": "fortran-torture.exp (add-ieee-options): Replace ieee-options; do the uplevel thing and update additional_flags directly.\n\n        * lib/fortran-torture.exp (add-ieee-options): Replace ieee-options;\n        do the uplevel thing and update additional_flags directly.\n        * gfortran.fortran-torture/execute/intrinsic_fraction_exponent.x,\n        gfortran.fortran-torture/execute/intrinsic_nearest.x,\n        gfortran.fortran-torture/execute/intrinsic_set_exponent.x,\n        gfortran.fortran-torture/execute/nan_inf_fmt.x: Update to match.\n\nFrom-SVN: r87399", "tree": {"sha": "587668347b219c54a5418301f0247b10dc8eb826", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/587668347b219c54a5418301f0247b10dc8eb826"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84d397af344d12c2498b6fda041c203c8513795b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84d397af344d12c2498b6fda041c203c8513795b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84d397af344d12c2498b6fda041c203c8513795b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84d397af344d12c2498b6fda041c203c8513795b/comments", "author": null, "committer": null, "parents": [{"sha": "93330ea10a357abf2055c883935abf71102cbbec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93330ea10a357abf2055c883935abf71102cbbec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93330ea10a357abf2055c883935abf71102cbbec"}], "stats": {"total": 33, "additions": 20, "deletions": 13}, "files": [{"sha": "6e5781ed653c144a919641a6386e288309be6080", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=84d397af344d12c2498b6fda041c203c8513795b", "patch": "@@ -1,3 +1,12 @@\n+2004-09-12  Richard Henderson  <rth@redhat.com>\n+\n+\t* lib/fortran-torture.exp (add-ieee-options): Replace ieee-options;\n+\tdo the uplevel thing and update additional_flags directly.\n+\t* gfortran.fortran-torture/execute/intrinsic_fraction_exponent.x,\n+\tgfortran.fortran-torture/execute/intrinsic_nearest.x,\n+\tgfortran.fortran-torture/execute/intrinsic_set_exponent.x,\n+\tgfortran.fortran-torture/execute/nan_inf_fmt.x: Update to match.\n+\n 2004-09-11  Steven Bosscher  <stevenb@suse.de>\n \n \t* g++.dg/parse/break-in-for.C: Fix for -ansi -pedantic-errors."}, {"sha": "dad399dcb8d84cc7d63f3c5ed478abbdb248f0b4", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/intrinsic_fraction_exponent.x", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_fraction_exponent.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_fraction_exponent.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_fraction_exponent.x?ref=84d397af344d12c2498b6fda041c203c8513795b", "patch": "@@ -1,2 +1,2 @@\n-lappend additional_flags [ieee-options]\n+add-ieee-options\n return 0"}, {"sha": "dad399dcb8d84cc7d63f3c5ed478abbdb248f0b4", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/intrinsic_nearest.x", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_nearest.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_nearest.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_nearest.x?ref=84d397af344d12c2498b6fda041c203c8513795b", "patch": "@@ -1,2 +1,2 @@\n-lappend additional_flags [ieee-options]\n+add-ieee-options\n return 0"}, {"sha": "dad399dcb8d84cc7d63f3c5ed478abbdb248f0b4", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/intrinsic_set_exponent.x", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_set_exponent.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_set_exponent.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_set_exponent.x?ref=84d397af344d12c2498b6fda041c203c8513795b", "patch": "@@ -1,2 +1,2 @@\n-lappend additional_flags [ieee-options]\n+add-ieee-options\n return 0"}, {"sha": "dad399dcb8d84cc7d63f3c5ed478abbdb248f0b4", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/nan_inf_fmt.x", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fnan_inf_fmt.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fnan_inf_fmt.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fnan_inf_fmt.x?ref=84d397af344d12c2498b6fda041c203c8513795b", "patch": "@@ -1,2 +1,2 @@\n-lappend additional_flags [ieee-options]\n+add-ieee-options\n return 0"}, {"sha": "4483dd709cea30422085adaf7cffb1319e0b800c", "filename": "gcc/testsuite/lib/fortran-torture.exp", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84d397af344d12c2498b6fda041c203c8513795b/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ffortran-torture.exp?ref=84d397af344d12c2498b6fda041c203c8513795b", "patch": "@@ -346,20 +346,18 @@ proc fortran-torture { args } {\n }\n \n #\n-# ieee-options -- return options necessary for 100% ieee conformance.\n+# add-ieee-options -- add options necessary for 100% ieee conformance.\n #\n-proc ieee-options { } {\n+proc add-ieee-options { } {\n     # Ensure that excess precision does not cause problems.\n-    if [istarget \"i?86-*-*\"] then {\n-      return \"-ffloat-store\"\n+    if { [istarget \"i?86-*-*\"]\n+\t || [istarget \"m68k-*-*\"] } then {\n+      uplevel 1 lappend additional_flags \"-ffloat-store\"\n     }\n-    if [istarget \"m68k-*-*\"] then {\n-      return \"-ffloat-store\"\n-    }\n-                                                                                \n+\n     # Enable full IEEE compliance mode.\n     if { [istarget \"alpha*-*-*\"]\n          || [istarget \"sh*-*-*\"] } then {\n-      return \"-mieee\"\n+      uplevel 1 lappend additional_flags \"-mieee\"\n     }\n }"}]}