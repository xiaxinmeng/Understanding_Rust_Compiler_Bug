{"sha": "d29520088232b973624b0623763f0a9e307ef347", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI5NTIwMDg4MjMyYjk3MzYyNGIwNjIzNzYzZjBhOWUzMDdlZjM0Nw==", "commit": {"author": {"name": "Guenter Roeck", "email": "guenter@roeck-us.net", "date": "2006-09-11T17:05:15Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2006-09-11T17:05:15Z"}, "message": "re PR target/27287 (returning constant double)\n\n2006-09-11  Guenter Roeck  <guenter@roeck-us.net>\n            David Edelsohn  <edelsohn@gnu.org>\n\n        PR target/27287\n        * config/rs6000/spe.md (frob_df_di): Remove %H.\n        (frob_di_df): Remove %H.  Change evmergelo to mr.\n        (frob_di_df_2): Remove %H.  Change evldd to two loads.\n\nCo-Authored-By: David Edelsohn <edelsohn@gnu.org>\n\nFrom-SVN: r116850", "tree": {"sha": "54b7ed6d4f4b8e01fd0c7f174cecab5cd9ab019e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54b7ed6d4f4b8e01fd0c7f174cecab5cd9ab019e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d29520088232b973624b0623763f0a9e307ef347", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d29520088232b973624b0623763f0a9e307ef347", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d29520088232b973624b0623763f0a9e307ef347", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d29520088232b973624b0623763f0a9e307ef347/comments", "author": null, "committer": null, "parents": [{"sha": "0c387be360e6ac258fc9293db42890d4b96ee276", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c387be360e6ac258fc9293db42890d4b96ee276", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c387be360e6ac258fc9293db42890d4b96ee276"}], "stats": {"total": 39, "additions": 32, "deletions": 7}, "files": [{"sha": "22e113f50142c553fa478af527a50eca306e4066", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d29520088232b973624b0623763f0a9e307ef347/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d29520088232b973624b0623763f0a9e307ef347/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d29520088232b973624b0623763f0a9e307ef347", "patch": "@@ -1,3 +1,11 @@\n+2006-09-11  Guenter Roeck  <guenter@roeck-us.net>\n+\t    David Edelsohn  <edelsohn@gnu.org>\n+\n+\tPR target/27287\n+\t* config/rs6000/spe.md (frob_df_di): Remove %H.\n+\t(frob_di_df): Remove %H.  Change evmergelo to mr.\n+\t(frob_di_df_2): Remove %H.  Change evldd to two loads.\n+\n 2006-09-11  Hideki Iwamoto  <h-iwamoto@kit.hi-ho.ne.jp>\n \n \t* doc/cpp.texi: Fix names of charset options."}, {"sha": "1ac1a8492c17cb8f20ae05f8aa77eb6a4a52f670", "filename": "gcc/config/rs6000/spe.md", "status": "modified", "additions": 24, "deletions": 7, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d29520088232b973624b0623763f0a9e307ef347/gcc%2Fconfig%2Frs6000%2Fspe.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d29520088232b973624b0623763f0a9e307ef347/gcc%2Fconfig%2Frs6000%2Fspe.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fspe.md?ref=d29520088232b973624b0623763f0a9e307ef347", "patch": "@@ -2200,24 +2200,41 @@\n         (subreg:DF (match_operand:DI 1 \"input_operand\" \"r,m\") 0))]\n   \"TARGET_E500_DOUBLE\"\n   \"@\n-   evmergelo %0,%H1,%L1\n+   evmergelo %0,%1,%L1\n    evldd%X1 %0,%y1\")\n \n (define_insn \"*frob_di_df\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=&r\")\n         (subreg:DI (match_operand:DF 1 \"input_operand\" \"r\") 0))]\n-  \"TARGET_E500_DOUBLE\" /*one of these can be an mr */\n-  \"evmergehi %H0,%1,%1\\;evmergelo %L0,%1,%1\"\n+  \"TARGET_E500_DOUBLE\"\n+  \"evmergehi %0,%1,%1\\;mr %L0,%1\"\n   [(set_attr \"length\" \"8\")])\n \n (define_insn \"*frob_di_df_2\"\n   [(set (subreg:DF (match_operand:DI 0 \"register_operand\" \"=&r,r\") 0)\n \t(match_operand:DF 1 \"input_operand\" \"r,m\"))]\n   \"TARGET_E500_DOUBLE\"\n-  \"@\n-   evmergehi %H0,%1,%1\\;evmergelo %L0,%1,%1\n-   evldd%X1 %0,%y1\"\n-  [(set_attr \"length\" \"8,4\")])\n+  \"*\n+{\n+  switch (which_alternative)\n+    {\n+    default: \n+      gcc_unreachable ();\n+    case 0:\n+      return \\\"evmergehi %0,%1,%1\\;mr %L0,%1\\\";\n+    case 1:\n+      /* If the low-address word is used in the address, we must load\n+\tit last.  Otherwise, load it first.  Note that we cannot have\n+\tauto-increment in that case since the address register is\n+\tknown to be dead.  */\n+      if (refers_to_regno_p (REGNO (operands[0]), REGNO (operands[0]) + 1,\n+\t\t\t     operands[1], 0))\n+\treturn \\\"{l|lwz} %L0,%L1\\;{l|lwz} %0,%1\\\";\n+      else\n+        return \\\"{l%U1%X1|lwz%U1%X1} %0,%1\\;{l|lwz} %L0,%L1\\\";\n+    }\n+}\"\n+  [(set_attr \"length\" \"8,8\")])\n \n (define_insn \"*mov_sidf_e500_subreg0\"\n   [(set (subreg:SI (match_operand:DF 0 \"register_operand\" \"+r\") 0)"}]}