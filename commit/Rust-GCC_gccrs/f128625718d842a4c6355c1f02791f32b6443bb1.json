{"sha": "f128625718d842a4c6355c1f02791f32b6443bb1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEyODYyNTcxOGQ4NDJhNGM2MzU1YzFmMDI3OTFmMzJiNjQ0M2JiMQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-07-16T07:53:47Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-07-16T07:53:47Z"}, "message": "mips.c (mips_zero_if_equal): Only use XORs if the second operand is an uns_arith_operand...\n\n\t* config/mips/mips.c (mips_zero_if_equal): Only use XORs if the second\n\toperand is an uns_arith_operand; use subtraction otherwise.\n\t* config/mips/mips.md (cmpsi, cmpdi): Allow any nonmemory_operand,\n\tnot just arith_operands.\n\nFrom-SVN: r84809", "tree": {"sha": "08a150079f4dff10c6ceb2b77fe6f36df831bf1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08a150079f4dff10c6ceb2b77fe6f36df831bf1e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f128625718d842a4c6355c1f02791f32b6443bb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f128625718d842a4c6355c1f02791f32b6443bb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f128625718d842a4c6355c1f02791f32b6443bb1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f128625718d842a4c6355c1f02791f32b6443bb1/comments", "author": null, "committer": null, "parents": [{"sha": "a012718f1d0470cd1a19b4c8c5200de06ba47b0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a012718f1d0470cd1a19b4c8c5200de06ba47b0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a012718f1d0470cd1a19b4c8c5200de06ba47b0a"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "52c646fe2efd4e7bbd4bf562499c7cef764443e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128625718d842a4c6355c1f02791f32b6443bb1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128625718d842a4c6355c1f02791f32b6443bb1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f128625718d842a4c6355c1f02791f32b6443bb1", "patch": "@@ -1,3 +1,10 @@\n+2004-07-16  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/mips.c (mips_zero_if_equal): Only use XORs if the second\n+\toperand is an uns_arith_operand; use subtraction otherwise.\n+\t* config/mips/mips.md (cmpsi, cmpdi): Allow any nonmemory_operand,\n+\tnot just arith_operands.\n+\n 2004-07-16  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mips/mips-protos.h (gen_int_relational): Delete."}, {"sha": "489016af4649f91908843583d14fef33b1617d0d", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128625718d842a4c6355c1f02791f32b6443bb1/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128625718d842a4c6355c1f02791f32b6443bb1/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=f128625718d842a4c6355c1f02791f32b6443bb1", "patch": "@@ -2776,7 +2776,11 @@ mips_zero_if_equal (rtx cmp0, rtx cmp1)\n   if (cmp1 == const0_rtx)\n     return cmp0;\n \n-  return expand_binop (GET_MODE (cmp0), xor_optab,\n+  if (uns_arith_operand (cmp1, VOIDmode))\n+    return expand_binop (GET_MODE (cmp0), xor_optab,\n+\t\t\t cmp0, cmp1, 0, 0, OPTAB_DIRECT);\n+\n+  return expand_binop (GET_MODE (cmp0), sub_optab,\n \t\t       cmp0, cmp1, 0, 0, OPTAB_DIRECT);\n }\n "}, {"sha": "abb5d442949efa042678fcd60f0a8cefabd224e1", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128625718d842a4c6355c1f02791f32b6443bb1/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128625718d842a4c6355c1f02791f32b6443bb1/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=f128625718d842a4c6355c1f02791f32b6443bb1", "patch": "@@ -5472,7 +5472,7 @@ dsrl\\t%3,%3,1\\n\\\n (define_expand \"cmpsi\"\n   [(set (cc0)\n \t(compare:CC (match_operand:SI 0 \"register_operand\")\n-\t\t    (match_operand:SI 1 \"arith_operand\")))]\n+\t\t    (match_operand:SI 1 \"nonmemory_operand\")))]\n   \"\"\n {\n   cmp_operands[0] = operands[0];\n@@ -5483,7 +5483,7 @@ dsrl\\t%3,%3,1\\n\\\n (define_expand \"cmpdi\"\n   [(set (cc0)\n \t(compare:CC (match_operand:DI 0 \"register_operand\")\n-\t\t    (match_operand:DI 1 \"arith_operand\")))]\n+\t\t    (match_operand:DI 1 \"nonmemory_operand\")))]\n   \"TARGET_64BIT\"\n {\n   cmp_operands[0] = operands[0];"}]}