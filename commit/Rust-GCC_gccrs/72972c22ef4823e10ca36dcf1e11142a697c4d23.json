{"sha": "72972c22ef4823e10ca36dcf1e11142a697c4d23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzI5NzJjMjJlZjQ4MjNlMTBjYTM2ZGNmMWUxMTE0MmE2OTdjNGQyMw==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2014-06-26T12:55:40Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2014-06-26T12:55:40Z"}, "message": "ipa-prop.c (ipa_impossible_devirt_target): No longer static, renamed to ipa_impossible_devirt_target.\n\n2014-06-26  Martin Jambor  <mjambor@suse.cz>\n\n\t* ipa-prop.c (ipa_impossible_devirt_target): No longer static,\n\trenamed to ipa_impossible_devirt_target.  Fix typo.\n\t* ipa-prop.h (ipa_impossible_devirt_target): Declare.\n\t* ipa-cp.c (ipa_get_indirect_edge_target_1): Use\n\tipa_impossible_devirt_target.\n\ntestsuite/\n\t* g++.dg/ipa/pr60600.C: Fix typo.\n\t* g++.dg/ipa/devirt-25.C: Likewise.\n\t* g++.dg/ipa/pr61540.C: Likewise.\n\nFrom-SVN: r212028", "tree": {"sha": "b6021efcdb9e13ed7be274aee245255765cd5a1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6021efcdb9e13ed7be274aee245255765cd5a1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72972c22ef4823e10ca36dcf1e11142a697c4d23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72972c22ef4823e10ca36dcf1e11142a697c4d23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72972c22ef4823e10ca36dcf1e11142a697c4d23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72972c22ef4823e10ca36dcf1e11142a697c4d23/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "906314419f65152482646b66e38d1b3a0ace3762", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/906314419f65152482646b66e38d1b3a0ace3762", "html_url": "https://github.com/Rust-GCC/gccrs/commit/906314419f65152482646b66e38d1b3a0ace3762"}], "stats": {"total": 52, "additions": 25, "deletions": 27}, "files": [{"sha": "31712fa4ce53e086606421c72ac36dc69076982c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=72972c22ef4823e10ca36dcf1e11142a697c4d23", "patch": "@@ -1,3 +1,11 @@\n+2014-06-26  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* ipa-prop.c (ipa_impossible_devirt_target): No longer static,\n+\trenamed to ipa_impossible_devirt_target.  Fix typo.\n+\t* ipa-prop.h (ipa_impossible_devirt_target): Declare.\n+\t* ipa-cp.c (ipa_get_indirect_edge_target_1): Use\n+\tipa_impossible_devirt_target.\n+\n 2014-06-26  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/61607"}, {"sha": "bc0ab56e3e578e32a592082e5acf3780814dfbd0", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 3, "deletions": 19, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=72972c22ef4823e10ca36dcf1e11142a697c4d23", "patch": "@@ -1587,15 +1587,7 @@ ipa_get_indirect_edge_target_1 (struct cgraph_edge *ie,\n \t\t   && DECL_FUNCTION_CODE (target) == BUILT_IN_UNREACHABLE)\n \t\t  || !possible_polymorphic_call_target_p\n \t\t       (ie, cgraph_get_node (target)))\n-\t\t{\n-\t\t  if (dump_file)\n-\t\t    fprintf (dump_file,\n-\t\t\t     \"Type inconsident devirtualization: %s/%i->%s\\n\",\n-\t\t\t     ie->caller->name (), ie->caller->order,\n-\t\t\t     IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (target)));\n-\t\t  target = builtin_decl_implicit (BUILT_IN_UNREACHABLE);\n-\t\t  cgraph_get_create_node (target);\n-\t\t}\n+\t\ttarget = ipa_impossible_devirt_target (ie, target);\n \t      return target;\n \t    }\n \t}\n@@ -1629,7 +1621,7 @@ ipa_get_indirect_edge_target_1 (struct cgraph_edge *ie,\n       if (targets.length () == 1)\n \ttarget = targets[0]->decl;\n       else\n-\ttarget = builtin_decl_implicit (BUILT_IN_UNREACHABLE);\n+\ttarget = ipa_impossible_devirt_target (ie, NULL_TREE);\n     }\n   else\n     {\n@@ -1643,15 +1635,7 @@ ipa_get_indirect_edge_target_1 (struct cgraph_edge *ie,\n \n   if (target && !possible_polymorphic_call_target_p (ie,\n \t\t\t\t\t\t     cgraph_get_node (target)))\n-    {\n-      if (dump_file)\n-\tfprintf (dump_file,\n-\t\t \"Type inconsident devirtualization: %s/%i->%s\\n\",\n-\t\t ie->caller->name (), ie->caller->order,\n-\t\t IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (target)));\n-      target = builtin_decl_implicit (BUILT_IN_UNREACHABLE);\n-      cgraph_get_create_node (target);\n-    }\n+    target = ipa_impossible_devirt_target (ie, target);\n \n   return target;\n }"}, {"sha": "1e10b53b00fbd9d6080d3e946c9565d7df601bbb", "filename": "gcc/ipa-prop.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Fipa-prop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Fipa-prop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-prop.c?ref=72972c22ef4823e10ca36dcf1e11142a697c4d23", "patch": "@@ -2915,14 +2915,14 @@ try_make_edge_direct_simple_call (struct cgraph_edge *ie,\n /* Return the target to be used in cases of impossible devirtualization.  IE\n    and target (the latter can be NULL) are dumped when dumping is enabled.  */\n \n-static tree\n-impossible_devirt_target (struct cgraph_edge *ie, tree target)\n+tree\n+ipa_impossible_devirt_target (struct cgraph_edge *ie, tree target)\n {\n   if (dump_file)\n     {\n       if (target)\n \tfprintf (dump_file,\n-\t\t \"Type inconsident devirtualization: %s/%i->%s\\n\",\n+\t\t \"Type inconsistent devirtualization: %s/%i->%s\\n\",\n \t\t ie->caller->name (), ie->caller->order,\n \t\t IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (target)));\n       else\n@@ -2969,7 +2969,7 @@ try_make_edge_direct_virtual_call (struct cgraph_edge *ie,\n \t\t   && DECL_FUNCTION_CODE (target) == BUILT_IN_UNREACHABLE)\n \t\t  || !possible_polymorphic_call_target_p\n \t\t       (ie, cgraph_get_node (target)))\n-\t\ttarget = impossible_devirt_target (ie, target);\n+\t\ttarget = ipa_impossible_devirt_target (ie, target);\n \t      return ipa_make_edge_direct_to_target (ie, target);\n \t    }\n \t}\n@@ -2999,7 +2999,7 @@ try_make_edge_direct_virtual_call (struct cgraph_edge *ie,\n       if (targets.length () == 1)\n \ttarget = targets[0]->decl;\n       else\n-\ttarget = impossible_devirt_target (ie, NULL_TREE);\n+\ttarget = ipa_impossible_devirt_target (ie, NULL_TREE);\n     }\n   else\n     {\n@@ -3015,7 +3015,7 @@ try_make_edge_direct_virtual_call (struct cgraph_edge *ie,\n   if (target)\n     {\n       if (!possible_polymorphic_call_target_p (ie, cgraph_get_node (target)))\n-\ttarget = impossible_devirt_target (ie, target);\n+\ttarget = ipa_impossible_devirt_target (ie, target);\n       return ipa_make_edge_direct_to_target (ie, target);\n     }\n   else"}, {"sha": "8886e937438c8d574f831309b8d01e3b664d5897", "filename": "gcc/ipa-prop.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Fipa-prop.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Fipa-prop.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-prop.h?ref=72972c22ef4823e10ca36dcf1e11142a697c4d23", "patch": "@@ -586,6 +586,7 @@ tree ipa_get_indirect_edge_target (struct cgraph_edge *ie,\n struct cgraph_edge *ipa_make_edge_direct_to_target (struct cgraph_edge *, tree);\n tree ipa_binfo_from_known_type_jfunc (struct ipa_jump_func *);\n tree ipa_intraprocedural_devirtualization (gimple);\n+tree ipa_impossible_devirt_target (struct cgraph_edge *, tree);\n \n /* Functions related to both.  */\n void ipa_analyze_node (struct cgraph_node *);"}, {"sha": "ff3d0b003b21fa7d3ad2d15fd83dced5b7b5d5fe", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=72972c22ef4823e10ca36dcf1e11142a697c4d23", "patch": "@@ -1,3 +1,8 @@\n+2014-06-26  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* g++.dg/ipa/pr60600.C: Fix typo.\n+\t* g++.dg/ipa/devirt-25.C: Likewise.\n+\n 2014-06-26  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/61607"}, {"sha": "5a8a04faf19a0c37f62ee6f5814d53c9c1f256fe", "filename": "gcc/testsuite/g++.dg/ipa/devirt-25.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fdevirt-25.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fdevirt-25.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fdevirt-25.C?ref=72972c22ef4823e10ca36dcf1e11142a697c4d23", "patch": "@@ -23,5 +23,5 @@ void dpr_run(ebs_Object& objectA) {\n   dpr_Job jobL;\n   dpr_run(jobL);\n }\n-/* { dg-final { scan-ipa-dump \"Type inconsident devirtualization\" \"cp\"  } } */\n+/* { dg-final { scan-ipa-dump \"Type inconsistent devirtualization\" \"cp\"  } } */\n /* { dg-final { cleanup-ipa-dump \"cp\" } } */"}, {"sha": "07539319307c8145b7368a8443d538d5ee8fc4b8", "filename": "gcc/testsuite/g++.dg/ipa/pr60600.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr60600.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72972c22ef4823e10ca36dcf1e11142a697c4d23/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr60600.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr60600.C?ref=72972c22ef4823e10ca36dcf1e11142a697c4d23", "patch": "@@ -30,5 +30,5 @@ void test(top& t)\n     test(d);\n }\n \n-/* { dg-final { scan-ipa-dump \"Type inconsident devirtualization\" \"cp\" } } */\n+/* { dg-final { scan-ipa-dump \"Type inconsistent devirtualization\" \"cp\" } } */\n /* { dg-final { cleanup-ipa-dump \"cp\" } } */"}]}