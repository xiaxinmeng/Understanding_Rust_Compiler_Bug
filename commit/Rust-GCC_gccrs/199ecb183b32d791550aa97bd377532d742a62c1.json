{"sha": "199ecb183b32d791550aa97bd377532d742a62c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTk5ZWNiMTgzYjMyZDc5MTU1MGFhOTdiZDM3NzUzMmQ3NDJhNjJjMQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-02-06T21:53:59Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-02-06T21:53:59Z"}, "message": "verify.cc (type::isnull): New method.\n\n\t* verify.cc (type::isnull): New method.\n\t(require_array_type): Handle case where array is null.\n\t(verify_instructions_0) [op_arraylength]: Likewise.\n\nFrom-SVN: r49555", "tree": {"sha": "3806bc869225f6b52ce0fdf978c60ab87dbb1a5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3806bc869225f6b52ce0fdf978c60ab87dbb1a5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/199ecb183b32d791550aa97bd377532d742a62c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/199ecb183b32d791550aa97bd377532d742a62c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/199ecb183b32d791550aa97bd377532d742a62c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/199ecb183b32d791550aa97bd377532d742a62c1/comments", "author": null, "committer": null, "parents": [{"sha": "5e3f4df7feb38b41060ace60ed7701d9fec9d603", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e3f4df7feb38b41060ace60ed7701d9fec9d603", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e3f4df7feb38b41060ace60ed7701d9fec9d603"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "4823eccaa2be5153ad64ba0c54159989bc997a42", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199ecb183b32d791550aa97bd377532d742a62c1/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199ecb183b32d791550aa97bd377532d742a62c1/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=199ecb183b32d791550aa97bd377532d742a62c1", "patch": "@@ -1,3 +1,9 @@\n+2002-02-06  Tom Tromey  <tromey@redhat.com>\n+\n+\t* verify.cc (type::isnull): New method.\n+\t(require_array_type): Handle case where array is null.\n+\t(verify_instructions_0) [op_arraylength]: Likewise.\n+\n 2002-02-05  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n \n \t* configure.in: Set up PLATFORMOBJS not PLATFORM_SPECIFIC_SOURCES."}, {"sha": "46cee1533ce690a40655f65f5801a70324985f14", "filename": "libjava/verify.cc", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199ecb183b32d791550aa97bd377532d742a62c1/libjava%2Fverify.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199ecb183b32d791550aa97bd377532d742a62c1/libjava%2Fverify.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fverify.cc?ref=199ecb183b32d791550aa97bd377532d742a62c1", "patch": "@@ -522,6 +522,11 @@ class _Jv_BytecodeVerifier\n       return false;\n     }\n \n+    bool isnull () const\n+    {\n+      return key == null_type;\n+    }\n+\n     bool isinterface (_Jv_BytecodeVerifier *verifier)\n     {\n       resolve (verifier);\n@@ -1161,6 +1166,10 @@ class _Jv_BytecodeVerifier\n   // compatible with type ELEMENT.  Returns the actual element type.\n   type require_array_type (type array, type element)\n   {\n+    // An odd case.  Here we just pretend that everything went ok.\n+    if (array.isnull ())\n+      return element;\n+\n     if (! array.isarray ())\n       verify_fail (\"array required\");\n \n@@ -2796,7 +2805,7 @@ class _Jv_BytecodeVerifier\n \t  case op_arraylength:\n \t    {\n \t      type t = pop_type (reference_type);\n-\t      if (! t.isarray ())\n+\t      if (! t.isarray () && ! t.isnull ())\n \t\tverify_fail (\"array type expected\");\n \t      push_type (int_type);\n \t    }"}]}