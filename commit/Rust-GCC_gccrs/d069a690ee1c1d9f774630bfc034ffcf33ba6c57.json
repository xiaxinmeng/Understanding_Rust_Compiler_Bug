{"sha": "d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDA2OWE2OTBlZTFjMWQ5Zjc3NDYzMGJmYzAzNGZmY2YzM2JhNmM1Nw==", "commit": {"author": {"name": "Chip Salzenberg", "email": "chip@pobox.com", "date": "2012-07-20T09:48:57Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-07-20T09:48:57Z"}, "message": "re PR libstdc++/54025 (atomic<chrono::duration> won't compile: chrono::duration::duration() is not C++11 compliant)\n\n2012-07-20  Chip Salzenberg  <chip@pobox.com>\n\t    Jonathan Wakely  <jwakely.gcc@gmail.com>\n\n\tPR libstdc++/54025\n\t* include/std/chrono (duration<>::duration): Fix per C++11.\n\t* testsuite/20_util/duration/cons/54025.cc: New.\n\t* testsuite/20_util/duration/cons/constexpr.cc: Adjust.\n\nCo-Authored-By: Jonathan Wakely <jwakely.gcc@gmail.com>\n\nFrom-SVN: r189711", "tree": {"sha": "ac44e95254f4a095c6424a7c1af5c3c8e9324a3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac44e95254f4a095c6424a7c1af5c3c8e9324a3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/comments", "author": null, "committer": null, "parents": [{"sha": "d1870ff1bc02f12a28d02379cc1d484f16de0a43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1870ff1bc02f12a28d02379cc1d484f16de0a43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1870ff1bc02f12a28d02379cc1d484f16de0a43"}], "stats": {"total": 44, "additions": 41, "deletions": 3}, "files": [{"sha": "7c78a82af6b2e1d8097fdeba95c25a5ecdab75a0", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "patch": "@@ -1,3 +1,11 @@\n+2012-07-20  Chip Salzenberg  <chip@pobox.com>\n+\t    Jonathan Wakely  <jwakely.gcc@gmail.com>\n+\n+\tPR libstdc++/54025\n+\t* include/std/chrono (duration<>::duration): Fix per C++11.\n+\t* testsuite/20_util/duration/cons/54025.cc: New.\n+\t* testsuite/20_util/duration/cons/constexpr.cc: Adjust.\n+\n 2012-07-20  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* testsuite/30_threads/thread/adl.cc: Add missing dg-requires."}, {"sha": "9ff8846587be0dff3ad2d63c667de1749276608b", "filename": "libstdc++-v3/include/std/chrono", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fchrono", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fchrono", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fchrono?ref=d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "patch": "@@ -228,7 +228,7 @@ _GLIBCXX_END_NAMESPACE_VERSION\n \tstatic_assert(_Period::num > 0, \"period must be positive\");\n \n \t// 20.8.3.1 construction / copy / destroy\n-\tconstexpr duration() : __r() { }\n+\tconstexpr duration() = default;\n \n \tconstexpr duration(const duration&) = default;\n "}, {"sha": "3614594da66c619b77113bdd1bd1aefc96532cc5", "filename": "libstdc++-v3/testsuite/20_util/duration/cons/54025.cc", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2F54025.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2F54025.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2F54025.cc?ref=d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "patch": "@@ -0,0 +1,25 @@\n+// { dg-do compile }\n+// { dg-options \"-std=gnu++11\" }\n+// { dg-require-cstdint \"\" }\n+\n+// Copyright (C) 2012 Free Software Foundation\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+#include <atomic>\n+#include <chrono>\n+\n+std::atomic<std::chrono::duration<long, std::micro>> dur;"}, {"sha": "8f063eacd943c7453d35786789b0efe11e26f089", "filename": "libstdc++-v3/testsuite/20_util/duration/cons/constexpr.cc", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2Fconstexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d069a690ee1c1d9f774630bfc034ffcf33ba6c57/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2Fconstexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2Fconstexpr.cc?ref=d069a690ee1c1d9f774630bfc034ffcf33ba6c57", "patch": "@@ -1,7 +1,7 @@\n // { dg-do compile }\n // { dg-options \"-std=gnu++0x\" }\n \n-// Copyright (C) 2010 Free Software Foundation, Inc.\n+// Copyright (C) 2010, 2011, 2012 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -24,7 +24,12 @@\n int main()\n {\n   __gnu_test::constexpr_default_constructible test1;\n-  test1.operator()<std::chrono::seconds>();\n+  struct Seconds\n+  {\n+    constexpr Seconds() = default;\n+    std::chrono::seconds s{};\n+  };\n+  test1.operator()<std::chrono::duration<Seconds>>();\n \n   __gnu_test::constexpr_single_value_constructible test2;\n   test2.operator()<std::chrono::seconds, std::chrono::seconds>();"}]}