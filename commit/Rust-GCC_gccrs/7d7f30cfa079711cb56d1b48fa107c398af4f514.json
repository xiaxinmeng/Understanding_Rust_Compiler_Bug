{"sha": "7d7f30cfa079711cb56d1b48fa107c398af4f514", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Q3ZjMwY2ZhMDc5NzExY2I1NmQxYjQ4ZmExMDdjMzk4YWY0ZjUxNA==", "commit": {"author": {"name": "Bruce Korb", "email": "bkorb@gnu.org", "date": "2000-04-25T23:03:49Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "2000-04-25T23:03:49Z"}, "message": "use install-bin and install-sh in fixinc's makefile\n\nFrom-SVN: r33423", "tree": {"sha": "8b1e5a6026412940944c8dd35c21e5872242c9fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b1e5a6026412940944c8dd35c21e5872242c9fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d7f30cfa079711cb56d1b48fa107c398af4f514", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d7f30cfa079711cb56d1b48fa107c398af4f514", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d7f30cfa079711cb56d1b48fa107c398af4f514", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d7f30cfa079711cb56d1b48fa107c398af4f514/comments", "author": {"login": "brkorb", "id": 1242936, "node_id": "MDQ6VXNlcjEyNDI5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1242936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brkorb", "html_url": "https://github.com/brkorb", "followers_url": "https://api.github.com/users/brkorb/followers", "following_url": "https://api.github.com/users/brkorb/following{/other_user}", "gists_url": "https://api.github.com/users/brkorb/gists{/gist_id}", "starred_url": "https://api.github.com/users/brkorb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brkorb/subscriptions", "organizations_url": "https://api.github.com/users/brkorb/orgs", "repos_url": "https://api.github.com/users/brkorb/repos", "events_url": "https://api.github.com/users/brkorb/events{/privacy}", "received_events_url": "https://api.github.com/users/brkorb/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "932207025a862cbea7b863894615efe64cc8d471", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/932207025a862cbea7b863894615efe64cc8d471", "html_url": "https://github.com/Rust-GCC/gccrs/commit/932207025a862cbea7b863894615efe64cc8d471"}], "stats": {"total": 91, "additions": 47, "deletions": 44}, "files": [{"sha": "89d3dd43f593972dd24037e3b92ab22dcd562c30", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d7f30cfa079711cb56d1b48fa107c398af4f514/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d7f30cfa079711cb56d1b48fa107c398af4f514/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7d7f30cfa079711cb56d1b48fa107c398af4f514", "patch": "@@ -1,3 +1,10 @@\n+2000-04-25  Bruce Korb  <bkorb@gnu.org>\n+\n+\t* fixinc/Makefile.in: make the removal of old programs more\n+\trobust\n+\t* fixinc/mkfixinc.sh: use the two new targets in the Makefile:\n+\tinstall-bin and install-sh\n+\n 2000-04-25  Nick Clifton  <nickc@cygnus.com>\n \n \t* integrate.c (FUNCTION_ATTRIBUTE_INLINABLE_P): If not"}, {"sha": "31c1964a57482b09069f384e7abd8760f729466c", "filename": "gcc/fixinc/Makefile.in", "status": "modified", "additions": 36, "deletions": 27, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d7f30cfa079711cb56d1b48fa107c398af4f514/gcc%2Ffixinc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d7f30cfa079711cb56d1b48fa107c398af4f514/gcc%2Ffixinc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2FMakefile.in?ref=7d7f30cfa079711cb56d1b48fa107c398af4f514", "patch": "@@ -96,14 +96,20 @@ procopen.o : procopen.c server.h\n fixlib.o: machname.h\n \n fixincl.x: fixincl.tpl inclhack.def\n-\tcd $(srcdir) ; ./genfixes $@\n+\tcd $(srcdir) ; $(SHELL) ./genfixes $@\n \n inclhack.sh: inclhack.def inclhack.tpl hackshell.tpl\n-\tcd $(srcdir) ; ./genfixes $@\n+\tcd $(srcdir) ; $(SHELL) ./genfixes $@\n \n # fixinc.sh, unlike the other two, has _no_ dependency on the .def file.\n fixincl.sh: inclhack.tpl\n-\tcd $(srcdir) ; ./genfixes $@\n+\tcd $(srcdir) ; $(SHELL) ./genfixes $@\n+\n+#  This invocation of genfixes is done from the build dir,\n+#  not the source dir (as above)\n+#\n+machname.h: ../specs\n+\t$(SHELL) $(srcdir)/genfixes $@\n \n clean:\n \trm -f *.o $(TARGETS) fixincl.x machname.h\n@@ -113,30 +119,33 @@ clean:\n #  \"inclhack.sh\" script.  Otherwise, we install that program\n #  plus the wrapper script, \"fixincl.sh\".\n #\n-install: $(TARGETS)\n-\t@rm -f ../fixinc.sh ; \\\n-\tif ( ./fixincl -v > /dev/null 2>&1 ) ; then \\\n-\t\techo cp fixincl.sh ../fixinc.sh ; \\\n-\t\tif [ -f ./fixincl.sh ] ; \\\n-\t\tthen cp fixincl.sh ../fixinc.sh ; \\\n-\t\telse cp $(srcdir)/fixincl.sh ../fixinc.sh ; fi ; \\\n-\t\tchmod 555 ../fixinc.sh ; \\\n-\t\trm -f ../fixincl ; \\\n-\t\techo cp fixincl .. ; \\\n-\t\tcp fixincl .. ; \\\n-\t\tchmod 555 ../fixincl ; \\\n-\telse \\\n-\t\techo Could not install binary fixincludes.  ; \\\n-\t\techo Installing shell script instead. ; \\\n-\t\techo cp inclhack.sh ../fixinc.sh ; \\\n-\t\tif [ -f ./inclhack.sh ] ; \\\n-\t\tthen cp inclhack.sh ../fixinc.sh ; \\\n-\t\telse cp $(srcdir)/inclhack.sh ../fixinc.sh ; fi ; \\\n-\tfi\n+install-bin: fixincl fixincl.sh\n+\t@if [ -f ../fixincl ] ; then rm -f ../fixincl || \\\n+\t    mv -f ../fixincl ../fixincl.$$ || exit 1 ; fi\n+\t@if [ -f ../fixinc.sh ] ; then rm -f ../fixinc.sh || \\\n+\t    mv -f ../fixinc.sh ../fixinc.sh.$$ || exit 1 ; fi\n+\t./fixincl -v\n+\tcp fixincl ..\n+\t@if [ -f ./fixincl.sh ] ; \\\n+\tthen echo cp ./fixincl.sh ../fixinc.sh ; \\\n+\t\tcp ./fixincl.sh ../fixinc.sh ; \\\n+\telse echo cp $(srcdir)/fixincl.sh ../fixinc.sh ; \\\n+\t\tcp $(srcdir)/fixincl.sh ../fixinc.sh ; fi\n+\tchmod 755 ../fixinc.sh ../fixincl\n+\n+install-sh: fixfixes fixtests inclhack.sh\n+\t@if [ -f ../fixinc.sh ] ; then rm -f ../fixinc.sh || \\\n+\t    mv -f ../fixinc.sh ../fixinc.sh.$$ || exit 1 ; fi\n+\techo Could not install binary fixincludes.  ; \\\n+\techo Installing shell script instead.\n+\t@if [ -f ./fixincl.sh ] ; \\\n+\tthen echo cp ./inclhack.sh ../fixinc.sh ; \\\n+\t\tcp ./inclhack.sh ../fixinc.sh ; \\\n+\telse echo cp $(srcdir)/inclhack.sh ../fixinc.sh ; \\\n+\t\tcp $(srcdir)/inclhack.sh ../fixinc.sh ; fi\n+\tchmod 755 ../fixinc.sh\n \n Makefile: Makefile.in ../config.status\n \tcd .. \\\n-\t  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status\n-\n-machname.h: ../specs\n-\t$(SHELL) $(srcdir)/genfixes $@\n+\t  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= \\\n+\t  $(SHELL) ./config.status"}, {"sha": "ead6b151b0adb43ac51c5e19abf799816343cea3", "filename": "gcc/fixinc/mkfixinc.sh", "status": "modified", "additions": 4, "deletions": 17, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d7f30cfa079711cb56d1b48fa107c398af4f514/gcc%2Ffixinc%2Fmkfixinc.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d7f30cfa079711cb56d1b48fa107c398af4f514/gcc%2Ffixinc%2Fmkfixinc.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fmkfixinc.sh?ref=7d7f30cfa079711cb56d1b48fa107c398af4f514", "patch": "@@ -117,24 +117,11 @@ fi\n \n #  OK.  We gotta make the thing.\n #\n-echo $MAKE SHELL=\\\"$SHELL\\\" install\n+echo $MAKE SHELL=\\\"$SHELL\\\" install-bin\n \n #  make and install either the binary or the default script\n #\n-$MAKE SHELL=\"$SHELL\" install && chmod 755 ${target} && exit 0\n+$MAKE SHELL=\"$SHELL\" install-bin && exit 0\n \n-#  Where is our inclhack script?  That is the backup\n-#  in case we are unable to make a working binary.\n-#\n-if test -f ./inclhack.sh\n-then\n-    INCLHACK=./inclhack.sh\n-else\n-    INCLHACK=${srcdir}/inclhack.sh\n-fi\n-\n-echo Could not install binary fixincludes.\n-echo Installing shell script instead.\n-\n-cp ${INCLHACK} ${target}\n-chmod 755 ${target}\n+echo $MAKE SHELL=\\\"$SHELL\\\" install-sh\n+$MAKE SHELL=\"$SHELL\" install-sh"}]}