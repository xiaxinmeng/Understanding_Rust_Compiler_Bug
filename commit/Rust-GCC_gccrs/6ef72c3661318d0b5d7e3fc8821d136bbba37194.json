{"sha": "6ef72c3661318d0b5d7e3fc8821d136bbba37194", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmVmNzJjMzY2MTMxOGQwYjVkN2UzZmM4ODIxZDEzNmJiYmEzNzE5NA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-01-09T21:21:03Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-01-09T21:21:03Z"}, "message": "re PR c++/83734 (ice in cxx_eval _statement_list, at cp/constexpr.c:3869)\n\n\tPR c++/83734\n\t* constexpr.c (cxx_eval_statement_list): Ignore DEBUG_BEGIN_STMTs\n\tin STATEMENT_LIST.  Remove unneeded assert.\n\n\t* g++.dg/cpp0x/pr83734.C: New test.\n\nFrom-SVN: r256397", "tree": {"sha": "cacc6b6268cf2b10c6aab65f1c2c699a129b3d81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cacc6b6268cf2b10c6aab65f1c2c699a129b3d81"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ef72c3661318d0b5d7e3fc8821d136bbba37194", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef72c3661318d0b5d7e3fc8821d136bbba37194", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ef72c3661318d0b5d7e3fc8821d136bbba37194", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef72c3661318d0b5d7e3fc8821d136bbba37194/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0f1462579e348656b9a5549721f926d6f5894e1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f1462579e348656b9a5549721f926d6f5894e1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f1462579e348656b9a5549721f926d6f5894e1c"}], "stats": {"total": 27, "additions": 19, "deletions": 8}, "files": [{"sha": "54860dc278eaea0d60499fcc103748a81d2c49af", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6ef72c3661318d0b5d7e3fc8821d136bbba37194", "patch": "@@ -1,3 +1,9 @@\n+2018-01-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/83734\n+\t* constexpr.c (cxx_eval_statement_list): Ignore DEBUG_BEGIN_STMTs\n+\tin STATEMENT_LIST.  Remove unneeded assert.\n+\n 2018-01-03  Richard Sandiford  <richard.sandiford@linaro.org>\n \t    Alan Hayward  <alan.hayward@arm.com>\n \t    David Sherwood  <david.sherwood@arm.com>"}, {"sha": "b216e090b45386d961f5303a35dd04a01d320f7f", "filename": "gcc/cp/constexpr.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Fcp%2Fconstexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Fcp%2Fconstexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fconstexpr.c?ref=6ef72c3661318d0b5d7e3fc8821d136bbba37194", "patch": "@@ -3851,6 +3851,8 @@ cxx_eval_statement_list (const constexpr_ctx *ctx, tree t,\n   for (i = tsi_start (t); !tsi_end_p (i); tsi_next (&i))\n     {\n       tree stmt = tsi_stmt (i);\n+      if (TREE_CODE (stmt) == DEBUG_BEGIN_STMT)\n+\tcontinue;\n       r = cxx_eval_constant_expression (ctx, stmt, false,\n \t\t\t\t\tnon_constant_p, overflow_p,\n \t\t\t\t\tjump_target);\n@@ -3859,14 +3861,6 @@ cxx_eval_statement_list (const constexpr_ctx *ctx, tree t,\n       if (returns (jump_target) || breaks (jump_target))\n \tbreak;\n     }\n-  /* Make sure we don't use the \"result\" of a debug-only marker.  That\n-     would be wrong.  We should be using the result of the previous\n-     statement, or NULL if there isn't one.  In practice, this should\n-     never happen: the statement after the marker should override the\n-     result of the marker, so its value shouldn't survive in R.  Now,\n-     should that ever change, we'll need some fixing here to stop\n-     markers from modifying the generated executable code.  */\n-  gcc_checking_assert (!r || TREE_CODE (r) != DEBUG_BEGIN_STMT);\n   return r;\n }\n "}, {"sha": "7d148177c2939834ebabe399d99041bb15112327", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6ef72c3661318d0b5d7e3fc8821d136bbba37194", "patch": "@@ -1,3 +1,8 @@\n+2018-01-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/83734\n+\t* g++.dg/cpp0x/pr83734.C: New test.\n+\n 2017-01-09 Carl Love  <cel@us.ibm.com>\n \n \t* gcc.target/powerpc/builtins-1.c (main): Add tests for vec_mergee and"}, {"sha": "958c2e962fd8f4416625f2b3cd370ee7806533b2", "filename": "gcc/testsuite/g++.dg/cpp0x/pr83734.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr83734.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef72c3661318d0b5d7e3fc8821d136bbba37194/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr83734.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr83734.C?ref=6ef72c3661318d0b5d7e3fc8821d136bbba37194", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/83734\n+// { dg-do compile { target c++11 } }\n+// { dg-options \"-g -O2\" }\n+\n+struct A { constexpr A () { typedef int T; } };\n+A a;"}]}