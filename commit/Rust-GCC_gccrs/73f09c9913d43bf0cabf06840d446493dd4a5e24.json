{"sha": "73f09c9913d43bf0cabf06840d446493dd4a5e24", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNmMDljOTkxM2Q0M2JmMGNhYmYwNjg0MGQ0NDY0OTNkZDRhNWUyNA==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "drow@mvista.com", "date": "2003-06-04T17:42:53Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2003-06-04T17:42:53Z"}, "message": "config.gcc: Reorganize --with-cpu section.\n\n\t* config.gcc: Reorganize --with-cpu section.  Remove an\n\tobsolete comment about the default CPU for x86-64.  Fix\n\ta typo for the ep9312.  Update the list of supported PowerPC\n\tCPUs.  Support a limited set of new --with-cpu options\n\tfor i386.\n\nFrom-SVN: r67455", "tree": {"sha": "faa0afbb63d9d44a207626f570cfe20042978010", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/faa0afbb63d9d44a207626f570cfe20042978010"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73f09c9913d43bf0cabf06840d446493dd4a5e24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73f09c9913d43bf0cabf06840d446493dd4a5e24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73f09c9913d43bf0cabf06840d446493dd4a5e24", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73f09c9913d43bf0cabf06840d446493dd4a5e24/comments", "author": null, "committer": null, "parents": [{"sha": "165848dad3c833eaaba7b110b8d1f8c388d54993", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/165848dad3c833eaaba7b110b8d1f8c388d54993", "html_url": "https://github.com/Rust-GCC/gccrs/commit/165848dad3c833eaaba7b110b8d1f8c388d54993"}], "stats": {"total": 375, "additions": 247, "deletions": 128}, "files": [{"sha": "4389ba549658f4ae50da30a70966b71fdb2cef17", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f09c9913d43bf0cabf06840d446493dd4a5e24/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f09c9913d43bf0cabf06840d446493dd4a5e24/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=73f09c9913d43bf0cabf06840d446493dd4a5e24", "patch": "@@ -1,3 +1,11 @@\n+2003-06-04  Daniel Jacobowitz  <drow@mvista.com>\n+\n+\t* config.gcc: Reorganize --with-cpu section.  Remove an\n+\tobsolete comment about the default CPU for x86-64.  Fix\n+\ta typo for the ep9312.  Update the list of supported PowerPC\n+\tCPUs.  Support a limited set of new --with-cpu options\n+\tfor i386.\n+\n 2003-06-04  Aldy Hernandez  <aldyh@redhat.com>\n \n         * config/rs6000/rs6000.c (rs6000_complex_function_value): Unpack"}, {"sha": "a22f216a955fee0a985ef7cbc841c38ce323cd79", "filename": "gcc/config.gcc", "status": "modified", "additions": 239, "deletions": 128, "changes": 367, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73f09c9913d43bf0cabf06840d446493dd4a5e24/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73f09c9913d43bf0cabf06840d446493dd4a5e24/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=73f09c9913d43bf0cabf06840d446493dd4a5e24", "patch": "@@ -2129,79 +2129,245 @@ case $machine in\n \t;;\n esac\n \n-# Distinguish i[34567]86\n-# Also, do not run mips-tfile on MIPS if using gas.\n-# Process --with-cpu= for PowerPC/rs6000\n-target_cpu_default2=\n-case $machine in\n-i486-*-*)\n-\ttarget_cpu_default2=TARGET_CPU_DEFAULT_i486\n+# Support for --with-cpu and related options (and a few unrelated options,\n+# too).\n+\n+case \"x$with_cpu\" in\n+xyes | xno)\n+\techo \"--with-cpu must be passed a value\" 1>&2\n+\texit 1\n \t;;\n-i586-*-*)\n-\tcase $target_alias in\n+esac\n+\n+# If there is no $with_cpu option, try to infer one from ${machine}.\n+# This block sets nothing except for with_cpu.\n+if test x$with_cpu = x\n+then\n+\tcase $machine in\n+\tep9312-*-*)\n+\t\t# A Cirrus ARM variant.\n+\t\twith_cpu=\"ep9312\"\n+\t\t;;\n+\ti486-*-*)\n+\t\twith_cpu=i486\n+\t\t;;\n+\ti586-*-*)\n+\t\tcase $target_alias in\n \t\tk6_2-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_k6_2\n+\t\t\twith_cpu=k6-2\n \t\t\t;;\n \t\tk6_3-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_k6_3\n+\t\t\twith_cpu=k6-3\n \t\t\t;;\n \t\tk6-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_k6\n+\t\t\twith_cpu=k6\n \t\t\t;;\n \t\tpentium_mmx-*|winchip_c6-*|winchip2-*|c3-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_pentium_mmx\n+\t\t\twith_cpu=pentium-mmx\n \t\t\t;;\n \t\t*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_pentium\n+\t\t\twith_cpu=pentium\n \t\t\t;;\n-\tesac\n-\t;;\n-i686-*-* | i786-*-*)\n-\tcase $target_alias in\n+\t\tesac\n+\t\t;;\n+\ti686-*-* | i786-*-*)\n+\t\tcase $target_alias in\n \t\tk8-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_k8\n+\t\t\twith_cpu=k8\n \t\t\t;;\n \t\tathlon_xp-*|athlon_mp-*|athlon_4-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_athlon_sse\n+\t\t\twith_cpu=athlon-4\n \t\t\t;;\n \t\tathlon_tbird-*|athlon-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_athlon\n+\t\t\twith_cpu=athlon\n \t\t\t;;\n \t\tpentium2-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_pentium2\n+\t\t\twith_cpu=pentium2\n \t\t\t;;\n \t\tpentium3-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_pentium3\n+\t\t\twith_cpu=pentium3\n \t\t\t;;\n \t\tpentium4-*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_pentium4\n+\t\t\twith_cpu=pentium4\n \t\t\t;;\n \t\t*)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_pentiumpro\n+\t\t\twith_cpu=pentiumpro\n+\t\t\t;;\n+\t\tesac\n+\t\t;;\n+\tx86_64-*-*)\n+\t\twith_cpu=k8\n+\t\t;;\n+\talpha*-*-*)\n+\t\tcase $machine in\n+\t\talphaev6[78]*)\n+\t\t\twith_cpu=ev67\n+\t\t\t;;\n+\t\talphaev6*)\n+\t\t\twith_cpu=ev6\n \t\t\t;;\n+\t\talphapca56*)\n+\t\t\twith_cpu=pca56\n+\t\t\t;;\n+\t\talphaev56*)\n+\t\t\twith_cpu=ev56\n+\t\t\t;;\n+\t\talphaev5*)\n+\t\t\twith_cpu=ev5\n+\t\t\t;;\n+\t\tesac\n+\t\t;;\n+\tsparc*-*-*)\n+\t\twith_cpu=\"`echo $machine | sed 's/-.*$//'`\"\n+\t\t;;\n+\tesac\n+fi\n+\n+# Similarly for --with-schedule.\n+if test x$with_schedule = x; then\n+\tcase $machine in\n+\thppa1* | parisc1*)\n+\t\t# Override default PA8000 scheduling model.\n+\t\twith_schedule=7100LC\n+\t\t;;\n+\tesac\n+fi\n+\n+# Optionally, validate the argument to --with-cpu.\n+# This block sets nothing.\n+case $machine in\n+alpha*-*-*)\n+\tcase \"x$with_cpu\" in\n+\tx \\\n+\t| xev5 | xev56 | xpca56 | xev6 | xev67)\n+\t\t# OK\n+\t\t;;\n+\t*)\n+\t\techo \"Unknown CPU used in --with-cpu=$with_cpu\" 1>&2\n+\t\texit 1\n+\t\t;;\n \tesac\n \t;;\n-x86_64-*-*)\n-\t# We should have hammer chip here, but it does not exist yet and\n-\t# thus it is not supported.  Athlon_SSE is probably equivalent feature\n-\t# wise to hammer from our point of view except for 64bit mode.\n-\ttarget_cpu_default2=TARGET_CPU_DEFAULT_k8\n+\n+arm*-*-*)\n+\tcase \"x$with_cpu\" in\n+\tx \\\n+\t| xarm[236789] | xarm250 | xarm[67][01]0 \\\n+\t| xarm7m | xarm7dm | xarm7dmi | xarm[79]tdmi \\\n+\t| xarm7100 | xarm7500 | xarm7500fe | xarm810 \\\n+\t| xxscale \\\n+\t| xep9312 \\\n+\t| xstrongarm | xstrongarm110 | xstrongarm1100)\n+\t\t# OK\n+\t\t;;\n+\t*)\n+\t\techo \"Unknown cpu used in --with-cpu=$with_cpu\" 1>&2\n+\t\texit 1\n+\t\t;;\n+\tesac\n+\t;;\n+\n+hppa*-*-* | parisc*-*-*)\n+\tcase \"x$with_schedule\" in\n+\tx | x700 | x7100 | x7100LC | x7200 | x7300 | x8000)\n+\t\t# OK\n+\t\t;;\n+\t*)\n+\t\techo \"Unknown processor used in --with-schedule=$with_schedule.\" 1>&2\n+\t\texit 1\n+\t\t;;\n+\tesac\n+\t;;\n+\n+i[34567]86-*-* | x86_64-*-*)\n+\tcase x$with_cpu in\n+\tx \\\n+\t| xi486 \\\n+\t| xi586 | xk6 | xk6-2 | xk6-3 | xpentium-mmx | xpentium \\\n+\t| xpentiumpro | xpentium2 | xpentium3 | xpentium4 \\\n+\t| xathlon | xathlon-4 | xk8)\n+\t\t# OK\n+\t\t;;\n+\t*)\n+\t\techo \"Unknown CPU given in --with-cpu=$with_cpu.\" 1>&2\n+\t\texit 1\n+\t\t;;\n+\tesac\n+\t;;\n+\n+powerpc*-*-* | rs6000-*-*)\n+\tcase \"x$with_cpu\" in\n+\tx \\\n+\t| xdefault32 | xdefault64 \\\n+\t| xcommon \\\n+\t| xpower | xpower2 | xpower3 | xpower4 \\\n+\t| xpowerpc | xpowerpc64 \\\n+\t| xrios | xrios1 | xrios2 | xrsc | xrsc1 | xrs64a \\\n+\t| x401 | x403 | x405 | x405fp | x440 | x440fp | x505 \\\n+\t| x601 | x602 | x603 | x603e | xec603e | x604 \\\n+\t| x604e | x620 | x630 | x740 | x750 | x7400 | x7450 \\\n+\t| x8540 | x801 | x821 | x823 | x860)\n+\t\t# OK\n+\t\t;;\n+\t*)\n+\t\techo \"Unknown cpu used in --with-cpu=$with_cpu.\" 1>&2\n+\t\texit 1\n+\t\t;;\n+\tesac\n \t;;\n+\n+sparc*-*-*)\n+\tcase x$with_cpu in\n+\tx)\n+\t\techo \"Should never happen - no default CPU for sparc target.\"\n+\t\texit 1\n+\t\t;;\n+\n+\txsparc | xsparc86x | xsparcv9 | xsparc64 \\\n+\t| xsupersparc | xhypersparc | xultrasparc | xv7 | xv8 | xv9)\n+\t\t# OK\n+\t\t;;\n+\t*)\n+\t\techo \"Unknown cpu used in --with-$which=$val\" 1>&2\n+\t\texit 1\n+\t\t;;\n+\tesac\n+\t;;\n+\n+v850*-*-*)\n+\tcase \"x$with_cpu\" in\n+\tx | xv850e)\n+\t\t# OK\n+\t\t;;\n+\t*)\n+\t\techo \"Unknown cpu used in --with-cpu=$with_cpu\" 1>&2\n+\t\texit 1\n+\t\t;;\n+\tesac\n+\t;;\n+esac\n+\n+# Now, for targets which support this, convert --with-cpu to\n+# a setting of target_cpu_default2.  This block also sets assorted\n+# other configuration variables.\n+\n+target_cpu_default2=\n+case $machine in\n alpha*-*-*)\n-\tcase $machine in\n-\t\talphaev6[78]*)\n+\tcase $with_cpu in\n+\t\tev67)\n \t\t\ttarget_cpu_default2=\"MASK_CPU_EV6|MASK_BWX|MASK_MAX|MASK_FIX|MASK_CIX\"\n \t\t\t;;\n-\t\talphaev6*)\n+\t\tev6)\n \t\t\ttarget_cpu_default2=\"MASK_CPU_EV6|MASK_BWX|MASK_MAX|MASK_FIX\"\n \t\t\t;;\n-\t\talphapca56*)\n+\t\tpca56)\n \t\t\ttarget_cpu_default2=\"MASK_CPU_EV5|MASK_BWX|MASK_MAX\"\n \t\t\t;;\n-\t\talphaev56*)\n+\t\tev56)\n \t\t\ttarget_cpu_default2=\"MASK_CPU_EV5|MASK_BWX\"\n \t\t\t;;\n-\t\talphaev5*)\n+\t\tev5)\n \t\t\ttarget_cpu_default2=\"MASK_CPU_EV5\"\n \t\t\t;;\n \tesac\n@@ -2216,41 +2382,17 @@ alpha*-*-*)\n \t\tfi\n \tfi\n \t;;\n+\n arm*-*-*)\n \tcase \"x$with_cpu\" in\n-\t\tx)\n-\t\t\t# The most generic\n-\t\t\ttarget_cpu_default2=\"TARGET_CPU_generic\"\n-\t\t\t;;\n-\n-\t\t# Distinguish cores, and major variants\n-\t\t# arm7m doesn't exist, but D & I don't affect code\n-\t\txarm[236789] | xarm250 | xarm[67][01]0 \\\n-\t\t| xarm7m | xarm7dm | xarm7dmi | xarm[79]tdmi \\\n-\t\t| xarm7100 | xarm7500 | xarm7500fe | xarm810 \\\n-\t\t| xxscale \\\n-\t\t| xep9312 \\\n-\t\t| xstrongarm | xstrongarm110 | xstrongarm1100)\n-\t\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n-\t\t\t;;\n-\n-\t\txyes | xno)\n-\t\t\techo \"--with-cpu must be passed a value\" 1>&2\n-\t\t\texit 1\n-\t\t\t;;\n+\tx)\n+\t\t# The most generic\n+\t\ttarget_cpu_default2=\"TARGET_CPU_generic\"\n+\t\t;;\n \n-\t\t*)\n-\t\t\tif test x$pass2done = xyes\n-\t\t\tthen\n-\t\t\t\techo \"Unknown cpu used with --with-cpu=$with_cpu\" 1>&2\n-\t\t\t\texit 1\n-\t\t\tfi\n-\t\t\t;;\n-\tesac\n-\tcase $machine in\n-\t\t9ep9312-*-*)\n-\t\t\ttarget_cpu_default2=\"TARGET_CPU_9ep9312\"\n-\t\t\t;;\n+\t*)\n+\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n+\t\t;;\n \tesac\n \t;;\n \n@@ -2259,12 +2401,24 @@ hppa*-*-* | parisc*-*-*)\n \tthen\n \t\ttarget_cpu_default2=\"MASK_GAS|MASK_JUMP_IN_DELAY\"\n \tfi\n-\tcase $machine in\n-\t\thppa1* | parisc1*)\n-\t\t\ttm_defines=\"TARGET_SCHED_DEFAULT=\\\\\\\"7100LC\\\\\\\"\"\n-\t\t\t;;\n+\tif test \"x$with_schedule\" != x\n+\tthen\n+\t\ttm_defines=\"TARGET_SCHED_DEFAULT=\\\\\\\"$with_schedule\\\\\\\"\"\n+\t\t;;\n+\tfi\n+\t;;\n+\n+i[34567]86-*-* | x86_64-*-*)\n+\tcase x$with_cpu in\n+\txathlon-4)\n+\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_athlon_sse\n+\t\t;;\n+\t*)\n+\t\ttarget_cpu_default2=TARGET_CPU_DEFAULT_\"`echo $with_cpu | sed s/-/_/`\"\n+\t\t;;\n \tesac\n \t;;\n+\n mips*-*-*)\n \tcase $machine in\n \tmips*-*-ecoff* | mips*-*-elf*)\n@@ -2304,76 +2458,33 @@ mips*-*-*)\n \t\ttmake_file=\"mips/t-mips $tmake_file\"\n \tfi\n \t;;\n+\n powerpc*-*-* | rs6000-*-*)\n         if test x$enable_altivec = xyes\n         then\n                 tm_file=\"$tm_file rs6000/altivec-defs.h\"\n         fi\n-\tcase \"x$with_cpu\" in\n-\t\tx | xdefault32 | xdefault64)\n-\t\t\t;;\n-\n-\t\txcommon | xpowerpc | xpowerpc64 \\\n-\t\t  | xpower | xpower2 | xpower3 | xpower4 \\\n-\t\t  | xrios | xrios1 | xrios2 | xrsc | xrsc1 | xrs64a \\\n-\t\t  | x601 | x602 | x603 | x603e | x604 | x604e | x620 | x630 \\\n-\t\t  | x740 | x750 | x7400 | x7450 | x505)\n-\t\t\ttarget_cpu_default2=\"\\\\\\\"$with_cpu\\\\\\\"\"\n-\t\t\t;;\n-\n-\t\tx401 | x403 | x405 | xec603e | x801 | x821 | x823 | x860)\n-\t\t\ttarget_cpu_default2=\"\\\\\\\"$with_cpu\\\\\\\"\"\n-\t\t\t;;\n-\n-\t\txyes | xno)\n-\t\t\techo \"--with-cpu must be passed a value\" 1>&2\n-\t\t\texit 1\n-\t\t\t;;\n-\n-\t\t*)\n-\t\t\tif test x$pass2done = xyes\n-\t\t\tthen\n-\t\t\t\techo \"Unknown cpu used with --with-cpu=$with_cpu\" 1>&2\n-\t\t\t\texit 1\n-\t\t\tfi\n-\t\t\t;;\n-\tesac\n+\tif test \"x$with_cpu\" != x\n+\tthen\n+\t\ttarget_cpu_default2=\"\\\\\\\"$with_cpu\\\\\\\"\"\n+\tfi\n \tout_file=rs6000/rs6000.c\n \tc_target_objs=\"${c_target_objs} rs6000-c.o\"\n \tcxx_target_objs=\"${cxx_target_objs} rs6000-c.o\"\n \ttmake_file=\"rs6000/t-rs6000 ${tmake_file}\"\n \t;;\n+\n sparc*-*-*)\n-\tcase \".$with_cpu\" in\n-\t\t.)\n-\t\t\ttarget_cpu_default2=TARGET_CPU_\"`echo $machine | sed 's/-.*$//'`\"\n-\t\t\t;;\n-\t\t.supersparc | .hypersparc | .ultrasparc | .v7 | .v8 | .v9)\n-\t\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n-\t\t\t;;\n-\t\t*)\n-\t\t\tif test x$pass2done = xyes\n-\t\t\tthen\n-\t\t\t\techo \"Unknown cpu used with --with-cpu=$with_cpu\" 1>&2\n-\t\t\t\texit 1\n-\t\t\tfi\n-\t\t\t;;\n-\tesac\n+\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n \t;;\n+\n v850*-*-*)\n \tcase \"x$with_cpu\" in\n-\t\tx)\n-\t\t\t;;\n-\t\txv850e)\n-\t\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n-\t\t\t;;\n-\t\t*)\n-\t\t\tif test x$pass2done = xyes\n-\t\t\tthen\n-\t\t\t\techo \"Unknown cpu used with --with-cpu=$with_cpu\" 1>&2\n-\t\t\t\texit 1\n-\t\t\tfi\n-\t\t\t;;\n+\tx)\n+\t\t;;\n+\txv850e)\n+\t\ttarget_cpu_default2=\"TARGET_CPU_$with_cpu\"\n+\t\t;;\n \tesac\n \t;;\n esac"}]}