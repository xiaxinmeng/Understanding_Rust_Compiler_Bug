{"sha": "a502bdb63638a07e818ee89e4c70d650c1e9db2b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTUwMmJkYjYzNjM4YTA3ZTgxOGVlODllNGM3MGQ2NTBjMWU5ZGIyYg==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2012-07-16T03:31:12Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2012-07-16T03:31:12Z"}, "message": "cris-protos.h (cris_legitimate_address_p): Declare.\n\n\t* config/cris/cris-protos.h (cris_legitimate_address_p): Declare.\n\t* config/cris/cris.h (CONSTANT_ADDRESS_P): Define in terms of\n\tCONSTANT_P and cris_legitimate_address_p.\n\t* config/cris/cris.c (cris_legitimate_address_p): Make non-static.\n\nFrom-SVN: r189507", "tree": {"sha": "9327509da1d06618afe61bbff201e4554848cc1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9327509da1d06618afe61bbff201e4554848cc1b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a502bdb63638a07e818ee89e4c70d650c1e9db2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a502bdb63638a07e818ee89e4c70d650c1e9db2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a502bdb63638a07e818ee89e4c70d650c1e9db2b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a502bdb63638a07e818ee89e4c70d650c1e9db2b/comments", "author": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ff57d86657907ac69fdec1c994ea31206634f2f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff57d86657907ac69fdec1c994ea31206634f2f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff57d86657907ac69fdec1c994ea31206634f2f5"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "6452d3fc8b8032f43fb2b2a582ea9cec00bb50aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a502bdb63638a07e818ee89e4c70d650c1e9db2b", "patch": "@@ -1,7 +1,11 @@\n 2012-07-16  Hans-Peter Nilsson  <hp@axis.com>\n \n-\t* config/cris/cris.c (cris_preferred_reload_class):\n-\tDon't return GENERAL_REGS as preferred to MOF_SRP_REGS.\n+\t* config/cris/cris-protos.h (cris_legitimate_address_p): Declare.\n+\t* config/cris/cris.h (CONSTANT_ADDRESS_P): Define in terms of\n+\tCONSTANT_P and cris_legitimate_address_p.\n+\t* config/cris/cris.c (cris_legitimate_address_p): Make non-static.\n+\t(cris_preferred_reload_class): Don't return GENERAL_REGS as\n+\tpreferred to MOF_SRP_REGS.\n \n \t* config/cris/cris.c (cris_init_libfuncs): Handle initialization\n \tof library functions for basic atomic compare-and-swap."}, {"sha": "167f14c6e9c95b1c74969a5a1fc98d56b26bc7b0", "filename": "gcc/config/cris/cris-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2Fconfig%2Fcris%2Fcris-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2Fconfig%2Fcris%2Fcris-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Fcris-protos.h?ref=a502bdb63638a07e818ee89e4c70d650c1e9db2b", "patch": "@@ -40,6 +40,7 @@ extern bool cris_base_p (const_rtx, bool);\n extern bool cris_base_or_autoincr_p (const_rtx, bool);\n extern bool cris_bdap_index_p (const_rtx, bool);\n extern bool cris_biap_index_p (const_rtx, bool);\n+extern bool cris_legitimate_address_p (enum machine_mode, rtx, bool);\n extern bool cris_store_multiple_op_p (rtx);\n extern bool cris_movem_load_rest_p (rtx, int);\n extern void cris_asm_output_symbol_ref (FILE *, rtx);"}, {"sha": "ea98641b9032c48fde615924a8f5f4a9036c928c", "filename": "gcc/config/cris/cris.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2Fconfig%2Fcris%2Fcris.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2Fconfig%2Fcris%2Fcris.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Fcris.c?ref=a502bdb63638a07e818ee89e4c70d650c1e9db2b", "patch": "@@ -127,8 +127,6 @@ static void cris_init_libfuncs (void);\n \n static reg_class_t cris_preferred_reload_class (rtx, reg_class_t);\n \n-static bool cris_legitimate_address_p (enum machine_mode, rtx, bool);\n-\n static int cris_register_move_cost (enum machine_mode, reg_class_t, reg_class_t);\n static int cris_memory_move_cost (enum machine_mode, reg_class_t, bool);\n static bool cris_rtx_costs (rtx, int, int, int, int *, bool);\n@@ -1414,7 +1412,7 @@ cris_biap_index_p (const_rtx x, bool strict)\n    here (but is thankfully a general_operand in itself).  A local PIC\n    symbol is valid for the plain \"symbol + offset\" case.  */\n \n-static bool\n+bool\n cris_legitimate_address_p (enum machine_mode mode, rtx x, bool strict)\n {\n   const_rtx x1, x2;"}, {"sha": "0ed4ced31a3755e20a1507e5560fb17c4f71bcc7", "filename": "gcc/config/cris/cris.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2Fconfig%2Fcris%2Fcris.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a502bdb63638a07e818ee89e4c70d650c1e9db2b/gcc%2Fconfig%2Fcris%2Fcris.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Fcris.h?ref=a502bdb63638a07e818ee89e4c70d650c1e9db2b", "patch": "@@ -778,6 +778,9 @@ struct cum_args {int regs;};\n \n #define HAVE_POST_INCREMENT 1\n \n+#define CONSTANT_ADDRESS_P(X) \\\n+  (CONSTANT_P (X) && cris_legitimate_address_p (QImode, X, false))\n+\n /* Must be a compile-time constant, so we go with the highest value\n    among all CRIS variants.  */\n #define MAX_REGS_PER_ADDRESS 2"}]}