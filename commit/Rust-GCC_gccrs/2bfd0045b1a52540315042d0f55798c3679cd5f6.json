{"sha": "2bfd0045b1a52540315042d0f55798c3679cd5f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmJmZDAwNDViMWE1MjU0MDMxNTA0MmQwZjU1Nzk4YzM2NzljZDVmNg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2019-08-16T03:38:23Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2019-08-16T03:38:23Z"}, "message": "Match ld besides collect2 in gcov test\n\nThe regexp that checks that -lgcov is linked in when --coverage is\npassed to the compiler driver requires the command line to match\n'/collect2'.  Some of our targets don't match that, but they match /ld\nor ${target_alias}-ld depending on the testing scenario, so I'd like\nto tweak the test to match those as well.\n\n\nfor  gcc/testsuite/ChangeLog\n\n\t* gcc.misc-tests/options.exp: Match /ld and -ld besides\n\t/collect2.\n\nFrom-SVN: r274557", "tree": {"sha": "6d0b4eebeb235a17929c5a56df8a645da65e5042", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d0b4eebeb235a17929c5a56df8a645da65e5042"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2bfd0045b1a52540315042d0f55798c3679cd5f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bfd0045b1a52540315042d0f55798c3679cd5f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bfd0045b1a52540315042d0f55798c3679cd5f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bfd0045b1a52540315042d0f55798c3679cd5f6/comments", "author": null, "committer": null, "parents": [{"sha": "3b5864f42104cc3c35568fa5f9e4b256c2b49bb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b5864f42104cc3c35568fa5f9e4b256c2b49bb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b5864f42104cc3c35568fa5f9e4b256c2b49bb8"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "55c59822dde4087e6057a6fe0d21074903034547", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bfd0045b1a52540315042d0f55798c3679cd5f6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bfd0045b1a52540315042d0f55798c3679cd5f6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2bfd0045b1a52540315042d0f55798c3679cd5f6", "patch": "@@ -1,3 +1,8 @@\n+2019-08-16  Alexandre Oliva <oliva@adacore.com>\n+\n+\t* gcc.misc-tests/options.exp: Match /ld and -ld besides\n+\t/collect2.\n+\n 2019-08-15  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/91443"}, {"sha": "c50784c84f319bb28d5faaadb742d6d09651520c", "filename": "gcc/testsuite/gcc.misc-tests/options.exp", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bfd0045b1a52540315042d0f55798c3679cd5f6/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bfd0045b1a52540315042d0f55798c3679cd5f6/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp?ref=2bfd0045b1a52540315042d0f55798c3679cd5f6", "patch": "@@ -65,7 +65,8 @@ proc check_for_all_options {language gcc_options compiler_pattern as_pattern ld_\n \tfail \"$test (assembler options)\"\n \treturn\n     }\n-    if {![regexp -- \"/collect2(\\\\.exe)? .*$ld_pattern\" $gcc_output]} {\n+    # Match /collect2, /ld, or *-ld.\n+    if {![regexp -- \"(/collect2|\\[-/\\]ld)(\\\\.exe)? .*$ld_pattern\" $gcc_output]} {\n \tfail \"$test (linker options)\"\n \treturn\n     }"}]}