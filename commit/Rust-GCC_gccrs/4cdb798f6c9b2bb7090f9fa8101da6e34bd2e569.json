{"sha": "4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNkYjc5OGY2YzliMmJiNzA5MGY5ZmE4MTAxZGE2ZTM0YmQyZTU2OQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2007-03-14T01:26:00Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2007-03-14T01:26:00Z"}, "message": "ipa-inline.c (cgraph_maybe_hot_edge_p): Look for hot/cold attributes...\n\n\t* ipa-inline.c (cgraph_maybe_hot_edge_p): Look for hot/cold attributes,\n\twhen profile esitmate is present, calls with very low frequency are\n\tcold.\n\nFrom-SVN: r122898", "tree": {"sha": "28d05e9c63fc6bf9660113e9855dadadbcac190b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28d05e9c63fc6bf9660113e9855dadadbcac190b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569/comments", "author": null, "committer": null, "parents": [{"sha": "b3ce5b6ed7924967c74d161950038d5eb044273e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3ce5b6ed7924967c74d161950038d5eb044273e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3ce5b6ed7924967c74d161950038d5eb044273e"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "b90b689e8379554633a866b9c5738f14e2d878d4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569", "patch": "@@ -1,3 +1,9 @@\n+2007-03-13  Jan Hubicka  <jh@suse.cz>\n+\n+\t* ipa-inline.c (cgraph_maybe_hot_edge_p): Look for hot/cold attributes,\n+\twhen profile esitmate is present, calls with very low frequency are\n+\tcold.\n+\n 2007-03-13  Zdenek Dvorak  <dvorakz@suse.cz>\n \n \tPR tree-optimization/30730"}, {"sha": "04306aaa7e060c1731d2696ae4d0f44dc8dcf20e", "filename": "gcc/ipa-inline.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569/gcc%2Fipa-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569/gcc%2Fipa-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline.c?ref=4cdb798f6c9b2bb7090f9fa8101da6e34bd2e569", "patch": "@@ -472,6 +472,15 @@ cgraph_maybe_hot_edge_p (struct cgraph_edge *edge)\n       && (edge->count\n \t  <= profile_info->sum_max / PARAM_VALUE (HOT_BB_COUNT_FRACTION)))\n     return false;\n+  if (lookup_attribute (\"cold\", DECL_ATTRIBUTES (edge->callee->decl))\n+      || lookup_attribute (\"cold\", DECL_ATTRIBUTES (edge->caller->decl)))\n+    return false;\n+  if (lookup_attribute (\"hot\", DECL_ATTRIBUTES (edge->caller->decl)))\n+    return true;\n+  if (flag_guess_branch_prob\n+      && edge->frequency < (CGRAPH_FREQ_MAX\n+      \t\t\t    / PARAM_VALUE (HOT_BB_FREQUENCY_FRACTION)))\n+    return false;\n   return true;\n }\n "}]}