{"sha": "7d58701c40deacbfe57540f7e96ef2a60334880d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Q1ODcwMWM0MGRlYWNiZmU1NzU0MGY3ZTk2ZWYyYTYwMzM0ODgwZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-02-03T10:49:06Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-02-03T10:49:06Z"}, "message": "re PR lto/47274 (ICE in lto_varpool_replace_node, at lto-symtab.c:306)\n\n\tPR lto/47274\n\t* lto-streamer-out.c (write_symbol): When writing kind and visibility,\n\tcopy them into a unsigned char variable and pass address of it to\n\tlto_output_data_stream.\n\nFrom-SVN: r169785", "tree": {"sha": "8f105a12f97685d36faec6cfd024477671d08a7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f105a12f97685d36faec6cfd024477671d08a7e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d58701c40deacbfe57540f7e96ef2a60334880d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d58701c40deacbfe57540f7e96ef2a60334880d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d58701c40deacbfe57540f7e96ef2a60334880d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d58701c40deacbfe57540f7e96ef2a60334880d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "89843f5dfbb0b867f42c7743a8691ebe5bb35682", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89843f5dfbb0b867f42c7743a8691ebe5bb35682", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89843f5dfbb0b867f42c7743a8691ebe5bb35682"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "cffaf02baf20ab33decb0916d01d7b855e8a7522", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d58701c40deacbfe57540f7e96ef2a60334880d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d58701c40deacbfe57540f7e96ef2a60334880d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7d58701c40deacbfe57540f7e96ef2a60334880d", "patch": "@@ -1,5 +1,10 @@\n 2011-02-03  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR lto/47274\n+\t* lto-streamer-out.c (write_symbol): When writing kind and visibility,\n+\tcopy them into a unsigned char variable and pass address of it to\n+\tlto_output_data_stream.\n+\n \tPR target/47564\n \t* toplev.c (target_reinit): Save and restore *crtl and regno_reg_rtx\n \taround backend_init_target and lang_dependent_init_target calls."}, {"sha": "d1aac239f77b6d1d75682ed88d3c305a3bd3b264", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d58701c40deacbfe57540f7e96ef2a60334880d/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d58701c40deacbfe57540f7e96ef2a60334880d/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=7d58701c40deacbfe57540f7e96ef2a60334880d", "patch": "@@ -2410,6 +2410,7 @@ write_symbol (struct lto_streamer_cache_d *cache,\n   int slot_num;\n   uint64_t size;\n   const char *comdat;\n+  unsigned char c;\n \n   /* None of the following kinds of symbols are needed in the\n      symbol table.  */\n@@ -2505,8 +2506,10 @@ write_symbol (struct lto_streamer_cache_d *cache,\n \n   lto_output_data_stream (stream, name, strlen (name) + 1);\n   lto_output_data_stream (stream, comdat, strlen (comdat) + 1);\n-  lto_output_data_stream (stream, &kind, 1);\n-  lto_output_data_stream (stream, &visibility, 1);\n+  c = (unsigned char) kind;\n+  lto_output_data_stream (stream, &c, 1);\n+  c = (unsigned char) visibility;\n+  lto_output_data_stream (stream, &c, 1);\n   lto_output_data_stream (stream, &size, 8);\n   lto_output_data_stream (stream, &slot_num, 4);\n }"}]}