{"sha": "2a0a6f69ea9d8f74cbfe8b04d545ac9744554148", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmEwYTZmNjllYTlkOGY3NGNiZmU4YjA0ZDU0NWFjOTc0NDU1NDE0OA==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1999-07-28T21:46:39Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-07-28T21:46:39Z"}, "message": "pa.c (legitimize_address): Consistently use Pmode rather than SImode.\n\n        * pa.c (legitimize_address): Consistently use Pmode rather than\n        SImode.  Do not call gen_pic2_highpart directly anymore.\n        * pa.md (pic2_highpart): No longer a named pattern.\n        (pic2_lo_sum): Similarly.  Reformat to make more readable.\n\nFrom-SVN: r28326", "tree": {"sha": "acb69eed6e9a4e9ccdc6cde450e7d042ad9880ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/acb69eed6e9a4e9ccdc6cde450e7d042ad9880ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148/comments", "author": null, "committer": null, "parents": [{"sha": "b70a1fb1c212d8da60498679cd4009f39519b390", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b70a1fb1c212d8da60498679cd4009f39519b390", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b70a1fb1c212d8da60498679cd4009f39519b390"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "7a125b74a974543a61010b32fdacf9a01ebc4e2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2a0a6f69ea9d8f74cbfe8b04d545ac9744554148", "patch": "@@ -1,5 +1,10 @@\n Wed Jul 28 13:18:35 1999  Jeffrey A Law  (law@cygnus.com)\n \n+\t* pa.c (legitimize_address): Consistently use Pmode rather than\n+\tSImode.  Do not call gen_pic2_highpart directly anymore.\n+\t* pa.md (pic2_highpart): No longer a named pattern.\n+\t(pic2_lo_sum): Similarly.  Reformat to make more readable.\n+\n \t* pa.md (call, call_value): Use \"word_mode\" instead of \"SImode\" as\n \tneeded.\n "}, {"sha": "03e178f3886c47c32a022af4d17cccbd69e66810", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=2a0a6f69ea9d8f74cbfe8b04d545ac9744554148", "patch": "@@ -639,11 +639,13 @@ legitimize_pic_address (orig, mode, reg)\n \n       if (flag_pic == 2)\n \t{\n-\t  emit_insn (gen_pic2_highpart (reg, pic_offset_table_rtx, orig));\n+\t  emit_move_insn (reg,\n+\t\t\t  gen_rtx_PLUS (word_mode, pic_offset_table_rtx,\n+\t\t\t\t\tgen_rtx_HIGH (word_mode, orig)));\n \t  pic_ref\n \t    = gen_rtx_MEM (Pmode,\n \t\t\t   gen_rtx_LO_SUM (Pmode, reg,\n-\t\t\t\t\t   gen_rtx_UNSPEC (SImode,\n+\t\t\t\t\t   gen_rtx_UNSPEC (Pmode,\n \t\t\t\t\t\t\t   gen_rtvec (1, orig),\n \t\t\t\t\t\t\t   0)));\n \t}"}, {"sha": "b441f3df51195b876926a223c8fad3fc65f5c73c", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a0a6f69ea9d8f74cbfe8b04d545ac9744554148/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=2a0a6f69ea9d8f74cbfe8b04d545ac9744554148", "patch": "@@ -1610,7 +1610,7 @@\n   [(set_attr \"type\" \"multi\")\n    (set_attr \"length\" \"16\")])\t\t; 12 or 16\n \n-(define_insn \"pic2_highpart\"\n+(define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=a\")\n \t(plus:SI (match_operand:SI 1 \"register_operand\" \"r\")\n \t\t (high:SI (match_operand 2 \"\" \"\"))))]\n@@ -1624,11 +1624,12 @@\n ; We need this to make sure CSE doesn't simplify a memory load with a\n ; symbolic address, whose content it think it knows.  For PIC, what CSE\n ; think is the real value will be the address of that value.\n-(define_insn \"pic2_lo_sum\"\n+(define_insn \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=r\")\n-\t(mem:SI (lo_sum:SI (match_operand:SI 1 \"register_operand\" \"r\")\n-\t\t\t   (unspec:SI [(match_operand:SI 2 \"symbolic_operand\" \"\")] 0))))]\n-  \"\"\n+\t(mem:SI\n+\t  (lo_sum:SI (match_operand:SI 1 \"register_operand\" \"r\")\n+\t\t     (unspec:SI\n+\t\t\t[(match_operand:SI 2 \"symbolic_operand\" \"\")] 0))))]\n   \"*\n {\n   if (flag_pic != 2)\n@@ -1638,7 +1639,6 @@\n   [(set_attr \"type\" \"load\")\n    (set_attr \"length\" \"4\")])\n \n-\n ;; Always use addil rather than ldil;add sequences.  This allows the\n ;; HP linker to eliminate the dp relocation if the symbolic operand\n ;; lives in the TEXT space."}]}