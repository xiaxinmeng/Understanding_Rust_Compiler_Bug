{"sha": "a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTkzZGNiYzUzYTIwNTRjNzBiZjRjMzVlZTYxN2M0ZjlmMWE4YjA1YQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-11-23T08:07:09Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-11-23T08:07:09Z"}, "message": "cp-tree.def (CTOR_COMPLETE): New tree node.\n\n\t* cp-tree.def (CTOR_COMPLETE): New tree node.\n\t* decl.c (finish_constructor_body): Add it, to mark the end of the\n\tconstructor.\n\t(finish_function): Don't call end_protect_partials here.\n\t* ir.texi (CTOR_COMPLETE): Document it.\n\t* semantics.c (expand_stmt): Handle it.\n\nFrom-SVN: r30634", "tree": {"sha": "8596158be4f337d5b23ba7f48ba2f411a2baa9c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8596158be4f337d5b23ba7f48ba2f411a2baa9c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a/comments", "author": null, "committer": null, "parents": [{"sha": "43849fa9ee537e419027504c823ad1e8df3da235", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43849fa9ee537e419027504c823ad1e8df3da235", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43849fa9ee537e419027504c823ad1e8df3da235"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "c1c7a914efc284c6f9b316f8c9c77fd74bb50f43", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=a93dcbc53a2054c70bf4c35ee617c4f9f1a8b05a", "patch": "@@ -13293,6 +13293,10 @@ finish_constructor_body ()\n   /* In check_return_expr we translate an empty return from a\n      constructor to a return of `this'.  */\n   finish_return_stmt (NULL_TREE);\n+\n+  /* Mark the end of the main constructor body.  */\n+  if (DECL_CONSTRUCTOR_P (current_function_decl))\n+    add_tree (build_min_nt (CTOR_COMPLETE));\n }\n \n /* At the end of every destructor we generate code to restore virtual\n@@ -13521,9 +13525,6 @@ finish_function (lineno, flags)\n \t;\n       else if (DECL_CONSTRUCTOR_P (fndecl))\n \t{\n-\t  /* All subobjects have been fully constructed at this point.  */\n-\t  end_protect_partials ();\n-\n \t  if (call_poplevel)\n \t    do_poplevel ();\n \t}"}]}