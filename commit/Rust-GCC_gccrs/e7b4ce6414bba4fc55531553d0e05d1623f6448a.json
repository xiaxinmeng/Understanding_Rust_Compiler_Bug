{"sha": "e7b4ce6414bba4fc55531553d0e05d1623f6448a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTdiNGNlNjQxNGJiYTRmYzU1NTMxNTUzZDBlMDVkMTYyM2Y2NDQ4YQ==", "commit": {"author": {"name": "Kai Tietz", "email": "ktietz@redhat.com", "date": "2013-12-10T16:36:53Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2013-12-10T16:36:53Z"}, "message": "re PR target/56807 (mingw32: Conflict between stack realignment and stack probe destroys function argument in EAX)\n\n    PR target/56807\n    * config/i386/i386.c (ix86_expand_prologue): Address saved\n    registers stack-relative, not via frame-pointer.\n\nFrom-SVN: r205860", "tree": {"sha": "bf4dd2e4008a6c6d02a81f2986dbe0464720592e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bf4dd2e4008a6c6d02a81f2986dbe0464720592e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7b4ce6414bba4fc55531553d0e05d1623f6448a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7b4ce6414bba4fc55531553d0e05d1623f6448a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7b4ce6414bba4fc55531553d0e05d1623f6448a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7b4ce6414bba4fc55531553d0e05d1623f6448a/comments", "author": null, "committer": null, "parents": [{"sha": "bf2d1a652665a7637079de00bb13ba2c381221b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf2d1a652665a7637079de00bb13ba2c381221b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf2d1a652665a7637079de00bb13ba2c381221b0"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "3ad6d1ca8ca65a624e1467e6d81bb7cef10f57ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7b4ce6414bba4fc55531553d0e05d1623f6448a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7b4ce6414bba4fc55531553d0e05d1623f6448a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e7b4ce6414bba4fc55531553d0e05d1623f6448a", "patch": "@@ -1,3 +1,9 @@\n+2013-12-10  Kai Tietz  <ktietz@redhat.com>\n+\n+\tPR target/56807\n+\t* config/i386/i386.c (ix86_expand_prologue): Address saved\n+\tregisters stack-relative, not via frame-pointer.\n+\n 2013-12-10  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/38474"}, {"sha": "cdd63e537f098ece54cb00184d49e284224312d1", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7b4ce6414bba4fc55531553d0e05d1623f6448a/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7b4ce6414bba4fc55531553d0e05d1623f6448a/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=e7b4ce6414bba4fc55531553d0e05d1623f6448a", "patch": "@@ -10946,18 +10946,21 @@ ix86_expand_prologue (void)\n \t}\n       m->fs.sp_offset += allocate;\n \n+      /* Use stack_pointer_rtx for relative addressing so that code\n+\t works for realigned stack, too.  */\n       if (r10_live && eax_live)\n         {\n-\t  t = choose_baseaddr (m->fs.sp_offset - allocate);\n+\t  t = plus_constant (Pmode, stack_pointer_rtx, allocate);\n \t  emit_move_insn (gen_rtx_REG (word_mode, R10_REG),\n \t\t\t  gen_frame_mem (word_mode, t));\n-\t  t = choose_baseaddr (m->fs.sp_offset - allocate - UNITS_PER_WORD);\n+\t  t = plus_constant (Pmode, stack_pointer_rtx,\n+\t\t\t     allocate - UNITS_PER_WORD);\n \t  emit_move_insn (gen_rtx_REG (word_mode, AX_REG),\n \t\t\t  gen_frame_mem (word_mode, t));\n \t}\n       else if (eax_live || r10_live)\n \t{\n-\t  t = choose_baseaddr (m->fs.sp_offset - allocate);\n+\t  t = plus_constant (Pmode, stack_pointer_rtx, allocate);\n \t  emit_move_insn (gen_rtx_REG (word_mode,\n \t\t\t\t       (eax_live ? AX_REG : R10_REG)),\n \t\t\t  gen_frame_mem (word_mode, t));"}]}