{"sha": "c422af91adbec73a52b9c5d39edc7d916c2a974c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQyMmFmOTFhZGJlYzczYTUyYjljNWQzOWVkYzdkOTE2YzJhOTc0Yw==", "commit": {"author": {"name": "Keith Seitz", "email": "keiths@redhat.com", "date": "2007-01-25T00:40:45Z"}, "committer": {"name": "Keith Seitz", "email": "kseitz@gcc.gnu.org", "date": "2007-01-25T00:40:45Z"}, "message": "interpret.cc: Include gnu/gcj/jvmti/Breakpoint.h...\n\n        * interpret.cc: Include gnu/gcj/jvmti/Breakpoint.h,\n        gnu/gcj/jvmti/BreakpointManager.h, jvmti.h, and jvmti-int.h\n        * interpret-run.cc: Implement insn_breakpoint.\n\nFrom-SVN: r121155", "tree": {"sha": "834b5c670bb4dfe1154b6c6ad668f8be9b37c68b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/834b5c670bb4dfe1154b6c6ad668f8be9b37c68b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c422af91adbec73a52b9c5d39edc7d916c2a974c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c422af91adbec73a52b9c5d39edc7d916c2a974c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c422af91adbec73a52b9c5d39edc7d916c2a974c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c422af91adbec73a52b9c5d39edc7d916c2a974c/comments", "author": {"login": "shtiek", "id": 107581324, "node_id": "U_kgDOBmmPjA", "avatar_url": "https://avatars.githubusercontent.com/u/107581324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shtiek", "html_url": "https://github.com/shtiek", "followers_url": "https://api.github.com/users/shtiek/followers", "following_url": "https://api.github.com/users/shtiek/following{/other_user}", "gists_url": "https://api.github.com/users/shtiek/gists{/gist_id}", "starred_url": "https://api.github.com/users/shtiek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shtiek/subscriptions", "organizations_url": "https://api.github.com/users/shtiek/orgs", "repos_url": "https://api.github.com/users/shtiek/repos", "events_url": "https://api.github.com/users/shtiek/events{/privacy}", "received_events_url": "https://api.github.com/users/shtiek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3c727a410ce674ef1310b86238efb7a83aafff31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c727a410ce674ef1310b86238efb7a83aafff31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c727a410ce674ef1310b86238efb7a83aafff31"}], "stats": {"total": 42, "additions": 39, "deletions": 3}, "files": [{"sha": "cfd061a0f052ff6a2bda55b3596c7fc940a7c0a5", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c422af91adbec73a52b9c5d39edc7d916c2a974c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c422af91adbec73a52b9c5d39edc7d916c2a974c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c422af91adbec73a52b9c5d39edc7d916c2a974c", "patch": "@@ -1,3 +1,9 @@\n+2007-01-24  Keith Seitz  <keiths@redhat.com>\n+\n+\t* interpret.cc: Include gnu/gcj/jvmti/Breakpoint.h,\n+\tgnu/gcj/jvmti/BreakpointManager.h, jvmti.h, and jvmti-int.h\n+\t* interpret-run.cc: Implement insn_breakpoint.\n+\n 2007-01-24  Keith Seitz  <keiths@redhat.com>\n \n \t* prims.cc (_Jv_RunMain): Send JVMTI event notifications"}, {"sha": "950379038102037b52891b0153812e85a203deac", "filename": "libjava/interpret-run.cc", "status": "modified", "additions": 27, "deletions": 2, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c422af91adbec73a52b9c5d39edc7d916c2a974c/libjava%2Finterpret-run.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c422af91adbec73a52b9c5d39edc7d916c2a974c/libjava%2Finterpret-run.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finterpret-run.cc?ref=c422af91adbec73a52b9c5d39edc7d916c2a974c", "patch": "@@ -1,6 +1,6 @@\n // interpret-run.cc - Code to interpret bytecode\n \n-/* Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation\n+/* Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007 Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -2466,7 +2466,32 @@ details.  */\n \n     insn_breakpoint:\n       {\n-\t// nothing just yet\n+\tJvAssert (JVMTI_REQUESTED_EVENT (Breakpoint));\n+\n+\t// Send JVMTI notification\n+\tusing namespace ::java::lang;\n+\tjmethodID method = meth->self;\n+\tjlocation location = meth->insn_index (pc - 1);\n+\tThread *thread = Thread::currentThread ();\n+\tJNIEnv *jni_env = _Jv_GetCurrentJNIEnv ();\n+\n+\t_Jv_JVMTI_PostEvent (JVMTI_EVENT_BREAKPOINT, thread, jni_env,\n+\t\t\t     method, location);\n+\n+\t// Continue execution\n+\tusing namespace gnu::gcj::jvmti;\n+\tBreakpoint *bp\n+\t  = BreakpointManager::getBreakpoint (reinterpret_cast<jlong> (method),\n+\t\t\t\t\t      location);\n+\tJvAssert (bp != NULL);\n+\n+\tpc_t opc = reinterpret_cast<pc_t> (bp->getInsn ());\n+\n+#ifdef DIRECT_THREADED\n+\tgoto *(opc->insn);\n+#else\n+\tgoto *(insn_target[*opc]);\n+#endif\n       }\n     }\n   catch (java::lang::Throwable *ex)"}, {"sha": "075a15a22db0f91a5e890b5e539e4b99cb464614", "filename": "libjava/interpret.cc", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c422af91adbec73a52b9c5d39edc7d916c2a974c/libjava%2Finterpret.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c422af91adbec73a52b9c5d39edc7d916c2a974c/libjava%2Finterpret.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finterpret.cc?ref=c422af91adbec73a52b9c5d39edc7d916c2a974c", "patch": "@@ -1,6 +1,6 @@\n // interpret.cc - Code for the interpreter\n \n-/* Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation\n+/* Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007 Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -37,7 +37,12 @@ details.  */\n #include <execution.h>\n #include <java/lang/reflect/Modifier.h>\n \n+#include <jvmti.h>\n+#include \"jvmti-int.h\"\n+\n #include <gnu/classpath/jdwp/Jdwp.h>\n+#include <gnu/gcj/jvmti/Breakpoint.h>\n+#include <gnu/gcj/jvmti/BreakpointManager.h>\n \n #ifdef INTERPRETER\n "}]}