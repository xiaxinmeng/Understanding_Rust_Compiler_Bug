{"sha": "6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZhMzBlZjI4MTNmM2QxNmUxYzdmYjk3ZjkxY2ViZmIxNGI4ZWZiMA==", "commit": {"author": {"name": "Samuel Tardieu", "email": "sam@rfc1149.net", "date": "2009-10-06T07:19:54Z"}, "committer": {"name": "Samuel Tardieu", "email": "sam@gcc.gnu.org", "date": "2009-10-06T07:19:54Z"}, "message": "re PR ada/38333 (Illegal program not detected, ARM 6.1(20): pragma Import illegal for abstract subprograms)\n\n    gcc/ada/\n\tPR ada/38333\n\t* sem_prag.adb (Process_Import_Or_Interface): Forbid an abstract\n\tsubprogram to be completed with a \"pragma Import\".\n\n    gcc/testsuite/\n\tPR ada/38333\n\t* gnat.dg/specs/import_abstract.ads: New.\n\nFrom-SVN: r152486", "tree": {"sha": "70a0cfd4f9886786f8c4308b903472c7aed42a67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70a0cfd4f9886786f8c4308b903472c7aed42a67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/comments", "author": {"login": "samueltardieu", "id": 44656, "node_id": "MDQ6VXNlcjQ0NjU2", "avatar_url": "https://avatars.githubusercontent.com/u/44656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samueltardieu", "html_url": "https://github.com/samueltardieu", "followers_url": "https://api.github.com/users/samueltardieu/followers", "following_url": "https://api.github.com/users/samueltardieu/following{/other_user}", "gists_url": "https://api.github.com/users/samueltardieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/samueltardieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samueltardieu/subscriptions", "organizations_url": "https://api.github.com/users/samueltardieu/orgs", "repos_url": "https://api.github.com/users/samueltardieu/repos", "events_url": "https://api.github.com/users/samueltardieu/events{/privacy}", "received_events_url": "https://api.github.com/users/samueltardieu/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ddd4d0e1ade18e71ea3d111d5a2337dfa52dcc7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddd4d0e1ade18e71ea3d111d5a2337dfa52dcc7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ddd4d0e1ade18e71ea3d111d5a2337dfa52dcc7a"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "7af8f31c1e99f9171d8276a92e4849dd192b72d8", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "patch": "@@ -1,3 +1,9 @@\n+2009-10-06  Samuel Tardieu  <sam@rfc1149.net>\n+\n+\tPR ada/38333\n+\t* sem_prag.adb (Process_Import_Or_Interface): Forbid an abstract\n+\tsubprogram to be completed with a \"pragma Import\".\n+\n 2009-10-02  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity) <E_Record_Subtype>:"}, {"sha": "4d56d36ee398f7f0d8cd69aff4220c774674470c", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "patch": "@@ -3459,6 +3459,15 @@ package body Sem_Prag is\n                else\n                   Set_Imported (Def_Id);\n \n+                  if Is_Subprogram (Def_Id)\n+                    and then Is_Abstract_Subprogram (Def_Id)\n+                  then\n+                     Error_Msg_Sloc := Sloc (Def_Id);\n+                     Error_Msg_NE\n+                       (\"cannot import abstract subprogram& declared#\",\n+                        Arg2, Def_Id);\n+                  end if;\n+\n                   --  Special processing for Convention_Intrinsic\n \n                   if C = Convention_Intrinsic then"}, {"sha": "c65aab8eb7f8837397ba9f81a69cce2b713dd949", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "patch": "@@ -1,3 +1,8 @@\n+2009-10-06  Samuel Tardieu  <sam@rfc1149.net>\n+\n+\tPR ada/38333\n+\t* gnat.dg/specs/import_abstract.ads: New.\n+\n 2009-10-05  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/35862"}, {"sha": "9d05f0c1ceb5204ebd25d553520898b725e90b79", "filename": "gcc/testsuite/gnat.dg/specs/import_abstract.ads", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fimport_abstract.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fimport_abstract.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fimport_abstract.ads?ref=6fa30ef2813f3d16e1c7fb97f91cebfb14b8efb0", "patch": "@@ -0,0 +1,6 @@\n+-- { dg-do compile }\n+package Import_Abstract is\n+   type T1 is abstract tagged null record;\n+   procedure p1(X : T1) is abstract;\n+   pragma Import (Ada, p1);    -- { dg-error \"cannot import abstract subprogram\" }\n+end Import_Abstract;"}]}