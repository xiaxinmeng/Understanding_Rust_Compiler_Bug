{"sha": "e3912107f880de67f5f593212490a957d95801bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM5MTIxMDdmODgwZGU2N2Y1ZjU5MzIxMjQ5MGE5NTdkOTU4MDFiYg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2016-09-11T12:08:28Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2016-09-11T12:08:28Z"}, "message": "re PR ipa/63416 (Three calls to empty functions via pointers get folded, but not inlined)\n\n\tPR ipa/64316\n\t* gcc.dg/ipa/pr63416.c: New testcase.\n\nFrom-SVN: r240081", "tree": {"sha": "7d2b301c8de09a1eadfd5183c9c931293a9269d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7d2b301c8de09a1eadfd5183c9c931293a9269d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3912107f880de67f5f593212490a957d95801bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3912107f880de67f5f593212490a957d95801bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3912107f880de67f5f593212490a957d95801bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3912107f880de67f5f593212490a957d95801bb/comments", "author": null, "committer": null, "parents": [{"sha": "2501129262f37369070afc24a6505c3d4a3c6d44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2501129262f37369070afc24a6505c3d4a3c6d44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2501129262f37369070afc24a6505c3d4a3c6d44"}], "stats": {"total": 61, "additions": 61, "deletions": 0}, "files": [{"sha": "8766abb787135a963b4cfb03021953d0778fd55f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3912107f880de67f5f593212490a957d95801bb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3912107f880de67f5f593212490a957d95801bb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e3912107f880de67f5f593212490a957d95801bb", "patch": "@@ -1,3 +1,8 @@\n+2016-08-09  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/64316\n+\t* gcc.dg/ipa/pr63416.c: New testcase.\n+\n 2016-09-10  Paul Thomas  <pault@gcc.gnu.org>\n \t    Steven G. Kargl  <kargl@gcc.gnu.org>\n "}, {"sha": "b5374c51fe9293fd38ca3c7ab836c81b5d890ece", "filename": "gcc/testsuite/gcc.dg/ipa/pr63416.c", "status": "added", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3912107f880de67f5f593212490a957d95801bb/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fpr63416.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3912107f880de67f5f593212490a957d95801bb/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fpr63416.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fpr63416.c?ref=e3912107f880de67f5f593212490a957d95801bb", "patch": "@@ -0,0 +1,56 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-optimized\"  } */\n+#define _UNUSED_ __attribute__((__unused__))\n+\n+typedef int TEST_F30 (int *v);\n+typedef void TEST_F31 (int *v);\n+typedef void TEST_F32 (int *v, int r);\n+\n+typedef struct TEST_T30_ {\n+   TEST_F30 * pf30;\n+   TEST_F31 * pf31;\n+   TEST_F32 * pf32;\n+} TEST_T30;\n+\n+static inline\n+int test_f30 (int *v)\n+{\n+   *v = 1;\n+   return 0;\n+}//test_f30()\n+\n+static inline\n+void test_f31 (int *v _UNUSED_)\n+{\n+}//test_f31()\n+\n+static inline\n+void test_f32 (int *v, int r _UNUSED_)\n+{\n+   *v = 0;\n+}//test_f32()\n+\n+static const\n+TEST_T30 test_t30 = {\n+   .pf30 = test_f30,\n+   .pf31 = test_f31,\n+   .pf32 = test_f32,\n+};\n+\n+static inline\n+int test_f10 (const TEST_T30 *pt30, int *v)\n+{\n+   int r = pt30->pf30(v);\n+   pt30->pf31(v);\n+   pt30->pf32(v, r);\n+   return 0;\n+}//test_f10()\n+\n+int test_f00 (int *v)\n+{\n+   return test_f10(&test_t30, v);\n+}//test_f00()\n+\n+/* Everything should be inlined and only test_f00 body should appear.  */\n+/* { dg-final { scan-tree-dump-not \"test_f10\" \"optimized\"  } } */\n+/* { dg-final { scan-tree-dump-not \"test_f3\" \"optimized\"  } } */"}]}