{"sha": "330618621be1e450c58f13fcc9bd29a355494afb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzMwNjE4NjIxYmUxZTQ1MGM1OGYxM2ZjYzliZDI5YTM1NTQ5NGFmYg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2007-09-05T10:50:18Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2007-09-05T10:50:18Z"}, "message": "sematics.c (expand_body): Remove unnecesary import_export_decl call...\n\n\n\t* cp/sematics.c (expand_body): Remove unnecesary import_export_decl\n\tcall, DECL_EXTERNAL checks and current_function_decl saving.\n\nFrom-SVN: r128127", "tree": {"sha": "28f75d306f5d859b9d14c797c62c4774809bc842", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28f75d306f5d859b9d14c797c62c4774809bc842"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/330618621be1e450c58f13fcc9bd29a355494afb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/330618621be1e450c58f13fcc9bd29a355494afb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/330618621be1e450c58f13fcc9bd29a355494afb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/330618621be1e450c58f13fcc9bd29a355494afb/comments", "author": null, "committer": null, "parents": [{"sha": "a36b8a1ee87bc9b3be13bc70108e7f03d74cd4ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a36b8a1ee87bc9b3be13bc70108e7f03d74cd4ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a36b8a1ee87bc9b3be13bc70108e7f03d74cd4ad"}], "stats": {"total": 25, "additions": 5, "deletions": 20}, "files": [{"sha": "be44b69e0b5ac4f53412f640daf2c72f06329a69", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/330618621be1e450c58f13fcc9bd29a355494afb/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/330618621be1e450c58f13fcc9bd29a355494afb/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=330618621be1e450c58f13fcc9bd29a355494afb", "patch": "@@ -1,3 +1,8 @@\n+2007-09-05  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cp/sematics.c (expand_body): Remove unnecesary import_export_decl\n+\tcall, DECL_EXTERNAL checks and current_function_decl saving.\n+\n 2007-09-05  Paolo Carlini  <pcarlini@suse.de>\n \n \tPR c++/29731 (again)"}, {"sha": "054a83e6c30f140e3545bb54035337f1790784b0", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/330618621be1e450c58f13fcc9bd29a355494afb/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/330618621be1e450c58f13fcc9bd29a355494afb/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=330618621be1e450c58f13fcc9bd29a355494afb", "patch": "@@ -3131,24 +3131,6 @@ emit_associated_thunks (tree fn)\n void\n expand_body (tree fn)\n {\n-  tree saved_function;\n-\n-  /* Compute the appropriate object-file linkage for inline\n-     functions.  */\n-  if (DECL_DECLARED_INLINE_P (fn))\n-    import_export_decl (fn);\n-\n-  /* If FN is external, then there's no point in generating RTL for\n-     it.  This situation can arise with an inline function under\n-     `-fexternal-templates'; we instantiate the function, even though\n-     we're not planning on emitting it, in case we get a chance to\n-     inline it.  */\n-  if (DECL_EXTERNAL (fn))\n-    return;\n-\n-  /* ??? When is this needed?  */\n-  saved_function = current_function_decl;\n-\n   /* Emit any thunks that should be emitted at the same time as FN.  */\n   emit_associated_thunks (fn);\n \n@@ -3159,8 +3141,6 @@ expand_body (tree fn)\n \n   c_expand_body (fn);\n \n-  current_function_decl = saved_function;\n-\n   if (DECL_CLONED_FUNCTION_P (fn))\n     {\n       /* If this is a clone, go through the other clones now and mark"}]}