{"sha": "b843d2101e5b335f9ae87d5dea12372aca5fb5da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjg0M2QyMTAxZTViMzM1ZjlhZTg3ZDVkZWExMjM3MmFjYTVmYjVkYQ==", "commit": {"author": {"name": "Dirk Zoller", "email": "duz@rtsffm.com", "date": "1999-09-30T06:19:54Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-09-30T06:19:54Z"}, "message": "c-tree.h (warn_float_equal): Declare.\n\n\n        * c-tree.h (warn_float_equal): Declare.\n        * c-decl.c (warn_float_equal): Define.\n        (c_decode_option): Recognize -W[no-]float-equal.\n        * c-typeck.c (build_binary_op): Conditionally warn\n        about equality tests of floating point types.\n        * toplev.c (documented_lan_options): Add -W[no-]float-equal.\n\nFrom-SVN: r29722", "tree": {"sha": "61b757d3537f8ed69955652a8d7feba76e9d7c6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61b757d3537f8ed69955652a8d7feba76e9d7c6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b843d2101e5b335f9ae87d5dea12372aca5fb5da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b843d2101e5b335f9ae87d5dea12372aca5fb5da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b843d2101e5b335f9ae87d5dea12372aca5fb5da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b843d2101e5b335f9ae87d5dea12372aca5fb5da/comments", "author": null, "committer": null, "parents": [{"sha": "1bdba2c09c51979c2ec3387637e87648b0ac1db6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bdba2c09c51979c2ec3387637e87648b0ac1db6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bdba2c09c51979c2ec3387637e87648b0ac1db6"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "08eecb4a7215115e65cda1be0eae9a8baef85a46", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b843d2101e5b335f9ae87d5dea12372aca5fb5da", "patch": "@@ -1,3 +1,12 @@\n+Thu Sep 30 00:13:27 1999  Dirk Zoller  <duz@rtsffm.com>\n+\n+\t* c-tree.h (warn_float_equal): Declare.\n+\t* c-decl.c (warn_float_equal): Define.\n+\t(c_decode_option): Recognize -W[no-]float-equal.\n+\t* c-typeck.c (build_binary_op): Conditionally warn\n+\tabout equality tests of floating point types.\n+\t* toplev.c (documented_lan_options): Add -W[no-]float-equal.\n+\n Wed Sep 29 23:43:39 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* cse.c (struct set): Delete inner_dest_loc field. "}, {"sha": "ca8f26b88c082de92b5ddc5e6a66d4828b43d32e", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=b843d2101e5b335f9ae87d5dea12372aca5fb5da", "patch": "@@ -446,6 +446,10 @@ int warn_unknown_pragmas = 0; /* Tri state variable.  */\n \n int warn_sign_compare = -1;\n \n+/* Warn about testing equality of floating point numbers. */\n+\n+int warn_float_equal = 0;\n+\n /* Nonzero means warn about use of multicharacter literals.  */\n \n int warn_multichar = 1;\n@@ -724,6 +728,10 @@ c_decode_option (argc, argv)\n     warn_sign_compare = 1;\n   else if (!strcmp (p, \"-Wno-sign-compare\"))\n     warn_sign_compare = 0;\n+  else if (!strcmp (p, \"-Wfloat-equal\"))\n+    warn_float_equal = 1;\n+  else if (!strcmp (p, \"-Wno-float-equal\"))\n+    warn_float_equal = 0;\n   else if (!strcmp (p, \"-Wmultichar\"))\n     warn_multichar = 1;\n   else if (!strcmp (p, \"-Wno-multichar\"))"}, {"sha": "0d2dd63715ce156beea737649e7558255a8aa50f", "filename": "gcc/c-tree.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Fc-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Fc-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-tree.h?ref=b843d2101e5b335f9ae87d5dea12372aca5fb5da", "patch": "@@ -422,6 +422,10 @@ extern int warn_missing_braces;\n \n extern int warn_sign_compare;\n \n+/* Warn about testing equality of floating point numbers. */\n+\n+extern int warn_float_equal;\n+\n /* Warn about multicharacter constants.  */\n \n extern int warn_multichar;"}, {"sha": "0d6ec004946880b55facf850610acac9132f0605", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=b843d2101e5b335f9ae87d5dea12372aca5fb5da", "patch": "@@ -2099,6 +2099,8 @@ build_binary_op (code, orig_op0, orig_op1, convert_p)\n \n     case EQ_EXPR:\n     case NE_EXPR:\n+      if (warn_float_equal && (code0 == REAL_TYPE || code1 == REAL_TYPE))\n+\twarning (\"comparing floating point with == or != is unsafe\");\n       /* Result of comparison is always int,\n \t but don't convert the args to int!  */\n       build_type = integer_type_node;"}, {"sha": "99efdb3db99a69442eb517b7234ab4d9984254d7", "filename": "gcc/toplev.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b843d2101e5b335f9ae87d5dea12372aca5fb5da/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=b843d2101e5b335f9ae87d5dea12372aca5fb5da", "patch": "@@ -1100,6 +1100,8 @@ documented_lang_options[] =\n   { \"-Wno-redundant-decls\", \"\" },\n   { \"-Wsign-compare\", \"Warn about signed/unsigned comparisons\" },\n   { \"-Wno-sign-compare\", \"\" },\n+  { \"-Wfloat-equal\", \"Warn about testing equality of floating point numbers\" },\n+  { \"-Wno-float-equal\", \"\" },\n   { \"-Wunknown-pragmas\", \"Warn about unrecognised pragmas\" },\n   { \"-Wno-unknown-pragmas\", \"\" },\n   { \"-Wstrict-prototypes\", \"Warn about non-prototyped function decls\" },"}]}