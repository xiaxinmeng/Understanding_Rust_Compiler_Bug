{"sha": "f5e002ce85f1dcc83f9cecc38df7a53f552d9722", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjVlMDAyY2U4NWYxZGNjODNmOWNlY2MzOGRmN2E1M2Y1NTJkOTcyMg==", "commit": {"author": {"name": "Mark Wielaard", "email": "mark@klomp.org", "date": "2005-04-13T16:46:47Z"}, "committer": {"name": "Mark Wielaard", "email": "mark@gcc.gnu.org", "date": "2005-04-13T16:46:47Z"}, "message": "natRuntime.cc (insertSystemProperties): Set java.class.path to CLASSPATH if not already set.\n\n       * java/lang/natRuntime.cc (insertSystemProperties): Set\n       java.class.path to CLASSPATH if not already set.\n\nFrom-SVN: r98099", "tree": {"sha": "77649c5f7f9b7681bb63997b2cc6cf4d67d263a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77649c5f7f9b7681bb63997b2cc6cf4d67d263a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5e002ce85f1dcc83f9cecc38df7a53f552d9722", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5e002ce85f1dcc83f9cecc38df7a53f552d9722", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5e002ce85f1dcc83f9cecc38df7a53f552d9722", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5e002ce85f1dcc83f9cecc38df7a53f552d9722/comments", "author": null, "committer": null, "parents": [{"sha": "23a8ae8d463bc2658e382ed0c334d7da271617d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23a8ae8d463bc2658e382ed0c334d7da271617d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23a8ae8d463bc2658e382ed0c334d7da271617d2"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "7c388dac8e80bb64dc01ac03ef69f00e5137287a", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e002ce85f1dcc83f9cecc38df7a53f552d9722/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e002ce85f1dcc83f9cecc38df7a53f552d9722/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=f5e002ce85f1dcc83f9cecc38df7a53f552d9722", "patch": "@@ -1,3 +1,8 @@\n+2005-04-13  Mark Wielaard  <mark@klomp.org>\n+\n+\t* java/lang/natRuntime.cc (insertSystemProperties): Set\n+\tjava.class.path to CLASSPATH if not already set.\n+\n 2005-04-07  Thomas Fitzsimmons  <fitzsim@redhat.com>\n \n \t* prims.cc (parse_verbose_args): Fix verbose argument parsing."}, {"sha": "9ffeef7ad628dbb02fae4cb7dd39f788360c3fa3", "filename": "libjava/java/lang/natRuntime.cc", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e002ce85f1dcc83f9cecc38df7a53f552d9722/libjava%2Fjava%2Flang%2FnatRuntime.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e002ce85f1dcc83f9cecc38df7a53f552d9722/libjava%2Fjava%2Flang%2FnatRuntime.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatRuntime.cc?ref=f5e002ce85f1dcc83f9cecc38df7a53f552d9722", "patch": "@@ -593,6 +593,18 @@ java::lang::Runtime::insertSystemProperties (java::util::Properties *newprops)\n       // LD_LIBRARY_PATH, etc.\n       SET (\"java.library.path\", \"\");\n     }\n+\n+  // If java.class.path is still not set then set it according to the\n+  // CLASSPATH environment variable if given.  See gij.cc main () and\n+  // prims.cc _Jv_CreateJavaVM () for all the ways this could have\n+  // been set much earlier.\n+  path = newprops->getProperty(JvNewStringLatin1(\"java.class.path\"));\n+  if (!path)\n+    {\n+      char *classpath = getenv(\"CLASSPATH\");\n+      if (classpath)\n+\tSET (\"java.class.path\", classpath);\n+    }\n }\n \n java::lang::Process *"}]}