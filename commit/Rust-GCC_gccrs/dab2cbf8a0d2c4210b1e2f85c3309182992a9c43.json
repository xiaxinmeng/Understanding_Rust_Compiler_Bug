{"sha": "dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGFiMmNiZjhhMGQyYzQyMTBiMWUyZjg1YzMzMDkxODI5OTJhOWM0Mw==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2014-03-18T22:15:10Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2014-03-18T22:15:10Z"}, "message": "re PR fortran/55207 ([F08] Variables declared in the main program should implicitly get the SAVE attribute)\n\n2014-03-18  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/55207\n\tPR fortran/60549\n\t* decl.c (match_attr_spec): Revert r208590.\n\n2014-03-18  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/55207\n\tPR fortran/60549\n\t* gfortran.dg/assumed_rank_7.f90: Revert r208590.\n\t* gfortran.dg/c_ptr_tests_16.f90: Ditto.\n\t* gfortran.dg/inline_sum_bounds_check_1.f90: Ditto.\n\t* gfortran.dg/intent_optimize_1.f90: Ditto.\n\t* gfortran.dg/pointer_init_9.f90: Ditto.\n\t* gfortran.dg/volatile4.f90: Ditto.\n\t* gfortran.dg/volatile6.f90: Ditto.\n\nFrom-SVN: r208668", "tree": {"sha": "a13c613617785362ab6ecc9be75c7f1e49022651", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a13c613617785362ab6ecc9be75c7f1e49022651"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ead8233bdae81d70bd9e603a69397ef2cff7e7e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ead8233bdae81d70bd9e603a69397ef2cff7e7e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ead8233bdae81d70bd9e603a69397ef2cff7e7e8"}], "stats": {"total": 59, "additions": 26, "deletions": 33}, "files": [{"sha": "0386d1d936bb17fe5419645f5101a04927b3d646", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -1,3 +1,9 @@\n+2014-03-18  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/55207\n+\tPR fortran/60549\n+\t* decl.c (match_attr_spec): Revert r208590.\n+\n 2014-03-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR ipa/58721"}, {"sha": "2d405fe983802fb829bb5b014d01d109beb0de4f", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -3827,11 +3827,9 @@ match_attr_spec (void)\n \t}\n     }\n \n-  /* Since Fortran 2008, variables declared in a MODULE or PROGRAM\n-     implicitly have the SAVE attribute.  */\n-  if ((gfc_current_state () == COMP_MODULE\n-       || gfc_current_state () == COMP_PROGRAM)\n-      && !current_attr.save && (gfc_option.allow_std & GFC_STD_F2008) != 0)\n+  /* Since Fortran 2008 module variables implicitly have the SAVE attribute.  */\n+  if (gfc_current_state () == COMP_MODULE && !current_attr.save\n+      && (gfc_option.allow_std & GFC_STD_F2008) != 0)\n     current_attr.save = SAVE_IMPLICIT;\n \n   colon_seen = 1;"}, {"sha": "0de4f716020cf9157546a491553da86b2aebe6d8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -1,3 +1,15 @@\n+2014-03-18  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/55207\n+\tPR fortran/60549\n+\t* gfortran.dg/assumed_rank_7.f90: Revert r208590.\n+\t* gfortran.dg/c_ptr_tests_16.f90: Ditto.\n+\t* gfortran.dg/inline_sum_bounds_check_1.f90: Ditto.\n+\t* gfortran.dg/intent_optimize_1.f90: Ditto.\n+\t* gfortran.dg/pointer_init_9.f90: Ditto.\n+\t* gfortran.dg/volatile4.f90: Ditto.\n+\t* gfortran.dg/volatile6.f90: Ditto.\n+\n 2014-03-18  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR c/55383"}, {"sha": "f9ff3b9aa424531d9cf6a4526fba72e751d38ff1", "filename": "gcc/testsuite/gfortran.dg/assumed_rank_7.f90", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_rank_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_rank_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_rank_7.f90?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -24,8 +24,6 @@\n call bar(at)\n if (i /= 12) call abort()\n \n-deallocate(ac,at)\n-\n contains\n   subroutine bar(x)\n     type(t) :: x(..)"}, {"sha": "8855d62abaacf3af2addab912e98bf30461671a6", "filename": "gcc/testsuite/gfortran.dg/c_ptr_tests_16.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fc_ptr_tests_16.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fc_ptr_tests_16.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fc_ptr_tests_16.f90?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -3,7 +3,7 @@\n !\n ! PR fortran/46974\n \n-subroutine test\n+program test\n   use ISO_C_BINDING\n   implicit none\n   type(c_ptr) :: m\n@@ -15,7 +15,7 @@ subroutine test\n      .and. int(z'41424345') /= a  &\n      .and. int(z'4142434500000000',kind=8) /= a) &\n     call i_do_not_exist()\n-end subroutine\n+end program test\n \n ! Examples contributed by Steve Kargl and James Van Buskirk\n "}, {"sha": "39984683d4bf23d94ab69dfb7e0b58fd6c584c07", "filename": "gcc/testsuite/gfortran.dg/inline_sum_bounds_check_1.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Finline_sum_bounds_check_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Finline_sum_bounds_check_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finline_sum_bounds_check_1.f90?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -1,9 +1,9 @@\n ! { dg-do run }\n-! { dg-options \"-fbounds-check -Wno-aggressive-loop-optimizations\" }\n+! { dg-options \"-fbounds-check\" }\n \n       integer, parameter :: nx = 3, ny = 4\n \n-      integer :: i, too_big\n+      integer :: i, j, too_big\n \n       integer, parameter, dimension(nx,ny) :: p = &\n         reshape((/ (i*i, i=1,size(p)) /), shape(p))"}, {"sha": "dbe0128d7f0d16ee5769283df8ca2f51c8c0c71c", "filename": "gcc/testsuite/gfortran.dg/intent_optimize_1.f90", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_optimize_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_optimize_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_optimize_1.f90?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -6,10 +6,7 @@\n ! honoured.\n !\n ! PR fortran/43665\n-\n-\n-subroutine test\n-\n+!\n interface\n   subroutine foo(x)\n     integer, intent(in) :: x"}, {"sha": "1b47135f627e69bd57881e9e82d3f2def6cdc969", "filename": "gcc/testsuite/gfortran.dg/pointer_init_9.f90", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ead8233bdae81d70bd9e603a69397ef2cff7e7e8/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_init_9.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ead8233bdae81d70bd9e603a69397ef2cff7e7e8/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_init_9.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_init_9.f90?ref=ead8233bdae81d70bd9e603a69397ef2cff7e7e8", "patch": "@@ -1,14 +0,0 @@\n-! { dg-do run }\n-!\n-! PR 55207: [F08] Variables declared in the main program should implicitly get the SAVE attribute\n-!\n-! Contributed by Tobias Burnus <burnus@gcc.gnu.org>\n-\n-  type :: c\n-  end type c\n-\n-  type(c), target :: x\n-  class(c), pointer :: px => x\n-\n-  if (.not. associated(px)) call abort()\n-end"}, {"sha": "f58a873dfb47accb9c45e5a8a9b25fdf3173fd0c", "filename": "gcc/testsuite/gfortran.dg/volatile4.f90", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fvolatile4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fvolatile4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvolatile4.f90?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -2,8 +2,6 @@\n ! { dg-options \"-O2 -fdump-tree-optimized\" }\n ! Tests whether volatile really works\n ! PR fortran/29601\n-\n-subroutine sub\n logical, volatile :: t1\n logical :: t2\n integer :: i"}, {"sha": "e42e3de3acbb1ab36b9e7b4178d533991eaadeb8", "filename": "gcc/testsuite/gfortran.dg/volatile6.f90", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fvolatile6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dab2cbf8a0d2c4210b1e2f85c3309182992a9c43/gcc%2Ftestsuite%2Fgfortran.dg%2Fvolatile6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvolatile6.f90?ref=dab2cbf8a0d2c4210b1e2f85c3309182992a9c43", "patch": "@@ -2,8 +2,6 @@\n ! { dg-options \"-O2 -fdump-tree-optimized\" }\n ! Tests whether volatile really works for arrays\n ! PR fortran/29601\n-\n-subroutine sub\n logical, allocatable, volatile :: t1(:)\n logical, allocatable :: t2(:)\n integer :: i"}]}