{"sha": "0616700cbc830a751598dce810d82a5116d24a28", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDYxNjcwMGNiYzgzMGE3NTE1OThkY2U4MTBkODJhNTExNmQyNGEyOA==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-05-15T09:19:30Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-05-15T09:19:30Z"}, "message": "re PR c++/27581 (ICE using this-pointer in static member function)\n\n\tPR c++/27581\n\t* search.c (adjust_result_of_qualified_name_lookup): Skip on\n\tinvalid context_class.\n\n\t* g++.dg/lookup/this1.C: New test.\n\nFrom-SVN: r113781", "tree": {"sha": "2749403c7fd8e6bf57753f7ce6a6456d3fd7549c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2749403c7fd8e6bf57753f7ce6a6456d3fd7549c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0616700cbc830a751598dce810d82a5116d24a28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0616700cbc830a751598dce810d82a5116d24a28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0616700cbc830a751598dce810d82a5116d24a28", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0616700cbc830a751598dce810d82a5116d24a28/comments", "author": null, "committer": null, "parents": [{"sha": "ad47b891c8d103457fc9e1e53b518a8d9610534b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad47b891c8d103457fc9e1e53b518a8d9610534b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad47b891c8d103457fc9e1e53b518a8d9610534b"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "84431385e5ca9468cc13a9bfc073456d3b23db06", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0616700cbc830a751598dce810d82a5116d24a28", "patch": "@@ -1,5 +1,9 @@\n 2006-05-15  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c++/27581\n+\t* search.c (adjust_result_of_qualified_name_lookup): Skip on\n+\tinvalid context_class.\n+\n \tPR c++/27315\n \t* pt.c (do_decl_instantiation): Return early on invalid decl.\n "}, {"sha": "6622fb5e20e3ec58d5d5b6884b78c2a2c01c0bbd", "filename": "gcc/cp/search.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Fcp%2Fsearch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Fcp%2Fsearch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsearch.c?ref=0616700cbc830a751598dce810d82a5116d24a28", "patch": "@@ -1479,7 +1479,8 @@ adjust_result_of_qualified_name_lookup (tree decl,\n \t\t\t\t\ttree qualifying_scope,\n \t\t\t\t\ttree context_class)\n {\n-  if (context_class && CLASS_TYPE_P (qualifying_scope)\n+  if (context_class && context_class != error_mark_node\n+      && CLASS_TYPE_P (qualifying_scope)\n       && DERIVED_FROM_P (qualifying_scope, context_class)\n       && BASELINK_P (decl))\n     {"}, {"sha": "1dbb9239be740260a93e747a30e42256ad49ece1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0616700cbc830a751598dce810d82a5116d24a28", "patch": "@@ -1,5 +1,8 @@\n 2006-05-15  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c++/27581\n+\t* g++.dg/lookup/this1.C: New test.\n+\n \tPR c++/27315\n \t* g++.dg/template/operator6.C: New test.\n \t* g++.dg/template/incomplete3.C: New test."}, {"sha": "20051bf7515b27f6ccc8230c37b1a01ad382515a", "filename": "gcc/testsuite/g++.dg/lookup/this1.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fthis1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0616700cbc830a751598dce810d82a5116d24a28/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fthis1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fthis1.C?ref=0616700cbc830a751598dce810d82a5116d24a28", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/27581\n+// { dg-do compile }\n+\n+struct A\n+{\n+    template<int> static void foo();\n+    static void bar() { this->A::foo<0>(); } // { dg-error \"unavailable\" }\n+};"}]}