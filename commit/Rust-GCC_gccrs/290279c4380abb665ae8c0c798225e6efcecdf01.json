{"sha": "290279c4380abb665ae8c0c798225e6efcecdf01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjkwMjc5YzQzODBhYmI2NjVhZThjMGM3OTgyMjVlNmVmY2VjZGYwMQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2016-05-23T21:21:24Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2016-05-23T21:21:24Z"}, "message": "PR c++/70584 - error with parenthesized builtin arg\n\n\t* cp-gimplify.c (cp_fold) [INDIRECT_REF]: Call\n\tmaybe_undo_parenthesized_ref.\n\nFrom-SVN: r236616", "tree": {"sha": "d4b16ed0f2546dd6bb9ca1f980b1676e3e214f8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d4b16ed0f2546dd6bb9ca1f980b1676e3e214f8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/290279c4380abb665ae8c0c798225e6efcecdf01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/290279c4380abb665ae8c0c798225e6efcecdf01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/290279c4380abb665ae8c0c798225e6efcecdf01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/290279c4380abb665ae8c0c798225e6efcecdf01/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9c62c1f364223023698e03e52b3ca3c7cb1cb99b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c62c1f364223023698e03e52b3ca3c7cb1cb99b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c62c1f364223023698e03e52b3ca3c7cb1cb99b"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "a93439cc7dc3dd3263876f92dee4a4b982196e4e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/290279c4380abb665ae8c0c798225e6efcecdf01/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/290279c4380abb665ae8c0c798225e6efcecdf01/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=290279c4380abb665ae8c0c798225e6efcecdf01", "patch": "@@ -1,5 +1,9 @@\n 2016-05-23  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/70584\n+\t* cp-gimplify.c (cp_fold) [INDIRECT_REF]: Call\n+\tmaybe_undo_parenthesized_ref.\n+\n \tPR c++/70735\n \t* pt.c (tsubst_copy): Just return a local variable from\n \tnon-template context.  Don't call rest_of_decl_compilation for"}, {"sha": "eeba26829b71eaead00b91431e34d8a5d78dbffb", "filename": "gcc/cp/cp-gimplify.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/290279c4380abb665ae8c0c798225e6efcecdf01/gcc%2Fcp%2Fcp-gimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/290279c4380abb665ae8c0c798225e6efcecdf01/gcc%2Fcp%2Fcp-gimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-gimplify.c?ref=290279c4380abb665ae8c0c798225e6efcecdf01", "patch": "@@ -1996,6 +1996,15 @@ cp_fold (tree x)\n \n       break;\n \n+    case INDIRECT_REF:\n+      /* We don't need the decltype(auto) obfuscation anymore.  */\n+      if (REF_PARENTHESIZED_P (x))\n+\t{\n+\t  tree p = maybe_undo_parenthesized_ref (x);\n+\t  return cp_fold_maybe_rvalue (p, rval_ops);\n+\t}\n+      goto unary;\n+\n     case ADDR_EXPR:\n     case REALPART_EXPR:\n     case IMAGPART_EXPR:\n@@ -2008,7 +2017,7 @@ cp_fold (tree x)\n     case BIT_NOT_EXPR:\n     case TRUTH_NOT_EXPR:\n     case FIXED_CONVERT_EXPR:\n-    case INDIRECT_REF:\n+    unary:\n \n       loc = EXPR_LOCATION (x);\n       op0 = cp_fold_maybe_rvalue (TREE_OPERAND (x, 0), rval_ops);"}, {"sha": "96def72f8f09012962737a8b366e3d265b3d67d0", "filename": "gcc/testsuite/g++.dg/other/i386-10.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/290279c4380abb665ae8c0c798225e6efcecdf01/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fi386-10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/290279c4380abb665ae8c0c798225e6efcecdf01/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fi386-10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fi386-10.C?ref=290279c4380abb665ae8c0c798225e6efcecdf01", "patch": "@@ -0,0 +1,12 @@\n+// { dg-do compile { target i?86-*-* x86_64-*-* } }\n+// { dg-options -maes }\n+\n+typedef long long __m128i __attribute__ ((__vector_size__ (16), __may_alias__));\n+\n+int main()\n+{\n+    const char index = 1;\n+    __m128i r = { };\n+\n+    r = __builtin_ia32_aeskeygenassist128 (r, (int)(index));\n+}"}]}