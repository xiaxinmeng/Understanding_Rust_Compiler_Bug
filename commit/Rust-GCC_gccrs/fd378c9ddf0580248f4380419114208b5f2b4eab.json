{"sha": "fd378c9ddf0580248f4380419114208b5f2b4eab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQzNzhjOWRkZjA1ODAyNDhmNDM4MDQxOTExNDIwOGI1ZjJiNGVhYg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@phydeaux.cygnus.com", "date": "1995-05-11T21:36:16Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "1995-05-11T21:36:16Z"}, "message": "70th Cygnus<->FSF merge\n\nFrom-SVN: r9624", "tree": {"sha": "a761b29cb12350638670b79f0323f029220952d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a761b29cb12350638670b79f0323f029220952d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd378c9ddf0580248f4380419114208b5f2b4eab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd378c9ddf0580248f4380419114208b5f2b4eab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd378c9ddf0580248f4380419114208b5f2b4eab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd378c9ddf0580248f4380419114208b5f2b4eab/comments", "author": null, "committer": null, "parents": [{"sha": "0982a4b872aa0f8c0d3ec8f8cf66aeaf0be97380", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0982a4b872aa0f8c0d3ec8f8cf66aeaf0be97380", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0982a4b872aa0f8c0d3ec8f8cf66aeaf0be97380"}], "stats": {"total": 42, "additions": 36, "deletions": 6}, "files": [{"sha": "f5f47c6dec9c0a500263f880a31b01a4104566c0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fd378c9ddf0580248f4380419114208b5f2b4eab", "patch": "@@ -1,3 +1,19 @@\n+Thu May 11 00:31:48 1995  Jason Merrill  <jason@phydeaux.cygnus.com>\n+\n+\t* typeck.c (default_conversion): Don't check for BLKmode before\n+\tpulling out the decl_constant_value.\n+\n+\t* decl.c (start_function): Clear named_labels and shadowed_labels.\n+\n+\t* typeck.c (build_function_call_real): Also synthesize methods here.\n+\n+Wed May 10 00:55:59 1995  Jason Merrill  <jason@phydeaux.cygnus.com>\n+\n+\t* decl2.c (finish_file): Synthesize exported methods before the\n+\treconsider loop.\n+\n+\t* parse.y: Move declaration of flag_new_for_scope to file scope.\n+\n Tue May  9 19:10:33 1995  Mike Stump  <mrs@cygnus.com>\n \n \t* decl2.c: Add flag_new_for_scope for new -ffor-scope flag."}, {"sha": "dc78309b806df6a3141027d78f6f57d5fa6bacf2", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=fd378c9ddf0580248f4380419114208b5f2b4eab", "patch": "@@ -10716,6 +10716,8 @@ start_function (declspecs, declarator, raises, pre_parsed_p)\n   current_function_returns_value = 0;\n   current_function_returns_null = 0;\n   warn_about_return_type = 0;\n+  named_labels = 0;\n+  shadowed_labels = 0;\n   current_function_assigns_this = 0;\n   current_function_just_assigned_this = 0;\n   current_function_parms_stored = 0;"}, {"sha": "cb326c8a5dde5b2782d98b3b1cf1e915b1b9ab11", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=fd378c9ddf0580248f4380419114208b5f2b4eab", "patch": "@@ -3112,7 +3112,13 @@ finish_file ()\n     walk_sigtables ((void (*)())0, finish_sigtable_vardecl);\n \n   for (fnname = saved_inlines; fnname; fnname = TREE_CHAIN (fnname))\n-    import_export_inline (TREE_VALUE (fnname));\n+    {\n+      tree decl = TREE_VALUE (fnname);\n+      import_export_inline (decl);\n+      if (DECL_ARTIFICIAL (decl) && ! DECL_INITIAL (decl)\n+\t  && TREE_PUBLIC (decl) && DECL_NOT_REALLY_EXTERN (decl))\n+\tsynthesize_method (decl);\n+    }\n \n   /* Now write out inline functions which had their addresses taken and\n      which were not declared virtual and which were not declared `extern\n@@ -3144,8 +3150,7 @@ finish_file ()\n \n \t    if (DECL_ARTIFICIAL (decl) && ! DECL_INITIAL (decl))\n \t      {\n-\t\tif (TREE_USED (decl)\n-\t\t    || (TREE_PUBLIC (decl) && DECL_NOT_REALLY_EXTERN (decl)))\n+\t\tif (TREE_USED (decl))\n \t\t  {\n \t\t    synthesize_method (decl);\n \t\t    if (TREE_ASM_WRITTEN (decl))"}, {"sha": "7b5fae480ccd38761a6e70c3025572bf498a3eb2", "filename": "gcc/cp/parse.y", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparse.y?ref=fd378c9ddf0580248f4380419114208b5f2b4eab", "patch": "@@ -54,6 +54,7 @@ extern int errno;\n \n extern int end_of_file;\n extern int current_class_depth;\n+extern int flag_new_for_scope;\n \n void yyerror ();\n \n@@ -3225,8 +3226,7 @@ simple_stmt:\n \t\t  clear_momentary ();\n \t\t  finish_stmt (); }\n \t| FOR\n-\t\t{ extern int flag_new_for_scope;\n-\t\t  emit_line_note (input_filename, lineno);\n+\t\t{ emit_line_note (input_filename, lineno);\n \t\t  if (flag_new_for_scope)\n \t\t    {\n \t\t      /* Conditionalize .pushlevel */"}, {"sha": "2927c32af02e6d63611cfdf6d76d14d947051d55", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd378c9ddf0580248f4380419114208b5f2b4eab/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=fd378c9ddf0580248f4380419114208b5f2b4eab", "patch": "@@ -1363,7 +1363,7 @@ default_conversion (exp)\n   if (TREE_CODE (exp) == CONST_DECL)\n     exp = DECL_INITIAL (exp);\n   /* Replace a nonvolatile const static variable with its value.  */\n-  else if (TREE_READONLY_DECL_P (exp) && DECL_MODE (exp) != BLKmode)\n+  else if (TREE_READONLY_DECL_P (exp))\n     {\n       exp = decl_constant_value (exp);\n       type = TREE_TYPE (exp);\n@@ -2373,6 +2373,13 @@ build_function_call_real (function, params, require_complete, flags)\n \n       if (DECL_INLINE (function))\n \t{\n+\t  /* Is it a synthesized method that needs to be synthesized?  */\n+\t  if (DECL_ARTIFICIAL (function) && ! flag_no_inline\n+\t      && ! DECL_INITIAL (function)\n+\t      /* Kludge: don't synthesize for default args.  */\n+\t      && current_function_decl)\n+\t    synthesize_method (function);\n+\n \t  fntype = build_type_variant (TREE_TYPE (function),\n \t\t\t\t       TREE_READONLY (function),\n \t\t\t\t       TREE_THIS_VOLATILE (function));"}]}