{"sha": "38b181d6c0e6db96732eec43f8ae31fd7f3e0c71", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhiMTgxZDZjMGU2ZGI5NjczMmVlYzQzZjhhZTMxZmQ3ZjNlMGM3MQ==", "commit": {"author": {"name": "Javier Miranda", "email": "miranda@adacore.com", "date": "2008-08-05T08:41:07Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-05T08:41:07Z"}, "message": "sem_util.adb (Collect_Interfaces_Info): Minor reformating.\n\n2008-08-05  Javier Miranda  <miranda@adacore.com>\n\n\t* sem_util.adb (Collect_Interfaces_Info): Minor reformating.\n\t* exp_ch3.adb (Build_Offset_To_Top_Functions): Code cleanup: the\n\timplementation of this routine has been simplified.\n\nFrom-SVN: r138675", "tree": {"sha": "4c97dda985e69784d7c7e9b9902793c994acaed6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4c97dda985e69784d7c7e9b9902793c994acaed6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71/comments", "author": {"login": "miranda-adacore", "id": 54413934, "node_id": "MDQ6VXNlcjU0NDEzOTM0", "avatar_url": "https://avatars.githubusercontent.com/u/54413934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miranda-adacore", "html_url": "https://github.com/miranda-adacore", "followers_url": "https://api.github.com/users/miranda-adacore/followers", "following_url": "https://api.github.com/users/miranda-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/miranda-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/miranda-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miranda-adacore/subscriptions", "organizations_url": "https://api.github.com/users/miranda-adacore/orgs", "repos_url": "https://api.github.com/users/miranda-adacore/repos", "events_url": "https://api.github.com/users/miranda-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/miranda-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "99e81db6df93386ba6d1ed7c2e6d9f504c81cace", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99e81db6df93386ba6d1ed7c2e6d9f504c81cace", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99e81db6df93386ba6d1ed7c2e6d9f504c81cace"}], "stats": {"total": 27, "additions": 11, "deletions": 16}, "files": [{"sha": "b5fac5c8594d3b5ff8afad4141dd4ea3ad2f5ca2", "filename": "gcc/ada/exp_ch3.adb", "status": "modified", "additions": 10, "deletions": 15, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71/gcc%2Fada%2Fexp_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71/gcc%2Fada%2Fexp_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch3.adb?ref=38b181d6c0e6db96732eec43f8ae31fd7f3e0c71", "patch": "@@ -2122,13 +2122,9 @@ package body Exp_Ch3 is\n \n          --  Local variables\n \n-         Ifaces_List      : Elist_Id;\n          Ifaces_Comp_List : Elist_Id;\n-         Ifaces_Tag_List  : Elist_Id;\n-         Iface_Elmt       : Elmt_Id;\n-         Comp_Elmt        : Elmt_Id;\n-\n-         pragma Warnings (Off, Ifaces_Tag_List);\n+         Iface_Comp_Elmt  : Elmt_Id;\n+         Iface_Comp       : Node_Id;\n \n       --  Start of processing for Build_Offset_To_Top_Functions\n \n@@ -2146,26 +2142,25 @@ package body Exp_Ch3 is\n             return;\n          end if;\n \n-         Collect_Interfaces_Info\n-           (Rec_Type, Ifaces_List, Ifaces_Comp_List, Ifaces_Tag_List);\n+         Collect_Interface_Components (Rec_Type, Ifaces_Comp_List);\n \n          --  For each interface type with secondary dispatch table we generate\n          --  the Offset_To_Top_Functions (required to displace the pointer in\n          --  interface conversions)\n \n-         Iface_Elmt := First_Elmt (Ifaces_List);\n-         Comp_Elmt  := First_Elmt (Ifaces_Comp_List);\n-         while Present (Iface_Elmt) loop\n+         Iface_Comp_Elmt := First_Elmt (Ifaces_Comp_List);\n+         while Present (Iface_Comp_Elmt) loop\n+            Iface_Comp := Node (Iface_Comp_Elmt);\n+            pragma Assert (Is_Interface (Related_Type (Iface_Comp)));\n \n             --  If the interface is a parent of Rec_Type it shares the primary\n             --  dispatch table and hence there is no need to build the function\n \n-            if not Is_Ancestor (Node (Iface_Elmt), Rec_Type) then\n-               Build_Offset_To_Top_Function (Iface_Comp => Node (Comp_Elmt));\n+            if not Is_Ancestor (Related_Type (Iface_Comp), Rec_Type) then\n+               Build_Offset_To_Top_Function (Iface_Comp);\n             end if;\n \n-            Next_Elmt (Iface_Elmt);\n-            Next_Elmt (Comp_Elmt);\n+            Next_Elmt (Iface_Comp_Elmt);\n          end loop;\n       end Build_Offset_To_Top_Functions;\n "}, {"sha": "96e24a4c994aa27cc04f514c5ef5ac28c123eca3", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38b181d6c0e6db96732eec43f8ae31fd7f3e0c71/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=38b181d6c0e6db96732eec43f8ae31fd7f3e0c71", "patch": "@@ -1447,7 +1447,7 @@ package body Sem_Util is\n    --  Start of processing for Collect_Interfaces_Info\n \n    begin\n-      Collect_Interfaces  (T, Ifaces_List);\n+      Collect_Interfaces (T, Ifaces_List);\n       Collect_Interface_Components (T, Comps_List);\n \n       --  Search for the record component and tag associated with each"}]}