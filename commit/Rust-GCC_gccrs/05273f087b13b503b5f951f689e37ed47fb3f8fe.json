{"sha": "05273f087b13b503b5f951f689e37ed47fb3f8fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDUyNzNmMDg3YjEzYjUwM2I1Zjk1MWY2ODllMzdlZDQ3ZmIzZjhmZQ==", "commit": {"author": {"name": "Geoff Keating", "email": "geoffk@cygnus.com", "date": "2000-08-13T21:31:09Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2000-08-13T21:31:09Z"}, "message": "In gcc/:\n\n\t* c-typeck.c (build_array_ref): Don't complain about non-lvalue\n\tarrays in C99.  Don't try to look at DECL_REGISTER of a\n\tCOMPONENT_REF.  Don't complain twice about the same error.\n\nIn gcc/testsuite/:\n\t* gcc.dg/c99-array-lval-1.c: The test on line 14 now passes.\n\nFrom-SVN: r35666", "tree": {"sha": "a558c4ca3292086cf4eb00df34bcdc9b773ca5fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a558c4ca3292086cf4eb00df34bcdc9b773ca5fa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/05273f087b13b503b5f951f689e37ed47fb3f8fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05273f087b13b503b5f951f689e37ed47fb3f8fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05273f087b13b503b5f951f689e37ed47fb3f8fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05273f087b13b503b5f951f689e37ed47fb3f8fe/comments", "author": null, "committer": null, "parents": [{"sha": "acffa7c4f866e1bd59e0483c8bd88fb3843ffcc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acffa7c4f866e1bd59e0483c8bd88fb3843ffcc8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acffa7c4f866e1bd59e0483c8bd88fb3843ffcc8"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "7ab6a193163e0916c5bc87ec793b0f8a9544b4b0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=05273f087b13b503b5f951f689e37ed47fb3f8fe", "patch": "@@ -1,5 +1,9 @@\n 2000-08-13  Geoff Keating  <geoffk@cygnus.com>\n \n+\t* c-typeck.c (build_array_ref): Don't complain about non-lvalue\n+\tarrays in C99.  Don't try to look at DECL_REGISTER of a\n+\tCOMPONENT_REF.  Don't complain twice about the same error.\n+\n \t* fixinc/inclhack.def (aix_pthread): New fix.\n \t(aix_sysmachine): New fix.\n \t* fixinc/fixincl.x: Regenerate."}, {"sha": "8459f47633d7017767d261b318529039007ad73f", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=05273f087b13b503b5f951f689e37ed47fb3f8fe", "patch": "@@ -1315,20 +1315,14 @@ build_array_ref (array, index)\n \t    return error_mark_node;\n \t}\n \n-      if (pedantic && !lvalue_p (array))\n-\t{\n-\t  if (DECL_REGISTER (array))\n-\t    pedwarn (\"ISO C forbids subscripting `register' array\");\n-\t  else\n-\t    pedwarn (\"ISO C89 forbids subscripting non-lvalue array\");\n-\t}\n-\n       if (pedantic)\n \t{\n \t  tree foo = array;\n \t  while (TREE_CODE (foo) == COMPONENT_REF)\n \t    foo = TREE_OPERAND (foo, 0);\n \t  if (TREE_CODE (foo) == VAR_DECL && DECL_REGISTER (foo))\n+\t    pedwarn (\"ISO C forbids subscripting `register' array\");\n+\t  else if (! flag_isoc99 && ! lvalue_p (foo))\n \t    pedwarn (\"ISO C89 forbids subscripting non-lvalue array\");\n \t}\n "}, {"sha": "907875a5d783b8072255c05d6cb4efe9348d5bb2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=05273f087b13b503b5f951f689e37ed47fb3f8fe", "patch": "@@ -1,3 +1,7 @@\n+2000-08-13  Geoff Keating  <geoffk@cygnus.com>\n+\n+\t* gcc.dg/c99-array-lval-1.c: The test on line 14 now passes.\n+\n 2000-08-11  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.pt/explicit81.C: New test."}, {"sha": "616ddb97988c25c304a261dccc3a6e865390d510", "filename": "gcc/testsuite/gcc.dg/c99-array-lval-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-array-lval-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05273f087b13b503b5f951f689e37ed47fb3f8fe/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-array-lval-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-array-lval-1.c?ref=05273f087b13b503b5f951f689e37ed47fb3f8fe", "patch": "@@ -11,7 +11,7 @@ void\n bar (void)\n {\n   char *t;\n-  (foo ()).c[0]; /* { dg-bogus \"non-lvalue\" \"array not decaying to lvalue\" { xfail *-*-* } } */\n+  (foo ()).c[0]; /* { dg-bogus \"non-lvalue\" \"array not decaying to lvalue\" } */\n   t = (foo ()).c; /* { dg-bogus \"non-lvalue\" \"array not decaying to lvalue\" { xfail *-*-* } } */\n   (foo ()).c + 1; /* { dg-bogus \"non-lvalue\" \"array not decaying to lvalue\" { xfail *-*-* } } */\n }"}]}