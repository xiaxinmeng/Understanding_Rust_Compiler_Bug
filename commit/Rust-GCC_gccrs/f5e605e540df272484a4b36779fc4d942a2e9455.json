{"sha": "f5e605e540df272484a4b36779fc4d942a2e9455", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjVlNjA1ZTU0MGRmMjcyNDg0YTRiMzY3NzlmYzRkOTQyYTJlOTQ1NQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2006-02-21T08:51:26Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2006-02-21T08:51:26Z"}, "message": "* doc/tm.texi (ASM_OUTPUT_SHARED_COMMON, ASM_OUTPUT_SHARED_BSS)\n\t(ASM_OUTPUT_SHARED_LOCAL): Delete.\n\t* doc/invoke.texi (-fshared-data): Delete.\n\t* common.opt (fshared-data): Delete.\n\t* varasm.c (asm_emit_uninitialised): Remove flag_shared_data handling.\n\t(assemble_static_space): Remove #if 0 code.\n\t* system.h (ASM_OUTPUT_SHARED_COMMON, ASM_OUTPUT_SHARED_BSS)\n\t(ASM_OUTPUT_SHARED_LOCAL): Poison.\n\t* config/cris/cris.h: Remove FIXME.\n\nFrom-SVN: r111330", "tree": {"sha": "72f15bf4c4b3b9550ccca2ac603f6591b2422f25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/72f15bf4c4b3b9550ccca2ac603f6591b2422f25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5e605e540df272484a4b36779fc4d942a2e9455", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5e605e540df272484a4b36779fc4d942a2e9455", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5e605e540df272484a4b36779fc4d942a2e9455", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5e605e540df272484a4b36779fc4d942a2e9455/comments", "author": null, "committer": null, "parents": [{"sha": "880b9e7bce21a96a717f80c71bd51f452be6a7fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/880b9e7bce21a96a717f80c71bd51f452be6a7fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/880b9e7bce21a96a717f80c71bd51f452be6a7fe"}], "stats": {"total": 79, "additions": 15, "deletions": 64}, "files": [{"sha": "68a099656f104a6e80befbb6f8aec643444008b1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f5e605e540df272484a4b36779fc4d942a2e9455", "patch": "@@ -1,3 +1,15 @@\n+2006-02-21  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* doc/tm.texi (ASM_OUTPUT_SHARED_COMMON, ASM_OUTPUT_SHARED_BSS)\n+\t(ASM_OUTPUT_SHARED_LOCAL): Delete.\n+\t* doc/invoke.texi (-fshared-data): Delete.\n+\t* common.opt (fshared-data): Delete.\n+\t* varasm.c (asm_emit_uninitialised): Remove flag_shared_data handling.\n+\t(assemble_static_space): Remove #if 0 code.\n+\t* system.h (ASM_OUTPUT_SHARED_COMMON, ASM_OUTPUT_SHARED_BSS)\n+\t(ASM_OUTPUT_SHARED_LOCAL): Poison.\n+\t* config/cris/cris.h: Remove FIXME.\n+\n 2006-02-21  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* doc/sourcebuild.texi (Front End Directory): No more double-colon"}, {"sha": "36e52fcaefcc226a395d9c7fcda5d9fa3bfcc61d", "filename": "gcc/common.opt", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=f5e605e540df272484a4b36779fc4d942a2e9455", "patch": "@@ -799,10 +799,6 @@ frtl-abstract-sequences\n Common Report Var(flag_rtl_seqabstr)\n Perform sequence abstraction optimization on RTL\n \n-fshared-data\n-Common Report Var(flag_shared_data)\n-Mark data as shared rather than private\n-\n fshow-column\n Common C ObjC C++ ObjC++ Report Var(flag_show_column) Init(1)\n Show column numbers in diagnostics, when available.  Default on"}, {"sha": "10a17dc4be1c1a87671a538658cbc822294af1ec", "filename": "gcc/config/cris/cris.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fconfig%2Fcris%2Fcris.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fconfig%2Fcris%2Fcris.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fcris%2Fcris.h?ref=f5e605e540df272484a4b36779fc4d942a2e9455", "patch": "@@ -1243,9 +1243,6 @@ enum cris_pic_symbol_type\n #define ASM_OUTPUT_ALIGNED_DECL_LOCAL(FILE, DECL, NAME, SIZE, ALIGN) \\\n  CRIS_ASM_OUTPUT_ALIGNED_DECL_COMMON(FILE, DECL, NAME, SIZE, ALIGN, 1)\n \n-/* FIXME: define ASM_OUTPUT_SHARED_COMMON and emit an error when it is\n-   used with -melinux and a.out.  */\n-\n /* Node: Label Output */\n \n /* Globalizing directive for a label.  */"}, {"sha": "029b43cde5a9da17ffb50aef568cb6248554ab56", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=f5e605e540df272484a4b36779fc4d942a2e9455", "patch": "@@ -761,7 +761,7 @@ See S/390 and zSeries Options.\n -fno-common  -fno-ident @gol\n -fpcc-struct-return  -fpic  -fPIC -fpie -fPIE @gol\n -fno-jump-tables @gol\n--freg-struct-return  -fshared-data  -fshort-enums @gol\n+-freg-struct-return  -fshort-enums @gol\n -fshort-double  -fshort-wchar @gol\n -fverbose-asm  -fpack-struct[=@var{n}]  -fstack-check @gol\n -fstack-limit-register=@var{reg}  -fstack-limit-symbol=@var{sym} @gol\n@@ -13001,14 +13001,6 @@ useful for building programs to run under WINE@.\n code that is not binary compatible with code generated without that switch.\n Use it to conform to a non-default application binary interface.\n \n-@item -fshared-data\n-@opindex fshared-data\n-Requests that the data and non-@code{const} variables of this\n-compilation be shared data rather than private data.  The distinction\n-makes sense only on certain operating systems, where shared data is\n-shared between processes running the same program, while private data\n-exists in one copy per process.\n-\n @item -fno-common\n @opindex fno-common\n In C, allocate even uninitialized global variables in the data section of the"}, {"sha": "604ccd62e1dd0493414a4da1e0798026993fbf85", "filename": "gcc/doc/tm.texi", "status": "modified", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fdoc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fdoc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi?ref=f5e605e540df272484a4b36779fc4d942a2e9455", "patch": "@@ -6671,12 +6671,6 @@ in place of both @code{ASM_OUTPUT_COMMON} and\n the variable's decl in order to chose what to output.\n @end defmac\n \n-@defmac ASM_OUTPUT_SHARED_COMMON (@var{stream}, @var{name}, @var{size}, @var{rounded})\n-If defined, it is similar to @code{ASM_OUTPUT_COMMON}, except that it\n-is used when @var{name} is shared.  If not defined, @code{ASM_OUTPUT_COMMON}\n-will be used.\n-@end defmac\n-\n @defmac ASM_OUTPUT_BSS (@var{stream}, @var{decl}, @var{name}, @var{size}, @var{rounded})\n A C statement (sans semicolon) to output to the stdio stream\n @var{stream} the assembler definition of uninitialized global @var{decl} named\n@@ -6709,12 +6703,6 @@ Try to use function @code{asm_output_aligned_bss} defined in file\n @file{varasm.c} when defining this macro.\n @end defmac\n \n-@defmac ASM_OUTPUT_SHARED_BSS (@var{stream}, @var{decl}, @var{name}, @var{size}, @var{rounded})\n-If defined, it is similar to @code{ASM_OUTPUT_BSS}, except that it\n-is used when @var{name} is shared.  If not defined, @code{ASM_OUTPUT_BSS}\n-will be used.\n-@end defmac\n-\n @defmac ASM_OUTPUT_LOCAL (@var{stream}, @var{name}, @var{size}, @var{rounded})\n A C statement (sans semicolon) to output to the stdio stream\n @var{stream} the assembler definition of a local-common-label named\n@@ -6746,12 +6734,6 @@ in place of both @code{ASM_OUTPUT_DECL} and\n the variable's decl in order to chose what to output.\n @end defmac\n \n-@defmac ASM_OUTPUT_SHARED_LOCAL (@var{stream}, @var{name}, @var{size}, @var{rounded})\n-If defined, it is similar to @code{ASM_OUTPUT_LOCAL}, except that it\n-is used when @var{name} is shared.  If not defined, @code{ASM_OUTPUT_LOCAL}\n-will be used.\n-@end defmac\n-\n @node Label Output\n @subsection Output and Generation of Labels\n "}, {"sha": "0769cdeccf0327689dba8680c192ba63f22348bc", "filename": "gcc/system.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=f5e605e540df272484a4b36779fc4d942a2e9455", "patch": "@@ -731,7 +731,8 @@ extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;\n \tPREDICATE_CODES SPECIAL_MODE_PREDICATES HOST_PTR_PRINTF\t\t   \\\n \tEXTRA_SECTIONS EXTRA_SECTION_FUNCTIONS READONLY_DATA_SECTION\t   \\\n \tTARGET_ASM_EXCEPTION_SECTION TARGET_ASM_EH_FRAME_SECTION\t   \\\n-\tSMALL_ARG_MAX\n+\tSMALL_ARG_MAX ASM_OUTPUT_SHARED_BSS ASM_OUTPUT_SHARED_COMMON\t   \\\n+\tASM_OUTPUT_SHARED_LOCAL\n \n /* Hooks that are no longer used.  */\n  #pragma GCC poison LANG_HOOKS_FUNCTION_MARK LANG_HOOKS_FUNCTION_FREE\t\\"}, {"sha": "4c957ba42fd60de31f7d055f975ffe652038f2f5", "filename": "gcc/varasm.c", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5e605e540df272484a4b36779fc4d942a2e9455/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=f5e605e540df272484a4b36779fc4d942a2e9455", "patch": "@@ -1547,30 +1547,6 @@ asm_emit_uninitialised (tree decl, const char *name,\n   if (destination == asm_dest_bss)\n     globalize_decl (decl);\n \n-  if (flag_shared_data)\n-    {\n-      switch (destination)\n-\t{\n-#ifdef ASM_OUTPUT_SHARED_BSS\n-\tcase asm_dest_bss:\n-\t  ASM_OUTPUT_SHARED_BSS (asm_out_file, decl, name, size, rounded);\n-\t  return;\n-#endif\n-#ifdef ASM_OUTPUT_SHARED_COMMON\n-\tcase asm_dest_common:\n-\t  ASM_OUTPUT_SHARED_COMMON (asm_out_file, name, size, rounded);\n-\t  return;\n-#endif\n-#ifdef ASM_OUTPUT_SHARED_LOCAL\n-\tcase asm_dest_local:\n-\t  ASM_OUTPUT_SHARED_LOCAL (asm_out_file, name, size, rounded);\n-\t  return;\n-#endif\n-\tdefault:\n-\t  break;\n-\t}\n-    }\n-\n   switch (destination)\n     {\n #ifdef ASM_EMIT_BSS\n@@ -2104,11 +2080,6 @@ assemble_static_space (unsigned HOST_WIDE_INT size)\n   const char *namestring;\n   rtx x;\n \n-#if 0\n-  if (flag_shared_data)\n-    switch_to_section (data_section);\n-#endif\n-\n   ASM_GENERATE_INTERNAL_LABEL (name, \"LF\", const_labelno);\n   ++const_labelno;\n   namestring = ggc_strdup (name);"}]}