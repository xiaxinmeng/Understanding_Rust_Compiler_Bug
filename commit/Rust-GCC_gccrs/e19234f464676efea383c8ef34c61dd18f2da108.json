{"sha": "e19234f464676efea383c8ef34c61dd18f2da108", "node_id": "C_kwDOANBUbNoAKGUxOTIzNGY0NjQ2NzZlZmVhMzgzYzhlZjM0YzYxZGQxOGYyZGExMDg", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2023-03-20T11:38:43Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2023-03-20T11:38:43Z"}, "message": "testsuite: Fix up 20230313.C test\n\nI've noticed this testcase FAILs on i686-linux with\n-fstack-protector-strong.\n\nsizeof (auto_vec<int, 8>) == 16, which in this case contains\n4-byte m_vec (which points to to m_auto), then 8-byte m_auto\nwhich contains just 8-byte m_vecpfx and finally 1 byte m_data,\nrest is padding.  We then try to push 2 ints to it, so 8 bytes,\nstarting at the end of m_vecpfx aka address of m_data, but there\nis just 1 byte + 3 bytes of padding.\nIn the lp64 case, I think sizeof (auto_vec<int, 8>) == 24,\nbecause there is 8-byte m_vec, 8-byte m_vecpfx and 1-byte m_char\nall with 8-byte alignment.\n\n2023-03-20  Jakub Jelinek  <jakub@redhat.com>\n\n\t* g++.dg/torture/20230313.C (auto_vec): Change m_data type\n\tfrom char to char [2 * sizeof (int)].", "tree": {"sha": "12800df0314c15b2e01cfb63bfd6404b7d88798c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/12800df0314c15b2e01cfb63bfd6404b7d88798c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e19234f464676efea383c8ef34c61dd18f2da108", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e19234f464676efea383c8ef34c61dd18f2da108", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e19234f464676efea383c8ef34c61dd18f2da108", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e19234f464676efea383c8ef34c61dd18f2da108/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5194ad1958cbfe800357571fad68be8bc8b7d915", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5194ad1958cbfe800357571fad68be8bc8b7d915", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5194ad1958cbfe800357571fad68be8bc8b7d915"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "99887ab0a3b07201072dce84e7a9fcaac95a8054", "filename": "gcc/testsuite/g++.dg/torture/20230313.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e19234f464676efea383c8ef34c61dd18f2da108/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2F20230313.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e19234f464676efea383c8ef34c61dd18f2da108/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2F20230313.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2F20230313.C?ref=e19234f464676efea383c8ef34c61dd18f2da108", "patch": "@@ -60,7 +60,7 @@ struct auto_vec : vec<T, va_heap>\n     this->release ();\n   }\n   vec<T, va_heap, int> m_auto;\n-  char m_data;\n+  char m_data[2 * sizeof (int)];\n };\n template<typename T>\n struct vec<T, va_heap>"}]}