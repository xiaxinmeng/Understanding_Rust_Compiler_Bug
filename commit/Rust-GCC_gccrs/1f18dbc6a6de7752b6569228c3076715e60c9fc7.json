{"sha": "1f18dbc6a6de7752b6569228c3076715e60c9fc7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWYxOGRiYzZhNmRlNzc1MmI2NTY5MjI4YzMwNzY3MTVlNjBjOWZjNw==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2011-04-14T18:42:44Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2011-04-14T18:42:44Z"}, "message": "cp-tree.def (SWITCH_STMT): Add an extra operand.\n\n\t* cp-tree.def (SWITCH_STMT): Add an extra operand.\n\t* cp-objcp-common.c (cp_common_init_ts): Mark it as TS_TYPED.\n\t* cp-tree.h (SWITCH_STMT_SCOPE): Define.\n\t* semantics.c (begin_switch__stmt): Pass scope to build_stmt.\n\t(finish_switch_stmt): Use SWITCH_STMT_SCOPE instead of TREE_CHAIN.\n\nFrom-SVN: r172440", "tree": {"sha": "aab9b46e5f5c409f2bcbeafb4770c9025917ebf6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aab9b46e5f5c409f2bcbeafb4770c9025917ebf6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f18dbc6a6de7752b6569228c3076715e60c9fc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f18dbc6a6de7752b6569228c3076715e60c9fc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f18dbc6a6de7752b6569228c3076715e60c9fc7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f18dbc6a6de7752b6569228c3076715e60c9fc7/comments", "author": null, "committer": null, "parents": [{"sha": "5e60198b61a66d78922ffd5742440ac72c121434", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e60198b61a66d78922ffd5742440ac72c121434", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e60198b61a66d78922ffd5742440ac72c121434"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "86ee781d126c39449e8f626c72174ea9b5e8e559", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1f18dbc6a6de7752b6569228c3076715e60c9fc7", "patch": "@@ -1,3 +1,11 @@\n+2011-04-14  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* cp-tree.def (SWITCH_STMT): Add an extra operand.\n+\t* cp-objcp-common.c (cp_common_init_ts): Mark it as TS_TYPED.\n+\t* cp-tree.h (SWITCH_STMT_SCOPE): Define.\n+\t* semantics.c (begin_switch__stmt): Pass scope to build_stmt.\n+\t(finish_switch_stmt): Use SWITCH_STMT_SCOPE instead of TREE_CHAIN.\n+\n 2011-04-14  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* cp-tree.def (IF_STMT): Add an extra operand."}, {"sha": "6421f6f26564c070510c1f76f5f4b019a9fa2c68", "filename": "gcc/cp/cp-objcp-common.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fcp-objcp-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fcp-objcp-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-objcp-common.c?ref=1f18dbc6a6de7752b6569228c3076715e60c9fc7", "patch": "@@ -239,13 +239,13 @@ cp_common_init_ts (void)\n   MARK_TS_COMMON (TYPENAME_TYPE);\n   MARK_TS_COMMON (TYPEOF_TYPE);\n   MARK_TS_COMMON (BASELINK);\n-  MARK_TS_COMMON (SWITCH_STMT);\n   MARK_TS_COMMON (TYPE_PACK_EXPANSION);\n   MARK_TS_COMMON (EXPR_PACK_EXPANSION);\n   MARK_TS_COMMON (DECLTYPE_TYPE);\n   MARK_TS_COMMON (BOUND_TEMPLATE_TEMPLATE_PARM);\n   MARK_TS_COMMON (UNBOUND_CLASS_TEMPLATE);\n \n+  MARK_TS_TYPED (SWITCH_STMT);\n   MARK_TS_TYPED (IF_STMT);\n   MARK_TS_TYPED (FOR_STMT);\n   MARK_TS_TYPED (RANGE_FOR_STMT);"}, {"sha": "42840a81c10f6deb3b639d5386b127c016580325", "filename": "gcc/cp/cp-tree.def", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fcp-tree.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fcp-tree.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.def?ref=1f18dbc6a6de7752b6569228c3076715e60c9fc7", "patch": "@@ -313,8 +313,9 @@ DEFTREECODE (BREAK_STMT, \"break_stmt\", tcc_statement, 0)\n DEFTREECODE (CONTINUE_STMT, \"continue_stmt\", tcc_statement, 0)\n \n /* Used to represent a 'switch' statement. The operands are\n-   SWITCH_STMT_COND, SWITCH_STMT_BODY and SWITCH_STMT_TYPE, respectively.  */\n-DEFTREECODE (SWITCH_STMT, \"switch_stmt\", tcc_statement, 3)\n+   SWITCH_STMT_COND, SWITCH_STMT_BODY, SWITCH_STMT_TYPE, and\n+   SWITCH_STMT_SCOPE, respectively.  */\n+DEFTREECODE (SWITCH_STMT, \"switch_stmt\", tcc_statement, 4)\n \n /* Used to represent an expression statement.  Use `EXPR_STMT_EXPR' to\n    obtain the expression.  */"}, {"sha": "e5388259ae68a76c6724b8248c46384dd8e2995e", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=1f18dbc6a6de7752b6569228c3076715e60c9fc7", "patch": "@@ -3823,6 +3823,7 @@ more_aggr_init_expr_args_p (const aggr_init_expr_arg_iterator *iter)\n #define SWITCH_STMT_COND(NODE)\tTREE_OPERAND (SWITCH_STMT_CHECK (NODE), 0)\n #define SWITCH_STMT_BODY(NODE)\tTREE_OPERAND (SWITCH_STMT_CHECK (NODE), 1)\n #define SWITCH_STMT_TYPE(NODE)\tTREE_OPERAND (SWITCH_STMT_CHECK (NODE), 2)\n+#define SWITCH_STMT_SCOPE(NODE)\tTREE_OPERAND (SWITCH_STMT_CHECK (NODE), 3)\n \n /* STMT_EXPR accessor.  */\n #define STMT_EXPR_STMT(NODE)\tTREE_OPERAND (STMT_EXPR_CHECK (NODE), 0)"}, {"sha": "b7171ed324b13e99dc7ddf630507a3b06ba90274", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f18dbc6a6de7752b6569228c3076715e60c9fc7/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=1f18dbc6a6de7752b6569228c3076715e60c9fc7", "patch": "@@ -1018,10 +1018,9 @@ begin_switch_stmt (void)\n {\n   tree r, scope;\n \n-  r = build_stmt (input_location, SWITCH_STMT, NULL_TREE, NULL_TREE, NULL_TREE);\n-\n   scope = do_pushlevel (sk_block);\n-  TREE_CHAIN (r) = scope;\n+  r = build_stmt (input_location, SWITCH_STMT, NULL_TREE, NULL_TREE, NULL_TREE, scope);\n+\n   begin_cond (&SWITCH_STMT_COND (r));\n \n   return r;\n@@ -1077,8 +1076,8 @@ finish_switch_stmt (tree switch_stmt)\n   pop_switch ();\n   finish_stmt ();\n \n-  scope = TREE_CHAIN (switch_stmt);\n-  TREE_CHAIN (switch_stmt) = NULL;\n+  scope = SWITCH_STMT_SCOPE (switch_stmt);\n+  SWITCH_STMT_SCOPE (switch_stmt) = NULL;\n   add_stmt (do_poplevel (scope));\n }\n "}]}