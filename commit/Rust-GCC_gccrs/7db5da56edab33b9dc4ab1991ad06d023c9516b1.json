{"sha": "7db5da56edab33b9dc4ab1991ad06d023c9516b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RiNWRhNTZlZGFiMzNiOWRjNGFiMTk5MWFkMDZkMDIzYzk1MTZiMQ==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2008-06-04T21:04:32Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2008-06-04T21:04:32Z"}, "message": "re PR fortran/36322 (ICE with PROCEDURE using a complicated interface)\n\n2008-06-04  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/36322\n\tPR fortran/36275\n\t* resolve.c (resolve_symbol): Correctly copy the interface for a\n\tPROCEDURE declaration.\n\n\n2008-06-04  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/36322\n\tPR fortran/36275\n\t* gfortran.dg/proc_decl_2.f90: Extended.\n\nFrom-SVN: r136372", "tree": {"sha": "aaf7d563098fc653c55f7e39fc0a07696b054878", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aaf7d563098fc653c55f7e39fc0a07696b054878"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7db5da56edab33b9dc4ab1991ad06d023c9516b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7db5da56edab33b9dc4ab1991ad06d023c9516b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7db5da56edab33b9dc4ab1991ad06d023c9516b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7db5da56edab33b9dc4ab1991ad06d023c9516b1/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b30199b8c0f408ad954bacfffeb0d38b56e394c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30199b8c0f408ad954bacfffeb0d38b56e394c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b30199b8c0f408ad954bacfffeb0d38b56e394c9"}], "stats": {"total": 44, "additions": 39, "deletions": 5}, "files": [{"sha": "826b40972f9bb5e980d91f14a1058c6777afca2c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7db5da56edab33b9dc4ab1991ad06d023c9516b1", "patch": "@@ -1,3 +1,10 @@\n+2008-06-04  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/36322\n+\tPR fortran/36275\n+\t* resolve.c (resolve_symbol): Correctly copy the interface for a\n+\tPROCEDURE declaration.\n+\n 2008-06-02  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/36361"}, {"sha": "b5b76b6f7a04f83df0fef943fc3f83d63d234591", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=7db5da56edab33b9dc4ab1991ad06d023c9516b1", "patch": "@@ -7893,11 +7893,12 @@ resolve_symbol (gfc_symbol *sym)\n       /* Get the attributes from the interface (now resolved).  */\n       if (sym->ts.interface->attr.if_source || sym->ts.interface->attr.intrinsic)\n \t{\n-\t  sym->ts.type = sym->ts.interface->ts.type;\n-\t  sym->ts.kind = sym->ts.interface->ts.kind;\n-\t  sym->attr.function = sym->ts.interface->attr.function;\n-\t  sym->attr.subroutine = sym->ts.interface->attr.subroutine;\n-\t  copy_formal_args (sym, sym->ts.interface);\n+\t  gfc_symbol *ifc = sym->ts.interface;\n+\t  sym->ts = ifc->ts;\n+\t  sym->ts.interface = ifc;\n+\t  sym->attr.function = ifc->attr.function;\n+\t  sym->attr.subroutine = ifc->attr.subroutine;\n+\t  copy_formal_args (sym, ifc);\n \t}\n       else if (sym->ts.interface->name[0] != '\\0')\n \t{"}, {"sha": "14414d95901fdacea6d11e70f500fca77442474c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7db5da56edab33b9dc4ab1991ad06d023c9516b1", "patch": "@@ -1,3 +1,9 @@\n+2008-06-04  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/36322\n+\tPR fortran/36275\n+\t* gfortran.dg/proc_decl_2.f90: Extended.\n+\n 2008-06-04  Joseph Myers  <joseph@codesourcery.com>\n             Maxim Kuvyrkov  <maxim@codesourcery.com>\n "}, {"sha": "a16b4db5f019613af7306373793c6c12dd7b2471", "filename": "gcc/testsuite/gfortran.dg/proc_decl_2.f90", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7db5da56edab33b9dc4ab1991ad06d023c9516b1/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_2.f90?ref=7db5da56edab33b9dc4ab1991ad06d023c9516b1", "patch": "@@ -4,16 +4,27 @@\n \n module m\n \n+  use ISO_C_BINDING\n+\n   abstract interface\n     subroutine csub() bind(c)\n     end subroutine csub\n   end interface\n \n+  integer, parameter :: ckind = C_FLOAT_COMPLEX\n+  abstract interface\n+    function stub() bind(C)\n+      import ckind\n+      complex(ckind) stub\n+    end function\n+  end interface\n+\n   procedure():: mp1\n   procedure(real), private:: mp2\n   procedure(mfun), public:: mp3\n   procedure(csub), public, bind(c) :: c, d\n   procedure(csub), public, bind(c, name=\"myB\") :: b\n+  procedure(stub), bind(C) :: e\n \n contains\n \n@@ -32,6 +43,15 @@ end subroutine a\n     procedure(a), optional :: b\n   end subroutine bar\n \n+  subroutine bar2(x)\n+    abstract interface\n+      character function abs_fun()\n+      end function\n+    end interface\n+    procedure(abs_fun):: x\n+  end subroutine\n+\n+\n end module\n \n "}]}