{"sha": "ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNlNGQxYWNhNjIzMmEyNmY0NGU4ZmE1NDM1ZjQyOWY5YmNkZTZkYg==", "commit": {"author": {"name": "Robert Suchanek", "email": "robert.suchanek@imgtec.com", "date": "2015-01-16T12:31:01Z"}, "committer": {"name": "Matthew Fortune", "email": "mpf@gcc.gnu.org", "date": "2015-01-16T12:31:01Z"}, "message": "Account for high/lo_sum simplification with displacements\n\ngcc/\n\t* simplify-rtx.c (simplify_replace_fn_rtx): Simplify (lo_sum\n\t(high x) y) to y if x and y have the same base.\n\ngcc/testsuite/\n\t* gcc.c-torture/compile/20150108.c: New test.\n\nFrom-SVN: r219729", "tree": {"sha": "24118a1005abdf80d65240f679378bcda19c1867", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24118a1005abdf80d65240f679378bcda19c1867"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/comments", "author": null, "committer": null, "parents": [{"sha": "4baa25d3fbee279835c1e7e53ef1460d41291b28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4baa25d3fbee279835c1e7e53ef1460d41291b28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4baa25d3fbee279835c1e7e53ef1460d41291b28"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "b9f45a05201c7984841c92ecdd45d40e1533c0af", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "patch": "@@ -1,3 +1,8 @@\n+2015-01-16  Robert Suchanek  <robert.suchanek@imgtec.com>\n+\n+\t* simplify-rtx.c (simplify_replace_fn_rtx): Simplify (lo_sum\n+\t(high x) y) to y if x and y have the same base.\n+\n 2015-01-16  James Greenhalgh  <james.greenhalgh@arm.com>\n \n \t* config/arm/cortex-a57.md: New."}, {"sha": "d26267d1717280056082a0fb156e49d929ef82a4", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "patch": "@@ -539,9 +539,15 @@ simplify_replace_fn_rtx (rtx x, const_rtx old_rtx,\n \t  op0 = simplify_replace_fn_rtx (XEXP (x, 0), old_rtx, fn, data);\n \t  op1 = simplify_replace_fn_rtx (XEXP (x, 1), old_rtx, fn, data);\n \n-\t  /* (lo_sum (high x) x) -> x  */\n-\t  if (GET_CODE (op0) == HIGH && rtx_equal_p (XEXP (op0, 0), op1))\n-\t    return op1;\n+\t  /* (lo_sum (high x) y) -> y where x and y have the same base.  */\n+\t  if (GET_CODE (op0) == HIGH)\n+\t    {\n+\t      rtx base0, base1, offset0, offset1;\n+\t      split_const (XEXP (op0, 0), &base0, &offset0);\n+\t      split_const (op1, &base1, &offset1);\n+\t      if (rtx_equal_p (base0, base1))\n+\t\treturn op1;\n+\t    }\n \n \t  if (op0 == XEXP (x, 0) && op1 == XEXP (x, 1))\n \t    return x;"}, {"sha": "ffc6794ffe4db72eecb3d16ad06adc8bb9a80448", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "patch": "@@ -1,3 +1,7 @@\n+2015-01-16  Robert Suchanek  <robert.suchanek@imgtec.com>\n+\n+\t* gcc.c-torture/compile/20150108.c: New test.\n+\n 2015-01-16  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc.target/visium: New directory."}, {"sha": "62ba3721bcda83e50b19eba7bd25c411bbaa09f1", "filename": "gcc/testsuite/gcc.c-torture/compile/20150108.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20150108.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ece4d1aca6232a26f44e8fa5435f429f9bcde6db/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20150108.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20150108.c?ref=ece4d1aca6232a26f44e8fa5435f429f9bcde6db", "patch": "@@ -0,0 +1,22 @@\n+long long a[10];\n+long long b, c, d, k, m, n, o, p, q, r, s, t, u, v, w;\n+int e, f, g, h, i, j, l, x;\n+\n+int fn1 () {\n+  for (; x; x++)\n+    if (x & 1)\n+      s = h | g;\n+    else\n+      s = f | e;\n+  l = ~0;\n+  m = 1 | k;\n+  n = i;\n+  o = j;\n+  p = f | e;\n+  q = h | g;\n+  w = d | c | a[1];\n+  t = c;\n+  v = b | c;\n+  u = v;\n+  r = b | a[4];\n+  return e;"}]}