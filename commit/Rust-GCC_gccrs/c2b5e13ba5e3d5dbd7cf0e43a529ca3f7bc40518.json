{"sha": "c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzJiNWUxM2JhNWUzZDVkYmQ3Y2YwZTQzYTUyOWNhM2Y3YmM0MDUxOA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@act-europe.fr", "date": "2004-04-19T15:24:27Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-04-19T15:24:27Z"}, "message": "Makefile.in: Fix errors introduced in previous change (in particular...\n\n\t* Makefile.in: Fix errors introduced in previous change (in particular,\n\terrors when building gnattools were ignored).\n\tCode clean up and simplification.\n\tupdate comments.\n\tRemove temporary debug code introduced by mistake in previous check in.\n\tPrefer GNU Make syntax over complex and error-prone sh syntax.\n\t(gnatlib-zcx): New target.\n\t(ada.all.cross): Merged with gnattools-cross target.\n\nFrom-SVN: r80857", "tree": {"sha": "0d6ebe3186c9115906b60794c163d33dd9e1194d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d6ebe3186c9115906b60794c163d33dd9e1194d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518/comments", "author": null, "committer": null, "parents": [{"sha": "7324bf49ceb4aaca385ae0c32095901b96a2c969", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7324bf49ceb4aaca385ae0c32095901b96a2c969", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7324bf49ceb4aaca385ae0c32095901b96a2c969"}], "stats": {"total": 94, "additions": 40, "deletions": 54}, "files": [{"sha": "0028f1ca8a7791ec90b3fc55b2fc1969644e64dc", "filename": "libada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518/libada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518/libada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FChangeLog?ref=c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "patch": "@@ -1,3 +1,14 @@\n+2004-04-19  Arnaud Charlet  <charlet@act-europe.fr>\n+\n+\t* Makefile.in: Fix errors introduced in previous change (in particular,\n+\terrors when building gnattools were ignored).\n+\tCode clean up and simplification.\n+\tupdate comments.\n+\tRemove temporary debug code introduced by mistake in previous check in.\n+\tPrefer GNU Make syntax over complex and error-prone sh syntax.\n+\t(gnatlib-zcx): New target.\n+\t(ada.all.cross): Merged with gnattools-cross target.\n+\n 2004-04-17  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n \t* configure.ac: It's gnatlib-plain in the Makefile, not"}, {"sha": "5e41f92c0f5a91ec4dcd76a198e56f86ae8d178a", "filename": "libada/Makefile.in", "status": "modified", "additions": 29, "deletions": 54, "changes": 83, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518/libada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518/libada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FMakefile.in?ref=c2b5e13ba5e3d5dbd7cf0e43a529ca3f7bc40518", "patch": "@@ -117,84 +117,59 @@ ADA_TOOLS_FLAGS_TO_PASS=\\\n         \"GNATLINK=../../gnatlink\"       \\\n         \"GNATBIND=../../gnatbind\"\n \n-fyi:\n-\techo $(tmake_file)\n-\n # Rules to build gnatlib.\n-.PHONY: gnatlib gnatlib-plain gnatlib-sjlj gnatlib-shared\n+.PHONY: gnatlib gnatlib-plain gnatlib-sjlj gnatlib-zcx gnatlib-shared\n gnatlib: @default_gnatlib_target@\n \n-gnatlib-plain:\n-\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n-\t  GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n-\t  GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n-\t  TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n-\t  THREAD_KIND=\"$(THREAD_KIND)\" \\\n-\t  TRACE=\"$(TRACE)\" \\\n-\t  gnatlib ; \\\n-\n-gnatlib-sjlj:\n-\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n-\t  GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n-\t  GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n-\t  TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n-\t  THREAD_KIND=\"$(THREAD_KIND)\" \\\n-\t  TRACE=\"$(TRACE)\" \\\n-\t  gnatlib-sjlj ; \\\n-\n-gnatlib-shared:\n+gnatlib-plain gnatlib-sjlj gnatlib-zcx gnatlib-shared:\n \t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n \t  GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n \t  GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n-\t  GNATLIBLDFLAGS=\"$(GNATLIBLDFLAGS)\" \\\n \t  TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n \t  THREAD_KIND=\"$(THREAD_KIND)\" \\\n-\t  TRACE=\"$(TRACE)\" \\\n-\t  gnatlib-shared ; \\\n+\t  TRACE=\"$(TRACE)\" $@\n \n .PHONY: rts-zfp rts-ravenscar\n-rts-zfp:\n-\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n-\t  GNATMAKE=../gnatmake-cross \\\n-\t  rts-zfp\n-\n-rts-ravenscar:\n+rts-zfp rts-ravenscar:\n \t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n-\t  GNATMAKE=../gnatmake-cross \\\n-\t  rts-ravenscar\n+\t  GNATMAKE=../gnatmake-cross $@\n \n # Rules to build gnattools.\n # For cross builds of gnattools,\n # put the host RTS dir first in the PATH to hide the default runtime\n # files that are among the sources\n RTS_DIR:=$(strip $(subst \\,/,$(shell gnatls -v | grep adalib )))\n+\n+ifeq ($(build),$(target))\n+  GNATTOOLS = gnattools-native\n+else\n+  GNATTOOLS = gnattools-cross\n+endif\n+\n .PHONY: gnattools regnattools\n-gnattools: gnatlib\n-\tif test $(build) = $(target) ; then \\\n-\t  $(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n-\t    ADA_INCLUDES=\"-I- -I../rts\" \\\n-\t    CC=\"../../xgcc -B../../\" STAGE_PREFIX=../../  gnattools1 ; \\\n-\t  $(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2 ; \\\n-\t  $(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools3 ; \\\n-\telse \\\n-\t  $(MAKE)  -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n-\t    ADA_INCLUDES=\"-I$(RTS_DIR)../adainclude -I$(RTS_DIR)\" \\\n-\t    GNATMAKE=\"gnatmake\" \\\n-\t    GNATBIND=\"gnatbind\" \\\n-\t    GNATLINK=\"gnatlink\" \\\n-\t    LIBGNAT=\"\" \\\n-\t    gnattools1-re gnattools2 gnattools4 ; \\\n-\t  $(MAKE) $(FLAGS_TO_PASS) ada.all.cross ; \\\n-\tfi\n+gnattools: $(GNATTOOLS)\n+\n+gnattools-native: gnatlib\n+\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n+\t  ADA_INCLUDES=\"-I- -I../rts\" \\\n+\t  CC=\"../../xgcc -B../../\" STAGE_PREFIX=../../ gnattools1\n+\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2\n+\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools3\n \n regnattools:\n \t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools1-re\n \t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2\n \t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools3\n \n-# It's unclear whether this is even needed, and if so whether it should run\n-# *before* the rest of crossgnattools or *after* it.\n-ada.all.cross:\n+gnattools-cross: gnatlib\n+\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n+\t  ADA_INCLUDES=\"-I$(RTS_DIR)../adainclude -I$(RTS_DIR)\" \\\n+\t  GNATMAKE=\"gnatmake\" \\\n+\t  GNATBIND=\"gnatbind\" \\\n+\t  GNATLINK=\"gnatlink\" \\\n+\t  LIBGNAT=\"\" \\\n+\t  gnattools1-re gnattools2 gnattools4\n+\t# rename cross tools, as expected by the GCC makefile when installing\n \tif [ -f $(GCC_DIR)/gnatbind$(exeext) ] ; then \\\n \t  mv $(GCC_DIR)/gnatbind$(exeext) $(GCC_DIR)/gnatbind-cross$(exeext); \\\n \tfi"}]}