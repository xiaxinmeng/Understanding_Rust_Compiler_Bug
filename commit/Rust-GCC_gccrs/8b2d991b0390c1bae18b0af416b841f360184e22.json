{"sha": "8b2d991b0390c1bae18b0af416b841f360184e22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIyZDk5MWIwMzkwYzFiYWUxOGIwYWY0MTZiODQxZjM2MDE4NGUyMg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2018-01-18T15:57:48Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-01-18T15:57:48Z"}, "message": "re PR ipa/83619 (ICE in inliner: caller edge count does not match BB count)\n\n\n\tPR ipa/83619\n\t* g++.dg/torture/pr83619.C: New testcase.\n\t* cgraph.c (cgraph_edge::redirect_call_stmt_to_callee): Update edge\n\tfrequencies.\n\nFrom-SVN: r256850", "tree": {"sha": "f1a5bfbdb2c85fd876a4e72f9deea404e93a5e4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1a5bfbdb2c85fd876a4e72f9deea404e93a5e4e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b2d991b0390c1bae18b0af416b841f360184e22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b2d991b0390c1bae18b0af416b841f360184e22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b2d991b0390c1bae18b0af416b841f360184e22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b2d991b0390c1bae18b0af416b841f360184e22/comments", "author": null, "committer": null, "parents": [{"sha": "1f0267acfd4cc3d2582b41c7470e81fec9972a83", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f0267acfd4cc3d2582b41c7470e81fec9972a83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f0267acfd4cc3d2582b41c7470e81fec9972a83"}], "stats": {"total": 80, "additions": 80, "deletions": 0}, "files": [{"sha": "fcbd840a7076af196046117aec5ff7777e3275f7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8b2d991b0390c1bae18b0af416b841f360184e22", "patch": "@@ -1,3 +1,9 @@\n+2018-01-18  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/83619\n+\t* cgraph.c (cgraph_edge::redirect_call_stmt_to_callee): Update edge\n+\tfrequencies.\n+\n 2018-01-18  Boris Kolpackov  <boris@codesynthesis.com>\n \n         PR other/70268"}, {"sha": "9a7d54d7ceedbdeaa6f7898ecb534806b3389fd7", "filename": "gcc/cgraph.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=8b2d991b0390c1bae18b0af416b841f360184e22", "patch": "@@ -1327,6 +1327,7 @@ cgraph_edge::redirect_call_stmt_to_callee (void)\n \t  e->speculative = false;\n \t  e->caller->set_call_stmt_including_clones (e->call_stmt, new_stmt,\n \t\t\t\t\t\t     false);\n+\t  e->count = gimple_bb (e->call_stmt)->count;\n \n \t  /* Fix edges for BUILT_IN_CHKP_BNDRET calls attached to the\n \t     processed call stmt.  */\n@@ -1346,6 +1347,7 @@ cgraph_edge::redirect_call_stmt_to_callee (void)\n \t    }\n \n \t  e2->speculative = false;\n+\t  e2->count = gimple_bb (e2->call_stmt)->count;\n \t  ref->speculative = false;\n \t  ref->stmt = NULL;\n \t  /* Indirect edges are not both in the call site hash."}, {"sha": "c45345f7790beb5ddf7a0682d030e8fb5dffbc52", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8b2d991b0390c1bae18b0af416b841f360184e22", "patch": "@@ -1,3 +1,8 @@\n+2018-01-18  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/83619\n+\t* g++.dg/torture/pr83619.C: New testcase.\n+\n 2018-01-18  Christophe Lyon <christophe.lyon@linaro.org>\n \n \t* lib/target-supports.exp (check_effective_target_arm_arch_FUNC_ok):"}, {"sha": "a5ca5372f18befafa7ffe486a9497e3e5409b764", "filename": "gcc/testsuite/g++.dg/torture/pr83619.C", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr83619.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b2d991b0390c1bae18b0af416b841f360184e22/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr83619.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr83619.C?ref=8b2d991b0390c1bae18b0af416b841f360184e22", "patch": "@@ -0,0 +1,67 @@\n+// { dg-do compile }\n+int a;\n+class d\n+{\n+public:\n+  virtual unsigned c ();\n+};\n+class e;\n+class i\n+{\n+  void h ();\n+\n+public:\n+  void\n+  operator= (e *f)\n+  {\n+    j<int>::c (f);\n+    h ();\n+  }\n+  template <class> struct j\n+  {\n+    static void\n+    c (e *g)\n+    {\n+      g->c ();\n+    }\n+  };\n+};\n+class k;\n+class l\n+{\n+public:\n+  l (int);\n+  k *operator-> ();\n+};\n+class e : public d\n+{\n+};\n+class m final : e\n+{\n+  unsigned c ();\n+};\n+class k\n+{\n+public:\n+  virtual int o (e *) = 0;\n+};\n+class H : d, k\n+{\n+  int o (e *);\n+  i n;\n+};\n+unsigned\n+m::c ()\n+{\n+  l b = 0;\n+  b->o (this);\n+  return a;\n+}\n+int\n+H::o (e *p)\n+{\n+  n = p;\n+  return a;\n+}\n+\n+"}]}