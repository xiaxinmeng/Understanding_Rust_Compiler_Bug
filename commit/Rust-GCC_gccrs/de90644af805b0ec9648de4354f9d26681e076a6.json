{"sha": "de90644af805b0ec9648de4354f9d26681e076a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGU5MDY0NGFmODA1YjBlYzk2NDhkZTQzNTRmOWQyNjY4MWUwNzZhNg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-03-31T23:03:20Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-03-31T23:03:20Z"}, "message": "libgo: Set name of test when using DejaGNU tests.\n\nFrom-SVN: r171805", "tree": {"sha": "243d79a0e22b59f9a03224062a755bab9b908b3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/243d79a0e22b59f9a03224062a755bab9b908b3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/de90644af805b0ec9648de4354f9d26681e076a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de90644af805b0ec9648de4354f9d26681e076a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de90644af805b0ec9648de4354f9d26681e076a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de90644af805b0ec9648de4354f9d26681e076a6/comments", "author": null, "committer": null, "parents": [{"sha": "300d83d9de11381aa48273d5bdacb006955aa85f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/300d83d9de11381aa48273d5bdacb006955aa85f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/300d83d9de11381aa48273d5bdacb006955aa85f"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "cf6975d2db93195084d12a2f98a59a1433d59144", "filename": "libgo/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=de90644af805b0ec9648de4354f9d26681e076a6", "patch": "@@ -1551,7 +1551,7 @@ CHECK = \\\n \tprefix=`if test \"$(@D)\" = \"regexp\"; then echo regexp-test; else dirname $(@D); fi`; \\\n \ttest \"$${prefix}\" != \".\" || prefix=\"$(@D)\"; \\\n \tif test \"$(use_dejagnu)\" = \"yes\"; then \\\n-\t  $(SHELL) $(srcdir)/testsuite/gotest --dejagnu=yes --basedir=$(srcdir) --srcdir=$(srcdir)/go/$(@D) --prefix=\"libgo_$${prefix}\" --pkgfiles=\"$(go_$(subst /,_,$(@D))_files)\" $(GOTESTFLAGS); \\\n+\t  $(SHELL) $(srcdir)/testsuite/gotest --dejagnu=yes --basedir=$(srcdir) --srcdir=$(srcdir)/go/$(@D) --prefix=\"libgo_$${prefix}\" --pkgfiles=\"$(go_$(subst /,_,$(@D))_files)\" --testname=\"$(@D)\" $(GOTESTFLAGS); \\\n \telse \\\n \t  if $(SHELL) $(srcdir)/testsuite/gotest --basedir=$(srcdir) --srcdir=$(srcdir)/go/$(@D) --prefix=\"libgo_$${prefix}\" --pkgfiles=\"$(go_$(subst /,_,$(@D))_files)\" $(GOTESTFLAGS) >>$@-testlog 2>&1; then \\\n \t    echo \"PASS: $(@D)\"; \\"}, {"sha": "306b9e43d4329245c3ae52f6546cf5835f33aaae", "filename": "libgo/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=de90644af805b0ec9648de4354f9d26681e076a6", "patch": "@@ -1881,7 +1881,7 @@ CHECK = \\\n \tprefix=`if test \"$(@D)\" = \"regexp\"; then echo regexp-test; else dirname $(@D); fi`; \\\n \ttest \"$${prefix}\" != \".\" || prefix=\"$(@D)\"; \\\n \tif test \"$(use_dejagnu)\" = \"yes\"; then \\\n-\t  $(SHELL) $(srcdir)/testsuite/gotest --dejagnu=yes --basedir=$(srcdir) --srcdir=$(srcdir)/go/$(@D) --prefix=\"libgo_$${prefix}\" --pkgfiles=\"$(go_$(subst /,_,$(@D))_files)\" $(GOTESTFLAGS); \\\n+\t  $(SHELL) $(srcdir)/testsuite/gotest --dejagnu=yes --basedir=$(srcdir) --srcdir=$(srcdir)/go/$(@D) --prefix=\"libgo_$${prefix}\" --pkgfiles=\"$(go_$(subst /,_,$(@D))_files)\" --testname=\"$(@D)\" $(GOTESTFLAGS); \\\n \telse \\\n \t  if $(SHELL) $(srcdir)/testsuite/gotest --basedir=$(srcdir) --srcdir=$(srcdir)/go/$(@D) --prefix=\"libgo_$${prefix}\" --pkgfiles=\"$(go_$(subst /,_,$(@D))_files)\" $(GOTESTFLAGS) >>$@-testlog 2>&1; then \\\n \t    echo \"PASS: $(@D)\"; \\"}, {"sha": "abfaaad08f06e38f11e66a2185637ae3aa846546", "filename": "libgo/testsuite/gotest", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2Ftestsuite%2Fgotest", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2Ftestsuite%2Fgotest", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Ftestsuite%2Fgotest?ref=de90644af805b0ec9648de4354f9d26681e076a6", "patch": "@@ -33,6 +33,7 @@ keep=false\n prefix=\n dejagnu=no\n timeout=60\n+testname=\"\"\n while $loop; do\n \tcase \"x$1\" in\n         x--srcdir)\n@@ -93,6 +94,15 @@ while $loop; do\n \t\ttimeout=`echo $1 | sed -e 's/^--timeout=//'`\n \t\tshift\n \t\t;;\n+\tx--testname)\n+\t\ttestname=$2\n+\t\tshift\n+\t\tshift\n+\t\t;;\n+\tx--testname=*)\n+\t\ttestname=`echo $1 | sed -e 's/^--testname=//'`\n+\t\tshift\n+\t\t;;\n \tx-*)\n \t\tloop=false\n \t\t;;\n@@ -386,6 +396,10 @@ xyes)\n \tcd ../testsuite\n \trm -rf _obj _test\n \tmkdir _obj _test\n+\tif test \"$testname\" != \"\"; then\n+\t    GOTESTNAME=\"$testname\"\n+\t    export GOTESTNAME\n+\tfi\n \t$MAKE check RUNTESTFLAGS=\"$RUNTESTFLAGS GOTEST_TMPDIR=$DIR\"\n \t# Useful when using make check-target-libgo\n \tcat libgo.log >> libgo-all.log"}, {"sha": "0b887ac3efdd7cfd3df94f40bb24db648410a51c", "filename": "libgo/testsuite/libgo.testmain/testmain.exp", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2Ftestsuite%2Flibgo.testmain%2Ftestmain.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de90644af805b0ec9648de4354f9d26681e076a6/libgo%2Ftestsuite%2Flibgo.testmain%2Ftestmain.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Ftestsuite%2Flibgo.testmain%2Ftestmain.exp?ref=de90644af805b0ec9648de4354f9d26681e076a6", "patch": "@@ -57,4 +57,10 @@ if ![ string match \"\" $comp_output ] {\n set result [libgo_load \"./a.exe\" \"-test.short\" \"\"]\n \n set status [lindex $result 0]\n-$status go\n+\n+set name \"go\"\n+if [info exists env(GOTESTNAME)] {\n+    set name \"$env(GOTESTNAME)\"\n+}\n+\n+$status $name"}]}