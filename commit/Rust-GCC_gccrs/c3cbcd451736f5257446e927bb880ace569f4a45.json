{"sha": "c3cbcd451736f5257446e927bb880ace569f4a45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNjYmNkNDUxNzM2ZjUyNTc0NDZlOTI3YmI4ODBhY2U1NjlmNGE0NQ==", "commit": {"author": {"name": "Volker Reichelt", "email": "v.reichelt@netcologne.de", "date": "2017-04-20T16:48:44Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2017-04-20T16:48:44Z"}, "message": "c.opt (Wextra-semi): New C++ warning flag.\n\n        * c.opt (Wextra-semi): New C++ warning flag.\n        * doc/invoke.texi (-Wextra-semi): Document new warning option.\n        * parser.c (cp_parser_member_declaration): Add warning with fixit\n        information for extra semicolon after in-class function definition.\n        * g++.dg/warn/Wextra-semi.C: New test.\n\nFrom-SVN: r247028", "tree": {"sha": "7711463db0d0218b531e3efa05e231b763318b95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7711463db0d0218b531e3efa05e231b763318b95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3cbcd451736f5257446e927bb880ace569f4a45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3cbcd451736f5257446e927bb880ace569f4a45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3cbcd451736f5257446e927bb880ace569f4a45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3cbcd451736f5257446e927bb880ace569f4a45/comments", "author": {"login": "VReichelt", "id": 85767072, "node_id": "MDQ6VXNlcjg1NzY3MDcy", "avatar_url": "https://avatars.githubusercontent.com/u/85767072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VReichelt", "html_url": "https://github.com/VReichelt", "followers_url": "https://api.github.com/users/VReichelt/followers", "following_url": "https://api.github.com/users/VReichelt/following{/other_user}", "gists_url": "https://api.github.com/users/VReichelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/VReichelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VReichelt/subscriptions", "organizations_url": "https://api.github.com/users/VReichelt/orgs", "repos_url": "https://api.github.com/users/VReichelt/repos", "events_url": "https://api.github.com/users/VReichelt/events{/privacy}", "received_events_url": "https://api.github.com/users/VReichelt/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4ba07ed462c02f4de2205c3e2186a85e4d81fc2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ba07ed462c02f4de2205c3e2186a85e4d81fc2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ba07ed462c02f4de2205c3e2186a85e4d81fc2d"}], "stats": {"total": 64, "additions": 62, "deletions": 2}, "files": [{"sha": "e1a889daea35852e7c4b0a3c3732cbfb077ef45c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -1,3 +1,7 @@\n+2017-04-20  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* doc/invoke.texi (-Wextra-semi): Document new warning option.\n+\n 2017-04-20  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/57796"}, {"sha": "102b08eede82cf6ecab649ddc5b57cb6203653a3", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -1,3 +1,7 @@\n+2017-04-20  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* c.opt (Wextra-semi): New C++ warning flag.\n+\n 2017-04-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/80423"}, {"sha": "6ecbfca44137aefe71fe6315f40fe805c4f92b81", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -504,6 +504,10 @@ Wextra\n C ObjC C++ ObjC++ Warning\n ; in common.opt\n \n+Wextra-semi\n+C++ ObjC++ Var(warn_extra_semi) Warning\n+Warn about semicolon after in-class function definition.\n+\n Wfloat-conversion\n C ObjC C++ ObjC++ Var(warn_float_conversion) Warning LangEnabledBy(C ObjC C++ ObjC++,Wconversion)\n Warn for implicit type conversions that cause loss of floating point precision."}, {"sha": "d90c2985f0495baebe788b1e2cf40ab16c2e3b99", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -1,3 +1,8 @@\n+2017-04-20  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* parser.c (cp_parser_member_declaration): Add warning with fixit\n+\tinformation for extra semicolon after in-class function definition.\n+\n 2017-04-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/80423"}, {"sha": "25788902e1679375a915987a6451214cf7dbf691", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -23386,7 +23386,15 @@ cp_parser_member_declaration (cp_parser* parser)\n \t\t  token = cp_lexer_peek_token (parser->lexer);\n \t\t  /* If the next token is a semicolon, consume it.  */\n \t\t  if (token->type == CPP_SEMICOLON)\n-\t\t    cp_lexer_consume_token (parser->lexer);\n+\t\t    {\n+\t\t      location_t semicolon_loc\n+\t\t\t= cp_lexer_consume_token (parser->lexer)->location;\n+\t\t      gcc_rich_location richloc (semicolon_loc);\n+\t\t      richloc.add_fixit_remove ();\n+\t\t      warning_at_rich_loc (&richloc, OPT_Wextra_semi,\n+\t\t\t\t\t   \"extra %<;%> after in-class \"\n+\t\t\t\t\t   \"function definition\");\n+\t\t    }\n \t\t  goto out;\n \t\t}\n \t      else"}, {"sha": "0eeea7b3b877665678943f978955bf09f3e6e19a", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -274,7 +274,8 @@ Objective-C and Objective-C++ Dialects}.\n -Wno-discarded-qualifiers  -Wno-discarded-array-qualifiers @gol\n -Wno-div-by-zero  -Wdouble-promotion  -Wduplicated-cond @gol\n -Wempty-body  -Wenum-compare  -Wno-endif-labels  -Wexpansion-to-defined @gol\n--Werror  -Werror=*  -Wfatal-errors  -Wfloat-equal  -Wformat  -Wformat=2 @gol\n+-Werror  -Werror=*  -Wextra-semi  -Wfatal-errors @gol\n+-Wfloat-equal  -Wformat  -Wformat=2 @gol\n -Wno-format-contains-nul  -Wno-format-extra-args  @gol\n -Wformat-nonliteral -Wformat-overflow=@var{n} @gol\n -Wformat-security  -Wformat-signedness  -Wformat-truncation=@var{n} @gol\n@@ -5960,6 +5961,11 @@ In C++ enumerated type mismatches in conditional expressions are also\n diagnosed and the warning is enabled by default.  In C this warning is \n enabled by @option{-Wall}.\n \n+@item -Wextra-semi @r{(C++, Objective-C++ only)}\n+@opindex Wextra-semi\n+@opindex Wno-extra-semi\n+Warn about redundant semicolon after in-class function definition.\n+\n @item -Wjump-misses-init @r{(C, Objective-C only)}\n @opindex Wjump-misses-init\n @opindex Wno-jump-misses-init"}, {"sha": "a91c9891da62e1e399949b9e37e5eaee9558575b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -1,3 +1,7 @@\n+2017-04-20  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* g++.dg/warn/Wextra-semi.C: New test.\n+\n 2017-04-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/80423"}, {"sha": "8778582168be5492c6fa788b791f5b862820d390", "filename": "gcc/testsuite/g++.dg/warn/Wextra-semi.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWextra-semi.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3cbcd451736f5257446e927bb880ace569f4a45/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWextra-semi.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWextra-semi.C?ref=c3cbcd451736f5257446e927bb880ace569f4a45", "patch": "@@ -0,0 +1,25 @@\n+// { dg-options \"-Wextra-semi -fdiagnostics-show-caret\" }\n+\n+struct A\n+{\n+  A() {};  /* { dg-warning \"after in-class function definition\" }\n+  { dg-begin-multiline-output \"\" }\n+   A() {};\n+         ^\n+         -\n+  { dg-end-multiline-output \"\" } */\n+\n+  void foo() {};  /* { dg-warning \"after in-class function definition\" }\n+  { dg-begin-multiline-output \"\" }\n+   void foo() {};\n+                ^\n+                -\n+  { dg-end-multiline-output \"\" } */\n+\n+  friend void bar() {};  /* { dg-warning \"after in-class function definition\" }\n+  { dg-begin-multiline-output \"\" }\n+   friend void bar() {};\n+                       ^\n+                       -\n+  { dg-end-multiline-output \"\" } */\n+};"}]}