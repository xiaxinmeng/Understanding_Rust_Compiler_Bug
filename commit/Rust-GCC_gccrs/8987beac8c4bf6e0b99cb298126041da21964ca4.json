{"sha": "8987beac8c4bf6e0b99cb298126041da21964ca4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODk4N2JlYWM4YzRiZjZlMGI5OWNiMjk4MTI2MDQxZGEyMTk2NGNhNA==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2018-01-03T11:31:20Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2018-01-03T11:31:20Z"}, "message": "re PR fortran/83664 (Eoshift accepts missing boundary for non-default types)\n\n2018-01-03  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/83664\n\t* check.c (gfc_check_eoshift): Error for missing boundary if array\n\tis not one of the standard types.\n\n2018-01-03  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/83664\n\t* gfortran.dg/eoshift_7.f90: New test.\n\nFrom-SVN: r256171", "tree": {"sha": "4195b7cc7ad021cb2d0747dbe320cb20986f656a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4195b7cc7ad021cb2d0747dbe320cb20986f656a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8987beac8c4bf6e0b99cb298126041da21964ca4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8987beac8c4bf6e0b99cb298126041da21964ca4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8987beac8c4bf6e0b99cb298126041da21964ca4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8987beac8c4bf6e0b99cb298126041da21964ca4/comments", "author": null, "committer": null, "parents": [{"sha": "b853346e2c2ea98e35c6043712303a5fc8b87dd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b853346e2c2ea98e35c6043712303a5fc8b87dd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b853346e2c2ea98e35c6043712303a5fc8b87dd8"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "e4661a8105848cba4c3a039983ab3c9d0d3d3502", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8987beac8c4bf6e0b99cb298126041da21964ca4", "patch": "@@ -1,3 +1,9 @@\n+2018-01-03  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/83664\n+\t* check.c (gfc_check_eoshift): Error for missing boundary if array\n+\tis not one of the standard types.\n+\n 2018-01-03  Jakub Jelinek  <jakub@redhat.com>\n \n \tUpdate copyright years."}, {"sha": "9f0f4d5b209082a410c577be50189babbca05fb7", "filename": "gcc/fortran/check.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ffortran%2Fcheck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ffortran%2Fcheck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fcheck.c?ref=8987beac8c4bf6e0b99cb298126041da21964ca4", "patch": "@@ -2270,6 +2270,26 @@ gfc_check_eoshift (gfc_expr *array, gfc_expr *shift, gfc_expr *boundary,\n \t  return false;\n \t}\n     }\n+  else\n+    {\n+      switch (array->ts.type)\n+\t{\n+\tcase BT_INTEGER:\n+\tcase BT_LOGICAL:\n+\tcase BT_REAL:\n+\tcase BT_COMPLEX:\n+\tcase BT_CHARACTER:\n+\t  break;\n+\t  \n+\tdefault:\n+\t  gfc_error (\"Missing %qs argument to %qs intrinsic at %L for %qs \"\n+\t\t     \"of type %qs\", gfc_current_intrinsic_arg[2]->name,\n+\t\t     gfc_current_intrinsic, &array->where,\n+\t\t     gfc_current_intrinsic_arg[0]->name,\n+\t\t     gfc_typename (&array->ts));\n+\t  return false;\n+\t}\n+    }\n \n   return true;\n }"}, {"sha": "822c29d640dd05d5799a8684678b9faa135f0392", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8987beac8c4bf6e0b99cb298126041da21964ca4", "patch": "@@ -1,3 +1,8 @@\n+2018-01-03  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/83664\n+\t* gfortran.dg/eoshift_7.f90: New test.\n+\n 2018-01-03  Jan Beulich  <jbeulich@suse.com>\n \n \t* gcc.target/i386/avx512vl-no-vmovdqu8.c,"}, {"sha": "fbd017e17743411da5acaadae67c0ddbd6deca0d", "filename": "gcc/testsuite/gfortran.dg/eoshift_7.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ftestsuite%2Fgfortran.dg%2Feoshift_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8987beac8c4bf6e0b99cb298126041da21964ca4/gcc%2Ftestsuite%2Fgfortran.dg%2Feoshift_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Feoshift_7.f90?ref=8987beac8c4bf6e0b99cb298126041da21964ca4", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+program main\n+  type t\n+    integer :: x\n+  end type t\n+  type(t), dimension(2) :: a, b\n+  a(1)%x = 1\n+  a(2)%x = 2\n+  b = eoshift(a,1) ! { dg-error \"Missing 'boundary' argument to 'eoshift' intrinsic\" }\n+  print *,b%x\n+end program main"}]}