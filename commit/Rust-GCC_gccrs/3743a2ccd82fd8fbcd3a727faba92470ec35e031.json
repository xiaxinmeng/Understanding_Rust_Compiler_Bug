{"sha": "3743a2ccd82fd8fbcd3a727faba92470ec35e031", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzc0M2EyY2NkODJmZDhmYmNkM2E3MjdmYWJhOTI0NzBlYzM1ZTAzMQ==", "commit": {"author": {"name": "Renlin Li", "email": "renlin.li@arm.com", "date": "2015-09-03T17:16:33Z"}, "committer": {"name": "Renlin Li", "email": "renlin@gcc.gnu.org", "date": "2015-09-03T17:16:33Z"}, "message": "[PATCH][AARCH64]Make arm_align_max_stack_pwr.c and arm_align_max_pwr.c compile\ntestcase, instead of execution.\n\ngcc/testsuite/\n\n2015-09-03  Renlin Li  <renlin.li@arm.com>\n\n\t* gcc.target/aarch64/arm_align_max_pwr.c: Make it a compile test case,\n\t  check the assembly.\n\t* gcc.target/aarch64/arm_align_max_stack_pwr.c: Likewise.\n\nFrom-SVN: r227459", "tree": {"sha": "f8d22c7738378c620aff80b39191f8884003ee09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f8d22c7738378c620aff80b39191f8884003ee09"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3743a2ccd82fd8fbcd3a727faba92470ec35e031", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3743a2ccd82fd8fbcd3a727faba92470ec35e031", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3743a2ccd82fd8fbcd3a727faba92470ec35e031", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3743a2ccd82fd8fbcd3a727faba92470ec35e031/comments", "author": null, "committer": null, "parents": [{"sha": "1807ffc1a51df83a3ad26ad1b56ef0bbe8a7e494", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1807ffc1a51df83a3ad26ad1b56ef0bbe8a7e494", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1807ffc1a51df83a3ad26ad1b56ef0bbe8a7e494"}], "stats": {"total": 47, "additions": 33, "deletions": 14}, "files": [{"sha": "b1deae4270d0ce341fdace16221b87557dda9cfa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3743a2ccd82fd8fbcd3a727faba92470ec35e031/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3743a2ccd82fd8fbcd3a727faba92470ec35e031/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3743a2ccd82fd8fbcd3a727faba92470ec35e031", "patch": "@@ -1,3 +1,9 @@\n+2015-09-03  Renlin Li  <renlin.li@arm.com>\n+\n+\t* gcc.target/aarch64/arm_align_max_pwr.c: Make it a compile test case,\n+\tcheck the assembly.\n+\t* gcc.target/aarch64/arm_align_max_stack_pwr.c: Likewise.\n+\n 2015-09-03  Martin Sebor  <msebor@redhat.com>\n \n \tPR c/66516"}, {"sha": "ffa4d229922afea17ac83a627d9af1ffa48d7d3c", "filename": "gcc/testsuite/gcc.target/aarch64/arm_align_max_pwr.c", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3743a2ccd82fd8fbcd3a727faba92470ec35e031/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Farm_align_max_pwr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3743a2ccd82fd8fbcd3a727faba92470ec35e031/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Farm_align_max_pwr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Farm_align_max_pwr.c?ref=3743a2ccd82fd8fbcd3a727faba92470ec35e031", "patch": "@@ -1,15 +1,23 @@\n-/* { dg-do run } */\n-\n-#include <stdio.h>\n-#include <assert.h>\n+/* { dg-do compile } */\n+/* { dg-options \"-O1\" } */\n \n #define align (1ul << __ARM_ALIGN_MAX_PWR)\n static int x __attribute__ ((aligned (align)));\n+static int y __attribute__ ((aligned (align)));\n+\n+extern void foo (int *x, int *y);\n+extern int bar (int x, int y);\n \n int\n-main ()\n+dummy ()\n {\n-  assert ((((unsigned long)&x) & (align - 1)) == 0);\n+  int result;\n \n-  return 0;\n+  foo (&x, &y);\n+  result = bar (x, y);\n+\n+  return result;\n }\n+\n+/* { dg-final { scan-assembler-times \"zero\\t4\" 2 } } */\n+/* { dg-final { scan-assembler \"zero\\t268435452\" } } */"}, {"sha": "7f356fe300a08b229f708dabece364a4fd353f75", "filename": "gcc/testsuite/gcc.target/aarch64/arm_align_max_stack_pwr.c", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3743a2ccd82fd8fbcd3a727faba92470ec35e031/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Farm_align_max_stack_pwr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3743a2ccd82fd8fbcd3a727faba92470ec35e031/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Farm_align_max_stack_pwr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Farm_align_max_stack_pwr.c?ref=3743a2ccd82fd8fbcd3a727faba92470ec35e031", "patch": "@@ -1,15 +1,20 @@\n-/* { dg-do run } */\n-\n-#include <stdio.h>\n-#include <assert.h>\n+/* { dg-do compile } */\n+/* { dg-options \"-O1\" } */\n \n #define align (1ul << __ARM_ALIGN_MAX_STACK_PWR)\n+extern void foo (int *x);\n+extern int bar (int x);\n \n int\n-main ()\n+dummy ()\n {\n   int x __attribute__ ((aligned (align)));\n+  int result;\n+\n+  foo (&x);\n+  result = bar (x);\n \n-  assert ((((unsigned long)&x) & (align - 1)) == 0);\n-  return 0;\n+  return result;\n }\n+\n+/* { dg-final { scan-assembler \"and\\tx\\[0-9\\]+, x\\[0-9\\]+, -65536\" } } */"}]}