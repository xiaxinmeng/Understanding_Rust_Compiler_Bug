{"sha": "0f59b812398ae891259f0bd563ca2a23238408a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGY1OWI4MTIzOThhZTg5MTI1OWYwYmQ1NjNjYTJhMjMyMzg0MDhhNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-11-05T09:00:50Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-11-05T09:00:50Z"}, "message": "re PR debug/46307 (ICE with FMA_EXPR in DEBUG stmts)\n\n\tPR debug/46307\n\t* tree-ssa-operands.c (get_expr_operands): Handle FMA_EXPR.\n\t* tree-pretty-print.c (dump_generic_node): Likewise.\n\t(op_code_prio): Likewise.\n\t* cfgexpand.c (expand_debug_expr): Likewise.\n\n\t* gcc.dg/pr46307.c: New test.\n\nFrom-SVN: r166351", "tree": {"sha": "fbd7c6a0a871f00e3113cb593c9a548ba7aa2ec2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fbd7c6a0a871f00e3113cb593c9a548ba7aa2ec2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0f59b812398ae891259f0bd563ca2a23238408a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f59b812398ae891259f0bd563ca2a23238408a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f59b812398ae891259f0bd563ca2a23238408a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f59b812398ae891259f0bd563ca2a23238408a6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fc36036b04abe3c899d3bf4dba93e89e2a15dd50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc36036b04abe3c899d3bf4dba93e89e2a15dd50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc36036b04abe3c899d3bf4dba93e89e2a15dd50"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "a752a51797ac91169722e40519161ec1326d3e00", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0f59b812398ae891259f0bd563ca2a23238408a6", "patch": "@@ -1,3 +1,11 @@\n+2010-11-05  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/46307\n+\t* tree-ssa-operands.c (get_expr_operands): Handle FMA_EXPR.\n+\t* tree-pretty-print.c (dump_generic_node): Likewise.\n+\t(op_code_prio): Likewise.\n+\t* cfgexpand.c (expand_debug_expr): Likewise.\n+\n 2010-11-04  Paul Koning  <ni1d@arrl.net>\n \n \t* doc/md.texi (Machine Constraints): Correct formatting in PDP-11"}, {"sha": "b302591e66ed34f69530a886f7e43d6cb1f5c726", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=0f59b812398ae891259f0bd563ca2a23238408a6", "patch": "@@ -2360,6 +2360,7 @@ expand_debug_expr (tree exp)\n \tcase DOT_PROD_EXPR:\n \tcase WIDEN_MULT_PLUS_EXPR:\n \tcase WIDEN_MULT_MINUS_EXPR:\n+\tcase FMA_EXPR:\n \t  goto ternary;\n \n \tcase TRUTH_ANDIF_EXPR:\n@@ -3201,6 +3202,9 @@ expand_debug_expr (tree exp)\n \t}\n       return NULL;\n \n+    case FMA_EXPR:\n+      return gen_rtx_FMA (mode, op0, op1, op2);\n+\n     default:\n     flag_unsupported:\n #ifdef ENABLE_CHECKING"}, {"sha": "6ef03bdac94f313971216dab1a6af2ad81289557", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0f59b812398ae891259f0bd563ca2a23238408a6", "patch": "@@ -1,3 +1,8 @@\n+2010-11-05  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/46307\n+\t* gcc.dg/pr46307.c: New test.\n+\n 2010-11-05  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/46304"}, {"sha": "c308b5669f2a758b82f14c1ac3b15430eb879eb2", "filename": "gcc/testsuite/gcc.dg/pr46307.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46307.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46307.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46307.c?ref=0f59b812398ae891259f0bd563ca2a23238408a6", "patch": "@@ -0,0 +1,14 @@\n+/* PR debug/46307 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -g\" } */\n+\n+double fma (double, double, double);\n+\n+double\n+foo (double x, double y, double z)\n+{\n+  double a = x * y + z;\n+  double b = __builtin_fma (x, y, z);\n+  double c = fma (x, y, z);\n+  return x / y / z;\n+}"}, {"sha": "12ef38817eb9d00be758fbdefab01490346bb596", "filename": "gcc/tree-pretty-print.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftree-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftree-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pretty-print.c?ref=0f59b812398ae891259f0bd563ca2a23238408a6", "patch": "@@ -2040,6 +2040,16 @@ dump_generic_node (pretty_printer *buffer, tree node, int spc, int flags,\n       pp_string (buffer, \" > \");\n       break;\n \n+    case FMA_EXPR:\n+      pp_string (buffer, \" FMA_EXPR < \");\n+      dump_generic_node (buffer, TREE_OPERAND (node, 0), spc, flags, false);\n+      pp_string (buffer, \", \");\n+      dump_generic_node (buffer, TREE_OPERAND (node, 1), spc, flags, false);\n+      pp_string (buffer, \", \");\n+      dump_generic_node (buffer, TREE_OPERAND (node, 2), spc, flags, false);\n+      pp_string (buffer, \" > \");\n+      break;\n+\n     case OMP_PARALLEL:\n       pp_string (buffer, \"#pragma omp parallel\");\n       dump_omp_clauses (buffer, OMP_PARALLEL_CLAUSES (node), spc, flags);\n@@ -2546,6 +2556,7 @@ op_code_prio (enum tree_code code)\n     case CEIL_MOD_EXPR:\n     case FLOOR_MOD_EXPR:\n     case ROUND_MOD_EXPR:\n+    case FMA_EXPR:\n       return 13;\n \n     case TRUTH_NOT_EXPR:"}, {"sha": "c83267d54ddb5603129ab4f67d98feccb0c4223f", "filename": "gcc/tree-ssa-operands.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftree-ssa-operands.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f59b812398ae891259f0bd563ca2a23238408a6/gcc%2Ftree-ssa-operands.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-operands.c?ref=0f59b812398ae891259f0bd563ca2a23238408a6", "patch": "@@ -999,6 +999,7 @@ get_expr_operands (gimple stmt, tree *expr_p, int flags)\n     case REALIGN_LOAD_EXPR:\n     case WIDEN_MULT_PLUS_EXPR:\n     case WIDEN_MULT_MINUS_EXPR:\n+    case FMA_EXPR:\n       {\n \tget_expr_operands (stmt, &TREE_OPERAND (expr, 0), flags);\n \tget_expr_operands (stmt, &TREE_OPERAND (expr, 1), flags);"}]}