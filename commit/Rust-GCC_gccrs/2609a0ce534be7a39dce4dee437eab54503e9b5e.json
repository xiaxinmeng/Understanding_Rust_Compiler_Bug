{"sha": "2609a0ce534be7a39dce4dee437eab54503e9b5e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjYwOWEwY2U1MzRiZTdhMzlkY2U0ZGVlNDM3ZWFiNTQ1MDNlOWI1ZQ==", "commit": {"author": {"name": "Simon Martin", "email": "simartin@users.sourceforge.net", "date": "2011-05-02T20:13:08Z"}, "committer": {"name": "Simon Martin", "email": "simartin@gcc.gnu.org", "date": "2011-05-02T20:13:08Z"}, "message": "re PR c/35445 (ICE with conflicting declarations)\n\ngcc/\n\n2011-05-02  Simon Martin  <simartin@users.sourceforge.net>\n\n    PR c/35445\n    * c-decl.c (finish_decl): Only create a composite if the types are\n    compatible.\n\ngcc/testsuite/\n\n2011-05-02  Simon Martin  <simartin@users.sourceforge.net>\n\n    PR c/35445\n    * gcc.dg/pr35445.c: New test.\n\nFrom-SVN: r173269", "tree": {"sha": "3ce53fd74324b870d006b4070528082607ff2818", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ce53fd74324b870d006b4070528082607ff2818"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2609a0ce534be7a39dce4dee437eab54503e9b5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2609a0ce534be7a39dce4dee437eab54503e9b5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2609a0ce534be7a39dce4dee437eab54503e9b5e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2609a0ce534be7a39dce4dee437eab54503e9b5e/comments", "author": {"login": "simartin", "id": 935202, "node_id": "MDQ6VXNlcjkzNTIwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/935202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simartin", "html_url": "https://github.com/simartin", "followers_url": "https://api.github.com/users/simartin/followers", "following_url": "https://api.github.com/users/simartin/following{/other_user}", "gists_url": "https://api.github.com/users/simartin/gists{/gist_id}", "starred_url": "https://api.github.com/users/simartin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simartin/subscriptions", "organizations_url": "https://api.github.com/users/simartin/orgs", "repos_url": "https://api.github.com/users/simartin/repos", "events_url": "https://api.github.com/users/simartin/events{/privacy}", "received_events_url": "https://api.github.com/users/simartin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "14dccaf06971f4ebea8f0821a1013de9d43829a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14dccaf06971f4ebea8f0821a1013de9d43829a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14dccaf06971f4ebea8f0821a1013de9d43829a3"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "da19a8f2b564449a36735a28c047e30c198d08d5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2609a0ce534be7a39dce4dee437eab54503e9b5e", "patch": "@@ -1,3 +1,9 @@\n+2011-05-02  Simon Martin  <simartin@users.sourceforge.net>\n+\n+\tPR c/35445\n+\t* c-decl.c (finish_decl): Only create a composite if the types are\n+\tcompatible.\n+\n 2011-05-02  Joseph Myers  <joseph@codesourcery.com>\n \n \t* config/fr30/fr30-protos.h (Mmode): Don't define."}, {"sha": "3470a935d977fa92fbf737fed13fc538502b9dc3", "filename": "gcc/c-decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=2609a0ce534be7a39dce4dee437eab54503e9b5e", "patch": "@@ -4246,7 +4246,7 @@ finish_decl (tree decl, location_t init_loc, tree init,\n \t\tb_ext = b_ext->shadowed;\n \t      if (b_ext)\n \t\t{\n-\t\t  if (b_ext->u.type)\n+\t\t  if (b_ext->u.type && comptypes (b_ext->u.type, type))\n \t\t    b_ext->u.type = composite_type (b_ext->u.type, type);\n \t\t  else\n \t\t    b_ext->u.type = type;"}, {"sha": "be4f4b608be92d72b2e1025b6c1699a4fc37c115", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2609a0ce534be7a39dce4dee437eab54503e9b5e", "patch": "@@ -1,3 +1,8 @@\n+2011-05-02  Simon Martin  <simartin@users.sourceforge.net>\n+\n+\tPR c/35445\n+\t* gcc.dg/pr35445.c: New test.\n+\n 2011-05-02  Jason Merrill  <jason@redhat.com>\n \n \t* c-c++-common/vla-1.c: New."}, {"sha": "cef309f41ceb7cdf679b9d2b48af1c250c711808", "filename": "gcc/testsuite/gcc.dg/pr35445.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2Ftestsuite%2Fgcc.dg%2Fpr35445.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a0ce534be7a39dce4dee437eab54503e9b5e/gcc%2Ftestsuite%2Fgcc.dg%2Fpr35445.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr35445.c?ref=2609a0ce534be7a39dce4dee437eab54503e9b5e", "patch": "@@ -0,0 +1,6 @@\n+/* PR c/35445 */\n+/* { dg-do \"compile\" } */\n+\n+extern int i;\n+extern int i; /* { dg-message \"was here\" } */\n+int i[] = { 0 }; /* { dg-error \"conflicting types\" } */"}]}