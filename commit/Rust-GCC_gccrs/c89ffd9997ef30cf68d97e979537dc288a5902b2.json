{"sha": "c89ffd9997ef30cf68d97e979537dc288a5902b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg5ZmZkOTk5N2VmMzBjZjY4ZDk3ZTk3OTUzN2RjMjg4YTU5MDJiMg==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2017-05-04T10:35:58Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2017-05-04T10:35:58Z"}, "message": "re PR tree-optimization/80612 (ICE in get_range_info, at tree-ssanames.c:375)\n\n\tPR tree-optimization/80612\n\t* calls.c (get_size_range): Check for INTEGRAL_TYPE_P.\n\n\t* gcc.dg/torture/pr80612.c: New test.\n\nFrom-SVN: r247586", "tree": {"sha": "800f1baa1d7259be22dde5aaaa310402915b786e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/800f1baa1d7259be22dde5aaaa310402915b786e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c89ffd9997ef30cf68d97e979537dc288a5902b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c89ffd9997ef30cf68d97e979537dc288a5902b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c89ffd9997ef30cf68d97e979537dc288a5902b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c89ffd9997ef30cf68d97e979537dc288a5902b2/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "261ce1e56f828d0b18c9c0ca5dcd14452661f062", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/261ce1e56f828d0b18c9c0ca5dcd14452661f062", "html_url": "https://github.com/Rust-GCC/gccrs/commit/261ce1e56f828d0b18c9c0ca5dcd14452661f062"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "84c1f68574408dbffa2b3afd726d865e3fdaf56c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c89ffd9997ef30cf68d97e979537dc288a5902b2", "patch": "@@ -1,3 +1,8 @@\n+2017-05-04  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR tree-optimization/80612\n+\t* calls.c (get_size_range): Check for INTEGRAL_TYPE_P.\n+\n 2017-05-04  Prakhar Bahuguna  <prakhar.bahuguna@arm.com>\n \t    Andre Simoes Dias Vieira  <andre.simoesdiasvieira@arm.com>\n "}, {"sha": "bd081ccf46c3a3c5e6dab72bca1156ba4767b2f0", "filename": "gcc/calls.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=c89ffd9997ef30cf68d97e979537dc288a5902b2", "patch": "@@ -1270,7 +1270,7 @@ get_size_range (tree exp, tree range[2])\n \n   wide_int min, max;\n   enum value_range_type range_type\n-    = (TREE_CODE (exp) == SSA_NAME\n+    = ((TREE_CODE (exp) == SSA_NAME && INTEGRAL_TYPE_P (TREE_TYPE (exp)))\n        ? get_range_info (exp, &min, &max) : VR_VARYING);\n \n   if (range_type == VR_VARYING)"}, {"sha": "b93975d07a44cbbae21ffc30c85f184087dd1b2a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c89ffd9997ef30cf68d97e979537dc288a5902b2", "patch": "@@ -1,3 +1,8 @@\n+2017-05-04  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR tree-optimization/80612\n+\t* gcc.dg/torture/pr80612.c: New test.\n+\n 2017-05-04  Prakhar Bahuguna  <prakhar.bahuguna@arm.com>\n \t    Andre Simoes Dias Vieira  <andre.simoesdiasvieira@arm.com>\n "}, {"sha": "225b81127a66c6b3c040f8ad21f08b60ca7ac5c2", "filename": "gcc/testsuite/gcc.dg/torture/pr80612.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80612.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c89ffd9997ef30cf68d97e979537dc288a5902b2/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80612.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80612.c?ref=c89ffd9997ef30cf68d97e979537dc288a5902b2", "patch": "@@ -0,0 +1,15 @@\n+/* PR tree-optimization/80612 */\n+/* { dg-do compile } */\n+\n+struct obstack *a;\n+struct obstack {\n+  union {\n+    void *plain;\n+    void (*extra)();\n+  } chunkfun;\n+} fn1(void p4()) {\n+  a->chunkfun.plain = p4;\n+  a->chunkfun.extra(a);\n+}\n+void fn2(int) __attribute__((__alloc_size__(1)));\n+void fn3() { fn1(fn2); }"}]}