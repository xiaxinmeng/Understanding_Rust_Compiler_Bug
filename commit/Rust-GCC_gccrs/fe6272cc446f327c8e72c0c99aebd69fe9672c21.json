{"sha": "fe6272cc446f327c8e72c0c99aebd69fe9672c21", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmU2MjcyY2M0NDZmMzI3YzhlNzJjMGM5OWFlYmQ2OWZlOTY3MmMyMQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-12-16T01:45:45Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-12-16T01:45:45Z"}, "message": "syscall: emulate Flock on AIX\n    \n    Reviewed-on: https://go-review.googlesource.com/79095\n\nFrom-SVN: r255737", "tree": {"sha": "6f28e29ad1612736e6c4437ac5d5a215b6fc05dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6f28e29ad1612736e6c4437ac5d5a215b6fc05dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe6272cc446f327c8e72c0c99aebd69fe9672c21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe6272cc446f327c8e72c0c99aebd69fe9672c21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe6272cc446f327c8e72c0c99aebd69fe9672c21", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe6272cc446f327c8e72c0c99aebd69fe9672c21/comments", "author": null, "committer": null, "parents": [{"sha": "dead5b9978dc169e846a726a6538b165a5c00274", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dead5b9978dc169e846a726a6538b165a5c00274", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dead5b9978dc169e846a726a6538b165a5c00274"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "35a2d0a38d29c8b64e5fb41cf734485ac453740a", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe6272cc446f327c8e72c0c99aebd69fe9672c21/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe6272cc446f327c8e72c0c99aebd69fe9672c21/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=fe6272cc446f327c8e72c0c99aebd69fe9672c21", "patch": "@@ -1,4 +1,4 @@\n-c02de8ca63f52a2475ce8645edee3203a3c908ac\n+d1f90c9b77baca5c33a398ab844fb4440c6a5ee7\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "5afc65e7a1551a62db38b4435f90f00e3acd638b", "filename": "libgo/go/syscall/libcall_aix.go", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe6272cc446f327c8e72c0c99aebd69fe9672c21/libgo%2Fgo%2Fsyscall%2Flibcall_aix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe6272cc446f327c8e72c0c99aebd69fe9672c21/libgo%2Fgo%2Fsyscall%2Flibcall_aix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_aix.go?ref=fe6272cc446f327c8e72c0c99aebd69fe9672c21", "patch": "@@ -111,6 +111,28 @@ func Reboot(how int) (err error) {\n //sys\tFchownat(dirfd int, path string, uid int, gid int, flags int) (err error)\n //fchownat(dirfd _C_int, path *byte, owner Uid_t, group Gid_t, flags _C_int) _C_int\n \n+// On AIX, there is no flock() system call, we emulate it.\n+func Flock(fd int, op int) (err error) {\n+\tlk := &Flock_t{}\n+\tif (op & LOCK_UN) != 0 {\n+\t\tlk.Type = F_UNLCK\n+\t} else if (op & LOCK_EX) != 0 {\n+\t\tlk.Type = F_WRLCK\n+\t} else if (op & LOCK_SH) != 0 {\n+\t\tlk.Type = F_RDLCK\n+\t} else {\n+\t\treturn nil\n+\t}\n+\tif (op & LOCK_NB) != 0 {\n+\t\terr = FcntlFlock(uintptr(fd), F_SETLK, lk)\n+\t\tif err != nil && (err == EAGAIN || err == EACCES) {\n+\t\t\treturn EWOULDBLOCK\n+\t\t}\n+\t\treturn err\n+\t}\n+\treturn FcntlFlock(uintptr(fd), F_SETLKW, lk)\n+}\n+\n //sys\tFstatfs(fd int, buf *Statfs_t) (err error)\n //fstatfs64(fd _C_int, buf *Statfs_t) _C_int\n "}]}