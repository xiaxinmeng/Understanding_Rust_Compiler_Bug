{"sha": "9c5784fa7585c274b188f4df26bb80244ef97cb0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM1Nzg0ZmE3NTg1YzI3NGIxODhmNGRmMjZiYjgwMjQ0ZWY5N2NiMA==", "commit": {"author": {"name": "Chenghua Xu", "email": "paul.hua.gm@gmail.com", "date": "2019-07-04T01:54:02Z"}, "committer": {"name": "Chenghua Xu", "email": "paulhua@gcc.gnu.org", "date": "2019-07-04T01:54:02Z"}, "message": "[MIPS][Testsuite] Specify msa-fmadd.c abis.\n\ngcc/testsuite/\n\n        * gcc.target/mips/mips-fmadd.c: Rename to ... \n        * gcc.target/mips/mips-fmadd-o32.c: ... Here; add abi=32.\n        * gcc.target/mips/mips-fmadd-n64.c: New.\n\nFrom-SVN: r273033", "tree": {"sha": "34e694e733a1e2e6a42511e26ea6aeed98ecf871", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34e694e733a1e2e6a42511e26ea6aeed98ecf871"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c5784fa7585c274b188f4df26bb80244ef97cb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c5784fa7585c274b188f4df26bb80244ef97cb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c5784fa7585c274b188f4df26bb80244ef97cb0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c5784fa7585c274b188f4df26bb80244ef97cb0/comments", "author": {"login": "ChenghuaXu", "id": 87753117, "node_id": "MDQ6VXNlcjg3NzUzMTE3", "avatar_url": "https://avatars.githubusercontent.com/u/87753117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChenghuaXu", "html_url": "https://github.com/ChenghuaXu", "followers_url": "https://api.github.com/users/ChenghuaXu/followers", "following_url": "https://api.github.com/users/ChenghuaXu/following{/other_user}", "gists_url": "https://api.github.com/users/ChenghuaXu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChenghuaXu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChenghuaXu/subscriptions", "organizations_url": "https://api.github.com/users/ChenghuaXu/orgs", "repos_url": "https://api.github.com/users/ChenghuaXu/repos", "events_url": "https://api.github.com/users/ChenghuaXu/events{/privacy}", "received_events_url": "https://api.github.com/users/ChenghuaXu/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4c5f7762a93f77f3d33669537dd54f9a5de28ec4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c5f7762a93f77f3d33669537dd54f9a5de28ec4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c5f7762a93f77f3d33669537dd54f9a5de28ec4"}], "stats": {"total": 109, "additions": 108, "deletions": 1}, "files": [{"sha": "aa00f0b1b330ad4ac06834a4eb0355743102c68b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c5784fa7585c274b188f4df26bb80244ef97cb0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c5784fa7585c274b188f4df26bb80244ef97cb0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9c5784fa7585c274b188f4df26bb80244ef97cb0", "patch": "@@ -1,3 +1,9 @@\n+2019-07-04  Chenghua Xu  <paul.hua.gm@gmail.com>\n+\n+\t* gcc.target/mips/mips-fmadd.c: Rename to ...\n+\t* gcc.target/mips/mips-fmadd-o32.c: ... Here; add abi=32.\n+\t* gcc.target/mips/mips-fmadd-n64.c: New.\n+\n 2019-07-03  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \t* gcc.dg/store_merging_27.c: Fix test for Arm."}, {"sha": "199b366512cda1668c53eaba06337ea852ca755e", "filename": "gcc/testsuite/gcc.target/mips/msa-fmadd-n64.c", "status": "added", "additions": 101, "deletions": 0, "changes": 101, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c5784fa7585c274b188f4df26bb80244ef97cb0/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmsa-fmadd-n64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c5784fa7585c274b188f4df26bb80244ef97cb0/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmsa-fmadd-n64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmsa-fmadd-n64.c?ref=9c5784fa7585c274b188f4df26bb80244ef97cb0", "patch": "@@ -0,0 +1,101 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mabi=64 -mfp64 -mhard-float -mmsa -EL -flax-vector-conversions\" } */\n+/* { dg-skip-if \"uses global registers\" { *-*-* } { \"-O0\" } { \"\" } } */\n+\n+typedef int v4i32 __attribute__ ((vector_size(16)));\n+typedef float v4f32 __attribute__ ((vector_size(16)));\n+typedef double v2f64 __attribute__ ((vector_size(16)));\n+\n+/* Test that MSA FMADD-like intrinsics do not use first operand for multiplication.  */\n+\n+register v4i32 a __asm__(\"$f24\");\n+register v4i32 b __asm__(\"$f25\");\n+register v4f32 c __asm__(\"$f26\");\n+register v4f32 d __asm__(\"$f27\");\n+register v2f64 e __asm__(\"$f28\");\n+register v2f64 f __asm__(\"$f29\");\n+\n+void\n+maddv_b_msa (void)\n+{\n+  a = __builtin_msa_maddv_b (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"maddv\\\\\\.b\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+maddv_h_msa (void)\n+{\n+  a = __builtin_msa_maddv_h (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"maddv\\\\\\.h\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+maddv_w_msa (void)\n+{\n+  a = __builtin_msa_maddv_w (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"maddv\\\\\\.w\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+maddv_d_msa (void)\n+{\n+  a = __builtin_msa_maddv_d (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"maddv\\\\\\.d\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+msubv_b_msa (void)\n+{\n+  a = __builtin_msa_msubv_b (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"msubv\\\\\\.b\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+msubv_h_msa (void)\n+{\n+  a = __builtin_msa_msubv_h (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"msubv\\\\\\.h\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+msubv_w_msa (void)\n+{\n+  a = __builtin_msa_msubv_w (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"msubv\\\\\\.w\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+msubv_d_msa (void)\n+{\n+  a = __builtin_msa_msubv_d (a, b, b);\n+}\n+/* { dg-final { scan-assembler \"msubv\\\\\\.d\\t\\\\\\$w24,\\\\\\$w25,\\\\\\$w25\" } }  */\n+\n+void\n+fmadd_w_msa (void)\n+{\n+  c = __builtin_msa_fmadd_w (c, d, d);\n+}\n+/* { dg-final { scan-assembler \"fmadd\\\\\\.w\\t\\\\\\$w26,\\\\\\$w27,\\\\\\$w27\" } }  */\n+\n+void\n+fmadd_d_msa (void)\n+{\n+  e = __builtin_msa_fmadd_d (e, f, f);\n+}\n+/* { dg-final { scan-assembler \"fmadd\\\\\\.d\\t\\\\\\$w28,\\\\\\$w29,\\\\\\$w29\" } }  */\n+\n+void\n+fmsub_w_msa (void)\n+{\n+  c = __builtin_msa_fmsub_w (c, d, d);\n+}\n+/* { dg-final { scan-assembler \"fmsub\\\\\\.w\\t\\\\\\$w26,\\\\\\$w27,\\\\\\$w27\" } }  */\n+\n+void\n+fmsub_d_msa (void)\n+{\n+  e = __builtin_msa_fmsub_d (e, f, f);\n+}\n+/* { dg-final { scan-assembler \"fmsub\\\\\\.d\\t\\\\\\$w28,\\\\\\$w29,\\\\\\$w29\" } }  */\n+"}, {"sha": "843336990e4a39d1034e08005a3b8b318e517d75", "filename": "gcc/testsuite/gcc.target/mips/msa-fmadd-o32.c", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c5784fa7585c274b188f4df26bb80244ef97cb0/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmsa-fmadd-o32.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c5784fa7585c274b188f4df26bb80244ef97cb0/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmsa-fmadd-o32.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmsa-fmadd-o32.c?ref=9c5784fa7585c274b188f4df26bb80244ef97cb0", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-mfp64 -mhard-float -mmsa -EL -flax-vector-conversions\" } */\n+/* { dg-options \"-mabi=32 -mfp64 -mhard-float -mmsa -EL -flax-vector-conversions\" } */\n /* { dg-skip-if \"uses global registers\" { *-*-* } { \"-O0\" } { \"\" } } */\n \n typedef int v4i32 __attribute__ ((vector_size(16)));", "previous_filename": "gcc/testsuite/gcc.target/mips/msa-fmadd.c"}]}