{"sha": "578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTc4ZmRjYjIxNWE2MWQ5N2M3MDRkNGVmMjY2YmZjNDIxYmJlNmY4ZA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2006-05-18T18:59:03Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2006-05-18T18:59:03Z"}, "message": "source.am, [...]: Rebuilt.\n\n\t* source.am, Makefile.in: Rebuilt.\n\t* Makefile.am (property_files): Removed.\n\t* scripts/makemake.tcl (properties_map): New global.\n\t(properties_files): Likewise.\n\t(emit_property_files): New proc.\n\t(scan_packages): Scan META-INF.\n\tPrint property_files variable.  Scan classpath/resource.\n\nFrom-SVN: r113891", "tree": {"sha": "f85d2d0733cebe1450a02f43c75af2758dec3062", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f85d2d0733cebe1450a02f43c75af2758dec3062"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/comments", "author": null, "committer": null, "parents": [{"sha": "e389defe261a3d374812e4bef42774cecd70316e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e389defe261a3d374812e4bef42774cecd70316e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e389defe261a3d374812e4bef42774cecd70316e"}], "stats": {"total": 126, "additions": 87, "deletions": 39}, "files": [{"sha": "465ff0c05855a028d57ff32c16d795dfac1892d0", "filename": "libjava/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "patch": "@@ -1,3 +1,13 @@\n+2006-05-18  Tom Tromey  <tromey@redhat.com>\n+\n+\t* source.am, Makefile.in: Rebuilt.\n+\t* Makefile.am (property_files): Removed.\n+\t* scripts/makemake.tcl (properties_map): New global.\n+\t(properties_files): Likewise.\n+\t(emit_property_files): New proc.\n+\t(scan_packages): Scan META-INF.\n+\tPrint property_files variable.  Scan classpath/resource.\n+\n 2006-05-18  Tom Tromey  <tromey@redhat.com>\n \n \t* testsuite/libjava.special/special.exp (gcj_special_pr21115):"}, {"sha": "88d6ac68a2808830acce7d4c8832e3dae29aff9c", "filename": "libjava/Makefile.am", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "patch": "@@ -304,19 +304,7 @@ lib_gnu_awt_xlib_la_LDFLAGS = ../libstdc++-v3/src/libstdc++.la \\\n         -version-info `grep -v '^\\#' $(srcdir)/libtool-version` $(LIBGCJ_LD_SYMBOLIC)\n lib_gnu_awt_xlib_la_LINK = $(LIBLINK)\n \n-## Build property files into the library.\n-property_files = \\\n-classpath/resource/org/ietf/jgss/MessagesBundle.properties \\\n-classpath/resource/java/util/iso4217.properties\t\\\n-classpath/resource/gnu/java/awt/peer/gtk/font.properties \\\n-classpath/resource/gnu/regexp/MessagesBundle_it.properties \\\n-classpath/resource/gnu/regexp/MessagesBundle_fr.properties \\\n-classpath/resource/gnu/regexp/MessagesBundle.properties\t\\\n-classpath/resource/META-INF/services/org.xml.sax.driver\t\\\n-classpath/resource/META-INF/services/javax.xml.parsers.SAXParserFactory\t\\\n-classpath/resource/META-INF/services/javax.xml.parsers.DocumentBuilderFactory \\\n-classpath/resource/META-INF/services/javax.xml.parsers.TransformerFactory\n-\n+## Note that property_files is defined in sources.am.\n propertyo_files = $(patsubst classpath/resource/%,%,$(addsuffix .lo,$(property_files)))\n \n $(propertyo_files): %.lo: classpath/resource/%"}, {"sha": "53c8639a18e94d9b951075f6b216c23c359a212b", "filename": "libjava/Makefile.in", "status": "modified", "additions": 26, "deletions": 21, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "patch": "@@ -489,7 +489,6 @@ GCSPEC = @GCSPEC@\n GCTESTSPEC = @GCTESTSPEC@\n GLIB_CFLAGS = @GLIB_CFLAGS@\n GLIB_LIBS = @GLIB_LIBS@\n-GREP = @GREP@\n GTK_AWT_FALSE = @GTK_AWT_FALSE@\n GTK_AWT_TRUE = @GTK_AWT_TRUE@\n GTK_CAIRO_FALSE = @GTK_CAIRO_FALSE@\n@@ -591,7 +590,6 @@ USING_WIN32_THREADS_TRUE = @USING_WIN32_THREADS_TRUE@\n VERSION = @VERSION@\n XLIB_AWT_FALSE = @XLIB_AWT_FALSE@\n XLIB_AWT_TRUE = @XLIB_AWT_TRUE@\n-XMKMF = @XMKMF@\n X_CFLAGS = @X_CFLAGS@\n X_EXTRA_LIBS = @X_EXTRA_LIBS@\n X_LIBS = @X_LIBS@\n@@ -600,8 +598,14 @@ ZINCS = @ZINCS@\n ZLIBS = @ZLIBS@\n ZLIBSPEC = @ZLIBSPEC@\n ZLIBTESTSPEC = @ZLIBTESTSPEC@\n+ac_ct_AR = @ac_ct_AR@\n+ac_ct_AS = @ac_ct_AS@\n ac_ct_CC = @ac_ct_CC@\n ac_ct_CXX = @ac_ct_CXX@\n+ac_ct_GCJ = @ac_ct_GCJ@\n+ac_ct_LD = @ac_ct_LD@\n+ac_ct_RANLIB = @ac_ct_RANLIB@\n+ac_ct_STRIP = @ac_ct_STRIP@\n am__fastdepCC_FALSE = @am__fastdepCC_FALSE@\n am__fastdepCC_TRUE = @am__fastdepCC_TRUE@\n am__fastdepCXX_FALSE = @am__fastdepCXX_FALSE@\n@@ -621,10 +625,7 @@ build_os = @build_os@\n build_subdir = @build_subdir@\n build_vendor = @build_vendor@\n datadir = @datadir@\n-datarootdir = @datarootdir@\n dbexecdir = @dbexecdir@\n-docdir = @docdir@\n-dvidir = @dvidir@\n exec_prefix = @exec_prefix@\n extra_ldflags_libjava = @extra_ldflags_libjava@\n gxx_include_dir = @gxx_include_dir@\n@@ -635,24 +636,20 @@ host_cpu = @host_cpu@\n host_os = @host_os@\n host_subdir = @host_subdir@\n host_vendor = @host_vendor@\n-htmldir = @htmldir@\n includedir = @includedir@\n infodir = @infodir@\n install_sh = @install_sh@\n libdir = @libdir@\n libexecdir = @libexecdir@\n libgcj_basedir = @libgcj_basedir@\n libstdcxx_incdir = @libstdcxx_incdir@\n-localedir = @localedir@\n localstatedir = @localstatedir@\n mandir = @mandir@\n mkdir_p = @mkdir_p@\n mkinstalldirs = @mkinstalldirs@\n oldincludedir = @oldincludedir@\n-pdfdir = @pdfdir@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n-psdir = @psdir@\n sbindir = @sbindir@\n sharedstatedir = @sharedstatedir@\n subdirs = @subdirs@\n@@ -843,18 +840,6 @@ lib_gnu_awt_xlib_la_LDFLAGS = ../libstdc++-v3/src/libstdc++.la \\\n         -version-info `grep -v '^\\#' $(srcdir)/libtool-version` $(LIBGCJ_LD_SYMBOLIC)\n \n lib_gnu_awt_xlib_la_LINK = $(LIBLINK)\n-property_files = \\\n-classpath/resource/org/ietf/jgss/MessagesBundle.properties \\\n-classpath/resource/java/util/iso4217.properties\t\\\n-classpath/resource/gnu/java/awt/peer/gtk/font.properties \\\n-classpath/resource/gnu/regexp/MessagesBundle_it.properties \\\n-classpath/resource/gnu/regexp/MessagesBundle_fr.properties \\\n-classpath/resource/gnu/regexp/MessagesBundle.properties\t\\\n-classpath/resource/META-INF/services/org.xml.sax.driver\t\\\n-classpath/resource/META-INF/services/javax.xml.parsers.SAXParserFactory\t\\\n-classpath/resource/META-INF/services/javax.xml.parsers.DocumentBuilderFactory \\\n-classpath/resource/META-INF/services/javax.xml.parsers.TransformerFactory\n-\n propertyo_files = $(patsubst classpath/resource/%,%,$(addsuffix .lo,$(property_files)))\n CLEANFILES = libgcj-$(gcc_version).jar\n DISTCLEANFILES = native.dirs\n@@ -6954,6 +6939,26 @@ bc_objects = \\\n   org-w3c.lo \\\n   org-xml.lo\n \n+property_files = \\\n+  classpath/resource/gnu/classpath/tools/jarsigner/MessageBundle.properties \\\n+  classpath/resource/gnu/classpath/tools/keytool/MessageBundle.properties \\\n+  classpath/resource/gnu/java/awt/peer/gtk/font.properties \\\n+  classpath/resource/gnu/javax/print/PrinterDialog.properties \\\n+  classpath/resource/gnu/javax/print/PrinterDialog_de.properties \\\n+  classpath/resource/gnu/javax/security/auth/callback/MessagesBundle.properties \\\n+  classpath/resource/gnu/regexp/MessagesBundle.properties \\\n+  classpath/resource/gnu/regexp/MessagesBundle_fr.properties \\\n+  classpath/resource/gnu/regexp/MessagesBundle_it.properties \\\n+  classpath/resource/java/util/iso4217.properties \\\n+  classpath/resource/javax/imageio/plugins/jpeg/MessagesBundle.properties \\\n+  classpath/resource/org/ietf/jgss/MessagesBundle.properties \\\n+  classpath/resource/META-INF/services/javax.sound.midi.spi.MidiDeviceProvider \\\n+  classpath/resource/META-INF/services/javax.xml.parsers.DocumentBuilderFactory \\\n+  classpath/resource/META-INF/services/javax.xml.parsers.SAXParserFactory \\\n+  classpath/resource/META-INF/services/javax.xml.parsers.TransformerFactory \\\n+  classpath/resource/META-INF/services/org.relaxng.datatype.DatatypeLibraryFactory \\\n+  classpath/resource/META-INF/services/org.xml.sax.driver\n+\n omitted_headers = java/lang/ClassLoader.h java/lang/Thread.h \\\n \tjava/lang/String.h java/lang/reflect/Constructor.h \\\n \tjava/lang/reflect/Field.h java/lang/reflect/Method.h \\"}, {"sha": "ebd5ad5b27355b2ea08886687b950de107790ab7", "filename": "libjava/scripts/makemake.tcl", "status": "modified", "additions": 30, "deletions": 5, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2Fscripts%2Fmakemake.tcl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2Fscripts%2Fmakemake.tcl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fscripts%2Fmakemake.tcl?ref=578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "patch": "@@ -88,6 +88,20 @@ makearray name_map\n global dir_map\n makearray dir_map\n \n+# An entry in this map means that all .properties files in the\n+# corresponding directory should be ignored.\n+global properties_map\n+makearray properties_map\n+\n+# logging.properties is installed and is editable.\n+set properties_map(java/util/logging) _\n+# We haven't merged locale resources yet.\n+set properties_map(gnu/java/locale) _\n+\n+\n+# List of all properties files.\n+set properties_files {}\n+\n # List of all '@' files that we are going to compile.\n set package_files {}\n \n@@ -163,11 +177,11 @@ proc classify_source_file {basedir file} {\n   error \"can't happen\"\n }\n \n-# Scan a directory and its subdirectories for .java source files.\n-# Note that we keep basedir and subdir separate so we can properly\n-# update our global data structures.\n+# Scan a directory and its subdirectories for .java source files or\n+# .properties files.  Note that we keep basedir and subdir separate so\n+# we can properly update our global data structures.\n proc scan_directory {basedir subdir} {\n-  global dir_map\n+  global dir_map properties_map properties_files\n \n   set subdirs {}\n   set files {}\n@@ -176,8 +190,16 @@ proc scan_directory {basedir subdir} {\n   foreach file [lsort [glob -nocomplain *]] {\n     if {[string match *.java $file]} {\n       lappend files $subdir/$file\n+    } elseif {[string match *.properties $file]} {\n+      if {! [info exists properties_map($subdir)]} {\n+\t# We assume there aren't any overrides.\n+\tlappend properties_files $basedir/$subdir/$file\n+      }\n     } elseif {[file isdirectory $file]} {\n       lappend subdirs $subdir/$file\n+    } elseif {$subdir == \"META-INF/services\"} {\n+      # All service files are included as properties.\n+      lappend properties_files $basedir/$subdir/$file\n     }\n   }\n   cd $here\n@@ -195,7 +217,7 @@ proc scan_directory {basedir subdir} {\n # Scan known packages beneath the base directory for .java source\n # files.\n proc scan_packages {basedir} {\n-  foreach subdir {gnu java javax org} {\n+  foreach subdir {gnu java javax org META-INF} {\n     if {[file exists $basedir/$subdir]} {\n       scan_directory $basedir $subdir\n     }\n@@ -340,6 +362,8 @@ scan_packages classpath\n scan_packages classpath/external/sax\n scan_packages classpath/external/w3c_dom\n scan_packages classpath/external/relaxngDatatype\n+# Resource files.\n+scan_packages classpath/resource\n # Now scan our own files; this will correctly override decisions made\n # when scanning classpath.\n scan_packages .\n@@ -376,3 +400,4 @@ foreach package [lsort [array names package_map]] {\n pp_var all_packages_source_files $package_files\n pp_var ordinary_header_files $header_vars \"\\$(\" \")\"\n pp_var bc_objects $bc_objects\n+pp_var property_files $properties_files"}, {"sha": "c614c304bfe17ceaf22971200cd4bf31d31a8284", "filename": "libjava/sources.am", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2Fsources.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/578fdcb215a61d97c704d4ef266bfc421bbe6f8d/libjava%2Fsources.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fsources.am?ref=578fdcb215a61d97c704d4ef266bfc421bbe6f8d", "patch": "@@ -8739,3 +8739,23 @@ bc_objects = \\\n   org-relaxng.lo \\\n   org-w3c.lo \\\n   org-xml.lo\n+\n+property_files = \\\n+  classpath/resource/gnu/classpath/tools/jarsigner/MessageBundle.properties \\\n+  classpath/resource/gnu/classpath/tools/keytool/MessageBundle.properties \\\n+  classpath/resource/gnu/java/awt/peer/gtk/font.properties \\\n+  classpath/resource/gnu/javax/print/PrinterDialog.properties \\\n+  classpath/resource/gnu/javax/print/PrinterDialog_de.properties \\\n+  classpath/resource/gnu/javax/security/auth/callback/MessagesBundle.properties \\\n+  classpath/resource/gnu/regexp/MessagesBundle.properties \\\n+  classpath/resource/gnu/regexp/MessagesBundle_fr.properties \\\n+  classpath/resource/gnu/regexp/MessagesBundle_it.properties \\\n+  classpath/resource/java/util/iso4217.properties \\\n+  classpath/resource/javax/imageio/plugins/jpeg/MessagesBundle.properties \\\n+  classpath/resource/org/ietf/jgss/MessagesBundle.properties \\\n+  classpath/resource/META-INF/services/javax.sound.midi.spi.MidiDeviceProvider \\\n+  classpath/resource/META-INF/services/javax.xml.parsers.DocumentBuilderFactory \\\n+  classpath/resource/META-INF/services/javax.xml.parsers.SAXParserFactory \\\n+  classpath/resource/META-INF/services/javax.xml.parsers.TransformerFactory \\\n+  classpath/resource/META-INF/services/org.relaxng.datatype.DatatypeLibraryFactory \\\n+  classpath/resource/META-INF/services/org.xml.sax.driver"}]}