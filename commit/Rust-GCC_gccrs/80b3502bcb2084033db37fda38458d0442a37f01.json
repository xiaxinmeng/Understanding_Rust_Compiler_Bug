{"sha": "80b3502bcb2084033db37fda38458d0442a37f01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODBiMzUwMmJjYjIwODQwMzNkYjM3ZmRhMzg0NThkMDQ0MmEzN2YwMQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2006-08-09T19:09:06Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2006-08-09T19:09:06Z"}, "message": "gcov.c (no_data_file): New flag.\n\n\t* gcov.c (no_data_file): New flag.\n\t(read_count_file): Set it if data file not present.  Assume counts\n\tzero if not found.\n\t(output_lines): Don't name the data file, if there wasn't one.\n\nFrom-SVN: r116045", "tree": {"sha": "db23142fb6e185a73c16d2fd67d627629e6522ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db23142fb6e185a73c16d2fd67d627629e6522ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/80b3502bcb2084033db37fda38458d0442a37f01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80b3502bcb2084033db37fda38458d0442a37f01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80b3502bcb2084033db37fda38458d0442a37f01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80b3502bcb2084033db37fda38458d0442a37f01/comments", "author": null, "committer": null, "parents": [{"sha": "1506961e116059cbf6acbf80e699b280bc680a94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1506961e116059cbf6acbf80e699b280bc680a94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1506961e116059cbf6acbf80e699b280bc680a94"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "1497429fbc2dbd9cc87747326ea18dc939c88cf6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80b3502bcb2084033db37fda38458d0442a37f01/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80b3502bcb2084033db37fda38458d0442a37f01/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=80b3502bcb2084033db37fda38458d0442a37f01", "patch": "@@ -1,3 +1,10 @@\n+2006-08-09  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* gcov.c (no_data_file): New flag.\n+\t(read_count_file): Set it if data file not present.  Assume counts\n+\tzero if not found.\n+\t(output_lines): Don't name the data file, if there wasn't one.\n+\n 2006-08-09  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* config/rs6000/rs6000.c (print_operand) <D>: Fix comment and adjust."}, {"sha": "3b249c7055b84ef11b00c1ce6b8953037ac73246", "filename": "gcc/gcov.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80b3502bcb2084033db37fda38458d0442a37f01/gcc%2Fgcov.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80b3502bcb2084033db37fda38458d0442a37f01/gcc%2Fgcov.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcov.c?ref=80b3502bcb2084033db37fda38458d0442a37f01", "patch": "@@ -277,6 +277,10 @@ static unsigned bbg_stamp;\n \n static char *da_file_name;\n \n+/* Data file is missing.  */\n+\n+static int no_data_file;\n+\n /* Output branch probabilities.  */\n \n static int flag_branches = 0;\n@@ -964,8 +968,10 @@ read_count_file (void)\n \n   if (!gcov_open (da_file_name, 1))\n     {\n-      fnotice (stderr, \"%s:cannot open data file\\n\", da_file_name);\n-      return 1;\n+      fnotice (stderr, \"%s:cannot open data file, assuming not executed\\n\",\n+\t       da_file_name);\n+      no_data_file = 1;\n+      return 0;\n     }\n   if (!gcov_magic (gcov_read_unsigned (), GCOV_DATA_MAGIC))\n     {\n@@ -1782,7 +1788,8 @@ output_lines (FILE *gcov_file, const source_t *src)\n \n   fprintf (gcov_file, \"%9s:%5d:Source:%s\\n\", \"-\", 0, src->name);\n   fprintf (gcov_file, \"%9s:%5d:Graph:%s\\n\", \"-\", 0, bbg_file_name);\n-  fprintf (gcov_file, \"%9s:%5d:Data:%s\\n\", \"-\", 0, da_file_name);\n+  fprintf (gcov_file, \"%9s:%5d:Data:%s\\n\", \"-\", 0,\n+\t   no_data_file ? \"-\" : da_file_name);\n   fprintf (gcov_file, \"%9s:%5d:Runs:%u\\n\", \"-\", 0,\n \t   object_summary.ctrs[GCOV_COUNTER_ARCS].runs);\n   fprintf (gcov_file, \"%9s:%5d:Programs:%u\\n\", \"-\", 0, program_count);"}]}