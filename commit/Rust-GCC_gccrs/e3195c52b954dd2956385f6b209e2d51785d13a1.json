{"sha": "e3195c52b954dd2956385f6b209e2d51785d13a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTMxOTVjNTJiOTU0ZGQyOTU2Mzg1ZjZiMjA5ZTJkNTE3ODVkMTNhMQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2011-06-04T14:24:20Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2011-06-04T14:24:20Z"}, "message": "re PR tree-optimization/48929 (ICE: in estimate_size_after_inlining, at ipa-inline-analysis.c:1961 with -findirect-inlining)\n\n\tPR tree-optimize/48929\n\t* gcc.c-torture/compile/pr48929.c: New testcase.\n\t* ipa-inline-analysis.c (remap_edge_predicates): Fix handling\n\tof empty predicate.\n\nFrom-SVN: r174638", "tree": {"sha": "5ae5e94e0ba3f23be6459d3fd1878156e922be26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ae5e94e0ba3f23be6459d3fd1878156e922be26"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3195c52b954dd2956385f6b209e2d51785d13a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3195c52b954dd2956385f6b209e2d51785d13a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3195c52b954dd2956385f6b209e2d51785d13a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3195c52b954dd2956385f6b209e2d51785d13a1/comments", "author": null, "committer": null, "parents": [{"sha": "047d33a0d40c52a5b227766c9af65d695d10b190", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/047d33a0d40c52a5b227766c9af65d695d10b190", "html_url": "https://github.com/Rust-GCC/gccrs/commit/047d33a0d40c52a5b227766c9af65d695d10b190"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "3306765661fd0b3e1c64ceb5e80c7e3ace4e156c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e3195c52b954dd2956385f6b209e2d51785d13a1", "patch": "@@ -1,3 +1,9 @@\n+2011-06-04  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimize/48929\n+\t* ipa-inline-analysis.c (remap_edge_predicates): Fix handling\n+\tof empty predicate.\n+\n 2011-06-04  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/48333"}, {"sha": "45bfeb6f4717c90cac371f13f4379e3baff88571", "filename": "gcc/ipa-inline-analysis.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2Fipa-inline-analysis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2Fipa-inline-analysis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-analysis.c?ref=e3195c52b954dd2956385f6b209e2d51785d13a1", "patch": "@@ -1949,6 +1949,8 @@ remap_edge_predicates (struct cgraph_node *node,\n       if (!e->inline_failed)\n \tremap_edge_predicates (e->callee, info, callee_info, operand_map,\n \t\t\t       possible_truths, toplev_predicate);\n+      else\n+\tedge_set_predicate (e, toplev_predicate);\n     }\n   for (e = node->indirect_calls; e; e = e->next_callee)\n     {\n@@ -1969,6 +1971,8 @@ remap_edge_predicates (struct cgraph_node *node,\n \t      e->frequency = 0;\n \t    }\n \t}\n+      else\n+\tedge_set_predicate (e, toplev_predicate);\n     }\n }\n "}, {"sha": "05efca005b47a69c11df318dc885669c0c763a54", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e3195c52b954dd2956385f6b209e2d51785d13a1", "patch": "@@ -1,3 +1,8 @@\n+2011-06-04  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimize/48929\n+\t* gcc.c-torture/compile/pr48929.c: New testcase.\n+\n 2011-06-04  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.dg/guality/rotatetest.c (f5, f6): Fix up pastos."}, {"sha": "f085dc645aebbf63637126d38b5fdefe2f4dc9b9", "filename": "gcc/testsuite/gcc.c-torture/compile/pr48929.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr48929.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3195c52b954dd2956385f6b209e2d51785d13a1/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr48929.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr48929.c?ref=e3195c52b954dd2956385f6b209e2d51785d13a1", "patch": "@@ -0,0 +1,32 @@\n+/*{ dg-options \"-O  -findirect-inlining\" }*/\n+void bar ();\n+\n+static void\n+f4 (double di, double d, double *dd)\n+{\n+  if (d == 0 && di == 0)\n+    *dd = 0;\n+  bar ();\n+}\n+\n+static inline void\n+f3 (int i, double d)\n+{\n+  double di = i;\n+  double dd;\n+  f4 (di, d, &dd);\n+}\n+\n+static inline void\n+f2 (int i, double d)\n+{\n+  if (d < 0)\n+    f3 (i, d);\n+}\n+\n+void\n+f1 ()\n+{\n+  f2 (0, 1);\n+}\n+"}]}