{"sha": "476053121ba5fc4840146ef05a89636f5d37178c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc2MDUzMTIxYmE1ZmM0ODQwMTQ2ZWYwNWE4OTYzNmY1ZDM3MTc4Yw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2016-11-13T18:29:45Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2016-11-13T18:29:45Z"}, "message": "decl.c (gnat_to_gnu_entity): Look at the underlying type for the signedness of the type.\n\n\t* gcc-interface/decl.c (gnat_to_gnu_entity) <E_Signed_Integer_Subtype>:\n\tLook at the underlying type for the signedness of the type.\n\nFrom-SVN: r242361", "tree": {"sha": "e7d03bb4d03b470483c5605caecb4e3580a3c7cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7d03bb4d03b470483c5605caecb4e3580a3c7cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/476053121ba5fc4840146ef05a89636f5d37178c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/476053121ba5fc4840146ef05a89636f5d37178c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/476053121ba5fc4840146ef05a89636f5d37178c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/476053121ba5fc4840146ef05a89636f5d37178c/comments", "author": null, "committer": null, "parents": [{"sha": "c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0c54de6a09b8b280f2b3091f0e2c0894eb6f9d8"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "695518d5552847184a4677ee88bc976c697a5c22", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=476053121ba5fc4840146ef05a89636f5d37178c", "patch": "@@ -1,3 +1,8 @@\n+2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity) <E_Signed_Integer_Subtype>:\n+\tLook at the underlying type for the signedness of the type.\n+\n 2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (annotate_value) <INTEGER_CST>: Deal specially"}, {"sha": "c023e31a6d238ff5ddf53e5ec6fc754cbf2593f5", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=476053121ba5fc4840146ef05a89636f5d37178c", "patch": "@@ -1836,7 +1836,7 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, bool definition)\n \t  && esize == CHAR_TYPE_SIZE\n \t  && flag_signed_char)\n \tgnu_type = make_signed_type (CHAR_TYPE_SIZE);\n-      else if (Is_Unsigned_Type (Etype (gnat_entity))\n+      else if (Is_Unsigned_Type (Underlying_Type (Etype (gnat_entity)))\n \t       || (Esize (Etype (gnat_entity)) != Esize (gnat_entity)\n \t\t   && Is_Unsigned_Type (gnat_entity))\n \t       || Has_Biased_Representation (gnat_entity))"}, {"sha": "0ae7b97cd57c9a334a08d1f6f9b1bb757eee6b60", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=476053121ba5fc4840146ef05a89636f5d37178c", "patch": "@@ -1,3 +1,7 @@\n+2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/address_conv.adb: New test.\n+\n 2016-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/renaming11.ad[sb]: New test."}, {"sha": "27b3dada9ab652f16a91fdb8c9d8e3c902abcb7c", "filename": "gcc/testsuite/gnat.dg/address_conv.adb", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Ftestsuite%2Fgnat.dg%2Faddress_conv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476053121ba5fc4840146ef05a89636f5d37178c/gcc%2Ftestsuite%2Fgnat.dg%2Faddress_conv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faddress_conv.adb?ref=476053121ba5fc4840146ef05a89636f5d37178c", "patch": "@@ -0,0 +1,19 @@\n+--  { dg-do compile }\n+\n+with System.Storage_Elements; use System.Storage_Elements;\n+\n+procedure Address_Conv is\n+\n+  subtype My_Address is System.Address;\n+\n+  type Rec is record\n+    A : My_Address;\n+  end record;\n+\n+  Addr : constant My_Address := To_Address (16#FACEFACE#);\n+\n+  R : constant Rec := (A => Addr);\n+\n+begin\n+  null;\n+end;"}]}