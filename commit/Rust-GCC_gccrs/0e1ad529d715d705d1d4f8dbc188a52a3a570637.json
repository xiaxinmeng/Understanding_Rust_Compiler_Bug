{"sha": "0e1ad529d715d705d1d4f8dbc188a52a3a570637", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGUxYWQ1MjlkNzE1ZDcwNWQxZDRmOGRiYzE4OGE1MmEzYTU3MDYzNw==", "commit": {"author": {"name": "Fariborz Jahanian", "email": "fjahanian@apple.com", "date": "2004-11-19T18:01:54Z"}, "committer": {"name": "Fariborz Jahanian", "email": "fjahanian@gcc.gnu.org", "date": "2004-11-19T18:01:54Z"}, "message": "No darwin non-lazy-ptr for address calculatation when not needed.\n\nOKed by Geoff Keating.\n\nFrom-SVN: r90925", "tree": {"sha": "92c1666170014e9d1f804e9f4ae4f881f22c7b57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/92c1666170014e9d1f804e9f4ae4f881f22c7b57"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e1ad529d715d705d1d4f8dbc188a52a3a570637", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e1ad529d715d705d1d4f8dbc188a52a3a570637", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e1ad529d715d705d1d4f8dbc188a52a3a570637", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e1ad529d715d705d1d4f8dbc188a52a3a570637/comments", "author": null, "committer": null, "parents": [{"sha": "075523c69fec880d83efa91c773fb5a602968a6c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/075523c69fec880d83efa91c773fb5a602968a6c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/075523c69fec880d83efa91c773fb5a602968a6c"}], "stats": {"total": 64, "additions": 64, "deletions": 0}, "files": [{"sha": "dcba5b0bc511bb0ba7764b1370aa521e82225b55", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e1ad529d715d705d1d4f8dbc188a52a3a570637", "patch": "@@ -1,3 +1,8 @@\n+2004-11-18  Fariborz Jahanian <fjahanian@apple.com>\n+\n+\t* config/darwin.c (machopic_data_defined_p): return 1 for\n+\tMACHOPIC_DEFINED_FUNCTION.\n+\n 2004-11-19  Jeff Law  <law@redhat.com>\n \n \t* tree-ssa.c (verify_ssa): Remove redundant checking of PHI"}, {"sha": "04beb4dfa21cd9b67483a154402d3e0bd3b396ca", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=0e1ad529d715d705d1d4f8dbc188a52a3a570637", "patch": "@@ -169,6 +169,7 @@ machopic_data_defined_p (rtx sym_ref)\n   switch (machopic_classify_symbol (sym_ref))\n     {\n     case MACHOPIC_DEFINED_DATA:\n+    case MACHOPIC_DEFINED_FUNCTION:\n       return 1;\n     default:\n       return 0;"}, {"sha": "da66b518ff0555c7234989e63d36aeeb0c5e1e11", "filename": "gcc/testsuite/gcc.dg/lazy-ptr-test.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2Ftestsuite%2Fgcc.dg%2Flazy-ptr-test.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2Ftestsuite%2Fgcc.dg%2Flazy-ptr-test.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flazy-ptr-test.c?ref=0e1ad529d715d705d1d4f8dbc188a52a3a570637", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile { target powerpc*-apple-darwin* } } */\n+/* { dg-options \"-S\" } */\n+\n+void f () __attribute__((weak_import));\n+\n+typedef void PF (void);\n+\n+void f(void){};\n+\n+PF* g (void) { return f; }\n+\n+int main()\n+{\n+\t(*g())();\n+\treturn 0;\n+}\n+\n+/* { dg-final { scan-assembler \"non_lazy_ptr\" } } */"}, {"sha": "e496784d32bc9fed1bcadd507d4cba67348a5f2e", "filename": "gcc/testsuite/gcc.dg/non-lazy-ptr-test.c", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2Ftestsuite%2Fgcc.dg%2Fnon-lazy-ptr-test.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e1ad529d715d705d1d4f8dbc188a52a3a570637/gcc%2Ftestsuite%2Fgcc.dg%2Fnon-lazy-ptr-test.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fnon-lazy-ptr-test.c?ref=0e1ad529d715d705d1d4f8dbc188a52a3a570637", "patch": "@@ -0,0 +1,40 @@\n+/* { dg-do compile { target powerpc*-apple-darwin* } } */\n+/* { dg-options \"-S\" } */\n+\n+typedef void PF (void);\n+\n+static void f(void) {\n+}\n+\n+void f1(void) {\n+}\n+\n+extern void f2(void) {\n+}\n+\n+static void f3(void);\n+\n+__private_extern__ void pe(void)\n+{\n+}\n+\n+PF* g (void) { f(); return f; }\n+PF* x (void) { return f1; }\n+PF* y (void) { f2(); return f2; }\n+PF* z (void) { return f3; }\n+PF* w (void) { pe(); return pe; }\n+\n+int main()\n+{\n+\t(*g())();\n+\t(*x())();\n+\t(*y())();\n+\t(*z())();\n+\t(*w())();\n+\treturn 0;\n+}\n+\n+void f3(void) {\n+}\n+\n+/* { dg-final { scan-assembler-not \"non_lazy_ptr\" } } */"}]}