{"sha": "dd666a872b497162a7e2130415936df27f532b35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ2NjZhODcyYjQ5NzE2MmE3ZTIxMzA0MTU5MzZkZjI3ZjUzMmIzNQ==", "commit": {"author": {"name": "Neil Booth", "email": "neil@cat.daikokuya.demon.co.uk", "date": "2001-07-31T06:52:21Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-07-31T06:52:21Z"}, "message": "* gcc.dg/cpp/macro8.c: New tests.\n\nFrom-SVN: r44502", "tree": {"sha": "f505c554fcb366f358e3e22dd4131785b97c75ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f505c554fcb366f358e3e22dd4131785b97c75ce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd666a872b497162a7e2130415936df27f532b35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd666a872b497162a7e2130415936df27f532b35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd666a872b497162a7e2130415936df27f532b35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd666a872b497162a7e2130415936df27f532b35/comments", "author": null, "committer": null, "parents": [{"sha": "91abf72dfcfd9dddafdadd0d1262f1465bfb8abc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91abf72dfcfd9dddafdadd0d1262f1465bfb8abc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91abf72dfcfd9dddafdadd0d1262f1465bfb8abc"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "8a88b5e58169ee6587087b0be6848c32d727cfe9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd666a872b497162a7e2130415936df27f532b35/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd666a872b497162a7e2130415936df27f532b35/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dd666a872b497162a7e2130415936df27f532b35", "patch": "@@ -1,3 +1,7 @@\n+2001-07-31  Neil Booth  <neil@cat.daikokuya.demon.co.uk>\n+\n+\t* gcc.dg/cpp/macro8.c: New test.\n+\n 2001-07-27  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.dg/abi/vbase8-21.C: New test."}, {"sha": "f49b0be9e2ebffcec1a3d8e48ffaa63d6415de58", "filename": "gcc/testsuite/gcc.dg/cpp/macro8.c", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd666a872b497162a7e2130415936df27f532b35/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmacro8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd666a872b497162a7e2130415936df27f532b35/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmacro8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmacro8.c?ref=dd666a872b497162a7e2130415936df27f532b35", "patch": "@@ -0,0 +1,29 @@\n+/* { dg-do compile } */\n+/* { dg-options -std=gnu89 } */\n+\n+/* GCC 2.95.2 used to get the following variable argument macro\n+   expansions wrong.\n+\n+   Source: Neil Booth, from PR 3852 with persmission.  31 Jul 2001.  */\n+\n+#define TEST_WORSE(args...) (5, ## args)\n+#define TEST_BAD(foo, args...) (2, (foo), ## args)\n+\n+extern void abort ();\n+\n+static int add (int a, int b)\n+{\n+  return a + b;\n+}\n+\n+int main ()\n+{\n+  /* Would expand to a single closing parenthesis, maybe because of\n+     the \"no args requires space\" brokenness.  */\n+  if (TEST_WORSE () != 5)\n+    abort ();\n+  /* The macro would expand to (0, (0) with a missing closing parenthesis.  */\n+  if (add TEST_BAD (5) != 7)\n+    abort ();\n+  return 0;\n+}"}]}