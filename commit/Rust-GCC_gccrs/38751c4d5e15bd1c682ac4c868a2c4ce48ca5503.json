{"sha": "38751c4d5e15bd1c682ac4c868a2c4ce48ca5503", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg3NTFjNGQ1ZTE1YmQxYzY4MmFjNGM4NjhhMmM0Y2U0OGNhNTUwMw==", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2021-05-18T14:21:27Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2021-05-18T14:21:27Z"}, "message": "libstdc++: Fix access issue in elements_view::_Sentinel [PR100631]\n\nIn the earlier commit r12-854 I forgot to also rewrite the other operator-\noverload in terms of the split-out member function _M_distance_from.\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/100631\n\t* include/std/ranges (elements_view::_Sentinel::operator-): Use\n\t_M_distance_from in the other operator- overload too.\n\t* testsuite/std/ranges/adaptors/elements.cc (test06): Augment test.", "tree": {"sha": "ff029950b27ac33561b143c489fe2c1a73ea127f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff029950b27ac33561b143c489fe2c1a73ea127f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503/comments", "author": null, "committer": null, "parents": [{"sha": "8b9484c54b4000209d4bfb270e22c9c8b9673fdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b9484c54b4000209d4bfb270e22c9c8b9673fdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b9484c54b4000209d4bfb270e22c9c8b9673fdb"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "0588bebb351f72f22594ec9fdcded41018c3c2e3", "filename": "libstdc++-v3/include/std/ranges", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges?ref=38751c4d5e15bd1c682ac4c868a2c4ce48ca5503", "patch": "@@ -3687,7 +3687,7 @@ namespace views::__adaptor\n \t    requires sized_sentinel_for<sentinel_t<_Base>, iterator_t<_Base2>>\n \t    friend constexpr range_difference_t<_Base2>\n \t    operator-(const _Iterator<_Const2>& __x, const _Sentinel& __y)\n-\t    { return __x._M_current - __y._M_end; }\n+\t    { return -__y._M_distance_from(__x); }\n \n \t  template<bool _Const2,\n \t\t   typename _Base2 = __detail::__maybe_const_t<_Const2, _Vp>>"}, {"sha": "1322f44036eef0b7d32411c140752707027be973", "filename": "libstdc++-v3/testsuite/std/ranges/adaptors/elements.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fadaptors%2Felements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38751c4d5e15bd1c682ac4c868a2c4ce48ca5503/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fadaptors%2Felements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fadaptors%2Felements.cc?ref=38751c4d5e15bd1c682ac4c868a2c4ce48ca5503", "patch": "@@ -128,7 +128,8 @@ test06()\n     | views::keys;\n   auto b = r.begin();\n   auto e = r.end();\n-  e - b;\n+  VERIFY( e - b == 42 );\n+  VERIFY( b - e == -42 );\n }\n \n void"}]}