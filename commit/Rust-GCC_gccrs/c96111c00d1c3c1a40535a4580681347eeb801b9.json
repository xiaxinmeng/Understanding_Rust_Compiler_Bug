{"sha": "c96111c00d1c3c1a40535a4580681347eeb801b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzk2MTExYzAwZDFjM2MxYTQwNTM1YTQ1ODA2ODEzNDdlZWI4MDFiOQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2007-01-05T21:22:05Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2007-01-05T21:22:05Z"}, "message": "trans-array.c (gfc_conv_loop_setup): Test whether the loop stride is one...\n\n\n\t* trans-array.c (gfc_conv_loop_setup):  Test whether the loop\n\tstride is one, to avoid fold_build2 introducing a useless\n\tNON_LVALUE_EXPR node.\n\nFrom-SVN: r120500", "tree": {"sha": "20bb6a799235d34926f0f093e96c4cf0c9975937", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20bb6a799235d34926f0f093e96c4cf0c9975937"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c96111c00d1c3c1a40535a4580681347eeb801b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c96111c00d1c3c1a40535a4580681347eeb801b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c96111c00d1c3c1a40535a4580681347eeb801b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c96111c00d1c3c1a40535a4580681347eeb801b9/comments", "author": null, "committer": null, "parents": [{"sha": "afe1a916d7e6195a85569d33685fd3259f9a0e84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afe1a916d7e6195a85569d33685fd3259f9a0e84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afe1a916d7e6195a85569d33685fd3259f9a0e84"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "73dcf0e57f2c1a8b6adbef3a4d03de07864b3419", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c96111c00d1c3c1a40535a4580681347eeb801b9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c96111c00d1c3c1a40535a4580681347eeb801b9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c96111c00d1c3c1a40535a4580681347eeb801b9", "patch": "@@ -1,3 +1,9 @@\n+2007-01-05  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* trans-array.c (gfc_conv_loop_setup):  Test whether the loop\n+\tstride is one, to avoid fold_build2 introducing a useless\n+\tNON_LVALUE_EXPR node.\n+\n 2007-01-05  Tobias Burnus  <burnus@net-b.de>\n \n \t* symbol.c (check_conflict): Fix error message."}, {"sha": "d6d3ff7eff086f7a2d19063deff1e24ddc4e2252", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c96111c00d1c3c1a40535a4580681347eeb801b9/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c96111c00d1c3c1a40535a4580681347eeb801b9/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=c96111c00d1c3c1a40535a4580681347eeb801b9", "patch": "@@ -3141,8 +3141,10 @@ gfc_conv_loop_setup (gfc_loopinfo * loop)\n \t    {\n \t      /* Calculate the offset relative to the loop variable.\n \t         First multiply by the stride.  */\n-\t      tmp = fold_build2 (MULT_EXPR, gfc_array_index_type,\n-\t\t\t\t loop->from[n], info->stride[n]);\n+\t      tmp = loop->from[n];\n+\t      if (!integer_onep (info->stride[n]))\n+\t\ttmp = fold_build2 (MULT_EXPR, gfc_array_index_type,\n+\t\t\t\t   tmp, info->stride[n]);\n \n \t      /* Then subtract this from our starting value.  */\n \t      tmp = fold_build2 (MINUS_EXPR, gfc_array_index_type,"}]}