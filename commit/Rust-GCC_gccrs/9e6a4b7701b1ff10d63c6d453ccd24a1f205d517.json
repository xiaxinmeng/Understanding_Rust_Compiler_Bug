{"sha": "9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWU2YTRiNzcwMWIxZmYxMGQ2M2M2ZDQ1M2NjZDI0YTFmMjA1ZDUxNw==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-06-02T21:51:18Z"}, "committer": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "2012-06-02T21:51:18Z"}, "message": "Restore Sparc build.\n\ngcc/\n\n\t* config/sparc/sparc.h (INITIAL_ELIMINATION_OFFSET): Split out to\n\tnew function sparc_initial_elimination_offset.\n\t* config/sparc/sparc.c (sparc_initial_elimination_offset): New\n\tfunction.\n\t* config/sparc/sparc-protos.h (sparc_initial_elimination_offset):\n\tPrototype it.\n\nFrom-SVN: r188142", "tree": {"sha": "a6a1162929b718df4e783e57c3c83d3b938d8194", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6a1162929b718df4e783e57c3c83d3b938d8194"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/comments", "author": null, "committer": null, "parents": [{"sha": "49ab6098eefb9414d849b79df3f27cfc82c3ffe6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49ab6098eefb9414d849b79df3f27cfc82c3ffe6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49ab6098eefb9414d849b79df3f27cfc82c3ffe6"}], "stats": {"total": 42, "additions": 33, "deletions": 9}, "files": [{"sha": "2eb5720b4abd3e51766296a98451ef934bfd9a70", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "patch": "@@ -1,3 +1,12 @@\n+2012-06-02  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* config/sparc/sparc.h (INITIAL_ELIMINATION_OFFSET): Split out to\n+\tnew function sparc_initial_elimination_offset.\n+\t* config/sparc/sparc.c (sparc_initial_elimination_offset): New\n+\tfunction.\n+\t* config/sparc/sparc-protos.h (sparc_initial_elimination_offset):\n+\tPrototype it.\n+\n 2012-06-2  Kenneth Zadeck <zadeck@naturalbridge.com>\n \n \t* expmed.c (expand_mult, choose_multiplier): Change \"2 *"}, {"sha": "b03f5cc58585748cd5027489639eeb080a536129", "filename": "gcc/config/sparc/sparc-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2Fconfig%2Fsparc%2Fsparc-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2Fconfig%2Fsparc%2Fsparc-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc-protos.h?ref=9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "patch": "@@ -37,6 +37,7 @@ extern enum direction function_arg_padding (enum machine_mode, const_tree);\n \n extern void order_regs_for_local_alloc (void);\n extern HOST_WIDE_INT sparc_compute_frame_size (HOST_WIDE_INT, int);\n+extern int sparc_initial_elimination_offset (int);\n extern void sparc_expand_prologue (void);\n extern void sparc_flat_expand_prologue (void);\n extern void sparc_expand_epilogue (bool);"}, {"sha": "7b1899d661c3988b63782735d2d65075d521cd0f", "filename": "gcc/config/sparc/sparc.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2Fconfig%2Fsparc%2Fsparc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2Fconfig%2Fsparc%2Fsparc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.c?ref=9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "patch": "@@ -4551,6 +4551,23 @@ sparc_compute_frame_size (HOST_WIDE_INT size, int leaf_function)\n   return frame_size;\n }\n \n+/* Implement the macro INITIAL_ELIMINATION_OFFSET, return the OFFSET.  */\n+\n+int\n+sparc_initial_elimination_offset (int to)\n+{\n+  int offset;\n+\n+  if (to == STACK_POINTER_REGNUM)\n+    offset = sparc_compute_frame_size (get_frame_size (),\n+\t\t\t\t       current_function_is_leaf);\n+  else\n+    offset = 0;\n+\n+  offset += SPARC_STACK_BIAS;\n+  return offset;\n+}\n+\n /* Output any necessary .register pseudo-ops.  */\n \n void"}, {"sha": "234edcfd9c4a19974bda95aed83c761336a557ee", "filename": "gcc/config/sparc/sparc.h", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2Fconfig%2Fsparc%2Fsparc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e6a4b7701b1ff10d63c6d453ccd24a1f205d517/gcc%2Fconfig%2Fsparc%2Fsparc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.h?ref=9e6a4b7701b1ff10d63c6d453ccd24a1f205d517", "patch": "@@ -1104,15 +1104,12 @@ extern char leaf_reg_remap[];\n   {{ FRAME_POINTER_REGNUM, STACK_POINTER_REGNUM}, \\\n    { FRAME_POINTER_REGNUM, HARD_FRAME_POINTER_REGNUM} }\n \n-#define INITIAL_ELIMINATION_OFFSET(FROM, TO, OFFSET) \t\t\t\\\n-  do {\t\t\t\t\t\t\t\t\t\\\n-    if ((TO) == STACK_POINTER_REGNUM)\t\t\t\t\t\\\n-      (OFFSET) = sparc_compute_frame_size (get_frame_size (),\t\t\\\n-\t\t\t\t\t   current_function_is_leaf);\t\\\n-    else\t\t\t\t\t\t\t\t\\\n-      (OFFSET) = 0;\t\t\t\t\t\t\t\\\n-    (OFFSET) += SPARC_STACK_BIAS;\t\t\t\t\t\\\n-  } while (0)\n+#define INITIAL_ELIMINATION_OFFSET(FROM, TO, OFFSET) \t\t\\\n+  do\t\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\\\n+      (OFFSET) = sparc_initial_elimination_offset ((TO));\t\\\n+    }\t\t\t\t\t\t\t\t\\\n+  while (0)\n \n /* Keep the stack pointer constant throughout the function.\n    This is both an optimization and a necessity: longjmp"}]}