{"sha": "c2a124b2b4458dc81089e2ebee826816eaf81ff4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzJhMTI0YjJiNDQ1OGRjODEwODllMmViZWU4MjY4MTZlYWY4MWZmNA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-08-24T06:37:58Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-08-24T06:37:58Z"}, "message": "re PR c++/17163 (ICE with -frepo and static class variables)\n\n\tPR c++/17163\n\t* pt.c (instantiate_decl): Do not try to apply\n\tDECL_DECLARED_INLINED_P to a VAR_DECL.\n\n\tPR c++/17163\n\t* g++.dg/template/repo2.C: New test.\n\nFrom-SVN: r86467", "tree": {"sha": "9808923eae1fa32febf544a3601b98861ccf5a8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9808923eae1fa32febf544a3601b98861ccf5a8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c2a124b2b4458dc81089e2ebee826816eaf81ff4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2a124b2b4458dc81089e2ebee826816eaf81ff4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2a124b2b4458dc81089e2ebee826816eaf81ff4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2a124b2b4458dc81089e2ebee826816eaf81ff4/comments", "author": null, "committer": null, "parents": [{"sha": "a2fe197507e63ad24e6ed4f0532b73fa93e40c95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2fe197507e63ad24e6ed4f0532b73fa93e40c95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2fe197507e63ad24e6ed4f0532b73fa93e40c95"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "7e013c792258b6b4eedd683769e26bc9ffa9dea0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c2a124b2b4458dc81089e2ebee826816eaf81ff4", "patch": "@@ -1,3 +1,11 @@\n+2004-08-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/17163\n+\t* pt.c (instantiate_decl): Do not try to apply\n+\tDECL_DECLARED_INLINED_P to a VAR_DECL.\n+\n+\t* search.c (build_baselink): Fix typo in comment.\n+\n 2004-08-22 Andrew Pinski  <apinski@apple.com>\n \n \tRevert:"}, {"sha": "b995ba41daae70ebef2d607ff40fad028a81ee9f", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=c2a124b2b4458dc81089e2ebee826816eaf81ff4", "patch": "@@ -11183,7 +11183,9 @@ instantiate_decl (tree d, int defer_ok, int undefined_ok)\n       /* Instantiate inline functions so that the inliner can do its\n \t job, even though we'll not be emitting a copy of this\n \t function.  */\n-      if (!flag_inline_trees || !DECL_DECLARED_INLINE_P (d))\n+      if (!(TREE_CODE (d) == FUNCTION_DECL\n+\t    && flag_inline_trees \n+\t    && DECL_DECLARED_INLINE_P (d)))\n \tgoto out;\n     }\n "}, {"sha": "df5804b29ef3aa96e5faf126f7c3388020f336e1", "filename": "gcc/cp/search.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Fcp%2Fsearch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Fcp%2Fsearch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsearch.c?ref=c2a124b2b4458dc81089e2ebee826816eaf81ff4", "patch": "@@ -1135,7 +1135,7 @@ lookup_field_r (tree binfo, void *data)\n   return NULL_TREE;\n }\n \n-/* Return a \"baselink\" which BASELINK_BINFO, BASELINK_ACCESS_BINFO,\n+/* Return a \"baselink\" with BASELINK_BINFO, BASELINK_ACCESS_BINFO,\n    BASELINK_FUNCTIONS, and BASELINK_OPTYPE set to BINFO, ACCESS_BINFO,\n    FUNCTIONS, and OPTYPE respectively.  */\n "}, {"sha": "343d3bba591910101d0eacf885bf5cd07ef944c9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c2a124b2b4458dc81089e2ebee826816eaf81ff4", "patch": "@@ -1,3 +1,8 @@\n+2004-08-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/17163\n+\t* g++.dg/template/repo2.C: New test.\n+\n 2004-08-23  Roger Sayle  <roger@eyesopen.com>\n \n \tPR rtl-optimization/17078"}, {"sha": "0fc960b603ad2962594a075da75e8f177765d20a", "filename": "gcc/testsuite/g++.dg/template/repo2.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c2a124b2b4458dc81089e2ebee826816eaf81ff4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo2.C?ref=c2a124b2b4458dc81089e2ebee826816eaf81ff4", "patch": "@@ -0,0 +1,14 @@\n+// PR c++/17163\n+// { dg-options \"-frepo\" }\n+\n+template <int __inst>\n+struct __Atomicity_lock\n+{\n+  static unsigned char _S_atomicity_lock;\n+};\n+template <int __inst>\n+unsigned char __Atomicity_lock<__inst>::_S_atomicity_lock = 0;\n+template unsigned char __Atomicity_lock<0>::_S_atomicity_lock;\n+\n+int main () {\n+}"}]}