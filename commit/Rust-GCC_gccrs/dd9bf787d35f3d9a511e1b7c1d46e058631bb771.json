{"sha": "dd9bf787d35f3d9a511e1b7c1d46e058631bb771", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ5YmY3ODdkMzVmM2Q5YTUxMWUxYjdjMWQ0NmUwNTg2MzFiYjc3MQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-12-21T16:09:23Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-12-21T16:09:23Z"}, "message": "re PR rtl-optimization/87727 (gcc.target/sparc/overflow-2.c FAILs)\n\n\tPR rtl-optimization/87727\n\t* combine.c (cant_combine_insn_p): On a LEAF_REGISTERS target, combine\n\tagain moves from leaf hard registers.\n\n\t* final.c (final_scan_insn_1) <NOTE_INSN_INLINE_ENTRY>: Minor tweak.\n\nFrom-SVN: r267328", "tree": {"sha": "112471151e4c1bfbf9b4e82ba5f3adb2ecd0a468", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/112471151e4c1bfbf9b4e82ba5f3adb2ecd0a468"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd9bf787d35f3d9a511e1b7c1d46e058631bb771", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd9bf787d35f3d9a511e1b7c1d46e058631bb771", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd9bf787d35f3d9a511e1b7c1d46e058631bb771", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd9bf787d35f3d9a511e1b7c1d46e058631bb771/comments", "author": null, "committer": null, "parents": [{"sha": "4a77025b7d680c2f8d8a04c1b769d28a5897234a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a77025b7d680c2f8d8a04c1b769d28a5897234a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a77025b7d680c2f8d8a04c1b769d28a5897234a"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "98a8f472b7d594813a50fd2cd7961efae8bf1dc1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9bf787d35f3d9a511e1b7c1d46e058631bb771/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9bf787d35f3d9a511e1b7c1d46e058631bb771/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dd9bf787d35f3d9a511e1b7c1d46e058631bb771", "patch": "@@ -1,3 +1,11 @@\n+2018-12-21  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR rtl-optimization/87727\n+\t* combine.c (cant_combine_insn_p): On a LEAF_REGISTERS target, combine\n+\tagain moves from leaf hard registers.\n+\n+\t* final.c (final_scan_insn_1) <NOTE_INSN_INLINE_ENTRY>: Minor tweak.\n+\n 2018-12-21  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/88522"}, {"sha": "6f1a335a25d1f8932179623d9b60b53868ec40d9", "filename": "gcc/combine.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9bf787d35f3d9a511e1b7c1d46e058631bb771/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9bf787d35f3d9a511e1b7c1d46e058631bb771/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=dd9bf787d35f3d9a511e1b7c1d46e058631bb771", "patch": "@@ -2353,7 +2353,12 @@ cant_combine_insn_p (rtx_insn *insn)\n     dest = SUBREG_REG (dest);\n   if (REG_P (src) && REG_P (dest)\n       && ((HARD_REGISTER_P (src)\n-\t   && ! TEST_HARD_REG_BIT (fixed_reg_set, REGNO (src)))\n+\t   && ! TEST_HARD_REG_BIT (fixed_reg_set, REGNO (src))\n+#ifdef LEAF_REGISTERS\n+\t   && ! LEAF_REGISTERS [REGNO (src)])\n+#else\n+\t   )\n+#endif\n \t  || (HARD_REGISTER_P (dest)\n \t      && ! TEST_HARD_REG_BIT (fixed_reg_set, REGNO (dest))\n \t      && targetm.class_likely_spilled_p (REGNO_REG_CLASS (REGNO (dest))))))"}, {"sha": "a2993f0f2cda4e0eec12a6f906d6270495c9d5d2", "filename": "gcc/final.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd9bf787d35f3d9a511e1b7c1d46e058631bb771/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd9bf787d35f3d9a511e1b7c1d46e058631bb771/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=dd9bf787d35f3d9a511e1b7c1d46e058631bb771", "patch": "@@ -2430,10 +2430,9 @@ final_scan_insn_1 (rtx_insn *insn, FILE *file, int optimize_p ATTRIBUTE_UNUSED,\n \n \tcase NOTE_INSN_INLINE_ENTRY:\n \t  gcc_checking_assert (cfun->debug_nonbind_markers);\n-\t  if (!DECL_IGNORED_P (current_function_decl))\n+\t  if (!DECL_IGNORED_P (current_function_decl)\n+\t      && notice_source_line (insn, NULL))\n \t    {\n-\t      if (!notice_source_line (insn, NULL))\n-\t\tbreak;\n \t      (*debug_hooks->inline_entry) (LOCATION_BLOCK\n \t\t\t\t\t    (NOTE_MARKER_LOCATION (insn)));\n \t      goto output_source_line;"}]}