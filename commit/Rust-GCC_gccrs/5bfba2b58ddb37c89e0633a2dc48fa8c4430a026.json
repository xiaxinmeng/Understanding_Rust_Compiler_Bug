{"sha": "5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWJmYmEyYjU4ZGRiMzdjODllMDYzM2EyZGM0OGZhOGM0NDMwYTAyNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-11-14T12:36:59Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-11-14T12:36:59Z"}, "message": "re PR rtl-optimization/87817 (gcc.target/i386/bmi2-bzhi-2.c execution test)\n\n\tPR rtl-optimization/87817\n\t* config/i386/i386.c (ix86_fold_builtin): For _bzhi_u{32,64} if\n\tlast argument has low 8 bits clear, fold to 0.\n\n\t* gcc.target/i386/bmi2-bzhi-3.c (main): Add a couple of new tests.\n\nFrom-SVN: r266140", "tree": {"sha": "3301ff30b33aa7dca70e7973ded9ef79e67615d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3301ff30b33aa7dca70e7973ded9ef79e67615d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ff4d8480403be6ab92e07f6981e7bfc04c3863c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff4d8480403be6ab92e07f6981e7bfc04c3863c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff4d8480403be6ab92e07f6981e7bfc04c3863c9"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "6f9b26e465c5c0a05b334c5f9834def5b99722d2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "patch": "@@ -1,3 +1,9 @@\n+2018-11-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/87817\n+\t* config/i386/i386.c (ix86_fold_builtin): For _bzhi_u{32,64} if\n+\tlast argument has low 8 bits clear, fold to 0.\n+\n 2018-11-14  Iain Sandoe  <iain@sandoe.co.uk>\n \n \t* tree-vect-data-refs.c (vect_can_force_dr_alignment_p): Cast"}, {"sha": "76a92b167f55ae77ff22037d9f94d8aa68f0e515", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "patch": "@@ -32671,6 +32671,8 @@ ix86_fold_builtin (tree fndecl, int n_args,\n \t      unsigned int idx = tree_to_uhwi (args[1]) & 0xff;\n \t      if (idx >= TYPE_PRECISION (TREE_TYPE (args[0])))\n \t\treturn args[0];\n+\t      if (idx == 0)\n+\t\treturn build_int_cst (TREE_TYPE (TREE_TYPE (fndecl)), 0);\n \t      if (!tree_fits_uhwi_p (args[0]))\n \t\tbreak;\n \t      unsigned HOST_WIDE_INT res = tree_to_uhwi (args[0]);"}, {"sha": "d8897fa5dbe5530cc2890fdf6dc70389fc76f62c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "patch": "@@ -1,3 +1,8 @@\n+2018-11-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/87817\n+\t* gcc.target/i386/bmi2-bzhi-3.c (main): Add a couple of new tests.\n+\n 2018-11-14  Wilco Dijkstra  <wdijkstr@arm.com>  \n \n \t* gcc.target/aarch64/pr62178.c: Relax scan-assembler checks."}, {"sha": "79905eba9b583419673291cd9ef70644f7d1dc95", "filename": "gcc/testsuite/gcc.target/i386/bmi2-bzhi-3.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fbmi2-bzhi-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bfba2b58ddb37c89e0633a2dc48fa8c4430a026/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fbmi2-bzhi-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fbmi2-bzhi-3.c?ref=5bfba2b58ddb37c89e0633a2dc48fa8c4430a026", "patch": "@@ -58,7 +58,11 @@ main ()\n     link_error ();\n   if (_bzhi_u32 (c, 32) != c\n       || _bzhi_u32 (c, 64) != c\n-      || _bzhi_u32 (c, 255) != c)\n+      || _bzhi_u32 (c, 255) != c\n+      || _bzhi_u32 (c, 544) != c\n+      || _bzhi_u32 (c, 0) != 0\n+      || _bzhi_u32 (c, 256) != 0\n+      || _bzhi_u32 (c, 1024) != 0)\n     link_error ();\n #ifdef __x86_64__\n   if (f21 () != 0 || f22 (-1ULL) != 0\n@@ -70,7 +74,11 @@ main ()\n       || f33 () != -1ULL || f34 (-1ULL) != -1ULL)\n     link_error ();\n   if (_bzhi_u64 (d, 64) != d\n-      || _bzhi_u64 (d, 255) != d)\n+      || _bzhi_u64 (d, 255) != d\n+      || _bzhi_u64 (d, 576) != d\n+      || _bzhi_u64 (d, 0) != 0\n+      || _bzhi_u64 (d, 256) != 0\n+      || _bzhi_u64 (d, 512) != 0)\n     link_error ();\n #endif\n   return 0;"}]}