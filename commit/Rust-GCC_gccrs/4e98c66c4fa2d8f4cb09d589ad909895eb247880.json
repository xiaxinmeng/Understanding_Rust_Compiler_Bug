{"sha": "4e98c66c4fa2d8f4cb09d589ad909895eb247880", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGU5OGM2NmM0ZmEyZDhmNGNiMDlkNTg5YWQ5MDk4OTVlYjI0Nzg4MA==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-01-08T08:04:35Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-01-08T08:04:35Z"}, "message": "re PR tree-optimization/42221 (ICE from '-Os -fgraphite-identity')\n\nFix PR42221.\n\n2009-12-23  Sebastian Pop  <sebastian.pop@amd.com>\n\n\tPR middle-end/42221\n\t* sese.c (expand_scalar_variables_expr): Follow the SSA links into\n\tthe array indexing of ADDR_EXPRs.\n\n\t* testsuite/gcc.dg/graphite/pr42221.c: New.\n\nFrom-SVN: r155731", "tree": {"sha": "52b15ac06bc8fc1943d26f9cc256cdaff92ebbd3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52b15ac06bc8fc1943d26f9cc256cdaff92ebbd3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e98c66c4fa2d8f4cb09d589ad909895eb247880", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e98c66c4fa2d8f4cb09d589ad909895eb247880", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e98c66c4fa2d8f4cb09d589ad909895eb247880", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e98c66c4fa2d8f4cb09d589ad909895eb247880/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd4a56fff2611fa6d840e801d8181bfac061f8e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd4a56fff2611fa6d840e801d8181bfac061f8e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd4a56fff2611fa6d840e801d8181bfac061f8e0"}], "stats": {"total": 47, "additions": 46, "deletions": 1}, "files": [{"sha": "b093edd8d52b83a21c4a5371b7e377af2458b11d", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e98c66c4fa2d8f4cb09d589ad909895eb247880/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e98c66c4fa2d8f4cb09d589ad909895eb247880/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=4e98c66c4fa2d8f4cb09d589ad909895eb247880", "patch": "@@ -1,3 +1,11 @@\n+2010-01-07  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\tPR middle-end/42221\n+\t* sese.c (expand_scalar_variables_expr): Follow the SSA links into\n+\tthe array indexing of ADDR_EXPRs.\n+\n+\t* testsuite/gcc.dg/graphite/pr42221.c: New.\n+\n 2010-01-07  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tPR middle-end/42521"}, {"sha": "4950c08b586c09be3d3933b9383ab0b10434e1c1", "filename": "gcc/sese.c", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e98c66c4fa2d8f4cb09d589ad909895eb247880/gcc%2Fsese.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e98c66c4fa2d8f4cb09d589ad909895eb247880/gcc%2Fsese.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsese.c?ref=4e98c66c4fa2d8f4cb09d589ad909895eb247880", "patch": "@@ -874,7 +874,20 @@ expand_scalar_variables_expr (tree type, tree op0, enum tree_code code,\n     return expand_scalar_variables_ssa_name (op0, bb, region, map, gsi);\n \n   if (code == ADDR_EXPR)\n-    return op0;\n+    {\n+      tree op00 = TREE_OPERAND (op0, 0);\n+\n+      if (handled_component_p (op00)\n+\t  && TREE_CODE (op00) == ARRAY_REF)\n+\t{\n+\t  tree e = expand_scalar_variables_expr (TREE_TYPE (op00), op00,\n+\t\t\t\t\t\t TREE_CODE (op00),\n+\t\t\t\t\t\t NULL, bb, region, map, gsi);\n+\t  return fold_build1 (code, TREE_TYPE (op0), e);\n+\t}\n+\n+      return op0;\n+    }\n \n   gcc_unreachable ();\n   return NULL;"}, {"sha": "da8daa1e2a112c51c53e1fa9a8329a94ca0094bb", "filename": "gcc/testsuite/gcc.dg/graphite/pr42221.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e98c66c4fa2d8f4cb09d589ad909895eb247880/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr42221.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e98c66c4fa2d8f4cb09d589ad909895eb247880/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr42221.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr42221.c?ref=4e98c66c4fa2d8f4cb09d589ad909895eb247880", "patch": "@@ -0,0 +1,24 @@\n+/* { dg-options \"-Os -fgraphite-identity\" } */\n+\n+static void b2w(unsigned int *out, const unsigned char *in, unsigned int len)\n+{\n+  const unsigned char *bpend = in + len;\n+  for (; in != bpend; in += 4, ++out)\n+  {\n+    *out = (unsigned int) (in[0] ) |\n+          (unsigned int) (in[3] << 24);\n+  }\n+}\n+static void md4step(unsigned int state[4], const unsigned char *data)\n+{\n+  unsigned int A, X[16];\n+  b2w(X, data, 64);\n+  state[0] += A;\n+}\n+void md4sum(void)\n+{\n+  unsigned char final[128];\n+  unsigned int state[4];\n+  md4step(state, final);\n+  md4step(state, final + 64);\n+}"}]}