{"sha": "893779cc020424b6555cb851fd2659597174461a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODkzNzc5Y2MwMjA0MjRiNjU1NWNiODUxZmQyNjU5NTk3MTc0NDYxYQ==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@cygnus.com", "date": "1998-08-19T16:56:21Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-08-19T16:56:21Z"}, "message": "thumb.md (extendqisi2_insn): Cope with REG + OFFSET addressing.\n\n \n        * config/arm/thumb.md (extendqisi2_insn): Cope with REG +\n        OFFSET addressing.\n\nFrom-SVN: r21862", "tree": {"sha": "4a5e8babf1e3a9af986a823b85c3472af3bf6f48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a5e8babf1e3a9af986a823b85c3472af3bf6f48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/893779cc020424b6555cb851fd2659597174461a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/893779cc020424b6555cb851fd2659597174461a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/893779cc020424b6555cb851fd2659597174461a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/893779cc020424b6555cb851fd2659597174461a/comments", "author": null, "committer": null, "parents": [{"sha": "bb4c2bf3d8be8225c98beb11c3bb2e26c67a0d96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb4c2bf3d8be8225c98beb11c3bb2e26c67a0d96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb4c2bf3d8be8225c98beb11c3bb2e26c67a0d96"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "93d0c050314e38390d6a54486b80a457b35f46b0", "filename": "gcc/config/arm/thumb.md", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/893779cc020424b6555cb851fd2659597174461a/gcc%2Fconfig%2Farm%2Fthumb.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/893779cc020424b6555cb851fd2659597174461a/gcc%2Fconfig%2Farm%2Fthumb.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fthumb.md?ref=893779cc020424b6555cb851fd2659597174461a", "patch": "@@ -484,7 +484,23 @@\n     {\n       ops[1] = XEXP (XEXP (operands[1], 0), 0);\n       ops[2] = XEXP (XEXP (operands[1], 0), 1);\n-      output_asm_insn (\\\"ldrsb\\\\t%0, [%1, %2]\\\", ops);\n+      \n+      if (GET_CODE (ops[1]) == REG && GET_CODE (ops[2]) == REG)\n+        output_asm_insn (\\\"ldrsb\\\\t%0, [%1, %2]\\\", ops);\n+      else if (GET_CODE (ops[1]) == REG)\n+        {\n+          if (REGNO (ops[1]) == REGNO (operands[0]))\n+            output_asm_insn (\\\"ldrb\\\\t%0, [%1, %2]\\;lsl\\\\t%0, %0, #24\\;asr\\\\t%0, %0, #24\\\", ops);\n+\t  else\n+            output_asm_insn (\\\"mov\\\\t%0, %2\\;ldrsb\\\\t%0, [%1, %0]\\\", ops);\n+\t}\n+      else\n+        {\n+          if (REGNO (ops[2]) == REGNO (operands[0]))\n+            output_asm_insn (\\\"ldrb\\\\t%0, [%2, %1]\\;lsl\\\\t%0, %0, #24\\;asr\\\\t%0, %0, #24\\\", ops);\n+\t  else\n+            output_asm_insn (\\\"mov\\\\t%0, %2\\;ldrsb\\\\t%0, [%1, %0]\\\", ops);\n+        }\n     }\n   else if (REGNO (operands[0]) == REGNO (XEXP (operands[1], 0)))\n     {"}]}