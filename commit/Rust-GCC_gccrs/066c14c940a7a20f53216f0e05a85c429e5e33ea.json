{"sha": "066c14c940a7a20f53216f0e05a85c429e5e33ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDY2YzE0Yzk0MGE3YTIwZjUzMjE2ZjBlMDVhODVjNDI5ZTVlMzNlYQ==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2016-02-10T12:36:03Z"}, "committer": {"name": "Wilco Dijkstra", "email": "wilco@gcc.gnu.org", "date": "2016-02-10T12:36:03Z"}, "message": "Enable instruction fusion of AES instructions on ARM for Cortex-A53 and\nCortex-A57.\n\n    gcc/\n        * config/arm/arm.c (arm_cortex_a53_tune): Enable AES fusion.\n        (arm_cortex_a57_tune): Likewise.\n        (aarch_macro_fusion_pair_p): Add support for AES fusion.\n        * config/arm/arm-protos.h (fuse_ops): Add FUSE_AES_AESMC\n\nFrom-SVN: r233266", "tree": {"sha": "74b8569185463e940cd1fc92a94d03971f734c04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74b8569185463e940cd1fc92a94d03971f734c04"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/066c14c940a7a20f53216f0e05a85c429e5e33ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/066c14c940a7a20f53216f0e05a85c429e5e33ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/066c14c940a7a20f53216f0e05a85c429e5e33ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/066c14c940a7a20f53216f0e05a85c429e5e33ea/comments", "author": null, "committer": null, "parents": [{"sha": "2cba7d7b6339597c3ad45d89fd4383de5a3401d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cba7d7b6339597c3ad45d89fd4383de5a3401d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2cba7d7b6339597c3ad45d89fd4383de5a3401d2"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "42e89c7dc22a343fbb31cbc36448815c2c90b63e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/066c14c940a7a20f53216f0e05a85c429e5e33ea/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/066c14c940a7a20f53216f0e05a85c429e5e33ea/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=066c14c940a7a20f53216f0e05a85c429e5e33ea", "patch": "@@ -1,3 +1,10 @@\n+2016-02-10  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\t* config/arm/arm.c (arm_cortex_a53_tune): Enable AES fusion.\n+\t(arm_cortex_a57_tune): Likewise.\n+\t(aarch_macro_fusion_pair_p): Add support for AES fusion.\n+\t* config/arm/arm-protos.h (fuse_ops): Add FUSE_AES_AESMC.\n+\n 2016-02-10  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* timevar.def (TV_PHASE_DBGINFO): Delete."}, {"sha": "0083673b161a49e19388c72d3a413aeb481dbfa3", "filename": "gcc/config/arm/arm-protos.h", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/066c14c940a7a20f53216f0e05a85c429e5e33ea/gcc%2Fconfig%2Farm%2Farm-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/066c14c940a7a20f53216f0e05a85c429e5e33ea/gcc%2Fconfig%2Farm%2Farm-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-protos.h?ref=066c14c940a7a20f53216f0e05a85c429e5e33ea", "patch": "@@ -300,8 +300,9 @@ struct tune_params\n   enum fuse_ops\n   {\n     FUSE_NOTHING   = 0,\n-    FUSE_MOVW_MOVT = 1 << 0\n-  } fusible_ops: 1;\n+    FUSE_MOVW_MOVT = 1 << 0,\n+    FUSE_AES_AESMC = 1 << 1\n+  } fusible_ops: 2;\n   /* Depth of scheduling queue to check for L2 autoprefetcher.  */\n   enum {SCHED_AUTOPREF_OFF, SCHED_AUTOPREF_RANK, SCHED_AUTOPREF_FULL}\n     sched_autopref: 2;"}, {"sha": "82becef22308e036bbf7b0de2df4801146a627e4", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/066c14c940a7a20f53216f0e05a85c429e5e33ea/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/066c14c940a7a20f53216f0e05a85c429e5e33ea/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=066c14c940a7a20f53216f0e05a85c429e5e33ea", "patch": "@@ -1982,7 +1982,7 @@ const struct tune_params arm_cortex_a53_tune =\n   tune_params::DISPARAGE_FLAGS_NEITHER,\n   tune_params::PREF_NEON_64_FALSE,\n   tune_params::PREF_NEON_STRINGOPS_TRUE,\n-  FUSE_OPS (tune_params::FUSE_MOVW_MOVT),\n+  FUSE_OPS (tune_params::FUSE_MOVW_MOVT | tune_params::FUSE_AES_AESMC),\n   tune_params::SCHED_AUTOPREF_OFF\n };\n \n@@ -2005,7 +2005,7 @@ const struct tune_params arm_cortex_a57_tune =\n   tune_params::DISPARAGE_FLAGS_ALL,\n   tune_params::PREF_NEON_64_FALSE,\n   tune_params::PREF_NEON_STRINGOPS_TRUE,\n-  FUSE_OPS (tune_params::FUSE_MOVW_MOVT),\n+  FUSE_OPS (tune_params::FUSE_MOVW_MOVT | tune_params::FUSE_AES_AESMC),\n   tune_params::SCHED_AUTOPREF_FULL\n };\n \n@@ -29683,6 +29683,10 @@ aarch_macro_fusion_pair_p (rtx_insn* prev, rtx_insn* curr)\n   if (!arm_macro_fusion_p ())\n     return false;\n \n+  if (current_tune->fusible_ops & tune_params::FUSE_AES_AESMC\n+      && aarch_crypto_can_dual_issue (prev, curr))\n+    return true;\n+\n   if (current_tune->fusible_ops & tune_params::FUSE_MOVW_MOVT)\n     {\n       /* We are trying to fuse"}]}