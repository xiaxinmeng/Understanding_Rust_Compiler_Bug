{"sha": "3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzAyMGJmZDFjMjJlNmZjZmJiMDYzMjdkNGQ3MmIwNGNlZmE3NTE2NA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2012-11-06T09:03:55Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-11-06T09:03:55Z"}, "message": "Makefile.in (osconstool): Fix target.\n\nlibada/\n\t* Makefile.in (osconstool): Fix target.\nada/\n\t* gcc-interface/Makefile.in, gcc-interface/Make-lang.in: Remove\n\tduplicate rules handled by Make-generated.in.\n\nFrom-SVN: r193209", "tree": {"sha": "9a4847f7ece5dd8dcb3832dc5f50644e05216241", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9a4847f7ece5dd8dcb3832dc5f50644e05216241"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "880ab4be197623b3f39eefde091611ef4ad77549", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/880ab4be197623b3f39eefde091611ef4ad77549", "html_url": "https://github.com/Rust-GCC/gccrs/commit/880ab4be197623b3f39eefde091611ef4ad77549"}], "stats": {"total": 60, "additions": 17, "deletions": 43}, "files": [{"sha": "82631a8ebcaacfa4154def25b25ccdbffd530f41", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "patch": "@@ -1,3 +1,8 @@\n+2012-11-06  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* gcc-interface/Makefile.in, gcc-interface/Make-lang.in: Remove\n+\tduplicate rules handled by Make-generated.in.\n+\n 2012-10-31  Lawrence Crowl  <crowl@google.com>\n \n \t* gcc-interface/utils.c (gnat_write_global_declarations):"}, {"sha": "715c1bb5a64c267ba456eba2228c8ff1e4aadbf5", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "patch": "@@ -122,7 +122,7 @@ ifeq ($(build), $(host))\n \n     # put the host RTS dir first in the PATH to hide the default runtime\n     # files that are among the sources\n-    RTS_DIR=$(strip $(subst \\,/,$(shell gnatls -v | grep adalib )))\n+    RTS_DIR:=$(strip $(subst \\,/,$(shell gnatls -v | grep adalib )))\n \n     ADA_TOOLS_FLAGS_TO_PASS=\\\n         CC=\"$(CC)\" \\\n@@ -157,7 +157,7 @@ else\n   else\n     # This is a canadian cross. We should use a toolchain running on the\n     # build platform and targeting the host platform.\n-    RTS_DIR=$(strip $(subst \\,/,$(shell $(GNATLS_FOR_HOST) -v | grep adalib )))\n+    RTS_DIR:=$(strip $(subst \\,/,$(shell $(GNATLS_FOR_HOST) -v | grep adalib )))\n     ADA_TOOLS_FLAGS_TO_PASS=\\\n         CC=\"$(CC)\" \\\n         $(COMMON_FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS)  \\\n@@ -574,7 +574,7 @@ canadian-gnattools: force\n \t$(MAKE) -C ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2\n \t$(MAKE) -C ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools4\n \n-gnatlib gnatlib-sjlj gnatlib-zcx gnatlib-shared: force\n+gnatlib gnatlib-sjlj gnatlib-zcx gnatlib-shared: ada/s-oscons.ads force\n \t$(MAKE) -C ada $(COMMON_FLAGS_TO_PASS)  \\\n \t   GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n \t   GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\"}, {"sha": "bffd668aca51d29783ad23a4aced6b323f5739b1", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 4, "deletions": 39, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "patch": "@@ -2577,48 +2577,13 @@ install-gnatlib: ../stamp-gnatlib-$(RTSDIR)\n \t                $(RTSDIR)/$(word 1,$(subst <, ,$(PAIR)));)\n # Copy tsystem.h\n \t$(CP) $(srcdir)/tsystem.h $(RTSDIR)\n+# Copy generated target dependent sources\n+\t$(RM) $(RTSDIR)/s-oscons.ads\n+\t(cd $(RTSDIR); $(LN_S) ../s-oscons.ads s-oscons.ads)\n \t$(RM) ../stamp-gnatlib-$(RTSDIR)\n \ttouch ../stamp-gnatlib1-$(RTSDIR)\n \n-ifeq ($(strip $(filter-out alpha64 ia64 dec hp vms% openvms% alphavms%,$(subst -, ,$(host)))),)\n-OSCONS_CPP=../../$(DECC) -E /comment=as_is -DNATIVE \\\n-             -DTARGET='\"\"$(target)\"\"' $(fsrcpfx)ada/s-oscons-tmplt.c\n-\n-OSCONS_EXTRACT=../../$(DECC) -DNATIVE \\\n-                 -DTARGET='\"\"$(target)\"\"' $(fsrcpfx)ada/s-oscons-tmplt.c ; \\\n-  ld -o s-oscons-tmplt.exe s-oscons-tmplt.obj; \\\n-  ./s-oscons-tmplt.exe > s-oscons-tmplt.s\n-\n-else\n-# GCC_FOR_TARGET has paths relative to the gcc directory, so we need to adjust\n-# for running it from $(RTSDIR)\n-OSCONS_CC=`echo \"$(GCC_FOR_TARGET)\" \\\n-  | sed -e 's^\\./xgcc^../../xgcc^' -e 's^-B./^-B../../^'`\n-OSCONS_CPP=$(OSCONS_CC) $(GNATLIBCFLAGS) -E -C \\\n-  -DTARGET=\\\"$(target)\\\" $(fsrcpfx)ada/s-oscons-tmplt.c > s-oscons-tmplt.i\n-OSCONS_EXTRACT=$(OSCONS_CC) $(GNATLIBCFLAGS) -S s-oscons-tmplt.i\n-endif\n-\n-./bldtools/oscons/xoscons: xoscons.adb xutil.ads xutil.adb\n-\t-$(MKDIR) ./bldtools/oscons\n-\t$(RM) $(addprefix ./bldtools/oscons/,$(notdir $^))\n-\t$(CP) $^ ./bldtools/oscons\n-\t(cd ./bldtools/oscons ; gnatmake -q xoscons)\n-\n-$(RTSDIR)/s-oscons.ads: ../stamp-gnatlib1-$(RTSDIR) s-oscons-tmplt.c gsocket.h ./bldtools/oscons/xoscons\n-\t$(RM) $(RTSDIR)/s-oscons-tmplt.i $(RTSDIR)/s-oscons-tmplt.s\n-\t(cd $(RTSDIR) ; \\\n-\t    $(OSCONS_CPP) ; \\\n-\t    $(OSCONS_EXTRACT) ; \\\n-\t    ../bldtools/oscons/xoscons s-oscons)\n-\n-# Don't use semicolon separated shell commands that involve list expansions.\n-# The semicolon triggers a call to DCL on VMS and DCL can't handle command\n-# line lengths in excess of 256 characters.\n-# Example: cd $(RTSDIR); ar rc libfoo.a $(LONG_LIST_OF_OBJS)\n-# is guaranteed to overflow the buffer.\n-\n-gnatlib: ../stamp-gnatlib1-$(RTSDIR) ../stamp-gnatlib2-$(RTSDIR) $(RTSDIR)/s-oscons.ads\n+gnatlib: ../stamp-gnatlib1-$(RTSDIR) ../stamp-gnatlib2-$(RTSDIR)\n # C files\n \t$(MAKE) -C $(RTSDIR) \\\n \t\tCC=\"`echo \\\"$(GCC_FOR_TARGET)\\\" \\"}, {"sha": "7b6eb9c9b0fd13d077b9147f38bf98117aeaeecb", "filename": "libada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/libada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/libada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FChangeLog?ref=3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "patch": "@@ -1,3 +1,7 @@\n+2012-10-30  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* Makefile.in (osconstool): Fix target.\n+\n 2012-06-11  Olivier Hainque  <hainque@adacore.com>\n \n \t* Makefile.in (GNATLIBCFLAGS_FOR_C): Remove $(PICFLAG)."}, {"sha": "536352f8dab61c8bba8c6af689889484d047a608", "filename": "libada/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/libada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3020bfd1c22e6fcfbb06327d4d72b04cefa75164/libada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FMakefile.in?ref=3020bfd1c22e6fcfbb06327d4d72b04cefa75164", "patch": "@@ -113,7 +113,7 @@ gnatlib-sjlj gnatlib-zcx gnatlib-shared: osconstool $(GCC_DIR)/ada/Makefile\n \t$(LN_S) $(ADA_RTS_DIR) adalib\n \n osconstool:\n-\t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) ./bldtools/oscons/xoscons\n+\t$(MAKE) -C $(GCC_DIR) $(LIBADA_FLAGS_TO_PASS) ada/s-oscons.ads\n \n install-gnatlib: $(GCC_DIR)/ada/Makefile\n \t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) install-gnatlib"}]}