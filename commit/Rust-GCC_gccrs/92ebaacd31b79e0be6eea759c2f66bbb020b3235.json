{"sha": "92ebaacd31b79e0be6eea759c2f66bbb020b3235", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJlYmFhY2QzMWI3OWUwYmU2ZWVhNzU5YzJmNjZiYmIwMjBiMzIzNQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-09-21T10:21:29Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-09-21T10:21:29Z"}, "message": "re PR fortran/33037 (TRANSFER should warn on mismatched sizes)\n\n2007-09-21  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/33037\n        * simplify.c (gfc_simplify_transfer): Warn if source size\n        is smaller than result size.\n\n2007-09-21  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/33037\n        * gfortran.dg/transfer_check_1.f90: New.\n\nFrom-SVN: r128646", "tree": {"sha": "e89250c31142bb18a8637ef2302c9c3dc86d2602", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e89250c31142bb18a8637ef2302c9c3dc86d2602"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92ebaacd31b79e0be6eea759c2f66bbb020b3235", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92ebaacd31b79e0be6eea759c2f66bbb020b3235", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92ebaacd31b79e0be6eea759c2f66bbb020b3235", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92ebaacd31b79e0be6eea759c2f66bbb020b3235/comments", "author": null, "committer": null, "parents": [{"sha": "91fe04248520280ee296ceff77e2256620a45b58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91fe04248520280ee296ceff77e2256620a45b58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91fe04248520280ee296ceff77e2256620a45b58"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "def238f35314112584cb64c196c5d996e672ecfd", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=92ebaacd31b79e0be6eea759c2f66bbb020b3235", "patch": "@@ -1,7 +1,13 @@\n+2007-09-21  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/33037\n+\t* simplify.c (gfc_simplify_transfer): Warn if source size\n+\tis smaller than result size.\n+\n 2007-09-20  Asher Langton  <langton2@llnl.gov>\n \n \tPR fortran/20441\n-        * gfortran.h : Add init_local_* enums and init_flag_* flags to\n+\t* gfortran.h : Add init_local_* enums and init_flag_* flags to\n \tgfc_option_t.\n \t* lang.opt: Add -finit-local-zero, -finit-real, -finit-integer,\n \t-finit-character, and -finit-logical flags."}, {"sha": "e581a21603bd40eaa5cc593b03872cfe8b2342ad", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=92ebaacd31b79e0be6eea759c2f66bbb020b3235", "patch": "@@ -4059,6 +4059,11 @@ gfc_simplify_transfer (gfc_expr *source, gfc_expr *mold, gfc_expr *size)\n       result_size = result_elt_size;\n     }\n \n+  if (source_size < result_size)\n+    gfc_warning(\"Intrinsic TRANSFER at %L has partly undefined result: \"\n+\t\t\"source size %ld < result size %ld\", &source->where,\n+\t\t(long) source_size, (long) result_size);\n+\n   /* Allocate the buffer to store the binary version of the source.  */\n   buffer_size = MAX (source_size, result_size);\n   buffer = (unsigned char*)alloca (buffer_size);"}, {"sha": "29b0c26a033a30a92b109d72b27267a5d7bd5a98", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=92ebaacd31b79e0be6eea759c2f66bbb020b3235", "patch": "@@ -1,3 +1,8 @@\n+2007-09-21  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/33037\n+\t* gfortran.dg/transfer_check_1.f90: New.\n+\n 2007-09-20  Asher Langton  <langton2@llnl.gov>\n \n \tPR fortran/20441"}, {"sha": "26945267d1db931783e390749849dfcceec800b5", "filename": "gcc/testsuite/gfortran.dg/transfer_check_1.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ftestsuite%2Fgfortran.dg%2Ftransfer_check_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92ebaacd31b79e0be6eea759c2f66bbb020b3235/gcc%2Ftestsuite%2Fgfortran.dg%2Ftransfer_check_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftransfer_check_1.f90?ref=92ebaacd31b79e0be6eea759c2f66bbb020b3235", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile }\n+! PR fortran/33037\n+!\n+print *, transfer('x', 0, 20) ! { dg-warning \"has partly undefined result\" }\n+print *, transfer(1_1, 0) ! { dg-warning \"has partly undefined result\" }\n+print *, transfer([1_2,2_2], 0)\n+print *, transfer([1_2,2_2], 0_8) ! { dg-warning \"has partly undefined result\" }\n+end"}]}