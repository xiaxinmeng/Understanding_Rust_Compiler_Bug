{"sha": "1086c39b19eed27d9fc5b53ca7c5b75143d908bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTA4NmMzOWIxOWVlZDI3ZDlmYzViNTNjYTdjNWI3NTE0M2Q5MDhiZg==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2007-08-16T12:19:13Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-08-16T12:19:13Z"}, "message": "make.adb (Collect_Arguments): Call Test_If_Relative_Path with Including_Non_Switch set to False.\n\n2007-08-16  Vincent Celier  <celier@adacore.com>\n\n\t* make.adb (Collect_Arguments): Call Test_If_Relative_Path with\n\tIncluding_Non_Switch set to False.\n\t(Gnatmake): For the compiler, call Test_If_Relative_Path with\n\tIncluding_Non_Switch set to False.\n\n\t* makeutl.adb, makeutl.ads (Test_If_Relative_Path): New Boolean\n\tparameter Including_Non_Switch, defaulted to True. When\n\tIncluding_Non_Switch is False, options that are not switches and\n\tappear as relative path are not converted to absolute paths.\n\nFrom-SVN: r127542", "tree": {"sha": "5b5d183382bf48671a3aea85557e32c8a38453ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b5d183382bf48671a3aea85557e32c8a38453ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1086c39b19eed27d9fc5b53ca7c5b75143d908bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1086c39b19eed27d9fc5b53ca7c5b75143d908bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1086c39b19eed27d9fc5b53ca7c5b75143d908bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1086c39b19eed27d9fc5b53ca7c5b75143d908bf/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c17fc6f62a85eec85e923c9a808b97d93b84b1ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c17fc6f62a85eec85e923c9a808b97d93b84b1ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c17fc6f62a85eec85e923c9a808b97d93b84b1ce"}], "stats": {"total": 31, "additions": 20, "deletions": 11}, "files": [{"sha": "ee45873e8855883406cc16af1b9a1154329e2d99", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1086c39b19eed27d9fc5b53ca7c5b75143d908bf/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1086c39b19eed27d9fc5b53ca7c5b75143d908bf/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=1086c39b19eed27d9fc5b53ca7c5b75143d908bf", "patch": "@@ -2372,7 +2372,8 @@ package body Make is\n                                    new String'(Name_Buffer (1 .. Name_Len));\n                                  Test_If_Relative_Path\n                                    (New_Args (Last_New),\n-                                    Parent => Data.Dir_Path);\n+                                    Parent => Data.Dir_Path,\n+                                    Including_Non_Switch => False);\n                               end if;\n \n                               Current := Element.Next;\n@@ -2399,7 +2400,9 @@ package body Make is\n \n                      begin\n                         Test_If_Relative_Path\n-                          (New_Args (1), Parent => Data.Dir_Path);\n+                          (New_Args (1),\n+                           Parent               => Data.Dir_Path,\n+                           Including_Non_Switch => False);\n                         Add_Arguments\n                           (Configuration_Pragmas_Switch (Arguments_Project) &\n                            New_Args & The_Saved_Gcc_Switches.all);\n@@ -5315,12 +5318,16 @@ package body Make is\n \n             for J in 1 .. Gcc_Switches.Last loop\n                Test_If_Relative_Path\n-                 (Gcc_Switches.Table (J), Parent => Dir_Path);\n+                 (Gcc_Switches.Table (J),\n+                  Parent => Dir_Path,\n+                  Including_Non_Switch => False);\n             end loop;\n \n             for J in 1 .. Saved_Gcc_Switches.Last loop\n                Test_If_Relative_Path\n-                 (Saved_Gcc_Switches.Table (J), Parent => Current_Work_Dir);\n+                 (Saved_Gcc_Switches.Table (J),\n+                  Parent => Current_Work_Dir,\n+                  Including_Non_Switch => False);\n             end loop;\n          end;\n       end if;"}, {"sha": "b1aea0920e5ee0a1fcbc4afd58bb6e72aa319ef5", "filename": "gcc/ada/makeutl.adb", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1086c39b19eed27d9fc5b53ca7c5b75143d908bf/gcc%2Fada%2Fmakeutl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1086c39b19eed27d9fc5b53ca7c5b75143d908bf/gcc%2Fada%2Fmakeutl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.adb?ref=1086c39b19eed27d9fc5b53ca7c5b75143d908bf", "patch": "@@ -551,9 +551,10 @@ package body Makeutl is\n    ---------------------------\n \n    procedure Test_If_Relative_Path\n-     (Switch             : in out String_Access;\n-      Parent             : String_Access;\n-      Including_L_Switch : Boolean := True)\n+     (Switch               : in out String_Access;\n+      Parent               : String_Access;\n+      Including_L_Switch   : Boolean := True;\n+      Including_Non_Switch : Boolean := True)\n    is\n    begin\n       if Switch /= null then\n@@ -608,7 +609,7 @@ package body Makeutl is\n                   end if;\n                end if;\n \n-            else\n+            elsif Including_Non_Switch then\n                if not Is_Absolute_Path (Sw) then\n                   if Parent = null or else Parent'Length = 0 then\n                      Do_Fail"}, {"sha": "b901bc5713ffad941e686e841bc7c79d6fa138ed", "filename": "gcc/ada/makeutl.ads", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1086c39b19eed27d9fc5b53ca7c5b75143d908bf/gcc%2Fada%2Fmakeutl.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1086c39b19eed27d9fc5b53ca7c5b75143d908bf/gcc%2Fada%2Fmakeutl.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.ads?ref=1086c39b19eed27d9fc5b53ca7c5b75143d908bf", "patch": "@@ -124,9 +124,10 @@ package Makeutl is\n    end Mains;\n \n    procedure Test_If_Relative_Path\n-     (Switch             : in out String_Access;\n-      Parent             : String_Access;\n-      Including_L_Switch : Boolean := True);\n+     (Switch               : in out String_Access;\n+      Parent               : String_Access;\n+      Including_L_Switch   : Boolean := True;\n+      Including_Non_Switch : Boolean := True);\n    --  Test if Switch is a relative search path switch.\n    --  If it is, fail if Parent is null, otherwise prepend the path with\n    --  Parent. This subprogram is only called when using project files."}]}