{"sha": "7f75bb83182ad56c111263bc484ef4a65bd42d67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y3NWJiODMxODJhZDU2YzExMTI2M2JjNDg0ZWY0YTY1YmQ0MmQ2Nw==", "commit": {"author": {"name": "Ranjit Mathew", "email": "rmathew@hotmail.com", "date": "2005-02-01T02:36:29Z"}, "committer": {"name": "Ranjit Mathew", "email": "rmathew@gcc.gnu.org", "date": "2005-02-01T02:36:29Z"}, "message": "re PR java/9157 (SEGV on bad java source)\n\n        PR java/9157\n        * parse.y (build_string_concatenation): Remove redundant if.\n        (patch_conditional_expr): Attempt to patch_string() the condition\n        of a ?: as well, in addition to its other operands.\n\nFrom-SVN: r94513", "tree": {"sha": "a7997918aeee27c475e3c6565aa970bd1c3e1e19", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7997918aeee27c475e3c6565aa970bd1c3e1e19"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f75bb83182ad56c111263bc484ef4a65bd42d67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f75bb83182ad56c111263bc484ef4a65bd42d67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f75bb83182ad56c111263bc484ef4a65bd42d67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f75bb83182ad56c111263bc484ef4a65bd42d67/comments", "author": null, "committer": null, "parents": [{"sha": "9367851362e79e5854b56c8ad153d4b3c9d9a264", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9367851362e79e5854b56c8ad153d4b3c9d9a264", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9367851362e79e5854b56c8ad153d4b3c9d9a264"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "9126d9dd0b491c751f5bd63915d89ff9f0da783e", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75bb83182ad56c111263bc484ef4a65bd42d67/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75bb83182ad56c111263bc484ef4a65bd42d67/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=7f75bb83182ad56c111263bc484ef4a65bd42d67", "patch": "@@ -1,3 +1,10 @@\n+2005-02-01  Ranjit Mathew  <rmathew@hotmail.com>\n+\n+\tPR java/9157\n+\t* parse.y (build_string_concatenation): Remove redundant if.\n+\t(patch_conditional_expr): Attempt to patch_string() the condition\n+\tof a ?: as well, in addition to its other operands.\n+\n 2005-01-25  Tom Tromey  <tromey@redhat.com>\n \n \t* Make-lang.in (java/java-tree-inline.o): Removed."}, {"sha": "cc30c8e97563855b5257ef64fd25dc2e3ae73195", "filename": "gcc/java/parse.y", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75bb83182ad56c111263bc484ef4a65bd42d67/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75bb83182ad56c111263bc484ef4a65bd42d67/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=7f75bb83182ad56c111263bc484ef4a65bd42d67", "patch": "@@ -14032,8 +14032,7 @@ build_string_concatenation (tree op1, tree op2)\n       /* OP1 is no longer the last node holding a crafted StringBuffer */\n       IS_CRAFTED_STRING_BUFFER_P (op1) = 0;\n       /* Create a node for `{new...,xxx}.append (op2)' */\n-      if (op2)\n-\top1 = make_qualified_primary (op1, BUILD_APPEND (op2), 0);\n+      op1 = make_qualified_primary (op1, BUILD_APPEND (op2), 0);\n     }\n \n   /* Mark the last node holding a crafted StringBuffer */\n@@ -16047,8 +16046,10 @@ patch_conditional_expr (tree node, tree wfl_cond, tree wfl_op1)\n   tree t1, t2, patched;\n   int error_found = 0;\n \n-  /* Operands of ?: might be StringBuffers crafted as a result of a\n-     string concatenation. Obtain a descent operand here.  */\n+  /* The condition and operands of ?: might be StringBuffers crafted\n+     as a result of a string concatenation.  Obtain decent ones here.  */\n+  if ((patched = patch_string (cond)))\n+    TREE_OPERAND (node, 0) = cond = patched;\n   if ((patched = patch_string (op1)))\n     TREE_OPERAND (node, 1) = op1 = patched;\n   if ((patched = patch_string (op2)))"}]}