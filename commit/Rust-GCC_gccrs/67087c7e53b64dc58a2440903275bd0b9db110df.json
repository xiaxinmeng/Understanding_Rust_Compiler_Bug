{"sha": "67087c7e53b64dc58a2440903275bd0b9db110df", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjcwODdjN2U1M2I2NGRjNThhMjQ0MDkwMzI3NWJkMGI5ZGIxMTBkZg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2019-04-05T16:56:27Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2019-04-05T16:56:27Z"}, "message": "PR libstdc++/89986 export directory_iterator::increment\n\n\tPR libstdc++/89986\n\t* config/abi/pre/gnu.ver: Add missing exports.\n\t* testsuite/27_io/filesystem/iterators/directory_iterator.cc: Test\n\tincrement member.\n\nFrom-SVN: r270174", "tree": {"sha": "2a91cd78482551c2b49e4846607d07c6be01202c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a91cd78482551c2b49e4846607d07c6be01202c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67087c7e53b64dc58a2440903275bd0b9db110df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67087c7e53b64dc58a2440903275bd0b9db110df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67087c7e53b64dc58a2440903275bd0b9db110df", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67087c7e53b64dc58a2440903275bd0b9db110df/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c7dde4a90afd3d83cfaae2e278dd8686bca1dc3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7dde4a90afd3d83cfaae2e278dd8686bca1dc3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7dde4a90afd3d83cfaae2e278dd8686bca1dc3d"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "655c3d073a209e5b3c340910e5b9a9f3ccab7370", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67087c7e53b64dc58a2440903275bd0b9db110df/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67087c7e53b64dc58a2440903275bd0b9db110df/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=67087c7e53b64dc58a2440903275bd0b9db110df", "patch": "@@ -1,5 +1,10 @@\n 2019-04-05  Jonathan Wakely  <jwakely@redhat.com>\n \n+\tPR libstdc++/89986\n+\t* config/abi/pre/gnu.ver: Add missing exports.\n+\t* testsuite/27_io/filesystem/iterators/directory_iterator.cc: Test\n+\tincrement member.\n+\n \t* config/abi/pre/gnu.ver: Export new symbols.\n \t* include/bits/fs_dir.h (recursive_directory_iterator::options())\n \t(recursive_directory_iterator::recursion_pending())"}, {"sha": "e8cf6f0a4a9d272083a323b26f6222b4d0ef2407", "filename": "libstdc++-v3/config/abi/pre/gnu.ver", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67087c7e53b64dc58a2440903275bd0b9db110df/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67087c7e53b64dc58a2440903275bd0b9db110df/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver?ref=67087c7e53b64dc58a2440903275bd0b9db110df", "patch": "@@ -2200,13 +2200,14 @@ GLIBCXX_3.4.26 {\n     _ZNSt10filesystem16weakly_canonical*;\n \n     _ZNKSt10filesystem18directory_iteratordeEv;\n+    _ZNSt10filesystem18directory_iteratorC[12]ERKNS_4pathENS_17directory_optionsEPSt10error_code;\n+    _ZNSt10filesystem18directory_iterator9incrementERSt10error_code;\n+    _ZNSt10filesystem18directory_iteratorppEv;\n     _ZNKSt10filesystem28recursive_directory_iterator7optionsEv;\n     _ZNKSt10filesystem28recursive_directory_iterator5depthEv;\n     _ZNKSt10filesystem28recursive_directory_iterator17recursion_pendingEv;\n     _ZNSt10filesystem28recursive_directory_iterator25disable_recursion_pendingEv;\n     _ZNKSt10filesystem28recursive_directory_iteratordeEv;\n-    _ZNSt10filesystem18directory_iteratorC[12]ERKNS_4pathENS_17directory_optionsEPSt10error_code;\n-    _ZNSt10filesystem18directory_iteratorppEv;\n     _ZNSt10filesystem28recursive_directory_iterator3popERSt10error_code;\n     _ZNSt10filesystem28recursive_directory_iterator3popEv;\n     _ZNSt10filesystem28recursive_directory_iterator9incrementERSt10error_code;\n@@ -2216,13 +2217,14 @@ GLIBCXX_3.4.26 {\n     _ZNSt10filesystem28recursive_directory_iteratorppEv;\n \n     _ZNKSt10filesystem7__cxx1118directory_iteratordeEv;\n+    _ZNSt10filesystem7__cxx1118directory_iteratorC[12]ERKNS0_4pathENS_17directory_optionsEPSt10error_code;\n+    _ZNSt10filesystem7__cxx1118directory_iterator9incrementERSt10error_code;\n+    _ZNSt10filesystem7__cxx1118directory_iteratorppEv;\n     _ZNKSt10filesystem7__cxx1128recursive_directory_iterator7optionsEv;\n     _ZNKSt10filesystem7__cxx1128recursive_directory_iterator5depthEv;\n     _ZNKSt10filesystem7__cxx1128recursive_directory_iterator17recursion_pendingEv;\n     _ZNKSt10filesystem7__cxx1128recursive_directory_iteratordeEv;\n     _ZNSt10filesystem7__cxx1128recursive_directory_iterator25disable_recursion_pendingEv;\n-    _ZNSt10filesystem7__cxx1118directory_iteratorC[12]ERKNS0_4pathENS_17directory_optionsEPSt10error_code;\n-    _ZNSt10filesystem7__cxx1118directory_iteratorppEv;\n     _ZNSt10filesystem7__cxx1128recursive_directory_iterator3popERSt10error_code;\n     _ZNSt10filesystem7__cxx1128recursive_directory_iterator3popEv;\n     _ZNSt10filesystem7__cxx1128recursive_directory_iterator9incrementERSt10error_code;"}, {"sha": "492727c75b270084e1ce6f58f887f21bcd058e0a", "filename": "libstdc++-v3/testsuite/27_io/filesystem/iterators/directory_iterator.cc", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67087c7e53b64dc58a2440903275bd0b9db110df/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fiterators%2Fdirectory_iterator.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67087c7e53b64dc58a2440903275bd0b9db110df/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fiterators%2Fdirectory_iterator.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Ffilesystem%2Fiterators%2Fdirectory_iterator.cc?ref=67087c7e53b64dc58a2440903275bd0b9db110df", "patch": "@@ -100,6 +100,15 @@ test02()\n   VERIFY( entry1.path() == p/\"x\" );\n   VERIFY( iter == end(iter) );\n \n+  // Test post-increment (libstdc++/89986)\n+  ec = bad_ec;\n+  iter = fs::directory_iterator(p, ec);\n+  VERIFY( !ec );\n+  VERIFY( iter != end(iter) );\n+  iter.increment(ec);\n+  VERIFY( !ec );\n+  VERIFY( iter == end(iter) );\n+\n   remove_all(p, ec);\n }\n "}]}