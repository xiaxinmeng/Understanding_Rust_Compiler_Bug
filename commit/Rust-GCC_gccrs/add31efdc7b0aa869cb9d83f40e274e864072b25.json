{"sha": "add31efdc7b0aa869cb9d83f40e274e864072b25", "node_id": "C_kwDOANBUbNoAKGFkZDMxZWZkYzdiMGFhODY5Y2I5ZDgzZjQwZTI3NGU4NjQwNzJiMjU", "commit": {"author": {"name": "SiYu Wu", "email": "siyu@isrc.iscas.ac.cn", "date": "2021-11-22T08:19:09Z"}, "committer": {"name": "Kito Cheng", "email": "kito.cheng@sifive.com", "date": "2021-12-03T16:10:26Z"}, "message": "RISC-V: Add option defines for Scalar Cryptography\n\ngcc/ChangeLog:\n\n2021-11-21  SiYu Wu  <siyu@isrc.iscas.ac.cn>\n\n\t* common/config/riscv/riscv-common.c (riscv_ext_version_table):\n\tAdd zbk* and zk*.\n\t* config/riscv/riscv-opts.h (MASK_ZBKB): New.\n\t(MASK_ZBKC): Ditto.\n\t(MASK_ZBKX): Ditto.\n\t(MASK_ZKNE): Ditto.\n\t(MASK_ZKND): Ditto.\n\t(MASK_ZKNH): Ditto.\n\t(MASK_ZKR): Ditto.\n\t(MASK_ZKSED): Ditto.\n\t(MASK_ZKSH): Ditto.\n\t(MASK_ZKT): Ditto.\n\t(TARGET_ZBKB): Ditto.\n\t(TARGET_ZBKC): Ditto.\n\t(TARGET_ZBKX): Ditto.\n\t(TARGET_ZKNE): Ditto.\n\t(TARGET_ZKND): Ditto.\n\t(TARGET_ZKNH): Ditto.\n\t(TARGET_ZKR): Ditto.\n\t(TARGET_ZKSED): Ditto.\n\t(TARGET_ZKSH): Ditto.\n\t(TARGET_ZKT): Ditto.\n\t* config/riscv/riscv.opt (riscv_zk_subext): New.", "tree": {"sha": "714eaf82d8558b44bc014670d6ede53deebeb8bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/714eaf82d8558b44bc014670d6ede53deebeb8bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/add31efdc7b0aa869cb9d83f40e274e864072b25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/add31efdc7b0aa869cb9d83f40e274e864072b25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/add31efdc7b0aa869cb9d83f40e274e864072b25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/add31efdc7b0aa869cb9d83f40e274e864072b25/comments", "author": {"login": "WuSiYu", "id": 6263652, "node_id": "MDQ6VXNlcjYyNjM2NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/6263652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WuSiYu", "html_url": "https://github.com/WuSiYu", "followers_url": "https://api.github.com/users/WuSiYu/followers", "following_url": "https://api.github.com/users/WuSiYu/following{/other_user}", "gists_url": "https://api.github.com/users/WuSiYu/gists{/gist_id}", "starred_url": "https://api.github.com/users/WuSiYu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WuSiYu/subscriptions", "organizations_url": "https://api.github.com/users/WuSiYu/orgs", "repos_url": "https://api.github.com/users/WuSiYu/repos", "events_url": "https://api.github.com/users/WuSiYu/events{/privacy}", "received_events_url": "https://api.github.com/users/WuSiYu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kito-cheng", "id": 2723185, "node_id": "MDQ6VXNlcjI3MjMxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/2723185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kito-cheng", "html_url": "https://github.com/kito-cheng", "followers_url": "https://api.github.com/users/kito-cheng/followers", "following_url": "https://api.github.com/users/kito-cheng/following{/other_user}", "gists_url": "https://api.github.com/users/kito-cheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/kito-cheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kito-cheng/subscriptions", "organizations_url": "https://api.github.com/users/kito-cheng/orgs", "repos_url": "https://api.github.com/users/kito-cheng/repos", "events_url": "https://api.github.com/users/kito-cheng/events{/privacy}", "received_events_url": "https://api.github.com/users/kito-cheng/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "06f2e7d49fc6341ea0128ccd83fd13705dd2c523", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06f2e7d49fc6341ea0128ccd83fd13705dd2c523", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06f2e7d49fc6341ea0128ccd83fd13705dd2c523"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "14dc6057ecd2b19945719989839366fe13e04432", "filename": "gcc/common/config/riscv/riscv-common.c", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/add31efdc7b0aa869cb9d83f40e274e864072b25/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/add31efdc7b0aa869cb9d83f40e274e864072b25/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Friscv%2Friscv-common.c?ref=add31efdc7b0aa869cb9d83f40e274e864072b25", "patch": "@@ -106,6 +106,17 @@ static const struct riscv_ext_version riscv_ext_version_table[] =\n   {\"zbc\", ISA_SPEC_CLASS_NONE, 1, 0},\n   {\"zbs\", ISA_SPEC_CLASS_NONE, 1, 0},\n \n+  {\"zbkb\",  ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zbkc\",  ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zbkx\",  ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zkne\",  ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zknd\",  ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zknh\",  ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zkr\",   ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zksed\", ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zksh\",  ISA_SPEC_CLASS_NONE, 1, 0},\n+  {\"zkt\",   ISA_SPEC_CLASS_NONE, 1, 0},\n+\n   /* Terminate the list.  */\n   {NULL, ISA_SPEC_CLASS_NONE, 0, 0}\n };\n@@ -915,6 +926,17 @@ static const riscv_ext_flag_table_t riscv_ext_flag_table[] =\n   {\"zbc\",    &gcc_options::x_riscv_zb_subext, MASK_ZBC},\n   {\"zbs\",    &gcc_options::x_riscv_zb_subext, MASK_ZBS},\n \n+  {\"zbkb\",   &gcc_options::x_riscv_zk_subext, MASK_ZBKB},\n+  {\"zbkc\",   &gcc_options::x_riscv_zk_subext, MASK_ZBKC},\n+  {\"zbkx\",   &gcc_options::x_riscv_zk_subext, MASK_ZBKX},\n+  {\"zknd\",   &gcc_options::x_riscv_zk_subext, MASK_ZKND},\n+  {\"zkne\",   &gcc_options::x_riscv_zk_subext, MASK_ZKNE},\n+  {\"zknh\",   &gcc_options::x_riscv_zk_subext, MASK_ZKNH},\n+  {\"zkr\",    &gcc_options::x_riscv_zk_subext, MASK_ZKR},\n+  {\"zksed\",  &gcc_options::x_riscv_zk_subext, MASK_ZKSED},\n+  {\"zksh\",   &gcc_options::x_riscv_zk_subext, MASK_ZKSH},\n+  {\"zkt\",    &gcc_options::x_riscv_zk_subext, MASK_ZKT},\n+\n   {NULL, NULL, 0}\n };\n "}, {"sha": "f65ff6788116a21b4e5c4f2a79523ff31d8e3d48", "filename": "gcc/config/riscv/riscv-opts.h", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/add31efdc7b0aa869cb9d83f40e274e864072b25/gcc%2Fconfig%2Friscv%2Friscv-opts.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/add31efdc7b0aa869cb9d83f40e274e864072b25/gcc%2Fconfig%2Friscv%2Friscv-opts.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv-opts.h?ref=add31efdc7b0aa869cb9d83f40e274e864072b25", "patch": "@@ -83,4 +83,26 @@ enum stack_protector_guard {\n #define TARGET_ZBC    ((riscv_zb_subext & MASK_ZBC) != 0)\n #define TARGET_ZBS    ((riscv_zb_subext & MASK_ZBS) != 0)\n \n+#define MASK_ZBKB     (1 << 0)\n+#define MASK_ZBKC     (1 << 1)\n+#define MASK_ZBKX     (1 << 2)\n+#define MASK_ZKNE     (1 << 3)\n+#define MASK_ZKND     (1 << 4)\n+#define MASK_ZKNH     (1 << 5)\n+#define MASK_ZKR      (1 << 6)\n+#define MASK_ZKSED    (1 << 7)\n+#define MASK_ZKSH     (1 << 8)\n+#define MASK_ZKT      (1 << 9)\n+\n+#define TARGET_ZBKB   ((riscv_zk_subext & MASK_ZBKB) != 0)\n+#define TARGET_ZBKC   ((riscv_zk_subext & MASK_ZBKC) != 0)\n+#define TARGET_ZBKX   ((riscv_zk_subext & MASK_ZBKX) != 0)\n+#define TARGET_ZKNE   ((riscv_zk_subext & MASK_ZKNE) != 0)\n+#define TARGET_ZKND   ((riscv_zk_subext & MASK_ZKND) != 0)\n+#define TARGET_ZKNH   ((riscv_zk_subext & MASK_ZKNH) != 0)\n+#define TARGET_ZKR    ((riscv_zk_subext & MASK_ZKR) != 0)\n+#define TARGET_ZKSED  ((riscv_zk_subext & MASK_ZKSED) != 0)\n+#define TARGET_ZKSH   ((riscv_zk_subext & MASK_ZKSH) != 0)\n+#define TARGET_ZKT    ((riscv_zk_subext & MASK_ZKT) != 0)\n+\n #endif /* ! GCC_RISCV_OPTS_H */"}, {"sha": "617000975bf7f7f1785a992bc9b4521a201b3146", "filename": "gcc/config/riscv/riscv.opt", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/add31efdc7b0aa869cb9d83f40e274e864072b25/gcc%2Fconfig%2Friscv%2Friscv.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/add31efdc7b0aa869cb9d83f40e274e864072b25/gcc%2Fconfig%2Friscv%2Friscv.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.opt?ref=add31efdc7b0aa869cb9d83f40e274e864072b25", "patch": "@@ -198,6 +198,9 @@ int riscv_zi_subext\n TargetVariable\n int riscv_zb_subext\n \n+TargetVariable\n+int riscv_zk_subext\n+\n Enum\n Name(isa_spec_class) Type(enum riscv_isa_spec_class)\n Supported ISA specs (for use with the -misa-spec= option):"}]}