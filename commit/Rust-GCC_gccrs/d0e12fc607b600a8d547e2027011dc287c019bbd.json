{"sha": "d0e12fc607b600a8d547e2027011dc287c019bbd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDBlMTJmYzYwN2I2MDBhOGQ1NDdlMjAyNzAxMWRjMjg3YzAxOWJiZA==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-04-26T16:53:53Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-04-26T16:53:53Z"}, "message": "tree-cfg.c (lv_adjust_loop_header_phi): Speed up moving a call to find_edge outside a loop to go through a PHI chain.\n\n\t* tree-cfg.c (lv_adjust_loop_header_phi): Speed up moving a\n\tcall to find_edge outside a loop to go through a PHI chain.\n\nFrom-SVN: r98776", "tree": {"sha": "2b0545c5bdedb28e31c5f7b81a273a5f4530c917", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2b0545c5bdedb28e31c5f7b81a273a5f4530c917"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0e12fc607b600a8d547e2027011dc287c019bbd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0e12fc607b600a8d547e2027011dc287c019bbd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0e12fc607b600a8d547e2027011dc287c019bbd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0e12fc607b600a8d547e2027011dc287c019bbd/comments", "author": null, "committer": null, "parents": [{"sha": "70a390bbb670c358e1f933ef8e75a3a3d7ca8fa5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70a390bbb670c358e1f933ef8e75a3a3d7ca8fa5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70a390bbb670c358e1f933ef8e75a3a3d7ca8fa5"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "4cf31bca036576ed3e55566b5edeee6b4211719c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0e12fc607b600a8d547e2027011dc287c019bbd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0e12fc607b600a8d547e2027011dc287c019bbd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d0e12fc607b600a8d547e2027011dc287c019bbd", "patch": "@@ -1,3 +1,8 @@\n+2005-04-26  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* tree-cfg.c (lv_adjust_loop_header_phi): Speed up moving a\n+\tcall to find_edge outside a loop to go through a PHI chain.\n+\n 2004-04-26  Richard Guenther  <rguenth@gcc.gnu.org>\n \n \tPR tree-optimization/17598"}, {"sha": "93714d7c8dacbd67eca50fec417e47efd7710d2d", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0e12fc607b600a8d547e2027011dc287c019bbd/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0e12fc607b600a8d547e2027011dc287c019bbd/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=d0e12fc607b600a8d547e2027011dc287c019bbd", "patch": "@@ -5398,6 +5398,11 @@ tree_lv_adjust_loop_header_phi (basic_block first, basic_block second,\n \t\t\t\tbasic_block new_head, edge e)\n {\n   tree phi1, phi2;\n+  edge e2 = find_edge (new_head, second);\n+\n+  /* Because NEW_HEAD has been created by splitting SECOND's incoming\n+     edge, we should always have an edge from NEW_HEAD to SECOND.  */\n+  gcc_assert (e2 != NULL);\n \n   /* Browse all 'second' basic block phi nodes and add phi args to\n      edge 'e' for 'first' head. PHI args are always in correct order.  */\n@@ -5406,13 +5411,8 @@ tree_lv_adjust_loop_header_phi (basic_block first, basic_block second,\n        phi2 && phi1; \n        phi2 = PHI_CHAIN (phi2),  phi1 = PHI_CHAIN (phi1))\n     {\n-      edge e2 = find_edge (new_head, second);\n-\n-      if (e2)\n-\t{\n-\t  tree def = PHI_ARG_DEF (phi2, e2->dest_idx);\n-\t  add_phi_arg (phi1, def, e);\n-\t}\n+      tree def = PHI_ARG_DEF (phi2, e2->dest_idx);\n+      add_phi_arg (phi1, def, e);\n     }\n }\n "}]}