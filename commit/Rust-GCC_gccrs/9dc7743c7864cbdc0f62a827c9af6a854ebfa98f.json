{"sha": "9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRjNzc0M2M3ODY0Y2JkYzBmNjJhODI3YzlhZjZhODU0ZWJmYTk4Zg==", "commit": {"author": {"name": "Igor Zamyatin", "email": "igor.zamyatin@intel.com", "date": "2014-06-04T10:07:21Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2014-06-04T10:07:21Z"}, "message": "re PR c/58942 (cilkplus internal compiler error: tree check __sec_reduce_max_ind)\n\ngcc/c/\n\tPR c/58942\n\t* c-array-notation.c (fix_builtin_array_notation_fn): Handle the case\n\twith a pointer.\n\ngcc/cp/\n\tPR c/58942\n\t* cp-array-notation.c (expand_sec_reduce_builtin): Handle the case\n\twith a pointer.\n\ngcc/testsuite/\n\tPR c/58942\n\t* c-c++-common/cilk-plus/AN/pr58942.c: Check for correct handling of\n\tthe case with a pointer.\n\nFrom-SVN: r211220", "tree": {"sha": "b827052a451a21de8375b6509b0a00c4b09917da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b827052a451a21de8375b6509b0a00c4b09917da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/comments", "author": {"login": "Garra1980", "id": 25365940, "node_id": "MDQ6VXNlcjI1MzY1OTQw", "avatar_url": "https://avatars.githubusercontent.com/u/25365940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Garra1980", "html_url": "https://github.com/Garra1980", "followers_url": "https://api.github.com/users/Garra1980/followers", "following_url": "https://api.github.com/users/Garra1980/following{/other_user}", "gists_url": "https://api.github.com/users/Garra1980/gists{/gist_id}", "starred_url": "https://api.github.com/users/Garra1980/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Garra1980/subscriptions", "organizations_url": "https://api.github.com/users/Garra1980/orgs", "repos_url": "https://api.github.com/users/Garra1980/repos", "events_url": "https://api.github.com/users/Garra1980/events{/privacy}", "received_events_url": "https://api.github.com/users/Garra1980/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8a57e88dc63d44a2f72781e4732ede00f14205cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a57e88dc63d44a2f72781e4732ede00f14205cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a57e88dc63d44a2f72781e4732ede00f14205cf"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "c51bfb49580dcb3fd0832415eb58d75dcbcdefa2", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "patch": "@@ -1,3 +1,9 @@\n+2014-06-04  Igor Zamyatin  <igor.zamyatin@intel.com>\n+\n+\tPR c/58942\n+\t* c-array-notation.c (fix_builtin_array_notation_fn): Handle the case\n+\twith a pointer.\n+\n 2014-06-03  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/60439"}, {"sha": "b4015b84ee92009d34a0d6eb1829f2b3bb0aa0f1", "filename": "gcc/c/c-array-notation.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fc%2Fc-array-notation.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fc%2Fc-array-notation.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-array-notation.c?ref=9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "patch": "@@ -310,7 +310,9 @@ fix_builtin_array_notation_fn (tree an_builtin_fn, tree *new_var)\n       || an_type == BUILT_IN_CILKPLUS_SEC_REDUCE_MIN_IND)\n     array_ind_value = build_decl (location, VAR_DECL, NULL_TREE, \n \t\t\t\t  TREE_TYPE (func_parm));\n-  array_op0 = (*array_operand)[0];\t\t\t      \n+  array_op0 = (*array_operand)[0];\n+  if (TREE_CODE (array_op0) == INDIRECT_REF)\n+    array_op0 = TREE_OPERAND (array_op0, 0);\n   switch (an_type)\n     {\n     case BUILT_IN_CILKPLUS_SEC_REDUCE_ADD:"}, {"sha": "334d6b1f3c46aa859b56de0b731c707c1d7327f0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "patch": "@@ -1,3 +1,9 @@\n+2014-06-04  Igor Zamyatin  <igor.zamyatin@intel.com>\n+\n+\tPR c/58942\n+\t* cp-array-notation.c (expand_sec_reduce_builtin): Handle the case\n+\twith a pointer.\n+\n 2014-06-03  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tDR 1423"}, {"sha": "0538e559f85339d8b904d89b84ad32a8d4a7bbf7", "filename": "gcc/cp/cp-array-notation.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fcp%2Fcp-array-notation.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Fcp%2Fcp-array-notation.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-array-notation.c?ref=9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "patch": "@@ -340,6 +340,8 @@ expand_sec_reduce_builtin (tree an_builtin_fn, tree *new_var)\n     array_ind_value = get_temp_regvar (TREE_TYPE (func_parm), func_parm);\n \n   array_op0 = (*array_operand)[0];\n+  if (TREE_CODE (array_op0) == INDIRECT_REF)\n+    array_op0 = TREE_OPERAND (array_op0, 0);\n   switch (an_type)\n     {\n     case BUILT_IN_CILKPLUS_SEC_REDUCE_ADD:"}, {"sha": "4146bde92b7d8eaf178467eb6f1c75cfba0431b0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "patch": "@@ -1,3 +1,9 @@\n+2014-06-04  Igor Zamyatin  <igor.zamyatin@intel.com>\n+\n+\tPR c/58942\n+\t* c-c++-common/cilk-plus/AN/pr58942.c: Check for correct handling of\n+\tthe case with a pointer.\n+\n 2014-06-04  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/30020"}, {"sha": "87903af3c8673a4a2c637ecb8d061ec6841e6052", "filename": "gcc/testsuite/c-c++-common/cilk-plus/AN/pr58942.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcilk-plus%2FAN%2Fpr58942.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dc7743c7864cbdc0f62a827c9af6a854ebfa98f/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcilk-plus%2FAN%2Fpr58942.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcilk-plus%2FAN%2Fpr58942.c?ref=9dc7743c7864cbdc0f62a827c9af6a854ebfa98f", "patch": "@@ -0,0 +1,8 @@\n+/* PR c/58942 */\n+/* { dg-do compile } */\n+/* { dg-options \"-fcilkplus\" } */\n+\n+int foo (int*p, int i)\n+{\n+  return __sec_reduce_max_ind(p[1:i]);\n+}"}]}