{"sha": "d573123d17fb48ec675aa25f4e8a9754d876228c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU3MzEyM2QxN2ZiNDhlYzY3NWFhMjVmNGU4YTk3NTRkODc2MjI4Yw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2008-09-16T12:34:01Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2008-09-16T12:34:01Z"}, "message": "re PR middle-end/37380 (../../gcc/libcpp/charset.c:1103: error: 'cvt.77.width' is used uninitialized in this function)\n\n2008-09-16  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/37380\n\t* tree-sra.c (sra_build_assignment): Do not call the gimplifier\n\tif not necessary.\n\n\t* gcc.c-torture/compile/pr37380.c: New testcase.\n\nFrom-SVN: r140388", "tree": {"sha": "1dc33f94664f6b2d5b93ba40a31ffe948fc220aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1dc33f94664f6b2d5b93ba40a31ffe948fc220aa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d573123d17fb48ec675aa25f4e8a9754d876228c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d573123d17fb48ec675aa25f4e8a9754d876228c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d573123d17fb48ec675aa25f4e8a9754d876228c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d573123d17fb48ec675aa25f4e8a9754d876228c/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9cb57027a39541712b049df895beda264d73d5ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cb57027a39541712b049df895beda264d73d5ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cb57027a39541712b049df895beda264d73d5ca"}], "stats": {"total": 72, "additions": 70, "deletions": 2}, "files": [{"sha": "ff6e2452164d450e5f17e14de0bd5882cd3a3fc6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d573123d17fb48ec675aa25f4e8a9754d876228c", "patch": "@@ -1,3 +1,9 @@\n+2008-09-16  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/37380\n+\t* tree-sra.c (sra_build_assignment): Do not call the gimplifier\n+\tif not necessary.\n+\n 2008-09-16  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/37508"}, {"sha": "0ad3a64a2dd292c42c8feaf6b82af40a106214f6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d573123d17fb48ec675aa25f4e8a9754d876228c", "patch": "@@ -1,3 +1,8 @@\n+2008-09-16  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/37380\n+\t* gcc.c-torture/compile/pr37380.c: New testcase.\n+\n 2008-09-16  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/37508"}, {"sha": "d757e0245a002039048c9711ad75ce15895b6d5f", "filename": "gcc/testsuite/gcc.c-torture/compile/pr37380.c", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr37380.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr37380.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr37380.c?ref=d573123d17fb48ec675aa25f4e8a9754d876228c", "patch": "@@ -0,0 +1,51 @@\n+typedef struct basic_block_def *basic_block;\n+typedef struct gimple_seq_node_d *gimple_seq_node;\n+typedef struct gimple_seq_d *gimple_seq;\n+typedef struct\n+{\n+  gimple_seq_node ptr;\n+  gimple_seq seq;\n+  basic_block bb;\n+} gimple_stmt_iterator;\n+typedef void *gimple;\n+extern void exit(int);\n+struct gimple_seq_node_d\n+{\n+  gimple stmt;\n+  struct gimple_seq_node_d *next;\n+};\n+struct gimple_seq_d\n+{\n+};\n+static __inline__ gimple_stmt_iterator\n+gsi_start (gimple_seq seq)\n+{\n+  gimple_stmt_iterator i;\n+  i.seq = seq;\n+  return i;\n+}\n+static __inline__ unsigned char\n+gsi_end_p (gimple_stmt_iterator i)\n+{\n+  return i.ptr == ((void *)0);\n+}\n+static __inline__ void\n+gsi_next (gimple_stmt_iterator *i)\n+{\n+  i->ptr = i->ptr->next;\n+}\n+static __inline__ gimple\n+gsi_stmt (gimple_stmt_iterator i)\n+{\n+  return i.ptr->stmt;\n+}\n+void\n+c_warn_unused_result (gimple_seq seq)\n+{\n+  gimple_stmt_iterator i;\n+  for (i = gsi_start (seq); !gsi_end_p (i); gsi_next (&i))\n+    {\n+      gimple g = gsi_stmt (i);\n+      if (!g) exit(0);\n+    }\n+}"}, {"sha": "3689b69f757ea83e100af6e344a4694973f7f243", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d573123d17fb48ec675aa25f4e8a9754d876228c/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=d573123d17fb48ec675aa25f4e8a9754d876228c", "patch": "@@ -2308,8 +2308,14 @@ sra_build_assignment (tree dst, tree src)\n \t   && !useless_type_conversion_p (TREE_TYPE (dst), TREE_TYPE (src)))\n     src = fold_convert (TREE_TYPE (dst), src);\n \n-  src = force_gimple_operand (src, &seq2, false, NULL_TREE);\n-  gimple_seq_add_seq (&seq, seq2);\n+  /* ???  Only call the gimplifier if we need to.  Otherwise we may \n+     end up substituting with DECL_VALUE_EXPR - see PR37380.  */\n+  if (!handled_component_p (src)\n+      && !SSA_VAR_P (src))\n+    {\n+      src = force_gimple_operand (src, &seq2, false, NULL_TREE);\n+      gimple_seq_add_seq (&seq, seq2);\n+    }\n   stmt = gimple_build_assign (dst, src);\n   gimple_seq_add_stmt (&seq, stmt);\n   return seq;"}]}