{"sha": "fa10faa72d8e9e97b6e564f8b0a7b602538d0da0", "node_id": "C_kwDOANBUbNoAKGZhMTBmYWE3MmQ4ZTllOTdiNmU1NjRmOGIwYTdiNjAyNTM4ZDBkYTA", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-12-01T22:56:28Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-12-02T00:46:07Z"}, "message": "d: Disable the D runtime garbage collector after initializing (PR103520)\n\nNot all targets that support building libdruntime have a stable garbage\ncollector, so to avoid running into problems where live memory allocated\nby the D GC is freed, disable all in-flight collections until a time\nwhen scanning is more reliably implemented everywhere.\n\n\tPR d/103520\n\ngcc/d/ChangeLog:\n\n\t* d-frontend.h (gc_disable): Declare.\n\t* d-lang.cc (d_init_options): Disable the D runtime garbage collector\n\tafter initializing.", "tree": {"sha": "ec8bbec2cec218e2f906408392754d7c110bca3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec8bbec2cec218e2f906408392754d7c110bca3d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "12421a364548323df7126c6e3e2d0f82ad8fe53a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12421a364548323df7126c6e3e2d0f82ad8fe53a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12421a364548323df7126c6e3e2d0f82ad8fe53a"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "e7695d5718b5f85e2796028a3fe03abd38a79855", "filename": "gcc/d/d-frontend.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0/gcc%2Fd%2Fd-frontend.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0/gcc%2Fd%2Fd-frontend.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fd-frontend.h?ref=fa10faa72d8e9e97b6e564f8b0a7b602538d0da0", "patch": "@@ -21,7 +21,7 @@ along with GCC; see the file COPYING3.  If not see\n /* These functions are defined in D runtime.  */\n extern \"C\" int rt_init (void);\n extern \"C\" int rt_term (void);\n-//extern \"C\" void gc_disable (void);\n+extern \"C\" void gc_disable (void);\n extern \"C\" void *gc_malloc (size_t sz, unsigned ba = 0, const void *ti = NULL);\n extern \"C\" void gc_free (void *);\n extern \"C\" void gc_collect (void);"}, {"sha": "dbf7a8b60b9353421f746ea838a67ed7a727392f", "filename": "gcc/d/d-lang.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0/gcc%2Fd%2Fd-lang.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa10faa72d8e9e97b6e564f8b0a7b602538d0da0/gcc%2Fd%2Fd-lang.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fd-lang.cc?ref=fa10faa72d8e9e97b6e564f8b0a7b602538d0da0", "patch": "@@ -288,7 +288,7 @@ d_init_options (unsigned int, cl_decoded_option *decoded_options)\n {\n   /* Initialize the D runtime.  */\n   rt_init ();\n-//  gc_disable ();\n+  gc_disable ();\n \n   /* Set default values.  */\n   global._init ();"}]}