{"sha": "44e1aae4dbd8198a26ab0ec5958e073e2c9cc772", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDRlMWFhZTRkYmQ4MTk4YTI2YWIwZWM1OTU4ZTA3M2UyYzljYzc3Mg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@linaro.org", "date": "2017-12-07T18:42:14Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2017-12-07T18:42:14Z"}, "message": "Make build_vector static\n\nThe only remaining uses of build_vector are in the selftests in tree.c.\nThis patch makes it static and moves it to the selftest part of the file.\n\n2017-12-07  Richard Sandiford  <richard.sandiford@linaro.org>\n\ngcc/\n\t* tree.c (build_vector): Delete.\n\t* tree.h (build_vector): Make static and move into the self-testing\n\tblock.\n\nFrom-SVN: r255479", "tree": {"sha": "60d257d4b662ae91e722b64dc3cda843d9e6d11a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60d257d4b662ae91e722b64dc3cda843d9e6d11a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772/comments", "author": null, "committer": null, "parents": [{"sha": "abe73c3d32b68809628eaa3266bf98cb7352851c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abe73c3d32b68809628eaa3266bf98cb7352851c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abe73c3d32b68809628eaa3266bf98cb7352851c"}], "stats": {"total": 31, "additions": 18, "deletions": 13}, "files": [{"sha": "7fb0d5656e11e4d920688731e441afa6aeee7f71", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=44e1aae4dbd8198a26ab0ec5958e073e2c9cc772", "patch": "@@ -1,3 +1,9 @@\n+2017-12-07  Richard Sandiford  <richard.sandiford@linaro.org>\n+\n+\t* tree.c (build_vector): Delete.\n+\t* tree.h (build_vector): Make static and move into the self-testing\n+\tblock.\n+\n 2017-12-07  Richard Sandiford  <richard.sandiford@linaro.org>\n \n \t* vector-builder.h (vector_builder::derived): New const overload."}, {"sha": "13ae1c978e38b48c51daa4e3ac4f83d467e62416", "filename": "gcc/tree.c", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=44e1aae4dbd8198a26ab0ec5958e073e2c9cc772", "patch": "@@ -1735,18 +1735,6 @@ make_vector (unsigned log2_npatterns,\n   return t;\n }\n \n-/* Return a new VECTOR_CST node whose type is TYPE and whose values\n-   are given by VALS.  */\n-\n-tree\n-build_vector (tree type, vec<tree> vals MEM_STAT_DECL)\n-{\n-  gcc_assert (vals.length () == TYPE_VECTOR_SUBPARTS (type));\n-  tree_vector_builder builder (type, vals.length (), 1);\n-  builder.splice (vals);\n-  return builder.build ();\n-}\n-\n /* Return a new VECTOR_CST node whose type is TYPE and whose values\n    are extracted from V, a vector of CONSTRUCTOR_ELT.  */\n \n@@ -14066,6 +14054,18 @@ test_labels ()\n   ASSERT_FALSE (FORCED_LABEL (label_decl));\n }\n \n+/* Return a new VECTOR_CST node whose type is TYPE and whose values\n+   are given by VALS.  */\n+\n+static tree\n+build_vector (tree type, vec<tree> vals MEM_STAT_DECL)\n+{\n+  gcc_assert (vals.length () == TYPE_VECTOR_SUBPARTS (type));\n+  tree_vector_builder builder (type, vals.length (), 1);\n+  builder.splice (vals);\n+  return builder.build ();\n+}\n+\n /* Check that VECTOR_CST ACTUAL contains the elements in EXPECTED.  */\n \n static void"}, {"sha": "306ff0904081f4b674eaa492f8d9e9641fd636cf", "filename": "gcc/tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44e1aae4dbd8198a26ab0ec5958e073e2c9cc772/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=44e1aae4dbd8198a26ab0ec5958e073e2c9cc772", "patch": "@@ -4044,7 +4044,6 @@ extern tree build_int_cst (tree, HOST_WIDE_INT);\n extern tree build_int_cstu (tree type, unsigned HOST_WIDE_INT cst);\n extern tree build_int_cst_type (tree, HOST_WIDE_INT);\n extern tree make_vector (unsigned, unsigned CXX_MEM_STAT_INFO);\n-extern tree build_vector (tree, vec<tree> CXX_MEM_STAT_INFO);\n extern tree build_vector_from_ctor (tree, vec<constructor_elt, va_gc> *);\n extern tree build_vector_from_val (tree, tree);\n extern void recompute_constructor_flags (tree);"}]}