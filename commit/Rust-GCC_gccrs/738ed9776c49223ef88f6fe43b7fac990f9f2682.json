{"sha": "738ed9776c49223ef88f6fe43b7fac990f9f2682", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzM4ZWQ5Nzc2YzQ5MjIzZWY4OGY2ZmU0M2I3ZmFjOTkwZjlmMjY4Mg==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "rakdver@atrey.karlin.mff.cuni.cz", "date": "2004-03-02T00:28:07Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2004-03-02T00:28:07Z"}, "message": "* dominance.c (recount_dominator): Handle postdominators.\n\nFrom-SVN: r78734", "tree": {"sha": "dc255ce7f6edeaa13e6ce738680fd87f2356223d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc255ce7f6edeaa13e6ce738680fd87f2356223d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/738ed9776c49223ef88f6fe43b7fac990f9f2682", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/738ed9776c49223ef88f6fe43b7fac990f9f2682", "html_url": "https://github.com/Rust-GCC/gccrs/commit/738ed9776c49223ef88f6fe43b7fac990f9f2682", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/738ed9776c49223ef88f6fe43b7fac990f9f2682/comments", "author": null, "committer": null, "parents": [{"sha": "27c102117df46b8f71e9fbfbfdc82406379a06f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27c102117df46b8f71e9fbfbfdc82406379a06f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27c102117df46b8f71e9fbfbfdc82406379a06f2"}], "stats": {"total": 37, "additions": 28, "deletions": 9}, "files": [{"sha": "3661aa88ce7f75ff939aee258bb04e3341f28f9b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/738ed9776c49223ef88f6fe43b7fac990f9f2682/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/738ed9776c49223ef88f6fe43b7fac990f9f2682/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=738ed9776c49223ef88f6fe43b7fac990f9f2682", "patch": "@@ -1,3 +1,7 @@\n+2004-03-02  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+\n+\t* dominance.c (recount_dominator): Handle postdominators.\n+\n 2004-03-01  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mips/mips-protos.h (enum mips_symbol_type): Move from mips.h."}, {"sha": "2b6e806a77760da1ff24f1e4728806e9bbd712bd", "filename": "gcc/dominance.c", "status": "modified", "additions": 24, "deletions": 9, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/738ed9776c49223ef88f6fe43b7fac990f9f2682/gcc%2Fdominance.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/738ed9776c49223ef88f6fe43b7fac990f9f2682/gcc%2Fdominance.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdominance.c?ref=738ed9776c49223ef88f6fe43b7fac990f9f2682", "patch": "@@ -769,23 +769,38 @@ verify_dominators (enum cdi_direction dir)\n     abort ();\n }\n \n-/* Recount dominator of BB.  */\n+/* Determine immediate dominator (or postdominator, according to DIR) of BB,\n+   assuming that dominators of other blocks are correct.  We also use it to\n+   recompute the dominators in a restricted area, by iterating it until it\n+   reaches a fixpoint.  */\n+\n basic_block\n recount_dominator (enum cdi_direction dir, basic_block bb)\n {\n-   basic_block dom_bb = NULL;\n-   edge e;\n+  basic_block dom_bb = NULL;\n+  edge e;\n \n   if (!dom_computed[dir])\n     abort ();\n \n-   for (e = bb->pred; e; e = e->pred_next)\n-     {\n-       if (!dominated_by_p (dir, e->src, bb))\n-         dom_bb = nearest_common_dominator (dir, dom_bb, e->src);\n-     }\n+  if (dir == CDI_DOMINATORS)\n+    {\n+      for (e = bb->pred; e; e = e->pred_next)\n+\t{\n+\t  if (!dominated_by_p (dir, e->src, bb))\n+\t    dom_bb = nearest_common_dominator (dir, dom_bb, e->src);\n+\t}\n+    }\n+  else\n+    {\n+      for (e = bb->succ; e; e = e->succ_next)\n+\t{\n+\t  if (!dominated_by_p (dir, e->dest, bb))\n+\t    dom_bb = nearest_common_dominator (dir, dom_bb, e->dest);\n+\t}\n+    }\n \n-   return dom_bb;\n+  return dom_bb;\n }\n \n /* Iteratively recount dominators of BBS. The change is supposed to be local"}]}