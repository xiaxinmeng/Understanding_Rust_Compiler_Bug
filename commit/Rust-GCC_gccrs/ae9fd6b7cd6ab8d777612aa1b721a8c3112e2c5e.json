{"sha": "ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWU5ZmQ2YjdjZDZhYjhkNzc3NjEyYWExYjcyMWE4YzMxMTJlMmM1ZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-12-14T13:07:05Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-12-14T13:07:05Z"}, "message": "re PR middle-end/46667 (-freorder-blocks-and-partition -g failed and libstdc++ builds for arm-eabi are broken.)\n\n\tPR middle-end/46667\n\t* varasm.c (assemble_start_function): Do not call resolve_unique_section.\n\t* cfgexpand.c (gimple_expand_cfg): Resolve it here.\n\nFrom-SVN: r167795", "tree": {"sha": "9cc76fb425b71d0e50ff805535ba86260f5589ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9cc76fb425b71d0e50ff805535ba86260f5589ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e/comments", "author": null, "committer": null, "parents": [{"sha": "b4550bf7ad60d0233a4d9f36dcbbce32e75a3199", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4550bf7ad60d0233a4d9f36dcbbce32e75a3199", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4550bf7ad60d0233a4d9f36dcbbce32e75a3199"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "c99b9314785ef380de665d084a13428959b3e38f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e", "patch": "@@ -1,3 +1,9 @@\n+2010-12-14  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/46667\n+\t* varasm.c (assemble_start_function): Do not call resolve_unique_section.\n+\t* cfgexpand.c (gimple_expand_cfg): Resolve it here.\n+\n 2010-12-14  Alexander Monakov  <amonakov@ispras.ru>\n \n \tPR rtl-optimization/46875"}, {"sha": "6cc5d01912fc3ada265127b439f6642b7f94306e", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e", "patch": "@@ -3951,6 +3951,10 @@ gimple_expand_cfg (void)\n   crtl->preferred_stack_boundary = STACK_BOUNDARY;\n   cfun->cfg->max_jumptable_ents = 0;\n \n+  /* Resovle the function section.  Some targets, like ARM EABI rely on knowledge\n+     of the function section at exapnsion time to predict distance of calls.  */\n+  resolve_unique_section (current_function_decl, 0, flag_function_sections);\n+\n   /* Expand the variables recorded during gimple lowering.  */\n   timevar_push (TV_VAR_EXPAND);\n   start_sequence ();"}, {"sha": "ed44610ddf18d3c00febefa3d9e0539cc7a2915c", "filename": "gcc/varasm.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=ae9fd6b7cd6ab8d777612aa1b721a8c3112e2c5e", "patch": "@@ -1551,8 +1551,6 @@ assemble_start_function (tree decl, const char *fnname)\n   if (CONSTANT_POOL_BEFORE_FUNCTION)\n     output_constant_pool (fnname, decl);\n \n-  resolve_unique_section (decl, 0, flag_function_sections);\n-\n   /* Make sure the not and cold text (code) sections are properly\n      aligned.  This is necessary here in the case where the function\n      has both hot and cold sections, because we don't want to re-set"}]}