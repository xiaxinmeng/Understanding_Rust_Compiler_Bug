{"sha": "2c790a28841f2a404f1f6e96d07041138583788a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM3OTBhMjg4NDFmMmE0MDRmMWY2ZTk2ZDA3MDQxMTM4NTgzNzg4YQ==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2006-05-09T09:10:15Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2006-05-09T09:10:15Z"}, "message": "re PR rtl-optimization/27335 (ICE in get_loop_body)\n\n\tPR rtl-optimization/27335\n\t* loop-unroll.c (peel_loops_completely): Use loops->parray to walk the\n\tloops.\n\n\t* gcc.dg/pr27335.c: New test.\n\nFrom-SVN: r113648", "tree": {"sha": "aabd0f9c50090c14bb5730b3f5bec41c2e9be980", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aabd0f9c50090c14bb5730b3f5bec41c2e9be980"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c790a28841f2a404f1f6e96d07041138583788a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c790a28841f2a404f1f6e96d07041138583788a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c790a28841f2a404f1f6e96d07041138583788a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c790a28841f2a404f1f6e96d07041138583788a/comments", "author": null, "committer": null, "parents": [{"sha": "ec4fc7edafe1c67b09d5462efe3beb8bcc1e6732", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec4fc7edafe1c67b09d5462efe3beb8bcc1e6732", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec4fc7edafe1c67b09d5462efe3beb8bcc1e6732"}], "stats": {"total": 60, "additions": 45, "deletions": 15}, "files": [{"sha": "c1896d9d9b1b9f740900e1173e577ae0527df412", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c790a28841f2a404f1f6e96d07041138583788a", "patch": "@@ -1,3 +1,9 @@\n+2006-05-09  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\tPR rtl-optimization/27335\n+\t* loop-unroll.c (peel_loops_completely): Use loops->parray to walk the\n+\tloops.\n+\n 2006-05-08  Chao-ying Fu  <fu@mips.com>\n \t    Richard Sandiford  <richard@codesourcery.com>\n "}, {"sha": "156f688651e4184f789d89476ab5b424bc2d78ff", "filename": "gcc/loop-unroll.c", "status": "modified", "additions": 7, "deletions": 15, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2Floop-unroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2Floop-unroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop-unroll.c?ref=2c790a28841f2a404f1f6e96d07041138583788a", "patch": "@@ -233,22 +233,15 @@ loop_exit_at_end_p (struct loop *loop)\n static void\n peel_loops_completely (struct loops *loops, int flags)\n {\n-  struct loop *loop, *next;\n-\n-  loop = loops->tree_root;\n-  while (loop->inner)\n-    loop = loop->inner;\n+  struct loop *loop;\n+  unsigned i;\n \n-  while (loop != loops->tree_root)\n+  /* Scan the loops, the inner ones first.  */\n+  for (i = loops->num - 1; i > 0; i--)\n     {\n-      if (loop->next)\n-\t{\n-\t  next = loop->next;\n-\t  while (next->inner)\n-\t    next = next->inner;\n-\t}\n-      else\n-\tnext = loop->outer;\n+      loop = loops->parray[i];\n+      if (!loop)\n+\tcontinue;\n \n       loop->lpt_decision.decision = LPT_NONE;\n \n@@ -271,7 +264,6 @@ peel_loops_completely (struct loops *loops, int flags)\n \t  verify_loop_structure (loops);\n #endif\n \t}\n-      loop = next;\n     }\n }\n "}, {"sha": "a3f49f7974c3f1717aa04c528d9b3e8143e198bc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2c790a28841f2a404f1f6e96d07041138583788a", "patch": "@@ -1,3 +1,8 @@\n+2006-05-09  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\tPR rtl-optimization/27335\n+\t* gcc.dg/pr27335.c: New test.\n+\n 2006-05-06  Richard Sandiford  <richard@codesourcery.com>\n \n \t* gcc.target/mips/mips-ps-5.c: New file."}, {"sha": "d08db30bdbfc0752a629917fcea6f871bb743e42", "filename": "gcc/testsuite/gcc.dg/pr27335.c", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27335.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c790a28841f2a404f1f6e96d07041138583788a/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27335.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27335.c?ref=2c790a28841f2a404f1f6e96d07041138583788a", "patch": "@@ -0,0 +1,27 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -funroll-loops\" } */\n+\n+extern void bar () __attribute__ ((noreturn));\n+\n+inline double\n+baz (double *x, unsigned int y)\n+{\n+  if (y >= 6)\n+    bar ();\n+  return x[y];\n+}\n+\n+double *a, *b;\n+\n+void\n+foo ()\n+{\n+  unsigned int r, s, t;\n+\n+  for (r = 0; r < 2; r++)\n+    for (t = 0; t < 2; t++)\n+      {\n+        for (s = 0; s < 3; s++)\n+          b[r * 2 + t] += baz (a, 3 * s + t);\n+      }\n+}"}]}