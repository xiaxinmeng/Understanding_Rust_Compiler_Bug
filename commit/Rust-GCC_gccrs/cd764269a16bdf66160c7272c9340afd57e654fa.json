{"sha": "cd764269a16bdf66160c7272c9340afd57e654fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Q3NjQyNjlhMTZiZGY2NjE2MGM3MjcyYzkzNDBhZmQ1N2U2NTRmYQ==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2017-11-10T16:46:54Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@gcc.gnu.org", "date": "2017-11-10T16:46:54Z"}, "message": "power9.md (power9-qpdiv): Correct DFU pipe usage.\n\n\t* rs6000/power9.md (power9-qpdiv): Correct DFU pipe usage.\n\t(power9-qpmul): New.\n\t* rs6000/rs6000.md (\"type\" attr): Add qmul.\n\t(mul<mode>3, fma<mode>4_hw, *fms<mode>4_hw, *nfma<mode>4_hw,\n\t*nfms<mode>4_hw, mul<mode>3_odd, fma<mode>4_odd, *fms<mode>4_odd,\n\t*nfma<mode>4_odd, *nfms<mode>4_odd): Change type to qmul.\n\nFrom-SVN: r254631", "tree": {"sha": "bcb04274ab44263ff667c5f79acae64d631761c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bcb04274ab44263ff667c5f79acae64d631761c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cd764269a16bdf66160c7272c9340afd57e654fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd764269a16bdf66160c7272c9340afd57e654fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd764269a16bdf66160c7272c9340afd57e654fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd764269a16bdf66160c7272c9340afd57e654fa/comments", "author": null, "committer": null, "parents": [{"sha": "025d57f037ad13eb479818b677ef4be4d97b639c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/025d57f037ad13eb479818b677ef4be4d97b639c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/025d57f037ad13eb479818b677ef4be4d97b639c"}], "stats": {"total": 39, "additions": 27, "deletions": 12}, "files": [{"sha": "82665bd5ccbdb56bf2423cdd1a94234ffa873f73", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd764269a16bdf66160c7272c9340afd57e654fa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd764269a16bdf66160c7272c9340afd57e654fa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cd764269a16bdf66160c7272c9340afd57e654fa", "patch": "@@ -1,3 +1,12 @@\n+2017-11-10  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\t* rs6000/power9.md (power9-qpdiv): Correct DFU pipe usage.\n+\t(power9-qpmul): New.\n+\t* rs6000/rs6000.md (\"type\" attr): Add qmul.\n+\t(mul<mode>3, fma<mode>4_hw, *fms<mode>4_hw, *nfma<mode>4_hw,\n+\t*nfms<mode>4_hw, mul<mode>3_odd, fma<mode>4_odd, *fms<mode>4_odd,\n+\t*nfma<mode>4_odd, *nfms<mode>4_odd): Change type to qmul.\n+\n 2017-11-10  Martin Sebor  <msebor@redhat.com>\n \n \tPR c/81117"}, {"sha": "82e4b1cf65cd81a13e47f8515ea3b0af3a562463", "filename": "gcc/config/rs6000/power9.md", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd764269a16bdf66160c7272c9340afd57e654fa/gcc%2Fconfig%2Frs6000%2Fpower9.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd764269a16bdf66160c7272c9340afd57e654fa/gcc%2Fconfig%2Frs6000%2Fpower9.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower9.md?ref=cd764269a16bdf66160c7272c9340afd57e654fa", "patch": "@@ -434,7 +434,13 @@\n   (and (eq_attr \"type\" \"vecdiv\")\n        (eq_attr \"size\" \"128\")\n        (eq_attr \"cpu\" \"power9\"))\n-  \"DU_super_power9,dfu_power9\")\n+  \"DU_super_power9,dfu_power9*44\")\n+\n+(define_insn_reservation \"power9-qpmul\" 24\n+  (and (eq_attr \"type\" \"qmul\")\n+       (eq_attr \"size\" \"128\")\n+       (eq_attr \"cpu\" \"power9\"))\n+  \"DU_super_power9,dfu_power9*12\")\n \n (define_insn_reservation \"power9-mffgpr\" 2\n   (and (eq_attr \"type\" \"mffgpr\")"}, {"sha": "7025b0049ce396fa475c613eaef8a658352d2ef9", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd764269a16bdf66160c7272c9340afd57e654fa/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd764269a16bdf66160c7272c9340afd57e654fa/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=cd764269a16bdf66160c7272c9340afd57e654fa", "patch": "@@ -182,7 +182,7 @@\n    cmp,\n    branch,jmpreg,mfjmpr,mtjmpr,trap,isync,sync,load_l,store_c,\n    cr_logical,delayed_cr,mfcr,mfcrf,mtcr,\n-   fpcompare,fp,fpsimple,dmul,sdiv,ddiv,ssqrt,dsqrt,\n+   fpcompare,fp,fpsimple,dmul,qmul,sdiv,ddiv,ssqrt,dsqrt,\n    vecsimple,veccomplex,vecdiv,veccmp,veccmpsimple,vecperm,\n    vecfloat,vecfdiv,vecdouble,mffgpr,mftgpr,crypto,\n    veclogical,veccmpfx,vecexts,vecmove,\n@@ -14335,7 +14335,7 @@\n \t (match_operand:IEEE128 2 \"altivec_register_operand\" \"v\")))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsmulqp %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"div<mode>3\"\n@@ -14437,7 +14437,7 @@\n \t (match_operand:IEEE128 3 \"altivec_register_operand\" \"0\")))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsmaddqp %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"*fms<mode>4_hw\"\n@@ -14449,7 +14449,7 @@\n \t  (match_operand:IEEE128 3 \"altivec_register_operand\" \"0\"))))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsmsubqp %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"*nfma<mode>4_hw\"\n@@ -14461,7 +14461,7 @@\n \t  (match_operand:IEEE128 3 \"altivec_register_operand\" \"0\"))))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsnmaddqp %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"*nfms<mode>4_hw\"\n@@ -14474,7 +14474,7 @@\n \t   (match_operand:IEEE128 3 \"altivec_register_operand\" \"0\")))))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsnmsubqp %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"extend<SFDF:mode><IEEE128:mode>2_hw\"\n@@ -14749,7 +14749,7 @@\n \t UNSPEC_MUL_ROUND_TO_ODD))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsmulqpo %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"div<mode>3_odd\"\n@@ -14782,7 +14782,7 @@\n \t UNSPEC_FMA_ROUND_TO_ODD))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsmaddqpo %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"*fms<mode>4_odd\"\n@@ -14795,7 +14795,7 @@\n \t UNSPEC_FMA_ROUND_TO_ODD))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsmsubqpo %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"*nfma<mode>4_odd\"\n@@ -14808,7 +14808,7 @@\n \t  UNSPEC_FMA_ROUND_TO_ODD)))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsnmaddqpo %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"*nfms<mode>4_odd\"\n@@ -14822,7 +14822,7 @@\n \t  UNSPEC_FMA_ROUND_TO_ODD)))]\n   \"TARGET_FLOAT128_HW && FLOAT128_IEEE_P (<MODE>mode)\"\n   \"xsnmsubqpo %0,%1,%2\"\n-  [(set_attr \"type\" \"vecfloat\")\n+  [(set_attr \"type\" \"qmul\")\n    (set_attr \"size\" \"128\")])\n \n (define_insn \"trunc<mode>df2_odd\""}]}