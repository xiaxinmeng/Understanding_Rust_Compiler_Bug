{"sha": "3a57c6cb0c7e1ac5b177646328dbfa37e77bd364", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2E1N2M2Y2IwYzdlMWFjNWIxNzc2NDYzMjhkYmZhMzdlNzdiZDM2NA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-05-01T18:23:27Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-05-01T18:23:27Z"}, "message": "function.c (INVOKE__main): Do not define.\n\n\t* function.c (INVOKE__main): Do not define.\n\t(expand_main_function): Check HAS_INIT_SECTION when determining\n\twhether or not to call __main.\n\nFrom-SVN: r99076", "tree": {"sha": "dbe9ffea2c7cfc8b0ce2b9d1b2e08d83ebf19c8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dbe9ffea2c7cfc8b0ce2b9d1b2e08d83ebf19c8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364/comments", "author": null, "committer": null, "parents": [{"sha": "df1de1a353dff30e59116429b4ac1bbfa445403e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df1de1a353dff30e59116429b4ac1bbfa445403e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df1de1a353dff30e59116429b4ac1bbfa445403e"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "6ba6bb8b5e6c8f580d41769c1eef80ff09272707", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3a57c6cb0c7e1ac5b177646328dbfa37e77bd364", "patch": "@@ -1,3 +1,9 @@\n+2005-05-01  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* function.c (INVOKE__main): Do not define.\n+\t(expand_main_function): Check HAS_INIT_SECTION when determining\n+\twhether or not to call __main.\n+\n 2005-05-01  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-ssa-loop-ivopts.c: Fix a comment typo."}, {"sha": "bde08a8fd846e4269e4746cdcdd9377c8c8b9d5d", "filename": "gcc/function.c", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a57c6cb0c7e1ac5b177646328dbfa37e77bd364/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=3a57c6cb0c7e1ac5b177646328dbfa37e77bd364", "patch": "@@ -3867,14 +3867,6 @@ init_function_for_compilation (void)\n   VARRAY_GROW (sibcall_epilogue, 0);\n }\n \n-/* Define IVOKE__main if we should emit a call to __main at the start\n-   of \"main\".  */ \n-#if (!defined(INVOKE__main)\t\t\t\\\n-     && !defined(INIT_SECTION_ASM_OP)\t\t\\\n-     && !defined(INIT_ARRAY_SECTION_ASM_OP))\n-#define INVOKE__main\n-#endif\n-\n void\n expand_main_function (void)\n {\n@@ -3914,7 +3906,10 @@ expand_main_function (void)\n     }\n #endif\n \n-#if defined(INVOKE__main)\n+#if (defined(INVOKE__main)\t\t\t\t\\\n+     || (!defined(HAS_INIT_SECTION)\t\t\t\\\n+\t && !defined(INIT_SECTION_ASM_OP)\t\t\\\n+\t && !defined(INIT_ARRAY_SECTION_ASM_OP)))\n   emit_library_call (init_one_libfunc (NAME__MAIN), LCT_NORMAL, VOIDmode, 0);\n #endif\n }"}]}