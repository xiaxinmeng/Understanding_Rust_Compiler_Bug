{"sha": "4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561", "node_id": "C_kwDOANBUbNoAKDRmYTY4NDViNGIyOWYzM2NjN2VhM2Q4ZmY0OWI2MWJiMWY0NjA1NjE", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2023-01-13T21:05:28Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2023-01-13T21:15:20Z"}, "message": "Fix PR rtl-optimization/108274\n\nUnlike other IPA passes, the ICF pass can be run at -O0 and some testcases\nrely on this in the testsuite.  Now it effectively creates a tail call so\nthe DF information needs be updated in this case after epilogue creation.\n\ngcc/\n\tPR rtl-optimization/108274\n\t* function.cc (thread_prologue_and_epilogue_insns): Also update the\n\tDF information for calls in a few more cases.", "tree": {"sha": "ff9a9dadaf7768d109ea8531e99f6046a5ebbc6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff9a9dadaf7768d109ea8531e99f6046a5ebbc6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561/comments", "author": null, "committer": null, "parents": [{"sha": "1a460d19ba0939e05b38befb6256f4f4bb416e0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a460d19ba0939e05b38befb6256f4f4bb416e0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a460d19ba0939e05b38befb6256f4f4bb416e0d"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "cfc4d2f74afee7c6ea911e722ca6c0a313edb0c6", "filename": "gcc/function.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561/gcc%2Ffunction.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561/gcc%2Ffunction.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.cc?ref=4fa6845b4b29f33cc7ea3d8ff49b61bb1f460561", "patch": "@@ -6266,7 +6266,10 @@ thread_prologue_and_epilogue_insns (void)\n \n   /* Threading the prologue and epilogue changes the artificial refs in the\n      entry and exit blocks, and may invalidate DF info for tail calls.  */\n-  if (optimize)\n+  if (optimize\n+      || flag_optimize_sibling_calls\n+      || flag_ipa_icf_functions\n+      || in_lto_p)\n     df_update_entry_exit_and_calls ();\n   else\n     {"}]}