{"sha": "2b868bf548107e361f31285b2dc2961194478072", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI4NjhiZjU0ODEwN2UzNjFmMzEyODViMmRjMjk2MTE5NDQ3ODA3Mg==", "commit": {"author": {"name": "Daniel Kraft", "email": "d@domob.eu", "date": "2010-07-29T09:06:53Z"}, "committer": {"name": "Daniel Kraft", "email": "domob@gcc.gnu.org", "date": "2010-07-29T09:06:53Z"}, "message": "re PR fortran/45117 (Segfault in resolve_array_bound)\n\n2010-07-29  Daniel Kraft  <d@domob.eu>\n\n\tPR fortran/45117\n\t* array.c (resolve_array_bound): Fix error message to properly handle\n\tnon-variable expressions.\n\nFrom-SVN: r162670", "tree": {"sha": "e9e7a5c29a070c17c7a37c78e616f304852df4c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9e7a5c29a070c17c7a37c78e616f304852df4c3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b868bf548107e361f31285b2dc2961194478072", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b868bf548107e361f31285b2dc2961194478072", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b868bf548107e361f31285b2dc2961194478072", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b868bf548107e361f31285b2dc2961194478072/comments", "author": {"login": "domob1812", "id": 4943644, "node_id": "MDQ6VXNlcjQ5NDM2NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/domob1812", "html_url": "https://github.com/domob1812", "followers_url": "https://api.github.com/users/domob1812/followers", "following_url": "https://api.github.com/users/domob1812/following{/other_user}", "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}", "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions", "organizations_url": "https://api.github.com/users/domob1812/orgs", "repos_url": "https://api.github.com/users/domob1812/repos", "events_url": "https://api.github.com/users/domob1812/events{/privacy}", "received_events_url": "https://api.github.com/users/domob1812/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "61869cc95e834cc533818a381f84c09c0e295829", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61869cc95e834cc533818a381f84c09c0e295829", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61869cc95e834cc533818a381f84c09c0e295829"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "4e3fb7dfb65d1db1777f93d67ec296e7832d34dd", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b868bf548107e361f31285b2dc2961194478072/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b868bf548107e361f31285b2dc2961194478072/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=2b868bf548107e361f31285b2dc2961194478072", "patch": "@@ -1,3 +1,9 @@\n+2010-07-29  Daniel Kraft  <d@domob.eu>\n+\n+\tPR fortran/45117\n+\t* array.c (resolve_array_bound): Fix error message to properly handle\n+\tnon-variable expressions.\n+\n 2010-07-28  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* decl.c (free_value): Also free repeat field."}, {"sha": "e45f7e45c7f3865c4baacb30096155ed75628091", "filename": "gcc/fortran/array.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b868bf548107e361f31285b2dc2961194478072/gcc%2Ffortran%2Farray.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b868bf548107e361f31285b2dc2961194478072/gcc%2Ffortran%2Farray.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farray.c?ref=2b868bf548107e361f31285b2dc2961194478072", "patch": "@@ -300,10 +300,14 @@ resolve_array_bound (gfc_expr *e, int check_constant)\n       || gfc_specification_expr (e) == FAILURE)\n     return FAILURE;\n \n-  if (check_constant && gfc_is_constant_expr (e) == 0)\n+  if (check_constant && !gfc_is_constant_expr (e))\n     {\n-      gfc_error (\"Variable '%s' at %L in this context must be constant\",\n-\t\t e->symtree->n.sym->name, &e->where);\n+      if (e->expr_type == EXPR_VARIABLE)\n+\tgfc_error (\"Variable '%s' at %L in this context must be constant\",\n+\t\t   e->symtree->n.sym->name, &e->where);\n+      else\n+\tgfc_error (\"Expression at %L in this context must be constant\",\n+\t\t   &e->where);\n       return FAILURE;\n     }\n "}]}