{"sha": "d699f03720fce57b319276226ac4a463a8538e9f", "node_id": "C_kwDOANBUbNoAKGQ2OTlmMDM3MjBmY2U1N2IzMTkyNzYyMjZhYzRhNDYzYTg1MzhlOWY", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@synopsys.com", "date": "2021-11-16T09:41:16Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@synopsys.com", "date": "2021-11-16T09:58:24Z"}, "message": "arc: Update arc specific tests\n\nUpdate assembly output test pattern. Take into consideration also for\nwhich platform we do execute the test (baremetal or linux).\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/arc/add_n-combine.c: Update test patterns.\n\t* gcc.target/arc/builtin_eh.c: Update test for linux platforms.\n\t* gcc.target/arc/mul64-1.c: Disable this test while running on\n\tlinux.\n\t* gcc.target/arc/tls-gd.c: Update matching patterns.\n\t* gcc.target/arc/tls-ie.c: Likewise.\n\t* gcc.target/arc/tls-ld.c: Likewise.\n\t* gcc.target/arc/uncached-8.c: Likewise.\n\nSigned-off-by: Claudiu Zissulescu <claziss@synopsys.com>", "tree": {"sha": "e13757158c57d952846b2ba68fafef150f35e0b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e13757158c57d952846b2ba68fafef150f35e0b2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d699f03720fce57b319276226ac4a463a8538e9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d699f03720fce57b319276226ac4a463a8538e9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d699f03720fce57b319276226ac4a463a8538e9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d699f03720fce57b319276226ac4a463a8538e9f/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23125fab7b16f1aa61dfec69092786dc6d215732", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23125fab7b16f1aa61dfec69092786dc6d215732", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23125fab7b16f1aa61dfec69092786dc6d215732"}], "stats": {"total": 28, "additions": 15, "deletions": 13}, "files": [{"sha": "84e261ece8fd544b51c5bc765d0204e82331586f", "filename": "gcc/testsuite/gcc.target/arc/add_n-combine.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fadd_n-combine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fadd_n-combine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fadd_n-combine.c?ref=d699f03720fce57b319276226ac4a463a8538e9f", "patch": "@@ -45,6 +45,6 @@ void f() {\n   a(at3.bn[bu]);\n }\n \n-/* { dg-final { scan-assembler \"add1\" } } */\n-/* { dg-final { scan-assembler \"add2\" } } */\n+/* { dg-final { scan-assembler \"@at1\\\\+1\" } } */\n+/* { dg-final { scan-assembler \"@at2\\\\+2\" } } */\n /* { dg-final { scan-assembler \"add3\" } } */"}, {"sha": "83f4f1d2ee090b5bec3023201189c98adaa9afa6", "filename": "gcc/testsuite/gcc.target/arc/builtin_eh.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fbuiltin_eh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fbuiltin_eh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fbuiltin_eh.c?ref=d699f03720fce57b319276226ac4a463a8538e9f", "patch": "@@ -19,4 +19,5 @@ foo (int x)\n /* { dg-final { scan-assembler \"r13\" } } */\n /* { dg-final { scan-assembler \"r0\" } } */\n /* { dg-final { scan-assembler \"fp\" } } */\n-/* { dg-final { scan-assembler \"fp,64\" } } */\n+/* { dg-final { scan-assembler \"fp,64\" { target { *-elf32-* } } } } */\n+/* { dg-final { scan-assembler \"fp,60\" { target { *-linux-* } } } } */"}, {"sha": "1a351feee870487ce8f651cd487d533e4b1333f8", "filename": "gcc/testsuite/gcc.target/arc/mul64-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fmul64-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fmul64-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fmul64-1.c?ref=d699f03720fce57b319276226ac4a463a8538e9f", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-skip-if \"MUL64 is ARC600 extension.\" { ! { clmcpu } } } */\n+/* { dg-skip-if \"MUL64 is ARC600 extension.\" { { ! { clmcpu } } || *-linux-* } } */\n /* { dg-options \"-O2 -mmul64 -mbig-endian -mcpu=arc600\" } */\n \n /* Check if mlo/mhi registers are correctly layout when we compile for"}, {"sha": "d02af9537f8763437ec306c5cae6a00916ffe49d", "filename": "gcc/testsuite/gcc.target/arc/tls-gd.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-gd.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-gd.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-gd.c?ref=d699f03720fce57b319276226ac4a463a8538e9f", "patch": "@@ -13,5 +13,5 @@ int *ae2 (void)\n   return &e2;\n }\n \n-/* { dg-final { scan-assembler \"add r0,pcl,@e2@tlsgd\" } } */\n-/* { dg-final { scan-assembler \"bl @__tls_get_addr@plt\" } } */\n+/* { dg-final { scan-assembler \"add\\\\s+r0,pcl,@e2@tlsgd\" } } */\n+/* { dg-final { scan-assembler \"bl\\\\s+@__tls_get_addr@plt\" } } */"}, {"sha": "f4ad635c4d33ddc49160acde2a5e2953885ace1e", "filename": "gcc/testsuite/gcc.target/arc/tls-ie.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-ie.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-ie.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-ie.c?ref=d699f03720fce57b319276226ac4a463a8538e9f", "patch": "@@ -13,5 +13,5 @@ int *ae2 (void)\n   return &e2;\n }\n \n-/* { dg-final { scan-assembler \"ld r0,\\\\\\[pcl,@e2@tlsie\\\\\\]\" } } */\n-/* { dg-final { scan-assembler \"add_s r0,r0,r25\" } } */\n+/* { dg-final { scan-assembler \"ld\\\\s+r0,\\\\\\[pcl,@e2@tlsie\\\\\\]\" } } */\n+/* { dg-final { scan-assembler \"add_s\\\\s+r0,r0,r25\" } } */"}, {"sha": "68ab9bf809c26a62bcadc095b254159283d92729", "filename": "gcc/testsuite/gcc.target/arc/tls-ld.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-ld.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-ld.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Ftls-ld.c?ref=d699f03720fce57b319276226ac4a463a8538e9f", "patch": "@@ -13,6 +13,6 @@ int *ae2 (void)\n   return &e2;\n }\n \n-/* { dg-final { scan-assembler \"add r0,pcl,@.tbss@tlsgd\" } } */\n-/* { dg-final { scan-assembler \"bl @__tls_get_addr@plt\" } } */\n-/* { dg-final { scan-assembler \"add_s r0,r0,@e2@dtpoff\" } } */\n+/* { dg-final { scan-assembler \"add\\\\s+r0,pcl,@.tbss@tlsgd\" } } */\n+/* { dg-final { scan-assembler \"bl\\\\s+@__tls_get_addr@plt\" } } */\n+/* { dg-final { scan-assembler \"add_s\\\\s+r0,r0,@e2@dtpoff\" } } */"}, {"sha": "b5ea2359a9a2cad8d0ab2304b67102bce0cc2d00", "filename": "gcc/testsuite/gcc.target/arc/uncached-8.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Funcached-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d699f03720fce57b319276226ac4a463a8538e9f/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Funcached-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Funcached-8.c?ref=d699f03720fce57b319276226ac4a463a8538e9f", "patch": "@@ -29,5 +29,6 @@ void bar (void)\n   x.c.b.a = 10;\n }\n \n-/* { dg-final { scan-assembler-times \"st\\.di\" 1 } } */\n-/* { dg-final { scan-assembler-times \"st\\.as\\.di\" 1 } } */\n+/* { dg-final { scan-assembler-times \"st\\.di\" 2 { target { *-linux-* } } } } */\n+/* { dg-final { scan-assembler-times \"st\\.di\" 1 { target { *-elf32-* } } } } */\n+/* { dg-final { scan-assembler-times \"st\\.as\\.di\" 1 { target { *-elf32-* } } } } */"}]}