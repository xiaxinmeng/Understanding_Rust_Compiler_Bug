{"sha": "36f287603b7d1be4a29dc98ef36deca013948527", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzZmMjg3NjAzYjdkMWJlNGEyOWRjOThlZjM2ZGVjYTAxMzk0ODUyNw==", "commit": {"author": {"name": "Chung-Ju Wu", "email": "jasonwucj@gmail.com", "date": "2017-11-16T09:38:11Z"}, "committer": {"name": "Chung-Ju Wu", "email": "jasonwucj@gcc.gnu.org", "date": "2017-11-16T09:38:11Z"}, "message": "Provide more constraints for future use.\n\ngcc/\n\t* config/nds32/constraints.md: Provide more constraints.\n\t* config/nds32/nds32.h (enum reg_class, REG_CLASS_NAMES,\n\tREG_CLASS_CONTENTS): Define R5_REG, R8_REG, and FRAME_POINTER_REG to\n\tsupport constraints usage.\n\nCo-Authored-By: Kito Cheng <kito.cheng@gmail.com>\n\nFrom-SVN: r254800", "tree": {"sha": "b31bb0b4c4f7127eb479bedf1efa39b4ec1f1794", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b31bb0b4c4f7127eb479bedf1efa39b4ec1f1794"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/36f287603b7d1be4a29dc98ef36deca013948527", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36f287603b7d1be4a29dc98ef36deca013948527", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36f287603b7d1be4a29dc98ef36deca013948527", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36f287603b7d1be4a29dc98ef36deca013948527/comments", "author": {"login": "jasonwucj", "id": 5520732, "node_id": "MDQ6VXNlcjU1MjA3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/5520732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonwucj", "html_url": "https://github.com/jasonwucj", "followers_url": "https://api.github.com/users/jasonwucj/followers", "following_url": "https://api.github.com/users/jasonwucj/following{/other_user}", "gists_url": "https://api.github.com/users/jasonwucj/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonwucj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonwucj/subscriptions", "organizations_url": "https://api.github.com/users/jasonwucj/orgs", "repos_url": "https://api.github.com/users/jasonwucj/repos", "events_url": "https://api.github.com/users/jasonwucj/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonwucj/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f968dc67fa039a8f426501eda0d3ecfaf51d49e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f968dc67fa039a8f426501eda0d3ecfaf51d49e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f968dc67fa039a8f426501eda0d3ecfaf51d49e1"}], "stats": {"total": 75, "additions": 72, "deletions": 3}, "files": [{"sha": "7ce100af439236999250b3a1744b8456942eade8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36f287603b7d1be4a29dc98ef36deca013948527/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36f287603b7d1be4a29dc98ef36deca013948527/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=36f287603b7d1be4a29dc98ef36deca013948527", "patch": "@@ -1,3 +1,11 @@\n+2017-11-16  Chung-Ju Wu  <jasonwucj@gmail.com>\n+\t    Kito Cheng  <kito.cheng@gmail.com>\n+\n+\t* config/nds32/constraints.md: Provide more constraints.\n+\t* config/nds32/nds32.h (enum reg_class, REG_CLASS_NAMES,\n+\tREG_CLASS_CONTENTS): Define R5_REG, R8_REG, and FRAME_POINTER_REG to\n+\tsupport constraints usage.\n+\n 2017-11-16  Chung-Ju Wu  <jasonwucj@gmail.com>\n \n \t* config/nds32/constants.md (UNSPEC_VOLATILE_FUNC_RETURN): Remove."}, {"sha": "565fc3bc339eae86958140428959827c8d5ee2fb", "filename": "gcc/config/nds32/constraints.md", "status": "modified", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36f287603b7d1be4a29dc98ef36deca013948527/gcc%2Fconfig%2Fnds32%2Fconstraints.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36f287603b7d1be4a29dc98ef36deca013948527/gcc%2Fconfig%2Fnds32%2Fconstraints.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Fconstraints.md?ref=36f287603b7d1be4a29dc98ef36deca013948527", "patch": "@@ -41,9 +41,52 @@\n (define_register_constraint \"t\" \"R15_TA_REG\"\n   \"Temporary Assist register $ta (i.e. $r15)\")\n \n+(define_register_constraint \"e\" \"R8_REG\"\n+  \"Function Entry register $r8)\")\n+\n (define_register_constraint \"k\" \"STACK_REG\"\n   \"Stack register $sp\")\n \n+(define_register_constraint \"v\" \"R5_REG\"\n+  \"Register $r5\")\n+\n+(define_register_constraint \"x\" \"FRAME_POINTER_REG\"\n+  \"Frame pointer register $fp\")\n+\n+(define_constraint \"Iv00\"\n+  \"Constant value 0\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival == 0\")))\n+\n+(define_constraint \"Iv01\"\n+  \"Constant value 1\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival == 1\")))\n+\n+(define_constraint \"Iv02\"\n+  \"Constant value 2\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival == 2\")))\n+\n+(define_constraint \"Iv04\"\n+  \"Constant value 4\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival == 4\")))\n+\n+(define_constraint \"Iv08\"\n+  \"Constant value 8\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival == 8\")))\n+\n+(define_constraint \"Iu01\"\n+  \"Unsigned immediate 1-bit value\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival == 1 || ival == 0\")))\n+\n+(define_constraint \"Iu02\"\n+  \"Unsigned immediate 2-bit value\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival < (1 << 2) && ival >= 0\")))\n \n (define_constraint \"Iu03\"\n   \"Unsigned immediate 3-bit value\"\n@@ -103,6 +146,11 @@\n        (match_test \"ival < (1 << 9) && ival >= 0\")))\n \n \n+(define_constraint \"Is08\"\n+  \"Signed immediate 8-bit value\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival < (1 << 7) && ival >= -(1 << 7)\")))\n+\n (define_constraint \"Is10\"\n   \"Signed immediate 10-bit value\"\n   (and (match_code \"const_int\")\n@@ -113,6 +161,10 @@\n   (and (match_code \"const_int\")\n        (match_test \"ival < (1 << 10) && ival >= -(1 << 10)\")))\n \n+(define_constraint \"Is14\"\n+  \"Signed immediate 14-bit value\"\n+  (and (match_code \"const_int\")\n+       (match_test \"ival < (1 << 13) && ival >= -(1 << 13)\")))\n \n (define_constraint \"Is15\"\n   \"Signed immediate 15-bit value\""}, {"sha": "6954eec17076799e87cee84289b8992b3876eb79", "filename": "gcc/config/nds32/nds32.h", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36f287603b7d1be4a29dc98ef36deca013948527/gcc%2Fconfig%2Fnds32%2Fnds32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36f287603b7d1be4a29dc98ef36deca013948527/gcc%2Fconfig%2Fnds32%2Fnds32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Fnds32.h?ref=36f287603b7d1be4a29dc98ef36deca013948527", "patch": "@@ -613,8 +613,11 @@ enum nds32_builtins\n enum reg_class\n {\n   NO_REGS,\n+  R5_REG,\n+  R8_REG,\n   R15_TA_REG,\n   STACK_REG,\n+  FRAME_POINTER_REG,\n   LOW_REGS,\n   MIDDLE_REGS,\n   HIGH_REGS,\n@@ -629,8 +632,11 @@ enum reg_class\n #define REG_CLASS_NAMES \\\n {                       \\\n   \"NO_REGS\",            \\\n+  \"R5_REG\",             \\\n+  \"R8_REG\",             \\\n   \"R15_TA_REG\",         \\\n   \"STACK_REG\",          \\\n+  \"FRAME_POINTER_REG\",  \\\n   \"LOW_REGS\",           \\\n   \"MIDDLE_REGS\",        \\\n   \"HIGH_REGS\",          \\\n@@ -641,9 +647,12 @@ enum reg_class\n \n #define REG_CLASS_CONTENTS \\\n {                                                            \\\n-  {0x00000000, 0x00000000}, /* NO_REGS     :              */ \\\n-  {0x00008000, 0x00000000}, /* R15_TA_REG  : 15           */ \\\n-  {0x80000000, 0x00000000}, /* STACK_REG   : 31           */ \\\n+  {0x00000000, 0x00000000}, /* NO_REGS                    */ \\\n+  {0x00000020, 0x00000000}, /* R5_REG            : 5      */ \\\n+  {0x00000100, 0x00000000}, /* R8_REG            : 8      */ \\\n+  {0x00008000, 0x00000000}, /* R15_TA_REG        : 15     */ \\\n+  {0x80000000, 0x00000000}, /* STACK_REG         : 31     */ \\\n+  {0x10000000, 0x00000000}, /* FRAME_POINTER_REG : 28     */ \\\n   {0x000000ff, 0x00000000}, /* LOW_REGS    : 0-7          */ \\\n   {0x000f0fff, 0x00000000}, /* MIDDLE_REGS : 0-11, 16-19  */ \\\n   {0xfff07000, 0x00000000}, /* HIGH_REGS   : 12-14, 20-31 */ \\"}]}