{"sha": "38ef6fb19d81a9da321e95f35940121e3cf858ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhlZjZmYjE5ZDgxYTlkYTMyMWU5NWYzNTk0MDEyMWUzY2Y4NThmZg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2018-10-21T20:28:56Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2018-10-21T20:28:56Z"}, "message": "i386: Enable AVX512 memory broadcast for FNMSUB\n\nMany AVX512 vector operations can broadcast from a scalar memory source.\nThis patch enables memory broadcast for FNMSUB operations.  In order to\nsupport AVX512 memory broadcast for FNMSUB, FNMSUB builtin functions are\nalso added, instead of passing the negated value to FMA builtin functions.\n\ngcc/\n\n\tPR target/72782\n\t* config/i386/avx512fintrin.h (_mm512_fnmsub_round_pd): Use\n\t__builtin_ia32_vfnmsubpd512_mask.\n\t(_mm512_mask_fnmsub_round_pd): Likewise.\n\t(_mm512_fnmsub_pd): Likewise.\n\t(_mm512_mask_fnmsub_pd): Likewise.\n\t(_mm512_maskz_fnmsub_round_pd): Use\n\t__builtin_ia32_vfnmsubpd512_maskz.\n\t(_mm512_maskz_fnmsub_pd): Likewise.\n\t(_mm512_fnmsub_round_ps): Use __builtin_ia32_vfnmsubps512_mask.\n\t(_mm512_mask_fnmsub_round_ps): Likewise.\n\t(_mm512_fnmsub_ps): Likewise.\n\t(_mm512_mask_fnmsub_ps): Likewise.\n\t(_mm512_maskz_fnmsub_round_ps): Use\n\t__builtin_ia32_vfnmsubps512_maskz.\n\t(_mm512_maskz_fnmsub_ps): Likewise.\n\t* config/i386/avx512vlintrin.h (_mm256_mask_fnmsub_pd): Use\n\t__builtin_ia32_vfnmsubpd256_mask.\n\t(_mm256_maskz_fnmsub_pd): Use __builtin_ia32_vfnmsubpd256_maskz.\n\t(_mm_mask_fnmsub_pd): Use __builtin_ia32_vfmaddpd128_mask\n\t(_mm_maskz_fnmsub_pd): Use __builtin_ia32_vfnmsubpd128_maskz.\n\t(_mm256_mask_fnmsub_ps): Use __builtin_ia32_vfnmsubps256_mask.\n\t(_mm256_mask_fnmsub_ps): Use __builtin_ia32_vfnmsubps256_mask.\n\t(_mm256_maskz_fnmsub_ps): Use __builtin_ia32_vfnmsubps256_maskz.\n\t(_mm_mask_fnmsub_ps): Use __builtin_ia32_vfnmsubps128_mask.\n\t(_mm_maskz_fnmsub_ps): Use __builtin_ia32_vfnmsubps128_maskz.\n\t* config/i386/fmaintrin.h (_mm_fnmsub_pd): Use\n\t__builtin_ia32_vfnmsubpd.\n\t(_mm256_fnmsub_pd): Use __builtin_ia32_vfnmsubpd256.\n\t(_mm_fnmsub_ps): Use __builtin_ia32_vfnmsubps.\n\t(_mm256_fnmsub_ps): Use __builtin_ia32_vfnmsubps256.\n\t(_mm_fnmsub_sd): Use __builtin_ia32_vfnmsubsd3.\n\t(_mm_fnmsub_ss): Use __builtin_ia32_vfnmsubss3.\n\t* config/i386/i386-builtin.def: Add\n\t__builtin_ia32_vfnmsubpd256_mask,\n\t__builtin_ia32_vfnmsubpd256_maskz,\n\t__builtin_ia32_vfnmsubpd128_mask,\n\t__builtin_ia32_vfnmsubpd128_maskz,\n\t__builtin_ia32_vfnmsubps256_mask,\n\t__builtin_ia32_vfnmsubps256_maskz,\n\t__builtin_ia32_vfnmsubps128_mask,\n\t__builtin_ia32_vfnmsubps128_maskz,\n\t__builtin_ia32_vfnmsubpd512_mask,\n\t__builtin_ia32_vfnmsubpd512_maskz,\n\t__builtin_ia32_vfnmsubps512_mask,\n\t__builtin_ia32_vfnmsubps512_maskz, __builtin_ia32_vfnmsubss3,\n\t__builtin_ia32_vfnmsubsd3, __builtin_ia32_vfnmsubps,\n\t__builtin_ia32_vfnmsubpd, __builtin_ia32_vfnmsubps256 and.\n\t__builtin_ia32_vfnmsubpd256.\n\t* config/i386/sse.md (fma4i_fnmsub_<mode>): New.\n\t(<avx512>_fnmsub_<mode>_maskz<round_expand_name>): Likewise.\n\t(*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_1):\n\tLikewise.\n\t(*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_2):\n\tLikewise.\n\t(*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_3):\n\tLikewise.\n\t(fmai_vmfnmsub_<mode><round_name>): Likewise.\n\ngcc/testsuite/\n\n\tPR target/72782\n\t* gcc.target/i386/avx512f-fnmsub-df-zmm-1.c: New test.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-1.c: Likewise.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-2.c: Likewise.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-3.c: Likewise.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-4.c: Likewise.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-5.c: Likewise.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-6.c: Likewise.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-7.c: Likewise.\n\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-8.c: Likewise.\n\t* gcc.target/i386/avx512vl-fnmsub-sf-xmm-1.c: Likewise.\n\t* gcc.target/i386/avx512vl-fnmsub-sf-ymm-1.c: Likewise.\n\nFrom-SVN: r265358", "tree": {"sha": "6905a839cf987be79e39384dba02f4862f012dd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6905a839cf987be79e39384dba02f4862f012dd6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38ef6fb19d81a9da321e95f35940121e3cf858ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38ef6fb19d81a9da321e95f35940121e3cf858ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38ef6fb19d81a9da321e95f35940121e3cf858ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38ef6fb19d81a9da321e95f35940121e3cf858ff/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5ca9497788cb44abe81529844ebc0077c0fc2b91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ca9497788cb44abe81529844ebc0077c0fc2b91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ca9497788cb44abe81529844ebc0077c0fc2b91"}], "stats": {"total": 438, "additions": 370, "deletions": 68}, "files": [{"sha": "0d11aa8e4ed3551714b02580d70642a685513904", "filename": "gcc/ChangeLog", "status": "modified", "additions": 61, "deletions": 0, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -1,3 +1,64 @@\n+2018-10-21  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/72782\n+\t* config/i386/avx512fintrin.h (_mm512_fnmsub_round_pd): Use\n+\t__builtin_ia32_vfnmsubpd512_mask.\n+\t(_mm512_mask_fnmsub_round_pd): Likewise.\n+\t(_mm512_fnmsub_pd): Likewise.\n+\t(_mm512_mask_fnmsub_pd): Likewise.\n+\t(_mm512_maskz_fnmsub_round_pd): Use\n+\t__builtin_ia32_vfnmsubpd512_maskz.\n+\t(_mm512_maskz_fnmsub_pd): Likewise.\n+\t(_mm512_fnmsub_round_ps): Use __builtin_ia32_vfnmsubps512_mask.\n+\t(_mm512_mask_fnmsub_round_ps): Likewise.\n+\t(_mm512_fnmsub_ps): Likewise.\n+\t(_mm512_mask_fnmsub_ps): Likewise.\n+\t(_mm512_maskz_fnmsub_round_ps): Use\n+\t__builtin_ia32_vfnmsubps512_maskz.\n+\t(_mm512_maskz_fnmsub_ps): Likewise.\n+\t* config/i386/avx512vlintrin.h (_mm256_mask_fnmsub_pd): Use\n+\t__builtin_ia32_vfnmsubpd256_mask.\n+\t(_mm256_maskz_fnmsub_pd): Use __builtin_ia32_vfnmsubpd256_maskz.\n+\t(_mm_mask_fnmsub_pd): Use __builtin_ia32_vfmaddpd128_mask\n+\t(_mm_maskz_fnmsub_pd): Use __builtin_ia32_vfnmsubpd128_maskz.\n+\t(_mm256_mask_fnmsub_ps): Use __builtin_ia32_vfnmsubps256_mask.\n+\t(_mm256_mask_fnmsub_ps): Use __builtin_ia32_vfnmsubps256_mask.\n+\t(_mm256_maskz_fnmsub_ps): Use __builtin_ia32_vfnmsubps256_maskz.\n+\t(_mm_mask_fnmsub_ps): Use __builtin_ia32_vfnmsubps128_mask.\n+\t(_mm_maskz_fnmsub_ps): Use __builtin_ia32_vfnmsubps128_maskz.\n+\t* config/i386/fmaintrin.h (_mm_fnmsub_pd): Use\n+\t__builtin_ia32_vfnmsubpd.\n+\t(_mm256_fnmsub_pd): Use __builtin_ia32_vfnmsubpd256.\n+\t(_mm_fnmsub_ps): Use __builtin_ia32_vfnmsubps.\n+\t(_mm256_fnmsub_ps): Use __builtin_ia32_vfnmsubps256.\n+\t(_mm_fnmsub_sd): Use __builtin_ia32_vfnmsubsd3.\n+\t(_mm_fnmsub_ss): Use __builtin_ia32_vfnmsubss3.\n+\t* config/i386/i386-builtin.def: Add\n+\t__builtin_ia32_vfnmsubpd256_mask,\n+\t__builtin_ia32_vfnmsubpd256_maskz,\n+\t__builtin_ia32_vfnmsubpd128_mask,\n+\t__builtin_ia32_vfnmsubpd128_maskz,\n+\t__builtin_ia32_vfnmsubps256_mask,\n+\t__builtin_ia32_vfnmsubps256_maskz,\n+\t__builtin_ia32_vfnmsubps128_mask,\n+\t__builtin_ia32_vfnmsubps128_maskz,\n+\t__builtin_ia32_vfnmsubpd512_mask,\n+\t__builtin_ia32_vfnmsubpd512_maskz,\n+\t__builtin_ia32_vfnmsubps512_mask,\n+\t__builtin_ia32_vfnmsubps512_maskz, __builtin_ia32_vfnmsubss3,\n+\t__builtin_ia32_vfnmsubsd3, __builtin_ia32_vfnmsubps,\n+\t__builtin_ia32_vfnmsubpd, __builtin_ia32_vfnmsubps256 and.\n+\t__builtin_ia32_vfnmsubpd256.\n+\t* config/i386/sse.md (fma4i_fnmsub_<mode>): New.\n+\t(<avx512>_fnmsub_<mode>_maskz<round_expand_name>): Likewise.\n+\t(*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_1):\n+\tLikewise.\n+\t(*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_2):\n+\tLikewise.\n+\t(*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_3):\n+\tLikewise.\n+\t(fmai_vmfnmsub_<mode><round_name>): Likewise.\n+\n 2018-10-21  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/72782"}, {"sha": "001d610bc814c2f6018cd92771f6f80cba00d4cb", "filename": "gcc/config/i386/avx512fintrin.h", "status": "modified", "additions": 40, "deletions": 40, "changes": 80, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Favx512fintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Favx512fintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Favx512fintrin.h?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -3699,10 +3699,10 @@ extern __inline __m512d\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_fnmsub_round_pd (__m512d __A, __m512d __B, __m512d __C, const int __R)\n {\n-  return (__m512d) __builtin_ia32_vfmaddpd512_mask (-(__v8df) __A,\n-\t\t\t\t\t\t    (__v8df) __B,\n-\t\t\t\t\t\t    -(__v8df) __C,\n-\t\t\t\t\t\t    (__mmask8) -1, __R);\n+  return (__m512d) __builtin_ia32_vfnmsubpd512_mask ((__v8df) __A,\n+\t\t\t\t\t\t     (__v8df) __B,\n+\t\t\t\t\t\t     (__v8df) __C,\n+\t\t\t\t\t\t     (__mmask8) -1, __R);\n }\n \n extern __inline __m512d\n@@ -3732,20 +3732,20 @@ __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_maskz_fnmsub_round_pd (__mmask8 __U, __m512d __A, __m512d __B,\n \t\t\t      __m512d __C, const int __R)\n {\n-  return (__m512d) __builtin_ia32_vfmaddpd512_maskz (-(__v8df) __A,\n-\t\t\t\t\t\t     (__v8df) __B,\n-\t\t\t\t\t\t     -(__v8df) __C,\n-\t\t\t\t\t\t     (__mmask8) __U, __R);\n+  return (__m512d) __builtin_ia32_vfnmsubpd512_maskz ((__v8df) __A,\n+\t\t\t\t\t\t      (__v8df) __B,\n+\t\t\t\t\t\t      (__v8df) __C,\n+\t\t\t\t\t\t      (__mmask8) __U, __R);\n }\n \n extern __inline __m512\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_fnmsub_round_ps (__m512 __A, __m512 __B, __m512 __C, const int __R)\n {\n-  return (__m512) __builtin_ia32_vfmaddps512_mask (-(__v16sf) __A,\n-\t\t\t\t\t\t   (__v16sf) __B,\n-\t\t\t\t\t\t   -(__v16sf) __C,\n-\t\t\t\t\t\t   (__mmask16) -1, __R);\n+  return (__m512) __builtin_ia32_vfnmsubps512_mask ((__v16sf) __A,\n+\t\t\t\t\t\t    (__v16sf) __B,\n+\t\t\t\t\t\t    (__v16sf) __C,\n+\t\t\t\t\t\t    (__mmask16) -1, __R);\n }\n \n extern __inline __m512\n@@ -3775,10 +3775,10 @@ __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_maskz_fnmsub_round_ps (__mmask16 __U, __m512 __A, __m512 __B,\n \t\t\t      __m512 __C, const int __R)\n {\n-  return (__m512) __builtin_ia32_vfmaddps512_maskz (-(__v16sf) __A,\n-\t\t\t\t\t\t    (__v16sf) __B,\n-\t\t\t\t\t\t    -(__v16sf) __C,\n-\t\t\t\t\t\t    (__mmask16) __U, __R);\n+  return (__m512) __builtin_ia32_vfnmsubps512_maskz ((__v16sf) __A,\n+\t\t\t\t\t\t     (__v16sf) __B,\n+\t\t\t\t\t\t     (__v16sf) __C,\n+\t\t\t\t\t\t     (__mmask16) __U, __R);\n }\n #else\n #define _mm512_fmadd_round_pd(A, B, C, R)            \\\n@@ -3902,7 +3902,7 @@ _mm512_maskz_fnmsub_round_ps (__mmask16 __U, __m512 __A, __m512 __B,\n     (__m512)__builtin_ia32_vfnmaddps512_maskz(A, B, C, U, R)\n \n #define _mm512_fnmsub_round_pd(A, B, C, R)            \\\n-    (__m512d)__builtin_ia32_vfmaddpd512_mask(-(A), B, -(C), -1, R)\n+    (__m512d)__builtin_ia32_vfnmsubpd512_mask(A, B, C, -1, R)\n \n #define _mm512_mask_fnmsub_round_pd(A, U, B, C, R)    \\\n     (__m512d)__builtin_ia32_vfnmsubpd512_mask(A, B, C, U, R)\n@@ -3911,10 +3911,10 @@ _mm512_maskz_fnmsub_round_ps (__mmask16 __U, __m512 __A, __m512 __B,\n     (__m512d)__builtin_ia32_vfnmsubpd512_mask3(A, B, C, U, R)\n \n #define _mm512_maskz_fnmsub_round_pd(U, A, B, C, R)   \\\n-    (__m512d)__builtin_ia32_vfmaddpd512_maskz(-(A), B, -(C), U, R)\n+    (__m512d)__builtin_ia32_vfnmsubpd512_maskz(A, B, C, U, R)\n \n #define _mm512_fnmsub_round_ps(A, B, C, R)            \\\n-    (__m512)__builtin_ia32_vfmaddps512_mask(-(A), B, -(C), -1, R)\n+    (__m512)__builtin_ia32_vfnmsubps512_mask(A, B, C, -1, R)\n \n #define _mm512_mask_fnmsub_round_ps(A, U, B, C, R)    \\\n     (__m512)__builtin_ia32_vfnmsubps512_mask(A, B, C, U, R)\n@@ -3923,7 +3923,7 @@ _mm512_maskz_fnmsub_round_ps (__mmask16 __U, __m512 __A, __m512 __B,\n     (__m512)__builtin_ia32_vfnmsubps512_mask3(A, B, C, U, R)\n \n #define _mm512_maskz_fnmsub_round_ps(U, A, B, C, R)   \\\n-    (__m512)__builtin_ia32_vfmaddps512_maskz(-(A), B, -(C), U, R)\n+    (__m512)__builtin_ia32_vfnmsubps512_maskz(A, B, C, U, R)\n #endif\n \n extern __inline __m512i\n@@ -12768,11 +12768,11 @@ extern __inline __m512d\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_fnmsub_pd (__m512d __A, __m512d __B, __m512d __C)\n {\n-  return (__m512d) __builtin_ia32_vfmaddpd512_mask (-(__v8df) __A,\n-\t\t\t\t\t\t    (__v8df) __B,\n-\t\t\t\t\t\t    -(__v8df) __C,\n-\t\t\t\t\t\t    (__mmask8) -1,\n-\t\t\t\t\t\t    _MM_FROUND_CUR_DIRECTION);\n+  return (__m512d) __builtin_ia32_vfnmsubpd512_mask ((__v8df) __A,\n+\t\t\t\t\t\t     (__v8df) __B,\n+\t\t\t\t\t\t     (__v8df) __C,\n+\t\t\t\t\t\t     (__mmask8) -1,\n+\t\t\t\t\t\t     _MM_FROUND_CUR_DIRECTION);\n }\n \n extern __inline __m512d\n@@ -12801,22 +12801,22 @@ extern __inline __m512d\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_maskz_fnmsub_pd (__mmask8 __U, __m512d __A, __m512d __B, __m512d __C)\n {\n-  return (__m512d) __builtin_ia32_vfmaddpd512_maskz (-(__v8df) __A,\n-\t\t\t\t\t\t     (__v8df) __B,\n-\t\t\t\t\t\t     -(__v8df) __C,\n-\t\t\t\t\t\t     (__mmask8) __U,\n-\t\t\t\t\t\t     _MM_FROUND_CUR_DIRECTION);\n+  return (__m512d) __builtin_ia32_vfnmsubpd512_maskz ((__v8df) __A,\n+\t\t\t\t\t\t      (__v8df) __B,\n+\t\t\t\t\t\t      (__v8df) __C,\n+\t\t\t\t\t\t      (__mmask8) __U,\n+\t\t\t\t\t\t      _MM_FROUND_CUR_DIRECTION);\n }\n \n extern __inline __m512\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_fnmsub_ps (__m512 __A, __m512 __B, __m512 __C)\n {\n-  return (__m512) __builtin_ia32_vfmaddps512_mask (-(__v16sf) __A,\n-\t\t\t\t\t\t   (__v16sf) __B,\n-\t\t\t\t\t\t   -(__v16sf) __C,\n-\t\t\t\t\t\t   (__mmask16) -1,\n-\t\t\t\t\t\t   _MM_FROUND_CUR_DIRECTION);\n+  return (__m512) __builtin_ia32_vfnmsubps512_mask ((__v16sf) __A,\n+\t\t\t\t\t\t    (__v16sf) __B,\n+\t\t\t\t\t\t    (__v16sf) __C,\n+\t\t\t\t\t\t    (__mmask16) -1,\n+\t\t\t\t\t\t    _MM_FROUND_CUR_DIRECTION);\n }\n \n extern __inline __m512\n@@ -12845,11 +12845,11 @@ extern __inline __m512\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_maskz_fnmsub_ps (__mmask16 __U, __m512 __A, __m512 __B, __m512 __C)\n {\n-  return (__m512) __builtin_ia32_vfmaddps512_maskz (-(__v16sf) __A,\n-\t\t\t\t\t\t    (__v16sf) __B,\n-\t\t\t\t\t\t    -(__v16sf) __C,\n-\t\t\t\t\t\t    (__mmask16) __U,\n-\t\t\t\t\t\t    _MM_FROUND_CUR_DIRECTION);\n+  return (__m512) __builtin_ia32_vfnmsubps512_maskz ((__v16sf) __A,\n+\t\t\t\t\t\t     (__v16sf) __B,\n+\t\t\t\t\t\t     (__v16sf) __C,\n+\t\t\t\t\t\t     (__mmask16) __U,\n+\t\t\t\t\t\t     _MM_FROUND_CUR_DIRECTION);\n }\n \n extern __inline __m256i"}, {"sha": "7ff78010689c8c2e0de0de98a48614bd363b35aa", "filename": "gcc/config/i386/avx512vlintrin.h", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Favx512vlintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Favx512vlintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Favx512vlintrin.h?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -4665,10 +4665,10 @@ __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm256_maskz_fnmsub_pd (__mmask8 __U, __m256d __A, __m256d __B,\n \t\t\t__m256d __C)\n {\n-  return (__m256d) __builtin_ia32_vfmaddpd256_maskz (-(__v4df) __A,\n-\t\t\t\t\t\t     (__v4df) __B,\n-\t\t\t\t\t\t     -(__v4df) __C,\n-\t\t\t\t\t\t     (__mmask8) __U);\n+  return (__m256d) __builtin_ia32_vfnmsubpd256_maskz ((__v4df) __A,\n+\t\t\t\t\t\t      (__v4df) __B,\n+\t\t\t\t\t\t      (__v4df) __C,\n+\t\t\t\t\t\t      (__mmask8) __U);\n }\n \n extern __inline __m128d\n@@ -4698,10 +4698,10 @@ __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm_maskz_fnmsub_pd (__mmask8 __U, __m128d __A, __m128d __B,\n \t\t     __m128d __C)\n {\n-  return (__m128d) __builtin_ia32_vfmaddpd128_maskz (-(__v2df) __A,\n-\t\t\t\t\t\t     (__v2df) __B,\n-\t\t\t\t\t\t     -(__v2df) __C,\n-\t\t\t\t\t\t     (__mmask8) __U);\n+  return (__m128d) __builtin_ia32_vfnmsubpd128_maskz ((__v2df) __A,\n+\t\t\t\t\t\t      (__v2df) __B,\n+\t\t\t\t\t\t      (__v2df) __C,\n+\t\t\t\t\t\t      (__mmask8) __U);\n }\n \n extern __inline __m256\n@@ -4731,10 +4731,10 @@ __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm256_maskz_fnmsub_ps (__mmask8 __U, __m256 __A, __m256 __B,\n \t\t\t__m256 __C)\n {\n-  return (__m256) __builtin_ia32_vfmaddps256_maskz (-(__v8sf) __A,\n-\t\t\t\t\t\t    (__v8sf) __B,\n-\t\t\t\t\t\t    -(__v8sf) __C,\n-\t\t\t\t\t\t    (__mmask8) __U);\n+  return (__m256) __builtin_ia32_vfnmsubps256_maskz ((__v8sf) __A,\n+\t\t\t\t\t\t     (__v8sf) __B,\n+\t\t\t\t\t\t     (__v8sf) __C,\n+\t\t\t\t\t\t     (__mmask8) __U);\n }\n \n extern __inline __m128\n@@ -4761,10 +4761,10 @@ extern __inline __m128\n __attribute__ ((__gnu_inline__, __always_inline__, __artificial__))\n _mm_maskz_fnmsub_ps (__mmask8 __U, __m128 __A, __m128 __B, __m128 __C)\n {\n-  return (__m128) __builtin_ia32_vfmaddps128_maskz (-(__v4sf) __A,\n-\t\t\t\t\t\t    (__v4sf) __B,\n-\t\t\t\t\t\t    -(__v4sf) __C,\n-\t\t\t\t\t\t    (__mmask8) __U);\n+  return (__m128) __builtin_ia32_vfnmsubps128_maskz ((__v4sf) __A,\n+\t\t\t\t\t\t     (__v4sf) __B,\n+\t\t\t\t\t\t     (__v4sf) __C,\n+\t\t\t\t\t\t     (__mmask8) __U);\n }\n \n extern __inline __m128i"}, {"sha": "4f13e81cf34652ca2a3b97073e19a65562b11a8d", "filename": "gcc/config/i386/fmaintrin.h", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Ffmaintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Ffmaintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffmaintrin.h?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -182,48 +182,48 @@ extern __inline __m128d\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm_fnmsub_pd (__m128d __A, __m128d __B, __m128d __C)\n {\n-  return (__m128d)__builtin_ia32_vfmaddpd (-(__v2df)__A, (__v2df)__B,\n-                                           -(__v2df)__C);\n+  return (__m128d)__builtin_ia32_vfnmsubpd ((__v2df)__A, (__v2df)__B,\n+\t\t\t\t\t    (__v2df)__C);\n }\n \n extern __inline __m256d\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm256_fnmsub_pd (__m256d __A, __m256d __B, __m256d __C)\n {\n-  return (__m256d)__builtin_ia32_vfmaddpd256 (-(__v4df)__A, (__v4df)__B,\n-                                              -(__v4df)__C);\n+  return (__m256d)__builtin_ia32_vfnmsubpd256 ((__v4df)__A, (__v4df)__B,\n+\t\t\t\t\t       (__v4df)__C);\n }\n \n extern __inline __m128\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm_fnmsub_ps (__m128 __A, __m128 __B, __m128 __C)\n {\n-  return (__m128)__builtin_ia32_vfmaddps (-(__v4sf)__A, (__v4sf)__B,\n-                                          -(__v4sf)__C);\n+  return (__m128)__builtin_ia32_vfnmsubps ((__v4sf)__A, (__v4sf)__B,\n+\t\t\t\t\t   (__v4sf)__C);\n }\n \n extern __inline __m256\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm256_fnmsub_ps (__m256 __A, __m256 __B, __m256 __C)\n {\n-  return (__m256)__builtin_ia32_vfmaddps256 (-(__v8sf)__A, (__v8sf)__B,\n-                                             -(__v8sf)__C);\n+  return (__m256)__builtin_ia32_vfnmsubps256 ((__v8sf)__A, (__v8sf)__B,\n+\t\t\t\t\t      (__v8sf)__C);\n }\n \n extern __inline __m128d\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm_fnmsub_sd (__m128d __A, __m128d __B, __m128d __C)\n {\n-  return (__m128d)__builtin_ia32_vfmaddsd3 ((__v2df)__A, -(__v2df)__B,\n-                                            -(__v2df)__C);\n+  return (__m128d)__builtin_ia32_vfnmsubsd3 ((__v2df)__A, (__v2df)__B,\n+\t\t\t\t\t     (__v2df)__C);\n }\n \n extern __inline __m128\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm_fnmsub_ss (__m128 __A, __m128 __B, __m128 __C)\n {\n-  return (__m128)__builtin_ia32_vfmaddss3 ((__v4sf)__A, -(__v4sf)__B,\n-                                           -(__v4sf)__C);\n+  return (__m128)__builtin_ia32_vfnmsubss3 ((__v4sf)__A, (__v4sf)__B,\n+\t\t\t\t\t    (__v4sf)__C);\n }\n \n extern __inline __m128d"}, {"sha": "df0f7e975ac22a0b2ac4ea7d8dc3410e2a1d9b59", "filename": "gcc/config/i386/i386-builtin.def", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Fi386-builtin.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Fi386-builtin.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-builtin.def?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -1931,12 +1931,16 @@ BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmadd_v4sf_mask3, \"__builtin\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmadd_v4sf_maskz, \"__builtin_ia32_vfnmaddps128_maskz\", IX86_BUILTIN_VFNMADDPS128_MASKZ, UNKNOWN, (int) V4SF_FTYPE_V4SF_V4SF_V4SF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v4df_mask, \"__builtin_ia32_vfnmsubpd256_mask\", IX86_BUILTIN_VFNMSUBPD256_MASK, UNKNOWN, (int) V4DF_FTYPE_V4DF_V4DF_V4DF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v4df_mask3, \"__builtin_ia32_vfnmsubpd256_mask3\", IX86_BUILTIN_VFNMSUBPD256_MASK3, UNKNOWN, (int) V4DF_FTYPE_V4DF_V4DF_V4DF_UQI)\n+BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v4df_maskz, \"__builtin_ia32_vfnmsubpd256_maskz\", IX86_BUILTIN_VFNMSUBPD256_MASKZ, UNKNOWN, (int) V4DF_FTYPE_V4DF_V4DF_V4DF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v2df_mask, \"__builtin_ia32_vfnmsubpd128_mask\", IX86_BUILTIN_VFNMSUBPD128_MASK, UNKNOWN, (int) V2DF_FTYPE_V2DF_V2DF_V2DF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v2df_mask3, \"__builtin_ia32_vfnmsubpd128_mask3\", IX86_BUILTIN_VFNMSUBPD128_MASK3, UNKNOWN, (int) V2DF_FTYPE_V2DF_V2DF_V2DF_UQI)\n+BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v2df_maskz, \"__builtin_ia32_vfnmsubpd128_maskz\", IX86_BUILTIN_VFNMSUBPD128_MASKZ, UNKNOWN, (int) V2DF_FTYPE_V2DF_V2DF_V2DF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v8sf_mask, \"__builtin_ia32_vfnmsubps256_mask\", IX86_BUILTIN_VFNMSUBPS256_MASK, UNKNOWN, (int) V8SF_FTYPE_V8SF_V8SF_V8SF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v8sf_mask3, \"__builtin_ia32_vfnmsubps256_mask3\", IX86_BUILTIN_VFNMSUBPS256_MASK3, UNKNOWN, (int) V8SF_FTYPE_V8SF_V8SF_V8SF_UQI)\n+BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v8sf_maskz, \"__builtin_ia32_vfnmsubps256_maskz\", IX86_BUILTIN_VFNMSUBPS256_MASKZ, UNKNOWN, (int) V8SF_FTYPE_V8SF_V8SF_V8SF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v4sf_mask, \"__builtin_ia32_vfnmsubps128_mask\", IX86_BUILTIN_VFNMSUBPS128_MASK, UNKNOWN, (int) V4SF_FTYPE_V4SF_V4SF_V4SF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v4sf_mask3, \"__builtin_ia32_vfnmsubps128_mask3\", IX86_BUILTIN_VFNMSUBPS128_MASK3, UNKNOWN, (int) V4SF_FTYPE_V4SF_V4SF_V4SF_UQI)\n+BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fnmsub_v4sf_maskz, \"__builtin_ia32_vfnmsubps128_maskz\", IX86_BUILTIN_VFNMSUBPS128_MASKZ, UNKNOWN, (int) V4SF_FTYPE_V4SF_V4SF_V4SF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fmaddsub_v4df_mask, \"__builtin_ia32_vfmaddsubpd256_mask\", IX86_BUILTIN_VFMADDSUBPD256_MASK, UNKNOWN, (int) V4DF_FTYPE_V4DF_V4DF_V4DF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fmaddsub_v4df_mask3, \"__builtin_ia32_vfmaddsubpd256_mask3\", IX86_BUILTIN_VFMADDSUBPD256_MASK3, UNKNOWN, (int) V4DF_FTYPE_V4DF_V4DF_V4DF_UQI)\n BDESC (OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_fmaddsub_v4df_maskz, \"__builtin_ia32_vfmaddsubpd256_maskz\", IX86_BUILTIN_VFMADDSUBPD256_MASKZ, UNKNOWN, (int) V4DF_FTYPE_V4DF_V4DF_V4DF_UQI)\n@@ -2800,8 +2804,10 @@ BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmadd_v16sf_mask3_round, \"__bu\n BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmadd_v16sf_maskz_round, \"__builtin_ia32_vfnmaddps512_maskz\", IX86_BUILTIN_VFNMADDPS512_MASKZ, UNKNOWN, (int) V16SF_FTYPE_V16SF_V16SF_V16SF_HI_INT)\n BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmsub_v8df_mask_round, \"__builtin_ia32_vfnmsubpd512_mask\", IX86_BUILTIN_VFNMSUBPD512_MASK, UNKNOWN, (int) V8DF_FTYPE_V8DF_V8DF_V8DF_UQI_INT)\n BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmsub_v8df_mask3_round, \"__builtin_ia32_vfnmsubpd512_mask3\", IX86_BUILTIN_VFNMSUBPD512_MASK3, UNKNOWN, (int) V8DF_FTYPE_V8DF_V8DF_V8DF_UQI_INT)\n+BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmsub_v8df_maskz_round, \"__builtin_ia32_vfnmsubpd512_maskz\", IX86_BUILTIN_VFNMSUBPD512_MASKZ, UNKNOWN, (int) V8DF_FTYPE_V8DF_V8DF_V8DF_UQI_INT)\n BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmsub_v16sf_mask_round, \"__builtin_ia32_vfnmsubps512_mask\", IX86_BUILTIN_VFNMSUBPS512_MASK, UNKNOWN, (int) V16SF_FTYPE_V16SF_V16SF_V16SF_HI_INT)\n BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmsub_v16sf_mask3_round, \"__builtin_ia32_vfnmsubps512_mask3\", IX86_BUILTIN_VFNMSUBPS512_MASK3, UNKNOWN, (int) V16SF_FTYPE_V16SF_V16SF_V16SF_HI_INT)\n+BDESC (OPTION_MASK_ISA_AVX512F, CODE_FOR_avx512f_fnmsub_v16sf_maskz_round, \"__builtin_ia32_vfnmsubps512_maskz\", IX86_BUILTIN_VFNMSUBPS512_MASKZ, UNKNOWN, (int) V16SF_FTYPE_V16SF_V16SF_V16SF_HI_INT)\n \n /* AVX512ER */\n BDESC (OPTION_MASK_ISA_AVX512ER, CODE_FOR_avx512er_exp2v8df_mask_round, \"__builtin_ia32_exp2pd_mask\", IX86_BUILTIN_EXP2PD_MASK, UNKNOWN, (int) V8DF_FTYPE_V8DF_V8DF_QI_INT)\n@@ -2885,6 +2891,8 @@ BDESC (OPTION_MASK_ISA_FMA, CODE_FOR_fmai_vmfmsub_v4sf, \"__builtin_ia32_vfmsubss\n BDESC (OPTION_MASK_ISA_FMA, CODE_FOR_fmai_vmfmsub_v2df, \"__builtin_ia32_vfmsubsd3\", IX86_BUILTIN_VFMSUBSD3, UNKNOWN, (int)MULTI_ARG_3_DF)\n BDESC (OPTION_MASK_ISA_FMA, CODE_FOR_fmai_vmfnmadd_v4sf, \"__builtin_ia32_vfnmaddss3\", IX86_BUILTIN_VFNMADDSS3, UNKNOWN, (int)MULTI_ARG_3_SF)\n BDESC (OPTION_MASK_ISA_FMA, CODE_FOR_fmai_vmfnmadd_v2df, \"__builtin_ia32_vfnmaddsd3\", IX86_BUILTIN_VFNMADDSD3, UNKNOWN, (int)MULTI_ARG_3_DF)\n+BDESC (OPTION_MASK_ISA_FMA, CODE_FOR_fmai_vmfnmsub_v4sf, \"__builtin_ia32_vfnmsubss3\", IX86_BUILTIN_VFNMSUBSS3, UNKNOWN, (int)MULTI_ARG_3_SF)\n+BDESC (OPTION_MASK_ISA_FMA, CODE_FOR_fmai_vmfnmsub_v2df, \"__builtin_ia32_vfnmsubsd3\", IX86_BUILTIN_VFNMSUBSD3, UNKNOWN, (int)MULTI_ARG_3_DF)\n \n BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fmadd_v4sf, \"__builtin_ia32_vfmaddps\", IX86_BUILTIN_VFMADDPS, UNKNOWN, (int)MULTI_ARG_3_SF)\n BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fmadd_v2df, \"__builtin_ia32_vfmaddpd\", IX86_BUILTIN_VFMADDPD, UNKNOWN, (int)MULTI_ARG_3_DF)\n@@ -2898,6 +2906,10 @@ BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmadd_v4sf, \"\n BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmadd_v2df, \"__builtin_ia32_vfnmaddpd\", IX86_BUILTIN_VFNMADDPD, UNKNOWN, (int)MULTI_ARG_3_DF)\n BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmadd_v8sf, \"__builtin_ia32_vfnmaddps256\", IX86_BUILTIN_VFNMADDPS256, UNKNOWN, (int)MULTI_ARG_3_SF2)\n BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmadd_v4df, \"__builtin_ia32_vfnmaddpd256\", IX86_BUILTIN_VFNMADDPD256, UNKNOWN, (int)MULTI_ARG_3_DF2)\n+BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmsub_v4sf, \"__builtin_ia32_vfnmsubps\", IX86_BUILTIN_VFNMSUBPS, UNKNOWN, (int)MULTI_ARG_3_SF)\n+BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmsub_v2df, \"__builtin_ia32_vfnmsubpd\", IX86_BUILTIN_VFNMSUBPD, UNKNOWN, (int)MULTI_ARG_3_DF)\n+BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmsub_v8sf, \"__builtin_ia32_vfnmsubps256\", IX86_BUILTIN_VFNMSUBPS256, UNKNOWN, (int)MULTI_ARG_3_SF2)\n+BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fma4i_fnmsub_v4df, \"__builtin_ia32_vfnmsubpd256\", IX86_BUILTIN_VFNMSUBPD256, UNKNOWN, (int)MULTI_ARG_3_DF2)\n \n BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fmaddsub_v4sf, \"__builtin_ia32_vfmaddsubps\", IX86_BUILTIN_VFMADDSUBPS, UNKNOWN, (int)MULTI_ARG_3_SF)\n BDESC (OPTION_MASK_ISA_FMA | OPTION_MASK_ISA_FMA4, CODE_FOR_fmaddsub_v2df, \"__builtin_ia32_vfmaddsubpd\", IX86_BUILTIN_VFMADDSUBPD, UNKNOWN, (int)MULTI_ARG_3_DF)"}, {"sha": "28cecbf9a091a79fa97247e7e102f92bcf4600a1", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 82, "deletions": 0, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -3764,6 +3764,15 @@\n \t  (match_operand:FMAMODE_AVX512 2 \"nonimmediate_operand\")\n \t  (match_operand:FMAMODE_AVX512 3 \"nonimmediate_operand\")))])\n \n+(define_expand \"fma4i_fnmsub_<mode>\"\n+  [(set (match_operand:FMAMODE_AVX512 0 \"register_operand\")\n+\t(fma:FMAMODE_AVX512\n+\t  (neg:FMAMODE_AVX512\n+\t    (match_operand:FMAMODE_AVX512 1 \"nonimmediate_operand\"))\n+\t  (match_operand:FMAMODE_AVX512 2 \"nonimmediate_operand\")\n+\t  (neg:FMAMODE_AVX512\n+\t    (match_operand:FMAMODE_AVX512 3 \"nonimmediate_operand\"))))])\n+\n (define_expand \"<avx512>_fmadd_<mode>_maskz<round_expand_name>\"\n   [(match_operand:VF_AVX512VL 0 \"register_operand\")\n    (match_operand:VF_AVX512VL 1 \"<round_expand_nimm_predicate>\")\n@@ -4147,6 +4156,20 @@\n    (set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n+(define_expand \"<avx512>_fnmsub_<mode>_maskz<round_expand_name>\"\n+  [(match_operand:VF_AVX512VL 0 \"register_operand\")\n+   (match_operand:VF_AVX512VL 1 \"<round_expand_nimm_predicate>\")\n+   (match_operand:VF_AVX512VL 2 \"<round_expand_nimm_predicate>\")\n+   (match_operand:VF_AVX512VL 3 \"<round_expand_nimm_predicate>\")\n+   (match_operand:<avx512fmaskmode> 4 \"register_operand\")]\n+  \"TARGET_AVX512F && <round_mode512bit_condition>\"\n+{\n+  emit_insn (gen_fma_fnmsub_<mode>_maskz_1<round_expand_name> (\n+    operands[0], operands[1], operands[2], operands[3],\n+    CONST0_RTX (<MODE>mode), operands[4]<round_expand_operand>));\n+  DONE;\n+})\n+\n (define_insn \"<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name><round_name>\"\n   [(set (match_operand:VF_SF_AVX512VL 0 \"register_operand\" \"=v,v,v\")\n \t(fma:VF_SF_AVX512VL\n@@ -4163,6 +4186,52 @@\n   [(set_attr \"type\" \"ssemuladd\")\n    (set_attr \"mode\" \"<MODE>\")])\n \n+(define_insn \"*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_1\"\n+  [(set (match_operand:VF_AVX512 0 \"register_operand\" \"=v,v\")\n+\t(fma:VF_AVX512\n+\t  (neg:VF_AVX512\n+\t    (match_operand:VF_AVX512 1 \"register_operand\" \"0,v\"))\n+\t  (match_operand:VF_AVX512 2 \"register_operand\" \"v,0\")\n+\t  (neg:VF_AVX512\n+\t    (vec_duplicate:VF_AVX512\n+\t      (match_operand:<ssescalarmode> 3 \"memory_operand\" \"m,m\")))))]\n+  \"TARGET_AVX512F && <sd_mask_mode512bit_condition>\"\n+  \"vfnmsub213<ssemodesuffix>\\t{%3<avx512bcst>, %2, %0<sd_mask_op4>|%0<sd_mask_op4>, %2, %3<avx512bcst>}\"\n+  [(set_attr \"type\" \"ssemuladd\")\n+   (set_attr \"mode\" \"<MODE>\")])\n+\n+(define_insn \"*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_2\"\n+  [(set (match_operand:VF_AVX512 0 \"register_operand\" \"=v,v\")\n+\t(fma:VF_AVX512\n+\t  (neg:VF_AVX512\n+\t    (vec_duplicate:VF_AVX512\n+\t      (match_operand:<ssescalarmode> 1 \"memory_operand\" \"m,m\")))\n+\t  (match_operand:VF_AVX512 2 \"register_operand\" \"0,v\")\n+\t  (neg:VF_AVX512\n+\t    (match_operand:VF_AVX512 3 \"register_operand\" \"v,0\"))))]\n+  \"TARGET_AVX512F && <sd_mask_mode512bit_condition>\"\n+  \"@\n+   vfnmsub132<ssemodesuffix>\\t{%1<avx512bcst>, %3, %0<sd_mask_op4>|%0<sd_mask_op4>, %3, %1<avx512bcst>}\n+   vfnmsub231<ssemodesuffix>\\t{%1<avx512bcst>, %2, %0<sd_mask_op4>|%0<sd_mask_op4>, %2, %1<avx512bcst>}\"\n+  [(set_attr \"type\" \"ssemuladd\")\n+   (set_attr \"mode\" \"<MODE>\")])\n+\n+(define_insn \"*<sd_mask_codefor>fma_fnmsub_<mode><sd_maskz_name>_bcst_3\"\n+  [(set (match_operand:VF_AVX512 0 \"register_operand\" \"=v,v\")\n+\t(fma:VF_AVX512\n+\t  (neg:VF_AVX512\n+\t    (match_operand:VF_AVX512 1 \"register_operand\" \"0,v\"))\n+\t  (vec_duplicate:VF_AVX512\n+\t    (match_operand:<ssescalarmode> 2 \"memory_operand\" \"m,m\"))\n+\t  (neg:VF_AVX512\n+\t    (match_operand:VF_AVX512 3 \"register_operand\" \"v,0\"))))]\n+  \"TARGET_AVX512F && <sd_mask_mode512bit_condition>\"\n+  \"@\n+   vfnmsub132<ssemodesuffix>\\t{%2<avx512bcst>, %3, %0<sd_mask_op4>|%0<sd_mask_op4>, %3, %2<avx512bcst>}\n+   vfnmsub231<ssemodesuffix>\\t{%2<avx512bcst>, %1, %0<sd_mask_op4>|%0<sd_mask_op4>, %1, %2<avx512bcst>}\"\n+  [(set_attr \"type\" \"ssemuladd\")\n+   (set_attr \"mode\" \"<MODE>\")])\n+\n (define_insn \"<avx512>_fnmsub_<mode>_mask<round_name>\"\n   [(set (match_operand:VF_AVX512VL 0 \"register_operand\" \"=v,v\")\n \t(vec_merge:VF_AVX512VL\n@@ -4403,6 +4472,19 @@\n \t  (const_int 1)))]\n   \"TARGET_FMA\")\n \n+(define_expand \"fmai_vmfnmsub_<mode><round_name>\"\n+  [(set (match_operand:VF_128 0 \"register_operand\")\n+\t(vec_merge:VF_128\n+\t  (fma:VF_128\n+\t    (neg:VF_128\n+\t      (match_operand:VF_128 2 \"<round_nimm_predicate>\"))\n+\t    (match_operand:VF_128 1 \"<round_nimm_predicate>\")\n+\t    (neg:VF_128\n+\t      (match_operand:VF_128 3 \"<round_nimm_predicate>\")))\n+\t  (match_dup 1)\n+\t  (const_int 1)))]\n+  \"TARGET_FMA\")\n+\n (define_insn \"*fmai_fmadd_<mode>\"\n   [(set (match_operand:VF_128 0 \"register_operand\" \"=v,v\")\n         (vec_merge:VF_128"}, {"sha": "f594beab31c0ef6514a6440089886cae7c6703b3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -1,3 +1,18 @@\n+2018-10-21  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/72782\n+\t* gcc.target/i386/avx512f-fnmsub-df-zmm-1.c: New test.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-1.c: Likewise.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-2.c: Likewise.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-3.c: Likewise.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-4.c: Likewise.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-5.c: Likewise.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-6.c: Likewise.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-7.c: Likewise.\n+\t* gcc.target/i386/avx512f-fnmsub-sf-zmm-8.c: Likewise.\n+\t* gcc.target/i386/avx512vl-fnmsub-sf-xmm-1.c: Likewise.\n+\t* gcc.target/i386/avx512vl-fnmsub-sf-ymm-1.c: Likewise.\n+\n 2018-10-21  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/72782"}, {"sha": "4d4d31e1375804667f784b3d85afc1b0ed35f5db", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-df-zmm-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-df-zmm-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-df-zmm-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-df-zmm-1.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...pd\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastsd\\[^\\n\\]*%zmm\\[0-9\\]+\" } } */\n+\n+#define type __m512d\n+#define vec 512\n+#define op fnmsub\n+#define suffix pd\n+#define SCALAR double\n+\n+#include \"avx512-fma-1.h\""}, {"sha": "ff9632a12cd1e439a4f21bc70e126db8a5dbb4a2", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-1.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-1.h\""}, {"sha": "42563501e9a274f5a55eb4be7478d7d185b04d3b", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-2.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-2.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-2.h\""}, {"sha": "6966cea551ef9b762c190cb1a26b5f5786c37677", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-3.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-3.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-3.h\""}, {"sha": "0748c12c335cfd5fb4c1c0441dd72b83aef754a1", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-4.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-4.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-4.h\""}, {"sha": "d24a80fb74ee6c0299d34442d7370492b8461214", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-5.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-5.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-5.h\""}, {"sha": "ee36dc903896298ebffadddd16085b1afd8c428b", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-6.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-6.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-6.h\""}, {"sha": "7815251b82d639d72f4ddc369a45d066da45a4b5", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-7.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-7.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" 1 } } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[^\\n\\]*%zmm\\[0-9\\]+\" 1 } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-7.h\""}, {"sha": "8bd669e1c4e6e46a1a0af5393d572014e8e82c90", "filename": "gcc/testsuite/gcc.target/i386/avx512f-fnmsub-sf-zmm-8.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-fnmsub-sf-zmm-8.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile { target { ! ia32 } } } */\n+/* { dg-options \"-mavx512f -O2\" } */\n+/* { dg-final { scan-assembler-times \"vbroadcastss\\[^\\n\\]*%zmm\\[0-9\\]+\" 1 } } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+%zmm\\[0-9\\]+, %zmm\\[0-9\\]+, %zmm0\" 1 } } */\n+\n+#define type __m512\n+#define vec 512\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-8.h\""}, {"sha": "0a63df8aeae5ebaa226625a2dc59643fbe5d9b6c", "filename": "gcc/testsuite/gcc.target/i386/avx512vl-fnmsub-sf-xmm-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512vl-fnmsub-sf-xmm-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512vl-fnmsub-sf-xmm-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512vl-fnmsub-sf-xmm-1.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mfma -mavx512vl -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %xmm\\[0-9\\]+, %xmm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%xmm\\[0-9\\]+\" } } */\n+\n+#define type __m128\n+#define vec\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-1.h\""}, {"sha": "d8d48d62a7456f6ee6c84dddcf7649d6f3d22c35", "filename": "gcc/testsuite/gcc.target/i386/avx512vl-fnmsub-sf-ymm-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512vl-fnmsub-sf-ymm-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38ef6fb19d81a9da321e95f35940121e3cf858ff/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512vl-fnmsub-sf-ymm-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512vl-fnmsub-sf-ymm-1.c?ref=38ef6fb19d81a9da321e95f35940121e3cf858ff", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mfma -mavx512vl -O2\" } */\n+/* { dg-final { scan-assembler-times \"vfnmsub...ps\\[ \\\\t\\]+\\\\(%(?:eax|rdi|edi)\\\\)\\\\\\{1to\\[1-8\\]+\\\\\\}, %ymm\\[0-9\\]+, %ymm0\" 1 } } */\n+/* { dg-final { scan-assembler-not \"vbroadcastss\\[^\\n\\]*%ymm\\[0-9\\]+\" } } */\n+\n+#define type __m256\n+#define vec 256\n+#define op fnmsub\n+#define suffix ps\n+#define SCALAR float\n+\n+#include \"avx512-fma-1.h\""}]}