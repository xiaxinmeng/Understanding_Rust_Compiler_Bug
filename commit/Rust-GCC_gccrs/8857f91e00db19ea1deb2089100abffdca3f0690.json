{"sha": "8857f91e00db19ea1deb2089100abffdca3f0690", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg1N2Y5MWUwMGRiMTllYTFkZWIyMDg5MTAwYWJmZmRjYTNmMDY5MA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1998-02-02T11:41:39Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-02-02T11:41:39Z"}, "message": "cp-tree.h (DECL_NONSTATIC_MEMBER_FUNCTION_P): New macro.\n\n\t* cp-tree.h (DECL_NONSTATIC_MEMBER_FUNCTION_P): New macro.\n\t(revert_static_member_fn): Declare.\n\t* decl.c (revert_static_member_fn): Remove declaration.  Change\n\tlinkage from internal to external.\n\t(cp_finish_decl): Deal with virtual functions in classes local to\n\ttemplate functions.\n\t* decl2.c (finish_file): Don't forget to emit increment/decrement\n\texpressions in initializers for file-scope variables.\n\t* parse.y (typename_sub2): If the typename doesn't names a\n\ttemplate, rather than a type, issue an error message.\n\t* pt.c (check_explicit_specialization): Handle specializations of\n\tstatic member functions.\n\t(coerce_template_parms): Handle offset references to lists of\n\tmember functions.\n\t* search.c (note_debug_info_needed): Don't crash when handed a\n\ttype which is being defined.\n\t* typeck.c (complete_type): Don't crash when handed NULL_TREE;\n\tthat can happen with some illegal code.\n\nFrom-SVN: r17598", "tree": {"sha": "1bff9067da4dc52f810e15b629b09bbda0d0842f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bff9067da4dc52f810e15b629b09bbda0d0842f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8857f91e00db19ea1deb2089100abffdca3f0690", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8857f91e00db19ea1deb2089100abffdca3f0690", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8857f91e00db19ea1deb2089100abffdca3f0690", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8857f91e00db19ea1deb2089100abffdca3f0690/comments", "author": null, "committer": null, "parents": [{"sha": "318e3b20e449fc82ec3dea733b3aed1b165fbfc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/318e3b20e449fc82ec3dea733b3aed1b165fbfc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/318e3b20e449fc82ec3dea733b3aed1b165fbfc3"}], "stats": {"total": 1004, "additions": 573, "deletions": 431}, "files": [{"sha": "37ed5de59957997728d4625eafc85ee984f73df4", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -1,3 +1,24 @@\n+Mon Feb  2 11:24:22 1998  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* cp-tree.h (DECL_NONSTATIC_MEMBER_FUNCTION_P): New macro.\t\n+\t(revert_static_member_fn): Declare.\n+\t* decl.c (revert_static_member_fn): Remove declaration.  Change\n+\tlinkage from internal to external.\n+\t(cp_finish_decl): Deal with virtual functions in classes local to\n+\ttemplate functions.\n+\t* decl2.c (finish_file): Don't forget to emit increment/decrement\n+\texpressions in initializers for file-scope variables.\n+\t* parse.y (typename_sub2): If the typename doesn't names a\n+\ttemplate, rather than a type, issue an error message.\n+\t* pt.c (check_explicit_specialization): Handle specializations of\n+\tstatic member functions.\n+\t(coerce_template_parms): Handle offset references to lists of\n+\tmember functions.\n+\t* search.c (note_debug_info_needed): Don't crash when handed a\n+\ttype which is being defined.\n+\t* typeck.c (complete_type): Don't crash when handed NULL_TREE;\n+\tthat can happen with some illegal code.\n+\n Mon Feb  2 00:57:38 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* call.c (user_harshness): Initialize `code' to 0."}, {"sha": "fc3bc18400f29dcada734d79521ce879239b34f8", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -1020,10 +1020,15 @@ struct lang_decl\n   (TREE_CODE (NODE) == VAR_DECL || TREE_CODE (NODE) == TYPE_DECL \\\n    || TREE_CODE (NODE) == CONST_DECL)\n \t\t\t\t\n+/* Nonzero for FUNCTION_DECL means that this decl is a non-static\n+   member function.  */\n+#define DECL_NONSTATIC_MEMBER_FUNCTION_P(NODE) \\\n+  (TREE_CODE (TREE_TYPE (NODE)) == METHOD_TYPE)\n+\n /* Nonzero for FUNCTION_DECL means that this decl is a member function\n    (static or non-static).  */\n #define DECL_FUNCTION_MEMBER_P(NODE) \\\n- (TREE_CODE (TREE_TYPE (NODE)) == METHOD_TYPE || DECL_STATIC_FUNCTION_P (NODE))\n+ (DECL_NONSTATIC_MEMBER_FUNCTION_P (NODE) || DECL_STATIC_FUNCTION_P (NODE))\n \n /* Nonzero for FUNCTION_DECL means that this member function\n    has `this' as const X *const.  */\n@@ -2119,6 +2124,7 @@ extern int in_function_p\t\t\tPROTO((void));\n extern void replace_defarg\t\t\tPROTO((tree, tree));\n extern void print_other_binding_stack\t\tPROTO((struct binding_level *));\n extern tree strip_attrs\t\t\t\tPROTO((tree));\n+extern void revert_static_member_fn             PROTO((tree*, tree*, tree*));\n \n /* in decl2.c */\n extern int flag_assume_nonnull_objects;"}, {"sha": "bf7fa02d75df3a6849b6eb2b6b7ef769ab0499d7", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -136,7 +136,6 @@ static struct stack_level *decl_stack;\n static tree grokparms\t\t\t\tPROTO((tree, int));\n static tree lookup_nested_type\t\t\tPROTO((tree, tree));\n static char *redeclaration_error_message\tPROTO((tree, tree));\n-static void revert_static_member_fn\t\tPROTO((tree *, tree *, tree *));\n static tree push_overloaded_decl\t\tPROTO((tree, int));\n static void push_overloaded_decl_top_level\tPROTO((tree, int));\n \n@@ -6484,8 +6483,10 @@ cp_finish_decl (decl, init, asmspec_tree, need_pop, flags)\n \t{\n \t  tree stmt = DECL_VINDEX (decl);\n \t  /* If the decl is declaring a member of a local class (in a\n-\t     template function), there will be no associated stmt.  */\n-\t  if (stmt != NULL_TREE)\n+\t     template function), the DECL_VINDEX will either be NULL,\n+\t     or it will be an actual virtual function index, not a\n+\t     DECL_STMT.  */\n+\t  if (stmt != NULL_TREE && TREE_CODE (stmt) == DECL_STMT)\n \t    {\n \t      DECL_VINDEX (decl) = NULL_TREE;\n \t      TREE_OPERAND (stmt, 2) = copy_to_permanent (init);\n@@ -12997,7 +12998,7 @@ finish_stmt ()\n    (TREE_TYPE (decl)) to ARGTYPES, as doing so will corrupt the types of\n    other decls.  Either pass the addresses of local variables or NULL.  */\n \n-static void\n+void\n revert_static_member_fn (decl, fn, argtypes)\n      tree *decl, *fn, *argtypes;\n {"}, {"sha": "a7eb19bfd205cb3bba86ae991d97f46712c17bc2", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -3140,6 +3140,10 @@ finish_file ()\n \t\t}\n \t      else\n \t\texpand_assignment (decl, init, 0, 0);\n+\t      \n+\t      /* The expression might have involved increments and\n+\t\t decrements.  */\n+\t      emit_queue ();\n \n \t      /* Cleanup any temporaries needed for the initial value.  */\n \t      expand_end_target_temps ();"}, {"sha": "b01a9ea92d07345d9e5bbc27f0436aed142c306d", "filename": "gcc/cp/g++FAQ.texi", "status": "modified", "additions": 283, "deletions": 205, "changes": 488, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fg%2B%2BFAQ.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fg%2B%2BFAQ.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fg%2B%2BFAQ.texi?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -3,7 +3,7 @@\n @setfilename g++FAQ.info\n @settitle Frequently asked questions about the GNU C++ compiler\n @setchapternewpage off\n-@c version: @(#)g++FAQ.texi\t1.57 12/14/97\n+@c version: @(#)g++FAQ.texi\t1.60 01/31/98\n @c %**end of header\n \n @iftex\n@@ -12,7 +12,7 @@\n @titlepage\n @title G++ FAQ\n @subtitle Frequently asked questions about the GNU C++ compiler\n-@subtitle December 14, 1997\n+@subtitle January 31, 1998\n @sp 1\n @author Joe Buck\n @page\n@@ -35,8 +35,9 @@ all those who sent suggestions for improvements.  Thanks to Marcus Speh\n for doing the index.  A hypertext version is available on the World Wide\n Web at @file{http://www.cygnus.com/misc/g++FAQ_toc.html}.\n \n-@strong{News flash}: egcs has been released, and the 2.8.0 release is\n-expected very soon!\n+@strong{News flash}: gcc 2.8.0 has finally been released!\n+This FAQ still has much material that refers to older releases; it will\n+take some time before it is completely \"modernized\".\n \n Please send updates and corrections to the FAQ to\n @code{jbuck@@synopsys.com}.  Please do @emph{not} use me as a resource\n@@ -62,85 +63,88 @@ You can find this FAQ at\n or in HTML form at @file{http://www.cerfnet.com/~mpcline/On-Line-C++-FAQs/}.\n \n @menu\n-* basics::                      What is g++?  How do I get it?\n-* egcs and 2.8.0::              The next generation(s) of g++\n-* installation::                How to install, installation problems\n-* evolution::                   The Evolution of g++\n-* User Problems::               Commonly reported problems and bugs\n-* legalities::                  Lawyer stuff, GPL, LGPL, etc.\n-* index::                       Index of terms\n+* basics::          What is g++?  How do I get it?\n+* egcs and 2.8.0::  The next generation(s) of g++\n+* installation::    How to install, installation problems\n+* evolution::       The Evolution of g++\n+* User Problems::   Commonly reported problems and bugs\n+* legalities::      Lawyer stuff, GPL, LGPL, etc.\n+* index::           Index of terms\n \n  --- The Detailed Node Listing ---\n \n The basics: what is g++?\n \n-* latest versions::             \n-* g++ for Unix::                \n-* g++ for HP::                  \n-* g++ for Solaris 2.x::         \n-* g++ for other platforms::     \n-* 1.x vs 2.x versions::         \n+* latest versions::  \n+* g++ for Unix::    \n+* g++ for HP::      \n+* g++ for Solaris 2.x::  \n+* g++ for other platforms::  \n+* 1.x vs 2.x versions::  \n \n The Next Generation(s) of g++\n \n-* egcs-intro::                  What is egcs?\n-* egcs-whats-new::              What's new in egcs vs 2.7.2?\n-* egcs-run-both::               How can I run both egcs and an FSF release?\n-* egcs-vs-2.8.0::               How will egcs affect 2.8.0?\n-* egcs-robustness::             How robust is egcs-1.0?\n+* new-in-2.8.0::    What's new in gcc 2.8.0?    \n+* egcs-intro::      What is egcs?\n+* egcs-whats-new::  What's new in egcs vs 2.7.2?\n+* egcs-bug-fixes::  What was fixed in egcs-1.0.1?\n+* egcs-linux::      If I install on Linux, will it overwrite my libraries?\n+* egcs-run-both::   How can I run both egcs and an FSF release?\n+* egcs-vs-2.8.0::   How will egcs affect 2.8.0?\n+* egcs-robustness::  How robust is egcs?\n \n Installation Issues and Problems\n \n-* gcc-2 + g++-1::               \n-* what else do I need?::        \n-* use GNU linker?::             \n-* Use GNU assembler?::          \n-* shared libraries::            \n-* repository::                  \n-* repo bugs::                   \n-* Use GNU C library?::          \n+* gcc-2 + g++-1::   \n+* what else do I need?::  \n+* use GNU linker?::  \n+* Use GNU assembler?::  \n+* shared libraries::  \n+* repository::      \n+* repo bugs::       \n+* Use GNU C library?::  \n * Global constructor problems::  \n-* Strange assembler errors::    \n+* Strange assembler errors::  \n * Other problems building libg++::  \n-* More size_t problems::        \n-* Rebuild libg++?::             \n-* co-existing versions::        \n-* Installing on Linux::         \n-* Linux Slackware 3.0::         \n+* More size_t problems::  \n+* Rebuild libg++?::  \n+* co-existing versions::  \n+* Installing on Linux::  \n+* Linux Slackware 3.0::  \n \n The Evolution of g++\n \n-* version 2.7.x::               What's changed in 2.7.x from earlier versions\n-* libstdc++::                   \n+* version 2.7.x::   What's changed in 2.7.x from earlier versions\n+* libstdc++::       \n \n User Problems\n \n-* missing virtual table::       \n-* for scope::                   \n-* const constructor::           \n-* unused parameter warnings::   \n+* missing virtual table::  \n+* for scope::       \n+* const constructor::  \n+* unused parameter warnings::  \n * jump crosses initialization::  \n-* Demangler::                   \n-* static data members::         \n-* internal compiler error::     \n-* bug reports::                 \n-* porting to g++::              \n-* name mangling::               \n+* Demangler::       \n+* static data members::  \n+* internal compiler error::  \n+* bug reports::     \n+* porting to g++::  \n+* name mangling::   \n * problems linking with other libraries::  \n-* documentation::               \n-* templates::                   \n-* undefined templates::         \n-* redundant templates::         \n-* Standard Template Library::   \n-* STL and string::              \n-* exceptions::                  \n-* namespaces::                  \n-* agreement with standards::    \n+* documentation::   \n+* templates::       \n+* undefined templates::  \n+* redundant templates::  \n+* Standard Template Library::  \n+* STL and string::  \n+* exceptions::      \n+* namespaces::      \n+* agreement with standards::  \n * compiling standard libraries::  \n-* debugging on SVR4 systems::   \n+* debugging on SVR4 systems::  \n * debugging problems on Solaris::  \n-* X11 conflicts with libg++::   \n-* assignment to streams::       \n+* X11 conflicts with libg++::  \n+* assignment to streams::  \n @end menu\n \n @node basics, egcs and 2.8.0, Top, Top\n@@ -161,12 +165,12 @@ it is not public domain, but is protected by the GNU Public License,\n or GPL (@pxref{legalities}).\n \n @menu\n-* latest versions::             \n-* g++ for Unix::                \n-* g++ for HP::                  \n-* g++ for Solaris 2.x::         \n-* g++ for other platforms::     \n-* 1.x vs 2.x versions::         \n+* latest versions::  \n+* g++ for Unix::    \n+* g++ for HP::      \n+* g++ for Solaris 2.x::  \n+* g++ for other platforms::  \n+* 1.x vs 2.x versions::  \n @end menu\n \n @node latest versions, g++ for Unix, basics, basics\n@@ -175,20 +179,23 @@ or GPL (@pxref{legalities}).\n @cindex egcs release\n \n The egcs project (on the Web: @file{http://www.cygnus.com/egcs/}) has\n-now released egcs-1.0 as of December 3, 1997.\n+released a bug-fix version, egcs-1.0.1, on January 6, 1998.  Folks\n+using egcs-1.0 should upgrade, as it has some important bug fixes.\n \n @cindex gcc/g++, version date\n-The current version of gcc/g++ is 2.7.2.3, released August 20, 1997.\n-Although that looks very recent, the only change is a minor patch to\n-resolve a problem with Linux and the GNU C library; users not interested\n-in that functionality have no reason to upgrade.\n+The current version of gcc/g++ is 2.8.0 (!), released January 14, 1998.\n+It is a huge improvement over the 2.7.x releases, and thanks to\n+extensive testing in the egcs framework, is perhaps the least buggy .0\n+gcc release anyone can remember (though there are definitely a few).\n \n-The current version of libg++ is 2.7.2, released July 4, 1996.\n-The last release of gcc/g++ with improvements to the C++ front end was\n-2.7.2, released Nov. 25, 1995, nearly two years ago.\n+The current version of libg++ is 2.8.0, released January 19, 1998.\n+However, libg++ is being deprecated; libstdc++-2.8.0 contains just the\n+standard C++ classes and is a subset of libg++ 2.8.0.  The libstdc++\n+library is identical to the one included in egcs-1.0.1.\n \n I would strongly recommend that anyone using a g++ version earlier\n than 2.7.2 should upgrade if at all possible (@pxref{version 2.7.x}).\n+Folks who need modern C++ features should upgrade to 2.8.0 or egcs. \n \n For some non-Unix platforms, the latest port of gcc may be an earlier\n version (2.6.3, say).  You'll need to use a version of libg++ that\n@@ -411,7 +418,7 @@ places\n \n Eberhard Mattes did the EMX port.  His address is\n mattes@@azu.informatik.uni-stuttgart.de.\n-Read the FAQ file included with the distribution before harassing the author.\n+Read the FAQ file included with the distribution before harrassing the author.\n \n @cindex Apple support\n @cindex Macintosh support\n@@ -432,7 +439,7 @@ him directly (shebs@@cygnus.com) for more information.\n @node 1.x vs 2.x versions,  , g++ for other platforms, basics\n @section But I can only find g++-1.42!\n \n-``I keep hearing people talking about g++ 2.7.2 (or some other number\n+``I keep hearing people talking about g++ 2.8.0 (or some other number\n starting with 2), but the latest version I can find is g++ 1.42.\n Where is it?''\n \n@@ -450,14 +457,39 @@ convention.  It means ``the C++ compiler included with gcc-2.x.y.''\n @chapter The Next Generation(s) of g++\n \n @menu\n-* egcs-intro::                  What is egcs?\n-* egcs-whats-new::              What's new in egcs vs 2.7.2?\n-* egcs-run-both::               How can I run both egcs and an FSF release?\n-* egcs-vs-2.8.0::               How will egcs affect 2.8.0?\n-* egcs-robustness::             How robust is egcs-1.0?\n+* new-in-2.8.0::    What's new in gcc 2.8.0?    \n+* egcs-intro::      What is egcs?\n+* egcs-whats-new::  What's new in egcs vs 2.7.2?\n+* egcs-bug-fixes::  What was fixed in egcs-1.0.1?\n+* egcs-linux::      If I install on Linux, will it overwrite my libraries?\n+* egcs-run-both::   How can I run both egcs and an FSF release?\n+* egcs-vs-2.8.0::   How will egcs affect 2.8.0?\n+* egcs-robustness::  How robust is egcs?\n @end menu\n \n-@node egcs-intro, egcs-whats-new, egcs and 2.8.0, egcs and 2.8.0\n+@node new-in-2.8.0, egcs-intro, egcs and 2.8.0, egcs and 2.8.0\n+@section What's new in gcc/g++ 2.8.0?\n+\n+After a two-year wait, gcc 2.8.0 was released in January 1998, along\n+with libstdc++-2.8.0 and libg++-2.8.0.  Note that the latter (libg++)\n+contains the former (libstdc++) so there is no reason to install both\n+library packages, but libstdc++ is required.  \n+\n+For those familiar with egcs, the most obvious difference between\n+gcc-2.8.0 and egcs-1.0 or 1.0.1 is the packaging: egcs is bundled with\n+libstdc++, and gcc-2.8.0 does not contain the class library.  Otherwise,\n+except for the lack of the @code{-frepo} option and some bug fixes\n+that have not yet made it into gcc-2.8.0, C++ users will find the\n+two compilers to be almost the same at this stage, other than that 2.8.0\n+users may get more bogus warnings with -Wall and optimization because\n+some fixes to flow analysis in the presence of exceptions that egcs made\n+are not yet present in gcc 2.8.0.\n+\n+Because the new feature lists for egcs and gcc 2.8 are almost the same,\n+please see @xref{egcs-whats-new} for a list of new features.  It is a\n+fairly long list.\n+\n+@node egcs-intro, egcs-whats-new, new-in-2.8.0, egcs and 2.8.0\n @section What is egcs?\n \n egcs is the Experimental GNU compiler system (see\n@@ -466,35 +498,39 @@ accelerate development of new gcc features by providing a more open\n development model than gcc has traditionally used.\n \n The first egcs release, egcs-1.0, came out on December 3, 1997.\n+The current release is egcs-1.0.1, released January 6, 1998.\n Questions not addressed here may be answered in the egcs FAQ\n (@file{http://www.cygnus.com/egcs/faq.html}).\n \n-@node egcs-whats-new, egcs-run-both, egcs-intro, egcs and 2.8.0\n+@node egcs-whats-new, egcs-bug-fixes, egcs-intro, egcs and 2.8.0\n @section What new C++ features are in egcs?\n \n-@strong{Note}: unless indicated otherwise, these features are expected\n-to be present in g++ 2.8.0 when released.\n+@strong{Note}: unless indicated otherwise, these features are also\n+present in g++ 2.8.0.\n \n @itemize @bullet\n @item\n @cindex integrated libstdc++\n \n-The standard C++ classes are integrated with the egcs release (this is\n-@emph{not} expected to be true of gcc-2.8.0).  libg++ is not being\n-supported, though a version that will work with egcs has been\n-contributed (FIXME: pointer?).  The compiler and library are configured\n-and built in one step.\n+The standard C++ classes are integrated with the egcs release (but\n+@strong{not} for gcc-2.8.0, which does not include the class libraries).\n+libg++ is not being\n+supported, though an add-on version that will work with egcs can be found at\n+@file{ftp://ftp.yggdrasil.com/private/hjl/libg++-2.8.0b6.6.tar.gz},\n+thanks to H.J. Lu.  The compiler and library are configured and built\n+in one step.\n \n @item\n @cindex new template implementation\n A completely new template implementation, much closer to the draft\n standard.  Limitations in 2.7.2.x concerning inlining template functions\n-will be eliminated.  Static template data members, template class member\n-functions, partial specification, and default template arguments will be\n+are eliminated.  Static template data members, template class member\n+functions, partial specification, and default template arguments are\n supported.  An instantiation method resembling that used in Borland C++\n (instantiating functions possibly in multiple .o files and using weak\n symbols to link correctly) is provided, in addition to other\n-options.  The SGI version of STL is shipped verbatim with libstdc++.\n+options.  The SGI version of STL is shipped verbatim with libstdc++\n+(libstdc++ is included with egcs, separate with gcc-2.8.0).\n \n @item\n @cindex redundant template elimination\n@@ -506,9 +542,9 @@ at link time.\n @item\n @cindex repository\n @cindex -frepo\n-The @code{-frepo} flag is supported in egcs (it will not be in 2.8.0).\n+The @code{-frepo} flag is supported in egcs (it is not in 2.8.0).\n However, because of the previous item, I don't recommend its use on ELF\n-systems.\n+systems, as the default method is better.\n \n @item\n @cindex new exception implementation\n@@ -536,7 +572,54 @@ There are many more changes: see @file{http://www.cygnus.com/egcs/c++features.ht\n Features that are still missing include namespaces and templates as\n template arguments.\n \n-@node egcs-run-both, egcs-vs-2.8.0, egcs-whats-new, egcs and 2.8.0\n+@node egcs-bug-fixes, egcs-linux, egcs-whats-new, egcs and 2.8.0\n+@section What was fixed in egcs-1.0.1?\n+\n+@itemize @bullet\n+\n+@item\n+Add support for Red Hat 5.0 Linux and better support for Linux\n+systems using glibc2.\n+ \n+@item\n+Compatibility with both egcs-1.0 and gcc-2.8 libgcc exception handling\n+interfaces (see below).\n+\n+@item\n+Various bugfixes in the x86, hppa, mips, and rs6000/ppc backends.\n+\n+@item \n+A few machine independent bugfixes, mostly to fix code generation bugs\n+when building Linux kernels or glibc.\n+\n+@item \n+Fix a few critical exception handling and template bugs in the C++\n+compiler.\n+\n+@item \n+Fix build problems on x86-solaris systems.\n+@end itemize\n+\n+To avoid future compatibility problems, we strongly urge anyone who is\n+planning on distributing shared libraries that contain C++ code to\n+upgrade to egcs-1.0.1 first.  See\n+@file{http://www.cygnus.com/egcs/egcs-1.0.1.html} for details about the\n+compatibility issues as well as additional information about the\n+bugfixes since the egcs-1.0 release.\n+\n+@node egcs-linux, egcs-run-both, egcs-bug-fixes, egcs and 2.8.0\n+@section If I install egcs on Linux, will it overwrite my libraries?\n+\n+No.  If you build from sources, by default, egcs installs executables in\n+@code{/usr/local/bin} and libraries in @code{/usr/local/lib}, and you\n+can change this default if desired (see next section).\n+\n+If, however, you install a package (e.g. Debian or Red Hat) that wants\n+to put egcs in @code{/usr/bin} and @code{/usr/lib}, then yes, you are\n+replacing your system compiler and C++ library (I don't know if anyone\n+has provided such packages yet -- proceed with caution).\n+\n+@node egcs-run-both, egcs-vs-2.8.0, egcs-linux, egcs and 2.8.0\n @section How can I run both egcs and an FSF release of g++ on the same machine?\n \n The recommended approach is to provide a different argument to the\n@@ -553,56 +636,45 @@ ln -s /usr/local/egcs/bin/g++ /usr/local/bin/eg++\n @node egcs-vs-2.8.0, egcs-robustness, egcs-run-both, egcs and 2.8.0\n @section What about 2.8.0?  How does egcs affect the 2.8.x development?\n \n-2.8.0 is expected Real Soon Now (I would guess by the end of 1997, but that\n-is only a guess).  The C++ front end should be essentially the same.\n+2.8.0 has now been released, with essentially the same C++ front end as\n+egcs.\n \n Bug fixes generated in egcs will be passed to the 2.8.x releases for\n inclusion; the reverse is also taking place, though a bug fix may\n-appear in one before it does in the other.\n+appear in one before it does in the other.  egcs development is expected\n+to proceed more quickly.\n \n @node egcs-robustness,  , egcs-vs-2.8.0, egcs and 2.8.0\n-@section How solid is egcs-1.0?\n+@section How robust is egcs?\n \n While the 'e' stands for 'experimental', egcs has been tested thoroughly\n-and should be of high quality.  There are a few glitches which should be\n-fixed shortly (in a 1.0.1 release, probably in early January):\n+and should be of high quality.  A few glitches in the initial release\n+were fixed in 1.0.1.  egcs-1.0 users should upgrade.\n \n-@itemize @bullet\n-@item\n-Deeply nested templates sometimes lead to a very large memory requirement\n-if the @code{-Wreturn-type} option is on (note: this flag is implicitly\n-turned on by @code{-W} or @code{-Wall}.  A workaround is to give the\n-flag @code{-Wno-return-type} if you use @code{-Wall}.\n-\n-@item\n-On Red Hat 5.0, it may be necessary to link all C++ programs with\n-@code{-lpthread} to work around an undefined symbol problem.\n-\n-@item\n-A patch is needed to fix egcs on Solaris/X86.  It is in the egcs FAQ\n-(see above).\n-@end itemize\n+Some memory bloat problems with deeply nested templates were fixed in\n+1.0.1 (though it appears that there are still a few cases where\n+excessive memory requirements occur).\n \n @node installation, evolution, egcs and 2.8.0, Top\n @chapter Installation Issues and Problems\n \n @menu\n-* gcc-2 + g++-1::               \n-* what else do I need?::        \n-* use GNU linker?::             \n-* Use GNU assembler?::          \n-* shared libraries::            \n-* repository::                  \n-* repo bugs::                   \n-* Use GNU C library?::          \n+* gcc-2 + g++-1::   \n+* what else do I need?::  \n+* use GNU linker?::  \n+* Use GNU assembler?::  \n+* shared libraries::  \n+* repository::      \n+* repo bugs::       \n+* Use GNU C library?::  \n * Global constructor problems::  \n-* Strange assembler errors::    \n+* Strange assembler errors::  \n * Other problems building libg++::  \n-* More size_t problems::        \n-* Rebuild libg++?::             \n-* co-existing versions::        \n-* Installing on Linux::         \n-* Linux Slackware 3.0::         \n+* More size_t problems::  \n+* Rebuild libg++?::  \n+* co-existing versions::  \n+* Installing on Linux::  \n+* Linux Slackware 3.0::  \n @end menu\n \n @node gcc-2 + g++-1, what else do I need?, installation, installation\n@@ -701,7 +773,7 @@ debug format (e.g. Suns running SunOS 4.x), the GNU linker compresses\n the debug symbol table considerably.  The 2.7 version adds some symbol\n table compression for ELF and Solaris targets.\n \n-Users of egcs or 2.8.0 (when released) on ELF systems should definitely\n+Users of egcs or 2.8.0 on ELF systems should definitely\n use GNU ld (2.8 or later), as it will automatically remove duplicate\n instantiations of templates, virtual function tables, or ``outlined''\n copies of inline functions.\n@@ -1102,19 +1174,20 @@ This chapter discusses the evolution of g++ and describes what can be expected\n in the future.\n \n @menu\n-* version 2.7.x::               What's changed in 2.7.x from earlier versions\n-* libstdc++::                   \n+* version 2.7.x::   What's changed in 2.7.x from earlier versions\n+* libstdc++::       \n @end menu\n \n @node version 2.7.x, libstdc++, evolution, evolution\n @section What's new in version 2.7.x of gcc/g++\n \n-The current version of gcc/g++ is 2.7.2.2, released February 10, 1997.\n-The only change between 2.7.2.1 and 2.7.2.2 is that support was added\n-for using the GNU C library, version 2, on Linux; users not interested\n-in that functionality have no reason to upgrade.\n-The previous version of gcc/g++ is 2.7.2.1, released August 14, 1996.\n-The current version of libg++ is 2.7.2, released July 4, 1996.\n+[ This section is old now, since 2.8.0/egcs is the new stuff ] The\n+latest 2.7.x version was 2.7.2.2, released February 10, 1997.  The only\n+change between 2.7.2.1 and 2.7.2.2 is that support was added for using\n+the GNU C library, version 2, on Linux; users not interested in that\n+functionality have no reason to upgrade.  The previous version of\n+gcc/g++ was 2.7.2.1, released August 14, 1996.  The libg++ version that\n+should be used with any 2.7.x gcc/g++ is 2.7.2, released July 4, 1996.\n \n Note that gcc 2.7.2.1 just consists of several small patches to\n gcc-2.7.2.  The release is mainly\n@@ -1265,32 +1338,32 @@ will always be available, enhancements to it should not be expected.\n @chapter User Problems\n \n @menu\n-* missing virtual table::       \n-* for scope::                   \n-* const constructor::           \n-* unused parameter warnings::   \n+* missing virtual table::  \n+* for scope::       \n+* const constructor::  \n+* unused parameter warnings::  \n * jump crosses initialization::  \n-* Demangler::                   \n-* static data members::         \n-* internal compiler error::     \n-* bug reports::                 \n-* porting to g++::              \n-* name mangling::               \n+* Demangler::       \n+* static data members::  \n+* internal compiler error::  \n+* bug reports::     \n+* porting to g++::  \n+* name mangling::   \n * problems linking with other libraries::  \n-* documentation::               \n-* templates::                   \n-* undefined templates::         \n-* redundant templates::         \n-* Standard Template Library::   \n-* STL and string::              \n-* exceptions::                  \n-* namespaces::                  \n-* agreement with standards::    \n+* documentation::   \n+* templates::       \n+* undefined templates::  \n+* redundant templates::  \n+* Standard Template Library::  \n+* STL and string::  \n+* exceptions::      \n+* namespaces::      \n+* agreement with standards::  \n * compiling standard libraries::  \n-* debugging on SVR4 systems::   \n+* debugging on SVR4 systems::  \n * debugging problems on Solaris::  \n-* X11 conflicts with libg++::   \n-* assignment to streams::       \n+* X11 conflicts with libg++::  \n+* assignment to streams::  \n @end menu\n \n @node missing virtual table, for scope, User Problems, User Problems\n@@ -1711,7 +1784,7 @@ While there is no libg++-specific document describing the STL\n implementation, SGI's web site, at\n @file{http://www.sgi.com/Technology/STL/}, is an excellent resource.\n Note that the SGI version of STL is the one that is included with the\n-egcs and 2.8.0 (when it occurs) releases of g++.\n+egcs and 2.8.0 releases of g++/libstdc++.\n \n @end itemize\n \n@@ -1746,10 +1819,10 @@ template ostream& operator << (ostream&, const A<int>&);\n @end example\n \n @cindex template limitations\n-As of version 2.6.3, there are still a few limitations in the template\n+As of version 2.7.2, there are still a few limitations in the template\n implementation besides the above (thanks to Jason Merrill for this info):\n-These are still present in version 2.7.2, but a new implementation of\n-templates planned for version 2.8 will eliminate them.\n+\n+@strong{Note}: these problems are eliminated in egcs and in gcc-2.8.0.\n \n @enumerate 1\n @item\n@@ -1809,7 +1882,7 @@ void g () @{\n @}\n @end example\n \n-A workaround that works in version 2.6.1 and later is to specify\n+A workaround that works in version 2.6.1 through 2.7.2.x is to specify\n \n @example\n extern template int min (int, int);\n@@ -1818,9 +1891,15 @@ extern template int min (int, int);\n before @code{f()}; this will force it to be instantiated (though not\n emitted). \n \n+@strong{Note:} this kind of ``guiding declaration'' is not standard and\n+isn't supported by egcs or gcc-2.8.0, as the standard says that this\n+declares a ``normal'' @code{min} function which has no relation to\n+the template function @code{min<int>(int,int)}.  But then the new\n+compilers have no problem inlining template functions.\n+\n @item\n Member function templates are always instantiated when their containing\n-class is.  This is wrong.\n+class is.  This is wrong (fixed in egcs/2.8).\n @end enumerate\n \n @node undefined templates, redundant templates, templates, User Problems\n@@ -1902,34 +1981,20 @@ This bug is fixed in 2.7.0.\n @node Standard Template Library, STL and string, redundant templates, User Problems\n @section Does g++ support the Standard Template Library?\n \n-@cindex STL\n-@cindex Standard Template Library\n-The Standard Template Library (STL) uses many of the extensions that the\n-ANSI/ISO committee has made to templates, and g++ doesn't support\n-some of these yet.  So if you grab HP's free implementation of STL it\n-isn't going to work.  However, starting with libg++-2.6.2 libg++ contains a\n-hacked version of STL, based on work by Carsten Bormann, which permits\n-g++ to compile at least the containers (thanks to Per Bothner for this\n-text).\n-\n-Actually, as of libg++ version 2.7.2 most of this works quite well, most\n-of the time;\n-I've succeeded\n-in making significant use of it.\n-Almost all of the ObjectSpace examples (a set of\n-over 200 simple examples of STL usage) now work.\n-\n-When version 2.8.0 is out (with its complete redesign of the template\n-implementation) a much more complete implementation of the\n-STL (based on a newer free implementation from SGI) will be included.\n-In the meantime, a group at the Moscow Center for Sparc Technology has\n+If you want to use the Standard Template Library, do not pass go,\n+upgrade immediately to gcc-2.8.0 or to egcs.  The new C++ front end\n+handles STL very well, and the high-quality implementation of STL\n+from SGI is included verbatim as part of the libstdc++ class library.\n+\n+If for some reason you must use 2.7.2, you can probably get by with\n+the hacked-up version of the old implementation from HP that is\n+included with libg++-2.7.2, but it is definitely inferior and has more\n+problems.  Alternatively, g++ 2.7.2.x users might try the following:\n+a group at the Moscow Center for Sparc Technology has\n a port of the SGI STL implementation that mostly works with gcc-2.7.2.\n See\n @file{http://www.ipmce.su/people/fbp/stl/stlport.html}.\n \n-In addition, there are several commercial suppliers of STL implementations;\n-ObjectSpace's version supports gcc-2.7.x.\n-\n Mumit Khan has produced an ``STL newbie guide'' with lots of information\n on using STL with gcc.  See\n \n@@ -1938,6 +2003,8 @@ on using STL with gcc.  See\n @node STL and string, exceptions, Standard Template Library, User Problems\n @section I'm having problems mixing STL and the standard string class\n \n+[ This section is for g++ 2.7.2.x users only ]\n+\n This is due to a bug in g++ version 2.7.2 and 2.7.2.1; the compiler\n is confused by the operator declarations.  There is an easy workaround,\n however; just make sure that the @code{<string>} header is included\n@@ -1981,36 +2048,42 @@ and ``VAX may also work'' (according to Mike Stump).\n \n As of version 2.7.2, g++ recognizes the keywords @code{namespace} and\n @code{using}, and there is some rudimentary code present, but almost\n-nothing connected with namespaces works yet.  It appears that this will\n-still be true when 2.8.0 is released.\n+nothing connected with namespaces works yet.\n+The new versions (2.8.0/egcs) still lack namespace support, but to help\n+compile standard programs they make\n+\n+@example\n+using namespace std;\n+@end example\n+\n+a no-op.\n \n @node agreement with standards, compiling standard libraries, namespaces, User Problems\n @section What are the differences between g++ and the ARM specification of C++?\n \n @cindex ARM [Annotated C++ Ref Manual]\n @cindex exceptions\n-As of version 2.7.0, g++ has exception support on most but not all\n-platforms\n-(no support on MIPS-based platforms yet), but\n-it doesn't work right if optimization is enabled, which means the\n-exception\n-implementation is still\n-not really ready for production use.\n \n+Up until recently, there was no really usable exception support.  If you\n+need exceptions, you want gcc-2.8.0 or egcs.  The implementation works\n+fairly well.  The 2.7.x version was strictly alpha quality and quite\n+fragile.\n \n @cindex mutable\n Some features that the ANSI/ISO standardization committee has voted in\n that don't appear in the ARM are supported, notably the @code{mutable}\n-keyword, in version 2.5.x.  2.6.x adds support for the built-in boolean\n-type @code{bool}, with constants @code{true} and @code{false}.  The\n-beginnings of run-time type identification are present, so there are\n+keyword, in version 2.5.x.  2.6.x added support for the built-in boolean\n+type @code{bool}, with constants @code{true} and @code{false}.  Run-time\n+type identification was rudimentary in 2.7.x but is fully supported in\n+2.8.0, so there are\n more reserved words: @code{typeid}, @code{static_cast},\n @code{reinterpret_cast}, @code{const_cast}, and @code{dynamic_cast}.\n \n @cindex g++ bugs\n As with any beta-test compiler, there are bugs.  You can help improve\n the compiler by submitting detailed bug reports.\n \n+[ This paragraph obsoleted by 2.8.0/egcs: ]\n One of the weakest areas of g++ other than templates is the resolution\n of overloaded functions and operators in complex cases.  The usual\n symptom is that in a case where the ARM says that it is ambiguous which\n@@ -2069,7 +2142,8 @@ debugging information in a format known as `DWARF'.\n Although the GNU C compiler already knows how to write out symbolic debugging\n information in the DWARF format, the GNU C++ compiler does not yet have this\n feature yet.  However, work is in progress for DWARF 2 debug support for\n-gcc and g++ and will be available in a future release (probably 2.8.0).\n+gcc and g++ and it works fairly well in 2.8.0 and egcs, though we'll\n+have to wait for gdb 4.17 to be released to take full advantage.\n \n @cindex stabs\n @cindex --with-stabs\n@@ -2235,6 +2309,10 @@ all the standard classes are in @file{-lstdc++}; you can do the link\n step with @code{c++} instead of @code{g++} to search only the\n @file{-lstdc++} library and avoid the LGPL'ed code in @file{-lg++}.\n \n+Note that in egcs and in gcc-2.8.0, if you do not\n+specify any libraries the @code{g++} command will only link in\n+@file{-lstdc++}, so your executable will not be affected by the LGPL.\n+\n If you wish to discuss legal issues connected with GNU software on the\n net, please use @file{gnu.misc.discuss}, not the technical newsgroups.\n "}, {"sha": "7bc897d26476c4e8206b2798b46f48b86f406e19", "filename": "gcc/cp/parse.c", "status": "modified", "additions": 219, "deletions": 215, "changes": 434, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparse.c?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -675,30 +675,30 @@ static const short yyrline[] = { 0,\n   3126,  3130,  3133,  3136,  3138,  3140,  3142,  3146,  3149,  3152,\n   3154,  3156,  3158,  3165,  3176,  3180,  3185,  3189,  3194,  3196,\n   3200,  3203,  3205,  3209,  3211,  3212,  3215,  3217,  3223,  3238,\n-  3244,  3250,  3264,  3266,  3270,  3286,  3292,  3307,  3314,  3320,\n-  3322,  3323,  3324,  3332,  3341,  3342,  3346,  3349,  3355,  3361,\n-  3364,  3366,  3368,  3370,  3374,  3378,  3382,  3385,  3390,  3393,\n-  3395,  3397,  3399,  3401,  3403,  3405,  3407,  3411,  3415,  3419,\n-  3423,  3424,  3426,  3428,  3430,  3432,  3434,  3436,  3438,  3440,\n-  3448,  3450,  3451,  3452,  3455,  3463,  3468,  3475,  3477,  3482,\n-  3484,  3487,  3501,  3504,  3507,  3516,  3528,  3539,  3559,  3569,\n-  3572,  3580,  3592,  3595,  3598,  3601,  3617,  3620,  3631,  3632,\n-  3636,  3651,  3670,  3682,  3696,  3710,  3723,  3742,  3760,  3779,\n-  3787,  3808,  3826,  3839,  3840,  3843,  3843,  3846,  3846,  3849,\n-  3849,  3855,  3861,  3864,  3869,  3876,  3885,  3894,  3903,  3911,\n-  3924,  3926,  3930,  3932,  3935,  3942,  3945,  3953,  3969,  3980,\n-  3992,  3994,  3997,  4007,  4017,  4028,  4030,  4032,  4035,  4052,\n-  4058,  4066,  4068,  4070,  4074,  4077,  4078,  4086,  4090,  4094,\n-  4097,  4098,  4104,  4107,  4110,  4112,  4116,  4121,  4124,  4134,\n-  4139,  4140,  4148,  4154,  4159,  4163,  4168,  4172,  4176,  4180,\n-  4185,  4196,  4210,  4214,  4217,  4219,  4223,  4227,  4230,  4233,\n-  4235,  4239,  4241,  4248,  4255,  4258,  4261,  4265,  4269,  4275,\n-  4279,  4284,  4286,  4289,  4294,  4300,  4311,  4314,  4316,  4320,\n-  4325,  4327,  4334,  4337,  4339,  4341,  4347,  4352,  4355,  4357,\n-  4359,  4361,  4363,  4365,  4367,  4369,  4371,  4373,  4375,  4377,\n-  4379,  4381,  4383,  4385,  4387,  4389,  4391,  4393,  4395,  4397,\n-  4399,  4401,  4403,  4405,  4407,  4409,  4411,  4413,  4415,  4417,\n-  4420,  4422\n+  3244,  3250,  3264,  3266,  3270,  3286,  3292,  3307,  3318,  3324,\n+  3326,  3327,  3328,  3336,  3345,  3346,  3350,  3353,  3359,  3365,\n+  3368,  3370,  3372,  3374,  3378,  3382,  3386,  3389,  3394,  3397,\n+  3399,  3401,  3403,  3405,  3407,  3409,  3411,  3415,  3419,  3423,\n+  3427,  3428,  3430,  3432,  3434,  3436,  3438,  3440,  3442,  3444,\n+  3452,  3454,  3455,  3456,  3459,  3467,  3472,  3479,  3481,  3486,\n+  3488,  3491,  3505,  3508,  3511,  3520,  3532,  3543,  3563,  3573,\n+  3576,  3584,  3596,  3599,  3602,  3605,  3621,  3624,  3635,  3636,\n+  3640,  3655,  3674,  3686,  3700,  3714,  3727,  3746,  3764,  3783,\n+  3791,  3812,  3830,  3843,  3844,  3847,  3847,  3850,  3850,  3853,\n+  3853,  3859,  3865,  3868,  3873,  3880,  3889,  3898,  3907,  3915,\n+  3928,  3930,  3934,  3936,  3939,  3946,  3949,  3957,  3973,  3984,\n+  3996,  3998,  4001,  4011,  4021,  4032,  4034,  4036,  4039,  4056,\n+  4062,  4070,  4072,  4074,  4078,  4081,  4082,  4090,  4094,  4098,\n+  4101,  4102,  4108,  4111,  4114,  4116,  4120,  4125,  4128,  4138,\n+  4143,  4144,  4152,  4158,  4163,  4167,  4172,  4176,  4180,  4184,\n+  4189,  4200,  4214,  4218,  4221,  4223,  4227,  4231,  4234,  4237,\n+  4239,  4243,  4245,  4252,  4259,  4262,  4265,  4269,  4273,  4279,\n+  4283,  4288,  4290,  4293,  4298,  4304,  4315,  4318,  4320,  4324,\n+  4329,  4331,  4338,  4341,  4343,  4345,  4351,  4356,  4359,  4361,\n+  4363,  4365,  4367,  4369,  4371,  4373,  4375,  4377,  4379,  4381,\n+  4383,  4385,  4387,  4389,  4391,  4393,  4395,  4397,  4399,  4401,\n+  4403,  4405,  4407,  4409,  4411,  4413,  4415,  4417,  4419,  4421,\n+  4424,  4426\n };\n #endif\n \n@@ -7213,32 +7213,36 @@ case 618:\n #line 3309 \"parse.y\"\n {\n \t\t  if (TREE_CODE (yyvsp[-1].ttype) != IDENTIFIER_NODE)\n-\t\t    yyval.ttype = lastiddecl;\n-\t\t  got_scope = yyval.ttype = complete_type (TREE_TYPE (yyval.ttype));\n+\t\t    yyvsp[-1].ttype = lastiddecl;\n+\n+\t\t  got_scope = yyval.ttype = complete_type (TREE_TYPE (yyvsp[-1].ttype));\n+\n+\t\t  if (yyval.ttype == error_mark_node)\n+\t\t    cp_error (\"`%T' is not a class or namespace\", yyvsp[-1].ttype);\n \t\t;\n     break;}\n case 619:\n-#line 3315 \"parse.y\"\n+#line 3319 \"parse.y\"\n {\n \t\t  if (TREE_CODE (yyvsp[-1].ttype) != IDENTIFIER_NODE)\n \t\t    yyval.ttype = lastiddecl;\n \t\t  got_scope = yyval.ttype = complete_type (TREE_TYPE (yyval.ttype));\n \t\t;\n     break;}\n case 620:\n-#line 3321 \"parse.y\"\n+#line 3325 \"parse.y\"\n { got_scope = yyval.ttype = complete_type (TREE_TYPE (yyval.ttype)); ;\n     break;}\n case 623:\n-#line 3325 \"parse.y\"\n+#line 3329 \"parse.y\"\n {\n \t\t  if (TREE_CODE (yyval.ttype) == IDENTIFIER_NODE)\n \t\t    yyval.ttype = lastiddecl;\n \t\t  got_scope = yyval.ttype;\n \t\t;\n     break;}\n case 624:\n-#line 3334 \"parse.y\"\n+#line 3338 \"parse.y\"\n {\n \t\t  if (TREE_CODE (yyvsp[0].ttype) == IDENTIFIER_NODE)\n \t\t    yyval.ttype = IDENTIFIER_GLOBAL_VALUE (yyvsp[0].ttype);\n@@ -7248,156 +7252,156 @@ case 624:\n \t\t;\n     break;}\n case 626:\n-#line 3343 \"parse.y\"\n+#line 3347 \"parse.y\"\n { yyval.ttype = yyvsp[0].ttype; ;\n     break;}\n case 627:\n-#line 3348 \"parse.y\"\n+#line 3352 \"parse.y\"\n { got_scope = NULL_TREE; ;\n     break;}\n case 628:\n-#line 3350 \"parse.y\"\n+#line 3354 \"parse.y\"\n { yyval.ttype = yyvsp[-1].ttype; got_scope = NULL_TREE; ;\n     break;}\n case 629:\n-#line 3357 \"parse.y\"\n+#line 3361 \"parse.y\"\n { got_scope = void_type_node; ;\n     break;}\n case 630:\n-#line 3363 \"parse.y\"\n+#line 3367 \"parse.y\"\n { yyval.ttype = make_pointer_declarator (yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 631:\n-#line 3365 \"parse.y\"\n+#line 3369 \"parse.y\"\n { yyval.ttype = make_pointer_declarator (yyvsp[0].ttype, NULL_TREE); ;\n     break;}\n case 632:\n-#line 3367 \"parse.y\"\n+#line 3371 \"parse.y\"\n { yyval.ttype = make_reference_declarator (yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 633:\n-#line 3369 \"parse.y\"\n+#line 3373 \"parse.y\"\n { yyval.ttype = make_reference_declarator (yyvsp[0].ttype, NULL_TREE); ;\n     break;}\n case 634:\n-#line 3371 \"parse.y\"\n+#line 3375 \"parse.y\"\n { tree arg = make_pointer_declarator (yyvsp[0].ttype, NULL_TREE);\n \t\t  yyval.ttype = build_parse_node (SCOPE_REF, yyvsp[-1].ttype, arg);\n \t\t;\n     break;}\n case 635:\n-#line 3375 \"parse.y\"\n+#line 3379 \"parse.y\"\n { tree arg = make_pointer_declarator (yyvsp[-1].ttype, yyvsp[0].ttype);\n \t\t  yyval.ttype = build_parse_node (SCOPE_REF, yyvsp[-2].ttype, arg);\n \t\t;\n     break;}\n case 637:\n-#line 3384 \"parse.y\"\n+#line 3388 \"parse.y\"\n { yyval.ttype = build_parse_node (ARRAY_REF, NULL_TREE, yyvsp[-1].ttype); ;\n     break;}\n case 638:\n-#line 3386 \"parse.y\"\n+#line 3390 \"parse.y\"\n { yyval.ttype = build_parse_node (ARRAY_REF, yyval.ttype, yyvsp[-1].ttype); ;\n     break;}\n case 639:\n-#line 3392 \"parse.y\"\n+#line 3396 \"parse.y\"\n { yyval.ttype = make_pointer_declarator (yyvsp[-1].ftype.t, yyvsp[0].ttype); ;\n     break;}\n case 640:\n-#line 3394 \"parse.y\"\n+#line 3398 \"parse.y\"\n { yyval.ttype = make_pointer_declarator (NULL_TREE, yyvsp[0].ttype); ;\n     break;}\n case 641:\n-#line 3396 \"parse.y\"\n+#line 3400 \"parse.y\"\n { yyval.ttype = make_pointer_declarator (yyvsp[0].ftype.t, NULL_TREE); ;\n     break;}\n case 642:\n-#line 3398 \"parse.y\"\n+#line 3402 \"parse.y\"\n { yyval.ttype = make_pointer_declarator (NULL_TREE, NULL_TREE); ;\n     break;}\n case 643:\n-#line 3400 \"parse.y\"\n+#line 3404 \"parse.y\"\n { yyval.ttype = make_reference_declarator (yyvsp[-1].ftype.t, yyvsp[0].ttype); ;\n     break;}\n case 644:\n-#line 3402 \"parse.y\"\n+#line 3406 \"parse.y\"\n { yyval.ttype = make_reference_declarator (NULL_TREE, yyvsp[0].ttype); ;\n     break;}\n case 645:\n-#line 3404 \"parse.y\"\n+#line 3408 \"parse.y\"\n { yyval.ttype = make_reference_declarator (yyvsp[0].ftype.t, NULL_TREE); ;\n     break;}\n case 646:\n-#line 3406 \"parse.y\"\n+#line 3410 \"parse.y\"\n { yyval.ttype = make_reference_declarator (NULL_TREE, NULL_TREE); ;\n     break;}\n case 647:\n-#line 3408 \"parse.y\"\n+#line 3412 \"parse.y\"\n { tree arg = make_pointer_declarator (yyvsp[0].ttype, NULL_TREE);\n \t\t  yyval.ttype = build_parse_node (SCOPE_REF, yyvsp[-1].ttype, arg);\n \t\t;\n     break;}\n case 648:\n-#line 3412 \"parse.y\"\n+#line 3416 \"parse.y\"\n { tree arg = make_pointer_declarator (yyvsp[-1].ttype, yyvsp[0].ttype);\n \t\t  yyval.ttype = build_parse_node (SCOPE_REF, yyvsp[-2].ttype, arg);\n \t\t;\n     break;}\n case 650:\n-#line 3421 \"parse.y\"\n+#line 3425 \"parse.y\"\n { yyval.ttype = yyvsp[-1].ttype; ;\n     break;}\n case 652:\n-#line 3425 \"parse.y\"\n+#line 3429 \"parse.y\"\n { yyval.ttype = make_call_declarator (yyval.ttype, yyvsp[-3].ttype, yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 653:\n-#line 3427 \"parse.y\"\n+#line 3431 \"parse.y\"\n { yyval.ttype = make_call_declarator (yyval.ttype, empty_parms (), yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 654:\n-#line 3429 \"parse.y\"\n+#line 3433 \"parse.y\"\n { yyval.ttype = build_parse_node (ARRAY_REF, yyval.ttype, yyvsp[-1].ttype); ;\n     break;}\n case 655:\n-#line 3431 \"parse.y\"\n+#line 3435 \"parse.y\"\n { yyval.ttype = build_parse_node (ARRAY_REF, yyval.ttype, NULL_TREE); ;\n     break;}\n case 656:\n-#line 3433 \"parse.y\"\n+#line 3437 \"parse.y\"\n { yyval.ttype = make_call_declarator (NULL_TREE, yyvsp[-3].ttype, yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 657:\n-#line 3435 \"parse.y\"\n+#line 3439 \"parse.y\"\n { set_quals_and_spec (yyval.ttype, yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 658:\n-#line 3437 \"parse.y\"\n+#line 3441 \"parse.y\"\n { set_quals_and_spec (yyval.ttype, yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 659:\n-#line 3439 \"parse.y\"\n+#line 3443 \"parse.y\"\n { yyval.ttype = build_parse_node (ARRAY_REF, NULL_TREE, yyvsp[-1].ttype); ;\n     break;}\n case 660:\n-#line 3441 \"parse.y\"\n+#line 3445 \"parse.y\"\n { yyval.ttype = build_parse_node (ARRAY_REF, NULL_TREE, NULL_TREE); ;\n     break;}\n case 666:\n-#line 3465 \"parse.y\"\n+#line 3469 \"parse.y\"\n { do_pushlevel (); ;\n     break;}\n case 667:\n-#line 3470 \"parse.y\"\n+#line 3474 \"parse.y\"\n { yyval.ttype = do_poplevel (); ;\n     break;}\n case 669:\n-#line 3478 \"parse.y\"\n+#line 3482 \"parse.y\"\n { if (pedantic)\n \t\t    pedwarn (\"ANSI C++ forbids label declarations\"); ;\n     break;}\n case 672:\n-#line 3489 \"parse.y\"\n+#line 3493 \"parse.y\"\n { tree link;\n \t\t  for (link = yyvsp[-1].ttype; link; link = TREE_CHAIN (link))\n \t\t    {\n@@ -7408,11 +7412,11 @@ case 672:\n \t\t;\n     break;}\n case 673:\n-#line 3503 \"parse.y\"\n+#line 3507 \"parse.y\"\n {;\n     break;}\n case 675:\n-#line 3509 \"parse.y\"\n+#line 3513 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7422,7 +7426,7 @@ case 675:\n \t\t;\n     break;}\n case 676:\n-#line 3517 \"parse.y\"\n+#line 3521 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7434,7 +7438,7 @@ case 676:\n \t\t;\n     break;}\n case 677:\n-#line 3530 \"parse.y\"\n+#line 3534 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7446,7 +7450,7 @@ case 677:\n \t\t;\n     break;}\n case 678:\n-#line 3540 \"parse.y\"\n+#line 3544 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7467,7 +7471,7 @@ case 678:\n \t\t;\n     break;}\n case 679:\n-#line 3559 \"parse.y\"\n+#line 3563 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7478,11 +7482,11 @@ case 679:\n \t\t;\n     break;}\n case 680:\n-#line 3571 \"parse.y\"\n+#line 3575 \"parse.y\"\n { finish_stmt (); ;\n     break;}\n case 681:\n-#line 3573 \"parse.y\"\n+#line 3577 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7492,7 +7496,7 @@ case 681:\n \t\t;\n     break;}\n case 682:\n-#line 3581 \"parse.y\"\n+#line 3585 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7504,15 +7508,15 @@ case 682:\n \t\t;\n     break;}\n case 683:\n-#line 3594 \"parse.y\"\n+#line 3598 \"parse.y\"\n { finish_stmt (); ;\n     break;}\n case 685:\n-#line 3600 \"parse.y\"\n+#line 3604 \"parse.y\"\n { finish_stmt (); ;\n     break;}\n case 686:\n-#line 3602 \"parse.y\"\n+#line 3606 \"parse.y\"\n {\n \t\t  tree expr = yyvsp[-1].ttype;\n \t\t  if (! processing_template_decl)\n@@ -7530,11 +7534,11 @@ case 686:\n \t\t  finish_stmt (); ;\n     break;}\n case 687:\n-#line 3618 \"parse.y\"\n+#line 3622 \"parse.y\"\n { if (! processing_template_decl) expand_start_else (); ;\n     break;}\n case 688:\n-#line 3620 \"parse.y\"\n+#line 3624 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7547,17 +7551,17 @@ case 688:\n \t\t;\n     break;}\n case 689:\n-#line 3631 \"parse.y\"\n+#line 3635 \"parse.y\"\n { finish_stmt (); ;\n     break;}\n case 690:\n-#line 3633 \"parse.y\"\n+#line 3637 \"parse.y\"\n { if (! processing_template_decl) expand_end_cond ();\n \t\t  do_poplevel ();\n \t\t  finish_stmt (); ;\n     break;}\n case 691:\n-#line 3637 \"parse.y\"\n+#line 3641 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7574,7 +7578,7 @@ case 691:\n \t\t;\n     break;}\n case 692:\n-#line 3652 \"parse.y\"\n+#line 3656 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7595,7 +7599,7 @@ case 692:\n \t\t;\n     break;}\n case 693:\n-#line 3671 \"parse.y\"\n+#line 3675 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7609,7 +7613,7 @@ case 693:\n \t\t;\n     break;}\n case 694:\n-#line 3683 \"parse.y\"\n+#line 3687 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7625,7 +7629,7 @@ case 694:\n \t\t;\n     break;}\n case 695:\n-#line 3697 \"parse.y\"\n+#line 3701 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7641,7 +7645,7 @@ case 695:\n \t\t;\n     break;}\n case 696:\n-#line 3711 \"parse.y\"\n+#line 3715 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    TREE_OPERAND (yyvsp[-5].ttype, 1) = yyvsp[-1].ttype;\n@@ -7656,7 +7660,7 @@ case 696:\n \t\t;\n     break;}\n case 697:\n-#line 3724 \"parse.y\"\n+#line 3728 \"parse.y\"\n { if (processing_template_decl)\n \t\t    {\n \t\t      yyval.ttype = build_min_nt (FOR_STMT, NULL_TREE, NULL_TREE, \n@@ -7677,7 +7681,7 @@ case 697:\n \t\t;\n     break;}\n case 698:\n-#line 3743 \"parse.y\"\n+#line 3747 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7697,7 +7701,7 @@ case 698:\n \t\t;\n     break;}\n case 699:\n-#line 3761 \"parse.y\"\n+#line 3765 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7718,15 +7722,15 @@ case 699:\n \t\t;\n     break;}\n case 700:\n-#line 3782 \"parse.y\"\n+#line 3786 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    TREE_OPERAND (yyvsp[-9].ttype, 2) = yyvsp[-1].ttype;\n \t\t  push_momentary ();\n \t\t;\n     break;}\n case 701:\n-#line 3788 \"parse.y\"\n+#line 3792 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7749,7 +7753,7 @@ case 701:\n \t\t  finish_stmt (); ;\n     break;}\n case 702:\n-#line 3809 \"parse.y\"\n+#line 3813 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7768,7 +7772,7 @@ case 702:\n \t\t;\n     break;}\n case 703:\n-#line 3826 \"parse.y\"\n+#line 3830 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7783,59 +7787,59 @@ case 703:\n \t\t;\n     break;}\n case 704:\n-#line 3839 \"parse.y\"\n+#line 3843 \"parse.y\"\n { finish_stmt (); ;\n     break;}\n case 705:\n-#line 3841 \"parse.y\"\n+#line 3845 \"parse.y\"\n { do_case (yyvsp[-1].ttype, NULL_TREE); ;\n     break;}\n case 707:\n-#line 3844 \"parse.y\"\n+#line 3848 \"parse.y\"\n { do_case (yyvsp[-3].ttype, yyvsp[-1].ttype); ;\n     break;}\n case 709:\n-#line 3847 \"parse.y\"\n+#line 3851 \"parse.y\"\n { do_case (NULL_TREE, NULL_TREE); ;\n     break;}\n case 711:\n-#line 3850 \"parse.y\"\n+#line 3854 \"parse.y\"\n { emit_line_note (input_filename, lineno);\n \t\t  if (processing_template_decl)\n \t\t    add_tree (build_min_nt (BREAK_STMT));\n \t\t  else if ( ! expand_exit_something ())\n \t\t    error (\"break statement not within loop or switch\"); ;\n     break;}\n case 712:\n-#line 3856 \"parse.y\"\n+#line 3860 \"parse.y\"\n { emit_line_note (input_filename, lineno);\n \t\t  if (processing_template_decl)\n \t\t    add_tree (build_min_nt (CONTINUE_STMT));\n \t\t  else if (! expand_continue_loop (0))\n \t\t    error (\"continue statement not within a loop\"); ;\n     break;}\n case 713:\n-#line 3862 \"parse.y\"\n+#line 3866 \"parse.y\"\n { emit_line_note (input_filename, lineno);\n \t\t  c_expand_return (NULL_TREE); ;\n     break;}\n case 714:\n-#line 3865 \"parse.y\"\n+#line 3869 \"parse.y\"\n { emit_line_note (input_filename, lineno);\n \t\t  c_expand_return (yyvsp[-1].ttype);\n \t\t  finish_stmt ();\n \t\t;\n     break;}\n case 715:\n-#line 3870 \"parse.y\"\n+#line 3874 \"parse.y\"\n { if (TREE_CHAIN (yyvsp[-2].ttype)) yyvsp[-2].ttype = combine_strings (yyvsp[-2].ttype);\n \t\t  emit_line_note (input_filename, lineno);\n \t\t  expand_asm (yyvsp[-2].ttype);\n \t\t  finish_stmt ();\n \t\t;\n     break;}\n case 716:\n-#line 3877 \"parse.y\"\n+#line 3881 \"parse.y\"\n { if (TREE_CHAIN (yyvsp[-4].ttype)) yyvsp[-4].ttype = combine_strings (yyvsp[-4].ttype);\n \t\t  emit_line_note (input_filename, lineno);\n \t\t  c_expand_asm_operands (yyvsp[-4].ttype, yyvsp[-2].ttype, NULL_TREE, NULL_TREE,\n@@ -7845,7 +7849,7 @@ case 716:\n \t\t;\n     break;}\n case 717:\n-#line 3886 \"parse.y\"\n+#line 3890 \"parse.y\"\n { if (TREE_CHAIN (yyvsp[-6].ttype)) yyvsp[-6].ttype = combine_strings (yyvsp[-6].ttype);\n \t\t  emit_line_note (input_filename, lineno);\n \t\t  c_expand_asm_operands (yyvsp[-6].ttype, yyvsp[-4].ttype, yyvsp[-2].ttype, NULL_TREE,\n@@ -7855,7 +7859,7 @@ case 717:\n \t\t;\n     break;}\n case 718:\n-#line 3896 \"parse.y\"\n+#line 3900 \"parse.y\"\n { if (TREE_CHAIN (yyvsp[-8].ttype)) yyvsp[-8].ttype = combine_strings (yyvsp[-8].ttype);\n \t\t  emit_line_note (input_filename, lineno);\n \t\t  c_expand_asm_operands (yyvsp[-8].ttype, yyvsp[-6].ttype, yyvsp[-4].ttype, yyvsp[-2].ttype,\n@@ -7865,7 +7869,7 @@ case 718:\n \t\t;\n     break;}\n case 719:\n-#line 3904 \"parse.y\"\n+#line 3908 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    add_tree (build_min_nt (GOTO_STMT, yyvsp[-1].ttype));\n@@ -7875,7 +7879,7 @@ case 719:\n \t\t;\n     break;}\n case 720:\n-#line 3912 \"parse.y\"\n+#line 3916 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    add_tree (build_min_nt (GOTO_STMT, yyvsp[-1].ttype));\n@@ -7890,33 +7894,33 @@ case 720:\n \t\t;\n     break;}\n case 721:\n-#line 3925 \"parse.y\"\n+#line 3929 \"parse.y\"\n { finish_stmt (); ;\n     break;}\n case 722:\n-#line 3927 \"parse.y\"\n+#line 3931 \"parse.y\"\n { error (\"label must be followed by statement\");\n \t\t  yyungetc ('}', 0);\n \t\t  finish_stmt (); ;\n     break;}\n case 723:\n-#line 3931 \"parse.y\"\n+#line 3935 \"parse.y\"\n { finish_stmt (); ;\n     break;}\n case 725:\n-#line 3937 \"parse.y\"\n+#line 3941 \"parse.y\"\n {\n \t\t  if (! current_function_parms_stored)\n \t\t    store_parm_decls ();\n \t\t  expand_start_early_try_stmts ();\n \t\t;\n     break;}\n case 726:\n-#line 3943 \"parse.y\"\n+#line 3947 \"parse.y\"\n { expand_start_all_catch (); ;\n     break;}\n case 727:\n-#line 3945 \"parse.y\"\n+#line 3949 \"parse.y\"\n {\n \t\t  int nested = (hack_decl_function_context\n \t\t\t\t(current_function_decl) != NULL_TREE);\n@@ -7925,7 +7929,7 @@ case 727:\n \t\t;\n     break;}\n case 728:\n-#line 3955 \"parse.y\"\n+#line 3959 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7941,7 +7945,7 @@ case 728:\n \t\t;\n     break;}\n case 729:\n-#line 3969 \"parse.y\"\n+#line 3973 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7954,7 +7958,7 @@ case 729:\n \t\t;\n     break;}\n case 730:\n-#line 3980 \"parse.y\"\n+#line 3984 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7967,7 +7971,7 @@ case 730:\n \t\t;\n     break;}\n case 733:\n-#line 3999 \"parse.y\"\n+#line 4003 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7978,7 +7982,7 @@ case 733:\n \t\t;\n     break;}\n case 734:\n-#line 4008 \"parse.y\"\n+#line 4012 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -7989,7 +7993,7 @@ case 734:\n \t\t;\n     break;}\n case 735:\n-#line 4017 \"parse.y\"\n+#line 4021 \"parse.y\"\n {\n \t\t  if (processing_template_decl)\n \t\t    {\n@@ -8002,17 +8006,17 @@ case 735:\n \t\t;\n     break;}\n case 739:\n-#line 4037 \"parse.y\"\n+#line 4041 \"parse.y\"\n { expand_start_catch_block (NULL_TREE, NULL_TREE); ;\n     break;}\n case 740:\n-#line 4053 \"parse.y\"\n+#line 4057 \"parse.y\"\n { check_for_new_type (\"inside exception declarations\", yyvsp[-1].ftype);\n \t\t  expand_start_catch_block (TREE_PURPOSE (yyvsp[-1].ftype.t),\n \t\t\t\t\t    TREE_VALUE (yyvsp[-1].ftype.t)); ;\n     break;}\n case 741:\n-#line 4060 \"parse.y\"\n+#line 4064 \"parse.y\"\n { tree label;\n \t\tdo_label:\n \t\t  label = define_label (input_filename, lineno, yyvsp[-1].ttype);\n@@ -8021,129 +8025,129 @@ case 741:\n \t\t;\n     break;}\n case 742:\n-#line 4067 \"parse.y\"\n+#line 4071 \"parse.y\"\n { goto do_label; ;\n     break;}\n case 743:\n-#line 4069 \"parse.y\"\n+#line 4073 \"parse.y\"\n { goto do_label; ;\n     break;}\n case 744:\n-#line 4071 \"parse.y\"\n+#line 4075 \"parse.y\"\n { goto do_label; ;\n     break;}\n case 745:\n-#line 4076 \"parse.y\"\n+#line 4080 \"parse.y\"\n { if (yyvsp[-1].ttype) cplus_expand_expr_stmt (yyvsp[-1].ttype); ;\n     break;}\n case 747:\n-#line 4079 \"parse.y\"\n+#line 4083 \"parse.y\"\n { if (pedantic)\n \t\t    pedwarn (\"ANSI C++ forbids compound statements inside for initializations\");\n \t\t;\n     break;}\n case 748:\n-#line 4088 \"parse.y\"\n+#line 4092 \"parse.y\"\n { emit_line_note (input_filename, lineno);\n \t\t  yyval.ttype = NULL_TREE; ;\n     break;}\n case 749:\n-#line 4091 \"parse.y\"\n+#line 4095 \"parse.y\"\n { emit_line_note (input_filename, lineno); ;\n     break;}\n case 750:\n-#line 4096 \"parse.y\"\n+#line 4100 \"parse.y\"\n { yyval.ttype = NULL_TREE; ;\n     break;}\n case 752:\n-#line 4099 \"parse.y\"\n+#line 4103 \"parse.y\"\n { yyval.ttype = NULL_TREE; ;\n     break;}\n case 753:\n-#line 4106 \"parse.y\"\n+#line 4110 \"parse.y\"\n { yyval.ttype = NULL_TREE; ;\n     break;}\n case 756:\n-#line 4113 \"parse.y\"\n+#line 4117 \"parse.y\"\n { yyval.ttype = chainon (yyval.ttype, yyvsp[0].ttype); ;\n     break;}\n case 757:\n-#line 4118 \"parse.y\"\n+#line 4122 \"parse.y\"\n { yyval.ttype = build_tree_list (yyval.ttype, yyvsp[-1].ttype); ;\n     break;}\n case 758:\n-#line 4123 \"parse.y\"\n+#line 4127 \"parse.y\"\n { yyval.ttype = tree_cons (NULL_TREE, yyval.ttype, NULL_TREE); ;\n     break;}\n case 759:\n-#line 4125 \"parse.y\"\n+#line 4129 \"parse.y\"\n { yyval.ttype = tree_cons (NULL_TREE, yyvsp[0].ttype, yyval.ttype); ;\n     break;}\n case 760:\n-#line 4136 \"parse.y\"\n+#line 4140 \"parse.y\"\n {\n \t\t  yyval.ttype = empty_parms();\n \t\t;\n     break;}\n case 762:\n-#line 4141 \"parse.y\"\n+#line 4145 \"parse.y\"\n { yyval.ttype = tree_cons (NULL_TREE, yyvsp[0].ftype.t, void_list_node);\n \t\t  TREE_PARMLIST (yyval.ttype) = 1; \n \t\t  check_for_new_type (\"inside parameter list\", yyvsp[0].ftype); ;\n     break;}\n case 763:\n-#line 4150 \"parse.y\"\n+#line 4154 \"parse.y\"\n {\n \t\t  yyval.ttype = chainon (yyval.ttype, void_list_node);\n \t\t  TREE_PARMLIST (yyval.ttype) = 1;\n \t\t;\n     break;}\n case 764:\n-#line 4155 \"parse.y\"\n+#line 4159 \"parse.y\"\n {\n \t\t  TREE_PARMLIST (yyval.ttype) = 1;\n \t\t;\n     break;}\n case 765:\n-#line 4160 \"parse.y\"\n+#line 4164 \"parse.y\"\n {\n \t\t  TREE_PARMLIST (yyval.ttype) = 1;\n \t\t;\n     break;}\n case 766:\n-#line 4164 \"parse.y\"\n+#line 4168 \"parse.y\"\n {\n \t\t  yyval.ttype = build_tree_list (NULL_TREE, yyvsp[-1].ftype.t); \n \t\t  TREE_PARMLIST (yyval.ttype) = 1;\n \t\t;\n     break;}\n case 767:\n-#line 4169 \"parse.y\"\n+#line 4173 \"parse.y\"\n {\n \t\t  yyval.ttype = NULL_TREE;\n \t\t;\n     break;}\n case 768:\n-#line 4173 \"parse.y\"\n+#line 4177 \"parse.y\"\n {\n \t\t  TREE_PARMLIST (yyval.ttype) = 1;\n \t\t;\n     break;}\n case 769:\n-#line 4177 \"parse.y\"\n+#line 4181 \"parse.y\"\n {\n \t\t  TREE_PARMLIST (yyval.ttype) = 1;\n \t\t;\n     break;}\n case 770:\n-#line 4181 \"parse.y\"\n+#line 4185 \"parse.y\"\n {\n \t\t  yyval.ttype = build_tree_list (NULL_TREE, yyvsp[-1].ftype.t);\n \t\t  TREE_PARMLIST (yyval.ttype) = 1;\n \t\t;\n     break;}\n case 771:\n-#line 4186 \"parse.y\"\n+#line 4190 \"parse.y\"\n {\n \t\t  /* This helps us recover from really nasty\n \t\t     parse errors, for example, a missing right\n@@ -8156,7 +8160,7 @@ case 771:\n \t\t;\n     break;}\n case 772:\n-#line 4197 \"parse.y\"\n+#line 4201 \"parse.y\"\n {\n \t\t  /* This helps us recover from really nasty\n \t\t     parse errors, for example, a missing right\n@@ -8169,98 +8173,98 @@ case 772:\n \t\t;\n     break;}\n case 773:\n-#line 4212 \"parse.y\"\n+#line 4216 \"parse.y\"\n { maybe_snarf_defarg (); ;\n     break;}\n case 774:\n-#line 4214 \"parse.y\"\n+#line 4218 \"parse.y\"\n { yyval.ttype = yyvsp[0].ttype; ;\n     break;}\n case 777:\n-#line 4225 \"parse.y\"\n+#line 4229 \"parse.y\"\n { check_for_new_type (\"in a parameter list\", yyvsp[0].ftype);\n \t\t  yyval.ttype = build_tree_list (NULL_TREE, yyvsp[0].ftype.t); ;\n     break;}\n case 778:\n-#line 4228 \"parse.y\"\n+#line 4232 \"parse.y\"\n { check_for_new_type (\"in a parameter list\", yyvsp[-1].ftype);\n \t\t  yyval.ttype = build_tree_list (yyvsp[0].ttype, yyvsp[-1].ftype.t); ;\n     break;}\n case 779:\n-#line 4231 \"parse.y\"\n+#line 4235 \"parse.y\"\n { check_for_new_type (\"in a parameter list\", yyvsp[0].ftype);\n \t\t  yyval.ttype = chainon (yyval.ttype, yyvsp[0].ftype.t); ;\n     break;}\n case 780:\n-#line 4234 \"parse.y\"\n+#line 4238 \"parse.y\"\n { yyval.ttype = chainon (yyval.ttype, build_tree_list (NULL_TREE, yyvsp[0].ttype)); ;\n     break;}\n case 781:\n-#line 4236 \"parse.y\"\n+#line 4240 \"parse.y\"\n { yyval.ttype = chainon (yyval.ttype, build_tree_list (yyvsp[0].ttype, yyvsp[-2].ttype)); ;\n     break;}\n case 783:\n-#line 4242 \"parse.y\"\n+#line 4246 \"parse.y\"\n { check_for_new_type (\"in a parameter list\", yyvsp[-1].ftype);\n \t\t  yyval.ttype = build_tree_list (NULL_TREE, yyvsp[-1].ftype.t); ;\n     break;}\n case 784:\n-#line 4252 \"parse.y\"\n+#line 4256 \"parse.y\"\n { tree specs = strip_attrs (yyvsp[-1].ftype.t);\n \t\t  yyval.ftype.new_type_flag = yyvsp[-1].ftype.new_type_flag;\n \t\t  yyval.ftype.t = build_tree_list (specs, yyvsp[0].ttype); ;\n     break;}\n case 785:\n-#line 4256 \"parse.y\"\n+#line 4260 \"parse.y\"\n { yyval.ftype.t = build_tree_list (yyvsp[-1].ftype.t, yyvsp[0].ttype); \n \t\t  yyval.ftype.new_type_flag = yyvsp[-1].ftype.new_type_flag; ;\n     break;}\n case 786:\n-#line 4259 \"parse.y\"\n+#line 4263 \"parse.y\"\n { yyval.ftype.t = build_tree_list (get_decl_list (yyvsp[-1].ftype.t), yyvsp[0].ttype); \n \t\t  yyval.ftype.new_type_flag = yyvsp[-1].ftype.new_type_flag; ;\n     break;}\n case 787:\n-#line 4262 \"parse.y\"\n+#line 4266 \"parse.y\"\n { tree specs = strip_attrs (yyvsp[-1].ftype.t);\n \t\t  yyval.ftype.t = build_tree_list (specs, yyvsp[0].ttype);\n \t\t  yyval.ftype.new_type_flag = yyvsp[-1].ftype.new_type_flag; ;\n     break;}\n case 788:\n-#line 4266 \"parse.y\"\n+#line 4270 \"parse.y\"\n { tree specs = strip_attrs (yyvsp[0].ftype.t);\n \t\t  yyval.ftype.t = build_tree_list (specs, NULL_TREE); \n \t\t  yyval.ftype.new_type_flag = yyvsp[0].ftype.new_type_flag; ;\n     break;}\n case 789:\n-#line 4270 \"parse.y\"\n+#line 4274 \"parse.y\"\n { tree specs = strip_attrs (yyvsp[-1].ttype);\n \t\t  yyval.ftype.t = build_tree_list (specs, yyvsp[0].ttype); \n \t\t  yyval.ftype.new_type_flag = 0; ;\n     break;}\n case 790:\n-#line 4277 \"parse.y\"\n+#line 4281 \"parse.y\"\n { yyval.ftype.t = build_tree_list (NULL_TREE, yyvsp[0].ftype.t);\n \t\t  yyval.ftype.new_type_flag = yyvsp[0].ftype.new_type_flag;  ;\n     break;}\n case 791:\n-#line 4280 \"parse.y\"\n+#line 4284 \"parse.y\"\n { yyval.ftype.t = build_tree_list (yyvsp[0].ttype, yyvsp[-1].ftype.t);\n \t\t  yyval.ftype.new_type_flag = yyvsp[-1].ftype.new_type_flag;  ;\n     break;}\n case 794:\n-#line 4291 \"parse.y\"\n+#line 4295 \"parse.y\"\n { see_typename (); ;\n     break;}\n case 795:\n-#line 4296 \"parse.y\"\n+#line 4300 \"parse.y\"\n {\n \t\t  error (\"type specifier omitted for parameter\");\n \t\t  yyval.ttype = build_tree_list (integer_type_node, NULL_TREE);\n \t\t;\n     break;}\n case 796:\n-#line 4301 \"parse.y\"\n+#line 4305 \"parse.y\"\n {\n \t\t  error (\"type specifier omitted for parameter\");\n \t\t  if (TREE_CODE (yyval.ttype) == SCOPE_REF\n@@ -8271,188 +8275,188 @@ case 796:\n \t\t;\n     break;}\n case 797:\n-#line 4313 \"parse.y\"\n+#line 4317 \"parse.y\"\n { yyval.ttype = NULL_TREE; ;\n     break;}\n case 798:\n-#line 4315 \"parse.y\"\n+#line 4319 \"parse.y\"\n { yyval.ttype = yyvsp[-1].ttype; ;\n     break;}\n case 799:\n-#line 4317 \"parse.y\"\n+#line 4321 \"parse.y\"\n { yyval.ttype = build_decl_list (NULL_TREE, NULL_TREE); ;\n     break;}\n case 800:\n-#line 4322 \"parse.y\"\n+#line 4326 \"parse.y\"\n { yyval.ttype = build_decl_list (NULL_TREE, groktypename(yyvsp[0].ftype.t)); ;\n     break;}\n case 802:\n-#line 4328 \"parse.y\"\n+#line 4332 \"parse.y\"\n {\n \t\t  TREE_CHAIN (yyvsp[0].ttype) = yyval.ttype;\n \t\t  yyval.ttype = yyvsp[0].ttype;\n \t\t;\n     break;}\n case 803:\n-#line 4336 \"parse.y\"\n+#line 4340 \"parse.y\"\n { yyval.ttype = NULL_TREE; ;\n     break;}\n case 804:\n-#line 4338 \"parse.y\"\n+#line 4342 \"parse.y\"\n { yyval.ttype = make_pointer_declarator (yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 805:\n-#line 4340 \"parse.y\"\n+#line 4344 \"parse.y\"\n { yyval.ttype = make_reference_declarator (yyvsp[-1].ttype, yyvsp[0].ttype); ;\n     break;}\n case 806:\n-#line 4342 \"parse.y\"\n+#line 4346 \"parse.y\"\n { tree arg = make_pointer_declarator (yyvsp[-1].ttype, yyvsp[0].ttype);\n \t\t  yyval.ttype = build_parse_node (SCOPE_REF, yyvsp[-2].ttype, arg);\n \t\t;\n     break;}\n case 807:\n-#line 4349 \"parse.y\"\n+#line 4353 \"parse.y\"\n { got_scope = NULL_TREE; ;\n     break;}\n case 808:\n-#line 4354 \"parse.y\"\n+#line 4358 \"parse.y\"\n { yyval.ttype = ansi_opname[MULT_EXPR]; ;\n     break;}\n case 809:\n-#line 4356 \"parse.y\"\n+#line 4360 \"parse.y\"\n { yyval.ttype = ansi_opname[TRUNC_DIV_EXPR]; ;\n     break;}\n case 810:\n-#line 4358 \"parse.y\"\n+#line 4362 \"parse.y\"\n { yyval.ttype = ansi_opname[TRUNC_MOD_EXPR]; ;\n     break;}\n case 811:\n-#line 4360 \"parse.y\"\n+#line 4364 \"parse.y\"\n { yyval.ttype = ansi_opname[PLUS_EXPR]; ;\n     break;}\n case 812:\n-#line 4362 \"parse.y\"\n+#line 4366 \"parse.y\"\n { yyval.ttype = ansi_opname[MINUS_EXPR]; ;\n     break;}\n case 813:\n-#line 4364 \"parse.y\"\n+#line 4368 \"parse.y\"\n { yyval.ttype = ansi_opname[BIT_AND_EXPR]; ;\n     break;}\n case 814:\n-#line 4366 \"parse.y\"\n+#line 4370 \"parse.y\"\n { yyval.ttype = ansi_opname[BIT_IOR_EXPR]; ;\n     break;}\n case 815:\n-#line 4368 \"parse.y\"\n+#line 4372 \"parse.y\"\n { yyval.ttype = ansi_opname[BIT_XOR_EXPR]; ;\n     break;}\n case 816:\n-#line 4370 \"parse.y\"\n+#line 4374 \"parse.y\"\n { yyval.ttype = ansi_opname[BIT_NOT_EXPR]; ;\n     break;}\n case 817:\n-#line 4372 \"parse.y\"\n+#line 4376 \"parse.y\"\n { yyval.ttype = ansi_opname[COMPOUND_EXPR]; ;\n     break;}\n case 818:\n-#line 4374 \"parse.y\"\n+#line 4378 \"parse.y\"\n { yyval.ttype = ansi_opname[yyvsp[0].code]; ;\n     break;}\n case 819:\n-#line 4376 \"parse.y\"\n+#line 4380 \"parse.y\"\n { yyval.ttype = ansi_opname[LT_EXPR]; ;\n     break;}\n case 820:\n-#line 4378 \"parse.y\"\n+#line 4382 \"parse.y\"\n { yyval.ttype = ansi_opname[GT_EXPR]; ;\n     break;}\n case 821:\n-#line 4380 \"parse.y\"\n+#line 4384 \"parse.y\"\n { yyval.ttype = ansi_opname[yyvsp[0].code]; ;\n     break;}\n case 822:\n-#line 4382 \"parse.y\"\n+#line 4386 \"parse.y\"\n { yyval.ttype = ansi_assopname[yyvsp[0].code]; ;\n     break;}\n case 823:\n-#line 4384 \"parse.y\"\n+#line 4388 \"parse.y\"\n { yyval.ttype = ansi_opname [MODIFY_EXPR]; ;\n     break;}\n case 824:\n-#line 4386 \"parse.y\"\n+#line 4390 \"parse.y\"\n { yyval.ttype = ansi_opname[yyvsp[0].code]; ;\n     break;}\n case 825:\n-#line 4388 \"parse.y\"\n+#line 4392 \"parse.y\"\n { yyval.ttype = ansi_opname[yyvsp[0].code]; ;\n     break;}\n case 826:\n-#line 4390 \"parse.y\"\n+#line 4394 \"parse.y\"\n { yyval.ttype = ansi_opname[POSTINCREMENT_EXPR]; ;\n     break;}\n case 827:\n-#line 4392 \"parse.y\"\n+#line 4396 \"parse.y\"\n { yyval.ttype = ansi_opname[PREDECREMENT_EXPR]; ;\n     break;}\n case 828:\n-#line 4394 \"parse.y\"\n+#line 4398 \"parse.y\"\n { yyval.ttype = ansi_opname[TRUTH_ANDIF_EXPR]; ;\n     break;}\n case 829:\n-#line 4396 \"parse.y\"\n+#line 4400 \"parse.y\"\n { yyval.ttype = ansi_opname[TRUTH_ORIF_EXPR]; ;\n     break;}\n case 830:\n-#line 4398 \"parse.y\"\n+#line 4402 \"parse.y\"\n { yyval.ttype = ansi_opname[TRUTH_NOT_EXPR]; ;\n     break;}\n case 831:\n-#line 4400 \"parse.y\"\n+#line 4404 \"parse.y\"\n { yyval.ttype = ansi_opname[COND_EXPR]; ;\n     break;}\n case 832:\n-#line 4402 \"parse.y\"\n+#line 4406 \"parse.y\"\n { yyval.ttype = ansi_opname[yyvsp[0].code]; ;\n     break;}\n case 833:\n-#line 4404 \"parse.y\"\n+#line 4408 \"parse.y\"\n { yyval.ttype = ansi_opname[COMPONENT_REF]; ;\n     break;}\n case 834:\n-#line 4406 \"parse.y\"\n+#line 4410 \"parse.y\"\n { yyval.ttype = ansi_opname[MEMBER_REF]; ;\n     break;}\n case 835:\n-#line 4408 \"parse.y\"\n+#line 4412 \"parse.y\"\n { yyval.ttype = ansi_opname[CALL_EXPR]; ;\n     break;}\n case 836:\n-#line 4410 \"parse.y\"\n+#line 4414 \"parse.y\"\n { yyval.ttype = ansi_opname[ARRAY_REF]; ;\n     break;}\n case 837:\n-#line 4412 \"parse.y\"\n+#line 4416 \"parse.y\"\n { yyval.ttype = ansi_opname[NEW_EXPR]; ;\n     break;}\n case 838:\n-#line 4414 \"parse.y\"\n+#line 4418 \"parse.y\"\n { yyval.ttype = ansi_opname[DELETE_EXPR]; ;\n     break;}\n case 839:\n-#line 4416 \"parse.y\"\n+#line 4420 \"parse.y\"\n { yyval.ttype = ansi_opname[VEC_NEW_EXPR]; ;\n     break;}\n case 840:\n-#line 4418 \"parse.y\"\n+#line 4422 \"parse.y\"\n { yyval.ttype = ansi_opname[VEC_DELETE_EXPR]; ;\n     break;}\n case 841:\n-#line 4421 \"parse.y\"\n+#line 4425 \"parse.y\"\n { yyval.ttype = grokoptypename (yyvsp[-1].ftype.t, yyvsp[0].ttype); ;\n     break;}\n case 842:\n-#line 4423 \"parse.y\"\n+#line 4427 \"parse.y\"\n { yyval.ttype = ansi_opname[ERROR_MARK]; ;\n     break;}\n }\n@@ -8653,7 +8657,7 @@ case 842:\n   yystate = yyn;\n   goto yynewstate;\n }\n-#line 4426 \"parse.y\"\n+#line 4430 \"parse.y\"\n \n \n #ifdef SPEW_DEBUG"}, {"sha": "ddaca24fa7391aa95f2e68d219a9743be1315dc0", "filename": "gcc/cp/parse.y", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparse.y?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -3309,8 +3309,12 @@ typename_sub2:\n \t  TYPENAME SCOPE\n \t\t{\n \t\t  if (TREE_CODE ($1) != IDENTIFIER_NODE)\n-\t\t    $$ = lastiddecl;\n-\t\t  got_scope = $$ = complete_type (TREE_TYPE ($$));\n+\t\t    $1 = lastiddecl;\n+\n+\t\t  got_scope = $$ = complete_type (TREE_TYPE ($1));\n+\n+\t\t  if ($$ == error_mark_node)\n+\t\t    cp_error (\"`%T' is not a class or namespace\", $1);\n \t\t}\n \t| SELFNAME SCOPE\n \t\t{"}, {"sha": "6c3508f34219c0132970f30d66132aeae4e7b51e", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -866,6 +866,9 @@ check_explicit_specialization (declarator, decl, template_count, flags)\n \t\tSET_DECL_EXPLICIT_INSTANTIATION (decl);\n \t      return decl;\n \t    }\n+\t  else if (DECL_STATIC_FUNCTION_P (tmpl)\n+\t\t   && DECL_NONSTATIC_MEMBER_FUNCTION_P (decl))\n+\t    revert_static_member_fn (&decl, 0, 0);\n \n \t  /* Mangle the function name appropriately.  Note that we do\n \t     not mangle specializations of non-template member\n@@ -1822,11 +1825,23 @@ coerce_template_parms (parms, arglist, in_decl,\n \t  continue;\n \t}\n \n-      /* In case we are checking arguments inside a template template\n-\t parameter, ARG that does not come from default argument is \n-\t also a TREE_LIST node */\n-      if (TREE_CODE (arg) == TREE_LIST && ! is_overloaded_fn (arg))\n+      if (TREE_CODE (arg) == TREE_LIST \n+\t  && TREE_TYPE (arg) != NULL_TREE\n+\t  && TREE_CODE (TREE_TYPE (arg)) == OFFSET_TYPE)\n+\t{  \n+\t  /* The template argument was the name of some\n+\t     member function.  That's usually\n+\t     illegal, but static members are OK.  In any\n+\t     case, grab the underlying fields/functions\n+\t     and issue an error later if required.  */\n+\t  arg = TREE_VALUE (arg);\n+\t  TREE_TYPE (arg) = unknown_type_node;\n+\t}\n+      else if (TREE_CODE (arg) == TREE_LIST && ! is_overloaded_fn (arg))\n \t{\n+\t  /* In case we are checking arguments inside a template template\n+\t     parameter, ARG that does not come from default argument is \n+\t     also a TREE_LIST node */\n           is_tmpl_parm = 1;\n \t  arg = TREE_VALUE (arg);\n \t}"}, {"sha": "75b32667efd6cad221c4e9d6077ff5bd332a505c", "filename": "gcc/cp/search.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fsearch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Fsearch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsearch.c?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -3220,6 +3220,10 @@ note_debug_info_needed (type)\n \n   if (current_template_parms)\n     return;\n+    \n+  if (TYPE_BEING_DEFINED (type))\n+    /* We can't go looking for the base types and fields just yet.  */\n+    return;\n \n   /* We can't do the TYPE_DECL_SUPPRESS_DEBUG thing with DWARF, which\n      does not support name references between translation units.  Well, we"}, {"sha": "eff72af2bea4c4d5706e2aef73b4ebc312cf5534", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8857f91e00db19ea1deb2089100abffdca3f0690/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=8857f91e00db19ea1deb2089100abffdca3f0690", "patch": "@@ -136,6 +136,11 @@ tree\n complete_type (type)\n      tree type;\n {\n+  if (type == NULL_TREE)\n+    /* Rather than crash, we return something sure to cause an error\n+       at some point.  */\n+    return error_mark_node;\n+\n   if (type == error_mark_node || TYPE_SIZE (type) != NULL_TREE)\n     ;\n   else if (TREE_CODE (type) == ARRAY_TYPE && TYPE_DOMAIN (type))"}]}