{"sha": "a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTlmYjRmMTNiMWMwYmIwZDM2ODdlYjU1MjEyM2M0MTNhMjhkMmVlMw==", "commit": {"author": {"name": "Revital Eres", "email": "revital.eres@linaro.org", "date": "2011-09-13T06:01:24Z"}, "committer": {"name": "Revital Eres", "email": "revitale@gcc.gnu.org", "date": "2011-09-13T06:01:24Z"}, "message": "SMS: Minor misc. fixes\n\nFrom-SVN: r178804", "tree": {"sha": "15128fafef0e759ba660fcf99f0acfb9dde1e06e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15128fafef0e759ba660fcf99f0acfb9dde1e06e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3/comments", "author": null, "committer": null, "parents": [{"sha": "966bc51a9fe529beb9e3dc12815f39b2e76735c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/966bc51a9fe529beb9e3dc12815f39b2e76735c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/966bc51a9fe529beb9e3dc12815f39b2e76735c2"}], "stats": {"total": 31, "additions": 16, "deletions": 15}, "files": [{"sha": "ef42f55a4f5e6f7a9453c82c39d84195545263a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3", "patch": "@@ -1,3 +1,9 @@\n+2011-09-13  Revital Eres  <revital.eres@linaro.org>\n+\n+\tmodulo-sched.c (remove_node_from_ps): Return void instead of bool.\n+\t(optimize_sc): Adjust call to remove_node_from_ps.\n+\t(sms_schedule): Add print info.\n+\n 2011-09-13  Bernd Schmidt  <bernds@codesourcery.com>\n \n \t* rtl.c (copy_rtx): Do not handle frame_related, jump or call"}, {"sha": "28be9425b449a00888081c2f9bda4d524d5bc890", "filename": "gcc/modulo-sched.c", "status": "modified", "additions": 10, "deletions": 15, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3/gcc%2Fmodulo-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3/gcc%2Fmodulo-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmodulo-sched.c?ref=a9fb4f13b1c0bb0d3687eb552123c413a28d2ee3", "patch": "@@ -211,7 +211,7 @@ static int get_sched_window (partial_schedule_ptr, ddg_node_ptr,\n static bool try_scheduling_node_in_cycle (partial_schedule_ptr, ddg_node_ptr,\n \t\t\t\t\t  int, int, sbitmap, int *, sbitmap,\n \t\t\t\t\t  sbitmap);\n-static bool remove_node_from_ps (partial_schedule_ptr, ps_insn_ptr);\n+static void remove_node_from_ps (partial_schedule_ptr, ps_insn_ptr);\n \n #define SCHED_ASAP(x) (((node_sched_params_ptr)(x)->aux.info)->asap)\n #define SCHED_TIME(x) (((node_sched_params_ptr)(x)->aux.info)->time)\n@@ -834,8 +834,7 @@ optimize_sc (partial_schedule_ptr ps, ddg_ptr g)\n \tif (next_ps_i->node->cuid == g->closing_branch->cuid)\n \t  break;\n \n-      gcc_assert (next_ps_i);\n-      gcc_assert (remove_node_from_ps (ps, next_ps_i));\n+      remove_node_from_ps (ps, next_ps_i);\n       success =\n \ttry_scheduling_node_in_cycle (ps, g->closing_branch,\n \t\t\t\t      g->closing_branch->cuid, c,\n@@ -1485,8 +1484,8 @@ sms_schedule (void)\n           if (dump_file)\n             {\n \t      fprintf (dump_file,\n-\t\t       \"SMS succeeded %d %d (with ii, sc)\\n\", ps->ii,\n-\t\t       stage_count);\n+\t\t       \"%s:%d SMS succeeded %d %d (with ii, sc)\\n\",\n+\t\t       insn_file (tail), insn_line (tail), ps->ii, stage_count);\n \t      print_partial_schedule (ps, dump_file);\n \t    }\n  \n@@ -2719,22 +2718,18 @@ create_ps_insn (ddg_node_ptr node, int cycle)\n }\n \n \n-/* Removes the given PS_INSN from the partial schedule.  Returns false if the\n-   node is not found in the partial schedule, else returns true.  */\n-static bool\n+/* Removes the given PS_INSN from the partial schedule.  */  \n+static void \n remove_node_from_ps (partial_schedule_ptr ps, ps_insn_ptr ps_i)\n {\n   int row;\n \n-  if (!ps || !ps_i)\n-    return false;\n-\n+  gcc_assert (ps && ps_i);\n+  \n   row = SMODULO (ps_i->cycle, ps->ii);\n   if (! ps_i->prev_in_row)\n     {\n-      if (ps_i != ps->rows[row])\n-\treturn false;\n-\n+      gcc_assert (ps_i == ps->rows[row]);\n       ps->rows[row] = ps_i->next_in_row;\n       if (ps->rows[row])\n \tps->rows[row]->prev_in_row = NULL;\n@@ -2748,7 +2743,7 @@ remove_node_from_ps (partial_schedule_ptr ps, ps_insn_ptr ps_i)\n    \n   ps->rows_length[row] -= 1; \n   free (ps_i);\n-  return true;\n+  return;\n }\n \n /* Unlike what literature describes for modulo scheduling (which focuses"}]}