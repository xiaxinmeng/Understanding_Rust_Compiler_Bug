{"sha": "d3229873aea34e4768d45cfa6a5ef50323fdf3fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMyMjk4NzNhZWEzNGU0NzY4ZDQ1Y2ZhNmE1ZWY1MDMyM2ZkZjNmZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-02-10T15:55:37Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-02-10T15:55:37Z"}, "message": "runtime: For g0 set stack_size to 0 when not -fsplit-stack.\n\nFrom-SVN: r184099", "tree": {"sha": "8770c0f5bccaee68a3f7834aba680b2fb2102b06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8770c0f5bccaee68a3f7834aba680b2fb2102b06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3229873aea34e4768d45cfa6a5ef50323fdf3fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3229873aea34e4768d45cfa6a5ef50323fdf3fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3229873aea34e4768d45cfa6a5ef50323fdf3fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3229873aea34e4768d45cfa6a5ef50323fdf3fe/comments", "author": null, "committer": null, "parents": [{"sha": "c91e24907b9b9689c0af5d46b73e712d70f6994c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c91e24907b9b9689c0af5d46b73e712d70f6994c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c91e24907b9b9689c0af5d46b73e712d70f6994c"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "94c2a51730e944e93f0e976c878057819f8afd67", "filename": "libgo/runtime/proc.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3229873aea34e4768d45cfa6a5ef50323fdf3fe/libgo%2Fruntime%2Fproc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3229873aea34e4768d45cfa6a5ef50323fdf3fe/libgo%2Fruntime%2Fproc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fproc.c?ref=d3229873aea34e4768d45cfa6a5ef50323fdf3fe", "patch": "@@ -909,7 +909,9 @@ runtime_mstart(void* mp)\n \t__splitstack_getcontext(&g->stack_context[0]);\n #else\n \tg->gcinitial_sp = &mp;\n-\tg->gcstack_size = StackMin;\n+\t// Setting gcstack_size to 0 is a marker meaning that gcinitial_sp\n+\t// is the top of the stack, not the bottom.\n+\tg->gcstack_size = 0;\n \tg->gcnext_sp = &mp;\n #endif\n \tgetcontext(&g->context);\n@@ -1267,6 +1269,8 @@ __go_go(void (*fn)(void*), void* arg)\n #else\n \t\tsp = newg->gcinitial_sp;\n \t\tspsize = newg->gcstack_size;\n+\t\tif(spsize == 0)\n+\t\t\truntime_throw(\"bad spsize in __go_go\");\n \t\tnewg->gcnext_sp = sp;\n #endif\n \t} else {"}]}