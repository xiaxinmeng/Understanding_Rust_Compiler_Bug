{"sha": "d25fabdc8e1ee25a077aa628432fad6d63b66b8f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI1ZmFiZGM4ZTFlZTI1YTA3N2FhNjI4NDMyZmFkNmQ2M2I2NmI4Zg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-01-17T17:33:43Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-01-17T17:33:43Z"}, "message": "rs6000.c (rs6000_emit_move): Also use a TOC reference after forcing to constant memory when...\n\n\t* config/rs6000/rs6000.c (rs6000_emit_move): Also use a TOC reference\n\tafter forcing to constant memory when the code model is medium.\n\nFrom-SVN: r244541", "tree": {"sha": "26e178a547b9ab37c67e4ac8cbef02e52b418a48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26e178a547b9ab37c67e4ac8cbef02e52b418a48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d25fabdc8e1ee25a077aa628432fad6d63b66b8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d25fabdc8e1ee25a077aa628432fad6d63b66b8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d25fabdc8e1ee25a077aa628432fad6d63b66b8f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d25fabdc8e1ee25a077aa628432fad6d63b66b8f/comments", "author": null, "committer": null, "parents": [{"sha": "0e171d5408feafcd56b97c831a99d14e544b98af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e171d5408feafcd56b97c831a99d14e544b98af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e171d5408feafcd56b97c831a99d14e544b98af"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "d63b83fbd9b249af69f1869c49cca45ecb93c777", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d25fabdc8e1ee25a077aa628432fad6d63b66b8f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d25fabdc8e1ee25a077aa628432fad6d63b66b8f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d25fabdc8e1ee25a077aa628432fad6d63b66b8f", "patch": "@@ -1,3 +1,8 @@\n+2017-01-17  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* config/rs6000/rs6000.c (rs6000_emit_move): Also use a TOC reference\n+\tafter forcing to constant memory when the code model is medium.\n+\n 2017-01-17  Julia Koval  <julia.koval@intel.com>\n \n \tPR target/76731"}, {"sha": "63c62c39c49331df8d102bd55a249874e8fbe52f", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d25fabdc8e1ee25a077aa628432fad6d63b66b8f/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d25fabdc8e1ee25a077aa628432fad6d63b66b8f/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=d25fabdc8e1ee25a077aa628432fad6d63b66b8f", "patch": "@@ -10980,10 +10980,7 @@ rs6000_emit_move (rtx dest, rtx source, machine_mode mode)\n \n \t  if (TARGET_TOC\n \t      && GET_CODE (XEXP (operands[1], 0)) == SYMBOL_REF\n-\t      && constant_pool_expr_p (XEXP (operands[1], 0))\n-\t      && ASM_OUTPUT_SPECIAL_POOL_ENTRY_P (\n-\t\t\tget_pool_constant (XEXP (operands[1], 0)),\n-\t\t\tget_pool_mode (XEXP (operands[1], 0))))\n+\t      && use_toc_relative_ref (XEXP (operands[1], 0), mode))\n \t    {\n \t      rtx tocref = create_TOC_reference (XEXP (operands[1], 0),\n \t\t\t\t\t\t operands[0]);"}]}