{"sha": "f95f80d1a762998d6b8731d506f6667ccbdaf996", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk1ZjgwZDFhNzYyOTk4ZDZiODczMWQ1MDZmNjY2N2NjYmRhZjk5Ng==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2005-10-19T14:48:29Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2005-10-19T14:48:29Z"}, "message": "re PR c/23228 (Silly \"unused variable\" warning after redeclaration of a local variable)\n\n\tPR c/23228\n\t* c-decl.c (pop_scope): Don't warn about an unused variable\n\tif it is marked with TREE_NO_WARNING.\n\t(duplicate_decls): Set TREE_NO_WARNING if olddecl and newdecl\n\tsomenow mismatch and olddecl is to be replaced.\n\nFrom-SVN: r105621", "tree": {"sha": "988fb136daa7814e2926da81d9c274aa06aefc9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/988fb136daa7814e2926da81d9c274aa06aefc9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f95f80d1a762998d6b8731d506f6667ccbdaf996", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f95f80d1a762998d6b8731d506f6667ccbdaf996", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f95f80d1a762998d6b8731d506f6667ccbdaf996", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f95f80d1a762998d6b8731d506f6667ccbdaf996/comments", "author": null, "committer": null, "parents": [{"sha": "e48050bd060e5faeae80c4c833e14fe3885ed599", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e48050bd060e5faeae80c4c833e14fe3885ed599", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e48050bd060e5faeae80c4c833e14fe3885ed599"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "886d1f8f431e565c20f03de62d5fc042a62eb942", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f95f80d1a762998d6b8731d506f6667ccbdaf996/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f95f80d1a762998d6b8731d506f6667ccbdaf996/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f95f80d1a762998d6b8731d506f6667ccbdaf996", "patch": "@@ -1,3 +1,11 @@\n+2005-10-19  Steven Bosscher  <stevenb@suse.de>\n+\n+\tPR c/23228\n+\t* c-decl.c (pop_scope): Don't warn about an unused variable\n+\tif it is marked with TREE_NO_WARNING.\n+\t(duplicate_decls): Set TREE_NO_WARNING if olddecl and newdecl\n+\tsomenow mismatch and olddecl is to be replaced.\n+\n 2005-10-19  Eric Botcazou  <ebotcazou@libertysurf.fr>\n \n \tPR middle-end/23199"}, {"sha": "f7cad3b71051c8bddb87043d09bef069b533f488", "filename": "gcc/c-decl.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f95f80d1a762998d6b8731d506f6667ccbdaf996/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f95f80d1a762998d6b8731d506f6667ccbdaf996/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=f95f80d1a762998d6b8731d506f6667ccbdaf996", "patch": "@@ -803,6 +803,7 @@ pop_scope (void)\n \tcase VAR_DECL:\n \t  /* Warnings for unused variables.  */\n \t  if (!TREE_USED (p)\n+\t      && !TREE_NO_WARNING (p)\n \t      && !DECL_IN_SYSTEM_HEADER (p)\n \t      && DECL_NAME (p)\n \t      && !DECL_ARTIFICIAL (p)\n@@ -1876,7 +1877,11 @@ duplicate_decls (tree newdecl, tree olddecl)\n   tree newtype = NULL, oldtype = NULL;\n \n   if (!diagnose_mismatched_decls (newdecl, olddecl, &newtype, &oldtype))\n-    return false;\n+    {\n+      /* Avoid `unused variable' and other warnings warnings for OLDDECL.  */\n+      TREE_NO_WARNING (olddecl) = 1;\n+      return false;\n+    }\n \n   merge_decls (newdecl, olddecl, newtype, oldtype);\n   return true;"}]}