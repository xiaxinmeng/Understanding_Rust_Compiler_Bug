{"sha": "5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWY1ZjA2MzVmMTkyMWY0MGRlNDVjNjc4M2ZlMGM0ZTliNGMwZDFiYQ==", "commit": {"author": {"name": "Alon Dayan", "email": "alond@il.ibm.com", "date": "2008-03-13T15:40:09Z"}, "committer": {"name": "Olga Golovanevsky", "email": "olga@gcc.gnu.org", "date": "2008-03-13T15:40:09Z"}, "message": "[multiple changes]\n\n2008-02-19  Alon Dayan  <alond@il.ibm.com>\n            Olga Golovanevsky  <olga@il.ibm.com>\n\t\n\tPR tree-optimization/35041\n\t* gcc.dg/struct/wo_prof_double_malloc.c: New test.\n\n2008-03-13  Alon Dayan  <alond@il.ibm.com>\n\t    Olga Golovanevsky  <olga@il.ibm.com>\n\n\tPR tree-optimization/35041\n\t* ipa-struct-reorg.c (find_pos_in_stmt_1): Add another option\n\tto locate the right position in a statement.\n\n\nCo-Authored-By: Olga Golovanevsky <olga@il.ibm.com>\n\nFrom-SVN: r133171", "tree": {"sha": "b15b129aff072e320ebe89aff5463ed28bf07ea5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b15b129aff072e320ebe89aff5463ed28bf07ea5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/comments", "author": null, "committer": null, "parents": [{"sha": "1359ef39755c2a648c44e410e974450d91a4bd99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1359ef39755c2a648c44e410e974450d91a4bd99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1359ef39755c2a648c44e410e974450d91a4bd99"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "0b6653d6b1fe2c998c1aa4d34ccef6d83d61c11d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "patch": "@@ -1,3 +1,10 @@\n+2008-03-13  Alon Dayan  <alond@il.ibm.com>\n+\t    Olga Golovanevsky  <olga@il.ibm.com>\n+\n+\tPR tree-optimization/35041\n+\t* ipa-struct-reorg.c (find_pos_in_stmt_1): Add another option\n+\tto locate the right position in a statement.\n+\n 2008-03-13  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/34000"}, {"sha": "515dba67206e45e21ed155f0d309ee828cdaec24", "filename": "gcc/ipa-struct-reorg.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2Fipa-struct-reorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2Fipa-struct-reorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-struct-reorg.c?ref=5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "patch": "@@ -887,7 +887,7 @@ find_pos_in_stmt_1 (tree *tp, int *walk_subtrees, void * data)\n   tree ref = r_pos->ref;\n   tree t = *tp;\n \n-  if (t == ref)\n+  if (t == ref || (TREE_CODE (t) == SSA_NAME && SSA_NAME_VAR (t) == ref))\n     {\n       r_pos->pos = tp;\n       return t;"}, {"sha": "b77a93cd5806331d46df7c735b80b8c175f11c3c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "patch": "@@ -1,3 +1,9 @@\n+2008-02-19  Alon Dayan  <alond@il.ibm.com>\n+            Olga Golovanevsky  <olga@il.ibm.com>\n+\t\n+\tPR tree-optimization/35041\n+\t* gcc.dg/struct/wo_prof_double_malloc.c: New test.\n+\n 2008-03-13  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/34000"}, {"sha": "27503f824648c10c2a44955b0ece419fb2f83052", "filename": "gcc/testsuite/gcc.dg/struct/wo_prof_double_malloc.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2Ftestsuite%2Fgcc.dg%2Fstruct%2Fwo_prof_double_malloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba/gcc%2Ftestsuite%2Fgcc.dg%2Fstruct%2Fwo_prof_double_malloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fstruct%2Fwo_prof_double_malloc.c?ref=5f5f0635f1921f40de45c6783fe0c4e9b4c0d1ba", "patch": "@@ -0,0 +1,30 @@\n+/* { dg-do compile } */\n+/* { dg-do run } */\n+\n+#include <stdlib.h>\n+\n+typedef struct test_struct\n+{\n+  int a;\n+  int b;\n+} type_struct;\n+\n+typedef type_struct **struct_pointer2;\n+\n+struct_pointer2 str1;\n+\n+int main()\n+{\n+  int i, j;\n+\n+  str1 = malloc (2 * sizeof (type_struct *));\n+\n+  for (i = 0; i <= 1; i++)\n+    str1[i] = malloc (2 * sizeof (type_struct));\n+\n+  return 0;\n+}\n+\n+/*--------------------------------------------------------------------------*/\n+/* { dg-final { scan-ipa-dump \"Number of structures to transform is 1\" \"ipa_struct_reorg\" } } */\n+/* { dg-final { cleanup-ipa-dump \"*\" } } */"}]}