{"sha": "874e7c171cd2af43b4dc9dddae981120e1b29e33", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc0ZTdjMTcxY2QyYWY0M2I0ZGM5ZGRkYWU5ODExMjBlMWIyOWUzMw==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2011-05-31T12:09:06Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2011-05-31T12:09:06Z"}, "message": "re PR debug/49047 (DW_AT_linkage_name missing for constructors and destructors)\n\nFix PR debug/49047\n\ngcc/\n\n\t* dwarf2out.c (gen_subprogram_die): Emit linkage name attribute\n\tfor concrete functions containing the code of cloned functions.\n\ngcc/testsuite/\n\n\t* g++.dg/debug/dwarf2/cdtor-1.C: New test.\n\nFrom-SVN: r174472", "tree": {"sha": "9c47c4f2973048814d4053c3e7690993b6e03ac2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c47c4f2973048814d4053c3e7690993b6e03ac2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/874e7c171cd2af43b4dc9dddae981120e1b29e33", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/874e7c171cd2af43b4dc9dddae981120e1b29e33", "html_url": "https://github.com/Rust-GCC/gccrs/commit/874e7c171cd2af43b4dc9dddae981120e1b29e33", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/874e7c171cd2af43b4dc9dddae981120e1b29e33/comments", "author": null, "committer": null, "parents": [{"sha": "755b3b7cf7c635a5c766400865c2bfa52d6aa16d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/755b3b7cf7c635a5c766400865c2bfa52d6aa16d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/755b3b7cf7c635a5c766400865c2bfa52d6aa16d"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "9ec727bf236ad7e89c7c7c225f04420d624c25f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=874e7c171cd2af43b4dc9dddae981120e1b29e33", "patch": "@@ -1,3 +1,9 @@\n+2011-05-31  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/49047\n+\t* dwarf2out.c (gen_subprogram_die): Emit linkage name attribute\n+\tfor concrete functions containing the code of cloned functions.\n+\n 2011-05-31  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-ssa-forwprop.c (forward_propagate_into_comparison): Rename"}, {"sha": "9a415e9a171c564921d695d5e1237f640e0e39b9", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=874e7c171cd2af43b4dc9dddae981120e1b29e33", "patch": "@@ -19636,6 +19636,12 @@ gen_subprogram_die (tree decl, dw_die_ref context_die)\n \n       subr_die = new_die (DW_TAG_subprogram, context_die, decl);\n       add_abstract_origin_attribute (subr_die, origin);\n+      /*  This is where the actual code for a cloned function is.\n+\t  Let's emit linkage name attribute for it.  This helps\n+\t  debuggers to e.g, set breakpoints into\n+\t  constructors/destructors when the user asks \"break\n+\t  K::K\".  */\n+      add_linkage_name (subr_die, decl);\n     }\n   else if (old_die)\n     {"}, {"sha": "dfa323b06abaaba6a0d20cc2671227b8a28752e4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=874e7c171cd2af43b4dc9dddae981120e1b29e33", "patch": "@@ -1,3 +1,8 @@\n+2011-05-31  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR debug/49047\n+\t* g++.dg/debug/dwarf2/cdtor-1.C: New test.\n+\n 2011-05-31  Ira Rosen  <ira.rosen@linaro.org>\n \n \tPR testsuite/49239"}, {"sha": "6d39e54ae08aa6b5a15c63dfa6ec60a675397fa1", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/cdtor-1.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fcdtor-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/874e7c171cd2af43b4dc9dddae981120e1b29e33/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fcdtor-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fcdtor-1.C?ref=874e7c171cd2af43b4dc9dddae981120e1b29e33", "patch": "@@ -0,0 +1,17 @@\n+// origin PR debug/49047\n+// { dg-options \"-g -dA\" }\n+// { dg-do compile }\n+\n+struct K\n+{\n+  K () { }\n+  ~K () { }\n+};\n+\n+int\n+main()\n+{\n+    K k;\n+}\n+\n+// { dg-final {scan-assembler-times \"\\[^\\n\\r\\]*DW_AT_MIPS_linkage_name:\" 2 } }"}]}