{"sha": "6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmE3YTNmMzExYjc5Zjk1ZTRhOGJiMTlmZmFlMjY4ZDRiNWU2ZjU2NQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-09-15T20:26:02Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-09-15T20:26:02Z"}, "message": "trans.c (gigi): Declare the name of the compilation unit as the first global name.\n\n\t* gcc-interface/trans.c (gigi): Declare the name of the compilation\n\tunit as the first global name.\n\nFrom-SVN: r140373", "tree": {"sha": "aae1c709e604aed48889542448c0b594333d3105", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aae1c709e604aed48889542448c0b594333d3105"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565/comments", "author": null, "committer": null, "parents": [{"sha": "084b6c9955238fa5596f813574801a51a1b24380", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/084b6c9955238fa5596f813574801a51a1b24380", "html_url": "https://github.com/Rust-GCC/gccrs/commit/084b6c9955238fa5596f813574801a51a1b24380"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "508684e39a1cebfb9561e7c1261143dd3b9e2acb", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565", "patch": "@@ -1,6 +1,11 @@\n+2008-09-15  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (gigi): Declare the name of the compilation\n+\tunit as the first global name.\n+\n 2008-09-14  Jan Hubicka  <jh@suse.cz>\n \n-\t* gcc-interface/Make-lang.in (gnac1): Add CFLAGS.\n+\t* gcc-interface/Make-lang.in (gnat1): Add CFLAGS.\n \n 2008-09-14  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n "}, {"sha": "938408bf8e1bf71d1c9202bcbde63ed0f00bbf08", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=6a7a3f311b79f95e4a8bb19ffae268d4b5e6f565", "patch": "@@ -387,10 +387,17 @@ gigi (Node_Id gnat_root, int max_gnat_node, int number_name,\n     gnat_init_gcc_eh ();\n \n   gcc_assert (Nkind (gnat_root) == N_Compilation_Unit);\n+\n+  /* Declare the name of the compilation unit as the first global\n+     name in order to make the middle-end fully deterministic.  */\n+  t = create_concat_name (Defining_Entity (Unit (gnat_root)), NULL);\n+  first_global_object_name = ggc_strdup (IDENTIFIER_POINTER (t));\n+\n+  /* Now translate the compilation unit proper.  */\n   start_stmt_group ();\n   Compilation_Unit_to_gnu (gnat_root);\n \n-  /* Now see if we have any elaboration procedures to deal with. */\n+  /* Finally see if we have any elaboration procedures to deal with.  */\n   for (info = elab_info_list; info; info = info->next)\n     {\n       tree gnu_body = DECL_SAVED_TREE (info->elab_proc);"}]}