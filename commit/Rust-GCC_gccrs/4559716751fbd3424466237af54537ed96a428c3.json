{"sha": "4559716751fbd3424466237af54537ed96a428c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDU1OTcxNjc1MWZiZDM0MjQ0NjYyMzdhZjU0NTM3ZWQ5NmE0MjhjMw==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@waitaki.otago.ac.nz", "date": "2002-03-10T03:53:16Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2002-03-10T03:53:16Z"}, "message": "Hashtable synchronization for PowerPC.\n\nlibjava:\n\tHashtable synchronization for PowerPC.\n\t* configure.in: Define SLOW_PTHREAD_SELF if configure.host set\n\tslow_pthread_self. Set up symlink for sysdeps directory.\n\t* configure: Rebuild.\n\t* configure.host: Document more shell variables. Set sysdeps_dir\n\tfor most platforms. Set slow_pthread_self for i686. Set\n\tenable_hash_synchronization_default and slow_pthread_self for PowerPC.\n\t* posix-threads.cc (_Jv_ThreadSelf_out_of_line): Use release_set so\n\tthat memory barrier is emitted where required.\n\t* prims.cc: 64-bit align static primitive class instances.\n\t* include/posix-threads.h (_Jv_ThreadSelf for SLOW_PTHREAD_SELF): Add\n\tread_barrier() to enforce ordering of reads.\n\t* sysdep/powerpc/locks.h: New file. Implementation of synchronization\n\tprimitives for PowerPC.\n\t* sysdep/i386/locks.h: New file. Synchronization primitives for i386\n\tmoved from natObject.cc.\n\t* sysdep/alpha/locks.h: Likewise.\n\t* sysdep/ia64/locks.h: Likewise.\n\t* sysdep/generic/locks.h: Likewise.\n\t* java/lang/natObject.cc: Move thread synchronization primitives to\n\tsystem-dependent headers.\ngcc/java:\n\t* decl.c (java_init_decl_processing): Make sure class_type_node\n\talignment is not less than 64 bits if hash synchronization isenabled.\n\nboehm-gc:\n\t* include/gc_priv.h: Define ALIGN_DOUBLE on 32 bit targets if GCJ\n\tsupport is enabled, for hash synchronization.\n\nFrom-SVN: r50523", "tree": {"sha": "5162d3a3b9e4a79ea677ef38bb70205ec3da794b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5162d3a3b9e4a79ea677ef38bb70205ec3da794b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4559716751fbd3424466237af54537ed96a428c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4559716751fbd3424466237af54537ed96a428c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4559716751fbd3424466237af54537ed96a428c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4559716751fbd3424466237af54537ed96a428c3/comments", "author": null, "committer": null, "parents": [{"sha": "828c1ddcccb797869894695f4bb37a6f7c43baa8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/828c1ddcccb797869894695f4bb37a6f7c43baa8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/828c1ddcccb797869894695f4bb37a6f7c43baa8"}], "stats": {"total": 930, "additions": 431, "deletions": 499}, "files": [{"sha": "204d4c924a7d5521f584b59c6bbeb132b7090579", "filename": "boehm-gc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/boehm-gc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/boehm-gc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FChangeLog?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -1,3 +1,8 @@\n+2002-03-09  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\t* include/gc_priv.h: Define ALIGN_DOUBLE on 32 bit targets if GCJ \n+\tsupport is enabled, for hash synchronization.\n+\n 2002-02-24  Adam Megacz  <adam@xwt.org>\n \n \t* Makefile.am: Added win32_threads.c to sources list."}, {"sha": "642cad8f5d73c5ed6c8e4f173912bb334efbe95e", "filename": "boehm-gc/include/private/gc_priv.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/boehm-gc%2Finclude%2Fprivate%2Fgc_priv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/boehm-gc%2Finclude%2Fprivate%2Fgc_priv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Finclude%2Fprivate%2Fgc_priv.h?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -205,6 +205,12 @@ typedef char * ptr_t;\t/* A generic pointer to which we can add\t*/\n    /* odd numbered words to have mark bits.\t\t\t\t*/\n #endif\n \n+#if defined(GC_GCJ_SUPPORT) && ALIGNMENT < 8 && !defined(ALIGN_DOUBLE)\n+   /* GCJ's Hashtable synchronization code requires 64-bit alignment.\t*/\n+#  define ALIGN_DOUBLE\n+#endif\n+\n+\n /* ALIGN_DOUBLE requires MERGE_SIZES at present. */\n # if defined(ALIGN_DOUBLE) && !defined(MERGE_SIZES)\n #   define MERGE_SIZES"}, {"sha": "6b4512f6b68bb3463bc3b74ef005636e12af5416", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -1,3 +1,8 @@\n+2002-03-09  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\t* decl.c (java_init_decl_processing): Make sure class_type_node\n+\talignment is not less than 64 bits if hash synchronization is enabled.\n+\n 2002-03-08  Per Bothner  <per@bothner.com>\n \n \t* parse.y (java_complete_lhs):  Check if patch_assignment"}, {"sha": "ddba14ff274da0fcd131930913fc732b1e183b32", "filename": "gcc/java/decl.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/gcc%2Fjava%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/gcc%2Fjava%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fdecl.c?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -605,6 +605,7 @@ java_init_decl_processing ()\n   one_elt_array_domain_type = build_index_type (integer_one_node);\n   otable_type = build_array_type (integer_type_node, \n \t\t\t\t  one_elt_array_domain_type);\n+  TYPE_NONALIASED_COMPONENT (otable_type) = 1;\n   otable_ptr_type = build_pointer_type (otable_type);\n \n   method_symbol_type = make_node (RECORD_TYPE);\n@@ -681,6 +682,10 @@ java_init_decl_processing ()\n     FIELD_PRIVATE (t) = 1;\n   push_super_field (class_type_node, object_type_node);\n \n+  /* Hash synchronization requires at least double-word alignment. */\n+  if (flag_hash_synchronization && POINTER_SIZE < 64)\n+    TYPE_ALIGN (class_type_node) = 64;\n+\n   FINISH_RECORD (class_type_node);\n   build_decl (TYPE_DECL, get_identifier (\"Class\"), class_type_node);\n "}, {"sha": "6ad310fdfddff7723eeae90826c046a1cde58109", "filename": "libjava/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -1,3 +1,27 @@\n+2002-03-09  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n+\n+\tHashtable synchronization for PowerPC.\n+\t* configure.in: Define SLOW_PTHREAD_SELF if configure.host set\n+\tslow_pthread_self. Set up symlink for sysdeps directory.\n+\t* configure: Rebuild.\n+\t* configure.host: Document more shell variables. Set sysdeps_dir\n+\tfor most platforms. Set slow_pthread_self for i686. Set \n+\tenable_hash_synchronization_default and slow_pthread_self for PowerPC. \n+\t* posix-threads.cc (_Jv_ThreadSelf_out_of_line): Use release_set so\n+\tthat memory barrier is emitted where required.\n+\t* prims.cc: 64-bit align static primitive class instances.\n+\t* include/posix-threads.h (_Jv_ThreadSelf for SLOW_PTHREAD_SELF): Add\n+\tread_barrier() to enforce ordering of reads.\n+\t* sysdep/powerpc/locks.h: New file. Implementation of synchronization\n+\tprimitives for PowerPC.\n+\t* sysdep/i386/locks.h: New file. Synchronization primitives for i386 \n+\tmoved from natObject.cc.\n+\t* sysdep/alpha/locks.h: Likewise.\n+\t* sysdep/ia64/locks.h: Likewise.\n+\t* sysdep/generic/locks.h: Likewise.\n+\t* java/lang/natObject.cc: Move thread synchronization primitives to\n+\tsystem-dependent headers.\n+\n 2002-03-09  Adam Megacz  <adam@xwt.org>\n \n         * java/io/natFileDescriptorWin32.cc (read): Return -1 if zero"}, {"sha": "f53e19ca90588010d8d26b720795c280abfd998d", "filename": "libjava/configure", "status": "modified", "additions": 350, "deletions": 360, "changes": 710, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -80,7 +80,6 @@ program_suffix=NONE\n program_transform_name=s,x,x,\n silent=\n site=\n-sitefile=\n srcdir=\n target=NONE\n verbose=\n@@ -195,7 +194,6 @@ Configuration:\n   --help                  print this message\n   --no-create             do not create output files\n   --quiet, --silent       do not print \\`checking...' messages\n-  --site-file=FILE        use FILE as the site file\n   --version               print the version of autoconf that created configure\n Directory and file names:\n   --prefix=PREFIX         install architecture-independent files in PREFIX\n@@ -366,11 +364,6 @@ EOF\n   -site=* | --site=* | --sit=*)\n     site=\"$ac_optarg\" ;;\n \n-  -site-file | --site-file | --site-fil | --site-fi | --site-f)\n-    ac_prev=sitefile ;;\n-  -site-file=* | --site-file=* | --site-fil=* | --site-fi=* | --site-f=*)\n-    sitefile=\"$ac_optarg\" ;;\n-\n   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n     ac_prev=srcdir ;;\n   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n@@ -536,16 +529,12 @@ fi\n srcdir=`echo \"${srcdir}\" | sed 's%\\([^/]\\)/*$%\\1%'`\n \n # Prefer explicitly selected file to automatically selected ones.\n-if test -z \"$sitefile\"; then\n-  if test -z \"$CONFIG_SITE\"; then\n-    if test \"x$prefix\" != xNONE; then\n-      CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n-    else\n-      CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n-    fi\n+if test -z \"$CONFIG_SITE\"; then\n+  if test \"x$prefix\" != xNONE; then\n+    CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n+  else\n+    CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n   fi\n-else\n-  CONFIG_SITE=\"$sitefile\"\n fi\n for ac_site_file in $CONFIG_SITE; do\n   if test -r \"$ac_site_file\"; then\n@@ -586,7 +575,7 @@ fi\n \n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:590: checking whether ln -s works\" >&5\n+echo \"configure:579: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -632,7 +621,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:636: checking for a BSD compatible install\" >&5\n+echo \"configure:625: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -685,7 +674,7 @@ test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n echo $ac_n \"checking whether build environment is sane\"\"... $ac_c\" 1>&6\n-echo \"configure:689: checking whether build environment is sane\" >&5\n+echo \"configure:678: checking whether build environment is sane\" >&5\n # Just in case\n sleep 1\n echo timestamp > conftestfile\n@@ -742,7 +731,7 @@ test \"$program_suffix\" != NONE &&\n test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:746: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:735: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -775,12 +764,12 @@ else\n fi\n \n echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n-echo \"configure:779: checking for Cygwin environment\" >&5\n+echo \"configure:768: checking for Cygwin environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 784 \"configure\"\n+#line 773 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -791,7 +780,7 @@ int main() {\n return __CYGWIN__;\n ; return 0; }\n EOF\n-if { (eval echo configure:795: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:784: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_cygwin=yes\n else\n@@ -808,19 +797,19 @@ echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n CYGWIN=\n test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n-echo \"configure:812: checking for mingw32 environment\" >&5\n+echo \"configure:801: checking for mingw32 environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 817 \"configure\"\n+#line 806 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n return __MINGW32__;\n ; return 0; }\n EOF\n-if { (eval echo configure:824: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:813: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_mingw32=yes\n else\n@@ -947,7 +936,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:951: checking host system type\" >&5\n+echo \"configure:940: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -968,7 +957,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:972: checking target system type\" >&5\n+echo \"configure:961: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -986,7 +975,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:990: checking build system type\" >&5\n+echo \"configure:979: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -1015,7 +1004,7 @@ test \"$host_alias\" != \"$target_alias\" &&\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1019: checking for $ac_word\" >&5\n+echo \"configure:1008: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1045,7 +1034,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1049: checking for $ac_word\" >&5\n+echo \"configure:1038: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1096,7 +1085,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1100: checking for $ac_word\" >&5\n+echo \"configure:1089: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1129,7 +1118,7 @@ fi\n \n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1133: checking whether we are using GNU C\" >&5\n+echo \"configure:1122: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1138,7 +1127,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1142: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1131: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1157,7 +1146,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1161: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1150: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1188,60 +1177,45 @@ else\n   fi\n fi\n \n-\n-# We use the libstdc++-v3 version of LIB_AC_PROG_CXX, but use\n-# glibjava_CXX instead of glibcpp_CXX.  That's because we're passed a\n-# different definition of CXX than other directories, since we don't\n-# depend on libstdc++-v3 having already been built.\n-\n-\n-\n-# Use glibjava_CXX so that we do not cause CXX to be cached with the\n-# flags that come in CXX while configuring libjava.  They're different\n-# from those used for all other target libraries.  If CXX is set in\n-# the environment, respect that here.\n-glibjava_CXX=$CXX\n-for ac_prog in $CCC c++ g++ gcc CC cxx cc++\n+for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl\n do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1210: checking for $ac_word\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_prog_glibjava_CXX'+set}'`\\\" = set\"; then\n+echo \"configure:1186: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CXX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-  if test -n \"$glibjava_CXX\"; then\n-  ac_cv_prog_glibjava_CXX=\"$glibjava_CXX\" # Let the user override the test.\n+  if test -n \"$CXX\"; then\n+  ac_cv_prog_CXX=\"$CXX\" # Let the user override the test.\n else\n   IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   ac_dummy=\"$PATH\"\n   for ac_dir in $ac_dummy; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n-      ac_cv_prog_glibjava_CXX=\"$ac_prog\"\n+      ac_cv_prog_CXX=\"$ac_prog\"\n       break\n     fi\n   done\n   IFS=\"$ac_save_ifs\"\n fi\n fi\n-glibjava_CXX=\"$ac_cv_prog_glibjava_CXX\"\n-if test -n \"$glibjava_CXX\"; then\n-  echo \"$ac_t\"\"$glibjava_CXX\" 1>&6\n+CXX=\"$ac_cv_prog_CXX\"\n+if test -n \"$CXX\"; then\n+  echo \"$ac_t\"\"$CXX\" 1>&6\n else\n   echo \"$ac_t\"\"no\" 1>&6\n fi\n \n-test -n \"$glibjava_CXX\" && break\n+test -n \"$CXX\" && break\n done\n-test -n \"$glibjava_CXX\" || glibjava_CXX=\"gcc\"\n+test -n \"$CXX\" || CXX=\"gcc\"\n \n \n-CXX=$glibjava_CXX\n-test -z \"$glibjava_CXX\" && { echo \"configure: error: no acceptable c++ found in \\$PATH\" 1>&2; exit 1; }\n \n echo $ac_n \"checking whether we are using GNU C++\"\"... $ac_c\" 1>&6\n-echo \"configure:1245: checking whether we are using GNU C++\" >&5\n+echo \"configure:1219: checking whether we are using GNU C++\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gxx'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1250,7 +1224,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1254: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1228: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gxx=yes\n else\n   ac_cv_prog_gxx=no\n@@ -1261,11 +1235,15 @@ echo \"$ac_t\"\"$ac_cv_prog_gxx\" 1>&6\n \n if test $ac_cv_prog_gxx = yes; then\n   GXX=yes\n-  ac_test_CXXFLAGS=\"${CXXFLAGS+set}\"\n-  ac_save_CXXFLAGS=\"$CXXFLAGS\"\n-  CXXFLAGS=\n-  echo $ac_n \"checking whether ${CXX-g++} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1269: checking whether ${CXX-g++} accepts -g\" >&5\n+else\n+  GXX=\n+fi\n+\n+ac_test_CXXFLAGS=\"${CXXFLAGS+set}\"\n+ac_save_CXXFLAGS=\"$CXXFLAGS\"\n+CXXFLAGS=\n+echo $ac_n \"checking whether ${CXX-g++} accepts -g\"\"... $ac_c\" 1>&6\n+echo \"configure:1247: checking whether ${CXX-g++} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1280,16 +1258,20 @@ rm -f conftest*\n fi\n \n echo \"$ac_t\"\"$ac_cv_prog_cxx_g\" 1>&6\n-  if test \"$ac_test_CXXFLAGS\" = set; then\n-    CXXFLAGS=\"$ac_save_CXXFLAGS\"\n-  elif test $ac_cv_prog_cxx_g = yes; then\n+if test \"$ac_test_CXXFLAGS\" = set; then\n+  CXXFLAGS=\"$ac_save_CXXFLAGS\"\n+elif test $ac_cv_prog_cxx_g = yes; then\n+  if test \"$GXX\" = yes; then\n     CXXFLAGS=\"-g -O2\"\n   else\n-    CXXFLAGS=\"-O2\"\n+    CXXFLAGS=\"-g\"\n   fi\n else\n-  GXX=\n-  test \"${CXXFLAGS+set}\" = set || CXXFLAGS=\"-g\"\n+  if test \"$GXX\" = yes; then\n+    CXXFLAGS=\"-O2\"\n+  else\n+    CXXFLAGS=\n+  fi\n fi\n \n \n@@ -1314,7 +1296,7 @@ EOF\n \n missing_dir=`cd $ac_aux_dir && pwd`\n echo $ac_n \"checking for working aclocal\"\"... $ac_c\" 1>&6\n-echo \"configure:1318: checking for working aclocal\" >&5\n+echo \"configure:1300: checking for working aclocal\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1327,7 +1309,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoconf\"\"... $ac_c\" 1>&6\n-echo \"configure:1331: checking for working autoconf\" >&5\n+echo \"configure:1313: checking for working autoconf\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1340,7 +1322,7 @@ else\n fi\n \n echo $ac_n \"checking for working automake\"\"... $ac_c\" 1>&6\n-echo \"configure:1344: checking for working automake\" >&5\n+echo \"configure:1326: checking for working automake\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1353,7 +1335,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoheader\"\"... $ac_c\" 1>&6\n-echo \"configure:1357: checking for working autoheader\" >&5\n+echo \"configure:1339: checking for working autoheader\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1366,7 +1348,7 @@ else\n fi\n \n echo $ac_n \"checking for working makeinfo\"\"... $ac_c\" 1>&6\n-echo \"configure:1370: checking for working makeinfo\" >&5\n+echo \"configure:1352: checking for working makeinfo\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -1385,7 +1367,7 @@ fi\n # LIBGCJ_CONFIGURE, which doesn't work because that means that it will\n # be run before AC_CANONICAL_HOST.\n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:1389: checking build system type\" >&5\n+echo \"configure:1371: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -1406,7 +1388,7 @@ echo \"$ac_t\"\"$build\" 1>&6\n # Extract the first word of \"${ac_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1410: checking for $ac_word\" >&5\n+echo \"configure:1392: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1438,7 +1420,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1442: checking for $ac_word\" >&5\n+echo \"configure:1424: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1470,7 +1452,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1474: checking for $ac_word\" >&5\n+echo \"configure:1456: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1502,7 +1484,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1506: checking for $ac_word\" >&5\n+echo \"configure:1488: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1547,7 +1529,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1551: checking for a BSD compatible install\" >&5\n+echo \"configure:1533: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1601,7 +1583,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:1605: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:1587: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -1639,7 +1621,7 @@ if false; then\n   \n \n echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n-echo \"configure:1643: checking for executable suffix\" >&5\n+echo \"configure:1625: checking for executable suffix\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1649,10 +1631,10 @@ else\n   rm -f conftest*\n   echo 'int main () { return 0; }' > conftest.$ac_ext\n   ac_cv_exeext=\n-  if { (eval echo configure:1653: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+  if { (eval echo configure:1635: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n     for file in conftest.*; do\n       case $file in\n-      *.c | *.o | *.obj | *.ilk | *.pdb) ;;\n+      *.c | *.o | *.obj) ;;\n       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;\n       esac\n     done\n@@ -1800,7 +1782,7 @@ ac_prog=ld\n if test \"$GCC\" = yes; then\n   # Check if gcc -print-prog-name=ld gives a path.\n   echo $ac_n \"checking for ld used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:1804: checking for ld used by GCC\" >&5\n+echo \"configure:1786: checking for ld used by GCC\" >&5\n   case $host in\n   *-*-mingw*)\n     # gcc leaves a trailing carriage return which upsets mingw\n@@ -1830,10 +1812,10 @@ echo \"configure:1804: checking for ld used by GCC\" >&5\n   esac\n elif test \"$with_gnu_ld\" = yes; then\n   echo $ac_n \"checking for GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1834: checking for GNU ld\" >&5\n+echo \"configure:1816: checking for GNU ld\" >&5\n else\n   echo $ac_n \"checking for non-GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1837: checking for non-GNU ld\" >&5\n+echo \"configure:1819: checking for non-GNU ld\" >&5\n fi\n if eval \"test \\\"`echo '$''{'lt_cv_path_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1868,7 +1850,7 @@ else\n fi\n test -z \"$LD\" && { echo \"configure: error: no acceptable ld found in \\$PATH\" 1>&2; exit 1; }\n echo $ac_n \"checking if the linker ($LD) is GNU ld\"\"... $ac_c\" 1>&6\n-echo \"configure:1872: checking if the linker ($LD) is GNU ld\" >&5\n+echo \"configure:1854: checking if the linker ($LD) is GNU ld\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1885,7 +1867,7 @@ with_gnu_ld=$lt_cv_prog_gnu_ld\n \n \n echo $ac_n \"checking for $LD option to reload object files\"\"... $ac_c\" 1>&6\n-echo \"configure:1889: checking for $LD option to reload object files\" >&5\n+echo \"configure:1871: checking for $LD option to reload object files\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1897,7 +1879,7 @@ reload_flag=$lt_cv_ld_reload_flag\n test -n \"$reload_flag\" && reload_flag=\" $reload_flag\"\n \n echo $ac_n \"checking for BSD-compatible nm\"\"... $ac_c\" 1>&6\n-echo \"configure:1901: checking for BSD-compatible nm\" >&5\n+echo \"configure:1883: checking for BSD-compatible nm\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_path_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1935,7 +1917,7 @@ NM=\"$lt_cv_path_NM\"\n echo \"$ac_t\"\"$NM\" 1>&6\n \n echo $ac_n \"checking how to recognise dependant libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:1939: checking how to recognise dependant libraries\" >&5\n+echo \"configure:1921: checking how to recognise dependant libraries\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2099,13 +2081,13 @@ file_magic_cmd=$lt_cv_file_magic_cmd\n deplibs_check_method=$lt_cv_deplibs_check_method\n \n echo $ac_n \"checking for object suffix\"\"... $ac_c\" 1>&6\n-echo \"configure:2103: checking for object suffix\" >&5\n+echo \"configure:2085: checking for object suffix\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_objext'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   rm -f conftest*\n echo 'int i = 1;' > conftest.$ac_ext\n-if { (eval echo configure:2109: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2091: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   for ac_file in conftest.*; do\n     case $ac_file in\n     *.c) ;;\n@@ -2129,7 +2111,7 @@ case $deplibs_check_method in\n file_magic*)\n   if test \"$file_magic_cmd\" = '$MAGIC_CMD'; then\n     echo $ac_n \"checking for ${ac_tool_prefix}file\"\"... $ac_c\" 1>&6\n-echo \"configure:2133: checking for ${ac_tool_prefix}file\" >&5\n+echo \"configure:2115: checking for ${ac_tool_prefix}file\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2191,7 +2173,7 @@ fi\n if test -z \"$lt_cv_path_MAGIC_CMD\"; then\n   if test -n \"$ac_tool_prefix\"; then\n     echo $ac_n \"checking for file\"\"... $ac_c\" 1>&6\n-echo \"configure:2195: checking for file\" >&5\n+echo \"configure:2177: checking for file\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2262,7 +2244,7 @@ esac\n # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2266: checking for $ac_word\" >&5\n+echo \"configure:2248: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2294,7 +2276,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2298: checking for $ac_word\" >&5\n+echo \"configure:2280: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2329,7 +2311,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}strip\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}strip; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2333: checking for $ac_word\" >&5\n+echo \"configure:2315: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2361,7 +2343,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"strip\", so it can be a program name with args.\n set dummy strip; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2365: checking for $ac_word\" >&5\n+echo \"configure:2347: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2428,8 +2410,8 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 2432 \"configure\"' > conftest.$ac_ext\n-  if { (eval echo configure:2433: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  echo '#line 2414 \"configure\"' > conftest.$ac_ext\n+  if { (eval echo configure:2415: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n     case `/usr/bin/file conftest.$ac_objext` in\n     *32-bit*)\n       LD=\"${LD-ld} -32\"\n@@ -2450,7 +2432,7 @@ case $host in\n   SAVE_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS -belf\"\n   echo $ac_n \"checking whether the C compiler needs -belf\"\"... $ac_c\" 1>&6\n-echo \"configure:2454: checking whether the C compiler needs -belf\" >&5\n+echo \"configure:2436: checking whether the C compiler needs -belf\" >&5\n if eval \"test \\\"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2463,14 +2445,14 @@ ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$a\n cross_compiling=$ac_cv_prog_cc_cross\n \n      cat > conftest.$ac_ext <<EOF\n-#line 2467 \"configure\"\n+#line 2449 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2474: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2456: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   lt_cv_cc_needs_belf=yes\n else\n@@ -2500,7 +2482,7 @@ echo \"$ac_t\"\"$lt_cv_cc_needs_belf\" 1>&6\n esac\n \n echo $ac_n \"checking how to run the C++ preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2504: checking how to run the C++ preprocessor\" >&5\n+echo \"configure:2486: checking how to run the C++ preprocessor\" >&5\n if test -z \"$CXXCPP\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -2513,12 +2495,12 @@ ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftes\n cross_compiling=$ac_cv_prog_cxx_cross\n   CXXCPP=\"${CXX-g++} -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2517 \"configure\"\n+#line 2499 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2522: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2504: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2709,6 +2691,13 @@ if test -z \"$enable_hash_synchronization\"; then\n    enable_hash_synchronization=$enable_hash_synchronization_default\n fi\n \n+if test \"${slow_pthread_self}\" = \"yes\"; then\n+  cat >> confdefs.h <<\\EOF\n+#define SLOW_PTHREAD_SELF 1\n+EOF\n+\n+fi\n+\n \n LIBGCJDEBUG=\"false\"\n \n@@ -2745,7 +2734,7 @@ EOF\n fi\n \n echo $ac_n \"checking for exception model to use\"\"... $ac_c\" 1>&6\n-echo \"configure:2749: checking for exception model to use\" >&5\n+echo \"configure:2738: checking for exception model to use\" >&5\n \n ac_ext=C\n # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -2760,7 +2749,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then\n   :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 2764 \"configure\"\n+#line 2753 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -2771,7 +2760,7 @@ void foo()\n EOF\n old_CXXFLAGS=\"$CXXFLAGS\"  \n CXXFLAGS=-S\n-if { (eval echo configure:2775: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2764: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   if grep _Unwind_SjLj_Resume conftest.s >/dev/null 2>&1 ; then\n     enable_sjlj_exceptions=yes\n   elif grep _Unwind_Resume conftest.s >/dev/null 2>&1 ; then\n@@ -2893,7 +2882,7 @@ esac\n \n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2897: checking how to run the C preprocessor\" >&5\n+echo \"configure:2886: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2908,13 +2897,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2912 \"configure\"\n+#line 2901 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2918: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2907: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2925,13 +2914,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2929 \"configure\"\n+#line 2918 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2935: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2924: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2942,13 +2931,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2946 \"configure\"\n+#line 2935 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2952: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2941: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2973,7 +2962,7 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n cat > conftest.$ac_ext <<EOF\n-#line 2977 \"configure\"\n+#line 2966 \"configure\"\n #include \"confdefs.h\"\n #include <stdint.h>\n EOF\n@@ -2988,7 +2977,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 2992 \"configure\"\n+#line 2981 \"configure\"\n #include \"confdefs.h\"\n #include <inttypes.h>\n EOF\n@@ -3003,7 +2992,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 3007 \"configure\"\n+#line 2996 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n EOF\n@@ -3018,7 +3007,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 3022 \"configure\"\n+#line 3011 \"configure\"\n #include \"confdefs.h\"\n #include <sys/config.h>\n EOF\n@@ -3035,7 +3024,7 @@ rm -f conftest*\n \n \n cat > conftest.$ac_ext <<EOF\n-#line 3039 \"configure\"\n+#line 3028 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -3050,7 +3039,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 3054 \"configure\"\n+#line 3043 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -3102,7 +3091,7 @@ ZLIBTESTSPEC=\n libsubdir=.libs\n \n echo $ac_n \"checking for garbage collector to use\"\"... $ac_c\" 1>&6\n-echo \"configure:3106: checking for garbage collector to use\" >&5\n+echo \"configure:3095: checking for garbage collector to use\" >&5\n # Check whether --enable-java-gc or --disable-java-gc was given.\n if test \"${enable_java_gc+set}\" = set; then\n   enableval=\"$enable_java_gc\"\n@@ -3158,7 +3147,7 @@ esac\n \n \n echo $ac_n \"checking for thread model used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:3162: checking for thread model used by GCC\" >&5\n+echo \"configure:3151: checking for thread model used by GCC\" >&5\n THREADS=`$CC -v 2>&1 | sed -n 's/^Thread model: //p'`\n echo \"$ac_t\"\"$THREADS\" 1>&6\n \n@@ -3266,6 +3255,8 @@ esac\n \n \n \n+\n+\n HASH_SYNC_SPEC=\n # Hash synchronization is only useful with posix threads right now.\n if test \"$enable_hash_synchronization\" = yes && test \"$THREADS\" = \"posix\"; then\n@@ -3351,12 +3342,12 @@ else\n    for ac_func in strerror ioctl select fstat open fsync sleep opendir\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3355: checking for $ac_func\" >&5\n+echo \"configure:3346: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3360 \"configure\"\n+#line 3351 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3379,7 +3370,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3383: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3374: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3406,12 +3397,12 @@ done\n    for ac_func in gmtime_r localtime_r readdir_r getpwuid_r getcwd\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3410: checking for $ac_func\" >&5\n+echo \"configure:3401: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3415 \"configure\"\n+#line 3406 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3434,7 +3425,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3438: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3429: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3461,12 +3452,12 @@ done\n    for ac_func in access stat mkdir rename rmdir unlink realpath utime chmod\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3465: checking for $ac_func\" >&5\n+echo \"configure:3456: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3470 \"configure\"\n+#line 3461 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3489,7 +3480,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3493: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3484: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3516,12 +3507,12 @@ done\n    for ac_func in nl_langinfo setlocale\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3520: checking for $ac_func\" >&5\n+echo \"configure:3511: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3525 \"configure\"\n+#line 3516 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3544,7 +3535,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3548: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3539: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3571,12 +3562,12 @@ done\n    for ac_func in inet_aton inet_addr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3575: checking for $ac_func\" >&5\n+echo \"configure:3566: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3580 \"configure\"\n+#line 3571 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3599,7 +3590,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3603: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3594: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3626,12 +3617,12 @@ done\n    for ac_func in inet_pton uname inet_ntoa\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3630: checking for $ac_func\" >&5\n+echo \"configure:3621: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3635 \"configure\"\n+#line 3626 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3654,7 +3645,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3658: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3649: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3681,12 +3672,12 @@ done\n    for ac_func in backtrace fork execvp pipe sigaction\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3685: checking for $ac_func\" >&5\n+echo \"configure:3676: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3690 \"configure\"\n+#line 3681 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3709,7 +3700,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3713: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3704: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3737,17 +3728,17 @@ done\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:3741: checking for $ac_hdr\" >&5\n+echo \"configure:3732: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3746 \"configure\"\n+#line 3737 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3751: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3742: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3774,15 +3765,15 @@ fi\n done\n  \n    echo $ac_n \"checking for dladdr in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:3778: checking for dladdr in -ldl\" >&5\n+echo \"configure:3769: checking for dladdr in -ldl\" >&5\n ac_lib_var=`echo dl'_'dladdr | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3786 \"configure\"\n+#line 3777 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3793,7 +3784,7 @@ int main() {\n dladdr()\n ; return 0; }\n EOF\n-if { (eval echo configure:3797: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3788: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3822,7 +3813,7 @@ do\n \n ac_safe=`echo \"$ac_file\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_file\"\"... $ac_c\" 1>&6\n-echo \"configure:3826: checking for $ac_file\" >&5\n+echo \"configure:3817: checking for $ac_file\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_file_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3870,15 +3861,15 @@ fi\n \n \n   echo $ac_n \"checking for iconv\"\"... $ac_c\" 1>&6\n-echo \"configure:3874: checking for iconv\" >&5\n+echo \"configure:3865: checking for iconv\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_func_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n     am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n     am_cv_lib_iconv=no\n     cat > conftest.$ac_ext <<EOF\n-#line 3882 \"configure\"\n+#line 3873 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -3888,7 +3879,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n        iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:3892: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3883: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_func_iconv=yes\n else\n@@ -3900,7 +3891,7 @@ rm -f conftest*\n       am_save_LIBS=\"$LIBS\"\n       LIBS=\"$LIBS $am_cv_libiconv_ldpath -liconv\"\n       cat > conftest.$ac_ext <<EOF\n-#line 3904 \"configure\"\n+#line 3895 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -3910,7 +3901,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n          iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:3914: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3905: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_lib_iconv=yes\n         am_cv_func_iconv=yes\n@@ -3931,13 +3922,13 @@ echo \"$ac_t\"\"$am_cv_func_iconv\" 1>&6\n EOF\n \n     echo $ac_n \"checking for iconv declaration\"\"... $ac_c\" 1>&6\n-echo \"configure:3935: checking for iconv declaration\" >&5\n+echo \"configure:3926: checking for iconv declaration\" >&5\n     if eval \"test \\\"`echo '$''{'am_cv_proto_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n       cat > conftest.$ac_ext <<EOF\n-#line 3941 \"configure\"\n+#line 3932 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdlib.h>\n@@ -3956,7 +3947,7 @@ int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3960: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3951: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   am_cv_proto_iconv_arg1=\"\"\n else\n@@ -3985,19 +3976,19 @@ EOF\n \n    if test $ac_cv_header_locale_h = yes; then\n     echo $ac_n \"checking for LC_MESSAGES\"\"... $ac_c\" 1>&6\n-echo \"configure:3989: checking for LC_MESSAGES\" >&5\n+echo \"configure:3980: checking for LC_MESSAGES\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3994 \"configure\"\n+#line 3985 \"configure\"\n #include \"confdefs.h\"\n #include <locale.h>\n int main() {\n return LC_MESSAGES\n ; return 0; }\n EOF\n-if { (eval echo configure:4001: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3992: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_val_LC_MESSAGES=yes\n else\n@@ -4018,20 +4009,20 @@ EOF\n     fi\n   fi\n    echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4022: checking whether struct tm is in sys/time.h or time.h\" >&5\n+echo \"configure:4013: checking whether struct tm is in sys/time.h or time.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4027 \"configure\"\n+#line 4018 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <time.h>\n int main() {\n struct tm *tp; tp->tm_sec;\n ; return 0; }\n EOF\n-if { (eval echo configure:4035: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4026: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm=time.h\n else\n@@ -4052,20 +4043,20 @@ EOF\n fi\n \n echo $ac_n \"checking for tm_zone in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:4056: checking for tm_zone in struct tm\" >&5\n+echo \"configure:4047: checking for tm_zone in struct tm\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4061 \"configure\"\n+#line 4052 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <$ac_cv_struct_tm>\n int main() {\n struct tm tm; tm.tm_zone;\n ; return 0; }\n EOF\n-if { (eval echo configure:4069: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4060: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm_zone=yes\n else\n@@ -4085,12 +4076,12 @@ EOF\n \n else\n   echo $ac_n \"checking for tzname\"\"... $ac_c\" 1>&6\n-echo \"configure:4089: checking for tzname\" >&5\n+echo \"configure:4080: checking for tzname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_var_tzname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4094 \"configure\"\n+#line 4085 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n #ifndef tzname /* For SGI.  */\n@@ -4100,7 +4091,7 @@ int main() {\n atoi(*tzname);\n ; return 0; }\n EOF\n-if { (eval echo configure:4104: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4095: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_var_tzname=yes\n else\n@@ -4125,12 +4116,12 @@ fi\n    for ac_func in gethostbyname_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4129: checking for $ac_func\" >&5\n+echo \"configure:4120: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4134 \"configure\"\n+#line 4125 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4153,7 +4144,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4157: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4148: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4180,7 +4171,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 4184 \"configure\"\n+#line 4175 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -4200,7 +4191,7 @@ rm -f conftest*\n      *\" -D_REENTRANT \"*) ;;\n      *)\n \t\techo $ac_n \"checking whether gethostbyname_r declaration requires -D_REENTRANT\"\"... $ac_c\" 1>&6\n-echo \"configure:4204: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n+echo \"configure:4195: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_gethostbyname_r_needs_reentrant'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4213,14 +4204,14 @@ ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftes\n cross_compiling=$ac_cv_prog_cxx_cross\n \n \t  cat > conftest.$ac_ext <<EOF\n-#line 4217 \"configure\"\n+#line 4208 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:4224: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4215: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=no\n else\n@@ -4230,14 +4221,14 @@ else\n   \t\tCPPFLAGS_SAVE=\"$CPPFLAGS\"\n \t\tCPPFLAGS=\"$CPPFLAGS -D_REENTRANT\"\n \t\tcat > conftest.$ac_ext <<EOF\n-#line 4234 \"configure\"\n+#line 4225 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:4241: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4232: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=yes\n else\n@@ -4272,12 +4263,12 @@ EOF\n      esac\n \n      echo $ac_n \"checking for struct hostent_data\"\"... $ac_c\" 1>&6\n-echo \"configure:4276: checking for struct hostent_data\" >&5\n+echo \"configure:4267: checking for struct hostent_data\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_struct_hostent_data'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \tcat > conftest.$ac_ext <<EOF\n-#line 4281 \"configure\"\n+#line 4272 \"configure\"\n #include \"confdefs.h\"\n \n #if GETHOSTBYNAME_R_NEEDS_REENTRANT && !defined(_REENTRANT)\n@@ -4288,7 +4279,7 @@ int main() {\n struct hostent_data data;\n ; return 0; }\n EOF\n-if { (eval echo configure:4292: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4283: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_struct_hostent_data=yes\n else\n@@ -4320,7 +4311,7 @@ done\n    # to exist where expected.  (The root issue: AC_CHECK_FUNCS assumes C\n    # linkage check is enough, yet C++ code requires proper prototypes.)\n    cat > conftest.$ac_ext <<EOF\n-#line 4324 \"configure\"\n+#line 4315 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -4331,12 +4322,12 @@ if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n    for ac_func in gethostbyaddr_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4335: checking for $ac_func\" >&5\n+echo \"configure:4326: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4340 \"configure\"\n+#line 4331 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4359,7 +4350,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4363: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4354: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4386,7 +4377,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 4390 \"configure\"\n+#line 4381 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -4413,12 +4404,12 @@ rm -f conftest*\n    for ac_func in gethostname\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4417: checking for $ac_func\" >&5\n+echo \"configure:4408: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4422 \"configure\"\n+#line 4413 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4441,7 +4432,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4445: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4436: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4465,7 +4456,7 @@ EOF\n EOF\n \n      cat > conftest.$ac_ext <<EOF\n-#line 4469 \"configure\"\n+#line 4460 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -4496,12 +4487,12 @@ done\n       for ac_func in pthread_mutexattr_settype pthread_mutexattr_setkind_np\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4500: checking for $ac_func\" >&5\n+echo \"configure:4491: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4505 \"configure\"\n+#line 4496 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4524,7 +4515,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4528: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4519: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4554,12 +4545,12 @@ done\n       for ac_func in sched_yield\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4558: checking for $ac_func\" >&5\n+echo \"configure:4549: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4563 \"configure\"\n+#line 4554 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4582,7 +4573,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4586: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4577: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4604,15 +4595,15 @@ EOF\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for sched_yield in -lrt\"\"... $ac_c\" 1>&6\n-echo \"configure:4608: checking for sched_yield in -lrt\" >&5\n+echo \"configure:4599: checking for sched_yield in -lrt\" >&5\n ac_lib_var=`echo rt'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lrt  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4616 \"configure\"\n+#line 4607 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4623,7 +4614,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:4627: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4618: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4649,15 +4640,15 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n \n \t  echo $ac_n \"checking for sched_yield in -lposix4\"\"... $ac_c\" 1>&6\n-echo \"configure:4653: checking for sched_yield in -lposix4\" >&5\n+echo \"configure:4644: checking for sched_yield in -lposix4\" >&5\n ac_lib_var=`echo posix4'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lposix4  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4661 \"configure\"\n+#line 4652 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4668,7 +4659,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:4672: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4663: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4704,7 +4695,7 @@ done\n       # We can save a little space at runtime if the mutex has m_count\n       # or __m_count.  This is a nice hack for Linux.\n       cat > conftest.$ac_ext <<EOF\n-#line 4708 \"configure\"\n+#line 4699 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -4713,7 +4704,7 @@ int main() {\n         \n ; return 0; }\n EOF\n-if { (eval echo configure:4717: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4708: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE_M_COUNT 1\n@@ -4725,7 +4716,7 @@ else\n   rm -rf conftest*\n   \n \tcat > conftest.$ac_ext <<EOF\n-#line 4729 \"configure\"\n+#line 4720 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -4734,7 +4725,7 @@ int main() {\n \t  \n ; return 0; }\n EOF\n-if { (eval echo configure:4738: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4729: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE___M_COUNT 1\n@@ -4754,12 +4745,12 @@ rm -f conftest*\n    for ac_func in gettimeofday time ftime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4758: checking for $ac_func\" >&5\n+echo \"configure:4749: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4763 \"configure\"\n+#line 4754 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4782,7 +4773,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4786: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4777: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4813,12 +4804,12 @@ done\n    for ac_func in memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4817: checking for $ac_func\" >&5\n+echo \"configure:4808: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4822 \"configure\"\n+#line 4813 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4841,7 +4832,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4845: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4836: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4871,12 +4862,12 @@ done\n    for ac_func in memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4875: checking for $ac_func\" >&5\n+echo \"configure:4866: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4880 \"configure\"\n+#line 4871 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4899,7 +4890,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4903: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4894: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4928,15 +4919,15 @@ done\n    fi\n \n    echo $ac_n \"checking for dlopen in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:4932: checking for dlopen in -ldl\" >&5\n+echo \"configure:4923: checking for dlopen in -ldl\" >&5\n ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4940 \"configure\"\n+#line 4931 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4947,7 +4938,7 @@ int main() {\n dlopen()\n ; return 0; }\n EOF\n-if { (eval echo configure:4951: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4942: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4992,20 +4983,20 @@ fi\n    #--------------------------------------------------------------------\n \n    echo $ac_n \"checking for socket libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:4996: checking for socket libraries\" >&5\n+echo \"configure:4987: checking for socket libraries\" >&5\n if eval \"test \\\"`echo '$''{'gcj_cv_lib_sockets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   gcj_cv_lib_sockets=\n      gcj_checkBoth=0\n      unset ac_cv_func_connect\n      echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:5004: checking for connect\" >&5\n+echo \"configure:4995: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5009 \"configure\"\n+#line 5000 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -5028,7 +5019,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5032: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5023: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -5051,22 +5042,22 @@ fi\n      if test \"$gcj_checkSocket\" = 1; then\n \t unset ac_cv_func_connect\n \t echo $ac_n \"checking for main in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:5055: checking for main in -lsocket\" >&5\n+echo \"configure:5046: checking for main in -lsocket\" >&5\n ac_lib_var=`echo socket'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5063 \"configure\"\n+#line 5054 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:5070: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5061: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5093,12 +5084,12 @@ fi\n \t LIBS=\"$LIBS -lsocket -lnsl\"\n \t unset ac_cv_func_accept\n \t echo $ac_n \"checking for accept\"\"... $ac_c\" 1>&6\n-echo \"configure:5097: checking for accept\" >&5\n+echo \"configure:5088: checking for accept\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_accept'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5102 \"configure\"\n+#line 5093 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char accept(); below.  */\n@@ -5121,7 +5112,7 @@ accept();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5125: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5116: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_accept=yes\"\n else\n@@ -5148,12 +5139,12 @@ fi\n      gcj_oldLibs=$LIBS\n      LIBS=\"$LIBS $gcj_cv_lib_sockets\"\n      echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:5152: checking for gethostbyname\" >&5\n+echo \"configure:5143: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5157 \"configure\"\n+#line 5148 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -5176,7 +5167,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5180: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5171: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -5194,22 +5185,22 @@ if eval \"test \\\"`echo '$ac_cv_func_'gethostbyname`\\\" = yes\"; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for main in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:5198: checking for main in -lnsl\" >&5\n+echo \"configure:5189: checking for main in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5206 \"configure\"\n+#line 5197 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:5213: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5204: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5241,15 +5232,15 @@ echo \"$ac_t\"\"$gcj_cv_lib_sockets\" 1>&6\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:5245: checking for deflate in -lz\" >&5\n+echo \"configure:5236: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5253 \"configure\"\n+#line 5244 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5260,7 +5251,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:5264: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5255: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5290,22 +5281,22 @@ fi\n    # requires -ldl.\n    if test \"$GC\" = boehm; then\n       echo $ac_n \"checking for main in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:5294: checking for main in -ldl\" >&5\n+echo \"configure:5285: checking for main in -ldl\" >&5\n ac_lib_var=`echo dl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5302 \"configure\"\n+#line 5293 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:5309: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5300: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5371,7 +5362,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}gcj\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}gcj; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5375: checking for $ac_word\" >&5\n+echo \"configure:5366: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5403,7 +5394,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"gcj\", so it can be a program name with args.\n set dummy gcj; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5407: checking for $ac_word\" >&5\n+echo \"configure:5398: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5465,13 +5456,13 @@ exec 5>>./config.log\n CPPFLAGS=$GCJ_SAVE_CPPFLAGS\n \n echo $ac_n \"checking size of void *\"\"... $ac_c\" 1>&6\n-echo \"configure:5469: checking size of void *\" >&5\n+echo \"configure:5460: checking size of void *\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_void_p'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 5475 \"configure\"\n+#line 5466 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -5481,7 +5472,7 @@ int main() {\n switch (0) case 0: case (sizeof (void *) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:5485: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5476: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof_void_p=$ac_size\n else\n@@ -5572,18 +5563,18 @@ fi\n \n \n echo $ac_n \"checking for g++ -ffloat-store bug\"\"... $ac_c\" 1>&6\n-echo \"configure:5576: checking for g++ -ffloat-store bug\" >&5\n+echo \"configure:5567: checking for g++ -ffloat-store bug\" >&5\n save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\"-x c++ -O2 -ffloat-store\"\n cat > conftest.$ac_ext <<EOF\n-#line 5580 \"configure\"\n+#line 5571 \"configure\"\n #include \"confdefs.h\"\n #include <math.h>\n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5587: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5578: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n else\n@@ -5603,17 +5594,17 @@ for ac_hdr in unistd.h bstring.h sys/time.h sys/types.h fcntl.h sys/ioctl.h sys/\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:5607: checking for $ac_hdr\" >&5\n+echo \"configure:5598: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5612 \"configure\"\n+#line 5603 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5617: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5608: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5643,17 +5634,17 @@ for ac_hdr in dirent.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:5647: checking for $ac_hdr\" >&5\n+echo \"configure:5638: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5652 \"configure\"\n+#line 5643 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5657: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5648: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5683,17 +5674,17 @@ for ac_hdr in inttypes.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:5687: checking for $ac_hdr\" >&5\n+echo \"configure:5678: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5692 \"configure\"\n+#line 5683 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5697: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5688: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5729,12 +5720,12 @@ fi\n done\n \n echo $ac_n \"checking for sys/wait.h that is POSIX.1 compatible\"\"... $ac_c\" 1>&6\n-echo \"configure:5733: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n+echo \"configure:5724: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5738 \"configure\"\n+#line 5729 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/wait.h>\n@@ -5750,7 +5741,7 @@ wait (&s);\n s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;\n ; return 0; }\n EOF\n-if { (eval echo configure:5754: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5745: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_sys_wait_h=yes\n else\n@@ -5772,20 +5763,20 @@ fi\n \n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:5776: checking for ANSI C header files\" >&5\n+echo \"configure:5767: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5781 \"configure\"\n+#line 5772 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5789: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5780: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5802,7 +5793,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 5806 \"configure\"\n+#line 5797 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -5820,7 +5811,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 5824 \"configure\"\n+#line 5815 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -5841,7 +5832,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5845 \"configure\"\n+#line 5836 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -5852,7 +5843,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:5856: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:5847: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -5876,12 +5867,12 @@ EOF\n fi\n \n echo $ac_n \"checking for ssize_t\"\"... $ac_c\" 1>&6\n-echo \"configure:5880: checking for ssize_t\" >&5\n+echo \"configure:5871: checking for ssize_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_ssize_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5885 \"configure\"\n+#line 5876 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -5910,9 +5901,9 @@ fi\n \n \n echo $ac_n \"checking for in_addr_t\"\"... $ac_c\" 1>&6\n-echo \"configure:5914: checking for in_addr_t\" >&5\n+echo \"configure:5905: checking for in_addr_t\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 5916 \"configure\"\n+#line 5907 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -5926,7 +5917,7 @@ int main() {\n in_addr_t foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:5930: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5921: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_IN_ADDR_T 1\n@@ -5942,16 +5933,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct ip_mreq is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:5946: checking whether struct ip_mreq is in netinet/in.h\" >&5\n+echo \"configure:5937: checking whether struct ip_mreq is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 5948 \"configure\"\n+#line 5939 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct ip_mreq mreq;\n ; return 0; }\n EOF\n-if { (eval echo configure:5955: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5946: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_STRUCT_IP_MREQ 1\n@@ -5967,16 +5958,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct ipv6_mreq is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:5971: checking whether struct ipv6_mreq is in netinet/in.h\" >&5\n+echo \"configure:5962: checking whether struct ipv6_mreq is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 5973 \"configure\"\n+#line 5964 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct ipv6_mreq mreq6;\n ; return 0; }\n EOF\n-if { (eval echo configure:5980: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5971: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_STRUCT_IPV6_MREQ 1\n@@ -5992,16 +5983,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct sockaddr_in6 is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:5996: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n+echo \"configure:5987: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 5998 \"configure\"\n+#line 5989 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct sockaddr_in6 addr6;\n ; return 0; }\n EOF\n-if { (eval echo configure:6005: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5996: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_INET6 1\n@@ -6017,9 +6008,9 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for socklen_t in sys/socket.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6021: checking for socklen_t in sys/socket.h\" >&5\n+echo \"configure:6012: checking for socklen_t in sys/socket.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6023 \"configure\"\n+#line 6014 \"configure\"\n #include \"confdefs.h\"\n #define _POSIX_PII_SOCKET\n #include <sys/types.h>\n@@ -6028,7 +6019,7 @@ int main() {\n socklen_t x = 5;\n ; return 0; }\n EOF\n-if { (eval echo configure:6032: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6023: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_SOCKLEN_T 1\n@@ -6044,16 +6035,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for tm_gmtoff in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:6048: checking for tm_gmtoff in struct tm\" >&5\n+echo \"configure:6039: checking for tm_gmtoff in struct tm\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6050 \"configure\"\n+#line 6041 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n struct tm tim; tim.tm_gmtoff = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:6057: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6048: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define STRUCT_TM_HAS_GMTOFF 1\n@@ -6066,16 +6057,16 @@ else\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n    echo $ac_n \"checking for global timezone variable\"\"... $ac_c\" 1>&6\n-echo \"configure:6070: checking for global timezone variable\" >&5\n+echo \"configure:6061: checking for global timezone variable\" >&5\n             cat > conftest.$ac_ext <<EOF\n-#line 6072 \"configure\"\n+#line 6063 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n long z2 = timezone;\n ; return 0; }\n EOF\n-if { (eval echo configure:6079: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6070: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_TIMEZONE 1\n@@ -6095,19 +6086,19 @@ rm -f conftest*\n # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6099: checking for working alloca.h\" >&5\n+echo \"configure:6090: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6104 \"configure\"\n+#line 6095 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:6111: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6102: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -6128,12 +6119,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:6132: checking for alloca\" >&5\n+echo \"configure:6123: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6137 \"configure\"\n+#line 6128 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -6161,7 +6152,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:6165: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6156: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -6193,12 +6184,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:6197: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:6188: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6202 \"configure\"\n+#line 6193 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -6223,12 +6214,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:6227: checking for $ac_func\" >&5\n+echo \"configure:6218: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6232 \"configure\"\n+#line 6223 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -6251,7 +6242,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6255: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6246: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -6278,15 +6269,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:6282: checking stack direction for C alloca\" >&5\n+echo \"configure:6273: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6290 \"configure\"\n+#line 6281 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -6305,7 +6296,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:6309: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:6300: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -6332,7 +6323,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6336: checking for $ac_word\" >&5\n+echo \"configure:6327: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_PERL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6410,7 +6401,7 @@ fi\n # Uses ac_ vars as temps to allow command line to override cache and checks.\n # --without-x overrides everything else, but does not touch the cache.\n echo $ac_n \"checking for X\"\"... $ac_c\" 1>&6\n-echo \"configure:6414: checking for X\" >&5\n+echo \"configure:6405: checking for X\" >&5\n \n # Check whether --with-x or --without-x was given.\n if test \"${with_x+set}\" = set; then\n@@ -6472,12 +6463,12 @@ if test \"$ac_x_includes\" = NO; then\n \n   # First, try using that file with no special directory specified.\n cat > conftest.$ac_ext <<EOF\n-#line 6476 \"configure\"\n+#line 6467 \"configure\"\n #include \"confdefs.h\"\n #include <$x_direct_test_include>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:6481: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:6472: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -6546,14 +6537,14 @@ if test \"$ac_x_libraries\" = NO; then\n   ac_save_LIBS=\"$LIBS\"\n   LIBS=\"-l$x_direct_test_library $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6550 \"configure\"\n+#line 6541 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n ${x_direct_test_function}()\n ; return 0; }\n EOF\n-if { (eval echo configure:6557: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6548: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   LIBS=\"$ac_save_LIBS\"\n # We can link X programs with no special library path.\n@@ -6659,17 +6650,17 @@ else\n     case \"`(uname -sr) 2>/dev/null`\" in\n     \"SunOS 5\"*)\n       echo $ac_n \"checking whether -R must be followed by a space\"\"... $ac_c\" 1>&6\n-echo \"configure:6663: checking whether -R must be followed by a space\" >&5\n+echo \"configure:6654: checking whether -R must be followed by a space\" >&5\n       ac_xsave_LIBS=\"$LIBS\"; LIBS=\"$LIBS -R$x_libraries\"\n       cat > conftest.$ac_ext <<EOF\n-#line 6666 \"configure\"\n+#line 6657 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6673: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6664: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_R_nospace=yes\n else\n@@ -6685,14 +6676,14 @@ rm -f conftest*\n       else\n \tLIBS=\"$ac_xsave_LIBS -R $x_libraries\"\n \tcat > conftest.$ac_ext <<EOF\n-#line 6689 \"configure\"\n+#line 6680 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6696: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6687: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_R_space=yes\n else\n@@ -6724,15 +6715,15 @@ rm -f conftest*\n     # libraries were built with DECnet support.  And karl@cs.umb.edu says\n     # the Alpha needs dnet_stub (dnet does not exist).\n     echo $ac_n \"checking for dnet_ntoa in -ldnet\"\"... $ac_c\" 1>&6\n-echo \"configure:6728: checking for dnet_ntoa in -ldnet\" >&5\n+echo \"configure:6719: checking for dnet_ntoa in -ldnet\" >&5\n ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldnet  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6736 \"configure\"\n+#line 6727 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6743,7 +6734,7 @@ int main() {\n dnet_ntoa()\n ; return 0; }\n EOF\n-if { (eval echo configure:6747: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6738: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -6765,15 +6756,15 @@ fi\n \n     if test $ac_cv_lib_dnet_dnet_ntoa = no; then\n       echo $ac_n \"checking for dnet_ntoa in -ldnet_stub\"\"... $ac_c\" 1>&6\n-echo \"configure:6769: checking for dnet_ntoa in -ldnet_stub\" >&5\n+echo \"configure:6760: checking for dnet_ntoa in -ldnet_stub\" >&5\n ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldnet_stub  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6777 \"configure\"\n+#line 6768 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6784,7 +6775,7 @@ int main() {\n dnet_ntoa()\n ; return 0; }\n EOF\n-if { (eval echo configure:6788: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6779: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -6813,12 +6804,12 @@ fi\n     # The nsl library prevents programs from opening the X display\n     # on Irix 5.2, according to dickey@clark.net.\n     echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:6817: checking for gethostbyname\" >&5\n+echo \"configure:6808: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6822 \"configure\"\n+#line 6813 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -6841,7 +6832,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6845: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6836: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -6862,15 +6853,15 @@ fi\n \n     if test $ac_cv_func_gethostbyname = no; then\n       echo $ac_n \"checking for gethostbyname in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:6866: checking for gethostbyname in -lnsl\" >&5\n+echo \"configure:6857: checking for gethostbyname in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6874 \"configure\"\n+#line 6865 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6881,7 +6872,7 @@ int main() {\n gethostbyname()\n ; return 0; }\n EOF\n-if { (eval echo configure:6885: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6876: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -6911,12 +6902,12 @@ fi\n     # -lsocket must be given before -lnsl if both are needed.\n     # We assume that if connect needs -lnsl, so does gethostbyname.\n     echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:6915: checking for connect\" >&5\n+echo \"configure:6906: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6920 \"configure\"\n+#line 6911 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -6939,7 +6930,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6943: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6934: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -6960,15 +6951,15 @@ fi\n \n     if test $ac_cv_func_connect = no; then\n       echo $ac_n \"checking for connect in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:6964: checking for connect in -lsocket\" >&5\n+echo \"configure:6955: checking for connect in -lsocket\" >&5\n ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket $X_EXTRA_LIBS $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6972 \"configure\"\n+#line 6963 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6979,7 +6970,7 @@ int main() {\n connect()\n ; return 0; }\n EOF\n-if { (eval echo configure:6983: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6974: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7003,12 +6994,12 @@ fi\n \n     # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.\n     echo $ac_n \"checking for remove\"\"... $ac_c\" 1>&6\n-echo \"configure:7007: checking for remove\" >&5\n+echo \"configure:6998: checking for remove\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_remove'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7012 \"configure\"\n+#line 7003 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char remove(); below.  */\n@@ -7031,7 +7022,7 @@ remove();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7035: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7026: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_remove=yes\"\n else\n@@ -7052,15 +7043,15 @@ fi\n \n     if test $ac_cv_func_remove = no; then\n       echo $ac_n \"checking for remove in -lposix\"\"... $ac_c\" 1>&6\n-echo \"configure:7056: checking for remove in -lposix\" >&5\n+echo \"configure:7047: checking for remove in -lposix\" >&5\n ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lposix  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7064 \"configure\"\n+#line 7055 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7071,7 +7062,7 @@ int main() {\n remove()\n ; return 0; }\n EOF\n-if { (eval echo configure:7075: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7066: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7095,12 +7086,12 @@ fi\n \n     # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.\n     echo $ac_n \"checking for shmat\"\"... $ac_c\" 1>&6\n-echo \"configure:7099: checking for shmat\" >&5\n+echo \"configure:7090: checking for shmat\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_shmat'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7104 \"configure\"\n+#line 7095 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char shmat(); below.  */\n@@ -7123,7 +7114,7 @@ shmat();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7127: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7118: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_shmat=yes\"\n else\n@@ -7144,15 +7135,15 @@ fi\n \n     if test $ac_cv_func_shmat = no; then\n       echo $ac_n \"checking for shmat in -lipc\"\"... $ac_c\" 1>&6\n-echo \"configure:7148: checking for shmat in -lipc\" >&5\n+echo \"configure:7139: checking for shmat in -lipc\" >&5\n ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lipc  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7156 \"configure\"\n+#line 7147 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7163,7 +7154,7 @@ int main() {\n shmat()\n ; return 0; }\n EOF\n-if { (eval echo configure:7167: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7158: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7196,15 +7187,15 @@ fi\n   # libraries we check for below, so use a different variable.\n   #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.\n   echo $ac_n \"checking for IceConnectionNumber in -lICE\"\"... $ac_c\" 1>&6\n-echo \"configure:7200: checking for IceConnectionNumber in -lICE\" >&5\n+echo \"configure:7191: checking for IceConnectionNumber in -lICE\" >&5\n ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lICE $X_EXTRA_LIBS $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7208 \"configure\"\n+#line 7199 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7215,7 +7206,7 @@ int main() {\n IceConnectionNumber()\n ; return 0; }\n EOF\n-if { (eval echo configure:7219: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7210: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7453,7 +7444,6 @@ s%@build_cpu@%$build_cpu%g\n s%@build_vendor@%$build_vendor%g\n s%@build_os@%$build_os%g\n s%@CC@%$CC%g\n-s%@glibjava_CXX@%$glibjava_CXX%g\n s%@CXX@%$CXX%g\n s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g\n s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g\n@@ -7753,8 +7743,8 @@ fi; done\n EOF\n \n cat >> $CONFIG_STATUS <<EOF\n-ac_sources=\"include/$PLATFORMH java/io/natFile${PLATFORM}.cc java/io/natFileDescriptor${PLATFORM}.cc java/lang/${PLATFORM}Process.java java/lang/nat${PLATFORM}Process.cc include/$GCHDR include/$THREADH $SIGNAL_HANDLER\"\n-ac_dests=\"include/platform.h java/io/natFile.cc java/io/natFileDescriptor.cc java/lang/ConcreteProcess.java java/lang/natConcreteProcess.cc include/java-gc.h include/java-threads.h include/java-signal.h\"\n+ac_sources=\"include/$PLATFORMH java/io/natFile${PLATFORM}.cc java/io/natFileDescriptor${PLATFORM}.cc java/lang/${PLATFORM}Process.java java/lang/nat${PLATFORM}Process.cc include/$GCHDR include/$THREADH sysdep/$sysdeps_dir $SIGNAL_HANDLER\"\n+ac_dests=\"include/platform.h java/io/natFile.cc java/io/natFileDescriptor.cc java/lang/ConcreteProcess.java java/lang/natConcreteProcess.cc include/java-gc.h include/java-threads.h sysdep include/java-signal.h\"\n EOF\n \n cat >> $CONFIG_STATUS <<\\EOF"}, {"sha": "a073d5114c73f0e1c55cc4325dc0839468c46ed5", "filename": "libjava/configure.host", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fconfigure.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fconfigure.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.host?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -18,6 +18,14 @@\n #   libgcj_cflags\tSpecial CFLAGS to use when building\n #   libgcj_cxxflags\tSpecial CXXFLAGS to use when building\n #   libgcj_javaflags\tSpecial JAVAFLAGS to use when building\n+#   libgcj_interpreter  If the bytecode interpreter supports this platform.\n+#   enable_java_net_default  If java.net native code should be enabled by\n+#                            default.\n+#   enable_hash_synchronization_default  If hash synchronization should be\n+#                                        enabled by default.\n+#   sysdeps_dir\t\tDirectory containing system-dependent headers\n+#   slow_pthread_self   The synchronization code should try to avoid \n+#\t\t\tpthread_self calls by caching thread IDs in a hashtable\n \n libgcj_flags=\n libgcj_cflags=\n@@ -26,6 +34,8 @@ libgcj_javaflags=\n libgcj_interpreter=\n enable_java_net_default=yes\n enable_hash_synchronization_default=no\n+sysdeps_dir=generic\n+slow_pthread_self=\n \n case \"${target_optspace}:${host}\" in\n   yes:*)\n@@ -60,27 +70,35 @@ case \"${host}\" in\n  \tenable_getenv_properties_default=no\n \t;;\n   i686-*|i586-*|i486-*|i386-*)\n+\tsysdeps_dir=i386\n \tlibgcj_flags=\"${libgcj_flags} -ffloat-store\"\n \tlibgcj_interpreter=yes\n \tlibgcj_cxxflags=\"-D__NO_MATH_INLINES\"\n \tlibgcj_cflags=\"-D__NO_MATH_INLINES\"\n \tDIVIDESPEC=-fno-use-divide-subroutine\n \tenable_hash_synchronization_default=yes\n+\tslow_pthread_self=yes\n \t;;\n   alpha*-*)\n+\tsysdeps_dir=alpha\n \tlibgcj_flags=\"${libgcj_flags} -mieee\"\n \tlibgcj_interpreter=yes\n \tenable_hash_synchronization_default=yes\n \t;;\n   powerpc*-linux*)\n+\tsysdeps_dir=powerpc\n \tlibgcj_interpreter=yes\n+\tenable_hash_synchronization_default=yes\n+\tslow_pthread_self=yes\n \t;;\n-  powerpc-apple-*)\n+  powerpc*-darwin*)\n+\tsysdeps_dir=powerpc\n         libgcj_interpreter=no\n \t;;\n   sparc-*)\n         ;;\n   ia64-*)\n+\tsysdeps_dir=ia64\n         libgcj_flags=\"${libgcj_flags} -funwind-tables\"\n \tlibgcj_interpreter=yes\n \tenable_hash_synchronization_default=yes"}, {"sha": "b8cfddc6e2598afa9755ed3d0636f0b524517fb0", "filename": "libjava/configure.in", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.in?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -76,6 +76,12 @@ if test -z \"$enable_hash_synchronization\"; then\n    enable_hash_synchronization=$enable_hash_synchronization_default\n fi\n \n+dnl configure.host sets slow_pthread_self if the synchronization code should \n+dnl try to avoid pthread_self calls by caching thread IDs in a hashtable.\n+if test \"${slow_pthread_self}\" = \"yes\"; then\n+  AC_DEFINE(SLOW_PTHREAD_SELF)\n+fi\n+\n \n dnl See if the user has requested runtime debugging.\n LIBGCJDEBUG=\"false\"\n@@ -415,6 +421,8 @@ AC_SUBST(THREADDEPS)\n AC_SUBST(THREADOBJS)\n AC_SUBST(THREADSPEC)\n \n+AC_LINK_FILES(sysdep/$sysdeps_dir, sysdep)\n+\n HASH_SYNC_SPEC=\n # Hash synchronization is only useful with posix threads right now.\n if test \"$enable_hash_synchronization\" = yes && test \"$THREADS\" = \"posix\"; then"}, {"sha": "79961c23d83a399f391d4b097996bf863c8c185c", "filename": "libjava/include/posix-threads.h", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2Finclude%2Fposix-threads.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2Finclude%2Fposix-threads.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fposix-threads.h?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -221,14 +221,6 @@ _Jv_ThreadCurrent (void)\n // to threads.\n \n \n-#ifdef __i386__\n-\n-#define SLOW_PTHREAD_SELF\n-\t// Add a cache for pthread_self() if we don't have the thread\n-\t// pointer in a register.\n-\n-#endif  /* __i386__ */\n-\n #ifdef __ia64__\n \n typedef size_t _Jv_ThreadId_t;\n@@ -270,6 +262,8 @@ _Jv_ThreadSelf (void)\n \n #if defined(SLOW_PTHREAD_SELF)\n \n+#include \"sysdep/locks.h\"\n+\n typedef pthread_t _Jv_ThreadId_t;\n \n // E.g. on X86 Linux, pthread_self() is too slow for our purpose.\n@@ -321,7 +315,7 @@ _Jv_ThreadSelf (void)\n   unsigned h = SC_INDEX(sp);\n   volatile self_cache_entry *sce = _Jv_self_cache + h;\n   pthread_t candidate_self = sce -> self;  // Read must precede following one.\n-  // Read barrier goes here, if needed.\n+  read_barrier();\n   if (sce -> high_sp_bits == sp >> LOG_THREAD_SPACING)\n     {\n       // The sce -> self value we read must be valid.  An intervening"}, {"sha": "4cf26bf751ccb5e035071ffa0462730043383df7", "filename": "libjava/java/lang/natObject.cc", "status": "modified", "additions": 1, "deletions": 123, "changes": 124, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fjava%2Flang%2FnatObject.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fjava%2Flang%2FnatObject.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatObject.cc?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -307,128 +307,7 @@ _Jv_MonitorExit (jobject obj)\n #include <unistd.h>\t// for usleep, sysconf.\n #include <sched.h>\t// for sched_yield.\n #include <gcj/javaprims.h>\n-\n-typedef size_t obj_addr_t;\t/* Integer type big enough for object\t*/\n-\t\t\t\t/* address.\t\t\t\t*/\n-\n-// The following should move to some standard place. Linux-threads\n-// already defines roughly these, as do more recent versions of boehm-gc.\n-// The problem is that neither exports them.\n-\n-#if defined(__GNUC__) && defined(__i386__)\n-  // Atomically replace *addr by new_val if it was initially equal to old.\n-  // Return true if the comparison succeeded.\n-  // Assumed to have acquire semantics, i.e. later memory operations\n-  // cannot execute before the compare_and_swap finishes.\n-  inline static bool\n-  compare_and_swap(volatile obj_addr_t *addr,\n-\t\t  \t\t\t\tobj_addr_t old,\n-\t\t\t\t\t\tobj_addr_t new_val) \n-  {\n-    char result;\n-    __asm__ __volatile__(\"lock; cmpxchgl %2, %0; setz %1\"\n-\t    \t: \"+m\"(*(addr)), \"=q\"(result)\n-\t\t: \"r\" (new_val), \"a\"(old)\n-\t\t: \"memory\");\n-    return (bool) result;\n-  }\n-\n-  // Set *addr to new_val with release semantics, i.e. making sure\n-  // that prior loads and stores complete before this\n-  // assignment.\n-  // On X86, the hardware shouldn't reorder reads and writes,\n-  // so we just have to convince gcc not to do it either.\n-  inline static void\n-  release_set(volatile obj_addr_t *addr, obj_addr_t new_val)\n-  {\n-    __asm__ __volatile__(\" \" : : : \"memory\");\n-    *(addr) = new_val;\n-  }\n-\n-  // Compare_and_swap with release semantics instead of acquire semantics.\n-  // On many architecture, the operation makes both guarantees, so the\n-  // implementation can be the same.\n-  inline static bool\n-  compare_and_swap_release(volatile obj_addr_t *addr,\n-\t\t  \t\t\t\t       obj_addr_t old,\n-\t\t\t\t\t\t       obj_addr_t new_val)\n-  {\n-    return compare_and_swap(addr, old, new_val);\n-  }\n-#endif\n-\n-#if defined(__GNUC__) && defined(__ia64__) && SIZEOF_VOID_P == 8\n-  inline static bool\n-  compare_and_swap(volatile obj_addr_t *addr,\n-\t \t\t\t\t        obj_addr_t old,\n-\t\t\t\t\t\tobj_addr_t new_val) \n-  {\n-    unsigned long oldval;\n-    __asm__ __volatile__(\"mov ar.ccv=%4 ;; cmpxchg8.acq %0=%1,%2,ar.ccv\"\n-\t\t: \"=r\"(oldval), \"=m\"(*addr)\n-\t\t: \"r\"(new_val), \"1\"(*addr), \"r\"(old) : \"memory\");\n-    return (oldval == old);\n-  }\n-\n-  // The fact that *addr is volatile should cause the compiler to\n-  // automatically generate an st8.rel.\n-  inline static void\n-  release_set(volatile obj_addr_t *addr, obj_addr_t new_val)\n-  {\n-    __asm__ __volatile__(\" \" : : : \"memory\");\n-    *(addr) = new_val;\n-  }\n-\n-  inline static bool\n-  compare_and_swap_release(volatile obj_addr_t *addr,\n-\t \t\t\t\t               obj_addr_t old,\n-\t\t\t\t\t\t       obj_addr_t new_val) \n-  {\n-    unsigned long oldval;\n-    __asm__ __volatile__(\"mov ar.ccv=%4 ;; cmpxchg8.rel %0=%1,%2,ar.ccv\"\n-\t\t: \"=r\"(oldval), \"=m\"(*addr)\n-\t\t: \"r\"(new_val), \"1\"(*addr), \"r\"(old) : \"memory\");\n-    return (oldval == old);\n-  }\n-#endif\n-\n-#if defined(__GNUC__) && defined(__alpha__)\n-  inline static bool\n-  compare_and_swap(volatile obj_addr_t *addr,\n-\t\t  \t\t\t\tobj_addr_t old,\n-\t\t\t\t\t\tobj_addr_t new_val) \n-  {\n-    unsigned long oldval;\n-    char result;\n-    __asm__ __volatile__(\n-\t\"1:ldq_l %0, %1\\n\\t\" \\\n-\t\"cmpeq %0, %5, %2\\n\\t\" \\\n-\t\"beq %2, 2f\\n\\t\" \\\n-\t\"mov %3, %0\\n\\t\" \\\n-\t\"stq_c %0, %1\\n\\t\" \\\n-\t\"bne %0, 2f\\n\\t\" \\\n-\t\"br 1b\\n\\t\" \\\n-\t\"2:mb\"\n-\t    \t: \"=&r\"(oldval), \"=m\"(*addr), \"=&r\"(result)\n-\t\t: \"r\" (new_val), \"m\"(*addr), \"r\"(old) : \"memory\");\n-    return (bool) result;\n-  }\n-\n-  inline static void\n-  release_set(volatile obj_addr_t *addr, obj_addr_t new_val)\n-  {\n-    __asm__ __volatile__(\"mb\" : : : \"memory\");\n-    *(addr) = new_val;\n-  }\n-\n-  inline static bool\n-  compare_and_swap_release(volatile obj_addr_t *addr,\n-\t\t  \t\t\t\t       obj_addr_t old,\n-\t\t\t\t\t\t       obj_addr_t new_val)\n-  {\n-    return compare_and_swap(addr, old, new_val);\n-  }\n-#endif\n+#include <sysdep/locks.h>\n \n // Try to determine whether we are on a multiprocessor, i.e. whether\n // spinning may be profitable.\n@@ -453,7 +332,6 @@ keep_live(obj_addr_t p)\n     __asm__ __volatile__(\"\" : : \"rm\"(p) : \"memory\");\n }\n \n-\n // Each hash table entry holds a single preallocated \"lightweight\" lock.\n // In addition, it holds a chain of \"heavyweight\" locks.  Lightweight\n // locks do not support Object.wait(), and are converted to heavyweight"}, {"sha": "6442eaffb2ff9a4ee518fdbb9a36d628ee7fa01d", "filename": "libjava/posix-threads.cc", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fposix-threads.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fposix-threads.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fposix-threads.cc?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -438,19 +438,17 @@ _Jv_ThreadWait (void)\n \n #if defined(SLOW_PTHREAD_SELF)\n \n-// Support for pthread_self() lookup cache.\n+#include \"sysdep/locks.h\"\n \n+// Support for pthread_self() lookup cache.\n volatile self_cache_entry _Jv_self_cache[SELF_CACHE_SIZE];\n \n-\n _Jv_ThreadId_t\n _Jv_ThreadSelf_out_of_line(volatile self_cache_entry *sce, size_t high_sp_bits)\n {\n   pthread_t self = pthread_self();\n-  // The ordering between the following writes matters.\n-  // On Alpha, we probably need a memory barrier in the middle.\n   sce -> high_sp_bits = high_sp_bits;\n-  sce -> self = self;\n+  release_set ((obj_addr_t *) &(sce -> self), self);\n   return self;\n }\n "}, {"sha": "054290b16ad798e36e994641b748dfc603f52436", "filename": "libjava/prims.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fprims.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4559716751fbd3424466237af54537ed96a428c3/libjava%2Fprims.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fprims.cc?ref=4559716751fbd3424466237af54537ed96a428c3", "patch": "@@ -586,9 +586,10 @@ _Jv_NewMultiArray (jclass array_type, jint dimensions, ...)\n \n \f\n \n+// Ensure 8-byte alignment, for hash synchronization.\n #define DECLARE_PRIM_TYPE(NAME)\t\t\t\\\n   _Jv_ArrayVTable _Jv_##NAME##VTable;\t\t\\\n-  java::lang::Class _Jv_##NAME##Class;\n+  java::lang::Class _Jv_##NAME##Class __attribute__ ((aligned (8)));\n \n DECLARE_PRIM_TYPE(byte);\n DECLARE_PRIM_TYPE(short);"}]}