{"sha": "343f59d980bf21e62d4e2de75396e7921cd3bd20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzQzZjU5ZDk4MGJmMjFlNjJkNGUyZGU3NTM5NmU3OTIxY2QzYmQyMA==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2002-05-22T22:09:18Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2002-05-22T22:09:18Z"}, "message": "configure.in (CROSS): Define NATIVE_CROSS.\n\n\t* configure.in (CROSS): Define NATIVE_CROSS.\n\t* configure: Regenerate.\n\t* gcc.c (STARTFILE_PREFIX_SPEC): Define.\n\t(startfile_prefix_spec): New var.\n\t(static_specs): Add startfile_prefix_spec.\n\t(do_spec_2): Split out from..\n\t(do_spec): ..here.\n\t(main): Process startfile_prefix_spec.\n\t* config/rs6000/linux64.h (LINK_OS_LINUX_SPEC) Change name of\n\tdynamic linker.\n\t(STARTFILE_PREFIX_SPEC): Define.\n\t(STARTFILE_LINUX_SPEC, ENDFILE_LINUX_SPEC): Rewrite without\n        absolute paths.\n\nFrom-SVN: r53752", "tree": {"sha": "978c9bd8ccd32077416f6f4afc873fea0932be89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/978c9bd8ccd32077416f6f4afc873fea0932be89"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/343f59d980bf21e62d4e2de75396e7921cd3bd20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/343f59d980bf21e62d4e2de75396e7921cd3bd20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/343f59d980bf21e62d4e2de75396e7921cd3bd20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/343f59d980bf21e62d4e2de75396e7921cd3bd20/comments", "author": null, "committer": null, "parents": [{"sha": "df3834838116b327a61f5a9e271e54c75ad34085", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df3834838116b327a61f5a9e271e54c75ad34085", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df3834838116b327a61f5a9e271e54c75ad34085"}], "stats": {"total": 145, "additions": 96, "deletions": 49}, "files": [{"sha": "88f72e42cd113450382b3de485ff5218455a97b8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=343f59d980bf21e62d4e2de75396e7921cd3bd20", "patch": "@@ -1,3 +1,19 @@\n+2002-05-23  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* configure.in (CROSS): Define NATIVE_CROSS.\n+\t* configure: Regenerate.\n+\t* gcc.c (STARTFILE_PREFIX_SPEC): Define.\n+\t(startfile_prefix_spec): New var.\n+\t(static_specs): Add startfile_prefix_spec.\n+\t(do_spec_2): Split out from..\n+\t(do_spec): ..here.\n+\t(main): Process startfile_prefix_spec.\n+\t* config/rs6000/linux64.h (LINK_OS_LINUX_SPEC) Change name of\n+\tdynamic linker.\n+\t(STARTFILE_PREFIX_SPEC): Define.\n+\t(STARTFILE_LINUX_SPEC, ENDFILE_LINUX_SPEC): Rewrite without\n+        absolute paths.\n+\n 2002-05-22  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* cpperror.c: Fix formatting."}, {"sha": "81df3e46d4cc985da3663a8b3bf072a0c76aa3c6", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 9, "deletions": 14, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=343f59d980bf21e62d4e2de75396e7921cd3bd20", "patch": "@@ -100,6 +100,7 @@ Boston, MA 02111-1307, USA.  */\n /* Don't assume anything about the header files.  */\n #define NO_IMPLICIT_EXTERN_C\n \n+/* Override svr4.h  */\n #undef MD_EXEC_PREFIX\n #undef MD_STARTFILE_PREFIX\n \n@@ -138,29 +139,23 @@ Boston, MA 02111-1307, USA.  */\n #define LINK_OS_DEFAULT_SPEC \"%(link_os_linux)\"\n \n #undef  LINK_OS_LINUX_SPEC\n-#ifndef CROSS_COMPILE\n #define LINK_OS_LINUX_SPEC \"-m elf64ppc %{!shared: %{!static: \\\n   %{rdynamic:-export-dynamic} \\\n-  %{!dynamic-linker:-dynamic-linker /lib64/ld.so.1}}}\"\n-#else\n-#define LINK_OS_LINUX_SPEC \"-m elf64ppc %{!shared: %{!static: \\\n-  %{rdynamic:-export-dynamic} \\\n-  %{!dynamic-linker:-dynamic-linker ld.so.1}}}\"\n+  %{!dynamic-linker:-dynamic-linker /lib64/ld64.so.1}}}\"\n+\n+#ifdef NATIVE_CROSS\n+#define STARTFILE_PREFIX_SPEC \"/usr/local/lib64/ /lib64/ /usr/lib64/\"\n #endif\n \n-#ifndef CROSS_COMPILE\n #undef  STARTFILE_LINUX_SPEC\n #define STARTFILE_LINUX_SPEC \"\\\n-%{!shared: %{pg:/usr/lib64/gcrt1.o%s} %{!pg:%{p:/usr/lib64/gcrt1.o%s} \\\n-  %{!p:/usr/lib64/crt1.o%s}}} /usr/lib64/crti.o%s \\\n-%{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n-#endif\n+%{!shared: %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} %{!p:crt1.o%s}}} crti.o%s \\\n+%{static:crtbeginT.o%s} \\\n+%{!static:%{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}}\"\n \n-#ifndef CROSS_COMPILE\n #undef  ENDFILE_LINUX_SPEC\n #define ENDFILE_LINUX_SPEC \"\\\n-%{!shared:crtend.o%s} %{shared:crtendS.o%s} /usr/lib64/crtn.o%s\"\n-#endif\n+%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n \n #undef  TOC_SECTION_ASM_OP\n #define TOC_SECTION_ASM_OP \"\\t.section\\t\\\".toc\\\",\\\"aw\\\"\""}, {"sha": "ea8701c0edb7c0a93a97712963b645026594afaf", "filename": "gcc/configure", "status": "modified", "additions": 29, "deletions": 24, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=343f59d980bf21e62d4e2de75396e7921cd3bd20", "patch": "@@ -6766,6 +6766,11 @@ then\n \tCROSS=\"-DCROSS_COMPILE\"\n \tALL=all.cross\n \tSYSTEM_HEADER_DIR='$(CROSS_SYSTEM_HEADER_DIR)'\n+\tcase \"$host\",\"$target\" in\n+\t    i?86-*-*,x86_64-*-* \\\n+\t    | powerpc*-*-*,powerpc64*-*-*)\n+\t\tCROSS=\"$CROSS -DNATIVE_CROSS\" ;;\n+\tesac\n fi\n \n # If this is a cross-compiler that does not\n@@ -6854,7 +6859,7 @@ fi\n \n # Figure out what assembler we will be using.\n echo $ac_n \"checking what assembler to use\"\"... $ac_c\" 1>&6\n-echo \"configure:6858: checking what assembler to use\" >&5\n+echo \"configure:6863: checking what assembler to use\" >&5\n gcc_cv_as=\n gcc_cv_gas_major_version=\n gcc_cv_gas_minor_version=\n@@ -6948,7 +6953,7 @@ fi\n \n # Figure out what linker we will be using.\n echo $ac_n \"checking what linker to use\"\"... $ac_c\" 1>&6\n-echo \"configure:6952: checking what linker to use\" >&5\n+echo \"configure:6957: checking what linker to use\" >&5\n gcc_cv_ld=\n gcc_cv_gld_major_version=\n gcc_cv_gld_minor_version=\n@@ -7041,7 +7046,7 @@ fi\n \n # Figure out what nm we will be using.\n echo $ac_n \"checking what nm to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7045: checking what nm to use\" >&5\n+echo \"configure:7050: checking what nm to use\" >&5\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n elif test \"x$program_prefix\" != xNONE; then\n@@ -7053,7 +7058,7 @@ echo \"$ac_t\"\"$gcc_cv_nm\" 1>&6\n \n # Figure out what objdump we will be using.\n echo $ac_n \"checking what objdump to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7057: checking what objdump to use\" >&5\n+echo \"configure:7062: checking what objdump to use\" >&5\n if test -x objdump$host_exeext; then\n \tgcc_cv_objdump=./objdump$host_exeext\n elif test \"x$program_prefix\" != xNONE; then\n@@ -7065,7 +7070,7 @@ echo \"$ac_t\"\"$gcc_cv_objdump\" 1>&6\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:7069: checking assembler alignment features\" >&5\n+echo \"configure:7074: checking assembler alignment features\" >&5\n gcc_cv_as_alignment_features=none\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n \t# Gas version 2.6 and later support for .balign and .p2align.\n@@ -7113,7 +7118,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:7117: checking assembler subsection support\" >&5\n+echo \"configure:7122: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7153,7 +7158,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:7157: checking assembler weak support\" >&5\n+echo \"configure:7162: checking assembler weak support\" >&5\n gcc_cv_as_weak=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 2 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -7176,7 +7181,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:7180: checking assembler hidden support\" >&5\n+echo \"configure:7185: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2\t\\\n@@ -7219,7 +7224,7 @@ libgcc_visibility=$gcc_cv_as_hidden\n \n \n echo $ac_n \"checking assembler leb128 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7223: checking assembler leb128 support\" >&5\n+echo \"configure:7228: checking assembler leb128 support\" >&5\n gcc_cv_as_leb128=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 11 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7264,7 +7269,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_leb128\" 1>&6\n \n echo $ac_n \"checking assembler eh_frame optimization\"\"... $ac_c\" 1>&6\n-echo \"configure:7268: checking assembler eh_frame optimization\" >&5\n+echo \"configure:7273: checking assembler eh_frame optimization\" >&5\n gcc_cv_as_eh_frame=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7345,7 +7350,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_eh_frame\" 1>&6\n \n echo $ac_n \"checking assembler section merging support\"\"... $ac_c\" 1>&6\n-echo \"configure:7349: checking assembler section merging support\" >&5\n+echo \"configure:7354: checking assembler section merging support\" >&5\n gcc_cv_as_shf_merge=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7371,7 +7376,7 @@ case \"$target\" in\n   # All TARGET_ABI_OSF targets.\n   alpha*-*-osf* | alpha*-*-linux* | alpha*-*-*bsd*)\n     echo $ac_n \"checking assembler supports explicit relocations\"\"... $ac_c\" 1>&6\n-echo \"configure:7375: checking assembler supports explicit relocations\" >&5\n+echo \"configure:7380: checking assembler supports explicit relocations\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_explicit_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7421,7 +7426,7 @@ EOF\n     ;;\n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:7425: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:7430: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7449,7 +7454,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler supports -relax\"\"... $ac_c\" 1>&6\n-echo \"configure:7453: checking assembler supports -relax\" >&5\n+echo \"configure:7458: checking assembler supports -relax\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_relax_opt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7477,7 +7482,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs\"\"... $ac_c\" 1>&6\n-echo \"configure:7481: checking assembler and linker support unaligned pc related relocs\" >&5\n+echo \"configure:7486: checking assembler and linker support unaligned pc related relocs\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7504,7 +7509,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs against hidden symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:7508: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n+echo \"configure:7513: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel_hidden'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7545,7 +7550,7 @@ EOF\n \n     if test \"x$gcc_cv_as_flags64\" != xno; then\n \techo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:7549: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:7554: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7585,7 +7590,7 @@ EOF\n \n   i[34567]86-*-* | x86_64-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:7589: checking assembler instructions\" >&5\n+echo \"configure:7594: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n       if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -7612,7 +7617,7 @@ EOF\n     echo \"$ac_t\"\"$gcc_cv_as_instructions\" 1>&6\n \n     echo $ac_n \"checking assembler GOTOFF in data directives\"\"... $ac_c\" 1>&6\n-echo \"configure:7616: checking assembler GOTOFF in data directives\" >&5\n+echo \"configure:7621: checking assembler GOTOFF in data directives\" >&5\n     gcc_cv_as_gotoff_in_data=no\n     if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x\n     then\n@@ -7642,7 +7647,7 @@ EOF\n esac\n \n echo $ac_n \"checking assembler dwarf2 debug_line support\"\"... $ac_c\" 1>&6\n-echo \"configure:7646: checking assembler dwarf2 debug_line support\" >&5\n+echo \"configure:7651: checking assembler dwarf2 debug_line support\" >&5\n gcc_cv_as_dwarf2_debug_line=no\n # ??? Not all targets support dwarf2 debug_line, even within a version\n # of gas.  Moreover, we need to emit a valid instruction to trigger any\n@@ -7698,7 +7703,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_dwarf2_debug_line\" 1>&6\n \n echo $ac_n \"checking assembler --gdwarf2 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7702: checking assembler --gdwarf2 support\" >&5\n+echo \"configure:7707: checking assembler --gdwarf2 support\" >&5\n gcc_cv_as_gdwarf2_flag=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x;\n then\n@@ -7727,7 +7732,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gdwarf2_flag\" 1>&6\n \n echo $ac_n \"checking assembler --gstabs support\"\"... $ac_c\" 1>&6\n-echo \"configure:7731: checking assembler --gstabs support\" >&5\n+echo \"configure:7736: checking assembler --gstabs support\" >&5\n gcc_cv_as_gstabs_flag=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x;\n then\n@@ -7755,7 +7760,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gstabs_flag\" 1>&6\n \n echo $ac_n \"checking linker PT_GNU_EH_FRAME support\"\"... $ac_c\" 1>&6\n-echo \"configure:7759: checking linker PT_GNU_EH_FRAME support\" >&5\n+echo \"configure:7764: checking linker PT_GNU_EH_FRAME support\" >&5\n gcc_cv_ld_eh_frame_hdr=no\n if test x$gcc_cv_gld_major_version != x -a x$gcc_cv_gld_minor_version != x; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 12 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n@@ -7918,7 +7923,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:7922: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:7927: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\""}, {"sha": "a67f0228480e8e2307a7f6ad3b48b383b215a52e", "filename": "gcc/configure.in", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=343f59d980bf21e62d4e2de75396e7921cd3bd20", "patch": "@@ -1115,6 +1115,11 @@ then\n \tCROSS=\"-DCROSS_COMPILE\"\n \tALL=all.cross\n \tSYSTEM_HEADER_DIR='$(CROSS_SYSTEM_HEADER_DIR)'\n+\tcase \"$host\",\"$target\" in\n+\t    i?86-*-*,x86_64-*-* \\\n+\t    | powerpc*-*-*,powerpc64*-*-*)\n+\t\tCROSS=\"$CROSS -DNATIVE_CROSS\" ;;\n+\tesac\n fi\n \n # If this is a cross-compiler that does not"}, {"sha": "f5e70ca6b02b1e78e2c81da781cf7e05962e31b5", "filename": "gcc/gcc.c", "status": "modified", "additions": 37, "deletions": 11, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343f59d980bf21e62d4e2de75396e7921cd3bd20/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=343f59d980bf21e62d4e2de75396e7921cd3bd20", "patch": "@@ -299,6 +299,7 @@ static const char *handle_braces PARAMS ((const char *));\n static char *save_string\tPARAMS ((const char *, int));\n static void set_collect_gcc_options PARAMS ((void));\n static int do_spec_1\t\tPARAMS ((const char *, int, const char *));\n+static int do_spec_2\t\tPARAMS ((const char *));\n static const char *find_file\tPARAMS ((const char *));\n static int is_directory\t\tPARAMS ((const char *, const char *, int));\n static void validate_switches\tPARAMS ((const char *));\n@@ -641,6 +642,10 @@ proper position among the other output files.  */\n # endif\n #endif\n \n+#ifndef STARTFILE_PREFIX_SPEC\n+# define STARTFILE_PREFIX_SPEC \"\"\n+#endif\n+\n static const char *asm_debug = ASM_DEBUG_SPEC;\n static const char *cpp_spec = CPP_SPEC;\n static const char *cpp_predefines = CPP_PREDEFINES;\n@@ -658,6 +663,7 @@ static const char *switches_need_spaces = SWITCHES_NEED_SPACES;\n static const char *linker_name_spec = LINKER_NAME;\n static const char *link_command_spec = LINK_COMMAND_SPEC;\n static const char *link_libgcc_spec = LINK_LIBGCC_SPEC;\n+static const char *startfile_prefix_spec = STARTFILE_PREFIX_SPEC;\n \n /* Standard options to cpp, cc1, and as, to reduce duplication in specs.\n    There should be no need to override these in target dependent files,\n@@ -1388,6 +1394,7 @@ static struct spec_list static_specs[] =\n   INIT_STATIC_SPEC (\"md_exec_prefix\",\t\t&md_exec_prefix),\n   INIT_STATIC_SPEC (\"md_startfile_prefix\",\t&md_startfile_prefix),\n   INIT_STATIC_SPEC (\"md_startfile_prefix_1\",\t&md_startfile_prefix_1),\n+  INIT_STATIC_SPEC (\"startfile_prefix_spec\",\t&startfile_prefix_spec),\n };\n \n #ifdef EXTRA_SPECS\t\t/* additional specs needed */\n@@ -4133,15 +4140,7 @@ do_spec (spec)\n {\n   int value;\n \n-  clear_args ();\n-  arg_going = 0;\n-  delete_this_arg = 0;\n-  this_is_output_file = 0;\n-  this_is_library_file = 0;\n-  input_from_pipe = 0;\n-  suffix_subst = NULL;\n-\n-  value = do_spec_1 (spec, 0, NULL);\n+  value = do_spec_2 (spec);\n \n   /* Force out any unfinished command.\n      If -pipe, this forces out the last command if it ended in `|'.  */\n@@ -4159,6 +4158,21 @@ do_spec (spec)\n   return value;\n }\n \n+static int\n+do_spec_2 (spec)\n+     const char *spec;\n+{\n+  clear_args ();\n+  arg_going = 0;\n+  delete_this_arg = 0;\n+  this_is_output_file = 0;\n+  this_is_library_file = 0;\n+  input_from_pipe = 0;\n+  suffix_subst = NULL;\n+\n+  return do_spec_1 (spec, 0, NULL);\n+}\n+\n /* Process the sub-spec SPEC as a portion of a larger spec.\n    This is like processing a whole spec except that we do\n    not initialize at the beginning and we do not supply a\n@@ -5838,8 +5852,10 @@ main (argc, argv)\n   if (access (specs_file, R_OK) == 0)\n     read_specs (specs_file, TRUE);\n \n-  /* If not cross-compiling, look for startfiles in the standard places.  */\n-  if (*cross_compile == '0')\n+  /* If not cross-compiling, look for startfiles in the standard places.\n+     Similarly, don't add the standard prefixes if startfile handling\n+     will be under control of startfile_prefix_spec.  */\n+  if (*cross_compile == '0' || *startfile_prefix_spec == 0)\n     {\n       if (*md_exec_prefix)\n \t{\n@@ -5897,6 +5913,16 @@ main (argc, argv)\n \t\t    \"BINUTILS\", PREFIX_PRIORITY_LAST, 0, NULL);\n     }\n \n+  if (*startfile_prefix_spec != 0\n+      && do_spec_2 (startfile_prefix_spec) == 0\n+      && do_spec_1 (\" \", 0, NULL) == 0)\n+    {\n+      int ndx;\n+      for (ndx = 0; ndx < argbuf_index; ndx++)\n+\tadd_prefix (&startfile_prefixes, argbuf[ndx], \"BINUTILS\",\n+\t\t    PREFIX_PRIORITY_LAST, 0, NULL);\n+    }\n+\n   /* Process any user specified specs in the order given on the command\n      line.  */\n   for (uptr = user_specs_head; uptr; uptr = uptr->next)"}]}