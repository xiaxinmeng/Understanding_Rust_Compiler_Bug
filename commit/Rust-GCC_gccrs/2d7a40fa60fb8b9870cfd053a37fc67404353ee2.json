{"sha": "2d7a40fa60fb8b9870cfd053a37fc67404353ee2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQ3YTQwZmE2MGZiOGI5ODcwY2ZkMDUzYTM3ZmM2NzQwNDM1M2VlMg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-17T17:53:01Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-17T17:56:59Z"}, "message": "c++: Fix clang problem [PR 98340]\n\nClang didn't like sizeot (uintset::value) in a templated context.  Not sure\nwhere the problem lies -- ambiguous std, gcc erroneous accept or clang erroneous\nreject.  Anyway, this avoids that construct.\n\n\tPR c++/98340\n\tgcc/cp/\n\t* module.cc (uintset<T>::hash::add): Use uintset (0u).MEMBER,\n\trather than uintset::MEMBER.", "tree": {"sha": "69d98660d32bbe90138116b441c1b8d90da806c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69d98660d32bbe90138116b441c1b8d90da806c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d7a40fa60fb8b9870cfd053a37fc67404353ee2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d7a40fa60fb8b9870cfd053a37fc67404353ee2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d7a40fa60fb8b9870cfd053a37fc67404353ee2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d7a40fa60fb8b9870cfd053a37fc67404353ee2/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d1ad55c4e08b827b4d38f763e0427096305d460d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ad55c4e08b827b4d38f763e0427096305d460d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1ad55c4e08b827b4d38f763e0427096305d460d"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "b2b81900fc3b592a7e3204796f12152e2a1869e1", "filename": "gcc/cp/module.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d7a40fa60fb8b9870cfd053a37fc67404353ee2/gcc%2Fcp%2Fmodule.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d7a40fa60fb8b9870cfd053a37fc67404353ee2/gcc%2Fcp%2Fmodule.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmodule.cc?ref=2d7a40fa60fb8b9870cfd053a37fc67404353ee2", "patch": "@@ -2718,7 +2718,7 @@ uintset<T>::hash::add (typename uintset<T>::hash::key_t key, T value)\n \t{\n \t  unsigned n = set->num * 2;\n \t  size_t new_size = (offsetof (uintset, values)\n-\t\t\t     + sizeof (uintset::values) * n);\n+\t\t\t     + sizeof (uintset (0u).values) * n);\n \t  uintset *new_set = new (::operator new (new_size)) uintset (set);\n \t  delete set;\n \t  set = new_set;\n@@ -2743,7 +2743,7 @@ uintset<T>::hash::create (typename uintset<T>::hash::key_t key, unsigned num,\n     p2alloc++;\n \n   size_t new_size = (offsetof (uintset, values)\n-\t\t     + (sizeof (uintset::values) << p2alloc));\n+\t\t     + (sizeof (uintset (0u).values) << p2alloc));\n   uintset *set = new (::operator new (new_size)) uintset (key);\n   set->allocp2 = p2alloc;\n   set->num = num;"}]}