{"sha": "652ad062339cd338403543e46cf91eb5abbe7d36", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjUyYWQwNjIzMzljZDMzODQwMzU0M2U0NmNmOTFlYjVhYmJlN2QzNg==", "commit": {"author": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2005-05-15T02:02:58Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2005-05-15T02:02:58Z"}, "message": "sh.c (sh_output_mi_thunk): Check cfun->cfg instead of basic_block_info.\n\n\t* config/sh/sh.c (sh_output_mi_thunk): Check cfun->cfg instead\n\tof basic_block_info.  Call init_flow and find_basic_blocks\n\tbefore dbr_schedule if needed.\n\nFrom-SVN: r99710", "tree": {"sha": "9127dbd47cb82c7f956b65ea470b469760d86317", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9127dbd47cb82c7f956b65ea470b469760d86317"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/652ad062339cd338403543e46cf91eb5abbe7d36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/652ad062339cd338403543e46cf91eb5abbe7d36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/652ad062339cd338403543e46cf91eb5abbe7d36", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/652ad062339cd338403543e46cf91eb5abbe7d36/comments", "author": null, "committer": null, "parents": [{"sha": "84c53dddc926ae6cb673d572148f5a742f4f6507", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84c53dddc926ae6cb673d572148f5a742f4f6507", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84c53dddc926ae6cb673d572148f5a742f4f6507"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "91a8d5c0012321364fec122b67be90b37c009ba6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/652ad062339cd338403543e46cf91eb5abbe7d36/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/652ad062339cd338403543e46cf91eb5abbe7d36/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=652ad062339cd338403543e46cf91eb5abbe7d36", "patch": "@@ -1,3 +1,9 @@\n+2005-05-14  Kaz Kojima  <kkojima@gcc.gnu.org>\n+\n+\t* config/sh/sh.c (sh_output_mi_thunk): Check cfun->cfg instead\n+\tof basic_block_info.  Call init_flow and find_basic_blocks\n+\tbefore dbr_schedule if needed.\n+\n 2005-05-14  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-optimize.c (init_tree_optimization_passes): Move"}, {"sha": "41f6e723fed1f99e6f0ebbe978b9db8cde50958a", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/652ad062339cd338403543e46cf91eb5abbe7d36/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/652ad062339cd338403543e46cf91eb5abbe7d36/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=652ad062339cd338403543e46cf91eb5abbe7d36", "patch": "@@ -10301,7 +10301,7 @@ sh_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n       /* Initialize the bitmap obstacks.  */\n       bitmap_obstack_initialize (NULL);\n       bitmap_obstack_initialize (&reg_obstack);\n-      if (! basic_block_info)\n+      if (! cfun->cfg)\n \tinit_flow ();\n       rtl_register_cfg_hooks ();\n       find_basic_blocks (insns);\n@@ -10315,7 +10315,14 @@ sh_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   sh_reorg ();\n \n   if (optimize > 0 && flag_delayed_branch)\n-    dbr_schedule (insns, dump_file);\n+    {\n+      if (! cfun->cfg)\n+\t{\n+\t  init_flow ();\n+\t  find_basic_blocks (insns);\n+\t}\n+      dbr_schedule (insns, dump_file);\n+    }\n   shorten_branches (insns);\n   final_start_function (insns, file, 1);\n   final (insns, file, 1);"}]}