{"sha": "44293580369777e9fac3341133d6459b37c04672", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQyOTM1ODAzNjk3NzdlOWZhYzMzNDExMzNkNjQ1OWIzN2MwNDY3Mg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-02-24T22:04:09Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-02-24T22:04:09Z"}, "message": "re PR debug/69705 (segfault in libgomp.fortran/task1.f90 with -flto -fno-use-linker-plugin -fno-toplevel-reorder -O1 -g)\n\n\tPR debug/69705\n\t* dwarf2out.c (gen_variable_die): Work around buggy LTO\n\t- allow NULL decl for Fortran DW_TAG_common_block variables.\n\nFrom-SVN: r233685", "tree": {"sha": "b3db00a1b0acd2842a23eaba38228934d7ea55fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3db00a1b0acd2842a23eaba38228934d7ea55fa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44293580369777e9fac3341133d6459b37c04672", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44293580369777e9fac3341133d6459b37c04672", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44293580369777e9fac3341133d6459b37c04672", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44293580369777e9fac3341133d6459b37c04672/comments", "author": null, "committer": null, "parents": [{"sha": "03ca8fb3da94f12e5cd2ba57373d3875cd8d8cf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03ca8fb3da94f12e5cd2ba57373d3875cd8d8cf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03ca8fb3da94f12e5cd2ba57373d3875cd8d8cf8"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "3cae3cbb8f373c6f5964f3889d7f4714dbececb0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44293580369777e9fac3341133d6459b37c04672/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44293580369777e9fac3341133d6459b37c04672/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=44293580369777e9fac3341133d6459b37c04672", "patch": "@@ -1,9 +1,15 @@\n+2016-02-24  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/69705\n+\t* dwarf2out.c (gen_variable_die): Work around buggy LTO\n+\t- allow NULL decl for Fortran DW_TAG_common_block variables.\n+\n 2016-02-24  Jason Merrill  <jason@redhat.com>\n \n \t* common.opt (flifetime-dse): Add -flifetime-dse=1.\n \n 2016-02-24  Richard Biener  <rguenther@suse.de>\n-\tJakub Jelinek  <jakub@redhat.com>\n+\t    Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/69760\n \t* tree-scalar-evolution.c (interpret_rhs_expr): Re-write"}, {"sha": "97e192b9d4d2d5cf8e178504ed8c887f59230359", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44293580369777e9fac3341133d6459b37c04672/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44293580369777e9fac3341133d6459b37c04672/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=44293580369777e9fac3341133d6459b37c04672", "patch": "@@ -21055,7 +21055,7 @@ gen_variable_die (tree decl, tree origin, dw_die_ref context_die)\n \t\t DW_TAG_common_block and DW_TAG_variable.  */\n \t      loc = loc_list_from_tree (com_decl, 2, NULL);\n \t    }\n-          else if (DECL_EXTERNAL (decl))\n+\t  else if (DECL_EXTERNAL (decl_or_origin))\n \t    add_AT_flag (com_die, DW_AT_declaration, 1);\n \t  if (want_pubnames ())\n \t    add_pubname_string (cnam, com_die); /* ??? needed? */\n@@ -21070,8 +21070,9 @@ gen_variable_die (tree decl, tree origin, dw_die_ref context_die)\n \t  remove_AT (com_die, DW_AT_declaration);\n \t}\n       var_die = new_die (DW_TAG_variable, com_die, decl);\n-      add_name_and_src_coords_attributes (var_die, decl);\n-      add_type_attribute (var_die, TREE_TYPE (decl), decl_quals (decl), false,\n+      add_name_and_src_coords_attributes (var_die, decl_or_origin);\n+      add_type_attribute (var_die, TREE_TYPE (decl_or_origin),\n+\t\t\t  decl_quals (decl_or_origin), false,\n \t\t\t  context_die);\n       add_AT_flag (var_die, DW_AT_external, 1);\n       if (loc)\n@@ -21093,9 +21094,10 @@ gen_variable_die (tree decl, tree origin, dw_die_ref context_die)\n \t    }\n \t  add_AT_location_description (var_die, DW_AT_location, loc);\n \t}\n-      else if (DECL_EXTERNAL (decl))\n+      else if (DECL_EXTERNAL (decl_or_origin))\n \tadd_AT_flag (var_die, DW_AT_declaration, 1);\n-      equate_decl_number_to_die (decl, var_die);\n+      if (decl)\n+\tequate_decl_number_to_die (decl, var_die);\n       return;\n     }\n "}, {"sha": "305ebf7435ea5358fddb8fe5a709bafdfa4f470f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44293580369777e9fac3341133d6459b37c04672/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44293580369777e9fac3341133d6459b37c04672/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=44293580369777e9fac3341133d6459b37c04672", "patch": "@@ -28,7 +28,7 @@\n \t* g++.dg/pr61033.C: Add a regression testcase for PR debug/61033.\n \n 2016-02-24  Richard Biener  <rguenther@suse.de>\n-\tJakub Jelinek  <jakub@redhat.com>\n+\t    Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/69760\n \t* gcc.dg/torture/pr69760.c: New testcase."}]}