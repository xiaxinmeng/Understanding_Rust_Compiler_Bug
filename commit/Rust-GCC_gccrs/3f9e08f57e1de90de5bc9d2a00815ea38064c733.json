{"sha": "3f9e08f57e1de90de5bc9d2a00815ea38064c733", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2Y5ZTA4ZjU3ZTFkZTkwZGU1YmM5ZDJhMDA4MTVlYTM4MDY0YzczMw==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2019-09-24T10:10:49Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2019-09-24T10:10:49Z"}, "message": "tree-ssa-sccvn.c (vn_reference_lookup_3): Valueize MEM_REF base.\n\n2019-09-24  Richard Biener  <rguenther@suse.de>\n\n\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Valueize MEM_REF\n\tbase.\n\n\t* gcc.dg/torture/20190924-1.c: New testcase.\n\nFrom-SVN: r276092", "tree": {"sha": "90c3e98963cb030009d049f320a2e986b1bb0757", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90c3e98963cb030009d049f320a2e986b1bb0757"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3f9e08f57e1de90de5bc9d2a00815ea38064c733", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f9e08f57e1de90de5bc9d2a00815ea38064c733", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f9e08f57e1de90de5bc9d2a00815ea38064c733", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f9e08f57e1de90de5bc9d2a00815ea38064c733/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "47d17f705826669e7a7c56f1bee54b4231870e41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47d17f705826669e7a7c56f1bee54b4231870e41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47d17f705826669e7a7c56f1bee54b4231870e41"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "bd6f54149991c0965b33d4c99223e0df3dd4d2a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3f9e08f57e1de90de5bc9d2a00815ea38064c733", "patch": "@@ -1,3 +1,8 @@\n+2019-09-24  Richard Biener  <rguenther@suse.de>\n+\n+\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Valueize MEM_REF\n+\tbase.\n+\n 2019-09-23  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/arm/t-arm (arm-builtins.o): Add dependency on"}, {"sha": "600901d13d743faf6dec2220ab586b34c1f5af89", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3f9e08f57e1de90de5bc9d2a00815ea38064c733", "patch": "@@ -1,3 +1,7 @@\n+2019-09-24  Richard Biener  <rguenther@suse.de>\n+\n+\t* gcc.dg/torture/20190924-1.c: New testcase.\n+\n 2019-09-23  Maciej W. Rozycki  <macro@wdc.com>\n \n \t* lib/gnat.exp (gnat_target_compile): Pass the `ada' option to"}, {"sha": "13b46ace1b8a949cd1f25ac1ce33ed9b7f9922e2", "filename": "gcc/testsuite/gcc.dg/torture/20190924-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2F20190924-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2F20190924-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2F20190924-1.c?ref=3f9e08f57e1de90de5bc9d2a00815ea38064c733", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+\n+struct acct_gather_energy {\n+   int base_consumed_energy;\n+   int consumed_energy;\n+   int previous_consumed_energy;\n+};\n+static struct acct_gather_energy xcc_energy;\n+struct acct_gather_energy *new;\n+int _get_joules_task(int first)\n+{\n+  if (!first && new->previous_consumed_energy)\n+    first = 1;\n+  new->base_consumed_energy = new->consumed_energy;\n+  __builtin_memcpy(&xcc_energy, new, sizeof(struct acct_gather_energy));\n+  return xcc_energy.base_consumed_energy;\n+}"}, {"sha": "44b8c67b198c300c7449bac87827db25032c3829", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f9e08f57e1de90de5bc9d2a00815ea38064c733/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=3f9e08f57e1de90de5bc9d2a00815ea38064c733", "patch": "@@ -2935,8 +2935,9 @@ vn_reference_lookup_3 (ao_ref *ref, tree vuse, void *data_,\n \t  else\n \t    return (void *)-1;\n \t}\n-      if (TREE_CODE (rhs) != SSA_NAME\n-\t  && TREE_CODE (rhs) != ADDR_EXPR)\n+      if (TREE_CODE (rhs) == SSA_NAME)\n+\trhs = SSA_VAL (rhs);\n+      else if (TREE_CODE (rhs) != ADDR_EXPR)\n \treturn (void *)-1;\n \n       /* The bases of the destination and the references have to agree.  */"}]}