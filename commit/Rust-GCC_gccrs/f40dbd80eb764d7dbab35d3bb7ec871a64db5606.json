{"sha": "f40dbd80eb764d7dbab35d3bb7ec871a64db5606", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQwZGJkODBlYjc2NGQ3ZGJhYjM1ZDNiYjdlYzg3MWE2NGRiNTYwNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2016-10-12T10:32:53Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2016-10-12T10:32:53Z"}, "message": "re PR ada/64057 (possible issue in the shared implementation of Ada.Strings.Unbounded)\n\n2016-10-12  Eric Botcazou  <ebotcazou@adacore.com>\n\n\tPR ada/64057\n\t* exp_ch5.adb (Is_Non_Local_Array): Return true for every array\n\tthat is not a component or slice of an entity in the current\n\tscope.\n\nFrom-SVN: r241025", "tree": {"sha": "e612c8755d59bda478c85f7dc997a1b5ae4daf1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e612c8755d59bda478c85f7dc997a1b5ae4daf1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f40dbd80eb764d7dbab35d3bb7ec871a64db5606", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f40dbd80eb764d7dbab35d3bb7ec871a64db5606", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f40dbd80eb764d7dbab35d3bb7ec871a64db5606", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f40dbd80eb764d7dbab35d3bb7ec871a64db5606/comments", "author": null, "committer": null, "parents": [{"sha": "b4a9ef2f4d68a5a10f4c87c9f416562bf5f59d35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4a9ef2f4d68a5a10f4c87c9f416562bf5f59d35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4a9ef2f4d68a5a10f4c87c9f416562bf5f59d35"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "595a559804ec5b5d9709511f2042fa5331d8d48b", "filename": "gcc/ada/exp_ch5.adb", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f40dbd80eb764d7dbab35d3bb7ec871a64db5606/gcc%2Fada%2Fexp_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f40dbd80eb764d7dbab35d3bb7ec871a64db5606/gcc%2Fada%2Fexp_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch5.adb?ref=f40dbd80eb764d7dbab35d3bb7ec871a64db5606", "patch": "@@ -278,9 +278,9 @@ package body Exp_Ch5 is\n \n       function Is_Non_Local_Array (Exp : Node_Id) return Boolean;\n       --  Determine if Exp is a reference to an array variable which is other\n-      --  than an object defined in the current scope, or a slice of such\n-      --  an object. Such objects can be aliased to parameters (unlike local\n-      --  array references).\n+      --  than an object defined in the current scope, or a component or a\n+      --  slice of such an object. Such objects can be aliased to parameters\n+      --  (unlike local array references).\n \n       -----------------------\n       -- Apply_Dereference --\n@@ -327,10 +327,14 @@ package body Exp_Ch5 is\n \n       function Is_Non_Local_Array (Exp : Node_Id) return Boolean is\n       begin\n-         return (Is_Entity_Name (Exp)\n-                   and then Scope (Entity (Exp)) /= Current_Scope)\n-            or else (Nkind (Exp) = N_Slice\n-                       and then Is_Non_Local_Array (Prefix (Exp)));\n+         case Nkind (Exp) is\n+            when N_Indexed_Component | N_Selected_Component | N_Slice =>\n+               return Is_Non_Local_Array (Prefix (Exp));\n+            when others =>\n+               return\n+                 not (Is_Entity_Name (Exp) and then\n+                                        Scope (Entity (Exp)) = Current_Scope);\n+         end case;\n       end Is_Non_Local_Array;\n \n       --  Determine if Lhs, Rhs are formal arrays or nonlocal arrays"}]}