{"sha": "fcb901cdfac9321b0202d800621f06b2aafd5bee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmNiOTAxY2RmYWM5MzIxYjAyMDJkODAwNjIxZjA2YjJhYWZkNWJlZQ==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2015-09-24T08:25:13Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2015-09-24T08:25:13Z"}, "message": "[tree-inline][obvious] Delete redundant count_insns_seq\n\n\t* tree-inline.h (count_insns_seq): Delete prototype.\n\t(estimate_num_insns_seq): Define prototype.\n\t* tree-inline.c (count_insns_seq): Delete.\n\t(estimate_num_insns_seq): Remove static qualifier.\n\t* tree-eh.c (decide_copy_try_finally): Replace use of count_insns_seq\n\twith estimate_num_insns_seq.\n\nFrom-SVN: r228075", "tree": {"sha": "cdafb25aaf26090659e358891173245c121cbd7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cdafb25aaf26090659e358891173245c121cbd7b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fcb901cdfac9321b0202d800621f06b2aafd5bee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcb901cdfac9321b0202d800621f06b2aafd5bee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcb901cdfac9321b0202d800621f06b2aafd5bee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcb901cdfac9321b0202d800621f06b2aafd5bee/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1fefbb66c8282a4d9e74dc178a3578e4c302862f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fefbb66c8282a4d9e74dc178a3578e4c302862f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1fefbb66c8282a4d9e74dc178a3578e4c302862f"}], "stats": {"total": 30, "additions": 13, "deletions": 17}, "files": [{"sha": "e3120f30d2082e1fe34afd86fb7e03d1bc59c0b6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fcb901cdfac9321b0202d800621f06b2aafd5bee", "patch": "@@ -1,3 +1,12 @@\n+2015-09-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* tree-inline.h (count_insns_seq): Delete prototype.\n+\t(estimate_num_insns_seq): Define prototype.\n+\t* tree-inline.c (count_insns_seq): Delete.\n+\t(estimate_num_insns_seq): Remove static qualifier.\n+\t* tree-eh.c (decide_copy_try_finally): Replace use of count_insns_seq\n+\twith estimate_num_insns_seq.\n+\n 2015-09-24  Richard Biener  <rguenther@suse.de>\n \n \t* tree-ssa-sccvn.h (vn_reference_op_struct): Add clique and base"}, {"sha": "cb1f08a76c43bcfa9ee0592fbe9c9acda91e676a", "filename": "gcc/tree-eh.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2Ftree-eh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2Ftree-eh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-eh.c?ref=fcb901cdfac9321b0202d800621f06b2aafd5bee", "patch": "@@ -1621,7 +1621,7 @@ decide_copy_try_finally (int ndests, bool may_throw, gimple_seq finally)\n     }\n \n   /* Finally estimate N times, plus N gotos.  */\n-  f_estimate = count_insns_seq (finally, &eni_size_weights);\n+  f_estimate = estimate_num_insns_seq (finally, &eni_size_weights);\n   f_estimate = (f_estimate + 1) * ndests;\n \n   /* Switch statement (cost 10), N variable assignments, N gotos.  */"}, {"sha": "ac9586ecdbf198f42e68e1801c6733de661614f2", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 2, "deletions": 15, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=fcb901cdfac9321b0202d800621f06b2aafd5bee", "patch": "@@ -3972,8 +3972,8 @@ estimate_operator_cost (enum tree_code code, eni_weights *weights,\n    the statements in the statement sequence STMTS.\n    WEIGHTS contains weights attributed to various constructs.  */\n \n-static\n-int estimate_num_insns_seq (gimple_seq stmts, eni_weights *weights)\n+int\n+estimate_num_insns_seq (gimple_seq stmts, eni_weights *weights)\n {\n   int cost;\n   gimple_stmt_iterator gsi;\n@@ -4262,19 +4262,6 @@ init_inline_once (void)\n   eni_time_weights.return_cost = 2;\n }\n \n-/* Estimate the number of instructions in a gimple_seq. */\n-\n-int\n-count_insns_seq (gimple_seq seq, eni_weights *weights)\n-{\n-  gimple_stmt_iterator gsi;\n-  int n = 0;\n-  for (gsi = gsi_start (seq); !gsi_end_p (gsi); gsi_next (&gsi))\n-    n += estimate_num_insns (gsi_stmt (gsi), weights);\n-\n-  return n;\n-}\n-\n \n /* Install new lexical TREE_BLOCK underneath 'current_block'.  */\n "}, {"sha": "b8fb2a2a38ceaa71983b16e4189b31b679f40dbc", "filename": "gcc/tree-inline.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2Ftree-inline.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcb901cdfac9321b0202d800621f06b2aafd5bee/gcc%2Ftree-inline.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.h?ref=fcb901cdfac9321b0202d800621f06b2aafd5bee", "patch": "@@ -207,7 +207,7 @@ tree copy_decl_no_change (tree decl, copy_body_data *id);\n int estimate_move_cost (tree type, bool);\n int estimate_num_insns (gimple *, eni_weights *);\n int estimate_num_insns_fn (tree, eni_weights *);\n-int count_insns_seq (gimple_seq, eni_weights *);\n+int estimate_num_insns_seq (gimple_seq, eni_weights *);\n bool tree_versionable_function_p (tree);\n extern tree remap_decl (tree decl, copy_body_data *id);\n extern tree remap_type (tree type, copy_body_data *id);"}]}