{"sha": "70c4c000ff88462085c30f8e160994a6df4bbb20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzBjNGMwMDBmZjg4NDYyMDg1YzMwZjhlMTYwOTk0YTZkZjRiYmIyMA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-08-23T15:21:34Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-08-23T15:21:34Z"}, "message": "old-dejagnu.exp: Make it possible to XFAIL a test that causes an ICE.\n\n\t* lib/old-dejagnu.exp: Make it possible to XFAIL a test that\n\tcauses an ICE.\n\nFrom-SVN: r21917", "tree": {"sha": "630ee11183811a838c36856e5b2a46545bf90b0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/630ee11183811a838c36856e5b2a46545bf90b0f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/70c4c000ff88462085c30f8e160994a6df4bbb20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70c4c000ff88462085c30f8e160994a6df4bbb20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70c4c000ff88462085c30f8e160994a6df4bbb20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70c4c000ff88462085c30f8e160994a6df4bbb20/comments", "author": null, "committer": null, "parents": [{"sha": "d7ceab7b4b7a2b4f91db42526a6cbdc97393d8e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7ceab7b4b7a2b4f91db42526a6cbdc97393d8e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7ceab7b4b7a2b4f91db42526a6cbdc97393d8e8"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "630f8e47df860ea9fde0c435200c208e81270786", "filename": "gcc/testsuite/g++.old-deja/g++.robertl/eb27.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70c4c000ff88462085c30f8e160994a6df4bbb20/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.robertl%2Feb27.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70c4c000ff88462085c30f8e160994a6df4bbb20/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.robertl%2Feb27.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.robertl%2Feb27.C?ref=70c4c000ff88462085c30f8e160994a6df4bbb20", "patch": "@@ -3,7 +3,7 @@\n */\n /* (w) 4.9.97 by Kurt Garloff <K.Garloff@ping.de> */\n // Special g++ Options:\n-// excess errors test - XFAIL *-*-*\n+// crash test - XFAIL *-*-*\n \n #include <iostream.h>\n "}, {"sha": "ceae14b78cffa9dd5f47f8738f0a74172c890269", "filename": "gcc/testsuite/lib/old-dejagnu.exp", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70c4c000ff88462085c30f8e160994a6df4bbb20/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70c4c000ff88462085c30f8e160994a6df4bbb20/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fold-dejagnu.exp?ref=70c4c000ff88462085c30f8e160994a6df4bbb20", "patch": "@@ -382,6 +382,14 @@ proc old-dejagnu { compiler prog cflagsx default_cflags libs } {\n \tset message [concat $message $tmp]\n     }\n \n+    set expect_crash \\\n+      [process-option $prog \"crash test - \" \"a crash\" CRASH $text]\n+    if {$expect_crash == \"XCRASH\"} then {\n+       set expect_crash 0\n+    } else {\n+       set expect_crash 1\n+    }\n+\n #\n #  run the compiler and analyze the results\n #\n@@ -395,9 +403,12 @@ proc old-dejagnu { compiler prog cflagsx default_cflags libs } {\n     set comp_output [prune_warnings $comp_output]\n \n     if [string match \"*Internal compiler error*\" $comp_output] then {\n+        if $expect_crash then {\n+\t    setup_xfail \"*-*-*\"\n+\t}\n         fail \"$name caused compiler crash\"\n-\tremote_file build delete $output\n-\treturn 1\n+        remote_file build delete $output\n+        return 1\n     }\n \n     #send_user \"\\nold_dejagnu.exp: comp_output1 = :$comp_output:\\n\\n\""}]}