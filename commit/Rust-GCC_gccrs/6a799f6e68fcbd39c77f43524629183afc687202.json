{"sha": "6a799f6e68fcbd39c77f43524629183afc687202", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmE3OTlmNmU2OGZjYmQzOWM3N2Y0MzUyNDYyOTE4M2FmYzY4NzIwMg==", "commit": {"author": {"name": "Christian Bruel", "email": "chrbr@gcc.gnu.org", "date": "2009-07-20T07:37:37Z"}, "committer": {"name": "Christian Bruel", "email": "chrbr@gcc.gnu.org", "date": "2009-07-20T07:37:37Z"}, "message": "SH: resurect -mfmovd\n\nFrom-SVN: r149803", "tree": {"sha": "fa9ce851e7ca90598aab182aea62e68241bb02cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa9ce851e7ca90598aab182aea62e68241bb02cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6a799f6e68fcbd39c77f43524629183afc687202", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a799f6e68fcbd39c77f43524629183afc687202", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a799f6e68fcbd39c77f43524629183afc687202", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a799f6e68fcbd39c77f43524629183afc687202/comments", "author": null, "committer": null, "parents": [{"sha": "94b219ec0ce9da1ba688be4aa81f80ebd3508d3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94b219ec0ce9da1ba688be4aa81f80ebd3508d3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94b219ec0ce9da1ba688be4aa81f80ebd3508d3e"}], "stats": {"total": 45, "additions": 38, "deletions": 7}, "files": [{"sha": "6053b5434a7a4f19199b3b96fdc59ece9f576acb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6a799f6e68fcbd39c77f43524629183afc687202", "patch": "@@ -1,3 +1,9 @@\n+2009-07-20  Christian Bruel  <christian.bruel@st.com>\n+\t\n+\t* config/sh/sh.opt (-mfmovd): Resurrect and document.\n+\t* doc/invoke.texi (-mfmovd): Likewise.\n+\t* config/sh/sh.h (TARGET_FMOVD, MASK_FMOVD): Remove default setting.\n+\t\n 2009-07-20  Jan Hubicka  <jh@suse.cz>\n \n \t* tree-ssa-dce.c (remove_dead_phis): Only look for abnormal PHIs\n@@ -127,6 +133,7 @@\n \t* c-omp.c (c_finish_omp_atomic): Set DECL_CONTEXT on the\n \ttemporary variable.\n \n+>>>>>>> .r149802\n 2009-07-17  Sandra Loosemore  <sandra@codesourcery.com>\n \n \t* doc/service.texi (Service): Restore previously removed link,\n@@ -146,6 +153,7 @@\n \t* gimplify.c (gimplify_conversion): Don't change non-conversions into\n \tVIEW_CONVERT_EXPR.\n \n+>>>>>>> .r149747\n 2009-07-16  Sandra Loosemore  <sandra@codesourcery.com>\n \n \t* doc/extend.texi (Nested Functions): Replace broken link with"}, {"sha": "9b3d99fc788abeb98cfb5af2abe846e8c095baf0", "filename": "gcc/config/sh/sh.h", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Fconfig%2Fsh%2Fsh.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Fconfig%2Fsh%2Fsh.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.h?ref=6a799f6e68fcbd39c77f43524629183afc687202", "patch": "@@ -28,11 +28,6 @@ along with GCC; see the file COPYING3.  If not see\n #define TARGET_VERSION \\\n   fputs (\" (Hitachi SH)\", stderr);\n \n-#ifndef TARGET_FMOVD\n-#define TARGET_FMOVD 0\n-#define MASK_FMOVD   0\n-#endif\n-\n /* Unfortunately, insn-attrtab.c doesn't include insn-codes.h.  We can't\n    include it here, because bconfig.h is also included by gencodes.c .  */\n /* ??? No longer true.  */"}, {"sha": "dbe077ca49bc69c40c2e151c896a1838dc41de49", "filename": "gcc/config/sh/sh.opt", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Fconfig%2Fsh%2Fsh.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Fconfig%2Fsh%2Fsh.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.opt?ref=6a799f6e68fcbd39c77f43524629183afc687202", "patch": "@@ -244,6 +244,10 @@ mdivsi3_libfunc=\n Target RejectNegative Joined Var(sh_divsi3_libfunc) Init(\"\")\n Specify name for 32 bit signed division function\n \n+mfmovd\n+Target RejectNegative Mask(FMOVD)\n+Enable the use of 64-bit floating point registers in fmov instructions.  See -mdalign if 64-bit alignment is required.\n+\n mfixed-range=\n Target RejectNegative Joined Var(sh_fixed_range_str)\n Specify range of registers to make fixed\n@@ -312,7 +316,7 @@ Follow Renesas (formerly Hitachi) / SuperH calling conventions\n \n mspace\n Target Report RejectNegative Mask(SMALLCODE)\n-Deprecated. Use -Os instead\n+Deprecated.  Use -Os instead\n \n multcost=\n Target RejectNegative Joined UInteger Var(sh_multcost) Init(-1)"}, {"sha": "ce94a32ae996ef809391f26c13fcbe3d0093cfe8", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=6a799f6e68fcbd39c77f43524629183afc687202", "patch": "@@ -800,7 +800,7 @@ See RS/6000 and PowerPC Options.\n -m5-32media  -m5-32media-nofpu @gol\n -m5-compact  -m5-compact-nofpu @gol\n -mb  -ml  -mdalign  -mrelax @gol\n--mbigtable  -mhitachi -mrenesas -mno-renesas -mnomacsave @gol\n+-mbigtable -mfmovd -mhitachi -mrenesas -mno-renesas -mnomacsave @gol\n -mieee  -mbitops  -misize  -minline-ic_invalidate -mpadstruct  -mspace @gol\n -mprefergot  -musermode -multcost=@var{number} -mdiv=@var{strategy} @gol\n -mdivsi3_libfunc=@var{name} -mfixed-range=@var{register-range} @gol\n@@ -15306,6 +15306,11 @@ Use 32-bit offsets in @code{switch} tables.  The default is to use\n @opindex mbitops\n Enable the use of bit manipulation instructions on SH2A.\n \n+@item -mfmovd\n+@opindex mfmovd\n+Enable the use of the instruction @code{fmovd}.  Check @option{-mdalign} for\n+alignment constraints.\n+\n @item -mhitachi\n @opindex mhitachi\n Comply with the calling conventions defined by Renesas."}, {"sha": "a3116320464b90222a3382b503281db3a989d6fd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6a799f6e68fcbd39c77f43524629183afc687202", "patch": "@@ -1,3 +1,7 @@\n+2009-07-20  Christian Bruel  <christian.bruel@st.com>\n+\t\n+\t* gcc.target/sh/mfmovd.c: New test.\n+\t\n 2009-07-19  Janne Blomqvist  <jb@gcc.gnu.org>\n \t    Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n@@ -52,6 +56,7 @@\n \t* gcc.target/powerpc/asm-es-1.c: New test.\n \t* gcc.target/powerpc/asm-es-2.c: Likewise.\n \n+>>>>>>> .r149802\n 2009-07-17  Richard Guenther  <rguenther@suse.de>\n \n \tPR c/40401\n@@ -84,6 +89,7 @@\n \tPR c++/40780\n \t* g++.dg/template/ptrmem19.C: New test.\n \n+>>>>>>> .r149747\n 2009-07-17  Aldy Hernandez  <aldyh@redhat.com>\n \t    Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n "}, {"sha": "c8e0094f0c1148c0dc6c2316935f9a368590cc20", "filename": "gcc/testsuite/gcc.target/sh/mfmovd.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Ftestsuite%2Fgcc.target%2Fsh%2Fmfmovd.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6a799f6e68fcbd39c77f43524629183afc687202/gcc%2Ftestsuite%2Fgcc.target%2Fsh%2Fmfmovd.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fsh%2Fmfmovd.c?ref=6a799f6e68fcbd39c77f43524629183afc687202", "patch": "@@ -0,0 +1,13 @@\n+/* { dg-do compile { target \"sh*-*-*\" } } */\n+/* { dg-options \"-mfmovd\" } */\n+/* { dg-skip-if \"No double precision FPU support\" { \"sh*-*-*\" } \"-m2a-nofpu -m2a-single-only -m4-nofpu -m4-single-only -m4a-nofpu -m4a-single-only\" { \"\" } }  */\n+/* { dg-final { scan-assembler \"fmov.d\"} }  */\n+\n+extern double g;\n+\n+void\n+f (double d)\n+{\n+  g = d;\n+}\n+"}]}