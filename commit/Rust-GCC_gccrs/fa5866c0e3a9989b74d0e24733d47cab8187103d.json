{"sha": "fa5866c0e3a9989b74d0e24733d47cab8187103d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE1ODY2YzBlM2E5OTg5Yjc0ZDBlMjQ3MzNkNDdjYWI4MTg3MTAzZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2014-04-10T18:57:48Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2014-04-10T18:57:48Z"}, "message": "re PR lto/60567 (lto1 ICE in add_symbol_to_partition, at lto/lto-partition.c:233 with -fno-use-linker-plugin)\n\n\tPR lto/60567\n\t* ipa.c (function_and_variable_visibility): Copy forced_by_abi flag from\n\tdecl_node to node.\n\n\t* g++.dg/lto/pr60567_0.C: New test.\n\nFrom-SVN: r209280", "tree": {"sha": "6599d476c476c949ab053c5050567b4c382a2c5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6599d476c476c949ab053c5050567b4c382a2c5d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa5866c0e3a9989b74d0e24733d47cab8187103d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5866c0e3a9989b74d0e24733d47cab8187103d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa5866c0e3a9989b74d0e24733d47cab8187103d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5866c0e3a9989b74d0e24733d47cab8187103d/comments", "author": null, "committer": null, "parents": [{"sha": "8aa1cce64e8d4a443d0b4d01b09ef0015725c65d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8aa1cce64e8d4a443d0b4d01b09ef0015725c65d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8aa1cce64e8d4a443d0b4d01b09ef0015725c65d"}], "stats": {"total": 42, "additions": 39, "deletions": 3}, "files": [{"sha": "e127291e1b103ceb2c36fa2a62b20af2368b143e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa5866c0e3a9989b74d0e24733d47cab8187103d", "patch": "@@ -1,7 +1,9 @@\n-2014-04-10  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+2014-04-10  Jan Hubicka  <hubicka@ucw.cz>\n+\t    Jakub Jelinek  <jakub@redhat.com>\n \n-\t* fortran/class.c (gfc_build_class_symbol): Append \"_t\" to target class\n-\tnames to make the generated type names unique.\n+\tPR lto/60567\n+\t* ipa.c (function_and_variable_visibility): Copy forced_by_abi flag from\n+\tdecl_node to node.\n \n 2014-04-10  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n "}, {"sha": "386a2f21e0e68f0e52bc642946224e128406ab7c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=fa5866c0e3a9989b74d0e24733d47cab8187103d", "patch": "@@ -1,3 +1,8 @@\n+2014-04-10  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* class.c (gfc_build_class_symbol): Append \"_t\" to target class\n+\tnames to make the generated type names unique.\n+\n 2014-04-04  Tobias Burnus  <burnus@net-b.de>\n \n \t* check.c (gfc_check_cmplx): Fix typo."}, {"sha": "26e9b03b9bdbd0029fb97987251d98645eb90b9d", "filename": "gcc/ipa.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Fipa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Fipa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa.c?ref=fa5866c0e3a9989b74d0e24733d47cab8187103d", "patch": "@@ -1032,6 +1032,7 @@ function_and_variable_visibility (bool whole_program)\n \t\t\t\t   == DECL_COMDAT_GROUP (decl_node->decl));\n \t      gcc_checking_assert (node->same_comdat_group);\n \t    }\n+\t  node->forced_by_abi = decl_node->forced_by_abi;\n \t  if (DECL_EXTERNAL (decl_node->decl))\n \t    DECL_EXTERNAL (node->decl) = 1;\n \t}"}, {"sha": "4e2bb478825c98a43ed4131cf3af32e4b1c5ddb6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fa5866c0e3a9989b74d0e24733d47cab8187103d", "patch": "@@ -1,3 +1,8 @@\n+2014-04-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR lto/60567\n+\t* g++.dg/lto/pr60567_0.C: New test.\n+\n 2014-04-10  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* gfortran.dg/class_nameclash.f90: New test."}, {"sha": "966a3c3bc7421775613f7e37c02562e0326aef42", "filename": "gcc/testsuite/g++.dg/lto/pr60567_0.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr60567_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5866c0e3a9989b74d0e24733d47cab8187103d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr60567_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr60567_0.C?ref=fa5866c0e3a9989b74d0e24733d47cab8187103d", "patch": "@@ -0,0 +1,23 @@\n+// PR lto/60567\n+// { dg-lto-do link }\n+// { dg-lto-options { { -flto -fno-use-linker-plugin } } }\n+// { dg-extra-ld-options \"-r -nostdlib\" }\n+\n+#pragma implementation\n+struct S {};\n+\n+#pragma interface\n+struct T\n+{\n+  virtual void foo (const S &) = 0;\n+};\n+\n+struct U\n+{\n+  virtual void bar (const S &) = 0;\n+};\n+\n+struct V : public T, public U\n+{\n+  virtual void bar (const S &) {}\n+};"}]}