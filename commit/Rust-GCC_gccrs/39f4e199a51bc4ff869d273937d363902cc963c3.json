{"sha": "39f4e199a51bc4ff869d273937d363902cc963c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzlmNGUxOTlhNTFiYzRmZjg2OWQyNzM5MzdkMzYzOTAyY2M5NjNjMw==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2007-06-06T10:19:40Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-06-06T10:19:40Z"}, "message": "bcheck.adb, [...]: Move Name_Id, File_Name_Type and Unit_Name_Type from package Types to package Namet.\n\n2007-04-20  Vincent Celier  <celier@adacore.com>\n\t    Robert Dewar  <dewar@adacore.com>\n\n\t* bcheck.adb, binde.adb, binderr.adb, binderr.ads, butil.adb, \n\tbutil.ads, erroutc.adb, erroutc.ads, errutil.adb, errutil.ads, \n\terr_vars.ads, exp_tss.adb, exp_tss.ads, fmap.adb, fmap.ads, \n\tfname.adb, fname.ads, fname-sf.adb, fname-uf.adb, fname-uf.ads, \n\tlib-sort.adb, lib-util.adb, lib-util.ads, lib-xref.adb, makeutl.ads, \n\tmakeutl.adb, nmake.adt, osint.adb, osint.ads, osint-b.adb, \n\tpar-load.adb, prj-attr.adb, prj-dect.adb, prj-err.adb, prj-makr.adb, \n\tprj-part.adb, prj-pp.adb, prj-proc.adb, prj-tree.adb, prj-tree.ads, \n\tprj-util.adb, prj-util.ads, scans.adb, scans.ads, sem_ch2.adb, \n\tsinput-c.adb, styleg-c.adb, tempdir.adb, tempdir.ads, uname.adb, \n\tuname.ads, atree.h, atree.ads, atree.adb, ali-util.ads, ali-util.adb,\n\tali.ads, ali.adb: \n\tMove Name_Id, File_Name_Type and Unit_Name_Type from package Types to\n\tpackage Namet. Make File_Name_Type and Unit_Name_Type types derived from\n\tMame_Id. Add new type Path_Name_Type, also derived from Name_Id.\n\tUse variables of types File_Name_Type and Unit_Name_Type in error\n\tmessages.\n\t(Get_Name): Add parameter Ignore_Special, and set it reading file name\n\t(New_Copy): When debugging the compiler, call New_Node_Debugging_Output\n\there.\n\tDefine flags Flag217-Flag230 with associated subprograms\n\t(Flag_Word5): New record type.\n\t(Flag_Word5_Ptr): New access type.\n\t(To_Flag_Word5): New unchecked conversion.\n\t(To_Flag_Word5_Ptr): Likewise.\n\t(Flag216): New function.\n\t(Set_Flag216): New procedure.\n\nFrom-SVN: r125377", "tree": {"sha": "2c708600f1cac4ba92be2eb201eabd01f089e8cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c708600f1cac4ba92be2eb201eabd01f089e8cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39f4e199a51bc4ff869d273937d363902cc963c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39f4e199a51bc4ff869d273937d363902cc963c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39f4e199a51bc4ff869d273937d363902cc963c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39f4e199a51bc4ff869d273937d363902cc963c3/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "379ec90449ee88ae149c19e377910f453007e137", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/379ec90449ee88ae149c19e377910f453007e137", "html_url": "https://github.com/Rust-GCC/gccrs/commit/379ec90449ee88ae149c19e377910f453007e137"}], "stats": {"total": 2074, "additions": 1293, "deletions": 781}, "files": [{"sha": "f908cfa002a3a198a24955771849003213269eab", "filename": "gcc/ada/ali-util.adb", "status": "modified", "additions": 14, "deletions": 16, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali-util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali-util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fali-util.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,7 +27,6 @@\n with Debug;   use Debug;\n with Binderr; use Binderr;\n with Lib;     use Lib;\n-with Namet;   use Namet;\n with Opt;     use Opt;\n with Output;  use Output;\n with Osint;   use Osint;\n@@ -134,8 +133,8 @@ package body ALI.Util is\n    -- Get_File_Checksum --\n    -----------------------\n \n-   function Get_File_Checksum (Fname : Name_Id) return Word is\n-      Full_Name    : Name_Id;\n+   function Get_File_Checksum (Fname : File_Name_Type) return Word is\n+      Full_Name    : File_Name_Type;\n       Source_Index : Source_File_Index;\n \n    begin\n@@ -255,9 +254,9 @@ package body ALI.Util is\n \n                if Text = null then\n                   if Generic_Separately_Compiled (Withs.Table (W).Sfile) then\n-                     Error_Msg_Name_1 := Afile;\n-                     Error_Msg_Name_2 := Withs.Table (W).Sfile;\n-                     Error_Msg (\"% not found, % must be compiled\");\n+                     Error_Msg_File_1 := Afile;\n+                     Error_Msg_File_2 := Withs.Table (W).Sfile;\n+                     Error_Msg (\"{ not found, { must be compiled\");\n                      Set_Name_Table_Info (Afile, Int (No_Unit_Id));\n                      return;\n \n@@ -278,13 +277,13 @@ package body ALI.Util is\n                Free (Text);\n \n                if ALIs.Table (Idread).Compile_Errors then\n-                  Error_Msg_Name_1 := Withs.Table (W).Sfile;\n-                  Error_Msg (\"% had errors, must be fixed, and recompiled\");\n+                  Error_Msg_File_1 := Withs.Table (W).Sfile;\n+                  Error_Msg (\"{ had errors, must be fixed, and recompiled\");\n                   Set_Name_Table_Info (Afile, Int (No_Unit_Id));\n \n                elsif ALIs.Table (Idread).No_Object then\n-                  Error_Msg_Name_1 := Withs.Table (W).Sfile;\n-                  Error_Msg (\"% must be recompiled\");\n+                  Error_Msg_File_1 := Withs.Table (W).Sfile;\n+                  Error_Msg (\"{ must be recompiled\");\n                   Set_Name_Table_Info (Afile, Int (No_Unit_Id));\n                end if;\n \n@@ -335,7 +334,7 @@ package body ALI.Util is\n       loop\n          F := Sdep.Table (D).Sfile;\n \n-         if F /= No_Name then\n+         if F /= No_File then\n \n             --  If this is the first time we are seeing this source file,\n             --  then make a new entry in the source table.\n@@ -376,8 +375,8 @@ package body ALI.Util is\n                      --  In All_Sources mode, flag error of file not found\n \n                      if Opt.All_Sources then\n-                        Error_Msg_Name_1 := F;\n-                        Error_Msg (\"cannot locate %\");\n+                        Error_Msg_File_1 := F;\n+                        Error_Msg (\"cannot locate {\");\n                      end if;\n                   end if;\n \n@@ -468,8 +467,7 @@ package body ALI.Util is\n \n    function Time_Stamp_Mismatch\n      (A         : ALI_Id;\n-      Read_Only : Boolean := False)\n-      return      File_Name_Type\n+      Read_Only : Boolean := False) return File_Name_Type\n    is\n       Src : Source_Id;\n       --  Source file Id for the current Sdep entry"}, {"sha": "9a6e8dc4ba0ecb1f60cd2a8c09ecd8f91dde27dc", "filename": "gcc/ada/ali-util.ads", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali-util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali-util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fali-util.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2003 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -109,15 +109,14 @@ package ALI.Util is\n    --  be read, scanned, and processed recursively.\n \n    procedure Set_Source_Table (A : ALI_Id);\n-   --  Build source table entry corresponding to the ALI file whose id is A.\n+   --  Build source table entry corresponding to the ALI file whose id is A\n \n    procedure Set_Source_Table;\n-   --  Build the entire source table.\n+   --  Build the entire source table\n \n    function Time_Stamp_Mismatch\n      (A         : ALI_Id;\n-      Read_Only : Boolean := False)\n-      return      File_Name_Type;\n+      Read_Only : Boolean := False) return File_Name_Type;\n    --  Looks in the Source_Table and checks time stamp mismatches between\n    --  the sources there and the sources in the Sdep section of ali file whose\n    --  id is A. If no time stamp mismatches are found No_File is returned.\n@@ -139,7 +138,7 @@ package ALI.Util is\n    --  in a false negative, but that is never harmful, it just means\n    --  that in unusual cases an unnecessary recompilation occurs.\n \n-   function Get_File_Checksum (Fname : Name_Id) return Word;\n+   function Get_File_Checksum (Fname : File_Name_Type) return Word;\n    --  Compute checksum for the given file. As far as possible, this circuit\n    --  computes exactly the same value computed by the compiler, but it does\n    --  not matter if it gets it wrong in marginal cases, since the only result"}, {"sha": "1b077c53bd3f90d803a18499e916e9a91c9347ad", "filename": "gcc/ada/ali.adb", "status": "modified", "additions": 107, "deletions": 42, "changes": 149, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fali.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,7 +27,6 @@\n with Butil;  use Butil;\n with Debug;  use Debug;\n with Fname;  use Fname;\n-with Namet;  use Namet;\n with Opt;    use Opt;\n with Osint;  use Osint;\n with Output; use Output;\n@@ -179,19 +178,37 @@ package body ALI is\n       function Getc return Character;\n       --  Get next character, bumping P past the character obtained\n \n+      function Get_File_Name (Lower : Boolean := False) return File_Name_Type;\n+      --  Skip blanks, then scan out a file name (name is left in Name_Buffer\n+      --  with length in Name_Len, as well as returning a File_Name_Type value.\n+      --  If lower is false, the case is unchanged, if Lower is True then the\n+      --  result is forced to all lower case for systems where file names are\n+      --  not case sensitive. This ensures that gnatbind works correctly\n+      --  regardless of the case of the file name on all systems. The scan\n+      --  is terminated by a end of line, space or horizontal tab. Any other\n+      --  special characters are included in the returned name.\n+\n       function Get_Name\n-        (Lower         : Boolean := False;\n-         Ignore_Spaces : Boolean := False) return Name_Id;\n+        (Ignore_Spaces  : Boolean := False;\n+         Ignore_Special : Boolean := False)return Name_Id;\n       --  Skip blanks, then scan out a name (name is left in Name_Buffer with\n       --  length in Name_Len, as well as being returned in Name_Id form).\n       --  If Lower is set to True then the Name_Buffer will be converted to\n       --  all lower case, for systems where file names are not case sensitive.\n       --  This ensures that gnatbind works correctly regardless of the case\n-      --  of the file name on all systems. The name is terminated by a either\n-      --  white space (when Ignore_Spaces is False) or a typeref bracket or\n-      --  an equal sign except for the special case of an operator name\n-      --  starting with a double quite which is terminated by another double\n-      --  quote. This function handles wide characters properly.\n+      --  of the file name on all systems. The termination condition depends\n+      --  on the settings of Ignore_Spaces and Ignore_Special:\n+      --\n+      --    If Ignore_Spaces is False (normal case), then scan is terminated\n+      --    by the normal end of field condition (EOL, space, horizontal tab)\n+      --\n+      --    If Ignore_Special is False (normal case), the scan is terminated by\n+      --    a typeref bracket or an equal sign except for the special case of\n+      --    an operator name starting with a double quite which is terminated\n+      --    by another double quote.\n+      --\n+      --  It is an error to set both Ignore_Spaces and Ignore_Special to True.\n+      --  This function handles wide characters properly.\n \n       function Get_Nat return Nat;\n       --  Skip blanks, then scan out an unsigned integer value in Nat range\n@@ -200,6 +217,11 @@ package body ALI is\n       function Get_Stamp return Time_Stamp_Type;\n       --  Skip blanks, then scan out a time stamp\n \n+      function Get_Unit_Name return Unit_Name_Type;\n+      --  Skip blanks, then scan out a file name (name is left in Name_Buffer\n+      --  with length in Name_Len, as well as returning a Unit_Name_Type value.\n+      --  The case is unchanged and terminated by a normal end of field.\n+\n       function Nextc return Character;\n       --  Return current character without modifying pointer P\n \n@@ -341,8 +363,14 @@ package body ALI is\n          Write_Name (F);\n          Write_Str (\" is incorrectly formatted\");\n          Write_Eol;\n-         Write_Str\n-           (\"make sure you are using consistent versions of gcc/gnatbind\");\n+\n+         Write_Str (\"make sure you are using consistent versions \" &\n+\n+         --  Split the following line so that it can easily be transformed for\n+         --  e.g. JVM/.NET back-ends where the compiler has a different name.\n+\n+                    \"of gcc/gnatbind\");\n+\n          Write_Eol;\n \n          --  Find start of line\n@@ -409,13 +437,37 @@ package body ALI is\n          end if;\n       end Fatal_Error_Ignore;\n \n+      -------------------\n+      -- Get_File_Name --\n+      -------------------\n+\n+      function Get_File_Name\n+        (Lower : Boolean := False) return File_Name_Type\n+      is\n+         F : Name_Id;\n+\n+      begin\n+         F := Get_Name (Ignore_Special => True);\n+\n+         --  Convert file name to all lower case if file names are not case\n+         --  sensitive. This ensures that we handle names in the canonical\n+         --  lower case format, regardless of the actual case.\n+\n+         if Lower and not File_Names_Case_Sensitive then\n+            Canonical_Case_File_Name (Name_Buffer (1 .. Name_Len));\n+            return Name_Find;\n+         else\n+            return File_Name_Type (F);\n+         end if;\n+      end Get_File_Name;\n+\n       --------------\n       -- Get_Name --\n       --------------\n \n       function Get_Name\n-        (Lower         : Boolean := False;\n-         Ignore_Spaces : Boolean := False) return Name_Id\n+        (Ignore_Spaces  : Boolean := False;\n+         Ignore_Special : Boolean := False) return Name_Id\n       is\n       begin\n          Name_Len := 0;\n@@ -435,39 +487,42 @@ package body ALI is\n \n             exit when At_End_Of_Field and not Ignore_Spaces;\n \n-            if Name_Buffer (1) = '\"' then\n-               exit when Name_Len > 1 and then Name_Buffer (Name_Len) = '\"';\n+            if not Ignore_Special then\n+               if Name_Buffer (1) = '\"' then\n+                  exit when Name_Len > 1 and then Name_Buffer (Name_Len) = '\"';\n \n-            else\n-               --  Terminate on parens or angle brackets or equal sign\n+               else\n+                  --  Terminate on parens or angle brackets or equal sign\n \n-               exit when Nextc = '(' or else Nextc = ')'\n-                 or else Nextc = '{' or else Nextc = '}'\n-                 or else Nextc = '<' or else Nextc = '>'\n-                 or else Nextc = '=';\n+                  exit when Nextc = '(' or else Nextc = ')'\n+                    or else Nextc = '{' or else Nextc = '}'\n+                    or else Nextc = '<' or else Nextc = '>'\n+                    or else Nextc = '=';\n \n-               --  Terminate if left bracket not part of wide char sequence\n-               --  Note that we only recognize brackets notation so far ???\n+                  --  Terminate if left bracket not part of wide char sequence\n+                  --  Note that we only recognize brackets notation so far ???\n \n-               exit when Nextc = '[' and then T (P + 1) /= '\"';\n+                  exit when Nextc = '[' and then T (P + 1) /= '\"';\n \n-               --  Terminate if right bracket not part of wide char sequence\n+                  --  Terminate if right bracket not part of wide char sequence\n \n-               exit when Nextc = ']' and then T (P - 1) /= '\"';\n+                  exit when Nextc = ']' and then T (P - 1) /= '\"';\n+               end if;\n             end if;\n          end loop;\n \n-         --  Convert file name to all lower case if file names are not case\n-         --  sensitive. This ensures that we handle names in the canonical\n-         --  lower case format, regardless of the actual case.\n-\n-         if Lower and not File_Names_Case_Sensitive then\n-            Canonical_Case_File_Name (Name_Buffer (1 .. Name_Len));\n-         end if;\n-\n          return Name_Find;\n       end Get_Name;\n \n+      -------------------\n+      -- Get_Unit_Name --\n+      -------------------\n+\n+      function Get_Unit_Name return Unit_Name_Type is\n+      begin\n+         return Unit_Name_Type (Get_Name);\n+      end Get_Unit_Name;\n+\n       -------------\n       -- Get_Nat --\n       -------------\n@@ -767,7 +822,7 @@ package body ALI is\n         Queuing_Policy             => ' ',\n         Restrictions               => No_Restrictions,\n         SAL_Interface              => False,\n-        Sfile                      => No_Name,\n+        Sfile                      => No_File,\n         Task_Dispatching_Policy    => ' ',\n         Time_Slice_Value           => -1,\n         WC_Encoding                => '8',\n@@ -1328,11 +1383,11 @@ package body ALI is\n             UL : Unit_Record renames Units.Table (Units.Last);\n \n          begin\n-            UL.Uname                    := Get_Name;\n+            UL.Uname                    := Get_Unit_Name;\n             UL.Predefined               := Is_Predefined_Unit;\n             UL.Internal                 := Is_Internal_Unit;\n             UL.My_ALI                   := Id;\n-            UL.Sfile                    := Get_Name (Lower => True);\n+            UL.Sfile                    := Get_File_Name (Lower => True);\n             UL.Pure                     := False;\n             UL.Preelab                  := False;\n             UL.No_Elab                  := False;\n@@ -1617,7 +1672,7 @@ package body ALI is\n                Checkc (' ');\n                Skip_Space;\n                Withs.Increment_Last;\n-               Withs.Table (Withs.Last).Uname              := Get_Name;\n+               Withs.Table (Withs.Last).Uname              := Get_Unit_Name;\n                Withs.Table (Withs.Last).Elaborate          := False;\n                Withs.Table (Withs.Last).Elaborate_All      := False;\n                Withs.Table (Withs.Last).Elab_Desirable     := False;\n@@ -1633,8 +1688,10 @@ package body ALI is\n                --  Normal case\n \n                else\n-                  Withs.Table (Withs.Last).Sfile := Get_Name (Lower => True);\n-                  Withs.Table (Withs.Last).Afile := Get_Name;\n+                  Withs.Table (Withs.Last).Sfile := Get_File_Name\n+                                                      (Lower => True);\n+                  Withs.Table (Withs.Last).Afile := Get_File_Name\n+                                                      (Lower => True);\n \n                   --  Scan out possible E, EA, ED, and AD parameters\n \n@@ -1675,6 +1732,9 @@ package body ALI is\n                                 True;\n                            end if;\n                         end if;\n+\n+                     else\n+                        Fatal_Error;\n                      end if;\n                   end loop;\n                end if;\n@@ -1852,7 +1912,12 @@ package body ALI is\n             Checkc (' ');\n             Skip_Space;\n             Sdep.Increment_Last;\n-            Sdep.Table (Sdep.Last).Sfile := Get_Name (Lower => True);\n+\n+            --  In the following call, Lower is not set to True, this is either\n+            --  a bug, or it deserves a special comment as to why this is so???\n+\n+            Sdep.Table (Sdep.Last).Sfile := Get_File_Name;\n+\n             Sdep.Table (Sdep.Last).Stamp := Get_Stamp;\n             Sdep.Table (Sdep.Last).Dummy_Entry :=\n               (Sdep.Table (Sdep.Last).Stamp = Dummy_Time_Stamp);\n@@ -1982,7 +2047,7 @@ package body ALI is\n \n          begin\n             XS.File_Num     := Sdep_Id (Get_Nat + Nat (First_Sdep_Entry) - 1);\n-            XS.File_Name    := Get_Name;\n+            XS.File_Name    := Get_File_Name;\n             XS.First_Entity := Xref_Entity.Last + 1;\n \n             Current_File_Num := XS.File_Num;"}, {"sha": "12bb73258043bef328710c06f65af8ff3d0be772", "filename": "gcc/ada/ali.ads", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fali.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fali.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -30,6 +30,7 @@\n \n with Casing;  use Casing;\n with Gnatvsn; use Gnatvsn;\n+with Namet;   use Namet;\n with Rident;  use Rident;\n with Table;\n with Types;   use Types;\n@@ -90,7 +91,7 @@ package ALI is\n       Afile : File_Name_Type;\n       --  Name of ALI file\n \n-      Ofile_Full_Name : Name_Id;\n+      Ofile_Full_Name : File_Name_Type;\n       --  Full name of object file corresponding to the ALI file\n \n       Sfile : File_Name_Type;\n@@ -741,7 +742,7 @@ package ALI is\n       File_Num : Sdep_Id;\n       --  Dependency number for file (entry in Sdep.Table)\n \n-      File_Name : Name_Id;\n+      File_Name : File_Name_Type;\n       --  Name of file\n \n       First_Entity : Nat;"}, {"sha": "aad0b949aafc5aebe3ea608daa422e9137589092", "filename": "gcc/ada/atree.adb", "status": "modified", "additions": 282, "deletions": 6, "changes": 288, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fatree.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fatree.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -39,7 +39,6 @@ pragma Style_Checks (All_Checks);\n --  file containing equivalent definitions for use by gigi.\n \n with Debug;   use Debug;\n-with Namet;   use Namet;\n with Nlists;  use Nlists;\n with Elists;  use Elists;\n with Output;  use Output;\n@@ -345,6 +344,62 @@ package body Atree is\n    function To_Flag_Word4_Ptr is new\n      Unchecked_Conversion (Union_Id_Ptr, Flag_Word4_Ptr);\n \n+   --  The following declarations are used to store flags 216-247 in the\n+   --  Field12 field of the fifth component of an extended (entity) node.\n+\n+   type Flag_Word5 is record\n+      Flag216 : Boolean;\n+      Flag217 : Boolean;\n+      Flag218 : Boolean;\n+      Flag219 : Boolean;\n+      Flag220 : Boolean;\n+      Flag221 : Boolean;\n+      Flag222 : Boolean;\n+      Flag223 : Boolean;\n+\n+      Flag224 : Boolean;\n+      Flag225 : Boolean;\n+      Flag226 : Boolean;\n+      Flag227 : Boolean;\n+      Flag228 : Boolean;\n+      Flag229 : Boolean;\n+      Flag230 : Boolean;\n+\n+      --  Note: flags 231-247 not in use yet\n+\n+      Flag231 : Boolean;\n+\n+      Flag232 : Boolean;\n+      Flag233 : Boolean;\n+      Flag234 : Boolean;\n+      Flag235 : Boolean;\n+      Flag236 : Boolean;\n+      Flag237 : Boolean;\n+      Flag238 : Boolean;\n+      Flag239 : Boolean;\n+\n+      Flag240 : Boolean;\n+      Flag241 : Boolean;\n+      Flag242 : Boolean;\n+      Flag243 : Boolean;\n+      Flag244 : Boolean;\n+      Flag245 : Boolean;\n+      Flag246 : Boolean;\n+      Flag247 : Boolean;\n+   end record;\n+\n+   pragma Pack (Flag_Word5);\n+   for Flag_Word5'Size use 32;\n+   for Flag_Word5'Alignment use 4;\n+\n+   type Flag_Word5_Ptr is access all Flag_Word5;\n+\n+   function To_Flag_Word5 is new\n+     Unchecked_Conversion (Union_Id, Flag_Word5);\n+\n+   function To_Flag_Word5_Ptr is new\n+     Unchecked_Conversion (Union_Id_Ptr, Flag_Word5_Ptr);\n+\n    --  Default value used to initialize default nodes. Note that some of the\n    --  fields get overwritten, and in particular, Nkind always gets reset.\n \n@@ -445,7 +500,7 @@ package body Atree is\n \n    package Orig_Nodes is new Table.Table (\n       Table_Component_Type => Node_Id,\n-      Table_Index_Type     => Node_Id,\n+      Table_Index_Type     => Node_Id'Base,\n       Table_Low_Bound      => First_Node_Id,\n       Table_Initial        => Alloc.Orig_Nodes_Initial,\n       Table_Increment      => Alloc.Orig_Nodes_Increment,\n@@ -1124,6 +1179,7 @@ package body Atree is\n          --  the copy, since we inserted the original, not the copy.\n \n          Nodes.Table (New_Id).Rewrite_Ins := False;\n+         pragma Debug (New_Node_Debugging_Output (New_Id));\n       end if;\n \n       return New_Id;\n@@ -2092,9 +2148,9 @@ package body Atree is\n       Nodes.Table (Nod).Sloc  := New_Sloc;\n       pragma Debug (New_Node_Debugging_Output (Nod));\n \n-      --  If this is a node with a real location and we are generating\n-      --  source nodes, then reset Current_Error_Node. This is useful\n-      --  if we bomb during parsing to get a error location for the bomb.\n+      --  If this is a node with a real location and we are generating source\n+      --  nodes, then reset Current_Error_Node. This is useful if we bomb\n+      --  during parsing to get an error location for the bomb.\n \n       if Default_Node.Comes_From_Source and then New_Sloc > No_Location then\n          Current_Error_Node := Nod;\n@@ -4619,6 +4675,96 @@ package body Atree is\n          return To_Flag_Word4 (Nodes.Table (N + 4).Field11).Flag215;\n       end Flag215;\n \n+      function Flag216 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag216;\n+      end Flag216;\n+\n+      function Flag217 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag217;\n+      end Flag217;\n+\n+      function Flag218 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag218;\n+      end Flag218;\n+\n+      function Flag219 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag219;\n+      end Flag219;\n+\n+      function Flag220 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag220;\n+      end Flag220;\n+\n+      function Flag221 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag221;\n+      end Flag221;\n+\n+      function Flag222 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag222;\n+      end Flag222;\n+\n+      function Flag223 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag223;\n+      end Flag223;\n+\n+      function Flag224 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag224;\n+      end Flag224;\n+\n+      function Flag225 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag225;\n+      end Flag225;\n+\n+      function Flag226 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag226;\n+      end Flag226;\n+\n+      function Flag227 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag227;\n+      end Flag227;\n+\n+      function Flag228 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag228;\n+      end Flag228;\n+\n+      function Flag229 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag229;\n+      end Flag229;\n+\n+      function Flag230 (N : Node_Id) return Boolean is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         return To_Flag_Word5 (Nodes.Table (N + 4).Field12).Flag230;\n+      end Flag230;\n+\n       procedure Set_Nkind (N : Node_Id; Val : Node_Kind) is\n       begin\n          pragma Assert (N in Nodes.First .. Nodes.Last);\n@@ -6725,6 +6871,126 @@ package body Atree is\n              (Nodes.Table (N + 4).Field11'Unrestricted_Access)).Flag215 := Val;\n       end Set_Flag215;\n \n+      procedure Set_Flag216 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag216 := Val;\n+      end Set_Flag216;\n+\n+      procedure Set_Flag217 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag217 := Val;\n+      end Set_Flag217;\n+\n+      procedure Set_Flag218 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag218 := Val;\n+      end Set_Flag218;\n+\n+      procedure Set_Flag219 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag219 := Val;\n+      end Set_Flag219;\n+\n+      procedure Set_Flag220 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag220 := Val;\n+      end Set_Flag220;\n+\n+      procedure Set_Flag221 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag221 := Val;\n+      end Set_Flag221;\n+\n+      procedure Set_Flag222 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag222 := Val;\n+      end Set_Flag222;\n+\n+      procedure Set_Flag223 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag223 := Val;\n+      end Set_Flag223;\n+\n+      procedure Set_Flag224 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag224 := Val;\n+      end Set_Flag224;\n+\n+      procedure Set_Flag225 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag225 := Val;\n+      end Set_Flag225;\n+\n+      procedure Set_Flag226 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag226 := Val;\n+      end Set_Flag226;\n+\n+      procedure Set_Flag227 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag227 := Val;\n+      end Set_Flag227;\n+\n+      procedure Set_Flag228 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag228 := Val;\n+      end Set_Flag228;\n+\n+      procedure Set_Flag229 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag229 := Val;\n+      end Set_Flag229;\n+\n+      procedure Set_Flag230 (N : Node_Id; Val : Boolean) is\n+      begin\n+         pragma Assert (Nkind (N) in N_Entity);\n+         To_Flag_Word5_Ptr\n+           (Union_Id_Ptr'\n+             (Nodes.Table (N + 4).Field12'Unrestricted_Access)).Flag230 := Val;\n+      end Set_Flag230;\n+\n       procedure Set_Node1_With_Parent (N : Node_Id; Val : Node_Id) is\n       begin\n          pragma Assert (N in Nodes.First .. Nodes.Last);\n@@ -6807,4 +7073,14 @@ package body Atree is\n \n    end Unchecked_Access;\n \n+   ------------\n+   -- Unlock --\n+   ------------\n+\n+   procedure Unlock is\n+   begin\n+      Nodes.Locked := False;\n+      Orig_Nodes.Locked := False;\n+   end Unlock;\n+\n end Atree;"}, {"sha": "2902aea7f3827a3a0dfe0fbdd16e1c3e38f3f52f", "filename": "gcc/ada/atree.ads", "status": "modified", "additions": 114, "deletions": 18, "changes": 132, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fatree.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fatree.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -34,6 +34,7 @@\n with Alloc;\n with Sinfo;  use Sinfo;\n with Einfo;  use Einfo;\n+with Namet;  use Namet;\n with Types;  use Types;\n with Snames; use Snames;\n with System; use System;\n@@ -59,7 +60,7 @@ package Atree is\n --  by the parser. The package Entity_Info defines the semantic information\n --  which is added to the tree nodes that represent declared entities (i.e.\n --  the information which might typically be described in a separate symbol\n---  table structure.\n+--  table structure).\n \n --  The front end of the compiler first parses the program and generates a\n --  tree that is simply a syntactic representation of the program in abstract\n@@ -84,7 +85,7 @@ package Atree is\n    --                 show which token is referenced by this pointer.\n \n    --   In_List       A flag used to indicate if the node is a member\n-   --                    of a node list.\n+   --                 of a node list.\n \n    --   Rewrite_Sub   A flag set if the node has been rewritten using\n    --                 the Rewrite procedure. The original value of the\n@@ -97,7 +98,7 @@ package Atree is\n    --                 the level of parentheses. Up to 3 levels can be\n    --                 accomodated. Anything more than 3 levels is treated\n    --                 as 3 levels (conformance tests that complain about\n-   --                 this are hereby deemed pathological!) Set to zero\n+   --                 this are hereby deemed pathological!). Set to zero\n    --                 for non-subexpression nodes.\n \n    --   Comes_From_Source\n@@ -144,7 +145,7 @@ package Atree is\n    --   it will take a bit of fiddling to change that ???\n \n    --   Note: the actual usage of FieldN (i.e. whether it contains a Elist_Id,\n-   --   List_Id, Name_Id, Node_Id, String_Id, Uint or Ureal), depends on the\n+   --   List_Id, Name_Id, Node_Id, String_Id, Uint or Ureal) depends on the\n    --   value in Nkind. Generally the access to this field is always via the\n    --   functional interface, so the field names ElistN, ListN, NameN, NodeN,\n    --   StrN, UintN and UrealN are used only in the bodies of the access\n@@ -186,9 +187,9 @@ package Atree is\n    --                 entity, it is of type Entity_Kind which is defined\n    --                 in package Einfo.\n \n-   --   Flag19        197 additional flags\n+   --   Flag19        229 additional flags\n    --   ...\n-   --   Flag215\n+   --   Flag247\n \n    --   Convention    Entity convention (Convention_Id value)\n \n@@ -302,7 +303,7 @@ package Atree is\n    -------------------------------------\n \n    --  A subpackage Atree.Unchecked_Access provides routines for reading and\n-   --  writing the fields defined above (Field1-27, Node1-27, Flag1-215 etc).\n+   --  writing the fields defined above (Field1-27, Node1-27, Flag1-247 etc).\n    --  These unchecked access routines can be used for untyped traversals.\n    --  In addition they are used in the implementations of the Sinfo and\n    --  Einfo packages. These packages both provide logical synonyms for\n@@ -321,7 +322,7 @@ package Atree is\n    --  which the parser could not parse correctly, and adding additional\n    --  semantic information (e.g. making constraint checks explicit). The\n    --  following subprograms are used for constructing the tree in the first\n-   --  place, and then for subsequent modifications as required\n+   --  place, and then for subsequent modifications as required.\n \n    procedure Initialize;\n    --  Called at the start of compilation to initialize the allocation of\n@@ -330,7 +331,11 @@ package Atree is\n    --  Tree_Read is used.\n \n    procedure Lock;\n-   --  Called before the backend is invoked to lock the nodes table\n+   --  Called before the back end is invoked to lock the nodes table\n+   --  Also called after Unlock to relock???\n+\n+   procedure Unlock;\n+   --  Unlocks nodes table, in cases where the back end needs to modify it\n \n    procedure Tree_Read;\n    --  Initializes internal tables from current tree file using the relevant\n@@ -1708,6 +1713,51 @@ package Atree is\n       function Flag215 (N : Node_Id) return Boolean;\n       pragma Inline (Flag215);\n \n+      function Flag216 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag216);\n+\n+      function Flag217 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag217);\n+\n+      function Flag218 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag218);\n+\n+      function Flag219 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag219);\n+\n+      function Flag220 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag220);\n+\n+      function Flag221 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag221);\n+\n+      function Flag222 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag222);\n+\n+      function Flag223 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag223);\n+\n+      function Flag224 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag224);\n+\n+      function Flag225 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag225);\n+\n+      function Flag226 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag226);\n+\n+      function Flag227 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag227);\n+\n+      function Flag228 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag228);\n+\n+      function Flag229 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag229);\n+\n+      function Flag230 (N : Node_Id) return Boolean;\n+      pragma Inline (Flag230);\n+\n       --  Procedures to set value of indicated field\n \n       procedure Set_Nkind (N : Node_Id; Val : Node_Kind);\n@@ -2637,6 +2687,51 @@ package Atree is\n       procedure Set_Flag215 (N : Node_Id; Val : Boolean);\n       pragma Inline (Set_Flag215);\n \n+      procedure Set_Flag216 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag216);\n+\n+      procedure Set_Flag217 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag217);\n+\n+      procedure Set_Flag218 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag218);\n+\n+      procedure Set_Flag219 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag219);\n+\n+      procedure Set_Flag220 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag220);\n+\n+      procedure Set_Flag221 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag221);\n+\n+      procedure Set_Flag222 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag222);\n+\n+      procedure Set_Flag223 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag223);\n+\n+      procedure Set_Flag224 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag224);\n+\n+      procedure Set_Flag225 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag225);\n+\n+      procedure Set_Flag226 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag226);\n+\n+      procedure Set_Flag227 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag227);\n+\n+      procedure Set_Flag228 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag228);\n+\n+      procedure Set_Flag229 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag229);\n+\n+      procedure Set_Flag230 (N : Node_Id; Val : Boolean);\n+      pragma Inline (Set_Flag230);\n+\n       --  The following versions of Set_Noden also set the parent\n       --  pointer of the referenced node if it is non_Empty\n \n@@ -2693,12 +2788,12 @@ package Atree is\n       -------------------------\n \n       --  The nodes of the tree are stored in a table (i.e. an array). In the\n-      --  case of extended nodes four consecutive components in the array are\n+      --  case of extended nodes five consecutive components in the array are\n       --  used. There are thus two formats for array components. One is used\n       --  for non-extended nodes, and for the first component of extended\n-      --  nodes. The other is used for the extension parts (second, third and\n-      --  fourth components) of an extended node. A variant record structure\n-      --  is used to distinguish the two formats.\n+      --  nodes. The other is used for the extension parts (second, third,\n+      --  fourth and fifth components) of an extended node. A variant record\n+      --  structure is used to distinguish the two formats.\n \n       type Node_Record (Is_Extension : Boolean := False) is record\n \n@@ -2820,6 +2915,7 @@ package Atree is\n             --  Extension (second component) of extended node\n \n             when True =>\n+\n                Field6  : Union_Id;\n                Field7  : Union_Id;\n                Field8  : Union_Id;\n@@ -2852,7 +2948,7 @@ package Atree is\n \n             --    Field6-10      Holds Field24-Field28\n             --    Field11        Holds Flag184-Flag215\n-            --    Field12        currently unused, reserved for expansion\n+            --    Field12        Holds Flag216-Flag230\n \n          end case;\n       end record;\n@@ -2861,12 +2957,12 @@ package Atree is\n       for Node_Record'Size use 8*32;\n       for Node_Record'Alignment use 4;\n \n-      --  The following defines the extendible array used for the nodes table\n-      --  Nodes with extensions use two consecutive entries in the array\n+      --  The following defines the extendable array used for the nodes table\n+      --  Nodes with extensions use five consecutive entries in the array\n \n       package Nodes is new Table.Table (\n         Table_Component_Type => Node_Record,\n-        Table_Index_Type     => Node_Id,\n+        Table_Index_Type     => Node_Id'Base,\n         Table_Low_Bound      => First_Node_Id,\n         Table_Initial        => Alloc.Nodes_Initial,\n         Table_Increment      => Alloc.Nodes_Increment,"}, {"sha": "1137465282ed370aaa263ce258affcb2264b55a4", "filename": "gcc/ada/atree.h", "status": "modified", "additions": 57, "deletions": 1, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fatree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fatree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.h?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n  *                                                                          *\n  *                              C Header File                               *\n  *                                                                          *\n- *          Copyright (C) 1992-2006, Free Software Foundation, Inc.         *\n+ *          Copyright (C) 1992-2007, Free Software Foundation, Inc.         *\n  *                                                                          *\n  * GNAT is free software;  you can  redistribute it  and/or modify it under *\n  * terms of the  GNU General Public License as published  by the Free Soft- *\n@@ -256,6 +256,46 @@ struct Flag_Word4\n   Boolean      flag215\t    :  1;\n };\n \n+/* Structure used for extra flags in fifth component overlaying Field12 */\n+struct Flag_Word5\n+{\n+  Boolean      flag216\t    :  1;\n+  Boolean      flag217\t    :  1;\n+  Boolean      flag218\t    :  1;\n+  Boolean      flag219\t    :  1;\n+  Boolean      flag220\t    :  1;\n+  Boolean      flag221\t    :  1;\n+  Boolean      flag222\t    :  1;\n+  Boolean      flag223\t    :  1;\n+\n+  Boolean      flag224\t    :  1;\n+  Boolean      flag225\t    :  1;\n+  Boolean      flag226\t    :  1;\n+  Boolean      flag227\t    :  1;\n+  Boolean      flag228\t    :  1;\n+  Boolean      flag229\t    :  1;\n+  Boolean      flag230\t    :  1;\n+  Boolean      flag231\t    :  1;\n+\n+  Boolean      flag232\t    :  1;\n+  Boolean      flag233\t    :  1;\n+  Boolean      flag234\t    :  1;\n+  Boolean      flag235\t    :  1;\n+  Boolean      flag236\t    :  1;\n+  Boolean      flag237\t    :  1;\n+  Boolean      flag238\t    :  1;\n+  Boolean      flag239\t    :  1;\n+\n+  Boolean      flag240      :  1;\n+  Boolean      flag241\t    :  1;\n+  Boolean      flag242\t    :  1;\n+  Boolean      flag243\t    :  1;\n+  Boolean      flag244\t    :  1;\n+  Boolean      flag245\t    :  1;\n+  Boolean      flag246\t    :  1;\n+  Boolean      flag247\t    :  1;\n+};\n+\n struct Non_Extended\n {\n   Source_Ptr   sloc;\n@@ -287,6 +327,7 @@ struct Extended\n       Int      field12;\n       struct   Flag_Word fw;\n       struct   Flag_Word2 fw2;\n+      struct   Flag_Word5 fw5;\n     } U;\n };\n \n@@ -686,3 +727,18 @@ extern Node_Id Current_Error_Node;\n #define Flag213(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.X.fw4.flag213)\n #define Flag214(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.X.fw4.flag214)\n #define Flag215(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.X.fw4.flag215)\n+#define Flag216(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag216)\n+#define Flag217(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag217)\n+#define Flag218(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag218)\n+#define Flag219(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag219)\n+#define Flag220(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag220)\n+#define Flag221(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag221)\n+#define Flag222(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag222)\n+#define Flag223(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag223)\n+#define Flag224(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag224)\n+#define Flag225(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag225)\n+#define Flag226(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag226)\n+#define Flag227(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag227)\n+#define Flag228(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag228)\n+#define Flag229(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag229)\n+#define Flag230(N)     (Nodes_Ptr[(N) - First_Node_Id + 4].V.EX.U.fw5.flag230)"}, {"sha": "15b6b1ebb0ec0176651504d279e9bb9c8febf1be", "filename": "gcc/ada/bcheck.adb", "status": "modified", "additions": 77, "deletions": 88, "changes": 165, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbcheck.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbcheck.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbcheck.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -60,7 +60,7 @@ package body Bcheck is\n    --  Produce an error or a warning message, depending on whether an\n    --  inconsistent configuration is permitted or not.\n \n-   function Same_Unit (U1 : Name_Id; U2 : Name_Id) return Boolean;\n+   function Same_Unit (U1 : Unit_Name_Type; U2 : Name_Id) return Boolean;\n    --  Used to compare two unit names for No_Dependence checks. U1 is in\n    --  standard unit name format, and U2 is in literal form with periods.\n \n@@ -102,7 +102,7 @@ package body Bcheck is\n       Src : Source_Id;\n       --  Source file Id for this Sdep entry\n \n-      ALI_Path_Id : Name_Id;\n+      ALI_Path_Id : File_Name_Type;\n \n    begin\n       --  First, we go through the source table to see if there are any cases\n@@ -171,69 +171,55 @@ package body Bcheck is\n             if Sdep.Table (D).Stamp /= Source.Table (Src).Stamp\n               and then not Source.Table (Src).All_Checksums_Match\n             then\n-               Error_Msg_Name_1 := ALIs.Table (A).Sfile;\n-               Error_Msg_Name_2 := Sdep.Table (D).Sfile;\n+               Error_Msg_File_1 := ALIs.Table (A).Sfile;\n+               Error_Msg_File_2 := Sdep.Table (D).Sfile;\n \n                --  Two styles of message, depending on whether or not\n                --  the updated file is the one that must be recompiled\n \n-               if Error_Msg_Name_1 = Error_Msg_Name_2 then\n+               if Error_Msg_File_1 = Error_Msg_File_2 then\n                   if Tolerate_Consistency_Errors then\n                      Error_Msg\n-                        (\"?% has been modified and should be recompiled\");\n+                        (\"?{ has been modified and should be recompiled\");\n                   else\n                      Error_Msg\n-                       (\"% has been modified and must be recompiled\");\n+                       (\"{ has been modified and must be recompiled\");\n                   end if;\n \n                else\n                   ALI_Path_Id :=\n                     Osint.Find_File ((ALIs.Table (A).Afile), Osint.Library);\n                   if Osint.Is_Readonly_Library (ALI_Path_Id) then\n                      if Tolerate_Consistency_Errors then\n-                        Error_Msg (\"?% should be recompiled\");\n-                        Error_Msg_Name_1 := ALI_Path_Id;\n-                        Error_Msg (\"?(% is obsolete and read-only)\");\n-\n+                        Error_Msg (\"?{ should be recompiled\");\n+                        Error_Msg_File_1 := ALI_Path_Id;\n+                        Error_Msg (\"?({ is obsolete and read-only)\");\n                      else\n-                        Error_Msg (\"% must be compiled\");\n-                        Error_Msg_Name_1 := ALI_Path_Id;\n-                        Error_Msg (\"(% is obsolete and read-only)\");\n+                        Error_Msg (\"{ must be compiled\");\n+                        Error_Msg_File_1 := ALI_Path_Id;\n+                        Error_Msg (\"({ is obsolete and read-only)\");\n                      end if;\n \n                   elsif Tolerate_Consistency_Errors then\n                      Error_Msg\n                        (\"?% should be recompiled (% has been modified)\");\n \n                   else\n-                     Error_Msg (\"% must be recompiled (% has been modified)\");\n+                     Error_Msg (\"{ must be recompiled ({ has been modified)\");\n                   end if;\n                end if;\n \n                if (not Tolerate_Consistency_Errors) and Verbose_Mode then\n-                  declare\n-                     Msg : constant String := \"% time stamp \";\n-                     Buf : String (1 .. Msg'Length + Time_Stamp_Length);\n-\n-                  begin\n-                     Buf (1 .. Msg'Length) := Msg;\n-                     Buf (Msg'Length + 1 .. Buf'Length) :=\n-                       String (Source.Table (Src).Stamp);\n-                     Error_Msg_Name_1 := Sdep.Table (D).Sfile;\n-                     Error_Msg (Buf);\n-                  end;\n+                  Error_Msg_File_1 := Sdep.Table (D).Sfile;\n+                  Error_Msg\n+                    (\"{ time stamp \" & String (Source.Table (Src).Stamp));\n \n-                  declare\n-                     Msg : constant String := \" conflicts with % timestamp \";\n-                     Buf : String (1 .. Msg'Length + Time_Stamp_Length);\n+                  Error_Msg_File_1 := Sdep.Table (D).Sfile;\n+                  --  Something wrong here, should be different file ???\n \n-                  begin\n-                     Buf (1 .. Msg'Length) := Msg;\n-                     Buf (Msg'Length + 1 .. Buf'Length) :=\n-                       String (Sdep.Table (D).Stamp);\n-                     Error_Msg_Name_1 := Sdep.Table (D).Sfile;\n-                     Error_Msg (Buf);\n-                  end;\n+                  Error_Msg\n+                    (\" conflicts with { timestamp \" &\n+                     String (Sdep.Table (D).Stamp));\n                end if;\n \n                --  Exit from the loop through Sdep entries once we find one\n@@ -299,11 +285,11 @@ package body Bcheck is\n                           and then\n                         ALIs.Table (A2).Task_Dispatching_Policy /= Policy\n                      then\n-                        Error_Msg_Name_1 := ALIs.Table (A1).Sfile;\n-                        Error_Msg_Name_2 := ALIs.Table (A2).Sfile;\n+                        Error_Msg_File_1 := ALIs.Table (A1).Sfile;\n+                        Error_Msg_File_2 := ALIs.Table (A2).Sfile;\n \n                         Consistency_Error_Msg\n-                          (\"% and % compiled with different task\" &\n+                          (\"{ and { compiled with different task\" &\n                            \" dispatching policies\");\n                         exit Find_Policy;\n                      end if;\n@@ -370,15 +356,15 @@ package body Bcheck is\n                      --  same partition.\n \n                      if Task_Dispatching_Policy_Specified /= ' ' then\n-                        Error_Msg_Name_1 := ALIs.Table (F).Sfile;\n-                        Error_Msg_Name_2 :=\n+                        Error_Msg_File_1 := ALIs.Table (F).Sfile;\n+                        Error_Msg_File_2 :=\n                           ALIs.Table (TDP_Pragma_Afile).Sfile;\n \n-                        Error_Msg_Nat_1  := DTK.PSD_Pragma_Line;\n+                        Error_Msg_Nat_1 := DTK.PSD_Pragma_Line;\n \n                         Consistency_Error_Msg\n-                          (\"Priority_Specific_Dispatching at %:#\" &\n-                           \" incompatible with Task_Dispatching_Policy at %\");\n+                          (\"Priority_Specific_Dispatching at {:#\" &\n+                           \" incompatible with Task_Dispatching_Policy at {\");\n                      end if;\n \n                      --  Ceiling_Locking must also be specified for a partition\n@@ -392,14 +378,14 @@ package body Bcheck is\n                            if ALIs.Table (A).Locking_Policy /= ' '\n                              and then ALIs.Table (A).Locking_Policy /= 'C'\n                            then\n-                              Error_Msg_Name_1 := ALIs.Table (F).Sfile;\n-                              Error_Msg_Name_2 := ALIs.Table (A).Sfile;\n+                              Error_Msg_File_1 := ALIs.Table (F).Sfile;\n+                              Error_Msg_File_2 := ALIs.Table (A).Sfile;\n \n                               Error_Msg_Nat_1  := DTK.PSD_Pragma_Line;\n \n                               Consistency_Error_Msg\n-                                (\"Priority_Specific_Dispatching at %:#\" &\n-                                 \" incompatible with Locking_Policy at %\");\n+                                (\"Priority_Specific_Dispatching at {:#\" &\n+                                 \" incompatible with Locking_Policy at {\");\n                            end if;\n                         end loop;\n                      end if;\n@@ -418,14 +404,14 @@ package body Bcheck is\n                               DTK.Dispatching_Policy\n \n                         then\n-                           Error_Msg_Name_1 :=\n+                           Error_Msg_File_1 :=\n                              ALIs.Table (PSD_Table (Prio).Afile).Sfile;\n-                           Error_Msg_Name_2 := ALIs.Table (F).Sfile;\n+                           Error_Msg_File_2 := ALIs.Table (F).Sfile;\n                            Error_Msg_Nat_1  := PSD_Table (Prio).Loc;\n                            Error_Msg_Nat_2  := DTK.PSD_Pragma_Line;\n \n                            Consistency_Error_Msg\n-                             (\"overlapping priority ranges at %:# and %:#\");\n+                             (\"overlapping priority ranges at {:# and {:#\");\n \n                            exit Find_Overlapping;\n                         end if;\n@@ -494,14 +480,14 @@ package body Bcheck is\n                               --  Issue warning, not one of the safe cases\n \n                               else\n-                                 Error_Msg_Name_1 := UR.Sfile;\n+                                 Error_Msg_File_1 := UR.Sfile;\n                                  Error_Msg\n-                                   (\"?% has dynamic elaboration checks \" &\n+                                   (\"?{ has dynamic elaboration checks \" &\n                                                                  \"and with's\");\n \n-                                 Error_Msg_Name_1 := WU.Sfile;\n+                                 Error_Msg_File_1 := WU.Sfile;\n                                  Error_Msg\n-                                   (\"?  % which has static elaboration \" &\n+                                   (\"?  { which has static elaboration \" &\n                                                                      \"checks\");\n \n                                  Warnings_Detected := Warnings_Detected - 1;\n@@ -535,11 +521,11 @@ package body Bcheck is\n             begin\n                for A2 in A1 + 1 .. ALIs.Last loop\n                   if ALIs.Table (A2).Float_Format /= Format then\n-                     Error_Msg_Name_1 := ALIs.Table (A1).Sfile;\n-                     Error_Msg_Name_2 := ALIs.Table (A2).Sfile;\n+                     Error_Msg_File_1 := ALIs.Table (A1).Sfile;\n+                     Error_Msg_File_2 := ALIs.Table (A2).Sfile;\n \n                      Consistency_Error_Msg\n-                       (\"% and % compiled with different \" &\n+                       (\"{ and { compiled with different \" &\n                         \"floating-point representations\");\n                      exit Find_Format;\n                   end if;\n@@ -614,13 +600,13 @@ package body Bcheck is\n                   Loc    (Inum) := Lnum;\n \n                elsif Istate (Inum) /= Stat then\n-                  Error_Msg_Name_1 := ALIs.Table (Afile (Inum)).Sfile;\n-                  Error_Msg_Name_2 := ALIs.Table (F).Sfile;\n+                  Error_Msg_File_1 := ALIs.Table (Afile (Inum)).Sfile;\n+                  Error_Msg_File_2 := ALIs.Table (F).Sfile;\n                   Error_Msg_Nat_1  := Loc (Inum);\n                   Error_Msg_Nat_2  := Lnum;\n \n                   Consistency_Error_Msg\n-                    (\"inconsistent interrupt states at %:# and %:#\");\n+                    (\"inconsistent interrupt states at {:# and {:#\");\n                end if;\n             end loop;\n          end loop;\n@@ -649,11 +635,11 @@ package body Bcheck is\n                   if ALIs.Table (A2).Locking_Policy /= ' ' and\n                      ALIs.Table (A2).Locking_Policy /= Policy\n                   then\n-                     Error_Msg_Name_1 := ALIs.Table (A1).Sfile;\n-                     Error_Msg_Name_2 := ALIs.Table (A2).Sfile;\n+                     Error_Msg_File_1 := ALIs.Table (A1).Sfile;\n+                     Error_Msg_File_2 := ALIs.Table (A2).Sfile;\n \n                      Consistency_Error_Msg\n-                       (\"% and % compiled with different locking policies\");\n+                       (\"{ and { compiled with different locking policies\");\n                      exit Find_Policy;\n                   end if;\n                end loop;\n@@ -733,11 +719,11 @@ package body Bcheck is\n                        and then\n                      ALIs.Table (A2).Queuing_Policy /= Policy\n                   then\n-                     Error_Msg_Name_1 := ALIs.Table (A1).Sfile;\n-                     Error_Msg_Name_2 := ALIs.Table (A2).Sfile;\n+                     Error_Msg_File_1 := ALIs.Table (A1).Sfile;\n+                     Error_Msg_File_2 := ALIs.Table (A2).Sfile;\n \n                      Consistency_Error_Msg\n-                       (\"% and % compiled with different queuing policies\");\n+                       (\"{ and { compiled with different queuing policies\");\n                      exit Find_Policy;\n                   end if;\n                end loop;\n@@ -786,7 +772,7 @@ package body Bcheck is\n                   --  in the case of a parameter restriction).\n \n                   declare\n-                     M1 : constant String := \"% has restriction \";\n+                     M1 : constant String := \"{ has restriction \";\n                      S  : constant String := Restriction_Id'Image (R);\n                      M2 : String (1 .. 200); -- big enough!\n                      P  : Integer;\n@@ -808,7 +794,7 @@ package body Bcheck is\n                         P := P + 5;\n                      end if;\n \n-                     Error_Msg_Name_1 := ALIs.Table (A).Sfile;\n+                     Error_Msg_File_1 := ALIs.Table (A).Sfile;\n                      Consistency_Error_Msg (M2 (1 .. P - 1));\n                      Consistency_Error_Msg\n                        (\"but the following files violate this restriction:\");\n@@ -858,8 +844,8 @@ package body Bcheck is\n \n                         if R in All_Boolean_Restrictions then\n                            Print_Restriction_File (R);\n-                           Error_Msg_Name_1 := T.Sfile;\n-                           Consistency_Error_Msg (\"  %\");\n+                           Error_Msg_File_1 := T.Sfile;\n+                           Consistency_Error_Msg (\"  {\");\n \n                         --  Case of Parameter restriction where violation\n                         --  count exceeds restriction value, print file\n@@ -871,12 +857,12 @@ package body Bcheck is\n                           Cumulative_Restrictions.Value (R)\n                         then\n                            Print_Restriction_File (R);\n-                           Error_Msg_Name_1 := T.Sfile;\n+                           Error_Msg_File_1 := T.Sfile;\n                            Error_Msg_Nat_1 := Int (T.Restrictions.Count (R));\n \n                            if T.Restrictions.Unknown (R) then\n                               Consistency_Error_Msg\n-                                (\"  % (count = at least #)\");\n+                                (\"  { (count = at least #)\");\n                            else\n                               Consistency_Error_Msg\n                                 (\"  % (count = #)\");\n@@ -895,7 +881,8 @@ package body Bcheck is\n \n       for ND in No_Deps.First .. No_Deps.Last loop\n          declare\n-            ND_Unit : constant Name_Id := No_Deps.Table (ND).No_Dep_Unit;\n+            ND_Unit : constant Name_Id :=\n+                        No_Deps.Table (ND).No_Dep_Unit;\n \n          begin\n             for J in ALIs.First .. ALIs.Last loop\n@@ -908,11 +895,13 @@ package body Bcheck is\n                         U : Unit_Record renames Units.Table (K);\n                      begin\n                         for L in U.First_With .. U.Last_With loop\n-                           if Same_Unit (Withs.Table (L).Uname, ND_Unit) then\n-                              Error_Msg_Name_1 := U.Uname;\n-                              Error_Msg_Name_2 := ND_Unit;\n+                           if Same_Unit\n+                             (Withs.Table (L).Uname, ND_Unit)\n+                           then\n+                              Error_Msg_File_1 := U.Sfile;\n+                              Error_Msg_Name_1 := ND_Unit;\n                               Consistency_Error_Msg\n-                                (\"unit & violates restriction \" &\n+                                (\"file { violates restriction \" &\n                                  \"No_Dependence => %\");\n                            end if;\n                         end loop;\n@@ -937,10 +926,10 @@ package body Bcheck is\n          if ALIs.Table (A1).Zero_Cost_Exceptions /=\n             ALIs.Table (ALIs.First).Zero_Cost_Exceptions\n          then\n-            Error_Msg_Name_1 := ALIs.Table (A1).Sfile;\n-            Error_Msg_Name_2 := ALIs.Table (ALIs.First).Sfile;\n+            Error_Msg_File_1 := ALIs.Table (A1).Sfile;\n+            Error_Msg_File_2 := ALIs.Table (ALIs.First).Sfile;\n \n-            Consistency_Error_Msg (\"% and % compiled with different \"\n+            Consistency_Error_Msg (\"{ and { compiled with different \"\n                                             & \"exception handling mechanisms\");\n          end if;\n       end loop Check_Mechanism;\n@@ -963,13 +952,13 @@ package body Bcheck is\n             for K in Boolean loop\n                if K then\n                   Name_Buffer (Name_Len) := 'b';\n-\n                else\n                   Name_Buffer (Name_Len) := 's';\n                end if;\n \n                declare\n-                  Info : constant Int := Get_Name_Table_Info (Name_Find);\n+                  Unit : constant Unit_Name_Type := Name_Find;\n+                  Info : constant Int := Get_Name_Table_Info (Unit);\n \n                begin\n                   if Info /= 0 then\n@@ -1010,11 +999,11 @@ package body Bcheck is\n            or else ALIs.Table (A).Ver          (1 .. VL) /=\n                    ALIs.Table (ALIs.First).Ver (1 .. VL)\n          then\n-            Error_Msg_Name_1 := ALIs.Table (A).Sfile;\n-            Error_Msg_Name_2 := ALIs.Table (ALIs.First).Sfile;\n+            Error_Msg_File_1 := ALIs.Table (A).Sfile;\n+            Error_Msg_File_2 := ALIs.Table (ALIs.First).Sfile;\n \n             Consistency_Error_Msg\n-               (\"% and % compiled with different GNAT versions\");\n+               (\"{ and { compiled with different GNAT versions\");\n          end if;\n       end loop;\n    end Check_Versions;\n@@ -1051,7 +1040,7 @@ package body Bcheck is\n    -- Same_Unit --\n    ---------------\n \n-   function Same_Unit (U1 : Name_Id; U2 : Name_Id) return Boolean is\n+   function Same_Unit (U1 : Unit_Name_Type; U2 : Name_Id) return Boolean is\n    begin\n       --  Note, the string U1 has a terminating %s or %b, U2 does not\n "}, {"sha": "7479e51d346dc71120ad55e9998563df474ec57e", "filename": "gcc/ada/binde.adb", "status": "modified", "additions": 38, "deletions": 32, "changes": 70, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbinde.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbinde.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbinde.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -266,7 +266,7 @@ package body Binde is\n \n    procedure Elab_Error_Msg (S : Successor_Id);\n    --  Given a successor link, outputs an error message of the form\n-   --  \"& must be elaborated before & ...\" where ... is the reason.\n+   --  \"$ must be elaborated before $ ...\" where ... is the reason.\n \n    procedure Gather_Dependencies;\n    --  Compute dependencies, building the Succ and UNR tables\n@@ -911,17 +911,17 @@ package body Binde is\n \n       --  Here we want to generate output\n \n-      Error_Msg_Name_1 := Units.Table (SL.Before).Uname;\n+      Error_Msg_Unit_1 := Units.Table (SL.Before).Uname;\n \n       if SL.Elab_Body then\n-         Error_Msg_Name_2 := Units.Table (Corresponding_Body (SL.After)).Uname;\n+         Error_Msg_Unit_2 := Units.Table (Corresponding_Body (SL.After)).Uname;\n       else\n-         Error_Msg_Name_2 := Units.Table (SL.After).Uname;\n+         Error_Msg_Unit_2 := Units.Table (SL.After).Uname;\n       end if;\n \n-      Error_Msg_Output (\"  & must be elaborated before &\", Info => True);\n+      Error_Msg_Output (\"  $ must be elaborated before $\", Info => True);\n \n-      Error_Msg_Name_1 := Units.Table (SL.Reason_Unit).Uname;\n+      Error_Msg_Unit_1 := Units.Table (SL.Reason_Unit).Uname;\n \n       case SL.Reason is\n          when Withed =>\n@@ -931,30 +931,30 @@ package body Binde is\n \n          when Elab =>\n             Error_Msg_Output\n-              (\"     reason: pragma Elaborate in unit &\",\n+              (\"     reason: pragma Elaborate in unit $\",\n                Info => True);\n \n          when Elab_All =>\n             Error_Msg_Output\n-              (\"     reason: pragma Elaborate_All in unit &\",\n+              (\"     reason: pragma Elaborate_All in unit $\",\n                Info => True);\n \n          when Elab_All_Desirable =>\n             Error_Msg_Output\n-              (\"     reason: implicit Elaborate_All in unit &\",\n+              (\"     reason: implicit Elaborate_All in unit $\",\n                Info => True);\n \n             Error_Msg_Output\n-              (\"     recompile & with -gnatwl for full details\",\n+              (\"     recompile $ with -gnatwl for full details\",\n                Info => True);\n \n          when Elab_Desirable =>\n             Error_Msg_Output\n-              (\"     reason: implicit Elaborate in unit &\",\n+              (\"     reason: implicit Elaborate in unit $\",\n                Info => True);\n \n             Error_Msg_Output\n-              (\"     recompile & with -gnatwl for full details\",\n+              (\"     recompile $ with -gnatwl for full details\",\n                Info => True);\n \n          when Spec_First =>\n@@ -966,19 +966,21 @@ package body Binde is\n       Write_Elab_All_Chain (S);\n \n       if SL.Elab_Body then\n-         Error_Msg_Name_1 := Units.Table (SL.Before).Uname;\n-         Error_Msg_Name_2 := Units.Table (SL.After).Uname;\n+         Error_Msg_Unit_1 := Units.Table (SL.Before).Uname;\n+         Error_Msg_Unit_2 := Units.Table (SL.After).Uname;\n          Error_Msg_Output\n-           (\"  & must therefore be elaborated before &\",\n+           (\"  $ must therefore be elaborated before $\",\n             True);\n \n-         Error_Msg_Name_1 := Units.Table (SL.After).Uname;\n+         Error_Msg_Unit_1 := Units.Table (SL.After).Uname;\n          Error_Msg_Output\n-           (\"     (because & has a pragma Elaborate_Body)\",\n+           (\"     (because $ has a pragma Elaborate_Body)\",\n             True);\n       end if;\n \n-      Write_Eol;\n+      if not Zero_Formatting then\n+         Write_Eol;\n+      end if;\n    end Elab_Error_Msg;\n \n    ---------------------\n@@ -1155,9 +1157,9 @@ package body Binde is\n                   --  obsolete unit with's a previous (now disappeared) spec.\n \n                   if Get_Name_Table_Info (Withs.Table (W).Uname) = 0 then\n-                     Error_Msg_Name_1 := Units.Table (U).Sfile;\n-                     Error_Msg_Name_2 := Withs.Table (W).Uname;\n-                     Error_Msg (\"% depends on & which no longer exists\");\n+                     Error_Msg_File_1 := Units.Table (U).Sfile;\n+                     Error_Msg_Unit_1 := Withs.Table (W).Uname;\n+                     Error_Msg (\"{ depends on $ which no longer exists\");\n                      goto Next_With;\n                   end if;\n \n@@ -1403,11 +1405,12 @@ package body Binde is\n \n    procedure Write_Dependencies is\n    begin\n-      Write_Eol;\n-      Write_Str\n-        (\"                 ELABORATION ORDER DEPENDENCIES\");\n-      Write_Eol;\n-      Write_Eol;\n+      if not Zero_Formatting then\n+         Write_Eol;\n+         Write_Str (\"                 ELABORATION ORDER DEPENDENCIES\");\n+         Write_Eol;\n+         Write_Eol;\n+      end if;\n \n       Info_Prefix_Suppress := True;\n \n@@ -1416,7 +1419,10 @@ package body Binde is\n       end loop;\n \n       Info_Prefix_Suppress := False;\n-      Write_Eol;\n+\n+      if not Zero_Formatting then\n+         Write_Eol;\n+      end if;\n    end Write_Dependencies;\n \n    --------------------------\n@@ -1437,8 +1443,8 @@ package body Binde is\n          L := ST.Elab_All_Link;\n          while L /= No_Elab_All_Link loop\n             Nam := Elab_All_Entries.Table (L).Needed_By;\n-            Error_Msg_Name_1 := Nam;\n-            Error_Msg_Output (\"        &\", Info => True);\n+            Error_Msg_Unit_1 := Nam;\n+            Error_Msg_Output (\"        $\", Info => True);\n \n             Get_Name_String (Nam);\n \n@@ -1473,8 +1479,8 @@ package body Binde is\n             L := Elab_All_Entries.Table (L).Next_Elab;\n          end loop;\n \n-         Error_Msg_Name_1 := After;\n-         Error_Msg_Output (\"        &\", Info => True);\n+         Error_Msg_Unit_1 := After;\n+         Error_Msg_Output (\"        $\", Info => True);\n       end if;\n    end Write_Elab_All_Chain;\n "}, {"sha": "949c377bcd0e09d37f12c9a51f6e562d729a0d33", "filename": "gcc/ada/binderr.adb", "status": "modified", "additions": 31, "deletions": 16, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbinderr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbinderr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbinderr.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2002 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,10 +24,9 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Butil;   use Butil;\n-with Namet;   use Namet;\n-with Opt;     use Opt;\n-with Output;  use Output;\n+with Butil;  use Butil;\n+with Opt;    use Opt;\n+with Output; use Output;\n \n package body Binderr is\n \n@@ -95,8 +94,10 @@ package body Binderr is\n    ----------------------\n \n    procedure Error_Msg_Output (Msg : String; Info : Boolean) is\n-      Use_Second_Name : Boolean := False;\n+      Use_Second_File : Boolean := False;\n+      Use_Second_Unit : Boolean := False;\n       Use_Second_Nat  : Boolean := False;\n+      Warning         : Boolean := False;\n \n    begin\n       if Warnings_Detected + Errors_Detected > Maximum_Errors then\n@@ -105,7 +106,16 @@ package body Binderr is\n          return;\n       end if;\n \n-      if Msg (Msg'First) = '?' then\n+      --  First, check for warnings\n+\n+      for J in Msg'Range loop\n+         if Msg (J) = '?' then\n+            Warning := True;\n+            exit;\n+         end if;\n+      end loop;\n+\n+      if Warning then\n          Write_Str (\"warning: \");\n       elsif Info then\n          if not Info_Prefix_Suppress then\n@@ -117,26 +127,31 @@ package body Binderr is\n \n       for J in Msg'Range loop\n          if Msg (J) = '%' then\n+            Get_Name_String (Error_Msg_Name_1);\n+            Write_Char ('\"');\n+            Write_Str (Name_Buffer (1 .. Name_Len));\n+            Write_Char ('\"');\n \n-            if Use_Second_Name then\n-               Get_Name_String (Error_Msg_Name_2);\n+         elsif Msg (J) = '{' then\n+            if Use_Second_File then\n+               Get_Name_String (Error_Msg_File_2);\n             else\n-               Use_Second_Name := True;\n-               Get_Name_String (Error_Msg_Name_1);\n+               Use_Second_File := True;\n+               Get_Name_String (Error_Msg_File_1);\n             end if;\n \n             Write_Char ('\"');\n             Write_Str (Name_Buffer (1 .. Name_Len));\n             Write_Char ('\"');\n \n-         elsif Msg (J) = '&' then\n+         elsif Msg (J) = '$' then\n             Write_Char ('\"');\n \n-            if Use_Second_Name then\n-               Write_Unit_Name (Error_Msg_Name_2);\n+            if Use_Second_Unit then\n+               Write_Unit_Name (Error_Msg_Unit_2);\n             else\n-               Use_Second_Name := True;\n-               Write_Unit_Name (Error_Msg_Name_1);\n+               Use_Second_Unit := True;\n+               Write_Unit_Name (Error_Msg_Unit_1);\n             end if;\n \n             Write_Char ('\"');"}, {"sha": "b4efa23465f18f276e8ecfc646453311dc45e55c", "filename": "gcc/ada/binderr.ads", "status": "modified", "additions": 21, "deletions": 13, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbinderr.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbinderr.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbinderr.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2003 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,6 +27,7 @@\n --  This package contains the routines to output error messages for the binder\n --  and also the routines for handling fatal error conditions in the binder.\n \n+with Namet; use Namet;\n with Types; use Types;\n \n package Binderr is\n@@ -51,19 +52,19 @@ package Binderr is\n    --  appear which cause the error message circuit to modify the given\n    --  string as follows:\n \n-   --    Insertion character % (Percent: insert file name from Names table)\n-   --      The character % is replaced by the text for the file name specified\n-   --      by the Name_Id value stored in Error_Msg_Name_1. The name is always\n-   --      enclosed in quotes. A second % may appear in a single message in\n-   --      which case it is similarly replaced by the name which is specified\n-   --      by the Name_Id value stored in Error_Msg_Name_2.\n+   --    Insertion character { (Left brace: insert file name from Names table)\n+   --      The character { is replaced by the text for the file name specified\n+   --      by the File_Name_Type value stored in Error_Msg_File_1. The name is\n+   --      always enclosed in quotes. A second % may appear in a single message\n+   --      in which case it is similarly replaced by the name which is\n+   --      specified by the File_Name_Type value stored in Error_Msg_File_2.\n \n-   --    Insertion character & (Ampersand: insert unit name from Names table)\n+   --    Insertion character $ (Dollar: insert unit name from Names table)\n    --      The character & is replaced by the text for the unit name specified\n-   --      by the Name_Id value stored in Error_Msg_Name_1. The name is always\n+   --      by the Name_Id value stored in Error_Msg_Unit_1. The name is always\n    --      enclosed in quotes. A second & may appear in a single message in\n    --      which case it is similarly replaced by the name which is specified\n-   --      by the Name_Id value stored in Error_Msg_Name_2.\n+   --      by the Name_Id value stored in Error_Msg_Unit_2.\n \n    --    Insertion character # (Pound: insert non-negative number in decimal)\n    --      The character # is replaced by the contents of Error_Msg_Nat_1\n@@ -83,11 +84,18 @@ package Binderr is\n    --  passed to the error message routine for insertion sequences described\n    --  above. The reason these are passed globally is that the insertion\n    --  mechanism is essentially an untyped one in which the appropriate\n-   --  variables are set dependingon the specific insertion characters used.\n+   --  variables are set depending on the specific insertion characters used.\n \n    Error_Msg_Name_1 : Name_Id;\n-   Error_Msg_Name_2 : Name_Id;\n-   --  Name_Id values for % insertion characters in message\n+   --  Name_Id value for % insertion characters in message\n+\n+   Error_Msg_File_1 : File_Name_Type;\n+   Error_Msg_File_2 : File_Name_Type;\n+   --  Name_Id values for { insertion characters in message\n+\n+   Error_Msg_Unit_1 : Unit_Name_Type;\n+   Error_Msg_Unit_2 : Unit_Name_Type;\n+   --  Name_Id values for $ insertion characters in message\n \n    Error_Msg_Nat_1 : Nat;\n    Error_Msg_Nat_2 : Nat;"}, {"sha": "dbe0e8e71656ad062b23652c8255f66ae31b9f3b", "filename": "gcc/ada/butil.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbutil.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbutil.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbutil.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,7 +24,6 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Namet;    use Namet;\n with Output;   use Output;\n with Targparm; use Targparm;\n "}, {"sha": "f0f6f8afcc8534fa81d0a94512bc538638b13fb4", "filename": "gcc/ada/butil.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbutil.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fbutil.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fbutil.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,7 +24,7 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Types; use Types;\n+with Namet; use Namet;\n \n package Butil is\n "}, {"sha": "ec85d57e0a73760d4370b4b6d047823d680a9d15", "filename": "gcc/ada/err_vars.ads", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferr_vars.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferr_vars.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferr_vars.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,6 +27,7 @@\n --  This package contains variables common to error reporting packages\n --  including Errout and Prj.Err.\n \n+with Namet; use Namet;\n with Types; use Types;\n with Uintp; use Uintp;\n \n@@ -120,9 +121,14 @@ package Err_Vars is\n    Error_Msg_Name_3 : Name_Id;\n    --  Name_Id values for % insertion characters in message\n \n-   Error_Msg_Unit_1 : Name_Id;\n-   Error_Msg_Unit_2 : Name_Id;\n-   --  Name_Id values for $ insertion characters in message\n+   Error_Msg_File_1 : File_Name_Type;\n+   Error_Msg_File_2 : File_Name_Type;\n+   Error_Msg_File_3 : File_Name_Type;\n+   --  File_Name_Type values for { insertion characters in message\n+\n+   Error_Msg_Unit_1 : Unit_Name_Type;\n+   Error_Msg_Unit_2 : Unit_Name_Type;\n+   --  Unit_Name_Type values for $ insertion characters in message\n \n    Error_Msg_Node_1 : Node_Id;\n    Error_Msg_Node_2 : Node_Id;"}, {"sha": "9c2a614f78d4f165b949f9dbd6b4e1cdc7c9e58b", "filename": "gcc/ada/erroutc.adb", "status": "modified", "additions": 46, "deletions": 11, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferroutc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferroutc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferroutc.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -673,32 +673,32 @@ package body Erroutc is\n \n    procedure Set_Msg_Insertion_File_Name is\n    begin\n-      if Error_Msg_Name_1 = No_Name then\n+      if Error_Msg_File_1 = No_File then\n          null;\n \n-      elsif Error_Msg_Name_1 = Error_Name then\n+      elsif Error_Msg_File_1 = Error_File_Name then\n          Set_Msg_Blank;\n          Set_Msg_Str (\"<error>\");\n \n       else\n          Set_Msg_Blank;\n-         Get_Name_String (Error_Msg_Name_1);\n+         Get_Name_String (Error_Msg_File_1);\n          Set_Msg_Quote;\n          Set_Msg_Name_Buffer;\n          Set_Msg_Quote;\n       end if;\n \n-      --  The following assignments ensure that the second and third percent\n-      --  insertion characters will correspond to the Error_Msg_Name_2 and\n-      --  Error_Msg_Name_3 as required. We suppress possible validity checks in\n-      --  case operating in -gnatVa mode, and Error_Msg_Name_2/3 is not needed\n-      --  and has not been set.\n+      --  The following assignments ensure that the second and third {\n+      --  insertion characters will correspond to the Error_Msg_File_2 and\n+      --  Error_Msg_File_3 values and We suppress possible validity checks in\n+      --  case operating in -gnatVa mode, and Error_Msg_File_2 or\n+      --  Error_Msg_File_3 is not needed and has not been set.\n \n       declare\n          pragma Suppress (Range_Check);\n       begin\n-         Error_Msg_Name_1 := Error_Msg_Name_2;\n-         Error_Msg_Name_2 := Error_Msg_Name_3;\n+         Error_Msg_File_1 := Error_Msg_File_2;\n+         Error_Msg_File_2 := Error_Msg_File_3;\n       end;\n    end Set_Msg_Insertion_File_Name;\n \n@@ -857,6 +857,41 @@ package body Erroutc is\n       end;\n    end Set_Msg_Insertion_Name;\n \n+   ------------------------------------\n+   -- Set_Msg_Insertion_Name_Literal --\n+   ------------------------------------\n+\n+   procedure Set_Msg_Insertion_Name_Literal is\n+   begin\n+      if Error_Msg_Name_1 = No_Name then\n+         null;\n+\n+      elsif Error_Msg_Name_1 = Error_Name then\n+         Set_Msg_Blank;\n+         Set_Msg_Str (\"<error>\");\n+\n+      else\n+         Set_Msg_Blank;\n+         Get_Name_String (Error_Msg_Name_1);\n+         Set_Msg_Quote;\n+         Set_Msg_Name_Buffer;\n+         Set_Msg_Quote;\n+      end if;\n+\n+      --  The following assignments ensure that the second and third % or %%\n+      --  insertion characters will correspond to the Error_Msg_Name_2 and\n+      --  Error_Msg_Name_3 values and We suppress possible validity checks in\n+      --  case operating in -gnatVa mode, and Error_Msg_Name_2 or\n+      --  Error_Msg_Name_3 is not needed and has not been set.\n+\n+      declare\n+         pragma Suppress (Range_Check);\n+      begin\n+         Error_Msg_Name_1 := Error_Msg_Name_2;\n+         Error_Msg_Name_2 := Error_Msg_Name_3;\n+      end;\n+   end Set_Msg_Insertion_Name_Literal;\n+\n    -------------------------------------\n    -- Set_Msg_Insertion_Reserved_Name --\n    -------------------------------------"}, {"sha": "292a9577d9ca1098ee9459cefac60bc1bbeb08a5", "filename": "gcc/ada/erroutc.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferroutc.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferroutc.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferroutc.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -381,6 +381,8 @@ package Erroutc is\n    --  location to be referenced, and Flag is the location at which the\n    --  flag is posted (used to determine whether to add \"in file xxx\")\n \n+   procedure Set_Msg_Insertion_Name_Literal;\n+\n    procedure Set_Msg_Insertion_Name;\n    --  Handle name insertion (% insertion character)\n "}, {"sha": "f877fafe228d28a109a5b94df5fc40a371e4b8e7", "filename": "gcc/ada/errutil.adb", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferrutil.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferrutil.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrutil.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1991-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1991-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -681,7 +681,12 @@ package body Errutil is\n          --  Check for insertion character\n \n          if C = '%' then\n-            Set_Msg_Insertion_Name;\n+            if P <= Text'Last and then Text (P) = '%' then\n+               P := P + 1;\n+               Set_Msg_Insertion_Name_Literal;\n+            else\n+               Set_Msg_Insertion_Name;\n+            end if;\n \n          elsif C = '$' then\n "}, {"sha": "b79dbe917fdb79a73c9d2e0e695159896c14e123", "filename": "gcc/ada/errutil.ads", "status": "modified", "additions": 2, "deletions": 96, "changes": 98, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferrutil.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ferrutil.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrutil.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2002-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2002-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -49,101 +49,7 @@ package Errutil is\n    --  and the special characters space, comma, period, colon and semicolon,\n    --  apostrophe and parentheses. Special insertion characters can also\n    --  appear which cause the error message circuit to modify the given\n-   --  string as follows:\n-\n-   --    Ignored insertion characters: the following characters, used as\n-   --      insertion characters by Errout are ignored: '$', '&', and '}'.\n-   --      If present in an error message, they are not output and are not\n-   --      replaced by any text.\n-\n-   --    Insertion character % (Percent: insert name from Names table)\n-   --      The character % is replaced by the text for the name specified by\n-   --      the Name_Id value stored in Error_Msg_Name_1. A blank precedes\n-   --      the name if it is preceded by a non-blank character other than a\n-   --      left parenthesis. The name is enclosed in quotes unless manual\n-   --      quotation mode is set. If the Name_Id is set to No_Name, then\n-   --      no insertion occurs; if the Name_Id is set to Error_Name, then\n-   --      the string <error> is inserted. A second and third % may appear\n-   --      in a single message, similarly replaced by the names which are\n-   --      specified by the Name_Id values stored in Error_Msg_Name_2 and\n-   --      Error_Msg_Name_3. The names are decoded and cased according to\n-   --      the current identifier casing mode.\n-\n-   --    Insertion character { (Left brace: insert literally from names table)\n-   --      The character { is treated similarly to %, except that the\n-   --      name is output literally as stored in the names table without\n-   --      adjusting the casing. This can be used for file names and in\n-   --      other situations where the name string is to be output unchanged.\n-\n-   --    Insertion character * (Asterisk, insert reserved word name)\n-   --      The insertion character * is treated exactly like % except that\n-   --      the resulting name is cased according to the default conventions\n-   --      for reserved words (see package Scans).\n-\n-   --    Insertion character # (Pound: insert line number reference)\n-   --      The character # is replaced by the string indicating the source\n-   --      position stored in Error_Msg_Sloc. There are two cases:\n-   --\n-   --        for locations in current file:  at line nnn:ccc\n-   --        for locations in other files:   at filename:nnn:ccc\n-   --\n-   --      By convention, the # insertion character is only used at the end\n-   --      of an error message, so the above strings only appear as the last\n-   --      characters of an error message.\n-\n-   --    Insertion character @ (At: insert column number reference)\n-   --      The character @ is replaced by null if the RM_Column_Check mode is\n-   --      off (False). If the switch is on (True), then @ is replaced by the\n-   --      text string \" in column nnn\" where nnn is the decimal representation\n-   --      of the column number stored in Error_Msg_Col plus one (the plus one\n-   --      is because the number is stored 0-origin and displayed 1-origin).\n-\n-   --    Insertion character ^ (Carret: insert integer value)\n-   --      The character ^ is replaced by the decimal conversion of the Uint\n-   --      value stored in Error_Msg_Uint_1, with a possible leading minus.\n-   --      A second ^ may occur in the message, in which case it is replaced\n-   --      by the decimal conversion of the Uint value in Error_Msg_Uint_2.\n-\n-   --    Insertion character ! (Exclamation: unconditional message)\n-   --      The character ! appearing as the last character of a message makes\n-   --      the message unconditional which means that it is output even if it\n-   --      would normally be suppressed.\n-\n-   --    Insertion character ? (Question: warning message)\n-   --      The character ? appearing anywhere in a message makes the message\n-   --      a warning instead of a normal error message, and the text of the\n-   --      message will be preceded by \"Warning:\" instead of \"Error:\" The\n-   --      handling of warnings if further controlled by the Warning_Mode\n-   --      option (-w switch), see package Opt for further details, and\n-   --      also by the current setting from pragma Warnings. This pragma\n-   --      applies only to warnings issued from the semantic phase (not\n-   --      the parser), but currently all relevant warnings are posted\n-   --      by the semantic phase anyway. Messages starting with (style)\n-   --      are also treated as warning messages.\n-\n-   --    Insertion character A-Z (Upper case letter: Ada reserved word)\n-   --      If two or more upper case letters appear in the message, they are\n-   --      taken as an Ada reserved word, and are converted to the default\n-   --      case for reserved words (see Scans package spec). Surrounding\n-   --      quotes are added unless manual quotation mode is currently set.\n-\n-   --    Insertion character ` (Backquote: set manual quotation mode)\n-   --      The backquote character always appears in pairs. Each backquote\n-   --      of the pair is replaced by a double quote character. In addition,\n-   --      Any reserved keywords, or name insertions between these backquotes\n-   --      are not surrounded by the usual automatic double quotes. See the\n-   --      section below on manual quotation mode for further details.\n-\n-   --    Insertion character ' (Quote: literal character)\n-   --      Precedes a character which is placed literally into the message.\n-   --      Used to insert characters into messages that are one of the\n-   --      insertion characters defined here.\n-\n-   --    Insertion character \\ (Backslash: continuation message)\n-   --      Indicates that the message is a continuation of a message\n-   --      previously posted. This is used to ensure that such groups\n-   --      of messages are treated as a unit. The \\ character must be\n-   --      the first character of the message text.\n+   --  string. For a full list of these, see the spec of errout.\n \n    -----------------------------------------------------\n    -- Format of Messages and Manual Quotation Control --"}, {"sha": "8d7dce3b210fe1c5d9ab8b89c3ff1e873dfcdc65", "filename": "gcc/ada/exp_tss.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fexp_tss.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fexp_tss.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_tss.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -29,7 +29,6 @@ with Einfo;    use Einfo;\n with Elists;   use Elists;\n with Exp_Util; use Exp_Util;\n with Lib;      use Lib;\n-with Namet;    use Namet;\n with Sem_Util; use Sem_Util;\n with Sinfo;    use Sinfo;\n "}, {"sha": "5e290be754225989f09b2a22c86d888614fa30f1", "filename": "gcc/ada/exp_tss.ads", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fexp_tss.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fexp_tss.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_tss.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,6 +26,7 @@\n \n --  Type Support Subprogram (TSS) handling\n \n+with Namet; use Namet;\n with Types; use Types;\n \n package Exp_Tss is"}, {"sha": "381ef27215f59e13df13873b5dc2885710cb83d7", "filename": "gcc/ada/fmap.adb", "status": "modified", "additions": 56, "deletions": 55, "changes": 111, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffmap.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffmap.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffmap.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---            Copyright (C) 2001-2006, Free Software Foundation, Inc.       --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,12 +24,13 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with GNAT.OS_Lib; use GNAT.OS_Lib;\n-with Namet;       use Namet;\n-with Opt;         use Opt;\n-with Osint;       use Osint;\n-with Output;      use Output;\n+with Opt;    use Opt;\n+with Osint;  use Osint;\n+with Output; use Output;\n with Table;\n+with Types;  use Types;\n+\n+with System.OS_Lib; use System.OS_Lib;\n \n with Unchecked_Conversion;\n \n@@ -91,6 +92,9 @@ package body Fmap is\n    --  Hash table to map unit names to file names. Used in conjunction with\n    --  table File_Mapping above.\n \n+   function Hash (F : File_Name_Type) return Header_Num;\n+   --  Function used to compute hash of file name\n+\n    package File_Hash_Table is new GNAT.HTable.Simple_HTable (\n      Header_Num => Header_Num,\n      Element    => Int,\n@@ -115,7 +119,7 @@ package body Fmap is\n    -- Add_Forbidden_File_Name --\n    -----------------------------\n \n-   procedure Add_Forbidden_File_Name (Name : Name_Id) is\n+   procedure Add_Forbidden_File_Name (Name : File_Name_Type) is\n    begin\n       Forbidden_Names.Set (Name, True);\n    end Add_Forbidden_File_Name;\n@@ -144,6 +148,11 @@ package body Fmap is\n    -- Hash --\n    ----------\n \n+   function Hash (F : File_Name_Type) return Header_Num is\n+   begin\n+      return Header_Num (Int (F) rem Header_Num'Range_Length);\n+   end Hash;\n+\n    function Hash (F : Unit_Name_Type) return Header_Num is\n    begin\n       return Header_Num (Int (F) rem Header_Num'Range_Length);\n@@ -163,16 +172,20 @@ package body Fmap is\n       Last  : Natural  := 0;\n \n       Uname : Unit_Name_Type;\n-      Fname : Name_Id;\n-      Pname : Name_Id;\n-\n-      The_Mapping : Mapping;\n+      Fname : File_Name_Type;\n+      Pname : File_Name_Type;\n \n-      procedure Empty_Tables (Warning : Boolean := True);\n+      procedure Empty_Tables;\n       --  Remove all entries in case of incorrect mapping file\n \n-      function Find_Name return Name_Id;\n-      --  Return Error_Name for \"/\", otherwise call Name_Find\n+      function Find_File_Name return File_Name_Type;\n+      --  Return Error_File_Name for \"/\", otherwise call Name_Find\n+      --  What is this about, explanation required ???\n+\n+      function Find_Unit_Name return Unit_Name_Type;\n+      --  Return Error_Unit_Name for \"/\", otherwise call Name_Find\n+      --  Even more mysterious??? function appeared when Find_Name was split\n+      --  for the two types, but this routine is definitely called!\n \n       procedure Get_Line;\n       --  Get a line from the mapping file\n@@ -185,34 +198,39 @@ package body Fmap is\n       -- Empty_Tables --\n       ------------------\n \n-      procedure Empty_Tables (Warning : Boolean := True) is\n+      procedure Empty_Tables is\n       begin\n-         if Warning then\n-            Write_Str (\"mapping file \"\"\");\n-            Write_Str (File_Name);\n-            Write_Line (\"\"\" is not taken into account\");\n-         end if;\n-\n          Unit_Hash_Table.Reset;\n          File_Hash_Table.Reset;\n          Path_Mapping.Set_Last (0);\n          File_Mapping.Set_Last (0);\n          Last_In_Table := 0;\n       end Empty_Tables;\n \n-      ---------------\n-      -- Find_Name --\n-      ---------------\n+      --------------------\n+      -- Find_File_Name --\n+      --------------------\n+\n+      --  Why is only / illegal, why not \\ on windows ???\n \n-      function Find_Name return Name_Id is\n+      function Find_File_Name return File_Name_Type is\n       begin\n          if Name_Buffer (1 .. Name_Len) = \"/\" then\n-            return Error_Name;\n-\n+            return Error_File_Name;\n          else\n             return Name_Find;\n          end if;\n-      end Find_Name;\n+      end Find_File_Name;\n+\n+      --------------------\n+      -- Find_Unit_Name --\n+      --------------------\n+\n+      function Find_Unit_Name return Unit_Name_Type is\n+      begin\n+         return Unit_Name_Type (Find_File_Name);\n+         --  very odd ???\n+      end Find_Unit_Name;\n \n       --------------\n       -- Get_Line --\n@@ -261,10 +279,10 @@ package body Fmap is\n          Write_Line (\"\"\" is truncated\");\n       end Report_Truncated;\n \n-   --  Start of procedure Initialize\n+   --  Start of processing for Initialize\n \n    begin\n-      Empty_Tables (Warning => False);\n+      Empty_Tables;\n       Name_Len := File_Name'Length;\n       Name_Buffer (1 .. Name_Len) := File_Name;\n       Read_Source_File (Name_Enter, 0, Hi, Src, Config);\n@@ -299,7 +317,7 @@ package body Fmap is\n \n             Name_Len := Last - First + 1;\n             Name_Buffer (1 .. Name_Len) := SP (First .. Last);\n-            Uname := Find_Name;\n+            Uname := Find_Unit_Name;\n \n             --  Get the file name\n \n@@ -316,7 +334,7 @@ package body Fmap is\n             Name_Len := Last - First + 1;\n             Name_Buffer (1 .. Name_Len) := SP (First .. Last);\n             Canonical_Case_File_Name (Name_Buffer (1 .. Name_Len));\n-            Fname := Find_Name;\n+            Fname := Find_File_Name;\n \n             --  Get the path name\n \n@@ -332,32 +350,16 @@ package body Fmap is\n \n             Name_Len := Last - First + 1;\n             Name_Buffer (1 .. Name_Len) := SP (First .. Last);\n-            Pname := Find_Name;\n+            Pname := Find_File_Name;\n \n             --  Check for duplicate entries\n \n             if Unit_Hash_Table.Get (Uname) /= No_Entry then\n-               Write_Str (\"warning: duplicate entry \"\"\");\n-               Write_Str (Get_Name_String (Uname));\n-               Write_Str (\"\"\" in mapping file \"\"\");\n-               Write_Str (File_Name);\n-               Write_Line (\"\"\"\");\n-               The_Mapping := File_Mapping.Table (Unit_Hash_Table.Get (Uname));\n-               Write_Line (Get_Name_String (The_Mapping.Uname));\n-               Write_Line (Get_Name_String (The_Mapping.Fname));\n                Empty_Tables;\n                return;\n             end if;\n \n             if File_Hash_Table.Get (Fname) /= No_Entry then\n-               Write_Str (\"warning: duplicate entry \"\"\");\n-               Write_Str (Get_Name_String (Fname));\n-               Write_Str (\"\"\" in mapping file \"\"\");\n-               Write_Str (File_Name);\n-               Write_Line (\"\"\"\");\n-               The_Mapping := Path_Mapping.Table (File_Hash_Table.Get (Fname));\n-               Write_Line (Get_Name_String (The_Mapping.Uname));\n-               Write_Line (Get_Name_String (The_Mapping.Fname));\n                Empty_Tables;\n                return;\n             end if;\n@@ -371,7 +373,6 @@ package body Fmap is\n       --  Record the length of the two mapping tables\n \n       Last_In_Table := File_Mapping.Last;\n-\n    end Initialize;\n \n    ----------------------\n@@ -398,7 +399,7 @@ package body Fmap is\n \n    begin\n       if Forbidden_Names.Get (File) then\n-         return Error_Name;\n+         return Error_File_Name;\n       end if;\n \n       Index := File_Hash_Table.Get (File);\n@@ -414,7 +415,7 @@ package body Fmap is\n    -- Remove_Forbidden_File_Name --\n    --------------------------------\n \n-   procedure Remove_Forbidden_File_Name (Name : Name_Id) is\n+   procedure Remove_Forbidden_File_Name (Name : File_Name_Type) is\n    begin\n       Forbidden_Names.Set (Name, False);\n    end Remove_Forbidden_File_Name;\n@@ -506,9 +507,9 @@ package body Fmap is\n             end if;\n \n             for Unit in Last_In_Table + 1 .. File_Mapping.Last loop\n-               Put_Line (File_Mapping.Table (Unit).Uname);\n-               Put_Line (File_Mapping.Table (Unit).Fname);\n-               Put_Line (Path_Mapping.Table (Unit).Fname);\n+               Put_Line (Name_Id (File_Mapping.Table (Unit).Uname));\n+               Put_Line (Name_Id (File_Mapping.Table (Unit).Fname));\n+               Put_Line (Name_Id (Path_Mapping.Table (Unit).Fname));\n             end loop;\n \n             --  Before closing the file, write the buffer to the file."}, {"sha": "17528a57210a58b690203ec4202b539ef9ef842e", "filename": "gcc/ada/fmap.ads", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffmap.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffmap.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffmap.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---            Copyright (C) 2001-2003, Free Software Foundation, Inc.       --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,7 +27,7 @@\n --  This package keeps two mappings: from unit names to file names,\n --  and from file names to path names.\n \n-with Types; use Types;\n+with Namet; use Namet;\n \n package Fmap is\n \n@@ -64,12 +64,12 @@ package Fmap is\n    --  for ASIS, for example) to remove any existing mappings from a previous\n    --  compilation.\n \n-   procedure Add_Forbidden_File_Name (Name : Name_Id);\n+   procedure Add_Forbidden_File_Name (Name : File_Name_Type);\n    --  Indicate that a source file name is forbidden.\n    --  This is used by gnatmake when there are Locally_Removed_Files in\n    --  extending projects.\n \n-   procedure Remove_Forbidden_File_Name (Name : Name_Id);\n+   procedure Remove_Forbidden_File_Name (Name : File_Name_Type);\n    --  Indicate that a source file name that was forbidden is no longer\n    --  forbidden. Used by gnatmake when a locally removed file is redefined\n    --  in another extending project."}, {"sha": "3e714a8c94e302ce4f1756f63fb181e01a47090a", "filename": "gcc/ada/fname-sf.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname-sf.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname-sf.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffname-sf.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2004 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -28,8 +28,8 @@ with Casing;   use Casing;\n with Fname;    use Fname;\n with Fname.UF; use Fname.UF;\n with SFN_Scan; use SFN_Scan;\n-with Namet;    use Namet;\n with Osint;    use Osint;\n+with Types;    use Types;\n \n with Unchecked_Conversion;\n "}, {"sha": "75809de7c9f884a3b7e96791084b8cc0b700cad0", "filename": "gcc/ada/fname-uf.adb", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname-uf.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname-uf.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffname-uf.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -28,7 +28,6 @@ with Alloc;\n with Debug;    use Debug;\n with Fmap;     use Fmap;\n with Krunch;\n-with Namet;    use Namet;\n with Opt;      use Opt;\n with Osint;    use Osint;\n with Table;\n@@ -194,7 +193,7 @@ package body Fname.UF is\n       --  Null or error name means that some previous error occurred\n       --  This is an unrecoverable error, so signal it.\n \n-      if Uname <= Error_Name then\n+      if Uname in Error_Unit_Name_Or_No_Unit_Name then\n          raise Unrecoverable_Error;\n       end if;\n \n@@ -434,7 +433,7 @@ package body Fname.UF is\n                         Debug_Flag_4);\n                   end if;\n \n-                  Fnam := File_Name_Type (Name_Find);\n+                  Fnam := Name_Find;\n \n                   --  If we are in the second search of the table, we accept\n                   --  the file name without checking, because we know that"}, {"sha": "b0ba0d90b3af34a34a27b8b31ba194827653df82", "filename": "gcc/ada/fname-uf.ads", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname-uf.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname-uf.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffname-uf.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -36,6 +36,7 @@\n --  to deal with the extra dependencies).\n \n with Casing; use Casing;\n+with Types;  use Types;\n \n package Fname.UF is\n "}, {"sha": "880e81644407afd5e6dbc66cc50ee550d276c1a2", "filename": "gcc/ada/fname.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffname.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -33,8 +33,8 @@\n \n with Alloc;\n with Hostparm; use Hostparm;\n-with Namet;    use Namet;\n with Table;\n+with Types;    use Types;\n \n package body Fname is\n "}, {"sha": "9e31b991c444e643812aa65fa006974c65b63803", "filename": "gcc/ada/fname.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ffname.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffname.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2004 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -35,7 +35,7 @@\n --  association between source file names and unit names as defined\n --  (see package Uname for definition of format of unit names).\n \n-with Types; use Types;\n+with Namet; use Namet;\n \n package Fname is\n "}, {"sha": "c20885eb5739f526316470e54b8567e7b28a2ef0", "filename": "gcc/ada/lib-sort.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-sort.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-sort.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-sort.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -58,10 +58,10 @@ procedure Sort (Tbl : in out Unit_Ref_Table) is\n       --  at the bottom of the list. They are recognized because they are\n       --  the only ones without a Unit_Name.\n \n-      if Units.Table (T (C1)).Unit_Name = No_Name then\n+      if Units.Table (T (C1)).Unit_Name = No_Unit_Name then\n          return False;\n \n-      elsif Units.Table (T (C2)).Unit_Name = No_Name then\n+      elsif Units.Table (T (C2)).Unit_Name = No_Unit_Name then\n          return True;\n \n       else"}, {"sha": "d67b8d0bf7def8e47c07fa6454568a7eac70692b", "filename": "gcc/ada/lib-util.adb", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-util.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2002 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -25,7 +25,6 @@\n ------------------------------------------------------------------------------\n \n with Hostparm;\n-with Namet;    use Namet;\n with Osint.C;  use Osint.C;\n \n package body Lib.Util is\n@@ -142,6 +141,16 @@ package body Lib.Util is\n       Info_Buffer_Col := Info_Buffer_Col + Name_Len;\n    end Write_Info_Name;\n \n+   procedure Write_Info_Name (Name : File_Name_Type) is\n+   begin\n+      Write_Info_Name (Name_Id (Name));\n+   end Write_Info_Name;\n+\n+   procedure Write_Info_Name (Name : Unit_Name_Type) is\n+   begin\n+      Write_Info_Name (Name_Id (Name));\n+   end Write_Info_Name;\n+\n    --------------------\n    -- Write_Info_Nat --\n    --------------------"}, {"sha": "31f5564498f75d4d04851d0e4278779a909ec886", "filename": "gcc/ada/lib-util.ads", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-util.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-1999 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -54,7 +54,11 @@ package Lib.Util is\n    --  Adds image of N to Info_Buffer with no leading or trailing blanks\n \n    procedure Write_Info_Name (Name : Name_Id);\n-   --  Adds characters of Name to Info_Buffer\n+   procedure Write_Info_Name (Name : File_Name_Type);\n+   procedure Write_Info_Name (Name : Unit_Name_Type);\n+   --  Adds characters of Name to Info_Buffer. Note that in all cases, the\n+   --  name is written literally from the names table entry without modifying\n+   --  the case, using simply Get_Name_String.\n \n    procedure Write_Info_Str (Val : String);\n    --  Adds characters of Val to Info_Buffer surrounded by quotes"}, {"sha": "ec47ff95f7fc1aa65968519c2781397a1943a709", "filename": "gcc/ada/lib-xref.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-xref.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Flib-xref.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1998-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1998-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -29,7 +29,6 @@ with Csets;    use Csets;\n with Elists;   use Elists;\n with Errout;   use Errout;\n with Lib.Util; use Lib.Util;\n-with Namet;    use Namet;\n with Nlists;   use Nlists;\n with Opt;      use Opt;\n with Restrict; use Restrict;"}, {"sha": "0a958739c832e531bc176dce398ddd727e701784", "filename": "gcc/ada/makeutl.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fmakeutl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fmakeutl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2004-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2004-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,7 +26,6 @@\n \n with Ada.Command_Line; use Ada.Command_Line;\n \n-with Namet;    use Namet;\n with Osint;    use Osint;\n with Prj.Ext;\n with Prj.Util;\n@@ -223,7 +222,7 @@ package body Makeutl is\n       end loop;\n \n       if Equal_Pos = Start\n-        or else Equal_Pos >= Finish\n+        or else Equal_Pos > Finish\n       then\n          return False;\n       else"}, {"sha": "d0d443bc45366c9a1990339e589d82c323dbad6a", "filename": "gcc/ada/makeutl.ads", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fmakeutl.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fmakeutl.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2004-2006 Free Software Foundation, Inc.          --\n+--          Copyright (C) 2004-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,6 +24,7 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n+with Namet; use Namet;\n with Osint;\n with Prj;   use Prj;\n with Types; use Types;"}, {"sha": "922baa6e3182b05a94c61f06f2fb0d7481537c31", "filename": "gcc/ada/nmake.adt", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fnmake.adt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fnmake.adt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fnmake.adt?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                             T e m p l a t e                              --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -33,6 +33,7 @@ pragma Style_Checks (All_Checks);\n --  generated automatically in order.\n \n with Atree;  use Atree;       --  body only\n+with Namet;  use Namet;       --  spec only\n with Nlists; use Nlists;      --  spec only\n with Sinfo;  use Sinfo;       --  body only\n with Snames; use Snames;      --  body only"}, {"sha": "60fd8f2e819e91059755bb57bd50d1a0c83c0266", "filename": "gcc/ada/osint-b.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fosint-b.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fosint-b.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint-b.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006 Free Software Foundation, Inc.          --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,7 +24,6 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Namet;    use Namet;\n with Opt;      use Opt;\n with Targparm; use Targparm;\n "}, {"sha": "a78ab8d8d86f3f6359308af4af47723e1bae80b3", "filename": "gcc/ada/osint.adb", "status": "modified", "additions": 98, "deletions": 104, "changes": 202, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fosint.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fosint.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,22 +24,21 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Fmap;     use Fmap;\n-with Gnatvsn;  use Gnatvsn;\n-with Hostparm;\n-with Namet;    use Namet;\n-with Opt;      use Opt;\n-with Output;   use Output;\n-with Sdefault; use Sdefault;\n-with Table;\n-with Targparm; use Targparm;\n+with Unchecked_Conversion;\n \n with System.Case_Util; use System.Case_Util;\n \n-with Unchecked_Conversion;\n-\n with GNAT.HTable;\n \n+with Fmap;             use Fmap;\n+with Gnatvsn;          use Gnatvsn;\n+with Hostparm;\n+with Opt;              use Opt;\n+with Output;           use Output;\n+with Sdefault;         use Sdefault;\n+with Table;\n+with Targparm;         use Targparm;\n+\n package body Osint is\n \n    Running_Program : Program_Type := Unspecified;\n@@ -62,33 +61,32 @@ package body Osint is\n    -------------------------------------\n \n    --  This package creates a number of source, ALI and object file names\n-   --  that are used to locate the actual file and for the purpose of\n-   --  message construction. These names need not be accessible by Name_Find,\n-   --  and can be therefore created by using routine Name_Enter. The files in\n-   --  question are file names with a prefix directory (ie the files not\n-   --  in the current directory). File names without a prefix directory are\n-   --  entered with Name_Find because special values might be attached to\n-   --  the various Info fields of the corresponding name table entry.\n+   --  that are used to locate the actual file and for the purpose of message\n+   --  construction. These names need not be accessible by Name_Find, and can\n+   --  be therefore created by using routine Name_Enter. The files in question\n+   --  are file names with a prefix directory (ie the files not in the current\n+   --  directory). File names without a prefix directory are entered with\n+   --  Name_Find because special values might be attached to the various Info\n+   --  fields of the corresponding name table entry.\n \n    -----------------------\n    -- Local Subprograms --\n    -----------------------\n \n    function Append_Suffix_To_File_Name\n-     (Name   : Name_Id;\n-      Suffix : String) return Name_Id;\n+     (Name   : File_Name_Type;\n+      Suffix : String) return File_Name_Type;\n    --  Appends Suffix to Name and returns the new name\n \n    function OS_Time_To_GNAT_Time (T : OS_Time) return Time_Stamp_Type;\n    --  Convert OS format time to GNAT format time stamp\n \n    function Executable_Prefix return String_Ptr;\n    --  Returns the name of the root directory where the executable is stored.\n-   --  The executable must be located in a directory called \"bin\", or\n-   --  under root/lib/gcc-lib/..., or under root/libexec/gcc/... Thus, if\n-   --  the executable is stored in directory \"/foo/bar/bin\", this routine\n-   --  returns \"/foo/bar/\".  Return \"\" if the location is not recognized\n-   --  as described above.\n+   --  The executable must be located in a directory called \"bin\", or under\n+   --  root/lib/gcc-lib/..., or under root/libexec/gcc/... For example, if\n+   --  executable is stored in directory \"/foo/bar/bin\", this routine returns\n+   --  \"/foo/bar/\". Return \"\" if location is not recognized as described above.\n \n    function Update_Path (Path : String_Ptr) return String_Ptr;\n    --  Update the specified path to replace the prefix with the location\n@@ -99,20 +97,20 @@ package body Osint is\n       T    : File_Type;\n       Dir  : Natural;\n       Name : String) return File_Name_Type;\n-   --  See if the file N whose name is Name exists in directory Dir. Dir is\n-   --  an index into the Lib_Search_Directories table if T = Library.\n-   --  Otherwise if T = Source, Dir is an index into the\n-   --  Src_Search_Directories table. Returns the File_Name_Type of the\n-   --  full file name if file found, or No_File if not found.\n+   --  See if the file N whose name is Name exists in directory Dir. Dir is an\n+   --  index into the Lib_Search_Directories table if T = Library. Otherwise\n+   --  if T = Source, Dir is an index into the Src_Search_Directories table.\n+   --  Returns the File_Name_Type of the full file name if file found, or\n+   --  No_File if not found.\n \n    function C_String_Length (S : Address) return Integer;\n-   --  Returns length of a C string. Returns zero for a null address\n+   --  Returns length of a C string (zero for a null address)\n \n    function To_Path_String_Access\n      (Path_Addr : Address;\n       Path_Len  : Integer) return String_Access;\n-   --  Converts a C String to an Ada String. Are we doing this to avoid\n-   --  withing Interfaces.C.Strings ???\n+   --  Converts a C String to an Ada String. Are we doing this to avoid withing\n+   --  Interfaces.C.Strings ???\n \n    ------------------------------\n    -- Other Local Declarations --\n@@ -122,39 +120,37 @@ package body Osint is\n    --  End of line character\n \n    Number_File_Names : Int := 0;\n-   --  The total number of file names found on command line and placed in\n-   --  File_Names.\n+   --  Number of file names founde on command line and placed in File_Names\n \n    Look_In_Primary_Directory_For_Current_Main : Boolean := False;\n-   --  When this variable is True, Find_File will only look in\n-   --  the Primary_Directory for the Current_Main file.\n-   --  This variable is always True for the compiler.\n-   --  It is also True for gnatmake, when the soucr name given\n-   --  on the command line has directory information.\n+   --  When this variable is True, Find_File only looks in Primary_Directory\n+   --  for the Current_Main file. This variable is always set to True for the\n+   --  compiler. It is also True for gnatmake, when the soucr name given on\n+   --  the command line has directory information.\n \n    Current_Full_Source_Name  : File_Name_Type  := No_File;\n    Current_Full_Source_Stamp : Time_Stamp_Type := Empty_Time_Stamp;\n    Current_Full_Lib_Name     : File_Name_Type  := No_File;\n    Current_Full_Lib_Stamp    : Time_Stamp_Type := Empty_Time_Stamp;\n    Current_Full_Obj_Name     : File_Name_Type  := No_File;\n    Current_Full_Obj_Stamp    : Time_Stamp_Type := Empty_Time_Stamp;\n-   --  Respectively full name (with directory info) and time stamp of\n-   --  the latest source, library and object files opened by Read_Source_File\n-   --  and Read_Library_Info.\n+   --  Respectively full name (with directory info) and time stamp of the\n+   --  latest source, library and object files opened by Read_Source_File and\n+   --  Read_Library_Info.\n \n    ------------------\n    -- Search Paths --\n    ------------------\n \n    Primary_Directory : constant := 0;\n    --  This is index in the tables created below for the first directory to\n-   --  search in for source or library information files. This is the\n-   --  directory containing the latest main input file (a source file for\n-   --  the compiler or a library file for the binder).\n+   --  search in for source or library information files. This is the directory\n+   --  containing the latest main input file (a source file for the compiler or\n+   --  a library file for the binder).\n \n    package Src_Search_Directories is new Table.Table (\n      Table_Component_Type => String_Ptr,\n-     Table_Index_Type     => Natural,\n+     Table_Index_Type     => Integer,\n      Table_Low_Bound      => Primary_Directory,\n      Table_Initial        => 10,\n      Table_Increment      => 100,\n@@ -165,7 +161,7 @@ package body Osint is\n \n    package Lib_Search_Directories is new Table.Table (\n      Table_Component_Type => String_Ptr,\n-     Table_Index_Type     => Natural,\n+     Table_Index_Type     => Integer,\n      Table_Low_Bound      => Primary_Directory,\n      Table_Initial        => 10,\n      Table_Increment      => 100,\n@@ -183,12 +179,11 @@ package body Osint is\n    --  efficiency concern when retrieving full file names or time stamps of\n    --  source files. If the programmer calls Source_File_Data (Cache => True)\n    --  he is guaranteed that the price to retrieve the full name (ie with\n-   --  directory info) or time stamp of the file will be payed only once,\n-   --  the first time the full name is actually searched (or the first time\n-   --  the time stamp is actually retrieved). This is achieved by employing\n-   --  a hash table that stores as a key the File_Name_Type of the file and\n-   --  associates to that File_Name_Type the full file name of the file and its\n-   --  time stamp.\n+   --  directory info) or time stamp of the file will be payed only once, the\n+   --  first time the full name is actually searched (or the first time the\n+   --  time stamp is actually retrieved). This is achieved by employing a hash\n+   --  table that stores as a key the File_Name_Type of the file and associates\n+   --  to that File_Name_Type the full file name and time stamp of the file.\n \n    File_Cache_Enabled : Boolean := False;\n    --  Set to true if you want the enable the file data caching mechanism\n@@ -224,11 +219,10 @@ package body Osint is\n    function Smart_File_Stamp\n      (N : File_Name_Type;\n       T : File_Type) return Time_Stamp_Type;\n-   --  Takes the same parameter as the routine above (N is a file name\n-   --  without any prefix directory information) and behaves like File_Stamp\n-   --  except that if File_Cache_Enabled is True this routine looks first in\n-   --  the hash table to see if the file stamp of the file is already\n-   --  available.\n+   --  Takes the same parameter as the routine above (N is a file name without\n+   --  any prefix directory information) and behaves like File_Stamp except\n+   --  that if File_Cache_Enabled is True this routine looks first in the hash\n+   --  table to see if the file stamp of the file is already available.\n \n    -----------------------------\n    -- Add_Default_Search_Dirs --\n@@ -327,17 +321,15 @@ package body Osint is\n             Curr := Curr + Actual_Len;\n          end loop;\n \n-         --  We are done with the file, so we close it\n+         --  We are done with the file, so we close it (ignore any error on\n+         --  the close, since we have successfully read the file).\n \n          Close (File_FD, Status);\n-         --  We ignore any error here, because we have successfully read the\n-         --  file.\n \n          --  Now, we read line by line\n \n          First := 1;\n          Curr := 0;\n-\n          while Curr < Len loop\n             Ch := S (Curr + 1);\n \n@@ -451,8 +443,8 @@ package body Osint is\n       --  For the compiler, if --RTS= was specified, add the runtime\n       --  directories.\n \n-      if RTS_Src_Path_Name /= null and then\n-         RTS_Lib_Path_Name /= null\n+      if RTS_Src_Path_Name /= null\n+        and then RTS_Lib_Path_Name /= null\n       then\n          Add_Search_Dirs (RTS_Src_Path_Name, Include);\n          Add_Search_Dirs (RTS_Lib_Path_Name, Objects);\n@@ -515,9 +507,8 @@ package body Osint is\n    begin\n       Number_File_Names := Number_File_Names + 1;\n \n-      --  As Add_File may be called for mains specified inside\n-      --  a project file, File_Names may be too short and needs\n-      --  to be extended.\n+      --  As Add_File may be called for mains specified inside a project file,\n+      --  File_Names may be too short and needs to be extended.\n \n       if Number_File_Names > File_Names'Last then\n          File_Names := new File_Name_Array'(File_Names.all & File_Names.all);\n@@ -589,8 +580,8 @@ package body Osint is\n    --------------------------------\n \n    function Append_Suffix_To_File_Name\n-     (Name   : Name_Id;\n-      Suffix : String) return Name_Id\n+     (Name   : File_Name_Type;\n+      Suffix : String) return File_Name_Type\n    is\n    begin\n       Get_Name_String (Name);\n@@ -722,6 +713,7 @@ package body Osint is\n \n    function Executable_Name (Name : File_Name_Type) return File_Name_Type is\n       Exec_Suffix : String_Access;\n+\n    begin\n       if Name = No_File then\n          return No_File;\n@@ -741,13 +733,12 @@ package body Osint is\n             Buffer : String := Name_Buffer (1 .. Name_Len);\n \n          begin\n-            --  Get the file name in canonical case to accept as is\n-            --  names ending with \".EXE\" on VMS and Windows.\n+            --  Get the file name in canonical case to accept as is names\n+            --  ending with \".EXE\" on VMS and Windows.\n \n             Canonical_Case_File_Name (Buffer);\n \n-            --  If the Executable does not end with the executable\n-            --  suffix, add it.\n+            --  If Executable does not end with the executable suffix, add it\n \n             if Buffer'Length <= Exec_Suffix'Length\n               or else\n@@ -810,6 +801,7 @@ package body Osint is\n    -----------------------\n \n    function Executable_Prefix return String_Ptr is\n+\n       function Get_Install_Dir (Exec : String) return String_Ptr;\n       --  S is the executable name preceeded by the absolute or relative\n       --  path, e.g. \"c:\\usr\\bin\\gcc.exe\" or \"..\\bin\\gcc\".\n@@ -866,7 +858,7 @@ package body Osint is\n       --  directory prefix.\n \n       return Get_Install_Dir\n-        (GNAT.OS_Lib.Locate_Exec_On_Path (Exec_Name.all).all);\n+        (System.OS_Lib.Locate_Exec_On_Path (Exec_Name.all).all);\n    end Executable_Prefix;\n \n    ------------------\n@@ -950,6 +942,11 @@ package body Osint is\n       end if;\n    end File_Stamp;\n \n+   function File_Stamp (Name : Path_Name_Type) return Time_Stamp_Type is\n+   begin\n+      return File_Stamp (File_Name_Type (Name));\n+   end File_Stamp;\n+\n    ---------------\n    -- Find_File --\n    ---------------\n@@ -970,7 +967,7 @@ package body Osint is\n          --  If we are looking for a config file, look only in the current\n          --  directory, i.e. return input argument unchanged. Also look\n          --  only in the current directory if we are looking for a .dg\n-         --  file (happens in -gnatD mode)\n+         --  file (happens in -gnatD mode).\n \n          if T = Config\n            or else (Debug_Generated_Code\n@@ -1002,10 +999,11 @@ package body Osint is\n             --  corresponding path name\n \n             if File /= No_File then\n+\n                --  For locally removed file, Error_Name is returned; then\n                --  return No_File, indicating the file is not a source.\n \n-               if File = Error_Name then\n+               if File = Error_File_Name then\n                   return No_File;\n \n                else\n@@ -1051,8 +1049,8 @@ package body Osint is\n \n    procedure Find_Program_Name is\n       Command_Name : String (1 .. Len_Arg (0));\n-      Cindex1 : Integer := Command_Name'First;\n-      Cindex2 : Integer := Command_Name'Last;\n+      Cindex1      : Integer := Command_Name'First;\n+      Cindex2      : Integer := Command_Name'Last;\n \n    begin\n       Fill_Arg (Command_Name'Address, 0);\n@@ -1276,10 +1274,8 @@ package body Osint is\n          --  We first verify if there is a directory Include_Search_Dir\n          --  containing default search directories\n \n-         Result_Search_Dir\n-           := Read_Default_Search_Dirs (Norm_Search_Dir,\n-                                        Search_File,\n-                                        null);\n+         Result_Search_Dir :=\n+           Read_Default_Search_Dirs (Norm_Search_Dir, Search_File, null);\n          Default_Search_Dir :=\n            new String'(Norm_Search_Dir.all & Default_Suffix_Dir.all);\n          Free (Norm_Search_Dir);\n@@ -1421,12 +1417,11 @@ package body Osint is\n       Suppress_Options := (others => False);\n \n       --  Reserve the first slot in the search paths table. This is the\n-      --  directory of the main source file or main library file and is\n-      --  filled in by each call to Next_Main_Source/Next_Main_Lib_File with\n-      --  the directory specified for this main source or library file. This\n-      --  is the directory which is searched first by default. This default\n-      --  search is inhibited by the option -I- for both source and library\n-      --  files.\n+      --  directory of the main source file or main library file and is filled\n+      --  in by each call to Next_Main_Source/Next_Main_Lib_File with the\n+      --  directory specified for this main source or library file. This is the\n+      --  directory which is searched first by default. This default search is\n+      --  inhibited by the option -I- for both source and library files.\n \n       Src_Search_Directories.Set_Last (Primary_Directory);\n       Src_Search_Directories.Table (Primary_Directory) := new String'(\"\");\n@@ -1687,7 +1682,7 @@ package body Osint is\n       Name_Len := File_Name'Last - Fptr + 1;\n       Name_Buffer (1 .. Name_Len) := File_Name (Fptr .. File_Name'Last);\n       Canonical_Case_File_Name (Name_Buffer (1 .. Name_Len));\n-      Current_Main := File_Name_Type (Name_Find);\n+      Current_Main := Name_Find;\n \n       --  In the gnatmake case, the main file may have not have the\n       --  extension. Try \".adb\" first then \".ads\"\n@@ -1698,7 +1693,8 @@ package body Osint is\n \n          begin\n             if Strip_Suffix (Orig_Main) = Orig_Main then\n-               Current_Main := Append_Suffix_To_File_Name (Orig_Main, \".adb\");\n+               Current_Main :=\n+                 Append_Suffix_To_File_Name (Orig_Main, \".adb\");\n \n                if Full_Source_Name (Current_Main) = No_File then\n                   Current_Main :=\n@@ -1868,8 +1864,8 @@ package body Osint is\n \n       Find_Program_Name;\n \n-      --  Find the target prefix if any, for the cross compilation case\n-      --  for instance in \"alpha-dec-vxworks-gcc\" the target prefix is\n+      --  Find the target prefix if any, for the cross compilation case.\n+      --  For instance in \"alpha-dec-vxworks-gcc\" the target prefix is\n       --  \"alpha-dec-vxworks-\"\n \n       while Name_Len > 0  loop\n@@ -1972,14 +1968,13 @@ package body Osint is\n       Prev_Was_Separator := True;\n       Nb_Relative_Dir := 0;\n       for J in 1 .. Len loop\n-         if S (J) in ASCII.NUL .. ASCII.US\n-           or else S (J) = ' '\n-         then\n+         if S (J) in ASCII.NUL .. ASCII.US or else S (J) = ' ' then\n             S (J) := Path_Separator;\n          end if;\n \n          if S (J) = Path_Separator then\n             Prev_Was_Separator := True;\n+\n          else\n             if Prev_Was_Separator and then Is_Relative (S.all, J) then\n                Nb_Relative_Dir := Nb_Relative_Dir + 1;\n@@ -2076,15 +2071,15 @@ package body Osint is\n \n          if Current_Full_Obj_Stamp (1) = ' ' then\n \n-            --  When the library is readonly, always assume that\n-            --  the object is consistent.\n+            --  When the library is readonly always assume object is consistent\n \n             if Is_Readonly_Library (Current_Full_Lib_Name) then\n                Current_Full_Obj_Stamp := Current_Full_Lib_Stamp;\n \n             elsif Fatal_Err then\n                Get_Name_String (Current_Full_Obj_Name);\n                Close (Lib_FD, Status);\n+\n                --  No need to check the status, we fail anyway\n \n                Fail (\"Cannot find: \", Name_Buffer (1 .. Name_Len));\n@@ -2174,8 +2169,8 @@ package body Osint is\n \n       if Current_Full_Source_Name = No_File then\n \n-         --  If we were trying to access the main file and we could not\n-         --  find it we have an error.\n+         --  If we were trying to access the main file and we could not find\n+         --  it, we have an error.\n \n          if N = Current_Main then\n             Get_Name_String (N);\n@@ -2573,7 +2568,7 @@ package body Osint is\n       pragma Import\n         (C, To_Canonical_File_Spec, \"__gnat_to_canonical_file_spec\");\n \n-      C_Host_File      : String (1 .. Host_File'Length + 1);\n+      C_Host_File         : String (1 .. Host_File'Length + 1);\n       Canonical_File_Addr : Address;\n       Canonical_File_Len  : Integer;\n \n@@ -2749,8 +2744,7 @@ package body Osint is\n    begin\n       In_String (1 .. In_Length) := Path.all;\n       In_String (In_Length + 1) := ASCII.NUL;\n-      Result_Ptr := C_Update_Path (In_String'Address,\n-                                   Component_Name'Address);\n+      Result_Ptr := C_Update_Path (In_String'Address, Component_Name'Address);\n       Result_Length := Strlen (Result_Ptr);\n \n       Out_String := new String (1 .. Result_Length);"}, {"sha": "c31220cc1c4d71f4959031376fcbba4f13df91af", "filename": "gcc/ada/osint.ads", "status": "modified", "additions": 23, "deletions": 19, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fosint.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fosint.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -27,11 +27,13 @@\n --  This package contains the low level, operating system routines used in the\n --  compiler and binder for command line processing and file input output.\n \n-with GNAT.OS_Lib; use GNAT.OS_Lib;\n-with System;      use System;\n-with Types;       use Types;\n+with Namet; use Namet;\n+with Types; use Types;\n \n-pragma Elaborate_All (GNAT.OS_Lib);\n+with System.OS_Lib; use System.OS_Lib;\n+with System;        use System;\n+\n+pragma Elaborate_All (System.OS_Lib);\n --  For the call to function Get_Target_Object_Suffix in the private part\n \n package Osint is\n@@ -150,10 +152,13 @@ package Osint is\n    --  Same as above, with String parameters\n \n    function File_Stamp (Name : File_Name_Type) return Time_Stamp_Type;\n-   --  Returns the time stamp of file Name. Name should include relative\n-   --  path information in order to locate it. If the source file cannot be\n-   --  opened, or Name = No_File, and all blank time stamp is returned (this is\n-   --  not an error situation).\n+   --  Returns the time stamp of file Name. Name should include relative path\n+   --  information in order to locate it. If the source file cannot be opened,\n+   --  or Name = No_File, and all blank time stamp is returned (this is not an\n+   --  error situation).\n+\n+   function File_Stamp (Name : Path_Name_Type) return Time_Stamp_Type;\n+   --  Same as above for a path name\n \n    type String_Access_List is array (Positive range <>) of String_Access;\n    --  Deferenced type used to return a list of file specs in\n@@ -376,8 +381,8 @@ package Osint is\n \n    function Full_Source_Name (N : File_Name_Type) return File_Name_Type;\n    function Source_File_Stamp (N : File_Name_Type) return Time_Stamp_Type;\n-   --  Returns the full name/time stamp of the source file whose simple name is\n-   --  N which should not include path information. Note that if the file\n+   --  Returns the full name/time stamp of the source file whose simple name\n+   --  is N which should not include path information. Note that if the file\n    --  cannot be located No_File is returned for the first routine and an all\n    --  blank time stamp is returned for the second (this is not an error\n    --  situation). The full name includes appropriate directory information.\n@@ -491,13 +496,12 @@ package Osint is\n \n    function Full_Lib_File_Name (N : File_Name_Type) return File_Name_Type;\n    function Library_File_Stamp (N : File_Name_Type) return Time_Stamp_Type;\n-   --  Returns the full name/time stamp of library file N. N should not\n-   --  include path information. Note that if the file cannot be located\n-   --  No_File is returned for the first routine and an all blank time stamp\n-   --  is returned for the second (this is not an error situation). The\n-   --  full name includes the appropriate directory information. The library\n-   --  file directory lookup penalty is incurred every single time this\n-   --  routine is called.\n+   --  Returns the full name/time stamp of library file N. N should not include\n+   --  path information. Note that if the file cannot be located No_File is\n+   --  returned for the first routine and an all blank time stamp is returned\n+   --  for the second (this is not an error situation). The full name includes\n+   --  the appropriate directory information. The library file directory lookup\n+   --  penalty is incurred every single time this routine is called.\n \n    function Lib_File_Name\n      (Source_File : File_Name_Type;\n@@ -601,7 +605,7 @@ private\n    --  length in Name_Len), and place the resulting descriptor in Fdesc. Issue\n    --  message and exit with fatal error if file cannot be created. The Fmode\n    --  parameter is set to either Text or Binary (for details see description\n-   --  of GNAT.OS_Lib.Create_File).\n+   --  of System.OS_Lib.Create_File).\n \n    type Program_Type is (Compiler, Binder, Make, Gnatls, Unspecified);\n    --  Program currently running"}, {"sha": "f924523d87d9ab4f43a7ff6d8406adf9107485b7", "filename": "gcc/ada/par-load.adb", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fpar-load.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fpar-load.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-load.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -147,7 +147,7 @@ begin\n    --  If we have no unit name, things are seriously messed up by previous\n    --  errors, and we should not try to continue compilation.\n \n-   if Unit_Name (Cur_Unum) = No_Name then\n+   if Unit_Name (Cur_Unum) = No_Unit_Name then\n       raise Unrecoverable_Error;\n    end if;\n \n@@ -170,7 +170,7 @@ begin\n                 or not Same_File_Name_Except_For_Case\n                          (File_Name, Unit_File_Name (Cur_Unum)))\n    then\n-      Error_Msg_Name_1 := File_Name;\n+      Error_Msg_File_1 := File_Name;\n       Error_Msg\n         (\"?file name does not match unit name, should be{\", Sloc (Curunit));\n    end if;\n@@ -184,8 +184,8 @@ begin\n      and then Expected_Unit (Cur_Unum) /= Unit_Name (Cur_Unum)\n    then\n       Loc := Error_Location (Cur_Unum);\n-      Error_Msg_Name_1 := Unit_File_Name (Cur_Unum);\n-      Get_Name_String (Error_Msg_Name_1);\n+      Error_Msg_File_1 := Unit_File_Name (Cur_Unum);\n+      Get_Name_String (Error_Msg_File_1);\n \n       --  Check for predefined file case\n \n@@ -200,12 +200,12 @@ begin\n                   Name_Buffer (1) = 'g')\n       then\n          declare\n-            Expect_Name : constant Name_Id := Expected_Unit (Cur_Unum);\n-            Actual_Name : constant Name_Id := Unit_Name (Cur_Unum);\n+            Expect_Name : constant Unit_Name_Type := Expected_Unit (Cur_Unum);\n+            Actual_Name : constant Unit_Name_Type := Unit_Name (Cur_Unum);\n \n          begin\n-            Error_Msg_Name_1 := Expect_Name;\n-            Error_Msg (\"% is not a predefined library unit!\", Loc);\n+            Error_Msg_Unit_1 := Expect_Name;\n+            Error_Msg (\"$$ is not a predefined library unit!\", Loc);\n \n             --  In the predefined file case, we know the user did not\n             --  construct their own package, but we got the wrong one.\n@@ -222,15 +222,15 @@ begin\n             --  of misspelling of predefined unit names without needing\n             --  a full list of them.\n \n-            --  Before actually issinying the message, we will check that the\n+            --  Before actually issuing the message, we will check that the\n             --  unit name is indeed a plausible misspelling of the one we got.\n \n             if Is_Bad_Spelling_Of\n               (Found  => Get_Name_String (Expect_Name),\n                Expect => Get_Name_String (Actual_Name))\n             then\n-               Error_Msg_Name_1 := Actual_Name;\n-               Error_Msg (\"possible misspelling of %!\", Loc);\n+               Error_Msg_Unit_1 := Actual_Name;\n+               Error_Msg (\"possible misspelling of $$!\", Loc);\n             end if;\n          end;\n \n@@ -319,7 +319,7 @@ begin\n \n       Spec_Name := Get_Parent_Spec_Name (Unit_Name (Cur_Unum));\n \n-      if Spec_Name /= No_Name then\n+      if Spec_Name /= No_Unit_Name then\n          Unum :=\n            Load_Unit\n              (Load_Name         => Spec_Name,"}, {"sha": "244e228a609d3889afb6618cfce110fdbf869c55", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,7 +24,6 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Namet;   use Namet;\n with Osint;\n with Prj.Com; use Prj.Com;\n with System.Case_Util; use System.Case_Util;"}, {"sha": "13889a4b4d92dfb5c2bbd64a09630ebe3d63909f", "filename": "gcc/ada/prj-dect.adb", "status": "modified", "additions": 9, "deletions": 10, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-dect.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-dect.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-dect.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc          --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -25,7 +25,6 @@\n ------------------------------------------------------------------------------\n \n with Err_Vars;    use Err_Vars;\n-with Namet;       use Namet;\n with Opt;         use Opt;\n with Prj.Err;     use Prj.Err;\n with Prj.Strt;    use Prj.Strt;\n@@ -209,7 +208,7 @@ package body Prj.Dect is\n \n                if not Ignore then\n                   Error_Msg_Name_1 := Token_Name;\n-                  Error_Msg (\"undefined attribute {\", Token_Ptr);\n+                  Error_Msg (\"undefined attribute %%\", Token_Ptr);\n                end if;\n             end if;\n \n@@ -1131,7 +1130,7 @@ package body Prj.Dect is\n            and then Token_Name /= Name_Of (Package_Declaration, In_Tree)\n          then\n             Error_Msg_Name_1 := Name_Of (Package_Declaration, In_Tree);\n-            Error_Msg (\"expected {\", Token_Ptr);\n+            Error_Msg (\"expected %\", Token_Ptr);\n          end if;\n \n          if Token /= Tok_Semicolon then\n@@ -1252,13 +1251,13 @@ package body Prj.Dect is\n       Current_Package : Project_Node_Id)\n    is\n       Expression_Location      : Source_Ptr;\n-      String_Type_Name         : Name_Id := No_Name;\n-      Project_String_Type_Name : Name_Id := No_Name;\n-      Type_Location            : Source_Ptr := No_Location;\n-      Project_Location         : Source_Ptr := No_Location;\n-      Expression               : Project_Node_Id := Empty_Node;\n+      String_Type_Name         : Name_Id          := No_Name;\n+      Project_String_Type_Name : Name_Id          := No_Name;\n+      Type_Location            : Source_Ptr       := No_Location;\n+      Project_Location         : Source_Ptr       := No_Location;\n+      Expression               : Project_Node_Id  := Empty_Node;\n       Variable_Name            : constant Name_Id := Token_Name;\n-      OK                       : Boolean := True;\n+      OK                       : Boolean          := True;\n \n    begin\n       Variable :="}, {"sha": "7bcc64c6701ea95f9ca41793ba2f20e458b13345", "filename": "gcc/ada/prj-err.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-err.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-err.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-err.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2002-2004 Free Software Foundation, Inc.          --\n+--          Copyright (C) 2002-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,7 +24,6 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Namet;   use Namet;\n with Output;  use Output;\n with Stringt; use Stringt;\n "}, {"sha": "6606afbe12df83d250a5ef1c09eb94f344c5badb", "filename": "gcc/ada/prj-makr.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-makr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-makr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-makr.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -25,7 +25,6 @@\n ------------------------------------------------------------------------------\n \n with Csets;\n-with Namet;    use Namet;\n with Opt;\n with Output;\n with Osint;    use Osint;\n@@ -40,10 +39,10 @@ with Table;    use Table;\n \n with Ada.Characters.Handling;   use Ada.Characters.Handling;\n with GNAT.Directory_Operations; use GNAT.Directory_Operations;\n-with GNAT.Regexp;               use GNAT.Regexp;\n \n with System.Case_Util;          use System.Case_Util;\n with System.CRTL;\n+with System.Regexp;             use System.Regexp;\n \n package body Prj.Makr is\n "}, {"sha": "f58e59f874892d11587343b82068413846821cb0", "filename": "gcc/ada/prj-part.adb", "status": "modified", "additions": 77, "deletions": 67, "changes": 144, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-part.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-part.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-part.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -25,7 +25,6 @@\n ------------------------------------------------------------------------------\n \n with Err_Vars; use Err_Vars;\n-with Namet;    use Namet;\n with Opt;      use Opt;\n with Osint;    use Osint;\n with Output;   use Output;\n@@ -38,19 +37,19 @@ with Sinput.P; use Sinput.P;\n with Snames;\n with Table;\n \n-with Ada.Characters.Handling;    use Ada.Characters.Handling;\n-with Ada.Exceptions;             use Ada.Exceptions;\n+with Ada.Characters.Handling;   use Ada.Characters.Handling;\n+with Ada.Exceptions;            use Ada.Exceptions;\n \n-with GNAT.Directory_Operations;  use GNAT.Directory_Operations;\n+with GNAT.Directory_Operations; use GNAT.Directory_Operations;\n \n-with System.HTable;              use System.HTable;\n+with System.HTable;             use System.HTable;\n \n package body Prj.Part is\n \n    Buffer      : String_Access;\n    Buffer_Last : Natural := 0;\n \n-   Dir_Sep  : Character renames GNAT.OS_Lib.Directory_Separator;\n+   Dir_Sep : Character renames GNAT.OS_Lib.Directory_Separator;\n \n    type Extension_Origin is (None, Extending_Simple, Extending_All);\n    --  Type of parameter From_Extended for procedures Parse_Single_Project and\n@@ -65,7 +64,7 @@ package body Prj.Part is\n    No_With : constant With_Id := 0;\n \n    type With_Record is record\n-      Path         : Name_Id;\n+      Path         : File_Name_Type;\n       Location     : Source_Ptr;\n       Limited_With : Boolean;\n       Node         : Project_Node_Id;\n@@ -85,10 +84,11 @@ package body Prj.Part is\n    --  name of the current project has been extablished.\n \n    type Names_And_Id is record\n-      Path_Name           : Name_Id;\n-      Canonical_Path_Name : Name_Id;\n+      Path_Name           : Path_Name_Type;\n+      Canonical_Path_Name : Path_Name_Type;\n       Id                  : Project_Node_Id;\n    end record;\n+   --  Needs a comment ???\n \n    package Project_Stack is new Table.Table\n      (Table_Component_Type => Names_And_Id,\n@@ -156,7 +156,7 @@ package body Prj.Part is\n      (Context_Clause    : With_Id;\n       In_Tree           : Project_Node_Tree_Ref;\n       Imported_Projects : out Project_Node_Id;\n-      Project_Directory : Name_Id;\n+      Project_Directory : Path_Name_Type;\n       From_Extended     : Extension_Origin;\n       In_Limited        : Boolean;\n       Packages_To_Check : String_List_Access);\n@@ -187,12 +187,13 @@ package body Prj.Part is\n    --  Returns the path name of a project file. Returns an empty string\n    --  if project file cannot be found.\n \n-   function Immediate_Directory_Of (Path_Name : Name_Id) return Name_Id;\n+   function Immediate_Directory_Of\n+     (Path_Name : Path_Name_Type) return Path_Name_Type;\n    --  Get the directory of the file with the specified path name.\n    --  This includes the directory separator as the last character.\n    --  Returns \"./\" if Path_Name contains no directory separator.\n \n-   function Project_Name_From (Path_Name : String) return Name_Id;\n+   function Project_Name_From (Path_Name : String) return File_Name_Type;\n    --  Returns the name of the project that corresponds to its path name.\n    --  Returns No_Name if the path name is invalid, because the corresponding\n    --  project name does not have the syntax of an ada identifier.\n@@ -215,11 +216,11 @@ package body Prj.Part is\n       Virtual_Name_Id : Name_Id;\n       --  Virtual extending project name id\n \n-      Virtual_Path_Id : Name_Id;\n+      Virtual_Path_Id : Path_Name_Type;\n       --  Fake path name of the virtual extending project. The directory is\n       --  the same directory as the extending all project.\n \n-      Virtual_Dir_Id  : constant Name_Id :=\n+      Virtual_Dir_Id  : constant Path_Name_Type :=\n         Immediate_Directory_Of (Path_Name_Of (Main_Project, In_Tree));\n       --  The directory of the extending all project\n \n@@ -339,15 +340,17 @@ package body Prj.Part is\n          K => Virtual_Name_Id,\n          E => (Name           => Virtual_Name_Id,\n                Node           => Virtual_Project,\n-               Canonical_Path => No_Name,\n+               Canonical_Path => No_Path,\n                Extended       => False));\n    end Create_Virtual_Extending_Project;\n \n    ----------------------------\n    -- Immediate_Directory_Of --\n    ----------------------------\n \n-   function Immediate_Directory_Of (Path_Name : Name_Id) return Name_Id is\n+   function Immediate_Directory_Of\n+     (Path_Name : Path_Name_Type) return Path_Name_Type\n+   is\n    begin\n       Get_Name_String (Path_Name);\n \n@@ -656,7 +659,7 @@ package body Prj.Part is\n             --  Store path and location in table Withs\n \n             Current_With :=\n-              (Path         => Token_Name,\n+              (Path         => File_Name_Type (Token_Name),\n                Location     => Token_Ptr,\n                Limited_With => Limited_With,\n                Node         => Current_With_Node,\n@@ -708,12 +711,12 @@ package body Prj.Part is\n      (Context_Clause    : With_Id;\n       In_Tree           : Project_Node_Tree_Ref;\n       Imported_Projects : out Project_Node_Id;\n-      Project_Directory : Name_Id;\n+      Project_Directory : Path_Name_Type;\n       From_Extended     : Extension_Origin;\n       In_Limited        : Boolean;\n       Packages_To_Check : String_List_Access)\n    is\n-      Current_With_Clause : With_Id := Context_Clause;\n+      Current_With_Clause : With_Id;\n \n       Current_Project  : Project_Node_Id := Empty_Node;\n       Previous_Project : Project_Node_Id := Empty_Node;\n@@ -729,6 +732,7 @@ package body Prj.Part is\n    begin\n       Imported_Projects := Empty_Node;\n \n+      Current_With_Clause := Context_Clause;\n       while Current_With_Clause /= No_With loop\n          Current_With := Withs.Table (Current_With_Clause);\n          Current_With_Clause := Current_With.Next;\n@@ -756,16 +760,16 @@ package body Prj.Part is\n \n                --  The project file cannot be found\n \n-               Error_Msg_Name_1 := Current_With.Path;\n-\n+               Error_Msg_File_1 := Current_With.Path;\n                Error_Msg (\"unknown project file: {\", Current_With.Location);\n \n                --  If this is not imported by the main project file,\n                --  display the import path.\n \n                if Project_Stack.Last > 1 then\n                   for Index in reverse 1 .. Project_Stack.Last loop\n-                     Error_Msg_Name_1 := Project_Stack.Table (Index).Path_Name;\n+                     Error_Msg_File_1 :=\n+                       File_Name_Type (Project_Stack.Table (Index).Path_Name);\n                      Error_Msg (\"\\imported by {\", Current_With.Location);\n                   end loop;\n                end if;\n@@ -790,7 +794,7 @@ package body Prj.Part is\n                end if;\n \n                Set_String_Value_Of\n-                 (Current_Project, In_Tree, Current_With.Path);\n+                 (Current_Project, In_Tree, Name_Id (Current_With.Path));\n                Set_Location_Of\n                  (Current_Project, In_Tree, Current_With.Location);\n \n@@ -800,7 +804,7 @@ package body Prj.Part is\n \n                if Limited_With and then Project_Stack.Last > 1 then\n                   declare\n-                     Canonical_Path_Name : Name_Id;\n+                     Canonical_Path_Name : Path_Name_Type;\n \n                   begin\n                      Name_Len := Resolved_Path'Length;\n@@ -893,21 +897,22 @@ package body Prj.Part is\n       In_Limited        : Boolean;\n       Packages_To_Check : String_List_Access)\n    is\n-      Normed_Path_Name    : Name_Id;\n-      Canonical_Path_Name : Name_Id;\n-      Project_Directory   : Name_Id;\n+      Normed_Path_Name    : Path_Name_Type;\n+      Canonical_Path_Name : Path_Name_Type;\n+      Project_Directory   : Path_Name_Type;\n       Project_Scan_State  : Saved_Project_Scan_State;\n       Source_Index        : Source_File_Index;\n \n       Extending : Boolean := False;\n \n-      Extended_Project    : Project_Node_Id := Empty_Node;\n+      Extended_Project : Project_Node_Id := Empty_Node;\n \n       A_Project_Name_And_Node : Tree_Private_Part.Project_Name_And_Node :=\n                                   Tree_Private_Part.Projects_Htable.Get_First\n                                     (In_Tree.Projects_HT);\n \n-      Name_From_Path : constant Name_Id := Project_Name_From (Path_Name);\n+      Name_From_Path : constant File_Name_Type :=\n+                         Project_Name_From (Path_Name);\n \n       Name_Of_Project : Name_Id := No_Name;\n \n@@ -944,20 +949,21 @@ package body Prj.Part is\n               Project_Stack.Table (Index).Canonical_Path_Name\n          then\n             Error_Msg (\"circular dependency detected\", Token_Ptr);\n-            Error_Msg_Name_1 := Normed_Path_Name;\n-            Error_Msg (\"\\  { is imported by\", Token_Ptr);\n+            Error_Msg_File_1 := File_Name_Type (Normed_Path_Name);\n+            Error_Msg (\"\\\\  { is imported by\", Token_Ptr);\n \n             for Current in reverse 1 .. Project_Stack.Last loop\n-               Error_Msg_Name_1 := Project_Stack.Table (Current).Path_Name;\n+               Error_Msg_File_1 :=\n+                 File_Name_Type (Project_Stack.Table (Current).Path_Name);\n \n                if Project_Stack.Table (Current).Canonical_Path_Name /=\n                     Canonical_Path_Name\n                then\n                   Error_Msg\n-                    (\"\\  { which itself is imported by\", Token_Ptr);\n+                    (\"\\\\  { which itself is imported by\", Token_Ptr);\n \n                else\n-                  Error_Msg (\"\\  {\", Token_Ptr);\n+                  Error_Msg (\"\\\\  {\", Token_Ptr);\n                   exit;\n                end if;\n             end loop;\n@@ -1054,12 +1060,12 @@ package body Prj.Part is\n       Tree.Reset_State;\n       Scan (In_Tree);\n \n-      if Name_From_Path = No_Name then\n+      if Name_From_Path = No_File then\n \n          --  The project file name is not correct (no or bad extension,\n          --  or not following Ada identifier's syntax).\n \n-         Error_Msg_Name_1 := Canonical_Path_Name;\n+         Error_Msg_File_1 := File_Name_Type (Canonical_Path_Name);\n          Error_Msg (\"?{ is not a valid path name for a project file\",\n                     Token_Ptr);\n       end if;\n@@ -1172,15 +1178,15 @@ package body Prj.Part is\n          Canonical_Case_File_Name (Name_Buffer (1 .. Name_Len));\n \n          declare\n-            Expected_Name : constant Name_Id := Name_Find;\n+            Expected_Name : constant File_Name_Type := Name_Find;\n \n          begin\n             --  Output a warning if the actual name is not the expected name\n \n-            if Name_From_Path /= No_Name\n+            if Name_From_Path /= No_File\n               and then Expected_Name /= Name_From_Path\n             then\n-               Error_Msg_Name_1 := Expected_Name;\n+               Error_Msg_File_1 := Expected_Name;\n                Error_Msg (\"?file name does not match unit name, \" &\n                           \"should be `{\" & Project_File_Extension & \"`\",\n                           Token_Ptr);\n@@ -1217,8 +1223,9 @@ package body Prj.Part is\n \n          declare\n             Name_And_Node : Tree_Private_Part.Project_Name_And_Node :=\n-              Tree_Private_Part.Projects_Htable.Get_First\n-                (In_Tree.Projects_HT);\n+                              Tree_Private_Part.Projects_Htable.Get_First\n+                                (In_Tree.Projects_HT);\n+\n             Project_Name : Name_Id := Name_And_Node.Name;\n \n          begin\n@@ -1238,9 +1245,9 @@ package body Prj.Part is\n             if Project_Name /= No_Name then\n                Error_Msg_Name_1 := Project_Name;\n                Error_Msg\n-                 (\"duplicate project name {\", Location_Of (Project, In_Tree));\n-               Error_Msg_Name_1 :=\n-                 Path_Name_Of (Name_And_Node.Node, In_Tree);\n+                 (\"duplicate project name %%\", Location_Of (Project, In_Tree));\n+               Error_Msg_File_1 :=\n+                 File_Name_Type (Path_Name_Of (Name_And_Node.Node, In_Tree));\n                Error_Msg\n                  (\"\\already in {\", Location_Of (Project, In_Tree));\n \n@@ -1265,7 +1272,8 @@ package body Prj.Part is\n          Expect (Tok_String_Literal, \"literal string\");\n \n          if Token = Tok_String_Literal then\n-            Set_Extended_Project_Path_Of (Project, In_Tree, Token_Name);\n+            Set_Extended_Project_Path_Of\n+              (Project, In_Tree, Path_Name_Type (Token_Name));\n \n             declare\n                Original_Path_Name : constant String :=\n@@ -1282,21 +1290,22 @@ package body Prj.Part is\n \n                   --  We could not find the project file to extend\n \n-                  Error_Msg_Name_1 := Token_Name;\n-\n+                  Error_Msg_File_1 := File_Name_Type (Token_Name);\n                   Error_Msg (\"unknown project file: {\", Token_Ptr);\n \n                   --  If we are not in the main project file, display the\n                   --  import path.\n \n                   if Project_Stack.Last > 1 then\n-                     Error_Msg_Name_1 :=\n-                       Project_Stack.Table (Project_Stack.Last).Path_Name;\n+                     Error_Msg_File_1 :=\n+                       File_Name_Type\n+                         (Project_Stack.Table (Project_Stack.Last).Path_Name);\n                      Error_Msg (\"\\extended by {\", Token_Ptr);\n \n                      for Index in reverse 1 .. Project_Stack.Last - 1 loop\n-                        Error_Msg_Name_1 :=\n-                          Project_Stack.Table (Index).Path_Name;\n+                        Error_Msg_File_1 :=\n+                          File_Name_Type\n+                            (Project_Stack.Table (Index).Path_Name);\n                         Error_Msg (\"\\imported by {\", Token_Ptr);\n                      end loop;\n                   end if;\n@@ -1351,7 +1360,8 @@ package body Prj.Part is\n                Imported := Project_Node_Of (With_Clause, In_Tree);\n \n                if Is_Extending_All (With_Clause, In_Tree) then\n-                  Error_Msg_Name_1 := Name_Of (Imported, In_Tree);\n+                  Error_Msg_File_1 :=\n+                    File_Name_Type (Name_Of (Imported, In_Tree));\n                   Error_Msg (\"cannot import extending-all project {\",\n                              Token_Ptr);\n                   exit With_Clause_Loop;\n@@ -1385,7 +1395,7 @@ package body Prj.Part is\n          Name_Len := Name_Len - 1;\n \n          declare\n-            Parent_Name  : constant Name_Id := Name_Find;\n+            Parent_Name  : constant File_Name_Type := Name_Find;\n             Parent_Found : Boolean := False;\n             With_Clause  : Project_Node_Id :=\n                              First_With_Clause_Of (Project, In_Tree);\n@@ -1395,7 +1405,7 @@ package body Prj.Part is\n \n             if Extended_Project /= Empty_Node then\n                Parent_Found :=\n-                 Name_Of (Extended_Project, In_Tree) = Parent_Name;\n+                 Name_Of (Extended_Project, In_Tree) = Name_Id (Parent_Name);\n             end if;\n \n             --  If the parent project is not the extended project,\n@@ -1404,16 +1414,16 @@ package body Prj.Part is\n             while not Parent_Found and then With_Clause /= Empty_Node loop\n                Parent_Found :=\n                  Name_Of (Project_Node_Of (With_Clause, In_Tree), In_Tree) =\n-                    Parent_Name;\n+                    Name_Id (Parent_Name);\n                With_Clause := Next_With_Clause_Of (With_Clause, In_Tree);\n             end loop;\n \n             --  If the parent project was not found, report an error\n \n             if not Parent_Found then\n                Error_Msg_Name_1 := Name_Of_Project;\n-               Error_Msg_Name_2 := Parent_Name;\n-               Error_Msg (\"project { does not import or extend project {\",\n+               Error_Msg_File_1 := Parent_Name;\n+               Error_Msg (\"project %% does not import or extend project {\",\n                           Location_Of (Project, In_Tree));\n             end if;\n          end;\n@@ -1537,7 +1547,7 @@ package body Prj.Part is\n    -- Project_Name_From --\n    -----------------------\n \n-   function Project_Name_From (Path_Name : String) return Name_Id is\n+   function Project_Name_From (Path_Name : String) return File_Name_Type is\n       Canonical : String (1 .. Path_Name'Length) := Path_Name;\n       First : Natural := Canonical'Last;\n       Last  : Natural := First;\n@@ -1553,7 +1563,7 @@ package body Prj.Part is\n       --  If the path name is empty, return No_Name to indicate failure\n \n       if First = 0 then\n-         return No_Name;\n+         return No_File;\n       end if;\n \n       Canonical_Case_File_Name (Canonical);\n@@ -1588,21 +1598,21 @@ package body Prj.Part is\n          else\n             --  Not the correct extension, return No_Name to indicate failure\n \n-            return No_Name;\n+            return No_File;\n          end if;\n \n       --  If no dot in the path name, return No_Name to indicate failure\n \n       else\n-         return No_Name;\n+         return No_File;\n       end if;\n \n       First := First + 1;\n \n       --  If the extension is the file name, return No_Name to indicate failure\n \n       if First > Last then\n-         return No_Name;\n+         return No_File;\n       end if;\n \n       --  Put the name in lower case into Name_Buffer\n@@ -1617,7 +1627,7 @@ package body Prj.Part is\n \n       loop\n          if not Is_Letter (Name_Buffer (Index)) then\n-            return No_Name;\n+            return No_File;\n \n          else\n             loop\n@@ -1627,7 +1637,7 @@ package body Prj.Part is\n \n                if Name_Buffer (Index) = '_' then\n                   if Name_Buffer (Index + 1) = '_' then\n-                     return No_Name;\n+                     return No_File;\n                   end if;\n                end if;\n \n@@ -1636,7 +1646,7 @@ package body Prj.Part is\n                if Name_Buffer (Index) /= '_'\n                  and then not Is_Alphanumeric (Name_Buffer (Index))\n                then\n-                  return No_Name;\n+                  return No_File;\n                end if;\n \n             end loop;\n@@ -1650,7 +1660,7 @@ package body Prj.Part is\n                return Name_Find;\n \n             else\n-               return No_Name;\n+               return No_File;\n             end if;\n \n          elsif Name_Buffer (Index) = '-' then"}, {"sha": "5dd355147f6c20d6208c1b540b513022e048cf1a", "filename": "gcc/ada/prj-pp.adb", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-pp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-pp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-pp.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,7 +26,6 @@\n \n with Ada.Characters.Handling; use Ada.Characters.Handling;\n \n-with Namet;    use Namet;\n with Output;   use Output;\n with Snames;\n \n@@ -94,6 +93,7 @@ package body Prj.PP is\n       --  Outputs the indentation at the beginning of the line\n \n       procedure Output_String (S : Name_Id);\n+      procedure Output_String (S : Path_Name_Type);\n       --  Outputs a string using the default output procedures\n \n       procedure Write_Empty_Line (Always : Boolean := False);\n@@ -229,6 +229,11 @@ package body Prj.PP is\n          Column := Column + 1;\n       end Output_String;\n \n+      procedure Output_String (S : Path_Name_Type) is\n+      begin\n+         Output_String (Name_Id (S));\n+      end Output_String;\n+\n       ----------------\n       -- Start_Line --\n       ----------------\n@@ -335,7 +340,7 @@ package body Prj.PP is\n \n                   --  Check if this project extends another project\n \n-                  if Extended_Project_Path_Of (Node, In_Tree) /= No_Name then\n+                  if Extended_Project_Path_Of (Node, In_Tree) /= No_Path then\n                      Write_String (\" extends \");\n \n                      if Is_Extending_All (Node, In_Tree) then"}, {"sha": "fe279f9cd1b8b71a0c18a0831c026d2a32b0190a", "filename": "gcc/ada/prj-proc.adb", "status": "modified", "additions": 33, "deletions": 22, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-proc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-proc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-proc.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -25,7 +25,6 @@\n ------------------------------------------------------------------------------\n \n with Err_Vars; use Err_Vars;\n-with Namet;    use Namet;\n with Opt;      use Opt;\n with Osint;    use Osint;\n with Output;   use Output;\n@@ -142,7 +141,7 @@ package body Prj.Proc is\n \n    procedure Add (To_Exp : in out Name_Id; Str : Name_Id) is\n    begin\n-      if To_Exp = Types.No_Name or else To_Exp = Empty_String then\n+      if To_Exp = No_Name or else To_Exp = Empty_String then\n \n          --  To_Exp is nil or empty. The result is Str\n \n@@ -568,17 +567,19 @@ package body Prj.Proc is\n             when N_Variable_Reference | N_Attribute_Reference =>\n \n                declare\n-                  The_Project     : Project_Id  := Project;\n-                  The_Package     : Package_Id  := Pkg;\n-                  The_Name        : Name_Id     := No_Name;\n-                  The_Variable_Id : Variable_Id := No_Variable;\n+                  The_Project     : Project_Id     := Project;\n+                  The_Package     : Package_Id     := Pkg;\n+                  The_Name        : Name_Id        := No_Name;\n+                  The_Variable_Id : Variable_Id    := No_Variable;\n                   The_Variable    : Variable_Value;\n                   Term_Project    : constant Project_Node_Id :=\n-                    Project_Node_Of\n-                      (The_Current_Term, From_Project_Node_Tree);\n+                                      Project_Node_Of\n+                                        (The_Current_Term,\n+                                         From_Project_Node_Tree);\n                   Term_Package    : constant Project_Node_Id :=\n-                    Package_Node_Of\n-                      (The_Current_Term, From_Project_Node_Tree);\n+                                      Package_Node_Of\n+                                        (The_Current_Term,\n+                                         From_Project_Node_Tree);\n                   Index           : Name_Id   := No_Name;\n \n                begin\n@@ -589,6 +590,7 @@ package body Prj.Proc is\n \n                      The_Name :=\n                        Name_Of (Term_Project, From_Project_Node_Tree);\n+\n                      The_Project := Imported_Or_Extended_Project_From\n                                       (Project   => Project,\n                                        In_Tree   => In_Tree,\n@@ -601,6 +603,7 @@ package body Prj.Proc is\n \n                      The_Name :=\n                        Name_Of (Term_Package, From_Project_Node_Tree);\n+\n                      The_Package := In_Tree.Projects.Table\n                                       (The_Project).Decl.Packages;\n \n@@ -1139,7 +1142,7 @@ package body Prj.Proc is\n       Follow_Links           : Boolean := True;\n       When_No_Sources        : Error_Warning := Error)\n    is\n-      Obj_Dir    : Name_Id;\n+      Obj_Dir    : Path_Name_Type;\n       Extending  : Project_Id;\n       Extending2 : Project_Id;\n \n@@ -1174,7 +1177,7 @@ package body Prj.Proc is\n         and then Is_Extending_All (From_Project_Node, From_Project_Node_Tree)\n       then\n          declare\n-            Object_Dir : constant Name_Id :=\n+            Object_Dir : constant Path_Name_Type :=\n                            In_Tree.Projects.Table (Project).Object_Directory;\n          begin\n             for Index in\n@@ -1219,7 +1222,7 @@ package body Prj.Proc is\n \n                         if Error_Report = null then\n                            Error_Msg\n-                             (\"project { cannot be extended by a virtual \" &\n+                             (\"project % cannot be extended by a virtual \" &\n                               \"project with the same object directory\",\n                               In_Tree.Projects.Table (Proj).Location);\n                         else\n@@ -1239,7 +1242,7 @@ package body Prj.Proc is\n \n                         if Error_Report = null then\n                            Error_Msg\n-                             (\"project { cannot extend project {\",\n+                             (\"project %% cannot extend project %%\",\n                               In_Tree.Projects.Table (Extending2).Location);\n                            Error_Msg\n                              (\"\\they share the same object directory\",\n@@ -1436,7 +1439,9 @@ package body Prj.Proc is\n \n                   declare\n                      Current_Item_Name : constant Name_Id :=\n-                       Name_Of (Current_Item, From_Project_Node_Tree);\n+                                           Name_Of\n+                                             (Current_Item,\n+                                              From_Project_Node_Tree);\n                      --  The name of the attribute\n \n                      New_Array  : Array_Id;\n@@ -1529,10 +1534,10 @@ package body Prj.Proc is\n                      --  Find the project where the value is declared\n \n                      Orig_Project_Name :=\n-                       Name_Of\n-                         (Associative_Project_Of\n-                              (Current_Item, From_Project_Node_Tree),\n-                          From_Project_Node_Tree);\n+                         Name_Of\n+                          (Associative_Project_Of\n+                             (Current_Item, From_Project_Node_Tree),\n+                              From_Project_Node_Tree);\n \n                      for Index in Project_Table.First ..\n                                   Project_Table.Last\n@@ -1786,7 +1791,8 @@ package body Prj.Proc is\n \n                                  if Error_Report = null then\n                                     Error_Msg\n-                                      (\"value { is illegal for typed string %\",\n+                                      (\"value %% is illegal for \"\n+                                       & \"typed string %\",\n                                        Location_Of\n                                          (Current_Item,\n                                           From_Project_Node_Tree));\n@@ -1799,6 +1805,10 @@ package body Prj.Proc is\n                                        Get_Name_String (Error_Msg_Name_2) &\n                                        \"\"\"\",\n                                        Project, In_Tree);\n+                                    --  Calls like this to Error_Report are\n+                                    --  wrong, since they don't properly case\n+                                    --  and decode names corresponding to the\n+                                    --  ordinary case of % insertion ???\n                                  end if;\n                               end if;\n                            end;\n@@ -2404,7 +2414,8 @@ package body Prj.Proc is\n               Location_Of (From_Project_Node, From_Project_Node_Tree);\n \n             Processed_Data.Display_Directory :=\n-              Directory_Of (From_Project_Node, From_Project_Node_Tree);\n+              Path_Name_Type\n+                (Directory_Of (From_Project_Node, From_Project_Node_Tree));\n             Get_Name_String (Processed_Data.Display_Directory);\n             Canonical_Case_File_Name (Name_Buffer (1 .. Name_Len));\n             Processed_Data.Directory := Name_Find;"}, {"sha": "e2f7f2d160c861f70e0cb723f03245ef7143d708", "filename": "gcc/ada/prj-tree.adb", "status": "modified", "additions": 21, "deletions": 21, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-tree.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-tree.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-tree.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -111,13 +111,13 @@ package body Prj.Tree is\n            (Kind             => N_Comment_Zones,\n             Expr_Kind        => Undefined,\n             Location         => No_Location,\n-            Directory        => No_Name,\n+            Directory        => No_Path,\n             Variables        => Empty_Node,\n             Packages         => Empty_Node,\n             Pkg_Id           => Empty_Package,\n             Name             => No_Name,\n             Src_Index        => 0,\n-            Path_Name        => No_Name,\n+            Path_Name        => No_Path,\n             Value            => No_Name,\n             Field1           => Empty_Node,\n             Field2           => Empty_Node,\n@@ -159,13 +159,13 @@ package body Prj.Tree is\n                Flag2            =>\n                  Comments.Table (J).Is_Followed_By_Empty_Line,\n                Location         => No_Location,\n-               Directory        => No_Name,\n+               Directory        => No_Path,\n                Variables        => Empty_Node,\n                Packages         => Empty_Node,\n                Pkg_Id           => Empty_Package,\n                Name             => No_Name,\n                Src_Index        => 0,\n-               Path_Name        => No_Name,\n+               Path_Name        => No_Path,\n                Value            => Comments.Table (J).Value,\n                Field1           => Empty_Node,\n                Field2           => Empty_Node,\n@@ -323,14 +323,14 @@ package body Prj.Tree is\n          In_Tree.Project_Nodes.Table (Zone) :=\n         (Kind             => N_Comment_Zones,\n          Location         => No_Location,\n-         Directory        => No_Name,\n+         Directory        => No_Path,\n          Expr_Kind        => Undefined,\n          Variables        => Empty_Node,\n          Packages         => Empty_Node,\n          Pkg_Id           => Empty_Package,\n          Name             => No_Name,\n          Src_Index        => 0,\n-         Path_Name        => No_Name,\n+         Path_Name        => No_Path,\n          Value            => No_Name,\n          Field1           => Empty_Node,\n          Field2           => Empty_Node,\n@@ -397,14 +397,14 @@ package body Prj.Tree is\n         (Project_Node_Table.Last (In_Tree.Project_Nodes)) :=\n         (Kind             => Of_Kind,\n          Location         => No_Location,\n-         Directory        => No_Name,\n+         Directory        => No_Path,\n          Expr_Kind        => And_Expr_Kind,\n          Variables        => Empty_Node,\n          Packages         => Empty_Node,\n          Pkg_Id           => Empty_Package,\n          Name             => No_Name,\n          Src_Index        => 0,\n-         Path_Name        => No_Name,\n+         Path_Name        => No_Path,\n          Value            => No_Name,\n          Field1           => Empty_Node,\n          Field2           => Empty_Node,\n@@ -432,13 +432,13 @@ package body Prj.Tree is\n               (Kind             => N_Comment_Zones,\n                Expr_Kind        => Undefined,\n                Location         => No_Location,\n-               Directory        => No_Name,\n+               Directory        => No_Path,\n                Variables        => Empty_Node,\n                Packages         => Empty_Node,\n                Pkg_Id           => Empty_Package,\n                Name             => No_Name,\n                Src_Index        => 0,\n-               Path_Name        => No_Name,\n+               Path_Name        => No_Path,\n                Value            => No_Name,\n                Field1           => Empty_Node,\n                Field2           => Empty_Node,\n@@ -464,13 +464,13 @@ package body Prj.Tree is\n                   Flag2            =>\n                     Comments.Table (J).Is_Followed_By_Empty_Line,\n                   Location         => No_Location,\n-                  Directory        => No_Name,\n+                  Directory        => No_Path,\n                   Variables        => Empty_Node,\n                   Packages         => Empty_Node,\n                   Pkg_Id           => Empty_Package,\n                   Name             => No_Name,\n                   Src_Index        => 0,\n-                  Path_Name        => No_Name,\n+                  Path_Name        => No_Path,\n                   Value            => Comments.Table (J).Value,\n                   Field1           => Empty_Node,\n                   Field2           => Empty_Node,\n@@ -510,7 +510,7 @@ package body Prj.Tree is\n \n    function Directory_Of\n      (Node    : Project_Node_Id;\n-      In_Tree : Project_Node_Tree_Ref) return Name_Id is\n+      In_Tree : Project_Node_Tree_Ref) return Path_Name_Type is\n    begin\n       pragma Assert\n         (Node /= Empty_Node\n@@ -619,14 +619,14 @@ package body Prj.Tree is\n \n    function Extended_Project_Path_Of\n      (Node    : Project_Node_Id;\n-      In_Tree : Project_Node_Tree_Ref) return Name_Id\n+      In_Tree : Project_Node_Tree_Ref) return Path_Name_Type\n    is\n    begin\n       pragma Assert\n         (Node /= Empty_Node\n           and then\n             In_Tree.Project_Nodes.Table (Node).Kind = N_Project);\n-      return In_Tree.Project_Nodes.Table (Node).Value;\n+      return Path_Name_Type (In_Tree.Project_Nodes.Table (Node).Value);\n    end Extended_Project_Path_Of;\n \n    --------------------------\n@@ -1325,7 +1325,7 @@ package body Prj.Tree is\n \n    function Path_Name_Of\n      (Node    : Project_Node_Id;\n-      In_Tree : Project_Node_Tree_Ref) return Name_Id\n+      In_Tree : Project_Node_Tree_Ref) return Path_Name_Type\n    is\n    begin\n       pragma Assert\n@@ -1716,7 +1716,7 @@ package body Prj.Tree is\n    procedure Set_Directory_Of\n      (Node    : Project_Node_Id;\n       In_Tree : Project_Node_Tree_Ref;\n-      To      : Name_Id)\n+      To      : Path_Name_Type)\n    is\n    begin\n       pragma Assert\n@@ -2187,14 +2187,14 @@ package body Prj.Tree is\n    procedure Set_Extended_Project_Path_Of\n      (Node    : Project_Node_Id;\n       In_Tree : Project_Node_Tree_Ref;\n-      To      : Name_Id)\n+      To      : Path_Name_Type)\n    is\n    begin\n       pragma Assert\n         (Node /= Empty_Node\n           and then\n             In_Tree.Project_Nodes.Table (Node).Kind = N_Project);\n-      In_Tree.Project_Nodes.Table (Node).Value := To;\n+      In_Tree.Project_Nodes.Table (Node).Value := Name_Id (To);\n    end Set_Extended_Project_Path_Of;\n \n    ------------------------------\n@@ -2422,7 +2422,7 @@ package body Prj.Tree is\n    procedure Set_Path_Name_Of\n      (Node    : Project_Node_Id;\n       In_Tree : Project_Node_Tree_Ref;\n-      To      : Name_Id)\n+      To      : Path_Name_Type)\n    is\n    begin\n       pragma Assert"}, {"sha": "470e0a8e84a06ea9caaf947138f840ad5afc388c", "filename": "gcc/ada/prj-tree.ads", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-tree.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-tree.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-tree.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -266,7 +266,7 @@ package Prj.Tree is\n \n    function Directory_Of\n      (Node    : Project_Node_Id;\n-      In_Tree : Project_Node_Tree_Ref) return Name_Id;\n+      In_Tree : Project_Node_Tree_Ref) return Path_Name_Type;\n    pragma Inline (Directory_Of);\n    --  Only valid for N_Project nodes\n \n@@ -310,7 +310,7 @@ package Prj.Tree is\n \n    function Path_Name_Of\n      (Node    : Project_Node_Id;\n-      In_Tree : Project_Node_Tree_Ref) return Name_Id;\n+      In_Tree : Project_Node_Tree_Ref) return Path_Name_Type;\n    pragma Inline (Path_Name_Of);\n    --  Only valid for N_Project and N_With_Clause nodes\n \n@@ -354,7 +354,7 @@ package Prj.Tree is\n \n    function Extended_Project_Path_Of\n      (Node    : Project_Node_Id;\n-      In_Tree : Project_Node_Tree_Ref) return Name_Id;\n+      In_Tree : Project_Node_Tree_Ref) return Path_Name_Type;\n    pragma Inline (Extended_Project_Path_Of);\n    --  Only valid for N_With_Clause nodes\n \n@@ -629,7 +629,7 @@ package Prj.Tree is\n    procedure Set_Directory_Of\n      (Node    : Project_Node_Id;\n       In_Tree : Project_Node_Tree_Ref;\n-      To      : Name_Id);\n+      To      : Path_Name_Type);\n    pragma Inline (Set_Directory_Of);\n \n    procedure Set_Expression_Kind_Of\n@@ -669,7 +669,7 @@ package Prj.Tree is\n    procedure Set_Path_Name_Of\n      (Node    : Project_Node_Id;\n       In_Tree : Project_Node_Tree_Ref;\n-      To      : Name_Id);\n+      To      : Path_Name_Type);\n    pragma Inline (Set_Path_Name_Of);\n \n    procedure Set_String_Value_Of\n@@ -705,7 +705,7 @@ package Prj.Tree is\n    procedure Set_Extended_Project_Path_Of\n      (Node    : Project_Node_Id;\n       In_Tree : Project_Node_Tree_Ref;\n-      To      : Name_Id);\n+      To      : Path_Name_Type);\n    pragma Inline (Set_Extended_Project_Path_Of);\n \n    procedure Set_Project_Node_Of\n@@ -900,16 +900,17 @@ package Prj.Tree is\n \n    package Tree_Private_Part is\n \n-      --  This is conceptually in the private part.\n-      --  However, for efficiency, some packages are accessing it directly.\n+      --  This is conceptually in the private part\n+\n+      --  However, for efficiency, some packages are accessing it directly\n \n       type Project_Node_Record is record\n \n          Kind : Project_Node_Kind;\n \n          Location : Source_Ptr := No_Location;\n \n-         Directory : Name_Id       := No_Name;\n+         Directory : Path_Name_Type := No_Path;\n          --  Only for N_Project\n \n          Expr_Kind : Variable_Kind := Undefined;\n@@ -938,7 +939,7 @@ package Prj.Tree is\n          --  Index of a unit in a multi-unit source.\n          --  Onli for some N_Attribute_Declaration and N_Literal_String.\n \n-         Path_Name : Name_Id := No_Name;\n+         Path_Name : Path_Name_Type := No_Path;\n          --  See below for what Project_Node_Kind it is used\n \n          Value : Name_Id := No_Name;\n@@ -1204,7 +1205,7 @@ package Prj.Tree is\n          Node : Project_Node_Id;\n          --  Node of the project in table Project_Nodes\n \n-         Canonical_Path : Name_Id;\n+         Canonical_Path : Path_Name_Type;\n          --  Resolved and canonical path of the project file\n \n          Extended : Boolean;\n@@ -1214,7 +1215,7 @@ package Prj.Tree is\n       No_Project_Name_And_Node : constant Project_Name_And_Node :=\n         (Name           => No_Name,\n          Node           => Empty_Node,\n-         Canonical_Path => No_Name,\n+         Canonical_Path => No_Path,\n          Extended       => True);\n \n       package Projects_Htable is new GNAT.Dynamic_HTables.Simple_HTable\n@@ -1226,9 +1227,8 @@ package Prj.Tree is\n          Equal      => \"=\");\n       --  This hash table contains a mapping of project names to project nodes.\n       --  Note that this hash table contains only the nodes whose Kind is\n-      --  N_Project. It is used to find the node of a project from its\n-      --  name, and to verify if a project has already been parsed, knowing\n-      --  its name.\n+      --  N_Project. It is used to find the node of a project from its name,\n+      --  and to verify if a project has already been parsed, knowing its name.\n \n    end Tree_Private_Part;\n "}, {"sha": "4c00ac49a13b70cfe78dc9e19a0b7590a8d2983b", "filename": "gcc/ada/prj-util.adb", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-util.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,9 +26,8 @@\n \n with Ada.Unchecked_Deallocation;\n \n-with GNAT.Case_Util; use GNAT.Case_Util;\n+with System.Case_Util; use System.Case_Util;\n \n-with Namet;    use Namet;\n with Osint;    use Osint;\n with Output;   use Output;\n with Prj.Com;\n@@ -77,9 +76,9 @@ package body Prj.Util is\n    function Executable_Of\n      (Project  : Project_Id;\n       In_Tree  : Project_Tree_Ref;\n-      Main     : Name_Id;\n+      Main     : File_Name_Type;\n       Index    : Int;\n-      Ada_Main : Boolean := True) return Name_Id\n+      Ada_Main : Boolean := True) return File_Name_Type\n    is\n       pragma Assert (Project /= No_Project);\n \n@@ -94,7 +93,7 @@ package body Prj.Util is\n \n       Executable : Variable_Value :=\n                      Prj.Util.Value_Of\n-                       (Name                    => Main,\n+                       (Name                    => Name_Id (Main),\n                         Index                   => Index,\n                         Attribute_Or_Array_Name => Name_Executable,\n                         In_Package              => Builder_Package,\n@@ -184,7 +183,7 @@ package body Prj.Util is\n \n             declare\n                Saved_EEOT : constant Name_Id := Executable_Extension_On_Target;\n-               Result     : Name_Id;\n+               Result     : File_Name_Type;\n \n             begin\n                if Executable_Suffix /= Nil_Variable_Value\n@@ -193,7 +192,7 @@ package body Prj.Util is\n                   Executable_Extension_On_Target := Executable_Suffix.Value;\n                end if;\n \n-               Result := Executable_Name (Executable.Value);\n+               Result := Executable_Name (File_Name_Type (Executable.Value));\n                Executable_Extension_On_Target := Saved_EEOT;\n                return Result;\n             end;\n@@ -348,7 +347,7 @@ package body Prj.Util is\n       File_Name (1 .. Name'Length) := Name;\n       File_Name (File_Name'Last) := ASCII.NUL;\n       FD := Open_Read (Name => File_Name'Address,\n-                            Fmode => GNAT.OS_Lib.Text);\n+                       Fmode => GNAT.OS_Lib.Text);\n       if FD = Invalid_FD then\n          File := null;\n       else"}, {"sha": "4163f98b2c88404b83d8ef868956f6d014940ddf", "filename": "gcc/ada/prj-util.ads", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fprj-util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-util.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2001-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -31,9 +31,9 @@ package Prj.Util is\n    function Executable_Of\n      (Project  : Project_Id;\n       In_Tree  : Project_Tree_Ref;\n-      Main     : Name_Id;\n+      Main     : File_Name_Type;\n       Index    : Int;\n-      Ada_Main : Boolean := True) return Name_Id;\n+      Ada_Main : Boolean := True) return File_Name_Type;\n    --  Return the value of the attribute Builder'Executable for file Main in\n    --  the project Project, if it exists. If there is no attribute Executable\n    --  for Main, remove the suffix from Main; then, if the attribute\n@@ -62,9 +62,8 @@ package Prj.Util is\n       Src_Index : Int := 0;\n       In_Array  : Array_Element_Id;\n       In_Tree   : Project_Tree_Ref) return Variable_Value;\n-   --  Get a string array component (single String or String list).\n-   --  Returns Nil_Variable_Value if there is no component Index\n-   --  or if In_Array is null.\n+   --  Get a string array component (single String or String list). Returns\n+   --  Nil_Variable_Value if no component Index or if In_Array is null.\n    --\n    --  Depending on the attribute (only attributes may be associative arrays)\n    --  the index may or may not be case sensitive. If the index is not case"}, {"sha": "4422064b28fd0245ec58fa06ea2df9817fefe7f7", "filename": "gcc/ada/scans.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fscans.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fscans.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fscans.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -31,7 +31,6 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Namet;  use Namet;\n with Snames; use Snames;\n \n package body Scans is"}, {"sha": "c838865b4774581e74163966b67d17d628cbce37", "filename": "gcc/ada/scans.ads", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fscans.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fscans.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fscans.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -31,6 +31,7 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n+with Namet;  use Namet;\n with Types;  use Types;\n with Uintp;  use Uintp;\n with Urealp; use Urealp;"}, {"sha": "a4de99e73a087758ea1ca264d283f5b88bc26b75", "filename": "gcc/ada/sem_ch2.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fsem_ch2.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fsem_ch2.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch2.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,6 +26,7 @@\n \n with Atree;    use Atree;\n with Errout;   use Errout;\n+with Namet;    use Namet;\n with Opt;      use Opt;\n with Restrict; use Restrict;\n with Rident;   use Rident;"}, {"sha": "d2886946fd8a858444e87e50a1190dd647ba70c5", "filename": "gcc/ada/sinput-c.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fsinput-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fsinput-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinput-c.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,13 +24,12 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n-with Namet;  use Namet;\n with Opt;    use Opt;\n with System; use System;\n \n with Ada.Unchecked_Conversion;\n \n-with GNAT.OS_Lib; use GNAT.OS_Lib;\n+with System.OS_Lib; use System.OS_Lib;\n \n package body Sinput.C is\n \n@@ -53,8 +52,8 @@ package body Sinput.C is\n \n       Actual_Len : Integer;\n \n-      Path_Id : Name_Id;\n-      File_Id : Name_Id;\n+      Path_Id : File_Name_Type;\n+      File_Id : File_Name_Type;\n \n    begin\n       if Path = \"\" then"}, {"sha": "44bced22dab7c8896c6a20d4ce83896f5faf4769", "filename": "gcc/ada/styleg-c.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fstyleg-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Fstyleg-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstyleg-c.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -227,7 +227,7 @@ package body Styleg.C is\n                   Set_Casing (Cas);\n                   Error_Msg_Name_1 := Name_Enter;\n                   Error_Msg_N\n-                    (\"(style) bad casing of { declared in Standard\", Ref);\n+                    (\"(style) bad casing of %% declared in Standard\", Ref);\n                end if;\n             end if;\n          end if;"}, {"sha": "7044271532f8ba266e86a58ccfd804b845b59f58", "filename": "gcc/ada/tempdir.adb", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ftempdir.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ftempdir.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftempdir.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2003-2005 Free Software Foundation, Inc.          --\n+--          Copyright (C) 2003-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,7 +26,6 @@\n \n with GNAT.Directory_Operations; use GNAT.Directory_Operations;\n \n-with Namet;  use Namet;\n with Opt;    use Opt;\n with Output; use Output;\n \n@@ -38,9 +37,13 @@ package body Tempdir is\n    No_Dir   : aliased String  := \"\";\n    Temp_Dir : String_Access   := No_Dir'Access;\n \n+   ----------------------\n+   -- Create_Temp_File --\n+   ----------------------\n+\n    procedure Create_Temp_File\n      (FD   : out File_Descriptor;\n-      Name : out Name_Id)\n+      Name : out Path_Name_Type)\n    is\n       File_Name : String_Access;\n       Current_Dir : constant String := Get_Current_Dir;\n@@ -90,13 +93,13 @@ package body Tempdir is\n       end if;\n \n       if FD = Invalid_FD then\n-         Name := No_Name;\n+         Name := No_Path;\n \n       else\n          declare\n             Path_Name : constant String :=\n-              Normalize_Pathname\n-                (Directory & Directory_Separator & File_Name.all);\n+                          Normalize_Pathname\n+                            (Directory & Directory_Separator & File_Name.all);\n \n          begin\n             Name_Len := Path_Name'Length;"}, {"sha": "82c735a1b93f1582e2a53dd43668ab69656c88c8", "filename": "gcc/ada/tempdir.ads", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ftempdir.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Ftempdir.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftempdir.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2003 Free Software Foundation, Inc.               --\n+--          Copyright (C) 2003-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -29,14 +29,15 @@\n --  designates an absolute path, temporary files are create in this directory.\n --  Otherwise, temporary files are created in the current working directory.\n \n-with GNAT.OS_Lib; use GNAT.OS_Lib;\n-with Types;       use Types;\n+with Namet; use Namet;\n+\n+with System.OS_Lib; use System.OS_Lib;\n \n package Tempdir is\n \n    procedure Create_Temp_File\n      (FD   : out File_Descriptor;\n-      Name : out Name_Id);\n+      Name : out Path_Name_Type);\n    --  Create a temporary text file and return its file descriptor and\n    --  its path name as a Name_Id. If environment variable TMPDIR is defined\n    --  and its value is an absolute path, the temp file is created in the"}, {"sha": "f0873229a55f73538cdb7bc9860d5f2bc2d2bed0", "filename": "gcc/ada/uname.adb", "status": "modified", "additions": 19, "deletions": 9, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Funame.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Funame.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Funame.adb?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -36,7 +36,6 @@ with Casing;   use Casing;\n with Einfo;    use Einfo;\n with Hostparm;\n with Lib;      use Lib;\n-with Namet;    use Namet;\n with Nlists;   use Nlists;\n with Output;   use Output;\n with Sinfo;    use Sinfo;\n@@ -138,7 +137,7 @@ package body Uname is\n \n       while Name_Buffer (Name_Len) /= '.' loop\n          if Name_Len = 1 then\n-            return No_Name; -- not a child or subunit name\n+            return No_Unit_Name;\n          else\n             Name_Len := Name_Len - 1;\n          end if;\n@@ -425,7 +424,10 @@ package body Uname is\n    -- Get_Unit_Name_String --\n    --------------------------\n \n-   procedure Get_Unit_Name_String (N : Unit_Name_Type) is\n+   procedure Get_Unit_Name_String\n+     (N      : Unit_Name_Type;\n+      Suffix : Boolean := True)\n+   is\n       Unit_Is_Body : Boolean;\n \n    begin\n@@ -447,10 +449,12 @@ package body Uname is\n \n       --  Now adjust the %s or %b to (spec) or (body)\n \n-      if Unit_Is_Body then\n-         Name_Buffer (Name_Len - 1 .. Name_Len + 5) := \" (body)\";\n-      else\n-         Name_Buffer (Name_Len - 1 .. Name_Len + 5) := \" (spec)\";\n+      if Suffix then\n+         if Unit_Is_Body then\n+            Name_Buffer (Name_Len - 1 .. Name_Len + 5) := \" (body)\";\n+         else\n+            Name_Buffer (Name_Len - 1 .. Name_Len + 5) := \" (spec)\";\n+         end if;\n       end if;\n \n       for J in 1 .. Name_Len loop\n@@ -459,7 +463,13 @@ package body Uname is\n          end if;\n       end loop;\n \n-      Name_Len := Name_Len + (7 - 2);\n+      --  Adjust Name_Len\n+\n+      if Suffix then\n+         Name_Len := Name_Len + (7 - 2);\n+      else\n+         Name_Len := Name_Len - 2;\n+      end if;\n    end Get_Unit_Name_String;\n \n    ------------------"}, {"sha": "adbbf42b1f06572a0471969dbb85d0bb6692b855", "filename": "gcc/ada/uname.ads", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Funame.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39f4e199a51bc4ff869d273937d363902cc963c3/gcc%2Fada%2Funame.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Funame.ads?ref=39f4e199a51bc4ff869d273937d363902cc963c3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -31,7 +31,9 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n+with Namet; use Namet;\n with Types; use Types;\n+\n package Uname is\n \n    ---------------------------\n@@ -116,11 +118,14 @@ package Uname is\n    --    N_Protected_Body_Stub\n    --    N_Subunit\n \n-   procedure Get_Unit_Name_String (N : Unit_Name_Type);\n-   --  Places the display name of the unit in Name_Buffer and sets Name_Len\n-   --  to the length of the stored name, i.e. it uses the same interface as\n-   --  the Get_Name_String routine in the Namet package. The name contains\n-   --  an indication of spec or body, and is decoded.\n+   procedure Get_Unit_Name_String\n+     (N      : Unit_Name_Type;\n+      Suffix : Boolean := True);\n+   --  Places the display name of the unit in Name_Buffer and sets Name_Len to\n+   --  the length of the stored name, i.e. it uses the same interface as the\n+   --  Get_Name_String routine in the Namet package. The name is decoded and\n+   --  contains an indication of spec or body if Boolean parameter Suffix is\n+   --  True.\n \n    function Is_Body_Name (N : Unit_Name_Type) return Boolean;\n    --  Returns True iff the given name is the unit name of a body (i.e. if"}]}