{"sha": "5584c49a11b2a2427b4ca0323b8ca213de095573", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTU4NGM0OWExMWIyYTI0MjdiNGNhMDMyM2I4Y2EyMTNkZTA5NTU3Mw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-04-17T23:39:23Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-04-17T23:39:23Z"}, "message": "gofrontend: deduplicate C syscall function declarations\n\nA gccgo language extension allows a function to be declared multiple\ntimes. Avoid the use of this extension by dedeplicating declarations\nin mksyscall.awk.\n\nFrom-SVN: r209508", "tree": {"sha": "25d8490f8db5d5cd491c8efede0209d395ff078c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25d8490f8db5d5cd491c8efede0209d395ff078c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5584c49a11b2a2427b4ca0323b8ca213de095573", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5584c49a11b2a2427b4ca0323b8ca213de095573", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5584c49a11b2a2427b4ca0323b8ca213de095573", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5584c49a11b2a2427b4ca0323b8ca213de095573/comments", "author": null, "committer": null, "parents": [{"sha": "e8ad3ca026f1417bb2dfea7e7193227b28482e41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8ad3ca026f1417bb2dfea7e7193227b28482e41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8ad3ca026f1417bb2dfea7e7193227b28482e41"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "8d009222a182002c402087b8796ea76c32c87c86", "filename": "libgo/go/syscall/mksyscall.awk", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5584c49a11b2a2427b4ca0323b8ca213de095573/libgo%2Fgo%2Fsyscall%2Fmksyscall.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5584c49a11b2a2427b4ca0323b8ca213de095573/libgo%2Fgo%2Fsyscall%2Fmksyscall.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fmksyscall.awk?ref=5584c49a11b2a2427b4ca0323b8ca213de095573", "patch": "@@ -96,8 +96,11 @@ BEGIN {\n     cfnresult = line\n \n     printf(\"// Automatically generated wrapper for %s/%s\\n\", gofnname, cfnname)\n-    printf(\"//extern %s\\n\", cfnname)\n-    printf(\"func c_%s(%s) %s\\n\", cfnname, cfnparams, cfnresult)\n+    if (!(cfnname in cfns)) {\n+        cfns[cfnname] = 1\n+        printf(\"//extern %s\\n\", cfnname)\n+        printf(\"func c_%s(%s) %s\\n\", cfnname, cfnparams, cfnresult)\n+    }\n     printf(\"func %s(%s) %s%s%s%s{\\n\",\n \t   gofnname, gofnparams, gofnresults == \"\" ? \"\" : \"(\", gofnresults,\n \t   gofnresults == \"\" ? \"\" : \")\", gofnresults == \"\" ? \"\" : \" \")"}]}