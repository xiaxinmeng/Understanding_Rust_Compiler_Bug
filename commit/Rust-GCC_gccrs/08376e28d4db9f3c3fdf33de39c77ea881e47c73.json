{"sha": "08376e28d4db9f3c3fdf33de39c77ea881e47c73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDgzNzZlMjhkNGRiOWYzYzNmZGYzM2RlMzljNzdlYTg4MWU0N2M3Mw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-09-10T21:34:38Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-09-10T21:34:38Z"}, "message": "ctype.cc (use_facet<ctype<char> >, [...]): Remove specializations.\n\n2008-09-10  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* src/ctype.cc (use_facet<ctype<char> >, use_facet<ctype<wchar_t>):\n\tRemove specializations.\n\t* src/locale-inst.cc (use_facet<ctype<C> >): Instantiate.\n\t* include/bits/locale_facets.tcc (use_facet<ctype<char> >,\n\tuse_facet<ctype<wchar_t>): Declare as extern template.\n\t* include/bits/locale_facets.h (use_facet<ctype<char> >,\n\tuse_facet<ctype<wchar_t>): Do not declare as specializations.\n\nFrom-SVN: r140251", "tree": {"sha": "e4a9d3d087baab3772c5dfd1733e16f2bb0eee79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4a9d3d087baab3772c5dfd1733e16f2bb0eee79"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08376e28d4db9f3c3fdf33de39c77ea881e47c73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08376e28d4db9f3c3fdf33de39c77ea881e47c73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08376e28d4db9f3c3fdf33de39c77ea881e47c73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08376e28d4db9f3c3fdf33de39c77ea881e47c73/comments", "author": null, "committer": null, "parents": [{"sha": "5bcb0cc36879d3f65d2d78a6ff0c6383fba47dd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bcb0cc36879d3f65d2d78a6ff0c6383fba47dd5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bcb0cc36879d3f65d2d78a6ff0c6383fba47dd5"}], "stats": {"total": 55, "additions": 24, "deletions": 31}, "files": [{"sha": "8b7cd469cfb7f0cb86166b1e0b891498f66d26c4", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=08376e28d4db9f3c3fdf33de39c77ea881e47c73", "patch": "@@ -1,3 +1,13 @@\n+2008-09-10  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* src/ctype.cc (use_facet<ctype<char> >, use_facet<ctype<wchar_t>):\n+\tRemove specializations.\n+\t* src/locale-inst.cc (use_facet<ctype<C> >): Instantiate.\n+\t* include/bits/locale_facets.tcc (use_facet<ctype<char> >,\n+\tuse_facet<ctype<wchar_t>): Declare as extern template.\n+\t* include/bits/locale_facets.h (use_facet<ctype<char> >,\n+\tuse_facet<ctype<wchar_t>): Do not declare as specializations.\n+\n 2008-09-10  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* config/locale/darwin/ctype_members.cc (ctype<char>::_M_narrow_init,"}, {"sha": "258166081836ea01e31dfd0d6bf6bd053dbe2a36", "filename": "libstdc++-v3/include/bits/locale_facets.h", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h?ref=08376e28d4db9f3c3fdf33de39c77ea881e47c73", "patch": "@@ -1165,10 +1165,6 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       void _M_widen_init() const;\n     };\n \n-  template<>\n-    const ctype<char>&\n-    use_facet<ctype<char> >(const locale& __loc);\n-\n #ifdef _GLIBCXX_USE_WCHAR_T\n   // 22.2.1.3  ctype<wchar_t> specialization\n   /**\n@@ -1470,10 +1466,6 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       void\n       _M_initialize_ctype();\n     };\n-\n-  template<>\n-    const ctype<wchar_t>&\n-    use_facet<ctype<wchar_t> >(const locale& __loc);\n #endif //_GLIBCXX_USE_WCHAR_T\n \n   /// class ctype_byname [22.2.1.2]."}, {"sha": "49610258f4b03bbebede2abc3ad3f0b4a4499f58", "filename": "libstdc++-v3/include/bits/locale_facets.tcc", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc?ref=08376e28d4db9f3c3fdf33de39c77ea881e47c73", "patch": "@@ -1,7 +1,7 @@\n // Locale support -*- C++ -*-\n \n // Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n-// 2006, 2007\n+// 2006, 2007, 2008\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -1283,6 +1283,10 @@ _GLIBCXX_END_LDBL_NAMESPACE\n   extern template class _GLIBCXX_LDBL_NAMESPACE num_put<char>;\n   extern template class ctype_byname<char>;\n \n+  extern template\n+    const ctype<char>&\n+    use_facet<ctype<char> >(const locale&);\n+\n   extern template\n     const numpunct<char>&\n     use_facet<numpunct<char> >(const locale&);\n@@ -1318,6 +1322,10 @@ _GLIBCXX_END_LDBL_NAMESPACE\n   extern template class _GLIBCXX_LDBL_NAMESPACE num_put<wchar_t>;\n   extern template class ctype_byname<wchar_t>;\n \n+  extern template\n+    const ctype<wchar_t>&\n+    use_facet<ctype<wchar_t> >(const locale&);\n+\n   extern template\n     const numpunct<wchar_t>&\n     use_facet<numpunct<wchar_t> >(const locale&);"}, {"sha": "e9791508b0960e9a7ed2d52e138b41315e7f6168", "filename": "libstdc++-v3/src/ctype.cc", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Fsrc%2Fctype.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Fsrc%2Fctype.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fctype.cc?ref=08376e28d4db9f3c3fdf33de39c77ea881e47c73", "patch": "@@ -53,26 +53,6 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n   locale::id ctype<wchar_t>::id;\n #endif\n \n-  template<>\n-    const ctype<char>&\n-    use_facet<ctype<char> >(const locale& __loc)\n-    {\n-      size_t __i = ctype<char>::id._M_id();\n-      const locale::_Impl* __tmp = __loc._M_impl;\n-      return static_cast<const ctype<char>&>(*(__tmp->_M_facets[__i]));\n-    }\n-\n-#ifdef _GLIBCXX_USE_WCHAR_T\n-  template<>\n-    const ctype<wchar_t>&\n-    use_facet<ctype<wchar_t> >(const locale& __loc)\n-    {\n-      size_t __i = ctype<wchar_t>::id._M_id();\n-      const locale::_Impl* __tmp = __loc._M_impl;\n-      return static_cast<const ctype<wchar_t>&>(*(__tmp->_M_facets[__i]));\n-    }\n-#endif\n-\n   // XXX At some point, just rename this file to ctype_configure_char.cc\n   // and compile it as a separate file instead of including it here.\n   // Platform-specific initialization code for ctype tables."}, {"sha": "8d2ac77378c795238d816c2d0b64901cfb967a66", "filename": "libstdc++-v3/src/locale-inst.cc", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Fsrc%2Flocale-inst.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08376e28d4db9f3c3fdf33de39c77ea881e47c73/libstdc%2B%2B-v3%2Fsrc%2Flocale-inst.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Flocale-inst.cc?ref=08376e28d4db9f3c3fdf33de39c77ea881e47c73", "patch": "@@ -1,6 +1,6 @@\n // Locale support -*- C++ -*-\n \n-// Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006\n+// Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -192,7 +192,10 @@ _GLIBCXX_END_LDBL_NAMESPACE\n   template class collate_byname<C>;\n     \n   // use_facet\n-  // NB: use_facet<ctype> is specialized\n+  template\n+    const ctype<C>& \n+    use_facet<ctype<C> >(const locale&);\n+\n   template\n     const codecvt<C, char, mbstate_t>& \n     use_facet<codecvt<C, char, mbstate_t> >(const locale&);"}]}