{"sha": "3399688a1bfe506e80109b765a63ea278d29383c", "node_id": "C_kwDOANBUbNoAKDMzOTk2ODhhMWJmZTUwNmU4MDEwOWI3NjVhNjNlYTI3OGQyOTM4M2M", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2022-08-12T06:31:13Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-08-12T06:31:13Z"}, "message": "Merge #1468\n\n1468: Revert \"Ensure we set TREE_SIDE_EFFECTS on call expressions\" r=CohenArthur a=philberty\n\nThis reverts commit f891a13aa2af912584176d2c595c295b77ff5ff9. This fix\r\nensures the code is added to the block but still as the artifical function\r\nis marked READONLY it ends up being optimized out anyway.\n\nCo-authored-by: Philip Herron <philip.herron@embecosm.com>", "tree": {"sha": "fa7834d0e5c73209707eb7d3604ce85a583b9bc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa7834d0e5c73209707eb7d3604ce85a583b9bc7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3399688a1bfe506e80109b765a63ea278d29383c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi9fOxCRBK7hj4Ov3rIwAA1+YIAK4Tk2DWeFM/Jim4sKIUyczJ\n13imnViSudgHNQkuwE3PoK+sMQlP22H2sU5gWdEFm9FxyfLwV3ZrWnkdOY518nTs\n1QtGXCL2LODqiZ8CClTYz9qvmTe891yTn1rzVZgiY7xD8Rm0S7ms6iB8bWp3jB2Z\nS6ff/Tm2iLqaz0dEeK+QF4jxg1867zVXy97WVQUHivAqyoECIP5tclInBaPb1sRn\nBf5G5hlOfSFfTMqmVZinm6Z3DNuTVIBDHPdgZIEUM7GMC7a1NBut82w2ioN6mSaR\ns3TrmXXtbLqZbnTSAdehVh7uBFKuvFg2kuHXU4CiiQPToqstxb/mEZJa7WVtgXA=\n=g9zh\n-----END PGP SIGNATURE-----\n", "payload": "tree fa7834d0e5c73209707eb7d3604ce85a583b9bc7\nparent 70a0039b82b3419820359c8a1552470e48b458f6\nparent 2f15ae7493579ac55d2a1e11ece43abaf4e1bc06\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1660285873 +0000\ncommitter GitHub <noreply@github.com> 1660285873 +0000\n\nMerge #1468\n\n1468: Revert \"Ensure we set TREE_SIDE_EFFECTS on call expressions\" r=CohenArthur a=philberty\n\nThis reverts commit f891a13aa2af912584176d2c595c295b77ff5ff9. This fix\r\nensures the code is added to the block but still as the artifical function\r\nis marked READONLY it ends up being optimized out anyway.\n\nCo-authored-by: Philip Herron <philip.herron@embecosm.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3399688a1bfe506e80109b765a63ea278d29383c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3399688a1bfe506e80109b765a63ea278d29383c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3399688a1bfe506e80109b765a63ea278d29383c/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70a0039b82b3419820359c8a1552470e48b458f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70a0039b82b3419820359c8a1552470e48b458f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70a0039b82b3419820359c8a1552470e48b458f6"}, {"sha": "2f15ae7493579ac55d2a1e11ece43abaf4e1bc06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f15ae7493579ac55d2a1e11ece43abaf4e1bc06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f15ae7493579ac55d2a1e11ece43abaf4e1bc06"}], "stats": {"total": 3, "additions": 0, "deletions": 3}, "files": [{"sha": "66fd8bce84ed720c2821e92e161897739a01a9e0", "filename": "gcc/rust/rust-gcc.cc", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3399688a1bfe506e80109b765a63ea278d29383c/gcc%2Frust%2Frust-gcc.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3399688a1bfe506e80109b765a63ea278d29383c/gcc%2Frust%2Frust-gcc.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-gcc.cc?ref=3399688a1bfe506e80109b765a63ea278d29383c", "patch": "@@ -1840,9 +1840,6 @@ Gcc_backend::call_expression (tree fn, const std::vector<tree> &fn_args,\n       ret = build1_loc (location.gcc_location (), NOP_EXPR, rettype, ret);\n     }\n \n-  if (!TREE_SIDE_EFFECTS (ret))\n-    TREE_SIDE_EFFECTS (ret) = TREE_SIDE_EFFECTS (fndecl);\n-\n   delete[] args;\n   return ret;\n }"}]}