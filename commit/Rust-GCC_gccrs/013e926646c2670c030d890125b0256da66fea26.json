{"sha": "013e926646c2670c030d890125b0256da66fea26", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDEzZTkyNjY0NmMyNjcwYzAzMGQ4OTAxMjViMDI1NmRhNjZmZWEyNg==", "commit": {"author": {"name": "Razya Ladelsky", "email": "razya@il.ibm.com", "date": "2007-07-31T08:09:49Z"}, "committer": {"name": "Razya Ladelsky", "email": "razya@gcc.gnu.org", "date": "2007-07-31T08:09:49Z"}, "message": "matrix-reorg.c (analyze_matrix_allocation_site): Avoid referring to an unallocated space.\n\n2007-07-31  Razya Ladelsky  <razya@il.ibm.com>\n\n        * matrix-reorg.c (analyze_matrix_allocation_site): Avoid referring \n        to an unallocated space.\n\nFrom-SVN: r127082", "tree": {"sha": "e0bc9d5e8ea524eed5012cc4e04fd91ec703771c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e0bc9d5e8ea524eed5012cc4e04fd91ec703771c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/013e926646c2670c030d890125b0256da66fea26", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/013e926646c2670c030d890125b0256da66fea26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/013e926646c2670c030d890125b0256da66fea26", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/013e926646c2670c030d890125b0256da66fea26/comments", "author": null, "committer": null, "parents": [{"sha": "06cb4f7988cff376aeafc230dea8e9a8e3e6c0e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06cb4f7988cff376aeafc230dea8e9a8e3e6c0e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06cb4f7988cff376aeafc230dea8e9a8e3e6c0e9"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "ed544bd514ac10604727080232a16c27354f927e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/013e926646c2670c030d890125b0256da66fea26/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/013e926646c2670c030d890125b0256da66fea26/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=013e926646c2670c030d890125b0256da66fea26", "patch": "@@ -1,3 +1,8 @@\n+2007-07-31  Razya Ladelsky  <razya@il.ibm.com>\n+\n+        * matrix-reorg.c (analyze_matrix_allocation_site): Avoid referring \n+\tto an unallocated space.\n+\n 2007-07-30  Jan Sjodin  <jan.sjodin@amd.com>\n \n \t* tree-data-ref.c"}, {"sha": "46fd6e25a598fd38894cfe7f8d6bf9cd065e0863", "filename": "gcc/matrix-reorg.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/013e926646c2670c030d890125b0256da66fea26/gcc%2Fmatrix-reorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/013e926646c2670c030d890125b0256da66fea26/gcc%2Fmatrix-reorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatrix-reorg.c?ref=013e926646c2670c030d890125b0256da66fea26", "patch": "@@ -818,11 +818,15 @@ analyze_matrix_allocation_site (struct matrix_info *mi, tree stmt,\n \t\t  return;\n \t\t}\n \t    }\n-\t  /* This is a call to malloc.  Check to see if this is the first\n-\t     call in this indirection level; if so, mark it; if not, mark\n-\t     as escaping.  */\n+\t  /* This is a call to malloc of level 'level'.  \n+\t     mi->max_malloced_level-1 == level  means that we've \n+\t     seen a malloc statement of level 'level' before.  \n+\t     If the statement is not the same one that we've \n+\t     seen before, then there's another malloc statement \n+\t     for the same level, which means that we need to mark \n+\t     it escaping.  */\n \t  if (mi->malloc_for_level\n-\t      && mi->malloc_for_level[level]\n+\t      && mi->max_malloced_level-1 == level\n \t      && mi->malloc_for_level[level] != stmt)\n \t    {\n \t      mark_min_matrix_escape_level (mi, level, stmt);"}]}