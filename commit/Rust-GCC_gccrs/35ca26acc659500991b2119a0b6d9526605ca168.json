{"sha": "35ca26acc659500991b2119a0b6d9526605ca168", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzVjYTI2YWNjNjU5NTAwOTkxYjIxMTlhMGI2ZDk1MjY2MDVjYTE2OA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-03-31T20:37:31Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-03-31T20:37:31Z"}, "message": "libgo/syscalls: Use _C_long as the type of the select bits array.\n\nFrom-SVN: r171799", "tree": {"sha": "248cddee02c2969f0db687e0dcbd756d1481a1a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/248cddee02c2969f0db687e0dcbd756d1481a1a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/35ca26acc659500991b2119a0b6d9526605ca168", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35ca26acc659500991b2119a0b6d9526605ca168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35ca26acc659500991b2119a0b6d9526605ca168", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35ca26acc659500991b2119a0b6d9526605ca168/comments", "author": null, "committer": null, "parents": [{"sha": "c454d74afcf58585beddb8d300f77d615d65330c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c454d74afcf58585beddb8d300f77d615d65330c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c454d74afcf58585beddb8d300f77d615d65330c"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "d0700574111afe7e3ab8d57637f0922aa981bcce", "filename": "libgo/syscalls/sysfile_posix.go", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35ca26acc659500991b2119a0b6d9526605ca168/libgo%2Fsyscalls%2Fsysfile_posix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35ca26acc659500991b2119a0b6d9526605ca168/libgo%2Fsyscalls%2Fsysfile_posix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fsyscalls%2Fsysfile_posix.go?ref=35ca26acc659500991b2119a0b6d9526605ca168", "patch": "@@ -181,28 +181,30 @@ func Gettimeofday(tv *Timeval) (errno int) {\n   return;\n }\n \n+const nfdbits = unsafe.Sizeof(_C_long) * 8\n+\n type FdSet_t struct {\n-\tFds_bits [(FD_SETSIZE + 63) / 64]int64;\n+\tFds_bits [(FD_SETSIZE + nfdbits - 1) / nfdbits]_C_long\n }\n \n func FDSet(fd int, set *FdSet_t) {\n-\tset.Fds_bits[fd / 64] |= (1 << (uint)(fd % 64))\n+\tset.Fds_bits[fd / nfdbits] |= (1 << (uint)(fd % nfdbits))\n }\n \n func FDClr(fd int, set *FdSet_t) {\n-\tset.Fds_bits[fd / 64] &= ^(1 << (uint)(fd % 64))\n+\tset.Fds_bits[fd / nfdbits] &^= (1 << (uint)(fd % nfdbits))\n }\n \n func FDIsSet(fd int, set *FdSet_t) bool {\n-\tif set.Fds_bits[fd / 64] & (1 << (uint)(fd % 64)) != 0 {\n+\tif set.Fds_bits[fd / nfdbits] & (1 << (uint)(fd % nfdbits)) != 0 {\n \t\treturn true\n \t} else {\n \t\treturn false\n \t}\n }\n \n func FDZero(set *FdSet_t) {\n-\tfor i := 0; i < ((FD_SETSIZE + 63) / 64); i++ {\n+\tfor i := range set.Fds_bits {\n \t\tset.Fds_bits[i] = 0\n \t}\n }"}]}