{"sha": "ec856f5f8b372d1201ec204876ed078a1c0f1f37", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWM4NTZmNWY4YjM3MmQxMjAxZWMyMDQ4NzZlZDA3OGExYzBmMWYzNw==", "commit": {"author": {"name": "Volker Reichelt", "email": "v.reichelt@netcologne.de", "date": "2017-04-24T16:43:01Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2017-04-24T16:43:01Z"}, "message": "parser.c (cp_parser_cv_qualifier_seq_opt): Add fix-it info to error message.\n\n        * parser.c (cp_parser_cv_qualifier_seq_opt): Add fix-it info to\n        error message.\n        (cp_parser_virt_specifier_seq_opt): Likewise.\n        (set_and_check_decl_spec_loc): Likewise twice.\n\n        * g++.dg/diagnostic/duplicate1.C: New test.\n        * g++.dg/cpp0x/duplicate1.C: New test.\n\nFrom-SVN: r247105", "tree": {"sha": "88d5f6c97747660b51c1d197fa4c095fd629820d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88d5f6c97747660b51c1d197fa4c095fd629820d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ec856f5f8b372d1201ec204876ed078a1c0f1f37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec856f5f8b372d1201ec204876ed078a1c0f1f37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec856f5f8b372d1201ec204876ed078a1c0f1f37", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec856f5f8b372d1201ec204876ed078a1c0f1f37/comments", "author": {"login": "VReichelt", "id": 85767072, "node_id": "MDQ6VXNlcjg1NzY3MDcy", "avatar_url": "https://avatars.githubusercontent.com/u/85767072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VReichelt", "html_url": "https://github.com/VReichelt", "followers_url": "https://api.github.com/users/VReichelt/followers", "following_url": "https://api.github.com/users/VReichelt/following{/other_user}", "gists_url": "https://api.github.com/users/VReichelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/VReichelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VReichelt/subscriptions", "organizations_url": "https://api.github.com/users/VReichelt/orgs", "repos_url": "https://api.github.com/users/VReichelt/repos", "events_url": "https://api.github.com/users/VReichelt/events{/privacy}", "received_events_url": "https://api.github.com/users/VReichelt/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a753df11b8bc86cf0e991fe2843ebb30b7992a16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a753df11b8bc86cf0e991fe2843ebb30b7992a16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a753df11b8bc86cf0e991fe2843ebb30b7992a16"}], "stats": {"total": 78, "additions": 73, "deletions": 5}, "files": [{"sha": "317415ca43d3965351a52b23f481337526db41b1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ec856f5f8b372d1201ec204876ed078a1c0f1f37", "patch": "@@ -1,3 +1,10 @@\n+2017-04-24  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* parser.c (cp_parser_cv_qualifier_seq_opt): Add fix-it info to\n+\terror message.\n+\t(cp_parser_virt_specifier_seq_opt): Likewise.\n+\t(set_and_check_decl_spec_loc): Likewise twice.\n+\n 2017-04-21  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/80179 - ICE with initialized flexible array member."}, {"sha": "3efb28c727f3159a115e56b8a688045fe8bb9063", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=ec856f5f8b372d1201ec204876ed078a1c0f1f37", "patch": "@@ -20258,7 +20258,9 @@ cp_parser_cv_qualifier_seq_opt (cp_parser* parser)\n \n       if (cv_quals & cv_qualifier)\n \t{\n-\t  error_at (token->location, \"duplicate cv-qualifier\");\n+\t  gcc_rich_location richloc (token->location);\n+\t  richloc.add_fixit_remove ();\n+\t  error_at_rich_loc (&richloc, \"duplicate cv-qualifier\");\n \t  cp_lexer_purge_token (parser->lexer);\n \t}\n       else\n@@ -20405,7 +20407,9 @@ cp_parser_virt_specifier_seq_opt (cp_parser* parser)\n \n       if (virt_specifiers & virt_specifier)\n \t{\n-\t  error_at (token->location, \"duplicate virt-specifier\");\n+\t  gcc_rich_location richloc (token->location);\n+\t  richloc.add_fixit_remove ();\n+\t  error_at_rich_loc (&richloc, \"duplicate virt-specifier\");\n \t  cp_lexer_purge_token (parser->lexer);\n \t}\n       else\n@@ -27677,7 +27681,11 @@ set_and_check_decl_spec_loc (cp_decl_specifier_seq *decl_specs,\n \t    error_at (location,\n \t\t      \"both %<__thread%> and %<thread_local%> specified\");\n \t  else\n-\t    error_at (location, \"duplicate %qD\", token->u.value);\n+\t    {\n+\t      gcc_rich_location richloc (location);\n+\t      richloc.add_fixit_remove ();\n+\t      error_at_rich_loc (&richloc, \"duplicate %qD\", token->u.value);\n+\t    }\n \t}\n       else\n \t{\n@@ -27698,8 +27706,9 @@ set_and_check_decl_spec_loc (cp_decl_specifier_seq *decl_specs,\n             \"constexpr\",\n \t    \"__complex\"\n \t  };\n-\t  error_at (location,\n-\t\t    \"duplicate %qs\", decl_spec_names[ds]);\n+\t  gcc_rich_location richloc (location);\n+\t  richloc.add_fixit_remove ();\n+\t  error_at_rich_loc (&richloc, \"duplicate %qs\", decl_spec_names[ds]);\n \t}\n     }\n }"}, {"sha": "3be6903c7e961ef1f9f1fbfe94ab05e141b9d814", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ec856f5f8b372d1201ec204876ed078a1c0f1f37", "patch": "@@ -1,3 +1,8 @@\n+2017-04-24  Volker Reichelt  <v.reichelt@netcologne.de>\n+\n+\t* g++.dg/diagnostic/duplicate1.C: New test.\n+\t* g++.dg/cpp0x/duplicate1.C: New test.\n+\n 2017-04-24  Martin Jambor  <mjambor@suse.cz>\n \n \tPR tree-optimization/80293"}, {"sha": "1545e1cd4b5cb16701f8637b1268e175f461176e", "filename": "gcc/testsuite/g++.dg/cpp0x/duplicate1.C", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fduplicate1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fduplicate1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fduplicate1.C?ref=ec856f5f8b372d1201ec204876ed078a1c0f1f37", "patch": "@@ -0,0 +1,29 @@\n+// { dg-options \"-fdiagnostics-show-caret\" }\n+// { dg-do compile { target c++11 } }\n+\n+struct A\n+{\n+  virtual void foo() const;\n+};\n+\n+struct B final final : A  /* { dg-error \"duplicate virt-specifier\" }\n+  { dg-begin-multiline-output \"\" }\n+ struct B final final : A\n+                ^~~~~\n+                -----\n+  { dg-end-multiline-output \"\" } */\n+{\n+  virtual void foo() const override final override;  /* { dg-error \"duplicate virt-specifier\" }\n+  { dg-begin-multiline-output \"\" }\n+   virtual void foo() const override final override;\n+                                           ^~~~~~~~\n+                                           --------\n+  { dg-end-multiline-output \"\" } */\n+};\n+\n+thread_local thread_local int i = 0;  /* { dg-error \"duplicate\" }\n+  { dg-begin-multiline-output \"\" }\n+ thread_local thread_local int i = 0;\n+              ^~~~~~~~~~~~\n+              ------------\n+  { dg-end-multiline-output \"\" } */"}, {"sha": "8608fa2637a2c27a74c25f73ad29acfddbccad78", "filename": "gcc/testsuite/g++.dg/diagnostic/duplicate1.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fduplicate1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec856f5f8b372d1201ec204876ed078a1c0f1f37/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fduplicate1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fduplicate1.C?ref=ec856f5f8b372d1201ec204876ed078a1c0f1f37", "patch": "@@ -0,0 +1,18 @@\n+// { dg-options \"-fdiagnostics-show-caret\" }\n+\n+struct A\n+{\n+  void foo() const const;  /* { dg-error \"duplicate cv-qualifier\" }\n+  { dg-begin-multiline-output \"\" }\n+   void foo() const const;\n+                    ^~~~~\n+                    -----\n+  { dg-end-multiline-output \"\" } */\n+};\n+\n+volatile volatile int i = 0;  /* { dg-error \"duplicate\" }\n+  { dg-begin-multiline-output \"\" }\n+ volatile volatile int i = 0;\n+          ^~~~~~~~\n+          --------\n+  { dg-end-multiline-output \"\" } */"}]}