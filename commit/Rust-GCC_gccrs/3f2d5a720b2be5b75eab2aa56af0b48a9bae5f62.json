{"sha": "3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62", "node_id": "C_kwDOANBUbNoAKDNmMmQ1YTcyMGIyYmU1Yjc1ZWFiMmFhNTZhZjBiNDhhOWJhZTVmNjI", "commit": {"author": {"name": "M V V S Manoj Kumar", "email": "mvvsmanojkumar@gmail.com", "date": "2022-02-24T01:26:32Z"}, "committer": {"name": "M V V S Manoj Kumar", "email": "mvvsmanojkumar@gmail.com", "date": "2022-03-04T02:57:22Z"}, "message": "Got rid of lambda in TyTy::FnPtr iterate_params\n\nFixes issue #734\n1)Removed iterate_params function\n2)Created a get_params function which returns std::vector& params\n\nSigned-off-by : M V V S Manoj Kumar <mvvsmanojkumar@gmail.com>", "tree": {"sha": "8fe1d64cb0fadf75eaef84c12b17b8a5da8da9f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fe1d64cb0fadf75eaef84c12b17b8a5da8da9f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62/comments", "author": {"login": "mvvsmk", "id": 71825974, "node_id": "MDQ6VXNlcjcxODI1OTc0", "avatar_url": "https://avatars.githubusercontent.com/u/71825974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mvvsmk", "html_url": "https://github.com/mvvsmk", "followers_url": "https://api.github.com/users/mvvsmk/followers", "following_url": "https://api.github.com/users/mvvsmk/following{/other_user}", "gists_url": "https://api.github.com/users/mvvsmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/mvvsmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mvvsmk/subscriptions", "organizations_url": "https://api.github.com/users/mvvsmk/orgs", "repos_url": "https://api.github.com/users/mvvsmk/repos", "events_url": "https://api.github.com/users/mvvsmk/events{/privacy}", "received_events_url": "https://api.github.com/users/mvvsmk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mvvsmk", "id": 71825974, "node_id": "MDQ6VXNlcjcxODI1OTc0", "avatar_url": "https://avatars.githubusercontent.com/u/71825974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mvvsmk", "html_url": "https://github.com/mvvsmk", "followers_url": "https://api.github.com/users/mvvsmk/followers", "following_url": "https://api.github.com/users/mvvsmk/following{/other_user}", "gists_url": "https://api.github.com/users/mvvsmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/mvvsmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mvvsmk/subscriptions", "organizations_url": "https://api.github.com/users/mvvsmk/orgs", "repos_url": "https://api.github.com/users/mvvsmk/repos", "events_url": "https://api.github.com/users/mvvsmk/events{/privacy}", "received_events_url": "https://api.github.com/users/mvvsmk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "10de9cf4f3765526a1a82a4a7d14908b58c6538c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10de9cf4f3765526a1a82a4a7d14908b58c6538c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10de9cf4f3765526a1a82a4a7d14908b58c6538c"}], "stats": {"total": 26, "additions": 17, "deletions": 9}, "files": [{"sha": "6c0b0a0c57be8fbee74a759b4a81b6804e6c225b", "filename": "gcc/rust/backend/rust-compile-type.cc", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62/gcc%2Frust%2Fbackend%2Frust-compile-type.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62/gcc%2Frust%2Fbackend%2Frust-compile-type.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fbackend%2Frust-compile-type.cc?ref=3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62", "patch": "@@ -148,11 +148,13 @@ TyTyResolveCompile::visit (const TyTy::FnPtr &type)\n   tree result_type = TyTyResolveCompile::compile (ctx, type.get_return_type ());\n \n   std::vector<tree> parameters;\n-  type.iterate_params ([&] (TyTy::BaseType *p) mutable -> bool {\n-    tree pty = TyTyResolveCompile::compile (ctx, p);\n-    parameters.push_back (pty);\n-    return true;\n-  });\n+\n+  auto &params = type.get_params ();\n+  for (auto &p : params)\n+    {\n+      tree pty = TyTyResolveCompile::compile (ctx, p.get_tyty ());\n+      parameters.push_back (pty);\n+    }\n \n   translated = ctx->get_backend ()->function_ptr_type (result_type, parameters,\n \t\t\t\t\t\t       type.get_ident ().locus);"}, {"sha": "52bb57172572b11fdf7d4688de92e894555a1de9", "filename": "gcc/rust/typecheck/rust-tyty.cc", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc?ref=3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62", "patch": "@@ -1294,10 +1294,13 @@ std::string\n FnPtr::as_string () const\n {\n   std::string params_str;\n-  iterate_params ([&] (BaseType *p) mutable -> bool {\n-    params_str += p->as_string () + \" ,\";\n-    return true;\n-  });\n+\n+  auto &params = get_params ();\n+  for (auto &p : params)\n+    {\n+      params_str += p.get_tyty ()->as_string () + \" ,\";\n+    }\n+\n   return \"fnptr (\" + params_str + \") -> \" + get_return_type ()->as_string ();\n }\n "}, {"sha": "940352584dd404f0565dac6300a1955f299dd994", "filename": "gcc/rust/typecheck/rust-tyty.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62/gcc%2Frust%2Ftypecheck%2Frust-tyty.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62/gcc%2Frust%2Ftypecheck%2Frust-tyty.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-tyty.h?ref=3f2d5a720b2be5b75eab2aa56af0b48a9bae5f62", "patch": "@@ -1526,6 +1526,9 @@ class FnPtr : public BaseType\n       }\n   }\n \n+  std::vector<TyVar> &get_params () { return params; }\n+  const std::vector<TyVar> &get_params () const { return params; }\n+\n   bool is_concrete () const override final\n   {\n     for (auto &p : params)"}]}