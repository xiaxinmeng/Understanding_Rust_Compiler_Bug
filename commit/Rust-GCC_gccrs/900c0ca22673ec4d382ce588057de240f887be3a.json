{"sha": "900c0ca22673ec4d382ce588057de240f887be3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAwYzBjYTIyNjczZWM0ZDM4MmNlNTg4MDU3ZGUyNDBmODg3YmUzYQ==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-10-01T09:58:58Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2020-10-10T15:55:57Z"}, "message": "Objective-C: Addess a FIXME (NFC).\n\nThis removes references to the next runtime from the gnu runtime\nimplementation.\n\ngcc/objc/ChangeLog:\n\n\t* objc-gnu-runtime-abi-01.c\n\t(build_shared_structure_initializer): Remove references to\n\tthe NeXT runtime.\n\t(generate_static_references): Likewise.", "tree": {"sha": "c6198f8c00f37f7fbc5daae3eef1bef3f125ab66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6198f8c00f37f7fbc5daae3eef1bef3f125ab66"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/900c0ca22673ec4d382ce588057de240f887be3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/900c0ca22673ec4d382ce588057de240f887be3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/900c0ca22673ec4d382ce588057de240f887be3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/900c0ca22673ec4d382ce588057de240f887be3a/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dcf59c5c0100d0649d64ec948dbe24018d48b6a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcf59c5c0100d0649d64ec948dbe24018d48b6a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcf59c5c0100d0649d64ec948dbe24018d48b6a5"}], "stats": {"total": 32, "additions": 6, "deletions": 26}, "files": [{"sha": "25c0e01e157bed9d4e37380733cb9a3480328c2b", "filename": "gcc/objc/objc-gnu-runtime-abi-01.c", "status": "modified", "additions": 6, "deletions": 26, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/900c0ca22673ec4d382ce588057de240f887be3a/gcc%2Fobjc%2Fobjc-gnu-runtime-abi-01.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/900c0ca22673ec4d382ce588057de240f887be3a/gcc%2Fobjc%2Fobjc-gnu-runtime-abi-01.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-gnu-runtime-abi-01.c?ref=900c0ca22673ec4d382ce588057de240f887be3a", "patch": "@@ -1540,25 +1540,14 @@ build_shared_structure_initializer (tree type, tree isa, tree super,\n       CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, expr);\n     }\n \n-  /* FIXME: Remove NeXT runtime code.  */\n-  if (flag_next_runtime)\n-    {\n-      ltyp = build_pointer_type (xref_tag (RECORD_TYPE,\n-\t\t\t\t\t   get_identifier (\"objc_cache\")));\n-      /* method_cache = */\n-      CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, convert (ltyp, null_pointer_node));\n-    }\n-  else\n-    {\n-      /* dtable = */\n-      CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n+  /* dtable = */\n+  CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n \n-      /* subclass_list = */\n-      CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n+  /* subclass_list = */\n+  CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n \n-      /* sibling_class = */\n-      CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n-    }\n+  /* sibling_class = */\n+  CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n \n   /* protocol_list = */\n   ltyp = build_pointer_type (build_pointer_type (objc_protocol_template));\n@@ -1572,11 +1561,6 @@ build_shared_structure_initializer (tree type, tree isa, tree super,\n       CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, expr);\n     }\n \n-  /* FIXME: Remove NeXT runtime code.  */\n-  if (flag_next_runtime)\n-    /* sel_id = NULL */\n-    CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n-\n   /* gc_object_type = NULL */\n   CONSTRUCTOR_APPEND_ELT (v, NULL_TREE, build_int_cst (NULL_TREE, 0));\n \n@@ -1864,10 +1848,6 @@ generate_static_references (void)\n   char buf[BUFSIZE];\n   vec<constructor_elt, va_gc> *decls = NULL;\n \n-  /* FIXME: Remove NeXT runtime code.  */\n-  if (flag_next_runtime)\n-    gcc_unreachable ();\n-\n   for (cl_chain = objc_static_instances, num_class = 0;\n        cl_chain; cl_chain = TREE_CHAIN (cl_chain), num_class++)\n     {"}]}