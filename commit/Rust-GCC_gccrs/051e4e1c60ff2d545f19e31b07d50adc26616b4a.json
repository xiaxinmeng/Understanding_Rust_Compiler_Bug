{"sha": "051e4e1c60ff2d545f19e31b07d50adc26616b4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDUxZTRlMWM2MGZmMmQ1NDVmMTllMzFiMDdkNTBhZGMyNjYxNmI0YQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-09-28T21:18:36Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-09-28T21:18:36Z"}, "message": "re PR c++/79488 (ICE from lambda that has invalid return type)\n\n2017-09-28  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/79488\n\t* g++.dg/cpp0x/lambda/lambda-ice22.C: New.\n\nFrom-SVN: r253270", "tree": {"sha": "d9f342d425faea219c444589241d481343928576", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9f342d425faea219c444589241d481343928576"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/051e4e1c60ff2d545f19e31b07d50adc26616b4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/051e4e1c60ff2d545f19e31b07d50adc26616b4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/051e4e1c60ff2d545f19e31b07d50adc26616b4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/051e4e1c60ff2d545f19e31b07d50adc26616b4a/comments", "author": null, "committer": null, "parents": [{"sha": "281e6c1d8f1b4ca552d8ce2276ddecfcd6ffb15e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/281e6c1d8f1b4ca552d8ce2276ddecfcd6ffb15e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/281e6c1d8f1b4ca552d8ce2276ddecfcd6ffb15e"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "bc9b1a365b05eb4be40c45f3054c658bfa73bdbb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/051e4e1c60ff2d545f19e31b07d50adc26616b4a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/051e4e1c60ff2d545f19e31b07d50adc26616b4a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=051e4e1c60ff2d545f19e31b07d50adc26616b4a", "patch": "@@ -1,3 +1,8 @@\n+2017-09-28  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/79488\n+\t* g++.dg/cpp0x/lambda/lambda-ice22.C: New.\n+\n 2017-09-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/82342"}, {"sha": "6f2650dbe7700337dee882d88f82b232892830b7", "filename": "gcc/testsuite/g++.dg/cpp0x/lambda/lambda-ice22.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/051e4e1c60ff2d545f19e31b07d50adc26616b4a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice22.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/051e4e1c60ff2d545f19e31b07d50adc26616b4a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice22.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Flambda%2Flambda-ice22.C?ref=051e4e1c60ff2d545f19e31b07d50adc26616b4a", "patch": "@@ -0,0 +1,25 @@\n+// PR c++/79488\n+// { dg-do compile { target c++11 } }\n+\n+int f();\n+static int g __attribute__((__weakref__(\"f\")));\n+\n+template <typename Fn> struct res {\n+  static Fn val();\n+  using type = decltype(val()()); // { dg-error \"no match for call\" }\n+};\n+\n+template <typename Fn> struct A {\n+  template <typename T> void set_result(T) {}\n+\n+  virtual void run() {\n+    auto boundfn = []() -> typename res<Fn>::type{};\n+    set_result(boundfn);\n+  }\n+};\n+\n+struct F {\n+  void operator()() &;\n+};\n+\n+A<F> t;"}]}