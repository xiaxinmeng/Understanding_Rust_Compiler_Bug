{"sha": "321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIxYmZmMTFhM2ExZjBlM2VjYzkyNTMwNGIwNWYyNWJiNzJjOWM5NA==", "commit": {"author": {"name": "Joost VandeVondele", "email": "Joost.VandeVondele@mat.ethz.ch", "date": "2014-08-20T07:08:57Z"}, "committer": {"name": "Joost VandeVondele", "email": "vondele@gcc.gnu.org", "date": "2014-08-20T07:08:57Z"}, "message": "options.c (gfc_init_options_struct): assert that the frontend sets flag_errno_math and flag_associative_math.\n\ngcc/fortran/ChangeLog:\n\n2014-08-20  Joost VandeVondele  <Joost.VandeVondele@mat.ethz.ch>\n\n\t* options.c (gfc_init_options_struct): assert that the frontend sets\n        flag_errno_math and flag_associative_math.\n\ngcc/testsuite/ChangeLog:\n\n2014-08-20  Joost VandeVondele  <Joost.VandeVondele@mat.ethz.ch>\n\n\t* gfortran.dg/errnocheck_1.f90: New test.\n\t* gfortran.dg/associative_1.f90: New test.\n\nFrom-SVN: r214211", "tree": {"sha": "ee7360378ccc2e8a7358c023cf447aca11413298", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee7360378ccc2e8a7358c023cf447aca11413298"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/comments", "author": null, "committer": {"login": "vondele", "id": 4202567, "node_id": "MDQ6VXNlcjQyMDI1Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/4202567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vondele", "html_url": "https://github.com/vondele", "followers_url": "https://api.github.com/users/vondele/followers", "following_url": "https://api.github.com/users/vondele/following{/other_user}", "gists_url": "https://api.github.com/users/vondele/gists{/gist_id}", "starred_url": "https://api.github.com/users/vondele/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vondele/subscriptions", "organizations_url": "https://api.github.com/users/vondele/orgs", "repos_url": "https://api.github.com/users/vondele/repos", "events_url": "https://api.github.com/users/vondele/events{/privacy}", "received_events_url": "https://api.github.com/users/vondele/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd3ff077ef4ae24b35d15da9ee474ba096652b4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd3ff077ef4ae24b35d15da9ee474ba096652b4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd3ff077ef4ae24b35d15da9ee474ba096652b4e"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "9d939ea35c3d98ea28bcaecdf02bade5c7e5f293", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "patch": "@@ -1,3 +1,8 @@\n+2014-08-20  Joost VandeVondele  <Joost.VandeVondele@mat.ethz.ch>\n+\n+\t* options.c (gfc_init_options_struct): assert that the frontend sets\n+\tflag_errno_math and flag_associative_math.\n+\n 2014-08-17  Tobias Burnus  <burnus@net-b.de>\n \n \t* resolve.c (gfc_resolve_finalizers): Ensure that parents are"}, {"sha": "2f4338e175e22ddb9a499e0b999c2c79b88ae2a1", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "patch": "@@ -66,7 +66,9 @@ void\n gfc_init_options_struct (struct gcc_options *opts)\n {\n   opts->x_flag_errno_math = 0;\n+  opts->frontend_set_flag_errno_math = true;\n   opts->x_flag_associative_math = -1;\n+  opts->frontend_set_flag_associative_math = true;\n }\n \n /* Get ready for options handling. Keep in sync with"}, {"sha": "b8473c3a62293eee3a590ed449a06aee4788754b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "patch": "@@ -1,3 +1,8 @@\n+2014-08-20  Joost VandeVondele  <Joost.VandeVondele@mat.ethz.ch>\n+\n+\t* gfortran.dg/errnocheck_1.f90: New test.\n+\t* gfortran.dg/associative_1.f90: New test.\n+\n 2014-08-20  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR preprocessor/51303"}, {"sha": "c4103a7f3e4fc762427aed29d1ffc540dc8d9186", "filename": "gcc/testsuite/gfortran.dg/associative_1.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociative_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociative_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociative_1.f90?ref=321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+! { dg-options \"-O1 -fno-signed-zeros -fno-trapping-math -fdump-tree-optimized\" }\n+! Fortran defaults to associative by default,\n+! with -fno-signed-zeros -fno-trapping-math this should optimize away all additions\n+SUBROUTINE S1(a)\n+ REAL :: a\n+ a=1+a-1\n+END SUBROUTINE S1\n+! { dg-final { scan-tree-dump-times \" \\\\\\+ \" 0 \"optimized\" } }\n+! { dg-final { cleanup-tree-dump \"optimized\" } }"}, {"sha": "d9cf994e164f7ace67da42fb26ee275199326dd5", "filename": "gcc/testsuite/gfortran.dg/errnocheck_1.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ftestsuite%2Fgfortran.dg%2Ferrnocheck_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/321bff11a3a1f0e3ecc925304b05f25bb72c9c94/gcc%2Ftestsuite%2Fgfortran.dg%2Ferrnocheck_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ferrnocheck_1.f90?ref=321bff11a3a1f0e3ecc925304b05f25bb72c9c94", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile { target x86_64-*-* } }\n+! Fortran should default to -fno-math-errno\n+! and thus no call to sqrt in asm\n+subroutine mysqrt(a)\n+ real(KIND=KIND(0.0D0)) :: a\n+ a=sqrt(a)\n+end subroutine\n+! { dg-final { scan-assembler-times \"call\" 0 } }"}]}