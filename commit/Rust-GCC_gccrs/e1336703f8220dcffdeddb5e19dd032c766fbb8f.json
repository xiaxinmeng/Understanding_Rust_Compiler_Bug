{"sha": "e1336703f8220dcffdeddb5e19dd032c766fbb8f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTEzMzY3MDNmODIyMGRjZmZkZWRkYjVlMTlkZDAzMmM3NjZmYmI4Zg==", "commit": {"author": {"name": "Kewen Lin", "email": "linkw@gcc.gnu.org", "date": "2020-09-04T02:58:39Z"}, "committer": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2020-09-04T03:01:56Z"}, "message": "test/rs6000: Replace test targets p8 and p9+\n\nThis patch is to clean existing rs6000 test targets p8 and p9+\nwith existing has_arch_pwr8 and has_arch_pwr9 targets combination\nor only one of them.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/powerpc/pr92398.p9+.c: Replace p9+ with has_arch_pwr9.\n\t* gcc.target/powerpc/pr92398.p9-.c: Replace p9+ with has_arch_pwr9,\n\tand replace p8 with has_arch_pwr8 && !has_arch_pwr9.\n\t* lib/target-supports.exp (check_effective_target_p8): Remove.\n\t(check_effective_target_p9+): Remove.", "tree": {"sha": "da6bde47fbe5d8afd3f4f71ff1427a36ac765459", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da6bde47fbe5d8afd3f4f71ff1427a36ac765459"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e1336703f8220dcffdeddb5e19dd032c766fbb8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1336703f8220dcffdeddb5e19dd032c766fbb8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1336703f8220dcffdeddb5e19dd032c766fbb8f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1336703f8220dcffdeddb5e19dd032c766fbb8f/comments", "author": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e82b6cfcf13d4fc4511695f4085cadd767c90d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e82b6cfcf13d4fc4511695f4085cadd767c90d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e82b6cfcf13d4fc4511695f4085cadd767c90d7"}], "stats": {"total": 26, "additions": 3, "deletions": 23}, "files": [{"sha": "72dd1d9a274e7c709b7883713419eb893f535b4a", "filename": "gcc/testsuite/gcc.target/powerpc/pr92398.p9+.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1336703f8220dcffdeddb5e19dd032c766fbb8f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr92398.p9%2B.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1336703f8220dcffdeddb5e19dd032c766fbb8f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr92398.p9%2B.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr92398.p9%2B.c?ref=e1336703f8220dcffdeddb5e19dd032c766fbb8f", "patch": "@@ -1,4 +1,4 @@\n-/* { dg-do compile { target { lp64 && p9+ } } } */\n+/* { dg-do compile { target { lp64 && has_arch_pwr9 } } } */\n /* { dg-require-effective-target powerpc_vsx_ok } */\n /* { dg-options \"-O2 -mvsx\" } */\n "}, {"sha": "bd7fa98af5155611980d61fa7538b5a2fd4df1c1", "filename": "gcc/testsuite/gcc.target/powerpc/pr92398.p9-.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1336703f8220dcffdeddb5e19dd032c766fbb8f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr92398.p9-.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1336703f8220dcffdeddb5e19dd032c766fbb8f/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr92398.p9-.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr92398.p9-.c?ref=e1336703f8220dcffdeddb5e19dd032c766fbb8f", "patch": "@@ -1,9 +1,9 @@\n-/* { dg-do compile { target { lp64 && {! p9+} } } } */\n+/* { dg-do compile { target { lp64 && {! has_arch_pwr9} } } } */\n /* { dg-require-effective-target powerpc_vsx_ok } */\n /* { dg-options \"-O2 -mvsx\" } */\n \n /* { dg-final { scan-assembler-times {\\mnot\\M} 2 { xfail be } } } */\n-/* { dg-final { scan-assembler-times {\\mstd\\M} 2 { xfail { p8 && be } } } } */\n+/* { dg-final { scan-assembler-times {\\mstd\\M} 2 { xfail { { {! has_arch_pwr9} && has_arch_pwr8 } && be } } } } */\n \n /* Source code for the test in pr92398.h */\n #include \"pr92398.h\""}, {"sha": "6881b66cd23d38a09179889ad2edb0df55fd1270", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1336703f8220dcffdeddb5e19dd032c766fbb8f/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1336703f8220dcffdeddb5e19dd032c766fbb8f/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=e1336703f8220dcffdeddb5e19dd032c766fbb8f", "patch": "@@ -2687,26 +2687,6 @@ proc check_effective_target_le { } {\n     }]\n }\n \n-# Return 1 if we're generating code for only power8 platforms.\n-\n-proc check_effective_target_p8 {  } {\n-  return [check_no_compiler_messages_nocache p8 assembly {\n-\t#if !(!defined(_ARCH_PWR9) && defined(_ARCH_PWR8))\n-\t#error NO\n-\t#endif\n-  } \"\"]\n-}\n-\n-# Return 1 if we're generating code for power9 or later platforms.\n-\n-proc check_effective_target_p9+ {  } {\n-  return [check_no_compiler_messages_nocache p9+ assembly {\n-\t#if !(defined(_ARCH_PWR9))\n-\t#error NO\n-\t#endif\n-  } \"\"]\n-}\n-\n # Return 1 if we're generating 32-bit code using default options, 0\n # otherwise.\n "}]}