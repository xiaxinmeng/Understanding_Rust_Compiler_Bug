{"sha": "d95167eef4d15a5099874990fcca5e5a19fb8b38", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk1MTY3ZWVmNGQxNWE1MDk5ODc0OTkwZmNjYTVlNWExOWZiOGIzOA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2016-01-11T09:38:28Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2016-01-11T09:38:28Z"}, "message": "Don't allow latch with phi in try_transform_to_exit_first_loop_alt\n\n2016-01-11  Tom de Vries  <tom@codesourcery.com>\n\n\tPR tree-optimization/69109\n\t* tree-parloops.c (try_transform_to_exit_first_loop_alt): Don't allow\n\tlatch with phi.\n\n\t* gcc.dg/autopar/pr69109-2.c: New test.\n\t* gcc.dg/autopar/pr69109.c: New test.\n\nFrom-SVN: r232212", "tree": {"sha": "b22a7438f476e5f3f48613ffa0779ecb9f46444b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b22a7438f476e5f3f48613ffa0779ecb9f46444b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d95167eef4d15a5099874990fcca5e5a19fb8b38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d95167eef4d15a5099874990fcca5e5a19fb8b38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d95167eef4d15a5099874990fcca5e5a19fb8b38", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d95167eef4d15a5099874990fcca5e5a19fb8b38/comments", "author": null, "committer": null, "parents": [{"sha": "4f6403a8ce2648cb785789f444b5bbaccd415976", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f6403a8ce2648cb785789f444b5bbaccd415976", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f6403a8ce2648cb785789f444b5bbaccd415976"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "c0c3cece95be2eb94e51a6b7e23fcba033e7db77", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d95167eef4d15a5099874990fcca5e5a19fb8b38", "patch": "@@ -1,3 +1,9 @@\n+2016-01-11  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69109\n+\t* tree-parloops.c (try_transform_to_exit_first_loop_alt): Don't allow\n+\tlatch with phi.\n+\n 2016-01-11  Tom de Vries  <tom@codesourcery.com>\n \n \tPR tree-optimization/69108"}, {"sha": "a160ed095174e405c4b225d6c85d9f5c64c05728", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d95167eef4d15a5099874990fcca5e5a19fb8b38", "patch": "@@ -1,3 +1,9 @@\n+2016-01-11  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR tree-optimization/69109\n+\t* gcc.dg/autopar/pr69109-2.c: New test.\n+\t* gcc.dg/autopar/pr69109.c: New test.\n+\n 2016-01-11  Tom de Vries  <tom@codesourcery.com>\n \n \tPR tree-optimization/69108"}, {"sha": "0a3154ba4f5a9d46122a8556863de6487ab8fe1f", "filename": "gcc/testsuite/gcc.dg/autopar/pr69109-2.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69109-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69109-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69109-2.c?ref=d95167eef4d15a5099874990fcca5e5a19fb8b38", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ftree-parallelize-loops=2 -funswitch-loops\" } */\n+\n+#include \"../../gcc.c-torture/compile/pr32399.c\""}, {"sha": "58f3a9fafe3605ab9abf7ec4264f6b31d168ba8f", "filename": "gcc/testsuite/gcc.dg/autopar/pr69109.c", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69109.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69109.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr69109.c?ref=d95167eef4d15a5099874990fcca5e5a19fb8b38", "patch": "@@ -0,0 +1,4 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ftree-parallelize-loops=2 -funswitch-loops\" } */\n+\n+#include \"../vect/unswitch-loops-pr26969.c\""}, {"sha": "5afaaf8af13a6a5730a7059987e713ce76d94465", "filename": "gcc/tree-parloops.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftree-parloops.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d95167eef4d15a5099874990fcca5e5a19fb8b38/gcc%2Ftree-parloops.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-parloops.c?ref=d95167eef4d15a5099874990fcca5e5a19fb8b38", "patch": "@@ -1769,6 +1769,10 @@ try_transform_to_exit_first_loop_alt (struct loop *loop,\n   if (!gimple_seq_nondebug_singleton_p (bb_seq (loop->latch)))\n     return false;\n \n+  /* Check whether the latch contains no phis.  */\n+  if (phi_nodes (loop->latch) != NULL)\n+    return false;\n+\n   /* Check whether the latch contains the loop iv increment.  */\n   edge back = single_succ_edge (loop->latch);\n   edge exit = single_dom_exit (loop);"}]}