{"sha": "c57685107c297b07a00f5a19fe0d475f7865881d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzU3Njg1MTA3YzI5N2IwN2EwMGY1YTE5ZmUwZDQ3NWY3ODY1ODgxZA==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2012-05-25T08:20:03Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@gcc.gnu.org", "date": "2012-05-25T08:20:03Z"}, "message": "tramp.S (trampoline_setup): Use a longcall sequence in the non pic case on VxWorks.\n\n        libgcc/\n        * config/rs6000/vxworks/tramp.S (trampoline_setup): Use a longcall\n        sequence in the non pic case on VxWorks.\n\nFrom-SVN: r187871", "tree": {"sha": "82400b3f70e02446852f2477ffaa4727616d9183", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82400b3f70e02446852f2477ffaa4727616d9183"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c57685107c297b07a00f5a19fe0d475f7865881d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c57685107c297b07a00f5a19fe0d475f7865881d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c57685107c297b07a00f5a19fe0d475f7865881d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c57685107c297b07a00f5a19fe0d475f7865881d/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "489381473deb41fee4842515709fdcdb79745acf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/489381473deb41fee4842515709fdcdb79745acf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/489381473deb41fee4842515709fdcdb79745acf"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "db4c801580e17c76dbc015d7aa9693aa4feee909", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c57685107c297b07a00f5a19fe0d475f7865881d/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c57685107c297b07a00f5a19fe0d475f7865881d/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=c57685107c297b07a00f5a19fe0d475f7865881d", "patch": "@@ -1,3 +1,8 @@\n+2012-05-25  Olivier Hainque  <hainque@adacore.com>\n+\n+\t* config/rs6000/vxworks/tramp.S (trampoline_setup): Use a longcall\n+\tsequence in the non pic case on VxWorks.\n+\n 2012-05-24  Olivier Hainque  <hainque@adacore.com>\n \n \t* Makefile.in: Move dependency on install-unwind_h from"}, {"sha": "d274d0962059869d3bb308208eac64a77d2e31f2", "filename": "libgcc/config/rs6000/tramp.S", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c57685107c297b07a00f5a19fe0d475f7865881d/libgcc%2Fconfig%2Frs6000%2Ftramp.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c57685107c297b07a00f5a19fe0d475f7865881d/libgcc%2Fconfig%2Frs6000%2Ftramp.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Frs6000%2Ftramp.S?ref=c57685107c297b07a00f5a19fe0d475f7865881d", "patch": "@@ -95,6 +95,16 @@ FUNC_START(__trampoline_setup)\n \tblr\n \n .Labort:\n+/* Use a longcall sequence in the non PIC case on VxWorks, to prevent\n+   possible relocation errors if this is module-loaded very far away from\n+   the 'abort' entry point.  */\n+#if defined (__VXWORKS__) && ! (defined __PIC__ || defined __pic__)\n+        lis   r11,JUMP_TARGET(abort)@ha\n+        addic r11,r11,JUMP_TARGET(abort)@l\n+        mtlr  r11\n+        blrl\n+#else\n+\n #if (defined __PIC__ || defined __pic__) && defined HAVE_AS_REL16\n \tbcl\t20,31,1f\n 1:\tmflr\tr30\n@@ -105,3 +115,5 @@ FUNC_START(__trampoline_setup)\n FUNC_END(__trampoline_setup)\n \n #endif\n+\n+#endif"}]}