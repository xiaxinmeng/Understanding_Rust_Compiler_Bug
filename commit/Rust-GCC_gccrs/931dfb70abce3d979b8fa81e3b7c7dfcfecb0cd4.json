{"sha": "931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTMxZGZiNzBhYmNlM2Q5NzliOGZhODFlM2I3YzdkZmNmZWNiMGNkNA==", "commit": {"author": {"name": "Dimitar Dimitrov", "email": "dimitar@dinux.eu", "date": "2018-06-22T03:35:42Z"}, "committer": {"name": "Dimitar Dimitrov", "email": "dimitar@dinux.eu", "date": "2020-05-05T17:42:57Z"}, "message": "testsuite: pru: Add clobber test\n\ngcc/testsuite/ChangeLog:\n\n2020-05-05  Dimitar Dimitrov  <dimitar@dinux.eu>\n\n\t* gcc.target/pru/clobber-sp.c: New test.\n\nSigned-off-by: Dimitar Dimitrov <dimitar@dinux.eu>", "tree": {"sha": "eb41c2cc040b57ff00e5709c5acb646adfb04c8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb41c2cc040b57ff00e5709c5acb646adfb04c8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4/comments", "author": null, "committer": null, "parents": [{"sha": "09d8b020dbcbfd50e4ed1ee8681a191572288ebd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09d8b020dbcbfd50e4ed1ee8681a191572288ebd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09d8b020dbcbfd50e4ed1ee8681a191572288ebd"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "97a1ad5078e4ff8efff32a354835de0a4b21a8e4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4", "patch": "@@ -1,3 +1,7 @@\n+2020-05-05  Dimitar Dimitrov  <dimitar@dinux.eu>\n+\n+\t* gcc.target/pru/clobber-sp.c: New test.\n+\n 2020-05-05  Dimitar Dimitrov  <dimitar@dinux.eu>\n \n \t* gcc.target/pru/lra-framepointer-fragmentation-1.c: Update test to"}, {"sha": "3cc0a60bfc95345e03a1df4d40d7e0b4f1f30f4f", "filename": "gcc/testsuite/gcc.target/pru/clobber-sp.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4/gcc%2Ftestsuite%2Fgcc.target%2Fpru%2Fclobber-sp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4/gcc%2Ftestsuite%2Fgcc.target%2Fpru%2Fclobber-sp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpru%2Fclobber-sp.c?ref=931dfb70abce3d979b8fa81e3b7c7dfcfecb0cd4", "patch": "@@ -0,0 +1,24 @@\n+/* Test inline ASM clobber for SP register */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O1\" } */\n+\n+/* -O1 in the options is significant.  */\n+\n+extern void abort (void);\n+\n+int\n+test1 (void)\n+{\n+  int res;\n+\n+  /* { dg-warning \"listing the stack pointer register 'sp' in a clobber list is deprecated\" \"\" { target pru-*-* } .+2 } */\n+  /* { dg-message \"note: the value of the stack pointer after an 'asm' statement must be the same as it was before the statement\" \"\" { target pru-*-* } .+1 } */\n+  asm volatile(\n+\t       \"ldi\t%[res], 101\t\t\\n\\t\"\n+\t       : [res] \"=r\" (res)\n+\t       :\n+\t       : \"sp\");\n+\n+  return res;\n+}"}]}