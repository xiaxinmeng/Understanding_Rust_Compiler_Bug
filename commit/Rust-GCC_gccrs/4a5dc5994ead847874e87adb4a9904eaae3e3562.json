{"sha": "4a5dc5994ead847874e87adb4a9904eaae3e3562", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE1ZGM1OTk0ZWFkODQ3ODc0ZTg3YWRiNGE5OTA0ZWFhZTNlMzU2Mg==", "commit": {"author": {"name": "Florian Weimer", "email": "fweimer@redhat.com", "date": "2015-08-19T13:00:24Z"}, "committer": {"name": "Florian Weimer", "email": "fw@gcc.gnu.org", "date": "2015-08-19T13:00:24Z"}, "message": "Make the stack non-executable in GNAT tools\n\nDue to PR67205, the deeply nested instantiations require trampolines,\nwhich in turn requires an executable stack for the GNAT tools on\narchitectures such as x86_64.\n\nFrom-SVN: r227004", "tree": {"sha": "6622ea45fa940aa861b6d804bc680a224647cba3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6622ea45fa940aa861b6d804bc680a224647cba3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a5dc5994ead847874e87adb4a9904eaae3e3562", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a5dc5994ead847874e87adb4a9904eaae3e3562", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a5dc5994ead847874e87adb4a9904eaae3e3562", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a5dc5994ead847874e87adb4a9904eaae3e3562/comments", "author": {"login": "fweimer-rh", "id": 75532728, "node_id": "MDQ6VXNlcjc1NTMyNzI4", "avatar_url": "https://avatars.githubusercontent.com/u/75532728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fweimer-rh", "html_url": "https://github.com/fweimer-rh", "followers_url": "https://api.github.com/users/fweimer-rh/followers", "following_url": "https://api.github.com/users/fweimer-rh/following{/other_user}", "gists_url": "https://api.github.com/users/fweimer-rh/gists{/gist_id}", "starred_url": "https://api.github.com/users/fweimer-rh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fweimer-rh/subscriptions", "organizations_url": "https://api.github.com/users/fweimer-rh/orgs", "repos_url": "https://api.github.com/users/fweimer-rh/repos", "events_url": "https://api.github.com/users/fweimer-rh/events{/privacy}", "received_events_url": "https://api.github.com/users/fweimer-rh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3bbce100e955c1fe27bb03eee3695f853c6f413f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bbce100e955c1fe27bb03eee3695f853c6f413f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bbce100e955c1fe27bb03eee3695f853c6f413f"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "a4d5a3ec2f947a817b17472025b80c534c161fba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a5dc5994ead847874e87adb4a9904eaae3e3562/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a5dc5994ead847874e87adb4a9904eaae3e3562/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a5dc5994ead847874e87adb4a9904eaae3e3562", "patch": "@@ -1,3 +1,11 @@\n+2015-08-13  Florian Weimer  <fweimer@redhat.com>\n+\n+\t* prj.adb (For_Every_Project_Imported_Context.Recursive_Check_Context):\n+\tMove Name_Id_Set instantiation to the Prj package, to avoid trampolines.\n+\t* prj-proc.adb (Process.Process_Expression_Variable_Decl):\n+\tMove Name_Ids instantiation to the Prj.Proc package, to avoid\n+\ttrampolines.\n+\n 2015-08-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/arm/arm.c (bounds_check): Use %wd print format"}, {"sha": "3a014f1f6b3fd9b5c388bced437d4e2c1061fe87", "filename": "gcc/ada/prj-proc.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a5dc5994ead847874e87adb4a9904eaae3e3562/gcc%2Fada%2Fprj-proc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a5dc5994ead847874e87adb4a9904eaae3e3562/gcc%2Fada%2Fprj-proc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-proc.adb?ref=4a5dc5994ead847874e87adb4a9904eaae3e3562", "patch": "@@ -72,6 +72,8 @@ package body Prj.Proc is\n       Equal      => \"=\");\n    --  Stores the default values of 'Runtime names for the various languages\n \n+   package Name_Ids is new Ada.Containers.Vectors (Positive, Name_Id);\n+\n    procedure Add (To_Exp : in out Name_Id; Str : Name_Id);\n    --  Concatenate two strings and returns another string if both\n    --  arguments are not null string.\n@@ -2193,8 +2195,6 @@ package body Prj.Proc is\n          if Is_Attribute and then Name = Snames.Name_Project_Path then\n             if In_Tree.Is_Root_Tree then\n                declare\n-                  package Name_Ids is\n-                    new Ada.Containers.Vectors (Positive, Name_Id);\n                   Val  : String_List_Id := New_Value.Values;\n                   List : Name_Ids.Vector;\n                begin"}, {"sha": "0deb39beb29e8a572f5ce6aa6dd9c14cfe5e5e21", "filename": "gcc/ada/prj.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a5dc5994ead847874e87adb4a9904eaae3e3562/gcc%2Fada%2Fprj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a5dc5994ead847874e87adb4a9904eaae3e3562/gcc%2Fada%2Fprj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.adb?ref=4a5dc5994ead847874e87adb4a9904eaae3e3562", "patch": "@@ -76,6 +76,9 @@ package body Prj is\n                           All_Upper_Case => All_Upper_Case_Image'Access,\n                           Mixed_Case     => Mixed_Case_Image'Access);\n \n+   package Name_Id_Set is\n+      new Ada.Containers.Ordered_Sets (Element_Type => Name_Id);\n+\n    procedure Free (Project : in out Project_Id);\n    --  Free memory allocated for Project\n \n@@ -589,9 +592,6 @@ package body Prj is\n          In_Aggregate_Lib      : Boolean;\n          From_Encapsulated_Lib : Boolean)\n       is\n-         package Name_Id_Set is\n-           new Ada.Containers.Ordered_Sets (Element_Type => Name_Id);\n-\n          Seen_Name : Name_Id_Set.Set;\n          --  This set is needed to ensure that we do not handle the same\n          --  project twice in the context of aggregate libraries."}]}