{"sha": "e0466d32eb3422e6d206a16845e4e594d3a0f2b2", "node_id": "C_kwDOANBUbNoAKGUwNDY2ZDMyZWIzNDIyZTZkMjA2YTE2ODQ1ZTRlNTk0ZDNhMGYyYjI", "commit": {"author": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2022-06-08T06:44:36Z"}, "committer": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2022-07-01T10:03:13Z"}, "message": "Enable some features for RTEMS in libstdc++\n\nRemove RTEMS support from crossconfig.m4 since this code is not used due to\n\"with_newlib\" being \"yes\".\n\nlibstdc++-v3/ChangeLog:\n\n\t* configure: Regnerate.\n\t* configure.ac (newlib, *-rtems*): Enable TLS support for all RTEMS\n\ttargets except bfin, lm32, mips, moxie, or1k, and v850.\n\tFor all RTEMS targets, define HAVE_ALIGNED_ALLOC, HAVE_AT_QUICK_EXIT,\n\tHAVE_LINK, HAVE_POLL, HAVE_QUICK_EXIT, HAVE_READLINK, HAVE_SETENV,\n\tHAVE_SLEEP, HAVE_SOCKATMARK, HAVE_STRERROR_L, HAVE_SYMLINK,\n\tHAVE_TRUNCATE, and HAVE_USLEEP.\n\t* crossconfig.m4 (*-rtems*): Remove.", "tree": {"sha": "d6d42cff050f6e3ee75cae2b6dc20b66c9b0a463", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6d42cff050f6e3ee75cae2b6dc20b66c9b0a463"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0466d32eb3422e6d206a16845e4e594d3a0f2b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0466d32eb3422e6d206a16845e4e594d3a0f2b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0466d32eb3422e6d206a16845e4e594d3a0f2b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0466d32eb3422e6d206a16845e4e594d3a0f2b2/comments", "author": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a33a3e2f7517a994410ca33d00052c6d3f86aff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a33a3e2f7517a994410ca33d00052c6d3f86aff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a33a3e2f7517a994410ca33d00052c6d3f86aff"}], "stats": {"total": 6043, "additions": 64, "deletions": 5979}, "files": [{"sha": "19ca3368784ec71a56c53b44b4122b5a8bf6b17b", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 39, "deletions": 5973, "changes": 6012, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0466d32eb3422e6d206a16845e4e594d3a0f2b2/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0466d32eb3422e6d206a16845e4e594d3a0f2b2/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=e0466d32eb3422e6d206a16845e4e594d3a0f2b2"}, {"sha": "79512a398c2bb472d520834668e70518b3eb02c5", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0466d32eb3422e6d206a16845e4e594d3a0f2b2/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0466d32eb3422e6d206a16845e4e594d3a0f2b2/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=e0466d32eb3422e6d206a16845e4e594d3a0f2b2", "patch": "@@ -353,6 +353,31 @@ else\n \n     AC_DEFINE(HAVE_ICONV)\n     AC_DEFINE(HAVE_MEMALIGN)\n+\n+    case \"${target}\" in\n+      *-rtems*)\n+        case \"${target}\" in\n+          bfin* | lm32* | mips* | moxie* | or1k* | v850*)\n+            ;;\n+          *)\n+            AC_DEFINE(HAVE_TLS)\n+            ;;\n+        esac\n+        AC_DEFINE(HAVE_ALIGNED_ALLOC)\n+        AC_DEFINE(HAVE_AT_QUICK_EXIT)\n+        AC_DEFINE(HAVE_LINK)\n+        AC_DEFINE(HAVE_POLL)\n+        AC_DEFINE(HAVE_QUICK_EXIT)\n+        AC_DEFINE(HAVE_READLINK)\n+        AC_DEFINE(HAVE_SETENV)\n+        AC_DEFINE(HAVE_SLEEP)\n+        AC_DEFINE(HAVE_SOCKATMARK)\n+        AC_DEFINE(HAVE_STRERROR_L)\n+        AC_DEFINE(HAVE_SYMLINK)\n+        AC_DEFINE(HAVE_TRUNCATE)\n+        AC_DEFINE(HAVE_USLEEP)\n+        ;;\n+    esac\n   elif test \"x$with_headers\" != \"xno\"; then\n     GLIBCXX_CROSSCONFIG\n   fi"}, {"sha": "e8ff89fe658b25be065830aad991a2f2f045da12", "filename": "libstdc++-v3/crossconfig.m4", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0466d32eb3422e6d206a16845e4e594d3a0f2b2/libstdc%2B%2B-v3%2Fcrossconfig.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0466d32eb3422e6d206a16845e4e594d3a0f2b2/libstdc%2B%2B-v3%2Fcrossconfig.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fcrossconfig.m4?ref=e0466d32eb3422e6d206a16845e4e594d3a0f2b2", "patch": "@@ -244,12 +244,6 @@ case \"${host}\" in\n     AC_DEFINE(HAVE_SINHF)\n     AC_DEFINE(HAVE_SINHL)\n     ;;\n-  *-rtems*)\n-    GLIBCXX_CHECK_COMPILER_FEATURES\n-    GLIBCXX_CHECK_LINKER_FEATURES\n-    GLIBCXX_CHECK_MATH_SUPPORT\n-    GLIBCXX_CHECK_STDLIB_SUPPORT\n-    ;;\n   *-tpf)\n     SECTION_FLAGS='-ffunction-sections -fdata-sections'\n     SECTION_LDFLAGS='-Wl,--gc-sections $SECTION_LDFLAGS'"}]}