{"sha": "a6567a0faaeafd7dc37eb6d52666c12f466c376f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTY1NjdhMGZhYWVhZmQ3ZGMzN2ViNmQ1MjY2NmMxMmY0NjZjMzc2Zg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-02-20T06:43:08Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-02-20T06:43:08Z"}, "message": "re PR c++/14186 (enum in base class conflicts with derived class)\n\n\tPR c++/14186\n\t* name-lookup.c (push_class_level_binding): Do not complain about\n\tadding a binding for a member whose name is the same as the\n\tenclosing class if the member is located in a base class of the\n\tcurrent class.\n\n\tPR c++/14186\n\t* g++.dg/lookup/member1.C: New test.\n\nFrom-SVN: r78149", "tree": {"sha": "672b0866db4b5b381df2069fe9d95a9aeab85507", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/672b0866db4b5b381df2069fe9d95a9aeab85507"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6567a0faaeafd7dc37eb6d52666c12f466c376f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6567a0faaeafd7dc37eb6d52666c12f466c376f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6567a0faaeafd7dc37eb6d52666c12f466c376f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6567a0faaeafd7dc37eb6d52666c12f466c376f/comments", "author": null, "committer": null, "parents": [{"sha": "f819a6a516e88b987f72f374c5e5d5e8f3ec2798", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f819a6a516e88b987f72f374c5e5d5e8f3ec2798", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f819a6a516e88b987f72f374c5e5d5e8f3ec2798"}], "stats": {"total": 34, "additions": 31, "deletions": 3}, "files": [{"sha": "d1dea6dd76181f7fdcb8783d1479b1489c6d4b03", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a6567a0faaeafd7dc37eb6d52666c12f466c376f", "patch": "@@ -1,3 +1,11 @@\n+2004-02-19  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/14186\n+\t* name-lookup.c (push_class_level_binding): Do not complain about\n+\tadding a binding for a member whose name is the same as the\n+\tenclosing class if the member is located in a base class of the\n+\tcurrent class.\n+\n 2004-02-19  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n \tPR c++/14181"}, {"sha": "e823ae3845842ac9f9bb4e9f6bcc57a113588359", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=a6567a0faaeafd7dc37eb6d52666c12f466c376f", "patch": "@@ -2762,9 +2762,13 @@ push_class_level_binding (tree name, tree x)\n \t   && DECL_CONTEXT (x) != current_class_type))\n       && DECL_NAME (x) == constructor_name (current_class_type))\n     {\n-      error (\"`%D' has the same name as the class in which it is declared\",\n-\t     x);\n-      POP_TIMEVAR_AND_RETURN (TV_NAME_LOOKUP, false);\n+      tree scope = context_for_name_lookup (x);\n+      if (TYPE_P (scope) && same_type_p (scope, current_class_type))\n+\t{\n+\t  error (\"`%D' has the same name as the class in which it is declared\",\n+\t\t x);\n+\t  POP_TIMEVAR_AND_RETURN (TV_NAME_LOOKUP, false);\n+\t}\n     }\n \n   /* If this declaration shadows a declaration from an enclosing"}, {"sha": "9ead668c15e7cf17ed74f25f82c3d61422d4f59f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a6567a0faaeafd7dc37eb6d52666c12f466c376f", "patch": "@@ -1,3 +1,8 @@\n+2004-02-19  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/14186\n+\t* g++.dg/lookup/member1.C: New test.\n+\n 2004-02-19  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* gcc.c-torture/compile/20040130-1.c: Enable only when"}, {"sha": "82bb657f5083926641cd2ee4d3c70a7a95327d61", "filename": "gcc/testsuite/g++.dg/lookup/member1.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fmember1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6567a0faaeafd7dc37eb6d52666c12f466c376f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fmember1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fmember1.C?ref=a6567a0faaeafd7dc37eb6d52666c12f466c376f", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/14186\n+\n+struct Base \n+{ \n+  enum { Derived }; \n+}; \n+ \n+class Derived : public Base \n+{ \n+  Derived(); \n+};"}]}