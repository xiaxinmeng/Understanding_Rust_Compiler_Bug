{"sha": "8cce3d7579f87245302f6ceae1b33412558da1c0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGNjZTNkNzU3OWY4NzI0NTMwMmY2Y2VhZTFiMzM0MTI1NThkYTFjMA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-09-09T12:46:27Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-09-09T12:46:27Z"}, "message": "[multiple changes]\n\n2010-09-09  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_attr.adb: Minor reformatting.\n\n2010-09-09  Thomas Quinot  <quinot@adacore.com>\n\n\t* socket.c (__gnat_socket_ioctl): On Darwin, the req parameter is an\n\tunsigned long, not an int.\n\n2010-09-09  Vincent Celier  <celier@adacore.com>\n\n\t* make.adb, mlib-prj.adb, prj.adb, prj-nmsc.adb, mlib-tgt.adb,\n\tprj-conf.adb, prj-env.adb: Use Display_Name instead of Name whenever\n\twe are not checking for equality of path or file names.\n\n2010-09-09  Ed Schonberg  <schonberg@adacore.com>\n\n\t* exp_util.adb (Remove_Side_Effects): If the expression is a packed\n\tarray reference, reset the Analyzed flag so that it is properly\n\texpanded when the resulting object declaration is analyzed.\n\n2010-09-09  Vincent Celier  <celier@adacore.com>\n\n\t* sinput-p.adb (Source_File_Is_Subunit): Return False if X is\n\tNo_Source_File.\n\n2010-09-09  Ramon Fernandez  <fernandez@adacore.com>\n\n\t* sysdep.c: The wrSbc8548 BSP in MILS doesn't know anything about the\n\tVX_SPE_TASK option, so disable it.\n\nFrom-SVN: r164084", "tree": {"sha": "95d004c63d3883e1949ae823996d9c6caeea7d2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95d004c63d3883e1949ae823996d9c6caeea7d2a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8cce3d7579f87245302f6ceae1b33412558da1c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cce3d7579f87245302f6ceae1b33412558da1c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cce3d7579f87245302f6ceae1b33412558da1c0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cce3d7579f87245302f6ceae1b33412558da1c0/comments", "author": null, "committer": null, "parents": [{"sha": "e6a96e55f310e7221bf2c183a746cfe1746a97c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6a96e55f310e7221bf2c183a746cfe1746a97c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6a96e55f310e7221bf2c183a746cfe1746a97c9"}], "stats": {"total": 149, "additions": 104, "deletions": 45}, "files": [{"sha": "ba3f436a611cab590926fcceb174b2f6617b05fd", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -1,3 +1,34 @@\n+2010-09-09  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_attr.adb: Minor reformatting.\n+\n+2010-09-09  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* socket.c (__gnat_socket_ioctl): On Darwin, the req parameter is an\n+\tunsigned long, not an int.\n+\n+2010-09-09  Vincent Celier  <celier@adacore.com>\n+\n+\t* make.adb, mlib-prj.adb, prj.adb, prj-nmsc.adb, mlib-tgt.adb,\n+\tprj-conf.adb, prj-env.adb: Use Display_Name instead of Name whenever\n+\twe are not checking for equality of path or file names.\n+\n+2010-09-09  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* exp_util.adb (Remove_Side_Effects): If the expression is a packed\n+\tarray reference, reset the Analyzed flag so that it is properly\n+\texpanded when the resulting object declaration is analyzed.\n+\n+2010-09-09  Vincent Celier  <celier@adacore.com>\n+\n+\t* sinput-p.adb (Source_File_Is_Subunit): Return False if X is\n+\tNo_Source_File.\n+\n+2010-09-09  Ramon Fernandez  <fernandez@adacore.com>\n+\n+\t* sysdep.c: The wrSbc8548 BSP in MILS doesn't know anything about the\n+\tVX_SPE_TASK option, so disable it.\n+\n 2010-09-09  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem.adb (Walk_Library_Items): Traverse context of subunits of the"}, {"sha": "6c14b02e40f5b3d6f93f01f0ffaa8307798a5b50", "filename": "gcc/ada/exp_util.adb", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fexp_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fexp_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -4777,6 +4777,18 @@ package body Exp_Util is\n          Set_Etype (Def_Id, Exp_Type);\n          Res := New_Reference_To (Def_Id, Loc);\n \n+         --  If the expression is a packed reference, it must be reanalyzed\n+         --  and expanded, depending on context. This is the case for actuals\n+         --  where a constraint check may capture the actual before expansion\n+         --  of the call is complete.\n+\n+         if Nkind (Exp) = N_Indexed_Component\n+           and then Is_Packed (Etype (Prefix (Exp)))\n+         then\n+            Set_Analyzed (Exp, False);\n+            Set_Analyzed (Prefix (Exp), False);\n+         end if;\n+\n          E :=\n            Make_Object_Declaration (Loc,\n              Defining_Identifier => Def_Id,"}, {"sha": "5f08a865268732501d50d0e224801c8254a37af5", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -1400,7 +1400,7 @@ package body Make is\n       when Directory_Error =>\n          Make_Failed (\"unable to change to object directory \"\"\" &\n                       Path_Or_File_Name\n-                        (Project.Object_Directory.Name) &\n+                        (Project.Object_Directory.Display_Name) &\n                       \"\"\" of project \" &\n                       Get_Name_String (Project.Display_Name));\n    end Change_To_Object_Directory;\n@@ -2308,7 +2308,7 @@ package body Make is\n                            New_Args : Argument_List (1 .. Number);\n                            Last_New : Natural := 0;\n                            Dir_Path : constant String := Get_Name_String\n-                             (Arguments_Project.Directory.Name);\n+                             (Arguments_Project.Directory.Display_Name);\n \n                         begin\n                            Current := Switches.Values;\n@@ -2351,7 +2351,8 @@ package body Make is\n                                             (Name_Buffer (1 .. Name_Len)));\n                         Dir_Path : constant String :=\n                                      Get_Name_String\n-                                       (Arguments_Project.Directory.Name);\n+                                      (Arguments_Project.\n+                                       Directory.Display_Name);\n \n                      begin\n                         Test_If_Relative_Path\n@@ -3496,7 +3497,7 @@ package body Make is\n                            then\n                               Get_Name_String\n                                 (Project_Of_Current_Object_Directory\n-                                 .Object_Directory.Name);\n+                                 .Object_Directory.Display_Name);\n                               Add_Str_To_Name_Buffer\n                                 (Get_Name_String (Lib_File));\n                               Full_Lib_File := Name_Find;\n@@ -4373,7 +4374,7 @@ package body Make is\n                            Get_Name_String (ALI_Project.Library_Dir.Name);\n                         else\n                            Get_Name_String\n-                             (ALI_Project.Object_Directory.Name);\n+                             (ALI_Project.Object_Directory.Display_Name);\n                         end if;\n \n                         if not\n@@ -5256,7 +5257,8 @@ package body Make is\n \n                begin\n                   if not Is_Absolute_Path (Exec_File_Name) then\n-                     Get_Name_String (Main_Project.Exec_Directory.Name);\n+                     Get_Name_String\n+                       (Main_Project.Exec_Directory.Display_Name);\n \n                      if not\n                        Is_Directory_Separator (Name_Buffer (Name_Len))\n@@ -5281,7 +5283,7 @@ package body Make is\n \n          declare\n             Dir_Path : constant String :=\n-                         Get_Name_String (Main_Project.Directory.Name);\n+                         Get_Name_String (Main_Project.Directory.Display_Name);\n          begin\n             for J in 1 .. Binder_Switches.Last loop\n                Test_If_Relative_Path\n@@ -6467,7 +6469,7 @@ package body Make is\n                   declare\n                      Dir_Path : constant String :=\n                                   Get_Name_String\n-                                    (Main_Project.Directory.Name);\n+                                    (Main_Project.Directory.Display_Name);\n \n                   begin\n                      for\n@@ -6980,7 +6982,7 @@ package body Make is\n                   begin\n                      Src_Ind := Sinput.P.Load_Project_File\n                                   (Get_Name_String\n-                                     (Unit.File_Names (Impl).Path.Name));\n+                                   (Unit.File_Names (Impl).Path.Display_Name));\n \n                      --  If it is a subunit, discard it\n "}, {"sha": "8c0d4e1b06f81a2d7ef26a26a0a6d97e009d9101", "filename": "gcc/ada/mlib-prj.adb", "status": "modified", "additions": 14, "deletions": 16, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fmlib-prj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fmlib-prj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-prj.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -1374,12 +1374,12 @@ package body MLib.Prj is\n                                               (Object_Dir_Path\n                                                & Directory_Separator\n                                                & Filename (1 .. Last));\n+                           Object_File  : constant String :=\n+                                            Filename (1 .. Last);\n \n-                           C_Object_Path : String := Object_Path;\n-                           C_Filename    : String := Filename (1 .. Last);\n+                           C_Filename    : String := Object_File;\n \n                         begin\n-                           Canonical_Case_File_Name (C_Object_Path);\n                            Canonical_Case_File_Name (C_Filename);\n \n                            --  If in the object directory of an extended\n@@ -1390,20 +1390,17 @@ package body MLib.Prj is\n                              or else\n                                C_Filename (1 .. B_Start'Length) /= B_Start.all\n                            then\n-                              Name_Len := Last;\n-                              Name_Buffer (1 .. Name_Len) :=\n-                                C_Filename (1 .. Last);\n+                              Name_Len := 0;\n+                              Add_Str_To_Name_Buffer (C_Filename);\n                               Id := Name_Find;\n \n                               if not Objects_Htable.Get (Id) then\n                                  declare\n                                     ALI_File : constant String :=\n-                                                 Ext_To\n-                                                   (C_Filename\n-                                                      (1 .. Last), \"ali\");\n+                                                 Ext_To (C_Filename, \"ali\");\n \n                                     ALI_Path : constant String :=\n-                                                 Ext_To (C_Object_Path, \"ali\");\n+                                                 Ext_To (Object_Path, \"ali\");\n \n                                     Add_It : Boolean;\n                                     Fname  : File_Name_Type;\n@@ -1801,7 +1798,7 @@ package body MLib.Prj is\n             --  the library file and any ALI file of a source of the project.\n \n             begin\n-               Get_Name_String (For_Project.Library_Dir.Name);\n+               Get_Name_String (For_Project.Library_Dir.Display_Name);\n                Change_Dir (Name_Buffer (1 .. Name_Len));\n \n             exception\n@@ -1942,7 +1939,7 @@ package body MLib.Prj is\n \n          Copy_ALI_Files\n            (Files      => Ali_Files.all,\n-            To         => For_Project.Library_ALI_Dir.Name,\n+            To         => For_Project.Library_ALI_Dir.Display_Name,\n             Interfaces => Arguments (1 .. Argument_Number));\n \n          --  Copy interface sources if Library_Src_Dir specified\n@@ -1954,7 +1951,7 @@ package body MLib.Prj is\n             --  could be a source of the project.\n \n             begin\n-               Get_Name_String (For_Project.Library_Src_Dir.Name);\n+               Get_Name_String (For_Project.Library_Src_Dir.Display_Name);\n                Change_Dir (Name_Buffer (1 .. Name_Len));\n \n             exception\n@@ -2085,7 +2082,8 @@ package body MLib.Prj is\n             Lib_Name : constant File_Name_Type :=\n                          Library_File_Name_For (For_Project, In_Tree);\n          begin\n-            Change_Dir (Get_Name_String (For_Project.Library_Dir.Name));\n+            Change_Dir\n+              (Get_Name_String (For_Project.Library_Dir.Display_Name));\n             Lib_TS := File_Stamp (Lib_Name);\n             For_Project.Library_TS := Lib_TS;\n          end;\n@@ -2107,7 +2105,7 @@ package body MLib.Prj is\n                --  be Empty_Time_Stamp, earlier than any other time stamp.\n \n                Change_Dir\n-                 (Get_Name_String (For_Project.Object_Directory.Name));\n+                 (Get_Name_String (For_Project.Object_Directory.Display_Name));\n                Open (Dir => Object_Dir, Dir_Name => \".\");\n \n                --  For all entries in the object directory\n@@ -2212,7 +2210,7 @@ package body MLib.Prj is\n    begin\n       --  Change the working directory to the object directory\n \n-      Change_Dir (Get_Name_String (For_Project.Object_Directory.Name));\n+      Change_Dir (Get_Name_String (For_Project.Object_Directory.Display_Name));\n \n       for Index in Interfaces'Range loop\n "}, {"sha": "4d8597c1f73099af4f6f5b4cbf9e78ecb4b3f11c", "filename": "gcc/ada/mlib-tgt.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fmlib-tgt.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fmlib-tgt.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---                     Copyright (C) 2001-2009, AdaCore                     --\n+--                     Copyright (C) 2001-2010, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -343,7 +343,7 @@ package body MLib.Tgt is\n       else\n          declare\n             Lib_Dir  : constant String :=\n-                         Get_Name_String (Project.Library_Dir.Name);\n+                         Get_Name_String (Project.Library_Dir.Display_Name);\n             Lib_Name : constant String :=\n                          Get_Name_String (Project.Library_Name);\n "}, {"sha": "23869e023f8bbb3524ec8b084230c9d34b90476e", "filename": "gcc/ada/prj-conf.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj-conf.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj-conf.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-conf.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -685,7 +685,7 @@ package body Prj.Conf is\n          --  First, find the object directory of the user's project\n \n          if Obj_Dir = Nil_Variable_Value or else Obj_Dir.Default then\n-            Get_Name_String (Project.Directory.Name);\n+            Get_Name_String (Project.Directory.Display_Name);\n \n          else\n             if Is_Absolute_Path (Get_Name_String (Obj_Dir.Value)) then\n@@ -694,7 +694,7 @@ package body Prj.Conf is\n             else\n                Name_Len := 0;\n                Add_Str_To_Name_Buffer\n-                 (Get_Name_String (Project.Directory.Name));\n+                 (Get_Name_String (Project.Directory.Display_Name));\n                Add_Str_To_Name_Buffer (Get_Name_String (Obj_Dir.Value));\n             end if;\n          end if;"}, {"sha": "07b173a67fe72d66c87890cf042e767778070c6d", "filename": "gcc/ada/prj-env.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj-env.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj-env.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-env.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -728,7 +728,7 @@ package body Prj.Env is\n                Fmap.Add_To_File_Map\n                  (Unit_Name => Unit_Name_Type (Data.Unit.Name),\n                   File_Name => Data.File,\n-                  Path_Name => File_Name_Type (Data.Path.Name));\n+                  Path_Name => File_Name_Type (Data.Path.Display_Name));\n             end if;\n          end if;\n \n@@ -831,14 +831,14 @@ package body Prj.Env is\n                   Put_Name_Buffer;\n                end if;\n \n-               Get_Name_String (Source.File);\n+               Get_Name_String (Source.Display_File);\n                Put_Name_Buffer;\n \n                if Source.Locally_Removed then\n                   Name_Len := 1;\n                   Name_Buffer (1) := '/';\n                else\n-                  Get_Name_String (Source.Path.Name);\n+                  Get_Name_String (Source.Path.Display_Name);\n                end if;\n \n                Put_Name_Buffer;"}, {"sha": "f3416108c2d77ca79d1308acfeda5c8eed819009", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -6877,7 +6877,7 @@ package body Prj.Nmsc is\n                  and then Name_Loc.Source.Kind = Impl\n                then\n                   Src_Ind := Sinput.P.Load_Project_File\n-                    (Get_Name_String (Path));\n+                    (Get_Name_String (Display_Path));\n \n                   if Sinput.P.Source_File_Is_Subunit (Src_Ind) then\n                      Override_Kind (Name_Loc.Source, Sep);\n@@ -7380,7 +7380,7 @@ package body Prj.Nmsc is\n \n                            Src_Ind :=\n                              Sinput.P.Load_Project_File\n-                               (Get_Name_String (Src_Id.Path.Name));\n+                               (Get_Name_String (Src_Id.Path.Display_Name));\n \n                            if Sinput.P.Source_File_Is_Subunit (Src_Ind) then\n                               Override_Kind (Src_Id, Sep);"}, {"sha": "e0f99370ef7278c040280f855886cbea8942676f", "filename": "gcc/ada/prj.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fprj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -1015,11 +1015,11 @@ package body Prj is\n \n          if Project.Library then\n             if Project.Object_Directory = No_Path_Information\n-              or else Contains_ALI_Files (Project.Library_ALI_Dir.Name)\n+              or else Contains_ALI_Files (Project.Library_ALI_Dir.Display_Name)\n             then\n-               return Project.Library_ALI_Dir.Name;\n+               return Project.Library_ALI_Dir.Display_Name;\n             else\n-               return Project.Object_Directory.Name;\n+               return Project.Object_Directory.Display_Name;\n             end if;\n \n             --  For a non-library project, add object directory if it is not a"}, {"sha": "6e7b22ae7b43fbe503e75777b4c108a3936f32d0", "filename": "gcc/ada/sem_attr.adb", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsem_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsem_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -7930,8 +7930,6 @@ package body Sem_Attr is\n                   --  didn't permit the access to be declared in the generic\n                   --  spec, whereas the revised rule does (as long as it's not\n                   --  a formal type).\n-                  --  Note that we relax this check in CodePeer mode for\n-                  --  compatibility with legacy code.\n \n                   --  There are a couple of subtleties of the test for applying\n                   --  the check that are worth noting. First, we only apply it\n@@ -7951,6 +7949,12 @@ package body Sem_Attr is\n                   --  when within an instance, because any violations will have\n                   --  been caught by the compilation of the generic unit.\n \n+                  --  Note that we relax this check in CodePeer mode for\n+                  --  compatibility with legacy code.\n+\n+                  --  This seems an odd decision??? Why should codepeer mode\n+                  --  have a different notion of legality from the compiler???\n+\n                   elsif Attr_Id = Attribute_Access\n                     and then not CodePeer_Mode\n                     and then not In_Instance\n@@ -7969,9 +7973,9 @@ package body Sem_Attr is\n                      --  The attribute type's ultimate ancestor must be\n                      --  declared within the same generic unit as the\n                      --  subprogram is declared. The error message is\n-                     --  specialized to say \"ancestor\" for the case where\n-                     --  the access type is not its own ancestor, since\n-                     --  saying simply \"access type\" would be very confusing.\n+                     --  specialized to say \"ancestor\" for the case where the\n+                     --  access type is not its own ancestor, since saying\n+                     --  simply \"access type\" would be very confusing.\n \n                      if Enclosing_Generic_Unit (Entity (P)) /=\n                           Enclosing_Generic_Unit (Root_Type (Btyp))"}, {"sha": "568131449d2ccdd4ca8f1f0d05396b10f83cf805", "filename": "gcc/ada/sinput-p.adb", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsinput-p.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsinput-p.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinput-p.adb?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2010, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -151,6 +151,12 @@ package body Sinput.P is\n \n    function Source_File_Is_Subunit (X : Source_File_Index) return Boolean is\n    begin\n+      --  Nothing to do if X is null. So, simply return False.\n+\n+      if X = No_Source_File then\n+         return False;\n+      end if;\n+\n       Prj.Err.Scanner.Initialize_Scanner (X);\n \n       --  No error for special characters that are used for preprocessing"}, {"sha": "31e3e580bf196256176c1f073e4890e277809ca2", "filename": "gcc/ada/socket.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsocket.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsocket.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsocket.c?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -6,7 +6,7 @@\n  *                                                                          *\n  *                          C Implementation File                           *\n  *                                                                          *\n- *          Copyright (C) 2003-2009, Free Software Foundation, Inc.         *\n+ *          Copyright (C) 2003-2010, Free Software Foundation, Inc.         *\n  *                                                                          *\n  * GNAT is free software;  you can  redistribute it  and/or modify it under *\n  * terms of the  GNU General Public License as published  by the Free Soft- *\n@@ -529,6 +529,12 @@ int\n __gnat_socket_ioctl (int fd, int req, int *arg) {\n #if defined (_WIN32)\n   return ioctlsocket (fd, req, arg);\n+#elif defined (__APPLE__)\n+  /*\n+   * On Darwin, req is an unsigned long, and we want to convert without sign\n+   * extension to get the proper bit pattern in the case of a 64 bit kernel.\n+   */\n+  return ioctl (fd, (unsigned int) req, arg);\n #else\n   return ioctl (fd, req, arg);\n #endif"}, {"sha": "49d2f8376af03ad1215496f7f773749e94047ae8", "filename": "gcc/ada/sysdep.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsysdep.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cce3d7579f87245302f6ceae1b33412558da1c0/gcc%2Fada%2Fsysdep.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsysdep.c?ref=8cce3d7579f87245302f6ceae1b33412558da1c0", "patch": "@@ -959,7 +959,7 @@ __gnat_get_task_options (void)\n \n   /* Force VX_FP_TASK because it is almost always required */\n   options |= VX_FP_TASK;\n-#if defined (__SPE__)\n+#if defined (__SPE__) && (! defined (__VXWORKSMILS__))\n   options |= VX_SPE_TASK;\n #endif\n "}]}