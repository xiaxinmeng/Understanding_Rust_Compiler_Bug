{"sha": "08b8b90cff5b5626b2a240a18e63e917e2e19a20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhiOGI5MGNmZjViNTYyNmIyYTI0MGExOGU2M2U5MTdlMmUxOWEyMA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2014-05-18T20:52:45Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2014-05-18T20:52:45Z"}, "message": "fe.h (Set_Present_Expr): Move around.\n\n\t* fe.h (Set_Present_Expr): Move around.\n\t(End_Location): New macro.\n\t* gcc-interface/trans.c (Case_Statement_to_gnu): Use End_Location.\n\nFrom-SVN: r210587", "tree": {"sha": "095c4701d2c9b2fcd5a15e5c58e8109ac798ce8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/095c4701d2c9b2fcd5a15e5c58e8109ac798ce8d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08b8b90cff5b5626b2a240a18e63e917e2e19a20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08b8b90cff5b5626b2a240a18e63e917e2e19a20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08b8b90cff5b5626b2a240a18e63e917e2e19a20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08b8b90cff5b5626b2a240a18e63e917e2e19a20/comments", "author": null, "committer": null, "parents": [{"sha": "d6d229c6b485d19c9eed6c572c26ed1563194487", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6d229c6b485d19c9eed6c572c26ed1563194487", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6d229c6b485d19c9eed6c572c26ed1563194487"}], "stats": {"total": 24, "additions": 15, "deletions": 9}, "files": [{"sha": "0c989f91d358b83feddf1427ed0040f21d8a43e0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08b8b90cff5b5626b2a240a18e63e917e2e19a20/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08b8b90cff5b5626b2a240a18e63e917e2e19a20/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=08b8b90cff5b5626b2a240a18e63e917e2e19a20", "patch": "@@ -1,3 +1,9 @@\n+2014-05-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* fe.h (Set_Present_Expr): Move around.\n+\t(End_Location): New macro.\n+\t* gcc-interface/trans.c (Case_Statement_to_gnu): Use End_Location.\n+\n 2014-05-18  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity): Use Underlying_Type in"}, {"sha": "f5554f866a140c632300c103ce9d4c665ea6259c", "filename": "gcc/ada/fe.h", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08b8b90cff5b5626b2a240a18e63e917e2e19a20/gcc%2Fada%2Ffe.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08b8b90cff5b5626b2a240a18e63e917e2e19a20/gcc%2Fada%2Ffe.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffe.h?ref=08b8b90cff5b5626b2a240a18e63e917e2e19a20", "patch": "@@ -56,24 +56,21 @@ extern char Fold_Lower[], Fold_Upper[];\n extern Boolean Debug_Flag_NN;\n \n /* einfo: We will be setting Esize for types, Component_Bit_Offset for fields,\n-   Alignment for types and objects, Component_Size for array types, and\n-   Present_Expr for N_Variant nodes.  */\n+   Alignment for types and objects, Component_Size for array types.  */\n \n #define Set_Alignment\t\t\teinfo__set_alignment\n #define Set_Component_Bit_Offset\teinfo__set_component_bit_offset\n #define Set_Component_Size\t\teinfo__set_component_size\n #define Set_Esize\t\t\teinfo__set_esize\n #define Set_Mechanism\t\t\teinfo__set_mechanism\n #define Set_RM_Size\t\t\teinfo__set_rm_size\n-#define Set_Present_Expr\t\tsinfo__set_present_expr\n \n extern void Set_Alignment\t\t(Entity_Id, Uint);\n extern void Set_Component_Bit_Offset\t(Entity_Id, Uint);\n extern void Set_Component_Size\t\t(Entity_Id, Uint);\n extern void Set_Esize\t\t\t(Entity_Id, Uint);\n extern void Set_Mechanism\t\t(Entity_Id, Mechanism_Type);\n extern void Set_RM_Size\t\t\t(Entity_Id, Uint);\n-extern void Set_Present_Expr\t\t(Node_Id, Uint);\n \n #define Is_Entity_Name einfo__is_entity_name\n extern Boolean Is_Entity_Name\t\t(Node_Id);\n@@ -253,11 +250,15 @@ extern Node_Id First_Actual\t\t(Node_Id);\n extern Node_Id Next_Actual\t\t(Node_Id);\n extern Boolean Requires_Transient_Scope (Entity_Id);\n \n-/* sinfo: These functions aren't in sinfo.h since we don't make the\n-   setting functions, just the retrieval functions.  */\n+/* sinfo: */\n \n-#define Set_Has_No_Elaboration_Code sinfo__set_has_no_elaboration_code\n+#define End_Location\t\t\tsinfo__end_location\n+#define Set_Has_No_Elaboration_Code \tsinfo__set_has_no_elaboration_code\n+#define Set_Present_Expr\t\tsinfo__set_present_expr\n+\n+extern Source_Ptr End_Location \t\t(Node_Id);\n extern void Set_Has_No_Elaboration_Code\t(Node_Id, Boolean);\n+extern void Set_Present_Expr\t\t(Node_Id, Uint);\n \n /* targparm: */\n "}, {"sha": "581c57f93a4357e86f3bff22ec85bba100096e12", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08b8b90cff5b5626b2a240a18e63e917e2e19a20/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08b8b90cff5b5626b2a240a18e63e917e2e19a20/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=08b8b90cff5b5626b2a240a18e63e917e2e19a20", "patch": "@@ -2384,8 +2384,7 @@ Case_Statement_to_gnu (Node_Id gnat_node)\n \n   /* We build a SWITCH_EXPR that contains the code with interspersed\n      CASE_LABEL_EXPRs for each label.  */\n-  if (!Sloc_to_locus (Sloc (gnat_node) + UI_To_Int (End_Span (gnat_node)),\n-      &end_locus))\n+  if (!Sloc_to_locus (End_Location (gnat_node), &end_locus))\n     end_locus = input_location;\n   gnu_label = create_artificial_label (end_locus);\n   start_stmt_group ();"}]}