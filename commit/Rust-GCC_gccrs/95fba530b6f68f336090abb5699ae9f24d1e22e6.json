{"sha": "95fba530b6f68f336090abb5699ae9f24d1e22e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTVmYmE1MzBiNmY2OGYzMzYwOTBhYmI1Njk5YWU5ZjI0ZDFlMjJlNg==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2018-10-31T11:09:26Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2018-10-31T11:09:26Z"}, "message": "Update merge script and HOWTO_MERGE documentation.\n\n2018-10-31  Martin Liska  <mliska@suse.cz>\n\n\t* HOWTO_MERGE: Enhance documentation.\n\t* merge.sh: Add support for git as well.\n\nFrom-SVN: r265664", "tree": {"sha": "bc35e5b87241ba2aa2a43ad602eac7c6bf9940ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc35e5b87241ba2aa2a43ad602eac7c6bf9940ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95fba530b6f68f336090abb5699ae9f24d1e22e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95fba530b6f68f336090abb5699ae9f24d1e22e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95fba530b6f68f336090abb5699ae9f24d1e22e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95fba530b6f68f336090abb5699ae9f24d1e22e6/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2e71b5714df37470cbfa44eb1faefd4e1bc22648", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e71b5714df37470cbfa44eb1faefd4e1bc22648", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e71b5714df37470cbfa44eb1faefd4e1bc22648"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "d93e7db9ee1d6ba09f9f4f3cc035bd9ece5b7de9", "filename": "libsanitizer/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95fba530b6f68f336090abb5699ae9f24d1e22e6/libsanitizer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95fba530b6f68f336090abb5699ae9f24d1e22e6/libsanitizer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2FChangeLog?ref=95fba530b6f68f336090abb5699ae9f24d1e22e6", "patch": "@@ -1,3 +1,8 @@\n+2018-10-31  Martin Liska  <mliska@suse.cz>\n+\n+\t* HOWTO_MERGE: Enhance documentation.\n+\t* merge.sh: Add support for git as well.\n+\n 2018-08-02  Martin Liska  <mliska@suse.cz>\n \n \tPR sanitizer/86022"}, {"sha": "a47a26a4a746c01b811da1a06db284e1cfffcdd2", "filename": "libsanitizer/HOWTO_MERGE", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95fba530b6f68f336090abb5699ae9f24d1e22e6/libsanitizer%2FHOWTO_MERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95fba530b6f68f336090abb5699ae9f24d1e22e6/libsanitizer%2FHOWTO_MERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2FHOWTO_MERGE?ref=95fba530b6f68f336090abb5699ae9f24d1e22e6", "patch": "@@ -3,7 +3,8 @@ track various ABI changes and GCC-specific patches carefully.  Here is a\n general list of actions required to perform the merge:\n \n * Checkout recent GCC tree.\n-* Run merge.sh script from libsanitizer directory.\n+* Run merge.sh script from libsanitizer directory.  The script accepts one\n+  argument that is control version system (svn or git).\n * Modify Makefile.am files into asan/tsan/lsan/ubsan/sanitizer_common/interception\n   directories if needed.  In particular, you may need to add new source files\n   and remove old ones in source files list, add new flags to {C, CXX}FLAGS if\n@@ -20,7 +21,7 @@ general list of actions required to perform the merge:\n * Update ASan testsuite with corresponding tests from lib/asan/tests directory.\n   Not all tests can be migrated easily, so you don't need them all to be adapted.\n * Modify configure.ac file if needed (e.g. if you need to add link against new\n-  library for sanitizer lilbs).\n+  library for sanitizer libs).\n * Add new target platforms in configure.tgt script if needed.\n * Bump SONAME for sanitizer libraries in asan/tsan/ubsan libtool-version files\n   if ABI has changed.\n@@ -30,7 +31,9 @@ general list of actions required to perform the merge:\n * Run regression testing on at least three platforms (e.g. x86-linux-gnu, x86_64-linux-gnu,\n   aarch64-linux-gnu, arm-linux-gnueabi).\n * Run {A, UB}San bootstrap on at least three platforms.\n-* Compare ABI of corresponding libclang_rt-asan and newly build libasan libraries.\n+* Compare ABI of corresponding libclang_rt.asan and newly build libasan libraries.\n+  Similarly you can compare latest GCC release with the newly built libraries\n+  (libasan.so.*, libubsan.so.*, libtsan.so*).\n   You can use a pretty good libabigail tool (https://sourceware.org/libabigail/index.html)\n   to perform such a comparision.  Note, that the list of exported symbols may differ,\n   e.g. because libasan currently does not include UBSan runtime."}, {"sha": "fa340bedbac89871f9bb24e49218d7d8cf9d8da7", "filename": "libsanitizer/merge.sh", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95fba530b6f68f336090abb5699ae9f24d1e22e6/libsanitizer%2Fmerge.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95fba530b6f68f336090abb5699ae9f24d1e22e6/libsanitizer%2Fmerge.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fmerge.sh?ref=95fba530b6f68f336090abb5699ae9f24d1e22e6", "patch": "@@ -4,6 +4,8 @@\n \n # This script merges libsanitizer sources from upstream.\n \n+VCS=${1:-svn}\n+\n get_upstream() {\n   rm -rf upstream\n   #cp -rf orig upstream\n@@ -46,10 +48,10 @@ merge() {\n     elif [ -f $upstream_path/$f ]; then\n       echo \"FOUND IN UPSTREAM :\" $f\n       cp -v $upstream_path/$f $local_path\n-      svn add $local_path/$f\n+      $VCS add $local_path/$f\n     elif [ -f $local_path/$f ]; then\n       echo \"FOUND IN LOCAL    :\" $f\n-      svn remove $local_path/$f\n+      $VCS rm $local_path/$f\n     fi\n   done\n "}]}