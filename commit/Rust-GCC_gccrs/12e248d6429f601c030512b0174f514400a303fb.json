{"sha": "12e248d6429f601c030512b0174f514400a303fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTJlMjQ4ZDY0MjlmNjAxYzAzMDUxMmIwMTc0ZjUxNDQwMGEzMDNmYg==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@redhat.com", "date": "2001-06-02T16:44:11Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2001-06-02T16:44:11Z"}, "message": "re PR java/2605 (gcj crashes on .java file containing byte.class.getClass())\n\n2001-06-01  Alexandre Petit-Bianco  <apbianco@redhat.com>\n\n        * parse.y (type_literals:): Use `build_incomplete_class_ref' with\n        builtin type.\n        (patch_incomplete_class_ref): Build the class ref, build the class\n        init if necessary, complete the tree.\n        Fixes PR java/2605\n\n(http://gcc.gnu.org/ml/gcc-patches/2001-06/msg00044.html )\n\nFrom-SVN: r42807", "tree": {"sha": "c6027774056f9a15398efd2379ac3b9ab51b1d93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6027774056f9a15398efd2379ac3b9ab51b1d93"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12e248d6429f601c030512b0174f514400a303fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12e248d6429f601c030512b0174f514400a303fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12e248d6429f601c030512b0174f514400a303fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12e248d6429f601c030512b0174f514400a303fb/comments", "author": null, "committer": null, "parents": [{"sha": "a49bedaa4dbb72a65549e01cd3b21d82e685bbf1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a49bedaa4dbb72a65549e01cd3b21d82e685bbf1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a49bedaa4dbb72a65549e01cd3b21d82e685bbf1"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "5fc8f8f61e8cffbc4fc6b8aa8e871ba4e46f8234", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12e248d6429f601c030512b0174f514400a303fb/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12e248d6429f601c030512b0174f514400a303fb/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=12e248d6429f601c030512b0174f514400a303fb", "patch": "@@ -1,3 +1,11 @@\n+2001-06-01  Alexandre Petit-Bianco  <apbianco@redhat.com>\n+\n+\t* parse.y (type_literals:): Use `build_incomplete_class_ref' with\n+\tbuiltin type.\n+\t(patch_incomplete_class_ref): Build the class ref, build the class\n+\tinit if necessary, complete the tree.\n+\tFixes PR java/2605\n+\n 2001-05-31  Alexandre Petit-Bianco  <apbianco@redhat.com>\n \n \t* parse.y (lookup_field_wrapper): Test `name' code."}, {"sha": "e766479ba3eb52ed4b30bfa326e97bcb94379d51", "filename": "gcc/java/parse.y", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12e248d6429f601c030512b0174f514400a303fb/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12e248d6429f601c030512b0174f514400a303fb/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=12e248d6429f601c030512b0174f514400a303fb", "patch": "@@ -1954,9 +1954,12 @@ type_literals:\n |\tarray_type DOT_TK CLASS_TK\n \t\t{ $$ = build_incomplete_class_ref ($2.location, $1); }\n |\tprimitive_type DOT_TK CLASS_TK\n-\t\t{ $$ = build_class_ref ($1); }\n+                { $$ = build_incomplete_class_ref ($2.location, $1); }\n |\tVOID_TK DOT_TK CLASS_TK\n-\t\t{ $$ = build_class_ref (void_type_node); }\n+                { \n+                   $$ = build_incomplete_class_ref ($2.location,\n+                                                   void_type_node);\n+                }\n ;\n \n class_instance_creation_expression:\n@@ -13773,8 +13776,11 @@ patch_incomplete_class_ref (node)\n \n   if (!flag_emit_class_files || JPRIMITIVE_TYPE_P (ref_type))\n     {\n+      tree dot = build_class_ref (ref_type);\n       /* A class referenced by `foo.class' is initialized.  */\n-      return build_class_init (ref_type, build_class_ref (ref_type));\n+      if (!flag_emit_class_files)\n+       dot = build_class_init (ref_type, dot);\n+      return java_complete_tree (dot);\n     }\n \n   /* If we're emitting class files and we have to deal with non"}]}