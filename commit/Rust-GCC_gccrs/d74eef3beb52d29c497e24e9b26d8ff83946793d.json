{"sha": "d74eef3beb52d29c497e24e9b26d8ff83946793d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDc0ZWVmM2JlYjUyZDI5YzQ5N2UyNGU5YjI2ZDhmZjgzOTQ2NzkzZA==", "commit": {"author": {"name": "Chris Fairles", "email": "chris.fairles@gmail.com", "date": "2008-09-04T14:35:54Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-09-04T14:35:54Z"}, "message": "mutex (once_flag): Construct __gthread_once_t in a temporary variable before assigning to _M_once...\n\n2008-09-04  Chris Fairles  <chris.fairles@gmail.com>\n\n        * include/std/mutex (once_flag): Construct __gthread_once_t in a\n\ttemporary variable before assigning to _M_once to avoid initialization\n\terrors.\n\nFrom-SVN: r139986", "tree": {"sha": "19079e098a5fc22be162b78aa1635d8deb69379b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19079e098a5fc22be162b78aa1635d8deb69379b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d74eef3beb52d29c497e24e9b26d8ff83946793d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d74eef3beb52d29c497e24e9b26d8ff83946793d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d74eef3beb52d29c497e24e9b26d8ff83946793d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d74eef3beb52d29c497e24e9b26d8ff83946793d/comments", "author": {"login": "chrisfearless", "id": 812000, "node_id": "MDQ6VXNlcjgxMjAwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/812000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisfearless", "html_url": "https://github.com/chrisfearless", "followers_url": "https://api.github.com/users/chrisfearless/followers", "following_url": "https://api.github.com/users/chrisfearless/following{/other_user}", "gists_url": "https://api.github.com/users/chrisfearless/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisfearless/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisfearless/subscriptions", "organizations_url": "https://api.github.com/users/chrisfearless/orgs", "repos_url": "https://api.github.com/users/chrisfearless/repos", "events_url": "https://api.github.com/users/chrisfearless/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisfearless/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d7f2fbf618e5109a30bbe4a6e03a8e2aad4215aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7f2fbf618e5109a30bbe4a6e03a8e2aad4215aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7f2fbf618e5109a30bbe4a6e03a8e2aad4215aa"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "fa5059e25e8d888fb09bb0ea796f5cb5004aaa07", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d74eef3beb52d29c497e24e9b26d8ff83946793d/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d74eef3beb52d29c497e24e9b26d8ff83946793d/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d74eef3beb52d29c497e24e9b26d8ff83946793d", "patch": "@@ -1,3 +1,9 @@\n+2008-09-04  Chris Fairles  <chris.fairles@gmail.com>\n+\n+        * include/std/mutex (once_flag): Construct __gthread_once_t in a\n+\ttemporary variable before assigning to _M_once to avoid initialization\n+\terrors. \n+\n 2008-09-03  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* config/abi/pre/gnu.ver: Also export __once_functor_lock; tighten"}, {"sha": "e4ceaf2aac893a83b3f3b3bbaa88dc06590a0f17", "filename": "libstdc++-v3/include/std/mutex", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d74eef3beb52d29c497e24e9b26d8ff83946793d/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d74eef3beb52d29c497e24e9b26d8ff83946793d/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex?ref=d74eef3beb52d29c497e24e9b26d8ff83946793d", "patch": "@@ -615,8 +615,10 @@ namespace std\n     typedef __gthread_once_t __native_type;\n \n     once_flag()\n-    : _M_once(__GTHREAD_ONCE_INIT)\n-    { }\n+    {\n+      __gthread_once_t __tmp = __GTHREAD_ONCE_INIT;\n+      _M_once = __tmp;\n+    }\n     \n     once_flag(const once_flag&) = delete;\n     once_flag& operator=(const once_flag&) = delete;"}]}