{"sha": "ad6135e261ced29972e5aa33404e45bcdd99440f", "node_id": "C_kwDOANBUbNoAKGFkNjEzNWUyNjFjZWQyOTk3MmU1YWEzMzQwNGU0NWJjZGQ5OTQ0MGY", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-07-07T12:40:20Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-07-07T16:38:14Z"}, "message": "libstdc++: Remove workaround in __gnu_cxx::char_traits::move [PR89074]\n\nThe front-end bug that prevented this constexpr loop from working has\nbeen fixed since GCC 12.1 so we can remove the workaround.\n\nlibstdc++-v3/ChangeLog:\n\n\tPR c++/89074\n\t* include/bits/char_traits.h (__gnu_cxx::char_traits::move):\n\tRemove workaround for front-end bug.", "tree": {"sha": "20b59fc0ce7dd752b0a70ec0bdc79fe157ac3aa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20b59fc0ce7dd752b0a70ec0bdc79fe157ac3aa3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad6135e261ced29972e5aa33404e45bcdd99440f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad6135e261ced29972e5aa33404e45bcdd99440f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad6135e261ced29972e5aa33404e45bcdd99440f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad6135e261ced29972e5aa33404e45bcdd99440f/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9de8fbe1507d8c6e7c9657657a3c05337b8fde23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9de8fbe1507d8c6e7c9657657a3c05337b8fde23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9de8fbe1507d8c6e7c9657657a3c05337b8fde23"}], "stats": {"total": 9, "additions": 0, "deletions": 9}, "files": [{"sha": "965ff29b75ca4f6fe8a28a3bd5b7122c2e587384", "filename": "libstdc++-v3/include/bits/char_traits.h", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad6135e261ced29972e5aa33404e45bcdd99440f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fchar_traits.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad6135e261ced29972e5aa33404e45bcdd99440f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fchar_traits.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fchar_traits.h?ref=ad6135e261ced29972e5aa33404e45bcdd99440f", "patch": "@@ -215,14 +215,6 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t{\n \t  if (__s1 == __s2) // unlikely, but saves a lot of work\n \t    return __s1;\n-#if __cpp_constexpr_dynamic_alloc\n-\t  // The overlap detection below fails due to PR c++/89074,\n-\t  // so use a temporary buffer instead.\n-\t  char_type* __tmp = new char_type[__n];\n-\t  copy(__tmp, __s2, __n);\n-\t  copy(__s1, __tmp, __n);\n-\t  delete[] __tmp;\n-#else\n \t  const auto __end = __s2 + __n - 1;\n \t  bool __overlap = false;\n \t  for (std::size_t __i = 0; __i < __n - 1; ++__i)\n@@ -244,7 +236,6 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t    }\n \t  else\n \t    copy(__s1, __s2, __n);\n-#endif\n \t  return __s1;\n \t}\n #endif"}]}