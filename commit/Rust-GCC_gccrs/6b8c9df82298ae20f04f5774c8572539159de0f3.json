{"sha": "6b8c9df82298ae20f04f5774c8572539159de0f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmI4YzlkZjgyMjk4YWUyMGYwNGY1Nzc0Yzg1NzI1MzkxNTlkZTBmMw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-09-02T13:42:25Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-09-02T13:42:25Z"}, "message": "re PR tree-optimization/44937 (IPA-split causes crash due to null pointer deref)\n\n2010-09-02  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/44937\n\tPR tree-optimization/45412\n\t* ipa-split.c (split_function): Properly remove PHI nodes.\n\n\t* g++.dg/opt/pr45412.C: New testcase.\n\t* gcc.c-torture/compile/pr45412.c: Likewise.\n\t* gcc.c-torture/compile/pr44937.c: Likewise.\n\nFrom-SVN: r163775", "tree": {"sha": "2062b2e79347ee7aef4b50126b55c744f471fe1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2062b2e79347ee7aef4b50126b55c744f471fe1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b8c9df82298ae20f04f5774c8572539159de0f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b8c9df82298ae20f04f5774c8572539159de0f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b8c9df82298ae20f04f5774c8572539159de0f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b8c9df82298ae20f04f5774c8572539159de0f3/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c330d181bc98bc7efde028f7eb8ead33f69e6304", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c330d181bc98bc7efde028f7eb8ead33f69e6304", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c330d181bc98bc7efde028f7eb8ead33f69e6304"}], "stats": {"total": 96, "additions": 94, "deletions": 2}, "files": [{"sha": "8c38f68bce7f8701d2f2ac7b1e1982eae9310a44", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6b8c9df82298ae20f04f5774c8572539159de0f3", "patch": "@@ -1,3 +1,9 @@\n+2010-09-02  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/44937\n+\tPR tree-optimization/45412\n+\t* ipa-split.c (split_function): Properly remove PHI nodes.\n+\n 2010-09-02  Joseph Myers  <joseph@codesourcery.com>\n \n \t* opts.h (struct cl_option): Add warn_message field."}, {"sha": "56f689babf3c6ca78552e76e184dea86d8bcaeb6", "filename": "gcc/ipa-split.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Fipa-split.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Fipa-split.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-split.c?ref=6b8c9df82298ae20f04f5774c8572539159de0f3", "patch": "@@ -993,8 +993,8 @@ split_function (struct split_point *split_point)\n \t{\n \t  gimple stmt = gsi_stmt (gsi);\n \t  gcc_assert (!is_gimple_reg (gimple_phi_result (stmt)));\n-\t  mark_sym_for_renaming (SSA_NAME_VAR (PHI_RESULT (stmt)));\n-\t  gsi_remove (&gsi, false);\n+\t  mark_virtual_phi_result_for_renaming (stmt);\n+\t  remove_phi_node (&gsi, true);\n \t}\n     }\n   /* When we pass aorund the value, use existing return block.  */"}, {"sha": "1c1608fc926885ea5960cfcecce1371b25091dfa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6b8c9df82298ae20f04f5774c8572539159de0f3", "patch": "@@ -1,3 +1,11 @@\n+2010-09-02  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/44937\n+\tPR tree-optimization/45412\n+\t* g++.dg/opt/pr45412.C: New testcase.\n+\t* gcc.c-torture/compile/pr45412.c: Likewise.\n+\t* gcc.c-torture/compile/pr44937.c: Likewise.\n+\n 2010-09-02  Joseph Myers  <joseph@codesourcery.com>\n \n \t* gcc.dg/cpp/warn-comments-3.c: New.  Based on warn-comments-2.c"}, {"sha": "e374f52b51d57c6ab756bbb1a0d6723d1ae5d598", "filename": "gcc/testsuite/g++.dg/opt/pr45412.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr45412.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr45412.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr45412.C?ref=6b8c9df82298ae20f04f5774c8572539159de0f3", "patch": "@@ -0,0 +1,26 @@\n+// { dg-do compile }\n+// { dg-options \"-O2 -fipa-cp-clone -ftracer\" }\n+\n+int foo (int *);\n+void bar ();\n+\n+struct S\n+{\n+  virtual int vm ();\n+  ~S ();\n+};\n+\n+int\n+S::vm ()\n+{\n+  int state;\n+  switch (foo (&state))\n+    {\n+      case 0:\n+\t  bar ();\n+      case 1:\n+\t  delete this;\n+    }\n+  return state;\n+}\n+"}, {"sha": "3bb711d7bb449c9ffcd3c8bf0add75a27ec6351d", "filename": "gcc/testsuite/gcc.c-torture/compile/pr44937.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr44937.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr44937.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr44937.c?ref=6b8c9df82298ae20f04f5774c8572539159de0f3", "patch": "@@ -0,0 +1,30 @@\n+int g_19;\n+int *g_42;\n+int **volatile g = &g_42;\n+int g_67[5][9][2][1] = {\n+};\n+\n+int\n+func_4 (int p_5, unsigned char p_6, unsigned char p_7)\n+{\n+  unsigned char l_8[1];\n+  if (p_6)\n+    goto lbl_13;\n+  for (p_6 = 0; p_6; p_6 = (p_6, 0))\n+    if (0)\n+      {\n+      }\n+    else\n+      lbl_13:for (p_6 = 0; p_6 < 1; p_6 += 1)\n+\t  l_8[p_6] = 0;\n+  return 0;\n+}\n+\n+int *\n+func_45 (unsigned long p_46, unsigned char p_47)\n+{\n+  int *l_56 = &g_19;\n+  (void *)&l_56 != (void *)&g | !1 == func_4 (0, g_67[2][6][1][0], 0) ^ func_4 (1, 0, 0);\n+  return 0;\n+}\n+"}, {"sha": "339854b59af8b474463d2278be21edad6caebf85", "filename": "gcc/testsuite/gcc.c-torture/compile/pr45412.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr45412.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b8c9df82298ae20f04f5774c8572539159de0f3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr45412.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr45412.c?ref=6b8c9df82298ae20f04f5774c8572539159de0f3", "patch": "@@ -0,0 +1,22 @@\n+extern void baz (int, int, int);\n+\n+int j;\n+\n+int\n+bar (void)\n+{\n+  int n = 0, *np = &n;\n+  if (j)\n+    baz (0, 0, 0);\n+  if (j)\n+    baz (0, 0, 0);\n+  return n;\n+}\n+\n+void\n+foo (void)\n+{\n+  bar ();\n+  bar ();\n+}\n+"}]}