{"sha": "7ab4f354570d0961c6be259ebe704f6f4563bb67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2FiNGYzNTQ1NzBkMDk2MWM2YmUyNTllYmU3MDRmNmY0NTYzYmI2Nw==", "commit": {"author": {"name": "Dominik Vogt", "email": "vogt@linux.vnet.ibm.com", "date": "2016-08-23T09:09:45Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2016-08-23T09:09:45Z"}, "message": "S/390: Improve result verification in test case vec-genmask-1.c.\n\nTHe attached patch improves checking of teh results of the subtests\n\"a\" and \"f\".  As they share the same \"vone\" instruction, the duplicate\nscan-assembler-times was bogus.  Moved \"f\" to a separate function to\nfix this.  Also double check that no extra \"vgmf\" instructions are\nused.\n\ngcc/testsuite/ChangeLog:\n\n2016-08-23  Dominik Vogt  <vogt@linux.vnet.ibm.com>\n\n\t* gcc.target/s390/zvector/vec-genmask-1.c: Improve result\n\tverification.\n\nFrom-SVN: r239686", "tree": {"sha": "d403943a19fb4255c9be1a564e7726fa27f8314a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d403943a19fb4255c9be1a564e7726fa27f8314a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7ab4f354570d0961c6be259ebe704f6f4563bb67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ab4f354570d0961c6be259ebe704f6f4563bb67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ab4f354570d0961c6be259ebe704f6f4563bb67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ab4f354570d0961c6be259ebe704f6f4563bb67/comments", "author": {"login": "vogtd", "id": 9690100, "node_id": "MDQ6VXNlcjk2OTAxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/9690100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vogtd", "html_url": "https://github.com/vogtd", "followers_url": "https://api.github.com/users/vogtd/followers", "following_url": "https://api.github.com/users/vogtd/following{/other_user}", "gists_url": "https://api.github.com/users/vogtd/gists{/gist_id}", "starred_url": "https://api.github.com/users/vogtd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vogtd/subscriptions", "organizations_url": "https://api.github.com/users/vogtd/orgs", "repos_url": "https://api.github.com/users/vogtd/repos", "events_url": "https://api.github.com/users/vogtd/events{/privacy}", "received_events_url": "https://api.github.com/users/vogtd/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "deb9351fafe1032ced16f9608068f65930e06841", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/deb9351fafe1032ced16f9608068f65930e06841", "html_url": "https://github.com/Rust-GCC/gccrs/commit/deb9351fafe1032ced16f9608068f65930e06841"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "f4ab810ae8dfcfcb61ffeaf16a6b78ba72ea33a8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ab4f354570d0961c6be259ebe704f6f4563bb67/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ab4f354570d0961c6be259ebe704f6f4563bb67/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7ab4f354570d0961c6be259ebe704f6f4563bb67", "patch": "@@ -1,3 +1,8 @@\n+2016-08-23  Dominik Vogt  <vogt@linux.vnet.ibm.com>\n+\n+\t* gcc.target/s390/zvector/vec-genmask-1.c: Improve result\n+\tverification.\n+\n 2016-08-23  Dominik Vogt  <vogt@linux.vnet.ibm.com>\n \n \t* gcc.target/s390/md/andc-splitter-1.c: New test case."}, {"sha": "0e57b8dbc0533bea7f61c43758a44a1a6a712086", "filename": "gcc/testsuite/gcc.target/s390/zvector/vec-genmask-1.c", "status": "modified", "additions": 14, "deletions": 6, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ab4f354570d0961c6be259ebe704f6f4563bb67/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fvec-genmask-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ab4f354570d0961c6be259ebe704f6f4563bb67/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fvec-genmask-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzvector%2Fvec-genmask-1.c?ref=7ab4f354570d0961c6be259ebe704f6f4563bb67", "patch": "@@ -14,11 +14,19 @@ foo ()\n   c = vec_genmasks_32 (31, 31);\n   d = vec_genmasks_32 (5, 5);\n   e = vec_genmasks_32 (31, 0);\n+}\n+\n+int\n+bar ()\n+{\n+  /* Needs to be in a separate function so that the vone from \"a\" is not reused\n+     for \"f\".  */\n   f = vec_genmasks_32 (6, 5);\n }\n-/* { dg-final { scan-assembler-times \"vone\" 1 } } */\n-/* { dg-final { scan-assembler-times \"vgmf\\t%v.*,0,0\" 1 } } */\n-/* { dg-final { scan-assembler-times \"vgmf\\t%v.*,31,31\" 1 } } */\n-/* { dg-final { scan-assembler-times \"vgmf\\t%v.*,5,5\" 1 } } */\n-/* { dg-final { scan-assembler-times \"vgmf\\t%v.*,31,0\" 1 } } */\n-/* { dg-final { scan-assembler-times \"vone\" 1 } } */\n+\n+/* a + f: { dg-final { scan-assembler-times \"vone\" 2 } } */\n+/* b: { dg-final { scan-assembler-times \"vgmf\\t%v.*,0,0\" 1 } } */\n+/* c: { dg-final { scan-assembler-times \"vgmf\\t%v.*,31,31\" 1 } } */\n+/* d: { dg-final { scan-assembler-times \"vgmf\\t%v.*,5,5\" 1 } } */\n+/* e: { dg-final { scan-assembler-times \"vgmf\\t%v.*,31,0\" 1 } } */\n+/* b - e: { dg-final { scan-assembler-times \"vgmf\" 4 } } */"}]}