{"sha": "d51813db53d299c79b4dee7cd8f6be61d61d4635", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUxODEzZGI1M2QyOTljNzliNGRlZTdjZDhmNmJlNjFkNjFkNDYzNQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2011-09-01T14:22:43Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-01T14:22:43Z"}, "message": "Makefile.in: Clean up handling of x86 and x86-64 run-time files.\n\n\t* gcc-interface/Makefile.in: Clean up handling of x86 and x86-64\n\trun-time files.      \n\t* gcc-interface/Make-lang.in: Update dependencies.\n\nFrom-SVN: r178421", "tree": {"sha": "fcffb9c0b341a7a4b9821c5a9a83bd765167bbbe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fcffb9c0b341a7a4b9821c5a9a83bd765167bbbe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d51813db53d299c79b4dee7cd8f6be61d61d4635", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d51813db53d299c79b4dee7cd8f6be61d61d4635", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d51813db53d299c79b4dee7cd8f6be61d61d4635", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d51813db53d299c79b4dee7cd8f6be61d61d4635/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0180e8dbadd5916e2cb47762f35a0f56e8ecae6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0180e8dbadd5916e2cb47762f35a0f56e8ecae6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0180e8dbadd5916e2cb47762f35a0f56e8ecae6d"}], "stats": {"total": 156, "additions": 89, "deletions": 67}, "files": [{"sha": "18ebefdfaf8e7a8ff6f7c03ea6a8127a7c8e2030", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51813db53d299c79b4dee7cd8f6be61d61d4635/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51813db53d299c79b4dee7cd8f6be61d61d4635/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d51813db53d299c79b4dee7cd8f6be61d61d4635", "patch": "@@ -1,3 +1,9 @@\n+2011-08-31  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* gcc-interface/Makefile.in: Clean up handling of x86 and x86-64\n+\trun-time files.\n+\t* gcc-interface/Make-lang.in: Update dependencies.\n+\n 2011-09-01  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_ch3.adb, s-taprop-linux.adb, gnatls.adb: Minor reformatting."}, {"sha": "2d97a4417e853cba20ad6bd4778219506a8118b7", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51813db53d299c79b4dee7cd8f6be61d61d4635/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51813db53d299c79b4dee7cd8f6be61d61d4635/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=d51813db53d299c79b4dee7cd8f6be61d61d4635", "patch": "@@ -2952,21 +2952,6 @@ ada/inline.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n    ada/types.ads ada/uintp.ads ada/uintp.adb ada/uname.ads \\\n    ada/unchconv.ads ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n \n-ada/instpar.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\\n-   ada/a-uncdea.ads ada/alloc.ads ada/aspects.ads ada/atree.ads \\\n-   ada/atree.adb ada/casing.ads ada/debug.ads ada/einfo.ads \\\n-   ada/gnatvsn.ads ada/hostparm.ads ada/instpar.ads ada/instpar.adb \\\n-   ada/interfac.ads ada/namet.ads ada/namet.adb ada/nlists.ads ada/opt.ads \\\n-   ada/output.ads ada/sdefault.ads ada/sinfo.ads ada/sinput.ads \\\n-   ada/sinput.adb ada/sinput-l.ads ada/snames.ads ada/system.ads \\\n-   ada/s-carun8.ads ada/s-crc32.ads ada/s-crc32.adb ada/s-exctab.ads \\\n-   ada/s-imenne.ads ada/s-memory.ads ada/s-os_lib.ads ada/s-parame.ads \\\n-   ada/s-secsta.ads ada/s-soflin.ads ada/s-stache.ads ada/s-stalib.ads \\\n-   ada/s-stoele.ads ada/s-stoele.adb ada/s-string.ads ada/s-traent.ads \\\n-   ada/s-unstyp.ads ada/s-wchcon.ads ada/table.ads ada/table.adb \\\n-   ada/tree_io.ads ada/types.ads ada/uintp.ads ada/unchconv.ads \\\n-   ada/unchdeal.ads ada/urealp.ads ada/widechar.ads \n-\n ada/interfac.o : ada/interfac.ads ada/system.ads \n \n ada/itypes.o : ada/ada.ads ada/a-except.ads ada/a-unccon.ads \\"}, {"sha": "1afe6c005625917dc295445b00db3dcb0cb1fac0", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 83, "deletions": 52, "changes": 135, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51813db53d299c79b4dee7cd8f6be61d61d4635/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51813db53d299c79b4dee7cd8f6be61d61d4635/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=d51813db53d299c79b4dee7cd8f6be61d61d4635", "patch": "@@ -406,10 +406,10 @@ DUMMY_SOCKETS_TARGET_PAIRS = \\\n   g-sothco.adb<g-sothco-dummy.adb \\\n   g-sothco.ads<g-sothco-dummy.ads\n \n-# On platform where atomic increment/decrement operations are supported\n+# On platforms where atomic increment/decrement operations are supported,\n # special version of Ada.Strings.Unbounded package can be used.\n \n-ATOMICS_TARGET_PAIRS += \\\n+ATOMICS_TARGET_PAIRS = \\\n   a-stunau.adb<a-stunau-shared.adb \\\n   a-suteio.adb<a-suteio-shared.adb \\\n   a-strunb.ads<a-strunb-shared.ads \\\n@@ -423,10 +423,15 @@ ATOMICS_TARGET_PAIRS += \\\n   a-szunau.adb<a-szunau-shared.adb \\\n   a-szuzti.adb<a-szuzti-shared.adb\n \n-ATOMICS_BUILTINS_TARGET_PAIRS += \\\n+ATOMICS_BUILTINS_TARGET_PAIRS = \\\n   s-atocou.adb<s-atocou-builtin.adb\n \n-ATOMICS_X86_TARGET_PAIRS += \\\n+# Special version of units for x86 and x86-64 platforms.\n+\n+X86_TARGET_PAIRS = \\\n+  a-numaux.ads<a-numaux-x86.ads \\\n+  a-numaux.adb<a-numaux-x86.adb \\\n+  g-bytswa.adb<g-bytswa-x86.adb \\\n   s-atocou.adb<s-atocou-x86.adb\n \n # Special version of units for x86 and x86-64 platforms.\n@@ -715,11 +720,8 @@ ifeq ($(strip $(filter-out %86 wrs vxworksae vxworksmils,$(targ))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-elchha.adb<a-elchha-vxworks-ppc-full.adb \\\n   a-intnam.ads<a-intnam-vxworks.ads \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n   a-sytaco.ads<1asytaco.ads \\\n   a-sytaco.adb<1asytaco.adb \\\n-  g-bytswa.adb<g-bytswa-x86.adb \\\n   g-io.adb<g-io-vxworks-ppc-cert.adb \\\n   g-io.ads<g-io-vxworks-ppc-cert.ads \\\n   s-inmaop.adb<s-inmaop-vxworks.adb \\\n@@ -739,9 +741,9 @@ ifeq ($(strip $(filter-out %86 wrs vxworksae vxworksmils,$(targ))),)\n   s-vxwork.ads<s-vxwork-x86.ads \\\n   g-trasym.ads<g-trasym-unimplemented.ads \\\n   g-trasym.adb<g-trasym-unimplemented.adb \\\n-  system.ads<system-vxworks-x86.ads \\\n   $(ATOMICS_TARGET_PAIRS) \\\n-  $(ATOMICS_X86_TARGET_PAIRS)\n+  $(X86_TARGET_PAIRS) \\\n+  system.ads<system-vxworks-x86.ads\n \n   TOOLS_TARGET_PAIRS=\\\n   mlib-tgt-specific.adb<mlib-tgt-specific-vxworks.adb \\\n@@ -822,8 +824,6 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n   s-inmaop.adb<s-inmaop-vxworks.adb \\\n   s-intman.ads<s-intman-vxworks.ads \\\n   s-intman.adb<s-intman-vxworks.adb \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n   s-osprim.adb<s-osprim-vxworks.adb \\\n   s-parame.ads<s-parame-vxworks.ads \\\n   s-parame.adb<s-parame-vxworks.adb \\\n@@ -833,14 +833,13 @@ ifeq ($(strip $(filter-out %86 wrs vxworks,$(targ))),)\n   s-tasinf.ads<s-tasinf-vxworks.ads \\\n   s-taspri.ads<s-taspri-vxworks.ads \\\n   s-vxwork.ads<s-vxwork-x86.ads \\\n-  g-bytswa.adb<g-bytswa-x86.adb \\\n   g-socthi.ads<g-socthi-vxworks.ads \\\n   g-socthi.adb<g-socthi-vxworks.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n   g-trasym.ads<g-trasym-unimplemented.ads \\\n   g-trasym.adb<g-trasym-unimplemented.adb \\\n   $(ATOMICS_TARGET_PAIRS) \\\n-  $(ATOMICS_X86_TARGET_PAIRS)\n+  $(X86_TARGET_PAIRS)\n \n   TOOLS_TARGET_PAIRS=\\\n   mlib-tgt-specific.adb<mlib-tgt-specific-vxworks.adb \\\n@@ -1063,8 +1062,6 @@ endif\n \n ifeq ($(strip $(filter-out %86 %x86_64 solaris2%,$(arch) $(osys))),)\n   LIBGNAT_TARGET_PAIRS_COMMON = \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n   a-intnam.ads<a-intnam-solaris.ads \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n   s-intman.adb<s-intman-solaris.adb \\\n@@ -1080,14 +1077,30 @@ ifeq ($(strip $(filter-out %86 %x86_64 solaris2%,$(arch) $(osys))),)\n   g-soliop.ads<g-soliop-solaris.ads \\\n   $(ATOMICS_TARGET_PAIRS)\n \n-  ifeq ($(strip $(MULTISUBDIR)),/amd64)\n-    LIBGNAT_TARGET_PAIRS += \\\n-    $(X86_64_TARGET_PAIRS) \\\n-    system.ads<system-solaris-x86_64.ads\n+  LIBGNAT_TARGET_PAIRS_32 = \\\n+  $(X86_TARGET_PAIRS) \\\n+  system.ads<system-solaris-x86.ads\n+\n+  LIBGNAT_TARGET_PAIRS_64 = \\\n+  $(X86_64_TARGET_PAIRS) \\\n+  system.ads<system-solaris-x86_64.ads\n+\n+  ifeq ($(strip $(filter-out %86 solaris2%,$(arch) $(osys))),)\n+    ifeq ($(strip $(MULTISUBDIR)),/amd64)\n+      LIBGNAT_TARGET_PAIRS = \\\n+      $(LIBGNAT_TARGET_PAIRS_COMMON) $(LIBGNAT_TARGET_PAIRS_64)\n+    else\n+      LIBGNAT_TARGET_PAIRS = \\\n+      $(LIBGNAT_TARGET_PAIRS_COMMON) $(LIBGNAT_TARGET_PAIRS_32)\n+    endif\n   else\n-    LIBGNAT_TARGET_PAIRS += \\\n-    $(X86_TARGET_PAIRS) \\\n-    system.ads<system-solaris-x86.ads\n+    ifeq ($(strip $(MULTISUBDIR)),/32)\n+      LIBGNAT_TARGET_PAIRS = \\\n+      $(LIBGNAT_TARGET_PAIRS_COMMON) $(LIBGNAT_TARGET_PAIRS_32)\n+    else\n+      LIBGNAT_TARGET_PAIRS = \\\n+      $(LIBGNAT_TARGET_PAIRS_COMMON) $(LIBGNAT_TARGET_PAIRS_64)\n+    endif\n   endif\n \n   TOOLS_TARGET_PAIRS=mlib-tgt-specific.adb<mlib-tgt-specific-solaris.adb\n@@ -1104,17 +1117,14 @@ endif\n ifeq ($(strip $(filter-out %86 linux%,$(arch) $(osys))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-linux.ads \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n   a-synbar.adb<a-synbar-posix.adb \\\n   a-synbar.ads<a-synbar-posix.ads \\\n-  g-bytswa.adb<g-bytswa-x86.adb \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n   s-intman.adb<s-intman-posix.adb \\\n   s-tpopsp.adb<s-tpopsp-tls.adb \\\n   g-sercom.adb<g-sercom-linux.adb \\\n   $(ATOMICS_TARGET_PAIRS) \\\n-  $(ATOMICS_X86_TARGET_PAIRS)\n+  $(X86_TARGET_PAIRS)\n \n   ifeq ($(strip $(filter-out marte,$(THREAD_KIND))),)\n     LIBGNAT_TARGET_PAIRS += \\\n@@ -1181,8 +1191,6 @@ endif\n ifeq ($(strip $(filter-out %86 kfreebsd%,$(arch) $(osys))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-freebsd.ads \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n   s-intman.adb<s-intman-posix.adb \\\n   s-osinte.adb<s-osinte-posix.adb \\\n@@ -1193,9 +1201,9 @@ ifeq ($(strip $(filter-out %86 kfreebsd%,$(arch) $(osys))),)\n   s-tasinf.adb<s-tasinf-linux.adb \\\n   s-taspri.ads<s-taspri-posix.ads \\\n   s-tpopsp.adb<s-tpopsp-posix-foreign.adb \\\n-  system.ads<system-freebsd-x86.ads \\\n   $(ATOMICS_TARGET_PAIRS) \\\n-  $(ATOMICS_X86_TARGET_PAIRS)\n+  $(X86_TARGET_PAIRS) \\\n+  system.ads<system-freebsd-x86.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n     mlib-tgt-specific.adb<mlib-tgt-specific-linux.adb \\\n@@ -1239,9 +1247,6 @@ endif\n ifeq ($(strip $(filter-out %86 freebsd%,$(arch) $(osys))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-freebsd.ads \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n-  g-bytswa.adb<g-bytswa-x86.adb \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n   s-intman.adb<s-intman-posix.adb \\\n   s-osinte.adb<s-osinte-freebsd.adb \\\n@@ -1250,9 +1255,35 @@ ifeq ($(strip $(filter-out %86 freebsd%,$(arch) $(osys))),)\n   s-taprop.adb<s-taprop-posix.adb \\\n   s-taspri.ads<s-taspri-posix.ads \\\n   s-tpopsp.adb<s-tpopsp-posix.adb \\\n-  system.ads<system-freebsd-x86.ads \\\n   $(ATOMICS_TARGET_PAIRS) \\\n-  $(ATOMICS_X86_TARGET_PAIRS)\n+  $(X86_TARGET_PAIRS) \\\n+  system.ads<system-freebsd-x86.ads\n+\n+  TOOLS_TARGET_PAIRS = \\\n+  mlib-tgt-specific.adb<mlib-tgt-specific-linux.adb\n+  GNATLIB_SHARED = gnatlib-shared-dual\n+\n+  EH_MECHANISM=-gcc\n+  THREADSLIB= -lpthread\n+  GMEM_LIB = gmemlib\n+  LIBRARY_VERSION := $(LIB_VERSION)\n+endif\n+\n+ifeq ($(strip $(filter-out %86_64 freebsd%,$(arch) $(osys))),)\n+  LIBGNAT_TARGET_PAIRS = \\\n+  a-intnam.ads<a-intnam-freebsd.ads \\\n+  s-inmaop.adb<s-inmaop-posix.adb \\\n+  s-intman.adb<s-intman-posix.adb \\\n+  s-osinte.adb<s-osinte-freebsd.adb \\\n+  s-osinte.ads<s-osinte-freebsd.ads \\\n+  s-osprim.adb<s-osprim-posix.adb \\\n+  s-taprop.adb<s-taprop-posix.adb \\\n+  s-taspri.ads<s-taspri-posix.ads \\\n+  s-tpopsp.adb<s-tpopsp-posix.adb \\\n+  g-trasym.adb<g-trasym-dwarf.adb \\\n+  $(ATOMICS_TARGET_PAIRS) \\\n+  $(X86_64_TARGET_PAIRS) \\\n+  system.ads<system-freebsd-x86_64.ads\n \n   TOOLS_TARGET_PAIRS = \\\n   mlib-tgt-specific.adb<mlib-tgt-specific-linux.adb\n@@ -1602,28 +1633,25 @@ ifeq ($(strip $(filter-out cygwin32% mingw32% pe,$(osys))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-dirval.adb<a-dirval-mingw.adb \\\n   a-excpol.adb<a-excpol-abort.adb \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n   s-gloloc.adb<s-gloloc-mingw.adb \\\n   s-inmaop.adb<s-inmaop-dummy.adb \\\n   s-memory.adb<s-memory-mingw.adb \\\n   s-taspri.ads<s-taspri-mingw.ads \\\n   s-tasinf.adb<s-tasinf-mingw.adb \\\n   s-tasinf.ads<s-tasinf-mingw.ads \\\n-  g-bytswa.adb<g-bytswa-x86.adb \\\n   g-socthi.ads<g-socthi-mingw.ads \\\n   g-socthi.adb<g-socthi-mingw.adb \\\n   g-stsifd.adb<g-stsifd-sockets.adb \\\n   g-soliop.ads<g-soliop-mingw.ads \\\n-  $(ATOMICS_TARGET_PAIRS) \\\n-  $(ATOMICS_X86_TARGET_PAIRS)\n+  $(ATOMICS_TARGET_PAIRS)\n \n   ifeq ($(strip $(filter-out rtx_w32 rtx_rtss,$(THREAD_KIND))),)\n     LIBGNAT_TARGET_PAIRS += \\\n     s-intman.adb<s-intman-dummy.adb \\\n     s-osinte.ads<s-osinte-rtx.ads \\\n     s-osprim.adb<s-osprim-rtx.adb \\\n-    s-taprop.adb<s-taprop-rtx.adb\n+    s-taprop.adb<s-taprop-rtx.adb \\\n+    $(X86_TARGET_PAIRS)\n \n     EXTRA_GNATRTL_NONTASKING_OBJS = s-win32.o\n \n@@ -1655,20 +1683,24 @@ ifeq ($(strip $(filter-out cygwin32% mingw32% pe,$(osys))),)\n     ifeq ($(strip $(filter-out x86_64%,$(arch))),)\n       ifeq ($(strip $(MULTISUBDIR)),/32)\n \tLIBGNAT_TARGET_PAIRS += \\\n+\t  $(X86_TARGET_PAIRS) \\\n \t  system.ads<system-mingw.ads\n \tSO_OPTS= -m32 -Wl,-soname,\n       else\n \tLIBGNAT_TARGET_PAIRS += \\\n+\t  $(X86_64_TARGET_PAIRS) \\\n \t  system.ads<system-mingw-x86_64.ads\n \tSO_OPTS = -m64 -Wl,-soname,\n       endif\n     else\n       ifeq ($(strip $(MULTISUBDIR)),/64)\n \tLIBGNAT_TARGET_PAIRS += \\\n+\t  $(X86_64_TARGET_PAIRS) \\\n \t  system.ads<system-mingw-x86_64.ads\n \tSO_OPTS = -m64 -Wl,-soname,\n       else\n \tLIBGNAT_TARGET_PAIRS += \\\n+\t  $(X86_TARGET_PAIRS) \\\n \t  system.ads<system-mingw.ads\n \tSO_OPTS = -m32 -Wl,-soname,\n       endif\n@@ -2107,8 +2139,6 @@ ifeq ($(strip $(filter-out %x86_64 linux%,$(arch) $(osys))),)\n   a-exetim.adb<a-exetim-posix.adb \\\n   a-exetim.ads<a-exetim-default.ads \\\n   a-intnam.ads<a-intnam-linux.ads \\\n-  a-numaux.adb<a-numaux-x86.adb \\\n-  a-numaux.ads<a-numaux-x86.ads \\\n   a-synbar.adb<a-synbar-posix.adb \\\n   a-synbar.ads<a-synbar-posix.ads \\\n   s-inmaop.adb<s-inmaop-posix.adb \\\n@@ -2124,9 +2154,9 @@ ifeq ($(strip $(filter-out %x86_64 linux%,$(arch) $(osys))),)\n   s-tpopsp.adb<s-tpopsp-tls.adb \\\n   s-taspri.ads<s-taspri-posix.ads \\\n   g-sercom.adb<g-sercom-linux.adb \\\n-  system.ads<system-linux-x86_64.ads \\\n   $(ATOMICS_TARGET_PAIRS) \\\n-  $(ATOMICS_BUILTINS_TARGET_PAIRS)\n+  $(X86_64_TARGET_PAIRS) \\\n+  system.ads<system-linux-x86_64.ads\n \n   TOOLS_TARGET_PAIRS =  \\\n     mlib-tgt-specific.adb<mlib-tgt-specific-linux.adb \\\n@@ -2156,14 +2186,16 @@ ifeq ($(strip $(filter-out darwin%,$(osys))),)\n     s-tpopsp.adb<s-tpopsp-posix-foreign.adb \\\n     g-trasym.ads<g-trasym-unimplemented.ads \\\n     g-trasym.adb<g-trasym-unimplemented.adb \\\n-    a-numaux.ads<a-numaux-x86.ads \\\n-    a-numaux.adb<a-numaux-x86.adb\n+    $(ATOMICS_TARGET_PAIRS)\n+\n     ifeq ($(strip $(MULTISUBDIR)),/x86_64)\n       LIBGNAT_TARGET_PAIRS += \\\n-      system.ads<system-darwin-x86_64.ads\n+        $(X86_64_TARGET_PAIRS) \\\n+        system.ads<system-darwin-x86_64.ads\n     else\n       LIBGNAT_TARGET_PAIRS += \\\n-      system.ads<system-darwin-x86.ads\n+        $(X86_TARGET_PAIRS) \\\n+        system.ads<system-darwin-x86.ads\n     endif\n   endif\n \n@@ -2181,10 +2213,9 @@ ifeq ($(strip $(filter-out darwin%,$(osys))),)\n     s-tpopsp.adb<s-tpopsp-posix-foreign.adb \\\n     g-trasym.ads<g-trasym-unimplemented.ads \\\n     g-trasym.adb<g-trasym-unimplemented.adb \\\n-    a-numaux.ads<a-numaux-x86.ads \\\n-    a-numaux.adb<a-numaux-x86.adb \\\n     $(ATOMICS_TARGET_PAIRS) \\\n-    $(ATOMICS_BUILTINS_TARGET_PAIRS)\n+    $(X86_64_TARGET_PAIRS) \\\n+    system.ads<system-darwin-x86_64.ads\n     ifeq ($(strip $(MULTISUBDIR)),/i386)\n       LIBGNAT_TARGET_PAIRS += \\\n       system.ads<system-darwin-x86.ads"}]}