{"sha": "030612a110957f96af1496e1cbf0be58a1cd1359", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDMwNjEyYTExMDk1N2Y5NmFmMTQ5NmUxY2JmMGJlNThhMWNkMTM1OQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2003-09-12T01:08:18Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-09-12T01:08:18Z"}, "message": "URLStreamHandler.java (parseURL): If original file ends with \"/\", so must canonical result.\n\n\t* java/net/URLStreamHandler.java (parseURL): If original file\n\tends with \"/\", so must canonical result.\n\t* java/io/natFilePosix.cc (getCanonicalPath): Clean up snafus\n\twith nul-termination and finding previous \"/\".\n\nFrom-SVN: r71327", "tree": {"sha": "cc393aee173f98e9c7405d011a5edcfacc64ebb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc393aee173f98e9c7405d011a5edcfacc64ebb6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/030612a110957f96af1496e1cbf0be58a1cd1359", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/030612a110957f96af1496e1cbf0be58a1cd1359", "html_url": "https://github.com/Rust-GCC/gccrs/commit/030612a110957f96af1496e1cbf0be58a1cd1359", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/030612a110957f96af1496e1cbf0be58a1cd1359/comments", "author": null, "committer": null, "parents": [{"sha": "e4bee82f89b273c15b0b364aa9cf22bb121673b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4bee82f89b273c15b0b364aa9cf22bb121673b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4bee82f89b273c15b0b364aa9cf22bb121673b4"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "6dbfa3c2fc21c50290dffff51e9cfe70b7928f87", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/030612a110957f96af1496e1cbf0be58a1cd1359/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/030612a110957f96af1496e1cbf0be58a1cd1359/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=030612a110957f96af1496e1cbf0be58a1cd1359", "patch": "@@ -1,3 +1,10 @@\n+2003-09-11  Tom Tromey  <tromey@redhat.com>\n+\n+\t* java/net/URLStreamHandler.java (parseURL): If original file\n+\tends with \"/\", so must canonical result.\n+\t* java/io/natFilePosix.cc (getCanonicalPath): Clean up snafus\n+\twith nul-termination and finding previous \"/\".\n+\n 2003-09-11  Michael Koch  <konqueror@gmx.de>\n \n \t* acconfig.h: Removed most items."}, {"sha": "580b5955ac0546782b8dd6197078bb6472a2b936", "filename": "libjava/java/io/natFilePosix.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/030612a110957f96af1496e1cbf0be58a1cd1359/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/030612a110957f96af1496e1cbf0be58a1cd1359/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFilePosix.cc?ref=030612a110957f96af1496e1cbf0be58a1cd1359", "patch": "@@ -164,7 +164,7 @@ java::io::File::getCanonicalPath (void)\n \t      // Found \"..\" component, lop off last part from existing\n \t      // buffer.\n \t      --out_idx;\n-\t      while (out_idx > 0 && buf[out_idx] != '/')\n+\t      while (out_idx > 0 && buf2[out_idx] != '/')\n \t\t--out_idx;\n \t      // Can't go up past \"/\".\n \t      if (out_idx == 0)\n@@ -179,7 +179,8 @@ java::io::File::getCanonicalPath (void)\n \t      out_idx += len;\n \t    }\n \t}\n-      buf[out_idx] = '\\0';\n+\n+      buf2[out_idx] = '\\0';\n     }\n \n   // FIXME: what encoding to assume for file names?  This affects many"}, {"sha": "61b466cce6d5d4e1ff60827394c1fddcb8e7209c", "filename": "libjava/java/net/URLStreamHandler.java", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/030612a110957f96af1496e1cbf0be58a1cd1359/libjava%2Fjava%2Fnet%2FURLStreamHandler.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/030612a110957f96af1496e1cbf0be58a1cd1359/libjava%2Fjava%2Fnet%2FURLStreamHandler.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fnet%2FURLStreamHandler.java?ref=030612a110957f96af1496e1cbf0be58a1cd1359", "patch": "@@ -196,7 +196,11 @@ else if (start < end)\n             // need to canonicalise the file path.\n             try\n               {\n+\t\tboolean endsWithSlash = file.charAt(file.length() - 1) == '/';\n                 file = new File (file).getCanonicalPath ();\n+\t\tif (endsWithSlash\n+\t\t    && file.charAt(file.length() - 1) != '/')\n+\t\t  file += '/';\n               }\n             catch (IOException e)\n               {"}]}