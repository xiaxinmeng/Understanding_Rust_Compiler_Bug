{"sha": "a6c723e202ebd5ae388ca04b7be5ff6fbe70439f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZjNzIzZTIwMmViZDVhZTM4OGNhMDRiN2JlNWZmNmZiZTcwNDM5Zg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-02-14T21:07:13Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-02-14T21:07:13Z"}, "message": "re PR go/89321 (cross build with riscv64 gccgo compilation failed due to assert in constructor_expression)\n\n\tPR go/89321\n    compiler: copy has_padding field from converted struct\n    \n    Test case is https://golang.org/cl/162617.\n    \n    Fixes https://gcc.gnu.org/PR89321\n    \n    Reviewed-on: https://go-review.googlesource.com/c/162618\n\nFrom-SVN: r268904", "tree": {"sha": "546527b1dfc6648f57ba6cdc3e4b317040f4d3ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/546527b1dfc6648f57ba6cdc3e4b317040f4d3ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f/comments", "author": null, "committer": null, "parents": [{"sha": "cc2593977ba32d6c37a8f8f94c2479fc6a560e85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc2593977ba32d6c37a8f8f94c2479fc6a560e85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc2593977ba32d6c37a8f8f94c2479fc6a560e85"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "ebf8cd5acd7e9f94da37a002a87a742881a47a3a", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=a6c723e202ebd5ae388ca04b7be5ff6fbe70439f", "patch": "@@ -1,4 +1,4 @@\n-a487c86418488f6a17dab4f9945e2a5d495e3ddb\n+c2fc3b83d832725accd4fa5874a5b5ca02dd90dc\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "9081af60bdd1d0ac7194cc8a20bc300e9de71202", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6c723e202ebd5ae388ca04b7be5ff6fbe70439f/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=a6c723e202ebd5ae388ca04b7be5ff6fbe70439f", "patch": "@@ -1003,6 +1003,16 @@ Type::get_backend(Gogo* gogo)\n \t  ins.first->second.is_placeholder = false;\n \t}\n \n+      // We set the has_padding field of a Struct_type when we convert\n+      // to the backend type, so if we have multiple Struct_type's\n+      // mapping to the same backend type we need to copy the\n+      // has_padding field.  FIXME: This is awkward.  We shouldn't\n+      // really change the type when setting the backend type, but\n+      // there isn't any other good time to add the padding field.\n+      if (ins.first->first->struct_type() != NULL\n+\t  && ins.first->first->struct_type()->has_padding())\n+\tthis->struct_type()->set_has_padding();\n+\n       return ins.first->second.btype;\n     }\n "}]}