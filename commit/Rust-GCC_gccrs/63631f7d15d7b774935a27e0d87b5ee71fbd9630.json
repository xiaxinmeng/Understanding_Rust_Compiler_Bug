{"sha": "63631f7d15d7b774935a27e0d87b5ee71fbd9630", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM2MzFmN2QxNWQ3Yjc3NDkzNWEyN2UwZDg3YjVlZTcxZmJkOTYzMA==", "commit": {"author": {"name": "Andre Vehreschild", "email": "vehre@gcc.gnu.org", "date": "2015-07-13T09:01:54Z"}, "committer": {"name": "Andre Vehreschild", "email": "vehre@gcc.gnu.org", "date": "2015-07-13T09:01:54Z"}, "message": "re PR fortran/64589 ([OOP] Linking error due to undefined integer symbol with unlimited polymorphism)\n\ngcc/testsuite/ChangeLog:\n\n2015-07-13  Andre Vehreschild  <vehre@gcc.gnu.org>\n\n\tPR fortran/64589\n\t* gfortran.dg/pr64589.f90: New test.\n\n\ngcc/fortran/ChangeLog:\n\n2015-07-13  Andre Vehreschild  <vehre@gcc.gnu.org>\n\n\tPR fortran/64589\n\t* class.c (find_intrinsic_vtab): Put/Search vtabs for intrinsic\n\ttypes in the top-level namespace.\n\nFrom-SVN: r225730", "tree": {"sha": "526949a813aafc36440a926d599606874b419795", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/526949a813aafc36440a926d599606874b419795"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63631f7d15d7b774935a27e0d87b5ee71fbd9630", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63631f7d15d7b774935a27e0d87b5ee71fbd9630", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63631f7d15d7b774935a27e0d87b5ee71fbd9630", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63631f7d15d7b774935a27e0d87b5ee71fbd9630/comments", "author": null, "committer": null, "parents": [{"sha": "2d87c1d472b4d881024bde41836ed826449e861a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d87c1d472b4d881024bde41836ed826449e861a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d87c1d472b4d881024bde41836ed826449e861a"}], "stats": {"total": 47, "additions": 43, "deletions": 4}, "files": [{"sha": "0a2734b66952daf2b6d448555537a29c5a53a4a2", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=63631f7d15d7b774935a27e0d87b5ee71fbd9630", "patch": "@@ -1,3 +1,9 @@\n+2015-07-13  Andre Vehreschild  <vehre@gcc.gnu.org>\n+\n+\tPR fortran/64589\n+\t* class.c (find_intrinsic_vtab): Put/Search vtabs for intrinsic\n+\ttypes in the top-level namespace.\n+\n 2015-07-12  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* trans-stmt.c: Fix double word typos."}, {"sha": "218973dc048b27522f42a673dbf89bddceb03943", "filename": "gcc/fortran/class.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ffortran%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ffortran%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fclass.c?ref=63631f7d15d7b774935a27e0d87b5ee71fbd9630", "patch": "@@ -2511,10 +2511,8 @@ find_intrinsic_vtab (gfc_typespec *ts)\n \n       sprintf (name, \"__vtab_%s\", tname);\n \n-      /* Look for the vtab symbol in various namespaces.  */\n-      gfc_find_symbol (name, gfc_current_ns, 0, &vtab);\n-      if (vtab == NULL)\n-\tgfc_find_symbol (name, ns, 0, &vtab);\n+      /* Look for the vtab symbol in the top-level namespace only.  */\n+      gfc_find_symbol (name, ns, 0, &vtab);\n \n       if (vtab == NULL)\n \t{"}, {"sha": "46cf748e298c3f3d99dd4d53797e70419fca4dd9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=63631f7d15d7b774935a27e0d87b5ee71fbd9630", "patch": "@@ -1,3 +1,8 @@\n+2015-07-13  Andre Vehreschild  <vehre@gcc.gnu.org>\n+\n+\tPR fortran/64589\n+\t* gfortran.dg/pr64589.f90: New test.\n+\n 2015-07-13  Renlin Li  <renlin.li@arm.com>\n \n \tPR rtl/66556"}, {"sha": "6e65e70aa036200ae6de057915df4838ced6741c", "filename": "gcc/testsuite/gfortran.dg/pr64589.f90", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr64589.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63631f7d15d7b774935a27e0d87b5ee71fbd9630/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr64589.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr64589.f90?ref=63631f7d15d7b774935a27e0d87b5ee71fbd9630", "patch": "@@ -0,0 +1,30 @@\n+! { dg-do compile }\n+! Just need to check if compiling and linking is possible.\n+!\n+! Check that the _vtab linking issue is resolved.\n+! Contributed by Damian Rouson  <damian@sourceryinstitute.org>\n+\n+module m\n+contains\n+  subroutine fmt()\n+    class(*), pointer :: arg\n+    select type (arg)\n+    type is (integer)\n+    end select\n+  end subroutine\n+end module\n+\n+program p\n+  call getSuffix()\n+contains\n+  subroutine makeString(arg1)\n+    class(*) :: arg1\n+    select type (arg1)\n+    type is (integer)\n+    end select\n+  end subroutine\n+  subroutine getSuffix()\n+    call makeString(1)\n+  end subroutine\n+end\n+"}]}