{"sha": "b832f61ed284b78d01e5e3fb9b906bccdc71aba3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjgzMmY2MWVkMjg0Yjc4ZDAxZTVlM2ZiOWI5MDZiY2NkYzcxYWJhMw==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2016-01-12T11:43:59Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2016-01-12T11:43:59Z"}, "message": "re PR testsuite/68913 (gcc.dg/lto/pr61886 FAILs)\n\n\tPR target/68913\n\t* gcc.dg/lto/pr61886_0.c: Rename the external function called\n\tto fread so that it will be found in all target runtimes.\n\nFrom-SVN: r232264", "tree": {"sha": "301c9c4657cc8c7978e5315041d857d9fbdf6bdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/301c9c4657cc8c7978e5315041d857d9fbdf6bdb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b832f61ed284b78d01e5e3fb9b906bccdc71aba3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b832f61ed284b78d01e5e3fb9b906bccdc71aba3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b832f61ed284b78d01e5e3fb9b906bccdc71aba3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b832f61ed284b78d01e5e3fb9b906bccdc71aba3/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8eac49b1b601fd9eba47c14f9ebea5779446be46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8eac49b1b601fd9eba47c14f9ebea5779446be46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8eac49b1b601fd9eba47c14f9ebea5779446be46"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "9dbe7ccab72605a321e192871de56ab05620a821", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b832f61ed284b78d01e5e3fb9b906bccdc71aba3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b832f61ed284b78d01e5e3fb9b906bccdc71aba3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b832f61ed284b78d01e5e3fb9b906bccdc71aba3", "patch": "@@ -1,3 +1,9 @@\n+2016-01-12  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR target/68913\n+\t* gcc.dg/lto/pr61886_0.c: Rename the external function called\n+\tto fread so that it will be found in all target runtimes.\n+\n 2016-01-12  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/69053"}, {"sha": "ce6eb98b9cb12eb768301254d33aa4f0897d24f8", "filename": "gcc/testsuite/gcc.dg/lto/pr61886_0.c", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b832f61ed284b78d01e5e3fb9b906bccdc71aba3/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61886_0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b832f61ed284b78d01e5e3fb9b906bccdc71aba3/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61886_0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61886_0.c?ref=b832f61ed284b78d01e5e3fb9b906bccdc71aba3", "patch": "@@ -4,22 +4,25 @@\n typedef __SIZE_TYPE__ size_t;\n typedef struct _IO_FILE FILE;\n \n-extern size_t __fread_chk (void *__restrict __ptr, size_t __ptrlen, size_t __size, size_t __n, FILE *__restrict __stream) __asm__ (\"\" \"__fread_chk\")      __attribute__ ((__warn_unused_result__));\n-extern size_t __fread_chk_warn (void *__restrict __ptr, size_t __ptrlen, size_t __size, size_t __n, FILE *__restrict __stream) __asm__ (\"\" \"__fread_chk\")      __attribute__ ((__warn_unused_result__)) __attribute__((__warning__ (\"fread called with bigger size * nmemb than length \" \"of destination buffer\")));\n+#define STRING1(a) #a\n+#define STRING2(a) STRING1(a)\n+\n+extern size_t fread (void *__restrict __ptr, size_t __ptrlen, size_t __size, size_t __n, FILE *__restrict __stream) __asm__ (STRING2(__USER_LABEL_PREFIX__) \"fread\")      __attribute__ ((__warn_unused_result__));\n+extern size_t fread_warn (void *__restrict __ptr, size_t __ptrlen, size_t __size, size_t __n, FILE *__restrict __stream) __asm__ (STRING2(__USER_LABEL_PREFIX__) \"fread\")      __attribute__ ((__warn_unused_result__)) __attribute__((__warning__ (\"fread called with bigger size * nmemb than length \" \"of destination buffer\")));\n \n extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__gnu_inline__)) __attribute__ ((__artificial__)) __attribute__ ((__warn_unused_result__))\n size_t\n-fread (void *__restrict __ptr, size_t __size, size_t __n,\n+local_fread (void *__restrict __ptr, size_t __size, size_t __n,\n        FILE *__restrict __stream)\n {\n   if (__builtin_object_size (__ptr, 0) != (size_t) -1)\n     {\n       if (!__builtin_constant_p (__size)\n           || !__builtin_constant_p (__n)\n           || (__size | __n) >= (((size_t) 1) << (8 * sizeof (size_t) / 2)))\n-        return __fread_chk (__ptr, __builtin_object_size (__ptr, 0), __size, __n, __stream);\n+        return fread (__ptr, __builtin_object_size (__ptr, 0), __size, __n, __stream);\n       if (__size * __n > __builtin_object_size (__ptr, 0))\n-        return __fread_chk_warn (__ptr, __builtin_object_size (__ptr, 0), __size, __n, __stream);\n+        return fread_warn (__ptr, __builtin_object_size (__ptr, 0), __size, __n, __stream);\n     }\n }\n \n@@ -28,6 +31,6 @@ FILE *fp;\n int main ()\n {\n   char file_contents[4096];\n-  /* We shouldn't get this resolved to a call to __fread_chk_warn.  */\n-  return fread (file_contents, 1, nmemb, fp);\n+  /* We shouldn't get this resolved to a call to fread_warn.  */\n+  return local_fread (file_contents, 1, nmemb, fp);\n }"}]}