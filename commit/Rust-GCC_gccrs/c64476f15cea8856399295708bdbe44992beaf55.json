{"sha": "c64476f15cea8856399295708bdbe44992beaf55", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzY0NDc2ZjE1Y2VhODg1NjM5OTI5NTcwOGJkYmU0NDk5MmJlYWY1NQ==", "commit": {"author": {"name": "Andrey Belevantsev", "email": "abel@ispras.ru", "date": "2013-12-23T06:43:49Z"}, "committer": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2013-12-23T06:43:49Z"}, "message": "re PR rtl-optimization/57422 (ICE: SIGSEGV in dominated_by_p with custom flags)\n\n        PR rtl-optimization/57422\n        * sel-sched.c (fill_vec_av_set): Assert that the fence insn\n        can always be scheduled in its current form.\n\nFrom-SVN: r206174", "tree": {"sha": "a768f37f242ec769d165c6d0873297c50455006b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a768f37f242ec769d165c6d0873297c50455006b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c64476f15cea8856399295708bdbe44992beaf55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c64476f15cea8856399295708bdbe44992beaf55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c64476f15cea8856399295708bdbe44992beaf55", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c64476f15cea8856399295708bdbe44992beaf55/comments", "author": {"login": "abonzo", "id": 20396542, "node_id": "MDQ6VXNlcjIwMzk2NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/20396542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abonzo", "html_url": "https://github.com/abonzo", "followers_url": "https://api.github.com/users/abonzo/followers", "following_url": "https://api.github.com/users/abonzo/following{/other_user}", "gists_url": "https://api.github.com/users/abonzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/abonzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abonzo/subscriptions", "organizations_url": "https://api.github.com/users/abonzo/orgs", "repos_url": "https://api.github.com/users/abonzo/repos", "events_url": "https://api.github.com/users/abonzo/events{/privacy}", "received_events_url": "https://api.github.com/users/abonzo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d0381b3719ab73ef31cc3903d4aff7f81828585e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0381b3719ab73ef31cc3903d4aff7f81828585e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0381b3719ab73ef31cc3903d4aff7f81828585e"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "1e502d19f973d1cd3e02437ec8e5fd866283c18e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c64476f15cea8856399295708bdbe44992beaf55/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c64476f15cea8856399295708bdbe44992beaf55/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c64476f15cea8856399295708bdbe44992beaf55", "patch": "@@ -1,3 +1,9 @@\n+2013-12-23  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/57422\n+\t* sel-sched.c (fill_vec_av_set): Assert that the fence insn\n+\tcan always be scheduled in its current form.\n+\n 2013-12-23  Andrey Belevantsev  <abel@ispras.ru>\n \n \tPR rtl-optimization/57422"}, {"sha": "29a5f1fa1f88e16b2bd54fd377fd4024aec30691", "filename": "gcc/sel-sched.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c64476f15cea8856399295708bdbe44992beaf55/gcc%2Fsel-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c64476f15cea8856399295708bdbe44992beaf55/gcc%2Fsel-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsel-sched.c?ref=c64476f15cea8856399295708bdbe44992beaf55", "patch": "@@ -3801,6 +3801,7 @@ fill_vec_av_set (av_set_t av, blist_t bnds, fence_t fence,\n       signed char target_available;\n       bool is_orig_reg_p = true;\n       int need_cycles, new_prio;\n+      bool fence_insn_p = INSN_UID (insn) == INSN_UID (FENCE_INSN (fence));\n \n       /* Don't allow any insns other than from SCHED_GROUP if we have one.  */\n       if (FENCE_SCHED_NEXT (fence) && insn != FENCE_SCHED_NEXT (fence))\n@@ -3855,9 +3856,16 @@ fill_vec_av_set (av_set_t av, blist_t bnds, fence_t fence,\n           if (sched_verbose >= 4)\n             sel_print (\"Expr %d has no suitable target register\\n\",\n                        INSN_UID (insn));\n-          continue;\n+\n+\t  /* A fence insn should not get here.  */\n+\t  gcc_assert (!fence_insn_p);\n+\t  continue;\n         }\n \n+      /* At this point a fence insn should always be available.  */\n+      gcc_assert (!fence_insn_p\n+\t\t  || INSN_UID (FENCE_INSN (fence)) == INSN_UID (EXPR_INSN_RTX (expr)));\n+\n       /* Filter expressions that need to be renamed or speculated when\n \t pipelining, because compensating register copies or speculation\n \t checks are likely to be placed near the beginning of the loop,"}]}