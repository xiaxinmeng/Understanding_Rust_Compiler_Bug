{"sha": "93982b798a0be88625f6d46a27714e9afbbb7f42", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTM5ODJiNzk4YTBiZTg4NjI1ZjZkNDZhMjc3MTRlOWFmYmJiN2Y0Mg==", "commit": {"author": {"name": "Chris Demetriou", "email": "cgd@broadcom.com", "date": "2001-01-24T03:04:04Z"}, "committer": {"name": "Chris Demetriou", "email": "cgd@gcc.gnu.org", "date": "2001-01-24T03:04:04Z"}, "message": "exception.cc (__terminate_func): Remove declaration.\n\n2001-01-23  Chris Demetriou  <cgd@broadcom.com>\n\n        * exception.cc (__terminate_func): Remove declaration.\n        (__terminate_func_ptr): New typedef.\n        (__terminate, __terminate_set_func): New extern function\n        prototypes.\n        (std::terminate): Use __terminate function.\n        (std::set_terminate): Use __terminate_set_func function.\n\nFrom-SVN: r39225", "tree": {"sha": "67e06b15334f9373215f31b281ad21e75e71f9d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67e06b15334f9373215f31b281ad21e75e71f9d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/93982b798a0be88625f6d46a27714e9afbbb7f42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93982b798a0be88625f6d46a27714e9afbbb7f42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93982b798a0be88625f6d46a27714e9afbbb7f42", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93982b798a0be88625f6d46a27714e9afbbb7f42/comments", "author": null, "committer": null, "parents": [{"sha": "8a1894ac7ba96fb629e676300ca2a870ddfc6dba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a1894ac7ba96fb629e676300ca2a870ddfc6dba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a1894ac7ba96fb629e676300ca2a870ddfc6dba"}], "stats": {"total": 22, "additions": 16, "deletions": 6}, "files": [{"sha": "9fc67ea02ca664164c9924a475fbcdd78d295e43", "filename": "libstdc++/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93982b798a0be88625f6d46a27714e9afbbb7f42/libstdc%2B%2B%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93982b798a0be88625f6d46a27714e9afbbb7f42/libstdc%2B%2B%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FChangeLog?ref=93982b798a0be88625f6d46a27714e9afbbb7f42", "patch": "@@ -1,3 +1,12 @@\n+2001-01-23  Chris Demetriou  <cgd@broadcom.com>\n+\n+\t* exception.cc (__terminate_func): Remove declaration.\n+\t(__terminate_func_ptr): New typedef.\n+\t(__terminate, __terminate_set_func): New extern function\n+\tprototypes.\n+\t(std::terminate): Use __terminate function.\n+\t(std::set_terminate): Use __terminate_set_func function.\n+\n 2000-11-24  Magnus Fromreide <magfr@lysator.liu.se>\n \n \t* sstream: Backport libstdc++-V3 sstream to V2."}, {"sha": "c27b8ff9603388f0bc103ccc7f94ab3f147e10ee", "filename": "libstdc++/exception.cc", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/93982b798a0be88625f6d46a27714e9afbbb7f42/libstdc%2B%2B%2Fexception.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/93982b798a0be88625f6d46a27714e9afbbb7f42/libstdc%2B%2B%2Fexception.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2Fexception.cc?ref=93982b798a0be88625f6d46a27714e9afbbb7f42", "patch": "@@ -38,13 +38,17 @@\n /* Define terminate, unexpected, set_terminate, set_unexpected as\n    well as the default terminate func and default unexpected func.  */\n \n-extern std::terminate_handler __terminate_func __attribute__((__noreturn__));\n+/* __terminate and __terminate_set_func, defined in libgcc2. */\n+typedef void (*__terminate_func_ptr)(void) __attribute__ ((__noreturn__));\n+extern \"C\" void __terminate (void) __attribute__ ((__noreturn__));\n+extern \"C\" __terminate_func_ptr __terminate_set_func (__terminate_func_ptr);\n+\n using std::terminate;\n \n void\n std::terminate ()\n {\n-  __terminate_func ();\n+  __terminate ();\n }\n \n void\n@@ -59,10 +63,7 @@ static std::unexpected_handler __unexpected_func __attribute__((__noreturn__))\n std::terminate_handler\n std::set_terminate (std::terminate_handler func)\n {\n-  std::terminate_handler old = __terminate_func;\n-\n-  __terminate_func = func;\n-  return old;\n+  return __terminate_set_func (func);\n }\n \n std::unexpected_handler"}]}