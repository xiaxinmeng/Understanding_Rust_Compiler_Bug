{"sha": "c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNiMjY2ZDY5MDgzNWNhY2RjNDJmMjI3OGM1YjRlYWJmOWZhOTlkMQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-02-06T14:11:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-02-06T14:11:59Z"}, "message": "2014-02-06  Sergey Rybin  <rybin@adacore.com frybin>\n\n\t* gnat_ugn.texi, vms_data.ads: Add documentation of '-t' option for\n\tgnatmetric/gnatpp.\n\n2014-02-06  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* sem_prag.adb (Analyze_Abstract_State): Update\n\tall calls to Create_Abstract_State to pass the proper state\n\t\"declaration\".\n\t(Create_Abstract_State): Add new formal parameter\n\tState_Decl along with comment on usage. Establish a link between\n\tthe abstract state entity and the state declaration.\n\nFrom-SVN: r207557", "tree": {"sha": "cfa2f40026bbbfed2d9e92c7ca60805ea788e6d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cfa2f40026bbbfed2d9e92c7ca60805ea788e6d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/comments", "author": null, "committer": null, "parents": [{"sha": "428684fd1c052848969dba78f1e09a91fdd7f466", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/428684fd1c052848969dba78f1e09a91fdd7f466", "html_url": "https://github.com/Rust-GCC/gccrs/commit/428684fd1c052848969dba78f1e09a91fdd7f466"}], "stats": {"total": 100, "additions": 88, "deletions": 12}, "files": [{"sha": "de52b1779e896c91acdd767f8b7d6a3b2fedff6e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "patch": "@@ -1,3 +1,17 @@\n+2014-02-06  Sergey Rybin  <rybin@adacore.com frybin>\n+\n+\t* gnat_ugn.texi, vms_data.ads: Add documentation of '-t' option for\n+\tgnatmetric/gnatpp.\n+\n+2014-02-06  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* sem_prag.adb (Analyze_Abstract_State): Update\n+\tall calls to Create_Abstract_State to pass the proper state\n+\t\"declaration\".\n+\t(Create_Abstract_State): Add new formal parameter\n+\tState_Decl along with comment on usage. Establish a link between\n+\tthe abstract state entity and the state declaration.\n+\n 2014-02-06  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_attr.adb (Analyze_Attribute, case Max): Check for improper"}, {"sha": "1fea517152bb37b96c8a1f3c197d996976614dfb", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "patch": "@@ -14638,6 +14638,17 @@ line breaks. You can use this switch more than once in the same call to\n @command{gnatpp}. You also can combine this switch with an explicit list of\n files.\n \n+@item ^-j^/PROCESSES=^@var{n}\n+@cindex @option{^-j^/PROCESSES^} (@command{gnatpp})\n+Use @var{n} processes to carry out the tree creations (internal representations\n+of the argument sources). On a multiprocessor machine this speeds up processing\n+of big sets of argument sources. If @var{n} is 0, then the maximum number of\n+parallel tree creations is the number of core processors on the platform.\n+\n+@cindex @option{^-t^/TIME^} (@command{gnatpp})\n+@item ^-t^/TIME^\n+Print out execution time.\n+\n @item ^-v^/VERBOSE^\n @cindex @option{^-v^/VERBOSE^} (@code{gnatpp})\n Verbose mode;\n@@ -16630,6 +16641,10 @@ of the argument sources). On a multiprocessor machine this speeds up processing\n of big sets of argument sources. If @var{n} is 0, then the maximum number of\n parallel tree creations is the number of core processors on the platform.\n \n+@cindex @option{^-t^/TIME^} (@command{gnatmetric})\n+@item ^-t^/TIME^\n+Print out execution time.\n+\n @item ^-v^/VERBOSE^\n @cindex @option{^-v^/VERBOSE^} (@command{gnatmetric})\n Verbose mode;"}, {"sha": "8d453d9ed04f72633471e84322ea648635045f4c", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 30, "deletions": 12, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "patch": "@@ -9991,11 +9991,14 @@ package body Sem_Prag is\n                --  Opt is not a duplicate property and sets the flag Status.\n \n                procedure Create_Abstract_State\n-                 (State_Nam : Name_Id;\n-                  Is_Null   : Boolean := False);\n+                 (State_Nam  : Name_Id;\n+                  State_Decl : Node_Id;\n+                  Is_Null    : Boolean := False);\n                --  Generate an abstract state entity with name State_Nam and\n-               --  enter it into visibility. Flag Is_Null should be set when\n-               --  the associated Abstract_State pragma defines a null state.\n+               --  enter it into visibility. State_Decl is the \"declaration\"\n+               --  of the state as it appears in pragma Abstract_State. Flag\n+               --  Is_Null should be set when the associated Abstract_State\n+               --  pragma defines a null state.\n \n                -----------------------------\n                -- Analyze_External_Option --\n@@ -10245,8 +10248,9 @@ package body Sem_Prag is\n                ---------------------------\n \n                procedure Create_Abstract_State\n-                 (State_Nam : Name_Id;\n-                  Is_Null   : Boolean := False)\n+                 (State_Nam  : Name_Id;\n+                  State_Decl : Node_Id;\n+                  Is_Null    : Boolean := False)\n                is\n                begin\n                   --  The generated state abstraction reuses the same chars\n@@ -10266,10 +10270,19 @@ package body Sem_Prag is\n                   Set_Refinement_Constituents (State_Id, New_Elmt_List);\n                   Set_Part_Of_Constituents    (State_Id, New_Elmt_List);\n \n-                  --  Every non-null state must be nameable and resolvable the\n-                  --  same way a constant is.\n+                  --  Establish a link between the state declaration and the\n+                  --  abstract state entity. Note that a null state remains as\n+                  --  N_Null and does not carry any linkages.\n \n                   if not Is_Null then\n+                     if Present (State_Decl) then\n+                        Set_Entity (State_Decl, State_Id);\n+                        Set_Etype  (State_Decl, Standard_Void_Type);\n+                     end if;\n+\n+                     --  Every non-null state must be nameable and resolvable\n+                     --  the same way a constant is.\n+\n                      Push_Scope (Pack_Id);\n                      Enter_Name (State_Id);\n                      Pop_Scope;\n@@ -10295,8 +10308,9 @@ package body Sem_Prag is\n \n                elsif Nkind (State) = N_Null then\n                   Create_Abstract_State\n-                    (State_Nam => New_Internal_Name ('S'),\n-                     Is_Null   => True);\n+                    (State_Nam  => New_Internal_Name ('S'),\n+                     State_Decl => Empty,\n+                     Is_Null    => True);\n                   Null_Seen := True;\n \n                   --  Catch a case where a null state appears in a list of\n@@ -10311,15 +10325,19 @@ package body Sem_Prag is\n                --  Simple state declaration\n \n                elsif Nkind (State) = N_Identifier then\n-                  Create_Abstract_State (Chars (State));\n+                  Create_Abstract_State\n+                    (State_Nam  => Chars (State),\n+                     State_Decl => State);\n                   Non_Null_Seen := True;\n \n                --  State declaration with various options. This construct\n                --  appears as an extension aggregate in the tree.\n \n                elsif Nkind (State) = N_Extension_Aggregate then\n                   if Nkind (Ancestor_Part (State)) = N_Identifier then\n-                     Create_Abstract_State (Chars (Ancestor_Part (State)));\n+                     Create_Abstract_State\n+                       (State_Nam  => Chars (Ancestor_Part (State)),\n+                        State_Decl => Ancestor_Part (State));\n                      Non_Null_Seen := True;\n                   else\n                      Error_Msg_N"}, {"sha": "166948d37df60a0c7436274ce452642af1e69740", "filename": "gcc/ada/vms_data.ads", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2Fvms_data.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3b266d690835cacdc42f2278c5b4eabf9fa99d1/gcc%2Fada%2Fvms_data.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_data.ads?ref=c3b266d690835cacdc42f2278c5b4eabf9fa99d1", "patch": "@@ -5850,6 +5850,13 @@ package VMS_Data is\n                                                 \"-nolocal \";\n    --  NODOC  (see /COMPLEXITY_METRICS /NO_LOCAL_DETAILS /NO_EXITS_AS_GOTOS)\n \n+   S_Metric_Time    : aliased constant S := \"/TIME \"                        &\n+                                            \"-t\";\n+   --        /NOTIME (D)\n+   --        /TIME\n+   --\n+   --   Print out execution time\n+\n    S_Metric_Verbose  : aliased constant S := \"/VERBOSE \"                   &\n                                              \"-v\";\n    --        /NOVERBOSE (D)\n@@ -5889,6 +5896,7 @@ package VMS_Data is\n                         S_Metric_Subdirs          'Access,\n                         S_Metric_Syntax           'Access,\n                         S_Metric_Suppress         'Access,\n+                        S_Metric_Time             'Access,\n                         S_Metric_Verbose          'Access,\n                         S_Metric_XMLout           'Access);\n \n@@ -6655,6 +6663,18 @@ package VMS_Data is\n    --      LOWER_CASE\n    --      UPPER_CASE\n \n+   S_Pretty_Processes : aliased constant S := \"/PROCESSES=#\"                 &\n+                                            \"-j#\";\n+\n+   --        /NOPROCESSES (D)\n+   --        /PROCESSES=NNN\n+   --\n+   --   Use NNN processes to carry out the tree creations (internal\n+   --   representations of the argument sources). On a multiprocessor machine\n+   --   this speeds up processing of big sets of argument sources. If NNN is 0,\n+   --   then the maximum number of parallel tree creations is the number of\n+   --   core processors on the platform.\n+\n    S_Pretty_Project   : aliased constant S := \"/PROJECT_FILE=<\"            &\n                                                 \"-P>\";\n    --        /PROJECT_FILE=filename\n@@ -6707,6 +6727,13 @@ package VMS_Data is\n    --   of the directory specified in the project file. If the subdirectory\n    --   does not exist, it is created automatically.\n \n+   S_Pretty_Time    : aliased constant S := \"/TIME \"                        &\n+                                            \"-t\";\n+   --        /NOTIME (D)\n+   --        /TIME\n+   --\n+   --   Print out execution time\n+\n    S_Pretty_Types     : aliased constant S := \"/TYPE_CASING=\"              &\n                                               \"AS_DECLARED \"               &\n                                                  \"-ntD \"                   &\n@@ -6784,6 +6811,7 @@ package VMS_Data is\n                         S_Pretty_Pragma           'Access,\n                         S_Pretty_Replace          'Access,\n                         S_Pretty_Replace_No_Backup'Access,\n+                        S_Pretty_Processes        'Access,\n                         S_Pretty_Project          'Access,\n                         S_Pretty_RTS              'Access,\n                         S_Pretty_Search           'Access,\n@@ -6795,6 +6823,7 @@ package VMS_Data is\n                         S_Pretty_Stnm_On_Nw_Line  'Access,\n                         S_Pretty_Specific         'Access,\n                         S_Pretty_Standard         'Access,\n+                        S_Pretty_Time             'Access,\n                         S_Pretty_Types            'Access,\n                         S_Pretty_Verbose          'Access,\n                         S_Pretty_Warnings         'Access);"}]}