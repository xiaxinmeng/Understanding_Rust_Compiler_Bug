{"sha": "49e6a6c023d1b91c90d3fbdf16adf20dff246156", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDllNmE2YzAyM2QxYjkxYzkwZDNmYmRmMTZhZGYyMGRmZjI0NjE1Ng==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2017-12-12T10:38:09Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2017-12-12T10:38:09Z"}, "message": "re PR c/82679 (Uses of typedefs of arrays of _Atomic-qualified types are rejected)\n\n\tPR c/82679\n\t* c-decl.c (grokdeclarator): Check declspecs insted of atomicp.\n\n\t* gcc.dg/c11-atomic-5.c: New test.\n\nFrom-SVN: r255577", "tree": {"sha": "36ecf67aba857eb090279ba388496485a9f879b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36ecf67aba857eb090279ba388496485a9f879b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49e6a6c023d1b91c90d3fbdf16adf20dff246156", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49e6a6c023d1b91c90d3fbdf16adf20dff246156", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49e6a6c023d1b91c90d3fbdf16adf20dff246156", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49e6a6c023d1b91c90d3fbdf16adf20dff246156/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6c939c2e9c6c3437fd5664a163890d3006dba45c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c939c2e9c6c3437fd5664a163890d3006dba45c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c939c2e9c6c3437fd5664a163890d3006dba45c"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "6516e5d598251db2bfb4dfefc6504bd192c9129e", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=49e6a6c023d1b91c90d3fbdf16adf20dff246156", "patch": "@@ -1,3 +1,8 @@\n+2017-12-12  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c/82679\n+\t* c-decl.c (grokdeclarator): Check declspecs insted of atomicp.\n+\n 2017-12-12  Alexandre Oliva <aoliva@redhat.com>\n \n \t* c-objc-common.h (LANG_HOOKS_EMITS_BEGIN_STMT): Redefine as true."}, {"sha": "7ade2d6436e8d58180f4f5ccb887f7046be20a0d", "filename": "gcc/c/c-decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Fc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Fc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-decl.c?ref=49e6a6c023d1b91c90d3fbdf16adf20dff246156", "patch": "@@ -5813,7 +5813,7 @@ grokdeclarator (const struct c_declarator *declarator,\n      of typedefs or typeof) must be detected here.  If the qualifier\n      is introduced later, any appearance of applying it to an array is\n      actually applying it to an element of that array.  */\n-  if (atomicp && TREE_CODE (type) == ARRAY_TYPE)\n+  if (declspecs->atomic_p && TREE_CODE (type) == ARRAY_TYPE)\n     error_at (loc, \"%<_Atomic%>-qualified array type\");\n \n   /* Warn about storage classes that are invalid for certain"}, {"sha": "6f0ea7c5727b86f73760275ff82731923557d554", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=49e6a6c023d1b91c90d3fbdf16adf20dff246156", "patch": "@@ -1,3 +1,8 @@\n+2017-12-12  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c/82679\n+\t* gcc.dg/c11-atomic-5.c: New test.\n+\n 2017-12-12  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/83363"}, {"sha": "090ffdfa69b83f700f49e6c470cac734ce1ef865", "filename": "gcc/testsuite/gcc.dg/c11-atomic-5.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-atomic-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49e6a6c023d1b91c90d3fbdf16adf20dff246156/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-atomic-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-atomic-5.c?ref=49e6a6c023d1b91c90d3fbdf16adf20dff246156", "patch": "@@ -0,0 +1,10 @@\n+/* PR c/82679 */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=gnu11\" } */\n+\n+typedef _Atomic int A[10];\n+A a;\n+\n+typedef _Atomic int I;\n+typedef I T[10];\n+T t;"}]}