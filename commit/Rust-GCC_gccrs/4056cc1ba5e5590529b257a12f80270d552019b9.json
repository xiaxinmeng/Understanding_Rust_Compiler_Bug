{"sha": "4056cc1ba5e5590529b257a12f80270d552019b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDA1NmNjMWJhNWU1NTkwNTI5YjI1N2ExMmY4MDI3MGQ1NTIwMTliOQ==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-09-29T11:57:35Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-09-29T11:57:35Z"}, "message": "re PR fortran/50547 (dummy procedure argument of PURE shall be PURE)\n\n2011-09-29  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/50547\n\t* resolve.c (resolve_formal_arglist): Fix pureness check for dummy\n\tfunctions.\n\n\tPR fortran/50553\n\t* symbol.c (check_conflict): Forbid TARGET attribute for statement\n\tfunctions.\n\n\n2011-09-29  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/50547\n\t* gfortran.dg/pure_formal_proc_3.f90: New.\n\n\tPR fortran/50553\n\t* gfortran.dg/stfunc_7.f90: New.\n\nFrom-SVN: r179345", "tree": {"sha": "6eb80c27b0e8d8f204611e0d47e28d64aefa066d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6eb80c27b0e8d8f204611e0d47e28d64aefa066d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4056cc1ba5e5590529b257a12f80270d552019b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4056cc1ba5e5590529b257a12f80270d552019b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4056cc1ba5e5590529b257a12f80270d552019b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4056cc1ba5e5590529b257a12f80270d552019b9/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c7dfafee68e3c18aa6c0f7c42e3f86bce196d7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c7dfafee68e3c18aa6c0f7c42e3f86bce196d7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c7dfafee68e3c18aa6c0f7c42e3f86bce196d7e"}], "stats": {"total": 60, "additions": 52, "deletions": 8}, "files": [{"sha": "ecd9fa3a740a256726e834f4aa7b74babd33bc80", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=4056cc1ba5e5590529b257a12f80270d552019b9", "patch": "@@ -1,3 +1,13 @@\n+2011-09-29  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/50547\n+\t* resolve.c (resolve_formal_arglist): Fix pureness check for dummy\n+\tfunctions.\n+\n+\tPR fortran/50553\n+\t* symbol.c (check_conflict): Forbid TARGET attribute for statement\n+\tfunctions.\n+\n 2011-09-27  Jakub Jelinek  <jakub@redhat.com>\n \n \t* trans-types.c (gfc_type_for_size): Return wider type"}, {"sha": "84db3ddb019f0aa46d970f26b095dc21de788176", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=4056cc1ba5e5590529b257a12f80270d552019b9", "patch": "@@ -269,18 +269,21 @@ resolve_formal_arglist (gfc_symbol *proc)\n       if (sym->attr.if_source != IFSRC_UNKNOWN)\n \tresolve_formal_arglist (sym);\n \n+      /* F08:C1279.  */\n+      if (gfc_pure (proc)\n+\t  && sym->attr.flavor == FL_PROCEDURE && !gfc_pure (sym))\n+\t{\n+\t  gfc_error (\"Dummy procedure '%s' of PURE procedure at %L must \"\n+\t\t     \"also be PURE\", sym->name, &sym->declared_at);\n+\t  continue;\n+\t}\n+      \n       if (sym->attr.subroutine || sym->attr.external || sym->attr.intrinsic)\n \t{\n-\t  if (gfc_pure (proc) && !gfc_pure (sym))\n-\t    {\n-\t      gfc_error (\"Dummy procedure '%s' of PURE procedure at %L must \"\n-\t\t\t \"also be PURE\", sym->name, &sym->declared_at);\n-\t      continue;\n-\t    }\n-\n \t  if (proc->attr.implicit_pure && !gfc_pure(sym))\n \t    proc->attr.implicit_pure = 0;\n \n+\t  /* F08:C1289.  */\n \t  if (gfc_elemental (proc))\n \t    {\n \t      gfc_error (\"Dummy procedure at %L not allowed in ELEMENTAL \"\n@@ -382,7 +385,7 @@ resolve_formal_arglist (gfc_symbol *proc)\n \n       if (gfc_elemental (proc))\n \t{\n-\t  /* F2008, C1289.  */\n+\t  /* F08:C1289.  */\n \t  if (sym->attr.codimension)\n \t    {\n \t      gfc_error (\"Coarray dummy argument '%s' at %L to elemental \""}, {"sha": "46eccb46abab59ebfda9800173d11f9952d2e2a2", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=4056cc1ba5e5590529b257a12f80270d552019b9", "patch": "@@ -684,6 +684,7 @@ check_conflict (symbol_attribute *attr, const char *name, locus *where)\n \t{\n \tcase PROC_ST_FUNCTION:\n \t  conf2 (dummy);\n+\t  conf2 (target);\n \t  break;\n \n \tcase PROC_MODULE:"}, {"sha": "fb41e555112a59470cc1b3289cccc9bbb428bea3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4056cc1ba5e5590529b257a12f80270d552019b9", "patch": "@@ -1,3 +1,11 @@\n+2011-09-29  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/50547\n+\t* gfortran.dg/pure_formal_proc_3.f90: New.\n+\n+\tPR fortran/50553\n+\t* gfortran.dg/stfunc_7.f90: New.\n+\n 2011-09-29  Artjoms Sinkarovs <artyom.shinkaroff@gmail.com>\n \n \t* gcc.c-torture/execute/vector-compare-1.c: New testcase."}, {"sha": "38d4552801ad9c4a99d98c2b9d65f670ab527fe6", "filename": "gcc/testsuite/gfortran.dg/pure_formal_proc_3.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_proc_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_proc_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_proc_3.f90?ref=4056cc1ba5e5590529b257a12f80270d552019b9", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do compile }\n+!\n+! PR 50547: dummy procedure argument of PURE shall be PURE\n+!\n+! Contributed by Vittorio Zecca <zeccav@gmail.com>\n+\n+pure function f(proc)\n+  interface\n+    function proc()  ! { dg-error \"must also be PURE\" }\n+    end\n+  end interface\n+end"}, {"sha": "1e116462525aad9995b588953c0139535c03e834", "filename": "gcc/testsuite/gfortran.dg/stfunc_7.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fstfunc_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4056cc1ba5e5590529b257a12f80270d552019b9/gcc%2Ftestsuite%2Fgfortran.dg%2Fstfunc_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fstfunc_7.f90?ref=4056cc1ba5e5590529b257a12f80270d552019b9", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+! { dg-options \"-std=legacy\" }\n+!\n+! PR 50553: statement function cannot be target (r178939)\n+!\n+! Contributed by Vittorio Zecca <zeccav@gmail.com>\n+\n+f(x)=x\n+target f  ! { dg-error \"attribute conflicts with\" }\n+end"}]}