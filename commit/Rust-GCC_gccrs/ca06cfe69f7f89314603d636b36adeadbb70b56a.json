{"sha": "ca06cfe69f7f89314603d636b36adeadbb70b56a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2EwNmNmZTY5ZjdmODkzMTQ2MDNkNjM2YjM2YWRlYWRiYjcwYjU2YQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-04-11T22:44:23Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-04-11T22:44:23Z"}, "message": "re PR c++/10202 ([IA64] ICE in int_mode_for_mode, at stor-layout.c)\n\n        PR c++/10202\n        * expr.c (expand_expr): Use COMPLETE_OR_UNBOUND_ARRAY_TYPE_P\n        not COMPLETE_TYPE_P for re-invoking layout_decl.\n\t* g++.dg/expr/incomplete1.C: New.\n\nFrom-SVN: r65484", "tree": {"sha": "a01ada3c6afd82cc7fff3981f62928ada47eadea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a01ada3c6afd82cc7fff3981f62928ada47eadea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca06cfe69f7f89314603d636b36adeadbb70b56a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca06cfe69f7f89314603d636b36adeadbb70b56a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca06cfe69f7f89314603d636b36adeadbb70b56a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca06cfe69f7f89314603d636b36adeadbb70b56a/comments", "author": null, "committer": null, "parents": [{"sha": "d2d42a917c2a65769e78d4d430e47962b2d24ba5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2d42a917c2a65769e78d4d430e47962b2d24ba5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2d42a917c2a65769e78d4d430e47962b2d24ba5"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "f24de1b789f6193bafb32c942691d9698fb07f12", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca06cfe69f7f89314603d636b36adeadbb70b56a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca06cfe69f7f89314603d636b36adeadbb70b56a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca06cfe69f7f89314603d636b36adeadbb70b56a", "patch": "@@ -1,3 +1,9 @@\n+2003-04-11  Richard Henderson  <rth@redhat.com>\n+\n+\tPR c++/10202\n+\t* expr.c (expand_expr): Use COMPLETE_OR_UNBOUND_ARRAY_TYPE_P\n+\tnot COMPLETE_TYPE_P for re-invoking layout_decl.\n+\n 2003-04-11  Simon Law  <sfllaw@engmail.uwaterloo.ca>\n \n \t* doc/bugreport.texi: Fix paragraph breaking between sections"}, {"sha": "ad8993d3a0ec41582f55d7d02c72aca1933e3341", "filename": "gcc/expr.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca06cfe69f7f89314603d636b36adeadbb70b56a/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca06cfe69f7f89314603d636b36adeadbb70b56a/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=ca06cfe69f7f89314603d636b36adeadbb70b56a", "patch": "@@ -6712,7 +6712,8 @@ expand_expr (exp, target, tmode, modifier)\n     case VAR_DECL:\n       /* If a static var's type was incomplete when the decl was written,\n \t but the type is complete now, lay out the decl now.  */\n-      if (DECL_SIZE (exp) == 0 && COMPLETE_TYPE_P (TREE_TYPE (exp))\n+      if (DECL_SIZE (exp) == 0\n+\t  && COMPLETE_OR_UNBOUND_ARRAY_TYPE_P (TREE_TYPE (exp))\n \t  && (TREE_STATIC (exp) || DECL_EXTERNAL (exp)))\n \tlayout_decl (exp, 0);\n "}, {"sha": "03e363a3d5a66633b2721850f9b7e46be46a1ddc", "filename": "gcc/testsuite/g++.dg/expr/incomplete1.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca06cfe69f7f89314603d636b36adeadbb70b56a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fincomplete1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca06cfe69f7f89314603d636b36adeadbb70b56a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fincomplete1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fincomplete1.C?ref=ca06cfe69f7f89314603d636b36adeadbb70b56a", "patch": "@@ -0,0 +1,14 @@\n+// PR 10202\n+// { dg-do compile }\n+// { dg-options -O0 }\n+\n+extern struct _smtp_account smtp_accounts[];\n+typedef struct _smtp_account {\n+        int flags;\n+} Smtp_Account;\n+\n+void get_smtp_host_info ()\n+{\n+\tif (smtp_accounts[0].flags & 0x01)\n+\t\tget_smtp_host_info();\n+}"}]}