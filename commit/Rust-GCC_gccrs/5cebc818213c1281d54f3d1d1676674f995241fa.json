{"sha": "5cebc818213c1281d54f3d1d1676674f995241fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNlYmM4MTgyMTNjMTI4MWQ1NGYzZDFkMTY3NjY3NGY5OTUyNDFmYQ==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2021-02-01T21:21:38Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2021-02-02T12:14:39Z"}, "message": "aarch64: Relax some builtins to AUTO_FP\n\nThis patch relaxes the flags for some builtins to AUTO_FP. These\nbuiltins do permutes and similar, so they shouldn't get the FP flags\nwhen operating on floating-point modes as they don't care about\nFPCR/FPSR and exceptions.\n\ngcc/ChangeLog:\n\n\t* config/aarch64/aarch64-simd-builtins.def (combine, zip1, zip2,\n\tuzp1, uzp2, trn1, trn2, simd_bsl): Use AUTO_FP flags.", "tree": {"sha": "8bcdc80b341eaae51eda6a7e7cf9220990671203", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bcdc80b341eaae51eda6a7e7cf9220990671203"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5cebc818213c1281d54f3d1d1676674f995241fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cebc818213c1281d54f3d1d1676674f995241fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cebc818213c1281d54f3d1d1676674f995241fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cebc818213c1281d54f3d1d1676674f995241fa/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7bcd5e09fb3f80c4598c24633532b25b490e2f2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bcd5e09fb3f80c4598c24633532b25b490e2f2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bcd5e09fb3f80c4598c24633532b25b490e2f2c"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "45573c2f537f6f64255d8d4d6788d99d7a5f4797", "filename": "gcc/config/aarch64/aarch64-simd-builtins.def", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cebc818213c1281d54f3d1d1676674f995241fa/gcc%2Fconfig%2Faarch64%2Faarch64-simd-builtins.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cebc818213c1281d54f3d1d1676674f995241fa/gcc%2Fconfig%2Faarch64%2Faarch64-simd-builtins.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-simd-builtins.def?ref=5cebc818213c1281d54f3d1d1676674f995241fa", "patch": "@@ -43,8 +43,8 @@\n    help describe the attributes (for example, pure) for the intrinsic\n    function.  */\n \n-  BUILTIN_VDC (COMBINE, combine, 0, ALL)\n-  VAR1 (COMBINEP, combine, 0, ALL, di)\n+  BUILTIN_VDC (COMBINE, combine, 0, AUTO_FP)\n+  VAR1 (COMBINEP, combine, 0, NONE, di)\n   BUILTIN_VB (BINOP, pmul, 0, NONE)\n   BUILTIN_VHSDF_HSDF (BINOP, fmulx, 0, FP)\n   BUILTIN_VHSDF_DF (UNOP, sqrt, 2, FP)\n@@ -556,12 +556,12 @@\n \n   /* Implemented by\n      aarch64_<PERMUTE:perm_insn><mode>.  */\n-  BUILTIN_VALL (BINOP, zip1, 0, ALL)\n-  BUILTIN_VALL (BINOP, zip2, 0, ALL)\n-  BUILTIN_VALL (BINOP, uzp1, 0, ALL)\n-  BUILTIN_VALL (BINOP, uzp2, 0, ALL)\n-  BUILTIN_VALL (BINOP, trn1, 0, ALL)\n-  BUILTIN_VALL (BINOP, trn2, 0, ALL)\n+  BUILTIN_VALL (BINOP, zip1, 0, AUTO_FP)\n+  BUILTIN_VALL (BINOP, zip2, 0, AUTO_FP)\n+  BUILTIN_VALL (BINOP, uzp1, 0, AUTO_FP)\n+  BUILTIN_VALL (BINOP, uzp2, 0, AUTO_FP)\n+  BUILTIN_VALL (BINOP, trn1, 0, AUTO_FP)\n+  BUILTIN_VALL (BINOP, trn2, 0, AUTO_FP)\n \n   BUILTIN_GPF_F16 (UNOP, frecpe, 0, FP)\n   BUILTIN_GPF_F16 (UNOP, frecpx, 0, FP)\n@@ -619,7 +619,7 @@\n   BUILTIN_VDQQH (BSL_P, simd_bsl, 0, NONE)\n   VAR2 (BSL_P, simd_bsl,0, NONE, di, v2di)\n   BUILTIN_VSDQ_I_DI (BSL_U, simd_bsl, 0, NONE)\n-  BUILTIN_VALLDIF (BSL_S, simd_bsl, 0, ALL)\n+  BUILTIN_VALLDIF (BSL_S, simd_bsl, 0, AUTO_FP)\n \n   /* Implemented by aarch64_crypto_aes<op><mode>.  */\n   VAR1 (BINOPU, crypto_aese, 0, NONE, v16qi)"}]}