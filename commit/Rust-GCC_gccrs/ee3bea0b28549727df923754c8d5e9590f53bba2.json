{"sha": "ee3bea0b28549727df923754c8d5e9590f53bba2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUzYmVhMGIyODU0OTcyN2RmOTIzNzU0YzhkNWU5NTkwZjUzYmJhMg==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2012-09-04T08:03:09Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2012-09-04T08:03:09Z"}, "message": "re PR fortran/54435 (ICE with SELECT TYPE on a non-CLASS object)\n\n2012-09-04  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/54435\n\tPR fortran/54443\n\t* match.c (gfc_match_select_type): Make sure to only access CLASS_DATA\n\tfor BT_CLASS.\n\n2012-09-04  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/54243\n\tPR fortran/54244\n\t* gfortran.dg/select_type_29.f03: New.\n\nFrom-SVN: r190910", "tree": {"sha": "cc6f9e1c67fc4afdd8358b2a47491dbb82c190b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc6f9e1c67fc4afdd8358b2a47491dbb82c190b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee3bea0b28549727df923754c8d5e9590f53bba2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee3bea0b28549727df923754c8d5e9590f53bba2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee3bea0b28549727df923754c8d5e9590f53bba2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee3bea0b28549727df923754c8d5e9590f53bba2/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff596ca15ca105fc571e95cdf35c074cb4f011d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff596ca15ca105fc571e95cdf35c074cb4f011d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff596ca15ca105fc571e95cdf35c074cb4f011d4"}], "stats": {"total": 43, "additions": 41, "deletions": 2}, "files": [{"sha": "dbafc449cc9c08af0a72c20e358a927d187402bc", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ee3bea0b28549727df923754c8d5e9590f53bba2", "patch": "@@ -1,3 +1,10 @@\n+2012-09-04  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/54435\n+\tPR fortran/54443\n+\t* match.c (gfc_match_select_type): Make sure to only access CLASS_DATA\n+\tfor BT_CLASS.\n+\n 2012-09-03  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/54467"}, {"sha": "cf85d527749a623e3b6d6f697a80938d5c54abca", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=ee3bea0b28549727df923754c8d5e9590f53bba2", "patch": "@@ -5368,10 +5368,10 @@ gfc_match_select_type (void)\n      array, which can have a reference, from other expressions that\n      have references, such as derived type components, and are not\n      allowed by the standard.\n-     TODO; see is it is sufficient to exclude component and substring\n+     TODO: see if it is sufficient to exclude component and substring\n      references.  */\n   class_array = expr1->expr_type == EXPR_VARIABLE\n-\t\t  && expr1->ts.type != BT_UNKNOWN\n+\t\t  && expr1->ts.type == BT_CLASS\n \t\t  && CLASS_DATA (expr1)\n \t\t  && (strcmp (CLASS_DATA (expr1)->name, \"_data\") == 0)\n \t\t  && (CLASS_DATA (expr1)->attr.dimension"}, {"sha": "163eeab5897b75b4f9bb01e58914b8f5548b3cab", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ee3bea0b28549727df923754c8d5e9590f53bba2", "patch": "@@ -1,3 +1,9 @@\n+2012-09-04  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/54243\n+\tPR fortran/54244\n+\t* gfortran.dg/select_type_29.f03: New.\n+\n 2012-09-03  Marc Glisse  <marc.glisse@inria.fr>\n \n \t* gcc.dg/fold-perm.c: Improve test."}, {"sha": "71603e3841a8c2ea2c30de63d60cb8491217d8f1", "filename": "gcc/testsuite/gfortran.dg/select_type_29.f03", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ftestsuite%2Fgfortran.dg%2Fselect_type_29.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee3bea0b28549727df923754c8d5e9590f53bba2/gcc%2Ftestsuite%2Fgfortran.dg%2Fselect_type_29.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fselect_type_29.f03?ref=ee3bea0b28549727df923754c8d5e9590f53bba2", "patch": "@@ -0,0 +1,26 @@\n+! { dg-do compile }\n+!\n+! PR 54435: [4.7/4.8 Regression] ICE with SELECT TYPE on a non-CLASS object\n+!\n+! Contributed by xarthisius\n+\n+subroutine foo(x)\n+  integer :: x\n+  select type (x)   ! { dg-error \"Selector shall be polymorphic\" }\n+  end select\n+end\n+\n+\n+! PR 54443: [4.7/4.8 Regression] Segmentation Fault when Compiling for code using Fortran Polymorphic Entities\n+!\n+! Contributed by Mark Beyer <mbeyer@cirrusaircraft.com>\n+\n+program class_test\n+  type hashnode\n+    character(4) :: htype\n+  end type\n+  class(hashnode), pointer :: hp\n+\n+  select type(hp%htype)   ! { dg-error \"is not a named variable\" }\n+\n+end program"}]}