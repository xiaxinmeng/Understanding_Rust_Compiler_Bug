{"sha": "789d0ee5158112e6d6508cb2eaf6eda15dd5b836", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg5ZDBlZTUxNTgxMTJlNmQ2NTA4Y2IyZWFmNmVkYTE1ZGQ1YjgzNg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-08-25T21:25:20Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-08-25T21:25:20Z"}, "message": "(do_pragma): Warn if `#pragma implementation \"foo.h\"' is\ninvoked\tafter \"foo.h\" has been included.\n\nFrom-SVN: r1953", "tree": {"sha": "aaab2c13fbfcc0b5ae109b1bbd79968bedea2fd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aaab2c13fbfcc0b5ae109b1bbd79968bedea2fd2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/789d0ee5158112e6d6508cb2eaf6eda15dd5b836", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/789d0ee5158112e6d6508cb2eaf6eda15dd5b836", "html_url": "https://github.com/Rust-GCC/gccrs/commit/789d0ee5158112e6d6508cb2eaf6eda15dd5b836", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/789d0ee5158112e6d6508cb2eaf6eda15dd5b836/comments", "author": null, "committer": null, "parents": [{"sha": "bee757e1c0f2594df8f8eb619ba0bdbaa79877c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bee757e1c0f2594df8f8eb619ba0bdbaa79877c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bee757e1c0f2594df8f8eb619ba0bdbaa79877c3"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "7cb186a3867574aa28b5d3fd057410eee883e44c", "filename": "gcc/cccp.c", "status": "modified", "additions": 24, "deletions": 1, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/789d0ee5158112e6d6508cb2eaf6eda15dd5b836/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/789d0ee5158112e6d6508cb2eaf6eda15dd5b836/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=789d0ee5158112e6d6508cb2eaf6eda15dd5b836", "patch": "@@ -5867,7 +5867,7 @@ do_ident (buf, limit)\n }\n \n /* #pragma and its argument line have already been copied to the output file.\n-   Here just check for recognized pragmas.  */\n+   Just check for some recognized pragmas that need validation here.  */\n \n static int\n do_pragma (buf, limit)\n@@ -5882,6 +5882,29 @@ do_pragma (buf, limit)\n       warning (\"`#pragma once' is obsolete\");\n     do_once ();\n   }\n+\n+  if (!strncmp (buf, \"implementation\", 14)) {\n+    /* Be quiet about `#pragma implementation' for a file only if it hasn't\n+       been included yet.  */\n+    struct file_name_list *ptr;\n+    char *p = buf + 14, *fname, *inc_fname;\n+    SKIP_WHITE_SPACE (p);\n+    if (*p == '\\n' || *p != '\\\"')\n+      return 0;\n+\n+    fname = p + 1;\n+    if (p = (char *) strchr (fname, '\\\"'))\n+      *p = '\\0';\n+    \n+    for (ptr = all_include_files; ptr; ptr = ptr->next) {\n+      inc_fname = (char *) strrchr (ptr->fname, '/');\n+      inc_fname = inc_fname ? inc_fname + 1 : ptr->fname;\n+      if (inc_fname && !strcmp (inc_fname, fname))\n+\twarning (\"`#pragma implementation' for \\\"%s\\\" appears after its #include\",\n+\t\t fname);\n+    }\n+  }\n+\n   return 0;\n }\n "}]}