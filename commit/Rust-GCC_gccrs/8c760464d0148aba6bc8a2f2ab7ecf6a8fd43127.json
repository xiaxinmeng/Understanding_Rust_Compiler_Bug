{"sha": "8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGM3NjA0NjRkMDE0OGFiYTZiYzhhMmYyYWI3ZWNmNmE4ZmQ0MzEyNw==", "commit": {"author": {"name": "Peter Bergner", "email": "bergner@vnet.ibm.com", "date": "2018-04-04T15:35:03Z"}, "committer": {"name": "Peter Bergner", "email": "bergner@gcc.gnu.org", "date": "2018-04-04T15:35:03Z"}, "message": "re PR rtl-optimization/84878 (ICE: Segmentation fault (in add_cross_iteration_register_deps))\n\ngcc/\n\tPR rtl-optimization/84878\n\t* ddg.c (add_cross_iteration_register_deps): Use DF_REF_BB to determine\n\tthe basic block.  Assert the use reference is not artificial and that\n\tit has an associated insn.\n\ngcc/testsuite/\n\tPR rtl-optimization/84878\n\t* gcc.target/powerpc/pr84878.c: New test.\n\nFrom-SVN: r259085", "tree": {"sha": "1948331ba7d6c2a0461ffe475aeb7fe317c489b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1948331ba7d6c2a0461ffe475aeb7fe317c489b1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/comments", "author": {"login": "peter-bergner", "id": 17504345, "node_id": "MDQ6VXNlcjE3NTA0MzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter-bergner", "html_url": "https://github.com/peter-bergner", "followers_url": "https://api.github.com/users/peter-bergner/followers", "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}", "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions", "organizations_url": "https://api.github.com/users/peter-bergner/orgs", "repos_url": "https://api.github.com/users/peter-bergner/repos", "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}", "received_events_url": "https://api.github.com/users/peter-bergner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f1acdcd066f3ba2a4565a9e8a002af897161483d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1acdcd066f3ba2a4565a9e8a002af897161483d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1acdcd066f3ba2a4565a9e8a002af897161483d"}], "stats": {"total": 39, "additions": 36, "deletions": 3}, "files": [{"sha": "bce1b28705c643b6287b1ddcbbe006f2f9f073d4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "patch": "@@ -1,3 +1,10 @@\n+2018-04-04  Peter Bergner  <bergner@vnet.ibm.com>\n+\n+\tPR rtl-optimization/84878\n+\t* ddg.c (add_cross_iteration_register_deps): Use DF_REF_BB to determine\n+\tthe basic block.  Assert the use reference is not artificial and that\n+\tit has an associated insn.\n+\n 2018-04-04  Michael Matz  <matz@suse.de>\n \n \t* builtins.c (compute_objsize): Pass correct operand"}, {"sha": "d51456618d6a92d0b8804d1511460dbed98dbf45", "filename": "gcc/ddg.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2Fddg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2Fddg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fddg.c?ref=8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "patch": "@@ -295,11 +295,14 @@ add_cross_iteration_register_deps (ddg_ptr g, df_ref last_def)\n   /* Create inter-loop true dependences and anti dependences.  */\n   for (r_use = DF_REF_CHAIN (last_def); r_use != NULL; r_use = r_use->next)\n     {\n-      rtx_insn *use_insn = DF_REF_INSN (r_use->ref);\n-\n-      if (BLOCK_FOR_INSN (use_insn) != g->bb)\n+      if (DF_REF_BB (r_use->ref) != g->bb)\n \tcontinue;\n \n+      gcc_assert (!DF_REF_IS_ARTIFICIAL (r_use->ref)\n+\t\t  && DF_REF_INSN_INFO (r_use->ref) != NULL);\n+\n+      rtx_insn *use_insn = DF_REF_INSN (r_use->ref);\n+\n       /* ??? Do not handle uses with DF_REF_IN_NOTE notes.  */\n       use_node = get_node_of_insn (g, use_insn);\n       gcc_assert (use_node);"}, {"sha": "51f53290cd54d805cc9fc6561d5af68bdd89f6c9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "patch": "@@ -1,3 +1,8 @@\n+2018-04-04  Peter Bergner  <bergner@vnet.ibm.com>\n+\n+\tPR rtl-optimization/84878\n+\t* gcc.target/powerpc/pr84878.c: New test.\n+\n 2018-04-04  Michael Matz  <matz@suse.de>\n \n \t* gcc.dg/Wstringop-overflow-4.c: New test."}, {"sha": "f96d3803d0623ba68da04a16106d91e3ed694132", "filename": "gcc/testsuite/gcc.target/powerpc/pr84878.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr84878.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr84878.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr84878.c?ref=8c760464d0148aba6bc8a2f2ab7ecf6a8fd43127", "patch": "@@ -0,0 +1,18 @@\n+/* PR rtl-optimization/84878 */\n+/* { dg-do compile { target { powerpc*-*-* } } } */\n+/* { dg-require-effective-target powerpc_altivec_ok } */\n+/* { dg-options \"-O2 -maltivec -mno-vsx -fmodulo-sched -ftree-vectorize -funroll-loops -fassociative-math -fno-signed-zeros -fno-trapping-math\" } */\n+\n+int ek;\n+float zu;\n+\n+int\n+k5 (int ks)\n+{\n+  while (ek < 1)\n+    {\n+      ks += (int)(0x1000000 + zu + !ek);\n+      ++ek;\n+    }\n+  return ks;\n+}"}]}