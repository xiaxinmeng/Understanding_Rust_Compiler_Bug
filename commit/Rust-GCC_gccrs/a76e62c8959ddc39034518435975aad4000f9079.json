{"sha": "a76e62c8959ddc39034518435975aad4000f9079", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc2ZTYyYzg5NTlkZGMzOTAzNDUxODQzNTk3NWFhZDQwMDBmOTA3OQ==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2008-10-07T16:19:38Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2008-10-07T16:19:38Z"}, "message": "struct-layout-1_generate.c (dg_options): New.\n\n\t* gcc.dg/compat/struct-layout-1_generate.c (dg_options): New.  Moved\n\tdg-options lines to this array, and added options for xtensa*-*-*.\n\t(NDG_OPTIONS): Define.\n\t(switchfiles): Print dg-options lines from new dg_options array.\n\t* g++.dg/compat/struct-layout-1_generate.c (dg_options): Add options\n\tfor xtensa*-*-* targets.\n\nFrom-SVN: r140939", "tree": {"sha": "753a9eee2a1c024a1b925a7b3e7e581fde46a46e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/753a9eee2a1c024a1b925a7b3e7e581fde46a46e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a76e62c8959ddc39034518435975aad4000f9079", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a76e62c8959ddc39034518435975aad4000f9079", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a76e62c8959ddc39034518435975aad4000f9079", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a76e62c8959ddc39034518435975aad4000f9079/comments", "author": null, "committer": null, "parents": [{"sha": "23cb97b79d10602832ec9617bac5e5e387e883ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23cb97b79d10602832ec9617bac5e5e387e883ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23cb97b79d10602832ec9617bac5e5e387e883ea"}], "stats": {"total": 47, "additions": 32, "deletions": 15}, "files": [{"sha": "3e13806fd1616468234512e79227f33e2eabec9e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a76e62c8959ddc39034518435975aad4000f9079/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a76e62c8959ddc39034518435975aad4000f9079/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a76e62c8959ddc39034518435975aad4000f9079", "patch": "@@ -1,3 +1,12 @@\n+2008-10-07  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* gcc.dg/compat/struct-layout-1_generate.c (dg_options): New.  Moved\n+\tdg-options lines to this array, and added options for xtensa*-*-*.\n+\t(NDG_OPTIONS): Define.\n+\t(switchfiles): Print dg-options lines from new dg_options array.\n+\t* g++.dg/compat/struct-layout-1_generate.c (dg_options): Add options\n+\tfor xtensa*-*-* targets.\n+\n 2008-10-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/addr4.adb: New test."}, {"sha": "589cc787fd831183f2eaa62ee80d723b804c3438", "filename": "gcc/testsuite/g++.dg/compat/struct-layout-1_generate.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a76e62c8959ddc39034518435975aad4000f9079/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcompat%2Fstruct-layout-1_generate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a76e62c8959ddc39034518435975aad4000f9079/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcompat%2Fstruct-layout-1_generate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcompat%2Fstruct-layout-1_generate.c?ref=a76e62c8959ddc39034518435975aad4000f9079", "patch": "@@ -46,7 +46,8 @@ const char *dg_options[] = {\n \"/* { dg-options \\\"%s-I%s\\\" } */\\n\",\n \"/* { dg-options \\\"%s-I%s -mno-mmx\\\" { target i?86-*-* x86_64-*-* } } */\\n\",\n \"/* { dg-options \\\"%s-I%s -fno-common\\\" { target hppa*-*-hpux* } } */\\n\",\n-\"/* { dg-options \\\"%s-I%s -mno-base-addresses\\\" { target mmix-*-* } } */\\n\"\n+\"/* { dg-options \\\"%s-I%s -mno-base-addresses\\\" { target mmix-*-* } } */\\n\",\n+\"/* { dg-options \\\"%s-I%s -mlongcalls -mtext-section-literals\\\" { target xtensa*-*-* } } */\\n\"\n #define NDG_OPTIONS (sizeof (dg_options) / sizeof (dg_options[0]))\n };\n "}, {"sha": "d50322c9f8756ed73ff1ba1c19e4ac9825a3e113", "filename": "gcc/testsuite/gcc.dg/compat/struct-layout-1_generate.c", "status": "modified", "additions": 21, "deletions": 14, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a76e62c8959ddc39034518435975aad4000f9079/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-layout-1_generate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a76e62c8959ddc39034518435975aad4000f9079/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-layout-1_generate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-layout-1_generate.c?ref=a76e62c8959ddc39034518435975aad4000f9079", "patch": "@@ -1,5 +1,5 @@\n /* Structure layout test generator.\n-   Copyright (C) 2004, 2005, 2007 Free Software Foundation, Inc.\n+   Copyright (C) 2004, 2005, 2007, 2008 Free Software Foundation, Inc.\n    Contributed by Jakub Jelinek <jakub@redhat.com>.\n \n This file is part of GCC.\n@@ -42,6 +42,14 @@ along with GCC; see the file COPYING3.  If not see\n #define COMPAT_PRLL \"ll\"\n #endif\n \n+const char *dg_options[] = {\n+\"/* { dg-options \\\"%s-I%s\\\" } */\\n\",\n+\"/* { dg-options \\\"%s-I%s -fno-common\\\" { target hppa*-*-hpux* *-*-darwin* *-*-mingw32* *-*-cygwin* } } */\\n\",\n+\"/* { dg-options \\\"%s-I%s -mno-base-addresses\\\" { target mmix-*-* } } */\\n\",\n+\"/* { dg-options \\\"%s-I%s -mlongcalls -mtext-section-literals\\\" { target xtensa*-*-* } } */\\n\"\n+#define NDG_OPTIONS (sizeof (dg_options) / sizeof (dg_options[0]))\n+};\n+\n typedef unsigned int hashval_t;\n \n enum TYPE\n@@ -747,6 +755,8 @@ switchfiles (int fields)\n {\n   static int filecnt;\n   static char *destbuf, *destptr;\n+  int i;\n+\n   ++filecnt;\n   if (outfile)\n     fclose (outfile);\n@@ -774,11 +784,10 @@ switchfiles (int fields)\n       fputs (\"failed to create test files\\n\", stderr);\n       exit (1);\n     }\n+  fprintf (outfile, \"/* { dg-require-effective-target int32plus } */\\n\");\n+  for (i = 0; i < NDG_OPTIONS; i++)\n+    fprintf (outfile, dg_options[i], \"\", srcdir_safe);\n   fprintf (outfile, \"\\\n-/* { dg-require-effective-target int32plus } */\\n\\\n-/* { dg-options \\\"-I%s\\\" } */\\n\\\n-/* { dg-options \\\"-I%s -fno-common\\\" { target hppa*-*-hpux* *-*-darwin* *-*-mingw32* *-*-cygwin* } } */\\n\\\n-/* { dg-options \\\"-I%s -mno-base-addresses\\\" { target mmix-*-* } } */\\n\\\n #include \\\"struct-layout-1.h\\\"\\n\\\n \\n\\\n #define TX(n, type, attrs, fields, ops) extern void test##n (void);\\n\\\n@@ -796,33 +805,31 @@ int main (void)\\n\\\n       abort ();\\n\\\n     }\\n\\\n   exit (0);\\n\\\n-}\\n\", srcdir_safe, srcdir_safe, srcdir_safe, filecnt, filecnt);\n+}\\n\", filecnt, filecnt);\n   fclose (outfile);\n   sprintf (destptr, \"t%03d_x.c\", filecnt);\n   outfile = fopen (destbuf, \"w\");\n   if (outfile == NULL)\n     goto fail;\n+  for (i = 0; i < NDG_OPTIONS; i++)\n+    fprintf (outfile, dg_options[i], \"-w \", srcdir_safe);\n   fprintf (outfile, \"\\\n-/* { dg-options \\\"-w -I%s\\\" } */\\n\\\n-/* { dg-options \\\"-w -I%s -fno-common\\\" { target hppa*-*-hpux* *-*-darwin* *-*-mingw32* *-*-cygwin* } } */\\n\\\n-/* { dg-options \\\"-w -I%s -mno-base-addresses\\\" { target mmix-*-* } } */\\n\\\n #include \\\"struct-layout-1_x1.h\\\"\\n\\\n #include \\\"t%03d_test.h\\\"\\n\\\n #include \\\"struct-layout-1_x2.h\\\"\\n\\\n-#include \\\"t%03d_test.h\\\"\\n\", srcdir_safe, srcdir_safe, srcdir_safe, filecnt, filecnt);\n+#include \\\"t%03d_test.h\\\"\\n\", filecnt, filecnt);\n   fclose (outfile);\n   sprintf (destptr, \"t%03d_y.c\", filecnt);\n   outfile = fopen (destbuf, \"w\");\n   if (outfile == NULL)\n     goto fail;\n+  for (i = 0; i < NDG_OPTIONS; i++)\n+    fprintf (outfile, dg_options[i], \"-w \", srcdir_safe);\n   fprintf (outfile, \"\\\n-/* { dg-options \\\"-w -I%s\\\" } */\\n\\\n-/* { dg-options \\\"-w -I%s -fno-common\\\" { target hppa*-*-hpux* *-*-darwin* *-*-mingw32* *-*-cygwin* } } */\\n\\\n-/* { dg-options \\\"-w -I%s -mno-base-addresses\\\" { target mmix-*-* } } */\\n\\\n #include \\\"struct-layout-1_y1.h\\\"\\n\\\n #include \\\"t%03d_test.h\\\"\\n\\\n #include \\\"struct-layout-1_y2.h\\\"\\n\\\n-#include \\\"t%03d_test.h\\\"\\n\", srcdir_safe, srcdir_safe, srcdir_safe, filecnt, filecnt);\n+#include \\\"t%03d_test.h\\\"\\n\", filecnt, filecnt);\n   fclose (outfile);\n   sprintf (destptr, \"t%03d_test.h\", filecnt);\n   outfile = fopen (destbuf, \"w\");"}]}