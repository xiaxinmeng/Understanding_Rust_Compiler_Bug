{"sha": "f13eae6a01621a23b36bac6a3cec53bb217ba1e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEzZWFlNmEwMTYyMWEyM2IzNmJhYzZhM2NlYzUzYmIyMTdiYTFlNA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2009-02-12T14:42:20Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2009-02-12T14:42:20Z"}, "message": "i386.c (construct_container): Rewrite processing BLKmode with X86_64_SSE_CLASS.\n\n2009-02-12  H.J. Lu  <hongjiu.lu@intel.com>\n\n\t* config/i386/i386.c (construct_container): Rewrite processing\n\tBLKmode with X86_64_SSE_CLASS.\n\nFrom-SVN: r144128", "tree": {"sha": "ab586725508103cf36781be4d8890e787384e791", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab586725508103cf36781be4d8890e787384e791"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f13eae6a01621a23b36bac6a3cec53bb217ba1e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f13eae6a01621a23b36bac6a3cec53bb217ba1e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f13eae6a01621a23b36bac6a3cec53bb217ba1e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f13eae6a01621a23b36bac6a3cec53bb217ba1e4/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "552af6341205ea47b9a70cfbf9157764c3975807", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/552af6341205ea47b9a70cfbf9157764c3975807", "html_url": "https://github.com/Rust-GCC/gccrs/commit/552af6341205ea47b9a70cfbf9157764c3975807"}], "stats": {"total": 43, "additions": 31, "deletions": 12}, "files": [{"sha": "4a8c28277b4a2dc630a558a9da6e4a70a3099109", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f13eae6a01621a23b36bac6a3cec53bb217ba1e4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f13eae6a01621a23b36bac6a3cec53bb217ba1e4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f13eae6a01621a23b36bac6a3cec53bb217ba1e4", "patch": "@@ -1,3 +1,8 @@\n+2009-02-12  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config/i386/i386.c (construct_container): Rewrite processing\n+\tBLKmode with X86_64_SSE_CLASS.\n+\n 2009-02-12  Paolo Bonzini  <bonzini@gnu.org>\n \n \tPR target/39152"}, {"sha": "709d7d3ebdf566b6611c4003dda8d84e1307618c", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 26, "deletions": 12, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f13eae6a01621a23b36bac6a3cec53bb217ba1e4/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f13eae6a01621a23b36bac6a3cec53bb217ba1e4/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=f13eae6a01621a23b36bac6a3cec53bb217ba1e4", "patch": "@@ -5315,6 +5315,8 @@ construct_container (enum machine_mode mode, enum machine_mode orig_mode,\n   /* Otherwise figure out the entries of the PARALLEL.  */\n   for (i = 0; i < n; i++)\n     {\n+      int pos;\n+\n       switch (regclass[i])\n         {\n \t  case X86_64_NO_CLASS:\n@@ -5351,24 +5353,36 @@ construct_container (enum machine_mode mode, enum machine_mode orig_mode,\n \t    sse_regno++;\n \t    break;\n \t  case X86_64_SSE_CLASS:\n-\t    if (i < n - 1 && regclass[i + 1] == X86_64_SSEUP_CLASS)\n+\t    pos = i;\n+\t    switch (n)\n \t      {\n-\t\tif (regclass[i + 2] == X86_64_SSEUP_CLASS\n-\t\t    || regclass[i + 3] == X86_64_SSEUP_CLASS)\n-\t\t  tmpmode = OImode;\n+\t      case 1:\n+\t\ttmpmode = DImode;\n+\t\tbreak;\n+\t      case 2:\n+\t\tif (i == 0 && regclass[1] == X86_64_SSEUP_CLASS)\n+\t\t  {\n+\t\t    tmpmode = TImode;\n+\t\t    i++;\n+\t\t  }\n \t\telse\n-\t\t  tmpmode = TImode;\n+\t\t  tmpmode = DImode;\n+\t\tbreak;\n+\t      case 4:\n+\t\tgcc_assert (i == 0\n+\t\t\t    && regclass[1] == X86_64_SSEUP_CLASS\n+\t\t\t    && regclass[2] == X86_64_SSEUP_CLASS\n+\t\t\t    && regclass[3] == X86_64_SSEUP_CLASS);\n+\t\ttmpmode = OImode;\n+\t\ti += 3;\n+\t\tbreak;\n+\t      default:\n+\t\tgcc_unreachable ();\n \t      }\n-\t    else\n-\t      tmpmode = DImode;\n \t    exp [nexps++] = gen_rtx_EXPR_LIST (VOIDmode,\n \t\t\t\t\t       gen_rtx_REG (tmpmode,\n \t\t\t\t\t\t\t    SSE_REGNO (sse_regno)),\n-\t\t\t\t\t       GEN_INT (i*8));\n-\t    if (tmpmode == OImode)\n-\t      i += 3;\n-\t    else if (tmpmode == TImode)\n-\t      i++;\n+\t\t\t\t\t       GEN_INT (pos*8));\n \t    sse_regno++;\n \t    break;\n \t  default:"}]}