{"sha": "30c99a9e194d987fce5271cacc16adf54f7c1bdf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzBjOTlhOWUxOTRkOTg3ZmNlNTI3MWNhY2MxNmFkZjU0ZjdjMWJkZg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2009-10-10T00:39:46Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2009-10-10T00:39:46Z"}, "message": "* charset.c (_cpp_valid_ucn): Update C++0x restrictions.\n\nFrom-SVN: r152614", "tree": {"sha": "b6265411f95307da8b1fa0ed0ac62aba8eb60ccb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6265411f95307da8b1fa0ed0ac62aba8eb60ccb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30c99a9e194d987fce5271cacc16adf54f7c1bdf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30c99a9e194d987fce5271cacc16adf54f7c1bdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30c99a9e194d987fce5271cacc16adf54f7c1bdf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30c99a9e194d987fce5271cacc16adf54f7c1bdf/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2214382ca9c3dc847aedfbd60fa50e906445fd8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2214382ca9c3dc847aedfbd60fa50e906445fd8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2214382ca9c3dc847aedfbd60fa50e906445fd8c"}], "stats": {"total": 45, "additions": 39, "deletions": 6}, "files": [{"sha": "534d797e04dea4dcf42257a0958d5a4182408f4e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30c99a9e194d987fce5271cacc16adf54f7c1bdf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30c99a9e194d987fce5271cacc16adf54f7c1bdf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=30c99a9e194d987fce5271cacc16adf54f7c1bdf", "patch": "@@ -1,3 +1,9 @@\n+2009-10-09  Jason Merrill  <jason@redhat.com>\n+\n+\t* g++.dg/cpp/ucn-1.C: New.\n+\n+2009-10-08  Jason Merrill  <jason@redhat.com>\n+\n 2009-10-09  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/41585\n@@ -60,6 +66,7 @@\n \n 2009-10-08  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/36816\n \t* g++.dg/cpp0x/rv-deduce.C: New.\n \n \tPR c++/37177"}, {"sha": "354e1d976b052ace18d3089447fc7dac35aa0275", "filename": "gcc/testsuite/g++.dg/cpp/ucn-1.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30c99a9e194d987fce5271cacc16adf54f7c1bdf/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fucn-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30c99a9e194d987fce5271cacc16adf54f7c1bdf/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fucn-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fucn-1.C?ref=30c99a9e194d987fce5271cacc16adf54f7c1bdf", "patch": "@@ -0,0 +1,13 @@\n+// http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2170.html\n+// { dg-options \"-std=c++0x -fextended-identifiers\" }\n+\n+int main()\n+{\n+  \"\\u0041\";\t\t\t// 'A' UCN is OK in string literal\n+  '\\u0041';\t\t\t// also OK in character literal\n+\n+  int c\\u0041c;\t\t      // { dg-error \"not valid in an identifier\" }\n+  int c\\u0024c;\t\t      // $ is OK; not part of basic source char set\n+\n+  U\"\\uD800\";\t\t  // { dg-error \"not a valid universal character\" }\n+}"}, {"sha": "9d9556ee0adcf0802339a3b663eb47867982a383", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30c99a9e194d987fce5271cacc16adf54f7c1bdf/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30c99a9e194d987fce5271cacc16adf54f7c1bdf/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=30c99a9e194d987fce5271cacc16adf54f7c1bdf", "patch": "@@ -1,3 +1,7 @@\n+2009-10-09  Jason Merrill  <jason@redhat.com>\n+\n+\t* charset.c (_cpp_valid_ucn): Update C++0x restrictions.\n+\n 2009-10-09  Neil Vachharajani <nvachhar@google.com>\n \n \t* directives.c (DIRECTIVE_TABLE): Remove DEPRECATED from ident and"}, {"sha": "bd24ec2490d1a130e8c36479b485161dd030adf8", "filename": "libcpp/charset.c", "status": "modified", "additions": 15, "deletions": 6, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30c99a9e194d987fce5271cacc16adf54f7c1bdf/libcpp%2Fcharset.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30c99a9e194d987fce5271cacc16adf54f7c1bdf/libcpp%2Fcharset.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fcharset.c?ref=30c99a9e194d987fce5271cacc16adf54f7c1bdf", "patch": "@@ -948,10 +948,16 @@ ucn_valid_in_identifier (cpp_reader *pfile, cppchar_t c,\n    ISO/IEC 10646 is NNNNNNNN; the character designated by the\n    universal character name \\uNNNN is that character whose character\n    short name in ISO/IEC 10646 is 0000NNNN.  If the hexadecimal value\n-   for a universal character name is less than 0x20 or in the range\n-   0x7F-0x9F (inclusive), or if the universal character name\n-   designates a character in the basic source character set, then the\n-   program is ill-formed.\n+   for a universal character name corresponds to a surrogate code point\n+   (in the range 0xD800-0xDFFF, inclusive), the program is ill-formed.\n+   Additionally, if the hexadecimal value for a universal-character-name\n+   outside a character or string literal corresponds to a control character\n+   (in either of the ranges 0x00-0x1F or 0x7F-0x9F, both inclusive) or to a\n+   character in the basic source character set, the program is ill-formed.\n+\n+   C99 6.4.3: A universal character name shall not specify a character\n+   whose short identifier is less than 00A0 other than 0024 ($), 0040 (@),\n+   or 0060 (`), nor one in the range D800 through DFFF inclusive.\n \n    *PSTR must be preceded by \"\\u\" or \"\\U\"; it is assumed that the\n    buffer end is delimited by a non-hex digit.  Returns zero if the\n@@ -1018,9 +1024,12 @@ _cpp_valid_ucn (cpp_reader *pfile, const uchar **pstr,\n \t\t (int) (str - base), base);\n       result = 1;\n     }\n-  /* The standard permits $, @ and ` to be specified as UCNs.  We use\n-     hex escapes so that this also works with EBCDIC hosts.  */\n+  /* The C99 standard permits $, @ and ` to be specified as UCNs.  We use\n+     hex escapes so that this also works with EBCDIC hosts.\n+     C++0x permits everything below 0xa0 within literals;\n+     ucn_valid_in_identifier will complain about identifiers.  */\n   else if ((result < 0xa0\n+\t    && !CPP_OPTION (pfile, cplusplus)\n \t    && (result != 0x24 && result != 0x40 && result != 0x60))\n \t   || (result & 0x80000000)\n \t   || (result >= 0xD800 && result <= 0xDFFF))"}]}