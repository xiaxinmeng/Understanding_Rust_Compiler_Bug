{"sha": "34f4edf8ec4218248d3392351988b79260693f23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzRmNGVkZjhlYzQyMTgyNDhkMzM5MjM1MTk4OGI3OTI2MDY5M2YyMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-05-06T17:03:10Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-05-06T17:03:10Z"}, "message": "testsuite_hooks.cc (try_mkfifo): Remove.\n\n\t* testsuite/testsuite_hooks.cc (try_mkfifo): Remove.\n\t* testsuite/testsuite_hooks.h (try_mkfifo): Likewise.\n\t* testsuite/27_io/basic_filebuf/close/char/4879.cc: Use\n\tdg-require-fork and dg-require-mkfifo.  Replace try_mkfifo with\n\tmkfifo.\n\t* testsuite/27_io/basic_filebuf/close/char/9964.cc: Likewise.\n\t* testsuite/27_io/basic_filebuf/imbue/char/13171-2.cc: Likewise.\n\t* testsuite/27_io/basic_filebuf/imbue/char/13582-2.cc: Likewise.\n\t* testsuite/27_io/basic_filebuf/imbue/wchar_t/13582-2.cc:\n\tLikewise.\n\t* testsuite/27_io/basic_filebuf/imbue/wchar_t/14975-2.cc:\n\tLikewise.\n\t* testsuite/27_io/basic_filebuf/open/char/9507.cc: Likewise.\n\t* testsuite/27_io/basic_filebuf/showmanyc/char/9533-1.cc:\n\tLikewise.\n\t* testsuite/27_io/basic_filebuf/underflow/char/10097.cc: Likewise.\n\t* testsuite/27_io/objects/char/7.cc: Likewise.\n\t* testsuite/27_io/objects/char/9661-1.cc: Likewise.\n\t* testsuite/27_io/objects/wchar_t/7.cc: Likewise.\n\t* testsuite/27_io/objects/wchar_t/9661-1.cc: Likewise.\n\n\t* lib/target-supports-dg.exp (dg-require-fork): New function.\n\t(dg-require-mkfifo): Likewise.\n\t* lib/target-supports.exp (check_function_available): New\n\tfunction.\n\t(check_fork_available): Likewise.\n\t(check_mkfifo_available): Likewise.\n\nFrom-SVN: r99325", "tree": {"sha": "128be1c28a19f18dd54e51d827c7eef015ccb6f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/128be1c28a19f18dd54e51d827c7eef015ccb6f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/34f4edf8ec4218248d3392351988b79260693f23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34f4edf8ec4218248d3392351988b79260693f23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34f4edf8ec4218248d3392351988b79260693f23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34f4edf8ec4218248d3392351988b79260693f23/comments", "author": null, "committer": null, "parents": [{"sha": "b8c1d4a1bce11dd9fad78ef63ec757aebaad3054", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8c1d4a1bce11dd9fad78ef63ec757aebaad3054", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8c1d4a1bce11dd9fad78ef63ec757aebaad3054"}], "stats": {"total": 154, "additions": 126, "deletions": 28}, "files": [{"sha": "8ecd101dca3e825c7ee48127156d2ccdfa55e053", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,12 @@\n+2005-05-06  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* lib/target-supports-dg.exp (dg-require-fork): New function.\n+\t(dg-require-mkfifo): Likewise.\n+\t* lib/target-supports.exp (check_function_available): New\n+\tfunction.\n+\t(check_fork_available): Likewise.\n+\t(check_mkfifo_available): Likewise.\n+\n 2005-05-06  Jeff Law  <law@redhat.com>\n \n \t* gcc.c-torture/compile/pr21380.c: New test."}, {"sha": "1e112185041ccf842154b4e27b46cdabe76cce26", "filename": "gcc/testsuite/lib/scanasm.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fscanasm.exp?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -118,7 +118,7 @@ proc scan-not-hidden { args } {\n     set output_file \"[file rootname [file tail $testcase]].s\"\n \n     set symbol [lindex $args 0]\n-    set hidden_scan [hidden-scan-for symbol]\n+    set hidden_scan [hidden-scan-for $symbol]\n \n     set args [lreplace $args 0 0 \"$hidden_scan\"]\n "}, {"sha": "899473f87360774cf499fe156bde525f595034de", "filename": "gcc/testsuite/lib/target-supports-dg.exp", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -122,6 +122,24 @@ proc dg-require-effective-target { args } {\n     }\n }\n \n+# If this target does not have fork, skip this test.\n+\n+proc dg-require-fork { args } {\n+    if { ![check_fork_available] } {\n+\tupvar dg-do-what dg-do-what\n+        set dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n+    }\n+}\n+\n+# If this target does not have mkfifo, skip this test.\n+\n+proc dg-require-mkfifo { args } {\n+    if { ![check_mkfifo_available] } {\n+\tupvar dg-do-what dg-do-what\n+        set dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n+    }\n+}\n+\n # Check the flags with which the test will be run against options in\n # a test directive that will skip or xfail that test.  The DejaGnu proc\n # check_conditional_xfail will look at the options in compiler_flags, so"}, {"sha": "90139ff8395ec736b427c1d57e99b7649945efd1", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -601,6 +601,53 @@ proc check_alpha_max_hw_available { } {\n     return $alpha_max_hw_available_saved\n }\n \n+# Returns true iff the FUNCTION is available on the target system.\n+# (This is essentially a Tcl implementation of Autoconf's\n+# AC_CHECK_FUNC.)\n+\n+proc check_function_available { function } {\n+    set var \"${function}_available_saved\"\n+    global $var\n+    global tool\n+\n+    if {![info exists $var]} {\n+\t# Assume it exists.\n+\tset $var 1\n+\t# Check to make sure.\n+\tset src \"function[pid].c\"\n+\tset exe \"function[pid].exe\"\n+\n+\tset f [open $src \"w\"]\n+\tputs $f \"int main () { $function (); }\"\n+\tclose $f\n+\n+\tset lines [${tool}_target_compile $src $exe executable \"\"]\n+\tfile delete $src\n+\tfile delete $exe\n+\n+\tif {![string match \"\" $lines]} then {\n+\t    set $var 0\n+\t    verbose -log \"$function is not available\"\n+\t} else {\n+\t    verbose -log \"$function is available\"\n+\t}\n+    }\n+\n+    eval return \\$$var\n+}\n+\n+# Returns ture iff \"fork\" is available on the target system.\n+\n+proc check_fork_available {} {\n+    return [check_function_available \"fork\"]\n+}\n+\n+# Returns ture iff \"mkfifo\" is available on the target system.\n+\n+proc check_mkfifo_available {} {\n+    return [check_function_available \"mkfifo\"]\n+}\n+\n # Return 1 if we're generating 32-bit code using default options, 0\n # otherwise.\n #"}, {"sha": "a7d0c5ced066236548acad4fad4fe83397b87bb2", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/close/char/4879.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fclose%2Fchar%2F4879.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fclose%2Fchar%2F4879.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fclose%2Fchar%2F4879.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+ \n // Copyright (C) 2001, 2002, 2003, 2005 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -46,7 +49,7 @@ test_04()\n   signal(SIGPIPE, SIG_IGN);\n   \n   unlink(name);\n-  if (0 != try_mkfifo(name, S_IRWXU))\n+  if (0 != mkfifo(name, S_IRWXU))\n     {\n       std::cerr << \"failed to create fifo\" << std::endl;\n       exit(-1);"}, {"sha": "6be75113327b21feb33f4ebf16314860c5ddea8c", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/close/char/9964.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fclose%2Fchar%2F9964.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fclose%2Fchar%2F9964.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fclose%2Fchar%2F9964.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // Copyright (C) 2001, 2002, 2003, 2005 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -44,7 +47,7 @@ void test_07()\n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);  \n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   \n   int child = fork();\n   VERIFY( child != -1 );"}, {"sha": "ec7be4982740fb4ff5d41c6e771fede0e5ab9223", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/imbue/char/13171-2.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13171-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13171-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13171-2.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // Copyright (C) 2003, 2005 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -38,7 +41,7 @@ void test01()\n \n   const char* name = \"tmp_fifo_13171-2\";\n   unlink(name);\n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   semaphore s1, s2;\n   \n   int child = fork();"}, {"sha": "6a7376df18f4913b063b1fc4192a8fc4fcb0e218", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/imbue/char/13582-2.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13582-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13582-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fchar%2F13582-2.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2004-01-11  Petur Runolfsson  <peturr02@ru.is>\n \n // Copyright (C) 2004, 2005 Free Software Foundation, Inc.\n@@ -41,7 +44,7 @@ void test01()\n \n   const char* name = \"tmp_fifo_13582-2\";\n   unlink(name);\n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n \n   int child = fork();\n   if (child == 0)"}, {"sha": "80fd8e92f916d6701f486b97e0093ee4f13222cc", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/imbue/wchar_t/13582-2.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fwchar_t%2F13582-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fwchar_t%2F13582-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fwchar_t%2F13582-2.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2004-01-11  Petur Runolfsson  <peturr02@ru.is>\n \n // Copyright (C) 2004 Free Software Foundation, Inc.\n@@ -41,7 +44,7 @@ void test01()\n \n   const char* name = \"tmp_fifo_13582-2\";\n   unlink(name);\n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   \n   int child = fork();\n   if (child == 0)"}, {"sha": "d65b8d09f7023fd6eb181c2a2ecb82da7caf934f", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/imbue/wchar_t/14975-2.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fwchar_t%2F14975-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fwchar_t%2F14975-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fimbue%2Fwchar_t%2F14975-2.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2004-04-16  Petur Runolfsson  <peturr02@ru.is>\n \n // Copyright (C) 2004, 2005 Free Software Foundation, Inc.\n@@ -41,7 +44,7 @@ void test01()\n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);  \n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   semaphore s1;\n \n   int child = fork();"}, {"sha": "8035a7b3009592c5552a842470d23e7457c4309c", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/open/char/9507.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fopen%2Fchar%2F9507.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fopen%2Fchar%2F9507.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fopen%2Fchar%2F9507.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,5 @@\n+// { dg-require-mkfifo \"\" }\n+\n // Copyright (C) 2001, 2002, 2003, 2005 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -41,7 +43,7 @@ void test_06()\n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);\n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   \n   std::filebuf fbuf;\n   // The use of ios_base::ate implies an attempt to seek on the file"}, {"sha": "f5126e41df2b22bb9f6fcafaffc5ba28b2581b6a", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/showmanyc/char/9533-1.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fshowmanyc%2Fchar%2F9533-1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fshowmanyc%2Fchar%2F9533-1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fshowmanyc%2Fchar%2F9533-1.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // Copyright (C) 2003 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -39,7 +42,7 @@ void test_01()\n   signal(SIGPIPE, SIG_IGN);\n   unlink(name);\n   \n-  if (0 != try_mkfifo(name, S_IRWXU))\n+  if (0 != mkfifo(name, S_IRWXU))\n     {\n       VERIFY( false );\n     }"}, {"sha": "1113f84435f9b56b41a028309ac57bfcb7d78b7b", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/underflow/char/10097.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Funderflow%2Fchar%2F10097.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Funderflow%2Fchar%2F10097.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Funderflow%2Fchar%2F10097.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2001-05-21 Benjamin Kosnik  <bkoz@redhat.com>\n \n // Copyright (C) 2001, 2002, 2003, 2005 Free Software Foundation, Inc.\n@@ -53,7 +56,7 @@ void test16()\n   signal(SIGPIPE, SIG_IGN);\n   unlink(name);\n   \n-  if (0 != try_mkfifo(name, S_IRWXU))\n+  if (0 != mkfifo(name, S_IRWXU))\n     {\n       VERIFY( false );\n     }"}, {"sha": "b1b078120c17693a2780df99577326e6f13d8ead", "filename": "libstdc++-v3/testsuite/27_io/objects/char/7.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F7.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F7.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F7.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2003-04-26 Petur Runolfsson  <peturr02@ru.is>\n \n // Copyright (C) 2003, 2005 Free Software Foundation, Inc.\n@@ -41,7 +44,7 @@ void test07()\n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);  \n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   semaphore s1;\n \n   int child = fork();"}, {"sha": "778490896f9faa599be307ba82c0e0f09f336333", "filename": "libstdc++-v3/testsuite/27_io/objects/char/9661-1.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F9661-1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F9661-1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F9661-1.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2003-04-30  Petur Runolfsson <peturr02@ru.is>\n \n // Copyright (C) 2003, 2005 Free Software Foundation, Inc.\n@@ -42,7 +45,7 @@ void test01()\n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);  \n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   semaphore s1, s2;\n   \n   int child = fork();"}, {"sha": "9351ca48324b8a04e630b47703bc3eed12bc38eb", "filename": "libstdc++-v3/testsuite/27_io/objects/wchar_t/7.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F7.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F7.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F7.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2003-05-01 Petur Runolfsson  <peturr02@ru.is>\n \n // Copyright (C) 2003, 2005 Free Software Foundation, Inc.\n@@ -41,7 +44,7 @@ void test07()\n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);  \n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   semaphore s1;\n   \n   int child = fork();"}, {"sha": "42b167b052abe1887ef1e9f47183a3a9ff57e1e2", "filename": "libstdc++-v3/testsuite/27_io/objects/wchar_t/9661-1.cc", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F9661-1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F9661-1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F9661-1.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -1,3 +1,6 @@\n+// { dg-require-fork \"\" }\n+// { dg-require-mkfifo \"\" }\n+\n // 2003-04-30  Petur Runolfsson <peturr02@ru.is>\n \n // Copyright (C) 2003, 2005 Free Software Foundation, Inc.\n@@ -42,7 +45,7 @@ void test01()\n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);  \n-  try_mkfifo(name, S_IRWXU);\n+  mkfifo(name, S_IRWXU);\n   semaphore s1, s2;\n \n   int child = fork();"}, {"sha": "a5f1b26e8ccb1a4f6a8fff9a3a899b933f238c96", "filename": "libstdc++-v3/testsuite/testsuite_hooks.cc", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.cc?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -233,17 +233,6 @@ namespace __gnu_test\n #endif\n   }\n \n-  int\n-  try_mkfifo (const char* filename, mode_t mode)\n-  {\n-#if defined (_NEWLIB_VERSION) || defined (__MINGW32_VERSION)\n-    /* Newlib and MinGW32 do not have mkfifo.  */\n-    exit(0);\n-#else\n-    return mkfifo(filename, mode);\n-#endif\n-  }\n-\n   counter::size_type  counter::count = 0;\n   unsigned int copy_constructor::count_ = 0;\n   unsigned int copy_constructor::throw_on_ = 0;"}, {"sha": "8b8222316e631fb698862720f053c06920418ccd", "filename": "libstdc++-v3/testsuite/testsuite_hooks.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f4edf8ec4218248d3392351988b79260693f23/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.h?ref=34f4edf8ec4218248d3392351988b79260693f23", "patch": "@@ -164,9 +164,6 @@ namespace __gnu_test\n   std::locale\n   try_named_locale(const char* name);\n \n-  int\n-  try_mkfifo (const char* filename, mode_t mode);\n-\n \n   // Counting.\n   struct counter"}]}