{"sha": "f449022dca52d61f2f57cb40e6fc4b9b69049314", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ0OTAyMmRjYTUyZDYxZjJmNTdjYjQwZTZmYzRiOWI2OTA0OTMxNA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-04-20T21:11:22Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-04-20T21:11:22Z"}, "message": "re PR fortran/35882 (Miscounted continuation lines when interspersed with data)\n\n2008-04-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/35882\n\t* scanner.c (skip_fixed_comments): Update continue_line when comment is\n\tdetected. (gfc_next_char_literal): Likewise.\n\n\tPR fortran/35882\n\t* gfortran.dg/continuation_5.f: Add some comment lines.\n\t* gfortran.dg/continuation_3.f90: Add some comment lines.\n\nFrom-SVN: r134493", "tree": {"sha": "ee8359090ec8ff39b18cf812acb30a1a1f72b803", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee8359090ec8ff39b18cf812acb30a1a1f72b803"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f449022dca52d61f2f57cb40e6fc4b9b69049314", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f449022dca52d61f2f57cb40e6fc4b9b69049314", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f449022dca52d61f2f57cb40e6fc4b9b69049314", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f449022dca52d61f2f57cb40e6fc4b9b69049314/comments", "author": null, "committer": null, "parents": [{"sha": "ef5f59f6395ae2db6c02c8bed4dad9a3dd8c563d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef5f59f6395ae2db6c02c8bed4dad9a3dd8c563d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef5f59f6395ae2db6c02c8bed4dad9a3dd8c563d"}], "stats": {"total": 40, "additions": 37, "deletions": 3}, "files": [{"sha": "78d9359c9b2418a859cc901c9e127b9768eb6065", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f449022dca52d61f2f57cb40e6fc4b9b69049314", "patch": "@@ -1,3 +1,9 @@\n+2008-04-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/35882\n+\t* scanner.c (skip_fixed_comments): Update continue_line when comment is\n+\tdetected. (gfc_next_char_literal): Likewise.\n+\n 2008-04-19  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/35944"}, {"sha": "1aa52f5d57699ca1f4f881a4936bccb2e5c8ed38", "filename": "gcc/fortran/scanner.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ffortran%2Fscanner.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ffortran%2Fscanner.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fscanner.c?ref=f449022dca52d61f2f57cb40e6fc4b9b69049314", "patch": "@@ -615,6 +615,10 @@ skip_fixed_comments (void)\n \t\t!$|c$|*$ should be treated as 2 spaces if the characters\n \t\tin columns 3 to 6 are valid fixed form label columns\n \t\tcharacters.  */\n+\t  if (gfc_current_locus.lb != NULL\n+\t      && continue_line < gfc_linebuf_linenum (gfc_current_locus.lb))\n+\t    continue_line = gfc_linebuf_linenum (gfc_current_locus.lb);\n+\n \t  if (gfc_option.flag_openmp)\n \t    {\n \t      if (next_char () == '$')\n@@ -700,6 +704,9 @@ skip_fixed_comments (void)\n \n       if (col != 6 && c == '!')\n \t{\n+\t  if (gfc_current_locus.lb != NULL\n+\t      && continue_line < gfc_linebuf_linenum (gfc_current_locus.lb))\n+\t    continue_line = gfc_linebuf_linenum (gfc_current_locus.lb);\n \t  skip_comment_line ();\n \t  continue;\n \t}\n@@ -821,12 +828,14 @@ gfc_next_char_literal (int in_string)\n \t\t\t     \"statement at %C\", gfc_option.max_continue_free);\n \t    }\n \t}\n-      if (continue_line < gfc_linebuf_linenum (gfc_current_locus.lb))\n-\tcontinue_line = gfc_linebuf_linenum (gfc_current_locus.lb);\n \n       /* Now find where it continues. First eat any comment lines.  */\n       openmp_cond_flag = skip_free_comments ();\n \n+      if (gfc_current_locus.lb != NULL\n+\t  && continue_line < gfc_linebuf_linenum (gfc_current_locus.lb))\n+\tcontinue_line = gfc_linebuf_linenum (gfc_current_locus.lb);\n+\n       if (prev_openmp_flag != openmp_flag)\n \t{\n \t  gfc_current_locus = old_loc;\n@@ -945,7 +954,8 @@ gfc_next_char_literal (int in_string)\n \t    }\n \t}\n \n-      if (continue_line < gfc_linebuf_linenum (gfc_current_locus.lb))\n+      if (gfc_current_locus.lb != NULL\n+\t  && continue_line < gfc_linebuf_linenum (gfc_current_locus.lb))\n \tcontinue_line = gfc_linebuf_linenum (gfc_current_locus.lb);\n     }\n "}, {"sha": "a62ea30fa9c017accf554105daa78dad739a5beb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f449022dca52d61f2f57cb40e6fc4b9b69049314", "patch": "@@ -1,3 +1,9 @@\n+2008-04-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/35882\n+\t* gfortran.dg/continuation_5.f: Add some comment lines.\n+\t* gfortran.dg/continuation_3.f90: Add some comment lines.\n+\t\n 2008-04-20  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/35960"}, {"sha": "169f06f65a302181a24775edde157c6e31755b31", "filename": "gcc/testsuite/gfortran.dg/continuation_3.f90", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_3.f90?ref=f449022dca52d61f2f57cb40e6fc4b9b69049314", "patch": "@@ -72,8 +72,12 @@\n        \"7\" // & ! 27\n        \"8\" // & ! 28\n        \"9\" // & ! 29\n+!\n+   !\n        \"0\" // & ! 30\n        \"1\" // & ! 31\n+!\n+!\n        \"2\" // & ! 32\n        \"3\" // & ! 33\n        \"4\" // & ! 34"}, {"sha": "aeb240368cbe890485b3b64542f82ab3de60e4ea", "filename": "gcc/testsuite/gfortran.dg/continuation_5.f", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_5.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f449022dca52d61f2f57cb40e6fc4b9b69049314/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_5.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_5.f?ref=f449022dca52d61f2f57cb40e6fc4b9b69049314", "patch": "@@ -32,11 +32,19 @@\n      c \"7\" // !  7\n      c \"8\" // !  8\n      c \"9\" // !  9\n+!\n+c\n+*\n+C\n      c \"0\" // ! 10\n      c \"1\" // ! 11\n      c \"2\" // ! 12\n      c \"3\" // ! 13\n      c \"4\" // ! 14\n+c\n+ \n+ !\n+                          !\n      c \"5\" // ! 15\n      c \"6\" // ! 16\n      c \"7\" // ! 17"}]}