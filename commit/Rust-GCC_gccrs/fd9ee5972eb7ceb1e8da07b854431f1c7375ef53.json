{"sha": "fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ5ZWU1OTcyZWI3Y2ViMWU4ZGEwN2I4NTQ0MzFmMWM3Mzc1ZWY1Mw==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2011-11-20T22:26:14Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2011-11-20T22:26:14Z"}, "message": "re PR target/51235 (ICE: in extract_insn, at recog.c:2137 (unrecognizable insn) with -O -ftree-vectorize -mavx2 -mxop)\n\n\tPR target/51235\n\t* config/i386/i386.c (ix86_expand_vcond): Generate TARGET_XOP\n\tpatterns for supported mode only.\n\n\tPR target/51236\n\t* config/i386/i386.c (ix86_expand_builtin)\n\t<IX86_BUILTIN_GATHERALTSIV4DI>: Use CODE_FOR_avx2_gathersiv4di.\n\ntestsuite/ChangeLog:\n\n\tPR target/51235\n\t* gcc.target/i386/pr51235.c: New test.\n\n\tPR target/51236\n\t* gcc.target/i386/pr51236.c: New test.\n\nFrom-SVN: r181537", "tree": {"sha": "833f8577edde1311397314a2a358676fea86527b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/833f8577edde1311397314a2a358676fea86527b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "215c6c972dd84d3124a4a6f522dde47bc54fed3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/215c6c972dd84d3124a4a6f522dde47bc54fed3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/215c6c972dd84d3124a4a6f522dde47bc54fed3a"}], "stats": {"total": 57, "additions": 54, "deletions": 3}, "files": [{"sha": "9bef97dff15cc06924e88de292e2d96f959de6ef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "patch": "@@ -1,3 +1,13 @@\n+2011-11-20  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/51235\n+\t* config/i386/i386.c (ix86_expand_vcond): Generate TARGET_XOP\n+\tpatterns for supported mode only.\n+\n+\tPR target/51236\n+\t* config/i386/i386.c (ix86_expand_builtin)\n+\t<IX86_BUILTIN_GATHERALTSIV4DI>: Use CODE_FOR_avx2_gathersiv4di.\n+\n 2011-11-20  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.md (UNSPEC_MOVNTI): Remove."}, {"sha": "34368203cd9e849aad9799e3e7ccf271d4c7471f", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "patch": "@@ -19619,8 +19619,12 @@ ix86_expand_int_vcond (rtx operands[])\n   cop0 = operands[4];\n   cop1 = operands[5];\n \n-  /* XOP supports all of the comparisons on all vector int types.  */\n-  if (!TARGET_XOP)\n+  /* XOP supports all of the comparisons on all 128-bit vector int types.  */\n+  if (TARGET_XOP\n+      && (mode == V16QImode || mode == V8HImode\n+\t  || mode == V4SImode || mode == V2DImode))\n+    ;\n+  else\n     {\n       /* Canonicalize the comparison to EQ, GT, GTU.  */\n       switch (code)\n@@ -30013,7 +30017,7 @@ ix86_expand_builtin (tree exp, rtx target, rtx subtarget ATTRIBUTE_UNUSED,\n       icode = CODE_FOR_avx2_gatherdiv8sf;\n       goto gather_gen;\n     case IX86_BUILTIN_GATHERALTSIV4DI:\n-      icode = CODE_FOR_avx2_gathersiv4df;\n+      icode = CODE_FOR_avx2_gathersiv4di;\n       goto gather_gen;\n     case IX86_BUILTIN_GATHERALTDIV8SI:\n       icode = CODE_FOR_avx2_gatherdiv8si;"}, {"sha": "2a9c6d101db661f54e242493951a5e52410f216b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "patch": "@@ -1,3 +1,11 @@\n+2011-11-20  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/51235\n+\t* gcc.target/i386/pr51235.c: New test.\n+\n+\tPR target/51236\n+\t* gcc.target/i386/pr51236.c: New test.\n+\n 2011-11-20  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/discr32.adb: New test."}, {"sha": "c99d5c0e733b8476e050538f5d2c3129e70f28c7", "filename": "gcc/testsuite/gcc.target/i386/pr51235.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr51235.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr51235.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr51235.c?ref=fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -ftree-vectorize -mxop -mavx2\" } */\n+\n+void *foo (int count, void **list)\n+{\n+  void *minaddr = list[0];\n+  int i;\n+\n+  for (i = 1; i < count; i++)\n+    {\n+      void *addr = list[i];\n+      if (addr < minaddr)\n+\tminaddr = addr;\n+    }\n+\n+  return minaddr;\n+}"}, {"sha": "63bfaeeb0ebbcc96846c54ebc83bf43a77f819d5", "filename": "gcc/testsuite/gcc.target/i386/pr51236.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr51236.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd9ee5972eb7ceb1e8da07b854431f1c7375ef53/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr51236.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr51236.c?ref=fd9ee5972eb7ceb1e8da07b854431f1c7375ef53", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -ftree-vectorize -mavx2\" } */\n+\n+long foo (long *p, int i)\n+{\n+  long x = 0;\n+\n+  while (--i)\n+    x ^= p[i];\n+\n+  return x;\n+}"}]}