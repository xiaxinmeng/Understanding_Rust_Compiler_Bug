{"sha": "6c4499b675cc797b0f5efe294340263c2f45e35e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmM0NDk5YjY3NWNjNzk3YjBmNWVmZTI5NDM0MDI2M2MyZjQ1ZTM1ZQ==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2009-11-25T05:08:09Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2009-11-25T05:08:09Z"}, "message": "re PR middle-end/41193 (slow compilation with graphite / ice with graphite)\n\n2009-10-15  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* graphite-sese-to-poly.c (insert_copyin): Use gsi_insert_seq_on_edge.\n\t(rewrite_commutative_reductions_out_of_ssa): Call gsi_commit_edge_inserts,\n\tand check the SSA representation.\n\n\t* gfortran.dg/graphite/id-18.f90: New, reduced from PR41193.\n\nFrom-SVN: r154590", "tree": {"sha": "aafc699046fd250f591bab01983ea039e8fb7d09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aafc699046fd250f591bab01983ea039e8fb7d09"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c4499b675cc797b0f5efe294340263c2f45e35e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c4499b675cc797b0f5efe294340263c2f45e35e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c4499b675cc797b0f5efe294340263c2f45e35e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c4499b675cc797b0f5efe294340263c2f45e35e/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8e49fe911a3c6bd2509dd002249175a286f84436", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e49fe911a3c6bd2509dd002249175a286f84436", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e49fe911a3c6bd2509dd002249175a286f84436"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "3a0779caab0dc8b5431a44ae2b2c65a476ebf632", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c4499b675cc797b0f5efe294340263c2f45e35e/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c4499b675cc797b0f5efe294340263c2f45e35e/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=6c4499b675cc797b0f5efe294340263c2f45e35e", "patch": "@@ -1,3 +1,11 @@\n+2009-10-15  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-sese-to-poly.c (insert_copyin): Use gsi_insert_seq_on_edge.\n+\t(rewrite_commutative_reductions_out_of_ssa): Call gsi_commit_edge_inserts,\n+\tand check the SSA representation.\n+\n+\t* gfortran.dg/graphite/id-18.f90: New, reduced from PR41193.\n+\n 2009-10-15  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* gcc.dg/graphite/pr40157.c: Use -floop-block as reported in the PR."}, {"sha": "507ab2452639bae0567856882d5b83158791667d", "filename": "gcc/graphite-sese-to-poly.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c4499b675cc797b0f5efe294340263c2f45e35e/gcc%2Fgraphite-sese-to-poly.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c4499b675cc797b0f5efe294340263c2f45e35e/gcc%2Fgraphite-sese-to-poly.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-sese-to-poly.c?ref=6c4499b675cc797b0f5efe294340263c2f45e35e", "patch": "@@ -2591,13 +2591,10 @@ insert_copyin (tree red, gimple loop_phi)\n {\n   gimple_seq stmts;\n   tree init = initial_value_for_loop_phi (loop_phi);\n-  edge e = edge_initial_value_for_loop_phi (loop_phi);\n-  basic_block bb = e->src;\n-  gimple_stmt_iterator insert_gsi = gsi_last_bb (bb);\n   tree expr = build2 (MODIFY_EXPR, TREE_TYPE (init), red, init);\n \n   force_gimple_operand (expr, &stmts, true, NULL);\n-  gsi_insert_seq_before (&insert_gsi, stmts, GSI_SAME_STMT);\n+  gsi_insert_seq_on_edge (edge_initial_value_for_loop_phi (loop_phi), stmts);\n }\n \n /* Rewrite out of SSA the reduction described by the loop phi nodes\n@@ -2697,6 +2694,13 @@ rewrite_commutative_reductions_out_of_ssa (sese region, sbitmap reductions)\n   FOR_EACH_LOOP (li, loop, 0)\n     if (loop_in_sese_p (loop, region))\n       rewrite_commutative_reductions_out_of_ssa_loop (loop, reductions);\n+\n+  gsi_commit_edge_inserts ();\n+  update_ssa (TODO_update_ssa);\n+#ifdef ENABLE_CHECKING\n+  verify_ssa (false);\n+  verify_loop_closed_ssa ();\n+#endif\n }\n \n /* Builds the polyhedral representation for a SESE region.  */"}]}