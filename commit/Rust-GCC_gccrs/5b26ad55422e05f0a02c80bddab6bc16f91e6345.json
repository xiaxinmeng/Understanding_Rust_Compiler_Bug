{"sha": "5b26ad55422e05f0a02c80bddab6bc16f91e6345", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIyNmFkNTU0MjJlMDVmMGEwMmM4MGJkZGFiNmJjMTZmOTFlNjM0NQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-15T22:08:44Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-15T22:08:44Z"}, "message": "Permit _ as a result variable name.\n\nFrom-SVN: r167877", "tree": {"sha": "0bcf4943de772b8c4a8ae55e1cdadbb130fc8410", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0bcf4943de772b8c4a8ae55e1cdadbb130fc8410"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b26ad55422e05f0a02c80bddab6bc16f91e6345", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b26ad55422e05f0a02c80bddab6bc16f91e6345", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b26ad55422e05f0a02c80bddab6bc16f91e6345", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b26ad55422e05f0a02c80bddab6bc16f91e6345/comments", "author": null, "committer": null, "parents": [{"sha": "354bc607c125d20218b0b7fd12e6903df40e5880", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/354bc607c125d20218b0b7fd12e6903df40e5880", "html_url": "https://github.com/Rust-GCC/gccrs/commit/354bc607c125d20218b0b7fd12e6903df40e5880"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "39072e075b1f7a0be2e15ac7e16426a51fdbae03", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b26ad55422e05f0a02c80bddab6bc16f91e6345/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b26ad55422e05f0a02c80bddab6bc16f91e6345/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=5b26ad55422e05f0a02c80bddab6bc16f91e6345", "patch": "@@ -640,7 +640,7 @@ Gogo::start_function(const std::string& name, Function_type* type,\n \t}\n     }\n \n-  function->create_named_result_variables();\n+  function->create_named_result_variables(this);\n \n   const std::string* pname;\n   std::string nested_name;\n@@ -2473,7 +2473,7 @@ Function::Function(Function_type* type, Function* enclosing, Block* block,\n // Create the named result variables.\n \n void\n-Function::create_named_result_variables()\n+Function::create_named_result_variables(Gogo* gogo)\n {\n   const Typed_identifier_list* results = this->type_->results();\n   if (results == NULL\n@@ -2490,10 +2490,17 @@ Function::create_named_result_variables()\n        p != results->end();\n        ++p, ++index)\n     {\n-      Result_variable* result = new Result_variable(p->type(), this,\n-\t\t\t\t\t\t    index);\n-      Named_object* no = block->bindings()->add_result_variable(p->name(),\n-\t\t\t\t\t\t\t\tresult);\n+      std::string name = p->name();\n+      if (Gogo::is_sink_name(name))\n+\t{\n+\t  static int unnamed_result_counter;\n+\t  char buf[100];\n+\t  snprintf(buf, sizeof buf, \"_$%d\", unnamed_result_counter);\n+\t  ++unnamed_result_counter;\n+\t  name = gogo->pack_hidden_name(buf, false);\n+\t}\n+      Result_variable* result = new Result_variable(p->type(), this, index);\n+      Named_object* no = block->bindings()->add_result_variable(name, result);\n       this->named_results_->push_back(no);\n     }\n }"}, {"sha": "49f1be51468519347bba9016940b20cb7461226e", "filename": "gcc/go/gofrontend/gogo.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b26ad55422e05f0a02c80bddab6bc16f91e6345/gcc%2Fgo%2Fgofrontend%2Fgogo.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b26ad55422e05f0a02c80bddab6bc16f91e6345/gcc%2Fgo%2Fgofrontend%2Fgogo.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.h?ref=5b26ad55422e05f0a02c80bddab6bc16f91e6345", "patch": "@@ -785,7 +785,7 @@ class Function\n \n   // Create the named result variables in the outer block.\n   void\n-  create_named_result_variables();\n+  create_named_result_variables(Gogo*);\n \n   // Add a new field to the closure variable.\n   void"}]}