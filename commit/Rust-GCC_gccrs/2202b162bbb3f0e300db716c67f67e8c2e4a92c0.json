{"sha": "2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjIwMmIxNjJiYmIzZjBlMzAwZGI3MTZjNjdmNjdlOGMyZTRhOTJjMA==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2018-09-26T15:17:32Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2018-09-26T15:17:32Z"}, "message": "i386.h (enum reg_class): Remove FP_TOP_SSE_REGS and FP_SECOND_SSE_REGS.\n\n\t* config/i386/i386.h (enum reg_class): Remove FP_TOP_SSE_REGS\n\tand FP_SECOND_SSE_REGS.\n\t(REG_CLASS_NAMES): Ditto.\n\t(REG_CLASS_CONTENTS): Ditto.\n\t* config/i386/i386.c (ix86_preferred_reload_class) Do not handle\n\tFP_TOP_SSE_REGS and FP_SECOND_SSE_REGS classes.\n\t(ix86_preferred_output_reload_class): Ditto.\n\t* config/i386/i386.md (fix_trunc<mode>_i387_fisttp): Change \"=&1f\"\n\tclobber constraint to \"=&f\".\n\t(fix_truncdi_i387): Ditto.\n\t(lrintxfdi2): Ditto.\n\t(fistdi2_<rounding>): Ditto.\n\t(fpremxf4_i387): Change \"=u\" constraint to \"=f\".\n\t(fprem1xf4_i387): Ditto.\n\t(sincosxf3): Ditto.\n\t(fptanxf4_i387): Ditto.\n\t(fxtractxf3_i387): Ditto.\n\t(fscalexf4_i387): Ditto.\n\t(atan2xf3): Change \"u\" constraint to \"f\".\n\t(fyl2xxf3_i387): Ditto.\n\t(fyl2xp1xf3_i387): Ditto.\n\nFrom-SVN: r264648", "tree": {"sha": "a6218fb783e22dab05d9f9568c2c2acf6a54dc88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6218fb783e22dab05d9f9568c2c2acf6a54dc88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dd554b787d0280566e891dba9e19dd718e68d42a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd554b787d0280566e891dba9e19dd718e68d42a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd554b787d0280566e891dba9e19dd718e68d42a"}], "stats": {"total": 69, "additions": 38, "deletions": 31}, "files": [{"sha": "134362ea34a8a748f87f69593b91932dc704d7cd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "patch": "@@ -1,3 +1,27 @@\n+2018-09-26  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386.h (enum reg_class): Remove FP_TOP_SSE_REGS\n+\tand FP_SECOND_SSE_REGS.\n+\t(REG_CLASS_NAMES): Ditto.\n+\t(REG_CLASS_CONTENTS): Ditto.\n+\t* config/i386/i386.c (ix86_preferred_reload_class) Do not handle\n+\tFP_TOP_SSE_REGS and FP_SECOND_SSE_REGS classes.\n+\t(ix86_preferred_output_reload_class): Ditto.\n+\t* config/i386/i386.md (fix_trunc<mode>_i387_fisttp): Change \"=&1f\"\n+\tclobber constraint to \"=&f\".\n+\t(fix_truncdi_i387): Ditto.\n+\t(lrintxfdi2): Ditto.\n+\t(fistdi2_<rounding>): Ditto.\n+\t(fpremxf4_i387): Change \"=u\" constraint to \"=f\".\n+\t(fprem1xf4_i387): Ditto.\n+\t(sincosxf3): Ditto.\n+\t(fptanxf4_i387): Ditto.\n+\t(fxtractxf3_i387): Ditto.\n+\t(fscalexf4_i387): Ditto.\n+\t(atan2xf3): Change \"u\" constraint to \"f\".\n+\t(fyl2xxf3_i387): Ditto.\n+\t(fyl2xp1xf3_i387): Ditto.\n+\n 2018-09-26  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/87439"}, {"sha": "a79cfb5f0e29bb530747f871e9e2db16890ce185", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "patch": "@@ -39043,10 +39043,6 @@ ix86_preferred_reload_class (rtx x, reg_class_t regclass)\n \t  /* Limit class to FP regs.  */\n \t  if (FLOAT_CLASS_P (regclass))\n \t    return FLOAT_REGS;\n-\t  else if (regclass == FP_TOP_SSE_REGS)\n-\t    return FP_TOP_REG;\n-\t  else if (regclass == FP_SECOND_SSE_REGS)\n-\t    return FP_SECOND_REG;\n \t}\n \n       return NO_REGS;\n@@ -39092,14 +39088,7 @@ ix86_preferred_output_reload_class (rtx x, reg_class_t regclass)\n     return MAYBE_SSE_CLASS_P (regclass) ? ALL_SSE_REGS : NO_REGS;\n \n   if (IS_STACK_MODE (mode))\n-    {\n-      if (regclass == FP_TOP_SSE_REGS)\n-\treturn FP_TOP_REG;\n-      else if (regclass == FP_SECOND_SSE_REGS)\n-\treturn FP_SECOND_REG;\n-      else\n-\treturn FLOAT_CLASS_P (regclass) ? regclass : NO_REGS;\n-    }\n+    return FLOAT_CLASS_P (regclass) ? regclass : NO_REGS;\n \n   return regclass;\n }"}, {"sha": "6445ee5d50afa7591da469e19519a20c7deb3b39", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "patch": "@@ -1337,8 +1337,6 @@ enum reg_class\n   SSE_REGS,\n   ALL_SSE_REGS,\n   MMX_REGS,\n-  FP_TOP_SSE_REGS,\n-  FP_SECOND_SSE_REGS,\n   FLOAT_SSE_REGS,\n   FLOAT_INT_REGS,\n   INT_SSE_REGS,\n@@ -1398,8 +1396,6 @@ enum reg_class\n    \"SSE_REGS\",\t\t\t\t\\\n    \"ALL_SSE_REGS\",\t\t\t\\\n    \"MMX_REGS\",\t\t\t\t\\\n-   \"FP_TOP_SSE_REGS\",\t\t\t\\\n-   \"FP_SECOND_SSE_REGS\",\t\t\\\n    \"FLOAT_SSE_REGS\",\t\t\t\\\n    \"FLOAT_INT_REGS\",\t\t\t\\\n    \"INT_SSE_REGS\",\t\t\t\\\n@@ -1438,8 +1434,6 @@ enum reg_class\n { 0x1fe00000,   0x1fe000,    0x0 },\t/* SSE_REGS */\t\t\t\\\n { 0x1fe00000, 0xffffe000,   0x1f },\t/* ALL_SSE_REGS */\t\t\\\n { 0xe0000000,       0x1f,    0x0 },\t/* MMX_REGS */\t\t\t\\\n-{ 0x1fe00100, 0xffffe000,   0x1f },\t/* FP_TOP_SSE_REG */\t\t\\\n-{ 0x1fe00200, 0xffffe000,   0x1f },\t/* FP_SECOND_SSE_REG */\t\t\\\n { 0x1fe0ff00, 0xffffe000,   0x1f },\t/* FLOAT_SSE_REGS */\t\t\\\n {   0x11ffff,     0x1fe0,    0x0 },\t/* FLOAT_INT_REGS */\t\t\\\n { 0x1ff100ff, 0xffffffe0,   0x1f },\t/* INT_SSE_REGS */\t\t\\"}, {"sha": "86f2c032e1b8ae620a2d572c668a99a8ca918d5c", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2202b162bbb3f0e300db716c67f67e8c2e4a92c0/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=2202b162bbb3f0e300db716c67f67e8c2e4a92c0", "patch": "@@ -4973,7 +4973,7 @@\n (define_insn \"fix_trunc<mode>_i387_fisttp\"\n   [(set (match_operand:SWI248x 0 \"nonimmediate_operand\" \"=m\")\n \t(fix:SWI248x (match_operand 1 \"register_operand\" \"f\")))\n-   (clobber (match_scratch:XF 2 \"=&1f\"))]\n+   (clobber (match_scratch:XF 2 \"=&f\"))]\n   \"X87_FLOAT_MODE_P (GET_MODE (operands[1]))\n    && TARGET_FISTTP\n    && !((SSE_FLOAT_MODE_P (GET_MODE (operands[1]))\n@@ -5019,7 +5019,7 @@\n \t(fix:DI (match_operand 1 \"register_operand\" \"f\")))\n    (use (match_operand:HI 2 \"memory_operand\" \"m\"))\n    (use (match_operand:HI 3 \"memory_operand\" \"m\"))\n-   (clobber (match_scratch:XF 4 \"=&1f\"))]\n+   (clobber (match_scratch:XF 4 \"=&f\"))]\n   \"X87_FLOAT_MODE_P (GET_MODE (operands[1]))\n    && !TARGET_FISTTP\n    && !(TARGET_64BIT && SSE_FLOAT_MODE_P (GET_MODE (operands[1])))\"\n@@ -15178,7 +15178,7 @@\n \t(unspec:XF [(match_operand:XF 2 \"register_operand\" \"0\")\n \t\t    (match_operand:XF 3 \"register_operand\" \"1\")]\n \t\t   UNSPEC_FPREM_F))\n-   (set (match_operand:XF 1 \"register_operand\" \"=u\")\n+   (set (match_operand:XF 1 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_dup 2) (match_dup 3)]\n \t\t   UNSPEC_FPREM_U))\n    (set (reg:CCFP FPSR_REG)\n@@ -15253,7 +15253,7 @@\n \t(unspec:XF [(match_operand:XF 2 \"register_operand\" \"0\")\n \t\t    (match_operand:XF 3 \"register_operand\" \"1\")]\n \t\t   UNSPEC_FPREM1_F))\n-   (set (match_operand:XF 1 \"register_operand\" \"=u\")\n+   (set (match_operand:XF 1 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_dup 2) (match_dup 3)]\n \t\t   UNSPEC_FPREM1_U))\n    (set (reg:CCFP FPSR_REG)\n@@ -15365,7 +15365,7 @@\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_operand:XF 2 \"register_operand\" \"0\")]\n \t\t   UNSPEC_SINCOS_COS))\n-   (set (match_operand:XF 1 \"register_operand\" \"=u\")\n+   (set (match_operand:XF 1 \"register_operand\" \"=f\")\n         (unspec:XF [(match_dup 2)] UNSPEC_SINCOS_SIN))]\n   \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n@@ -15397,7 +15397,7 @@\n (define_insn \"fptanxf4_i387\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(match_operand:SF 3 \"const1_operand\"))\n-   (set (match_operand:XF 1 \"register_operand\" \"=u\")\n+   (set (match_operand:XF 1 \"register_operand\" \"=f\")\n         (unspec:XF [(match_operand:XF 2 \"register_operand\" \"0\")]\n \t\t   UNSPEC_TAN))]\n   \"TARGET_USE_FANCY_MATH_387\n@@ -15439,7 +15439,7 @@\n (define_insn \"atan2xf3\"\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n         (unspec:XF [(match_operand:XF 1 \"register_operand\" \"0\")\n-\t            (match_operand:XF 2 \"register_operand\" \"u\")]\n+\t            (match_operand:XF 2 \"register_operand\" \"f\")]\n \t           UNSPEC_FPATAN))\n    (clobber (match_scratch:XF 3 \"=2\"))]\n   \"TARGET_USE_FANCY_MATH_387\n@@ -15576,7 +15576,7 @@\n (define_insn \"fyl2xxf3_i387\"\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n         (unspec:XF [(match_operand:XF 1 \"register_operand\" \"0\")\n-\t\t    (match_operand:XF 2 \"register_operand\" \"u\")]\n+\t\t    (match_operand:XF 2 \"register_operand\" \"f\")]\n \t           UNSPEC_FYL2X))\n    (clobber (match_scratch:XF 3 \"=2\"))]\n   \"TARGET_USE_FANCY_MATH_387\n@@ -15673,7 +15673,7 @@\n (define_insn \"fyl2xp1xf3_i387\"\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n         (unspec:XF [(match_operand:XF 1 \"register_operand\" \"0\")\n-\t\t    (match_operand:XF 2 \"register_operand\" \"u\")]\n+\t\t    (match_operand:XF 2 \"register_operand\" \"f\")]\n \t           UNSPEC_FYL2XP1))\n    (clobber (match_scratch:XF 3 \"=2\"))]\n   \"TARGET_USE_FANCY_MATH_387\n@@ -15714,7 +15714,7 @@\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_operand:XF 2 \"register_operand\" \"0\")]\n \t\t   UNSPEC_XTRACT_FRACT))\n-   (set (match_operand:XF 1 \"register_operand\" \"=u\")\n+   (set (match_operand:XF 1 \"register_operand\" \"=f\")\n         (unspec:XF [(match_dup 2)] UNSPEC_XTRACT_EXP))]\n   \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n@@ -15808,7 +15808,7 @@\n \t(unspec:XF [(match_operand:XF 2 \"register_operand\" \"0\")\n \t\t    (match_operand:XF 3 \"register_operand\" \"1\")]\n \t\t   UNSPEC_FSCALE_FRACT))\n-   (set (match_operand:XF 1 \"register_operand\" \"=u\")\n+   (set (match_operand:XF 1 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_dup 2) (match_dup 3)]\n \t\t   UNSPEC_FSCALE_EXP))]\n   \"TARGET_USE_FANCY_MATH_387\n@@ -16193,7 +16193,7 @@\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=m\")\n \t(unspec:DI [(match_operand:XF 1 \"register_operand\" \"f\")]\n \t\t   UNSPEC_FIST))\n-   (clobber (match_scratch:XF 2 \"=&1f\"))]\n+   (clobber (match_scratch:XF 2 \"=&f\"))]\n   \"TARGET_USE_FANCY_MATH_387\"\n   \"* return output_fix_trunc (insn, operands, false);\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -16404,7 +16404,7 @@\n \t\t   FIST_ROUNDING))\n    (use (match_operand:HI 2 \"memory_operand\" \"m\"))\n    (use (match_operand:HI 3 \"memory_operand\" \"m\"))\n-   (clobber (match_scratch:XF 4 \"=&1f\"))]\n+   (clobber (match_scratch:XF 4 \"=&f\"))]\n   \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"* return output_fix_trunc (insn, operands, false);\""}]}