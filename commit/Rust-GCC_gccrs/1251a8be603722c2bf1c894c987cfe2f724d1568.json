{"sha": "1251a8be603722c2bf1c894c987cfe2f724d1568", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTI1MWE4YmU2MDM3MjJjMmJmMWM4OTRjOTg3Y2ZlMmY3MjRkMTU2OA==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2014-02-19T11:52:39Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2014-02-19T11:52:39Z"}, "message": "re PR fortran/60232 ([OOP] The rank of the element in the structure constructor does not match that of the component)\n\n2014-02-19  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/60232\n\t* expr.c (gfc_get_variable_expr): Don't add REF_ARRAY for dimensionful\n\tfunctions, which are used as procedure pointer target.\n\n\n2014-02-19  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/60232\n\t* gfortran.dg/typebound_proc_33.f90: New.\n\nFrom-SVN: r207896", "tree": {"sha": "e5c4bbf0826117aa74b28f32f66bd01e9eecd6c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5c4bbf0826117aa74b28f32f66bd01e9eecd6c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1251a8be603722c2bf1c894c987cfe2f724d1568", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1251a8be603722c2bf1c894c987cfe2f724d1568", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1251a8be603722c2bf1c894c987cfe2f724d1568", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1251a8be603722c2bf1c894c987cfe2f724d1568/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "476b301a0c62213400f5208c55a2a0f1120790ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/476b301a0c62213400f5208c55a2a0f1120790ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/476b301a0c62213400f5208c55a2a0f1120790ce"}], "stats": {"total": 57, "additions": 54, "deletions": 3}, "files": [{"sha": "b0c0c573bba0bf0771830aa6ba3eec1a8afa2f12", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1251a8be603722c2bf1c894c987cfe2f724d1568", "patch": "@@ -1,3 +1,9 @@\n+2014-02-19  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/60232\n+\t* expr.c (gfc_get_variable_expr): Don't add REF_ARRAY for dimensionful\n+\tfunctions, which are used as procedure pointer target.\n+\n 2014-02-18  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/49397"}, {"sha": "fe92c53a45304325759f7a1822f1a89da7a25d3b", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=1251a8be603722c2bf1c894c987cfe2f724d1568", "patch": "@@ -3972,9 +3972,10 @@ gfc_get_variable_expr (gfc_symtree *var)\n   e->symtree = var;\n   e->ts = var->n.sym->ts;\n \n-  if ((var->n.sym->as != NULL && var->n.sym->ts.type != BT_CLASS)\n-      || (var->n.sym->ts.type == BT_CLASS && CLASS_DATA (var->n.sym)\n-\t  && CLASS_DATA (var->n.sym)->as))\n+  if (var->n.sym->attr.flavor != FL_PROCEDURE\n+      && ((var->n.sym->as != NULL && var->n.sym->ts.type != BT_CLASS)\n+\t   || (var->n.sym->ts.type == BT_CLASS && CLASS_DATA (var->n.sym)\n+\t       && CLASS_DATA (var->n.sym)->as)))\n     {\n       e->rank = var->n.sym->ts.type == BT_CLASS\n \t\t? CLASS_DATA (var->n.sym)->as->rank : var->n.sym->as->rank;"}, {"sha": "da20072bdfca0c6ece9bb39266ec8d95a5dd7d25", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1251a8be603722c2bf1c894c987cfe2f724d1568", "patch": "@@ -1,3 +1,8 @@\n+2014-02-19  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/60232\n+\t* gfortran.dg/typebound_proc_33.f90: New.\n+\n 2014-02-19  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/60195"}, {"sha": "68ea53fcd115a158f772e3b028aa9726401f1f4c", "filename": "gcc/testsuite/gfortran.dg/typebound_proc_33.f90", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_proc_33.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1251a8be603722c2bf1c894c987cfe2f724d1568/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_proc_33.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_proc_33.f90?ref=1251a8be603722c2bf1c894c987cfe2f724d1568", "patch": "@@ -0,0 +1,39 @@\n+! { dg-do compile }\n+!\n+! PR 60232: [OOP] The rank of the element in the structure constructor does not match that of the component\n+!\n+! Contributed by Antony Lewis <antony@cosmologist.info>\n+\n+module ObjectLists\n+  implicit none\n+\n+  Type TObjectList\n+  contains\n+    procedure :: ArrayItem\n+  end Type\n+\n+contains\n+\n+  function ArrayItem(L) result(P)\n+    Class(TObjectList) :: L\n+    Class(TObjectList), pointer :: P(:)\n+  end function\n+\n+end module\n+\n+\n+  use ObjectLists\n+  implicit none\n+\n+  Type, extends(TObjectList):: TSampleList\n+  end Type\n+\n+contains\n+\n+  subroutine TSampleList_ConfidVal(L)\n+    Class(TSampleList) :: L\n+  end subroutine\n+\n+end\n+\n+! { dg-final { cleanup-modules \"ObjectLists\" } }"}]}