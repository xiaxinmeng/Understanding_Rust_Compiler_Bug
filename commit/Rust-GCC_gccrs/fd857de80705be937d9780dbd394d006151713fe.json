{"sha": "fd857de80705be937d9780dbd394d006151713fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ4NTdkZTgwNzA1YmU5MzdkOTc4MGRiZDM5NGQwMDYxNTE3MTNmZQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-03-17T09:26:08Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-03-17T09:45:35Z"}, "message": "c: ignore initializers for elements of variable-size types [PR93577]\n\n2020-03-17  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tgcc/\n\t* c-typeck.c (process_init_element): Handle constructor_type with\n\ttype size represented by POLY_INT_CST.\n\n\tgcc/testsuite/\n\t* gcc.target/aarch64/sve/acle/general-c/sizeless-1.c: Remove\n\tsuperfluous dg-error.\n\t* gcc.target/aarch64/sve/acle/general-c/sizeless-2.c: Likewise.", "tree": {"sha": "8adeb3366cbadd565584dbc8224670a26d7981cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8adeb3366cbadd565584dbc8224670a26d7981cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd857de80705be937d9780dbd394d006151713fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd857de80705be937d9780dbd394d006151713fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd857de80705be937d9780dbd394d006151713fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd857de80705be937d9780dbd394d006151713fe/comments", "author": null, "committer": null, "parents": [{"sha": "741ff2a263fe0ddc343288331c0047c1a32af8b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/741ff2a263fe0ddc343288331c0047c1a32af8b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/741ff2a263fe0ddc343288331c0047c1a32af8b2"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "06c7db0245a4697afc385ffc5793567874639f00", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd857de80705be937d9780dbd394d006151713fe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd857de80705be937d9780dbd394d006151713fe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fd857de80705be937d9780dbd394d006151713fe", "patch": "@@ -1,3 +1,8 @@\n+2020-03-17  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\t* c-typeck.c (process_init_element): Handle constructor_type with\n+\ttype size represented by POLY_INT_CST.\n+\n 2020-03-17  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/94187"}, {"sha": "490d8fc5f4a4a5c0f8ddc28b86af7947ef12aa06", "filename": "gcc/c/c-typeck.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd857de80705be937d9780dbd394d006151713fe/gcc%2Fc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd857de80705be937d9780dbd394d006151713fe/gcc%2Fc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-typeck.c?ref=fd857de80705be937d9780dbd394d006151713fe", "patch": "@@ -9968,7 +9968,7 @@ process_init_element (location_t loc, struct c_expr value, bool implicit,\n   /* Ignore elements of an initializer for a variable-size type.\n      Those are diagnosed in digest_init.  */\n   if (COMPLETE_TYPE_P (constructor_type)\n-      && TREE_CODE (TYPE_SIZE (constructor_type)) != INTEGER_CST)\n+      && !poly_int_tree_p (TYPE_SIZE (constructor_type)))\n     return;\n \n   if (!implicit && warn_designated_init && !was_designated"}, {"sha": "aaf973a206c8bf64d64c98877d3ae2813043cfc7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd857de80705be937d9780dbd394d006151713fe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd857de80705be937d9780dbd394d006151713fe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fd857de80705be937d9780dbd394d006151713fe", "patch": "@@ -1,3 +1,9 @@\n+2020-03-17  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\t* gcc.target/aarch64/sve/acle/general-c/sizeless-1.c: Remove\n+\tsuperfluous dg-error.\n+\t* gcc.target/aarch64/sve/acle/general-c/sizeless-2.c: Likewise.\n+\n 2020-03-17  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/94189"}, {"sha": "7fc51e7ad1859023e3afb25239ac192b85cdbe8c", "filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/sizeless-1.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd857de80705be937d9780dbd394d006151713fe/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Fsizeless-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd857de80705be937d9780dbd394d006151713fe/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Fsizeless-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Fsizeless-1.c?ref=fd857de80705be937d9780dbd394d006151713fe", "patch": "@@ -83,7 +83,6 @@ statements (int n)\n   svint8_t array[2]; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n   svint8_t zero_length_array[0]; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n   svint8_t empty_init_array[] = {}; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n-  \t\t\t\t    /* { dg-error {empty scalar initializer} \"\" { target *-*-* } .-1 } */\n   typedef svint8_t vla_type[n]; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n \n   /* Assignment.  */"}, {"sha": "3af36de99945daee603eab327738227f5971e3c4", "filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/sizeless-2.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd857de80705be937d9780dbd394d006151713fe/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Fsizeless-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd857de80705be937d9780dbd394d006151713fe/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Fsizeless-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Fsizeless-2.c?ref=fd857de80705be937d9780dbd394d006151713fe", "patch": "@@ -83,7 +83,6 @@ statements (int n)\n   svint8_t array[2]; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n   svint8_t zero_length_array[0]; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n   svint8_t empty_init_array[] = {}; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n-  \t\t\t\t    /* { dg-error {empty scalar initializer} \"\" { target *-*-* } .-1 } */\n   typedef svint8_t vla_type[n]; /* { dg-error {array elements cannot have SVE type 'svint8_t'} } */\n \n   /* Assignment.  */"}]}