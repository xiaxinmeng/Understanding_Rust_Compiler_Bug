{"sha": "da7674f6a6bd485ee250f1dcd53daec68090827e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE3Njc0ZjZhNmJkNDg1ZWUyNTBmMWRjZDUzZGFlYzY4MDkwODI3ZQ==", "commit": {"author": {"name": "Ilya Enkovich", "email": "ilya.enkovich@intel.com", "date": "2016-05-13T09:55:58Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2016-05-13T09:55:58Z"}, "message": "cse.c (rest_of_handle_cse): Use cleanup_cfg returned value cse_cfg_altered computation.\n\ngcc/\n\n\t* cse.c (rest_of_handle_cse): Use cleanup_cfg\n\treturned value cse_cfg_altered computation.\n\t(rest_of_handle_cse2): Likewise.\n\t(rest_of_handle_cse_after_global_opts): Likewise.\n\ngcc/testsuite/\n\n\t* gcc.dg/pr71084.c: New test.\n\nFrom-SVN: r236199", "tree": {"sha": "abfd6b8beb45cb61957f2b753e3353f06e762297", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/abfd6b8beb45cb61957f2b753e3353f06e762297"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da7674f6a6bd485ee250f1dcd53daec68090827e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da7674f6a6bd485ee250f1dcd53daec68090827e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da7674f6a6bd485ee250f1dcd53daec68090827e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da7674f6a6bd485ee250f1dcd53daec68090827e/comments", "author": {"login": "ienkovich", "id": 18308708, "node_id": "MDQ6VXNlcjE4MzA4NzA4", "avatar_url": "https://avatars.githubusercontent.com/u/18308708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ienkovich", "html_url": "https://github.com/ienkovich", "followers_url": "https://api.github.com/users/ienkovich/followers", "following_url": "https://api.github.com/users/ienkovich/following{/other_user}", "gists_url": "https://api.github.com/users/ienkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ienkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ienkovich/subscriptions", "organizations_url": "https://api.github.com/users/ienkovich/orgs", "repos_url": "https://api.github.com/users/ienkovich/repos", "events_url": "https://api.github.com/users/ienkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/ienkovich/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c959db3d3b344fa2e21fdd79768e2349d7c2db25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c959db3d3b344fa2e21fdd79768e2349d7c2db25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c959db3d3b344fa2e21fdd79768e2349d7c2db25"}], "stats": {"total": 61, "additions": 55, "deletions": 6}, "files": [{"sha": "0346cbc9ee1c83436a6bb1aa1b3ff4803487dd42", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=da7674f6a6bd485ee250f1dcd53daec68090827e", "patch": "@@ -1,3 +1,10 @@\n+2016-05-13  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\t* cse.c (rest_of_handle_cse): Use cleanup_cfg\n+\treturned value cse_cfg_altered computation.\n+\t(rest_of_handle_cse2): Likewise.\n+\t(rest_of_handle_cse_after_global_opts): Likewise.\n+\n 2016-05-13  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n \n         PR target/53440"}, {"sha": "322e35270d816d695871df07e023525078b0f7ab", "filename": "gcc/cse.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=da7674f6a6bd485ee250f1dcd53daec68090827e", "patch": "@@ -7562,11 +7562,11 @@ rest_of_handle_cse (void)\n     {\n       timevar_push (TV_JUMP);\n       rebuild_jump_labels (get_insns ());\n-      cleanup_cfg (CLEANUP_CFG_CHANGED);\n+      cse_cfg_altered |= cleanup_cfg (CLEANUP_CFG_CHANGED);\n       timevar_pop (TV_JUMP);\n     }\n   else if (tem == 1 || optimize > 1)\n-    cleanup_cfg (0);\n+    cse_cfg_altered |= cleanup_cfg (0);\n \n   if (cse_cfg_altered && dom_info_available_p (CDI_DOMINATORS))\n     free_dominance_info (CDI_DOMINATORS);\n@@ -7634,11 +7634,11 @@ rest_of_handle_cse2 (void)\n     {\n       timevar_push (TV_JUMP);\n       rebuild_jump_labels (get_insns ());\n-      cleanup_cfg (CLEANUP_CFG_CHANGED);\n+      cse_cfg_altered |= cleanup_cfg (CLEANUP_CFG_CHANGED);\n       timevar_pop (TV_JUMP);\n     }\n   else if (tem == 1)\n-    cleanup_cfg (0);\n+    cse_cfg_altered |= cleanup_cfg (0);\n \n   if (cse_cfg_altered && dom_info_available_p (CDI_DOMINATORS))\n     free_dominance_info (CDI_DOMINATORS);\n@@ -7711,11 +7711,11 @@ rest_of_handle_cse_after_global_opts (void)\n     {\n       timevar_push (TV_JUMP);\n       rebuild_jump_labels (get_insns ());\n-      cleanup_cfg (CLEANUP_CFG_CHANGED);\n+      cse_cfg_altered |= cleanup_cfg (CLEANUP_CFG_CHANGED);\n       timevar_pop (TV_JUMP);\n     }\n   else if (tem == 1)\n-    cleanup_cfg (0);\n+    cse_cfg_altered |= cleanup_cfg (0);\n \n   if (cse_cfg_altered && dom_info_available_p (CDI_DOMINATORS))\n     free_dominance_info (CDI_DOMINATORS);"}, {"sha": "4547ce31916b4a9c6161b035f906944946ef4b45", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=da7674f6a6bd485ee250f1dcd53daec68090827e", "patch": "@@ -1,3 +1,7 @@\n+2016-05-13  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\t* gcc.dg/pr71084.c: New test.\n+\n 2016-05-13  Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n \n         PR target/53440"}, {"sha": "46fdf9fbe5c25f2f99651d4cb898920bda9a29b6", "filename": "gcc/testsuite/gcc.dg/pr71084.c", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71084.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da7674f6a6bd485ee250f1dcd53daec68090827e/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71084.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71084.c?ref=da7674f6a6bd485ee250f1dcd53daec68090827e", "patch": "@@ -0,0 +1,38 @@\n+/* PR tree-optimization/71084 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+void babl_format (void);\n+void gimp_drawable_get_format (void);\n+int _setjmp (void);\n+\n+enum {\n+  GIMP_RGB_IMAGE,\n+  GIMP_RGBA_IMAGE,\n+  GIMP_GRAY_IMAGE,\n+  GIMP_GRAYA_IMAGE,\n+  GIMP_INDEXED_IMAGE\n+} run_i;\n+\n+int run_height;\n+\n+void fn1 ()\n+{\n+  int type, width;\n+  if (_setjmp ())\n+    switch (type)\n+      {\n+      case GIMP_RGB_IMAGE:\n+\tbabl_format ();\n+      case GIMP_RGBA_IMAGE:\n+      case GIMP_GRAY_IMAGE:\n+\tbabl_format ();\n+      case GIMP_GRAYA_IMAGE:\n+      case GIMP_INDEXED_IMAGE:\n+\tgimp_drawable_get_format();\n+      }\n+  for (; run_height;)\n+    for (; run_i < (long)fn1; ++run_i)\n+      for (; width;)\n+        ;\n+}"}]}