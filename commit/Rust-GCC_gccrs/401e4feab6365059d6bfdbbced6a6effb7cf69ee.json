{"sha": "401e4feab6365059d6bfdbbced6a6effb7cf69ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAxZTRmZWFiNjM2NTA1OWQ2YmZkYmJjZWQ2YTZlZmZiN2NmNjllZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-12-21T22:37:23Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-12-21T22:37:23Z"}, "message": "re PR target/46880 (generating of shufpd is broken)\n\n\tPR target/46880\n\t* config/i386/sse.md (sse2_loadlpd, sse2_movsd): Fix shufpd source\n\toperand.\n\n\t* gcc.target/i386/pr46880.c: New test.\n\nFrom-SVN: r168135", "tree": {"sha": "02e1aec91a45dc7debada0d82f5698e4cd7a13d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/02e1aec91a45dc7debada0d82f5698e4cd7a13d2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/401e4feab6365059d6bfdbbced6a6effb7cf69ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/401e4feab6365059d6bfdbbced6a6effb7cf69ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/401e4feab6365059d6bfdbbced6a6effb7cf69ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/401e4feab6365059d6bfdbbced6a6effb7cf69ee/comments", "author": null, "committer": null, "parents": [{"sha": "31e1ba2e2a6419ce69489c63b57aa33bee12e280", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31e1ba2e2a6419ce69489c63b57aa33bee12e280", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31e1ba2e2a6419ce69489c63b57aa33bee12e280"}], "stats": {"total": 45, "additions": 42, "deletions": 3}, "files": [{"sha": "133b65bbf0b6ef07d08c628bcabdc570d907e0e9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=401e4feab6365059d6bfdbbced6a6effb7cf69ee", "patch": "@@ -1,3 +1,9 @@\n+2010-12-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/46880\n+\t* config/i386/sse.md (sse2_loadlpd, sse2_movsd): Fix shufpd source\n+\toperand.\n+\n 2010-12-21  Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/47001"}, {"sha": "a942a2b1717c61815f10b73d656cacb3fffc6a95", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=401e4feab6365059d6bfdbbced6a6effb7cf69ee", "patch": "@@ -4990,7 +4990,7 @@\n    movsd\\t{%2, %0|%0, %2}\n    movlpd\\t{%2, %0|%0, %2}\n    movsd\\t{%2, %0|%0, %2}\n-   shufpd\\t{$2, %2, %0|%0, %2, 2}\n+   shufpd\\t{$2, %1, %0|%0, %1, 2}\n    movhpd\\t{%H1, %0|%0, %H1}\n    #\n    #\n@@ -5067,7 +5067,7 @@\n    movsd\\t{%2, %0|%0, %2}\n    movlpd\\t{%2, %0|%0, %2}\n    movlpd\\t{%2, %0|%0, %2}\n-   shufpd\\t{$2, %2, %0|%0, %2, 2}\n+   shufpd\\t{$2, %1, %0|%0, %1, 2}\n    movhps\\t{%H1, %0|%0, %H1}\n    movhps\\t{%1, %H0|%H0, %1}\"\n   [(set_attr \"type\" \"ssemov,ssemov,ssemov,sselog,ssemov,ssemov\")"}, {"sha": "ea27d4ac4f01c31c27fb1c681d98a80f0cfcf918", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=401e4feab6365059d6bfdbbced6a6effb7cf69ee", "patch": "@@ -1,4 +1,9 @@\n-2010-12-21  Ira Rosen  <irar@il.ibm.com>i\n+2010-12-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/46880\n+\t* gcc.target/i386/pr46880.c: New test.\n+\n+2010-12-21  Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/47001\n \t* gcc.dg/vect/pr47001.c: New."}, {"sha": "bc6d642994c290a41b55f9ae535cbe9c7bc17c76", "filename": "gcc/testsuite/gcc.target/i386/pr46880.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr46880.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/401e4feab6365059d6bfdbbced6a6effb7cf69ee/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr46880.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr46880.c?ref=401e4feab6365059d6bfdbbced6a6effb7cf69ee", "patch": "@@ -0,0 +1,28 @@\n+/* PR target/46880 */\n+/* { dg-do run } */\n+/* { dg-options \"-O2 -fno-strict-aliasing -msse2\" } */\n+/* { dg-require-effective-target sse2_runtime } */\n+\n+typedef double __m128d __attribute__ ((__vector_size__ (16), __may_alias__));\n+typedef double (*T)[2];\n+\n+static __attribute__ ((noinline, noclone)) __m128d\n+foo (__m128d c, __m128d d)\n+{\n+  T cp = (T) &c;\n+  T dp = (T) &d;\n+  __m128d e = { (*cp)[1], (*dp)[1] };\n+  return e;\n+}\n+\n+int\n+main ()\n+{\n+  __m128d c = { 1.0, 2.0 };\n+  __m128d d = { 3.0, 4.0 };\n+  union { __m128d x; double d[2]; } u;\n+  u.x = foo (c, d);\n+  if (u.d[0] != 2.0 || u.d[1] != 4.0)\n+    __builtin_abort ();\n+  return 0;\n+}"}]}