{"sha": "0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM1YTM4YTVmNzhkODgyMjZjMTRmYzFmNDIyMDhjMWZkMDdkZDg5Ng==", "commit": {"author": {"name": "Julia Koval", "email": "julia.koval@intel.com", "date": "2018-06-11T11:10:38Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2018-06-11T11:10:38Z"}, "message": "Remove redundant intrinsics\n\ngcc/\n\t* config/i386/vaesintrin.h (_mm_aesdec_epi128, _mm_aesdeclast_epi128)\n\t_mm_aesenc_epi128, _mm_aesenclast_epi128: Remove.\n\t* config/i386/vpclmulqdqintrin.h (_mm_clmulepi64_epi128): Remove.\ngcc/testsuite/\n\t* gcc.target/i386/avx512fvl-vaes-1.c: Remove 128bit versions from test.\n\t* gcc.target/i386/vpclmulqdq.c: Ditto.\n\nFrom-SVN: r261433", "tree": {"sha": "ab9fd2738f0340e44d91f49dfe60ed84939dfa14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab9fd2738f0340e44d91f49dfe60ed84939dfa14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/comments", "author": {"login": "vaalfreja", "id": 5216345, "node_id": "MDQ6VXNlcjUyMTYzNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5216345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vaalfreja", "html_url": "https://github.com/vaalfreja", "followers_url": "https://api.github.com/users/vaalfreja/followers", "following_url": "https://api.github.com/users/vaalfreja/following{/other_user}", "gists_url": "https://api.github.com/users/vaalfreja/gists{/gist_id}", "starred_url": "https://api.github.com/users/vaalfreja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vaalfreja/subscriptions", "organizations_url": "https://api.github.com/users/vaalfreja/orgs", "repos_url": "https://api.github.com/users/vaalfreja/repos", "events_url": "https://api.github.com/users/vaalfreja/events{/privacy}", "received_events_url": "https://api.github.com/users/vaalfreja/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5cfcd771472e8e99f69e11e601d9adb740a762de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cfcd771472e8e99f69e11e601d9adb740a762de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cfcd771472e8e99f69e11e601d9adb740a762de"}], "stats": {"total": 90, "additions": 11, "deletions": 79}, "files": [{"sha": "a046620b30762d45f931c0b43b132e93b297a0d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "patch": "@@ -1,3 +1,9 @@\n+2018-06-11  Julia Koval  <julia.koval@intel.com>\n+\n+\t* config/i386/vaesintrin.h (_mm_aesdec_epi128, _mm_aesdeclast_epi128)\n+\t_mm_aesenc_epi128, _mm_aesenclast_epi128: Remove.\n+\t* config/i386/vpclmulqdqintrin.h (_mm_clmulepi64_epi128): Remove.\n+\n 2018-06-11  Olivier Hainque  <hainque@adacore.com>\n \n \t* dwarf2out.c (gen_compile_unit_die): Fallout to DW_LANG_Ada83"}, {"sha": "5d9e03f138511edc57c179b1027165cd72296647", "filename": "gcc/config/i386/vaesintrin.h", "status": "modified", "additions": 0, "deletions": 40, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Fconfig%2Fi386%2Fvaesintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Fconfig%2Fi386%2Fvaesintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fvaesintrin.h?ref=0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "patch": "@@ -108,44 +108,4 @@ _mm512_aesenclast_epi128 (__m512i __A, __m512i __B)\n #pragma GCC pop_options\n #endif /* __DISABLE_VAES__ */\n \n-#if !defined(__VAES__) || !defined(__AVX512VL__)\n-#pragma GCC push_options\n-#pragma GCC target(\"vaes,avx512vl\")\n-#define __DISABLE_VAESVL__\n-#endif /* __VAES__ */\n-\n-extern __inline __m128i\n-__attribute__((__gnu_inline__, __always_inline__, __artificial__))\n-_mm_aesdec_epi128 (__m128i __A, __m128i __B)\n-{\n-  return (__m128i)__builtin_ia32_vaesdec_v16qi ((__v16qi) __A, (__v16qi) __B);\n-}\n-\n-extern __inline __m128i\n-__attribute__((__gnu_inline__, __always_inline__, __artificial__))\n-_mm_aesdeclast_epi128 (__m128i __A, __m128i __B)\n-{\n-  return (__m128i)__builtin_ia32_vaesdeclast_v16qi ((__v16qi) __A,\n-\t\t\t\t\t\t    (__v16qi) __B);\n-}\n-\n-extern __inline __m128i\n-__attribute__((__gnu_inline__, __always_inline__, __artificial__))\n-_mm_aesenc_epi128 (__m128i __A, __m128i __B)\n-{\n-  return (__m128i)__builtin_ia32_vaesenc_v16qi ((__v16qi) __A, (__v16qi) __B);\n-}\n-\n-extern __inline __m128i\n-__attribute__((__gnu_inline__, __always_inline__, __artificial__))\n-_mm_aesenclast_epi128 (__m128i __A, __m128i __B)\n-{\n-  return (__m128i)__builtin_ia32_vaesenclast_v16qi ((__v16qi) __A,\n-\t\t\t\t\t\t    (__v16qi) __B);\n-}\n-\n-#ifdef __DISABLE_VAESVL__\n-#undef __DISABLE_VAESVL__\n-#pragma GCC pop_options\n-#endif /* __DISABLE_VAES__ */\n #endif /* __VAESINTRIN_H_INCLUDED */"}, {"sha": "3d383047c3c9d29297a68b7049e106aa31c363f6", "filename": "gcc/config/i386/vpclmulqdqintrin.h", "status": "modified", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Fconfig%2Fi386%2Fvpclmulqdqintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Fconfig%2Fi386%2Fvpclmulqdqintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fvpclmulqdqintrin.h?ref=0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "patch": "@@ -53,31 +53,6 @@ _mm512_clmulepi64_epi128 (__m512i __A, __m512i __B, const int __C)\n #pragma GCC pop_options\n #endif /* __DISABLE_VPCLMULQDQF__ */\n \n-#if !defined(__VPCLMULQDQ__) || !defined(__AVX512VL__)\n-#pragma GCC push_options\n-#pragma GCC target(\"vpclmulqdq,avx512vl\")\n-#define __DISABLE_VPCLMULQDQVL__\n-#endif /* __VPCLMULQDQVL__ */\n-\n-#ifdef __OPTIMIZE__\n-extern __inline __m128i\n-__attribute__((__gnu_inline__, __always_inline__, __artificial__))\n-_mm_clmulepi64_epi128 (__m128i __A, __m128i __B, const int __C)\n-{\n-  return (__m128i) __builtin_ia32_vpclmulqdq_v2di ((__v2di)__A,\n-\t\t\t\t\t\t   (__v2di) __B, __C);\n-}\n-#else\n-#define _mm_clmulepi64_epi128(A, B, C)\t\t\t   \\\n-  ((__m128i) __builtin_ia32_vpclmulqdq_v2di ((__v2di)(__m128i)(A), \\\n-\t\t\t\t(__v2di)(__m128i)(B), (int)(C)))\n-#endif\n-\n-#ifdef __DISABLE_VPCLMULQDQVL__\n-#undef __DISABLE_VPCLMULQDQVL__\n-#pragma GCC pop_options\n-#endif /* __DISABLE_VPCLMULQDQVL__ */\n-\n #if !defined(__VPCLMULQDQ__) || !defined(__AVX512VL__)\n #pragma GCC push_options\n #pragma GCC target(\"vpclmulqdq,avx512vl\")"}, {"sha": "4d38f53ebaf1c302a18e8fd3ed7df51f59c283e8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "patch": "@@ -1,3 +1,8 @@\n+2018-06-11  Julia Koval  <julia.koval@intel.com>\n+\n+\t* gcc.target/i386/avx512fvl-vaes-1.c: Remove 128bit versions from test.\n+\t* gcc.target/i386/vpclmulqdq.c: Ditto.\n+\n 2018-06-11  Olivier Hainque  <hainque@adacore.com>\n \n \t* gnat.dg/lang-dw2.adb: New test."}, {"sha": "c65b570cd4718676400512f43f9cb8e38f1ec358", "filename": "gcc/testsuite/gcc.target/i386/avx512fvl-vaes-1.c", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512fvl-vaes-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512fvl-vaes-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512fvl-vaes-1.c?ref=0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "patch": "@@ -10,16 +10,10 @@\n /* { dg-final { scan-assembler-times \"vaesenc\\[ \\\\t\\]+\\[^\\{\\n\\]*%ymm\\[0-9\\]+\\[^\\{\\n\\]*%ymm\\[0-9\\]+\\[^\\{\\n\\]*%ymm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\"  1 } } */\n /* { dg-final { scan-assembler-times \"vaesenclast\\[ \\\\t\\]+\\[^\\{\\n\\]*%ymm\\[0-9\\]+\\[^\\{\\n\\]*%ymm\\[0-9\\]+\\[^\\{\\n\\]*%ymm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\"  1 } } */\n \n-/* { dg-final { scan-assembler-times \"vaesdec\\[ \\\\t\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\"  1 } } */\n-/* { dg-final { scan-assembler-times \"vaesdeclast\\[ \\\\t\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\"  1 } } */\n-/* { dg-final { scan-assembler-times \"vaesenc\\[ \\\\t\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\"  1 } } */\n-/* { dg-final { scan-assembler-times \"vaesenclast\\[ \\\\t\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+\\[^\\{\\n\\]*%xmm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\"  1 } } */\n-\n #include <immintrin.h>\n \n volatile __m512i x,y;\n volatile __m256i x256, y256;\n-volatile __m128i x128, y128;\n \n void extern\n avx512f_test (void)\n@@ -33,9 +27,4 @@ avx512f_test (void)\n   x256 = _mm256_aesdeclast_epi128 (x256, y256);\n   x256 = _mm256_aesenc_epi128 (x256, y256);\n   x256 = _mm256_aesenclast_epi128 (x256, y256);\n-\n-  x128 = _mm_aesdec_epi128 (x128, y128);\n-  x128 = _mm_aesdeclast_epi128 (x128, y128);\n-  x128 = _mm_aesenc_epi128 (x128, y128);\n-  x128 = _mm_aesenclast_epi128 (x128, y128);\n }"}, {"sha": "d93f776803f40c3c68fa7469d431803524b4fc0b", "filename": "gcc/testsuite/gcc.target/i386/vpclmulqdq.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvpclmulqdq.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c5a38a5f78d88226c14fc1f42208c1fd07dd896/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvpclmulqdq.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvpclmulqdq.c?ref=0c5a38a5f78d88226c14fc1f42208c1fd07dd896", "patch": "@@ -2,19 +2,16 @@\n /* { dg-options \"-mvpclmulqdq -mavx512vl -mavx512f -O2\" } */\n /* { dg-final { scan-assembler-times \"vpclmulqdq\\[ \\\\t\\]+\\[^\\{\\n\\]*\\\\\\$3\\[^\\n\\r]*%zmm\\[0-9\\]+\\[^\\n\\r]*%zmm\\[0-9\\]+\\[^\\n\\r]*%zmm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\" 1 } } */\n /* { dg-final { scan-assembler-times \"vpclmulqdq\\[ \\\\t\\]+\\[^\\{\\n\\]*\\\\\\$3\\[^\\n\\r]*%ymm\\[0-9\\]+\\[^\\n\\r]*%ymm\\[0-9\\]+\\[^\\n\\r]*%ymm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\" 1 } } */\n-/* { dg-final { scan-assembler-times \"vpclmulqdq\\[ \\\\t\\]+\\[^\\{\\n\\]*\\\\\\$3\\[^\\n\\r]*%xmm\\[0-9\\]+\\[^\\n\\r]*%xmm\\[0-9\\]+\\[^\\n\\r]*%xmm\\[0-9\\]+(?:\\n|\\[ \\\\t\\]+#)\" 1 } } */\n \n #include <x86intrin.h>\n \n volatile __m512i x1, x2;\n volatile __m256i x3, x4;\n-volatile __m128i x5, x6;\n \n void extern\n avx512vl_test (void)\n {\n     x1 = _mm512_clmulepi64_epi128(x1, x2, 3);\n     x3 = _mm256_clmulepi64_epi128(x3, x4, 3);\n-    x5 = _mm_clmulepi64_epi128(x5, x6, 3);\n }\n "}]}