{"sha": "d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQyMGU1NjdkYzUyZDRjN2MzODRmZmRjZWZlNGJkNGFlOGY0ZTMwYg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1998-07-03T02:31:43Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-07-03T02:31:43Z"}, "message": "alpha.c (alpha_initialize_trampoline): Hack around Pmode/ptr_mode lossage on VMS.\n\n        * alpha.c (alpha_initialize_trampoline): Hack around Pmode/ptr_mode\n        lossage on VMS.  Reported by kkaempf@rmi.de.\n        * alpha/vms.h (TRAMPOLINE_TEMPLATE): Add missing 0.\n\nFrom-SVN: r20916", "tree": {"sha": "0097652756cf158000b766a20c97ff341681456f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0097652756cf158000b766a20c97ff341681456f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b/comments", "author": null, "committer": null, "parents": [{"sha": "c3b9a03836baa44537eac714070c078fc7561d3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3b9a03836baa44537eac714070c078fc7561d3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3b9a03836baa44537eac714070c078fc7561d3a"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "0f21f6309ed115d3615abc6a15f5ef3c01c66a17", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b", "patch": "@@ -1,3 +1,9 @@\n+Fri Jul  3 02:28:05 1998  Richard Henderson  <rth@cygnus.com>\n+\n+\t* alpha.c (alpha_initialize_trampoline): Hack around Pmode/ptr_mode\n+\tlossage on VMS.  Reported by kkaempf@rmi.de.\n+\t* alpha/vms.h (TRAMPOLINE_TEMPLATE): Add missing 0.\n+\n Thu Jul  2 17:41:14 1998  Nick Clifton  <nickc@cygnus.com>\n \n \t* config/m32r/m32r.h (MUST_PASS_IN_STACK): Override default"}, {"sha": "68702a299fd4833e6c3cff982a484a0de28d1ec7", "filename": "gcc/config/alpha/alpha.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b/gcc%2Fconfig%2Falpha%2Falpha.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b/gcc%2Fconfig%2Falpha%2Falpha.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Falpha.c?ref=d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b", "patch": "@@ -2841,12 +2841,15 @@ alpha_initialize_trampoline (tramp, fnaddr, cxt, fnofs, cxtofs, jmpofs)\n      int fnofs, cxtofs, jmpofs;\n {\n   rtx temp, temp1, addr;\n+  /* ??? Something is wrong with VMS codegen in that we get aborts when\n+     using ptr_mode.  Hack around it for now.  */\n+  enum machine_mode mode = TARGET_OPEN_VMS ? Pmode : ptr_mode;\n \n   /* Store function address and CXT.  */\n-  addr = memory_address (ptr_mode, plus_constant (tramp, fnofs));\n-  emit_move_insn (gen_rtx (MEM, ptr_mode, addr), fnaddr);\n-  addr = memory_address (ptr_mode, plus_constant (tramp, cxtofs));\n-  emit_move_insn (gen_rtx (MEM, ptr_mode, addr), cxt);\n+  addr = memory_address (mode, plus_constant (tramp, fnofs));\n+  emit_move_insn (gen_rtx (MEM, mode, addr), fnaddr);\n+  addr = memory_address (mode, plus_constant (tramp, cxtofs));\n+  emit_move_insn (gen_rtx (MEM, mode, addr), cxt);\n \n   /* This has been disabled since the hint only has a 32k range, and in\n      no existing OS is the stack within 32k of the text segment. */"}, {"sha": "d91c47cfc237a969e66e295dc43d490b846893df", "filename": "gcc/config/alpha/vms.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b/gcc%2Fconfig%2Falpha%2Fvms.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b/gcc%2Fconfig%2Falpha%2Fvms.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fvms.h?ref=d420e567dc52d4c7c384ffdcefe4bd4ae8f4e30b", "patch": "@@ -392,7 +392,7 @@ do {\t\t\t\t\t\t\t\t\t\\\n {\t\t\t\t\t\t\\\n   fprintf (FILE, \"\\t.quad 0\\n\");\t\t\\\n   fprintf (FILE, \"\\t.linkage __tramp\\n\");\t\\\n-  fprintf (FILE, \"\\t.quad 0\\n\");\t\t\\\n+  fprintf (FILE, \"\\t.quad 0,0\\n\");\t\t\\\n }\n \n /* Length in units of the trampoline for entering a nested function.  */"}]}