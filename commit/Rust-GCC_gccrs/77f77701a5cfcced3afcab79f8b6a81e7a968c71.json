{"sha": "77f77701a5cfcced3afcab79f8b6a81e7a968c71", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdmNzc3MDFhNWNmY2NlZDNhZmNhYjc5ZjhiNmE4MWU3YTk2OGM3MQ==", "commit": {"author": {"name": "Dave Brolley", "email": "brolley@cygnus.com", "date": "1998-04-08T23:30:08Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-04-08T23:30:08Z"}, "message": "com.c (finput): New variable.\n\n        * com.c (finput): New variable.\n        (init_parse): Handle !USE_CPPLIB.\n        (finish_parse): New function.\n        (lang_init): No longer declare finput.\n\nFrom-SVN: r19064", "tree": {"sha": "287480fe00c954bbb3cf840cbf2654e638a03334", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/287480fe00c954bbb3cf840cbf2654e638a03334"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77f77701a5cfcced3afcab79f8b6a81e7a968c71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77f77701a5cfcced3afcab79f8b6a81e7a968c71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77f77701a5cfcced3afcab79f8b6a81e7a968c71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77f77701a5cfcced3afcab79f8b6a81e7a968c71/comments", "author": null, "committer": null, "parents": [{"sha": "e56e519de8211b657741d6e7bd5fae0db71405c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e56e519de8211b657741d6e7bd5fae0db71405c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e56e519de8211b657741d6e7bd5fae0db71405c9"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "282a294b67996687fc8afeda37a57b56969594c1", "filename": "gcc/f/com.c", "status": "modified", "additions": 26, "deletions": 3, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77f77701a5cfcced3afcab79f8b6a81e7a968c71/gcc%2Ff%2Fcom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77f77701a5cfcced3afcab79f8b6a81e7a968c71/gcc%2Ff%2Fcom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Fcom.c?ref=77f77701a5cfcced3afcab79f8b6a81e7a968c71", "patch": "@@ -238,6 +238,9 @@ tree current_function_decl;\n \n char *language_string = \"GNU F77\";\n \n+/* Stream for reading from the input file.  */\n+FILE *finput;\n+\n /* These definitions parallel those in c-decl.c so that code from that\n    module can be used pretty much as is.  Much of these defs aren't\n    otherwise used, i.e. by g77 code per se, except some of them are used\n@@ -14793,12 +14796,28 @@ init_decl_processing ()\n }\n \n void\n-init_lex ()\n+init_parse (filename)\n+     char *filename;\n {\n #if BUILT_FOR_270\n   extern void (*print_error_function) (char *);\n #endif\n \n+  /* Open input file.  */\n+  if (filename == 0 || !strcmp (filename, \"-\"))\n+    {\n+      finput = stdin;\n+      filename = \"stdin\";\n+    }\n+  else\n+    finput = fopen (filename, \"r\");\n+  if (finput == 0)\n+    pfatal_with_name (filename);\n+\n+#ifdef IO_BUFFER_SIZE\n+  setvbuf (finput, (char *) xmalloc (IO_BUFFER_SIZE), _IOFBF, IO_BUFFER_SIZE);\n+#endif\n+\n   /* Make identifier nodes long enough for the language-specific slots.  */\n   set_identifier_size (sizeof (struct lang_identifier));\n   decl_printable_name = lang_printable_name;\n@@ -14807,6 +14826,12 @@ init_lex ()\n #endif\n }\n \n+void\n+finish_parse ()\n+{\n+  fclose (finput);\n+}\n+\n void\n insert_block (block)\n      tree block;\n@@ -14851,8 +14876,6 @@ lang_identify ()\n void\n lang_init ()\n {\n-  extern FILE *finput;\t\t/* Don't pollute com.h with this. */\n-\n   /* If the file is output from cpp, it should contain a first line\n      `# 1 \"real-filename\"', and the current design of gcc (toplev.c\n      in particular and the way it sets up information relied on by"}]}