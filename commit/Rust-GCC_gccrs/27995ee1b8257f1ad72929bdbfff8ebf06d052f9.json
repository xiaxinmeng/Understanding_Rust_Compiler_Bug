{"sha": "27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc5OTVlZTFiODI1N2YxYWQ3MjkyOWJkYmZmZjhlYmYwNmQwNTJmOQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2008-04-24T17:03:13Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-04-24T17:03:13Z"}, "message": "re PR libstdc++/35969 (GLIBCXX_DEBUG: list::merge triggers bad assert)\n\n2008-04-24  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR libstdc++/35969\n\t* include/debug/list (merge): Use _M_transfer_iter, consistently\n\twith the splice members.\n\t* testsuite/23_containers/list/operations/35969.cc: New.\n\n\t* testsuite/23_containers/list/operators: Rename to\n\ttestsuite/23_containers/list/operations.\n\nFrom-SVN: r134642", "tree": {"sha": "75ab990f4315b4b68c45c2a30a69ae1248c331fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/75ab990f4315b4b68c45c2a30a69ae1248c331fd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/comments", "author": null, "committer": null, "parents": [{"sha": "8b66e196a3105887bc8cbd3105552a0723f450e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b66e196a3105887bc8cbd3105552a0723f450e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b66e196a3105887bc8cbd3105552a0723f450e0"}], "stats": {"total": 129, "additions": 115, "deletions": 14}, "files": [{"sha": "8b16606df6a8ca72b84830fc4dab965e59832558", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "patch": "@@ -1,3 +1,13 @@\n+2008-04-24  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR libstdc++/35969\n+\t* include/debug/list (merge): Use _M_transfer_iter, consistently\n+\twith the splice members.\n+\t* testsuite/23_containers/list/operations/35969.cc: New.\n+\n+\t* testsuite/23_containers/list/operators: Rename to\n+\ttestsuite/23_containers/list/operations.\n+\n 2008-04-24  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* acinclude.m4 (GLIBCXX_ENABLE_ATOMIC_BUILTINS): Check for set of"}, {"sha": "d0797e9bf469947a7fbde85da0f0cde6c5f5d630", "filename": "libstdc++-v3/include/debug/list", "status": "modified", "additions": 25, "deletions": 14, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Flist", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Flist", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Flist?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "patch": "@@ -1,6 +1,6 @@\n // Debugging list implementation -*- C++ -*-\n \n-// Copyright (C) 2003, 2004, 2005, 2006, 2007\n+// Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -527,14 +527,19 @@ namespace __debug\n       merge(list& __x)\n #endif\n       {\n-\t__glibcxx_check_sorted(_Base::begin(), _Base::end());\n-\t__glibcxx_check_sorted(__x.begin().base(), __x.end().base());\n-\tfor (iterator __tmp = __x.begin(); __tmp != __x.end(); )\n+\t// _GLIBCXX_RESOLVE_LIB_DEFECTS\n+\t// 300. list::merge() specification incomplete\n+\tif (this != &__x)\n \t  {\n-\t    iterator __victim = __tmp++;\n-\t    __victim._M_attach(&__x);\n+\t    __glibcxx_check_sorted(_Base::begin(), _Base::end());\n+\t    __glibcxx_check_sorted(__x.begin().base(), __x.end().base());\n+\t    for (iterator __tmp = __x.begin(); __tmp != __x.end();)\n+\t      {\n+\t\titerator __victim = __tmp++;\n+\t\tthis->_M_transfer_iter(__victim);\n+\t      }\n+\t    _Base::merge(_GLIBCXX_MOVE(__x._M_base()));\n \t  }\n-\t_Base::merge(_GLIBCXX_MOVE(__x._M_base()));\n       }\n \n       template<class _Compare>\n@@ -545,15 +550,21 @@ namespace __debug\n         merge(list& __x, _Compare __comp)\n #endif\n         {\n-\t  __glibcxx_check_sorted_pred(_Base::begin(), _Base::end(), __comp);\n-\t  __glibcxx_check_sorted_pred(__x.begin().base(), __x.end().base(),\n-\t\t\t\t      __comp);\n-\t  for (iterator __tmp = __x.begin(); __tmp != __x.end(); )\n+\t  // _GLIBCXX_RESOLVE_LIB_DEFECTS\n+\t  // 300. list::merge() specification incomplete\n+\t  if (this != &__x)\n \t    {\n-\t      iterator __victim = __tmp++;\n-\t      __victim._M_attach(&__x);\n+\t      __glibcxx_check_sorted_pred(_Base::begin(), _Base::end(),\n+\t\t\t\t\t  __comp);\n+\t      __glibcxx_check_sorted_pred(__x.begin().base(), __x.end().base(),\n+\t\t\t\t\t  __comp);\n+\t      for (iterator __tmp = __x.begin(); __tmp != __x.end();)\n+\t\t{\n+\t\t  iterator __victim = __tmp++;\n+\t\t  this->_M_transfer_iter(__victim);\n+\t\t}\n+\t      _Base::merge(_GLIBCXX_MOVE(__x._M_base()), __comp);\n \t    }\n-\t  _Base::merge(_GLIBCXX_MOVE(__x._M_base()), __comp);\n \t}\n \n       void"}, {"sha": "1bc91914f4456eac7c1eb4c34e5135b6708fcfca", "filename": "libstdc++-v3/testsuite/23_containers/list/operations/1.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F1.cc?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "previous_filename": "libstdc++-v3/testsuite/23_containers/list/operators/1.cc"}, {"sha": "dc41e12c5114eec3b47215a32ee7e2c22799b790", "filename": "libstdc++-v3/testsuite/23_containers/list/operations/2.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F2.cc?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "previous_filename": "libstdc++-v3/testsuite/23_containers/list/operators/2.cc"}, {"sha": "9e0d3f9b5615d898f938e24b995c2b34e5929a3b", "filename": "libstdc++-v3/testsuite/23_containers/list/operations/3.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F3.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F3.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F3.cc?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "previous_filename": "libstdc++-v3/testsuite/23_containers/list/operators/3.cc"}, {"sha": "97747ad9a6e7459de07dc623dc4b828adf27a2e2", "filename": "libstdc++-v3/testsuite/23_containers/list/operations/35969.cc", "status": "added", "additions": 80, "deletions": 0, "changes": 80, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F35969.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F35969.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F35969.cc?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "patch": "@@ -0,0 +1,80 @@\n+// Copyright (C) 2008 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// 23.2.2.4 list operations [lib.list.ops]\n+\n+// { dg-options \"-D_GLIBCXX_DEBUG\" }\n+\n+#include <list>\n+#include <functional>\n+\n+// libstdc++/35969\n+void test01()\n+{\n+  {\n+    std::list<int> list1;\n+    std::list<int> list2;\n+\n+    for(int i = 0; i < 10; ++i)\n+      {\n+\tlist1.push_back(i);\n+\tlist2.push_back(10 - i);\n+      }\n+\n+    list1.sort();\n+    list2.sort();\n+\n+    std::list<int>::iterator node_of_interest = list2.begin();\n+\n+    list1.splice(list1.begin(), list2, node_of_interest);\n+    list2.splice(list2.begin(), list1, node_of_interest);\n+\n+    list1.merge(list2);\n+\n+    list2.splice(list2.begin(), list1, node_of_interest);\n+  }\n+\n+  {\n+    std::list<int> list1;\n+    std::list<int> list2;\n+\n+    for(int i = 0; i < 10; ++i)\n+      {\n+\tlist1.push_back(i);\n+\tlist2.push_back(10 - i);\n+      }\n+\n+    list1.sort();\n+    list2.sort();\n+\n+    std::list<int>::iterator node_of_interest = list2.begin();\n+\n+    list1.splice(list1.begin(), list2, node_of_interest);\n+    list2.splice(list2.begin(), list1, node_of_interest);\n+\n+    list1.merge(list2, std::less<int>());\n+\n+    list2.splice(list2.begin(), list1, node_of_interest);\n+  }\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}, {"sha": "2c355145cbe3854bbeb34f9501da9121b4697c39", "filename": "libstdc++-v3/testsuite/23_containers/list/operations/4.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F4.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F4.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F4.cc?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "previous_filename": "libstdc++-v3/testsuite/23_containers/list/operators/4.cc"}, {"sha": "22f504691d96f77cb5b7523a86199417276693e9", "filename": "libstdc++-v3/testsuite/23_containers/list/operations/5.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F5.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27995ee1b8257f1ad72929bdbfff8ebf06d052f9/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F5.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Flist%2Foperations%2F5.cc?ref=27995ee1b8257f1ad72929bdbfff8ebf06d052f9", "previous_filename": "libstdc++-v3/testsuite/23_containers/list/operators/5.cc"}]}