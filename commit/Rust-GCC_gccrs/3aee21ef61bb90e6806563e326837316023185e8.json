{"sha": "3aee21ef61bb90e6806563e326837316023185e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FlZTIxZWY2MWJiOTBlNjgwNjU2M2UzMjY4MzczMTYwMjMxODVlOA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-23T06:35:36Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-23T06:35:36Z"}, "message": "[multiple changes]\n\n2010-06-23  Emmanuel Briot  <briot@adacore.com>\n\n\t* prj.adb, prj.ads, prj-nmsc.adb (Processing_Flags): New flag\n\tMissing_Source_Files.\n\n2010-06-23  Robert Dewar  <dewar@adacore.com>\n\n\t* exp_ch3.adb, exp_util.adb: Minor reformatting.\n\nFrom-SVN: r161249", "tree": {"sha": "c390de6133d0d7541fb7139978107479e9ba4724", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c390de6133d0d7541fb7139978107479e9ba4724"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3aee21ef61bb90e6806563e326837316023185e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aee21ef61bb90e6806563e326837316023185e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3aee21ef61bb90e6806563e326837316023185e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3aee21ef61bb90e6806563e326837316023185e8/comments", "author": null, "committer": null, "parents": [{"sha": "5b599df4d10201f3a83dbbaece526a2a22b49f18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b599df4d10201f3a83dbbaece526a2a22b49f18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b599df4d10201f3a83dbbaece526a2a22b49f18"}], "stats": {"total": 103, "additions": 70, "deletions": 33}, "files": [{"sha": "79848ddd7c4b3de09aa3b73dcc77a0aa50657ee4", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3aee21ef61bb90e6806563e326837316023185e8", "patch": "@@ -1,3 +1,12 @@\n+2010-06-23  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* prj.adb, prj.ads, prj-nmsc.adb (Processing_Flags): New flag\n+\tMissing_Source_Files.\n+\n+2010-06-23  Robert Dewar  <dewar@adacore.com>\n+\n+\t* exp_ch3.adb, exp_util.adb: Minor reformatting.\n+\n 2010-06-23  Jose Ruiz  <ruiz@adacore.com>\n \n \t* a-reatim.adb, a-retide.adb: Move the initialization of the tasking"}, {"sha": "9326406c2a4692bc0e6752176286803d108e220f", "filename": "gcc/ada/exp_ch3.adb", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fexp_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fexp_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch3.adb?ref=3aee21ef61bb90e6806563e326837316023185e8", "patch": "@@ -5927,16 +5927,15 @@ package body Exp_Ch3 is\n         and then Has_Discriminants (Def_Id)\n       then\n          declare\n-            Ctyp : constant Entity_Id :=\n-                     Corresponding_Concurrent_Type (Def_Id);\n+            Ctyp       : constant Entity_Id :=\n+                           Corresponding_Concurrent_Type (Def_Id);\n             Conc_Discr : Entity_Id;\n             Rec_Discr  : Entity_Id;\n             Temp       : Entity_Id;\n \n          begin\n             Conc_Discr := First_Discriminant (Ctyp);\n             Rec_Discr  := First_Discriminant (Def_Id);\n-\n             while Present (Conc_Discr) loop\n                Temp := Discriminal (Conc_Discr);\n                Set_Discriminal (Conc_Discr, Discriminal (Rec_Discr));\n@@ -7821,12 +7820,11 @@ package body Exp_Ch3 is\n \n             --  If a primitive is encountered that renames the predefined\n             --  equality operator before reaching any explicit equality\n-            --  primitive, then we still need to create a predefined\n-            --  equality function, because calls to it can occur via\n-            --  the renaming. A new name is created for the equality\n-            --  to avoid conflicting with any user-defined equality.\n-            --  (Note that this doesn't account for renamings of\n-            --  equality nested within subpackages???)\n+            --  primitive, then we still need to create a predefined equality\n+            --  function, because calls to it can occur via the renaming. A new\n+            --  name is created for the equality to avoid conflicting with any\n+            --  user-defined equality. (Note that this doesn't account for\n+            --  renamings of equality nested within subpackages???)\n \n             if Is_Predefined_Eq_Renaming (Node (Prim)) then\n                Eq_Name := New_External_Name (Chars (Node (Prim)), 'E');"}, {"sha": "61eef357ab6876eee39cee9b90a1416faf5efa7f", "filename": "gcc/ada/exp_util.adb", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fexp_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fexp_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.adb?ref=3aee21ef61bb90e6806563e326837316023185e8", "patch": "@@ -305,11 +305,9 @@ package body Exp_Util is\n       else\n          if No (Actions (Fnode)) then\n             Set_Actions (Fnode, L);\n-\n          else\n             Append_List (L, Actions (Fnode));\n          end if;\n-\n       end if;\n    end Append_Freeze_Actions;\n "}, {"sha": "f6557f18717559b67f8776d9b8bf26da43e53bc7", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 33, "deletions": 12, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=3aee21ef61bb90e6806563e326837316023185e8", "patch": "@@ -6537,19 +6537,40 @@ package body Prj.Nmsc is\n                if not NL.Found then\n                   Err_Vars.Error_Msg_File_1 := NL.Name;\n \n-                  if First_Error then\n-                     Error_Msg\n-                       (Data.Flags,\n-                        \"source file { not found\",\n-                        NL.Location, Project.Project);\n-                     First_Error := False;\n+                  case Data.Flags.Missing_Source_Files is\n+                     when Error =>\n+                        if First_Error then\n+                           Error_Msg\n+                             (Data.Flags,\n+                              \"source file { not found\",\n+                              NL.Location, Project.Project);\n+                           First_Error := False;\n \n-                  else\n-                     Error_Msg\n-                       (Data.Flags,\n-                        \"\\source file { not found\",\n-                        NL.Location, Project.Project);\n-                  end if;\n+                        else\n+                           Error_Msg\n+                             (Data.Flags,\n+                              \"\\source file { not found\",\n+                              NL.Location, Project.Project);\n+                        end if;\n+\n+                     when Warning =>\n+                        if First_Error then\n+                           Error_Msg\n+                             (Data.Flags,\n+                              \"?source file { not found\",\n+                              NL.Location, Project.Project);\n+                           First_Error := False;\n+\n+                        else\n+                           Error_Msg\n+                             (Data.Flags,\n+                              \"?\\source file { not found\",\n+                              NL.Location, Project.Project);\n+                        end if;\n+\n+                     when Silent =>\n+                        null;\n+                  end case;\n                end if;\n \n                NL := Source_Names_Htable.Get_Next (Project.Source_Names);"}, {"sha": "be02a417014b1ff6a5a19e7c0cf30439a7db6740", "filename": "gcc/ada/prj.adb", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fprj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fprj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.adb?ref=3aee21ef61bb90e6806563e326837316023185e8", "patch": "@@ -1230,7 +1230,8 @@ package body Prj is\n       Compiler_Driver_Mandatory  : Boolean       := False;\n       Error_On_Unknown_Language  : Boolean       := True;\n       Require_Obj_Dirs           : Error_Warning := Error;\n-      Allow_Invalid_External     : Error_Warning := Error)\n+      Allow_Invalid_External     : Error_Warning := Error;\n+      Missing_Source_Files       : Error_Warning := Error)\n       return Processing_Flags\n    is\n    begin\n@@ -1242,7 +1243,8 @@ package body Prj is\n          Error_On_Unknown_Language  => Error_On_Unknown_Language,\n          Compiler_Driver_Mandatory  => Compiler_Driver_Mandatory,\n          Require_Obj_Dirs           => Require_Obj_Dirs,\n-         Allow_Invalid_External     => Allow_Invalid_External);\n+         Allow_Invalid_External     => Allow_Invalid_External,\n+         Missing_Source_Files       => Missing_Source_Files);\n    end Create_Flags;\n \n    ------------"}, {"sha": "0cb504a827415dcf25dacdebe1d131145e290425", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 17, "deletions": 8, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3aee21ef61bb90e6806563e326837316023185e8/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=3aee21ef61bb90e6806563e326837316023185e8", "patch": "@@ -1459,7 +1459,8 @@ package Prj is\n       Compiler_Driver_Mandatory  : Boolean       := False;\n       Error_On_Unknown_Language  : Boolean       := True;\n       Require_Obj_Dirs           : Error_Warning := Error;\n-      Allow_Invalid_External     : Error_Warning := Error)\n+      Allow_Invalid_External     : Error_Warning := Error;\n+      Missing_Source_Files       : Error_Warning := Error)\n       return Processing_Flags;\n    --  Function used to create Processing_Flags structure\n    --\n@@ -1492,6 +1493,10 @@ package Prj is\n    --  If Allow_Invalid_External is Silent, then no error is reported when an\n    --  invalid value is used for an external variable (and it doesn't match its\n    --  type). Instead, the first possible value is used.\n+   --\n+   --  Missing_Source_Files indicates whether it is an error or a warning that\n+   --  a source file mentioned in the Source_Files attributes is not actually\n+   --  found in the source directories\n \n    Gprbuild_Flags : constant Processing_Flags;\n    Gprclean_Flags : constant Processing_Flags;\n@@ -1521,6 +1526,10 @@ package Prj is\n    --  another program running on the same machine has recreated it.\n    --  Does nothing if Debug.Debug_Flag_N is set\n \n+   Virtual_Prefix : constant String := \"v$\";\n+   --  The prefix for virtual extending projects. Because of the '$', which is\n+   --  normally forbidden for project names, there cannot be any name clash.\n+\n private\n \n    All_Packages : constant String_List_Access := null;\n@@ -1535,10 +1544,6 @@ private\n                            Location => No_Location,\n                            Default  => False);\n \n-   Virtual_Prefix : constant String := \"v$\";\n-   --  The prefix for virtual extending projects. Because of the '$', which is\n-   --  normally forbidden for project names, there cannot be any name clash.\n-\n    type Source_Iterator is record\n       In_Tree : Project_Tree_Ref;\n \n@@ -1601,6 +1606,7 @@ private\n       Error_On_Unknown_Language  : Boolean;\n       Require_Obj_Dirs           : Error_Warning;\n       Allow_Invalid_External     : Error_Warning;\n+      Missing_Source_Files       : Error_Warning;\n    end record;\n \n    Gprbuild_Flags : constant Processing_Flags :=\n@@ -1611,7 +1617,8 @@ private\n       Compiler_Driver_Mandatory  => True,\n       Error_On_Unknown_Language  => True,\n       Require_Obj_Dirs           => Error,\n-      Allow_Invalid_External     => Error);\n+      Allow_Invalid_External     => Error,\n+      Missing_Source_Files       => Error);\n \n    Gprclean_Flags : constant Processing_Flags :=\n      (Report_Error               => null,\n@@ -1621,7 +1628,8 @@ private\n       Compiler_Driver_Mandatory  => True,\n       Error_On_Unknown_Language  => True,\n       Require_Obj_Dirs           => Warning,\n-      Allow_Invalid_External     => Error);\n+      Allow_Invalid_External     => Error,\n+      Missing_Source_Files       => Warning);\n \n    Gnatmake_Flags : constant Processing_Flags :=\n      (Report_Error               => null,\n@@ -1631,6 +1639,7 @@ private\n       Compiler_Driver_Mandatory  => False,\n       Error_On_Unknown_Language  => False,\n       Require_Obj_Dirs           => Error,\n-      Allow_Invalid_External     => Error);\n+      Allow_Invalid_External     => Error,\n+      Missing_Source_Files       => Error);\n \n end Prj;"}]}