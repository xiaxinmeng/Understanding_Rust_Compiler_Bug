{"sha": "1ba741304a84766aa86fdcc7008f65dcec1b2674", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJhNzQxMzA0YTg0NzY2YWE4NmZkY2M3MDA4ZjY1ZGNlYzFiMjY3NA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-06-28T22:58:32Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-06-28T22:58:32Z"}, "message": "re PR libstdc++/32509 (unable to explicitely configure with a given locale model)\n\n2007-06-28  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR libstdc++/32509\n\t* acinclude.m4 (GLIBCXX_ENABLE_CLOCALE): Carry out the checks\n\tinvolving the de_DE locale only if an auto locale config is\n\tused for a target suitable for the gnu locale model.\n\t* docs/html/install.html: Update.\n\t* configure: Regenerated.\n\nFrom-SVN: r126096", "tree": {"sha": "774662485dae67e6b26c8b8d537807b71bb5c217", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/774662485dae67e6b26c8b8d537807b71bb5c217"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ba741304a84766aa86fdcc7008f65dcec1b2674", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ba741304a84766aa86fdcc7008f65dcec1b2674", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ba741304a84766aa86fdcc7008f65dcec1b2674", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ba741304a84766aa86fdcc7008f65dcec1b2674/comments", "author": null, "committer": null, "parents": [{"sha": "e301e2c4c2b84349039d806fc1649570d8575e42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e301e2c4c2b84349039d806fc1649570d8575e42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e301e2c4c2b84349039d806fc1649570d8575e42"}], "stats": {"total": 88, "additions": 51, "deletions": 37}, "files": [{"sha": "faaa645e15ba993556294c0fb27a1cb5652c6e43", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=1ba741304a84766aa86fdcc7008f65dcec1b2674", "patch": "@@ -1,3 +1,12 @@\n+2007-06-28  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR libstdc++/32509\n+\t* acinclude.m4 (GLIBCXX_ENABLE_CLOCALE): Carry out the checks\n+\tinvolving the de_DE locale only if an auto locale config is\n+\tused for a target suitable for the gnu locale model.\n+\t* docs/html/install.html: Update.\n+\t* configure: Regenerated.\n+\n 2007-06-26  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* testsuite/util/testsuite_api.h: New."}, {"sha": "4b3aaa5b58d1c4274476334619b50115e22ec7be", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 20, "deletions": 18, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=1ba741304a84766aa86fdcc7008f65dcec1b2674", "patch": "@@ -1341,21 +1341,22 @@ AC_DEFUN([GLIBCXX_ENABLE_CLOCALE], [\n     #endif\n     ], enable_clocale_flag=gnu, enable_clocale_flag=generic)\n \n-    # Test for bugs early in glibc-2.2.x series\n-    AC_TRY_RUN([\n-    #define _GNU_SOURCE 1\n-    #include <locale.h>\n-    #include <string.h>\n-    #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n-    extern __typeof(newlocale) __newlocale;\n-    extern __typeof(duplocale) __duplocale;\n-    extern __typeof(strcoll_l) __strcoll_l;\n-    #endif\n-    int main()\n-    {\n-        const char __one[] = \"\ufffduglein Augmen\";\n+    if test $enable_clocale = auto; then\n+      # Test for bugs early in glibc-2.2.x series\n+      AC_TRY_RUN([\n+      #define _GNU_SOURCE 1\n+      #include <locale.h>\n+      #include <string.h>\n+      #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n+      extern __typeof(newlocale) __newlocale;\n+      extern __typeof(duplocale) __duplocale;\n+      extern __typeof(strcoll_l) __strcoll_l;\n+      #endif\n+      int main()\n+      {\n+\tconst char __one[] = \"\ufffduglein Augmen\";\n         const char __two[] = \"\ufffduglein\";\n-        int i;\n+       \tint i;\n         int j;\n         __locale_t        loc;\n         __locale_t        loc_dup;\n@@ -1364,10 +1365,11 @@ AC_DEFUN([GLIBCXX_ENABLE_CLOCALE], [\n         i = __strcoll_l(__one, __two, loc);\n         j = __strcoll_l(__one, __two, loc_dup);\n         return 0;\n-    }\n-    ],\n-    [enable_clocale_flag=gnu],[enable_clocale_flag=generic],\n-    [enable_clocale_flag=generic])\n+      }\n+      ],\n+      [enable_clocale_flag=gnu],[enable_clocale_flag=generic],\n+      [enable_clocale_flag=generic])\n+    fi\n \n     # Set it to scream when it hurts.\n     ac_save_CFLAGS=\"$CFLAGS\"\t"}, {"sha": "d58168b2e70a5966c4cd34edfb942d21792a9cf5", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 18, "deletions": 16, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=1ba741304a84766aa86fdcc7008f65dcec1b2674", "patch": "@@ -14068,8 +14068,9 @@ fi\n rm -f conftest*\n \n \n-    # Test for bugs early in glibc-2.2.x series\n-    if test \"$cross_compiling\" = yes; then\n+    if test $enable_clocale = auto; then\n+      # Test for bugs early in glibc-2.2.x series\n+      if test \"$cross_compiling\" = yes; then\n   enable_clocale_flag=generic\n else\n   cat >conftest.$ac_ext <<_ACEOF\n@@ -14079,19 +14080,19 @@ cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n \n-    #define _GNU_SOURCE 1\n-    #include <locale.h>\n-    #include <string.h>\n-    #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n-    extern __typeof(newlocale) __newlocale;\n-    extern __typeof(duplocale) __duplocale;\n-    extern __typeof(strcoll_l) __strcoll_l;\n-    #endif\n-    int main()\n-    {\n-        const char __one[] = \"\ufffduglein Augmen\";\n+      #define _GNU_SOURCE 1\n+      #include <locale.h>\n+      #include <string.h>\n+      #if __GLIBC__ > 2 || (__GLIBC__ == 2 && __GLIBC_MINOR__ > 2)\n+      extern __typeof(newlocale) __newlocale;\n+      extern __typeof(duplocale) __duplocale;\n+      extern __typeof(strcoll_l) __strcoll_l;\n+      #endif\n+      int main()\n+      {\n+\tconst char __one[] = \"\ufffduglein Augmen\";\n         const char __two[] = \"\ufffduglein\";\n-        int i;\n+       \tint i;\n         int j;\n         __locale_t        loc;\n         __locale_t        loc_dup;\n@@ -14100,7 +14101,7 @@ cat >>conftest.$ac_ext <<_ACEOF\n         i = __strcoll_l(__one, __two, loc);\n         j = __strcoll_l(__one, __two, loc_dup);\n         return 0;\n-    }\n+      }\n \n _ACEOF\n rm -f conftest$ac_exeext\n@@ -14125,6 +14126,7 @@ enable_clocale_flag=generic\n fi\n rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n+    fi\n \n     # Set it to scream when it hurts.\n     ac_save_CFLAGS=\"$CFLAGS\"\n@@ -16569,7 +16571,7 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n \n   # Fake what AC_TRY_COMPILE does.  XXX Look at redoing this new-style.\n     cat > conftest.$ac_ext << EOF\n-#line 16572 \"configure\"\n+#line 16574 \"configure\"\n int main()\n {\n   // NB: _Atomic_word not necessarily int."}, {"sha": "ab19b6fa83a4aaeb0d160034fc986c9d9b82e63e", "filename": "libstdc++-v3/docs/html/install.html", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2Fdocs%2Fhtml%2Finstall.html", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ba741304a84766aa86fdcc7008f65dcec1b2674/libstdc%2B%2B-v3%2Fdocs%2Fhtml%2Finstall.html", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fdocs%2Fhtml%2Finstall.html?ref=1ba741304a84766aa86fdcc7008f65dcec1b2674", "patch": "@@ -80,9 +80,10 @@ <h2><a name=\"prereqs\">Tools you will need beforehand</a></h2>\n       information must be installed.\n \n       <p>\n-      Note that those sanity checks are also perfomed when an explicit\n-      --enable-clocale=gnu configure option is used:  this behavior is\n-      new in gcc 4.2.1 and defends against misconfigurations.\n+      Note however that the sanity checks involving the de_DE locale are\n+      skipped when an explicit --enable-clocale=gnu configure option is\n+      used: only the basic checks are carried out, defending against\n+      misconfigurations.\n       </p>\n \n       <p>"}]}