{"sha": "24c9edfa73632276d7698c103f35833f29804d98", "node_id": "C_kwDOANBUbNoAKDI0YzllZGZhNzM2MzIyNzZkNzY5OGMxMDNmMzU4MzNmMjk4MDRkOTg", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2023-02-24T21:11:17Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2023-02-24T21:14:20Z"}, "message": "fortran: Plug leak of associated_dummy memory. [PR108923]\n\nThis fixes a memory leak by accompanying the release of\ngfc_actual_arglist elements' memory with a release of the\nassociated_dummy field memory (if allocated).\nActual argument copy is adjusted as well so that each copy can free\nits field independently.\n\n\tPR fortran/108923\n\ngcc/fortran/ChangeLog:\n\n\t* expr.cc (gfc_free_actual_arglist): Free associated_dummy\n\tmemory.\n\t(gfc_copy_actual_arglist): Make a copy of the associated_dummy\n\tfield if it is set in the original element.", "tree": {"sha": "03eb074b71262dfcdfc7b703bf9ae7f4c2fc2b4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03eb074b71262dfcdfc7b703bf9ae7f4c2fc2b4e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/24c9edfa73632276d7698c103f35833f29804d98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24c9edfa73632276d7698c103f35833f29804d98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24c9edfa73632276d7698c103f35833f29804d98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24c9edfa73632276d7698c103f35833f29804d98/comments", "author": null, "committer": null, "parents": [{"sha": "45f406c4f62e516b58dcda20b5a7aa43ff0aa0f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45f406c4f62e516b58dcda20b5a7aa43ff0aa0f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45f406c4f62e516b58dcda20b5a7aa43ff0aa0f3"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "4662328bf3156989c6b008d0d913588cc3e3ce4e", "filename": "gcc/fortran/expr.cc", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/24c9edfa73632276d7698c103f35833f29804d98/gcc%2Ffortran%2Fexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/24c9edfa73632276d7698c103f35833f29804d98/gcc%2Ffortran%2Fexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.cc?ref=24c9edfa73632276d7698c103f35833f29804d98", "patch": "@@ -545,6 +545,7 @@ gfc_free_actual_arglist (gfc_actual_arglist *a1)\n       a2 = a1->next;\n       if (a1->expr)\n \tgfc_free_expr (a1->expr);\n+      free (a1->associated_dummy);\n       free (a1);\n       a1 = a2;\n     }\n@@ -565,6 +566,12 @@ gfc_copy_actual_arglist (gfc_actual_arglist *p)\n       new_arg = gfc_get_actual_arglist ();\n       *new_arg = *p;\n \n+      if (p->associated_dummy != NULL)\n+\t{\n+\t  new_arg->associated_dummy = gfc_get_dummy_arg ();\n+\t  *new_arg->associated_dummy = *p->associated_dummy;\n+\t}\n+\n       new_arg->expr = gfc_copy_expr (p->expr);\n       new_arg->next = NULL;\n "}]}