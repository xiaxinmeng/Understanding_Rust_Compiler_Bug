{"sha": "6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIwYzIzMzZiYTIyYjNkMGU4ZDM2NjUxMTY5YTViYWIyYjI1ZmUzNQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2008-04-03T12:49:27Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-04-03T12:49:27Z"}, "message": "re PR target/35795 (Revision 133787 breaks ia64)\n\n2008-04-03  Jan Hubicka  <jh@suse.cz>\n\n\tPR tree-optimization/35795\n\t* alpha/alpha.c (alpha_output_mi_thunk_osf): Free after compilation.\n\t* sparc/sparc.c (sparc_output_mi_thunk): Likewise.\n\t* ia64/ia64.c (ia64_output_mi_thunk): Likewise.\n\t* m68k/m68k.c (m68k_output_mi_thunk): Likewise.\n\t* score/score3.c (score3_output_mi_thunk): Likewise.\n\t* score/score7.c (score7_output_mi_thunk): Likewise.\n\t* mips/mips.c (mips_output_mi_thunk): Likewise.\n\nFrom-SVN: r133868", "tree": {"sha": "a661582bb7165b9e43a0b7cbef46528c090586cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a661582bb7165b9e43a0b7cbef46528c090586cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/comments", "author": null, "committer": null, "parents": [{"sha": "b47ee38692ad7393bdaf2c366a6734d7dd60e951", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b47ee38692ad7393bdaf2c366a6734d7dd60e951", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b47ee38692ad7393bdaf2c366a6734d7dd60e951"}], "stats": {"total": 84, "additions": 51, "deletions": 33}, "files": [{"sha": "126309259da4bb777152a734f4db78a8fbb20fb1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 44, "deletions": 33, "changes": 77, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -1,3 +1,14 @@\n+2008-04-03  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR tree-optimization/35795\n+\t* alpha/alpha.c (alpha_output_mi_thunk_osf): Free after compilation.\n+\t* sparc/sparc.c (sparc_output_mi_thunk): Likewise.\n+\t* ia64/ia64.c (ia64_output_mi_thunk): Likewise.\n+\t* m68k/m68k.c (m68k_output_mi_thunk): Likewise.\n+\t* score/score3.c (score3_output_mi_thunk): Likewise.\n+\t* score/score7.c (score7_output_mi_thunk): Likewise.\n+\t* mips/mips.c (mips_output_mi_thunk): Likewise.\n+\n 2008-04-03  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-vrp.c (extract_range_from_unary_expr): Handle all\n@@ -22,42 +33,42 @@\n \n 2008-04-03  Paolo Bonzini  <bonzini@gnu.org>\n \n-        * tree-inline.c (copy_generic_body, copy_decl_no_change): Export.\n-        (remap_block): Call id->transform_lang_insert_block instead\n-        of langhook.\n-        (optimize_inline_calls, unsave_expr_now, tree_function_versioning):\n-        Set id.transform_lang_insert_block to NULL.\n-        (clone_body): Move to cp/optimize.c\n-        * tree-inline.h (struct copy_body_data): Change\n-        transform_lang_insert_block to function pointer.\n-        (copy_generic_body, copy_decl_no_change): Export.\n-        * langhooks.h (struct lang_hooks_for_decls): Kill insert_block.\n-        * langhooks-def.h (LANG_HOOKS_INSERT_BLOCK): Kill.\n-        (LANG_HOOKS_DECLS): Remove LANG_HOOKS_INSERT_BLOCK.\n-\n-        * c-tree.h (insert_block): Kill.\n-        * c-decl.c (insert_block): Kill.\n+\t* tree-inline.c (copy_generic_body, copy_decl_no_change): Export.\n+\t(remap_block): Call id->transform_lang_insert_block instead\n+\tof langhook.\n+\t(optimize_inline_calls, unsave_expr_now, tree_function_versioning):\n+\tSet id.transform_lang_insert_block to NULL.\n+\t(clone_body): Move to cp/optimize.c\n+\t* tree-inline.h (struct copy_body_data): Change\n+\ttransform_lang_insert_block to function pointer.\n+\t(copy_generic_body, copy_decl_no_change): Export.\n+\t* langhooks.h (struct lang_hooks_for_decls): Kill insert_block.\n+\t* langhooks-def.h (LANG_HOOKS_INSERT_BLOCK): Kill.\n+\t(LANG_HOOKS_DECLS): Remove LANG_HOOKS_INSERT_BLOCK.\n+\n+\t* c-tree.h (insert_block): Kill.\n+\t* c-decl.c (insert_block): Kill.\n \n 2008-04-03  Paolo Bonzini  <bonzini@gnu.org>\n \n-        * c-objc-common.h (LANG_HOOKS_FUNCTION_ENTER_NESTED,\n-        LANG_HOOKS_FUNCTION_LEAVE_NESTED): Delete.\n-        * c-tree.h (c_push_function_context, c_pop_function_context): Remove\n-        argument.\n-        * c-decl.c (c_push_function_context, c_pop_function_context): Remove\n-        argument, call {push,pop}_function_context from here.\n-        * c-parser.c: Use c_{push,pop}_function_context.\n-\n-        * function.c (push_function_context_to): Move meat ...\n-        (push_function_context): ... here.  Simplify.\n-        * function.c (pop_function_context_from): Move meat ...\n-        (pop_function_context): ... here.  Simplify.\n-        * langhooks.h (struct lang_hooks_for_functions): Remove enter_nested,\n-        leave_nested).\n-        * langhooks-def.h (LANG_HOOKS_FUNCTION_ENTER_NESTED,\n-        LANG_HOOKS_FUNCTION_LEAVE_NESTED): Delete.\n-        (LANG_HOOKS_FUNCTION_INITIALIZER): Delete them from here.\n-        * tree.h (push_function_context_to, pop_function_context_from): Remove.\n+\t* c-objc-common.h (LANG_HOOKS_FUNCTION_ENTER_NESTED,\n+\tLANG_HOOKS_FUNCTION_LEAVE_NESTED): Delete.\n+\t* c-tree.h (c_push_function_context, c_pop_function_context): Remove\n+\targument.\n+\t* c-decl.c (c_push_function_context, c_pop_function_context): Remove\n+\targument, call {push,pop}_function_context from here.\n+\t* c-parser.c: Use c_{push,pop}_function_context.\n+\n+\t* function.c (push_function_context_to): Move meat ...\n+\t(push_function_context): ... here.  Simplify.\n+\t* function.c (pop_function_context_from): Move meat ...\n+\t(pop_function_context): ... here.  Simplify.\n+\t* langhooks.h (struct lang_hooks_for_functions): Remove enter_nested,\n+\tleave_nested).\n+\t* langhooks-def.h (LANG_HOOKS_FUNCTION_ENTER_NESTED,\n+\tLANG_HOOKS_FUNCTION_LEAVE_NESTED): Delete.\n+\t(LANG_HOOKS_FUNCTION_INITIALIZER): Delete them from here.\n+\t* tree.h (push_function_context_to, pop_function_context_from): Remove.\n \n 2008-04-03  Ben Elliston  <bje@au.ibm.com>\n "}, {"sha": "9e650b9ae144fbe116c852823319ba1806dbb90d", "filename": "gcc/config/alpha/alpha.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Falpha%2Falpha.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Falpha%2Falpha.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Falpha.c?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -8339,6 +8339,7 @@ alpha_output_mi_thunk_osf (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n+  free_after_compilation (cfun);\n }\n #endif /* TARGET_ABI_OSF */\n \f"}, {"sha": "ceda8833db38e900f12ff26318e0a257e2c59593", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -9694,6 +9694,7 @@ ia64_output_mi_thunk (FILE *file, tree thunk ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n+  free_after_compilation (cfun);\n \n   reload_completed = 0;\n   epilogue_completed = 0;"}, {"sha": "6160237ede601d16615a971f6146c8e596e70a64", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -4348,6 +4348,7 @@ m68k_output_mi_thunk (FILE *file, tree thunk ATTRIBUTE_UNUSED,\n   /* Restore the original PIC register.  */\n   if (flag_pic)\n     SET_REGNO (pic_offset_table_rtx, PIC_REG);\n+  free_after_compilation (cfun);\n }\n \n /* Worker function for TARGET_STRUCT_VALUE_RTX.  */"}, {"sha": "861a308ab73d6cd6f14a07a7af0ab65df0022a94", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -11685,6 +11685,7 @@ mips_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n+  free_after_compilation (cfun);\n \n   /* Clean up the vars set above.  Note that final_end_function resets\n      the global pointer for us.  */"}, {"sha": "592f5f5a1f798aa59592cb62194205b04f93c278", "filename": "gcc/config/score/score3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fscore%2Fscore3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fscore%2Fscore3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fscore%2Fscore3.c?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -382,6 +382,7 @@ score3_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n+  free_after_compilation (cfun);\n \n   /* Clean up the vars set above.  Note that final_end_function resets\n      the global pointer for us.  */"}, {"sha": "3c16b0d6173c2d27842e4c86618b64db3049343c", "filename": "gcc/config/score/score7.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fscore%2Fscore7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fscore%2Fscore7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fscore%2Fscore7.c?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -381,6 +381,7 @@ score7_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n+  free_after_compilation (cfun);\n \n   /* Clean up the vars set above.  Note that final_end_function resets\n      the global pointer for us.  */"}, {"sha": "54c81b191f4cc35af5f0415db49d3028115682bd", "filename": "gcc/config/sparc/sparc.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fsparc%2Fsparc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b0c2336ba22b3d0e8d36651169a5bab2b25fe35/gcc%2Fconfig%2Fsparc%2Fsparc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.c?ref=6b0c2336ba22b3d0e8d36651169a5bab2b25fe35", "patch": "@@ -8818,6 +8818,7 @@ sparc_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n   final_start_function (insn, file, 1);\n   final (insn, file, 1);\n   final_end_function ();\n+  free_after_compilation (cfun);\n \n   reload_completed = 0;\n   epilogue_completed = 0;"}]}