{"sha": "59b5b46686c45c803118ad4dee42d8919e305bc0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTliNWI0NjY4NmM0NWM4MDMxMThhZDRkZWU0MmQ4OTE5ZTMwNWJjMA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-12-15T03:44:58Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-12-15T03:44:58Z"}, "message": "re PR middle-end/61558 (ICE: Segmentation fault)\n\n\n\tPR ipa/61558\n\t* symtab.c (symbol_table::insert_to_assembler_name_hash\n\tsymbol_table::unlink_from_assembler_name_hash): Do not ICE when\t\n\tDECL_ASSEMBLER_NAME is NULL.\n\nFrom-SVN: r218729", "tree": {"sha": "f143208f83496b098dd8ffd5779764b33414e977", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f143208f83496b098dd8ffd5779764b33414e977"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/59b5b46686c45c803118ad4dee42d8919e305bc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59b5b46686c45c803118ad4dee42d8919e305bc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59b5b46686c45c803118ad4dee42d8919e305bc0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59b5b46686c45c803118ad4dee42d8919e305bc0/comments", "author": null, "committer": null, "parents": [{"sha": "38c1b72fcb541aca26ad94f4e9a7d9c8261422ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38c1b72fcb541aca26ad94f4e9a7d9c8261422ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38c1b72fcb541aca26ad94f4e9a7d9c8261422ed"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "253db82911e00b7f7d527dc53bb4ffb627d371f4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=59b5b46686c45c803118ad4dee42d8919e305bc0", "patch": "@@ -1,3 +1,10 @@\n+2014-12-14  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/61558\n+\t* symtab.c (symbol_table::insert_to_assembler_name_hash\n+\tsymbol_table::unlink_from_assembler_name_hash): Do not ICE when\t\n+\tDECL_ASSEMBLER_NAME is NULL.\n+\n 2014-12-14  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* cgraphunit.c (analyze_functions): Always analyze targets of aliases."}, {"sha": "37e4a94cf2289632419c0c82805977e4031c3398", "filename": "gcc/symtab.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2Fsymtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2Fsymtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsymtab.c?ref=59b5b46686c45c803118ad4dee42d8919e305bc0", "patch": "@@ -168,6 +168,11 @@ symbol_table::insert_to_assembler_name_hash (symtab_node *node,\n \n       tree name = DECL_ASSEMBLER_NAME (node->decl);\n \n+      /* C++ FE can produce decls without associated assembler name and insert\n+\t them to symtab to hold section or TLS information.  */\n+      if (!name)\n+\treturn;\n+\n       hashval_t hash = decl_assembler_name_hash (name);\n       aslot = assembler_name_hash->find_slot_with_hash (name, hash, INSERT);\n       gcc_assert (*aslot != node);\n@@ -209,6 +214,10 @@ symbol_table::unlink_from_assembler_name_hash (symtab_node *node,\n \t{\n \t  tree name = DECL_ASSEMBLER_NAME (node->decl);\n           symtab_node **slot;\n+\n+\t  if (!name)\n+\t    return;\n+\n \t  hashval_t hash = decl_assembler_name_hash (name);\n \t  slot = assembler_name_hash->find_slot_with_hash (name, hash,\n \t\t\t\t\t\t\t   NO_INSERT);"}, {"sha": "959274724838ce9d1988a4e448ba8cd82b8db3d6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=59b5b46686c45c803118ad4dee42d8919e305bc0", "patch": "@@ -1,4 +1,9 @@\n-2014-12-14  Jan HUbicka  <hubicka@ucw.cz>\n+2014-12-14  Jan Hubicka  <hubicka@ucw.cz>\t\n+\t\n+\tPR ipa/61558\n+\t* g++.dg/torture/pr61558.C: New testcase.\n+\n+2014-12-14  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR lto/64043\n \t* g++.dg/lto/pr64043_0.C: New testcase."}, {"sha": "1e398e9155f0dee0cf35aa1d07c7b21444202bff", "filename": "gcc/testsuite/g++.dg/torture/pr61558.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr61558.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59b5b46686c45c803118ad4dee42d8919e305bc0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr61558.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr61558.C?ref=59b5b46686c45c803118ad4dee42d8919e305bc0", "patch": "@@ -0,0 +1,6 @@\n+// { dg-do compile }\n+static __typeof 0 a __attribute__ ((__weakref__ (\"\")));\n+template <typename> class A\n+{\n+  static __thread int b;\n+};"}]}