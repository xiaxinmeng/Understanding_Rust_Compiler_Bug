{"sha": "dbabddf32d99e53e3dd0953267b87939ecb014f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGJhYmRkZjMyZDk5ZTUzZTNkZDA5NTMyNjdiODc5MzllY2IwMTRmOQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-08-14T07:43:09Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-08-14T07:43:09Z"}, "message": "re PR middle-end/53411 (ICE in move_unallocated_pseudos)\n\n\tPR middle-end/53411\n\tPR rtl-optimization/53495\n\t* ira.c (ira): Move delete_trivially_dead_insns call before\n\tfind_moveable_pseudos call.\n\n\t* gcc.c-torture/compile/pr53411.c: New test.\n\t* gcc.c-torture/compile/pr53495.c: New test.\n\nFrom-SVN: r190376", "tree": {"sha": "a87c4f8fcc9426a38fd7339d86bb53c8fcb39056", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a87c4f8fcc9426a38fd7339d86bb53c8fcb39056"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dbabddf32d99e53e3dd0953267b87939ecb014f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbabddf32d99e53e3dd0953267b87939ecb014f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbabddf32d99e53e3dd0953267b87939ecb014f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbabddf32d99e53e3dd0953267b87939ecb014f9/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2ad74f71d118d54173823e46394facb3e6087818", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ad74f71d118d54173823e46394facb3e6087818", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ad74f71d118d54173823e46394facb3e6087818"}], "stats": {"total": 94, "additions": 91, "deletions": 3}, "files": [{"sha": "f24b84ae4072bec9a40d79c081ba1dc401ddc5e7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dbabddf32d99e53e3dd0953267b87939ecb014f9", "patch": "@@ -1,3 +1,10 @@\n+2012-08-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/53411\n+\tPR rtl-optimization/53495\n+\t* ira.c (ira): Move delete_trivially_dead_insns call before\n+\tfind_moveable_pseudos call.\n+\n 2012-08-13  Steven Bosscher  <steven@gcc.gnu.org>\n \n \t* tree-ssa-pre.c (do_regular_insertion): Add FIXME markers at points"}, {"sha": "5000d433bec23e003c56e0bab3d11b8d232e90d0", "filename": "gcc/ira.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Fira.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Fira.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira.c?ref=dbabddf32d99e53e3dd0953267b87939ecb014f9", "patch": "@@ -4206,6 +4206,9 @@ ira (FILE *f)\n \n   allocated_reg_info_size = max_reg_num ();\n \n+  if (delete_trivially_dead_insns (get_insns (), max_reg_num ()))\n+    df_analyze ();\n+\n   /* It is not worth to do such improvement when we use a simple\n      allocation because of -O0 usage or because the function is too\n      big.  */\n@@ -4288,9 +4291,6 @@ ira (FILE *f)\n     check_allocation ();\n #endif\n \n-  if (delete_trivially_dead_insns (get_insns (), max_reg_num ()))\n-    df_analyze ();\n-\n   if (max_regno != max_regno_before_ira)\n     {\n       regstat_free_n_sets_and_refs ();"}, {"sha": "e1e12837124bc3bd13cf38e5095c7a825d9c23f9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dbabddf32d99e53e3dd0953267b87939ecb014f9", "patch": "@@ -1,3 +1,10 @@\n+2012-08-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/53411\n+\tPR rtl-optimization/53495\n+\t* gcc.c-torture/compile/pr53411.c: New test.\n+\t* gcc.c-torture/compile/pr53495.c: New test.\n+\n 2012-08-13  Richard Guenther  <rguenther@suse.de>\n \n \t* gcc.dg/tree-prof/update-loopch.c: Adjust."}, {"sha": "e88ecbc4ca298b81fa16b8735d01a4cba7c5118e", "filename": "gcc/testsuite/gcc.c-torture/compile/pr53411.c", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr53411.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr53411.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr53411.c?ref=dbabddf32d99e53e3dd0953267b87939ecb014f9", "patch": "@@ -0,0 +1,33 @@\n+/* PR middle-end/53411 */\n+\n+int a, b, c, d, e, f, g, h;\n+void fn1 (void);\n+int fn2 (void);\n+\n+int\n+fn3 (x)\n+     int x;\n+{\n+  return a ? 0 : x;\n+}\n+\n+void\n+fn4 (char x)\n+{\n+  int i, j, k;\n+  for (; e; e++)\n+    if (fn2 ())\n+      {\n+\tf = 1;\n+\tk = 0;\n+\tfor (; k <= 1; k++)\n+\t  {\n+\t    j = ~x;\n+\t    i = f * j;\n+\t    h = (fn3 (i | 0 <= c ^ 9L) != b | d) & 8;\n+\t    g = x | 1;\n+\t    fn1 ();\n+\t  }\n+      }\n+  c = x;\n+}"}, {"sha": "957013165a02b5c8e32e4206848063f37b2d158b", "filename": "gcc/testsuite/gcc.c-torture/compile/pr53495.c", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr53495.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbabddf32d99e53e3dd0953267b87939ecb014f9/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr53495.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr53495.c?ref=dbabddf32d99e53e3dd0953267b87939ecb014f9", "patch": "@@ -0,0 +1,41 @@\n+/* PR rtl-optimization/53495 */\n+\n+int a, b, c, d, e, g;\n+static char\n+fn1 (char p1, int p2)\n+{\n+  return p1 || p2 < 0 || p2 >= 1 || 1 >> p2 ? p1 : 0;\n+}\n+\n+static long long fn2 (int *, int);\n+static int fn3 ();\n+void\n+fn4 ()\n+{\n+  fn3 ();\n+  fn2 (&a, d);\n+}\n+\n+long long\n+fn2 (int *p1, int p2)\n+{\n+  int f = -1L;\n+  for (; c <= 1; c++)\n+    {\n+      *p1 = 0;\n+      *p1 = fn1 (c, p2 ^ f);\n+    }\n+  a = 0;\n+  e = p2;\n+  return 0;\n+}\n+\n+int\n+fn3 ()\n+{\n+  b = 3;\n+  for (; b; b--)\n+    c++;\n+  g = 0 >= c;\n+  return 0;\n+}"}]}