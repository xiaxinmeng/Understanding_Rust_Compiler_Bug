{"sha": "d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDZlYWNkNDgzNjBkNWExZThkNWNhNmVmN2ExODI2ZjcyYzA1Y2ViMg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-10-06T05:29:56Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-10-06T05:29:56Z"}, "message": "Makefile.in (LIB2FUNCS): Add _clz.\n\n        * Makefile.in (LIB2FUNCS): Add _clz.\n        * libgcc2.c (__ffsdi2): Use count_trailing_zeros.\n        (__clz_tab): Put in its own unit, non-static.\n        * libgcc2.h: Always include longlong.h.\n\nFrom-SVN: r36744", "tree": {"sha": "eb967cd058e472946fc54fbdae14374af6029882", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb967cd058e472946fc54fbdae14374af6029882"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/comments", "author": null, "committer": null, "parents": [{"sha": "c74fa144ca7cc415fbbb7c3a46ec6c71c3f055ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c74fa144ca7cc415fbbb7c3a46ec6c71c3f055ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c74fa144ca7cc415fbbb7c3a46ec6c71c3f055ca"}], "stats": {"total": 46, "additions": 25, "deletions": 21}, "files": [{"sha": "111b37d45fe2b34df559ecf3f377b8d0491bc6a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "patch": "@@ -1,3 +1,10 @@\n+2000-10-05  Richard Henderson  <rth@cygnus.com>\n+\n+\t* Makefile.in (LIB2FUNCS): Add _clz.\n+\t* libgcc2.c (__ffsdi2): Use count_trailing_zeros.\n+\t(__clz_tab): Put in its own unit, non-static.\n+\t* libgcc2.h: Always include longlong.h.\n+\n 2000-10-05  Richard Henderson  <rth@cygnus.com>\n \n \t* config/alpha/alpha.c (alpha_emit_setcc): Don't swap GT tests"}, {"sha": "669a8ff37b229b9855f685c279245b3090b107f4", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "patch": "@@ -738,7 +738,7 @@ LIB1FUNCS = _mulsi3 _udivsi3 _divsi3 _umodsi3 _modsi3 \\\n \n # Library members defined in libgcc2.c.\n LIB2FUNCS = _muldi3 _divdi3 _moddi3 _udivdi3 _umoddi3 _negdi2 \\\n-     _lshrdi3 _ashldi3 _ashrdi3 _ffsdi2 \\\n+     _lshrdi3 _ashldi3 _ashrdi3 _ffsdi2 _clz \\\n     _udiv_w_sdiv _udivmoddi4 _cmpdi2 _ucmpdi2 _floatdidf _floatdisf \\\n     _fixunsdfsi _fixunssfsi _fixunsdfdi _fixdfdi _fixunssfdi _fixsfdi \\\n     _fixxfdi _fixunsxfdi _floatdixf _fixunsxfsi \\"}, {"sha": "20e7778f7000fc147a1cb53025a00ea7c9280be6", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 17, "deletions": 14, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "patch": "@@ -165,19 +165,19 @@ __ashrdi3 (DWtype u, word_type b)\n DWtype\n __ffsdi2 (DWtype u)\n {\n-  DWunion uu, w;\n+  DWunion uu;\n+  UWtype word, count, add;\n+\n   uu.ll = u;\n-  w.s.high = 0;\n-  w.s.low = ffs (uu.s.low);\n-  if (w.s.low != 0)\n-    return w.ll;\n-  w.s.low = ffs (uu.s.high);\n-  if (w.s.low != 0)\n-    {\n-      w.s.low += BITS_PER_UNIT * sizeof (Wtype);\n-      return w.ll;\n-    }\n-  return w.ll;\n+  if (uu.s.low != 0)\n+    word = uu.s.low, add = 0;\n+  else if (uu.s.high != 0)\n+    word = uu.s.high, add = BITS_PER_UNIT * sizeof (Wtype);\n+  else\n+    return 0;\n+\n+  count_trailing_zeros (count, word);\n+  return count + add + 1;\n }\n #endif\n \f\n@@ -315,8 +315,8 @@ __udiv_w_sdiv (UWtype *rp __attribute__ ((__unused__)),\n #define L_udivmoddi4\n #endif\n \n-#ifdef L_udivmoddi4\n-static const UQItype __clz_tab[] =\n+#ifdef L_clz\n+const UQItype __clz_tab[] =\n {\n   0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,\n   6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,\n@@ -327,6 +327,9 @@ static const UQItype __clz_tab[] =\n   8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,\n   8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,\n };\n+#endif\n+\n+#ifdef L_udivmoddi4\n \n #if (defined (L_udivdi3) || defined (L_divdi3) || \\\n      defined (L_umoddi3) || defined (L_moddi3))"}, {"sha": "e52867399c9bf49d273a88ff3ca39411bbd3a100", "filename": "gcc/libgcc2.h", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2Flibgcc2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2/gcc%2Flibgcc2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.h?ref=d6eacd48360d5a1e8d5ca6ef7a1826f72c05ceb2", "patch": "@@ -299,12 +299,6 @@ typedef union\n   DWtype ll;\n } DWunion;\n \n-#if (defined (L_udivmoddi4) || defined (L_muldi3) || defined (L_udiv_w_sdiv)\\\n-     || defined (L_divdi3) || defined (L_udivdi3) \\\n-     || defined (L_moddi3) || defined (L_umoddi3))\n-\n #include \"longlong.h\"\n \n-#endif /* udiv or mul */\n-\n #endif /* __LIBGCC2_H__ */"}]}