{"sha": "b5ccf84723cddc99d3800e610b625980d47eecde", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjVjY2Y4NDcyM2NkZGM5OWQzODAwZTYxMGI2MjU5ODBkNDdlZWNkZQ==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-04-11T01:12:55Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-04-11T01:12:55Z"}, "message": "sparc.h (ASM_OUTPUT_INTERNAL_LABELREF): Delete.\n\n\t* sparc/sparc.h (ASM_OUTPUT_INTERNAL_LABELREF): Delete.\n\t(FUNCTION_PROFILER): Use ASM_GENERATE_INTERNAL_LABEL instead.\n\nFrom-SVN: r11695", "tree": {"sha": "dfca1b92f69f6fc72b07dbbd4737915acf66e98f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dfca1b92f69f6fc72b07dbbd4737915acf66e98f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5ccf84723cddc99d3800e610b625980d47eecde", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5ccf84723cddc99d3800e610b625980d47eecde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5ccf84723cddc99d3800e610b625980d47eecde", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5ccf84723cddc99d3800e610b625980d47eecde/comments", "author": null, "committer": null, "parents": [{"sha": "1fbf41ca128f2e6cde3abcc2e7400919c8103d37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fbf41ca128f2e6cde3abcc2e7400919c8103d37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1fbf41ca128f2e6cde3abcc2e7400919c8103d37"}], "stats": {"total": 26, "additions": 9, "deletions": 17}, "files": [{"sha": "be3176360001f2d88df75ea86bd9a60b4198290a", "filename": "gcc/config/sparc/sparc.h", "status": "modified", "additions": 9, "deletions": 17, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5ccf84723cddc99d3800e610b625980d47eecde/gcc%2Fconfig%2Fsparc%2Fsparc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5ccf84723cddc99d3800e610b625980d47eecde/gcc%2Fconfig%2Fsparc%2Fsparc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.h?ref=b5ccf84723cddc99d3800e610b625980d47eecde", "patch": "@@ -1676,17 +1676,18 @@ extern int leaf_function;\n \n #define FUNCTION_PROFILER(FILE, LABELNO)  \t\t\t\\\n   do {\t\t\t\t\t\t\t\t\\\n+    char buf[20];\t\t\t\t\t\t\\\n+    ASM_GENERATE_INTERNAL_LABEL (buf, \"LP\", (LABELNO));\t\t\\\n     if (! TARGET_ARCH64)\t\t\t\t\t\\\n       fputs (\"\\tst %g2,[%fp-4]\\n\", FILE);\t\t\t\\\n-    fputs (\"\\tsethi %hi(\", (FILE));\t\t\t\t\\\n-    ASM_OUTPUT_INTERNAL_LABELREF (FILE, \"LP\", LABELNO);\t\t\\\n-    fputs (\"),%o0\\n\", (FILE));\t\t\t\t\t\\\n+    fputs (\"\\tsethi %hi(\", FILE);\t\t\t\t\\\n+    assemble_name (FILE, buf);\t\t\t\t\t\\\n+    fputs (\"),%o0\\n\", FILE);\t\t\t\t\t\\\n     if (TARGET_MEDANY)\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\tadd %%o0,%s,%%o0\\n\",\t\t\t\\\n-\t       MEDANY_BASE_REG);\t\t\t\t\\\n-    fputs (\"\\tcall mcount\\n\\tadd %lo(\", (FILE));\t\t\\\n-    ASM_OUTPUT_INTERNAL_LABELREF (FILE, \"LP\", LABELNO);\t\t\\\n-    fputs (\"),%o0,%o0\\n\", (FILE));\t\t\t\t\\\n+      fprintf (FILE, \"\\tadd %o0,%s,%o0\\n\", MEDANY_BASE_REG);\t\\\n+    fputs (\"\\tcall mcount\\n\\tadd %o0,%lo(\", FILE);\t\t\\\n+    assemble_name (FILE, buf);\t\t\t\t\t\\\n+    fputs (\"),%o0\\n\", FILE);\t\t\t\t\t\\\n     if (! TARGET_ARCH64)\t\t\t\t\t\\\n       fputs (\"\\tld [%fp-4],%g2\\n\", FILE);\t\t\t\\\n   } while (0)\n@@ -2803,15 +2804,6 @@ extern struct rtx_def *legitimize_pic_address ();\n #define ASM_OUTPUT_INTERNAL_LABEL(FILE,PREFIX,NUM)\t\\\n   fprintf (FILE, \"%s%d:\\n\", PREFIX, NUM)\n \n-/* This is how to output a reference to an internal numbered label where\n-   PREFIX is the class of label and NUM is the number within the class.  */\n-/* FIXME:  This should be used throughout gcc, and documented in the texinfo\n-   files.  There is no reason you should have to allocate a buffer and\n-   `sprintf' to reference an internal label (as opposed to defining it).  */\n-\n-#define ASM_OUTPUT_INTERNAL_LABELREF(FILE,PREFIX,NUM)\t\\\n-  fprintf (FILE, \"%s%d\", PREFIX, NUM)\n-\n /* This is how to store into the string LABEL\n    the symbol_ref name of an internal numbered label where\n    PREFIX is the class of label and NUM is the number within the class."}]}