{"sha": "16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTZkYjJhNmFhNzcwZjJlMzI4NWYzZjRlOWFiOTU1YTdjNGNjZTVjMQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2014-11-23T17:14:10Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2014-11-23T17:14:10Z"}, "message": "gfortran.h (gfc_option_t): Remove warn_tabs.\n\n2014-11-23  Tobias Burnus  <burnus@net-b.de>\n        Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\ngcc/fortran/\n        * gfortran.h (gfc_option_t): Remove warn_tabs.\n        * lang.opt (Wpedantic): Add.\n        (Wtabs): Use Var and LangEnabledBy.\n        * options.c (gfc_init_options, gfc_post_options,\n        set_Wall): Remove -Wtabs handling.\n        (gfc_handle_option): Update -std=, remove OPT_Wtabs.\n        * scanner.c (gfc_gobble_whitespace): Update for\n        flag-variable renaming.\n        (load_line): Ditto. Pass warn flag to diagnostic.\n\ngcc/testsuite/\n        * gfortran.dg/tab_continuation.f: Update dg-*.\n\n\nCo-Authored-By: Manuel L\u00f3pez-Ib\u00e1\u00f1ez <manu@gcc.gnu.org>\n\nFrom-SVN: r217985", "tree": {"sha": "06de2eb8f0f1e7d94d2dcaa8a34b6bc4b1206af3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/06de2eb8f0f1e7d94d2dcaa8a34b6bc4b1206af3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5e383359eac455ec79830a25b81d7b4bc36abc7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e383359eac455ec79830a25b81d7b4bc36abc7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e383359eac455ec79830a25b81d7b4bc36abc7a"}], "stats": {"total": 70, "additions": 45, "deletions": 25}, "files": [{"sha": "ddccf96e72c0ec14e4600443e0d9669d97014723", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "patch": "@@ -1,3 +1,16 @@\n+2014-11-23  Tobias Burnus  <burnus@net-b.de>\n+\t    Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* gfortran.h (gfc_option_t): Remove warn_tabs.\n+\t* lang.opt (Wpedantic): Add.\n+\t(Wtabs): Use Var and LangEnabledBy.\n+\t* options.c (gfc_init_options, gfc_post_options,\n+\tset_Wall): Remove -Wtabs handling.\n+\t(gfc_handle_option): Update -std=, remove OPT_Wtabs.\n+\t* scanner.c (gfc_gobble_whitespace): Update for\n+\tflag-variable renaming.\n+\t(load_line): Ditto. Pass warn flag to diagnostic.\n+\n 2014-11-22  Tobias Burnus  <burnus@net-b.de>\n \n \t* trans-expr.c (gfc_caf_get_image_index): Fix image calculation."}, {"sha": "1ee7dd497955b0b4b29525be6decc2394f2dc6b5", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "patch": "@@ -2452,7 +2452,6 @@ typedef struct\n   int warn_implicit_procedure;\n   int warn_line_truncation;\n   int warn_surprising;\n-  int warn_tabs;\n   int warn_underflow;\n   int warn_intrinsic_shadow;\n   int warn_intrinsics_std;"}, {"sha": "5da0453b9beda71e0f86a811b86bddf0127749f8", "filename": "gcc/fortran/lang.opt", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang.opt?ref=16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "patch": "@@ -269,6 +269,10 @@ Wopenmp-simd\n Fortran\n ; Documented in C\n \n+Wpedantic\n+Fortran\n+; Documented in common.opt\n+\n Wreal-q-constant\n Fortran Warning\n Warn about real-literal-constants with 'q' exponent-letter\n@@ -294,9 +298,13 @@ Fortran Warning\n Warn about \\\"suspicious\\\" constructs\n \n Wtabs\n-Fortran Warning\n+Fortran Warning Var(warn_tabs) LangEnabledBy(Fortran,Wall)\n Permit nonconforming uses of the tab character\n \n+Wtabs\n+LangEnabledBy(Fortran,Wpedantic)\n+;\n+\n Wunderflow\n Fortran Warning\n Warn about underflow of numerical constant expressions"}, {"sha": "dee1af48a7c60b04e68093923ec222387511d3a6", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 5, "deletions": 14, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "patch": "@@ -104,7 +104,6 @@ gfc_init_options (unsigned int decoded_options_count,\n   gfc_option.warn_implicit_interface = 0;\n   gfc_option.warn_line_truncation = 0;\n   gfc_option.warn_surprising = 0;\n-  gfc_option.warn_tabs = 1;\n   gfc_option.warn_underflow = 1;\n   gfc_option.warn_intrinsic_shadow = 0;\n   gfc_option.warn_intrinsics_std = 0;\n@@ -430,10 +429,7 @@ gfc_post_options (const char **pfilename)\n     gfc_option.flag_max_stack_var_size = 0;\n   \n   if (pedantic)\n-    { \n-      gfc_option.warn_ampersand = 1;\n-      gfc_option.warn_tabs = 0;\n-    }\n+    gfc_option.warn_ampersand = 1;\n \n   /* Optimization implies front end optimization, unless the user\n      specified it directly.  */\n@@ -461,7 +457,6 @@ set_Wall (int setting)\n   gfc_option.gfc_warn_conversion = setting;\n   gfc_option.warn_line_truncation = setting;\n   gfc_option.warn_surprising = setting;\n-  gfc_option.warn_tabs = !setting;\n   gfc_option.warn_underflow = setting;\n   gfc_option.warn_intrinsic_shadow = setting;\n   gfc_option.warn_intrinsics_std = setting;\n@@ -720,10 +715,6 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       gfc_option.warn_surprising = value;\n       break;\n \n-    case OPT_Wtabs:\n-      gfc_option.warn_tabs = value;\n-      break;\n-\n     case OPT_Wtarget_lifetime:\n       gfc_option.warn_target_lifetime = value;\n       break;\n@@ -1038,7 +1029,7 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       gfc_option.max_continue_free = 39;\n       gfc_option.max_identifier_length = 31;\n       gfc_option.warn_ampersand = 1;\n-      gfc_option.warn_tabs = 0;\n+      warn_tabs = 1;\n       break;\n \n     case OPT_std_f2003:\n@@ -1047,7 +1038,7 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       gfc_option.warn_std = GFC_STD_F95_OBS;\n       gfc_option.max_identifier_length = 63;\n       gfc_option.warn_ampersand = 1;\n-      gfc_option.warn_tabs = 0;\n+      warn_tabs = 1;\n       break;\n \n     case OPT_std_f2008:\n@@ -1056,7 +1047,7 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       gfc_option.warn_std = GFC_STD_F95_OBS | GFC_STD_F2008_OBS;\n       gfc_option.max_identifier_length = 63;\n       gfc_option.warn_ampersand = 1;\n-      gfc_option.warn_tabs = 0;\n+      warn_tabs = 1;\n       break;\n \n     case OPT_std_f2008ts:\n@@ -1066,7 +1057,7 @@ gfc_handle_option (size_t scode, const char *arg, int value,\n       gfc_option.warn_std = GFC_STD_F95_OBS | GFC_STD_F2008_OBS;\n       gfc_option.max_identifier_length = 63;\n       gfc_option.warn_ampersand = 1;\n-      gfc_option.warn_tabs = 0;\n+      warn_tabs = 1;\n       break;\n \n     case OPT_std_gnu:"}, {"sha": "e0b9a3bbbb83513e42a4c8d3e3a3cda8ce4a8b08", "filename": "gcc/fortran/scanner.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Fscanner.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ffortran%2Fscanner.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fscanner.c?ref=16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "patch": "@@ -1382,7 +1382,7 @@ gfc_gobble_whitespace (void)\n       /* Issue a warning for nonconforming tabs.  We keep track of the line\n \t number because the Fortran matchers will often back up and the same\n \t line will be scanned multiple times.  */\n-      if (!gfc_option.warn_tabs && c == '\\t')\n+      if (warn_tabs && c == '\\t')\n \t{\n \t  int cur_linenum = LOCATION_LINE (gfc_current_locus.lb->location);\n \t  if (cur_linenum != linenum)\n@@ -1534,12 +1534,12 @@ load_line (FILE *input, gfc_char_t **pbuf, int *pbuflen, const int *first_char)\n \t{\n \t  found_tab = true;\n \n-\t  if (!gfc_option.warn_tabs && seen_comment == 0\n-\t      && current_line != linenum)\n+\t  if (warn_tabs && seen_comment == 0 && current_line != linenum)\n \t    {\n \t      linenum = current_line;\n-\t      gfc_warning_now_2 (\"Nonconforming tab character in column %d \"\n-\t\t\t\t   \"of line %d\", i+1, linenum);\n+\t      gfc_warning_now_2 (OPT_Wtabs,\n+\t\t\t\t \"Nonconforming tab character in column %d \"\n+\t\t\t\t \"of line %d\", i+1, linenum);\n \t    }\n \n \t  while (i < 6)"}, {"sha": "d4d13c50030346b0b0aa0440dc7a7f06d82c35b9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "patch": "@@ -1,3 +1,7 @@\n+2014-11-23  Tobias Burnus  <burnus@net-b.de>\n+\n+\t* gfortran.dg/tab_continuation.f: Update dg-*.\n+\n 2014-11-23  Andrew Pinski  <apinski@cavium.com>\n \n \t* gcc.c-torture/compile/20120927-1.c: New testcase."}, {"sha": "85d230774b1874ffea88f468df81d37593af0e6e", "filename": "gcc/testsuite/gfortran.dg/tab_continuation.f", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ftestsuite%2Fgfortran.dg%2Ftab_continuation.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1/gcc%2Ftestsuite%2Fgfortran.dg%2Ftab_continuation.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftab_continuation.f?ref=16db2a6aa770f2e3285f3f4e9ab955a7c4cce5c1", "patch": "@@ -4,12 +4,17 @@\n !\n ! Allow <tab>1 to <tab>9 as continuation marker, which is a very common\n ! vendor extension.\n+!\n+! Note: The test suite is run with -pedantic-errors, which both enables\n+! the tab warning (-pedantic implies -Wtabs) and turns it into errors\n+! (-pedantic-errors hence implies -Werror=tabs).\n !\n \tPARAMETER (LUMIN=11,LUMAX=20,MAPMAX=256,NPLANEMAX=999)\n \tINTEGER NAXIS(0:MAPMAX,LUMIN:LUMAX),NAXIS1(0:MAPMAX,LUMIN:LUMAX),\n \t1NAXIS2(0:MAPMAX,LUMIN:LUMAX),NAXIS3(0:MAPMAX,LUMIN:LUMAX)\n \tend\n-! { dg-warning \"Nonconforming tab character in column 1 of line 8\" \"Nonconforming tab\" { target *-*-* } 0 }\n-! { dg-warning \"Nonconforming tab character in column 1 of line 9\" \"Nonconforming tab\" { target *-*-* } 0 }\n-! { dg-warning \"Nonconforming tab character in column 1 of line 10\" \"Nonconforming tab\" { target *-*-* } 0 }\n-! { dg-warning \"Nonconforming tab character in column 1 of line 11\" \"Nonconforming tab\" { target *-*-* } 0 }\n+! { dg-error \"Nonconforming tab character in column 1 of line 12\" \"Nonconforming tab\" { target *-*-* } 0 }\n+! { dg-error \"Nonconforming tab character in column 1 of line 13\" \"Nonconforming tab\" { target *-*-* } 0 }\n+! { dg-error \"Nonconforming tab character in column 1 of line 14\" \"Nonconforming tab\" { target *-*-* } 0 }\n+! { dg-error \"Nonconforming tab character in column 1 of line 15\" \"Nonconforming tab\" { target *-*-* } 0 }\n+! { dg-excess-errors \"some warnings being treated as errors\" }"}]}