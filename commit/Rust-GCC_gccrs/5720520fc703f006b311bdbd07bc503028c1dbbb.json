{"sha": "5720520fc703f006b311bdbd07bc503028c1dbbb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcyMDUyMGZjNzAzZjAwNmIzMTFiZGJkMDdiYzUwMzAyOGMxZGJiYg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2002-11-20T10:03:36Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2002-11-20T10:03:36Z"}, "message": "* sched-deps.c (sched_analyze): Check HARD_REGNO_CALL_PART_CLOBBERED.\n\nFrom-SVN: r59300", "tree": {"sha": "5f9c3ba9af36829f0d25dc8c9d0972426410d458", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f9c3ba9af36829f0d25dc8c9d0972426410d458"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5720520fc703f006b311bdbd07bc503028c1dbbb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5720520fc703f006b311bdbd07bc503028c1dbbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5720520fc703f006b311bdbd07bc503028c1dbbb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5720520fc703f006b311bdbd07bc503028c1dbbb/comments", "author": null, "committer": null, "parents": [{"sha": "4392ebd361621bdc3f5a2426df102c2da3e25a53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4392ebd361621bdc3f5a2426df102c2da3e25a53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4392ebd361621bdc3f5a2426df102c2da3e25a53"}], "stats": {"total": 42, "additions": 40, "deletions": 2}, "files": [{"sha": "5961678e5511c50a407fe1076a8d8056a10afe22", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5720520fc703f006b311bdbd07bc503028c1dbbb", "patch": "@@ -1,3 +1,7 @@\n+2002-11-20  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* sched-deps.c (sched_analyze): Check HARD_REGNO_CALL_PART_CLOBBERED.\n+\n 2002-11-20  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/sh/sh.md (udivsi3): Don't put udivsi3_i4_media instructions"}, {"sha": "98b0732291b50399b78e64413df54d0fa62a220e", "filename": "gcc/sched-deps.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2Fsched-deps.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2Fsched-deps.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-deps.c?ref=5720520fc703f006b311bdbd07bc503028c1dbbb", "patch": "@@ -1287,8 +1287,12 @@ sched_analyze (deps, head, tail)\n \t\t    SET_REGNO_REG_SET (reg_pending_sets, i);\n \t\t    SET_REGNO_REG_SET (reg_pending_uses, i);\n \t\t  }\n-\t\t/* Other call-clobbered hard regs may be clobbered.  */\n-\t\telse if (TEST_HARD_REG_BIT (regs_invalidated_by_call, i))\n+\t\t/* Other call-clobbered hard regs may be clobbered.\n+\t\t   Since we only have a choice between 'might be clobbered'\n+\t\t   and 'definitely not clobbered', we must include all\n+\t\t   partly call-clobbered registers here.  */\n+\t\telse if (HARD_REGNO_CALL_PART_CLOBBERED (i, reg_raw_mode[i])\n+\t\t\t || TEST_HARD_REG_BIT (regs_invalidated_by_call, i))\n \t\t  SET_REGNO_REG_SET (reg_pending_clobbers, i);\n \t\t/* We don't know what set of fixed registers might be used\n \t\t   by the function, but it is certain that the stack pointer"}, {"sha": "aef782623ad87a59eceb12957c8871bc4455bfc5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5720520fc703f006b311bdbd07bc503028c1dbbb", "patch": "@@ -1,3 +1,7 @@\n+2002-11-20  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* gcc.c-torture/execute/20021120-3.c: New test.\n+\n 2002-11-20  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* gcc.c-torture/execute/20021120-2.c: New test."}, {"sha": "e875f1f45c473af0b04907013cbef68f966de9e7", "filename": "gcc/testsuite/gcc.c-torture/execute/20021120-3.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20021120-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5720520fc703f006b311bdbd07bc503028c1dbbb/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20021120-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20021120-3.c?ref=5720520fc703f006b311bdbd07bc503028c1dbbb", "patch": "@@ -0,0 +1,26 @@\n+/* Test whether a partly call-clobbered register will be moved over a call.\n+   Although the original test case didn't use any GNUisms, it proved\n+   difficult to reduce without the named register extension.  */\n+#if __SH64__ == 32\n+#define LOC asm (\"r10\")\n+#else\n+#define LOC\n+#endif\n+\n+unsigned int foo (char *c, unsigned int x, unsigned int y)\n+{\n+  register unsigned int z LOC;\n+\n+  sprintf (c, \"%d\", x / y);\n+  z = x + 1;\n+  return z / (y + 1);\n+}\n+\n+int main ()\n+{\n+  char c[16];\n+\n+  if (foo (c, ~1U, 4) != (~0U / 5))\n+    abort ();\n+  exit (0);\n+}"}]}