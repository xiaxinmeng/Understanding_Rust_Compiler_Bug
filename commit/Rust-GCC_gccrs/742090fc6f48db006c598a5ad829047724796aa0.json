{"sha": "742090fc6f48db006c598a5ad829047724796aa0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQyMDkwZmM2ZjQ4ZGIwMDZjNTk4YTVhZDgyOTA0NzcyNDc5NmFhMA==", "commit": {"author": {"name": "Adrian Straetling", "email": "straetling@de.ibm.com", "date": "2005-08-26T06:49:57Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2005-08-26T06:49:57Z"}, "message": "s390.md: (\"movstr\", \"*movstr\"): Add patterns.\n\n2005-08-26  Adrian Straetling  <straetling@de.ibm.com>\n\n\t* config/s390/s390.md: (\"movstr\", \"*movstr\"): Add patterns.\n\t(UNSPEC_MVST): New constant.\n\nFrom-SVN: r103516", "tree": {"sha": "041850d2ac0283600e53adf93284b676fbb0226f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/041850d2ac0283600e53adf93284b676fbb0226f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/742090fc6f48db006c598a5ad829047724796aa0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/742090fc6f48db006c598a5ad829047724796aa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/742090fc6f48db006c598a5ad829047724796aa0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/742090fc6f48db006c598a5ad829047724796aa0/comments", "author": null, "committer": null, "parents": [{"sha": "db21e1d01a3f6ca4f7d6c9f151620bae7b66b661", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db21e1d01a3f6ca4f7d6c9f151620bae7b66b661", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db21e1d01a3f6ca4f7d6c9f151620bae7b66b661"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "837d6e7fc8e5f484869d5b436931f3bbff72cb5a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/742090fc6f48db006c598a5ad829047724796aa0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/742090fc6f48db006c598a5ad829047724796aa0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=742090fc6f48db006c598a5ad829047724796aa0", "patch": "@@ -1,3 +1,8 @@\n+2005-08-26  Adrian Straetling  <straetling@de.ibm.com>\n+\n+\t* config/s390/s390.md: (\"movstr\", \"*movstr\"): Add patterns.\n+\t(UNSPEC_MVST): New constant.\n+\n 2005-08-26  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* config/s390/predicates.md (\"shift_count_operand\", \"setmem_operand\"):"}, {"sha": "84e58d7838d84e967e5ed62db0931803aeaf8bb1", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/742090fc6f48db006c598a5ad829047724796aa0/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/742090fc6f48db006c598a5ad829047724796aa0/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=742090fc6f48db006c598a5ad829047724796aa0", "patch": "@@ -130,6 +130,7 @@\n \n    ; String Functions\n    (UNSPEC_SRST\t\t\t600)\n+   (UNSPEC_MVST\t\t\t601)\n    \n    ; Stack Smashing Protector\n    (UNSPEC_SP_SET \t\t700)\n@@ -1943,6 +1944,48 @@\n   [(set_attr \"length\" \"8\")\n    (set_attr \"type\" \"vs\")])\n  \n+;\n+; movstr instruction pattern.\n+;\n+\n+(define_expand \"movstr\"\n+  [(set (reg:SI 0) (const_int 0))\n+   (parallel \n+    [(clobber (match_dup 3))\n+     (set (match_operand:BLK 1 \"memory_operand\" \"\")\n+\t  (match_operand:BLK 2 \"memory_operand\" \"\"))\n+     (set (match_operand 0 \"register_operand\" \"\")\n+\t  (unspec [(match_dup 1) \n+\t\t   (match_dup 2)\n+\t\t   (reg:SI 0)] UNSPEC_MVST))\n+     (clobber (reg:CC CC_REGNUM))])]\n+  \"\"\n+{\n+  rtx addr1 = gen_reg_rtx (Pmode);\n+  rtx addr2 = gen_reg_rtx (Pmode);\n+\n+  emit_move_insn (addr1, force_operand (XEXP (operands[1], 0), NULL_RTX));\n+  emit_move_insn (addr2, force_operand (XEXP (operands[2], 0), NULL_RTX));\n+  operands[1] = replace_equiv_address_nv (operands[1], addr1);\n+  operands[2] = replace_equiv_address_nv (operands[2], addr2);\n+  operands[3] = addr2;\n+})\n+\n+(define_insn \"*movstr\"\n+  [(clobber (match_operand:P 2 \"register_operand\" \"=d\"))\n+   (set (mem:BLK (match_operand:P 1 \"register_operand\" \"0\"))\n+\t(mem:BLK (match_operand:P 3 \"register_operand\" \"2\")))\n+   (set (match_operand:P 0 \"register_operand\" \"=d\")\n+\t(unspec [(mem:BLK (match_dup 1)) \n+\t\t (mem:BLK (match_dup 3))\n+\t\t (reg:SI 0)] UNSPEC_MVST))\n+   (clobber (reg:CC CC_REGNUM))]\n+  \"\"\n+  \"mvst\\t%1,%2\\;jo\\t.-4\"\n+  [(set_attr \"length\" \"8\")\n+   (set_attr \"type\" \"vs\")])\n+  \n+\n ;\n ; movmemM instruction pattern(s).\n ;"}]}