{"sha": "006e317a14aca1c3d19485b66df07007bf07694e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDA2ZTMxN2ExNGFjYTFjM2QxOTQ4NWI2NmRmMDcwMDdiZjA3Njk0ZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-04-07T21:02:12Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-04-07T21:02:12Z"}, "message": "re PR ipa/65540 (internal error on s-fatllf.ads at -O2)\n\n \tPR ipa/65540\n\t* calls.c (initialize_argument_information): When producing tail\n\tcall also turn SSA_NAMES passed by references to original PARM_DECLs\n\t* gcc.c-torture/compile/pr65540.c: New.\n\nFrom-SVN: r221910", "tree": {"sha": "4fbaa001162291c95c195789b3e37bc9f7c1eab8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4fbaa001162291c95c195789b3e37bc9f7c1eab8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/006e317a14aca1c3d19485b66df07007bf07694e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/006e317a14aca1c3d19485b66df07007bf07694e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/006e317a14aca1c3d19485b66df07007bf07694e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/006e317a14aca1c3d19485b66df07007bf07694e/comments", "author": null, "committer": null, "parents": [{"sha": "4209b6d00f1cee70bcbe8f7ec3f2c7936fc0b3a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4209b6d00f1cee70bcbe8f7ec3f2c7936fc0b3a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4209b6d00f1cee70bcbe8f7ec3f2c7936fc0b3a5"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "7de54510bd4fb31a71666e248264497f54a4ce94", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=006e317a14aca1c3d19485b66df07007bf07694e", "patch": "@@ -1,3 +1,9 @@\n+2015-04-07  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/65540\n+\t* calls.c (initialize_argument_information): When producing tail\n+\tcall also turn SSA_NAMES passed by references to original PARM_DECLs\n+\n 2015-04-07  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR target/65648"}, {"sha": "970415d65923699f486f4a59f455776b5d1b5bc1", "filename": "gcc/calls.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=006e317a14aca1c3d19485b66df07007bf07694e", "patch": "@@ -1321,6 +1321,15 @@ initialize_argument_information (int num_actuals ATTRIBUTE_UNUSED,\n \t\t  && TREE_CODE (base) != SSA_NAME\n \t\t  && (!DECL_P (base) || MEM_P (DECL_RTL (base)))))\n \t    {\n+\t      /* We may have turned the parameter value into an SSA name.\n+\t\t Go back to the original parameter so we can take the\n+\t\t address.  */\n+\t      if (TREE_CODE (args[i].tree_value) == SSA_NAME)\n+\t\t{\n+\t\t  gcc_assert (SSA_NAME_IS_DEFAULT_DEF (args[i].tree_value));\n+\t\t  args[i].tree_value = SSA_NAME_VAR (args[i].tree_value);\n+\t\t  gcc_assert (TREE_CODE (args[i].tree_value) == PARM_DECL);\n+\t\t}\n \t      /* Argument setup code may have copied the value to register.  We\n \t\t revert that optimization now because the tail call code must\n \t\t use the original location.  */"}, {"sha": "74a39ec2a23195b032a558b830e0f5c0d2508a58", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=006e317a14aca1c3d19485b66df07007bf07694e", "patch": "@@ -1,3 +1,8 @@\n+2015-04-07  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR ipa/65540\n+\t* gcc.c-torture/compile/pr65540.c: New.\n+\n 2015-04-07  Alan Lawrence  <alan.lawrence@arm.com>\n \n \t* gcc.target/aarch64/c-output-template-3.c: Add -O, remove"}, {"sha": "7b0fb569af19734edaef9f6507641716e0baa337", "filename": "gcc/testsuite/gcc.c-torture/compile/pr65540.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr65540.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/006e317a14aca1c3d19485b66df07007bf07694e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr65540.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr65540.c?ref=006e317a14aca1c3d19485b66df07007bf07694e", "patch": "@@ -0,0 +1,21 @@\n+long double func1 (long double x)\n+{\n+  if (x > 0.0)\n+    return x;\n+  else if (x < 0.0)\n+    return -x;\n+  else\n+    return x;\n+}\n+\n+long double func2 (long double x)\n+{\n+  if (x > 0.0)\n+    return x;\n+  else if (x < 0.0)\n+    return -x;\n+  else\n+    return x;\n+}\n+\n+"}]}