{"sha": "f5bbc09d23910c2632a70ace9d17e8d981051c39", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjViYmMwOWQyMzkxMGMyNjMyYTcwYWNlOWQxN2U4ZDk4MTA1MWMzOQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-21T20:06:37Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-21T20:06:37Z"}, "message": "(CPP_PREDEFINES): Add -D__svr4__.\n\n(ASM_GENERATE_INTERNAL_LABEL, ASM_OUTPUT_INTERNAL_LABEL):\nNew override definitions.\n\nFrom-SVN: r4532", "tree": {"sha": "c9f0a31a5ee4dac6302240cee22816afe783d6e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9f0a31a5ee4dac6302240cee22816afe783d6e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5bbc09d23910c2632a70ace9d17e8d981051c39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5bbc09d23910c2632a70ace9d17e8d981051c39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5bbc09d23910c2632a70ace9d17e8d981051c39", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5bbc09d23910c2632a70ace9d17e8d981051c39/comments", "author": null, "committer": null, "parents": [{"sha": "ee8234bf23e9f22a25eac82c1eead05003230be9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee8234bf23e9f22a25eac82c1eead05003230be9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee8234bf23e9f22a25eac82c1eead05003230be9"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "40e48bf148aaddb69a1811fba4328c1f63c05b34", "filename": "gcc/config/m68k/amix.h", "status": "modified", "additions": 20, "deletions": 1, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5bbc09d23910c2632a70ace9d17e8d981051c39/gcc%2Fconfig%2Fm68k%2Famix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5bbc09d23910c2632a70ace9d17e8d981051c39/gcc%2Fconfig%2Fm68k%2Famix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Famix.h?ref=f5bbc09d23910c2632a70ace9d17e8d981051c39", "patch": "@@ -36,7 +36,7 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n #undef CPP_PREDEFINES\n #define CPP_PREDEFINES \\\n-  \"-Dm68k -Dunix -DAMIX -Amachine(m68k) -Acpu(m68k) -Asystem(unix) -Alint(off)\"\n+  \"-Dm68k -Dunix -DAMIX -D__svr4__ -Amachine(m68k) -Acpu(m68k) -Asystem(unix) -Alint(off)\"\n \n /* At end of a switch table, define LDnnn iff the symbol LInnn was defined.\n    Some SGS assemblers have a bug such that \"Lnnn-LInnn-2.b(pc,d0.l*2)\"\n@@ -121,3 +121,22 @@ do {\t\t\t\t\t\t\t\t\t\\\n   } while (sp < (LEN));\t\t\t\t\t\t\\\n   putc ('\\n', (FILE));\t\t\t\t\t\t\\\n }\n+\f\n+/* Override these for the sake of an assembler bug: the Amix\n+   assembler can't handle .LC0@GOT syntax.  This pollutes the final\n+   table for shared librarys but what's a poor soul to do; sigh... RFH */\n+\n+#undef ASM_GENERATE_INTERNAL_LABEL\n+#define ASM_GENERATE_INTERNAL_LABEL(LABEL,PREFIX,NUM)\t\\\n+  if (flag_pic && !strcmp(PREFIX,\"LC\"))\t\t\t\\\n+    sprintf (LABEL, \"*%s%%%d\", PREFIX, NUM);\t\t\\\n+  else\t\t\t\t\t\t\t\\\n+    sprintf (LABEL, \"*%s%s%d\", LOCAL_LABEL_PREFIX, PREFIX, NUM)\n+\n+#undef ASM_OUTPUT_INTERNAL_LABEL\n+#define ASM_OUTPUT_INTERNAL_LABEL(FILE,PREFIX,NUM)\t\\\n+  if (flag_pic && !strcmp(PREFIX,\"LC\"))\t\t\t\\\n+    asm_fprintf (FILE, \"%s%%%d:\\n\", PREFIX, NUM);\t\\\n+  else\t\t\t\t\t\t\t\\\n+    asm_fprintf (FILE, \"%0L%s%d:\\n\", PREFIX, NUM)\n+"}]}