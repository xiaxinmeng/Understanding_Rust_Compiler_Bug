{"sha": "610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjEwYjY0ZTJhMjc0YmIxMDIxZWU1ODkxZmQ2OGU4YjJmOTVlN2MxZA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-03-15T13:18:45Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-03-15T13:18:45Z"}, "message": "re PR tree-optimization/43367 (ice: in may_propagate_copy, at tree-ssa-copy.c:85)\n\n2010-03-15  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/43367\n\t* tree-cfg.c (gimple_can_merge_blocks_p): Simplify PHI\n\telimination check.\n\n\t* gcc.c-torture/compile/pr43367.c: New testcase.\n\nFrom-SVN: r157458", "tree": {"sha": "6b9d86bc43851d80373cb7adff8e1d0cfacfdb8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b9d86bc43851d80373cb7adff8e1d0cfacfdb8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "610de68dbe2c55bad224111693e12cdb00aa87b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/610de68dbe2c55bad224111693e12cdb00aa87b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/610de68dbe2c55bad224111693e12cdb00aa87b8"}], "stats": {"total": 66, "additions": 46, "deletions": 20}, "files": [{"sha": "434288ebdba1875b95a436c8a91588b1a8a429e0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "patch": "@@ -1,3 +1,9 @@\n+2010-03-15  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/43367\n+\t* tree-cfg.c (gimple_can_merge_blocks_p): Simplify PHI\n+\telimination check.\n+\n 2010-03-15  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/43317"}, {"sha": "bd2f07b7b4c895eafd90bfdd28abd0f3713742fc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "patch": "@@ -1,3 +1,8 @@\n+2010-03-15  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/43367\n+\t* gcc.c-torture/compile/pr43367.c: New testcase.\n+\n 2010-03-15  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/43317"}, {"sha": "5c620c13c906c41b201794a30385dd980f5dc622", "filename": "gcc/testsuite/gcc.c-torture/compile/pr43367.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr43367.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr43367.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr43367.c?ref=610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "patch": "@@ -0,0 +1,30 @@\n+unsigned char g_17;\n+\n+const unsigned char func_39 (unsigned char p_40, unsigned char * p_41)\n+{\n+  return 0;\n+}\n+\n+void int327 (const unsigned char p_48, unsigned char p_49)\n+{\n+  unsigned l_52;\n+  unsigned char l_58[2];\n+  int i, j;\n+  if (func_39 (l_52, &p_49), p_48) {\n+      unsigned char *l_60;\n+      unsigned char *l = &l_58[1];\n+      for (j; j; j++) {\n+lbl_59:\n+\t  break;\n+      }\n+      for (l = 0; 1; l += 1) {\n+\t  for (p_49 = 1; p_49; p_49 += 0) {\n+\t      unsigned char **l_61[1][6];\n+\t      for (j = 0; j < 1; j++)\n+\t\tl_61[i][j] = &l_60;\n+\t      goto lbl_59;\n+\t  }\n+      }\n+  }\n+}\n+"}, {"sha": "6f4e4167a6bc2bd66c40a68f3752964197747e9b", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 5, "deletions": 20, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/610b64e2a274bb1021ee5891fd68e8b2f95e7c1d/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=610b64e2a274bb1021ee5891fd68e8b2f95e7c1d", "patch": "@@ -1438,27 +1438,12 @@ gimple_can_merge_blocks_p (basic_block a, basic_block b)\n     return false;\n \n   /* It must be possible to eliminate all phi nodes in B.  If ssa form\n-     is not up-to-date, we cannot eliminate any phis; however, if only\n-     some symbols as whole are marked for renaming, this is not a problem,\n-     as phi nodes for those symbols are irrelevant in updating anyway.  */\n+     is not up-to-date and a name-mapping is registered, we cannot eliminate\n+     any phis.  Symbols marked for renaming are never a problem though.  */\n   phis = phi_nodes (b);\n-  if (!gimple_seq_empty_p (phis))\n-    {\n-      gimple_stmt_iterator i;\n-\n-      if (name_mappings_registered_p ())\n-\treturn false;\n-\n-      for (i = gsi_start (phis); !gsi_end_p (i); gsi_next (&i))\n-\t{\n-\t  gimple phi = gsi_stmt (i);\n-\n-\t  if (!is_gimple_reg (gimple_phi_result (phi))\n-\t      && !may_propagate_copy (gimple_phi_result (phi),\n-\t\t\t\t      gimple_phi_arg_def (phi, 0)))\n-\t    return false;\n-\t}\n-    }\n+  if (!gimple_seq_empty_p (phis)\n+      && name_mappings_registered_p ())\n+    return false;\n \n   return true;\n }"}]}