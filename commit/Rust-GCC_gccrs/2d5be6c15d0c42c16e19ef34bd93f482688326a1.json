{"sha": "2d5be6c15d0c42c16e19ef34bd93f482688326a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQ1YmU2YzE1ZDBjNDJjMTZlMTllZjM0YmQ5M2Y0ODI2ODgzMjZhMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-04-07T09:57:06Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-07T09:57:06Z"}, "message": "trans.c (establish_gnat_vms_condition_handler): Clear DECL_CONTEXT.\n\n\t* gcc-interface/trans.c (establish_gnat_vms_condition_handler): Clear\n\tDECL_CONTEXT.\n\t(Subprogram_Body_to_gnu): Fix pasto.\n\nFrom-SVN: r145661", "tree": {"sha": "37c97dd80b4277fabd4adb8143f32d8f2af142a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/37c97dd80b4277fabd4adb8143f32d8f2af142a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d5be6c15d0c42c16e19ef34bd93f482688326a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d5be6c15d0c42c16e19ef34bd93f482688326a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d5be6c15d0c42c16e19ef34bd93f482688326a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d5be6c15d0c42c16e19ef34bd93f482688326a1/comments", "author": null, "committer": null, "parents": [{"sha": "10069d53fb535c72d70e2c7dab53347d40a89f37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10069d53fb535c72d70e2c7dab53347d40a89f37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10069d53fb535c72d70e2c7dab53347d40a89f37"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "07590027b671d9eb7b3db6210e4290d4ab63df79", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d5be6c15d0c42c16e19ef34bd93f482688326a1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d5be6c15d0c42c16e19ef34bd93f482688326a1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2d5be6c15d0c42c16e19ef34bd93f482688326a1", "patch": "@@ -1,3 +1,9 @@\n+2009-04-07  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (establish_gnat_vms_condition_handler): Clear\n+\tDECL_CONTEXT.\n+\t(Subprogram_Body_to_gnu): Fix pasto.\n+\n 2009-04-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/gigi.h (standard_datatypes): Remove ADT_void_type_decl."}, {"sha": "ec3ec31274ab629ee122cf8e76797ce176bba064", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d5be6c15d0c42c16e19ef34bd93f482688326a1/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d5be6c15d0c42c16e19ef34bd93f482688326a1/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=2d5be6c15d0c42c16e19ef34bd93f482688326a1", "patch": "@@ -2123,6 +2123,9 @@ establish_gnat_vms_condition_handler (void)\n \t\t\t\t\t\t\t ptr_void_type_node,\n \t\t\t\t\t\t\t NULL_TREE),\n \t\t\t       NULL_TREE, 0, 1, 1, 0, Empty);\n+\n+      /* ??? DECL_CONTEXT shouldn't have been set because of DECL_EXTERNAL.  */\n+      DECL_CONTEXT (gnat_vms_condition_handler_decl) = NULL_TREE;\n     }\n \n   /* Do nothing if the establish builtin is not available, which might happen\n@@ -2242,7 +2245,8 @@ Subprogram_Body_to_gnu (Node_Id gnat_node)\n      this happens.  The foreign or exported condition is expected to satisfy\n      all the constraints.  */\n   if (TARGET_ABI_OPEN_VMS\n-      && (Has_Foreign_Convention (gnat_node) || Is_Exported (gnat_node)))\n+      && (Has_Foreign_Convention (gnat_subprog_id)\n+\t  || Is_Exported (gnat_subprog_id)))\n     establish_gnat_vms_condition_handler ();\n \n   process_decls (Declarations (gnat_node), Empty, Empty, true, true);"}]}