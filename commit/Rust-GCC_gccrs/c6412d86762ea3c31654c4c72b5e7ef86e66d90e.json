{"sha": "c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzY0MTJkODY3NjJlYTNjMzE2NTRjNGM3MmI1ZTdlZjg2ZTY2ZDkwZQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-08-09T15:40:30Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-08-09T15:40:30Z"}, "message": "sync.c: Move to ../libgcc.\n\n\tgcc:\n\t* config/sync.c: Move to ../libgcc.\n\t* Makefile.in (libgcc.mvars): Remove LIBGCC_SYNC,\n\tLIBGCC_SYNC_CFLAGS.\n\t* config/mips/t-libgcc-mips16 (LIBGCC_SYNC, LIBGCC_SYNC_CFLAGS):\n\tRemove.\n\n\tlibgcc:\n\t* sync.c: New file.\n\t* config/mips/t-mips16: New file.\n\t* config.host (mips64*-*-linux*): Add mips/t-mips16 to tmake_file.\n\t(mips*-*-linux*): Likewise.\n\t(mips*-sde-elf*): Likewise.\n\t(mipsisa32-*-elf*): Join with mipsisa32r2-*-elf*,\n\tmipsisa64-*-elf*, mipsisa64r2-*-elf*.\n\tAdd mips/t-mips16 to tmake_file.\n\t(mipsisa64sb1-*-elf*): Add mips/t-mips16 to tmake_file.\n\t(mips-*-elf*): Likewise.\n\t(mips64-*-elf*): Likewise.\n\t(mips64orion-*-elf*): Likewise.\n\t(mips*-*-rtems*): Likewise.\n\t(mipstx39-*-elf*): Likewise.\n\t* Makefile.in: Use SYNC instead of LIBGCC_SYNC.\n\t($(libgcc-sync-size-funcs-o)): Use SYNC_CFLAGS instead of\n\tLIBGCC_SYNC_CFLAGS.\n\tUse $(srcdir) to refer to sync.c.\n\tUse $<.\n\t($(libgcc-sync-funcs-o)): Likewise.\n\t($(libgcc-sync-size-funcs-s-o)): Likewise.\n\t($(libgcc-sync-funcs-s-o)): Likewise.\n\nFrom-SVN: r177601", "tree": {"sha": "5e72aa4273181ce9725ac6839df4f5bd5973d9ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e72aa4273181ce9725ac6839df4f5bd5973d9ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6e9ee54ca64d761e0cbfb7981dafbfcb9704240c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e9ee54ca64d761e0cbfb7981dafbfcb9704240c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e9ee54ca64d761e0cbfb7981dafbfcb9704240c"}], "stats": {"total": 95, "additions": 65, "deletions": 30}, "files": [{"sha": "a81bf0877f6c37812139de773179e885f749793e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -1,3 +1,11 @@\n+2011-08-09  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* config/sync.c: Move to ../libgcc.\n+\t* Makefile.in (libgcc.mvars): Remove LIBGCC_SYNC,\n+\tLIBGCC_SYNC_CFLAGS.\n+\t* config/mips/t-libgcc-mips16 (LIBGCC_SYNC, LIBGCC_SYNC_CFLAGS):\n+\tRemove.\n+\n 2011-08-09  Anatoly Sokolov  <aesok@post.ru>\n \n \t* config/mmix/mmix.h (REGISTER_MOVE_COST): Remove macro."}, {"sha": "4e97ea536e125dfc29bb005c2e76909c4a7e611c", "filename": "gcc/Makefile.in", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -1911,8 +1911,6 @@ libgcc.mvars: config.status Makefile $(LIB2ADD) $(LIB2ADD_ST) specs \\\n \techo SHLIB_NM_FLAGS = '$(SHLIB_NM_FLAGS)' >> tmp-libgcc.mvars\n \techo LIBGCC2_CFLAGS = '$(LIBGCC2_CFLAGS)' >> tmp-libgcc.mvars\n \techo TARGET_LIBGCC2_CFLAGS = '$(TARGET_LIBGCC2_CFLAGS)' >> tmp-libgcc.mvars\n-\techo LIBGCC_SYNC = '$(LIBGCC_SYNC)' >> tmp-libgcc.mvars\n-\techo LIBGCC_SYNC_CFLAGS = '$(LIBGCC_SYNC_CFLAGS)' >> tmp-libgcc.mvars\n \techo CRTSTUFF_CFLAGS = '$(CRTSTUFF_CFLAGS)' >> tmp-libgcc.mvars\n \techo CRTSTUFF_T_CFLAGS = '$(CRTSTUFF_T_CFLAGS)' >> tmp-libgcc.mvars\n \techo CRTSTUFF_T_CFLAGS_S = '$(CRTSTUFF_T_CFLAGS_S)' >> tmp-libgcc.mvars"}, {"sha": "772b05ac45ea208e7e0974849f16cf8d953353ab", "filename": "gcc/config/mips/t-libgcc-mips16", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/gcc%2Fconfig%2Fmips%2Ft-libgcc-mips16", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/gcc%2Fconfig%2Fmips%2Ft-libgcc-mips16", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-libgcc-mips16?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -1,4 +1,4 @@\n-# Copyright (C) 2007, 2008 Free Software Foundation, Inc.\n+# Copyright (C) 2007, 2008, 2011 Free Software Foundation, Inc.\n #\n # This file is part of GCC.\n #\n@@ -38,8 +38,5 @@ LIB1ASMFUNCS = _m16addsf3 _m16subsf3 _m16mulsf3 _m16divsf3 \\\n \t_m16stubdc0 _m16stubdc1 _m16stubdc2 _m16stubdc5 _m16stubdc6 \\\n \t_m16stubdc9 _m16stubdc10\n \n-LIBGCC_SYNC = yes\n-LIBGCC_SYNC_CFLAGS = -mno-mips16\n-\n # Version these symbols if building libgcc.so.\n SHLIB_MAPFILES += $(srcdir)/config/mips/libgcc-mips16.ver"}, {"sha": "531181564aa1f03bfc6ad14f39418760794cf8ff", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -1,3 +1,28 @@\n+2011-08-09  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* sync.c: New file.\n+\t* config/mips/t-mips16: New file.\n+\t* config.host (mips64*-*-linux*): Add mips/t-mips16 to tmake_file.\n+\t(mips*-*-linux*): Likewise.\n+\t(mips*-sde-elf*): Likewise.\n+\t(mipsisa32-*-elf*): Join with mipsisa32r2-*-elf*,\n+\tmipsisa64-*-elf*, mipsisa64r2-*-elf*.\n+\tAdd mips/t-mips16 to tmake_file.\n+\t(mipsisa64sb1-*-elf*): Add mips/t-mips16 to tmake_file.\n+\t(mips-*-elf*): Likewise.\n+\t(mips64-*-elf*): Likewise.\n+\t(mips64orion-*-elf*): Likewise.\n+\t(mips*-*-rtems*): Likewise.\n+\t(mipstx39-*-elf*): Likewise.\n+\t* Makefile.in: Use SYNC instead of LIBGCC_SYNC.\n+\t($(libgcc-sync-size-funcs-o)): Use SYNC_CFLAGS instead of\n+\tLIBGCC_SYNC_CFLAGS.\n+\tUse $(srcdir) to refer to sync.c.\n+\tUse $<.\n+\t($(libgcc-sync-funcs-o)): Likewise.\n+\t($(libgcc-sync-size-funcs-s-o)): Likewise.\n+\t($(libgcc-sync-funcs-s-o)): Likewise.\n+\n 2011-08-09  Andreas Schwab  <schwab@linux-m68k.org>\n \n \t* config.host (ia64*-*-linux*): Move ia64/t-glibc after"}, {"sha": "0d3818eacefc928871ed545cb1843b1a90808aa6", "filename": "libgcc/Makefile.in", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FMakefile.in?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -651,7 +651,7 @@ endif\n \n endif\n \n-ifeq ($(LIBGCC_SYNC),yes)\n+ifeq ($(SYNC),yes)\n libgcc-sync-size-funcs := $(foreach op, add sub or and xor nand, \\\n \t\t\t    sync_fetch_and_$(op) \\\n \t\t\t    sync_$(op)_and_fetch) \\\n@@ -664,37 +664,37 @@ libgcc-sync-size-funcs := $(foreach prefix, $(libgcc-sync-size-funcs), \\\n \t\t\t      $(prefix)_$(suffix)))\n \n libgcc-sync-size-funcs-o = $(patsubst %,%$(objext),$(libgcc-sync-size-funcs))\n-$(libgcc-sync-size-funcs-o): %$(objext): $(gcc_srcdir)/config/sync.c\n-\t$(gcc_compile) $(LIBGCC_SYNC_CFLAGS) \\\n+$(libgcc-sync-size-funcs-o): %$(objext): $(srcdir)/sync.c\n+\t$(gcc_compile) $(SYNC_CFLAGS) \\\n \t  -DFN=`echo \"$*\" | sed 's/_[^_]*$$//'` \\\n \t  -DSIZE=`echo \"$*\" | sed 's/.*_//'` \\\n-\t  -c $(gcc_srcdir)/config/sync.c $(vis_hide)\n+\t  -c $< $(vis_hide)\n libgcc-objects += $(libgcc-sync-size-funcs-o)\n \n libgcc-sync-funcs := sync_synchronize\n \n libgcc-sync-funcs-o = $(patsubst %,%$(objext),$(libgcc-sync-funcs))\n-$(libgcc-sync-funcs-o): %$(objext): $(gcc_srcdir)/config/sync.c\n-\t$(gcc_compile) $(LIBGCC_SYNC_CFLAGS) \\\n+$(libgcc-sync-funcs-o): %$(objext): $(srcdir)/sync.c\n+\t$(gcc_compile) $(SYNC_CFLAGS) \\\n \t  -DL$* \\\n-\t  -c $(gcc_srcdir)/config/sync.c $(vis_hide)\n+\t  -c $< $(vis_hide)\n libgcc-objects += $(libgcc-sync-funcs-o)\n \n ifeq ($(enable_shared),yes)\n libgcc-sync-size-funcs-s-o = $(patsubst %,%_s$(objext), \\\n \t\t\t       $(libgcc-sync-size-funcs))\n-$(libgcc-sync-size-funcs-s-o): %_s$(objext): $(gcc_srcdir)/config/sync.c\n-\t$(gcc_s_compile) $(LIBGCC_SYNC_CFLAGS) \\\n+$(libgcc-sync-size-funcs-s-o): %_s$(objext): $(srcdir)/sync.c\n+\t$(gcc_s_compile) $(SYNC_CFLAGS) \\\n \t  -DFN=`echo \"$*\" | sed 's/_[^_]*$$//'` \\\n \t  -DSIZE=`echo \"$*\" | sed 's/.*_//'` \\\n-\t  -c $(gcc_srcdir)/config/sync.c\n+\t  -c $<\n libgcc-s-objects += $(libgcc-sync-size-funcs-s-o)\n \n libgcc-sync-funcs-s-o = $(patsubst %,%_s$(objext),$(libgcc-sync-funcs))\n-$(libgcc-sync-funcs-s-o): %_s$(objext): $(gcc_srcdir)/config/sync.c\n-\t$(gcc_s_compile) $(LIBGCC_SYNC_CFLAGS) \\\n+$(libgcc-sync-funcs-s-o): %_s$(objext): $(srcdir)/sync.c\n+\t$(gcc_s_compile) $(SYNC_CFLAGS) \\\n \t  -DL$*\t\\\n-\t  -c $(gcc_srcdir)/config/sync.c\n+\t  -c $<\n libgcc-s-objects += $(libgcc-sync-funcs-s-o)\n endif\n endif"}, {"sha": "24252e07c5b5e5a2bad33da185fb439d809509c7", "filename": "libgcc/config.host", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -539,12 +539,12 @@ mips*-*-netbsd*)\t\t\t# NetBSD/mips, either endian.\n \t;;\n mips64*-*-linux* | mipsisa64*-*-linux*)\n \textra_parts=\"$extra_parts crtfastmath.o\"\n-\ttmake_file=\"${tmake_file} t-crtfm mips/t-tpbit\"\n+\ttmake_file=\"${tmake_file} t-crtfm mips/t-mips16 mips/t-tpbit\"\n \tmd_unwind_header=mips/linux-unwind.h\n \t;;\n mips*-*-linux*)\t\t\t\t# Linux MIPS, either endian.\n \textra_parts=\"$extra_parts crtfastmath.o\"\n-\ttmake_file=\"${tmake_file} t-crtfm\"\n+\ttmake_file=\"${tmake_file} t-crtfm mips/t-mips16\"\n \tmd_unwind_header=mips/linux-unwind.h\n \t;;\n mips*-*-openbsd*)\n@@ -559,33 +559,38 @@ mips*-sde-elf*)\n \t    tmake_file=mips/t-sdemtk\n \t    ;;\n \tesac\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n-mipsisa32-*-elf* | mipsisa32el-*-elf*)\n-\t;;\n-mipsisa32r2-*-elf* | mipsisa32r2el-*-elf*)\n-\t;;\n-mipsisa64-*-elf* | mipsisa64el-*-elf*)\n-\t;;\n+mipsisa32-*-elf* | mipsisa32el-*-elf* | \\\n+mipsisa32r2-*-elf* | mipsisa32r2el-*-elf* | \\\n+mipsisa64-*-elf* | mipsisa64el-*-elf* | \\\n mipsisa64r2-*-elf* | mipsisa64r2el-*-elf*)\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n mipsisa64sr71k-*-elf*)\n \ttmake_file=t-fdpbit\n         ;;\n mipsisa64sb1-*-elf* | mipsisa64sb1el-*-elf*)\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n mips-*-elf* | mipsel-*-elf*)\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n mips64-*-elf* | mips64el-*-elf*)\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n mips64vr-*-elf* | mips64vrel-*-elf*)\n         ;;\n mips64orion-*-elf* | mips64orionel-*-elf*)\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n mips*-*-rtems*)\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n mips-wrs-vxworks)\n \t;;\n mipstx39-*-elf* | mipstx39el-*-elf*)\n+\ttmake_file=\"$tmake_file mips/t-mips16\"\n \t;;\n mmix-knuth-mmixware)\n \textra_parts=\"crti.o crtn.o crtbegin.o crtend.o\""}, {"sha": "94fa0e94275008422371485796e700368c28fbe0", "filename": "libgcc/config/mips/t-mips16", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2Fconfig%2Fmips%2Ft-mips16", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2Fconfig%2Fmips%2Ft-mips16", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Ft-mips16?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -0,0 +1,2 @@\n+SYNC = yes\n+SYNC_CFLAGS = -mno-mips16"}, {"sha": "3bc0e4a82869563cc46e2793398f0b31c1401904", "filename": "libgcc/sync.c", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2Fsync.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6412d86762ea3c31654c4c72b5e7ef86e66d90e/libgcc%2Fsync.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fsync.c?ref=c6412d86762ea3c31654c4c72b5e7ef86e66d90e", "patch": "@@ -1,5 +1,5 @@\n /* Out-of-line libgcc versions of __sync_* builtins.  */\n-/* Copyright (C) 2008, 2009  Free Software Foundation, Inc.\n+/* Copyright (C) 2008, 2009, 2011  Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -22,8 +22,8 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n-/* This file is used by targets whose makefiles define LIBGCC_SYNC\n-   to \"yes\".  It is compiled with LIBGCC_SYNC_CFLAGS and provides\n+/* This file is used by targets whose makefiles define SYNC\n+   to \"yes\".  It is compiled with SYNC_CFLAGS and provides\n    out-of-line versions of all relevant __sync_* primitives.\n \n    These routines are intended for targets like MIPS that have two", "previous_filename": "gcc/config/sync.c"}]}