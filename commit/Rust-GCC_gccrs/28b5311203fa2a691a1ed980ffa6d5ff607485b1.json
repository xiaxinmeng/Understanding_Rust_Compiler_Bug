{"sha": "28b5311203fa2a691a1ed980ffa6d5ff607485b1", "node_id": "C_kwDOANBUbNoAKDI4YjUzMTEyMDNmYTJhNjkxYTFlZDk4MGZmYTZkNWZmNjA3NDg1YjE", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-08-30T12:36:39Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-08-30T13:38:19Z"}, "message": "Improve uninit pass dumping\n\nThis produces less redundancy and more complete info dumping\nthe control dependence chains.\n\n\t* gimple-predicate-analysis.cc (format_edge_vec): Dump\n\tboth source and destination.\n\t(dump_dep_chains): Remove.\n\t(uninit_analysis::init_use_preds): Remove redundant\n\tdumping of chains.", "tree": {"sha": "461640bde38c7138197f2692498d3a7489f117bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/461640bde38c7138197f2692498d3a7489f117bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28b5311203fa2a691a1ed980ffa6d5ff607485b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28b5311203fa2a691a1ed980ffa6d5ff607485b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28b5311203fa2a691a1ed980ffa6d5ff607485b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28b5311203fa2a691a1ed980ffa6d5ff607485b1/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fe915f35b7d8dc768a2b977c09aa02f933e1d1e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe915f35b7d8dc768a2b977c09aa02f933e1d1e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe915f35b7d8dc768a2b977c09aa02f933e1d1e9"}], "stats": {"total": 34, "additions": 4, "deletions": 30}, "files": [{"sha": "068196cb1579aa8b39e2226afac00e37cc0da40d", "filename": "gcc/gimple-predicate-analysis.cc", "status": "modified", "additions": 4, "deletions": 30, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28b5311203fa2a691a1ed980ffa6d5ff607485b1/gcc%2Fgimple-predicate-analysis.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28b5311203fa2a691a1ed980ffa6d5ff607485b1/gcc%2Fgimple-predicate-analysis.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-predicate-analysis.cc?ref=28b5311203fa2a691a1ed980ffa6d5ff607485b1", "patch": "@@ -122,10 +122,10 @@ format_edge_vec (const vec<edge> &ev)\n     {\n       char es[32];\n       const_edge e = ev[i];\n-      sprintf (es, \"%u\", e->src->index);\n+      sprintf (es, \"%u -> %u\", e->src->index, e->dest->index);\n       str += es;\n       if (i + 1 < n)\n-\tstr += \" -> \";\n+\tstr += \", \";\n     }\n   return str;\n }\n@@ -180,28 +180,6 @@ dump_pred_chain (const pred_chain &chain)\n     }\n }\n \n-/* Dump the first NCHAINS elements of the DEP_CHAINS array into DUMP_FILE.  */\n-\n-static void\n-dump_dep_chains (const auto_vec<edge> dep_chains[], unsigned nchains)\n-{\n-  if (!dump_file)\n-    return;\n-\n-  for (unsigned i = 0; i != nchains; ++i)\n-    {\n-      const auto_vec<edge> &v = dep_chains[i];\n-      unsigned n = v.length ();\n-      for (unsigned j = 0; j != n; ++j)\n-\t{\n-\t  fprintf (dump_file, \"%u\", v[j]->src->index);\n-\t  if (j + 1 < n)\n-\t    fprintf (dump_file, \" -> \");\n-\t}\n-      fputc ('\\n', dump_file);\n-    }\n-}\n-\n /* Return the 'normalized' conditional code with operand swapping\n    and condition inversion controlled by SWAP_COND and INVERT.  */\n \n@@ -1940,12 +1918,8 @@ uninit_analysis::init_use_preds (predicate &use_preds, basic_block def_bb,\n     }\n \n   if (DEBUG_PREDICATE_ANALYZER && dump_file)\n-    {\n-      fprintf (dump_file, \"predicate::predicate (def_bb = %u, use_bb = %u, func_t) \"\n-\t       \"initialized from %u dep_chains:\\n\\t\",\n-\t       def_bb->index, use_bb->index, num_chains);\n-      dump_dep_chains (dep_chains, num_chains);\n-    }\n+    fprintf (dump_file, \"init_use_preds (def_bb = %u, use_bb = %u)\\n\",\n+\t     def_bb->index, use_bb->index);\n \n   /* From the set of edges computed above initialize *THIS as the OR\n      condition under which the definition in DEF_BB is used in USE_BB."}]}