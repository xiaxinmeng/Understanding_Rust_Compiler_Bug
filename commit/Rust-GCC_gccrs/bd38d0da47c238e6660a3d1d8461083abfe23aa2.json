{"sha": "bd38d0da47c238e6660a3d1d8461083abfe23aa2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQzOGQwZGE0N2MyMzhlNjY2MGEzZDFkODQ2MTA4M2FiZmUyM2FhMg==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2018-12-06T08:14:57Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2018-12-06T08:14:57Z"}, "message": "testsuite - handle the -fno-diagnostics-show-line-numbers in compat tests.\n\n2018-12-06  Iain Sandoe  <iain@sandoe.co.uk>\n\n\t* lib/c-compat.exp (compat-use-alt-compiler):\n\tHandle -fno-diagnostics-show-line-numbers.\n\t(compat_setup_dfp): Likewise.\n\nFrom-SVN: r266840", "tree": {"sha": "bab62f993a53300c0cf19892ffbb462361d605d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bab62f993a53300c0cf19892ffbb462361d605d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd38d0da47c238e6660a3d1d8461083abfe23aa2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd38d0da47c238e6660a3d1d8461083abfe23aa2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd38d0da47c238e6660a3d1d8461083abfe23aa2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd38d0da47c238e6660a3d1d8461083abfe23aa2/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3b58759c2517e3e1249ded86c266773d0f32b38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3b58759c2517e3e1249ded86c266773d0f32b38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3b58759c2517e3e1249ded86c266773d0f32b38"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "d330d0eaba6a2ce5c11a1cc97048724983835c3a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd38d0da47c238e6660a3d1d8461083abfe23aa2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd38d0da47c238e6660a3d1d8461083abfe23aa2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bd38d0da47c238e6660a3d1d8461083abfe23aa2", "patch": "@@ -1,3 +1,9 @@\n+2018-12-06  Iain Sandoe  <iain@sandoe.co.uk>\n+\n+\t* lib/c-compat.exp (compat-use-alt-compiler):\n+\tHandle -fno-diagnostics-show-line-numbers.\n+\t(compat_setup_dfp): Likewise.\n+\n 2018-12-05  Jeff Law  <law@redhat.com>\n \n \tPR rtl-optimization/85770"}, {"sha": "45aa80afa4c3683e31b0ee7418ad6c6f5459f95b", "filename": "gcc/testsuite/lib/c-compat.exp", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd38d0da47c238e6660a3d1d8461083abfe23aa2/gcc%2Ftestsuite%2Flib%2Fc-compat.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd38d0da47c238e6660a3d1d8461083abfe23aa2/gcc%2Ftestsuite%2Flib%2Fc-compat.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fc-compat.exp?ref=bd38d0da47c238e6660a3d1d8461083abfe23aa2", "patch": "@@ -35,7 +35,7 @@ load_lib target-libpath.exp\n # \n proc compat-use-alt-compiler { } {\n     global GCC_UNDER_TEST ALT_CC_UNDER_TEST\n-    global compat_same_alt compat_alt_caret compat_alt_color\n+    global compat_same_alt compat_alt_caret compat_alt_color compat_no_line_no\n     global TEST_ALWAYS_FLAGS\n \n     # We don't need to do this if the alternate compiler is actually\n@@ -48,6 +48,9 @@ proc compat-use-alt-compiler { } {\n \tif { $compat_alt_color == 0 } then {\n \t    regsub -- \"-fdiagnostics-color=never\" $TEST_ALWAYS_FLAGS \"\" TEST_ALWAYS_FLAGS\n \t}\n+\tif { $compat_no_line_no == 0 } then {\n+\t    regsub -- \"-fno-diagnostics-show-line-numbers\" $TEST_ALWAYS_FLAGS \"\" TEST_ALWAYS_FLAGS\n+\t}\n \trestore_gcc_exec_prefix_env_var\n     }\n }\n@@ -77,10 +80,12 @@ proc compat_setup_dfp { } {\n     global compat_have_dfp\n     global compat_alt_caret\n     global compat_alt_color\n+    global compat_no_line_no\n     global TEST_ALWAYS_FLAGS compat_save_TEST_ALWAYS_FLAGS\n \n     set compat_alt_caret 0\n     set compat_alt_color 0\n+    set compat_no_line_no 0\n     set compat_save_TEST_ALWAYS_FLAGS $TEST_ALWAYS_FLAGS\n \n     verbose \"compat_setup_dfp: $compat_use_alt $compat_same_alt\" 2\n@@ -100,6 +105,11 @@ proc compat_setup_dfp { } {\n \t\tint dummy; } \"-fdiagnostics-color=never\"] != 0 } {\n \t    set compat_alt_color 1\n \t}\n+\tif { [check_no_compiler_messages_nocache compat_alt_has_no_line_no object {\n+\t\tint dummy; } \"-fno-diagnostics-show-line-numbers\"] != 0 } {\n+\t    set compat_no_line_no 1\n+\t}\n+\t\n \tcompat-use-tst-compiler\n     }\n "}]}