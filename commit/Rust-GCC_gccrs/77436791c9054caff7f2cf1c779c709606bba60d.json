{"sha": "77436791c9054caff7f2cf1c779c709606bba60d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzc0MzY3OTFjOTA1NGNhZmY3ZjJjZjFjNzc5YzcwOTYwNmJiYTYwZA==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2013-12-03T15:34:56Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2013-12-03T15:34:56Z"}, "message": "aarch64.c (aarch64_frame_pointer_required): Check LR_REGNUM.\n\n2013-12-03  Vladimir Makarov  <vmakarov@redhat.com>\n\n\t* config/aarch64/aarch64.c (aarch64_frame_pointer_required): Check\n\tLR_REGNUM.\n\t(aarch64_can_eliminate): Don't check elimination source when\n\tframe_pointer_required is false.\n\nFrom-SVN: r205637", "tree": {"sha": "0876f42a7e3548abad698b411ec4c9d7bbac9367", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0876f42a7e3548abad698b411ec4c9d7bbac9367"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77436791c9054caff7f2cf1c779c709606bba60d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77436791c9054caff7f2cf1c779c709606bba60d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77436791c9054caff7f2cf1c779c709606bba60d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77436791c9054caff7f2cf1c779c709606bba60d/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e8d8443d220b2d3651b0f14b8c98ac6e13fb923e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8d8443d220b2d3651b0f14b8c98ac6e13fb923e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8d8443d220b2d3651b0f14b8c98ac6e13fb923e"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "96b86cc3e07151a544c1adabbf4df2dcc0c1265a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77436791c9054caff7f2cf1c779c709606bba60d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77436791c9054caff7f2cf1c779c709606bba60d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77436791c9054caff7f2cf1c779c709606bba60d", "patch": "@@ -1,3 +1,10 @@\n+2013-12-03  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\t* config/aarch64/aarch64.c (aarch64_frame_pointer_required): Check\n+\tLR_REGNUM.\n+\t(aarch64_can_eliminate): Don't check elimination source when\n+\tframe_pointer_required is false.\n+\n 2013-12-03  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n \n         * config/avr/avr.c (avr_option_override): Warn if asked to generate"}, {"sha": "1c881c8f7afff58c1043b6b945c325e11d8d507a", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77436791c9054caff7f2cf1c779c709606bba60d/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77436791c9054caff7f2cf1c779c709606bba60d/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=77436791c9054caff7f2cf1c779c709606bba60d", "patch": "@@ -1703,7 +1703,7 @@ aarch64_frame_pointer_required (void)\n   if (flag_omit_frame_pointer && !faked_omit_frame_pointer)\n     return false;\n   else if (flag_omit_leaf_frame_pointer)\n-    return !crtl->is_leaf;\n+    return !crtl->is_leaf || df_regs_ever_live_p (LR_REGNUM);\n   return true;\n }\n \n@@ -4126,7 +4126,7 @@ aarch64_can_eliminate (const int from, const int to)\n \t of faked_omit_frame_pointer here (which is true when we always\n \t wish to keep non-leaf frame pointers but only wish to keep leaf frame\n \t pointers when LR is clobbered).  */\n-      if (from == FRAME_POINTER_REGNUM && to == STACK_POINTER_REGNUM\n+      if (to == STACK_POINTER_REGNUM\n \t  && df_regs_ever_live_p (LR_REGNUM)\n \t  && faked_omit_frame_pointer)\n \treturn false;"}]}