{"sha": "ef7e861a0f89bce417b38c31b74c29ad88073548", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWY3ZTg2MWEwZjg5YmNlNDE3YjM4YzMxYjc0YzI5YWQ4ODA3MzU0OA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2007-08-24T19:26:42Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-08-24T19:26:42Z"}, "message": "re PR fortran/33178 (-std=f95: SIGN with integer arguments rejected as initialization expression)\n\n2007-08-24  Tobias Burnus  <burnus@net-b.de>\n\n\tPR fortran/33178\n\t* intrinsic.c (gfc_intrinsic_func_interface): Fix initialization\n\texpression check.\n\n2007-08-24  Tobias Burnus  <burnus@net-b.de>\n\n\tPR fortran/33178\n\t* gfortran.dg/initialization_4.f90: Update dg-error.\n\t* gfortran.dg/initialization_13.f90: New.\n\nFrom-SVN: r127786", "tree": {"sha": "de2a5e9510c4894d4515481deec390f55e15921b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de2a5e9510c4894d4515481deec390f55e15921b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef7e861a0f89bce417b38c31b74c29ad88073548", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef7e861a0f89bce417b38c31b74c29ad88073548", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef7e861a0f89bce417b38c31b74c29ad88073548", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef7e861a0f89bce417b38c31b74c29ad88073548/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3101faab4620ad49753a2ec8a33e08ee9f8c0bcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3101faab4620ad49753a2ec8a33e08ee9f8c0bcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3101faab4620ad49753a2ec8a33e08ee9f8c0bcb"}], "stats": {"total": 36, "additions": 29, "deletions": 7}, "files": [{"sha": "95726ff159c80f92c00f9f0674e85ab1f2439b97", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ef7e861a0f89bce417b38c31b74c29ad88073548", "patch": "@@ -1,3 +1,9 @@\n+2007-08-24  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/33178\n+\t* intrinsic.c (gfc_intrinsic_func_interface): Fix initialization\n+\texpression check.\n+\n 2007-08-24  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/32972"}, {"sha": "4128e441d6316f01bbff62e82996fa898c15dd2f", "filename": "gcc/fortran/intrinsic.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ffortran%2Fintrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ffortran%2Fintrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fintrinsic.c?ref=ef7e861a0f89bce417b38c31b74c29ad88073548", "patch": "@@ -3409,12 +3409,10 @@ gfc_intrinsic_func_interface (gfc_expr *expr, int error_flag)\n      (4)   A reference to an elemental standard intrinsic function,\n            where each argument is an initialization expression  */\n \n-  if (gfc_init_expr \n-      && isym->elemental\n-      && (expr->ts.type != BT_INTEGER || expr->ts.type != BT_CHARACTER)\n-      && gfc_notify_std (GFC_STD_F2003, \"Extension: Evaluation of \"\n-\t\t\t\"nonstandard initialization expression at %L\",\n-\t\t\t&expr->where) == FAILURE)\n+  if (gfc_init_expr && isym->elemental && flag\n+      && gfc_notify_std (GFC_STD_F2003, \"Fortran 2003: Elemental function \"\n+\t\t\t\"as initialization expression with non-integer/non-\"\n+\t\t        \"character arguments at %L\", &expr->where) == FAILURE)\n     return MATCH_ERROR;\n \n   return MATCH_YES;"}, {"sha": "11f33388bca4f1b9ddde7bc91bcdf055645a2407", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ef7e861a0f89bce417b38c31b74c29ad88073548", "patch": "@@ -1,3 +1,9 @@\n+2007-08-24  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/33178\n+\t* gfortran.dg/initialization_4.f90: Update dg-error.\n+\t* gfortran.dg/initialization_13.f90: New.\n+\n 2007-08-24  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/33166"}, {"sha": "0cd6fa693f934eab21cac2fc5142222485e38cb9", "filename": "gcc/testsuite/gfortran.dg/initialization_13.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_13.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_13.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_13.f90?ref=ef7e861a0f89bce417b38c31b74c29ad88073548", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f95\" }\n+!\n+! PR fortran/33178\n+!\n+! Initialization expressions:\n+! Fortran 95: Elemental functions w/ integer/character arguments\n+! Fortran 2003: restriction lifted\n+!\n+integer :: a = sign(1,1)   ! Ok F95\n+real    :: b = sign(1.,1.) ! { dg-error \"Fortran 2003: Elemental function as initialization expression\" }\n+end"}, {"sha": "24ccf9c6457392d61a0cb4cd8476b96e7c28c430", "filename": "gcc/testsuite/gfortran.dg/initialization_4.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef7e861a0f89bce417b38c31b74c29ad88073548/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_4.f90?ref=ef7e861a0f89bce417b38c31b74c29ad88073548", "patch": "@@ -2,6 +2,6 @@\n ! initialization expression, even if -std=f95 was used\n ! { dg-do compile }\n ! { dg-options \"-std=f95\" }\n-real, parameter :: pi = 4.0*Atan(1.0) ! { dg-error \"Evaluation of nonstandard initialization expression\" }\n+real, parameter :: pi = 4.0*Atan(1.0) ! { dg-error \"Fortran 2003: Elemental function as initialization expression\" }\n real, parameter :: three = 27.0**(1.0/3.0) ! { dg-error \"Noninteger exponent in an initialization expression\" }\n end"}]}