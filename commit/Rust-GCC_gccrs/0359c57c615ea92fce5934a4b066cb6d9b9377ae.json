{"sha": "0359c57c615ea92fce5934a4b066cb6d9b9377ae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM1OWM1N2M2MTVlYTkyZmNlNTkzNGE0YjA2NmNiNmQ5YjkzNzdhZQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2008-05-26T09:40:23Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-05-26T09:40:23Z"}, "message": "gnatname.adb: Minor reformatting\n\n2008-05-26  Robert Dewar  <dewar@adacore.com>\n\n\t* gnatname.adb: Minor reformatting\n\nFrom-SVN: r135899", "tree": {"sha": "493c190dc5058443c6dca709d930a7afefc2d5f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/493c190dc5058443c6dca709d930a7afefc2d5f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0359c57c615ea92fce5934a4b066cb6d9b9377ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0359c57c615ea92fce5934a4b066cb6d9b9377ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0359c57c615ea92fce5934a4b066cb6d9b9377ae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0359c57c615ea92fce5934a4b066cb6d9b9377ae/comments", "author": null, "committer": null, "parents": [{"sha": "24b6676840a8e470c23ea4016f8f029f1c1979f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24b6676840a8e470c23ea4016f8f029f1c1979f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24b6676840a8e470c23ea4016f8f029f1c1979f1"}], "stats": {"total": 67, "additions": 49, "deletions": 18}, "files": [{"sha": "d684551ed911591df523a93c8b00223b36d8dffd", "filename": "gcc/ada/gnatname.adb", "status": "modified", "additions": 49, "deletions": 18, "changes": 67, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0359c57c615ea92fce5934a4b066cb6d9b9377ae/gcc%2Fada%2Fgnatname.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0359c57c615ea92fce5934a4b066cb6d9b9377ae/gcc%2Fada%2Fgnatname.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatname.adb?ref=0359c57c615ea92fce5934a4b066cb6d9b9377ae", "patch": "@@ -201,6 +201,9 @@ procedure Gnatname is\n          when Error_In_Regexp =>\n             Fail (\"invalid regular expression \"\"\", S, \"\"\"\");\n       end Check_Regular_Expression;\n+\n+   --  Start of processing for Scan_Args\n+\n    begin\n       --  First check for --version or --help\n \n@@ -214,16 +217,18 @@ procedure Gnatname is\n       Dir_File_Name_Expected     := False;\n       Foreign_Pattern_Expected   := False;\n       Excluded_Pattern_Expected  := False;\n+\n       for Next_Arg in 1 .. Argument_Count loop\n          declare\n             Next_Argv : constant String := Argument (Next_Arg);\n             Arg       : String (1 .. Next_Argv'Length) := Next_Argv;\n \n          begin\n             if Arg'Length > 0 then\n-               if Project_File_Name_Expected then\n-                  --  -P xxx\n \n+               --  -P xxx\n+\n+               if Project_File_Name_Expected then\n                   if Arg (1) = '-' then\n                      Fail (\"project file name missing\");\n \n@@ -233,48 +238,50 @@ procedure Gnatname is\n                      Project_File_Name_Expected := False;\n                   end if;\n \n-               elsif Pragmas_File_Expected then\n-                  --  -c file\n+               --  -c file\n \n+               elsif Pragmas_File_Expected then\n                   File_Set := True;\n                   File_Path := new String'(Arg);\n                   Create_Project := False;\n                   Pragmas_File_Expected := False;\n \n-               elsif Directory_Expected then\n-                  --  -d xxx\n+               --  -d xxx\n \n+               elsif Directory_Expected then\n                   Add_Source_Directory (Arg);\n                   Directory_Expected := False;\n \n-               elsif Dir_File_Name_Expected then\n-                  --  -D xxx\n+               --  -D xxx\n \n+               elsif Dir_File_Name_Expected then\n                   Get_Directories (Arg);\n                   Dir_File_Name_Expected := False;\n \n-               elsif Foreign_Pattern_Expected then\n-                  --  -f xxx\n+               --  -f xxx\n \n+               elsif Foreign_Pattern_Expected then\n                   Patterns.Append\n                     (Arguments.Table (Arguments.Last).Foreign_Patterns,\n                      new String'(Arg));\n                   Check_Regular_Expression (Arg);\n                   Foreign_Pattern_Expected := False;\n \n-               elsif Excluded_Pattern_Expected then\n-                  --  -x xxx\n+               --  -x xxx\n \n+               elsif Excluded_Pattern_Expected then\n                   Patterns.Append\n                     (Arguments.Table (Arguments.Last).Excluded_Patterns,\n                      new String'(Arg));\n                   Check_Regular_Expression (Arg);\n                   Excluded_Pattern_Expected := False;\n \n-               elsif Arg = \"--and\" then\n+               --  There must be at least one Ada pattern or one foreign\n+               --  pattern for the previous section.\n \n-                  --  There must be at least one Ada pattern or one foreign\n-                  --  pattern for the previous section.\n+               --  --and\n+\n+               elsif Arg = \"--and\" then\n \n                   if Patterns.Last\n                     (Arguments.Table (Arguments.Last).Name_Patterns) = 0\n@@ -297,8 +304,7 @@ procedure Gnatname is\n                         new String'(\".\"));\n                   end if;\n \n-                  --  Add another component in table Arguments and initialize\n-                  --  it.\n+                  --  Add and initialize another component to Arguments table\n \n                   Arguments.Increment_Last;\n \n@@ -319,12 +325,16 @@ procedure Gnatname is\n                   Patterns.Set_Last\n                     (Arguments.Table (Arguments.Last).Foreign_Patterns, 0);\n \n+               --  Subdirectory switch\n+\n                elsif Arg'Length > Subdirs_Switch'Length\n                  and then Arg (1 .. Subdirs_Switch'Length) = Subdirs_Switch\n                then\n                   Subdirs :=\n                     new String'(Arg (Subdirs_Switch'Length + 1 .. Arg'Last));\n \n+               --  -c\n+\n                elsif Arg'Length >= 2 and then Arg (1 .. 2) = \"-c\" then\n                   if File_Set then\n                      Fail (\"only one -P or -c switch may be specified\");\n@@ -343,6 +353,8 @@ procedure Gnatname is\n                      Create_Project := False;\n                   end if;\n \n+               --  -d\n+\n                elsif Arg'Length >= 2 and then Arg (1 .. 2) = \"-d\" then\n                   if Arg'Length = 2 then\n                      Directory_Expected := True;\n@@ -355,6 +367,8 @@ procedure Gnatname is\n                      Add_Source_Directory (Arg (3 .. Arg'Last));\n                   end if;\n \n+               --  -D\n+\n                elsif Arg'Length >= 2 and then Arg (1 .. 2) = \"-D\" then\n                   if Arg'Length = 2 then\n                      Dir_File_Name_Expected := True;\n@@ -367,9 +381,13 @@ procedure Gnatname is\n                      Get_Directories (Arg (3 .. Arg'Last));\n                   end if;\n \n+               --  -eL\n+\n                elsif Arg = \"-eL\" then\n                   Opt.Follow_Links_For_Files := True;\n \n+               --  -f\n+\n                elsif Arg'Length >= 2 and then Arg (1 .. 2) = \"-f\" then\n                   if Arg'Length = 2 then\n                      Foreign_Pattern_Expected := True;\n@@ -385,15 +403,20 @@ procedure Gnatname is\n                      Check_Regular_Expression (Arg (3 .. Arg'Last));\n                   end if;\n \n+               --  -gnatep or -gnateD\n+\n                elsif Arg'Length > 7 and then\n                  (Arg  (1 .. 7) = \"-gnatep\" or else Arg (1 .. 7) = \"-gnateD\")\n                then\n-\n                   Preprocessor_Switches.Append (new String'(Arg));\n \n+               --  -h\n+\n                elsif Arg = \"-h\" then\n                   Usage_Needed := True;\n \n+               --  -p\n+\n                elsif Arg'Length >= 2 and then Arg (1 .. 2) = \"-P\" then\n                   if File_Set then\n                      Fail (\"only one -c or -P switch may be specified\");\n@@ -414,13 +437,17 @@ procedure Gnatname is\n \n                   Create_Project := True;\n \n+               --  -v\n+\n                elsif Arg = \"-v\" then\n                   if Opt.Verbose_Mode then\n                      Very_Verbose := True;\n                   else\n                      Opt.Verbose_Mode := True;\n                   end if;\n \n+               --  -x\n+\n                elsif Arg'Length >= 2 and then Arg (1 .. 2) = \"-x\" then\n                   if Arg'Length = 2 then\n                      Excluded_Pattern_Expected := True;\n@@ -436,9 +463,13 @@ procedure Gnatname is\n                      Check_Regular_Expression (Arg (3 .. Arg'Last));\n                   end if;\n \n+               --  Junk switch starting with minus\n+\n                elsif Arg (1) = '-' then\n                   Fail (\"wrong switch: \" & Arg);\n \n+               --  Not a recognized switch, assume file name\n+\n                else\n                   Canonical_Case_File_Name (Arg);\n                   Patterns.Append"}]}