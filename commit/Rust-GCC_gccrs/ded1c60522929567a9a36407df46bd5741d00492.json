{"sha": "ded1c60522929567a9a36407df46bd5741d00492", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGVkMWM2MDUyMjkyOTU2N2E5YTM2NDA3ZGY0NmJkNTc0MWQwMDQ5Mg==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@kss-loka.si", "date": "2005-01-18T06:30:43Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2005-01-18T06:30:43Z"}, "message": "i386.c (override_options): Revert 2004-11-24 change.\n\n\t* config/i386/i386.c (override_options): Revert 2004-11-24 change.\n\t* config/i386/i386.md (fmodsf3, dremsf3, *sinsf2, *cossf2, sincossf3,\n\t*tansf3_1, tansf2, atan2sf3_1, atan2sf3, atansf2, asinsf2, acossf2,\n\tlogsf2, log10sf2, log2sf2, log1psf2, logbsf2, ilogbsf2, expsf2,\n\texp10sf2, exp2sf2, expm1sf2, rintsf2, floorsf2, ceilsf2, btruncsf2,\n\tnearbyintsf2): Disable for TARGET_SSE_MATH.  Leave patterns enabled\n\tfor TARGET_MIX_SSE_I387.\n\t(fmoddf3, dremdf3, *sindf2, *sinextendsfdf2, *cosdf2, *cosextendsfdf2,\n\tsincosdf3, *sincosextendsfdf3, *tandf3_1, tandf2, atan2df3_1,\n\tatan2df3, atandf2, asindf2, acosdf2, logdf2, log10df2, log2df2,\n\tlog1pdf2, logbdf2, expdf2, exp10df2, exp2df2, expm1df2, rintdf2,\n\tfloordf2, ceildf2, btruncdf2, nearbyintdf2): Disable for\n\t(TARGET_SSE2 && TARGET_SSE_MATH).  Leave patterns enabled for\n\tTARGET_MIX_SSE_I387.\n\t(atan2sf3, atan2df3, atan2xf3): Remove register constraints\n\tfrom expander.\n\nFrom-SVN: r93815", "tree": {"sha": "e28e3d193fa662dff35f2ed9bcc3ec0e5587205e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e28e3d193fa662dff35f2ed9bcc3ec0e5587205e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ded1c60522929567a9a36407df46bd5741d00492", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ded1c60522929567a9a36407df46bd5741d00492", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ded1c60522929567a9a36407df46bd5741d00492", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ded1c60522929567a9a36407df46bd5741d00492/comments", "author": null, "committer": null, "parents": [{"sha": "d0405259e6be52fe612f8665fef12c4dbd2da0da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0405259e6be52fe612f8665fef12c4dbd2da0da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0405259e6be52fe612f8665fef12c4dbd2da0da"}], "stats": {"total": 97, "additions": 84, "deletions": 13}, "files": [{"sha": "141cbc4e23eee8f708d21138df1d7e2c29560016", "filename": "gcc/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ded1c60522929567a9a36407df46bd5741d00492/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ded1c60522929567a9a36407df46bd5741d00492/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ded1c60522929567a9a36407df46bd5741d00492", "patch": "@@ -1,3 +1,22 @@\n+2005-01-18  Uros Bizjak  <uros@kss-loka.si>\n+\n+\t* config/i386/i386.c (override_options): Revert 2004-11-24 change.\n+\t* config/i386/i386.md (fmodsf3, dremsf3, *sinsf2, *cossf2, sincossf3,\n+\t*tansf3_1, tansf2, atan2sf3_1, atan2sf3, atansf2, asinsf2, acossf2,\n+\tlogsf2, log10sf2, log2sf2, log1psf2, logbsf2, ilogbsf2, expsf2,\n+\texp10sf2, exp2sf2, expm1sf2, rintsf2, floorsf2, ceilsf2, btruncsf2,\n+\tnearbyintsf2): Disable for TARGET_SSE_MATH.  Leave patterns enabled\n+\tfor TARGET_MIX_SSE_I387.\n+\t(fmoddf3, dremdf3, *sindf2, *sinextendsfdf2, *cosdf2, *cosextendsfdf2,\n+\tsincosdf3, *sincosextendsfdf3, *tandf3_1, tandf2, atan2df3_1,\n+\tatan2df3, atandf2, asindf2, acosdf2, logdf2, log10df2, log2df2,\n+\tlog1pdf2, logbdf2, expdf2, exp10df2, exp2df2, expm1df2, rintdf2,\n+\tfloordf2, ceildf2, btruncdf2, nearbyintdf2): Disable for\n+\t(TARGET_SSE2 && TARGET_SSE_MATH).  Leave patterns enabled for\n+\tTARGET_MIX_SSE_I387.\n+\t(atan2sf3, atan2df3, atan2xf3): Remove register constraints\n+\tfrom expander.\n+\n 2005-01-18  Uros Bizjak  <uros@kss-loka.si>\n \n \tPR target/19424"}, {"sha": "5f00e4a20eca6f4d61fe3640c2c19631ba53810b", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ded1c60522929567a9a36407df46bd5741d00492/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ded1c60522929567a9a36407df46bd5741d00492/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=ded1c60522929567a9a36407df46bd5741d00492", "patch": "@@ -1557,10 +1557,6 @@ override_options (void)\n \terror (\"bad value (%s) for -mfpmath= switch\", ix86_fpmath_string);\n     }\n \n-  /* If fpmath doesn't include 387, disable use of x87 intrinsics.  */\n-  if (! (ix86_fpmath & FPMATH_387))\n-    target_flags |= MASK_NO_FANCY_MATH_387;\n-\n   if ((x86_accumulate_outgoing_args & TUNEMASK)\n       && !(target_flags_explicit & MASK_ACCUMULATE_OUTGOING_ARGS)\n       && !optimize_size)"}, {"sha": "949c3921bc646f53f1b7eb7a3b57109885b82d44", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 65, "deletions": 9, "changes": 74, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ded1c60522929567a9a36407df46bd5741d00492/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ded1c60522929567a9a36407df46bd5741d00492/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=ded1c60522929567a9a36407df46bd5741d00492", "patch": "@@ -14766,6 +14766,7 @@\n    (use (match_operand:SF 1 \"register_operand\" \"\"))\n    (use (match_operand:SF 2 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -14790,6 +14791,7 @@\n    (use (match_operand:DF 1 \"register_operand\" \"\"))\n    (use (match_operand:DF 2 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -14849,6 +14851,7 @@\n    (use (match_operand:SF 1 \"register_operand\" \"\"))\n    (use (match_operand:SF 2 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -14873,6 +14876,7 @@\n    (use (match_operand:DF 1 \"register_operand\" \"\"))\n    (use (match_operand:DF 2 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -14915,6 +14919,7 @@\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"0\")] UNSPEC_SIN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fsin\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14924,6 +14929,7 @@\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"0\")] UNSPEC_SIN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fsin\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14935,6 +14941,7 @@\n \t\t     (match_operand:SF 1 \"register_operand\" \"0\"))]\n \t\t   UNSPEC_SIN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fsin\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14953,6 +14960,7 @@\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"0\")] UNSPEC_COS))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fcos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14962,6 +14970,7 @@\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"0\")] UNSPEC_COS))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fcos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14973,6 +14982,7 @@\n \t\t     (match_operand:SF 1 \"register_operand\" \"0\"))]\n \t\t   UNSPEC_COS))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fcos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15000,6 +15010,7 @@\n    (set (match_operand:DF 1 \"register_operand\" \"=u\")\n         (unspec:DF [(match_dup 2)] UNSPEC_SINCOS_SIN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fsincos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15034,6 +15045,7 @@\n    (set (match_operand:SF 1 \"register_operand\" \"=u\")\n         (unspec:SF [(match_dup 2)] UNSPEC_SINCOS_SIN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fsincos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15070,6 +15082,7 @@\n         (unspec:DF [(float_extend:DF\n \t\t     (match_dup 2))] UNSPEC_SINCOS_SIN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fsincos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15144,6 +15157,7 @@\n    (set (match_operand:DF 1 \"register_operand\" \"=u\")\n         (unspec:DF [(match_dup 2)] UNSPEC_TAN_TAN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fptan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15174,6 +15188,7 @@\n \t      (set (match_operand:DF 0 \"register_operand\" \"\")\n \t\t   (unspec:DF [(match_dup 1)] UNSPEC_TAN_TAN))])]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (DFmode);\n@@ -15186,6 +15201,7 @@\n    (set (match_operand:SF 1 \"register_operand\" \"=u\")\n         (unspec:SF [(match_dup 2)] UNSPEC_TAN_TAN))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fptan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15216,6 +15232,7 @@\n \t      (set (match_operand:SF 0 \"register_operand\" \"\")\n \t\t   (unspec:SF [(match_dup 1)] UNSPEC_TAN_TAN))])]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (SFmode);\n@@ -15270,16 +15287,18 @@\n \t\t   UNSPEC_FPATAN))\n    (clobber (match_scratch:DF 3 \"=1\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fpatan\"\n   [(set_attr \"type\" \"fpspc\")\n    (set_attr \"mode\" \"DF\")])\n \n (define_expand \"atan2df3\"\n-  [(use (match_operand:DF 0 \"register_operand\" \"=f\"))\n-   (use (match_operand:DF 2 \"register_operand\" \"0\"))\n-   (use (match_operand:DF 1 \"register_operand\" \"u\"))]\n+  [(use (match_operand:DF 0 \"register_operand\" \"\"))\n+   (use (match_operand:DF 2 \"register_operand\" \"\"))\n+   (use (match_operand:DF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx copy = gen_reg_rtx (DFmode);\n@@ -15295,6 +15314,7 @@\n \t\t    UNSPEC_FPATAN))\n \t      (clobber (match_scratch:DF 3 \"\"))])]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (DFmode);\n@@ -15308,16 +15328,18 @@\n \t\t   UNSPEC_FPATAN))\n    (clobber (match_scratch:SF 3 \"=1\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n   \"fpatan\"\n   [(set_attr \"type\" \"fpspc\")\n    (set_attr \"mode\" \"SF\")])\n \n (define_expand \"atan2sf3\"\n-  [(use (match_operand:SF 0 \"register_operand\" \"=f\"))\n-   (use (match_operand:SF 2 \"register_operand\" \"0\"))\n-   (use (match_operand:SF 1 \"register_operand\" \"u\"))]\n+  [(use (match_operand:SF 0 \"register_operand\" \"\"))\n+   (use (match_operand:SF 2 \"register_operand\" \"\"))\n+   (use (match_operand:SF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx copy = gen_reg_rtx (SFmode);\n@@ -15333,6 +15355,7 @@\n \t\t    UNSPEC_FPATAN))\n \t      (clobber (match_scratch:SF 3 \"\"))])]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (SFmode);\n@@ -15352,9 +15375,9 @@\n    (set_attr \"mode\" \"XF\")])\n \n (define_expand \"atan2xf3\"\n-  [(use (match_operand:XF 0 \"register_operand\" \"=f\"))\n-   (use (match_operand:XF 2 \"register_operand\" \"0\"))\n-   (use (match_operand:XF 1 \"register_operand\" \"u\"))]\n+  [(use (match_operand:XF 0 \"register_operand\" \"\"))\n+   (use (match_operand:XF 2 \"register_operand\" \"\"))\n+   (use (match_operand:XF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n@@ -15390,6 +15413,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 7)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15413,6 +15437,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 7)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15457,6 +15482,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 7)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15480,6 +15506,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 7)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15533,6 +15560,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15555,6 +15583,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15592,6 +15621,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15614,6 +15644,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15651,6 +15682,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15670,6 +15702,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15707,6 +15740,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -15722,6 +15756,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -15765,6 +15800,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15782,6 +15818,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15811,6 +15848,7 @@\n \t           (fix:SI (match_dup 3)))\n \t      (clobber (reg:CC FLAGS_REG))])]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15858,6 +15896,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 10)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15887,6 +15926,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 10)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15942,6 +15982,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 10)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15971,6 +16012,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 10)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16025,6 +16067,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 8)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -16050,6 +16093,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 8)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -16105,6 +16149,7 @@\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 14)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16141,6 +16186,7 @@\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 14)))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16202,6 +16248,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16218,6 +16265,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16257,6 +16305,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16277,6 +16326,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16325,6 +16375,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16345,6 +16396,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16393,6 +16445,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16413,6 +16466,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16461,6 +16515,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!(TARGET_SSE2 && TARGET_SSE_MATH) || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16481,6 +16536,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n   \"TARGET_USE_FANCY_MATH_387\n+   && (!TARGET_SSE_MATH || TARGET_MIX_SSE_I387)\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);"}]}