{"sha": "0bb6c81b1c3076cdfccd82bb382c4450643a1ee0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGJiNmM4MWIxYzMwNzZjZGZjY2Q4MmJiMzgyYzQ0NTA2NDNhMWVlMA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-10-31T21:18:02Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-10-31T21:18:02Z"}, "message": "(movsf...\n\n(movsf, movdf, movxf): If we are moving floating point constants to a\nnon-memory location that aren't 0 or 1, assume we need the pic\nregister if -fpic.\n\nFrom-SVN: r8372", "tree": {"sha": "a4849156e74e005afd635823ace1c40a9df6fa4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4849156e74e005afd635823ace1c40a9df6fa4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0bb6c81b1c3076cdfccd82bb382c4450643a1ee0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bb6c81b1c3076cdfccd82bb382c4450643a1ee0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bb6c81b1c3076cdfccd82bb382c4450643a1ee0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bb6c81b1c3076cdfccd82bb382c4450643a1ee0/comments", "author": null, "committer": null, "parents": [{"sha": "2f0da90602f07493b6512c5b710f46a1f85ae0b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f0da90602f07493b6512c5b710f46a1f85ae0b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f0da90602f07493b6512c5b710f46a1f85ae0b4"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "a4cfff591f527912f433e6cd7b253ab6011ac441", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bb6c81b1c3076cdfccd82bb382c4450643a1ee0/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bb6c81b1c3076cdfccd82bb382c4450643a1ee0/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=0bb6c81b1c3076cdfccd82bb382c4450643a1ee0", "patch": "@@ -1080,6 +1080,18 @@\n       emit_insn ((*genfunc) (operands[0], operands[1]));\n       DONE;\n     }\n+\n+  /* If we are loading a floating point constant that isn't 0 or 1 into a register,\n+     indicate we need the pic register loaded.  This could be optimized into stores\n+     of constants if the target eventually moves to memory, but better safe than\n+     sorry.  */\n+  if (flag_pic\n+      && GET_CODE (operands[0]) != MEM\n+      && GET_CODE (operands[1]) == CONST_DOUBLE\n+      && !standard_80387_constant_p (operands[1]))\n+    {\n+      current_function_uses_pic_offset_table = 1;\n+    }\n }\")\n \n (define_insn \"movsf_push_nomove\"\n@@ -1249,6 +1261,18 @@\n       emit_insn ((*genfunc) (operands[0], operands[1]));\n       DONE;\n     }\n+\n+  /* If we are loading a floating point constant that isn't 0 or 1 into a register,\n+     indicate we need the pic register loaded.  This could be optimized into stores\n+     of constants if the target eventually moves to memory, but better safe than\n+     sorry.  */\n+  if (flag_pic\n+      && GET_CODE (operands[0]) != MEM\n+      && GET_CODE (operands[1]) == CONST_DOUBLE\n+      && !standard_80387_constant_p (operands[1]))\n+    {\n+      current_function_uses_pic_offset_table = 1;\n+    }\n }\")\n \n (define_insn \"movdf_push_nomove\"\n@@ -1408,6 +1432,18 @@\n       emit_insn ((*genfunc) (operands[0], operands[1]));\n       DONE;\n     }\n+\n+  /* If we are loading a floating point constant that isn't 0 or 1 into a register,\n+     indicate we need the pic register loaded.  This could be optimized into stores\n+     of constants if the target eventually moves to memory, but better safe than\n+     sorry.  */\n+  if (flag_pic\n+      && GET_CODE (operands[0]) != MEM\n+      && GET_CODE (operands[1]) == CONST_DOUBLE\n+      && !standard_80387_constant_p (operands[1]))\n+    {\n+      current_function_uses_pic_offset_table = 1;\n+    }\n }\")\n \n "}]}