{"sha": "37e10165c13e9860dabbf6eaf85481debec459e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzdlMTAxNjVjMTNlOTg2MGRhYmJmNmVhZjg1NDgxZGViZWM0NTllOQ==", "commit": {"author": {"name": "Teresa Johnson", "email": "tejohnson@google.com", "date": "2014-11-13T15:36:48Z"}, "committer": {"name": "Teresa Johnson", "email": "tejohnson@gcc.gnu.org", "date": "2014-11-13T15:36:48Z"}, "message": "re PR tree-optimization/63841 (Incorrect strlen optimization after complete unroll)\n\n2014-11-13  Teresa Johnson  <tejohnson@google.com>\n\ngcc:\n\tPR tree-optimization/63841\n\t* tree.c (initializer_zerop): A clobber does not zero initialize.\n\ngcc/testsuite:\n\tPR tree-optimization/63841\n\t* g++.dg/tree-ssa/pr63841.C: New test.\n\nFrom-SVN: r217505", "tree": {"sha": "b15747ba3fade3c6296ce7777f365b466280d4b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b15747ba3fade3c6296ce7777f365b466280d4b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37e10165c13e9860dabbf6eaf85481debec459e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37e10165c13e9860dabbf6eaf85481debec459e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37e10165c13e9860dabbf6eaf85481debec459e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37e10165c13e9860dabbf6eaf85481debec459e9/comments", "author": {"login": "teresajohnson", "id": 20446403, "node_id": "MDQ6VXNlcjIwNDQ2NDAz", "avatar_url": "https://avatars.githubusercontent.com/u/20446403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teresajohnson", "html_url": "https://github.com/teresajohnson", "followers_url": "https://api.github.com/users/teresajohnson/followers", "following_url": "https://api.github.com/users/teresajohnson/following{/other_user}", "gists_url": "https://api.github.com/users/teresajohnson/gists{/gist_id}", "starred_url": "https://api.github.com/users/teresajohnson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teresajohnson/subscriptions", "organizations_url": "https://api.github.com/users/teresajohnson/orgs", "repos_url": "https://api.github.com/users/teresajohnson/repos", "events_url": "https://api.github.com/users/teresajohnson/events{/privacy}", "received_events_url": "https://api.github.com/users/teresajohnson/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6fad471b8f1a62c385624bf4cecbd57c397bbe91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fad471b8f1a62c385624bf4cecbd57c397bbe91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fad471b8f1a62c385624bf4cecbd57c397bbe91"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "c6014e993a39e37b4bfd21faffaf3f5b7ebdd8f5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=37e10165c13e9860dabbf6eaf85481debec459e9", "patch": "@@ -1,3 +1,8 @@\n+2014-11-13  Teresa Johnson  <tejohnson@google.com>\n+\n+\tPR tree-optimization/63841\n+\t* tree.c (initializer_zerop): A clobber does not zero initialize.\n+\n 2014-11-13  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \t* optabs.c (prepare_operand): Gracefully fail if the mode of X"}, {"sha": "b4484b62b0da48b4f9d65e54046316900ca811af", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=37e10165c13e9860dabbf6eaf85481debec459e9", "patch": "@@ -1,3 +1,7 @@\n+2014-11-13  Teresa Johnson  <tejohnson@google.com>\n+\tPR tree-optimization/63841\n+\t* g++.dg/tree-ssa/pr63841.C: New test.\n+\n 2014-11-13  Richard Biener  <rguenther@suse.de>\n \n \t* gcc.dg/tree-ssa/forwprop-28.c: Adjust."}, {"sha": "466e320d431c7539a9614e4abf6ad28f6b921497", "filename": "gcc/testsuite/g++.dg/tree-ssa/pr63841.C", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr63841.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr63841.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftree-ssa%2Fpr63841.C?ref=37e10165c13e9860dabbf6eaf85481debec459e9", "patch": "@@ -0,0 +1,38 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O2\" } */\n+\n+#include <cstdio>\n+#include <string>\n+\n+std::string __attribute__ ((noinline)) comp_test_write() {\n+  std::string data;\n+\n+  for (int i = 0; i < 2; ++i) {\n+    char b = 1 >> (i * 8);\n+    data.append(&b, 1);\n+  }\n+\n+  return data;\n+}\n+\n+std::string __attribute__ ((noinline)) comp_test_write_good() {\n+  std::string data;\n+\n+  char b;\n+  for (int i = 0; i < 2; ++i) {\n+    b = 1 >> (i * 8);\n+    data.append(&b, 1);\n+  }\n+\n+  return data;\n+}\n+\n+int main() {\n+  std::string good = comp_test_write_good();\n+  printf(\"expected: %hx\\n\", *(short*)good.c_str());\n+\n+  std::string bad = comp_test_write();\n+  printf(\"got: %hx\\n\", *(short*)bad.c_str());\n+\n+  return good != bad;\n+}"}, {"sha": "cf37a1980c414af101d495d2361a909bec9b4566", "filename": "gcc/tree.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37e10165c13e9860dabbf6eaf85481debec459e9/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=37e10165c13e9860dabbf6eaf85481debec459e9", "patch": "@@ -10330,6 +10330,8 @@ initializer_zerop (const_tree init)\n       {\n \tunsigned HOST_WIDE_INT idx;\n \n+\tif (TREE_CLOBBER_P (init))\n+\t  return false;\n \tFOR_EACH_CONSTRUCTOR_VALUE (CONSTRUCTOR_ELTS (init), idx, elt)\n \t  if (!initializer_zerop (elt))\n \t    return false;"}]}