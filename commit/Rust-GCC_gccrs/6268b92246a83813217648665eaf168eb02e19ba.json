{"sha": "6268b92246a83813217648665eaf168eb02e19ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjI2OGI5MjI0NmE4MzgxMzIxNzY0ODY2NWVhZjE2OGViMDJlMTliYQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2001-08-31T19:28:58Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2001-08-31T19:28:58Z"}, "message": "calls.c (emit_library_call_value): Don't use a fixed argument after VA_CLOSE, i.e.\n\n\t* calls.c (emit_library_call_value): Don't use a fixed\n\targument after VA_CLOSE, i.e. out of scope in traditional C.\n\n\t* emit-rtl.c (gen_rtvec): Likewise.\n\nFrom-SVN: r45332", "tree": {"sha": "8afdefe1e9cfb70759b18ad75b6e1227c520dd36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8afdefe1e9cfb70759b18ad75b6e1227c520dd36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6268b92246a83813217648665eaf168eb02e19ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6268b92246a83813217648665eaf168eb02e19ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6268b92246a83813217648665eaf168eb02e19ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6268b92246a83813217648665eaf168eb02e19ba/comments", "author": null, "committer": null, "parents": [{"sha": "78b411667a29f42bce0465466b017d06d3091f5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78b411667a29f42bce0465466b017d06d3091f5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78b411667a29f42bce0465466b017d06d3091f5b"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "8caa502347372c58a4b98769fd232b368a78e6ee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6268b92246a83813217648665eaf168eb02e19ba/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6268b92246a83813217648665eaf168eb02e19ba/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6268b92246a83813217648665eaf168eb02e19ba", "patch": "@@ -1,3 +1,10 @@\n+2001-08-31  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* calls.c (emit_library_call_value): Don't use a fixed\n+\targument after VA_CLOSE, i.e. out of scope in traditional C.\n+\n+\t* emit-rtl.c (gen_rtvec): Likewise.\n+\n 2001-08-31  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* Makefile.in (c-pragma.o): Depend on output.h."}, {"sha": "8d6d0849148299895589825a86c3cf4aa2ddb12b", "filename": "gcc/calls.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6268b92246a83813217648665eaf168eb02e19ba/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6268b92246a83813217648665eaf168eb02e19ba/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=6268b92246a83813217648665eaf168eb02e19ba", "patch": "@@ -4227,18 +4227,21 @@ emit_library_call_value VPARAMS((rtx orgfun, rtx value,\n \t\t\t\t enum libcall_type fn_type,\n \t\t\t\t enum machine_mode outmode, int nargs, ...))\n {\n+  rtx result;\n+  \n   VA_OPEN (p, nargs);\n   VA_FIXEDARG (p, rtx, orgfun);\n   VA_FIXEDARG (p, rtx, value);\n   VA_FIXEDARG (p, int, fn_type);\n   VA_FIXEDARG (p, enum machine_mode, outmode);\n   VA_FIXEDARG (p, int, nargs);\n \n-  value = emit_library_call_value_1 (1, orgfun, value, fn_type, outmode, nargs, p);\n+  result = emit_library_call_value_1 (1, orgfun, value, fn_type, outmode,\n+\t\t\t\t      nargs, p);\n \n   VA_CLOSE (p);\n \n-  return value;\n+  return result;\n }\n \f\n #if 0"}, {"sha": "d04e3d23ba4d8b6f1ae41a79fa4f38e3419c6b50", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6268b92246a83813217648665eaf168eb02e19ba/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6268b92246a83813217648665eaf168eb02e19ba/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=6268b92246a83813217648665eaf168eb02e19ba", "patch": "@@ -517,7 +517,7 @@ gen_rtx VPARAMS ((enum rtx_code code, enum machine_mode mode, ...))\n rtvec\n gen_rtvec VPARAMS ((int n, ...))\n {\n-  int i;\n+  int i, save_n;\n   rtx *vector;\n \n   VA_OPEN (p, n);\n@@ -530,9 +530,12 @@ gen_rtvec VPARAMS ((int n, ...))\n \n   for (i = 0; i < n; i++)\n     vector[i] = va_arg (p, rtx);\n+\n+  /* The definition of VA_* in K&R C causes `n' to go out of scope.  */\n+  save_n = n;\n   VA_CLOSE (p);\n \n-  return gen_rtvec_v (n, vector);\n+  return gen_rtvec_v (save_n, vector);\n }\n \n rtvec"}]}