{"sha": "946db1e20e437ab14cf52a5414a46a2b772a6228", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTQ2ZGIxZTIwZTQzN2FiMTRjZjUyYTU0MTRhNDZhMmI3NzJhNjIyOA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-22T07:41:14Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-22T07:41:14Z"}, "message": "[multiple changes]\n\n2010-06-22  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_ch3.adb, sem_disp.adb: Minor code fixes.\n\t* sem_eval.adb: Minor reformatting.\n\n2010-06-22  Vincent Celier  <celier@adacore.com>\n\n\t* make.adb (Scan_Make_Arg): When invoked with -nostdlib, pass -nostdlib\n\tto gnatlink, except on Open VMS.\n\t* osint.adb (Add_Default_Search_Dirs): Do not suppress the default\n\tobject directories if -nostdlib is used.\n\nFrom-SVN: r161141", "tree": {"sha": "1cd7744d6b6e6a9c410447d69d99301903e33998", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1cd7744d6b6e6a9c410447d69d99301903e33998"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/946db1e20e437ab14cf52a5414a46a2b772a6228", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/946db1e20e437ab14cf52a5414a46a2b772a6228", "html_url": "https://github.com/Rust-GCC/gccrs/commit/946db1e20e437ab14cf52a5414a46a2b772a6228", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/946db1e20e437ab14cf52a5414a46a2b772a6228/comments", "author": null, "committer": null, "parents": [{"sha": "7ec8363d058e085cf510a968eeb975333e18dd9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ec8363d058e085cf510a968eeb975333e18dd9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ec8363d058e085cf510a968eeb975333e18dd9f"}], "stats": {"total": 48, "additions": 35, "deletions": 13}, "files": [{"sha": "b6f14bcda959b8aa8ad45edae9bbbcc8b646f743", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=946db1e20e437ab14cf52a5414a46a2b772a6228", "patch": "@@ -1,3 +1,15 @@\n+2010-06-22  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch3.adb, sem_disp.adb: Minor code fixes.\n+\t* sem_eval.adb: Minor reformatting.\n+\n+2010-06-22  Vincent Celier  <celier@adacore.com>\n+\n+\t* make.adb (Scan_Make_Arg): When invoked with -nostdlib, pass -nostdlib\n+\tto gnatlink, except on Open VMS.\n+\t* osint.adb (Add_Default_Search_Dirs): Do not suppress the default\n+\tobject directories if -nostdlib is used.\n+\n 2010-06-22  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_util.adb (Is_Delegate): Put in proper alpha order."}, {"sha": "eb18485c77b57d44eb8b87033fe74dc277ece754", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=946db1e20e437ab14cf52a5414a46a2b772a6228", "patch": "@@ -8213,14 +8213,18 @@ package body Make is\n \n          elsif Argv (2 .. Argv'Last) = \"nostdlib\" then\n \n-            --  Don't pass -nostdlib to gnatlink, it will disable\n-            --  linking with all standard library files.\n-\n             No_Stdlib := True;\n \n             Add_Switch (Argv, Compiler, And_Save => And_Save);\n             Add_Switch (Argv, Binder, And_Save => And_Save);\n \n+            --  On Open VMS, do not pass -nostdlib to gnatlink, it will disable\n+            --  linking with all standard library files.\n+\n+            if not OpenVMS then\n+               Add_Switch (Argv, Linker, And_Save => And_Save);\n+            end if;\n+\n          elsif Argv (2 .. Argv'Last) = \"nostdinc\" then\n \n             --  Pass -nostdinc to the Compiler and to gnatbind"}, {"sha": "6d6f388b9bb371cf7c407bb679ab5b589452c202", "filename": "gcc/ada/osint.adb", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fosint.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fosint.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint.adb?ref=946db1e20e437ab14cf52a5414a46a2b772a6228", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2009, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2010, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -538,7 +538,11 @@ package body Osint is\n             end loop;\n          end if;\n \n-         if not Opt.No_Stdlib and not Opt.RTS_Switch then\n+         --  Even when -nostdlib is used, we still want to have visibility on\n+         --  the run-time object directory, as it is used by gnatbind to find\n+         --  the run-time ALI files in \"real\" ZFP set up.\n+\n+         if not Opt.RTS_Switch then\n             Search_Path :=\n               Read_Default_Search_Dirs\n                 (String_Access (Update_Path (Search_Dir_Prefix)),"}, {"sha": "e2382bd182597c706da8952c3d29f70684f9faf9", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=946db1e20e437ab14cf52a5414a46a2b772a6228", "patch": "@@ -6941,9 +6941,8 @@ package body Sem_Ch3 is\n \n       --  Ada 2005 (AI-251)\n \n-      if Ada_Version = Ada_05\n-        and then Is_Tagged\n-      then\n+      if Ada_Version >= Ada_05 and then Is_Tagged then\n+\n          --  \"The declaration of a specific descendant of an interface type\n          --  freezes the interface type\" (RM 13.14).\n "}, {"sha": "6ffdb8516352c13c595128735799e4c1e51245f8", "filename": "gcc/ada/sem_disp.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fsem_disp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fsem_disp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_disp.adb?ref=946db1e20e437ab14cf52a5414a46a2b772a6228", "patch": "@@ -679,7 +679,7 @@ package body Sem_Disp is\n \n       --  Ada 2005 (AI-345)\n \n-      if Ada_Version = Ada_05\n+      if Ada_Version >= Ada_05\n         and then Present (Tagged_Type)\n         and then Is_Concurrent_Type (Tagged_Type)\n       then"}, {"sha": "d2aeae9d13e18944410b4c6dccbf68565dd77140", "filename": "gcc/ada/sem_eval.adb", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fsem_eval.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/946db1e20e437ab14cf52a5414a46a2b772a6228/gcc%2Fada%2Fsem_eval.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_eval.adb?ref=946db1e20e437ab14cf52a5414a46a2b772a6228", "patch": "@@ -3827,10 +3827,13 @@ package body Sem_Eval is\n       then\n          return Empty;\n \n-      --  There are two cases where the context does not imply the type of the\n-      --  operands: either the universal expression appears in a type\n-      --  conversion, or we are in the case of a predefined relational\n-      --  operator, where the context type is always Boolean.\n+      --  There are several cases where the context does not imply the type of\n+      --  the operands:\n+      --     - the universal expression appears in a type conversion;\n+      --     - the expression is a relational operator applied to universal\n+      --       operands;\n+      --     - the expression is a membership test with a universal operand\n+      --       and a range with universal bounds.\n \n       elsif Nkind (Parent (N)) = N_Type_Conversion\n         or else Is_Relational"}]}