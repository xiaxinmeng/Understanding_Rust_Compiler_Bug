{"sha": "950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUwZDFjZDliYTQ5ZDI0MjBmNzdhZTBiYzA0YmU0ZmQ2ZDBkMDA5ZQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2018-01-23T08:00:20Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2018-01-23T08:00:20Z"}, "message": "re PR tree-optimization/83963 ([graphite] ICE in merge_sese, at graphite-scop-detection.c:517)\n\n2018-01-23  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/83963\n\t* graphite-scop-detection.c (scop_detection::harmful_loop_in_region):\n\tProperly terminate dominator walk when crossing the exit edge not\n\twhen visiting its source block.\n\n\t* gfortran.dg/graphite/pr83963.f: New testcase.\n\t* gcc.dg/graphite/pr83963-2.c: Likewise.\n\nFrom-SVN: r256973", "tree": {"sha": "f54b90b6860670d786d683501d9873f5e67ee274", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f54b90b6860670d786d683501d9873f5e67ee274"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2e73a89bc9a73ef83b7b87fb65b8293c0ae8b693", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e73a89bc9a73ef83b7b87fb65b8293c0ae8b693", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e73a89bc9a73ef83b7b87fb65b8293c0ae8b693"}], "stats": {"total": 65, "additions": 61, "deletions": 4}, "files": [{"sha": "f3fb04f2be04e7c019ced6096ea63c94c5a0d820", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "patch": "@@ -1,3 +1,10 @@\n+2018-01-23  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/83963\n+\t* graphite-scop-detection.c (scop_detection::harmful_loop_in_region):\n+\tProperly terminate dominator walk when crossing the exit edge not\n+\twhen visiting its source block.\n+\n 2018-01-23  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/83918"}, {"sha": "15559ae5ee6b052cb2501ce89fbccea78cdd5a9d", "filename": "gcc/graphite-scop-detection.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Fgraphite-scop-detection.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Fgraphite-scop-detection.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-scop-detection.c?ref=950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "patch": "@@ -677,10 +677,10 @@ scop_detection::harmful_loop_in_region (sese_l scop) const\n \tif (!stmt_simple_for_scop_p (scop, gsi_stmt (gsi), bb))\n \t  return true;\n \n-      if (bb != exit_bb)\n-\tfor (basic_block dom = first_dom_son (CDI_DOMINATORS, bb);\n-\t     dom;\n-\t     dom = next_dom_son (CDI_DOMINATORS, dom))\n+      for (basic_block dom = first_dom_son (CDI_DOMINATORS, bb);\n+\t   dom;\n+\t   dom = next_dom_son (CDI_DOMINATORS, dom))\n+\tif (dom != scop.exit->dest)\n \t  worklist.safe_push (dom);\n     }\n "}, {"sha": "760422aee58fca75dfcae07e6a6b72c70d74d69c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "patch": "@@ -1,3 +1,9 @@\n+2018-01-23  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/83963\n+\t* gfortran.dg/graphite/pr83963.f: New testcase.\n+\t* gcc.dg/graphite/pr83963-2.c: Likewise.\n+\n 2018-01-23  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/83918"}, {"sha": "56a279ce4159f9d69b5940d981cdb13d7e55cd57", "filename": "gcc/testsuite/gcc.dg/graphite/pr83963-2.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr83963-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr83963-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fpr83963-2.c?ref=950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "patch": "@@ -0,0 +1,26 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -floop-nest-optimize\" } */\n+\n+int Chv_countBigEntries (int npivot, int pivotsizes[], int countflag,\n+\t\t\t double droptol, int nD)\n+{\n+  double absval ;\n+  double *entries ;\n+  int count;\n+  int ii, jj, kinc, kk, kstart, stride ;\n+  for ( ii = 0 ; ii < nD ; ii++ )\n+    { \n+      kk = kstart ;  \n+      kinc = stride ;\n+      for ( jj = 0 ; jj < ii ; jj++ )\n+\t{\n+\t  absval = __builtin_fabs(entries[kk]) ; \n+\t  if ( absval >= droptol )\n+\t    count++ ;   \n+\t  kk += kinc ;    \n+\t  kinc -= 2 ; \n+\t}\n+      kstart-- ;   \n+    }\n+  return count;\n+}"}, {"sha": "4e6410244d8ef47a78128a18aea5655b1f215951", "filename": "gcc/testsuite/gfortran.dg/graphite/pr83963.f", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fpr83963.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fpr83963.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fpr83963.f?ref=950d1cd9ba49d2420f77ae0bc04be4fd6d0d009e", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do compile }\n+! { dg-options \"-O -floop-nest-optimize\" }\n+\n+      SUBROUTINE DAVCI(NORB,NCOR,NCI,NA,NB,\n+     *    CI,MAXP,MAXW1,\n+     *      IHMCON,ISTRB,ISTRP,ISTAR,II)\n+      DIMENSION EC(MAXP,MAXP),IWRK1(2*MAXW1)\n+         EC(II,II) = 1.0D+00\n+         DO 1396 II=1,MAXP\n+            DO 1398 JJ=1,II-1\n+               EC(II,JJ) = 0.0D+00\n+ 1398       CONTINUE\n+ 1396    CONTINUE\n+      IF (NA.EQ.NB) THEN\n+      CALL RINAB0(SI1,SI2,NORB,NCOR,NCI,NA,NB,CI(1,IP),IACON1,IBCON1,\n+     *       IWRK1,IHMCON,ISTRB,ISTRP,ISTAR)\n+      ENDIF\n+      END"}]}