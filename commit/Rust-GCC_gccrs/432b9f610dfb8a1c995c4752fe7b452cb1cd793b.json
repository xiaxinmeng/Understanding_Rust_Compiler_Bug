{"sha": "432b9f610dfb8a1c995c4752fe7b452cb1cd793b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDMyYjlmNjEwZGZiOGExYzk5NWM0NzUyZmU3YjQ1MmNiMWNkNzkzYg==", "commit": {"author": {"name": "Mike Frysinger", "email": "vapier@gentoo.org", "date": "2021-02-07T20:17:47Z"}, "committer": {"name": "Mike Frysinger", "email": "vapier@gentoo.org", "date": "2021-02-08T16:52:30Z"}, "message": "mklog: automatically fill in generated entries\n\ncontrib/ChangeLog:\n\n\t* mklog.py (generated_files): New set.\n\t(generate_changelog): Add entries based on generated_files.", "tree": {"sha": "9b17fc3c42c525bf534fea284280f560894a1410", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b17fc3c42c525bf534fea284280f560894a1410"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/432b9f610dfb8a1c995c4752fe7b452cb1cd793b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/432b9f610dfb8a1c995c4752fe7b452cb1cd793b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/432b9f610dfb8a1c995c4752fe7b452cb1cd793b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/432b9f610dfb8a1c995c4752fe7b452cb1cd793b/comments", "author": {"login": "vapier", "id": 176950, "node_id": "MDQ6VXNlcjE3Njk1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vapier", "html_url": "https://github.com/vapier", "followers_url": "https://api.github.com/users/vapier/followers", "following_url": "https://api.github.com/users/vapier/following{/other_user}", "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vapier/subscriptions", "organizations_url": "https://api.github.com/users/vapier/orgs", "repos_url": "https://api.github.com/users/vapier/repos", "events_url": "https://api.github.com/users/vapier/events{/privacy}", "received_events_url": "https://api.github.com/users/vapier/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vapier", "id": 176950, "node_id": "MDQ6VXNlcjE3Njk1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vapier", "html_url": "https://github.com/vapier", "followers_url": "https://api.github.com/users/vapier/followers", "following_url": "https://api.github.com/users/vapier/following{/other_user}", "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vapier/subscriptions", "organizations_url": "https://api.github.com/users/vapier/orgs", "repos_url": "https://api.github.com/users/vapier/repos", "events_url": "https://api.github.com/users/vapier/events{/privacy}", "received_events_url": "https://api.github.com/users/vapier/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ec0a9b4e039582428b3119e857f6f4fb08c0ade0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec0a9b4e039582428b3119e857f6f4fb08c0ade0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec0a9b4e039582428b3119e857f6f4fb08c0ade0"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "6509886741d72abdefc5bebc070a5df9129d90ef", "filename": "contrib/mklog.py", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/432b9f610dfb8a1c995c4752fe7b452cb1cd793b/contrib%2Fmklog.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/432b9f610dfb8a1c995c4752fe7b452cb1cd793b/contrib%2Fmklog.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fmklog.py?ref=432b9f610dfb8a1c995c4752fe7b452cb1cd793b", "patch": "@@ -55,6 +55,9 @@\n \n function_extensions = {'.c', '.cpp', '.C', '.cc', '.h', '.inc', '.def', '.md'}\n \n+# NB: Makefile.in isn't listed as it's not always generated.\n+generated_files = {'aclocal.m4', 'config.h.in', 'configure'}\n+\n help_message = \"\"\"\\\n Generate ChangeLog template for PATCH.\n PATCH must be generated using diff(1)'s -up or -cp options\n@@ -192,6 +195,8 @@ def generate_changelog(data, no_functions=False, fill_pr_titles=False):\n                 if new_path.startswith(changelog):\n                     new_path = new_path[len(changelog):].lstrip('/')\n                 out += '\\t* %s: ...here.\\n' % (new_path)\n+            elif os.path.basename(file.path) in generated_files:\n+                out += '\\t* %s: Regenerate.\\n' % (relative_path)\n             else:\n                 if not no_functions:\n                     for hunk in file:"}]}