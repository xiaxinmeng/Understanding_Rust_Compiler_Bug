{"sha": "714a0864cc92b27ba75cff579b33a44702556ad3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE0YTA4NjRjYzkyYjI3YmE3NWNmZjU3OWIzM2E0NDcwMjU1NmFkMw==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2001-05-06T16:38:56Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-05-06T16:38:56Z"}, "message": "c-typeck.c (internal_build_compound_expr): Check for array to pointer conversion just once.\n\n\t* c-typeck.c (internal_build_compound_expr): Check for\n\tarray to pointer conversion just once.\n\nFrom-SVN: r41879", "tree": {"sha": "d9e21764e236cc2733340797bd3eff491099c76b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9e21764e236cc2733340797bd3eff491099c76b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/714a0864cc92b27ba75cff579b33a44702556ad3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/714a0864cc92b27ba75cff579b33a44702556ad3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/714a0864cc92b27ba75cff579b33a44702556ad3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/714a0864cc92b27ba75cff579b33a44702556ad3/comments", "author": null, "committer": null, "parents": [{"sha": "7026707d152f30b0615dd3c6eabd62bedd5c30a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7026707d152f30b0615dd3c6eabd62bedd5c30a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7026707d152f30b0615dd3c6eabd62bedd5c30a4"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "5d65f15d7b0aea4dda2c095cb82010b0be3d1f3c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714a0864cc92b27ba75cff579b33a44702556ad3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714a0864cc92b27ba75cff579b33a44702556ad3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=714a0864cc92b27ba75cff579b33a44702556ad3", "patch": "@@ -1,3 +1,8 @@\n+2001-05-06  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\t* c-typeck.c (internal_build_compound_expr): Check for\n+\tarray to pointer conversion just once.\n+\n 2001-05-05  Richard Henderson  <rth@redhat.com>\n \n \t* integrate.c (copy_insn_list): Substitute NOTE_EXPECTED_VALUE."}, {"sha": "33ac1169a82956f87bf0c40231c051b38fc7da57", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/714a0864cc92b27ba75cff579b33a44702556ad3/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/714a0864cc92b27ba75cff579b33a44702556ad3/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=714a0864cc92b27ba75cff579b33a44702556ad3", "patch": "@@ -3644,6 +3644,10 @@ internal_build_compound_expr (list, first_p)\n \n   if (TREE_CHAIN (list) == 0)\n     {\n+      /* Convert arrays to pointers when there really is a comma operator.  */\n+      if (!first_p && TREE_CODE (TREE_TYPE (TREE_VALUE (list))) == ARRAY_TYPE)\n+\tTREE_VALUE (list) = default_conversion (TREE_VALUE (list));\n+\n #if 0 /* If something inside inhibited lvalueness, we should not override.  */\n       /* Consider (x, y+0), which is not an lvalue since y+0 is not.  */\n \n@@ -3658,14 +3662,6 @@ internal_build_compound_expr (list, first_p)\n       return TREE_VALUE (list);\n     }\n \n-  if (TREE_CHAIN (list) != 0 && TREE_CHAIN (TREE_CHAIN (list)) == 0)\n-    {\n-      /* Convert arrays to pointers when there really is a comma operator.  */\n-      if (TREE_CODE (TREE_TYPE (TREE_VALUE (TREE_CHAIN (list)))) == ARRAY_TYPE)\n-\tTREE_VALUE (TREE_CHAIN (list))\n-\t  = default_conversion (TREE_VALUE (TREE_CHAIN (list)));\n-    }\n-\n   rest = internal_build_compound_expr (TREE_CHAIN (list), FALSE);\n \n   if (! TREE_SIDE_EFFECTS (TREE_VALUE (list)))"}]}