{"sha": "ef5d11818dec252c1c843e82645b52ea71ab315c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWY1ZDExODE4ZGVjMjUyYzFjODQzZTgyNjQ1YjUyZWE3MWFiMzE1Yw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-01-14T22:43:56Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-01-14T22:43:56Z"}, "message": "re PR middle-end/42674 (Bogus \"no return statement in function returning non-void\" warning)\n\n\tPR middle-end/42674\n\t* c-decl.c (finish_function): Don't emit -Wreturn-type warnings in\n\tfunctions with noreturn attribute.\n\n\t* decl.c (finish_function): Don't emit -Wreturn-type warnings in\n\tfunctions with noreturn attribute.\n\n\t* c-c++-common/pr42674.c: New test.\n\nFrom-SVN: r155920", "tree": {"sha": "eb13b6e69e774559a950dcafa95ea447376bfcfe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb13b6e69e774559a950dcafa95ea447376bfcfe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef5d11818dec252c1c843e82645b52ea71ab315c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef5d11818dec252c1c843e82645b52ea71ab315c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef5d11818dec252c1c843e82645b52ea71ab315c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef5d11818dec252c1c843e82645b52ea71ab315c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5b1cbe1453663b9abd6df089c2882071f2335fb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b1cbe1453663b9abd6df089c2882071f2335fb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b1cbe1453663b9abd6df089c2882071f2335fb2"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "ce96cca5aca5d8e705bb087c681a6f36a39c7de3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ef5d11818dec252c1c843e82645b52ea71ab315c", "patch": "@@ -1,5 +1,9 @@\n 2010-01-14  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/42674\n+\t* c-decl.c (finish_function): Don't emit -Wreturn-type warnings in\n+\tfunctions with noreturn attribute.\n+\n \tPR c++/42608\n \t* varasm.c (declare_weak): Add weak attribute to decl if it\n \tdoesn't have one already."}, {"sha": "91d58844550867535688eae690a18001d8fb6497", "filename": "gcc/c-decl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=ef5d11818dec252c1c843e82645b52ea71ab315c", "patch": "@@ -8032,6 +8032,8 @@ finish_function (void)\n       && !current_function_returns_value && !current_function_returns_null\n       /* Don't complain if we are no-return.  */\n       && !current_function_returns_abnormally\n+      /* Don't complain if we are declared noreturn.  */\n+      && !TREE_THIS_VOLATILE (fndecl)\n       /* Don't warn for main().  */\n       && !MAIN_NAME_P (DECL_NAME (fndecl))\n       /* Or if they didn't actually specify a return type.  */"}, {"sha": "1d1326163710f691fd85feee8d81ed537faff9c9", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ef5d11818dec252c1c843e82645b52ea71ab315c", "patch": "@@ -1,3 +1,9 @@\n+2010-01-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/42674\n+\t* decl.c (finish_function): Don't emit -Wreturn-type warnings in\n+\tfunctions with noreturn attribute.\n+\n 2010-01-14  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/42701"}, {"sha": "2409aa31b1525c6c41baccb035c37df9c140bfe4", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=ef5d11818dec252c1c843e82645b52ea71ab315c", "patch": "@@ -12541,6 +12541,8 @@ finish_function (int flags)\n       && !current_function_returns_value && !current_function_returns_null\n       /* Don't complain if we abort or throw.  */\n       && !current_function_returns_abnormally\n+      /* Don't complain if we are declared noreturn.  */\n+      && !TREE_THIS_VOLATILE (fndecl)\n       && !DECL_NAME (DECL_RESULT (fndecl))\n       && !TREE_NO_WARNING (fndecl)\n       /* Structor return values (if any) are set by the compiler.  */"}, {"sha": "f4d13bedd86a16b5a25eb32e83c713287e49e647", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ef5d11818dec252c1c843e82645b52ea71ab315c", "patch": "@@ -1,5 +1,8 @@\n 2010-01-14  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/42674\n+\t* c-c++-common/pr42674.c: New test.\n+\n \tPR c++/42608\n \t* g++.dg/template/instantiate11.C: New test.\n "}, {"sha": "ae6730c50b0ca2d86867212c8e75d224f45793cf", "filename": "gcc/testsuite/c-c++-common/pr42674.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr42674.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef5d11818dec252c1c843e82645b52ea71ab315c/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr42674.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr42674.c?ref=ef5d11818dec252c1c843e82645b52ea71ab315c", "patch": "@@ -0,0 +1,13 @@\n+/* PR middle-end/42674 */\n+/* { dg-do compile } */\n+/* { dg-options \"-Wreturn-type\" } */\n+\n+extern void bar (void);\n+static int foo (void) __attribute__ ((__noreturn__, __used__));\n+\n+static int\n+foo (void)\n+{\n+  while (1)\n+    bar ();\n+}"}]}