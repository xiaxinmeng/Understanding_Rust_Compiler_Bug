{"sha": "b2a93c0a5a9119b67977cac08dd6c08571d778b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjJhOTNjMGE1YTkxMTliNjc5NzdjYWMwOGRkNmMwODU3MWQ3NzhiMA==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "dvorakz@suse.cz", "date": "2005-12-08T09:34:26Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2005-12-08T09:34:26Z"}, "message": "re PR middle-end/25248 (2.6.15-rc4 arch/powerpc/mm/hash_utils_64.c miscompiled)\n\n\tPR tree-optimization/25248\n\t* tree-scalar-evolution.c (follow_ssa_edge_in_rhs): Do not use\n\tevolution_of_loop from the failed attempt.  Remove handling\n\tof MULT_EXPR.\n\nFrom-SVN: r108225", "tree": {"sha": "c1a74c28885a4a7c5899a367ba5ce19edfb957be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1a74c28885a4a7c5899a367ba5ce19edfb957be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2a93c0a5a9119b67977cac08dd6c08571d778b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2a93c0a5a9119b67977cac08dd6c08571d778b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2a93c0a5a9119b67977cac08dd6c08571d778b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2a93c0a5a9119b67977cac08dd6c08571d778b0/comments", "author": null, "committer": null, "parents": [{"sha": "fa8e24519681444e7252c6ef07a0627099fb0a91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa8e24519681444e7252c6ef07a0627099fb0a91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa8e24519681444e7252c6ef07a0627099fb0a91"}], "stats": {"total": 75, "additions": 11, "deletions": 64}, "files": [{"sha": "83df5d937b0f0c30c6c10d193758465b64f5df9a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2a93c0a5a9119b67977cac08dd6c08571d778b0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2a93c0a5a9119b67977cac08dd6c08571d778b0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b2a93c0a5a9119b67977cac08dd6c08571d778b0", "patch": "@@ -1,3 +1,10 @@\n+2005-12-08  Zdenek Dvorak  <dvorakz@suse.cz>\n+\n+\tPR tree-optimization/25248\n+\t* tree-scalar-evolution.c (follow_ssa_edge_in_rhs): Do not use\n+\tevolution_of_loop from the failed attempt.  Remove handling\n+\tof MULT_EXPR.\n+\n 2005-12-08  Gabriel Dos Reis  <gdr@integrable-solutions.net>\n \n \t* tree.h (DECL_EXTERNAL): Clarify documentation."}, {"sha": "bd15ae9cb2c443ae685d6473371e90d874c5f49d", "filename": "gcc/tree-scalar-evolution.c", "status": "modified", "additions": 4, "deletions": 64, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2a93c0a5a9119b67977cac08dd6c08571d778b0/gcc%2Ftree-scalar-evolution.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2a93c0a5a9119b67977cac08dd6c08571d778b0/gcc%2Ftree-scalar-evolution.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-scalar-evolution.c?ref=b2a93c0a5a9119b67977cac08dd6c08571d778b0", "patch": "@@ -1042,6 +1042,7 @@ follow_ssa_edge_in_rhs (struct loop *loop, tree at_stmt, tree rhs,\n   t_bool res = t_false;\n   tree rhs0, rhs1;\n   tree type_rhs = TREE_TYPE (rhs);\n+  tree evol;\n   \n   /* The RHS is one of the following cases:\n      - an SSA_NAME, \n@@ -1084,14 +1085,15 @@ follow_ssa_edge_in_rhs (struct loop *loop, tree at_stmt, tree rhs,\n \t    {\n \t      /* Match an assignment under the form: \n \t\t \"a = b + c\".  */\n+\t      evol = *evolution_of_loop;\n \t      res = follow_ssa_edge \n \t\t(loop, SSA_NAME_DEF_STMT (rhs0), halting_phi, \n-\t\t evolution_of_loop, limit);\n+\t\t &evol, limit);\n \t      \n \t      if (res == t_true)\n \t\t*evolution_of_loop = add_to_evolution \n \t\t  (loop->num, \n-\t\t   chrec_convert (type_rhs, *evolution_of_loop, at_stmt), \n+\t\t   chrec_convert (type_rhs, evol, at_stmt), \n \t\t   PLUS_EXPR, rhs1);\n \t      \n \t      else if (res == t_false)\n@@ -1186,68 +1188,6 @@ follow_ssa_edge_in_rhs (struct loop *loop, tree at_stmt, tree rhs,\n       \n       break;\n     \n-    case MULT_EXPR:\n-      /* This case is under the form \"opnd0 = rhs0 * rhs1\".  */\n-      rhs0 = TREE_OPERAND (rhs, 0);\n-      rhs1 = TREE_OPERAND (rhs, 1);\n-      STRIP_TYPE_NOPS (rhs0);\n-      STRIP_TYPE_NOPS (rhs1);\n-\n-      if (TREE_CODE (rhs0) == SSA_NAME)\n-\t{\n-\t  if (TREE_CODE (rhs1) == SSA_NAME)\n-\t    {\n-\t      /* Match an assignment under the form: \n-\t\t \"a = b * c\".  */\n-\t      res = follow_ssa_edge \n-\t\t(loop, SSA_NAME_DEF_STMT (rhs0), halting_phi, \n-\t\t evolution_of_loop, limit);\n-\t      \n-\t      if (res == t_true || res == t_dont_know)\n-\t\t*evolution_of_loop = chrec_dont_know;\n-\t      \n-\t      else if (res == t_false)\n-\t\t{\n-\t\t  res = follow_ssa_edge \n-\t\t    (loop, SSA_NAME_DEF_STMT (rhs1), halting_phi, \n-\t\t     evolution_of_loop, limit);\n-\t\t  \n-\t\t  if (res == t_true || res == t_dont_know)\n-\t\t    *evolution_of_loop = chrec_dont_know;\n-\t\t}\n-\t    }\n-\t  \n-\t  else\n-\t    {\n-\t      /* Match an assignment under the form: \n-\t\t \"a = b * ...\".  */\n-\t      res = follow_ssa_edge \n-\t\t(loop, SSA_NAME_DEF_STMT (rhs0), halting_phi, \n-\t\t evolution_of_loop, limit);\n-\t      if (res == t_true || res == t_dont_know)\n-\t\t*evolution_of_loop = chrec_dont_know;\n-\t    }\n-\t}\n-      \n-      else if (TREE_CODE (rhs1) == SSA_NAME)\n-\t{\n-\t  /* Match an assignment under the form: \n-\t     \"a = ... * c\".  */\n-\t  res = follow_ssa_edge \n-\t    (loop, SSA_NAME_DEF_STMT (rhs1), halting_phi, \n-\t     evolution_of_loop, limit);\n-\t  if (res == t_true || res == t_dont_know)\n-\t    *evolution_of_loop = chrec_dont_know;\n-\t}\n-      \n-      else\n-\t/* Otherwise, match an assignment under the form: \n-\t   \"a = ... * ...\".  */\n-\t/* And there is nothing to do.  */\n-\tres = t_false;\n-      \n-      break;\n-\n     case ASSERT_EXPR:\n       {\n \t/* This assignment is of the form: \"a_1 = ASSERT_EXPR <a_2, ...>\""}]}