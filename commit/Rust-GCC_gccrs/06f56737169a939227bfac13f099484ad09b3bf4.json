{"sha": "06f56737169a939227bfac13f099484ad09b3bf4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDZmNTY3MzcxNjlhOTM5MjI3YmZhYzEzZjA5OTQ4NGFkMDliM2JmNA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-01-17T19:00:44Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-01-17T19:00:44Z"}, "message": "Initial revision\n\nFrom-SVN: r31468", "tree": {"sha": "66e5cb719e3cc597d29f0ae79b62ea51cc0d18da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/66e5cb719e3cc597d29f0ae79b62ea51cc0d18da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/06f56737169a939227bfac13f099484ad09b3bf4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06f56737169a939227bfac13f099484ad09b3bf4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06f56737169a939227bfac13f099484ad09b3bf4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06f56737169a939227bfac13f099484ad09b3bf4/comments", "author": null, "committer": null, "parents": [{"sha": "451f21ef2d9259022af8f15c344c7cd7333a74ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/451f21ef2d9259022af8f15c344c7cd7333a74ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/451f21ef2d9259022af8f15c344c7cd7333a74ee"}], "stats": {"total": 7279, "additions": 7279, "deletions": 0}, "files": [{"sha": "c4792dd27a32d2ce510ec3e6ea008d87a7bdbe9a", "filename": "libjava/libltdl/COPYING.LIB", "status": "added", "additions": 515, "deletions": 0, "changes": 515, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FCOPYING.LIB", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FCOPYING.LIB", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2FCOPYING.LIB?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,515 @@\n+\n+                  GNU LESSER GENERAL PUBLIC LICENSE\n+                       Version 2.1, February 1999\n+\n+ Copyright (C) 1991, 1999 Free Software Foundation, Inc.\n+     59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n+ Everyone is permitted to copy and distribute verbatim copies\n+ of this license document, but changing it is not allowed.\n+\n+[This is the first released version of the Lesser GPL.  It also counts\n+ as the successor of the GNU Library Public License, version 2, hence\n+ the version number 2.1.]\n+\n+                            Preamble\n+\n+  The licenses for most software are designed to take away your\n+freedom to share and change it.  By contrast, the GNU General Public\n+Licenses are intended to guarantee your freedom to share and change\n+free software--to make sure the software is free for all its users.\n+\n+  This license, the Lesser General Public License, applies to some\n+specially designated software packages--typically libraries--of the\n+Free Software Foundation and other authors who decide to use it.  You\n+can use it too, but we suggest you first think carefully about whether\n+this license or the ordinary General Public License is the better\n+strategy to use in any particular case, based on the explanations\n+below.\n+\n+  When we speak of free software, we are referring to freedom of use,\n+not price.  Our General Public Licenses are designed to make sure that\n+you have the freedom to distribute copies of free software (and charge\n+for this service if you wish); that you receive source code or can get\n+it if you want it; that you can change the software and use pieces of\n+it in new free programs; and that you are informed that you can do\n+these things.\n+\n+  To protect your rights, we need to make restrictions that forbid\n+distributors to deny you these rights or to ask you to surrender these\n+rights.  These restrictions translate to certain responsibilities for\n+you if you distribute copies of the library or if you modify it.\n+\n+  For example, if you distribute copies of the library, whether gratis\n+or for a fee, you must give the recipients all the rights that we gave\n+you.  You must make sure that they, too, receive or can get the source\n+code.  If you link other code with the library, you must provide\n+complete object files to the recipients, so that they can relink them\n+with the library after making changes to the library and recompiling\n+it.  And you must show them these terms so they know their rights.\n+\n+  We protect your rights with a two-step method: (1) we copyright the\n+library, and (2) we offer you this license, which gives you legal\n+permission to copy, distribute and/or modify the library.\n+\n+  To protect each distributor, we want to make it very clear that\n+there is no warranty for the free library.  Also, if the library is\n+modified by someone else and passed on, the recipients should know\n+that what they have is not the original version, so that the original\n+author's reputation will not be affected by problems that might be\n+introduced by others.\n+^L\n+  Finally, software patents pose a constant threat to the existence of\n+any free program.  We wish to make sure that a company cannot\n+effectively restrict the users of a free program by obtaining a\n+restrictive license from a patent holder.  Therefore, we insist that\n+any patent license obtained for a version of the library must be\n+consistent with the full freedom of use specified in this license.\n+\n+  Most GNU software, including some libraries, is covered by the\n+ordinary GNU General Public License.  This license, the GNU Lesser\n+General Public License, applies to certain designated libraries, and\n+is quite different from the ordinary General Public License.  We use\n+this license for certain libraries in order to permit linking those\n+libraries into non-free programs.\n+\n+  When a program is linked with a library, whether statically or using\n+a shared library, the combination of the two is legally speaking a\n+combined work, a derivative of the original library.  The ordinary\n+General Public License therefore permits such linking only if the\n+entire combination fits its criteria of freedom.  The Lesser General\n+Public License permits more lax criteria for linking other code with\n+the library.\n+\n+  We call this license the \"Lesser\" General Public License because it\n+does Less to protect the user's freedom than the ordinary General\n+Public License.  It also provides other free software developers Less\n+of an advantage over competing non-free programs.  These disadvantages\n+are the reason we use the ordinary General Public License for many\n+libraries.  However, the Lesser license provides advantages in certain\n+special circumstances.\n+\n+  For example, on rare occasions, there may be a special need to\n+encourage the widest possible use of a certain library, so that it\n+becomes\n+a de-facto standard.  To achieve this, non-free programs must be\n+allowed to use the library.  A more frequent case is that a free\n+library does the same job as widely used non-free libraries.  In this\n+case, there is little to gain by limiting the free library to free\n+software only, so we use the Lesser General Public License.\n+\n+  In other cases, permission to use a particular library in non-free\n+programs enables a greater number of people to use a large body of\n+free software.  For example, permission to use the GNU C Library in\n+non-free programs enables many more people to use the whole GNU\n+operating system, as well as its variant, the GNU/Linux operating\n+system.\n+\n+  Although the Lesser General Public License is Less protective of the\n+users' freedom, it does ensure that the user of a program that is\n+linked with the Library has the freedom and the wherewithal to run\n+that program using a modified version of the Library.\n+\n+  The precise terms and conditions for copying, distribution and\n+modification follow.  Pay close attention to the difference between a\n+\"work based on the library\" and a \"work that uses the library\".  The\n+former contains code derived from the library, whereas the latter must\n+be combined with the library in order to run.\n+^L\n+                  GNU LESSER GENERAL PUBLIC LICENSE\n+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n+\n+  0. This License Agreement applies to any software library or other\n+program which contains a notice placed by the copyright holder or\n+other authorized party saying it may be distributed under the terms of\n+this Lesser General Public License (also called \"this License\").\n+Each licensee is addressed as \"you\".\n+\n+  A \"library\" means a collection of software functions and/or data\n+prepared so as to be conveniently linked with application programs\n+(which use some of those functions and data) to form executables.\n+\n+  The \"Library\", below, refers to any such software library or work\n+which has been distributed under these terms.  A \"work based on the\n+Library\" means either the Library or any derivative work under\n+copyright law: that is to say, a work containing the Library or a\n+portion of it, either verbatim or with modifications and/or translated\n+straightforwardly into another language.  (Hereinafter, translation is\n+included without limitation in the term \"modification\".)\n+\n+  \"Source code\" for a work means the preferred form of the work for\n+making modifications to it.  For a library, complete source code means\n+all the source code for all modules it contains, plus any associated\n+interface definition files, plus the scripts used to control\n+compilation\n+and installation of the library.\n+\n+  Activities other than copying, distribution and modification are not\n+covered by this License; they are outside its scope.  The act of\n+running a program using the Library is not restricted, and output from\n+such a program is covered only if its contents constitute a work based\n+on the Library (independent of the use of the Library in a tool for\n+writing it).  Whether that is true depends on what the Library does\n+and what the program that uses the Library does.\n+\n+  1. You may copy and distribute verbatim copies of the Library's\n+complete source code as you receive it, in any medium, provided that\n+you conspicuously and appropriately publish on each copy an\n+appropriate copyright notice and disclaimer of warranty; keep intact\n+all the notices that refer to this License and to the absence of any\n+warranty; and distribute a copy of this License along with the\n+Library.\n+\n+  You may charge a fee for the physical act of transferring a copy,\n+and you may at your option offer warranty protection in exchange for a\n+fee.\n+\f\n+  2. You may modify your copy or copies of the Library or any portion\n+of it, thus forming a work based on the Library, and copy and\n+distribute such modifications or work under the terms of Section 1\n+above, provided that you also meet all of these conditions:\n+\n+    a) The modified work must itself be a software library.\n+\n+    b) You must cause the files modified to carry prominent notices\n+    stating that you changed the files and the date of any change.\n+\n+    c) You must cause the whole of the work to be licensed at no\n+    charge to all third parties under the terms of this License.\n+\n+    d) If a facility in the modified Library refers to a function or a\n+    table of data to be supplied by an application program that uses\n+    the facility, other than as an argument passed when the facility\n+    is invoked, then you must make a good faith effort to ensure that,\n+    in the event an application does not supply such function or\n+    table, the facility still operates, and performs whatever part of\n+    its purpose remains meaningful.\n+\n+    (For example, a function in a library to compute square roots has\n+    a purpose that is entirely well-defined independent of the\n+    application.  Therefore, Subsection 2d requires that any\n+    application-supplied function or table used by this function must\n+    be optional: if the application does not supply it, the square\n+    root function must still compute square roots.)\n+\n+These requirements apply to the modified work as a whole.  If\n+identifiable sections of that work are not derived from the Library,\n+and can be reasonably considered independent and separate works in\n+themselves, then this License, and its terms, do not apply to those\n+sections when you distribute them as separate works.  But when you\n+distribute the same sections as part of a whole which is a work based\n+on the Library, the distribution of the whole must be on the terms of\n+this License, whose permissions for other licensees extend to the\n+entire whole, and thus to each and every part regardless of who wrote\n+it.\n+\n+Thus, it is not the intent of this section to claim rights or contest\n+your rights to work written entirely by you; rather, the intent is to\n+exercise the right to control the distribution of derivative or\n+collective works based on the Library.\n+\n+In addition, mere aggregation of another work not based on the Library\n+with the Library (or with a work based on the Library) on a volume of\n+a storage or distribution medium does not bring the other work under\n+the scope of this License.\n+\n+  3. You may opt to apply the terms of the ordinary GNU General Public\n+License instead of this License to a given copy of the Library.  To do\n+this, you must alter all the notices that refer to this License, so\n+that they refer to the ordinary GNU General Public License, version 2,\n+instead of to this License.  (If a newer version than version 2 of the\n+ordinary GNU General Public License has appeared, then you can specify\n+that version instead if you wish.)  Do not make any other change in\n+these notices.\n+^L\n+  Once this change is made in a given copy, it is irreversible for\n+that copy, so the ordinary GNU General Public License applies to all\n+subsequent copies and derivative works made from that copy.\n+\n+  This option is useful when you wish to copy part of the code of\n+the Library into a program that is not a library.\n+\n+  4. You may copy and distribute the Library (or a portion or\n+derivative of it, under Section 2) in object code or executable form\n+under the terms of Sections 1 and 2 above provided that you accompany\n+it with the complete corresponding machine-readable source code, which\n+must be distributed under the terms of Sections 1 and 2 above on a\n+medium customarily used for software interchange.\n+\n+  If distribution of object code is made by offering access to copy\n+from a designated place, then offering equivalent access to copy the\n+source code from the same place satisfies the requirement to\n+distribute the source code, even though third parties are not\n+compelled to copy the source along with the object code.\n+\n+  5. A program that contains no derivative of any portion of the\n+Library, but is designed to work with the Library by being compiled or\n+linked with it, is called a \"work that uses the Library\".  Such a\n+work, in isolation, is not a derivative work of the Library, and\n+therefore falls outside the scope of this License.\n+\n+  However, linking a \"work that uses the Library\" with the Library\n+creates an executable that is a derivative of the Library (because it\n+contains portions of the Library), rather than a \"work that uses the\n+library\".  The executable is therefore covered by this License.\n+Section 6 states terms for distribution of such executables.\n+\n+  When a \"work that uses the Library\" uses material from a header file\n+that is part of the Library, the object code for the work may be a\n+derivative work of the Library even though the source code is not.\n+Whether this is true is especially significant if the work can be\n+linked without the Library, or if the work is itself a library.  The\n+threshold for this to be true is not precisely defined by law.\n+\n+  If such an object file uses only numerical parameters, data\n+structure layouts and accessors, and small macros and small inline\n+functions (ten lines or less in length), then the use of the object\n+file is unrestricted, regardless of whether it is legally a derivative\n+work.  (Executables containing this object code plus portions of the\n+Library will still fall under Section 6.)\n+\n+  Otherwise, if the work is a derivative of the Library, you may\n+distribute the object code for the work under the terms of Section 6.\n+Any executables containing that work also fall under Section 6,\n+whether or not they are linked directly with the Library itself.\n+^L\n+  6. As an exception to the Sections above, you may also combine or\n+link a \"work that uses the Library\" with the Library to produce a\n+work containing portions of the Library, and distribute that work\n+under terms of your choice, provided that the terms permit\n+modification of the work for the customer's own use and reverse\n+engineering for debugging such modifications.\n+\n+  You must give prominent notice with each copy of the work that the\n+Library is used in it and that the Library and its use are covered by\n+this License.  You must supply a copy of this License.  If the work\n+during execution displays copyright notices, you must include the\n+copyright notice for the Library among them, as well as a reference\n+directing the user to the copy of this License.  Also, you must do one\n+of these things:\n+\n+    a) Accompany the work with the complete corresponding\n+    machine-readable source code for the Library including whatever\n+    changes were used in the work (which must be distributed under\n+    Sections 1 and 2 above); and, if the work is an executable linked\n+    with the Library, with the complete machine-readable \"work that\n+    uses the Library\", as object code and/or source code, so that the\n+    user can modify the Library and then relink to produce a modified\n+    executable containing the modified Library.  (It is understood\n+    that the user who changes the contents of definitions files in the\n+    Library will not necessarily be able to recompile the application\n+    to use the modified definitions.)\n+\n+    b) Use a suitable shared library mechanism for linking with the\n+    Library.  A suitable mechanism is one that (1) uses at run time a\n+    copy of the library already present on the user's computer system,\n+    rather than copying library functions into the executable, and (2)\n+    will operate properly with a modified version of the library, if\n+    the user installs one, as long as the modified version is\n+    interface-compatible with the version that the work was made with.\n+\n+    c) Accompany the work with a written offer, valid for at\n+    least three years, to give the same user the materials\n+    specified in Subsection 6a, above, for a charge no more\n+    than the cost of performing this distribution.\n+\n+    d) If distribution of the work is made by offering access to copy\n+    from a designated place, offer equivalent access to copy the above\n+    specified materials from the same place.\n+\n+    e) Verify that the user has already received a copy of these\n+    materials or that you have already sent this user a copy.\n+\n+  For an executable, the required form of the \"work that uses the\n+Library\" must include any data and utility programs needed for\n+reproducing the executable from it.  However, as a special exception,\n+the materials to be distributed need not include anything that is\n+normally distributed (in either source or binary form) with the major\n+components (compiler, kernel, and so on) of the operating system on\n+which the executable runs, unless that component itself accompanies\n+the executable.\n+\n+  It may happen that this requirement contradicts the license\n+restrictions of other proprietary libraries that do not normally\n+accompany the operating system.  Such a contradiction means you cannot\n+use both them and the Library together in an executable that you\n+distribute.\n+^L\n+  7. You may place library facilities that are a work based on the\n+Library side-by-side in a single library together with other library\n+facilities not covered by this License, and distribute such a combined\n+library, provided that the separate distribution of the work based on\n+the Library and of the other library facilities is otherwise\n+permitted, and provided that you do these two things:\n+\n+    a) Accompany the combined library with a copy of the same work\n+    based on the Library, uncombined with any other library\n+    facilities.  This must be distributed under the terms of the\n+    Sections above.\n+\n+    b) Give prominent notice with the combined library of the fact\n+    that part of it is a work based on the Library, and explaining\n+    where to find the accompanying uncombined form of the same work.\n+\n+  8. You may not copy, modify, sublicense, link with, or distribute\n+the Library except as expressly provided under this License.  Any\n+attempt otherwise to copy, modify, sublicense, link with, or\n+distribute the Library is void, and will automatically terminate your\n+rights under this License.  However, parties who have received copies,\n+or rights, from you under this License will not have their licenses\n+terminated so long as such parties remain in full compliance.\n+\n+  9. You are not required to accept this License, since you have not\n+signed it.  However, nothing else grants you permission to modify or\n+distribute the Library or its derivative works.  These actions are\n+prohibited by law if you do not accept this License.  Therefore, by\n+modifying or distributing the Library (or any work based on the\n+Library), you indicate your acceptance of this License to do so, and\n+all its terms and conditions for copying, distributing or modifying\n+the Library or works based on it.\n+\n+  10. Each time you redistribute the Library (or any work based on the\n+Library), the recipient automatically receives a license from the\n+original licensor to copy, distribute, link with or modify the Library\n+subject to these terms and conditions.  You may not impose any further\n+restrictions on the recipients' exercise of the rights granted herein.\n+You are not responsible for enforcing compliance by third parties with\n+this License.\n+^L\n+  11. If, as a consequence of a court judgment or allegation of patent\n+infringement or for any other reason (not limited to patent issues),\n+conditions are imposed on you (whether by court order, agreement or\n+otherwise) that contradict the conditions of this License, they do not\n+excuse you from the conditions of this License.  If you cannot\n+distribute so as to satisfy simultaneously your obligations under this\n+License and any other pertinent obligations, then as a consequence you\n+may not distribute the Library at all.  For example, if a patent\n+license would not permit royalty-free redistribution of the Library by\n+all those who receive copies directly or indirectly through you, then\n+the only way you could satisfy both it and this License would be to\n+refrain entirely from distribution of the Library.\n+\n+If any portion of this section is held invalid or unenforceable under\n+any particular circumstance, the balance of the section is intended to\n+apply, and the section as a whole is intended to apply in other\n+circumstances.\n+\n+It is not the purpose of this section to induce you to infringe any\n+patents or other property right claims or to contest validity of any\n+such claims; this section has the sole purpose of protecting the\n+integrity of the free software distribution system which is\n+implemented by public license practices.  Many people have made\n+generous contributions to the wide range of software distributed\n+through that system in reliance on consistent application of that\n+system; it is up to the author/donor to decide if he or she is willing\n+to distribute software through any other system and a licensee cannot\n+impose that choice.\n+\n+This section is intended to make thoroughly clear what is believed to\n+be a consequence of the rest of this License.\n+\n+  12. If the distribution and/or use of the Library is restricted in\n+certain countries either by patents or by copyrighted interfaces, the\n+original copyright holder who places the Library under this License\n+may add an explicit geographical distribution limitation excluding those\n+countries, so that distribution is permitted only in or among\n+countries not thus excluded.  In such case, this License incorporates\n+the limitation as if written in the body of this License.\n+\n+  13. The Free Software Foundation may publish revised and/or new\n+versions of the Lesser General Public License from time to time.\n+Such new versions will be similar in spirit to the present version,\n+but may differ in detail to address new problems or concerns.\n+\n+Each version is given a distinguishing version number.  If the Library\n+specifies a version number of this License which applies to it and\n+\"any later version\", you have the option of following the terms and\n+conditions either of that version or of any later version published by\n+the Free Software Foundation.  If the Library does not specify a\n+license version number, you may choose any version ever published by\n+the Free Software Foundation.\n+^L\n+  14. If you wish to incorporate parts of the Library into other free\n+programs whose distribution conditions are incompatible with these,\n+write to the author to ask for permission.  For software which is\n+copyrighted by the Free Software Foundation, write to the Free\n+Software Foundation; we sometimes make exceptions for this.  Our\n+decision will be guided by the two goals of preserving the free status\n+of all derivatives of our free software and of promoting the sharing\n+and reuse of software generally.\n+\n+                            NO WARRANTY\n+\n+  15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO\n+WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.\n+EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR\n+OTHER PARTIES PROVIDE THE LIBRARY \"AS IS\" WITHOUT WARRANTY OF ANY\n+KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE\n+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n+PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE\n+LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME\n+THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.\n+\n+  16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN\n+WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY\n+AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU\n+FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR\n+CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE\n+LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING\n+RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A\n+FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF\n+SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH\n+DAMAGES.\n+\n+                     END OF TERMS AND CONDITIONS\n+^L\n+           How to Apply These Terms to Your New Libraries\n+\n+  If you develop a new library, and you want it to be of the greatest\n+possible use to the public, we recommend making it free software that\n+everyone can redistribute and change.  You can do so by permitting\n+redistribution under these terms (or, alternatively, under the terms\n+of the ordinary General Public License).\n+\n+  To apply these terms, attach the following notices to the library.\n+It is safest to attach them to the start of each source file to most\n+effectively convey the exclusion of warranty; and each file should\n+have at least the \"copyright\" line and a pointer to where the full\n+notice is found.\n+\n+\n+    <one line to give the library's name and a brief idea of what it\n+does.>\n+    Copyright (C) <year>  <name of author>\n+\n+    This library is free software; you can redistribute it and/or\n+    modify it under the terms of the GNU Lesser General Public\n+    License as published by the Free Software Foundation; either\n+    version 2 of the License, or (at your option) any later version.\n+\n+    This library is distributed in the hope that it will be useful,\n+    but WITHOUT ANY WARRANTY; without even the implied warranty of\n+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+    Lesser General Public License for more details.\n+\n+    You should have received a copy of the GNU Lesser General Public\n+    License along with this library; if not, write to the Free Software\n+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307  USA\n+\n+Also add information on how to contact you by electronic and paper\n+mail.\n+\n+You should also get your employer (if you work as a programmer) or\n+your\n+school, if any, to sign a \"copyright disclaimer\" for the library, if\n+necessary.  Here is a sample; alter the names:\n+\n+  Yoyodyne, Inc., hereby disclaims all copyright interest in the\n+  library `Frob' (a library for tweaking knobs) written by James\n+Random Hacker.\n+\n+  <signature of Ty Coon>, 1 April 1990\n+  Ty Coon, President of Vice\n+\n+That's all there is to it!\n+\n+"}, {"sha": "a1df9fc37b7c0e6eaee362c034cd0382e82ed3f1", "filename": "libjava/libltdl/Makefile.am", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2FMakefile.am?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,44 @@\n+## Process this file with automake to produce Makefile.in\n+\n+AUTOMAKE_OPTIONS = no-dependencies foreign\n+\n+if INSTALL_LTDL\n+include_HEADERS = ltdl.h\n+lib_LTLIBRARIES = libltdl.la\n+else\n+noinst_HEADERS = ltdl.h\n+endif\n+\n+if CONVENIENCE_LTDL\n+noinst_LTLIBRARIES = libltdlc.la\n+endif\n+\n+libltdl_la_SOURCES = ltdl.c\n+libltdl_la_LDFLAGS = -version-info 1:2:1\n+libltdl_la_LIBADD = $(LIBADD_DL)\n+\n+libltdlc_la_SOURCES = ltdl.c\n+libltdlc_la_LIBADD = $(LIBADD_DL)\n+\n+## Because we do not have automatic dependency tracking:\n+ltdl.lo: ltdl.h config.h\n+\n+$(OBJECTS): libtool\n+libtool: $(LIBTOOL_DEPS)\n+\t$(SHELL) ./config.status --recheck\n+\n+## This allows us to install libltdl without using ln and without creating\n+## a world writeable directory.\n+## FIXME:  Remove this rule once automake can do this properly by itself.\n+local-install-files: $(DISTFILES)\n+\t-rm -rf $(DESTDIR)$(datadir)/libtool/libltdl\n+\t$(mkinstalldirs) $(DESTDIR)$(datadir)/libtool/libltdl\n+\t@for file in $(DISTFILES); do \\\n+\t  d=$(srcdir); \\\n+\t  if test -d $$d/$$file; then \\\n+\t    cp -r $$d/$$file $(DESTDIR)$(datadir)/libtool/libltdl/$$file; \\\n+\t  else \\\n+\t    test -f $(DESTDIR)$(datadir)/libtool/libltdl/$$file \\\n+\t    || cp $$d/$$file $(DESTDIR)$(datadir)/libtool/libltdl/$$file || :; \\\n+\t  fi; \\\n+\tdone"}, {"sha": "f1cebf6343e510e388f52face4e77efb31de22b0", "filename": "libjava/libltdl/Makefile.in", "status": "added", "additions": 456, "deletions": 0, "changes": 456, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2FMakefile.in?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,456 @@\n+# Makefile.in generated automatically by automake 1.4 from Makefile.am\n+\n+# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.\n+# This Makefile.in is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+# PARTICULAR PURPOSE.\n+\n+\n+SHELL = @SHELL@\n+\n+srcdir = @srcdir@\n+top_srcdir = @top_srcdir@\n+VPATH = @srcdir@\n+prefix = @prefix@\n+exec_prefix = @exec_prefix@\n+\n+bindir = @bindir@\n+sbindir = @sbindir@\n+libexecdir = @libexecdir@\n+datadir = @datadir@\n+sysconfdir = @sysconfdir@\n+sharedstatedir = @sharedstatedir@\n+localstatedir = @localstatedir@\n+libdir = @libdir@\n+infodir = @infodir@\n+mandir = @mandir@\n+includedir = @includedir@\n+oldincludedir = /usr/include\n+\n+DESTDIR =\n+\n+pkgdatadir = $(datadir)/@PACKAGE@\n+pkglibdir = $(libdir)/@PACKAGE@\n+pkgincludedir = $(includedir)/@PACKAGE@\n+\n+top_builddir = .\n+\n+ACLOCAL = @ACLOCAL@\n+AUTOCONF = @AUTOCONF@\n+AUTOMAKE = @AUTOMAKE@\n+AUTOHEADER = @AUTOHEADER@\n+\n+INSTALL = @INSTALL@\n+INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)\n+INSTALL_DATA = @INSTALL_DATA@\n+INSTALL_SCRIPT = @INSTALL_SCRIPT@\n+transform = @program_transform_name@\n+\n+NORMAL_INSTALL = :\n+PRE_INSTALL = :\n+POST_INSTALL = :\n+NORMAL_UNINSTALL = :\n+PRE_UNINSTALL = :\n+POST_UNINSTALL = :\n+host_alias = @host_alias@\n+host_triplet = @host@\n+AS = @AS@\n+CC = @CC@\n+DLLTOOL = @DLLTOOL@\n+LIBADD_DL = @LIBADD_DL@\n+LIBTOOL = @LIBTOOL@\n+LIBTOOL_DEPS = @LIBTOOL_DEPS@\n+LN_S = @LN_S@\n+MAINT = @MAINT@\n+MAKEINFO = @MAKEINFO@\n+OBJDUMP = @OBJDUMP@\n+PACKAGE = @PACKAGE@\n+RANLIB = @RANLIB@\n+VERSION = @VERSION@\n+\n+AUTOMAKE_OPTIONS = no-dependencies foreign\n+\n+@INSTALL_LTDL_TRUE@include_HEADERS = \\\n+@INSTALL_LTDL_TRUE@ltdl.h\n+@INSTALL_LTDL_TRUE@lib_LTLIBRARIES = \\\n+@INSTALL_LTDL_TRUE@libltdl.la\n+@INSTALL_LTDL_FALSE@noinst_HEADERS = \\\n+@INSTALL_LTDL_FALSE@ltdl.h\n+\n+@CONVENIENCE_LTDL_TRUE@noinst_LTLIBRARIES = \\\n+@CONVENIENCE_LTDL_TRUE@libltdlc.la\n+\n+libltdl_la_SOURCES = ltdl.c\n+libltdl_la_LDFLAGS = -version-info 1:2:1\n+libltdl_la_LIBADD = $(LIBADD_DL)\n+\n+libltdlc_la_SOURCES = ltdl.c\n+libltdlc_la_LIBADD = $(LIBADD_DL)\n+ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n+mkinstalldirs = $(SHELL) $(top_srcdir)/../../mkinstalldirs\n+CONFIG_HEADER = config.h\n+CONFIG_CLEAN_FILES = \n+LTLIBRARIES =  $(lib_LTLIBRARIES) $(noinst_LTLIBRARIES)\n+\n+\n+DEFS = @DEFS@ -I. -I$(srcdir) -I.\n+CPPFLAGS = @CPPFLAGS@\n+LDFLAGS = @LDFLAGS@\n+LIBS = @LIBS@\n+libltdl_la_DEPENDENCIES = \n+libltdl_la_OBJECTS =  ltdl.lo\n+libltdlc_la_LDFLAGS = \n+libltdlc_la_DEPENDENCIES = \n+libltdlc_la_OBJECTS =  ltdl.lo\n+CFLAGS = @CFLAGS@\n+COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n+LTCOMPILE = $(LIBTOOL) --mode=compile $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n+CCLD = $(CC)\n+LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@\n+HEADERS =  $(include_HEADERS) $(noinst_HEADERS)\n+\n+DIST_COMMON =  README ./stamp-h.in COPYING.LIB Makefile.am Makefile.in \\\n+acconfig.h acinclude.m4 aclocal.m4 config.h.in configure configure.in\n+\n+\n+DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)\n+\n+TAR = tar\n+GZIP_ENV = --best\n+SOURCES = $(libltdl_la_SOURCES) $(libltdlc_la_SOURCES)\n+OBJECTS = $(libltdl_la_OBJECTS) $(libltdlc_la_OBJECTS)\n+\n+all: all-redirect\n+.SUFFIXES:\n+.SUFFIXES: .S .c .lo .o .s\n+$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) \n+\tcd $(top_srcdir) && $(AUTOMAKE) --foreign Makefile\n+\n+Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status\n+\tcd $(top_builddir) \\\n+\t  && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status\n+\n+$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ configure.in  acinclude.m4\n+\tcd $(srcdir) && $(ACLOCAL)\n+\n+config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n+\t$(SHELL) ./config.status --recheck\n+$(srcdir)/configure: @MAINTAINER_MODE_TRUE@$(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)\n+\tcd $(srcdir) && $(AUTOCONF)\n+\n+config.h: stamp-h\n+\t@if test ! -f $@; then \\\n+\t\trm -f stamp-h; \\\n+\t\t$(MAKE) stamp-h; \\\n+\telse :; fi\n+stamp-h: $(srcdir)/config.h.in $(top_builddir)/config.status\n+\tcd $(top_builddir) \\\n+\t  && CONFIG_FILES= CONFIG_HEADERS=config.h \\\n+\t     $(SHELL) ./config.status\n+\t@echo timestamp > stamp-h 2> /dev/null\n+$(srcdir)/config.h.in: @MAINTAINER_MODE_TRUE@$(srcdir)/stamp-h.in\n+\t@if test ! -f $@; then \\\n+\t\trm -f $(srcdir)/stamp-h.in; \\\n+\t\t$(MAKE) $(srcdir)/stamp-h.in; \\\n+\telse :; fi\n+$(srcdir)/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) acconfig.h\n+\tcd $(top_srcdir) && $(AUTOHEADER)\n+\t@echo timestamp > $(srcdir)/stamp-h.in 2> /dev/null\n+\n+mostlyclean-hdr:\n+\n+clean-hdr:\n+\n+distclean-hdr:\n+\t-rm -f config.h\n+\n+maintainer-clean-hdr:\n+\n+mostlyclean-libLTLIBRARIES:\n+\n+clean-libLTLIBRARIES:\n+\t-test -z \"$(lib_LTLIBRARIES)\" || rm -f $(lib_LTLIBRARIES)\n+\n+distclean-libLTLIBRARIES:\n+\n+maintainer-clean-libLTLIBRARIES:\n+\n+install-libLTLIBRARIES: $(lib_LTLIBRARIES)\n+\t@$(NORMAL_INSTALL)\n+\t$(mkinstalldirs) $(DESTDIR)$(libdir)\n+\t@list='$(lib_LTLIBRARIES)'; for p in $$list; do \\\n+\t  if test -f $$p; then \\\n+\t    echo \"$(LIBTOOL)  --mode=install $(INSTALL) $$p $(DESTDIR)$(libdir)/$$p\"; \\\n+\t    $(LIBTOOL)  --mode=install $(INSTALL) $$p $(DESTDIR)$(libdir)/$$p; \\\n+\t  else :; fi; \\\n+\tdone\n+\n+uninstall-libLTLIBRARIES:\n+\t@$(NORMAL_UNINSTALL)\n+\tlist='$(lib_LTLIBRARIES)'; for p in $$list; do \\\n+\t  $(LIBTOOL)  --mode=uninstall rm -f $(DESTDIR)$(libdir)/$$p; \\\n+\tdone\n+\n+mostlyclean-noinstLTLIBRARIES:\n+\n+clean-noinstLTLIBRARIES:\n+\t-test -z \"$(noinst_LTLIBRARIES)\" || rm -f $(noinst_LTLIBRARIES)\n+\n+distclean-noinstLTLIBRARIES:\n+\n+maintainer-clean-noinstLTLIBRARIES:\n+\n+.c.o:\n+\t$(COMPILE) -c $<\n+\n+.s.o:\n+\t$(COMPILE) -c $<\n+\n+.S.o:\n+\t$(COMPILE) -c $<\n+\n+mostlyclean-compile:\n+\t-rm -f *.o core *.core\n+\n+clean-compile:\n+\n+distclean-compile:\n+\t-rm -f *.tab.c\n+\n+maintainer-clean-compile:\n+\n+.c.lo:\n+\t$(LIBTOOL) --mode=compile $(COMPILE) -c $<\n+\n+.s.lo:\n+\t$(LIBTOOL) --mode=compile $(COMPILE) -c $<\n+\n+.S.lo:\n+\t$(LIBTOOL) --mode=compile $(COMPILE) -c $<\n+\n+mostlyclean-libtool:\n+\t-rm -f *.lo\n+\n+clean-libtool:\n+\t-rm -rf .libs _libs\n+\n+distclean-libtool:\n+\n+maintainer-clean-libtool:\n+\n+libltdl.la: $(libltdl_la_OBJECTS) $(libltdl_la_DEPENDENCIES)\n+\t$(LINK) -rpath $(libdir) $(libltdl_la_LDFLAGS) $(libltdl_la_OBJECTS) $(libltdl_la_LIBADD) $(LIBS)\n+\n+libltdlc.la: $(libltdlc_la_OBJECTS) $(libltdlc_la_DEPENDENCIES)\n+\t$(LINK)  $(libltdlc_la_LDFLAGS) $(libltdlc_la_OBJECTS) $(libltdlc_la_LIBADD) $(LIBS)\n+\n+install-includeHEADERS: $(include_HEADERS)\n+\t@$(NORMAL_INSTALL)\n+\t$(mkinstalldirs) $(DESTDIR)$(includedir)\n+\t@list='$(include_HEADERS)'; for p in $$list; do \\\n+\t  if test -f \"$$p\"; then d= ; else d=\"$(srcdir)/\"; fi; \\\n+\t  echo \" $(INSTALL_DATA) $$d$$p $(DESTDIR)$(includedir)/$$p\"; \\\n+\t  $(INSTALL_DATA) $$d$$p $(DESTDIR)$(includedir)/$$p; \\\n+\tdone\n+\n+uninstall-includeHEADERS:\n+\t@$(NORMAL_UNINSTALL)\n+\tlist='$(include_HEADERS)'; for p in $$list; do \\\n+\t  rm -f $(DESTDIR)$(includedir)/$$p; \\\n+\tdone\n+\n+tags: TAGS\n+\n+ID: $(HEADERS) $(SOURCES) $(LISP)\n+\tlist='$(SOURCES) $(HEADERS)'; \\\n+\tunique=`for i in $$list; do echo $$i; done | \\\n+\t  awk '    { files[$$0] = 1; } \\\n+\t       END { for (i in files) print i; }'`; \\\n+\there=`pwd` && cd $(srcdir) \\\n+\t  && mkid -f$$here/ID $$unique $(LISP)\n+\n+TAGS:  $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) $(LISP)\n+\ttags=; \\\n+\there=`pwd`; \\\n+\tlist='$(SOURCES) $(HEADERS)'; \\\n+\tunique=`for i in $$list; do echo $$i; done | \\\n+\t  awk '    { files[$$0] = 1; } \\\n+\t       END { for (i in files) print i; }'`; \\\n+\ttest -z \"$(ETAGS_ARGS)config.h.in$$unique$(LISP)$$tags\" \\\n+\t  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags config.h.in $$unique $(LISP) -o $$here/TAGS)\n+\n+mostlyclean-tags:\n+\n+clean-tags:\n+\n+distclean-tags:\n+\t-rm -f TAGS ID\n+\n+maintainer-clean-tags:\n+\n+distdir = $(PACKAGE)-$(VERSION)\n+top_distdir = $(distdir)\n+\n+# This target untars the dist file and tries a VPATH configuration.  Then\n+# it guarantees that the distribution is self-contained by making another\n+# tarfile.\n+distcheck: dist\n+\t-rm -rf $(distdir)\n+\tGZIP=$(GZIP_ENV) $(TAR) zxf $(distdir).tar.gz\n+\tmkdir $(distdir)/=build\n+\tmkdir $(distdir)/=inst\n+\tdc_install_base=`cd $(distdir)/=inst && pwd`; \\\n+\tcd $(distdir)/=build \\\n+\t  && ../configure --srcdir=.. --prefix=$$dc_install_base \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) dvi \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) check \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) install \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) installcheck \\\n+\t  && $(MAKE) $(AM_MAKEFLAGS) dist\n+\t-rm -rf $(distdir)\n+\t@banner=\"$(distdir).tar.gz is ready for distribution\"; \\\n+\tdashes=`echo \"$$banner\" | sed s/./=/g`; \\\n+\techo \"$$dashes\"; \\\n+\techo \"$$banner\"; \\\n+\techo \"$$dashes\"\n+dist: distdir\n+\t-chmod -R a+r $(distdir)\n+\tGZIP=$(GZIP_ENV) $(TAR) chozf $(distdir).tar.gz $(distdir)\n+\t-rm -rf $(distdir)\n+dist-all: distdir\n+\t-chmod -R a+r $(distdir)\n+\tGZIP=$(GZIP_ENV) $(TAR) chozf $(distdir).tar.gz $(distdir)\n+\t-rm -rf $(distdir)\n+distdir: $(DISTFILES)\n+\t-rm -rf $(distdir)\n+\tmkdir $(distdir)\n+\t-chmod 777 $(distdir)\n+\t@for file in $(DISTFILES); do \\\n+\t  d=$(srcdir); \\\n+\t  if test -d $$d/$$file; then \\\n+\t    cp -pr $$/$$file $(distdir)/$$file; \\\n+\t  else \\\n+\t    test -f $(distdir)/$$file \\\n+\t    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \\\n+\t    || cp -p $$d/$$file $(distdir)/$$file || :; \\\n+\t  fi; \\\n+\tdone\n+info-am:\n+info: info-am\n+dvi-am:\n+dvi: dvi-am\n+check-am: all-am\n+check: check-am\n+installcheck-am:\n+installcheck: installcheck-am\n+all-recursive-am: config.h\n+\t$(MAKE) $(AM_MAKEFLAGS) all-recursive\n+\n+install-exec-am: install-libLTLIBRARIES\n+install-exec: install-exec-am\n+\n+install-data-am: install-includeHEADERS\n+install-data: install-data-am\n+\n+install-am: all-am\n+\t@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am\n+install: install-am\n+uninstall-am: uninstall-libLTLIBRARIES uninstall-includeHEADERS\n+uninstall: uninstall-am\n+all-am: Makefile $(LTLIBRARIES) $(HEADERS) config.h\n+all-redirect: all-am\n+install-strip:\n+\t$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install\n+installdirs:\n+\t$(mkinstalldirs)  $(DESTDIR)$(libdir) $(DESTDIR)$(includedir)\n+\n+\n+mostlyclean-generic:\n+\n+clean-generic:\n+\n+distclean-generic:\n+\t-rm -f Makefile $(CONFIG_CLEAN_FILES)\n+\t-rm -f config.cache config.log stamp-h stamp-h[0-9]*\n+\n+maintainer-clean-generic:\n+mostlyclean-am:  mostlyclean-hdr mostlyclean-libLTLIBRARIES \\\n+\t\tmostlyclean-noinstLTLIBRARIES mostlyclean-compile \\\n+\t\tmostlyclean-libtool mostlyclean-tags \\\n+\t\tmostlyclean-generic\n+\n+mostlyclean: mostlyclean-am\n+\n+clean-am:  clean-hdr clean-libLTLIBRARIES clean-noinstLTLIBRARIES \\\n+\t\tclean-compile clean-libtool clean-tags clean-generic \\\n+\t\tmostlyclean-am\n+\n+clean: clean-am\n+\n+distclean-am:  distclean-hdr distclean-libLTLIBRARIES \\\n+\t\tdistclean-noinstLTLIBRARIES distclean-compile \\\n+\t\tdistclean-libtool distclean-tags distclean-generic \\\n+\t\tclean-am\n+\t-rm -f libtool\n+\n+distclean: distclean-am\n+\t-rm -f config.status\n+\n+maintainer-clean-am:  maintainer-clean-hdr \\\n+\t\tmaintainer-clean-libLTLIBRARIES \\\n+\t\tmaintainer-clean-noinstLTLIBRARIES \\\n+\t\tmaintainer-clean-compile maintainer-clean-libtool \\\n+\t\tmaintainer-clean-tags maintainer-clean-generic \\\n+\t\tdistclean-am\n+\t@echo \"This command is intended for maintainers to use;\"\n+\t@echo \"it deletes files that may require special tools to rebuild.\"\n+\n+maintainer-clean: maintainer-clean-am\n+\t-rm -f config.status\n+\n+.PHONY: mostlyclean-hdr distclean-hdr clean-hdr maintainer-clean-hdr \\\n+mostlyclean-libLTLIBRARIES distclean-libLTLIBRARIES \\\n+clean-libLTLIBRARIES maintainer-clean-libLTLIBRARIES \\\n+uninstall-libLTLIBRARIES install-libLTLIBRARIES \\\n+mostlyclean-noinstLTLIBRARIES distclean-noinstLTLIBRARIES \\\n+clean-noinstLTLIBRARIES maintainer-clean-noinstLTLIBRARIES \\\n+mostlyclean-compile distclean-compile clean-compile \\\n+maintainer-clean-compile mostlyclean-libtool distclean-libtool \\\n+clean-libtool maintainer-clean-libtool uninstall-includeHEADERS \\\n+install-includeHEADERS tags mostlyclean-tags distclean-tags clean-tags \\\n+maintainer-clean-tags distdir info-am info dvi-am dvi check check-am \\\n+installcheck-am installcheck all-recursive-am install-exec-am \\\n+install-exec install-data-am install-data install-am install \\\n+uninstall-am uninstall all-redirect all-am all installdirs \\\n+mostlyclean-generic distclean-generic clean-generic \\\n+maintainer-clean-generic clean mostlyclean distclean maintainer-clean\n+\n+\n+ltdl.lo: ltdl.h config.h\n+\n+$(OBJECTS): libtool\n+libtool: $(LIBTOOL_DEPS)\n+\t$(SHELL) ./config.status --recheck\n+\n+local-install-files: $(DISTFILES)\n+\t-rm -rf $(DESTDIR)$(datadir)/libtool/libltdl\n+\t$(mkinstalldirs) $(DESTDIR)$(datadir)/libtool/libltdl\n+\t@for file in $(DISTFILES); do \\\n+\t  d=$(srcdir); \\\n+\t  if test -d $$d/$$file; then \\\n+\t    cp -r $$d/$$file $(DESTDIR)$(datadir)/libtool/libltdl/$$file; \\\n+\t  else \\\n+\t    test -f $(DESTDIR)$(datadir)/libtool/libltdl/$$file \\\n+\t    || cp $$d/$$file $(DESTDIR)$(datadir)/libtool/libltdl/$$file || :; \\\n+\t  fi; \\\n+\tdone\n+\n+# Tell versions [3.59,3.63) of GNU make to not export all variables.\n+# Otherwise a system limit (for SysV at least) may be exceeded.\n+.NOEXPORT:"}, {"sha": "e57b99f21a5c58b3480517e23f125a5f12f1a8b3", "filename": "libjava/libltdl/README", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FREADME", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2FREADME", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2FREADME?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,9 @@\n+This is GNU libltdl, a system independent dlopen wrapper for GNU libtool.\n+\n+It supports the following dlopen interfaces:\n+* dlopen (Solaris, Linux and various BSD flavors)\n+* shl_load (HP-UX)\n+* LoadLibrary (Win16 and Win32)\n+* load_add_on (BeOS)\n+* GNU DLD (emulates dynamic linking for static libraries)\n+* libtool's dlpreopen"}, {"sha": "15f115c7473cd7890146e488937ca39252185276", "filename": "libjava/libltdl/acconfig.h", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Facconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Facconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Facconfig.h?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,12 @@\n+/* Some of these are defined here, not in configure.in, because\n+   they're AC_DEFINEd in two different places, which causes two\n+   defines to appear.  Some C compilers might now appreciate it...  */\n+\n+/* Define if you have the libdl library or equivalent.  */\n+#undef HAVE_LIBDL\n+\n+/* Define if you have the GNU dld library.  */\n+#undef HAVE_DLD\n+\n+/* Define if you have the shl_load function.  */\n+#undef HAVE_SHL_LOAD"}, {"sha": "47abe430644da574e3dbe39065a2a2829d18623b", "filename": "libjava/libltdl/acinclude.m4", "status": "added", "additions": 430, "deletions": 0, "changes": 430, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Facinclude.m4?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,430 @@\n+## libtool.m4 - Configure libtool for the target system. -*-Shell-script-*-\n+## Copyright (C) 1996-1999 Free Software Foundation, Inc.\n+## Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996\n+##\n+## This program is free software; you can redistribute it and/or modify\n+## it under the terms of the GNU General Public License as published by\n+## the Free Software Foundation; either version 2 of the License, or\n+## (at your option) any later version.\n+##\n+## This program is distributed in the hope that it will be useful, but\n+## WITHOUT ANY WARRANTY; without even the implied warranty of\n+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+## General Public License for more details.\n+##\n+## You should have received a copy of the GNU General Public License\n+## along with this program; if not, write to the Free Software\n+## Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n+##\n+## As a special exception to the GNU General Public License, if you\n+## distribute this file as part of a program that contains a\n+## configuration script generated by Autoconf, you may include it under\n+## the same distribution terms that you use for the rest of that program.\n+\n+# serial 40 AC_PROG_LIBTOOL\n+AC_DEFUN(AC_PROG_LIBTOOL,\n+[AC_REQUIRE([AC_LIBTOOL_SETUP])dnl\n+\n+# Save cache, so that ltconfig can load it\n+AC_CACHE_SAVE\n+\n+# Actually configure libtool.  ac_aux_dir is where install-sh is found.\n+CC=\"$CC\" CFLAGS=\"$CFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n+LD=\"$LD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" \\\n+DLLTOOL=\"$DLLTOOL\" AS=\"$AS\" OBJDUMP=\"$OBJDUMP\" \\\n+${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig --no-reexec \\\n+$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $lt_target \\\n+|| AC_MSG_ERROR([libtool configure failed])\n+\n+# Reload cache, that may have been modified by ltconfig\n+AC_CACHE_LOAD\n+\n+# This can be used to rebuild libtool when needed\n+LIBTOOL_DEPS=\"$ac_aux_dir/ltconfig $ac_aux_dir/ltmain.sh\"\n+\n+# Always use our own libtool.\n+LIBTOOL='$(SHELL) $(top_builddir)/libtool'\n+AC_SUBST(LIBTOOL)dnl\n+\n+# Redirect the config.log output again, so that the ltconfig log is not\n+# clobbered by the next message.\n+exec 5>>./config.log\n+])\n+\n+AC_DEFUN(AC_LIBTOOL_SETUP,\n+[AC_PREREQ(2.13)dnl\n+AC_REQUIRE([AC_ENABLE_SHARED])dnl\n+AC_REQUIRE([AC_ENABLE_STATIC])dnl\n+AC_REQUIRE([AC_ENABLE_FAST_INSTALL])dnl\n+AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+AC_REQUIRE([AC_CANONICAL_BUILD])dnl\n+AC_REQUIRE([AC_PROG_RANLIB])dnl\n+AC_REQUIRE([AC_PROG_CC])dnl\n+AC_REQUIRE([AC_PROG_LD])dnl\n+AC_REQUIRE([AC_PROG_NM])dnl\n+AC_REQUIRE([AC_PROG_LN_S])dnl\n+dnl\n+\n+case \"$target\" in\n+NONE) lt_target=\"$host\" ;;\n+*) lt_target=\"$target\" ;;\n+esac\n+\n+# Check for any special flags to pass to ltconfig.\n+libtool_flags=\"--cache-file=$cache_file\"\n+test \"$enable_shared\" = no && libtool_flags=\"$libtool_flags --disable-shared\"\n+test \"$enable_static\" = no && libtool_flags=\"$libtool_flags --disable-static\"\n+test \"$enable_fast_install\" = no && libtool_flags=\"$libtool_flags --disable-fast-install\"\n+test \"$ac_cv_prog_gcc\" = yes && libtool_flags=\"$libtool_flags --with-gcc\"\n+test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n+ifdef([AC_PROVIDE_AC_LIBTOOL_DLOPEN],\n+[libtool_flags=\"$libtool_flags --enable-dlopen\"])\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[libtool_flags=\"$libtool_flags --enable-win32-dll\"])\n+AC_ARG_ENABLE(libtool-lock,\n+  [  --disable-libtool-lock  avoid locking (might break parallel builds)])\n+test \"x$enable_libtool_lock\" = xno && libtool_flags=\"$libtool_flags --disable-lock\"\n+test x\"$silent\" = xyes && libtool_flags=\"$libtool_flags --silent\"\n+\n+# Some flags need to be propagated to the compiler or linker for good\n+# libtool support.\n+case \"$lt_target\" in\n+*-*-irix6*)\n+  # Find out which ABI we are using.\n+  echo '[#]line __oline__ \"configure\"' > conftest.$ac_ext\n+  if AC_TRY_EVAL(ac_compile); then\n+    case \"`/usr/bin/file conftest.o`\" in\n+    *32-bit*)\n+      LD=\"${LD-ld} -32\"\n+      ;;\n+    *N32*)\n+      LD=\"${LD-ld} -n32\"\n+      ;;\n+    *64-bit*)\n+      LD=\"${LD-ld} -64\"\n+      ;;\n+    esac\n+  fi\n+  rm -rf conftest*\n+  ;;\n+\n+*-*-sco3.2v5*)\n+  # On SCO OpenServer 5, we need -belf to get full-featured binaries.\n+  SAVE_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"$CFLAGS -belf\"\n+  AC_CACHE_CHECK([whether the C compiler needs -belf], lt_cv_cc_needs_belf,\n+    [AC_TRY_LINK([],[],[lt_cv_cc_needs_belf=yes],[lt_cv_cc_needs_belf=no])])\n+  if test x\"$lt_cv_cc_needs_belf\" != x\"yes\"; then\n+    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf\n+    CFLAGS=\"$SAVE_CFLAGS\"\n+  fi\n+  ;;\n+\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[*-*-cygwin* | *-*-mingw*)\n+  AC_CHECK_TOOL(DLLTOOL, dlltool, false)\n+  AC_CHECK_TOOL(AS, as, false)\n+  AC_CHECK_TOOL(OBJDUMP, objdump, false)\n+  ;;\n+])\n+esac\n+])\n+\n+# AC_LIBTOOL_DLOPEN - enable checks for dlopen support\n+AC_DEFUN(AC_LIBTOOL_DLOPEN, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])])\n+\n+# AC_LIBTOOL_WIN32_DLL - declare package support for building win32 dll's\n+AC_DEFUN(AC_LIBTOOL_WIN32_DLL, [AC_BEFORE([$0], [AC_LIBTOOL_SETUP])])\n+\n+# AC_ENABLE_SHARED - implement the --enable-shared flag\n+# Usage: AC_ENABLE_SHARED[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_SHARED, [dnl\n+define([AC_ENABLE_SHARED_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(shared,\n+changequote(<<, >>)dnl\n+<<  --enable-shared[=PKGS]  build shared libraries [default=>>AC_ENABLE_SHARED_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_shared=yes ;;\n+no) enable_shared=no ;;\n+*)\n+  enable_shared=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_shared=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_shared=AC_ENABLE_SHARED_DEFAULT)dnl\n+])\n+\n+# AC_DISABLE_SHARED - set the default shared flag to --disable-shared\n+AC_DEFUN(AC_DISABLE_SHARED, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_SHARED(no)])\n+\n+# AC_ENABLE_STATIC - implement the --enable-static flag\n+# Usage: AC_ENABLE_STATIC[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_STATIC, [dnl\n+define([AC_ENABLE_STATIC_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(static,\n+changequote(<<, >>)dnl\n+<<  --enable-static[=PKGS]  build static libraries [default=>>AC_ENABLE_STATIC_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_static=yes ;;\n+no) enable_static=no ;;\n+*)\n+  enable_static=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_static=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_static=AC_ENABLE_STATIC_DEFAULT)dnl\n+])\n+\n+# AC_DISABLE_STATIC - set the default static flag to --disable-static\n+AC_DEFUN(AC_DISABLE_STATIC, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_STATIC(no)])\n+\n+\n+# AC_ENABLE_FAST_INSTALL - implement the --enable-fast-install flag\n+# Usage: AC_ENABLE_FAST_INSTALL[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_FAST_INSTALL, [dnl\n+define([AC_ENABLE_FAST_INSTALL_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(fast-install,\n+changequote(<<, >>)dnl\n+<<  --enable-fast-install[=PKGS]  optimize for fast installation [default=>>AC_ENABLE_FAST_INSTALL_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_fast_install=yes ;;\n+no) enable_fast_install=no ;;\n+*)\n+  enable_fast_install=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_fast_install=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_fast_install=AC_ENABLE_FAST_INSTALL_DEFAULT)dnl\n+])\n+\n+# AC_ENABLE_FAST_INSTALL - set the default to --disable-fast-install\n+AC_DEFUN(AC_DISABLE_FAST_INSTALL, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_FAST_INSTALL(no)])\n+\n+# AC_PROG_LD - find the path to the GNU or non-GNU linker\n+AC_DEFUN(AC_PROG_LD,\n+[AC_ARG_WITH(gnu-ld,\n+[  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]],\n+test \"$withval\" = no || with_gnu_ld=yes, with_gnu_ld=no)\n+AC_REQUIRE([AC_PROG_CC])dnl\n+AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+AC_REQUIRE([AC_CANONICAL_BUILD])dnl\n+ac_prog=ld\n+if test \"$ac_cv_prog_gcc\" = yes; then\n+  # Check if gcc -print-prog-name=ld gives a path.\n+  AC_MSG_CHECKING([for ld used by GCC])\n+  ac_prog=`($CC -print-prog-name=ld) 2>&5`\n+  case \"$ac_prog\" in\n+    # Accept absolute paths.\n+changequote(,)dnl\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n+      re_direlt='/[^/][^/]*/\\.\\./'\n+changequote([,])dnl\n+      # Canonicalize the path of ld\n+      ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n+      while echo $ac_prog | grep \"$re_direlt\" > /dev/null 2>&1; do\n+\tac_prog=`echo $ac_prog| sed \"s%$re_direlt%/%\"`\n+      done\n+      test -z \"$LD\" && LD=\"$ac_prog\"\n+      ;;\n+  \"\")\n+    # If it fails, then pretend we aren't using GCC.\n+    ac_prog=ld\n+    ;;\n+  *)\n+    # If it is relative, then search for the first ld in PATH.\n+    with_gnu_ld=unknown\n+    ;;\n+  esac\n+elif test \"$with_gnu_ld\" = yes; then\n+  AC_MSG_CHECKING([for GNU ld])\n+else\n+  AC_MSG_CHECKING([for non-GNU ld])\n+fi\n+AC_CACHE_VAL(ac_cv_path_LD,\n+[if test -z \"$LD\"; then\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n+      ac_cv_path_LD=\"$ac_dir/$ac_prog\"\n+      # Check to see if the program is GNU ld.  I'd rather use --version,\n+      # but apparently some GNU ld's only accept -v.\n+      # Break only if it was the GNU/non-GNU ld that we prefer.\n+      if \"$ac_cv_path_LD\" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then\n+\ttest \"$with_gnu_ld\" != no && break\n+      else\n+\ttest \"$with_gnu_ld\" != yes && break\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+else\n+  ac_cv_path_LD=\"$LD\" # Let the user override the test with a path.\n+fi])\n+LD=\"$ac_cv_path_LD\"\n+if test -n \"$LD\"; then\n+  AC_MSG_RESULT($LD)\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+test -z \"$LD\" && AC_MSG_ERROR([no acceptable ld found in \\$PATH])\n+AC_PROG_LD_GNU\n+])\n+\n+AC_DEFUN(AC_PROG_LD_GNU,\n+[AC_CACHE_CHECK([if the linker ($LD) is GNU ld], ac_cv_prog_gnu_ld,\n+[# I'd rather use --version here, but apparently some GNU ld's only accept -v.\n+if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then\n+  ac_cv_prog_gnu_ld=yes\n+else\n+  ac_cv_prog_gnu_ld=no\n+fi])\n+])\n+\n+# AC_PROG_NM - find the path to a BSD-compatible name lister\n+AC_DEFUN(AC_PROG_NM,\n+[AC_MSG_CHECKING([for BSD-compatible nm])\n+AC_CACHE_VAL(ac_cv_path_NM,\n+[if test -n \"$NM\"; then\n+  # Let the user override the test.\n+  ac_cv_path_NM=\"$NM\"\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/nm || test -f $ac_dir/nm$ac_exeext ; then\n+      # Check to see if the nm accepts a BSD-compat flag.\n+      # Adding the `sed 1q' prevents false positives on HP-UX, which says:\n+      #   nm: unknown option \"B\" ignored\n+      if ($ac_dir/nm -B /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\tac_cv_path_NM=\"$ac_dir/nm -B\"\n+\tbreak\n+      elif ($ac_dir/nm -p /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\tac_cv_path_NM=\"$ac_dir/nm -p\"\n+\tbreak\n+      else\n+\tac_cv_path_NM=${ac_cv_path_NM=\"$ac_dir/nm\"} # keep the first match, but\n+\tcontinue # so that we can try to find one that supports BSD flags\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  test -z \"$ac_cv_path_NM\" && ac_cv_path_NM=nm\n+fi])\n+NM=\"$ac_cv_path_NM\"\n+AC_MSG_RESULT([$NM])\n+])\n+\n+# AC_CHECK_LIBM - check for math library\n+AC_DEFUN(AC_CHECK_LIBM,\n+[AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+LIBM=\n+case \"$lt_target\" in\n+*-*-beos* | *-*-cygwin*)\n+  # These system don't have libm\n+  ;;\n+*-ncr-sysv4.3*)\n+  AC_CHECK_LIB(mw, _mwvalidcheckl, LIBM=\"-lmw\")\n+  AC_CHECK_LIB(m, main, LIBM=\"$LIBM -lm\")\n+  ;;\n+*)\n+  AC_CHECK_LIB(m, main, LIBM=\"-lm\")\n+  ;;\n+esac\n+])\n+\n+# AC_LIBLTDL_CONVENIENCE[(dir)] - sets LIBLTDL to the link flags for\n+# the libltdl convenience library, adds --enable-ltdl-convenience to\n+# the configure arguments.  Note that LIBLTDL is not AC_SUBSTed, nor\n+# is AC_CONFIG_SUBDIRS called.  If DIR is not provided, it is assumed\n+# to be `${top_builddir}/libltdl'.  Make sure you start DIR with\n+# '${top_builddir}/' (note the single quotes!) if your package is not\n+# flat, and, if you're not using automake, define top_builddir as\n+# appropriate in the Makefiles.\n+AC_DEFUN(AC_LIBLTDL_CONVENIENCE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+  case \"$enable_ltdl_convenience\" in\n+  no) AC_MSG_ERROR([this package needs a convenience libltdl]) ;;\n+  \"\") enable_ltdl_convenience=yes\n+      ac_configure_args=\"$ac_configure_args --enable-ltdl-convenience\" ;;\n+  esac\n+  LIBLTDL=ifelse($#,1,$1,['${top_builddir}/libltdl'])/libltdlc.la\n+  INCLTDL=ifelse($#,1,-I$1,['-I${top_builddir}/libltdl'])\n+])\n+\n+# AC_LIBLTDL_INSTALLABLE[(dir)] - sets LIBLTDL to the link flags for\n+# the libltdl installable library, and adds --enable-ltdl-install to\n+# the configure arguments.  Note that LIBLTDL is not AC_SUBSTed, nor\n+# is AC_CONFIG_SUBDIRS called.  If DIR is not provided, it is assumed\n+# to be `${top_builddir}/libltdl'.  Make sure you start DIR with\n+# '${top_builddir}/' (note the single quotes!) if your package is not\n+# flat, and, if you're not using automake, define top_builddir as\n+# appropriate in the Makefiles.\n+# In the future, this macro may have to be called after AC_PROG_LIBTOOL.\n+AC_DEFUN(AC_LIBLTDL_INSTALLABLE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+  AC_CHECK_LIB(ltdl, main,\n+  [test x\"$enable_ltdl_install\" != xyes && enable_ltdl_install=no],\n+  [if test x\"$enable_ltdl_install\" = xno; then\n+     AC_MSG_WARN([libltdl not installed, but installation disabled])\n+   else\n+     enable_ltdl_install=yes\n+   fi\n+  ])\n+  if test x\"$enable_ltdl_install\" = x\"yes\"; then\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install\"\n+    LIBLTDL=ifelse($#,1,$1,['${top_builddir}/libltdl'])/libltdl.la\n+    INCLTDL=ifelse($#,1,-I$1,['-I${top_builddir}/libltdl'])\n+  else\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install=no\"\n+    LIBLTDL=\"-lltdl\"\n+    INCLTDL=\n+  fi\n+])\n+\n+dnl old names\n+AC_DEFUN(AM_PROG_LIBTOOL, [indir([AC_PROG_LIBTOOL])])dnl\n+AC_DEFUN(AM_ENABLE_SHARED, [indir([AC_ENABLE_SHARED], $@)])dnl\n+AC_DEFUN(AM_ENABLE_STATIC, [indir([AC_ENABLE_STATIC], $@)])dnl\n+AC_DEFUN(AM_DISABLE_SHARED, [indir([AC_DISABLE_SHARED], $@)])dnl\n+AC_DEFUN(AM_DISABLE_STATIC, [indir([AC_DISABLE_STATIC], $@)])dnl\n+AC_DEFUN(AM_PROG_LD, [indir([AC_PROG_LD])])dnl\n+AC_DEFUN(AM_PROG_NM, [indir([AC_PROG_NM])])dnl\n+\n+dnl This is just to silence aclocal about the macro not being used\n+ifelse([AC_DISABLE_FAST_INSTALL])dnl"}, {"sha": "5e6ad026d2f1c3ab17ba404c4caac64ddabc86a8", "filename": "libjava/libltdl/aclocal.m4", "status": "added", "additions": 569, "deletions": 0, "changes": 569, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Faclocal.m4?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,569 @@\n+dnl aclocal.m4 generated automatically by aclocal 1.4\n+\n+dnl Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.\n+dnl This file is free software; the Free Software Foundation\n+dnl gives unlimited permission to copy and/or distribute it,\n+dnl with or without modifications, as long as this notice is preserved.\n+\n+dnl This program is distributed in the hope that it will be useful,\n+dnl but WITHOUT ANY WARRANTY, to the extent permitted by law; without\n+dnl even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n+dnl PARTICULAR PURPOSE.\n+\n+\n+# serial 40 AC_PROG_LIBTOOL\n+AC_DEFUN(AC_PROG_LIBTOOL,\n+[AC_REQUIRE([AC_LIBTOOL_SETUP])dnl\n+\n+# Save cache, so that ltconfig can load it\n+AC_CACHE_SAVE\n+\n+# Actually configure libtool.  ac_aux_dir is where install-sh is found.\n+CC=\"$CC\" CFLAGS=\"$CFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n+LD=\"$LD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" \\\n+DLLTOOL=\"$DLLTOOL\" AS=\"$AS\" OBJDUMP=\"$OBJDUMP\" \\\n+${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig --no-reexec \\\n+$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $lt_target \\\n+|| AC_MSG_ERROR([libtool configure failed])\n+\n+# Reload cache, that may have been modified by ltconfig\n+AC_CACHE_LOAD\n+\n+# This can be used to rebuild libtool when needed\n+LIBTOOL_DEPS=\"$ac_aux_dir/ltconfig $ac_aux_dir/ltmain.sh\"\n+\n+# Always use our own libtool.\n+LIBTOOL='$(SHELL) $(top_builddir)/libtool'\n+AC_SUBST(LIBTOOL)dnl\n+\n+# Redirect the config.log output again, so that the ltconfig log is not\n+# clobbered by the next message.\n+exec 5>>./config.log\n+])\n+\n+AC_DEFUN(AC_LIBTOOL_SETUP,\n+[AC_PREREQ(2.13)dnl\n+AC_REQUIRE([AC_ENABLE_SHARED])dnl\n+AC_REQUIRE([AC_ENABLE_STATIC])dnl\n+AC_REQUIRE([AC_ENABLE_FAST_INSTALL])dnl\n+AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+AC_REQUIRE([AC_CANONICAL_BUILD])dnl\n+AC_REQUIRE([AC_PROG_RANLIB])dnl\n+AC_REQUIRE([AC_PROG_CC])dnl\n+AC_REQUIRE([AC_PROG_LD])dnl\n+AC_REQUIRE([AC_PROG_NM])dnl\n+AC_REQUIRE([AC_PROG_LN_S])dnl\n+dnl\n+\n+case \"$target\" in\n+NONE) lt_target=\"$host\" ;;\n+*) lt_target=\"$target\" ;;\n+esac\n+\n+# Check for any special flags to pass to ltconfig.\n+libtool_flags=\"--cache-file=$cache_file\"\n+test \"$enable_shared\" = no && libtool_flags=\"$libtool_flags --disable-shared\"\n+test \"$enable_static\" = no && libtool_flags=\"$libtool_flags --disable-static\"\n+test \"$enable_fast_install\" = no && libtool_flags=\"$libtool_flags --disable-fast-install\"\n+test \"$ac_cv_prog_gcc\" = yes && libtool_flags=\"$libtool_flags --with-gcc\"\n+test \"$ac_cv_prog_gnu_ld\" = yes && libtool_flags=\"$libtool_flags --with-gnu-ld\"\n+ifdef([AC_PROVIDE_AC_LIBTOOL_DLOPEN],\n+[libtool_flags=\"$libtool_flags --enable-dlopen\"])\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[libtool_flags=\"$libtool_flags --enable-win32-dll\"])\n+AC_ARG_ENABLE(libtool-lock,\n+  [  --disable-libtool-lock  avoid locking (might break parallel builds)])\n+test \"x$enable_libtool_lock\" = xno && libtool_flags=\"$libtool_flags --disable-lock\"\n+test x\"$silent\" = xyes && libtool_flags=\"$libtool_flags --silent\"\n+\n+# Some flags need to be propagated to the compiler or linker for good\n+# libtool support.\n+case \"$lt_target\" in\n+*-*-irix6*)\n+  # Find out which ABI we are using.\n+  echo '[#]line __oline__ \"configure\"' > conftest.$ac_ext\n+  if AC_TRY_EVAL(ac_compile); then\n+    case \"`/usr/bin/file conftest.o`\" in\n+    *32-bit*)\n+      LD=\"${LD-ld} -32\"\n+      ;;\n+    *N32*)\n+      LD=\"${LD-ld} -n32\"\n+      ;;\n+    *64-bit*)\n+      LD=\"${LD-ld} -64\"\n+      ;;\n+    esac\n+  fi\n+  rm -rf conftest*\n+  ;;\n+\n+*-*-sco3.2v5*)\n+  # On SCO OpenServer 5, we need -belf to get full-featured binaries.\n+  SAVE_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"$CFLAGS -belf\"\n+  AC_CACHE_CHECK([whether the C compiler needs -belf], lt_cv_cc_needs_belf,\n+    [AC_TRY_LINK([],[],[lt_cv_cc_needs_belf=yes],[lt_cv_cc_needs_belf=no])])\n+  if test x\"$lt_cv_cc_needs_belf\" != x\"yes\"; then\n+    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf\n+    CFLAGS=\"$SAVE_CFLAGS\"\n+  fi\n+  ;;\n+\n+ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n+[*-*-cygwin* | *-*-mingw*)\n+  AC_CHECK_TOOL(DLLTOOL, dlltool, false)\n+  AC_CHECK_TOOL(AS, as, false)\n+  AC_CHECK_TOOL(OBJDUMP, objdump, false)\n+  ;;\n+])\n+esac\n+])\n+\n+# AC_LIBTOOL_DLOPEN - enable checks for dlopen support\n+AC_DEFUN(AC_LIBTOOL_DLOPEN, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])])\n+\n+# AC_LIBTOOL_WIN32_DLL - declare package support for building win32 dll's\n+AC_DEFUN(AC_LIBTOOL_WIN32_DLL, [AC_BEFORE([$0], [AC_LIBTOOL_SETUP])])\n+\n+# AC_ENABLE_SHARED - implement the --enable-shared flag\n+# Usage: AC_ENABLE_SHARED[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_SHARED, [dnl\n+define([AC_ENABLE_SHARED_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(shared,\n+changequote(<<, >>)dnl\n+<<  --enable-shared[=PKGS]  build shared libraries [default=>>AC_ENABLE_SHARED_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_shared=yes ;;\n+no) enable_shared=no ;;\n+*)\n+  enable_shared=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_shared=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_shared=AC_ENABLE_SHARED_DEFAULT)dnl\n+])\n+\n+# AC_DISABLE_SHARED - set the default shared flag to --disable-shared\n+AC_DEFUN(AC_DISABLE_SHARED, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_SHARED(no)])\n+\n+# AC_ENABLE_STATIC - implement the --enable-static flag\n+# Usage: AC_ENABLE_STATIC[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_STATIC, [dnl\n+define([AC_ENABLE_STATIC_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(static,\n+changequote(<<, >>)dnl\n+<<  --enable-static[=PKGS]  build static libraries [default=>>AC_ENABLE_STATIC_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_static=yes ;;\n+no) enable_static=no ;;\n+*)\n+  enable_static=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_static=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_static=AC_ENABLE_STATIC_DEFAULT)dnl\n+])\n+\n+# AC_DISABLE_STATIC - set the default static flag to --disable-static\n+AC_DEFUN(AC_DISABLE_STATIC, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_STATIC(no)])\n+\n+\n+# AC_ENABLE_FAST_INSTALL - implement the --enable-fast-install flag\n+# Usage: AC_ENABLE_FAST_INSTALL[(DEFAULT)]\n+#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to\n+#   `yes'.\n+AC_DEFUN(AC_ENABLE_FAST_INSTALL, [dnl\n+define([AC_ENABLE_FAST_INSTALL_DEFAULT], ifelse($1, no, no, yes))dnl\n+AC_ARG_ENABLE(fast-install,\n+changequote(<<, >>)dnl\n+<<  --enable-fast-install[=PKGS]  optimize for fast installation [default=>>AC_ENABLE_FAST_INSTALL_DEFAULT],\n+changequote([, ])dnl\n+[p=${PACKAGE-default}\n+case \"$enableval\" in\n+yes) enable_fast_install=yes ;;\n+no) enable_fast_install=no ;;\n+*)\n+  enable_fast_install=no\n+  # Look at the argument we got.  We use all the common list separators.\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:,\"\n+  for pkg in $enableval; do\n+    if test \"X$pkg\" = \"X$p\"; then\n+      enable_fast_install=yes\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  ;;\n+esac],\n+enable_fast_install=AC_ENABLE_FAST_INSTALL_DEFAULT)dnl\n+])\n+\n+# AC_ENABLE_FAST_INSTALL - set the default to --disable-fast-install\n+AC_DEFUN(AC_DISABLE_FAST_INSTALL, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+AC_ENABLE_FAST_INSTALL(no)])\n+\n+# AC_PROG_LD - find the path to the GNU or non-GNU linker\n+AC_DEFUN(AC_PROG_LD,\n+[AC_ARG_WITH(gnu-ld,\n+[  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]],\n+test \"$withval\" = no || with_gnu_ld=yes, with_gnu_ld=no)\n+AC_REQUIRE([AC_PROG_CC])dnl\n+AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+AC_REQUIRE([AC_CANONICAL_BUILD])dnl\n+ac_prog=ld\n+if test \"$ac_cv_prog_gcc\" = yes; then\n+  # Check if gcc -print-prog-name=ld gives a path.\n+  AC_MSG_CHECKING([for ld used by GCC])\n+  ac_prog=`($CC -print-prog-name=ld) 2>&5`\n+  case \"$ac_prog\" in\n+    # Accept absolute paths.\n+changequote(,)dnl\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n+      re_direlt='/[^/][^/]*/\\.\\./'\n+changequote([,])dnl\n+      # Canonicalize the path of ld\n+      ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n+      while echo $ac_prog | grep \"$re_direlt\" > /dev/null 2>&1; do\n+\tac_prog=`echo $ac_prog| sed \"s%$re_direlt%/%\"`\n+      done\n+      test -z \"$LD\" && LD=\"$ac_prog\"\n+      ;;\n+  \"\")\n+    # If it fails, then pretend we aren't using GCC.\n+    ac_prog=ld\n+    ;;\n+  *)\n+    # If it is relative, then search for the first ld in PATH.\n+    with_gnu_ld=unknown\n+    ;;\n+  esac\n+elif test \"$with_gnu_ld\" = yes; then\n+  AC_MSG_CHECKING([for GNU ld])\n+else\n+  AC_MSG_CHECKING([for non-GNU ld])\n+fi\n+AC_CACHE_VAL(ac_cv_path_LD,\n+[if test -z \"$LD\"; then\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n+      ac_cv_path_LD=\"$ac_dir/$ac_prog\"\n+      # Check to see if the program is GNU ld.  I'd rather use --version,\n+      # but apparently some GNU ld's only accept -v.\n+      # Break only if it was the GNU/non-GNU ld that we prefer.\n+      if \"$ac_cv_path_LD\" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then\n+\ttest \"$with_gnu_ld\" != no && break\n+      else\n+\ttest \"$with_gnu_ld\" != yes && break\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+else\n+  ac_cv_path_LD=\"$LD\" # Let the user override the test with a path.\n+fi])\n+LD=\"$ac_cv_path_LD\"\n+if test -n \"$LD\"; then\n+  AC_MSG_RESULT($LD)\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+test -z \"$LD\" && AC_MSG_ERROR([no acceptable ld found in \\$PATH])\n+AC_PROG_LD_GNU\n+])\n+\n+AC_DEFUN(AC_PROG_LD_GNU,\n+[AC_CACHE_CHECK([if the linker ($LD) is GNU ld], ac_cv_prog_gnu_ld,\n+[# I'd rather use --version here, but apparently some GNU ld's only accept -v.\n+if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then\n+  ac_cv_prog_gnu_ld=yes\n+else\n+  ac_cv_prog_gnu_ld=no\n+fi])\n+])\n+\n+# AC_PROG_NM - find the path to a BSD-compatible name lister\n+AC_DEFUN(AC_PROG_NM,\n+[AC_MSG_CHECKING([for BSD-compatible nm])\n+AC_CACHE_VAL(ac_cv_path_NM,\n+[if test -n \"$NM\"; then\n+  # Let the user override the test.\n+  ac_cv_path_NM=\"$NM\"\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/nm || test -f $ac_dir/nm$ac_exeext ; then\n+      # Check to see if the nm accepts a BSD-compat flag.\n+      # Adding the `sed 1q' prevents false positives on HP-UX, which says:\n+      #   nm: unknown option \"B\" ignored\n+      if ($ac_dir/nm -B /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\tac_cv_path_NM=\"$ac_dir/nm -B\"\n+\tbreak\n+      elif ($ac_dir/nm -p /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\tac_cv_path_NM=\"$ac_dir/nm -p\"\n+\tbreak\n+      else\n+\tac_cv_path_NM=${ac_cv_path_NM=\"$ac_dir/nm\"} # keep the first match, but\n+\tcontinue # so that we can try to find one that supports BSD flags\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+  test -z \"$ac_cv_path_NM\" && ac_cv_path_NM=nm\n+fi])\n+NM=\"$ac_cv_path_NM\"\n+AC_MSG_RESULT([$NM])\n+])\n+\n+# AC_CHECK_LIBM - check for math library\n+AC_DEFUN(AC_CHECK_LIBM,\n+[AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+LIBM=\n+case \"$lt_target\" in\n+*-*-beos* | *-*-cygwin*)\n+  # These system don't have libm\n+  ;;\n+*-ncr-sysv4.3*)\n+  AC_CHECK_LIB(mw, _mwvalidcheckl, LIBM=\"-lmw\")\n+  AC_CHECK_LIB(m, main, LIBM=\"$LIBM -lm\")\n+  ;;\n+*)\n+  AC_CHECK_LIB(m, main, LIBM=\"-lm\")\n+  ;;\n+esac\n+])\n+\n+# AC_LIBLTDL_CONVENIENCE[(dir)] - sets LIBLTDL to the link flags for\n+# the libltdl convenience library, adds --enable-ltdl-convenience to\n+# the configure arguments.  Note that LIBLTDL is not AC_SUBSTed, nor\n+# is AC_CONFIG_SUBDIRS called.  If DIR is not provided, it is assumed\n+# to be `${top_builddir}/libltdl'.  Make sure you start DIR with\n+# '${top_builddir}/' (note the single quotes!) if your package is not\n+# flat, and, if you're not using automake, define top_builddir as\n+# appropriate in the Makefiles.\n+AC_DEFUN(AC_LIBLTDL_CONVENIENCE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+  case \"$enable_ltdl_convenience\" in\n+  no) AC_MSG_ERROR([this package needs a convenience libltdl]) ;;\n+  \"\") enable_ltdl_convenience=yes\n+      ac_configure_args=\"$ac_configure_args --enable-ltdl-convenience\" ;;\n+  esac\n+  LIBLTDL=ifelse($#,1,$1,['${top_builddir}/libltdl'])/libltdlc.la\n+  INCLTDL=ifelse($#,1,-I$1,['-I${top_builddir}/libltdl'])\n+])\n+\n+# AC_LIBLTDL_INSTALLABLE[(dir)] - sets LIBLTDL to the link flags for\n+# the libltdl installable library, and adds --enable-ltdl-install to\n+# the configure arguments.  Note that LIBLTDL is not AC_SUBSTed, nor\n+# is AC_CONFIG_SUBDIRS called.  If DIR is not provided, it is assumed\n+# to be `${top_builddir}/libltdl'.  Make sure you start DIR with\n+# '${top_builddir}/' (note the single quotes!) if your package is not\n+# flat, and, if you're not using automake, define top_builddir as\n+# appropriate in the Makefiles.\n+# In the future, this macro may have to be called after AC_PROG_LIBTOOL.\n+AC_DEFUN(AC_LIBLTDL_INSTALLABLE, [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl\n+  AC_CHECK_LIB(ltdl, main,\n+  [test x\"$enable_ltdl_install\" != xyes && enable_ltdl_install=no],\n+  [if test x\"$enable_ltdl_install\" = xno; then\n+     AC_MSG_WARN([libltdl not installed, but installation disabled])\n+   else\n+     enable_ltdl_install=yes\n+   fi\n+  ])\n+  if test x\"$enable_ltdl_install\" = x\"yes\"; then\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install\"\n+    LIBLTDL=ifelse($#,1,$1,['${top_builddir}/libltdl'])/libltdl.la\n+    INCLTDL=ifelse($#,1,-I$1,['-I${top_builddir}/libltdl'])\n+  else\n+    ac_configure_args=\"$ac_configure_args --enable-ltdl-install=no\"\n+    LIBLTDL=\"-lltdl\"\n+    INCLTDL=\n+  fi\n+])\n+\n+dnl old names\n+AC_DEFUN(AM_PROG_LIBTOOL, [indir([AC_PROG_LIBTOOL])])dnl\n+AC_DEFUN(AM_ENABLE_SHARED, [indir([AC_ENABLE_SHARED], $@)])dnl\n+AC_DEFUN(AM_ENABLE_STATIC, [indir([AC_ENABLE_STATIC], $@)])dnl\n+AC_DEFUN(AM_DISABLE_SHARED, [indir([AC_DISABLE_SHARED], $@)])dnl\n+AC_DEFUN(AM_DISABLE_STATIC, [indir([AC_DISABLE_STATIC], $@)])dnl\n+AC_DEFUN(AM_PROG_LD, [indir([AC_PROG_LD])])dnl\n+AC_DEFUN(AM_PROG_NM, [indir([AC_PROG_NM])])dnl\n+\n+dnl This is just to silence aclocal about the macro not being used\n+ifelse([AC_DISABLE_FAST_INSTALL])dnl\n+\n+# Do all the work for Automake.  This macro actually does too much --\n+# some checks are only needed if your package does certain things.\n+# But this isn't really a big deal.\n+\n+# serial 1\n+\n+dnl Usage:\n+dnl AM_INIT_AUTOMAKE(package,version, [no-define])\n+\n+AC_DEFUN(AM_INIT_AUTOMAKE,\n+[AC_REQUIRE([AC_PROG_INSTALL])\n+PACKAGE=[$1]\n+AC_SUBST(PACKAGE)\n+VERSION=[$2]\n+AC_SUBST(VERSION)\n+dnl test to see if srcdir already configured\n+if test \"`cd $srcdir && pwd`\" != \"`pwd`\" && test -f $srcdir/config.status; then\n+  AC_MSG_ERROR([source directory already configured; run \"make distclean\" there first])\n+fi\n+ifelse([$3],,\n+AC_DEFINE_UNQUOTED(PACKAGE, \"$PACKAGE\", [Name of package])\n+AC_DEFINE_UNQUOTED(VERSION, \"$VERSION\", [Version number of package]))\n+AC_REQUIRE([AM_SANITY_CHECK])\n+AC_REQUIRE([AC_ARG_PROGRAM])\n+dnl FIXME This is truly gross.\n+missing_dir=`cd $ac_aux_dir && pwd`\n+AM_MISSING_PROG(ACLOCAL, aclocal, $missing_dir)\n+AM_MISSING_PROG(AUTOCONF, autoconf, $missing_dir)\n+AM_MISSING_PROG(AUTOMAKE, automake, $missing_dir)\n+AM_MISSING_PROG(AUTOHEADER, autoheader, $missing_dir)\n+AM_MISSING_PROG(MAKEINFO, makeinfo, $missing_dir)\n+AC_REQUIRE([AC_PROG_MAKE_SET])])\n+\n+#\n+# Check to make sure that the build environment is sane.\n+#\n+\n+AC_DEFUN(AM_SANITY_CHECK,\n+[AC_MSG_CHECKING([whether build environment is sane])\n+# Just in case\n+sleep 1\n+echo timestamp > conftestfile\n+# Do `set' in a subshell so we don't clobber the current shell's\n+# arguments.  Must try -L first in case configure is actually a\n+# symlink; some systems play weird games with the mod time of symlinks\n+# (eg FreeBSD returns the mod time of the symlink's containing\n+# directory).\n+if (\n+   set X `ls -Lt $srcdir/configure conftestfile 2> /dev/null`\n+   if test \"[$]*\" = \"X\"; then\n+      # -L didn't work.\n+      set X `ls -t $srcdir/configure conftestfile`\n+   fi\n+   if test \"[$]*\" != \"X $srcdir/configure conftestfile\" \\\n+      && test \"[$]*\" != \"X conftestfile $srcdir/configure\"; then\n+\n+      # If neither matched, then we have a broken ls.  This can happen\n+      # if, for instance, CONFIG_SHELL is bash and it inherits a\n+      # broken ls alias from the environment.  This has actually\n+      # happened.  Such a system could not be considered \"sane\".\n+      AC_MSG_ERROR([ls -t appears to fail.  Make sure there is not a broken\n+alias in your environment])\n+   fi\n+\n+   test \"[$]2\" = conftestfile\n+   )\n+then\n+   # Ok.\n+   :\n+else\n+   AC_MSG_ERROR([newly created file is older than distributed files!\n+Check your system clock])\n+fi\n+rm -f conftest*\n+AC_MSG_RESULT(yes)])\n+\n+dnl AM_MISSING_PROG(NAME, PROGRAM, DIRECTORY)\n+dnl The program must properly implement --version.\n+AC_DEFUN(AM_MISSING_PROG,\n+[AC_MSG_CHECKING(for working $2)\n+# Run test in a subshell; some versions of sh will print an error if\n+# an executable is not found, even if stderr is redirected.\n+# Redirect stdin to placate older versions of autoconf.  Sigh.\n+if ($2 --version) < /dev/null > /dev/null 2>&1; then\n+   $1=$2\n+   AC_MSG_RESULT(found)\n+else\n+   $1=\"$3/missing $2\"\n+   AC_MSG_RESULT(missing)\n+fi\n+AC_SUBST($1)])\n+\n+# Like AC_CONFIG_HEADER, but automatically create stamp file.\n+\n+AC_DEFUN(AM_CONFIG_HEADER,\n+[AC_PREREQ([2.12])\n+AC_CONFIG_HEADER([$1])\n+dnl When config.status generates a header, we must update the stamp-h file.\n+dnl This file resides in the same directory as the config header\n+dnl that is generated.  We must strip everything past the first \":\",\n+dnl and everything past the last \"/\".\n+AC_OUTPUT_COMMANDS(changequote(<<,>>)dnl\n+ifelse(patsubst(<<$1>>, <<[^ ]>>, <<>>), <<>>,\n+<<test -z \"<<$>>CONFIG_HEADERS\" || echo timestamp > patsubst(<<$1>>, <<^\\([^:]*/\\)?.*>>, <<\\1>>)stamp-h<<>>dnl>>,\n+<<am_indx=1\n+for am_file in <<$1>>; do\n+  case \" <<$>>CONFIG_HEADERS \" in\n+  *\" <<$>>am_file \"*<<)>>\n+    echo timestamp > `echo <<$>>am_file | sed -e 's%:.*%%' -e 's%[^/]*$%%'`stamp-h$am_indx\n+    ;;\n+  esac\n+  am_indx=`expr \"<<$>>am_indx\" + 1`\n+done<<>>dnl>>)\n+changequote([,]))])\n+\n+# Add --enable-maintainer-mode option to configure.\n+# From Jim Meyering\n+\n+# serial 1\n+\n+AC_DEFUN(AM_MAINTAINER_MODE,\n+[AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])\n+  dnl maintainer-mode is disabled by default\n+  AC_ARG_ENABLE(maintainer-mode,\n+[  --enable-maintainer-mode enable make rules and dependencies not useful\n+                          (and sometimes confusing) to the casual installer],\n+      USE_MAINTAINER_MODE=$enableval,\n+      USE_MAINTAINER_MODE=no)\n+  AC_MSG_RESULT($USE_MAINTAINER_MODE)\n+  AM_CONDITIONAL(MAINTAINER_MODE, test $USE_MAINTAINER_MODE = yes)\n+  MAINT=$MAINTAINER_MODE_TRUE\n+  AC_SUBST(MAINT)dnl\n+]\n+)\n+\n+# Define a conditional.\n+\n+AC_DEFUN(AM_CONDITIONAL,\n+[AC_SUBST($1_TRUE)\n+AC_SUBST($1_FALSE)\n+if $2; then\n+  $1_TRUE=\n+  $1_FALSE='#'\n+else\n+  $1_TRUE='#'\n+  $1_FALSE=\n+fi])\n+"}, {"sha": "1e7613efdb44b769f318db57f0ddcf6acc8d2c3c", "filename": "libjava/libltdl/config.h.in", "status": "added", "additions": 80, "deletions": 0, "changes": 80, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Fconfig.h.in?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,80 @@\n+/* config.h.in.  Generated automatically from configure.in by autoheader.  */\n+\n+/* Define to empty if the keyword does not work.  */\n+#undef const\n+\n+/* Define as __inline if that's what the C compiler calls it.  */\n+#undef inline\n+\n+/* Define if you have the ANSI C header files.  */\n+#undef STDC_HEADERS\n+\n+/* Define if you have the libdl library or equivalent.  */\n+#undef HAVE_LIBDL\n+\n+/* Define if you have the GNU dld library.  */\n+#undef HAVE_DLD\n+\n+/* Define if you have the shl_load function.  */\n+#undef HAVE_SHL_LOAD\n+\n+/* Define if you have the dlerror function.  */\n+#undef HAVE_DLERROR\n+\n+/* Define if you have the index function.  */\n+#undef HAVE_INDEX\n+\n+/* Define if you have the rindex function.  */\n+#undef HAVE_RINDEX\n+\n+/* Define if you have the strchr function.  */\n+#undef HAVE_STRCHR\n+\n+/* Define if you have the strrchr function.  */\n+#undef HAVE_STRRCHR\n+\n+/* Define if you have the <ctype.h> header file.  */\n+#undef HAVE_CTYPE_H\n+\n+/* Define if you have the <dl.h> header file.  */\n+#undef HAVE_DL_H\n+\n+/* Define if you have the <dld.h> header file.  */\n+#undef HAVE_DLD_H\n+\n+/* Define if you have the <dlfcn.h> header file.  */\n+#undef HAVE_DLFCN_H\n+\n+/* Define if you have the <malloc.h> header file.  */\n+#undef HAVE_MALLOC_H\n+\n+/* Define if you have the <memory.h> header file.  */\n+#undef HAVE_MEMORY_H\n+\n+/* Define if you have the <stdio.h> header file.  */\n+#undef HAVE_STDIO_H\n+\n+/* Define if you have the <stdlib.h> header file.  */\n+#undef HAVE_STDLIB_H\n+\n+/* Define if you have the <string.h> header file.  */\n+#undef HAVE_STRING_H\n+\n+/* Define if you have the <strings.h> header file.  */\n+#undef HAVE_STRINGS_H\n+\n+/* Define to the extension used for shared libraries, say, .so.  */\n+#undef LTDL_SHLIB_EXT\n+\n+/* Define to the name of the environment variable that determines the dynamic library search path.  */\n+#undef LTDL_SHLIBPATH_VAR\n+\n+/* Define to the sub-directory in which libtool stores uninstalled libraries.  */\n+#undef LTDL_OBJDIR\n+\n+/* Define if libtool can extract symbol lists from object files.  */\n+#undef HAVE_PRELOADED_SYMBOLS\n+\n+/* Define if dlsym() requires a leading underscode in symbol names.  */\n+#undef NEED_USCORE\n+"}, {"sha": "6d61b6300893dd6838fcbbfbcac9d2b7339db580", "filename": "libjava/libltdl/configure", "status": "added", "additions": 3078, "deletions": 0, "changes": 3078, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Fconfigure?ref=06f56737169a939227bfac13f099484ad09b3bf4"}, {"sha": "2cf4149e2f3a0b600407000089745a6e5a50cfc8", "filename": "libjava/libltdl/configure.in", "status": "added", "additions": 373, "deletions": 0, "changes": 373, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Fconfigure.in?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,373 @@\n+dnl Process this file with autoconf to create configure.\n+\n+AC_INIT(ltdl.c)\n+\n+if test -z \"$enable_ltdl_install$enable_ltdl_convenience\"; then\n+  if test -f ${srcdir}/ltconfig && test -f ${srcdir}/ltmain.sh; then\n+    # if libltdl is libtoolized, it is assumed to be stand-alone and\n+    # installed unless the command line overrides it (tested above)\n+    enable_ltdl_install=yes\n+  else\n+    AC_MSG_WARN([*** The top-level configure must select either])\n+    AC_MSG_WARN([*** [A\"\"C_LIBLTDL_INSTALLABLE] or [A\"\"C_LIBLTDL_CONVENIENCE].])\n+    AC_MSG_ERROR([*** Maybe you want to --enable-ltdl-install?])\n+  fi\n+fi\n+\n+AM_INIT_AUTOMAKE(libltdl,1.0,-)\n+AM_CONFIG_HEADER(config.h)\n+AM_MAINTAINER_MODE\n+\n+AC_PROG_CC\n+AC_C_CONST\n+AC_C_INLINE\n+AM_PROG_LIBTOOL\n+AC_SUBST(LIBTOOL_DEPS)\n+\n+AC_ARG_ENABLE(ltdl-install,\n+[  --enable-ltdl-install   install libltdl])\n+\n+AM_CONDITIONAL(INSTALL_LTDL, test x\"${enable_ltdl_install-no}\" != xno)\n+AM_CONDITIONAL(CONVENIENCE_LTDL, test x\"${enable_ltdl_convenience-no}\" != xno)\n+\n+dnl Read the libtool configuration\n+rm -f conftest\n+./libtool --config > conftest\n+. ./conftest\n+rm -f conftest\n+\n+AC_CACHE_CHECK([which extension is used for shared libraries],\n+  libltdl_cv_shlibext, [dnl\n+(\n+  last=\n+  for spec in $library_names_spec; do\n+    last=\"$spec\"\n+  done\n+changequote(, )\n+  echo \"$last\" | sed 's/\\[.*\\]//;s/^[^.]*//;s/\\$.*$//;s/\\.$//' > conftest\n+changequote([, ])\n+)\n+libltdl_cv_shlibext=`cat conftest`\n+rm -f conftest\n+])\n+if test -n \"$libltdl_cv_shlibext\"; then\n+  AC_DEFINE_UNQUOTED(LTDL_SHLIB_EXT, \"$libltdl_cv_shlibext\",\n+    [Define to the extension used for shared libraries, say, \".so\". ])\n+fi\n+\n+AC_CACHE_CHECK([which variable specifies run-time library path],\n+  libltdl_cv_shlibpath_var, [libltdl_cv_shlibpath_var=\"$shlibpath_var\"])\n+if test -n \"$libltdl_cv_shlibpath_var\"; then\n+  AC_DEFINE_UNQUOTED(LTDL_SHLIBPATH_VAR, \"$libltdl_cv_shlibpath_var\",\n+    [Define to the name of the environment variable that determines the dynamic library search path. ])\n+fi\n+\n+AC_CACHE_CHECK([for objdir],\n+  libltdl_cv_objdir, [libltdl_cv_objdir=\"$objdir\"])\n+test -z \"$libltdl_cv_objdir\" && libltdl_cv_objdir=\".libs\"\n+AC_DEFINE_UNQUOTED(LTDL_OBJDIR, \"$libltdl_cv_objdir/\",\n+  [Define to the sub-directory in which libtool stores uninstalled libraries. ])\n+\n+AC_HEADER_STDC\n+AC_CHECK_HEADERS(malloc.h memory.h stdlib.h stdio.h ctype.h dlfcn.h dl.h dld.h)\n+AC_CHECK_HEADERS(string.h strings.h, break)\n+AC_CHECK_FUNCS(strchr index, break)\n+AC_CHECK_FUNCS(strrchr rindex, break)\n+\n+AC_CACHE_CHECK([whether libtool supports -dlopen/-dlpreopen],\n+       libltdl_cv_preloaded_symbols, [dnl\n+  if test -n \"$global_symbol_pipe\"; then\n+    libltdl_cv_preloaded_symbols=yes\n+  else\n+    libltdl_cv_preloaded_symbols=no\n+  fi\n+])\n+if test x\"$libltdl_cv_preloaded_symbols\" = x\"yes\"; then\n+  AC_DEFINE(HAVE_PRELOADED_SYMBOLS, 1,\n+    [Define if libtool can extract symbol lists from object files. ])\n+fi\n+\n+LIBADD_DL=\n+AC_CHECK_LIB(dl, dlopen, [AC_DEFINE(HAVE_LIBDL, 1) LIBADD_DL=\"-ldl\"],\n+[AC_CHECK_FUNC(dlopen, [AC_DEFINE(HAVE_LIBDL, 1)])])\n+AC_CHECK_FUNC(shl_load, [AC_DEFINE(HAVE_SHL_LOAD, 1)],\n+[AC_CHECK_LIB(dld, shl_load, [AC_DEFINE(HAVE_SHL_LOAD, 1) LIBADD_DL=\"$LIBADD_DL -ldld\"])])\n+AC_CHECK_LIB(dld, dld_link, [AC_DEFINE(HAVE_DLD, 1)dnl\n+test \"x$ac_cv_lib_dld_shl_load\" = yes || LIBADD_DL=\"$LIBADD_DL -ldld\"])\n+AC_SUBST(LIBADD_DL)\n+\n+if test \"x$ac_cv_func_dlopen\" = xyes || test \"x$ac_cv_lib_dl_dlopen\" = xyes; then\n+ LIBS_SAVE=\"$LIBS\"\n+ LIBS=\"$LIBS $LIBADD_DL\"\n+ AC_CHECK_FUNCS(dlerror)\n+ LIBS=\"$LIBS_SAVE\"\n+fi\n+\n+dnl Check for command to grab the raw symbol name followed\n+dnl by C symbol name from nm.\n+AC_REQUIRE([AC_CANONICAL_HOST])dnl\n+AC_REQUIRE([AC_PROG_NM])dnl\n+# Check for command to grab the raw symbol name followed by C symbol from nm.\n+AC_MSG_CHECKING([command to parse $NM output])\n+AC_CACHE_VAL(ac_cv_sys_global_symbol_pipe,\n+[# These are sane defaults that work on at least a few old systems.\n+# {They come from Ultrix.  What could be older than Ultrix?!! ;)}\n+\n+changequote(,)dnl\n+# Character class describing NM global symbol codes.\n+ac_symcode='[BCDEGRST]'\n+\n+# Regexp to match symbols that can be accessed directly from C.\n+ac_sympat='\\([_A-Za-z][_A-Za-z0-9]*\\)'\n+\n+# Transform the above into a raw symbol and a C symbol.\n+ac_symxfrm='\\1 \\2\\3 \\3'\n+\n+# Transform an extracted symbol line into a proper C declaration\n+ac_global_symbol_to_cdecl=\"sed -n -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n+\n+# Define system-specific variables.\n+case \"$host_os\" in\n+aix*)\n+  ac_symcode='[BCDT]'\n+  ;;\n+cygwin* | mingw*)\n+  ac_symcode='[ABCDGISTW]'\n+  ;;\n+hpux*)\n+  ac_global_symbol_to_cdecl=\"sed -n -e 's/^T .* \\(.*\\)$/extern char \\1();/p' -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n+  ;;\n+irix*)\n+  ac_symcode='[BCDEGRST]'\n+  ;;\n+solaris*)\n+  ac_symcode='[BDT]'\n+  ;;\n+esac\n+\n+# If we're using GNU nm, then use its standard symbol codes.\n+if $NM -V 2>&1 | egrep '(GNU|with BFD)' > /dev/null; then\n+  ac_symcode='[ABCDGISTW]'\n+fi\n+changequote([,])dnl\n+\n+# Try without a prefix undercore, then with it.\n+for ac_symprfx in \"\" \"_\"; do\n+\n+  ac_cv_sys_global_symbol_pipe=\"sed -n -e 's/^.*[ \t]\\($ac_symcode\\)[ \t][ \t]*\\($ac_symprfx\\)$ac_sympat$/$ac_symxfrm/p'\"\n+\n+  # Check to see that the pipe works correctly.\n+  ac_pipe_works=no\n+  rm -f conftest.$ac_ext\n+  cat > conftest.$ac_ext <<EOF\n+#ifdef __cplusplus\n+extern \"C\" {\n+#endif\n+char nm_test_var;\n+void nm_test_func(){}\n+#ifdef __cplusplus\n+}\n+#endif\n+int main(){nm_test_var='a';nm_test_func;return 0;}\n+EOF\n+\n+  if AC_TRY_EVAL(ac_compile); then\n+    # Now try to grab the symbols.\n+    ac_nlist=conftest.nm\n+  \n+    if AC_TRY_EVAL(NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) && test -s \"$ac_nlist\"; then\n+\n+      # Try sorting and uniquifying the output.\n+      if sort \"$ac_nlist\" | uniq > \"$ac_nlist\"T; then\n+\tmv -f \"$ac_nlist\"T \"$ac_nlist\"\n+      else\n+\trm -f \"$ac_nlist\"T\n+      fi\n+\n+      # Make sure that we snagged all the symbols we need.\n+      if egrep ' nm_test_var$' \"$ac_nlist\" >/dev/null; then\n+\tif egrep ' nm_test_func$' \"$ac_nlist\" >/dev/null; then\n+\t  cat <<EOF > conftest.c\n+#ifdef __cplusplus\n+extern \"C\" {\n+#endif\n+\n+EOF\n+\t  # Now generate the symbol file.\n+\t  eval \"$ac_global_symbol_to_cdecl\"' < \"$ac_nlist\" >> conftest.c'\n+\n+\t  cat <<EOF >> conftest.c\n+#if defined (__STDC__) && __STDC__\n+# define lt_ptr_t void *\n+#else\n+# define lt_ptr_t char *\n+# define const\n+#endif\n+\n+/* The mapping between symbol names and symbols. */\n+const struct {\n+  const char *name;\n+  lt_ptr_t address;\n+}\n+changequote(,)dnl\n+lt_preloaded_symbols[] =\n+changequote([,])dnl\n+{\n+EOF\n+\tsed 's/^. \\(.*\\) \\(.*\\)$/  {\"\\2\", (lt_ptr_t) \\&\\2},/' < \"$ac_nlist\" >> conftest.c\n+\tcat <<\\EOF >> conftest.c\n+  {0, (lt_ptr_t) 0}\n+};\n+\n+#ifdef __cplusplus\n+}\n+#endif\n+EOF\n+\t  # Now try linking the two files.\n+\t  mv conftest.$ac_objext conftstm.$ac_objext\n+\t  ac_save_LIBS=\"$LIBS\"\n+\t  ac_save_CFLAGS=\"$CFLAGS\"\n+\t  LIBS=\"conftstm.$ac_objext\"\n+\t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n+\t  if AC_TRY_EVAL(ac_link) && test -s conftest; then\n+\t    ac_pipe_works=yes\n+\t  else\n+\t    echo \"configure: failed program was:\" >&AC_FD_CC\n+\t    cat conftest.c >&AC_FD_CC\n+\t  fi\n+\t  LIBS=\"$ac_save_LIBS\"\n+\t  CFLAGS=\"$ac_save_CFLAGS\"\n+\telse\n+\t  echo \"cannot find nm_test_func in $ac_nlist\" >&AC_FD_CC\n+\tfi\n+      else\n+\techo \"cannot find nm_test_var in $ac_nlist\" >&AC_FD_CC\n+      fi\n+    else\n+      echo \"cannot run $ac_cv_sys_global_symbol_pipe\" >&AC_FD_CC\n+    fi\n+  else\n+    echo \"$progname: failed program was:\" >&AC_FD_CC\n+    cat conftest.c >&AC_FD_CC\n+  fi\n+  rm -rf conftest* conftst*\n+\n+  # Do not use the global_symbol_pipe unless it works.\n+  if test \"$ac_pipe_works\" = yes; then\n+    if test x\"$ac_symprfx\" = x\"_\"; then\n+      ac_cv_sys_symbol_underscore=yes\n+    else\n+      ac_cv_sys_symbol_underscore=no\n+    fi\n+    break\n+  else\n+    ac_cv_sys_global_symbol_pipe=\n+  fi\n+done\n+])\n+\n+ac_result=yes\n+if test -z \"$ac_cv_sys_global_symbol_pipe\"; then\n+   ac_result=no\n+fi\n+AC_MSG_RESULT($ac_result)\n+\n+dnl does the compiler prefix global symbols with an underscore?\n+AC_MSG_CHECKING([for _ prefix in compiled symbols])\n+AC_CACHE_VAL(ac_cv_sys_symbol_underscore,\n+[ac_cv_sys_symbol_underscore=no\n+cat > conftest.$ac_ext <<EOF\n+void nm_test_func(){}\n+int main(){nm_test_func;return 0;}\n+EOF\n+if AC_TRY_EVAL(ac_compile); then\n+  # Now try to grab the symbols.\n+  ac_nlist=conftest.nm\n+  if AC_TRY_EVAL(NM conftest.$ac_objext \\| $ac_cv_sys_global_symbol_pipe \\> $ac_nlist) && test -s \"$ac_nlist\"; then\n+    # See whether the symbols have a leading underscore.\n+    if egrep '^. _nm_test_func' \"$ac_nlist\" >/dev/null; then\n+      ac_cv_sys_symbol_underscore=yes\n+    else\n+      if egrep '^. nm_test_func ' \"$ac_nlist\" >/dev/null; then\n+\t:\n+      else\n+\techo \"configure: cannot find nm_test_func in $ac_nlist\" >&AC_FD_CC\n+      fi\n+    fi\n+  else\n+    echo \"configure: cannot run $ac_cv_sys_global_symbol_pipe\" >&AC_FD_CC\n+  fi\n+else\n+  echo \"configure: failed program was:\" >&AC_FD_CC\n+  cat conftest.c >&AC_FD_CC\n+fi\n+rm -rf conftest*\n+])\n+AC_MSG_RESULT($ac_cv_sys_symbol_underscore)\n+\n+if test x\"$ac_cv_sys_symbol_underscore\" = xyes; then\n+  if test x\"$ac_cv_func_dlopen\" = xyes ||\n+     test x\"$ac_cv_lib_dl_dlopen\" = xyes ; then\n+\tAC_CACHE_CHECK([whether we have to add an underscore for dlsym],\n+\t\tlibltdl_cv_need_uscore, [dnl\n+\t\tAC_TRY_RUN([\n+#if HAVE_DLFCN_H\n+#include <dlfcn.h>\n+#endif\n+\n+#include <stdio.h>\n+\n+#ifdef RTLD_GLOBAL\n+# define LTDL_GLOBAL\tRTLD_GLOBAL\n+#else\n+# ifdef DL_GLOBAL\n+#  define LTDL_GLOBAL\tDL_GLOBAL\n+# else\n+#  define LTDL_GLOBAL\t0\n+# endif\n+#endif\n+\n+/* We may have to define LTDL_LAZY_OR_NOW in the command line if we\n+   find out it does not work in some platform. */\n+#ifndef LTDL_LAZY_OR_NOW\n+# ifdef RTLD_LAZY\n+#  define LTDL_LAZY_OR_NOW\tRTLD_LAZY\n+# else\n+#  ifdef DL_LAZY\n+#   define LTDL_LAZY_OR_NOW\tDL_LAZY\n+#  else\n+#   ifdef RTLD_NOW\n+#    define LTDL_LAZY_OR_NOW\tRTLD_NOW\n+#   else\n+#    ifdef DL_NOW\n+#     define LTDL_LAZY_OR_NOW\tDL_NOW\n+#    else\n+#     define LTDL_LAZY_OR_NOW\t0\n+#    endif\n+#   endif\n+#  endif\n+# endif\n+#endif\n+\n+fnord() { int i=42;}\n+main() { void *self, *ptr1, *ptr2; self=dlopen(0,LTDL_GLOBAL|LTDL_LAZY_OR_NOW);\n+    if(self) { ptr1=dlsym(self,\"fnord\"); ptr2=dlsym(self,\"_fnord\");\n+\t       if(ptr1 && !ptr2) { dlclose(self); exit(0); } } exit(1); } \n+],\tlibltdl_cv_need_uscore=no, libltdl_cv_need_uscore=yes,\n+\tlibltdl_cv_need_uscore=cross\n+)])\n+  fi\n+fi\n+\n+if test x\"$libltdl_cv_need_uscore\" = xyes; then\n+  AC_DEFINE(NEED_USCORE, 1,\n+    [Define if dlsym() requires a leading underscode in symbol names. ])\n+fi\n+\n+dnl Output the makefile\n+AC_OUTPUT(Makefile)\n+\n+# Local Variables:\n+# mode:shell-script\n+# sh-indentation:2\n+# End:"}, {"sha": "4d75e02e51fd902958bb1bab884484a44bfb40f2", "filename": "libjava/libltdl/ltdl.c", "status": "added", "additions": 1621, "deletions": 0, "changes": 1621, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fltdl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fltdl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Fltdl.c?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,1621 @@\n+/* ltdl.c -- system independent dlopen wrapper\n+   Copyright (C) 1998-1999 Free Software Foundation, Inc.\n+   Originally by Thomas Tanner <tanner@ffii.org>\n+   This file is part of GNU Libtool.\n+\n+This library is free software; you can redistribute it and/or\n+modify it under the terms of the GNU Library General Public\n+License as published by the Free Software Foundation; either\n+version 2 of the License, or (at your option) any later version.\n+\n+As a special exception to the GNU Library General Public License,\n+if you distribute this file as part of a program that uses GNU libtool\n+to create libraries and programs, you may include it under the same\n+distribution terms that you use for the rest of that program.\n+\n+This library is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+Library General Public License for more details.\n+\n+You should have received a copy of the GNU Library General Public\n+License along with this library; if not, write to the Free Software\n+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA\n+02111-1307  USA\n+*/\n+\n+#define _LTDL_COMPILE_\n+\n+#if HAVE_CONFIG_H\n+#include <config.h>\n+#endif\n+\n+#if HAVE_STRING_H\n+#include <string.h>\n+#endif\n+\n+#if HAVE_STRINGS_H\n+#include <strings.h>\n+#endif\n+\n+#if HAVE_CTYPE_H\n+#include <ctype.h>\n+#endif\n+\n+#if HAVE_MALLOC_H\n+#include <malloc.h>\n+#endif\n+\n+#if HAVE_MEMORY_H\n+#include <memory.h>\n+#endif\n+\n+#if HAVE_STDLIB_H\n+#include <stdlib.h>\n+#endif\n+\n+#if HAVE_STDIO_H\n+#include <stdio.h>\n+#endif\n+\n+#include \"ltdl.h\"\n+\n+/* max. filename length */\n+#ifndef LTDL_FILENAME_MAX\n+#define LTDL_FILENAME_MAX 1024\n+#endif\n+\n+#undef\tLTDL_READTEXT_MODE\n+/* fopen() mode flags for reading a text file */\n+#ifdef _WIN32\n+#define LTDL_READTEXT_MODE \"rt\"\n+#else\n+#define LTDL_READTEXT_MODE \"r\"\n+#endif\n+\n+#undef\tLTDL_SYMBOL_LENGTH\n+/* This is the maximum symbol size that won't require malloc/free */\n+#define LTDL_SYMBOL_LENGTH\t128\n+\n+#undef\tLTDL_SYMBOL_OVERHEAD\n+/* This accounts for the _LTX_ separator */\n+#define LTDL_SYMBOL_OVERHEAD\t5\n+\n+static const char objdir[] = LTDL_OBJDIR;\n+#ifdef\tLTDL_SHLIB_EXT\n+static const char shlib_ext[] = LTDL_SHLIB_EXT;\n+#endif\n+\n+static const char unknown_error[] = \"unknown error\";\n+static const char dlopen_not_supported_error[] = \"dlopen support not available\";\n+static const char file_not_found_error[] = \"file not found\";\n+static const char no_symbols_error[] = \"no symbols defined\";\n+static const char cannot_open_error[] = \"can't open the module\";\n+static const char cannot_close_error[] = \"can't close the module\";\n+static const char symbol_error[] = \"symbol not found\";\n+static const char memory_error[] = \"not enough memory\";\n+static const char invalid_handle_error[] = \"invalid handle\";\n+static const char buffer_overflow_error[] = \"internal buffer overflow\";\n+static const char shutdown_error[] = \"library already shutdown\";\n+\n+#ifndef HAVE_PRELOADED_SYMBOLS\n+/* If libtool won't define it, we'd better do */\n+const lt_dlsymlist lt_preloaded_symbols[1] = { { 0, 0 } };\n+#endif\n+\n+static const char *last_error = 0;\n+\n+lt_ptr_t (*lt_dlmalloc) LTDL_PARAMS((size_t size)) = (lt_ptr_t(*)LTDL_PARAMS((size_t)))malloc;\n+void\t (*lt_dlfree)  LTDL_PARAMS((lt_ptr_t ptr)) = (void(*)LTDL_PARAMS((lt_ptr_t)))free;\n+\n+typedef struct lt_dltype_t {\n+\tstruct lt_dltype_t *next;\n+\tconst char *sym_prefix;\t/* prefix for symbols */\n+\tint (*mod_init) LTDL_PARAMS((void));\n+\tint (*mod_exit) LTDL_PARAMS((void));\n+\tint (*lib_open) LTDL_PARAMS((lt_dlhandle handle, const char *filename));\n+\tint (*lib_close) LTDL_PARAMS((lt_dlhandle handle));\n+\tlt_ptr_t (*find_sym) LTDL_PARAMS((lt_dlhandle handle, const char *symbol));\n+} lt_dltype_t;\n+\n+#define LTDL_TYPE_TOP 0\n+\n+typedef\tstruct lt_dlhandle_t {\n+\tstruct lt_dlhandle_t *next;\n+\tlt_dltype_t *type;\t/* dlopening interface */\n+\tchar\t*filename;\t/* file name */\n+\tchar\t*name;\t\t/* module name */\n+\tint\tusage;\t\t/* usage */\n+\tint\tdepcount;\t/* number of dependencies */\n+\tlt_dlhandle *deplibs;\t/* dependencies */\n+\tlt_ptr_t handle;\t/* system handle */\n+\tlt_ptr_t system;\t/* system specific data */\n+} lt_dlhandle_t;\n+\n+#undef strdup\n+#define strdup xstrdup\n+\n+static inline char *\n+strdup(str)\n+\tconst char *str;\n+{\n+\tchar *tmp;\n+\n+\tif (!str)\n+\t\treturn 0;\n+\ttmp = (char*) lt_dlmalloc(strlen(str)+1);\n+\tif (tmp)\n+\t\tstrcpy(tmp, str);\n+\treturn tmp;\n+}\n+\n+#if ! HAVE_STRCHR\n+\n+# if HAVE_INDEX\n+\n+#  define strchr index\n+\n+# else\n+\n+#  define strchr xstrchr\n+\n+static inline const char*\n+strchr(str, ch)\n+\tconst char *str;\n+\tint ch;\n+{\n+\tconst char *p;\n+\n+\tfor (p = str; *p != (char)ch && *p != '\\0'; p++)\n+\t\t/*NOWORK*/;\n+\n+\treturn (*p == (char)ch) ? p : 0;\n+}\n+\n+# endif\n+\n+#endif\n+\n+#if ! HAVE_STRRCHR\n+\n+# if HAVE_RINDEX\n+\n+#  define strrchr rindex\n+\n+# else\n+\n+#  define strrchr xstrrchr\n+\n+static inline const char*\n+strrchr(str, ch)\n+\tconst char *str;\n+\tint ch;\n+{\n+\tconst char *p;\n+\n+\tfor (p = str; *p != '\\0'; p++)\n+\t\t/*NOWORK*/;\n+\n+\twhile (*p != (char)ch && p >= str)\n+\t\tp--;\n+\n+\treturn (*p == (char)ch) ? p : 0;\n+}\n+\n+# endif\n+\n+#endif\n+\n+#if HAVE_LIBDL\n+\n+/* dynamic linking with dlopen/dlsym */\n+\n+#if HAVE_DLFCN_H\n+# include <dlfcn.h>\n+#endif\n+\n+#ifdef RTLD_GLOBAL\n+# define LTDL_GLOBAL\tRTLD_GLOBAL\n+#else\n+# ifdef DL_GLOBAL\n+#  define LTDL_GLOBAL\tDL_GLOBAL\n+# else\n+#  define LTDL_GLOBAL\t0\n+# endif\n+#endif\n+\n+/* We may have to define LTDL_LAZY_OR_NOW in the command line if we\n+   find out it does not work in some platform. */\n+#ifndef LTDL_LAZY_OR_NOW\n+# ifdef RTLD_LAZY\n+#  define LTDL_LAZY_OR_NOW\tRTLD_LAZY\n+# else\n+#  ifdef DL_LAZY\n+#   define LTDL_LAZY_OR_NOW\tDL_LAZY\n+#  else\n+#   ifdef RTLD_NOW\n+#    define LTDL_LAZY_OR_NOW\tRTLD_NOW\n+#   else\n+#    ifdef DL_NOW\n+#     define LTDL_LAZY_OR_NOW\tDL_NOW\n+#    else\n+#     define LTDL_LAZY_OR_NOW\t0\n+#    endif\n+#   endif\n+#  endif\n+# endif\n+#endif\n+\n+static int\n+sys_dl_init LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_dl_exit LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_dl_open (handle, filename)\n+\tlt_dlhandle handle;\n+\tconst char *filename;\n+{\n+\thandle->handle = dlopen(filename, LTDL_GLOBAL | LTDL_LAZY_OR_NOW);\n+\tif (!handle->handle) {\n+#if HAVE_DLERROR\n+\t\tlast_error = dlerror();\n+#else\n+\t\tlast_error = cannot_open_error;\n+#endif\n+\t\treturn 1;\n+\t}\n+\treturn 0;\n+}\n+\n+static int\n+sys_dl_close (handle)\n+\tlt_dlhandle handle;\n+{\n+\tif (dlclose(handle->handle) != 0) {\n+#if HAVE_DLERROR\n+\t\tlast_error = dlerror();\n+#else\n+\t\tlast_error = cannot_close_error;\n+#endif\n+\t\treturn 1;\n+\t}\n+\treturn 0;\n+}\n+\n+static lt_ptr_t\n+sys_dl_sym (handle, symbol)\n+\tlt_dlhandle handle;\n+\tconst char *symbol;\n+{\n+\tlt_ptr_t address = dlsym(handle->handle, symbol);\n+\t\n+\tif (!address)\n+#if HAVE_DLERROR\n+\t\tlast_error = dlerror();\n+#else\n+\t\tlast_error = symbol_error;\n+#endif\n+\treturn address;\n+}\n+\n+static\n+lt_dltype_t\n+#ifdef NEED_USCORE\n+sys_dl = { LTDL_TYPE_TOP, \"_\", sys_dl_init, sys_dl_exit,\n+\tsys_dl_open, sys_dl_close, sys_dl_sym };\n+#else\n+sys_dl = { LTDL_TYPE_TOP, 0, sys_dl_init, sys_dl_exit,\n+\tsys_dl_open, sys_dl_close, sys_dl_sym };\n+#endif\n+\n+#undef LTDL_TYPE_TOP\n+#define LTDL_TYPE_TOP &sys_dl\n+\n+#endif\n+\n+#if HAVE_SHL_LOAD\n+\n+/* dynamic linking with shl_load (HP-UX) (comments from gmodule) */\n+\n+#ifdef HAVE_DL_H\n+#include <dl.h>\n+#endif\n+\n+/* some flags are missing on some systems, so we provide\n+ * harmless defaults.\n+ *\n+ * Mandatory:\n+ * BIND_IMMEDIATE  - Resolve symbol references when the library is loaded.\n+ * BIND_DEFERRED   - Delay code symbol resolution until actual reference.\n+ *\n+ * Optionally:\n+ * BIND_FIRST\t   - Place the library at the head of the symbol search order.\n+ * BIND_NONFATAL   - The default BIND_IMMEDIATE behavior is to treat all unsatisfied\n+ *\t\t     symbols as fatal.\tThis flag allows binding of unsatisfied code\n+ *\t\t     symbols to be deferred until use.\n+ *\t\t     [Perl: For certain libraries, like DCE, deferred binding often\n+ *\t\t     causes run time problems.\tAdding BIND_NONFATAL to BIND_IMMEDIATE\n+ *\t\t     still allows unresolved references in situations like this.]\n+ * BIND_NOSTART\t   - Do not call the initializer for the shared library when the\n+ *\t\t     library is loaded, nor on a future call to shl_unload().\n+ * BIND_VERBOSE\t   - Print verbose messages concerning possible unsatisfied symbols.\n+ *\n+ * hp9000s700/hp9000s800:\n+ * BIND_RESTRICTED - Restrict symbols visible by the library to those present at\n+ *\t\t     library load time.\n+ * DYNAMIC_PATH\t   - Allow the loader to dynamically search for the library specified\n+ *\t\t     by the path argument.\n+ */\n+\n+#ifndef\tDYNAMIC_PATH\n+#define\tDYNAMIC_PATH\t0\n+#endif\t/* DYNAMIC_PATH */\n+#ifndef\tBIND_RESTRICTED\n+#define\tBIND_RESTRICTED\t0\n+#endif\t/* BIND_RESTRICTED */\n+\n+#define\tLTDL_BIND_FLAGS\t(BIND_IMMEDIATE | BIND_NONFATAL | DYNAMIC_PATH)\n+\n+static int\n+sys_shl_init LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_shl_exit LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_shl_open (handle, filename)\n+\tlt_dlhandle handle;\n+\tconst char *filename;\n+{\n+\thandle->handle = shl_load(filename, LTDL_BIND_FLAGS, 0L);\n+\tif (!handle->handle) {\n+\t\tlast_error = cannot_open_error;\n+\t\treturn 1;\n+\t}\n+\treturn 0;\n+}\n+\n+static int\n+sys_shl_close (handle)\n+\tlt_dlhandle handle;\n+{\n+\tif (shl_unload((shl_t) (handle->handle)) != 0) {\n+\t\tlast_error = cannot_close_error;\n+\t\treturn 1;\n+\t}\n+\treturn 0;\n+}\n+\n+static lt_ptr_t\n+sys_shl_sym (handle, symbol)\n+\tlt_dlhandle handle;\n+\tconst char *symbol;\n+{\n+\tlt_ptr_t address;\n+\n+\tif (handle->handle && shl_findsym((shl_t*) &(handle->handle),\n+\t    symbol, TYPE_UNDEFINED, &address) == 0)\n+\t\tif (address)\n+\t\t\treturn address;\n+\tlast_error = symbol_error;\n+\treturn 0;\n+}\n+\n+static\n+lt_dltype_t\n+sys_shl = { LTDL_TYPE_TOP, 0, sys_shl_init, sys_shl_exit,\n+\tsys_shl_open, sys_shl_close, sys_shl_sym };\n+\n+#undef LTDL_TYPE_TOP\n+#define LTDL_TYPE_TOP &sys_shl\n+\n+#endif\n+\n+#if HAVE_DLD\n+\n+/* dynamic linking with dld */\n+\n+#if HAVE_DLD_H\n+#include <dld.h>\n+#endif\n+\n+static int\n+sys_dld_init LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_dld_exit LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_dld_open (handle, filename)\n+\tlt_dlhandle handle;\n+\tconst char *filename;\n+{\n+\thandle->handle = strdup(filename);\n+\tif (!handle->handle) {\n+\t\tlast_error = memory_error;\n+\t\treturn 1;\n+\t}\n+\tif (dld_link(filename) != 0) {\n+\t\tlast_error = cannot_open_error;\n+\t\tlt_dlfree(handle->handle);\n+\t\treturn 1;\n+\t}\n+\treturn 0;\n+}\n+\n+static int\n+sys_dld_close (handle)\n+\tlt_dlhandle handle;\n+{\n+\tif (dld_unlink_by_file((char*)(handle->handle), 1) != 0) {\n+\t\tlast_error = cannot_close_error;\n+\t\treturn 1;\n+\t}\n+\tlt_dlfree(handle->filename);\n+\treturn 0;\n+}\n+\n+static lt_ptr_t\n+sys_dld_sym (handle, symbol)\n+\tlt_dlhandle handle;\n+\tconst char *symbol;\n+{\n+\tlt_ptr_t address = dld_get_func(symbol);\n+\t\n+\tif (!address)\n+\t\tlast_error = symbol_error;\n+\treturn address;\n+}\n+\n+static\n+lt_dltype_t\n+sys_dld = { LTDL_TYPE_TOP, 0, sys_dld_init, sys_dld_exit,\n+\tsys_dld_open, sys_dld_close, sys_dld_sym };\n+\n+#undef LTDL_TYPE_TOP\n+#define LTDL_TYPE_TOP &sys_dld\n+\n+#endif\n+\n+#ifdef _WIN32\n+\n+/* dynamic linking for Win32 */\n+\n+#include <windows.h>\n+\n+static int\n+sys_wll_init LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_wll_exit LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+/* Forward declaration; required to implement handle search below. */\n+static lt_dlhandle handles;\n+\n+static int\n+sys_wll_open (handle, filename)\n+\tlt_dlhandle handle;\n+\tconst char *filename;\n+{\n+\tlt_dlhandle cur;\n+\tchar *searchname = NULL;\n+\tchar *ext = strrchr(filename, '.');\n+\n+\tif (ext) {\n+\t\t/* FILENAME already has an extension. */\n+\t\tsearchname = strdup(filename);\n+\t} else {\n+\t\t/* Append a `.' to stop Windows from adding an\n+\t\t   implicit `.dll' extension. */\n+\t\tsearchname = (char*)lt_dlmalloc(2+ strlen(filename));\n+\t\tstrcpy(searchname, filename);\n+\t\tstrcat(searchname, \".\");\n+\t}\n+    \n+\thandle->handle = LoadLibrary(searchname);\n+\tlt_dlfree(searchname);\n+\t\n+\t/* libltdl expects this function to fail if it is unable\n+\t   to physically load the library.  Sadly, LoadLibrary\n+\t   will search the loaded libraries for a match and return\n+\t   one of them if the path search load fails.\n+\n+\t   We check whether LoadLibrary is returning a handle to\n+\t   an already loaded module, and simulate failure if we\n+\t   find one. */\n+\tcur = handles;\n+\twhile (cur) {\n+\t\tif (!cur->handle) {\n+\t\t\tcur = 0;\n+\t\t\tbreak;\n+\t\t}\n+\t\tif (cur->handle == handle->handle)\n+\t\t\tbreak;\n+\t\tcur = cur->next;\n+\t}\n+\n+\tif (cur || !handle->handle) {\n+\t\tlast_error = cannot_open_error;\n+\t\treturn 1;\n+\t}\n+\n+\treturn 0;\n+}\n+\n+static int\n+sys_wll_close (handle)\n+\tlt_dlhandle handle;\n+{\n+\tif (FreeLibrary(handle->handle) == 0) {\n+\t\tlast_error = cannot_close_error;\n+\t\treturn 1;\n+\t}\n+\treturn 0;\n+}\n+\n+static lt_ptr_t\n+sys_wll_sym (handle, symbol)\n+\tlt_dlhandle handle;\n+\tconst char *symbol;\n+{\n+\tlt_ptr_t address = GetProcAddress(handle->handle, symbol);\n+\t\n+\tif (!address)\n+\t\tlast_error = symbol_error;\n+\treturn address;\n+}\n+\n+static\n+lt_dltype_t\n+sys_wll = { LTDL_TYPE_TOP, 0, sys_wll_init, sys_wll_exit,\n+\tsys_wll_open, sys_wll_close, sys_wll_sym };\n+\n+#undef LTDL_TYPE_TOP\n+#define LTDL_TYPE_TOP &sys_wll\n+\n+#endif\n+\n+#ifdef __BEOS__\n+\n+/* dynamic linking for BeOS */\n+\n+#include <kernel/image.h>\n+\n+static int\n+sys_bedl_init LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_bedl_exit LTDL_PARAMS((void))\n+{\n+\treturn 0;\n+}\n+\n+static int\n+sys_bedl_open (handle, filename)\n+\tlt_dlhandle handle;\n+\tconst char *filename;\n+{\n+\timage_id image = 0;\n+\t\n+\tif (filename) {\n+\t\timage = load_add_on(filename);\n+\t} else {\n+\t\timage_info info; \n+\t\tint32 cookie = 0; \n+\t\tif (get_next_image_info(0, &cookie, &info) == B_OK)\n+\t\t\timage = load_add_on(info.name);\n+\t}\n+\tif (image <= 0) {\n+\t\tlast_error = cannot_open_error;\n+\t\treturn 1;\n+\t}\n+\thandle->handle = (void*) image;\n+\treturn 0;\n+}\n+\n+static int\n+sys_bedl_close (handle)\n+\tlt_dlhandle handle;\n+{\n+\tif (unload_add_on((image_id)handle->handle) != B_OK) {\n+\t\tlast_error = cannot_close_error;\n+\t\treturn 1;\n+\t}\n+\treturn 0;\n+}\n+\n+static lt_ptr_t\n+sys_bedl_sym (handle, symbol)\n+\tlt_dlhandle handle;\n+\tconst char *symbol;\n+{\n+\tlt_ptr_t address = 0;\n+\timage_id image = (image_id)handle->handle;\n+   \n+\tif (get_image_symbol(image, symbol, B_SYMBOL_TYPE_ANY,\n+\t\t&address) != B_OK) {\n+\t\tlast_error = symbol_error;\n+\t\treturn 0;\n+\t}\n+\treturn address;\n+}\n+\n+static\n+lt_dltype_t\n+sys_bedl = { LTDL_TYPE_TOP, 0, sys_bedl_init, sys_bedl_exit,\n+\tsys_bedl_open, sys_bedl_close, sys_bedl_sym };\n+\n+#undef LTDL_TYPE_TOP\n+#define LTDL_TYPE_TOP &sys_bedl\n+\n+#endif\n+\n+/* emulate dynamic linking using preloaded_symbols */\n+\n+typedef struct lt_dlsymlists_t {\n+\tstruct lt_dlsymlists_t *next;\n+\tconst lt_dlsymlist *syms;\n+} lt_dlsymlists_t;\n+\n+static const lt_dlsymlist *default_preloaded_symbols = 0;\n+static lt_dlsymlists_t *preloaded_symbols = 0;\n+\n+static int\n+presym_init LTDL_PARAMS((void))\n+{\n+\tpreloaded_symbols = 0;\n+\tif (default_preloaded_symbols)\n+\t\treturn lt_dlpreload(default_preloaded_symbols);\n+\treturn 0;\n+}\n+\n+static int\n+presym_free_symlists LTDL_PARAMS((void))\n+{\n+\tlt_dlsymlists_t\t*lists = preloaded_symbols;\n+\t\n+\twhile (lists) {\n+\t\tlt_dlsymlists_t\t*tmp = lists;\n+\t\t\n+\t\tlists = lists->next;\n+\t\tlt_dlfree(tmp);\n+\t}\n+\tpreloaded_symbols = 0;\n+\treturn 0;\n+}\n+\n+static int\n+presym_exit LTDL_PARAMS((void))\n+{\n+\tpresym_free_symlists();\n+\treturn 0;\n+}\n+\n+static int\n+presym_add_symlist (preloaded)\n+\tconst lt_dlsymlist *preloaded;\n+{\n+\tlt_dlsymlists_t *tmp;\n+\tlt_dlsymlists_t *lists = preloaded_symbols;\n+\t\n+\twhile (lists) {\n+\t\tif (lists->syms == preloaded)\n+\t\t\treturn 0;\n+\t\tlists = lists->next;\n+\t}\n+\n+\ttmp = (lt_dlsymlists_t*) lt_dlmalloc(sizeof(lt_dlsymlists_t));\n+\tif (!tmp) {\n+\t\tlast_error = memory_error;\n+\t\treturn 1;\n+\t}\n+\ttmp->syms = preloaded;\n+\ttmp->next = 0;\n+\tif (!preloaded_symbols)\n+\t\tpreloaded_symbols = tmp;\n+\telse {\n+\t\t/* append to the end */\n+\t\tlists = preloaded_symbols;\n+\t\twhile (lists->next)\n+\t\t\tlists = lists->next;\n+\t\tlists->next = tmp;\n+\t}\n+\treturn 0;\n+}\n+\n+static int\n+presym_open (handle, filename)\n+\tlt_dlhandle handle;\n+\tconst char *filename;\n+{\n+\tlt_dlsymlists_t *lists = preloaded_symbols;\n+\n+\tif (!lists) {\n+\t\tlast_error = no_symbols_error;\n+\t\treturn 1;\n+\t}\n+\tif (!filename)\n+\t\tfilename = \"@PROGRAM@\";\n+\twhile (lists) {\n+\t\tconst lt_dlsymlist *syms = lists->syms;\n+\t\n+\t\twhile (syms->name) {\n+\t\t\tif (!syms->address &&\n+\t\t\t    strcmp(syms->name, filename) == 0) {\n+\t\t\t\thandle->handle = (lt_ptr_t) syms;\n+\t\t\t\treturn 0;\n+\t\t\t}\n+\t\t\tsyms++;\n+\t\t}\n+\t\tlists = lists->next;\n+\t}\n+\tlast_error = file_not_found_error;\n+\treturn 1;\n+}\n+\n+static int\n+presym_close (handle)\n+\tlt_dlhandle handle;\n+{\n+\t/* Just to silence gcc -Wall */\n+\thandle = 0;\n+\treturn 0;\n+}\n+\n+static lt_ptr_t\n+presym_sym (handle, symbol)\n+\tlt_dlhandle handle;\n+\tconst char *symbol;\n+{\n+\tlt_dlsymlist *syms = (lt_dlsymlist*)(handle->handle);\n+\n+\tsyms++;\n+\twhile (syms->address) {\n+\t\tif (strcmp(syms->name, symbol) == 0)\n+\t\t\treturn syms->address;\n+\t\tsyms++;\n+\t}\n+\tlast_error = symbol_error;\n+\treturn 0;\n+}\n+\n+static\n+lt_dltype_t\n+presym = { LTDL_TYPE_TOP, 0, presym_init, presym_exit,\n+\t   presym_open, presym_close, presym_sym };\n+\n+#undef LTDL_TYPE_TOP\n+#define LTDL_TYPE_TOP &presym\n+\n+static char *user_search_path = 0;\n+static lt_dlhandle handles = 0;\n+static int initialized = 0;\n+\n+static lt_dltype_t *types = LTDL_TYPE_TOP;\n+#undef LTDL_TYPE_TOP\n+\n+int\n+lt_dlinit LTDL_PARAMS((void))\n+{\n+\t/* initialize libltdl */\n+\tlt_dltype_t **type = &types;\n+\tint typecount = 0;\n+\n+\tif (initialized) {\t/* Initialize only at first call. */\n+\t\tinitialized++;\n+\t\treturn 0;\n+\t}\n+\thandles = 0;\n+\tuser_search_path = 0; /* empty search path */\n+\n+\twhile (*type) {\n+\t\tif ((*type)->mod_init())\n+\t\t\t*type = (*type)->next; /* Remove it from the list */\n+\t\telse {\n+\t\t\ttype = &(*type)->next; /* Keep it */\n+\t\t\ttypecount++;\n+\t\t}\n+\t}\n+\tif (typecount == 0) {\n+\t\tlast_error = dlopen_not_supported_error;\n+\t\treturn 1;\n+\t}\n+\tlast_error = 0;\n+\tinitialized = 1;\n+\treturn 0;\n+}\n+\n+int\n+lt_dlpreload (preloaded)\n+\tconst lt_dlsymlist *preloaded;\n+{\n+\tif (preloaded)\n+\t\treturn presym_add_symlist(preloaded);\n+\tpresym_free_symlists();\n+\tif (default_preloaded_symbols)\n+\t\treturn lt_dlpreload(default_preloaded_symbols);\n+\treturn 0;\n+}\n+\n+int\n+lt_dlpreload_default (preloaded)\n+\tconst lt_dlsymlist *preloaded;\n+{\n+\tdefault_preloaded_symbols = preloaded;\n+\treturn 0;\n+}\n+\n+int\n+lt_dlexit LTDL_PARAMS((void))\n+{\n+\t/* shut down libltdl */\n+\tlt_dltype_t *type = types;\n+\tint\terrors;\n+\t\n+\tif (!initialized) {\n+\t\tlast_error = shutdown_error;\n+\t\treturn 1;\n+\t}\n+\tif (initialized != 1) { /* shut down only at last call. */\n+\t\tinitialized--;\n+\t\treturn 0;\n+\t}\n+\t/* close all modules */\n+\terrors = 0;\n+\twhile (handles) {\n+\t\t/* FIXME: what if a module depends on another one? */\n+\t\tif (lt_dlclose(handles))\n+\t\t\terrors++;\n+\t}\n+\tinitialized = 0;\n+\twhile (type) {\n+\t\tif (type->mod_exit())\n+\t\t\terrors++;\n+\t\ttype = type->next;\n+\t}\n+\treturn errors;\n+}\n+\n+static int\n+tryall_dlopen (handle, filename)\n+\tlt_dlhandle *handle;\n+\tconst char *filename;\n+{\n+\tlt_dlhandle cur;\n+\tlt_dltype_t *type = types;\n+\tconst char *saved_error = last_error;\n+\t\n+\t/* check whether the module was already opened */\n+\tcur = handles;\n+\twhile (cur) {\n+\t\tif (!cur->filename && !filename)\n+\t\t\tbreak;\n+\t\tif (cur->filename && filename && \n+\t\t    strcmp(cur->filename, filename) == 0)\n+\t\t\tbreak;\n+\t\tcur = cur->next;\n+\t}\n+\tif (cur) {\n+\t\tcur->usage++;\n+\t\t*handle = cur;\n+\t\treturn 0;\n+\t}\n+\t\n+\tcur = *handle;\n+\tif (filename) {\n+\t\tcur->filename = strdup(filename);\n+\t\tif (!cur->filename) {\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 1;\n+\t\t}\n+\t} else\n+\t\tcur->filename = 0;\n+\twhile (type) {\n+\t\tif (type->lib_open(cur, filename) == 0)\n+\t\t\tbreak;\n+\t\ttype = type->next;\n+\t}\n+\tif (!type) {\n+\t\tif (cur->filename)\n+\t\t\tlt_dlfree(cur->filename);\n+\t\treturn 1;\n+\t}\n+\tcur->type = type;\n+\tlast_error = saved_error;\n+\treturn 0;\n+}\n+\n+static int\n+find_module (handle, dir, libdir, dlname, old_name, installed)\n+\tlt_dlhandle *handle;\n+\tconst char *dir;\n+\tconst char *libdir;\n+\tconst char *dlname;\n+\tconst char *old_name;\n+\tint installed;\n+{\n+\tint\terror;\n+\tchar\t*filename;\n+\t/* try to open the old library first; if it was dlpreopened, \n+\t   we want the preopened version of it, even if a dlopenable\n+\t   module is available */\n+\tif (old_name && tryall_dlopen(handle, old_name) == 0)\n+\t\treturn 0;\n+\t/* try to open the dynamic library */\n+\tif (dlname) {\n+\t\t/* try to open the installed module */\n+\t\tif (installed && libdir) {\n+\t\t\tfilename = (char*)\n+\t\t\t\tlt_dlmalloc(strlen(libdir)+1+strlen(dlname)+1);\n+\t\t\tif (!filename) {\n+\t\t\t\tlast_error = memory_error;\n+\t\t\t\treturn 1;\n+\t\t\t}\n+\t\t\tstrcpy(filename, libdir);\n+\t\t\tstrcat(filename, \"/\");\n+\t\t\tstrcat(filename, dlname);\n+\t\t\terror = tryall_dlopen(handle, filename) == 0;\n+\t\t\tlt_dlfree(filename);\n+\t\t\tif (error)\n+\t\t\t\treturn 0;\n+\t\t}\n+\t\t/* try to open the not-installed module */\n+\t\tif (!installed) {\n+\t\t\tfilename = (char*)\n+\t\t\t\tlt_dlmalloc((dir ? strlen(dir) : 0)\n+\t\t\t\t       + strlen(objdir)\t+ strlen(dlname) + 1);\n+\t\t\tif (!filename) {\n+\t\t\t\tlast_error = memory_error;\n+\t\t\t\treturn 1;\n+\t\t\t}\n+\t\t\tif (dir)\n+\t\t\t\tstrcpy(filename, dir);\n+\t\t\telse\n+\t\t\t\t*filename = 0;\n+\t\t\tstrcat(filename, objdir);\n+\t\t\tstrcat(filename, dlname);\n+\n+\t\t\terror = tryall_dlopen(handle, filename) == 0;\n+\t\t\tlt_dlfree(filename);\n+\t\t\tif (error)\n+\t\t\t\treturn 0;\n+\t\t}\n+\t\t/* hmm, maybe it was moved to another directory */\n+\t\t{\n+\t\t\tfilename = (char*)\n+\t\t\t\tlt_dlmalloc((dir ? strlen(dir) : 0)\n+\t\t\t\t       + strlen(dlname) + 1);\n+\t\t\tif (dir)\n+\t\t\t\tstrcpy(filename, dir);\n+\t\t\telse\n+\t\t\t\t*filename = 0;\n+\t\t\tstrcat(filename, dlname);\n+\t\t\terror = tryall_dlopen(handle, filename) == 0;\n+\t\t\tlt_dlfree(filename);\n+\t\t\tif (error)\n+\t\t\t\treturn 0;\n+\t\t}\n+\t}\n+\tlast_error = file_not_found_error;\n+\treturn 1;\n+}\n+\n+static lt_ptr_t\n+find_file (basename, search_path, pdir, handle)\n+\tconst char *basename;\n+\tconst char *search_path;\n+\tchar **pdir;\n+\tlt_dlhandle *handle;\n+{\n+\t/* when handle != NULL search a library, otherwise a file */\n+\t/* return NULL on failure, otherwise the file/handle */\n+\n+\tchar\t*filename = 0;\n+\tint     filenamesize = 0;\n+\tconst char *next = search_path;\n+\tint\tlenbase = strlen(basename);\n+\t\n+\tif (!next || !*next) {\n+\t\tlast_error = file_not_found_error;\n+\t\treturn 0;\n+\t}\n+\twhile (next) {\n+\t\tint lendir;\n+\t\tconst char *cur = next;\n+\n+\t\tnext = strchr(cur, ':');\n+\t\tif (!next)\n+\t\t\tnext = cur + strlen(cur);\n+\t\tlendir = next - cur;\n+\t\tif (*next == ':')\n+\t\t\t++next;\n+\t\telse\n+\t\t\tnext = 0;\n+\t\tif (lendir == 0)\n+\t\t\tcontinue;\n+\t\tif (lendir + 1 + lenbase >= filenamesize) {\n+\t\t\tif (filename)\n+\t\t\t\tlt_dlfree(filename);\n+\t\t\tfilenamesize = lendir + 1 + lenbase + 1;\n+\t\t\tfilename = (char*) lt_dlmalloc(filenamesize);\n+\t\t\tif (!filename) {\n+\t\t\t\tlast_error = memory_error;\n+\t\t\t\treturn 0;\n+\t\t\t}\n+\t\t}\n+\t\tstrncpy(filename, cur, lendir);\n+\t\tif (filename[lendir-1] != '/')\n+\t\t\tfilename[lendir++] = '/';\n+\t\tstrcpy(filename+lendir, basename);\n+\t\tif (handle) {\n+\t\t\tif (tryall_dlopen(handle, filename) == 0) {\n+\t\t\t\tlt_dlfree(filename);\n+\t\t\t\treturn (lt_ptr_t) handle;\n+\t\t\t}\n+\t\t} else {\n+\t\t\tFILE *file = fopen(filename, LTDL_READTEXT_MODE);\n+\t\t\tif (file) {\n+\t\t\t\tif (*pdir)\n+\t\t\t\t\tlt_dlfree(*pdir);\n+\t\t\t\tfilename[lendir] = '\\0';\n+\t\t\t\t*pdir = strdup(filename);\n+\t\t\t\tif (!*pdir) {\n+\t\t\t\t\t/* We could have even avoided the\n+\t\t\t\t\t   strdup, but there would be some\n+\t\t\t\t\t   memory overhead. */\n+\t\t\t\t\t*pdir = filename;\n+\t\t\t\t} else\n+\t\t\t\t\tlt_dlfree(filename);\n+\t\t\t\treturn (lt_ptr_t) file;\n+\t\t\t}\n+\t\t}\n+\t}\n+\tif (filename)\n+\t\tlt_dlfree(filename);\n+\tlast_error = file_not_found_error;\n+\treturn 0;\n+}\n+\n+static int\n+load_deplibs(handle, deplibs)\n+\tlt_dlhandle handle;\n+\tconst char *deplibs;\n+{\n+\t/* FIXME: load deplibs */\n+\thandle->depcount = 0;\n+\thandle->deplibs = 0;\n+\t/* Just to silence gcc -Wall */\n+\tdeplibs = 0;\n+\treturn 0;\n+}\n+\n+static int\n+unload_deplibs(handle)\n+\tlt_dlhandle handle;\n+{\n+\t/* FIXME: unload deplibs */\n+\t/* Just to silence gcc -Wall */\n+\thandle = 0;\n+\treturn 0;\n+}\n+\n+static inline int\n+trim (dest, str)\n+\tchar **dest;\n+\tconst char *str;\n+{\n+\t/* remove the leading and trailing \"'\" from str \n+\t   and store the result in dest */\n+\tchar *tmp;\n+\tconst char *end = strrchr(str, '\\'');\n+\tint len = strlen(str);\n+\n+\tif (*dest)\n+\t\tlt_dlfree(*dest);\n+\tif (len > 3 && str[0] == '\\'') {\n+\t\ttmp = (char*) lt_dlmalloc(end - str);\n+\t\tif (!tmp) {\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 1;\n+\t\t}\n+\t\tstrncpy(tmp, &str[1], (end - str) - 1);\n+\t\ttmp[len-3] = '\\0';\n+\t\t*dest = tmp;\n+\t} else\n+\t\t*dest = 0;\n+\treturn 0;\n+}\n+\n+static inline int\n+free_vars(dir, name, dlname, oldname, libdir, deplibs)\n+\tchar *dir;\n+\tchar *name;\n+\tchar *dlname;\n+\tchar *oldname;\n+\tchar *libdir;\n+\tchar *deplibs;\n+{\n+\tif (dir)\n+\t\tlt_dlfree(dir);\n+\tif (name)\n+\t\tlt_dlfree(name);\n+\tif (dlname)\n+\t\tlt_dlfree(dlname);\n+\tif (oldname)\n+\t\tlt_dlfree(oldname);\n+\tif (libdir)\n+\t\tlt_dlfree(libdir);\n+\tif (deplibs)\n+\t\tlt_dlfree(deplibs);\n+\treturn 0;\n+}\n+\n+lt_dlhandle\n+lt_dlopen (filename)\n+\tconst char *filename;\n+{\n+\tlt_dlhandle handle, newhandle;\n+\tconst char *basename, *ext;\n+\tconst char *saved_error = last_error;\n+\tchar\t*dir = 0, *name = 0;\n+\t\n+\tif (!filename) {\n+\t\thandle = (lt_dlhandle) lt_dlmalloc(sizeof(lt_dlhandle_t));\n+\t\tif (!handle) {\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 0;\n+\t\t}\n+\t\thandle->usage = 0;\n+\t\thandle->depcount = 0;\n+\t\thandle->deplibs = 0;\n+\t\tnewhandle = handle;\n+\t\tif (tryall_dlopen(&newhandle, 0) != 0) {\n+\t\t\tlt_dlfree(handle);\n+\t\t\treturn 0;\n+\t\t}\n+\t\tgoto register_handle;\n+\t}\n+\tbasename = strrchr(filename, '/');\n+\tif (basename) {\n+\t\tbasename++;\n+\t\tdir = (char*) lt_dlmalloc(basename - filename + 1);\n+\t\tif (!dir) {\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 0;\n+\t\t}\n+\t\tstrncpy(dir, filename, basename - filename);\n+\t\tdir[basename - filename] = '\\0';\n+\t} else\n+\t\tbasename = filename;\n+\t/* check whether we open a libtool module (.la extension) */\n+\text = strrchr(basename, '.');\n+\tif (ext && strcmp(ext, \".la\") == 0) {\n+\t\t/* this seems to be a libtool module */\n+\t\tFILE\t*file;\n+\t\tint\ti;\n+\t\tchar\t*dlname = 0, *old_name = 0;\n+\t\tchar\t*libdir = 0, *deplibs = 0;\n+\t\tchar\t*line;\n+\t\tint\terror = 0;\n+\t\t/* if we can't find the installed flag, it is probably an\n+\t\t   installed libtool archive, produced with an old version\n+\t\t   of libtool */\n+\t\tint     installed = 1; \n+\n+\t\t/* extract the module name from the file name */\n+\t\tname = (char*) lt_dlmalloc(ext - basename + 1);\n+\t\tif (!name) {\n+\t\t\tlast_error = memory_error;\n+\t\t\tif (dir)\n+\t\t\t\tlt_dlfree(dir);\n+\t\t\treturn 0;\n+\t\t}\n+\t\t/* canonicalize the module name */\n+\t\tfor (i = 0; i < ext - basename; i++)\n+\t\t\tif (isalnum((int)(basename[i])))\n+\t\t\t\tname[i] = basename[i];\n+\t\t\telse\n+\t\t\t\tname[i] = '_';\n+\t\tname[ext - basename] = '\\0';\n+\t\t/* now try to open the .la file */\n+\t\tfile = fopen(filename, LTDL_READTEXT_MODE);\n+\t\tif (!file)\n+\t\t\tlast_error = file_not_found_error;\n+\t\tif (!file && !dir) {\n+\t\t\t/* try other directories */\n+\t\t\tfile = (FILE*) find_file(basename, \n+\t\t\t\t\t\t user_search_path,\n+\t\t\t\t\t\t &dir, 0);\n+\t\t\tif (!file)\n+\t\t\t\tfile = (FILE*) find_file(basename,\n+\t\t\t\t\t\t getenv(\"LTDL_LIBRARY_PATH\"),\n+\t\t\t\t\t\t &dir, 0);\n+#ifdef LTDL_SHLIBPATH_VAR\n+\t\t\tif (!file)\n+\t\t\t\tfile = (FILE*) find_file(basename,\n+\t\t\t\t\t\t getenv(LTDL_SHLIBPATH_VAR),\n+\t\t\t\t\t\t &dir, 0);\n+#endif\n+\t\t}\n+\t\tif (!file) {\n+\t\t\tif (name)\n+\t\t\t\tlt_dlfree(name);\n+\t\t\tif (dir)\n+\t\t\t\tlt_dlfree(dir);\n+\t\t\treturn 0;\n+\t\t}\n+\t\tline = (char*) lt_dlmalloc(LTDL_FILENAME_MAX);\n+\t\tif (!line) {\n+\t\t\tfclose(file);\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 0;\n+\t\t}\n+\t\t/* read the .la file */\n+\t\twhile (!feof(file)) {\n+\t\t\tif (!fgets(line, LTDL_FILENAME_MAX, file))\n+\t\t\t\tbreak;\n+\t\t\tif (line[0] == '\\n' || line[0] == '#')\n+\t\t\t\tcontinue;\n+#\t\t\tundef  STR_DLNAME\n+#\t\t\tdefine STR_DLNAME\t\"dlname=\"\n+\t\t\tif (strncmp(line, STR_DLNAME,\n+\t\t\t\tsizeof(STR_DLNAME) - 1) == 0)\n+\t\t\t\terror = trim(&dlname,\n+\t\t\t\t\t&line[sizeof(STR_DLNAME) - 1]);\n+\t\t\telse\n+#\t\t\tundef  STR_OLD_LIBRARY\n+#\t\t\tdefine STR_OLD_LIBRARY\t\"old_library=\"\n+\t\t\tif (strncmp(line, STR_OLD_LIBRARY,\n+\t\t\t\tsizeof(STR_OLD_LIBRARY) - 1) == 0)\n+\t\t\t\terror = trim(&old_name,\n+\t\t\t\t\t&line[sizeof(STR_OLD_LIBRARY) - 1]);\n+\t\t\telse\n+#\t\t\tundef  STR_LIBDIR\n+#\t\t\tdefine STR_LIBDIR\t\"libdir=\"\n+\t\t\tif (strncmp(line, STR_LIBDIR,\n+\t\t\t\tsizeof(STR_LIBDIR) - 1) == 0)\n+\t\t\t\terror = trim(&libdir,\n+\t\t\t\t\t&line[sizeof(STR_LIBDIR) - 1]);\n+\t\t\telse\n+#\t\t\tundef  STR_DL_DEPLIBS\n+#\t\t\tdefine STR_DL_DEPLIBS\t\"dl_dependency_libs=\"\n+\t\t\tif (strncmp(line, STR_DL_DEPLIBS,\n+\t\t\t\tsizeof(STR_DL_DEPLIBS) - 1) == 0)\n+\t\t\t\terror = trim(&deplibs,\n+\t\t\t\t\t&line[sizeof(STR_DL_DEPLIBS) - 1]);\n+\t\t\telse\n+\t\t\tif (strcmp(line, \"installed=yes\\n\") == 0)\n+\t\t\t\tinstalled = 1;\n+\t\t\telse\n+\t\t\tif (strcmp(line, \"installed=no\\n\") == 0)\n+\t\t\t\tinstalled = 0;\n+\t\t\tif (error)\n+\t\t\t\tbreak;\n+\t\t}\n+\t\tfclose(file);\n+\t\tlt_dlfree(line);\n+\t\t/* allocate the handle */\n+\t\thandle = (lt_dlhandle) lt_dlmalloc(sizeof(lt_dlhandle_t));\n+\t\tif (!handle || error) {\n+\t\t\tif (handle)\n+\t\t\t\tlt_dlfree(handle);\n+\t\t\tif (!error)\n+\t\t\t\tlast_error = memory_error;\n+\t\t\tfree_vars(name, dir, dlname, old_name, libdir, deplibs);\n+\t\t\treturn 0;\n+\t\t}\n+\t\thandle->usage = 0;\n+\t\tif (load_deplibs(handle, deplibs) == 0) {\n+\t\t\tnewhandle = handle;\n+\t\t\t/* find_module may replace newhandle */\n+\t\t\tif (find_module(&newhandle, dir, libdir, \n+\t\t\t\t\tdlname, old_name, installed)) {\n+\t\t\t\tunload_deplibs(handle);\n+\t\t\t\terror = 1;\n+\t\t\t}\n+\t\t} else\n+\t\t\terror = 1;\n+\t\tif (error) {\n+\t\t\tlt_dlfree(handle);\n+\t\t\tfree_vars(name, dir, dlname, old_name, libdir, deplibs);\n+\t\t\treturn 0;\n+\t\t}\n+\t\tif (handle != newhandle) {\n+\t\t\tunload_deplibs(handle);\n+\t\t}\n+\t} else {\n+\t\t/* not a libtool module */\n+\t\thandle = (lt_dlhandle) lt_dlmalloc(sizeof(lt_dlhandle_t));\n+\t\tif (!handle) {\n+\t\t\tlast_error = memory_error;\n+\t\t\tif (dir)\n+\t\t\t\tlt_dlfree(dir);\n+\t\t\treturn 0;\n+\t\t}\n+\t\thandle->usage = 0;\n+\t\t/* non-libtool modules don't have dependencies */\n+\t\thandle->depcount = 0;\n+\t\thandle->deplibs = 0;\n+\t\tnewhandle = handle;\n+\t\tif (tryall_dlopen(&newhandle, filename)\n+\t\t    && (dir\n+\t\t\t|| (!find_file(basename, user_search_path,\n+\t\t\t\t\t  0, &newhandle)\n+\t\t\t    && !find_file(basename,\n+\t\t\t\t\t  getenv(\"LTDL_LIBRARY_PATH\"),\n+\t\t\t\t\t  0, &newhandle)\n+#ifdef LTDL_SHLIBPATH_VAR\n+\t\t\t    && !find_file(basename,\n+\t\t\t\t\t  getenv(LTDL_SHLIBPATH_VAR),\n+\t\t\t\t\t  0, &newhandle)\n+#endif\n+\t\t\t\t))) {\n+\t\t\tlt_dlfree(handle);\n+\t\t\tif (dir)\n+\t\t\t\tlt_dlfree(dir);\n+\t\t\treturn 0;\n+\t\t}\n+\t}\n+register_handle:\n+\tif (newhandle != handle) {\n+\t\tlt_dlfree(handle);\n+\t\thandle = newhandle;\n+\t}\n+\tif (!handle->usage) {\n+\t\thandle->usage = 1;\n+\t\thandle->name = name;\n+\t\thandle->next = handles;\n+\t\thandles = handle;\n+\t} else if (name)\n+\t\tlt_dlfree(name);\n+\tif (dir)\n+\t\tlt_dlfree(dir);\n+\tlast_error = saved_error;\n+\treturn handle;\n+}\n+\n+lt_dlhandle\n+lt_dlopenext (filename)\n+\tconst char *filename;\n+{\n+\tlt_dlhandle handle;\n+\tchar\t*tmp;\n+\tint\tlen;\n+\tconst char *saved_error = last_error;\n+\t\n+\tif (!filename)\n+\t\treturn lt_dlopen(filename);\n+\tlen = strlen(filename);\n+\tif (!len) {\n+\t\tlast_error = file_not_found_error;\n+\t\treturn 0;\n+\t}\n+\t/* try the normal file name */\n+\thandle = lt_dlopen(filename);\n+\tif (handle)\n+\t\treturn handle;\n+\t/* try \"filename.la\" */\n+\ttmp = (char*) lt_dlmalloc(len+4);\n+\tif (!tmp) {\n+\t\tlast_error = memory_error;\n+\t\treturn 0;\n+\t}\n+\tstrcpy(tmp, filename);\n+\tstrcat(tmp, \".la\");\n+\thandle = lt_dlopen(tmp);\n+\tif (handle) {\n+\t\tlast_error = saved_error;\n+\t\tlt_dlfree(tmp);\n+\t\treturn handle;\n+\t}\n+#ifdef LTDL_SHLIB_EXT\n+\t/* try \"filename.EXT\" */\n+\tif (strlen(shlib_ext) > 3) {\n+\t\tlt_dlfree(tmp);\n+\t\ttmp = (char*) lt_dlmalloc(len + strlen(shlib_ext) + 1);\n+\t\tif (!tmp) {\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 0;\n+\t\t}\n+\t\tstrcpy(tmp, filename);\n+\t} else\n+\t\ttmp[len] = '\\0';\n+\tstrcat(tmp, shlib_ext);\n+\thandle = lt_dlopen(tmp);\n+\tif (handle) {\n+\t\tlast_error = saved_error;\n+\t\tlt_dlfree(tmp);\n+\t\treturn handle;\n+\t}\n+#endif\t\n+\tlast_error = file_not_found_error;\n+\tlt_dlfree(tmp);\n+\treturn 0;\n+}\n+\n+int\n+lt_dlclose (handle)\n+\tlt_dlhandle handle;\n+{\n+\tlt_dlhandle cur, last;\n+\t\n+\t/* check whether the handle is valid */\n+\tlast = cur = handles;\n+\twhile (cur && handle != cur) {\n+\t\tlast = cur;\n+\t\tcur = cur->next;\n+\t}\n+\tif (!cur) {\n+\t\tlast_error = invalid_handle_error;\n+\t\treturn 1;\n+\t}\n+\thandle->usage--;\n+\tif (!handle->usage) {\n+\t\tint\terror;\n+\t\n+\t\tif (handle != handles)\n+\t\t\tlast->next = handle->next;\n+\t\telse\n+\t\t\thandles = handle->next;\n+\t\terror = handle->type->lib_close(handle);\n+\t\terror += unload_deplibs(handle);\n+\t\tif (handle->filename)\n+\t\t\tlt_dlfree(handle->filename);\n+\t\tif (handle->name)\n+\t\t\tlt_dlfree(handle->name);\n+\t\tlt_dlfree(handle);\n+\t\treturn error;\n+\t}\n+\treturn 0;\n+}\n+\n+lt_ptr_t\n+lt_dlsym (handle, symbol)\n+\tlt_dlhandle handle;\n+\tconst char *symbol;\n+{\n+\tint\tlensym;\n+\tchar\tlsym[LTDL_SYMBOL_LENGTH];\n+\tchar\t*sym;\n+\tlt_ptr_t address;\n+\n+\tif (!handle) {\n+\t\tlast_error = invalid_handle_error;\n+\t\treturn 0;\n+\t}\n+\tif (!symbol) {\n+\t\tlast_error = symbol_error;\n+\t\treturn 0;\n+\t}\n+\tlensym = strlen(symbol);\n+\tif (handle->type->sym_prefix)\n+\t\tlensym += strlen(handle->type->sym_prefix);\n+\tif (handle->name)\n+\t\tlensym += strlen(handle->name);\n+\tif (lensym + LTDL_SYMBOL_OVERHEAD < LTDL_SYMBOL_LENGTH)\n+\t\tsym = lsym;\n+\telse\n+\t\tsym = (char*) lt_dlmalloc(lensym + LTDL_SYMBOL_OVERHEAD + 1);\n+\tif (!sym) {\n+\t\tlast_error = buffer_overflow_error;\n+\t\treturn 0;\n+\t}\n+\tif (handle->name) {\n+\t\tconst char *saved_error = last_error;\n+\t\t\n+\t\t/* this is a libtool module */\n+\t\tif (handle->type->sym_prefix) {\n+\t\t\tstrcpy(sym, handle->type->sym_prefix);\n+\t\t\tstrcat(sym, handle->name);\n+\t\t} else\n+\t\t\tstrcpy(sym, handle->name);\n+\t\tstrcat(sym, \"_LTX_\");\n+\t\tstrcat(sym, symbol);\n+\t\t/* try \"modulename_LTX_symbol\" */\n+\t\taddress = handle->type->find_sym(handle, sym);\n+\t\tif (address) {\n+\t\t\tif (sym != lsym)\n+\t\t\t\tlt_dlfree(sym);\n+\t\t\treturn address;\n+\t\t}\n+\t\tlast_error = saved_error;\n+\t}\n+\t/* otherwise try \"symbol\" */\n+\tif (handle->type->sym_prefix) {\n+\t\tstrcpy(sym, handle->type->sym_prefix);\n+\t\tstrcat(sym, symbol);\n+\t} else\n+\t\tstrcpy(sym, symbol);\n+\taddress = handle->type->find_sym(handle, sym);\n+\tif (sym != lsym)\n+\t\tlt_dlfree(sym);\n+\treturn address;\n+}\n+\n+const char *\n+lt_dlerror LTDL_PARAMS((void))\n+{\n+\tconst char *error = last_error;\n+\t\n+\tlast_error = 0;\n+\treturn error;\n+}\n+\n+int\n+lt_dladdsearchdir (search_dir)\n+\tconst char *search_dir;\n+{\n+\tif (!search_dir || !strlen(search_dir))\n+\t\treturn 0;\n+\tif (!user_search_path) {\n+\t\tuser_search_path = strdup(search_dir);\n+\t\tif (!user_search_path) {\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 1;\n+\t\t}\n+\t} else {\n+\t\tchar\t*new_search_path = (char*)\n+\t\t\tlt_dlmalloc(strlen(user_search_path) + \n+\t\t\t\tstrlen(search_dir) + 2); /* ':' + '\\0' == 2 */\n+\t\tif (!new_search_path) {\n+\t\t\tlast_error = memory_error;\n+\t\t\treturn 1;\n+\t\t}\n+\t\tstrcpy(new_search_path, user_search_path);\n+\t\tstrcat(new_search_path, \":\");\n+\t\tstrcat(new_search_path, search_dir);\n+\t\tlt_dlfree(user_search_path);\n+\t\tuser_search_path = new_search_path;\n+\t}\n+\treturn 0;\n+}\n+\n+int\n+lt_dlsetsearchpath (search_path)\n+\tconst char *search_path;\n+{\n+\tif (user_search_path)\n+\t\tlt_dlfree(user_search_path);\n+\tuser_search_path = 0; /* reset the search path */\n+\tif (!search_path || !strlen(search_path))\n+\t\treturn 0;\n+\tuser_search_path = strdup(search_path);\n+\tif (!user_search_path)\n+\t\treturn 1;\n+\treturn 0;\n+}\n+\n+const char *\n+lt_dlgetsearchpath LTDL_PARAMS((void))\n+{\n+\treturn user_search_path;\n+}"}, {"sha": "c0e446b87efa5688ed847e685a7a109a97fba026", "filename": "libjava/libltdl/ltdl.h", "status": "added", "additions": 92, "deletions": 0, "changes": 92, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fltdl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fltdl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Fltdl.h?ref=06f56737169a939227bfac13f099484ad09b3bf4", "patch": "@@ -0,0 +1,92 @@\n+/* ltdl.h -- generic dlopen functions\n+   Copyright (C) 1998-1999 Free Software Foundation, Inc.\n+   Originally by Thomas Tanner <tanner@ffii.org>\n+   This file is part of GNU Libtool.\n+\n+This library is free software; you can redistribute it and/or\n+modify it under the terms of the GNU Library General Public\n+License as published by the Free Software Foundation; either\n+version 2 of the License, or (at your option) any later version.\n+\n+As a special exception to the GNU Library General Public License,\n+if you distribute this file as part of a program that uses GNU libtool\n+to create libraries and programs, you may include it under the same\n+distribution terms that you use for the rest of that program.\n+\n+This library is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+Library General Public License for more details.\n+\n+You should have received a copy of the GNU Library General Public\n+License along with this library; if not, write to the Free\n+Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA\n+02111-1307  USA\n+*/\n+\n+/* Only include this header file once. */\n+#ifndef _LTDL_H_\n+#define _LTDL_H_ 1\n+\n+/* __BEGIN_DECLS should be used at the beginning of your declarations,\n+   so that C++ compilers don't mangle their names.  Use __END_DECLS at\n+   the end of C declarations. */\n+#undef __BEGIN_DECLS\n+#undef __END_DECLS\n+#ifdef __cplusplus\n+# define __BEGIN_DECLS extern \"C\" {\n+# define __END_DECLS }\n+#else\n+# define __BEGIN_DECLS /* empty */\n+# define __END_DECLS /* empty */\n+#endif\n+\n+/* LTDL_PARAMS is a macro used to wrap function prototypes, so that compilers\n+   that don't understand ANSI C prototypes still work, and ANSI C\n+   compilers can issue warnings about type mismatches. */\n+#undef LTDL_PARAMS\n+#undef lt_ptr_t\n+#if defined (__STDC__) || defined (_AIX) || (defined (__mips) && defined (_SYSTYPE_SVR4)) || defined(WIN32) || defined(__cplusplus)\n+# define LTDL_PARAMS(protos)\tprotos\n+# define lt_ptr_t\tvoid*\n+#else\n+# define LTDL_PARAMS(protos)\t()\n+# define lt_ptr_t\tchar*\n+#endif\n+\n+#include <stdlib.h>\n+\n+#ifdef _LTDL_COMPILE_\n+typedef\tstruct lt_dlhandle_t *lt_dlhandle;\n+#else\n+typedef\tlt_ptr_t lt_dlhandle;\n+#endif\n+\n+typedef struct {\n+\tconst char *name;\n+\tlt_ptr_t address;\n+} lt_dlsymlist;\n+\n+__BEGIN_DECLS\n+extern int lt_dlinit LTDL_PARAMS((void));\n+extern int lt_dlpreload LTDL_PARAMS((const lt_dlsymlist *preloaded));\n+extern int lt_dlpreload_default LTDL_PARAMS((const lt_dlsymlist *preloaded));\n+extern int lt_dlexit LTDL_PARAMS((void));\n+extern lt_dlhandle lt_dlopen LTDL_PARAMS((const char *filename));\n+extern lt_dlhandle lt_dlopenext LTDL_PARAMS((const char *filename));\n+extern int lt_dlclose LTDL_PARAMS((lt_dlhandle handle));\n+extern lt_ptr_t lt_dlsym LTDL_PARAMS((lt_dlhandle handle, const char *name));\n+extern const char *lt_dlerror LTDL_PARAMS((void));\n+extern int lt_dladdsearchdir LTDL_PARAMS((const char *search_dir));\n+extern int lt_dlsetsearchpath LTDL_PARAMS((const char *search_path));\n+extern const char *lt_dlgetsearchpath LTDL_PARAMS((void));\n+\n+extern const lt_dlsymlist lt_preloaded_symbols[];\n+#define LTDL_SET_PRELOADED_SYMBOLS() lt_dlpreload_default(lt_preloaded_symbols)\n+\n+extern lt_ptr_t (*lt_dlmalloc)LTDL_PARAMS((size_t size));\n+extern void (*lt_dlfree)LTDL_PARAMS((lt_ptr_t ptr));\n+\n+__END_DECLS\n+\n+#endif /* !_LTDL_H_ */"}, {"sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391", "filename": "libjava/libltdl/stamp-h.in", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fstamp-h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06f56737169a939227bfac13f099484ad09b3bf4/libjava%2Flibltdl%2Fstamp-h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Flibltdl%2Fstamp-h.in?ref=06f56737169a939227bfac13f099484ad09b3bf4"}]}