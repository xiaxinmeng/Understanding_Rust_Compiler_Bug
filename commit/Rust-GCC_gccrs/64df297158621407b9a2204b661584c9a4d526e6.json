{"sha": "64df297158621407b9a2204b661584c9a4d526e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjRkZjI5NzE1ODYyMTQwN2I5YTIyMDRiNjYxNTg0YzlhNGQ1MjZlNg==", "commit": {"author": {"name": "Evgeny Stupachenko", "email": "evstupac@gmail.com", "date": "2014-11-07T20:42:36Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2014-11-07T20:42:36Z"}, "message": "re PR target/63534 (Bootstrap failure on x86_64/i686-linux)\n\nPR target/63534\n\ngcc/\n        * config/i386/i386.md (builtin_setjmp_receiver): Use\n        pic_offset_table_rtx for PIC register.\n        (nonlocal_goto_receiver): Delete.\n\nFrom-SVN: r217237", "tree": {"sha": "c445d7d3717a04379e5b5243a6f59f3abed95a49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c445d7d3717a04379e5b5243a6f59f3abed95a49"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/64df297158621407b9a2204b661584c9a4d526e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64df297158621407b9a2204b661584c9a4d526e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64df297158621407b9a2204b661584c9a4d526e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64df297158621407b9a2204b661584c9a4d526e6/comments", "author": {"login": "evstupac", "id": 38332307, "node_id": "MDQ6VXNlcjM4MzMyMzA3", "avatar_url": "https://avatars.githubusercontent.com/u/38332307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evstupac", "html_url": "https://github.com/evstupac", "followers_url": "https://api.github.com/users/evstupac/followers", "following_url": "https://api.github.com/users/evstupac/following{/other_user}", "gists_url": "https://api.github.com/users/evstupac/gists{/gist_id}", "starred_url": "https://api.github.com/users/evstupac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evstupac/subscriptions", "organizations_url": "https://api.github.com/users/evstupac/orgs", "repos_url": "https://api.github.com/users/evstupac/repos", "events_url": "https://api.github.com/users/evstupac/events{/privacy}", "received_events_url": "https://api.github.com/users/evstupac/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "82910dd63a69913d81e51d459821a77f4de2e251", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82910dd63a69913d81e51d459821a77f4de2e251", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82910dd63a69913d81e51d459821a77f4de2e251"}], "stats": {"total": 40, "additions": 8, "deletions": 32}, "files": [{"sha": "eb5d793f1bebc9a628b07d95e253d8e3affe1b1e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64df297158621407b9a2204b661584c9a4d526e6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64df297158621407b9a2204b661584c9a4d526e6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=64df297158621407b9a2204b661584c9a4d526e6", "patch": "@@ -1,3 +1,10 @@\n+2014-11-07  Evgeny Stupachenko  <evstupac@gmail.com>\n+\n+\tPR target/63534\n+\t* config/i386/i386.md (builtin_setjmp_receiver): Use\n+\tpic_offset_table_rtx for PIC register.\n+\t(nonlocal_goto_receiver): Delete.\n+\n 2014-11-07  Daniel Hellstrom  <daniel@gaisler.com>\n \n \t* config.gcc (sparc-*-rtems*): Clean away unused t-elf."}, {"sha": "f2b878817cf65d318f06e97d248ae405e09049da", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 32, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64df297158621407b9a2204b661584c9a4d526e6/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64df297158621407b9a2204b661584c9a4d526e6/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=64df297158621407b9a2204b661584c9a4d526e6", "patch": "@@ -17005,10 +17005,9 @@\n   if (TARGET_MACHO)\n     {\n       rtx xops[3];\n-      rtx picreg = gen_rtx_REG (Pmode, PIC_OFFSET_TABLE_REGNUM);\n       rtx_code_label *label_rtx = gen_label_rtx ();\n       emit_insn (gen_set_got_labelled (pic_offset_table_rtx, label_rtx));\n-      xops[0] = xops[1] = picreg;\n+      xops[0] = xops[1] = pic_offset_table_rtx;\n       xops[2] = machopic_gen_offset (gen_rtx_LABEL_REF (SImode, label_rtx));\n       ix86_expand_binary_operator (MINUS, SImode, xops);\n     }\n@@ -17018,36 +17017,6 @@\n   DONE;\n })\n \n-(define_insn_and_split \"nonlocal_goto_receiver\"\n-  [(unspec_volatile [(const_int 0)] UNSPECV_NLGR)]\n-  \"TARGET_MACHO && !TARGET_64BIT && flag_pic\"\n-  \"#\"\n-  \"&& reload_completed\"\n-  [(const_int 0)]\n-{\n-  if (crtl->uses_pic_offset_table)\n-    {\n-      rtx xops[3];\n-      rtx label_rtx = gen_label_rtx ();\n-      rtx tmp;\n-\n-      /* Get a new pic base.  */\n-      emit_insn (gen_set_got_labelled (pic_offset_table_rtx, label_rtx));\n-      /* Correct this with the offset from the new to the old.  */\n-      xops[0] = xops[1] = pic_offset_table_rtx;\n-      label_rtx = gen_rtx_LABEL_REF (SImode, label_rtx);\n-      tmp = gen_rtx_UNSPEC (Pmode, gen_rtvec (1, label_rtx),\n-\t\t\t    UNSPEC_MACHOPIC_OFFSET);\n-      xops[2] = gen_rtx_CONST (Pmode, tmp);\n-      ix86_expand_binary_operator (MINUS, SImode, xops);\n-    }\n-  else\n-    /* No pic reg restore needed.  */\n-    emit_note (NOTE_INSN_DELETED);\n-\n-  DONE;\n-})\n-\n ;; Avoid redundant prefixes by splitting HImode arithmetic to SImode.\n ;; Do not split instructions with mask registers.\n (define_split"}]}