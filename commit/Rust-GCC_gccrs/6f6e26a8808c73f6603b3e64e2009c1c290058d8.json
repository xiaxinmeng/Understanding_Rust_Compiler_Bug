{"sha": "6f6e26a8808c73f6603b3e64e2009c1c290058d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY2ZTI2YTg4MDhjNzNmNjYwM2IzZTY0ZTIwMDljMWMyOTAwNThkOA==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2008-11-01T21:56:27Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2008-11-01T21:56:27Z"}, "message": "re PR fortran/36426 (Endless loop in gfc_apply_interface_mapping_to_expr)\n\n2008-11-01  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/36426\n\t* expr.c (replace_symbol): Replace all symbols which lie in the\n\tformal namespace of the interface and copy their attributes.\n\t* resolve.c (resolve_symbol): Add charlen to namespace.\n\n\n2008-11-01  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/36426\n\t* gfortran.dg/proc_decl_19.f90: New.\n\nFrom-SVN: r141522", "tree": {"sha": "c1bb0e6b31e1bb65c54e2d2a8eeaa3fe36e87532", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1bb0e6b31e1bb65c54e2d2a8eeaa3fe36e87532"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f6e26a8808c73f6603b3e64e2009c1c290058d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f6e26a8808c73f6603b3e64e2009c1c290058d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f6e26a8808c73f6603b3e64e2009c1c290058d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f6e26a8808c73f6603b3e64e2009c1c290058d8/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f18e0ca6dc275a9af20034f7970de628f8bf9b03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f18e0ca6dc275a9af20034f7970de628f8bf9b03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f18e0ca6dc275a9af20034f7970de628f8bf9b03"}], "stats": {"total": 46, "additions": 43, "deletions": 3}, "files": [{"sha": "49b9e3f30f9b33dd9de00a2c39c71471da83740a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=6f6e26a8808c73f6603b3e64e2009c1c290058d8", "patch": "@@ -1,3 +1,10 @@\n+2008-11-01  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/36426\n+\t* expr.c (replace_symbol): Replace all symbols which lie in the\n+\tformal namespace of the interface and copy their attributes.\n+\t* resolve.c (resolve_symbol): Add charlen to namespace.\n+\n 2008-11-01  Steven G. Kargl  <kargls@comcast.net>\n \n \tPR fortran/19925"}, {"sha": "ea766537a500886a7025705434222eb2a9ca9e8d", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=6f6e26a8808c73f6603b3e64e2009c1c290058d8", "patch": "@@ -3511,12 +3511,11 @@ static bool\n replace_symbol (gfc_expr *expr, gfc_symbol *sym, int *i ATTRIBUTE_UNUSED)\n {\n   if ((expr->expr_type == EXPR_VARIABLE || expr->expr_type == EXPR_FUNCTION)\n-      && expr->symtree->n.sym->ns != sym->formal_ns\n-      && expr->symtree->n.sym->attr.dummy)\n+      && expr->symtree->n.sym->ns == sym->ts.interface->formal_ns)\n     {\n       gfc_symtree *stree;\n       gfc_get_sym_tree (expr->symtree->name, sym->formal_ns, &stree);\n-      stree->n.sym->attr.referenced = expr->symtree->n.sym->attr.referenced;\n+      stree->n.sym->attr = expr->symtree->n.sym->attr;\n       expr->symtree = stree;\n     }\n   return false;"}, {"sha": "bf21416cc235dd54ef8cb863898b189dec80eeb5", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=6f6e26a8808c73f6603b3e64e2009c1c290058d8", "patch": "@@ -8939,6 +8939,12 @@ resolve_symbol (gfc_symbol *sym)\n \t      sym->ts.cl->resolved = ifc->ts.cl->resolved;\n \t      sym->ts.cl->length = gfc_copy_expr (ifc->ts.cl->length);\n \t      gfc_expr_replace_symbols (sym->ts.cl->length, sym);\n+\t      /* Add charlen to namespace.  */\n+\t      if (sym->formal_ns)\n+\t\t{\n+\t\t  sym->ts.cl->next = sym->formal_ns->cl_list;\n+\t\t  sym->formal_ns->cl_list = sym->ts.cl;\n+\t\t}\n \t    }\n \t}\n       else if (sym->ts.interface->name[0] != '\\0')"}, {"sha": "cb6b0720d6013aa97d49c1230571b966d2fd858d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6f6e26a8808c73f6603b3e64e2009c1c290058d8", "patch": "@@ -1,3 +1,8 @@\n+2008-11-01  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/36426\n+\t* gfortran.dg/proc_decl_19.f90: New.\n+\n 2008-11-01  Steven G. Kargl  <kargls@comcast.net>\n \n \tPR fortran/19925"}, {"sha": "1e85a7dbaeffd916099005388d4a00ff71d5eb50", "filename": "gcc/testsuite/gfortran.dg/proc_decl_19.f90", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_19.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f6e26a8808c73f6603b3e64e2009c1c290058d8/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_19.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_19.f90?ref=6f6e26a8808c73f6603b3e64e2009c1c290058d8", "patch": "@@ -0,0 +1,23 @@\n+! { dg-do compile }\n+! \n+! PR 36426\n+!\n+! Contributed by Tobias Burnus <burnus@gcc.gnu.org>\n+\n+abstract interface\n+  function foo(x)\n+    character(len=*) :: x\n+    character(len=len(x)) :: foo\n+  end function foo\n+end interface\n+procedure(foo) :: bar\n+\n+abstract interface\n+  character function abs_fun()\n+  end function\n+end interface\n+procedure(abs_fun):: x\n+\n+character(len=20) :: str\n+str = bar(\"Hello\")\n+end"}]}