{"sha": "fcd7669cb6f4153b535be458e8629ecbc4257bbc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmNkNzY2OWNiNmY0MTUzYjUzNWJlNDU4ZTg2MjllY2JjNDI1N2JiYw==", "commit": {"author": {"name": "Matthew Fortune", "email": "matthew.fortune@imgtec.com", "date": "2015-01-14T08:35:52Z"}, "committer": {"name": "Matthew Fortune", "email": "mpf@gcc.gnu.org", "date": "2015-01-14T08:35:52Z"}, "message": "Fix Linux multilib configurations with default architectures\n\ngcc/\n\n\t* config/mips/mips.h (MIPS_ISA_LEVEL_SPEC): Only infer an ISA\n\tlevel from an ARCH; do not inject the default.\n\t(MIPS_DEFAULT_ISA_LEVEL_SPEC): New macro split out from\n\tMIPS_ISA_LEVEL_SPEC.\n\t(MIPS_ISA_NAN2008_SPEC): Update comment.\n\t(BASE_DRIVER_SELF_SPECS): Likewise.\n\t* config/mips/elfoabi.h (DRIVER_SELF_SPECS): Add\n\tMIPS_DEFAULT_ISA_LEVEL_SPEC.\n\t* config/mips/mti-elf.h (DRIVER_SELF_SPECS): Likewise.\n\t* config/mips/mti-linux.h (DRIVER_SELF_SPECS): Likewise.\n\t* config/mips/sde.h (DRIVER_SELF_SPECS): Likewise.\n\nFrom-SVN: r219580", "tree": {"sha": "8b9800174cf842339809c1c6af9cd49519f3145e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b9800174cf842339809c1c6af9cd49519f3145e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fcd7669cb6f4153b535be458e8629ecbc4257bbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcd7669cb6f4153b535be458e8629ecbc4257bbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcd7669cb6f4153b535be458e8629ecbc4257bbc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcd7669cb6f4153b535be458e8629ecbc4257bbc/comments", "author": {"login": "mfortune", "id": 10220247, "node_id": "MDQ6VXNlcjEwMjIwMjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10220247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfortune", "html_url": "https://github.com/mfortune", "followers_url": "https://api.github.com/users/mfortune/followers", "following_url": "https://api.github.com/users/mfortune/following{/other_user}", "gists_url": "https://api.github.com/users/mfortune/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfortune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfortune/subscriptions", "organizations_url": "https://api.github.com/users/mfortune/orgs", "repos_url": "https://api.github.com/users/mfortune/repos", "events_url": "https://api.github.com/users/mfortune/events{/privacy}", "received_events_url": "https://api.github.com/users/mfortune/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "46b622cc2466685c60ef40256e49ad1fd8844cf7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46b622cc2466685c60ef40256e49ad1fd8844cf7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46b622cc2466685c60ef40256e49ad1fd8844cf7"}], "stats": {"total": 42, "additions": 38, "deletions": 4}, "files": [{"sha": "2f19b4927c8218239e77b556eb2ed447dae74319", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fcd7669cb6f4153b535be458e8629ecbc4257bbc", "patch": "@@ -1,3 +1,17 @@\n+2015-01-14  Matthew Fortune  <matthew.fortune@imgtec.com>\n+\n+    \t* config/mips/mips.h (MIPS_ISA_LEVEL_SPEC): Only infer an ISA\n+    \tlevel from an ARCH; do not inject the default.\n+    \t(MIPS_DEFAULT_ISA_LEVEL_SPEC): New macro split out from\n+    \tMIPS_ISA_LEVEL_SPEC.\n+    \t(MIPS_ISA_NAN2008_SPEC): Update comment.\n+    \t(BASE_DRIVER_SELF_SPECS): Likewise.\n+    \t* config/mips/elfoabi.h (DRIVER_SELF_SPECS): Add\n+    \tMIPS_DEFAULT_ISA_LEVEL_SPEC.\n+    \t* config/mips/mti-elf.h (DRIVER_SELF_SPECS): Likewise.\n+    \t* config/mips/mti-linux.h (DRIVER_SELF_SPECS): Likewise.\n+    \t* config/mips/sde.h (DRIVER_SELF_SPECS): Likewise.\n+\n 2015-01-14  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/64493"}, {"sha": "695bf41820619fa79265700aadf8118c3d3e8abc", "filename": "gcc/config/mips/elfoabi.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Felfoabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Felfoabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Felfoabi.h?ref=fcd7669cb6f4153b535be458e8629ecbc4257bbc", "patch": "@@ -20,6 +20,9 @@ along with GCC; see the file COPYING3.  If not see\n \n #undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n+  /* Set the ISA for the default multilib.  */\t\t\t\t\\\n+  MIPS_DEFAULT_ISA_LEVEL_SPEC,\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n   /* Make sure a -mips option is present.  This helps us to pick\t\\\n      the right multilib, and also makes the later specs easier\t\t\\\n      to write.  */\t\t\t\t\t\t\t\\"}, {"sha": "676bf1d04bd87312cf5bdbaf395e4d62ce937810", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=fcd7669cb6f4153b535be458e8629ecbc4257bbc", "patch": "@@ -704,8 +704,7 @@ struct mips_cpu_info {\n #define MIPS_ARCH_OPTION_SPEC \\\n   MIPS_ISA_LEVEL_OPTION_SPEC \"|march=*\"\n \n-/* A spec that infers a -mips argument from an -march argument,\n-   or injects the default if no architecture is specified.  */\n+/* A spec that infers a -mips argument from an -march argument.  */\n \n #define MIPS_ISA_LEVEL_SPEC \\\n   \"%{\" MIPS_ISA_LEVEL_OPTION_SPEC \":;: \\\n@@ -725,7 +724,13 @@ struct mips_cpu_info {\n      %{march=mips64r2|march=loongson3a|march=octeon|march=xlp: -mips64r2} \\\n      %{march=mips64r3: -mips64r3} \\\n      %{march=mips64r5: -mips64r5} \\\n-     %{march=mips64r6: -mips64r6} \\\n+     %{march=mips64r6: -mips64r6}}\"\n+\n+/* A spec that injects the default multilib ISA if no architecture is\n+   specified.  */\n+\n+#define MIPS_DEFAULT_ISA_LEVEL_SPEC \\\n+  \"%{\" MIPS_ISA_LEVEL_OPTION_SPEC \":;: \\\n      %{!march=*: -\" MULTILIB_ISA_DEFAULT \"}}\"\n \n /* A spec that infers a -mhard-float or -msoft-float setting from an\n@@ -757,6 +762,7 @@ struct mips_cpu_info {\n   \"%{msynci|mno-synci:;:%{mips32r2|mips32r3|mips32r5|mips32r6|mips64r2 \\\n \t\t\t  |mips64r3|mips64r5|mips64r6:-msynci;:-mno-synci}}\"\n \n+/* Infer a -mnan=2008 setting from a -mips argument.  */\n #define MIPS_ISA_NAN2008_SPEC \\\n   \"%{mnan*:;mips32r6|mips64r6:-mnan=2008}\"\n \n@@ -806,7 +812,9 @@ struct mips_cpu_info {\n   {\"mips-plt\", \"%{!mplt:%{!mno-plt:-m%(VALUE)}}\" }, \\\n   {\"synci\", \"%{!msynci:%{!mno-synci:-m%(VALUE)}}\" }\n \n-/* A spec that infers the -mdsp setting from an -march argument.  */\n+/* A spec that infers the:\n+   -mnan=2008 setting from a -mips argument,\n+   -mdsp setting from a -march argument.  */\n #define BASE_DRIVER_SELF_SPECS \\\n   MIPS_ISA_NAN2008_SPEC,       \\\n   \"%{!mno-dsp: \\"}, {"sha": "1075180983dc66abf10c034160d27706ce0576e3", "filename": "gcc/config/mips/mti-elf.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fmti-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fmti-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmti-elf.h?ref=fcd7669cb6f4153b535be458e8629ecbc4257bbc", "patch": "@@ -19,6 +19,9 @@ along with GCC; see the file COPYING3.  If not see\n \n #undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n+  /* Set the ISA for the default multilib.  */\t\t\t\t\\\n+  MIPS_DEFAULT_ISA_LEVEL_SPEC,\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n   /* Make sure a -mips option is present.  This helps us to pick\t\\\n      the right multilib, and also makes the later specs easier\t\t\\\n      to write.  */\t\t\t\t\t\t\t\\"}, {"sha": "80d5925919bc0cb8b0b7745896a935c0f7a7cb09", "filename": "gcc/config/mips/mti-linux.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmti-linux.h?ref=fcd7669cb6f4153b535be458e8629ecbc4257bbc", "patch": "@@ -31,6 +31,9 @@ along with GCC; see the file COPYING3.  If not see\n \n #undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n+  /* Set the ISA for the default multilib.  */\t\t\t\t\\\n+  MIPS_DEFAULT_ISA_LEVEL_SPEC,\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n   /* Make sure a -mips option is present.  This helps us to pick\t\\\n      the right multilib, and also makes the later specs easier\t\t\\\n      to write.  */\t\t\t\t\t\t\t\\"}, {"sha": "3cb64b09656d3a369fa462cfd85e43d5b7c102bb", "filename": "gcc/config/mips/sde.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fsde.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcd7669cb6f4153b535be458e8629ecbc4257bbc/gcc%2Fconfig%2Fmips%2Fsde.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fsde.h?ref=fcd7669cb6f4153b535be458e8629ecbc4257bbc", "patch": "@@ -20,6 +20,9 @@ along with GCC; see the file COPYING3.  If not see\n \n #undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n+  /* Set the ISA for the default multilib.  */\t\t\t\t\\\n+  MIPS_DEFAULT_ISA_LEVEL_SPEC,\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n   /* Make sure a -mips option is present.  This helps us to pick\t\\\n      the right multilib, and also makes the later specs easier\t\t\\\n      to write.  */\t\t\t\t\t\t\t\\"}]}