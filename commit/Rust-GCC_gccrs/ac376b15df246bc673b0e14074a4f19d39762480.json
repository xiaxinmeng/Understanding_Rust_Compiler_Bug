{"sha": "ac376b15df246bc673b0e14074a4f19d39762480", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWMzNzZiMTVkZjI0NmJjNjczYjBlMTQwNzRhNGYxOWQzOTc2MjQ4MA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-09-09T16:39:44Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-09-09T16:39:44Z"}, "message": "runtime: use alignof to check alignment of ucontext_t\n    \n    Use alignof rather than assuming a 16 byte alignment.\n    \n    Reviewed-on: https://go-review.googlesource.com/28913\n\nFrom-SVN: r240047", "tree": {"sha": "b38452d48d41a4ced2a23d9cc03ac7fd867d297c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b38452d48d41a4ced2a23d9cc03ac7fd867d297c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac376b15df246bc673b0e14074a4f19d39762480", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac376b15df246bc673b0e14074a4f19d39762480", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac376b15df246bc673b0e14074a4f19d39762480", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac376b15df246bc673b0e14074a4f19d39762480/comments", "author": null, "committer": null, "parents": [{"sha": "a9ca0a9d025cdd0e046b8e0b89fd2f2e3721e203", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9ca0a9d025cdd0e046b8e0b89fd2f2e3721e203", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9ca0a9d025cdd0e046b8e0b89fd2f2e3721e203"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "261a79ae2bbbabc8fe1c0af6c92a1367646aaa41", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac376b15df246bc673b0e14074a4f19d39762480/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac376b15df246bc673b0e14074a4f19d39762480/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=ac376b15df246bc673b0e14074a4f19d39762480", "patch": "@@ -1,4 +1,4 @@\n-b37a9e66ea584885043240f8f6f1d1c0284eadec\n+6c1f159cdcb56ebff617f6bbc6c97943a1a8a34d\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "6ac8857338b6e82c8242fc6fa1a295b9975b9308", "filename": "libgo/runtime/proc.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac376b15df246bc673b0e14074a4f19d39762480/libgo%2Fruntime%2Fproc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac376b15df246bc673b0e14074a4f19d39762480/libgo%2Fruntime%2Fproc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fproc.c?ref=ac376b15df246bc673b0e14074a4f19d39762480", "patch": "@@ -166,7 +166,13 @@ static ucontext_t*\n ucontext_arg(void** go_ucontext)\n {\n \tuintptr_t p = (uintptr_t)go_ucontext;\n-\tp = (p + 15) &~ (uintptr_t)0xf;\n+\tsize_t align = __alignof__(ucontext_t);\n+\tif(align > 16) {\n+\t\t// We only ensured space for up to a 16 byte alignment\n+\t\t// in libgo/go/runtime/runtime2.go.\n+\t\truntime_throw(\"required alignment of ucontext_t too large\");\n+\t}\n+\tp = (p + align - 1) &~ (uintptr_t)(align - 1);\n \treturn (ucontext_t*)p;\n }\n "}]}