{"sha": "7b40bc6bda732c991abfc3726bf68a886b876d68", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2I0MGJjNmJkYTczMmM5OTFhYmZjMzcyNmJmNjhhODg2Yjg3NmQ2OA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-05-29T07:09:53Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-05-29T07:09:53Z"}, "message": "toplev.c (rest_of_compilation): Set no_new_pseudos after flow1; instead track register_life_up_to_date.\n\n        * toplev.c (rest_of_compilation): Set no_new_pseudos after flow1;\n        instead track register_life_up_to_date.  Toggle no_new_pseudos\n        around if_convert.\n\nFrom-SVN: r34246", "tree": {"sha": "c01d89fe1d2381d01d79aa366e74c77102d182af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c01d89fe1d2381d01d79aa366e74c77102d182af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7b40bc6bda732c991abfc3726bf68a886b876d68", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b40bc6bda732c991abfc3726bf68a886b876d68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b40bc6bda732c991abfc3726bf68a886b876d68", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b40bc6bda732c991abfc3726bf68a886b876d68/comments", "author": null, "committer": null, "parents": [{"sha": "f192590a796296a3fd4659ad92e83099b8557b16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f192590a796296a3fd4659ad92e83099b8557b16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f192590a796296a3fd4659ad92e83099b8557b16"}], "stats": {"total": 35, "additions": 23, "deletions": 12}, "files": [{"sha": "e7f25ce074a660321cef57d25a3c27eb833f847b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b40bc6bda732c991abfc3726bf68a886b876d68/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b40bc6bda732c991abfc3726bf68a886b876d68/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7b40bc6bda732c991abfc3726bf68a886b876d68", "patch": "@@ -1,3 +1,9 @@\n+2000-05-29  Richard Henderson  <rth@cygnus.com>\n+\n+\t* toplev.c (rest_of_compilation): Set no_new_pseudos after flow1;\n+\tinstead track register_life_up_to_date.  Toggle no_new_pseudos\n+\taround if_convert.  \n+\n 2000-05-28  Geoff Keating  <geoffk@cygnus.com>\n \n \t* config/rs6000/rs6000.c (output_cbranch): Escape '%' characters"}, {"sha": "ef26426f776f2ad4617355862178f0368dc7dc4d", "filename": "gcc/toplev.c", "status": "modified", "additions": 17, "deletions": 12, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b40bc6bda732c991abfc3726bf68a886b876d68/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b40bc6bda732c991abfc3726bf68a886b876d68/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=7b40bc6bda732c991abfc3726bf68a886b876d68", "patch": "@@ -2614,6 +2614,7 @@ rest_of_compilation (decl)\n   int tem;\n   int failure = 0;\n   int rebuild_label_notes_after_reload;\n+  int register_life_up_to_date;\n \n   timevar_push (TV_REST_OF_COMPILATION);\n \n@@ -3155,6 +3156,9 @@ rest_of_compilation (decl)\n   mark_constant_function ();\n   timevar_pop (TV_FLOW);\n \n+  register_life_up_to_date = 1;\n+  no_new_pseudos = 1;\n+\n   if (warn_uninitialized || extra_warnings)\n     {\n       uninitialized_vars_warning (DECL_INITIAL (decl));\n@@ -3218,7 +3222,9 @@ rest_of_compilation (decl)\n       timevar_push (TV_IFCVT);\n       open_dump_file (DFI_ce, decl);\n \n+      no_new_pseudos = 0;\n       if_convert (1);\n+      no_new_pseudos = 1;\n \n       close_dump_file (DFI_ce, print_rtl_with_bb, insns);\n       timevar_pop (TV_IFCVT);\n@@ -3240,6 +3246,11 @@ rest_of_compilation (decl)\n \tggc_collect ();\n     }\n \n+  /* Any of the several passes since flow1 will have munged register\n+     lifetime data a bit.  */\n+  if (optimize > 0)\n+    register_life_up_to_date = 0;\n+\n #ifdef OPTIMIZE_MODE_SWITCHING\n   if (optimize)\n     {\n@@ -3250,7 +3261,7 @@ rest_of_compilation (decl)\n \t  /* We did work, and so had to regenerate global life information.\n \t     Take advantage of this and don't re-recompute register life\n \t     information below.  */\n-\t  no_new_pseudos = 1;\n+\t  register_life_up_to_date = 1;\n \t}\n \n       timevar_pop (TV_GCSE);\n@@ -3277,9 +3288,9 @@ rest_of_compilation (decl)\n       if (ggc_p)\n \tggc_collect ();\n \n-      /* Register lifetime information is up to date.  From now on\n-\t we can not generate any new pseudos.  */\n-      no_new_pseudos = 1;\n+      /* Register lifetime information was updated as part of verifying\n+\t the schedule.  */\n+      register_life_up_to_date = 1;\n     }\n #endif\n \n@@ -3296,14 +3307,8 @@ rest_of_compilation (decl)\n      RUN_JUMP_AFTER_RELOAD records whether or not we need to rerun the\n      jump optimizer after register allocation and reloading are finished.  */\n \n-  if (! no_new_pseudos)\n-    {\n-      recompute_reg_usage (insns, ! optimize_size);\n-\n-      /* Register lifetime information is up to date.  From now on\n-\t we can not generate any new pseudos.  */\n-      no_new_pseudos = 1;\n-    }\n+  if (! register_life_up_to_date)\n+    recompute_reg_usage (insns, ! optimize_size);\n   regclass (insns, max_reg_num (), rtl_dump_file);\n   rebuild_label_notes_after_reload = local_alloc ();\n "}]}