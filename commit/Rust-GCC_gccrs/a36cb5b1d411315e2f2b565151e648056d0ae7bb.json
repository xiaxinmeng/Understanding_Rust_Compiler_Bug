{"sha": "a36cb5b1d411315e2f2b565151e648056d0ae7bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTM2Y2I1YjFkNDExMzE1ZTJmMmI1NjUxNTFlNjQ4MDU2ZDBhZTdiYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-08-10T00:46:35Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-08-10T00:46:35Z"}, "message": "compiler: implement go:noinline and go:nosplit directives\n    \n    Reviewed-on: https://go-review.googlesource.com/26652\n\nFrom-SVN: r239315", "tree": {"sha": "262f26e7b252dbfe1b56a2bc1de810c258753936", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/262f26e7b252dbfe1b56a2bc1de810c258753936"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a36cb5b1d411315e2f2b565151e648056d0ae7bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a36cb5b1d411315e2f2b565151e648056d0ae7bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a36cb5b1d411315e2f2b565151e648056d0ae7bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a36cb5b1d411315e2f2b565151e648056d0ae7bb/comments", "author": null, "committer": null, "parents": [{"sha": "143d49f313785eaa9e06d0f41506b4782549a4d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/143d49f313785eaa9e06d0f41506b4782549a4d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/143d49f313785eaa9e06d0f41506b4782549a4d8"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "72d8f1e531c2978be4bef3062d66797b99930f72", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a36cb5b1d411315e2f2b565151e648056d0ae7bb/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a36cb5b1d411315e2f2b565151e648056d0ae7bb/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=a36cb5b1d411315e2f2b565151e648056d0ae7bb", "patch": "@@ -1,4 +1,4 @@\n-85a9c6992d9660e36972c279a5252fd9591bb765\n+8da2129a005cc1f44d4d993b0b7312b64c0d68a4\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "0bbf6ac71915ce1cdeb0d28b51b52f55ab432e15", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a36cb5b1d411315e2f2b565151e648056d0ae7bb/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a36cb5b1d411315e2f2b565151e648056d0ae7bb/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=a36cb5b1d411315e2f2b565151e648056d0ae7bb", "patch": "@@ -5083,11 +5083,19 @@ Function::get_or_make_decl(Gogo* gogo, Named_object* no)\n       if (this->calls_defer_retaddr_)\n \tis_inlinable = false;\n \n+      // Check the //go:noinline compiler directive.\n+      if ((this->pragmas_ & GOPRAGMA_NOINLINE) != 0)\n+\tis_inlinable = false;\n+\n       // If this is a thunk created to call a function which calls\n       // the predeclared recover function, we need to disable\n       // stack splitting for the thunk.\n       bool disable_split_stack = this->is_recover_thunk_;\n \n+      // Check the //go:nosplit compiler directive.\n+      if ((this->pragmas_ & GOPRAGMA_NOSPLIT) != 0)\n+\tdisable_split_stack = true;\n+\n       // This should go into a unique section if that has been\n       // requested elsewhere, or if this is a nointerface function.\n       // We want to put a nointerface function into a unique section"}, {"sha": "692aa502fec73161912476e0d9567b267e8b439e", "filename": "gcc/go/gofrontend/lex.cc", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a36cb5b1d411315e2f2b565151e648056d0ae7bb/gcc%2Fgo%2Fgofrontend%2Flex.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a36cb5b1d411315e2f2b565151e648056d0ae7bb/gcc%2Fgo%2Fgofrontend%2Flex.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Flex.cc?ref=a36cb5b1d411315e2f2b565151e648056d0ae7bb", "patch": "@@ -1842,13 +1842,11 @@ Lex::skip_cpp_comment()\n     {\n       // Applies to the next function.  Do not split the stack when\n       // entering the function.\n-      // FIXME: Not implemented.\n       this->pragmas_ |= GOPRAGMA_NOSPLIT;\n     }\n   else if (verb == \"go:noinline\")\n     {\n       // Applies to the next function.  Do not inline the function.\n-      // FIXME: Not implemented.\n       this->pragmas_ |= GOPRAGMA_NOINLINE;\n     }\n   else if (verb == \"go:systemstack\")"}]}