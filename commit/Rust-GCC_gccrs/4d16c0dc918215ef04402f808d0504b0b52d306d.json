{"sha": "4d16c0dc918215ef04402f808d0504b0b52d306d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGQxNmMwZGM5MTgyMTVlZjA0NDAyZjgwOGQwNTA0YjBiNTJkMzA2ZA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2010-02-26T22:35:34Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2010-02-26T22:35:34Z"}, "message": "Set the default arch at least to Prescott/Pentium 4.\n\n2010-02-26  H.J. Lu  <hongjiu.lu@intel.com>\n\n\t* config.gcc: Set the default arch at least to Prescott for\n\ti[34567]86-*-darwin* and Pentium 4 for i[34567]86-*-* targets\n\tif SSE math is enabled.\n\nFrom-SVN: r157101", "tree": {"sha": "6a342c05f368403ddfcd707696d2257fb3bcd0ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a342c05f368403ddfcd707696d2257fb3bcd0ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d16c0dc918215ef04402f808d0504b0b52d306d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d16c0dc918215ef04402f808d0504b0b52d306d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d16c0dc918215ef04402f808d0504b0b52d306d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d16c0dc918215ef04402f808d0504b0b52d306d/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0e94b75085af60341759c30fb522c9438c4b18b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e94b75085af60341759c30fb522c9438c4b18b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e94b75085af60341759c30fb522c9438c4b18b8"}], "stats": {"total": 37, "additions": 31, "deletions": 6}, "files": [{"sha": "0825bc4473a1f8a8735dfe5d51ae6910cd5a2b42", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d16c0dc918215ef04402f808d0504b0b52d306d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d16c0dc918215ef04402f808d0504b0b52d306d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4d16c0dc918215ef04402f808d0504b0b52d306d", "patch": "@@ -1,3 +1,9 @@\n+2010-02-26  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config.gcc: Set the default arch at least to Prescott for\n+\ti[34567]86-*-darwin* and Pentium 4 for i[34567]86-*-* targets\n+\tif SSE math is enabled.\n+\n 2010-02-26  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \t* diagnostic.c (diagnostic_initialize): Update."}, {"sha": "a1894004eca017fb7a6d107928a4ab8fb57ce44a", "filename": "gcc/config.gcc", "status": "modified", "additions": 25, "deletions": 6, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d16c0dc918215ef04402f808d0504b0b52d306d/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d16c0dc918215ef04402f808d0504b0b52d306d/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=4d16c0dc918215ef04402f808d0504b0b52d306d", "patch": "@@ -2625,16 +2625,20 @@ esac\n # to generic if there is no processor scheduler model for the target.\n arch=\n cpu=\n+arch_without_sse2=no\n case ${target} in\n   i386-*-*)\n     arch=i386\n     cpu=i386\n+    arch_without_sse2=yes\n     ;;\n   i486-*-*)\n     arch=i486\n     cpu=i486\n+    arch_without_sse2=yes\n     ;;\n   i586-*-*)\n+    arch_without_sse2=yes\n     case ${target_noncanonical} in\n       k6_2-*)\n \tarch=k6-2\n@@ -2675,22 +2679,27 @@ case ${target} in\n       athlon_xp-*|athlon_mp-*|athlon_4-*)\n \tarch=athlon-4\n \tcpu=athlon-4\n+\tarch_without_sse2=yes\n \t;;\n       athlon_tbird-*|athlon-*)\n \tarch=athlon\n \tcpu=athlon\n+\tarch_without_sse2=yes\n \t;;\n       geode-*)\n \tarch=geode\n \tcpu=geode\n+\tarch_without_sse2=yes\n \t;;\n       pentium2-*)\n \tarch=pentium2\n \tcpu=pentium2\n+\tarch_without_sse2=yes\n \t;;\n       pentium3-*|pentium3m-*)\n \tarch=pentium3\n \tcpu=pentium3\n+\tarch_without_sse2=yes\n \t;;\n       pentium4-*|pentium4m-*)\n \tarch=pentium4\n@@ -2719,10 +2728,12 @@ case ${target} in\n       pentiumpro-*)\n \tarch=pentiumpro\n \tcpu=pentiumpro\n+\tarch_without_sse2=yes\n \t;;\n       *)\n \tarch=pentiumpro\n \tcpu=generic\n+\tarch_without_sse2=yes\n \t;;\n     esac\n     ;;\n@@ -2836,14 +2847,22 @@ esac\n if test x$with_arch = x ; then\n   case ${target} in\n     i[34567]86-*-darwin*)\n-      # Don't set default arch for Darwin since it will set the default\n-      # ISA to SSE2.\n+      # SSE math is enabled for Darwin, which sets the default ISA to\n+      # SSE2.  The minimum ISA supported Darwin is SSE3, which is the\n+      # same as Prescott.\n+      if test $arch_without_sse2 = no; then\n+\twith_arch=$arch\n+      else\n+\twith_arch=prescott\n+      fi\n       ;;\n     i[34567]86-*-*)\n-      # Don't set default arch if --with-fpmath is used since it will set\n-      # the default ISA to SSE2.\n-      if test x$with_fpmath = x; then\n-        with_arch=$arch\n+      # --with-fpmath sets the default ISA to SSE2, which is the same\n+      # ISA supported by Pentium 4.\n+      if test x$with_fpmath = x || test $arch_without_sse2 = no; then\n+\twith_arch=$arch\n+      else\n+\twith_arch=pentium4\n       fi\n       ;;\n     x86_64-*-*)"}]}