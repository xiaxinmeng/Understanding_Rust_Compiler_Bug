{"sha": "d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRkNzNjZTI2YjM2YmRmMWIwNjFhYjAyOTdlZDdkNjEzYWZlYzljNQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2011-03-31T20:52:41Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-03-31T20:52:41Z"}, "message": "tree-ssa-pre.c (create_component_ref_by_pieces_1): Drop a zero minimum index only if it is redundant.\n\n\t* tree-ssa-pre.c (create_component_ref_by_pieces_1) <ARRAY_REF>: Drop\n\ta zero minimum index only if it is redundant.\n\nFrom-SVN: r171800", "tree": {"sha": "d430c1e0cfadd9de02789a9bea82ab916411352a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d430c1e0cfadd9de02789a9bea82ab916411352a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/comments", "author": null, "committer": null, "parents": [{"sha": "35ca26acc659500991b2119a0b6d9526605ca168", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35ca26acc659500991b2119a0b6d9526605ca168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35ca26acc659500991b2119a0b6d9526605ca168"}], "stats": {"total": 49, "additions": 47, "deletions": 2}, "files": [{"sha": "045f18fec4471dfecb39c5a4b1772e4db8d20859", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "patch": "@@ -1,3 +1,8 @@\n+2011-03-31  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree-ssa-pre.c (create_component_ref_by_pieces_1) <ARRAY_REF>: Drop\n+\ta zero minimum index only if it is redundant.\n+\n 2011-03-31  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/48381"}, {"sha": "b9c24411bc5c314504c88e85aa0d363357b49700", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "patch": "@@ -1,3 +1,7 @@\n+2011-03-31  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/opt16.adb: New test.\n+\n 2011-03-31  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/defaulted24.C: New."}, {"sha": "d8e93bda2a1d9b83263da8cc85851eb33378c25e", "filename": "gcc/testsuite/gnat.dg/opt16.adb", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2Ftestsuite%2Fgnat.dg%2Fopt16.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2Ftestsuite%2Fgnat.dg%2Fopt16.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt16.adb?ref=d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "patch": "@@ -0,0 +1,33 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O2 -gnatws\" }\n+\n+procedure Opt16 is\n+\n+   generic\n+      type T (<>) is private;\n+      V, V1 : T;\n+      with function F1 (X : T) return T;\n+   package GP is\n+      R : Boolean := F1 (V) = V1;\n+   end GP;\n+\n+   type AB is array (Boolean range <>) of Boolean;\n+\n+begin\n+   for I1 in Boolean loop\n+      for I2 in Boolean loop\n+         declare\n+            B1 : Boolean := I1;\n+            B2 : Boolean := I2;\n+            AB1 : AB (Boolean) := (I1, I2);\n+            T : AB (B1 .. B2) := (B1 .. B2 => True);\n+            F : AB (B1 .. B2) := (B1 .. B2 => False);\n+\n+            package P is new GP (AB, AB1, NOT AB1, \"NOT\");\n+\n+         begin\n+            null;\n+         end;\n+      end loop;\n+   end loop;\n+end;"}, {"sha": "e59a598348b580bb91e2648230bacc18c16fd9ed", "filename": "gcc/tree-ssa-pre.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2Ftree-ssa-pre.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4d73ce26b36bdf1b061ab0297ed7d613afec9c5/gcc%2Ftree-ssa-pre.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-pre.c?ref=d4d73ce26b36bdf1b061ab0297ed7d613afec9c5", "patch": "@@ -2874,8 +2874,11 @@ create_component_ref_by_pieces_1 (basic_block block, vn_reference_t ref,\n \t  return NULL_TREE;\n \tif (genop2)\n \t  {\n-\t    /* Drop zero minimum index.  */\n-\t    if (tree_int_cst_equal (genop2, integer_zero_node))\n+\t    tree domain_type = TYPE_DOMAIN (TREE_TYPE (genop0));\n+\t    /* Drop zero minimum index if redundant.  */\n+\t    if (integer_zerop (genop2)\n+\t\t&& (!domain_type\n+\t\t    || integer_zerop (TYPE_MIN_VALUE (domain_type))))\n \t      genop2 = NULL_TREE;\n \t    else\n \t      {"}]}