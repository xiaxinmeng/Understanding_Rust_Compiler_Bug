{"sha": "74869a8523751c03db3264bcef72ade1c10bfa6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQ4NjlhODUyMzc1MWMwM2RiMzI2NGJjZWY3MmFkZTFjMTBiZmE2YQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2003-12-30T12:18:28Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2003-12-30T12:18:28Z"}, "message": "re PR c++/13507 (spurious printf format warning)\n\ncp:\n\tPR c++/13507\n\t* decl.c (duplicate_decls): Use build_type_attribute_variant to\n\tmerge attributes.\ntestsuite:\n\tPR c++/13507\n\t* g++.dg/ext/attrib11.C: New test.\n\nFrom-SVN: r75229", "tree": {"sha": "45041e4ce33cce9ed6aa0b9a4de39c157311dcf1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45041e4ce33cce9ed6aa0b9a4de39c157311dcf1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74869a8523751c03db3264bcef72ade1c10bfa6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74869a8523751c03db3264bcef72ade1c10bfa6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74869a8523751c03db3264bcef72ade1c10bfa6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74869a8523751c03db3264bcef72ade1c10bfa6a/comments", "author": null, "committer": null, "parents": [{"sha": "b976c2fc2962376675a381fbccc814d546b1dfd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b976c2fc2962376675a381fbccc814d546b1dfd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b976c2fc2962376675a381fbccc814d546b1dfd4"}], "stats": {"total": 34, "additions": 30, "deletions": 4}, "files": [{"sha": "d56d24cc3ace467a0df500f0c63327fa6abaf2b0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=74869a8523751c03db3264bcef72ade1c10bfa6a", "patch": "@@ -1,5 +1,9 @@\n 2003-12-30  Nathan Sidwell  <nathan@codesourcery.com>\n \n+\tPR c++/13507\n+\t* decl.c (duplicate_decls): Use build_type_attribute_variant to\n+\tmerge attributes.\n+\n \tPR c++/13494\n \t* tree.c (build_cplus_array_type_1): Only build a minimal array\n \ttype for dependent types or domains."}, {"sha": "c7a294d9b2f78e76bfe27f2e76db4f4ee822ff1a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=74869a8523751c03db3264bcef72ade1c10bfa6a", "patch": "@@ -1262,10 +1262,12 @@ duplicate_decls (tree newdecl, tree olddecl)\n \t for anticipated built-ins, for exception lists, etc...  */\n       else if (DECL_ANTICIPATED (olddecl))\n \t{\n-\t  TYPE_ATTRIBUTES (TREE_TYPE (newdecl))\n-\t    = (*targetm.merge_type_attributes) (TREE_TYPE (olddecl),\n-\t\t\t\t\t\tTREE_TYPE (newdecl));\n-\t  TREE_TYPE (olddecl) = TREE_TYPE (newdecl);\n+\t  tree type = TREE_TYPE (newdecl);\n+\t  tree attribs = (*targetm.merge_type_attributes)\n+\t    (TREE_TYPE (olddecl), type);\n+\n+\t  type = build_type_attribute_variant (type, attribs);\n+\t  TREE_TYPE (newdecl) = TREE_TYPE (olddecl) = type;\n \t}\n \n       /* Whether or not the builtin can throw exceptions has no"}, {"sha": "d13331fdfd9fd6edf1900d7f51256e970867227e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=74869a8523751c03db3264bcef72ade1c10bfa6a", "patch": "@@ -1,5 +1,8 @@\n 2003-12-30  Nathan Sidwell  <nathan@codesourcery.com>\n \n+\tPR c++/13507\n+\t* g++.dg/ext/attrib11.C: New test.\n+\n \tPR c++/13494\n \t* g++.dg/template/array2-1.C: New test.\n \t* g++.dg/template/array2-2.C: New test."}, {"sha": "26bc7907c2e6ba29c6ff4e5be73e3d70bbd3ac91", "filename": "gcc/testsuite/g++.dg/ext/attrib11.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74869a8523751c03db3264bcef72ade1c10bfa6a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib11.C?ref=74869a8523751c03db3264bcef72ade1c10bfa6a", "patch": "@@ -0,0 +1,17 @@\n+// { dg-do compile }\n+// { dg-options \"-Wall\" }\n+\n+// Copyright (C) 2003 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 30 Dec 2003 <nathan@codesourcery.com>\n+\n+\n+// PR c++/13507, spurious warning due to attribute clobbering\n+extern \"C\" {\n+  extern int printf (__const char *__restrict __format, ...) throw ();\n+  extern int scanf (__const char *__restrict __format, ...) throw ();\n+}\n+\n+void foo(unsigned int x)\n+{\n+  printf (\"%d\\n\", x);\n+}"}]}