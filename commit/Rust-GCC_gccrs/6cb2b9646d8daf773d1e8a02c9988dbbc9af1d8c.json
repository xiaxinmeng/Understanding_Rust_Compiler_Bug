{"sha": "6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNiMmI5NjQ2ZDhkYWY3NzNkMWU4YTAyYzk5ODhkYmJjOWFmMWQ4Yw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2011-12-21T00:34:09Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2011-12-21T00:34:09Z"}, "message": "arm: Use arm_cmpdi_unsigned for thumb2 as well\n\nThis changes code generation from \"eors; eors; orrs\" (which ranges\nfrom 6 to 12 bytes and requires three scratch registers), to\n\"cmp; it; cmp\" (which is always 6 bytes for register inputs and\nrequires no scratch registers).\n\n        * config/arm/arm.md (*arm_cmpdi_unsigned): Enable for thumb2.\n        * config/arm/arm.c (arm_select_cc_mode): Use it.\n\nFrom-SVN: r182561", "tree": {"sha": "98c2a7e79873fca96e4f36f255f97656d57f2eb3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98c2a7e79873fca96e4f36f255f97656d57f2eb3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c/comments", "author": null, "committer": null, "parents": [{"sha": "fa14fefd24a177c3f9ee4303b8f19ef2bdeabaa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa14fefd24a177c3f9ee4303b8f19ef2bdeabaa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa14fefd24a177c3f9ee4303b8f19ef2bdeabaa3"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "f5ec754649bc1e72754f37dad0c2fd00c0b998fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "patch": "@@ -1,3 +1,8 @@\n+2011-12-20  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/arm/arm.md (*arm_cmpdi_unsigned): Enable for thumb2.\n+\t* config/arm/arm.c (arm_select_cc_mode): Use it.\n+\n 2011-12-20  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* tree-ssa-math-opts.c (convert_plusminus_to_widen): Restrict"}, {"sha": "b682a9f0d9df80eddc39aec1a8346ac1643d3aed", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "patch": "@@ -11672,7 +11672,7 @@ arm_select_cc_mode (enum rtx_code op, rtx x, rtx y)\n \t    return CC_Zmode;\n \n \t  /* We can do an equality test in three Thumb instructions.  */\n-\t  if (!TARGET_ARM)\n+\t  if (!TARGET_32BIT)\n \t    return CC_Zmode;\n \n \t  /* FALLTHROUGH */\n@@ -11684,7 +11684,7 @@ arm_select_cc_mode (enum rtx_code op, rtx x, rtx y)\n \t  /* DImode unsigned comparisons can be implemented by cmp +\n \t     cmpeq without a scratch register.  Not worth doing in\n \t     Thumb-2.  */\n-\t  if (TARGET_ARM)\n+\t  if (TARGET_32BIT)\n \t    return CC_CZmode;\n \n \t  /* FALLTHROUGH */"}, {"sha": "a5b1df6dada7884d6b856c24ea5f5a796a52799f", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "patch": "@@ -7541,8 +7541,8 @@\n   [(set (reg:CC_CZ CC_REGNUM)\n \t(compare:CC_CZ (match_operand:DI 0 \"s_register_operand\" \"r\")\n \t\t       (match_operand:DI 1 \"arm_di_operand\"\t\"rDi\")))]\n-  \"TARGET_ARM\"\n-  \"cmp%?\\\\t%R0, %R1\\;cmpeq\\\\t%Q0, %Q1\"\n+  \"TARGET_32BIT\"\n+  \"cmp\\\\t%R0, %R1\\;it eq\\;cmpeq\\\\t%Q0, %Q1\"\n   [(set_attr \"conds\" \"set\")\n    (set_attr \"length\" \"8\")]\n )"}]}