{"sha": "2c9da85bf03e2920af2dca3bb124abc745bc365b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM5ZGE4NWJmMDNlMjkyMGFmMmRjYTNiYjEyNGFiYzc0NWJjMzY1Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-04-26T13:33:49Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-04-26T13:33:49Z"}, "message": "re PR tree-optimization/48734 (ICE in eliminate_redundant_comparison, at tree-ssa-reassoc.c:1321)\n\n\tPR tree-optimization/48734\n\t* tree-ssa-reassoc.c (eliminate_redundant_comparison): Give up\n\tif return value from maybe_fold_*_comparsions isn't something\n\tthe code is prepared to handle.\n\n\t* gcc.c-torture/compile/pr48734.c: New test.\n\nFrom-SVN: r172967", "tree": {"sha": "7b95eb186ef89a03e38a882771508f6648604711", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b95eb186ef89a03e38a882771508f6648604711"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c9da85bf03e2920af2dca3bb124abc745bc365b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c9da85bf03e2920af2dca3bb124abc745bc365b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c9da85bf03e2920af2dca3bb124abc745bc365b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c9da85bf03e2920af2dca3bb124abc745bc365b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ac6fdeacafe537496c0b370c670737a5e3d165f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac6fdeacafe537496c0b370c670737a5e3d165f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac6fdeacafe537496c0b370c670737a5e3d165f8"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "0bf1088b0bbadc26a470ba62dab24c6b52df96bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c9da85bf03e2920af2dca3bb124abc745bc365b", "patch": "@@ -1,3 +1,10 @@\n+2011-04-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/48734\n+\t* tree-ssa-reassoc.c (eliminate_redundant_comparison): Give up\n+\tif return value from maybe_fold_*_comparsions isn't something\n+\tthe code is prepared to handle.\n+\n 2011-04-26  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/predicates.md (ext_QIreg_operand): Remove extra"}, {"sha": "c07caacb2c156fce4deba7043fb1f6190effed9d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2c9da85bf03e2920af2dca3bb124abc745bc365b", "patch": "@@ -1,5 +1,8 @@\n 2011-04-26  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/48734\n+\t* gcc.c-torture/compile/pr48734.c: New test.\n+\n \tPR testsuite/48753\n \t* gcc.dg/tree-prof/val-prof-2.c: Adjust for 32-bit HWI.\n "}, {"sha": "b20ea80fb3f06e797a8bf9af494726d285bc31eb", "filename": "gcc/testsuite/gcc.c-torture/compile/pr48734.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr48734.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr48734.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr48734.c?ref=2c9da85bf03e2920af2dca3bb124abc745bc365b", "patch": "@@ -0,0 +1,11 @@\n+/* PR tree-optimization/48734 */\n+\n+unsigned int\n+foo (int x, unsigned int y, unsigned int z)\n+{\n+  z &= (x == -__INT_MAX__ - 1 ? x : -x) > y;\n+  z &= (x == -__INT_MAX__ - 1 ? x : -x) > y;\n+  z &= (x == -__INT_MAX__ - 1 ? x : -x) > y;\n+  z &= (x == -__INT_MAX__ - 1 ? x : -x) > y;\n+  return z;\n+}"}, {"sha": "987ec650778993165f147557697ae75d41588fea", "filename": "gcc/tree-ssa-reassoc.c", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2Ftree-ssa-reassoc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c9da85bf03e2920af2dca3bb124abc745bc365b/gcc%2Ftree-ssa-reassoc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-reassoc.c?ref=2c9da85bf03e2920af2dca3bb124abc745bc365b", "patch": "@@ -1,5 +1,6 @@\n /* Reassociation for trees.\n-   Copyright (C) 2005, 2007, 2008, 2009, 2010 Free Software Foundation, Inc.\n+   Copyright (C) 2005, 2007, 2008, 2009, 2010, 2011\n+   Free Software Foundation, Inc.\n    Contributed by Daniel Berlin <dan@dberlin.org>\n \n This file is part of GCC.\n@@ -1279,6 +1280,20 @@ eliminate_redundant_comparison (enum tree_code opcode,\n       if (!useless_type_conversion_p (TREE_TYPE (curr->op), TREE_TYPE (t)))\n \tt = fold_convert (TREE_TYPE (curr->op), t);\n \n+      if (TREE_CODE (t) != INTEGER_CST\n+\t  && !operand_equal_p (t, curr->op, 0))\n+\t{\n+\t  enum tree_code subcode;\n+\t  tree newop1, newop2;\n+\t  if (!COMPARISON_CLASS_P (t))\n+\t    continue;\n+\t  extract_ops_from_tree (t, &subcode, &newop1, &newop2);\n+\t  STRIP_USELESS_TYPE_CONVERSION (newop1);\n+\t  STRIP_USELESS_TYPE_CONVERSION (newop2);\n+\t  if (!is_gimple_val (newop1) || !is_gimple_val (newop2))\n+\t    continue;\n+\t}\n+\n       if (dump_file && (dump_flags & TDF_DETAILS))\n \t{\n \t  fprintf (dump_file, \"Equivalence: \");"}]}