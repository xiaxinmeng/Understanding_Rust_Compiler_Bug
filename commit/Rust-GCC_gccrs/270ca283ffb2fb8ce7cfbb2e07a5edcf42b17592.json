{"sha": "270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjcwY2EyODNmZmIyZmI4Y2U3Y2ZiYjJlMDdhNWVkY2Y0MmIxNzU5Mg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-12-30T07:08:00Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-12-30T07:08:00Z"}, "message": "compiler: use more accurate array type in Gogo::register_gc_vars\n    \n    The length of the roots array in Gogo::register_gc_vars was being\n    computed incorrectly, potentially leading to type clashes in the back\n    end. Compute an accurate length for this array ahead of time.\n    \n    Reviewed-on: https://go-review.googlesource.com/34624\n\nFrom-SVN: r243974", "tree": {"sha": "a30b81143a4f6987754e3d732d5b577b9ff31d73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a30b81143a4f6987754e3d732d5b577b9ff31d73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592", "html_url": "https://github.com/Rust-GCC/gccrs/commit/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592/comments", "author": null, "committer": null, "parents": [{"sha": "a9788936a187733ff74ea43657d190ffc147b3e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9788936a187733ff74ea43657d190ffc147b3e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9788936a187733ff74ea43657d190ffc147b3e0"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "9392c940d99919f1b3d271187b2317bcdbddb494", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592", "patch": "@@ -1,4 +1,4 @@\n-9a89f32811e6b3a29e22dda46e9c23811f562876\n+d9be5f5d7907cbc169424fe2b8532cc3919cad5b\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "ff82f11948f3f6f31a5eaf3d7d79477278a50949", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=270ca283ffb2fb8ce7cfbb2e07a5edcf42b17592", "patch": "@@ -740,9 +740,9 @@ Gogo::register_gc_vars(const std::vector<Named_object*>& var_gc,\n                                                           \"__size\", uint_type);\n \n   Location builtin_loc = Linemap::predeclared_location();\n-  Expression* length = Expression::make_integer_ul(var_gc.size(), NULL,\n-\t\t\t\t\t\t   builtin_loc);\n-\n+  unsigned roots_len = var_gc.size() + this->gc_roots_.size() + 1;\n+  Expression* length = Expression::make_integer_ul(roots_len, NULL,\n+                                                   builtin_loc);\n   Array_type* root_array_type = Type::make_array_type(root_type, length);\n   Type* ptdt = Type::make_type_descriptor_ptr_type();\n   Struct_type* root_list_type ="}]}