{"sha": "911cef2e3ba7548ee13e761f88457c6bbe1fa7fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTExY2VmMmUzYmE3NTQ4ZWUxM2U3NjFmODg0NTdjNmJiZTFmYTdmZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-02-20T15:30:31Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-02-20T15:30:31Z"}, "message": "runtime: allow preemption in fast syscall return\n    \n    Let a fast syscall return be a preemption point.  This helps with\n    tight loops that make system calls, as in BenchmarkSyscallExcessWork.\n    \n    Reviewed-on: https://go-review.googlesource.com/94895\n\nFrom-SVN: r257848", "tree": {"sha": "140f7eca6d15defccbef94b9bfa5d41e30168520", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/140f7eca6d15defccbef94b9bfa5d41e30168520"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe/comments", "author": null, "committer": null, "parents": [{"sha": "9bd958c5f361337b15958be8641d59ad38bd0a2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bd958c5f361337b15958be8641d59ad38bd0a2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bd958c5f361337b15958be8641d59ad38bd0a2b"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "c52bf4e0dc0c7f97622df15e5015a084c5217cb2", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=911cef2e3ba7548ee13e761f88457c6bbe1fa7fe", "patch": "@@ -1,4 +1,4 @@\n-459a8a94e04a19bde7173ef7cf2db369c2e62e2d\n+c6e0970f75508e209a10a7db5164d6ea3f9b28bf\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "20fa0ad05be17caa494a37495e61c510da4f118f", "filename": "libgo/go/runtime/proc.go", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe/libgo%2Fgo%2Fruntime%2Fproc.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/911cef2e3ba7548ee13e761f88457c6bbe1fa7fe/libgo%2Fgo%2Fruntime%2Fproc.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fruntime%2Fproc.go?ref=911cef2e3ba7548ee13e761f88457c6bbe1fa7fe", "patch": "@@ -2794,6 +2794,13 @@ func exitsyscall(dummy int32) {\n \t\texitsyscallclear(_g_)\n \t\t_g_.m.locks--\n \t\t_g_.throwsplit = false\n+\n+\t\t// Check preemption, since unlike gc we don't check on\n+\t\t// every call.\n+\t\tif getg().preempt {\n+\t\t\tcheckPreempt()\n+\t\t}\n+\n \t\treturn\n \t}\n "}]}