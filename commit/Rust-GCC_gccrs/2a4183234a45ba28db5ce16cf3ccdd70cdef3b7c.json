{"sha": "2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmE0MTgzMjM0YTQ1YmEyOGRiNWNlMTZjZjNjY2RkNzBjZGVmM2I3Yw==", "commit": {"author": {"name": "Piotr Kubaj", "email": "pkubaj@FreeBSD.org", "date": "2020-12-16T22:26:18Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2020-12-16T22:54:51Z"}, "message": "rs6000: Add support for powerpc64le-unknown-freebsd\n\nThis implements support for powerpc64le architecture on FreeBSD.  Since\nwe don't have powerpcle (32-bit), I did not add support for powerpcle\nhere. This remains to be changed if there is powerpcle support in the\nfuture.\n\n2020-12-15  Piotr Kubaj  <pkubaj@FreeBSD.org>\n\ngcc/\n\t* config.gcc (powerpc*le-*-freebsd*): Add.\n\t* configure.ac (powerpc*le-*-freebsd*): Ditto.\n\t* configure: Regenerate.\n\t* config/rs6000/freebsd64.h (ASM_SPEC_COMMON): Use ENDIAN_SELECT.\n\t(DEFAULT_ASM_ENDIAN): Add little endian support.\n\t(LINK_OS_FREEBSD_SPEC64): Ditto.", "tree": {"sha": "8d401a4130cb1f83378eab28e461727862a7831f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8d401a4130cb1f83378eab28e461727862a7831f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/comments", "author": {"login": "pkubaj", "id": 4457924, "node_id": "MDQ6VXNlcjQ0NTc5MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4457924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkubaj", "html_url": "https://github.com/pkubaj", "followers_url": "https://api.github.com/users/pkubaj/followers", "following_url": "https://api.github.com/users/pkubaj/following{/other_user}", "gists_url": "https://api.github.com/users/pkubaj/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkubaj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkubaj/subscriptions", "organizations_url": "https://api.github.com/users/pkubaj/orgs", "repos_url": "https://api.github.com/users/pkubaj/repos", "events_url": "https://api.github.com/users/pkubaj/events{/privacy}", "received_events_url": "https://api.github.com/users/pkubaj/received_events", "type": "User", "site_admin": false}, "committer": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e38c912700f001ea1c8a32533bedb4c802e38d3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e38c912700f001ea1c8a32533bedb4c802e38d3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e38c912700f001ea1c8a32533bedb4c802e38d3f"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "70ecc51c1cfe9dffd428e4e68c6cdae8df7e5a91", "filename": "gcc/config.gcc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "patch": "@@ -2865,6 +2865,10 @@ powerpc*-*-freebsd*)\n \ttm_file=\"${tm_file} dbxelf.h elfos.h gnu-user.h ${fbsd_tm_file} rs6000/sysv4.h\"\n \textra_options=\"${extra_options} rs6000/sysv4.opt\"\n \ttmake_file=\"rs6000/t-fprules rs6000/t-ppcos ${tmake_file} rs6000/t-ppccomm\"\n+\tcase ${target} in\n+\t    powerpc*le-*-*)\n+\t\ttm_file=\"${tm_file} rs6000/sysv4le.h\" ;;\n+\tesac\n \tcase ${target} in\n \t     powerpc64*)\n \t    \ttm_file=\"${tm_file} rs6000/default64.h rs6000/freebsd64.h\""}, {"sha": "390bc4b73e67d03fa1cbac87a3c9f0f15c0d4795", "filename": "gcc/config/rs6000/freebsd64.h", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfig%2Frs6000%2Ffreebsd64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfig%2Frs6000%2Ffreebsd64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ffreebsd64.h?ref=2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "patch": "@@ -99,8 +99,8 @@ extern int dot_symbols;\n #define ASM_SPEC64 \"-a64\"\n \n #define ASM_SPEC_COMMON \"%(asm_cpu) \\\n-%{,assembler|,assembler-with-cpp: %{mregnames} %{mno-regnames}} \\\n-%{mlittle} %{mlittle-endian} %{mbig} %{mbig-endian}\"\n+%{,assembler|,assembler-with-cpp: %{mregnames} %{mno-regnames}}\" \\\n+  ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n \n #undef\tSUBSUBTARGET_EXTRA_SPECS\n #define SUBSUBTARGET_EXTRA_SPECS\t\t\t\t\t\\\n@@ -122,9 +122,15 @@ extern int dot_symbols;\n     %{static:-Bstatic}} \\\n   %{symbolic:-Bsymbolic}\"\n \n+#undef  DEFAULT_ASM_ENDIAN\n #define LINK_OS_FREEBSD_SPEC32 \"-melf32ppc_fbsd \" LINK_OS_FREEBSD_SPEC_DEF\n-  \n+#if (TARGET_DEFAULT & MASK_LITTLE_ENDIAN)\n+#define DEFAULT_ASM_ENDIAN \" -mlittle\"\n+#define LINK_OS_FREEBSD_SPEC64 \"-melf64lppc_fbsd \" LINK_OS_FREEBSD_SPEC_DEF\n+#else\n+#define DEFAULT_ASM_ENDIAN \" -mbig\"\n #define LINK_OS_FREEBSD_SPEC64 \"-melf64ppc_fbsd \" LINK_OS_FREEBSD_SPEC_DEF\n+#endif\n \n #undef\tMULTILIB_DEFAULTS\n #define MULTILIB_DEFAULTS { \"m64\" }"}, {"sha": "eedd8626cfdf0604453d3c4956727fe430d89075", "filename": "gcc/configure", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "patch": "@@ -30185,6 +30185,9 @@ case \"$target:$tm_file\" in\n      *-*-linux*)\n      emul_name=\"-melf64ppc\"\n       ;;\n+     *le-*-freebsd*)\n+     emul_name=\"-melf64lppc_fbsd\"\n+      ;;\n      *-*-freebsd*)\n      emul_name=\"-melf64ppc_fbsd\"\n       ;;"}, {"sha": "ee982bee8676597dcb84026982d8aa341c589b91", "filename": "gcc/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=2a4183234a45ba28db5ce16cf3ccdd70cdef3b7c", "patch": "@@ -6274,6 +6274,9 @@ case \"$target:$tm_file\" in\n      *-*-linux*)\n      emul_name=\"-melf64ppc\"\n       ;;\n+     *le-*-freebsd*)\n+     emul_name=\"-melf64lppc_fbsd\"\n+      ;;\n      *-*-freebsd*)\n      emul_name=\"-melf64ppc_fbsd\"\n       ;;"}]}