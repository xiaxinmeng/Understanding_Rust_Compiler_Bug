{"sha": "99a1b0844ad0b3dc179f2a11a684a81caea6e63b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTlhMWIwODQ0YWQwYjNkYzE3OWYyYTExYTY4NGE4MWNhZWE2ZTYzYg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-04-09T09:24:06Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-04-09T09:24:06Z"}, "message": "target-supports.exp (check_effective_target_sparc_v9): New.\n\n\t* lib/target-supports.exp (check_effective_target_sparc_v9): New.\n\t(check_effective_target_sync_long_long): Add SPARC case.\n\t(check_effective_target_sync_long_long_runtime): Likewise.\n\t(check_effective_target_sync_int_long): Adjust SPARC case.\n\t(check_effective_target_sync_char_short): Likewise.\n\nFrom-SVN: r186241", "tree": {"sha": "0a6f5fa2fc35d3da07157d27d336587a5a5e4851", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a6f5fa2fc35d3da07157d27d336587a5a5e4851"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99a1b0844ad0b3dc179f2a11a684a81caea6e63b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99a1b0844ad0b3dc179f2a11a684a81caea6e63b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99a1b0844ad0b3dc179f2a11a684a81caea6e63b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99a1b0844ad0b3dc179f2a11a684a81caea6e63b/comments", "author": null, "committer": null, "parents": [{"sha": "5ff5b41ca3bbb8cc659d6ccb7b4dcebfa7678a6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ff5b41ca3bbb8cc659d6ccb7b4dcebfa7678a6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ff5b41ca3bbb8cc659d6ccb7b4dcebfa7678a6e"}], "stats": {"total": 38, "additions": 32, "deletions": 6}, "files": [{"sha": "0cdf06f6ebb420d229c60dfe8d6e053d4c9ea072", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99a1b0844ad0b3dc179f2a11a684a81caea6e63b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99a1b0844ad0b3dc179f2a11a684a81caea6e63b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=99a1b0844ad0b3dc179f2a11a684a81caea6e63b", "patch": "@@ -1,3 +1,11 @@\n+2012-04-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_sparc_v9): New.\n+\t(check_effective_target_sync_long_long): Add SPARC case.\n+\t(check_effective_target_sync_long_long_runtime): Likewise.\n+\t(check_effective_target_sync_int_long): Adjust SPARC case.\n+\t(check_effective_target_sync_char_short): Likewise.\n+\n 2012-04-08  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \t* gcc.target/sh/sh2a-prefetch.c: Rename to ..."}, {"sha": "1a253247f959f4ae9f9c8e5bd6b18b42ff73dd47", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 24, "deletions": 6, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99a1b0844ad0b3dc179f2a11a684a81caea6e63b/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99a1b0844ad0b3dc179f2a11a684a81caea6e63b/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=99a1b0844ad0b3dc179f2a11a684a81caea6e63b", "patch": "@@ -2551,7 +2551,22 @@ proc check_effective_target_ultrasparc_vis3_hw { } {\n     } \"-mcpu=niagara3\"]\n }\n \n-# Return 1 if this is a Sparc target with VIS enabled.\n+# Return 1 if this is a SPARC-V9 target.\n+\n+proc check_effective_target_sparc_v9 { } {\n+    if { [istarget sparc*-*-*] } {\n+\treturn [check_no_compiler_messages sparc_v9 object {\n+\t    int main (void) {\n+\t\tasm volatile (\"return %i7+8\");\n+\t\treturn 0;\n+\t    }\n+\t}]\n+    } else {\n+\treturn 0\n+    }\n+}\n+\n+# Return 1 if this is a SPARC target with VIS enabled.\n \n proc check_effective_target_sparc_vis { } {\n     if { [istarget sparc*-*-*] } {\n@@ -3730,7 +3745,8 @@ proc check_effective_target_sync_long_long { } {\n     if { [istarget x86_64-*-*]\n \t || [istarget i?86-*-*])\n \t || [istarget arm*-*-*]\n-\t || [istarget alpha*-*-*] } {\n+\t || [istarget alpha*-*-*]\n+\t || ([istarget sparc*-*-*] && [check_effective_target_lp64]) } {\n \treturn 1\n     } else {\n \treturn 0\n@@ -3775,6 +3791,10 @@ proc check_effective_target_sync_long_long_runtime { } {\n \t} \"\" ]\n     } elseif { [istarget alpha*-*-*] } {\n \treturn 1\n+    } elseif { ([istarget sparc*-*-*]\n+\t\t && [check_effective_target_lp64]\n+\t\t && [check_effective_target_ultrasparc_hw]) } {\n+\treturn 1\n     } else {\n \treturn 0\n     }\n@@ -3800,8 +3820,7 @@ proc check_effective_target_sync_int_long { } {\n \t     || [istarget hppa*-*linux*]\n \t     || [istarget s390*-*-*] \n \t     || [istarget powerpc*-*-*]\n-\t     || [istarget sparc64-*-*]\n-\t     || [istarget sparcv9-*-*]\n+\t     || ([istarget sparc*-*-*] && [check_effective_target_sparc_v9])\n \t     || [check_effective_target_mips_llsc] } {\n            set et_sync_int_long_saved 1\n         }\n@@ -3830,8 +3849,7 @@ proc check_effective_target_sync_char_short { } {\n \t     || [istarget hppa*-*linux*]\n \t     || [istarget s390*-*-*] \n \t     || [istarget powerpc*-*-*]\n-\t     || [istarget sparc64-*-*]\n-\t     || [istarget sparcv9-*-*]\n+\t     || ([istarget sparc*-*-*] && [check_effective_target_sparc_v9])\n \t     || [check_effective_target_mips_llsc] } {\n            set et_sync_char_short_saved 1\n         }"}]}