{"sha": "f240a230758a89d52799dc52606ec58963e248f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI0MGEyMzA3NThhODlkNTI3OTlkYzUyNjA2ZWM1ODk2M2UyNDhmMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-10-02T15:44:10Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-10-02T15:44:10Z"}, "message": "re PR tree-optimization/82387 (wrong code at -O1 and -Os on x86_64-linux-gnu in 64-bit mode)\n\n\tPR tree-optimization/82387\n\tPR tree-optimization/82388\n\tPR tree-optimization/82389\n\t* tree-ssa-dse.c (dse_classify_store): Test byte_tracking_enabled\n\tinstead of live_bytes non-NULL.\n\n\t* gcc.c-torture/compile/pr82389.c: New test.\n\t* gcc.c-torture/execute/pr82387.c: New test.\n\t* gcc.c-torture/execute/pr82388.c: New test.\n\nFrom-SVN: r253356", "tree": {"sha": "471e960cbada889c4272c30701c909bb5580a110", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/471e960cbada889c4272c30701c909bb5580a110"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f240a230758a89d52799dc52606ec58963e248f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f240a230758a89d52799dc52606ec58963e248f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f240a230758a89d52799dc52606ec58963e248f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f240a230758a89d52799dc52606ec58963e248f2/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "804b7cc438701d94db8f958c2211c59f0357b757", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/804b7cc438701d94db8f958c2211c59f0357b757", "html_url": "https://github.com/Rust-GCC/gccrs/commit/804b7cc438701d94db8f958c2211c59f0357b757"}], "stats": {"total": 78, "additions": 76, "deletions": 2}, "files": [{"sha": "7ee72e4708e0dd6c69104b897fe13806533ef898", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f240a230758a89d52799dc52606ec58963e248f2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f240a230758a89d52799dc52606ec58963e248f2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f240a230758a89d52799dc52606ec58963e248f2", "patch": "@@ -1,3 +1,11 @@\n+2017-10-02  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/82387\n+\tPR tree-optimization/82388\n+\tPR tree-optimization/82389\n+\t* tree-ssa-dse.c (dse_classify_store): Test byte_tracking_enabled\n+\tinstead of live_bytes non-NULL.\n+\n 2017-10-02  Georg-Johann Lay  <avr@gjlay.de>\n \n \tPR target/41076"}, {"sha": "2b75536209a771be0e4103ee992c1367bc9cd853", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f240a230758a89d52799dc52606ec58963e248f2", "patch": "@@ -1,3 +1,12 @@\n+2017-10-02  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/82387\n+\tPR tree-optimization/82388\n+\tPR tree-optimization/82389\n+\t* gcc.c-torture/compile/pr82389.c: New test.\n+\t* gcc.c-torture/execute/pr82387.c: New test.\n+\t* gcc.c-torture/execute/pr82388.c: New test.\n+\n 2017-10-02  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/79180"}, {"sha": "798bd841e8c0d73bf79bfb4d338034d73d11c698", "filename": "gcc/testsuite/gcc.c-torture/compile/pr82389.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr82389.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr82389.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr82389.c?ref=f240a230758a89d52799dc52606ec58963e248f2", "patch": "@@ -0,0 +1,13 @@\n+/* PR tree-optimization/82389 */\n+\n+void bar (short);\n+\n+void\n+foo (void)\n+{\n+  short a[5];\n+  int b;\n+  for (b = -1290603998; b < 5; b++)\n+    a[b] = 0;\n+  bar (a[3]);\n+}"}, {"sha": "ead1a2a70daf071b6a6ba6e540f4d6eed437c259", "filename": "gcc/testsuite/gcc.c-torture/execute/pr82387.c", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr82387.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr82387.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr82387.c?ref=f240a230758a89d52799dc52606ec58963e248f2", "patch": "@@ -0,0 +1,27 @@\n+/* PR tree-optimization/82387 */\n+\n+struct A { int b; };\n+int f = 1;\n+\n+struct A\n+foo (void)\n+{\n+  struct A h[] = { \n+    {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, \n+    {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, \n+    {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, \n+    {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, \n+    {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, \n+    {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, \n+    {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, {1}, \n+  };\n+  return h[24];\n+}\n+\n+int\n+main ()\n+{\n+  struct A i = foo (), j = i;\n+  j.b && (f = 0);\n+  return f; \n+}"}, {"sha": "51e30f88269c7d373d24c027914f92d918fdf05a", "filename": "gcc/testsuite/gcc.c-torture/execute/pr82388.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr82388.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr82388.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr82388.c?ref=f240a230758a89d52799dc52606ec58963e248f2", "patch": "@@ -0,0 +1,17 @@\n+/* PR tree-optimization/82388 */\n+\n+struct A { int b; int c; int d; } e;\n+\n+struct A\n+foo (void)\n+{\n+  struct A h[30] = {{0,0,0}};\n+  return h[29]; \n+}\n+\n+int\n+main ()\n+{\n+  e = foo ();\n+  return e.b; \n+}"}, {"sha": "6f58fffc6938e2c8dade8668e7e212c921e570af", "filename": "gcc/tree-ssa-dse.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftree-ssa-dse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f240a230758a89d52799dc52606ec58963e248f2/gcc%2Ftree-ssa-dse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dse.c?ref=f240a230758a89d52799dc52606ec58963e248f2", "patch": "@@ -577,10 +577,10 @@ dse_classify_store (ao_ref *ref, gimple *stmt, gimple **use_stmt,\n \t  /* If the statement is a use the store is not dead.  */\n \t  else if (ref_maybe_used_by_stmt_p (use_stmt, ref))\n \t    {\n-\t      /* Handle common cases where we can easily build a ao_ref\n+\t      /* Handle common cases where we can easily build an ao_ref\n \t\t structure for USE_STMT and in doing so we find that the\n \t\t references hit non-live bytes and thus can be ignored.  */\n-\t      if (live_bytes && (!gimple_vdef (use_stmt) || !temp))\n+\t      if (byte_tracking_enabled && (!gimple_vdef (use_stmt) || !temp))\n \t\t{\n \t\t  if (is_gimple_assign (use_stmt))\n \t\t    {"}]}