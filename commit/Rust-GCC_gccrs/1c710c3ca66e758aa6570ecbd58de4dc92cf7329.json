{"sha": "1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWM3MTBjM2NhNjZlNzU4YWE2NTcwZWNiZDU4ZGU0ZGM5MmNmNzMyOQ==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "dan@codesourcery.com", "date": "2007-02-09T15:14:37Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2007-02-09T15:14:37Z"}, "message": "Makefile.tpl (build_alias, [...]): Use noncanonical equivalents.\n\n\t* Makefile.tpl (build_alias, host_alias, target_alias): Use\n\tnoncanonical equivalents.\n\t* configure.in: Rename to...\n\t* configure.ac: ...this.  Update AC_PREREQ.  Prevent error for\n\tAS_FOR_TARGET.  Set build_noncanonical, host_noncanonical, and\n\ttarget_noncanonical.  Use them.  Rewrite removal of configure\n\targuments for autoconf 2.59.  Discard variable settings.  Force\n\tprogram_transform_name for native tools.\n\n\t* Makefile.in: Regenerated.\n\t* configure: Regenerated with autoconf 2.59.\n\n\t* src-release (DEVO_SUPPORT, do-proto-toplev): Expect configure.ac.\n\n\t* acx.m4 (ACX_CHECK_INSTALLED_TARGET_TOOL): Avoid AC_PATH_PROG\n\twith an empty path.\n\nFrom-SVN: r121751", "tree": {"sha": "2347e7eec03baaf71419b7253fe2ad78abf5a76c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2347e7eec03baaf71419b7253fe2ad78abf5a76c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/comments", "author": null, "committer": null, "parents": [{"sha": "a5ea7a0be70cae76a6703a05dbea5543ca355c16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5ea7a0be70cae76a6703a05dbea5543ca355c16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5ea7a0be70cae76a6703a05dbea5543ca355c16"}], "stats": {"total": 8494, "additions": 5713, "deletions": 2781}, "files": [{"sha": "4d5bf6c60a3679e04161e4b8e309b5f2aca178dc", "filename": "ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "patch": "@@ -1,3 +1,17 @@\n+2007-02-09  Daniel Jacobowitz  <dan@codesourcery.com>\n+\n+\t* Makefile.tpl (build_alias, host_alias, target_alias): Use\n+\tnoncanonical equivalents.\n+\t* configure.in: Rename to...\n+\t* configure.ac: ...this.  Update AC_PREREQ.  Prevent error for\n+\tAS_FOR_TARGET.  Set build_noncanonical, host_noncanonical, and\n+\ttarget_noncanonical.  Use them.  Rewrite removal of configure\n+\targuments for autoconf 2.59.  Discard variable settings.  Force\n+\tprogram_transform_name for native tools.\n+\n+\t* Makefile.in: Regenerated.\n+\t* configure: Regenerated with autoconf 2.59.\n+\n 2007-02-07  Roman Zippel <zippel@linux-m68k.org>\n \n         * MAINTAINERS (Write After Approval): Add myself."}, {"sha": "21806cc33f4ae2d2c0b15bc3df8eefe1fc2d073f", "filename": "Makefile.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "patch": "@@ -25,15 +25,15 @@\n # -------------------------------\n VPATH=@srcdir@\n \n-build_alias=@build_alias@\n+build_alias=@build_noncanonical@\n build_vendor=@build_vendor@\n build_os=@build_os@\n build=@build@\n-host_alias=@host_alias@\n+host_alias=@host_noncanonical@\n host_vendor=@host_vendor@\n host_os=@host_os@\n host=@host@\n-target_alias=@target_alias@\n+target_alias=@target_noncanonical@\n target_vendor=@target_vendor@\n target_os=@target_os@\n target=@target@"}, {"sha": "a3c5093b1b4197de7cece614cc3f1aa6792ff973", "filename": "Makefile.tpl", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/Makefile.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/Makefile.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.tpl?ref=1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "patch": "@@ -28,15 +28,15 @@ in\n # -------------------------------\n VPATH=@srcdir@\n \n-build_alias=@build_alias@\n+build_alias=@build_noncanonical@\n build_vendor=@build_vendor@\n build_os=@build_os@\n build=@build@\n-host_alias=@host_alias@\n+host_alias=@host_noncanonical@\n host_vendor=@host_vendor@\n host_os=@host_os@\n host=@host@\n-target_alias=@target_alias@\n+target_alias=@target_noncanonical@\n target_vendor=@target_vendor@\n target_os=@target_os@\n target=@target@\n@@ -1588,7 +1588,7 @@ config.status: configure\n \n # Rebuilding configure.\n AUTOCONF = autoconf\n-$(srcdir)/configure: @MAINT@ $(srcdir)/configure.in $(srcdir)/config/acx.m4\n+$(srcdir)/configure: @MAINT@ $(srcdir)/configure.ac $(srcdir)/config/acx.m4\n \tcd $(srcdir) && $(AUTOCONF)\n \n # ------------------------------"}, {"sha": "aee290ada76bf1e3c7303dbb9cc091c063f6f0d0", "filename": "config/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "patch": "@@ -1,3 +1,8 @@\n+2007-02-09  Daniel Jacobowitz  <dan@codesourcery.com>\n+\n+\t* acx.m4 (ACX_CHECK_INSTALLED_TARGET_TOOL): Avoid AC_PATH_PROG\n+\twith an empty path.\n+\n 2007-02-07  Bruno Haible  <bruno@clisp.org>\n \n \tPR libgomp/28468"}, {"sha": "c5e7ad0fc1426c6705d3ec39ccf849d2cc0f7f2c", "filename": "config/acx.m4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/config%2Facx.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/config%2Facx.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Facx.m4?ref=1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "patch": "@@ -300,7 +300,7 @@ if test -z \"$ac_cv_path_$1\" ; then\n     ac_cv_path_$1=[$]$1\n   fi\n fi\n-if test -z \"$ac_cv_path_$1\" ; then\n+if test -z \"$ac_cv_path_$1\" && test -n \"$gcc_cv_tool_dirs\"; then\n   AC_PATH_PROG([$1], [$2], [], [$gcc_cv_tool_dirs])\n fi\n if test -z \"$ac_cv_path_$1\" ; then"}, {"sha": "b5af9e86466338449f21653aeab8a9fa9dfa8691", "filename": "configure", "status": "modified", "additions": 5582, "deletions": 2732, "changes": 8314, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=1c710c3ca66e758aa6570ecbd58de4dc92cf7329"}, {"sha": "b0df6e7a156bee4036c8901ab7562475a9745582", "filename": "configure.ac", "status": "renamed", "additions": 104, "deletions": 41, "changes": 145, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c710c3ca66e758aa6570ecbd58de4dc92cf7329/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=1c710c3ca66e758aa6570ecbd58de4dc92cf7329", "patch": "@@ -21,10 +21,27 @@\n sinclude(config/acx.m4)\n \n AC_INIT(move-if-change)\n-AC_PREREQ(2.13)\n+AC_PREREQ(2.59)\n+\n+# Find the build, host, and target systems.\n+ACX_NONCANONICAL_BUILD\n+ACX_NONCANONICAL_HOST\n+ACX_NONCANONICAL_TARGET\n+\n+dnl Autoconf 2.5x and later will set a default program prefix if\n+dnl --target was used, even if it was the same as --host.  Disable\n+dnl that behavior.  This must be done before AC_CANONICAL_SYSTEM\n+dnl to take effect.\n+test \"$host_noncanonical\" = \"$target_noncanonical\" &&\n+  test \"$program_prefix$program_suffix$program_transform_name\" = \\\n+    NONENONEs,x,x, &&\n+  program_transform_name=s,y,y,\n+\n AC_CANONICAL_SYSTEM\n AC_ARG_PROGRAM\n \n+m4_pattern_allow([^AS_FOR_TARGET$])dnl\n+\n # Get 'install' or 'install-sh' and its variants.\n AC_PROG_INSTALL\n ACX_PROG_LN\n@@ -1016,9 +1033,9 @@ if test \"${build}\" != \"${host}\" ; then\n   # If we are doing a Canadian Cross, in which the host and build systems\n   # are not the same, we set reasonable default values for the tools.\n \n-  CC=${CC-${host_alias}-gcc}\n+  CC=${CC-${host_noncanonical}-gcc}\n   CFLAGS=${CFLAGS-\"-g -O2\"}\n-  CXX=${CXX-${host_alias}-c++}\n+  CXX=${CXX-${host_noncanonical}-c++}\n   CXXFLAGS=${CXXFLAGS-\"-g -O2\"}\n   CC_FOR_BUILD=${CC_FOR_BUILD-gcc}\n \n@@ -1584,7 +1601,7 @@ if test x\"${with_headers}\" != x && test x\"${with_headers}\" != xno ; then\n     \"\") x=${prefix} ;;\n     *) x=${exec_prefix} ;;\n     esac\n-    copy_dirs=\"${copy_dirs} ${with_headers} $x/${target_alias}/sys-include\"\n+    copy_dirs=\"${copy_dirs} ${with_headers} $x/${target_noncanonical}/sys-include\"\n   fi\n fi\n \n@@ -1604,7 +1621,7 @@ if test x\"${with_libs}\" != x && test x\"${with_libs}\" != xno ; then\n     *) x=${exec_prefix} ;;\n     esac\n     for l in ${with_libs}; do\n-      copy_dirs=\"$l $x/${target_alias}/lib ${copy_dirs}\"\n+      copy_dirs=\"$l $x/${target_noncanonical}/lib ${copy_dirs}\"\n     done\n   fi\n fi\n@@ -1804,7 +1821,7 @@ esac\n \n # Some systems (e.g., one of the i386-aix systems the gas testers are\n # using) don't handle \"\\$\" correctly, so don't use it here.\n-tooldir='${exec_prefix}'/${target_alias}\n+tooldir='${exec_prefix}'/${target_noncanonical}\n build_tooldir=${tooldir}\n \n # Create a .gdbinit file which runs the one in srcdir\n@@ -2068,40 +2085,86 @@ serialization_dependencies=serdep.tmp\n AC_SUBST_FILE(serialization_dependencies)\n \n # Base args.  Strip norecursion, cache-file, srcdir, host, build,\n-# target and nonopt.  These are the ones we might not want to pass\n-# down to subconfigures.  Also strip program-prefix, program-suffix,\n-# and program-transform-name, so that we can pass down a consistent\n-# program-transform-name.  If autoconf has put single quotes around\n-# any of these arguments (because they contain shell metacharacters)\n-# then this will fail; in practice this only happens for\n-# --program-transform-name, so be sure to override --program-transform-name\n-# at the end of the argument list.\n-# These will be expanded by make, so quote '$'.\n-cat <<\\EOF_SED > conftestsed\n-s/ --no[[^ ]]*/ /g\n-s/ --c[[a-z-]]*[[= ]][[^ ]]*//g\n-s/ --sr[[a-z-]]*[[= ]][[^ ]]*//g\n-s/ --ho[[a-z-]]*[[= ]][[^ ]]*//g\n-s/ --bu[[a-z-]]*[[= ]][[^ ]]*//g\n-s/ --t[[a-z-]]*[[= ]][[^ ]]*//g\n-s/ --program-[[pst]][[a-z-]]*[[= ]][[^ ]]*//g\n-s/ -cache-file[[= ]][[^ ]]*//g\n-s/ -srcdir[[= ]][[^ ]]*//g\n-s/ -host[[= ]][[^ ]]*//g\n-s/ -build[[= ]][[^ ]]*//g\n-s/ -target[[= ]][[^ ]]*//g\n-s/ -program-prefix[[= ]][[^ ]]*//g\n-s/ -program-suffix[[= ]][[^ ]]*//g\n-s/ -program-transform-name[[= ]][[^ ]]*//g\n-s/ [[^' -][^ ]*] / /\n-s/^ *//;s/ *$//\n-s,\\$,$$,g\n-EOF_SED\n-sed -f conftestsed <<EOF_SED > conftestsed.out\n- ${ac_configure_args} \n-EOF_SED\n-baseargs=`cat conftestsed.out`\n-rm -f conftestsed conftestsed.out\n+# target, nonopt, and variable assignments.  These are the ones we\n+# might not want to pass down to subconfigures.  Also strip\n+# program-prefix, program-suffix, and program-transform-name, so that\n+# we can pass down a consistent program-transform-name.\n+baseargs=\n+keep_next=no\n+skip_next=no\n+eval \"set -- $ac_configure_args\"\n+for ac_arg; do\n+  if test X\"$skip_next\" = X\"yes\"; then\n+    skip_next=no\n+    continue\n+  fi\n+  if test X\"$keep_next\" = X\"yes\"; then\n+    case $ac_arg in\n+      *\\'*)\n+\tac_arg=`echo \"$ac_arg\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"` ;;\n+    esac\n+    baseargs=\"$baseargs '$ac_arg'\"\n+    keep_next=no\n+    continue\n+  fi\n+\n+  # Handle separated arguments.  Based on the logic generated by\n+  # autoconf 2.59.\n+  case $ac_arg in\n+    *=* | --config-cache | -C | -disable-* | --disable-* \\\n+      | -enable-* | --enable-* | -gas | --g* | -nfp | --nf* \\\n+      | -q | -quiet | --q* | -silent | --sil* | -v | -verb* \\\n+      | -with-* | --with-* | -without-* | --without-* | --x)\n+      separate_arg=no\n+      ;;\n+    -*)\n+      separate_arg=yes\n+      ;;\n+    *)\n+      separate_arg=no\n+      ;;\n+  esac\n+\n+  case \"$ac_arg\" in\n+    --no*)\n+      continue\n+      ;;\n+    --c* | \\\n+    --sr* | \\\n+    --ho* | \\\n+    --bu* | \\\n+    --t* | \\\n+    --program-* | \\\n+    -cache_file* | \\\n+    -srcdir* | \\\n+    -host* | \\\n+    -build* | \\\n+    -target* | \\\n+    -program-prefix* | \\\n+    -program-suffix* | \\\n+    -program-transform-name* )\n+      skip_next=$separate_arg\n+      continue\n+      ;;\n+    -*)\n+      # An option.  Add it.\n+      case $ac_arg in\n+\t*\\'*)\n+\t  ac_arg=`echo \"$ac_arg\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"` ;;\n+      esac\n+      baseargs=\"$baseargs '$ac_arg'\"\n+      keep_next=$separate_arg\n+      ;;\n+    *)\n+      # Either a variable assignment, or a nonopt (triplet).  Don't\n+      # pass it down; let the Makefile handle this.\n+      continue\n+      ;;\n+  esac\n+done\n+# Remove the initial space we just introduced and, as these will be\n+# expanded by make, quote '$'.\n+baseargs=`echo \"x$baseargs\" | sed -e 's/^x *//' -e 's,\\\\$,$$,g'`\n \n # Add in --program-transform-name, after --program-prefix and\n # --program-suffix have been applied to it.  Autoconf has already\n@@ -2144,7 +2207,7 @@ target_configargs=${baseargs}\n # sorts of decisions they want to make on this basis.  Please consider\n # this option to be deprecated.  FIXME.\n if test x${is_cross_compiler} = xyes ; then\n-  target_configargs=\"--with-cross-host=${host_alias} ${target_configargs}\"\n+  target_configargs=\"--with-cross-host=${host_noncanonical} ${target_configargs}\"\n fi\n \n # Default to --enable-multilib.", "previous_filename": "configure.in"}]}