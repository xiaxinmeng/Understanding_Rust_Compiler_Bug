{"sha": "a63c3ebc93509036005ab073202d44ef23d3a4c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTYzYzNlYmM5MzUwOTAzNjAwNWFiMDczMjAyZDQ0ZWYyM2QzYTRjOQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-07-29T13:15:13Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-07-29T13:15:13Z"}, "message": "(gcc_plt_call): Rewrite to avoid the need for being called by _sr4export.\n\n(gcc_plt_call): Rewrite to avoid the need for being called by\n_sr4export.  Inline expand $$dyncall to avoid the need for long-call\nand PIC support.\n\nFrom-SVN: r10194", "tree": {"sha": "f60899d7cdc15f3f096b627f344bdd6ee650ce76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f60899d7cdc15f3f096b627f344bdd6ee650ce76"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a63c3ebc93509036005ab073202d44ef23d3a4c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a63c3ebc93509036005ab073202d44ef23d3a4c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a63c3ebc93509036005ab073202d44ef23d3a4c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a63c3ebc93509036005ab073202d44ef23d3a4c9/comments", "author": null, "committer": null, "parents": [{"sha": "2c545da55ac59a1b85ab68868cbf3a4591066507", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c545da55ac59a1b85ab68868cbf3a4591066507", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c545da55ac59a1b85ab68868cbf3a4591066507"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "ea964d3af6f7bc70c294e2bafa8c29f1fd3e22bd", "filename": "gcc/config/pa/lib2funcs.asm", "status": "modified", "additions": 21, "deletions": 5, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a63c3ebc93509036005ab073202d44ef23d3a4c9/gcc%2Fconfig%2Fpa%2Flib2funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a63c3ebc93509036005ab073202d44ef23d3a4c9/gcc%2Fconfig%2Fpa%2Flib2funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Flib2funcs.asm?ref=a63c3ebc93509036005ab073202d44ef23d3a4c9", "patch": "@@ -1,5 +1,5 @@\n ;  Subroutines for calling unbound dynamic functions from within GDB for HPPA.\n-;  Copyright (C) 1994 Free Software Foundation, Inc.\n+;  Copyright (C) 1994, 1995 Free Software Foundation, Inc.\n \n ;  This file is part of GNU CC.\n \n@@ -36,12 +36,28 @@\n \t.EXPORT __gcc_plt_call,ENTRY,PRIV_LEV=3,RTNVAL=GR\n __gcc_plt_call\n \t.PROC\n-\t.CALLINFO FRAME=64,CALLS,SAVE_RP\n+\t.CALLINFO\n \t.ENTRY\n-\tstw %r2,-8(0,%r30)\n-\tbl $$dyncall,%r31\n+\t; Our return address comes in %r31, not %r2!\n+\tstw %r31,-8(0,%r30)\n+\n+\t; An inline version of dyncall so we don't have to worry\n+\t; about long calls to millicode, PIC and other complexities.\n+\tbb,>=,n %r22,30,L$foo\n+        depi 0,31,2,%r22\n+        ldw 4(%r22),%r19\n+        ldw 0(%r22),%r22\n+L$foo\n+        ldsid (%r22),%r1\n+        mtsp %r1,%sr0\n+        ble 0(%sr0,%r22)\n \tcopy %r31,%r2\n \tldw -8(0,%r30),%r2\n-\tbv,n 0(%r2)\n+\n+\t; We're going to be returning to a stack address, so we\n+\t; need to do an intra-space return.\n+\tldsid (%rp),%r1\n+\tmtsp %r1,%sr0\n+\tbe,n 0(%sr0,%rp)\n \t.EXIT\n \t.PROCEND"}]}