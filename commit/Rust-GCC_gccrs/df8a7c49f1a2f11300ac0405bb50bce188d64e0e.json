{"sha": "df8a7c49f1a2f11300ac0405bb50bce188d64e0e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY4YTdjNDlmMWEyZjExMzAwYWMwNDA1YmI1MGJjZTE4OGQ2NGUwZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2005-02-24T21:33:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2005-02-24T21:33:04Z"}, "message": "re PR target/19019 (GCC ldouble format incompatibility with XLC long double)\n\n\tPR target/19019\n\t* mklibgcc.in: Pass -DSHARED when compiling all *_s${objext} objects.\n\t* config/rs6000/darwin-ldouble.c: Only use the .symver directives\n\tif SHARED is defined.\n\nFrom-SVN: r95515", "tree": {"sha": "1f6c24442df9e3db434be839661858430df1aa78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f6c24442df9e3db434be839661858430df1aa78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df8a7c49f1a2f11300ac0405bb50bce188d64e0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df8a7c49f1a2f11300ac0405bb50bce188d64e0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df8a7c49f1a2f11300ac0405bb50bce188d64e0e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df8a7c49f1a2f11300ac0405bb50bce188d64e0e/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4b2420b0d350ad4412f415b3464c0cde6039b7fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b2420b0d350ad4412f415b3464c0cde6039b7fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b2420b0d350ad4412f415b3464c0cde6039b7fe"}], "stats": {"total": 39, "additions": 23, "deletions": 16}, "files": [{"sha": "06a9410f4b5f91df63ee7fdcda9a0a219b646683", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df8a7c49f1a2f11300ac0405bb50bce188d64e0e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df8a7c49f1a2f11300ac0405bb50bce188d64e0e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=df8a7c49f1a2f11300ac0405bb50bce188d64e0e", "patch": "@@ -1,5 +1,10 @@\n 2005-02-24  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR target/19019\n+\t* mklibgcc.in: Pass -DSHARED when compiling all *_s${objext} objects.\n+\t* config/rs6000/darwin-ldouble.c: Only use the .symver directives\n+\tif SHARED is defined.\n+\n \tPR target/20196\n \t* config/rs6000/rs6000.md (LTU, GTU sCC splitters): Add earlyclobber,\n \tallow splitting only if operands 0 and 3 don't overlap."}, {"sha": "b394d5d99bfb241ff6ccf1f8159cdf06a34529ed", "filename": "gcc/config/rs6000/darwin-ldouble.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df8a7c49f1a2f11300ac0405bb50bce188d64e0e/gcc%2Fconfig%2Frs6000%2Fdarwin-ldouble.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df8a7c49f1a2f11300ac0405bb50bce188d64e0e/gcc%2Fconfig%2Frs6000%2Fdarwin-ldouble.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fdarwin-ldouble.c?ref=df8a7c49f1a2f11300ac0405bb50bce188d64e0e", "patch": "@@ -67,7 +67,7 @@ extern long double __gcc_qsub (double, double, double, double);\n extern long double __gcc_qmul (double, double, double, double);\n extern long double __gcc_qdiv (double, double, double, double);\n \n-#ifdef __ELF__\n+#if defined __ELF__ && defined SHARED\n /* Provide definitions of the old symbol names to statisfy apps and\n    shared libs built against an older libgcc.  To access the _xlq\n    symbols an explicit version reference is needed, so these won't"}, {"sha": "d4df66a20e3f66a3ed8226ee99420a4c9e842771", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 17, "deletions": 15, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df8a7c49f1a2f11300ac0405bb50bce188d64e0e/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df8a7c49f1a2f11300ac0405bb50bce188d64e0e/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=df8a7c49f1a2f11300ac0405bb50bce188d64e0e", "patch": "@@ -1,6 +1,6 @@\n #!/bin/sh\n # Construct makefile for libgcc.\n-#   Copyright (C) 2000, 2002, 2003 Free Software Foundation, Inc.\n+#   Copyright (C) 2000, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.\n #\n # This file is part of GCC.\n \n@@ -72,6 +72,7 @@ fi\n # Build lines.\n \n gcc_compile='$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) $(INCLUDES)'\n+gcc_s_compile=\"$gcc_compile -DSHARED\"\n make_compile='$(MAKE) GCC_FOR_TARGET=\"$(GCC_FOR_TARGET)\" \\\n \t  AR_FOR_TARGET=\"$(AR_FOR_TARGET)\" \\\n \t  AR_CREATE_FOR_TARGET=\"$(AR_CREATE_FOR_TARGET)\" \\\n@@ -218,7 +219,7 @@ for ml in $MULTILIBS; do\n       outV=\"libgcc/${dir}/${name}.vis\"\n \n       echo ${outS}: stmp-dirs '$(srcdir)/config/$(LIB1ASMSRC)'\n-      echo \"\t$gcc_compile\" $flags -DL$name -xassembler-with-cpp \\\n+      echo \"\t$gcc_s_compile\" $flags -DL$name -xassembler-with-cpp \\\n \t  -c '$(srcdir)/config/$(LIB1ASMSRC)' -o $outS\n \n       echo ${out}: stmp-dirs '$(srcdir)/config/$(LIB1ASMSRC)' ${outV}\n@@ -251,7 +252,8 @@ for ml in $MULTILIBS; do\n       outS=\"libgcc/${dir}/${name}_s${objext}\"\n \n       echo $outS: $libgcc2_c_dep\n-      echo \"\t$gcc_compile\" $flags -DL$name -c '$(srcdir)/libgcc2.c' -o $outS\n+      echo \"\t$gcc_s_compile\" $flags -DL$name -c '$(srcdir)/libgcc2.c' \\\n+\t-o $outS\n \n       echo $out: $libgcc2_c_dep\n       echo \"\t$gcc_compile\" $flags -DL$name '$(vis_hide)' \\\n@@ -285,7 +287,7 @@ for ml in $MULTILIBS; do\n       outS=\"libgcc/${dir}/${name}_s${objext}\"\n \n       echo $outS: $libgcc2_c_dep\n-      echo \"\t$gcc_compile\" $flags -DL$name \\\n+      echo \"\t$gcc_s_compile\" $flags -DL$name \\\n         -fexceptions -fnon-call-exceptions -c '$(srcdir)/libgcc2.c' -o $outS\n \n       echo $out: $libgcc2_c_dep\n@@ -317,7 +319,7 @@ for ml in $MULTILIBS; do\n \toutS=\"libgcc/${dir}/${name}_s${objext}\"\n \n \techo $outS: $FPBIT $fpbit_c_dep\n-\techo \"\t$gcc_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name \\\n+\techo \"\t$gcc_s_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name \\\n \t  -c $FPBIT -o $outS\n \n         echo $out: $FPBIT $fpbit_c_dep\n@@ -347,7 +349,7 @@ for ml in $MULTILIBS; do\n \toutS=\"libgcc/${dir}/${name}_s${objext}\"\n \n \techo $outS: $DPBIT $fpbit_c_dep\n-\techo \"\t$gcc_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name \\\n+\techo \"\t$gcc_s_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name \\\n \t  -c $DPBIT -o $outS\n \n         echo $out: $DPBIT $fpbit_c_dep\n@@ -377,7 +379,7 @@ for ml in $MULTILIBS; do\n \toutS=\"libgcc/${dir}/${name}_s${objext}\"\n \n \techo $outS: $TPBIT $fpbit_c_dep\n-\techo \"\t$gcc_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name \\\n+\techo \"\t$gcc_s_compile\" -DFINE_GRAINED_LIBRARIES $flags -DL$name \\\n \t  -c $TPBIT -o $outS\n \n         echo $out: $TPBIT $fpbit_c_dep\n@@ -411,7 +413,7 @@ for ml in $MULTILIBS; do\n       case $file in\n \t*.c)\n \t  echo $outS: stmp-dirs $file $libgcc_dep\n-\t  echo \"\t$gcc_compile\" $flags -c $file -o $outS\n+\t  echo \"\t$gcc_s_compile\" $flags -c $file -o $outS\n \n \t  echo $out: stmp-dirs $file $libgcc_dep\n \t  echo \"\t$gcc_compile\" $flags '$(vis_hide)' -c $file -o $out\n@@ -421,7 +423,7 @@ for ml in $MULTILIBS; do\n \t  outV=\"libgcc/${dir}/${oname}.vis\"\n \n \t  echo $outS: stmp-dirs $file $libgcc_dep\n-\t  echo \"\t$gcc_compile\" $flags -xassembler-with-cpp \\\n+\t  echo \"\t$gcc_s_compile\" $flags -xassembler-with-cpp \\\n \t         -c $file -o $outS\n \n \t  echo $out: stmp-dirs $file $libgcc_dep $outV\n@@ -533,13 +535,13 @@ for ml in $MULTILIBS; do\n \n       name=`echo $file | sed -e 's/[.]c$//'`\n       oname=`echo $name | sed -e 's,.*/,,'`\n-      out=\"libgcc/${dir}/${oname}_s${objext}\"\n+      outS=\"libgcc/${dir}/${oname}_s${objext}\"\n \n-      echo $out: stmp-dirs $file $LIB2ADDEHDEP $libgcc_dep\n-      echo \"\t$gcc_compile\" $flags -fexceptions -c $file -o $out\n-      echo $libgcc_s_so: $out\n+      echo $outS: stmp-dirs $file $LIB2ADDEHDEP $libgcc_dep\n+      echo \"\t$gcc_s_compile\" $flags -fexceptions -c $file -o $outS\n+      echo $libgcc_s_so: $outS\n       if [ \"$SHLIB_MKMAP\" ]; then\n-\techo libgcc/${dir}/libgcc.map: $out\n+\techo libgcc/${dir}/libgcc.map: $outS\n       fi\n     done\n \n@@ -592,7 +594,7 @@ for ml in $MULTILIBS; do\n \techo \"\t$gcc_compile $flags -fexceptions \\$(vis_hide) -c $file -o $out\"\n \n \techo $outS: stmp-dirs $file $LIBUNWINDDEP\n-\techo \"\t$gcc_compile $flags -fexceptions -DSHARED -c $file -o $outS\"\n+\techo \"\t$gcc_s_compile $flags -fexceptions -c $file -o $outS\"\n \n \techo $libunwind_a: $out\n \techo $libunwind_so: $outS"}]}