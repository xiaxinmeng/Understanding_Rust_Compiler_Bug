{"sha": "13c931c93961cdaa85b6fe77f455bae1c9b19b98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNjOTMxYzkzOTYxY2RhYTg1YjZmZTc3ZjQ1NWJhZTFjOWIxOWI5OA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-02-02T08:09:37Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-02-02T08:09:37Z"}, "message": "re PR tree-optimization/52073 (ICE: vector VEC(vec_void_p,base) index domain error, in vinfo_for_stmt at tree-vectorizer.h:620)\n\n\tPR tree-optimization/52073\n\t* tree-vect-stmts.c (vect_mark_relevant): When checking uses of\n\ta pattern stmt for pattern uses, ignore uses outside of the loop.\n\n\t* gcc.c-torture/compile/pr52073.c: New test.\n\nFrom-SVN: r183829", "tree": {"sha": "a6ddb2038a27e4777cb0c3f455a8e0ce370e9e45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6ddb2038a27e4777cb0c3f455a8e0ce370e9e45"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13c931c93961cdaa85b6fe77f455bae1c9b19b98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13c931c93961cdaa85b6fe77f455bae1c9b19b98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13c931c93961cdaa85b6fe77f455bae1c9b19b98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13c931c93961cdaa85b6fe77f455bae1c9b19b98/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "10f5ffa4e9ec1e8393eecf074e9a554d7c0b9c66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10f5ffa4e9ec1e8393eecf074e9a554d7c0b9c66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10f5ffa4e9ec1e8393eecf074e9a554d7c0b9c66"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "26beb117439ae9b967721ba34aec3bc4ca1a9de5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=13c931c93961cdaa85b6fe77f455bae1c9b19b98", "patch": "@@ -1,3 +1,9 @@\n+2012-02-02  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/52073\n+\t* tree-vect-stmts.c (vect_mark_relevant): When checking uses of\n+\ta pattern stmt for pattern uses, ignore uses outside of the loop.\n+\n 2012-02-01  Georg-Johann Lay  <avr@gjlay.de>\n \n \t* config/avr/avr.c: Resolve all AS1 and AS2 macros."}, {"sha": "a6f4fc2d028f5fe1196e9e383ab2e75d2df5a01c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=13c931c93961cdaa85b6fe77f455bae1c9b19b98", "patch": "@@ -1,3 +1,8 @@\n+2012-02-02  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/52073\n+\t* gcc.c-torture/compile/pr52073.c: New test.\n+\n 2012-02-01  Thomas K\u00f6nig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/51958"}, {"sha": "19056e1ead2d236d09b4b799bb9e35dc8b7a5361", "filename": "gcc/testsuite/gcc.c-torture/compile/pr52073.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr52073.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr52073.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr52073.c?ref=13c931c93961cdaa85b6fe77f455bae1c9b19b98", "patch": "@@ -0,0 +1,28 @@\n+/* PR tree-optimization/52073 */\n+\n+int a, b, c, d, e, f;\n+\n+void\n+foo (int x)\n+{\n+  e = 1;\n+  for (;;)\n+    {\n+      int g = c;\n+      if (x)\n+\t{\n+\t  if (e)\n+\t    continue;\n+\t  while (a)\n+\t    --f;\n+\t}\n+      else\n+\tfor (b = 5; b; b--)\n+\t  {\n+\t    d = g;\n+\t    g = 0 == d;\n+\t  }\n+      if (!g)\n+\tx = 0;\n+    }\n+}"}, {"sha": "8532fd816d13a181b6c091c6f62a4ebc5a6262b8", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13c931c93961cdaa85b6fe77f455bae1c9b19b98/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=13c931c93961cdaa85b6fe77f455bae1c9b19b98", "patch": "@@ -150,6 +150,8 @@ vect_mark_relevant (VEC(gimple,heap) **worklist, gimple stmt,\n           use_operand_p use_p;\n           gimple use_stmt;\n           tree lhs;\n+\t  loop_vec_info loop_vinfo = STMT_VINFO_LOOP_VINFO (stmt_info);\n+\t  struct loop *loop = LOOP_VINFO_LOOP (loop_vinfo);\n \n           if (is_gimple_assign (stmt))\n             lhs = gimple_assign_lhs (stmt);\n@@ -166,6 +168,9 @@ vect_mark_relevant (VEC(gimple,heap) **worklist, gimple stmt,\n \t\t  continue;\n \t\tuse_stmt = USE_STMT (use_p);\n \n+\t\tif (!flow_bb_inside_loop_p (loop, gimple_bb (use_stmt)))\n+\t\t  continue;\n+\n \t\tif (vinfo_for_stmt (use_stmt)\n \t\t    && STMT_VINFO_IN_PATTERN_P (vinfo_for_stmt (use_stmt)))\n \t\t  {"}]}