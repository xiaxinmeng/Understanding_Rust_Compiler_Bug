{"sha": "2b8b44d804ffe857a774976ebcabac927f25cfb3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI4YjQ0ZDgwNGZmZTg1N2E3NzQ5NzZlYmNhYmFjOTI3ZjI1Y2ZiMw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1997-12-08T02:25:36Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-12-08T02:25:36Z"}, "message": "except.c (expand_start_catch_block): suspend_momentary for the terminate handler.\n\n\t* except.c (expand_start_catch_block): suspend_momentary for the\n\tterminate handler.\n\nFrom-SVN: r17003", "tree": {"sha": "ba4e5a178d5017a37d47a637cab75283d1af18cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba4e5a178d5017a37d47a637cab75283d1af18cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b8b44d804ffe857a774976ebcabac927f25cfb3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b8b44d804ffe857a774976ebcabac927f25cfb3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b8b44d804ffe857a774976ebcabac927f25cfb3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b8b44d804ffe857a774976ebcabac927f25cfb3/comments", "author": null, "committer": null, "parents": [{"sha": "14cd4d23c89e2d88420d7e8c70d7ce66aa22db30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14cd4d23c89e2d88420d7e8c70d7ce66aa22db30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14cd4d23c89e2d88420d7e8c70d7ce66aa22db30"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "8476d56a1cb1c7daec98789a9cac3c0d2b43f000", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b8b44d804ffe857a774976ebcabac927f25cfb3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b8b44d804ffe857a774976ebcabac927f25cfb3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2b8b44d804ffe857a774976ebcabac927f25cfb3", "patch": "@@ -1,5 +1,8 @@\n Sun Dec  7 15:53:06 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n+\t* except.c (expand_start_catch_block): suspend_momentary for the\n+\tterminate handler.\n+\n \t* error.c (dump_decl): Handle LOOKUP_EXPR.\n \n Sun Dec  7 15:45:07 1997  Mark Mitchell  <mmitchell@usa.net>"}, {"sha": "3d62c77184522a43495d7b6cfb16d7d4be5ce13f", "filename": "gcc/cp/except.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b8b44d804ffe857a774976ebcabac927f25cfb3/gcc%2Fcp%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b8b44d804ffe857a774976ebcabac927f25cfb3/gcc%2Fcp%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fexcept.c?ref=2b8b44d804ffe857a774976ebcabac927f25cfb3", "patch": "@@ -598,12 +598,15 @@ expand_start_catch_block (declspecs, declarator)\n          must call terminate.  See eh23.C.  */\n       if (TYPE_NEEDS_CONSTRUCTING (TREE_TYPE (decl)))\n \t{\n+\t  int yes = suspend_momentary ();\n+\t  tree term = build_function_call (Terminate, NULL_TREE);\n+\t  resume_momentary (yes);\n+\n \t  /* Generate the copy constructor call directly so we can wrap it.\n \t     See also expand_default_init.  */\n \t  init = ocp_convert (TREE_TYPE (decl), init,\n \t\t\t      CONV_IMPLICIT|CONV_FORCE_TEMP, 0);\n-\t  init = build (TRY_CATCH_EXPR, TREE_TYPE (init), init,\n-\t\t\tbuild_function_call (Terminate, NULL_TREE));\n+\t  init = build (TRY_CATCH_EXPR, TREE_TYPE (init), init, term);\n \t}\n \n       /* Let `cp_finish_decl' know that this initializer is ok.  */"}]}