{"sha": "54a88f9251258e2ce0908499022cbc38152d1b27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRhODhmOTI1MTI1OGUyY2UwOTA4NDk5MDIyY2JjMzgxNTJkMWIyNw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-03-13T11:45:59Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-03-13T11:45:59Z"}, "message": "(do_spec_1): Don't duplicate a macro starting with '__'.\n\nFrom-SVN: r6764", "tree": {"sha": "a3cd643148dca7009ba477f2f5c3d3c6f9607606", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3cd643148dca7009ba477f2f5c3d3c6f9607606"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54a88f9251258e2ce0908499022cbc38152d1b27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54a88f9251258e2ce0908499022cbc38152d1b27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54a88f9251258e2ce0908499022cbc38152d1b27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54a88f9251258e2ce0908499022cbc38152d1b27/comments", "author": null, "committer": null, "parents": [{"sha": "c5ea5f3b3384e4f4cf49debdcc3dfba7a74db3fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5ea5f3b3384e4f4cf49debdcc3dfba7a74db3fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5ea5f3b3384e4f4cf49debdcc3dfba7a74db3fa"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "6517c7f8767fd1130ebb5fc726ddc55e651abdf8", "filename": "gcc/gcc.c", "status": "modified", "additions": 17, "deletions": 10, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54a88f9251258e2ce0908499022cbc38152d1b27/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54a88f9251258e2ce0908499022cbc38152d1b27/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=54a88f9251258e2ce0908499022cbc38152d1b27", "patch": "@@ -3254,23 +3254,30 @@ do_spec_1 (spec, inswitch, soft_matched_part)\n \t\t{\n \t\t  if (! strncmp (y, \"-D\", 2))\n \t\t    {\n-\t\t      *x++ = *y++;\n-\t\t      *x++ = *y++;\n+\t\t      y += 2;\n \n \t\t      if (strncmp (y, \"__\", 2))\n \t\t        {\n-\t\t\t  /* Stick __ at front of macro name.  */\n+\t\t\t  /* Stick -D__ at front of macro name.  */\n+\t\t\t  *x++ = '-';\n+\t\t\t  *x++ = 'D';\n \t\t\t  *x++ = '_';\n \t\t\t  *x++ = '_';\n-\t\t\t}\n \n-\t\t      /* Copy the macro name.  */\n-\t\t      while (*y && *y != '=' && *y != ' ' && *y != '\\t')\n-\t\t\t*x++ = *y++;\n+\t\t\t  /* Copy the macro name.  */\n+\t\t\t  while (*y && *y != '=' && *y != ' ' && *y != '\\t')\n+\t\t\t    *x++ = *y++;\n \n-\t\t      /* Copy the value given, if any.  */\n-\t\t      while (*y && *y != ' ' && *y != '\\t')\n-\t\t\t*x++ = *y++;\n+\t\t\t  /* Copy the value given, if any.  */\n+\t\t\t  while (*y && *y != ' ' && *y != '\\t')\n+\t\t\t    *x++ = *y++;\n+\t\t\t}\n+\t\t      else\n+\t\t\t{\n+\t\t\t  /* Do not copy this macro - we have just done it before */\n+\t\t\t  while (*y && *y != ' ' && *y != '\\t')\n+\t\t\t    y++;\n+\t\t\t}\n \t\t    }\n \t\t  else if (*y == ' ' || *y == '\\t')\n \t\t    /* Copy whitespace to the result.  */"}]}