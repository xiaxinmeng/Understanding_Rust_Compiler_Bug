{"sha": "8aa5074e79a708a7ef26c5931a1f6485a0726042", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGFhNTA3NGU3OWE3MDhhN2VmMjZjNTkzMWExZjY0ODVhMDcyNjA0Mg==", "commit": {"author": {"name": "Stan Shebs", "email": "shebs@apple.com", "date": "2002-08-16T23:31:06Z"}, "committer": {"name": "Stan Shebs", "email": "shebs@gcc.gnu.org", "date": "2002-08-16T23:31:06Z"}, "message": "c-common.c (cb_register_builds): Define __NEXT_RUNTIME__ for ObjC with -fnext-runtime.\n\n\t* c-common.c (cb_register_builds): Define __NEXT_RUNTIME__\n\tfor ObjC with -fnext-runtime.\n\t* doc/cpp.texi: Document it.\n\n\t* objc/execute/selector-1.m: Add __NEXT_RUNTIME__ case.\n\nFrom-SVN: r56390", "tree": {"sha": "0feaf1d60d2fdc7c20d36fa3d93b48a48eb425f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0feaf1d60d2fdc7c20d36fa3d93b48a48eb425f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8aa5074e79a708a7ef26c5931a1f6485a0726042", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8aa5074e79a708a7ef26c5931a1f6485a0726042", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8aa5074e79a708a7ef26c5931a1f6485a0726042", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8aa5074e79a708a7ef26c5931a1f6485a0726042/comments", "author": null, "committer": null, "parents": [{"sha": "ca75573a5d8f17e1baa009caef0ea72bcece3932", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca75573a5d8f17e1baa009caef0ea72bcece3932", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca75573a5d8f17e1baa009caef0ea72bcece3932"}], "stats": {"total": 30, "additions": 26, "deletions": 4}, "files": [{"sha": "dbb8057f6e7f8c880568173723f31a7eb8471660", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8aa5074e79a708a7ef26c5931a1f6485a0726042", "patch": "@@ -1,3 +1,9 @@\n+2002-08-16  Stan Shebs  <shebs@apple.com>\n+\n+\t* c-common.c (cb_register_builds): Define __NEXT_RUNTIME__\n+\tfor ObjC with -fnext-runtime.\n+\t* doc/cpp.texi: Document it.\n+\n 2002-08-16  Janis Johnson  <janis187@us.ibm.com>\n \n \t* doc/install.texi (Final installation): Replace links to individual"}, {"sha": "74224afd55ca2c611a8290fd6047555cd6b45b90", "filename": "gcc/c-common.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=8aa5074e79a708a7ef26c5931a1f6485a0726042", "patch": "@@ -4745,6 +4745,10 @@ cb_register_builtins (pfile)\n   if (!flag_signed_char)\n     cpp_define (pfile, \"__CHAR_UNSIGNED__\");\n \n+  /* Make the choice of ObjC runtime visible to source code.  */\n+  if (flag_objc && flag_next_runtime)\n+    cpp_define (pfile, \"__NEXT_RUNTIME__\");\n+\n   /* A straightforward target hook doesn't work, because of problems\n      linking that hook's body when part of non-C front ends.  */\n # define preprocessing_asm_p() (cpp_get_options (pfile)->lang == CLK_ASM)"}, {"sha": "1284a39ad8aafede9fd1ae27c1c59eb83ae2b5c6", "filename": "gcc/doc/cpp.texi", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Fdoc%2Fcpp.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Fdoc%2Fcpp.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fcpp.texi?ref=8aa5074e79a708a7ef26c5931a1f6485a0726042", "patch": "@@ -2003,6 +2003,10 @@ the typedefs.\n This macro is defined, with value 1, if the compiler uses the old\n mechanism based on @code{setjmp} and @code{longjmp} for exception\n handling.\n+\n+@item __NEXT_RUNTIME__\n+This macro is defined, with value 1, when the NeXT runtime\n+(as in @option{-fnext-runtime}) is in use for Objective-C.\n @end table\n \n @node System-specific Predefined Macros"}, {"sha": "bd0a52f690a99727d9369d800ea38badab057900", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8aa5074e79a708a7ef26c5931a1f6485a0726042", "patch": "@@ -1,3 +1,7 @@\n+2002-08-16  Stan Shebs  <shebs@apple.com>\n+\n+\t* objc/execute/selector-1.m: Add __NEXT_RUNTIME__ case.\n+\n 2002-08-15  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.dg/typeof-1.c: New test."}, {"sha": "531e02babcf8388eaa4fa7ea9e59a784902eba4f", "filename": "gcc/testsuite/objc/execute/selector-1.m", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fselector-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8aa5074e79a708a7ef26c5931a1f6485a0726042/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fselector-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fselector-1.m?ref=8aa5074e79a708a7ef26c5931a1f6485a0726042", "patch": "@@ -6,12 +6,16 @@\n int main (void)\n {\n   SEL selector;\n+  char *selname;\n \n   selector = @selector (alloc);\n-  if (strcmp (sel_get_name (selector), \"alloc\"))\n-    {\n-      abort ();\n-    }\n+#ifdef __NEXT_RUNTIME__\n+  selname = sel_getName (selector);\n+#else\n+  selname = sel_get_name (selector);\n+#endif\n+  if (strcmp (selname, \"alloc\"))\n+    abort ();\n \n   return 0;\n }"}]}