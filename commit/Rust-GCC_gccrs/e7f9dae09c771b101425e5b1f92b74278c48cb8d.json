{"sha": "e7f9dae09c771b101425e5b1f92b74278c48cb8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTdmOWRhZTA5Yzc3MWIxMDE0MjVlNWIxZjkyYjc0Mjc4YzQ4Y2I4ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-10-06T14:34:48Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-10-06T14:34:48Z"}, "message": "tree.h (avoid_folding_inline_builtin): New prototype.\n\n\t* tree.h (avoid_folding_inline_builtin): New prototype.\n\t* builtins.c (avoid_folding_inline_builtin): No longer static.\n\t* gimple-fold.c (gimple_fold_builtin): Give up if\n\tavoid_folding_inline_builtin returns true.\n\nFrom-SVN: r179614", "tree": {"sha": "1eb9825a1426b1f1981f774965457b45a5f0fba4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1eb9825a1426b1f1981f774965457b45a5f0fba4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7f9dae09c771b101425e5b1f92b74278c48cb8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7f9dae09c771b101425e5b1f92b74278c48cb8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7f9dae09c771b101425e5b1f92b74278c48cb8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7f9dae09c771b101425e5b1f92b74278c48cb8d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bc622b2a5ee54492a43a75c4170efefc33690471", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc622b2a5ee54492a43a75c4170efefc33690471", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc622b2a5ee54492a43a75c4170efefc33690471"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "445cf4affe0a2b6228adb73c94b4607370bd2c76", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e7f9dae09c771b101425e5b1f92b74278c48cb8d", "patch": "@@ -1,3 +1,10 @@\n+2011-10-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* tree.h (avoid_folding_inline_builtin): New prototype.\n+\t* builtins.c (avoid_folding_inline_builtin): No longer static.\n+\t* gimple-fold.c (gimple_fold_builtin): Give up if\n+\tavoid_folding_inline_builtin returns true.\n+\n 2011-10-06  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-vect-generic.c (vector_element): Look at previous"}, {"sha": "8476b0e6b8b7d254d85f6c43b9ccba6b964d44b9", "filename": "gcc/builtins.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=e7f9dae09c771b101425e5b1f92b74278c48cb8d", "patch": "@@ -10360,7 +10360,7 @@ fold_builtin_varargs (location_t loc, tree fndecl, tree exp,\n    been inlined, otherwise e.g. -D_FORTIFY_SOURCE checking\n    might not be performed.  */\n \n-static bool\n+bool\n avoid_folding_inline_builtin (tree fndecl)\n {\n   return (DECL_DECLARED_INLINE_P (fndecl)"}, {"sha": "b4993fdef924f70d3bc0ce272d2da760b33269cc", "filename": "gcc/gimple-fold.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2Fgimple-fold.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2Fgimple-fold.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-fold.c?ref=e7f9dae09c771b101425e5b1f92b74278c48cb8d", "patch": "@@ -828,6 +828,11 @@ gimple_fold_builtin (gimple stmt)\n   if (DECL_BUILT_IN_CLASS (callee) == BUILT_IN_MD)\n     return NULL_TREE;\n \n+  /* Give up for always_inline inline builtins until they are\n+     inlined.  */\n+  if (avoid_folding_inline_builtin (callee))\n+    return NULL_TREE;\n+\n   /* If the builtin could not be folded, and it has no argument list,\n      we're done.  */\n   nargs = gimple_call_num_args (stmt);"}, {"sha": "e0f1a075037f8e02837d93800f5214e4bcd574f9", "filename": "gcc/tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f9dae09c771b101425e5b1f92b74278c48cb8d/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=e7f9dae09c771b101425e5b1f92b74278c48cb8d", "patch": "@@ -5352,6 +5352,7 @@ fold_build_pointer_plus_hwi_loc (location_t loc, tree ptr, HOST_WIDE_INT off)\n \tfold_build_pointer_plus_hwi_loc (UNKNOWN_LOCATION, p, o)\n \n /* In builtins.c */\n+extern bool avoid_folding_inline_builtin (tree);\n extern tree fold_call_expr (location_t, tree, bool);\n extern tree fold_builtin_fputs (location_t, tree, tree, bool, bool, tree);\n extern tree fold_builtin_strcpy (location_t, tree, tree, tree, tree);"}]}