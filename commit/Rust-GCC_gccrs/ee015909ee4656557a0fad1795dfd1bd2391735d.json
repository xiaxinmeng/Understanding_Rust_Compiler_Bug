{"sha": "ee015909ee4656557a0fad1795dfd1bd2391735d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUwMTU5MDllZTQ2NTY1NTdhMGZhZDE3OTVkZmQxYmQyMzkxNzM1ZA==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2015-11-06T18:40:56Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2015-11-06T18:40:56Z"}, "message": "Add stats on adhoc table to dump_line_table_statistics\n\ngcc/ChangeLog:\n\t* input.c (dump_line_table_statistics): Dump stats on adhoc table.\n\nlibcpp/ChangeLog:\n\t* include/line-map.h (struct linemap_stats): Add fields\n\t\"adhoc_table_size\" and \"adhoc_table_entries_used\".\n\t* line-map.c (linemap_get_statistics): Populate above fields.\n\nFrom-SVN: r229873", "tree": {"sha": "35d3167f828cdec190d251bc1b3ee85fef95dfbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/35d3167f828cdec190d251bc1b3ee85fef95dfbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee015909ee4656557a0fad1795dfd1bd2391735d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee015909ee4656557a0fad1795dfd1bd2391735d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee015909ee4656557a0fad1795dfd1bd2391735d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee015909ee4656557a0fad1795dfd1bd2391735d/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2a8e33581b09efb6f9e9897b82133e510062fe91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a8e33581b09efb6f9e9897b82133e510062fe91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a8e33581b09efb6f9e9897b82133e510062fe91"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "77bc7395ccea9ef7d9995f0fcd0059f367fe8d4d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee015909ee4656557a0fad1795dfd1bd2391735d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee015909ee4656557a0fad1795dfd1bd2391735d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee015909ee4656557a0fad1795dfd1bd2391735d", "patch": "@@ -1,3 +1,7 @@\n+2015-11-06  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* input.c (dump_line_table_statistics): Dump stats on adhoc table.\n+\n 2015-11-07  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* tree-core.h (size_type_kind): Remove OEP_CONSTANT_ADDRESS_OF and"}, {"sha": "ff80dd9708a09cc877f924b237ed67ed31842218", "filename": "gcc/input.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee015909ee4656557a0fad1795dfd1bd2391735d/gcc%2Finput.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee015909ee4656557a0fad1795dfd1bd2391735d/gcc%2Finput.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Finput.c?ref=ee015909ee4656557a0fad1795dfd1bd2391735d", "patch": "@@ -866,6 +866,12 @@ dump_line_table_statistics (void)\n   fprintf (stderr, \"Total used maps size:                %5ld%c\\n\",\n            SCALE (total_used_map_size),\n            STAT_LABEL (total_used_map_size));\n+  fprintf (stderr, \"Ad-hoc table size:                   %5ld%c\\n\",\n+\t   SCALE (s.adhoc_table_size),\n+\t   STAT_LABEL (s.adhoc_table_size));\n+  fprintf (stderr, \"Ad-hoc table entries used:           %5ld\\n\",\n+\t   s.adhoc_table_entries_used);\n+\n   fprintf (stderr, \"\\n\");\n }\n "}, {"sha": "8abf6ddfaa4f6675d0ac5c9f3f2c8252284a5598", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee015909ee4656557a0fad1795dfd1bd2391735d/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee015909ee4656557a0fad1795dfd1bd2391735d/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=ee015909ee4656557a0fad1795dfd1bd2391735d", "patch": "@@ -1,3 +1,9 @@\n+2015-11-06  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* include/line-map.h (struct linemap_stats): Add fields\n+\t\"adhoc_table_size\" and \"adhoc_table_entries_used\".\n+\t* line-map.c (linemap_get_statistics): Populate above fields.\n+\n 2015-11-04  Mikhail Maltsev  <maltsevm@gmail.com>\n \n \t* config.in: Regenerate."}, {"sha": "c8618a970e1e5f507f39a9f88da073b897c5196c", "filename": "libcpp/include/line-map.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee015909ee4656557a0fad1795dfd1bd2391735d/libcpp%2Finclude%2Fline-map.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee015909ee4656557a0fad1795dfd1bd2391735d/libcpp%2Finclude%2Fline-map.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Finclude%2Fline-map.h?ref=ee015909ee4656557a0fad1795dfd1bd2391735d", "patch": "@@ -1143,6 +1143,8 @@ struct linemap_stats\n   long macro_maps_used_size;\n   long macro_maps_locations_size;\n   long duplicated_macro_maps_locations_size;\n+  long adhoc_table_size;\n+  long adhoc_table_entries_used;\n };\n \n /* Return the highest location emitted for a given file for which"}, {"sha": "84403de9c77035e95c463b340bea687a4c4f8c05", "filename": "libcpp/line-map.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee015909ee4656557a0fad1795dfd1bd2391735d/libcpp%2Fline-map.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee015909ee4656557a0fad1795dfd1bd2391735d/libcpp%2Fline-map.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fline-map.c?ref=ee015909ee4656557a0fad1795dfd1bd2391735d", "patch": "@@ -1712,6 +1712,9 @@ linemap_get_statistics (struct line_maps *set,\n   s->macro_maps_used_size = macro_maps_used_size;\n   s->duplicated_macro_maps_locations_size =\n     duplicated_macro_maps_locations_size;\n+  s->adhoc_table_size = (set->location_adhoc_data_map.allocated\n+\t\t\t * sizeof (struct location_adhoc_data));\n+  s->adhoc_table_entries_used = set->location_adhoc_data_map.curr_loc;\n }\n \n "}]}