{"sha": "7bab65434ce0e49eeccc381dce41fe7cf348899e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2JhYjY1NDM0Y2UwZTQ5ZWVjY2MzODFkY2U0MWZlN2NmMzQ4ODk5ZQ==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2010-06-01T14:05:17Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2010-06-01T14:05:17Z"}, "message": "richi's fixes for c++ bootstrap\n\nFrom-SVN: r160105", "tree": {"sha": "ab15a982d4a269f4bc6ceb4a128188ffa1ec7bfc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab15a982d4a269f4bc6ceb4a128188ffa1ec7bfc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7bab65434ce0e49eeccc381dce41fe7cf348899e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bab65434ce0e49eeccc381dce41fe7cf348899e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bab65434ce0e49eeccc381dce41fe7cf348899e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bab65434ce0e49eeccc381dce41fe7cf348899e/comments", "author": null, "committer": null, "parents": [{"sha": "41361b9fe57248555eab99ffe74a7943c147103b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41361b9fe57248555eab99ffe74a7943c147103b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41361b9fe57248555eab99ffe74a7943c147103b"}], "stats": {"total": 177, "additions": 129, "deletions": 48}, "files": [{"sha": "2654ccd1d47251ac5d2766d2f30553edc51e6def", "filename": "gcc/cp/cvt.c", "status": "modified", "additions": 16, "deletions": 12, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bab65434ce0e49eeccc381dce41fe7cf348899e/gcc%2Fcp%2Fcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bab65434ce0e49eeccc381dce41fe7cf348899e/gcc%2Fcp%2Fcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcvt.c?ref=7bab65434ce0e49eeccc381dce41fe7cf348899e", "patch": "@@ -822,22 +822,26 @@ ocp_convert (tree type, tree expr, int convtype, int flags)\n tree\n convert_to_void (tree expr, const char *implicit, tsubst_flags_t complain)\n {\n-  tree exprv;\n-\n   if (expr == error_mark_node\n       || TREE_TYPE (expr) == error_mark_node)\n     return error_mark_node;\n \n-  exprv = expr;\n-  while (TREE_CODE (exprv) == COMPOUND_EXPR)\n-    exprv = TREE_OPERAND (exprv, 1);\n-  if (DECL_P (exprv) || handled_component_p (exprv))\n-    /* Expr is not being 'used' here, otherwise we whould have\n-       called mark_{rl}value_use use here, which would have in turn\n-       called mark_exp_read.  Rather, we call mark_exp_read directly\n-       to avoid some warnings when\n-       -Wunused-but-set-{variable,parameter} is in effect.  */\n-    mark_exp_read (exprv);\n+  if (implicit == NULL)\n+    mark_rvalue_use (expr);\n+  else\n+    {\n+      tree exprv = expr;\n+    \n+      while (TREE_CODE (exprv) == COMPOUND_EXPR)\n+\texprv = TREE_OPERAND (exprv, 1);\n+      if (DECL_P (exprv) || handled_component_p (exprv))\n+\t/* Expr is not being 'used' here, otherwise we whould have\n+\t   called mark_{rl}value_use use here, which would have in turn\n+\t   called mark_exp_read.  Rather, we call mark_exp_read directly\n+\t   to avoid some warnings when\n+\t   -Wunused-but-set-{variable,parameter} is in effect.  */\n+\tmark_exp_read (exprv);\n+    }\n \n   if (!TREE_TYPE (expr))\n     return expr;"}, {"sha": "c0859520d738eb39e2fc37072e2203b71502de59", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bab65434ce0e49eeccc381dce41fe7cf348899e/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bab65434ce0e49eeccc381dce41fe7cf348899e/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=7bab65434ce0e49eeccc381dce41fe7cf348899e", "patch": "@@ -4875,7 +4875,7 @@ simplify_immed_subreg (enum machine_mode outermode, rtx op,\n \t a mistake.)  */\n       {\n \tunsigned byte = (elem * elem_bitsize) / BITS_PER_UNIT;\n-\tunsigned ibyte = (((num_elem - 1 - elem) * elem_bitsize)\n+\tunsigned ibyte ATTRIBUTE_UNUSED = (((num_elem - 1 - elem) * elem_bitsize)\n \t\t\t  / BITS_PER_UNIT);\n \tunsigned word_byte = WORDS_BIG_ENDIAN ? ibyte : byte;\n \tunsigned subword_byte = BYTES_BIG_ENDIAN ? ibyte : byte;\n@@ -4979,7 +4979,7 @@ simplify_immed_subreg (enum machine_mode outermode, rtx op,\n      will already have offset 0.  */\n   if (GET_MODE_SIZE (innermode) >= GET_MODE_SIZE (outermode))\n     {\n-      unsigned ibyte = (GET_MODE_SIZE (innermode) - GET_MODE_SIZE (outermode)\n+      unsigned ibyte ATTRIBUTE_UNUSED = (GET_MODE_SIZE (innermode) - GET_MODE_SIZE (outermode)\n \t\t\t- byte);\n       unsigned word_byte = WORDS_BIG_ENDIAN ? ibyte : byte;\n       unsigned subword_byte = BYTES_BIG_ENDIAN ? ibyte : byte;\n@@ -5024,7 +5024,7 @@ simplify_immed_subreg (enum machine_mode outermode, rtx op,\n \t a mistake.)  */\n       {\n \tunsigned byte = (elem * elem_bitsize) / BITS_PER_UNIT;\n-\tunsigned ibyte = (((num_elem - 1 - elem) * elem_bitsize)\n+\tunsigned ibyte ATTRIBUTE_UNUSED = (((num_elem - 1 - elem) * elem_bitsize)\n \t\t\t  / BITS_PER_UNIT);\n \tunsigned word_byte = WORDS_BIG_ENDIAN ? ibyte : byte;\n \tunsigned subword_byte = BYTES_BIG_ENDIAN ? ibyte : byte;"}, {"sha": "a92771a5aa13a99839a04e891578502136ae081c", "filename": "libcpp/aclocal.m4", "status": "modified", "additions": 71, "deletions": 0, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bab65434ce0e49eeccc381dce41fe7cf348899e/libcpp%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bab65434ce0e49eeccc381dce41fe7cf348899e/libcpp%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Faclocal.m4?ref=7bab65434ce0e49eeccc381dce41fe7cf348899e", "patch": "@@ -22,3 +22,74 @@ m4_include([../config/lib-link.m4])\n m4_include([../config/lib-prefix.m4])\n m4_include([../config/override.m4])\n m4_include([../config/warnings.m4])\n+\n+## ---------------------------------------------------------------- ##\n+## Checking for declared symbols.                                   ##\n+## This is like *AC_CHECK_DECL*, except that for c++, we may use a  ##\n+## prototype to check for a (possibly overloaded) function.         ##\n+## ---------------------------------------------------------------- ##\n+\n+\n+# _AC_CHECK_PROTO_BODY\n+# -------------------\n+# Shell function body for AC_CHECK_PROTO.\n+m4_define([_AC_CHECK_PROTO_BODY],\n+[  AS_LINENO_PUSH([$[]1])\n+  [as_decl_name=`echo $][2|sed 's/(.*//'`]\n+  [as_decl_use=`echo $][2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`]\n+  AC_CACHE_CHECK([whether $as_decl_name is declared], [$[]3],\n+  [AC_COMPILE_IFELSE([AC_LANG_PROGRAM([$[]4],\n+[@%:@ifndef $[]as_decl_name\n+@%:@ifdef __cplusplus\n+  (void) $[]as_decl_use;\n+@%:@else\n+  (void) $[]as_decl_name;\n+@%:@endif\n+@%:@endif\n+])],\n+\t\t   [AS_VAR_SET([$[]3], [yes])],\n+\t\t   [AS_VAR_SET([$[]3], [no])])])\n+  AS_LINENO_POP\n+])# _AC_CHECK_PROTO_BODY\n+\n+# AC_CHECK_PROTO(SYMBOL,\n+#               [ACTION-IF-FOUND], [ACTION-IF-NOT-FOUND],\n+#               [INCLUDES = DEFAULT-INCLUDES])\n+# -------------------------------------------------------\n+# Check whether SYMBOL (a function, variable, or constant) is declared.\n+AC_DEFUN([AC_CHECK_PROTO],\n+[AC_REQUIRE_SHELL_FN([ac_fn_]_AC_LANG_ABBREV[_check_proto],\n+  [AS_FUNCTION_DESCRIBE([ac_fn_]_AC_LANG_ABBREV[_check_proto],\n+    [LINENO SYMBOL VAR],\n+    [Tests whether SYMBOL is declared, setting cache variable VAR accordingly.])],\n+  [_$0_BODY])]dnl\n+[AS_VAR_PUSHDEF([ac_Symbol], [ac_cv_have_decl_$1])]dnl\n+[ac_fn_[]_AC_LANG_ABBREV[]_check_proto ]dnl\n+[\"$LINENO\" \"$1\" \"ac_Symbol\" \"AS_ESCAPE([AC_INCLUDES_DEFAULT([$4])], [\"\"])\"\n+AS_VAR_IF([ac_Symbol], [yes], [$2], [$3])\n+AS_VAR_POPDEF([ac_Symbol])dnl\n+])# AC_CHECK_PROTO\n+\n+\n+# _AC_CHECK_PROTOS(SYMBOL, ACTION-IF_FOUND, ACTION-IF-NOT-FOUND,\n+#                  INCLUDES)\n+# -------------------------------------------------------------\n+# Helper to AC_CHECK_PROTOS, which generates the check for a single\n+# SYMBOL with INCLUDES, performs the AC_DEFINE, then expands\n+# ACTION-IF-FOUND or ACTION-IF-NOT-FOUND.\n+m4_define([_AC_CHECK_PROTOS],\n+[AC_CHECK_PROTO([$1], [ac_have_decl=1], [ac_have_decl=0], [$4])]dnl\n+[AC_DEFINE_UNQUOTED(AS_TR_CPP(patsubst(HAVE_DECL_[$1],[(.*])), [$ac_have_decl],\n+  [Define to 1 if you have the declaration of `$1',\n+   and to 0 if you don't.])]dnl\n+[m4_ifvaln([$2$3], [AS_IF([test $ac_have_decl = 1], [$2], [$3])])])\n+\n+# AC_CHECK_PROTOS(SYMBOLS,\n+#                 [ACTION-IF-FOUND], [ACTION-IF-NOT-FOUND],\n+#                 [INCLUDES = DEFAULT-INCLUDES])\n+# --------------------------------------------------------\n+# Defines HAVE_DECL_SYMBOL to 1 if declared, 0 otherwise.  See the\n+# documentation for a detailed explanation of this difference with\n+# other AC_CHECK_*S macros.  SYMBOLS is an m4 list.\n+AC_DEFUN([AC_CHECK_PROTOS],\n+[m4_map_args_sep([_$0(], [, [$2], [$3], [$4])], [], $1)])"}, {"sha": "b6e184e3c1cde13f8d370e30d9c4002bf4d811a5", "filename": "libcpp/configure", "status": "modified", "additions": 37, "deletions": 31, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bab65434ce0e49eeccc381dce41fe7cf348899e/libcpp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bab65434ce0e49eeccc381dce41fe7cf348899e/libcpp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fconfigure?ref=7bab65434ce0e49eeccc381dce41fe7cf348899e", "patch": "@@ -2233,14 +2233,16 @@ $as_echo \"$ac_res\" >&6; }\n \n } # ac_fn_cxx_check_func\n \n-# ac_fn_cxx_check_decl LINENO SYMBOL VAR\n-# --------------------------------------\n+# ac_fn_cxx_check_proto LINENO SYMBOL VAR\n+# ---------------------------------------\n # Tests whether SYMBOL is declared, setting cache variable VAR accordingly.\n-ac_fn_cxx_check_decl ()\n+ac_fn_cxx_check_proto ()\n {\n   as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $2 is declared\" >&5\n-$as_echo_n \"checking whether $2 is declared... \" >&6; }\n+  as_decl_name=`echo $2|sed 's/(.*//'`\n+  as_decl_use=`echo $2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $as_decl_name is declared\" >&5\n+$as_echo_n \"checking whether $as_decl_name is declared... \" >&6; }\n if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n   $as_echo_n \"(cached) \" >&6\n else\n@@ -2250,8 +2252,12 @@ $4\n int\n main ()\n {\n-#ifndef $2\n-  (void) $2;\n+#ifndef $as_decl_name\n+#ifdef __cplusplus\n+  (void) $as_decl_use;\n+#else\n+  (void) $as_decl_name;\n+#endif\n #endif\n \n   ;\n@@ -2270,7 +2276,7 @@ eval ac_res=\\$$3\n $as_echo \"$ac_res\" >&6; }\n   eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n \n-} # ac_fn_cxx_check_decl\n+} # ac_fn_cxx_check_proto\n cat >config.log <<_ACEOF\n This file contains any messages produced by compilers while\n running configure, to aid debugging if configure makes a mistake.\n@@ -5460,7 +5466,7 @@ _ACEOF\n fi\n done\n \n-ac_fn_cxx_check_decl \"$LINENO\" \"abort\" \"ac_cv_have_decl_abort\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"abort\" \"ac_cv_have_decl_abort\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_abort\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5470,7 +5476,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_ABORT $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"asprintf\" \"ac_cv_have_decl_asprintf\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"asprintf\" \"ac_cv_have_decl_asprintf\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_asprintf\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5480,8 +5486,8 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_ASPRINTF $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"basename\" \"ac_cv_have_decl_basename\" \"$ac_includes_default\"\n-if test \"x$ac_cv_have_decl_basename\" = x\"\"yes; then :\n+ac_fn_cxx_check_proto \"$LINENO\" \"basename(char*)\" \"ac_cv_have_decl_basename_charp_\" \"$ac_includes_default\"\n+if test \"x$ac_cv_have_decl_basename_charp_\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n   ac_have_decl=0\n@@ -5490,7 +5496,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_BASENAME $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"errno\" \"ac_cv_have_decl_errno\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"errno\" \"ac_cv_have_decl_errno\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_errno\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5500,7 +5506,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_ERRNO $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"getopt\" \"ac_cv_have_decl_getopt\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"getopt\" \"ac_cv_have_decl_getopt\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_getopt\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5510,7 +5516,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_GETOPT $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"clearerr_unlocked\" \"ac_cv_have_decl_clearerr_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"clearerr_unlocked\" \"ac_cv_have_decl_clearerr_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_clearerr_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5520,7 +5526,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_CLEARERR_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"feof_unlocked\" \"ac_cv_have_decl_feof_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"feof_unlocked\" \"ac_cv_have_decl_feof_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_feof_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5530,7 +5536,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FEOF_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"ferror_unlocked\" \"ac_cv_have_decl_ferror_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"ferror_unlocked\" \"ac_cv_have_decl_ferror_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_ferror_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5540,7 +5546,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FERROR_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fflush_unlocked\" \"ac_cv_have_decl_fflush_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fflush_unlocked\" \"ac_cv_have_decl_fflush_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fflush_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5550,7 +5556,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FFLUSH_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fgetc_unlocked\" \"ac_cv_have_decl_fgetc_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fgetc_unlocked\" \"ac_cv_have_decl_fgetc_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fgetc_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5560,7 +5566,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FGETC_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fgets_unlocked\" \"ac_cv_have_decl_fgets_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fgets_unlocked\" \"ac_cv_have_decl_fgets_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fgets_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5570,7 +5576,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FGETS_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fileno_unlocked\" \"ac_cv_have_decl_fileno_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fileno_unlocked\" \"ac_cv_have_decl_fileno_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fileno_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5580,7 +5586,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FILENO_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fprintf_unlocked\" \"ac_cv_have_decl_fprintf_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fprintf_unlocked\" \"ac_cv_have_decl_fprintf_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fprintf_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5590,7 +5596,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FPRINTF_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fputc_unlocked\" \"ac_cv_have_decl_fputc_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fputc_unlocked\" \"ac_cv_have_decl_fputc_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fputc_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5600,7 +5606,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FPUTC_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fputs_unlocked\" \"ac_cv_have_decl_fputs_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fputs_unlocked\" \"ac_cv_have_decl_fputs_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fputs_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5610,7 +5616,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FPUTS_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fread_unlocked\" \"ac_cv_have_decl_fread_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fread_unlocked\" \"ac_cv_have_decl_fread_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fread_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5620,7 +5626,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FREAD_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"fwrite_unlocked\" \"ac_cv_have_decl_fwrite_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"fwrite_unlocked\" \"ac_cv_have_decl_fwrite_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_fwrite_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5630,7 +5636,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_FWRITE_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"getchar_unlocked\" \"ac_cv_have_decl_getchar_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"getchar_unlocked\" \"ac_cv_have_decl_getchar_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_getchar_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5640,7 +5646,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_GETCHAR_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"getc_unlocked\" \"ac_cv_have_decl_getc_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"getc_unlocked\" \"ac_cv_have_decl_getc_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_getc_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5650,7 +5656,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_GETC_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"putchar_unlocked\" \"ac_cv_have_decl_putchar_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"putchar_unlocked\" \"ac_cv_have_decl_putchar_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_putchar_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5660,7 +5666,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_PUTCHAR_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"putc_unlocked\" \"ac_cv_have_decl_putc_unlocked\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"putc_unlocked\" \"ac_cv_have_decl_putc_unlocked\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_putc_unlocked\" = x\"\"yes; then :\n   ac_have_decl=1\n else\n@@ -5670,7 +5676,7 @@ fi\n cat >>confdefs.h <<_ACEOF\n #define HAVE_DECL_PUTC_UNLOCKED $ac_have_decl\n _ACEOF\n-ac_fn_cxx_check_decl \"$LINENO\" \"vasprintf\" \"ac_cv_have_decl_vasprintf\" \"$ac_includes_default\"\n+ac_fn_cxx_check_proto \"$LINENO\" \"vasprintf\" \"ac_cv_have_decl_vasprintf\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_vasprintf\" = x\"\"yes; then :\n   ac_have_decl=1\n else"}, {"sha": "31fb8ba8f038df74bff89bf5f30baffbad0ba027", "filename": "libcpp/configure.ac", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bab65434ce0e49eeccc381dce41fe7cf348899e/libcpp%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bab65434ce0e49eeccc381dce41fe7cf348899e/libcpp%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fconfigure.ac?ref=7bab65434ce0e49eeccc381dce41fe7cf348899e", "patch": "@@ -81,8 +81,8 @@ define(libcpp_UNLOCKED_FUNCS, clearerr_unlocked feof_unlocked dnl\n   fread_unlocked fwrite_unlocked getchar_unlocked getc_unlocked dnl\n   putchar_unlocked putc_unlocked)\n AC_CHECK_FUNCS(libcpp_UNLOCKED_FUNCS)\n-AC_CHECK_DECLS(m4_split(m4_normalize(abort asprintf basename errno getopt \\\n-  libcpp_UNLOCKED_FUNCS vasprintf)))\n+AC_CHECK_PROTOS(m4_split(m4_normalize(abort asprintf basename(char*) errno \\\n+  getopt libcpp_UNLOCKED_FUNCS vasprintf)))\n \n # Checks for library functions.\n AC_FUNC_ALLOCA"}]}