{"sha": "1debe7ea0aa0672d560b7671c0a7f8400432f727", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRlYmU3ZWEwYWEwNjcyZDU2MGI3NjcxYzBhN2Y4NDAwNDMyZjcyNw==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2017-09-21T22:03:59Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2017-09-21T22:03:59Z"}, "message": "i386.c (ix86_adjust_stack_and_probe_stack_clash): Fix dump output if the only stack space is for pushed registers.\n\n\t* config/i386/i386.c (ix86_adjust_stack_and_probe_stack_clash):\n\tFix dump output if the only stack space is for pushed registers.\n\n\t* lib/target-supports.exp\n\t(check_effective_target_frame_pointer_for_non_leaf): Add\n\tcase for x86 Solaris.\n\nFrom-SVN: r253082", "tree": {"sha": "acf56173afd03a20023064e99cf5ee01b2d3a98c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/acf56173afd03a20023064e99cf5ee01b2d3a98c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1debe7ea0aa0672d560b7671c0a7f8400432f727", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1debe7ea0aa0672d560b7671c0a7f8400432f727", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1debe7ea0aa0672d560b7671c0a7f8400432f727", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1debe7ea0aa0672d560b7671c0a7f8400432f727/comments", "author": null, "committer": null, "parents": [{"sha": "138532b393189ee5b6b5954042a5bf9d930b3b88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/138532b393189ee5b6b5954042a5bf9d930b3b88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/138532b393189ee5b6b5954042a5bf9d930b3b88"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "26c388b35656f0e259192af77a98fae1f8ef9cf1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1debe7ea0aa0672d560b7671c0a7f8400432f727", "patch": "@@ -1,3 +1,8 @@\n+2017-09-21  Jeff Law  <law@redhat.com>\n+\n+\t* config/i386/i386.c (ix86_adjust_stack_and_probe_stack_clash):\n+\tFix dump output if the only stack space is for pushed registers.\n+\n 2017-09-21  Richard Sandiford  <richard.sandiford@linaro.org>\n \n \t* config/spu/spu.c (spu_sched_adjust_cost): Update after renaming"}, {"sha": "270ee5578723826ee42e9de8a3d3864134a9a00b", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=1debe7ea0aa0672d560b7671c0a7f8400432f727", "patch": "@@ -13946,7 +13946,13 @@ ix86_adjust_stack_and_probe_stack_clash (const HOST_WIDE_INT size)\n      no probes are needed.  */\n   if (!size)\n     {\n-      dump_stack_clash_frame_info (NO_PROBE_NO_FRAME, false);\n+      /* However, the allocation of space via pushes for register\n+\t saves could be viewed as allocating space, but without the\n+\t need to probe.  */\n+      if (m->frame.nregs || m->frame.nsseregs || frame_pointer_needed)\n+        dump_stack_clash_frame_info (NO_PROBE_SMALL_FRAME, true);\n+      else\n+\tdump_stack_clash_frame_info (NO_PROBE_NO_FRAME, false);\n       return;\n     }\n "}, {"sha": "04f0c1866359a39437a4b92ef54792241d1f89be", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1debe7ea0aa0672d560b7671c0a7f8400432f727", "patch": "@@ -1,3 +1,9 @@\n+2017-09-21  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* lib/target-supports.exp\n+\t(check_effective_target_frame_pointer_for_non_leaf): Add\n+\tcase for x86 Solaris.\n+\n 2017-09-21  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/78512"}, {"sha": "887a801bbd8bd9445bc349b365462c38850e5edc", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1debe7ea0aa0672d560b7671c0a7f8400432f727/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=1debe7ea0aa0672d560b7671c0a7f8400432f727", "patch": "@@ -8657,6 +8657,12 @@ proc check_effective_target_frame_pointer_for_non_leaf { } {\n   if { [istarget aarch*-*-*] } {\n \treturn 1\n   }\n+\n+  # Solaris/x86 defaults to -fno-omit-frame-pointer.\n+  if { [istarget i?86-*-solaris*] || [istarget x86_64-*-solaris*] } {\n+    return 1\n+  }\n+\n   return 0\n }\n "}]}