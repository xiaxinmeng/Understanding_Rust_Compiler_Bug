{"sha": "27bad558289e5d2a8e9d974ebcf9715c896139af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjdiYWQ1NTgyODllNWQyYThlOWQ5NzRlYmNmOTcxNWM4OTYxMzlhZg==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.vnet.ibm.com", "date": "2016-05-24T17:21:18Z"}, "committer": {"name": "Kelvin Nilsen", "email": "kelvin@gcc.gnu.org", "date": "2016-05-24T17:21:18Z"}, "message": "p9-vpermr.c: New test for ISA 3.0 vpermr support.\n\ngcc/testsuite/ChangeLog:\n\n2016-05-24  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\t    Kelvin Nilsen  <kelvin@gcc.gnu.org>\n\n\t* gcc.target/powerpc/p9-vpermr.c: New test for ISA 3.0 vpermr\n\tsupport.\n\n\n\nCo-Authored-By: Kelvin Nilsen <kelvin@gcc.gnu.org>\n\nFrom-SVN: r236655", "tree": {"sha": "755fde5dd48708d81eda1bd2e84c9b50d738aa9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/755fde5dd48708d81eda1bd2e84c9b50d738aa9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27bad558289e5d2a8e9d974ebcf9715c896139af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27bad558289e5d2a8e9d974ebcf9715c896139af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27bad558289e5d2a8e9d974ebcf9715c896139af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27bad558289e5d2a8e9d974ebcf9715c896139af/comments", "author": null, "committer": null, "parents": [{"sha": "081fdda62b19bed707a53c32819a871fcedb29b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/081fdda62b19bed707a53c32819a871fcedb29b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/081fdda62b19bed707a53c32819a871fcedb29b7"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "3eef44ef92ec6f4a13ffdb9adf439c9cf474c590", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27bad558289e5d2a8e9d974ebcf9715c896139af/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27bad558289e5d2a8e9d974ebcf9715c896139af/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=27bad558289e5d2a8e9d974ebcf9715c896139af", "patch": "@@ -1,3 +1,9 @@\n+2016-05-24  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\t    Kelvin Nilsen  <kelvin@gcc.gnu.org>\n+\n+\t* gcc.target/powerpc/p9-vpermr.c: New test for ISA 3.0 vpermr\n+\tsupport.\n+\n 2016-05-24  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/69872"}, {"sha": "7e7a266e1ec1f9abe8c467563f5ebfddd1ec8514", "filename": "gcc/testsuite/gcc.target/powerpc/p9-vpermr.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27bad558289e5d2a8e9d974ebcf9715c896139af/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fp9-vpermr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27bad558289e5d2a8e9d974ebcf9715c896139af/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fp9-vpermr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fp9-vpermr.c?ref=27bad558289e5d2a8e9d974ebcf9715c896139af", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do compile { target { powerpc64le-*-* } } } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-options \"-mcpu=power9 -O2\" } */\n+\n+/* Test generation of VPERMR/XXPERMR on ISA 3.0 in little endian.  */\n+\n+#include <altivec.h>\n+\n+vector long long\n+permute (vector long long *p, vector long long *q, vector unsigned char mask)\n+{\n+  vector long long a = *p;\n+  vector long long b = *q;\n+\n+  /* Force a, b to be in altivec registers to select vpermr insn.  */\n+  __asm__ (\" # a: %x0, b: %x1\" : \"+v\" (a), \"+v\" (b));\n+\n+  return vec_perm (a, b, mask);\n+}\n+\n+/* { dg-final { scan-assembler \"vpermr\\|xxpermr\" } } */"}]}