{"sha": "333cb61200ca99b916a71e989e25cf68a6ab597a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzMzY2I2MTIwMGNhOTliOTE2YTcxZTk4OWUyNWNmNjhhNmFiNTk3YQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-09-30T17:00:32Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-09-30T17:00:32Z"}, "message": "re PR c++/68754 (Explicitly defaulted constexpr assignment operator fails to compile)\n\n/cp\n2017-09-30  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/68754\n\t* method.c (defaulted_late_check): Early return if the defaulted\n\tdeclaration does not match the expected signature.\n\n/testsuite\n2017-09-30  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/68754\n\t* g++.dg/cpp1y/constexpr-68754.C: Move...\n\t* g++.dg/cpp0x/constexpr-68754.C: ... here, adjust.\n\nFrom-SVN: r253321", "tree": {"sha": "4563be93ea2887cfdfbf160bdea3cacbdca47b12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4563be93ea2887cfdfbf160bdea3cacbdca47b12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/333cb61200ca99b916a71e989e25cf68a6ab597a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/333cb61200ca99b916a71e989e25cf68a6ab597a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/333cb61200ca99b916a71e989e25cf68a6ab597a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/333cb61200ca99b916a71e989e25cf68a6ab597a/comments", "author": null, "committer": null, "parents": [{"sha": "15c77315001af0842a537ff748d1a0995ad38545", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15c77315001af0842a537ff748d1a0995ad38545", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15c77315001af0842a537ff748d1a0995ad38545"}], "stats": {"total": 34, "additions": 24, "deletions": 10}, "files": [{"sha": "4025cb09fb460895b629943f9df25ff9c4f2ac64", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=333cb61200ca99b916a71e989e25cf68a6ab597a", "patch": "@@ -1,3 +1,9 @@\n+2017-09-30  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/68754\n+\t* method.c (defaulted_late_check): Early return if the defaulted\n+\tdeclaration does not match the expected signature.\n+\n 2017-09-29  Jakub Jelinek  <jakub@redhat.com>\n \n \tP0683R1 - default member initializers for bit-fields"}, {"sha": "7788afba48b265365514e70b3008550c8b4611d6", "filename": "gcc/cp/method.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=333cb61200ca99b916a71e989e25cf68a6ab597a", "patch": "@@ -2191,9 +2191,11 @@ defaulted_late_check (tree fn)\n       || !compparms (TYPE_ARG_TYPES (TREE_TYPE (fn)),\n \t\t     TYPE_ARG_TYPES (TREE_TYPE (implicit_fn))))\n     {\n-      error (\"defaulted declaration %q+D\", fn);\n-      error_at (DECL_SOURCE_LOCATION (fn),\n-\t\t\"does not match expected signature %qD\", implicit_fn);\n+      error (\"defaulted declaration %q+D does not match the \"\n+\t     \"expected signature\", fn);\n+      inform (DECL_SOURCE_LOCATION (fn),\n+\t      \"expected signature: %qD\", implicit_fn);\n+      return;\n     }\n \n   if (DECL_DELETED_FN (implicit_fn))"}, {"sha": "cd4688e7916fbf537c6e78726c6371605a8167c9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=333cb61200ca99b916a71e989e25cf68a6ab597a", "patch": "@@ -1,3 +1,9 @@\n+2017-09-30  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/68754\n+\t* g++.dg/cpp1y/constexpr-68754.C: Move...\n+\t* g++.dg/cpp0x/constexpr-68754.C: ... here, adjust.\n+\n 2017-09-30  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/82361"}, {"sha": "643fa07841218155f60ed206920ffba8ade51a0e", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-68754.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-68754.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/333cb61200ca99b916a71e989e25cf68a6ab597a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-68754.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-68754.C?ref=333cb61200ca99b916a71e989e25cf68a6ab597a", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/68754\n+// { dg-do compile { target c++11 } }\n+\n+struct base { };\n+struct derived : base {\n+  constexpr derived& operator=(derived const&) = default; // { dg-error \"defaulted declaration\" \"\" { target { ! c++14 } } }\n+};"}, {"sha": "e72acb1baa3204e7c4c36a596008d3f05d3eec5b", "filename": "gcc/testsuite/g++.dg/cpp1y/constexpr-68754.C", "status": "removed", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c77315001af0842a537ff748d1a0995ad38545/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fconstexpr-68754.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c77315001af0842a537ff748d1a0995ad38545/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fconstexpr-68754.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fconstexpr-68754.C?ref=15c77315001af0842a537ff748d1a0995ad38545", "patch": "@@ -1,7 +0,0 @@\n-// PR c++/68754\n-// { dg-do compile { target c++14 } }\n-\n-struct base { };\n-struct derived : base {\n-  constexpr derived& operator=(derived const&) = default;\n-};"}]}