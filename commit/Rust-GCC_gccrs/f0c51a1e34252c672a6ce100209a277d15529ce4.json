{"sha": "f0c51a1e34252c672a6ce100209a277d15529ce4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjBjNTFhMWUzNDI1MmM2NzJhNmNlMTAwMjA5YTI3N2QxNTUyOWNlNA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-06T11:21:12Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-06T11:21:12Z"}, "message": "(expand_function_start): Delay copying static chain.\n\nFrom-SVN: r6979", "tree": {"sha": "4d3ade52ac4ac6fb1581e3b5a67d54c8b604c7a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d3ade52ac4ac6fb1581e3b5a67d54c8b604c7a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f0c51a1e34252c672a6ce100209a277d15529ce4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0c51a1e34252c672a6ce100209a277d15529ce4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0c51a1e34252c672a6ce100209a277d15529ce4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0c51a1e34252c672a6ce100209a277d15529ce4/comments", "author": null, "committer": null, "parents": [{"sha": "8b0f91011f1ed67e185e3b777a663858d1631821", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b0f91011f1ed67e185e3b777a663858d1631821", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b0f91011f1ed67e185e3b777a663858d1631821"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "22ea58b6d49859480e7b425e7b8389f5cac70073", "filename": "gcc/function.c", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0c51a1e34252c672a6ce100209a277d15529ce4/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0c51a1e34252c672a6ce100209a277d15529ce4/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=f0c51a1e34252c672a6ce100209a277d15529ce4", "patch": "@@ -4860,7 +4860,13 @@ expand_function_start (subr, parms_have_cleanups)\n   if (current_function_needs_context)\n     {\n       last_ptr = assign_stack_local (Pmode, GET_MODE_SIZE (Pmode), 0);\n-      emit_move_insn (last_ptr, static_chain_incoming_rtx);\n+\n+#ifdef SMALL_REGISTER_CLASSES\n+      /* Delay copying static chain if it is not a register to avoid\n+\t conflicts with regs used for parameters.  */\n+      if (GET_CODE (static_chain_incoming_rtx) == REG)\n+#endif\n+        emit_move_insn (last_ptr, static_chain_incoming_rtx);\n     }\n \n   /* If the parameters of this function need cleaning up, get a label\n@@ -4976,6 +4982,15 @@ expand_function_start (subr, parms_have_cleanups)\n \n   assign_parms (subr, 0);\n \n+#ifdef SMALL_REGISTER_CLASSES\n+  /* Copy the static chain now if it wasn't a register.  The delay is to\n+     avoid conflicts with the parameter passing registers.  */\n+\n+  if (current_function_needs_context)\n+      if (GET_CODE (static_chain_incoming_rtx) != REG)\n+        emit_move_insn (last_ptr, static_chain_incoming_rtx);\n+#endif\n+\n   /* The following was moved from init_function_start.\n      The move is supposed to make sdb output more accurate.  */\n   /* Indicate the beginning of the function body,"}]}