{"sha": "9ea07fd00e87dcb4f7a69830e7627107e55bfd00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWVhMDdmZDAwZTg3ZGNiNGY3YTY5ODMwZTc2MjcxMDdlNTViZmQwMA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@redhat.com", "date": "2001-03-23T19:47:57Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2001-03-23T19:47:57Z"}, "message": "Re-add missing debug info for weak aliases.\n\n\t* varasm.c (make_decl_rtl): Add TREE_PUBLIC check to abort test.\n\t(assemble_alias): Call make_decl_rtl.\n\nFrom-SVN: r40791", "tree": {"sha": "ee6e14153359f344de945ee20e1b0e0ebce9a2e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee6e14153359f344de945ee20e1b0e0ebce9a2e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ea07fd00e87dcb4f7a69830e7627107e55bfd00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ea07fd00e87dcb4f7a69830e7627107e55bfd00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ea07fd00e87dcb4f7a69830e7627107e55bfd00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ea07fd00e87dcb4f7a69830e7627107e55bfd00/comments", "author": null, "committer": null, "parents": [{"sha": "b124f72e29e5b0ff7b6cbd85fab0e9d4676d7b9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b124f72e29e5b0ff7b6cbd85fab0e9d4676d7b9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b124f72e29e5b0ff7b6cbd85fab0e9d4676d7b9f"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "a6ff3aa8a1d4281e963e10d86864d100c225269f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ea07fd00e87dcb4f7a69830e7627107e55bfd00/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ea07fd00e87dcb4f7a69830e7627107e55bfd00/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ea07fd00e87dcb4f7a69830e7627107e55bfd00", "patch": "@@ -1,3 +1,8 @@\n+2001-03-23  Jim Wilson  <wilson@redhat.com>\n+\n+\t* varasm.c (make_decl_rtl): Add TREE_PUBLIC check to abort test.\n+\t(assemble_alias): Call make_decl_rtl.\n+\t\n Fri Mar 23 16:59:08 2001  J\"orn Rennecke <amylaar@redhat.com>\n \n \t* stor-layout.c (layout_type): Give OFFSET_TYPE a MODE_INT type."}, {"sha": "3a6d61dfa412ebd14b53971a5d51fb2299d57746", "filename": "gcc/varasm.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ea07fd00e87dcb4f7a69830e7627107e55bfd00/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ea07fd00e87dcb4f7a69830e7627107e55bfd00/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=9ea07fd00e87dcb4f7a69830e7627107e55bfd00", "patch": "@@ -580,10 +580,12 @@ make_decl_rtl (decl, asmspec)\n   int reg_number;\n \n   /* Check that we are not being given an automatic variable.  */\n+  /* A weak alias has TREE_PUBLIC set but not the other bits.  */\n   if (TREE_CODE (decl) == PARM_DECL\n       || TREE_CODE (decl) == RESULT_DECL\n       || (TREE_CODE (decl) == VAR_DECL\n \t  && !TREE_STATIC (decl)\n+\t  && !TREE_PUBLIC (decl)\n \t  && !DECL_EXTERNAL (decl)\n \t  && !DECL_REGISTER (decl)))\n     abort ();\n@@ -4796,6 +4798,10 @@ assemble_alias (decl, target)\n {\n   const char *name;\n \n+  /* We must force creation of DECL_RTL for debug info generation, even though\n+     we don't use it here.  */\n+  make_decl_rtl (decl, NULL_PTR);\n+\n   name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (decl));\n \n #ifdef ASM_OUTPUT_DEF"}]}