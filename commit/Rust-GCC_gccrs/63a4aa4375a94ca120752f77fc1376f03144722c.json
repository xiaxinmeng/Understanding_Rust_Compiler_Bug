{"sha": "63a4aa4375a94ca120752f77fc1376f03144722c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjNhNGFhNDM3NWE5NGNhMTIwNzUyZjc3ZmMxMzc2ZjAzMTQ0NzIyYw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-30T14:53:56Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-30T14:53:56Z"}, "message": "[multiple changes]\n\n2014-07-30  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_ch3.adb (Process_Range_Expr_In_Decl): Use _FIRST/_LAST\n\tas name suffixes rather than L/H for subtype bounds.\n\t* tbuild.ads: Minor comment improvements and fixes\n\t(Make_External_Name): Document that suffix can start with an\n\tunderscore.\n\n2014-07-30  Bob Duff  <duff@adacore.com>\n\n\t* gnat_ugn.texi: Document --rep-clauses switch.\n\nFrom-SVN: r213290", "tree": {"sha": "25b8900d59eee4e3fea016395ad2eb380055f1de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25b8900d59eee4e3fea016395ad2eb380055f1de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63a4aa4375a94ca120752f77fc1376f03144722c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63a4aa4375a94ca120752f77fc1376f03144722c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63a4aa4375a94ca120752f77fc1376f03144722c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63a4aa4375a94ca120752f77fc1376f03144722c/comments", "author": null, "committer": null, "parents": [{"sha": "33c9f9af6c9f46541270211bb88360b842c162fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33c9f9af6c9f46541270211bb88360b842c162fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33c9f9af6c9f46541270211bb88360b842c162fe"}], "stats": {"total": 97, "additions": 83, "deletions": 14}, "files": [{"sha": "c240e201e67e27d9344354b3abf058ffc91754cc", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=63a4aa4375a94ca120752f77fc1376f03144722c", "patch": "@@ -1,3 +1,15 @@\n+2014-07-30  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch3.adb (Process_Range_Expr_In_Decl): Use _FIRST/_LAST\n+\tas name suffixes rather than L/H for subtype bounds.\n+\t* tbuild.ads: Minor comment improvements and fixes\n+\t(Make_External_Name): Document that suffix can start with an\n+\tunderscore.\n+\n+2014-07-30  Bob Duff  <duff@adacore.com>\n+\n+\t* gnat_ugn.texi: Document --rep-clauses switch.\n+\n 2014-07-30  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem_ch13.adb (Analyze_Aspect_Specifications): Default_Value and"}, {"sha": "9a17ec14a1174dfeb714f04badd370f309bf41ee", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 40, "deletions": 3, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=63a4aa4375a94ca120752f77fc1376f03144722c", "patch": "@@ -15269,6 +15269,7 @@ Ada source code into XML.\n * Switches for gnat2xml::\n * Other Programs::\n * Structure of the XML::\n+* Generating Representation Clauses::\n @end menu\n \n @node Switches for gnat2xml\n@@ -15323,13 +15324,16 @@ options:\n       output.)\n \n -I <include-dir>\n-    directories to search for dependencies\n-    You can also set the ADA_INCLUDE_PATH environment variable for this.\n+      directories to search for dependencies\n+      You can also set the ADA_INCLUDE_PATH environment variable for this.\n \n --compact -- debugging version, with interspersed source, and a more\n       compact representation of \"sloc\". This version does not conform\n       to any schema.\n \n+--rep-clauses -- generate representation clauses (see ``Generating\n+      Representation Clauses'' below).\n+\n -files=filename - the name of a text file containing a list\n                   of Ada source files to process\n \n@@ -15676,10 +15680,43 @@ formal_function\n formal_package\n formal_package_declaration_with_box\n @end smallexample\n+\n+@node Generating Representation Clauses\n+@section Generating Representation Clauses\n+\n+@noindent\n+If the @option{--rep-clauses} switch is given, @command{gnat2xml} will\n+generate representation clauses for certain types showing the\n+representation chosen by the compiler. The information is produced by\n+the ASIS ``Data Decomposition'' facility --- see the\n+@code{Asis.Data_Decomposition} package for details.\n+\n+Not all types are supported. For example, @code{Type_Model_Kind} must\n+be @code{A_Simple_Static_Model}. Types declared within generic units\n+have no representation. The clauses that are generated include\n+@code{attribute_definition_clauses} for @code{Size} and\n+@code{Component_Size}, as well as\n+@code{record_representation_clauses}.\n+\n+There is no guarantee that the generated representation clauses could\n+have actually come from legal Ada code; Ada has some restrictions that\n+are not necessarily obeyed by the generated clauses.\n+\n+The representation clauses are surrounded by comment elements to\n+indicate that they are automatically generated, something like this:\n+\n+@smallexample\n+<comment text=\"--gen+\">\n+...\n+<attribute_definition_clause>\n+...\n+<comment text=\"--gen-\">\n+...\n+@end smallexample\n+\n @end ifclear\n @end ifclear\n \n-\n @ifclear FSFEDITION\n @c *********************************\n @node The GNAT Metrics Tool gnatmetric"}, {"sha": "8acd603327794ff49e76d6873c1b9f3c93d2c385", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=63a4aa4375a94ca120752f77fc1376f03144722c", "patch": "@@ -19174,7 +19174,8 @@ package body Sem_Ch3 is\n                         Loc : constant Source_Ptr := Sloc (Lo);\n                         Lov : constant Entity_Id  :=\n                           Make_Defining_Identifier (Loc,\n-                            Chars => New_External_Name (Chars (Subtyp), 'L'));\n+                            Chars =>\n+                              New_External_Name (Chars (Subtyp), \"_FIRST\"));\n                      begin\n                         Insert_Action (R,\n                           Make_Object_Declaration (Loc,\n@@ -19195,7 +19196,8 @@ package body Sem_Ch3 is\n                         Loc : constant Source_Ptr := Sloc (Hi);\n                         Hiv : constant Entity_Id  :=\n                           Make_Defining_Identifier (Loc,\n-                            Chars => New_External_Name (Chars (Subtyp), 'H'));\n+                            Chars =>\n+                              New_External_Name (Chars (Subtyp), \"_LAST\"));\n                      begin\n                         Insert_Action (R,\n                           Make_Object_Declaration (Loc,"}, {"sha": "26869ba8dc82d9d3269993c28525af0722781307", "filename": "gcc/ada/tbuild.ads", "status": "modified", "additions": 27, "deletions": 9, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2Ftbuild.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63a4aa4375a94ca120752f77fc1376f03144722c/gcc%2Fada%2Ftbuild.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftbuild.ads?ref=63a4aa4375a94ca120752f77fc1376f03144722c", "patch": "@@ -250,14 +250,21 @@ package Tbuild is\n    --  positive, or if Suffix_Index is negative 1, then a unique serialized\n    --  suffix is added. If Suffix_Index is zero, then no index is appended.\n \n-   --  Suffix is also a single upper case letter other than O,Q,U,W,X and is a\n-   --  required parameter (T is permitted). The constructed name is stored\n-   --  using Name_Find so that it can be located using a subsequent Name_Find\n-   --  operation (i.e. it is properly hashed into the names table). The upper\n-   --  case letter given as the Suffix argument ensures that the name does\n-   --  not clash with any Ada identifier name. These generated names are\n-   --  permitted, but not required, to be made public by setting the flag\n-   --  Is_Public in the associated entity.\n+   --  Suffix is also a single upper case letter other than O,Q,U,W,X (T is\n+   --  allowed in this context), or a string of such upper case letters. In\n+   --  the case of a string, an initial underscore may be given.\n+   --\n+   --  The constructed name is stored using Name_Find so that it can be located\n+   --  using a subsequent Name_Find operation (i.e. it is properly hashed into\n+   --  the names table). The upper case letter given as the Suffix argument\n+   --  ensures that the name does not clash with any Ada identifier name. These\n+   --  generated names are permitted, but not required, to be made public by\n+   --  setting the flag Is_Public in the associated entity.\n+   --\n+   --  Note: it is dubious to make them public if they have serial numbers,\n+   --  since we are counting on the serial numbers being the same for the\n+   --  clients with'ing a package and the actual compilation of the package\n+   --  with full expansion. This is a dubious assumption ???\n \n    function New_External_Name\n      (Suffix       : Character;\n@@ -272,6 +279,11 @@ package Tbuild is\n    --  not clash with any Ada identifier name. These generated names are\n    --  permitted, but not required, to be made public by setting the flag\n    --  Is_Public in the associated entity.\n+   --\n+   --  Note: it is dubious to make these public since they have serial numbers,\n+   --  which means we are counting on the serial numbers being the same for the\n+   --  clients with'ing a package and the actual compilation of the package\n+   --  with full expansion. This is a dubious assumption ???\n \n    function New_Internal_Name (Id_Char : Character) return Name_Id;\n    --  Id_Char is an upper case letter other than O,Q,U,W (which are reserved\n@@ -287,11 +299,17 @@ package Tbuild is\n    --  the Name_Find procedure later on. Names created by New_Internal_Name\n    --  are guaranteed to be consistent from one compilation to another (i.e.\n    --  if the identical unit is compiled with a semantically consistent set\n-   --  of sources, the numbers will be consistent. This means that it is fine\n+   --  of sources, the numbers will be consistent). This means that it is fine\n    --  to use these as public symbols.\n    --\n    --  Note: Nearly all uses of this function are via calls to Make_Temporary,\n    --  but there are just a few cases where it is called directly.\n+   --\n+   --  Note: despite the guarantee of consistency stated above, it is dubious\n+   --  to make these public since they have serial numbers, which means we are\n+   --  counting on the serial numbers being the same for the clients with'ing\n+   --  a package and the actual compilation of the package with full expansion.\n+   --  This is a dubious assumption ???\n \n    function New_Occurrence_Of\n      (Def_Id : Entity_Id;"}]}