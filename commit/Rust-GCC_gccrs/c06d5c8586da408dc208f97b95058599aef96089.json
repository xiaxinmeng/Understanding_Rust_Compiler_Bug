{"sha": "c06d5c8586da408dc208f97b95058599aef96089", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzA2ZDVjODU4NmRhNDA4ZGMyMDhmOTdiOTUwNTg1OTlhZWY5NjA4OQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-11-17T02:29:54Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-11-17T02:29:54Z"}, "message": "h8300-protos.h: Add the prototype for same_cmp_following_p.\n\n\t* config/h8300/h8300-protos.h: Add the prototype for\n\tsame_cmp_following_p.\n\t* config/h8300/h8300.c (same_cmp_following_p): New.\n\t* config/h8300/h8300.md (peephole2): Use it.\n\nFrom-SVN: r73662", "tree": {"sha": "b32959fb48cc47ddbbc569cb8f49b24303d33499", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b32959fb48cc47ddbbc569cb8f49b24303d33499"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c06d5c8586da408dc208f97b95058599aef96089", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c06d5c8586da408dc208f97b95058599aef96089", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c06d5c8586da408dc208f97b95058599aef96089", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c06d5c8586da408dc208f97b95058599aef96089/comments", "author": null, "committer": null, "parents": [{"sha": "a62a282bf47bfccc4aa3a71e10c0c4277954ef2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a62a282bf47bfccc4aa3a71e10c0c4277954ef2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a62a282bf47bfccc4aa3a71e10c0c4277954ef2b"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "5b35017e1bb39f3c5d244c80503ee22bf1559edd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c06d5c8586da408dc208f97b95058599aef96089/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c06d5c8586da408dc208f97b95058599aef96089/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c06d5c8586da408dc208f97b95058599aef96089", "patch": "@@ -1,3 +1,10 @@\n+2003-11-16  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300-protos.h: Add the prototype for\n+\tsame_cmp_following_p.\n+\t* config/h8300/h8300.c (same_cmp_following_p): New.\n+\t* config/h8300/h8300.md (peephole2): Use it.\n+\n 2003-11-16  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/h8300.md: Don't use REGNO when its operand is"}, {"sha": "a7987d06a83febaf1b8fcbaa27e657a0d0f5a789", "filename": "gcc/config/h8300/h8300-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c06d5c8586da408dc208f97b95058599aef96089/gcc%2Fconfig%2Fh8300%2Fh8300-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c06d5c8586da408dc208f97b95058599aef96089/gcc%2Fconfig%2Fh8300%2Fh8300-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300-protos.h?ref=c06d5c8586da408dc208f97b95058599aef96089", "patch": "@@ -79,6 +79,7 @@ extern int h8300_eightbit_constant_address_p (rtx);\n extern int h8300_tiny_constant_address_p (rtx);\n extern int byte_accesses_mergeable_p (rtx, rtx);\n extern int same_cmp_preceding_p (rtx);\n+extern int same_cmp_following_p (rtx);\n \n /* Used in builtins.c */\n extern rtx h8300_return_addr_rtx (int, rtx);"}, {"sha": "28b44e0cdc68c134c54a3370a74a7e473431bee2", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c06d5c8586da408dc208f97b95058599aef96089/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c06d5c8586da408dc208f97b95058599aef96089/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=c06d5c8586da408dc208f97b95058599aef96089", "patch": "@@ -4514,6 +4514,26 @@ same_cmp_preceding_p (rtx i3)\n \t  && any_condjump_p (i2) && onlyjump_p (i2));\n }\n \n+/* Return nonzero if we have the same comparison insn as I1 two insns\n+   after I1.  I1 is assumed to be a comparison insn.  */\n+\n+int\n+same_cmp_following_p (rtx i1)\n+{\n+  rtx i2, i3;\n+\n+  /* Make sure we have a sequence of three insns.  */\n+  i2 = next_nonnote_insn (i1);\n+  if (i2 == NULL_RTX)\n+    return 0;\n+  i3 = next_nonnote_insn (i2);\n+  if (i3 == NULL_RTX)\n+    return 0;\n+\n+  return (INSN_P (i3) && rtx_equal_p (PATTERN (i1), PATTERN (i3))\n+\t  && any_condjump_p (i2) && onlyjump_p (i2));\n+}\n+\n /* Return nonzero if register OLD_REG can be renamed to register NEW_REG.  */\n \n int"}, {"sha": "8f6e78caa8653fc45f5aa2e61b4fbac67df472a2", "filename": "gcc/config/h8300/h8300.md", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c06d5c8586da408dc208f97b95058599aef96089/gcc%2Fconfig%2Fh8300%2Fh8300.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c06d5c8586da408dc208f97b95058599aef96089/gcc%2Fconfig%2Fh8300%2Fh8300.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.md?ref=c06d5c8586da408dc208f97b95058599aef96089", "patch": "@@ -4482,8 +4482,7 @@\n \t\t      (pc)))]\n   \"(TARGET_H8300H || TARGET_H8300S)\n    && !peep2_reg_dead_p (1, operands[0])\n-   && !rtx_equal_p (PATTERN (insn),\n-\t\t    PATTERN (next_nonnote_insn (next_nonnote_insn (insn))))\"\n+   && !same_cmp_following_p (insn)\"\n   [(set (match_dup 4)\n \t(match_dup 0))\n    (set (match_dup 4)"}]}