{"sha": "0b9c3a04049b790ea3aa6afcfef611088496be9d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGI5YzNhMDQwNDliNzkwZWEzYWE2YWZjZmVmNjExMDg4NDk2YmU5ZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-05-30T12:27:18Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-05-30T12:27:18Z"}, "message": "dwarf2out.c (reference_to_unused, [...]): Avoid creating of new varool nodes.\n\n\t* dwarf2out.c (reference_to_unused,\n\tpremark_types_used_by_global_vars_helper): Avoid creating of new\n\tvarool nodes.\n\nFrom-SVN: r160052", "tree": {"sha": "54525b369a3f43f52419d119f1ac56900fff36f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54525b369a3f43f52419d119f1ac56900fff36f6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b9c3a04049b790ea3aa6afcfef611088496be9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b9c3a04049b790ea3aa6afcfef611088496be9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b9c3a04049b790ea3aa6afcfef611088496be9d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b9c3a04049b790ea3aa6afcfef611088496be9d/comments", "author": null, "committer": null, "parents": [{"sha": "d56026c21e98183dd543b799ba3a1e1adea9a22c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d56026c21e98183dd543b799ba3a1e1adea9a22c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d56026c21e98183dd543b799ba3a1e1adea9a22c"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "12fe9f980c8928f475f143d6a17b08f5a9aad2f0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b9c3a04049b790ea3aa6afcfef611088496be9d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b9c3a04049b790ea3aa6afcfef611088496be9d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0b9c3a04049b790ea3aa6afcfef611088496be9d", "patch": "@@ -1,3 +1,9 @@\n+2010-05-30  Jan Hubicka  <jh@suse.cz>\n+\n+\t* dwarf2out.c (reference_to_unused,\n+\tpremark_types_used_by_global_vars_helper): Avoid creating of new\n+\tvarool nodes.\n+\n 2010-05-30  Jan Hubicka  <jh@suse.cz>\n \n \t* cgraph.h (cgraph_node_cannot_return,"}, {"sha": "48f5fa4c2085a38ca6ff962878eb365a9176fac2", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b9c3a04049b790ea3aa6afcfef611088496be9d/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b9c3a04049b790ea3aa6afcfef611088496be9d/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=0b9c3a04049b790ea3aa6afcfef611088496be9d", "patch": "@@ -15938,8 +15938,8 @@ reference_to_unused (tree * tp, int * walk_subtrees,\n     return *tp;\n   else if (TREE_CODE (*tp) == VAR_DECL)\n     {\n-      struct varpool_node *node = varpool_node (*tp);\n-      if (!node->needed)\n+      struct varpool_node *node = varpool_get_node (*tp);\n+      if (!node || !node->needed)\n \treturn *tp;\n     }\n   else if (TREE_CODE (*tp) == FUNCTION_DECL\n@@ -18213,8 +18213,8 @@ premark_types_used_by_global_vars_helper (void **slot,\n     {\n       /* Ask cgraph if the global variable really is to be emitted.\n          If yes, then we'll keep the DIE of ENTRY->TYPE.  */\n-      struct varpool_node *node = varpool_node (entry->var_decl);\n-      if (node->needed)\n+      struct varpool_node *node = varpool_get_node (entry->var_decl);\n+      if (node && node->needed)\n \t{\n \t  die->die_perennial_p = 1;\n \t  /* Keep the parent DIEs as well.  */"}]}