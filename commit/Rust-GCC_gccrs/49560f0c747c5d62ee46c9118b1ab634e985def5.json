{"sha": "49560f0c747c5d62ee46c9118b1ab634e985def5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDk1NjBmMGM3NDdjNWQ2MmVlNDZjOTExOGIxYWI2MzRlOTg1ZGVmNQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2013-12-01T11:37:09Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2013-12-01T11:37:09Z"}, "message": "Index...\n\nIndex: gcc/fortran/resolve.c\n===================================================================\n*** gcc/fortran/resolve.c\t(revision 205031)\n--- gcc/fortran/resolve.c\t(working copy)\n*************** resolve_transfer (gfc_code *code)\n*** 8247,8256 ****\n  \t && exp->value.op.op == INTRINSIC_PARENTHESES)\n      exp = exp->value.op.op1;\n  \n!   if (exp && exp->expr_type == EXPR_NULL && exp->ts.type == BT_UNKNOWN)\n      {\n!       gfc_error (\"NULL intrinsic at %L in data transfer statement requires \"\n! \t\t \"MOLD=\", &exp->where);\n        return;\n      }\n  \n--- 8247,8257 ----\n  \t && exp->value.op.op == INTRINSIC_PARENTHESES)\n      exp = exp->value.op.op1;\n  \n!   if (exp && exp->expr_type == EXPR_NULL\n!       && code->ext.dt)\n      {\n!       gfc_error (\"Invalid context for NULL () intrinsic at %L\",\n! \t\t &exp->where);\n        return;\n      }\n  \nIndex: gcc/testsuite/gfortran.dg/null_5.f90\n===================================================================\n*** gcc/testsuite/gfortran.dg/null_5.f90\t(revision 205031)\n--- gcc/testsuite/gfortran.dg/null_5.f90\t(working copy)\n*************** subroutine test_PR34547_1 ()\n*** 34,40 ****\n  end subroutine test_PR34547_1\n  \n  subroutine test_PR34547_2 ()\n!   print *, null () ! { dg-error \"in data transfer statement requires MOLD\" }\n  end subroutine test_PR34547_2\n  \n  subroutine test_PR34547_3 ()\n--- 34,40 ----\n  end subroutine test_PR34547_1\n  \n  subroutine test_PR34547_2 ()\n!   print *, null () ! { dg-error \"Invalid context\" }\n  end subroutine test_PR34547_2\n  \n  subroutine test_PR34547_3 ()\nIndex: gcc/testsuite/gfortran.dg/null_6.f90\n===================================================================\n*** gcc/testsuite/gfortran.dg/null_6.f90\t(revision 205031)\n--- gcc/testsuite/gfortran.dg/null_6.f90\t(working copy)\n*************** end subroutine test_PR50375_2\n*** 30,34 ****\n  \n  subroutine test_PR34547_3 ()\n    integer, allocatable :: i(:)\n!   print *, NULL(i)\n  end subroutine test_PR34547_3\n--- 30,34 ----\n  \n  subroutine test_PR34547_3 ()\n    integer, allocatable :: i(:)\n!   print *, NULL(i)    ! { dg-error \"Invalid context for NULL\" }\n  end subroutine test_PR34547_3\n\nFrom-SVN: r205565", "tree": {"sha": "593ffc7b21be2cbb5d08c3e3109e806d4ab89d9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/593ffc7b21be2cbb5d08c3e3109e806d4ab89d9e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49560f0c747c5d62ee46c9118b1ab634e985def5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49560f0c747c5d62ee46c9118b1ab634e985def5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49560f0c747c5d62ee46c9118b1ab634e985def5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49560f0c747c5d62ee46c9118b1ab634e985def5/comments", "author": null, "committer": null, "parents": [{"sha": "c931d01d7d439aa992116fa70d22fd407f8cb254", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c931d01d7d439aa992116fa70d22fd407f8cb254", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c931d01d7d439aa992116fa70d22fd407f8cb254"}], "stats": {"total": 23, "additions": 18, "deletions": 5}, "files": [{"sha": "b01b84b8477eafd4160abb9628da7b1c4e0fbdd8", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=49560f0c747c5d62ee46c9118b1ab634e985def5", "patch": "@@ -1,3 +1,9 @@\n+2013-12-01  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/34547\n+\t* resolve.c (resolve_transfer): EXPR_NULL is always in an\n+\tinvalid context in a transfer statement.\n+\n 2013-11-28  Sergey Ostanevich  <sergos.gnu@gmail.com>\n \n \t* lang.opt (Wopenmp-simd): New."}, {"sha": "d16347d034e212fbcdecb48ee2d42363907476a0", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=49560f0c747c5d62ee46c9118b1ab634e985def5", "patch": "@@ -8247,10 +8247,11 @@ resolve_transfer (gfc_code *code)\n \t && exp->value.op.op == INTRINSIC_PARENTHESES)\n     exp = exp->value.op.op1;\n \n-  if (exp && exp->expr_type == EXPR_NULL && exp->ts.type == BT_UNKNOWN)\n+  if (exp && exp->expr_type == EXPR_NULL\n+      && code->ext.dt)\n     {\n-      gfc_error (\"NULL intrinsic at %L in data transfer statement requires \"\n-\t\t \"MOLD=\", &exp->where);\n+      gfc_error (\"Invalid context for NULL () intrinsic at %L\",\n+\t\t &exp->where);\n       return;\n     }\n "}, {"sha": "b63f3de2484264159decae2988be4e7e9b5c104e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=49560f0c747c5d62ee46c9118b1ab634e985def5", "patch": "@@ -1,3 +1,9 @@\n+2013-12-01  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/34547\n+\t* gfortran.dg/null_5.f90 : Include new error.\n+\t* gfortran.dg/null_6.f90 : Include new error.\n+\n 2013-11-29  Marek Polacek  <polacek@redhat.com>\n \n \tPR sanitizer/59331"}, {"sha": "50b41c3e8bf63ac19eab366e7f869b2d3c0d6749", "filename": "gcc/testsuite/gfortran.dg/null_5.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ftestsuite%2Fgfortran.dg%2Fnull_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ftestsuite%2Fgfortran.dg%2Fnull_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnull_5.f90?ref=49560f0c747c5d62ee46c9118b1ab634e985def5", "patch": "@@ -34,7 +34,7 @@ subroutine test_PR34547_1 ()\n end subroutine test_PR34547_1\n \n subroutine test_PR34547_2 ()\n-  print *, null () ! { dg-error \"in data transfer statement requires MOLD\" }\n+  print *, null () ! { dg-error \"Invalid context\" }\n end subroutine test_PR34547_2\n \n subroutine test_PR34547_3 ()"}, {"sha": "6b8f21e63bc15d4edcb7f5f0f386812685e4c852", "filename": "gcc/testsuite/gfortran.dg/null_6.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ftestsuite%2Fgfortran.dg%2Fnull_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49560f0c747c5d62ee46c9118b1ab634e985def5/gcc%2Ftestsuite%2Fgfortran.dg%2Fnull_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnull_6.f90?ref=49560f0c747c5d62ee46c9118b1ab634e985def5", "patch": "@@ -30,5 +30,5 @@ end subroutine test_PR50375_2\n \n subroutine test_PR34547_3 ()\n   integer, allocatable :: i(:)\n-  print *, NULL(i)\n+  print *, NULL(i)    ! { dg-error \"Invalid context for NULL\" }\n end subroutine test_PR34547_3"}]}