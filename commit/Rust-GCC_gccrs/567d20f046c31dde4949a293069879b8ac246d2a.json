{"sha": "567d20f046c31dde4949a293069879b8ac246d2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY3ZDIwZjA0NmMzMWRkZTQ5NDlhMjkzMDY5ODc5YjhhYzI0NmQyYQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-06-24T02:05:06Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-06-24T02:05:06Z"}, "message": "crtfastmath.c: New file.\n\n        * config/alpha/crtfastmath.c: New file.\n        * config/alpha/t-crtfm: New file.\n        * config/alpha/elf.h (ENDFILE_SPEC): Use crtfastmath.o.\n        * config/alpha/osf.h (ENDFILE_SPEC): Likewise.\n        * config/alpha/t-crtbe (EXTRA_PARTS): Add pieces defined here.\n        * config.gcc (alpha-{linux,freebsd,netbsd,osf}): Use alpha/t-crtfm;\n        do not set extra_parts here.\n\nFrom-SVN: r43537", "tree": {"sha": "04f460c869d95f5606f63d411fecc889e5e98dc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04f460c869d95f5606f63d411fecc889e5e98dc2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/567d20f046c31dde4949a293069879b8ac246d2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/567d20f046c31dde4949a293069879b8ac246d2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/567d20f046c31dde4949a293069879b8ac246d2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/567d20f046c31dde4949a293069879b8ac246d2a/comments", "author": null, "committer": null, "parents": [{"sha": "8c2c98cd890a39f45b103b203853642aaea19619", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c2c98cd890a39f45b103b203853642aaea19619", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c2c98cd890a39f45b103b203853642aaea19619"}], "stats": {"total": 81, "additions": 72, "deletions": 9}, "files": [{"sha": "b5acd57cff27396bcc0183f990414c60a8e36792", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=567d20f046c31dde4949a293069879b8ac246d2a", "patch": "@@ -1,3 +1,13 @@\n+2001-06-23  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/alpha/crtfastmath.c: New file.\n+\t* config/alpha/t-crtfm: New file.\n+\t* config/alpha/elf.h (ENDFILE_SPEC): Use crtfastmath.o.\n+\t* config/alpha/osf.h (ENDFILE_SPEC): Likewise.\n+\t* config/alpha/t-crtbe (EXTRA_PARTS): Add pieces defined here.\n+\t* config.gcc (alpha-{linux,freebsd,netbsd,osf}): Use alpha/t-crtfm;\n+\tdo not set extra_parts here.\n+\n 2001-06-24  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* doc/install-old.texi: Remove more documentation of configure"}, {"sha": "df9f3c765db06baa1908c7f69bf7a953d5b55f48", "filename": "gcc/config.gcc", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=567d20f046c31dde4949a293069879b8ac246d2a", "patch": "@@ -430,8 +430,7 @@ alpha*-*-linux*ecoff*)\n alpha*-*-linux*libc1*)\n \ttm_file=\"${tm_file} alpha/elf.h alpha/linux.h alpha/linux-elf.h\"\n \ttarget_cpu_default=\"MASK_GAS\"\n-\ttmake_file=\"t-slibgcc-elf-ver t-linux t-linux-gnulibc1 alpha/t-alpha alpha/t-crtbe alpha/t-ieee\"\n-\textra_parts=\"crtbegin.o crtend.o crtbeginS.o crtendS.o\"\n+\ttmake_file=\"t-slibgcc-elf-ver t-linux t-linux-gnulibc1 alpha/t-alpha alpha/t-crtbe alpha/t-crtfm alpha/t-ieee\"\n \tgas=yes gnu_ld=yes\n \tif test x$enable_threads = xyes; then\n \t\tthread_file='posix'\n@@ -440,8 +439,7 @@ alpha*-*-linux*libc1*)\n alpha*-*-linux*)\n \ttm_file=\"${tm_file} alpha/elf.h alpha/linux.h alpha/linux-elf.h\"\n \ttarget_cpu_default=\"MASK_GAS\"\n-\ttmake_file=\"t-slibgcc-elf-ver t-linux alpha/t-crtbe alpha/t-alpha alpha/t-ieee\"\n-\textra_parts=\"crtbegin.o crtend.o crtbeginS.o crtendS.o\"\n+\ttmake_file=\"t-slibgcc-elf-ver t-linux alpha/t-crtbe alpha/t-crtfm alpha/t-alpha alpha/t-ieee\"\n \tgas=yes gnu_ld=yes\n \tif test x$enable_threads = xyes; then\n \t\tthread_file='posix'\n@@ -450,14 +448,13 @@ alpha*-*-linux*)\n alpha*-*-freebsd*)\n \ttm_file=\"${tm_file} ${fbsd_tm_file} alpha/elf.h alpha/freebsd.h\"\n \ttarget_cpu_default=\"MASK_GAS\"\n-\ttmake_file=\"${tmake_file} alpha/t-crtbe alpha/t-alpha alpha/t-ieee\"\n+\ttmake_file=\"${tmake_file} alpha/t-crtbe alpha/t-crtfm alpha/t-alpha alpha/t-ieee\"\n \t;;\n alpha*-*-netbsd*)\n \txm_defines=POSIX\n \ttm_file=\"${tm_file} alpha/elf.h alpha/netbsd.h alpha/netbsd-elf.h\"\n \ttarget_cpu_default=\"MASK_GAS\"\n-\ttmake_file=\"alpha/t-crtbe alpha/t-alpha alpha/t-ieee\"\n-\textra_parts=\"crtbegin.o crtend.o crtbeginS.o crtendS.o\"\n+\ttmake_file=\"alpha/t-crtbe alpha/t-crtfm alpha/t-alpha alpha/t-ieee\"\n \tgas=yes gnu_ld=yes\n \t;;\n \n@@ -478,7 +475,7 @@ alpha*-dec-osf*)\n \t\textra_passes=\"mips-tfile mips-tdump\"\n \tfi\n \tuse_collect2=yes\n-\ttmake_file=\"alpha/t-alpha alpha/t-ieee alpha/t-osf\"\n+\ttmake_file=\"alpha/t-alpha alpha/t-ieee alpha/t-osf alpha/t-crtfm\"\n \tcase $machine in\n \t  *-*-osf1*)\n \t    tm_file=\"${tm_file} alpha/osf.h alpha/osf12.h alpha/osf2or3.h\""}, {"sha": "4651ee7899fb03faa65f02f730bcd2c529b8feec", "filename": "gcc/config/alpha/crtfastmath.c", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Fcrtfastmath.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Fcrtfastmath.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fcrtfastmath.c?ref=567d20f046c31dde4949a293069879b8ac246d2a", "patch": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright (C) 2001 Free Software Foundation, Inc.\n+ * Contributed by Richard Henderson (rth@redhat.com)\n+ *\n+ * This file is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU General Public License as published by the\n+ * Free Software Foundation; either version 2, or (at your option) any\n+ * later version.\n+ * \n+ * In addition to the permissions in the GNU General Public License, the\n+ * Free Software Foundation gives you unlimited permission to link the\n+ * compiled version of this file with other programs, and to distribute\n+ * those programs without any restriction coming from the use of this\n+ * file.  (The General Public License restrictions do apply in other\n+ * respects; for example, they cover modification of the file, and\n+ * distribution when not linked into another program.)\n+ * \n+ * This file is distributed in the hope that it will be useful, but\n+ * WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * General Public License for more details.\n+ * \n+ * You should have received a copy of the GNU General Public License\n+ * along with this program; see the file COPYING.  If not, write to\n+ * the Free Software Foundation, 59 Temple Place - Suite 330,\n+ * Boston, MA 02111-1307, USA.\n+ * \n+ *    As a special exception, if you link this library with files\n+ *    compiled with GCC to produce an executable, this does not cause\n+ *    the resulting executable to be covered by the GNU General Public License.\n+ *    This exception does not however invalidate any other reasons why\n+ *    the executable file might be covered by the GNU General Public License.\n+ */\n+\n+/* Assume OSF/1 compatible interfaces.  */\n+\n+extern void __ieee_set_fp_control (unsigned long int);\n+\n+#define IEEE_MAP_DMZ  (1UL<<12)       /* Map denorm inputs to zero */\n+#define IEEE_MAP_UMZ  (1UL<<13)       /* Map underflowed outputs to zero */\n+\n+static void __attribute__((constructor))\n+set_fast_math (void)\n+{\n+  __ieee_set_fp_control (IEEE_MAP_DMZ | IEEE_MAP_UMZ);\n+}"}, {"sha": "dbec2b487f31b3fed6eb6b9d4f309394d1fa4b39", "filename": "gcc/config/alpha/elf.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Felf.h?ref=567d20f046c31dde4949a293069879b8ac246d2a", "patch": "@@ -677,7 +677,8 @@ void FN ()\t\t\t\t\t\\\n \n #undef\tENDFILE_SPEC\n #define ENDFILE_SPEC \\\n-  \"%{shared:crtendS.o%s}%{!shared:crtend.o%s} crtn.o%s\"\n+  \"%{ffast-math|funsafe-math-optimizations:crtfastmath.o%s} \\\n+   %{shared:crtendS.o%s}%{!shared:crtend.o%s} crtn.o%s\"\n \n /* We support #pragma.  */\n #define HANDLE_SYSV_PRAGMA"}, {"sha": "24ebaf6aa3fd31a8543712804a04a718c9a1da49", "filename": "gcc/config/alpha/osf.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Fosf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Fosf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fosf.h?ref=567d20f046c31dde4949a293069879b8ac246d2a", "patch": "@@ -68,6 +68,9 @@ Boston, MA 02111-1307, USA.  */\n #define STARTFILE_SPEC  \\\n   \"%{!shared:%{pg:gcrt0.o%s}%{!pg:%{p:mcrt0.o%s}%{!p:crt0.o%s}}}\"\n \n+#define ENDFILE_SPEC \\\n+  \"%{ffast-math|funsafe-math-optimizations:crtfastmath.o%s}\"\n+\n #define MD_STARTFILE_PREFIX \"/usr/lib/cmplrs/cc/\"\n \n #define ASM_FILE_START(FILE)\t\t\t\t\t\\"}, {"sha": "384237b1c9c16df90d95d66cb9715ff6c28ff44f", "filename": "gcc/config/alpha/t-crtbe", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Ft-crtbe", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Ft-crtbe", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Ft-crtbe?ref=567d20f046c31dde4949a293069879b8ac246d2a", "patch": "@@ -1,6 +1,8 @@\n # Effectively disable the crtbegin/end rules using crtstuff.c\n T = disable\n \n+EXTRA_PARTS += crtbegin.o crtend.o crtbeginS.o crtendS.o\n+\n # Assemble startup files.\n crtbegin.o: $(srcdir)/config/alpha/crtbegin.asm $(GCC_PASSES)\n \t$(GCC_FOR_TARGET) -c -o crtbegin.o -x assembler-with-cpp -I. $(srcdir)/config/alpha/crtbegin.asm"}, {"sha": "7076b5178610b0638686ff532ae9777623513bf8", "filename": "gcc/config/alpha/t-crtfm", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Ft-crtfm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/567d20f046c31dde4949a293069879b8ac246d2a/gcc%2Fconfig%2Falpha%2Ft-crtfm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Ft-crtfm?ref=567d20f046c31dde4949a293069879b8ac246d2a", "patch": "@@ -0,0 +1,4 @@\n+EXTRA_PARTS += crtfastmath.o\n+\n+crtfastmath.o: $(srcdir)/config/alpha/crtfastmath.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -c -o crtfastmath.o $(srcdir)/config/alpha/crtfastmath.c"}]}