{"sha": "d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMxMjM4Y2ZkZTBiOWU4OWE0YjI0ZTVkMzdjODFhYTU1ZDU0NDk0Yg==", "commit": {"author": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2018-06-05T05:47:44Z"}, "committer": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2018-06-05T05:47:44Z"}, "message": "2018-06-05  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n\n\t* include/bits/stl_tempbuf.h\n\t(_Temporary_buffer(_FwdIte, _FwdIte)): Delete, replaced by...\n\t(_Temporary_buffer(_FwdIte, size_type)): ...this, new.\n\t* include/ext/memory (temporary_buffer<>(_FwdIte, _FwdIte)): Adapt.\n\t* include/bits/stl_algo.h (__stable_partition): Adapt.\n\t(__inplace_merge): Adapt.\n\t(__stable_sort): Adapt.\n\nFrom-SVN: r261181", "tree": {"sha": "84c1cab69826e9e457f2c0e0adec851039f3544a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84c1cab69826e9e457f2c0e0adec851039f3544a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/comments", "author": null, "committer": null, "parents": [{"sha": "ca6f2936ccd5da3efe5b387fbfc2d51a7b3d0364", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca6f2936ccd5da3efe5b387fbfc2d51a7b3d0364", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca6f2936ccd5da3efe5b387fbfc2d51a7b3d0364"}], "stats": {"total": 33, "additions": 22, "deletions": 11}, "files": [{"sha": "0fa14c1f0e2857be68db79b71eaa2fff37442f5b", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "patch": "@@ -1,3 +1,13 @@\n+2018-06-05  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n+\n+\t* include/bits/stl_tempbuf.h\n+\t(_Temporary_buffer(_FwdIte, _FwdIte)): Delete, replaced by...\n+\t(_Temporary_buffer(_FwdIte, size_type)): ...this, new.\n+\t* include/ext/memory (temporary_buffer<>(_FwdIte, _FwdIte)): Adapt.\n+\t* include/bits/stl_algo.h (__stable_partition): Adapt.\n+\t(__inplace_merge): Adapt.\n+\t(__stable_sort): Adapt.\n+\n 2018-06-04  Jonathan Wakely  <jwakely@redhat.com>\n \n \tPR libstdc++/85930"}, {"sha": "e68ba7c1807cefd9a76b7b7e7c01e3c2d693033c", "filename": "libstdc++-v3/include/bits/stl_algo.h", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algo.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algo.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algo.h?ref=d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "patch": "@@ -1621,7 +1621,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       typedef typename iterator_traits<_ForwardIterator>::difference_type\n \t_DistanceType;\n \n-      _Temporary_buffer<_ForwardIterator, _ValueType> __buf(__first, __last);\n+      _Temporary_buffer<_ForwardIterator, _ValueType>\n+\t__buf(__first, std::distance(__first, __last));\n       return\n \tstd::__stable_partition_adaptive(__first, __last, __pred,\n \t\t\t\t\t _DistanceType(__buf.requested_size()),\n@@ -2540,7 +2541,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       const _DistanceType __len2 = std::distance(__middle, __last);\n \n       typedef _Temporary_buffer<_BidirectionalIterator, _ValueType> _TmpBuf;\n-      _TmpBuf __buf(__first, __last);\n+      _TmpBuf __buf(__first, __len1 + __len2);\n \n       if (__buf.begin() == 0)\n \tstd::__merge_without_buffer\n@@ -4998,7 +4999,7 @@ _GLIBCXX_BEGIN_NAMESPACE_ALGO\n \t_DistanceType;\n \n       typedef _Temporary_buffer<_RandomAccessIterator, _ValueType> _TmpBuf;\n-      _TmpBuf __buf(__first, __last);\n+      _TmpBuf __buf(__first, std::distance(__first, __last));\n \n       if (__buf.begin() == 0)\n \tstd::__inplace_stable_sort(__first, __last, __comp);"}, {"sha": "159ee27a5d39e818151dc9c57bea87b988a884e9", "filename": "libstdc++-v3/include/bits/stl_tempbuf.h", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_tempbuf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_tempbuf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_tempbuf.h?ref=d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "patch": "@@ -158,9 +158,9 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n       /**\n        * Constructs a temporary buffer of a size somewhere between\n-       * zero and the size of the given range.\n+       * zero and the given length.\n        */\n-      _Temporary_buffer(_ForwardIterator __first, _ForwardIterator __last);\n+      _Temporary_buffer(_ForwardIterator __seed, size_type __original_len);\n \n       ~_Temporary_buffer()\n       {\n@@ -241,9 +241,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n   template<typename _ForwardIterator, typename _Tp>\n     _Temporary_buffer<_ForwardIterator, _Tp>::\n-    _Temporary_buffer(_ForwardIterator __first, _ForwardIterator __last)\n-    : _M_original_len(std::distance(__first, __last)),\n-      _M_len(0), _M_buffer(0)\n+    _Temporary_buffer(_ForwardIterator __seed, size_type __original_len)\n+    : _M_original_len(__original_len), _M_len(0), _M_buffer(0)\n     {\n       __try\n \t{\n@@ -253,7 +252,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t  _M_len = __p.second;\n \t  if (_M_buffer)\n \t    std::__uninitialized_construct_buf(_M_buffer, _M_buffer + _M_len,\n-\t\t\t\t\t       __first);\n+\t\t\t\t\t       __seed);\n \t}\n       __catch(...)\n \t{\n@@ -268,4 +267,3 @@ _GLIBCXX_END_NAMESPACE_VERSION\n } // namespace\n \n #endif /* _STL_TEMPBUF_H */\n-"}, {"sha": "fcc49487a8003aa0e9cebf7fc317d2d4b3436a3a", "filename": "libstdc++-v3/include/ext/memory", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2Finclude%2Fext%2Fmemory", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d31238cfde0b9e89a4b24e5d37c81aa55d54494b/libstdc%2B%2B-v3%2Finclude%2Fext%2Fmemory", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fext%2Fmemory?ref=d31238cfde0b9e89a4b24e5d37c81aa55d54494b", "patch": "@@ -184,7 +184,9 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     {\n       /// Requests storage large enough to hold a copy of [first,last).\n       temporary_buffer(_ForwardIterator __first, _ForwardIterator __last)\n-      : _Temporary_buffer<_ForwardIterator, _Tp>(__first, __last) { }\n+      : _Temporary_buffer<_ForwardIterator, _Tp>(__first,\n+\t\t\t\t\t\t std::distance(__first, __last))\n+      { }\n       \n       /// Destroys objects and frees storage.\n       ~temporary_buffer() { }"}]}