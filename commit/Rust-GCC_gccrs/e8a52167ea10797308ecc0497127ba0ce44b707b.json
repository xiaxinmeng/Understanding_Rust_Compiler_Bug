{"sha": "e8a52167ea10797308ecc0497127ba0ce44b707b", "node_id": "C_kwDOANBUbNoAKGU4YTUyMTY3ZWExMDc5NzMwOGVjYzA0OTcxMjdiYTBjZTQ0YjcwN2I", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2021-12-13T19:25:15Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-01-07T16:24:07Z"}, "message": "[Ada] Remove unnecessary guard for inserting non-empty list\n\ngcc/ada/\n\n\t* exp_ch3.adb (Expand_N_Object_Declaration): Remove unnecessary\n\tguards.\n\t* exp_ch4.adb (Expand_N_If_Expression): Likewise; clarify comment.\n\t* exp_ch5.adb (Expand_N_If_Statement,\n\tExpand_Iterator_Loop_Over_Container): Likewise.\n\t* exp_ch9.adb (Expand_N_Task_Type_Declaration): Remove redundant\n\tguard.\n\t* freeze.adb (Freeze_All_Ent): Reduce scope of a local variable.", "tree": {"sha": "d6c64d26fc69e47ffdf0dbe38b15a88002dc08a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6c64d26fc69e47ffdf0dbe38b15a88002dc08a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e8a52167ea10797308ecc0497127ba0ce44b707b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8a52167ea10797308ecc0497127ba0ce44b707b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8a52167ea10797308ecc0497127ba0ce44b707b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8a52167ea10797308ecc0497127ba0ce44b707b/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3174b67eefb20421d43a6c96473fe41ee4cd1bf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3174b67eefb20421d43a6c96473fe41ee4cd1bf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3174b67eefb20421d43a6c96473fe41ee4cd1bf9"}], "stats": {"total": 36, "additions": 8, "deletions": 28}, "files": [{"sha": "1e9373abcd72512e1eec828d3d6a59a8e0d5e4e9", "filename": "gcc/ada/exp_ch3.adb", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch3.adb?ref=e8a52167ea10797308ecc0497127ba0ce44b707b", "patch": "@@ -6908,9 +6908,7 @@ package body Exp_Ch3 is\n                New_Nodes := Make_DT (Base_Typ, N);\n             end if;\n \n-            if not Is_Empty_List (New_Nodes) then\n-               Insert_List_Before (N, New_Nodes);\n-            end if;\n+            Insert_List_Before (N, New_Nodes);\n          end;\n       end if;\n "}, {"sha": "bf96e642e5c9b6a56a0687d6b6ca9b307e6f0b98", "filename": "gcc/ada/exp_ch4.adb", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch4.adb?ref=e8a52167ea10797308ecc0497127ba0ce44b707b", "patch": "@@ -6198,18 +6198,10 @@ package body Exp_Ch4 is\n          Set_Sloc (Parent (N), Loc);\n       end if;\n \n-      --  Make sure Then_Actions and Else_Actions are appropriately moved\n-      --  to the new if statement.\n+      --  Move Then_Actions and Else_Actions, if any, to the new if statement\n \n-      if Present (Then_Actions (N)) then\n-         Insert_List_Before\n-           (First (Then_Statements (New_If)), Then_Actions (N));\n-      end if;\n-\n-      if Present (Else_Actions (N)) then\n-         Insert_List_Before\n-           (First (Else_Statements (New_If)), Else_Actions (N));\n-      end if;\n+      Insert_List_Before (First (Then_Statements (New_If)), Then_Actions (N));\n+      Insert_List_Before (First (Else_Statements (New_If)), Else_Actions (N));\n \n       Insert_Action (N, Decl);\n       Insert_Action (N, New_If);"}, {"sha": "f9a9e7e3125c62915e200c6570043b87a28846e0", "filename": "gcc/ada/exp_ch5.adb", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch5.adb?ref=e8a52167ea10797308ecc0497127ba0ce44b707b", "patch": "@@ -4559,9 +4559,7 @@ package body Exp_Ch5 is\n \n                Set_Else_Statements (N, New_List (New_If));\n \n-               if Present (Condition_Actions (E)) then\n-                  Insert_List_Before (New_If, Condition_Actions (E));\n-               end if;\n+               Insert_List_Before (New_If, Condition_Actions (E));\n \n                Remove (E);\n \n@@ -5455,9 +5453,7 @@ package body Exp_Ch5 is\n       --  Condition_Actions of the iterator. Insert them now at the head of\n       --  the loop.\n \n-      if Present (Condition_Actions (Isc)) then\n-         Insert_List_Before (N, Condition_Actions (Isc));\n-      end if;\n+      Insert_List_Before (N, Condition_Actions (Isc));\n \n       Rewrite (N, New_Loop);\n       Analyze (N);"}, {"sha": "82f61b3f960b2e1ed15e6644e124076f97d65301", "filename": "gcc/ada/exp_ch9.adb", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Fexp_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch9.adb?ref=e8a52167ea10797308ecc0497127ba0ce44b707b", "patch": "@@ -12516,13 +12516,7 @@ package body Exp_Ch9 is\n          --  procedure for this corresponding record type and we won't get it\n          --  in time if we don't freeze now.\n \n-         declare\n-            L : constant List_Id := Freeze_Entity (Rec_Ent, N);\n-         begin\n-            if Is_Non_Empty_List (L) then\n-               Insert_List_After (Body_Decl, L);\n-            end if;\n-         end;\n+         Insert_List_After (Body_Decl, List => Freeze_Entity (Rec_Ent, N));\n       end if;\n \n       --  Complete the expansion of access types to the current task type, if"}, {"sha": "2b891080885a8b88a7c812e8c83fef6ffc7b2eaa", "filename": "gcc/ada/freeze.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Ffreeze.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a52167ea10797308ecc0497127ba0ce44b707b/gcc%2Fada%2Ffreeze.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffreeze.adb?ref=e8a52167ea10797308ecc0497127ba0ce44b707b", "patch": "@@ -2354,7 +2354,6 @@ package body Freeze is\n       procedure Freeze_All_Ent (From : Entity_Id; After : in out Node_Id) is\n          E     : Entity_Id;\n          Flist : List_Id;\n-         Lastn : Node_Id;\n \n          procedure Process_Flist;\n          --  If freeze nodes are present, insert and analyze, and reset cursor\n@@ -2365,6 +2364,7 @@ package body Freeze is\n          -------------------\n \n          procedure Process_Flist is\n+            Lastn : Node_Id;\n          begin\n             if Is_Non_Empty_List (Flist) then\n                Lastn := Next (After);"}]}