{"sha": "1581a9a177e82ba05a1769eebcf55a038569d6d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTU4MWE5YTE3N2U4MmJhMDVhMTc2OWVlYmNmNTVhMDM4NTY5ZDZkMw==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-08-19T05:41:13Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-08-19T05:41:13Z"}, "message": "re PR c++/20624 (wrong \"control reaches end of non-void function\" warning)\n\n2005-08-19  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR middle-end/20624\n        * g++.dg/warn/Wreturn-3.C: New test\n\n2005-08-19  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR middle-end/20624\n        * gimple-low.c (block_may_fallthru): Handle CLEANUP_POINT_EXPR by\n        looking past it.\n\nFrom-SVN: r103268", "tree": {"sha": "768da710870698492b6e6dbb4f9dfcada88d6f73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/768da710870698492b6e6dbb4f9dfcada88d6f73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1581a9a177e82ba05a1769eebcf55a038569d6d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1581a9a177e82ba05a1769eebcf55a038569d6d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1581a9a177e82ba05a1769eebcf55a038569d6d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1581a9a177e82ba05a1769eebcf55a038569d6d3/comments", "author": null, "committer": null, "parents": [{"sha": "c0975bc7053bb733ac32f4079ee1ff29ca24fa43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0975bc7053bb733ac32f4079ee1ff29ca24fa43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0975bc7053bb733ac32f4079ee1ff29ca24fa43"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "16ae2922c148cdd1f85b318748de647958aa9d83", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1581a9a177e82ba05a1769eebcf55a038569d6d3", "patch": "@@ -1,3 +1,9 @@\n+2005-08-19  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR middle-end/20624\n+\t* gimple-low.c (block_may_fallthru): Handle CLEANUP_POINT_EXPR by\n+\tlooking past it.\n+\n 2005-08-18  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* collect2.c (dup2): Delete."}, {"sha": "5c7c27f7e13f62e34ccdf66a814151952b8143f5", "filename": "gcc/gimple-low.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2Fgimple-low.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2Fgimple-low.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-low.c?ref=1581a9a177e82ba05a1769eebcf55a038569d6d3", "patch": "@@ -368,6 +368,9 @@ block_may_fallthru (tree block)\n     case CALL_EXPR:\n       /* Functions that do not return do not fall through.  */\n       return (call_expr_flags (stmt) & ECF_NORETURN) == 0;\n+    \n+    case CLEANUP_POINT_EXPR:\n+      return block_may_fallthru (TREE_OPERAND (stmt, 0));\n \n     default:\n       return true;"}, {"sha": "c8dfcfb319c27c69c8a09435be11c347ecbf5da5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1581a9a177e82ba05a1769eebcf55a038569d6d3", "patch": "@@ -1,3 +1,8 @@\n+2005-08-19  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR middle-end/20624\n+\t* g++.dg/warn/Wreturn-3.C: New test\n+\n 2005-08-18  Dorit Nuzman  <dorit@il.ibm.com>\n \n \tPR tree-optimization/22228"}, {"sha": "822dd4fdd3e9d705741e357af5d8e199c2677b2c", "filename": "gcc/testsuite/g++.dg/warn/Wreturn-3.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWreturn-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1581a9a177e82ba05a1769eebcf55a038569d6d3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWreturn-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWreturn-3.C?ref=1581a9a177e82ba05a1769eebcf55a038569d6d3", "patch": "@@ -0,0 +1,18 @@\n+// { dg-options \"-Wreturn-type\" }\n+// PR c++/20624\n+\n+struct fpos {\n+ fpos(int __pos) {}\n+};\n+struct g {\n+  g();\n+  ~g();\n+};\n+fpos seekoff(int b, int c)\n+{\n+  g __buf;\n+  if (b != -1 && c >= 0)\n+    return fpos(-1);\n+  else\n+    return fpos(-1);\n+} "}]}