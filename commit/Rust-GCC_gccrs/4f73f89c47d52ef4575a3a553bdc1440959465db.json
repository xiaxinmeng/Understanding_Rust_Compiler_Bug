{"sha": "4f73f89c47d52ef4575a3a553bdc1440959465db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGY3M2Y4OWM0N2Q1MmVmNDU3NWEzYTU1M2JkYzE0NDA5NTk0NjVkYg==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2006-02-15T09:42:27Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-02-15T09:42:27Z"}, "message": "par-ch6.adb, [...]: Implement -gnatyI switch (MODE_IN)\n\n2006-02-13  Robert Dewar  <dewar@adacore.com>\n\n\t* par-ch6.adb, style.ads, styleg.adb, styleg.ads, stylesw.adb,\n\tstylesw.ads, usage.adb, vms_data.ads: Implement -gnatyI switch\n\t(MODE_IN)\n\nFrom-SVN: r111081", "tree": {"sha": "60971654468700fd58602c5c228eb29285ac9c3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60971654468700fd58602c5c228eb29285ac9c3f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f73f89c47d52ef4575a3a553bdc1440959465db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f73f89c47d52ef4575a3a553bdc1440959465db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f73f89c47d52ef4575a3a553bdc1440959465db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f73f89c47d52ef4575a3a553bdc1440959465db/comments", "author": null, "committer": null, "parents": [{"sha": "76346895e79e6849880261fbfc2cababb0382367", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76346895e79e6849880261fbfc2cababb0382367", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76346895e79e6849880261fbfc2cababb0382367"}], "stats": {"total": 77, "additions": 56, "deletions": 21}, "files": [{"sha": "bcbda3d216dee30342be25da1777ade5a7c35d78", "filename": "gcc/ada/par-ch6.adb", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fpar-ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fpar-ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch6.adb?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1227,6 +1227,10 @@ package body Ch6 is\n       if Token = Tok_In then\n          Scan; -- past IN\n          Set_In_Present (Node, True);\n+\n+         if Style.Mode_In_Check and then Token /= Tok_Out then\n+            Error_Msg_SP (\"(style) IN should be omitted\");\n+         end if;\n       end if;\n \n       if Token = Tok_Out then"}, {"sha": "170857376f55a47b8d6593f123c7c832b8ffc973", "filename": "gcc/ada/style.ads", "status": "modified", "additions": 19, "deletions": 14, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstyle.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstyle.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstyle.ads?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -25,14 +25,14 @@\n ------------------------------------------------------------------------------\n \n --  This package collects all the routines used for style checking, as\n---  activated by the relevant command line option. These are gathered in\n---  a separate package so that they can more easily be customized. Calls\n---  to these subprograms are only made if Opt.Style_Check is set True.\n+--  activated by the relevant command line option. These are gathered in a\n+--  separate package so that they can more easily be customized. Calls to\n+--  these subprograms are only made if Opt.Style_Check is set True.\n \n with Errout;\n with Styleg;\n with Styleg.C;\n-with Types; use Types;\n+with Types;    use Types;\n \n package Style is\n \n@@ -71,10 +71,10 @@ package Style is\n \n    procedure Check_Attribute_Name (Reserved : Boolean)\n      renames Style_Inst.Check_Attribute_Name;\n-   --  The current token is an attribute designator. Check that it\n-   --  is capitalized in an appropriate manner. Reserved is set if\n-   --  the attribute designator is a reserved word (access, digits,\n-   --  delta or range) to allow differing rules for the two cases.\n+   --  The current token is an attribute designator. Check that it is\n+   --  capitalized in an appropriate manner. Reserved is set if the attribute\n+   --  designator is a reserved word (access, digits, delta or range) to allow\n+   --  differing rules for the two cases.\n \n    procedure Check_Box\n      renames Style_Inst.Check_Box;\n@@ -136,14 +136,14 @@ package Style is\n \n    procedure Check_Left_Paren\n      renames Style_Inst.Check_Left_Paren;\n-   --  Called after scanning out a left parenthesis to check spacing.\n+   --  Called after scanning out a left parenthesis to check spacing\n \n    procedure Check_Line_Terminator (Len : Int)\n      renames Style_Inst.Check_Line_Terminator;\n    --  Called with Scan_Ptr pointing to the first line terminator terminating\n-   --  the current line, used to check for appropriate line terminator and\n-   --  to check the line length (Len is the length of the current line).\n-   --  Note that the terminator may be the EOF character.\n+   --  the current line, used to check for appropriate line terminator and to\n+   --  check the line length (Len is the length of the current line). Note that\n+   --  the terminator may be the EOF character.\n \n    procedure Check_Pragma_Name\n      renames Style_Inst.Check_Pragma_Name;\n@@ -152,7 +152,7 @@ package Style is\n \n    procedure Check_Right_Paren\n      renames Style_Inst.Check_Right_Paren;\n-   --  Called after scanning out a right parenthesis to check spacing.\n+   --  Called after scanning out a right parenthesis to check spacing\n \n    procedure Check_Semicolon\n      renames Style_Inst.Check_Semicolon;\n@@ -178,6 +178,11 @@ package Style is\n    --  Called after scanning a conditional expression that has at least one\n    --  level of parentheses around the entire expression.\n \n+   function Mode_In_Check return Boolean\n+     renames Style_Inst.Mode_In_Check;\n+   --  Determines whether style checking is active and the Mode_In_Check is\n+   --  set, forbidding the explicit use of mode IN.\n+\n    procedure No_End_Name (Name : Node_Id)\n      renames Style_Inst.No_End_Name;\n    --  Called if an END is encountered where a name is allowed but not present."}, {"sha": "381b39d1933c74443937dd4a974a683cdd017752", "filename": "gcc/ada/styleg.adb", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstyleg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstyleg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstyleg.adb?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005 Free Software Foundation, Inc.          --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -794,6 +794,15 @@ package body Styleg is\n       return C = ' ' or else C = HT;\n    end Is_White_Space;\n \n+   -------------------\n+   -- Mode_In_Check --\n+   -------------------\n+\n+   function Mode_In_Check return Boolean is\n+   begin\n+      return Style_Check and Style_Check_Mode_In;\n+   end Mode_In_Check;\n+\n    -----------------\n    -- No_End_Name --\n    -----------------"}, {"sha": "7a5b312091b0821c200d6c679778548b5ffeca9b", "filename": "gcc/ada/styleg.ads", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstyleg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstyleg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstyleg.ads?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -143,6 +143,11 @@ package Styleg is\n    --  Called after scanning a conditional expression that has at least one\n    --  level of parentheses around the entire expression.\n \n+   function Mode_In_Check return Boolean;\n+   pragma Inline (Mode_In_Check);\n+   --  Determines whether style checking is active and the Mode_In_Check is\n+   --  set, forbidding the explicit use of mode IN.\n+\n    procedure No_End_Name (Name : Node_Id);\n    --  Called if an END is encountered where a name is allowed but not present.\n    --  The parameter is the node whose name is the name that is permitted in"}, {"sha": "e1eda4489453a237c8491f12348123e820fd5caf", "filename": "gcc/ada/stylesw.adb", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstylesw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstylesw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstylesw.adb?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -49,6 +49,7 @@ package body Stylesw is\n       Style_Check_Layout              := False;\n       Style_Check_Max_Line_Length     := False;\n       Style_Check_Max_Nesting_Level   := False;\n+      Style_Check_Mode_In             := False;\n       Style_Check_Order_Subprograms   := False;\n       Style_Check_Pragma_Casing       := False;\n       Style_Check_References          := False;\n@@ -115,6 +116,7 @@ package body Stylesw is\n       Add ('f', Style_Check_Form_Feeds);\n       Add ('h', Style_Check_Horizontal_Tabs);\n       Add ('i', Style_Check_If_Then_Layout);\n+      Add ('I', Style_Check_Mode_In);\n       Add ('k', Style_Check_Keyword_Casing);\n       Add ('l', Style_Check_Layout);\n       Add ('n', Style_Check_Standard);\n@@ -249,6 +251,9 @@ package body Stylesw is\n             when 'i' =>\n                Style_Check_If_Then_Layout      := True;\n \n+            when 'I' =>\n+               Style_Check_Mode_In             := True;\n+\n             when 'k' =>\n                Style_Check_Keyword_Casing      := True;\n "}, {"sha": "42e1774103e738b3522735502017c1160ae1f560", "filename": "gcc/ada/stylesw.ads", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstylesw.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fstylesw.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstylesw.ads?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -155,6 +155,10 @@ package Stylesw is\n    --  zero (a value of zero resets it to False). If True, it activates\n    --  checking the maximum nesting level against Style_Max_Nesting_Level.\n \n+   Style_Check_Mode_In : Boolean := False;\n+   --  This can be set True by using -gnatyI. If True, it activates checking\n+   --  that mode IN is not used on its own (since it is the default).\n+\n    Style_Check_Order_Subprograms : Boolean := False;\n    --  This can be set True by using the -gnatg or -gnatyo switch. If it\n    --  is True, then names of subprogram bodies must be in alphabetical"}, {"sha": "e1f790645040b9c0e75cfde74f6f2a9f03f64ebe", "filename": "gcc/ada/usage.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fusage.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fusage.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fusage.adb?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                B o d y                                   --\n --                                                                          --\n---          Copyright (C) 1992-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -436,6 +436,7 @@ begin\n    Write_Line (\"        f    check no form feeds/vertical tabs in source\");\n    Write_Line (\"        h    check no horizontal tabs in source\");\n    Write_Line (\"        i    check if-then layout\");\n+   Write_Line (\"        I    check mode in\");\n    Write_Line (\"        k    check casing rules for keywords\");\n    Write_Line (\"        l    check reference manual layout\");\n    Write_Line (\"        Lnn  check max nest level < nn \");"}, {"sha": "9a8dc0facb720006f5f6278f0920f138761aec71", "filename": "gcc/ada/vms_data.ads", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fvms_data.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f73f89c47d52ef4575a3a553bdc1440959465db/gcc%2Fada%2Fvms_data.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_data.ads?ref=4f73f89c47d52ef4575a3a553bdc1440959465db", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1996-2005, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1996-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1957,6 +1957,8 @@ package VMS_Data is\n                                                \"-gnatyl \"                  &\n                                             \"LINE_LENGTH \"                 &\n                                                \"-gnatym \"                  &\n+                                            \"MODE_IN \"                     &\n+                                               \"-gnatyI \"                  &\n                                             \"NONE \"                        &\n                                                \"-gnatyN \"                  &\n                                             \"STANDARD_CASING \"             &"}]}