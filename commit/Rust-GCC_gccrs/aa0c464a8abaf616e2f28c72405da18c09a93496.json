{"sha": "aa0c464a8abaf616e2f28c72405da18c09a93496", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWEwYzQ2NGE4YWJhZjYxNmUyZjI4YzcyNDA1ZGExOGMwOWE5MzQ5Ng==", "commit": {"author": {"name": "Matthew Fortune", "email": "matthew.fortune@imgtec.com", "date": "2015-01-19T23:05:41Z"}, "committer": {"name": "Matthew Fortune", "email": "mpf@gcc.gnu.org", "date": "2015-01-19T23:05:41Z"}, "message": "MIPS: Only pass floating-point options to the assembler when necessary\n\ngcc/\n\t* config/mips/mips.h (FP_ASM_SPEC): New define.\n\t(ASM_SPEC): Remove floating-point options and use FP_ASM_SPEC\n\tinstead.\n\nFrom-SVN: r219867", "tree": {"sha": "a0245f8c3eed2f622bb2e96faf4f5bcdf6afbd67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0245f8c3eed2f622bb2e96faf4f5bcdf6afbd67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aa0c464a8abaf616e2f28c72405da18c09a93496", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa0c464a8abaf616e2f28c72405da18c09a93496", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa0c464a8abaf616e2f28c72405da18c09a93496", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa0c464a8abaf616e2f28c72405da18c09a93496/comments", "author": {"login": "mfortune", "id": 10220247, "node_id": "MDQ6VXNlcjEwMjIwMjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10220247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfortune", "html_url": "https://github.com/mfortune", "followers_url": "https://api.github.com/users/mfortune/followers", "following_url": "https://api.github.com/users/mfortune/following{/other_user}", "gists_url": "https://api.github.com/users/mfortune/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfortune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfortune/subscriptions", "organizations_url": "https://api.github.com/users/mfortune/orgs", "repos_url": "https://api.github.com/users/mfortune/repos", "events_url": "https://api.github.com/users/mfortune/events{/privacy}", "received_events_url": "https://api.github.com/users/mfortune/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e5f3553320cd121e7952ee7b8ee5cad696336541", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5f3553320cd121e7952ee7b8ee5cad696336541", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5f3553320cd121e7952ee7b8ee5cad696336541"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "7e182f3c3f2d139fc8c314f083fa6bd942ac3971", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa0c464a8abaf616e2f28c72405da18c09a93496/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa0c464a8abaf616e2f28c72405da18c09a93496/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aa0c464a8abaf616e2f28c72405da18c09a93496", "patch": "@@ -1,3 +1,9 @@\n+2015-01-19  Matthew Fortune  <matthew.fortune@imgtec.com>\n+\n+\t* config/mips/mips.h (FP_ASM_SPEC): New define.\n+\t(ASM_SPEC): Remove floating-point options and use FP_ASM_SPEC\n+\tinstead.\n+\n 2015-01-19  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/53988"}, {"sha": "ec69ed5d0610e57290d03afc242110ba18ce3716", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 18, "deletions": 3, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa0c464a8abaf616e2f28c72405da18c09a93496/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa0c464a8abaf616e2f28c72405da18c09a93496/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=aa0c464a8abaf616e2f28c72405da18c09a93496", "patch": "@@ -1243,6 +1243,22 @@ struct mips_cpu_info {\n %{gcoff*:-mdebug} %{!gcoff*:-no-mdebug}\"\n #endif\n \n+/* FP_ASM_SPEC represents the floating-point options that must be passed\n+   to the assembler when FPXX support exists.  Prior to that point the\n+   assembler could accept the options but were not required for\n+   correctness.  We only add the options when absolutely necessary\n+   because passing -msoft-float to the assembler will cause it to reject\n+   all hard-float instructions which may require some user code to be\n+   updated.  */\n+\n+#ifdef HAVE_AS_DOT_MODULE\n+#define FP_ASM_SPEC \"\\\n+%{mhard-float} %{msoft-float} \\\n+%{msingle-float} %{mdouble-float}\"\n+#else\n+#define FP_ASM_SPEC\n+#endif\n+\n /* SUBTARGET_ASM_SPEC is always passed to the assembler.  It may be\n    overridden by subtargets.  */\n \n@@ -1277,9 +1293,8 @@ struct mips_cpu_info {\n %{modd-spreg} %{mno-odd-spreg} \\\n %{mshared} %{mno-shared} \\\n %{msym32} %{mno-sym32} \\\n-%{mtune=*} \\\n-%{mhard-float} %{msoft-float} \\\n-%{msingle-float} %{mdouble-float} \\\n+%{mtune=*}\" \\\n+FP_ASM_SPEC \"\\\n %(subtarget_asm_spec)\"\n \n /* Extra switches sometimes passed to the linker.  */"}]}