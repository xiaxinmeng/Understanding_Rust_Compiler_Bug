{"sha": "a533fc76359bf0dfedc15be83f0bfd886712a4b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTUzM2ZjNzYzNTliZjBkZmVkYzE1YmU4M2YwYmZkODg2NzEyYTRiMw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-01-17T21:29:59Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-01-17T21:29:59Z"}, "message": "re PR c++/78344 (ICE on invalid c++ code on x86_64-linux-gnu (internal compiler error: tree check: expected tree_list, have error_mark in cp_check_const_attributes, at cp/decl2.c:1347))\n\n/cp\n2018-01-17  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/78344\n\t* decl.c (grokdeclarator): Do not append the error_mark_node\n\tdue to an erroneous optional attribute-specifier-seq.\n\n/testsuite\n2018-01-17  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/78344\n\t* g++.dg/cpp0x/alignas13.C: New.\n\nFrom-SVN: r256821", "tree": {"sha": "430af7bf91a8a2e202b8b9ecc34ce4bbe0117166", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/430af7bf91a8a2e202b8b9ecc34ce4bbe0117166"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a533fc76359bf0dfedc15be83f0bfd886712a4b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a533fc76359bf0dfedc15be83f0bfd886712a4b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a533fc76359bf0dfedc15be83f0bfd886712a4b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a533fc76359bf0dfedc15be83f0bfd886712a4b3/comments", "author": null, "committer": null, "parents": [{"sha": "06b6c6306496e29005a8d34a7232c23846ac564e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06b6c6306496e29005a8d34a7232c23846ac564e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06b6c6306496e29005a8d34a7232c23846ac564e"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "5978a6495592b5c5617e16f46f67f7e976a7d914", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a533fc76359bf0dfedc15be83f0bfd886712a4b3", "patch": "@@ -1,3 +1,9 @@\n+2018-01-17  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/78344\n+\t* decl.c (grokdeclarator): Do not append the error_mark_node\n+\tdue to an erroneous optional attribute-specifier-seq.\n+\n 2018-01-17  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/83897"}, {"sha": "12022a2fdd8b51fe236303bb029ec7255c2e21ac", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=a533fc76359bf0dfedc15be83f0bfd886712a4b3", "patch": "@@ -11491,9 +11491,15 @@ grokdeclarator (const cp_declarator *declarator,\n       && declarator->kind == cdk_id\n       && declarator->std_attributes\n       && attrlist != NULL)\n-    /* [dcl.meaning]/1: The optional attribute-specifier-seq following\n-       a declarator-id appertains to the entity that is declared.  */\n-    *attrlist = chainon (*attrlist, declarator->std_attributes);\n+    {\n+      /* [dcl.meaning]/1: The optional attribute-specifier-seq following\n+\t a declarator-id appertains to the entity that is declared.  */\n+      if (declarator->std_attributes != error_mark_node)\n+\t*attrlist = chainon (*attrlist, declarator->std_attributes);\n+      else\n+\t/* We should have already diagnosed the issue (c++/78344).  */\n+\tgcc_assert (seen_error ());\n+    }\n \n   /* Handle parameter packs. */\n   if (parameter_pack_p)"}, {"sha": "364d044c721f27df2e6a3b51d0887c58581ac91f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a533fc76359bf0dfedc15be83f0bfd886712a4b3", "patch": "@@ -1,3 +1,8 @@\n+2018-01-17  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/78344\n+\t* g++.dg/cpp0x/alignas13.C: New.\n+\n 2018-01-17  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/83897"}, {"sha": "4811b03a5ef9563a51dfedc84f72fd2a20afd0c0", "filename": "gcc/testsuite/g++.dg/cpp0x/alignas13.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignas13.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a533fc76359bf0dfedc15be83f0bfd886712a4b3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignas13.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignas13.C?ref=a533fc76359bf0dfedc15be83f0bfd886712a4b3", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/78344\n+// { dg-do compile { target c++11 } }\n+\n+alignas(double) int f alignas;         // { dg-error \"30:expected '\\\\('\" }\n+alignas(double) int g alignas(double;  // { dg-error \"37:expected '\\\\)'\" }"}]}