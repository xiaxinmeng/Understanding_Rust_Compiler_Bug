{"sha": "3b9b4d3fa6ca154184713511dc4ac6e30731deaf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I5YjRkM2ZhNmNhMTU0MTg0NzEzNTExZGM0YWM2ZTMwNzMxZGVhZg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-07T06:04:38Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-07T06:04:38Z"}, "message": "(main): No program should return the error_count!\n\nReturn 2 if failure due to signal, 1 if just errors.\n(execute): Increment signal_count.\n\nFrom-SVN: r2068", "tree": {"sha": "e680c5d018a7aee3f60d9df3604fb41066a527ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e680c5d018a7aee3f60d9df3604fb41066a527ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b9b4d3fa6ca154184713511dc4ac6e30731deaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b9b4d3fa6ca154184713511dc4ac6e30731deaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b9b4d3fa6ca154184713511dc4ac6e30731deaf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b9b4d3fa6ca154184713511dc4ac6e30731deaf/comments", "author": null, "committer": null, "parents": [{"sha": "07d8ca2d9295b124556561d96571e6062d86d610", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07d8ca2d9295b124556561d96571e6062d86d610", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07d8ca2d9295b124556561d96571e6062d86d610"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "a177900bd14da33eac41236a5cf47798e54f4efe", "filename": "gcc/gcc.c", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b9b4d3fa6ca154184713511dc4ac6e30731deaf/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b9b4d3fa6ca154184713511dc4ac6e30731deaf/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=3b9b4d3fa6ca154184713511dc4ac6e30731deaf", "patch": "@@ -826,6 +826,10 @@ static int argbuf_index;\n \n static int execution_count;\n \n+/* Number of commands that exited with a signal.  */\n+\n+static int signal_count;\n+\n /* Name with which this program was invoked.  */\n \n static char *programname;\n@@ -1726,8 +1730,11 @@ execute ()\n \t\tprog = commands[j].prog;\n \n \t    if ((status & 0x7F) != 0)\n-\t      fatal (\"Internal compiler error: program %s got fatal signal %d\",\n-\t\t     prog, (status & 0x7F));\n+\t      {\n+\t\tfatal (\"Internal compiler error: program %s got fatal signal %d\",\n+\t\t       prog, (status & 0x7F));\n+\t\tsignal_count++;\n+\t      }\n \t    if (((status & 0xFF00) >> 8) >= MIN_FATAL_STATUS)\n \t      ret_code = -1;\n \t  }\n@@ -3474,7 +3481,7 @@ main (argc, argv)\n     delete_failure_queue ();\n   delete_temp_files ();\n \n-  exit (error_count);\n+  exit (error_count > 0 ? (signal_count ? 2 : 1) : 0);\n   /* NOTREACHED */\n   return 0;\n }"}]}