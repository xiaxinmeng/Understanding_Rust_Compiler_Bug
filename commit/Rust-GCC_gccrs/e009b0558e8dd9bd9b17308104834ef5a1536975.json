{"sha": "e009b0558e8dd9bd9b17308104834ef5a1536975", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTAwOWIwNTU4ZThkZDliZDliMTczMDgxMDQ4MzRlZjVhMTUzNjk3NQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@linaro.org", "date": "2017-09-18T15:28:55Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2017-09-18T15:28:55Z"}, "message": "Fix type of bitstart in vectorizable_live_operation\n\nThis patch changes the type of the multiplier applied by\nvectorizable_live_operation from unsigned_type_node to bitsizetype,\nwhich matches the type of TYPE_SIZE and is the type expected of a\nBIT_FIELD_REF bit position.  This is shown by existing tests when\nSVE is added.\n\n2017-09-18  Richard Sandiford  <richard.sandiford@linaro.org>\n\t    Alan Hayward  <alan.hayward@arm.com>\n\t    David Sherwood  <david.sherwood@arm.com>\n\ngcc/\n\t* tree-vect-loop.c (vectorizable_live_operation): Fix type of\n\tbitstart.\n\nCo-Authored-By: Alan Hayward <alan.hayward@arm.com>\nCo-Authored-By: David Sherwood <david.sherwood@arm.com>\n\nFrom-SVN: r252931", "tree": {"sha": "03d9673338775b35f211c908713f09826972a57b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03d9673338775b35f211c908713f09826972a57b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e009b0558e8dd9bd9b17308104834ef5a1536975", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e009b0558e8dd9bd9b17308104834ef5a1536975", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e009b0558e8dd9bd9b17308104834ef5a1536975", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e009b0558e8dd9bd9b17308104834ef5a1536975/comments", "author": null, "committer": null, "parents": [{"sha": "dd25e724a475caffa4372f911d15536d09c342c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd25e724a475caffa4372f911d15536d09c342c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd25e724a475caffa4372f911d15536d09c342c8"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "9142af1bb061b10d4841c51da283f345e4333890", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e009b0558e8dd9bd9b17308104834ef5a1536975/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e009b0558e8dd9bd9b17308104834ef5a1536975/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e009b0558e8dd9bd9b17308104834ef5a1536975", "patch": "@@ -1,3 +1,10 @@\n+2017-09-18  Richard Sandiford  <richard.sandiford@linaro.org>\n+\t    Alan Hayward  <alan.hayward@arm.com>\n+\t    David Sherwood  <david.sherwood@arm.com>\n+\n+\t* tree-vect-loop.c (vectorizable_live_operation): Fix type of\n+\tbitstart.\n+\n 2017-09-18  Richard Sandiford  <richard.sandiford@linaro.org>\n \t    Alan Hayward  <alan.hayward@arm.com>\n \t    David Sherwood  <david.sherwood@arm.com>"}, {"sha": "3140bbbbfff9b7443881caaae97ec26b74838a98", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e009b0558e8dd9bd9b17308104834ef5a1536975/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e009b0558e8dd9bd9b17308104834ef5a1536975/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=e009b0558e8dd9bd9b17308104834ef5a1536975", "patch": "@@ -7091,7 +7091,7 @@ vectorizable_live_operation (gimple *stmt,\n       vec_lhs = gimple_get_lhs (SLP_TREE_VEC_STMTS (slp_node)[vec_entry]);\n \n       /* Get entry to use.  */\n-      bitstart = build_int_cst (unsigned_type_node, vec_index);\n+      bitstart = bitsize_int (vec_index);\n       bitstart = int_const_binop (MULT_EXPR, bitsize, bitstart);\n     }\n   else"}]}