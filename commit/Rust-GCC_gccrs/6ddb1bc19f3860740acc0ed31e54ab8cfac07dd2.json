{"sha": "6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmRkYjFiYzE5ZjM4NjA3NDBhY2MwZWQzMWU1NGFiOGNmYWMwN2RkMg==", "commit": {"author": {"name": "Graham Stott", "email": "graham.stott@btinternet.com", "date": "2002-11-17T20:20:39Z"}, "committer": {"name": "Graham Stott", "email": "grahams@gcc.gnu.org", "date": "2002-11-17T20:20:39Z"}, "message": "real.c (real_to_decimal): Fix buffer overrun when buffer size is smaller than representation.\n\n\n        * real.c (real_to_decimal): Fix buffer overrun when buffer size\n        is smaller than representation.\n\nFrom-SVN: r59200", "tree": {"sha": "e4264e6f20aa6cc6f9fcc388cc0d093fc3401ab4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4264e6f20aa6cc6f9fcc388cc0d093fc3401ab4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2/comments", "author": {"login": "Graham-stott", "id": 17800827, "node_id": "MDQ6VXNlcjE3ODAwODI3", "avatar_url": "https://avatars.githubusercontent.com/u/17800827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Graham-stott", "html_url": "https://github.com/Graham-stott", "followers_url": "https://api.github.com/users/Graham-stott/followers", "following_url": "https://api.github.com/users/Graham-stott/following{/other_user}", "gists_url": "https://api.github.com/users/Graham-stott/gists{/gist_id}", "starred_url": "https://api.github.com/users/Graham-stott/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Graham-stott/subscriptions", "organizations_url": "https://api.github.com/users/Graham-stott/orgs", "repos_url": "https://api.github.com/users/Graham-stott/repos", "events_url": "https://api.github.com/users/Graham-stott/events{/privacy}", "received_events_url": "https://api.github.com/users/Graham-stott/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b9ad851eef2923e08c8e3521fd1e48322b2189ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9ad851eef2923e08c8e3521fd1e48322b2189ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9ad851eef2923e08c8e3521fd1e48322b2189ee"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "6434f60d1e216a817b5fa31485776ddce0175d1a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2", "patch": "@@ -1,3 +1,8 @@\n+2002-11-17  Graham Stott  <graham.stott@btinternet.com>\n+\n+\t* real.c (real_to_decimal): Fix buffer overrun when buffer size\n+\tis smaller than representation.\n+\n 2002-11-17  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* builtins.c: Fix formatting."}, {"sha": "d9a4b801e3d4e92b445605c5fa5304b67cf3b464", "filename": "gcc/real.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2/gcc%2Freal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2/gcc%2Freal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freal.c?ref=6ddb1bc19f3860740acc0ed31e54ab8cfac07dd2", "patch": "@@ -1485,6 +1485,11 @@ real_to_decimal (str, r_orig, buf_size, digits, crop_trailing_zeros)\n       abort ();\n     }\n \n+  /* Bound the number of digits printed by the size of the representation.  */\n+  max_digits = SIGNIFICAND_BITS * M_LOG10_2;\n+  if (digits == 0 || digits > max_digits)\n+    digits = max_digits;\n+\n   /* Estimate the decimal exponent, and compute the length of the string it\n      will print as.  Be conservative and add one to account for possible\n      overflow or rounding error.  */\n@@ -1499,11 +1504,6 @@ real_to_decimal (str, r_orig, buf_size, digits, crop_trailing_zeros)\n   if (digits > max_digits)\n     digits = max_digits;\n \n-  /* Bound the number of digits printed by the size of the representation.  */\n-  max_digits = SIGNIFICAND_BITS * M_LOG10_2;\n-  if (digits == 0 || digits > max_digits)\n-    digits = max_digits;\n-\n   one = real_digit (1);\n   ten = ten_to_ptwo (0);\n "}]}