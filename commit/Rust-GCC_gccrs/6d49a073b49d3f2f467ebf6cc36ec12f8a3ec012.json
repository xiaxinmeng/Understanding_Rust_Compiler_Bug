{"sha": "6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQ0OWEwNzNiNDlkM2YyZjQ2N2ViZjZjYzM2ZWMxMmY4YTNlYzAxMg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1998-01-22T14:48:58Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1998-01-22T14:48:58Z"}, "message": "Fix powerpc/rs6000 (subreg:SF (mem:SI ...)) reload problem.\n\n\t* reload.c (push_reload): In WORD_REGISTER_OPERATIONS code, add test\n\tto require the SUBREG mode to be smaller than the SUBREG_REG mode.\n\t* reload1.c (eliminate_regs): Likewise.\n\nFrom-SVN: r17444", "tree": {"sha": "fb7689cb1457dafc5fe17efd0f4ff136c93ea12a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb7689cb1457dafc5fe17efd0f4ff136c93ea12a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012/comments", "author": null, "committer": null, "parents": [{"sha": "c485e6a0c979b36c0785b57cbf17664fe0afb84d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c485e6a0c979b36c0785b57cbf17664fe0afb84d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c485e6a0c979b36c0785b57cbf17664fe0afb84d"}], "stats": {"total": 34, "additions": 22, "deletions": 12}, "files": [{"sha": "833b3285e6cc2fad107d7b07833d6927984fd22d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012", "patch": "@@ -1,3 +1,9 @@\n+Thu Jan 22 14:47:31 1998  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* reload.c (push_reload): In WORD_REGISTER_OPERATIONS code, add test\n+\tto require the SUBREG mode to be smaller than the SUBREG_REG mode.\n+\t* reload1.c (eliminate_regs): Likewise.\n+\n Thu Jan 22 14:49:14 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* regmove.c (find_matches): Initialize matches->earlyclobber too."}, {"sha": "2fcdd5a6aea942503416f4ed6e5b591537312f9d", "filename": "gcc/reload.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012/gcc%2Freload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012/gcc%2Freload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload.c?ref=6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012", "patch": "@@ -987,9 +987,11 @@ push_reload (in, out, inloc, outloc, class,\n \t      && ((GET_MODE_SIZE (outmode)\n \t\t   > GET_MODE_SIZE (GET_MODE (SUBREG_REG (out))))\n #ifdef WORD_REGISTER_OPERATIONS\n-\t\t  || ((GET_MODE_SIZE (outmode) - 1) / UNITS_PER_WORD ==\n-\t\t      ((GET_MODE_SIZE (GET_MODE (SUBREG_REG (out))) - 1)\n-\t\t       / UNITS_PER_WORD))\n+\t\t  || ((GET_MODE_SIZE (outmode)\n+\t\t       < GET_MODE_SIZE (GET_MODE (SUBREG_REG (out))))\n+\t\t      && ((GET_MODE_SIZE (outmode) - 1) / UNITS_PER_WORD ==\n+\t\t\t  ((GET_MODE_SIZE (GET_MODE (SUBREG_REG (out))) - 1)\n+\t\t\t   / UNITS_PER_WORD)))\n #endif\n \t          ))\n \t  || (GET_CODE (SUBREG_REG (out)) == REG"}, {"sha": "01263c8e4523ddd694f8c6f13d96ac8a446f057c", "filename": "gcc/reload1.c", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=6d49a073b49d3f2f467ebf6cc36ec12f8a3ec012", "patch": "@@ -3122,17 +3122,19 @@ eliminate_regs (x, mem_mode, insn)\n \t  int new_size = GET_MODE_SIZE (GET_MODE (new));\n \n \t  if (GET_CODE (new) == MEM\n-\t      && x_size <= new_size\n+\t      && ((x_size < new_size\n #ifdef WORD_REGISTER_OPERATIONS\n-\t      /* On these machines, combine can create rtl of the form\n-\t\t   (set (subreg:m1 (reg:m2 R) 0) ...)\n-\t\t where m1 < m2, and expects something interesting to \n-\t\t happen to the entire word.  Moreover, it will use the\n-\t\t (reg:m2 R) later, expecting all bits to be preserved.\n-\t\t So if the number of words is the same, preserve the \n-\t\t subreg so that push_reloads can see it.  */\n-\t      && ! ((x_size-1)/UNITS_PER_WORD == (new_size-1)/UNITS_PER_WORD)\n+\t\t   /* On these machines, combine can create rtl of the form\n+\t\t      (set (subreg:m1 (reg:m2 R) 0) ...)\n+\t\t      where m1 < m2, and expects something interesting to \n+\t\t      happen to the entire word.  Moreover, it will use the\n+\t\t      (reg:m2 R) later, expecting all bits to be preserved.\n+\t\t      So if the number of words is the same, preserve the \n+\t\t      subreg so that push_reloads can see it.  */\n+\t\t   && ! ((x_size-1)/UNITS_PER_WORD == (new_size-1)/UNITS_PER_WORD)\n #endif\n+\t\t   )\n+\t\t  || (x_size == new_size))\n #ifdef LOAD_EXTEND_OP\n \t      /* On these machines we will be reloading what is\n \t\t inside the SUBREG if it originally was a pseudo and"}]}