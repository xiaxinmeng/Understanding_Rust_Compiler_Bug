{"sha": "e0fd74691d8281cf68bfeedcf528d4a773b5ce04", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTBmZDc0NjkxZDgyODFjZjY4YmZlZWRjZjUyOGQ0YTc3M2I1Y2UwNA==", "commit": {"author": {"name": "Dave Korn", "email": "dave.korn.cygwin@gmail.com", "date": "2009-09-22T01:33:53Z"}, "committer": {"name": "Dave Korn", "email": "davek@gcc.gnu.org", "date": "2009-09-22T01:33:53Z"}, "message": "re PR middle-end/41357 (libgomp build fail)\n\n\tPR middle-end/41357\n\t* varasm.c (default_encode_section_info): Copy TLS model into\n\tsym_ref flags regardless of backend support for TLS, for all\n\tmodel types except TLS_MODEL_EMULATED.\n\nFrom-SVN: r151959", "tree": {"sha": "98978b679f84438e0b7ead378859b28fd14c2619", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98978b679f84438e0b7ead378859b28fd14c2619"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0fd74691d8281cf68bfeedcf528d4a773b5ce04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0fd74691d8281cf68bfeedcf528d4a773b5ce04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0fd74691d8281cf68bfeedcf528d4a773b5ce04", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0fd74691d8281cf68bfeedcf528d4a773b5ce04/comments", "author": {"login": "davek-cygwin", "id": 530057, "node_id": "MDQ6VXNlcjUzMDA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/530057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davek-cygwin", "html_url": "https://github.com/davek-cygwin", "followers_url": "https://api.github.com/users/davek-cygwin/followers", "following_url": "https://api.github.com/users/davek-cygwin/following{/other_user}", "gists_url": "https://api.github.com/users/davek-cygwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/davek-cygwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davek-cygwin/subscriptions", "organizations_url": "https://api.github.com/users/davek-cygwin/orgs", "repos_url": "https://api.github.com/users/davek-cygwin/repos", "events_url": "https://api.github.com/users/davek-cygwin/events{/privacy}", "received_events_url": "https://api.github.com/users/davek-cygwin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cf09842e67b2f51f8febe74bf55b47d5e49da98c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf09842e67b2f51f8febe74bf55b47d5e49da98c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf09842e67b2f51f8febe74bf55b47d5e49da98c"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "4d72c8bed65287b40546298d3502d20f1008a3bc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0fd74691d8281cf68bfeedcf528d4a773b5ce04/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0fd74691d8281cf68bfeedcf528d4a773b5ce04/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e0fd74691d8281cf68bfeedcf528d4a773b5ce04", "patch": "@@ -1,3 +1,10 @@\n+2009-09-22  Dave Korn  <dave.korn.cygwin@gmail.com>\n+\n+\tPR middle-end/41357\n+\t* varasm.c (default_encode_section_info): Copy TLS model into\n+\tsym_ref flags regardless of backend support for TLS, for all\n+\tmodel types except TLS_MODEL_EMULATED.\n+\n 2009-09-22  Dave Korn  <dave.korn.cygwin@gmail.com>\n \n \tPR bootstrap/41404"}, {"sha": "8a61fd26247724f4f5ef43f3c2b289cf803c5749", "filename": "gcc/varasm.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0fd74691d8281cf68bfeedcf528d4a773b5ce04/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0fd74691d8281cf68bfeedcf528d4a773b5ce04/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=e0fd74691d8281cf68bfeedcf528d4a773b5ce04", "patch": "@@ -6417,8 +6417,8 @@ default_encode_section_info (tree decl, rtx rtl, int first ATTRIBUTE_UNUSED)\n     flags |= SYMBOL_FLAG_FUNCTION;\n   if (targetm.binds_local_p (decl))\n     flags |= SYMBOL_FLAG_LOCAL;\n-  if (targetm.have_tls && TREE_CODE (decl) == VAR_DECL\n-      && DECL_THREAD_LOCAL_P (decl))\n+  if (TREE_CODE (decl) == VAR_DECL && DECL_THREAD_LOCAL_P (decl)\n+      && DECL_TLS_MODEL (decl) != TLS_MODEL_EMULATED)\n     flags |= DECL_TLS_MODEL (decl) << SYMBOL_FLAG_TLS_SHIFT;\n   else if (targetm.in_small_data_p (decl))\n     flags |= SYMBOL_FLAG_SMALL;"}]}