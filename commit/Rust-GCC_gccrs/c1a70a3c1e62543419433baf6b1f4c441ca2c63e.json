{"sha": "c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzFhNzBhM2MxZTYyNTQzNDE5NDMzYmFmNmIxZjRjNDQxY2EyYzYzZQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2006-02-21T02:28:03Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2006-02-21T02:28:03Z"}, "message": "re PR tree-optimization/26361 (bootstrap failure on Alpha: xgcc runs out of memory compiling libiberty/md5.c)\n\n\n\tPR tree-optimization/26361\n\t* tree-vrp.c (extract_range_from_unary_expr): Handle NEGATE_EXPR\n\tof unsigned integer types.\n\n\t* gcc.dg/tree-ssa/vrp27.c: New test case.\n\nFrom-SVN: r111327", "tree": {"sha": "37f0f5ff5923633310a8dd5a55e1b5912dcbc05d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/37f0f5ff5923633310a8dd5a55e1b5912dcbc05d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/comments", "author": null, "committer": null, "parents": [{"sha": "f49712d83374cdb039e2dfa6e3197df7ebbfd23d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f49712d83374cdb039e2dfa6e3197df7ebbfd23d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f49712d83374cdb039e2dfa6e3197df7ebbfd23d"}], "stats": {"total": 62, "additions": 62, "deletions": 0}, "files": [{"sha": "0349d92cb0ba52ce44a10fad1d9446ee71ed10e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "patch": "@@ -1,3 +1,9 @@\n+2006-02-20  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR tree-optimization/26361\n+\t* tree-vrp.c (extract_range_from_unary_expr): Handle NEGATE_EXPR\n+\tof unsigned integer types.\n+\n 2006-02-20  Sebastian Pop  <pop@cri.ensmp.fr>\n \n \t* tree-chrec.c (eq_evolutions_p): New."}, {"sha": "cf2d999a3268b7786a6839e062689c3f384e8d8f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "patch": "@@ -1,3 +1,8 @@\n+2006-02-20  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR tree-optimization/26361\n+\t* gcc.dg/tree-ssa/vrp27.c: New test case.\n+\n 2006-02-20  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* gcc.dg/tree-ssa/complex-3.c: Split out first part into ..."}, {"sha": "09b96f9199f2912185e358b5b41cf3096643d145", "filename": "gcc/testsuite/gcc.dg/tree-ssa/vrp27.c", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp27.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp27.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp27.c?ref=c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "patch": "@@ -0,0 +1,33 @@\n+/* PR middle-end/26361.  */\n+/* { dg-do run } */\n+/* { dg-options \"-O2\" } */\n+\n+void abort(void);\n+\n+__attribute__((noinline))\n+void gen_rtx_CONST_INT(long long x) {\n+    if (-x > 10)\n+        abort();\n+}\n+__attribute__((noinline))\n+int alpha_expand_prologue(long frame_size)\n+{\n+    unsigned long long a;\n+    int probed;\n+    if (frame_size <= 1)  return;\n+    unsigned long long b = -2;\n+    a = -2;\n+    do {\n+        int a1 = a;\n+        probed = -a1;\n+        gen_rtx_CONST_INT (a1);\n+        a -= 2;\n+        a1 = -a;\n+        probed = a1;\n+    } while (probed < frame_size);\n+}\n+\n+int main(void) {\n+    alpha_expand_prologue(10);\n+    return 0;\n+}"}, {"sha": "911ccb2e632272832e8d5fe022ff05366f936328", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1a70a3c1e62543419433baf6b1f4c441ca2c63e/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=c1a70a3c1e62543419433baf6b1f4c441ca2c63e", "patch": "@@ -1790,6 +1790,24 @@ extract_range_from_unary_expr (value_range_t *vr, tree expr)\n       max = (vr0.min == TYPE_MIN_VALUE (TREE_TYPE (expr)) && !flag_wrapv)\n \t     ? TYPE_MAX_VALUE (TREE_TYPE (expr))\n \t     : fold_unary_to_constant (code, TREE_TYPE (expr), vr0.min);\n+\n+    }\n+  else if (code == NEGATE_EXPR\n+\t   && TYPE_UNSIGNED (TREE_TYPE (expr)))\n+    {\n+      if (!range_includes_zero_p (&vr0))\n+\t{\n+\t  max = fold_unary_to_constant (code, TREE_TYPE (expr), vr0.min);\n+\t  min = fold_unary_to_constant (code, TREE_TYPE (expr), vr0.max);\n+\t}\n+      else\n+\t{\n+\t  if (range_is_null (&vr0))\n+\t    set_value_range_to_null (vr, TREE_TYPE (expr));\n+\t  else\n+\t    set_value_range_to_varying (vr);\n+\t  return;\n+\t}\n     }\n   else if (code == ABS_EXPR\n            && !TYPE_UNSIGNED (TREE_TYPE (expr)))"}]}