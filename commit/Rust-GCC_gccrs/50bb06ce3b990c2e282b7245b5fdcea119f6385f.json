{"sha": "50bb06ce3b990c2e282b7245b5fdcea119f6385f", "node_id": "C_kwDOANBUbNoAKDUwYmIwNmNlM2I5OTBjMmUyODJiNzI0NWI1ZmRjZWExMTlmNjM4NWY", "commit": {"author": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-08-10T09:48:15Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-08-10T09:51:26Z"}, "message": "Seperate 64 and 32 bit testing combos into seperate jobs\n\nChange the CI requirements to have seperate jobs for 64 and 32 bit testing.\nIt also runs both combinations on the gcc4.8 build job. Bors only requires\nthe normal build check 64bit job to pass to minimize impact.", "tree": {"sha": "328046e104f3a59e011845eac11969c8d3999205", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/328046e104f3a59e011845eac11969c8d3999205"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50bb06ce3b990c2e282b7245b5fdcea119f6385f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50bb06ce3b990c2e282b7245b5fdcea119f6385f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50bb06ce3b990c2e282b7245b5fdcea119f6385f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50bb06ce3b990c2e282b7245b5fdcea119f6385f/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6496291f34b929764d90ce5a6d0b05ca4753d53f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6496291f34b929764d90ce5a6d0b05ca4753d53f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6496291f34b929764d90ce5a6d0b05ca4753d53f"}], "stats": {"total": 87, "additions": 82, "deletions": 5}, "files": [{"sha": "36914c2cc650968d2fb4b1e9a4b567105ea20b6f", "filename": ".github/bors.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50bb06ce3b990c2e282b7245b5fdcea119f6385f/.github%2Fbors.toml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50bb06ce3b990c2e282b7245b5fdcea119f6385f/.github%2Fbors.toml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/.github%2Fbors.toml?ref=50bb06ce3b990c2e282b7245b5fdcea119f6385f", "patch": "@@ -1,5 +1,5 @@\n status = [\n-  \"build-and-check\"\n+  \"build-and-check-ubuntu-64bit\"\n ]\n # Uncomment this to use a two hour timeout.\n # The default is one hour."}, {"sha": "c88674033e7684715137b45301812107dad2bc3f", "filename": ".github/workflows/ccpp.yml", "status": "modified", "additions": 81, "deletions": 4, "changes": 85, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50bb06ce3b990c2e282b7245b5fdcea119f6385f/.github%2Fworkflows%2Fccpp.yml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50bb06ce3b990c2e282b7245b5fdcea119f6385f/.github%2Fworkflows%2Fccpp.yml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/.github%2Fworkflows%2Fccpp.yml?ref=50bb06ce3b990c2e282b7245b5fdcea119f6385f", "patch": "@@ -1,4 +1,4 @@\n-name: C/C++ CI\n+name: GCC Rust build and test\n \n on:\n   push:\n@@ -9,7 +9,7 @@ on:\n     branches: [ master ]\n \n jobs:\n-  build-and-check:\n+  build-and-check-ubuntu-64bit:\n \n     env:\n       # Force locale, in particular for reproducible results re '.github/bors_log_expected_warnings' (see below).\n@@ -67,7 +67,84 @@ jobs:\n     - name: Run Tests\n       run: |\n            cd gccrs-build; \\\n-           make check-rust RUNTESTFLAGS=\"--target_board=unix\\{-m32,-m64}\"\n+           make check-rust RUNTESTFLAGS=\"--target_board=unix\\{-m64}\"\n+    - name: Archive check-rust results\n+      uses: actions/upload-artifact@v2\n+      with:\n+        name: check-rust-logs\n+        path: |\n+          gccrs-build/gcc/testsuite/rust/\n+    - name: Check regressions\n+      run: |\n+           cd gccrs-build; \\\n+           if grep -e \"unexpected\" -e \"unresolved\" -e \"ERROR:\" gcc/testsuite/rust/rust.sum;\\\n+           then \\\n+              echo \"::error title=Regression test failed::some tests are not correct\"; \\\n+              perl -n ../.github/emit_test_errors.pl < gcc/testsuite/rust/rust.sum; \\\n+              exit 1; \\\n+            else \\\n+              exit 0; \\\n+            fi\n+\n+  build-and-check-ubuntu-32bit:\n+\n+    env:\n+      # Force locale, in particular for reproducible results re '.github/bors_log_expected_warnings' (see below).\n+      LC_ALL: C.UTF-8\n+\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+    - uses: actions/checkout@v2\n+\n+    - name: Install Deps\n+      run: |\n+          sudo apt-get update;\n+          sudo apt-get install -y \\\n+                  automake \\\n+                  autoconf \\\n+                  libtool \\\n+                  autogen \\\n+                  bison \\\n+                  flex \\\n+                  libgmp3-dev \\\n+                  libmpfr-dev \\\n+                  libmpc-dev \\\n+                  build-essential \\\n+                  gcc-multilib \\\n+                  g++-multilib \\\n+                  dejagnu\n+\n+    - name: Configure\n+      run: |\n+           mkdir -p gccrs-build;\n+           cd gccrs-build;\n+           ../configure \\\n+               --enable-languages=rust \\\n+               --disable-bootstrap \\\n+               --enable-multilib\n+\n+    - name: Build\n+      shell: bash\n+      run: |\n+           cd gccrs-build; \\\n+           make -Otarget -j $(nproc) 2>&1 | tee log\n+\n+    - name: Check for new warnings\n+      run: |\n+           cd gccrs-build\n+           < log grep 'warning: ' | sort > log_warnings\n+           if diff -U0 ../.github/bors_log_expected_warnings log_warnings; then\n+               :\n+           else\n+               echo 'See <https://github.com/Rust-GCC/gccrs/pull/1026>.'\n+               exit 1\n+           fi >&2\n+\n+    - name: Run Tests\n+      run: |\n+           cd gccrs-build; \\\n+           make check-rust RUNTESTFLAGS=\"--target_board=unix\\{-m32}\"\n     - name: Archive check-rust results\n       uses: actions/upload-artifact@v2\n       with:\n@@ -131,7 +208,7 @@ jobs:\n     - name: Run Tests\n       run: |\n            cd gccrs-build; \\\n-           make check-rust\n+           make check-rust RUNTESTFLAGS=\"--target_board=unix\\{-m32,-m64}\"\n \n     - name: Archive check-rust results\n       uses: actions/upload-artifact@v2"}]}