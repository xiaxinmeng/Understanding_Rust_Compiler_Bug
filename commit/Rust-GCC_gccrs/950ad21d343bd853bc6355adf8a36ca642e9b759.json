{"sha": "950ad21d343bd853bc6355adf8a36ca642e9b759", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUwYWQyMWQzNDNiZDg1M2JjNjM1NWFkZjhhMzZjYTY0MmU5Yjc1OQ==", "commit": {"author": {"name": "Thomas Koenig", "email": "Thomas.Koenig@online.de", "date": "2005-08-16T20:26:04Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2005-08-16T20:26:04Z"}, "message": "re PR libfortran/23428 (inquire(iolength= ) for complex give incorrect value)\n\n2005-08-16  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR libfortran/23428\n\t* io/transfer.c (iolength_transfer):  Remove __attribute__ ((unused))\n\tfrom type.  Return correct length for inquire(iolength=)\n\tfor complex variables.\n\n2005-08-16  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR libfortran/23428\n\t* gfortran.dg/inquire-complex.f90:  New test case.\n\nFrom-SVN: r103168", "tree": {"sha": "b1ba39a7209647152c1aabb867d0cd7ffde560ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b1ba39a7209647152c1aabb867d0cd7ffde560ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/950ad21d343bd853bc6355adf8a36ca642e9b759", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/950ad21d343bd853bc6355adf8a36ca642e9b759", "html_url": "https://github.com/Rust-GCC/gccrs/commit/950ad21d343bd853bc6355adf8a36ca642e9b759", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/950ad21d343bd853bc6355adf8a36ca642e9b759/comments", "author": null, "committer": null, "parents": [{"sha": "17b456229ec66d747ffb569508fa168f5d92cfc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17b456229ec66d747ffb569508fa168f5d92cfc8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17b456229ec66d747ffb569508fa168f5d92cfc8"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "179e2dc99b53f8697156dc8a22fb8c46dcb21407", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950ad21d343bd853bc6355adf8a36ca642e9b759/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950ad21d343bd853bc6355adf8a36ca642e9b759/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=950ad21d343bd853bc6355adf8a36ca642e9b759", "patch": "@@ -1,3 +1,8 @@\n+2005-08-16  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR libfortran/23428\n+\t* gfortran.dg/inquire-complex.f90:  New test case.\n+\n 2005-08-16  James E Wilson  <wilson@specifix.com>\n \n \tPR tree-optimization/21105"}, {"sha": "188c932084c951655f8825e0848c67920ec056ff", "filename": "gcc/testsuite/gfortran.dg/inquire-complex.f90", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950ad21d343bd853bc6355adf8a36ca642e9b759/gcc%2Ftestsuite%2Fgfortran.dg%2Finquire-complex.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950ad21d343bd853bc6355adf8a36ca642e9b759/gcc%2Ftestsuite%2Fgfortran.dg%2Finquire-complex.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finquire-complex.f90?ref=950ad21d343bd853bc6355adf8a36ca642e9b759", "patch": "@@ -0,0 +1,13 @@\n+! { dg-do run }\n+! PR 23428:  Inquire(iolength) used to give the wrong result.\n+program main\n+  implicit none\n+  integer s4, s8\n+  \n+  complex(kind=8) c8\n+  complex(kind=4) c4\n+  \n+  inquire (iolength=s) c8\n+  if (s4 /= 8 .or. s8 /= 16) call abort\n+\n+end program main"}, {"sha": "7ed94299cdc45a18723fa1eefc228a1ad17cd4b5", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950ad21d343bd853bc6355adf8a36ca642e9b759/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950ad21d343bd853bc6355adf8a36ca642e9b759/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=950ad21d343bd853bc6355adf8a36ca642e9b759", "patch": "@@ -1,3 +1,10 @@\n+2005-08-16  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR libfortran/23428\n+\t* io/transfer.c (iolength_transfer):  Remove __attribute__ ((unused))\n+\tfrom type.  Return correct length for inquire(iolength=)\n+\tfor complex variables.\n+\n 2005-08-11  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \t    Steven Bosscher  <stevenb@suse.de>\n "}, {"sha": "03708f84da184d7280c79be4037d08a598e1eb66", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/950ad21d343bd853bc6355adf8a36ca642e9b759/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/950ad21d343bd853bc6355adf8a36ca642e9b759/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=950ad21d343bd853bc6355adf8a36ca642e9b759", "patch": "@@ -1536,12 +1536,16 @@ finalize_transfer (void)\n    data transfer, it just updates the length counter.  */\n \n static void\n-iolength_transfer (bt type   __attribute__ ((unused)),\n-\t\t   void *dest __attribute__ ((unused)),\n+iolength_transfer (bt type , void *dest __attribute__ ((unused)),\n \t\t   int len)\n {\n   if (ioparm.iolength != NULL)\n-    *ioparm.iolength += len;\n+    {\n+      if (type == BT_COMPLEX)\n+\t*ioparm.iolength += 2*len;\n+      else\n+\t*ioparm.iolength += len;\n+    }\n }\n \n "}]}