{"sha": "ad9df12ff5182840605b6252b882d36c0f68895c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWQ5ZGYxMmZmNTE4Mjg0MDYwNWI2MjUyYjg4MmQzNmMwZjY4ODk1Yw==", "commit": {"author": {"name": "Igor Shevlyakov", "email": "igor@microunity.com", "date": "2002-09-08T03:34:16Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-09-08T03:34:16Z"}, "message": "combine.c (simplify_shift_const): Calculate rotate count correctly for vector operands.\n\n        * combine.c (simplify_shift_const): Calculate rotate count\n        correctly for vector operands.\n\nFrom-SVN: r56928", "tree": {"sha": "ba56fa80b290eaa79079e57b916245ec0a74cf53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba56fa80b290eaa79079e57b916245ec0a74cf53"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ad9df12ff5182840605b6252b882d36c0f68895c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad9df12ff5182840605b6252b882d36c0f68895c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad9df12ff5182840605b6252b882d36c0f68895c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad9df12ff5182840605b6252b882d36c0f68895c/comments", "author": null, "committer": null, "parents": [{"sha": "54c93c301960dfbc469ee3501ba4872adbfdaf1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54c93c301960dfbc469ee3501ba4872adbfdaf1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54c93c301960dfbc469ee3501ba4872adbfdaf1f"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "9ca0341e3601b4a52711219f457b8c879b040b5c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad9df12ff5182840605b6252b882d36c0f68895c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad9df12ff5182840605b6252b882d36c0f68895c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ad9df12ff5182840605b6252b882d36c0f68895c", "patch": "@@ -1,3 +1,8 @@\n+2002-09-07  Igor Shevlyakov <igor@microunity.com>\n+  \n+\t* combine.c (simplify_shift_const): Calculate rotate count\n+\tcorrectly for vector operands.\n+\n 2002-09-07  Ansgar Esztermann  <ansgar@thphy.uni-duesseldorf.de>\n \n \t* c-typeck.c (c_tree_expr_nonnegative_p): New function."}, {"sha": "606b200a9579a0c73fb931683ff804aa6183722b", "filename": "gcc/combine.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad9df12ff5182840605b6252b882d36c0f68895c/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad9df12ff5182840605b6252b882d36c0f68895c/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=ad9df12ff5182840605b6252b882d36c0f68895c", "patch": "@@ -9046,7 +9046,14 @@ simplify_shift_const (x, code, result_mode, varop, orig_count)\n \n       /* Convert ROTATERT to ROTATE.  */\n       if (code == ROTATERT)\n-\tcode = ROTATE, count = GET_MODE_BITSIZE (result_mode) - count;\n+\t{\n+\t  unsigned int bitsize = GET_MODE_BITSIZE (result_mode);;\n+\t  code = ROTATE;\n+\t  if (VECTOR_MODE_P (result_mode))\n+\t    count = bitsize / GET_MODE_NUNITS (result_mode) - count;\n+\t  else\n+\t    count = bitsize - count;\n+\t}\n \n       /* We need to determine what mode we will do the shift in.  If the\n \t shift is a right shift or a ROTATE, we must always do it in the mode"}]}