{"sha": "c1cadde1cbd95e051885c3c9c5794a8d8c64e27a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzFjYWRkZTFjYmQ5NWUwNTE4ODVjM2M5YzU3OTRhOGQ4YzY0ZTI3YQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-01-26T19:37:08Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-01-26T19:37:08Z"}, "message": "* testsuite/lib/libgomp.exp\n\t(check_effective_target_hsa_offloading_selected_nocache): Fix up\n\tcheck_compile invocation.  Fix up removal of executable.  Drop\n\tbogus \"2>&1\" argument.\n\nFrom-SVN: r244948", "tree": {"sha": "08def07d5bd42c39b0d73df5b2a6fab48ab957f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08def07d5bd42c39b0d73df5b2a6fab48ab957f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "41d3d0ac409a6e85a39e453be6ecb99c622284a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41d3d0ac409a6e85a39e453be6ecb99c622284a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41d3d0ac409a6e85a39e453be6ecb99c622284a8"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "b4e7d6ef6d1273a01b76fcb1855e5939fc3faeeb", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=c1cadde1cbd95e051885c3c9c5794a8d8c64e27a", "patch": "@@ -1,5 +1,10 @@\n 2017-01-26  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* testsuite/lib/libgomp.exp\n+\t(check_effective_target_hsa_offloading_selected_nocache): Fix up\n+\tcheck_compile invocation.  Fix up removal of executable.  Drop\n+\tbogus \"2>&1\" argument.\n+\n \t* testsuite/libgomp.fortran/declare-simd-4.f90: Add cleanup-modules\n \tdirective.\n "}, {"sha": "5e47872c5c487ebf79fc544fb5131a5bda96d4c0", "filename": "libgomp/testsuite/lib/libgomp.exp", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a/libgomp%2Ftestsuite%2Flib%2Flibgomp.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1cadde1cbd95e051885c3c9c5794a8d8c64e27a/libgomp%2Ftestsuite%2Flib%2Flibgomp.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flib%2Flibgomp.exp?ref=c1cadde1cbd95e051885c3c9c5794a8d8c64e27a", "patch": "@@ -408,23 +408,24 @@ proc check_effective_target_hsa_offloading_selected_nocache {} {\n \t}\n     }\n     \n-    set result [eval [list check_compile hsa_offloading_src executable $src] \"\"]\n+    set result [check_compile hsa_offloading_src executable $src]\n     set lines [lindex $result 0]\n-    set output [lindex $result 1]\n+    set exe [lindex $result 1]\n \n     set ok 0\n     if { [string match \"\" $lines] } {\n \t# No error messages, let us switch on HSA debugging output and run it\n \tset prev_HSA_DEBUG [getenv HSA_DEBUG]\n \tsetenv HSA_DEBUG \"1\"\n-\tset result [remote_load target \"./$output\" \"2>&1\" \"\"]\n+\tset result [remote_load target \"./$exe\"]\n \tif { [string match \"\" $prev_HSA_DEBUG] } {\n \t    unsetenv HSA_DEBUG\n \t} else {\n \t    setenv HSA_DEBUG $prev_HSA_DEBUG\n \t}\n \tset status [lindex $result 0]\n \tif { $status != \"pass\" } {\n+\t    remote_file build delete $exe\n \t    verbose \"HSA availability test failed\"\n \t    return 0\n \t}\n@@ -434,7 +435,7 @@ proc check_effective_target_hsa_offloading_selected_nocache {} {\n \t    set ok 1\n \t}\n     }\n-    remote_file build delete $output\n+    remote_file build delete $exe\n     return $ok\n }\n "}]}