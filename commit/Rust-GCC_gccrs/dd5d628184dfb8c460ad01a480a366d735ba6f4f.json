{"sha": "dd5d628184dfb8c460ad01a480a366d735ba6f4f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ1ZDYyODE4NGRmYjhjNDYwYWQwMWE0ODBhMzY2ZDczNWJhNmY0Zg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-05-03T18:09:27Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-05-03T18:09:27Z"}, "message": "expr.c (build_java_jsr): Use emit_jump, not expand_goto.\n\n\t* expr.c (build_java_jsr): Use emit_jump, not expand_goto.\n\n\t* javaop.h (WORD_TO_INT): New function.\n\t(IMMEDIATE_s4): Use WORD_TO_INT.\n\t* jcf.h (JPOOL_INT): Ditto.\n\n\t* gjavah.c (decode_signature_piece): Don't treat `$' as namespace\n\tseparator.\n\nFrom-SVN: r33636", "tree": {"sha": "3e04a4bb49ef6a42d094bc95768fa8e79e19dadf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e04a4bb49ef6a42d094bc95768fa8e79e19dadf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd5d628184dfb8c460ad01a480a366d735ba6f4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd5d628184dfb8c460ad01a480a366d735ba6f4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd5d628184dfb8c460ad01a480a366d735ba6f4f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd5d628184dfb8c460ad01a480a366d735ba6f4f/comments", "author": null, "committer": null, "parents": [{"sha": "8c8de5fc10d0c5bc658de7f2dfc75c33b1fb541d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c8de5fc10d0c5bc658de7f2dfc75c33b1fb541d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c8de5fc10d0c5bc658de7f2dfc75c33b1fb541d"}], "stats": {"total": 37, "additions": 31, "deletions": 6}, "files": [{"sha": "df283c6693accfd55ba22a66a72f985575acff76", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=dd5d628184dfb8c460ad01a480a366d735ba6f4f", "patch": "@@ -1,4 +1,20 @@\n-2000-04-19  Tom Tromey  &lt;tromey@cygnus.com&gt;\n+2000-05-03  Andrew Haley  <aph@cygnus.com>\n+\n+\t* expr.c (build_java_jsr): Use emit_jump, not expand_goto.\n+\n+\t* javaop.h (WORD_TO_INT): New function.\n+\t(IMMEDIATE_s4): Use WORD_TO_INT.\n+\t* jcf.h (JPOOL_INT): Ditto.\n+\n+\t* gjavah.c (decode_signature_piece): Don't treat `$' as namespace\n+\tseparator.\n+\n+2000-05-02  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* expr.c (build_jni_stub): Cache the result of\n+\t_Jv_LookupJNIMethod.\n+\n+2000-04-19  Tom Tromey  <tromey@cygnus.com>\n \n \t* class.c (add_method_1): Set both DECL_EXTERNAL and METHOD_NATIVE\n \ton native function."}, {"sha": "7a92a8c66c66096d398ac4566eb66168879b1810", "filename": "gcc/java/expr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=dd5d628184dfb8c460ad01a480a366d735ba6f4f", "patch": "@@ -560,7 +560,7 @@ build_java_jsr (where, ret)\n   tree ret_label = fold (build1 (ADDR_EXPR, return_address_type_node, ret));\n   push_value (ret_label);\n   flush_quick_stack ();\n-  expand_goto (where);\n+  emit_jump (label_rtx (where));\n   expand_label (ret);\n }\n "}, {"sha": "3c04ebf4492ab5e94648688c88b36eb45deab49b", "filename": "gcc/java/gjavah.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fgjavah.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fgjavah.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fgjavah.c?ref=dd5d628184dfb8c460ad01a480a366d735ba6f4f", "patch": "@@ -990,8 +990,7 @@ decode_signature_piece (stream, signature, limit, need_space)\n       while (*signature && *signature != ';')\n \t{\n \t  int ch = UTF8_GET (signature, limit);\n-\t  /* `$' is the separator for an inner class.  */\n-\t  if (ch == '/' || ch == '$')\n+\t  if (ch == '/')\n \t    fputs (\"::\", stream);\n \t  else\n \t    jcf_print_char (stream, ch);"}, {"sha": "d8418f71a2af67a6ed2e939ecf97935c056ba074", "filename": "gcc/java/javaop.h", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fjavaop.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fjavaop.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjavaop.h?ref=dd5d628184dfb8c460ad01a480a366d735ba6f4f", "patch": "@@ -98,7 +98,7 @@ union Word {\n #endif\n #ifndef IMMEDIATE_s4\n #define IMMEDIATE_s4 (PC+=4, CHECK_PC_IN_RANGE(PC), \\\n-  ((jint)((BCODE[PC-4] << 24) | (BCODE[PC-3] << 16) \\\n+  (WORD_TO_INT((BCODE[PC-4] << 24) | (BCODE[PC-3] << 16) \\\n          | (BCODE[PC-2] << 8) | (BCODE[PC-1]))))\n #endif\n \n@@ -109,6 +109,16 @@ WORD_TO_FLOAT(jword w)\n   return wu.f;\n } \n \n+/* Sign extend w. */\n+static inline jint\n+WORD_TO_INT(jword w)\n+{\n+  jint n = w;\n+  n ^= (jint)1 << 31;\n+  n -= (jint)1 << 31;\n+  return n;\n+} \n+\n static inline jlong\n WORDS_TO_LONG(jword hi, jword lo)\n {"}, {"sha": "9bd8a7cd0c02e6dc455cbf79784b98e1f3a070ac", "filename": "gcc/java/jcf.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fjcf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd5d628184dfb8c460ad01a480a366d735ba6f4f/gcc%2Fjava%2Fjcf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf.h?ref=dd5d628184dfb8c460ad01a480a366d735ba6f4f", "patch": "@@ -131,7 +131,7 @@ typedef struct JCF {\n #define JPOOL_UTF_DATA(JCF, INDEX) \\\n   ((JCF)->buffer+JPOOL_UINT(JCF, INDEX)+2)\n #endif\n-#define JPOOL_INT(JCF, INDEX) ((jint) JPOOL_UINT (JCF, INDEX))\n+#define JPOOL_INT(JCF, INDEX) (WORD_TO_INT(JPOOL_UINT (JCF, INDEX)))\n #define JPOOL_FLOAT(JCF, INDEX) WORD_TO_FLOAT (JPOOL_UINT (JCF, INDEX))\n \n #define CPOOL_INDEX_IN_RANGE(CPOOL, INDEX) \\"}]}