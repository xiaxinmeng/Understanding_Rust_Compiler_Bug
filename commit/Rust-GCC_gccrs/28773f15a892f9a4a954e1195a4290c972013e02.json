{"sha": "28773f15a892f9a4a954e1195a4290c972013e02", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg3NzNmMTVhODkyZjlhNGE5NTRlMTE5NWE0MjkwYzk3MjAxM2UwMg==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-01-22T16:13:40Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-01-22T16:13:40Z"}, "message": "tree-cfg.c (remove_forwarder_block_with_phi): Look at the first label to see if it is a nonlocal label.\n\n\t* tree-cfg.c (remove_forwarder_block_with_phi): Look at the\n\tfirst label to see if it is a nonlocal label.\n\nFrom-SVN: r94067", "tree": {"sha": "8e31c857e90331506fa48127c03f8acc8615ee57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e31c857e90331506fa48127c03f8acc8615ee57"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28773f15a892f9a4a954e1195a4290c972013e02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28773f15a892f9a4a954e1195a4290c972013e02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28773f15a892f9a4a954e1195a4290c972013e02", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28773f15a892f9a4a954e1195a4290c972013e02/comments", "author": null, "committer": null, "parents": [{"sha": "0dd973dd9710115f96420505591f65c5ab2445b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0dd973dd9710115f96420505591f65c5ab2445b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0dd973dd9710115f96420505591f65c5ab2445b4"}], "stats": {"total": 20, "additions": 9, "deletions": 11}, "files": [{"sha": "73db887aff196fdc647d3be635274c89ee69068a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28773f15a892f9a4a954e1195a4290c972013e02/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28773f15a892f9a4a954e1195a4290c972013e02/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=28773f15a892f9a4a954e1195a4290c972013e02", "patch": "@@ -6,6 +6,9 @@\n \tconfig/sparc/freebsd.h, config/sparc/netbsd-elf.h,\n \tconfig/sparc/sol2.h: Update copyright.\n \n+\t* tree-cfg.c (remove_forwarder_block_with_phi): Look at the\n+\tfirst label to see if it is a nonlocal label.\n+\n 2005-01-22  David Edelsohn  <edelsohn@gnu.org>\n             Andrew Pinski  <pinskia@physics.uc.edu>\n "}, {"sha": "b69ec0cd2112f29cc3fa8855917cfb5e39ee09b9", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28773f15a892f9a4a954e1195a4290c972013e02/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28773f15a892f9a4a954e1195a4290c972013e02/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=28773f15a892f9a4a954e1195a4290c972013e02", "patch": "@@ -4130,8 +4130,8 @@ remove_forwarder_block_with_phi (basic_block bb)\n {\n   edge succ = EDGE_SUCC (bb, 0);\n   basic_block dest = succ->dest;\n+  tree label;\n   basic_block dombb, domdest, dom;\n-  block_stmt_iterator bsi;\n \n   /* We check for infinite loops already in tree_forwarder_block_p.\n      However it may happen that the infinite loop is created\n@@ -4141,16 +4141,11 @@ remove_forwarder_block_with_phi (basic_block bb)\n \n   /* If the destination block consists of a nonlocal label, do not\n      merge it.  */\n-  for (bsi = bsi_start (dest); !bsi_end_p (bsi); bsi_next (&bsi))\n-    {\n-      tree stmt = bsi_stmt (bsi);\n-\n-      if (TREE_CODE (stmt) != LABEL_EXPR)\n-\tbreak;\n-\n-      if (DECL_NONLOCAL (LABEL_EXPR_LABEL (stmt)))\n-\treturn;\n-    }\n+  label = first_stmt (dest);\n+  if (label\n+      && TREE_CODE (label) == LABEL_EXPR\n+      && DECL_NONLOCAL (LABEL_EXPR_LABEL (label)))\n+    return;\n \n   /* Redirect each incoming edge to BB to DEST.  */\n   while (EDGE_COUNT (bb->preds) > 0)"}]}