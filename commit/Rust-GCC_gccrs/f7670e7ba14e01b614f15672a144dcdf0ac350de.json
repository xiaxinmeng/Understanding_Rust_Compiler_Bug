{"sha": "f7670e7ba14e01b614f15672a144dcdf0ac350de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjc2NzBlN2JhMTRlMDFiNjE0ZjE1NjcyYTE0NGRjZGYwYWMzNTBkZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2003-03-28T08:25:57Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2003-03-28T08:25:57Z"}, "message": "re PR c/8281 ([Sparc] ICE when compiling with -O2 -fPIC for Ultrasparc)\n\n\tPR c/8281\n\t* config/sparc/sparc.md (movdi_insn_sp32_v9): Remove 'f-f' alternative.\n\t(movdi reg/reg split): Match only on sparc32, and v9 when int regs.\n\nFrom-SVN: r64957", "tree": {"sha": "a8677a79009e4c1fad4b1f198014bcdb5d51195a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a8677a79009e4c1fad4b1f198014bcdb5d51195a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f7670e7ba14e01b614f15672a144dcdf0ac350de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7670e7ba14e01b614f15672a144dcdf0ac350de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7670e7ba14e01b614f15672a144dcdf0ac350de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7670e7ba14e01b614f15672a144dcdf0ac350de/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c9280dfe849bffd09f1cb74741eb55b4f5a52686", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9280dfe849bffd09f1cb74741eb55b4f5a52686", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9280dfe849bffd09f1cb74741eb55b4f5a52686"}], "stats": {"total": 79, "additions": 72, "deletions": 7}, "files": [{"sha": "8ebdc40140efc1ba19cf851975afe5dea51e2050", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f7670e7ba14e01b614f15672a144dcdf0ac350de", "patch": "@@ -1,3 +1,9 @@\n+2003-03-28  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\tPR c/8281\n+\t* config/sparc/sparc.md (movdi_insn_sp32_v9): Remove 'f-f' alternative.\n+\t(movdi reg/reg split): Match only on sparc32, and v9 when int regs.\n+\n 2003-03-28  Alan Modra  <amodra@bigpond.net.au>\n \n \t* config/alpha/elf.h (ASM_OUTPUT_ALIGNED_BSS): Remove unnecessary"}, {"sha": "aa3ebdb2c9a09bdf56548c307228c1bb9008d846", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=f7670e7ba14e01b614f15672a144dcdf0ac350de", "patch": "@@ -2062,9 +2062,9 @@\n \n (define_insn \"*movdi_insn_sp32_v9\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\"\n-\t\t\t\t\t\"=T,o,T,U,o,r,r,r,?T,?f,?f,?o,?f,?e,?e,?W\")\n+\t\t\t\t\t\"=T,o,T,U,o,r,r,r,?T,?f,?f,?o,?e,?e,?W\")\n         (match_operand:DI 1 \"input_operand\"\n-\t\t\t\t\t\" J,J,U,T,r,o,i,r, f, T, o, f, f, e, W, e\"))]\n+\t\t\t\t\t\" J,J,U,T,r,o,i,r, f, T, o, f, e, W, e\"))]\n   \"! TARGET_ARCH64 && TARGET_V9\n    && (GET_CODE (operands[0]) != MEM || GET_CODE (operands[1]) != MEM)\"\n   \"@\n@@ -2080,13 +2080,12 @@\n    ldd\\t%1, %0\n    #\n    #\n-   #\n    fmovd\\\\t%1, %0\n    ldd\\\\t%1, %0\n    std\\\\t%1, %0\"\n-  [(set_attr \"type\" \"store,store,store,load,*,*,*,*,fpstore,fpload,*,*,*,fpmove,fpload,fpstore\")\n-   (set_attr \"length\" \"*,2,*,*,2,2,2,2,*,*,2,2,2,*,*,*\")\n-   (set_attr \"fptype\" \"*,*,*,*,*,*,*,*,*,*,*,*,*,double,*,*\")])\n+  [(set_attr \"type\" \"store,store,store,load,*,*,*,*,fpstore,fpload,*,*,fpmove,fpload,fpstore\")\n+   (set_attr \"length\" \"*,2,*,*,2,2,2,2,*,*,2,2,*,*,*\")\n+   (set_attr \"fptype\" \"*,*,*,*,*,*,*,*,*,*,*,*,double,*,*\")])\n \n (define_insn \"*movdi_insn_sp32\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\"\n@@ -2425,7 +2424,14 @@\n (define_split\n   [(set (match_operand:DI 0 \"register_operand\" \"\")\n         (match_operand:DI 1 \"register_operand\" \"\"))]\n-  \"! TARGET_ARCH64 && reload_completed\"\n+  \"reload_completed\n+   && (! TARGET_V9\n+       || (! TARGET_ARCH64\n+           && ((GET_CODE (operands[0]) == REG\n+                && REGNO (operands[0]) < 32)\n+               || (GET_CODE (operands[0]) == SUBREG\n+                   && GET_CODE (SUBREG_REG (operands[0])) == REG\n+                   && REGNO (SUBREG_REG (operands[0])) < 32))))\"\n   [(clobber (const_int 0))]\n {\n   rtx set_dest = operands[0];"}, {"sha": "e34b6e11ea441351207baa5ea4f8dc9b927ab15a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f7670e7ba14e01b614f15672a144dcdf0ac350de", "patch": "@@ -1,3 +1,7 @@\n+2003-03-28  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\t* gcc.dg/ultrasp7.c: New test.\n+\n 2003-03-28  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/10047"}, {"sha": "defe5f3c7ad61b0ee0e88f950a4251bd33184311", "filename": "gcc/testsuite/gcc.dg/ultrasp7.c", "status": "added", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2Ftestsuite%2Fgcc.dg%2Fultrasp7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f7670e7ba14e01b614f15672a144dcdf0ac350de/gcc%2Ftestsuite%2Fgcc.dg%2Fultrasp7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fultrasp7.c?ref=f7670e7ba14e01b614f15672a144dcdf0ac350de", "patch": "@@ -0,0 +1,49 @@\n+/* PR c/8281 */\n+/* Originator: TANIGUCHI Yasuaki <yasuaki@k8.dion.ne.jp> */\n+/* { dg-do compile { target sparc-*-* } } */\n+/* { dg-options \"-O2 -mcpu=ultrasparc -fPIC\" } */\n+\n+static const double bp = 1.0, dp_l[] = { 0.0 };\n+\n+double __ieee754_pow(double x, double y)\n+{\n+  union {\n+    int lo;\n+    double d;\n+  }uz;\n+\n+  double y1,t1,p_h,t,z;\n+  double z_h,z_l,p_l;\n+  double t2,r,s,u,v,w;\n+  int i = 0;\n+ \n+  double s_h,t_h;\n+  double s2,s_l,t_l;\n+ \n+ \n+  v = 1.0/(v+bp);\n+  uz.d = s_h = s = u*v;\n+  uz.lo = 0;\n+  s_h = uz.d;\n+  uz.d = t_h;\n+  uz.lo = 3;\n+  t_h = uz.d;\n+  s_l = v*((u-s_h*t_h)-s_h*t_l);\n+  s2 = s*s;\n+  r = s2* s2* (1.1+s2*(1.2+s2*(1.3+s2*(1.4+s2*(1.5+s2*1.6)))));\n+  s2 = s_h*s_h;\n+  uz.lo = 0;\n+  t_h = uz.d;\n+  t_l = r-((t_h-3.0)-s2);\n+  v = s_l*t_h+t_l*s;\n+  p_l = v-(p_h-u);\n+  z_h = bp *p_h;\n+  z_l = bp*p_h+p_l*1.0+dp_l[i];\n+  t = (double)i;\n+  t1 = (((bp+z_l)+bp)+t);\n+  t2 = z_l-(((t1-t)-bp)-z_h);\n+  p_l = (y-y1)*t1+y*t2;\n+  z = p_l+p_h;\n+\n+  return s*z;\n+}"}]}