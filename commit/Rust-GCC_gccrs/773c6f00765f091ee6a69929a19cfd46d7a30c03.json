{"sha": "773c6f00765f091ee6a69929a19cfd46d7a30c03", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzczYzZmMDA3NjVmMDkxZWU2YTY5OTI5YTE5Y2ZkNDZkN2EzMGMwMw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-09-02T19:33:50Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1999-09-02T19:33:50Z"}, "message": "natClassLoader.cc (_Jv_WaitForState): Call _Jv_PrepareCompiledClass while holding class mutex.\n\n\t* java/lang/natClassLoader.cc (_Jv_WaitForState): Call\n\t_Jv_PrepareCompiledClass while holding class mutex.\n\nFrom-SVN: r29063", "tree": {"sha": "8a6d915f784bf832c22dd4ff3f4c956f987d9be5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a6d915f784bf832c22dd4ff3f4c956f987d9be5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/773c6f00765f091ee6a69929a19cfd46d7a30c03", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773c6f00765f091ee6a69929a19cfd46d7a30c03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/773c6f00765f091ee6a69929a19cfd46d7a30c03", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773c6f00765f091ee6a69929a19cfd46d7a30c03/comments", "author": null, "committer": null, "parents": [{"sha": "8012c98334adc980f8e7ad5ceac47fa19b664662", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8012c98334adc980f8e7ad5ceac47fa19b664662", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8012c98334adc980f8e7ad5ceac47fa19b664662"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "65ec9adafeccc2ad18a4b1035dbd343f2dc6f696", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/773c6f00765f091ee6a69929a19cfd46d7a30c03/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/773c6f00765f091ee6a69929a19cfd46d7a30c03/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=773c6f00765f091ee6a69929a19cfd46d7a30c03", "patch": "@@ -1,3 +1,8 @@\n+1999-09-02  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* java/lang/natClassLoader.cc (_Jv_WaitForState): Call\n+\t_Jv_PrepareCompiledClass while holding class mutex.\n+\n 1999-09-01  Tom Tromey  <tromey@cygnus.com>\n \n \t* include/posix-threads.h (PTHREAD_MUTEX_IS_STRUCT): New define."}, {"sha": "c0d06d47caf3ddfa03b0d7ea7d88b8efe4d43526", "filename": "libjava/java/lang/natClassLoader.cc", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/773c6f00765f091ee6a69929a19cfd46d7a30c03/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/773c6f00765f091ee6a69929a19cfd46d7a30c03/libjava%2Fjava%2Flang%2FnatClassLoader.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClassLoader.cc?ref=773c6f00765f091ee6a69929a19cfd46d7a30c03", "patch": "@@ -144,8 +144,10 @@ _Jv_WaitForState (jclass klass, int state)\n \n   if (state == JV_STATE_LINKED)\n     {\n-      _Jv_MonitorExit (klass);\n+      // Must call _Jv_PrepareCompiledClass while holding the class\n+      // mutex.\n       _Jv_PrepareCompiledClass (klass);\n+      _Jv_MonitorExit (klass);\n       return;\n     }\n \t\n@@ -217,7 +219,7 @@ _Jv_PrepareCompiledClass(jclass klass)\n   if (klass->state >= JV_STATE_LINKED)\n     return;\n \n-  // short-circuit, so that mutually dependent classes are ok\n+  // Short-circuit, so that mutually dependent classes are ok.\n   klass->state = JV_STATE_LINKED;\n \n   _Jv_Constants *pool = &klass->constants;"}]}