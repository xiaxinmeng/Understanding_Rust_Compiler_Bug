{"sha": "9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWY0MWRlNDFlYWY2ZDMwZDJiNDkyYzFmMTNkMDFkZDhlOTBiYmE4MQ==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2019-07-25T18:36:52Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2019-07-25T18:36:52Z"}, "message": "re PR rtl-optimization/91223 (ICE: in curr_insn_transform, at lra-constraints.c:4459)\n\n2019-07-25  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/91223\n\t* lra-constraints.c (process_alt_operands): Fail for unsuccessful\n\tmatching with INOUT operand.\n\n2019-07-25  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/91223\n\t* gcc.target/i386/pr91223.c: New test.\n\nFrom-SVN: r273810", "tree": {"sha": "010f97ca78980d7d9e3ff1db23236534eec25922", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/010f97ca78980d7d9e3ff1db23236534eec25922"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7649f2e444bae95d2b093354ace296386691b603", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7649f2e444bae95d2b093354ace296386691b603", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7649f2e444bae95d2b093354ace296386691b603"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "42beda4e64392c7c68717251028053d9ae6d9b84", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "patch": "@@ -1,3 +1,9 @@\n+2019-07-25  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/91223\n+\t* lra-constraints.c (process_alt_operands): Fail for unsuccessful\n+\tmatching with INOUT operand.\n+\n 2019-07-25  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* stmt.c (expand_case): Try to narrow the index type if it's larger"}, {"sha": "bd9f85d33cc67ca3ce147fed2d3d3b137352c9bd", "filename": "gcc/lra-constraints.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2Flra-constraints.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2Flra-constraints.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-constraints.c?ref=9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "patch": "@@ -2171,6 +2171,14 @@ process_alt_operands (int only_alternative)\n \t\t      }\n \t\t    else\n \t\t      {\n+\t\t\t/* If the operands do not match and one\n+\t\t\t   operand is INOUT, we can not match them.\n+\t\t\t   Try other possibilities, e.g. other\n+\t\t\t   alternatives or commutative operand\n+\t\t\t   exchange.  */\n+\t\t\tif (curr_static_id->operand[nop].type == OP_INOUT\n+\t\t\t    || curr_static_id->operand[m].type == OP_INOUT)\n+\t\t\t  break;\n \t\t\t/* Operands don't match.  If the operands are\n \t\t\t   different user defined explicit hard\n \t\t\t   registers, then we cannot make them match"}, {"sha": "0ff528b87b3cab566384ac50e625af9f63c92534", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "patch": "@@ -1,3 +1,8 @@\n+2019-07-25  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/91223\n+\t* gcc.target/i386/pr91223.c: New test.\n+\n 2019-07-25  Iain Sandoe  <iain@sandoe.co.uk>\n \n \tPR gcov-profile/91087"}, {"sha": "1b9e85b2308a6e2922115269866a93c1e90621e2", "filename": "gcc/testsuite/gcc.target/i386/pr91223.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr91223.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f41de41eaf6d30d2b492c1f13d01dd8e90bba81/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr91223.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr91223.c?ref=9f41de41eaf6d30d2b492c1f13d01dd8e90bba81", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Og -fno-tree-fre\" } */\n+int a;\n+void fn2(short, short);\n+\n+void fn1(void) {\n+  short b[8];\n+  b[0] |= a & 3;\n+  b[1] = a;\n+  fn2(b[0], b[1]);\n+}"}]}