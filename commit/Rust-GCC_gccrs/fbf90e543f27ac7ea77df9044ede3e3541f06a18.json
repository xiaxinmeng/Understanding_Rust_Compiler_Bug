{"sha": "fbf90e543f27ac7ea77df9044ede3e3541f06a18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJmOTBlNTQzZjI3YWM3ZWE3N2RmOTA0NGVkZTNlMzU0MWYwNmExOA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2015-10-26T11:56:57Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-26T11:56:57Z"}, "message": "einfo.ads, [...] (Needs_Typedef, [...]): Removed, no longer used.\n\n2015-10-26  Arnaud Charlet  <charlet@adacore.com>\n\n\t* einfo.ads, einfo.adb, exp_unst.adb (Needs_Typedef,\n\tSet_Needs_Typedef): Removed, no longer used.\n\nFrom-SVN: r229347", "tree": {"sha": "218843d07a3b069ab0b70fe64357402decd9c0ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/218843d07a3b069ab0b70fe64357402decd9c0ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbf90e543f27ac7ea77df9044ede3e3541f06a18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbf90e543f27ac7ea77df9044ede3e3541f06a18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbf90e543f27ac7ea77df9044ede3e3541f06a18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbf90e543f27ac7ea77df9044ede3e3541f06a18/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "512854fe89a2b18e6c9a474a7dc69679a70b93da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/512854fe89a2b18e6c9a474a7dc69679a70b93da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/512854fe89a2b18e6c9a474a7dc69679a70b93da"}], "stats": {"total": 38, "additions": 6, "deletions": 32}, "files": [{"sha": "87bf6be7ba5e53fc8076b08eb6605d30f77c02c5", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=fbf90e543f27ac7ea77df9044ede3e3541f06a18", "patch": "@@ -1,3 +1,8 @@\n+2015-10-26  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* einfo.ads, einfo.adb, exp_unst.adb (Needs_Typedef,\n+\tSet_Needs_Typedef): Removed, no longer used.\n+\n 2015-10-26  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* einfo.adb (First_Component): Update the assertion to allow"}, {"sha": "930e18ea48d2be5137a95c08905ba95fab30d501", "filename": "gcc/ada/einfo.adb", "status": "modified", "additions": 1, "deletions": 14, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2Feinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2Feinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.adb?ref=fbf90e543f27ac7ea77df9044ede3e3541f06a18", "patch": "@@ -595,7 +595,7 @@ package body Einfo is\n    --    Is_Uplevel_Referenced_Entity    Flag283\n    --    Is_Unimplemented                Flag284\n    --    Is_Volatile_Full_Access         Flag285\n-   --    Needs_Typedef                   Flag286\n+   --    (unused)                        Flag286\n    --    Rewritten_For_C                 Flag287\n \n    --    (unused)                        Flag288\n@@ -2687,12 +2687,6 @@ package body Einfo is\n       return Flag22 (Id);\n    end Needs_No_Actuals;\n \n-   function Needs_Typedef (Id : E) return B is\n-   begin\n-      pragma Assert (Is_Type (Id));\n-      return Flag286 (Id);\n-   end Needs_Typedef;\n-\n    function Never_Set_In_Source (Id : E) return B is\n    begin\n       return Flag115 (Id);\n@@ -5715,12 +5709,6 @@ package body Einfo is\n       Set_Flag22 (Id, V);\n    end Set_Needs_No_Actuals;\n \n-   procedure Set_Needs_Typedef (Id : E; V : B := True) is\n-   begin\n-      pragma Assert (Is_Type (Id));\n-      Set_Flag286 (Id, V);\n-   end Set_Needs_Typedef;\n-\n    procedure Set_Never_Set_In_Source (Id : E; V : B := True) is\n    begin\n       Set_Flag115 (Id, V);\n@@ -9010,7 +8998,6 @@ package body Einfo is\n       W (\"Must_Have_Preelab_Init\",          Flag208 (Id));\n       W (\"Needs_Debug_Info\",                Flag147 (Id));\n       W (\"Needs_No_Actuals\",                Flag22  (Id));\n-      W (\"Needs_Typedef\",                   Flag286 (Id));\n       W (\"Never_Set_In_Source\",             Flag115 (Id));\n       W (\"No_Dynamic_Predicate_On_actual\",  Flag276 (Id));\n       W (\"No_Pool_Assigned\",                Flag131 (Id));"}, {"sha": "a827514fbcb496da67f132acbcd39c5d298c99f5", "filename": "gcc/ada/einfo.ads", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2Feinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2Feinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.ads?ref=fbf90e543f27ac7ea77df9044ede3e3541f06a18", "patch": "@@ -3377,14 +3377,6 @@ package Einfo is\n --       interpreted as an indexing of the result of the call. It is also\n --       used to resolve various cases of entry calls.\n \n---    Needs_Typedef (Flag286)\n---       Defined for all types and subtypes. Set if it is essential to generate\n---       a typedef when we are generating C code from Cprint. Normally we\n---       generate typedef's only for source entities, and not for internally\n---       generated types, but there are cases, notably the AREC types generated\n---       in Exp_Unst when we are unnesting subprograms where we must generate\n---       typedef's for non-source types.\n-\n --    Never_Set_In_Source (Flag115)\n --       Defined in all entities, but can be set only for variables and\n --       parameters. This flag is set if the object is never assigned a value\n@@ -5486,7 +5478,6 @@ package Einfo is\n    --    May_Inherit_Delayed_Rep_Aspects     (Flag262)\n    --    Must_Be_On_Byte_Boundary            (Flag183)\n    --    Must_Have_Preelab_Init              (Flag208)\n-   --    Needs_Typedef                       (Flag286)\n    --    Optimize_Alignment_Space            (Flag241)\n    --    Optimize_Alignment_Time             (Flag242)\n    --    Partial_View_Has_Unknown_Discr      (Flag280)\n@@ -7049,7 +7040,6 @@ package Einfo is\n    function Must_Have_Preelab_Init              (Id : E) return B;\n    function Needs_Debug_Info                    (Id : E) return B;\n    function Needs_No_Actuals                    (Id : E) return B;\n-   function Needs_Typedef                       (Id : E) return B;\n    function Never_Set_In_Source                 (Id : E) return B;\n    function Next_Inlined_Subprogram             (Id : E) return E;\n    function No_Dynamic_Predicate_On_Actual      (Id : E) return B;\n@@ -7715,7 +7705,6 @@ package Einfo is\n    procedure Set_Must_Have_Preelab_Init          (Id : E; V : B := True);\n    procedure Set_Needs_Debug_Info                (Id : E; V : B := True);\n    procedure Set_Needs_No_Actuals                (Id : E; V : B := True);\n-   procedure Set_Needs_Typedef                   (Id : E; V : B := True);\n    procedure Set_Never_Set_In_Source             (Id : E; V : B := True);\n    procedure Set_Next_Inlined_Subprogram         (Id : E; V : E);\n    procedure Set_No_Dynamic_Predicate_On_Actual  (Id : E; V : B := True);\n@@ -8534,7 +8523,6 @@ package Einfo is\n    pragma Inline (Must_Have_Preelab_Init);\n    pragma Inline (Needs_Debug_Info);\n    pragma Inline (Needs_No_Actuals);\n-   pragma Inline (Needs_Typedef);\n    pragma Inline (Never_Set_In_Source);\n    pragma Inline (Next_Index);\n    pragma Inline (Next_Inlined_Subprogram);\n@@ -8998,7 +8986,6 @@ package Einfo is\n    pragma Inline (Set_Must_Have_Preelab_Init);\n    pragma Inline (Set_Needs_Debug_Info);\n    pragma Inline (Set_Needs_No_Actuals);\n-   pragma Inline (Set_Needs_Typedef);\n    pragma Inline (Set_Never_Set_In_Source);\n    pragma Inline (Set_Next_Inlined_Subprogram);\n    pragma Inline (Set_No_Dynamic_Predicate_On_Actual);"}, {"sha": "5221472644271bed6160d4f18824816894b7cfd1", "filename": "gcc/ada/exp_unst.adb", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2Fexp_unst.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf90e543f27ac7ea77df9044ede3e3541f06a18/gcc%2Fada%2Fexp_unst.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_unst.adb?ref=fbf90e543f27ac7ea77df9044ede3e3541f06a18", "patch": "@@ -1290,11 +1290,6 @@ package body Exp_Unst is\n \n                      Pop_Scope;\n \n-                     --  Mark the types as needing typedefs\n-\n-                     Set_Needs_Typedef (STJ.ARECnT);\n-                     Set_Needs_Typedef (STJ.ARECnPT);\n-\n                      --  Next step, for each uplevel referenced entity, add\n                      --  assignment operations to set the component in the\n                      --  activation record."}]}