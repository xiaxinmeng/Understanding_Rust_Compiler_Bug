{"sha": "88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODhmN2M0OWE4YmZlNmM5ZTdhYzA0ZGEyZWYzYmE4MjgxZDNkYmEwNg==", "commit": {"author": {"name": "Roland McGrath", "email": "mcgrathr@google.com", "date": "2014-02-14T17:37:23Z"}, "committer": {"name": "Roland McGrath", "email": "roland@gcc.gnu.org", "date": "2014-02-14T17:37:23Z"}, "message": "Use ud2 assembly mnemonic when available.\n\ngcc/\n\t* configure.ac (HAVE_AS_IX86_UD2): New test for 'ud2' mnemonic.\n\t* configure: Regenerated.\n\t* config.in: Regenerated.\n\t* config/i386/i386.md (trap) [HAVE_AS_IX86_UD2]: Use the mnemonic\n\tinstead of ASM_SHORT.\n\nFrom-SVN: r207789", "tree": {"sha": "7422872cc11ad04279001f8b6bb4165435fcddfd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7422872cc11ad04279001f8b6bb4165435fcddfd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/comments", "author": {"login": "frobtech", "id": 972096, "node_id": "MDQ6VXNlcjk3MjA5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/972096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frobtech", "html_url": "https://github.com/frobtech", "followers_url": "https://api.github.com/users/frobtech/followers", "following_url": "https://api.github.com/users/frobtech/following{/other_user}", "gists_url": "https://api.github.com/users/frobtech/gists{/gist_id}", "starred_url": "https://api.github.com/users/frobtech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frobtech/subscriptions", "organizations_url": "https://api.github.com/users/frobtech/orgs", "repos_url": "https://api.github.com/users/frobtech/repos", "events_url": "https://api.github.com/users/frobtech/events{/privacy}", "received_events_url": "https://api.github.com/users/frobtech/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f8cdff388dbc035fd20d01bff7224c998c3aee17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8cdff388dbc035fd20d01bff7224c998c3aee17", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8cdff388dbc035fd20d01bff7224c998c3aee17"}], "stats": {"total": 59, "additions": 58, "deletions": 1}, "files": [{"sha": "dd988ce565d6bc5ae7e177ee6ba1e0fcea5d325b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "patch": "@@ -1,3 +1,11 @@\n+2014-02-14  Roland McGrath  <mcgrathr@google.com>\n+\n+\t* configure.ac (HAVE_AS_IX86_UD2): New test for 'ud2' mnemonic.\n+\t* configure: Regenerated.\n+\t* config.in: Regenerated.\n+\t* config/i386/i386.md (trap) [HAVE_AS_IX86_UD2]: Use the mnemonic\n+\tinstead of ASM_SHORT.\n+\n 2014-02-14  Vladimir Makarov  <vmakarov@redhat.com>\n \t    Richard Earnshaw  <rearnsha@arm.com>\n "}, {"sha": "5aa32213e7c0c42cadb83f2363632208054b75f7", "filename": "gcc/config.in", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "patch": "@@ -375,6 +375,12 @@\n #endif\n \n \n+/* Define if your assembler supports the 'ud2' mnemonic. */\n+#ifndef USED_FOR_TARGET\n+#undef HAVE_AS_IX86_UD2\n+#endif\n+\n+\n /* Define if your assembler supports the lituse_jsrdirect relocation. */\n #ifndef USED_FOR_TARGET\n #undef HAVE_AS_JSRDIRECT_RELOCS"}, {"sha": "232a33493e0854a2d0a8a024fca71332ba9f996f", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "patch": "@@ -17843,7 +17843,13 @@\n (define_insn \"trap\"\n   [(trap_if (const_int 1) (const_int 6))]\n   \"\"\n-  { return ASM_SHORT \"0x0b0f\"; }\n+{\n+#ifdef HAVE_AS_IX86_UD2\n+  return \"ud2\";\n+#else\n+  return ASM_SHORT \"0x0b0f\";\n+#endif\n+}\n   [(set_attr \"length\" \"2\")])\n \n (define_expand \"prefetch\""}, {"sha": "cab3e926d9f8fb073a91fec13ba99bb771b0720d", "filename": "gcc/configure", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "patch": "@@ -25107,6 +25107,37 @@ if test $gcc_cv_as_ix86_rep_lock_prefix = yes; then\n \n $as_echo \"#define HAVE_AS_IX86_REP_LOCK_PREFIX 1\" >>confdefs.h\n \n+fi\n+\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking assembler for ud2 mnemonic\" >&5\n+$as_echo_n \"checking assembler for ud2 mnemonic... \" >&6; }\n+if test \"${gcc_cv_as_ix86_ud2+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  gcc_cv_as_ix86_ud2=no\n+  if test x$gcc_cv_as != x; then\n+    $as_echo 'ud2' > conftest.s\n+    if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n+  { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n+  test $ac_status = 0; }; }\n+    then\n+\tgcc_cv_as_ix86_ud2=yes\n+    else\n+      echo \"configure: failed program was\" >&5\n+      cat conftest.s >&5\n+    fi\n+    rm -f conftest.o conftest.s\n+  fi\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gcc_cv_as_ix86_ud2\" >&5\n+$as_echo \"$gcc_cv_as_ix86_ud2\" >&6; }\n+if test $gcc_cv_as_ix86_ud2 = yes; then\n+\n+$as_echo \"#define HAVE_AS_IX86_UD2 1\" >>confdefs.h\n+\n fi\n \n     { $as_echo \"$as_me:${as_lineno-$LINENO}: checking assembler for R_386_TLS_GD_PLT reloc\" >&5"}, {"sha": "969a8a628c8f7f02b521a5ba31e89adfe4ef4446", "filename": "gcc/configure.ac", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=88f7c49a8bfe6c9e7ac04da2ef3ba8281d3dba06", "patch": "@@ -3895,6 +3895,12 @@ foo:\tnop\n         [AC_DEFINE(HAVE_AS_IX86_REP_LOCK_PREFIX, 1,\n           [Define if the assembler supports 'rep <insn>, lock <insn>'.])])\n \n+    gcc_GAS_CHECK_FEATURE([ud2 mnemonic],\n+\tgcc_cv_as_ix86_ud2,,,\n+\t[ud2],,\n+      [AC_DEFINE(HAVE_AS_IX86_UD2, 1,\n+\t[Define if your assembler supports the 'ud2' mnemonic.])])\n+\n     gcc_GAS_CHECK_FEATURE([R_386_TLS_GD_PLT reloc],\n         gcc_cv_as_ix86_tlsgdplt,,,\n \t[call    tls_gd@tlsgdplt],"}]}