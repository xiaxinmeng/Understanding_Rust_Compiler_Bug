{"sha": "2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA2NmY3OTUxY2M0ZjBiMjNkZGZmNWFiZmQyYWQyZWE0ZWU5MGZmZg==", "commit": {"author": {"name": "Rafael Tsuha", "email": "rafael.tsuha@usp.br", "date": "2019-10-04T18:34:29Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2019-10-04T18:34:29Z"}, "message": "match.pd (sinh (x) / cosh (x)): New simplification rule.\n\n        * match.pd (sinh (x) / cosh (x)): New simplification rule.\n\n        * gcc.dg/sinhovercosh-1.c: New test.\n\nFrom-SVN: r276595", "tree": {"sha": "ab2ca5ec91831479d810d5601ff37fedbae4dc55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab2ca5ec91831479d810d5601ff37fedbae4dc55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/comments", "author": {"login": "Tsufael", "id": 22076044, "node_id": "MDQ6VXNlcjIyMDc2MDQ0", "avatar_url": "https://avatars.githubusercontent.com/u/22076044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tsufael", "html_url": "https://github.com/Tsufael", "followers_url": "https://api.github.com/users/Tsufael/followers", "following_url": "https://api.github.com/users/Tsufael/following{/other_user}", "gists_url": "https://api.github.com/users/Tsufael/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tsufael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tsufael/subscriptions", "organizations_url": "https://api.github.com/users/Tsufael/orgs", "repos_url": "https://api.github.com/users/Tsufael/repos", "events_url": "https://api.github.com/users/Tsufael/events{/privacy}", "received_events_url": "https://api.github.com/users/Tsufael/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "69b35f396ceb22e2e04b4228a6811291621808c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69b35f396ceb22e2e04b4228a6811291621808c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69b35f396ceb22e2e04b4228a6811291621808c1"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "6da73b6f57eea2bd713bce893289e94882b70ab8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "patch": "@@ -1,3 +1,7 @@\n+2019-10-04  Rafael Tsuha  <rafael.tsuha@usp.br>\n+\n+        * match.pd (sinh (x) / cosh (x)): New simplification rule.\n+\n 2019-10-04  Martin Jambor  <mjambor@suse.cz>\n \n \t* tree-ssa-forwprop.c (simplify_builtin_call): Set gimple call"}, {"sha": "9bd5f3e64752744550fc436f64e8341918d3a899", "filename": "gcc/match.pd", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2Fmatch.pd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2Fmatch.pd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatch.pd?ref=2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "patch": "@@ -4922,6 +4922,11 @@ DEFINE_INT_AND_FLOAT_ROUND_FN (RINT)\n   (rdiv (SIN:s @0) (COS:s @0))\n    (TAN @0))\n \n+ /* Simplify sinh(x) / cosh(x) -> tanh(x). */\n+ (simplify\n+  (rdiv (SINH:s @0) (COSH:s @0))\n+   (TANH @0))\n+\n  /* Simplify cos(x) / sin(x) -> 1 / tan(x). */\n  (simplify\n   (rdiv (COS:s @0) (SIN:s @0))"}, {"sha": "4248c81ad127652a0140ce6f1c4ea0a66bd0d568", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "patch": "@@ -1,3 +1,7 @@\n+2019-10-04  Rafael Tsuha  <rafael.tsuha@usp.br>\n+\n+        * gcc.dg/sinhovercosh-1.c: New test.\n+\n 2019-10-04  Joseph Myers  <joseph@codesourcery.com>\n \n \t* gcc.dg/c11-builtins-1.c, gcc.dg/c2x-builtins-1.c,"}, {"sha": "7e510727af8512b5b59290bcb4c32d2f0cee6e82", "filename": "gcc/testsuite/gcc.dg/sinhovercosh-1.c", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2Ftestsuite%2Fgcc.dg%2Fsinhovercosh-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff/gcc%2Ftestsuite%2Fgcc.dg%2Fsinhovercosh-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsinhovercosh-1.c?ref=2066f7951cc4f0b23ddff5abfd2ad2ea4ee90fff", "patch": "@@ -0,0 +1,45 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Ofast -fdump-tree-optimized\" } */\n+\n+extern float sinhf (float);\n+extern float coshf (float);\n+extern float tanhf (float);\n+extern float sqrtf (float);\n+extern double sinh (double);\n+extern double cosh (double);\n+extern double sqrt (double);\n+extern double tanh (double);\n+extern long double sinhl (long double);\n+extern long double coshl (long double);\n+extern long double tanhl (long double);\n+extern long double sqrtl (long double);\n+\n+double __attribute__ ((noinline))\n+sinhovercosh_ (double x)\n+{\n+  return sinh (x) / cosh (x);\n+}\n+\n+float __attribute__ ((noinline))\n+sinhfovercoshf_(float x)\n+{\n+  return sinhf (x) / coshf (x);\n+}\n+\n+long double __attribute__ ((noinline))\n+sinhlovercoshl_ (long double x)\n+{\n+  return sinhl (x) / coshl (x);\n+}\n+\n+/* There must be no calls to sinh, cosh, or atanh */\n+/* {dg-final { scan-tree-dump-not \"sinh \" \"optimized\" } } */\n+/* {dg-final { scan-tree-dump-not \"cosh \" \"optimized\" } } */\n+/* {dg-final { scan-tree-dump-not \"sinfh \" \"optimized\" } } */\n+/* {dg-final { scan-tree-dump-not \"cosfh \" \"optimized\" } } */\n+/* {dg-final { scan-tree-dump-not \"sinlh \" \"optimized\" } } */\n+/* {dg-final { scan-tree-dump-not \"coslh \" \"optimized\" } } */\n+/* {dg-final { scan-tree-dump-times \"tanh \" \"1\" \"optimized\" }} */\n+/* {dg-final { scan-tree-dump-times \"tanhl \" \"1\" \"optimized\" }} */\n+/* {dg-final { scan-tree-dump-times \"tanhf \" \"1\" \"optimized\" }} */\n+"}]}