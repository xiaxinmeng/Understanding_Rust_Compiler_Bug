{"sha": "88877022e7d306101d9353f65fc5145046460cc7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg4NzcwMjJlN2QzMDYxMDFkOTM1M2Y2NWZjNTE0NTA0NjQ2MGNjNw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-05-08T04:22:42Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-05-08T04:22:42Z"}, "message": "except.c (eh_status): Change the type of ttype_data to VEC(tree,gc)*.\n\n\t* except.c (eh_status): Change the type of ttype_data to\n\tVEC(tree,gc)*.\n\t(add_ttypes_entry, assign_filter_values,\n\toutput_function_exception_table): Use VEC instead of VARRAY.\n\nFrom-SVN: r99378", "tree": {"sha": "5407fefc0047b92ae69b0977b199ebc8779f92c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5407fefc0047b92ae69b0977b199ebc8779f92c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88877022e7d306101d9353f65fc5145046460cc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88877022e7d306101d9353f65fc5145046460cc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88877022e7d306101d9353f65fc5145046460cc7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88877022e7d306101d9353f65fc5145046460cc7/comments", "author": null, "committer": null, "parents": [{"sha": "1e0aa44aedd5bf2dcb53d3af01a5de03d9a06bce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e0aa44aedd5bf2dcb53d3af01a5de03d9a06bce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e0aa44aedd5bf2dcb53d3af01a5de03d9a06bce"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "688fb35a09d7295df80ed41c6f3c5c9978e249d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88877022e7d306101d9353f65fc5145046460cc7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88877022e7d306101d9353f65fc5145046460cc7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=88877022e7d306101d9353f65fc5145046460cc7", "patch": "@@ -1,3 +1,10 @@\n+2005-05-08  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* except.c (eh_status): Change the type of ttype_data to\n+\tVEC(tree,gc)*.\n+\t(add_ttypes_entry, assign_filter_values,\n+\toutput_function_exception_table): Use VEC instead of VARRAY.\n+\n 2005-05-07  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/rs6000.md (popcount<mode>2): Fix non-C90 constant."}, {"sha": "007c3e79fd8f1c4995ca592ef28d6d8220b51f37", "filename": "gcc/except.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88877022e7d306101d9353f65fc5145046460cc7/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88877022e7d306101d9353f65fc5145046460cc7/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=88877022e7d306101d9353f65fc5145046460cc7", "patch": "@@ -234,7 +234,7 @@ struct eh_status GTY(())\n   int built_landing_pads;\n   int last_region_number;\n \n-  varray_type ttype_data;\n+  VEC(tree,gc) *ttype_data;\n   varray_type ehspec_data;\n   varray_type action_record_data;\n \n@@ -966,10 +966,10 @@ add_ttypes_entry (htab_t ttypes_hash, tree type)\n \n       n = xmalloc (sizeof (*n));\n       n->t = type;\n-      n->filter = VARRAY_ACTIVE_SIZE (cfun->eh->ttype_data) + 1;\n+      n->filter = VEC_length (tree, cfun->eh->ttype_data) + 1;\n       *slot = n;\n \n-      VARRAY_PUSH_TREE (cfun->eh->ttype_data, type);\n+      VEC_safe_push (tree, gc, cfun->eh->ttype_data, type);\n     }\n \n   return n->filter;\n@@ -1019,7 +1019,7 @@ assign_filter_values (void)\n   int i;\n   htab_t ttypes, ehspec;\n \n-  VARRAY_TREE_INIT (cfun->eh->ttype_data, 16, \"ttype_data\");\n+  cfun->eh->ttype_data = VEC_alloc (tree, gc, 16);\n   VARRAY_UCHAR_INIT (cfun->eh->ehspec_data, 64, \"ehspec_data\");\n \n   ttypes = htab_create (31, ttypes_filter_hash, ttypes_filter_eq, free);\n@@ -3257,7 +3257,7 @@ output_function_exception_table (void)\n   targetm.asm_out.exception_section ();\n #endif\n \n-  have_tt_data = (VARRAY_ACTIVE_SIZE (cfun->eh->ttype_data) > 0\n+  have_tt_data = (VEC_length (tree, cfun->eh->ttype_data) > 0\n \t\t  || VARRAY_ACTIVE_SIZE (cfun->eh->ehspec_data) > 0);\n \n   /* Indicate the format of the @TType entries.  */\n@@ -3320,7 +3320,7 @@ output_function_exception_table (void)\n       after_disp = (1 + size_of_uleb128 (call_site_len)\n \t\t    + call_site_len\n \t\t    + VARRAY_ACTIVE_SIZE (cfun->eh->action_record_data)\n-\t\t    + (VARRAY_ACTIVE_SIZE (cfun->eh->ttype_data)\n+\t\t    + (VEC_length (tree, cfun->eh->ttype_data)\n \t\t       * tt_format_size));\n \n       disp = after_disp;\n@@ -3382,10 +3382,10 @@ output_function_exception_table (void)\n   if (have_tt_data)\n     assemble_align (tt_format_size * BITS_PER_UNIT);\n \n-  i = VARRAY_ACTIVE_SIZE (cfun->eh->ttype_data);\n+  i = VEC_length (tree, cfun->eh->ttype_data);\n   while (i-- > 0)\n     {\n-      tree type = VARRAY_TREE (cfun->eh->ttype_data, i);\n+      tree type = VEC_index (tree, cfun->eh->ttype_data, i);\n       rtx value;\n \n       if (type == NULL_TREE)"}]}