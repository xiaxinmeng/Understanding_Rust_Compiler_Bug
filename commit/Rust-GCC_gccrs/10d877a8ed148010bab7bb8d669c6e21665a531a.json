{"sha": "10d877a8ed148010bab7bb8d669c6e21665a531a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTBkODc3YThlZDE0ODAxMGJhYjdiYjhkNjY5YzZlMjE2NjVhNTMxYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2005-05-26T15:46:48Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2005-05-26T15:46:48Z"}, "message": "re PR libstdc++/13943 (call of overloaded `llabs(int)' is ambiguous)\n\n2005-05-26  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR libstdc++/13943\n\t* include/c_std/std_cstdlib.h: Do not open code llabs and lldiv,\n\tavailable when _GLIBCXX_USE_C99 is defined.\n\t* testsuite/26_numerics/cstdlib/13943.cc: New.\n\n\t* acinclude.m4 ([GLIBCXX_ENABLE_C99]): For completeness, check\n\talso strtoll and strtoull for ac_c99_stdlib.\n\t* configure: Regenerate.\n\nFrom-SVN: r100205", "tree": {"sha": "7a5f4909b67f08a378aa148f04d96411c09a0e3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a5f4909b67f08a378aa148f04d96411c09a0e3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/10d877a8ed148010bab7bb8d669c6e21665a531a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10d877a8ed148010bab7bb8d669c6e21665a531a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10d877a8ed148010bab7bb8d669c6e21665a531a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10d877a8ed148010bab7bb8d669c6e21665a531a/comments", "author": null, "committer": null, "parents": [{"sha": "2fe96b0a8394a7d42135ce9172a5a074127e9c61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fe96b0a8394a7d42135ce9172a5a074127e9c61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fe96b0a8394a7d42135ce9172a5a074127e9c61"}], "stats": {"total": 92, "additions": 78, "deletions": 14}, "files": [{"sha": "6314115c4674895358450dc4a04278a3bdb9124d", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=10d877a8ed148010bab7bb8d669c6e21665a531a", "patch": "@@ -1,3 +1,14 @@\n+2005-05-26  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR libstdc++/13943\n+\t* include/c_std/std_cstdlib.h: Do not open code llabs and lldiv,\n+\tavailable when _GLIBCXX_USE_C99 is defined.\n+\t* testsuite/26_numerics/cstdlib/13943.cc: New.\n+\n+\t* acinclude.m4 ([GLIBCXX_ENABLE_C99]): For completeness, check\n+\talso strtoll and strtoull for ac_c99_stdlib.\n+\t* configure: Regenerate.\n+\n 2005-05-25  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* config/linker-map.gnu: Add linkage support for no extern templates."}, {"sha": "86a52e5904c550521d07df9720adb897ca01be81", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=10d877a8ed148010bab7bb8d669c6e21665a531a", "patch": "@@ -879,12 +879,14 @@ AC_DEFUN([GLIBCXX_ENABLE_C99], [\n   AC_MSG_CHECKING([for ISO C99 support in <stdlib.h>])\n   AC_CACHE_VAL(ac_c99_stdlib, [\n   AC_TRY_COMPILE([#include <stdlib.h>],\n-                 [char* tmp; \n-\t    \t  strtof(\"gnu\", &tmp); \n+                 [char* tmp;\n+\t    \t  strtof(\"gnu\", &tmp);\n \t\t  strtold(\"gnu\", &tmp);\n-                  llabs(10); \n-\t\t  lldiv(10,1); \n-\t\t  atoll(\"10\"); \n+\t          strtoll(\"gnu\", &tmp, 10);\n+\t          strtoull(\"gnu\", &tmp, 10);\n+\t          llabs(10);\n+\t\t  lldiv(10,1);\n+\t\t  atoll(\"10\");\n \t\t  _Exit(0);\n \t\t  lldiv_t mydivt;],[ac_c99_stdlib=yes], [ac_c99_stdlib=no])\n   ])"}, {"sha": "9e0d61d447487cbabe8bf4e1f2cee1e54aa03b43", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=10d877a8ed148010bab7bb8d669c6e21665a531a", "patch": "@@ -7059,7 +7059,9 @@ main ()\n char* tmp;\n \t    \t  strtof(\"gnu\", &tmp);\n \t\t  strtold(\"gnu\", &tmp);\n-                  llabs(10);\n+\t          strtoll(\"gnu\", &tmp, 10);\n+\t          strtoull(\"gnu\", &tmp, 10);\n+\t          llabs(10);\n \t\t  lldiv(10,1);\n \t\t  atoll(\"10\");\n \t\t  _Exit(0);"}, {"sha": "cf91f27b2d3a23269605f8577254e97fd18a8b25", "filename": "libstdc++-v3/include/c_std/std_cstdlib.h", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fstd_cstdlib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fstd_cstdlib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fc_std%2Fstd_cstdlib.h?ref=10d877a8ed148010bab7bb8d669c6e21665a531a", "patch": "@@ -1,6 +1,6 @@\n // -*- C++ -*- forwarding header.\n \n-// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2005\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -168,17 +168,14 @@ namespace __gnu_cxx\n   inline long long\n   abs(long long __x) { return __x >= 0 ? __x : -__x; }\n \n-  inline long long\n-  llabs(long long __x) { return __x >= 0 ? __x : -__x; }\n-\n #if !_GLIBCXX_USE_C99_LONG_LONG_DYNAMIC\n+  using ::llabs;\n+\n   inline lldiv_t\n   div(long long __n, long long __d)\n   { lldiv_t __q; __q.quot = __n / __d; __q.rem = __n % __d; return __q; }\n \n-  inline lldiv_t\n-  lldiv(long long __n, long long __d)\n-  { lldiv_t __q; __q.quot = __n / __d; __q.rem = __n % __d; return __q; }\n+  using ::lldiv;\n #endif\n \n #if _GLIBCXX_USE_C99_LONG_LONG_CHECK || _GLIBCXX_USE_C99_LONG_LONG_DYNAMIC\n@@ -204,8 +201,8 @@ namespace std\n #endif\n   using __gnu_cxx::_Exit;\n   using __gnu_cxx::abs;\n-  using __gnu_cxx::llabs;\n #if !_GLIBCXX_USE_C99_LONG_LONG_DYNAMIC\n+  using __gnu_cxx::llabs;\n   using __gnu_cxx::div;\n   using __gnu_cxx::lldiv;\n #endif"}, {"sha": "920ddcc43b322dd54e6f8afe8fbad1fb06fdbf9e", "filename": "libstdc++-v3/testsuite/26_numerics/cstdlib/13943.cc", "status": "added", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fcstdlib%2F13943.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d877a8ed148010bab7bb8d669c6e21665a531a/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fcstdlib%2F13943.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Fcstdlib%2F13943.cc?ref=10d877a8ed148010bab7bb8d669c6e21665a531a", "patch": "@@ -0,0 +1,52 @@\n+// Copyright (C) 2005 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307,\n+// USA.\n+\n+// As a special exception, you may use this file as part of a free software\n+// library without restriction.  Specifically, if other files instantiate\n+// templates or use macros or inline functions from this file, or you compile\n+// this file and link it with other files to produce an executable, this\n+// file does not by itself cause the resulting executable to be covered by\n+// the GNU General Public License.  This exception does not however\n+// invalidate any other reasons why the executable file might be covered by\n+// the GNU General Public License.\n+\n+#include <cstdlib>\n+#include <testsuite_hooks.h>\n+\n+#if _GLIBCXX_USE_C99\n+// libstdc++/13943\n+void test01()\n+{\n+  using namespace std;\n+  bool test __attribute__((unused)) = true;\n+\n+  VERIFY( llabs(-3) == 3 );\n+  \n+  lldiv_t q = lldiv(6, 4);\n+  VERIFY( q.quot == 1 );\n+  VERIFY( q.rem == 2 );\n+}\n+#endif\n+\n+int main()\n+{\n+#if _GLIBCXX_USE_C99\n+  test01();\n+#endif\n+  return 0;\n+}"}]}