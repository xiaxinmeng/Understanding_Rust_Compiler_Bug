{"sha": "c04f999f246342334940628a3d604666400fb8dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzA0Zjk5OWYyNDYzNDIzMzQ5NDA2MjhhM2Q2MDQ2NjY0MDBmYjhkZA==", "commit": {"author": {"name": "Steve Ellcey", "email": "sellcey@imgtec.com", "date": "2015-06-16T16:49:06Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2015-06-16T16:49:06Z"}, "message": "mti-linux.h (MIPS_SYSVERSION_SPEC): New.\n\n2015-06-16  Steve Ellcey  <sellcey@imgtec.com>\n\n\t* config/mips/mti-linux.h (MIPS_SYSVERSION_SPEC): New.\n\t(SYSROOT_SUFFIX_SPEC): Update.\n\t(SYSROOT_HEADERS_SUFFIX_SPEC): New.\n\t(STARTFILE_PREFIX_SPEC): Update.\n\t* config/mips/t-mti-linux (MULTILIB_EXCEPTIONS): Remove.\n\t(MULTILIB_REQUIRED): New.\n\t(MULTILIB_OSDIRNAMES): New.\n\t* config/mips/t-img-linux (MULTILIB_EXCEPTIONS): Remove.\n\t(MULTILIB_REQUIRED): New.\n\t(MULTILIB_OSDIRNAMES): New.\n\nFrom-SVN: r224525", "tree": {"sha": "2f503fd8e7c17e6fd0e31a974ef72acbc472eb2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f503fd8e7c17e6fd0e31a974ef72acbc472eb2f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c04f999f246342334940628a3d604666400fb8dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c04f999f246342334940628a3d604666400fb8dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c04f999f246342334940628a3d604666400fb8dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c04f999f246342334940628a3d604666400fb8dd/comments", "author": null, "committer": null, "parents": [{"sha": "63d02f058f0ba3c1d00c2a9f12cac86eeec00b66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63d02f058f0ba3c1d00c2a9f12cac86eeec00b66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63d02f058f0ba3c1d00c2a9f12cac86eeec00b66"}], "stats": {"total": 212, "additions": 175, "deletions": 37}, "files": [{"sha": "37bc809461ff461a06ce4e11e992ad9000d17b7e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04f999f246342334940628a3d604666400fb8dd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04f999f246342334940628a3d604666400fb8dd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c04f999f246342334940628a3d604666400fb8dd", "patch": "@@ -1,3 +1,16 @@\n+2015-06-16  Steve Ellcey  <sellcey@imgtec.com>\n+\n+\t* config/mips/mti-linux.h (MIPS_SYSVERSION_SPEC): New.\n+\t(SYSROOT_SUFFIX_SPEC): Update.\n+\t(SYSROOT_HEADERS_SUFFIX_SPEC): New.\n+\t(STARTFILE_PREFIX_SPEC): Update.\n+\t* config/mips/t-mti-linux (MULTILIB_EXCEPTIONS): Remove.\n+\t(MULTILIB_REQUIRED): New.\n+\t(MULTILIB_OSDIRNAMES): New.\n+\t* config/mips/t-img-linux (MULTILIB_EXCEPTIONS): Remove.\n+\t(MULTILIB_REQUIRED): New.\n+\t(MULTILIB_OSDIRNAMES): New.\n+\n 2015-06-16  Matthew Wahab  <matthew.wahab@arm.com>\n \n \t* config/aarch64/aarch64-arches.def: Add \"armv8.1-a\"."}, {"sha": "03d1baa8411f9273a888539b7d2e7068fdbf5bf4", "filename": "gcc/config/mips/mti-linux.h", "status": "modified", "additions": 16, "deletions": 9, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04f999f246342334940628a3d604666400fb8dd/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04f999f246342334940628a3d604666400fb8dd/gcc%2Fconfig%2Fmips%2Fmti-linux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmti-linux.h?ref=c04f999f246342334940628a3d604666400fb8dd", "patch": "@@ -18,16 +18,23 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n /* This target is a multilib target, specify the sysroot paths.  */\n+#define MIPS_SYSVERSION_SPEC\t\t\t\t\t\\\n+    \"%{mips32:r1}%{mips64:r1}%{mips32r2:r2}%{mips64r2:r2}\"\t\\\n+    \"%{mips32r6:r6}%{mips64r6:r6}%{mips16:-mips16}\"\n+\n #undef SYSROOT_SUFFIX_SPEC\n-#if MIPS_ISA_DEFAULT == 33 /* mips32r2 is the default */\n-#define SYSROOT_SUFFIX_SPEC \\\n-    \"%{mips32:/mips32}%{mips64:/mips64}%{mips64r2:/mips64r2}%{mips32r6:/mips32r6}%{mips64r6:/mips64r6}%{mips16:/mips16}%{mmicromips:/micromips}%{mabi=64:/64}%{mel|EL:/el}%{msoft-float:/sof}%{!mips32r6:%{!mips64r6:%{mnan=2008:/nan2008}}}\"\n-#elif MIPS_ISA_DEFAULT == 37 /* mips32r6 is the default */\n-#define SYSROOT_SUFFIX_SPEC \\\n-    \"%{mips32:/mips32}%{mips64:/mips64}%{mips32r2:/mips32r2}%{mips64r2:/mips64r2}%{mips64r6:/mips64r6}%{mips16:/mips16}%{mmicromips:/micromips}%{mabi=64:/64}%{mel|EL:/el}%{msoft-float:/sof}%{!mips32r6:%{!mips64r6:%{mnan=2008:/nan2008}}}\"\n-#else /* Unexpected default ISA.  */\n-#error No SYSROOT_SUFFIX_SPEC exists for this default ISA\n-#endif\n+#define SYSROOT_SUFFIX_SPEC\t\t\t\t\t\t\\\n+    \"/%{mmicromips:micro}mips%{mel|EL:el}-\"MIPS_SYSVERSION_SPEC\t\t\\\n+    \"%{msoft-float:-soft;:-hard}\"\t\t\t\t\t\\\n+    \"%{!mips32r6:%{!mips64r6:%{mnan=2008:-nan2008}}}%{muclibc:-uclibc}\"\n+\n+#define SYSROOT_HEADERS_SUFFIX_SPEC SYSROOT_SUFFIX_SPEC\n+\n+#undef STARTFILE_PREFIX_SPEC\n+#define STARTFILE_PREFIX_SPEC                          \\\n+  \"%{mabi=32: /usr/local/lib/ /lib/ /usr/lib/}         \\\n+   %{mabi=n32: /usr/local/lib32/ /lib32/ /usr/lib32/}  \\\n+   %{mabi=64: /usr/local/lib64/ /lib64/ /usr/lib64/}\"\n \n #undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\"}, {"sha": "93d81920679620389ad6e867595583710b120b3e", "filename": "gcc/config/mips/t-img-linux", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04f999f246342334940628a3d604666400fb8dd/gcc%2Fconfig%2Fmips%2Ft-img-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04f999f246342334940628a3d604666400fb8dd/gcc%2Fconfig%2Fmips%2Ft-img-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-img-linux?ref=c04f999f246342334940628a3d604666400fb8dd", "patch": "@@ -23,8 +23,16 @@ MULTILIB_OPTIONS = mips64r6 mabi=64 EL\n MULTILIB_DIRNAMES = mips64r6 64 el\n MULTILIB_MATCHES = EL=mel EB=meb\n \n-# The 64 bit ABI is not supported on the mips32r6 architecture.\n-# Because mips32r6 is the default we can't use that flag to trigger\n-# the exception so we check for mabi=64 with no specific mips\n-# architecture flag instead.\n-MULTILIB_EXCEPTIONS += mabi=64*\n+MULTILIB_REQUIRED =\n+MULTILIB_OSDIRNAMES = .=mips-r6-hard/lib\n+MULTILIB_REQUIRED += mips64r6\n+MULTILIB_OSDIRNAMES += mips64r6=!mips-r6-hard/lib32\n+MULTILIB_REQUIRED += mips64r6/mabi=64\n+MULTILIB_OSDIRNAMES += mips64r6/mabi.64=!mips-r6-hard/lib64\n+\n+MULTILIB_REQUIRED += EL\n+MULTILIB_OSDIRNAMES += EL=!mipsel-r6-hard/lib\n+MULTILIB_REQUIRED += mips64r6/EL\n+MULTILIB_OSDIRNAMES += mips64r6/EL=!mipsel-r6-hard/lib32\n+MULTILIB_REQUIRED += mips64r6/mabi=64/EL\n+MULTILIB_OSDIRNAMES += mips64r6/mabi.64/EL=!mipsel-r6-hard/lib64"}, {"sha": "3dd7e71d86238e6d92bbeb3dd10cec691fa0b794", "filename": "gcc/config/mips/t-mti-linux", "status": "modified", "additions": 133, "deletions": 23, "changes": 156, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c04f999f246342334940628a3d604666400fb8dd/gcc%2Fconfig%2Fmips%2Ft-mti-linux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c04f999f246342334940628a3d604666400fb8dd/gcc%2Fconfig%2Fmips%2Ft-mti-linux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-mti-linux?ref=c04f999f246342334940628a3d604666400fb8dd", "patch": "@@ -23,26 +23,136 @@ MULTILIB_OPTIONS = mips32/mips64/mips64r2 mips16/mmicromips mabi=64 EL msoft-flo\n MULTILIB_DIRNAMES = mips32 mips64 mips64r2 mips16 micromips 64 el sof nan2008\n MULTILIB_MATCHES = EL=mel EB=meb mips32r2=mips32r3 mips32r2=mips32r5 mips64r2=mips64r3 mips64r2=mips64r5\n \n-# The 64 bit ABI is not supported on the mips32 architecture.\n-MULTILIB_EXCEPTIONS += *mips32*/*mabi=64*\n-\n-# The 64 bit ABI is not supported on the mips32r2 architecture.\n-# Because mips32r2 is the default we can't use that flag to trigger\n-# the exception so we check for mabi=64 with no specific mips\n-# architecture flag instead.\n-MULTILIB_EXCEPTIONS += mabi=64*\n-\n-# We do not want to build mips16 versions of mips64* architectures.\n-MULTILIB_EXCEPTIONS += *mips64*/*mips16*\n-MULTILIB_EXCEPTIONS += *mips16/mabi=64*\n-\n-# We only want micromips for mips32r2 architecture.\n-MULTILIB_EXCEPTIONS += *mips32/mmicromips*\n-MULTILIB_EXCEPTIONS += *mips64*/mmicromips*\n-MULTILIB_EXCEPTIONS += *mmicromips/mabi=64*\n-\n-# We do not want nan2008 libraries for soft-float,\n-# mips32[r1], or mips64[r1].\n-MULTILIB_EXCEPTIONS += *msoft-float*/*mnan=2008*\n-MULTILIB_EXCEPTIONS += *mips32/*mnan=2008*\n-MULTILIB_EXCEPTIONS += *mips64/*mnan=2008*\n+MULTILIB_REQUIRED    =\n+MULTILIB_OSDIRNAMES  = .=mips-r2-hard/lib\n+MULTILIB_REQUIRED   += mips64r2\n+MULTILIB_OSDIRNAMES += mips64r2=!mips-r2-hard/lib32\n+MULTILIB_REQUIRED   += mips64r2/mabi=64\n+MULTILIB_OSDIRNAMES += mips64r2/mabi.64=!mips-r2-hard/lib64\n+\n+MULTILIB_REQUIRED   += mnan=2008\n+MULTILIB_OSDIRNAMES += mnan.2008=!mips-r2-hard-nan2008/lib\n+MULTILIB_REQUIRED   += mips64r2/mnan=2008\n+MULTILIB_OSDIRNAMES += mips64r2/mnan.2008=!mips-r2-hard-nan2008/lib32\n+MULTILIB_REQUIRED   += mips64r2/mabi=64/mnan=2008\n+MULTILIB_OSDIRNAMES += mips64r2/mabi.64/mnan.2008=!mips-r2-hard-nan2008/lib64\n+\n+MULTILIB_REQUIRED   += msoft-float\n+MULTILIB_OSDIRNAMES += msoft-float=!mips-r2-soft/lib\n+MULTILIB_REQUIRED   += mips64r2/msoft-float\n+MULTILIB_OSDIRNAMES += mips64r2/msoft-float=!mips-r2-soft/lib32\n+MULTILIB_REQUIRED   += mips64r2/mabi=64/msoft-float\n+MULTILIB_OSDIRNAMES += mips64r2/mabi.64/msoft-float=!mips-r2-soft/lib64\n+\n+#MULTILIB_REQUIRED   += msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += msoft-float/mnan.2008=!mips-r2-soft-nan2008/lib\n+#MULTILIB_REQUIRED   += mips64r2/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mips64r2/msoft-float/mnan.2008=!mips-r2-soft-nan2008/lib32\n+#MULTILIB_REQUIRED   += mips64r2/mabi=64/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mips64r2/mabi.64/msoft-float/mnan.2008=!mips-r2-soft-nan2008/lib64\n+\n+MULTILIB_REQUIRED   += EL\n+MULTILIB_OSDIRNAMES += EL=!mipsel-r2-hard/lib\n+MULTILIB_REQUIRED   += mips64r2/EL\n+MULTILIB_OSDIRNAMES += mips64r2/EL=!mipsel-r2-hard/lib32\n+MULTILIB_REQUIRED   += mips64r2/mabi=64/EL\n+MULTILIB_OSDIRNAMES += mips64r2/mabi.64/EL=!mipsel-r2-hard/lib64\n+\n+MULTILIB_REQUIRED   += EL/mnan=2008\n+MULTILIB_OSDIRNAMES += EL/mnan.2008=!mipsel-r2-hard-nan2008/lib\n+MULTILIB_REQUIRED   += mips64r2/EL/mnan=2008\n+MULTILIB_OSDIRNAMES += mips64r2/EL/mnan.2008=!mipsel-r2-hard-nan2008/lib32\n+MULTILIB_REQUIRED   += mips64r2/mabi=64/EL/mnan=2008\n+MULTILIB_OSDIRNAMES += mips64r2/mabi.64/EL/mnan.2008=!mipsel-r2-hard-nan2008/lib64\n+\n+MULTILIB_REQUIRED   += EL/msoft-float\n+MULTILIB_OSDIRNAMES += EL/msoft-float=!mipsel-r2-soft/lib\n+MULTILIB_REQUIRED   += mips64r2/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mips64r2/EL/msoft-float=!mipsel-r2-soft/lib32\n+MULTILIB_REQUIRED   += mips64r2/mabi=64/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mips64r2/mabi.64/EL/msoft-float=!mipsel-r2-soft/lib64\n+\n+#MULTILIB_REQUIRED   += EL/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += EL/msoft-float/mnan.2008=!mipsel-r2-soft-nan2008/lib\n+#MULTILIB_REQUIRED   += mips64r2/EL/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mips64r2/EL/msoft-float/mnan.2008=!mipsel-r2-soft-nan2008/lib32\n+#MULTILIB_REQUIRED   += mips64r2/mabi=64/EL/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mips64r2/mabi.64/EL/msoft-float/mnan.2008=!mipsel-r2-soft-nan2008/lib64\n+\n+# We will not include any 64 bit mips16 combinations.\n+MULTILIB_REQUIRED   += mips16\n+MULTILIB_OSDIRNAMES += mips16=!mips-r2-mips16-hard/lib\n+MULTILIB_REQUIRED   += mips16/mnan=2008\n+MULTILIB_OSDIRNAMES += mips16/mnan.2008=!mips-r2-mips16-hard-nan2008/lib\n+MULTILIB_REQUIRED   += mips16/msoft-float\n+MULTILIB_OSDIRNAMES += mips16/msoft-float=!mips-r2-mips16-soft/lib\n+#MULTILIB_REQUIRED   += mips16/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mips16/msoft-float/mnan.2008=!mips-r2-mips16-soft-nan2008/lib\n+\n+MULTILIB_REQUIRED   += mips16/EL\n+MULTILIB_OSDIRNAMES += mips16/EL=!mipsel-r2-mips16-hard/lib\n+MULTILIB_REQUIRED   += mips16/EL/mnan=2008\n+MULTILIB_OSDIRNAMES += mips16/EL/mnan.2008=!mipsel-r2-mips16-hard-nan2008/lib\n+MULTILIB_REQUIRED   += mips16/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mips16/EL/msoft-float=!mipsel-r2-mips16-soft/lib\n+#MULTILIB_REQUIRED   += mips16/EL/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mips16/EL/msoft-float/mnan.2008=!mipsel-r2-mips16-soft-nan2008/lib\n+\n+MULTILIB_REQUIRED   += mmicromips\n+MULTILIB_OSDIRNAMES += mmicromips=!micromips-r2-hard/lib\n+MULTILIB_REQUIRED   += mmicromips/mnan=2008\n+MULTILIB_OSDIRNAMES += mmicromips/mnan.2008=!micromips-r2-hard-nan2008/lib\n+MULTILIB_REQUIRED   += mmicromips/msoft-float\n+MULTILIB_OSDIRNAMES += mmicromips/msoft-float=!micromips-r2-soft/lib\n+#MULTILIB_REQUIRED   += mmicromips/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mmicromips/msoft-float/mnan.2008=!micromips-r2-soft-nan2008/lib\n+\n+MULTILIB_REQUIRED   += mmicromips/EL\n+MULTILIB_OSDIRNAMES += mmicromips/EL=!micromipsel-r2-hard/lib\n+MULTILIB_REQUIRED   += mmicromips/EL/mnan=2008\n+MULTILIB_OSDIRNAMES += mmicromips/EL/mnan.2008=!micromipsel-r2-hard-nan2008/lib\n+MULTILIB_REQUIRED   += mmicromips/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mmicromips/EL/msoft-float=!micromipsel-r2-soft/lib\n+#MULTILIB_REQUIRED   += mmicromips/EL/msoft-float/mnan=2008\n+#MULTILIB_OSDIRNAMES += mmicromips/EL/msoft-float/mnan.2008=!micromipsel-r2-soft-nan2008/lib\n+\n+# Version 1 multilibs\n+\n+MULTILIB_REQUIRED   += mips32\n+MULTILIB_OSDIRNAMES += mips32=!mips-r1-hard/lib\n+MULTILIB_REQUIRED   += mips64\n+MULTILIB_OSDIRNAMES += mips64=!mips-r1-hard/lib32\n+MULTILIB_REQUIRED   += mips64/mabi=64\n+MULTILIB_OSDIRNAMES += mips64/mabi.64=!mips-r1-hard/lib64\n+\n+MULTILIB_REQUIRED   += mips32/msoft-float\n+MULTILIB_OSDIRNAMES += mips32/msoft-float=!mips-r1-soft/lib\n+MULTILIB_REQUIRED   += mips64/msoft-float\n+MULTILIB_OSDIRNAMES += mips64/msoft-float=!mips-r1-soft/lib32\n+MULTILIB_REQUIRED   += mips64/mabi=64/msoft-float\n+MULTILIB_OSDIRNAMES += mips64/mabi.64/msoft-float=!mips-r1-soft/lib64\n+\n+MULTILIB_REQUIRED   += mips32/EL\n+MULTILIB_OSDIRNAMES += mips32/EL=!mipsel-r1-hard/lib\n+MULTILIB_REQUIRED   += mips64/EL\n+MULTILIB_OSDIRNAMES += mips64/EL=!mipsel-r1-hard/lib32\n+MULTILIB_REQUIRED   += mips64/mabi=64/EL\n+MULTILIB_OSDIRNAMES += mips64/mabi.64/EL=!mipsel-r1-hard/lib64\n+\n+MULTILIB_REQUIRED   += mips32/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mips32/EL/msoft-float=!mipsel-r1-soft/lib\n+MULTILIB_REQUIRED   += mips64/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mips64/EL/msoft-float=!mipsel-r1-soft/lib32\n+MULTILIB_REQUIRED   += mips64/mabi=64/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mips64/mabi.64/EL/msoft-float=!mipsel-r1-soft/lib64\n+\n+# We will not include any 64 bit mips16 combinations.\n+MULTILIB_REQUIRED   += mips32/mips16\n+MULTILIB_OSDIRNAMES += mips32/mips16=!mips-r1-mips16-hard/lib\n+MULTILIB_REQUIRED   += mips32/mips16/msoft-float\n+MULTILIB_OSDIRNAMES += mips32/mips16/msoft-float=!mips-r1-mips16-soft/lib\n+\n+MULTILIB_REQUIRED   += mips32/mips16/EL\n+MULTILIB_OSDIRNAMES += mips32/mips16/EL=!mipsel-r1-mips16-hard/lib\n+MULTILIB_REQUIRED   += mips32/mips16/EL/msoft-float\n+MULTILIB_OSDIRNAMES += mips32/mips16/EL/msoft-float=!mipsel-r1-mips16-soft/lib"}]}