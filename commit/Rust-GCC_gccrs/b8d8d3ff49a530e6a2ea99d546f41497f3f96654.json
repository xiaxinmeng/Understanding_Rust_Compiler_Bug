{"sha": "b8d8d3ff49a530e6a2ea99d546f41497f3f96654", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjhkOGQzZmY0OWE1MzBlNmEyZWE5OWQ1NDZmNDE0OTdmM2Y5NjY1NA==", "commit": {"author": {"name": "Maxim Ostapenko", "email": "m.ostapenko@samsung.com", "date": "2017-08-17T11:58:13Z"}, "committer": {"name": "Maxim Ostapenko", "email": "chefmax@gcc.gnu.org", "date": "2017-08-17T11:58:13Z"}, "message": "re PR target/81861 (ASan pr64820.c testcase segfaults with LTO and -fstack-protector-strong)\n\n2017-08-17  Maxim Ostapenko  <m.ostapenko@samsung.com>\n\n\tPR target/81861\n\t* config/i386/i386.c (ix86_option_override_internal): Save target\n\tspecific options after ix86_stack_protector_guard_reg was changed.\n\nFrom-SVN: r251145", "tree": {"sha": "adc7cbecb52dd5c585043f773c049faec58568a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/adc7cbecb52dd5c585043f773c049faec58568a2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b8d8d3ff49a530e6a2ea99d546f41497f3f96654", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8d8d3ff49a530e6a2ea99d546f41497f3f96654", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8d8d3ff49a530e6a2ea99d546f41497f3f96654", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8d8d3ff49a530e6a2ea99d546f41497f3f96654/comments", "author": null, "committer": null, "parents": [{"sha": "ab4b719a48a68503edf03b9aca745c242f55c9d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab4b719a48a68503edf03b9aca745c242f55c9d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab4b719a48a68503edf03b9aca745c242f55c9d7"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "088f312c84326b2276a1f60da04ed8c91d6792d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8d8d3ff49a530e6a2ea99d546f41497f3f96654/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8d8d3ff49a530e6a2ea99d546f41497f3f96654/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b8d8d3ff49a530e6a2ea99d546f41497f3f96654", "patch": "@@ -1,3 +1,9 @@\n+2017-08-17  Maxim Ostapenko  <m.ostapenko@samsung.com>\n+\n+\tPR target/81861\n+\t* config/i386/i386.c (ix86_option_override_internal): Save target\n+\tspecific options after ix86_stack_protector_guard_reg was changed.\n+\n 2017-08-17  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/81827"}, {"sha": "3720d27504b8478392e5a9c4c071891a85b10d3d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8d8d3ff49a530e6a2ea99d546f41497f3f96654/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8d8d3ff49a530e6a2ea99d546f41497f3f96654/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=b8d8d3ff49a530e6a2ea99d546f41497f3f96654", "patch": "@@ -6651,12 +6651,6 @@ ix86_option_override_internal (bool main_args_p,\n   gcc_assert ((opts->x_target_flags & MASK_LONG_DOUBLE_64) == 0\n \t      || (opts->x_target_flags & MASK_LONG_DOUBLE_128) == 0);\n \n-  /* Save the initial options in case the user does function specific\n-     options.  */\n-  if (main_args_p)\n-    target_option_default_node = target_option_current_node\n-      = build_target_option_node (opts);\n-\n   /* Handle stack protector */\n   if (!opts_set->x_ix86_stack_protector_guard)\n     opts->x_ix86_stack_protector_guard\n@@ -6740,6 +6734,12 @@ ix86_option_override_internal (bool main_args_p,\n       free (str);\n     }\n \n+  /* Save the initial options in case the user does function specific\n+     options.  */\n+  if (main_args_p)\n+    target_option_default_node = target_option_current_node\n+      = build_target_option_node (opts);\n+\n   return true;\n }\n "}]}