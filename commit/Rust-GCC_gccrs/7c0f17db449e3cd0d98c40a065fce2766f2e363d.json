{"sha": "7c0f17db449e3cd0d98c40a065fce2766f2e363d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2MwZjE3ZGI0NDllM2NkMGQ5OGM0MGEwNjVmY2UyNzY2ZjJlMzYzZA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-15T17:20:25Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-11-15T17:20:25Z"}, "message": "runtime: Use runtime_m to get m value after call to runtime_mcall.\n\nFrom-SVN: r204853", "tree": {"sha": "415fcd7d51408deb3732e1c1ad5a698ca638e4ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/415fcd7d51408deb3732e1c1ad5a698ca638e4ef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c0f17db449e3cd0d98c40a065fce2766f2e363d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c0f17db449e3cd0d98c40a065fce2766f2e363d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c0f17db449e3cd0d98c40a065fce2766f2e363d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c0f17db449e3cd0d98c40a065fce2766f2e363d/comments", "author": null, "committer": null, "parents": [{"sha": "78ec30368544d09a0cd1423b2eefc2496bb29632", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78ec30368544d09a0cd1423b2eefc2496bb29632", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78ec30368544d09a0cd1423b2eefc2496bb29632"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "de2a54bfa5e0e0819a4d940ea3af65b30eb9a5fa", "filename": "libgo/runtime/proc.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c0f17db449e3cd0d98c40a065fce2766f2e363d/libgo%2Fruntime%2Fproc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c0f17db449e3cd0d98c40a065fce2766f2e363d/libgo%2Fruntime%2Fproc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fproc.c?ref=7c0f17db449e3cd0d98c40a065fce2766f2e363d", "patch": "@@ -1983,7 +1983,10 @@ runtime_exitsyscall(void)\n #endif\n \tgp->gcnext_sp = nil;\n \truntime_memclr(&gp->gcregs, sizeof gp->gcregs);\n-\tm->p->syscalltick++;\n+\n+\t// Don't refer to m again, we might be running on a different\n+\t// thread after returning from runtime_mcall.\n+\truntime_m()->p->syscalltick++;\n }\n \n static bool"}]}