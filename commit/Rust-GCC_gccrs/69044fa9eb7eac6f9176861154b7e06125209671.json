{"sha": "69044fa9eb7eac6f9176861154b7e06125209671", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjkwNDRmYTllYjdlYWM2ZjkxNzY4NjExNTRiN2UwNjEyNTIwOTY3MQ==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2014-12-17T02:01:10Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2014-12-17T02:01:10Z"}, "message": "crt.h: New.\n\nlibgcc/\n\t* config/sh/crt.h: New.\n\t* config/sh/crti.S: Use GLOBAL macro from crt.h for _init and _fini\n\tsymbols.\n\t* config/sh/crt1.S: Likewise.\n\nFrom-SVN: r218807", "tree": {"sha": "8bd18b664c7c0a406e93802ac90cf703c8df9bbc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bd18b664c7c0a406e93802ac90cf703c8df9bbc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/69044fa9eb7eac6f9176861154b7e06125209671", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69044fa9eb7eac6f9176861154b7e06125209671", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69044fa9eb7eac6f9176861154b7e06125209671", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69044fa9eb7eac6f9176861154b7e06125209671/comments", "author": null, "committer": null, "parents": [{"sha": "d8a99c7c6bce947706eeafbf69ec214845eb4a66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8a99c7c6bce947706eeafbf69ec214845eb4a66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8a99c7c6bce947706eeafbf69ec214845eb4a66"}], "stats": {"total": 58, "additions": 47, "deletions": 11}, "files": [{"sha": "ea0057f28fe5628379ae50ef55641d156975f7b9", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=69044fa9eb7eac6f9176861154b7e06125209671", "patch": "@@ -1,3 +1,10 @@\n+2014-12-17  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\t* config/sh/crt.h: New.\n+\t* config/sh/crti.S: Use GLOBAL macro from crt.h for _init and _fini\n+\tsymbols.\n+\t* config/sh/crt1.S: Likewise.\n+\n 2014-12-15  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR libgcc/63832"}, {"sha": "1df49110ec614eb6845ab4316074dfb9801463cf", "filename": "libgcc/config/sh/crt.h", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2Fconfig%2Fsh%2Fcrt.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2Fconfig%2Fsh%2Fcrt.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fsh%2Fcrt.h?ref=69044fa9eb7eac6f9176861154b7e06125209671", "patch": "@@ -0,0 +1,29 @@\n+/* Copyright (C) 2014 Free Software Foundation, Inc.\n+\n+This file is free software; you can redistribute it and/or modify it\n+under the terms of the GNU General Public License as published by the\n+Free Software Foundation; either version 3, or (at your option) any\n+later version.\n+\n+This file is distributed in the hope that it will be useful, but\n+WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+General Public License for more details.\n+\n+Under Section 7 of GPL version 3, you are granted additional\n+permissions described in the GCC Runtime Library Exception, version\n+3.1, as published by the Free Software Foundation.\n+\n+You should have received a copy of the GNU General Public License and\n+a copy of the GCC Runtime Library Exception along with this program;\n+see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#ifndef __USER_LABEL_PREFIX__\n+#error  __USER_LABEL_PREFIX__ not defined\n+#endif\n+\n+#define CONCAT(a, b) CONCAT2(a, b)\n+#define CONCAT2(a, b) a ## b\n+\n+#define GLOBAL(X) CONCAT(__USER_LABEL_PREFIX__,X)"}, {"sha": "b48a1a1155f092f7620027e2c2ed5d6acbd82bd0", "filename": "libgcc/config/sh/crt1.S", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2Fconfig%2Fsh%2Fcrt1.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2Fconfig%2Fsh%2Fcrt1.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fsh%2Fcrt1.S?ref=69044fa9eb7eac6f9176861154b7e06125209671", "patch": "@@ -22,6 +22,7 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n+#include \"crt.h\"\n \n #ifdef MMU_SUPPORT\n \t/* Section used for exception/timer interrupt stack area */\n@@ -420,7 +421,7 @@ start:\n #endif /* MMU_SUPPORT */\n \n \tpt/l\t.Lzero_bss_loop, tr0\n-\tpt/l\t_init, tr5\n+\tpt/l\tGLOBAL(_init), tr5\n \tpt/l\t___setup_argv_and_call_main, tr6\n \tpt/l\t_exit, tr7\n \n@@ -452,7 +453,7 @@ start:\n \n \t! arrange for exit to call fini\n \tpt/l\t_atexit, tr1\n-\tLOAD_ADDR (_fini, r2)\n+\tLOAD_ADDR (GLOBAL(_fini), r2)\n \tblink\ttr1, r18\n \n \t! call init\n@@ -850,9 +851,9 @@ exit_k:\n atexit_k:\n \t.long\t_atexit\n init_k:\n-\t.long\t_init\n+\t.long\tGLOBAL(_init)\n fini_k:\n-\t.long\t_fini\n+\t.long\tGLOBAL(_fini)\n #ifdef VBR_SETUP\n old_vbr_k:\n \t.long\told_vbr\n@@ -1116,9 +1117,7 @@ vbr_600:\n #if defined(__SH_FPU_ANY__)\n \t.balign 4\n pervading_precision_k:\n-#define CONCAT1(A,B) A##B\n-#define CONCAT(A,B) CONCAT1(A,B)\n-\t.long CONCAT(__USER_LABEL_PREFIX__,__fpscr_values)+4\n+\t.long GLOBAL(__fpscr_values)+4\n #endif\n #else\n \tmov.l 2f, r0     ! Load the old vbr setting (if any)."}, {"sha": "cacd514b59cf53aa0196543002be7d69075641db", "filename": "libgcc/config/sh/crti.S", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2Fconfig%2Fsh%2Fcrti.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69044fa9eb7eac6f9176861154b7e06125209671/libgcc%2Fconfig%2Fsh%2Fcrti.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fsh%2Fcrti.S?ref=69044fa9eb7eac6f9176861154b7e06125209671", "patch": "@@ -22,6 +22,7 @@ a copy of the GCC Runtime Library Exception along with this program;\n see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n <http://www.gnu.org/licenses/>.  */\n \n+#include \"crt.h\"\n \n /* The code in sections .init and .fini is supposed to be a single\n    regular function.  The function in .init is called directly from\n@@ -44,8 +45,8 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #else\n \t.p2align 1\n #endif\n-\t.global\t _init\n-_init:\n+\t.global\t GLOBAL(_init)\n+GLOBAL(_init):\n #if __SHMEDIA__\n \taddi\tr15, -16, r15\n \tst.q\tr15, 8, r14\n@@ -89,8 +90,8 @@ _init:\n #else\n \t.p2align 1\n #endif\n-\t.global  _fini\n-_fini:\t\n+\t.global  GLOBAL(_fini)\n+GLOBAL(_fini):\t\n #if __SHMEDIA__\n \taddi\tr15, -16, r15\n \tst.q\tr15, 8, r14"}]}