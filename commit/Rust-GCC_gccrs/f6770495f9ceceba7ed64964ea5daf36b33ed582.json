{"sha": "f6770495f9ceceba7ed64964ea5daf36b33ed582", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjY3NzA0OTVmOWNlY2ViYTdlZDY0OTY0ZWE1ZGFmMzZiMzNlZDU4Mg==", "commit": {"author": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1998-06-02T07:00:13Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1998-06-02T07:00:13Z"}, "message": "Fix variable name to match inclhack shell script\n\nFrom-SVN: r20180", "tree": {"sha": "5f5fb8d38ebe83f6f71560599bfbc12772b41c33", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f5fb8d38ebe83f6f71560599bfbc12772b41c33"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6770495f9ceceba7ed64964ea5daf36b33ed582", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6770495f9ceceba7ed64964ea5daf36b33ed582", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6770495f9ceceba7ed64964ea5daf36b33ed582", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6770495f9ceceba7ed64964ea5daf36b33ed582/comments", "author": null, "committer": null, "parents": [{"sha": "858a26d4755ed6d922fa19a499c3a6ea2772b1de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/858a26d4755ed6d922fa19a499c3a6ea2772b1de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/858a26d4755ed6d922fa19a499c3a6ea2772b1de"}], "stats": {"total": 32, "additions": 21, "deletions": 11}, "files": [{"sha": "91ed0c88b4835e05f5bf29f7330b6007aad14d9f", "filename": "contrib/fixinc/fixincl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6770495f9ceceba7ed64964ea5daf36b33ed582/contrib%2Ffixinc%2Ffixincl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6770495f9ceceba7ed64964ea5daf36b33ed582/contrib%2Ffixinc%2Ffixincl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ffixinc%2Ffixincl.c?ref=f6770495f9ceceba7ed64964ea5daf36b33ed582", "patch": "@@ -453,7 +453,7 @@ testTest (pTest, pzFile)\n   tSuccess res = FAILURE;\n \n   static char zCmdBuf[4096];\n-  tSCC zCmdFmt[] = \"f=%s\\nif ( test %s ) > /dev/null 2>&1\\n\"\n+  tSCC zCmdFmt[] = \"file=%s\\nif ( test %s ) > /dev/null 2>&1\\n\"\n   \"then echo TRUE\\n\" \"else echo FALSE\\n\" \"fi\";\n \n   sprintf (zCmdBuf, zCmdFmt, pzFile, pTest->pzTest);"}, {"sha": "49ca38349222742ee73bd60a5536766c7b153e14", "filename": "contrib/fixinc/inclhack.def", "status": "modified", "additions": 20, "deletions": 10, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6770495f9ceceba7ed64964ea5daf36b33ed582/contrib%2Ffixinc%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6770495f9ceceba7ed64964ea5daf36b33ed582/contrib%2Ffixinc%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ffixinc%2Finclhack.def?ref=f6770495f9ceceba7ed64964ea5daf36b33ed582", "patch": "@@ -598,7 +598,7 @@ fix = {\n  */\n fix = {\n     hackname = motorola_nested;\n-    files    = limits.h\n+    files    = limits.h;\n     files    = sys/limits.h;\n     sed = \"s@^\\\\(#undef[ \\t][ \\t]*PIPE_BUF[ \\t]*\"\n                    \"/\\\\* max # bytes atomic in write to a\\\\)$@\\\\1 */@\";\n@@ -1041,11 +1041,11 @@ fix = {\n  *  Remove the double-slash comments\n  *  They *must* be removed so it will not create nested comments!!\n  *  However, they will *not* be removed if '++' is in any part of\n- *  their file name.\n+ *  the file name, or if the name ends with \".hh\" or \".H\".\n  */\n fix = {\n     hackname = no_double_slash;\n-    test     = '-z \"`echo ${f}|grep ++`\"';\n+    test     = '-z \"`echo ${file}|egrep \\'++|\\.hh$|\\.H$\\'`\"';\n     select = '//[^*]';\n     sed    = '/\\/\\/[^*]/' \"s|//\\\\(.*\\\\)$|/* \\\\1 */|\";\n };\n@@ -2190,11 +2190,11 @@ fix = {\n     hackname = x11_class;\n     files    = X11/ShellP.h;\n     bypass   = __cplusplus;\n-    sed      = \"/char [*]class;/i\\\\\\n\"\n+    sed      = \"/char \\\\*class;/i\\\\\\n\"\n                    \"#ifdef __cplusplus\\\\\\n\"\n                    \"\\tchar *c_class;\\\\\\n\"\n                    \"#else\\n\";\n-    sed      = \"/char [*]class;/a\\\\\\n\"\n+    sed      = \"/char \\\\*class;/a\\\\\\n\"\n                    \"#endif\\n\";\n };\n \n@@ -2249,7 +2249,9 @@ fix = {\n     hackname = zzz_ki_iface;\n     files    = sys/ki_iface.h;\n     select   = 'These definitions are for HP Internal developers';\n-    shell    = \"cat > /dev/null ; rm -f $file\";\n+    shell    =\n+        \"echo \\\"Removing incorrect fix to HP-UX <$file>\\\" >&2\\n\"\n+         \"rm -f ${DESTDIR}/$file ${DESTDIR}/$file.\\ncat > /dev/null\";\n };\n \n \n@@ -2260,7 +2262,9 @@ fix = {\n     hackname = zzz_ki;\n     files    = sys/ki.h;\n     select   = '11.00 HP-UX LP64';\n-    shell    = \"cat > /dev/null ; rm -f $file\";\n+    shell    =\n+        \"echo \\\"Removing incorrect fix to HP-UX <$file>\\\" >&2\\n\"\n+         \"rm -f ${DESTDIR}/$file ${DESTDIR}/$file.\\ncat > /dev/null\";\n };\n \n \n@@ -2271,7 +2275,9 @@ fix = {\n     hackname = zzz_ki_calls;\n     files    = sys/ki_calls.h;\n     select   = 'KI_MAX_PROCS is an arbitrary number';\n-    shell    = \"cat > /dev/null ; rm -f $file\";\n+    shell    =\n+        \"echo \\\"Removing incorrect fix to HP-UX <$file>\\\" >&2\\n\"\n+         \"rm -f ${DESTDIR}/$file ${DESTDIR}/$file.\\ncat > /dev/null\";\n };\n \n \n@@ -2282,7 +2288,9 @@ fix = {\n     hackname = zzz_ki_defs;\n     files    = sys/ki_defs.h;\n     select   = 'Kernel Instrumentation Definitions';\n-    shell    = \"cat > /dev/null ; rm -f $file\";\n+    shell    =\n+        \"echo \\\"Removing incorrect fix to HP-UX <$file>\\\" >&2\\n\"\n+         \"rm -f ${DESTDIR}/$file ${DESTDIR}/$file.\\ncat > /dev/null\";\n };\n \n \n@@ -2293,7 +2301,9 @@ fix = {\n     hackname = zzz_time;\n     files    = sys/time.h;\n     select   = 'For CASPEC, look in';\n-    shell    = \"cat > /dev/null ; rm -f $file\";\n+    shell    =\n+        \"echo \\\"Removing incorrect fix to HP-UX <$file>\\\" >&2\\n\"\n+         \"rm -f ${DESTDIR}/$file ${DESTDIR}/$file.\\ncat > /dev/null\";\n };\n \n "}]}