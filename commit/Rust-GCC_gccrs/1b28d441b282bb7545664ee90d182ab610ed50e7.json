{"sha": "1b28d441b282bb7545664ee90d182ab610ed50e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWIyOGQ0NDFiMjgyYmI3NTQ1NjY0ZWU5MGQxODJhYjYxMGVkNTBlNw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2001-04-27T05:08:39Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-04-27T05:08:39Z"}, "message": "method.c (use_thunk): Make sure that thunks really are emitted when requested.\n\n\t* method.c (use_thunk): Make sure that thunks really are emitted\n\twhen requested.\n\nFrom-SVN: r41621", "tree": {"sha": "91110338a243c47c82b485701d2f560d03609e16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/91110338a243c47c82b485701d2f560d03609e16"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b28d441b282bb7545664ee90d182ab610ed50e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b28d441b282bb7545664ee90d182ab610ed50e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b28d441b282bb7545664ee90d182ab610ed50e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b28d441b282bb7545664ee90d182ab610ed50e7/comments", "author": null, "committer": null, "parents": [{"sha": "f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f24fd724c2bb211021ac6d7fe3d9375f8218c0ec"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "c6e06acbf24092a5ac90c74b22d942a12f20ab1f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b28d441b282bb7545664ee90d182ab610ed50e7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b28d441b282bb7545664ee90d182ab610ed50e7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1b28d441b282bb7545664ee90d182ab610ed50e7", "patch": "@@ -1,3 +1,8 @@\n+2001-04-26  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* method.c (use_thunk): Make sure that thunks really are emitted\n+\twhen requested.\n+\n 2001-04-26  Nathan Sidwell <nathan@codesourcery.com>\n \n \t* mangle.c (write_chars): New macro."}, {"sha": "db45fd4ec169ca2afab863a4e4d5c409797c79d2", "filename": "gcc/cp/method.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b28d441b282bb7545664ee90d182ab610ed50e7/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b28d441b282bb7545664ee90d182ab610ed50e7/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=1b28d441b282bb7545664ee90d182ab610ed50e7", "patch": "@@ -377,7 +377,8 @@ make_thunk (function, delta, vcall_index, generate_with_vtable_p)\n   return thunk;\n }\n \n-/* Emit the definition of a C++ multiple inheritance vtable thunk.  */\n+/* Emit the definition of a C++ multiple inheritance vtable thunk.  If\n+   EMIT_P is non-zero, the thunk is emitted immediately.  */\n \n void\n use_thunk (thunk_fndecl, emit_p)\n@@ -519,6 +520,11 @@ use_thunk (thunk_fndecl, emit_p)\n     DECL_INITIAL (thunk_fndecl) = make_node (BLOCK);\n     BLOCK_VARS (DECL_INITIAL (thunk_fndecl)) \n       = DECL_ARGUMENTS (thunk_fndecl);\n+\n+    /* Since we want to emit the thunk, we explicitly mark its name as\n+       referenced.  */\n+    TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (thunk_fndecl)) = 1;\n+\n     expand_body (finish_function (0));\n   }\n "}]}