{"sha": "760f82dbb7595a30206b04445240effad725d82f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzYwZjgyZGJiNzU5NWEzMDIwNmIwNDQ0NTI0MGVmZmFkNzI1ZDgyZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-03-07T08:11:30Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-03-07T08:11:30Z"}, "message": "re PR rtl-optimization/79901 (ICE in prepare_cmp_insn, at optabs.c:3904)\n\n\tPR rtl-optimization/79901\n\t* config/i386/sse.md (*avx512bw_<code><mode>3<mask_name>): Renamed to\n\t...\n\t(*avx512f_<code><mode>3<mask_name>): ... this.\n\t(<code><mode>3 with maxmin code iterator): Use VI8_AVX2_AVX512F\n\titerator instead of VI8_AVX2_AVX512BW.\n\n\t* gcc.target/i386/pr79901.c: New test.\n\nFrom-SVN: r245947", "tree": {"sha": "97a0e738406c51b6c4449ea8f71aacbe41127aac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97a0e738406c51b6c4449ea8f71aacbe41127aac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/760f82dbb7595a30206b04445240effad725d82f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/760f82dbb7595a30206b04445240effad725d82f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/760f82dbb7595a30206b04445240effad725d82f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/760f82dbb7595a30206b04445240effad725d82f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cd5c0aeeae00f5e093715127fe2fb6b6cb98a260", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd5c0aeeae00f5e093715127fe2fb6b6cb98a260", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd5c0aeeae00f5e093715127fe2fb6b6cb98a260"}], "stats": {"total": 42, "additions": 37, "deletions": 5}, "files": [{"sha": "227b48aca6ab926b06a03b4644b7478c87190c9a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/760f82dbb7595a30206b04445240effad725d82f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/760f82dbb7595a30206b04445240effad725d82f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=760f82dbb7595a30206b04445240effad725d82f", "patch": "@@ -1,5 +1,12 @@\n 2017-03-07  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR rtl-optimization/79901\n+\t* config/i386/sse.md (*avx512bw_<code><mode>3<mask_name>): Renamed to\n+\t...\n+\t(*avx512f_<code><mode>3<mask_name>): ... this.\n+\t(<code><mode>3 with maxmin code iterator): Use VI8_AVX2_AVX512F\n+\titerator instead of VI8_AVX2_AVX512BW.\n+\n \tPR rtl-optimization/79901\n \t* expr.c (expand_expr_real_2): For vector MIN/MAX, if there is no\n \tmin/max expander, expand it using expand_vec_cond_expr."}, {"sha": "5cca4f1d4fd942cbcdabcbe5faa1182d3371ca0e", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/760f82dbb7595a30206b04445240effad725d82f/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/760f82dbb7595a30206b04445240effad725d82f/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=760f82dbb7595a30206b04445240effad725d82f", "patch": "@@ -10841,7 +10841,7 @@\n   \"TARGET_AVX512F\"\n   \"ix86_fixup_binary_operands_no_copy (<CODE>, <MODE>mode, operands);\")\n \n-(define_insn \"*avx512bw_<code><mode>3<mask_name>\"\n+(define_insn \"*avx512f_<code><mode>3<mask_name>\"\n   [(set (match_operand:VI48_AVX512VL 0 \"register_operand\" \"=v\")\n \t(maxmin:VI48_AVX512VL\n \t  (match_operand:VI48_AVX512VL 1 \"nonimmediate_operand\" \"%v\")\n@@ -10865,10 +10865,10 @@\n    (set_attr \"mode\" \"<sseinsnmode>\")])\n \n (define_expand \"<code><mode>3\"\n-  [(set (match_operand:VI8_AVX2_AVX512BW 0 \"register_operand\")\n-\t(maxmin:VI8_AVX2_AVX512BW\n-\t  (match_operand:VI8_AVX2_AVX512BW 1 \"register_operand\")\n-\t  (match_operand:VI8_AVX2_AVX512BW 2 \"register_operand\")))]\n+  [(set (match_operand:VI8_AVX2_AVX512F 0 \"register_operand\")\n+\t(maxmin:VI8_AVX2_AVX512F\n+\t  (match_operand:VI8_AVX2_AVX512F 1 \"register_operand\")\n+\t  (match_operand:VI8_AVX2_AVX512F 2 \"register_operand\")))]\n   \"TARGET_SSE4_2\"\n {\n   if (TARGET_AVX512F"}, {"sha": "b927b5a2976279644208f673eeb5e7c5031332ca", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/760f82dbb7595a30206b04445240effad725d82f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/760f82dbb7595a30206b04445240effad725d82f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=760f82dbb7595a30206b04445240effad725d82f", "patch": "@@ -1,5 +1,8 @@\n 2017-03-07  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR rtl-optimization/79901\n+\t* gcc.target/i386/pr79901.c: New test.\n+\n \tPR sanitizer/79897\n \t* c-c++-common/ubsan/pr79897.c: New test.\n "}, {"sha": "6fdcf767362889f375d2101c9a7f0bf5affedfa3", "filename": "gcc/testsuite/gcc.target/i386/pr79901.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/760f82dbb7595a30206b04445240effad725d82f/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr79901.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/760f82dbb7595a30206b04445240effad725d82f/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr79901.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr79901.c?ref=760f82dbb7595a30206b04445240effad725d82f", "patch": "@@ -0,0 +1,22 @@\n+/* PR rtl-optimization/79901 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -mavx512f -fno-ssa-phiopt\" } */\n+\n+unsigned int\n+foo (const unsigned long long x)\n+{\n+  if (x < 0)\n+    return 0;\n+  else if ( x > ~0U)\n+    return ~0U;\n+  else\n+    return (unsigned int) x;\n+}\n+\n+void\n+bar (unsigned x, unsigned int *y, unsigned int z)\n+{\n+  unsigned i;\n+  for (i = 0; i < x; i++)\n+    y[i] = foo (y[i] * (unsigned long long) z);\n+}"}]}