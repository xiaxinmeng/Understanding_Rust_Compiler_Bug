{"sha": "36ceb0e3ccbac8324601234546210239d334bb0a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzZjZWIwZTNjY2JhYzgzMjQ2MDEyMzQ1NDYyMTAyMzlkMzM0YmIwYQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-03-31T17:03:16Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-03-31T17:03:16Z"}, "message": "tree.c (need_assembler_name_p): Artificial types have no ODR names.\n\n\t* tree.c (need_assembler_name_p): Artificial types have no ODR\n\tnames.\n\t* ipa-devirt.c (warn_odr): Do not try to apply ODR cache when\n\tno caching is done.\n\t* lto.c (lto_read_decls): Move code registering odr types out\n\tof TYPE_CANONICAL conditional and also register polymorphic types.\n\nFrom-SVN: r221797", "tree": {"sha": "e83e1c3818fcf99d82f667f00483358bf46c0078", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e83e1c3818fcf99d82f667f00483358bf46c0078"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/36ceb0e3ccbac8324601234546210239d334bb0a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36ceb0e3ccbac8324601234546210239d334bb0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36ceb0e3ccbac8324601234546210239d334bb0a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36ceb0e3ccbac8324601234546210239d334bb0a/comments", "author": null, "committer": null, "parents": [{"sha": "12cc8c723ed0dccdbb6b2b590706b1344d468c55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12cc8c723ed0dccdbb6b2b590706b1344d468c55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12cc8c723ed0dccdbb6b2b590706b1344d468c55"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "ea149b40f149a01705fd1db46c35efea6fcc09d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=36ceb0e3ccbac8324601234546210239d334bb0a", "patch": "@@ -1,3 +1,10 @@\n+2015-03-27  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* tree.c (need_assembler_name_p): Artificial types have no ODR\n+\tnames.\n+\t* ipa-devirt.c (warn_odr): Do not try to apply ODR cache when\n+\tno caching is done.\n+\n 2015-03-31  Martin Liska  <mliska@suse.cz>\n \n \tPR ipa/65557"}, {"sha": "6969f5a04be618fd74661be3a6a9a8474d1ac3db", "filename": "gcc/ipa-devirt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2Fipa-devirt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2Fipa-devirt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-devirt.c?ref=36ceb0e3ccbac8324601234546210239d334bb0a", "patch": "@@ -939,7 +939,8 @@ warn_odr (tree t1, tree t2, tree st1, tree st2,\n \n   /* ODR warnings are output druing LTO streaming; we must apply location\n      cache for potential warnings to be output correctly.  */\n-  lto_location_cache::current_cache->apply_location_cache ();\n+  if (lto_location_cache::current_cache)\n+    lto_location_cache::current_cache->apply_location_cache ();\n \n   if (!warning_at (DECL_SOURCE_LOCATION (TYPE_NAME (t1)), OPT_Wodr,\n \t\t   \"type %qT violates one definition rule\","}, {"sha": "085ce9f4a0424991c0f0dbe26288b365fee7bdcc", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=36ceb0e3ccbac8324601234546210239d334bb0a", "patch": "@@ -1,3 +1,8 @@\n+2015-03-27  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* lto.c (lto_read_decls): Move code registering odr types out\n+\tof TYPE_CANONICAL conditional and also register polymorphic types.\n+\n 2015-03-26  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* lto-symtab.c (lto_symtab_merge_decls_2): Silence warning on"}, {"sha": "151e3e27bada492943a899621e8ff7fdcfee8249", "filename": "gcc/tree.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ceb0e3ccbac8324601234546210239d334bb0a/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=36ceb0e3ccbac8324601234546210239d334bb0a", "patch": "@@ -5139,6 +5139,7 @@ need_assembler_name_p (tree decl)\n       && decl == TYPE_NAME (TREE_TYPE (decl))\n       && !is_lang_specific (TREE_TYPE (decl))\n       && AGGREGATE_TYPE_P (TREE_TYPE (decl))\n+      && !TYPE_ARTIFICIAL (TREE_TYPE (decl))\n       && !variably_modified_type_p (TREE_TYPE (decl), NULL_TREE)\n       && !type_in_anonymous_namespace_p (TREE_TYPE (decl)))\n     return !DECL_ASSEMBLER_NAME_SET_P (decl);"}]}