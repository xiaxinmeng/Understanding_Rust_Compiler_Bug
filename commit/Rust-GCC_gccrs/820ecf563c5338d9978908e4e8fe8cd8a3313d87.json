{"sha": "820ecf563c5338d9978908e4e8fe8cd8a3313d87", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODIwZWNmNTYzYzUzMzhkOTk3ODkwOGU0ZThmZThjZDhhMzMxM2Q4Nw==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@bitrange.com", "date": "2002-03-31T15:49:29Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2002-03-31T15:49:29Z"}, "message": "static11.C: Skip on mmix-knuth-mmixware.\n\n\t* g++.old-deja/g++.pt/static11.C: Skip on mmix-knuth-mmixware.\n\t* g++.dg/other/static11.C: Copy g++.old-deja/g++.pt/static11.C for\n\t-da test.\n\nFrom-SVN: r51656", "tree": {"sha": "01f45ca401d3550690e6489d7e35c6ee5565dca2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/01f45ca401d3550690e6489d7e35c6ee5565dca2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/820ecf563c5338d9978908e4e8fe8cd8a3313d87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/820ecf563c5338d9978908e4e8fe8cd8a3313d87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/820ecf563c5338d9978908e4e8fe8cd8a3313d87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/820ecf563c5338d9978908e4e8fe8cd8a3313d87/comments", "author": null, "committer": null, "parents": [{"sha": "aa66aa5ff4304776eacd3537da2fe6554eba5112", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa66aa5ff4304776eacd3537da2fe6554eba5112", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa66aa5ff4304776eacd3537da2fe6554eba5112"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "8015ae979302d32bdd083b61e1a1a2b6001fd2e3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/820ecf563c5338d9978908e4e8fe8cd8a3313d87/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/820ecf563c5338d9978908e4e8fe8cd8a3313d87/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=820ecf563c5338d9978908e4e8fe8cd8a3313d87", "patch": "@@ -1,3 +1,9 @@\n+2002-03-31  Hans-Peter Nilsson  <hp@bitrange.com>\n+\n+\t* g++.old-deja/g++.pt/static11.C: Skip on mmix-knuth-mmixware.\n+\t* g++.dg/other/static11.C: Copy g++.old-deja/g++.pt/static11.C for\n+\t-da test.\n+\n 2002-03-31  Richard Henderson  <rth@redhat.com>\n \n \t* gcc.dg/special/alias-2.c: New."}, {"sha": "08126f12c66b2809ccde9cdb14138091edeab8b7", "filename": "gcc/testsuite/g++.dg/other/static11.C", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/820ecf563c5338d9978908e4e8fe8cd8a3313d87/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fstatic11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/820ecf563c5338d9978908e4e8fe8cd8a3313d87/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fstatic11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fstatic11.C?ref=820ecf563c5338d9978908e4e8fe8cd8a3313d87", "patch": "@@ -0,0 +1,32 @@\n+// This is a copy of g++.old-deja/g++.pt/static11.C which at one\n+// time got a SEGV for mmix-knuth-mmixware when compiled with\n+// -da (or either -dj or -df).\n+// { dg-do compile }\n+// { dg-options \"-da\" }\n+\n+extern \"C\" void _exit (int);\n+\n+int r = 1;\n+\n+struct A\n+{\n+  void f(){};\n+  A(){ ++r; }\n+  ~A(){ r -= 2; _exit (r); }\n+};\n+\n+template<class T>\n+struct C\n+{\n+  C(){ a.f(); }\n+  static A a;\n+};\n+\n+template <class T> A C<T>::a;\n+typedef C<int> B;\n+\n+int main()\n+{\n+  C<int> c;\n+  return r;\n+}"}, {"sha": "cb8a5241a1713c1cd63302ee42f76bfda2fd17f9", "filename": "gcc/testsuite/g++.old-deja/g++.pt/static11.C", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/820ecf563c5338d9978908e4e8fe8cd8a3313d87/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fstatic11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/820ecf563c5338d9978908e4e8fe8cd8a3313d87/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fstatic11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fstatic11.C?ref=820ecf563c5338d9978908e4e8fe8cd8a3313d87", "patch": "@@ -1,5 +1,11 @@\n // Bug: g++ was failing to destroy C<int>::a because it was using two\n // different sentry variables for construction and destruction.\n+//\n+// Some targets (e.g. those with \"set_board_info needs_status_wrapper 1\"\n+// in their dejagnu baseboard description) require that the status is\n+// final when exit is entered (or main returns), and not \"overruled\" by a\n+// destructor calling _exit.  It's not really worth it to handle that.\n+// Skip if target: mmix-knuth-mmixware\n \n extern \"C\" void _exit (int);\n "}]}