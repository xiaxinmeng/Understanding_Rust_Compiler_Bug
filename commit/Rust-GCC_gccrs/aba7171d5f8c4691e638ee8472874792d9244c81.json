{"sha": "aba7171d5f8c4691e638ee8472874792d9244c81", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWJhNzE3MWQ1ZjhjNDY5MWU2MzhlZTg0NzI4NzQ3OTJkOTI0NGM4MQ==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-12-28T23:13:03Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-12-28T23:13:03Z"}, "message": "re PR fortran/42353 ([OOP] Bogus Error: Name 'vtype$...' at (1) is an ambiguous reference ...)\n\ngcc/fortran/\n2009-12-28 Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/42353\n\t* symbol.c (gfc_find_derived_vtab): Make vtabs and vtypes private.\n\ngcc/testsuite/\n2009-12-28  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/42353\n\t* gfortran.dg/class_13.f03: New test.\n\nFrom-SVN: r155494", "tree": {"sha": "77577ab5f46e18b5b03dade4e6e41b4357fee12c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77577ab5f46e18b5b03dade4e6e41b4357fee12c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aba7171d5f8c4691e638ee8472874792d9244c81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aba7171d5f8c4691e638ee8472874792d9244c81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aba7171d5f8c4691e638ee8472874792d9244c81", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aba7171d5f8c4691e638ee8472874792d9244c81/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "72b79d39451c960000f6695d45f486ef3f39cfbc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72b79d39451c960000f6695d45f486ef3f39cfbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72b79d39451c960000f6695d45f486ef3f39cfbc"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "55fc753409924fd4afca2a526647a4cae1ac2f9f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=aba7171d5f8c4691e638ee8472874792d9244c81", "patch": "@@ -1,3 +1,8 @@\n+2009-12-28 Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/42353\n+\t* symbol.c (gfc_find_derived_vtab): Make vtabs and vtypes private.\n+\n 2009-12-27  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n \t    Daniel Kraft  <d@domob.eu>\n "}, {"sha": "8ba5adb51c2090fd1d944c7cdaea713734d04725", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=aba7171d5f8c4691e638ee8472874792d9244c81", "patch": "@@ -4748,6 +4748,7 @@ gfc_find_derived_vtab (gfc_symbol *derived)\n \t  vtab->attr.target = 1;\n \t  vtab->attr.save = SAVE_EXPLICIT;\n \t  vtab->attr.vtab = 1;\n+\t  vtab->attr.access = ACCESS_PRIVATE;\n \t  vtab->refs++;\n \t  gfc_set_sym_referenced (vtab);\n \t  sprintf (name, \"vtype$%s\", derived->name);\n@@ -4764,6 +4765,7 @@ gfc_find_derived_vtab (gfc_symbol *derived)\n \t\treturn NULL;\n \t      vtype->refs++;\n \t      gfc_set_sym_referenced (vtype);\n+\t      vtype->attr.access = ACCESS_PRIVATE;\n \n \t      /* Add component '$hash'.  */\n \t      if (gfc_add_component (vtype, \"$hash\", &c) == FAILURE)"}, {"sha": "aef38ad70f5135fd473e775ea2956859087a4c2f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aba7171d5f8c4691e638ee8472874792d9244c81", "patch": "@@ -1,3 +1,8 @@\n+2009-12-28  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/42353\n+\t* gfortran.dg/class_13.f03: New test.\n+\n 2009-12-28  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR middle-end/41344"}, {"sha": "84073bf2276a35e012f5c6000f42ec6f86e9d3fd", "filename": "gcc/testsuite/gfortran.dg/class_13.f03", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ftestsuite%2Fgfortran.dg%2Fclass_13.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aba7171d5f8c4691e638ee8472874792d9244c81/gcc%2Ftestsuite%2Fgfortran.dg%2Fclass_13.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fclass_13.f03?ref=aba7171d5f8c4691e638ee8472874792d9244c81", "patch": "@@ -0,0 +1,37 @@\n+! { dg-do compile }\n+!\n+! PR 42353: [OOP] Bogus Error: Name 'vtype$...' at (1) is an ambiguous reference ...\n+!\n+! Original test case by Harald Anlauf <anlauf@gmx.de>\n+! Modified by Janus Weil <janus@gcc.gnu.org>\n+\n+module concrete_vector\n+  type :: trivial_vector_type\n+  end type\n+  class(trivial_vector_type), pointer :: this\n+end module concrete_vector\n+\n+module concrete_gradient\n+contains\n+  subroutine my_to_vector (v)\n+    use concrete_vector\n+    class(trivial_vector_type) :: v\n+    select type (v)\n+    class is (trivial_vector_type)\n+    end select\n+  end subroutine\n+end module concrete_gradient\n+\n+module concrete_inner_product\n+  use concrete_vector\n+  use concrete_gradient\n+contains\n+  real function my_dot_v_v (a)\n+    class(trivial_vector_type) :: a\n+    select type (a)\n+    class is (trivial_vector_type)\n+    end select\n+  end function\n+end module concrete_inner_product\n+ \n+! { dg-final { cleanup-modules \"concrete_vector concrete_gradient concrete_inner_product\" } }"}]}