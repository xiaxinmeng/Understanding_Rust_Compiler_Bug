{"sha": "c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdjYjlmNDJhODg0MmFiYTVhMTQxMzhhZmI5ZjRlNjcwNjdjMjhmYQ==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2009-05-06T20:41:52Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2009-05-06T20:41:52Z"}, "message": "re PR c++/17395 (Incorrect lookup for parameters)\n\n2009-05-06  Dodji Seketeli  <dodji@redhat.com>\n\n    gcc/cp/ChangeLog:\n    \tPR c++/17395\n    \t* pt.c (tsubst_copy) <case PARM_DECL>: We don't want to tsubst the\n    \twhole list of PARM_DECLs, just the current one.\n    \n    gcc/testsuite/ChangeLog:\n    \tPR c++/17395\n    \t* g++.dg/template/call7.C: New test.\n\nFrom-SVN: r147201", "tree": {"sha": "e650d9b6287e389886337e558d3e9b5cde8fa8a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e650d9b6287e389886337e558d3e9b5cde8fa8a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/comments", "author": null, "committer": null, "parents": [{"sha": "ab3426a77573180fe4c36d10a5532f1d45e2102f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab3426a77573180fe4c36d10a5532f1d45e2102f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab3426a77573180fe4c36d10a5532f1d45e2102f"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "ca9c05af9f837e211cee96c7bd7cee14a358d3a2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "patch": "@@ -1,3 +1,9 @@\n+2009-05-06  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/17395\n+\t* pt.c (tsubst_copy) <case PARM_DECL>: We don't want to tsubst the\n+\twhole list of PARM_DECLs, just the current one.\n+\n 2009-05-05  Shujing Zhao  <pearly.zhao@oracle.com>\n \n \t* cp-tree.h:"}, {"sha": "e100d6b116c78d1866bdccad3b82a4a18561c090", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "patch": "@@ -10020,11 +10020,15 @@ tsubst_copy (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n \n       if (r == NULL)\n \t{\n+\t  tree c;\n \t  /* This can happen for a parameter name used later in a function\n \t     declaration (such as in a late-specified return type).  Just\n \t     make a dummy decl, since it's only used for its type.  */\n \t  gcc_assert (skip_evaluation);\t  \n-\t  r = tsubst_decl (t, args, complain);\n+\t  /* We copy T because want to tsubst the PARM_DECL only,\n+\t     not the following PARM_DECLs that are chained to T.  */\n+\t  c = copy_node (t);\n+\t  r = tsubst_decl (c, args, complain);\n \t  /* Give it the template pattern as its context; its true context\n \t     hasn't been instantiated yet and this is good enough for\n \t     mangling.  */"}, {"sha": "c34a2701bc84e7c529e00fa3db7f523ede9a5ebb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "patch": "@@ -1,3 +1,8 @@\n+2009-05-06  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/17395\n+\t* g++.dg/template/call7.C: New test.\n+\n 2009-05-06  Diego Novillo  <dnovillo@google.com>\n \n \t* lib/plugin-support.exp: Do not prefix $GMPINC with -I."}, {"sha": "00a912b36826ff6b233a6619b3678ab758850556", "filename": "gcc/testsuite/g++.dg/template/call7.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcall7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7cb9f42a8842aba5a14138afb9f4e67067c28fa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcall7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcall7.C?ref=c7cb9f42a8842aba5a14138afb9f4e67067c28fa", "patch": "@@ -0,0 +1,19 @@\n+// Contributed by Dodji Seketeli <dodji@redhat.com>\n+// Origin: PR c++/17395\n+// { dg-do \"compile\" }\n+\n+template<int> struct X { };\n+\n+void fu(int a, X<sizeof(a)>) { }\n+\n+template<class T>\n+void bhar(T a, X<sizeof(a)>) { }\n+\n+int\n+main()\n+{\n+  int x;\n+  X<sizeof(int)> y;\n+  fu(x, y);\n+  bhar(x, y);\n+}"}]}