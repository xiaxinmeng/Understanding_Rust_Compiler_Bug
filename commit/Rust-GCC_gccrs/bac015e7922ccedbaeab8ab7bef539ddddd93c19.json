{"sha": "bac015e7922ccedbaeab8ab7bef539ddddd93c19", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmFjMDE1ZTc5MjJjY2VkYmFlYWI4YWI3YmVmNTM5ZGRkZGQ5M2MxOQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2002-03-22T00:55:35Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2002-03-22T00:55:35Z"}, "message": "mklibgcc.in (SHLIB_MKMAP_OPTS): New variable.\n\n\t* mklibgcc.in (SHLIB_MKMAP_OPTS): New variable.\n\t* mkmap-symver.awk (dotsyms): If set, output .foo as well as foo.\n\t* Makefile.in (SHLIB_MKMAP_OPTS): Pass to mklibgcc.\n\nFrom-SVN: r51153", "tree": {"sha": "4d01fdf916779de9bd2bbbf97797dea6b7e817a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d01fdf916779de9bd2bbbf97797dea6b7e817a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bac015e7922ccedbaeab8ab7bef539ddddd93c19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bac015e7922ccedbaeab8ab7bef539ddddd93c19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bac015e7922ccedbaeab8ab7bef539ddddd93c19", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bac015e7922ccedbaeab8ab7bef539ddddd93c19/comments", "author": null, "committer": null, "parents": [{"sha": "2a78758be56e2dd7d3645219ca3d0d25f648ba2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a78758be56e2dd7d3645219ca3d0d25f648ba2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a78758be56e2dd7d3645219ca3d0d25f648ba2b"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "9939009e608626c63a247414b9a0450dac0c01b0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bac015e7922ccedbaeab8ab7bef539ddddd93c19", "patch": "@@ -4,6 +4,9 @@\n \t* config.gcc (powerpc64-*-linux* <tmake_file>): Drop t-ppcos and\n \tt-ppccomm.  Use t-rs6000 and t-linux64.\n \t(powerpc64-*-gnu* <tmake_file>): Likewise.\n+\t* mklibgcc.in (SHLIB_MKMAP_OPTS): New variable.\n+\t* mkmap-symver.awk (dotsyms): If set, output .foo as well as foo.\n+\t* Makefile.in (SHLIB_MKMAP_OPTS): Pass to mklibgcc.\n \n 2002-03-21  Aldy Hernandez  <aldyh@redhat.com>\n "}, {"sha": "1b2e215f43e9e5e3686328f17a5114cb0ea33cd3", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=bac015e7922ccedbaeab8ab7bef539ddddd93c19", "patch": "@@ -1000,6 +1000,7 @@ libgcc.mk: config.status Makefile mklibgcc $(LIB2ADD) $(LIB2ADD_ST) xgcc$(exeext\n \tSHLIB_EXT='$(SHLIB_EXT)' \\\n \tSHLIB_MULTILIB='$(SHLIB_MULTILIB)' \\\n \tSHLIB_MKMAP='$(SHLIB_MKMAP)' \\\n+\tSHLIB_MKMAP_OPTS='$(SHLIB_MKMAP_OPTS)' \\\n \tSHLIB_MAPFILES='$(SHLIB_MAPFILES)' \\\n \tSHLIB_NM_FLAGS='$(SHLIB_NM_FLAGS)' \\\n \tmkinstalldirs='$(SHELL) $(srcdir)/mkinstalldirs' \\"}, {"sha": "a69f3489a70d68f390647f652401d9ff97446e99", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=bac015e7922ccedbaeab8ab7bef539ddddd93c19", "patch": "@@ -28,6 +28,7 @@\n # SHLIB_LINK\n # SHLIB_MULTILIB\n # SHLIB_MKMAP\n+# SHLIB_MKMAP_OPTS\n # SHLIB_MAPFILES\n # SHLIB_NM_FLAGS\n # SHLIB_INSTALL\n@@ -231,6 +232,7 @@ for file in $LIB2ADD_ST; do\n done\n \n # SHLIB_MKMAP\n+# SHLIB_MKMAP_OPTS\n # SHLIB_MAPFILES\n for ml in $MULTILIBS; do\n   dir=`echo ${ml} | sed -e 's/;.*$//' -e 's/=/$(EQ)/g'`\n@@ -259,7 +261,7 @@ for ml in $MULTILIBS; do\n     mapfile=\"libgcc.map\"\n     echo \"\"\n     echo \"${mapfile}: $SHLIB_MKMAP $SHLIB_MAPFILES $libgcc_sh_objs\"\n-    echo '\t{ $(NM_FOR_TARGET)'\" $SHLIB_NM_FLAGS $libgcc_sh_objs; echo %%; cat $SHLIB_MAPFILES; } | \"'$(AWK)'\" -f $SHLIB_MKMAP > \"'tmp-$@'\n+    echo '\t{ $(NM_FOR_TARGET)'\" $SHLIB_NM_FLAGS $libgcc_sh_objs; echo %%; cat $SHLIB_MAPFILES; } | \"'$(AWK)'\" -f $SHLIB_MKMAP $SHLIB_MKMAP_OPTS > \"'tmp-$@'\n     echo '\tmv tmp-$@ $@'\n   fi\n   shlib_deps=\"$shlib_deps $mapfile\""}, {"sha": "51b6df28ca73456988a4a6e6534fb6f43b8a6ac2", "filename": "gcc/mkmap-symver.awk", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2Fmkmap-symver.awk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bac015e7922ccedbaeab8ab7bef539ddddd93c19/gcc%2Fmkmap-symver.awk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmkmap-symver.awk?ref=bac015e7922ccedbaeab8ab7bef539ddddd93c19", "patch": "@@ -92,7 +92,11 @@ function output(lib) {\n   printf(\"  global:\\n\");\n   for (sym in ver)\n     if ((ver[sym] == lib) && (sym in def))\n-      printf(\"\\t%s;\\n\", sym);\n+      {\n+\tprintf(\"\\t%s;\\n\", sym);\n+\tif (dotsyms)\n+\t  printf(\"\\t.%s;\\n\", sym);\n+      }\n \n   if (inherit[lib])\n     printf(\"} %s;\\n\", inherit[lib]);"}]}