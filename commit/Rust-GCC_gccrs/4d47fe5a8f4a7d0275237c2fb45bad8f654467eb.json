{"sha": "4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGQ0N2ZlNWE4ZjRhN2QwMjc1MjM3YzJmYjQ1YmFkOGY2NTQ0NjdlYg==", "commit": {"author": {"name": "Ruslan Bukin", "email": "br@bsdpad.com", "date": "2018-04-06T20:04:17Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2018-04-06T20:04:17Z"}, "message": "RISC-V: Support for FreeBSD.\n\n\tgcc/\n\t* config.gcc (riscv*-*-freebsd*): Add RISC-V FreeBSD support.\n\t* config/riscv/freebsd.h: New.\n\tlibgcc/\n\t* config.host (riscv*-*-freebsd*): Add RISC-V FreeBSD support.\n\nFrom-SVN: r259190", "tree": {"sha": "db60ed882482561a3235bdd6e0e2e761dc6531cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db60ed882482561a3235bdd6e0e2e761dc6531cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/comments", "author": {"login": "bukinr", "id": 3276682, "node_id": "MDQ6VXNlcjMyNzY2ODI=", "avatar_url": "https://avatars.githubusercontent.com/u/3276682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bukinr", "html_url": "https://github.com/bukinr", "followers_url": "https://api.github.com/users/bukinr/followers", "following_url": "https://api.github.com/users/bukinr/following{/other_user}", "gists_url": "https://api.github.com/users/bukinr/gists{/gist_id}", "starred_url": "https://api.github.com/users/bukinr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bukinr/subscriptions", "organizations_url": "https://api.github.com/users/bukinr/orgs", "repos_url": "https://api.github.com/users/bukinr/repos", "events_url": "https://api.github.com/users/bukinr/events{/privacy}", "received_events_url": "https://api.github.com/users/bukinr/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e889aa0a96c39b567b8d216d7ae73cd684c52b47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e889aa0a96c39b567b8d216d7ae73cd684c52b47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e889aa0a96c39b567b8d216d7ae73cd684c52b47"}], "stats": {"total": 81, "additions": 80, "deletions": 1}, "files": [{"sha": "2e8f06de6cbdb5695fbfaa24afc20519e64d6880", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "patch": "@@ -1,3 +1,9 @@\n+2018-04-06  Ruslan Bukin  <br@bsdpad.com>\n+\t    Kito Cheng  <kito.cheng@gmail.com>\n+\n+\t* config.gcc (riscv*-*-freebsd*): Add RISC-V FreeBSD support.\n+\t* config/riscv/freebsd.h: New.\n+\n 2018-04-06  Chung-Ju Wu  <jasonwucj@gmail.com>\n \n \t* config/nds32/nds32.c (nds32_adjust_insn_length): Refine.\n@@ -10043,4 +10049,6 @@\n \f\n Copyright (C) 2018 Free Software Foundation, Inc.\n \n-Copying and distribu\n+Copying and distribution of this file, with or without modification,\n+are permitted in any medium without royalty provided the copyright\n+notice and this notice are preserved."}, {"sha": "ae19655bf328e29ea4f00966b5060967684a7f1b", "filename": "gcc/config.gcc", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "patch": "@@ -2089,6 +2089,15 @@ riscv*-*-elf* | riscv*-*-rtems*)\n \t  ;;\n \tesac\n \t;;\n+riscv*-*-freebsd*)\n+\ttm_file=\"${tm_file} elfos.h ${fbsd_tm_file} riscv/freebsd.h\"\n+\ttmake_file=\"${tmake_file} riscv/t-riscv\"\n+\tgnu_ld=yes\n+\tgas=yes\n+\t# Force .init_array support.  The configure script cannot always\n+\t# automatically detect that GAS supports it, yet we require it.\n+\tgcc_cv_initfini_array=yes\n+\t;;\n mips*-*-netbsd*)\t\t\t# NetBSD/mips, either endian.\n \ttarget_cpu_default=\"MASK_ABICALLS\"\n \ttm_file=\"elfos.h ${tm_file} mips/elf.h ${nbsd_tm_file} mips/netbsd.h\""}, {"sha": "019b22f63372671f6a4da6e5edd208593c3e1d35", "filename": "gcc/config/riscv/freebsd.h", "status": "added", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/gcc%2Fconfig%2Friscv%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/gcc%2Fconfig%2Friscv%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Ffreebsd.h?ref=4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "patch": "@@ -0,0 +1,54 @@\n+/* Definitions for RISC-V FreeBSD systems with ELF format.\n+   Copyright (C) 2018 Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 3, or (at your option)\n+any later version.\n+\n+GCC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING3.  If not see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#undef WCHAR_TYPE\n+#define WCHAR_TYPE \"int\"\n+\n+#undef WCHAR_TYPE_SIZE\n+#define WCHAR_TYPE_SIZE 32\n+\n+#undef  SUBTARGET_EXTRA_SPECS\n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n+\n+#undef CC1_SPEC\n+#define CC1_SPEC \"%(cc1_cpu) %{profile:-p}\"\n+\n+/* Provide a LINK_SPEC appropriate for FreeBSD.  Here we provide support\n+   for the special GCC options -static and -shared, which allow us to\n+   link things in one of these three modes by applying the appropriate\n+   combinations of options at link-time.\n+\n+   When the -shared link option is used a final link is not being\n+   done.  */\n+\n+#undef LINK_SPEC\n+#define LINK_SPEC \"\t\t\t\t\t\t\\\n+  -melf\" XLEN_SPEC \"lriscv\t\t\t\t\t\\\n+  %{p:%nconsider using `-pg' instead of `-p' with gprof (1) }\t\\\n+  %{v:-V}\t\t\t\t\t\t\t\\\n+  %{assert*} %{R*} %{rpath*} %{defsym*}\t\t\t\t\\\n+  %{shared:-Bshareable %{h*} %{soname*}}\t\t\t\\\n+  %{symbolic:-Bsymbolic}\t\t\t\t\t\\\n+  %{static:-Bstatic}\t\t\t\t\t\t\\\n+  %{!shared:\t\t\t\t\t\t\t\\\n+      %{!static:\t\t\t\t\t\t\\\n+        %{rdynamic:-export-dynamic}\t\t\t\t\\\n+        -dynamic-linker \" FBSD_DYNAMIC_LINKER \"}\t\t\\\n+        %{static:-static}}\""}, {"sha": "a715f0b074e2c71d19e5cd63dc96d889e5bdd53b", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "patch": "@@ -1,3 +1,7 @@\n+2018-04-06  Ruslan Bukin  <br@bsdpad.com>\n+\n+\t* config.host (riscv*-*-freebsd*): Add RISC-V FreeBSD support.\n+\n 2018-03-29  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/85100"}, {"sha": "11b4acaff55e00ee6bd3c182e9da5dc597ac57c4", "filename": "libgcc/config.host", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4d47fe5a8f4a7d0275237c2fb45bad8f654467eb/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=4d47fe5a8f4a7d0275237c2fb45bad8f654467eb", "patch": "@@ -1128,6 +1128,10 @@ riscv*-*-linux*)\n \textra_parts=\"$extra_parts crtbegin.o crtend.o crti.o crtn.o crtendS.o crtbeginT.o\"\n \tmd_unwind_header=riscv/linux-unwind.h\n \t;;\n+riscv*-*-freebsd*)\n+\ttmake_file=\"${tmake_file} riscv/t-softfp${host_address} t-softfp riscv/t-elf riscv/t-elf${host_address}\"\n+\textra_parts=\"$extra_parts crtbegin.o crtend.o crti.o crtn.o crtendS.o crtbeginT.o\"\n+\t;;\n riscv*-*-*)\n \ttmake_file=\"${tmake_file} riscv/t-softfp${host_address} t-softfp riscv/t-elf riscv/t-elf${host_address}\"\n \textra_parts=\"$extra_parts crtbegin.o crtend.o crti.o crtn.o\""}]}