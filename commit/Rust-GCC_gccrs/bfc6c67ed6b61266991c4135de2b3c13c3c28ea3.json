{"sha": "bfc6c67ed6b61266991c4135de2b3c13c3c28ea3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZjNmM2N2VkNmI2MTI2Njk5MWM0MTM1ZGUyYjNjMTNjM2MyOGVhMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-04-21T23:23:39Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-04-21T23:23:39Z"}, "message": "winnt.c (i386_pe_mark_dllimport): Revert previous changes.\n\n\t* config/i386/winnt.c (i386_pe_mark_dllimport): Revert previous\n\tchanges.\n\nFrom-SVN: r65920", "tree": {"sha": "390aa29bb5ae8192066af63ae6241b1b82a79271", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/390aa29bb5ae8192066af63ae6241b1b82a79271"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3/comments", "author": null, "committer": null, "parents": [{"sha": "4f0baa737f2e56b78f81f07efb9c2a55111edfe3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f0baa737f2e56b78f81f07efb9c2a55111edfe3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f0baa737f2e56b78f81f07efb9c2a55111edfe3"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "faad4e5b0bc2dd4c64779caa168c7fb97e036669", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bfc6c67ed6b61266991c4135de2b3c13c3c28ea3", "patch": "@@ -1,3 +1,8 @@\n+2003-04-21  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* config/i386/winnt.c (i386_pe_mark_dllimport): Revert previous\n+\tchanges.\n+\n 2003-04-21  Aldy Hernandez  <aldyh@redhat.com>\n \n         * config/rs6000/rs6000.c (rs6000_override_options): No SPE means"}, {"sha": "c2eac3ac7e2dfbac53e376afc2ba8d27df48820a", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfc6c67ed6b61266991c4135de2b3c13c3c28ea3/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=bfc6c67ed6b61266991c4135de2b3c13c3c28ea3", "patch": "@@ -273,8 +273,7 @@ i386_pe_mark_dllimport (decl)\n   const char *oldname;\n   char  *newname;\n   tree idp;\n-  rtx rtlname;\n-  rtx new_symbol;\n+  rtx rtlname, newrtl;\n \n   rtlname = XEXP (DECL_RTL (decl), 0);\n   if (GET_CODE (rtlname) == SYMBOL_REF)\n@@ -336,11 +335,10 @@ i386_pe_mark_dllimport (decl)\n      identical.  */\n   idp = get_identifier (newname);\n \n-  new_symbol = gen_rtx_SYMBOL_REF (Pmode, IDENTIFIER_POINTER (idp));\n-  XEXP (DECL_RTL (decl), 0)\n-    = ((GET_CODE (XEXP (DECL_RTL (decl), 0)) == MEM)\n-       ? gen_rtx (MEM, Pmode, new_symbol)\n-       : new_symbol);\n+  newrtl = gen_rtx (MEM, Pmode,\n+\t\t    gen_rtx (SYMBOL_REF, Pmode,\n+\t\t\t     IDENTIFIER_POINTER (idp)));\n+  XEXP (DECL_RTL (decl), 0) = newrtl;\n \n   /* Can't treat a pointer to this as a constant address */\n   DECL_NON_ADDR_CONST_P (decl) = 1;"}]}