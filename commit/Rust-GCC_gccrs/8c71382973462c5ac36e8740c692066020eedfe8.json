{"sha": "8c71382973462c5ac36e8740c692066020eedfe8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGM3MTM4Mjk3MzQ2MmM1YWMzNmU4NzQwYzY5MjA2NjAyMGVlZGZlOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-01-27T17:55:55Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-01-27T17:55:55Z"}, "message": "re PR c++/51852 ([c++11] tree check: expected tree_list, have H\u00df\u00e8M\u00d5\u00fe\u00ff\u00f8tx\u00f8ts\u00f8)\n\n\tPR c++/51852\n\t* pt.c (tsubst_pack_expansion): Delete and restore\n\tlocal_specialization whenever need_local_specialization, not just\n\twhen saved_local_specializations is non-NULL.\n\n\t* g++.dg/other/gc5.C: New test.\n\nFrom-SVN: r183637", "tree": {"sha": "92e5f8bacf9bdb2f6ac158d2aa92116d627ca228", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/92e5f8bacf9bdb2f6ac158d2aa92116d627ca228"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c71382973462c5ac36e8740c692066020eedfe8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c71382973462c5ac36e8740c692066020eedfe8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c71382973462c5ac36e8740c692066020eedfe8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c71382973462c5ac36e8740c692066020eedfe8/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b6c71f7771d82ff77e7ab4b622e93e3b83ffe429", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6c71f7771d82ff77e7ab4b622e93e3b83ffe429", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6c71f7771d82ff77e7ab4b622e93e3b83ffe429"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "9753bedb40ce3dc4ddb8bf5c7ca6663bc20ac109", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8c71382973462c5ac36e8740c692066020eedfe8", "patch": "@@ -1,3 +1,10 @@\n+2012-01-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/51852\n+\t* pt.c (tsubst_pack_expansion): Delete and restore\n+\tlocal_specialization whenever need_local_specialization, not just\n+\twhen saved_local_specializations is non-NULL.\n+\n 2012-01-26  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/51370"}, {"sha": "ad2b4dfc73674050864e6c53437bf899584c846a", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=8c71382973462c5ac36e8740c692066020eedfe8", "patch": "@@ -9582,7 +9582,7 @@ tsubst_pack_expansion (tree t, tree args, tsubst_flags_t complain,\n         }\n     }\n \n-  if (saved_local_specializations)\n+  if (need_local_specializations)\n     {\n       htab_delete (local_specializations);\n       local_specializations = saved_local_specializations;"}, {"sha": "31ea283ee4b27ad4beb792d1d767f3ad010207ea", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8c71382973462c5ac36e8740c692066020eedfe8", "patch": "@@ -1,3 +1,8 @@\n+2012-01-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/51852\n+\t* g++.dg/other/gc5.C: New test.\n+\n 2012-01-27  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/50444"}, {"sha": "a369084e00cb0b043e40d25db5c4d0667b0e9f4d", "filename": "gcc/testsuite/g++.dg/other/gc5.C", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fgc5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c71382973462c5ac36e8740c692066020eedfe8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fgc5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fgc5.C?ref=8c71382973462c5ac36e8740c692066020eedfe8", "patch": "@@ -0,0 +1,27 @@\n+// PR c++/51852\n+// { dg-do compile }\n+// { dg-options \"-std=gnu++11 --param ggc-min-heapsize=0 --param ggc-min-expand=0\" }\n+\n+template <typename, typename>\n+class transformed {};\n+\n+template <class R, class F>\n+transformed<F, R> transform (R r, F f);\n+\n+template <typename, typename>\n+class joined {};\n+\n+template <typename T, typename U>\n+joined<T, U> join (T t, U u);\n+\n+template <typename T, typename U, typename V, typename... Rest>\n+auto join (T t, U u, V v, Rest... rest) -> decltype (join (join (t, u), v, rest...));\n+\n+template <typename F, typename... Rs>\n+auto polymorphic_transform (F f, Rs... rs) -> decltype (join (transform(rs, f)...));\n+\n+int\n+main ()\n+{\n+  polymorphic_transform (0, 0, 0);\n+}"}]}