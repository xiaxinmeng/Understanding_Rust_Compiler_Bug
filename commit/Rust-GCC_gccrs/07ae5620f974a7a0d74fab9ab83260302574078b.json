{"sha": "07ae5620f974a7a0d74fab9ab83260302574078b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDdhZTU2MjBmOTc0YTdhMGQ3NGZhYjlhYjgzMjYwMzAyNTc0MDc4Yg==", "commit": {"author": {"name": "Basile Starynkevitch", "email": "basile@starynkevitch.net", "date": "2009-06-17T13:36:47Z"}, "committer": {"name": "Basile Starynkevitch", "email": "bstarynk@gcc.gnu.org", "date": "2009-06-17T13:36:47Z"}, "message": "plugins.texi (Building GCC plugins): Added new section.\n\n2009-06-17  Basile Starynkevitch  <basile@starynkevitch.net>\n\n\t* gcc/doc/plugins.texi (Building GCC plugins): Added new section.\n\nFrom-SVN: r148612", "tree": {"sha": "6c340721081cf9d3139737f992836804eebbe867", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c340721081cf9d3139737f992836804eebbe867"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07ae5620f974a7a0d74fab9ab83260302574078b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07ae5620f974a7a0d74fab9ab83260302574078b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07ae5620f974a7a0d74fab9ab83260302574078b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07ae5620f974a7a0d74fab9ab83260302574078b/comments", "author": {"login": "bstarynk", "id": 90412, "node_id": "MDQ6VXNlcjkwNDEy", "avatar_url": "https://avatars.githubusercontent.com/u/90412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstarynk", "html_url": "https://github.com/bstarynk", "followers_url": "https://api.github.com/users/bstarynk/followers", "following_url": "https://api.github.com/users/bstarynk/following{/other_user}", "gists_url": "https://api.github.com/users/bstarynk/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstarynk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstarynk/subscriptions", "organizations_url": "https://api.github.com/users/bstarynk/orgs", "repos_url": "https://api.github.com/users/bstarynk/repos", "events_url": "https://api.github.com/users/bstarynk/events{/privacy}", "received_events_url": "https://api.github.com/users/bstarynk/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5eb4df45ce442bdb807cc674e45dbc31fdf3d4ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eb4df45ce442bdb807cc674e45dbc31fdf3d4ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5eb4df45ce442bdb807cc674e45dbc31fdf3d4ba"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "7c20d41fb35c802949ed32ef661b0dabf6180b06", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07ae5620f974a7a0d74fab9ab83260302574078b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07ae5620f974a7a0d74fab9ab83260302574078b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=07ae5620f974a7a0d74fab9ab83260302574078b", "patch": "@@ -1,3 +1,7 @@\n+2009-06-17  Basile Starynkevitch  <basile@starynkevitch.net>\n+\n+\t* doc/plugins.texi (Building GCC plugins): Added new section. \n+\n 2009-06-17  Ian Lance Taylor  <iant@google.com>\n \n \t* c-pch.c (get_ident): Don't set size of templ array."}, {"sha": "9ae0a185f69fe2255b41516c4c4ed2596994d8e5", "filename": "gcc/doc/plugins.texi", "status": "modified", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07ae5620f974a7a0d74fab9ab83260302574078b/gcc%2Fdoc%2Fplugins.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07ae5620f974a7a0d74fab9ab83260302574078b/gcc%2Fdoc%2Fplugins.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fplugins.texi?ref=07ae5620f974a7a0d74fab9ab83260302574078b", "patch": "@@ -262,3 +262,37 @@ register_attributes (void *event_data, void *data)\n @}\n \n @end smallexample\n+\n+\n+@section Building GCC plugins\n+\n+If plugins are enabled, GCC installs the headers needed to build a\n+plugin (somehwere in the installation tree, e.g. under\n+@file{/usr/local}).  In particular a @file{plugin/include} directory\n+is installed, containing all the header files needed to build plugins.\n+\n+On most systems, you can query this @code{plugin} directory by\n+invoking @command{gcc -print-file-name=plugin} (replace if needed\n+@command{gcc} with the appropriate program path).\n+\n+The following GNU Makefile excerpt shows how to build a simple plugin:\n+\n+@smallexample\n+GCC=gcc\n+PLUGIN_SOURCE_FILES= plugin1.c plugin2.c\n+PLUGIN_OBJECT_FILES= $(patsubst %.c,%.o,$(PLUGIN_SOURCE_FILES))\n+GCCPLUGINS_DIR:= $(shell $(GCC) -print-file-name=plugin)\n+CFLAGS+= -I$(GCCPLUGINS_DIR)/include -fPIC -O2\n+\n+plugin.so: $(PLUGIN_OBJECT_FILES)\n+   $(GCC) -shared $^ -o $@\n+@end smallexample\n+\n+A single source file plugin may be built with @code{gcc -I`gcc\n+-print-file-name=plugin`/include -fPIC -shared -O2 plugin.c -o\n+plugin.so}, using backquote shell syntax to query the @file{plugin}\n+directory.\n+\n+Plugins needing to use @command{gengtype} require a GCC build\n+directory for the same version of GCC that they will be linked\n+against."}]}