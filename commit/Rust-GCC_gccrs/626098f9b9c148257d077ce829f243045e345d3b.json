{"sha": "626098f9b9c148257d077ce829f243045e345d3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjI2MDk4ZjliOWMxNDgyNTdkMDc3Y2U4MjlmMjQzMDQ1ZTM0NWQzYg==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2003-02-10T05:00:17Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2003-02-10T05:00:17Z"}, "message": "[multiple changes]\n\n2003-02-09  Nick Clifton  <nickc@redhat.com>\n            Aldy Hernandez  <aldyh@redhat.com>\n\n        * config/rs6000/spe.md: spe_evlhhesplat, spe_evlhhossplat,\n        spe_evlhhousplat, spe_evlwhsplat, spe_evlwwsplat, spe_evldd,\n        spe_evldh, spe_evldw, spe_evlwhe, spe_evlwhos, spe_evlwhou,\n        spe_evstdd, spe_evstdh, spe_evstdw, spe_evstdwx, spe_evstwhe,\n        spe_evstwho, spe_evstwwe, spe_evstwwo: Fix syntax to match newest\n        docs.  Add range test for immediate value.\n\n2003-02-09  Aldy Hernandez  <aldyh@redhat.com>\n\n        Rename spe_evxor to xorv2si3.\n        (xorv4hi3): New.\n        (xorv1di3): New.\n\nFrom-SVN: r62621", "tree": {"sha": "9fd9c26e25dacef1fe1d0a44e9e5ba6781735135", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fd9c26e25dacef1fe1d0a44e9e5ba6781735135"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/626098f9b9c148257d077ce829f243045e345d3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/626098f9b9c148257d077ce829f243045e345d3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/626098f9b9c148257d077ce829f243045e345d3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/626098f9b9c148257d077ce829f243045e345d3b/comments", "author": null, "committer": null, "parents": [{"sha": "8d23a2c818a1ffa4c6533f811695db4d3e3c9baf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d23a2c818a1ffa4c6533f811695db4d3e3c9baf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d23a2c818a1ffa4c6533f811695db4d3e3c9baf"}], "stats": {"total": 112, "additions": 75, "deletions": 37}, "files": [{"sha": "f46f6234cf9bdc7e1a93e840ec5f45f5bfb03ea2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/626098f9b9c148257d077ce829f243045e345d3b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/626098f9b9c148257d077ce829f243045e345d3b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=626098f9b9c148257d077ce829f243045e345d3b", "patch": "@@ -1,3 +1,19 @@\n+2003-02-09  Nick Clifton  <nickc@redhat.com>\n+            Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * config/rs6000/spe.md: spe_evlhhesplat, spe_evlhhossplat,\n+        spe_evlhhousplat, spe_evlwhsplat, spe_evlwwsplat, spe_evldd,\n+        spe_evldh, spe_evldw, spe_evlwhe, spe_evlwhos, spe_evlwhou,\n+        spe_evstdd, spe_evstdh, spe_evstdw, spe_evstdwx, spe_evstwhe,\n+        spe_evstwho, spe_evstwwe, spe_evstwwo: Fix syntax to match newest\n+        docs.  Add range test for immediate value.\n+\n+2003-02-09  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        Rename spe_evxor to xorv2si3.\n+        (xorv4hi3): New.\n+        (xorv1di3): New.\n+\n 2003-02-10  Glen Nakamura  <glen@imodulo.com>\n \t\t\n \t* doc/extend.texi (C++98 Thread-Local Edits): Add missing @item"}, {"sha": "98b64deb4d24dfd9c43e4d88115dace77df9321a", "filename": "gcc/config/rs6000/spe.md", "status": "modified", "additions": 59, "deletions": 37, "changes": 96, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/626098f9b9c148257d077ce829f243045e345d3b/gcc%2Fconfig%2Frs6000%2Fspe.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/626098f9b9c148257d077ce829f243045e345d3b/gcc%2Fconfig%2Frs6000%2Fspe.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fspe.md?ref=626098f9b9c148257d077ce829f243045e345d3b", "patch": "@@ -283,12 +283,12 @@\n    (set_attr  \"length\" \"4\")])\n \n (define_insn \"spe_evlhhesplat\"\n-  [(set (match_operand:V2SI 0 \"gpc_reg_operand\" \"=r\")\n-\t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n+  [(set (match_operand:V2SI 0 \"gpc_reg_operand\"  \"=r\")\n+\t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\"   \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 509)]\n-  \"TARGET_SPE\"\n-  \"evlhhesplat %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlhhesplat %0,%2*2(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -307,8 +307,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 511)]\n-  \"TARGET_SPE\"\n-  \"evlhhossplat %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlhhossplat %0,%2*2(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -327,8 +327,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 513)]\n-  \"TARGET_SPE\"\n-  \"evlhhousplat %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlhhousplat %0,%2*2(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -347,8 +347,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 515)]\n-  \"TARGET_SPE\"\n-  \"evlwhsplat %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlwhsplat %0,%2*4(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -367,8 +367,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 517)]\n-  \"TARGET_SPE\"\n-  \"evlwwsplat %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlwwsplat %0,%2*4(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -581,7 +581,9 @@\n   [(set_attr \"type\" \"vecsimple\")\n    (set_attr  \"length\" \"4\")])\n \n-(define_insn \"spe_evxor\"\n+;; vector xors\n+\n+(define_insn \"xorv2si3\"\n   [(set (match_operand:V2SI 0 \"gpc_reg_operand\" \"=r\")\n         (xor:V2SI (match_operand:V2SI 1 \"gpc_reg_operand\" \"r\")\n \t\t  (match_operand:V2SI 2 \"gpc_reg_operand\" \"r\")))]\n@@ -590,6 +592,26 @@\n   [(set_attr \"type\" \"vecsimple\")\n    (set_attr  \"length\" \"4\")])\n \n+(define_insn \"xorv4hi3\"\n+  [(set (match_operand:V4HI 0 \"gpc_reg_operand\" \"=r\")\n+        (xor:V4HI (match_operand:V4HI 1 \"gpc_reg_operand\" \"r\")\n+\t\t  (match_operand:V4HI 2 \"gpc_reg_operand\" \"r\")))]\n+  \"TARGET_SPE\"\n+  \"evxor %0,%1,%2\"\n+  [(set_attr \"type\" \"vecsimple\")\n+   (set_attr  \"length\" \"4\")])\n+\n+(define_insn \"xorv1di3\"\n+  [(set (match_operand:V1DI 0 \"gpc_reg_operand\" \"=r\")\n+        (xor:V1DI (match_operand:V1DI 1 \"gpc_reg_operand\" \"r\")\n+\t\t  (match_operand:V1DI 2 \"gpc_reg_operand\" \"r\")))]\n+  \"TARGET_SPE\"\n+  \"evxor %0,%1,%2\"\n+  [(set_attr \"type\" \"vecsimple\")\n+   (set_attr  \"length\" \"4\")])\n+\n+;; end of vector xors\n+\n (define_insn \"spe_evfsabs\"\n   [(set (match_operand:V2SF 0 \"gpc_reg_operand\" \"=r\")\n         (abs:V2SF (match_operand:V2SF 1 \"gpc_reg_operand\" \"r\")))]\n@@ -747,7 +769,7 @@\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 544)]\n   \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n-  \"evldd %0,%1,%2\"\n+  \"evldd %0,%2*8(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -767,7 +789,7 @@\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 546)]\n   \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n-  \"evldh %0,%1,%2\"\n+  \"evldh %0,%2*8(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -786,8 +808,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 548)]\n-  \"TARGET_SPE\"\n-  \"evldw %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evldw %0,%2*8(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -806,8 +828,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 550)]\n-  \"TARGET_SPE\"\n-  \"evlwhe %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlwhe %0,%2*4(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -826,8 +848,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 552)]\n-  \"TARGET_SPE\"\n-  \"evlwhos %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlwhos %0,%2*4(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -846,8 +868,8 @@\n \t(mem:V2SI (plus:SI (match_operand:SI 1 \"gpc_reg_operand\" \"b\")\n \t\t\t   (match_operand:QI 2 \"immediate_operand\" \"i\"))))\n    (unspec [(const_int 0)] 554)]\n-  \"TARGET_SPE\"\n-  \"evlwhou %0,%1,%2\"\n+  \"TARGET_SPE && INTVAL (operands[2]) >= 0 && INTVAL (operands[2]) <= 31\"\n+  \"evlwhou %0,%2*4(%1)\"\n   [(set_attr \"type\" \"vecload\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -1990,8 +2012,8 @@\n \t\t\t   (match_operand:QI 1 \"immediate_operand\" \"i\")))\n \t(match_operand:V2SI 2 \"gpc_reg_operand\" \"r\"))\n    (unspec [(const_int 0)] 686)]\n-  \"TARGET_SPE\"\n-  \"evstdd %2,%0,%1\"\n+  \"TARGET_SPE && INTVAL (operands[1]) >= 0 && INTVAL (operands[1]) <= 31\"\n+  \"evstdd %2,%1*8(%0)\"\n   [(set_attr \"type\" \"vecstore\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -2010,8 +2032,8 @@\n \t\t\t   (match_operand:QI 1 \"immediate_operand\" \"i\")))\n \t(match_operand:V2SI 2 \"gpc_reg_operand\" \"r\"))\n    (unspec [(const_int 0)] 688)]\n-  \"TARGET_SPE\"\n-  \"evstdh %2,%0,%1\"\n+  \"TARGET_SPE && INTVAL (operands[1]) >= 0 && INTVAL (operands[1]) <= 31\"\n+  \"evstdh %2,%1*8(%0)\"\n   [(set_attr \"type\" \"vecstore\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -2030,8 +2052,8 @@\n \t\t\t   (match_operand:QI 1 \"immediate_operand\" \"i\")))\n \t(match_operand:V2SI 2 \"gpc_reg_operand\" \"r\"))\n    (unspec [(const_int 0)] 690)]\n-  \"TARGET_SPE\"\n-  \"evstdw %2,%0,%1\"\n+  \"TARGET_SPE && INTVAL (operands[1]) >= 0 && INTVAL (operands[1]) <= 31\"\n+  \"evstdw %2,%1*8(%0)\"\n   [(set_attr \"type\" \"vecstore\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -2050,8 +2072,8 @@\n \t\t\t   (match_operand:QI 1 \"immediate_operand\" \"i\")))\n \t(match_operand:V2SI 2 \"gpc_reg_operand\" \"r\"))\n    (unspec [(const_int 0)] 692)]\n-  \"TARGET_SPE\"\n-  \"evstwhe %2,%0,%1\"\n+  \"TARGET_SPE && INTVAL (operands[1]) >= 0 && INTVAL (operands[1]) <= 31\"\n+  \"evstwhe %2,%1*4(%0)\"\n   [(set_attr \"type\" \"vecstore\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -2070,8 +2092,8 @@\n \t\t\t   (match_operand:QI 1 \"immediate_operand\" \"i\")))\n \t(match_operand:V2SI 2 \"gpc_reg_operand\" \"r\"))\n    (unspec [(const_int 0)] 694)]\n-  \"TARGET_SPE\"\n-  \"evstwho %2,%0,%1\"\n+  \"TARGET_SPE && INTVAL (operands[1]) >= 0 && INTVAL (operands[1]) <= 31\"\n+  \"evstwho %2,%1*4(%0)\"\n   [(set_attr \"type\" \"vecstore\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -2090,8 +2112,8 @@\n \t\t\t   (match_operand:QI 1 \"immediate_operand\" \"i\")))\n \t(match_operand:V2SI 2 \"gpc_reg_operand\" \"r\"))\n    (unspec [(const_int 0)] 696)]\n-  \"TARGET_SPE\"\n-  \"evstwwe %2,%0,%1\"\n+  \"TARGET_SPE && INTVAL (operands[1]) >= 0 && INTVAL (operands[1]) <= 31\"\n+  \"evstwwe %2,%1*4(%0)\"\n   [(set_attr \"type\" \"vecstore\")\n    (set_attr  \"length\" \"4\")])\n \n@@ -2110,8 +2132,8 @@\n \t\t\t   (match_operand:QI 1 \"immediate_operand\" \"i\")))\n \t(match_operand:V2SI 2 \"gpc_reg_operand\" \"r\"))\n    (unspec [(const_int 0)] 698)]\n-  \"TARGET_SPE\"\n-  \"evstwwo %2,%0,%1\"\n+  \"TARGET_SPE && INTVAL (operands[1]) >= 0 && INTVAL (operands[1]) <= 31\"\n+  \"evstwwo %2,%1*4(%0)\"\n   [(set_attr \"type\" \"vecstore\")\n    (set_attr  \"length\" \"4\")])\n "}]}