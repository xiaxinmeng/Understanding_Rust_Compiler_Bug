{"sha": "4ed15f9ddc919597c1ae0071bc6d61ac34b4849e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGVkMTVmOWRkYzkxOTU5N2MxYWUwMDcxYmM2ZDYxYWMzNGI0ODQ5ZQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-26T17:27:01Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-11-26T17:27:01Z"}, "message": "(PWDCMD): New variable, set specially for Apollos.\n\nUse it to get the working dir.\n\nFrom-SVN: r2808", "tree": {"sha": "09f717f1211cea7574ddadc6aa91c58d256390be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/09f717f1211cea7574ddadc6aa91c58d256390be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4ed15f9ddc919597c1ae0071bc6d61ac34b4849e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ed15f9ddc919597c1ae0071bc6d61ac34b4849e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ed15f9ddc919597c1ae0071bc6d61ac34b4849e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ed15f9ddc919597c1ae0071bc6d61ac34b4849e/comments", "author": null, "committer": null, "parents": [{"sha": "d038420ea8bfbe2c4b7253d718ef00791cb5e78b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d038420ea8bfbe2c4b7253d718ef00791cb5e78b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d038420ea8bfbe2c4b7253d718ef00791cb5e78b"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "7924ff1f18e50575cf050126040f2793a9088879", "filename": "gcc/fixincludes", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ed15f9ddc919597c1ae0071bc6d61ac34b4849e/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ed15f9ddc919597c1ae0071bc6d61ac34b4849e/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=4ed15f9ddc919597c1ae0071bc6d61ac34b4849e", "patch": "@@ -26,6 +26,16 @@ export TERM\n EXINIT=set\n export EXINIT\n \n+# Define PWDCMD as a command to use to get the working dir\n+# in the form that we want.\n+PWDCMD=pwd\n+case \"`pwd`\" in\n+//*)\n+\t# On an Apollo, discard everything before `/usr'.\n+\tPWDCMD=\"(pwd) | sed -e 's,.*/usr/,/usr/,'\"\n+\t;;\n+esac\n+\n # Directory in which to store the results.\n LIB=${1?\"fixincludes: output directory not specified\"}\n \n@@ -35,7 +45,7 @@ if [ ! -d $LIB ]; then\n fi\n \n # Make LIB absolute.\n-cd $LIB; LIB=`pwd`\n+cd $LIB; LIB=`${PWDCMD}`\n \n # Fail if no arg to specify a directory for the output.\n if [ x$1 = x ]\n@@ -123,7 +133,7 @@ if $LINKS; then\n   for file in $files; do\n     dest=`ls -ld $file | sed -n 's/.*-> //p'`\n     if [ \"$dest\" ]; then    \n-      cwd=`pwd`\n+      cwd=`${PWDCMD}`\n       # In case $dest is relative, get to $file's dir first.\n       cd ${INPUT}\n       cd `echo ./$file | sed -n 's&[^/]*$&&p'`\n@@ -133,7 +143,7 @@ if $LINKS; then\n       if [ $? = 0 ]; then\n \tcd $dest\n \t# X gets the dir that the link actually leads to.\n-\tx=`pwd`\n+\tx=`${PWDCMD}`\n \t# If a link points to ., make a similar link to .\n \tif [ $x = $INPUT ]; then\n \t  echo $file '->' . ': Making link'"}]}