{"sha": "a1f6eff20e3bb32c5051e77093ee28faec2abca0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTFmNmVmZjIwZTNiYjMyYzUwNTFlNzcwOTNlZTI4ZmFlYzJhYmNhMA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-01-24T12:19:36Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-01-24T12:19:36Z"}, "message": "Remove bogus __has_include controlling macro\n\nI noticed, but ignored this code when addressing p80005, but having\nfixed up defined(X) on the modules branch, I could see where it came\nfrom, and it's obviously wrong as we've just pulled out a string\ncontant from the token.\n\n\t* expr.c (parse_has_include): Remove bogus controlling macro code.", "tree": {"sha": "2d0e39fd06f67a7cdae178eaa9c2dd86289a9be4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d0e39fd06f67a7cdae178eaa9c2dd86289a9be4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a1f6eff20e3bb32c5051e77093ee28faec2abca0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1f6eff20e3bb32c5051e77093ee28faec2abca0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1f6eff20e3bb32c5051e77093ee28faec2abca0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1f6eff20e3bb32c5051e77093ee28faec2abca0/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e8e66971cdc6d1390d47a227899e2e340ff44d66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8e66971cdc6d1390d47a227899e2e340ff44d66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8e66971cdc6d1390d47a227899e2e340ff44d66"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "e84c0da4f185e5020fc24428e338b6d249514db7", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1f6eff20e3bb32c5051e77093ee28faec2abca0/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1f6eff20e3bb32c5051e77093ee28faec2abca0/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=a1f6eff20e3bb32c5051e77093ee28faec2abca0", "patch": "@@ -1,3 +1,7 @@\n+2020-01-24  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* expr.c (parse_has_include): Remove bogus controlling macro code.\n+\n 2020-01-20  Nathan Sidwell  <nathan@acm.org>\n \n \tPR preprocessor/80005"}, {"sha": "6c56803e3b06e3f71774a9182e134abee1a9e358", "filename": "libcpp/expr.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1f6eff20e3bb32c5051e77093ee28faec2abca0/libcpp%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1f6eff20e3bb32c5051e77093ee28faec2abca0/libcpp%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fexpr.c?ref=a1f6eff20e3bb32c5051e77093ee28faec2abca0", "patch": "@@ -2211,14 +2211,12 @@ parse_has_include (cpp_reader *pfile, cpp_hashnode *op, include_type type)\n   pfile->state.angled_headers = false;\n \n   bool bracket = token->type != CPP_STRING;\n-  cpp_hashnode *node = NULL;\n   char *fname = NULL;\n   if (token->type == CPP_STRING || token->type == CPP_HEADER_NAME)\n     {\n       fname = XNEWVEC (char, token->val.str.len - 1);\n       memcpy (fname, token->val.str.text + 1, token->val.str.len - 2);\n       fname[token->val.str.len - 2] = '\\0';\n-      node = token->val.node.node;\n     }\n   else if (token->type == CPP_LESS)\n     fname = _cpp_bracket_include (pfile);\n@@ -2241,8 +2239,5 @@ parse_has_include (cpp_reader *pfile, cpp_hashnode *op, include_type type)\n     cpp_error (pfile, CPP_DL_ERROR,\n \t       \"missing ')' after \\\"%s\\\" operand\", NODE_NAME (op));\n \n-  if (node)\n-    pfile->mi_ind_cmacro = node;\n-\n   return result;\n }"}]}