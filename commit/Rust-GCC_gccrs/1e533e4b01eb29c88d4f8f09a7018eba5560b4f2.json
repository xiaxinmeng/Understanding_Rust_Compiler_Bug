{"sha": "1e533e4b01eb29c88d4f8f09a7018eba5560b4f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU1MzNlNGIwMWViMjljODhkNGY4ZjA5YTcwMThlYmE1NTYwYjRmMg==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2002-04-03T02:33:07Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-04-03T02:33:07Z"}, "message": "builtins.c (expand_builtin_prefetch): Force op0 pointer to Pmode if POINTERS_EXTEND_UNSIGNED is defined.\n\n        * builtins.c (expand_builtin_prefetch): Force op0 pointer to Pmode\n        if POINTERS_EXTEND_UNSIGNED is defined.\n\nFrom-SVN: r51778", "tree": {"sha": "792e8b94d293b5d0cc6807c3f0bab86d35f6ceea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/792e8b94d293b5d0cc6807c3f0bab86d35f6ceea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2/comments", "author": null, "committer": null, "parents": [{"sha": "40e5b283996d0f4856d7c530caf390f2e0c86daf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40e5b283996d0f4856d7c530caf390f2e0c86daf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40e5b283996d0f4856d7c530caf390f2e0c86daf"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "55596999468a64c34cdebdd8b5913c24991dd3f9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e533e4b01eb29c88d4f8f09a7018eba5560b4f2", "patch": "@@ -1,3 +1,8 @@\n+2002-04-02  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* builtins.c (expand_builtin_prefetch): Force op0 pointer to Pmode\n+\tif POINTERS_EXTEND_UNSIGNED is defined.\n+\n 2002-04-02  Richard Henderson  <rth@redhat.com>\n \n \tPR opt/3967"}, {"sha": "dcbc6dab23e5558c6efa3bb0811f9f5b3e107829", "filename": "gcc/builtins.c", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e533e4b01eb29c88d4f8f09a7018eba5560b4f2/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=1e533e4b01eb29c88d4f8f09a7018eba5560b4f2", "patch": "@@ -787,10 +787,17 @@ expand_builtin_prefetch (arglist)\n #ifdef HAVE_prefetch\n   if (HAVE_prefetch)\n     {\n-      if (! (*insn_data[(int)CODE_FOR_prefetch].operand[0].predicate)\n-\t    (op0,\n-\t     insn_data[(int)CODE_FOR_prefetch].operand[0].mode))\n-        op0 = force_reg (Pmode, op0);\n+      if ((! (*insn_data[(int)CODE_FOR_prefetch].operand[0].predicate)\n+\t     (op0,\n+\t      insn_data[(int)CODE_FOR_prefetch].operand[0].mode)) ||\n+          (GET_MODE(op0) != Pmode))\n+        {\n+#ifdef POINTERS_EXTEND_UNSIGNED\n+\t  if (GET_MODE(op0) != Pmode)\n+\t    op0 = convert_memory_address (Pmode, op0);\n+#endif\n+          op0 = force_reg (Pmode, op0);\n+        }\n       emit_insn (gen_prefetch (op0, op1, op2));\n     }\n   else"}]}