{"sha": "ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmEyYmFhNTVhMzRhNzVkZGRlMDJhM2FjMDVkYWY4MDVmYzQxM2UxYw==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2004-11-23T01:22:58Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2004-11-23T01:22:58Z"}, "message": "i386.h (TARGET_USE_FANCY_MATH_387): New macro.\n\n\n\t* config/i386/i386.h (TARGET_USE_FANCY_MATH_387): New macro.\n\t* config/i386/i386.c (override_options):  Set MASK_NO_FANCY_MATH_387\n\tautomatically for targets without TARGET_80387.\n\t* config/i386/i386.md (sqrtsf2, sqrtsf2_1, sqrtsf2_i387, sqrtdf2,\n\tsqrtdf2_1, sqrtdf2_i387, *sqrtextendsfdf2, sqrtxf2,\n\t*sqrtextenddfxf2, *sqrtextendsfxf2, fpremxf4, fmodsf3, fmoddf3,\n\tfmodxf3, fprem1xf4, dremsf3, dremdf3, dremxf3, *sindf2, *sinsf2,\n\t*sinextendsfdf2, *sinxf2, *cosdf2, *cossf2, *cosextendsfdf2,\n\t*cosxf2, sincosdf3, sincossf3, *sincosextendsfdf3, sincosxf3,\n\t*tandf3_1, tandf2, *tansf3_1, tansf2, *tanxf3_1, tanxf2,\n\tatan2df3_1, atan2df3, atandf2, atan2sf3_1, atan2sf3, atansf2,\n\tatan2xf3_1, atan2xf3, atanxf2, asindf2, asinsf2, asinxf2,\n\tacosdf2, acossf2, acosxf2, fyl2x_xf3, logsf2, logdf2, logxf2,\n\tlog10sf2, log10df2, log10xf2, log2sf2, log2df2, log2xf2,\n\tfyl2xp1_xf3, log1psf2, log1pdf2, log1pxf2, *fxtractxf3, logbsf2,\n\tlogbdf2, logbxf2, ilogbsi2, *f2xm1xf2, *fscalexf4, expsf2,\n\texpdf2, expxf2, exp10sf2, exp10df2, exp10xf2, exp2sf2, exp2df2,\n\texp2xf2, expm1df2, expm1sf2, expm1xf2, frndintxf2, rintdf2,\n\trintsf2, rintxf2, frndintxf2_floor, floordf2, floorsf2,\n\tfloorxf2, frndintxf2_ceil, ceildf2, ceilsf2, ceilxf2,\n\tfrndintxf2_trunc, btruncdf2, btruncsf2, btruncxf2,\n\tfrndintxf2_mask_pm, nearbyintdf2, nearbyintsf2, nearbyintxf2):\n\tSimplify conditionals using TARGET_USE_FANCY_MATH_387.\n\nFrom-SVN: r91061", "tree": {"sha": "c2a2663088f6e8021d186728d2e22cbdd77098bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2a2663088f6e8021d186728d2e22cbdd77098bb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/comments", "author": null, "committer": null, "parents": [{"sha": "5a25e0c5ec1acfd8588b1a7a896dc9aa81e5ab55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a25e0c5ec1acfd8588b1a7a896dc9aa81e5ab55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a25e0c5ec1acfd8588b1a7a896dc9aa81e5ab55"}], "stats": {"total": 242, "additions": 138, "deletions": 104}, "files": [{"sha": "8a0ec6276cbfaa44e57aa55484842ff3bac5bfe7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "patch": "@@ -1,3 +1,29 @@\n+2004-11-22  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* config/i386/i386.h (TARGET_USE_FANCY_MATH_387): New macro.\n+\t* config/i386/i386.c (override_options):  Set MASK_NO_FANCY_MATH_387\n+\tautomatically for targets without TARGET_80387.\n+\t* config/i386/i386.md (sqrtsf2, sqrtsf2_1, sqrtsf2_i387, sqrtdf2,\n+\tsqrtdf2_1, sqrtdf2_i387, *sqrtextendsfdf2, sqrtxf2,\n+\t*sqrtextenddfxf2, *sqrtextendsfxf2, fpremxf4, fmodsf3, fmoddf3,\n+\tfmodxf3, fprem1xf4, dremsf3, dremdf3, dremxf3, *sindf2, *sinsf2,\n+\t*sinextendsfdf2, *sinxf2, *cosdf2, *cossf2, *cosextendsfdf2,\n+\t*cosxf2, sincosdf3, sincossf3, *sincosextendsfdf3, sincosxf3,\n+\t*tandf3_1, tandf2, *tansf3_1, tansf2, *tanxf3_1, tanxf2,\n+\tatan2df3_1, atan2df3, atandf2, atan2sf3_1, atan2sf3, atansf2,\n+\tatan2xf3_1, atan2xf3, atanxf2, asindf2, asinsf2, asinxf2,\n+\tacosdf2, acossf2, acosxf2, fyl2x_xf3, logsf2, logdf2, logxf2,\n+\tlog10sf2, log10df2, log10xf2, log2sf2, log2df2, log2xf2,\n+\tfyl2xp1_xf3, log1psf2, log1pdf2, log1pxf2, *fxtractxf3, logbsf2,\n+\tlogbdf2, logbxf2, ilogbsi2, *f2xm1xf2, *fscalexf4, expsf2,\n+\texpdf2, expxf2, exp10sf2, exp10df2, exp10xf2, exp2sf2, exp2df2,\n+\texp2xf2, expm1df2, expm1sf2, expm1xf2, frndintxf2, rintdf2,\n+\trintsf2, rintxf2, frndintxf2_floor, floordf2, floorsf2, \n+\tfloorxf2, frndintxf2_ceil, ceildf2, ceilsf2, ceilxf2,\n+\tfrndintxf2_trunc, btruncdf2, btruncsf2, btruncxf2,\n+\tfrndintxf2_mask_pm, nearbyintdf2, nearbyintsf2, nearbyintxf2):\n+\tSimplify conditionals using TARGET_USE_FANCY_MATH_387.\n+\n 2004-11-22  Dale Johannesen  <dalej@apple.com>\n \n \t* config/darwin.h (JUMP_TABLES_IN_TEXT_SECTION):  Conditionalize"}, {"sha": "adb4e5ba32ec628595143d0e4cab36df98b7d367", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "patch": "@@ -1482,6 +1482,11 @@ override_options (void)\n   if (x86_arch_always_fancy_math_387 & (1 << ix86_arch))\n     target_flags &= ~MASK_NO_FANCY_MATH_387;\n \n+  /* Likewise, if the target doesn't have a 387, or we've specified\n+     software floating point, don't use 387 inline instrinsics.  */\n+  if (!TARGET_80387)\n+    target_flags |= MASK_NO_FANCY_MATH_387;\n+\n   /* Turn on SSE2 builtins for -msse3.  */\n   if (TARGET_SSE3)\n     target_flags |= MASK_SSE2;"}, {"sha": "e4761f971952343e769a92ed2d6bbbd2df4bae62", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "patch": "@@ -177,6 +177,9 @@ extern int target_flags;\n    This is because FreeBSD lacks these in the math-emulator-code */\n #define TARGET_NO_FANCY_MATH_387 (target_flags & MASK_NO_FANCY_MATH_387)\n \n+/* Generate 387 floating point intrinsics for the current target.  */\n+#define TARGET_USE_FANCY_MATH_387 (! TARGET_NO_FANCY_MATH_387)\n+\n /* Don't create frame pointers for leaf functions */\n #define TARGET_OMIT_LEAF_FRAME_POINTER \\\n   (target_flags & MASK_OMIT_LEAF_FRAME_POINTER)"}, {"sha": "dd5cf13ae7fa2915012f6dabf0220bdee666655f", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 104, "deletions": 104, "changes": 208, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba2baa55a34a75ddde02a3ac05daf805fc413e1c/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=ba2baa55a34a75ddde02a3ac05daf805fc413e1c", "patch": "@@ -14844,7 +14844,7 @@\n (define_expand \"sqrtsf2\"\n   [(set (match_operand:SF 0 \"register_operand\" \"\")\n \t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"\")))]\n-  \"(! TARGET_NO_FANCY_MATH_387 && TARGET_80387) || TARGET_SSE_MATH\"\n+  \"TARGET_USE_FANCY_MATH_387 || TARGET_SSE_MATH\"\n {\n   if (!TARGET_SSE_MATH)\n     operands[1] = force_reg (SFmode, operands[1]);\n@@ -14853,7 +14853,7 @@\n (define_insn \"sqrtsf2_1\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f#x,x#f\")\n \t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"0#x,xm#f\")))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && (TARGET_SSE_MATH && TARGET_MIX_SSE_I387)\"\n   \"@\n    fsqrt\n@@ -14874,7 +14874,7 @@\n (define_insn \"sqrtsf2_i387\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(sqrt:SF (match_operand:SF 1 \"register_operand\" \"0\")))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && !TARGET_SSE_MATH\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14884,7 +14884,7 @@\n (define_expand \"sqrtdf2\"\n   [(set (match_operand:DF 0 \"register_operand\" \"\")\n \t(sqrt:DF (match_operand:DF 1 \"nonimmediate_operand\" \"\")))]\n-  \"(! TARGET_NO_FANCY_MATH_387 && TARGET_80387)\n+  \"TARGET_USE_FANCY_MATH_387\n    || (TARGET_SSE2 && TARGET_SSE_MATH)\"\n {\n   if (!TARGET_SSE2 || !TARGET_SSE_MATH)\n@@ -14894,7 +14894,7 @@\n (define_insn \"sqrtdf2_1\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f#Y,Y#f\")\n \t(sqrt:DF (match_operand:DF 1 \"nonimmediate_operand\" \"0#Y,Ym#f\")))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && (TARGET_SSE2 && TARGET_SSE_MATH && TARGET_MIX_SSE_I387)\"\n   \"@\n    fsqrt\n@@ -14915,7 +14915,7 @@\n (define_insn \"sqrtdf2_i387\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(sqrt:DF (match_operand:DF 1 \"register_operand\" \"0\")))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && (!TARGET_SSE2 || !TARGET_SSE_MATH)\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14926,7 +14926,7 @@\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(sqrt:DF (float_extend:DF\n \t\t  (match_operand:SF 1 \"register_operand\" \"0\"))))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && !(TARGET_SSE2 && TARGET_SSE_MATH)\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14936,7 +14936,7 @@\n (define_insn \"sqrtxf2\"\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(sqrt:XF (match_operand:XF 1 \"register_operand\" \"0\")))]\n-  \"TARGET_80387 && !TARGET_NO_FANCY_MATH_387 \n+  \"TARGET_USE_FANCY_MATH_387 \n    && (TARGET_IEEE_FP || flag_unsafe_math_optimizations) \"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14947,7 +14947,7 @@\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(sqrt:XF (float_extend:XF\n \t\t  (match_operand:DF 1 \"register_operand\" \"0\"))))]\n-  \"TARGET_80387 && !TARGET_NO_FANCY_MATH_387\"\n+  \"TARGET_USE_FANCY_MATH_387\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n    (set_attr \"mode\" \"XF\")\n@@ -14957,7 +14957,7 @@\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(sqrt:XF (float_extend:XF\n \t\t  (match_operand:SF 1 \"register_operand\" \"0\"))))]\n-  \"TARGET_80387 && !TARGET_NO_FANCY_MATH_387\"\n+  \"TARGET_USE_FANCY_MATH_387\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n    (set_attr \"mode\" \"XF\")\n@@ -14973,7 +14973,7 @@\n \t\t   UNSPEC_FPREM_U))\n    (set (reg:CCFP FPSR_REG)\n \t(unspec:CCFP [(const_int 0)] UNSPEC_NOP))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fprem\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -14983,7 +14983,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))\n    (use (match_operand:SF 2 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -15007,7 +15007,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))\n    (use (match_operand:DF 2 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -15031,7 +15031,7 @@\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))\n    (use (match_operand:XF 2 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -15056,7 +15056,7 @@\n \t\t   UNSPEC_FPREM1_U))\n    (set (reg:CCFP FPSR_REG)\n \t(unspec:CCFP [(const_int 0)] UNSPEC_NOP))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fprem1\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15066,7 +15066,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))\n    (use (match_operand:SF 2 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -15090,7 +15090,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))\n    (use (match_operand:DF 2 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -15114,7 +15114,7 @@\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))\n    (use (match_operand:XF 2 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx label = gen_label_rtx ();\n@@ -15132,7 +15132,7 @@\n (define_insn \"*sindf2\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"0\")] UNSPEC_SIN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsin\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15141,7 +15141,7 @@\n (define_insn \"*sinsf2\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"0\")] UNSPEC_SIN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsin\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15152,7 +15152,7 @@\n \t(unspec:DF [(float_extend:DF\n \t\t     (match_operand:SF 1 \"register_operand\" \"0\"))]\n \t\t   UNSPEC_SIN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsin\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15161,7 +15161,7 @@\n (define_insn \"*sinxf2\"\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_operand:XF 1 \"register_operand\" \"0\")] UNSPEC_SIN))]\n-  \"TARGET_80387 && !TARGET_NO_FANCY_MATH_387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsin\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15170,7 +15170,7 @@\n (define_insn \"*cosdf2\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"0\")] UNSPEC_COS))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fcos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15179,7 +15179,7 @@\n (define_insn \"*cossf2\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"0\")] UNSPEC_COS))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fcos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15190,7 +15190,7 @@\n \t(unspec:DF [(float_extend:DF\n \t\t     (match_operand:SF 1 \"register_operand\" \"0\"))]\n \t\t   UNSPEC_COS))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fcos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15199,7 +15199,7 @@\n (define_insn \"*cosxf2\"\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_operand:XF 1 \"register_operand\" \"0\")] UNSPEC_COS))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fcos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15217,7 +15217,7 @@\n \t\t   UNSPEC_SINCOS_COS))\n    (set (match_operand:DF 1 \"register_operand\" \"=u\")\n         (unspec:DF [(match_dup 2)] UNSPEC_SINCOS_SIN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsincos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15251,7 +15251,7 @@\n \t\t   UNSPEC_SINCOS_COS))\n    (set (match_operand:SF 1 \"register_operand\" \"=u\")\n         (unspec:SF [(match_dup 2)] UNSPEC_SINCOS_SIN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsincos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15287,7 +15287,7 @@\n    (set (match_operand:DF 1 \"register_operand\" \"=u\")\n         (unspec:DF [(float_extend:DF\n \t\t     (match_dup 2))] UNSPEC_SINCOS_SIN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsincos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15327,7 +15327,7 @@\n \t\t   UNSPEC_SINCOS_COS))\n    (set (match_operand:XF 1 \"register_operand\" \"=u\")\n         (unspec:XF [(match_dup 2)] UNSPEC_SINCOS_SIN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fsincos\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15361,7 +15361,7 @@\n \t\t   UNSPEC_TAN_ONE))\n    (set (match_operand:DF 1 \"register_operand\" \"=u\")\n         (unspec:DF [(match_dup 2)] UNSPEC_TAN_TAN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fptan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15391,7 +15391,7 @@\n \t\t\t      UNSPEC_TAN_ONE))\n \t      (set (match_operand:DF 0 \"register_operand\" \"\")\n \t\t   (unspec:DF [(match_dup 1)] UNSPEC_TAN_TAN))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (DFmode);\n@@ -15403,7 +15403,7 @@\n \t\t   UNSPEC_TAN_ONE))\n    (set (match_operand:SF 1 \"register_operand\" \"=u\")\n         (unspec:SF [(match_dup 2)] UNSPEC_TAN_TAN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fptan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15433,7 +15433,7 @@\n \t\t\t      UNSPEC_TAN_ONE))\n \t      (set (match_operand:SF 0 \"register_operand\" \"\")\n \t\t   (unspec:SF [(match_dup 1)] UNSPEC_TAN_TAN))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (SFmode);\n@@ -15445,7 +15445,7 @@\n \t\t   UNSPEC_TAN_ONE))\n    (set (match_operand:XF 1 \"register_operand\" \"=u\")\n         (unspec:XF [(match_dup 2)] UNSPEC_TAN_TAN))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fptan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15475,7 +15475,7 @@\n \t\t\t      UNSPEC_TAN_ONE))\n \t      (set (match_operand:XF 0 \"register_operand\" \"\")\n \t\t   (unspec:XF [(match_dup 1)] UNSPEC_TAN_TAN))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15487,7 +15487,7 @@\n \t\t    (match_operand:DF 1 \"register_operand\" \"u\")]\n \t\t   UNSPEC_FPATAN))\n    (clobber (match_scratch:DF 3 \"=1\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fpatan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15497,7 +15497,7 @@\n   [(use (match_operand:DF 0 \"register_operand\" \"=f\"))\n    (use (match_operand:DF 2 \"register_operand\" \"0\"))\n    (use (match_operand:DF 1 \"register_operand\" \"u\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx copy = gen_reg_rtx (DFmode);\n@@ -15512,7 +15512,7 @@\n \t\t\t       (match_operand:DF 1 \"register_operand\" \"\")]\n \t\t    UNSPEC_FPATAN))\n \t      (clobber (match_scratch:DF 3 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (DFmode);\n@@ -15525,7 +15525,7 @@\n \t\t    (match_operand:SF 1 \"register_operand\" \"u\")]\n \t\t   UNSPEC_FPATAN))\n    (clobber (match_scratch:SF 3 \"=1\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fpatan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15535,7 +15535,7 @@\n   [(use (match_operand:SF 0 \"register_operand\" \"=f\"))\n    (use (match_operand:SF 2 \"register_operand\" \"0\"))\n    (use (match_operand:SF 1 \"register_operand\" \"u\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx copy = gen_reg_rtx (SFmode);\n@@ -15550,7 +15550,7 @@\n \t\t\t       (match_operand:SF 1 \"register_operand\" \"\")]\n \t\t    UNSPEC_FPATAN))\n \t      (clobber (match_scratch:SF 3 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (SFmode);\n@@ -15563,7 +15563,7 @@\n \t            (match_operand:XF 1 \"register_operand\" \"u\")]\n \t           UNSPEC_FPATAN))\n    (clobber (match_scratch:XF 3 \"=1\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fpatan\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15573,7 +15573,7 @@\n   [(use (match_operand:XF 0 \"register_operand\" \"=f\"))\n    (use (match_operand:XF 2 \"register_operand\" \"0\"))\n    (use (match_operand:XF 1 \"register_operand\" \"u\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx copy = gen_reg_rtx (XFmode);\n@@ -15588,7 +15588,7 @@\n \t\t\t       (match_operand:XF 1 \"register_operand\" \"\")]\n \t\t    UNSPEC_FPATAN))\n \t      (clobber (match_scratch:XF 3 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15607,7 +15607,7 @@\n    \t      (clobber (match_scratch:XF 8 \"\"))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 7)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15630,7 +15630,7 @@\n    \t      (clobber (match_scratch:XF 8 \"\"))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 7)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15651,7 +15651,7 @@\n         \t   (unspec:XF [(match_dup 5) (match_dup 1)]\n \t\t\t      UNSPEC_FPATAN))\n    \t      (clobber (match_scratch:XF 6 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15674,7 +15674,7 @@\n    \t      (clobber (match_scratch:XF 8 \"\"))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 7)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15697,7 +15697,7 @@\n    \t      (clobber (match_scratch:XF 8 \"\"))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 7)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15718,7 +15718,7 @@\n         \t   (unspec:XF [(match_dup 1) (match_dup 5)]\n \t\t\t      UNSPEC_FPATAN))\n    \t      (clobber (match_scratch:XF 6 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -15735,7 +15735,7 @@\n \t\t    (match_operand:XF 1 \"register_operand\" \"u\")]\n \t           UNSPEC_FYL2X))\n    (clobber (match_scratch:XF 3 \"=1\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fyl2x\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15750,7 +15750,7 @@\n \t      (clobber (match_scratch:XF 5 \"\"))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15772,7 +15772,7 @@\n \t      (clobber (match_scratch:XF 5 \"\"))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15790,7 +15790,7 @@\n \t\t   (unspec:XF [(match_operand:XF 1 \"register_operand\" \"\")\n \t\t\t       (match_dup 2)] UNSPEC_FYL2X))\n \t      (clobber (match_scratch:XF 3 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15809,7 +15809,7 @@\n \t      (clobber (match_scratch:XF 5 \"\"))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15831,7 +15831,7 @@\n \t      (clobber (match_scratch:XF 5 \"\"))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15849,7 +15849,7 @@\n \t\t   (unspec:XF [(match_operand:XF 1 \"register_operand\" \"\")\n \t\t\t       (match_dup 2)] UNSPEC_FYL2X))\n \t      (clobber (match_scratch:XF 3 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -15868,7 +15868,7 @@\n \t      (clobber (match_scratch:XF 5 \"\"))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15887,7 +15887,7 @@\n \t      (clobber (match_scratch:XF 5 \"\"))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15902,7 +15902,7 @@\n \t\t   (unspec:XF [(match_operand:XF 1 \"register_operand\" \"\")\n \t\t\t       (match_dup 2)] UNSPEC_FYL2X))\n \t      (clobber (match_scratch:XF 3 \"\"))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15915,7 +15915,7 @@\n \t\t    (match_operand:XF 1 \"register_operand\" \"u\")]\n \t           UNSPEC_FYL2XP1))\n    (clobber (match_scratch:XF 3 \"=1\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fyl2xp1\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15924,7 +15924,7 @@\n (define_expand \"log1psf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -15939,7 +15939,7 @@\n (define_expand \"log1pdf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -15954,7 +15954,7 @@\n (define_expand \"log1pxf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   ix86_emit_i387_log1p (operands[0], operands[1]);\n@@ -15967,7 +15967,7 @@\n \t\t   UNSPEC_XTRACT_FRACT))\n    (set (match_operand:XF 1 \"register_operand\" \"=u\")\n         (unspec:XF [(match_dup 2)] UNSPEC_XTRACT_EXP))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fxtract\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -15982,7 +15982,7 @@\n \t\t   (unspec:XF [(match_dup 2)] UNSPEC_XTRACT_EXP))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -15999,7 +15999,7 @@\n \t\t   (unspec:XF [(match_dup 2)] UNSPEC_XTRACT_EXP))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 4)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -16013,7 +16013,7 @@\n \t\t\t      UNSPEC_XTRACT_FRACT))\n \t      (set (match_operand:XF 0 \"register_operand\" \"\")\n \t\t   (unspec:XF [(match_dup 1)] UNSPEC_XTRACT_EXP))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -16028,7 +16028,7 @@\n    (parallel [(set (match_operand:SI 0 \"register_operand\" \"\")\n \t           (fix:SI (match_dup 3)))\n \t      (clobber (reg:CC FLAGS_REG))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   operands[2] = gen_reg_rtx (XFmode);\n@@ -16039,7 +16039,7 @@\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_operand:XF 1 \"register_operand\" \"0\")]\n \t UNSPEC_F2XM1))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"f2xm1\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -16053,7 +16053,7 @@\n    (set (match_operand:XF 1 \"register_operand\" \"=u\")\n \t(unspec:XF [(match_dup 2) (match_dup 3)]\n \t\t   UNSPEC_FSCALE_EXP))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fscale\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -16075,7 +16075,7 @@\n \t\t\t      UNSPEC_FSCALE_EXP))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 10)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16104,7 +16104,7 @@\n \t\t\t      UNSPEC_FSCALE_EXP))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 10)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16130,7 +16130,7 @@\n \t      (set (match_dup 9)\n \t\t   (unspec:XF [(match_dup 8) (match_dup 4)]\n \t\t\t      UNSPEC_FSCALE_EXP))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16159,7 +16159,7 @@\n \t\t\t      UNSPEC_FSCALE_EXP))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 10)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16188,7 +16188,7 @@\n \t\t\t      UNSPEC_FSCALE_EXP))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 10)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16214,7 +16214,7 @@\n \t      (set (match_dup 9)\n \t\t   (unspec:XF [(match_dup 8) (match_dup 4)]\n \t\t\t      UNSPEC_FSCALE_EXP))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16242,7 +16242,7 @@\n \t\t\t      UNSPEC_FSCALE_EXP))])\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 8)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -16267,7 +16267,7 @@\n \t\t\t      UNSPEC_FSCALE_EXP))])\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 8)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -16289,7 +16289,7 @@\n \t      (set (match_dup 8)\n \t\t   (unspec:XF [(match_dup 7) (match_dup 3)]\n \t\t\t      UNSPEC_FSCALE_EXP))])]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   int i;\n@@ -16322,7 +16322,7 @@\n    (set (match_dup 14) (plus:XF (match_dup 13) (match_dup 8)))\n    (set (match_operand:DF 0 \"register_operand\" \"\")\n \t(float_truncate:DF (match_dup 14)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16358,7 +16358,7 @@\n    (set (match_dup 14) (plus:XF (match_dup 13) (match_dup 8)))\n    (set (match_operand:SF 0 \"register_operand\" \"\")\n \t(float_truncate:SF (match_dup 14)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16392,7 +16392,7 @@\n    (set (match_dup 12) (minus:XF (match_dup 10) (match_dup 9)))\n    (set (match_operand:XF 0 \"register_operand\" \"\")\n \t(plus:XF (match_dup 12) (match_dup 7)))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx temp;\n@@ -16410,7 +16410,7 @@\n   [(set (match_operand:XF 0 \"register_operand\" \"=f\")\n \t(unspec:XF [(match_operand:XF 1 \"register_operand\" \"0\")]\n \t UNSPEC_FRNDINT))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"frndint\"\n   [(set_attr \"type\" \"fpspc\")\n@@ -16419,7 +16419,7 @@\n (define_expand \"rintdf2\"\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16435,7 +16435,7 @@\n (define_expand \"rintsf2\"\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16451,7 +16451,7 @@\n (define_expand \"rintxf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   emit_insn (gen_frndintxf2 (operands[0], operands[1]));\n@@ -16464,7 +16464,7 @@\n \t UNSPEC_FRNDINT_FLOOR))\n    (use (match_operand:HI 2 \"memory_operand\" \"m\"))\n    (use (match_operand:HI 3 \"memory_operand\" \"m\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fldcw\\t%3\\n\\tfrndint\\n\\tfldcw\\t%2\"\n   [(set_attr \"type\" \"frndint\")\n@@ -16474,7 +16474,7 @@\n (define_expand \"floordf2\"\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16494,7 +16494,7 @@\n (define_expand \"floorsf2\"\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16514,7 +16514,7 @@\n (define_expand \"floorxf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op2 = assign_386_stack_local (HImode, 1);\n@@ -16532,7 +16532,7 @@\n \t UNSPEC_FRNDINT_CEIL))\n    (use (match_operand:HI 2 \"memory_operand\" \"m\"))\n    (use (match_operand:HI 3 \"memory_operand\" \"m\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fldcw\\t%3\\n\\tfrndint\\n\\tfldcw\\t%2\"\n   [(set_attr \"type\" \"frndint\")\n@@ -16542,7 +16542,7 @@\n (define_expand \"ceildf2\"\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16562,7 +16562,7 @@\n (define_expand \"ceilsf2\"\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16582,7 +16582,7 @@\n (define_expand \"ceilxf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op2 = assign_386_stack_local (HImode, 1);\n@@ -16600,7 +16600,7 @@\n \t UNSPEC_FRNDINT_TRUNC))\n    (use (match_operand:HI 2 \"memory_operand\" \"m\"))\n    (use (match_operand:HI 3 \"memory_operand\" \"m\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fldcw\\t%3\\n\\tfrndint\\n\\tfldcw\\t%2\"\n   [(set_attr \"type\" \"frndint\")\n@@ -16610,7 +16610,7 @@\n (define_expand \"btruncdf2\"\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16630,7 +16630,7 @@\n (define_expand \"btruncsf2\"\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16650,7 +16650,7 @@\n (define_expand \"btruncxf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op2 = assign_386_stack_local (HImode, 1);\n@@ -16668,7 +16668,7 @@\n \t UNSPEC_FRNDINT_MASK_PM))\n    (use (match_operand:HI 2 \"memory_operand\" \"m\"))\n    (use (match_operand:HI 3 \"memory_operand\" \"m\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n   \"fldcw\\t%3\\n\\tfrndint\\n\\tfclex\\n\\tfldcw\\t%2\"\n   [(set_attr \"type\" \"frndint\")\n@@ -16678,7 +16678,7 @@\n (define_expand \"nearbyintdf2\"\n   [(use (match_operand:DF 0 \"register_operand\" \"\"))\n    (use (match_operand:DF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16698,7 +16698,7 @@\n (define_expand \"nearbyintsf2\"\n   [(use (match_operand:SF 0 \"register_operand\" \"\"))\n    (use (match_operand:SF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op0 = gen_reg_rtx (XFmode);\n@@ -16718,7 +16718,7 @@\n (define_expand \"nearbyintxf2\"\n   [(use (match_operand:XF 0 \"register_operand\" \"\"))\n    (use (match_operand:XF 1 \"register_operand\" \"\"))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387 \n+  \"TARGET_USE_FANCY_MATH_387\n    && flag_unsafe_math_optimizations\"\n {\n   rtx op2 = assign_386_stack_local (HImode, 1);"}]}