{"sha": "253abb2a156c6ea7d1631bbe9da32070fdfe901b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjUzYWJiMmExNTZjNmVhN2QxNjMxYmJlOWRhMzIwNzBmZGZlOTAxYg==", "commit": {"author": {"name": "Andreas Schwab", "email": "schwab@linux-m68k.org", "date": "2016-10-13T20:19:42Z"}, "committer": {"name": "Andreas Schwab", "email": "schwab@gcc.gnu.org", "date": "2016-10-13T20:19:42Z"}, "message": "m68k.c (m68k_option_override): Check opt_fstack_limit_symbol_arg and opt_fstack_limit_register_no instead of...\n\ngcc/\n\t* config/m68k/m68k.c (m68k_option_override): Check\n\topt_fstack_limit_symbol_arg and opt_fstack_limit_register_no\n\tinstead of stack_limit_rtx.\n\ngcc/testsuite/\n\t* gcc.target/m68k/stack-limit-1.c: Expect warning on line 0.\n\nFrom-SVN: r241140", "tree": {"sha": "e568b4d32c4d46ed6f9e8bb96fe01e0559e79cf2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e568b4d32c4d46ed6f9e8bb96fe01e0559e79cf2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/253abb2a156c6ea7d1631bbe9da32070fdfe901b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/253abb2a156c6ea7d1631bbe9da32070fdfe901b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/253abb2a156c6ea7d1631bbe9da32070fdfe901b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/253abb2a156c6ea7d1631bbe9da32070fdfe901b/comments", "author": {"login": "andreas-schwab", "id": 2175493, "node_id": "MDQ6VXNlcjIxNzU0OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2175493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-schwab", "html_url": "https://github.com/andreas-schwab", "followers_url": "https://api.github.com/users/andreas-schwab/followers", "following_url": "https://api.github.com/users/andreas-schwab/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-schwab/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-schwab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-schwab/subscriptions", "organizations_url": "https://api.github.com/users/andreas-schwab/orgs", "repos_url": "https://api.github.com/users/andreas-schwab/repos", "events_url": "https://api.github.com/users/andreas-schwab/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-schwab/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a269531973deae79d2d3aba10ff9eab0fb5df5a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a269531973deae79d2d3aba10ff9eab0fb5df5a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a269531973deae79d2d3aba10ff9eab0fb5df5a9"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "ae99273eb3ab58065b20d33090a7e8854b8e669f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=253abb2a156c6ea7d1631bbe9da32070fdfe901b", "patch": "@@ -1,3 +1,9 @@\n+2016-10-13  Andreas Schwab  <schwab@linux-m68k.org>\n+\n+\t* config/m68k/m68k.c (m68k_option_override): Check\n+\topt_fstack_limit_symbol_arg and opt_fstack_limit_register_no\n+\tinstead of stack_limit_rtx.\n+\n 2016-10-13  Jakub Jelinek  <jakub@redhat.com>\n \n \t* dwarf2out.c (gen_member_die): Handle inline static data member"}, {"sha": "b152ca80bad80c1f3647ae3f07e04b4305bf300c", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=253abb2a156c6ea7d1631bbe9da32070fdfe901b", "patch": "@@ -638,10 +638,12 @@ m68k_option_override (void)\n     }\n #endif\n \n-  if (stack_limit_rtx != NULL_RTX && !TARGET_68020)\n+  if ((opt_fstack_limit_symbol_arg != NULL || opt_fstack_limit_register_no >= 0)\n+      && !TARGET_68020)\n     {\n       warning (0, \"-fstack-limit- options are not supported on this cpu\");\n-      stack_limit_rtx = NULL_RTX;\n+      opt_fstack_limit_symbol_arg = NULL;\n+      opt_fstack_limit_register_no = -1;\n     }\n \n   SUBTARGET_OVERRIDE_OPTIONS;"}, {"sha": "93bb49e5bb2fcab67a0462a9d617ed178059e63c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=253abb2a156c6ea7d1631bbe9da32070fdfe901b", "patch": "@@ -1,3 +1,7 @@\n+2016-10-13  Andreas Schwab  <schwab@linux-m68k.org>\n+\n+\t* gcc.target/m68k/stack-limit-1.c: Expect warning on line 0.\n+\n 2016-10-13  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \tPR tree-optimization/77937"}, {"sha": "5086edd77f7f0f5e75fb6564798260686fed5225", "filename": "gcc/testsuite/gcc.target/m68k/stack-limit-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2Ftestsuite%2Fgcc.target%2Fm68k%2Fstack-limit-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/253abb2a156c6ea7d1631bbe9da32070fdfe901b/gcc%2Ftestsuite%2Fgcc.target%2Fm68k%2Fstack-limit-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fm68k%2Fstack-limit-1.c?ref=253abb2a156c6ea7d1631bbe9da32070fdfe901b", "patch": "@@ -1,6 +1,6 @@\n /* -fstack-limit- should be ignored without an ICE if not supported.  */\n /* { dg-do compile } */\n /* { dg-options \"-fstack-limit-symbol=_stack_limit -m68000\" } */\n-/* { dg-warning \"not supported\" \"\" { target *-*-* } 1 } */\n+/* { dg-warning \"not supported\" \"\" { target *-*-* } 0 } */\n \n void dummy (void) { }"}]}