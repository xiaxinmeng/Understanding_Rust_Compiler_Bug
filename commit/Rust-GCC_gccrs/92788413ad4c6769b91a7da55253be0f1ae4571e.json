{"sha": "92788413ad4c6769b91a7da55253be0f1ae4571e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTI3ODg0MTNhZDRjNjc2OWI5MWE3ZGE1NTI1M2JlMGYxYWU0NTcxZQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2001-04-03T23:37:53Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-04-03T23:37:53Z"}, "message": "decl2.c (import_export_decl): Don't call import_export_class when processing an inline member function.\n\n\t* decl2.c (import_export_decl): Don't call import_export_class\n\twhen processing an inline member function.\n\t* semantics.c (expand_body): Call import_export_decl before\n\temitting inline functions.\n\nFrom-SVN: r41066", "tree": {"sha": "433f4e46bc016e6ff1deaece2134f220fbacf134", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/433f4e46bc016e6ff1deaece2134f220fbacf134"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92788413ad4c6769b91a7da55253be0f1ae4571e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92788413ad4c6769b91a7da55253be0f1ae4571e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92788413ad4c6769b91a7da55253be0f1ae4571e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92788413ad4c6769b91a7da55253be0f1ae4571e/comments", "author": null, "committer": null, "parents": [{"sha": "cf54a76769cc64a792e48c2a87db2b48428cab41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf54a76769cc64a792e48c2a87db2b48428cab41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf54a76769cc64a792e48c2a87db2b48428cab41"}], "stats": {"total": 42, "additions": 28, "deletions": 14}, "files": [{"sha": "6439776555fe51bdac79903a8ad3a68fd51338a1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92788413ad4c6769b91a7da55253be0f1ae4571e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92788413ad4c6769b91a7da55253be0f1ae4571e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=92788413ad4c6769b91a7da55253be0f1ae4571e", "patch": "@@ -1,3 +1,10 @@\n+2001-04-03  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* decl2.c (import_export_decl): Don't call import_export_class \n+\twhen processing an inline member function.\n+\t* semantics.c (expand_body): Call import_export_decl before\n+\temitting inline functions.\n+\n 2001-03-28  Richard Henderson  <rth@redhat.com>\n \n \tIA-64 ABI Exception Handling:"}, {"sha": "38db639d3efa334969eaf5926039d7a804554a56", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 16, "deletions": 14, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92788413ad4c6769b91a7da55253be0f1ae4571e/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92788413ad4c6769b91a7da55253be0f1ae4571e/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=92788413ad4c6769b91a7da55253be0f1ae4571e", "patch": "@@ -2672,21 +2672,23 @@ import_export_decl (decl)\n     }\n   else if (DECL_FUNCTION_MEMBER_P (decl))\n     {\n-      tree ctype = DECL_CONTEXT (decl);\n-      import_export_class (ctype);\n-      if (CLASSTYPE_INTERFACE_KNOWN (ctype)\n-\t  && ! DECL_THIS_INLINE (decl))\n+      if (!DECL_THIS_INLINE (decl))\n \t{\n-\t  DECL_NOT_REALLY_EXTERN (decl)\n-\t    = ! (CLASSTYPE_INTERFACE_ONLY (ctype)\n-\t\t || (DECL_THIS_INLINE (decl) && ! flag_implement_inlines\n-\t\t     && !DECL_VINDEX (decl)));\n-\n-\t  /* Always make artificials weak.  */\n-\t  if (DECL_ARTIFICIAL (decl) && flag_weak)\n-\t    comdat_linkage (decl);\n-\t  else\n-\t    maybe_make_one_only (decl);\n+\t  tree ctype = DECL_CONTEXT (decl);\n+\t  import_export_class (ctype);\n+\t  if (CLASSTYPE_INTERFACE_KNOWN (ctype))\n+\t    {\n+\t      DECL_NOT_REALLY_EXTERN (decl)\n+\t\t= ! (CLASSTYPE_INTERFACE_ONLY (ctype)\n+\t\t     || (DECL_THIS_INLINE (decl) && ! flag_implement_inlines\n+\t\t\t && !DECL_VINDEX (decl)));\n+\n+\t      /* Always make artificials weak.  */\n+\t      if (DECL_ARTIFICIAL (decl) && flag_weak)\n+\t\tcomdat_linkage (decl);\n+\t      else\n+\t\tmaybe_make_one_only (decl);\n+\t    }\n \t}\n       else\n \tcomdat_linkage (decl);"}, {"sha": "ced8c5168d9c7d65e54b38770e2f27fb5787ad28", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92788413ad4c6769b91a7da55253be0f1ae4571e/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92788413ad4c6769b91a7da55253be0f1ae4571e/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=92788413ad4c6769b91a7da55253be0f1ae4571e", "patch": "@@ -2448,6 +2448,11 @@ expand_body (fn)\n       return;\n     }\n \n+  /* Compute the appropriate object-file linkage for inline\n+     functions.  */\n+  if (DECL_INLINE (fn))\n+    import_export_decl (fn);\n+\n   /* Emit any thunks that should be emitted at the same time as FN.  */\n   emit_associated_thunks (fn);\n "}]}