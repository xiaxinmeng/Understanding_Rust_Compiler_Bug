{"sha": "33d11b9745bad90547e56cf97fa59f57849ebabd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNkMTFiOTc0NWJhZDkwNTQ3ZTU2Y2Y5N2ZhNTlmNTc4NDllYmFiZA==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2012-05-04T16:38:27Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2012-05-04T16:38:27Z"}, "message": "Enable -Wunused-local-typedefs when -Wall or -Wunused is on\n\nNow that the libstdc++ testsuite is run with -ftrack-macro-location by\ndefault, this patch triggers the -Wunused-local-typedefs warning when\n-Wunused (and -Wall) is turned on.\n\nThe patch has been reviewed and accepted[1] a while ago, but was waiting\nfor the -ftrack-macro-expansion work to go in first.\n\nBootstrapped and tested again on x86_64-unknown-linux-gnu against\ntrunk.\n\nApplied to the mainline.\n\n[1]: http://gcc.gnu.org/ml/gcc-patches/2011-09/msg00605.html\n\ngcc/\n\n\t* opts.c (finish_options): Activate -Wunused-local-typedefs if\n\t-Wunused is activated.\n\t* doc/invoke.texi: Update blurb of -Wunused-local-typedefs.\n\nFrom-SVN: r187167", "tree": {"sha": "2a313c2ba5c867797cc1b623c7f4bdc0fc018b08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a313c2ba5c867797cc1b623c7f4bdc0fc018b08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33d11b9745bad90547e56cf97fa59f57849ebabd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33d11b9745bad90547e56cf97fa59f57849ebabd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33d11b9745bad90547e56cf97fa59f57849ebabd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33d11b9745bad90547e56cf97fa59f57849ebabd/comments", "author": null, "committer": null, "parents": [{"sha": "fb4bcc8d659011362117716d831829adaa02bdf3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb4bcc8d659011362117716d831829adaa02bdf3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb4bcc8d659011362117716d831829adaa02bdf3"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "d372a4f13898bb5954ddf2bd040c5359559e2b97", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33d11b9745bad90547e56cf97fa59f57849ebabd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33d11b9745bad90547e56cf97fa59f57849ebabd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33d11b9745bad90547e56cf97fa59f57849ebabd", "patch": "@@ -1,3 +1,10 @@\n+2012-05-04  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tEnable -Wunused-local-typedefs when -Wall or -Wunused is on\n+\t* opts.c (finish_options): Activate -Wunused-local-typedefs if\n+    \t-Wunused is activated.\n+\t* doc/invoke.texi: Update blurb of -Wunused-local-typedefs.\n+\n 2012-05-04  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n \n \t* config/s390/s390.md (*movmem_short, *clrmem_short)"}, {"sha": "86698fcaf9982000482e5b567071c027b49e5c49", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33d11b9745bad90547e56cf97fa59f57849ebabd/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33d11b9745bad90547e56cf97fa59f57849ebabd/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=33d11b9745bad90547e56cf97fa59f57849ebabd", "patch": "@@ -3622,6 +3622,7 @@ To suppress this warning use the @samp{unused} attribute\n @item -Wunused-local-typedefs @r{(C, Objective-C, C++ and Objective-C++ only)}\n @opindex Wunused-local-typedefs\n Warn when a typedef locally defined in a function is not used.\n+This warning is enabled by @option{-Wall}.\n \n @item -Wunused-parameter\n @opindex Wunused-parameter"}, {"sha": "b6c786f950e28c0922d828cdb5b2ae8bafe7e390", "filename": "gcc/opts.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33d11b9745bad90547e56cf97fa59f57849ebabd/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33d11b9745bad90547e56cf97fa59f57849ebabd/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=33d11b9745bad90547e56cf97fa59f57849ebabd", "patch": "@@ -835,6 +835,10 @@ finish_options (struct gcc_options *opts, struct gcc_options *opts_set,\n   if (opts->x_warn_unused_value == -1)\n     opts->x_warn_unused_value = opts->x_warn_unused;\n \n+  /* Wunused-local-typedefs is enabled by -Wunused or -Wall.  */\n+  if (opts->x_warn_unused_local_typedefs == -1)\n+    opts->x_warn_unused_local_typedefs = opts->x_warn_unused;\n+\n   /* This replaces set_Wextra.  */\n   if (opts->x_warn_uninitialized == -1)\n     opts->x_warn_uninitialized = opts->x_extra_warnings;"}]}