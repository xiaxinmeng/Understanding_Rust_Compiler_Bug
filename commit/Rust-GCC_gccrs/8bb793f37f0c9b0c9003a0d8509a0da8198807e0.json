{"sha": "8bb793f37f0c9b0c9003a0d8509a0da8198807e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJiNzkzZjM3ZjBjOWIwYzkwMDNhMGQ4NTA5YTBkYTgxOTg4MDdlMA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1999-07-28T18:21:02Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1999-07-28T18:21:02Z"}, "message": "mn10200.c (mn10200_va_arg): New.\n\n        * mn10200.c (mn10200_va_arg): New.\n        * mn10200.h (EXPAND_BUILTIN_VA_ARG): New.\n\nFrom-SVN: r28315", "tree": {"sha": "b8cf4c79ee7c5d387387db61ef1a5fec91bc0642", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b8cf4c79ee7c5d387387db61ef1a5fec91bc0642"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bb793f37f0c9b0c9003a0d8509a0da8198807e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bb793f37f0c9b0c9003a0d8509a0da8198807e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bb793f37f0c9b0c9003a0d8509a0da8198807e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bb793f37f0c9b0c9003a0d8509a0da8198807e0/comments", "author": null, "committer": null, "parents": [{"sha": "d0be05dbc4b53f224ea31c5f3eb4c1e1b73bc978", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0be05dbc4b53f224ea31c5f3eb4c1e1b73bc978", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0be05dbc4b53f224ea31c5f3eb4c1e1b73bc978"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "37c69fcc7a4738c7fddb54a954fb6cd84e607224", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb793f37f0c9b0c9003a0d8509a0da8198807e0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb793f37f0c9b0c9003a0d8509a0da8198807e0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8bb793f37f0c9b0c9003a0d8509a0da8198807e0", "patch": "@@ -1,3 +1,8 @@\n+Wed Jul 28 11:20:19 1999  Richard Henderson  <rth@cygnus.com>\n+\n+\t* mn10200.c (mn10200_va_arg): New.\n+\t* mn10200.h (EXPAND_BUILTIN_VA_ARG): New.\n+\n Wed Jul 28 11:19:06 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* builtins.c (std_expand_builtin_va_arg): Use int_size_in_bytes"}, {"sha": "6e91b8e6418ac8c7549fed9a6f236067c764baef", "filename": "gcc/config/mn10200/mn10200.c", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb793f37f0c9b0c9003a0d8509a0da8198807e0/gcc%2Fconfig%2Fmn10200%2Fmn10200.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb793f37f0c9b0c9003a0d8509a0da8198807e0/gcc%2Fconfig%2Fmn10200%2Fmn10200.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10200%2Fmn10200.c?ref=8bb793f37f0c9b0c9003a0d8509a0da8198807e0", "patch": "@@ -1436,6 +1436,43 @@ function_arg_partial_nregs (cum, mode, type, named)\n   return (nregs * UNITS_PER_WORD - cum->nbytes) / UNITS_PER_WORD;\n }\n \n+rtx\n+mn10200_va_arg (valist, type)\n+     tree valist, type;\n+{\n+  HOST_WIDE_INT align, rsize;\n+  tree t, ptr, pptr;\n+\n+  /* Compute the rounded size of the type.  */\n+  align = PARM_BOUNDARY / BITS_PER_UNIT;\n+  rsize = (((int_size_in_bytes (type) + align - 1) / align) * align);\n+\n+  t = build (POSTINCREMENT_EXPR, TREE_TYPE (valist), valist, \n+\t     build_int_2 ((rsize > 8 ? 4 : rsize), 0));\n+  TREE_SIDE_EFFECTS (t) = 1;\n+\n+  ptr = build_pointer_type (type);\n+\n+  /* \"Large\" types are passed by reference.  */\n+  if (rsize > 8)\n+    {\n+      pptr = build_pointer_type (ptr);\n+      t = build1 (NOP_EXPR, pptr, t);\n+      TREE_SIDE_EFFECTS (t) = 1;\n+\n+      t = build1 (INDIRECT_REF, ptr, t);\n+      TREE_SIDE_EFFECTS (t) = 1;\n+    }\n+  else\n+    {\n+      t = build1 (NOP_EXPR, ptr, t);\n+      TREE_SIDE_EFFECTS (t) = 1;\n+    }\n+\n+  /* Calculate!  */\n+  return expand_expr (t, NULL_RTX, Pmode, EXPAND_NORMAL);\n+}\n+\n char *\n output_tst (operand, insn)\n      rtx operand, insn;"}, {"sha": "c044c16cab059044d33756dc0ee9366b796c4a4e", "filename": "gcc/config/mn10200/mn10200.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb793f37f0c9b0c9003a0d8509a0da8198807e0/gcc%2Fconfig%2Fmn10200%2Fmn10200.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb793f37f0c9b0c9003a0d8509a0da8198807e0/gcc%2Fconfig%2Fmn10200%2Fmn10200.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmn10200%2Fmn10200.h?ref=8bb793f37f0c9b0c9003a0d8509a0da8198807e0", "patch": "@@ -508,6 +508,10 @@ extern struct rtx_def *function_arg();\n #define FUNCTION_ARG(CUM, MODE, TYPE, NAMED) \\\n   function_arg (&CUM, MODE, TYPE, NAMED)\n \n+/* Implement `va_arg'.  */\n+extern struct rtx_def *mn10200_va_arg();\n+#define EXPAND_BUILTIN_VA_ARG(valist, type) \\\n+  mn10200_va_arg (valist, type)\n \f\n /* For \"large\" items, we pass them by invisible reference, and the\n    callee is responsible for copying the data item if it might be"}]}