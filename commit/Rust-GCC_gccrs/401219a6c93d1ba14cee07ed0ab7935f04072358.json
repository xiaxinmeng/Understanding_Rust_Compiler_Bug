{"sha": "401219a6c93d1ba14cee07ed0ab7935f04072358", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAxMjE5YTZjOTNkMWJhMTRjZWUwN2VkMGFiNzkzNWYwNDA3MjM1OA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-09-21T22:05:48Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-09-21T22:05:48Z"}, "message": "* decl2.c (get_guard): Check DECL_FUNCTION_SCOPE_P.\n\nFrom-SVN: r36567", "tree": {"sha": "dabfb8f21724c780e36bc74ce49ed00a9d901dc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dabfb8f21724c780e36bc74ce49ed00a9d901dc3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/401219a6c93d1ba14cee07ed0ab7935f04072358", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/401219a6c93d1ba14cee07ed0ab7935f04072358", "html_url": "https://github.com/Rust-GCC/gccrs/commit/401219a6c93d1ba14cee07ed0ab7935f04072358", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/401219a6c93d1ba14cee07ed0ab7935f04072358/comments", "author": null, "committer": null, "parents": [{"sha": "99fada40ffa1fb0b899e7a636a993006165b8803", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99fada40ffa1fb0b899e7a636a993006165b8803", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99fada40ffa1fb0b899e7a636a993006165b8803"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "07e6fd71d0b3f1c0e53f5e73cabc05e11b5ba316", "filename": "gcc/testsuite/g++.old-deja/g++.pt/static11.C", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/401219a6c93d1ba14cee07ed0ab7935f04072358/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fstatic11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/401219a6c93d1ba14cee07ed0ab7935f04072358/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fstatic11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fstatic11.C?ref=401219a6c93d1ba14cee07ed0ab7935f04072358", "patch": "@@ -0,0 +1,29 @@\n+// Bug: g++ was failing to destroy C<int>::a because it was using two\n+// different sentry variables for construction and destruction.\n+\n+extern \"C\" void _exit (int);\n+\n+int r = 1;\n+\n+struct A\n+{\n+  void f(){};\n+  A(){ ++r; }\n+  ~A(){ r -= 2; _exit (r); }\n+};\n+\n+template<class T>\n+struct C\n+{\n+  C(){ a.f(); }\n+  static A a;\n+};\n+\n+template <class T> A C<T>::a;\n+typedef C<int> B;\n+\n+int main()\n+{\n+  C<int> c;\n+  return r;\n+}"}]}