{"sha": "dc874b53e5529e2a76d610500345e1f469366346", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGM4NzRiNTNlNTUyOWUyYTc2ZDYxMDUwMDM0NWUxZjQ2OTM2NjM0Ng==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2009-01-26T09:52:48Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2009-01-26T09:52:48Z"}, "message": "re PR middle-end/38851 (Compiler warns about uninitialized variable that is an object with a constructor)\n\n2009-01-26  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/38851\n\t* Makefile.in (tree-ssa-dse.o): Add langhooks.h.\n\t* tree-ssa-dse.c: Include langhooks.h\n\t(execute_simple_dse): Remove stores with zero size.\n\n\t* g++.dg/warn/Wuninitialized-1.C: New testcase.\n\nFrom-SVN: r143672", "tree": {"sha": "54ab4727fc6dda034e3318ddcd386ab97f5de48c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54ab4727fc6dda034e3318ddcd386ab97f5de48c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dc874b53e5529e2a76d610500345e1f469366346", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc874b53e5529e2a76d610500345e1f469366346", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc874b53e5529e2a76d610500345e1f469366346", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc874b53e5529e2a76d610500345e1f469366346/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "20d4bdcbb1d88647bb05f54d1fdce955e49c25d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20d4bdcbb1d88647bb05f54d1fdce955e49c25d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20d4bdcbb1d88647bb05f54d1fdce955e49c25d7"}], "stats": {"total": 61, "additions": 52, "deletions": 9}, "files": [{"sha": "f9ca880261248c6dc21bfd763bed534cca41dc25", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc874b53e5529e2a76d610500345e1f469366346/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc874b53e5529e2a76d610500345e1f469366346/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dc874b53e5529e2a76d610500345e1f469366346", "patch": "@@ -1,3 +1,10 @@\n+2009-01-26  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/38851\n+\t* Makefile.in (tree-ssa-dse.o): Add langhooks.h.\n+\t* tree-ssa-dse.c: Include langhooks.h\n+\t(execute_simple_dse): Remove stores with zero size.\n+\n 2009-01-24  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/38957"}, {"sha": "ab461e7b75e5e92b4591fd8a4a47862eae1a16ab", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc874b53e5529e2a76d610500345e1f469366346/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc874b53e5529e2a76d610500345e1f469366346/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=dc874b53e5529e2a76d610500345e1f469366346", "patch": "@@ -2110,7 +2110,7 @@ tree-outof-ssa.o : tree-outof-ssa.c $(TREE_FLOW_H) $(CONFIG_H) $(SYSTEM_H) \\\n tree-ssa-dse.o : tree-ssa-dse.c $(CONFIG_H) $(SYSTEM_H) coretypes.h \\\n    $(TM_H) $(GGC_H) $(TREE_H) $(RTL_H) $(TM_P_H) $(BASIC_BLOCK_H) \\\n    $(TREE_FLOW_H) tree-pass.h $(TREE_DUMP_H) domwalk.h $(FLAGS_H) \\\n-   $(DIAGNOSTIC_H) $(TIMEVAR_H)\n+   $(DIAGNOSTIC_H) $(TIMEVAR_H) langhooks.h\n tree-ssa-forwprop.o : tree-ssa-forwprop.c $(CONFIG_H) $(SYSTEM_H) coretypes.h \\\n    $(TM_H) $(GGC_H) $(TREE_H) $(RTL_H) $(TM_P_H) $(BASIC_BLOCK_H) \\\n    $(TREE_FLOW_H) tree-pass.h $(TREE_DUMP_H) $(DIAGNOSTIC_H) $(TIMEVAR_H) \\"}, {"sha": "ea1493ac9f36d33aea0caccacac6b19c1974875b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc874b53e5529e2a76d610500345e1f469366346/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc874b53e5529e2a76d610500345e1f469366346/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dc874b53e5529e2a76d610500345e1f469366346", "patch": "@@ -1,3 +1,8 @@\n+2009-01-26  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/38851\n+\t* g++.dg/warn/Wuninitialized-1.C: New testcase.\n+\n 2009-01-25  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* gcc.dg/bitfld-15.c: Gate warning on target"}, {"sha": "7b1b90b944d3ce8269418556632710072930f3da", "filename": "gcc/testsuite/g++.dg/warn/Wuninitialized-1.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc874b53e5529e2a76d610500345e1f469366346/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWuninitialized-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc874b53e5529e2a76d610500345e1f469366346/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWuninitialized-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWuninitialized-1.C?ref=dc874b53e5529e2a76d610500345e1f469366346", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-options \"-O2 -Wuninitialized\" } */\n+\n+struct Empty { Empty() {} }; /* { dg-bogus \"uninitialized\" } */\n+struct Other {\n+    Other(const Empty& e_) : e(e_) {}\n+    Empty e;\n+};\n+void bar(Other&);\n+void foo()\n+{\n+  Empty e;\n+  Other o(e);\n+  bar(o);\n+}\n+"}, {"sha": "8a724953419a2b8f726b4513a5e6bdf0c532a36a", "filename": "gcc/tree-ssa-dse.c", "status": "modified", "additions": 24, "deletions": 8, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dc874b53e5529e2a76d610500345e1f469366346/gcc%2Ftree-ssa-dse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dc874b53e5529e2a76d610500345e1f469366346/gcc%2Ftree-ssa-dse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dse.c?ref=dc874b53e5529e2a76d610500345e1f469366346", "patch": "@@ -34,6 +34,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"tree-dump.h\"\n #include \"domwalk.h\"\n #include \"flags.h\"\n+#include \"langhooks.h\"\n \n /* This file implements dead store elimination.\n \n@@ -660,20 +661,35 @@ execute_simple_dse (void)\n         tree op;\n \tbool removed = false;\n         ssa_op_iter iter;\n+\ttree size;\n \n-\tif (gimple_stored_syms (stmt)\n-\t    && !bitmap_empty_p (gimple_stored_syms (stmt))\n-            && (is_gimple_assign (stmt)\n-\t        || (is_gimple_call (stmt)\n-                    && gimple_call_lhs (stmt)))\n-\t    && !bitmap_intersect_p (gimple_stored_syms (stmt), variables_loaded))\n+\tif (is_gimple_assign (stmt)\n+\t    && AGGREGATE_TYPE_P (TREE_TYPE (gimple_assign_lhs (stmt)))\n+\t    && (size = lang_hooks.expr_size (gimple_assign_lhs (stmt)))\n+\t    && integer_zerop (size))\n+\t  {\n+\t    if (dump_file && (dump_flags & TDF_DETAILS))\n+\t      {\n+\t\tfprintf (dump_file, \"  Deleted zero-sized store '\");\n+\t\tprint_gimple_stmt (dump_file, stmt, 0, dump_flags);\n+\t\tfprintf (dump_file, \"'\\n\");\n+\t      }\n+\t    removed = true;\n+\t    gsi_remove (&gsi, true);\n+\t    todo |= TODO_cleanup_cfg;\n+\t  }\n+\telse if (gimple_stored_syms (stmt)\n+\t\t && !bitmap_empty_p (gimple_stored_syms (stmt))\n+\t\t && (is_gimple_assign (stmt)\n+\t\t     || (is_gimple_call (stmt)\n+\t\t\t && gimple_call_lhs (stmt)))\n+\t\t && !bitmap_intersect_p (gimple_stored_syms (stmt),\n+\t\t\t\t\t variables_loaded))\n \t  {\n \t    unsigned int i;\n \t    bitmap_iterator bi;\n \t    bool dead = true;\n \n-\n-\n \t    /* See if STMT only stores to write-only variables and\n \t       verify that there are no volatile operands.  tree-ssa-operands\n \t       sets has_volatile_ops flag for all statements involving"}]}