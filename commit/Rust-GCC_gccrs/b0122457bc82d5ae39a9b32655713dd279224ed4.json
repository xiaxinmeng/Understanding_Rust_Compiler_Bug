{"sha": "b0122457bc82d5ae39a9b32655713dd279224ed4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjAxMjI0NTdiYzgyZDVhZTM5YTliMzI2NTU3MTNkZDI3OTIyNGVkNA==", "commit": {"author": {"name": "Trevor Saunders", "email": "tsaunders@mozilla.com", "date": "2014-12-08T00:35:33Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2014-12-08T00:35:33Z"}, "message": "don't ICE when section attribute is used on things in comdats\n\ngcc/\n\n\tPR ipa/63621\n\t* symtab.c (symtab_node::verify): Check for section attribute before\n\tasserting something isn't in a section and a comdat group.\n\nFrom-SVN: r218476", "tree": {"sha": "6fde94058fb755b85e710ae0f24c5c311127ea97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6fde94058fb755b85e710ae0f24c5c311127ea97"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0122457bc82d5ae39a9b32655713dd279224ed4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0122457bc82d5ae39a9b32655713dd279224ed4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0122457bc82d5ae39a9b32655713dd279224ed4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0122457bc82d5ae39a9b32655713dd279224ed4/comments", "author": null, "committer": null, "parents": [{"sha": "35efb9ac399c35b12a330aedea8933fdb55f8a61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35efb9ac399c35b12a330aedea8933fdb55f8a61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35efb9ac399c35b12a330aedea8933fdb55f8a61"}], "stats": {"total": 37, "additions": 36, "deletions": 1}, "files": [{"sha": "760f5fc3a0a723530867bf7246f1704c042ccb19", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0122457bc82d5ae39a9b32655713dd279224ed4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0122457bc82d5ae39a9b32655713dd279224ed4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b0122457bc82d5ae39a9b32655713dd279224ed4", "patch": "@@ -1,3 +1,8 @@\n+2014-12-07  Trevor Saunders  <tsaunders@mozilla.com>\n+\n+\t* symtab.c (symtab_node::verify): Check for section attribute before\n+\tasserting something isn't in a section and a comdat group.\n+\n 2014-12-07  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/50751"}, {"sha": "101bc25ac410325bdfa7e81b47d5799e2a0dfa6e", "filename": "gcc/symtab.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0122457bc82d5ae39a9b32655713dd279224ed4/gcc%2Fsymtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0122457bc82d5ae39a9b32655713dd279224ed4/gcc%2Fsymtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsymtab.c?ref=b0122457bc82d5ae39a9b32655713dd279224ed4", "patch": "@@ -1102,7 +1102,8 @@ symtab_node::verify_base (void)\n       error_found = true;\n     }\n   if (get_section () && get_comdat_group ()\n-      && !implicit_section)\n+      && !implicit_section\n+      && !lookup_attribute (\"section\", DECL_ATTRIBUTES (decl)))\n     {\n       error (\"Both section and comdat group is set\");\n       error_found = true;"}, {"sha": "c8262b8f2e99f86dc59924f609b94c2fad44066c", "filename": "gcc/testsuite/g++.dg/ipa/pr63621.C", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0122457bc82d5ae39a9b32655713dd279224ed4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr63621.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0122457bc82d5ae39a9b32655713dd279224ed4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr63621.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr63621.C?ref=b0122457bc82d5ae39a9b32655713dd279224ed4", "patch": "@@ -0,0 +1,29 @@\n+// { dg-do compile }\n+ class A\n+{\n+\tpublic:\n+\t\tint __attribute__((section(\"a\"))) f1(bool);\n+\t\tint f2(void *);\n+\t\tint f3(bool);\n+};\n+\n+inline int A::f1(bool b)\n+{\n+\tstatic  int c;\n+\tif (c)\n+\t\t;\n+\treturn 0;\n+}\n+\n+inline int A::f3(bool b)\n+{\n+\tstatic __attribute__((section(\"\"))) int c;\n+\tif (c)\n+\t\t;\n+\treturn 0;\n+}\n+\n+int A::f2(void *c)\n+{\n+\treturn f1(c) + f3(c);\n+}"}]}