{"sha": "913746e3284267294197f2b41df8d5f67f9398a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTEzNzQ2ZTMyODQyNjcyOTQxOTdmMmI0MWRmOGQ1ZjY3ZjkzOThhNg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-12-20T19:25:46Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-12-20T19:25:46Z"}, "message": "re PR java/8955 (switch case statement causes gcj to throw segmentation fault)\n\n\t* jcf-write.c (generate_bytecode_insns) [SWITCH_EXPR]: Handle case\n\twhere minimum case value is Integer.MIN_VALUE.\n\tFixes PR java/8955.\n\nFrom-SVN: r60372", "tree": {"sha": "23a89e7e13bcdbb47d1e0de82323c72cafc4dd24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23a89e7e13bcdbb47d1e0de82323c72cafc4dd24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/913746e3284267294197f2b41df8d5f67f9398a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/913746e3284267294197f2b41df8d5f67f9398a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/913746e3284267294197f2b41df8d5f67f9398a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/913746e3284267294197f2b41df8d5f67f9398a6/comments", "author": null, "committer": null, "parents": [{"sha": "8056c5f22194f598f64b465121aa5906cf61fef9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8056c5f22194f598f64b465121aa5906cf61fef9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8056c5f22194f598f64b465121aa5906cf61fef9"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "7567830e88d25d6ffce2477507509ede99c4d547", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/913746e3284267294197f2b41df8d5f67f9398a6/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/913746e3284267294197f2b41df8d5f67f9398a6/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=913746e3284267294197f2b41df8d5f67f9398a6", "patch": "@@ -1,3 +1,9 @@\n+2002-12-20  Tom Tromey  <tromey@redhat.com>\n+\n+\t* jcf-write.c (generate_bytecode_insns) [SWITCH_EXPR]: Handle case\n+\twhere minimum case value is Integer.MIN_VALUE.\n+\tFixes PR java/8955.\n+\n 2002-12-18  Andrew Haley  <aph@redhat.com>\n \n \t* parse.y (patch_invoke): Force evaluation order when `check' is"}, {"sha": "866ba7d7fa08ba369858c105ee4657a9c7f692d4", "filename": "gcc/java/jcf-write.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/913746e3284267294197f2b41df8d5f67f9398a6/gcc%2Fjava%2Fjcf-write.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/913746e3284267294197f2b41df8d5f67f9398a6/gcc%2Fjava%2Fjcf-write.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-write.c?ref=913746e3284267294197f2b41df8d5f67f9398a6", "patch": "@@ -1746,6 +1746,7 @@ generate_bytecode_insns (exp, target, state)\n \telse\n \t  {\n \t    HOST_WIDE_INT i;\n+\t    unsigned HOST_WIDE_INT delta;\n \t    /* Copy the chain of relocs into a sorted array. */\n \t    struct jcf_relocation **relocs = (struct jcf_relocation **)\n \t      xmalloc (sw_state.num_cases * sizeof (struct jcf_relocation *));\n@@ -1778,8 +1779,11 @@ generate_bytecode_insns (exp, target, state)\n \t\t   handled by the parser.  */\n \t      }\n \n-\t    if (2 * sw_state.num_cases\n-\t\t>= sw_state.max_case - sw_state.min_case)\n+\t    /* We could have DELTA < 0 if sw_state.min_case is\n+\t       something like Integer.MIN_VALUE.  That is why delta is\n+\t       unsigned.  */\n+\t    delta = sw_state.max_case - sw_state.min_case;\n+\t    if (2 * sw_state.num_cases >= delta)\n \t      { /* Use tableswitch. */\n \t\tint index = 0;\n \t\tRESERVE (13 + 4 * (sw_state.max_case - sw_state.min_case + 1));"}]}