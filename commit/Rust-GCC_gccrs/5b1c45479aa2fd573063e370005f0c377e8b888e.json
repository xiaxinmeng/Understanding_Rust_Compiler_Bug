{"sha": "5b1c45479aa2fd573063e370005f0c377e8b888e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIxYzQ1NDc5YWEyZmQ1NzMwNjNlMzcwMDA1ZjBjMzc3ZThiODg4ZQ==", "commit": {"author": {"name": "Hristian Kirtchev", "email": "kirtchev@adacore.com", "date": "2018-08-21T14:49:26Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-08-21T14:49:26Z"}, "message": "[Ada] Retention of with clauses for ignored Ghost units\n\nThis patch ensures that with clauses that mention ignored Ghost units are\nretained in the tree. The retention is necessary for several reasons:\n\n   * The with clauses allow the new elaboration order mechanism to\n     produce the same library edges regardless of whether the Ghost unit\n     is checked or ignored. This ensures that the elaboration order\n     remains consistent.\n\n   * The with clauses allow the unnesting mechanism to properly\n     recognize that all units have been examined for unnesing purposes.\n\nNo observable impact, no test needed.\n\n2018-08-21  Hristian Kirtchev  <kirtchev@adacore.com>\n\ngcc/ada/\n\n\t* sem_ch10.adb: Remove the with and use clause for unit Ghost.\n\t(Analyze_With_Clause): Do not mark a with clause which mentions\n\tan ignored Ghost code for elimination.\n\nFrom-SVN: r263733", "tree": {"sha": "b100d350bcf414f8165ddba67c697a4b7fb39941", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b100d350bcf414f8165ddba67c697a4b7fb39941"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b1c45479aa2fd573063e370005f0c377e8b888e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b1c45479aa2fd573063e370005f0c377e8b888e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b1c45479aa2fd573063e370005f0c377e8b888e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b1c45479aa2fd573063e370005f0c377e8b888e/comments", "author": {"login": "kirtchev-adacore", "id": 60669983, "node_id": "MDQ6VXNlcjYwNjY5OTgz", "avatar_url": "https://avatars.githubusercontent.com/u/60669983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kirtchev-adacore", "html_url": "https://github.com/kirtchev-adacore", "followers_url": "https://api.github.com/users/kirtchev-adacore/followers", "following_url": "https://api.github.com/users/kirtchev-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/kirtchev-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/kirtchev-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kirtchev-adacore/subscriptions", "organizations_url": "https://api.github.com/users/kirtchev-adacore/orgs", "repos_url": "https://api.github.com/users/kirtchev-adacore/repos", "events_url": "https://api.github.com/users/kirtchev-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/kirtchev-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "322d87a9b17660f7d04a7320505591538582892a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/322d87a9b17660f7d04a7320505591538582892a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/322d87a9b17660f7d04a7320505591538582892a"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "373a648b98634cab97ccc41c2f5b473c85b5a801", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1c45479aa2fd573063e370005f0c377e8b888e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1c45479aa2fd573063e370005f0c377e8b888e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=5b1c45479aa2fd573063e370005f0c377e8b888e", "patch": "@@ -1,3 +1,9 @@\n+2018-08-21  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* sem_ch10.adb: Remove the with and use clause for unit Ghost.\n+\t(Analyze_With_Clause): Do not mark a with clause which mentions\n+\tan ignored Ghost code for elimination.\n+\n 2018-08-21  Javier Miranda  <miranda@adacore.com>\n \n \t* lib-writ.adb (Write_Unit_Information): Handle pragmas removed"}, {"sha": "e6d0ba50f4ba19809b4aa3c8f5c881b391119820", "filename": "gcc/ada/sem_ch10.adb", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1c45479aa2fd573063e370005f0c377e8b888e/gcc%2Fada%2Fsem_ch10.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1c45479aa2fd573063e370005f0c377e8b888e/gcc%2Fada%2Fsem_ch10.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch10.adb?ref=5b1c45479aa2fd573063e370005f0c377e8b888e", "patch": "@@ -34,7 +34,6 @@ with Elists;    use Elists;\n with Fname;     use Fname;\n with Fname.UF;  use Fname.UF;\n with Freeze;    use Freeze;\n-with Ghost;     use Ghost;\n with Impunit;   use Impunit;\n with Inline;    use Inline;\n with Lib;       use Lib;\n@@ -2912,8 +2911,6 @@ package body Sem_Ch10 is\n                Set_Fatal_Error (Current_Sem_Unit, Error_Ignored);\n             end if;\n       end case;\n-\n-      Mark_Ghost_Clause (N);\n    end Analyze_With_Clause;\n \n    ------------------------------"}]}