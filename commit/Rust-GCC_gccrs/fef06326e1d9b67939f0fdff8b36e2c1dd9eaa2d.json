{"sha": "fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmVmMDYzMjZlMWQ5YjY3OTM5ZjBmZGZmOGIzNmUyYzFkZDllYWEyZA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2010-03-01T09:23:35Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2010-03-01T09:23:35Z"}, "message": "re PR fortran/43199 ([OOP] ICE when reading module file: find_array_spec(): Component not found)\n\n2010-03-01  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/43199\n        * resolve.c (find_array_spec): Handle REF_COMPONENT with\n        CLASS components.\n\n2010-03-01  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/43199\n        * gfortran.dg/module_read_2.f90: New test.\n\nFrom-SVN: r157133", "tree": {"sha": "7a36f3a40f113168c040697285dd7fb47bb22370", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a36f3a40f113168c040697285dd7fb47bb22370"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6c6366f6513dbf11dc563d0a6f420c12d4c48df7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c6366f6513dbf11dc563d0a6f420c12d4c48df7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c6366f6513dbf11dc563d0a6f420c12d4c48df7"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "0c802b662de13271c69c1e7d6af6610f90e76e1e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "patch": "@@ -1,3 +1,9 @@\n+2010-03-01  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/43199\n+\t* resolve.c (find_array_spec): Handle REF_COMPONENT with\n+\tCLASS components.\n+\n 2010-02-28  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/43205"}, {"sha": "8de0de616bfc4307fda4fcd75cf1799db151cfb7", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "patch": "@@ -4007,6 +4007,9 @@ find_array_spec (gfc_expr *e)\n \tif (derived == NULL)\n \t  derived = e->symtree->n.sym->ts.u.derived;\n \n+\tif (derived->attr.is_class)\n+\t  derived = derived->components->ts.u.derived;\n+\n \tc = derived->components;\n \n \tfor (; c; c = c->next)"}, {"sha": "4bb68ccd77ac3fe66ce8b1b26383510a7e38259b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "patch": "@@ -1,3 +1,8 @@\n+2010-03-01  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/43199\n+\t* gfortran.dg/module_read_2.f90: New test.\n+\n 2010-02-27  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/42748"}, {"sha": "d001ca7589bdc023d39948a08e98acffb73a918a", "filename": "gcc/testsuite/gfortran.dg/module_read_2.f90", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_read_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_read_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_read_2.f90?ref=fef06326e1d9b67939f0fdff8b36e2c1dd9eaa2d", "patch": "@@ -0,0 +1,30 @@\n+! { dg-do run }\n+!\n+! PR fortran/43199\n+!\n+! This program gave an ICE due to reading the REF_COMPONENT with CLASS.\n+!\n+module m_string\n+  type t_string\n+      character, dimension(:), allocatable :: string\n+  end type t_string\n+contains\n+pure function string_to_char ( s ) result(res)\n+  class(t_string), intent(in) :: s\n+  character(len=size(s%string)) :: res\n+  integer :: i\n+  do i = 1,len(res)\n+    res(i:i) = s%string(i)\n+  end do\n+end function string_to_char\n+end module m_string\n+\n+use m_string\n+type(t_string) :: str\n+allocate(str%string(5))\n+str%string = ['H','e','l','l','o']\n+if (len (string_to_char (str)) /= 5) call abort ()\n+if (string_to_char (str) /= \"Hello\") call abort ()\n+end\n+\n+! { dg-final { cleanup-modules \"m_string\" } }"}]}