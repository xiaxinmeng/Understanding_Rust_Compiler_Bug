{"sha": "ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWM0ZWI0MGY1YzcwNjliMzllYjg0N2ExMzZhMWY2OTBiYjU0NDRiMg==", "commit": {"author": {"name": "Mikhail Maltsev", "email": "maltsevm@gmail.com", "date": "2017-05-11T10:48:54Z"}, "committer": {"name": "Mikhail Maltsev", "email": "miyuki@gcc.gnu.org", "date": "2017-05-11T10:48:54Z"}, "message": "GIMPLEFE: Handle invalid unary \"*\" operand type\n\ngcc/c/\n\n\tPR testsuite/80580\n\t* gimple-parser.c (c_parser_gimple_unary_expression): Check argument\n\ttype of unary '*'.\n\ngcc/testsuite/\n\n\tPR testsuite/80580\n\t* gcc.dg/gimplefe-error-4.c: New test.\n\nFrom-SVN: r247899", "tree": {"sha": "687a6b8fa77af9a3f5204970e4f31022e4c4b299", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/687a6b8fa77af9a3f5204970e4f31022e4c4b299"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/comments", "author": {"login": "miyuki", "id": 4668268, "node_id": "MDQ6VXNlcjQ2NjgyNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4668268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miyuki", "html_url": "https://github.com/miyuki", "followers_url": "https://api.github.com/users/miyuki/followers", "following_url": "https://api.github.com/users/miyuki/following{/other_user}", "gists_url": "https://api.github.com/users/miyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/miyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miyuki/subscriptions", "organizations_url": "https://api.github.com/users/miyuki/orgs", "repos_url": "https://api.github.com/users/miyuki/repos", "events_url": "https://api.github.com/users/miyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/miyuki/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ab9e91f9fcc9f7b0b8d848f1ba698bc46ce70922", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab9e91f9fcc9f7b0b8d848f1ba698bc46ce70922", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab9e91f9fcc9f7b0b8d848f1ba698bc46ce70922"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "ac05c3a2b76a780eb7b93ba90b29cbe0ff94e605", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "patch": "@@ -1,3 +1,9 @@\n+2017-05-11  Mikhail Maltsev  <maltsevm@gmail.com>\n+\n+\tPR testsuite/80580\n+\t* gimple-parser.c (c_parser_gimple_unary_expression): Check argument\n+\ttype of unary '*'.\n+\n 2017-05-09  Nathan Sidwell  <nathan@acm.org>\n \n \t* c-tree.h (pushdecl): Declare."}, {"sha": "c6c2f7aa5dc24999cd0b47486f28376bfed843e9", "filename": "gcc/c/gimple-parser.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Fc%2Fgimple-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Fc%2Fgimple-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fgimple-parser.c?ref=ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "patch": "@@ -567,6 +567,11 @@ c_parser_gimple_unary_expression (c_parser *parser)\n \top = c_parser_gimple_postfix_expression (parser);\n \tif (op.value == error_mark_node)\n \t  return ret;\n+\tif (! POINTER_TYPE_P (TREE_TYPE (op.value)))\n+\t  {\n+\t    error_at (op_loc, \"expected pointer as argument of unary %<*%>\");\n+\t    return ret;\n+\t  }\n \tfinish = op.get_finish ();\n \tlocation_t combined_loc = make_location (op_loc, op_loc, finish);\n \tret.value = build_simple_mem_ref_loc (combined_loc, op.value);"}, {"sha": "dfd8670e8be5e2728942413490ef28558039c9e8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "patch": "@@ -1,3 +1,8 @@\n+2017-05-11  Mikhail Maltsev  <maltsevm@gmail.com>\n+\n+\tPR testsuite/80580\n+\t* gcc.dg/gimplefe-error-4.c: New test.\n+\n 2017-05-10  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \t* gcc.target/powerpc/p8-vec-xl-xst.c: New file."}, {"sha": "b2ca796656bc51995a6156030cdddbdd9093ba79", "filename": "gcc/testsuite/gcc.dg/gimplefe-error-4.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-error-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac4eb40f5c7069b39eb847a136a1f690bb5444b2/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-error-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-error-4.c?ref=ac4eb40f5c7069b39eb847a136a1f690bb5444b2", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fgimple\" } */\n+\n+__GIMPLE() void a()\n+{\n+  *0 = 1; /* { dg-error \"expected pointer\" } */\n+}"}]}