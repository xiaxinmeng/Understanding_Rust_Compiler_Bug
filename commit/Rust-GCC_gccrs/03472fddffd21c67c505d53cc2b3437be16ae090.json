{"sha": "03472fddffd21c67c505d53cc2b3437be16ae090", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM0NzJmZGRmZmQyMWM2N2M1MDVkNTNjYzJiMzQzN2JlMTZhZTA5MA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-10-31T15:42:14Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-10-31T15:42:14Z"}, "message": "tree-ssa-sccvn.c (vn_reference_lookup_3): Bail out instead of aborting if the sizes of the two references don't match.\n\n\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Bail out instead of\n\taborting if the sizes of the two references don't match.\n\nFrom-SVN: r153777", "tree": {"sha": "3500b11d9754910517bb48e1a445d1d988e070c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3500b11d9754910517bb48e1a445d1d988e070c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03472fddffd21c67c505d53cc2b3437be16ae090", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03472fddffd21c67c505d53cc2b3437be16ae090", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03472fddffd21c67c505d53cc2b3437be16ae090", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03472fddffd21c67c505d53cc2b3437be16ae090/comments", "author": null, "committer": null, "parents": [{"sha": "2e57e8534f2add636680babbfaebb6fe53fcac00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e57e8534f2add636680babbfaebb6fe53fcac00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e57e8534f2add636680babbfaebb6fe53fcac00"}], "stats": {"total": 56, "additions": 54, "deletions": 2}, "files": [{"sha": "6a4c7ee48a25d47ca50918048e5ca19156df71fa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=03472fddffd21c67c505d53cc2b3437be16ae090", "patch": "@@ -1,3 +1,8 @@\n+2009-10-31  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Bail out instead of\n+\taborting if the sizes of the two references don't match.\n+\n 2009-10-31  Toon Moene  <toon@moene.org>\n \n \t* ipa-inline.c (cgraph_decide_inlining):"}, {"sha": "14c8a50d711ed8d4da457c0d1ef1cd2922dc5f07", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=03472fddffd21c67c505d53cc2b3437be16ae090", "patch": "@@ -1,9 +1,12 @@\n+2009-10-31  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/specs/rep_clause4.ads: New test.\n+\n 2009-10-30  Andy Hutchinson  <hutchinsonandy@gcc.gnu.org>\n \n \tPR target/41885\n \t* gcc.target/avr/torture/pr41885.c: New test.\n \n-\n 2009-10-30  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/specs/pack5.ads: New test."}, {"sha": "8009f876cf2939f101cdbe8f21e121633351d0ac", "filename": "gcc/testsuite/gnat.dg/specs/rep_clause4.ads", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Frep_clause4.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Frep_clause4.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Frep_clause4.ads?ref=03472fddffd21c67c505d53cc2b3437be16ae090", "patch": "@@ -0,0 +1,42 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O\" }\n+\n+package Rep_Clause4 is\n+\n+  type Uns16 is mod 2**16;\n+\n+  type Rec32 is\n+    record\n+      W1 : Uns16 := 1;\n+      W2 : Uns16 := 2;\n+    end record;\n+  for Rec32 use\n+    record\n+      W1 at 0 range 0..15;\n+      W2 at 2 range 0..15;\n+    end record;\n+  for Rec32'size use 32;\n+\n+  type Rec48 is\n+    record\n+      W1andW2 : Rec32;\n+      W3      : Uns16;\n+    end record;\n+  for Rec48 use\n+    record\n+      W1andW2 at 0 range 0..31;\n+      W3      at 4 range 0..15;\n+    end record;\n+  for Rec48'size use 48;\n+\n+  type Rec_Type is\n+    record\n+      Field1 : Rec48;\n+    end record;\n+  for Rec_Type use\n+    record\n+      Field1 at 0 range 0 .. 47;\n+    end record;\n+  for Rec_Type'size use 48;\n+\n+end Rep_Clause4;"}, {"sha": "0a8dcaa36c4b091c06e8dd6b2ae3dca1629fb0f1", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03472fddffd21c67c505d53cc2b3437be16ae090/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=03472fddffd21c67c505d53cc2b3437be16ae090", "patch": "@@ -1157,7 +1157,9 @@ vn_reference_lookup_3 (ao_ref *ref, tree vuse, void *vr_)\n       /* Adjust *ref from the new operands.  */\n       if (!ao_ref_init_from_vn_reference (&r, vr->set, vr->type, vr->operands))\n \treturn (void *)-1;\n-      gcc_assert (ref->size == r.size);\n+      /* This can happen with bitfields.  */\n+      if (ref->size != r.size)\n+\treturn (void *)-1;\n       *ref = r;\n \n       /* Keep looking for the adjusted *REF / VR pair.  */"}]}