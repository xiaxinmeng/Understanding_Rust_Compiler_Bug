{"sha": "42959b0c5aa6a3ff084de4b27f4b3830c417697f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI5NTliMGM1YWE2YTNmZjA4NGRlNGIyN2Y0YjM4MzBjNDE3Njk3Zg==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2014-01-27T16:27:02Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-01-27T16:27:02Z"}, "message": "gnat_ugn.texi: Add Short_Enums to documentation of -gnatet/-gnateT.\n\n2014-01-27  Robert Dewar  <dewar@adacore.com>\n\n\t* gnat_ugn.texi: Add Short_Enums to documentation of\n\t-gnatet/-gnateT.\n\n2014-01-27  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_prag.adb (Analyze_Input_Item): Correct check for input\n\titem in same package.\n\t* sem_util.ads, sem_util.adb (Within_Scope): New function.\n\nFrom-SVN: r207134", "tree": {"sha": "3dfaaf77aed500ab01118f57efe4e570c777627e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3dfaaf77aed500ab01118f57efe4e570c777627e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/42959b0c5aa6a3ff084de4b27f4b3830c417697f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42959b0c5aa6a3ff084de4b27f4b3830c417697f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42959b0c5aa6a3ff084de4b27f4b3830c417697f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42959b0c5aa6a3ff084de4b27f4b3830c417697f/comments", "author": null, "committer": null, "parents": [{"sha": "84e90123e6f43db35b07d8081fcdcb7fd08cdeda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84e90123e6f43db35b07d8081fcdcb7fd08cdeda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84e90123e6f43db35b07d8081fcdcb7fd08cdeda"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "929297bbce33a859db0012c1162dcf4f3c034c39", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=42959b0c5aa6a3ff084de4b27f4b3830c417697f", "patch": "@@ -1,3 +1,14 @@\n+2014-01-27  Robert Dewar  <dewar@adacore.com>\n+\n+\t* gnat_ugn.texi: Add Short_Enums to documentation of\n+\t-gnatet/-gnateT.\n+\n+2014-01-27  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_prag.adb (Analyze_Input_Item): Correct check for input\n+\titem in same package.\n+\t* sem_util.ads, sem_util.adb (Within_Scope): New function.\n+\n 2014-01-26  Arnaud Charlet  <charlet@adacore.com>\n \n \t* a-intnam-lynxos.ads, mlib-tgt-specific-lynxos.adb,"}, {"sha": "17983ef9d643d4c312c500155be50a5fb6321a39", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=42959b0c5aa6a3ff084de4b27f4b3830c417697f", "patch": "@@ -3869,6 +3869,7 @@ Long_Size                  : Pos; -- Standard.Long_Integer'Size\n Maximum_Alignment          : Pos; -- Maximum permitted alignment\n Max_Unaligned_Field        : Pos; -- Maximum size for unaligned bit field\n Pointer_Size               : Pos; -- System.Address'Size\n+Short_Enums                : Nat; -- Short foreign convention enums?\n Short_Size                 : Pos; -- Standard.Short_Integer'Size\n Strict_Alignment           : Nat; -- Strict alignment?\n System_Allocator_Alignment : Nat; -- Alignment for malloc calls"}, {"sha": "70f90173a971a05c78d013fc64cd3aedbb8b9688", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=42959b0c5aa6a3ff084de4b27f4b3830c417697f", "patch": "@@ -2551,11 +2551,11 @@ package body Sem_Prag is\n                      --  The input cannot denote states or variables declared\n                      --  within the related package.\n \n-                     if In_Same_Code_Unit (Item, Input_Id) then\n+                     if Within_Scope (Input_Id, Current_Scope) then\n                         Error_Msg_Name_1 := Chars (Pack_Id);\n                         Error_Msg_NE\n                           (\"input item & cannot denote a visible variable or \"\n-                           & \"state of package %\", Input, Input_Id);\n+                           & \"state in package %\", Input, Input_Id);\n \n                      --  Detect a duplicate use of the same input item\n "}, {"sha": "9c9a227a5680797995783de7a5e7a0a804b9a429", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=42959b0c5aa6a3ff084de4b27f4b3830c417697f", "patch": "@@ -16100,6 +16100,25 @@ package body Sem_Util is\n       return Is_Init_Proc (S);\n    end Within_Init_Proc;\n \n+   ------------------\n+   -- Within_Scope --\n+   ------------------\n+\n+   function Within_Scope (E : Entity_Id; S : Entity_Id) return Boolean is\n+      SE : Entity_Id;\n+   begin\n+      SE := Scope (E);\n+      loop\n+         if SE = S then\n+            return True;\n+         elsif SE = Standard_Standard then\n+            return False;\n+         else\n+            SE := Scope (SE);\n+         end if;\n+      end loop;\n+   end Within_Scope;\n+\n    ----------------\n    -- Wrong_Type --\n    ----------------"}, {"sha": "2e291aef44398e416c95f6f2ff458e8085371769", "filename": "gcc/ada/sem_util.ads", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fsem_util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42959b0c5aa6a3ff084de4b27f4b3830c417697f/gcc%2Fada%2Fsem_util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.ads?ref=42959b0c5aa6a3ff084de4b27f4b3830c417697f", "patch": "@@ -1754,6 +1754,9 @@ package Sem_Util is\n    function Within_Init_Proc return Boolean;\n    --  Determines if Current_Scope is within an init proc\n \n+   function Within_Scope (E : Entity_Id; S : Entity_Id) return Boolean;\n+   --  Returns True if entity Id is declared within scope S\n+\n    procedure Wrong_Type (Expr : Node_Id; Expected_Type : Entity_Id);\n    --  Output error message for incorrectly typed expression. Expr is the node\n    --  for the incorrectly typed construct (Etype (Expr) is the type found),"}]}