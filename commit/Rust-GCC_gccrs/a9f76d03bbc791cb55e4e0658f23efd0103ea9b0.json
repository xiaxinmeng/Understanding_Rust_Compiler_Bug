{"sha": "a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTlmNzZkMDNiYmM3OTFjYjU1ZTRlMDY1OGYyM2VmZDAxMDNlYTliMA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2021-01-04T20:43:25Z"}, "committer": {"name": "Ian Lance Taylor", "email": "iant@golang.org", "date": "2021-01-05T21:48:59Z"}, "message": "internal/cpu: more build fixes for Go1.16beta1 release\n\nSome files were missing from the libgo copy of internal/cpu, because they\nused to only declare CacheLinePadSize which libgo gets from goarch.sh.\nNow they also declare doinit, so copy them over.  Adjust cpu_other.go.\n\nFix the amd64p32 build by adding a build constraint to cpu_no_name.go.\n\nFixes PR go/98493\n\nReviewed-on: https://go-review.googlesource.com/c/gofrontend/+/281472", "tree": {"sha": "29505078464b7c8342c58d2309490a5657805da8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29505078464b7c8342c58d2309490a5657805da8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/comments", "author": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ianlancetaylor", "id": 3194333, "node_id": "MDQ6VXNlcjMxOTQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/3194333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ianlancetaylor", "html_url": "https://github.com/ianlancetaylor", "followers_url": "https://api.github.com/users/ianlancetaylor/followers", "following_url": "https://api.github.com/users/ianlancetaylor/following{/other_user}", "gists_url": "https://api.github.com/users/ianlancetaylor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ianlancetaylor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ianlancetaylor/subscriptions", "organizations_url": "https://api.github.com/users/ianlancetaylor/orgs", "repos_url": "https://api.github.com/users/ianlancetaylor/repos", "events_url": "https://api.github.com/users/ianlancetaylor/events{/privacy}", "received_events_url": "https://api.github.com/users/ianlancetaylor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db7ce388dcef50f11af9717570e1e49415733d43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db7ce388dcef50f11af9717570e1e49415733d43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db7ce388dcef50f11af9717570e1e49415733d43"}], "stats": {"total": 65, "additions": 64, "deletions": 1}, "files": [{"sha": "c80f1cc1425b33519ae6cbd90d986521383ee18b", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -1,4 +1,4 @@\n-2b5bdd22b7ec2fc13ae0f644c781f64c1a209500\n+5b075d039a20f32b9c2711ca67a3e52fba74f957\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "06962cfc518fada14eaabed0a7c7950bec774dae", "filename": "libgo/go/internal/cpu/cpu_arm.go", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_arm.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_arm.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_arm.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -4,6 +4,8 @@\n \n package cpu\n \n+// const CacheLinePadSize = 32\n+\n // arm doesn't have a 'cpuid' equivalent, so we rely on HWCAP/HWCAP2.\n // These are initialized by archauxv() and should not be changed after they are\n // initialized."}, {"sha": "48755b6d1ae521f5d73c7ea1d6d9dd552b5b9e09", "filename": "libgo/go/internal/cpu/cpu_mips.go", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mips.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mips.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mips.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -0,0 +1,10 @@\n+// Copyright 2017 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+package cpu\n+\n+// const CacheLinePadSize = 32\n+\n+func doinit() {\n+}"}, {"sha": "58fbd3db93dbfd1fb7942edbb970c5398d0406c2", "filename": "libgo/go/internal/cpu/cpu_mips64x.go", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mips64x.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mips64x.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mips64x.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -6,6 +6,8 @@\n \n package cpu\n \n+// const CacheLinePadSize = 32\n+\n // This is initialized by archauxv and should not be changed after it is\n // initialized.\n var HWCap uint"}, {"sha": "48755b6d1ae521f5d73c7ea1d6d9dd552b5b9e09", "filename": "libgo/go/internal/cpu/cpu_mipsle.go", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mipsle.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mipsle.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_mipsle.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -0,0 +1,10 @@\n+// Copyright 2017 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+package cpu\n+\n+// const CacheLinePadSize = 32\n+\n+func doinit() {\n+}"}, {"sha": "f028a92c9357179af653c1140e0956099423b9a2", "filename": "libgo/go/internal/cpu/cpu_no_name.go", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_no_name.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_no_name.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_no_name.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -4,6 +4,7 @@\n \n // +build !386\n // +build !amd64\n+// +build !amd64p32\n \n package cpu\n "}, {"sha": "ba3c42ad569833094c8862ae635a2a72e88a30ac", "filename": "libgo/go/internal/cpu/cpu_other.go", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_other.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_other.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_other.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -7,13 +7,16 @@\n // +build !amd64p32\n // +build !arm\n // +build !arm64\n+// +build !mips\n+// +build !mipsle\n // +build !mips64\n // +build !mips64le\n // +build !ppc\n // +build !ppc64\n // +build !ppc64le\n // +build !riscv64\n // +build !s390x\n+// +build !wasm\n \n package cpu\n "}, {"sha": "0a48f6a0a06e45de5215ea5bb3d8b1a3dcf511d6", "filename": "libgo/go/internal/cpu/cpu_ppc64x.go", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_ppc64x.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_ppc64x.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_ppc64x.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -0,0 +1,23 @@\n+// Copyright 2017 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+// +build ppc ppc64 ppc64le\n+\n+package cpu\n+\n+// const CacheLinePadSize = 128\n+\n+func doinit() {\n+\toptions = []option{\n+\t\t{Name: \"darn\", Feature: &PPC64.HasDARN},\n+\t\t{Name: \"scv\", Feature: &PPC64.HasSCV},\n+\t\t{Name: \"power9\", Feature: &PPC64.IsPOWER9},\n+\t}\n+\n+\tosinit()\n+}\n+\n+func isSet(hwc uint, value uint) bool {\n+\treturn hwc&value != 0\n+}"}, {"sha": "c9ab4ca4eecfa494db2e14d116e745baf8f9a4ad", "filename": "libgo/go/internal/cpu/cpu_wasm.go", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_wasm.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_wasm.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_wasm.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -0,0 +1,10 @@\n+// Copyright 2018 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+package cpu\n+\n+// const CacheLinePadSize = 64\n+\n+func doinit() {\n+}"}, {"sha": "338d90992c504d80a3371db2156a1f59f0efbbb7", "filename": "libgo/go/internal/cpu/cpu_x86.go", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_x86.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9f76d03bbc791cb55e4e0658f23efd0103ea9b0/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_x86.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fcpu%2Fcpu_x86.go?ref=a9f76d03bbc791cb55e4e0658f23efd0103ea9b0", "patch": "@@ -6,6 +6,8 @@\n \n package cpu\n \n+// const CacheLinePadSize = 64\n+\n // cpuid is implemented in cpu_x86.s.\n func cpuid(eaxArg, ecxArg uint32) (eax, ebx, ecx, edx uint32)\n "}]}