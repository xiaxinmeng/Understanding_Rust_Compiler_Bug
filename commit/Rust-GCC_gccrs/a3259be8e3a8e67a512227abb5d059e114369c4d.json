{"sha": "a3259be8e3a8e67a512227abb5d059e114369c4d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTMyNTliZThlM2E4ZTY3YTUxMjIyN2FiYjVkMDU5ZTExNDM2OWM0ZA==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2003-02-11T21:42:31Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2003-02-11T21:42:31Z"}, "message": "xtensa.md (set_frame_ptr): Change rtl to set reg a7.\n\n        * config/xtensa/xtensa.md (set_frame_ptr): Change rtl to set reg a7.\n        * config/xtensa/xtensa.c (xtensa_reorg): Search for UNSPECV_SET_FP\n        as a SET pattern.\n\nFrom-SVN: r62730", "tree": {"sha": "95efd16752c19f3085a79758ecd15e0ef0938a1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95efd16752c19f3085a79758ecd15e0ef0938a1e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3259be8e3a8e67a512227abb5d059e114369c4d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3259be8e3a8e67a512227abb5d059e114369c4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3259be8e3a8e67a512227abb5d059e114369c4d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3259be8e3a8e67a512227abb5d059e114369c4d/comments", "author": null, "committer": null, "parents": [{"sha": "16ddb59931ee80859aaff3624ca4f30e48295a22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16ddb59931ee80859aaff3624ca4f30e48295a22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16ddb59931ee80859aaff3624ca4f30e48295a22"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "69ef14413a676a5854b4948dd1d1fc1d96115727", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3259be8e3a8e67a512227abb5d059e114369c4d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3259be8e3a8e67a512227abb5d059e114369c4d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3259be8e3a8e67a512227abb5d059e114369c4d", "patch": "@@ -1,3 +1,9 @@\n+2003-02-11  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config/xtensa/xtensa.md (set_frame_ptr): Change rtl to set reg a7.\n+\t* config/xtensa/xtensa.c (xtensa_reorg): Search for UNSPECV_SET_FP\n+\tas a SET pattern.\n+\n 2003-02-11  Roger Sayle  <roger@eyesopen.com>\n \n \t* builtins.c:  Fix failure caused by commiting wrong patch."}, {"sha": "f2546288ed9123b522463b2061033cf8a20fa682", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3259be8e3a8e67a512227abb5d059e114369c4d/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3259be8e3a8e67a512227abb5d059e114369c4d/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=a3259be8e3a8e67a512227abb5d059e114369c4d", "patch": "@@ -2241,8 +2241,9 @@ xtensa_reorg (first)\n \tcontinue;\n \n       pat = PATTERN (insn);\n-      if (GET_CODE (pat) == UNSPEC_VOLATILE\n-\t  && (XINT (pat, 1) == UNSPECV_SET_FP))\n+      if (GET_CODE (pat) == SET\n+\t  && GET_CODE (SET_SRC (pat)) == UNSPEC_VOLATILE\n+\t  && (XINT (SET_SRC (pat), 1) == UNSPECV_SET_FP))\n \t{\n \t  set_frame_ptr_insn = insn;\n \t  break;"}, {"sha": "cbda342917b38361fcd06aa9636c607c5184b9c8", "filename": "gcc/config/xtensa/xtensa.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3259be8e3a8e67a512227abb5d059e114369c4d/gcc%2Fconfig%2Fxtensa%2Fxtensa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3259be8e3a8e67a512227abb5d059e114369c4d/gcc%2Fconfig%2Fxtensa%2Fxtensa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.md?ref=a3259be8e3a8e67a512227abb5d059e114369c4d", "patch": "@@ -2387,7 +2387,7 @@\n ;; to set up the frame pointer.\n \n (define_insn \"set_frame_ptr\"\n-  [(unspec_volatile [(const_int 0)] UNSPECV_SET_FP)]\n+  [(set (reg:SI A7_REG) (unspec_volatile [(const_int 0)] UNSPECV_SET_FP))]\n   \"\"\n   \"*\n {\n@@ -2401,7 +2401,7 @@\n \n ;; Post-reload splitter to remove fp assignment when it's not needed.\n (define_split\n-  [(unspec_volatile [(const_int 0)] UNSPECV_SET_FP)]\n+  [(set (reg:SI A7_REG) (unspec_volatile [(const_int 0)] UNSPECV_SET_FP))]\n   \"reload_completed && !frame_pointer_needed\"\n   [(unspec [(const_int 0)] UNSPEC_NOP)]\n   \"\")"}]}