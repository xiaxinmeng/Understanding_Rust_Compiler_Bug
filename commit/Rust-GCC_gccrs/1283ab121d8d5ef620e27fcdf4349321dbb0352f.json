{"sha": "1283ab121d8d5ef620e27fcdf4349321dbb0352f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTI4M2FiMTIxZDhkNWVmNjIwZTI3ZmNkZjQzNDkzMjFkYmIwMzUyZg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2007-12-25T12:05:23Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-12-25T12:05:23Z"}, "message": "re PR fortran/34514 (Accepts invalid: Dimensions specified for N after initialisation)\n\n2007-12-25  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/34514\n        * decl.c (attr_decl1): Reject specifying the DIMENSION for\n        already initialized variable.\n        (do_parm): Reject PARAMETER for already initialized variable.\n\n2007-12-25  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/34514\n        * gfortran.dg/initialization_17.f90: New.\n\nFrom-SVN: r131169", "tree": {"sha": "73f43fe114afe6c19e945f51a0f1c8317bb62669", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/73f43fe114afe6c19e945f51a0f1c8317bb62669"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1283ab121d8d5ef620e27fcdf4349321dbb0352f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1283ab121d8d5ef620e27fcdf4349321dbb0352f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1283ab121d8d5ef620e27fcdf4349321dbb0352f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1283ab121d8d5ef620e27fcdf4349321dbb0352f/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a1ba31ced9af40c3ac37a968870e0363f7ae08ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1ba31ced9af40c3ac37a968870e0363f7ae08ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1ba31ced9af40c3ac37a968870e0363f7ae08ca"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "3e16f9bd5a8f255ce0c5457ad2052a377a0a89e5", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1283ab121d8d5ef620e27fcdf4349321dbb0352f", "patch": "@@ -1,3 +1,10 @@\n+2007-12-25  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/34514\n+\t* decl.c (attr_decl1): Reject specifying the DIMENSION for\n+\talready initialized variable.\n+\t(do_parm): Reject PARAMETER for already initialized variable.\n+\n 2007-12-25  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/34533"}, {"sha": "dd8eb35ae6b5e456e23522344f80cf8bffa33963", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=1283ab121d8d5ef620e27fcdf4349321dbb0352f", "patch": "@@ -5151,6 +5151,14 @@ attr_decl1 (void)\n \t  goto cleanup;\n \t}\n \n+      if (current_attr.dimension && sym->value)\n+\t{\n+\t  gfc_error (\"Dimensions specified for %s at %L after its \"\n+\t\t     \"initialisation\", sym->name, &var_locus);\n+\t  m = MATCH_ERROR;\n+\t  goto cleanup;\n+\t}\n+\n       if ((current_attr.allocatable || current_attr.pointer)\n \t  && (m == MATCH_YES) && (as->type != AS_DEFERRED))\n \t{\n@@ -5753,6 +5761,13 @@ do_parm (void)\n       goto cleanup;\n     }\n \n+  if (sym->value)\n+    {\n+      gfc_error (\"Initializing already initialized variable at %C\");\n+      m = MATCH_ERROR;\n+      goto cleanup;\n+    }\n+\n   if (sym->ts.type == BT_CHARACTER\n       && sym->ts.cl != NULL\n       && sym->ts.cl->length != NULL"}, {"sha": "069733d071299578f6b56a8aaedcbaad22fc44bc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1283ab121d8d5ef620e27fcdf4349321dbb0352f", "patch": "@@ -1,3 +1,8 @@\n+2007-12-25  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/34514\n+\t* gfortran.dg/initialization_17.f90: New.\n+\n 2007-12-25  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/34566"}, {"sha": "c7b73b583df13b3e3e8e7a5602e1cea0b8ec71ab", "filename": "gcc/testsuite/gfortran.dg/initialization_17.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_17.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1283ab121d8d5ef620e27fcdf4349321dbb0352f/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_17.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finitialization_17.f90?ref=1283ab121d8d5ef620e27fcdf4349321dbb0352f", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+!\n+! PR fortran/34514\n+!\n+! Initialization and typespec changes.\n+!\n+integer :: n = 5, m = 7\n+parameter (n = 42) ! { dg-error \"Initializing already initialized variable\" }\n+dimension :: m(3)  ! { dg-error \"after its initialisation\" } \n+end"}]}