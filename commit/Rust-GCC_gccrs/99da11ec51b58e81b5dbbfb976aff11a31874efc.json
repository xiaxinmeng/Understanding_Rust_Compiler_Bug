{"sha": "99da11ec51b58e81b5dbbfb976aff11a31874efc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTlkYTExZWM1MWI1OGU4MWI1ZGJiZmI5NzZhZmYxMWEzMTg3NGVmYw==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2017-12-17T23:23:28Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@gcc.gnu.org", "date": "2017-12-17T23:23:28Z"}, "message": "c-attribs.c (common_handle_aligned_attribute): Avoid issuing an error for attribute warn_if_not_aligned.\n\n\ngcc/c-family/ChangeLog:\n\n\t* c-attribs.c (common_handle_aligned_attribute): Avoid issuing\n\tan error for attribute warn_if_not_aligned.\n\nFrom-SVN: r255767", "tree": {"sha": "1c8b2506a2ff4d4932769b42b7893d2a33ecb576", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c8b2506a2ff4d4932769b42b7893d2a33ecb576"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99da11ec51b58e81b5dbbfb976aff11a31874efc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99da11ec51b58e81b5dbbfb976aff11a31874efc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99da11ec51b58e81b5dbbfb976aff11a31874efc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99da11ec51b58e81b5dbbfb976aff11a31874efc/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0ba75dc08ed4913904dd47c839538b61a2901efb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ba75dc08ed4913904dd47c839538b61a2901efb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ba75dc08ed4913904dd47c839538b61a2901efb"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "dd71fd01fe025893f4b823a5c0dc903714b785ea", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99da11ec51b58e81b5dbbfb976aff11a31874efc/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99da11ec51b58e81b5dbbfb976aff11a31874efc/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=99da11ec51b58e81b5dbbfb976aff11a31874efc", "patch": "@@ -1,3 +1,8 @@\n+2017-12-17  Martin Sebor  <msebor@redhat.com>\n+\n+\t* c-attribs.c (common_handle_aligned_attribute): Avoid issuing\n+\tan error for attribute warn_if_not_aligned.\n+\n 2017-12-16  Martin Sebor  <msebor@redhat.com>\n \n \tPR tree-optimization/78918"}, {"sha": "0ff02996ade29a79dbdfddf6c681dac78c746b15", "filename": "gcc/c-family/c-attribs.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99da11ec51b58e81b5dbbfb976aff11a31874efc/gcc%2Fc-family%2Fc-attribs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99da11ec51b58e81b5dbbfb976aff11a31874efc/gcc%2Fc-family%2Fc-attribs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-attribs.c?ref=99da11ec51b58e81b5dbbfb976aff11a31874efc", "patch": "@@ -1879,14 +1879,17 @@ common_handle_aligned_attribute (tree *node, tree name, tree args, int flags,\n       curalign /= BITS_PER_UNIT;\n       bitalign /= BITS_PER_UNIT;\n \n+      bool diagd = true;\n       if (DECL_USER_ALIGN (decl) || DECL_USER_ALIGN (last_decl))\n-\twarning (OPT_Wattributes,\n-\t\t \"ignoring attribute %<%E (%u)%> because it conflicts with \"\n-\t\t \"attribute %<%E (%u)%>\", name, bitalign, name, curalign);\n-      else\n+\tdiagd = warning (OPT_Wattributes,\n+\t\t\t  \"ignoring attribute %<%E (%u)%> because it conflicts \"\n+\t\t\t  \"with attribute %<%E (%u)%>\",\n+\t\t\t  name, bitalign, name, curalign);\n+      else if (!warn_if_not_aligned_p)\n+\t/* Do not error out for attribute warn_if_not_aligned.  */\n \terror (\"alignment for %q+D must be at least %d\", decl, curalign);\n \n-      if (note)\n+      if (diagd && note)\n \tinform (DECL_SOURCE_LOCATION (last_decl), \"previous declaration here\");\n \n       *no_add_attrs = true;"}]}