{"sha": "82118acc18e416b9c82c82ce7737f5e6246d6574", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODIxMThhY2MxOGU0MTZiOWM4MmM4MmNlNzczN2Y1ZTYyNDZkNjU3NA==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2020-10-12T14:41:21Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2020-10-12T16:52:46Z"}, "message": "operator_trunc_mod::wi_fold: Return VARYING for mod by zero.\n\ngcc/ChangeLog:\n\n\tPR tree-optimization/97378\n\t* range-op.cc (operator_trunc_mod::wi_fold): Return VARYING for mod by zero.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.dg/pr97378.c: New test.", "tree": {"sha": "793d21605efeec162a33c87ed58bd3213708387e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/793d21605efeec162a33c87ed58bd3213708387e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/82118acc18e416b9c82c82ce7737f5e6246d6574", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82118acc18e416b9c82c82ce7737f5e6246d6574", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82118acc18e416b9c82c82ce7737f5e6246d6574", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82118acc18e416b9c82c82ce7737f5e6246d6574/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3175d40fc52fb8eb3c3b18cc343d773da24434fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3175d40fc52fb8eb3c3b18cc343d773da24434fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3175d40fc52fb8eb3c3b18cc343d773da24434fb"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "6108de367ad5837d9ff21101431e2f51ab46b093", "filename": "gcc/range-op.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82118acc18e416b9c82c82ce7737f5e6246d6574/gcc%2Frange-op.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82118acc18e416b9c82c82ce7737f5e6246d6574/gcc%2Frange-op.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frange-op.cc?ref=82118acc18e416b9c82c82ce7737f5e6246d6574", "patch": "@@ -1359,7 +1359,7 @@ operator_div::wi_fold (irange &r, tree type,\n   // If we're definitely dividing by zero, there's nothing to do.\n   if (wi_zero_p (type, divisor_min, divisor_max))\n     {\n-      r.set_undefined ();\n+      r.set_varying (type);\n       return;\n     }\n \n@@ -2624,10 +2624,10 @@ operator_trunc_mod::wi_fold (irange &r, tree type,\n   signop sign = TYPE_SIGN (type);\n   unsigned prec = TYPE_PRECISION (type);\n \n-  // Mod 0 is undefined.  Return undefined.\n+  // Mod 0 is undefined.\n   if (wi_zero_p (type, rh_lb, rh_ub))\n     {\n-      r.set_undefined ();\n+      r.set_varying (type);\n       return;\n     }\n "}, {"sha": "27e4a1f4321a9b9e36f2ca4f2dd3301e54355d02", "filename": "gcc/testsuite/gcc.dg/pr97378.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/82118acc18e416b9c82c82ce7737f5e6246d6574/gcc%2Ftestsuite%2Fgcc.dg%2Fpr97378.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/82118acc18e416b9c82c82ce7737f5e6246d6574/gcc%2Ftestsuite%2Fgcc.dg%2Fpr97378.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr97378.c?ref=82118acc18e416b9c82c82ce7737f5e6246d6574", "patch": "@@ -0,0 +1,15 @@\n+// { dg-do compile }\n+// { dg-options \"-O2\" }\n+\n+int a, b, c;\n+void d() {\n+e : {\n+  long f;\n+  long *g = &f;\n+  if ((a != 0) - (b = 0))\n+    ;\n+  else\n+    a &= (*g %= a *= c) >= (*g || f);\n+  goto e;\n+}\n+}"}]}