{"sha": "781fb9a006d48621849d4aa45b7f33657733f319", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzgxZmI5YTAwNmQ0ODYyMTg0OWQ0YWE0NWI3ZjMzNjU3NzMzZjMxOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2020-10-29T09:41:22Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-11-26T08:39:58Z"}, "message": "[Ada] Add support for .c output file\n\ngcc/ada/\n\n\t* osint-c.adb (Set_Output_Object_File_Name): Add support for\n\t.c output file.", "tree": {"sha": "66feee5fc3c78220407f59904ba2edd8fb3ac5ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/66feee5fc3c78220407f59904ba2edd8fb3ac5ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/781fb9a006d48621849d4aa45b7f33657733f319", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/781fb9a006d48621849d4aa45b7f33657733f319", "html_url": "https://github.com/Rust-GCC/gccrs/commit/781fb9a006d48621849d4aa45b7f33657733f319", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/781fb9a006d48621849d4aa45b7f33657733f319/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa83f3d0b7cf49ae10eed1fc4539ba1997035fef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa83f3d0b7cf49ae10eed1fc4539ba1997035fef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa83f3d0b7cf49ae10eed1fc4539ba1997035fef"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "4fc0998a79172b86db2aff24bc742f50b0a9340c", "filename": "gcc/ada/osint-c.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/781fb9a006d48621849d4aa45b7f33657733f319/gcc%2Fada%2Fosint-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/781fb9a006d48621849d4aa45b7f33657733f319/gcc%2Fada%2Fosint-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint-c.adb?ref=781fb9a006d48621849d4aa45b7f33657733f319", "patch": "@@ -475,15 +475,14 @@ package body Osint.C is\n \n    begin\n       --  Make sure that the object file has the expected extension\n+      --  Allow for either .o or .c (for C code generation)\n \n       if NL <= EL\n          or else\n-          (Name (NL - EL + Name'First .. Name'Last) /= Ext\n+          (not Generate_Asm\n+             and then Name (NL - EL + Name'First .. Name'Last) /= Ext\n              and then Name (NL - 2 + Name'First .. Name'Last) /= \".o\"\n-             and then not Generate_Asm\n-             and then\n-               (not Generate_C_Code\n-                  or else Name (NL - 2 + Name'First .. Name'Last) /= \".c\"))\n+             and then Name (NL - 2 + Name'First .. Name'Last) /= \".c\")\n       then\n          Fail (\"incorrect object file extension\");\n       end if;"}]}