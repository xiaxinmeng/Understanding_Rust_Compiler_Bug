{"sha": "7e270317cf28ff1563c60ca1fe72c9523817440a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2UyNzAzMTdjZjI4ZmYxNTYzYzYwY2ExZmU3MmM5NTIzODE3NDQwYQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2004-04-16T22:32:38Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2004-04-16T22:32:38Z"}, "message": "install.texi (Specific, [...]): Reflect working IRIX 5 port.\n\n\t* doc/install.texi (Specific, mips-sgi-irix5): Reflect working\n\tIRIX 5 port.\n\tRemove -save-temps workaround, handled automatically.\n\tRequire GNU binutils 2.15 for debugging.\n\tRemove SGI make warnings since GNU make is now required.\n\t(Specific, mips-sgi-irix6): Some markup fixes.\n\tDescribe MIPSpro C problems and workarounds.\n\tMention working O32 ABI support.\n\tRecommend GNU as 2.15 for O32 with debugging.\n\tRemove description of fixed structure pass/return bug.\n\nFrom-SVN: r80772", "tree": {"sha": "0f92f483fa1b5d52e378daab8db7dac914ee856f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f92f483fa1b5d52e378daab8db7dac914ee856f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e270317cf28ff1563c60ca1fe72c9523817440a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e270317cf28ff1563c60ca1fe72c9523817440a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e270317cf28ff1563c60ca1fe72c9523817440a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e270317cf28ff1563c60ca1fe72c9523817440a/comments", "author": null, "committer": null, "parents": [{"sha": "1db673ca875902e6d955adb95ae4f7c7df02b831", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1db673ca875902e6d955adb95ae4f7c7df02b831", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1db673ca875902e6d955adb95ae4f7c7df02b831"}], "stats": {"total": 112, "additions": 41, "deletions": 71}, "files": [{"sha": "0c7c2ab972b01f5210b4519d630e058a329f23fb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e270317cf28ff1563c60ca1fe72c9523817440a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e270317cf28ff1563c60ca1fe72c9523817440a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7e270317cf28ff1563c60ca1fe72c9523817440a", "patch": "@@ -1,3 +1,16 @@\n+2004-04-16  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* doc/install.texi (Specific, mips-sgi-irix5): Reflect working\n+\tIRIX 5 port.\n+\tRemove -save-temps workaround, handled automatically.\n+\tRequire GNU binutils 2.15 for debugging.\n+\tRemove SGI make warnings since GNU make is now required.\n+\t(Specific, mips-sgi-irix6): Some markup fixes.\n+\tDescribe MIPSpro C problems and workarounds.\n+\tMention working O32 ABI support.\n+\tRecommend GNU as 2.15 for O32 with debugging.\n+\tRemove description of fixed structure pass/return bug.\n+\n 2004-04-16  DJ Delorie  <dj@redhat.com>\n \n \t* sdbout.c (sdbout_one_type): Use TYPE_VALUES for enums, not"}, {"sha": "5b02f4931a46edffa2d9b03ba02899d142d3a335", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 28, "deletions": 71, "changes": 99, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e270317cf28ff1563c60ca1fe72c9523817440a/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e270317cf28ff1563c60ca1fe72c9523817440a/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=7e270317cf28ff1563c60ca1fe72c9523817440a", "patch": "@@ -3156,52 +3156,27 @@ if you use the GNU assembler and linker.\n @end html\n @heading @anchor{mips-sgi-irix5}mips-sgi-irix5\n \n-This configuration has considerable problems, which will be fixed in a\n-future release.\n-\n-In order to compile GCC on an SGI running IRIX 5, the ``compiler_dev.hdr''\n-subsystem must be installed from the IDO CD-ROM supplied by Silicon\n-Graphics.  It is also available for download from\n-@uref{http://www.sgi.com/developers/devtools/apis/ido.html,,http://www.sgi.com/developers/devtools/apis/ido.html}.\n-\n-@samp{make compare} may fail on version 5 of IRIX unless you add\n-@option{-save-temps} to @code{CFLAGS}.  On these systems, the name of the\n-assembler input file is stored in the object file, and that makes\n-comparison fail if it differs between the @code{stage1} and\n-@code{stage2} compilations.  The option @option{-save-temps} forces a\n-fixed name to be used for the assembler input file, instead of a\n-randomly chosen name in @file{/tmp}.  Do not add @option{-save-temps}\n-unless the comparisons fail without that option.  If you do you\n-@option{-save-temps}, you will have to manually delete the @samp{.i} and\n-@samp{.s} files after each series of compilations.\n+In order to compile GCC on an SGI running IRIX 5, the @samp{compiler_dev.hdr}\n+subsystem must be installed from the IDO CD-ROM supplied by SGI@.\n+It is also available for download from\n+@uref{http://www.sgi.com/developers/devtools/apis/ido.html}.\n \n If you use the MIPS C compiler to bootstrap, it may be necessary\n to increase its table size for switch statements with the\n @option{-Wf,-XNg1500} option.  If you use the @option{-O2}\n optimization option, you also need to use @option{-Olimit 3000}.\n \n-To enable debugging under IRIX 5, you must use GNU @command{as} 2.11.2\n-or later,\n-and use the @option{--with-gnu-as} configure option when configuring GCC.\n-GNU @command{as} is distributed as part of the binutils package.\n-When using release 2.11.2, you need to apply a patch\n-@uref{http://sources.redhat.com/ml/binutils/2001-07/msg00352.html,,http://sources.redhat.com/ml/binutils/2001-07/msg00352.html}\n-which will be included in the next release of binutils.\n-\n-When building GCC, the build process loops rebuilding @command{cc1} over\n-and over again.  This happens on @samp{mips-sgi-irix5.2}, and possibly\n-other platforms.  It has been reported that this is a known bug in the\n-@command{make} shipped with IRIX 5.2.  We recommend you use GNU\n-@command{make} instead of the vendor supplied @command{make} program;\n-however, you may have success with @command{smake} on IRIX 5.2 if you do\n-not have GNU @command{make} available.\n+To enable debugging under IRIX 5, you must use GNU binutils 2.15 or\n+later, and use the @option{--with-gnu-as} and @option{--with-gnu-ld}\n+@command{configure} options when configuring GCC@.  You need to use GNU\n+@command{ar} and @command{nm}, also distributed with GNU binutils.\n \n @html\n <hr />\n @end html\n @heading @anchor{mips-sgi-irix6}mips-sgi-irix6\n \n-If you are using IRIX @command{cc} as your bootstrap compiler, you must\n+If you are using SGI's MIPSpro @command{cc} as your bootstrap compiler, you must\n ensure that the N32 ABI is in use.  To test this, compile a simple C\n file with @command{cc} and then run @command{file} on the\n resulting object file.  The output should look like:\n@@ -3224,15 +3199,20 @@ test.o: ELF 64-bit MSB @dots{}\n \n then your version of @command{cc} uses the O32 or N64 ABI by default.  You\n should set the environment variable @env{CC} to @samp{cc -n32}\n-before configuring GCC@.\n+before configuring GCC@.  SGI's MIPSpro 7.2 assembler may misassemble\n+parts of the compiler, causing bootstrap failures.  MIPSpro 7.3 is\n+known to work.  MIPSpro C 7.4 may cause bootstrap failures, too, due\n+to a bug when inlining @code{memcmp}.  Either add @code{-U__INLINE_INTRINSICS}\n+to the @env{CC} environment variable as a workaround or upgrade to\n+MIPSpro C 7.4.1m.\n \n If you want the resulting @command{gcc} to run on old 32-bit systems\n-with the MIPS R4400 CPU, you need to ensure that only code for the mips3\n+with the MIPS R4400 CPU, you need to ensure that only code for the @samp{mips3}\n instruction set architecture (ISA) is generated.  While GCC 3.x does\n this correctly, both GCC 2.95 and SGI's MIPSpro @command{cc} may change\n the ISA depending on the machine where GCC is built.  Using one of them\n-as the bootstrap compiler may result in mips4 code, which won't run at\n-all on mips3-only systems.  For the test program above, you should see:\n+as the bootstrap compiler may result in @samp{mips4} code, which won't run at\n+all on @samp{mips3}-only systems.  For the test program above, you should see:\n \n @smallexample\n test.o: ELF N32 MSB mips-3 @dots{}\n@@ -3247,52 +3227,29 @@ test.o: ELF N32 MSB mips-4 @dots{}\n instead, you should set the environment variable @env{CC} to @samp{cc\n -n32 -mips3} or @samp{gcc -mips3} respectively before configuring GCC@.\n \n-GCC on IRIX 6 is usually built to support both the N32 and N64 ABIs.  If\n-you build GCC on a system that doesn't have the N64 libraries installed,\n+GCC on IRIX 6 is usually built to support the N32, O32 and N64 ABIs.  If\n+you build GCC on a system that doesn't have the N64 libraries installed\n+or cannot run 64-bit binaries,\n you need to configure with @option{--disable-multilib} so GCC doesn't\n-try to use them.  Look for @file{/usr/lib64/libc.so.1} to see if you\n+try to use them.  This will disable building the O32 libraries, too.\n+Look for @file{/usr/lib64/libc.so.1} to see if you\n have the 64-bit libraries installed.\n \n-You must @emph{not} use GNU @command{as} (which isn't built anyway as of\n-binutils 2.11.2) on IRIX 6 platforms; doing so will only cause problems.\n-\n-GCC does not currently support generating O32 ABI binaries in the\n-@samp{mips-sgi-irix6} configurations.  It is possible to create a GCC\n-with O32 ABI only support by configuring it for the @samp{mips-sgi-irix5}\n-target and using a patched GNU @command{as} 2.11.2 as documented in the\n-@uref{#mips-sgi-irix5,,@samp{mips-sgi-irix5}} section above.  Using the\n-native assembler requires patches to GCC which will be included in a\n-future release.  It is\n-expected that O32 ABI support will be available again in a future release.\n+To enable debugging for the O32 ABI, you must use GNU @command{as} from\n+GNU binutils 2.15 or later.  You may also use GNU @command{ld}, but\n+this is not required and currently causes some problems with Ada.\n \n The @option{--enable-threads} option doesn't currently work, a patch is\n in preparation for a future release.  The @option{--enable-libgcj}\n option is disabled by default: IRIX 6 uses a very low default limit\n-(20480) for the command line length.  Although libtool contains a\n+(20480) for the command line length.  Although @command{libtool} contains a\n workaround for this problem, at least the N64 @samp{libgcj} is known not\n to build despite this, running into an internal error of the native\n @command{ld}.  A sure fix is to increase this limit (@samp{ncargs}) to\n its maximum of 262144 bytes.  If you have root access, you can use the\n @command{systune} command to do this.\n \n-GCC does not correctly pass/return structures which are\n-smaller than 16 bytes and which are not 8 bytes.  The problem is very\n-involved and difficult to fix.  It affects a number of other targets also,\n-but IRIX 6 is affected the most, because it is a 64-bit target, and 4 byte\n-structures are common.  The exact problem is that structures are being padded\n-at the wrong end, e.g.@: a 4 byte structure is loaded into the lower 4 bytes\n-of the register when it should be loaded into the upper 4 bytes of the\n-register.\n-\n-GCC is consistent with itself, but not consistent with the SGI C compiler\n-(and the SGI supplied runtime libraries), so the only failures that can\n-happen are when there are library functions that take/return such\n-structures. There are very few such library functions.  Currently this\n-is known to affect @code{inet_ntoa}, @code{inet_lnaof},\n-@code{inet_netof}, @code{inet_makeaddr}, and @code{semctl}.  Until the\n-bug is fixed, GCC contains workarounds for the known affected functions.\n-\n-See @uref{http://freeware.sgi.com/,,http://freeware.sgi.com/} for more\n+See @uref{http://freeware.sgi.com/} for more\n information about using GCC on IRIX platforms.\n \n @html"}]}