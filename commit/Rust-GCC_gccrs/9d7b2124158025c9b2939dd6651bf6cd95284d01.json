{"sha": "9d7b2124158025c9b2939dd6651bf6cd95284d01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ3YjIxMjQxNTgwMjVjOWIyOTM5ZGQ2NjUxYmY2Y2Q5NTI4NGQwMQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-07-25T15:56:27Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-07-25T15:56:27Z"}, "message": "re PR c++/49347 (G++ rejects Solaris spawn.h use of __restrict)\n\n\tPR c++/49347\n\t* inclhack.def (solaris_posix_spawn_restrict): New fix.\n\t* fixincl.x: Regenerate.\n\t* tests/base/spawn.h: New test.\n\nFrom-SVN: r176758", "tree": {"sha": "424c40d91a22cc59cd12ad27c269c0c260a8c9c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/424c40d91a22cc59cd12ad27c269c0c260a8c9c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d7b2124158025c9b2939dd6651bf6cd95284d01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d7b2124158025c9b2939dd6651bf6cd95284d01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d7b2124158025c9b2939dd6651bf6cd95284d01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d7b2124158025c9b2939dd6651bf6cd95284d01/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f4da258f520dd886a7a1dd9d1c4d71c02f68b46a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4da258f520dd886a7a1dd9d1c4d71c02f68b46a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4da258f520dd886a7a1dd9d1c4d71c02f68b46a"}], "stats": {"total": 92, "additions": 87, "deletions": 5}, "files": [{"sha": "b063cfd1f96e2ae1972053faa8765e1a769c2e00", "filename": "fixincludes/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2FChangeLog?ref=9d7b2124158025c9b2939dd6651bf6cd95284d01", "patch": "@@ -1,3 +1,10 @@\n+2011-07-25  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR c++/49347\n+\t* inclhack.def (solaris_posix_spawn_restrict): New fix.\n+\t* fixincl.x: Regenerate.\n+\t* tests/base/spawn.h: New test.\n+\n 2011-06-08  Douglas B Rupp  <rupp@gnat.com>\n \n \t* configure.ac (AC_USE_SYSTEM_EXTENSIONS): Add."}, {"sha": "9363ae9bdbeeccea3b1b6ec75584513fe761e77b", "filename": "fixincludes/fixincl.x", "status": "modified", "additions": 48, "deletions": 5, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ffixincl.x?ref=9d7b2124158025c9b2939dd6651bf6cd95284d01", "patch": "@@ -2,11 +2,11 @@\n  * \n  * DO NOT EDIT THIS FILE   (fixincl.x)\n  * \n- * It has been AutoGen-ed  Sunday June  5, 2011 at 09:04:54 PM CDT\n+ * It has been AutoGen-ed  Saturday July 23, 2011 at 01:16:35 AM MEST\n  * From the definitions    inclhack.def\n  * and the template file   fixincl\n  */\n-/* DO NOT SVN-MERGE THIS FILE, EITHER Sun Jun  5 21:04:54 CDT 2011\n+/* DO NOT SVN-MERGE THIS FILE, EITHER Sat Jul 23 01:16:35 MEST 2011\n  *\n  * You must regenerate it.  Use the ./genfixes script.\n  *\n@@ -15,7 +15,7 @@\n  * certain ANSI-incompatible system header files which are fixed to work\n  * correctly with ANSI C and placed in a directory that GNU C will search.\n  *\n- * This file contains 211 fixup descriptions.\n+ * This file contains 212 fixup descriptions.\n  *\n  * See README for more information.\n  *\n@@ -7006,6 +7006,43 @@ static const char* apzSolaris_Int_TypesPatch[] = {\n     \"(defined(_STDC_C99) || !defined(_STRICT_STDC) || defined(__GNUC__))\",\n     (char*)NULL };\n \n+/* * * * * * * * * * * * * * * * * * * * * * * * * *\n+ *\n+ *  Description of Solaris_Posix_Spawn_Restrict fix\n+ */\n+tSCC zSolaris_Posix_Spawn_RestrictName[] =\n+     \"solaris_posix_spawn_restrict\";\n+\n+/*\n+ *  File name selection pattern\n+ */\n+tSCC zSolaris_Posix_Spawn_RestrictList[] =\n+  \"spawn.h\\0\";\n+/*\n+ *  Machine/OS name selection pattern\n+ */\n+tSCC* apzSolaris_Posix_Spawn_RestrictMachs[] = {\n+        \"*-*-solaris2*\",\n+        (const char*)NULL };\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zSolaris_Posix_Spawn_RestrictSelect0[] =\n+       \"(.*[ \\t]+)([a-z]+)\\\\[_RESTRICT_KYWD\\\\](.*)\";\n+\n+#define    SOLARIS_POSIX_SPAWN_RESTRICT_TEST_CT  1\n+static tTestDesc aSolaris_Posix_Spawn_RestrictTests[] = {\n+  { TT_EGREP,    zSolaris_Posix_Spawn_RestrictSelect0, (regex_t*)NULL }, };\n+\n+/*\n+ *  Fix Command Arguments for Solaris_Posix_Spawn_Restrict\n+ */\n+static const char* apzSolaris_Posix_Spawn_RestrictPatch[] = {\n+    \"format\",\n+    \"%1*_RESTRICT_KYWD %2%3\",\n+    (char*)NULL };\n+\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Solaris_Stdio_Tag fix\n@@ -8591,9 +8628,9 @@ static const char* apzX11_SprintfPatch[] = {\n  *\n  *  List of all fixes\n  */\n-#define REGEX_COUNT          250\n+#define REGEX_COUNT          251\n #define MACH_LIST_SIZE_LIMIT 181\n-#define FIX_COUNT            211\n+#define FIX_COUNT            212\n \n /*\n  *  Enumerate the fixes\n@@ -8771,6 +8808,7 @@ typedef enum {\n     SOLARIS_INT_LIMITS_2_FIXIDX,\n     SOLARIS_INT_LIMITS_3_FIXIDX,\n     SOLARIS_INT_TYPES_FIXIDX,\n+    SOLARIS_POSIX_SPAWN_RESTRICT_FIXIDX,\n     SOLARIS_STDIO_TAG_FIXIDX,\n     SOLARIS_SYS_VA_LIST_FIXIDX,\n     STATSSWTCH_FIXIDX,\n@@ -9673,6 +9711,11 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      SOLARIS_INT_TYPES_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aSolaris_Int_TypesTests,   apzSolaris_Int_TypesPatch, 0 },\n \n+  {  zSolaris_Posix_Spawn_RestrictName,    zSolaris_Posix_Spawn_RestrictList,\n+     apzSolaris_Posix_Spawn_RestrictMachs,\n+     SOLARIS_POSIX_SPAWN_RESTRICT_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n+     aSolaris_Posix_Spawn_RestrictTests,   apzSolaris_Posix_Spawn_RestrictPatch, 0 },\n+\n   {  zSolaris_Stdio_TagName,    zSolaris_Stdio_TagList,\n      apzSolaris_Stdio_TagMachs,\n      SOLARIS_STDIO_TAG_TEST_CT, FD_MACH_ONLY,"}, {"sha": "df6d1a955ff9c2ab6245692c4fe6391808ee88a7", "filename": "fixincludes/inclhack.def", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Finclhack.def?ref=9d7b2124158025c9b2939dd6651bf6cd95284d01", "patch": "@@ -3705,6 +3705,23 @@ fix = {\n };\n \n \n+/*\n+ * Solaris 10+ <spawn.h> uses char *const argv[_RESTRICT_KYWD] in the\n+ * posix_spawn declarations, which doesn't work with C++.\n+ */\n+fix = {\n+    hackname  = solaris_posix_spawn_restrict;\n+    files     = spawn.h;\n+    mach      = '*-*-solaris2*';\n+    c_fix     = format;\n+    c_fix_arg = \"%1*_RESTRICT_KYWD %2%3\";\n+    select    = \"(.*[ \\t]+)([a-z]+)\\\\[_RESTRICT_KYWD\\\\](.*)\";\n+    test_text =\n+    \"char *const argv[_RESTRICT_KYWD],\\n\"\n+    \"char *const envp[_RESTRICT_KYWD]);\";\n+};\n+\n+\n /*\n  * Sun Solaris 8 has what appears to be some gross workaround for\n  * some old version of their c++ compiler.  G++ doesn't want it"}, {"sha": "6590f3b043d2145e8fecc9e6c7717b52c8800f6f", "filename": "fixincludes/tests/base/spawn.h", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2Ftests%2Fbase%2Fspawn.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d7b2124158025c9b2939dd6651bf6cd95284d01/fixincludes%2Ftests%2Fbase%2Fspawn.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fspawn.h?ref=9d7b2124158025c9b2939dd6651bf6cd95284d01", "patch": "@@ -0,0 +1,15 @@\n+/*  DO NOT EDIT THIS FILE.\n+\n+    It has been auto-edited by fixincludes from:\n+\n+\t\"fixinc/tests/inc/spawn.h\"\n+\n+    This had to be done to correct non-standard usages in the\n+    original, manufacturer supplied header file.  */\n+\n+\n+\n+#if defined( SOLARIS_POSIX_SPAWN_RESTRICT_CHECK )\n+char *const *_RESTRICT_KYWD argv,\n+char *const *_RESTRICT_KYWD envp);\n+#endif  /* SOLARIS_POSIX_SPAWN_RESTRICT_CHECK */"}]}