{"sha": "42991a911685a419794c47eba640d35ca60c2d99", "node_id": "C_kwDOANBUbNoAKDQyOTkxYTkxMTY4NWE0MTk3OTRjNDdlYmE2NDBkMzVjYTYwYzJkOTk", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-05-06T20:37:47Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-05-06T22:54:09Z"}, "message": "libstdc++: Simplify std::normal_distribution equality operator\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/random.tcc (operator==): Only check\n\tnormal_distribution::_M_saved_available once.\n\t* testsuite/26_numerics/random/normal_distribution/operators/equal.cc:\n\tCheck equality after state changes.\n\t* testsuite/26_numerics/random/pr60037-neg.cc: Adjust dg-error\n\tlineno.", "tree": {"sha": "8cf0c1c4a117fff9ce2c1d90b96480ee65d55d67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8cf0c1c4a117fff9ce2c1d90b96480ee65d55d67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/42991a911685a419794c47eba640d35ca60c2d99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42991a911685a419794c47eba640d35ca60c2d99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42991a911685a419794c47eba640d35ca60c2d99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42991a911685a419794c47eba640d35ca60c2d99/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "909ef4e2727ddc50a32d6ad379a1f1ccc1043c6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/909ef4e2727ddc50a32d6ad379a1f1ccc1043c6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/909ef4e2727ddc50a32d6ad379a1f1ccc1043c6a"}], "stats": {"total": 32, "additions": 22, "deletions": 10}, "files": [{"sha": "cb1d3675783650550da390b06eb435983243ff5e", "filename": "libstdc++-v3/include/bits/random.tcc", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42991a911685a419794c47eba640d35ca60c2d99/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42991a911685a419794c47eba640d35ca60c2d99/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc?ref=42991a911685a419794c47eba640d35ca60c2d99", "patch": "@@ -1907,15 +1907,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     {\n       if (__d1._M_param == __d2._M_param\n \t  && __d1._M_saved_available == __d2._M_saved_available)\n-\t{\n-\t  if (__d1._M_saved_available\n-\t      && __d1._M_saved == __d2._M_saved)\n-\t    return true;\n-\t  else if(!__d1._M_saved_available)\n-\t    return true;\n-\t  else\n-\t    return false;\n-\t}\n+\treturn __d1._M_saved_available ? __d1._M_saved == __d2._M_saved : true;\n       else\n \treturn false;\n     }"}, {"sha": "81534e95797921677d3b4075f08379212acc1c86", "filename": "libstdc++-v3/testsuite/26_numerics/random/normal_distribution/operators/equal.cc", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42991a911685a419794c47eba640d35ca60c2d99/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fnormal_distribution%2Foperators%2Fequal.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42991a911685a419794c47eba640d35ca60c2d99/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fnormal_distribution%2Foperators%2Fequal.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fnormal_distribution%2Foperators%2Fequal.cc?ref=42991a911685a419794c47eba640d35ca60c2d99", "patch": "@@ -34,8 +34,28 @@ test01()\n   VERIFY( !(u == v) );\n }\n \n+void\n+test02()\n+{\n+  std::normal_distribution<double> u(5.0, 2.0), v(u);\n+  VERIFY( u == v );\n+  u.reset();\n+  VERIFY( u == v );\n+\n+  std::minstd_rand0 g1, g2;\n+  (void) u(g1); // u._M_saved_available = true\n+  VERIFY( !(u == v) );\n+  (void) v(g2); // v._M_saved_available = true\n+  VERIFY( u == v );\n+  u.reset();    // u._M_saved_available = false\n+  VERIFY( !(u == v) );\n+  v.reset();    // v._M_saved_available = false\n+  VERIFY( u == v );\n+}\n+\n int main()\n {\n   test01();\n+  test02();\n   return 0;\n }"}, {"sha": "c58f480640f63597921db92cc6617bd3349ff831", "filename": "libstdc++-v3/testsuite/26_numerics/random/pr60037-neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/42991a911685a419794c47eba640d35ca60c2d99/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fpr60037-neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/42991a911685a419794c47eba640d35ca60c2d99/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fpr60037-neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F26_numerics%2Frandom%2Fpr60037-neg.cc?ref=42991a911685a419794c47eba640d35ca60c2d99", "patch": "@@ -12,4 +12,4 @@ auto x = std::generate_canonical<std::size_t,\n \n // { dg-error \"static assertion failed: template argument must be a floating point type\" \"\" { target *-*-* } 169 }\n \n-// { dg-error \"static assertion failed: template argument must be a floating point type\" \"\" { target *-*-* } 3356 }\n+// { dg-error \"static assertion failed: template argument must be a floating point type\" \"\" { target *-*-* } 3348 }"}]}