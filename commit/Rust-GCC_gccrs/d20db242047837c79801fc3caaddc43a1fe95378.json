{"sha": "d20db242047837c79801fc3caaddc43a1fe95378", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDIwZGIyNDIwNDc4MzdjNzk4MDFmYzNjYWFkZGM0M2ExZmU5NTM3OA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2003-12-18T21:03:42Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2003-12-18T21:03:42Z"}, "message": "re PR c++/12253 ([tree-ssa] ICE on conversion to std::string inside array initialization)\n\n        PR c++/12253\n        * init.c (build_vec_init): Initialization of an element from\n        an initializer list is also a full-expression.\n\nFrom-SVN: r74798", "tree": {"sha": "297f97f5645cfbbbb995c6e2665df951c2c59ce7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/297f97f5645cfbbbb995c6e2665df951c2c59ce7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d20db242047837c79801fc3caaddc43a1fe95378", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d20db242047837c79801fc3caaddc43a1fe95378", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d20db242047837c79801fc3caaddc43a1fe95378", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d20db242047837c79801fc3caaddc43a1fe95378/comments", "author": null, "committer": null, "parents": [{"sha": "a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3bf324c4674ca8a2d09f739c48be2cc59f1a789", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3bf324c4674ca8a2d09f739c48be2cc59f1a789"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "3bb48002967825cf4e0f1c9d11a635e93cb92627", "filename": "gcc/testsuite/g++.dg/init/array12.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d20db242047837c79801fc3caaddc43a1fe95378/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray12.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d20db242047837c79801fc3caaddc43a1fe95378/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray12.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Farray12.C?ref=d20db242047837c79801fc3caaddc43a1fe95378", "patch": "@@ -0,0 +1,28 @@\n+// PR c++/12253\n+// Bug: We were failing to destroy the temporary A passed to the\n+// constructor for b[0] before going on to construct b[1].\n+\n+// { dg-do run }\n+\n+extern \"C\" int printf (const char *, ...);\n+\n+int c;\n+int r;\n+\n+struct A\n+{\n+  A() { printf (\"A()\\n\"); if (c++) r = 1; }\n+  A(const A&) { printf (\"A(const A&)\\n\"); ++c; }\n+  ~A() { printf (\"~A()\\n\"); --c; }\n+};\n+ \n+struct B\n+{\n+  B(int, const A& = A()) { printf (\"B()\\n\"); }\n+};\n+ \n+int main()\n+{\n+  B b[] = { 0, 0 };\n+  return r;\n+}"}]}