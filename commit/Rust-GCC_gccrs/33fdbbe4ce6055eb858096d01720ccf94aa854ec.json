{"sha": "33fdbbe4ce6055eb858096d01720ccf94aa854ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNmZGJiZTRjZTYwNTVlYjg1ODA5NmQwMTcyMGNjZjk0YWE4NTRlYw==", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2021-09-14T12:17:35Z"}, "committer": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2021-09-14T12:17:35Z"}, "message": "Fortran: Add missing ST_OMP_END_SCOPE handling [PR102313]\n\n\tPR fortran/102313\n\ngcc/fortran/ChangeLog:\n\n\t* parse.c (gfc_ascii_statement): Add missing ST_OMP_END_SCOPE.\n\ngcc/testsuite/ChangeLog:\n\n\t* gfortran.dg/goacc/unexpected-end.f90: New test.\n\t* gfortran.dg/gomp/unexpected-end.f90: New test.", "tree": {"sha": "1612883531dabd9e4010657a98edbd206b9feb5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1612883531dabd9e4010657a98edbd206b9feb5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33fdbbe4ce6055eb858096d01720ccf94aa854ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33fdbbe4ce6055eb858096d01720ccf94aa854ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33fdbbe4ce6055eb858096d01720ccf94aa854ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33fdbbe4ce6055eb858096d01720ccf94aa854ec/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e2103982da7be8781900653a5f7c5a5d0a57d38a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2103982da7be8781900653a5f7c5a5d0a57d38a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2103982da7be8781900653a5f7c5a5d0a57d38a"}], "stats": {"total": 149, "additions": 149, "deletions": 0}, "files": [{"sha": "7d765a0866da7e11ad6cb05a5cad3b17db013e16", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33fdbbe4ce6055eb858096d01720ccf94aa854ec/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33fdbbe4ce6055eb858096d01720ccf94aa854ec/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=33fdbbe4ce6055eb858096d01720ccf94aa854ec", "patch": "@@ -2406,6 +2406,9 @@ gfc_ascii_statement (gfc_statement st)\n     case ST_OMP_END_DO_SIMD:\n       p = \"!$OMP END DO SIMD\";\n       break;\n+    case ST_OMP_END_SCOPE:\n+      p = \"!$OMP END SCOPE\";\n+      break;\n     case ST_OMP_END_SIMD:\n       p = \"!$OMP END SIMD\";\n       break;"}, {"sha": "442724fea83880393897c54bce772caa1220d940", "filename": "gcc/testsuite/gfortran.dg/goacc/unexpected-end.f90", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33fdbbe4ce6055eb858096d01720ccf94aa854ec/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Funexpected-end.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33fdbbe4ce6055eb858096d01720ccf94aa854ec/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Funexpected-end.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgoacc%2Funexpected-end.f90?ref=33fdbbe4ce6055eb858096d01720ccf94aa854ec", "patch": "@@ -0,0 +1,23 @@\n+! PR fortran/102313\n+\n+!$acc end ATOMIC  ! { dg-error \"Unexpected !.ACC END ATOMIC\" }\n+\n+!$acc end DATA  ! { dg-error \"Unexpected !.ACC END DATA\" }\n+\n+!$acc end HOST DATA  ! { dg-error \"Unclassifiable OpenACC directive\" }\n+\n+!$acc end KERNELS  ! { dg-error \"Unexpected !.ACC END KERNELS\" }\n+\n+!$acc end KERNELS LOOP  ! { dg-error \"Unexpected !.ACC END KERNELS LOOP\" }\n+\n+!$acc end LOOP  ! { dg-error \"Unexpected !.ACC END LOOP\" }\n+\n+!$acc end PARALLEL  ! { dg-error \"Unexpected !.ACC END PARALLEL\" }\n+\n+!$acc end PARALLEL LOOP  ! { dg-error \"Unexpected !.ACC END PARALLEL LOOP\" }\n+\n+!$acc end SERIAL  ! { dg-error \"Unexpected !.ACC END SERIAL\" }\n+\n+!$acc end SERIAL LOOP  ! { dg-error \"Unexpected !.ACC END SERIAL LOOP\" }\n+\n+end"}, {"sha": "d2e8daa3fde7e3b3b3932fac2e44f3b8e5db4cdc", "filename": "gcc/testsuite/gfortran.dg/gomp/unexpected-end.f90", "status": "added", "additions": 123, "deletions": 0, "changes": 123, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33fdbbe4ce6055eb858096d01720ccf94aa854ec/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Funexpected-end.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33fdbbe4ce6055eb858096d01720ccf94aa854ec/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Funexpected-end.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Funexpected-end.f90?ref=33fdbbe4ce6055eb858096d01720ccf94aa854ec", "patch": "@@ -0,0 +1,123 @@\n+! PR fortran/102313\n+\n+!$omp end ATOMIC  ! { dg-error \"Unexpected !.OMP END ATOMIC\" }\n+\n+!$omp end CRITICAL  ! { dg-error \"Unexpected !.OMP END CRITICAL\" }\n+\n+!$omp end DISTRIBUTE  ! { dg-error \"Unexpected !.OMP END DISTRIBUTE\" }\n+\n+!$omp end DISTRIBUTE PARALLEL DO  ! { dg-error \"Unexpected !.OMP END DISTRIBUTE PARALLEL DO\" }\n+\n+!$omp end DISTRIBUTE PARALLEL DO SIMD  ! { dg-error \"Unexpected !.OMP END DISTRIBUTE PARALLEL DO SIMD\" }\n+\n+!$omp end DISTRIBUTE SIMD  ! { dg-error \"Unexpected !.OMP END DISTRIBUTE SIMD\" }\n+\n+!$omp end DO  ! { dg-error \"Unexpected !.OMP END DO\" }\n+\n+!$omp end DO SIMD  ! { dg-error \"Unexpected !.OMP END DO SIMD\" }\n+\n+!$omp end LOOP  ! { dg-error \"Unclassifiable OpenMP directive\" }\n+\n+!$omp parallel loop\n+do i = 1, 5\n+end do\n+!$omp end LOOP  ! { dg-error \"Unclassifiable OpenMP directive\" }\n+\n+!$omp end MASKED  ! { dg-error \"Unexpected !.OMP END MASKED\" }\n+\n+!$omp end MASKED TASKLOOP  ! { dg-error \"Unexpected !.OMP END MASKED TASKLOOP\" }\n+\n+!$omp end MASKED TASKLOOP SIMD  ! { dg-error \"Unexpected !.OMP END MASKED TASKLOOP SIMD\" }\n+\n+!$omp end MASTER  ! { dg-error \"Unexpected !.OMP END MASTER\" }\n+\n+!$omp end MASTER TASKLOOP  ! { dg-error \"Unexpected !.OMP END MASTER TASKLOOP\" }\n+\n+!$omp end MASTER TASKLOOP SIMD  ! { dg-error \"Unexpected !.OMP END MASTER TASKLOOP SIMD\" }\n+\n+!$omp end ORDERED  ! { dg-error \"Unexpected !.OMP END ORDERED\" }\n+\n+!$omp end PARALLEL  ! { dg-error \"Unexpected !.OMP END PARALLEL\" }\n+\n+!$omp end PARALLEL DO  ! { dg-error \"Unexpected !.OMP END PARALLEL DO\" }\n+\n+!$omp end PARALLEL DO SIMD  ! { dg-error \"Unexpected !.OMP END PARALLEL DO SIMD\" }\n+\n+!$omp loop\n+!$omp end PARALLEL LOOP  ! { dg-error \"Unexpected junk\" }\n+\n+!$omp end PARALLEL MASKED  ! { dg-error \"Unexpected !.OMP END PARALLEL MASKED\" }\n+\n+!$omp end PARALLEL MASKED TASKLOOP  ! { dg-error \"Unexpected !.OMP END PARALLEL MASKED TASKLOOP\" }\n+\n+!$omp end PARALLEL MASKED TASKLOOP SIMD  ! { dg-error \"Unexpected !.OMP END PARALLEL MASKED TASKLOOP SIMD\" }\n+\n+!$omp end PARALLEL MASTER  ! { dg-error \"Unexpected !.OMP END PARALLEL MASTER\" }\n+\n+!$omp end PARALLEL MASTER TASKLOOP  ! { dg-error \"Unexpected !.OMP END PARALLEL MASTER TASKLOOP\" }\n+\n+!$omp end PARALLEL MASTER TASKLOOP SIMD  ! { dg-error \"Unexpected !.OMP END PARALLEL MASTER TASKLOOP SIMD\" }\n+\n+!$omp end PARALLEL SECTIONS  ! { dg-error \"Unexpected !.OMP END PARALLEL SECTIONS\" }\n+\n+!$omp end PARALLEL WORKSHARE  ! { dg-error \"Unexpected !.OMP END PARALLEL WORKSHARE\" }\n+\n+!$omp end SCOPE  ! { dg-error \"Unexpected !.OMP END SCOPE\" }\n+\n+!$omp end SECTIONS  ! { dg-error \"Unexpected !.OMP END SECTIONS\" }\n+\n+!$omp end SIMD  ! { dg-error \"Unexpected !.OMP END SIMD\" }\n+\n+!$omp end SINGLE  ! { dg-error \"Unexpected !.OMP END SINGLE\" }\n+\n+!$omp end TARGET  ! { dg-error \"Unexpected !.OMP END TARGET\" }\n+\n+!$omp end TARGET DATA  ! { dg-error \"Unexpected !.OMP END TARGET DATA\" }\n+\n+!$omp end TARGET PARALLEL  ! { dg-error \"Unexpected !.OMP END TARGET PARALLEL\" }\n+\n+!$omp end TARGET PARALLEL DO  ! { dg-error \"Unexpected !.OMP END TARGET PARALLEL DO\" }\n+\n+!$omp end TARGET PARALLEL DO SIMD  ! { dg-error \"Unexpected !.OMP END TARGET PARALLEL DO SIMD\" }\n+\n+!$omp end TARGET PARALLEL LOOP  ! { dg-error \"Unexpected junk\" }\n+\n+!$omp end TARGET SIMD  ! { dg-error \"Unexpected !.OMP END TARGET SIMD\" }\n+\n+!$omp end TARGET TEAMS  ! { dg-error \"Unexpected !.OMP END TARGET TEAMS\" }\n+\n+!$omp end TARGET TEAMS DISTRIBUTE  ! { dg-error \"Unexpected !.OMP END TARGET TEAMS DISTRIBUTE\" }\n+\n+!$omp end TARGET TEAMS DISTRIBUTE PARALLEL DO  ! { dg-error \"Unexpected !.OMP END TARGET TEAMS DISTRIBUTE PARALLEL DO\" }\n+\n+!$omp end TARGET TEAMS DISTRIBUTE PARALLEL DO SIMD  ! { dg-error \"Unexpected !.OMP END TARGET TEAMS DISTRIBUTE PARALLEL DO SIMD\" }\n+\n+!$omp end TARGET TEAMS DISTRIBUTE SIMD  ! { dg-error \"Unexpected !.OMP END TARGET TEAMS DISTRIBUTE SIMD\" }\n+\n+!$omp end TARGET TEAMS LOOP  ! { dg-error \"Unexpected junk\" }\n+\n+!$omp end TASK  ! { dg-error \"Unexpected !.OMP END TASK\" }\n+\n+!$omp end TASKGROUP  ! { dg-error \"Unexpected !.OMP END TASKGROUP\" }\n+\n+!$omp end TASKLOOP  ! { dg-error \"Unexpected !.OMP END TASKLOOP\" }\n+\n+!$omp end TASKLOOP SIMD  ! { dg-error \"Unexpected !.OMP END TASKLOOP SIMD\" }\n+\n+!$omp end TEAMS  ! { dg-error \"Unexpected !.OMP END TEAMS\" }\n+\n+!$omp end TEAMS DISTRIBUTE  ! { dg-error \"Unexpected !.OMP END TEAMS DISTRIBUTE\" }\n+\n+!$omp end TEAMS DISTRIBUTE PARALLEL DO  ! { dg-error \"Unexpected !.OMP END TEAMS DISTRIBUTE PARALLEL DO\" }\n+\n+!$omp end TEAMS DISTRIBUTE PARALLEL DO SIMD  ! { dg-error \"Unexpected !.OMP END TEAMS DISTRIBUTE PARALLEL DO SIMD\" }\n+\n+!$omp end TEAMS DISTRIBUTE SIMD  ! { dg-error \"Unexpected !.OMP END TEAMS DISTRIBUTE SIMD\" }\n+\n+!$omp end TEAMS LOOP  ! { dg-error \"Unexpected junk\" }\n+\n+!$omp end WORKSHARE  ! { dg-error \"Unexpected !.OMP END WORKSHARE\" }\n+\n+end  ! { dg-error \"Unexpected END statement\" }\n+\n+! { dg-excess-errors \"Unexpected end of file\" }"}]}