{"sha": "e2a450f6e8c771989af3968aa22ece380599fc0f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTJhNDUwZjZlOGM3NzE5ODlhZjM5NjhhYTIyZWNlMzgwNTk5ZmMwZg==", "commit": {"author": {"name": "Adam Megacz", "email": "adam@xwt.org", "date": "2002-10-21T01:50:14Z"}, "committer": {"name": "Adam Megacz", "email": "megacz@gcc.gnu.org", "date": "2002-10-21T01:50:14Z"}, "message": "aclocal.m4 (CHECK_FOR_BROKEN_MINGW_LD): added\n\n2002-10-20  Adam Megacz <adam@xwt.org>\n\n        * aclocal.m4 (CHECK_FOR_BROKEN_MINGW_LD): added\n        * configure.in: enabled hash sync on Win32\n        * include/win32-threads.h (_Jv_ThreadId_t): added.\n        * java/lang/natObject.cc (_Jv_MonitorEnter, _Jv_MonitorExit,\n        heavy_lock_obj_finalization_proc, wait, notify, notifyAll):\n        removed some posix-isms, use Thread::sleep() instead of usleep,\n        added code to clear bottom three bits if platform has a broken\n        linker.  * include/win32-threads.h (_Jv_ThreadId_t): added.\n\nFrom-SVN: r58344", "tree": {"sha": "960e614a2d2f3c110370c390a6f39f1130020f9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/960e614a2d2f3c110370c390a6f39f1130020f9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e2a450f6e8c771989af3968aa22ece380599fc0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2a450f6e8c771989af3968aa22ece380599fc0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2a450f6e8c771989af3968aa22ece380599fc0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2a450f6e8c771989af3968aa22ece380599fc0f/comments", "author": null, "committer": null, "parents": [{"sha": "6d0b22ecb056bc99d7ec46a6f2e677a1850a9693", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d0b22ecb056bc99d7ec46a6f2e677a1850a9693", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d0b22ecb056bc99d7ec46a6f2e677a1850a9693"}], "stats": {"total": 616, "additions": 357, "deletions": 259}, "files": [{"sha": "2894a413fc3edda825984a0f9260ddf462c493a4", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=e2a450f6e8c771989af3968aa22ece380599fc0f", "patch": "@@ -1,3 +1,14 @@\n+2002-10-20  Adam Megacz <adam@xwt.org>\n+\n+\t* aclocal.m4 (CHECK_FOR_BROKEN_MINGW_LD): added\n+\t* configure.in: enabled hash sync on Win32\n+        * include/win32-threads.h (_Jv_ThreadId_t): added.\n+        * java/lang/natObject.cc (_Jv_MonitorEnter, _Jv_MonitorExit,\n+\theavy_lock_obj_finalization_proc, wait, notify, notifyAll):\n+\tremoved some posix-isms, use Thread::sleep() instead of usleep,\n+\tadded code to clear bottom three bits if platform has a broken\n+\tlinker.  * include/win32-threads.h (_Jv_ThreadId_t): added.\n+\n 2002-10-19  Ranjit Mathew <rmathew@hotmail.com>\n \n \t* java/lang/natRuntime.cc (insertSystemProperties): Added GCJ"}, {"sha": "26e735711b9bebfdaec459cdba4792148d3a70f2", "filename": "libjava/aclocal.m4", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Faclocal.m4?ref=e2a450f6e8c771989af3968aa22ece380599fc0f", "patch": "@@ -434,3 +434,26 @@ for am_file in <<$1>>; do\n done<<>>dnl>>)\n changequote([,]))])\n \n+AC_DEFUN([CHECK_FOR_BROKEN_MINGW_LD],\n+[\n+AC_MSG_CHECKING(whether 'ld' is at least 2.13)\n+LD_PROG=`$CC --print-prog-name=ld`\n+LD_VERSION=`$LD_PROG --version`\n+LD_VERSION_MAJOR=`echo \"$LD_VERSION\" | head -1 | cut -d '.' -f 1 | cut -d ' ' -f 4`\n+LD_VERSION_MINOR=`echo \"$LD_VERSION\" | head -1 | cut -d '.' -f 2`\n+if expr \"$LD_VERSION_MAJOR\" \\> 2 > /dev/null; then\n+  LD_OK=\"ok\"\n+else\n+  if expr \"$LD_VERSION_MAJOR\" = 2 && expr \"$LD_VERSION_MINOR\" \\>= 13 > /dev/null; then\n+    LD_OK=\"ok\"\n+  fi\n+fi\n+if test \"x$LD_OK\" != x; then\n+  AC_MSG_RESULT([yes; major=$LD_VERSION_MAJOR, minor=$LD_VERSION_MINOR])\n+else\n+  AC_MSG_RESULT([no; major=$LD_VERSION_MAJOR, minor=$LD_VERSION_MINOR])\n+  AC_MSG_WARN([ld <2.13 detected; enabling JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS hack...])\n+  AC_DEFINE(JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS, 1,\n+            [Indicate that linker is not able to 8-byte align static data])\n+fi[]dnl\n+])# CHECK_FOR_BROKEN_MINGW_LD"}, {"sha": "514a1aa294e59ed60cf6127610806d04d055e31b", "filename": "libjava/configure", "status": "modified", "additions": 274, "deletions": 250, "changes": 524, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=e2a450f6e8c771989af3968aa22ece380599fc0f", "patch": "@@ -1644,7 +1644,7 @@ else\n   if { (eval echo configure:1645: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n     for file in conftest.*; do\n       case $file in\n-      *.$ac_ext | *.c | *.o | *.obj) ;;\n+      *.c | *.o | *.obj) ;;\n       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;\n       esac\n     done\n@@ -2904,6 +2904,30 @@ case \"$TARGET_ECOS\" in\n             PLATFORM=Win32\n             PLATFORMOBJS=win32.lo\n \t    PLATFORMH=win32.h\n+        \n+echo $ac_n \"checking whether 'ld' is at least 2.13\"\"... $ac_c\" 1>&6\n+echo \"configure:2910: checking whether 'ld' is at least 2.13\" >&5\n+LD_PROG=`$CC --print-prog-name=ld`\n+LD_VERSION=`$LD_PROG --version`\n+LD_VERSION_MAJOR=`echo \"$LD_VERSION\" | head -1 | cut -d '.' -f 1 | cut -d ' ' -f 4`\n+LD_VERSION_MINOR=`echo \"$LD_VERSION\" | head -1 | cut -d '.' -f 2`\n+if expr \"$LD_VERSION_MAJOR\" \\> 2 > /dev/null; then\n+  LD_OK=\"ok\"\n+else\n+  if expr \"$LD_VERSION_MAJOR\" = 2 && expr \"$LD_VERSION_MINOR\" \\>= 13 > /dev/null; then\n+    LD_OK=\"ok\"\n+  fi\n+fi\n+if test \"x$LD_OK\" != x; then\n+  echo \"$ac_t\"\"yes; major=$LD_VERSION_MAJOR, minor=$LD_VERSION_MINOR\" 1>&6\n+else\n+  echo \"$ac_t\"\"no; major=$LD_VERSION_MAJOR, minor=$LD_VERSION_MINOR\" 1>&6\n+  echo \"configure: warning: ld <2.13 detected; enabling JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS hack...\" 1>&2\n+  cat >> confdefs.h <<\\EOF\n+#define JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS 1\n+EOF\n+\n+fi\n       ;;\n       *)\n             PLATFORM=Posix\n@@ -2926,7 +2950,7 @@ esac\n \n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:2930: checking how to run the C preprocessor\" >&5\n+echo \"configure:2954: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -2941,13 +2965,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 2945 \"configure\"\n+#line 2969 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2951: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2975: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2958,13 +2982,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2962 \"configure\"\n+#line 2986 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2968: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2992: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -2975,13 +2999,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2979 \"configure\"\n+#line 3003 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2985: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3009: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -3006,7 +3030,7 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n cat > conftest.$ac_ext <<EOF\n-#line 3010 \"configure\"\n+#line 3034 \"configure\"\n #include \"confdefs.h\"\n #include <stdint.h>\n EOF\n@@ -3021,7 +3045,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 3025 \"configure\"\n+#line 3049 \"configure\"\n #include \"confdefs.h\"\n #include <inttypes.h>\n EOF\n@@ -3036,7 +3060,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 3040 \"configure\"\n+#line 3064 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n EOF\n@@ -3051,7 +3075,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 3055 \"configure\"\n+#line 3079 \"configure\"\n #include \"confdefs.h\"\n #include <sys/config.h>\n EOF\n@@ -3068,7 +3092,7 @@ rm -f conftest*\n \n \n cat > conftest.$ac_ext <<EOF\n-#line 3072 \"configure\"\n+#line 3096 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -3083,7 +3107,7 @@ fi\n rm -f conftest*\n \n cat > conftest.$ac_ext <<EOF\n-#line 3087 \"configure\"\n+#line 3111 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n EOF\n@@ -3135,7 +3159,7 @@ ZLIBTESTSPEC=\n libsubdir=.libs\n \n echo $ac_n \"checking for garbage collector to use\"\"... $ac_c\" 1>&6\n-echo \"configure:3139: checking for garbage collector to use\" >&5\n+echo \"configure:3163: checking for garbage collector to use\" >&5\n # Check whether --enable-java-gc or --disable-java-gc was given.\n if test \"${enable_java_gc+set}\" = set; then\n   enableval=\"$enable_java_gc\"\n@@ -3188,7 +3212,7 @@ esac\n \n \n echo $ac_n \"checking for thread model used by GCC\"\"... $ac_c\" 1>&6\n-echo \"configure:3192: checking for thread model used by GCC\" >&5\n+echo \"configure:3216: checking for thread model used by GCC\" >&5\n THREADS=`$CC -v 2>&1 | sed -n 's/^Thread model: //p'`\n echo \"$ac_t\"\"$THREADS\" 1>&6\n \n@@ -3303,7 +3327,7 @@ if test -d sysdep; then true; else mkdir sysdep; fi\n \n HASH_SYNC_SPEC=\n # Hash synchronization is only useful with posix threads right now.\n-if test \"$enable_hash_synchronization\" = yes && test \"$THREADS\" = \"posix\"; then\n+if test \"$enable_hash_synchronization\" = yes; then\n    HASH_SYNC_SPEC=-fhash-synchronization\n    cat >> confdefs.h <<\\EOF\n #define JV_HASH_SYNCHRONIZATION 1\n@@ -3396,12 +3420,12 @@ else\n    for ac_func in strerror ioctl select fstat open fsync sleep opendir\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3400: checking for $ac_func\" >&5\n+echo \"configure:3424: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3405 \"configure\"\n+#line 3429 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3424,7 +3448,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3428: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3452: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3451,12 +3475,12 @@ done\n    for ac_func in gmtime_r localtime_r readdir_r getpwuid_r getcwd\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3455: checking for $ac_func\" >&5\n+echo \"configure:3479: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3460 \"configure\"\n+#line 3484 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3479,7 +3503,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3483: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3507: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3506,12 +3530,12 @@ done\n    for ac_func in access stat mkdir rename rmdir unlink realpath utime chmod\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3510: checking for $ac_func\" >&5\n+echo \"configure:3534: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3515 \"configure\"\n+#line 3539 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3534,7 +3558,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3538: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3562: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3561,12 +3585,12 @@ done\n    for ac_func in nl_langinfo setlocale\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3565: checking for $ac_func\" >&5\n+echo \"configure:3589: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3570 \"configure\"\n+#line 3594 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3589,7 +3613,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3593: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3617: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3616,12 +3640,12 @@ done\n    for ac_func in inet_aton inet_addr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3620: checking for $ac_func\" >&5\n+echo \"configure:3644: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3625 \"configure\"\n+#line 3649 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3644,7 +3668,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3648: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3672: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3671,12 +3695,12 @@ done\n    for ac_func in inet_pton uname inet_ntoa\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3675: checking for $ac_func\" >&5\n+echo \"configure:3699: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3680 \"configure\"\n+#line 3704 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3699,7 +3723,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3703: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3727: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3726,12 +3750,12 @@ done\n    for ac_func in fork execvp pipe sigaction ftruncate\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3730: checking for $ac_func\" >&5\n+echo \"configure:3754: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3735 \"configure\"\n+#line 3759 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3754,7 +3778,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3758: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3782: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3782,17 +3806,17 @@ done\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:3786: checking for $ac_hdr\" >&5\n+echo \"configure:3810: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3791 \"configure\"\n+#line 3815 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3796: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3820: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3819,12 +3843,12 @@ fi\n done\n  \n    echo $ac_n \"checking for backtrace\"\"... $ac_c\" 1>&6\n-echo \"configure:3823: checking for backtrace\" >&5\n+echo \"configure:3847: checking for backtrace\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_backtrace'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3828 \"configure\"\n+#line 3852 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char backtrace(); below.  */\n@@ -3847,7 +3871,7 @@ backtrace();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3851: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3875: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_backtrace=yes\"\n else\n@@ -3883,15 +3907,15 @@ fi\n \n \n    echo $ac_n \"checking for dladdr in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:3887: checking for dladdr in -ldl\" >&5\n+echo \"configure:3911: checking for dladdr in -ldl\" >&5\n ac_lib_var=`echo dl'_'dladdr | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3895 \"configure\"\n+#line 3919 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3902,7 +3926,7 @@ int main() {\n dladdr()\n ; return 0; }\n EOF\n-if { (eval echo configure:3906: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3930: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3932,7 +3956,7 @@ do\n \n ac_safe=`echo \"$ac_file\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_file\"\"... $ac_c\" 1>&6\n-echo \"configure:3936: checking for $ac_file\" >&5\n+echo \"configure:3960: checking for $ac_file\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_file_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3990,15 +4014,15 @@ fi\n \n \n   echo $ac_n \"checking for iconv\"\"... $ac_c\" 1>&6\n-echo \"configure:3994: checking for iconv\" >&5\n+echo \"configure:4018: checking for iconv\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_func_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n     am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n     am_cv_lib_iconv=no\n     cat > conftest.$ac_ext <<EOF\n-#line 4002 \"configure\"\n+#line 4026 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -4008,7 +4032,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n        iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:4012: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4036: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_func_iconv=yes\n else\n@@ -4020,7 +4044,7 @@ rm -f conftest*\n       am_save_LIBS=\"$LIBS\"\n       LIBS=\"$LIBS $am_cv_libiconv_ldpath -liconv\"\n       cat > conftest.$ac_ext <<EOF\n-#line 4024 \"configure\"\n+#line 4048 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -4030,7 +4054,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n          iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:4034: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4058: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_lib_iconv=yes\n         am_cv_func_iconv=yes\n@@ -4051,13 +4075,13 @@ echo \"$ac_t\"\"$am_cv_func_iconv\" 1>&6\n EOF\n \n     echo $ac_n \"checking for iconv declaration\"\"... $ac_c\" 1>&6\n-echo \"configure:4055: checking for iconv declaration\" >&5\n+echo \"configure:4079: checking for iconv declaration\" >&5\n     if eval \"test \\\"`echo '$''{'am_cv_proto_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n       cat > conftest.$ac_ext <<EOF\n-#line 4061 \"configure\"\n+#line 4085 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdlib.h>\n@@ -4076,7 +4100,7 @@ int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4080: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4104: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   am_cv_proto_iconv_arg1=\"\"\n else\n@@ -4105,19 +4129,19 @@ EOF\n \n    if test $ac_cv_header_locale_h = yes; then\n     echo $ac_n \"checking for LC_MESSAGES\"\"... $ac_c\" 1>&6\n-echo \"configure:4109: checking for LC_MESSAGES\" >&5\n+echo \"configure:4133: checking for LC_MESSAGES\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4114 \"configure\"\n+#line 4138 \"configure\"\n #include \"confdefs.h\"\n #include <locale.h>\n int main() {\n return LC_MESSAGES\n ; return 0; }\n EOF\n-if { (eval echo configure:4121: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4145: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_val_LC_MESSAGES=yes\n else\n@@ -4138,20 +4162,20 @@ EOF\n     fi\n   fi\n    echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4142: checking whether struct tm is in sys/time.h or time.h\" >&5\n+echo \"configure:4166: checking whether struct tm is in sys/time.h or time.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4147 \"configure\"\n+#line 4171 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <time.h>\n int main() {\n struct tm *tp; tp->tm_sec;\n ; return 0; }\n EOF\n-if { (eval echo configure:4155: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4179: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm=time.h\n else\n@@ -4172,20 +4196,20 @@ EOF\n fi\n \n echo $ac_n \"checking for tm_zone in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:4176: checking for tm_zone in struct tm\" >&5\n+echo \"configure:4200: checking for tm_zone in struct tm\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4181 \"configure\"\n+#line 4205 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <$ac_cv_struct_tm>\n int main() {\n struct tm tm; tm.tm_zone;\n ; return 0; }\n EOF\n-if { (eval echo configure:4189: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4213: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm_zone=yes\n else\n@@ -4205,12 +4229,12 @@ EOF\n \n else\n   echo $ac_n \"checking for tzname\"\"... $ac_c\" 1>&6\n-echo \"configure:4209: checking for tzname\" >&5\n+echo \"configure:4233: checking for tzname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_var_tzname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4214 \"configure\"\n+#line 4238 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n #ifndef tzname /* For SGI.  */\n@@ -4220,7 +4244,7 @@ int main() {\n atoi(*tzname);\n ; return 0; }\n EOF\n-if { (eval echo configure:4224: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4248: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_var_tzname=yes\n else\n@@ -4245,12 +4269,12 @@ fi\n    for ac_func in gethostbyname_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4249: checking for $ac_func\" >&5\n+echo \"configure:4273: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4254 \"configure\"\n+#line 4278 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4273,7 +4297,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4277: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4301: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4300,7 +4324,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 4304 \"configure\"\n+#line 4328 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -4320,7 +4344,7 @@ rm -f conftest*\n      *\" -D_REENTRANT \"*) ;;\n      *)\n \t\techo $ac_n \"checking whether gethostbyname_r declaration requires -D_REENTRANT\"\"... $ac_c\" 1>&6\n-echo \"configure:4324: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n+echo \"configure:4348: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_gethostbyname_r_needs_reentrant'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4333,14 +4357,14 @@ ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftes\n cross_compiling=$ac_cv_prog_cxx_cross\n \n \t  cat > conftest.$ac_ext <<EOF\n-#line 4337 \"configure\"\n+#line 4361 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:4344: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4368: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=no\n else\n@@ -4350,14 +4374,14 @@ else\n   \t\tCPPFLAGS_SAVE=\"$CPPFLAGS\"\n \t\tCPPFLAGS=\"$CPPFLAGS -D_REENTRANT\"\n \t\tcat > conftest.$ac_ext <<EOF\n-#line 4354 \"configure\"\n+#line 4378 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:4361: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4385: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=yes\n else\n@@ -4392,12 +4416,12 @@ EOF\n      esac\n \n      echo $ac_n \"checking for struct hostent_data\"\"... $ac_c\" 1>&6\n-echo \"configure:4396: checking for struct hostent_data\" >&5\n+echo \"configure:4420: checking for struct hostent_data\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_struct_hostent_data'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \tcat > conftest.$ac_ext <<EOF\n-#line 4401 \"configure\"\n+#line 4425 \"configure\"\n #include \"confdefs.h\"\n \n #if GETHOSTBYNAME_R_NEEDS_REENTRANT && !defined(_REENTRANT)\n@@ -4408,7 +4432,7 @@ int main() {\n struct hostent_data data;\n ; return 0; }\n EOF\n-if { (eval echo configure:4412: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4436: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_struct_hostent_data=yes\n else\n@@ -4440,7 +4464,7 @@ done\n    # to exist where expected.  (The root issue: AC_CHECK_FUNCS assumes C\n    # linkage check is enough, yet C++ code requires proper prototypes.)\n    cat > conftest.$ac_ext <<EOF\n-#line 4444 \"configure\"\n+#line 4468 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -4451,12 +4475,12 @@ if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n    for ac_func in gethostbyaddr_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4455: checking for $ac_func\" >&5\n+echo \"configure:4479: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4460 \"configure\"\n+#line 4484 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4479,7 +4503,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4483: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4507: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4506,7 +4530,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 4510 \"configure\"\n+#line 4534 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -4533,12 +4557,12 @@ rm -f conftest*\n    for ac_func in gethostname\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4537: checking for $ac_func\" >&5\n+echo \"configure:4561: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4542 \"configure\"\n+#line 4566 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4561,7 +4585,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4565: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4589: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4585,7 +4609,7 @@ EOF\n EOF\n \n      cat > conftest.$ac_ext <<EOF\n-#line 4589 \"configure\"\n+#line 4613 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -4616,12 +4640,12 @@ done\n       for ac_func in pthread_mutexattr_settype pthread_mutexattr_setkind_np\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4620: checking for $ac_func\" >&5\n+echo \"configure:4644: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4625 \"configure\"\n+#line 4649 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4644,7 +4668,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4648: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4672: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4674,12 +4698,12 @@ done\n       for ac_func in sched_yield\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4678: checking for $ac_func\" >&5\n+echo \"configure:4702: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4683 \"configure\"\n+#line 4707 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4702,7 +4726,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4706: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4730: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4724,15 +4748,15 @@ EOF\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for sched_yield in -lrt\"\"... $ac_c\" 1>&6\n-echo \"configure:4728: checking for sched_yield in -lrt\" >&5\n+echo \"configure:4752: checking for sched_yield in -lrt\" >&5\n ac_lib_var=`echo rt'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lrt  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4736 \"configure\"\n+#line 4760 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4743,7 +4767,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:4747: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4771: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4769,15 +4793,15 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n \n \t  echo $ac_n \"checking for sched_yield in -lposix4\"\"... $ac_c\" 1>&6\n-echo \"configure:4773: checking for sched_yield in -lposix4\" >&5\n+echo \"configure:4797: checking for sched_yield in -lposix4\" >&5\n ac_lib_var=`echo posix4'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lposix4  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4781 \"configure\"\n+#line 4805 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4788,7 +4812,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:4792: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4816: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4824,7 +4848,7 @@ done\n       # We can save a little space at runtime if the mutex has m_count\n       # or __m_count.  This is a nice hack for Linux.\n       cat > conftest.$ac_ext <<EOF\n-#line 4828 \"configure\"\n+#line 4852 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -4833,7 +4857,7 @@ int main() {\n         \n ; return 0; }\n EOF\n-if { (eval echo configure:4837: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4861: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE_M_COUNT 1\n@@ -4845,7 +4869,7 @@ else\n   rm -rf conftest*\n   \n \tcat > conftest.$ac_ext <<EOF\n-#line 4849 \"configure\"\n+#line 4873 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -4854,7 +4878,7 @@ int main() {\n \t  \n ; return 0; }\n EOF\n-if { (eval echo configure:4858: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4882: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE___M_COUNT 1\n@@ -4874,12 +4898,12 @@ rm -f conftest*\n    for ac_func in gettimeofday time ftime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4878: checking for $ac_func\" >&5\n+echo \"configure:4902: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4883 \"configure\"\n+#line 4907 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4902,7 +4926,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4906: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4930: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4933,12 +4957,12 @@ done\n    for ac_func in memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4937: checking for $ac_func\" >&5\n+echo \"configure:4961: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4942 \"configure\"\n+#line 4966 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4961,7 +4985,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4965: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4989: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4991,12 +5015,12 @@ done\n    for ac_func in memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4995: checking for $ac_func\" >&5\n+echo \"configure:5019: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5000 \"configure\"\n+#line 5024 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -5019,7 +5043,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5023: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5047: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -5048,15 +5072,15 @@ done\n    fi\n \n    echo $ac_n \"checking for dlopen in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:5052: checking for dlopen in -ldl\" >&5\n+echo \"configure:5076: checking for dlopen in -ldl\" >&5\n ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5060 \"configure\"\n+#line 5084 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5067,7 +5091,7 @@ int main() {\n dlopen()\n ; return 0; }\n EOF\n-if { (eval echo configure:5071: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5095: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5112,20 +5136,20 @@ fi\n    #--------------------------------------------------------------------\n \n    echo $ac_n \"checking for socket libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:5116: checking for socket libraries\" >&5\n+echo \"configure:5140: checking for socket libraries\" >&5\n if eval \"test \\\"`echo '$''{'gcj_cv_lib_sockets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   gcj_cv_lib_sockets=\n      gcj_checkBoth=0\n      unset ac_cv_func_connect\n      echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:5124: checking for connect\" >&5\n+echo \"configure:5148: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5129 \"configure\"\n+#line 5153 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -5148,7 +5172,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5152: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5176: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -5171,22 +5195,22 @@ fi\n      if test \"$gcj_checkSocket\" = 1; then\n \t unset ac_cv_func_connect\n \t echo $ac_n \"checking for main in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:5175: checking for main in -lsocket\" >&5\n+echo \"configure:5199: checking for main in -lsocket\" >&5\n ac_lib_var=`echo socket'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5183 \"configure\"\n+#line 5207 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:5190: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5214: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5213,12 +5237,12 @@ fi\n \t LIBS=\"$LIBS -lsocket -lnsl\"\n \t unset ac_cv_func_accept\n \t echo $ac_n \"checking for accept\"\"... $ac_c\" 1>&6\n-echo \"configure:5217: checking for accept\" >&5\n+echo \"configure:5241: checking for accept\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_accept'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5222 \"configure\"\n+#line 5246 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char accept(); below.  */\n@@ -5241,7 +5265,7 @@ accept();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5245: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5269: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_accept=yes\"\n else\n@@ -5268,12 +5292,12 @@ fi\n      gcj_oldLibs=$LIBS\n      LIBS=\"$LIBS $gcj_cv_lib_sockets\"\n      echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:5272: checking for gethostbyname\" >&5\n+echo \"configure:5296: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5277 \"configure\"\n+#line 5301 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -5296,7 +5320,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5300: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5324: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -5314,22 +5338,22 @@ if eval \"test \\\"`echo '$ac_cv_func_'gethostbyname`\\\" = yes\"; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for main in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:5318: checking for main in -lnsl\" >&5\n+echo \"configure:5342: checking for main in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5326 \"configure\"\n+#line 5350 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:5333: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5357: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5361,15 +5385,15 @@ echo \"$ac_t\"\"$gcj_cv_lib_sockets\" 1>&6\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:5365: checking for deflate in -lz\" >&5\n+echo \"configure:5389: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5373 \"configure\"\n+#line 5397 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5380,7 +5404,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:5384: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5408: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5407,22 +5431,22 @@ fi\n    # requires -ldl.\n    if test \"$GC\" = boehm; then\n       echo $ac_n \"checking for main in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:5411: checking for main in -ldl\" >&5\n+echo \"configure:5435: checking for main in -ldl\" >&5\n ac_lib_var=`echo dl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5419 \"configure\"\n+#line 5443 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:5426: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5450: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5488,7 +5512,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}gcj\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}gcj; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5492: checking for $ac_word\" >&5\n+echo \"configure:5516: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5520,7 +5544,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"gcj\", so it can be a program name with args.\n set dummy gcj; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5524: checking for $ac_word\" >&5\n+echo \"configure:5548: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5582,13 +5606,13 @@ exec 5>>./config.log\n CPPFLAGS=$GCJ_SAVE_CPPFLAGS\n \n echo $ac_n \"checking size of void *\"\"... $ac_c\" 1>&6\n-echo \"configure:5586: checking size of void *\" >&5\n+echo \"configure:5610: checking size of void *\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_void_p'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 5592 \"configure\"\n+#line 5616 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -5598,7 +5622,7 @@ int main() {\n switch (0) case 0: case (sizeof (void *) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:5602: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5626: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof_void_p=$ac_size\n else\n@@ -5699,18 +5723,18 @@ EOF\n \n \n echo $ac_n \"checking for g++ -ffloat-store bug\"\"... $ac_c\" 1>&6\n-echo \"configure:5703: checking for g++ -ffloat-store bug\" >&5\n+echo \"configure:5727: checking for g++ -ffloat-store bug\" >&5\n save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\"-x c++ -O2 -ffloat-store\"\n cat > conftest.$ac_ext <<EOF\n-#line 5707 \"configure\"\n+#line 5731 \"configure\"\n #include \"confdefs.h\"\n #include <math.h>\n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5714: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5738: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n else\n@@ -5730,17 +5754,17 @@ for ac_hdr in unistd.h bstring.h sys/time.h sys/types.h fcntl.h sys/ioctl.h sys/\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:5734: checking for $ac_hdr\" >&5\n+echo \"configure:5758: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5739 \"configure\"\n+#line 5763 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5744: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5768: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5770,17 +5794,17 @@ for ac_hdr in dirent.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:5774: checking for $ac_hdr\" >&5\n+echo \"configure:5798: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5779 \"configure\"\n+#line 5803 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5784: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5808: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5810,17 +5834,17 @@ for ac_hdr in inttypes.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:5814: checking for $ac_hdr\" >&5\n+echo \"configure:5838: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5819 \"configure\"\n+#line 5843 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5824: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5848: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5856,12 +5880,12 @@ fi\n done\n \n echo $ac_n \"checking for sys/wait.h that is POSIX.1 compatible\"\"... $ac_c\" 1>&6\n-echo \"configure:5860: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n+echo \"configure:5884: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5865 \"configure\"\n+#line 5889 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/wait.h>\n@@ -5877,7 +5901,7 @@ wait (&s);\n s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;\n ; return 0; }\n EOF\n-if { (eval echo configure:5881: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5905: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_sys_wait_h=yes\n else\n@@ -5899,20 +5923,20 @@ fi\n \n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:5903: checking for ANSI C header files\" >&5\n+echo \"configure:5927: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5908 \"configure\"\n+#line 5932 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5916: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5940: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5929,7 +5953,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 5933 \"configure\"\n+#line 5957 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -5947,7 +5971,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 5951 \"configure\"\n+#line 5975 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -5968,7 +5992,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5972 \"configure\"\n+#line 5996 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -5979,7 +6003,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:5983: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:6007: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -6003,12 +6027,12 @@ EOF\n fi\n \n echo $ac_n \"checking for ssize_t\"\"... $ac_c\" 1>&6\n-echo \"configure:6007: checking for ssize_t\" >&5\n+echo \"configure:6031: checking for ssize_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_ssize_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6012 \"configure\"\n+#line 6036 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -6037,9 +6061,9 @@ fi\n \n \n echo $ac_n \"checking for in_addr_t\"\"... $ac_c\" 1>&6\n-echo \"configure:6041: checking for in_addr_t\" >&5\n+echo \"configure:6065: checking for in_addr_t\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6043 \"configure\"\n+#line 6067 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -6053,7 +6077,7 @@ int main() {\n in_addr_t foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:6057: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6081: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_IN_ADDR_T 1\n@@ -6069,16 +6093,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct ip_mreq is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6073: checking whether struct ip_mreq is in netinet/in.h\" >&5\n+echo \"configure:6097: checking whether struct ip_mreq is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6075 \"configure\"\n+#line 6099 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct ip_mreq mreq;\n ; return 0; }\n EOF\n-if { (eval echo configure:6082: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6106: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_STRUCT_IP_MREQ 1\n@@ -6094,16 +6118,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct ipv6_mreq is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6098: checking whether struct ipv6_mreq is in netinet/in.h\" >&5\n+echo \"configure:6122: checking whether struct ipv6_mreq is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6100 \"configure\"\n+#line 6124 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct ipv6_mreq mreq6;\n ; return 0; }\n EOF\n-if { (eval echo configure:6107: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6131: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_STRUCT_IPV6_MREQ 1\n@@ -6119,16 +6143,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct sockaddr_in6 is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6123: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n+echo \"configure:6147: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6125 \"configure\"\n+#line 6149 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct sockaddr_in6 addr6;\n ; return 0; }\n EOF\n-if { (eval echo configure:6132: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6156: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_INET6 1\n@@ -6144,9 +6168,9 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for socklen_t in sys/socket.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6148: checking for socklen_t in sys/socket.h\" >&5\n+echo \"configure:6172: checking for socklen_t in sys/socket.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6150 \"configure\"\n+#line 6174 \"configure\"\n #include \"confdefs.h\"\n #define _POSIX_PII_SOCKET\n #include <sys/types.h>\n@@ -6155,7 +6179,7 @@ int main() {\n socklen_t x = 5;\n ; return 0; }\n EOF\n-if { (eval echo configure:6159: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6183: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_SOCKLEN_T 1\n@@ -6171,16 +6195,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for tm_gmtoff in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:6175: checking for tm_gmtoff in struct tm\" >&5\n+echo \"configure:6199: checking for tm_gmtoff in struct tm\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 6177 \"configure\"\n+#line 6201 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n struct tm tim; tim.tm_gmtoff = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:6184: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6208: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define STRUCT_TM_HAS_GMTOFF 1\n@@ -6193,16 +6217,16 @@ else\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n    echo $ac_n \"checking for global timezone variable\"\"... $ac_c\" 1>&6\n-echo \"configure:6197: checking for global timezone variable\" >&5\n+echo \"configure:6221: checking for global timezone variable\" >&5\n                cat > conftest.$ac_ext <<EOF\n-#line 6199 \"configure\"\n+#line 6223 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n void i(){long z2 = 2*timezone;}\n ; return 0; }\n EOF\n-if { (eval echo configure:6206: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6230: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_TIMEZONE 1\n@@ -6215,16 +6239,16 @@ else\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n        echo $ac_n \"checking for global _timezone variable\"\"... $ac_c\" 1>&6\n-echo \"configure:6219: checking for global _timezone variable\" >&5\n+echo \"configure:6243: checking for global _timezone variable\" >&5\n               cat > conftest.$ac_ext <<EOF\n-#line 6221 \"configure\"\n+#line 6245 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n long z2 = _timezone;\n ; return 0; }\n EOF\n-if { (eval echo configure:6228: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6252: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_UNDERSCORE_TIMEZONE 1\n@@ -6246,19 +6270,19 @@ rm -f conftest*\n # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6250: checking for working alloca.h\" >&5\n+echo \"configure:6274: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6255 \"configure\"\n+#line 6279 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:6262: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6286: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -6279,12 +6303,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:6283: checking for alloca\" >&5\n+echo \"configure:6307: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6288 \"configure\"\n+#line 6312 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -6312,7 +6336,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:6316: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6340: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -6344,12 +6368,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:6348: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:6372: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6353 \"configure\"\n+#line 6377 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -6374,12 +6398,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:6378: checking for $ac_func\" >&5\n+echo \"configure:6402: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6383 \"configure\"\n+#line 6407 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -6402,7 +6426,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6406: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6430: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -6429,15 +6453,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:6433: checking stack direction for C alloca\" >&5\n+echo \"configure:6457: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6441 \"configure\"\n+#line 6465 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -6456,7 +6480,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:6460: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:6484: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -6483,7 +6507,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6487: checking for $ac_word\" >&5\n+echo \"configure:6511: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_PERL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6573,7 +6597,7 @@ fi\n # Uses ac_ vars as temps to allow command line to override cache and checks.\n # --without-x overrides everything else, but does not touch the cache.\n echo $ac_n \"checking for X\"\"... $ac_c\" 1>&6\n-echo \"configure:6577: checking for X\" >&5\n+echo \"configure:6601: checking for X\" >&5\n \n # Check whether --with-x or --without-x was given.\n if test \"${with_x+set}\" = set; then\n@@ -6635,12 +6659,12 @@ if test \"$ac_x_includes\" = NO; then\n \n   # First, try using that file with no special directory specified.\n cat > conftest.$ac_ext <<EOF\n-#line 6639 \"configure\"\n+#line 6663 \"configure\"\n #include \"confdefs.h\"\n #include <$x_direct_test_include>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:6644: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:6668: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -6709,14 +6733,14 @@ if test \"$ac_x_libraries\" = NO; then\n   ac_save_LIBS=\"$LIBS\"\n   LIBS=\"-l$x_direct_test_library $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6713 \"configure\"\n+#line 6737 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n ${x_direct_test_function}()\n ; return 0; }\n EOF\n-if { (eval echo configure:6720: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6744: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   LIBS=\"$ac_save_LIBS\"\n # We can link X programs with no special library path.\n@@ -6822,17 +6846,17 @@ else\n     case \"`(uname -sr) 2>/dev/null`\" in\n     \"SunOS 5\"*)\n       echo $ac_n \"checking whether -R must be followed by a space\"\"... $ac_c\" 1>&6\n-echo \"configure:6826: checking whether -R must be followed by a space\" >&5\n+echo \"configure:6850: checking whether -R must be followed by a space\" >&5\n       ac_xsave_LIBS=\"$LIBS\"; LIBS=\"$LIBS -R$x_libraries\"\n       cat > conftest.$ac_ext <<EOF\n-#line 6829 \"configure\"\n+#line 6853 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6836: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6860: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_R_nospace=yes\n else\n@@ -6848,14 +6872,14 @@ rm -f conftest*\n       else\n \tLIBS=\"$ac_xsave_LIBS -R $x_libraries\"\n \tcat > conftest.$ac_ext <<EOF\n-#line 6852 \"configure\"\n+#line 6876 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6859: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6883: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_R_space=yes\n else\n@@ -6887,15 +6911,15 @@ rm -f conftest*\n     # libraries were built with DECnet support.  And karl@cs.umb.edu says\n     # the Alpha needs dnet_stub (dnet does not exist).\n     echo $ac_n \"checking for dnet_ntoa in -ldnet\"\"... $ac_c\" 1>&6\n-echo \"configure:6891: checking for dnet_ntoa in -ldnet\" >&5\n+echo \"configure:6915: checking for dnet_ntoa in -ldnet\" >&5\n ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldnet  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6899 \"configure\"\n+#line 6923 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6906,7 +6930,7 @@ int main() {\n dnet_ntoa()\n ; return 0; }\n EOF\n-if { (eval echo configure:6910: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6934: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -6928,15 +6952,15 @@ fi\n \n     if test $ac_cv_lib_dnet_dnet_ntoa = no; then\n       echo $ac_n \"checking for dnet_ntoa in -ldnet_stub\"\"... $ac_c\" 1>&6\n-echo \"configure:6932: checking for dnet_ntoa in -ldnet_stub\" >&5\n+echo \"configure:6956: checking for dnet_ntoa in -ldnet_stub\" >&5\n ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldnet_stub  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6940 \"configure\"\n+#line 6964 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6947,7 +6971,7 @@ int main() {\n dnet_ntoa()\n ; return 0; }\n EOF\n-if { (eval echo configure:6951: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6975: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -6976,12 +7000,12 @@ fi\n     # The nsl library prevents programs from opening the X display\n     # on Irix 5.2, according to dickey@clark.net.\n     echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:6980: checking for gethostbyname\" >&5\n+echo \"configure:7004: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6985 \"configure\"\n+#line 7009 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -7004,7 +7028,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7008: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7032: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -7025,15 +7049,15 @@ fi\n \n     if test $ac_cv_func_gethostbyname = no; then\n       echo $ac_n \"checking for gethostbyname in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:7029: checking for gethostbyname in -lnsl\" >&5\n+echo \"configure:7053: checking for gethostbyname in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7037 \"configure\"\n+#line 7061 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7044,7 +7068,7 @@ int main() {\n gethostbyname()\n ; return 0; }\n EOF\n-if { (eval echo configure:7048: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7072: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7074,12 +7098,12 @@ fi\n     # -lsocket must be given before -lnsl if both are needed.\n     # We assume that if connect needs -lnsl, so does gethostbyname.\n     echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:7078: checking for connect\" >&5\n+echo \"configure:7102: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7083 \"configure\"\n+#line 7107 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -7102,7 +7126,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7106: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7130: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -7123,15 +7147,15 @@ fi\n \n     if test $ac_cv_func_connect = no; then\n       echo $ac_n \"checking for connect in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:7127: checking for connect in -lsocket\" >&5\n+echo \"configure:7151: checking for connect in -lsocket\" >&5\n ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket $X_EXTRA_LIBS $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7135 \"configure\"\n+#line 7159 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7142,7 +7166,7 @@ int main() {\n connect()\n ; return 0; }\n EOF\n-if { (eval echo configure:7146: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7170: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7166,12 +7190,12 @@ fi\n \n     # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.\n     echo $ac_n \"checking for remove\"\"... $ac_c\" 1>&6\n-echo \"configure:7170: checking for remove\" >&5\n+echo \"configure:7194: checking for remove\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_remove'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7175 \"configure\"\n+#line 7199 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char remove(); below.  */\n@@ -7194,7 +7218,7 @@ remove();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7198: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7222: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_remove=yes\"\n else\n@@ -7215,15 +7239,15 @@ fi\n \n     if test $ac_cv_func_remove = no; then\n       echo $ac_n \"checking for remove in -lposix\"\"... $ac_c\" 1>&6\n-echo \"configure:7219: checking for remove in -lposix\" >&5\n+echo \"configure:7243: checking for remove in -lposix\" >&5\n ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lposix  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7227 \"configure\"\n+#line 7251 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7234,7 +7258,7 @@ int main() {\n remove()\n ; return 0; }\n EOF\n-if { (eval echo configure:7238: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7262: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7258,12 +7282,12 @@ fi\n \n     # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.\n     echo $ac_n \"checking for shmat\"\"... $ac_c\" 1>&6\n-echo \"configure:7262: checking for shmat\" >&5\n+echo \"configure:7286: checking for shmat\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_shmat'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7267 \"configure\"\n+#line 7291 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char shmat(); below.  */\n@@ -7286,7 +7310,7 @@ shmat();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7290: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7314: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_shmat=yes\"\n else\n@@ -7307,15 +7331,15 @@ fi\n \n     if test $ac_cv_func_shmat = no; then\n       echo $ac_n \"checking for shmat in -lipc\"\"... $ac_c\" 1>&6\n-echo \"configure:7311: checking for shmat in -lipc\" >&5\n+echo \"configure:7335: checking for shmat in -lipc\" >&5\n ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lipc  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7319 \"configure\"\n+#line 7343 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7326,7 +7350,7 @@ int main() {\n shmat()\n ; return 0; }\n EOF\n-if { (eval echo configure:7330: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7354: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7359,15 +7383,15 @@ fi\n   # libraries we check for below, so use a different variable.\n   #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.\n   echo $ac_n \"checking for IceConnectionNumber in -lICE\"\"... $ac_c\" 1>&6\n-echo \"configure:7363: checking for IceConnectionNumber in -lICE\" >&5\n+echo \"configure:7387: checking for IceConnectionNumber in -lICE\" >&5\n ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lICE $X_EXTRA_LIBS $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7371 \"configure\"\n+#line 7395 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7378,7 +7402,7 @@ int main() {\n IceConnectionNumber()\n ; return 0; }\n EOF\n-if { (eval echo configure:7382: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7406: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else"}, {"sha": "e11928e70a43068bf3b2269357e72a35b3c05fbe", "filename": "libjava/configure.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.in?ref=e2a450f6e8c771989af3968aa22ece380599fc0f", "patch": "@@ -226,6 +226,7 @@ case \"$TARGET_ECOS\" in\n             PLATFORM=Win32\n             PLATFORMOBJS=win32.lo\n \t    PLATFORMH=win32.h\n+        CHECK_FOR_BROKEN_MINGW_LD\n       ;;\n       *)\n             PLATFORM=Posix\n@@ -444,7 +445,7 @@ AC_LINK_FILES(sysdep/$sysdeps_dir/locks.h, sysdep/locks.h)\n \n HASH_SYNC_SPEC=\n # Hash synchronization is only useful with posix threads right now.\n-if test \"$enable_hash_synchronization\" = yes && test \"$THREADS\" = \"posix\"; then\n+if test \"$enable_hash_synchronization\" = yes; then\n    HASH_SYNC_SPEC=-fhash-synchronization\n    AC_DEFINE(JV_HASH_SYNCHRONIZATION, 1, [Define if hash synchronization is in use])\n fi"}, {"sha": "cd770f93ac67a533313745f85ffd8ddfb727b7b9", "filename": "libjava/include/config.h.in", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Finclude%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Finclude%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fconfig.h.in?ref=e2a450f6e8c771989af3968aa22ece380599fc0f", "patch": "@@ -1,4 +1,4 @@\n-/* include/config.h.in.  Generated automatically from configure.in by autoheader.  */\n+/* include/config.h.in.  Generated automatically from configure.in by autoheader 2.13.  */\n \n /* Define if using alloca.c.  */\n #undef C_ALLOCA\n@@ -343,12 +343,12 @@\n /* Define if you have the <locale.h> header file.  */\n #undef HAVE_LOCALE_H\n \n-/* Define if you have the <netdb.h> header file.  */\n-#undef HAVE_NETDB_H\n-\n /* Define if you have the <net/if.h> header file.  */\n #undef HAVE_NET_IF_H\n \n+/* Define if you have the <netdb.h> header file.  */\n+#undef HAVE_NETDB_H\n+\n /* Define if you have the <netinet/in.h> header file.  */\n #undef HAVE_NETINET_IN_H\n \n@@ -394,6 +394,9 @@\n /* Define if the compiler is configured for setjmp/longjmp exceptions. */\n #undef SJLJ_EXCEPTIONS\n \n+/* Indicate that linker is not able to 8-byte align static data */\n+#undef JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS\n+\n /* Required define if using POSIX threads */\n #undef _REENTRANT\n "}, {"sha": "e8cf80598c2a914f20d529b9f801e3ace36fb25c", "filename": "libjava/include/win32-threads.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Finclude%2Fwin32-threads.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Finclude%2Fwin32-threads.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fwin32-threads.h?ref=e2a450f6e8c771989af3968aa22ece380599fc0f", "patch": "@@ -33,6 +33,14 @@ typedef struct\n   java::lang::Thread *thread_obj;\n } _Jv_Thread_t;\n \n+typedef DWORD _Jv_ThreadId_t;\n+\n+inline _Jv_ThreadId_t\n+_Jv_ThreadSelf (void)\n+{\n+  return GetCurrentThreadId();\n+}\n+\n typedef void _Jv_ThreadStartFunc (java::lang::Thread *);\n \n //"}, {"sha": "4c2fd6cab0385c62541de21a1d940e03a0ac24ef", "filename": "libjava/java/lang/natObject.cc", "status": "modified", "additions": 32, "deletions": 4, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Fjava%2Flang%2FnatObject.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a450f6e8c771989af3968aa22ece380599fc0f/libjava%2Fjava%2Flang%2FnatObject.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatObject.cc?ref=e2a450f6e8c771989af3968aa22ece380599fc0f", "patch": "@@ -305,9 +305,9 @@ _Jv_MonitorExit (jobject obj)\n #include <assert.h>\n #include <limits.h>\n #include <unistd.h>\t// for usleep, sysconf.\n-#include <sched.h>\t// for sched_yield.\n #include <gcj/javaprims.h>\n #include <sysdep/locks.h>\n+#include <java/lang/Thread.h>\n \n // Try to determine whether we are on a multiprocessor, i.e. whether\n // spinning may be profitable.\n@@ -525,14 +525,14 @@ spin(unsigned n)\n     }\n   else if (n < yield_limit)\n     {\n-      sched_yield();\n+      _Jv_ThreadYield();\n     }\n   else\n     {\n       unsigned duration = MIN_SLEEP_USECS << (n - yield_limit);\n       if (n >= 15 + yield_limit || duration > MAX_SLEEP_USECS)\n-\tduration = MAX_SLEEP_USECS;\n-      usleep(duration);\n+        duration = MAX_SLEEP_USECS;\n+      java::lang::Thread::sleep(0, duration);\n     }\n }\n \n@@ -574,7 +574,15 @@ static void\n heavy_lock_obj_finalization_proc (void *obj, void *cd)\n {\n   heavy_lock *hl = (heavy_lock *)cd;\n+\n+// This only addresses misalignment of statics, not heap objects.  It\n+// works only because registering statics for finalization is a noop,\n+// no matter what the least significant bits are.\n+#ifdef JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS\n+  obj_addr_t addr = (obj_addr_t)obj & ~((obj_addr_t)0x7);\n+#else\n   obj_addr_t addr = (obj_addr_t)obj;\n+#endif\n   hash_entry *he = light_locks + JV_SYNC_HASH(addr);\n   obj_addr_t he_address = (he -> address & ~LOCKED);\n \n@@ -753,7 +761,11 @@ get_heavy(obj_addr_t addr, hash_entry *he)\n void\n _Jv_MonitorEnter (jobject obj)\n {\n+#ifdef JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS\n+  obj_addr_t addr = (obj_addr_t)obj & ~((obj_addr_t)FLAGS);\n+#else\n   obj_addr_t addr = (obj_addr_t)obj;\n+#endif\n   obj_addr_t address;\n   unsigned hash = JV_SYNC_HASH(addr);\n   hash_entry * he = light_locks + hash;\n@@ -898,7 +910,11 @@ _Jv_MonitorEnter (jobject obj)\n void\n _Jv_MonitorExit (jobject obj)\n {\n+#ifdef JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS\n+  obj_addr_t addr = (obj_addr_t)obj & ~((obj_addr_t)FLAGS);\n+#else\n   obj_addr_t addr = (obj_addr_t)obj;\n+#endif\n   _Jv_ThreadId_t self = _Jv_ThreadSelf();\n   unsigned hash = JV_SYNC_HASH(addr);\n   hash_entry * he = light_locks + hash;\n@@ -1078,7 +1094,11 @@ _Jv_MonitorExit (jobject obj)\n void\n java::lang::Object::wait (jlong timeout, jint nanos)\n {\n+#ifdef JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS\n+  obj_addr_t addr = (obj_addr_t)this & ~((obj_addr_t)FLAGS);\n+#else\n   obj_addr_t addr = (obj_addr_t)this;\n+#endif\n   _Jv_ThreadId_t self = _Jv_ThreadSelf();\n   unsigned hash = JV_SYNC_HASH(addr);\n   hash_entry * he = light_locks + hash;\n@@ -1155,7 +1175,11 @@ java::lang::Object::wait (jlong timeout, jint nanos)\n void\n java::lang::Object::notify (void)\n {\n+#ifdef JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS\n+  obj_addr_t addr = (obj_addr_t)this & ~((obj_addr_t)FLAGS);\n+#else\n   obj_addr_t addr = (obj_addr_t)this;\n+#endif\n   _Jv_ThreadId_t self = _Jv_ThreadSelf();\n   unsigned hash = JV_SYNC_HASH(addr);\n   hash_entry * he = light_locks + hash;\n@@ -1200,7 +1224,11 @@ java::lang::Object::notify (void)\n void\n java::lang::Object::notifyAll (void)\n {\n+#ifdef JV_LINKER_CANNOT_8BYTE_ALIGN_STATICS\n+  obj_addr_t addr = (obj_addr_t)this & ~((obj_addr_t)FLAGS);\n+#else\n   obj_addr_t addr = (obj_addr_t)this;\n+#endif\n   _Jv_ThreadId_t self = _Jv_ThreadSelf();\n   unsigned hash = JV_SYNC_HASH(addr);\n   hash_entry * he = light_locks + hash;"}]}