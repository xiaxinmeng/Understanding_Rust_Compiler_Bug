{"sha": "32077b693df8e3ed0424031a322df23822bf2f7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIwNzdiNjkzZGY4ZTNlZDA0MjQwMzFhMzIyZGYyMzgyMmJmMmY3ZQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-01-09T15:12:59Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-01-15T01:58:19Z"}, "message": "analyzer: fix ICE on METHOD_TYPE (PR 93212)\n\nPR analyzer/93212 reports an ICE when attempting to use -fanalyzer\non a C++ source file.  That isn't supported yet, but the fix is\ntrivial (handling METHOD_TYPE as well as FUNCTION_TYPE).\n\ngcc/analyzer/ChangeLog:\n\tPR analyzer/93212\n\t* region-model.cc (make_region_for_type): Use\n\tFUNC_OR_METHOD_TYPE_P rather than comparing against FUNCTION_TYPE.\n\t* region-model.h (function_region::function_region): Likewise.", "tree": {"sha": "1dc1c79a166e7758871acc06b3586ed4c2e30979", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1dc1c79a166e7758871acc06b3586ed4c2e30979"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32077b693df8e3ed0424031a322df23822bf2f7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32077b693df8e3ed0424031a322df23822bf2f7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32077b693df8e3ed0424031a322df23822bf2f7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32077b693df8e3ed0424031a322df23822bf2f7e/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7fb3669edb4aa3c8313ddf8b914b86a1623e0954", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fb3669edb4aa3c8313ddf8b914b86a1623e0954", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fb3669edb4aa3c8313ddf8b914b86a1623e0954"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "340288c08d4c2577f0208c16a35066dd4ad8adc6", "filename": "gcc/analyzer/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32077b693df8e3ed0424031a322df23822bf2f7e/gcc%2Fanalyzer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32077b693df8e3ed0424031a322df23822bf2f7e/gcc%2Fanalyzer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2FChangeLog?ref=32077b693df8e3ed0424031a322df23822bf2f7e", "patch": "@@ -1,3 +1,10 @@\n+2020-01-14  David Malcolm  <dmalcolm@redhat.com>\n+\n+\tPR analyzer/93212\n+\t* region-model.cc (make_region_for_type): Use\n+\tFUNC_OR_METHOD_TYPE_P rather than comparing against FUNCTION_TYPE.\n+\t* region-model.h (function_region::function_region): Likewise.\n+\n 2020-01-14  David Malcolm  <dmalcolm@redhat.com>\n \n \t* program-state.cc (sm_state_map::clone_with_remapping): Copy"}, {"sha": "5c39be4fd7f301140aedb20dd51565f0ec483169", "filename": "gcc/analyzer/region-model.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32077b693df8e3ed0424031a322df23822bf2f7e/gcc%2Fanalyzer%2Fregion-model.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32077b693df8e3ed0424031a322df23822bf2f7e/gcc%2Fanalyzer%2Fregion-model.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fregion-model.cc?ref=32077b693df8e3ed0424031a322df23822bf2f7e", "patch": "@@ -5963,7 +5963,7 @@ make_region_for_type (region_id parent_rid, tree type)\n   if (TREE_CODE (type) == UNION_TYPE)\n     return new union_region (parent_rid, type);\n \n-  if (TREE_CODE (type) == FUNCTION_TYPE)\n+  if (FUNC_OR_METHOD_TYPE_P (type))\n     return new function_region (parent_rid, type);\n \n   /* If we have a void *, make a new symbolic region.  */"}, {"sha": "eea808e61ebbcfeab6c9d273b9f6400a5572c5e3", "filename": "gcc/analyzer/region-model.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32077b693df8e3ed0424031a322df23822bf2f7e/gcc%2Fanalyzer%2Fregion-model.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32077b693df8e3ed0424031a322df23822bf2f7e/gcc%2Fanalyzer%2Fregion-model.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fregion-model.h?ref=32077b693df8e3ed0424031a322df23822bf2f7e", "patch": "@@ -1202,7 +1202,7 @@ class function_region : public map_region\n   function_region (region_id parent_rid, tree type)\n   : map_region (parent_rid, type)\n   {\n-    gcc_assert (TREE_CODE (type) == FUNCTION_TYPE);\n+    gcc_assert (FUNC_OR_METHOD_TYPE_P (type));\n   }\n   function_region (const function_region &other)\n   : map_region (other)"}]}