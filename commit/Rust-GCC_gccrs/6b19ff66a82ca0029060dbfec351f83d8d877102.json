{"sha": "6b19ff66a82ca0029060dbfec351f83d8d877102", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIxOWZmNjZhODJjYTAwMjkwNjBkYmZlYzM1MWY4M2Q4ZDg3NzEwMg==", "commit": {"author": {"name": "Rasmus Villemoes", "email": "rv@rasmusvillemoes.dk", "date": "2018-08-21T08:47:41Z"}, "committer": {"name": "Rasmus Villemoes", "email": "villemoes@gcc.gnu.org", "date": "2018-08-21T08:47:41Z"}, "message": "vxworks: add target/h/wrn/coreip to the set of system include paths\n\nIn order to build crtstuff.c, I need to ensure the headers in\ntarget/h/wrn/coreip are also searched. Of course, that can be done\nsimilar to how wrn/coreip gets manually added for libgcc, e.g. by adding\n\n  CRTSTUFF_T_CFLAGS += -I$(WIND_BASE)/target/h -I$(WIND_BASE)/target/h/wrn/coreip\n\nBut without target/h/wrn/coreip in the default search path, all\nuser-code that include <unistd.h> (crtstuff.c just being one such\nexample) will have to manually add an -isystem\nflag adding the wrn/coreip directory: unistd.h include ioLib.h, which\nhas\n\n#include \"net/uio.h\"\n\nand that header is found in target/h/wrn/coreip. In other words, the\nVxWorks system headers (at least for VxWorks 5.5) are written in a way\nthat assumes wrn/coreip is in the search path, so I think it makes sense\nto have that by default.\n\nIt will change the search order for existing setups that pass\n-I.../target/h/wrn/coreip (without -nostdinc), since that flag will now\nbe ignored. I can't know whether that will break anything, but I do\nbelieve it makes sense to have the defaults actually usable without\nexpecting all invocations to add -I/-isystem flags.\n\nFrom-SVN: r263689", "tree": {"sha": "2421c49f24706fa45aca907ce1eda30b8c880a0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2421c49f24706fa45aca907ce1eda30b8c880a0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b19ff66a82ca0029060dbfec351f83d8d877102", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b19ff66a82ca0029060dbfec351f83d8d877102", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b19ff66a82ca0029060dbfec351f83d8d877102", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b19ff66a82ca0029060dbfec351f83d8d877102/comments", "author": {"login": "Villemoes", "id": 4375908, "node_id": "MDQ6VXNlcjQzNzU5MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/4375908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Villemoes", "html_url": "https://github.com/Villemoes", "followers_url": "https://api.github.com/users/Villemoes/followers", "following_url": "https://api.github.com/users/Villemoes/following{/other_user}", "gists_url": "https://api.github.com/users/Villemoes/gists{/gist_id}", "starred_url": "https://api.github.com/users/Villemoes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Villemoes/subscriptions", "organizations_url": "https://api.github.com/users/Villemoes/orgs", "repos_url": "https://api.github.com/users/Villemoes/repos", "events_url": "https://api.github.com/users/Villemoes/events{/privacy}", "received_events_url": "https://api.github.com/users/Villemoes/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6b2ffa6a4245fc0376c1e0f9bbcbb38b2d862425", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b2ffa6a4245fc0376c1e0f9bbcbb38b2d862425", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b2ffa6a4245fc0376c1e0f9bbcbb38b2d862425"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "da16c909681e4e6a679c941cca9aaa074bc6d8a1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b19ff66a82ca0029060dbfec351f83d8d877102/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b19ff66a82ca0029060dbfec351f83d8d877102/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6b19ff66a82ca0029060dbfec351f83d8d877102", "patch": "@@ -1,3 +1,8 @@\n+2018-08-21  Rasmus Villemoes  <rv@rasmusvillemoes.dk>\n+\n+\t* config/vxworks.h: Add $(WIND_BASE)/target/h/wrn/coreip to\n+\tdefault search path for VxWorks < 7.\n+\n 2018-08-21  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* gimple-ssa-sprintf.c (decl_constant_value): Remove."}, {"sha": "08d2c9d76d69860f42907e3ae3c37460370d1322", "filename": "gcc/config/vxworks.h", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b19ff66a82ca0029060dbfec351f83d8d877102/gcc%2Fconfig%2Fvxworks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b19ff66a82ca0029060dbfec351f83d8d877102/gcc%2Fconfig%2Fvxworks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvxworks.h?ref=6b19ff66a82ca0029060dbfec351f83d8d877102", "patch": "@@ -61,9 +61,12 @@ along with GCC; see the file COPYING3.  If not see\n #undef VXWORKS_ADDITIONAL_CPP_SPEC\n #define VXWORKS_ADDITIONAL_CPP_SPEC\t\t\\\n  \"%{!nostdinc:\t\t\t\t\t\\\n-    %{isystem*} -idirafter\t\t\t\\\n-    %{mrtp: %:getenv(WIND_USR /h)\t\t\\\n-      ;:    %:getenv(WIND_BASE /target/h)}}\"\n+    %{isystem*}\t\t\t\t\t\\\n+    %{mrtp: -idirafter %:getenv(WIND_USR /h)\t\\\n+\t    -idirafter %:getenv(WIND_USR /h/wrn/coreip) \\\n+      ;:    -idirafter %:getenv(WIND_BASE /target/h) \\\n+\t    -idirafter %:getenv(WIND_BASE /target/h/wrn/coreip) \\\n+}}\"\n \n #endif\n "}]}