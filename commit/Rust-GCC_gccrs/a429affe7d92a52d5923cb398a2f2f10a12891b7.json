{"sha": "a429affe7d92a52d5923cb398a2f2f10a12891b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQyOWFmZmU3ZDkyYTUyZDU5MjNjYjM5OGEyZjJmMTBhMTI4OTFiNw==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2006-01-12T00:17:38Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2006-01-12T00:17:38Z"}, "message": "acinclude.m4: Use -Wl,-z,relro if possible.\n\n2006-01-11  Benjamin Kosnik  <bkoz@redhat.com>\n\n\t* acinclude.m4: Use -Wl,-z,relro if possible.\n\t* configure: Regenerate.\n\nFrom-SVN: r109618", "tree": {"sha": "9db6d28a1313c7946304f0fd8536ac7cbacfecd1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9db6d28a1313c7946304f0fd8536ac7cbacfecd1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a429affe7d92a52d5923cb398a2f2f10a12891b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a429affe7d92a52d5923cb398a2f2f10a12891b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a429affe7d92a52d5923cb398a2f2f10a12891b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a429affe7d92a52d5923cb398a2f2f10a12891b7/comments", "author": null, "committer": null, "parents": [{"sha": "257c8aec25c3109bccae22147a234e51499bb4da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/257c8aec25c3109bccae22147a234e51499bb4da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/257c8aec25c3109bccae22147a234e51499bb4da"}], "stats": {"total": 170, "additions": 169, "deletions": 1}, "files": [{"sha": "a1e662c7c329f321142b3c12f69059c3aefef91a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a429affe7d92a52d5923cb398a2f2f10a12891b7/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a429affe7d92a52d5923cb398a2f2f10a12891b7/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a429affe7d92a52d5923cb398a2f2f10a12891b7", "patch": "@@ -1,3 +1,8 @@\n+2006-01-11  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\t* acinclude.m4: Use -Wl,-z,relro if possible.\n+\t* configure: Regenerate.\n+\n 2006-01-10  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/tr1/complex: New file, hosts the additions to header"}, {"sha": "6c84ca7381f9d6ac2ad145a5d4a2a3dddb196eeb", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a429affe7d92a52d5923cb398a2f2f10a12891b7/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a429affe7d92a52d5923cb398a2f2f10a12891b7/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=a429affe7d92a52d5923cb398a2f2f10a12891b7", "patch": "@@ -187,7 +187,7 @@ dnl safe (like an empty string).\n dnl\n dnl Defines:\n dnl  SECTION_LDFLAGS='-Wl,--gc-sections' if possible\n-dnl  OPT_LDFLAGS='-Wl,-O1' if possible\n+dnl  OPT_LDFLAGS='-Wl,-O1' and '-z,relro' if possible\n dnl  LD (as a side effect of testing)\n dnl Sets:\n dnl  with_gnu_ld\n@@ -267,6 +267,19 @@ AC_DEFUN([GLIBCXX_CHECK_LINKER_FEATURES], [\n     AC_MSG_RESULT($ac_sectionLDflags)\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    AC_MSG_CHECKING([for ld that supports -Wl,-z,relro])\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    AC_MSG_RESULT($ac_ld_relro)\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\""}, {"sha": "bcd04af75e65c7af7074bfa12bc360fdb453b683", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 150, "deletions": 0, "changes": 150, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a429affe7d92a52d5923cb398a2f2f10a12891b7/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a429affe7d92a52d5923cb398a2f2f10a12891b7/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=a429affe7d92a52d5923cb398a2f2f10a12891b7", "patch": "@@ -8279,6 +8279,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -53103,6 +53118,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -74420,6 +74450,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -75900,6 +75945,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -77256,6 +77316,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -79399,6 +79474,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -80708,6 +80798,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -82066,6 +82171,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -83804,6 +83924,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\"\n@@ -85875,6 +86010,21 @@ fi\n echo \"${ECHO_T}$ac_sectionLDflags\" >&6\n   fi\n \n+  # Set -z,relro.\n+  # Note this is only for shared objects\n+  ac_ld_relro=no\n+  if test x\"$with_gnu_ld\" = x\"yes\"; then\n+    echo \"$as_me:$LINENO: checking for ld that supports -Wl,-z,relro\" >&5\n+echo $ECHO_N \"checking for ld that supports -Wl,-z,relro... $ECHO_C\" >&6\n+    cxx_z_relo=`$LD -v --help 2>/dev/null | grep \"z relro\"`\n+    if test -n \"$cxx_z_relo\"; then\n+      OPT_LDFLAGS=\"-Wl,-z,relro\"\n+      ac_ld_relro=yes\n+    fi\n+    echo \"$as_me:$LINENO: result: $ac_ld_relro\" >&5\n+echo \"${ECHO_T}$ac_ld_relro\" >&6\n+  fi\n+\n   # Set linker optimization flags.\n   if test x\"$with_gnu_ld\" = x\"yes\"; then\n     OPT_LDFLAGS=\"-Wl,-O1 $OPT_LDFLAGS\""}]}