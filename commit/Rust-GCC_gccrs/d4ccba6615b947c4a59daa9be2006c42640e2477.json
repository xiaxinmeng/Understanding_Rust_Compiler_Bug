{"sha": "d4ccba6615b947c4a59daa9be2006c42640e2477", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRjY2JhNjYxNWI5NDdjNGE1OWRhYTliZTIwMDZjNDI2NDBlMjQ3Nw==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2010-08-09T14:28:47Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2010-08-09T14:28:47Z"}, "message": "name-lookup.c (is_associated_namespace): Convert local variables to be VECs instead of TREE_LISTs.\n\n\t* name-lookup.c (is_associated_namespace): Convert local variables\n\tto be VECs instead of TREE_LISTs.\n\nFrom-SVN: r163034", "tree": {"sha": "46b3e04776b38a3d4202531495680d0b99b493be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46b3e04776b38a3d4202531495680d0b99b493be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4ccba6615b947c4a59daa9be2006c42640e2477", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4ccba6615b947c4a59daa9be2006c42640e2477", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4ccba6615b947c4a59daa9be2006c42640e2477", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4ccba6615b947c4a59daa9be2006c42640e2477/comments", "author": null, "committer": null, "parents": [{"sha": "f38958e826ab3971068e7f0605966da9dbd461f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f38958e826ab3971068e7f0605966da9dbd461f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f38958e826ab3971068e7f0605966da9dbd461f2"}], "stats": {"total": 38, "additions": 28, "deletions": 10}, "files": [{"sha": "82f907ebbd089b2467eb5fd76207244a36e3f8ff", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4ccba6615b947c4a59daa9be2006c42640e2477/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4ccba6615b947c4a59daa9be2006c42640e2477/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d4ccba6615b947c4a59daa9be2006c42640e2477", "patch": "@@ -1,3 +1,8 @@\n+2010-08-09  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* name-lookup.c (is_associated_namespace): Convert local variables\n+\tto be VECs instead of TREE_LISTs.\n+\n 2010-08-09  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* tree.c (varargs_function_p): Use stdarg_p."}, {"sha": "01f29e43772ae9b518ecad5523350655497d2ecb", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 23, "deletions": 10, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4ccba6615b947c4a59daa9be2006c42640e2477/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4ccba6615b947c4a59daa9be2006c42640e2477/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=d4ccba6615b947c4a59daa9be2006c42640e2477", "patch": "@@ -4659,25 +4659,38 @@ add_function (struct arg_lookup *k, tree fn)\n bool\n is_associated_namespace (tree current, tree scope)\n {\n-  tree seen = NULL_TREE;\n-  tree todo = NULL_TREE;\n+  VEC(tree,gc) *seen = make_tree_vector ();\n+  VEC(tree,gc) *todo = make_tree_vector ();\n   tree t;\n+  bool ret;\n+\n   while (1)\n     {\n       if (scope == current)\n-\treturn true;\n-      seen = tree_cons (scope, NULL_TREE, seen);\n+\t{\n+\t  ret = true;\n+\t  break;\n+\t}\n+      VEC_safe_push (tree, gc, seen, scope);\n       for (t = DECL_NAMESPACE_ASSOCIATIONS (scope); t; t = TREE_CHAIN (t))\n-\tif (!purpose_member (TREE_PURPOSE (t), seen))\n-\t  todo = tree_cons (TREE_PURPOSE (t), NULL_TREE, todo);\n-      if (todo)\n+\tif (!vec_member (TREE_PURPOSE (t), seen))\n+\t  VEC_safe_push (tree, gc, todo, TREE_PURPOSE (t));\n+      if (!VEC_empty (tree, todo))\n \t{\n-\t  scope = TREE_PURPOSE (todo);\n-\t  todo = TREE_CHAIN (todo);\n+\t  scope = VEC_last (tree, todo);\n+\t  VEC_pop (tree, todo);\n \t}\n       else\n-\treturn false;\n+\t{\n+\t  ret = false;\n+\t  break;\n+\t}\n     }\n+\n+  release_tree_vector (seen);\n+  release_tree_vector (todo);\n+\n+  return ret;\n }\n \n /* Add functions of a namespace to the lookup structure."}]}