{"sha": "e66f219b038771c074bfd460c067db842a36e4c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY2ZjIxOWIwMzg3NzFjMDc0YmZkNDYwYzA2N2RiODQyYTM2ZTRjNA==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2016-03-01T00:04:48Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2016-03-01T00:04:48Z"}, "message": "re PR tree-optimization/70005 (wrong code at -O2 and -O3 on x86_64-linux-gnu)\n\n\tPR tree-optimization/70005\n\t* tree-ssa-uncprop.c (associate_equivalences_with_edges): Handle case\n\twhere an object with a boolean range is compared against a value\n\toutside [0..1].\n\n\tPR tree-optimization/70005\n\t* gcc.c-torture/execute/pr70005.c New test.\n\nFrom-SVN: r233829", "tree": {"sha": "3e903d32f313b9c23e0efdd6335d9714de7b21c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e903d32f313b9c23e0efdd6335d9714de7b21c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e66f219b038771c074bfd460c067db842a36e4c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e66f219b038771c074bfd460c067db842a36e4c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e66f219b038771c074bfd460c067db842a36e4c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e66f219b038771c074bfd460c067db842a36e4c4/comments", "author": null, "committer": null, "parents": [{"sha": "0c6072a3fc25e656c606247df51a448ab21326c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c6072a3fc25e656c606247df51a448ab21326c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c6072a3fc25e656c606247df51a448ab21326c0"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "ccbcfe8676daf351014fc3208eaa82b08cecadda", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e66f219b038771c074bfd460c067db842a36e4c4", "patch": "@@ -1,5 +1,10 @@\n 2016-02-28  Jeff Law  <law@redhat.com>\n \n+\tPR tree-optimization/70005\n+\t* tree-ssa-uncprop.c (associate_equivalences_with_edges): Handle case\n+\twhere an object with a boolean range is compared against a value\n+\toutside [0..1].\n+\n \tPR tree-optimization/69999\n \t* gimple-ssa-split-paths.c (split_paths): When duplicating a block\n \twith an outgoing edge marked with EDGE_IRREDUCIBLE_LOOP, schedule"}, {"sha": "3743d347b96955dcdb437e441a133b258b25d7d9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e66f219b038771c074bfd460c067db842a36e4c4", "patch": "@@ -1,5 +1,8 @@\n 2016-02-29  Jeff Law  <law@redhat.com>\n \n+\tPR tree-optimization/70005\n+\t* gcc.c-torture/execute/pr70005.c New test.\n+\n \tPR tree-optimization/69999\n \t* gcc.c-torture/compile/pr69999.c: New test.\n "}, {"sha": "bc37efe00cbd74d2bfba562e999142a9de1e0f4b", "filename": "gcc/testsuite/gcc.c-torture/execute/pr70005.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr70005.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr70005.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr70005.c?ref=e66f219b038771c074bfd460c067db842a36e4c4", "patch": "@@ -0,0 +1,25 @@\n+\n+unsigned char a = 6;\n+int b, c;\n+\n+static void\n+fn1 ()\n+{\n+  int i = a > 1 ? 1 : a, j = 6 & (c = a && (b = a));\n+  int d = 0, e = a, f = ~c, g = b || a;\n+  unsigned char h = ~a;\n+  if (a)\n+    f = j;\n+  if (h && g)\n+    d = a;\n+  i = -~(f * d * h) + c && (e || i) ^ f;\n+  if (i != 1) \n+    __builtin_abort (); \n+}\n+\n+int\n+main ()\n+{\n+  fn1 ();\n+  return 0; \n+}"}, {"sha": "e2e82123c35bf43a9d4b454c056ac3c762512193", "filename": "gcc/tree-ssa-uncprop.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2Ftree-ssa-uncprop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e66f219b038771c074bfd460c067db842a36e4c4/gcc%2Ftree-ssa-uncprop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-uncprop.c?ref=e66f219b038771c074bfd460c067db842a36e4c4", "patch": "@@ -95,7 +95,8 @@ associate_equivalences_with_edges (void)\n \t      if (TREE_CODE (op0) == SSA_NAME\n \t\t  && !SSA_NAME_OCCURS_IN_ABNORMAL_PHI (op0)\n \t\t  && ssa_name_has_boolean_range (op0)\n-\t\t  && is_gimple_min_invariant (op1))\n+\t\t  && is_gimple_min_invariant (op1)\n+\t\t  && (integer_zerop (op1) || integer_onep (op1)))\n \t\t{\n \t\t  tree true_val = constant_boolean_node (true, TREE_TYPE (op0));\n \t\t  tree false_val = constant_boolean_node (false,"}]}