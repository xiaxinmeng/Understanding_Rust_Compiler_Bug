{"sha": "795dc5872724ddea1e559b0477f5e5cfb96f0fce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzk1ZGM1ODcyNzI0ZGRlYTFlNTU5YjA0NzdmNWU1Y2ZiOTZmMGZjZQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2008-05-27T19:22:01Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2008-05-27T19:22:01Z"}, "message": "re PR fortran/36316 (type mismatch in binary expression caught by verify_gimple)\n\n2008-05-27  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/36316\n        * trans-array.c (gfc_set_loop_bounds_from_array_spec):\n        Add missing fold_convert.\n\n2008-05-27  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/36316\n        * gfortran.dg/assignment_3.f90: New.\n\nFrom-SVN: r136052", "tree": {"sha": "80089095db8ea18354fc4703a37ad5bc156fe948", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80089095db8ea18354fc4703a37ad5bc156fe948"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/795dc5872724ddea1e559b0477f5e5cfb96f0fce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/795dc5872724ddea1e559b0477f5e5cfb96f0fce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/795dc5872724ddea1e559b0477f5e5cfb96f0fce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/795dc5872724ddea1e559b0477f5e5cfb96f0fce/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75e8fd2f7196e3d6a5ffd0272e241f83c0d69c97"}], "stats": {"total": 76, "additions": 74, "deletions": 2}, "files": [{"sha": "d879a4c4ec7b6d2516e913d6aa21285d973fbfaf", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=795dc5872724ddea1e559b0477f5e5cfb96f0fce", "patch": "@@ -1,3 +1,9 @@\n+2008-05-27  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/36316\n+\t* trans-array.c (gfc_set_loop_bounds_from_array_spec):\n+\tAdd missing fold_convert.\n+\n 2008-05-26  Daniel Franke  <franke.daniel@gmail.com>\n \n \t* fortran/cpp.c (cpp_define_builtins): Remove usage of TARGET_* macros,"}, {"sha": "bc6d13a7fa8cb43b143b88cb01bc8596755c1ae6", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=795dc5872724ddea1e559b0477f5e5cfb96f0fce", "patch": "@@ -472,14 +472,14 @@ gfc_set_loop_bounds_from_array_spec (gfc_interface_mapping * mapping,\n \t    gfc_apply_interface_mapping (mapping, &tmpse, as->lower[dim]);\n \t    gfc_add_block_to_block (&se->pre, &tmpse.pre);\n \t    gfc_add_block_to_block (&se->post, &tmpse.post);\n-\t    lower = tmpse.expr;\n+\t    lower = fold_convert (gfc_array_index_type, tmpse.expr);\n \n \t    /* ...and the upper bound.  */\n \t    gfc_init_se (&tmpse, NULL);\n \t    gfc_apply_interface_mapping (mapping, &tmpse, as->upper[dim]);\n \t    gfc_add_block_to_block (&se->pre, &tmpse.pre);\n \t    gfc_add_block_to_block (&se->post, &tmpse.post);\n-\t    upper = tmpse.expr;\n+\t    upper = fold_convert (gfc_array_index_type, tmpse.expr);\n \n \t    /* Set the upper bound of the loop to UPPER - LOWER.  */\n \t    tmp = fold_build2 (MINUS_EXPR, gfc_array_index_type, upper, lower);"}, {"sha": "556d76eae02cebe41b7638881c54d657b73a5ba0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=795dc5872724ddea1e559b0477f5e5cfb96f0fce", "patch": "@@ -1,3 +1,8 @@\n+2008-05-27  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/36316\n+\t* gfortran.dg/assignment_3.f90: New.\n+\n 2008-05-27  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* lib/fortran-torture.exp (get-fortran-torture-options):"}, {"sha": "d843c3200cb9a5a1fe537ace195bed68167150a1", "filename": "gcc/testsuite/gfortran.dg/assignment_3.f90", "status": "added", "additions": 61, "deletions": 0, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/795dc5872724ddea1e559b0477f5e5cfb96f0fce/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassignment_3.f90?ref=795dc5872724ddea1e559b0477f5e5cfb96f0fce", "patch": "@@ -0,0 +1,61 @@\n+! { dg-do compile }\n+! PR fortran/36316\n+!\n+! gfortran generated a mismatching tree (\"type mismatch in binary expression\")\n+! for array bounds (mixing integer kind=4/kind=8 without fold_convert).\n+!\n+MODULE YOMCAIN\n+\n+IMPLICIT NONE\n+SAVE\n+\n+TYPE distributed_vector\n+REAL, pointer :: local(:)\n+INTEGER(4)       :: global_length,local_start\n+INTEGER(8)       :: local_end\n+END TYPE distributed_vector\n+\n+INTERFACE ASSIGNMENT (=)\n+MODULE PROCEDURE assign_ar_dv\n+END INTERFACE\n+\n+INTERFACE OPERATOR (*)\n+MODULE PROCEDURE multiply_dv_dv\n+END INTERFACE\n+\n+CONTAINS\n+\n+SUBROUTINE assign_ar_dv (handle,pvec)\n+\n+!         copy array to the distributed_vector\n+\n+REAL,                      INTENT(IN)    :: pvec(:)\n+TYPE (distributed_vector), INTENT(INOUT) :: handle\n+\n+handle%local(:) = pvec(:)\n+\n+RETURN\n+END SUBROUTINE assign_ar_dv\n+\n+FUNCTION multiply_dv_dv (handle1,handle2)\n+\n+!         multiply two distributed_vectors\n+\n+TYPE (distributed_vector), INTENT(IN) :: handle2\n+TYPE (distributed_vector), INTENT(IN) :: handle1\n+REAL :: multiply_dv_dv(handle1%local_start:handle1%local_end)\n+\n+multiply_dv_dv = handle1%local(:) * handle2%local(:)\n+\n+RETURN\n+END FUNCTION multiply_dv_dv\n+\n+\n+SUBROUTINE CAININAD_SCALE_DISTVEC ()\n+TYPE (distributed_vector) :: PVAZG\n+TYPE (distributed_vector) :: ZTEMP\n+TYPE (distributed_vector) :: SCALP_DV\n+\n+ZTEMP = PVAZG * SCALP_DV\n+END SUBROUTINE CAININAD_SCALE_DISTVEC\n+END MODULE YOMCAIN"}]}