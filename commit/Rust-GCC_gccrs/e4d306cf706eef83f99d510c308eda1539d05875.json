{"sha": "e4d306cf706eef83f99d510c308eda1539d05875", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTRkMzA2Y2Y3MDZlZWY4M2Y5OWQ1MTBjMzA4ZWRhMTUzOWQwNTg3NQ==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-07-20T13:00:38Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-07-21T12:40:17Z"}, "message": "c++tools, configury: Configure with C++; test checking status [PR98821].\n\nThe c++tools configure fragments need to be built with a C++ compiler.\n\nIn addition, the stand-alone server uses diagnostic mechanisms in common\nwith GCC, but needs to define implementations for gcc_assert and\nsupporting output functions.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\nPR c++/98821 - modules : c++tools configures with CC but code fragments assume CXX.\n\n\tPR c++/98821\n\nc++tools/ChangeLog:\n\n\t* config.h.in: Regenerate.\n\t* configure: Regenerate.\n\t* configure.ac: Configure using C++.  Pull logic to\n\tdetect enabled checking modes; default to release\n\tchecking.\n\t* server.cc (AI_NUMERICSERV): Define a fallback value.\n\t(gcc_assert): New.\n\t(gcc_unreachable): New.\n\t(fancy_abort): Only build when checking is enabled.\n\nCo-authored-by: Jakub Jelinek <jakub@redhat.com>", "tree": {"sha": "934b0b0a803e0edcbb5b815bd4104a482e891e5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/934b0b0a803e0edcbb5b815bd4104a482e891e5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e4d306cf706eef83f99d510c308eda1539d05875", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4d306cf706eef83f99d510c308eda1539d05875", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4d306cf706eef83f99d510c308eda1539d05875", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4d306cf706eef83f99d510c308eda1539d05875/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8884b9c51faea329196bf5914bcd2d700622c38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8884b9c51faea329196bf5914bcd2d700622c38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8884b9c51faea329196bf5914bcd2d700622c38"}], "stats": {"total": 823, "additions": 170, "deletions": 653}, "files": [{"sha": "410b2f7dab837c3491833d989f3f1d9a91b9af2b", "filename": "c++tools/config.h.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/c%2B%2Btools%2Fconfig.h.in?ref=e4d306cf706eef83f99d510c308eda1539d05875", "patch": "@@ -1,5 +1,8 @@\n /* config.h.in.  Generated from configure.ac by autoheader.  */\n \n+/* Define if you want assertions enabled. This is a cheap check. */\n+#undef ENABLE_ASSERT_CHECKING\n+\n /* Define if accept4 provided. */\n #undef HAVE_ACCEPT4\n "}, {"sha": "742816e42539149ace5883114168bd4422197176", "filename": "c++tools/configure", "status": "modified", "additions": 108, "deletions": 653, "changes": 761, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/c%2B%2Btools%2Fconfigure?ref=e4d306cf706eef83f99d510c308eda1539d05875", "patch": "@@ -626,10 +626,7 @@ NETLIBS\n get_gcc_base_ver\n EGREP\n GREP\n-CPP\n-ac_ct_CC\n-CFLAGS\n-CC\n+CXXCPP\n PIEFLAG\n MAINTAINER\n CXX_AUX_TOOLS\n@@ -701,6 +698,7 @@ ac_user_opts='\n enable_option_checking\n enable_c___tools\n enable_maintainer_mode\n+enable_checking\n enable_default_pie\n with_gcc_major_version_only\n '\n@@ -713,9 +711,7 @@ LDFLAGS\n LIBS\n CPPFLAGS\n CCC\n-CC\n-CFLAGS\n-CPP'\n+CXXCPP'\n \n \n # Initialize some variables set by options.\n@@ -1332,6 +1328,10 @@ Optional Features:\n   --enable-maintainer-mode\n                           enable maintainer mode. Add rules to rebuild\n                           configurey bits\n+  --enable-checking[=LIST]\n+                          enable expensive run-time checks. With LIST, enable\n+                          only specific categories of checks. Categories are:\n+                          yes,no,all,none,release.\n   --enable-default-pie    enable Position Independent Executable as default\n \n Optional Packages:\n@@ -1348,9 +1348,7 @@ Some influential environment variables:\n   LIBS        libraries to pass to the linker, e.g. -l<library>\n   CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if\n               you have headers in a nonstandard directory <include dir>\n-  CC          C compiler command\n-  CFLAGS      C compiler flags\n-  CPP         C preprocessor\n+  CXXCPP      C++ preprocessor\n \n Use these variables to override the choices made by `configure' or to help\n it to find libraries and programs with nonstandard names/locations.\n@@ -1470,48 +1468,10 @@ fi\n \n } # ac_fn_cxx_try_compile\n \n-# ac_fn_c_try_compile LINENO\n-# --------------------------\n-# Try to compile conftest.$ac_ext, and return whether this succeeded.\n-ac_fn_c_try_compile ()\n-{\n-  as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n-  rm -f conftest.$ac_objext\n-  if { { ac_try=\"$ac_compile\"\n-case \"(($ac_try\" in\n-  *\\\"* | *\\`* | *\\\\*) ac_try_echo=\\$ac_try;;\n-  *) ac_try_echo=$ac_try;;\n-esac\n-eval ac_try_echo=\"\\\"\\$as_me:${as_lineno-$LINENO}: $ac_try_echo\\\"\"\n-$as_echo \"$ac_try_echo\"; } >&5\n-  (eval \"$ac_compile\") 2>conftest.err\n-  ac_status=$?\n-  if test -s conftest.err; then\n-    grep -v '^ *+' conftest.err >conftest.er1\n-    cat conftest.er1 >&5\n-    mv -f conftest.er1 conftest.err\n-  fi\n-  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n-  test $ac_status = 0; } && {\n-\t test -z \"$ac_c_werror_flag\" ||\n-\t test ! -s conftest.err\n-       } && test -s conftest.$ac_objext; then :\n-  ac_retval=0\n-else\n-  $as_echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-\tac_retval=1\n-fi\n-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno\n-  as_fn_set_status $ac_retval\n-\n-} # ac_fn_c_try_compile\n-\n-# ac_fn_c_try_cpp LINENO\n-# ----------------------\n+# ac_fn_cxx_try_cpp LINENO\n+# ------------------------\n # Try to preprocess conftest.$ac_ext, and return whether this succeeded.\n-ac_fn_c_try_cpp ()\n+ac_fn_cxx_try_cpp ()\n {\n   as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n   if { { ac_try=\"$ac_cpp conftest.$ac_ext\"\n@@ -1530,7 +1490,7 @@ $as_echo \"$ac_try_echo\"; } >&5\n   fi\n   $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n   test $ac_status = 0; } > conftest.i && {\n-\t test -z \"$ac_c_preproc_warn_flag$ac_c_werror_flag\" ||\n+\t test -z \"$ac_cxx_preproc_warn_flag$ac_cxx_werror_flag\" ||\n \t test ! -s conftest.err\n        }; then :\n   ac_retval=0\n@@ -1543,14 +1503,14 @@ fi\n   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno\n   as_fn_set_status $ac_retval\n \n-} # ac_fn_c_try_cpp\n+} # ac_fn_cxx_try_cpp\n \n-# ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES\n-# -------------------------------------------------------\n+# ac_fn_cxx_check_header_mongrel LINENO HEADER VAR INCLUDES\n+# ---------------------------------------------------------\n # Tests whether HEADER exists, giving a warning if it cannot be compiled using\n # the include files in INCLUDES and setting the cache variable VAR\n # accordingly.\n-ac_fn_c_check_header_mongrel ()\n+ac_fn_cxx_check_header_mongrel ()\n {\n   as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n   if eval \\${$3+:} false; then :\n@@ -1571,7 +1531,7 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n $4\n #include <$2>\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_header_compiler=yes\n else\n   ac_header_compiler=no\n@@ -1587,7 +1547,7 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <$2>\n _ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n+if ac_fn_cxx_try_cpp \"$LINENO\"; then :\n   ac_header_preproc=yes\n else\n   ac_header_preproc=no\n@@ -1597,7 +1557,7 @@ rm -f conftest.err conftest.i conftest.$ac_ext\n $as_echo \"$ac_header_preproc\" >&6; }\n \n # So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((\n+case $ac_header_compiler:$ac_header_preproc:$ac_cxx_preproc_warn_flag in #((\n   yes:no: )\n     { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!\" >&5\n $as_echo \"$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n@@ -1630,13 +1590,13 @@ $as_echo \"$ac_res\" >&6; }\n fi\n   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno\n \n-} # ac_fn_c_check_header_mongrel\n+} # ac_fn_cxx_check_header_mongrel\n \n-# ac_fn_c_try_run LINENO\n-# ----------------------\n+# ac_fn_cxx_try_run LINENO\n+# ------------------------\n # Try to link conftest.$ac_ext, and return whether this succeeded. Assumes\n # that executables *can* be run.\n-ac_fn_c_try_run ()\n+ac_fn_cxx_try_run ()\n {\n   as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n   if { { ac_try=\"$ac_link\"\n@@ -1672,13 +1632,13 @@ fi\n   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno\n   as_fn_set_status $ac_retval\n \n-} # ac_fn_c_try_run\n+} # ac_fn_cxx_try_run\n \n-# ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES\n-# -------------------------------------------------------\n+# ac_fn_cxx_check_header_compile LINENO HEADER VAR INCLUDES\n+# ---------------------------------------------------------\n # Tests whether HEADER exists and can be compiled using the include files in\n # INCLUDES, setting the cache variable VAR accordingly.\n-ac_fn_c_check_header_compile ()\n+ac_fn_cxx_check_header_compile ()\n {\n   as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $2\" >&5\n@@ -1691,7 +1651,7 @@ else\n $4\n #include <$2>\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   eval \"$3=yes\"\n else\n   eval \"$3=no\"\n@@ -1703,12 +1663,12 @@ eval ac_res=\\$$3\n $as_echo \"$ac_res\" >&6; }\n   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno\n \n-} # ac_fn_c_check_header_compile\n+} # ac_fn_cxx_check_header_compile\n \n-# ac_fn_c_try_link LINENO\n-# -----------------------\n+# ac_fn_cxx_try_link LINENO\n+# -------------------------\n # Try to link conftest.$ac_ext, and return whether this succeeded.\n-ac_fn_c_try_link ()\n+ac_fn_cxx_try_link ()\n {\n   as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n   rm -f conftest.$ac_objext conftest$ac_exeext\n@@ -1728,7 +1688,7 @@ $as_echo \"$ac_try_echo\"; } >&5\n   fi\n   $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n   test $ac_status = 0; } && {\n-\t test -z \"$ac_c_werror_flag\" ||\n+\t test -z \"$ac_cxx_werror_flag\" ||\n \t test ! -s conftest.err\n        } && test -s conftest$ac_exeext && {\n \t test \"$cross_compiling\" = yes ||\n@@ -1749,7 +1709,7 @@ fi\n   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno\n   as_fn_set_status $ac_retval\n \n-} # ac_fn_c_try_link\n+} # ac_fn_cxx_try_link\n cat >config.log <<_ACEOF\n This file contains any messages produced by compilers while\n running configure, to aid debugging if configure makes a mistake.\n@@ -2955,6 +2915,13 @@ done\n test -n \"$AUTOHEADER\" || AUTOHEADER=\"$MISSING autoheader\"\n \n \n+ac_ext=cpp\n+ac_cpp='$CXXCPP $CPPFLAGS'\n+ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n+\n+\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether to build C++ tools\" >&5\n $as_echo_n \"checking whether to build C++ tools... \" >&6; }\n   # Check whether --enable-c++-tools was given.\n@@ -2989,556 +2956,48 @@ $as_echo \"$maintainer_mode\" >&6; }\n test \"$maintainer_mode\" = yes && MAINTAINER=yes\n \n \n-# Check whether --enable-default-pie was given.\n-# Check whether --enable-default-pie was given.\n-if test \"${enable_default_pie+set}\" = set; then :\n-  enableval=$enable_default_pie; PIEFLAG=-fPIE\n-else\n-  PIEFLAG=\n-fi\n-\n-\n-\n-# Check if O_CLOEXEC is defined by fcntl\n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-if test -n \"$ac_tool_prefix\"; then\n-  # Extract the first word of \"${ac_tool_prefix}gcc\", so it can be a program name with args.\n-set dummy ${ac_tool_prefix}gcc; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_CC+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$CC\"; then\n-  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_CC=\"${ac_tool_prefix}gcc\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-CC=$ac_cv_prog_CC\n-if test -n \"$CC\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $CC\" >&5\n-$as_echo \"$CC\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-\n-fi\n-if test -z \"$ac_cv_prog_CC\"; then\n-  ac_ct_CC=$CC\n-  # Extract the first word of \"gcc\", so it can be a program name with args.\n-set dummy gcc; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_ac_ct_CC+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$ac_ct_CC\"; then\n-  ac_cv_prog_ac_ct_CC=\"$ac_ct_CC\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_ac_ct_CC=\"gcc\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-ac_ct_CC=$ac_cv_prog_ac_ct_CC\n-if test -n \"$ac_ct_CC\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC\" >&5\n-$as_echo \"$ac_ct_CC\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-  if test \"x$ac_ct_CC\" = x; then\n-    CC=\"\"\n-  else\n-    case $cross_compiling:$ac_tool_warned in\n-yes:)\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet\" >&5\n-$as_echo \"$as_me: WARNING: using cross tools not prefixed with host triplet\" >&2;}\n-ac_tool_warned=yes ;;\n-esac\n-    CC=$ac_ct_CC\n-  fi\n-else\n-  CC=\"$ac_cv_prog_CC\"\n-fi\n+# Handle configuration of checking; for the tools in this directory we\n+# default to release checking and stricter checks do not change this.\n \n-if test -z \"$CC\"; then\n-          if test -n \"$ac_tool_prefix\"; then\n-    # Extract the first word of \"${ac_tool_prefix}cc\", so it can be a program name with args.\n-set dummy ${ac_tool_prefix}cc; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_CC+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n+# Check whether --enable-checking was given.\n+if test \"${enable_checking+set}\" = set; then :\n+  enableval=$enable_checking; ac_checking_flags=\"${enableval}\"\n else\n-  if test -n \"$CC\"; then\n-  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_CC=\"${ac_tool_prefix}cc\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-CC=$ac_cv_prog_CC\n-if test -n \"$CC\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $CC\" >&5\n-$as_echo \"$CC\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n \n+# Default to checking.\n+ac_checking_flags=yes\n \n-  fi\n-fi\n-if test -z \"$CC\"; then\n-  # Extract the first word of \"cc\", so it can be a program name with args.\n-set dummy cc; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_CC+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$CC\"; then\n-  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n-else\n-  ac_prog_rejected=no\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    if test \"$as_dir/$ac_word$ac_exec_ext\" = \"/usr/ucb/cc\"; then\n-       ac_prog_rejected=yes\n-       continue\n-     fi\n-    ac_cv_prog_CC=\"cc\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-if test $ac_prog_rejected = yes; then\n-  # We found a bogon in the path, so make sure we never use it.\n-  set dummy $ac_cv_prog_CC\n-  shift\n-  if test $# != 0; then\n-    # We chose a different compiler from the bogus one.\n-    # However, it has the same basename, so the bogon will be chosen\n-    # first if we set CC to just the basename; use the full file name.\n-    shift\n-    ac_cv_prog_CC=\"$as_dir/$ac_word${1+' '}$@\"\n-  fi\n-fi\n-fi\n-fi\n-CC=$ac_cv_prog_CC\n-if test -n \"$CC\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $CC\" >&5\n-$as_echo \"$CC\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-\n-fi\n-if test -z \"$CC\"; then\n-  if test -n \"$ac_tool_prefix\"; then\n-  for ac_prog in cl.exe\n-  do\n-    # Extract the first word of \"$ac_tool_prefix$ac_prog\", so it can be a program name with args.\n-set dummy $ac_tool_prefix$ac_prog; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_CC+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$CC\"; then\n-  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_CC=\"$ac_tool_prefix$ac_prog\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-CC=$ac_cv_prog_CC\n-if test -n \"$CC\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $CC\" >&5\n-$as_echo \"$CC\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n fi\n \n-\n-    test -n \"$CC\" && break\n-  done\n-fi\n-if test -z \"$CC\"; then\n-  ac_ct_CC=$CC\n-  for ac_prog in cl.exe\n-do\n-  # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n-set dummy $ac_prog; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_ac_ct_CC+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$ac_ct_CC\"; then\n-  ac_cv_prog_ac_ct_CC=\"$ac_ct_CC\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n+IFS=\"${IFS= \t}\"; ac_save_IFS=\"$IFS\"; IFS=\"$IFS,\"\n+for check in release $ac_checking_flags\n do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_ac_ct_CC=\"$ac_prog\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-ac_ct_CC=$ac_cv_prog_ac_ct_CC\n-if test -n \"$ac_ct_CC\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC\" >&5\n-$as_echo \"$ac_ct_CC\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-\n-  test -n \"$ac_ct_CC\" && break\n-done\n-\n-  if test \"x$ac_ct_CC\" = x; then\n-    CC=\"\"\n-  else\n-    case $cross_compiling:$ac_tool_warned in\n-yes:)\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet\" >&5\n-$as_echo \"$as_me: WARNING: using cross tools not prefixed with host triplet\" >&2;}\n-ac_tool_warned=yes ;;\n-esac\n-    CC=$ac_ct_CC\n-  fi\n-fi\n-\n-fi\n-\n-\n-test -z \"$CC\" && { { $as_echo \"$as_me:${as_lineno-$LINENO}: error: in \\`$ac_pwd':\" >&5\n-$as_echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n-as_fn_error $? \"no acceptable C compiler found in \\$PATH\n-See \\`config.log' for more details\" \"$LINENO\" 5; }\n-\n-# Provide some information about the compiler.\n-$as_echo \"$as_me:${as_lineno-$LINENO}: checking for C compiler version\" >&5\n-set X $ac_compile\n-ac_compiler=$2\n-for ac_option in --version -v -V -qversion; do\n-  { { ac_try=\"$ac_compiler $ac_option >&5\"\n-case \"(($ac_try\" in\n-  *\\\"* | *\\`* | *\\\\*) ac_try_echo=\\$ac_try;;\n-  *) ac_try_echo=$ac_try;;\n-esac\n-eval ac_try_echo=\"\\\"\\$as_me:${as_lineno-$LINENO}: $ac_try_echo\\\"\"\n-$as_echo \"$ac_try_echo\"; } >&5\n-  (eval \"$ac_compiler $ac_option >&5\") 2>conftest.err\n-  ac_status=$?\n-  if test -s conftest.err; then\n-    sed '10a\\\n-... rest of stderr output deleted ...\n-         10q' conftest.err >conftest.er1\n-    cat conftest.er1 >&5\n-  fi\n-  rm -f conftest.er1 conftest.err\n-  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n-  test $ac_status = 0; }\n+\tcase $check in\n+\t# these set all the flags to specific states\n+\tyes|all|release|assert) ac_assert_checking=1 ; ;;\n+\tno|none) ac_assert_checking= ; ;;\n+\t*) ;;\n+\tesac\n done\n+IFS=\"$ac_save_IFS\"\n \n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler\" >&5\n-$as_echo_n \"checking whether we are using the GNU C compiler... \" >&6; }\n-if ${ac_cv_c_compiler_gnu+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-\n-int\n-main ()\n-{\n-#ifndef __GNUC__\n-       choke me\n-#endif\n+if test x$ac_assert_checking != x ; then\n \n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_compiler_gnu=yes\n-else\n-  ac_compiler_gnu=no\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-ac_cv_c_compiler_gnu=$ac_compiler_gnu\n+$as_echo \"#define ENABLE_ASSERT_CHECKING 1\" >>confdefs.h\n \n fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu\" >&5\n-$as_echo \"$ac_cv_c_compiler_gnu\" >&6; }\n-if test $ac_compiler_gnu = yes; then\n-  GCC=yes\n-else\n-  GCC=\n-fi\n-ac_test_CFLAGS=${CFLAGS+set}\n-ac_save_CFLAGS=$CFLAGS\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g\" >&5\n-$as_echo_n \"checking whether $CC accepts -g... \" >&6; }\n-if ${ac_cv_prog_cc_g+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  ac_save_c_werror_flag=$ac_c_werror_flag\n-   ac_c_werror_flag=yes\n-   ac_cv_prog_cc_g=no\n-   CFLAGS=\"-g\"\n-   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-\n-int\n-main ()\n-{\n-\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_prog_cc_g=yes\n-else\n-  CFLAGS=\"\"\n-      cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n \n-int\n-main ()\n-{\n-\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-\n-else\n-  ac_c_werror_flag=$ac_save_c_werror_flag\n-\t CFLAGS=\"-g\"\n-\t cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-\n-int\n-main ()\n-{\n-\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_prog_cc_g=yes\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-   ac_c_werror_flag=$ac_save_c_werror_flag\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g\" >&5\n-$as_echo \"$ac_cv_prog_cc_g\" >&6; }\n-if test \"$ac_test_CFLAGS\" = set; then\n-  CFLAGS=$ac_save_CFLAGS\n-elif test $ac_cv_prog_cc_g = yes; then\n-  if test \"$GCC\" = yes; then\n-    CFLAGS=\"-g -O2\"\n-  else\n-    CFLAGS=\"-g\"\n-  fi\n-else\n-  if test \"$GCC\" = yes; then\n-    CFLAGS=\"-O2\"\n-  else\n-    CFLAGS=\n-  fi\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89\" >&5\n-$as_echo_n \"checking for $CC option to accept ISO C89... \" >&6; }\n-if ${ac_cv_prog_cc_c89+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n+# Check whether --enable-default-pie was given.\n+# Check whether --enable-default-pie was given.\n+if test \"${enable_default_pie+set}\" = set; then :\n+  enableval=$enable_default_pie; PIEFLAG=-fPIE\n else\n-  ac_cv_prog_cc_c89=no\n-ac_save_CC=$CC\n-cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#include <stdarg.h>\n-#include <stdio.h>\n-struct stat;\n-/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */\n-struct buf { int x; };\n-FILE * (*rcsopen) (struct buf *, struct stat *, int);\n-static char *e (p, i)\n-     char **p;\n-     int i;\n-{\n-  return p[i];\n-}\n-static char *f (char * (*g) (char **, int), char **p, ...)\n-{\n-  char *s;\n-  va_list v;\n-  va_start (v,p);\n-  s = g (p, va_arg (v,int));\n-  va_end (v);\n-  return s;\n-}\n-\n-/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has\n-   function prototypes and stuff, but not '\\xHH' hex character constants.\n-   These don't provoke an error unfortunately, instead are silently treated\n-   as 'x'.  The following induces an error, until -std is added to get\n-   proper ANSI mode.  Curiously '\\x00'!='x' always comes out true, for an\n-   array size at least.  It's necessary to write '\\x00'==0 to get something\n-   that's true only with -std.  */\n-int osf4_cc_array ['\\x00' == 0 ? 1 : -1];\n-\n-/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters\n-   inside strings and character constants.  */\n-#define FOO(x) 'x'\n-int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];\n-\n-int test (int i, double x);\n-struct s1 {int (*f) (int a);};\n-struct s2 {int (*f) (double a);};\n-int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);\n-int argc;\n-char **argv;\n-int\n-main ()\n-{\n-return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \\\n-\t-Ae \"-Aa -D_HPUX_SOURCE\" \"-Xc -D__EXTENSIONS__\"\n-do\n-  CC=\"$ac_save_CC $ac_arg\"\n-  if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_prog_cc_c89=$ac_arg\n-fi\n-rm -f core conftest.err conftest.$ac_objext\n-  test \"x$ac_cv_prog_cc_c89\" != \"xno\" && break\n-done\n-rm -f conftest.$ac_ext\n-CC=$ac_save_CC\n-\n+  PIEFLAG=\n fi\n-# AC_CACHE_VAL\n-case \"x$ac_cv_prog_cc_c89\" in\n-  x)\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: none needed\" >&5\n-$as_echo \"none needed\" >&6; } ;;\n-  xno)\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: unsupported\" >&5\n-$as_echo \"unsupported\" >&6; } ;;\n-  *)\n-    CC=\"$CC $ac_cv_prog_cc_c89\"\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89\" >&5\n-$as_echo \"$ac_cv_prog_cc_c89\" >&6; } ;;\n-esac\n-if test \"x$ac_cv_prog_cc_c89\" != xno; then :\n \n-fi\n \n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n+# Check if O_CLOEXEC is defined by fcntl\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for O_CLOEXEC\" >&5\n $as_echo_n \"checking for O_CLOEXEC... \" >&6; }\n@@ -3559,7 +3018,7 @@ return open (\"/dev/null\", O_RDONLY | O_CLOEXEC);\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_o_cloexec=yes\n else\n   ac_cv_o_cloexec=no\n@@ -3574,26 +3033,22 @@ $as_echo \"#define HOST_HAS_O_CLOEXEC 1\" >>confdefs.h\n \n fi\n \n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor\" >&5\n-$as_echo_n \"checking how to run the C preprocessor... \" >&6; }\n-# On Suns, sometimes $CPP names a directory.\n-if test -n \"$CPP\" && test -d \"$CPP\"; then\n-  CPP=\n-fi\n-if test -z \"$CPP\"; then\n-  if ${ac_cv_prog_CPP+:} false; then :\n+ac_ext=cpp\n+ac_cpp='$CXXCPP $CPPFLAGS'\n+ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking how to run the C++ preprocessor\" >&5\n+$as_echo_n \"checking how to run the C++ preprocessor... \" >&6; }\n+if test -z \"$CXXCPP\"; then\n+  if ${ac_cv_prog_CXXCPP+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-      # Double quotes because CPP needs to be expanded\n-    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n+      # Double quotes because CXXCPP needs to be expanded\n+    for CXXCPP in \"$CXX -E\" \"/lib/cpp\"\n     do\n       ac_preproc_ok=false\n-for ac_c_preproc_warn_flag in '' yes\n+for ac_cxx_preproc_warn_flag in '' yes\n do\n   # Use a header file that comes with gcc, so configuring glibc\n   # with a fresh cross-compiler works.\n@@ -3610,7 +3065,7 @@ do\n #endif\n \t\t     Syntax error\n _ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n+if ac_fn_cxx_try_cpp \"$LINENO\"; then :\n \n else\n   # Broken: fails on valid input.\n@@ -3624,7 +3079,7 @@ rm -f conftest.err conftest.i conftest.$ac_ext\n /* end confdefs.h.  */\n #include <ac_nonexistent.h>\n _ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n+if ac_fn_cxx_try_cpp \"$LINENO\"; then :\n   # Broken: success on invalid input.\n continue\n else\n@@ -3642,17 +3097,17 @@ if $ac_preproc_ok; then :\n fi\n \n     done\n-    ac_cv_prog_CPP=$CPP\n+    ac_cv_prog_CXXCPP=$CXXCPP\n \n fi\n-  CPP=$ac_cv_prog_CPP\n+  CXXCPP=$ac_cv_prog_CXXCPP\n else\n-  ac_cv_prog_CPP=$CPP\n+  ac_cv_prog_CXXCPP=$CXXCPP\n fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $CPP\" >&5\n-$as_echo \"$CPP\" >&6; }\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $CXXCPP\" >&5\n+$as_echo \"$CXXCPP\" >&6; }\n ac_preproc_ok=false\n-for ac_c_preproc_warn_flag in '' yes\n+for ac_cxx_preproc_warn_flag in '' yes\n do\n   # Use a header file that comes with gcc, so configuring glibc\n   # with a fresh cross-compiler works.\n@@ -3669,7 +3124,7 @@ do\n #endif\n \t\t     Syntax error\n _ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n+if ac_fn_cxx_try_cpp \"$LINENO\"; then :\n \n else\n   # Broken: fails on valid input.\n@@ -3683,7 +3138,7 @@ rm -f conftest.err conftest.i conftest.$ac_ext\n /* end confdefs.h.  */\n #include <ac_nonexistent.h>\n _ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n+if ac_fn_cxx_try_cpp \"$LINENO\"; then :\n   # Broken: success on invalid input.\n continue\n else\n@@ -3701,15 +3156,15 @@ if $ac_preproc_ok; then :\n else\n   { { $as_echo \"$as_me:${as_lineno-$LINENO}: error: in \\`$ac_pwd':\" >&5\n $as_echo \"$as_me: error: in \\`$ac_pwd':\" >&2;}\n-as_fn_error $? \"C preprocessor \\\"$CPP\\\" fails sanity check\n+as_fn_error $? \"C++ preprocessor \\\"$CXXCPP\\\" fails sanity check\n See \\`config.log' for more details\" \"$LINENO\" 5; }\n fi\n \n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+ac_ext=cpp\n+ac_cpp='$CXXCPP $CPPFLAGS'\n+ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n \n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e\" >&5\n@@ -3862,7 +3317,7 @@ main ()\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_header_stdc=yes\n else\n   ac_cv_header_stdc=no\n@@ -3935,7 +3390,7 @@ main ()\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_run \"$LINENO\"; then :\n+if ac_fn_cxx_try_run \"$LINENO\"; then :\n \n else\n   ac_cv_header_stdc=no\n@@ -3959,7 +3414,7 @@ for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \\\n \t\t  inttypes.h stdint.h unistd.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n-ac_fn_c_check_header_compile \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\n+ac_fn_cxx_check_header_compile \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\n \"\n if eval test \\\"x\\$\"$as_ac_Header\"\\\" = x\"yes\"; then :\n   cat >>confdefs.h <<_ACEOF\n@@ -3973,7 +3428,7 @@ done\n \n for ac_header in sys/mman.h\n do :\n-  ac_fn_c_check_header_mongrel \"$LINENO\" \"sys/mman.h\" \"ac_cv_header_sys_mman_h\" \"$ac_includes_default\"\n+  ac_fn_cxx_check_header_mongrel \"$LINENO\" \"sys/mman.h\" \"ac_cv_header_sys_mman_h\" \"$ac_includes_default\"\n if test \"x$ac_cv_header_sys_mman_h\" = xyes; then :\n   cat >>confdefs.h <<_ACEOF\n #define HAVE_SYS_MMAN_H 1\n@@ -4016,7 +3471,7 @@ connect (fd, (sockaddr *)&un, sizeof (un));\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_af_unix=yes\n else\n   ac_cv_af_unix=no\n@@ -4070,7 +3525,7 @@ connect (fd, (sockaddr *)&in6, sizeof (in6));\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_af_inet6=yes\n else\n   ac_cv_af_inet6=no\n@@ -4111,7 +3566,7 @@ epoll_pwait (fd, 0, 0, -1, 0);\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_epoll=yes\n else\n   ac_cv_epoll=no\n@@ -4147,7 +3602,7 @@ pselect (0, 0, 0, 0, 0, 0);\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_pselect=yes\n else\n   ac_cv_pselect=no\n@@ -4184,7 +3639,7 @@ select (0, 0, 0, 0, 0);\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_select=yes\n else\n   ac_cv_select=no\n@@ -4220,7 +3675,7 @@ int err = accept4 (1, 0, 0, SOCK_NONBLOCK);\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_accept4=yes\n else\n   ac_cv_accept4=no\n@@ -4259,7 +3714,7 @@ const char *str = inet_ntop (AF_INET6, &in6, buf, sizeof (buf));\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n+if ac_fn_cxx_try_compile \"$LINENO\"; then :\n   ac_cv_inet_ntop=yes\n else\n   ac_cv_inet_ntop=no\n@@ -4325,7 +3780,7 @@ for ac_lib in '' nsl; do\n     ac_res=-l$ac_lib\n     LIBS=\"-l$ac_lib  $ac_func_search_save_LIBS\"\n   fi\n-  if ac_fn_c_try_link \"$LINENO\"; then :\n+  if ac_fn_cxx_try_link \"$LINENO\"; then :\n   ac_cv_search_gethostbyname=$ac_res\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n@@ -4381,7 +3836,7 @@ for ac_lib in '' socket; do\n     ac_res=-l$ac_lib\n     LIBS=\"-l$ac_lib  $ac_func_search_save_LIBS\"\n   fi\n-  if ac_fn_c_try_link \"$LINENO\"; then :\n+  if ac_fn_cxx_try_link \"$LINENO\"; then :\n   ac_cv_search_socket=$ac_res\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n@@ -4431,7 +3886,7 @@ return socket ();\n   return 0;\n }\n _ACEOF\n-if ac_fn_c_try_link \"$LINENO\"; then :\n+if ac_fn_cxx_try_link \"$LINENO\"; then :\n   ac_cv_lib_socket_socket=yes\n else\n   ac_cv_lib_socket_socket=no"}, {"sha": "f991f63077fbe4de8182a057ff71b4d9f7dc8e4c", "filename": "c++tools/configure.ac", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/c%2B%2Btools%2Fconfigure.ac?ref=e4d306cf706eef83f99d510c308eda1539d05875", "patch": "@@ -41,6 +41,8 @@ MISSING=`cd $ac_aux_dir && ${PWDCMD-pwd}`/missing\n AC_CHECK_PROGS([AUTOCONF], [autoconf], [$MISSING autoconf])\n AC_CHECK_PROGS([AUTOHEADER], [autoheader], [$MISSING autoheader])\n \n+AC_LANG(C++)\n+\n dnl Enabled by default\n AC_MSG_CHECKING([whether to build C++ tools])\n   AC_ARG_ENABLE(c++-tools, \n@@ -67,6 +69,35 @@ AC_MSG_RESULT([$maintainer_mode])\n test \"$maintainer_mode\" = yes && MAINTAINER=yes\n AC_SUBST(MAINTAINER)\n \n+# Handle configuration of checking; for the tools in this directory we\n+# default to release checking and stricter checks do not change this.\n+\n+AC_ARG_ENABLE(checking,\n+[AS_HELP_STRING([[--enable-checking[=LIST]]],\n+\t\t[enable expensive run-time checks.  With LIST,\n+\t\t enable only specific categories of checks.\n+\t\t Categories are: yes,no,all,none,release.])],\n+[ac_checking_flags=\"${enableval}\"],[\n+# Default to checking.\n+ac_checking_flags=yes\n+])\n+IFS=\"${IFS= \t}\"; ac_save_IFS=\"$IFS\"; IFS=\"$IFS,\"\n+for check in release $ac_checking_flags\n+do\n+\tcase $check in\n+\t# these set all the flags to specific states\n+\tyes|all|release|assert) ac_assert_checking=1 ; ;;\n+\tno|none) ac_assert_checking= ; ;;\n+\t*) ;;\n+\tesac\n+done\n+IFS=\"$ac_save_IFS\"\n+\n+if test x$ac_assert_checking != x ; then\n+  AC_DEFINE(ENABLE_ASSERT_CHECKING, 1,\n+[Define if you want assertions enabled.  This is a cheap check.])\n+fi\n+\n # Check whether --enable-default-pie was given.\n AC_ARG_ENABLE(default-pie,\n [AS_HELP_STRING([--enable-default-pie],"}, {"sha": "a60eefe63b0c4ca2070f9819c97465af521da061", "filename": "c++tools/server.cc", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fserver.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e4d306cf706eef83f99d510c308eda1539d05875/c%2B%2Btools%2Fserver.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/c%2B%2Btools%2Fserver.cc?ref=e4d306cf706eef83f99d510c308eda1539d05875", "patch": "@@ -61,6 +61,10 @@ along with GCC; see the file COPYING3.  If not see\n # define gai_strerror(X) \"\"\n #endif\n \n+#ifndef AI_NUMERICSERV\n+#define AI_NUMERICSERV 0\n+#endif\n+\n #include <getopt.h>\n \n // Select or epoll\n@@ -92,6 +96,28 @@ along with GCC; see the file COPYING3.  If not see\n #define DIR_SEPARATOR '/'\n #endif\n \n+/* Imported from libcpp/system.h\n+   Use gcc_assert(EXPR) to test invariants.  */\n+#if ENABLE_ASSERT_CHECKING\n+#define gcc_assert(EXPR)                                                \\\n+   ((void)(!(EXPR) ? fancy_abort (__FILE__, __LINE__, __FUNCTION__), 0 : 0))\n+#elif (GCC_VERSION >= 4005)\n+#define gcc_assert(EXPR)                                                \\\n+  ((void)(__builtin_expect (!(EXPR), 0) ? __builtin_unreachable (), 0 : 0))\n+#else\n+/* Include EXPR, so that unused variable warnings do not occur.  */\n+#define gcc_assert(EXPR) ((void)(0 && (EXPR)))\n+#endif\n+\n+/* Use gcc_unreachable() to mark unreachable locations (like an\n+   unreachable default case of a switch.  Do not use gcc_assert(0).  */\n+#if (GCC_VERSION >= 4005) && !ENABLE_ASSERT_CHECKING\n+#define gcc_unreachable() __builtin_unreachable ()\n+#else\n+#define gcc_unreachable() (fancy_abort (__FILE__, __LINE__, __FUNCTION__))\n+#endif\n+\n+\n #if NETWORKING\n struct netmask {\n   in6_addr addr;\n@@ -202,11 +228,13 @@ internal_error (const char *fmt, ...)\n \n /* Hooked to from gcc_assert & gcc_unreachable.  */\n \n+#if ENABLE_ASSERT_CHECKING\n void ATTRIBUTE_NORETURN ATTRIBUTE_COLD\n fancy_abort (const char *file, int line, const char *func)\n {\n   internal_error (\"in %s, at %s:%d\", func, trim_src_file (file), line);\n }\n+#endif\n \n /* Exploded on a signal.  */\n "}]}