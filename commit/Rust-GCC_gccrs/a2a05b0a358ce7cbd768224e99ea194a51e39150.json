{"sha": "a2a05b0a358ce7cbd768224e99ea194a51e39150", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTJhMDViMGEzNThjZTdjYmQ3NjgyMjRlOTllYTE5NGE1MWUzOTE1MA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1998-04-18T15:31:36Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1998-04-18T15:31:36Z"}, "message": "Patches to make g++/g77 give useful error when no files are given.\n\n\t* gcc.c (lang_specific_driver): Add new parm type to prototype.\n\t(added_libraries): New file scope static variable.\n\t(process_command): Initialize added_libraries.  Pass it to\n\tlang_specific_driver.\n\t(main): Use added_libraries in check for no input files.\n\nFrom-SVN: r19281", "tree": {"sha": "1e61097096d20ccacf2ba79399545d63303dccee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e61097096d20ccacf2ba79399545d63303dccee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2a05b0a358ce7cbd768224e99ea194a51e39150", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2a05b0a358ce7cbd768224e99ea194a51e39150", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2a05b0a358ce7cbd768224e99ea194a51e39150", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2a05b0a358ce7cbd768224e99ea194a51e39150/comments", "author": null, "committer": null, "parents": [{"sha": "ea16ab474b93bcb7fb7cbc58accd8490ee9b3290", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea16ab474b93bcb7fb7cbc58accd8490ee9b3290", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea16ab474b93bcb7fb7cbc58accd8490ee9b3290"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "ea74c5340a1ab5657cbfa9c99355c1342a224915", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2a05b0a358ce7cbd768224e99ea194a51e39150/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2a05b0a358ce7cbd768224e99ea194a51e39150/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a2a05b0a358ce7cbd768224e99ea194a51e39150", "patch": "@@ -1,3 +1,11 @@\n+Sat Apr 18 15:30:49 1998  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* gcc.c (lang_specific_driver): Add new parm type to prototype.\n+\t(added_libraries): New file scope static variable.\n+\t(process_command): Initialize added_libraries.  Pass it to\n+\tlang_specific_driver.\n+\t(main): Use added_libraries in check for no input files.\n+\t\n Sat Apr 18 01:23:11 1998  John Carr  <jfc@mit.edu>\n \n \t* sparc.c, sparc.h, sparc.md, sol2.h: Many changes related to V9"}, {"sha": "ab1408f1f04e63275968487b04ff70b25c224156", "filename": "gcc/gcc.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2a05b0a358ce7cbd768224e99ea194a51e39150/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2a05b0a358ce7cbd768224e99ea194a51e39150/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=a2a05b0a358ce7cbd768224e99ea194a51e39150", "patch": "@@ -265,7 +265,7 @@ char *xmalloc ();\n char *xrealloc ();\n \n #ifdef LANG_SPECIFIC_DRIVER\n-extern void lang_specific_driver PROTO ((void (*) (), int *, char ***));\n+extern void lang_specific_driver PROTO ((void (*) (), int *, char ***, int *));\n #endif\n \f\n /* Specs are strings containing lines, each of which (if not blank)\n@@ -2291,6 +2291,11 @@ static struct infile *infiles;\n \n static int n_infiles;\n \n+/* This counts the number of libraries added by LANG_SPECIFIC_DRIVER, so that\n+   we can tell if there were any user supplied any files or libraries.  */\n+\n+static int added_libraries;\n+\n /* And a vector of corresponding output files is made up later.  */\n \n static char **outfiles;\n@@ -2373,6 +2378,7 @@ process_command (argc, argv)\n \n   n_switches = 0;\n   n_infiles = 0;\n+  added_libraries = 0;\n \n   /* Figure compiler version from version string.  */\n \n@@ -2515,7 +2521,7 @@ process_command (argc, argv)\n \n #ifdef LANG_SPECIFIC_DRIVER\n   /* Do language-specific adjustment/addition of flags.  */\n-  lang_specific_driver (fatal, &argc, &argv);\n+  lang_specific_driver (fatal, &argc, &argv, &added_libraries);\n #endif\n \n   /* Scan argv twice.  Here, the first time, just count how many switches\n@@ -4696,7 +4702,7 @@ main (argc, argv)\n \texit (0);\n     }\n \n-  if (n_infiles == 0)\n+  if (n_infiles == added_libraries)\n     fatal (\"No input files\");\n \n   /* Make a place to record the compiler output file names"}]}