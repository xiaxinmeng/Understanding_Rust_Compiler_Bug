{"sha": "3dee689d8fa82d36a83926931bb9ebaad18ee465", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RlZTY4OWQ4ZmE4MmQzNmE4MzkyNjkzMWJiOWViYWFkMThlZTQ2NQ==", "commit": {"author": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2015-11-07T14:23:32Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2015-11-07T14:23:32Z"}, "message": "atexit.c: New file.\n\n* config/rs6000/atexit.c: New file.\n* config/rs6000/t-aix-cxa (LIB2ADDEH): Build atexit.c.\n* config/rs6000/libgcc-aix-cxa.ver (atexit): Add symbol to exports.\n* config/rs6000/cxa_finalize.c\n(catomic_compare_and_exchange_bool_acq): Negate return value.\n\nFrom-SVN: r229932", "tree": {"sha": "b5479f5b6dea3532a9104c0c269485d6e9461c85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5479f5b6dea3532a9104c0c269485d6e9461c85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3dee689d8fa82d36a83926931bb9ebaad18ee465", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dee689d8fa82d36a83926931bb9ebaad18ee465", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3dee689d8fa82d36a83926931bb9ebaad18ee465", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dee689d8fa82d36a83926931bb9ebaad18ee465/comments", "author": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6ca5a44255096cba6a00edad911351fe94dd2e21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ca5a44255096cba6a00edad911351fe94dd2e21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ca5a44255096cba6a00edad911351fe94dd2e21"}], "stats": {"total": 63, "additions": 60, "deletions": 3}, "files": [{"sha": "cc5f9f28c0735c10c73b4215dd4da572c573fe92", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=3dee689d8fa82d36a83926931bb9ebaad18ee465", "patch": "@@ -1,3 +1,11 @@\n+2015-11-07  David Edelsohn  <dje.gcc@gmail.com>\n+\n+\t* config/rs6000/atexit.c: New file.\n+\t* config/rs6000/t-aix-cxa (LIB2ADDEH): Build atexit.c.\n+\t* config/rs6000/libgcc-aix-cxa.ver (atexit): Add symbol to exports.\n+\t* config/rs6000/cxa_finalize.c\n+\t(catomic_compare_and_exchange_bool_acq): Negate return value.\n+\n 2015-10-30  Venkataramanan Kumar  <venkataramanan.kumar@amd.com>\n \n \t* config/i386/cpuinfo.c (enum processor_types): Add AMDFAM17H."}, {"sha": "f12eb36fe0d2d0cce581e5633a52ca342efd0dd2", "filename": "libgcc/config/rs6000/atexit.c", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Fatexit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Fatexit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Frs6000%2Fatexit.c?ref=3dee689d8fa82d36a83926931bb9ebaad18ee465", "patch": "@@ -0,0 +1,44 @@\n+/* Copyright (C) 1999-2015 Free Software Foundation, Inc.\n+\n+   NOTE: This source is derived from an old version taken from the GNU C\n+   Library (glibc).\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify it under\n+the terms of the GNU General Public License as published by the Free\n+Software Foundation; either version 3, or (at your option) any later\n+version.\n+\n+GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+for more details.\n+\n+Under Section 7 of GPL version 3, you are granted additional\n+permissions described in the GCC Runtime Library Exception, version\n+3.1, as published by the Free Software Foundation.\n+\n+You should have received a copy of the GNU General Public License and\n+a copy of the GCC Runtime Library Exception along with this program;\n+see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#include <stdlib.h>\n+#include \"exit.h\"\n+\n+\n+/* This is defined by newer gcc version unique for each module.  */\n+extern void *__dso_handle __attribute__ ((__weak__));\n+\n+\n+/* Register FUNC to be executed by `exit'.  */\n+int\n+#ifndef atexit\n+attribute_hidden\n+#endif\n+atexit (void (*func) (void))\n+{\n+  return __cxa_atexit ((void (*) (void *)) func, NULL,\n+\t\t       &__dso_handle == NULL ? NULL : __dso_handle);\n+}"}, {"sha": "1fc9d605bbf83401360b01c4c2e01563fd32c3b6", "filename": "libgcc/config/rs6000/cxa_finalize.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Fcxa_finalize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Fcxa_finalize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Frs6000%2Fcxa_finalize.c?ref=3dee689d8fa82d36a83926931bb9ebaad18ee465", "patch": "@@ -32,8 +32,8 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n static boolean_t\n catomic_compare_and_exchange_bool_acq (long *mem, long newval, long oldval)\n {\n-  return __atomic_compare_exchange (mem, &oldval, &newval, 0,\n-\t\t\t\t    __ATOMIC_ACQUIRE, __ATOMIC_ACQUIRE);\n+  return ! __atomic_compare_exchange (mem, &oldval, &newval, 0,\n+\t\t\t\t      __ATOMIC_ACQUIRE, __ATOMIC_ACQUIRE);\n }\n \n /* If D is non-NULL, call all functions registered with `__cxa_atexit'"}, {"sha": "c729b585a444aae2d3273a70619f6a35b956f94d", "filename": "libgcc/config/rs6000/libgcc-aix-cxa.ver", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Flibgcc-aix-cxa.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Flibgcc-aix-cxa.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Frs6000%2Flibgcc-aix-cxa.ver?ref=3dee689d8fa82d36a83926931bb9ebaad18ee465", "patch": "@@ -7,3 +7,7 @@ GCC_4.9 {\n   _GLOBAL__AIXI_shr_o\n   _GLOBAL__AIXD_shr_o\n }\n+\n+GCC_5 {\n+  atexit\n+}"}, {"sha": "77d7b5336f321b81dbbfdfb45622139552de22b1", "filename": "libgcc/config/rs6000/t-aix-cxa", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Ft-aix-cxa", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dee689d8fa82d36a83926931bb9ebaad18ee465/libgcc%2Fconfig%2Frs6000%2Ft-aix-cxa", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Frs6000%2Ft-aix-cxa?ref=3dee689d8fa82d36a83926931bb9ebaad18ee465", "patch": "@@ -1,5 +1,6 @@\n LIB2ADDEH += $(srcdir)/config/rs6000/cxa_atexit.c \\\n-\t$(srcdir)/config/rs6000/cxa_finalize.c\n+\t$(srcdir)/config/rs6000/cxa_finalize.c \\\n+\t$(srcdir)/config/rs6000/atexit.c\n \n LIB2ADD_ST += $(srcdir)/config/rs6000/aixinitfini.c\n "}]}