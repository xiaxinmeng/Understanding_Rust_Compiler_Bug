{"sha": "f4701961145138742997ead9600196211450c9d9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ3MDE5NjExNDUxMzg3NDI5OTdlYWQ5NjAwMTk2MjExNDUwYzlkOQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-09-03T21:33:46Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-09-03T21:33:46Z"}, "message": "Class.h (_getDeclaredMethod): Declare.\n\n\t* java/lang/Class.h (_getDeclaredMethod): Declare.\n\t(_getMethod): Now private.\n\t* java/lang/natClass.cc (_getDeclaredMethod): Renamed from\n\tgetDeclaredMethod.  Now returns NULL on failure.\n\t* java/lang/Class.java (_getDeclaredMethod): Declare.\n\t(getDeclaredMethod): No longer native; implements access checks.\n\nFrom-SVN: r56772", "tree": {"sha": "b89c68832aa1f41f6cad7d80d73b8ae5813779c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b89c68832aa1f41f6cad7d80d73b8ae5813779c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f4701961145138742997ead9600196211450c9d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4701961145138742997ead9600196211450c9d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4701961145138742997ead9600196211450c9d9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4701961145138742997ead9600196211450c9d9/comments", "author": null, "committer": null, "parents": [{"sha": "57016b4723d40263c4765d0c94ab20a0e3c2335f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57016b4723d40263c4765d0c94ab20a0e3c2335f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57016b4723d40263c4765d0c94ab20a0e3c2335f"}], "stats": {"total": 48, "additions": 40, "deletions": 8}, "files": [{"sha": "22c7ddbd0bc78305bf4a0e188c18a85516af5821", "filename": "libjava/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4701961145138742997ead9600196211450c9d9/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4701961145138742997ead9600196211450c9d9/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=f4701961145138742997ead9600196211450c9d9", "patch": "@@ -1,3 +1,12 @@\n+2002-09-03  Tom Tromey  <tromey@redhat.com>\n+\n+\t* java/lang/Class.h (_getDeclaredMethod): Declare.\n+\t(_getMethod): Now private.\n+\t* java/lang/natClass.cc (_getDeclaredMethod): Renamed from\n+\tgetDeclaredMethod.  Now returns NULL on failure.\n+\t* java/lang/Class.java (_getDeclaredMethod): Declare.\n+\t(getDeclaredMethod): No longer native; implements access checks.\n+\n 2002-09-01  Mark Wielaard  <mark@klomp.org>\n \n \t* gnu/gcj/runtime/NameFinder.java (remove_interpreter): New field."}, {"sha": "9a8d4183b6fc135351833a8d3592ea1e9098ab50", "filename": "libjava/java/lang/Class.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4701961145138742997ead9600196211450c9d9/libjava%2Fjava%2Flang%2FClass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4701961145138742997ead9600196211450c9d9/libjava%2Fjava%2Flang%2FClass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.h?ref=f4701961145138742997ead9600196211450c9d9", "patch": "@@ -160,14 +160,16 @@ class java::lang::Class : public java::lang::Object\n   java::lang::reflect::Method *getPrivateMethod (jstring, JArray<jclass> *);\n   java::security::ProtectionDomain *getProtectionDomain0 ();\n \n+  java::lang::reflect::Method *_getMethod (jstring, JArray<jclass> *);\n+  java::lang::reflect::Method *_getDeclaredMethod (jstring, JArray<jclass> *);\n+\n public:\n   JArray<java::lang::reflect::Field *> *getFields (void);\n \n   JArray<jclass> *getInterfaces (void);\n \n   void getSignature (java::lang::StringBuffer *buffer);\n   static jstring getSignature (JArray<jclass> *, jboolean is_constructor);\n-  java::lang::reflect::Method *_getMethod (jstring, JArray<jclass> *);\n   JArray<java::lang::reflect::Method *> *getMethods (void);\n \n   inline jint getModifiers (void)"}, {"sha": "cc1cc40f2a48defb3212e5eed89a6edaa11ef4bf", "filename": "libjava/java/lang/Class.java", "status": "modified", "additions": 25, "deletions": 3, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4701961145138742997ead9600196211450c9d9/libjava%2Fjava%2Flang%2FClass.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4701961145138742997ead9600196211450c9d9/libjava%2Fjava%2Flang%2FClass.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.java?ref=f4701961145138742997ead9600196211450c9d9", "patch": "@@ -65,9 +65,31 @@ public Constructor[] getDeclaredConstructors () throws SecurityException\n   public native Field getDeclaredField (String fieldName)\n     throws NoSuchFieldException, SecurityException;\n   public native Field[] getDeclaredFields () throws SecurityException;\n-  public native Method getDeclaredMethod (String methodName,\n-\t\t\t\t\t  Class[] parameterTypes)\n-    throws NoSuchMethodException, SecurityException;\n+\n+  private native Method _getDeclaredMethod (String methodName,\n+\t\t\t\t\t    Class[] parameterTypes);\n+\n+  public Method getDeclaredMethod (String methodName, Class[] parameterTypes)\n+    throws NoSuchMethodException, SecurityException\n+  {\n+    SecurityManager sm = System.getSecurityManager();\n+    if (sm != null)\n+      {\n+\tsm.checkMemberAccess(this, Member.DECLARED);\n+\tPackage p = getPackage();\n+\tif (p != null)\n+\t  sm.checkPackageAccess(p.getName());\n+      }\n+\n+    if (\"<init>\".equals(methodName) || \"<clinit>\".equals(methodName))\n+      throw new NoSuchMethodException(methodName);\n+\n+    Method m = _getDeclaredMethod(methodName, parameterTypes);\n+    if (m == null)\n+      throw new NoSuchMethodException (methodName);\n+    return m;\n+  }\n+\n   public native Method[] getDeclaredMethods () throws SecurityException;\n \n   // This is marked as unimplemented in the JCL book."}, {"sha": "fca074152cee414986984a1304b19e0f03fab1e0", "filename": "libjava/java/lang/natClass.cc", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4701961145138742997ead9600196211450c9d9/libjava%2Fjava%2Flang%2FnatClass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4701961145138742997ead9600196211450c9d9/libjava%2Fjava%2Flang%2FnatClass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClass.cc?ref=f4701961145138742997ead9600196211450c9d9", "patch": "@@ -315,16 +315,15 @@ java::lang::Class::getSignature (JArray<jclass> *param_types,\n }\n \n java::lang::reflect::Method *\n-java::lang::Class::getDeclaredMethod (jstring name,\n-\t\t\t\t      JArray<jclass> *param_types)\n+java::lang::Class::_getDeclaredMethod (jstring name,\n+\t\t\t\t       JArray<jclass> *param_types)\n {\n   jstring partial_sig = getSignature (param_types, false);\n   jint p_len = partial_sig->length();\n   _Jv_Utf8Const *utf_name = _Jv_makeUtf8Const (name);\n   int i = isPrimitive () ? 0 : method_count;\n   while (--i >= 0)\n     {\n-      // FIXME: access checks.\n       if (_Jv_equalUtf8Consts (methods[i].name, utf_name)\n \t  && _Jv_equaln (methods[i].signature, partial_sig, p_len))\n \t{\n@@ -336,7 +335,7 @@ java::lang::Class::getDeclaredMethod (jstring name,\n \t  return rmethod;\n \t}\n     }\n-  throw new java::lang::NoSuchMethodException;\n+  return NULL;\n }\n \n JArray<java::lang::reflect::Method *> *"}]}