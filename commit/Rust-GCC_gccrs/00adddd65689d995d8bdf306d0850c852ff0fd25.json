{"sha": "00adddd65689d995d8bdf306d0850c852ff0fd25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBhZGRkZDY1Njg5ZDk5NWQ4YmRmMzA2ZDA4NTBjODUyZmYwZmQyNQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-09-14T13:05:50Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-09-14T16:27:28Z"}, "message": "analyzer: add regression test for leak false positive\n\nDownstream bug report:\n  https://bugzilla.redhat.com/show_bug.cgi?id=1878600\ndescribes a false positive from -Wanalyzer-file-leak seen with\ngcc 10.2, but which has been fixed in gcc 11.\n\nThis patch adds the reproducer as a regression test.\n\ngcc/testsuite/ChangeLog:\n\t* gcc.dg/analyzer/rhbz1878600.c: New test.", "tree": {"sha": "5921bf76340a84babe81872b97c438c614122ba1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5921bf76340a84babe81872b97c438c614122ba1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00adddd65689d995d8bdf306d0850c852ff0fd25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00adddd65689d995d8bdf306d0850c852ff0fd25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00adddd65689d995d8bdf306d0850c852ff0fd25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00adddd65689d995d8bdf306d0850c852ff0fd25/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "35e3f0829d8e9cdc7ea19917c9f3a7add3f14847", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35e3f0829d8e9cdc7ea19917c9f3a7add3f14847", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35e3f0829d8e9cdc7ea19917c9f3a7add3f14847"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "9f6ccb6dc275922a49dfb15687c414f5dc477799", "filename": "gcc/testsuite/gcc.dg/analyzer/rhbz1878600.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00adddd65689d995d8bdf306d0850c852ff0fd25/gcc%2Ftestsuite%2Fgcc.dg%2Fanalyzer%2Frhbz1878600.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00adddd65689d995d8bdf306d0850c852ff0fd25/gcc%2Ftestsuite%2Fgcc.dg%2Fanalyzer%2Frhbz1878600.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fanalyzer%2Frhbz1878600.c?ref=00adddd65689d995d8bdf306d0850c852ff0fd25", "patch": "@@ -0,0 +1,34 @@\n+#include <stdio.h>\n+\n+#define INI_MAX_LINE 200\n+\n+typedef char* (*ini_reader)(char* str, int num, void* stream);\n+\n+int ini_parse(const char* filename);\n+\n+static int ini_parse_stream(ini_reader reader, void* stream)\n+{\n+    char line[INI_MAX_LINE];\n+    int max_line = INI_MAX_LINE;\n+    while (reader(line, max_line, stream) != NULL)\n+\t    ;\n+    return 0;\n+}\n+\n+static int ini_parse_file(FILE* file)\n+{\n+    return ini_parse_stream((ini_reader)fgets, file);\n+}\n+\n+int ini_parse(const char* filename)\n+{\n+    FILE* file;\n+    int error;\n+\n+    file = fopen(filename, \"r\");\n+    if (!file)\n+        return -1;\n+    error = ini_parse_file(file);\n+    fclose(file);\n+    return error;\n+}"}]}