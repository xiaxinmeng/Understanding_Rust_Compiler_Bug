{"sha": "3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2UxN2UzMWQ0NzEwOWE4NDBlYjMyZTI0ZGZkNTljYTlhNDljOGJmYQ==", "commit": {"author": {"name": "Rafael Avila de Espindola", "email": "espindola@google.com", "date": "2009-05-27T12:57:59Z"}, "committer": {"name": "Rafael Espindola", "email": "espindola@gcc.gnu.org", "date": "2009-05-27T12:57:59Z"}, "message": "attribute_plugin.c: Include gcc-plugin.h first.\n\n2009-05-27  Rafael Avila de Espindola  <espindola@google.com>\n\n       * g++.dg/plugin/attribute_plugin.c: Include gcc-plugin.h first.\n       * g++.dg/plugin/dumb_plugin.c: Include gcc-plugin.h first.\n       * g++.dg/plugin/selfassign.c: Include gcc-plugin.h first.\n       * gcc.dg/plugin/selfassign.c: Include gcc-plugin.h first.\n\n\n2009-05-27  Rafael Avila de Espindola  <espindola@google.com>\n\n\t* Makefile.in (GCC_PLUGIN_H): New. Replace all uses of gcc-plugin.h with\n\tit.\n\t* doc/plugins.texi: Document that gcc-plugin.h must be the first to be\n\tincluded.\n\t* gcc-plugin.h: Include config.h and system.h.\n\t(IN_GCC): Define if not defined.\n\nFrom-SVN: r147908", "tree": {"sha": "a67f0eebb357d7ecd40cf64d83c7d946d9b0b498", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a67f0eebb357d7ecd40cf64d83c7d946d9b0b498"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/comments", "author": null, "committer": null, "parents": [{"sha": "5e370570a5cbdb9cb615e8167ae3dee3612bae8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e370570a5cbdb9cb615e8167ae3dee3612bae8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e370570a5cbdb9cb615e8167ae3dee3612bae8a"}], "stats": {"total": 40, "additions": 33, "deletions": 7}, "files": [{"sha": "7b7258f82604493bd5f04cffd0bbdfca11450897", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -1,3 +1,12 @@\n+2009-05-27  Rafael Avila de Espindola  <espindola@google.com>\n+\n+\t* Makefile.in (GCC_PLUGIN_H): New. Replace all uses of gcc-plugin.h with\n+\tit.\n+\t* doc/plugins.texi: Document that gcc-plugin.h must be the first to be\n+\tincluded.\n+\t* gcc-plugin.h: Include config.h and system.h.\n+\t(IN_GCC): Define if not defined.\n+\n 2009-05-27  Hans-Peter Nilsson  <hp@axis.com>\n \n \tPR middle-end/40249"}, {"sha": "872f5b7720ad534df133479dc284b44a20b09c5e", "filename": "gcc/Makefile.in", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -893,7 +893,8 @@ EBIMAP_H = ebitmap.h sbitmap.h\n IPA_PROP_H = ipa-prop.h $(TREE_H) vec.h $(CGRAPH_H)\n GSTAB_H = gstab.h stab.def\n BITMAP_H = bitmap.h $(HASHTAB_H) statistics.h\n-PLUGIN_H = plugin.h gcc-plugin.h\n+GCC_PLUGIN_H = gcc-plugin.h $(CONFIG_H) $(SYSTEM_H)\n+PLUGIN_H = plugin.h $(GCC_PLUGIN_H)\n PLUGIN_VERSION_H = plugin-version.h configargs.h\n \n #\f\n@@ -4035,8 +4036,8 @@ installdirs:\n \t$(mkinstalldirs) $(DESTDIR)$(man7dir)\n \n PLUGIN_HEADERS = $(TREE_H) $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) \\\n-  $(TOPLEV_H) $(BASIC_BLOCK_H) $(GIMPLE_H) $(TREE_PASS_H) gcc-plugin.h intl.h \\\n-  $(PLUGIN_VERSION_H)\n+  $(TOPLEV_H) $(BASIC_BLOCK_H) $(GIMPLE_H) $(TREE_PASS_H) $(GCC_PLUGIN_H) \\\n+  intl.h $(PLUGIN_VERSION_H)\n \n # Install the headers needed to build a plugin.\n install-plugin: installdirs"}, {"sha": "287619c404d7c21aac901e896a63e00555e79778", "filename": "gcc/doc/plugins.texi", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Fdoc%2Fplugins.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Fdoc%2Fplugins.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fplugins.texi?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -30,6 +30,8 @@ Plugins are activated by the compiler at specific events as defined in\n call @code{register_callback} specifying the name of the event and\n address of the callback function that will handle that event.\n \n+The header @file{gcc-plugin.h} must be the first gcc header to be included.\n+\n @subsection Plugin initialization\n \n Every plugin should export a function called @code{plugin_init} that"}, {"sha": "1588bca372c0cb74f496acdc2e277f34cd80d329", "filename": "gcc/gcc-plugin.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Fgcc-plugin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Fgcc-plugin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc-plugin.h?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -20,6 +20,13 @@ along with GCC; see the file COPYING3.  If not see\n #ifndef GCC_PLUGIN_H\n #define GCC_PLUGIN_H\n \n+#ifndef IN_GCC\n+#define IN_GCC\n+#endif\n+\n+#include \"config.h\"\n+#include \"system.h\"\n+\n /* Event names.  Keep in sync with plugin_event_name[].  */\n enum plugin_event\n {"}, {"sha": "f54f138eeb66bbdc2d4e5e92b5b1c6ad923c1722", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -1,3 +1,10 @@\n+2009-05-27  Rafael Avila de Espindola  <espindola@google.com>\n+\n+\t* g++.dg/plugin/attribute_plugin.c: Include gcc-plugin.h first.\n+\t* g++.dg/plugin/dumb_plugin.c: Include gcc-plugin.h first.\n+\t* g++.dg/plugin/selfassign.c: Include gcc-plugin.h first.\n+\t* gcc.dg/plugin/selfassign.c: Include gcc-plugin.h first.\n+\n 2009-05-27  Kai TIetz  <kai.tietz@onevision.com>\n \n         * g++.old-deja/g++.brendan/array1.C (array): Use __SIZE_TYPE__"}, {"sha": "16b349643503031198c6aa6a71dfccae227bdfac", "filename": "gcc/testsuite/g++.dg/plugin/attribute_plugin.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fattribute_plugin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fattribute_plugin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fattribute_plugin.c?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -1,13 +1,13 @@\n /* Demonstrates how to add custom attributes */\n \n+#include \"gcc-plugin.h\"\n #include <stdlib.h>\n #include \"config.h\"\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"tree.h\"\n #include \"tree-pass.h\"\n #include \"intl.h\"\n-#include \"gcc-plugin.h\"\n \n /* Attribute handler callback */\n "}, {"sha": "24da5440391ee341396ffe4424fc30fe7d673a6f", "filename": "gcc/testsuite/g++.dg/plugin/dumb_plugin.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fdumb_plugin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fdumb_plugin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fdumb_plugin.c?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -1,14 +1,14 @@\n /* A trivial (dumb) plugin example that shows how to use the GCC plugin\n    mechanism.  */\n \n+#include \"gcc-plugin.h\"\n #include <stdlib.h>\n #include \"config.h\"\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"tree.h\"\n #include \"tree-pass.h\"\n #include \"intl.h\"\n-#include \"gcc-plugin.h\"\n \n \n /* Callback function to invoke after GCC finishes parsing a struct.  */"}, {"sha": "2bc1d861358fc4c800f2d8c51571f37abd7bd6aa", "filename": "gcc/testsuite/g++.dg/plugin/selfassign.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fselfassign.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fselfassign.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fplugin%2Fselfassign.c?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -2,6 +2,7 @@\n    self-assignment statements.  */\n /* { dg-options \"-O\" } */\n \n+#include \"gcc-plugin.h\"\n #include \"config.h\"\n #include \"system.h\"\n #include \"coretypes.h\"\n@@ -12,7 +13,6 @@\n #include \"tree.h\"\n #include \"tree-pass.h\"\n #include \"intl.h\"\n-#include \"gcc-plugin.h\"\n \n \n /* Indicate whether to check overloaded operator '=', which is performed by"}, {"sha": "2bc1d861358fc4c800f2d8c51571f37abd7bd6aa", "filename": "gcc/testsuite/gcc.dg/plugin/selfassign.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fgcc.dg%2Fplugin%2Fselfassign.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e17e31d47109a840eb32e24dfd59ca9a49c8bfa/gcc%2Ftestsuite%2Fgcc.dg%2Fplugin%2Fselfassign.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fplugin%2Fselfassign.c?ref=3e17e31d47109a840eb32e24dfd59ca9a49c8bfa", "patch": "@@ -2,6 +2,7 @@\n    self-assignment statements.  */\n /* { dg-options \"-O\" } */\n \n+#include \"gcc-plugin.h\"\n #include \"config.h\"\n #include \"system.h\"\n #include \"coretypes.h\"\n@@ -12,7 +13,6 @@\n #include \"tree.h\"\n #include \"tree-pass.h\"\n #include \"intl.h\"\n-#include \"gcc-plugin.h\"\n \n \n /* Indicate whether to check overloaded operator '=', which is performed by"}]}