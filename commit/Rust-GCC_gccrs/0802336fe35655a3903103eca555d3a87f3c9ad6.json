{"sha": "0802336fe35655a3903103eca555d3a87f3c9ad6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDgwMjMzNmZlMzU2NTVhMzkwMzEwM2VjYTU1NWQzYTg3ZjNjOWFkNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-01-30T09:22:48Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-01-30T09:22:48Z"}, "message": "re PR target/39002 (codegen bug, stack pointer is not restored)\n\n\tPR target/39002\n\t* g++.dg/torture/pr39002.C: New test.\n\nFrom-SVN: r143782", "tree": {"sha": "6e42cfbcc18e7d34cbbb13c7bfe51b176bc840a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e42cfbcc18e7d34cbbb13c7bfe51b176bc840a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0802336fe35655a3903103eca555d3a87f3c9ad6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0802336fe35655a3903103eca555d3a87f3c9ad6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0802336fe35655a3903103eca555d3a87f3c9ad6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0802336fe35655a3903103eca555d3a87f3c9ad6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7f1c539c954e77bb4015ab1fc64ea4966a2bf011", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f1c539c954e77bb4015ab1fc64ea4966a2bf011", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f1c539c954e77bb4015ab1fc64ea4966a2bf011"}], "stats": {"total": 93, "additions": 93, "deletions": 0}, "files": [{"sha": "722203bf13f076a3d7145e5065581a07d30b282a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0802336fe35655a3903103eca555d3a87f3c9ad6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0802336fe35655a3903103eca555d3a87f3c9ad6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0802336fe35655a3903103eca555d3a87f3c9ad6", "patch": "@@ -1,3 +1,8 @@\n+2009-01-30  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/39002\n+\t* g++.dg/torture/pr39002.C: New test.\n+\n 2009-01-29  Kazu Hirata  <kazu@codesourcery.com>\n \n \tPR tree-optimization/39007"}, {"sha": "534d91dfa37eef411a01f704b8089697fb43157a", "filename": "gcc/testsuite/g++.dg/torture/pr39002.C", "status": "added", "additions": 88, "deletions": 0, "changes": 88, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0802336fe35655a3903103eca555d3a87f3c9ad6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr39002.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0802336fe35655a3903103eca555d3a87f3c9ad6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr39002.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr39002.C?ref=0802336fe35655a3903103eca555d3a87f3c9ad6", "patch": "@@ -0,0 +1,88 @@\n+// PR target/39002\n+// { dg-do run }\n+\n+struct S\n+{\n+  double x;\n+  double y;\n+  double z;\n+};\n+\n+double foo (S *, S *);\n+void bar (S *, S *, S *, double &, double &, double &);\n+\n+double\n+foo (S *a1, S *a2)\n+{\n+  return __builtin_sqrt ((a1->x - a2->x) * (a1->x - a2->x)\n+\t\t\t + (a1->y - a2->y) * (a1->y - a2->y)\n+\t\t\t + (a1->z - a2->z) * (a1->z - a2->z));\n+}\n+\n+void\n+bar (S *p, S *q, S *r, double &x, double &y, double &z)\n+{\n+  if (foo (p, q) == 0.0)\n+    {\n+      x = r->x;\n+      y = r->y;\n+      z = r->z;\n+      return;\n+    }\n+  if (foo (p, r) == 0.0)\n+    {\n+      x = r->x;\n+      y = r->y;\n+      z = r->z;\n+      return;\n+    }\n+  if (foo (q, r) == 0.0)\n+    {\n+      x = r->x;\n+      y = r->y;\n+      z = r->z;\n+      return;\n+    }\n+\n+  double a1, b1, c1, d1, e1;\n+  double dx, dy, dz, dw, dv;\n+\n+  a1 = q->x - p->x;\n+  b1 = q->y - p->y;\n+  c1 = q->z - p->z;\n+  e1 = __builtin_sqrt (a1 * a1 + b1 * b1 + c1 * c1);\n+  a1 = a1 / e1;\n+  b1 = b1 / e1;\n+  c1 = c1 / e1;\n+  dx = p->x - r->x;\n+  dy = p->y - r->y;\n+  dz = p->z - r->z;\n+  dw = dx * dx + dy * dy + dz * dz;\n+  dv = 2.0 * dx * a1 + 2.0 * dy * b1 + 2.0 * dz * c1;\n+  d1 = -dv / 2.0;\n+  x = p->x + (a1 * d1);\n+  y = p->y + (b1 * d1);\n+  z = p->z + (c1 * d1);\n+  return;\n+}\n+\n+int\n+main (void)\n+{\n+  S a, b, c, d, *p, *q, *r;\n+\n+  p = &a;\n+  q = &b;\n+  r = &c;\n+  a.x = 0.0;\n+  a.y = 0.0;\n+  a.z = 0.0;\n+  b.x = 1.0;\n+  b.y = 0.0;\n+  b.z = 0.0;\n+  c.x = 0.0;\n+  c.y = 1.0;\n+  c.z = 0.0;\n+  bar (p, q, r, d.x, d.y, d.z);\n+  return 0;\n+}"}]}