{"sha": "271f61fb29c6583bf4250100f19f86dcb5d2ef29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjcxZjYxZmIyOWM2NTgzYmY0MjUwMTAwZjE5Zjg2ZGNiNWQyZWYyOQ==", "commit": {"author": {"name": "David O'Brien", "email": "obrien@FreeBSD.org", "date": "2002-04-23T15:05:33Z"}, "committer": {"name": "David O'Brien", "email": "obrien@gcc.gnu.org", "date": "2002-04-23T15:05:33Z"}, "message": "g++spec.c: Use profiled libstdc++ and libm with -p/-pg.\n\n2002-04-23  David O'Brien  <obrien@FreeBSD.org>\n\t* g++spec.c: Use profiled libstdc++ and libm with -p/-pg.\n\t* config/freebsd.h (MATH_LIBRARY_PROFILE): Use the _p verions of\n\tthese libraries.\n\nApproved by:  Richard Henderson <rth@redhat.com>\n              Message-ID: <20020422223253.A32678@redhat.com>\n\nFrom-SVN: r52667", "tree": {"sha": "2d692bcfab6ac128788d04f5b5f2c804cc930682", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d692bcfab6ac128788d04f5b5f2c804cc930682"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/271f61fb29c6583bf4250100f19f86dcb5d2ef29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/271f61fb29c6583bf4250100f19f86dcb5d2ef29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/271f61fb29c6583bf4250100f19f86dcb5d2ef29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/271f61fb29c6583bf4250100f19f86dcb5d2ef29/comments", "author": null, "committer": null, "parents": [{"sha": "bdabbc80b9b04367e78137e0401c359799ee104e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdabbc80b9b04367e78137e0401c359799ee104e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdabbc80b9b04367e78137e0401c359799ee104e"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "fc34e7bba7f243f627fe61d73255d93a1f8d5b0a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/271f61fb29c6583bf4250100f19f86dcb5d2ef29/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/271f61fb29c6583bf4250100f19f86dcb5d2ef29/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=271f61fb29c6583bf4250100f19f86dcb5d2ef29", "patch": "@@ -1,3 +1,9 @@\n+2002-04-23  David O'Brien  <obrien@FreeBSD.org>\n+\n+\t* g++spec.c: Use profiled libstdc++ and libm with -p/-pg.\n+\t* config/freebsd.h (MATH_LIBRARY_PROFILE): Use the _p verions of\n+\tthese libraries.\n+\n 2002-04-23  David O'Brien  <obrien@FreeBSD.org>\n \n \t* config/freebsd.h(OBJECT_FORMAT_ELF): Define."}, {"sha": "97b20c5232b9133ddafaf186bfcda03908c754f7", "filename": "gcc/config/freebsd.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/271f61fb29c6583bf4250100f19f86dcb5d2ef29/gcc%2Fconfig%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/271f61fb29c6583bf4250100f19f86dcb5d2ef29/gcc%2Fconfig%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffreebsd.h?ref=271f61fb29c6583bf4250100f19f86dcb5d2ef29", "patch": "@@ -79,6 +79,8 @@ Boston, MA 02111-1307, USA.  */\n #undef  WCHAR_UNSIGNED\n #define WCHAR_UNSIGNED 0\n \n+#define MATH_LIBRARY_PROFILE    \"-lm_p\"\n+\n /* Code generation parameters.  */\n \n /* Use periods rather than dollar signs in special g++ assembler names."}, {"sha": "c0e5c73410c81e2cf9ceaef7adc77df217324353", "filename": "gcc/cp/g++spec.c", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/271f61fb29c6583bf4250100f19f86dcb5d2ef29/gcc%2Fcp%2Fg%2B%2Bspec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/271f61fb29c6583bf4250100f19f86dcb5d2ef29/gcc%2Fcp%2Fg%2B%2Bspec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fg%2B%2Bspec.c?ref=271f61fb29c6583bf4250100f19f86dcb5d2ef29", "patch": "@@ -32,10 +32,16 @@ Boston, MA 02111-1307, USA.  */\n #ifndef MATH_LIBRARY\n #define MATH_LIBRARY \"-lm\"\n #endif\n+#ifndef MATH_LIBRARY_PROFILE\n+#define MATH_LIBRARY_PROFILE \"-lm\"\n+#endif\n \n #ifndef LIBSTDCXX\n #define LIBSTDCXX \"-lstdc++\"\n #endif\n+#ifndef LIBSTDCXX_PROFILE\n+#define LIBSTDCXX_PROFILE \"-lstdc++\"\n+#endif\n \n void\n lang_specific_driver (in_argc, in_argv, in_added_libraries)\n@@ -45,6 +51,9 @@ lang_specific_driver (in_argc, in_argv, in_added_libraries)\n {\n   int i, j;\n \n+  /* If non-zero, the user gave us the `-p' or `-pg' flag.  */ \n+  int saw_profile_flag = 0;\n+\n   /* If non-zero, the user gave us the `-v' flag.  */ \n   int saw_verbose_flag = 0;\n \n@@ -137,6 +146,8 @@ lang_specific_driver (in_argc, in_argv, in_added_libraries)\n \t    }\n \t  else if (strcmp (argv[i], \"-lc\") == 0)\n \t    args[i] |= WITHLIBC;\n+\t  else if (strcmp (argv[i], \"-pg\") == 0 || strcmp (argv[i], \"-p\") == 0)\n+\t    saw_profile_flag++;\n \t  else if (strcmp (argv[i], \"-v\") == 0)\n \t    {\n \t      saw_verbose_flag = 1;\n@@ -259,14 +270,14 @@ lang_specific_driver (in_argc, in_argv, in_added_libraries)\n   /* Add `-lstdc++' if we haven't already done so.  */\n   if (library)\n     {\n-      arglist[j++] = LIBSTDCXX;\n+      arglist[j++] = saw_profile_flag ? LIBSTDCXX_PROFILE : LIBSTDCXX;\n       added_libraries++;\n     }\n   if (saw_math)\n     arglist[j++] = saw_math;\n   else if (library && need_math)\n     {\n-      arglist[j++] = MATH_LIBRARY;\n+      arglist[j++] = saw_profile_flag ? MATH_LIBRARY_PROFILE : MATH_LIBRARY;\n       added_libraries++;\n     }\n   if (saw_libc)"}]}