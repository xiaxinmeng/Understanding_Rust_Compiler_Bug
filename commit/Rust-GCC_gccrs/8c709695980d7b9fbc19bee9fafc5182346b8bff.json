{"sha": "8c709695980d7b9fbc19bee9fafc5182346b8bff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGM3MDk2OTU5ODBkN2I5ZmJjMTliZWU5ZmFmYzUxODIzNDZiOGJmZg==", "commit": {"author": {"name": "Joel Sherrill", "email": "joel.sherrill@oarcorp.com", "date": "2010-04-15T15:39:47Z"}, "committer": {"name": "Joel Sherrill", "email": "joel@gcc.gnu.org", "date": "2010-04-15T15:39:47Z"}, "message": "g-socket.adb: A target can have multiple missing errno's.\n\n2010-04-15  Joel Sherrill <joel.sherrill@oarcorp.com>\n\n\t* g-socket.adb: A target can have multiple missing errno's.  This\n\twill result in multiple errno's being defined as -1.  Because of this\n\twe can not use a case but must use a series of if's to avoid \n\ta duplicate case error in GNAT.Sockets.Resolve_Error.\n\nFrom-SVN: r158382", "tree": {"sha": "0c370e2a245499617b6b687584ba420e6e5d3f78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c370e2a245499617b6b687584ba420e6e5d3f78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c709695980d7b9fbc19bee9fafc5182346b8bff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c709695980d7b9fbc19bee9fafc5182346b8bff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c709695980d7b9fbc19bee9fafc5182346b8bff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c709695980d7b9fbc19bee9fafc5182346b8bff/comments", "author": {"login": "joelsherrill", "id": 183688, "node_id": "MDQ6VXNlcjE4MzY4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/183688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelsherrill", "html_url": "https://github.com/joelsherrill", "followers_url": "https://api.github.com/users/joelsherrill/followers", "following_url": "https://api.github.com/users/joelsherrill/following{/other_user}", "gists_url": "https://api.github.com/users/joelsherrill/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelsherrill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelsherrill/subscriptions", "organizations_url": "https://api.github.com/users/joelsherrill/orgs", "repos_url": "https://api.github.com/users/joelsherrill/repos", "events_url": "https://api.github.com/users/joelsherrill/events{/privacy}", "received_events_url": "https://api.github.com/users/joelsherrill/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d8a653c546d9e6adc3a49caa4ac862862dfc30de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8a653c546d9e6adc3a49caa4ac862862dfc30de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8a653c546d9e6adc3a49caa4ac862862dfc30de"}], "stats": {"total": 141, "additions": 94, "deletions": 47}, "files": [{"sha": "0d7562733105cc663ba8197f81d50a3daf97bf91", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c709695980d7b9fbc19bee9fafc5182346b8bff/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c709695980d7b9fbc19bee9fafc5182346b8bff/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=8c709695980d7b9fbc19bee9fafc5182346b8bff", "patch": "@@ -1,3 +1,10 @@\n+2010-04-15  Joel Sherrill <joel.sherrill@oarcorp.com>\n+\n+\t* g-socket.adb: A target can have multiple missing errno's.  This\n+\twill result in multiple errno's being defined as -1.  Because of this\n+\twe can not use a case but must use a series of if's to avoid \n+\ta duplicate case error in GNAT.Sockets.Resolve_Error.\n+\n 2010-04-15  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c (call_to_gnu): Open a nesting level if this is"}, {"sha": "bbfaecf89c378051f2b106d34cd6b8377897c6e2", "filename": "gcc/ada/g-socket.adb", "status": "modified", "additions": 87, "deletions": 47, "changes": 134, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c709695980d7b9fbc19bee9fafc5182346b8bff/gcc%2Fada%2Fg-socket.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c709695980d7b9fbc19bee9fafc5182346b8bff/gcc%2Fada%2Fg-socket.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socket.adb?ref=8c709695980d7b9fbc19bee9fafc5182346b8bff", "patch": "@@ -1750,53 +1750,93 @@ package body GNAT.Sockets is\n \n       pragma Warnings (On);\n \n-      case Error_Value is\n-         when ENOERROR        => return Success;\n-         when EACCES          => return Permission_Denied;\n-         when EADDRINUSE      => return Address_Already_In_Use;\n-         when EADDRNOTAVAIL   => return Cannot_Assign_Requested_Address;\n-         when EAFNOSUPPORT    => return\n-                                 Address_Family_Not_Supported_By_Protocol;\n-         when EALREADY        => return Operation_Already_In_Progress;\n-         when EBADF           => return Bad_File_Descriptor;\n-         when ECONNABORTED    => return Software_Caused_Connection_Abort;\n-         when ECONNREFUSED    => return Connection_Refused;\n-         when ECONNRESET      => return Connection_Reset_By_Peer;\n-         when EDESTADDRREQ    => return Destination_Address_Required;\n-         when EFAULT          => return Bad_Address;\n-         when EHOSTDOWN       => return Host_Is_Down;\n-         when EHOSTUNREACH    => return No_Route_To_Host;\n-         when EINPROGRESS     => return Operation_Now_In_Progress;\n-         when EINTR           => return Interrupted_System_Call;\n-         when EINVAL          => return Invalid_Argument;\n-         when EIO             => return Input_Output_Error;\n-         when EISCONN         => return Transport_Endpoint_Already_Connected;\n-         when ELOOP           => return Too_Many_Symbolic_Links;\n-         when EMFILE          => return Too_Many_Open_Files;\n-         when EMSGSIZE        => return Message_Too_Long;\n-         when ENAMETOOLONG    => return File_Name_Too_Long;\n-         when ENETDOWN        => return Network_Is_Down;\n-         when ENETRESET       => return\n-                                 Network_Dropped_Connection_Because_Of_Reset;\n-         when ENETUNREACH     => return Network_Is_Unreachable;\n-         when ENOBUFS         => return No_Buffer_Space_Available;\n-         when ENOPROTOOPT     => return Protocol_Not_Available;\n-         when ENOTCONN        => return Transport_Endpoint_Not_Connected;\n-         when ENOTSOCK        => return Socket_Operation_On_Non_Socket;\n-         when EOPNOTSUPP      => return Operation_Not_Supported;\n-         when EPFNOSUPPORT    => return Protocol_Family_Not_Supported;\n-         when EPIPE           => return Broken_Pipe;\n-         when EPROTONOSUPPORT => return Protocol_Not_Supported;\n-         when EPROTOTYPE      => return Protocol_Wrong_Type_For_Socket;\n-         when ESHUTDOWN       => return\n-                                 Cannot_Send_After_Transport_Endpoint_Shutdown;\n-         when ESOCKTNOSUPPORT => return Socket_Type_Not_Supported;\n-         when ETIMEDOUT       => return Connection_Timed_Out;\n-         when ETOOMANYREFS    => return Too_Many_References;\n-         when EWOULDBLOCK     => return Resource_Temporarily_Unavailable;\n-\n-         when others          => return Cannot_Resolve_Error;\n-      end case;\n+      --  This is not a case statement because if a particular error\n+      --  number constant is not defined, s-oscons-tmplt.c defines\n+      --  it to -1.  If multiple constants are not defined, they\n+      --  would each be -1 and result in a \"duplicate value in case\" error.\n+      if Error_Value = ENOERROR then\n+         return Success;\n+      elsif Error_Value = EACCES then\n+         return Permission_Denied;\n+      elsif Error_Value = EADDRINUSE then\n+         return Address_Already_In_Use;\n+      elsif Error_Value = EADDRNOTAVAIL then\n+         return Cannot_Assign_Requested_Address;\n+      elsif Error_Value = EAFNOSUPPORT then\n+         return Address_Family_Not_Supported_By_Protocol;\n+      elsif Error_Value = EALREADY then\n+         return Operation_Already_In_Progress;\n+      elsif Error_Value = EBADF then\n+         return Bad_File_Descriptor;\n+      elsif Error_Value = ECONNABORTED then\n+         return Software_Caused_Connection_Abort;\n+      elsif Error_Value = ECONNREFUSED then\n+         return Connection_Refused;\n+      elsif Error_Value = ECONNRESET then\n+         return Connection_Reset_By_Peer;\n+      elsif Error_Value = EDESTADDRREQ then\n+         return Destination_Address_Required;\n+      elsif Error_Value = EFAULT then\n+         return Bad_Address;\n+      elsif Error_Value = EHOSTDOWN then\n+         return Host_Is_Down;\n+      elsif Error_Value = EHOSTUNREACH then\n+         return No_Route_To_Host;\n+      elsif Error_Value = EINPROGRESS then\n+         return Operation_Now_In_Progress;\n+      elsif Error_Value = EINTR then\n+         return Interrupted_System_Call;\n+      elsif Error_Value = EINVAL then\n+         return Invalid_Argument;\n+      elsif Error_Value = EIO then\n+         return Input_Output_Error;\n+      elsif Error_Value = EISCONN then\n+         return Transport_Endpoint_Already_Connected;\n+      elsif Error_Value = ELOOP then\n+         return Too_Many_Symbolic_Links;\n+      elsif Error_Value = EMFILE then\n+         return Too_Many_Open_Files;\n+      elsif Error_Value = EMSGSIZE then\n+         return Message_Too_Long;\n+      elsif Error_Value = ENAMETOOLONG then\n+         return File_Name_Too_Long;\n+      elsif Error_Value = ENETDOWN then\n+         return Network_Is_Down;\n+      elsif Error_Value = ENETRESET then\n+         return Network_Dropped_Connection_Because_Of_Reset;\n+      elsif Error_Value = ENETUNREACH then\n+         return Network_Is_Unreachable;\n+      elsif Error_Value = ENOBUFS then\n+         return No_Buffer_Space_Available;\n+      elsif Error_Value = ENOPROTOOPT then\n+         return Protocol_Not_Available;\n+      elsif Error_Value = ENOTCONN then\n+         return Transport_Endpoint_Not_Connected;\n+      elsif Error_Value = ENOTSOCK then\n+         return Socket_Operation_On_Non_Socket;\n+      elsif Error_Value = EOPNOTSUPP then\n+         return Operation_Not_Supported;\n+      elsif Error_Value = EPFNOSUPPORT then\n+         return Protocol_Family_Not_Supported;\n+      elsif Error_Value = EPIPE then\n+         return Broken_Pipe;\n+      elsif Error_Value = EPROTONOSUPPORT then\n+         return Protocol_Not_Supported;\n+      elsif Error_Value = EPROTOTYPE then\n+         return Protocol_Wrong_Type_For_Socket;\n+      elsif Error_Value = ESHUTDOWN then\n+         return Cannot_Send_After_Transport_Endpoint_Shutdown;\n+      elsif Error_Value = ESOCKTNOSUPPORT then\n+         return Socket_Type_Not_Supported;\n+      elsif Error_Value = ETIMEDOUT then\n+         return Connection_Timed_Out;\n+      elsif Error_Value = ETOOMANYREFS then\n+         return Too_Many_References;\n+      elsif Error_Value = EWOULDBLOCK then\n+         return Resource_Temporarily_Unavailable;\n+      else\n+         return Cannot_Resolve_Error;\n+      end if;\n    end Resolve_Error;\n \n    -----------------------"}]}