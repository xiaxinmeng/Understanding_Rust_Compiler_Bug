{"sha": "81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODFiZmVmYmE3ZjZiZWZiYmNlMGQ0ZjRmZmY5YWMxZGQyZDFkZmUwZg==", "commit": {"author": {"name": "Julia Koval", "email": "julia.koval@intel.com", "date": "2017-07-06T11:03:35Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2017-07-06T11:03:35Z"}, "message": "Remove old rounding code\n\ngcc/\n\t* gcc/config/i386/i386.c (ix86_erase_embedded_rounding):\n\tRemove code for old rounding pattern.\n\nFrom-SVN: r250017", "tree": {"sha": "75b16e45943622199301a9d93115428f1b09bd59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/75b16e45943622199301a9d93115428f1b09bd59"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f/comments", "author": {"login": "vaalfreja", "id": 5216345, "node_id": "MDQ6VXNlcjUyMTYzNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5216345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vaalfreja", "html_url": "https://github.com/vaalfreja", "followers_url": "https://api.github.com/users/vaalfreja/followers", "following_url": "https://api.github.com/users/vaalfreja/following{/other_user}", "gists_url": "https://api.github.com/users/vaalfreja/gists{/gist_id}", "starred_url": "https://api.github.com/users/vaalfreja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vaalfreja/subscriptions", "organizations_url": "https://api.github.com/users/vaalfreja/orgs", "repos_url": "https://api.github.com/users/vaalfreja/repos", "events_url": "https://api.github.com/users/vaalfreja/events{/privacy}", "received_events_url": "https://api.github.com/users/vaalfreja/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "af5b71c248aea8a741fa28edb230c2e041f74783", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af5b71c248aea8a741fa28edb230c2e041f74783", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af5b71c248aea8a741fa28edb230c2e041f74783"}], "stats": {"total": 73, "additions": 17, "deletions": 56}, "files": [{"sha": "11051e6b587df90c9e645fadae482d183387fbd0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f", "patch": "@@ -1,3 +1,8 @@\n+2017-07-06  Julia Koval  <julia.koval@intel.com>\n+\n+\t* gcc/config/i386/i386.c (ix86_erase_embedded_rounding):\n+\tRemove code for old rounding pattern.\n+\n 2017-07-06  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* config/arm/parsecpu.awk (gen_comm_data): Do not escape single quotes"}, {"sha": "e2e4548dd2601c7e705121fec5ee98cc60a9bd9a", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 12, "deletions": 56, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=81bfefba7f6befbbce0d4f4fff9ac1dd2d1dfe0f", "patch": "@@ -36482,70 +36482,26 @@ ix86_expand_args_builtin (const struct builtin_description *d,\n }\n \n /* Transform pattern of following layout:\n-     (parallel [\n-       set (A B)\n-       (unspec [C] UNSPEC_EMBEDDED_ROUNDING)])\n-     ])\n+     (set A\n+       (unspec [B C] UNSPEC_EMBEDDED_ROUNDING))\n+     )\n    into:\n-     (set (A B))\n-\n-   Or:\n-     (parallel [ A B\n-     ...\n-     (unspec [C] UNSPEC_EMBEDDED_ROUNDING)\n-     ...\n-     ])\n-   into:\n-     (parallel [ A B ... ])  */\n+     (set (A B)) */\n \n static rtx\n ix86_erase_embedded_rounding (rtx pat)\n {\n   if (GET_CODE (pat) == INSN)\n     pat = PATTERN (pat);\n \n-  if (GET_CODE (pat) == PARALLEL)\n-  {\n-    if (XVECLEN (pat, 0) == 2)\n-      {\n-\trtx p0 = XVECEXP (pat, 0, 0);\n-\trtx p1 = XVECEXP (pat, 0, 1);\n-\tgcc_assert (GET_CODE (p0) == SET\n-\t\t    && GET_CODE (p1) == UNSPEC\n-\t\t    && XINT (p1, 1) == UNSPEC_EMBEDDED_ROUNDING);\n-\treturn p0;\n-      }\n-    else\n-      {\n-\trtx *res = XALLOCAVEC (rtx, XVECLEN (pat, 0));\n-\tint i = 0;\n-\tint j = 0;\n-\n-\tfor (; i < XVECLEN (pat, 0); ++i)\n-\t  {\n-\t    rtx elem = XVECEXP (pat, 0, i);\n-\t    if (GET_CODE (elem) != UNSPEC\n-\t\t|| XINT (elem, 1) != UNSPEC_EMBEDDED_ROUNDING)\n-\t      res[j++] = elem;\n-\t  }\n-\n-\t/*  No more than 1 occurence was removed.  */\n-\tgcc_assert (j >= XVECLEN (pat, 0) - 1);\n-\n-\treturn gen_rtx_PARALLEL (GET_MODE (pat), gen_rtvec_v (j, res));\n-    }\n-  }\n-  else\n-  {\n-    gcc_assert (GET_CODE (pat) == SET);\n-    rtx src = SET_SRC (pat);\n-    gcc_assert (XVECLEN (src, 0) == 2);\n-    rtx p0 = XVECEXP (src, 0, 0);\n-    gcc_assert (GET_CODE (src) == UNSPEC\n-\t\t&& XINT (src, 1) == UNSPEC_EMBEDDED_ROUNDING);\n-    rtx res = gen_rtx_SET (SET_DEST (pat), p0);\n-    return res;\n-  }\n+  gcc_assert (GET_CODE (pat) == SET);\n+  rtx src = SET_SRC (pat);\n+  gcc_assert (XVECLEN (src, 0) == 2);\n+  rtx p0 = XVECEXP (src, 0, 0);\n+  gcc_assert (GET_CODE (src) == UNSPEC\n+\t      && XINT (src, 1) == UNSPEC_EMBEDDED_ROUNDING);\n+  rtx res = gen_rtx_SET (SET_DEST (pat), p0);\n+  return res;\n }\n \n /* Subroutine of ix86_expand_round_builtin to take care of comi insns"}]}