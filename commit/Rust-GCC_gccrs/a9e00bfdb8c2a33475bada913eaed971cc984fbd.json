{"sha": "a9e00bfdb8c2a33475bada913eaed971cc984fbd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTllMDBiZmRiOGMyYTMzNDc1YmFkYTkxM2VhZWQ5NzFjYzk4NGZiZA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-22T09:46:58Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-22T09:46:58Z"}, "message": "[multiple changes]\n\n2010-06-22  Vincent Celier  <celier@adacore.com>\n\n\t* prj-attr.adb: Remove project level attribute Main_Language.\n\n2010-06-22  Robert Dewar  <dewar@adacore.com>\n\n\t* switch-b.adb, osint-b.adb: Minor reformatting.\n\n2010-06-22  Pascal Obry  <obry@adacore.com>\n\n\t* g-socthi-mingw.adb (C_Sendmsg): Do not attempt to send data from a\n\tvector if previous send was not fully successful. If only part of\n\tthe vector data was sent, we exit the loop.\n\nFrom-SVN: r161157", "tree": {"sha": "031b105a506cd40144e4838414a751612ee5064e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/031b105a506cd40144e4838414a751612ee5064e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9e00bfdb8c2a33475bada913eaed971cc984fbd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9e00bfdb8c2a33475bada913eaed971cc984fbd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9e00bfdb8c2a33475bada913eaed971cc984fbd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9e00bfdb8c2a33475bada913eaed971cc984fbd/comments", "author": null, "committer": null, "parents": [{"sha": "d25eaf7449b76e45ef21b512a7b5f80c4741e361", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d25eaf7449b76e45ef21b512a7b5f80c4741e361", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d25eaf7449b76e45ef21b512a7b5f80c4741e361"}], "stats": {"total": 63, "additions": 40, "deletions": 23}, "files": [{"sha": "e5018344984881301dd8efb5ae075016832f2a03", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a9e00bfdb8c2a33475bada913eaed971cc984fbd", "patch": "@@ -1,3 +1,17 @@\n+2010-06-22  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-attr.adb: Remove project level attribute Main_Language.\n+\n+2010-06-22  Robert Dewar  <dewar@adacore.com>\n+\n+\t* switch-b.adb, osint-b.adb: Minor reformatting.\n+\n+2010-06-22  Pascal Obry  <obry@adacore.com>\n+\n+\t* g-socthi-mingw.adb (C_Sendmsg): Do not attempt to send data from a\n+\tvector if previous send was not fully successful. If only part of\n+\tthe vector data was sent, we exit the loop.\n+\n 2010-06-22  Thomas Quinot  <quinot@adacore.com>\n \n \t* sem_res.adb (Make_Call_Into_Operator): Use First_Subtype for better"}, {"sha": "727a69ddba9ea1e85ff44f022bb2794deada228d", "filename": "gcc/ada/g-socthi-mingw.adb", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fg-socthi-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fg-socthi-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-socthi-mingw.adb?ref=a9e00bfdb8c2a33475bada913eaed971cc984fbd", "patch": "@@ -505,6 +505,10 @@ package body GNAT.Sockets.Thin is\n          else\n             Count := Count + Res;\n          end if;\n+\n+         --  Exit now if the buffer is not fully transmitted\n+\n+         exit when Stream_Element_Count (Res) < Iovec (J).Length;\n       end loop;\n \n       return System.CRTL.ssize_t (Count);"}, {"sha": "39b7a99be8438696b949a030f2666da5b140e980", "filename": "gcc/ada/osint-b.adb", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fosint-b.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fosint-b.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fosint-b.adb?ref=a9e00bfdb8c2a33475bada913eaed971cc984fbd", "patch": "@@ -192,14 +192,17 @@ package body Osint.B is\n       Current_File_Name_Index := To;\n    end Set_Current_File_Name_Index;\n \n+   -------------------\n+   -- Set_List_File --\n+   -------------------\n+\n    procedure Set_List_File (Filename : String) is\n    begin\n       pragma Assert (Current_List_File = Invalid_FD);\n       Current_List_File := Create_File (Filename, Text);\n \n       if Current_List_File = Invalid_FD then\n          Fail (\"cannot create list file: \" & Filename);\n-\n       else\n          Set_Output (Current_List_File);\n       end if;"}, {"sha": "2e9255c47d28a061e8956cce1cf040ef3ea1177f", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=a9e00bfdb8c2a33475bada913eaed971cc984fbd", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2009, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2010, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -71,7 +71,6 @@ package body Prj.Attr is\n    \"SVRproject_dir#\" &\n    \"lVmain#\" &\n    \"LVlanguages#\" &\n-   \"SVmain_language#\" &\n    \"Lbroots#\" &\n    \"SVexternally_built#\" &\n "}, {"sha": "705f9a3b5f066397f9b69ed9edb38089ffa42498", "filename": "gcc/ada/switch-b.adb", "status": "modified", "additions": 17, "deletions": 20, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fswitch-b.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9e00bfdb8c2a33475bada913eaed971cc984fbd/gcc%2Fada%2Fswitch-b.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-b.adb?ref=a9e00bfdb8c2a33475bada913eaed971cc984fbd", "patch": "@@ -42,20 +42,21 @@ package body Switch.B is\n       C   : Character        := ' ';\n \n       function Get_Optional_Filename return String_Ptr;\n-      --  If current character is '=', return a newly allocated string\n-      --  containing the remainder of the current switch (after the '='), else\n+      --  If current character is '=', return a newly allocated string that\n+      --  contains the remainder of the current switch (after the '='), else\n       --  return null.\n \n       function Get_Stack_Size (S : Character) return Int;\n-      --  Used for -d and -D to scan stack size including handling k/m.\n-      --  S is set to 'd' or 'D' to indicate the switch being scanned.\n+      --  Used for -d and -D to scan stack size including handling k/m. S is\n+      --  set to 'd' or 'D' to indicate the switch being scanned.\n \n       ---------------------------\n       -- Get_Optional_Filename --\n       ---------------------------\n \n       function Get_Optional_Filename return String_Ptr is\n          Result : String_Ptr;\n+\n       begin\n          if Ptr <= Max and then Switch_Chars (Ptr) = '=' then\n             if Ptr = Max then\n@@ -87,11 +88,11 @@ package body Switch.B is\n             pragma Unsuppress (Overflow_Check);\n \n          begin\n-            --  Check for additional character 'k' (for kilobytes) or 'm'\n-            --  (for Megabytes), but only if we have not reached the end\n-            --  of the switch string. Note that if this appears before the\n-            --  end of the string we will get an error when we test to make\n-            --  sure that the string is exhausted (at the end of the case).\n+            --  Check for additional character 'k' (for kilobytes) or 'm' (for\n+            --  Megabytes), but only if we have not reached the end of the\n+            --  switch string. Note that if this appears before the end of the\n+            --  string we will get an error when we test to make sure that the\n+            --  string is exhausted (at the end of the case).\n \n             if Ptr <= Max then\n                if Switch_Chars (Ptr) = 'k' then\n@@ -123,8 +124,8 @@ package body Switch.B is\n          Ptr := Ptr + 1;\n       end if;\n \n-      --  A little check, \"gnat\" at the start of a switch is not allowed\n-      --  except for the compiler\n+      --  A little check, \"gnat\" at the start of a switch is not allowed except\n+      --  for the compiler\n \n       if Switch_Chars'Last >= Ptr + 3\n         and then Switch_Chars (Ptr .. Ptr + 3) = \"gnat\"\n@@ -163,7 +164,6 @@ package body Switch.B is\n \n          when 'c' =>\n             Ptr := Ptr + 1;\n-\n             Check_Only := True;\n \n          --  Processing for C switch\n@@ -281,7 +281,7 @@ package body Switch.B is\n             Ptr := Ptr + 1;\n             C := Switch_Chars (Ptr);\n \n-            if C in  '1' .. '5'\n+            if C in '1' .. '5'\n               or else C = '8'\n               or else C = 'p'\n               or else C = 'f'\n@@ -333,7 +333,6 @@ package body Switch.B is\n \n             if Output_File_Name_Present then\n                Osint.Fail (\"duplicate -o switch\");\n-\n             else\n                Output_File_Name_Present := True;\n             end if;\n@@ -429,7 +428,6 @@ package body Switch.B is\n             Ptr := Ptr + 1;\n \n             case Switch_Chars (Ptr) is\n-\n                when 'e' =>\n                   Warning_Mode := Treat_As_Error;\n \n@@ -462,8 +460,7 @@ package body Switch.B is\n             Wide_Character_Encoding_Method_Specified := True;\n \n             Upper_Half_Encoding :=\n-              Wide_Character_Encoding_Method in\n-                WC_Upper_Half_Encoding_Method;\n+              Wide_Character_Encoding_Method in WC_Upper_Half_Encoding_Method;\n \n             Ptr := Ptr + 1;\n \n@@ -515,7 +512,7 @@ package body Switch.B is\n                   Osint.Fail (\"missing path for --RTS\");\n \n                else\n-                  --  valid --RTS switch\n+                  --  Valid --RTS switch\n \n                   Opt.No_Stdinc := True;\n                   Opt.RTS_Switch := True;\n@@ -537,8 +534,8 @@ package body Switch.B is\n                        Lib_Path_Name /= null\n                      then\n                         --  Set the RTS_*_Path_Name variables, so that the\n-                        --  correct directories will be set when\n-                        --  Osint.Add_Default_Search_Dirs will be called later.\n+                        --  correct directories will be set when a subsequent\n+                        --  call Osint.Add_Default_Search_Dirs is made.\n \n                         RTS_Src_Path_Name := Src_Path_Name;\n                         RTS_Lib_Path_Name := Lib_Path_Name;"}]}