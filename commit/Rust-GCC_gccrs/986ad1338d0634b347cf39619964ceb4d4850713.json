{"sha": "986ad1338d0634b347cf39619964ceb4d4850713", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg2YWQxMzM4ZDA2MzRiMzQ3Y2YzOTYxOTk2NGNlYjRkNDg1MDcxMw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-11-19T13:23:23Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-11-19T13:23:23Z"}, "message": "tree.c (need_assembler_name_p): Use cgraph_get_node instead of cgraph_node_for_decl.\n\n\t* tree.c (need_assembler_name_p): Use cgraph_get_node instead\n\tof cgraph_node_for_decl.\n\t* cgraph.h (cgraph_node_for_decl): Remove prototype.\n\t* cgraph.c (cgraph_node_for_decl): Remove.\n\t(cgraph_get_node): Just return NULL if !cgraph_hash.\n\nFrom-SVN: r154329", "tree": {"sha": "64d2caf2fc302726b3cf6921212ed6a3ca42d7d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64d2caf2fc302726b3cf6921212ed6a3ca42d7d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/986ad1338d0634b347cf39619964ceb4d4850713", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/986ad1338d0634b347cf39619964ceb4d4850713", "html_url": "https://github.com/Rust-GCC/gccrs/commit/986ad1338d0634b347cf39619964ceb4d4850713", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/986ad1338d0634b347cf39619964ceb4d4850713/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1abed66bb0ea21342637f1fabb382d80daae8287", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1abed66bb0ea21342637f1fabb382d80daae8287", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1abed66bb0ea21342637f1fabb382d80daae8287"}], "stats": {"total": 43, "additions": 10, "deletions": 33}, "files": [{"sha": "dec2c346e236463334470447354fe7b57972036d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=986ad1338d0634b347cf39619964ceb4d4850713", "patch": "@@ -1,3 +1,11 @@\n+2009-11-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* tree.c (need_assembler_name_p): Use cgraph_get_node instead\n+\tof cgraph_node_for_decl.\n+\t* cgraph.h (cgraph_node_for_decl): Remove prototype.\n+\t* cgraph.c (cgraph_node_for_decl): Remove.\n+\t(cgraph_get_node): Just return NULL if !cgraph_hash.\n+\n 2009-11-19  Paul Brook  <paul@codesourcery.com>\n \n \t* config.gcc: Add new ARM --with-fpu options."}, {"sha": "3e5b8466d8c178ba954fc3a6240a5b2b9ba6fe06", "filename": "gcc/cgraph.c", "status": "modified", "additions": 1, "deletions": 31, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=986ad1338d0634b347cf39619964ceb4d4850713", "patch": "@@ -406,36 +406,6 @@ hash_node (const void *p)\n }\n \n \n-/* Return the cgraph node associated with function DECL.  If none\n-   exists, return NULL.  */\n-\n-struct cgraph_node *\n-cgraph_node_for_decl (tree decl)\n-{\n-  struct cgraph_node *node;\n-  void **slot;\n-\n-  gcc_assert (TREE_CODE (decl) == FUNCTION_DECL);\n-\n-  node = NULL;\n-  if (cgraph_hash)\n-    {\n-      struct cgraph_node key;\n-\n-      key.decl = decl;\n-      slot = htab_find_slot (cgraph_hash, &key, NO_INSERT);\n-      if (slot && *slot)\n-\t{\n-\t  node = (struct cgraph_node *) *slot;\n-\t  if (node->same_body_alias)\n-\t    node = node->same_body;\n-\t}\n-    }\n-\n-  return node;\n-}\n-\n-\n /* Returns nonzero if P1 and P2 are equal.  */\n \n static int\n@@ -594,7 +564,7 @@ cgraph_get_node (tree decl)\n   gcc_assert (TREE_CODE (decl) == FUNCTION_DECL);\n \n   if (!cgraph_hash)\n-    cgraph_hash = htab_create_ggc (10, hash_node, eq_node, NULL);\n+    return NULL;\n \n   key.decl = decl;\n "}, {"sha": "e09a858bdac30e1ece9abf6902fb91b93c582771", "filename": "gcc/cgraph.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=986ad1338d0634b347cf39619964ceb4d4850713", "patch": "@@ -425,7 +425,6 @@ struct cgraph_node *cgraph_node (tree);\n bool cgraph_same_body_alias (tree, tree);\n void cgraph_remove_same_body_alias (struct cgraph_node *);\n struct cgraph_node *cgraph_node_for_asm (tree);\n-struct cgraph_node *cgraph_node_for_decl (tree);\n struct cgraph_edge *cgraph_edge (struct cgraph_node *, gimple);\n void cgraph_set_call_stmt (struct cgraph_edge *, gimple);\n void cgraph_set_call_stmt_including_clones (struct cgraph_node *, gimple, gimple);"}, {"sha": "df24eb4ad593c9155bfb783e165b619272b0375d", "filename": "gcc/tree.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/986ad1338d0634b347cf39619964ceb4d4850713/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=986ad1338d0634b347cf39619964ceb4d4850713", "patch": "@@ -4289,7 +4289,7 @@ need_assembler_name_p (tree decl)\n \treturn false;\n \n       /* Functions represented in the callgraph need an assembler name.  */\n-      if (cgraph_node_for_decl (decl) != NULL)\n+      if (cgraph_get_node (decl) != NULL)\n \treturn true;\n \n       /* Unused and not public functions don't need an assembler name.  */"}]}