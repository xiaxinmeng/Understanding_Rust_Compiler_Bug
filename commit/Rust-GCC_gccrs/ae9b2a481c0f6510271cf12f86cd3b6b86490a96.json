{"sha": "ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWU5YjJhNDgxYzBmNjUxMDI3MWNmMTJmODZjZDNiNmI4NjQ5MGE5Ng==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2009-03-08T17:29:12Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2009-03-08T17:29:12Z"}, "message": "re PR c++/39060 (ICE with lots of invalid member functions)\n\ngcc/cp/\n\n2009-03-08  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR c++/39060\n\t* parser.c (cp_parser_late_parsing_default_args): Continue\n\tthe loop when cp_parser_assignment_expression returns\n\terror_mark_node.\n\ngcc/testsuite/\n\n2009-03-08  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR c++/39060\n\t* g++.dg/other/new1.C: Adjusted.\n\t* g++.dg/parse/crash40.C: Likewise.\n\t* g++.dg/parse/defarg12.C: Likewise.\n\t* g++.dg/template/error15.C: Likewise.\n\n\t* g++.dg/other/pr39060.C: New.\n\nFrom-SVN: r144710", "tree": {"sha": "5629a4fada17111aca9ed99113dd06ed98c105e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5629a4fada17111aca9ed99113dd06ed98c105e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "975a4fd69f8d84b2414445745195d0b6ced3a39c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/975a4fd69f8d84b2414445745195d0b6ced3a39c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/975a4fd69f8d84b2414445745195d0b6ced3a39c"}], "stats": {"total": 49, "additions": 45, "deletions": 4}, "files": [{"sha": "c4b151b79a8f7c1b0715e72480c4efca273b601e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -1,3 +1,10 @@\n+2009-03-08  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR c++/39060\n+\t* parser.c (cp_parser_late_parsing_default_args): Continue\n+\tthe loop when cp_parser_assignment_expression returns\n+\terror_mark_node.\n+\n 2009-03-07  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/39367"}, {"sha": "4c6fd4a78c5969937ddfa8f953367c76a3d7439b", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -18291,6 +18291,11 @@ cp_parser_late_parsing_default_args (cp_parser *parser, tree fn)\n \n       /* Parse the assignment-expression.  */\n       parsed_arg = cp_parser_assignment_expression (parser, /*cast_p=*/false, NULL);\n+      if (parsed_arg == error_mark_node)\n+\t{\n+\t  cp_parser_pop_lexer (parser);\n+\t  continue;\n+\t}\n \n       if (!processing_template_decl)\n \tparsed_arg = check_default_argument (TREE_VALUE (parm), parsed_arg);"}, {"sha": "3d44d641c2476d85644a68615987c5e5dc6696a0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -1,3 +1,13 @@\n+2009-03-08  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR c++/39060\n+\t* g++.dg/other/new1.C: Adjusted.\n+\t* g++.dg/parse/crash40.C: Likewise.\n+\t* g++.dg/parse/defarg12.C: Likewise.\n+\t* g++.dg/template/error15.C: Likewise.\n+\n+\t* g++.dg/other/pr39060.C: New.\n+\n 2009-03-07  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/39367"}, {"sha": "71383706ea4efc662ed34ac8f5bce3e15676b3b6", "filename": "gcc/testsuite/g++.dg/other/new1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fnew1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fnew1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fnew1.C?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -10,5 +10,5 @@ struct A\n \n void foo()\n {\n-  new A;\n+  new A;\t// { dg-error \"default argument\" }\n }"}, {"sha": "a625aea108e4f603d9794bac7bc401786689a0e8", "filename": "gcc/testsuite/g++.dg/other/pr39060.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr39060.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr39060.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr39060.C?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -0,0 +1,19 @@\n+// PR c++/39060\n+// { dg-do compile }\n+\n+struct A\n+{\n+  A(void* i=);\t// { dg-error \"with|specification\" }\n+  A(void* i=);\t// { dg-error \"overloaded\" }\n+  A(void* i=);\t// { dg-error \"overloaded\" }\n+\n+  void operator+ (void* i=);\t// { dg-error \"arguments\" }\n+\n+  virtual void foo1(=);\t// { dg-error \"identifier\" }\n+  void foo2(=);\t\t// { dg-error \"identifier\" }\n+  void foo3(=);\t\t// { dg-error \"identifier\" }\n+  void foo4(=);\t\t// { dg-error \"identifier\" }\n+  void foo5(=);\t\t// { dg-error \"identifier\" }\n+};\t// { dg-error \"primary-expression\" }\n+\n+A::A (void* i=) {}\t// { dg-error \"primary-expression|argument\" }"}, {"sha": "6a15228c0632c5e4767a169758bea0a5c1486825", "filename": "gcc/testsuite/g++.dg/parse/crash40.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash40.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash40.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash40.C?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -37,6 +37,6 @@ void bar()\n   int i;\n   i.C::foo<0>(); /* { dg-error \"which is of non-class type\" } */\n \n-  S<false> s;\n+  S<false> s; /* { dg-error \"default argument\" } */\n   SS<false> ss; /* { dg-error \"within this context\" } */\n }"}, {"sha": "80ef5c38e1fc3d4448a39180c66c78dc53650aac", "filename": "gcc/testsuite/g++.dg/parse/defarg12.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdefarg12.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdefarg12.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fdefarg12.C?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -9,5 +9,5 @@ struct A\n \n void foo()\n {\n-  A().i;\n+  A().i; /* { dg-error \"default argument\" } */\n }"}, {"sha": "b7c7bc8ca47da71d7c2641b59c6ab126d0218b26", "filename": "gcc/testsuite/g++.dg/template/error15.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror15.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae9b2a481c0f6510271cf12f86cd3b6b86490a96/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror15.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror15.C?ref=ae9b2a481c0f6510271cf12f86cd3b6b86490a96", "patch": "@@ -18,7 +18,7 @@ protected:\n \n template <class T>\n void B<T>::g(void) {\n-  f();\n+  f(); // { dg-error \"default argument\" }\n }\n \n template class B<long>;"}]}