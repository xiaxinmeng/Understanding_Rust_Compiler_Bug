{"sha": "c9b93377e33eae49365491dbee843aa7880f218e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzliOTMzNzdlMzNlYWU0OTM2NTQ5MWRiZWU4NDNhYTc4ODBmMjE4ZQ==", "commit": {"author": {"name": "Joe Buck", "email": "jbuck@welsh-buck.org", "date": "2004-04-27T05:41:45Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2004-04-27T05:41:45Z"}, "message": "Bug 15093\n\nBug 15093\n* configure.ac: Test for existence of mmap and sys/mman.h before\nchecking blacklist.  Fix suggested by Jim Wilson.\n* configure: Regenerate.\n\nFrom-SVN: r81212", "tree": {"sha": "d028a102af956e1780145edfb983945c6e2a248a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d028a102af956e1780145edfb983945c6e2a248a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9b93377e33eae49365491dbee843aa7880f218e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9b93377e33eae49365491dbee843aa7880f218e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9b93377e33eae49365491dbee843aa7880f218e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9b93377e33eae49365491dbee843aa7880f218e/comments", "author": null, "committer": null, "parents": [{"sha": "6d7870d1a91115b06663948165534b7e3b5818ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d7870d1a91115b06663948165534b7e3b5818ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d7870d1a91115b06663948165534b7e3b5818ca"}], "stats": {"total": 1614, "additions": 1084, "deletions": 530}, "files": [{"sha": "47ddae9a98cdac33674fbd464d65a80c1218c06a", "filename": "libffi/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9b93377e33eae49365491dbee843aa7880f218e/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9b93377e33eae49365491dbee843aa7880f218e/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=c9b93377e33eae49365491dbee843aa7880f218e", "patch": "@@ -1,3 +1,10 @@\n+2004-04-26  Joe Buck <jbuck@welsh-buck.org>\n+\n+\tBug 15093\n+\t* configure.ac: Test for existence of mmap and sys/mman.h before\n+\tchecking blacklist.  Fix suggested by Jim Wilson.\n+\t* configure: Regenerate.\n+\n 2004-04-26  Matt Austern  <austern@apple.com>\n \n \t* src/powerpc/darwin.S: Go through a non-lazy pointer for initial"}, {"sha": "9a76fd1d79b1d2448adc960326c90b21aae86d29", "filename": "libffi/configure", "status": "modified", "additions": 1075, "deletions": 530, "changes": 1605, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9b93377e33eae49365491dbee843aa7880f218e/libffi%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9b93377e33eae49365491dbee843aa7880f218e/libffi%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fconfigure?ref=c9b93377e33eae49365491dbee843aa7880f218e", "patch": "@@ -273,7 +273,44 @@ PACKAGE_VERSION='2.1'\n PACKAGE_STRING='libffi 2.1'\n PACKAGE_BUGREPORT='http://gcc.gnu.org/bugs.html'\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS multi_basedir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO AMTAR install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM AWK SET_MAKE am__leading_dot CC ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CFLAGS CCAS CCASFLAGS LN_S RANLIB ac_ct_RANLIB LIBTOOL MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT TESTSUBDIR_TRUE TESTSUBDIR_FALSE AM_RUNTESTFLAGS MIPS_IRIX_TRUE MIPS_IRIX_FALSE MIPS_LINUX_TRUE MIPS_LINUX_FALSE SPARC_TRUE SPARC_FALSE X86_TRUE X86_FALSE X86_WIN32_TRUE X86_WIN32_FALSE ALPHA_TRUE ALPHA_FALSE IA64_TRUE IA64_FALSE M68K_TRUE M68K_FALSE POWERPC_TRUE POWERPC_FALSE POWERPC_AIX_TRUE POWERPC_AIX_FALSE POWERPC_DARWIN_TRUE POWERPC_DARWIN_FALSE ARM_TRUE ARM_FALSE S390_TRUE S390_FALSE X86_64_TRUE X86_64_FALSE SH_TRUE SH_FALSE SH64_TRUE SH64_FALSE PA_TRUE PA_FALSE CPP CPPFLAGS EGREP ALLOCA HAVE_LONG_DOUBLE TARGET TARGETDIR toolexecdir toolexeclibdir tool_include_dir gcc_version LIBOBJS LTLIBOBJS'\n+# Factoring default headers for most tests.\n+ac_includes_default=\"\\\n+#include <stdio.h>\n+#if HAVE_SYS_TYPES_H\n+# include <sys/types.h>\n+#endif\n+#if HAVE_SYS_STAT_H\n+# include <sys/stat.h>\n+#endif\n+#if STDC_HEADERS\n+# include <stdlib.h>\n+# include <stddef.h>\n+#else\n+# if HAVE_STDLIB_H\n+#  include <stdlib.h>\n+# endif\n+#endif\n+#if HAVE_STRING_H\n+# if !STDC_HEADERS && HAVE_MEMORY_H\n+#  include <memory.h>\n+# endif\n+# include <string.h>\n+#endif\n+#if HAVE_STRINGS_H\n+# include <strings.h>\n+#endif\n+#if HAVE_INTTYPES_H\n+# include <inttypes.h>\n+#else\n+# if HAVE_STDINT_H\n+#  include <stdint.h>\n+# endif\n+#endif\n+#if HAVE_UNISTD_H\n+# include <unistd.h>\n+#endif\"\n+\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS multi_basedir build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO AMTAR install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM AWK SET_MAKE am__leading_dot CC ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CFLAGS CCAS CCASFLAGS LN_S RANLIB ac_ct_RANLIB LIBTOOL MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT CPP CPPFLAGS EGREP TESTSUBDIR_TRUE TESTSUBDIR_FALSE AM_RUNTESTFLAGS MIPS_IRIX_TRUE MIPS_IRIX_FALSE MIPS_LINUX_TRUE MIPS_LINUX_FALSE SPARC_TRUE SPARC_FALSE X86_TRUE X86_FALSE X86_WIN32_TRUE X86_WIN32_FALSE ALPHA_TRUE ALPHA_FALSE IA64_TRUE IA64_FALSE M68K_TRUE M68K_FALSE POWERPC_TRUE POWERPC_FALSE POWERPC_AIX_TRUE POWERPC_AIX_FALSE POWERPC_DARWIN_TRUE POWERPC_DARWIN_FALSE ARM_TRUE ARM_FALSE S390_TRUE S390_FALSE X86_64_TRUE X86_64_FALSE SH_TRUE SH_FALSE SH64_TRUE SH64_FALSE PA_TRUE PA_FALSE ALLOCA HAVE_LONG_DOUBLE TARGET TARGETDIR toolexecdir toolexeclibdir tool_include_dir gcc_version LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n \n # Initialize some variables set by options.\n@@ -925,7 +962,7 @@ esac\n     else\n       echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2\n     fi\n-    cd \"$ac_popdir\"\n+    cd $ac_popdir\n   done\n fi\n \n@@ -2409,7 +2446,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2467,7 +2505,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2583,7 +2622,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2637,7 +2677,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2682,7 +2723,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2726,7 +2768,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3788,7 +3831,7 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 3791 \"configure\"' > conftest.$ac_ext\n+  echo '#line 3834 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -3930,7 +3973,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4099,414 +4143,132 @@ fi\n \n \n \n-if test $ac_cv_header_sys_mman_h != yes \\\n- || test $ac_cv_func_mmap != yes; then\n-   ac_cv_func_mmap_file=no\n-   ac_cv_func_mmap_dev_zero=no\n-   ac_cv_func_mmap_anon=no\n-else\n-   echo \"$as_me:$LINENO: checking whether read-only mmap of a plain file works\" >&5\n-echo $ECHO_N \"checking whether read-only mmap of a plain file works... $ECHO_C\" >&6\n-if test \"${ac_cv_func_mmap_file+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  # Add a system to this blacklist if\n-   # mmap(0, stat_size, PROT_READ, MAP_PRIVATE, fd, 0) doesn't return a\n-   # memory area containing the same data that you'd get if you applied\n-   # read() to the same fd.  The only system known to have a problem here\n-   # is VMS, where text files have record structure.\n-   case \"$host_os\" in\n-     vms* | ultrix*)\n-\tac_cv_func_mmap_file=no ;;\n-     *)\n-\tac_cv_func_mmap_file=yes;;\n-   esac\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_func_mmap_file\" >&5\n-echo \"${ECHO_T}$ac_cv_func_mmap_file\" >&6\n-   echo \"$as_me:$LINENO: checking whether mmap from /dev/zero works\" >&5\n-echo $ECHO_N \"checking whether mmap from /dev/zero works... $ECHO_C\" >&6\n-if test \"${ac_cv_func_mmap_dev_zero+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  # Add a system to this blacklist if it has mmap() but /dev/zero\n-   # does not exist, or if mmapping /dev/zero does not give anonymous\n-   # zeroed pages with both the following properties:\n-   # 1. If you map N consecutive pages in with one call, and then\n-   #    unmap any subset of those pages, the pages that were not\n-   #    explicitly unmapped remain accessible.\n-   # 2. If you map two adjacent blocks of memory and then unmap them\n-   #    both at once, they must both go away.\n-   # Systems known to be in this category are Windows (all variants),\n-   # VMS, and Darwin.\n-   case \"$host_os\" in\n-     vms* | cygwin* | pe | mingw* | darwin* | ultrix* | hpux10* | hpux11.00)\n-\tac_cv_func_mmap_dev_zero=no ;;\n-     *)\n-\tac_cv_func_mmap_dev_zero=yes;;\n-   esac\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+echo \"$as_me:$LINENO: checking how to run the C preprocessor\" >&5\n+echo $ECHO_N \"checking how to run the C preprocessor... $ECHO_C\" >&6\n+# On Suns, sometimes $CPP names a directory.\n+if test -n \"$CPP\" && test -d \"$CPP\"; then\n+  CPP=\n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_func_mmap_dev_zero\" >&5\n-echo \"${ECHO_T}$ac_cv_func_mmap_dev_zero\" >&6\n-\n-   # Unlike /dev/zero, the MAP_ANON(YMOUS) defines can be probed for.\n-   echo \"$as_me:$LINENO: checking for MAP_ANON(YMOUS)\" >&5\n-echo $ECHO_N \"checking for MAP_ANON(YMOUS)... $ECHO_C\" >&6\n-if test \"${ac_cv_decl_map_anon+set}\" = set; then\n+if test -z \"$CPP\"; then\n+  if test \"${ac_cv_prog_CPP+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n else\n+      # Double quotes because CPP needs to be expanded\n+    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n+    do\n+      ac_preproc_ok=false\n+for ac_c_preproc_warn_flag in '' yes\n+do\n+  # Use a header file that comes with gcc, so configuring glibc\n+  # with a fresh cross-compiler works.\n+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+  # <limits.h> exists even on freestanding compilers.\n+  # On the NeXT, cc -E runs the code through the compiler's parser,\n+  # not just through cpp. \"Syntax error\" is here to catch this case.\n   cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-#include <sys/types.h>\n-#include <sys/mman.h>\n-#include <unistd.h>\n-\n-#ifndef MAP_ANONYMOUS\n-#define MAP_ANONYMOUS MAP_ANON\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n #endif\n-\n-int\n-main ()\n-{\n-int n = MAP_ANONYMOUS;\n-  ;\n-  return 0;\n-}\n+\t\t     Syntax error\n _ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n   ac_status=$?\n   grep -v '^ *+' conftest.er1 >conftest.err\n   rm -f conftest.er1\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_cv_decl_map_anon=yes\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  :\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-ac_cv_decl_map_anon=no\n-fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+  # Broken: fails on valid input.\n+continue\n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_decl_map_anon\" >&5\n-echo \"${ECHO_T}$ac_cv_decl_map_anon\" >&6\n+rm -f conftest.err conftest.$ac_ext\n \n-   if test $ac_cv_decl_map_anon = no; then\n-     ac_cv_func_mmap_anon=no\n-   else\n-     echo \"$as_me:$LINENO: checking whether mmap with MAP_ANON(YMOUS) works\" >&5\n-echo $ECHO_N \"checking whether mmap with MAP_ANON(YMOUS) works... $ECHO_C\" >&6\n-if test \"${ac_cv_func_mmap_anon+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+  # OK, works on sane cases.  Now check whether non-existent headers\n+  # can be detected and how.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <ac_nonexistent.h>\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n else\n-  # Add a system to this blacklist if it has mmap() and MAP_ANON or\n-   # MAP_ANONYMOUS, but using mmap(..., MAP_PRIVATE|MAP_ANONYMOUS, -1, 0)\n-   # doesn't give anonymous zeroed pages with the same properties listed\n-   # above for use of /dev/zero.\n-   # Systems known to be in this category are Windows, VMS, and SCO Unix.\n-   case \"$host_os\" in\n-     vms* | cygwin* | pe | mingw* | sco* | udk* )\n-\tac_cv_func_mmap_anon=no ;;\n-     *)\n-\tac_cv_func_mmap_anon=yes;;\n-   esac\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_func_mmap_anon\" >&5\n-echo \"${ECHO_T}$ac_cv_func_mmap_anon\" >&6\n-   fi\n+  ac_cpp_err=yes\n fi\n+if test -z \"$ac_cpp_err\"; then\n+  # Broken: success on invalid input.\n+continue\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n \n-if test $ac_cv_func_mmap_file = yes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define HAVE_MMAP_FILE 1\n-_ACEOF\n-\n+  # Passes both tests.\n+ac_preproc_ok=:\n+break\n fi\n-if test $ac_cv_func_mmap_dev_zero = yes; then\n-\n-cat >>confdefs.h <<\\_ACEOF\n-#define HAVE_MMAP_DEV_ZERO 1\n-_ACEOF\n+rm -f conftest.err conftest.$ac_ext\n \n+done\n+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n+rm -f conftest.err conftest.$ac_ext\n+if $ac_preproc_ok; then\n+  break\n fi\n-if test $ac_cv_func_mmap_anon = yes; then\n \n-cat >>confdefs.h <<\\_ACEOF\n-#define HAVE_MMAP_ANON 1\n-_ACEOF\n+    done\n+    ac_cv_prog_CPP=$CPP\n \n fi\n-\n-\n-\n-\n-if test -d $srcdir/testsuite; then\n-  TESTSUBDIR_TRUE=\n-  TESTSUBDIR_FALSE='#'\n+  CPP=$ac_cv_prog_CPP\n else\n-  TESTSUBDIR_TRUE='#'\n-  TESTSUBDIR_FALSE=\n+  ac_cv_prog_CPP=$CPP\n fi\n-\n-\n-TARGETDIR=\"unknown\"\n-case \"$host\" in\n-i*86-*-linux*) TARGET=X86; TARGETDIR=x86;;\n-i*86-*-solaris*) TARGET=X86; TARGETDIR=x86;;\n-i*86-*-beos*) TARGET=X86; TARGETDIR=x86;;\n-i*86-*-freebsd*) TARGET=X86; TARGETDIR=x86;;\n-i*86-*-netbsdelf*) TARGET=X86; TARGETDIR=x86;;\n-i*86-*-win32*) TARGET=X86_WIN32; TARGETDIR=x86;;\n-i*86-*-cygwin*) TARGET=X86_WIN32; TARGETDIR=x86;;\n-i*86-*-mingw*) TARGET=X86_WIN32; TARGETDIR=x86;;\n-sparc-sun-4*) TARGET=SPARC; TARGETDIR=sparc;;\n-sparc*-sun-*) TARGET=SPARC; TARGETDIR=sparc;;\n-sparc-*-linux* | sparc-*-netbsdelf*) TARGET=SPARC; TARGETDIR=sparc;;\n-sparc64-*-linux* | sparc64-*-netbsd*) TARGET=SPARC; TARGETDIR=sparc;;\n-alpha*-*-linux* | alpha*-*-osf* | alpha*-*-freebsd* | alpha*-*-netbsd*) TARGET=ALPHA; TARGETDIR=alpha;;\n-ia64*-*-*) TARGET=IA64; TARGETDIR=ia64;;\n-m68k-*-linux*) TARGET=M68K; TARGETDIR=m68k;;\n-mips64*-*);;\n-mips-sgi-irix5.* | mips-sgi-irix6.*) TARGET=MIPS_IRIX; TARGETDIR=mips;;\n-mips*-*-linux*) TARGET=MIPS_LINUX; TARGETDIR=mips;;\n-powerpc*-*-linux* | powerpc-*-sysv*) TARGET=POWERPC; TARGETDIR=powerpc;;\n-powerpc-*-beos*) TARGET=POWERPC; TARGETDIR=powerpc;;\n-powerpc-*-darwin*) TARGET=POWERPC_DARWIN; TARGETDIR=powerpc;;\n-powerpc-*-aix*) TARGET=POWERPC_AIX; TARGETDIR=powerpc;;\n-rs6000-*-aix*) TARGET=POWERPC_AIX; TARGETDIR=powerpc;;\n-arm*-*-linux-*) TARGET=ARM; TARGETDIR=arm;;\n-arm*-*-netbsdelf*) TARGET=ARM; TARGETDIR=arm;;\n-s390-*-linux-*) TARGET=S390; TARGETDIR=s390;;\n-s390x-*-linux-*) TARGET=S390; TARGETDIR=s390;;\n-x86_64-*-linux*) TARGET=X86_64; TARGETDIR=x86;;\n-sh-*-linux* | sh[34]*-*-linux*) TARGET=SH; TARGETDIR=sh;;\n-sh64-*-linux* | sh5*-*-linux*) TARGET=SH64; TARGETDIR=sh64;;\n-hppa-*-linux* | parisc-*-linux*) TARGET=PA; TARGETDIR=pa;;\n-esac\n-\n-\n-\n-if test $TARGETDIR = unknown; then\n-  { { echo \"$as_me:$LINENO: error: \\\"libffi has not been ported to $host.\\\"\" >&5\n-echo \"$as_me: error: \\\"libffi has not been ported to $host.\\\"\" >&2;}\n-   { (exit 1); exit 1; }; }\n-fi\n-\n-\n-\n-if test x$TARGET = xMIPS_IRIX; then\n-  MIPS_IRIX_TRUE=\n-  MIPS_IRIX_FALSE='#'\n-else\n-  MIPS_IRIX_TRUE='#'\n-  MIPS_IRIX_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xMIPS_LINUX; then\n-  MIPS_LINUX_TRUE=\n-  MIPS_LINUX_FALSE='#'\n-else\n-  MIPS_LINUX_TRUE='#'\n-  MIPS_LINUX_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xSPARC; then\n-  SPARC_TRUE=\n-  SPARC_FALSE='#'\n-else\n-  SPARC_TRUE='#'\n-  SPARC_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xX86; then\n-  X86_TRUE=\n-  X86_FALSE='#'\n-else\n-  X86_TRUE='#'\n-  X86_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xX86_WIN32; then\n-  X86_WIN32_TRUE=\n-  X86_WIN32_FALSE='#'\n-else\n-  X86_WIN32_TRUE='#'\n-  X86_WIN32_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xALPHA; then\n-  ALPHA_TRUE=\n-  ALPHA_FALSE='#'\n-else\n-  ALPHA_TRUE='#'\n-  ALPHA_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xIA64; then\n-  IA64_TRUE=\n-  IA64_FALSE='#'\n-else\n-  IA64_TRUE='#'\n-  IA64_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xM68K; then\n-  M68K_TRUE=\n-  M68K_FALSE='#'\n-else\n-  M68K_TRUE='#'\n-  M68K_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xPOWERPC; then\n-  POWERPC_TRUE=\n-  POWERPC_FALSE='#'\n-else\n-  POWERPC_TRUE='#'\n-  POWERPC_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xPOWERPC_AIX; then\n-  POWERPC_AIX_TRUE=\n-  POWERPC_AIX_FALSE='#'\n-else\n-  POWERPC_AIX_TRUE='#'\n-  POWERPC_AIX_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xPOWERPC_DARWIN; then\n-  POWERPC_DARWIN_TRUE=\n-  POWERPC_DARWIN_FALSE='#'\n-else\n-  POWERPC_DARWIN_TRUE='#'\n-  POWERPC_DARWIN_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xARM; then\n-  ARM_TRUE=\n-  ARM_FALSE='#'\n-else\n-  ARM_TRUE='#'\n-  ARM_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xS390; then\n-  S390_TRUE=\n-  S390_FALSE='#'\n-else\n-  S390_TRUE='#'\n-  S390_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xX86_64; then\n-  X86_64_TRUE=\n-  X86_64_FALSE='#'\n-else\n-  X86_64_TRUE='#'\n-  X86_64_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xSH; then\n-  SH_TRUE=\n-  SH_FALSE='#'\n-else\n-  SH_TRUE='#'\n-  SH_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xSH64; then\n-  SH64_TRUE=\n-  SH64_FALSE='#'\n-else\n-  SH64_TRUE='#'\n-  SH64_FALSE=\n-fi\n-\n-\n-\n-if test x$TARGET = xPA; then\n-  PA_TRUE=\n-  PA_FALSE='#'\n-else\n-  PA_TRUE='#'\n-  PA_FALSE=\n-fi\n-\n-\n-case x$TARGET in\n-  xMIPS*) TARGET=MIPS ;;\n-  *) ;;\n-esac\n-\n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-echo \"$as_me:$LINENO: checking how to run the C preprocessor\" >&5\n-echo $ECHO_N \"checking how to run the C preprocessor... $ECHO_C\" >&6\n-# On Suns, sometimes $CPP names a directory.\n-if test -n \"$CPP\" && test -d \"$CPP\"; then\n-  CPP=\n-fi\n-if test -z \"$CPP\"; then\n-  if test \"${ac_cv_prog_CPP+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-      # Double quotes because CPP needs to be expanded\n-    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n-    do\n-      ac_preproc_ok=false\n+echo \"$as_me:$LINENO: result: $CPP\" >&5\n+echo \"${ECHO_T}$CPP\" >&6\n+ac_preproc_ok=false\n for ac_c_preproc_warn_flag in '' yes\n do\n   # Use a header file that comes with gcc, so configuring glibc\n@@ -4581,163 +4343,936 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n     ac_cpp_err=\n   fi\n else\n-  ac_cpp_err=yes\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  # Broken: success on invalid input.\n+continue\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  # Passes both tests.\n+ac_preproc_ok=:\n+break\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+\n+done\n+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n+rm -f conftest.err conftest.$ac_ext\n+if $ac_preproc_ok; then\n+  :\n+else\n+  { { echo \"$as_me:$LINENO: error: C preprocessor \\\"$CPP\\\" fails sanity check\n+See \\`config.log' for more details.\" >&5\n+echo \"$as_me: error: C preprocessor \\\"$CPP\\\" fails sanity check\n+See \\`config.log' for more details.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n+\n+echo \"$as_me:$LINENO: checking for egrep\" >&5\n+echo $ECHO_N \"checking for egrep... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_egrep+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if echo a | (grep -E '(a|b)') >/dev/null 2>&1\n+    then ac_cv_prog_egrep='grep -E'\n+    else ac_cv_prog_egrep='egrep'\n+    fi\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_prog_egrep\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_egrep\" >&6\n+ EGREP=$ac_cv_prog_egrep\n+\n+\n+echo \"$as_me:$LINENO: checking for ANSI C header files\" >&5\n+echo $ECHO_N \"checking for ANSI C header files... $ECHO_C\" >&6\n+if test \"${ac_cv_header_stdc+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+#include <stdarg.h>\n+#include <string.h>\n+#include <float.h>\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_header_stdc=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_header_stdc=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <string.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"memchr\" >/dev/null 2>&1; then\n+  :\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"free\" >/dev/null 2>&1; then\n+  :\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.\n+  if test \"$cross_compiling\" = yes; then\n+  :\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <ctype.h>\n+#if ((' ' & 0x0FF) == 0x020)\n+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))\n+#else\n+# define ISLOWER(c) \\\n+\t\t   (('a' <= (c) && (c) <= 'i') \\\n+\t\t     || ('j' <= (c) && (c) <= 'r') \\\n+\t\t     || ('s' <= (c) && (c) <= 'z'))\n+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))\n+#endif\n+\n+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))\n+int\n+main ()\n+{\n+  int i;\n+  for (i = 0; i < 256; i++)\n+    if (XOR (islower (i), ISLOWER (i))\n+\t|| toupper (i) != TOUPPER (i))\n+      exit(2);\n+  exit (0);\n+}\n+_ACEOF\n+rm -f conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  :\n+else\n+  echo \"$as_me: program exited with status $ac_status\" >&5\n+echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+( exit $ac_status )\n+ac_cv_header_stdc=no\n+fi\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+fi\n+fi\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_header_stdc\" >&5\n+echo \"${ECHO_T}$ac_cv_header_stdc\" >&6\n+if test $ac_cv_header_stdc = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define STDC_HEADERS 1\n+_ACEOF\n+\n+fi\n+\n+# On IRIX 5.3, sys/types and inttypes.h are conflicting.\n+\n+\n+\n+\n+\n+\n+\n+\n+\n+for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \\\n+\t\t  inttypes.h stdint.h unistd.h\n+do\n+as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n+echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n+echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_includes_default\n+\n+#include <$ac_header>\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  eval \"$as_ac_Header=yes\"\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+eval \"$as_ac_Header=no\"\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n+if test `eval echo '${'$as_ac_Header'}'` = yes; then\n+  cat >>confdefs.h <<_ACEOF\n+#define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+\n+done\n+\n+\n+\n+for ac_header in sys/mman.h\n+do\n+as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n+if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n+  echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n+echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n+else\n+  # Is the header compilable?\n+echo \"$as_me:$LINENO: checking $ac_header usability\" >&5\n+echo $ECHO_N \"checking $ac_header usability... $ECHO_C\" >&6\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_includes_default\n+#include <$ac_header>\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_header_compiler=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_header_compiler=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n+echo \"${ECHO_T}$ac_header_compiler\" >&6\n+\n+# Is the header present?\n+echo \"$as_me:$LINENO: checking $ac_header presence\" >&5\n+echo $ECHO_N \"checking $ac_header presence... $ECHO_C\" >&6\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <$ac_header>\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  ac_header_preproc=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  ac_header_preproc=no\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n+echo \"${ECHO_T}$ac_header_preproc\" >&6\n+\n+# So?  What about this header?\n+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in\n+  yes:no: )\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&5\n+echo \"$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result\" >&5\n+echo \"$as_me: WARNING: $ac_header: proceeding with the compiler's result\" >&2;}\n+    ac_header_preproc=yes\n+    ;;\n+  no:yes:* )\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled\" >&5\n+echo \"$as_me: WARNING: $ac_header: present but cannot be compiled\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?\" >&5\n+echo \"$as_me: WARNING: $ac_header:     check for missing prerequisite headers?\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation\" >&5\n+echo \"$as_me: WARNING: $ac_header: see the Autoconf documentation\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header:     section \\\"Present But Cannot Be Compiled\\\"\" >&5\n+echo \"$as_me: WARNING: $ac_header:     section \\\"Present But Cannot Be Compiled\\\"\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result\" >&5\n+echo \"$as_me: WARNING: $ac_header: proceeding with the preprocessor's result\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence\" >&5\n+echo \"$as_me: WARNING: $ac_header: in the future, the compiler will take precedence\" >&2;}\n+    (\n+      cat <<\\_ASBOX\n+## ------------------------------------------- ##\n+## Report this to http://gcc.gnu.org/bugs.html ##\n+## ------------------------------------------- ##\n+_ASBOX\n+    ) |\n+      sed \"s/^/$as_me: WARNING:     /\" >&2\n+    ;;\n+esac\n+echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n+echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  eval \"$as_ac_Header=\\$ac_header_preproc\"\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n+\n+fi\n+if test `eval echo '${'$as_ac_Header'}'` = yes; then\n+  cat >>confdefs.h <<_ACEOF\n+#define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+\n+done\n+\n+\n+for ac_func in mmap\n+do\n+as_ac_var=`echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n+echo \"$as_me:$LINENO: checking for $ac_func\" >&5\n+echo $ECHO_N \"checking for $ac_func... $ECHO_C\" >&6\n+if eval \"test \\\"\\${$as_ac_var+set}\\\" = set\"; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.\n+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */\n+#define $ac_func innocuous_$ac_func\n+\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char $ac_func (); below.\n+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+    <limits.h> exists even on freestanding compilers.  */\n+\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\n+#undef $ac_func\n+\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+#ifdef __cplusplus\n+extern \"C\"\n+{\n+#endif\n+/* We use char because int might match the return type of a gcc2\n+   builtin and then its argument prototype would still apply.  */\n+char $ac_func ();\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)\n+choke me\n+#else\n+char (*f) () = $ac_func;\n+#endif\n+#ifdef __cplusplus\n+}\n+#endif\n+\n+int\n+main ()\n+{\n+return f != $ac_func;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  eval \"$as_ac_var=yes\"\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+eval \"$as_ac_var=no\"\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`\" >&5\n+echo \"${ECHO_T}`eval echo '${'$as_ac_var'}'`\" >&6\n+if test `eval echo '${'$as_ac_var'}'` = yes; then\n+  cat >>confdefs.h <<_ACEOF\n+#define `echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n+_ACEOF\n+\n+fi\n+done\n+\n+if test $ac_cv_header_sys_mman_h != yes \\\n+ || test $ac_cv_func_mmap != yes; then\n+   ac_cv_func_mmap_file=no\n+   ac_cv_func_mmap_dev_zero=no\n+   ac_cv_func_mmap_anon=no\n+else\n+   echo \"$as_me:$LINENO: checking whether read-only mmap of a plain file works\" >&5\n+echo $ECHO_N \"checking whether read-only mmap of a plain file works... $ECHO_C\" >&6\n+if test \"${ac_cv_func_mmap_file+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  # Add a system to this blacklist if\n+   # mmap(0, stat_size, PROT_READ, MAP_PRIVATE, fd, 0) doesn't return a\n+   # memory area containing the same data that you'd get if you applied\n+   # read() to the same fd.  The only system known to have a problem here\n+   # is VMS, where text files have record structure.\n+   case \"$host_os\" in\n+     vms* | ultrix*)\n+\tac_cv_func_mmap_file=no ;;\n+     *)\n+\tac_cv_func_mmap_file=yes;;\n+   esac\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_func_mmap_file\" >&5\n+echo \"${ECHO_T}$ac_cv_func_mmap_file\" >&6\n+   echo \"$as_me:$LINENO: checking whether mmap from /dev/zero works\" >&5\n+echo $ECHO_N \"checking whether mmap from /dev/zero works... $ECHO_C\" >&6\n+if test \"${ac_cv_func_mmap_dev_zero+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  # Add a system to this blacklist if it has mmap() but /dev/zero\n+   # does not exist, or if mmapping /dev/zero does not give anonymous\n+   # zeroed pages with both the following properties:\n+   # 1. If you map N consecutive pages in with one call, and then\n+   #    unmap any subset of those pages, the pages that were not\n+   #    explicitly unmapped remain accessible.\n+   # 2. If you map two adjacent blocks of memory and then unmap them\n+   #    both at once, they must both go away.\n+   # Systems known to be in this category are Windows (all variants),\n+   # VMS, and Darwin.\n+   case \"$host_os\" in\n+     vms* | cygwin* | pe | mingw* | darwin* | ultrix* | hpux10* | hpux11.00)\n+\tac_cv_func_mmap_dev_zero=no ;;\n+     *)\n+\tac_cv_func_mmap_dev_zero=yes;;\n+   esac\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_func_mmap_dev_zero\" >&5\n+echo \"${ECHO_T}$ac_cv_func_mmap_dev_zero\" >&6\n+\n+   # Unlike /dev/zero, the MAP_ANON(YMOUS) defines can be probed for.\n+   echo \"$as_me:$LINENO: checking for MAP_ANON(YMOUS)\" >&5\n+echo $ECHO_N \"checking for MAP_ANON(YMOUS)... $ECHO_C\" >&6\n+if test \"${ac_cv_decl_map_anon+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <sys/types.h>\n+#include <sys/mman.h>\n+#include <unistd.h>\n+\n+#ifndef MAP_ANONYMOUS\n+#define MAP_ANONYMOUS MAP_ANON\n+#endif\n+\n+int\n+main ()\n+{\n+int n = MAP_ANONYMOUS;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_decl_map_anon=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_decl_map_anon=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_decl_map_anon\" >&5\n+echo \"${ECHO_T}$ac_cv_decl_map_anon\" >&6\n+\n+   if test $ac_cv_decl_map_anon = no; then\n+     ac_cv_func_mmap_anon=no\n+   else\n+     echo \"$as_me:$LINENO: checking whether mmap with MAP_ANON(YMOUS) works\" >&5\n+echo $ECHO_N \"checking whether mmap with MAP_ANON(YMOUS) works... $ECHO_C\" >&6\n+if test \"${ac_cv_func_mmap_anon+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  # Add a system to this blacklist if it has mmap() and MAP_ANON or\n+   # MAP_ANONYMOUS, but using mmap(..., MAP_PRIVATE|MAP_ANONYMOUS, -1, 0)\n+   # doesn't give anonymous zeroed pages with the same properties listed\n+   # above for use of /dev/zero.\n+   # Systems known to be in this category are Windows, VMS, and SCO Unix.\n+   case \"$host_os\" in\n+     vms* | cygwin* | pe | mingw* | sco* | udk* )\n+\tac_cv_func_mmap_anon=no ;;\n+     *)\n+\tac_cv_func_mmap_anon=yes;;\n+   esac\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_func_mmap_anon\" >&5\n+echo \"${ECHO_T}$ac_cv_func_mmap_anon\" >&6\n+   fi\n+fi\n+\n+if test $ac_cv_func_mmap_file = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_MMAP_FILE 1\n+_ACEOF\n+\n+fi\n+if test $ac_cv_func_mmap_dev_zero = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_MMAP_DEV_ZERO 1\n+_ACEOF\n+\n+fi\n+if test $ac_cv_func_mmap_anon = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_MMAP_ANON 1\n+_ACEOF\n+\n+fi\n+\n+\n+\n+\n+if test -d $srcdir/testsuite; then\n+  TESTSUBDIR_TRUE=\n+  TESTSUBDIR_FALSE='#'\n+else\n+  TESTSUBDIR_TRUE='#'\n+  TESTSUBDIR_FALSE=\n+fi\n+\n+\n+TARGETDIR=\"unknown\"\n+case \"$host\" in\n+i*86-*-linux*) TARGET=X86; TARGETDIR=x86;;\n+i*86-*-solaris*) TARGET=X86; TARGETDIR=x86;;\n+i*86-*-beos*) TARGET=X86; TARGETDIR=x86;;\n+i*86-*-freebsd*) TARGET=X86; TARGETDIR=x86;;\n+i*86-*-netbsdelf*) TARGET=X86; TARGETDIR=x86;;\n+i*86-*-win32*) TARGET=X86_WIN32; TARGETDIR=x86;;\n+i*86-*-cygwin*) TARGET=X86_WIN32; TARGETDIR=x86;;\n+i*86-*-mingw*) TARGET=X86_WIN32; TARGETDIR=x86;;\n+sparc-sun-4*) TARGET=SPARC; TARGETDIR=sparc;;\n+sparc*-sun-*) TARGET=SPARC; TARGETDIR=sparc;;\n+sparc-*-linux* | sparc-*-netbsdelf*) TARGET=SPARC; TARGETDIR=sparc;;\n+sparc64-*-linux* | sparc64-*-netbsd*) TARGET=SPARC; TARGETDIR=sparc;;\n+alpha*-*-linux* | alpha*-*-osf* | alpha*-*-freebsd* | alpha*-*-netbsd*) TARGET=ALPHA; TARGETDIR=alpha;;\n+ia64*-*-*) TARGET=IA64; TARGETDIR=ia64;;\n+m68k-*-linux*) TARGET=M68K; TARGETDIR=m68k;;\n+mips64*-*);;\n+mips-sgi-irix5.* | mips-sgi-irix6.*) TARGET=MIPS_IRIX; TARGETDIR=mips;;\n+mips*-*-linux*) TARGET=MIPS_LINUX; TARGETDIR=mips;;\n+powerpc*-*-linux* | powerpc-*-sysv*) TARGET=POWERPC; TARGETDIR=powerpc;;\n+powerpc-*-beos*) TARGET=POWERPC; TARGETDIR=powerpc;;\n+powerpc-*-darwin*) TARGET=POWERPC_DARWIN; TARGETDIR=powerpc;;\n+powerpc-*-aix*) TARGET=POWERPC_AIX; TARGETDIR=powerpc;;\n+rs6000-*-aix*) TARGET=POWERPC_AIX; TARGETDIR=powerpc;;\n+arm*-*-linux-*) TARGET=ARM; TARGETDIR=arm;;\n+arm*-*-netbsdelf*) TARGET=ARM; TARGETDIR=arm;;\n+s390-*-linux-*) TARGET=S390; TARGETDIR=s390;;\n+s390x-*-linux-*) TARGET=S390; TARGETDIR=s390;;\n+x86_64-*-linux*) TARGET=X86_64; TARGETDIR=x86;;\n+sh-*-linux* | sh[34]*-*-linux*) TARGET=SH; TARGETDIR=sh;;\n+sh64-*-linux* | sh5*-*-linux*) TARGET=SH64; TARGETDIR=sh64;;\n+hppa-*-linux* | parisc-*-linux*) TARGET=PA; TARGETDIR=pa;;\n+esac\n+\n+\n+\n+if test $TARGETDIR = unknown; then\n+  { { echo \"$as_me:$LINENO: error: \\\"libffi has not been ported to $host.\\\"\" >&5\n+echo \"$as_me: error: \\\"libffi has not been ported to $host.\\\"\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+\n+\n+\n+if test x$TARGET = xMIPS_IRIX; then\n+  MIPS_IRIX_TRUE=\n+  MIPS_IRIX_FALSE='#'\n+else\n+  MIPS_IRIX_TRUE='#'\n+  MIPS_IRIX_FALSE=\n+fi\n+\n+\n+\n+if test x$TARGET = xMIPS_LINUX; then\n+  MIPS_LINUX_TRUE=\n+  MIPS_LINUX_FALSE='#'\n+else\n+  MIPS_LINUX_TRUE='#'\n+  MIPS_LINUX_FALSE=\n+fi\n+\n+\n+\n+if test x$TARGET = xSPARC; then\n+  SPARC_TRUE=\n+  SPARC_FALSE='#'\n+else\n+  SPARC_TRUE='#'\n+  SPARC_FALSE=\n+fi\n+\n+\n+\n+if test x$TARGET = xX86; then\n+  X86_TRUE=\n+  X86_FALSE='#'\n+else\n+  X86_TRUE='#'\n+  X86_FALSE=\n fi\n-if test -z \"$ac_cpp_err\"; then\n-  # Broken: success on invalid input.\n-continue\n+\n+\n+\n+if test x$TARGET = xX86_WIN32; then\n+  X86_WIN32_TRUE=\n+  X86_WIN32_FALSE='#'\n else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n+  X86_WIN32_TRUE='#'\n+  X86_WIN32_FALSE=\n+fi\n \n-  # Passes both tests.\n-ac_preproc_ok=:\n-break\n+\n+\n+if test x$TARGET = xALPHA; then\n+  ALPHA_TRUE=\n+  ALPHA_FALSE='#'\n+else\n+  ALPHA_TRUE='#'\n+  ALPHA_FALSE=\n fi\n-rm -f conftest.err conftest.$ac_ext\n \n-done\n-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n-rm -f conftest.err conftest.$ac_ext\n-if $ac_preproc_ok; then\n-  break\n+\n+\n+if test x$TARGET = xIA64; then\n+  IA64_TRUE=\n+  IA64_FALSE='#'\n+else\n+  IA64_TRUE='#'\n+  IA64_FALSE=\n fi\n \n-    done\n-    ac_cv_prog_CPP=$CPP\n \n+\n+if test x$TARGET = xM68K; then\n+  M68K_TRUE=\n+  M68K_FALSE='#'\n+else\n+  M68K_TRUE='#'\n+  M68K_FALSE=\n fi\n-  CPP=$ac_cv_prog_CPP\n+\n+\n+\n+if test x$TARGET = xPOWERPC; then\n+  POWERPC_TRUE=\n+  POWERPC_FALSE='#'\n else\n-  ac_cv_prog_CPP=$CPP\n+  POWERPC_TRUE='#'\n+  POWERPC_FALSE=\n fi\n-echo \"$as_me:$LINENO: result: $CPP\" >&5\n-echo \"${ECHO_T}$CPP\" >&6\n-ac_preproc_ok=false\n-for ac_c_preproc_warn_flag in '' yes\n-do\n-  # Use a header file that comes with gcc, so configuring glibc\n-  # with a fresh cross-compiler works.\n-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n-  # <limits.h> exists even on freestanding compilers.\n-  # On the NeXT, cc -E runs the code through the compiler's parser,\n-  # not just through cpp. \"Syntax error\" is here to catch this case.\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#ifdef __STDC__\n-# include <limits.h>\n-#else\n-# include <assert.h>\n-#endif\n-\t\t     Syntax error\n-_ACEOF\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } >/dev/null; then\n-  if test -s conftest.err; then\n-    ac_cpp_err=$ac_c_preproc_warn_flag\n-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n-  else\n-    ac_cpp_err=\n-  fi\n+\n+\n+\n+if test x$TARGET = xPOWERPC_AIX; then\n+  POWERPC_AIX_TRUE=\n+  POWERPC_AIX_FALSE='#'\n else\n-  ac_cpp_err=yes\n+  POWERPC_AIX_TRUE='#'\n+  POWERPC_AIX_FALSE=\n fi\n-if test -z \"$ac_cpp_err\"; then\n-  :\n+\n+\n+\n+if test x$TARGET = xPOWERPC_DARWIN; then\n+  POWERPC_DARWIN_TRUE=\n+  POWERPC_DARWIN_FALSE='#'\n else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n+  POWERPC_DARWIN_TRUE='#'\n+  POWERPC_DARWIN_FALSE=\n+fi\n \n-  # Broken: fails on valid input.\n-continue\n+\n+\n+if test x$TARGET = xARM; then\n+  ARM_TRUE=\n+  ARM_FALSE='#'\n+else\n+  ARM_TRUE='#'\n+  ARM_FALSE=\n fi\n-rm -f conftest.err conftest.$ac_ext\n \n-  # OK, works on sane cases.  Now check whether non-existent headers\n-  # can be detected and how.\n-  cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-#include <ac_nonexistent.h>\n-_ACEOF\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } >/dev/null; then\n-  if test -s conftest.err; then\n-    ac_cpp_err=$ac_c_preproc_warn_flag\n-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n-  else\n-    ac_cpp_err=\n-  fi\n+\n+\n+if test x$TARGET = xS390; then\n+  S390_TRUE=\n+  S390_FALSE='#'\n else\n-  ac_cpp_err=yes\n+  S390_TRUE='#'\n+  S390_FALSE=\n fi\n-if test -z \"$ac_cpp_err\"; then\n-  # Broken: success on invalid input.\n-continue\n+\n+\n+\n+if test x$TARGET = xX86_64; then\n+  X86_64_TRUE=\n+  X86_64_FALSE='#'\n else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n+  X86_64_TRUE='#'\n+  X86_64_FALSE=\n+fi\n \n-  # Passes both tests.\n-ac_preproc_ok=:\n-break\n+\n+\n+if test x$TARGET = xSH; then\n+  SH_TRUE=\n+  SH_FALSE='#'\n+else\n+  SH_TRUE='#'\n+  SH_FALSE=\n fi\n-rm -f conftest.err conftest.$ac_ext\n \n-done\n-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n-rm -f conftest.err conftest.$ac_ext\n-if $ac_preproc_ok; then\n-  :\n+\n+\n+if test x$TARGET = xSH64; then\n+  SH64_TRUE=\n+  SH64_FALSE='#'\n else\n-  { { echo \"$as_me:$LINENO: error: C preprocessor \\\"$CPP\\\" fails sanity check\n-See \\`config.log' for more details.\" >&5\n-echo \"$as_me: error: C preprocessor \\\"$CPP\\\" fails sanity check\n-See \\`config.log' for more details.\" >&2;}\n-   { (exit 1); exit 1; }; }\n+  SH64_TRUE='#'\n+  SH64_FALSE=\n fi\n \n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n-echo \"$as_me:$LINENO: checking for egrep\" >&5\n-echo $ECHO_N \"checking for egrep... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_egrep+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+if test x$TARGET = xPA; then\n+  PA_TRUE=\n+  PA_FALSE='#'\n else\n-  if echo a | (grep -E '(a|b)') >/dev/null 2>&1\n-    then ac_cv_prog_egrep='grep -E'\n-    else ac_cv_prog_egrep='egrep'\n-    fi\n+  PA_TRUE='#'\n+  PA_FALSE=\n fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_egrep\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_egrep\" >&6\n- EGREP=$ac_cv_prog_egrep\n \n \n+case x$TARGET in\n+  xMIPS*) TARGET=MIPS ;;\n+  *) ;;\n+esac\n+\n echo \"$as_me:$LINENO: checking for ANSI C header files\" >&5\n echo $ECHO_N \"checking for ANSI C header files... $ECHO_C\" >&6\n if test \"${ac_cv_header_stdc+set}\" = set; then\n@@ -4771,7 +5306,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4972,7 +5508,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5035,7 +5572,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5116,7 +5654,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5257,7 +5796,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5394,7 +5934,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5464,7 +6005,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5551,7 +6093,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5592,7 +6135,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5760,7 +6304,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5826,7 +6371,8 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6842,6 +7388,9 @@ s,@LIBTOOL@,$LIBTOOL,;t t\n s,@MAINTAINER_MODE_TRUE@,$MAINTAINER_MODE_TRUE,;t t\n s,@MAINTAINER_MODE_FALSE@,$MAINTAINER_MODE_FALSE,;t t\n s,@MAINT@,$MAINT,;t t\n+s,@CPP@,$CPP,;t t\n+s,@CPPFLAGS@,$CPPFLAGS,;t t\n+s,@EGREP@,$EGREP,;t t\n s,@TESTSUBDIR_TRUE@,$TESTSUBDIR_TRUE,;t t\n s,@TESTSUBDIR_FALSE@,$TESTSUBDIR_FALSE,;t t\n s,@AM_RUNTESTFLAGS@,$AM_RUNTESTFLAGS,;t t\n@@ -6879,9 +7428,6 @@ s,@SH64_TRUE@,$SH64_TRUE,;t t\n s,@SH64_FALSE@,$SH64_FALSE,;t t\n s,@PA_TRUE@,$PA_TRUE,;t t\n s,@PA_FALSE@,$PA_FALSE,;t t\n-s,@CPP@,$CPP,;t t\n-s,@CPPFLAGS@,$CPPFLAGS,;t t\n-s,@EGREP@,$EGREP,;t t\n s,@ALLOCA@,$ALLOCA,;t t\n s,@HAVE_LONG_DOUBLE@,$HAVE_LONG_DOUBLE,;t t\n s,@TARGET@,$TARGET,;t t\n@@ -7058,6 +7604,11 @@ esac\n   *) ac_INSTALL=$ac_top_builddir$INSTALL ;;\n   esac\n \n+  if test x\"$ac_file\" != x-; then\n+    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n+echo \"$as_me: creating $ac_file\" >&6;}\n+    rm -f \"$ac_file\"\n+  fi\n   # Let's still pretend it is `configure' which instantiates (i.e., don't\n   # use $as_me), people would be surprised to read:\n   #    /* config.h.  Generated by config.status.  */\n@@ -7096,12 +7647,6 @@ echo \"$as_me: error: cannot find input file: $f\" >&2;}\n \t fi;;\n       esac\n     done` || { (exit 1); exit 1; }\n-\n-  if test x\"$ac_file\" != x-; then\n-    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n-echo \"$as_me: creating $ac_file\" >&6;}\n-    rm -f \"$ac_file\"\n-  fi\n _ACEOF\n cat >>$CONFIG_STATUS <<_ACEOF\n   sed \"$ac_vpsub"}, {"sha": "c6be71c733ad827874bb9c923f9a68bbfaecce11", "filename": "libffi/configure.ac", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9b93377e33eae49365491dbee843aa7880f218e/libffi%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9b93377e33eae49365491dbee843aa7880f218e/libffi%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fconfigure.ac?ref=c9b93377e33eae49365491dbee843aa7880f218e", "patch": "@@ -37,6 +37,8 @@ AC_PROG_LIBTOOL\n \n AM_MAINTAINER_MODE\n \n+AC_CHECK_HEADERS(sys/mman.h)\n+AC_CHECK_FUNCS(mmap)\n AC_FUNC_MMAP_BLACKLIST\n \n dnl The -no-testsuite modules omit the test subdir."}]}