{"sha": "b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjZhOWMzMGM4MGEwNzEzYjBiMjdmNDM0ZGZlMzRiMDU1MmZjNzM4NA==", "commit": {"author": {"name": "Andreas Schwab", "email": "schwab@suse.de", "date": "2007-06-03T14:32:43Z"}, "committer": {"name": "Andreas Schwab", "email": "schwab@gcc.gnu.org", "date": "2007-06-03T14:32:43Z"}, "message": "m68k.c (override_options): Don't override REAL_MODE_FORMAT.\n\n\t* config/m68k/m68k.c (override_options): Don't override\n\tREAL_MODE_FORMAT.\n\t* config/m68k/m68k-modes.def (SF, DF): Define to use\n\tmotorola_single_format and motorola_double_format, resp.\n\t* real.c (motorola_single_format): Renamed from\n\tcoldfire_single_format.\n\t(motorola_double_format): Renamed from coldfire_double_format.\n\t(encode_ieee_extended): Generate a proper canonical NaN image\n\trespecting canonical_nan_lsbs_set.\n\t(ieee_extended_motorola_format): Set canonical_nan_lsbs_set to\n\ttrue.\n\t* real.h: Adjust declarations.\n\nFrom-SVN: r125295", "tree": {"sha": "b23bf23815638d9880bbb2f271bb74a3a45a507c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b23bf23815638d9880bbb2f271bb74a3a45a507c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/comments", "author": {"login": "andreas-schwab", "id": 2175493, "node_id": "MDQ6VXNlcjIxNzU0OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2175493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-schwab", "html_url": "https://github.com/andreas-schwab", "followers_url": "https://api.github.com/users/andreas-schwab/followers", "following_url": "https://api.github.com/users/andreas-schwab/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-schwab/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-schwab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-schwab/subscriptions", "organizations_url": "https://api.github.com/users/andreas-schwab/orgs", "repos_url": "https://api.github.com/users/andreas-schwab/repos", "events_url": "https://api.github.com/users/andreas-schwab/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-schwab/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4889b20e236b872403df3112167b1d81c00110fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4889b20e236b872403df3112167b1d81c00110fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4889b20e236b872403df3112167b1d81c00110fe"}], "stats": {"total": 53, "additions": 37, "deletions": 16}, "files": [{"sha": "a336afc5fc1d912968e33ece8cb5a382796924f8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "patch": "@@ -1,3 +1,18 @@\n+2007-06-03  Andreas Schwab  <schwab@suse.de>\n+\n+\t* config/m68k/m68k.c (override_options): Don't override\n+\tREAL_MODE_FORMAT.\n+\t* config/m68k/m68k-modes.def (SF, DF): Define to use\n+\tmotorola_single_format and motorola_double_format, resp.\n+\t* real.c (motorola_single_format): Renamed from\n+\tcoldfire_single_format.\n+\t(motorola_double_format): Renamed from coldfire_double_format.\n+\t(encode_ieee_extended): Generate a proper canonical NaN image\n+\trespecting canonical_nan_lsbs_set.\n+\t(ieee_extended_motorola_format): Set canonical_nan_lsbs_set to\n+\ttrue.\n+\t* real.h: Adjust declarations.\n+\n 2007-06-03  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n \tPR target/32163"}, {"sha": "d600446bcf96b5b9d607c8449cd26ecf2ab38e01", "filename": "gcc/config/m68k/m68k-modes.def", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Fconfig%2Fm68k%2Fm68k-modes.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Fconfig%2Fm68k%2Fm68k-modes.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k-modes.def?ref=b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "patch": "@@ -1,5 +1,5 @@\n /* M68k extra machine modes. \n-   Copyright (C) 2003, 2004 Free Software Foundation, Inc.\n+   Copyright (C) 2003, 2004, 2007 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -18,5 +18,9 @@ along with GCC; see the file COPYING.  If not, write to\n the Free Software Foundation, 51 Franklin Street, Fifth Floor,\n Boston, MA 02110-1301, USA.  */\n \n+/* These differ in the representation of the canonical NaN.  */\n+RESET_FLOAT_FORMAT (SF, motorola_single_format);\n+RESET_FLOAT_FORMAT (DF, motorola_double_format);\n+\n /* 80-bit floating point (IEEE extended, in a 96-bit field) */\n FRACTIONAL_FLOAT_MODE (XF, 80, 12, ieee_extended_motorola_format);"}, {"sha": "1ce704258ba67dcefcf15dd44ae436183dd290b5", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "patch": "@@ -1,6 +1,6 @@\n /* Subroutines for insn-output.c for Motorola 68000 family.\n    Copyright (C) 1987, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n-   2001, 2003, 2004, 2005, 2006\n+   2001, 2003, 2004, 2005, 2006, 2007\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -541,12 +541,6 @@ override_options (void)\n \t      : (m68k_cpu_flags & FL_COLDFIRE) != 0 ? FPUTYPE_COLDFIRE\n \t      : FPUTYPE_68881);\n \n-  if (TARGET_COLDFIRE_FPU)\n-    {\n-      REAL_MODE_FORMAT (SFmode) = &coldfire_single_format;\n-      REAL_MODE_FORMAT (DFmode) = &coldfire_double_format;\n-    }\n-\n   /* Sanity check to ensure that msep-data and mid-sahred-library are not\n    * both specified together.  Doing so simply doesn't make sense.\n    */"}, {"sha": "9a84329f975057ed6e056f27a158a3893ad3404f", "filename": "gcc/real.c", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Freal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Freal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freal.c?ref=b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "patch": "@@ -1,6 +1,6 @@\n /* real.c - software floating point emulation.\n    Copyright (C) 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n-   2000, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.\n+   2000, 2002, 2003, 2004, 2005, 2007 Free Software Foundation, Inc.\n    Contributed by Stephen L. Moshier (moshier@world.std.com).\n    Re-written by Richard Henderson <rth@redhat.com>\n \n@@ -2774,7 +2774,7 @@ const struct real_format mips_single_format =\n     true\n   };\n \n-const struct real_format coldfire_single_format =\n+const struct real_format motorola_single_format =\n   {\n     encode_ieee_single,\n     decode_ieee_single,\n@@ -3019,7 +3019,7 @@ const struct real_format mips_double_format =\n     true\n   };\n \n-const struct real_format coldfire_double_format =\n+const struct real_format motorola_double_format =\n   {\n     encode_ieee_double,\n     decode_ieee_double,\n@@ -3082,7 +3082,15 @@ encode_ieee_extended (const struct real_format *fmt, long *buf,\n       if (fmt->has_nans)\n \t{\n \t  image_hi |= 32767;\n-\t  if (HOST_BITS_PER_LONG == 32)\n+\t  if (r->canonical)\n+\t    {\n+\t      if (fmt->canonical_nan_lsbs_set)\n+\t\t{\n+\t\t  sig_hi = (1 << 30) - 1;\n+\t\t  sig_lo = 0xffffffff;\n+\t\t}\n+\t    }\n+\t  else if (HOST_BITS_PER_LONG == 32)\n \t    {\n \t      sig_hi = r->sig[SIGSZ-1];\n \t      sig_lo = r->sig[SIGSZ-2];\n@@ -3364,7 +3372,7 @@ const struct real_format ieee_extended_motorola_format =\n     true,\n     true,\n     true,\n-    false\n+    true\n   };\n \n const struct real_format ieee_extended_intel_96_format ="}, {"sha": "ec5a207cb9ca8d94ba7b64f684fc5308f173a2de", "filename": "gcc/real.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Freal.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6a9c30c80a0713b0b27f434dfe34b0552fc7384/gcc%2Freal.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freal.h?ref=b6a9c30c80a0713b0b27f434dfe34b0552fc7384", "patch": "@@ -1,6 +1,6 @@\n /* Definitions of floating-point access for GNU compiler.\n    Copyright (C) 1989, 1991, 1994, 1996, 1997, 1998, 1999,\n-   2000, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.\n+   2000, 2002, 2003, 2004, 2005, 2007 Free Software Foundation, Inc.\n \n    This file is part of GCC.\n \n@@ -254,10 +254,10 @@ extern unsigned int real_hash (const REAL_VALUE_TYPE *);\n /* Target formats defined in real.c.  */\n extern const struct real_format ieee_single_format;\n extern const struct real_format mips_single_format;\n-extern const struct real_format coldfire_single_format;\n+extern const struct real_format motorola_single_format;\n extern const struct real_format ieee_double_format;\n extern const struct real_format mips_double_format;\n-extern const struct real_format coldfire_double_format;\n+extern const struct real_format motorola_double_format;\n extern const struct real_format ieee_extended_motorola_format;\n extern const struct real_format ieee_extended_intel_96_format;\n extern const struct real_format ieee_extended_intel_96_round_53_format;"}]}