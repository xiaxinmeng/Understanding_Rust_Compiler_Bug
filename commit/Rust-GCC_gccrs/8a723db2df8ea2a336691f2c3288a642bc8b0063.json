{"sha": "8a723db2df8ea2a336691f2c3288a642bc8b0063", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGE3MjNkYjJkZjhlYTJhMzM2NjkxZjJjMzI4OGE2NDJiYzhiMDA2Mw==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2001-12-26T19:54:44Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2001-12-26T19:54:44Z"}, "message": "function.c (expand_main_function): Make sure stack adjustments happen before sjlj exception setup.\n\n* function.c (expand_main_function): Make sure stack adjustments\nhappen before sjlj exception setup.\n\nFrom-SVN: r48316", "tree": {"sha": "8488e7a048ea97b3d04010051f52f34e4e0d025e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8488e7a048ea97b3d04010051f52f34e4e0d025e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a723db2df8ea2a336691f2c3288a642bc8b0063", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a723db2df8ea2a336691f2c3288a642bc8b0063", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a723db2df8ea2a336691f2c3288a642bc8b0063", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a723db2df8ea2a336691f2c3288a642bc8b0063/comments", "author": null, "committer": null, "parents": [{"sha": "b92b324de7f13dd6504c1da292bf1ff677359664", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b92b324de7f13dd6504c1da292bf1ff677359664", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b92b324de7f13dd6504c1da292bf1ff677359664"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "44e13a8cea5f9d8e2338a97100527aab88764f60", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a723db2df8ea2a336691f2c3288a642bc8b0063/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a723db2df8ea2a336691f2c3288a642bc8b0063/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8a723db2df8ea2a336691f2c3288a642bc8b0063", "patch": "@@ -1,3 +1,8 @@\n+2001-12-26  DJ Delorie  <dj@redhat.com>\n+\n+\t* function.c (expand_main_function): Make sure stack adjustments\n+\thappen before sjlj exception setup.\n+\n 2001-12-26  David Edelsohn  <edelsohn@gnu.org>\n \n \t* rs6000.md (indirect_jump): Prefer CTR over LR."}, {"sha": "f5a3102bf4d70175665b5a68479314ef25db8325", "filename": "gcc/function.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a723db2df8ea2a336691f2c3288a642bc8b0063/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a723db2df8ea2a336691f2c3288a642bc8b0063/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=8a723db2df8ea2a336691f2c3288a642bc8b0063", "patch": "@@ -6278,8 +6278,9 @@ expand_main_function ()\n   if (FORCE_PREFERRED_STACK_BOUNDARY_IN_MAIN)\n     {\n       int align = PREFERRED_STACK_BOUNDARY / BITS_PER_UNIT;\n-      rtx tmp;\n+      rtx tmp, seq;\n \n+      start_sequence ();\n       /* Forcibly align the stack.  */\n #ifdef STACK_GROWS_DOWNWARD\n       tmp = expand_simple_binop (Pmode, AND, stack_pointer_rtx, GEN_INT(-align),\n@@ -6296,6 +6297,16 @@ expand_main_function ()\n       /* Enlist allocate_dynamic_stack_space to pick up the pieces.  */\n       tmp = force_reg (Pmode, const0_rtx);\n       allocate_dynamic_stack_space (tmp, NULL_RTX, BIGGEST_ALIGNMENT);\n+      seq = gen_sequence ();\n+      end_sequence ();\n+\n+      for (tmp = get_last_insn (); tmp; tmp = PREV_INSN (tmp))\n+\tif (NOTE_P (tmp) && NOTE_LINE_NUMBER (tmp) == NOTE_INSN_FUNCTION_BEG)\n+\t  break;\n+      if (tmp)\n+\temit_insn_before (seq, tmp);\n+      else\n+\temit_insn (seq);\n     }\n #endif\n "}]}