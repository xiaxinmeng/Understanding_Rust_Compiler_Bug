{"sha": "8cba9a053644b2bfcbe64d644d01cf697b51b9c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGNiYTlhMDUzNjQ0YjJiZmNiZTY0ZDY0NGQwMWNmNjk3YjUxYjljMg==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2012-10-19T05:34:44Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2012-10-19T05:34:44Z"}, "message": "gcse.c: Update copyright dates.\n\n\t* gcse.c: Update copyright dates.\n\t(hoist_expr_reaches_here_p): Change parameter type from char *\n\tto sbitmap.\n\nFrom-SVN: r192603", "tree": {"sha": "912f6d85905f6f73a43d1e05c15a272d20d9308f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/912f6d85905f6f73a43d1e05c15a272d20d9308f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8cba9a053644b2bfcbe64d644d01cf697b51b9c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cba9a053644b2bfcbe64d644d01cf697b51b9c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8cba9a053644b2bfcbe64d644d01cf697b51b9c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8cba9a053644b2bfcbe64d644d01cf697b51b9c2/comments", "author": null, "committer": null, "parents": [{"sha": "0524295766968c59e4d16bd3a55a7cedd60a5348", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0524295766968c59e4d16bd3a55a7cedd60a5348", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0524295766968c59e4d16bd3a55a7cedd60a5348"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "93cc988186923b83c9c6a91a1eb131f53e152fa1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cba9a053644b2bfcbe64d644d01cf697b51b9c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cba9a053644b2bfcbe64d644d01cf697b51b9c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8cba9a053644b2bfcbe64d644d01cf697b51b9c2", "patch": "@@ -1,3 +1,9 @@\n+2012-10-19  Bin Cheng  <bin.cheng@arm.com>\n+\n+\t* gcse.c: Update copyright dates.\n+\t(hoist_expr_reaches_here_p): Change parameter type from char *\n+\tto sbitmap.\n+\n 2012-10-19  Sebastian Huber <sebastian.huber@embedded-brains.de>\n \n \t* config.gcc"}, {"sha": "94f4beb6982a42d1c0f88090f155533a9948e971", "filename": "gcc/gcse.c", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8cba9a053644b2bfcbe64d644d01cf697b51b9c2/gcc%2Fgcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8cba9a053644b2bfcbe64d644d01cf697b51b9c2/gcc%2Fgcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcse.c?ref=8cba9a053644b2bfcbe64d644d01cf697b51b9c2", "patch": "@@ -1,6 +1,6 @@\n /* Partial redundancy elimination / Hoisting for RTL.\n    Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n-   2006, 2007, 2008, 2009, 2010, 2011 Free Software Foundation, Inc.\n+   2006, 2007, 2008, 2009, 2010, 2011, 2012 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -460,7 +460,7 @@ static void alloc_code_hoist_mem (int, int);\n static void free_code_hoist_mem (void);\n static void compute_code_hoist_vbeinout (void);\n static void compute_code_hoist_data (void);\n-static int hoist_expr_reaches_here_p (basic_block, int, basic_block, char *,\n+static int hoist_expr_reaches_here_p (basic_block, int, basic_block, sbitmap,\n \t\t\t\t      int, int *);\n static int hoist_code (void);\n static int one_code_hoisting_pass (void);\n@@ -2843,7 +2843,7 @@ compute_code_hoist_data (void)\n \n static int\n hoist_expr_reaches_here_p (basic_block expr_bb, int expr_index, basic_block bb,\n-\t\t\t   char *visited, int distance, int *bb_size)\n+\t\t\t   sbitmap visited, int distance, int *bb_size)\n {\n   edge pred;\n   edge_iterator ei;\n@@ -2864,7 +2864,8 @@ hoist_expr_reaches_here_p (basic_block expr_bb, int expr_index, basic_block bb,\n   if (visited == NULL)\n     {\n       visited_allocated_locally = 1;\n-      visited = XCNEWVEC (char, last_basic_block);\n+      visited = sbitmap_alloc (last_basic_block);\n+      sbitmap_zero (visited);\n     }\n \n   FOR_EACH_EDGE (pred, ei, bb->preds)\n@@ -2875,7 +2876,7 @@ hoist_expr_reaches_here_p (basic_block expr_bb, int expr_index, basic_block bb,\n \tbreak;\n       else if (pred_bb == expr_bb)\n \tcontinue;\n-      else if (visited[pred_bb->index])\n+      else if (TEST_BIT (visited, pred_bb->index))\n \tcontinue;\n \n       else if (! TEST_BIT (transp[pred_bb->index], expr_index))\n@@ -2884,14 +2885,14 @@ hoist_expr_reaches_here_p (basic_block expr_bb, int expr_index, basic_block bb,\n       /* Not killed.  */\n       else\n \t{\n-\t  visited[pred_bb->index] = 1;\n+\t  SET_BIT (visited, pred_bb->index);\n \t  if (! hoist_expr_reaches_here_p (expr_bb, expr_index, pred_bb,\n \t\t\t\t\t   visited, distance, bb_size))\n \t    break;\n \t}\n     }\n   if (visited_allocated_locally)\n-    free (visited);\n+    sbitmap_free (visited);\n \n   return (pred == NULL);\n }"}]}