{"sha": "427071d4a44f6a7f742c93af83a56057c88edecf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI3MDcxZDRhNDRmNmE3Zjc0MmM5M2FmODNhNTYwNTdjODhlZGVjZg==", "commit": {"author": {"name": "Sam Tebbs", "email": "samtebbs@gcc.gnu.org", "date": "2018-11-30T14:38:11Z"}, "committer": {"name": "Sam Tebbs", "email": "samtebbs@gcc.gnu.org", "date": "2018-11-30T14:38:11Z"}, "message": "[PATCH][GCC][ARM] Ensure dotproduct is only enabled on armv8 neon\n\n\ngcc/ChangeLog:\n\n2018-11-30  Sam Tebbs<sam.tebbs@arm.com>\n\n\t* config/arm/arm.h (TARGET_DOTPROD): Add TARGET_VFP5 constraint.\n\ngcc/testsuite/ChangeLog:\n\n2018-11-30  Sam Tebbs<sam.tebbs@arm.com>\n\n\t* gcc.target/arm/neon-dotprod-restriction.c: New file.\n\t* lib/target-supports.exp\n\t(check_effective_target_arm_v8_2a_dotprod_neon_ok_nocache): Include\n\tstdint.h.\n\nFrom-SVN: r266665", "tree": {"sha": "10e1ff5e01b1ed58bb3ecec7819d454fd79b7ab9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10e1ff5e01b1ed58bb3ecec7819d454fd79b7ab9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/427071d4a44f6a7f742c93af83a56057c88edecf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/427071d4a44f6a7f742c93af83a56057c88edecf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/427071d4a44f6a7f742c93af83a56057c88edecf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/427071d4a44f6a7f742c93af83a56057c88edecf/comments", "author": null, "committer": null, "parents": [{"sha": "6e644a50045f8032b6d6ff19eb70d8b33dfc4dae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e644a50045f8032b6d6ff19eb70d8b33dfc4dae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e644a50045f8032b6d6ff19eb70d8b33dfc4dae"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "18feaf5e0a16315019f38fd8208247532e6fbd2f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=427071d4a44f6a7f742c93af83a56057c88edecf", "patch": "@@ -1,3 +1,7 @@\n+2018-11-30  Sam Tebbs  <sam.tebbs@arm.com>\n+\n+\t* config/arm/arm.h (TARGET_DOTPROD): Add TARGET_VFP5 constraint.\n+\n 2018-11-30  Martin Liska  <mliska@suse.cz>\n \n \tPR sanitizer/81715"}, {"sha": "ab63fc5797a12c172ed77437b65388dd115146f3", "filename": "gcc/config/arm/arm.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2Fconfig%2Farm%2Farm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2Fconfig%2Farm%2Farm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.h?ref=427071d4a44f6a7f742c93af83a56057c88edecf", "patch": "@@ -214,7 +214,7 @@ extern tree arm_fp16_type_node;\n #define TARGET_NEON_RDMA (TARGET_NEON && arm_arch8_1)\n \n /* Supports the Dot Product AdvSIMD extensions.  */\n-#define TARGET_DOTPROD (TARGET_NEON\t\t\t\t\t\\\n+#define TARGET_DOTPROD (TARGET_NEON && TARGET_VFP5\t\t\t\\\n \t\t\t&& bitmap_bit_p (arm_active_target.isa,\t\t\\\n \t\t\t\t\tisa_bit_dotprod)\t\t\\\n \t\t\t&& arm_arch8_2)"}, {"sha": "4963b1dd41cd6506f813230c65d90df7ba9014d8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=427071d4a44f6a7f742c93af83a56057c88edecf", "patch": "@@ -1,8 +1,16 @@\n+2018-11-30  Sam Tebbs  <sam.tebbs@arm.com>\n+\n+\t* gcc.target/arm/neon-dotprod-restriction.c: New file.\n+\t* lib/target-supports.exp\n+\t(check_effective_target_arm_v8_2a_dotprod_neon_ok_nocache): Include\n+\tstdint.h.\n+\n 2018-11-30  Martin Liska  <mliska@suse.cz>\n \n \tPR sanitizer/81715\n \t* c-c++-common/asan/asan-stack-small.c: New test.\n \n+>>>>>>> .r266664\n 2018-11-30  Richard Biener  <rguenther@suse.de>\n \n \t* gcc.dg/gimplefe-34.c: New testcase."}, {"sha": "3baa2da25ea12c19d5c6f9364c64048d61eb91a0", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/427071d4a44f6a7f742c93af83a56057c88edecf/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=427071d4a44f6a7f742c93af83a56057c88edecf", "patch": "@@ -4437,6 +4437,7 @@ proc check_effective_target_arm_v8_2a_dotprod_neon_ok_nocache { } {\n     foreach flags {\"\" \"-mfloat-abi=softfp -mfpu=neon-fp-armv8\" \"-mfloat-abi=hard -mfpu=neon-fp-armv8\"} {\n         if { [check_no_compiler_messages_nocache \\\n                   arm_v8_2a_dotprod_neon_ok object {\n+\t    #include <stdint.h>\n             #if !defined (__ARM_FEATURE_DOTPROD)\n             #error \"__ARM_FEATURE_DOTPROD not defined\"\n             #endif"}]}