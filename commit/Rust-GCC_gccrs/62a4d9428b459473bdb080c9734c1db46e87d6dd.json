{"sha": "62a4d9428b459473bdb080c9734c1db46e87d6dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjJhNGQ5NDI4YjQ1OTQ3M2JkYjA4MGM5NzM0YzFkYjQ2ZTg3ZDZkZA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-11-24T18:10:26Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-11-24T18:10:26Z"}, "message": "re PR c++/18586 (ICE on invalid template member declaration)\n\n\tPR c++/18586\n\t* parser.c (cp_parser_init_declarator): Do not pop scope twice.\n\n\tPR c++/18586\n\t* g++.dg/template/crash27.C: New test.\n\nFrom-SVN: r91182", "tree": {"sha": "8c71e87be9e6aaa39c6f76290576dce0b58c5637", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c71e87be9e6aaa39c6f76290576dce0b58c5637"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62a4d9428b459473bdb080c9734c1db46e87d6dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62a4d9428b459473bdb080c9734c1db46e87d6dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62a4d9428b459473bdb080c9734c1db46e87d6dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62a4d9428b459473bdb080c9734c1db46e87d6dd/comments", "author": null, "committer": null, "parents": [{"sha": "fc57e2c7efcdb90838f863b5d6337341bff5fc27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc57e2c7efcdb90838f863b5d6337341bff5fc27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc57e2c7efcdb90838f863b5d6337341bff5fc27"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "abfc86abb8a0fbd845b00153a1a172f1fe9c2b1b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=62a4d9428b459473bdb080c9734c1db46e87d6dd", "patch": "@@ -1,5 +1,8 @@\n 2004-11-24  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/18586\n+\t* parser.c (cp_parser_init_declarator): Do not pop scope twice.\n+\n \tPR c++/18530\n \t* cp-tree.h (CTOR_NAME): Remove.\n \t(DTOR_NAME): Remove."}, {"sha": "ccd8a95c434e778bcc517e8d8515835fda0d8df1", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=62a4d9428b459473bdb080c9734c1db46e87d6dd", "patch": "@@ -10590,7 +10590,10 @@ cp_parser_init_declarator (cp_parser* parser,\n   if (member_p)\n     {\n       if (pop_p)\n-\tpop_scope (scope);\n+\t{\n+\t  pop_scope (scope);\n+\t  pop_p = false;\n+\t}\n       decl = grokfield (declarator, decl_specifiers,\n \t\t\tinitializer, /*asmspec=*/NULL_TREE,\n \t\t\t/*attributes=*/NULL_TREE);"}, {"sha": "d569fb719fb9e4b7da95b726b46405ab2fea2b2c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=62a4d9428b459473bdb080c9734c1db46e87d6dd", "patch": "@@ -1,5 +1,8 @@\n 2004-11-24  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/18586\n+\t* g++.dg/template/crash27.C: New test. \n+\n \tPR c++/18530\n \t* g++.dg/warn/Wshadow-3.C: New test.\n "}, {"sha": "d6d68a81bc72642d784df7d5ccb096b8aed0331f", "filename": "gcc/testsuite/g++.dg/template/deduce3.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdeduce3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62a4d9428b459473bdb080c9734c1db46e87d6dd/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdeduce3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdeduce3.C?ref=62a4d9428b459473bdb080c9734c1db46e87d6dd", "patch": "@@ -0,0 +1,9 @@\n+template <typename T>\n+void f(int, T (*)() = 0);\n+\n+void g() {\n+  typedef int A[2];\n+  f<A>(0); // { dg-error \"\" }\n+  typedef void F();\n+  f<F>(0); // { dg-error \"\" }\n+}"}]}