{"sha": "92da7074dec9bcb615c1a9b1461d7207b7f6641e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJkYTcwNzRkZWM5YmNiNjE1YzFhOWIxNDYxZDcyMDdiN2Y2NjQxZQ==", "commit": {"author": {"name": "Martin v. L\u00f6wis", "email": "loewis@informatik.hu-berlin.de", "date": "1999-06-14T15:56:12Z"}, "committer": {"name": "Martin v. L\u00f6wis", "email": "loewis@gcc.gnu.org", "date": "1999-06-14T15:56:12Z"}, "message": "pt.c (tsubst_friend_function): Push into namespace of friend function before pushdecl'ing it.\n\n\t* pt.c (tsubst_friend_function): Push into namespace of friend\n\tfunction before pushdecl'ing it.\n\nFrom-SVN: r27520", "tree": {"sha": "5893efe1483030954993a35dda449713f012dfc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5893efe1483030954993a35dda449713f012dfc8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92da7074dec9bcb615c1a9b1461d7207b7f6641e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92da7074dec9bcb615c1a9b1461d7207b7f6641e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92da7074dec9bcb615c1a9b1461d7207b7f6641e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92da7074dec9bcb615c1a9b1461d7207b7f6641e/comments", "author": null, "committer": null, "parents": [{"sha": "bf4f78eef9cd221aa66df893d5dd9e18c38f9eb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf4f78eef9cd221aa66df893d5dd9e18c38f9eb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf4f78eef9cd221aa66df893d5dd9e18c38f9eb2"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "99386f1b1fb0f1797db00e386d25ee134c906199", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92da7074dec9bcb615c1a9b1461d7207b7f6641e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92da7074dec9bcb615c1a9b1461d7207b7f6641e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=92da7074dec9bcb615c1a9b1461d7207b7f6641e", "patch": "@@ -1,3 +1,8 @@\n+1999-06-14  Martin von L\ufffdwis  <loewis@informatik.hu-berlin.de>\n+\n+\t* pt.c (tsubst_friend_function): Push into namespace of friend\n+\tfunction before pushdecl'ing it.\n+\n 1999-06-14  Nathan Sidwell  <nathan@acm.org>\n \n \t* call.c (build_new_op): Remove REF_BIND from all operands."}, {"sha": "712ad6c963e9441cb7c5e6f4964afd339c71f2e8", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92da7074dec9bcb615c1a9b1461d7207b7f6641e/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92da7074dec9bcb615c1a9b1461d7207b7f6641e/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=92da7074dec9bcb615c1a9b1461d7207b7f6641e", "patch": "@@ -4495,6 +4495,7 @@ tsubst_friend_function (decl, args)\n       tree old_decl;\n       tree new_friend_template_info;\n       tree new_friend_result_template_info;\n+      tree ns;\n       int  new_friend_is_defn;\n \n       /* We must save some information from NEW_FRIEND before calling\n@@ -4517,7 +4518,13 @@ tsubst_friend_function (decl, args)\n \t  new_friend_result_template_info = NULL_TREE;\n \t}\n \n+      /* Inside pushdecl_namespace_level, we will push into the \n+\t current namespace. However, the friend function should \n+\t tyically go into the namespace of the template. */\n+      ns = decl_namespace_context (new_friend);\n+      push_nested_namespace (ns);\n       old_decl = pushdecl_namespace_level (new_friend);\n+      pop_nested_namespace (ns);\n \n       if (old_decl != new_friend)\n \t{"}]}