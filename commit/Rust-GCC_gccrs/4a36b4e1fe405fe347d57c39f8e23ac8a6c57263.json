{"sha": "4a36b4e1fe405fe347d57c39f8e23ac8a6c57263", "node_id": "C_kwDOANBUbNoAKDRhMzZiNGUxZmU0MDVmZTM0N2Q1N2MzOWY4ZTIzYWM4YTZjNTcyNjM", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2022-07-20T18:36:54Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2022-07-24T15:00:50Z"}, "message": "Allow registering same SSA name relations in oracle.\n\nSimilarly to what we did for the relation oracle, but for the path\noracle.  This was found while working on frange, where we can test for\nx == x while checking for NANness.\n\nTested on x86-64 Linux.\n\ngcc/ChangeLog:\n\n\t* value-relation.cc (value_relation::set_relation): Remove assert.\n\t(path_oracle::register_relation): Exit when trying to register\n\tsame SSA name relations.", "tree": {"sha": "64c4d9700076230723677fa2fef3ee1fea8c7768", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64c4d9700076230723677fa2fef3ee1fea8c7768"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a36b4e1fe405fe347d57c39f8e23ac8a6c57263", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a36b4e1fe405fe347d57c39f8e23ac8a6c57263", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a36b4e1fe405fe347d57c39f8e23ac8a6c57263", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a36b4e1fe405fe347d57c39f8e23ac8a6c57263/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e850c98f1f06721126606ad3439d7cd9393c687c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e850c98f1f06721126606ad3439d7cd9393c687c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e850c98f1f06721126606ad3439d7cd9393c687c"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "a447021214fff977ad2e423f3893bb416018afae", "filename": "gcc/value-relation.cc", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a36b4e1fe405fe347d57c39f8e23ac8a6c57263/gcc%2Fvalue-relation.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a36b4e1fe405fe347d57c39f8e23ac8a6c57263/gcc%2Fvalue-relation.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvalue-relation.cc?ref=4a36b4e1fe405fe347d57c39f8e23ac8a6c57263", "patch": "@@ -667,8 +667,6 @@ class value_relation\n inline void\n value_relation::set_relation (relation_kind r, tree n1, tree n2)\n {\n-  gcc_checking_assert (SSA_NAME_VERSION (n1) != SSA_NAME_VERSION (n2)\n-\t\t       || r == VREL_EQ);\n   related = r;\n   name1 = n1;\n   name2 = n2;\n@@ -1449,6 +1447,11 @@ void\n path_oracle::register_relation (basic_block bb, relation_kind k, tree ssa1,\n \t\t\t\ttree ssa2)\n {\n+  // If the 2 ssa_names are the same, do nothing.  An equivalence is implied,\n+  // and no other relation makes sense.\n+  if (ssa1 == ssa2)\n+    return;\n+\n   if (dump_file && (dump_flags & TDF_DETAILS))\n     {\n       value_relation vr (k, ssa1, ssa2);"}]}