{"sha": "710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb", "node_id": "C_kwDOANBUbNoAKDcxMGM2YWI0YWQ1MDJjZGRjOGJkZjgyYzk1ZjU4MGZhOTRmYmY5ZmI", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-09-24T08:13:45Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-09-24T08:16:19Z"}, "message": "Verify unallocated edge/BB flags are clear\n\nThis adds verification that unused auto_{edge,bb}_flag are not\nremaining set but correctly cleared by consumers.  The intent\nis that those flags can be cheaply used on a smaller IL region\nand thus afterwards clearing can be restricted to the same\nsmall region as well.\n\n2021-09-24  Richard Biener  <rguenther@suse.de>\n\n\t* cfghooks.c (verify_flow_info): Verify unallocated BB and\n\tedge flags are not set.", "tree": {"sha": "6dae116ed180f703d381fff70db938a62d5251cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6dae116ed180f703d381fff70db938a62d5251cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "204f56aa65d2496e9f7db86c4aa37d42a336fc5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/204f56aa65d2496e9f7db86c4aa37d42a336fc5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/204f56aa65d2496e9f7db86c4aa37d42a336fc5b"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "6446e16ca8c041390f3e3904d2b93480c48b2f90", "filename": "gcc/cfghooks.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb/gcc%2Fcfghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb/gcc%2Fcfghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfghooks.c?ref=710c6ab4ad502cddc8bdf82c95f580fa94fbf9fb", "patch": "@@ -161,6 +161,12 @@ verify_flow_info (void)\n \t  err = 1;\n \t}\n \n+      if (bb->flags & ~cfun->cfg->bb_flags_allocated)\n+\t{\n+\t  error (\"verify_flow_info: unallocated flag set on BB %d\", bb->index);\n+\t  err = 1;\n+\t}\n+\n       FOR_EACH_EDGE (e, ei, bb->succs)\n \t{\n \t  if (last_visited [e->dest->index] == bb)\n@@ -202,6 +208,13 @@ verify_flow_info (void)\n \t      err = 1;\n \t    }\n \n+\t  if (e->flags & ~cfun->cfg->edge_flags_allocated)\n+\t    {\n+\t      error (\"verify_flow_info: unallocated edge flag set on %d -> %d\",\n+\t\t     e->src->index, e->dest->index);\n+\t      err = 1;\n+\t    }\n+\n \t  edge_checksum[e->dest->index] += (size_t) e;\n \t}\n       if (n_fallthru > 1)"}]}