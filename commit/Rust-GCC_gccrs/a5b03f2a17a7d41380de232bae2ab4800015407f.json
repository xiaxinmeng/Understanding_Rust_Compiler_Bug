{"sha": "a5b03f2a17a7d41380de232bae2ab4800015407f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTViMDNmMmExN2E3ZDQxMzgwZGUyMzJiYWUyYWI0ODAwMDE1NDA3Zg==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2016-12-08T10:56:41Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2016-12-08T10:56:41Z"}, "message": "re PR middle-end/78684 (ICE in create_intersect_range_checks_index, at tree-vect-loop-manip.c:2074)\n\n\tPR middle-end/78684\n\t* tree-vect-loop-manip.c (create_intersect_range_checks_index): Check\n\tsign bit for index step of data reference.\n\tgcc/testsuite\n\tPR middle-end/78684\n\t* g++.dg/torture/pr78684.C: New test.\n\nFrom-SVN: r243431", "tree": {"sha": "f6d9ab2f801704b0ab09524609d6e2bd89bd9d9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f6d9ab2f801704b0ab09524609d6e2bd89bd9d9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5b03f2a17a7d41380de232bae2ab4800015407f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5b03f2a17a7d41380de232bae2ab4800015407f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5b03f2a17a7d41380de232bae2ab4800015407f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5b03f2a17a7d41380de232bae2ab4800015407f/comments", "author": null, "committer": null, "parents": [{"sha": "1adc60671c93ef3618983155d5a4304e3421614c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1adc60671c93ef3618983155d5a4304e3421614c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1adc60671c93ef3618983155d5a4304e3421614c"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "91a1ed3562d32dae56f5f7c8faeb4104e60bac14", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a5b03f2a17a7d41380de232bae2ab4800015407f", "patch": "@@ -1,3 +1,9 @@\n+2016-12-08  Bin Cheng  <bin.cheng@arm.com>\n+\n+\tPR middle-end/78684\n+\t* tree-vect-loop-manip.c (create_intersect_range_checks_index): Check\n+\tsign bit for index step of data reference.\n+\n 2016-12-08  Naveen H.S  <Naveen.Hurugalawadi@cavium.com>\n \n \t* config/aarch64/aarch64.c (aarch64_load_symref_appropriately):"}, {"sha": "904d74fe325cba327b567e9397e65f5cd2a797d3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a5b03f2a17a7d41380de232bae2ab4800015407f", "patch": "@@ -1,3 +1,8 @@\n+2016-12-08  Bin Cheng  <bin.cheng@arm.com>\n+\n+\tPR middle-end/78684\n+\t* g++.dg/torture/pr78684.C: New test.\n+\n 2016-12-08  Christophe Lyon  <christophe.lyon@linaro.org>\n \n \t* gcc.target/aarch64/advsimd-intrinsics/arm-neon-ref.h"}, {"sha": "5d71be5fce4f1188e66ed6c3b9caa0e7661e37fd", "filename": "gcc/testsuite/g++.dg/torture/pr78684.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr78684.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr78684.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr78684.C?ref=a5b03f2a17a7d41380de232bae2ab4800015407f", "patch": "@@ -0,0 +1,20 @@\n+// PR middle-end/78684\n+// { dg-do compile }\n+\n+class a {\n+public:\n+  a(long);\n+  void operator<<=(long) {\n+    long b;\n+    for (unsigned long c; c; c--)\n+      d[c + b] = d[c];\n+  }\n+  a &g();\n+  long d[28];\n+};\n+long e;\n+int f;\n+void j() {\n+  a h(e), i = h;\n+  i.g() <<= f;\n+}"}, {"sha": "beb2f066583485242b7a947307dcef4f57adff54", "filename": "gcc/tree-vect-loop-manip.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2Ftree-vect-loop-manip.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5b03f2a17a7d41380de232bae2ab4800015407f/gcc%2Ftree-vect-loop-manip.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop-manip.c?ref=a5b03f2a17a7d41380de232bae2ab4800015407f", "patch": "@@ -2070,8 +2070,7 @@ create_intersect_range_checks_index (loop_vec_info loop_vinfo, tree *cond_expr,\n       /* Index must have const step, otherwise DR_STEP won't be constant.  */\n       gcc_assert (TREE_CODE (idx_step) == INTEGER_CST);\n       /* Index must evaluate in the same direction as DR.  */\n-      gcc_assert (!neg_step\n-\t\t  || tree_int_cst_compare (idx_step, size_zero_node) < 0);\n+      gcc_assert (!neg_step || tree_int_cst_sign_bit (idx_step) == 1);\n \n       tree min1 = CHREC_LEFT (access1);\n       tree min2 = CHREC_LEFT (access2);"}]}