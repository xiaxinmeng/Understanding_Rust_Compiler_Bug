{"sha": "9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWEwZmI0M2VhMWY2YWFiZjQ2NjhkNGFkM2ZhZjc2YzJkYTRkODY0Nw==", "commit": {"author": {"name": "Thomas Koenig", "email": "Thomas.Koenig@online.de", "date": "2006-03-25T21:15:48Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2006-03-25T21:15:48Z"}, "message": "re PR fortran/26769 (Implement transpose() and reshape() for real instead of using integer)\n\n2006-03-25  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR fortran/26769\n\t* iresolve.c (gfc_resolve_reshape):  Remove doubling of\n\tkind for complex. For real(kind=10), call reshape_r10.\n\t(gfc_resolve_transpose):  For real(kind=10), call\n\ttranspose_r10.\n\n2006-03-25  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR fortran/26769\n\t* Makefile.am:  Add transpose_r10.c and reshape_r10.c.\n\t* aclocal.m4:  Regenerate using aclocal 1.9.3.\n\t* Makefile.in:  Regenerate using automake 1.9.3.\n\t* m4/iparm.m4 (rtype_ccode):  If rtype_letter is `i',\n\tevaluate to rtype_kind, otherwise to rtype_code.\n\t* generated/transpose_r10.c:  Add.\n\t* generated/reshape_r10.c:  Add.\n\n2006-03-25  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR fortran/26769\n\t* gfortran.dg/transpose_reshape_r10.f90:  New test case.\n\nFrom-SVN: r112381", "tree": {"sha": "ecdfff8b892396495441f76b77c91589555fd96d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ecdfff8b892396495441f76b77c91589555fd96d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/comments", "author": null, "committer": null, "parents": [{"sha": "fe1f8f442ef9952650c38ae0383498d41965775c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe1f8f442ef9952650c38ae0383498d41965775c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe1f8f442ef9952650c38ae0383498d41965775c"}], "stats": {"total": 827, "additions": 718, "deletions": 109}, "files": [{"sha": "5937e09a45f5fabc7467f5866e1612a7700c5c76", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -1,3 +1,11 @@\n+2006-03-25  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR fortran/26769\n+\t* iresolve.c (gfc_resolve_reshape):  Remove doubling of\n+\tkind for complex. For real(kind=10), call reshape_r10.\n+\t(gfc_resolve_transpose):  For real(kind=10), call\n+\ttranspose_r10.\n+\n 2006-03-25  Roger Sayle  <roger@eyesopen.com>\n \n \t* dependency.c (gfc_check_dependency): Improve handling of pointers;"}, {"sha": "a51799461e144bb113a05e0cd4d55c4286765730", "filename": "gcc/fortran/iresolve.c", "status": "modified", "additions": 16, "deletions": 4, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ffortran%2Firesolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ffortran%2Firesolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Firesolve.c?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -1499,9 +1499,6 @@ gfc_resolve_reshape (gfc_expr * f, gfc_expr * source, gfc_expr * shape,\n   switch (source->ts.type)\n     {\n     case BT_COMPLEX:\n-      kind = source->ts.kind * 2;\n-      break;\n-\n     case BT_REAL:\n     case BT_INTEGER:\n     case BT_LOGICAL:\n@@ -1523,6 +1520,10 @@ gfc_resolve_reshape (gfc_expr * f, gfc_expr * source, gfc_expr * shape,\n \tf->value.function.name =\n \t  gfc_get_string (PREFIX(\"reshape_%c%d\"),\n \t\t\t  gfc_type_letter (BT_COMPLEX), source->ts.kind);\n+      else if (source->ts.type == BT_REAL && kind == 10)\n+\tf->value.function.name =\n+\t  gfc_get_string (PREFIX(\"reshape_%c%d\"),\n+\t\t\t  gfc_type_letter (BT_REAL), source->ts.kind);\n       else\n \tf->value.function.name =\n \t  gfc_get_string (PREFIX(\"reshape_%d\"), source->ts.kind);\n@@ -1987,8 +1988,19 @@ gfc_resolve_transpose (gfc_expr * f, gfc_expr * matrix)\n             gfc_get_string (PREFIX(\"transpose_c%d\"), kind);\n           break;\n \n-        case BT_INTEGER:\n         case BT_REAL:\n+\t  /* There is no kind=10 integer type.  We need to\n+\t     call the real version.  */\n+\t  if (kind == 10)\n+\t    {\n+\t      f->value.function.name =\n+\t\tgfc_get_string (PREFIX(\"transpose_r%d\"), kind);\n+\t      break;\n+\t    }\n+\n+\t  /* Fall through */\n+\n+        case BT_INTEGER:\n         case BT_LOGICAL:\n \t  /* Use the integer routines for real and logical cases.  This\n \t     assumes they all have the same alignment requirements.  */"}, {"sha": "fc7b98db907275ebe626a4528d00ba07334c9492", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -1,3 +1,8 @@\n+2006-03-25  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR fortran/26769\n+\t* gfortran.dg/transpose_reshape_r10.f90:  New test case.\n+\n 2006-03-25  Uros Bizjak  <uros@kss-loka.si>\n \n \tPR middle-end/26717"}, {"sha": "83da8faeb1cb0bd02eca1f4a83367e5675de9602", "filename": "gcc/testsuite/gfortran.dg/transpose_reshape_r10.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ftestsuite%2Fgfortran.dg%2Ftranspose_reshape_r10.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/gcc%2Ftestsuite%2Fgfortran.dg%2Ftranspose_reshape_r10.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftranspose_reshape_r10.f90?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do run }\n+! { dg-require-effective-target fortran_large_real }\n+program main\n+  integer,parameter :: k = selected_real_kind (precision (0.0_8) + 1)\n+  character(len=90) line\n+  real(k) :: a(3,3)\n+  real(k) :: b(9)\n+  a = 1.0_k\n+  a(1,3) = 0.0_k\n+  write (line,'(9G10.6)') transpose(a)\n+  write (line,'(9G10.6)') reshape(a,shape(b))\n+end"}, {"sha": "99daa8de3e23db0331ff123845fa643f83b07761", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -1,3 +1,14 @@\n+2006-03-25  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR fortran/26769\n+\t* Makefile.am:  Add transpose_r10.c and reshape_r10.c.\n+\t* aclocal.m4:  Regenerate using aclocal 1.9.3.\n+\t* Makefile.in:  Regenerate using automake 1.9.3.\n+\t* m4/iparm.m4 (rtype_ccode):  If rtype_letter is `i',\n+\tevaluate to rtype_kind, otherwise to rtype_code.\n+\t* generated/transpose_r10.c:  Add.\n+\t* generated/reshape_r10.c:  Add.\n+\n 2006-03-22  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR fortran/19303"}, {"sha": "0584922f1dee0c52aa24a8304ef44c0042dffa77", "filename": "libgfortran/Makefile.am", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FMakefile.am?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -312,6 +312,7 @@ i_transpose_c= \\\n generated/transpose_i4.c \\\n generated/transpose_i8.c \\\n generated/transpose_i16.c \\\n+generated/transpose_r10.c \\\n generated/transpose_c4.c \\\n generated/transpose_c8.c \\\n generated/transpose_c10.c \\\n@@ -326,6 +327,7 @@ i_reshape_c= \\\n generated/reshape_i4.c \\\n generated/reshape_i8.c \\\n generated/reshape_i16.c \\\n+generated/reshape_r10.c \\\n generated/reshape_c4.c \\\n generated/reshape_c8.c \\\n generated/reshape_c10.c \\"}, {"sha": "6f4f68b654fba91e602aee177b7cd9bc75a388cc", "filename": "libgfortran/Makefile.in", "status": "modified", "additions": 18, "deletions": 8, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FMakefile.in?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -1,8 +1,8 @@\n-# Makefile.in generated by automake 1.9.6 from Makefile.am.\n+# Makefile.in generated by automake 1.9.3 from Makefile.am.\n # @configure_input@\n \n # Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,\n-# 2003, 2004, 2005  Free Software Foundation, Inc.\n+# 2003, 2004  Free Software Foundation, Inc.\n # This Makefile.in is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n@@ -14,6 +14,8 @@\n \n @SET_MAKE@\n \n+SOURCES = $(libgfortran_la_SOURCES) $(libgfortranbegin_la_SOURCES)\n+\n srcdir = @srcdir@\n top_srcdir = @top_srcdir@\n VPATH = @srcdir@\n@@ -45,8 +47,7 @@ DIST_COMMON = $(am__configure_deps) $(srcdir)/../config.guess \\\n \t$(top_srcdir)/configure ChangeLog\n subdir = .\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n-am__aclocal_m4_deps = $(top_srcdir)/../config/lead-dot.m4 \\\n-\t$(top_srcdir)/../config/stdint.m4 $(top_srcdir)/acinclude.m4 \\\n+am__aclocal_m4_deps = $(top_srcdir)/acinclude.m4 \\\n \t$(top_srcdir)/../config/acx.m4 \\\n \t$(top_srcdir)/../config/no-executables.m4 \\\n \t$(top_srcdir)/../libtool.m4 $(top_srcdir)/configure.ac\n@@ -122,14 +123,15 @@ am__objects_16 = matmul_i4.lo matmul_i8.lo matmul_i16.lo matmul_r4.lo \\\n \tmatmul_c8.lo matmul_c10.lo matmul_c16.lo\n am__objects_17 = matmul_l4.lo matmul_l8.lo matmul_l16.lo\n am__objects_18 = transpose_i4.lo transpose_i8.lo transpose_i16.lo \\\n-\ttranspose_c4.lo transpose_c8.lo transpose_c10.lo \\\n-\ttranspose_c16.lo\n+\ttranspose_r10.lo transpose_c4.lo transpose_c8.lo \\\n+\ttranspose_c10.lo transpose_c16.lo\n am__objects_19 = shape_i4.lo shape_i8.lo shape_i16.lo\n am__objects_20 = eoshift1_4.lo eoshift1_8.lo eoshift1_16.lo\n am__objects_21 = eoshift3_4.lo eoshift3_8.lo eoshift3_16.lo\n am__objects_22 = cshift1_4.lo cshift1_8.lo cshift1_16.lo\n am__objects_23 = reshape_i4.lo reshape_i8.lo reshape_i16.lo \\\n-\treshape_c4.lo reshape_c8.lo reshape_c10.lo reshape_c16.lo\n+\treshape_r10.lo reshape_c4.lo reshape_c8.lo reshape_c10.lo \\\n+\treshape_c16.lo\n am__objects_24 = in_pack_i4.lo in_pack_i8.lo in_pack_i16.lo \\\n \tin_pack_c4.lo in_pack_c8.lo in_pack_c10.lo in_pack_c16.lo\n am__objects_25 = in_unpack_i4.lo in_unpack_i8.lo in_unpack_i16.lo \\\n@@ -222,7 +224,7 @@ LTPPFCCOMPILE = $(LIBTOOL) --mode=compile $(FC) $(DEFS) \\\n \t$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \\\n \t$(AM_FCFLAGS) $(FCFLAGS)\n FCLD = $(FC)\n-FCLINK = $(LIBTOOL) --mode=link $(FCLD) $(AM_FCFLAGS) $(FCFLAGS) \\\n+FCLINK = $(LIBTOOL) --mode=link $(FCLD) $(AM_FFLAGS) $(FCFLAGS) \\\n \t$(AM_LDFLAGS) $(LDFLAGS) -o $@\n COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \\\n \t$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)\n@@ -658,6 +660,7 @@ i_transpose_c = \\\n generated/transpose_i4.c \\\n generated/transpose_i8.c \\\n generated/transpose_i16.c \\\n+generated/transpose_r10.c \\\n generated/transpose_c4.c \\\n generated/transpose_c8.c \\\n generated/transpose_c10.c \\\n@@ -672,6 +675,7 @@ i_reshape_c = \\\n generated/reshape_i4.c \\\n generated/reshape_i8.c \\\n generated/reshape_i16.c \\\n+generated/reshape_r10.c \\\n generated/reshape_c4.c \\\n generated/reshape_c8.c \\\n generated/reshape_c10.c \\\n@@ -1928,6 +1932,9 @@ transpose_i8.lo: generated/transpose_i8.c\n transpose_i16.lo: generated/transpose_i16.c\n \t$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o transpose_i16.lo `test -f 'generated/transpose_i16.c' || echo '$(srcdir)/'`generated/transpose_i16.c\n \n+transpose_r10.lo: generated/transpose_r10.c\n+\t$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o transpose_r10.lo `test -f 'generated/transpose_r10.c' || echo '$(srcdir)/'`generated/transpose_r10.c\n+\n transpose_c4.lo: generated/transpose_c4.c\n \t$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o transpose_c4.lo `test -f 'generated/transpose_c4.c' || echo '$(srcdir)/'`generated/transpose_c4.c\n \n@@ -1985,6 +1992,9 @@ reshape_i8.lo: generated/reshape_i8.c\n reshape_i16.lo: generated/reshape_i16.c\n \t$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o reshape_i16.lo `test -f 'generated/reshape_i16.c' || echo '$(srcdir)/'`generated/reshape_i16.c\n \n+reshape_r10.lo: generated/reshape_r10.c\n+\t$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o reshape_r10.lo `test -f 'generated/reshape_r10.c' || echo '$(srcdir)/'`generated/reshape_r10.c\n+\n reshape_c4.lo: generated/reshape_c4.c\n \t$(LIBTOOL) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o reshape_c4.lo `test -f 'generated/reshape_c4.c' || echo '$(srcdir)/'`generated/reshape_c4.c\n "}, {"sha": "0111a59f978e2a30ec40a4690215dabb253daf7c", "filename": "libgfortran/aclocal.m4", "status": "modified", "additions": 273, "deletions": 96, "changes": 369, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Faclocal.m4?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -1,7 +1,7 @@\n-# generated automatically by aclocal 1.9.6 -*- Autoconf -*-\n+# generated automatically by aclocal 1.9.3 -*- Autoconf -*-\n \n-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,\n-# 2005  Free Software Foundation, Inc.\n+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004\n+# Free Software Foundation, Inc.\n # This file is free software; the Free Software Foundation\n # gives unlimited permission to copy and/or distribute it,\n # with or without modifications, as long as this notice is preserved.\n@@ -11,11 +11,23 @@\n # even the implied warranty of MERCHANTABILITY or FITNESS FOR A\n # PARTICULAR PURPOSE.\n \n-# Copyright (C) 2002, 2003, 2005  Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n+#                                                        -*- Autoconf -*-\n+# Copyright (C) 2002, 2003  Free Software Foundation, Inc.\n+# Generated from amversion.in; do not edit by hand.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n \n # AM_AUTOMAKE_VERSION(VERSION)\n # ----------------------------\n@@ -28,15 +40,26 @@ AC_DEFUN([AM_AUTOMAKE_VERSION], [am__api_version=\"1.9\"])\n # Call AM_AUTOMAKE_VERSION so it can be traced.\n # This function is AC_REQUIREd by AC_INIT_AUTOMAKE.\n AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],\n-\t [AM_AUTOMAKE_VERSION([1.9.6])])\n+\t [AM_AUTOMAKE_VERSION([1.9.3])])\n \n-# AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-\n+# AM_AUX_DIR_EXPAND\n \n-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n+# Copyright (C) 2001, 2003 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n \n # For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets\n # $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to\n@@ -83,16 +106,26 @@ AC_PREREQ([2.50])dnl\n am_aux_dir=`cd $ac_aux_dir && pwd`\n ])\n \n-# AM_CONDITIONAL                                            -*- Autoconf -*-\n+# AM_CONDITIONAL                                              -*- Autoconf -*-\n \n-# Copyright (C) 1997, 2000, 2001, 2003, 2004, 2005\n-# Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n+# Copyright (C) 1997, 2000, 2001, 2003, 2004 Free Software Foundation, Inc.\n \n-# serial 7\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 6\n \n # AM_CONDITIONAL(NAME, SHELL-CONDITION)\n # -------------------------------------\n@@ -116,19 +149,30 @@ AC_CONFIG_COMMANDS_PRE(\n Usually this means the macro was only invoked conditionally.]])\n fi])])\n \n-# Do all the work for Automake.                             -*- Autoconf -*-\n+# Do all the work for Automake.                            -*- Autoconf -*-\n \n-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005\n+# This macro actually does too much some checks are only needed if\n+# your package does certain things.  But this isn't really a big deal.\n+\n+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004\n # Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n \n-# serial 12\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n \n-# This macro actually does too much.  Some checks are only needed if\n-# your package does certain things.  But this isn't really a big deal.\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 11\n \n # AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])\n # AM_INIT_AUTOMAKE([OPTIONS])\n@@ -230,31 +274,87 @@ for _am_header in $config_headers :; do\n done\n echo \"timestamp for $1\" >`AS_DIRNAME([$1])`/stamp-h[]$_am_stamp_count])\n \n-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n # AM_PROG_INSTALL_SH\n # ------------------\n # Define $install_sh.\n+\n+# Copyright (C) 2001, 2003 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n AC_DEFUN([AM_PROG_INSTALL_SH],\n [AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl\n install_sh=${install_sh-\"$am_aux_dir/install-sh\"}\n AC_SUBST(install_sh)])\n \n-# Add --enable-maintainer-mode option to configure.         -*- Autoconf -*-\n+#                                                          -*- Autoconf -*-\n+# Copyright (C) 2003  Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 1\n+\n+# Check whether the underlying file-system supports filenames\n+# with a leading dot.  For instance MS-DOS doesn't.\n+AC_DEFUN([AM_SET_LEADING_DOT],\n+[rm -rf .tst 2>/dev/null\n+mkdir .tst 2>/dev/null\n+if test -d .tst; then\n+  am__leading_dot=.\n+else\n+  am__leading_dot=_\n+fi\n+rmdir .tst 2>/dev/null\n+AC_SUBST([am__leading_dot])])\n+\n+# Add --enable-maintainer-mode option to configure.\n # From Jim Meyering\n \n-# Copyright (C) 1996, 1998, 2000, 2001, 2002, 2003, 2004, 2005\n+# Copyright (C) 1996, 1998, 2000, 2001, 2002, 2003, 2004\n # Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n \n-# serial 4\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 3\n \n AC_DEFUN([AM_MAINTAINER_MODE],\n [AC_MSG_CHECKING([whether to enable maintainer-specific portions of Makefiles])\n@@ -273,16 +373,27 @@ AC_DEFUN([AM_MAINTAINER_MODE],\n \n AU_DEFUN([jm_MAINTAINER_MODE], [AM_MAINTAINER_MODE])\n \n-# Fake the existence of programs that GNU maintainers use.  -*- Autoconf -*-\n+#  -*- Autoconf -*-\n \n-# Copyright (C) 1997, 1999, 2000, 2001, 2003, 2005\n-# Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n \n-# serial 4\n+# Copyright (C) 1997, 1999, 2000, 2001, 2003 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 3\n \n # AM_MISSING_PROG(NAME, PROGRAM)\n # ------------------------------\n@@ -308,16 +419,27 @@ else\n fi\n ])\n \n-# Copyright (C) 2003, 2004, 2005  Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n # AM_PROG_MKDIR_P\n # ---------------\n # Check whether `mkdir -p' is supported, fallback to mkinstalldirs otherwise.\n-#\n+\n+# Copyright (C) 2003, 2004 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n # Automake 1.8 used `mkdir -m 0755 -p --' to ensure that directories\n # created by `make install' are always world readable, even if the\n # installer happens to have an overly restrictive umask (e.g. 077).\n@@ -371,14 +493,25 @@ else\n fi\n AC_SUBST([mkdir_p])])\n \n-# Copyright (C) 1998, 1999, 2000, 2001, 2003, 2004, 2005\n+# Copyright (C) 1998, 1999, 2000, 2001, 2003, 2004\n # Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n \n-# serial 5\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 4\n \n # AM_ENABLE_MULTILIB([MAKEFILE], [REL-TO-TOP-SRCDIR])\n # ---------------------------------------------------\n@@ -429,15 +562,26 @@ multi_basedir=\"$multi_basedir\"\n CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}\n CC=\"$CC\"])])dnl\n \n-# Helper functions for option handling.                     -*- Autoconf -*-\n+# Helper functions for option handling.                    -*- Autoconf -*-\n \n-# Copyright (C) 2001, 2002, 2003, 2005  Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n+# Copyright (C) 2001, 2002, 2003  Free Software Foundation, Inc.\n \n-# serial 3\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 2\n \n # _AM_MANGLE_OPTION(NAME)\n # -----------------------\n@@ -462,16 +606,28 @@ AC_DEFUN([_AM_SET_OPTIONS],\n AC_DEFUN([_AM_IF_OPTION],\n [m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])\n \n-# Check to make sure that the build environment is sane.    -*- Autoconf -*-\n-\n-# Copyright (C) 1996, 1997, 2000, 2001, 2003, 2005\n-# Free Software Foundation, Inc.\n #\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n+# Check to make sure that the build environment is sane.\n+#\n \n-# serial 4\n+# Copyright (C) 1996, 1997, 2000, 2001, 2003 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 3\n \n # AM_SANITY_CHECK\n # ---------------\n@@ -514,14 +670,25 @@ Check your system clock])\n fi\n AC_MSG_RESULT(yes)])\n \n-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n # AM_PROG_INSTALL_STRIP\n-# ---------------------\n+\n+# Copyright (C) 2001, 2003 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n # One issue with vendor `install' (even GNU) is that you can't\n # specify the program used to strip binaries.  This is especially\n # annoying in cross-compiling environments, where the build's strip\n@@ -544,13 +711,25 @@ AC_SUBST([INSTALL_STRIP_PROGRAM])])\n \n # Check how to create a tarball.                            -*- Autoconf -*-\n \n-# Copyright (C) 2004, 2005  Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n+# Copyright (C) 2004  Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n+# 02111-1307, USA.\n+\n+# serial 1\n \n-# serial 2\n \n # _AM_PROG_TAR(FORMAT)\n # --------------------\n@@ -638,6 +817,4 @@ AC_SUBST([am__tar])\n AC_SUBST([am__untar])\n ]) # _AM_PROG_TAR\n \n-m4_include([../config/lead-dot.m4])\n-m4_include([../config/stdint.m4])\n m4_include([acinclude.m4])"}, {"sha": "faf8b22913e7fbeb2199adbd83aa499772791e2d", "filename": "libgfortran/generated/reshape_r10.c", "status": "added", "additions": 268, "deletions": 0, "changes": 268, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Fgenerated%2Freshape_r10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Fgenerated%2Freshape_r10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_r10.c?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -0,0 +1,268 @@\n+/* Implementation of the RESHAPE\n+   Copyright 2002 Free Software Foundation, Inc.\n+   Contributed by Paul Brook <paul@nowt.org>\n+\n+This file is part of the GNU Fortran 95 runtime library (libgfortran).\n+\n+Libgfortran is free software; you can redistribute it and/or\n+modify it under the terms of the GNU General Public\n+License as published by the Free Software Foundation; either\n+version 2 of the License, or (at your option) any later version.\n+\n+In addition to the permissions in the GNU General Public License, the\n+Free Software Foundation gives you unlimited permission to link the\n+compiled version of this file into combinations with other programs,\n+and to distribute those combinations without any restriction coming\n+from the use of this file.  (The General Public License restrictions\n+do apply in other respects; for example, they cover modification of\n+the file, and distribution when not linked into a combine\n+executable.)\n+\n+Libgfortran is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public\n+License along with libgfortran; see the file COPYING.  If not,\n+write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,\n+Boston, MA 02110-1301, USA.  */\n+\n+#include \"config.h\"\n+#include <stdlib.h>\n+#include <assert.h>\n+#include \"libgfortran.h\"\n+\n+#if defined (HAVE_GFC_REAL_10)\n+\n+typedef GFC_ARRAY_DESCRIPTOR(1, index_type) shape_type;\n+\n+/* The shape parameter is ignored. We can currently deduce the shape from the\n+   return array.  */\n+\n+extern void reshape_r10 (gfc_array_r10 * const restrict, \n+\tgfc_array_r10 * const restrict, \n+\tshape_type * const restrict,\n+\tgfc_array_r10 * const restrict, \n+\tshape_type * const restrict);\n+export_proto(reshape_r10);\n+\n+void\n+reshape_r10 (gfc_array_r10 * const restrict ret, \n+\tgfc_array_r10 * const restrict source, \n+\tshape_type * const restrict shape,\n+\tgfc_array_r10 * const restrict pad, \n+\tshape_type * const restrict order)\n+{\n+  /* r.* indicates the return array.  */\n+  index_type rcount[GFC_MAX_DIMENSIONS];\n+  index_type rextent[GFC_MAX_DIMENSIONS];\n+  index_type rstride[GFC_MAX_DIMENSIONS];\n+  index_type rstride0;\n+  index_type rdim;\n+  index_type rsize;\n+  index_type rs;\n+  index_type rex;\n+  GFC_REAL_10 *rptr;\n+  /* s.* indicates the source array.  */\n+  index_type scount[GFC_MAX_DIMENSIONS];\n+  index_type sextent[GFC_MAX_DIMENSIONS];\n+  index_type sstride[GFC_MAX_DIMENSIONS];\n+  index_type sstride0;\n+  index_type sdim;\n+  index_type ssize;\n+  const GFC_REAL_10 *sptr;\n+  /* p.* indicates the pad array.  */\n+  index_type pcount[GFC_MAX_DIMENSIONS];\n+  index_type pextent[GFC_MAX_DIMENSIONS];\n+  index_type pstride[GFC_MAX_DIMENSIONS];\n+  index_type pdim;\n+  index_type psize;\n+  const GFC_REAL_10 *pptr;\n+\n+  const GFC_REAL_10 *src;\n+  int n;\n+  int dim;\n+\n+  if (source->dim[0].stride == 0)\n+    source->dim[0].stride = 1;\n+  if (shape->dim[0].stride == 0)\n+    shape->dim[0].stride = 1;\n+  if (pad && pad->dim[0].stride == 0)\n+    pad->dim[0].stride = 1;\n+  if (order && order->dim[0].stride == 0)\n+    order->dim[0].stride = 1;\n+\n+  if (ret->data == NULL)\n+    {\n+      rdim = shape->dim[0].ubound - shape->dim[0].lbound + 1;\n+      rs = 1;\n+      for (n=0; n < rdim; n++)\n+\t{\n+\t  ret->dim[n].lbound = 0;\n+\t  rex = shape->data[n * shape->dim[0].stride];\n+\t  ret->dim[n].ubound =  rex - 1;\n+\t  ret->dim[n].stride = rs;\n+\t  rs *= rex;\n+\t}\n+      ret->offset = 0;\n+      ret->data = internal_malloc_size ( rs * sizeof (GFC_REAL_10));\n+      ret->dtype = (source->dtype & ~GFC_DTYPE_RANK_MASK) | rdim;\n+    }\n+  else\n+    {\n+      rdim = GFC_DESCRIPTOR_RANK (ret);\n+      if (ret->dim[0].stride == 0)\n+\tret->dim[0].stride = 1;\n+    }\n+\n+  rsize = 1;\n+  for (n = 0; n < rdim; n++)\n+    {\n+      if (order)\n+        dim = order->data[n * order->dim[0].stride] - 1;\n+      else\n+        dim = n;\n+\n+      rcount[n] = 0;\n+      rstride[n] = ret->dim[dim].stride;\n+      rextent[n] = ret->dim[dim].ubound + 1 - ret->dim[dim].lbound;\n+\n+      if (rextent[n] != shape->data[dim * shape->dim[0].stride])\n+        runtime_error (\"shape and target do not conform\");\n+\n+      if (rsize == rstride[n])\n+        rsize *= rextent[n];\n+      else\n+        rsize = 0;\n+      if (rextent[n] <= 0)\n+        return;\n+    }\n+\n+  sdim = GFC_DESCRIPTOR_RANK (source);\n+  ssize = 1;\n+  for (n = 0; n < sdim; n++)\n+    {\n+      scount[n] = 0;\n+      sstride[n] = source->dim[n].stride;\n+      sextent[n] = source->dim[n].ubound + 1 - source->dim[n].lbound;\n+      if (sextent[n] <= 0)\n+        abort ();\n+\n+      if (ssize == sstride[n])\n+        ssize *= sextent[n];\n+      else\n+        ssize = 0;\n+    }\n+\n+  if (pad)\n+    {\n+      pdim = GFC_DESCRIPTOR_RANK (pad);\n+      psize = 1;\n+      for (n = 0; n < pdim; n++)\n+        {\n+          pcount[n] = 0;\n+          pstride[n] = pad->dim[n].stride;\n+          pextent[n] = pad->dim[n].ubound + 1 - pad->dim[n].lbound;\n+          if (pextent[n] <= 0)\n+            abort ();\n+          if (psize == pstride[n])\n+            psize *= pextent[n];\n+          else\n+            psize = 0;\n+        }\n+      pptr = pad->data;\n+    }\n+  else\n+    {\n+      pdim = 0;\n+      psize = 1;\n+      pptr = NULL;\n+    }\n+\n+  if (rsize != 0 && ssize != 0 && psize != 0)\n+    {\n+      rsize *= sizeof (GFC_REAL_10);\n+      ssize *= sizeof (GFC_REAL_10);\n+      psize *= sizeof (GFC_REAL_10);\n+      reshape_packed ((char *)ret->data, rsize, (char *)source->data,\n+\t\t      ssize, pad ? (char *)pad->data : NULL, psize);\n+      return;\n+    }\n+  rptr = ret->data;\n+  src = sptr = source->data;\n+  rstride0 = rstride[0];\n+  sstride0 = sstride[0];\n+\n+  while (rptr)\n+    {\n+      /* Select between the source and pad arrays.  */\n+      *rptr = *src;\n+      /* Advance to the next element.  */\n+      rptr += rstride0;\n+      src += sstride0;\n+      rcount[0]++;\n+      scount[0]++;\n+      /* Advance to the next destination element.  */\n+      n = 0;\n+      while (rcount[n] == rextent[n])\n+        {\n+          /* When we get to the end of a dimension, reset it and increment\n+             the next dimension.  */\n+          rcount[n] = 0;\n+          /* We could precalculate these products, but this is a less\n+             frequently used path so proabably not worth it.  */\n+          rptr -= rstride[n] * rextent[n];\n+          n++;\n+          if (n == rdim)\n+            {\n+              /* Break out of the loop.  */\n+              rptr = NULL;\n+              break;\n+            }\n+          else\n+            {\n+              rcount[n]++;\n+              rptr += rstride[n];\n+            }\n+        }\n+      /* Advance to the next source element.  */\n+      n = 0;\n+      while (scount[n] == sextent[n])\n+        {\n+          /* When we get to the end of a dimension, reset it and increment\n+             the next dimension.  */\n+          scount[n] = 0;\n+          /* We could precalculate these products, but this is a less\n+             frequently used path so proabably not worth it.  */\n+          src -= sstride[n] * sextent[n];\n+          n++;\n+          if (n == sdim)\n+            {\n+              if (sptr && pad)\n+                {\n+                  /* Switch to the pad array.  */\n+                  sptr = NULL;\n+                  sdim = pdim;\n+                  for (dim = 0; dim < pdim; dim++)\n+                    {\n+                      scount[dim] = pcount[dim];\n+                      sextent[dim] = pextent[dim];\n+                      sstride[dim] = pstride[dim];\n+                      sstride0 = sstride[0];\n+                    }\n+                }\n+              /* We now start again from the beginning of the pad array.  */\n+              src = pptr;\n+              break;\n+            }\n+          else\n+            {\n+              scount[n]++;\n+              src += sstride[n];\n+            }\n+        }\n+    }\n+}\n+\n+#endif"}, {"sha": "9a588b841236bfcf5aad7fd059d7f2cc96b3e408", "filename": "libgfortran/generated/transpose_r10.c", "status": "added", "additions": 104, "deletions": 0, "changes": 104, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Fgenerated%2Ftranspose_r10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Fgenerated%2Ftranspose_r10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Ftranspose_r10.c?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -0,0 +1,104 @@\n+/* Implementation of the TRANSPOSE intrinsic\n+   Copyright 2003, 2005 Free Software Foundation, Inc.\n+   Contributed by Tobias Schl\ufffdter\n+\n+This file is part of the GNU Fortran 95 runtime library (libgfortran).\n+\n+Libgfortran is free software; you can redistribute it and/or\n+modify it under the terms of the GNU General Public\n+License as published by the Free Software Foundation; either\n+version 2 of the License, or (at your option) any later version.\n+\n+In addition to the permissions in the GNU General Public License, the\n+Free Software Foundation gives you unlimited permission to link the\n+compiled version of this file into combinations with other programs,\n+and to distribute those combinations without any restriction coming\n+from the use of this file.  (The General Public License restrictions\n+do apply in other respects; for example, they cover modification of\n+the file, and distribution when not linked into a combine\n+executable.)\n+\n+Libgfortran is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public\n+License along with libgfortran; see the file COPYING.  If not,\n+write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,\n+Boston, MA 02110-1301, USA.  */\n+\n+#include \"config.h\"\n+#include <assert.h>\n+#include \"libgfortran.h\"\n+\n+#if defined (HAVE_GFC_REAL_10)\n+\n+extern void transpose_r10 (gfc_array_r10 * const restrict ret, \n+\tgfc_array_r10 * const restrict source);\n+export_proto(transpose_r10);\n+\n+void\n+transpose_r10 (gfc_array_r10 * const restrict ret, \n+\tgfc_array_r10 * const restrict source)\n+{\n+  /* r.* indicates the return array.  */\n+  index_type rxstride, rystride;\n+  GFC_REAL_10 *rptr;\n+  /* s.* indicates the source array.  */\n+  index_type sxstride, systride;\n+  const GFC_REAL_10 *sptr;\n+\n+  index_type xcount, ycount;\n+  index_type x, y;\n+\n+  assert (GFC_DESCRIPTOR_RANK (source) == 2);\n+\n+  if (ret->data == NULL)\n+    {\n+      assert (GFC_DESCRIPTOR_RANK (ret) == 2);\n+      assert (ret->dtype == source->dtype);\n+\n+      ret->dim[0].lbound = 0;\n+      ret->dim[0].ubound = source->dim[1].ubound - source->dim[1].lbound;\n+      ret->dim[0].stride = 1;\n+\n+      ret->dim[1].lbound = 0;\n+      ret->dim[1].ubound = source->dim[0].ubound - source->dim[0].lbound;\n+      ret->dim[1].stride = ret->dim[0].ubound+1;\n+\n+      ret->data = internal_malloc_size (sizeof (GFC_REAL_10) * size0 ((array_t *) ret));\n+      ret->offset = 0;\n+    }\n+\n+  if (ret->dim[0].stride == 0)\n+    ret->dim[0].stride = 1;\n+  if (source->dim[0].stride == 0)\n+    source->dim[0].stride = 1;\n+\n+  sxstride = source->dim[0].stride;\n+  systride = source->dim[1].stride;\n+  xcount = source->dim[0].ubound + 1 - source->dim[0].lbound;\n+  ycount = source->dim[1].ubound + 1 - source->dim[1].lbound;\n+\n+  rxstride = ret->dim[0].stride;\n+  rystride = ret->dim[1].stride;\n+\n+  rptr = ret->data;\n+  sptr = source->data;\n+\n+  for (y=0; y < ycount; y++)\n+    {\n+      for (x=0; x < xcount; x++)\n+        {\n+          *rptr = *sptr;\n+\n+          sptr += sxstride;\n+          rptr += rystride;\n+        }\n+        sptr += systride - (sxstride * xcount);\n+        rptr += rxstride - (rystride * xcount);\n+    }\n+}\n+\n+#endif"}, {"sha": "950962113b05555a53552baa2eeb719c03acc8fa", "filename": "libgfortran/m4/iparm.m4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Fm4%2Fiparm.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647/libgfortran%2Fm4%2Fiparm.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fm4%2Fiparm.m4?ref=9a0fb43ea1f6aabf4668d4ad3faf76c2da4d8647", "patch": "@@ -30,4 +30,4 @@ define(rtype_qual,`_'rtype_kind)dnl\n define(atype_max, atype_name`_HUGE')dnl\n define(atype_min, `-'atype_max)dnl\n define(name, regexp(regexp(file, `[^/]*$', `\\&'), `^\\([^_]*\\)_', `\\1'))dnl\n-define(rtype_ccode,ifelse(rtype_letter,`c',rtype_code,rtype_kind))dnl\n+define(rtype_ccode,ifelse(rtype_letter,`i',rtype_kind,rtype_code))dnl"}]}