{"sha": "d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ3N2QxZmVkYWE0ODFiMmZlNzRhNjE2ZGQ3NTliMWFkYzdiMmY5ZA==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2010-05-26T21:46:22Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2010-05-26T21:46:22Z"}, "message": "explow.c (set_stack_check_libfunc): Adjust to accept name as a string instead of SYMBOL_REF rtx.\n\ngcc/ChangeLog:\n\t* explow.c (set_stack_check_libfunc): Adjust to accept name as a\n\tstring instead of SYMBOL_REF rtx.\n\t* rtl.h (set_stack_check_libfunc): Move prototype from here...\n\t* libfuncs.h: ...to here.  Adjust for explow.c change.\n\nada/ChangeLog:\n\t* gcc-interface/trans.c: Do not include rtl.h, insclude libfuncs.h.\n\t(gigi): Adjust call to set_stack_check_libfunc.\n\nFrom-SVN: r159900", "tree": {"sha": "ad7259ce24747dd2921ce430e66c80cabba90848", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad7259ce24747dd2921ce430e66c80cabba90848"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/comments", "author": null, "committer": null, "parents": [{"sha": "6484716cf617de9bf0fbca8d1003fbc30898acc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6484716cf617de9bf0fbca8d1003fbc30898acc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6484716cf617de9bf0fbca8d1003fbc30898acc0"}], "stats": {"total": 28, "additions": 21, "deletions": 7}, "files": [{"sha": "9e5cdce42a13207a665adea1c9b1a21da48c38f0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "patch": "@@ -1,3 +1,10 @@\n+2010-05-26  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* explow.c (set_stack_check_libfunc): Adjust to accept name as a\n+\tstring instead of SYMBOL_REF rtx.\n+\t* rtl.h (set_stack_check_libfunc): Move prototype from here...\n+\t* libfuncs.h: ...to here.  Adjust for explow.c change.\n+\n 2010-05-26  Joseph Myers  <joseph@codesourcery.com>\n \n \t* pretty-print.c: Don't include ggc.h."}, {"sha": "d3493fcc3673652dea008a531bf8296c232035f1", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "patch": "@@ -1,3 +1,8 @@\n+2010-05-26  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* gcc-interface/trans.c: Do not include rtl.h, insclude libfuncs.h.\n+\t(gigi): Adjust call to set_stack_check_libfunc.\n+\n 2010-05-26  Steven Bosscher  <steven@gcc.gnu.org>\n \n \t* gcc-interface/utils.c: Do not include rtl.h."}, {"sha": "4c17462a7a64fb38d15638dc1c623669974cd8a9", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "patch": "@@ -29,11 +29,9 @@\n #include \"tm.h\"\n #include \"tree.h\"\n #include \"flags.h\"\n-#include \"rtl.h\"\t/* FIXME: For set_stack_check_libfunc and\n-\t\t\t   gen_rtx_SYMBOL_REF -- here is a front end\n-\t\t\t   still trying to generate RTL!  */\n #include \"ggc.h\"\n #include \"output.h\"\n+#include \"libfuncs.h\"\t/* For set_stack_check_libfunc.  */\n #include \"tree-iterator.h\"\n #include \"gimple.h\"\n \n@@ -313,7 +311,7 @@ gigi (Node_Id gnat_root, int max_gnat_node, int number_name ATTRIBUTE_UNUSED,\n \n   /* Enable GNAT stack checking method if needed */\n   if (!Stack_Check_Probes_On_Target)\n-    set_stack_check_libfunc (gen_rtx_SYMBOL_REF (Pmode, \"_gnat_stack_check\"));\n+    set_stack_check_libfunc (\"_gnat_stack_check\");\n \n   /* Retrieve alignment settings.  */\n   double_float_alignment = get_target_double_float_alignment ();"}, {"sha": "40b3a6ef424ca49c47929626985fb980715bb0c2", "filename": "gcc/explow.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Fexplow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Fexplow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexplow.c?ref=d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "patch": "@@ -33,6 +33,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"function.h\"\n #include \"expr.h\"\n #include \"optabs.h\"\n+#include \"libfuncs.h\"\n #include \"hard-reg-set.h\"\n #include \"insn-config.h\"\n #include \"ggc.h\"\n@@ -1346,9 +1347,10 @@ allocate_dynamic_stack_space (rtx size, rtx target, int known_align)\n static GTY(()) rtx stack_check_libfunc;\n \n void\n-set_stack_check_libfunc (rtx libfunc)\n+set_stack_check_libfunc (const char *libfunc_name)\n {\n-  stack_check_libfunc = libfunc;\n+  gcc_assert (stack_check_libfunc == NULL_RTX);\n+  stack_check_libfunc = gen_rtx_SYMBOL_REF (Pmode, libfunc_name);\n }\n \f\n /* Emit one stack probe at ADDRESS, an address within the stack.  */"}, {"sha": "9916d2f94f0664059065961963dfe78261b5782e", "filename": "gcc/libfuncs.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Flibfuncs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Flibfuncs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibfuncs.h?ref=d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "patch": "@@ -71,4 +71,7 @@ extern GTY(()) rtx libfunc_table[LTI_MAX];\n \n #define gcov_flush_libfunc\t(libfunc_table[LTI_gcov_flush])\n \n+/* In explow.c */\n+extern void set_stack_check_libfunc (const char *);\n+\n #endif /* GCC_LIBFUNCS_H */"}, {"sha": "f9e63735f8643e5767e4be2028ffaa83f5f15d92", "filename": "gcc/rtl.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d477d1fedaa481b2fe74a616dd759b1adc7b2f9d/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=d477d1fedaa481b2fe74a616dd759b1adc7b2f9d", "patch": "@@ -1548,7 +1548,6 @@ extern int currently_expanding_to_rtl;\n extern int ceil_log2 (unsigned HOST_WIDE_INT);\n \n /* In explow.c */\n-extern void set_stack_check_libfunc (rtx);\n extern HOST_WIDE_INT trunc_int_for_mode\t(HOST_WIDE_INT, enum machine_mode);\n extern rtx plus_constant (rtx, HOST_WIDE_INT);\n "}]}