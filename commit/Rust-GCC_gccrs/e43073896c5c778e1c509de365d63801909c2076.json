{"sha": "e43073896c5c778e1c509de365d63801909c2076", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQzMDczODk2YzVjNzc4ZTFjNTA5ZGUzNjVkNjM4MDE5MDljMjA3Ng==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2017-04-04T15:25:21Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2017-04-04T15:25:21Z"}, "message": "* semantics.c (finish_template_type): Check CLASSTYPE_TEMPLATE_INFO.\n\nFrom-SVN: r246680", "tree": {"sha": "f874399fb49c2311cecbec842532e4d9dabb15da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f874399fb49c2311cecbec842532e4d9dabb15da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e43073896c5c778e1c509de365d63801909c2076", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e43073896c5c778e1c509de365d63801909c2076", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e43073896c5c778e1c509de365d63801909c2076", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e43073896c5c778e1c509de365d63801909c2076/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "15f12d9677a4f8284578d03003fca4a6b78cc6d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15f12d9677a4f8284578d03003fca4a6b78cc6d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15f12d9677a4f8284578d03003fca4a6b78cc6d4"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "a28dcb5c6386b7a5ac03b8321544cc5b47272893", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e43073896c5c778e1c509de365d63801909c2076/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e43073896c5c778e1c509de365d63801909c2076/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e43073896c5c778e1c509de365d63801909c2076", "patch": "@@ -1,3 +1,7 @@\n+2017-04-03  Jason Merrill  <jason@redhat.com>\n+\n+\t* semantics.c (finish_template_type): Check CLASSTYPE_TEMPLATE_INFO.\n+\n 2017-04-03  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* class.c (update_vtable_entry_for_fn): Fix typo in comment."}, {"sha": "0a695008ada950e60a2d298146165e70df33ae4b", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e43073896c5c778e1c509de365d63801909c2076/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e43073896c5c778e1c509de365d63801909c2076/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=e43073896c5c778e1c509de365d63801909c2076", "patch": "@@ -3157,6 +3157,7 @@ finish_template_type (tree name, tree args, int entering_scope)\n   if (flag_concepts\n       && entering_scope\n       && CLASS_TYPE_P (type)\n+      && CLASSTYPE_TEMPLATE_INFO (type)\n       && dependent_type_p (type)\n       && PRIMARY_TEMPLATE_P (CLASSTYPE_TI_TEMPLATE (type)))\n     type = fixup_template_type (type);"}, {"sha": "611a89608bc9abe75ddda7e7fb2058ac10362c48", "filename": "gcc/testsuite/g++.dg/concepts/regress/alias-decl-42.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e43073896c5c778e1c509de365d63801909c2076/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fregress%2Falias-decl-42.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e43073896c5c778e1c509de365d63801909c2076/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fregress%2Falias-decl-42.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fregress%2Falias-decl-42.C?ref=e43073896c5c778e1c509de365d63801909c2076", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/59200\n+// { dg-options \"-std=c++1z -fconcepts\" }\n+\n+struct A\n+{\n+  static constexpr bool value = true;\n+};\n+\n+template<typename T>\n+struct B\n+{\n+  template<typename U>\n+    using C = A;\n+};\n+\n+template<typename T>\n+template<typename U>\n+  const bool B<T>::C<U>::value;  // { dg-error \"too many\" }"}]}