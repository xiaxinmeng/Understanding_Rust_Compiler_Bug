{"sha": "5f54710465b16155cffaa7934e29533cd2d21292", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWY1NDcxMDQ2NWIxNjE1NWNmZmFhNzkzNGUyOTUzM2NkMmQyMTI5Mg==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2011-07-13T18:46:44Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2011-07-13T18:46:44Z"}, "message": "PR 49296 List read, EOF without preceding separator\n\n2011-07-13  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR libfortran/49296\n\t* io/list_read.c (read_logical): Don't error out if a valid value\n\tis followed by EOF instead of a normal separator.\n\t(read_integer): Likewise.\n\ntestsuite:\n\n2011-07-13  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR libfortran/49296\n\t* gfortran.dg/read_list_eof_1.f90: Add tests for integer, real,\n\tand logical reads.\n\nFrom-SVN: r176245", "tree": {"sha": "e79f00855ec05f85b621ccd763a2676cc70806e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e79f00855ec05f85b621ccd763a2676cc70806e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f54710465b16155cffaa7934e29533cd2d21292", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f54710465b16155cffaa7934e29533cd2d21292", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f54710465b16155cffaa7934e29533cd2d21292", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f54710465b16155cffaa7934e29533cd2d21292/comments", "author": null, "committer": null, "parents": [{"sha": "9e34e53f8e2c0379411d643790e0587038d922cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e34e53f8e2c0379411d643790e0587038d922cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e34e53f8e2c0379411d643790e0587038d922cf"}], "stats": {"total": 63, "additions": 54, "deletions": 9}, "files": [{"sha": "f6fd7f0ebb11c6a034f48126807751e0532cba8f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f54710465b16155cffaa7934e29533cd2d21292/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f54710465b16155cffaa7934e29533cd2d21292/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5f54710465b16155cffaa7934e29533cd2d21292", "patch": "@@ -1,3 +1,9 @@\n+2011-07-13  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR libfortran/49296\n+\t* gfortran.dg/read_list_eof_1.f90: Add tests for integer, real,\n+\tand logical reads.\n+\n 2011-07-13  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* gcc.c-torture/execute/990127-2.x: Use -mpc64 on i?86-*-darwin*,"}, {"sha": "c33bc2e092e308c8e92579440787b651cbe005c7", "filename": "gcc/testsuite/gfortran.dg/read_list_eof_1.f90", "status": "modified", "additions": 35, "deletions": 3, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f54710465b16155cffaa7934e29533cd2d21292/gcc%2Ftestsuite%2Fgfortran.dg%2Fread_list_eof_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f54710465b16155cffaa7934e29533cd2d21292/gcc%2Ftestsuite%2Fgfortran.dg%2Fread_list_eof_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fread_list_eof_1.f90?ref=5f54710465b16155cffaa7934e29533cd2d21292", "patch": "@@ -3,7 +3,11 @@\n program read_list_eof_1\n   implicit none\n   character(len=100) :: s\n-  call genfil ()\n+  integer :: ii\n+  real :: rr\n+  logical :: ll\n+\n+  call genfil ('a')\n   open (unit=20, file='read.dat', form='FORMATTED', action='READ', &\n        status='OLD')\n   read (20, fmt=*) s\n@@ -12,11 +16,39 @@ program read_list_eof_1\n      call abort ()\n   end if\n \n+  call genfil ('1')\n+  open (unit=20, file='read.dat', form='FORMATTED', action='READ', &\n+       status='OLD')\n+  read (20, fmt=*) ii\n+  close (20, status='delete')\n+  if (ii /= 1) then\n+     call abort ()\n+  end if\n+\n+  call genfil ('1.5')\n+  open (unit=20, file='read.dat', form='FORMATTED', action='READ', &\n+       status='OLD')\n+  read (20, fmt=*) rr\n+  close (20, status='delete')\n+  if (rr /= 1.5) then\n+     call abort ()\n+  end if\n+\n+  call genfil ('T')\n+  open (unit=20, file='read.dat', form='FORMATTED', action='READ', &\n+       status='OLD')\n+  read (20, fmt=*) ll\n+  close (20, status='delete')\n+  if (.not. ll) then\n+     call abort ()\n+  end if\n+\n contains\n-  subroutine genfil\n+  subroutine genfil(str)\n+    character(len=*), intent(in) :: str\n     open(10, file='read.dat', form='unformatted', action='write', &\n          status='replace', access='stream')\n-    write(10) 'a'\n+    write(10) str\n     close(10)\n   end subroutine genfil\n end program read_list_eof_1"}, {"sha": "b66f300aca1da77c7e7041a81ab6041c005f00d3", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f54710465b16155cffaa7934e29533cd2d21292/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f54710465b16155cffaa7934e29533cd2d21292/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=5f54710465b16155cffaa7934e29533cd2d21292", "patch": "@@ -1,3 +1,10 @@\n+2011-07-13  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR libfortran/49296\n+\t* io/list_read.c (read_logical): Don't error out if a valid value\n+\tis followed by EOF instead of a normal separator.\n+\t(read_integer): Likewise.\n+\n 2011-07-09  Tobias Burnus  <burnus@net-b.de>\n \n \t* runtime/error.c (sys_abort): Change argument list"}, {"sha": "c88f23293a33770109551f5698d11b7e3d4c2b2f", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f54710465b16155cffaa7934e29533cd2d21292/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f54710465b16155cffaa7934e29533cd2d21292/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=5f54710465b16155cffaa7934e29533cd2d21292", "patch": "@@ -657,22 +657,20 @@ read_logical (st_parameter_dt *dtp, int length)\n     {\n     case 't':\n       v = 1;\n-      if ((c = next_char (dtp)) == EOF)\n-\tgoto bad_logical;\n+      c = next_char (dtp);\n       l_push_char (dtp, c);\n \n-      if (!is_separator(c))\n+      if (!is_separator(c) && c != EOF)\n \tgoto possible_name;\n \n       unget_char (dtp, c);\n       break;\n     case 'f':\n       v = 0;\n-      if ((c = next_char (dtp)) == EOF)\n-\tgoto bad_logical;\n+      c = next_char (dtp);\n       l_push_char (dtp, c);\n \n-      if (!is_separator(c))\n+      if (!is_separator(c) && c != EOF)\n \tgoto possible_name;\n \n       unget_char (dtp, c);\n@@ -837,6 +835,7 @@ read_integer (st_parameter_dt *dtp, int length)\n \t  goto repeat;\n \n \tCASE_SEPARATORS:\t/* Not a repeat count.  */\n+\tcase EOF:\n \t  goto done;\n \n \tdefault:\n@@ -886,6 +885,7 @@ read_integer (st_parameter_dt *dtp, int length)\n \t  break;\n \n \tCASE_SEPARATORS:\n+\tcase EOF:\n \t  goto done;\n \n \tdefault:"}]}