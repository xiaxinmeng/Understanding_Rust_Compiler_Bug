{"sha": "17fd8a87a4d92cd98089525cbc562ed3beed7937", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTdmZDhhODdhNGQ5MmNkOTgwODk1MjVjYmM1NjJlZDNiZWVkNzkzNw==", "commit": {"author": {"name": "Chris Demetriou", "email": "cgd@broadcom.com", "date": "2001-01-24T03:04:36Z"}, "committer": {"name": "Chris Demetriou", "email": "cgd@gcc.gnu.org", "date": "2001-01-24T03:04:36Z"}, "message": "exception_support.cc (__terminate_func): Remove declaration.\n\n2001-01-23  Chris Demetriou  <cgd@broadcom.com>\n\n        * libsupc++/exception_support.cc (__terminate_func): Remove\n        declaration.\n        (__terminate_func_ptr): New typedef.\n        (__terminate, __terminate_set_func): New extern function\n        prototypes.\n        (std::terminate): Use __terminate function.\n        (std::set_terminate): Use __terminate_set_func function.\n\nFrom-SVN: r39226", "tree": {"sha": "70da71ec8af01c0840f46936eacc52b672bf9383", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70da71ec8af01c0840f46936eacc52b672bf9383"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17fd8a87a4d92cd98089525cbc562ed3beed7937", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17fd8a87a4d92cd98089525cbc562ed3beed7937", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17fd8a87a4d92cd98089525cbc562ed3beed7937", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17fd8a87a4d92cd98089525cbc562ed3beed7937/comments", "author": null, "committer": null, "parents": [{"sha": "93982b798a0be88625f6d46a27714e9afbbb7f42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93982b798a0be88625f6d46a27714e9afbbb7f42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93982b798a0be88625f6d46a27714e9afbbb7f42"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "e962f278e017088bfb715d1cdc172467a23a074f", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17fd8a87a4d92cd98089525cbc562ed3beed7937/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17fd8a87a4d92cd98089525cbc562ed3beed7937/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=17fd8a87a4d92cd98089525cbc562ed3beed7937", "patch": "@@ -1,3 +1,13 @@\n+2001-01-23  Chris Demetriou  <cgd@broadcom.com>\n+\n+\t* libsupc++/exception_support.cc (__terminate_func): Remove\n+\tdeclaration.\n+\t(__terminate_func_ptr): New typedef.\n+\t(__terminate, __terminate_set_func): New extern function\n+\tprototypes.\n+\t(std::terminate): Use __terminate function.\n+\t(std::set_terminate): Use __terminate_set_func function.\n+\n 2001-01-23  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* configure.target: Just use os_include_dir always."}, {"sha": "3f82a1a3d92b6855e2e730fb9ddfc5b7ff718eca", "filename": "libstdc++-v3/libsupc++/exception_support.cc", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17fd8a87a4d92cd98089525cbc562ed3beed7937/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception_support.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17fd8a87a4d92cd98089525cbc562ed3beed7937/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception_support.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2Fexception_support.cc?ref=17fd8a87a4d92cd98089525cbc562ed3beed7937", "patch": "@@ -39,13 +39,17 @@\n /* Define terminate, unexpected, set_terminate, set_unexpected as\n    well as the default terminate func and default unexpected func.  */\n \n-extern std::terminate_handler __terminate_func __attribute__((__noreturn__));\n+/* __terminate and __terminate_set_func, defined in libgcc2. */\n+typedef void (*__terminate_func_ptr)(void) __attribute__ ((__noreturn__));\n+extern \"C\" void __terminate (void) __attribute__ ((__noreturn__));\n+extern \"C\" __terminate_func_ptr __terminate_set_func (__terminate_func_ptr);\n+\n using std::terminate;\n \n void\n std::terminate ()\n {\n-  __terminate_func ();\n+  __terminate ();\n }\n \n void\n@@ -60,10 +64,7 @@ static std::unexpected_handler __unexpected_func __attribute__((__noreturn__))\n std::terminate_handler\n std::set_terminate (std::terminate_handler func) throw()\n {\n-  std::terminate_handler old = __terminate_func;\n-\n-  __terminate_func = func;\n-  return old;\n+  return __terminate_set_func (func);\n }\n \n std::unexpected_handler"}]}