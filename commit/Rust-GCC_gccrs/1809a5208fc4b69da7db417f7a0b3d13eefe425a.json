{"sha": "1809a5208fc4b69da7db417f7a0b3d13eefe425a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTgwOWE1MjA4ZmM0YjY5ZGE3ZGI0MTdmN2EwYjNkMTNlZWZlNDI1YQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2007-05-23T01:17:14Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2007-05-23T01:17:14Z"}, "message": "re PR middle-end/31095 (ICE in expand_expr_real_1, at expr.c:8786)\n\n2007-05-22  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR middle-end/31095\n         * builtins.c (expand_builtin_memmove_args): Strip nops that don't\n        change the type before looking for a COMPOUND_EXPR.\n\n2007-05-22  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR middle-end/31095\n        * gcc.c-torture/compile/bcopy-1.c: New testcase.\n\nFrom-SVN: r124975", "tree": {"sha": "e79a8d1f6407c9a676099a06ac11ea25052d70bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e79a8d1f6407c9a676099a06ac11ea25052d70bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1809a5208fc4b69da7db417f7a0b3d13eefe425a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1809a5208fc4b69da7db417f7a0b3d13eefe425a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1809a5208fc4b69da7db417f7a0b3d13eefe425a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1809a5208fc4b69da7db417f7a0b3d13eefe425a/comments", "author": null, "committer": null, "parents": [{"sha": "6a57dd4f384524a11369fbb0a6dc54ea07c45e3b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a57dd4f384524a11369fbb0a6dc54ea07c45e3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a57dd4f384524a11369fbb0a6dc54ea07c45e3b"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "c882b1e54bbf69a08e250de4e67bce6629dc439b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1809a5208fc4b69da7db417f7a0b3d13eefe425a", "patch": "@@ -1,3 +1,9 @@\n+2007-05-22  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR middle-end/31095\n+\t * builtins.c (expand_builtin_memmove_args): Strip nops that don't\n+\tchange the type before looking for a COMPOUND_EXPR.\n+\n 2007-05-22  Ian Lance Taylor  <iant@google.com>\n \n \t* lower-subreg.c (decompose_multiword_subregs): If we change an"}, {"sha": "80f89788632f697d80a62bf85db63fe933907fb9", "filename": "gcc/builtins.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=1809a5208fc4b69da7db417f7a0b3d13eefe425a", "patch": "@@ -3485,6 +3485,7 @@ expand_builtin_memmove_args (tree dest, tree src, tree len,\n \n   if (result)\n     {\n+      STRIP_TYPE_NOPS (result);\n       while (TREE_CODE (result) == COMPOUND_EXPR)\n \t{\n \t  expand_expr (TREE_OPERAND (result, 0), const0_rtx, VOIDmode,"}, {"sha": "bf555817b5b60d023b190c5b3e0291c8f2f3b6bf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1809a5208fc4b69da7db417f7a0b3d13eefe425a", "patch": "@@ -1,3 +1,8 @@\n+2007-05-22  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR middle-end/31095\n+\t* gcc.c-torture/compile/bcopy-1.c: New testcase.\n+\n 2007-05-22  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR middle-end/31606"}, {"sha": "5d3a882c8677f125eecf50c2e7f57c7d018a10f7", "filename": "gcc/testsuite/gcc.c-torture/compile/bcopy-1.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fbcopy-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1809a5208fc4b69da7db417f7a0b3d13eefe425a/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fbcopy-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fbcopy-1.c?ref=1809a5208fc4b69da7db417f7a0b3d13eefe425a", "patch": "@@ -0,0 +1,14 @@\n+/* PR middle-end/31095, expand_builtin_memmove_args forgot to take into\n+   account that tree folding of builtins can add an extra NOP_EXPR.   */\n+\n+struct timeval\n+{\n+  int tv_sec;\n+  int tv_usec;\n+};\n+void\n+capture_next_packet (void)\n+{\n+  struct timeval past, now, then;\n+  __builtin_bcopy (&then, &past, sizeof (then));\n+}"}]}