{"sha": "00c714edd62e0bb54959ecde206eba8722d6735a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBjNzE0ZWRkNjJlMGJiNTQ5NTllY2RlMjA2ZWJhODcyMmQ2NzM1YQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2005-03-16T11:47:38Z"}, "committer": {"name": "Dorit Nuzman", "email": "dorit@gcc.gnu.org", "date": "2005-03-16T11:47:38Z"}, "message": "tree-vect-analyze.c (vect_enhance_data_refs_alignment): Copy UNITS_PER_SIMD_WORD to a local variable to avoid a \"division by zero\" error.\n\n        * tree-vect-analyze.c (vect_enhance_data_refs_alignment): Copy\n        UNITS_PER_SIMD_WORD to a local variable to avoid a \"division by zero\"\n        error.\n\nCo-Authored-By: Dorit Naishlos <dorit@il.ibm.com>\n\nFrom-SVN: r96552", "tree": {"sha": "44129ea79537bff2bac935ce4ae073eed0368a02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44129ea79537bff2bac935ce4ae073eed0368a02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00c714edd62e0bb54959ecde206eba8722d6735a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00c714edd62e0bb54959ecde206eba8722d6735a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00c714edd62e0bb54959ecde206eba8722d6735a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00c714edd62e0bb54959ecde206eba8722d6735a/comments", "author": null, "committer": null, "parents": [{"sha": "b0ea9c011d246200641ca2d085a0337d8b2af0ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0ea9c011d246200641ca2d085a0337d8b2af0ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0ea9c011d246200641ca2d085a0337d8b2af0ef"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "7c520a274f49d8d6d9e6355cf4c4e2a26983c684", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c714edd62e0bb54959ecde206eba8722d6735a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c714edd62e0bb54959ecde206eba8722d6735a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=00c714edd62e0bb54959ecde206eba8722d6735a", "patch": "@@ -1,3 +1,10 @@\n+2005-03-16  Steven Bosscher  <stevenb@suse.de>\n+            Dorit Naishlos  <dorit@il.ibm.com>\n+\n+\t* tree-vect-analyze.c (vect_enhance_data_refs_alignment): Copy \n+\tUNITS_PER_SIMD_WORD to a local variable to avoid a \"division by zero\" \n+\terror.\n+\n 2005-03-16  Steven Bosscher  <stevenb@suse.de>\n \n \t* tree-inline.c (walk_type_fields, walk_tree,"}, {"sha": "df2e88282cf03b625e9b80bb3d7bb8eeea145a88", "filename": "gcc/tree-vect-analyze.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c714edd62e0bb54959ecde206eba8722d6735a/gcc%2Ftree-vect-analyze.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c714edd62e0bb54959ecde206eba8722d6735a/gcc%2Ftree-vect-analyze.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-analyze.c?ref=00c714edd62e0bb54959ecde206eba8722d6735a", "patch": "@@ -1013,6 +1013,13 @@ vect_enhance_data_refs_alignment (loop_vec_info loop_vinfo)\n   struct data_reference *dr0 = NULL;\n   unsigned int i, j;\n \n+  /* Sigh, a hack to make targets that do not define UNITS_PER_SIMD_WORD\n+     bootstrap.  Copy UNITS_PER_SIMD_WORD to a local variable to avoid a\n+     \"division by zero\" error.  This error would be issued because we\n+     we do \"... % UNITS_PER_SIMD_WORD\" below, and UNITS_PER_SIMD_WORD\n+     defaults to 0 if it is not defined by the target.  */\n+  int units_per_simd_word = UNITS_PER_SIMD_WORD;\n+\n   /*\n      This pass will require a cost model to guide it whether to apply peeling \n      or versioning or a combination of the two. For example, the scheme that\n@@ -1167,7 +1174,7 @@ vect_enhance_data_refs_alignment (loop_vec_info loop_vinfo)\n \t\t  int drsize = GET_MODE_SIZE (TYPE_MODE (TREE_TYPE (DR_REF (dr))));\n \n \t\t  DR_MISALIGNMENT (dr) += npeel * drsize;\n-\t\t  DR_MISALIGNMENT (dr) %= UNITS_PER_SIMD_WORD;\n+\t\t  DR_MISALIGNMENT (dr) %= units_per_simd_word;\n \t\t}\n \t      else\n \t\tDR_MISALIGNMENT (dr) = -1;"}]}