{"sha": "718d3588b02c5fde3939e889c7586d71a99c4629", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE4ZDM1ODhiMDJjNWZkZTM5MzllODg5Yzc1ODZkNzFhOTljNDYyOQ==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-06-02T16:39:37Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-06-02T16:39:37Z"}, "message": "Only reset the GIMPLE_DEBUG information in the code gen of if-conversion.\n\n2010-06-02  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* tree-if-conv.c (predicate_bbs): Do not reset the GIMPLE_DEBUG\n\tinformation.\n\t(remove_conditions_and_labels): Reset the GIMPLE_DEBUG information.\n\nFrom-SVN: r160164", "tree": {"sha": "4411eed49d576497752586d1a757f535660ddcf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4411eed49d576497752586d1a757f535660ddcf0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/718d3588b02c5fde3939e889c7586d71a99c4629", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/718d3588b02c5fde3939e889c7586d71a99c4629", "html_url": "https://github.com/Rust-GCC/gccrs/commit/718d3588b02c5fde3939e889c7586d71a99c4629", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/718d3588b02c5fde3939e889c7586d71a99c4629/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5521cae9c297aa825d657b79f44097006deedfc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5521cae9c297aa825d657b79f44097006deedfc8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5521cae9c297aa825d657b79f44097006deedfc8"}], "stats": {"total": 42, "additions": 28, "deletions": 14}, "files": [{"sha": "de6cb5b76eb63cb8f2801628aecd1e819a3a7384", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/718d3588b02c5fde3939e889c7586d71a99c4629/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/718d3588b02c5fde3939e889c7586d71a99c4629/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=718d3588b02c5fde3939e889c7586d71a99c4629", "patch": "@@ -1,3 +1,9 @@\n+2010-06-02  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* tree-if-conv.c (predicate_bbs): Do not reset the GIMPLE_DEBUG\n+\tinformation.\n+\t(remove_conditions_and_labels): Reset the GIMPLE_DEBUG information.\n+\n 2010-06-02  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tPR middle-end/44363"}, {"sha": "25cb9183739822c182a031f370cac62dd0a2a9ab", "filename": "gcc/tree-if-conv.c", "status": "modified", "additions": 22, "deletions": 14, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/718d3588b02c5fde3939e889c7586d71a99c4629/gcc%2Ftree-if-conv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/718d3588b02c5fde3939e889c7586d71a99c4629/gcc%2Ftree-if-conv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-if-conv.c?ref=718d3588b02c5fde3939e889c7586d71a99c4629", "patch": "@@ -509,15 +509,7 @@ predicate_bbs (loop_p loop)\n \t    case GIMPLE_LABEL:\n \t    case GIMPLE_ASSIGN:\n \t    case GIMPLE_CALL:\n-\t      break;\n-\n \t    case GIMPLE_DEBUG:\n-\t      /* ??? Should there be conditional GIMPLE_DEBUG_BINDs?  */\n-\t      if (gimple_debug_bind_p (gsi_stmt (itr)))\n-\t\t{\n-\t\t  gimple_debug_bind_reset_value (gsi_stmt (itr));\n-\t\t  update_stmt (gsi_stmt (itr));\n-\t\t}\n \t      break;\n \n \t    case GIMPLE_COND:\n@@ -900,7 +892,8 @@ process_phi_nodes (struct loop *loop)\n }\n \n /* Remove all GIMPLE_CONDs and GIMPLE_LABELs of all the basic blocks\n-   other than the exit and latch of the LOOP.  */\n+   other than the exit and latch of the LOOP.  Also resets the\n+   GIMPLE_DEBUG information.  */\n \n static void\n remove_conditions_and_labels (loop_p loop)\n@@ -917,11 +910,26 @@ remove_conditions_and_labels (loop_p loop)\n       continue;\n \n       for (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); )\n-      if (gimple_code (gsi_stmt (gsi)) == GIMPLE_COND\n-          || gimple_code (gsi_stmt (gsi)) == GIMPLE_LABEL)\n-        gsi_remove (&gsi, true);\n-      else\n-        gsi_next (&gsi);\n+\tswitch (gimple_code (gsi_stmt (gsi)))\n+\t  {\n+\t  case GIMPLE_COND:\n+\t  case GIMPLE_LABEL:\n+\t    gsi_remove (&gsi, true);\n+\t    break;\n+\n+\t  case GIMPLE_DEBUG:\n+\t    /* ??? Should there be conditional GIMPLE_DEBUG_BINDs?  */\n+\t    if (gimple_debug_bind_p (gsi_stmt (gsi)))\n+\t      {\n+\t\tgimple_debug_bind_reset_value (gsi_stmt (gsi));\n+\t\tupdate_stmt (gsi_stmt (gsi));\n+\t      }\n+\t    gsi_next (&gsi);\n+\t    break;\n+\n+\t  default:\n+\t    gsi_next (&gsi);\n+\t  }\n     }\n }\n "}]}