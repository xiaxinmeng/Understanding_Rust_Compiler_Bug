{"sha": "1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWIwNWU4YmYzYzFjNjNjN2Q5YjA2OWU4NzZhYWRjYmEwY2VkOWE1Zg==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2005-02-23T13:56:01Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2005-02-23T13:56:01Z"}, "message": "re PR libffi/20104 (gij fails on ppc and not on x86)\n\n2005-02-23  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\tPR libffi/20104\n\t* testsuite/libffi.call/return_ll1.c: New test case.\n\nFrom-SVN: r95454", "tree": {"sha": "8fb04e97a7e356e77d32e662bbecd26a156fe379", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fb04e97a7e356e77d32e662bbecd26a156fe379"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f/comments", "author": null, "committer": null, "parents": [{"sha": "3f9f087b7a44d61335765022fcac875d4ef8b42a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f9f087b7a44d61335765022fcac875d4ef8b42a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f9f087b7a44d61335765022fcac875d4ef8b42a"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "6de6ef538bed71ddedf855abc3c20d955c03fe01", "filename": "libffi/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f", "patch": "@@ -1,3 +1,8 @@\n+2005-02-23  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\tPR libffi/20104\n+\t* testsuite/libffi.call/return_ll1.c: New test case.\n+\n 2005-02-11  Janis Johnson  <janis187@us.ibm.com>\n \n \t* testsuite/libffi.call/cls_align_longdouble.c: Remove dg-options."}, {"sha": "32fdfa122ff3a13de69808ebf5f249939921651f", "filename": "libffi/testsuite/libffi.call/return_ll1.c", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f/libffi%2Ftestsuite%2Flibffi.call%2Freturn_ll1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f/libffi%2Ftestsuite%2Flibffi.call%2Freturn_ll1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Ftestsuite%2Flibffi.call%2Freturn_ll1.c?ref=1b05e8bf3c1c63c7d9b069e876aadcba0ced9a5f", "patch": "@@ -0,0 +1,42 @@\n+/* Area:\tffi_call\n+   Purpose:\tCheck if long long are passed in the corresponding regs on ppc.\n+   Limitations:\tnone.\n+   PR:\t\t20104.\n+   Originator:\t<andreast@gcc.gnu.org> 20050222  */\n+\n+/* { dg-do run } */\n+#include \"ffitest.h\"\n+static long long return_ll(int ll0, long long ll1, int ll2)\n+{\n+  return ll0 + ll1 + ll2;\n+}\n+\n+int main (void)\n+{\n+  ffi_cif cif;\n+  ffi_type *args[MAX_ARGS];\n+  void *values[MAX_ARGS];\n+  long long rlonglong;\n+  long long ll1;\n+  unsigned ll0, ll2;\n+\n+  args[0] = &ffi_type_uint32;\n+  args[1] = &ffi_type_sint64;\n+  args[2] = &ffi_type_uint32;\n+  values[0] = &ll0;\n+  values[1] = &ll1;\n+  values[2] = &ll2;\n+\n+  /* Initialize the cif */\n+  CHECK(ffi_prep_cif(&cif, FFI_DEFAULT_ABI, 3,\n+\t\t     &ffi_type_sint64, args) == FFI_OK);\n+\n+  ll0 = 11111111;\n+  ll1 = 11111111111000LL;\n+  ll2 = 11111111;\n+\n+  ffi_call(&cif, FFI_FN(return_ll), &rlonglong, values);\n+  printf(\"res: %lld, %lld\\n\", rlonglong, ll0 + ll1 + ll2);\n+  /* { dg-output \"res: 11111133333222, 11111133333222\" } */\n+  exit(0);\n+}"}]}