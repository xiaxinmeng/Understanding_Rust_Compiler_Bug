{"sha": "3dd7094e20b214a71ed62f8044abe090b4c53b45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RkNzA5NGUyMGIyMTRhNzFlZDYyZjgwNDRhYmUwOTBiNGM1M2I0NQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2000-09-30T06:02:57Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2000-09-30T06:02:57Z"}, "message": "ltconfig, [...]: Updated from libtool multi-language branch, to work around Solaris' /bin/sh bug.\n\n* ltconfig, ltmain.sh, libtool.m4, ltcf-cxx.sh: Updated from libtool\nmulti-language branch, to work around Solaris' /bin/sh bug.  Rebuilt\nall affected `configure' scripts.\n\nFrom-SVN: r36672", "tree": {"sha": "39fdddf620fcd00b70b8c3340dbb14ac59892d80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/39fdddf620fcd00b70b8c3340dbb14ac59892d80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3dd7094e20b214a71ed62f8044abe090b4c53b45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dd7094e20b214a71ed62f8044abe090b4c53b45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3dd7094e20b214a71ed62f8044abe090b4c53b45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dd7094e20b214a71ed62f8044abe090b4c53b45/comments", "author": null, "committer": null, "parents": [{"sha": "f2fa288f03f7b71ef618b525c60dbdd7af2479aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2fa288f03f7b71ef618b525c60dbdd7af2479aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2fa288f03f7b71ef618b525c60dbdd7af2479aa"}], "stats": {"total": 2121, "additions": 1066, "deletions": 1055}, "files": [{"sha": "235ad0dca56264d1b78e6f2df46cbd02d0874c54", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd7094e20b214a71ed62f8044abe090b4c53b45/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd7094e20b214a71ed62f8044abe090b4c53b45/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=3dd7094e20b214a71ed62f8044abe090b4c53b45", "patch": "@@ -1,3 +1,9 @@\n+2000-09-30  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* ltconfig, ltmain.sh, libtool.m4, ltcf-cxx.sh: Updated from libtool\n+\tmulti-language branch, to work around Solaris' /bin/sh bug.  Rebuilt\n+\tall affected `configure' scripts.\n+\n 2000-09-26  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/mt-aix43 (NM_FOR_TARGET): Add -B bsd-style flag."}, {"sha": "5d776bcc93e9da7208555a40500b54e16c42b99c", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 966, "deletions": 965, "changes": 1931, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd7094e20b214a71ed62f8044abe090b4c53b45/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd7094e20b214a71ed62f8044abe090b4c53b45/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=3dd7094e20b214a71ed62f8044abe090b4c53b45"}, {"sha": "d732789657d8a1d6651793f8c2a74587cb5fce91", "filename": "libtool.m4", "status": "modified", "additions": 33, "deletions": 27, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd7094e20b214a71ed62f8044abe090b4c53b45/libtool.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd7094e20b214a71ed62f8044abe090b4c53b45/libtool.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libtool.m4?ref=3dd7094e20b214a71ed62f8044abe090b4c53b45", "patch": "@@ -37,12 +37,17 @@ dnl AC_LIBTOOL_GCJ immediately, otherwise, hook it in at the end of both.\n     [AC_LIBTOOL_GCJ],\n     [AC_PROVIDE_IFELSE([A][M_PROG_GCJ],\n         [AC_LIBTOOL_GCJ],\n+\t[AC_PROVIDE_IFELSE([LT_AC_PROG_GCJ],\n+\t  [AC_LIBTOOL_GCJ],\n \t[ifdef([AC_PROG_GCJ],\n \t       [define([AC_PROG_GCJ], defn([AC_PROG_GCJ])[AC_LIBTOOL_GCJ\n ])])\n \t ifdef([A][M_PROG_GCJ],\n \t       [define([A][M_PROG_GCJ], defn([A][M_PROG_GCJ])[AC_LIBTOOL_GCJ\n-])])])])])\n+])])\n+\t ifdef([LT_AC_PROG_GCJ],\n+\t       [define([LT_AC_PROG_GCJ], defn([LT_AC_PROG_GCJ])[AC_LIBTOOL_GCJ\n+])])])])])])\n \n AC_DEFUN(_AC_PROG_LIBTOOL,\n [AC_REQUIRE([AC_LIBTOOL_SETUP])dnl\n@@ -54,7 +59,7 @@ AC_CACHE_SAVE\n \n # Actually configure libtool.  ac_aux_dir is where install-sh is found.\n AR=\"$AR\" LTCC=\"$CC\" CC=\"$CC\" CFLAGS=\"$CFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n-MAGIC=\"$MAGIC\" LD=\"$LD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+MAGIC_CMD=\"$MAGIC_CMD\" LD=\"$LD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" STRIP=\"$STRIP\" \\\n AS=\"$AS\" DLLTOOL=\"$DLLTOOL\" OBJDUMP=\"$OBJDUMP\" \\\n objext=\"$OBJEXT\" exeext=\"$EXEEXT\" reload_flag=\"$reload_flag\" \\\n@@ -99,7 +104,7 @@ dnl\n # Only perform the check for file, if the check method requires it\n case \"$deplibs_check_method\" in\n file_magic*)\n-  if test \"$file_magic_cmd\" = '${MAGIC}'; then\n+  if test \"$file_magic_cmd\" = '$MAGIC_CMD'; then\n     AC_PATH_MAGIC\n   fi\n   ;;\n@@ -168,7 +173,7 @@ case \"$host\" in\n   ;;\n \n ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n-[*-*-cygwin* | *-*-mingw*)\n+[*-*-cygwin* | *-*-mingw* | *-*-pw32*)\n   AC_CHECK_TOOL(DLLTOOL, dlltool, false)\n   AC_CHECK_TOOL(AS, as, false)\n   AC_CHECK_TOOL(OBJDUMP, objdump, false)\n@@ -190,7 +195,7 @@ ifdef([AC_PROVIDE_AC_LIBTOOL_WIN32_DLL],\n     AC_CACHE_CHECK([how to link DLLs], lt_cv_cc_dll_switch,\n       [AC_TRY_LINK([], [], [lt_cv_cc_dll_switch=-mdll],[lt_cv_cc_dll_switch=-dll])])\n     CFLAGS=\"$SAVE_CFLAGS\" ;;\n-  *-*-cygwin*)\n+  *-*-cygwin* | *-*-pw32*)\n     # cygwin systems need to pass --dll to the linker, and not link\n     # crt.o which will require a WinMain@16 definition.\n     lt_cv_cc_dll_switch=\"-Wl,--dll -nostartfiles\" ;;\n@@ -317,16 +322,16 @@ pic_mode=ifelse($#,1,$1,default)])\n # AC_PATH_TOOL_PREFIX - find a file program which can recognise shared library\n AC_DEFUN(AC_PATH_TOOL_PREFIX,\n [AC_MSG_CHECKING([for $1])\n-AC_CACHE_VAL(lt_cv_path_MAGIC,\n-[case \"$MAGIC\" in\n+AC_CACHE_VAL(lt_cv_path_MAGIC_CMD,\n+[case \"$MAGIC_CMD\" in\n   /*)\n-  lt_cv_path_MAGIC=\"$MAGIC\" # Let the user override the test with a path.\n+  lt_cv_path_MAGIC_CMD=\"$MAGIC_CMD\" # Let the user override the test with a path.\n   ;;\n   ?:/*)\n-  ac_cv_path_MAGIC=\"$MAGIC\" # Let the user override the test with a dos path.\n+  lt_cv_path_MAGIC_CMD=\"$MAGIC_CMD\" # Let the user override the test with a dos path.\n   ;;\n   *)\n-  ac_save_MAGIC=\"$MAGIC\"\n+  ac_save_MAGIC_CMD=\"$MAGIC_CMD\"\n   IFS=\"${IFS=   }\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n dnl $ac_dummy forces splitting on constant user-supplied paths.\n dnl POSIX.2 word splitting is done only on the output of word expansions,\n@@ -335,12 +340,12 @@ dnl not every word.  This closes a longstanding sh security hole.\n   for ac_dir in $ac_dummy; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$1; then\n-      lt_cv_path_MAGIC=\"$ac_dir/$1\"\n+      lt_cv_path_MAGIC_CMD=\"$ac_dir/$1\"\n       if test -n \"$file_magic_test_file\"; then\n \tcase \"$deplibs_check_method\" in\n \t\"file_magic \"*)\n \t  file_magic_regex=\"`expr \\\"$deplibs_check_method\\\" : \\\"file_magic \\(.*\\)\\\"`\"\n-\t  MAGIC=\"$lt_cv_path_MAGIC\"\n+\t  MAGIC_CMD=\"$lt_cv_path_MAGIC_CMD\"\n \t  if eval $file_magic_cmd \\$file_magic_test_file 2> /dev/null |\n \t    egrep \"$file_magic_regex\" > /dev/null; then\n \t    :\n@@ -364,12 +369,12 @@ EOF\n     fi\n   done\n   IFS=\"$ac_save_ifs\"\n-  MAGIC=\"$ac_save_MAGIC\"\n+  MAGIC_CMD=\"$ac_save_MAGIC_CMD\"\n   ;;\n esac])\n-MAGIC=\"$lt_cv_path_MAGIC\"\n-if test -n \"$MAGIC\"; then\n-  AC_MSG_RESULT($MAGIC)\n+MAGIC_CMD=\"$lt_cv_path_MAGIC_CMD\"\n+if test -n \"$MAGIC_CMD\"; then\n+  AC_MSG_RESULT($MAGIC_CMD)\n else\n   AC_MSG_RESULT(no)\n fi\n@@ -380,11 +385,11 @@ fi\n AC_DEFUN(AC_PATH_MAGIC,\n [AC_REQUIRE([AC_CHECK_TOOL_PREFIX])dnl\n AC_PATH_TOOL_PREFIX(${ac_tool_prefix}file, /usr/bin:$PATH)\n-if test -z \"$lt_cv_path_MAGIC\"; then\n+if test -z \"$lt_cv_path_MAGIC_CMD\"; then\n   if test -n \"$ac_tool_prefix\"; then\n     AC_PATH_TOOL_PREFIX(file, /usr/bin:$PATH)\n   else\n-    MAGIC=:\n+    MAGIC_CMD=:\n   fi\n fi\n ])\n@@ -492,7 +497,7 @@ test -n \"$reload_flag\" && reload_flag=\" $reload_flag\"\n AC_DEFUN(AC_DEPLIBS_CHECK_METHOD,\n [AC_CACHE_CHECK([how to recognise dependant libraries],\n lt_cv_deplibs_check_method,\n-[lt_cv_file_magic_cmd='${MAGIC}'\n+[lt_cv_file_magic_cmd='$MAGIC_CMD'\n lt_cv_file_magic_test_file=\n lt_cv_deplibs_check_method='unknown'\n # Need to set the preceding variable on all platforms that support\n@@ -523,9 +528,9 @@ bsdi4*)\n   lt_cv_file_magic_test_file=/shlib/libc.so\n   ;;\n \n-cygwin* | mingw*)\n+cygwin* | mingw* |pw32*)\n   lt_cv_deplibs_check_method='file_magic file format pei*-i386(.*architecture: i386)?'\n-  lt_cv_file_magic_cmd='${OBJDUMP} -f'\n+  lt_cv_file_magic_cmd='$OBJDUMP -f'\n   ;;\n \n freebsd* )\n@@ -682,7 +687,7 @@ AC_DEFUN(AC_CHECK_LIBM,\n [AC_REQUIRE([AC_CANONICAL_HOST])dnl\n LIBM=\n case \"$host\" in\n-*-*-beos* | *-*-cygwin*)\n+*-*-beos* | *-*-cygwin* | *-*-pw32*)\n   # These system don't have libm\n   ;;\n *-ncr-sysv4.3*)\n@@ -765,7 +770,7 @@ lt_save_CFLAGS=\"$CFLAGS\"\n dnl Make sure LTCC is set to the C compiler, i.e. set LTCC before CC\n dnl is set to the C++ compiler.\n AR=\"$AR\" LTCC=\"$CC\" CC=\"$CXX\" CXX=\"$CXX\" CFLAGS=\"$CXXFLAGS\" CPPFLAGS=\"$CPPFLAGS\" \\\n-MAGIC=\"$MAGIC\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+MAGIC_CMD=\"$MAGIC_CMD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" STRIP=\"$STRIP\" \\\n AS=\"$AS\" DLLTOOL=\"$DLLTOOL\" OBJDUMP=\"$OBJDUMP\" \\\n objext=\"$OBJEXT\" exeext=\"$EXEEXT\" reload_flag=\"$reload_flag\" \\\n@@ -788,16 +793,17 @@ AC_DEFUN(_AC_LIBTOOL_GCJ,\n [AC_REQUIRE([AC_PROG_LIBTOOL])\n AC_PROVIDE_IFELSE([AC_PROG_GCJ],[],\n   [AC_PROVIDE_IFELSE([A][M_PROG_GCJ],[],\n-    [ifdef([AC_PROG_GCJ],[AC_REQUIRE([AC_PROG_GCJ])],\n-       [ifdef([A][M_PROG_GCJ],[AC_REQUIRE([A][M_PROG_GCJ])],\n-         [AC_REQUIRE([A][C_PROG_GCJ_OR_A][M_PROG_GCJ])])])])])\n+    [AC_PROVIDE_IFELSE([LT_AC_PROG_GCJ],[],\n+      [ifdef([AC_PROG_GCJ],[AC_REQUIRE([AC_PROG_GCJ])],\n+         [ifdef([A][M_PROG_GCJ],[AC_REQUIRE([A][M_PROG_GCJ])],\n+           [AC_REQUIRE([A][C_PROG_GCJ_OR_A][M_PROG_GCJ])])])])])])\n LIBTOOL_DEPS=$LIBTOOL_DEPS\" $ac_aux_dir/ltcf-gcj.sh\"\n lt_save_CC=\"$CC\"\n lt_save_CFLAGS=\"$CFLAGS\"\n dnl Make sure LTCC is set to the C compiler, i.e. set LTCC before CC\n dnl is set to the C++ compiler.\n AR=\"$AR\" LTCC=\"$CC\" CC=\"$GCJ\" CFLAGS=\"$GCJFLAGS\" CPPFLAGS=\"\" \\\n-MAGIC=\"$MAGIC\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n+MAGIC_CMD=\"$MAGIC_CMD\" LDFLAGS=\"$LDFLAGS\" LIBS=\"$LIBS\" \\\n LN_S=\"$LN_S\" NM=\"$NM\" RANLIB=\"$RANLIB\" STRIP=\"$STRIP\" \\\n AS=\"$AS\" DLLTOOL=\"$DLLTOOL\" OBJDUMP=\"$OBJDUMP\" \\\n objext=\"$OBJEXT\" exeext=\"$EXEEXT\" reload_flag=\"$reload_flag\" \\"}, {"sha": "c134a4294864fca39e6a7804dc4de4b8c13a4862", "filename": "ltcf-cxx.sh", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd7094e20b214a71ed62f8044abe090b4c53b45/ltcf-cxx.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd7094e20b214a71ed62f8044abe090b4c53b45/ltcf-cxx.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltcf-cxx.sh?ref=3dd7094e20b214a71ed62f8044abe090b4c53b45", "patch": "@@ -298,8 +298,7 @@ case \"$host_os\" in\n     esac   \n     ;;\n   netbsd*)\n-    # FIXME: insert proper C++ library support\n-    ld_shlibs=no\n+    # NetBSD uses g++ - do we need to do anything?\n     ;;\n   osf3*)\n     if test \"$with_gcc\" = yes && test \"$with_gnu_ld\" = no; then"}, {"sha": "fb0bf8b8b181b785402a541da2b61c08c77bb0e7", "filename": "ltconfig", "status": "modified", "additions": 46, "deletions": 47, "changes": 93, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd7094e20b214a71ed62f8044abe090b4c53b45/ltconfig", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd7094e20b214a71ed62f8044abe090b4c53b45/ltconfig", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltconfig?ref=3dd7094e20b214a71ed62f8044abe090b4c53b45", "patch": "@@ -181,7 +181,7 @@ progname=`$echo \"X$0\" | $Xsed -e 's%^.*/%%'`\n PROGRAM=ltconfig\n PACKAGE=libtool\n VERSION=1.4a\n-TIMESTAMP=\" (1.641.2.111 2000/09/05 10:29:18)\"\n+TIMESTAMP=\" (1.641.2.122 2000/09/30 05:27:52)\"\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n rm=\"rm -f\"\n@@ -273,7 +273,7 @@ old_CFLAGS=\"$CFLAGS\"\n old_CPPFLAGS=\"$CPPFLAGS\"\n old_LDFLAGS=\"$LDFLAGS\"\n old_LIBS=\"$LIBS\"\n-old_MAGIC=\"$MAGIC\"\n+old_MAGIC_CMD=\"$MAGIC_CMD\"\n old_LD=\"$LD\"\n old_LN_S=\"$LN_S\"\n old_LTCC=\"$LTCC\"\n@@ -640,7 +640,7 @@ test -z \"$AR_FLAGS\" && AR_FLAGS=cru\n test -z \"$AS\" && AS=as\n test -z \"$CC\" && CC=cc\n test -z \"$DLLTOOL\" && DLLTOOL=dlltool\n-test -z \"$MAGIC\" && MAGIC=file\n+test -z \"$MAGIC_CMD\" && MAGIC_CMD=file\n test -z \"$LD\" && LD=ld\n test -z \"$LN_S\" && LN_S=\"ln -s\"\n test -z \"$NM\" && NM=nm\n@@ -983,7 +983,7 @@ bsdi4*)\n   # libtool to hard-code these into programs\n   ;;\n \n-cygwin* | mingw*)\n+cygwin* | mingw* | pw32*)\n   version_type=windows\n   need_version=no\n   need_lib_prefix=no\n@@ -1115,14 +1115,13 @@ netbsd*)\n     finish_cmds='PATH=\"\\$PATH:/sbin\" ldconfig -m $libdir'\n     dynamic_linker='NetBSD (a.out) ld.so'\n   else\n-    deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'\n-    file_magic_cmd=/usr/bin/file\n-    file_magic_test_file=`echo /usr/lib/libc.so*`\n     library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major ${libname}${release}.so ${libname}.so'\n     soname_spec='${libname}${release}.so$major'\n     dynamic_linker='NetBSD ld.elf_so'\n   fi\n   shlibpath_var=LD_LIBRARY_PATH\n+  shlibpath_overrides_runpath=yes\n+  hardcode_into_libs=yes\n   ;;\n \n openbsd*)\n@@ -1256,7 +1255,7 @@ case \"$host_os\" in\n aix*)\n   symcode='[BCDT]'\n   ;;\n-cygwin* | mingw*)\n+cygwin* | mingw* | pw32*)\n   symcode='[ABCDGISTW]'\n   ;;\n hpux*) # Its linker distinguishes data from code symbols\n@@ -1307,11 +1306,11 @@ void nm_test_func(){}\n main(){nm_test_var='a';nm_test_func();return(0);}\n EOF\n \n-  echo \"$progname:1310: checking if global_symbol_pipe works\" >&5\n-  if { (eval echo $progname:1311: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; } && test -s conftest.$objext; then\n+  echo \"$progname:1309: checking if global_symbol_pipe works\" >&5\n+  if { (eval echo $progname:1310: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; } && test -s conftest.$objext; then\n     # Now try to grab the symbols.\n     nlist=conftest.nm\n-    if { echo \"$progname:1314: eval \\\"$NM conftest.$objext | $global_symbol_pipe > $nlist\\\"\" >&5; eval \"$NM conftest.$objext | $global_symbol_pipe > $nlist 2>&5\"; } && test -s \"$nlist\"; then\n+    if { echo \"$progname:1313: eval \\\"$NM conftest.$objext | $global_symbol_pipe > $nlist\\\"\" >&5; eval \"$NM conftest.$objext | $global_symbol_pipe > $nlist 2>&5\"; } && test -s \"$nlist\"; then\n \n       # Try sorting and uniquifying the output.\n       if sort \"$nlist\" | uniq > \"$nlist\"T; then\n@@ -1363,7 +1362,7 @@ EOF\n \t  save_CFLAGS=\"$CFLAGS\"\n \t  LIBS=\"conftstm.$objext\"\n \t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n-\t  if { (eval echo $progname:1366: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+\t  if { (eval echo $progname:1365: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n \t    pipe_works=yes\n \t  else\n \t    echo \"$progname: failed program was:\" >&5\n@@ -1408,7 +1407,7 @@ echo \"checking if libtool supports shared libraries... $can_build_shared\" 1>&6\n # Only try to build win32 dlls if AC_LIBTOOL_WIN32_DLL was used in\n # configure.in, otherwise build static only libraries.\n case \"$host_os\" in\n-cygwin* | mingw* | os2*)\n+cygwin* | mingw* | pw32* | os2*)\n   if test x$can_build_shared = xyes; then\n     test x$enable_win32_dll = xno && can_build_shared=no\n     echo \"checking if package supports dlls... $can_build_shared\" 1>&6\n@@ -1467,14 +1466,14 @@ else\n if test \"X${lt_cv_dlopen+set}\" != Xset; then\n   lt_cv_dlopen=no lt_cv_dlopen_libs=\n echo $ac_n \"checking for dlopen in -ldl\"\"... $ac_c\" 1>&6\n-echo \"$progname:1470: checking for dlopen in -ldl\" >&5\n+echo \"$progname:1469: checking for dlopen in -ldl\" >&5\n if test \"X${ac_cv_lib_dl_dlopen+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1477 \"ltconfig\"\n+#line 1476 \"ltconfig\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n     builtin and then its argument prototype would still apply.  */\n@@ -1487,7 +1486,7 @@ int main() {\n dlopen()\n ; return 0; }\n EOF\n-if { (eval echo $progname:1490: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo $progname:1489: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_lib_dl_dlopen=yes\n else\n@@ -1506,12 +1505,12 @@ if test \"X$ac_cv_lib_dl_dlopen\" = Xyes; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for dlopen\"\"... $ac_c\" 1>&6\n-echo \"$progname:1509: checking for dlopen\" >&5\n+echo \"$progname:1508: checking for dlopen\" >&5\n if test \"X${ac_cv_func_dlopen+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1514 \"ltconfig\"\n+#line 1513 \"ltconfig\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char dlopen(); below.  */\n #include <assert.h>\n@@ -1536,7 +1535,7 @@ dlopen();\n \n ; return 0; }\n EOF\n-if { (eval echo $progname:1539: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo $progname:1538: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_dlopen=yes\n else\n@@ -1553,14 +1552,14 @@ if test \"X$ac_cv_func_dlopen\" = Xyes; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for dlopen in -lsvld\"\"... $ac_c\" 1>&6\n-echo \"$progname:1556: checking for dlopen in -lsvld\" >&5\n+echo \"$progname:1555: checking for dlopen in -lsvld\" >&5\n if test \"X${ac_cv_lib_svld_dlopen+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsvld  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1563 \"ltconfig\"\n+#line 1562 \"ltconfig\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n     builtin and then its argument prototype would still apply.  */\n@@ -1573,7 +1572,7 @@ int main() {\n dlopen()\n ; return 0; }\n EOF\n-if { (eval echo $progname:1576: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo $progname:1575: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_lib_svld_dlopen=yes\n else\n@@ -1592,14 +1591,14 @@ if test \"X$ac_cv_lib_svld_dlopen\" = Xyes; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for dld_link in -ldld\"\"... $ac_c\" 1>&6\n-echo \"$progname:1595: checking for dld_link in -ldld\" >&5\n+echo \"$progname:1594: checking for dld_link in -ldld\" >&5\n if test \"X${ac_cv_lib_dld_dld_link+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldld  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1602 \"ltconfig\"\n+#line 1601 \"ltconfig\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n     builtin and then its argument prototype would still apply.  */\n@@ -1612,7 +1611,7 @@ int main() {\n dld_link()\n ; return 0; }\n EOF\n-if { (eval echo $progname:1615: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo $progname:1614: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_lib_dld_dld_link=yes\n else\n@@ -1631,12 +1630,12 @@ if test \"X$ac_cv_lib_dld_dld_link\" = Xyes; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for shl_load\"\"... $ac_c\" 1>&6\n-echo \"$progname:1634: checking for shl_load\" >&5\n+echo \"$progname:1633: checking for shl_load\" >&5\n if test \"X${ac_cv_func_shl_load+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1639 \"ltconfig\"\n+#line 1638 \"ltconfig\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char shl_load(); below.  */\n #include <assert.h>\n@@ -1661,7 +1660,7 @@ shl_load();\n \n ; return 0; }\n EOF\n-if { (eval echo $progname:1664: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo $progname:1663: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_shl_load=yes\n else\n@@ -1679,14 +1678,14 @@ if test \"X$ac_cv_func_shl_load\" = Xyes; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for shl_load in -ldld\"\"... $ac_c\" 1>&6\n-echo \"$progname:1682: checking for shl_load in -ldld\" >&5\n+echo \"$progname:1681: checking for shl_load in -ldld\" >&5\n if test \"X${ac_cv_lib_dld_shl_load+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldld  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1689 \"ltconfig\"\n+#line 1688 \"ltconfig\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1700,7 +1699,7 @@ int main() {\n shl_load()\n ; return 0; }\n EOF\n-if { (eval echo $progname:1703: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo $progname:1702: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_lib_dld_shl_load=yes\n else\n@@ -1747,18 +1746,18 @@ fi\n for ac_hdr in dlfcn.h; do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"$progname:1750: checking for $ac_hdr\" >&5\n+echo \"$progname:1749: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo 'X$''{'ac_cv_header_$ac_safe'+set}'`\\\" = Xset\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1755 \"ltconfig\"\n+#line 1754 \"ltconfig\"\n #include <$ac_hdr>\n int fnord = 0;\n int main () { return(0); }\n EOF\n ac_try=\"$ac_compile >/dev/null 2>conftest.out\"\n-{ (eval echo $progname:1761: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo $progname:1760: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1786,15 +1785,15 @@ done\n     LIBS=\"$lt_cv_dlopen_libs $LIBS\"\n \n   echo $ac_n \"checking whether a program can dlopen itself\"\"... $ac_c\" 1>&6\n-echo \"$progname:1789: checking whether a program can dlopen itself\" >&5\n+echo \"$progname:1788: checking whether a program can dlopen itself\" >&5\n if test \"X${lt_cv_dlopen_self+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n     lt_cv_dlopen_self=cross\n   else\n-    cat > conftest.c <<EOF\n-#line 1797 \"ltconfig\"\n+    cat > conftest.$ac_ext <<EOF\n+#line 1796 \"ltconfig\"\n \n #if HAVE_DLFCN_H\n #include <dlfcn.h>\n@@ -1840,7 +1839,7 @@ main() { void *self, *ptr1, *ptr2; self=dlopen(0,LTDL_GLOBAL|LTDL_LAZY_OR_NOW);\n                if(ptr1 || ptr2) { dlclose(self); exit(0); } } exit(1); }\n \n EOF\n-if { (eval echo $progname:1843: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo $progname:1842: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   lt_cv_dlopen_self=yes\n else\n@@ -1859,15 +1858,15 @@ echo \"$ac_t\"\"$lt_cv_dlopen_self\" 1>&6\n   if test \"$lt_cv_dlopen_self\" = yes; then\n     LDFLAGS=\"$LDFLAGS $link_static_flag\"\n   echo $ac_n \"checking whether a statically linked program can dlopen itself\"\"... $ac_c\" 1>&6\n-echo \"$progname:1862: checking whether a statically linked program can dlopen itself\" >&5\n+echo \"$progname:1861: checking whether a statically linked program can dlopen itself\" >&5\n if test \"X${lt_cv_dlopen_self_static+set}\" = Xset; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n     lt_cv_dlopen_self_static=cross\n   else\n-    cat > conftest.c <<EOF\n-#line 1870 \"ltconfig\"\n+    cat > conftest.$ac_ext <<EOF\n+#line 1869 \"ltconfig\"\n \n #if HAVE_DLFCN_H\n #include <dlfcn.h>\n@@ -1913,7 +1912,7 @@ main() { void *self, *ptr1, *ptr2; self=dlopen(0,LTDL_GLOBAL|LTDL_LAZY_OR_NOW);\n     if(ptr1 || ptr2) { dlclose(self); exit(0); } } exit(1); }\n \n EOF\n-if { (eval echo $progname:1916: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo $progname:1915: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   lt_cv_dlopen_self_static=yes\n else\n@@ -1958,7 +1957,7 @@ case \"$ltmain\" in\n *.sh)\n   # Now quote all the things that may contain metacharacters.\n   for var in ltecho old_AR old_AR_FLAGS old_CC old_LTCC old_CFLAGS old_CPPFLAGS \\\n-    old_MAGIC old_LD old_LDFLAGS old_LIBS \\\n+    old_MAGIC_CMD old_LD old_LDFLAGS old_LIBS \\\n     old_LN_S old_NM old_RANLIB old_STRIP \\\n     old_AS old_DLLTOOL old_OBJDUMP \\\n     old_OBJEXT old_EXEEXT old_reload_flag \\\n@@ -2056,7 +2055,7 @@ EOF\n *)\n   # Double-quote the variables that need it (for aesthetics).\n   for var in old_AR old_AR_FLAGS old_CC old_LTCC old_CFLAGS old_CPPFLAGS \\\n-    old_MAGIC old_LD old_LDFLAGS old_LIBS \\\n+    old_MAGIC_CMD old_LD old_LDFLAGS old_LIBS \\\n     old_LN_S old_NM old_RANLIB old_STRIP \\\n     old_AS old_DLLTOOL old_OBJDUMP \\\n     old_OBJEXT old_EXEEXT old_reload_flag \\\n@@ -2088,7 +2087,7 @@ cat <<EOF >> \"$cfgfile\"\n #\n # AR=$old_AR AR_FLAGS=$old_AR_FLAGS LTCC=$old_LTCC CC=$old_CC \\\\\n # CFLAGS=$old_CFLAGS CPPFLAGS=$old_CPPFLAGS \\\\\n-# MAGIC=$old_MAGIC LD=$old_LD LDFLAGS=$old_LDFLAGS LIBS=$old_LIBS \\\\\n+# MAGIC_CMD=$old_MAGIC_CMD LD=$old_LD LDFLAGS=$old_LDFLAGS LIBS=$old_LIBS \\\\\n # LN_S=$old_LN_S NM=$old_NM RANLIB=$old_RANLIB STRIP=$old_STRIP \\\\\n # AS=$old_AS DLLTOOL=$old_DLLTOOL OBJDUMP=$old_OBJDUMP \\\\\n # objext=$old_OBJEXT exeext=$old_EXEEXT reload_flag=$old_reload_flag \\\\\n@@ -2150,7 +2149,7 @@ NM=$NM\n STRIP=$STRIP\n \n # Used to examine libraries when file_magic_cmd begins \"file\"\n-MAGIC=$MAGIC\n+MAGIC_CMD=$MAGIC_CMD\n \n # Used on cygwin: DLL creation program.\n DLLTOOL=\"$DLLTOOL\"\n@@ -2391,7 +2390,7 @@ EOF\n       ;;\n     esac\n     case \"$host\" in\n-    *-*-cygwin* | *-*-mingw* | *-*-os2*)\n+    *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)\n       cat <<'EOF' >> \"$ofile\"\n       # This is a source program that is used to create dlls on Windows\n       # Don't remove nor modify the starting and closing comments"}, {"sha": "554c82a1d9569db0b4fd5c5edbe73b68b248b254", "filename": "ltmain.sh", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3dd7094e20b214a71ed62f8044abe090b4c53b45/ltmain.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3dd7094e20b214a71ed62f8044abe090b4c53b45/ltmain.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltmain.sh?ref=3dd7094e20b214a71ed62f8044abe090b4c53b45", "patch": "@@ -55,7 +55,7 @@ modename=\"$progname\"\n PROGRAM=ltmain.sh\n PACKAGE=libtool\n VERSION=1.4a\n-TIMESTAMP=\" (1.641.2.111 2000/09/05 10:29:18)\"\n+TIMESTAMP=\" (1.641.2.122 2000/09/30 05:27:52)\"\n \n default_mode=\n help=\"Try \\`$progname --help' for more information.\"\n@@ -545,7 +545,7 @@ if test -z \"$show_help\"; then\n \n     # On Cygwin there's no \"real\" PIC flag so we must build both object types\n     case \"$host_os\" in\n-    cygwin* | mingw* | os2*)\n+    cygwin* | mingw* | pw32* | os2*)\n       pic_mode=default\n       ;;\n     esac\n@@ -557,7 +557,7 @@ if test -z \"$show_help\"; then\n     # Calculate the filename of the output object if compiler does\n     # not support -o with -c\n     if test \"$compiler_c_o\" = no; then\n-      output_obj=`$echo \"X$srcfile\" | $Xsed -e 's%^.*/%%' -e 's%\\..*$%%'`.${objext}\n+      output_obj=`$echo \"X$srcfile\" | $Xsed -e 's%^.*/%%' -e 's%\\.[^.]*$%%'`.${objext}\n       lockfile=\"$output_obj.lock\"\n       removelist=\"$removelist $output_obj $lockfile\"\n       trap \"$run $rm $removelist; exit 1\" 1 2 15\n@@ -778,7 +778,7 @@ EOF\n   link | relink)\n     modename=\"$modename: link\"\n     case \"$host\" in\n-    *-*-cygwin* | *-*-mingw* | *-*-os2*)\n+    *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)\n       # It is impossible to link a dll without this setting, and\n       # we shouldn't force the makefile maintainer to figure out\n       # which system we are compiling for in order to pass an extra\n@@ -1080,7 +1080,7 @@ EOF\n \t  ;;\n \tesac\n \tcase \"$host\" in\n-\t*-*-cygwin* | *-*-mingw* | *-*-os2*)\n+\t*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)\n \t  case \":$dllsearchpath:\" in\n \t  *\":$dir:\"*) ;;\n \t  *) dllsearchpath=\"$dllsearchpath:$dir\";;\n@@ -1093,14 +1093,14 @@ EOF\n       -l*)\n \tif test \"$arg\" = \"-lc\"; then\n \t  case \"$host\" in\n-\t  *-*-cygwin* | *-*-mingw* | *-*-os2* | *-*-beos*)\n+\t  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2* | *-*-beos*)\n \t    # These systems don't actually have c library (as such)\n \t    continue\n \t    ;;\n \t  esac\n \telif test \"$arg\" = \"-lm\"; then\n \t  case \"$host\" in\n-\t  *-*-cygwin* | *-*-beos*)\n+\t  *-*-cygwin* | *-*-pw32* | *-*-beos*)\n \t    # These systems don't actually have math library (as such)\n \t    continue\n \t    ;;\n@@ -1122,7 +1122,7 @@ EOF\n \n       -no-install)\n \tcase \"$host\" in\n-\t*-*-cygwin* | *-*-mingw* | *-*-os2*)\n+\t*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)\n \t  # The PATH hackery in wrapper scripts is required on Windows\n \t  # in order for the loader to find any dlls it needs.\n \t  $echo \"$modename: warning: \\`-no-install' is ignored for $host\" 1>&2\n@@ -2481,10 +2481,10 @@ EOF\n \t  ;;\n \n \twindows)\n-\t  # Like Linux, but with '-' rather than '.', since we only\n-\t  # want one extension on Windows 95.\n+\t  # Use '-' rather than '.', since we only want one\n+\t  # extension on DOS 8.3 filesystems.\n \t  major=`expr $current - $age`\n-\t  versuffix=\"-$major-$age-$revision\"\n+\t  versuffix=\"-$major\"\n \t  ;;\n \n \t*)\n@@ -2599,7 +2599,7 @@ EOF\n       if test \"$build_libtool_libs\" = yes; then\n \tif test -n \"$rpath\"; then\n \t  case \"$host\" in\n-\t  *-*-cygwin* | *-*-mingw* | *-*-os2* | *-*-beos*)\n+\t  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2* | *-*-beos*)\n \t    # these systems don't actually have a c library (as such)!\n \t    ;;\n \t  *)\n@@ -3251,7 +3251,7 @@ EOF\n \t  esac\n \tfi\n \tcase \"$host\" in\n-\t*-*-cygwin* | *-*-mingw* | *-*-os2*)\n+\t*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)\n \t  case \":$dllsearchpath:\" in\n \t  *\":$libdir:\"*) ;;\n \t  *) dllsearchpath=\"$dllsearchpath:$libdir\";;\n@@ -3785,7 +3785,7 @@ else\n \tcase $host in\n \t# win32 systems need to use the prog path for dll\n \t# lookup to work\n-\t*-*-cygwin*)\n+\t*-*-cygwin* | *-*-pw32*)\n \t  $echo >> $output \"\\\n       exec \\$progdir/\\$program \\${1+\\\"\\$@\\\"}\n \""}]}