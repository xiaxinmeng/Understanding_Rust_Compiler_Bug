{"sha": "826eb7eda5726246f689f035ca699ca053cd59e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODI2ZWI3ZWRhNTcyNjI0NmY2ODlmMDM1Y2E2OTljYTA1M2NkNTllOA==", "commit": {"author": {"name": "Jan Beulich", "email": "jbeulich@novell.com", "date": "2005-01-10T07:42:49Z"}, "committer": {"name": "Jan Beulich", "email": "jbeulich@gcc.gnu.org", "date": "2005-01-10T07:42:49Z"}, "message": "ia64.c (ia64_in_small_data_p): Also handle the section names resulting from...\n\ngcc/\n2005-01-10  Jan Beulich  <jbeulich@novell.com>\n\n\t* config/ia64/ia64.c (ia64_in_small_data_p): Also handle the section\n\tnames resulting from -ffunction-sections/-fdata-sections and linkonce\n\tones.\n\t* varasm.c (default_section_type_flags_1): Also set SECTION_SMALL\n\tbased on the section name. Rearrange the section name comparison logic\n\tslightly so that each section name is compared against at most once.\n\nFrom-SVN: r93134", "tree": {"sha": "fced80c2a496c4ea07beb0cbf7ca0354ff3a2d06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fced80c2a496c4ea07beb0cbf7ca0354ff3a2d06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/826eb7eda5726246f689f035ca699ca053cd59e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/826eb7eda5726246f689f035ca699ca053cd59e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/826eb7eda5726246f689f035ca699ca053cd59e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/826eb7eda5726246f689f035ca699ca053cd59e8/comments", "author": null, "committer": null, "parents": [{"sha": "bc29943ee9bc2a7b709f73a1d2a86ce078052db2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc29943ee9bc2a7b709f73a1d2a86ce078052db2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc29943ee9bc2a7b709f73a1d2a86ce078052db2"}], "stats": {"total": 45, "additions": 35, "deletions": 10}, "files": [{"sha": "b263b69b20a58a7872d54c60c0eb92da3aa12ee7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/826eb7eda5726246f689f035ca699ca053cd59e8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/826eb7eda5726246f689f035ca699ca053cd59e8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=826eb7eda5726246f689f035ca699ca053cd59e8", "patch": "@@ -1,3 +1,12 @@\n+2005-01-10  Jan Beulich  <jbeulich@novell.com>\n+\n+\t* config/ia64/ia64.c (ia64_in_small_data_p): Also handle the section\n+\tnames resulting from -ffunction-sections/-fdata-sections and linkonce\n+\tones.\n+\t* varasm.c (default_section_type_flags_1): Also set SECTION_SMALL\n+\tbased on the section name. Rearrange the section name comparison logic\n+\tslightly so that each section name is compared against at most once.\n+\n 2005-01-10  Ben Elliston  <bje@au.ibm.com>\n \n \t* doc/invoke.texi (Code Gen Options): Add PowerPC to the list of"}, {"sha": "98ce550dcc29cbdbceaf7279c5b61aa81a52d630", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/826eb7eda5726246f689f035ca699ca053cd59e8/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/826eb7eda5726246f689f035ca699ca053cd59e8/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=826eb7eda5726246f689f035ca699ca053cd59e8", "patch": "@@ -7682,8 +7682,13 @@ ia64_in_small_data_p (tree exp)\n   if (TREE_CODE (exp) == VAR_DECL && DECL_SECTION_NAME (exp))\n     {\n       const char *section = TREE_STRING_POINTER (DECL_SECTION_NAME (exp));\n+\n       if (strcmp (section, \".sdata\") == 0\n-\t  || strcmp (section, \".sbss\") == 0)\n+\t  || strncmp (section, \".sdata.\", 7) == 0\n+\t  || strncmp (section, \".gnu.linkonce.s.\", 16) == 0\n+\t  || strcmp (section, \".sbss\") == 0\n+\t  || strncmp (section, \".sbss.\", 6) == 0\n+\t  || strncmp (section, \".gnu.linkonce.sb.\", 17) == 0)\n \treturn true;\n     }\n   else"}, {"sha": "086e9cc001b7f6ff5872041da082c477f9e0c9f0", "filename": "gcc/varasm.c", "status": "modified", "additions": 20, "deletions": 9, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/826eb7eda5726246f689f035ca699ca053cd59e8/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/826eb7eda5726246f689f035ca699ca053cd59e8/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=826eb7eda5726246f689f035ca699ca053cd59e8", "patch": "@@ -4606,20 +4606,31 @@ default_section_type_flags_1 (tree decl, const char *name, int reloc,\n \n   if (strcmp (name, \".bss\") == 0\n       || strncmp (name, \".bss.\", 5) == 0\n-      || strncmp (name, \".gnu.linkonce.b.\", 16) == 0\n-      || strcmp (name, \".sbss\") == 0\n-      || strncmp (name, \".sbss.\", 6) == 0\n-      || strncmp (name, \".gnu.linkonce.sb.\", 17) == 0\n-      || strcmp (name, \".tbss\") == 0\n-      || strncmp (name, \".gnu.linkonce.tb.\", 17) == 0)\n+      || strncmp (name, \".gnu.linkonce.b.\", 16) == 0)\n     flags |= SECTION_BSS;\n \n+  if (strcmp (name, \".sdata\") == 0\n+      || strncmp (name, \".sdata.\", 7) == 0\n+      || strncmp (name, \".gnu.linkonce.s.\", 16) == 0\n+      || strncmp (name, \".sdata2.\", 8) == 0\n+      || strncmp (name, \".gnu.linkonce.s2.\", 17) == 0)\n+    flags |= SECTION_SMALL;\n+\n+  if (strcmp (name, \".sbss\") == 0\n+      || strncmp (name, \".sbss.\", 6) == 0\n+      || strncmp (name, \".gnu.linkonce.sb.\", 17) == 0)\n+    flags |= SECTION_SMALL | SECTION_BSS;\n+\n   if (strcmp (name, \".tdata\") == 0\n-      || strcmp (name, \".tbss\") == 0\n-      || strncmp (name, \".gnu.linkonce.td.\", 17) == 0\n-      || strncmp (name, \".gnu.linkonce.tb.\", 17) == 0)\n+      || strncmp (name, \".tdata.\", 7) == 0\n+      || strncmp (name, \".gnu.linkonce.td.\", 17) == 0)\n     flags |= SECTION_TLS;\n \n+  if (strcmp (name, \".tbss\") == 0\n+      || strncmp (name, \".tbss.\", 6) == 0\n+      || strncmp (name, \".gnu.linkonce.tb.\", 17) == 0)\n+    flags |= SECTION_TLS | SECTION_BSS;\n+\n   /* These three sections have special ELF types.  They are neither\n      SHT_PROGBITS nor SHT_NOBITS, so when changing sections we don't\n      want to print a section type (@progbits or @nobits).  If someone"}]}