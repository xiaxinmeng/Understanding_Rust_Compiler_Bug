{"sha": "e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTIyMTNlZmI5ZDVmY2YxZGIzZmUzNWQwOGE4MjdjODJmY2NiZDZhNw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1999-01-19T11:14:54Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-01-19T11:14:54Z"}, "message": "decl2.c (finish_vtable_vardecl): Make vtables comdat here.\n\n\t* decl2.c (finish_vtable_vardecl): Make vtables comdat here.\n\t(import_export_vtable): Not here.\n\nFrom-SVN: r24761", "tree": {"sha": "08fa468a483255d6e530202b0cb16cf09a920ebb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08fa468a483255d6e530202b0cb16cf09a920ebb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7/comments", "author": null, "committer": null, "parents": [{"sha": "440b3daedace65ca1cdceb3abdd1a85d1458bedc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/440b3daedace65ca1cdceb3abdd1a85d1458bedc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/440b3daedace65ca1cdceb3abdd1a85d1458bedc"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "2b3a14f8c54a132f21297fce755eca4c039f9439", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7", "patch": "@@ -1,3 +1,8 @@\n+1999-01-19  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* decl2.c (finish_vtable_vardecl): Make vtables comdat here.\n+\t(import_export_vtable): Not here.\n+\n 1999-01-18  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* typeck.c (build_component_ref): Wrap an OVERLOAD around a unique"}, {"sha": "303364453a723b8343f8e0b943f2dbfc0f844e2e", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=e2213efb9d5fcf1db3fe35d08a827c82fccbd6a7", "patch": "@@ -2473,10 +2473,6 @@ import_export_vtable (decl, type, final)\n       TREE_PUBLIC (decl) = 1;\n       DECL_EXTERNAL (decl) = ! CLASSTYPE_VTABLE_NEEDS_WRITING (type);\n       DECL_INTERFACE_KNOWN (decl) = 1;\n-\n-      /* Always make vtables weak.  */\n-      if (flag_weak)\n-\tcomdat_linkage (decl);\n     }\n   else\n     {\n@@ -2645,6 +2641,10 @@ finish_vtable_vardecl (prev, vars)\n \t  DECL_IGNORED_P (vars) = 1;\n \t}\n \n+      /* Always make vtables weak.  */\n+      if (flag_weak)\n+\tcomdat_linkage (vars);\n+\n       rest_of_decl_compilation (vars, NULL_PTR, 1, 1);\n \n       if (flag_vtable_gc)"}]}