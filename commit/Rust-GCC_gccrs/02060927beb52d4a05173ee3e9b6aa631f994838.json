{"sha": "02060927beb52d4a05173ee3e9b6aa631f994838", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDIwNjA5MjdiZWI1MmQ0YTA1MTczZWUzZTliNmFhNjMxZjk5NDgzOA==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2009-04-08T09:39:51Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2009-04-08T09:39:51Z"}, "message": "re PR c++/39637 (ICE on ill-formed sizeof(<parameter-pack>) in variadic template)\n\ngcc/cp/ChangeLog:\n2009-04-08  Dodji Seketeli  <dodji@redhat.com>\n    PR c++/39637\n    * parser.c (cp_parser_enumerator_definition): Make sure the\n    initializer of the enumerator doesn't contain any bare parameter pack.\n\ngcc/testsuite/ChangeLog\n2009-04-08  Dodji Seketeli  <dodji@redhat.com>\n    PR c++/39637\n    * g++.dg/cpp0x/variadic-crash2.C: New test.\n\nFrom-SVN: r145717", "tree": {"sha": "c4c894ea7966d75acf118ccda3d7a986916f927d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4c894ea7966d75acf118ccda3d7a986916f927d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02060927beb52d4a05173ee3e9b6aa631f994838", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02060927beb52d4a05173ee3e9b6aa631f994838", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02060927beb52d4a05173ee3e9b6aa631f994838", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02060927beb52d4a05173ee3e9b6aa631f994838/comments", "author": null, "committer": null, "parents": [{"sha": "bafc96b4a4e2bd72884217f26bcd970942231adb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bafc96b4a4e2bd72884217f26bcd970942231adb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bafc96b4a4e2bd72884217f26bcd970942231adb"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "22d1ced46dd408ab0330f1c1ba968ea4bbbae13d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=02060927beb52d4a05173ee3e9b6aa631f994838", "patch": "@@ -1,3 +1,9 @@\n+2009-04-08  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/39637\n+\t* parser.c (cp_parser_enumerator_definition): Make sure the\n+\tinitializer of the enumerator doesn't contain any bare parameter pack.\n+\n 2009-04-07  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/34691"}, {"sha": "18d62cc49ca350e05fbe9be0ad6c69aaa44b7fb5", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=02060927beb52d4a05173ee3e9b6aa631f994838", "patch": "@@ -12011,6 +12011,11 @@ cp_parser_enumerator_definition (cp_parser* parser, tree type)\n   else\n     value = NULL_TREE;\n \n+  /* If we are processing a template, make sure the initializer of the\n+     enumerator doesn't contain any bare template parameter pack.  */\n+  if (check_for_bare_parameter_packs (value))\n+    value = error_mark_node;\n+\n   /* Create the enumerator.  */\n   build_enumerator (identifier, value, type);\n }"}, {"sha": "23564bdcfb03d33051c78bffb616e6e144adb66e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=02060927beb52d4a05173ee3e9b6aa631f994838", "patch": "@@ -1,3 +1,8 @@\n+2009-04-08  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPRc++/39637\n+\t* g++.dg/cpp0x/variadic-crash2.C: New test.\n+\n 2009-04-08  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/38863"}, {"sha": "d1913b92d4584b1432b14b7a7a91636db6c7eba8", "filename": "gcc/testsuite/g++.dg/cpp0x/variadic-crash2.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic-crash2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02060927beb52d4a05173ee3e9b6aa631f994838/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic-crash2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fvariadic-crash2.C?ref=02060927beb52d4a05173ee3e9b6aa631f994838", "patch": "@@ -0,0 +1,20 @@\n+// Contributed by Dodji Seketeli <dodji@redhat.com>\n+// Origin: PR c++/39637\n+// { dg-options \"-std=gnu++0x\" }\n+// { dg-do \"compile\" }\n+\n+template<class... Types>\n+void\n+f(Types...)\n+{\n+  enum {e = sizeof(Types)}; // { dg-error \"parameter packs not expanded with '...'\" }\n+  enum {e1 = sizeof...(Types)};\n+}\n+\n+int\n+main()\n+{\n+    f(0);\n+}\n+\n+// { dg-message \"note\" \"Types\" { target *-*-* } 10 }"}]}