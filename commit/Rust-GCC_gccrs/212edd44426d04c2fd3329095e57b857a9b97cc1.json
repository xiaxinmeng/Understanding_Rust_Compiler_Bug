{"sha": "212edd44426d04c2fd3329095e57b857a9b97cc1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjEyZWRkNDQ0MjZkMDRjMmZkMzMyOTA5NWU1N2I4NTdhOWI5N2NjMQ==", "commit": {"author": {"name": "David S. Miller", "email": "davem@redhat.com", "date": "2003-10-14T00:06:52Z"}, "committer": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "2003-10-14T00:06:52Z"}, "message": "ifcvt.c (num_removed_blocks): Rename to num_true_changes.\n\n\t* ifcvt.c (num_removed_blocks): Rename to num_true_changes.\n\t(find_cond_trap): Always increment if we emit a conditional\n\ttrap insn.\n\nFrom-SVN: r72450", "tree": {"sha": "ad48c840f8a87fba15d4601eeeb5257e9b423ae6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad48c840f8a87fba15d4601eeeb5257e9b423ae6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/212edd44426d04c2fd3329095e57b857a9b97cc1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/212edd44426d04c2fd3329095e57b857a9b97cc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/212edd44426d04c2fd3329095e57b857a9b97cc1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/212edd44426d04c2fd3329095e57b857a9b97cc1/comments", "author": null, "committer": null, "parents": [{"sha": "3eba62b45d34c2bb04584f41cd6d2841f482f907", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3eba62b45d34c2bb04584f41cd6d2841f482f907", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3eba62b45d34c2bb04584f41cd6d2841f482f907"}], "stats": {"total": 33, "additions": 20, "deletions": 13}, "files": [{"sha": "81d9bd952719b896896ce6013d6a4e655564e896", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/212edd44426d04c2fd3329095e57b857a9b97cc1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/212edd44426d04c2fd3329095e57b857a9b97cc1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=212edd44426d04c2fd3329095e57b857a9b97cc1", "patch": "@@ -1,3 +1,9 @@\n+2003-10-13  David S. Miller  <davem@redhat.com>\n+\n+\t* ifcvt.c (num_removed_blocks): Rename to num_true_changes.\n+\t(find_cond_trap): Always increment if we emit a conditional\n+\ttrap insn.\n+\n 2003-10-13  Zack Weinberg  <zack@codesourcery.com>\n \n \t* Makefile.in (BUILD_RTL): Replace $(BUILD_PREFIX)insn-modes.o"}, {"sha": "21794b36aab4e5ab316a0d3cb6338156ee72ee3a", "filename": "gcc/ifcvt.c", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/212edd44426d04c2fd3329095e57b857a9b97cc1/gcc%2Fifcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/212edd44426d04c2fd3329095e57b857a9b97cc1/gcc%2Fifcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fifcvt.c?ref=212edd44426d04c2fd3329095e57b857a9b97cc1", "patch": "@@ -75,8 +75,8 @@ static int num_possible_if_blocks;\n    execution.  */\n static int num_updated_if_blocks;\n \n-/* # of basic blocks that were removed.  */\n-static int num_removed_blocks;\n+/* # of changes made which require life information to be updated.  */\n+static int num_true_changes;\n \n /* Whether conditional execution changes were made.  */\n static int cond_exec_changed_p;\n@@ -2016,7 +2016,7 @@ merge_if_block (struct ce_if_block * ce_info)\n \t  if (post_dominators)\n \t    delete_from_dominance_info (post_dominators, bb);\n \t  merge_blocks (combo_bb, bb);\n-\t  num_removed_blocks++;\n+\t  num_true_changes++;\n \t}\n       while (bb != last_test_bb);\n     }\n@@ -2033,7 +2033,7 @@ merge_if_block (struct ce_if_block * ce_info)\n       if (post_dominators)\n \tdelete_from_dominance_info (post_dominators, then_bb);\n       merge_blocks (combo_bb, then_bb);\n-      num_removed_blocks++;\n+      num_true_changes++;\n     }\n \n   /* The ELSE block, if it existed, had a label.  That label count\n@@ -2044,7 +2044,7 @@ merge_if_block (struct ce_if_block * ce_info)\n       if (post_dominators)\n \tdelete_from_dominance_info (post_dominators, else_bb);\n       merge_blocks (combo_bb, else_bb);\n-      num_removed_blocks++;\n+      num_true_changes++;\n     }\n \n   /* If there was no join block reported, that means it was not adjacent\n@@ -2101,7 +2101,7 @@ merge_if_block (struct ce_if_block * ce_info)\n       if (post_dominators)\n \tdelete_from_dominance_info (post_dominators, join_bb);\n       merge_blocks (combo_bb, join_bb);\n-      num_removed_blocks++;\n+      num_true_changes++;\n     }\n   else\n     {\n@@ -2544,6 +2544,8 @@ find_cond_trap (basic_block test_bb, edge then_edge, edge else_edge)\n   if (seq == NULL)\n     return FALSE;\n \n+  num_true_changes++;\n+\n   /* Emit the new insns before cond_earliest.  */\n   emit_insn_before_setloc (seq, cond_earliest, INSN_LOCATOR (trap));\n \n@@ -2554,7 +2556,6 @@ find_cond_trap (basic_block test_bb, edge then_edge, edge else_edge)\n       if (post_dominators)\n \tdelete_from_dominance_info (post_dominators, trap_bb);\n       delete_block (trap_bb);\n-      num_removed_blocks++;\n     }\n \n   /* If the non-trap block and the test are now adjacent, merge them.\n@@ -2753,7 +2754,7 @@ find_if_case_1 (basic_block test_bb, edge then_edge, edge else_edge)\n   /* We've possibly created jump to next insn, cleanup_cfg will solve that\n      later.  */\n \n-  num_removed_blocks++;\n+  num_true_changes++;\n   num_updated_if_blocks++;\n \n   return TRUE;\n@@ -2821,7 +2822,7 @@ find_if_case_2 (basic_block test_bb, edge then_edge, edge else_edge)\n     delete_from_dominance_info (post_dominators, else_bb);\n   delete_block (else_bb);\n \n-  num_removed_blocks++;\n+  num_true_changes++;\n   num_updated_if_blocks++;\n \n   /* ??? We may now fallthru from one of THEN's successors into a join\n@@ -3112,7 +3113,7 @@ if_convert (int x_life_data_ok)\n \n   num_possible_if_blocks = 0;\n   num_updated_if_blocks = 0;\n-  num_removed_blocks = 0;\n+  num_true_changes = 0;\n   life_data_ok = (x_life_data_ok != 0);\n \n   if (! (* targetm.cannot_modify_jumps_p) ())\n@@ -3173,7 +3174,7 @@ if_convert (int x_life_data_ok)\n   clear_aux_for_blocks ();\n \n   /* Rebuild life info for basic blocks that require it.  */\n-  if (num_removed_blocks && life_data_ok)\n+  if (num_true_changes && life_data_ok)\n     {\n       /* If we allocated new pseudos, we must resize the array for sched1.  */\n       if (max_regno < max_reg_num ())\n@@ -3196,8 +3197,8 @@ if_convert (int x_life_data_ok)\n \t       \"%d IF blocks converted.\\n\",\n \t       num_updated_if_blocks);\n       fprintf (rtl_dump_file,\n-\t       \"%d basic blocks deleted.\\n\\n\\n\",\n-\t       num_removed_blocks);\n+\t       \"%d true changes made.\\n\\n\\n\",\n+\t       num_true_changes);\n     }\n \n #ifdef ENABLE_CHECKING"}]}