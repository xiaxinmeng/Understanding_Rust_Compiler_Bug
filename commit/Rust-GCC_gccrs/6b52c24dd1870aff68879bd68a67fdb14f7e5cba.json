{"sha": "6b52c24dd1870aff68879bd68a67fdb14f7e5cba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmI1MmMyNGRkMTg3MGFmZjY4ODc5YmQ2OGE2N2ZkYjE0ZjdlNWNiYQ==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2020-05-14T10:11:52Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-07-08T14:55:53Z"}, "message": "[Ada] Analyze aspects once generic subprograms are recognized\n\ngcc/ada/\n\n\t* sem_ch12.adb (Analyze_Generic_Subprogram_Declaration): Call\n\tAnalyze_Aspect_Specifications after setting Ekind of the\n\tanalyzed entity.\n\t* sem_ch13.adb (Analyze_Aspect_Yield): Remove minimal decoration\n\tof generic subprograms.", "tree": {"sha": "9c5518e23b797d89938e7a9110130ed6103e2309", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c5518e23b797d89938e7a9110130ed6103e2309"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b52c24dd1870aff68879bd68a67fdb14f7e5cba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b52c24dd1870aff68879bd68a67fdb14f7e5cba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b52c24dd1870aff68879bd68a67fdb14f7e5cba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b52c24dd1870aff68879bd68a67fdb14f7e5cba/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf6bd6a3ef104abb96095c5d78bffed1a95896f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf6bd6a3ef104abb96095c5d78bffed1a95896f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf6bd6a3ef104abb96095c5d78bffed1a95896f5"}], "stats": {"total": 30, "additions": 7, "deletions": 23}, "files": [{"sha": "c04a20af7c60505c9439c8c0389e7da6042d67b7", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b52c24dd1870aff68879bd68a67fdb14f7e5cba/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b52c24dd1870aff68879bd68a67fdb14f7e5cba/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=6b52c24dd1870aff68879bd68a67fdb14f7e5cba", "patch": "@@ -3860,13 +3860,6 @@ package body Sem_Ch12 is\n       Enter_Name (Id);\n       Set_Scope_Depth_Value (Id, Scope_Depth (Current_Scope) + 1);\n \n-      --  Analyze the aspects of the generic copy to ensure that all generated\n-      --  pragmas (if any) perform their semantic effects.\n-\n-      if Has_Aspects (N) then\n-         Analyze_Aspect_Specifications (N, Id);\n-      end if;\n-\n       Push_Scope (Id);\n       Enter_Generic_Scope (Id);\n       Set_Inner_Instances (Id, New_Elmt_List);\n@@ -3880,6 +3873,13 @@ package body Sem_Ch12 is\n          Set_Ekind (Id, E_Generic_Procedure);\n       end if;\n \n+      --  Analyze the aspects of the generic copy to ensure that all generated\n+      --  pragmas (if any) perform their semantic effects.\n+\n+      if Has_Aspects (N) then\n+         Analyze_Aspect_Specifications (N, Id);\n+      end if;\n+\n       --  Set SPARK_Mode from context\n \n       Set_SPARK_Pragma           (Id, SPARK_Mode_Pragma);"}, {"sha": "88d3124e10579cb1db6ed7da8ce0e08b9550e580", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 0, "deletions": 16, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b52c24dd1870aff68879bd68a67fdb14f7e5cba/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b52c24dd1870aff68879bd68a67fdb14f7e5cba/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=6b52c24dd1870aff68879bd68a67fdb14f7e5cba", "patch": "@@ -2563,22 +2563,6 @@ package body Sem_Ch13 is\n                end if;\n \n                if Expr_Value then\n-\n-                  --  Adding minimum decoration to generic subprograms to set\n-                  --  the Yield attribute (since at this stage it may not be\n-                  --  set; see Analyze_Generic_Subprogram_Declaration).\n-\n-                  if Nkind (N) in N_Generic_Subprogram_Declaration\n-                    and then Ekind (E) = E_Void\n-                  then\n-                     if Nkind (Specification (N)) = N_Function_Specification\n-                     then\n-                        Set_Ekind (E, E_Function);\n-                     else\n-                        Set_Ekind (E, E_Procedure);\n-                     end if;\n-                  end if;\n-\n                   Set_Has_Yield_Aspect (E);\n                end if;\n "}]}