{"sha": "7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YzNTlkMTlkMGIxYjEzYzIxZTdhMzI1ZWYzOTFlZDE5YmM4YmE3MA==", "commit": {"author": {"name": "Daniel Kruegler", "email": "daniel.kruegler@gmail.com", "date": "2017-03-23T19:40:16Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2017-03-23T19:40:16Z"}, "message": "Implement LWG 2686, std::hash<error_condition>, for C++17\n\n2017-03-23  Daniel Kruegler  <daniel.kruegler@gmail.com>\n\n\tImplement LWG 2686, Why is std::hash specialized for error_code,\n\tbut not error_condition?\n\t* include/std/system_error (hash<error_condition>): Define for C++17.\n\t* testsuite/20_util/hash/operators/size_t.cc (hash<error_condition>):\n\tInstantiate test for error_condition.\n\t* testsuite/20_util/hash/requirements/explicit_instantiation.cc\n\t(hash<error_condition>): Instantiate hash<error_condition>.\n\nFrom-SVN: r246424", "tree": {"sha": "a71417b0083d1c3401026601882728aa88056731", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a71417b0083d1c3401026601882728aa88056731"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/comments", "author": {"login": "Dani-Hub", "id": 431432, "node_id": "MDQ6VXNlcjQzMTQzMg==", "avatar_url": "https://avatars.githubusercontent.com/u/431432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dani-Hub", "html_url": "https://github.com/Dani-Hub", "followers_url": "https://api.github.com/users/Dani-Hub/followers", "following_url": "https://api.github.com/users/Dani-Hub/following{/other_user}", "gists_url": "https://api.github.com/users/Dani-Hub/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dani-Hub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dani-Hub/subscriptions", "organizations_url": "https://api.github.com/users/Dani-Hub/orgs", "repos_url": "https://api.github.com/users/Dani-Hub/repos", "events_url": "https://api.github.com/users/Dani-Hub/events{/privacy}", "received_events_url": "https://api.github.com/users/Dani-Hub/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "288695f7a49e187d9c4e0dad6024aed227512477", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/288695f7a49e187d9c4e0dad6024aed227512477", "html_url": "https://github.com/Rust-GCC/gccrs/commit/288695f7a49e187d9c4e0dad6024aed227512477"}], "stats": {"total": 36, "additions": 32, "deletions": 4}, "files": [{"sha": "1425d28f7f2970e209a700cd559658ecdcde6247", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "patch": "@@ -1,5 +1,13 @@\n 2017-03-23  Daniel Kruegler  <daniel.kruegler@gmail.com>\n \n+\tImplement LWG 2686, Why is std::hash specialized for error_code,\n+\tbut not error_condition?\n+\t* include/std/system_error (hash<error_condition>): Define for C++17.\n+\t* testsuite/20_util/hash/operators/size_t.cc (hash<error_condition>):\n+\tInstantiate test for error_condition.\n+\t* testsuite/20_util/hash/requirements/explicit_instantiation.cc\n+\t(hash<error_condition>): Instantiate hash<error_condition>.\n+\n \t* include/bits/c++config (_GLIBCXX17_INLINE): Define.\n \t* include/bits/regex_constants.h (All std::regex_constants constants):\n \tAdd _GLIBCXX17_INLINE as per P0607R0."}, {"sha": "ec7d25f25f7966618c408f598a754d376ae6fe56", "filename": "libstdc++-v3/include/std/system_error", "status": "modified", "additions": 18, "deletions": 4, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fsystem_error", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fsystem_error", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fsystem_error?ref=7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "patch": "@@ -373,14 +373,13 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n _GLIBCXX_END_NAMESPACE_VERSION\n } // namespace\n \n-#ifndef _GLIBCXX_COMPATIBILITY_CXX0X\n-\n #include <bits/functional_hash.h>\n \n namespace std _GLIBCXX_VISIBILITY(default)\n {\n _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n+#ifndef _GLIBCXX_COMPATIBILITY_CXX0X\n   // DR 1182.\n   /// std::hash specialization for error_code.\n   template<>\n@@ -394,12 +393,27 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \treturn std::_Hash_impl::__hash_combine(__e._M_cat, __tmp);\n       }\n     };\n+#endif // _GLIBCXX_COMPATIBILITY_CXX0X\n+\n+#if __cplusplus > 201402L\n+  // DR 2686.\n+  /// std::hash specialization for error_condition.\n+  template<>\n+    struct hash<error_condition>\n+    : public __hash_base<size_t, error_condition>\n+    {\n+      size_t\n+      operator()(const error_condition& __e) const noexcept\n+      {\n+\tconst size_t __tmp = std::_Hash_impl::hash(__e.value());\n+\treturn std::_Hash_impl::__hash_combine(__e.category(), __tmp);\n+      }\n+    };\n+#endif\n \n _GLIBCXX_END_NAMESPACE_VERSION\n } // namespace\n \n-#endif // _GLIBCXX_COMPATIBILITY_CXX0X\n-\n #endif // C++11\n \n #endif // _GLIBCXX_SYSTEM_ERROR"}, {"sha": "cc191d6f9a7458828905a2f6aa57ce4f25450d9b", "filename": "libstdc++-v3/testsuite/20_util/hash/operators/size_t.cc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2Foperators%2Fsize_t.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2Foperators%2Fsize_t.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2Foperators%2Fsize_t.cc?ref=7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "patch": "@@ -43,6 +43,9 @@ template<typename T>\n void test01()\n {\n   do_test<std::error_code>();\n+#if __cplusplus > 201402L\n+  do_test<std::error_condition>();\n+#endif\n }\n \n int main()"}, {"sha": "d01829af56f38e6ead6f13a18b349f93e3be6bba", "filename": "libstdc++-v3/testsuite/20_util/hash/requirements/explicit_instantiation.cc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2Frequirements%2Fexplicit_instantiation.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f359d19d0b1b13c21e7a325ef391ed19bc8ba70/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2Frequirements%2Fexplicit_instantiation.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fhash%2Frequirements%2Fexplicit_instantiation.cc?ref=7f359d19d0b1b13c21e7a325ef391ed19bc8ba70", "patch": "@@ -40,6 +40,9 @@ template class std::hash<long double>;\n template class std::hash<void*>;\n template class std::hash<std::string>;\n template class std::hash<std::error_code>;\n+#if __cplusplus > 201402L\n+template class std::hash<std::error_condition>;\n+#endif\n \n #ifdef _GLIBCXX_USE_WCHAR_T\n template class std::hash<wchar_t>;"}]}