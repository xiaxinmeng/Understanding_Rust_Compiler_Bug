{"sha": "45c8268d06270cff703a2caf0d20eea043759bdc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDVjODI2OGQwNjI3MGNmZjcwM2EyY2FmMGQyMGVlYTA0Mzc1OWJkYw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-07-08T16:03:26Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-07-08T16:03:26Z"}, "message": "* stmt.c (emit_case_nodes): Convert modes properly in low+high test.\n\nFrom-SVN: r43847", "tree": {"sha": "a3407a54f630a52b85d9b16712fe41738a08ee49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3407a54f630a52b85d9b16712fe41738a08ee49"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45c8268d06270cff703a2caf0d20eea043759bdc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45c8268d06270cff703a2caf0d20eea043759bdc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45c8268d06270cff703a2caf0d20eea043759bdc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45c8268d06270cff703a2caf0d20eea043759bdc/comments", "author": null, "committer": null, "parents": [{"sha": "d5d6a58b0a44b5f08fb3ccfc73719fddbb2509b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5d6a58b0a44b5f08fb3ccfc73719fddbb2509b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5d6a58b0a44b5f08fb3ccfc73719fddbb2509b6"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "d0929d8fc97fd865c90d1e05b38562b8b79849b3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45c8268d06270cff703a2caf0d20eea043759bdc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45c8268d06270cff703a2caf0d20eea043759bdc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=45c8268d06270cff703a2caf0d20eea043759bdc", "patch": "@@ -1,3 +1,7 @@\n+2001-07-08  Richard Henderson  <rth@redhat.com>\n+\n+\t* stmt.c (emit_case_nodes): Convert modes properly in low+high test.\n+\n 2001-07-08  Richard Henderson  <rth@redhat.com>\n \n \t* config/i386/i386.md: Remove constraints strings from define_split"}, {"sha": "48b3a87cc66c42601224ec5b63d23ecd96c0e0f7", "filename": "gcc/stmt.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45c8268d06270cff703a2caf0d20eea043759bdc/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45c8268d06270cff703a2caf0d20eea043759bdc/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=45c8268d06270cff703a2caf0d20eea043759bdc", "patch": "@@ -6321,19 +6321,24 @@ emit_case_nodes (index, node, default_label, index_type)\n \t    }\n \t  else if (!low_bound && !high_bound)\n \t    {\n-\t      /* Instead of doing two branches emit test (index-low) <= (high-low).  */\n+\t      /* Instead of doing two branches, emit\n+\t\t (index-low) <= (high-low).  */\n \t      tree new_bound = fold (build (MINUS_EXPR, index_type, node->high,\n \t\t\t\t\t    node->low));\n \t      rtx new_index;\n \t      \n \t      new_index = expand_binop (mode, sub_optab, index,\n-\t\t\t      \t\texpand_expr (node->low, NULL_RTX,\n-\t\t\t\t\t\t     VOIDmode, 0),\n-\t\t\t\t        NULL_RTX, 0, OPTAB_WIDEN);\n+\t\t\t\t        convert_modes (mode, imode,\n+\t\t\t\t\t  expand_expr (node->low, NULL_RTX,\n+\t\t\t\t\t\t       mode, 0),\n+\t\t\t\t\t  unsignedp),\n+\t\t\t\t        NULL_RTX, unsignedp, OPTAB_WIDEN);\n \t\t\t\t\n \t      emit_cmp_and_jump_insns (new_index,\n-\t\t\t\t       expand_expr (new_bound, NULL_RTX,\n-\t\t\t\t\t\t    VOIDmode, 0),\n+\t\t\t\t       convert_modes (mode, imode,\n+\t\t\t\t\t expand_expr (new_bound, NULL_RTX,\n+\t\t\t\t\t\t      mode, 0),\n+\t\t\t\t\t unsignedp),\n \t\t\t\t       GT, NULL_RTX, mode, 1, 0,\n \t\t\t\t       default_label);\n \t    }"}]}