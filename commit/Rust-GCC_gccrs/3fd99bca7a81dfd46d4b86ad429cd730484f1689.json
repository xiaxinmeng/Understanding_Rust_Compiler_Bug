{"sha": "3fd99bca7a81dfd46d4b86ad429cd730484f1689", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZkOTliY2E3YTgxZGZkNDZkNGI4NmFkNDI5Y2Q3MzA0ODRmMTY4OQ==", "commit": {"author": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2015-01-04T01:22:54Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2015-01-04T01:22:54Z"}, "message": "re PR testsuite/62250 (FAIL: gfortran.dg/coarray/alloc_comp_1.f90 -fcoarray=lib  -O2  -lcaf_single)\n\n\tPR testsuite/62250\n\t* lib/gfortran.exp: Add libatomic library search path.\n\t* gfortran.dg/coarray/caf.exp: Add -latomic to test options.\n\t* gfortran.dg/coarray_lib_comm_1.f90: Likewise.\n\nFrom-SVN: r219171", "tree": {"sha": "7e11596a4a1cf92c75c5d88b0a57add0bc20bbba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e11596a4a1cf92c75c5d88b0a57add0bc20bbba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fd99bca7a81dfd46d4b86ad429cd730484f1689", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fd99bca7a81dfd46d4b86ad429cd730484f1689", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fd99bca7a81dfd46d4b86ad429cd730484f1689", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fd99bca7a81dfd46d4b86ad429cd730484f1689/comments", "author": null, "committer": null, "parents": [{"sha": "408e8aa42f496561b0d06df76403eb2c97b7ef5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/408e8aa42f496561b0d06df76403eb2c97b7ef5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/408e8aa42f496561b0d06df76403eb2c97b7ef5d"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "774a429e67ae3ecbc6fcc86cc1f7c4d7904be0e3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3fd99bca7a81dfd46d4b86ad429cd730484f1689", "patch": "@@ -1,5 +1,10 @@\n 2015-01-03  John David Anglin  <danglin@gcc.gnu.org>\n \n+\tPR testsuite/62250\n+\t* lib/gfortran.exp: Add libatomic library search path.\n+\t* gfortran.dg/coarray/caf.exp: Add -latomic to test options.\n+\t* gfortran.dg/coarray_lib_comm_1.f90: Likewise.\n+\n \t* gcc.dg/pr63914.c: Add -fno-common option on hppa*-*-hpux*.\n \n 2015-01-02  Bernd Edlinger  <bernd.edlinger@hotmail.de>"}, {"sha": "79a04ea9b78ad42f5809a29093c9c4851b369f80", "filename": "gcc/testsuite/gfortran.dg/coarray/caf.exp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcaf.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcaf.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcaf.exp?ref=3fd99bca7a81dfd46d4b86ad429cd730484f1689", "patch": "@@ -81,14 +81,14 @@ foreach test [lsort [glob -nocomplain $srcdir/$subdir/*.\\[fF\\]{,90,95,03,08} ]]\n     foreach flags $option_list {\n \tverbose \"Testing $nshort (single), $flags\" 1\n         set gfortran_aux_module_flags \"-fcoarray=single $flags\"\n-\tdg-test $test \"-fcoarray=single $flags\" \"\" \n+\tdg-test $test \"-fcoarray=single $flags -latomic\" \"\" \n \tcleanup-modules \"\"\n     }\n \n     foreach flags $option_list {\n \tverbose \"Testing $nshort (libcaf_single), $flags\" 1\n         set gfortran_aux_module_flags \"-fcoarray=lib $flags -lcaf_single\"\n-\tdg-test $test \"-fcoarray=lib $flags -lcaf_single\" \"\"\n+\tdg-test $test \"-fcoarray=lib $flags -lcaf_single -latomic\" \"\"\n \tcleanup-modules \"\"\n     }\n }"}, {"sha": "10346d459b665dbb8334ec64ba2bda3e6290f384", "filename": "gcc/testsuite/gfortran.dg/coarray_lib_comm_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_lib_comm_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_lib_comm_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_lib_comm_1.f90?ref=3fd99bca7a81dfd46d4b86ad429cd730484f1689", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do run }\n-! { dg-options \"-fdump-tree-original -fcoarray=lib -lcaf_single\" }\n+! { dg-options \"-fdump-tree-original -fcoarray=lib -lcaf_single -latomic\" }\n !\n ! Some dependency-analysis check for coarray communication\n !"}, {"sha": "e0017a639b25423a6de86f970466a1ecd3734a1e", "filename": "gcc/testsuite/lib/gfortran.exp", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2Flib%2Fgfortran.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd99bca7a81dfd46d4b86ad429cd730484f1689/gcc%2Ftestsuite%2Flib%2Fgfortran.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fgfortran.exp?ref=3fd99bca7a81dfd46d4b86ad429cd730484f1689", "patch": "@@ -102,6 +102,13 @@ proc gfortran_link_flags { paths } {\n       if [file exists \"${gccpath}/libgfortran/libgforbegin.a\"] {\n           append flags \"-L${gccpath}/libgfortran \"\n       }\n+      if [file exists \"${gccpath}/libatomic/.libs/libatomic.${shlib_ext}\"] {\n+\t  append flags \"-L${gccpath}/libatomic/.libs \"\n+\t  append ld_library_path \":${gccpath}/libatomic/.libs\"\n+      }\n+      if [file exists \"${gccpath}/libatomic/libatomic.a\"] {\n+          append flags \"-L${gccpath}/libatomic \"\n+      }\n       if [file exists \"${gccpath}/libquadmath/.libs/libquadmath.a\"] {\n           # Some targets use libquadmath.a%s in their specs, so they need a -B option\n           # for uninstalled testing."}]}