{"sha": "5df19a915e5519446f457d5be782066f178da12d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRmMTlhOTE1ZTU1MTk0NDZmNDU3ZDViZTc4MjA2NmYxNzhkYTEyZA==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bmckinlay@gmail.com", "date": "2009-12-09T18:45:13Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2009-12-09T18:45:13Z"}, "message": "re PR java/41991 (gcj segfaults on i686-apple-darwin9 and x86_64-apple-darwin9)\n\n2009-12-09  Bryce McKinlay  <bmckinlay@gmail.com>\n\n        PR java/41991  \n        * configure.ac (SYSTEMSPEC): Pass -allow_stack_execute to Darwin\n        linker.\n        * Makefile.am (gij_LDFLAGS): Remove extra_gij_ldflags.\n        * configure: Regenerate.  \n        * Makefile.in: Regenerate.\n\nFrom-SVN: r155113", "tree": {"sha": "70a63b773655f28980f5e5a4154331e0ead49b05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70a63b773655f28980f5e5a4154331e0ead49b05"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5df19a915e5519446f457d5be782066f178da12d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5df19a915e5519446f457d5be782066f178da12d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5df19a915e5519446f457d5be782066f178da12d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5df19a915e5519446f457d5be782066f178da12d/comments", "author": {"login": "bmckinlay", "id": 13368547, "node_id": "MDQ6VXNlcjEzMzY4NTQ3", "avatar_url": "https://avatars.githubusercontent.com/u/13368547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmckinlay", "html_url": "https://github.com/bmckinlay", "followers_url": "https://api.github.com/users/bmckinlay/followers", "following_url": "https://api.github.com/users/bmckinlay/following{/other_user}", "gists_url": "https://api.github.com/users/bmckinlay/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmckinlay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmckinlay/subscriptions", "organizations_url": "https://api.github.com/users/bmckinlay/orgs", "repos_url": "https://api.github.com/users/bmckinlay/repos", "events_url": "https://api.github.com/users/bmckinlay/events{/privacy}", "received_events_url": "https://api.github.com/users/bmckinlay/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "af078bb0cf6e9b547c4f883e294f529914339cd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af078bb0cf6e9b547c4f883e294f529914339cd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af078bb0cf6e9b547c4f883e294f529914339cd0"}], "stats": {"total": 40, "additions": 20, "deletions": 20}, "files": [{"sha": "632d66a93e5720988c0d6b7dc03cea9fec8b471c", "filename": "libjava/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -1,3 +1,12 @@\n+2009-12-09  Bryce McKinlay  <bmckinlay@gmail.com>\n+\n+\tPR java/41991  \n+\t* configure.ac (SYSTEMSPEC): Pass -allow_stack_execute to Darwin\n+\tlinker.\n+\t* Makefile.am (gij_LDFLAGS): Remove extra_gij_ldflags.\n+\t* configure: Regenerate.  \n+\t* Makefile.in: Regenerate.\n+\n 2009-12-08  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* configure.host (sparc*-sun-solaris2.*): New case."}, {"sha": "f1076845c7233b75fe4e5317d8034cfbb7ada005", "filename": "libjava/Makefile.am", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -1065,8 +1065,7 @@ gij_SOURCES =\n ## need this because we are explicitly using libtool to link using the\n ## `.la' file.\n gij_LDFLAGS = -rpath $(dbexecdir) -rpath $(toolexeclibdir) \\\n-\t-shared-libgcc $(THREADLDFLAGS) $(extra_ldflags) \\\n-\t$(extra_gij_ldflags) \n+\t-shared-libgcc $(THREADLDFLAGS) $(extra_ldflags)\n gij_LINK = $(GCJLINK) $(gij_LDFLAGS)\n ## See jv_convert_LDADD.\n gij_LDADD = -L$(here)/.libs libgij.la"}, {"sha": "188b055bf0660a5c5586c29d28b3024836c118f4", "filename": "libjava/Makefile.in", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -819,7 +819,6 @@ dbexecdir = @dbexecdir@\n docdir = @docdir@\n dvidir = @dvidir@\n exec_prefix = @exec_prefix@\n-extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n extra_ldflags_libjava = @extra_ldflags_libjava@ $(am__append_9)\n gcc_suffix = @gcc_suffix@\n@@ -8499,8 +8498,7 @@ gc_analyze_DEPENDENCIES = libgcj-tools.la libgcj.la libgcj.spec \\\n \t$(am__append_28)\n gij_SOURCES = \n gij_LDFLAGS = -rpath $(dbexecdir) -rpath $(toolexeclibdir) \\\n-\t-shared-libgcc $(THREADLDFLAGS) $(extra_ldflags) \\\n-\t$(extra_gij_ldflags) \n+\t-shared-libgcc $(THREADLDFLAGS) $(extra_ldflags)\n \n gij_LINK = $(GCJLINK) $(gij_LDFLAGS)\n gij_LDADD = -L$(here)/.libs libgij.la"}, {"sha": "1a7d625c96dabda3ecb61c36fe21e6096347eeb8", "filename": "libjava/configure", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -704,7 +704,6 @@ GCLIBS\n LIBGCJTESTSPEC\n LIBSTDCXXSPEC\n extra_ldflags\n-extra_gij_ldflags\n extra_ldflags_libjava\n X_EXTRA_LIBS\n X_LIBS\n@@ -13245,7 +13244,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13248 \"configure\"\n+#line 13247 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13351,7 +13350,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13354 \"configure\"\n+#line 13353 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -19216,7 +19215,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then :\n   enableval=$enable_sjlj_exceptions; :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 19219 \"configure\"\n+#line 19218 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -19546,6 +19545,9 @@ case \"${host}\" in\n         SYSTEMSPEC=\"-lunicows $SYSTEMSPEC\"\n       fi\n     ;;\n+    *-*-darwin[912]*)\n+      SYSTEMSPEC=\"-allow_stack_execute\"\n+    ;;\n     *)\n       SYSTEMSPEC=\n     ;;\n@@ -20297,9 +20299,6 @@ case \"${host}\" in\n     # on Darwin -single_module speeds up loading of the dynamic libraries.\n     extra_ldflags_libjava=-Wl,-single_module\n     ;;\n-*-*-darwin[912]*)\n-    extra_gij_ldflags=-Wl,-allow_stack_execute\n-    ;;\n arm*linux*eabi)\n     # Some of the ARM unwinder code is actually in libstdc++.  We\n     # could in principle replicate it in libgcj, but it's better to\n@@ -20318,7 +20317,6 @@ esac\n \n \n \n-\n # Allow the GC to be disabled.  Can be useful when debugging.\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for garbage collector to use\" >&5\n $as_echo_n \"checking for garbage collector to use... \" >&6; }"}, {"sha": "d8cb6103fea0cabdc7ebfdd29e3162a431ba3c77", "filename": "libjava/configure.ac", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -889,6 +889,9 @@ case \"${host}\" in\n         SYSTEMSPEC=\"-lunicows $SYSTEMSPEC\"\n       fi\n     ;;\n+    *-*-darwin[[912]]*)\n+      SYSTEMSPEC=\"-allow_stack_execute\"\n+    ;;\n     *)\n       SYSTEMSPEC=\n     ;;\n@@ -919,9 +922,6 @@ case \"${host}\" in\n     # on Darwin -single_module speeds up loading of the dynamic libraries.\n     extra_ldflags_libjava=-Wl,-single_module\n     ;;\n-*-*-darwin[[912]]*)\n-    extra_gij_ldflags=-Wl,-allow_stack_execute\n-    ;;\n arm*linux*eabi)\n     # Some of the ARM unwinder code is actually in libstdc++.  We\n     # could in principle replicate it in libgcj, but it's better to\n@@ -935,7 +935,6 @@ arm*linux*eabi)\n     ;;\n esac\n AC_SUBST(extra_ldflags_libjava)\n-AC_SUBST(extra_gij_ldflags)\n AC_SUBST(extra_ldflags)\n AC_SUBST(LIBSTDCXXSPEC)\n "}, {"sha": "55524392d98544b99d98aa7e9ee7a303c1eeb0f1", "filename": "libjava/gcj/Makefile.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2Fgcj%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2Fgcj%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgcj%2FMakefile.in?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -283,7 +283,6 @@ dbexecdir = @dbexecdir@\n docdir = @docdir@\n dvidir = @dvidir@\n exec_prefix = @exec_prefix@\n-extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n extra_ldflags_libjava = @extra_ldflags_libjava@\n gcc_suffix = @gcc_suffix@"}, {"sha": "539dd01f18804619f8052f724b233d0e703fa841", "filename": "libjava/include/Makefile.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2FMakefile.in?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -283,7 +283,6 @@ dbexecdir = @dbexecdir@\n docdir = @docdir@\n dvidir = @dvidir@\n exec_prefix = @exec_prefix@\n-extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n extra_ldflags_libjava = @extra_ldflags_libjava@\n gcc_suffix = @gcc_suffix@"}, {"sha": "5086016cfaf2a517e6f2e480151264f41c11b911", "filename": "libjava/testsuite/Makefile.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5df19a915e5519446f457d5be782066f178da12d/libjava%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5df19a915e5519446f457d5be782066f178da12d/libjava%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FMakefile.in?ref=5df19a915e5519446f457d5be782066f178da12d", "patch": "@@ -258,7 +258,6 @@ dbexecdir = @dbexecdir@\n docdir = @docdir@\n dvidir = @dvidir@\n exec_prefix = @exec_prefix@\n-extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n extra_ldflags_libjava = @extra_ldflags_libjava@\n gcc_suffix = @gcc_suffix@"}]}