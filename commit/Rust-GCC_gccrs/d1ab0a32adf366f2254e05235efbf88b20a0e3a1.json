{"sha": "d1ab0a32adf366f2254e05235efbf88b20a0e3a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFhYjBhMzJhZGYzNjZmMjI1NGUwNTIzNWVmYmY4OGIyMGEwZTNhMQ==", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@synopsys.com", "date": "2017-03-28T08:56:33Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@gcc.gnu.org", "date": "2017-03-28T08:56:33Z"}, "message": "[ARC] Update ARC SIMD patterns.\n\nvec_select expects in selection a list of subparts. The old ARC SIMD\nextension instructions were not up-to-date.\n\ngcc/\n2017-03-28  Claudiu Zissulescu  <claziss@synopsys.com>\n\n\t* config/arc/simdext.md (vst64_insn): Update pattern.\n\t(vld32wh_insn): Likewise.\n\t(vld32wl_insn): Likewise.\n\t(vld64_insn): Likewise.\n\t(vld32_insn): Likewise.\n\nFrom-SVN: r246523", "tree": {"sha": "098c0f15790390b95250789721c8fb558a53f579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/098c0f15790390b95250789721c8fb558a53f579"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1ab0a32adf366f2254e05235efbf88b20a0e3a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ab0a32adf366f2254e05235efbf88b20a0e3a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1ab0a32adf366f2254e05235efbf88b20a0e3a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1ab0a32adf366f2254e05235efbf88b20a0e3a1/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "72785f26600ba08db98c6f169e59e66fe09a81f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72785f26600ba08db98c6f169e59e66fe09a81f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72785f26600ba08db98c6f169e59e66fe09a81f3"}], "stats": {"total": 106, "additions": 75, "deletions": 31}, "files": [{"sha": "732ad50f8abb1d403c820495eaeecf7c72b8ab94", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1ab0a32adf366f2254e05235efbf88b20a0e3a1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1ab0a32adf366f2254e05235efbf88b20a0e3a1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d1ab0a32adf366f2254e05235efbf88b20a0e3a1", "patch": "@@ -1,3 +1,11 @@\n+2017-03-28  Claudiu Zissulescu  <claziss@synopsys.com>\n+\n+\t* config/arc/simdext.md (vst64_insn): Update pattern.\n+\t(vld32wh_insn): Likewise.\n+\t(vld32wl_insn): Likewise.\n+\t(vld64_insn): Likewise.\n+\t(vld32_insn): Likewise.\n+\n 2017-03-28  Marek Polacek  <polacek@redhat.com>\n \n \tPR sanitizer/80067"}, {"sha": "33bb33020806c4eb84e166b00a89257553b3f082", "filename": "gcc/config/arc/simdext.md", "status": "modified", "additions": 67, "deletions": 31, "changes": 98, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1ab0a32adf366f2254e05235efbf88b20a0e3a1/gcc%2Fconfig%2Farc%2Fsimdext.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1ab0a32adf366f2254e05235efbf88b20a0e3a1/gcc%2Fconfig%2Farc%2Fsimdext.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Fsimdext.md?ref=d1ab0a32adf366f2254e05235efbf88b20a0e3a1", "patch": "@@ -193,11 +193,16 @@\n )\n \n (define_insn \"vst64_insn\"\n-  [(set\t(mem:V4HI (plus:SI (zero_extend:SI (vec_select:HI (match_operand:V8HI 0 \"vector_register_operand\"  \"v\")\n-\t\t\t\t\t\t\t  (parallel [(match_operand:SI 1 \"immediate_operand\" \"L\")])))\n-\t\t\t   (match_operand:SI 2 \"immediate_operand\" \"P\")))\n-\t(vec_select:V4HI (match_operand:V8HI 3 \"vector_register_operand\" \"=v\")\n-\t\t\t (parallel [(const_int 0)])))]\n+  [(set\t(mem:V4HI\n+\t (plus:SI\n+\t  (zero_extend:SI\n+\t   (vec_select:HI (match_operand:V8HI 0 \"vector_register_operand\"  \"v\")\n+\t\t\t  (parallel\n+\t\t\t   [(match_operand:SI 1 \"immediate_operand\" \"L\")])))\n+\t  (match_operand:SI 2 \"immediate_operand\" \"P\")))\n+\t(vec_select:V4HI\n+\t (match_operand:V8HI 3 \"vector_register_operand\" \"=v\")\n+\t (parallel [(const_int 0) (const_int 1) (const_int 2) (const_int 3)])))]\n  \"TARGET_SIMD_SET\"\n  \"vst64 %3, [i%1, %2]\"\n  [(set_attr \"type\" \"simd_vstore\")\n@@ -1191,25 +1196,41 @@\n    (set_attr \"cond\" \"nocond\")])\n \n (define_insn \"vld32wh_insn\"\n-  [(set (match_operand:V8HI 0 \"vector_register_operand\"           \"=v\")\n-\t(vec_concat:V8HI (zero_extend:V4HI (mem:V4QI (plus:SI (match_operand:SI 1 \"immediate_operand\" \"P\")\n-\t\t\t\t\t\t\t      (zero_extend: SI (vec_select:HI (match_operand:V8HI 2 \"vector_register_operand\"  \"v\")\n-\t\t\t\t\t\t\t\t\t\t\t      (parallel [(match_operand:SI 3 \"immediate_operand\" \"L\")]))))))\n-\t\t\t (vec_select:V4HI (match_dup 0)\n-\t\t\t\t\t  (parallel [(const_int 0)]))))]\n+  [(set (match_operand:V8HI 0 \"vector_register_operand\" \"=v\")\n+\t(vec_concat:V8HI\n+\t (zero_extend:V4HI\n+\t  (mem:V4QI\n+\t   (plus:SI\n+\t    (match_operand:SI 1 \"immediate_operand\" \"P\")\n+\t    (zero_extend:SI\n+\t     (vec_select:HI\n+\t      (match_operand:V8HI 2 \"vector_register_operand\"  \"v\")\n+\t      (parallel [(match_operand:SI 3 \"immediate_operand\" \"L\")]))))))\n+\t (vec_select:V4HI\n+\t  (match_dup 0)\n+\t  (parallel [(const_int 0) (const_int 1) (const_int 2) (const_int 3)])\n+\t  )))]\n   \"TARGET_SIMD_SET\"\n   \"vld32wh %0, [i%3,%1]\"\n   [(set_attr \"type\" \"simd_vload\")\n    (set_attr \"length\" \"4\")\n    (set_attr \"cond\" \"nocond\")])\n \n (define_insn \"vld32wl_insn\"\n-  [(set (match_operand:V8HI 0 \"vector_register_operand\"           \"=v\")\n-\t(vec_concat:V8HI (vec_select:V4HI (match_dup 0)\n-\t\t\t\t\t  (parallel [(const_int 1)]))\n-\t\t\t (zero_extend:V4HI (mem:V4QI (plus:SI (match_operand:SI 1 \"immediate_operand\" \"P\")\n-\t\t\t\t\t\t\t      (zero_extend: SI (vec_select:HI (match_operand:V8HI 2 \"vector_register_operand\"  \"v\")\n-\t\t\t\t\t\t\t\t\t\t\t      (parallel [(match_operand:SI 3 \"immediate_operand\" \"L\")])))))) ))]\n+  [(set (match_operand:V8HI 0 \"vector_register_operand\" \"=v\")\n+\t(vec_concat:V8HI\n+\t (vec_select:V4HI\n+\t  (match_dup 0)\n+\t  (parallel [(const_int 4) (const_int 5) (const_int 6) (const_int 7)]))\n+\t (zero_extend:V4HI\n+\t  (mem:V4QI\n+\t   (plus:SI\n+\t    (match_operand:SI 1 \"immediate_operand\" \"P\")\n+\t    (zero_extend:SI\n+\t     (vec_select:HI (match_operand:V8HI 2 \"vector_register_operand\" \"v\")\n+\t\t\t    (parallel\n+\t\t\t     [(match_operand:SI 3 \"immediate_operand\" \"L\")]))\n+\t     ))))))]\n   \"TARGET_SIMD_SET\"\n   \"vld32wl %0, [i%3,%1]\"\n   [(set_attr \"type\" \"simd_vload\")\n@@ -1229,27 +1250,42 @@\n )\n \n (define_insn \"vld64_insn\"\n-  [(set (match_operand:V8HI 0 \"vector_register_operand\"           \"=v\")\n-\t(vec_concat:V8HI (vec_select:V4HI (match_dup 0)\n-\t\t\t\t\t  (parallel [(const_int 1)]))\n-\t\t\t (mem:V4HI (plus:SI (match_operand:SI 1 \"immediate_operand\" \"P\")\n-\t\t\t\t\t    (zero_extend: SI (vec_select:HI (match_operand:V8HI 2 \"vector_register_operand\"  \"v\")\n-\t\t\t\t\t\t\t\t\t    (parallel [(match_operand:SI 3 \"immediate_operand\" \"L\")]))))) ))]\n+  [(set (match_operand:V8HI 0 \"vector_register_operand\" \"=v\")\n+\t(vec_concat:V8HI\n+\t (vec_select:V4HI\n+\t  (match_dup 0)\n+\t  (parallel [(const_int 4) (const_int 5) (const_int 6) (const_int 7)]))\n+\t (mem:V4HI\n+\t  (plus:SI\n+\t   (match_operand:SI 1 \"immediate_operand\" \"P\")\n+\t   (zero_extend:SI\n+\t    (vec_select:HI\n+\t     (match_operand:V8HI 2 \"vector_register_operand\"  \"v\")\n+\t     (parallel [(match_operand:SI 3 \"immediate_operand\" \"L\")]))\n+\t    )))))]\n   \"TARGET_SIMD_SET\"\n   \"vld64 %0, [i%3,%1]\"\n   [(set_attr \"type\" \"simd_vload\")\n    (set_attr \"length\" \"4\")\n    (set_attr \"cond\" \"nocond\")])\n \n (define_insn \"vld32_insn\"\n-  [(set (match_operand:V8HI 0 \"vector_register_operand\"           \"=v\")\n-\t(vec_concat:V8HI (vec_select:V4HI (match_dup 0)\n-\t\t\t\t\t  (parallel [(const_int 1)]))\n-\t\t\t (vec_concat:V4HI  (vec_select:V2HI (match_dup 0)\n-\t\t\t\t\t\t\t    (parallel [(const_int 1)]))\n-\t\t\t\t\t   (mem:V2HI (plus:SI (match_operand:SI 1 \"immediate_operand\" \"P\")\n-\t\t\t\t\t\t\t      (zero_extend: SI (vec_select:HI (match_operand:V8HI 2 \"vector_register_operand\"  \"v\")\n-\t\t\t\t\t\t\t\t\t\t\t      (parallel [(match_operand:SI 3 \"immediate_operand\" \"L\")])))))) ))]\n+  [(set (match_operand:V8HI 0 \"vector_register_operand\" \"=v\")\n+\t(vec_concat:V8HI\n+\t (vec_select:V4HI\n+\t  (match_dup 0)\n+\t  (parallel [(const_int 4) (const_int 5) (const_int 6) (const_int 7)]))\n+\t (vec_concat:V4HI\n+\t  (vec_select:V2HI\n+\t   (match_dup 0)\n+\t   (parallel [(const_int 2) (const_int 3)]))\n+\t  (mem:V2HI\n+\t   (plus:SI\n+\t    (match_operand:SI 1 \"immediate_operand\" \"P\")\n+\t    (zero_extend:SI\n+\t     (vec_select:HI\n+\t      (match_operand:V8HI 2 \"vector_register_operand\"  \"v\")\n+\t      (parallel [(match_operand:SI 3 \"immediate_operand\" \"L\")]))))))))]\n   \"TARGET_SIMD_SET\"\n   \"vld32 %0, [i%3,%1]\"\n   [(set_attr \"type\" \"simd_vload\")"}]}