{"sha": "1b6763cfb592988efc9ee945479d35ca657bbf4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWI2NzYzY2ZiNTkyOTg4ZWZjOWVlOTQ1NDc5ZDM1Y2E2NTdiYmY0ZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2002-05-02T17:51:48Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2002-05-02T17:51:48Z"}, "message": "cfgrtl.c (try_redirect_by_replacing_jump): Do not kill computed jumps post reload.\n\n\t* cfgrtl.c (try_redirect_by_replacing_jump): Do not kill computed\n\tjumps post reload.\n\t* toplev.c (rest_of_compilation): Revert Richard's patch.\n\nFrom-SVN: r53052", "tree": {"sha": "3584a25f602ea6b06f29196faa368726a894e5db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3584a25f602ea6b06f29196faa368726a894e5db"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b6763cfb592988efc9ee945479d35ca657bbf4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b6763cfb592988efc9ee945479d35ca657bbf4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b6763cfb592988efc9ee945479d35ca657bbf4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b6763cfb592988efc9ee945479d35ca657bbf4e/comments", "author": null, "committer": null, "parents": [{"sha": "16034e4ba3fd9c4e07b00499535b606b781f80b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16034e4ba3fd9c4e07b00499535b606b781f80b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16034e4ba3fd9c4e07b00499535b606b781f80b7"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "0c2c5e964ad929835e4edbab509ef58b37e61f0c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6763cfb592988efc9ee945479d35ca657bbf4e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6763cfb592988efc9ee945479d35ca657bbf4e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1b6763cfb592988efc9ee945479d35ca657bbf4e", "patch": "@@ -1,3 +1,9 @@\n+Thu May  2 19:50:04 CEST 2002  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cfgrtl.c (try_redirect_by_replacing_jump): Do not kill computed\n+\tjumps post reload.\n+\t* toplev.c (rest_of_compilation): Revert Richard's patch.\n+\n 2001-05-02  John David Anglin  <dave@hiauly1.hia.nrc.ca>\n \n \t* pa/x-ada (ADA_CFLAGS): Rename to X_ADA_CFLAGS."}, {"sha": "3fcd8a40357773e9f71eeaf2bcb80d117e068984", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6763cfb592988efc9ee945479d35ca657bbf4e/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6763cfb592988efc9ee945479d35ca657bbf4e/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=1b6763cfb592988efc9ee945479d35ca657bbf4e", "patch": "@@ -713,7 +713,7 @@ try_redirect_by_replacing_jump (e, target)\n   basic_block src = e->src;\n   rtx insn = src->end, kill_from;\n   edge tmp;\n-  rtx set;\n+  rtx set, table;\n   int fallthru = 0;\n \n   /* Verify that all targets will be TARGET.  */\n@@ -723,6 +723,12 @@ try_redirect_by_replacing_jump (e, target)\n \n   if (tmp || !onlyjump_p (insn))\n     return false;\n+  if (reload_completed && JUMP_LABEL (insn)\n+      && (table = NEXT_INSN (JUMP_LABEL (insn))) != NULL_RTX\n+      && GET_CODE (table) == JUMP_INSN\n+      && (GET_CODE (PATTERN (table)) == ADDR_VEC\n+\t  || GET_CODE (PATTERN (table)) == ADDR_DIFF_VEC))\n+    return false;\n \n   /* Avoid removing branch with side effects.  */\n   set = single_set (insn);"}, {"sha": "4eb120bf0de341911283206017b196aaa8ec3e12", "filename": "gcc/toplev.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6763cfb592988efc9ee945479d35ca657bbf4e/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6763cfb592988efc9ee945479d35ca657bbf4e/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=1b6763cfb592988efc9ee945479d35ca657bbf4e", "patch": "@@ -3313,7 +3313,8 @@ rest_of_compilation (decl)\n \t splitting possibly introduced more crossjumping oppurtuntities.\n \t Except that we can't actually run crossjumping without running \n \t another DCE pass, which we can't do after reg-stack.  */\n-      cleanup_cfg (CLEANUP_EXPENSIVE | CLEANUP_POST_REGSTACK);\n+      cleanup_cfg (CLEANUP_EXPENSIVE | CLEANUP_POST_REGSTACK\n+\t\t   | (flag_crossjumping ? CLEANUP_CROSSJUMP : 0));\n       if (flag_reorder_blocks)\n \t{\n \t  reorder_basic_blocks ();"}]}