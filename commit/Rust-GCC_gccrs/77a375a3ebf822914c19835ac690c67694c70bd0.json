{"sha": "77a375a3ebf822914c19835ac690c67694c70bd0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdhMzc1YTNlYmY4MjI5MTRjMTk4MzVhYzY5MGM2NzY5NGM3MGJkMA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-01-08T13:37:09Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-01-08T14:10:40Z"}, "message": "reset the SCEV htab after FRE in loop pipeline\n\nWhen running FRE in the loop pipeline (as part of the conditionally\nscheduled scalar cleanups) we have to reset the SCEV hashtable as\notherwise we can end up with stale entries and all sorts of problems.\n\nCatched by my out-of-tree verifier for this problem.\n\n2021-01-08  Richard Biener  <rguenther@suse.de>\n\n\t* tree-ssa-sccvn.c (pass_fre::execute): Reset the SCEV hash table.", "tree": {"sha": "b20414ff63887d4ce9396d37757ef1c8f770f147", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b20414ff63887d4ce9396d37757ef1c8f770f147"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77a375a3ebf822914c19835ac690c67694c70bd0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77a375a3ebf822914c19835ac690c67694c70bd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77a375a3ebf822914c19835ac690c67694c70bd0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77a375a3ebf822914c19835ac690c67694c70bd0/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b407f233d7c18534fbfe8f74af7f0232498fb0c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b407f233d7c18534fbfe8f74af7f0232498fb0c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b407f233d7c18534fbfe8f74af7f0232498fb0c4"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "0ba846f0be2bca8b4bc27b5db3268ca3dcb071d6", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77a375a3ebf822914c19835ac690c67694c70bd0/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77a375a3ebf822914c19835ac690c67694c70bd0/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=77a375a3ebf822914c19835ac690c67694c70bd0", "patch": "@@ -7883,6 +7883,9 @@ pass_fre::execute (function *fun)\n   if (iterate_p)\n     loop_optimizer_finalize ();\n \n+  if (scev_initialized_p ())\n+    scev_reset_htab ();\n+\n   /* For late FRE after IVOPTs and unrolling, see if we can\n      remove some TREE_ADDRESSABLE and rewrite stuff into SSA.  */\n   if (!may_iterate)"}]}