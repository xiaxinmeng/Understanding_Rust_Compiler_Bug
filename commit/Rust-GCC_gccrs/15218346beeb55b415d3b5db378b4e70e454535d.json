{"sha": "15218346beeb55b415d3b5db378b4e70e454535d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTUyMTgzNDZiZWViNTViNDE1ZDNiNWRiMzc4YjRlNzBlNDU0NTM1ZA==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-05-08T00:26:08Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-05-08T00:26:08Z"}, "message": "re PR c++/27447 (ICE on invalid ptr-to-member-function)\n\n\tPR c++/27447\n\t* decl2.c (build_memfn_type): Skip invalid functions and class types.\n\n\t* g++.dg/other/ptrmem7.C: New test.\n\nFrom-SVN: r113615", "tree": {"sha": "673bdd2ddc7b3a78d3beea7aec96671c36be06f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/673bdd2ddc7b3a78d3beea7aec96671c36be06f5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15218346beeb55b415d3b5db378b4e70e454535d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15218346beeb55b415d3b5db378b4e70e454535d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15218346beeb55b415d3b5db378b4e70e454535d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15218346beeb55b415d3b5db378b4e70e454535d/comments", "author": null, "committer": null, "parents": [{"sha": "abf5fd2fab6d66bfeba0c7f8d63cfd40fa23df32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abf5fd2fab6d66bfeba0c7f8d63cfd40fa23df32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abf5fd2fab6d66bfeba0c7f8d63cfd40fa23df32"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "a357204e4a62cf1a46f2bc549ebff912ad18d951", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=15218346beeb55b415d3b5db378b4e70e454535d", "patch": "@@ -1,3 +1,8 @@\n+2006-05-08  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27447\n+\t* decl2.c (build_memfn_type): Skip invalid functions and class types.\n+\n 2006-05-06  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c++/27427"}, {"sha": "f75c4ab602aeb9d35ede97c23dfcaed6edd60483", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=15218346beeb55b415d3b5db378b4e70e454535d", "patch": "@@ -114,6 +114,9 @@ build_memfn_type (tree fntype, tree ctype, cp_cv_quals quals)\n   tree raises;\n   int type_quals;\n \n+  if (fntype == error_mark_node || ctype == error_mark_node)\n+    return error_mark_node;\n+\n   type_quals = quals & ~TYPE_QUAL_RESTRICT;\n   ctype = cp_build_qualified_type (ctype, type_quals);\n   fntype = build_method_type_directly (ctype, TREE_TYPE (fntype),"}, {"sha": "0403b741fdf1c448087b6c88bb799713ef7ee870", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=15218346beeb55b415d3b5db378b4e70e454535d", "patch": "@@ -1,3 +1,8 @@\n+2006-05-08  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/27447\n+\t* g++.dg/other/ptrmem7.C: New test.\n+\n 2006-05-07  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR target/27421"}, {"sha": "e7722b8decee978e887e518d0c6012d9dbeb4bd4", "filename": "gcc/testsuite/g++.dg/other/ptrmem7.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fptrmem7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15218346beeb55b415d3b5db378b4e70e454535d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fptrmem7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fptrmem7.C?ref=15218346beeb55b415d3b5db378b4e70e454535d", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/27447\n+// { dg-do compile }\n+\n+void (A::* p)();  // { dg-error \"declared|token\" }"}]}