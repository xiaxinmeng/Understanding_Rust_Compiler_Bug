{"sha": "af9c6659665205581486c03daf470d17ead42d0f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWY5YzY2NTk2NjUyMDU1ODE0ODZjMDNkYWY0NzBkMTdlYWQ0MmQwZg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2004-08-14T17:54:36Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2004-08-14T17:54:36Z"}, "message": "* c-common.c (shorten_compare): Use force_fit_type directly.\n\nFrom-SVN: r86004", "tree": {"sha": "665e627512574daadffad1bf4e8ba6e0047c458d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/665e627512574daadffad1bf4e8ba6e0047c458d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af9c6659665205581486c03daf470d17ead42d0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9c6659665205581486c03daf470d17ead42d0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af9c6659665205581486c03daf470d17ead42d0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9c6659665205581486c03daf470d17ead42d0f/comments", "author": null, "committer": null, "parents": [{"sha": "1f59091c61e63011e34207a98c81d69368a236ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f59091c61e63011e34207a98c81d69368a236ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f59091c61e63011e34207a98c81d69368a236ea"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "6465583cfa3067169a635c9615f7e5b2ce14a760", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af9c6659665205581486c03daf470d17ead42d0f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af9c6659665205581486c03daf470d17ead42d0f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=af9c6659665205581486c03daf470d17ead42d0f", "patch": "@@ -1,3 +1,7 @@\n+2004-08-14  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* c-common.c (shorten_compare): Use force_fit_type directly.\n+\n 2004-08-14  Gerald Pfeifer  <gerald@pfeifer.com>\n \t    Dimitri Papadopoulos-Orfanos  <papadopo@shfj.cea.fr>\n \t    Dave Korn  <dk@artimi.com>\n@@ -1457,7 +1461,7 @@\n \t* config/i386/xmmintrin.h: Include <mm_malloc.h>.\n \n 2004-08-03  H.J. Lu  <hongjiu.lu@intel.com>\n-\t    Tanguy Fautr\ufffd  <tfautre@pandora.be>\n+\t    Tanguy Fautr\u00c3  <tfautre@pandora.be>\n \n \t* config/i386/pmm_malloc.h: New file.\n "}, {"sha": "1416871cdac1be598dfe8f16657e2460fb66bc21", "filename": "gcc/c-common.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af9c6659665205581486c03daf470d17ead42d0f/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af9c6659665205581486c03daf470d17ead42d0f/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=af9c6659665205581486c03daf470d17ead42d0f", "patch": "@@ -1997,10 +1997,14 @@ shorten_compare (tree *op0_ptr, tree *op1_ptr, tree *restype_ptr,\n \n       if (TREE_TYPE (primop1) != *restype_ptr)\n \t{\n-\t  tree tmp = convert (*restype_ptr, primop1);\n-\t  TREE_OVERFLOW (tmp) = TREE_OVERFLOW (primop1);\n-\t  TREE_CONSTANT_OVERFLOW (tmp) = TREE_CONSTANT_OVERFLOW (primop1);\n-\t  primop1 = tmp;\n+\t  /* Convert primop1 to target type, but do not introduce\n+\t     additional overflow.  We know primop1 is an int_cst.  */\n+\t  tree tmp = build_int_2 (TREE_INT_CST_LOW (primop1),\n+\t\t\t\t  TREE_INT_CST_HIGH (primop1));\n+\n+\t  TREE_TYPE (tmp) = *restype_ptr;\n+\t  primop1 = force_fit_type (tmp, 0, TREE_OVERFLOW (primop1),\n+\t\t\t\t    TREE_CONSTANT_OVERFLOW (primop1));\n \t}\n       if (type != *restype_ptr)\n \t{"}]}