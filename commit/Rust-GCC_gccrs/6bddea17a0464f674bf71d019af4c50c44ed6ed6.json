{"sha": "6bddea17a0464f674bf71d019af4c50c44ed6ed6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJkZGVhMTdhMDQ2NGY2NzRiZjcxZDAxOWFmNGM1MGM0NGVkNmVkNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-11-13T09:45:50Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-11-13T09:45:50Z"}, "message": "re PR rtl-optimization/87918 (ICE in simplify_binary_operation, at simplify-rtx.c:2153 since r264688)\n\n\tPR rtl-optimization/87918\n\t* simplify-rtx.c (simplify_merge_mask): For COMPARISON_P, use\n\tsimplify_gen_relational rather than simplify_gen_binary.\n\n\t* gcc.target/i386/pr87918.c: New test.\n\nFrom-SVN: r266062", "tree": {"sha": "296ffe78d4a9f93adf2af4b393f4f56ee39e92c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/296ffe78d4a9f93adf2af4b393f4f56ee39e92c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6bddea17a0464f674bf71d019af4c50c44ed6ed6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bddea17a0464f674bf71d019af4c50c44ed6ed6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bddea17a0464f674bf71d019af4c50c44ed6ed6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bddea17a0464f674bf71d019af4c50c44ed6ed6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9384a5afd6eac11ce7419869bbd2663fefdf918c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9384a5afd6eac11ce7419869bbd2663fefdf918c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9384a5afd6eac11ce7419869bbd2663fefdf918c"}], "stats": {"total": 41, "additions": 38, "deletions": 3}, "files": [{"sha": "14a310ef99f89bdadb0c3e3f4a933460bcafc453", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6bddea17a0464f674bf71d019af4c50c44ed6ed6", "patch": "@@ -1,3 +1,9 @@\n+2018-11-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/87918\n+\t* simplify-rtx.c (simplify_merge_mask): For COMPARISON_P, use\n+\tsimplify_gen_relational rather than simplify_gen_binary.\n+\n 2018-11-13  Richard Biener  <rguenther@suse.de>\n \n \t* tree-ssanames.h (set_range_info): Use value_range_base."}, {"sha": "db8af2f76928ba2225fd66a541d4d94a514aca93", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=6bddea17a0464f674bf71d019af4c50c44ed6ed6", "patch": "@@ -5647,9 +5647,19 @@ simplify_merge_mask (rtx x, rtx mask, int op)\n       rtx top0 = simplify_merge_mask (XEXP (x, 0), mask, op);\n       rtx top1 = simplify_merge_mask (XEXP (x, 1), mask, op);\n       if (top0 || top1)\n-\treturn simplify_gen_binary (GET_CODE (x), GET_MODE (x),\n-\t\t\t\t    top0 ? top0 : XEXP (x, 0),\n-\t\t\t\t    top1 ? top1 : XEXP (x, 1));\n+\t{\n+\t  if (COMPARISON_P (x))\n+\t    return simplify_gen_relational (GET_CODE (x), GET_MODE (x),\n+\t\t\t\t\t    GET_MODE (XEXP (x, 0)) != VOIDmode\n+\t\t\t\t\t    ? GET_MODE (XEXP (x, 0))\n+\t\t\t\t\t    : GET_MODE (XEXP (x, 1)),\n+\t\t\t\t\t    top0 ? top0 : XEXP (x, 0),\n+\t\t\t\t\t    top1 ? top1 : XEXP (x, 1));\n+\t  else\n+\t    return simplify_gen_binary (GET_CODE (x), GET_MODE (x),\n+\t\t\t\t\ttop0 ? top0 : XEXP (x, 0),\n+\t\t\t\t\ttop1 ? top1 : XEXP (x, 1));\n+\t}\n     }\n   if (GET_RTX_CLASS (GET_CODE (x)) == RTX_TERNARY\n       && VECTOR_MODE_P (GET_MODE (XEXP (x, 0)))"}, {"sha": "1427960e5349f96841e3f03cacdd312114d4540a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6bddea17a0464f674bf71d019af4c50c44ed6ed6", "patch": "@@ -1,3 +1,8 @@\n+2018-11-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/87918\n+\t* gcc.target/i386/pr87918.c: New test.\n+\n 2018-11-13  Alan Modra  <amodra@gmail.com>\n \n \t* gcc.target/powerpc/rotmask.c: New."}, {"sha": "dd62910a5391d6f46adf15caa6339a3e8f423ce9", "filename": "gcc/testsuite/gcc.target/i386/pr87918.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr87918.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bddea17a0464f674bf71d019af4c50c44ed6ed6/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr87918.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr87918.c?ref=6bddea17a0464f674bf71d019af4c50c44ed6ed6", "patch": "@@ -0,0 +1,14 @@\n+/* PR rtl-optimization/87918 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -msse2\" } */\n+\n+#include <x86intrin.h>\n+\n+__m128 b, c, d;\n+\n+void\n+foo (float f)\n+{\n+  c = _mm_set_ss (f);\n+  d = _mm_cmple_ss (c, b);\n+}"}]}