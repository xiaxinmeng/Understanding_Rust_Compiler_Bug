{"sha": "efef2a5f2a6d41108e7df6f5d5e881d3073feae6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWZlZjJhNWYyYTZkNDExMDhlN2RmNmY1ZDVlODgxZDMwNzNmZWFlNg==", "commit": {"author": {"name": "Per Bothner", "email": "pbothner@apple.com", "date": "2003-10-02T06:54:46Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2003-10-02T06:54:46Z"}, "message": "c-lex.c (src_line): Remove unneeded static variable.\n\n\n\t* c-lex.c (src_line):   Remove unneeded static variable.\n\t(cb_line_change):  Set input_line directly, instead of src_line.\n\t(get_non_padding_token):  We no longer need to compensate for the\n\t\"horrible things\" the C++ front-end does with the current line number,\n\nFrom-SVN: r72010", "tree": {"sha": "6ced526dc77310f01212932e76657af35afe968b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ced526dc77310f01212932e76657af35afe968b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/efef2a5f2a6d41108e7df6f5d5e881d3073feae6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efef2a5f2a6d41108e7df6f5d5e881d3073feae6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efef2a5f2a6d41108e7df6f5d5e881d3073feae6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efef2a5f2a6d41108e7df6f5d5e881d3073feae6/comments", "author": null, "committer": null, "parents": [{"sha": "c15c90bbfe4553f5413341d61e8aa29caf2f647f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c15c90bbfe4553f5413341d61e8aa29caf2f647f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c15c90bbfe4553f5413341d61e8aa29caf2f647f"}], "stats": {"total": 17, "additions": 8, "deletions": 9}, "files": [{"sha": "3bad41701698de2b67016847135f1040d41a2deb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efef2a5f2a6d41108e7df6f5d5e881d3073feae6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efef2a5f2a6d41108e7df6f5d5e881d3073feae6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=efef2a5f2a6d41108e7df6f5d5e881d3073feae6", "patch": "@@ -1,3 +1,10 @@\n+2003-10-01  Per Bothner  <pbothner@apple.com>\n+\n+\t* c-lex.c (src_line):   Remove unneeded static variable.\n+\t(cb_line_change):  Set input_line directly, instead of src_line.\n+\t(get_non_padding_token):  We no longer need to compensate for the\n+\t\"horrible things\" the C++ front-end does with the current line number,\n+\n 2003-10-01  Zack Weinberg  <zack@codesourcery.com>\n \n \t* target.h (init_libfuncs): New hook."}, {"sha": "f3cdd3cffb09925c2cb2252662e3bb1bb1c11d81", "filename": "gcc/c-lex.c", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/efef2a5f2a6d41108e7df6f5d5e881d3073feae6/gcc%2Fc-lex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/efef2a5f2a6d41108e7df6f5d5e881d3073feae6/gcc%2Fc-lex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-lex.c?ref=efef2a5f2a6d41108e7df6f5d5e881d3073feae6", "patch": "@@ -45,9 +45,6 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n /* The current line map.  */\n static const struct line_map *map;\n \n-/* The line used to refresh the lineno global variable after each token.  */\n-static unsigned int src_lineno;\n-\n /* We may keep statistics about how long which files took to compile.  */\n static int header_time, body_time;\n static splay_tree file_info_tree;\n@@ -202,7 +199,7 @@ cb_line_change (cpp_reader *pfile ATTRIBUTE_UNUSED, const cpp_token *token,\n   if (token->type == CPP_EOF || parsing_args)\n     return;\n \n-  src_lineno = SOURCE_LINE (map, token->line);\n+  input_line = SOURCE_LINE (map, token->line);\n }\n \n static void\n@@ -317,11 +314,6 @@ get_nonpadding_token (void)\n   while (tok->type == CPP_PADDING);\n   timevar_pop (TV_CPP);\n \n-  /* The C++ front end does horrible things with the current line\n-     number.  To ensure an accurate line number, we must reset it\n-     every time we advance a token.  */\n-  input_line = src_lineno;\n-\n   return tok;\n }  \n "}]}