{"sha": "0b11d702dbe669203a2f36430892905c526e03ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGIxMWQ3MDJkYmU2NjkyMDNhMmYzNjQzMDg5MjkwNWM1MjZlMDNhYg==", "commit": {"author": {"name": "Michael Matz", "email": "matz@suse.de", "date": "2011-08-26T16:02:17Z"}, "committer": {"name": "Michael Matz", "email": "matz@gcc.gnu.org", "date": "2011-08-26T16:02:17Z"}, "message": "re PR lto/50165 (Huge build time regression (Firefox lto build))\n\n\tPR lto/50165\n\t* lto-streamer-in.c (canon_file_name): Initialize new_slot->len;\n\tdon't call strlen twice, use memcpy.\n\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r178118", "tree": {"sha": "e68f12f2d233581eae7cbc7118f64ed2260e8e29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e68f12f2d233581eae7cbc7118f64ed2260e8e29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b11d702dbe669203a2f36430892905c526e03ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b11d702dbe669203a2f36430892905c526e03ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b11d702dbe669203a2f36430892905c526e03ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b11d702dbe669203a2f36430892905c526e03ab/comments", "author": {"login": "susematz", "id": 4117296, "node_id": "MDQ6VXNlcjQxMTcyOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4117296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/susematz", "html_url": "https://github.com/susematz", "followers_url": "https://api.github.com/users/susematz/followers", "following_url": "https://api.github.com/users/susematz/following{/other_user}", "gists_url": "https://api.github.com/users/susematz/gists{/gist_id}", "starred_url": "https://api.github.com/users/susematz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/susematz/subscriptions", "organizations_url": "https://api.github.com/users/susematz/orgs", "repos_url": "https://api.github.com/users/susematz/repos", "events_url": "https://api.github.com/users/susematz/events{/privacy}", "received_events_url": "https://api.github.com/users/susematz/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f13677ba9982a07d1892ebff6a77666f6eca0ab6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f13677ba9982a07d1892ebff6a77666f6eca0ab6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f13677ba9982a07d1892ebff6a77666f6eca0ab6"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "1ec7edc0d9902e6a7b580ef606f8f1b720a2b112", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b11d702dbe669203a2f36430892905c526e03ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b11d702dbe669203a2f36430892905c526e03ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0b11d702dbe669203a2f36430892905c526e03ab", "patch": "@@ -1,3 +1,10 @@\n+2011-08-26  Michael Matz  <matz@suse.de>\n+\t    Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR lto/50165\n+\t* lto-streamer-in.c (canon_file_name): Initialize new_slot->len;\n+\tdon't call strlen twice, use memcpy.\n+\n 2011-08-26  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/bmi2intrin.h: Allow in <immintrin.h>."}, {"sha": "bae21d5bc4a5518e2dad0b0735019c90399a3cb8", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b11d702dbe669203a2f36430892905c526e03ab/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b11d702dbe669203a2f36430892905c526e03ab/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=0b11d702dbe669203a2f36430892905c526e03ab", "patch": "@@ -98,21 +98,22 @@ canon_file_name (const char *string)\n {\n   void **slot;\n   struct string_slot s_slot;\n+  size_t len = strlen (string);\n+\n   s_slot.s = string;\n-  s_slot.len = strlen (string);\n+  s_slot.len = len;\n \n   slot = htab_find_slot (file_name_hash_table, &s_slot, INSERT);\n   if (*slot == NULL)\n     {\n-      size_t len;\n       char *saved_string;\n       struct string_slot *new_slot;\n \n-      len = strlen (string);\n       saved_string = (char *) xmalloc (len + 1);\n       new_slot = XCNEW (struct string_slot);\n-      strcpy (saved_string, string);\n+      memcpy (saved_string, string, len + 1);\n       new_slot->s = saved_string;\n+      new_slot->len = len;\n       *slot = new_slot;\n       return saved_string;\n     }"}]}