{"sha": "108c3c88d7273be093ff1431760bff5774381ac1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTA4YzNjODhkNzI3M2JlMDkzZmYxNDMxNzYwYmZmNTc3NDM4MWFjMQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2017-07-26T08:52:37Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2017-07-26T08:52:37Z"}, "message": "Move non-local goto expansion after parm_birth_insn (PR sanitize/81186).\n\n2017-07-26  Martin Liska  <mliska@suse.cz>\n\n\tPR sanitize/81186\n\t* function.c (expand_function_start): Make expansion of\n\tnonlocal_goto_save_area after parm_birth_insn.\n2017-07-26  Martin Liska  <mliska@suse.cz>\n\n\tPR sanitize/81186\n\t* gcc.dg/asan/pr81186.c: New test.\n\nFrom-SVN: r250561", "tree": {"sha": "e6e7217bb711dfa24d97cebd3c4daad78029b430", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6e7217bb711dfa24d97cebd3c4daad78029b430"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/108c3c88d7273be093ff1431760bff5774381ac1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/108c3c88d7273be093ff1431760bff5774381ac1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/108c3c88d7273be093ff1431760bff5774381ac1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/108c3c88d7273be093ff1431760bff5774381ac1/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9cda17b5c6411df40b865838bc99d55709d7ae21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cda17b5c6411df40b865838bc99d55709d7ae21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cda17b5c6411df40b865838bc99d55709d7ae21"}], "stats": {"total": 49, "additions": 39, "deletions": 10}, "files": [{"sha": "2adda50f195798e4a0a0fc7ffc9a6806dfd3f827", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=108c3c88d7273be093ff1431760bff5774381ac1", "patch": "@@ -1,3 +1,9 @@\n+2017-07-26  Martin Liska  <mliska@suse.cz>\n+\n+\tPR sanitize/81186\n+\t* function.c (expand_function_start): Make expansion of\n+\tnonlocal_goto_save_area after parm_birth_insn.\n+\n 2017-07-26  Sebastian Huber  <sebastian.huber@embedded-brains.de>\n \n \t* config/sparc/sparc.c (sparc_option_override): Remove MASK_FPU"}, {"sha": "62e72eb2a9ff874e900e63cc6e3a50bd7b51ffa2", "filename": "gcc/function.c", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=108c3c88d7273be093ff1431760bff5774381ac1", "patch": "@@ -5254,6 +5254,16 @@ expand_function_start (tree subr)\n \t}\n     }\n \n+  /* The following was moved from init_function_start.\n+     The move is supposed to make sdb output more accurate.  */\n+  /* Indicate the beginning of the function body,\n+     as opposed to parm setup.  */\n+  emit_note (NOTE_INSN_FUNCTION_BEG);\n+\n+  gcc_assert (NOTE_P (get_last_insn ()));\n+\n+  parm_birth_insn = get_last_insn ();\n+\n   /* If the function receives a non-local goto, then store the\n      bits we need to restore the frame pointer.  */\n   if (cfun->nonlocal_goto_save_area)\n@@ -5275,16 +5285,6 @@ expand_function_start (tree subr)\n       update_nonlocal_goto_save_area ();\n     }\n \n-  /* The following was moved from init_function_start.\n-     The move is supposed to make sdb output more accurate.  */\n-  /* Indicate the beginning of the function body,\n-     as opposed to parm setup.  */\n-  emit_note (NOTE_INSN_FUNCTION_BEG);\n-\n-  gcc_assert (NOTE_P (get_last_insn ()));\n-\n-  parm_birth_insn = get_last_insn ();\n-\n   if (crtl->profile)\n     {\n #ifdef PROFILE_HOOK"}, {"sha": "0794a290aab3703193c8d2bd08316c8ed8a9cfa9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=108c3c88d7273be093ff1431760bff5774381ac1", "patch": "@@ -1,3 +1,8 @@\n+2017-07-26  Martin Liska  <mliska@suse.cz>\n+\n+\tPR sanitize/81186\n+\t* gcc.dg/asan/pr81186.c: New test.\n+\n 2017-07-25  Carl Love  <cel@us.ibm.com>\n \n \t* gcc.target/powerpc/builtins-4-p9-runnable.c:  Add test file for"}, {"sha": "7f0f672ca40a3394226f79746385535c18478b27", "filename": "gcc/testsuite/gcc.dg/asan/pr81186.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fpr81186.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/108c3c88d7273be093ff1431760bff5774381ac1/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fpr81186.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fasan%2Fpr81186.c?ref=108c3c88d7273be093ff1431760bff5774381ac1", "patch": "@@ -0,0 +1,18 @@\n+/* PR sanitizer/81186 */\n+/* { dg-do run } */\n+\n+int\n+main ()\n+{\n+  __label__ l;\n+  void f ()\n+  {\n+    int a[123];\n+\n+    goto l;\n+  }\n+\n+  f ();\n+l:\n+  return 0;\n+}"}]}