{"sha": "d4360477682363406d83d61bedcdfcfd6d7af488", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQzNjA0Nzc2ODIzNjM0MDZkODNkNjFiZWRjZGZjZmQ2ZDdhZjQ4OA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2017-07-03T14:16:59Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2017-07-03T14:16:59Z"}, "message": "configure.ac: Set srcdir when sourcing config-lang.in fragments.\n\n\t* configure.ac: Set srcdir when sourcing config-lang.in fragments.\n\t* configure: Rebuilt.\n\n\tgcc/objcp/\n\t* config-lang.in: Source cp/config-lang.in, sort objc++ gtfiles list.\n\nFrom-SVN: r249922", "tree": {"sha": "cf24b692c1a3b4105d4d0c2d499b906f348c37cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf24b692c1a3b4105d4d0c2d499b906f348c37cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4360477682363406d83d61bedcdfcfd6d7af488", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4360477682363406d83d61bedcdfcfd6d7af488", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4360477682363406d83d61bedcdfcfd6d7af488", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4360477682363406d83d61bedcdfcfd6d7af488/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9dc9ae7437b85eaed48bdc32d796af3a88f2b50f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dc9ae7437b85eaed48bdc32d796af3a88f2b50f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dc9ae7437b85eaed48bdc32d796af3a88f2b50f"}], "stats": {"total": 53, "additions": 45, "deletions": 8}, "files": [{"sha": "f0af90c07df8d06352ab30ec9756785141e75d35", "filename": "ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4360477682363406d83d61bedcdfcfd6d7af488/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4360477682363406d83d61bedcdfcfd6d7af488/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=d4360477682363406d83d61bedcdfcfd6d7af488", "patch": "@@ -1,3 +1,8 @@\n+2017-07-03  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* configure.ac: Set srcdir when sourcing config-lang.in fragments.\n+\t* configure: Rebuilt.\n+\n 2017-07-03  Bernd Schmidt  <bschmidt@redhat.com>\n \n \t* MAINTAINERS: Readd myself for c6x."}, {"sha": "8559fb6e9639a966ebe60356ea3618097415a1da", "filename": "configure", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4360477682363406d83d61bedcdfcfd6d7af488/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4360477682363406d83d61bedcdfcfd6d7af488/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=d4360477682363406d83d61bedcdfcfd6d7af488", "patch": "@@ -6166,7 +6166,12 @@ if test -d ${srcdir}/gcc; then\n         language=\n         lang_requires=\n         lang_requires_boot_languages=\n-        . ${lang_frag}\n+        # set srcdir during sourcing lang_frag to the gcc dir.\n+        # Sadly overriding srcdir on the . line doesn't work in plain sh as it\n+        # polutes this shell\n+        saved_srcdir=${srcdir}\n+        srcdir=${srcdir}/gcc . ${lang_frag}\n+        srcdir=${saved_srcdir}\n         for other in ${lang_requires} ${lang_requires_boot_languages}; do\n           case ,${enable_languages}, in\n \t    *,$other,*) ;;\n@@ -6241,7 +6246,10 @@ if test -d ${srcdir}/gcc; then\n         subdir_requires=\n         boot_language=no\n         build_by_default=yes\n-        . ${lang_frag}\n+        # set srcdir during sourcing.  See above about save & restore\n+        saved_srcdir=${srcdir}\n+        srcdir=${srcdir}/gcc . ${lang_frag}\n+        srcdir=${saved_srcdir}\n         if test x${language} = x; then\n           echo \"${lang_frag} doesn't set \\$language.\" 1>&2\n           exit 1"}, {"sha": "24645d88cf96acb6c5421fd2c4903c66fb5b5d6c", "filename": "configure.ac", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4360477682363406d83d61bedcdfcfd6d7af488/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4360477682363406d83d61bedcdfcfd6d7af488/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=d4360477682363406d83d61bedcdfcfd6d7af488", "patch": "@@ -1839,7 +1839,12 @@ if test -d ${srcdir}/gcc; then\n         language=\n         lang_requires=\n         lang_requires_boot_languages=\n-        . ${lang_frag}\n+        # set srcdir during sourcing lang_frag to the gcc dir.\n+        # Sadly overriding srcdir on the . line doesn't work in plain sh as it\n+        # polutes this shell\n+        saved_srcdir=${srcdir}\n+        srcdir=${srcdir}/gcc . ${lang_frag}\n+        srcdir=${saved_srcdir}\n         for other in ${lang_requires} ${lang_requires_boot_languages}; do\n           case ,${enable_languages}, in\n \t    *,$other,*) ;;\n@@ -1914,7 +1919,10 @@ if test -d ${srcdir}/gcc; then\n         subdir_requires=\n         boot_language=no\n         build_by_default=yes\n-        . ${lang_frag}\n+        # set srcdir during sourcing.  See above about save & restore\n+        saved_srcdir=${srcdir}\n+        srcdir=${srcdir}/gcc . ${lang_frag}\n+        srcdir=${saved_srcdir}\n         if test x${language} = x; then\n           echo \"${lang_frag} doesn't set \\$language.\" 1>&2\n           exit 1"}, {"sha": "5b4b6bdf2f02eccf4593750e129b4171a2923246", "filename": "gcc/objcp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4360477682363406d83d61bedcdfcfd6d7af488/gcc%2Fobjcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4360477682363406d83d61bedcdfcfd6d7af488/gcc%2Fobjcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjcp%2FChangeLog?ref=d4360477682363406d83d61bedcdfcfd6d7af488", "patch": "@@ -1,3 +1,7 @@\n+2017-07-03  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* config-lang.in: Source cp/config-lang.in, sort objc++ gtfiles list.\n+\n 2017-06-02  Nathan Sidwell  <nathan@acm.org>\n \n \t* objcp-decl.h (SIZEOF_OBJC_TYPE_LANG_SPECIFIC): Use lang_type."}, {"sha": "5d2b1de8e5af8beda51465233aca03dfbeef3286", "filename": "gcc/objcp/config-lang.in", "status": "modified", "additions": 16, "deletions": 4, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4360477682363406d83d61bedcdfcfd6d7af488/gcc%2Fobjcp%2Fconfig-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4360477682363406d83d61bedcdfcfd6d7af488/gcc%2Fobjcp%2Fconfig-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjcp%2Fconfig-lang.in?ref=d4360477682363406d83d61bedcdfcfd6d7af488", "patch": "@@ -43,8 +43,20 @@ subdir_requires=\"objc cp\"\n # avoid having the GC stuff from that header being added to gtype-cp.h\n # or gtype-objc.h.\n \n-# This list is separated in two parts: the first one is identical to\n-# the C++ one, the second one contains our ObjC++ additions.\n-gtfiles=\"\\$(srcdir)/cp/rtti.c \\$(srcdir)/cp/mangle.c \\$(srcdir)/cp/name-lookup.h \\$(srcdir)/cp/name-lookup.c \\$(srcdir)/cp/cp-tree.h \\$(srcdir)/cp/decl.h \\$(srcdir)/cp/call.c \\$(srcdir)/cp/decl.c \\$(srcdir)/cp/decl2.c \\$(srcdir)/cp/pt.c \\$(srcdir)/cp/repo.c \\$(srcdir)/cp/semantics.c \\$(srcdir)/cp/tree.c \\$(srcdir)/cp/parser.h \\$(srcdir)/cp/parser.c \\$(srcdir)/cp/method.c \\$(srcdir)/cp/typeck2.c \\$(srcdir)/c-family/c-common.c \\$(srcdir)/c-family/c-common.h \\$(srcdir)/c-family/c-objc.h \\$(srcdir)/c-family/c-lex.c \\$(srcdir)/c-family/c-pragma.h \\$(srcdir)/c-family/c-pragma.c \\$(srcdir)/cp/class.c \\$(srcdir)/cp/cp-objcp-common.c \\$(srcdir)/cp/except.c \\$(srcdir)/cp/vtable-class-hierarchy.c \\$(srcdir)/cp/constexpr.c \\$(srcdir)/cp/cp-gimplify.c \\\n-\\$(srcdir)/objc/objc-map.h \\$(srcdir)/objc/objc-act.h \\$(srcdir)/objc/objc-act.c \\$(srcdir)/objc/objc-runtime-shared-support.c \\$(srcdir)/objc/objc-gnu-runtime-abi-01.c \\$(srcdir)/objc/objc-next-runtime-abi-01.c \\$(srcdir)/objc/objc-next-runtime-abi-02.c \\$(srcdir)/c-family/c-cppbuiltin.c\"\n+# Get the C++ FE's gtfiles list.  Do this in a subshell, so we can\n+# extract exactly the gtfiles var, but munge cp-lang.c into objcp-lang.c.\n+gtfiles=\"$(. $srcdir/cp/config-lang.in ; \\\n+  echo $gtfiles | sed 's+/cp/cp-lang.c +/objcp/objcp-lang.c +')\"\n+\n+# Now add our special bits to it.  Please keep this list sorted.\n+gtfiles=\"$gtfiles \\\n+\\$(srcdir)/objc/objc-act.h \\\n+\\$(srcdir)/objc/objc-map.h \\\n+\\$(srcdir)/c-family/c-cppbuiltin.c \\\n+\\$(srcdir)/objc/objc-act.c \\\n+\\$(srcdir)/objc/objc-gnu-runtime-abi-01.c \\\n+\\$(srcdir)/objc/objc-next-runtime-abi-01.c \\\n+\\$(srcdir)/objc/objc-next-runtime-abi-02.c \\\n+\\$(srcdir)/objc/objc-runtime-shared-support.c \\\n+\"\n "}]}