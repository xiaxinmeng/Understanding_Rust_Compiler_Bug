{"sha": "41cbc04c44b5904d70d165d95d26e53896a5c82a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDFjYmMwNGM0NGI1OTA0ZDcwZDE2NWQ5NWQyNmU1Mzg5NmE1YzgyYQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2000-02-24T09:48:18Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2000-02-24T09:48:18Z"}, "message": "decl.c (grokdeclarator): Diagnose qualifiers on non-member function type, rather than ICE.\n\n\t* decl.c (grokdeclarator): Diagnose qualifiers on non-member\n\tfunction type, rather than ICE.\n\nFrom-SVN: r32132", "tree": {"sha": "250609ef792fde5f8a4dc2533e5093f47b96623e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/250609ef792fde5f8a4dc2533e5093f47b96623e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/41cbc04c44b5904d70d165d95d26e53896a5c82a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41cbc04c44b5904d70d165d95d26e53896a5c82a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41cbc04c44b5904d70d165d95d26e53896a5c82a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41cbc04c44b5904d70d165d95d26e53896a5c82a/comments", "author": null, "committer": null, "parents": [{"sha": "ee4191888029e288e1a3c4cb2371d16a6a95d7b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee4191888029e288e1a3c4cb2371d16a6a95d7b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee4191888029e288e1a3c4cb2371d16a6a95d7b5"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "36b8144dc13530a3195677b0727910fa2794bb2c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41cbc04c44b5904d70d165d95d26e53896a5c82a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41cbc04c44b5904d70d165d95d26e53896a5c82a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=41cbc04c44b5904d70d165d95d26e53896a5c82a", "patch": "@@ -1,3 +1,8 @@\n+2000-02-24  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* decl.c (grokdeclarator): Diagnose qualifiers on non-member\n+\tfunction type, rather than ICE.\n+\n 2000-02-23  Jason Merrill  <jason@casey.cygnus.com>\n \n \t* decl.c (grokdeclarator): Call decl_type_access_control."}, {"sha": "cafe3938b16156bf7511f9ca4979faa73a45c534", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41cbc04c44b5904d70d165d95d26e53896a5c82a/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41cbc04c44b5904d70d165d95d26e53896a5c82a/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=41cbc04c44b5904d70d165d95d26e53896a5c82a", "patch": "@@ -10788,14 +10788,19 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \t}\n       else if (quals)\n \t{\n-\t  tree dummy = build_decl (TYPE_DECL, declarator, type);\n \t  if (ctype == NULL_TREE)\n \t    {\n-\t      my_friendly_assert (TREE_CODE (type) == METHOD_TYPE, 159);\n-\t      ctype = TYPE_METHOD_BASETYPE (type);\n+\t      if (TREE_CODE (type) != METHOD_TYPE)\n+\t        cp_error (\"invalid qualifiers on non-member function type\");\n+\t      else\n+\t        ctype = TYPE_METHOD_BASETYPE (type);\n+\t    }\n+\t  if (ctype)\n+\t    {\n+\t      tree dummy = build_decl (TYPE_DECL, declarator, type);\n+\t      grok_method_quals (ctype, dummy, quals);\n+\t      type = TREE_TYPE (dummy);\n \t    }\n-\t  grok_method_quals (ctype, dummy, quals);\n-\t  type = TREE_TYPE (dummy);\n \t}\n \n       return type;"}]}