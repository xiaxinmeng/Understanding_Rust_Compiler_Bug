{"sha": "2e8686cb51896e0f89b353ae599c2c1ac5b960d6", "node_id": "C_kwDOANBUbNoAKDJlODY4NmNiNTE4OTZlMGY4OWIzNTNhZTU5OWMyYzFhYzViOTYwZDY", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2023-03-03T04:46:56Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2023-03-03T04:46:56Z"}, "message": "[c++] suppress redundant null-addr warn in pfn from pmfn\n\nWhen TARGET_PTRMEMFUNC_VBIT_LOCATION == ptrmemfunc_vbit_in_delta, when\nwe warn about comparing a pointer-to-member-function with NULL, we\nalso warn about comparing the pointer-to-function extracted from it\nwith NULL, which is redundant.  Suppress the redundant warning.\n\n\nfor  gcc/cp/ChangeLog\n\n\t* typeck.cc (cp_build_binary_op): Suppress redundant warning\n\tfor pfn null test in pmfn test with vbit-in-delta.", "tree": {"sha": "e9975d689b75ff71cea184e17cfc6b3e0eac64a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9975d689b75ff71cea184e17cfc6b3e0eac64a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e8686cb51896e0f89b353ae599c2c1ac5b960d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e8686cb51896e0f89b353ae599c2c1ac5b960d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e8686cb51896e0f89b353ae599c2c1ac5b960d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e8686cb51896e0f89b353ae599c2c1ac5b960d6/comments", "author": null, "committer": null, "parents": [{"sha": "dc1be3eb33c7f37ac45ad0ccf5be063134a513be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc1be3eb33c7f37ac45ad0ccf5be063134a513be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc1be3eb33c7f37ac45ad0ccf5be063134a513be"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "d5a3e501d8e9121c4d878beddea7c82d9121c2c4", "filename": "gcc/cp/typeck.cc", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e8686cb51896e0f89b353ae599c2c1ac5b960d6/gcc%2Fcp%2Ftypeck.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e8686cb51896e0f89b353ae599c2c1ac5b960d6/gcc%2Fcp%2Ftypeck.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.cc?ref=2e8686cb51896e0f89b353ae599c2c1ac5b960d6", "patch": "@@ -5780,11 +5780,18 @@ cp_build_binary_op (const op_location_t &location,\n \n \t      pfn0 = pfn_from_ptrmemfunc (op0);\n \t      delta0 = delta_from_ptrmemfunc (op0);\n-\t      e1 = cp_build_binary_op (location,\n-\t\t\t\t       EQ_EXPR,\n-\t  \t\t\t       pfn0,\n-\t\t\t\t       build_zero_cst (TREE_TYPE (pfn0)),\n-\t\t\t\t       complain);\n+\t      {\n+\t\t/* If we will warn below about a null-address compare\n+\t\t   involving the orig_op0 ptrmemfunc, we'd likely also\n+\t\t   warn about the pfn0's null-address compare, and\n+\t\t   that would be redundant, so suppress it.  */\n+\t\twarning_sentinel ws (warn_address);\n+\t\te1 = cp_build_binary_op (location,\n+\t\t\t\t\t EQ_EXPR,\n+\t\t\t\t\t pfn0,\n+\t\t\t\t\t build_zero_cst (TREE_TYPE (pfn0)),\n+\t\t\t\t\t complain);\n+\t      }\n \t      e2 = cp_build_binary_op (location,\n \t\t\t\t       BIT_AND_EXPR,\n \t\t\t\t       delta0,"}]}