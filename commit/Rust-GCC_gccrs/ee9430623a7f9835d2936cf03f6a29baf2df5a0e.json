{"sha": "ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWU5NDMwNjIzYTdmOTgzNWQyOTM2Y2YwM2Y2YTI5YmFmMmRmNWEwZQ==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2005-03-13T18:46:36Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-03-13T18:46:36Z"}, "message": "re PR fortran/16907 (Non-integer array indices rejected)\n\nfortran/\nPR fortran/16907\n* resolve.c (gfc_resolve_index): Allow REAL indices as an extension.\n\ntestsuite/\nPR fortran/16907\n* gfortran.dg/real_index_1.f90: New test.\n\nFrom-SVN: r96385", "tree": {"sha": "3f11461daa267e7e0afe1b9b2ddb5b164fc7f4a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3f11461daa267e7e0afe1b9b2ddb5b164fc7f4a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f9c06ca82a4d5b10fd2b88e3267036c4f12c779", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f9c06ca82a4d5b10fd2b88e3267036c4f12c779", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f9c06ca82a4d5b10fd2b88e3267036c4f12c779"}], "stats": {"total": 34, "additions": 29, "deletions": 5}, "files": [{"sha": "f116966ebdcec945ea521e5afc81aaf65a2bf88c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "patch": "@@ -1,3 +1,8 @@\n+2005-03-13  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/16907\n+\t* resolve.c (gfc_resolve_index): Allow REAL indices as an extension.\n+\n 2005-03-13  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/20323"}, {"sha": "35795c3ff2a3f0fb53001dd6f6539e3abfa2964d", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "patch": "@@ -1701,19 +1701,26 @@ gfc_resolve_index (gfc_expr * index, int check_scalar)\n   if (gfc_resolve_expr (index) == FAILURE)\n     return FAILURE;\n \n-  if (index->ts.type != BT_INTEGER)\n+  if (check_scalar && index->rank != 0)\n     {\n-      gfc_error (\"Array index at %L must be of INTEGER type\", &index->where);\n+      gfc_error (\"Array index at %L must be scalar\", &index->where);\n       return FAILURE;\n     }\n \n-  if (check_scalar && index->rank != 0)\n+  if (index->ts.type != BT_INTEGER && index->ts.type != BT_REAL)\n     {\n-      gfc_error (\"Array index at %L must be scalar\", &index->where);\n+      gfc_error (\"Array index at %L must be of INTEGER type\",\n+\t\t &index->where);\n       return FAILURE;\n     }\n \n-  if (index->ts.kind != gfc_index_integer_kind)\n+  if (index->ts.type == BT_REAL)\n+    if (gfc_notify_std (GFC_STD_GNU, \"Extension: REAL array index at %L\",\n+\t\t\t&index->where) == FAILURE)\n+      return FAILURE;\n+\n+  if (index->ts.kind != gfc_index_integer_kind\n+      || index->ts.type != BT_INTEGER)\n     {\n       ts.type = BT_INTEGER;\n       ts.kind = gfc_index_integer_kind;"}, {"sha": "bcc841588f610acf00173a2060d538e577a6d09a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "patch": "@@ -1,3 +1,8 @@\n+2003-03-13  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/16907\n+\t* gfortran.dg/real_index_1.f90: New test.\n+\n 2005-03-13  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/20323"}, {"sha": "16ceca827748891ea52761a58d1d6b4f089c7816", "filename": "gcc/testsuite/gfortran.dg/real_index_1.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ftestsuite%2Fgfortran.dg%2Freal_index_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee9430623a7f9835d2936cf03f6a29baf2df5a0e/gcc%2Ftestsuite%2Fgfortran.dg%2Freal_index_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Freal_index_1.f90?ref=ee9430623a7f9835d2936cf03f6a29baf2df5a0e", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do run }\n+! PR 16907 : We didn't support REAL array indices as an extension\n+       integer I, A(10)\n+       A = 2\n+       I=A(1.0) ! { dg-warning \"Extension\" }\n+       if (i/=2) call abort ()\n+       end"}]}