{"sha": "c5a62c6fde09060ca31dc302807d1f49fb95eacf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzVhNjJjNmZkZTA5MDYwY2EzMWRjMzAyODA3ZDFmNDlmYjk1ZWFjZg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2011-01-04T23:18:12Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-01-04T23:18:12Z"}, "message": "re PR preprocessor/39213 (Preprocessor ICE with -m64 and --traditional-cpp)\n\n\tPR preprocessor/39213\n\t* directives.c (end_directive): Call _cpp_remove_overlay for deferred\n\tpragmas as well in traditional mode.\n\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r168490", "tree": {"sha": "65c6ea81e590957df7711f8d5092ee7836531093", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/65c6ea81e590957df7711f8d5092ee7836531093"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c5a62c6fde09060ca31dc302807d1f49fb95eacf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5a62c6fde09060ca31dc302807d1f49fb95eacf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5a62c6fde09060ca31dc302807d1f49fb95eacf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5a62c6fde09060ca31dc302807d1f49fb95eacf/comments", "author": null, "committer": null, "parents": [{"sha": "c7f15f802ae87838bdd4491189a4c9fa7d31040e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7f15f802ae87838bdd4491189a4c9fa7d31040e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7f15f802ae87838bdd4491189a4c9fa7d31040e"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "e90f75379d61e8d32908382789327a3719e6d718", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5a62c6fde09060ca31dc302807d1f49fb95eacf/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5a62c6fde09060ca31dc302807d1f49fb95eacf/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=c5a62c6fde09060ca31dc302807d1f49fb95eacf", "patch": "@@ -1,3 +1,10 @@\n+2011-11-04  Eric Botcazou  <ebotcazou@adacore.com>\n+            Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR preprocessor/39213\n+\t* directives.c (end_directive): Call _cpp_remove_overlay for deferred\n+\tpragmas as well in traditional mode.\n+\n 2010-11-17  Ian Lance Taylor  <iant@google.com>\n \n \tPR bootstrap/45538"}, {"sha": "85a17b146c2cbd38ca8edd5625627907ac93611d", "filename": "libcpp/directives.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5a62c6fde09060ca31dc302807d1f49fb95eacf/libcpp%2Fdirectives.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5a62c6fde09060ca31dc302807d1f49fb95eacf/libcpp%2Fdirectives.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fdirectives.c?ref=c5a62c6fde09060ca31dc302807d1f49fb95eacf", "patch": "@@ -281,16 +281,17 @@ start_directive (cpp_reader *pfile)\n static void\n end_directive (cpp_reader *pfile, int skip_line)\n {\n-  if (pfile->state.in_deferred_pragma)\n-    ;\n-  else if (CPP_OPTION (pfile, traditional))\n+  if (CPP_OPTION (pfile, traditional))\n     {\n       /* Revert change of prepare_directive_trad.  */\n-      pfile->state.prevent_expansion--;\n+      if (!pfile->state.in_deferred_pragma)\n+\tpfile->state.prevent_expansion--;\n \n       if (pfile->directive != &dtable[T_DEFINE])\n \t_cpp_remove_overlay (pfile);\n     }\n+  else if (pfile->state.in_deferred_pragma)\n+    ;\n   /* We don't skip for an assembler #.  */\n   else if (skip_line)\n     {"}]}