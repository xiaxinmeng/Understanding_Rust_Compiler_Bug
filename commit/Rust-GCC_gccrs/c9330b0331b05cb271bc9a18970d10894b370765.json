{"sha": "c9330b0331b05cb271bc9a18970d10894b370765", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzkzMzBiMDMzMWIwNWNiMjcxYmM5YTE4OTcwZDEwODk0YjM3MDc2NQ==", "commit": {"author": {"name": "Francois-Xavier Coudert", "email": "coudert@clipper.ens.fr", "date": "2005-05-29T12:22:49Z"}, "committer": {"name": "Fran\u00e7ois-Xavier Coudert", "email": "fxcoudert@gcc.gnu.org", "date": "2005-05-29T12:22:49Z"}, "message": "re PR libfortran/20006 ($ format extension doesn't work)\n\n\tPR libfortran/20006\n\t* io.c (format_item_1): Add check and extension warning for\n\t$ edit descriptor.\n\t* io/format.c (parse_format_list): Set repeat count of $ format\n\tnode to 1.\n\t* io/transfer.c (read_sf): Add g.seen_dollar to the test\n\tconcerning advancing I/O.\n\t(data_transfer_init): Likewise.\n\t(finalize_transfer): Likewise.\n\nFrom-SVN: r100314", "tree": {"sha": "d80d5771a74496d12a3ce051f6bbac51455b8a76", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d80d5771a74496d12a3ce051f6bbac51455b8a76"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9330b0331b05cb271bc9a18970d10894b370765", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9330b0331b05cb271bc9a18970d10894b370765", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9330b0331b05cb271bc9a18970d10894b370765", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9330b0331b05cb271bc9a18970d10894b370765/comments", "author": null, "committer": {"login": "fxcoudert", "id": 1980544, "node_id": "MDQ6VXNlcjE5ODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1980544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxcoudert", "html_url": "https://github.com/fxcoudert", "followers_url": "https://api.github.com/users/fxcoudert/followers", "following_url": "https://api.github.com/users/fxcoudert/following{/other_user}", "gists_url": "https://api.github.com/users/fxcoudert/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxcoudert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxcoudert/subscriptions", "organizations_url": "https://api.github.com/users/fxcoudert/orgs", "repos_url": "https://api.github.com/users/fxcoudert/repos", "events_url": "https://api.github.com/users/fxcoudert/events{/privacy}", "received_events_url": "https://api.github.com/users/fxcoudert/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "12bcc2c1d5754920bd84fd94425501264be56503", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12bcc2c1d5754920bd84fd94425501264be56503", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12bcc2c1d5754920bd84fd94425501264be56503"}], "stats": {"total": 30, "additions": 26, "deletions": 4}, "files": [{"sha": "b10aea28ee1cf28214ca683b99847b2083f81b06", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9330b0331b05cb271bc9a18970d10894b370765/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9330b0331b05cb271bc9a18970d10894b370765/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c9330b0331b05cb271bc9a18970d10894b370765", "patch": "@@ -1,3 +1,9 @@\n+2005-05-29  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n+\n+\tPR libfortran/20006\n+\t* io.c (format_item_1): Add check and extension warning for\n+\t$ edit descriptor.\n+\n 2005-05-28  Steven G. Kargl  <kargls@comcast.net>\n \n \t* arith.c (gfc_arith_init_1): Fix off by one problem;"}, {"sha": "5fae9a2d09429c5016ec8536cdb7b111fcb94dc6", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9330b0331b05cb271bc9a18970d10894b370765/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9330b0331b05cb271bc9a18970d10894b370765/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=c9330b0331b05cb271bc9a18970d10894b370765", "patch": "@@ -491,9 +491,13 @@ check_format (void)\n \n     case FMT_DOLLAR:\n       t = format_lex ();\n+\n+      if (gfc_notify_std (GFC_STD_GNU, \"Extension: $ descriptor at %C\")\n+          == FAILURE)\n+        return FAILURE;\n       if (t != FMT_RPAREN || level > 0)\n \t{\n-\t  error = \"$ must the last specifier\";\n+\t  error = \"$ must be the last specifier\";\n \t  goto syntax;\n \t}\n "}, {"sha": "e816c31c70d0b1eb19990bd3f4a620fac49b2683", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9330b0331b05cb271bc9a18970d10894b370765/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9330b0331b05cb271bc9a18970d10894b370765/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=c9330b0331b05cb271bc9a18970d10894b370765", "patch": "@@ -1,3 +1,13 @@\n+2005-05-29  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n+\n+\tPR libfortran/20006\n+\t* io/format.c (parse_format_list): Set repeat count of $ format\n+\tnode to 1.\n+\t* io/transfer.c (read_sf): Add g.seen_dollar to the test\n+\tconcerning advancing I/O.\n+\t(data_transfer_init): Likewise.\n+\t(finalize_transfer): Likewise.\n+\t\n 2005-05-27  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \t* runtime/in_pack_generic.c:  Adjust copyright years."}, {"sha": "229a937b05bfacc869d39b44e9ad352aff914b06", "filename": "libgfortran/io/format.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9330b0331b05cb271bc9a18970d10894b370765/libgfortran%2Fio%2Fformat.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9330b0331b05cb271bc9a18970d10894b370765/libgfortran%2Fio%2Fformat.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fformat.c?ref=c9330b0331b05cb271bc9a18970d10894b370765", "patch": "@@ -579,6 +579,7 @@ parse_format_list (void)\n \n     case FMT_DOLLAR:\n       get_fnode (&head, &tail, FMT_DOLLAR);\n+      tail->repeat = 1;\n       goto between_desc;\n \n     case FMT_T:"}, {"sha": "46bec834a274f68d7f6268df9c955e6658370dce", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9330b0331b05cb271bc9a18970d10894b370765/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9330b0331b05cb271bc9a18970d10894b370765/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=c9330b0331b05cb271bc9a18970d10894b370765", "patch": "@@ -191,7 +191,7 @@ read_sf (int *length)\n \n \t  /* If we see an EOR during non-advancing I/O, we need to skip\n \t     the rest of the I/O statement.  Set the corresponding flag.  */\n-\t  if (advance_status == ADVANCE_NO)\n+\t  if (advance_status == ADVANCE_NO || g.seen_dollar)\n \t    eor_condition = 1;\n \n \t  /* Without padding, terminate the I/O statement without assigning\n@@ -1187,7 +1187,7 @@ data_transfer_init (int read_flag)\n     }\n   else\n     {\n-      if (advance_status == ADVANCE_YES)\n+      if (advance_status == ADVANCE_YES && !g.seen_dollar)\n \tcurrent_unit->read_bad = 1;\n     }\n \n@@ -1459,11 +1459,12 @@ finalize_transfer (void)\n     {\n       free_fnodes ();\n \n-      if (advance_status == ADVANCE_NO)\n+      if (advance_status == ADVANCE_NO || g.seen_dollar)\n \t{\n \t  /* Most systems buffer lines, so force the partial record\n \t     to be written out.  */\n \t  flush (current_unit->s);\n+\t  g.seen_dollar = 0;\n \t  return;\n \t}\n "}]}