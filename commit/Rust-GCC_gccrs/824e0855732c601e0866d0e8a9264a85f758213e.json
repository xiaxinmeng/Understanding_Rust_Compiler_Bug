{"sha": "824e0855732c601e0866d0e8a9264a85f758213e", "node_id": "C_kwDOANBUbNoAKDgyNGUwODU1NzMyYzYwMWUwODY2ZDBlOGE5MjY0YTg1Zjc1ODIxM2U", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-10-05T09:38:03Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-10-05T14:56:55Z"}, "message": "libstdc++: Add test for std::cmp_greater\n\nThis was omitted from the commit that added these comparisons.\n\nlibstdc++-v3/ChangeLog:\n\n\t* testsuite/20_util/integer_comparisons/greater.cc: New test.", "tree": {"sha": "88803b8024cc33a47c56d8e716c4f55657eb6331", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88803b8024cc33a47c56d8e716c4f55657eb6331"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/824e0855732c601e0866d0e8a9264a85f758213e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/824e0855732c601e0866d0e8a9264a85f758213e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/824e0855732c601e0866d0e8a9264a85f758213e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/824e0855732c601e0866d0e8a9264a85f758213e/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "313193edfc3986c40dedce3d0b41455d0bcdbe43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/313193edfc3986c40dedce3d0b41455d0bcdbe43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/313193edfc3986c40dedce3d0b41455d0bcdbe43"}], "stats": {"total": 61, "additions": 61, "deletions": 0}, "files": [{"sha": "e564d8d03f28281e95e9050052dbf8d16e92e864", "filename": "libstdc++-v3/testsuite/20_util/integer_comparisons/greater.cc", "status": "added", "additions": 61, "deletions": 0, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824e0855732c601e0866d0e8a9264a85f758213e/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Finteger_comparisons%2Fgreater.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824e0855732c601e0866d0e8a9264a85f758213e/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Finteger_comparisons%2Fgreater.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Finteger_comparisons%2Fgreater.cc?ref=824e0855732c601e0866d0e8a9264a85f758213e", "patch": "@@ -0,0 +1,61 @@\n+// { dg-options \"-std=gnu++20\" }\n+// { dg-do run { target c++20 } }\n+\n+#include <utility>\n+#include <limits>\n+#include <testsuite_hooks.h>\n+\n+void\n+test01()\n+{\n+  unsigned int u = std::numeric_limits<unsigned int>::max();\n+  int s = -1;\n+  VERIFY( !std::cmp_greater(s, u) );\n+  VERIFY( std::cmp_greater(u, s) );\n+  u = (unsigned) std::numeric_limits<int>::max() + 1U;\n+  VERIFY( !std::cmp_greater(s, u) );\n+  VERIFY( std::cmp_greater(u, s) );\n+}\n+\n+constexpr bool\n+test02()\n+{\n+  unsigned int u = std::numeric_limits<unsigned int>::max();\n+  int s = -1;\n+  if (std::cmp_greater(s, u))\n+    throw 1;\n+  if (!std::cmp_greater(u, s))\n+    throw 2;\n+  return true;\n+}\n+\n+void\n+test03()\n+{\n+  short ss = -1;\n+  int s = -1;\n+  VERIFY( !std::cmp_greater(s, ss) );\n+  VERIFY( !std::cmp_greater(ss, s) );\n+\n+  unsigned int u = (unsigned int) -1;\n+  VERIFY( !std::cmp_greater(s, u) );\n+  VERIFY( std::cmp_greater(u, s) );\n+  VERIFY( !std::cmp_greater(ss, u) );\n+  VERIFY( std::cmp_greater(u, ss) );\n+\n+  unsigned long long ul = (unsigned long long) -1;\n+  VERIFY( !std::cmp_greater(s, ul) );\n+  VERIFY( std::cmp_greater(ul, s) );\n+  VERIFY( !std::cmp_greater(ss, ul) );\n+  VERIFY( std::cmp_greater(ul, ss) );\n+  VERIFY( !std::cmp_greater(u, ul) );\n+  VERIFY( std::cmp_greater(ul, u) );\n+}\n+\n+int\n+main()\n+{\n+  test01();\n+  static_assert( test02() );\n+  test03();\n+}"}]}