{"sha": "fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmNmNzQ3MWEzOTg1NGM2YmYxN2E2YjU5YmVjYTUyY2Q1NmEwM2NlMg==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-07-07T08:52:48Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-07-07T08:52:48Z"}, "message": "sol2.h (ASM_SPEC): Split into ...\n\n\t* config/sol2.h (ASM_SPEC): Split into ...\n\t(ASM_SPEC_BASE, ASM_PIC_SPEC): ... this.\n\t* config/i386/sol2.h (ASM_SPEC): Define using ASM_SPEC_BASE.\n\t* config/i386/sol2-bi.h (ASM_CPU_SPEC): Redefine.\n\t(ASM_SPEC): Use ASM_SPEC_BASE.\n\t* config/sparc/sol2.h (ASM_SPEC): Redefine.\n\nFrom-SVN: r175957", "tree": {"sha": "6c96e5832d2fe046e0a1383f238b7ea72474a34d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c96e5832d2fe046e0a1383f238b7ea72474a34d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1e6a67d1bd2403979137f1aac0a9d768e641f9b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e6a67d1bd2403979137f1aac0a9d768e641f9b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e6a67d1bd2403979137f1aac0a9d768e641f9b7"}], "stats": {"total": 48, "additions": 32, "deletions": 16}, "files": [{"sha": "ad790d3844d0e5b62fcdf8cdadc3b2ba1f5aca4a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "patch": "@@ -1,3 +1,12 @@\n+2011-07-07  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* config/sol2.h (ASM_SPEC): Split into ...\n+\t(ASM_SPEC_BASE, ASM_PIC_SPEC): ... this.\n+\t* config/i386/sol2.h (ASM_SPEC): Define using ASM_SPEC_BASE.\n+\t* config/i386/sol2-bi.h (ASM_CPU_SPEC): Redefine.\n+\t(ASM_SPEC): Use ASM_SPEC_BASE.\n+\t* config/sparc/sol2.h (ASM_SPEC): Redefine.\n+\n 2011-07-07  Georg-Johann Lay  <avr@gjlay.de>\n \t\n \t* config/avr/avr.md (*reload_insi): Change predicate #1 to"}, {"sha": "a988fa00b93b1fcdeee36db13803029afb40924b", "filename": "gcc/config/i386/sol2-bi.h", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fi386%2Fsol2-bi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fi386%2Fsol2-bi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsol2-bi.h?ref=fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "patch": "@@ -31,15 +31,19 @@ along with GCC; see the file COPYING3.  If not see\n \n /* GNU as understands --32 and --64, but the native Solaris\n    assembler requires -xarch=generic or -xarch=generic64 instead.  */\n-#undef ASM_SPEC\n+#undef ASM_CPU_SPEC\n #ifdef USE_GAS\n-#define ASM_SPEC \"%{m32:--32} %{m64:--64} -s %(asm_cpu)\"\n+#define ASM_CPU_SPEC \"%{m32:--32} %{m64:--64}\"\n #else\n-#define ASM_SPEC \"%{v:-V} %{Qy:} %{!Qn:-Qy} %{Ym,*} \" \\\n-\t\t \"%{m32:-xarch=generic} %{m64:-xarch=generic64} \" \\\n-\t\t \"-s %(asm_cpu)\"\n+#define ASM_CPU_SPEC \"%{m32:-xarch=generic} %{m64:-xarch=generic64}\"\n #endif\n \n+/* Don't let i386/x86-64.h override i386/sol2.h version.  Still cannot use\n+   -K PIC with the Solaris 10+ assembler, it gives many warnings:\n+\tAbsolute relocation is used for symbol \"<symbol>\"  */\n+#undef ASM_SPEC\n+#define ASM_SPEC ASM_SPEC_BASE\n+\n /* We do not need to search a special directory for startup files.  */\n #undef MD_STARTFILE_PREFIX\n "}, {"sha": "593e256c164d6eaab2857b52281505d671ea26b9", "filename": "gcc/config/i386/sol2.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fi386%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fi386%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsol2.h?ref=fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "patch": "@@ -61,12 +61,12 @@ along with GCC; see the file COPYING3.  If not see\n \n #define ASM_CPU_SPEC \"\"\n  \n-/* Removed -K PIC from generic sol2.h ASM_SPEC: the Solaris 8 and 9 assembler\n-   gives many warnings: R_386_32 relocation is used for symbol \".text\", and\n+/* Don't include ASM_PIC_SPEC.  While the Solaris 8 and 9 assembler accepts\n+   -K PIC, it gives many warnings:\n+\tR_386_32 relocation is used for symbol \"<symbol>\"\n    GNU as doesn't recognize -K at all.  */\n-/* FIXME: Perhaps split between common and CPU-specific parts?  */\n #undef ASM_SPEC\n-#define ASM_SPEC \"%{v:-V} %{Qy:} %{!Qn:-Qy} %{Ym,*} -s %(asm_cpu)\"\n+#define ASM_SPEC ASM_SPEC_BASE\n \n #define SUBTARGET_CPU_EXTRA_SPECS \\\n   { \"cpp_subtarget\",\t CPP_SUBTARGET_SPEC },\t\t\\"}, {"sha": "3867c7dd2453e6f6709b7acc879f90d37e7ce3de", "filename": "gcc/config/sol2.h", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsol2.h?ref=fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "patch": "@@ -99,13 +99,12 @@ along with GCC; see the file COPYING3.  If not see\n \tTARGET_SUB_OS_CPP_BUILTINS();\t\t\t\\\n     } while (0)\n \n-/* It's safe to pass -s always, even if -g is not used.  */\n-#undef ASM_SPEC\n-#define ASM_SPEC \"\\\n-%{v:-V} %{Qy:} %{!Qn:-Qy} %{Ym,*} -s \\\n-%{fpic|fpie|fPIC|fPIE:-K PIC} \\\n-%(asm_cpu) \\\n-\"\n+/* It's safe to pass -s always, even if -g is not used.  Those options are\n+   handled by both Sun as and GNU as.  */\n+#define ASM_SPEC_BASE \\\n+\"%{v:-V} %{Qy:} %{!Qn:-Qy} %{Ym,*} -s %(asm_cpu)\"\n+\n+#define ASM_PIC_SPEC \" %{fpic|fpie|fPIC|fPIE:-K PIC}\"\n \n #undef LIB_SPEC\n #define LIB_SPEC \\"}, {"sha": "392b171be8d85e25c2200ec4000ecbdccfb94e94", "filename": "gcc/config/sparc/sol2.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fsparc%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fcf7471a39854c6bf17a6b59beca52cd56a03ce2/gcc%2Fconfig%2Fsparc%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2.h?ref=fcf7471a39854c6bf17a6b59beca52cd56a03ce2", "patch": "@@ -120,6 +120,10 @@ along with GCC; see the file COPYING3.  If not see\n #define ASM_CPU_DEFAULT_SPEC ASM_CPU32_DEFAULT_SPEC\n #endif\n \n+/* Both Sun as and GNU as understand -K PIC.  */\n+#undef ASM_SPEC\n+#define ASM_SPEC ASM_SPEC_BASE ASM_PIC_SPEC\n+\n #undef CPP_CPU_SPEC\n #define CPP_CPU_SPEC \"\\\n %{mcpu=sparclet|mcpu=tsc701:-D__sparclet__} \\"}]}