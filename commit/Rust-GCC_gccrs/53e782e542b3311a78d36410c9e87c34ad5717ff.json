{"sha": "53e782e542b3311a78d36410c9e87c34ad5717ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNlNzgyZTU0MmIzMzExYTc4ZDM2NDEwYzllODdjMzRhZDU3MTdmZg==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2004-10-15T04:15:43Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-10-15T04:15:43Z"}, "message": "revert: re PR middle-end/17967 (Expand is considered slower? (remove_useless_stmts is considered part of expand))\n\n2004-10-14  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        Revert:\n        2004-10-14  Andrew Pinski  <pinskia@physics.uc.edu>\n        PR middle-end/17967\n        Revert:\n                * tree-cfg.c (remove_usless_stmts_cond):  Fold statement.\n                (remove_useless_stmts_1):  Fold trees we know how to fold.\n\nFrom-SVN: r89080", "tree": {"sha": "b66f8c287673a98964a3e9aa60fb1667a2540e2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b66f8c287673a98964a3e9aa60fb1667a2540e2f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53e782e542b3311a78d36410c9e87c34ad5717ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53e782e542b3311a78d36410c9e87c34ad5717ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53e782e542b3311a78d36410c9e87c34ad5717ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53e782e542b3311a78d36410c9e87c34ad5717ff/comments", "author": null, "committer": null, "parents": [{"sha": "d2ab3e372bc79054df5ded9b200c9729e4488208", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2ab3e372bc79054df5ded9b200c9729e4488208", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2ab3e372bc79054df5ded9b200c9729e4488208"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "a70de55ce6f220c91ed52534afc64aa0e0dd4fdc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53e782e542b3311a78d36410c9e87c34ad5717ff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53e782e542b3311a78d36410c9e87c34ad5717ff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=53e782e542b3311a78d36410c9e87c34ad5717ff", "patch": "@@ -1,3 +1,12 @@\n+2004-10-14  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tRevert:\n+\t2004-10-14  Andrew Pinski  <pinskia@physics.uc.edu>\n+\tPR middle-end/17967\n+\tRevert:\n+\t\t* tree-cfg.c (remove_usless_stmts_cond):  Fold statement.\n+\t\t(remove_useless_stmts_1):  Fold trees we know how to fold.\n+\n 2004-10-14  David Edelsohn  <edelsohn@gnu.org>\n \n \t* configure.ac: Add .machine power4 directive when testing for"}, {"sha": "293b24e1957c7bbb3ff9c7bfb32434a2d006eb70", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53e782e542b3311a78d36410c9e87c34ad5717ff/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53e782e542b3311a78d36410c9e87c34ad5717ff/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=53e782e542b3311a78d36410c9e87c34ad5717ff", "patch": "@@ -1204,6 +1204,7 @@ remove_useless_stmts_cond (tree *stmt_p, struct rus_data *data)\n   else_has_label = data->has_label;\n   data->has_label = save_has_label | then_has_label | else_has_label;\n \n+  fold_stmt (stmt_p);\n   then_clause = COND_EXPR_THEN (*stmt_p);\n   else_clause = COND_EXPR_ELSE (*stmt_p);\n   cond = COND_EXPR_COND (*stmt_p);\n@@ -1551,11 +1552,13 @@ remove_useless_stmts_1 (tree *tp, struct rus_data *data)\n       break;\n \n     case RETURN_EXPR:\n+      fold_stmt (tp);\n       data->last_goto = NULL;\n       data->may_branch = true;\n       break;\n \n     case CALL_EXPR:\n+      fold_stmt (tp);\n       data->last_goto = NULL;\n       notice_special_calls (t);\n       update_call_expr_flags (t);\n@@ -1565,6 +1568,7 @@ remove_useless_stmts_1 (tree *tp, struct rus_data *data)\n \n     case MODIFY_EXPR:\n       data->last_goto = NULL;\n+      fold_stmt (tp);\n       op = get_call_expr_in (t);\n       if (op)\n \t{\n@@ -1600,6 +1604,10 @@ remove_useless_stmts_1 (tree *tp, struct rus_data *data)\n \t  }\n       }\n       break;\n+    case SWITCH_EXPR:\n+      fold_stmt (tp);\n+      data->last_goto = NULL;\n+      break;\n \n     default:\n       data->last_goto = NULL;"}]}