{"sha": "4a147e4e048576fd75cec40797cca5a972c91c48", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGExNDdlNGUwNDg1NzZmZDc1Y2VjNDA3OTdjY2E1YTk3MmM5MWM0OA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-07-03T08:49:54Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-07-03T08:49:54Z"}, "message": "utils2.c (build_simple_component_ref): Do not look through an extension if the type contains a placeholder.\n\n\t* gcc-interface/utils2.c (build_simple_component_ref): Do not look\n\tthrough an extension if the type contains a placeholder.\n\nFrom-SVN: r189202", "tree": {"sha": "50dbff5174357134e5765f52d37d701d41e0be34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/50dbff5174357134e5765f52d37d701d41e0be34"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a147e4e048576fd75cec40797cca5a972c91c48", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a147e4e048576fd75cec40797cca5a972c91c48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a147e4e048576fd75cec40797cca5a972c91c48", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a147e4e048576fd75cec40797cca5a972c91c48/comments", "author": null, "committer": null, "parents": [{"sha": "28dd005525dc1a166827d6fe818e01bed7f42e1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28dd005525dc1a166827d6fe818e01bed7f42e1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28dd005525dc1a166827d6fe818e01bed7f42e1b"}], "stats": {"total": 47, "additions": 46, "deletions": 1}, "files": [{"sha": "f6eb89b9d3a11a5eacd9ab730af29cac124662f6", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4a147e4e048576fd75cec40797cca5a972c91c48", "patch": "@@ -1,3 +1,8 @@\n+2012-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/utils2.c (build_simple_component_ref): Do not look\n+\tthrough an extension if the type contains a placeholder.\n+\n 2012-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* exp_disp.adb (Expand_Dispatching_Call): Propagate the convention on"}, {"sha": "b72ebedcea335ed6559fff8c680fe360630486da", "filename": "gcc/ada/gcc-interface/utils2.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Fada%2Fgcc-interface%2Futils2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Fada%2Fgcc-interface%2Futils2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils2.c?ref=4a147e4e048576fd75cec40797cca5a972c91c48", "patch": "@@ -1912,10 +1912,12 @@ build_simple_component_ref (tree record_variable, tree component,\n \t  break;\n \n       /* Next, see if we're looking for an inherited component in an extension.\n-\t If so, look thru the extension directly.  */\n+\t If so, look thru the extension directly, but not if the type contains\n+\t a placeholder, as it might be needed for a later substitution.  */\n       if (!new_field\n \t  && TREE_CODE (record_variable) == VIEW_CONVERT_EXPR\n \t  && TYPE_ALIGN_OK (record_type)\n+\t  && !type_contains_placeholder_p (record_type)\n \t  && TREE_CODE (TREE_TYPE (TREE_OPERAND (record_variable, 0)))\n \t     == RECORD_TYPE\n \t  && TYPE_ALIGN_OK (TREE_TYPE (TREE_OPERAND (record_variable, 0))))"}, {"sha": "539dfd3b4c204f7417e9c9134a425f2abd4fe5d5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4a147e4e048576fd75cec40797cca5a972c91c48", "patch": "@@ -1,3 +1,7 @@\n+2012-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/discr37.ad[sb]: New test.\n+\n 2012-07-03  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \t* g++.dg/other/packed1.C: Remove SH from xfail list."}, {"sha": "b0e750e8cacce4c74f65e5e78702673d6ec82922", "filename": "gcc/testsuite/gnat.dg/discr37.adb", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Ftestsuite%2Fgnat.dg%2Fdiscr37.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Ftestsuite%2Fgnat.dg%2Fdiscr37.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fdiscr37.adb?ref=4a147e4e048576fd75cec40797cca5a972c91c48", "patch": "@@ -0,0 +1,12 @@\n+-- { dg-do compile }\n+\n+package body Discr37 is\n+\n+  procedure Proc (A : access Child) is\n+    B : Derived renames Derived (A.F(1).all);\n+    C : Derived renames Derived (B.S(1).all);\n+  begin\n+    null;\n+  end;\n+\n+end Discr37;"}, {"sha": "7d91b2d594e591b7db8610c402ca509e8bf54805", "filename": "gcc/testsuite/gnat.dg/discr37.ads", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Ftestsuite%2Fgnat.dg%2Fdiscr37.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a147e4e048576fd75cec40797cca5a972c91c48/gcc%2Ftestsuite%2Fgnat.dg%2Fdiscr37.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fdiscr37.ads?ref=4a147e4e048576fd75cec40797cca5a972c91c48", "patch": "@@ -0,0 +1,22 @@\n+package Discr37 is\n+\n+  subtype Index is Integer range 0 .. 100;\n+\n+  type Root;\n+  type Frame_Ptr is access all Root'Class;\n+\n+  type Arr is array (Index range <>) of Frame_Ptr;\n+\n+  type Root (Level : Index) is tagged record\n+    S : Arr (0 .. Level);\n+  end record;\n+\n+  type Derived (Level : Index) is new Root (Level) with null record;\n+\n+  type Child is new Derived (0) with record\n+    F : Arr (0 .. 100);\n+  end record;\n+\n+  procedure Proc (A : access Child);\n+\n+end Discr37;"}]}