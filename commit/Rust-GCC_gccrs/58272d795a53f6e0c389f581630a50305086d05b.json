{"sha": "58272d795a53f6e0c389f581630a50305086d05b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTgyNzJkNzk1YTUzZjZlMGMzODlmNTgxNjMwYTUwMzA1MDg2ZDA1Yg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-05-24T09:49:55Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-05-24T09:49:55Z"}, "message": "trans.c (gnat_to_gnu): Do not set source location info on NOP_EXPRs.\n\n        * trans.c (gnat_to_gnu): Do not set source location info on NOP_EXPRs.\n        (Sloc_to_locus): Do not overwrite known GCC locations when translating\n        GNAT standard locations.\n\nFrom-SVN: r135847", "tree": {"sha": "5e79a1709061ee94b029dcc12e00a648f68b6a1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e79a1709061ee94b029dcc12e00a648f68b6a1f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58272d795a53f6e0c389f581630a50305086d05b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58272d795a53f6e0c389f581630a50305086d05b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58272d795a53f6e0c389f581630a50305086d05b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58272d795a53f6e0c389f581630a50305086d05b/comments", "author": null, "committer": null, "parents": [{"sha": "7c88f67af2a876e108a5fa1abd64e87e9e3019bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c88f67af2a876e108a5fa1abd64e87e9e3019bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c88f67af2a876e108a5fa1abd64e87e9e3019bc"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "f7305e8ef4f7c2ec6923130b4c01ceec7a3d968f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58272d795a53f6e0c389f581630a50305086d05b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58272d795a53f6e0c389f581630a50305086d05b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=58272d795a53f6e0c389f581630a50305086d05b", "patch": "@@ -1,3 +1,9 @@\n+2008-05-24  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* trans.c (gnat_to_gnu): Do not set source location info on NOP_EXPRs.\n+\t(Sloc_to_locus): Do not overwrite known GCC locations when translating\n+\tGNAT standard locations.\n+\n 2008-05-23  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gigi.h (mark_visited): Declare."}, {"sha": "5f579e71b45a1a61524b21e9ccba1d43d29303c3", "filename": "gcc/ada/trans.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58272d795a53f6e0c389f581630a50305086d05b/gcc%2Fada%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58272d795a53f6e0c389f581630a50305086d05b/gcc%2Fada%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftrans.c?ref=58272d795a53f6e0c389f581630a50305086d05b", "patch": "@@ -4880,7 +4880,10 @@ gnat_to_gnu (Node_Id gnat_node)\n      the location information of their last use.  Note that we may have\n      no result if we tried to build a CALL_EXPR node to a procedure with\n      no side-effects and optimization is enabled.  */\n-  if (gnu_result && EXPR_P (gnu_result) && !REFERENCE_CLASS_P (gnu_result))\n+  if (gnu_result\n+      && EXPR_P (gnu_result)\n+      && TREE_CODE (gnu_result) != NOP_EXPR\n+      && !REFERENCE_CLASS_P (gnu_result))\n     set_expr_location_from_node (gnu_result, gnat_node);\n \n   /* If we're supposed to return something of void_type, it means we have\n@@ -6853,7 +6856,8 @@ Sloc_to_locus (Source_Ptr Sloc, location_t *locus)\n \n   if (Sloc <= Standard_Location)\n     {\n-      *locus = BUILTINS_LOCATION;\n+      if (*locus == UNKNOWN_LOCATION)\n+\t*locus = BUILTINS_LOCATION;\n       return false;\n     }\n   else"}]}