{"sha": "a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI5YjA5OWQ3YWE4ZjM4MTliNTc5MWY2OWIxZDVlMzQ2ZTJhMTAxOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2002-03-20T21:58:57Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-03-20T21:58:57Z"}, "message": "re PR bootstrap/4192 (fr30-elf does not build - memory exhausted building crtbegin.o)\n\n\tPR bootstrap/4192\n\t* config/fr30/fr30.md (jump): Comment out clobber of fixed register.\n\n\t* genemit.c (output_added_clobbers_hard_reg_p): Only output return\n\tstmt if some case has been output.\n\n\t* gcc.c-torture/compile/20020320-1.c: New test.\n\nFrom-SVN: r51088", "tree": {"sha": "84f08d2e1bd0d8c13fac88df8d41b14815ccd937", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84f08d2e1bd0d8c13fac88df8d41b14815ccd937"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "048b1c951bd2510e004535964f001e7d6ddcf459", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/048b1c951bd2510e004535964f001e7d6ddcf459", "html_url": "https://github.com/Rust-GCC/gccrs/commit/048b1c951bd2510e004535964f001e7d6ddcf459"}], "stats": {"total": 54, "additions": 49, "deletions": 5}, "files": [{"sha": "131cd9e56054832abc97b900c25a5e458e6685b8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "patch": "@@ -1,3 +1,11 @@\n+2002-03-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR bootstrap/4192\n+\t* config/fr30/fr30.md (jump): Comment out clobber of fixed register.\n+\n+\t* genemit.c (output_added_clobbers_hard_reg_p): Only output return\n+\tstmt if some case has been output.\n+\n 2002-03-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/5972"}, {"sha": "1177c680b42f7643705fcc2490c3edf39740d54d", "filename": "gcc/config/fr30/fr30.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Fconfig%2Ffr30%2Ffr30.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Fconfig%2Ffr30%2Ffr30.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffr30%2Ffr30.md?ref=a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "patch": "@@ -1303,9 +1303,12 @@\n ;; Normal unconditional jump.\n ;; For a description of the computation of the length \n ;; attribute see the branch patterns above.\n+;;\n+;; Although this instruction really clobbers r0, flow\n+;; relies on jump being simplejump_p in several places\n+;; and as r0 is fixed, this doesn't change anything\n (define_insn \"jump\"\n-  [(set (pc) (label_ref (match_operand 0 \"\" \"\")))\n-   (clobber (reg:SI 0))]\n+  [(set (pc) (label_ref (match_operand 0 \"\" \"\")))]\n   \"\"\n   \"*\n   {"}, {"sha": "5a7f32ae2da8a2acb04a0dbc0914bf76784663f2", "filename": "gcc/genemit.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Fgenemit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Fgenemit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenemit.c?ref=a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "patch": "@@ -722,7 +722,7 @@ output_added_clobbers_hard_reg_p ()\n {\n   struct clobber_pat *clobber;\n   struct clobber_ent *ent;\n-  int clobber_p;\n+  int clobber_p, used;\n \n   printf (\"\\n\\nint\\nadded_clobbers_hard_reg_p (insn_code_number)\\n\");\n   printf (\"     int insn_code_number;\\n\");\n@@ -732,12 +732,17 @@ output_added_clobbers_hard_reg_p ()\n \n   for (clobber_p = 0; clobber_p <= 1; clobber_p++)\n     {\n+      used = 0;\n       for (clobber = clobber_list; clobber; clobber = clobber->next)\n \tif (clobber->has_hard_reg == clobber_p)\n \t  for (ent = clobber->insns; ent; ent = ent->next)\n-\t    printf (\"    case %d:\\n\", ent->code_number);\n+\t    {\n+\t      printf (\"    case %d:\\n\", ent->code_number);\n+\t      used++;\n+\t    }\n \n-      printf (\"      return %d;\\n\\n\", clobber_p);\n+      if (used)\n+\tprintf (\"      return %d;\\n\\n\", clobber_p);\n     }\n \n   printf (\"    default:\\n\");"}, {"sha": "ca6d0b2c1d11cefcef9a9f2a120c108c1d68a4c3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "patch": "@@ -1,3 +1,7 @@\n+2002-03-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc.c-torture/compile/20020320-1.c: New test.\n+\n 2002-03-19  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.c-torture/compile/20020318-1.c: New test."}, {"sha": "385c061e19321bdb2c096cb153ffe06a3b6e1271", "filename": "gcc/testsuite/gcc.c-torture/compile/20020320-1.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20020320-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a29b099d7aa8f3819b5791f69b1d5e346e2a1018/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20020320-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20020320-1.c?ref=a29b099d7aa8f3819b5791f69b1d5e346e2a1018", "patch": "@@ -0,0 +1,24 @@\n+/* PR bootstrap/4192\n+   This testcase caused infinite loop in flow (several places),\n+   because flow assumes gen_jump generates simple_jump_p.  */\n+\n+typedef void (*T) (void);\n+extern T x[];\n+\n+void\n+foo (void)\n+{\n+  static T *p = x;\n+  static _Bool a;\n+  T f;\n+\n+  if (__builtin_expect (a, 0))\n+    return;\n+\n+  while ((f = *p))\n+    {\n+      p++;\n+      f ();\n+    }\n+  a = 1;\n+}"}]}