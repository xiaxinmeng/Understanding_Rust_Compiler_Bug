{"sha": "f4e39278b3325b745acf5d70eb2c7800544dd87f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjRlMzkyNzhiMzMyNWI3NDVhY2Y1ZDcwZWIyYzc4MDA1NDRkZDg3Zg==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-02-27T17:48:09Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-02-27T17:48:09Z"}, "message": "PR libstdc++/28080 (partial)\n\n2007-02-27  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR libstdc++/28080 (partial)\n\t* include/std/bitset: Do not include <ios>, <iosfwd> is enough.\n\t(operator>>(std::basic_istream<>&, bitset<>&)): Tweak, refer to\n\tios_base as a base of basic_istream.\n\t* include/std/iomanip: Do not include <ios>, <iosfwd> + \n\t<bits/ios_base.h> is enough.\n\t* include/std/iosfwd: Do not include <cctype> here...\n\t* include/bits/locale_facets.h: ... do it here, when needed.\n\t* include/bits/ostream.tcc: Clean up, do not include <locale> here...\n\t* include/std/ostream: ... here instead.\n\t* include/bits/istream.tcc: Likewise for <locale> and <ostream>...\n\t* include/std/istream: ... here.\n\t* include/bits/sstream.tcc: Do not include <sstream>.\n\nFrom-SVN: r122380", "tree": {"sha": "c8b8ecb18ca1d3b7426df2cb41bbc6ca3ab50618", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8b8ecb18ca1d3b7426df2cb41bbc6ca3ab50618"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f4e39278b3325b745acf5d70eb2c7800544dd87f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4e39278b3325b745acf5d70eb2c7800544dd87f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4e39278b3325b745acf5d70eb2c7800544dd87f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4e39278b3325b745acf5d70eb2c7800544dd87f/comments", "author": null, "committer": null, "parents": [{"sha": "01e7cd6e292e62d5b21500deb06cc11843ec4be0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01e7cd6e292e62d5b21500deb06cc11843ec4be0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01e7cd6e292e62d5b21500deb06cc11843ec4be0"}], "stats": {"total": 67, "additions": 44, "deletions": 23}, "files": [{"sha": "983c782ffec5ad4a0a37b581c8c1d779ca8dbe91", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -1,3 +1,19 @@\n+2007-02-27  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR libstdc++/28080 (partial)\n+\t* include/std/bitset: Do not include <ios>, <iosfwd> is enough.\n+\t(operator>>(std::basic_istream<>&, bitset<>&)): Tweak, refer to\n+\tios_base as a base of basic_istream.\n+\t* include/std/iomanip: Do not include <ios>, <iosfwd> + \n+\t<bits/ios_base.h> is enough.\n+\t* include/std/iosfwd: Do not include <cctype> here...\n+\t* include/bits/locale_facets.h: ... do it here, when needed.\n+\t* include/bits/ostream.tcc: Clean up, do not include <locale> here...\n+\t* include/std/ostream: ... here instead.\n+\t* include/bits/istream.tcc: Likewise for <locale> and <ostream>...\n+\t* include/std/istream: ... here.\n+\t* include/bits/sstream.tcc: Do not include <sstream>.\n+\n 2007-02-27  Richard Guenther  <rguenther@suse.de>\n \n \t* acinclude.m4: Adjust regular expression for ld version extraction."}, {"sha": "8714c9f2f65b977e27e061192c128c1f26a36904", "filename": "libstdc++-v3/include/bits/istream.tcc", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -43,9 +43,6 @@\n \n #pragma GCC system_header\n \n-#include <locale>\n-#include <ostream> // For flush()\n-\n _GLIBCXX_BEGIN_NAMESPACE(std)\n \n   template<typename _CharT, typename _Traits>"}, {"sha": "7746d1dc7a159c64c6c8d7d075d70390adfa2480", "filename": "libstdc++-v3/include/bits/locale_facets.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -45,6 +45,7 @@\n \n #include <ctime>\t// For struct tm\n #include <cwctype>\t// For wctype_t\n+#include <cctype>\n #include <bits/ctype_base.h>\t\n #include <iosfwd>\n #include <bits/ios_base.h>  // For ios_base, ios_base::iostate"}, {"sha": "382f0181493998196e01ea4a141cafdc3b694549", "filename": "libstdc++-v3/include/bits/ostream.tcc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fostream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fostream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fostream.tcc?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -1,6 +1,7 @@\n // ostream classes -*- C++ -*-\n \n-// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n+// 2006, 2007\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -42,8 +43,6 @@\n \n #pragma GCC system_header\n \n-#include <locale>\n-\n _GLIBCXX_BEGIN_NAMESPACE(std)\n \n   template<typename _CharT, typename _Traits>"}, {"sha": "2e642390f5c48fa1e76f1fe234e827c6ed659f32", "filename": "libstdc++-v3/include/bits/sstream.tcc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fsstream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fsstream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fsstream.tcc?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -1,6 +1,7 @@\n // String based streams -*- C++ -*-\n \n-// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n+// 2006, 2007\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -42,8 +43,6 @@\n \n #pragma GCC system_header\n \n-#include <sstream>\n-\n _GLIBCXX_BEGIN_NAMESPACE(std)\n \n   template <class _CharT, class _Traits, class _Alloc>"}, {"sha": "b0bc55545f5ae7fac044f649ad01c3719aa874c2", "filename": "libstdc++-v3/include/std/bitset", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fbitset?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -55,7 +55,7 @@\n #include <string>\n #include <bits/functexcept.h>   // For invalid_argument, out_of_range,\n                                 // overflow_error\n-#include <ios>\n+#include <iosfwd>\n \n #define _GLIBCXX_BITSET_BITS_PER_WORD  (__CHAR_BIT__ * sizeof(unsigned long))\n #define _GLIBCXX_BITSET_WORDS(__n) \\\n@@ -1227,12 +1227,15 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD)\n     std::basic_istream<_CharT, _Traits>&\n     operator>>(std::basic_istream<_CharT, _Traits>& __is, bitset<_Nb>& __x)\n     {\n-      typedef typename _Traits::char_type char_type;\n+      typedef typename _Traits::char_type          char_type;\n+      typedef std::basic_istream<_CharT, _Traits>  __istream_type;\n+      typedef typename __istream_type::ios_base    __ios_base;\n+\n       std::basic_string<_CharT, _Traits> __tmp;\n       __tmp.reserve(_Nb);\n \n-      std::ios_base::iostate __state = std::ios_base::goodbit;\n-      typename std::basic_istream<_CharT, _Traits>::sentry __sentry(__is);\n+      typename __ios_base::iostate __state = __ios_base::goodbit;\n+      typename __istream_type::sentry __sentry(__is);\n       if (__sentry)\n \t{\n \t  try\n@@ -1249,7 +1252,7 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD)\n \t\t  typename _Traits::int_type __c1 = __buf->sbumpc();\n \t\t  if (_Traits::eq_int_type(__c1, __eof))\n \t\t    {\n-\t\t      __state |= std::ios_base::eofbit;\n+\t\t      __state |= __ios_base::eofbit;\n \t\t      break;\n \t\t    }\n \t\t  else\n@@ -1262,18 +1265,18 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD)\n \t\t      else if (_Traits::eq_int_type(__buf->sputbackc(__c2),\n \t\t\t\t\t\t    __eof))\n \t\t\t{\n-\t\t\t  __state |= std::ios_base::failbit;\n+\t\t\t  __state |= __ios_base::failbit;\n \t\t\t  break;\n \t\t\t}\n \t\t    }\n \t\t}\n \t    }\n \t  catch(...)\n-\t    { __is._M_setstate(std::ios_base::badbit); }\n+\t    { __is._M_setstate(__ios_base::badbit); }\n \t}\n \n       if (__tmp.empty() && _Nb)\n-\t__state |= std::ios_base::failbit;\n+\t__state |= __ios_base::failbit;\n       else\n \t__x._M_copy_from_string(__tmp, static_cast<size_t>(0), _Nb);\n       if (__state)"}, {"sha": "13079e4fb04eef204497776824aefcbac134379d", "filename": "libstdc++-v3/include/std/iomanip", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiomanip", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiomanip", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiomanip?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -43,7 +43,8 @@\n #pragma GCC system_header\n \n #include <bits/c++config.h>\n-#include <ios>\n+#include <iosfwd>\n+#include <bits/ios_base.h>\n \n _GLIBCXX_BEGIN_NAMESPACE(std)\n \n@@ -111,7 +112,7 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n \n   template<typename _CharT, typename _Traits>\n     inline basic_ostream<_CharT, _Traits>& \n-    operator<<(basic_ostream<_CharT,_Traits>& __os, _Setiosflags __f)\n+    operator<<(basic_ostream<_CharT, _Traits>& __os, _Setiosflags __f)\n     { \n       __os.setf(__f._M_mask); \n       return __os; "}, {"sha": "d2da12bf6a3c73e65c98439c227c39345364e860", "filename": "libstdc++-v3/include/std/iosfwd", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiosfwd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiosfwd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fiosfwd?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -1,6 +1,7 @@\n // Forwarding declarations -*- C++ -*-\n \n-// Copyright (C) 1997, 1998, 1999, 2001, 2002, 2003, 2005\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n+// 2006, 2007\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -44,7 +45,6 @@\n #include <bits/c++config.h>\n #include <bits/c++locale.h> \n #include <bits/c++io.h> \n-#include <cctype>\t\t// For isspace, etc.\n #include <bits/stringfwd.h> \t// For string forward declarations.\n #include <bits/postypes.h>\n #include <bits/functexcept.h>"}, {"sha": "d6b0dfb08163e84da7ee7d21ca890e8263dd3bfb", "filename": "libstdc++-v3/include/std/istream", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fistream", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fistream", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fistream?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -1,6 +1,7 @@\n // Input streams -*- C++ -*-\n \n-// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n+// 2006, 2007\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -42,6 +43,8 @@\n #pragma GCC system_header\n \n #include <ios>\n+#include <locale>\n+#include <ostream>\n #include <limits> // For numeric_limits\n \n _GLIBCXX_BEGIN_NAMESPACE(std)"}, {"sha": "2a84f808d7e134000ba517705a798def541e7645", "filename": "libstdc++-v3/include/std/ostream", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fostream", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4e39278b3325b745acf5d70eb2c7800544dd87f/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fostream", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fostream?ref=f4e39278b3325b745acf5d70eb2c7800544dd87f", "patch": "@@ -1,6 +1,7 @@\n // Output streams -*- C++ -*-\n \n-// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2005, 2006\n+// Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,\n+// 2006, 2007\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -42,6 +43,7 @@\n #pragma GCC system_header\n \n #include <ios>\n+#include <locale>\n \n _GLIBCXX_BEGIN_NAMESPACE(std)\n "}]}