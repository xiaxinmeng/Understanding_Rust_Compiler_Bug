{"sha": "528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTI4YzIyZjRjN2JlNTJjMWEyODVjN2IwYjllNDkxODBiYTg3ODVmNg==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-29T00:06:19Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-08-29T00:06:19Z"}, "message": "re PR c/18050 (-Wsequence-point reports false positives)\n\n2008-08-28  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n            Andrew Pinski  <pinskia@gcc.gnu.org>\n\n\tPR 18050\n\t* c-common.c (verify_tree): Fix handling of ADDR_EXPR.\ntestsuite/\n\t* gcc.dg/Wsequence-point-pr18050.c: New.\n\t* g++.dg/warn/Wsequence-point-pr18050.C: New.\n\nCo-Authored-By: Andrew Pinski <pinskia@gcc.gnu.org>\n\nFrom-SVN: r139742", "tree": {"sha": "6d48fb1dbe790d1dad791c358f506aa2a1dc427c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d48fb1dbe790d1dad791c358f506aa2a1dc427c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/comments", "author": null, "committer": null, "parents": [{"sha": "5a2f8dcf2504d2d757e8896e502f1ded6e35db89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a2f8dcf2504d2d757e8896e502f1ded6e35db89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a2f8dcf2504d2d757e8896e502f1ded6e35db89"}], "stats": {"total": 68, "additions": 68, "deletions": 0}, "files": [{"sha": "5b0147c176fd57e9ae11e12068f64f695ce22d82", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "patch": "@@ -1,3 +1,9 @@\n+2008-08-28  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+            Andrew Pinski  <pinskia@gcc.gnu.org>\n+\n+\tPR 18050\n+\t* c-common.c (verify_tree): Fix handling of ADDR_EXPR.\n+\n 2008-08-28  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* gtrh-posix.h: Fix uses of _POSIX_TIMEOUTS per the normal Posix"}, {"sha": "4493a4ba45d312a5da7ef878b7cc0aa44614f24a", "filename": "gcc/c-common.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "patch": "@@ -2189,6 +2189,13 @@ verify_tree (tree x, struct tlist **pbefore_sp, struct tlist **pno_sp,\n \treturn;\n       }\n \n+    case ADDR_EXPR:\n+      x = TREE_OPERAND (x, 0);\n+      if (DECL_P (x))\n+\treturn;\n+      writer = 0;\n+      goto restart;\n+\n     default:\n       /* For other expressions, simply recurse on their operands.\n \t Manual tail recursion for unary expressions."}, {"sha": "ccc35c83d1436815f4c764d2705e8c32df09df32", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "patch": "@@ -1,3 +1,10 @@\n+2008-08-28  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+            Andrew Pinski  <pinskia@gcc.gnu.org>\n+\n+\tPR 18050\n+\t* gcc.dg/Wsequence-point-pr18050.c: New.\n+\t* g++.dg/warn/Wsequence-point-pr18050.C: New.\n+\n 2008-08-28  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/37260"}, {"sha": "63aecd0f3ed0b34fe84033b7d9c9ae0dbb51cfe7", "filename": "gcc/testsuite/g++.dg/warn/Wsequence-point-pr18050.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWsequence-point-pr18050.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWsequence-point-pr18050.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWsequence-point-pr18050.C?ref=528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "patch": "@@ -0,0 +1,24 @@\n+/* PR 18050 : bogus warning with -Wsequence-point */\n+/* { dg-do compile } */\n+/* { dg-options \"-Wsequence-point\" } */\n+\n+struct x\n+{\n+  int i;\n+};\n+void bar(struct x*, int *);\n+\n+void foo(struct x *y)\n+{\n+  bar(y++, &y->i); /* { dg-warning \"operation on 'y' may be undefined\" } */\n+}\n+\n+void zz(int a, int *b)\n+{\n+  *b = a;\n+}\n+\n+void baz(void) {\n+  int a = 5;\n+  zz(++a, &a);  /* { dg-bogus \"operation on 'a' may be undefined\" } */\n+}"}, {"sha": "63aecd0f3ed0b34fe84033b7d9c9ae0dbb51cfe7", "filename": "gcc/testsuite/gcc.dg/Wsequence-point-pr18050.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Ftestsuite%2Fgcc.dg%2FWsequence-point-pr18050.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/528c22f4c7be52c1a285c7b0b9e49180ba8785f6/gcc%2Ftestsuite%2Fgcc.dg%2FWsequence-point-pr18050.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWsequence-point-pr18050.c?ref=528c22f4c7be52c1a285c7b0b9e49180ba8785f6", "patch": "@@ -0,0 +1,24 @@\n+/* PR 18050 : bogus warning with -Wsequence-point */\n+/* { dg-do compile } */\n+/* { dg-options \"-Wsequence-point\" } */\n+\n+struct x\n+{\n+  int i;\n+};\n+void bar(struct x*, int *);\n+\n+void foo(struct x *y)\n+{\n+  bar(y++, &y->i); /* { dg-warning \"operation on 'y' may be undefined\" } */\n+}\n+\n+void zz(int a, int *b)\n+{\n+  *b = a;\n+}\n+\n+void baz(void) {\n+  int a = 5;\n+  zz(++a, &a);  /* { dg-bogus \"operation on 'a' may be undefined\" } */\n+}"}]}