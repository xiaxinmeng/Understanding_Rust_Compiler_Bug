{"sha": "d003cf5ef683191902c19cad6cd3d7ddf957dcde", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDAwM2NmNWVmNjgzMTkxOTAyYzE5Y2FkNmNkM2Q3ZGRmOTU3ZGNkZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-01-03T07:17:38Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-01-03T07:17:38Z"}, "message": "genmatch.c (dt_node::gen_kids_1): If generic_exprs include SSA_NAME and exprs_len || fns_len...\n\n\t* genmatch.c (dt_node::gen_kids_1): If generic_exprs include SSA_NAME\n\tand exprs_len || fns_len, emit the code for SSA_NAME next to the exprs\n\tand fns handling, rather than in a separate case SSA_NAME.\n\nFrom-SVN: r244012", "tree": {"sha": "7230ec5a11b2c1d49c37ba8a113d79c1a69ec90e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7230ec5a11b2c1d49c37ba8a113d79c1a69ec90e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d003cf5ef683191902c19cad6cd3d7ddf957dcde", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d003cf5ef683191902c19cad6cd3d7ddf957dcde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d003cf5ef683191902c19cad6cd3d7ddf957dcde", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d003cf5ef683191902c19cad6cd3d7ddf957dcde/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "994e4aca2c02d25ecb8ba226301eac8b7ecb4152", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/994e4aca2c02d25ecb8ba226301eac8b7ecb4152", "html_url": "https://github.com/Rust-GCC/gccrs/commit/994e4aca2c02d25ecb8ba226301eac8b7ecb4152"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "b38e59a546201b8ffdcd5317cd80cccc668e76da", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d003cf5ef683191902c19cad6cd3d7ddf957dcde/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d003cf5ef683191902c19cad6cd3d7ddf957dcde/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d003cf5ef683191902c19cad6cd3d7ddf957dcde", "patch": "@@ -1,3 +1,9 @@\n+2017-01-03  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* genmatch.c (dt_node::gen_kids_1): If generic_exprs include SSA_NAME\n+\tand exprs_len || fns_len, emit the code for SSA_NAME next to the exprs\n+\tand fns handling, rather than in a separate case SSA_NAME.\n+\n 2017-01-02  Jeff Law  <law@redhat.com>\n \n \t* config/darwin-driver.c (darwin_driver_init): Const-correctness"}, {"sha": "c163ded68764a4a0e6623774c0a22f2523673683", "filename": "gcc/genmatch.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d003cf5ef683191902c19cad6cd3d7ddf957dcde/gcc%2Fgenmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d003cf5ef683191902c19cad6cd3d7ddf957dcde/gcc%2Fgenmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenmatch.c?ref=d003cf5ef683191902c19cad6cd3d7ddf957dcde", "patch": "@@ -2913,6 +2913,20 @@ dt_node::gen_kids_1 (FILE *f, int indent, bool gimple,\n \n       indent -= 6;\n       fprintf_indent (f, indent, \"    }\\n\");\n+      /* See if there is SSA_NAME among generic_exprs and if yes, emit it\n+\t here rather than in the next loop.  */\n+      for (unsigned i = 0; i < generic_exprs.length (); ++i)\n+\t{\n+\t  expr *e = as_a <expr *>(generic_exprs[i]->op);\n+\t  id_base *op = e->operation;\n+\t  if (*op == SSA_NAME && (exprs_len || fns_len))\n+\t    {\n+\t      fprintf_indent (f, indent + 4, \"{\\n\");\n+\t      generic_exprs[i]->gen (f, indent + 6, gimple);\n+\t      fprintf_indent (f, indent + 4, \"}\\n\");\n+\t    }\n+\t}\n+\n       fprintf_indent (f, indent, \"  break;\\n\");\n     }\n \n@@ -2922,6 +2936,9 @@ dt_node::gen_kids_1 (FILE *f, int indent, bool gimple,\n       id_base *op = e->operation;\n       if (*op == CONVERT_EXPR || *op == NOP_EXPR)\n \tfprintf_indent (f, indent, \"CASE_CONVERT:\\n\");\n+      else if (*op == SSA_NAME && (exprs_len || fns_len))\n+\t/* Already handled above.  */\n+\tcontinue;\n       else\n \tfprintf_indent (f, indent, \"case %s:\\n\", op->id);\n       fprintf_indent (f, indent, \"  {\\n\");"}]}