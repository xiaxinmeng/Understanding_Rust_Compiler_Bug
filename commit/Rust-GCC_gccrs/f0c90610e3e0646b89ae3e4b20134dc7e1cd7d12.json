{"sha": "f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjBjOTA2MTBlM2UwNjQ2Yjg5YWUzZTRiMjAxMzRkYzdlMWNkN2QxMg==", "commit": {"author": {"name": "Matthew Wahab", "email": "matthew.wahab@arm.com", "date": "2016-08-19T13:59:18Z"}, "committer": {"name": "Matthew Wahab", "email": "mwahab@gcc.gnu.org", "date": "2016-08-19T13:59:18Z"}, "message": "[ARM] Fix an invalid check for vectors of the same floating-point constants.\n\n2016-08-19  Matthew Wahab  <matthew.wahab@arm.com>\n\n\tPR target/77281\n\t* config/arm/arm.c (neon_valid_immediate): Delete declaration.\n\tUse const_vec_duplicate to check for duplicated elements.\n\nFrom-SVN: r239610", "tree": {"sha": "8bd9c4af683bc93abd9c654614828d317279231f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bd9c4af683bc93abd9c654614828d317279231f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12/comments", "author": null, "committer": null, "parents": [{"sha": "fcf830abf7b3fc12d6127ca500d04405ef0efe54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcf830abf7b3fc12d6127ca500d04405ef0efe54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcf830abf7b3fc12d6127ca500d04405ef0efe54"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "a6519b32e88b2c1ddec0b2d67cc1d0b146dae482", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12", "patch": "@@ -1,3 +1,9 @@\n+2016-08-19  Matthew Wahab  <matthew.wahab@arm.com>\n+\n+\tPR target/77281\n+\t* config/arm/arm.c (neon_valid_immediate): Delete declaration.\n+\tUse const_vec_duplicate to check for duplicated elements.\n+\n 2016-08-19  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/77290"}, {"sha": "c1d010cecbc31554c85beb549bb9e8a1df052ffd", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=f0c90610e3e0646b89ae3e4b20134dc7e1cd7d12", "patch": "@@ -12471,7 +12471,6 @@ neon_valid_immediate (rtx op, machine_mode mode, int inverse,\n   if (GET_MODE_CLASS (mode) == MODE_VECTOR_FLOAT)\n     {\n       rtx el0 = CONST_VECTOR_ELT (op, 0);\n-      const REAL_VALUE_TYPE *r0;\n \n       if (!vfp3_const_double_rtx (el0) && el0 != CONST0_RTX (GET_MODE (el0)))\n         return -1;\n@@ -12480,14 +12479,10 @@ neon_valid_immediate (rtx op, machine_mode mode, int inverse,\n       if (GET_MODE_INNER (mode) == HFmode)\n \treturn -1;\n \n-      r0 = CONST_DOUBLE_REAL_VALUE (el0);\n-\n-      for (i = 1; i < n_elts; i++)\n-        {\n-          rtx elt = CONST_VECTOR_ELT (op, i);\n-          if (!real_equal (r0, CONST_DOUBLE_REAL_VALUE (elt)))\n-            return -1;\n-        }\n+      /* All elements in the vector must be the same.  Note that 0.0 and -0.0\n+\t are distinct in this context.  */\n+      if (!const_vec_duplicate_p (op))\n+\treturn -1;\n \n       if (modconst)\n         *modconst = CONST_VECTOR_ELT (op, 0);"}]}