{"sha": "50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTBhYTY0ZDU4ZmQ0Y2VhMjVkZjJhOWQ5ZGRmYzM4ZTc0ZGNkZDk0Yw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-06-20T21:41:20Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-06-20T21:41:20Z"}, "message": "re PR middle-end/71581 (ICE on valid code on x86_64-linux-gnu with -Wuninitialized (Segmentation fault))\n\n\tPR middle-end/71581\n\t* tree-ssa-uninit.c (warn_uninit): If EXPR and VAR are NULL,\n\tsee if T isn't anonymous SSA_NAME with COMPLEX_EXPR created\n\tfor conversion of scalar user var to complex type and use the\n\tunderlying SSA_NAME_VAR in that case.  If EXPR is still NULL,\n\tpunt.\n\n\t* gcc.dg/pr71581.c: New test.\n\nFrom-SVN: r237621", "tree": {"sha": "73e0044763a990884447efafc1f4b1bfa26a1407", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/73e0044763a990884447efafc1f4b1bfa26a1407"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7a9df68ec6a8752f2e95e8ca1ca1fc53384c90c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a9df68ec6a8752f2e95e8ca1ca1fc53384c90c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a9df68ec6a8752f2e95e8ca1ca1fc53384c90c6"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "1f47a9d9bef9e60819963aa6cc23420004656ce6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "patch": "@@ -1,5 +1,12 @@\n 2016-06-20  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/71581\n+\t* tree-ssa-uninit.c (warn_uninit): If EXPR and VAR are NULL,\n+\tsee if T isn't anonymous SSA_NAME with COMPLEX_EXPR created\n+\tfor conversion of scalar user var to complex type and use the\n+\tunderlying SSA_NAME_VAR in that case.  If EXPR is still NULL,\n+\tpunt.\n+\n \tPR rtl-optimization/71591\n \t* toplev.c (toplev::run_self_tests): If no_backend, complain and\n \tdon't run any tests."}, {"sha": "ce31fb71f5df66544438ebcbb33316b2579fc7c4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "patch": "@@ -1,5 +1,8 @@\n 2016-06-20  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/71581\n+\t* gcc.dg/pr71581.c: New test.\n+\n \tPR rtl-optimization/71591\n \t* gcc.dg/cpp/pr71591.c: New test.\n "}, {"sha": "d82eb1ed5c91ca69593981f79705826cf5475672", "filename": "gcc/testsuite/gcc.dg/pr71581.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71581.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71581.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr71581.c?ref=50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "patch": "@@ -0,0 +1,24 @@\n+/* PR middle-end/71581 */\n+/* { dg-do compile } */\n+/* { dg-options \"-Wuninitialized\" } */\n+\n+_Complex float\n+f1 (void)\n+{\n+  float x;\n+  return x;\t/* { dg-warning \"is used uninitialized in this function\" } */\n+}\n+\n+_Complex double\n+f2 (void)\n+{\n+  double x;\n+  return x;\t/* { dg-warning \"is used uninitialized in this function\" } */\n+}\n+\n+_Complex int\n+f3 (void)\n+{\n+  int x;\n+  return x;\t/* { dg-warning \"is used uninitialized in this function\" } */\n+}"}, {"sha": "d5f03442c3db076a2f417b15a19eb9980b4a1dde", "filename": "gcc/tree-ssa-uninit.c", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2Ftree-ssa-uninit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c/gcc%2Ftree-ssa-uninit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-uninit.c?ref=50aa64d58fd4cea25df2a9d9ddfc38e74dcdd94c", "patch": "@@ -131,6 +131,29 @@ warn_uninit (enum opt_code wc, tree t, tree expr, tree var,\n   if (!has_undefined_value_p (t))\n     return;\n \n+  /* Anonymous SSA_NAMEs shouldn't be uninitialized, but ssa_undefined_value_p\n+     can return true if the def stmt of anonymous SSA_NAME is COMPLEX_EXPR\n+     created for conversion from scalar to complex.  Use the underlying var of\n+     the COMPLEX_EXPRs real part in that case.  See PR71581.  */\n+  if (expr == NULL_TREE\n+      && var == NULL_TREE\n+      && SSA_NAME_VAR (t) == NULL_TREE\n+      && is_gimple_assign (SSA_NAME_DEF_STMT (t))\n+      && gimple_assign_rhs_code (SSA_NAME_DEF_STMT (t)) == COMPLEX_EXPR)\n+    {\n+      tree v = gimple_assign_rhs1 (SSA_NAME_DEF_STMT (t));\n+      if (TREE_CODE (v) == SSA_NAME\n+\t  && has_undefined_value_p (v)\n+\t  && zerop (gimple_assign_rhs2 (SSA_NAME_DEF_STMT (t))))\n+\t{\n+\t  expr = SSA_NAME_VAR (v);\n+\t  var = expr;\n+\t}\n+    }\n+\n+  if (expr == NULL_TREE)\n+    return;\n+\n   /* TREE_NO_WARNING either means we already warned, or the front end\n      wishes to suppress the warning.  */\n   if ((context"}]}