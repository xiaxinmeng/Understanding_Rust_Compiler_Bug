{"sha": "9824b8867a2c169ee38947d191ba646786586ae6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTgyNGI4ODY3YTJjMTY5ZWUzODk0N2QxOTFiYTY0Njc4NjU4NmFlNg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2006-08-01T10:02:29Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2006-08-01T10:02:29Z"}, "message": "tree-outof-ssa.c (check_replaceable): Do not allocate def_vars bitmap when not needed.\n\n\t* tree-outof-ssa.c (check_replaceable): Do not allocate def_vars\n\tbitmap when not needed.\n\t* tree-ssa-pre.c (bitmap_set_and, bitmap_set_and_compl): Free temporary\n\tbitmaps.\n\nFrom-SVN: r115851", "tree": {"sha": "b634ace81030bbcab12da5960a3c610e31ef5109", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b634ace81030bbcab12da5960a3c610e31ef5109"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9824b8867a2c169ee38947d191ba646786586ae6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9824b8867a2c169ee38947d191ba646786586ae6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9824b8867a2c169ee38947d191ba646786586ae6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9824b8867a2c169ee38947d191ba646786586ae6/comments", "author": null, "committer": null, "parents": [{"sha": "537433677746c80aca27fa1e6f07f6e1e69abb39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/537433677746c80aca27fa1e6f07f6e1e69abb39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/537433677746c80aca27fa1e6f07f6e1e69abb39"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "5dc74174a564f2795bc0dbf7d980da83bbeddb1e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9824b8867a2c169ee38947d191ba646786586ae6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9824b8867a2c169ee38947d191ba646786586ae6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9824b8867a2c169ee38947d191ba646786586ae6", "patch": "@@ -1,3 +1,10 @@\n+2006-08-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-outof-ssa.c (check_replaceable): Do not allocate def_vars\n+\tbitmap when not needed.\n+\t* tree-ssa-pre.c (bitmap_set_and, bitmap_set_and_compl): Free temporary\n+\tbitmaps.\n+\n 2006-08-01  Dirk Mueller  <dmueller@suse.de>\n \n \t* tree-vrp.c (fix_equivalence_set): Avoid bitmap memory leak."}, {"sha": "ecfd1eef1db31bf1d957e1dcb58f98c39004e8de", "filename": "gcc/tree-outof-ssa.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9824b8867a2c169ee38947d191ba646786586ae6/gcc%2Ftree-outof-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9824b8867a2c169ee38947d191ba646786586ae6/gcc%2Ftree-outof-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-outof-ssa.c?ref=9824b8867a2c169ee38947d191ba646786586ae6", "patch": "@@ -1556,7 +1556,7 @@ check_replaceable (temp_expr_table_p tab, tree stmt)\n   var_map map = tab->map;\n   ssa_op_iter iter;\n   tree call_expr;\n-  bitmap def_vars = BITMAP_ALLOC (NULL), use_vars;\n+  bitmap def_vars, use_vars;\n \n   if (TREE_CODE (stmt) != MODIFY_EXPR)\n     return false;\n@@ -1588,6 +1588,7 @@ check_replaceable (temp_expr_table_p tab, tree stmt)\n \n   version = SSA_NAME_VERSION (def);\n   basevar = SSA_NAME_VAR (def);\n+  def_vars = BITMAP_ALLOC (NULL);\n   bitmap_set_bit (def_vars, DECL_UID (basevar));\n \n   /* Add this expression to the dependency list for each use partition.  */"}, {"sha": "f1383b4e435bac10e82a7abe90a16f200524543a", "filename": "gcc/tree-ssa-pre.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9824b8867a2c169ee38947d191ba646786586ae6/gcc%2Ftree-ssa-pre.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9824b8867a2c169ee38947d191ba646786586ae6/gcc%2Ftree-ssa-pre.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-pre.c?ref=9824b8867a2c169ee38947d191ba646786586ae6", "patch": "@@ -624,7 +624,7 @@ bitmap_set_and (bitmap_set_t dest, bitmap_set_t orig)\n       if (!bitmap_bit_p (dest->values, VALUE_HANDLE_ID (val)))\n \tbitmap_clear_bit (dest->expressions, i);\n     }\n-\n+  BITMAP_FREE (temp);\n }\n \n /* Perform bitmapped value set operation DEST = DEST & ~ORIG.  */\n@@ -645,6 +645,7 @@ bitmap_set_and_compl (bitmap_set_t dest, bitmap_set_t orig)\n       if (!bitmap_bit_p (dest->values, VALUE_HANDLE_ID (val)))\n \tbitmap_clear_bit (dest->expressions, i);\n     }\n+  BITMAP_FREE (temp);\n }\n \n /* Return true if the bitmap set SET is empty.  */"}]}