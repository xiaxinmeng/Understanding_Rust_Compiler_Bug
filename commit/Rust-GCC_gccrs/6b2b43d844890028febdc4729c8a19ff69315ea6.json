{"sha": "6b2b43d844890028febdc4729c8a19ff69315ea6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIyYjQzZDg0NDg5MDAyOGZlYmRjNDcyOWM4YTE5ZmY2OTMxNWVhNg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2010-07-21T04:20:58Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2010-07-21T04:20:58Z"}, "message": "re PR fortran/44697 (I/O testsuite failures: \\r\\n vs \\n -  gfortran.dg/ftell_3.f90)\n\n2010-07-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libfortran/44697\n\t* gfortran.dg/ftell_3.f90: Take care of cr-lf record endings.\n\nFrom-SVN: r162362", "tree": {"sha": "52f6eb98453bb33b9f0b5bd7b9a3361823818bde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52f6eb98453bb33b9f0b5bd7b9a3361823818bde"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b2b43d844890028febdc4729c8a19ff69315ea6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b2b43d844890028febdc4729c8a19ff69315ea6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b2b43d844890028febdc4729c8a19ff69315ea6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b2b43d844890028febdc4729c8a19ff69315ea6/comments", "author": null, "committer": null, "parents": [{"sha": "7d8cafcde8aee5ccd585b17d33d5a8389351a20f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d8cafcde8aee5ccd585b17d33d5a8389351a20f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d8cafcde8aee5ccd585b17d33d5a8389351a20f"}], "stats": {"total": 35, "additions": 27, "deletions": 8}, "files": [{"sha": "64bb99433209b6d5247f6e4ca07d66e09febfec9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b2b43d844890028febdc4729c8a19ff69315ea6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b2b43d844890028febdc4729c8a19ff69315ea6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6b2b43d844890028febdc4729c8a19ff69315ea6", "patch": "@@ -1,3 +1,8 @@\n+2010-07-20  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libfortran/44697\n+\t* gfortran.dg/ftell_3.f90: Take care of cr-lf record endings.\n+\n 2010-07-20  Jeffrey Yasskin  <jyasskin@google.com>\n \n \t* lib/scanasm.exp (dg-function-on-line): Test that a function is"}, {"sha": "16875d812a80abf655cff709829d07c4e0671e60", "filename": "gcc/testsuite/gfortran.dg/ftell_3.f90", "status": "modified", "additions": 22, "deletions": 8, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b2b43d844890028febdc4729c8a19ff69315ea6/gcc%2Ftestsuite%2Fgfortran.dg%2Fftell_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b2b43d844890028febdc4729c8a19ff69315ea6/gcc%2Ftestsuite%2Fgfortran.dg%2Fftell_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fftell_3.f90?ref=6b2b43d844890028febdc4729c8a19ff69315ea6", "patch": "@@ -3,26 +3,40 @@\n ! Contributed by Janne Blomqvist, Manfred Schwarb\n ! and Dominique d'Humieres.\n program ftell_3\n-  integer :: i\n+  integer :: i, j\n+  character(1) :: ch\n   character(len=99) :: buffer\n-  open(10, form='formatted', status='scratch', position='rewind')\n+  open(10, form='formatted', position='rewind')\n   write(10, '(a)') '123456'\n   write(10, '(a)') '789'\n   write(10, '(a)') 'CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC'\n   write(10, '(a)') 'DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD'\n   rewind(10)\n   read(10, '(a)') buffer\n   call ftell(10, i)\n-  if(i /= 7) then\n-     call abort()\n+! Expected: On '\\n' systems: 7, on \\r\\n systems: 8\n+  if(i /= 7 .and. i /= 8) then\n+    call abort\n   end if\n   read(10,'(a)') buffer\n   if (trim(buffer) /= \"789\") then\n      call abort()\n   end if\n-  call ftell(10,i)\n-  if (i /= 11) then\n-     call abort()\n-  end if\n+  call ftell(10,j)\n   close(10)\n+  open(10, access=\"stream\")\n+! Expected: On '\\n' systems: 11, on \\r\\n systems: 13\n+  if (i == 7) then\n+    read(10, pos=7) ch\n+    if (ch /= char(10)) call abort\n+    if (j /= 11) call abort\n+  end if\n+  if (i == 8) then\n+    read(10, pos=7) ch\n+    if (ch /= char(13)) call abort\n+    read(10) ch\n+    if (ch /= char(10)) call abort\n+    if (j /= 13) call abort\n+  end if\n+  close(10, status=\"delete\")\n end program ftell_3"}]}