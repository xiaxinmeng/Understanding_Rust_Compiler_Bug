{"sha": "55cdadd504277e112ab219032410781fa6356976", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTVjZGFkZDUwNDI3N2UxMTJhYjIxOTAzMjQxMDc4MWZhNjM1Njk3Ng==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2011-10-07T14:59:37Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@gcc.gnu.org", "date": "2011-10-07T14:59:37Z"}, "message": "predicates.md (shift_amount_operand): Remove constant range check.\n\n2011-10-07  Andrew Stubbs  <ams@codesourcery.com>\n\n\tgcc/\n\t* config/arm/predicates.md (shift_amount_operand): Remove constant\n\trange check.\n\t(shift_operator): Check range of constants for all shift operators.\n\n\tgcc/testsuite/\n\t* gcc.dg/pr50193-1.c: New file.\n\t* gcc.target/arm/shiftable.c: New file.\n\nFrom-SVN: r179661", "tree": {"sha": "c786856194e9bfb6fd7e56e437890072321e4f07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c786856194e9bfb6fd7e56e437890072321e4f07"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55cdadd504277e112ab219032410781fa6356976", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55cdadd504277e112ab219032410781fa6356976", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55cdadd504277e112ab219032410781fa6356976", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55cdadd504277e112ab219032410781fa6356976/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "58eba515913ec98edcf090389599ae25f4704ea1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58eba515913ec98edcf090389599ae25f4704ea1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58eba515913ec98edcf090389599ae25f4704ea1"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "715bcea1066b71321288a68406f2dc2e2ab7a60d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55cdadd504277e112ab219032410781fa6356976/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55cdadd504277e112ab219032410781fa6356976/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=55cdadd504277e112ab219032410781fa6356976", "patch": "@@ -1,3 +1,9 @@\n+2011-10-07  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* config/arm/predicates.md (shift_amount_operand): Remove constant\n+\trange check.\n+\t(shift_operator): Check range of constants for all shift operators.\n+\n 2011-10-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n \n \t* config/s390/s390.c (s390_emit_tls_call_insn): Remove assertion."}, {"sha": "2c1a138b0df5dc914e97889de5476b48f5837d98", "filename": "gcc/config/arm/predicates.md", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55cdadd504277e112ab219032410781fa6356976/gcc%2Fconfig%2Farm%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55cdadd504277e112ab219032410781fa6356976/gcc%2Fconfig%2Farm%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fpredicates.md?ref=55cdadd504277e112ab219032410781fa6356976", "patch": "@@ -129,11 +129,12 @@\n   (ior (match_operand 0 \"arm_rhs_operand\")\n        (match_operand 0 \"memory_operand\")))\n \n+;; This doesn't have to do much because the constant is already checked\n+;; in the shift_operator predicate.\n (define_predicate \"shift_amount_operand\"\n   (ior (and (match_test \"TARGET_ARM\")\n \t    (match_operand 0 \"s_register_operand\"))\n-       (and (match_code \"const_int\")\n-\t    (match_test \"((unsigned HOST_WIDE_INT) INTVAL (op)) < 32\"))))\n+       (match_operand 0 \"const_int_operand\")))\n \n (define_predicate \"arm_add_operand\"\n   (ior (match_operand 0 \"arm_rhs_operand\")\n@@ -219,13 +220,20 @@\n        (match_test \"mode == GET_MODE (op)\")))\n \n ;; True for shift operators.\n+;; Notes:\n+;;  * mult is only permitted with a constant shift amount\n+;;  * patterns that permit register shift amounts only in ARM mode use\n+;;    shift_amount_operand, patterns that always allow registers do not,\n+;;    so we don't have to worry about that sort of thing here.\n (define_special_predicate \"shift_operator\"\n   (and (ior (ior (and (match_code \"mult\")\n \t\t      (match_test \"power_of_two_operand (XEXP (op, 1), mode)\"))\n \t\t (and (match_code \"rotate\")\n \t\t      (match_test \"GET_CODE (XEXP (op, 1)) == CONST_INT\n \t\t\t\t   && ((unsigned HOST_WIDE_INT) INTVAL (XEXP (op, 1))) < 32\")))\n-\t    (match_code \"ashift,ashiftrt,lshiftrt,rotatert\"))\n+\t    (and (match_code \"ashift,ashiftrt,lshiftrt,rotatert\")\n+\t\t (match_test \"GET_CODE (XEXP (op, 1)) != CONST_INT\n+\t\t\t      || ((unsigned HOST_WIDE_INT) INTVAL (XEXP (op, 1))) < 32\")))\n        (match_test \"mode == GET_MODE (op)\")))\n \n ;; True for shift operators which can be used with saturation instructions."}, {"sha": "b866335595f273506912ef2ef0012f38a968a2df", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55cdadd504277e112ab219032410781fa6356976/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55cdadd504277e112ab219032410781fa6356976/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=55cdadd504277e112ab219032410781fa6356976", "patch": "@@ -1,3 +1,8 @@\n+2011-10-07  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* gcc.dg/pr50193-1.c: New file.\n+\t* gcc.target/arm/shiftable.c: New file.\n+\n 2011-10-07  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/50625"}]}