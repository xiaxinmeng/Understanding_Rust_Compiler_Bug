{"sha": "3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2I2ODFlOWRjY2M1Y2JiZGRlY2JjYzFhMGM0MWM1MWY3ZmJlZjU3ZA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-09-28T07:00:27Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-09-28T07:00:27Z"}, "message": "cpplex.c (cpp_output_token): Use a putc loop for SPELL_OPERATOR, and fwrite for SPELL_IDENT.\n\n\t* cpplex.c (cpp_output_token): Use a putc loop for\n\tSPELL_OPERATOR, and fwrite for SPELL_IDENT.\n\n\t* configure.in: Detect fwrite_unlocked and fprintf_unlocked.\n\t* configure, config.in: Regenerate.\n\t* system.h: Replace fwrite and fprintf with their unlocked\n\tvariants if available.\n\nFrom-SVN: r45855", "tree": {"sha": "206ad049b411ef90070a3486a0832ecc5adf0c79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/206ad049b411ef90070a3486a0832ecc5adf0c79"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/comments", "author": null, "committer": null, "parents": [{"sha": "c0636171dba6e1d76e6ab328182797d370f0ec91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0636171dba6e1d76e6ab328182797d370f0ec91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0636171dba6e1d76e6ab328182797d370f0ec91"}], "stats": {"total": 430, "additions": 246, "deletions": 184}, "files": [{"sha": "472d982de4d1b00beaf3220b6b7b1dd582eb31d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "patch": "@@ -1,11 +1,21 @@\n+2001-09-27  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* cpplex.c (cpp_output_token): Use a putc loop for\n+\tSPELL_OPERATOR, and fwrite for SPELL_IDENT.\n+\n+\t* configure.in: Detect fwrite_unlocked and fprintf_unlocked.\n+\t* configure, config.in: Regenerate.\n+\t* system.h: Replace fwrite and fprintf with their unlocked\n+\tvariants if available.\n+\n 2001-09-27  Richard Henderson  <rth@redhat.com>\n \n \t* dwarf2out.c (dwarf2out_frame_finish): Never elide .debug_frame\n \tin favour of .eh_frame.\n \n 2001-09-27  Aldy Hernandez  <aldyh@redhat.com>\n \n-\t* config/rs6000/rs6000.h (FUNCTION_VALUE): Change hardcoded 33 and 3 \n+\t* config/rs6000/rs6000.h (FUNCTION_VALUE): Change hardcoded 33 and 3\n \tto macros.\n \t(LIBCALL_VALUE): Likewise.\n \n@@ -160,7 +170,7 @@ Tue Sep 25 17:13:56 CEST 2001  Jan Hubicka  <jh@suse.cz>\n \t(bdesc_2srg): Likewise.\n \t(bdesc_1arg): Likewise.\n \n-\t* config/i386/i386.c (ix86_init_builtins): Correct return type \n+\t* config/i386/i386.c (ix86_init_builtins): Correct return type\n \tbuilding v4hi_ftype_v4hi_int_int tree node.\n \t(ix86_expand_sse_comi): Fix typo swapping operands.\n \tDon't swap comparision condition, it is already swapped.\n@@ -252,7 +262,7 @@ Mon Sep 24 18:57:59 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n 2001-09-24  Janis Johnson  <janis187@us.ibm.com>\n \n \t* doc/install.texi (Final install): Request additional information\n-\tin mail about successful builds. \n+\tin mail about successful builds.\n \n 2001-09-24  John David Anglin  <dave@hiauly1.hia.nrc.ca>\n "}, {"sha": "7392a9d0b6e20055162c89d2a284f5562b402902", "filename": "gcc/config.in", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "patch": "@@ -1,4 +1,4 @@\n-/* config.in.  Generated automatically from configure.in by autoheader.  */\n+/* config.in.  Generated automatically from configure.in by autoheader 2.13.  */\n \n /* Define to empty if the keyword does not work.  */\n #undef const\n@@ -104,12 +104,18 @@\n /* Define if you have the dcgettext function.  */\n #undef HAVE_DCGETTEXT\n \n+/* Define if you have the fprintf_unlocked function.  */\n+#undef HAVE_FPRINTF_UNLOCKED\n+\n /* Define if you have the fputc_unlocked function.  */\n #undef HAVE_FPUTC_UNLOCKED\n \n /* Define if you have the fputs_unlocked function.  */\n #undef HAVE_FPUTS_UNLOCKED\n \n+/* Define if you have the fwrite_unlocked function.  */\n+#undef HAVE_FWRITE_UNLOCKED\n+\n /* Define if you have the getcwd function.  */\n #undef HAVE_GETCWD\n \n@@ -395,6 +401,12 @@\n /* Define to 1 if we found this declaration otherwise define to 0. */\n #undef HAVE_DECL_FPUTS_UNLOCKED\n \n+/* Define to 1 if we found this declaration otherwise define to 0. */\n+#undef HAVE_DECL_FWRITE_UNLOCKED\n+\n+/* Define to 1 if we found this declaration otherwise define to 0. */\n+#undef HAVE_DECL_FPRINTF_UNLOCKED\n+\n /* Define to 1 if we found this declaration otherwise define to 0. */\n #undef HAVE_DECL_STRSTR\n "}, {"sha": "2f5a3ef497a0572c7882ec3768e20d8759da5d88", "filename": "gcc/configure", "status": "modified", "additions": 170, "deletions": 161, "changes": 331, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "patch": "@@ -2057,7 +2057,7 @@ EOF\n fi\n \n # Find some useful tools\n-for ac_prog in gawk mawk nawk awk\n+for ac_prog in mawk gawk nawk awk\n do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n@@ -3291,15 +3291,16 @@ fi\n for ac_func in strtoul bsearch popen times clock \\\n \tstrchr strrchr kill getrlimit setrlimit atoll atoq \\\n \tsysconf isascii gettimeofday strsignal putc_unlocked fputc_unlocked \\\n-\tfputs_unlocked getrusage nl_langinfo lstat\n+\tfputs_unlocked fwrite_unlocked fprintf_unlocked getrusage nl_langinfo \\\n+\tlstat\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3298: checking for $ac_func\" >&5\n+echo \"configure:3299: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3303 \"configure\"\n+#line 3304 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3322,7 +3323,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3326: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3327: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3348,12 +3349,12 @@ done\n \n \n echo $ac_n \"checking for ssize_t\"\"... $ac_c\" 1>&6\n-echo \"configure:3352: checking for ssize_t\" >&5\n+echo \"configure:3353: checking for ssize_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_ssize_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3357 \"configure\"\n+#line 3358 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -3384,12 +3385,12 @@ fi\n # Try to determine the array type of the second argument of getgroups\n # for the target system (int or gid_t).\n echo $ac_n \"checking for uid_t in sys/types.h\"\"... $ac_c\" 1>&6\n-echo \"configure:3388: checking for uid_t in sys/types.h\" >&5\n+echo \"configure:3389: checking for uid_t in sys/types.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_uid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3393 \"configure\"\n+#line 3394 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n EOF\n@@ -3418,15 +3419,15 @@ EOF\n fi\n \n echo $ac_n \"checking type of array argument to getgroups\"\"... $ac_c\" 1>&6\n-echo \"configure:3422: checking type of array argument to getgroups\" >&5\n+echo \"configure:3423: checking type of array argument to getgroups\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_getgroups'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_type_getgroups=cross\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3430 \"configure\"\n+#line 3431 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Rendell for this test.  */\n@@ -3451,7 +3452,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:3455: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3456: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n     ac_cv_type_getgroups=gid_t\n else\n@@ -3465,7 +3466,7 @@ fi\n \n if test $ac_cv_type_getgroups = cross; then\n         cat > conftest.$ac_ext <<EOF\n-#line 3469 \"configure\"\n+#line 3470 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -3506,12 +3507,12 @@ fi\n \n \n echo $ac_n \"checking for vprintf\"\"... $ac_c\" 1>&6\n-echo \"configure:3510: checking for vprintf\" >&5\n+echo \"configure:3511: checking for vprintf\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vprintf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3515 \"configure\"\n+#line 3516 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vprintf(); below.  */\n@@ -3534,7 +3535,7 @@ vprintf();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3538: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3539: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vprintf=yes\"\n else\n@@ -3558,12 +3559,12 @@ fi\n \n if test \"$ac_cv_func_vprintf\" != yes; then\n echo $ac_n \"checking for _doprnt\"\"... $ac_c\" 1>&6\n-echo \"configure:3562: checking for _doprnt\" >&5\n+echo \"configure:3563: checking for _doprnt\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func__doprnt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3567 \"configure\"\n+#line 3568 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char _doprnt(); below.  */\n@@ -3586,7 +3587,7 @@ _doprnt();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3590: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3591: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func__doprnt=yes\"\n else\n@@ -3624,12 +3625,12 @@ fi\n for ac_func in strstr\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3628: checking for $ac_func\" >&5\n+echo \"configure:3629: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3633 \"configure\"\n+#line 3634 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3652,7 +3653,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3656: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3657: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3679,15 +3680,15 @@ done\n \n    \n echo $ac_n \"checking whether the printf functions support %p\"\"... $ac_c\" 1>&6\n-echo \"configure:3683: checking whether the printf functions support %p\" >&5\n+echo \"configure:3684: checking whether the printf functions support %p\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_printf_ptr'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_printf_ptr=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3691 \"configure\"\n+#line 3692 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n \n@@ -3700,7 +3701,7 @@ int main()\n   return (p != q);\n }\n EOF\n-if { (eval echo configure:3704: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3705: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_printf_ptr=yes\n else\n@@ -3732,12 +3733,12 @@ case \"${host}\" in\n   ;;\n esac\n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:3736: checking for pid_t\" >&5\n+echo \"configure:3737: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3741 \"configure\"\n+#line 3742 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -3766,17 +3767,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:3770: checking for vfork.h\" >&5\n+echo \"configure:3771: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3775 \"configure\"\n+#line 3776 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3780: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3781: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3801,18 +3802,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:3805: checking for working vfork\" >&5\n+echo \"configure:3806: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:3811: checking for vfork\" >&5\n+echo \"configure:3812: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3816 \"configure\"\n+#line 3817 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -3835,7 +3836,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3839: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3840: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -3857,7 +3858,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3861 \"configure\"\n+#line 3862 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -3952,7 +3953,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:3956: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3957: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -3977,12 +3978,12 @@ fi\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3981: checking for $ac_func\" >&5\n+echo \"configure:3982: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3986 \"configure\"\n+#line 3987 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -4005,7 +4006,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4009: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4010: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4276,7 +4277,7 @@ main ()\n EOF\n \n echo $ac_n \"checking for working mmap from /dev/zero\"\"... $ac_c\" 1>&6\n-echo \"configure:4280: checking for working mmap from /dev/zero\" >&5\n+echo \"configure:4281: checking for working mmap from /dev/zero\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_dev_zero'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4292,11 +4293,11 @@ else\n   esac\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4296 \"configure\"\n+#line 4297 \"configure\"\n #include \"confdefs.h\"\n #include \"ct-mmap.inc\"\n EOF\n-if { (eval echo configure:4300: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4301: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_dev_zero=yes\n else\n@@ -4323,7 +4324,7 @@ EOF\n fi\n \n echo $ac_n \"checking for working mmap with MAP_ANON(YMOUS)\"\"... $ac_c\" 1>&6\n-echo \"configure:4327: checking for working mmap with MAP_ANON(YMOUS)\" >&5\n+echo \"configure:4328: checking for working mmap with MAP_ANON(YMOUS)\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_anon'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4333,12 +4334,12 @@ else\n  ac_cv_func_mmap_anon=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4337 \"configure\"\n+#line 4338 \"configure\"\n #include \"confdefs.h\"\n #define USE_MAP_ANON\n #include \"ct-mmap.inc\"\n EOF\n-if { (eval echo configure:4342: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4343: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_anon=yes\n else\n@@ -4366,7 +4367,7 @@ fi\n rm -f ct-mmap.inc\n \n echo $ac_n \"checking for working mmap of a file\"\"... $ac_c\" 1>&6\n-echo \"configure:4370: checking for working mmap of a file\" >&5\n+echo \"configure:4371: checking for working mmap of a file\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_file'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4381,7 +4382,7 @@ if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_file=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4385 \"configure\"\n+#line 4386 \"configure\"\n #include \"confdefs.h\"\n \n /* Test by Zack Weinberg.  Modified from MMAP_ANYWHERE test by\n@@ -4418,7 +4419,7 @@ int main()\n   exit(0);\n }\n EOF\n-if { (eval echo configure:4422: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4423: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_file=yes\n else\n@@ -4456,15 +4457,15 @@ fi\n \n \n   echo $ac_n \"checking for iconv\"\"... $ac_c\" 1>&6\n-echo \"configure:4460: checking for iconv\" >&5\n+echo \"configure:4461: checking for iconv\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_func_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n     am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n     am_cv_lib_iconv=no\n     cat > conftest.$ac_ext <<EOF\n-#line 4468 \"configure\"\n+#line 4469 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -4474,7 +4475,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n        iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:4478: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4479: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_func_iconv=yes\n else\n@@ -4486,7 +4487,7 @@ rm -f conftest*\n       am_save_LIBS=\"$LIBS\"\n       LIBS=\"$LIBS -liconv\"\n       cat > conftest.$ac_ext <<EOF\n-#line 4490 \"configure\"\n+#line 4491 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -4496,7 +4497,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n          iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:4500: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4501: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_lib_iconv=yes\n         am_cv_func_iconv=yes\n@@ -4517,13 +4518,13 @@ echo \"$ac_t\"\"$am_cv_func_iconv\" 1>&6\n EOF\n \n     echo $ac_n \"checking for iconv declaration\"\"... $ac_c\" 1>&6\n-echo \"configure:4521: checking for iconv declaration\" >&5\n+echo \"configure:4522: checking for iconv declaration\" >&5\n     if eval \"test \\\"`echo '$''{'am_cv_proto_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n       cat > conftest.$ac_ext <<EOF\n-#line 4527 \"configure\"\n+#line 4528 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdlib.h>\n@@ -4542,7 +4543,7 @@ int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4546: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4547: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   am_cv_proto_iconv_arg1=\"\"\n else\n@@ -4574,17 +4575,18 @@ EOF\n saved_CFLAGS=\"$CFLAGS\"\n CFLAGS=\"$CFLAGS -I${srcdir} -I${srcdir}/../include\"\n for ac_func in getenv atol sbrk abort atof getcwd getwd \\\n-\tstrsignal putc_unlocked fputs_unlocked strstr environ errno \\\n+\tstrsignal putc_unlocked fputs_unlocked fwrite_unlocked \\\n+        fprintf_unlocked strstr environ errno \\\n \tmalloc realloc calloc free basename getopt clock\n do\n   ac_tr_decl=HAVE_DECL_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n echo $ac_n \"checking whether $ac_func is declared\"\"... $ac_c\" 1>&6\n-echo \"configure:4583: checking whether $ac_func is declared\" >&5\n+echo \"configure:4585: checking whether $ac_func is declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_have_decl_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4588 \"configure\"\n+#line 4590 \"configure\"\n #include \"confdefs.h\"\n #undef $ac_tr_decl\n #define $ac_tr_decl 1\n@@ -4598,7 +4600,7 @@ char *(*pfn) = (char *(*)) $ac_func ;\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:4602: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4604: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_have_decl_$ac_func=yes\"\n else\n@@ -4654,6 +4656,13 @@ EOF\n EOF\n  cat >> confdefs.h <<\\EOF\n #define HAVE_DECL_FPUTS_UNLOCKED 1\n+EOF\n+ cat >> confdefs.h <<\\EOF\n+#define HAVE_DECL_FWRITE_UNLOCKED 1\n+EOF\n+ \\\n+        cat >> confdefs.h <<\\EOF\n+#define HAVE_DECL_FPRINTF_UNLOCKED 1\n EOF\n  cat >> confdefs.h <<\\EOF\n #define HAVE_DECL_STRSTR 1\n@@ -4693,12 +4702,12 @@ for ac_func in getrlimit setrlimit getrusage\n do\n   ac_tr_decl=HAVE_DECL_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n echo $ac_n \"checking whether $ac_func is declared\"\"... $ac_c\" 1>&6\n-echo \"configure:4697: checking whether $ac_func is declared\" >&5\n+echo \"configure:4706: checking whether $ac_func is declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_have_decl_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4702 \"configure\"\n+#line 4711 \"configure\"\n #include \"confdefs.h\"\n #undef $ac_tr_decl\n #define $ac_tr_decl 1\n@@ -4716,7 +4725,7 @@ char *(*pfn) = (char *(*)) $ac_func ;\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:4720: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4729: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_have_decl_$ac_func=yes\"\n else\n@@ -4758,12 +4767,12 @@ for ac_func in times\n do\n   ac_tr_decl=HAVE_DECL_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n echo $ac_n \"checking whether $ac_func is declared\"\"... $ac_c\" 1>&6\n-echo \"configure:4762: checking whether $ac_func is declared\" >&5\n+echo \"configure:4771: checking whether $ac_func is declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_have_decl_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4767 \"configure\"\n+#line 4776 \"configure\"\n #include \"confdefs.h\"\n #undef $ac_tr_decl\n #define $ac_tr_decl 1\n@@ -4781,7 +4790,7 @@ char *(*pfn) = (char *(*)) $ac_func ;\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:4785: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4794: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_have_decl_$ac_func=yes\"\n else\n@@ -4815,13 +4824,13 @@ fi\n \n # More time-related stuff.\n echo $ac_n \"checking for struct tms\"\"... $ac_c\" 1>&6\n-echo \"configure:4819: checking for struct tms\" >&5\n+echo \"configure:4828: checking for struct tms\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tms'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n cat > conftest.$ac_ext <<EOF\n-#line 4825 \"configure\"\n+#line 4834 \"configure\"\n #include \"confdefs.h\"\n \n #include \"ansidecl.h\"\n@@ -4834,7 +4843,7 @@ int main() {\n struct tms tms;\n ; return 0; }\n EOF\n-if { (eval echo configure:4838: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4847: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tms=yes\n else\n@@ -4857,13 +4866,13 @@ fi\n # use gcc_cv_* here because this doesn't match the behavior of AC_CHECK_TYPE.\n # revisit after autoconf 2.50.\n echo $ac_n \"checking for clock_t\"\"... $ac_c\" 1>&6\n-echo \"configure:4861: checking for clock_t\" >&5\n+echo \"configure:4870: checking for clock_t\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_type_clock_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n cat > conftest.$ac_ext <<EOF\n-#line 4867 \"configure\"\n+#line 4876 \"configure\"\n #include \"confdefs.h\"\n \n #include \"ansidecl.h\"\n@@ -4873,7 +4882,7 @@ int main() {\n clock_t x;\n ; return 0; }\n EOF\n-if { (eval echo configure:4877: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4886: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_type_clock_t=yes\n else\n@@ -4898,12 +4907,12 @@ CFLAGS=\"$saved_CFLAGS\"\n \n # mkdir takes a single argument on some systems. \n echo $ac_n \"checking if mkdir takes one argument\"\"... $ac_c\" 1>&6\n-echo \"configure:4902: checking if mkdir takes one argument\" >&5\n+echo \"configure:4911: checking if mkdir takes one argument\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_mkdir_takes_one_arg'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4907 \"configure\"\n+#line 4916 \"configure\"\n #include \"confdefs.h\"\n \n #include <sys/types.h>\n@@ -4920,7 +4929,7 @@ int main() {\n mkdir (\"foo\", 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:4924: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4933: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_mkdir_takes_one_arg=no\n else\n@@ -5203,15 +5212,15 @@ fi\n \n \n         echo $ac_n \"checking for strerror in -lcposix\"\"... $ac_c\" 1>&6\n-echo \"configure:5207: checking for strerror in -lcposix\" >&5\n+echo \"configure:5216: checking for strerror in -lcposix\" >&5\n ac_lib_var=`echo cposix'_'strerror | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lcposix  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5215 \"configure\"\n+#line 5224 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5222,7 +5231,7 @@ int main() {\n strerror()\n ; return 0; }\n EOF\n-if { (eval echo configure:5226: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5235: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5245,12 +5254,12 @@ fi\n   \n \n echo $ac_n \"checking for working const\"\"... $ac_c\" 1>&6\n-echo \"configure:5249: checking for working const\" >&5\n+echo \"configure:5258: checking for working const\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_const'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5254 \"configure\"\n+#line 5263 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -5299,7 +5308,7 @@ ccp = (char const *const *) p;\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5303: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5312: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_const=yes\n else\n@@ -5320,12 +5329,12 @@ EOF\n fi\n \n echo $ac_n \"checking for off_t\"\"... $ac_c\" 1>&6\n-echo \"configure:5324: checking for off_t\" >&5\n+echo \"configure:5333: checking for off_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_off_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5329 \"configure\"\n+#line 5338 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -5353,12 +5362,12 @@ EOF\n fi\n \n echo $ac_n \"checking for size_t\"\"... $ac_c\" 1>&6\n-echo \"configure:5357: checking for size_t\" >&5\n+echo \"configure:5366: checking for size_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_size_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5362 \"configure\"\n+#line 5371 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -5391,17 +5400,17 @@ unistd.h sys/param.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:5395: checking for $ac_hdr\" >&5\n+echo \"configure:5404: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5400 \"configure\"\n+#line 5409 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5405: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5414: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5431,12 +5440,12 @@ done\n strdup __argz_count __argz_stringify __argz_next\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:5435: checking for $ac_func\" >&5\n+echo \"configure:5444: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5440 \"configure\"\n+#line 5449 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -5459,7 +5468,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5463: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5472: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -5488,12 +5497,12 @@ done\n      for ac_func in stpcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:5492: checking for $ac_func\" >&5\n+echo \"configure:5501: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5497 \"configure\"\n+#line 5506 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -5516,7 +5525,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5520: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5529: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -5550,19 +5559,19 @@ EOF\n \n    if test $ac_cv_header_locale_h = yes; then\n     echo $ac_n \"checking for LC_MESSAGES\"\"... $ac_c\" 1>&6\n-echo \"configure:5554: checking for LC_MESSAGES\" >&5\n+echo \"configure:5563: checking for LC_MESSAGES\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5559 \"configure\"\n+#line 5568 \"configure\"\n #include \"confdefs.h\"\n #include <locale.h>\n int main() {\n return LC_MESSAGES\n ; return 0; }\n EOF\n-if { (eval echo configure:5566: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5575: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_val_LC_MESSAGES=yes\n else\n@@ -5583,7 +5592,7 @@ EOF\n     fi\n   fi\n    echo $ac_n \"checking whether NLS is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:5587: checking whether NLS is requested\" >&5\n+echo \"configure:5596: checking whether NLS is requested\" >&5\n         # Check whether --enable-nls or --disable-nls was given.\n if test \"${enable_nls+set}\" = set; then\n   enableval=\"$enable_nls\"\n@@ -5603,7 +5612,7 @@ fi\n EOF\n \n       echo $ac_n \"checking whether included gettext is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:5607: checking whether included gettext is requested\" >&5\n+echo \"configure:5616: checking whether included gettext is requested\" >&5\n       # Check whether --with-included-gettext or --without-included-gettext was given.\n if test \"${with_included_gettext+set}\" = set; then\n   withval=\"$with_included_gettext\"\n@@ -5622,17 +5631,17 @@ fi\n \n \tac_safe=`echo \"libintl.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for libintl.h\"\"... $ac_c\" 1>&6\n-echo \"configure:5626: checking for libintl.h\" >&5\n+echo \"configure:5635: checking for libintl.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5631 \"configure\"\n+#line 5640 \"configure\"\n #include \"confdefs.h\"\n #include <libintl.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:5636: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:5645: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -5649,19 +5658,19 @@ fi\n if eval \"test \\\"`echo '$ac_cv_header_'$ac_safe`\\\" = yes\"; then\n   echo \"$ac_t\"\"yes\" 1>&6\n   echo $ac_n \"checking for gettext in libc\"\"... $ac_c\" 1>&6\n-echo \"configure:5653: checking for gettext in libc\" >&5\n+echo \"configure:5662: checking for gettext in libc\" >&5\n if eval \"test \\\"`echo '$''{'gt_cv_func_gettext_libc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5658 \"configure\"\n+#line 5667 \"configure\"\n #include \"confdefs.h\"\n #include <libintl.h>\n int main() {\n return (int) gettext (\"\")\n ; return 0; }\n EOF\n-if { (eval echo configure:5665: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5674: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   gt_cv_func_gettext_libc=yes\n else\n@@ -5677,15 +5686,15 @@ echo \"$ac_t\"\"$gt_cv_func_gettext_libc\" 1>&6\n \n \t   if test \"$gt_cv_func_gettext_libc\" != \"yes\"; then\n \t     echo $ac_n \"checking for bindtextdomain in -lintl\"\"... $ac_c\" 1>&6\n-echo \"configure:5681: checking for bindtextdomain in -lintl\" >&5\n+echo \"configure:5690: checking for bindtextdomain in -lintl\" >&5\n ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lintl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5689 \"configure\"\n+#line 5698 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5696,7 +5705,7 @@ int main() {\n bindtextdomain()\n ; return 0; }\n EOF\n-if { (eval echo configure:5700: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5709: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5712,20 +5721,20 @@ fi\n if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n   echo \"$ac_t\"\"yes\" 1>&6\n   echo $ac_n \"checking for gettext in libintl\"\"... $ac_c\" 1>&6\n-echo \"configure:5716: checking for gettext in libintl\" >&5\n+echo \"configure:5725: checking for gettext in libintl\" >&5\n if eval \"test \\\"`echo '$''{'gt_cv_func_gettext_libintl'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   echo $ac_n \"checking for gettext in -lintl\"\"... $ac_c\" 1>&6\n-echo \"configure:5721: checking for gettext in -lintl\" >&5\n+echo \"configure:5730: checking for gettext in -lintl\" >&5\n ac_lib_var=`echo intl'_'gettext | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lintl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5729 \"configure\"\n+#line 5738 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5736,7 +5745,7 @@ int main() {\n gettext()\n ; return 0; }\n EOF\n-if { (eval echo configure:5740: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5749: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5779,7 +5788,7 @@ EOF\n \t      # Extract the first word of \"msgfmt\", so it can be a program name with args.\n set dummy msgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5783: checking for $ac_word\" >&5\n+echo \"configure:5792: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_MSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5813,12 +5822,12 @@ fi\n \t\tfor ac_func in dcgettext\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:5817: checking for $ac_func\" >&5\n+echo \"configure:5826: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5822 \"configure\"\n+#line 5831 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -5841,7 +5850,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5845: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5854: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -5868,7 +5877,7 @@ done\n \t\t# Extract the first word of \"gmsgfmt\", so it can be a program name with args.\n set dummy gmsgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5872: checking for $ac_word\" >&5\n+echo \"configure:5881: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5904,7 +5913,7 @@ fi\n \t\t# Extract the first word of \"xgettext\", so it can be a program name with args.\n set dummy xgettext; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5908: checking for $ac_word\" >&5\n+echo \"configure:5917: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_XGETTEXT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5936,15 +5945,15 @@ else\n fi\n \n \t\tcat > conftest.$ac_ext <<EOF\n-#line 5940 \"configure\"\n+#line 5949 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n extern int _nl_msg_cat_cntr;\n \t\t\t       return _nl_msg_cat_cntr\n ; return 0; }\n EOF\n-if { (eval echo configure:5948: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5957: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   CATOBJEXT=.gmo\n \t\t   DATADIRNAME=share\n@@ -5969,7 +5978,7 @@ fi\n \n         if test \"$CATOBJEXT\" = \"NONE\"; then\n \t  echo $ac_n \"checking whether catgets can be used\"\"... $ac_c\" 1>&6\n-echo \"configure:5973: checking whether catgets can be used\" >&5\n+echo \"configure:5982: checking whether catgets can be used\" >&5\n \t  # Check whether --with-catgets or --without-catgets was given.\n if test \"${with_catgets+set}\" = set; then\n   withval=\"$with_catgets\"\n@@ -5982,22 +5991,22 @@ fi\n \n \t  if test \"$nls_cv_use_catgets\" = \"yes\"; then\n \t    \t    echo $ac_n \"checking for main in -li\"\"... $ac_c\" 1>&6\n-echo \"configure:5986: checking for main in -li\" >&5\n+echo \"configure:5995: checking for main in -li\" >&5\n ac_lib_var=`echo i'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-li  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5994 \"configure\"\n+#line 6003 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:6001: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6010: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -6025,12 +6034,12 @@ else\n fi\n \n \t    echo $ac_n \"checking for catgets\"\"... $ac_c\" 1>&6\n-echo \"configure:6029: checking for catgets\" >&5\n+echo \"configure:6038: checking for catgets\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_catgets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6034 \"configure\"\n+#line 6043 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char catgets(); below.  */\n@@ -6053,7 +6062,7 @@ catgets();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6057: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6066: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_catgets=yes\"\n else\n@@ -6075,7 +6084,7 @@ EOF\n \t       # Extract the first word of \"gencat\", so it can be a program name with args.\n set dummy gencat; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6079: checking for $ac_word\" >&5\n+echo \"configure:6088: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_GENCAT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6111,7 +6120,7 @@ fi\n \t\t # Extract the first word of \"gmsgfmt\", so it can be a program name with args.\n set dummy gmsgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6115: checking for $ac_word\" >&5\n+echo \"configure:6124: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6148,7 +6157,7 @@ fi\n \t\t   # Extract the first word of \"msgfmt\", so it can be a program name with args.\n set dummy msgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6152: checking for $ac_word\" >&5\n+echo \"configure:6161: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6186,7 +6195,7 @@ fi\n \t\t # Extract the first word of \"xgettext\", so it can be a program name with args.\n set dummy xgettext; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6190: checking for $ac_word\" >&5\n+echo \"configure:6199: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_XGETTEXT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6244,7 +6253,7 @@ fi\n         # Extract the first word of \"msgfmt\", so it can be a program name with args.\n set dummy msgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6248: checking for $ac_word\" >&5\n+echo \"configure:6257: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_MSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6278,7 +6287,7 @@ fi\n         # Extract the first word of \"gmsgfmt\", so it can be a program name with args.\n set dummy gmsgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6282: checking for $ac_word\" >&5\n+echo \"configure:6291: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6317,7 +6326,7 @@ fi\n         # Extract the first word of \"xgettext\", so it can be a program name with args.\n set dummy xgettext; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:6321: checking for $ac_word\" >&5\n+echo \"configure:6330: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_path_XGETTEXT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6416,7 +6425,7 @@ fi\n        LINGUAS=\n      else\n        echo $ac_n \"checking for catalogs to be installed\"\"... $ac_c\" 1>&6\n-echo \"configure:6420: checking for catalogs to be installed\" >&5\n+echo \"configure:6429: checking for catalogs to be installed\" >&5\n        if test \"x$LINGUAS\" = \"x\"; then\n \t LINGUAS=$ALL_LINGUAS\n        else\n@@ -6448,17 +6457,17 @@ echo \"configure:6420: checking for catalogs to be installed\" >&5\n    if test \"$CATOBJEXT\" = \".cat\"; then\n      ac_safe=`echo \"linux/version.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for linux/version.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6452: checking for linux/version.h\" >&5\n+echo \"configure:6461: checking for linux/version.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6457 \"configure\"\n+#line 6466 \"configure\"\n #include \"confdefs.h\"\n #include <linux/version.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:6462: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:6471: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -6534,7 +6543,7 @@ fi\n case $host_os in\n \twin32 | pe | cygwin* | mingw32* | uwin*)\n echo $ac_n \"checking whether windows registry support is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:6538: checking whether windows registry support is requested\" >&5\n+echo \"configure:6547: checking whether windows registry support is requested\" >&5\n if test \"x$enable_win32_registry\" != xno; then\n   cat >> confdefs.h <<\\EOF\n #define ENABLE_WIN32_REGISTRY 1\n@@ -6543,14 +6552,14 @@ EOF\n   echo \"$ac_t\"\"yes\" 1>&6\n   \n echo $ac_n \"checking for library containing RegOpenKeyExA\"\"... $ac_c\" 1>&6\n-echo \"configure:6547: checking for library containing RegOpenKeyExA\" >&5\n+echo \"configure:6556: checking for library containing RegOpenKeyExA\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_search_RegOpenKeyExA'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_func_search_save_LIBS=\"$LIBS\"\n ac_cv_search_RegOpenKeyExA=\"no\"\n cat > conftest.$ac_ext <<EOF\n-#line 6554 \"configure\"\n+#line 6563 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6561,7 +6570,7 @@ int main() {\n RegOpenKeyExA()\n ; return 0; }\n EOF\n-if { (eval echo configure:6565: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6574: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_RegOpenKeyExA=\"none required\"\n else\n@@ -6572,7 +6581,7 @@ rm -f conftest*\n test \"$ac_cv_search_RegOpenKeyExA\" = \"no\" && for i in advapi32; do\n LIBS=\"-l$i  $ac_func_search_save_LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6576 \"configure\"\n+#line 6585 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6583,7 +6592,7 @@ int main() {\n RegOpenKeyExA()\n ; return 0; }\n EOF\n-if { (eval echo configure:6587: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6596: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_RegOpenKeyExA=\"-l$i\"\n break\n@@ -6625,7 +6634,7 @@ esac\n \n if test \"x$enable_win32_registry\" != xno; then\n   echo $ac_n \"checking registry key on windows hosts\"\"... $ac_c\" 1>&6\n-echo \"configure:6629: checking registry key on windows hosts\" >&5\n+echo \"configure:6638: checking registry key on windows hosts\" >&5\n   cat >> confdefs.h <<EOF\n #define WIN32_REGISTRY_KEY \"$gcc_cv_win32_registry_key\"\n EOF\n@@ -6808,7 +6817,7 @@ fi\n \n # Figure out what assembler we will be using.\n echo $ac_n \"checking what assembler to use\"\"... $ac_c\" 1>&6\n-echo \"configure:6812: checking what assembler to use\" >&5\n+echo \"configure:6821: checking what assembler to use\" >&5\n gcc_cv_as=\n gcc_cv_gas_major_version=\n gcc_cv_gas_minor_version=\n@@ -6893,7 +6902,7 @@ fi\n \n # Figure out what nm we will be using.\n echo $ac_n \"checking what nm to use\"\"... $ac_c\" 1>&6\n-echo \"configure:6897: checking what nm to use\" >&5\n+echo \"configure:6906: checking what nm to use\" >&5\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n elif test x$host = x$target; then\n@@ -6904,7 +6913,7 @@ echo \"$ac_t\"\"$gcc_cv_nm\" 1>&6\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:6908: checking assembler alignment features\" >&5\n+echo \"configure:6917: checking assembler alignment features\" >&5\n gcc_cv_as_alignment_features=none\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n \t# Gas version 2.6 and later support for .balign and .p2align.\n@@ -6952,7 +6961,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:6956: checking assembler subsection support\" >&5\n+echo \"configure:6965: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -6992,7 +7001,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:6996: checking assembler weak support\" >&5\n+echo \"configure:7005: checking assembler weak support\" >&5\n gcc_cv_as_weak=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 2 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -7015,7 +7024,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:7019: checking assembler hidden support\" >&5\n+echo \"configure:7028: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 10 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7039,7 +7048,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_hidden\" 1>&6\n \n echo $ac_n \"checking assembler leb128 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7043: checking assembler leb128 support\" >&5\n+echo \"configure:7052: checking assembler leb128 support\" >&5\n gcc_cv_as_leb128=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 11 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7084,7 +7093,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_leb128\" 1>&6\n \n echo $ac_n \"checking assembler eh_frame optimization\"\"... $ac_c\" 1>&6\n-echo \"configure:7088: checking assembler eh_frame optimization\" >&5\n+echo \"configure:7097: checking assembler eh_frame optimization\" >&5\n gcc_cv_as_eh_frame=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7165,7 +7174,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_eh_frame\" 1>&6\n \n echo $ac_n \"checking assembler section merging support\"\"... $ac_c\" 1>&6\n-echo \"configure:6569: checking assembler section merging support\" >&5\n+echo \"configure:7178: checking assembler section merging support\" >&5\n gcc_cv_as_shf_merge=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7190,7 +7199,7 @@ echo \"$ac_t\"\"$gcc_cv_as_shf_merge\" 1>&6\n case \"$target\" in \n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:7171: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:7203: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7218,7 +7227,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler supports -relax\"\"... $ac_c\" 1>&6\n-echo \"configure:7199: checking assembler supports -relax\" >&5\n+echo \"configure:7231: checking assembler supports -relax\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_relax_opt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7248,7 +7257,7 @@ EOF\n     case \"$tm_file\" in\n     *64*)\n \techo $ac_n \"checking for 64 bit support in assembler ($gcc_cv_as)\"\"... $ac_c\" 1>&6\n-echo \"configure:7229: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n+echo \"configure:7261: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_flags64'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7293,7 +7302,7 @@ EOF\n \n     if test \"x$gcc_cv_as_flags64\" != xno; then\n \techo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:7274: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:7306: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7333,7 +7342,7 @@ EOF\n \n   i[34567]86-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:7314: checking assembler instructions\" >&5\n+echo \"configure:7346: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n       if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -7362,7 +7371,7 @@ EOF\n esac\n \n echo $ac_n \"checking assembler dwarf2 debug_line support\"\"... $ac_c\" 1>&6\n-echo \"configure:7343: checking assembler dwarf2 debug_line support\" >&5\n+echo \"configure:7375: checking assembler dwarf2 debug_line support\" >&5\n gcc_cv_as_dwarf2_debug_line=no\n # ??? Not all targets support dwarf2 debug_line, even within a version\n # of gas.  Moreover, we need to emit a valid instruction to trigger any\n@@ -7547,7 +7556,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:7528: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:7560: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\""}, {"sha": "6e120878fb52c31489cb775c016a1513461405c6", "filename": "gcc/configure.in", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "patch": "@@ -578,7 +578,8 @@ dnl gcc_AC_C_ENUM_BF_UNSIGNED\n AC_CHECK_FUNCS(strtoul bsearch popen times clock \\\n \tstrchr strrchr kill getrlimit setrlimit atoll atoq \\\n \tsysconf isascii gettimeofday strsignal putc_unlocked fputc_unlocked \\\n-\tfputs_unlocked getrusage nl_langinfo lstat)\n+\tfputs_unlocked fwrite_unlocked fprintf_unlocked getrusage nl_langinfo \\\n+\tlstat)\n \n AC_CHECK_TYPE(ssize_t, int)\n \n@@ -623,7 +624,8 @@ AM_ICONV\n saved_CFLAGS=\"$CFLAGS\"\n CFLAGS=\"$CFLAGS -I${srcdir} -I${srcdir}/../include\"\n gcc_AC_CHECK_DECLS(getenv atol sbrk abort atof getcwd getwd \\\n-\tstrsignal putc_unlocked fputs_unlocked strstr environ errno \\\n+\tstrsignal putc_unlocked fputs_unlocked fwrite_unlocked \\\n+        fprintf_unlocked strstr environ errno \\\n \tmalloc realloc calloc free basename getopt clock, , ,[\n #include \"ansidecl.h\"\n #include \"system.h\"])"}, {"sha": "dbef9b5dbf5d910802474fbd4ff107146ed69a06", "filename": "gcc/cpplex.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fcpplex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fcpplex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplex.c?ref=3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "patch": "@@ -1514,6 +1514,7 @@ cpp_output_token (token, fp)\n     case SPELL_OPERATOR:\n       {\n \tconst unsigned char *spelling;\n+\tint c;\n \n \tif (token->flags & DIGRAPH)\n \t  spelling\n@@ -1523,13 +1524,16 @@ cpp_output_token (token, fp)\n \telse\n \t  spelling = TOKEN_NAME (token);\n \n-\tufputs (spelling, fp);\n+\tc = *spelling;\n+\tdo\n+\t  putc (c, fp);\n+\twhile ((c = *++spelling) != '\\0');\n       }\n       break;\n \n     spell_ident:\n     case SPELL_IDENT:\n-      ufputs (NODE_NAME (token->val.node), fp);\n+      fwrite (NODE_NAME (token->val.node), 1, NODE_LEN (token->val.node), fp);\n     break;\n \n     case SPELL_STRING:"}, {"sha": "38767c7402ba2b559da8fafce2ddeba59ae6b0e4", "filename": "gcc/system.h", "status": "modified", "additions": 40, "deletions": 15, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=3b681e9dccc5cbbddecbcc1a0c41c51f7fbef57d", "patch": "@@ -55,28 +55,53 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #endif\n \n /* The compiler is not a multi-threaded application and therefore we\n-   do not have to use the locking functions.\n+   do not have to use the locking functions.  In fact, using the locking\n+   functions can cause the compiler to be significantly slower under\n+   I/O bound conditions (such as -g -O0 on very large source files).\n \n-   HAVE_DECL_PUTC_UNLOCKED actually indicates whether or not the IO\n+   HAVE_DECL_PUTC_UNLOCKED actually indicates whether or not the stdio\n    code is multi-thread safe by default.  If it is set to 0, then do\n    not worry about using the _unlocked functions.\n    \n-   fputs_unlocked is an extension and needs to be prototyped specially.  */\n+   fputs_unlocked, fwrite_unlocked, and fprintf_unlocked are\n+   extensions and need to be prototyped by hand (since we do not\n+   define _GNU_SOURCE).  */\n \n-#if defined HAVE_PUTC_UNLOCKED && (defined (HAVE_DECL_PUTC_UNLOCKED) && HAVE_DECL_PUTC_UNLOCKED)\n-# undef putc\n-# define putc(C, Stream) putc_unlocked (C, Stream)\n-#endif\n-#if defined HAVE_FPUTC_UNLOCKED && (defined (HAVE_DECL_PUTC_UNLOCKED) && HAVE_DECL_PUTC_UNLOCKED)\n-# undef fputc\n-# define fputc(C, Stream) fputc_unlocked (C, Stream)\n-#endif\n-#if defined HAVE_FPUTS_UNLOCKED && (defined (HAVE_DECL_PUTC_UNLOCKED) && HAVE_DECL_PUTC_UNLOCKED)\n-# undef fputs\n-# define fputs(String, Stream) fputs_unlocked (String, Stream)\n-# if defined (HAVE_DECL_FPUTS_UNLOCKED) && !HAVE_DECL_FPUTS_UNLOCKED\n+#if defined HAVE_DECL_PUTC_UNLOCKED && HAVE_DECL_PUTC_UNLOCKED\n+\n+# ifdef HAVE_PUTC_UNLOCKED\n+#  undef putc\n+#  define putc(C, Stream) putc_unlocked (C, Stream)\n+# endif\n+# ifdef HAVE_FPUTC_UNLOCKED\n+#  undef fputc\n+#  define fputc(C, Stream) fputc_unlocked (C, Stream)\n+# endif\n+\n+# ifdef HAVE_FPUTS_UNLOCKED\n+#  undef fputs\n+#  define fputs(String, Stream) fputs_unlocked (String, Stream)\n+#  if defined (HAVE_DECL_FPUTS_UNLOCKED) && !HAVE_DECL_FPUTS_UNLOCKED\n extern int fputs_unlocked PARAMS ((const char *, FILE *));\n+#  endif\n+# endif\n+# ifdef HAVE_FWRITE_UNLOCKED\n+#  undef fwrite\n+#  define fwrite(Ptr, Size, N, Stream) fwrite_unlocked (Ptr, Size, N, Stream)\n+#  if defined (HAVE_DECL_FWRITE_UNLOCKED) && !HAVE_DECL_FWRITE_UNLOCKED\n+extern int fwrite_unlocked PARAMS ((const PTR, size_t, size_t, FILE *));\n+#  endif\n # endif\n+# ifdef HAVE_FPRINTF_UNLOCKED\n+#  undef fprintf\n+/* We can't use a function-like macro here because we don't know if\n+   we have varargs macros.  */\n+#  define fprintf fprintf_unlocked\n+#  if defined (HAVE_DECL_FPRINTF_UNLOCKED) && !HAVE_DECL_FPRINTF_UNLOCKED\n+extern int fprintf_unlocked PARAMS ((FILE *, const char *, ...));\n+#  endif\n+# endif\n+\n #endif\n \n /* There are an extraordinary number of issues with <ctype.h>."}]}