{"sha": "ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY3YjNhYTUxZjhlZGQyNGZkYzU5OWQ5Zjk1YTVjYmY2MWFlYjc2ZQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2019-06-12T13:07:07Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-06-12T13:07:07Z"}, "message": "Disable hash-table sanitization for mem stats maps.\n\n2019-06-12  Martin Liska  <mliska@suse.cz>\n\n\t* ggc-common.c (ggc_prune_overhead_list): Do not sanitize\n\tthe created map.\n\t* hash-map.h: Add sanitize_eq_and_hash into ::hash_map.\n\t* mem-stats.h (mem_alloc_description::mem_alloc_description):\n\tDo not sanitize created maps.\n\nFrom-SVN: r272183", "tree": {"sha": "9a67df7d7f672eadd843ec0dc84484f438130c8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9a67df7d7f672eadd843ec0dc84484f438130c8b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "57bbc3e2f030b810766916189ec802aed5db5041", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57bbc3e2f030b810766916189ec802aed5db5041", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57bbc3e2f030b810766916189ec802aed5db5041"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "214ded49f1a1e2e13621c989791e3522810c1cca", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "patch": "@@ -1,3 +1,11 @@\n+2019-06-12  Martin Liska  <mliska@suse.cz>\n+\n+\t* ggc-common.c (ggc_prune_overhead_list): Do not sanitize\n+\tthe created map.\n+\t* hash-map.h: Add sanitize_eq_and_hash into ::hash_map.\n+\t* mem-stats.h (mem_alloc_description::mem_alloc_description):\n+\tDo not sanitize created maps.\n+\n 2019-06-12  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* gimple-ssa-evrp.c (evrp_dom_walker::before_dom_children): Use"}, {"sha": "6fb5a3d5ceb21d56956addd9093a6a63212c38eb", "filename": "gcc/ggc-common.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2Fggc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2Fggc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fggc-common.c?ref=ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "patch": "@@ -1014,5 +1014,5 @@ ggc_prune_overhead_list (void)\n       (*it).second.first->m_collected += (*it).second.second;\n \n   delete ggc_mem_desc.m_reverse_object_map;\n-  ggc_mem_desc.m_reverse_object_map = new map_t (13, false, false);\n+  ggc_mem_desc.m_reverse_object_map = new map_t (13, false, false, false);\n }"}, {"sha": "588dfda04fac5d1f6df1dea59fc316eeeb6255ba", "filename": "gcc/hash-map.h", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2Fhash-map.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2Fhash-map.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhash-map.h?ref=ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "patch": "@@ -118,16 +118,19 @@ class GTY((user)) hash_map\n \n public:\n   explicit hash_map (size_t n = 13, bool ggc = false,\n+\t\t     bool sanitize_eq_and_hash = true,\n \t\t     bool gather_mem_stats = GATHER_STATISTICS\n \t\t     CXX_MEM_STAT_INFO)\n-    : m_table (n, ggc, true, gather_mem_stats, HASH_MAP_ORIGIN PASS_MEM_STAT)\n+    : m_table (n, ggc, sanitize_eq_and_hash, gather_mem_stats,\n+\t       HASH_MAP_ORIGIN PASS_MEM_STAT)\n   {\n   }\n \n   explicit hash_map (const hash_map &h, bool ggc = false,\n+\t\t     bool sanitize_eq_and_hash = true,\n \t\t     bool gather_mem_stats = GATHER_STATISTICS\n \t\t     CXX_MEM_STAT_INFO)\n-    : m_table (h.m_table, ggc, true, gather_mem_stats,\n+    : m_table (h.m_table, ggc, sanitize_eq_and_hash, gather_mem_stats,\n \t       HASH_MAP_ORIGIN PASS_MEM_STAT) {}\n \n   /* Create a hash_map in ggc memory.  */\n@@ -136,7 +139,7 @@ class GTY((user)) hash_map\n \t\t\t       CXX_MEM_STAT_INFO)\n     {\n       hash_map *map = ggc_alloc<hash_map> ();\n-      new (map) hash_map (size, true, gather_mem_stats PASS_MEM_STAT);\n+      new (map) hash_map (size, true, true, gather_mem_stats PASS_MEM_STAT);\n       return map;\n     }\n "}, {"sha": "7796059575377ccc77c5198cfddda7d9d948fcd6", "filename": "gcc/mem-stats.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2Fmem-stats.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e/gcc%2Fmem-stats.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmem-stats.h?ref=ff7b3aa51f8edd24fdc599d9f95a5cbf61aeb76e", "patch": "@@ -559,9 +559,9 @@ template <class T>\n inline\n mem_alloc_description<T>::mem_alloc_description ()\n {\n-  m_map = new mem_map_t (13, false, false);\n-  m_reverse_map = new reverse_mem_map_t (13, false, false);\n-  m_reverse_object_map = new reverse_object_map_t (13, false, false);\n+  m_map = new mem_map_t (13, false, false, false);\n+  m_reverse_map = new reverse_mem_map_t (13, false, false, false);\n+  m_reverse_object_map = new reverse_object_map_t (13, false, false, false);\n }\n \n /* Default destructor.  */"}]}