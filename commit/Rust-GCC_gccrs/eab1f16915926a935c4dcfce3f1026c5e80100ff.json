{"sha": "eab1f16915926a935c4dcfce3f1026c5e80100ff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWFiMWYxNjkxNTkyNmE5MzVjNGRjZmNlM2YxMDI2YzVlODAxMDBmZg==", "commit": {"author": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2017-02-19T09:06:30Z"}, "committer": {"name": "Prathamesh Kulkarni", "email": "prathamesh3492@gcc.gnu.org", "date": "2017-02-19T09:06:30Z"}, "message": "gimple-pretty-print.c (dump_ternary_rhs): Adjust gimple dump format for FMA_EXPR.\n\n2017-02-19  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n\n\t* gimple-pretty-print.c (dump_ternary_rhs): Adjust gimple dump format\n\tfor FMA_EXPR.\n\nc/\n\t* gimple-parser.c (c_parser_gimple_postfix_expression): Handle\n\tFMA_EXPR.\n\ntestsuite/\n\t* gcc.dg/gimplefe-26.c: New test.\n\nFrom-SVN: r245570", "tree": {"sha": "926b977b27bc8148dc5410521269f1781a49ddf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/926b977b27bc8148dc5410521269f1781a49ddf0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eab1f16915926a935c4dcfce3f1026c5e80100ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eab1f16915926a935c4dcfce3f1026c5e80100ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eab1f16915926a935c4dcfce3f1026c5e80100ff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eab1f16915926a935c4dcfce3f1026c5e80100ff/comments", "author": null, "committer": null, "parents": [{"sha": "593bf80a532ab99841fe758991f98e0d8b99ae67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/593bf80a532ab99841fe758991f98e0d8b99ae67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/593bf80a532ab99841fe758991f98e0d8b99ae67"}], "stats": {"total": 75, "additions": 70, "deletions": 5}, "files": [{"sha": "4b7bc561707c8f9c4d8383f53134b39ad8009c7c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eab1f16915926a935c4dcfce3f1026c5e80100ff", "patch": "@@ -1,3 +1,8 @@\n+2017-02-19  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\t* gimple-pretty-print.c (dump_ternary_rhs): Adjust gimple dump format\n+\tfor FMA_EXPR.\n+\n 2017-02-18  Jakub Jelinek  <jakub@redhat.com>\n \n \t* final.c (last_columnnum, override_columnnum): New variables."}, {"sha": "0626973d47a2d2c7a2b8dae4e0f9693c3a9885b1", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=eab1f16915926a935c4dcfce3f1026c5e80100ff", "patch": "@@ -1,3 +1,8 @@\n+2017-02-19  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\t* gimple-parser.c (c_parser_gimple_postfix_expression): Handle\n+\tFMA_EXPR.\n+\n 2017-02-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/79512"}, {"sha": "31d0a08d3035c1eba0d21fabf691d1deabb520b4", "filename": "gcc/c/gimple-parser.c", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Fc%2Fgimple-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Fc%2Fgimple-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fgimple-parser.c?ref=eab1f16915926a935c4dcfce3f1026c5e80100ff", "patch": "@@ -856,6 +856,28 @@ c_parser_gimple_postfix_expression (c_parser *parser)\n \t      expr.value = fold_convert (type, val);\n \t      return expr;\n \t    }\n+\t  else if (strcmp (IDENTIFIER_POINTER (id), \"__FMA\") == 0)\n+\t    {\n+\t      c_parser_consume_token (parser);\n+\t      auto_vec<tree> args;\n+\n+\t      if (c_parser_require (parser, CPP_OPEN_PAREN, \"expected %<(%>\"))\n+\t\t{\n+\t\t  c_parser_gimple_expr_list (parser, &args);\n+\t\t  c_parser_skip_until_found (parser, CPP_CLOSE_PAREN,\n+\t\t\t\t\t     \"expected %<)%>\");\n+\t\t}\n+\t      if (args.length () != 3)\n+\t\t{\n+\t\t  error_at (loc, \"invalid number of operands to __FMA\");\n+\t\t  expr.value = error_mark_node;\n+\t\t  return expr;\n+\t\t}\n+\t      expr.value = build3_loc (loc, FMA_EXPR, TREE_TYPE (args[0]),\n+\t\t\t\t       args[0], args[1], args[2]);\n+\t      return expr;\n+\t    }\n+\n \t  /* SSA name.  */\n \t  unsigned version, ver_offset;\n \t  if (! lookup_name (id)"}, {"sha": "a7a5d00dc2e63cbdfb7a26d3c69f385df9b243e2", "filename": "gcc/gimple-pretty-print.c", "status": "modified", "additions": 18, "deletions": 5, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Fgimple-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Fgimple-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-pretty-print.c?ref=eab1f16915926a935c4dcfce3f1026c5e80100ff", "patch": "@@ -453,11 +453,24 @@ dump_ternary_rhs (pretty_printer *buffer, gassign *gs, int spc, int flags)\n       break;\n \n     case FMA_EXPR:\n-      dump_generic_node (buffer, gimple_assign_rhs1 (gs), spc, flags, false);\n-      pp_string (buffer, \" * \");\n-      dump_generic_node (buffer, gimple_assign_rhs2 (gs), spc, flags, false);\n-      pp_string (buffer, \" + \");\n-      dump_generic_node (buffer, gimple_assign_rhs3 (gs), spc, flags, false);\n+      if (flags & TDF_GIMPLE)\n+\t{\n+\t  pp_string (buffer, \"__FMA (\");\n+\t  dump_generic_node (buffer, gimple_assign_rhs1 (gs), spc, flags, false);\n+\t  pp_comma (buffer);\n+\t  dump_generic_node (buffer, gimple_assign_rhs2 (gs), spc, flags, false);\n+\t  pp_comma (buffer);\n+\t  dump_generic_node (buffer, gimple_assign_rhs3 (gs), spc, flags, false);\n+\t  pp_right_paren (buffer);\n+\t}\n+      else\n+\t{\n+\t  dump_generic_node (buffer, gimple_assign_rhs1 (gs), spc, flags, false);\n+\t  pp_string (buffer, \" * \");\n+\t  dump_generic_node (buffer, gimple_assign_rhs2 (gs), spc, flags, false);\n+\t  pp_string (buffer, \" + \");\n+\t  dump_generic_node (buffer, gimple_assign_rhs3 (gs), spc, flags, false);\n+\t}\n       break;\n \n     case DOT_PROD_EXPR:"}, {"sha": "97f392a1ac66d890e4c582371e247a02bcbb2a32", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=eab1f16915926a935c4dcfce3f1026c5e80100ff", "patch": "@@ -1,3 +1,7 @@\n+2017-02-19  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\t* gcc.dg/gimplefe-26.c: New test.\n+\n 2017-02-18  John David Anglin  <danglin@gcc.gnu.org>\n \n \t* g++.dg/tls/thread_local-order2.C: xfail on hppa*-*-hpux*."}, {"sha": "55a4624b8010a7d8c620f65fb0052b3c43bf3e37", "filename": "gcc/testsuite/gcc.dg/gimplefe-26.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-26.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eab1f16915926a935c4dcfce3f1026c5e80100ff/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-26.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgimplefe-26.c?ref=eab1f16915926a935c4dcfce3f1026c5e80100ff", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -fgimple -fdump-tree-ssa-gimple\" } */\n+\n+#define foo(type, num) \\\n+type __GIMPLE () foo_##num (type a, type b, type c) \\\n+{ \\\n+  type t0; \\\n+  t0_1 = __FMA (a, b, c); \\\n+  return t0_1; \\\n+}\n+\n+foo(float, 1)\n+foo(double, 2)\n+foo(long double, 3)\n+\n+/* { dg-final { scan-tree-dump-times \"__FMA\" 3 \"ssa\" } } */"}]}