{"sha": "71043642d566b8b1c23af1f8dfa8783ca7234b28", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzEwNDM2NDJkNTY2YjhiMWMyM2FmMWY4ZGZhODc4M2NhNzIzNGIyOA==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2019-08-21T07:53:55Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2019-08-21T07:53:55Z"}, "message": "libphobos: Merge upstream phobos 66ae77ac3\n\nFinishes off phobos support for musl targets.\n\nReviewed-on: https://github.com/dlang/phobos/pull/7108\n\nFrom-SVN: r274770", "tree": {"sha": "b57a5470dbaa40aee2f74f556a2290a777214c82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b57a5470dbaa40aee2f74f556a2290a777214c82"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71043642d566b8b1c23af1f8dfa8783ca7234b28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71043642d566b8b1c23af1f8dfa8783ca7234b28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71043642d566b8b1c23af1f8dfa8783ca7234b28", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71043642d566b8b1c23af1f8dfa8783ca7234b28/comments", "author": null, "committer": null, "parents": [{"sha": "7cc9cfd2ca8c526661da7f040e80cbd2bc597645", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cc9cfd2ca8c526661da7f040e80cbd2bc597645", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cc9cfd2ca8c526661da7f040e80cbd2bc597645"}], "stats": {"total": 76, "additions": 20, "deletions": 56}, "files": [{"sha": "6a1e00874bb606fb30d2487d9f5fabf2b50d04b2", "filename": "libphobos/src/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2FMERGE?ref=71043642d566b8b1c23af1f8dfa8783ca7234b28", "patch": "@@ -1,4 +1,4 @@\n-3dc363783ea7b1e82336983486a14f3f44bbeadd\n+66ae77ac3f97a007a12738e4bc02b3bbfef99bba\n \n The first line of this file holds the git revision number of the last\n merge done from the dlang/phobos repository."}, {"sha": "835d0937cec2e0b9f24e8c92ba9798ee5c5d4f3d", "filename": "libphobos/src/std/experimental/allocator/building_blocks/region.d", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2Fstd%2Fexperimental%2Fallocator%2Fbuilding_blocks%2Fregion.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2Fstd%2Fexperimental%2Fallocator%2Fbuilding_blocks%2Fregion.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2Fstd%2Fexperimental%2Fallocator%2Fbuilding_blocks%2Fregion.d?ref=71043642d566b8b1c23af1f8dfa8783ca7234b28", "patch": "@@ -580,6 +580,12 @@ struct InSituRegion(size_t size, size_t minAlign = platformAlignment)\n     assert(a.length == 2001);\n }\n \n+version(CRuntime_Musl)\n+{\n+    // sbrk and brk are disabled in Musl:\n+    // https://git.musl-libc.org/cgit/musl/commit/?id=7a995fe706e519a4f55399776ef0df9596101f93\n+    // https://git.musl-libc.org/cgit/musl/commit/?id=863d628d93ea341b6a32661a1654320ce69f6a07\n+} else:\n private extern(C) void* sbrk(long);\n private extern(C) int brk(shared void*);\n "}, {"sha": "a4ba39c833630abcfb7cb603b65df98dc46ba7e4", "filename": "libphobos/src/std/socket.d", "status": "modified", "additions": 1, "deletions": 43, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2Fstd%2Fsocket.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2Fstd%2Fsocket.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2Fstd%2Fsocket.d?ref=71043642d566b8b1c23af1f8dfa8783ca7234b28", "patch": "@@ -163,56 +163,14 @@ string formatSocketError(int err) @trusted\n         {\n             cs = strerror_r(err, buf.ptr, buf.length);\n         }\n-        else version (OSX)\n-        {\n-            auto errs = strerror_r(err, buf.ptr, buf.length);\n-            if (errs == 0)\n-                cs = buf.ptr;\n-            else\n-                return \"Socket error \" ~ to!string(err);\n-        }\n-        else version (FreeBSD)\n-        {\n-            auto errs = strerror_r(err, buf.ptr, buf.length);\n-            if (errs == 0)\n-                cs = buf.ptr;\n-            else\n-                return \"Socket error \" ~ to!string(err);\n-        }\n-        else version (NetBSD)\n-        {\n-            auto errs = strerror_r(err, buf.ptr, buf.length);\n-            if (errs == 0)\n-                cs = buf.ptr;\n-            else\n-                return \"Socket error \" ~ to!string(err);\n-        }\n-        else version (DragonFlyBSD)\n-        {\n-            auto errs = strerror_r(err, buf.ptr, buf.length);\n-            if (errs == 0)\n-                cs = buf.ptr;\n-            else\n-                return \"Socket error \" ~ to!string(err);\n-        }\n-        else version (Solaris)\n-        {\n-            auto errs = strerror_r(err, buf.ptr, buf.length);\n-            if (errs == 0)\n-                cs = buf.ptr;\n-            else\n-                return \"Socket error \" ~ to!string(err);\n-        }\n-        else version (CRuntime_Bionic)\n+        else\n         {\n             auto errs = strerror_r(err, buf.ptr, buf.length);\n             if (errs == 0)\n                 cs = buf.ptr;\n             else\n                 return \"Socket error \" ~ to!string(err);\n         }\n-        else\n-            static assert(0);\n \n         auto len = strlen(cs);\n "}, {"sha": "4c1ad0baa153efb9d5238538e43fcc99a5cbeac8", "filename": "libphobos/src/std/stdio.d", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2Fstd%2Fstdio.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71043642d566b8b1c23af1f8dfa8783ca7234b28/libphobos%2Fsrc%2Fstd%2Fstdio.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2Fstd%2Fstdio.d?ref=71043642d566b8b1c23af1f8dfa8783ca7234b28", "patch": "@@ -44,38 +44,38 @@ version (CRuntime_Glibc)\n     version = GCC_IO;\n     version = HAS_GETDELIM;\n }\n-\n-version (OSX)\n+else version (CRuntime_Bionic)\n {\n     version = GENERIC_IO;\n     version = HAS_GETDELIM;\n }\n-\n-version (FreeBSD)\n+else version (CRuntime_Musl)\n {\n     version = GENERIC_IO;\n     version = HAS_GETDELIM;\n }\n \n-version (NetBSD)\n+version (OSX)\n {\n     version = GENERIC_IO;\n     version = HAS_GETDELIM;\n }\n-\n-version (DragonFlyBSD)\n+else version (FreeBSD)\n {\n     version = GENERIC_IO;\n     version = HAS_GETDELIM;\n }\n-\n-version (Solaris)\n+else version (NetBSD)\n {\n     version = GENERIC_IO;\n-    version = NO_GETDELIM;\n+    version = HAS_GETDELIM;\n }\n-\n-version (CRuntime_Bionic)\n+else version (DragonFlyBSD)\n+{\n+    version = GENERIC_IO;\n+    version = HAS_GETDELIM;\n+}\n+else version (Solaris)\n {\n     version = GENERIC_IO;\n     version = NO_GETDELIM;"}]}