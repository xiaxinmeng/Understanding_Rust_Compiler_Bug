{"sha": "692ad9aab27d2420d85704db46dddabc2cb1b61e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjkyYWQ5YWFiMjdkMjQyMGQ4NTcwNGRiNDZkZGRhYmMyY2IxYjYxZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-10-22T23:39:16Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-10-22T23:39:16Z"}, "message": "gimplify.c (gimplify_variable_sized_compare): Preserve the source location info of the expression.\n\n\t* gimplify.c (gimplify_variable_sized_compare): Preserve the source\n\tlocation info of the expression.\n\nFrom-SVN: r165875", "tree": {"sha": "d33139567cb4e551c6210de407685e46668acbd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d33139567cb4e551c6210de407685e46668acbd2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/692ad9aab27d2420d85704db46dddabc2cb1b61e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/692ad9aab27d2420d85704db46dddabc2cb1b61e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/692ad9aab27d2420d85704db46dddabc2cb1b61e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/692ad9aab27d2420d85704db46dddabc2cb1b61e/comments", "author": null, "committer": null, "parents": [{"sha": "b3f85ff2b7a16dcf31d6c2c60cfddc9d55d21d1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3f85ff2b7a16dcf31d6c2c60cfddc9d55d21d1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3f85ff2b7a16dcf31d6c2c60cfddc9d55d21d1a"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "42e4c070f7d1ee2f85b568f971571a8dac31e8f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/692ad9aab27d2420d85704db46dddabc2cb1b61e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/692ad9aab27d2420d85704db46dddabc2cb1b61e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=692ad9aab27d2420d85704db46dddabc2cb1b61e", "patch": "@@ -1,3 +1,8 @@\n+2010-10-22  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gimplify.c (gimplify_variable_sized_compare): Preserve the source\n+\tlocation info of the expression.\n+\n 2010-10-22  DJ Delorie  <dj@redhat.com>\n \n \t* doc/extend.texi (Named Address Spaces): Document the M32C named\n@@ -31,7 +36,7 @@\n \t(movsi_splittable): Split A1A0 also.\n \n 2010-10-22  Artjoms Sinkarovs <artyom.shinakroff@gmail.com>\n-\tAndrew Pinski <pinskia@gmail.com>\n+\t    Andrew Pinski <pinskia@gmail.com>\n \n \t* c-typeck.c (build_array_ref): Handle subscripting of vectors.\n \t* doc/extend.texi: New paragraph"}, {"sha": "542c2234ccba1e38d6903f69abde2f9f85ecdf99", "filename": "gcc/gimplify.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/692ad9aab27d2420d85704db46dddabc2cb1b61e/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/692ad9aab27d2420d85704db46dddabc2cb1b61e/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=692ad9aab27d2420d85704db46dddabc2cb1b61e", "patch": "@@ -4634,10 +4634,10 @@ gimplify_modify_expr (tree *expr_p, gimple_seq *pre_p, gimple_seq *post_p,\n static enum gimplify_status\n gimplify_variable_sized_compare (tree *expr_p)\n {\n+  location_t loc = EXPR_LOCATION (*expr_p);\n   tree op0 = TREE_OPERAND (*expr_p, 0);\n   tree op1 = TREE_OPERAND (*expr_p, 1);\n-  tree t, arg, dest, src;\n-  location_t loc = EXPR_LOCATION (*expr_p);\n+  tree t, arg, dest, src, expr;\n \n   arg = TYPE_SIZE_UNIT (TREE_TYPE (op0));\n   arg = unshare_expr (arg);\n@@ -4646,8 +4646,11 @@ gimplify_variable_sized_compare (tree *expr_p)\n   dest = build_fold_addr_expr_loc (loc, op0);\n   t = implicit_built_in_decls[BUILT_IN_MEMCMP];\n   t = build_call_expr_loc (loc, t, 3, dest, src, arg);\n-  *expr_p\n+\n+  expr\n     = build2 (TREE_CODE (*expr_p), TREE_TYPE (*expr_p), t, integer_zero_node);\n+  SET_EXPR_LOCATION (expr, loc);\n+  *expr_p = expr;\n \n   return GS_OK;\n }"}]}