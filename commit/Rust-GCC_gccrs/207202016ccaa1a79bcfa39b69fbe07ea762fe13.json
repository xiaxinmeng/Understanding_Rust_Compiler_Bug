{"sha": "207202016ccaa1a79bcfa39b69fbe07ea762fe13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA3MjAyMDE2Y2NhYTFhNzliY2ZhMzliNjlmYmUwN2VhNzYyZmUxMw==", "commit": {"author": {"name": "Douglas B Rupp", "email": "rupp@gnat.com", "date": "2011-06-08T21:27:06Z"}, "committer": {"name": "Douglas Rupp", "email": "rupp@gcc.gnu.org", "date": "2011-06-08T21:27:06Z"}, "message": "configure.ac (AC_USE_SYSTEM_EXTENSIONS): Add.\n\n2011-06-08  Douglas B Rupp  <rupp@gnat.com>\n\n\t* fixincludes/configure.ac (AC_USE_SYSTEM_EXTENSIONS): Add.\n\t* fixincludes/configure: Regenerate.\n\t* fixincludes/config.h.in: Regenerate.\n\nFrom-SVN: r174818", "tree": {"sha": "d5d4917cb7b58635ee8e4b2879c48d70c23e89f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d5d4917cb7b58635ee8e4b2879c48d70c23e89f8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/207202016ccaa1a79bcfa39b69fbe07ea762fe13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/207202016ccaa1a79bcfa39b69fbe07ea762fe13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/207202016ccaa1a79bcfa39b69fbe07ea762fe13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/207202016ccaa1a79bcfa39b69fbe07ea762fe13/comments", "author": null, "committer": null, "parents": [{"sha": "a608debe1cfd53c7c1d5d2f2701e7dc93edb2eab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a608debe1cfd53c7c1d5d2f2701e7dc93edb2eab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a608debe1cfd53c7c1d5d2f2701e7dc93edb2eab"}], "stats": {"total": 943, "additions": 582, "deletions": 361}, "files": [{"sha": "bf0e4c51236d7b5a51b3e4c0bc8508cd4fceb385", "filename": "fixincludes/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2FChangeLog?ref=207202016ccaa1a79bcfa39b69fbe07ea762fe13", "patch": "@@ -1,3 +1,9 @@\n+2011-06-08  Douglas B Rupp  <rupp@gnat.com>\n+\n+\t* configure.ac (AC_USE_SYSTEM_EXTENSIONS): Add.\n+\t* configure: Regenerate.\n+\t* config.h.in: Regenerate.\n+\n 2011-06-06  Peter O'Gorman  <pogma@thewrittenword.com>\n \n \t* inclhack.def (aix_net_if_arp): New fix."}, {"sha": "3f6cf1e574eb2b25c89fd396ea4a458041ea5684", "filename": "fixincludes/config.h.in", "status": "modified", "additions": 43, "deletions": 2, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Fconfig.h.in?ref=207202016ccaa1a79bcfa39b69fbe07ea762fe13", "patch": "@@ -26,8 +26,8 @@\n #endif\n \n \n-/* Define to 1 if you have the declaration of `basename', and to 0 if you\n-   don't. */\n+/* Define to 1 if you have the declaration of `basename(char *)', and to 0 if\n+   you don't. */\n #ifndef USED_FOR_TARGET\n #undef HAVE_DECL_BASENAME\n #endif\n@@ -393,6 +393,47 @@\n #endif\n \n \n+/* Enable extensions on AIX 3, Interix.  */\n+#ifndef _ALL_SOURCE\n+# undef _ALL_SOURCE\n+#endif\n+/* Enable GNU extensions on systems that have them.  */\n+#ifndef _GNU_SOURCE\n+# undef _GNU_SOURCE\n+#endif\n+/* Enable threading extensions on Solaris.  */\n+#ifndef _POSIX_PTHREAD_SEMANTICS\n+# undef _POSIX_PTHREAD_SEMANTICS\n+#endif\n+/* Enable extensions on HP NonStop.  */\n+#ifndef _TANDEM_SOURCE\n+# undef _TANDEM_SOURCE\n+#endif\n+/* Enable general extensions on Solaris.  */\n+#ifndef __EXTENSIONS__\n+# undef __EXTENSIONS__\n+#endif\n+\n+\n+/* Define to 1 if on MINIX. */\n+#ifndef USED_FOR_TARGET\n+#undef _MINIX\n+#endif\n+\n+\n+/* Define to 2 if the system does not provide POSIX.1 features except with\n+   this defined. */\n+#ifndef USED_FOR_TARGET\n+#undef _POSIX_1_SOURCE\n+#endif\n+\n+\n+/* Define to 1 if you need to in order for `stat' and other things to work. */\n+#ifndef USED_FOR_TARGET\n+#undef _POSIX_SOURCE\n+#endif\n+\n+\n /* Define to xatexit if the host system does not support atexit */\n #ifndef USED_FOR_TARGET\n #undef atexit"}, {"sha": "b75ef313ad0d3b0d1bb36f4abc9dc6331e6407c8", "filename": "fixincludes/configure", "status": "modified", "additions": 532, "deletions": 359, "changes": 891, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Fconfigure?ref=207202016ccaa1a79bcfa39b69fbe07ea762fe13", "patch": "@@ -591,15 +591,15 @@ ac_includes_default=\"\\\n ac_subst_vars='LTLIBOBJS\n LIBOBJS\n MAINT\n-EGREP\n-GREP\n-CPP\n TARGET\n target_noncanonical\n WERROR\n WARN_PEDANTIC\n WARN_CFLAGS\n SED\n+EGREP\n+GREP\n+CPP\n OBJEXT\n EXEEXT\n ac_ct_CC\n@@ -1464,48 +1464,6 @@ fi\n \n } # ac_fn_c_try_cpp\n \n-# ac_fn_c_try_run LINENO\n-# ----------------------\n-# Try to link conftest.$ac_ext, and return whether this succeeded. Assumes\n-# that executables *can* be run.\n-ac_fn_c_try_run ()\n-{\n-  as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n-  if { { ac_try=\"$ac_link\"\n-case \"(($ac_try\" in\n-  *\\\"* | *\\`* | *\\\\*) ac_try_echo=\\$ac_try;;\n-  *) ac_try_echo=$ac_try;;\n-esac\n-eval ac_try_echo=\"\\\"\\$as_me:${as_lineno-$LINENO}: $ac_try_echo\\\"\"\n-$as_echo \"$ac_try_echo\"; } >&5\n-  (eval \"$ac_link\") 2>&5\n-  ac_status=$?\n-  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n-  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'\n-  { { case \"(($ac_try\" in\n-  *\\\"* | *\\`* | *\\\\*) ac_try_echo=\\$ac_try;;\n-  *) ac_try_echo=$ac_try;;\n-esac\n-eval ac_try_echo=\"\\\"\\$as_me:${as_lineno-$LINENO}: $ac_try_echo\\\"\"\n-$as_echo \"$ac_try_echo\"; } >&5\n-  (eval \"$ac_try\") 2>&5\n-  ac_status=$?\n-  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n-  test $ac_status = 0; }; }; then :\n-  ac_retval=0\n-else\n-  $as_echo \"$as_me: program exited with status $ac_status\" >&5\n-       $as_echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-       ac_retval=$ac_status\n-fi\n-  rm -rf conftest.dSYM conftest_ipa8_conftest.oo\n-  eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n-  return $ac_retval\n-\n-} # ac_fn_c_try_run\n-\n # ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES\n # -------------------------------------------------------\n # Tests whether HEADER exists, giving a warning if it cannot be compiled using\n@@ -1593,6 +1551,48 @@ fi\n \n } # ac_fn_c_check_header_mongrel\n \n+# ac_fn_c_try_run LINENO\n+# ----------------------\n+# Try to link conftest.$ac_ext, and return whether this succeeded. Assumes\n+# that executables *can* be run.\n+ac_fn_c_try_run ()\n+{\n+  as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n+  if { { ac_try=\"$ac_link\"\n+case \"(($ac_try\" in\n+  *\\\"* | *\\`* | *\\\\*) ac_try_echo=\\$ac_try;;\n+  *) ac_try_echo=$ac_try;;\n+esac\n+eval ac_try_echo=\"\\\"\\$as_me:${as_lineno-$LINENO}: $ac_try_echo\\\"\"\n+$as_echo \"$ac_try_echo\"; } >&5\n+  (eval \"$ac_link\") 2>&5\n+  ac_status=$?\n+  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n+  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'\n+  { { case \"(($ac_try\" in\n+  *\\\"* | *\\`* | *\\\\*) ac_try_echo=\\$ac_try;;\n+  *) ac_try_echo=$ac_try;;\n+esac\n+eval ac_try_echo=\"\\\"\\$as_me:${as_lineno-$LINENO}: $ac_try_echo\\\"\"\n+$as_echo \"$ac_try_echo\"; } >&5\n+  (eval \"$ac_try\") 2>&5\n+  ac_status=$?\n+  $as_echo \"$as_me:${as_lineno-$LINENO}: \\$? = $ac_status\" >&5\n+  test $ac_status = 0; }; }; then :\n+  ac_retval=0\n+else\n+  $as_echo \"$as_me: program exited with status $ac_status\" >&5\n+       $as_echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+       ac_retval=$ac_status\n+fi\n+  rm -rf conftest.dSYM conftest_ipa8_conftest.oo\n+  eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n+  return $ac_retval\n+\n+} # ac_fn_c_try_run\n+\n # ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES\n # -------------------------------------------------------\n # Tests whether HEADER exists and can be compiled using the include files in\n@@ -4028,334 +4028,79 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for a sed that does not truncate output\" >&5\n-$as_echo_n \"checking for a sed that does not truncate output... \" >&6; }\n-if test \"${ac_cv_path_SED+set}\" = set; then :\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor\" >&5\n+$as_echo_n \"checking how to run the C preprocessor... \" >&6; }\n+# On Suns, sometimes $CPP names a directory.\n+if test -n \"$CPP\" && test -d \"$CPP\"; then\n+  CPP=\n+fi\n+if test -z \"$CPP\"; then\n+  if test \"${ac_cv_prog_CPP+set}\" = set; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-            ac_script=s/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb/\n-     for ac_i in 1 2 3 4 5 6 7; do\n-       ac_script=\"$ac_script$as_nl$ac_script\"\n-     done\n-     echo \"$ac_script\" 2>/dev/null | sed 99q >conftest.sed\n-     { ac_script=; unset ac_script;}\n-     if test -z \"$SED\"; then\n-  ac_path_SED_found=false\n-  # Loop through the user's path and test for each of PROGNAME-LIST\n-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n+      # Double quotes because CPP needs to be expanded\n+    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n+    do\n+      ac_preproc_ok=false\n+for ac_c_preproc_warn_flag in '' yes\n do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_prog in sed gsed; do\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-      ac_path_SED=\"$as_dir/$ac_prog$ac_exec_ext\"\n-      { test -f \"$ac_path_SED\" && $as_test_x \"$ac_path_SED\"; } || continue\n-# Check for GNU ac_path_SED and select it if it is found.\n-  # Check for GNU $ac_path_SED\n-case `\"$ac_path_SED\" --version 2>&1` in\n-*GNU*)\n-  ac_cv_path_SED=\"$ac_path_SED\" ac_path_SED_found=:;;\n-*)\n-  ac_count=0\n-  $as_echo_n 0123456789 >\"conftest.in\"\n-  while :\n-  do\n-    cat \"conftest.in\" \"conftest.in\" >\"conftest.tmp\"\n-    mv \"conftest.tmp\" \"conftest.in\"\n-    cp \"conftest.in\" \"conftest.nl\"\n-    $as_echo '' >> \"conftest.nl\"\n-    \"$ac_path_SED\" -f conftest.sed < \"conftest.nl\" >\"conftest.out\" 2>/dev/null || break\n-    diff \"conftest.out\" \"conftest.nl\" >/dev/null 2>&1 || break\n-    as_fn_arith $ac_count + 1 && ac_count=$as_val\n-    if test $ac_count -gt ${ac_path_SED_max-0}; then\n-      # Best one so far, save it but keep looking for a better one\n-      ac_cv_path_SED=\"$ac_path_SED\"\n-      ac_path_SED_max=$ac_count\n-    fi\n-    # 10*(2^10) chars as input seems more than enough\n-    test $ac_count -gt 10 && break\n-  done\n-  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;\n-esac\n+  # Use a header file that comes with gcc, so configuring glibc\n+  # with a fresh cross-compiler works.\n+  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n+  # <limits.h> exists even on freestanding compilers.\n+  # On the NeXT, cc -E runs the code through the compiler's parser,\n+  # not just through cpp. \"Syntax error\" is here to catch this case.\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#ifdef __STDC__\n+# include <limits.h>\n+#else\n+# include <assert.h>\n+#endif\n+\t\t     Syntax error\n+_ACEOF\n+if ac_fn_c_try_cpp \"$LINENO\"; then :\n \n-      $ac_path_SED_found && break 3\n-    done\n-  done\n-  done\n-IFS=$as_save_IFS\n-  if test -z \"$ac_cv_path_SED\"; then\n-    as_fn_error \"no acceptable sed could be found in \\$PATH\" \"$LINENO\" 5\n-  fi\n else\n-  ac_cv_path_SED=$SED\n-fi\n-\n+  # Broken: fails on valid input.\n+continue\n fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_SED\" >&5\n-$as_echo \"$ac_cv_path_SED\" >&6; }\n- SED=\"$ac_cv_path_SED\"\n-  rm -f conftest.sed\n-\n-\n-# Figure out what compiler warnings we can enable.\n-# See config/warnings.m4 for details.\n-\n-\n-WARN_CFLAGS=\n-save_CFLAGS=\"$CFLAGS\"\n-for option in -W -Wall -Wwrite-strings -Wstrict-prototypes \\\n-\t\t\t  -Wmissing-prototypes -Wold-style-definition \\\n-\t\t\t  -Wmissing-format-attribute -Wno-overlength-strings; do\n-  as_acx_Woption=`$as_echo \"acx_cv_prog_cc_warning_$option\" | $as_tr_sh`\n+rm -f conftest.err conftest.$ac_ext\n \n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $CC supports $option\" >&5\n-$as_echo_n \"checking whether $CC supports $option... \" >&6; }\n-if { as_var=$as_acx_Woption; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  CFLAGS=\"$option\"\n-    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+  # OK, works on sane cases.  Now check whether nonexistent headers\n+  # can be detected and how.\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n-\n-int\n-main ()\n-{\n-\n-  ;\n-  return 0;\n-}\n+#include <ac_nonexistent.h>\n _ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  eval \"$as_acx_Woption=yes\"\n+if ac_fn_c_try_cpp \"$LINENO\"; then :\n+  # Broken: success on invalid input.\n+continue\n else\n-  eval \"$as_acx_Woption=no\"\n+  # Passes both tests.\n+ac_preproc_ok=:\n+break\n fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+rm -f conftest.err conftest.$ac_ext\n \n+done\n+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n+rm -f conftest.err conftest.$ac_ext\n+if $ac_preproc_ok; then :\n+  break\n fi\n-eval ac_res=\\$$as_acx_Woption\n-\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n-$as_echo \"$ac_res\" >&6; }\n-  if test `eval 'as_val=${'$as_acx_Woption'};$as_echo \"$as_val\"'` = yes; then :\n-  WARN_CFLAGS=\"$WARN_CFLAGS${WARN_CFLAGS:+ }$option\"\n-fi\n-  done\n-CFLAGS=\"$save_CFLAGS\"\n \n-WARN_PEDANTIC=\n-if test \"$GCC\" = yes; then :\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $CC supports -pedantic -Wno-long-long\" >&5\n-$as_echo_n \"checking whether $CC supports -pedantic -Wno-long-long... \" >&6; }\n-if test \"${acx_cv_prog_cc_pedantic__Wno_long_long+set}\" = set; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  save_CFLAGS=\"$CFLAGS\"\n-CFLAGS=\"-pedantic -Wno-long-long\"\n-cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-\n-int\n-main ()\n-{\n-\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  acx_cv_prog_cc_pedantic__Wno_long_long=yes\n-else\n-  acx_cv_prog_cc_pedantic__Wno_long_long=no\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-CFLAGS=\"$save_CFLAGS\"\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $acx_cv_prog_cc_pedantic__Wno_long_long\" >&5\n-$as_echo \"$acx_cv_prog_cc_pedantic__Wno_long_long\" >&6; }\n-if test $acx_cv_prog_cc_pedantic__Wno_long_long = yes; then :\n-  WARN_PEDANTIC=\"$WARN_PEDANTIC${WARN_PEDANTIC:+ }-pedantic -Wno-long-long\"\n-fi\n-\n-fi\n-\n-\n-# Only enable with --enable-werror-always until existing warnings are\n-# corrected.\n-WERROR=\n-# Check whether --enable-werror-always was given.\n-if test \"${enable_werror_always+set}\" = set; then :\n-  enableval=$enable_werror_always;\n-else\n-  enable_werror_always=no\n-fi\n-\n-if test $enable_werror_always = yes; then :\n-  WERROR=\"$WERROR${WERROR:+ }-Werror\"\n-fi\n-\n-\n-\n-# Determine the noncanonical target name, for directory use.\n- case ${build_alias} in\n-  \"\") build_noncanonical=${build} ;;\n-  *) build_noncanonical=${build_alias} ;;\n-esac\n-\n- case ${host_alias} in\n-  \"\") host_noncanonical=${build_noncanonical} ;;\n-  *) host_noncanonical=${host_alias} ;;\n-esac\n-\n- case ${target_alias} in\n-  \"\") target_noncanonical=${host_noncanonical} ;;\n-  *) target_noncanonical=${target_alias} ;;\n-esac\n-\n-\n-\n-\n-# Specify the local prefix\n-local_prefix=\n-\n-# Check whether --with-local-prefix was given.\n-if test \"${with_local_prefix+set}\" = set; then :\n-  withval=$with_local_prefix; case \"${withval}\" in\n-yes)\tas_fn_error \"bad value ${withval} given for local include directory prefix\" \"$LINENO\" 5 ;;\n-no)\t;;\n-*)\tlocal_prefix=$with_local_prefix ;;\n-esac\n-fi\n-\n-\n-# Default local prefix if it is empty\n-if test x$local_prefix = x; then\n-\tlocal_prefix=/usr/local\n-fi\n-\n-# Choose one or two-process fix methodology.  Systems that cannot handle\n-# bi-directional pipes must use the two process method.\n-#\n-# Check whether --enable-twoprocess was given.\n-if test \"${enable_twoprocess+set}\" = set; then :\n-  enableval=$enable_twoprocess; if test \"x$enable_twoprocess\" = xyes; then\n-\tTARGET=twoprocess\n-else\n-\tTARGET=oneprocess\n-fi\n-else\n-  case $host in\n-\ti?86-*-msdosdjgpp* | \\\n-\ti?86-*-mingw32* | \\\n-\tx86_64-*-mingw32* | \\\n-\t*-*-beos* )\n-\t\tTARGET=twoprocess\n-\t\t;;\n-\n-\t* )\n-\t\tTARGET=oneprocess\n-\t\t;;\n-esac\n-fi\n-\n-\n-\n-if test $TARGET = twoprocess; then\n-\n-$as_echo \"#define SEPARATE_FIX_PROC 1\" >>confdefs.h\n-\n-fi\n-\n-case $host in\n-\tvax-dec-bsd* )\n-\n-$as_echo \"#define exit xexit\" >>confdefs.h\n-\n-\n-$as_echo \"#define atexit xatexit\" >>confdefs.h\n-\n-\t\t;;\n-esac\n-\n-\n-cat >>confdefs.h <<_ACEOF\n-#define EXE_EXT \"$ac_exeext\"\n-_ACEOF\n-\n-\n-# Checks for header files.\n-ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor\" >&5\n-$as_echo_n \"checking how to run the C preprocessor... \" >&6; }\n-# On Suns, sometimes $CPP names a directory.\n-if test -n \"$CPP\" && test -d \"$CPP\"; then\n-  CPP=\n-fi\n-if test -z \"$CPP\"; then\n-  if test \"${ac_cv_prog_CPP+set}\" = set; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-      # Double quotes because CPP needs to be expanded\n-    for CPP in \"$CC -E\" \"$CC -E -traditional-cpp\" \"/lib/cpp\"\n-    do\n-      ac_preproc_ok=false\n-for ac_c_preproc_warn_flag in '' yes\n-do\n-  # Use a header file that comes with gcc, so configuring glibc\n-  # with a fresh cross-compiler works.\n-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since\n-  # <limits.h> exists even on freestanding compilers.\n-  # On the NeXT, cc -E runs the code through the compiler's parser,\n-  # not just through cpp. \"Syntax error\" is here to catch this case.\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#ifdef __STDC__\n-# include <limits.h>\n-#else\n-# include <assert.h>\n-#endif\n-\t\t     Syntax error\n-_ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n-\n-else\n-  # Broken: fails on valid input.\n-continue\n-fi\n-rm -f conftest.err conftest.$ac_ext\n-\n-  # OK, works on sane cases.  Now check whether nonexistent headers\n-  # can be detected and how.\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#include <ac_nonexistent.h>\n-_ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n-  # Broken: success on invalid input.\n-continue\n-else\n-  # Passes both tests.\n-ac_preproc_ok=:\n-break\n-fi\n-rm -f conftest.err conftest.$ac_ext\n-\n-done\n-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.\n-rm -f conftest.err conftest.$ac_ext\n-if $ac_preproc_ok; then :\n-  break\n-fi\n-\n-    done\n-    ac_cv_prog_CPP=$CPP\n-\n-fi\n-  CPP=$ac_cv_prog_CPP\n+    done\n+    ac_cv_prog_CPP=$CPP\n+\n+fi\n+  CPP=$ac_cv_prog_CPP\n else\n   ac_cv_prog_CPP=$CPP\n fi\n@@ -4682,6 +4427,434 @@ fi\n done\n \n \n+\n+  ac_fn_c_check_header_mongrel \"$LINENO\" \"minix/config.h\" \"ac_cv_header_minix_config_h\" \"$ac_includes_default\"\n+if test \"x$ac_cv_header_minix_config_h\" = x\"\"yes; then :\n+  MINIX=yes\n+else\n+  MINIX=\n+fi\n+\n+\n+  if test \"$MINIX\" = yes; then\n+\n+$as_echo \"#define _POSIX_SOURCE 1\" >>confdefs.h\n+\n+\n+$as_echo \"#define _POSIX_1_SOURCE 2\" >>confdefs.h\n+\n+\n+$as_echo \"#define _MINIX 1\" >>confdefs.h\n+\n+  fi\n+\n+\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether it is safe to define __EXTENSIONS__\" >&5\n+$as_echo_n \"checking whether it is safe to define __EXTENSIONS__... \" >&6; }\n+if test \"${ac_cv_safe_to_define___extensions__+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+\n+#\t  define __EXTENSIONS__ 1\n+\t  $ac_includes_default\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  ac_cv_safe_to_define___extensions__=yes\n+else\n+  ac_cv_safe_to_define___extensions__=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_safe_to_define___extensions__\" >&5\n+$as_echo \"$ac_cv_safe_to_define___extensions__\" >&6; }\n+  test $ac_cv_safe_to_define___extensions__ = yes &&\n+    $as_echo \"#define __EXTENSIONS__ 1\" >>confdefs.h\n+\n+  $as_echo \"#define _ALL_SOURCE 1\" >>confdefs.h\n+\n+  $as_echo \"#define _GNU_SOURCE 1\" >>confdefs.h\n+\n+  $as_echo \"#define _POSIX_PTHREAD_SEMANTICS 1\" >>confdefs.h\n+\n+  $as_echo \"#define _TANDEM_SOURCE 1\" >>confdefs.h\n+\n+\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for a sed that does not truncate output\" >&5\n+$as_echo_n \"checking for a sed that does not truncate output... \" >&6; }\n+if test \"${ac_cv_path_SED+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+            ac_script=s/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb/\n+     for ac_i in 1 2 3 4 5 6 7; do\n+       ac_script=\"$ac_script$as_nl$ac_script\"\n+     done\n+     echo \"$ac_script\" 2>/dev/null | sed 99q >conftest.sed\n+     { ac_script=; unset ac_script;}\n+     if test -z \"$SED\"; then\n+  ac_path_SED_found=false\n+  # Loop through the user's path and test for each of PROGNAME-LIST\n+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_prog in sed gsed; do\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+      ac_path_SED=\"$as_dir/$ac_prog$ac_exec_ext\"\n+      { test -f \"$ac_path_SED\" && $as_test_x \"$ac_path_SED\"; } || continue\n+# Check for GNU ac_path_SED and select it if it is found.\n+  # Check for GNU $ac_path_SED\n+case `\"$ac_path_SED\" --version 2>&1` in\n+*GNU*)\n+  ac_cv_path_SED=\"$ac_path_SED\" ac_path_SED_found=:;;\n+*)\n+  ac_count=0\n+  $as_echo_n 0123456789 >\"conftest.in\"\n+  while :\n+  do\n+    cat \"conftest.in\" \"conftest.in\" >\"conftest.tmp\"\n+    mv \"conftest.tmp\" \"conftest.in\"\n+    cp \"conftest.in\" \"conftest.nl\"\n+    $as_echo '' >> \"conftest.nl\"\n+    \"$ac_path_SED\" -f conftest.sed < \"conftest.nl\" >\"conftest.out\" 2>/dev/null || break\n+    diff \"conftest.out\" \"conftest.nl\" >/dev/null 2>&1 || break\n+    as_fn_arith $ac_count + 1 && ac_count=$as_val\n+    if test $ac_count -gt ${ac_path_SED_max-0}; then\n+      # Best one so far, save it but keep looking for a better one\n+      ac_cv_path_SED=\"$ac_path_SED\"\n+      ac_path_SED_max=$ac_count\n+    fi\n+    # 10*(2^10) chars as input seems more than enough\n+    test $ac_count -gt 10 && break\n+  done\n+  rm -f conftest.in conftest.tmp conftest.nl conftest.out;;\n+esac\n+\n+      $ac_path_SED_found && break 3\n+    done\n+  done\n+  done\n+IFS=$as_save_IFS\n+  if test -z \"$ac_cv_path_SED\"; then\n+    as_fn_error \"no acceptable sed could be found in \\$PATH\" \"$LINENO\" 5\n+  fi\n+else\n+  ac_cv_path_SED=$SED\n+fi\n+\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_SED\" >&5\n+$as_echo \"$ac_cv_path_SED\" >&6; }\n+ SED=\"$ac_cv_path_SED\"\n+  rm -f conftest.sed\n+\n+\n+# Figure out what compiler warnings we can enable.\n+# See config/warnings.m4 for details.\n+\n+WARN_CFLAGS=\n+save_CFLAGS=\"$CFLAGS\"\n+for option in -W -Wall -Wwrite-strings -Wstrict-prototypes \\\n+\t\t\t  -Wmissing-prototypes -Wold-style-definition \\\n+\t\t\t  -Wmissing-format-attribute -Wno-overlength-strings; do\n+  as_acx_Woption=`$as_echo \"acx_cv_prog_cc_warning_$option\" | $as_tr_sh`\n+\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $CC supports $option\" >&5\n+$as_echo_n \"checking whether $CC supports $option... \" >&6; }\n+if { as_var=$as_acx_Woption; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  CFLAGS=\"$option\"\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  eval \"$as_acx_Woption=yes\"\n+else\n+  eval \"$as_acx_Woption=no\"\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+fi\n+eval ac_res=\\$$as_acx_Woption\n+\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n+$as_echo \"$ac_res\" >&6; }\n+  if test `eval 'as_val=${'$as_acx_Woption'};$as_echo \"$as_val\"'` = yes; then :\n+  WARN_CFLAGS=\"$WARN_CFLAGS${WARN_CFLAGS:+ }$option\"\n+fi\n+  done\n+CFLAGS=\"$save_CFLAGS\"\n+\n+WARN_PEDANTIC=\n+if test \"$GCC\" = yes; then :\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether $CC supports -pedantic -Wno-long-long\" >&5\n+$as_echo_n \"checking whether $CC supports -pedantic -Wno-long-long... \" >&6; }\n+if test \"${acx_cv_prog_cc_pedantic__Wno_long_long+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  save_CFLAGS=\"$CFLAGS\"\n+CFLAGS=\"-pedantic -Wno-long-long\"\n+cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_prog_cc_pedantic__Wno_long_long=yes\n+else\n+  acx_cv_prog_cc_pedantic__Wno_long_long=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+CFLAGS=\"$save_CFLAGS\"\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $acx_cv_prog_cc_pedantic__Wno_long_long\" >&5\n+$as_echo \"$acx_cv_prog_cc_pedantic__Wno_long_long\" >&6; }\n+if test $acx_cv_prog_cc_pedantic__Wno_long_long = yes; then :\n+  WARN_PEDANTIC=\"$WARN_PEDANTIC${WARN_PEDANTIC:+ }-pedantic -Wno-long-long\"\n+fi\n+\n+fi\n+\n+\n+# Only enable with --enable-werror-always until existing warnings are\n+# corrected.\n+WERROR=\n+# Check whether --enable-werror-always was given.\n+if test \"${enable_werror_always+set}\" = set; then :\n+  enableval=$enable_werror_always;\n+else\n+  enable_werror_always=no\n+fi\n+\n+if test $enable_werror_always = yes; then :\n+  WERROR=\"$WERROR${WERROR:+ }-Werror\"\n+fi\n+\n+\n+\n+# Determine the noncanonical target name, for directory use.\n+ case ${build_alias} in\n+  \"\") build_noncanonical=${build} ;;\n+  *) build_noncanonical=${build_alias} ;;\n+esac\n+\n+ case ${host_alias} in\n+  \"\") host_noncanonical=${build_noncanonical} ;;\n+  *) host_noncanonical=${host_alias} ;;\n+esac\n+\n+ case ${target_alias} in\n+  \"\") target_noncanonical=${host_noncanonical} ;;\n+  *) target_noncanonical=${target_alias} ;;\n+esac\n+\n+\n+\n+\n+# Specify the local prefix\n+local_prefix=\n+\n+# Check whether --with-local-prefix was given.\n+if test \"${with_local_prefix+set}\" = set; then :\n+  withval=$with_local_prefix; case \"${withval}\" in\n+yes)\tas_fn_error \"bad value ${withval} given for local include directory prefix\" \"$LINENO\" 5 ;;\n+no)\t;;\n+*)\tlocal_prefix=$with_local_prefix ;;\n+esac\n+fi\n+\n+\n+# Default local prefix if it is empty\n+if test x$local_prefix = x; then\n+\tlocal_prefix=/usr/local\n+fi\n+\n+# Choose one or two-process fix methodology.  Systems that cannot handle\n+# bi-directional pipes must use the two process method.\n+#\n+# Check whether --enable-twoprocess was given.\n+if test \"${enable_twoprocess+set}\" = set; then :\n+  enableval=$enable_twoprocess; if test \"x$enable_twoprocess\" = xyes; then\n+\tTARGET=twoprocess\n+else\n+\tTARGET=oneprocess\n+fi\n+else\n+  case $host in\n+\ti?86-*-msdosdjgpp* | \\\n+\ti?86-*-mingw32* | \\\n+\tx86_64-*-mingw32* | \\\n+\t*-*-beos* )\n+\t\tTARGET=twoprocess\n+\t\t;;\n+\n+\t* )\n+\t\tTARGET=oneprocess\n+\t\t;;\n+esac\n+fi\n+\n+\n+\n+if test $TARGET = twoprocess; then\n+\n+$as_echo \"#define SEPARATE_FIX_PROC 1\" >>confdefs.h\n+\n+fi\n+\n+case $host in\n+\tvax-dec-bsd* )\n+\n+$as_echo \"#define exit xexit\" >>confdefs.h\n+\n+\n+$as_echo \"#define atexit xatexit\" >>confdefs.h\n+\n+\t\t;;\n+esac\n+\n+\n+cat >>confdefs.h <<_ACEOF\n+#define EXE_EXT \"$ac_exeext\"\n+_ACEOF\n+\n+\n+# Checks for header files.\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for ANSI C header files\" >&5\n+$as_echo_n \"checking for ANSI C header files... \" >&6; }\n+if test \"${ac_cv_header_stdc+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+#include <stdarg.h>\n+#include <string.h>\n+#include <float.h>\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  ac_cv_header_stdc=yes\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <string.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"memchr\" >/dev/null 2>&1; then :\n+\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"free\" >/dev/null 2>&1; then :\n+\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f conftest*\n+\n+fi\n+\n+if test $ac_cv_header_stdc = yes; then\n+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.\n+  if test \"$cross_compiling\" = yes; then :\n+  :\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <ctype.h>\n+#include <stdlib.h>\n+#if ((' ' & 0x0FF) == 0x020)\n+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))\n+#else\n+# define ISLOWER(c) \\\n+\t\t   (('a' <= (c) && (c) <= 'i') \\\n+\t\t     || ('j' <= (c) && (c) <= 'r') \\\n+\t\t     || ('s' <= (c) && (c) <= 'z'))\n+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))\n+#endif\n+\n+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))\n+int\n+main ()\n+{\n+  int i;\n+  for (i = 0; i < 256; i++)\n+    if (XOR (islower (i), ISLOWER (i))\n+\t|| toupper (i) != TOUPPER (i))\n+      return 2;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_run \"$LINENO\"; then :\n+\n+else\n+  ac_cv_header_stdc=no\n+fi\n+rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \\\n+  conftest.$ac_objext conftest.beam conftest.$ac_ext\n+fi\n+\n+fi\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc\" >&5\n+$as_echo \"$ac_cv_header_stdc\" >&6; }\n+if test $ac_cv_header_stdc = yes; then\n+\n+$as_echo \"#define STDC_HEADERS 1\" >>confdefs.h\n+\n+fi\n+\n for ac_header in stddef.h stdlib.h strings.h unistd.h fcntl.h sys/file.h \\\n \tsys/stat.h\n do :"}, {"sha": "e7de791826790862ab40540a91083c9ddc93ac72", "filename": "fixincludes/configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/207202016ccaa1a79bcfa39b69fbe07ea762fe13/fixincludes%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Fconfigure.ac?ref=207202016ccaa1a79bcfa39b69fbe07ea762fe13", "patch": "@@ -6,6 +6,7 @@ AC_CONFIG_AUX_DIR(..)\n m4_sinclude(../libtool.m4)\n AC_CANONICAL_SYSTEM\n AC_PROG_CC\n+AC_USE_SYSTEM_EXTENSIONS\n AC_PROG_SED\n \n # Figure out what compiler warnings we can enable."}]}