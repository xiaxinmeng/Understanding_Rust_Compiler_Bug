{"sha": "6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIxOGFiODNhYTBjODRiOGY0ZGM2ZDQ1NzUxMWM2ZTE5YzQwOWJiMQ==", "commit": {"author": {"name": "Robert Suchanek", "email": "robert.suchanek@imgtec.com", "date": "2015-01-28T09:22:20Z"}, "committer": {"name": "Robert Suchanek", "email": "rts@gcc.gnu.org", "date": "2015-01-28T09:22:20Z"}, "message": "Regression cleanup for MIPS nan2008 toolchain.\n\ngcc/testsuite/\n\t* lib/target-supports.exp (check_effective_target_mips_nanlegacy): New.\n\t* gcc.target/mips/loongson-simd.c: Require legacy NaN support.\n\t* gcc.target/mips/mips.exp (mips-dg-options): Imply -mnan=legacy for\n\tISA rev < 2.\n\nFrom-SVN: r220199", "tree": {"sha": "e1a3d672630845f9b18570f057676b291c61141c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1a3d672630845f9b18570f057676b291c61141c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/comments", "author": null, "committer": null, "parents": [{"sha": "813ba013999a03821254c03c5d3d33e4512ca678", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/813ba013999a03821254c03c5d3d33e4512ca678", "html_url": "https://github.com/Rust-GCC/gccrs/commit/813ba013999a03821254c03c5d3d33e4512ca678"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "08d6ec0126865631e03529e6d0569d02c08b5483", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "patch": "@@ -1,3 +1,10 @@\n+2015-01-28  Robert Suchanek  <robert.suchanek@imgtec.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_mips_nanlegacy): New.\n+\t* gcc.target/mips/loongson-simd.c: Require legacy NaN support.\n+\t* gcc.target/mips/mips.exp (mips-dg-options): Imply -mnan=legacy for\n+\tISA rev < 2.\n+\n 2015-01-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR bootstrap/64612"}, {"sha": "949632e3cadb806828e2216b938920b1aaa2011c", "filename": "gcc/testsuite/gcc.target/mips/loongson-simd.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Floongson-simd.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Floongson-simd.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Floongson-simd.c?ref=6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "patch": "@@ -22,6 +22,7 @@ along with GCC; see the file COPYING3.  If not see\n /* loongson.h does not handle or check for MIPS16ness or\n    microMIPSness.  There doesn't seem any good reason for it to, given\n    that the Loongson processors do not support either.  */\n+/* { dg-require-effective-target mips_nanlegacy } */\n /* { dg-options \"isa=loongson -mhard-float -mno-micromips -mno-mips16 -flax-vector-conversions\" } */\n \n #include \"loongson.h\""}, {"sha": "a0980a90d0507fa742233de2e6bcdf0205f0f728", "filename": "gcc/testsuite/gcc.target/mips/mips.exp", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp?ref=6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "patch": "@@ -1300,6 +1300,7 @@ proc mips-dg-options { args } {\n \t    mips_make_test_option options \"-mno-dsp\"\n \t    mips_make_test_option options \"-mno-synci\"\n \t    mips_make_test_option options \"-mno-micromips\"\n+\t    mips_make_test_option options \"-mnan=legacy\"\n \t}\n         if { $isa_rev > 5 } {\n \t    mips_make_test_option options \"-mno-dsp\""}, {"sha": "cb8a61325596652c91b5d4e98f7dbb0d00645c43", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=6b18ab83aa0c84b8f4dc6d457511c6e19c409bb1", "patch": "@@ -3036,6 +3036,15 @@ proc check_effective_target_mips_loongson { } {\n     }]\n }\n \n+# Return 1 if this is a MIPS target that supports the legacy NAN.\n+\n+proc check_effective_target_mips_nanlegacy { } {\n+    return [check_no_compiler_messages nanlegacy assembly {\n+\t#include <stdlib.h>\n+\tint main () { return 0; }\n+    } \"-mnan=legacy\"]\n+}\n+\n # Return 1 if this is an ARM target that adheres to the ABI for the ARM\n # Architecture.\n "}]}