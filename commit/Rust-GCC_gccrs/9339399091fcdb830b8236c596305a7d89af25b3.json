{"sha": "9339399091fcdb830b8236c596305a7d89af25b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTMzOTM5OTA5MWZjZGI4MzBiODIzNmM1OTYzMDVhN2Q4OWFmMjViMw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-02-14T21:53:27Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-02-14T21:53:27Z"}, "message": "gc.h (dlopen): Define as GC_dlopen on Linux.\n\n\t* gc.h (dlopen): Define as GC_dlopen on Linux.\n\t(GC_dlopen): Declare on Linux.\n\t* dyn_load.c (GC_dlopen): Define for Linux.\n\nFrom-SVN: r31970", "tree": {"sha": "347e3b2add618ac89c250ec8658175ad538f1b65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/347e3b2add618ac89c250ec8658175ad538f1b65"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9339399091fcdb830b8236c596305a7d89af25b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9339399091fcdb830b8236c596305a7d89af25b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9339399091fcdb830b8236c596305a7d89af25b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9339399091fcdb830b8236c596305a7d89af25b3/comments", "author": null, "committer": null, "parents": [{"sha": "59309a850d34040bba4b8ccf5b994227e43b7789", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59309a850d34040bba4b8ccf5b994227e43b7789", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59309a850d34040bba4b8ccf5b994227e43b7789"}], "stats": {"total": 36, "additions": 30, "deletions": 6}, "files": [{"sha": "538a55c465f1e13309a9af6b6f7cc4445b2e984d", "filename": "boehm-gc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9339399091fcdb830b8236c596305a7d89af25b3/boehm-gc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9339399091fcdb830b8236c596305a7d89af25b3/boehm-gc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FChangeLog?ref=9339399091fcdb830b8236c596305a7d89af25b3", "patch": "@@ -1,3 +1,9 @@\n+2000-02-14  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* gc.h (dlopen): Define as GC_dlopen on Linux.\n+\t(GC_dlopen): Declare on Linux.\n+\t* dyn_load.c (GC_dlopen): Define for Linux.\n+\n Fri Jan 28 17:13:20 2000  Anthony Green  <green@cygnus.com>\n \n \t* gcconfig.h (DATASTART): Add missing extern declaration"}, {"sha": "f44726bc833cbd4e8b0ae5f6542ec6d4f5503020", "filename": "boehm-gc/dyn_load.c", "status": "modified", "additions": 20, "deletions": 6, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9339399091fcdb830b8236c596305a7d89af25b3/boehm-gc%2Fdyn_load.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9339399091fcdb830b8236c596305a7d89af25b3/boehm-gc%2Fdyn_load.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fdyn_load.c?ref=9339399091fcdb830b8236c596305a7d89af25b3", "patch": "@@ -32,7 +32,7 @@\n #include \"gc_priv.h\"\n \n /* BTL: avoid circular redefinition of dlopen if SOLARIS_THREADS defined */\n-# if defined(SOLARIS_THREADS) && defined(dlopen)\n+# if (defined(SOLARIS_THREADS) || defined(LINUX_THREADS)) && defined(dlopen)\n     /* To support threads in Solaris, gc.h interposes on dlopen by       */\n     /* defining \"dlopen\" to be \"GC_dlopen\", which is implemented below.  */\n     /* However, both GC_FirstDLOpenedLinkMap() and GC_dlopen() use the   */\n@@ -190,11 +190,6 @@ void * GC_dlopen(const char *path, int mode)\n }\n # endif  /* SOLARIS_THREADS */\n \n-/* BTL: added to fix circular dlopen definition if SOLARIS_THREADS defined */\n-# if defined(GC_must_restore_redefined_dlopen)\n-#   define dlopen GC_dlopen\n-# endif\n-\n # ifndef USE_PROC_FOR_LIBRARIES\n void GC_register_dynamic_libraries()\n {\n@@ -260,6 +255,25 @@ void GC_register_dynamic_libraries()\n # endif /* !USE_PROC ... */\n # endif /* SUNOS */\n \n+#ifdef LINUX_THREADS\n+#include <dlfcn.h>\n+\n+void * GC_dlopen(const char *path, int mode)\n+{\n+    void * result;\n+    \n+    LOCK();\n+    result = dlopen(path, mode);\n+    UNLOCK();\n+    return(result);\n+}\n+#endif  /* LINUX_THREADS */\n+\n+/* BTL: added to fix circular dlopen definition if SOLARIS_THREADS defined */\n+#if defined(GC_must_restore_redefined_dlopen)\n+# define dlopen GC_dlopen\n+#endif\n+\n #if defined(LINUX) && defined(__ELF__) || defined(SCO_ELF)\n \n /* Dynamic loading code for Linux running ELF. Somewhat tested on"}, {"sha": "bd7fddf4391413bac2cf5339989eca67825e67cd", "filename": "boehm-gc/gc.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9339399091fcdb830b8236c596305a7d89af25b3/boehm-gc%2Fgc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9339399091fcdb830b8236c596305a7d89af25b3/boehm-gc%2Fgc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fgc.h?ref=9339399091fcdb830b8236c596305a7d89af25b3", "patch": "@@ -712,6 +712,10 @@ GC_API void (*GC_is_visible_print_proc)\n \n # endif /* SOLARIS_THREADS */\n \n+#if defined(LINUX_THREADS)\n+  void * GC_dlopen(const char *path, int mode);\n+# define dlopen GC_dlopen\n+#endif\n \n #if defined(IRIX_THREADS) || defined(LINUX_THREADS) || defined(HPUX_THREADS)\n /* We treat these similarly. */"}]}