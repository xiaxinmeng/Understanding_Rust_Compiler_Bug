{"sha": "400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAwYTJkMjQzNzM2NzFjZmQ4ZGU4YzJhMmM2ZDVjNzg4ZDc2YjNkNQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2011-02-14T19:16:34Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-02-14T19:16:34Z"}, "message": "misc.c (gnat_init_options): Do not concatenate -I and its argument, except for the special -I- switch.\n\n\t* gcc-interface/misc.c (gnat_init_options): Do not concatenate -I and\n\tits argument, except for the special -I- switch.\n\nFrom-SVN: r170150", "tree": {"sha": "fb8064f1c3f33b9d74b293b0466784e66405ef83", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb8064f1c3f33b9d74b293b0466784e66405ef83"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/comments", "author": null, "committer": null, "parents": [{"sha": "12967872c546b0da18b13e4b1a5b1f5d3f6cee07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12967872c546b0da18b13e4b1a5b1f5d3f6cee07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12967872c546b0da18b13e4b1a5b1f5d3f6cee07"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "defad830e15b8fbe5f573eb3f9d4575132c4618d", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "patch": "@@ -1,3 +1,8 @@\n+2011-02-14  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/misc.c (gnat_init_options): Do not concatenate -I and\n+\tits argument, except for the special -I- switch.\n+\n 2011-02-12  Gerald Pfeifer  <gerald@pfeifer.com>\n \n \t* gnat_ugn.texi (Compiling Different Versions of Ada): Update"}, {"sha": "4f7a5e1da1dca5982a9e38f99c2eeba4d095cd97", "filename": "gcc/ada/gcc-interface/misc.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fmisc.c?ref=400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "patch": "@@ -195,13 +195,12 @@ gnat_init_options (unsigned int decoded_options_count,\n \t  || num_elements == 0)\n \tcontinue;\n \n-      if (decoded_options[i].opt_index == OPT_I)\n-\t{\n-\t  gcc_assert (num_elements == 2);\n-\t  save_argv[save_argc++]\n-\t    = concat (decoded_options[i].canonical_option[0],\n-\t\t      decoded_options[i].canonical_option[1], NULL);\n-\t}\n+      /* Deal with -I- specially since it must be a single switch.  */\n+      if (decoded_options[i].opt_index == OPT_I\n+\t  && num_elements == 2\n+\t  && decoded_options[i].canonical_option[1][0] == '-'\n+\t  && decoded_options[i].canonical_option[1][1] == '\\0')\n+\tsave_argv[save_argc++] = \"-I-\";\n       else\n \t{\n \t  gcc_assert (num_elements >= 1 && num_elements <= 2);"}, {"sha": "9d200a419afd51cc5343d47fcf7aa4ed706aeedc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "patch": "@@ -1,3 +1,7 @@\n+2011-02-14  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/include.adb: New test.\n+\n 2011-02-14  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/47728"}, {"sha": "ec183c723b7deff02a352553ed4030c98454ffd9", "filename": "gcc/testsuite/gnat.dg/include.adb", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Ftestsuite%2Fgnat.dg%2Finclude.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/400a2d24373671cfd8de8c2a2c6d5c788d76b3d5/gcc%2Ftestsuite%2Fgnat.dg%2Finclude.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Finclude.adb?ref=400a2d24373671cfd8de8c2a2c6d5c788d76b3d5", "patch": "@@ -0,0 +1,4 @@\n+-- { dg-do compile } */\n+-- { dg-options \"-cargs -I -gnatws\" }\n+\n+-- { dg-error \"search directory missing\" \"\" { target *-*-* } 0 }"}]}