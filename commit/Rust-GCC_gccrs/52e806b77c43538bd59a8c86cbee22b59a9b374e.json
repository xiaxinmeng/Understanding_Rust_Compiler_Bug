{"sha": "52e806b77c43538bd59a8c86cbee22b59a9b374e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTJlODA2Yjc3YzQzNTM4YmQ1OWE4Yzg2Y2JlZTIyYjU5YTliMzc0ZQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2005-02-28T21:43:51Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2005-02-28T21:43:51Z"}, "message": "memory: Replace checked_deleter with (unchecked) _Sp_deleter as GCC warns about delete...\n\n\t* include/tr1/memory: Replace checked_deleter with (unchecked)\n\t_Sp_deleter as GCC warns about delete on incomplete types anyway.\n\nFrom-SVN: r95699", "tree": {"sha": "ed3c50b712889fa5fc85d4449863cab117dc03dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed3c50b712889fa5fc85d4449863cab117dc03dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52e806b77c43538bd59a8c86cbee22b59a9b374e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52e806b77c43538bd59a8c86cbee22b59a9b374e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52e806b77c43538bd59a8c86cbee22b59a9b374e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52e806b77c43538bd59a8c86cbee22b59a9b374e/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9aa2a6885f11fe4855fc643162f7ea2806f4452", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9aa2a6885f11fe4855fc643162f7ea2806f4452", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9aa2a6885f11fe4855fc643162f7ea2806f4452"}], "stats": {"total": 34, "additions": 11, "deletions": 23}, "files": [{"sha": "68b1e137c0e509c879175d6be17cbda59d52c8bc", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52e806b77c43538bd59a8c86cbee22b59a9b374e/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52e806b77c43538bd59a8c86cbee22b59a9b374e/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=52e806b77c43538bd59a8c86cbee22b59a9b374e", "patch": "@@ -1,3 +1,8 @@\n+2005-02-28  Jonathan Wakely  <redi@gcc.gnu.org>\n+\n+\t* include/tr1/memory: Replace checked_deleter with (unchecked)\n+\t_Sp_deleter as GCC warns about delete on incomplete types anyway.\n+\n 2005-02-28  Jonathan Wakely  <redi@gcc.gnu.org>\n \n \t* include/tr1/memory: Add missing \"inline\" to __throw_bad_weak_ptr."}, {"sha": "64e2a900715a53ecdb77ad5bc0e48c4d4e4d4253", "filename": "libstdc++-v3/include/tr1/memory", "status": "modified", "additions": 6, "deletions": 23, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52e806b77c43538bd59a8c86cbee22b59a9b374e/libstdc%2B%2B-v3%2Finclude%2Ftr1%2Fmemory", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52e806b77c43538bd59a8c86cbee22b59a9b374e/libstdc%2B%2B-v3%2Finclude%2Ftr1%2Fmemory", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Ftr1%2Fmemory?ref=52e806b77c43538bd59a8c86cbee22b59a9b374e", "patch": "@@ -27,11 +27,6 @@\n // invalidate any other reasons why the executable file might be covered by\n // the GNU General Public License.\n \n-//  boost/checked_delete.hpp\n-//  Copyright (c) 2002, 2003 Peter Dimov\n-//  Copyright (c) 2003 Daniel Frey\n-//  Copyright (c) 2003 Howard Hinnant\n-\n //  boost/shared_count.hpp\n //  Copyright (c) 2001, 2002, 2003 Peter Dimov and Multi Media Ltd.\n \n@@ -92,27 +87,15 @@ __throw_bad_weak_ptr()\n }\n \n \n-// verify that types are complete for increased safety\n-\n-template <typename _Tp>\n-  inline void\n-  checked_delete(_Tp * __x)\n-  {\n-    // intentionally complex - simplification causes regressions\n-    typedef char type_must_be_complete[ sizeof(_Tp)? 1: -1 ];\n-    (void) sizeof(type_must_be_complete);\n-    delete __x;\n-  }\n-\n template <typename _Tp>\n-  struct checked_deleter\n+  struct _Sp_deleter\n   {\n     typedef void result_type;\n     typedef _Tp* argument_type;\n \n     void\n-    operator()(_Tp * x) const\n-    { std::tr1::checked_delete(x); }\n+    operator()(_Tp* p) const\n+    { delete p; }\n   };\n \n \n@@ -267,8 +250,8 @@ public:\n \n   template <typename _Tp>\n     explicit shared_count(std::auto_ptr<_Tp>& __r)\n-    : _M_pi(new _Sp_counted_base_impl<_Tp*,checked_deleter<_Tp> >(\n-            __r.get(), checked_deleter<_Tp>()\n+    : _M_pi(new _Sp_counted_base_impl<_Tp*,_Sp_deleter<_Tp> >(\n+            __r.get(), _Sp_deleter<_Tp>()\n             ))\n     { __r.release(); }\n \n@@ -506,7 +489,7 @@ template <typename _Tp>\n      */\n     template <typename _Tp1>\n       explicit shared_ptr(_Tp1* __p)\n-      : _M_ptr(__p), _M_refcount(__p, checked_deleter<_Tp1>())\n+      : _M_ptr(__p), _M_refcount(__p, _Sp_deleter<_Tp1>())\n       {\n         __glibcxx_function_requires(_ConvertibleConcept<_Tp1*, _Tp*>)\n         // __glibcxx_function_requires(_CompleteConcept<_Tp1*>)"}]}