{"sha": "ea93a47bc825a409079665551203aa194e71fc18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE5M2E0N2JjODI1YTQwOTA3OTY2NTU1MTIwM2FhMTk0ZTcxZmMxOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-05-19T13:11:56Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-05-19T13:11:56Z"}, "message": "re PR c++/49043 ([OpenMP & C++0x]: Compiler error when lambda-function within OpenMP loop)\n\n\tPR c++/49043\n\t* decl.c (check_omp_return): Stop searching on sk_function_parms.\n\n\t* testsuite/libgomp.c++/pr49043.C: New test.\n\nFrom-SVN: r173907", "tree": {"sha": "8a93ed0f8e4aefee902ff63a0c36dfb80398207e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a93ed0f8e4aefee902ff63a0c36dfb80398207e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea93a47bc825a409079665551203aa194e71fc18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea93a47bc825a409079665551203aa194e71fc18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea93a47bc825a409079665551203aa194e71fc18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea93a47bc825a409079665551203aa194e71fc18/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5ee093edf0ff049ece01649376c1b2975e0371f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ee093edf0ff049ece01649376c1b2975e0371f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ee093edf0ff049ece01649376c1b2975e0371f2"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "7e59b6b067acfd1b8bf5062698e9c71b8f3707fc", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea93a47bc825a409079665551203aa194e71fc18/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea93a47bc825a409079665551203aa194e71fc18/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ea93a47bc825a409079665551203aa194e71fc18", "patch": "@@ -1,5 +1,8 @@\n 2011-05-19  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/49043\n+\t* decl.c (check_omp_return): Stop searching on sk_function_parms.\n+\n \tPR c++/48869\n \t* method.c (get_dtor, get_copy_ctor): Add COMPLAIN argument,\n \tpass it down to locate_fn_flags."}, {"sha": "91df9ee671e00d9e047d145f8ae663055e5db0a1", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea93a47bc825a409079665551203aa194e71fc18/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea93a47bc825a409079665551203aa194e71fc18/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=ea93a47bc825a409079665551203aa194e71fc18", "patch": "@@ -2833,6 +2833,8 @@ check_omp_return (void)\n \terror (\"invalid exit from OpenMP structured block\");\n \treturn false;\n       }\n+    else if (b->kind == sk_function_parms)\n+      break;\n   return true;\n }\n "}, {"sha": "7d3fe227c5ea7b7476ba8f419eaef31aaf066350", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea93a47bc825a409079665551203aa194e71fc18/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea93a47bc825a409079665551203aa194e71fc18/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=ea93a47bc825a409079665551203aa194e71fc18", "patch": "@@ -1,5 +1,8 @@\n 2011-05-19  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/49043\n+\t* testsuite/libgomp.c++/pr49043.C: New test.\n+\n \tPR c++/48869\n \t* testsuite/libgomp.c++/pr48869.C: New test.\n "}, {"sha": "604cfc30dadd8452eb6ce061414b4787cef3f72a", "filename": "libgomp/testsuite/libgomp.c++/pr49043.C", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea93a47bc825a409079665551203aa194e71fc18/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fpr49043.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea93a47bc825a409079665551203aa194e71fc18/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fpr49043.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2B%2B%2Fpr49043.C?ref=ea93a47bc825a409079665551203aa194e71fc18", "patch": "@@ -0,0 +1,19 @@\n+// PR c++/49043\n+// { dg-options \"-std=c++0x\" }\n+// { dg-do run }\n+\n+extern \"C\" void abort ();\n+\n+int\n+main ()\n+{\n+  int r = 0;\n+  #pragma omp parallel for reduction (+:r)\n+    for (int a = 0; a < 10; ++a)\n+      {\n+\tauto func = [=] () { return a; };\n+\tr += func ();\n+      }\n+  if (r != 45)\n+    abort ();\n+}"}]}