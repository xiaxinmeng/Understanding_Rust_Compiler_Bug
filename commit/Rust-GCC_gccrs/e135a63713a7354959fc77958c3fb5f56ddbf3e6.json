{"sha": "e135a63713a7354959fc77958c3fb5f56ddbf3e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTEzNWE2MzcxM2E3MzU0OTU5ZmM3Nzk1OGMzZmI1ZjU2ZGRiZjNlNg==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2006-06-23T21:53:36Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2006-06-23T21:53:36Z"}, "message": "re PR c++/27019 (ICE with designated initializers)\n\n\tPR c++/27019\n\t* typeck2.c (process_init_constructor_array): Set ce->value on errors.\n\nFrom-SVN: r114952", "tree": {"sha": "183a1afe70a9ef162076602664dc56f17385ea4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/183a1afe70a9ef162076602664dc56f17385ea4f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e135a63713a7354959fc77958c3fb5f56ddbf3e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e135a63713a7354959fc77958c3fb5f56ddbf3e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e135a63713a7354959fc77958c3fb5f56ddbf3e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e135a63713a7354959fc77958c3fb5f56ddbf3e6/comments", "author": null, "committer": null, "parents": [{"sha": "5fc89bfdd7468927e0b3d5aabd5b73af60d9cebe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fc89bfdd7468927e0b3d5aabd5b73af60d9cebe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5fc89bfdd7468927e0b3d5aabd5b73af60d9cebe"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "178b0af9cea7876be5d9418b58a65b0a7280aceb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e135a63713a7354959fc77958c3fb5f56ddbf3e6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e135a63713a7354959fc77958c3fb5f56ddbf3e6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e135a63713a7354959fc77958c3fb5f56ddbf3e6", "patch": "@@ -1,3 +1,8 @@\n+2006-06-23  Steve Ellcey  <sje@cup.hp.com>\n+\n+\tPR c++/27019\n+\t* typeck2.c (process_init_constructor_array): Set ce->value on errors.\n+\n 2006-06-23  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c++/28112"}, {"sha": "bef448bbdf95ba4061cfa088cf556536bbbefa97", "filename": "gcc/cp/typeck2.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e135a63713a7354959fc77958c3fb5f56ddbf3e6/gcc%2Fcp%2Ftypeck2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e135a63713a7354959fc77958c3fb5f56ddbf3e6/gcc%2Fcp%2Ftypeck2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck2.c?ref=e135a63713a7354959fc77958c3fb5f56ddbf3e6", "patch": "@@ -797,7 +797,10 @@ process_init_constructor_array (tree type, tree init)\n \t{\n \t  gcc_assert (TREE_CODE (ce->index) == INTEGER_CST);\n \t  if (compare_tree_int (ce->index, i) != 0)\n-\t    sorry (\"non-trivial designated initializers not supported\");\n+\t    {\n+\t      ce->value = error_mark_node;\n+\t      sorry (\"non-trivial designated initializers not supported\");\n+\t    }\n \t}\n       else\n \tce->index = size_int (i);\n@@ -895,7 +898,10 @@ process_init_constructor_record (tree type, tree init)\n \t\t\t  || TREE_CODE (ce->index) == IDENTIFIER_NODE);\n \t      if (ce->index != field\n \t\t  && ce->index != DECL_NAME (field))\n-\t\tsorry (\"non-trivial designated initializers not supported\");\n+\t\t{\n+\t\t  ce->value = error_mark_node;\n+\t\t  sorry (\"non-trivial designated initializers not supported\");\n+\t\t}\n \t    }\n \n \t  gcc_assert (ce->value);"}]}