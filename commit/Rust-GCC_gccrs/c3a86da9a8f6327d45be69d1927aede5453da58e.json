{"sha": "c3a86da9a8f6327d45be69d1927aede5453da58e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNhODZkYTlhOGY2MzI3ZDQ1YmU2OWQxOTI3YWVkZTU0NTNkYTU4ZQ==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "dan@codesourcery.com", "date": "2007-02-13T13:39:19Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2007-02-13T13:39:19Z"}, "message": "re PR bootstrap/30753 (checking for correct version of gmp.h... no)\n\n\tPR bootstrap/30753\n\t* configure.ac: Remove obsolete build / host tests.  Use AC_PROG_CC\n\tunconditionally.  Use AC_PROG_CXX.  Use ACX_TOOL_DIRS to find $prefix.\n\t* configure: Regenerated.\n\nCo-Authored-By: Paolo Bonzini <bonzini@gnu.org>\n\nFrom-SVN: r121882", "tree": {"sha": "27464e3f22b59e7dd6c6dc02f608b6beb88ddfe4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27464e3f22b59e7dd6c6dc02f608b6beb88ddfe4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3a86da9a8f6327d45be69d1927aede5453da58e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3a86da9a8f6327d45be69d1927aede5453da58e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3a86da9a8f6327d45be69d1927aede5453da58e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3a86da9a8f6327d45be69d1927aede5453da58e/comments", "author": null, "committer": null, "parents": [{"sha": "9e0b7527bec629acac6c5854e854b16bd7bedca1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e0b7527bec629acac6c5854e854b16bd7bedca1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e0b7527bec629acac6c5854e854b16bd7bedca1"}], "stats": {"total": 612, "additions": 471, "deletions": 141}, "files": [{"sha": "603ae27f1f02929f121eaba06af12acd55865408", "filename": "ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3a86da9a8f6327d45be69d1927aede5453da58e/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3a86da9a8f6327d45be69d1927aede5453da58e/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=c3a86da9a8f6327d45be69d1927aede5453da58e", "patch": "@@ -1,3 +1,11 @@\n+2007-02-13  Daniel Jacobowitz  <dan@codesourcery.com>\n+\t    Paolo Bonzini  <bonzini@gnu.org>\n+\n+\tPR bootstrap/30753\n+\t* configure.ac: Remove obsolete build / host tests.  Use AC_PROG_CC\n+\tunconditionally.  Use AC_PROG_CXX.  Use ACX_TOOL_DIRS to find $prefix.\n+\t* configure: Regenerated.\n+\n 2007-02-11  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n \n \t* MAINTAINERS (Language Front End Maintainers): Update my mail"}, {"sha": "a4b92b1100abe46116ab128b266be651bcde0c1e", "filename": "configure", "status": "modified", "additions": 437, "deletions": 94, "changes": 531, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3a86da9a8f6327d45be69d1927aede5453da58e/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3a86da9a8f6327d45be69d1927aede5453da58e/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=c3a86da9a8f6327d45be69d1927aede5453da58e", "patch": "@@ -272,7 +272,7 @@ PACKAGE_STRING=\n PACKAGE_BUGREPORT=\n \n ac_unique_file=\"move-if-change\"\n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_noncanonical host_noncanonical target_noncanonical host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA LN LN_S TOPLEVEL_CONFIGURE_ARGUMENTS build_libsubdir build_subdir host_subdir target_subdir CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT GNATBIND ac_ct_GNATBIND GNATMAKE ac_ct_GNATMAKE do_compare gmplibs gmpinc stage1_languages SYSROOT_CFLAGS_FOR_TARGET RPATH_ENVVAR tooldir build_tooldir CONFIGURE_GDB_TK GDB_TK INSTALL_GDB_TK build_configargs build_configdirs host_configargs configdirs target_configargs CC_FOR_BUILD config_shell YACC BISON M4 LEX FLEX MAKEINFO EXPECT RUNTEST AR AS DLLTOOL LD LIPO NM RANLIB STRIP WINDRES OBJCOPY OBJDUMP CXX CFLAGS_FOR_BUILD CXXFLAGS CC_FOR_TARGET CXX_FOR_TARGET GCC_FOR_TARGET GCJ_FOR_TARGET GFORTRAN_FOR_TARGET AR_FOR_TARGET AS_FOR_TARGET DLLTOOL_FOR_TARGET LD_FOR_TARGET LIPO_FOR_TARGET NM_FOR_TARGET OBJDUMP_FOR_TARGET RANLIB_FOR_TARGET STRIP_FOR_TARGET WINDRES_FOR_TARGET RAW_CXX_FOR_TARGET FLAGS_FOR_TARGET COMPILER_AS_FOR_TARGET COMPILER_LD_FOR_TARGET COMPILER_NM_FOR_TARGET MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT stage1_cflags stage1_checking stage2_werror_flag datarootdir docdir htmldir LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_noncanonical host_noncanonical target_noncanonical host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA LN LN_S TOPLEVEL_CONFIGURE_ARGUMENTS build_libsubdir build_subdir host_subdir target_subdir CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT CXX CXXFLAGS ac_ct_CXX GNATBIND ac_ct_GNATBIND GNATMAKE ac_ct_GNATMAKE do_compare gmplibs gmpinc stage1_languages SYSROOT_CFLAGS_FOR_TARGET RPATH_ENVVAR tooldir build_tooldir CONFIGURE_GDB_TK GDB_TK INSTALL_GDB_TK build_configargs build_configdirs host_configargs configdirs target_configargs CC_FOR_BUILD config_shell YACC BISON M4 LEX FLEX MAKEINFO EXPECT RUNTEST AR AS DLLTOOL LD LIPO NM RANLIB STRIP WINDRES OBJCOPY OBJDUMP CFLAGS_FOR_BUILD CC_FOR_TARGET CXX_FOR_TARGET GCC_FOR_TARGET GCJ_FOR_TARGET GFORTRAN_FOR_TARGET AR_FOR_TARGET AS_FOR_TARGET DLLTOOL_FOR_TARGET LD_FOR_TARGET LIPO_FOR_TARGET NM_FOR_TARGET OBJDUMP_FOR_TARGET RANLIB_FOR_TARGET STRIP_FOR_TARGET WINDRES_FOR_TARGET RAW_CXX_FOR_TARGET FLAGS_FOR_TARGET COMPILER_AS_FOR_TARGET COMPILER_LD_FOR_TARGET COMPILER_NM_FOR_TARGET MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT stage1_cflags stage1_checking stage2_werror_flag datarootdir docdir htmldir LIBOBJS LTLIBOBJS'\n ac_subst_files='serialization_dependencies host_makefile_frag target_makefile_frag alphaieee_frag ospace_frag'\n \n # Initialize some variables set by options.\n@@ -729,6 +729,14 @@ ac_env_CPPFLAGS_set=${CPPFLAGS+set}\n ac_env_CPPFLAGS_value=$CPPFLAGS\n ac_cv_env_CPPFLAGS_set=${CPPFLAGS+set}\n ac_cv_env_CPPFLAGS_value=$CPPFLAGS\n+ac_env_CXX_set=${CXX+set}\n+ac_env_CXX_value=$CXX\n+ac_cv_env_CXX_set=${CXX+set}\n+ac_cv_env_CXX_value=$CXX\n+ac_env_CXXFLAGS_set=${CXXFLAGS+set}\n+ac_env_CXXFLAGS_value=$CXXFLAGS\n+ac_cv_env_CXXFLAGS_set=${CXXFLAGS+set}\n+ac_cv_env_CXXFLAGS_value=$CXXFLAGS\n \n #\n # Report the --help message.\n@@ -858,6 +866,8 @@ Some influential environment variables:\n               nonstandard directory <lib dir>\n   CPPFLAGS    C/C++ preprocessor flags, e.g. -I<include dir> if you have\n               headers in a nonstandard directory <include dir>\n+  CXX         C++ compiler command\n+  CXXFLAGS    C++ compiler flags\n \n Use these variables to override the choices made by `configure' or to help\n it to find libraries and programs with nonstandard names/locations.\n@@ -2585,26 +2595,12 @@ if test -z \"${CC}\" && test \"${build}\" = \"${host}\" ; then\n fi\n \n if test \"${build}\" != \"${host}\" ; then\n-  # If we are doing a Canadian Cross, in which the host and build systems\n-  # are not the same, we set reasonable default values for the tools.\n-\n-  CC=${CC-${host_noncanonical}-gcc}\n-  CFLAGS=${CFLAGS-\"-g -O2\"}\n-  CXX=${CXX-${host_noncanonical}-c++}\n-  CXXFLAGS=${CXXFLAGS-\"-g -O2\"}\n   CC_FOR_BUILD=${CC_FOR_BUILD-gcc}\n-\n else\n-  # Set reasonable default values for some tools even if not Canadian.\n-  # Of course, these are different reasonable default values, originally\n-  # specified directly in the Makefile.\n-  # We don't export, so that autoconf can do its job.\n-  # Note that all these settings are above the fragment inclusion point\n-  # in Makefile.in, so can still be overridden by fragments.\n-  # This is all going to change when we autoconfiscate...\n-\n   CC_FOR_BUILD=\"\\$(CC)\"\n-  ac_ext=c\n+fi\n+\n+ac_ext=c\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n@@ -3534,29 +3530,379 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n+ac_ext=cc\n+ac_cpp='$CXXCPP $CPPFLAGS'\n+ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n+if test -n \"$ac_tool_prefix\"; then\n+  for ac_prog in $CCC g++ c++ gpp aCC CC cxx cc++ cl FCC KCC RCC xlC_r xlC\n+  do\n+    # Extract the first word of \"$ac_tool_prefix$ac_prog\", so it can be a program name with args.\n+set dummy $ac_tool_prefix$ac_prog; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_CXX+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$CXX\"; then\n+  ac_cv_prog_CXX=\"$CXX\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_CXX=\"$ac_tool_prefix$ac_prog\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n \n-  # We must set the default linker to the linker used by gcc for the correct\n-  # operation of libtool.  If LD is not defined and we are using gcc, try to\n-  # set the LD default to the ld used by gcc.\n-  if test -z \"$LD\"; then\n-    if test \"$GCC\" = yes; then\n-      case $build in\n-      *-*-mingw*)\n-\tgcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\\015'` ;;\n-      *)\n-\tgcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;\n-      esac\n-      case $gcc_prog_ld in\n-      # Accept absolute paths.\n-      [\\\\/]* | [A-Za-z]:[\\\\/]*)\n-        LD=\"$gcc_prog_ld\" ;;\n-      esac\n-    fi\n+fi\n+fi\n+CXX=$ac_cv_prog_CXX\n+if test -n \"$CXX\"; then\n+  echo \"$as_me:$LINENO: result: $CXX\" >&5\n+echo \"${ECHO_T}$CXX\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n+\n+    test -n \"$CXX\" && break\n+  done\n+fi\n+if test -z \"$CXX\"; then\n+  ac_ct_CXX=$CXX\n+  for ac_prog in $CCC g++ c++ gpp aCC CC cxx cc++ cl FCC KCC RCC xlC_r xlC\n+do\n+  # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n+echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n+echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_ac_ct_CXX+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test -n \"$ac_ct_CXX\"; then\n+  ac_cv_prog_ac_ct_CXX=\"$ac_ct_CXX\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+  for ac_exec_ext in '' $ac_executable_extensions; do\n+  if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_ac_ct_CXX=\"$ac_prog\"\n+    echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+done\n+\n+fi\n+fi\n+ac_ct_CXX=$ac_cv_prog_ac_ct_CXX\n+if test -n \"$ac_ct_CXX\"; then\n+  echo \"$as_me:$LINENO: result: $ac_ct_CXX\" >&5\n+echo \"${ECHO_T}$ac_ct_CXX\" >&6\n+else\n+  echo \"$as_me:$LINENO: result: no\" >&5\n+echo \"${ECHO_T}no\" >&6\n+fi\n+\n+  test -n \"$ac_ct_CXX\" && break\n+done\n+test -n \"$ac_ct_CXX\" || ac_ct_CXX=\"g++\"\n+\n+  CXX=$ac_ct_CXX\n+fi\n+\n+\n+# Provide some information about the compiler.\n+echo \"$as_me:$LINENO:\" \\\n+     \"checking for C++ compiler version\" >&5\n+ac_compiler=`set X $ac_compile; echo $2`\n+{ (eval echo \"$as_me:$LINENO: \\\"$ac_compiler --version </dev/null >&5\\\"\") >&5\n+  (eval $ac_compiler --version </dev/null >&5) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }\n+{ (eval echo \"$as_me:$LINENO: \\\"$ac_compiler -v </dev/null >&5\\\"\") >&5\n+  (eval $ac_compiler -v </dev/null >&5) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }\n+{ (eval echo \"$as_me:$LINENO: \\\"$ac_compiler -V </dev/null >&5\\\"\") >&5\n+  (eval $ac_compiler -V </dev/null >&5) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }\n+\n+echo \"$as_me:$LINENO: checking whether we are using the GNU C++ compiler\" >&5\n+echo $ECHO_N \"checking whether we are using the GNU C++ compiler... $ECHO_C\" >&6\n+if test \"${ac_cv_cxx_compiler_gnu+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+#ifndef __GNUC__\n+       choke me\n+#endif\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_cxx_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_compiler_gnu=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_compiler_gnu=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+ac_cv_cxx_compiler_gnu=$ac_compiler_gnu\n+\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_cxx_compiler_gnu\" >&5\n+echo \"${ECHO_T}$ac_cv_cxx_compiler_gnu\" >&6\n+GXX=`test $ac_compiler_gnu = yes && echo yes`\n+ac_test_CXXFLAGS=${CXXFLAGS+set}\n+ac_save_CXXFLAGS=$CXXFLAGS\n+CXXFLAGS=\"-g\"\n+echo \"$as_me:$LINENO: checking whether $CXX accepts -g\" >&5\n+echo $ECHO_N \"checking whether $CXX accepts -g... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_cxx_g+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_cxx_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_prog_cxx_g=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_prog_cxx_g=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_prog_cxx_g\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_cxx_g\" >&6\n+if test \"$ac_test_CXXFLAGS\" = set; then\n+  CXXFLAGS=$ac_save_CXXFLAGS\n+elif test $ac_cv_prog_cxx_g = yes; then\n+  if test \"$GXX\" = yes; then\n+    CXXFLAGS=\"-g -O2\"\n+  else\n+    CXXFLAGS=\"-g\"\n+  fi\n+else\n+  if test \"$GXX\" = yes; then\n+    CXXFLAGS=\"-O2\"\n+  else\n+    CXXFLAGS=\n   fi\n+fi\n+for ac_declaration in \\\n+   '' \\\n+   'extern \"C\" void std::exit (int) throw (); using std::exit;' \\\n+   'extern \"C\" void std::exit (int); using std::exit;' \\\n+   'extern \"C\" void exit (int) throw ();' \\\n+   'extern \"C\" void exit (int);' \\\n+   'void exit (int);'\n+do\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_declaration\n+#include <stdlib.h>\n+int\n+main ()\n+{\n+exit (42);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_cxx_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  :\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n \n-  CXX=${CXX-\"c++\"}\n-  CFLAGS=${CFLAGS-\"-g\"}\n-  CXXFLAGS=${CXXFLAGS-\"-g -O2\"}\n+continue\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_declaration\n+int\n+main ()\n+{\n+exit (42);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_cxx_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  break\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+done\n+rm -f conftest*\n+if test -n \"$ac_declaration\"; then\n+  echo '#ifdef __cplusplus' >>confdefs.h\n+  echo $ac_declaration      >>confdefs.h\n+  echo '#endif'             >>confdefs.h\n+fi\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n+\n+# We must set the default linker to the linker used by gcc for the correct\n+# operation of libtool.  If LD is not defined and we are using gcc, try to\n+# set the LD default to the ld used by gcc.\n+if test -z \"$LD\"; then\n+  if test \"$GCC\" = yes; then\n+    case $build in\n+    *-*-mingw*)\n+      gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\\015'` ;;\n+    *)\n+      gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;\n+    esac\n+    case $gcc_prog_ld in\n+    # Accept absolute paths.\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n+      LD=\"$gcc_prog_ld\" ;;\n+    esac\n+  fi\n fi\n \n \n@@ -4485,6 +4831,54 @@ case \"$host\" in\n     enable_gdbtk=no ;;\n esac\n \n+# To find our prefix, in gcc_cv_tool_prefix.\n+\n+# The user is always right.\n+if test \"${PATH_SEPARATOR+set}\" != set; then\n+  echo \"#! /bin/sh\" >conf$$.sh\n+  echo  \"exit 0\"   >>conf$$.sh\n+  chmod +x conf$$.sh\n+  if (PATH=\"/nonexistent;.\"; conf$$.sh) >/dev/null 2>&1; then\n+    PATH_SEPARATOR=';'\n+  else\n+    PATH_SEPARATOR=:\n+  fi\n+  rm -f conf$$.sh\n+fi\n+\n+\n+\n+if test \"x$exec_prefix\" = xNONE; then\n+        if test \"x$prefix\" = xNONE; then\n+                gcc_cv_tool_prefix=$ac_default_prefix\n+        else\n+                gcc_cv_tool_prefix=$prefix\n+        fi\n+else\n+        gcc_cv_tool_prefix=$exec_prefix\n+fi\n+\n+# If there is no compiler in the tree, use the PATH only.  In any\n+# case, if there is no compiler in the tree nobody should use\n+# AS_FOR_TARGET and LD_FOR_TARGET.\n+if test x$host = x$build && test -f $srcdir/gcc/BASE-VER; then\n+    gcc_version=`cat $srcdir/gcc/BASE-VER`\n+    gcc_cv_tool_dirs=\"$gcc_cv_tool_prefix/libexec/gcc/$target_noncanonical/$gcc_version$PATH_SEPARATOR\"\n+    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$gcc_cv_tool_prefix/libexec/gcc/$target_noncanonical$PATH_SEPARATOR\"\n+    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs/usr/lib/gcc/$target_noncanonical/$gcc_version$PATH_SEPARATOR\"\n+    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs/usr/lib/gcc/$target_noncanonical$PATH_SEPARATOR\"\n+    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$gcc_cv_tool_prefix/$target_noncanonical/bin/$target_noncanonical/$gcc_version$PATH_SEPARATOR\"\n+    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$gcc_cv_tool_prefix/$target_noncanonical/bin$PATH_SEPARATOR\"\n+else\n+    gcc_cv_tool_dirs=\n+fi\n+\n+if test x$build = x$target && test -n \"$md_exec_prefix\"; then\n+        gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$md_exec_prefix$PATH_SEPARATOR\"\n+fi\n+\n+\n+\n copy_dirs=\n \n \n@@ -4507,10 +4901,7 @@ if test x\"${with_headers}\" != x && test x\"${with_headers}\" != xno ; then\n     exit 1\n   fi\n   if test x\"${with_headers}\" != xyes ; then\n-    case \"${exec_prefixoption}\" in\n-    \"\") x=${prefix} ;;\n-    *) x=${exec_prefix} ;;\n-    esac\n+    x=${gcc_cv_tool_prefix}\n     copy_dirs=\"${copy_dirs} ${with_headers} $x/${target_noncanonical}/sys-include\"\n   fi\n fi\n@@ -4526,10 +4917,7 @@ if test x\"${with_libs}\" != x && test x\"${with_libs}\" != xno ; then\n   if test x\"${with_libs}\" != xyes ; then\n     # Copy the libraries in reverse order, so that files in the first named\n     # library override files in subsequent libraries.\n-    case \"${exec_prefixoption}\" in\n-    \"\") x=${prefix} ;;\n-    *) x=${exec_prefix} ;;\n-    esac\n+    x=${gcc_cv_tool_prefix}\n     for l in ${with_libs}; do\n       copy_dirs=\"$l $x/${target_noncanonical}/lib ${copy_dirs}\"\n     done\n@@ -7171,52 +7559,6 @@ fi\n \n \n \n-# The user is always right.\n-if test \"${PATH_SEPARATOR+set}\" != set; then\n-  echo \"#! /bin/sh\" >conf$$.sh\n-  echo  \"exit 0\"   >>conf$$.sh\n-  chmod +x conf$$.sh\n-  if (PATH=\"/nonexistent;.\"; conf$$.sh) >/dev/null 2>&1; then\n-    PATH_SEPARATOR=';'\n-  else\n-    PATH_SEPARATOR=:\n-  fi\n-  rm -f conf$$.sh\n-fi\n-\n-\n-\n-if test \"x$exec_prefix\" = xNONE; then\n-        if test \"x$prefix\" = xNONE; then\n-                gcc_cv_tool_prefix=$ac_default_prefix\n-        else\n-                gcc_cv_tool_prefix=$prefix\n-        fi\n-else\n-        gcc_cv_tool_prefix=$exec_prefix\n-fi\n-\n-# If there is no compiler in the tree, use the PATH only.  In any\n-# case, if there is no compiler in the tree nobody should use\n-# AS_FOR_TARGET and LD_FOR_TARGET.\n-if test x$host = x$build && test -f $srcdir/gcc/BASE-VER; then\n-    gcc_version=`cat $srcdir/gcc/BASE-VER`\n-    gcc_cv_tool_dirs=\"$gcc_cv_tool_prefix/libexec/gcc/$target_noncanonical/$gcc_version$PATH_SEPARATOR\"\n-    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$gcc_cv_tool_prefix/libexec/gcc/$target_noncanonical$PATH_SEPARATOR\"\n-    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs/usr/lib/gcc/$target_noncanonical/$gcc_version$PATH_SEPARATOR\"\n-    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs/usr/lib/gcc/$target_noncanonical$PATH_SEPARATOR\"\n-    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$gcc_cv_tool_prefix/$target_noncanonical/bin/$target_noncanonical/$gcc_version$PATH_SEPARATOR\"\n-    gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$gcc_cv_tool_prefix/$target_noncanonical/bin$PATH_SEPARATOR\"\n-else\n-    gcc_cv_tool_dirs=\n-fi\n-\n-if test x$build = x$target && test -n \"$md_exec_prefix\"; then\n-        gcc_cv_tool_dirs=\"$gcc_cv_tool_dirs$md_exec_prefix$PATH_SEPARATOR\"\n-fi\n-\n-\n-\n cat > conftest.c << \\EOF\n #ifdef __GNUC__\n   gcc_yay;\n@@ -10461,6 +10803,9 @@ s,@CPPFLAGS@,$CPPFLAGS,;t t\n s,@ac_ct_CC@,$ac_ct_CC,;t t\n s,@EXEEXT@,$EXEEXT,;t t\n s,@OBJEXT@,$OBJEXT,;t t\n+s,@CXX@,$CXX,;t t\n+s,@CXXFLAGS@,$CXXFLAGS,;t t\n+s,@ac_ct_CXX@,$ac_ct_CXX,;t t\n s,@GNATBIND@,$GNATBIND,;t t\n s,@ac_ct_GNATBIND@,$ac_ct_GNATBIND,;t t\n s,@GNATMAKE@,$GNATMAKE,;t t\n@@ -10502,9 +10847,7 @@ s,@STRIP@,$STRIP,;t t\n s,@WINDRES@,$WINDRES,;t t\n s,@OBJCOPY@,$OBJCOPY,;t t\n s,@OBJDUMP@,$OBJDUMP,;t t\n-s,@CXX@,$CXX,;t t\n s,@CFLAGS_FOR_BUILD@,$CFLAGS_FOR_BUILD,;t t\n-s,@CXXFLAGS@,$CXXFLAGS,;t t\n s,@CC_FOR_TARGET@,$CC_FOR_TARGET,;t t\n s,@CXX_FOR_TARGET@,$CXX_FOR_TARGET,;t t\n s,@GCC_FOR_TARGET@,$GCC_FOR_TARGET,;t t"}, {"sha": "8cbb81356f5a0272ed69924d5c8be0de7cadeadf", "filename": "configure.ac", "status": "modified", "additions": 26, "deletions": 47, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3a86da9a8f6327d45be69d1927aede5453da58e/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3a86da9a8f6327d45be69d1927aede5453da58e/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=c3a86da9a8f6327d45be69d1927aede5453da58e", "patch": "@@ -1030,49 +1030,31 @@ if test -z \"${CC}\" && test \"${build}\" = \"${host}\" ; then\n fi\n \n if test \"${build}\" != \"${host}\" ; then\n-  # If we are doing a Canadian Cross, in which the host and build systems\n-  # are not the same, we set reasonable default values for the tools.\n-\n-  CC=${CC-${host_noncanonical}-gcc}\n-  CFLAGS=${CFLAGS-\"-g -O2\"}\n-  CXX=${CXX-${host_noncanonical}-c++}\n-  CXXFLAGS=${CXXFLAGS-\"-g -O2\"}\n   CC_FOR_BUILD=${CC_FOR_BUILD-gcc}\n-\n else\n-  # Set reasonable default values for some tools even if not Canadian.\n-  # Of course, these are different reasonable default values, originally\n-  # specified directly in the Makefile.\n-  # We don't export, so that autoconf can do its job.\n-  # Note that all these settings are above the fragment inclusion point\n-  # in Makefile.in, so can still be overridden by fragments.\n-  # This is all going to change when we autoconfiscate...\n-\n   CC_FOR_BUILD=\"\\$(CC)\"\n-  AC_PROG_CC\n-\n-  # We must set the default linker to the linker used by gcc for the correct\n-  # operation of libtool.  If LD is not defined and we are using gcc, try to\n-  # set the LD default to the ld used by gcc.\n-  if test -z \"$LD\"; then\n-    if test \"$GCC\" = yes; then\n-      case $build in\n-      *-*-mingw*)\n-\tgcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\\015'` ;;\n-      *)\n-\tgcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;\n-      esac\n-      case $gcc_prog_ld in\n-      # Accept absolute paths.\n-      [[\\\\/]* | [A-Za-z]:[\\\\/]*)]\n-        LD=\"$gcc_prog_ld\" ;;\n-      esac\n-    fi\n-  fi\n+fi\n \n-  CXX=${CXX-\"c++\"}\n-  CFLAGS=${CFLAGS-\"-g\"}\n-  CXXFLAGS=${CXXFLAGS-\"-g -O2\"}\n+AC_PROG_CC\n+AC_PROG_CXX\n+\n+# We must set the default linker to the linker used by gcc for the correct\n+# operation of libtool.  If LD is not defined and we are using gcc, try to\n+# set the LD default to the ld used by gcc.\n+if test -z \"$LD\"; then\n+  if test \"$GCC\" = yes; then\n+    case $build in\n+    *-*-mingw*)\n+      gcc_prog_ld=`$CC -print-prog-name=ld 2>&1 | tr -d '\\015'` ;;\n+    *)\n+      gcc_prog_ld=`$CC -print-prog-name=ld 2>&1` ;;\n+    esac\n+    case $gcc_prog_ld in\n+    # Accept absolute paths.\n+    [[\\\\/]* | [A-Za-z]:[\\\\/]*)]\n+      LD=\"$gcc_prog_ld\" ;;\n+    esac\n+  fi\n fi\n \n ACX_PROG_GNAT\n@@ -1578,6 +1560,9 @@ case \"$host\" in\n     enable_gdbtk=no ;;\n esac\n \n+# To find our prefix, in gcc_cv_tool_prefix.\n+ACX_TOOL_DIRS\n+\n copy_dirs=\n \n AC_ARG_WITH([build-sysroot], \n@@ -1597,10 +1582,7 @@ if test x\"${with_headers}\" != x && test x\"${with_headers}\" != xno ; then\n     exit 1\n   fi\n   if test x\"${with_headers}\" != xyes ; then\n-    case \"${exec_prefixoption}\" in\n-    \"\") x=${prefix} ;;\n-    *) x=${exec_prefix} ;;\n-    esac\n+    x=${gcc_cv_tool_prefix}\n     copy_dirs=\"${copy_dirs} ${with_headers} $x/${target_noncanonical}/sys-include\"\n   fi\n fi\n@@ -1616,10 +1598,7 @@ if test x\"${with_libs}\" != x && test x\"${with_libs}\" != xno ; then\n   if test x\"${with_libs}\" != xyes ; then\n     # Copy the libraries in reverse order, so that files in the first named\n     # library override files in subsequent libraries.\n-    case \"${exec_prefixoption}\" in\n-    \"\") x=${prefix} ;;\n-    *) x=${exec_prefix} ;;\n-    esac\n+    x=${gcc_cv_tool_prefix}\n     for l in ${with_libs}; do\n       copy_dirs=\"$l $x/${target_noncanonical}/lib ${copy_dirs}\"\n     done"}]}