{"sha": "cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2FiOGJkZTk4ZTk0M2M4YmQ3YjAxZWE3MTg0OGNlYjI0ZWM2MGI0NQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-05-26T16:54:18Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-05-26T16:54:18Z"}, "message": "decl2.c (grokclassfn): Set DECL_LANGUAGE here.\n\n\t* decl2.c (grokclassfn): Set DECL_LANGUAGE here.\n\t* method.c (implicitly_declare_fn): Not here.\n\nFrom-SVN: r34194", "tree": {"sha": "ca9cc8273732e68b4328f9a2c1ad50124ed28441", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca9cc8273732e68b4328f9a2c1ad50124ed28441"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/comments", "author": null, "committer": null, "parents": [{"sha": "1bc48f824a96c15d85926939fbfe9b0836070b90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bc48f824a96c15d85926939fbfe9b0836070b90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bc48f824a96c15d85926939fbfe9b0836070b90"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "1bccc360298018872bfc04942144d2079fb1c16e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "patch": "@@ -1,3 +1,8 @@\n+2000-05-26  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* decl2.c (grokclassfn): Set DECL_LANGUAGE here.\n+\t* method.c (implicitly_declare_fn): Not here.\n+\n 2000-05-26  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* cp-tree.h (CPTI_PTMD_DESC_TYPE): Rename to ..."}, {"sha": "11250e7a02f245c2210ac2a4c2d4f81ba5bbdd9d", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "patch": "@@ -1034,6 +1034,10 @@ grokclassfn (ctype, function, flags, quals)\n   tree fn_name = DECL_NAME (function);\n   int this_quals = TYPE_UNQUALIFIED;\n \n+  /* Even within an `extern \"C\"' block, members get C++ linkage.  See\n+     [dcl.link] for details.  */\n+  DECL_LANGUAGE (function) = lang_cplusplus;\n+\n   if (fn_name == NULL_TREE)\n     {\n       error (\"name missing for member function\");"}, {"sha": "6d34795fe9aa4f657af9a6779b7553f04dcb7724", "filename": "gcc/cp/method.c", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "patch": "@@ -2581,9 +2581,6 @@ implicitly_declare_fn (kind, type, const_p)\n   DECL_NOT_REALLY_EXTERN (fn) = 1;\n   DECL_THIS_INLINE (fn) = 1;\n   DECL_INLINE (fn) = 1;\n-  /* Even within an `extern \"C\"' block, members get C++ linkage.  See\n-     [dcl.link] for details.  */\n-  DECL_LANGUAGE (fn) = lang_cplusplus;\n   defer_fn (fn);\n   \n   return fn;"}, {"sha": "86d3736947a3c0e811ad32ffb9dcdccc42fb53d3", "filename": "gcc/testsuite/g++.old-deja/g++.other/externC2.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2FexternC2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cab8bde98e943c8bd7b01ea71848ceb24ec60b45/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2FexternC2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2FexternC2.C?ref=cab8bde98e943c8bd7b01ea71848ceb24ec60b45", "patch": "@@ -0,0 +1,16 @@\n+// Build don't link:\n+// Origin: Boris Zentner <boris@m2b.de>\n+\n+extern \"C\"\n+{\n+struct xx\n+{\n+  int x;\n+  xx();\n+};\n+\n+xx::xx()\n+{\n+  x = 0;\n+}\n+}"}]}