{"sha": "0159ec792b364e3b675d606ee66700a4c373bd1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDE1OWVjNzkyYjM2NGUzYjY3NWQ2MDZlZTY2NzAwYTRjMzczYmQxZg==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2009-08-10T15:34:09Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2009-08-10T15:34:09Z"}, "message": "re PR middle-end/37053 (ICE in reload_cse_simplify_operands, at postreload.c:395)\n\n\tPR target/37053\n\t* reload1.c (reload_as_needed): Use cancel_changes to completely\n\tundo a failed replacement attempt.\n\nFrom-SVN: r150626", "tree": {"sha": "0c5e12fbd47ddfa2d6f82dda681ccb71bdc507a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c5e12fbd47ddfa2d6f82dda681ccb71bdc507a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0159ec792b364e3b675d606ee66700a4c373bd1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0159ec792b364e3b675d606ee66700a4c373bd1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0159ec792b364e3b675d606ee66700a4c373bd1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0159ec792b364e3b675d606ee66700a4c373bd1f/comments", "author": null, "committer": null, "parents": [{"sha": "ee26a76d35d4d9b328f5fd8a423470363125776e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee26a76d35d4d9b328f5fd8a423470363125776e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee26a76d35d4d9b328f5fd8a423470363125776e"}], "stats": {"total": 32, "additions": 16, "deletions": 16}, "files": [{"sha": "67d98a7cd109a06191cbd8f809a81656b1115c95", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0159ec792b364e3b675d606ee66700a4c373bd1f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0159ec792b364e3b675d606ee66700a4c373bd1f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0159ec792b364e3b675d606ee66700a4c373bd1f", "patch": "@@ -1,3 +1,9 @@\n+2009-08-10  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\tPR target/37053\n+\t* reload1.c (reload_as_needed): Use cancel_changes to completely\n+\tundo a failed replacement attempt.\n+\n 2009-08-10  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/41006"}, {"sha": "41b436b8891266b81a204e88cc724562c7b209dc", "filename": "gcc/reload1.c", "status": "modified", "additions": 10, "deletions": 16, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0159ec792b364e3b675d606ee66700a4c373bd1f/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0159ec792b364e3b675d606ee66700a4c373bd1f/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=0159ec792b364e3b675d606ee66700a4c373bd1f", "patch": "@@ -4304,31 +4304,25 @@ reload_as_needed (int live_known)\n \t\t\t    continue;\n \t\t\t  if (n == 1)\n \t\t\t    {\n-\t\t\t      n = validate_replace_rtx (reload_reg,\n-\t\t\t\t\t\t\tgen_rtx_fmt_e (code,\n-\t\t\t\t\t\t\t\t       mode,\n-\t\t\t\t\t\t\t\t       reload_reg),\n-\t\t\t\t\t\t\tp);\n+\t\t\t      rtx replace_reg\n+\t\t\t\t= gen_rtx_fmt_e (code, mode, reload_reg);\n+\n+\t\t\t      validate_replace_rtx_group (reload_reg,\n+\t\t\t\t\t\t\t  replace_reg, p);\n+\t\t\t      n = verify_changes (0);\n \n \t\t\t      /* We must also verify that the constraints\n \t\t\t\t are met after the replacement.  */\n \t\t\t      extract_insn (p);\n \t\t\t      if (n)\n \t\t\t\tn = constrain_operands (1);\n-\t\t\t      else\n-\t\t\t\tbreak;\n \n \t\t\t      /* If the constraints were not met, then\n-\t\t\t\t undo the replacement.  */\n+\t\t\t\t undo the replacement, else confirm it.  */\n \t\t\t      if (!n)\n-\t\t\t\t{\n-\t\t\t\t  validate_replace_rtx (gen_rtx_fmt_e (code,\n-\t\t\t\t\t\t\t\t       mode,\n-\t\t\t\t\t\t\t\t       reload_reg),\n-\t\t\t\t\t\t\treload_reg, p);\n-\t\t\t\t  break;\n-\t\t\t\t}\n-\n+\t\t\t\tcancel_changes (0);\n+\t\t\t      else\n+\t\t\t\tconfirm_change_group ();\n \t\t\t    }\n \t\t\t  break;\n \t\t\t}"}]}