{"sha": "c9db365d82513a3aa4993bd0c8d3554caade44b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzlkYjM2NWQ4MjUxM2EzYWE0OTkzYmQwYzhkMzU1NGNhYWRlNDRiOQ==", "commit": {"author": {"name": "Joshua Sumali", "email": "jsumali@redhat.com", "date": "2008-07-02T13:17:54Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2008-07-02T13:17:54Z"}, "message": "configure.ac (java-home): new AC_ARG_ENABLE.\n\n2008-06-30  Joshua Sumali  <jsumali@redhat.com>\n        Andrew Haley  <aph@redhat.com>\n\n        * configure.ac (java-home): new AC_ARG_ENABLE.\n        (aot-compile-rpm): Likewise.\n        (CREATE_JAVA_HOME): new AM_CONDITIONAL.\n        (INSTALL_AOT_RPM): Likewise.\n        (gcc-suffix): new AC_ARG_WITH.\n        (arch-directory): Likewise.\n        (os-directory): Likewise.\n        (origin-name): Likewise.\n        (arch-suffix): Likewise.\n        (jvm-root-dir): Likewise.\n        (jvm-jar-dir): Likewise.\n        (python-dir): Likewise.\n        (AC_CONFIG_FILES): Add contrib/aotcompile.py, contrib/aot-compile,\n        contrib/aot-compile-rpm, contrib/rebuild-gcj-db.\n        (gcjsubdir): New AC_SUBST.\n        * Makefile.am (install-data-local): Install Python modules for\n        aot-compile. Also install an sdk style directory if\n        --enable-java-home is passed to configure.\n        (bin_SCRIPTS): Add \n        contrib/rebuild-gcj-db and contrib/aot-compile.\n        (gcjsubdir): Add.\n        (db_pathtail): Redefine in terms of gcjsubdir.\n        * contrib/aot-compile.in: New file.\n        * contrib/aotcompile.py.in: Likewise.\n        * contrib/aot-compile-rpm.in: Likewise.\n        * contrib/classfile.py: Likewise.\n        * contrib/rebuild-gcj-db.in: Likewise.\n        * configure: Regenerate.\n        * Makefile.in: Regenerate. \n\n2008-06-30  Joshua Sumali  <jsumali@redhat.com>\n\n        * doc/install.texi (--enable-java-home): Document.\n        (--enable-aot-compile-rpm): Likewise.\n        (--with-arch-directory): Likewise.\n        (--with-os-directory): Likewise.\n        (--with-origin-name): Likewise.\n        (--with-arch-suffix): Likewise.\n        (--with-jvm-root-dir): Likewise.\n        (--with-jvm-jar-dir): Likewise.\n        (--with-python-dir): Likewise.\n\n2008-06-30  Joshua Sumali  <jsumali@redhat.com>\n\n\t* Make-lang.in (JAVA_MANFILES): Add doc/aot-compile.1 and\n\tdoc/rebuild-gcj-db.1\n\t(java.uninstall): Likewise.\n\t(java.maintainer-clean): Likewise.\n\t(aot-compile.pod): New rule.\n\t(rebuild-gcj-db.pod): New rule.\n\t(java.install-man): Install doc/aot-compile.1 and doc/rebuild-gcj-db.1\n\t* gcj.texi: Add new sections for aot-compile and rebuild-gcj-db.\n\n\nCo-Authored-By: Andrew Haley <aph@redhat.com>\n\nFrom-SVN: r137353", "tree": {"sha": "b7d8b5f41e6442ff1a6b23906ca6686a7f8748f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b7d8b5f41e6442ff1a6b23906ca6686a7f8748f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9db365d82513a3aa4993bd0c8d3554caade44b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9db365d82513a3aa4993bd0c8d3554caade44b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9db365d82513a3aa4993bd0c8d3554caade44b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9db365d82513a3aa4993bd0c8d3554caade44b9/comments", "author": null, "committer": null, "parents": [{"sha": "9e11641d112ecb3a6067c7223a8e249a1d63b9a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e11641d112ecb3a6067c7223a8e249a1d63b9a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e11641d112ecb3a6067c7223a8e249a1d63b9a1"}], "stats": {"total": 2108, "additions": 2043, "deletions": 65}, "files": [{"sha": "f6da145f8158a191d04e39ca5eb7c03be39f791e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -1,3 +1,15 @@\n+2008-07-02  Joshua Sumali  <jsumali@redhat.com>\n+\n+\t* doc/install.texi (--enable-java-home): Document.\n+\t(--enable-aot-compile-rpm): Likewise.\n+\t(--with-arch-directory): Likewise.\n+\t(--with-os-directory): Likewise.\n+\t(--with-origin-name): Likewise.\n+\t(--with-arch-suffix): Likewise.\n+\t(--with-jvm-root-dir): Likewise.\n+\t(--with-jvm-jar-dir): Likewise.\n+\t(--with-python-dir): Likewise.\n+\n 2008-07-02  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-ssa-forwprop.c (can_propagate_from): Exclude loads"}, {"sha": "86c2f46a49ebd150eb90cc461b22380eb85df63e", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -1607,6 +1607,45 @@ Use installed @samp{zlib} rather than that included with GCC@.\n @item --with-win32-nlsapi=ansi, unicows or unicode\n Indicates how MinGW @samp{libgcj} translates between UNICODE\n characters and the Win32 API@.\n+\n+@item --enable-java-home\n+If enabled, this creates a JPackage compatible SDK environment during install.\n+Note that if --enable-java-home is used, --with-arch-directory=ARCH must also\n+be specified.\n+\n+@item --with-arch-directory=ARCH\n+Specifies the name to use for the @file{jre/lib/ARCH} directory in the SDK \n+environment created when --enable-java-home is passed. Typical names for this \n+directory include i386, amd64, ia64, etc.\n+\n+@item --with-os-directory=DIR\n+Specifies the OS directory for the SDK include directory. This is set to auto\n+detect, and is typically 'linux'.\n+\n+@item --with-origin-name=NAME\n+Specifies the JPackage origin name. This defaults to the 'gcj' in\n+java-1.5.0-gcj.\n+\n+@item --with-arch-suffix=SUFFIX\n+Specifies the suffix for the sdk directory. Defaults to the empty string. \n+Examples include '.x86_64' in 'java-1.5.0-gcj-1.5.0.0.x86_64'.\n+\n+@item --with-jvm-root-dir=DIR\n+Specifies where to install the SDK. Default is $(prefix)/lib/jvm.\n+\n+@item --with-jvm-jar-dir=DIR\n+Specifies where to install jars. Default is $(prefix)/lib/jvm-exports.\n+\n+@item --with-python-dir=DIR\n+Specifies where to install the Python modules used for aot-compile. DIR should\n+not include the prefix used in installation. For example, if the Python modules\n+are to be installed in /usr/lib/python2.5/site-packages, then \n+--with-python-dir=/lib/python2.5/site-packages should be passed. If this is\n+not specified, then the Python modules are installed in $(prefix)/share/python.\n+\n+@item --enable-aot-compile-rpm\n+Adds aot-compile-rpm to the list of installed scripts.\n+\n @table @code\n @item ansi\n Use the single-byte @code{char} and the Win32 A functions natively,"}, {"sha": "33ac01f7a7c5649a3254998e14b343dc6fdc9cb0", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -1,3 +1,14 @@\n+2008-06-30  Joshua Sumali  <jsumali@redhat.com>\n+\n+\t* Make-lang.in (JAVA_MANFILES): Add doc/aot-compile.1 and\n+\tdoc/rebuild-gcj-db.1\n+\t(java.uninstall): Likewise.\n+\t(java.maintainer-clean): Likewise.\n+\t(aot-compile.pod): New rule.\n+\t(rebuild-gcj-db.pod): New rule.\n+\t(java.install-man): Install doc/aot-compile.1 and doc/rebuild-gcj-db.1\n+\t* gcj.texi: Add new sections for aot-compile and rebuild-gcj-db.\n+\n 2008-06-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* Make-lang.in (java/jcf-io.o-warn): New."}, {"sha": "cab40afb95924d48c87ea9b482efb284cbc17cad", "filename": "gcc/java/Make-lang.in", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fjava%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fjava%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FMake-lang.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -146,8 +146,9 @@ java.pdf: $(JAVA_PDFFILES)\n java.html: $(build_htmldir)/java/index.html\n \n JAVA_MANFILES = doc/gcj.1 doc/jcf-dump.1 doc/gij.1 \\\n-                doc/jv-convert.1 doc/grmic.1\\\n-\t\tdoc/gcj-dbtool.1 doc/gc-analyze.1\n+                doc/jv-convert.1 doc/grmic.1 \\\n+                doc/gcj-dbtool.1 doc/gc-analyze.1 doc/aot-compile.1 \\\n+                doc/rebuild-gcj-db.1\n \n java.man: $(JAVA_MANFILES)\n \n@@ -192,6 +193,8 @@ java.uninstall:\n \t-rm -rf $(DESTDIR)$(man1dir)/gij$(man1ext)\n \t-rm -rf $(DESTDIR)$(man1dir)/jv-convert$(man1ext)\n \t-rm -rf $(DESTDIR)$(man1dir)/gcj-dbtool$(man1ext)\n+\t-rm -rf $(DESTDIR)$(man1dir)/aot-compile$(man1ext)\n+\t-rm -rf $(DESTDIR)$(man1dir)/rebuild-gcj-db$(man1ext)\n \n java.install-info: $(DESTDIR)$(infodir)/gcj.info\n \n@@ -226,6 +229,8 @@ java.maintainer-clean:\n \t-rm -f $(docobjdir)/grmic.1\n \t-rm -f $(docobjdir)/gcj-dbtool.1\n \t-rm -f $(docobjdir)/gc-analyze.1\n+\t-rm -f $(docobjdir)/aot-compile.1\n+\t-rm -f $(docobjdir)/rebuild-gcj-db.1\n #\f\n # Stage hooks:\n # The main makefile has already created stage?/java.\n@@ -356,15 +361,21 @@ gcj-dbtool.pod: java/gcj.texi\n \t-$(TEXI2POD) -D gcj-dbtool < $< > $@\n gc-analyze.pod: java/gcj.texi\n \t-$(TEXI2POD) -D gc-analyze < $< > $@\n+aot-compile.pod: java/gcj.texi\n+\t-$(TEXI2POD) -D aot-compile < $< > $@\n+rebuild-gcj-db.pod: java/gcj.texi\n+\t-$(TEXI2POD) -D rebuild-gcj-db < $< > $@\n \n # Install the man pages.\n java.install-man: installdirs \\\n                   $(DESTDIR)$(man1dir)/$(JAVA_INSTALL_NAME)$(man1ext) \\\n \t\t  $(JAVA_TARGET_INDEPENDENT_BIN_TOOLS:%=doc/%.1) \\\n \t\t  doc/gij.1 doc/jv-convert.1 doc/grmic.1 \\\n-\t\t  doc/gcj-dbtool.1 doc/gc-analyze.1\n+\t\t  doc/gcj-dbtool.1 doc/gc-analyze.1 \\\n+\t\t  doc/aot-compile.1 doc/rebuild-gcj-db.1\n \tfor tool in $(JAVA_TARGET_INDEPENDENT_BIN_TOOLS) \\\n-\t\tgij jv-convert grmic gcj-dbtool gc-analyze ; do \\\n+\t\tgij jv-convert grmic gcj-dbtool gc-analyze aot-compile \\\n+\t\trebuild-gcj-db; do \\\n \t  tool_transformed_name=`echo $$tool|sed '$(program_transform_name)'`; \\\n \t  man_name=$(DESTDIR)$(man1dir)/$${tool_transformed_name}$(man1ext); \\\n \t  rm -f $$man_name ; \\"}, {"sha": "179e620f8c9ace0c8cf7864ae5dad574423ebf5a", "filename": "gcc/java/gcj.texi", "status": "modified", "additions": 90, "deletions": 1, "changes": 91, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fjava%2Fgcj.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/gcc%2Fjava%2Fgcj.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fgcj.texi?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -72,6 +72,11 @@ man page gfdl(7).\n                             Generate stubs for Remote Method Invocation.\n * gc-analyze: (gcj)Invoking gc-analyze.\n                             Analyze Garbage Collector (GC) memory dumps.\n+* aot-compile: (gcj)Invoking aot-compile.\n+                            Compile bytecode to native and generate databases.\n+* rebuild-gcj-db: (gcj)Invoking rebuild-gcj-db.\n+                            Merge the per-solib databases made by aot-compile\n+                            into one system-wide database.\n @end direntry\n @end format\n \n@@ -115,6 +120,9 @@ files and object files, and it can read both Java source code and\n * Invoking jv-convert:: Converting from one encoding to another\n * Invoking grmic::      Generate stubs for Remote Method Invocation.\n * Invoking gc-analyze:: Analyze Garbage Collector (GC) memory dumps.\n+* Invoking aot-compile:: Compile bytecode to native and generate databases.\n+* Invoking rebuild-gcj-db:: Merge the per-solib databases made by aot-compile\n+                            into one system-wide database.\n * About CNI::           Description of the Compiled Native Interface\n * System properties::   Modifying runtime behavior of the libgcj library\n * Resources::           Where to look for more information\n@@ -921,7 +929,7 @@ gcj-dbtool [@option{-0}] [@option{-}] [@option{-n}] [@option{-a}] [@option{-f}]\n   [@option{-v}] [@option{-m}] [@option{--version}] [@option{--help}]\n \n @c man end\n-@c man begin SEEALSO gij\n+@c man begin SEEALSO gcj-dbtool\n gcc(1), gcj(1), gcjh(1), jcf-dump(1), gfdl(7),\n and the Info entries for @file{gcj} and @file{gcc}.\n @c man end\n@@ -1219,6 +1227,87 @@ Print version information, then exit.\n \n @c man end\n \n+@node Invoking aot-compile\n+@chapter Invoking aot-compile\n+\n+@c man title aot-compile Compile bytecode to native and generate databases\n+\n+@ignore\n+\n+@c man begin SYNOPSIS aot-compile\n+aot-compile [@option{OPTION}] @dots{} @var{SRCDIR} @var{DSTDIR}\n+\n+aot-compile [@option{-M, --make}=@var{PATH}] [@option{-C, --gcj}=@var{PATH}]\n+  [@option{-D, --dbtool}=@var{PATH}] [@option{-m, --makeflags}=@var{FLAGS}] \n+  [@option{-c, --gcjflags}=@var{FLAGS}] [@option{-l, --ldflags}=@var{FLAGS}] \n+  [@option{-e, --exclude}=@var{PATH}]\n+@c man end\n+\n+@c man begin SEEALSO aot-compile\n+gcc(1), gcj(1), gcjh(1), jcf-dump(1), gfdl(7),\n+and the Info entries for @file{gcj} and @file{gcc}.\n+@c man end\n+\n+@end ignore\n+\n+@c man begin DESCRIPTION aot-compile\n+@code{aot-compile} is a script that searches a directory for Java bytecode\n+(as class files, or in jars) and uses @code{gcj} to compile it to native\n+code and generate the databases from it.\n+@c man end\n+\n+@c man begin OPTIONS aot-compile\n+@table @gcctabopt\n+@item -M, --make=@var{PATH}\n+Specify the path to the @code{make} executable to use.\n+\n+@item -C, --gcj=@var{PATH}\n+Specify the path to the @code{gcj} executable to use.\n+\n+@item -D, --dbtool=@var{PATH}\n+Specify the path to the @code{gcj-dbtool} executable to use.\n+\n+@item -m, --makeflags=@var{FLAGS}\n+Specify flags to pass to @code{make} during the build.\n+\n+@item -c, --gcjflags=@var{FLAGS}\n+Specify flags to pass to @code{gcj} during compilation, in addition to\n+'-fPIC -findirect-dispatch -fjni'.\n+\n+@item -l, --ldflags=@var{FLAGS}\n+Specify flags to pass to @code{gcj} during linking, in addition to\n+'-Wl,-Bsymbolic'.\n+\n+@item -e, --exclude=@var{PATH}\n+Do not compile @var{PATH}.\n+\n+@end table\n+\n+@c man end\n+\n+@node Invoking rebuild-gcj-db\n+@chapter Invoking rebuild-gcj-db\n+\n+@c man title rebuild-gcj-db Merge the per-solib databases made by aot-compile into one system-wide database.\n+@ignore\n+\n+@c man begin SYNOPSIS rebuild-gcj-db\n+rebuild-gcj-db\n+@c man end\n+\n+@c man begin SEEALSO rebuild-gcj-db\n+gcc(1), gcj(1), gcjh(1), jcf-dump(1), gfdl(7),\n+and the Info entries for @file{gcj} and @file{gcc}.\n+@c man end\n+\n+@end ignore\n+\n+@c man begin DESCRIPTION rebuild-gcj-db\n+@code{rebuild-gcj-db} is a script that merges the per-solib databases made by\n+@code{aot-compile} into one system-wide database so @code{gij} can find the \n+solibs.\n+@c man end\n+\n @node About CNI\n @chapter About CNI\n "}, {"sha": "d0c1d068dbb56274c4e1050e0698885de28ca731", "filename": "libjava/ChangeLog", "status": "modified", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -1,3 +1,36 @@\n+2008-06-30  Joshua Sumali  <jsumali@redhat.com>\n+\tAndrew Haley  <aph@redhat.com>\n+\t\n+\t* configure.ac (java-home): new AC_ARG_ENABLE.\n+\t(aot-compile-rpm): Likewise.\n+\t(CREATE_JAVA_HOME): new AM_CONDITIONAL.\n+\t(INSTALL_AOT_RPM): Likewise.\n+\t(gcc-suffix): new AC_ARG_WITH.\n+\t(arch-directory): Likewise.\n+\t(os-directory): Likewise.\n+\t(origin-name): Likewise.\n+\t(arch-suffix): Likewise.\n+\t(jvm-root-dir): Likewise.\n+\t(jvm-jar-dir): Likewise.\n+\t(python-dir): Likewise.\n+\t(AC_CONFIG_FILES): Add contrib/aotcompile.py, contrib/aot-compile,\n+\tcontrib/aot-compile-rpm, contrib/rebuild-gcj-db.\n+\t(gcjsubdir): New AC_SUBST.\n+\t* Makefile.am (install-data-local): Install Python modules for\n+\taot-compile. Also install an sdk style directory if\n+\t--enable-java-home is passed to configure.\n+\t(bin_SCRIPTS): Add \n+\tcontrib/rebuild-gcj-db and contrib/aot-compile.\n+\t(gcjsubdir): Add.\n+\t(db_pathtail): Redefine in terms of gcjsubdir.\n+\t* contrib/aot-compile.in: New file.\n+\t* contrib/aotcompile.py.in: Likewise.\n+\t* contrib/aot-compile-rpm.in: Likewise.\n+\t* contrib/classfile.py: Likewise.\n+\t* contrib/rebuild-gcj-db.in: Likewise.\n+\t* configure: Regenerate.\n+\t* Makefile.in: Regenerate. \n+\n 2008-06-28  Matthias Klose  <doko@ubuntu.com>\n \n \tImport GNU Classpath (classpath-0_97_2-release)."}, {"sha": "c074f5752a0c370ccfba8a9688aae6e6c8a152c6", "filename": "libjava/Makefile.am", "status": "modified", "additions": 142, "deletions": 4, "changes": 146, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -74,7 +74,8 @@ endif\n ## Name of the default .db.\n db_name = classmap.db\n ## Compiler specific component of the .db file\n-db_pathtail = gcj-$(gcc_version)/$(db_name)\n+gcjsubdir = @gcjsubdir@\n+db_pathtail = $(gcjsubdir)/$(db_name)\n \n ## For now, only on native systems.  FIXME.\n if NATIVE\n@@ -85,9 +86,13 @@ bin_PROGRAMS = jv-convert gij grmic grmiregistry gcj-dbtool \\\n ## It is convenient to actually build and install the default database\n ## when gcj-dbtool is available.\n dbexec_DATA = $(db_name)\n-endif\n+endif \n \n-bin_SCRIPTS = addr2name.awk\n+bin_SCRIPTS = addr2name.awk contrib/rebuild-gcj-db contrib/aot-compile\n+\n+if INSTALL_AOT_RPM\n+bin_SCRIPTS += contrib/aot-compile-rpm\n+endif\n \n if BUILD_ECJ1\n ## We build ecjx and not ecj1 because in one mode, ecjx will not work\n@@ -528,7 +533,140 @@ install-data-local:\n \t$(INSTALL_DATA) $(srcdir)/'gnu/java/nio/PipeImpl$$SinkChannelImpl.h' $(DESTDIR)$(gxx_include_dir)/gnu/java/nio/\n \t$(INSTALL_DATA) $(srcdir)/'gnu/java/nio/PipeImpl$$SourceChannelImpl.h' $(DESTDIR)$(gxx_include_dir)/gnu/java/nio/\n ## Don't install java/nio/DirectByteBufferImpl$$ReadWrite.h here. It's for internal use only.\n-\n+## Install Python modules for aot-compile.\n+\t$(mkinstalldirs) $(DESTDIR)$(python_mod_dir); \\\n+\t$(INSTALL_DATA) $(srcdir)/contrib/classfile.py \\\n+\t  $(DESTDIR)$(python_mod_dir)/classfile.py; \\\n+\t$(INSTALL_DATA) contrib/aotcompile.py \\\n+\t  $(DESTDIR)$(python_mod_dir)/aotcompile.py;\n+if CREATE_JAVA_HOME\n+## Create sdk style directories\n+\t$(mkinstalldirs) $(DESTDIR)$(JRE_BIN_DIR)\n+\t$(mkinstalldirs) $(DESTDIR)$(SDK_BIN_DIR)\n+\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)\n+\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)\n+\t$(mkinstalldirs) $(DESTDIR)$(SDK_INCLUDE_DIR)\n+\t$(mkinstalldirs) $(DESTDIR)$(SDK_INCLUDE_DIR)/$(OS)\n+\trelative() { \\\n+\t  $(PERL) -e 'use File::Spec; \\\n+\t    print File::Spec->abs2rel($$ARGV[0], $$ARGV[1])' $$1 $$2; \\\n+\t}; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(bindir) $(DESTDIR)$(SDK_BIN_DIR)); \\\n+\tln -sf $$RELATIVE/`echo gij | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/java; \\\n+\tln -sf $$RELATIVE/`echo gjar | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/jar; \\\n+\tln -sf $$RELATIVE/`echo gjdoc | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/javadoc; \\\n+\tln -sf $$RELATIVE/`echo grmic | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/rmic; \\\n+\tln -sf $$RELATIVE/`echo gjavah | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/javah; \\\n+\tln -sf $$RELATIVE/ecj $(DESTDIR)$(SDK_BIN_DIR)/javac; \\\n+\tln -sf $$RELATIVE/`echo gappletviewer | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/appletviewer; \\\n+\tln -sf $$RELATIVE/`echo gjarsigner | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/jarsigner; \\\n+\tln -sf $$RELATIVE/`echo grmiregistry | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/rmiregistry; \\\n+\tln -sf $$RELATIVE/`echo gkeytool | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/keytool; \\\n+\tln -sf $$RELATIVE/`echo gorbd | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/orbd; \\\n+\tln -sf $$RELATIVE/`echo gnative2ascii | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/native2ascii; \\\n+\tln -sf $$RELATIVE/`echo grmid | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/rmid; \\\n+\tln -sf $$RELATIVE/`echo gtnameserv | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/tnameserv; \\\n+\tln -sf $$RELATIVE/`echo gserialver | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(SDK_BIN_DIR)/serialver; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(bindir) $(DESTDIR)$(JRE_BIN_DIR)); \\\n+\tln -sf $$RELATIVE/`echo grmiregistry | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(JRE_BIN_DIR)/rmiregistry; \\\n+\tln -sf $$RELATIVE/`echo gkeytool | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(JRE_BIN_DIR)/keytool; \\\n+\tln -sf $$RELATIVE/`echo gij | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(JRE_BIN_DIR)/java; \\\n+\tln -sf $$RELATIVE/`echo gorbd | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(JRE_BIN_DIR)/orbd; \\\n+\tln -sf $$RELATIVE/`echo grmid | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(JRE_BIN_DIR)/rmid; \\\n+\tln -sf $$RELATIVE/`echo gtnameserv | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+\t  $(DESTDIR)$(JRE_BIN_DIR)/tnameserv; \\\n+\t$(mkinstalldirs) $(DESTDIR)$(JVM_JAR_DIR); \\\n+\tversion=$(JAVA_VERSION).$(BUILD_VERSION); \\\n+\tworking_dir=`pwd`; \\\n+\tcd $(DESTDIR)$(JVM_JAR_DIR); \\\n+\t  for jarname in jaas jce jdbc-stdext jndi jndi-cos jndi-dns \\\n+\t    jndi-ldap jndi-rmi jsse sasl; \\\n+\t  do \\\n+\t    ln -s $$RELATIVE/$$jarname.jar $$jarname-$$version.jar; \\\n+\t  done; \\\n+\t  for jar in *-$$version.jar; \\\n+\t  do \\\n+\t    ln -sf $$jar $$(echo $$jar | sed \"s|-$$version.jar|-$(JAVA_VERSION).jar|g\"); \\\n+\t    ln -sf $$jar $$(echo $$jar | sed \"s|-$$version.jar|.jar|g\"); \\\n+\t  done; \\\n+\tcd $$working_dir; \\\n+\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/security; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(libdir)/security \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/security); \\\n+\tcd $(DESTDIR)$(JRE_LIB_DIR)/security; \\\n+\t  ln -sf $$RELATIVE/classpath.security java.security; \\\n+\tcd $$working_dir; \\\n+\t$(mkinstalldirs) $(DESTDIR)$(SDK_INCLUDE_DIR)/linux; \\\n+\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/client; \\\n+\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/server; \\\n+\t$(mkinstalldirs) $(DESTDIR)$(SDK_LIB_DIR); \\\n+\tcd $(DESTDIR)$(JRE_LIB_DIR); \\\n+\t  for jarname in jaas jce jdbc-stdext jndi jndi-cos jndi-dns \\\n+\t    jndi-ldap jndi-rmi jsse sasl; \\\n+\t  do \\\n+\t    ln -s rt.jar $$jarname.jar; \\\n+\t  done; \\\n+\tcd $$working_dir; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(datarootdir)/java \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)); \\\n+\tln -sf $$RELATIVE/libgcj-$(gcc_version).jar \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/rt.jar; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(dbexecdir) \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)); \\\n+\tln -sf $$RELATIVE/libjawt.so \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/libjawt.so; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(dbexecdir) \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/client); \\\n+\tln -sf $$RELATIVE/libjvm.so \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/client/libjvm.so; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(dbexecdir) \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/server); \\\n+\tln -sf $$RELATIVE/libjvm.so \\\n+\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/server/libjvm.so;\t\\\n+\tRELATIVE=$$(relative $(DESTDIR)$(datarootdir)/java \\\n+\t  $(DESTDIR)$(SDK_LIB_DIR)); \\\n+\tln -sf $$RELATIVE/libgcj-tools-$(gcc_version).jar \\\n+\t  $(DESTDIR)$(SDK_LIB_DIR)/tools.jar; \\\n+\tfor headername in jawt jni; do \\\n+\t  DIRECTORY=$$(dirname $$($(DESTDIR)$(bindir)/gcj \\\n+\t    -print-file-name=include/$$headername.h)); \\\n+\t  RELATIVE=$$(relative $(DESTDIR)$$DIRECTORY \\\n+\t    $(DESTDIR)$(SDK_INCLUDE_DIR)); \\\n+\t  ln -sf $$RELATIVE/$$headername.h \\\n+\t    $(DESTDIR)$(SDK_INCLUDE_DIR)/$$headername.h; \\\n+\tdone; \\\n+\tfor headername in jawt_md jni_md; do \\\n+\t  DIRECTORY=$$(dirname $$($(DESTDIR)$(bindir)/gcj \\\n+\t    -print-file-name=include/$$headername.h)); \\\n+\t  RELATIVE=$$(relative $(DESTDIR)$$DIRECTORY \\\n+\t    $(DESTDIR)$(SDK_INCLUDE_DIR)/linux); \\\n+\t  ln -sf $$RELATIVE/$$headername.h \\\n+\t    $(DESTDIR)$(SDK_INCLUDE_DIR)/linux/$$headername.h; \\\n+\tdone; \\\n+\tRELATIVE=$$(relative $(DESTDIR)$(datarootdir)/java \\\n+\t  $(DESTDIR)$(JVM_ROOT_DIR)/$(SDK_DIR)); \\\n+\tln -sf $$RELATIVE/src-$(gcc_version).zip \\\n+\t  $(DESTDIR)$(JVM_ROOT_DIR)/$(SDK_DIR)/src.zip;\n+endif\n \n ## ################################################################\n "}, {"sha": "ba487885efc7652e1dccd0c4e29e1607bc4610e1", "filename": "libjava/Makefile.in", "status": "modified", "additions": 198, "deletions": 25, "changes": 223, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -52,18 +52,19 @@ target_triplet = @target@\n @NATIVE_TRUE@\tgnative2ascii$(EXEEXT) gorbd$(EXEEXT) \\\n @NATIVE_TRUE@\tgrmid$(EXEEXT) gserialver$(EXEEXT) \\\n @NATIVE_TRUE@\tgtnameserv$(EXEEXT) gc-analyze$(EXEEXT)\n+@INSTALL_AOT_RPM_TRUE@am__append_5 = contrib/aot-compile-rpm\n @BUILD_ECJ1_TRUE@libexecsub_PROGRAMS = ecjx$(EXEEXT)\n-@ANONVERSCRIPT_TRUE@am__append_5 = -Wl,--version-script=$(srcdir)/libgcj.ver\n-@USING_GCC_TRUE@am__append_6 = $(WARNINGS)\n-@USING_BOEHMGC_TRUE@am__append_7 = boehm.cc\n-@USING_NOGC_TRUE@am__append_8 = nogc.cc\n-@USING_POSIX_PLATFORM_TRUE@am__append_9 = posix.cc\n-@USING_WIN32_PLATFORM_TRUE@am__append_10 = win32.cc\n-@USING_DARWIN_CRT_TRUE@am__append_11 = darwin.cc\n-@USING_POSIX_THREADS_TRUE@am__append_12 = posix-threads.cc\n-@USING_WIN32_THREADS_TRUE@am__append_13 = win32-threads.cc\n-@USING_NO_THREADS_TRUE@am__append_14 = no-threads.cc\n-@ANONVERSCRIPT_TRUE@am__append_15 = $(srcdir)/libgcj.ver\n+@ANONVERSCRIPT_TRUE@am__append_6 = -Wl,--version-script=$(srcdir)/libgcj.ver\n+@USING_GCC_TRUE@am__append_7 = $(WARNINGS)\n+@USING_BOEHMGC_TRUE@am__append_8 = boehm.cc\n+@USING_NOGC_TRUE@am__append_9 = nogc.cc\n+@USING_POSIX_PLATFORM_TRUE@am__append_10 = posix.cc\n+@USING_WIN32_PLATFORM_TRUE@am__append_11 = win32.cc\n+@USING_DARWIN_CRT_TRUE@am__append_12 = darwin.cc\n+@USING_POSIX_THREADS_TRUE@am__append_13 = posix-threads.cc\n+@USING_WIN32_THREADS_TRUE@am__append_14 = win32-threads.cc\n+@USING_NO_THREADS_TRUE@am__append_15 = no-threads.cc\n+@ANONVERSCRIPT_TRUE@am__append_16 = $(srcdir)/libgcj.ver\n DIST_COMMON = README $(am__configure_deps) $(srcdir)/../compile \\\n \t$(srcdir)/../config.guess $(srcdir)/../config.sub \\\n \t$(srcdir)/../depcomp $(srcdir)/../install-sh \\\n@@ -72,11 +73,15 @@ DIST_COMMON = README $(am__configure_deps) $(srcdir)/../compile \\\n \t$(srcdir)/Makefile.in $(srcdir)/libgcj-test.spec.in \\\n \t$(srcdir)/libgcj.pc.in $(srcdir)/libgcj.spec.in \\\n \t$(srcdir)/sources.am $(top_srcdir)/configure \\\n+\t$(top_srcdir)/contrib/aot-compile-rpm.in \\\n+\t$(top_srcdir)/contrib/aot-compile.in \\\n+\t$(top_srcdir)/contrib/aotcompile.py.in \\\n+\t$(top_srcdir)/contrib/rebuild-gcj-db.in \\\n \t$(top_srcdir)/scripts/jar.in COPYING ChangeLog NEWS THANKS\n @MAINTAINER_MODE_TRUE@@NATIVE_TRUE@noinst_PROGRAMS =  \\\n @MAINTAINER_MODE_TRUE@@NATIVE_TRUE@\tgen-from-JIS$(EXEEXT)\n-@NATIVE_TRUE@@USE_LIBGCJ_BC_TRUE@am__append_16 = libgcj_bc.la\n-@XLIB_AWT_TRUE@am__append_17 = $(xlib_nat_headers)\n+@NATIVE_TRUE@@USE_LIBGCJ_BC_TRUE@am__append_17 = libgcj_bc.la\n+@XLIB_AWT_TRUE@am__append_18 = $(xlib_nat_headers)\n subdir = .\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n am__aclocal_m4_deps = $(top_srcdir)/libltdl/acinclude.m4 \\\n@@ -109,7 +114,9 @@ am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \\\n CONFIG_HEADER = $(top_builddir)/include/config.h \\\n \t$(top_builddir)/gcj/libgcj-config.h\n CONFIG_CLEAN_FILES = libgcj.pc libgcj.spec libgcj-test.spec \\\n-\tscripts/jar java/io/natFile.cc java/lang/natConcreteProcess.cc \\\n+\tcontrib/aotcompile.py contrib/aot-compile \\\n+\tcontrib/aot-compile-rpm contrib/rebuild-gcj-db scripts/jar \\\n+\tjava/io/natFile.cc java/lang/natConcreteProcess.cc \\\n \tjava/net/natVMInetAddress.cc java/net/natVMNetworkInterface.cc \\\n \tgnu/java/net/natPlainSocketImpl.cc \\\n \tgnu/java/net/natPlainDatagramSocketImpl.cc \\\n@@ -581,13 +588,17 @@ AWK = @AWK@\n BACKTRACESPEC = @BACKTRACESPEC@\n BUILD_ECJ1_FALSE = @BUILD_ECJ1_FALSE@\n BUILD_ECJ1_TRUE = @BUILD_ECJ1_TRUE@\n+BUILD_VERSION = @BUILD_VERSION@\n CC = @CC@\n CCDEPMODE = @CCDEPMODE@\n CFLAGS = @CFLAGS@\n CHECKREFSPEC = @CHECKREFSPEC@\n CLASSPATH_SEPARATOR = @CLASSPATH_SEPARATOR@\n CPP = @CPP@\n CPPFLAGS = @CPPFLAGS@\n+CPU = @CPU@\n+CREATE_JAVA_HOME_FALSE = @CREATE_JAVA_HOME_FALSE@\n+CREATE_JAVA_HOME_TRUE = @CREATE_JAVA_HOME_TRUE@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n CXXDEPMODE = @CXXDEPMODE@\n@@ -617,6 +628,7 @@ GCJDEPMODE = @GCJDEPMODE@\n GCJFLAGS = @GCJFLAGS@\n GCJH = @GCJH@\n GCJVERSION = @GCJVERSION@\n+GCJ_BIN_DIR = @GCJ_BIN_DIR@\n GCJ_FOR_ECJX = @GCJ_FOR_ECJX@\n GCLIBS = @GCLIBS@\n GCSPEC = @GCSPEC@\n@@ -629,6 +641,8 @@ GTK_LIBS = @GTK_LIBS@\n HASH_SYNC_SPEC = @HASH_SYNC_SPEC@\n IEEESPEC = @IEEESPEC@\n INCLTDL = @INCLTDL@\n+INSTALL_AOT_RPM_FALSE = @INSTALL_AOT_RPM_FALSE@\n+INSTALL_AOT_RPM_TRUE = @INSTALL_AOT_RPM_TRUE@\n INSTALL_DATA = @INSTALL_DATA@\n INSTALL_ECJ_JAR_FALSE = @INSTALL_ECJ_JAR_FALSE@\n INSTALL_ECJ_JAR_TRUE = @INSTALL_ECJ_JAR_TRUE@\n@@ -644,13 +658,22 @@ JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JAVA_MAINTAINER_MODE_FALSE = @JAVA_MAINTAINER_MODE_FALSE@\n JAVA_MAINTAINER_MODE_TRUE = @JAVA_MAINTAINER_MODE_TRUE@\n+JAVA_VERSION = @JAVA_VERSION@\n JC1GCSPEC = @JC1GCSPEC@\n+JRE_BIN_DIR = @JRE_BIN_DIR@\n+JRE_DIR = @JRE_DIR@\n+JRE_LIB_DIR = @JRE_LIB_DIR@\n+JRE_LNK = @JRE_LNK@\n+JVM_JAR_DIR = @JVM_JAR_DIR@\n+JVM_JAR_ROOT_DIR = @JVM_JAR_ROOT_DIR@\n+JVM_ROOT_DIR = @JVM_ROOT_DIR@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@\n LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@\n LIBART_CFLAGS = @LIBART_CFLAGS@\n LIBART_LIBS = @LIBART_LIBS@\n+LIBDIR = @LIBDIR@\n LIBFFI = @LIBFFI@\n LIBFFIINCS = @LIBFFIINCS@\n LIBGCJDEBUG = @LIBGCJDEBUG@\n@@ -673,13 +696,15 @@ LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n MAINTAINER_MODE_FALSE = @MAINTAINER_MODE_FALSE@\n MAINTAINER_MODE_TRUE = @MAINTAINER_MODE_TRUE@\n+MAKE = @MAKE@\n MAKEINFO = @MAKEINFO@\n NATIVE_FALSE = @NATIVE_FALSE@\n NATIVE_TRUE = @NATIVE_TRUE@\n NEEDS_DATA_START_FALSE = @NEEDS_DATA_START_FALSE@\n NEEDS_DATA_START_TRUE = @NEEDS_DATA_START_TRUE@\n NM = nm\n OBJEXT = @OBJEXT@\n+OS = @OS@\n PACKAGE = @PACKAGE@\n PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@\n PACKAGE_NAME = @PACKAGE_NAME@\n@@ -691,6 +716,11 @@ PERL = @PERL@\n PKG_CONFIG = @PKG_CONFIG@\n PLATFORM = @PLATFORM@\n RANLIB = @RANLIB@\n+SDK_BIN_DIR = @SDK_BIN_DIR@\n+SDK_DIR = @SDK_DIR@\n+SDK_INCLUDE_DIR = @SDK_INCLUDE_DIR@\n+SDK_LIB_DIR = @SDK_LIB_DIR@\n+SDK_LNK = @SDK_LNK@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n SHELL = @SHELL@\n@@ -777,7 +807,9 @@ dbexecdir = @dbexecdir@\n exec_prefix = @exec_prefix@\n extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n-extra_ldflags_libjava = @extra_ldflags_libjava@ $(am__append_5)\n+extra_ldflags_libjava = @extra_ldflags_libjava@ $(am__append_6)\n+gcc_suffix = @gcc_suffix@\n+gcjsubdir = @gcjsubdir@\n gxx_include_dir = @gxx_include_dir@\n here = @here@\n host = @host@\n@@ -802,6 +834,8 @@ multi_basedir = @multi_basedir@\n oldincludedir = @oldincludedir@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n+python_mod_dir = @python_mod_dir@\n+python_mod_dir_expanded = @python_mod_dir_expanded@\n sbindir = @sbindir@\n sharedstatedir = @sharedstatedir@\n subdirs = @subdirs@\n@@ -858,9 +892,10 @@ jar_DATA = libgcj-$(gcc_version).jar libgcj-tools-$(gcc_version).jar \\\n @JAVA_HOME_SET_FALSE@BOOT_CLASS_PATH_DIR = $(jardir)/libgcj-$(gcc_version).jar\n @JAVA_HOME_SET_TRUE@BOOT_CLASS_PATH_DIR = $(JAVA_HOME)/lib/rt.jar\n db_name = classmap.db\n-db_pathtail = gcj-$(gcc_version)/$(db_name)\n+db_pathtail = $(gcjsubdir)/$(db_name)\n @NATIVE_TRUE@dbexec_DATA = $(db_name)\n-bin_SCRIPTS = addr2name.awk\n+bin_SCRIPTS = addr2name.awk contrib/rebuild-gcj-db contrib/aot-compile \\\n+\t$(am__append_5)\n GCJ_WITH_FLAGS = $(GCJ) --encoding=UTF-8 -Wno-deprecated\n GCJLINK = $(LIBTOOL) --tag=GCJ --mode=link $(GCJ) -L$(here) $(JC1FLAGS) \\\n           $(LDFLAGS) -o $@\n@@ -898,7 +933,7 @@ AM_GCJFLAGS = \\\n \t--encoding=UTF-8 \\\n \t-Wno-deprecated -fbootstrap-classes\n \n-AM_CFLAGS = @LIBGCJ_CFLAGS@ $(am__append_6)\n+AM_CFLAGS = @LIBGCJ_CFLAGS@ $(am__append_7)\n @SUPPRESS_LIBGCJ_BC_FALSE@LIBGCJ_BC_FLAGS = -findirect-dispatch -fno-indirect-classes\n @SUPPRESS_LIBGCJ_BC_TRUE@LIBGCJ_BC_FLAGS = \n PEDANTIC_CFLAGS = -ansi -pedantic -Wall -Wno-long-long\n@@ -923,9 +958,9 @@ libgij_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n @INTERPRETER_TRUE@libgcj_interpret_source_files = jvmti.cc interpret.cc\n libgcj_la_SOURCES = prims.cc jni.cc exception.cc stacktrace.cc link.cc \\\n \tdefineclass.cc verify.cc $(libgcj_interpret_source_files) \\\n-\t$(nat_source_files) $(am__append_7) $(am__append_8) \\\n-\t$(am__append_9) $(am__append_10) $(am__append_11) \\\n-\t$(am__append_12) $(am__append_13) $(am__append_14)\n+\t$(nat_source_files) $(am__append_8) $(am__append_9) \\\n+\t$(am__append_10) $(am__append_11) $(am__append_12) \\\n+\t$(am__append_13) $(am__append_14) $(am__append_15)\n nat_files = $(nat_source_files:.cc=.lo)\n xlib_nat_files = $(xlib_nat_source_files:.cc=.lo)\n \n@@ -949,7 +984,7 @@ libgcj_la_LIBADD = \\\n libgcj_la_DEPENDENCIES = libgcj-$(gcc_version).jar java/lang/Object.lo \\\n \tjava/lang/Class.lo java/process-$(PLATFORM).lo \\\n \t$(all_packages_source_files:.list=.lo) $(LIBLTDL) \\\n-\t$(libgcj_la_LIBADD) $(am__append_15)\n+\t$(libgcj_la_LIBADD) $(am__append_16)\n libgcj_la_LINK = $(LIBLINK)\n EXTRA_libgcj_la_SOURCES = java/lang/Object.java\n libgcj_tools_la_SOURCES = classpath/tools/tools.zip\n@@ -8192,7 +8227,7 @@ ECJX_BASE_FLAGS = -findirect-dispatch \\\n @NATIVE_TRUE@ecjx_LDADD = -L$(here)/.libs libgcj.la\n @NATIVE_FALSE@ecjx_DEPENDENCIES = \n @NATIVE_TRUE@ecjx_DEPENDENCIES = libgcj.la libgcj.spec \\\n-@NATIVE_TRUE@\t$(am__append_16)\n+@NATIVE_TRUE@\t$(am__append_17)\n gappletviewer_SOURCES = \n gappletviewer_LDFLAGS = --main=gnu.classpath.tools.appletviewer.Main \\\n \t-rpath $(toolexeclibdir) -shared-libgcc $(THREADLDFLAGS) $(extra_ldflags)\n@@ -8401,7 +8436,7 @@ gnu/gcj/xlib/natXImage.cc \\\n gnu/gcj/xlib/natXUnmapEvent.cc\n \n sourcesdir = $(jardir)\n-headers_to_make = $(nat_headers) $(am__append_17)\n+headers_to_make = $(nat_headers) $(am__append_18)\n \n # Work around what appears to be a GNU make bug handling MAKEFLAGS\n # values defined in terms of make variables, as is the case for CC and\n@@ -8500,6 +8535,14 @@ libgcj.spec: $(top_builddir)/config.status $(srcdir)/libgcj.spec.in\n \tcd $(top_builddir) && $(SHELL) ./config.status $@\n libgcj-test.spec: $(top_builddir)/config.status $(srcdir)/libgcj-test.spec.in\n \tcd $(top_builddir) && $(SHELL) ./config.status $@\n+contrib/aotcompile.py: $(top_builddir)/config.status $(top_srcdir)/contrib/aotcompile.py.in\n+\tcd $(top_builddir) && $(SHELL) ./config.status $@\n+contrib/aot-compile: $(top_builddir)/config.status $(top_srcdir)/contrib/aot-compile.in\n+\tcd $(top_builddir) && $(SHELL) ./config.status $@\n+contrib/aot-compile-rpm: $(top_builddir)/config.status $(top_srcdir)/contrib/aot-compile-rpm.in\n+\tcd $(top_builddir) && $(SHELL) ./config.status $@\n+contrib/rebuild-gcj-db: $(top_builddir)/config.status $(top_srcdir)/contrib/rebuild-gcj-db.in\n+\tcd $(top_builddir) && $(SHELL) ./config.status $@\n scripts/jar: $(top_builddir)/config.status $(top_srcdir)/scripts/jar.in\n \tcd $(top_builddir) && $(SHELL) ./config.status $@\n install-dbexecLTLIBRARIES: $(dbexec_LTLIBRARIES)\n@@ -9972,7 +10015,7 @@ distclean-tags:\n distdir: $(DISTFILES)\n \t$(am__remove_distdir)\n \tmkdir $(distdir)\n-\t$(mkdir_p) $(distdir)/. $(distdir)/.. $(distdir)/../config $(distdir)/libltdl $(distdir)/scripts\n+\t$(mkdir_p) $(distdir)/. $(distdir)/.. $(distdir)/../config $(distdir)/contrib $(distdir)/libltdl $(distdir)/scripts\n \t@srcdirstrip=`echo \"$(srcdir)\" | sed 's|.|.|g'`; \\\n \ttopsrcdirstrip=`echo \"$(top_srcdir)\" | sed 's|.|.|g'`; \\\n \tlist='$(DISTFILES)'; for file in $$list; do \\\n@@ -12189,6 +12232,136 @@ install-data-local:\n \t$(INSTALL_DATA) $(srcdir)/'gnu/java/net/PlainSocketImpl$$SocketOutputStream.h' $(DESTDIR)$(gxx_include_dir)/gnu/java/net/\n \t$(INSTALL_DATA) $(srcdir)/'gnu/java/nio/PipeImpl$$SinkChannelImpl.h' $(DESTDIR)$(gxx_include_dir)/gnu/java/nio/\n \t$(INSTALL_DATA) $(srcdir)/'gnu/java/nio/PipeImpl$$SourceChannelImpl.h' $(DESTDIR)$(gxx_include_dir)/gnu/java/nio/\n+\t$(mkinstalldirs) $(DESTDIR)$(python_mod_dir); \\\n+\t$(INSTALL_DATA) $(srcdir)/contrib/classfile.py \\\n+\t  $(DESTDIR)$(python_mod_dir)/classfile.py; \\\n+\t$(INSTALL_DATA) contrib/aotcompile.py \\\n+\t  $(DESTDIR)$(python_mod_dir)/aotcompile.py;\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(JRE_BIN_DIR)\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(SDK_BIN_DIR)\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(SDK_INCLUDE_DIR)\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(SDK_INCLUDE_DIR)/$(OS)\n+@CREATE_JAVA_HOME_TRUE@\trelative() { \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(PERL) -e 'use File::Spec; \\\n+@CREATE_JAVA_HOME_TRUE@\t    print File::Spec->abs2rel($$ARGV[0], $$ARGV[1])' $$1 $$2; \\\n+@CREATE_JAVA_HOME_TRUE@\t}; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(bindir) $(DESTDIR)$(SDK_BIN_DIR)); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gij | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/java; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gjar | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/jar; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gjdoc | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/javadoc; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo grmic | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/rmic; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gjavah | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/javah; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/ecj $(DESTDIR)$(SDK_BIN_DIR)/javac; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gappletviewer | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/appletviewer; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gjarsigner | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/jarsigner; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo grmiregistry | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/rmiregistry; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gkeytool | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/keytool; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gorbd | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/orbd; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gnative2ascii | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/native2ascii; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo grmid | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/rmid; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gtnameserv | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/tnameserv; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gserialver | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_BIN_DIR)/serialver; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(bindir) $(DESTDIR)$(JRE_BIN_DIR)); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo grmiregistry | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_BIN_DIR)/rmiregistry; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gkeytool | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_BIN_DIR)/keytool; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gij | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_BIN_DIR)/java; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gorbd | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_BIN_DIR)/orbd; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo grmid | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_BIN_DIR)/rmid; \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/`echo gtnameserv | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'` \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_BIN_DIR)/tnameserv; \\\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(JVM_JAR_DIR); \\\n+@CREATE_JAVA_HOME_TRUE@\tversion=$(JAVA_VERSION).$(BUILD_VERSION); \\\n+@CREATE_JAVA_HOME_TRUE@\tworking_dir=`pwd`; \\\n+@CREATE_JAVA_HOME_TRUE@\tcd $(DESTDIR)$(JVM_JAR_DIR); \\\n+@CREATE_JAVA_HOME_TRUE@\t  for jarname in jaas jce jdbc-stdext jndi jndi-cos jndi-dns \\\n+@CREATE_JAVA_HOME_TRUE@\t    jndi-ldap jndi-rmi jsse sasl; \\\n+@CREATE_JAVA_HOME_TRUE@\t  do \\\n+@CREATE_JAVA_HOME_TRUE@\t    ln -s $$RELATIVE/$$jarname.jar $$jarname-$$version.jar; \\\n+@CREATE_JAVA_HOME_TRUE@\t  done; \\\n+@CREATE_JAVA_HOME_TRUE@\t  for jar in *-$$version.jar; \\\n+@CREATE_JAVA_HOME_TRUE@\t  do \\\n+@CREATE_JAVA_HOME_TRUE@\t    ln -sf $$jar $$(echo $$jar | sed \"s|-$$version.jar|-$(JAVA_VERSION).jar|g\"); \\\n+@CREATE_JAVA_HOME_TRUE@\t    ln -sf $$jar $$(echo $$jar | sed \"s|-$$version.jar|.jar|g\"); \\\n+@CREATE_JAVA_HOME_TRUE@\t  done; \\\n+@CREATE_JAVA_HOME_TRUE@\tcd $$working_dir; \\\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/security; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(libdir)/security \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/security); \\\n+@CREATE_JAVA_HOME_TRUE@\tcd $(DESTDIR)$(JRE_LIB_DIR)/security; \\\n+@CREATE_JAVA_HOME_TRUE@\t  ln -sf $$RELATIVE/classpath.security java.security; \\\n+@CREATE_JAVA_HOME_TRUE@\tcd $$working_dir; \\\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(SDK_INCLUDE_DIR)/linux; \\\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/client; \\\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/server; \\\n+@CREATE_JAVA_HOME_TRUE@\t$(mkinstalldirs) $(DESTDIR)$(SDK_LIB_DIR); \\\n+@CREATE_JAVA_HOME_TRUE@\tcd $(DESTDIR)$(JRE_LIB_DIR); \\\n+@CREATE_JAVA_HOME_TRUE@\t  for jarname in jaas jce jdbc-stdext jndi jndi-cos jndi-dns \\\n+@CREATE_JAVA_HOME_TRUE@\t    jndi-ldap jndi-rmi jsse sasl; \\\n+@CREATE_JAVA_HOME_TRUE@\t  do \\\n+@CREATE_JAVA_HOME_TRUE@\t    ln -s rt.jar $$jarname.jar; \\\n+@CREATE_JAVA_HOME_TRUE@\t  done; \\\n+@CREATE_JAVA_HOME_TRUE@\tcd $$working_dir; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(datarootdir)/java \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/libgcj-$(gcc_version).jar \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/rt.jar; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(dbexecdir) \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/libjawt.so \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/libjawt.so; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(dbexecdir) \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/client); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/libjvm.so \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/client/libjvm.so; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(dbexecdir) \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/server); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/libjvm.so \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JRE_LIB_DIR)/$(CPU)/server/libjvm.so;\t\\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(datarootdir)/java \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_LIB_DIR)); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/libgcj-tools-$(gcc_version).jar \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(SDK_LIB_DIR)/tools.jar; \\\n+@CREATE_JAVA_HOME_TRUE@\tfor headername in jawt jni; do \\\n+@CREATE_JAVA_HOME_TRUE@\t  DIRECTORY=$$(dirname $$($(DESTDIR)$(bindir)/gcj \\\n+@CREATE_JAVA_HOME_TRUE@\t    -print-file-name=include/$$headername.h)); \\\n+@CREATE_JAVA_HOME_TRUE@\t  RELATIVE=$$(relative $(DESTDIR)$$DIRECTORY \\\n+@CREATE_JAVA_HOME_TRUE@\t    $(DESTDIR)$(SDK_INCLUDE_DIR)); \\\n+@CREATE_JAVA_HOME_TRUE@\t  ln -sf $$RELATIVE/$$headername.h \\\n+@CREATE_JAVA_HOME_TRUE@\t    $(DESTDIR)$(SDK_INCLUDE_DIR)/$$headername.h; \\\n+@CREATE_JAVA_HOME_TRUE@\tdone; \\\n+@CREATE_JAVA_HOME_TRUE@\tfor headername in jawt_md jni_md; do \\\n+@CREATE_JAVA_HOME_TRUE@\t  DIRECTORY=$$(dirname $$($(DESTDIR)$(bindir)/gcj \\\n+@CREATE_JAVA_HOME_TRUE@\t    -print-file-name=include/$$headername.h)); \\\n+@CREATE_JAVA_HOME_TRUE@\t  RELATIVE=$$(relative $(DESTDIR)$$DIRECTORY \\\n+@CREATE_JAVA_HOME_TRUE@\t    $(DESTDIR)$(SDK_INCLUDE_DIR)/linux); \\\n+@CREATE_JAVA_HOME_TRUE@\t  ln -sf $$RELATIVE/$$headername.h \\\n+@CREATE_JAVA_HOME_TRUE@\t    $(DESTDIR)$(SDK_INCLUDE_DIR)/linux/$$headername.h; \\\n+@CREATE_JAVA_HOME_TRUE@\tdone; \\\n+@CREATE_JAVA_HOME_TRUE@\tRELATIVE=$$(relative $(DESTDIR)$(datarootdir)/java \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JVM_ROOT_DIR)/$(SDK_DIR)); \\\n+@CREATE_JAVA_HOME_TRUE@\tln -sf $$RELATIVE/src-$(gcc_version).zip \\\n+@CREATE_JAVA_HOME_TRUE@\t  $(DESTDIR)$(JVM_ROOT_DIR)/$(SDK_DIR)/src.zip;\n \n maintainer-check: libgcj.la\n \t$(NM) .libs/libgcj.a | grep ' T ' \\"}, {"sha": "3547e9d1601aa0e44b219ebd314413b729664272", "filename": "libjava/configure", "status": "modified", "additions": 371, "deletions": 31, "changes": 402, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -459,7 +459,7 @@ ac_includes_default=\"\\\n #endif\"\n \n ac_subdirs_all=\"$ac_subdirs_all classpath libltdl\"\n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_libsubdir build_subdir host_subdir target_subdir multi_basedir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S mkinstalldirs JAVA_MAINTAINER_MODE_TRUE JAVA_MAINTAINER_MODE_FALSE CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LDFLAGS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE AS ac_ct_AS LD ac_ct_LD AR ac_ct_AR RANLIB ac_ct_RANLIB JAR ZIP UNZIP MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBGCJ_CFLAGS LIBGCJ_CXXFLAGS LIBGCJ_JAVAFLAGS LIBGCJ_LD_SYMBOLIC LIBGCJ_LD_SYMBOLIC_FUNCTIONS LIBGCJDEBUG TOOLKIT XLIB_AWT_TRUE XLIB_AWT_FALSE X_AWT_TRUE X_AWT_FALSE GCJ_FOR_ECJX GCJH host_exeext INCLTDL LIBLTDL DIRLTDL LIBTOOL SED EGREP FGREP GREP DUMPBIN ac_ct_DUMPBIN NM lt_ECHO CPP CPPFLAGS CXXCPP GCJ GCJFLAGS GCJDEPMODE am__fastdepGCJ_TRUE am__fastdepGCJ_FALSE subdirs TESTSUBDIR_TRUE TESTSUBDIR_FALSE ECJ_BUILD_JAR ECJ_JAR BUILD_ECJ1_TRUE BUILD_ECJ1_FALSE INSTALL_ECJ_JAR_TRUE INSTALL_ECJ_JAR_FALSE JAVA_HOME_SET_TRUE JAVA_HOME_SET_FALSE JAVA_HOME SUPPRESS_LIBGCJ_BC_TRUE SUPPRESS_LIBGCJ_BC_FALSE INTERPRETER INTERPRETER_TRUE INTERPRETER_FALSE LIBFFI LIBFFIINCS PLATFORM USING_WIN32_PLATFORM_TRUE USING_WIN32_PLATFORM_FALSE USING_POSIX_PLATFORM_TRUE USING_POSIX_PLATFORM_FALSE USING_DARWIN_CRT_TRUE USING_DARWIN_CRT_FALSE SYSTEMSPEC ZLIBSPEC ZLIBTESTSPEC X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS extra_ldflags_libjava extra_gij_ldflags extra_ldflags LIBSTDCXXSPEC LIBGCJTESTSPEC GCLIBS GCINCS GCDEPS GCSPEC JC1GCSPEC GCTESTSPEC USING_BOEHMGC_TRUE USING_BOEHMGC_FALSE USING_NOGC_TRUE USING_NOGC_FALSE THREADLIBS THREADINCS THREADDEPS THREADSPEC THREADSTARTFILESPEC THREADLDFLAGS THREADCXXFLAGS USING_POSIX_THREADS_TRUE USING_POSIX_THREADS_FALSE USING_WIN32_THREADS_TRUE USING_WIN32_THREADS_FALSE USING_NO_THREADS_TRUE USING_NO_THREADS_FALSE USE_LIBGCJ_BC_TRUE USE_LIBGCJ_BC_FALSE LIBGCJ_SPEC HASH_SYNC_SPEC USING_GCC_TRUE USING_GCC_FALSE LIBICONV LTLIBICONV PKG_CONFIG GTK_CFLAGS GTK_LIBS GLIB_CFLAGS GLIB_LIBS LIBART_CFLAGS LIBART_LIBS CLASSPATH_SEPARATOR ZLIBS SYS_ZLIBS ZINCS DIVIDESPEC CHECKREFSPEC EXCEPTIONSPEC BACKTRACESPEC IEEESPEC NATIVE_TRUE NATIVE_FALSE ENABLE_SHARED_TRUE ENABLE_SHARED_FALSE NEEDS_DATA_START_TRUE NEEDS_DATA_START_FALSE GCC_UNWIND_INCLUDE toolexecdir toolexecmainlibdir toolexeclibdir GCJVERSION dbexecdir gxx_include_dir libstdcxx_incdir PERL SYSDEP_SOURCES ANONVERSCRIPT_TRUE ANONVERSCRIPT_FALSE LD_START_STATIC_SPEC LD_FINISH_STATIC_SPEC here LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_libsubdir build_subdir host_subdir target_subdir multi_basedir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S mkinstalldirs JAVA_MAINTAINER_MODE_TRUE JAVA_MAINTAINER_MODE_FALSE CC ac_ct_CC EXEEXT OBJEXT CXX ac_ct_CXX CFLAGS CXXFLAGS LDFLAGS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE AS ac_ct_AS LD ac_ct_LD AR ac_ct_AR RANLIB ac_ct_RANLIB JAR ZIP UNZIP MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LIBGCJ_CFLAGS LIBGCJ_CXXFLAGS LIBGCJ_JAVAFLAGS LIBGCJ_LD_SYMBOLIC LIBGCJ_LD_SYMBOLIC_FUNCTIONS LIBGCJDEBUG TOOLKIT XLIB_AWT_TRUE XLIB_AWT_FALSE X_AWT_TRUE X_AWT_FALSE GCJ_FOR_ECJX GCJH host_exeext INCLTDL LIBLTDL DIRLTDL LIBTOOL SED EGREP FGREP GREP DUMPBIN ac_ct_DUMPBIN NM lt_ECHO CPP CPPFLAGS CXXCPP GCJ GCJFLAGS GCJDEPMODE am__fastdepGCJ_TRUE am__fastdepGCJ_FALSE subdirs TESTSUBDIR_TRUE TESTSUBDIR_FALSE ECJ_BUILD_JAR ECJ_JAR BUILD_ECJ1_TRUE BUILD_ECJ1_FALSE INSTALL_ECJ_JAR_TRUE INSTALL_ECJ_JAR_FALSE JAVA_HOME_SET_TRUE JAVA_HOME_SET_FALSE JAVA_HOME SUPPRESS_LIBGCJ_BC_TRUE SUPPRESS_LIBGCJ_BC_FALSE INTERPRETER INTERPRETER_TRUE INTERPRETER_FALSE LIBFFI LIBFFIINCS PLATFORM USING_WIN32_PLATFORM_TRUE USING_WIN32_PLATFORM_FALSE USING_POSIX_PLATFORM_TRUE USING_POSIX_PLATFORM_FALSE USING_DARWIN_CRT_TRUE USING_DARWIN_CRT_FALSE SYSTEMSPEC ZLIBSPEC ZLIBTESTSPEC X_CFLAGS X_PRE_LIBS X_LIBS X_EXTRA_LIBS extra_ldflags_libjava extra_gij_ldflags extra_ldflags LIBSTDCXXSPEC LIBGCJTESTSPEC GCLIBS GCINCS GCDEPS GCSPEC JC1GCSPEC GCTESTSPEC USING_BOEHMGC_TRUE USING_BOEHMGC_FALSE USING_NOGC_TRUE USING_NOGC_FALSE THREADLIBS THREADINCS THREADDEPS THREADSPEC THREADSTARTFILESPEC THREADLDFLAGS THREADCXXFLAGS USING_POSIX_THREADS_TRUE USING_POSIX_THREADS_FALSE USING_WIN32_THREADS_TRUE USING_WIN32_THREADS_FALSE USING_NO_THREADS_TRUE USING_NO_THREADS_FALSE USE_LIBGCJ_BC_TRUE USE_LIBGCJ_BC_FALSE LIBGCJ_SPEC HASH_SYNC_SPEC USING_GCC_TRUE USING_GCC_FALSE LIBICONV LTLIBICONV PKG_CONFIG GTK_CFLAGS GTK_LIBS GLIB_CFLAGS GLIB_LIBS LIBART_CFLAGS LIBART_LIBS CLASSPATH_SEPARATOR ZLIBS SYS_ZLIBS ZINCS DIVIDESPEC CHECKREFSPEC EXCEPTIONSPEC BACKTRACESPEC IEEESPEC NATIVE_TRUE NATIVE_FALSE ENABLE_SHARED_TRUE ENABLE_SHARED_FALSE NEEDS_DATA_START_TRUE NEEDS_DATA_START_FALSE GCC_UNWIND_INCLUDE toolexecdir toolexecmainlibdir toolexeclibdir GCJVERSION dbexecdir gcjsubdir gxx_include_dir libstdcxx_incdir PERL SYSDEP_SOURCES ANONVERSCRIPT_TRUE ANONVERSCRIPT_FALSE LD_START_STATIC_SPEC LD_FINISH_STATIC_SPEC here python_mod_dir python_mod_dir_expanded MAKE INSTALL_AOT_RPM_TRUE INSTALL_AOT_RPM_FALSE CREATE_JAVA_HOME_TRUE CREATE_JAVA_HOME_FALSE gcc_suffix JAVA_VERSION BUILD_VERSION JVM_ROOT_DIR JVM_JAR_ROOT_DIR JVM_JAR_DIR JRE_DIR SDK_DIR JRE_LNK SDK_LNK SDK_BIN_DIR SDK_LIB_DIR SDK_INCLUDE_DIR JRE_BIN_DIR JRE_LIB_DIR GCJ_BIN_DIR CPU OS LIBDIR LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n ac_pwd=`pwd`\n \n@@ -1047,6 +1047,10 @@ Optional Features:\n   --enable-java-gc=TYPE   choose garbage collector (default is boehm)\n   --disable-rpath         do not hardcode runtime library paths\n   --enable-tls            Use thread-local storage [default=yes]\n+  --enable-aot-compile-rpm\n+                          enable installation of aot-compile-rpm [default=no]\n+  --enable-java-home      create a standard JDK-style directory layout in the\n+                          install tree [default=no]\n \n Optional Packages:\n   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]\n@@ -1072,6 +1076,20 @@ Optional Packages:\n   --with-gnu-ld           assume the C compiler uses GNU ld default=no\n   --with-libiconv-prefix[=DIR]  search for libiconv in DIR/include and DIR/lib\n   --without-libiconv-prefix     don't search for libiconv in includedir and libdir\n+  --with-python-dir       the location to install Python modules. This path\n+                          should NOT include the prefix.\n+  --with-gcc-suffix       the GCC tool suffix (defaults to empty string)\n+  --with-arch-directory   the arch directory under jre/lib (defaults to\n+                          auto-detect)\n+  --with-os-directory     the os directory under include (defaults to\n+                          auto-detect)\n+  --with-origin-name      the JPackage origin name of this package (default is\n+                          gcj${gcc_suffix}\n+  --with-arch-suffix      the arch directory suffix (default is the empty\n+                          string\n+  --with-jvm-root-dir     where to install SDK (default is ${prefix}/lib/jvm)\n+  --with-jvm-jar-dir      where to install jars (default is\n+                          ${prefix}/lib/jvm-exports)\n \n Some influential environment variables:\n   CC          C compiler command\n@@ -6003,13 +6021,13 @@ if test \"${lt_cv_nm_interface+set}\" = set; then\n else\n   lt_cv_nm_interface=\"BSD nm\"\n   echo \"int some_variable = 0;\" > conftest.$ac_ext\n-  (eval echo \"\\\"\\$as_me:6006: $ac_compile\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:6024: $ac_compile\\\"\" >&5)\n   (eval \"$ac_compile\" 2>conftest.err)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:6009: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:6027: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n   (eval \"$NM \\\"conftest.$ac_objext\\\"\" 2>conftest.err > conftest.out)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:6012: output\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:6030: output\\\"\" >&5)\n   cat conftest.out >&5\n   if $GREP 'External.*some_variable' conftest.out > /dev/null; then\n     lt_cv_nm_interface=\"MS dumpbin\"\n@@ -7053,7 +7071,7 @@ ia64-*-hpux*)\n   ;;\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 7056 \"configure\"' > conftest.$ac_ext\n+  echo '#line 7074 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -8754,11 +8772,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:8757: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:8775: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:8761: \\$? = $ac_status\" >&5\n+   echo \"$as_me:8779: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -9076,11 +9094,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:9079: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:9097: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:9083: \\$? = $ac_status\" >&5\n+   echo \"$as_me:9101: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -9181,11 +9199,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:9184: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:9202: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:9188: \\$? = $ac_status\" >&5\n+   echo \"$as_me:9206: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -9236,11 +9254,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:9239: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:9257: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:9243: \\$? = $ac_status\" >&5\n+   echo \"$as_me:9261: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -12088,7 +12106,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12091 \"configure\"\n+#line 12109 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12188,7 +12206,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12191 \"configure\"\n+#line 12209 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -14226,11 +14244,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:14229: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:14247: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:14233: \\$? = $ac_status\" >&5\n+   echo \"$as_me:14251: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -14325,11 +14343,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:14328: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:14346: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:14332: \\$? = $ac_status\" >&5\n+   echo \"$as_me:14350: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -14377,11 +14395,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:14380: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:14398: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:14384: \\$? = $ac_status\" >&5\n+   echo \"$as_me:14402: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -15765,11 +15783,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:15768: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:15786: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:15772: \\$? = $ac_status\" >&5\n+   echo \"$as_me:15790: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -16081,11 +16099,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:16084: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:16102: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:16088: \\$? = $ac_status\" >&5\n+   echo \"$as_me:16106: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -16180,11 +16198,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:16183: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:16201: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:16187: \\$? = $ac_status\" >&5\n+   echo \"$as_me:16205: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -16232,11 +16250,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:16235: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:16253: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:16239: \\$? = $ac_status\" >&5\n+   echo \"$as_me:16257: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -18588,7 +18606,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then\n   :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 18591 \"configure\"\n+#line 18609 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -26299,6 +26317,7 @@ esac\n \n \n \n+\n cat >>confdefs.h <<\\_ACEOF\n #define JV_VERSION \"1.5.0\"\n _ACEOF\n@@ -27872,7 +27891,283 @@ here=`${PWDCMD-pwd}`\n # We get this from the environment.\n \n \n-                                                                      ac_config_files=\"$ac_config_files Makefile libgcj.pc libgcj.spec libgcj-test.spec gcj/Makefile include/Makefile testsuite/Makefile\"\n+\n+# Check whether --with-python-dir or --without-python-dir was given.\n+if test \"${with_python_dir+set}\" = set; then\n+  withval=\"$with_python_dir\"\n+  with_python_dir=$withval\n+else\n+  with_python_dir=\"\"\n+fi;\n+\n+if test \"x${with_python_dir}\" = \"x\"\n+then\n+  # Needed for installing Python modules during make install.\n+  python_mod_dir=\"\\${prefix}/share/python\"\n+  # Needed for substituting into aot-compile*\n+  python_mod_dir_expanded=\"${prefix}/share/python\"\n+else\n+  python_mod_dir=\"\\${prefix}${with_python_dir}\"\n+  python_mod_dir_expanded=\"${prefix}${with_python_dir}\"\n+fi\n+echo \"$as_me:$LINENO: result: Python modules dir: ${python_mod_dir_expanded}\" >&5\n+echo \"${ECHO_T}Python modules dir: ${python_mod_dir_expanded}\" >&6;\n+\n+\n+\n+# needed for aot-compile-rpm\n+MAKE=`which make`\n+\n+\n+# Check whether --enable-aot-compile-rpm or --disable-aot-compile-rpm was given.\n+if test \"${enable_aot_compile_rpm+set}\" = set; then\n+  enableval=\"$enable_aot_compile_rpm\"\n+  case \"${enableval}\" in\n+    yes) AOT_RPM_ENABLED=yes ;;\n+    no)  AOT_RPM_ENABLED=no ;;\n+    *)   { { echo \"$as_me:$LINENO: error: Unknown argument to enable/disable aot-compile-rpm\" >&5\n+echo \"$as_me: error: Unknown argument to enable/disable aot-compile-rpm\" >&2;}\n+   { (exit 1); exit 1; }; } ;;\n+  esac\n+else\n+  AOT_RPM_ENABLED=no\n+\n+fi;\n+\n+\n+if test \"x${AOT_RPM_ENABLED}\" == xyes; then\n+  INSTALL_AOT_RPM_TRUE=\n+  INSTALL_AOT_RPM_FALSE='#'\n+else\n+  INSTALL_AOT_RPM_TRUE='#'\n+  INSTALL_AOT_RPM_FALSE=\n+fi\n+\n+\n+# Check whether --enable-java-home or --disable-java-home was given.\n+if test \"${enable_java_home+set}\" = set; then\n+  enableval=\"$enable_java_home\"\n+  case \"${enableval}\" in\n+    yes) JAVA_HOME_ENABLED=yes ;;\n+    no)  JAVA_HOME_ENABLED=no ;;\n+    *)   { { echo \"$as_me:$LINENO: error: Unknown argument to enable/disable java-home\" >&5\n+echo \"$as_me: error: Unknown argument to enable/disable java-home\" >&2;}\n+   { (exit 1); exit 1; }; } ;;\n+  esac\n+else\n+  JAVA_HOME_ENABLED=no\n+\n+fi;\n+\n+\n+if test \"x${JAVA_HOME_ENABLED}\" == xyes; then\n+  CREATE_JAVA_HOME_TRUE=\n+  CREATE_JAVA_HOME_FALSE='#'\n+else\n+  CREATE_JAVA_HOME_TRUE='#'\n+  CREATE_JAVA_HOME_FALSE=\n+fi\n+\n+\n+# Only do these checks if java-home above is enabled.\n+if test \"x${JAVA_HOME_ENABLED}\" == xyes\n+then\n+\n+\n+# Check whether --with-gcc-suffix or --without-gcc-suffix was given.\n+if test \"${with_gcc_suffix+set}\" = set; then\n+  withval=\"$with_gcc_suffix\"\n+  gcc_suffix=$withval\n+else\n+  gcc_suffix=\"\"\n+fi;\n+  echo \"$as_me:$LINENO: result: GCC suffix: ${gcc_suffix}\" >&5\n+echo \"${ECHO_T}GCC suffix: ${gcc_suffix}\" >&6\n+\n+\n+\n+# Check whether --with-arch-directory or --without-arch-directory was given.\n+if test \"${with_arch_directory+set}\" = set; then\n+  withval=\"$with_arch_directory\"\n+  host_cpu=$withval\n+else\n+  host_cpu=\"\"\n+fi;\n+\n+\n+# Check whether --with-os-directory or --without-os-directory was given.\n+if test \"${with_os_directory+set}\" = set; then\n+  withval=\"$with_os_directory\"\n+  host_os=$withval\n+else\n+  host_os=\"\"\n+fi;\n+\n+\n+# Check whether --with-origin-name or --without-origin-name was given.\n+if test \"${with_origin_name+set}\" = set; then\n+  withval=\"$with_origin_name\"\n+  origin_name=$withval\n+else\n+  origin_name=gcj${gcc_suffix}\n+fi;\n+  echo \"$as_me:$LINENO: result: JPackage origin name: ${origin_name}\" >&5\n+echo \"${ECHO_T}JPackage origin name: ${origin_name}\" >&6\n+\n+\n+# Check whether --with-arch-suffix or --without-arch-suffix was given.\n+if test \"${with_arch_suffix+set}\" = set; then\n+  withval=\"$with_arch_suffix\"\n+  arch_suffix=$withval\n+else\n+  arch_suffix=\"\"\n+fi;\n+  echo \"$as_me:$LINENO: result: arch suffix: ${arch_suffix}\" >&5\n+echo \"${ECHO_T}arch suffix: ${arch_suffix}\" >&6\n+\n+\n+# Check whether --with-jvm-root-dir or --without-jvm-root-dir was given.\n+if test \"${with_jvm_root_dir+set}\" = set; then\n+  withval=\"$with_jvm_root_dir\"\n+  jvm_root_dir=$withval\n+else\n+  jvm_root_dir=\"\\${prefix}/lib/jvm\"\n+fi;\n+  echo \"$as_me:$LINENO: result: JVM root installation directory: ${jvm_root_dir}\" >&5\n+echo \"${ECHO_T}JVM root installation directory: ${jvm_root_dir}\" >&6\n+\n+\n+# Check whether --with-jvm-jar-dir or --without-jvm-jar-dir was given.\n+if test \"${with_jvm_jar_dir+set}\" = set; then\n+  withval=\"$with_jvm_jar_dir\"\n+  jvm_jar_dir=$withval\n+else\n+  jvm_jar_dir=\\${prefix}/lib/jvm-exports\n+fi;\n+  echo \"$as_me:$LINENO: result: JAR root installation directory: ${jvm_jar_dir}\" >&5\n+echo \"${ECHO_T}JAR root installation directory: ${jvm_jar_dir}\" >&6\n+\n+  JAVA_VERSION=1.5.0\n+  BUILD_VERSION=0\n+\n+\n+  echo \"$as_me:$LINENO: result: Java version: ${JAVA_VERSION}\" >&5\n+echo \"${ECHO_T}Java version: ${JAVA_VERSION}\" >&6\n+\n+  jre_dir=java-${JAVA_VERSION}-${origin_name}-${JAVA_VERSION}.${BUILD_VERSION}${arch_suffix}/jre\n+  sdk_dir=java-${JAVA_VERSION}-${origin_name}-${JAVA_VERSION}.${BUILD_VERSION}${arch_suffix}\n+  jre_lnk=jre-${JAVA_VERSION}-${origin_name}\n+  sdk_lnk=java-${JAVA_VERSION}-${origin_name}\n+\n+  JVM_ROOT_DIR=${jvm_root_dir}\n+\n+  echo \"$as_me:$LINENO: result: JVM ROOT directory: ${JVM_ROOT_DIR}\" >&5\n+echo \"${ECHO_T}JVM ROOT directory: ${JVM_ROOT_DIR}\" >&6\n+\n+  JVM_JAR_ROOT_DIR=${jvm_jar_dir}\n+\n+  echo \"$as_me:$LINENO: result: JVM JAR ROOT directory: ${JVM_JAR_ROOT_DIR}\" >&5\n+echo \"${ECHO_T}JVM JAR ROOT directory: ${JVM_JAR_ROOT_DIR}\" >&6\n+\n+  JVM_JAR_DIR=${jvm_jar_dir}/${sdk_dir}\n+\n+  echo \"$as_me:$LINENO: result: JVM JAR directory: ${JVM_JAR_DIR}\" >&5\n+echo \"${ECHO_T}JVM JAR directory: ${JVM_JAR_DIR}\" >&6\n+\n+  JRE_DIR=${jre_dir}\n+\n+\n+  SDK_DIR=${sdk_dir}\n+\n+\n+  JRE_LNK=${jre_lnk}\n+\n+\n+  SDK_LNK=${sdk_lnk}\n+\n+\n+  SDK_BIN_DIR=${jvm_root_dir}/${sdk_dir}/bin\n+\n+  echo \"$as_me:$LINENO: result: SDK tools directory: ${SDK_BIN_DIR}\" >&5\n+echo \"${ECHO_T}SDK tools directory: ${SDK_BIN_DIR}\" >&6\n+\n+  SDK_LIB_DIR=${jvm_root_dir}/${sdk_dir}/lib\n+\n+  echo \"$as_me:$LINENO: result: SDK jar directory: ${SDK_LIB_DIR}\" >&5\n+echo \"${ECHO_T}SDK jar directory: ${SDK_LIB_DIR}\" >&6\n+\n+  SDK_INCLUDE_DIR=${jvm_root_dir}/${sdk_dir}/include\n+\n+  echo \"$as_me:$LINENO: result: SDK include directory: ${SDK_INCLUDE_DIR}\" >&5\n+echo \"${ECHO_T}SDK include directory: ${SDK_INCLUDE_DIR}\" >&6\n+\n+  JRE_BIN_DIR=${jvm_root_dir}/${jre_dir}/bin\n+\n+  echo \"$as_me:$LINENO: result: JRE tools directory: ${JRE_BIN_DIR}\" >&5\n+echo \"${ECHO_T}JRE tools directory: ${JRE_BIN_DIR}\" >&6\n+\n+  JRE_LIB_DIR=${jvm_root_dir}/${jre_dir}/lib\n+\n+  echo \"$as_me:$LINENO: result: JRE lib directory: ${JRE_LIB_DIR}\" >&5\n+echo \"${ECHO_T}JRE lib directory: ${JRE_LIB_DIR}\" >&6\n+\n+  # Find gcj prefix using gcj found in PATH.\n+  gcj_prefix=`which gcj${gcc_suffix} | sed \"s%/bin/gcj${gcc_suffix}%%\"`\n+\n+  # Where do the gcj binaries live?\n+  # For jhbuild based builds, they all live in a sibling of bin called\n+  # gcj-bin.  Check for gcj-bin first, and use bin otherwise.\n+  GCJ_BIN_DIR=`if test -d ${gcj_prefix}/gcj-bin; then echo ${gcj_prefix}/gcj-bin; else echo ${gcj_prefix}/bin; fi`\n+\n+  echo \"$as_me:$LINENO: result: GCJ tools directory: ${GCJ_BIN_DIR}\" >&5\n+echo \"${ECHO_T}GCJ tools directory: ${GCJ_BIN_DIR}\" >&6\n+\n+  echo host is ${host}\n+  if test \"x${host_cpu}\" = \"x\"\n+  then\n+    case ${host} in\n+      *-mingw* | *-cygwin*)\n+        host_cpu=x86;;\n+      i486-* | i586-* | i686-*)\n+        host_cpu=i386;;\n+      *)\n+        host_cpu=${host_cpu};;\n+    esac\n+  fi\n+  echo \"$as_me:$LINENO: result: arch directory: ${host_cpu}\" >&5\n+echo \"${ECHO_T}arch directory: ${host_cpu}\" >&6\n+  CPU=${host_cpu}\n+\n+\n+  if test \"x${host_os}\" = \"x\"\n+  then\n+    case ${host} in\n+      *-mingw* | *-cygwin*)\n+        host_os=win32;;\n+      *-linux*)\n+        host_os=linux;;\n+      *)\n+        host_os=${host_os};;\n+    esac\n+  fi\n+  echo os directory: ${host_os}\n+  OS=${host_os}\n+\n+\n+  # make an expanded $libdir, for substituting into\n+  # scripts (and other non-Makefile things).\n+  LIBDIR=$libdir\n+  if test \"x${exec_prefix}\" = \"xNONE\"\n+  then\n+      lib_exec_prefix=$prefix\n+  else\n+      lib_exec_prefix=$exec_prefix\n+  fi\n+  LIBDIR=`echo $libdir | sed \"s:\\\\\\${exec_prefix}:$lib_exec_prefix:g\"`\n+\n+fi\n+\n+                                                                                                              ac_config_files=\"$ac_config_files Makefile libgcj.pc libgcj.spec libgcj-test.spec gcj/Makefile include/Makefile testsuite/Makefile contrib/aotcompile.py contrib/aot-compile contrib/aot-compile-rpm contrib/rebuild-gcj-db\"\n \n \n if test ${multilib} = yes; then\n@@ -28184,6 +28479,20 @@ echo \"$as_me: error: conditional \\\"ANONVERSCRIPT\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" >&2;}\n    { (exit 1); exit 1; }; }\n fi\n+if test -z \"${INSTALL_AOT_RPM_TRUE}\" && test -z \"${INSTALL_AOT_RPM_FALSE}\"; then\n+  { { echo \"$as_me:$LINENO: error: conditional \\\"INSTALL_AOT_RPM\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" >&5\n+echo \"$as_me: error: conditional \\\"INSTALL_AOT_RPM\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+if test -z \"${CREATE_JAVA_HOME_TRUE}\" && test -z \"${CREATE_JAVA_HOME_FALSE}\"; then\n+  { { echo \"$as_me:$LINENO: error: conditional \\\"CREATE_JAVA_HOME\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" >&5\n+echo \"$as_me: error: conditional \\\"CREATE_JAVA_HOME\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n \n : ${CONFIG_STATUS=./config.status}\n ac_clean_files_save=$ac_clean_files\n@@ -29064,6 +29373,10 @@ do\n   \"gcj/Makefile\" ) CONFIG_FILES=\"$CONFIG_FILES gcj/Makefile\" ;;\n   \"include/Makefile\" ) CONFIG_FILES=\"$CONFIG_FILES include/Makefile\" ;;\n   \"testsuite/Makefile\" ) CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n+  \"contrib/aotcompile.py\" ) CONFIG_FILES=\"$CONFIG_FILES contrib/aotcompile.py\" ;;\n+  \"contrib/aot-compile\" ) CONFIG_FILES=\"$CONFIG_FILES contrib/aot-compile\" ;;\n+  \"contrib/aot-compile-rpm\" ) CONFIG_FILES=\"$CONFIG_FILES contrib/aot-compile-rpm\" ;;\n+  \"contrib/rebuild-gcj-db\" ) CONFIG_FILES=\"$CONFIG_FILES contrib/rebuild-gcj-db\" ;;\n   \"scripts/jar\" ) CONFIG_FILES=\"$CONFIG_FILES scripts/jar\" ;;\n   \"include/platform.h\" ) CONFIG_LINKS=\"$CONFIG_LINKS include/platform.h:include/$PLATFORMH\" ;;\n   \"java/io/natFile.cc\" ) CONFIG_LINKS=\"$CONFIG_LINKS java/io/natFile.cc:java/io/natFile${FILE-${PLATFORM}}.cc\" ;;\n@@ -29383,6 +29696,7 @@ s,@toolexecmainlibdir@,$toolexecmainlibdir,;t t\n s,@toolexeclibdir@,$toolexeclibdir,;t t\n s,@GCJVERSION@,$GCJVERSION,;t t\n s,@dbexecdir@,$dbexecdir,;t t\n+s,@gcjsubdir@,$gcjsubdir,;t t\n s,@gxx_include_dir@,$gxx_include_dir,;t t\n s,@libstdcxx_incdir@,$libstdcxx_incdir,;t t\n s,@PERL@,$PERL,;t t\n@@ -29392,6 +29706,32 @@ s,@ANONVERSCRIPT_FALSE@,$ANONVERSCRIPT_FALSE,;t t\n s,@LD_START_STATIC_SPEC@,$LD_START_STATIC_SPEC,;t t\n s,@LD_FINISH_STATIC_SPEC@,$LD_FINISH_STATIC_SPEC,;t t\n s,@here@,$here,;t t\n+s,@python_mod_dir@,$python_mod_dir,;t t\n+s,@python_mod_dir_expanded@,$python_mod_dir_expanded,;t t\n+s,@MAKE@,$MAKE,;t t\n+s,@INSTALL_AOT_RPM_TRUE@,$INSTALL_AOT_RPM_TRUE,;t t\n+s,@INSTALL_AOT_RPM_FALSE@,$INSTALL_AOT_RPM_FALSE,;t t\n+s,@CREATE_JAVA_HOME_TRUE@,$CREATE_JAVA_HOME_TRUE,;t t\n+s,@CREATE_JAVA_HOME_FALSE@,$CREATE_JAVA_HOME_FALSE,;t t\n+s,@gcc_suffix@,$gcc_suffix,;t t\n+s,@JAVA_VERSION@,$JAVA_VERSION,;t t\n+s,@BUILD_VERSION@,$BUILD_VERSION,;t t\n+s,@JVM_ROOT_DIR@,$JVM_ROOT_DIR,;t t\n+s,@JVM_JAR_ROOT_DIR@,$JVM_JAR_ROOT_DIR,;t t\n+s,@JVM_JAR_DIR@,$JVM_JAR_DIR,;t t\n+s,@JRE_DIR@,$JRE_DIR,;t t\n+s,@SDK_DIR@,$SDK_DIR,;t t\n+s,@JRE_LNK@,$JRE_LNK,;t t\n+s,@SDK_LNK@,$SDK_LNK,;t t\n+s,@SDK_BIN_DIR@,$SDK_BIN_DIR,;t t\n+s,@SDK_LIB_DIR@,$SDK_LIB_DIR,;t t\n+s,@SDK_INCLUDE_DIR@,$SDK_INCLUDE_DIR,;t t\n+s,@JRE_BIN_DIR@,$JRE_BIN_DIR,;t t\n+s,@JRE_LIB_DIR@,$JRE_LIB_DIR,;t t\n+s,@GCJ_BIN_DIR@,$GCJ_BIN_DIR,;t t\n+s,@CPU@,$CPU,;t t\n+s,@OS@,$OS,;t t\n+s,@LIBDIR@,$LIBDIR,;t t\n s,@LIBOBJS@,$LIBOBJS,;t t\n s,@LTLIBOBJS@,$LTLIBOBJS,;t t\n CEOF"}, {"sha": "6b7949f689ffa50768fd845815e1ef5769d00ffa", "filename": "libjava/configure.ac", "status": "modified", "additions": 206, "deletions": 0, "changes": 206, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -1416,6 +1416,7 @@ case $multi_os_directory in\n    ;;\n esac\n AC_SUBST(dbexecdir)\n+AC_SUBST(gcjsubdir)\n \n AC_DEFINE(JV_VERSION, \"1.5.0\", [Compatibility version string])\n AC_DEFINE(JV_API_VERSION, \"1.5\", [API compatibility version string])\n@@ -1628,6 +1629,207 @@ AC_SUBST(here)\n # We get this from the environment.\n AC_SUBST(GCJFLAGS)\n \n+AC_ARG_WITH([python-dir],\n+            AS_HELP_STRING([--with-python-dir],\n+                           [the location to install Python modules. This path should NOT include the prefix.]),\n+            [with_python_dir=$withval], [with_python_dir=\"\"])\n+\n+if test \"x${with_python_dir}\" = \"x\"\n+then\n+  # Needed for installing Python modules during make install.\n+  python_mod_dir=\"\\${prefix}/share/python\"\n+  # Needed for substituting into aot-compile*\n+  python_mod_dir_expanded=\"${prefix}/share/python\"\n+else\n+  python_mod_dir=\"\\${prefix}${with_python_dir}\"\n+  python_mod_dir_expanded=\"${prefix}${with_python_dir}\"\n+fi\n+AC_MSG_RESULT(Python modules dir: ${python_mod_dir_expanded});\n+AC_SUBST(python_mod_dir)\n+AC_SUBST(python_mod_dir_expanded)\n+\n+# needed for aot-compile-rpm\n+MAKE=`which make`\n+AC_SUBST(MAKE)\n+\n+AC_ARG_ENABLE([aot-compile-rpm],\n+  [AS_HELP_STRING([--enable-aot-compile-rpm],\n+                 [enable installation of aot-compile-rpm [default=no]])],\n+  [case \"${enableval}\" in\n+    yes) AOT_RPM_ENABLED=yes ;;\n+    no)  AOT_RPM_ENABLED=no ;;\n+    *)   AC_MSG_ERROR([Unknown argument to enable/disable aot-compile-rpm]) ;;\n+  esac],\n+  [AOT_RPM_ENABLED=no]\n+)\n+AM_CONDITIONAL(INSTALL_AOT_RPM, test \"x${AOT_RPM_ENABLED}\" == xyes)\n+\n+AC_ARG_ENABLE([java-home],\n+  [AS_HELP_STRING([--enable-java-home],\n+                 [create a standard JDK-style directory layout in the install tree [default=no]])],\n+  [case \"${enableval}\" in\n+    yes) JAVA_HOME_ENABLED=yes ;;\n+    no)  JAVA_HOME_ENABLED=no ;;\n+    *)   AC_MSG_ERROR([Unknown argument to enable/disable java-home]) ;;\n+  esac],\n+  [JAVA_HOME_ENABLED=no]\n+)\n+AM_CONDITIONAL(CREATE_JAVA_HOME, test \"x${JAVA_HOME_ENABLED}\" == xyes)\n+\n+# Only do these checks if java-home above is enabled.\n+if test \"x${JAVA_HOME_ENABLED}\" == xyes\n+then\n+\n+  AC_ARG_WITH([gcc-suffix],\n+              AS_HELP_STRING([--with-gcc-suffix],\n+                             [the GCC tool suffix (defaults to empty string)]),\n+              [gcc_suffix=$withval], [gcc_suffix=\"\"])\n+  AC_MSG_RESULT(GCC suffix: ${gcc_suffix})\n+  AC_SUBST(gcc_suffix)\n+\n+  AC_ARG_WITH([arch-directory],\n+              AS_HELP_STRING([--with-arch-directory],\n+                             [the arch directory under jre/lib (defaults to auto-detect)]),\n+              [host_cpu=$withval], [host_cpu=\"\"])\n+\n+  AC_ARG_WITH([os-directory],\n+              AS_HELP_STRING([--with-os-directory],\n+                             [the os directory under include (defaults to auto-detect)]),\n+              [host_os=$withval], [host_os=\"\"])\n+\n+  AC_ARG_WITH([origin-name],\n+              AS_HELP_STRING([--with-origin-name],\n+                             [the JPackage origin name of this package (default is gcj${gcc_suffix}]),\n+              [origin_name=$withval], [origin_name=gcj${gcc_suffix}])\n+  AC_MSG_RESULT(JPackage origin name: ${origin_name})\n+\n+  AC_ARG_WITH([arch-suffix],\n+              AS_HELP_STRING([--with-arch-suffix],\n+                             [the arch directory suffix (default is the empty string]),\n+              [arch_suffix=$withval], [arch_suffix=\"\"])\n+  AC_MSG_RESULT(arch suffix: ${arch_suffix})\n+\n+  AC_ARG_WITH([jvm-root-dir],\n+              AS_HELP_STRING([--with-jvm-root-dir],\n+                             [where to install SDK (default is ${prefix}/lib/jvm)]),\n+              [jvm_root_dir=$withval], [jvm_root_dir=\"\\${prefix}/lib/jvm\"])\n+  AC_MSG_RESULT(JVM root installation directory: ${jvm_root_dir})\n+\n+  AC_ARG_WITH([jvm-jar-dir],\n+              AS_HELP_STRING([--with-jvm-jar-dir],\n+\t\t\t                 [where to install jars (default is ${prefix}/lib/jvm-exports)]),\n+              [jvm_jar_dir=$withval], [jvm_jar_dir=\\${prefix}/lib/jvm-exports])\n+  AC_MSG_RESULT(JAR root installation directory: ${jvm_jar_dir})\n+\n+  JAVA_VERSION=1.5.0\n+  BUILD_VERSION=0\n+  AC_SUBST(JAVA_VERSION)\n+  AC_SUBST(BUILD_VERSION)\n+  AC_MSG_RESULT(Java version: ${JAVA_VERSION})\n+\n+  jre_dir=java-${JAVA_VERSION}-${origin_name}-${JAVA_VERSION}.${BUILD_VERSION}${arch_suffix}/jre\n+  sdk_dir=java-${JAVA_VERSION}-${origin_name}-${JAVA_VERSION}.${BUILD_VERSION}${arch_suffix}\n+  jre_lnk=jre-${JAVA_VERSION}-${origin_name}\n+  sdk_lnk=java-${JAVA_VERSION}-${origin_name}\n+\n+  JVM_ROOT_DIR=${jvm_root_dir}\n+  AC_SUBST(JVM_ROOT_DIR)\n+  AC_MSG_RESULT(JVM ROOT directory: ${JVM_ROOT_DIR})\n+\n+  JVM_JAR_ROOT_DIR=${jvm_jar_dir}\n+  AC_SUBST(JVM_JAR_ROOT_DIR)\n+  AC_MSG_RESULT(JVM JAR ROOT directory: ${JVM_JAR_ROOT_DIR})\n+\n+  JVM_JAR_DIR=${jvm_jar_dir}/${sdk_dir}\n+  AC_SUBST(JVM_JAR_DIR)\n+  AC_MSG_RESULT(JVM JAR directory: ${JVM_JAR_DIR})\n+\n+  JRE_DIR=${jre_dir}\n+  AC_SUBST(JRE_DIR)\n+\n+  SDK_DIR=${sdk_dir}\n+  AC_SUBST(SDK_DIR)\n+\n+  JRE_LNK=${jre_lnk}\n+  AC_SUBST(JRE_LNK)\n+\n+  SDK_LNK=${sdk_lnk}\n+  AC_SUBST(SDK_LNK)\n+\n+  SDK_BIN_DIR=${jvm_root_dir}/${sdk_dir}/bin\n+  AC_SUBST(SDK_BIN_DIR)\n+  AC_MSG_RESULT(SDK tools directory: ${SDK_BIN_DIR})\n+\n+  SDK_LIB_DIR=${jvm_root_dir}/${sdk_dir}/lib\n+  AC_SUBST(SDK_LIB_DIR)\n+  AC_MSG_RESULT(SDK jar directory: ${SDK_LIB_DIR})\n+\n+  SDK_INCLUDE_DIR=${jvm_root_dir}/${sdk_dir}/include\n+  AC_SUBST(SDK_INCLUDE_DIR)\n+  AC_MSG_RESULT(SDK include directory: ${SDK_INCLUDE_DIR})\n+\n+  JRE_BIN_DIR=${jvm_root_dir}/${jre_dir}/bin\n+  AC_SUBST(JRE_BIN_DIR)\n+  AC_MSG_RESULT(JRE tools directory: ${JRE_BIN_DIR})\n+\n+  JRE_LIB_DIR=${jvm_root_dir}/${jre_dir}/lib\n+  AC_SUBST(JRE_LIB_DIR)\n+  AC_MSG_RESULT(JRE lib directory: ${JRE_LIB_DIR})\n+\n+  # Find gcj prefix using gcj found in PATH.\n+  gcj_prefix=`which gcj${gcc_suffix} | sed \"s%/bin/gcj${gcc_suffix}%%\"`\n+\n+  # Where do the gcj binaries live?\n+  # For jhbuild based builds, they all live in a sibling of bin called\n+  # gcj-bin.  Check for gcj-bin first, and use bin otherwise.\n+  GCJ_BIN_DIR=`if test -d ${gcj_prefix}/gcj-bin; then echo ${gcj_prefix}/gcj-bin; else echo ${gcj_prefix}/bin; fi`\n+  AC_SUBST(GCJ_BIN_DIR)\n+  AC_MSG_RESULT(GCJ tools directory: ${GCJ_BIN_DIR})\n+\n+  echo host is ${host}\n+  if test \"x${host_cpu}\" = \"x\"\n+  then\n+    case ${host} in\n+      *-mingw* | *-cygwin*)\n+        host_cpu=x86;;\n+      i486-* | i586-* | i686-*)\n+        host_cpu=i386;;\n+      *)\n+        host_cpu=${host_cpu};;\n+    esac\n+  fi\n+  AC_MSG_RESULT(arch directory: ${host_cpu})\n+  CPU=${host_cpu}\n+  AC_SUBST(CPU)\n+\n+  if test \"x${host_os}\" = \"x\"\n+  then\n+    case ${host} in\n+      *-mingw* | *-cygwin*)\n+        host_os=win32;;\n+      *-linux*)\n+        host_os=linux;;\n+      *)\n+        host_os=${host_os};;\n+    esac\n+  fi\n+  echo os directory: ${host_os}\n+  OS=${host_os}\n+  AC_SUBST(OS)\n+\n+  # make an expanded $libdir, for substituting into\n+  # scripts (and other non-Makefile things).\n+  LIBDIR=$libdir\n+  if test \"x${exec_prefix}\" = \"xNONE\"\n+  then\n+      lib_exec_prefix=$prefix\n+  else\n+      lib_exec_prefix=$exec_prefix\n+  fi\n+  LIBDIR=`echo $libdir | sed \"s:\\\\\\${exec_prefix}:$lib_exec_prefix:g\"`\n+  AC_SUBST(LIBDIR)\n+fi\n+\n AC_CONFIG_FILES([\n Makefile\n libgcj.pc\n@@ -1636,6 +1838,10 @@ libgcj-test.spec\n gcj/Makefile\n include/Makefile\n testsuite/Makefile\n+contrib/aotcompile.py\n+contrib/aot-compile\n+contrib/aot-compile-rpm\n+contrib/rebuild-gcj-db\n ])\n \n if test ${multilib} = yes; then"}, {"sha": "c3bdb165096b1b6623e842e3c858332e1339ee28", "filename": "libjava/contrib/aot-compile-rpm.in", "status": "added", "additions": 97, "deletions": 0, "changes": 97, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Faot-compile-rpm.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Faot-compile-rpm.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fcontrib%2Faot-compile-rpm.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -0,0 +1,97 @@\n+#!/usr/bin/env python\n+\n+## Copyright (C) 2005, 2006, 2007 Free Software Foundation\n+## Written by Gary Benson <gbenson@redhat.com>\n+##\n+## This program is free software; you can redistribute it and/or modify\n+## it under the terms of the GNU General Public License as published by\n+## the Free Software Foundation; either version 2 of the License, or\n+## (at your option) any later version.\n+##\n+## This program is distributed in the hope that it will be useful,\n+## but WITHOUT ANY WARRANTY; without even the implied warranty of\n+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+## GNU General Public License for more details.\n+\n+import sys\n+sys.path.append(\"@python_mod_dir_expanded@\")\n+import aotcompile\n+import os\n+\n+def libdir():\n+    cmd = \"%s -p\" % aotcompile.PATHS[\"dbtool\"]\n+    dir = os.path.abspath(os.popen(cmd, \"r\").readline().rstrip())\n+    dir, base = os.path.split(dir)\n+    if base != \"classmap.db\":\n+        raise aotcompile.Error, \"%s: unexpected output\" % cmd\n+    dir, base = os.path.split(dir)\n+    if not base.startswith(\"gcj-\"):\n+        raise aotcompile.Error, \"%s: unexpected output\" % cmd\n+    return dir\n+\n+def writeSourceList(srcdir, dstpath):\n+    def visit(fp, dir, items):\n+        for item in items:\n+            path = os.path.join(dir, item)\n+            if os.path.isfile(path):\n+                print >>fp, path\n+    dstdir = os.path.dirname(dstpath)\n+    if not os.path.isdir(dstdir):\n+        os.makedirs(dstdir)\n+    os.path.walk(srcdir, visit, open(dstpath, \"w\"))\n+\n+def copy(srcdir, dstdir, suffix):\n+    srcdir = os.path.join(srcdir, suffix.lstrip(os.sep))\n+    dstdir = os.path.join(dstdir, suffix.lstrip(os.sep))\n+    os.makedirs(os.path.dirname(dstdir))\n+    aotcompile.system((\"/bin/cp\", \"-a\", srcdir, dstdir))\n+\n+try:\n+    name = os.environ.get(\"RPM_PACKAGE_NAME\")\n+    if name is None:\n+        raise aotcompile.Error, \"not for use outside rpm specfiles\"\n+    arch = os.environ.get(\"RPM_ARCH\")\n+    if arch == \"noarch\":\n+        raise aotcompile.Error, \"cannot be used on noarch packages\"\n+    srcdir = os.environ.get(\"RPM_BUILD_ROOT\")\n+    if srcdir in (None, \"/\"):\n+        raise aotcompile.Error, \"bad $RPM_BUILD_ROOT\"\n+    tmpdir = os.path.join(os.getcwd(), \"aot-compile-rpm\")\n+    if os.path.exists(tmpdir):\n+        raise aotcompile.Error, \"%s exists\" % tmpdir\n+    dstdir = os.path.join(libdir(), \"gcj\", name)\n+\n+    compiler = aotcompile.Compiler(srcdir, dstdir, tmpdir)\n+    compiler.gcjflags[0:0] = os.environ.get(\"RPM_OPT_FLAGS\", \"\").split() \n+\n+    # XXX: This script should not accept options, because having\n+    # them it cannot be integrated into rpm.  But, gcj cannot\n+    # build each and every jarfile yet, so we must be able to\n+    # exclude until it can.\n+    # XXX --exclude is also used in the jonas rpm to stop\n+    # everything being made a subset of the mammoth client\n+    # jarfile. Should adjust the subset checker's bias to\n+    # favour many small jarfiles over one big one.\n+    try:\n+        options, exclusions = sys.argv[1:], []\n+        while options:\n+            if options.pop(0) != \"--exclude\":\n+                raise ValueError\n+            compiler.exclusions.append(\n+                os.path.join(srcdir, options.pop(0).lstrip(os.sep)))\n+    except:\n+        print >>sys.stderr, \"usage: %s [--exclude PATH]...\" % (\n+            os.path.basename(sys.argv[0]))\n+        sys.exit(1)\n+\n+    sourcelist = os.path.join(tmpdir, \"sources.list\")\n+    writeSourceList(os.getcwd(), sourcelist)\n+    compiler.gcjflags.append(\"-fsource-filename=\" + sourcelist)\n+\n+    compiler.compile()\n+    copy(tmpdir, srcdir, dstdir)\n+\n+except aotcompile.Error, e:\n+    print >>sys.stderr, \"%s: error: %s\" % (\n+        os.path.basename(sys.argv[0]), e)\n+    sys.exit(1)"}, {"sha": "b891f20b85fcfcf4efabfc632972bc242921e931", "filename": "libjava/contrib/aot-compile.in", "status": "added", "additions": 88, "deletions": 0, "changes": 88, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Faot-compile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Faot-compile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fcontrib%2Faot-compile.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -0,0 +1,88 @@\n+#!/usr/bin/env python\n+\n+## Copyright (C) 2006 Free Software Foundation\n+## Written by Gary Benson <gbenson@redhat.com>\n+##\n+## This program is free software; you can redistribute it and/or modify\n+## it under the terms of the GNU General Public License as published by\n+## the Free Software Foundation; either version 2 of the License, or\n+## (at your option) any later version.\n+##\n+## This program is distributed in the hope that it will be useful,\n+## but WITHOUT ANY WARRANTY; without even the implied warranty of\n+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+## GNU General Public License for more details.\n+\n+import sys\n+sys.path.append(\"@python_mod_dir_expanded@\")\n+import aotcompile\n+import getopt\n+import os\n+\n+usage = \"\"\"\\\n+Usage: %s [OPTION...] SRCDIR DSTDIR\n+AOT-compile all Java bytecode in SRCDIR into DSTDIR.\n+\n+Options:\n+  -M, --make=PATH        make executable to use (%s)\n+  -C, --gcj=PATH         gcj executable to use (%s)\n+  -D, --dbtool=PATH      gcj-dbtool executable to use (%s)\n+  -m, --makeflags=FLAGS  flags to pass to make during build\n+  -c, --gcjflags=FLAGS   flags to pass to gcj during compilation\n+                           in addition to %s\n+  -l, --ldflags=FLAGS    flags to pass to gcj during linking\n+                           in addition to %s\n+  -e, --exclude=PATH     do not compile PATH\n+\n+Extra flags may also be passed using the AOT_MAKEFLAGS, AOT_GCJFLAGS\n+and AOT_LDFLAGS environment variables.\"\"\" % (\n+    os.path.basename(sys.argv[0]),\n+    aotcompile.PATHS[\"make\"],\n+    aotcompile.PATHS[\"gcj\"],\n+    aotcompile.PATHS[\"dbtool\"],\n+    repr(\" \".join(aotcompile.GCJFLAGS)),\n+    repr(\" \".join(aotcompile.LDFLAGS)))\n+\n+try:\n+    if os.environ.has_key(\"RPM_PACKAGE_NAME\"):\n+        raise aotcompile.Error, \"not for use within rpm specfiles\"\n+\n+    try:\n+        opts, args = getopt.getopt(\n+            sys.argv[1:],\n+            \"M:C:D:m:c:l:e:\",\n+            [\"make=\", \"gcj=\", \"dbtool=\",\n+             \"makeflags=\" \"gcjflags=\", \"ldflags=\",\n+             \"exclude=\"])\n+        srcdir, dstdir = args\n+    except:\n+        print >>sys.stderr, usage\n+        sys.exit(1)\n+\n+    compiler = aotcompile.Compiler(srcdir, dstdir)\n+    for o, a in opts:\n+        if o in (\"-M\", \"--make\"):\n+            aotcompile.PATHS[\"make\"] = a\n+        if o in (\"-C\", \"--gcj\"):\n+            aotcompile.PATHS[\"gcj\"] = a\n+        if o in (\"-D\", \"--dbtool\"):\n+            aotcompile.PATHS[\"dbtool\"] = a\n+        if o in (\"-m\", \"--makeflags\"):\n+            compiler.makeflags[0:0] = a.split()\n+        if o in (\"-c\", \"--gcjflags\"):\n+            compiler.gcjflags[0:0] = a.split()\n+        if o in (\"-l\", \"--ldflags\"):\n+            compiler.ldflags[0:0] = a.split()\n+        if o in (\"-e\", \"--exclude\"):\n+            compiler.exclusions.append(a)\n+    \n+    compiler.makeflags[0:0] = os.environ.get(\"AOT_MAKEFLAGS\", \"\").split() \n+    compiler.gcjflags[0:0] = os.environ.get(\"AOT_GCJFLAGS\", \"\").split() \n+    compiler.ldflags[0:0] = os.environ.get(\"AOT_LDFLAGS\", \"\").split() \n+\n+    compiler.compile()\n+\n+except aotcompile.Error, e:\n+    print >>sys.stderr, \"%s: error: %s\" % (\n+        os.path.basename(sys.argv[0]), e)\n+    sys.exit(1)"}, {"sha": "9e25c9061a18033797e42e92d38c7e48cadb305a", "filename": "libjava/contrib/aotcompile.py.in", "status": "added", "additions": 412, "deletions": 0, "changes": 412, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Faotcompile.py.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Faotcompile.py.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fcontrib%2Faotcompile.py.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -0,0 +1,412 @@\n+# -*- python -*-\n+\n+## Copyright (C) 2005, 2006, 2008 Free Software Foundation\n+## Written by Gary Benson <gbenson@redhat.com>\n+##\n+## This program is free software; you can redistribute it and/or modify\n+## it under the terms of the GNU General Public License as published by\n+## the Free Software Foundation; either version 2 of the License, or\n+## (at your option) any later version.\n+##\n+## This program is distributed in the hope that it will be useful,\n+## but WITHOUT ANY WARRANTY; without even the implied warranty of\n+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+## GNU General Public License for more details.\n+\n+import classfile\n+import copy\n+import md5\n+import operator\n+import os\n+import sys\n+import cStringIO as StringIO\n+import zipfile\n+\n+PATHS = {\"make\":   \"@MAKE@\",\n+         \"gcj\":    \"@prefix@/bin/gcj@gcc_suffix@\",\n+         \"dbtool\": \"@prefix@/bin/gcj-dbtool@gcc_suffix@\"}\n+\n+MAKEFLAGS = []\n+GCJFLAGS = [\"-fPIC\", \"-findirect-dispatch\", \"-fjni\"]\n+LDFLAGS = [\"-Wl,-Bsymbolic\"]\n+\n+MAX_CLASSES_PER_JAR = 1024\n+MAX_BYTES_PER_JAR = 1048576\n+\n+MAKEFILE = \"Makefile\"\n+\n+MAKEFILE_HEADER = '''\\\n+GCJ = %(gcj)s\n+DBTOOL = %(dbtool)s\n+GCJFLAGS = %(gcjflags)s\n+LDFLAGS = %(ldflags)s\n+\n+%%.o: %%.jar\n+\t$(GCJ) -c $(GCJFLAGS) $< -o $@\n+\n+TARGETS = \\\\\n+%(targets)s\n+\n+all: $(TARGETS)'''\n+\n+MAKEFILE_JOB = '''\n+%(base)s_SOURCES = \\\\\n+%(jars)s\n+\n+%(base)s_OBJECTS = \\\\\n+$(%(base)s_SOURCES:.jar=.o)\n+\n+%(dso)s: $(%(base)s_OBJECTS)\n+\t$(GCJ) -shared $(GCJFLAGS) $(LDFLAGS) $^ -o $@\n+\n+%(db)s: $(%(base)s_SOURCES)\n+\t$(DBTOOL) -n $@ 64\n+\tfor jar in $^; do \\\\\n+            $(DBTOOL) -f $@ $$jar \\\\\n+                %(libdir)s/%(dso)s; \\\\\n+        done'''\n+\n+ZIPMAGIC, CLASSMAGIC = \"PK\\x03\\x04\", \"\\xca\\xfe\\xba\\xbe\"\n+\n+class Error(Exception):\n+    pass\n+\n+class Compiler:\n+    def __init__(self, srcdir, libdir, prefix = None):\n+        self.srcdir = os.path.abspath(srcdir)\n+        self.libdir = os.path.abspath(libdir)\n+        if prefix is None:\n+            self.dstdir = self.libdir\n+        else:\n+            self.dstdir = os.path.join(prefix, self.libdir.lstrip(os.sep))\n+\n+        # Calling code may modify these parameters\n+        self.gcjflags = copy.copy(GCJFLAGS)\n+        self.ldflags = copy.copy(LDFLAGS)\n+        self.makeflags = copy.copy(MAKEFLAGS)\n+        self.exclusions = []\n+\n+    def compile(self):\n+        \"\"\"Search srcdir for classes and jarfiles, then generate\n+        solibs and mappings databases for them all in libdir.\"\"\"\n+        if not os.path.isdir(self.dstdir):\n+            os.makedirs(self.dstdir)\n+        oldcwd = os.getcwd()\n+        os.chdir(self.dstdir)\n+        try:            \n+            jobs = self.getJobList()\n+            if not jobs:\n+                raise Error, \"nothing to do\"\n+            self.writeMakefile(MAKEFILE, jobs)\n+            for job in jobs:\n+                job.writeJars()\n+            system([PATHS[\"make\"]] + self.makeflags)\n+            for job in jobs:\n+                job.clean()\n+            os.unlink(MAKEFILE)\n+        finally:\n+            os.chdir(oldcwd)\n+\n+    def getJobList(self):\n+        \"\"\"Return all jarfiles and class collections in srcdir.\"\"\"\n+        jobs = weed_jobs(find_jobs(self.srcdir, self.exclusions))\n+        set_basenames(jobs)\n+        return jobs\n+\n+    def writeMakefile(self, path, jobs):\n+        \"\"\"Generate a makefile to build the solibs and mappings\n+        databases for the specified list of jobs.\"\"\"\n+        fp = open(path, \"w\")\n+        print >>fp, MAKEFILE_HEADER % {\n+            \"gcj\": PATHS[\"gcj\"],\n+            \"dbtool\": PATHS[\"dbtool\"],\n+            \"gcjflags\": \" \".join(self.gcjflags),\n+            \"ldflags\": \" \".join(self.ldflags),\n+            \"targets\": \" \\\\\\n\".join(reduce(operator.add, [\n+                (job.dsoName(), job.dbName()) for job in jobs]))}\n+        for job in jobs:\n+            values = job.ruleArguments()\n+            values[\"libdir\"] = self.libdir\n+            print >>fp, MAKEFILE_JOB % values\n+        fp.close()\n+\n+def find_jobs(dir, exclusions = ()):\n+    \"\"\"Scan a directory and find things to compile: jarfiles (zips,\n+    wars, ears, rars, etc: we go by magic rather than file extension)\n+    and directories of classes.\"\"\"\n+    def visit((classes, zips), dir, items):\n+        for item in items:\n+            path = os.path.join(dir, item)\n+            if os.path.islink(path) or not os.path.isfile(path):\n+                continue\n+            magic = open(path, \"r\").read(4)\n+            if magic == ZIPMAGIC:\n+                zips.append(path)\n+            elif magic == CLASSMAGIC:\n+                classes.append(path)\n+    classes, paths = [], []\n+    os.path.walk(dir, visit, (classes, paths))\n+    # Convert the list of classes into a list of directories\n+    while classes:\n+        # XXX this requires the class to be correctly located in its heirachy.\n+        path = classes[0][:-len(os.sep + classname(classes[0]) + \".class\")]\n+        paths.append(path)\n+        classes = [cls for cls in classes if not cls.startswith(path)]\n+    # Handle exclusions.  We're really strict about them because the\n+    # option is temporary in aot-compile-rpm and dead options left in\n+    # specfiles will hinder its removal.\n+    for path in exclusions:\n+        if path in paths:\n+            paths.remove(path)\n+        else:\n+            raise Error, \"%s: path does not exist or is not a job\" % path\n+    # Build the list of jobs\n+    jobs = []\n+    paths.sort()\n+    for path in paths:\n+        if os.path.isfile(path):\n+            job = JarJob(path)\n+        else:\n+            job = DirJob(path)\n+        if len(job.classes):\n+            jobs.append(job)\n+    return jobs\n+\n+class Job:\n+    \"\"\"A collection of classes that will be compiled as a unit.\"\"\"\n+    \n+    def __init__(self, path):\n+        self.path, self.classes, self.blocks = path, {}, None\n+\n+    def addClass(self, bytes):\n+        \"\"\"Subclasses call this from their __init__ method for\n+        every class they find.\"\"\"\n+        self.classes[md5.new(bytes).digest()] = bytes\n+\n+    def __makeBlocks(self):\n+        \"\"\"Split self.classes into chunks that can be compiled to\n+        native code by gcj.  In the majority of cases this is not\n+        necessary -- the job will have come from a jarfile which will\n+        be equivalent to the one we generate -- but this only happens\n+        _if_ the job was a jarfile and _if_ the jarfile isn't too big\n+        and _if_ the jarfile has the correct extension and _if_ all\n+        classes are correctly named and _if_ the jarfile has no\n+        embedded jarfiles.  Fitting a special case around all these\n+        conditions is tricky to say the least.\n+\n+        Note that this could be called at the end of each subclass's\n+        __init__ method.  The reason this is not done is because we\n+        need to parse every class file.  This is slow, and unnecessary\n+        if the job is subsetted.\"\"\"\n+        names = {}\n+        for hash, bytes in self.classes.items():\n+            name = classname(bytes)\n+            if not names.has_key(name):\n+                names[name] = []\n+            names[name].append(hash)\n+        names = names.items()\n+        # We have to sort somehow, or the jars we generate \n+        # We sort by name in a simplistic attempt to keep related\n+        # classes together so inter-class optimisation can happen.\n+        names.sort()\n+        self.blocks, bytes = [[]], 0\n+        for name, hashes in names:\n+            for hash in hashes:\n+                if len(self.blocks[-1]) >= MAX_CLASSES_PER_JAR \\\n+                   or bytes >= MAX_BYTES_PER_JAR:\n+                    self.blocks.append([])\n+                    bytes = 0\n+                self.blocks[-1].append((name, hash))\n+                bytes += len(self.classes[hash])\n+\n+    # From Archit Shah:\n+    #   The implementation and the documentation don't seem to match.\n+    #  \n+    #    [a, b].isSubsetOf([a]) => True\n+    #  \n+    #   Identical copies of all classes this collection do not exist\n+    #   in the other. I think the method should be named isSupersetOf\n+    #   and the documentation should swap uses of \"this\" and \"other\"\n+    #\n+    # XXX think about this when I've had more sleep...\n+    def isSubsetOf(self, other):\n+        \"\"\"Returns True if identical copies of all classes in this\n+        collection exist in the other.\"\"\"\n+        for item in other.classes.keys():\n+            if not self.classes.has_key(item):\n+                return False\n+        return True\n+\n+    def __targetName(self, ext):\n+        return self.basename + ext\n+\n+    def tempJarName(self, num):\n+        return self.__targetName(\".%d.jar\" % (num + 1))\n+\n+    def tempObjName(self, num):\n+        return self.__targetName(\".%d.o\" % (num + 1))\n+\n+    def dsoName(self):\n+        \"\"\"Return the filename of the shared library that will be\n+        built from this job.\"\"\"\n+        return self.__targetName(\".so\")\n+\n+    def dbName(self):\n+        \"\"\"Return the filename of the mapping database that will be\n+        built from this job.\"\"\"\n+        return self.__targetName(\".db\")\n+\n+    def ruleArguments(self):\n+        \"\"\"Return a dictionary of values that when substituted\n+        into MAKEFILE_JOB will create the rules required to build\n+        the shared library and mapping database for this job.\"\"\"\n+        if self.blocks is None:\n+            self.__makeBlocks()\n+        return {\n+            \"base\": \"\".join(\n+                [c.isalnum() and c or \"_\" for c in self.dsoName()]),\n+            \"jars\": \" \\\\\\n\".join(\n+                [self.tempJarName(i) for i in xrange(len(self.blocks))]),\n+            \"dso\": self.dsoName(),\n+            \"db\": self.dbName()}\n+\n+    def writeJars(self):\n+        \"\"\"Generate jarfiles that can be native compiled by gcj.\"\"\"\n+        if self.blocks is None:\n+            self.__makeBlocks()\n+        for block, i in zip(self.blocks, xrange(len(self.blocks))):\n+            jar = zipfile.ZipFile(self.tempJarName(i), \"w\", zipfile.ZIP_STORED)\n+            for name, hash in block:\n+                jar.writestr(\n+                    zipfile.ZipInfo(\"%s.class\" % name), self.classes[hash])\n+            jar.close()\n+\n+    def clean(self):\n+        \"\"\"Delete all temporary files created during this job's build.\"\"\"\n+        if self.blocks is None:\n+            self.__makeBlocks()\n+        for i in xrange(len(self.blocks)):\n+            os.unlink(self.tempJarName(i))\n+            os.unlink(self.tempObjName(i))\n+\n+class JarJob(Job):\n+    \"\"\"A Job whose origin was a jarfile.\"\"\"\n+\n+    def __init__(self, path):\n+        Job.__init__(self, path)\n+        self._walk(zipfile.ZipFile(path, \"r\"))\n+\n+    def _walk(self, zf):\n+        for name in zf.namelist():\n+            bytes = zf.read(name)\n+            if bytes.startswith(ZIPMAGIC):\n+                self._walk(zipfile.ZipFile(StringIO.StringIO(bytes)))\n+            elif bytes.startswith(CLASSMAGIC):\n+                self.addClass(bytes)\n+\n+class DirJob(Job):\n+    \"\"\"A Job whose origin was a directory of classfiles.\"\"\"\n+\n+    def __init__(self, path):\n+        Job.__init__(self, path)\n+        os.path.walk(path, DirJob._visit, self)\n+\n+    def _visit(self, dir, items):\n+        for item in items:\n+            path = os.path.join(dir, item)\n+            if os.path.islink(path) or not os.path.isfile(path):\n+                continue\n+            fp = open(path, \"r\")\n+            magic = fp.read(4)\n+            if magic == CLASSMAGIC:\n+                self.addClass(magic + fp.read())\n+    \n+def weed_jobs(jobs):\n+    \"\"\"Remove any jarfiles that are completely contained within\n+    another.  This is more common than you'd think, and we only\n+    need one nativified copy of each class after all.\"\"\"\n+    jobs = copy.copy(jobs)\n+    while True:\n+        for job1 in jobs:\n+            for job2 in jobs:\n+                if job1 is job2:\n+                    continue\n+                if job1.isSubsetOf(job2):\n+                    msg = \"subsetted %s\" % job2.path\n+                    if job2.isSubsetOf(job1):\n+                        if (isinstance(job1, DirJob) and\n+                            isinstance(job2, JarJob)):\n+                            # In the braindead case where a package\n+                            # contains an expanded copy of a jarfile\n+                            # the jarfile takes precedence.\n+                            continue\n+                        msg += \" (identical)\"\n+                    warn(msg)\n+                    jobs.remove(job2)\n+                    break\n+            else:\n+                continue\n+            break\n+        else:\n+            break\n+        continue\n+    return jobs\n+\n+def set_basenames(jobs):\n+    \"\"\"Ensure that each jarfile has a different basename.\"\"\"\n+    names = {}\n+    for job in jobs:\n+        name = os.path.basename(job.path)\n+        if not names.has_key(name):\n+            names[name] = []\n+        names[name].append(job)\n+    for name, set in names.items():\n+        if len(set) == 1:\n+            set[0].basename = name\n+            continue\n+        # prefix the jar filenames to make them unique\n+        # XXX will not work in most cases -- needs generalising\n+        set = [(job.path.split(os.sep), job) for job in set]\n+        minlen = min([len(bits) for bits, job in set])\n+        set = [(bits[-minlen:], job) for bits, job in set]\n+        bits = apply(zip, [bits for bits, job in set])\n+        while True:\n+            row = bits[-2]\n+            for bit in row[1:]:\n+                if bit != row[0]:\n+                    break\n+            else:\n+                del bits[-2]\n+                continue\n+            break\n+        set = zip(\n+            [\"_\".join(name) for name in apply(zip, bits[-2:])],\n+            [job for bits, job in set])\n+        for name, job in set:\n+            warn(\"building %s as %s\" % (job.path, name))\n+            job.basename = name\n+    # XXX keep this check until we're properly general\n+    names = {}\n+    for job in jobs:\n+        name = job.basename\n+        if names.has_key(name):\n+            raise Error, \"%s: duplicate jobname\" % name\n+        names[name] = 1\n+\n+def system(command):\n+    \"\"\"Execute a command.\"\"\"\n+    status = os.spawnv(os.P_WAIT, command[0], command)\n+    if status > 0:\n+        raise Error, \"%s exited with code %d\" % (command[0], status)\n+    elif status < 0:\n+        raise Error, \"%s killed by signal %d\" % (command[0], -status)\n+\n+def warn(msg):\n+    \"\"\"Print a warning message.\"\"\"\n+    print >>sys.stderr, \"%s: warning: %s\" % (\n+        os.path.basename(sys.argv[0]), msg)\n+\n+def classname(bytes):\n+    \"\"\"Extract the class name from the bytes of a class file.\"\"\"\n+    klass = classfile.Class(bytes)\n+    return klass.constants[klass.constants[klass.name][1]][1]"}, {"sha": "a8bb14c0b8f6a0f0c1f051e0113605e6de22de31", "filename": "libjava/contrib/classfile.py", "status": "added", "additions": 221, "deletions": 0, "changes": 221, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Fclassfile.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Fclassfile.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fcontrib%2Fclassfile.py?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -0,0 +1,221 @@\n+## Copyright (C) 2004, 2005 Free Software Foundation\n+## Written by Gary Benson <gbenson@redhat.com>\n+##\n+## This program is free software; you can redistribute it and/or modify\n+## it under the terms of the GNU General Public License as published by\n+## the Free Software Foundation; either version 2 of the License, or\n+## (at your option) any later version.\n+##\n+## This program is distributed in the hope that it will be useful,\n+## but WITHOUT ANY WARRANTY; without even the implied warranty of\n+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+## GNU General Public License for more details.\n+\n+\"\"\"Read Java(TM) class files.\"\"\"\n+\n+import cStringIO as StringIO\n+import struct\n+\n+class Class:\n+    def __init__(self, arg):\n+        if hasattr(arg, \"read\"):\n+            self.fp = arg\n+        elif type(arg) == type(\"\"):\n+            if arg.startswith(\"\\xca\\xfe\\xba\\xbe\"):\n+                self.fp = StringIO.StringIO(arg)\n+            else:\n+                self.fp = open(arg, \"r\")\n+        else:\n+            raise TypeError, type(arg)\n+\n+        magic = self._read_int()\n+        assert magic == 0xcafebabeL\n+        minor, major = self._read(\">HH\")        \n+        self.version = (major, minor)\n+\n+        self.pool_integrity_checks = None\n+        try:\n+            assert False\n+        except AssertionError:\n+            self.pool_integrity_checks = []\n+\n+        self._read_constants_pool()\n+\n+        self.access_flags = self._read_short()\n+        self.name = self._read_reference_Class()\n+        self.super = self._read_reference_Class()\n+\n+        self.interfaces = self._read_interfaces()\n+        self.fields = self._read_fieldsormethods()\n+        self.methods = self._read_fieldsormethods()\n+        self.attributes = self._read_attributes()\n+\n+        if self.pool_integrity_checks is not None:\n+            for index, tag in self.pool_integrity_checks:\n+                assert self.constants[index][0] == tag\n+\n+        del self.fp, self.pool_integrity_checks\n+\n+    def __repr__(self):\n+        result = []\n+        attrs = [attr for attr in dir(self)\n+                 if not attr.startswith(\"_\") and attr != \"Member\"]\n+        attrs.sort()\n+        for attr in attrs:\n+            result.append(\"%-13s %s\" % (\n+                attr + \":\", attr == \"constants\" and\n+                \"<ELIDED>\" or repr(getattr(self, attr))))\n+        return \"\\n\".join(result)\n+\n+    def _read_constants_pool(self):\n+        self.constants = {}\n+        skip = False\n+        for i in xrange(1, self._read_short()):\n+            if skip:\n+                skip = False\n+                continue\n+            tag = {\n+                1: \"Utf8\", 3: \"Integer\", 4: \"Float\", 5: \"Long\",\n+                6: \"Double\", 7: \"Class\", 8: \"String\", 9: \"Fieldref\",\n+                10: \"Methodref\", 11: \"InterfaceMethodref\",\n+                12: \"NameAndType\"}[self._read_byte()]\n+            skip = tag in (\"Long\", \"Double\") # crack crack crack!\n+            self.constants[i] = (tag, getattr(self, \"_read_constant_\" + tag)())\n+\n+    def _read_interfaces(self):\n+        result = []\n+        for i in xrange(self._read_short()):\n+            result.append(self._read_reference_Class())\n+        return result\n+\n+    def _read_fieldsormethods(self):\n+        result = []\n+        for i in xrange(self._read_short()):\n+            result.append(self.Member(self))\n+        return result\n+\n+    class Member:\n+        def __init__(self, source):\n+            self.access_flags = source._read_short()\n+            self.name = source._read_reference_Utf8()\n+            self.descriptor = source._read_reference_Utf8()\n+            self.attributes = source._read_attributes()\n+\n+        def __repr__(self):\n+            result = []\n+            attrs = [attr for attr in dir(self) if not attr.startswith(\"_\")]\n+            attrs.sort()\n+            for attr in attrs:\n+                value = getattr(self, attr)\n+                if attr == \"attributes\" and value.has_key(\"Code\"):\n+                    value = value.copy()\n+                    value.update({\"Code\": \"<ELIDED>\"})\n+                result.append(\"%-13s %s\" % (\n+                    attr + \":\", repr(value).replace(\n+                        \"'Code': '<ELIDED>'\", \"'Code': <ELIDED>\")))\n+            return (\"\\n%s\" % (15 * \" \")).join(result)\n+\n+    def _read_attributes(self):\n+        result = {}\n+        for i in xrange(self._read_short()):\n+            name = self._read_reference_Utf8()\n+            data = self.fp.read(self._read_int())\n+            assert not result.has_key(name)\n+            result[name] = data\n+        return result\n+\n+    # Constants pool reference reader convenience functions\n+\n+    def _read_reference_Utf8(self):\n+        return self._read_references(\"Utf8\")[0]\n+\n+    def _read_reference_Class(self):\n+        return self._read_references(\"Class\")[0]\n+\n+    def _read_reference_Class_NameAndType(self):\n+        return self._read_references(\"Class\", \"NameAndType\")\n+\n+    def _read_references(self, *args):\n+        result = []\n+        for arg in args:\n+            index = self._read_short()\n+            if self.pool_integrity_checks is not None:\n+                self.pool_integrity_checks.append((index, arg))\n+            result.append(index)\n+        return result\n+\n+    # Constants pool constant reader functions\n+\n+    def _read_constant_Utf8(self):\n+        constant = self.fp.read(self._read_short())\n+        try:\n+            constant = constant.decode(\"utf-8\")\n+        except UnicodeError:\n+            constant = _bork_utf8_decode(constant)\n+        try:\n+            constant = constant.encode(\"us-ascii\")\n+        except UnicodeError:\n+            pass\n+        return constant\n+\n+    def _read_constant_Integer(self):\n+        return self._read_int()\n+\n+    def _read_constant_Float(self):\n+        return self._read(\">f\")[0]\n+\n+    def _read_constant_Long(self):\n+        return self._read(\">q\")[0]\n+\n+    def _read_constant_Double(self):\n+        return self._read(\">d\")[0]\n+\n+    _read_constant_Class = _read_reference_Utf8\n+    _read_constant_String = _read_reference_Utf8\n+    _read_constant_Fieldref = _read_reference_Class_NameAndType\n+    _read_constant_Methodref = _read_reference_Class_NameAndType\n+    _read_constant_InterfaceMethodref = _read_reference_Class_NameAndType\n+\n+    def _read_constant_NameAndType(self):\n+        return self._read_reference_Utf8(), self._read_reference_Utf8()\n+\n+    # Generic reader functions\n+\n+    def _read_int(self):\n+        # XXX how else to read 32 bits on a 64-bit box?\n+        h, l = map(long, self._read(\">HH\"))\n+        return (h << 16) + l\n+\n+    def _read_short(self):\n+        return self._read(\">H\")[0]\n+\n+    def _read_byte(self):\n+        return self._read(\"B\")[0]\n+\n+    def _read(self, fmt):\n+        return struct.unpack(fmt, self.fp.read(struct.calcsize(fmt)))\n+\n+def _bork_utf8_decode(data):\n+    # more crack!\n+    bytes, unicode = map(ord, data), \"\"\n+    while bytes:\n+        b1 = bytes.pop(0)\n+        if b1 & 0x80:\n+            assert b1 & 0x40\n+            b2 = bytes.pop(0)\n+            assert b2 & 0xC0 == 0x80\n+            if b1 & 0x20:\n+                assert not b1 & 0x10\n+                b3 = bytes.pop(0)\n+                assert b3 & 0xC0 == 0x80\n+                unicode += unichr(\n+                    ((b1 & 0x0f) << 12) + ((b2 & 0x3f) << 6) + (b3 & 0x3f))\n+            else:\n+                unicode += unichr(((b1 & 0x1f) << 6) + (b2 & 0x3f))\n+        else:\n+            unicode += unichr(b1)\n+    return unicode\n+\n+if __name__ == \"__main__\":\n+    print Class(\"/usr/share/katana/build/ListDependentClasses.class\")\n+"}, {"sha": "39861ff55f9b64fd5dd523f96761bbbb40f1cf1d", "filename": "libjava/contrib/rebuild-gcj-db.in", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Frebuild-gcj-db.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fcontrib%2Frebuild-gcj-db.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fcontrib%2Frebuild-gcj-db.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -0,0 +1,27 @@\n+#!/bin/bash\n+# rebuild-gcj-db\n+\n+## Copyright (C) 2000, 2002, 2003, 2008 Free Software Foundation\n+##\n+##   This file is part of libgcj.\n+##\n+## This software is copyrighted work licensed under the terms of the\n+## Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+## details.\n+\n+# Rebuild all the standard databases.\n+for i in `@prefix@/bin/gcc --print-multi-lib 2>/dev/null`; do \n+   multilib=`echo $i | sed -e 's/^.*;//' | sed -e 's/\\@/ -/g'`\n+   dirname=`@prefix@/bin/gcc -print-multi-os-directory $multilib 2>/dev/null`\n+   base=@prefix@/lib/$dirname\n+   dbLocation=`@prefix@/bin/gcj-dbtool -p $base`\n+   libdir=$base/gcj\n+   if ! test -d $libdir; then\n+      # No shared libraries here.\n+      continue\n+   fi\n+   dirname $dbLocation | xargs mkdir -p\n+   @prefix@/bin/gcj-dbtool -n $dbLocation 64\n+   find $libdir -follow -name '*.db' -print0 | \\\n+      @prefix@/bin/gcj-dbtool -0 -m $dbLocation $dbLocation\n+done"}, {"sha": "3a1c18f4a7664a34fbbe3d800ae2a9cc2dbd1541", "filename": "libjava/gcj/Makefile.in", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fgcj%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Fgcj%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgcj%2FMakefile.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -99,13 +99,17 @@ AWK = @AWK@\n BACKTRACESPEC = @BACKTRACESPEC@\n BUILD_ECJ1_FALSE = @BUILD_ECJ1_FALSE@\n BUILD_ECJ1_TRUE = @BUILD_ECJ1_TRUE@\n+BUILD_VERSION = @BUILD_VERSION@\n CC = @CC@\n CCDEPMODE = @CCDEPMODE@\n CFLAGS = @CFLAGS@\n CHECKREFSPEC = @CHECKREFSPEC@\n CLASSPATH_SEPARATOR = @CLASSPATH_SEPARATOR@\n CPP = @CPP@\n CPPFLAGS = @CPPFLAGS@\n+CPU = @CPU@\n+CREATE_JAVA_HOME_FALSE = @CREATE_JAVA_HOME_FALSE@\n+CREATE_JAVA_HOME_TRUE = @CREATE_JAVA_HOME_TRUE@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n CXXDEPMODE = @CXXDEPMODE@\n@@ -135,6 +139,7 @@ GCJDEPMODE = @GCJDEPMODE@\n GCJFLAGS = @GCJFLAGS@\n GCJH = @GCJH@\n GCJVERSION = @GCJVERSION@\n+GCJ_BIN_DIR = @GCJ_BIN_DIR@\n GCJ_FOR_ECJX = @GCJ_FOR_ECJX@\n GCLIBS = @GCLIBS@\n GCSPEC = @GCSPEC@\n@@ -147,6 +152,8 @@ GTK_LIBS = @GTK_LIBS@\n HASH_SYNC_SPEC = @HASH_SYNC_SPEC@\n IEEESPEC = @IEEESPEC@\n INCLTDL = @INCLTDL@\n+INSTALL_AOT_RPM_FALSE = @INSTALL_AOT_RPM_FALSE@\n+INSTALL_AOT_RPM_TRUE = @INSTALL_AOT_RPM_TRUE@\n INSTALL_DATA = @INSTALL_DATA@\n INSTALL_ECJ_JAR_FALSE = @INSTALL_ECJ_JAR_FALSE@\n INSTALL_ECJ_JAR_TRUE = @INSTALL_ECJ_JAR_TRUE@\n@@ -162,13 +169,22 @@ JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JAVA_MAINTAINER_MODE_FALSE = @JAVA_MAINTAINER_MODE_FALSE@\n JAVA_MAINTAINER_MODE_TRUE = @JAVA_MAINTAINER_MODE_TRUE@\n+JAVA_VERSION = @JAVA_VERSION@\n JC1GCSPEC = @JC1GCSPEC@\n+JRE_BIN_DIR = @JRE_BIN_DIR@\n+JRE_DIR = @JRE_DIR@\n+JRE_LIB_DIR = @JRE_LIB_DIR@\n+JRE_LNK = @JRE_LNK@\n+JVM_JAR_DIR = @JVM_JAR_DIR@\n+JVM_JAR_ROOT_DIR = @JVM_JAR_ROOT_DIR@\n+JVM_ROOT_DIR = @JVM_ROOT_DIR@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@\n LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@\n LIBART_CFLAGS = @LIBART_CFLAGS@\n LIBART_LIBS = @LIBART_LIBS@\n+LIBDIR = @LIBDIR@\n LIBFFI = @LIBFFI@\n LIBFFIINCS = @LIBFFIINCS@\n LIBGCJDEBUG = @LIBGCJDEBUG@\n@@ -191,13 +207,15 @@ LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n MAINTAINER_MODE_FALSE = @MAINTAINER_MODE_FALSE@\n MAINTAINER_MODE_TRUE = @MAINTAINER_MODE_TRUE@\n+MAKE = @MAKE@\n MAKEINFO = @MAKEINFO@\n NATIVE_FALSE = @NATIVE_FALSE@\n NATIVE_TRUE = @NATIVE_TRUE@\n NEEDS_DATA_START_FALSE = @NEEDS_DATA_START_FALSE@\n NEEDS_DATA_START_TRUE = @NEEDS_DATA_START_TRUE@\n NM = @NM@\n OBJEXT = @OBJEXT@\n+OS = @OS@\n PACKAGE = @PACKAGE@\n PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@\n PACKAGE_NAME = @PACKAGE_NAME@\n@@ -209,6 +227,11 @@ PERL = @PERL@\n PKG_CONFIG = @PKG_CONFIG@\n PLATFORM = @PLATFORM@\n RANLIB = @RANLIB@\n+SDK_BIN_DIR = @SDK_BIN_DIR@\n+SDK_DIR = @SDK_DIR@\n+SDK_INCLUDE_DIR = @SDK_INCLUDE_DIR@\n+SDK_LIB_DIR = @SDK_LIB_DIR@\n+SDK_LNK = @SDK_LNK@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n SHELL = @SHELL@\n@@ -296,6 +319,8 @@ exec_prefix = @exec_prefix@\n extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n extra_ldflags_libjava = @extra_ldflags_libjava@\n+gcc_suffix = @gcc_suffix@\n+gcjsubdir = @gcjsubdir@\n gxx_include_dir = @gxx_include_dir@\n here = @here@\n host = @host@\n@@ -320,6 +345,8 @@ multi_basedir = @multi_basedir@\n oldincludedir = @oldincludedir@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n+python_mod_dir = @python_mod_dir@\n+python_mod_dir_expanded = @python_mod_dir_expanded@\n sbindir = @sbindir@\n sharedstatedir = @sharedstatedir@\n subdirs = @subdirs@"}, {"sha": "765b9d8ac7d2cacf308655402880d156e116e1dc", "filename": "libjava/include/Makefile.in", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2FMakefile.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -98,13 +98,17 @@ AWK = @AWK@\n BACKTRACESPEC = @BACKTRACESPEC@\n BUILD_ECJ1_FALSE = @BUILD_ECJ1_FALSE@\n BUILD_ECJ1_TRUE = @BUILD_ECJ1_TRUE@\n+BUILD_VERSION = @BUILD_VERSION@\n CC = @CC@\n CCDEPMODE = @CCDEPMODE@\n CFLAGS = @CFLAGS@\n CHECKREFSPEC = @CHECKREFSPEC@\n CLASSPATH_SEPARATOR = @CLASSPATH_SEPARATOR@\n CPP = @CPP@\n CPPFLAGS = @CPPFLAGS@\n+CPU = @CPU@\n+CREATE_JAVA_HOME_FALSE = @CREATE_JAVA_HOME_FALSE@\n+CREATE_JAVA_HOME_TRUE = @CREATE_JAVA_HOME_TRUE@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n CXXDEPMODE = @CXXDEPMODE@\n@@ -134,6 +138,7 @@ GCJDEPMODE = @GCJDEPMODE@\n GCJFLAGS = @GCJFLAGS@\n GCJH = @GCJH@\n GCJVERSION = @GCJVERSION@\n+GCJ_BIN_DIR = @GCJ_BIN_DIR@\n GCJ_FOR_ECJX = @GCJ_FOR_ECJX@\n GCLIBS = @GCLIBS@\n GCSPEC = @GCSPEC@\n@@ -146,6 +151,8 @@ GTK_LIBS = @GTK_LIBS@\n HASH_SYNC_SPEC = @HASH_SYNC_SPEC@\n IEEESPEC = @IEEESPEC@\n INCLTDL = @INCLTDL@\n+INSTALL_AOT_RPM_FALSE = @INSTALL_AOT_RPM_FALSE@\n+INSTALL_AOT_RPM_TRUE = @INSTALL_AOT_RPM_TRUE@\n INSTALL_DATA = @INSTALL_DATA@\n INSTALL_ECJ_JAR_FALSE = @INSTALL_ECJ_JAR_FALSE@\n INSTALL_ECJ_JAR_TRUE = @INSTALL_ECJ_JAR_TRUE@\n@@ -161,13 +168,22 @@ JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JAVA_MAINTAINER_MODE_FALSE = @JAVA_MAINTAINER_MODE_FALSE@\n JAVA_MAINTAINER_MODE_TRUE = @JAVA_MAINTAINER_MODE_TRUE@\n+JAVA_VERSION = @JAVA_VERSION@\n JC1GCSPEC = @JC1GCSPEC@\n+JRE_BIN_DIR = @JRE_BIN_DIR@\n+JRE_DIR = @JRE_DIR@\n+JRE_LIB_DIR = @JRE_LIB_DIR@\n+JRE_LNK = @JRE_LNK@\n+JVM_JAR_DIR = @JVM_JAR_DIR@\n+JVM_JAR_ROOT_DIR = @JVM_JAR_ROOT_DIR@\n+JVM_ROOT_DIR = @JVM_ROOT_DIR@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@\n LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@\n LIBART_CFLAGS = @LIBART_CFLAGS@\n LIBART_LIBS = @LIBART_LIBS@\n+LIBDIR = @LIBDIR@\n LIBFFI = @LIBFFI@\n LIBFFIINCS = @LIBFFIINCS@\n LIBGCJDEBUG = @LIBGCJDEBUG@\n@@ -190,13 +206,15 @@ LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n MAINTAINER_MODE_FALSE = @MAINTAINER_MODE_FALSE@\n MAINTAINER_MODE_TRUE = @MAINTAINER_MODE_TRUE@\n+MAKE = @MAKE@\n MAKEINFO = @MAKEINFO@\n NATIVE_FALSE = @NATIVE_FALSE@\n NATIVE_TRUE = @NATIVE_TRUE@\n NEEDS_DATA_START_FALSE = @NEEDS_DATA_START_FALSE@\n NEEDS_DATA_START_TRUE = @NEEDS_DATA_START_TRUE@\n NM = @NM@\n OBJEXT = @OBJEXT@\n+OS = @OS@\n PACKAGE = @PACKAGE@\n PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@\n PACKAGE_NAME = @PACKAGE_NAME@\n@@ -208,6 +226,11 @@ PERL = @PERL@\n PKG_CONFIG = @PKG_CONFIG@\n PLATFORM = @PLATFORM@\n RANLIB = @RANLIB@\n+SDK_BIN_DIR = @SDK_BIN_DIR@\n+SDK_DIR = @SDK_DIR@\n+SDK_INCLUDE_DIR = @SDK_INCLUDE_DIR@\n+SDK_LIB_DIR = @SDK_LIB_DIR@\n+SDK_LNK = @SDK_LNK@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n SHELL = @SHELL@\n@@ -295,6 +318,8 @@ exec_prefix = @exec_prefix@\n extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n extra_ldflags_libjava = @extra_ldflags_libjava@\n+gcc_suffix = @gcc_suffix@\n+gcjsubdir = @gcjsubdir@\n gxx_include_dir = @gxx_include_dir@\n here = @here@\n host = @host@\n@@ -319,6 +344,8 @@ multi_basedir = @multi_basedir@\n oldincludedir = @oldincludedir@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n+python_mod_dir = @python_mod_dir@\n+python_mod_dir_expanded = @python_mod_dir_expanded@\n sbindir = @sbindir@\n sharedstatedir = @sharedstatedir@\n subdirs = @subdirs@"}, {"sha": "ba058d6c4ea88465c2cef42f767396b2425d973b", "filename": "libjava/testsuite/Makefile.in", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9db365d82513a3aa4993bd0c8d3554caade44b9/libjava%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FMakefile.in?ref=c9db365d82513a3aa4993bd0c8d3554caade44b9", "patch": "@@ -87,13 +87,17 @@ AWK = @AWK@\n BACKTRACESPEC = @BACKTRACESPEC@\n BUILD_ECJ1_FALSE = @BUILD_ECJ1_FALSE@\n BUILD_ECJ1_TRUE = @BUILD_ECJ1_TRUE@\n+BUILD_VERSION = @BUILD_VERSION@\n CC = @CC@\n CCDEPMODE = @CCDEPMODE@\n CFLAGS = @CFLAGS@\n CHECKREFSPEC = @CHECKREFSPEC@\n CLASSPATH_SEPARATOR = @CLASSPATH_SEPARATOR@\n CPP = @CPP@\n CPPFLAGS = @CPPFLAGS@\n+CPU = @CPU@\n+CREATE_JAVA_HOME_FALSE = @CREATE_JAVA_HOME_FALSE@\n+CREATE_JAVA_HOME_TRUE = @CREATE_JAVA_HOME_TRUE@\n CXX = @CXX@\n CXXCPP = @CXXCPP@\n CXXDEPMODE = @CXXDEPMODE@\n@@ -123,6 +127,7 @@ GCJDEPMODE = @GCJDEPMODE@\n GCJFLAGS = @GCJFLAGS@\n GCJH = @GCJH@\n GCJVERSION = @GCJVERSION@\n+GCJ_BIN_DIR = @GCJ_BIN_DIR@\n GCJ_FOR_ECJX = @GCJ_FOR_ECJX@\n GCLIBS = @GCLIBS@\n GCSPEC = @GCSPEC@\n@@ -135,6 +140,8 @@ GTK_LIBS = @GTK_LIBS@\n HASH_SYNC_SPEC = @HASH_SYNC_SPEC@\n IEEESPEC = @IEEESPEC@\n INCLTDL = @INCLTDL@\n+INSTALL_AOT_RPM_FALSE = @INSTALL_AOT_RPM_FALSE@\n+INSTALL_AOT_RPM_TRUE = @INSTALL_AOT_RPM_TRUE@\n INSTALL_DATA = @INSTALL_DATA@\n INSTALL_ECJ_JAR_FALSE = @INSTALL_ECJ_JAR_FALSE@\n INSTALL_ECJ_JAR_TRUE = @INSTALL_ECJ_JAR_TRUE@\n@@ -150,13 +157,22 @@ JAVA_HOME_SET_FALSE = @JAVA_HOME_SET_FALSE@\n JAVA_HOME_SET_TRUE = @JAVA_HOME_SET_TRUE@\n JAVA_MAINTAINER_MODE_FALSE = @JAVA_MAINTAINER_MODE_FALSE@\n JAVA_MAINTAINER_MODE_TRUE = @JAVA_MAINTAINER_MODE_TRUE@\n+JAVA_VERSION = @JAVA_VERSION@\n JC1GCSPEC = @JC1GCSPEC@\n+JRE_BIN_DIR = @JRE_BIN_DIR@\n+JRE_DIR = @JRE_DIR@\n+JRE_LIB_DIR = @JRE_LIB_DIR@\n+JRE_LNK = @JRE_LNK@\n+JVM_JAR_DIR = @JVM_JAR_DIR@\n+JVM_JAR_ROOT_DIR = @JVM_JAR_ROOT_DIR@\n+JVM_ROOT_DIR = @JVM_ROOT_DIR@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LD_FINISH_STATIC_SPEC = @LD_FINISH_STATIC_SPEC@\n LD_START_STATIC_SPEC = @LD_START_STATIC_SPEC@\n LIBART_CFLAGS = @LIBART_CFLAGS@\n LIBART_LIBS = @LIBART_LIBS@\n+LIBDIR = @LIBDIR@\n LIBFFI = @LIBFFI@\n LIBFFIINCS = @LIBFFIINCS@\n LIBGCJDEBUG = @LIBGCJDEBUG@\n@@ -179,13 +195,15 @@ LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n MAINTAINER_MODE_FALSE = @MAINTAINER_MODE_FALSE@\n MAINTAINER_MODE_TRUE = @MAINTAINER_MODE_TRUE@\n+MAKE = @MAKE@\n MAKEINFO = @MAKEINFO@\n NATIVE_FALSE = @NATIVE_FALSE@\n NATIVE_TRUE = @NATIVE_TRUE@\n NEEDS_DATA_START_FALSE = @NEEDS_DATA_START_FALSE@\n NEEDS_DATA_START_TRUE = @NEEDS_DATA_START_TRUE@\n NM = @NM@\n OBJEXT = @OBJEXT@\n+OS = @OS@\n PACKAGE = @PACKAGE@\n PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@\n PACKAGE_NAME = @PACKAGE_NAME@\n@@ -197,6 +215,11 @@ PERL = @PERL@\n PKG_CONFIG = @PKG_CONFIG@\n PLATFORM = @PLATFORM@\n RANLIB = @RANLIB@\n+SDK_BIN_DIR = @SDK_BIN_DIR@\n+SDK_DIR = @SDK_DIR@\n+SDK_INCLUDE_DIR = @SDK_INCLUDE_DIR@\n+SDK_LIB_DIR = @SDK_LIB_DIR@\n+SDK_LNK = @SDK_LNK@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n SHELL = @SHELL@\n@@ -284,6 +307,8 @@ exec_prefix = @exec_prefix@\n extra_gij_ldflags = @extra_gij_ldflags@\n extra_ldflags = @extra_ldflags@\n extra_ldflags_libjava = @extra_ldflags_libjava@\n+gcc_suffix = @gcc_suffix@\n+gcjsubdir = @gcjsubdir@\n gxx_include_dir = @gxx_include_dir@\n here = @here@\n host = @host@\n@@ -308,6 +333,8 @@ multi_basedir = @multi_basedir@\n oldincludedir = @oldincludedir@\n prefix = @prefix@\n program_transform_name = @program_transform_name@\n+python_mod_dir = @python_mod_dir@\n+python_mod_dir_expanded = @python_mod_dir_expanded@\n sbindir = @sbindir@\n sharedstatedir = @sharedstatedir@\n subdirs = @subdirs@"}]}