{"sha": "5af638c8755a06886c68016348d76526d544681e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFmNjM4Yzg3NTVhMDY4ODZjNjgwMTYzNDhkNzY1MjZkNTQ0NjgxZQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-06-13T09:43:03Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-06-13T09:43:03Z"}, "message": "[multiple changes]\n\n2014-06-13  Robert Dewar  <dewar@adacore.com>\n\n\t* back_end.ads, back_end.adb: Make_Id, Make_SC, Set_RND are moved to\n\tTbuild.\n\t* tbuild.ads, tbuild.adb: Make_Id, Make_SC, Set_RND are moved here from\n\tBack_End.\n\t* gnat1drv.adb: Make_Id, Make_SC, Set_RND are moved to Tbuild\n\t* sem_warn.adb: Minor reformatting.\n\n2014-06-13  Doug Rupp  <rupp@adacore.com>\n\n\t* adaint.c (__gnat_open_new_temp) [VMS]: Open binary\n\tfiles with rfm=udf.\n\nFrom-SVN: r211612", "tree": {"sha": "49b64477cb77b9825f308d4b15a2540abb0be1b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49b64477cb77b9825f308d4b15a2540abb0be1b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5af638c8755a06886c68016348d76526d544681e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5af638c8755a06886c68016348d76526d544681e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5af638c8755a06886c68016348d76526d544681e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5af638c8755a06886c68016348d76526d544681e/comments", "author": null, "committer": null, "parents": [{"sha": "7f2c8954dac84a3fa5cabcc726b5e7d1ddff1142", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f2c8954dac84a3fa5cabcc726b5e7d1ddff1142", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f2c8954dac84a3fa5cabcc726b5e7d1ddff1142"}], "stats": {"total": 140, "additions": 79, "deletions": 61}, "files": [{"sha": "10ada4fcb7af1847de285d8e00091b18813fbcc8", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -1,3 +1,17 @@\n+2014-06-13  Robert Dewar  <dewar@adacore.com>\n+\n+\t* back_end.ads, back_end.adb: Make_Id, Make_SC, Set_RND are moved to\n+\tTbuild.\n+\t* tbuild.ads, tbuild.adb: Make_Id, Make_SC, Set_RND are moved here from\n+\tBack_End.\n+\t* gnat1drv.adb: Make_Id, Make_SC, Set_RND are moved to Tbuild\n+\t* sem_warn.adb: Minor reformatting.\n+\n+2014-06-13  Doug Rupp  <rupp@adacore.com>\n+\n+\t* adaint.c (__gnat_open_new_temp) [VMS]: Open binary\n+\tfiles with rfm=udf.\n+\n 2014-06-13  Yannick Moy  <moy@adacore.com>\n \n \t* sem_warn.adb (Check_Unset_References): Take"}, {"sha": "b1d31b79a96ff4873c6a996a2d51a3ee50cb41cf", "filename": "gcc/ada/adaint.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fadaint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fadaint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.c?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -6,7 +6,7 @@\n  *                                                                          *\n  *                          C Implementation File                           *\n  *                                                                          *\n- *          Copyright (C) 1992-2013, Free Software Foundation, Inc.         *\n+ *          Copyright (C) 1992-2014, Free Software Foundation, Inc.         *\n  *                                                                          *\n  * GNAT is free software;  you can  redistribute it  and/or modify it under *\n  * terms of the  GNU General Public License as published  by the Free Soft- *\n@@ -1159,9 +1159,12 @@ __gnat_open_new_temp (char *path, int fmode)\n     o_fmode = O_TEXT;\n \n #if defined (VMS)\n+  /* Passing rfm=stmlf for binary files seems questionable since it results\n+     in having an extraneous line feed added after every call to CRTL write,\n+     so pass rfm=udf (aka undefined) instead.  */\n   fd = open (path, O_WRONLY | O_CREAT | O_EXCL | o_fmode, PERM,\n-             \"rfm=stmlf\", \"ctx=rec\", \"rat=none\", \"shr=del,get,put,upd\",\n-             \"mbc=16\", \"deq=64\", \"fop=tef\");\n+             fmode ? \"rfm=stmlf\" : \"rfm=udf\", \"ctx=rec\", \"rat=none\",\n+             \"shr=del,get,put,upd\", \"mbc=16\", \"deq=64\", \"fop=tef\");\n #else\n   fd = open (path, O_WRONLY | O_CREAT | O_EXCL | o_fmode, PERM);\n #endif"}, {"sha": "b79f1f9072a79ce14d0d0e5e83c2fde041708f80", "filename": "gcc/ada/back_end.adb", "status": "modified", "additions": 1, "deletions": 42, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fback_end.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fback_end.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fback_end.adb?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -24,7 +24,6 @@\n ------------------------------------------------------------------------------\n \n with Atree;     use Atree;\n-with Csets;     use Csets;\n with Debug;     use Debug;\n with Elists;    use Elists;\n with Errout;    use Errout;\n@@ -34,14 +33,13 @@ with Opt;       use Opt;\n with Osint.C;   use Osint.C;\n with Namet;     use Namet;\n with Nlists;    use Nlists;\n-with Nmake;     use Nmake;\n-with Restrict;  use Restrict;\n with Stand;     use Stand;\n with Sinput;    use Sinput;\n with Stringt;   use Stringt;\n with Switch;    use Switch;\n with Switch.C;  use Switch.C;\n with System;    use System;\n+with Types;     use Types;\n \n with System.OS_Lib; use System.OS_Lib;\n \n@@ -189,36 +187,6 @@ package body Back_End is\n       raise Program_Error;\n    end Len_Arg;\n \n-   -------------\n-   -- Make_Id --\n-   -------------\n-\n-   function Make_Id (Str : Text_Buffer) return Node_Id is\n-   begin\n-      Name_Len := 0;\n-\n-      for J in Str'Range loop\n-         Name_Len := Name_Len + 1;\n-         Name_Buffer (Name_Len) := Fold_Lower (Str (J));\n-      end loop;\n-\n-      return\n-        Make_Identifier (System_Location,\n-          Chars => Name_Find);\n-   end Make_Id;\n-\n-   -------------\n-   -- Make_SC --\n-   -------------\n-\n-   function  Make_SC (Pre, Sel : Node_Id) return Node_Id is\n-   begin\n-      return\n-        Make_Selected_Component (System_Location,\n-          Prefix        => Pre,\n-          Selector_Name => Sel);\n-   end Make_SC;\n-\n    -----------------------------\n    -- Scan_Compiler_Arguments --\n    -----------------------------\n@@ -383,13 +351,4 @@ package body Back_End is\n       end loop;\n    end Scan_Compiler_Arguments;\n \n-   -------------\n-   -- Set_RND --\n-   -------------\n-\n-   procedure Set_RND (Unit : Node_Id) is\n-   begin\n-      Restrict.Set_Restriction_No_Dependence (Unit, Warn => False);\n-   end Set_RND;\n-\n end Back_End;"}, {"sha": "0d45a9ba7e6d2dca55edd051890b69e0644fe485", "filename": "gcc/ada/back_end.ads", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fback_end.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fback_end.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fback_end.ads?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -27,8 +27,6 @@\n --  Note: there are multiple bodies/variants of this package, so do not\n --  modify this spec without coordination.\n \n-with Types; use Types;\n-\n package Back_End is\n \n    type Back_End_Mode_Type is (\n@@ -86,13 +84,4 @@ package Back_End is\n    --  object file's timestamp is correct when compared with the corresponding\n    --  ali file by gnatmake.\n \n-   function  Make_Id (Str : Text_Buffer) return Node_Id;\n-   function  Make_SC (Pre, Sel : Node_Id) return Node_Id;\n-   procedure Set_RND (Unit : Node_Id);\n-   --  Subprograms for call to Get_Target_Parameters, see spec of package\n-   --  Targparm for full description of these three subprograms. These are\n-   --  parked in this package because they are have to be at the top level\n-   --  because of accessibility issues, and Gnat1drv, which is where they\n-   --  are used, is a subprogram.\n-\n end Back_End;"}, {"sha": "a2cc08912b2bbbc616b685607dfaee30878921af", "filename": "gcc/ada/gnat1drv.adb", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fgnat1drv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fgnat1drv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat1drv.adb?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -69,6 +69,7 @@ with Sprint;   use Sprint;\n with Stringt;\n with Stylesw;  use Stylesw;\n with Targparm; use Targparm;\n+with Tbuild;\n with Tree_Gen;\n with Treepr;   use Treepr;\n with Ttypes;\n@@ -818,9 +819,9 @@ begin\n            (System_Text  => Source_Text  (S),\n             Source_First => Source_First (S),\n             Source_Last  => Source_Last  (S),\n-            Make_Id      => Back_End.Make_Id'Unrestricted_Access,\n-            Make_SC      => Back_End.Make_SC'Unrestricted_Access,\n-            Set_RND      => Back_End.Set_RND'Unrestricted_Access);\n+            Make_Id      => Tbuild.Make_Id'Access,\n+            Make_SC      => Tbuild.Make_SC'Access,\n+            Set_RND      => Tbuild.Set_RND'Access);\n \n          --  Acquire configuration pragma information from Targparm\n "}, {"sha": "d54937b8d4a33a4fda10fbef3f99c0a86f034d2e", "filename": "gcc/ada/sem_warn.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fsem_warn.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Fsem_warn.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_warn.adb?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -1810,7 +1810,7 @@ package body Sem_Warn is\n                      SE : constant Entity_Id := Scope (E);\n \n                      function Within_Postcondition return Boolean;\n-                     --  Returns True iff N is within a Postcondition, a\n+                     --  Returns True if N is within a Postcondition, a\n                      --  Refined_Post, an Ensures component in a Test_Case,\n                      --  or a Contract_Cases.\n "}, {"sha": "17ca12eac8cb95a0e1e08ed3d22e42f9bd64bddb", "filename": "gcc/ada/tbuild.adb", "status": "modified", "additions": 41, "deletions": 1, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Ftbuild.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Ftbuild.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftbuild.adb?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2013, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,6 +24,7 @@\n ------------------------------------------------------------------------------\n \n with Atree;    use Atree;\n+with Csets;    use Csets;\n with Einfo;    use Einfo;\n with Elists;   use Elists;\n with Lib;      use Lib;\n@@ -240,6 +241,24 @@ package body Tbuild is\n       end if;\n    end Make_Float_Literal;\n \n+   -------------\n+   -- Make_Id --\n+   -------------\n+\n+   function Make_Id (Str : Text_Buffer) return Node_Id is\n+   begin\n+      Name_Len := 0;\n+\n+      for J in Str'Range loop\n+         Name_Len := Name_Len + 1;\n+         Name_Buffer (Name_Len) := Fold_Lower (Str (J));\n+      end loop;\n+\n+      return\n+        Make_Identifier (System_Location,\n+          Chars => Name_Find);\n+   end Make_Id;\n+\n    -------------------------------------\n    -- Make_Implicit_Exception_Handler --\n    -------------------------------------\n@@ -459,6 +478,18 @@ package body Tbuild is\n             UI_From_Int (RT_Exception_Code'Pos (Reason)));\n    end Make_Raise_Storage_Error;\n \n+   -------------\n+   -- Make_SC --\n+   -------------\n+\n+   function  Make_SC (Pre, Sel : Node_Id) return Node_Id is\n+   begin\n+      return\n+        Make_Selected_Component (System_Location,\n+          Prefix        => Pre,\n+          Selector_Name => Sel);\n+   end Make_SC;\n+\n    -------------------------\n    -- Make_String_Literal --\n    -------------------------\n@@ -749,6 +780,15 @@ package body Tbuild is\n       return Result;\n    end OK_Convert_To;\n \n+   -------------\n+   -- Set_RND --\n+   -------------\n+\n+   procedure Set_RND (Unit : Node_Id) is\n+   begin\n+      Set_Restriction_No_Dependence (Unit, Warn => False);\n+   end Set_RND;\n+\n    --------------------------\n    -- Unchecked_Convert_To --\n    --------------------------"}, {"sha": "67a59d923c3c603f1623ed790909ac7980856f88", "filename": "gcc/ada/tbuild.ads", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Ftbuild.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5af638c8755a06886c68016348d76526d544681e/gcc%2Fada%2Ftbuild.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftbuild.ads?ref=5af638c8755a06886c68016348d76526d544681e", "patch": "@@ -321,4 +321,16 @@ package Tbuild is\n    --  Like Convert_To, but if a conversion is actually needed, constructs an\n    --  N_Unchecked_Type_Conversion node to do the required conversion.\n \n+   -------------------------------------\n+   -- Subprograms for Use by Gnat1drv --\n+   -------------------------------------\n+\n+   function  Make_Id (Str : Text_Buffer) return Node_Id;\n+   function  Make_SC (Pre, Sel : Node_Id) return Node_Id;\n+   procedure Set_RND (Unit : Node_Id);\n+   --  Subprograms for call to Get_Target_Parameters in Gnat1drv, see spec\n+   --  of package Targparm for full description of these three subprograms.\n+   --  These have to be declared at the top level of a package (accessibility\n+   --  issues), and Gnat1drv is a procedure, so they can't go there.\n+\n end Tbuild;"}]}