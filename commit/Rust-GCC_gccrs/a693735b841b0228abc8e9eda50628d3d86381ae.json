{"sha": "a693735b841b0228abc8e9eda50628d3d86381ae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTY5MzczNWI4NDFiMDIyOGFiYzhlOWVkYTUwNjI4ZDNkODYzODFhZQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2003-01-30T11:52:51Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2003-01-30T11:52:51Z"}, "message": "config.if: If gcc_version is already set, just use it.\n\n* config.if: If gcc_version is already set, just use it.  Don't set\ngcc_version_trigger if it's already set, otherwise set it to\ngcc/version.c, but only if the file exists.  If it is not set and\ngcc/version.c does not exist, try to extract the version number from\n$CC.\n\nFrom-SVN: r62131", "tree": {"sha": "b75b38364e9f3474086c26670a715cda214575ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b75b38364e9f3474086c26670a715cda214575ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a693735b841b0228abc8e9eda50628d3d86381ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a693735b841b0228abc8e9eda50628d3d86381ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a693735b841b0228abc8e9eda50628d3d86381ae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a693735b841b0228abc8e9eda50628d3d86381ae/comments", "author": null, "committer": null, "parents": [{"sha": "14d22dd6675f2225b5de7c0e591893f84fb6b9e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14d22dd6675f2225b5de7c0e591893f84fb6b9e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14d22dd6675f2225b5de7c0e591893f84fb6b9e0"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "b4e998cb0757a65a3e164e5c2419bab4a6a4f74c", "filename": "ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a693735b841b0228abc8e9eda50628d3d86381ae/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a693735b841b0228abc8e9eda50628d3d86381ae/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=a693735b841b0228abc8e9eda50628d3d86381ae", "patch": "@@ -1,3 +1,11 @@\n+2003-01-30  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* config.if: If gcc_version is already set, just use it.  Don't set\n+\tgcc_version_trigger if it's already set, otherwise set it to\n+\tgcc/version.c, but only if the file exists.  If it is not set and\n+\tgcc/version.c does not exist, try to extract the version number from\n+\t$CC.\n+\n 2003-01-29  Andreas Tobler  <a.tobler@schweiz.ch>\n \n         * MAINTAINERS: Add myself to write-after-approval list."}, {"sha": "c38b59c841e7a4493da268e1efe2393a302846b0", "filename": "config.if", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a693735b841b0228abc8e9eda50628d3d86381ae/config.if", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a693735b841b0228abc8e9eda50628d3d86381ae/config.if", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config.if?ref=a693735b841b0228abc8e9eda50628d3d86381ae", "patch": "@@ -22,9 +22,18 @@ fi\n \n # Set libstdcxx_incdir.\n # This is the same as gcc/configure.in and libstdc++-v3/acinclude.m4. \n-gcc_version_trigger=${if_topsrcdir}/gcc/version.c\n-gcc_version_full=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\"\\([^\"]*\\)\".*/\\1/'`\n-gcc_version=`echo ${gcc_version_full} | sed -e 's/\\([^ ]*\\) .*/\\1/'`\n+if test -z \"$gcc_version\"; then\n+  if test -z \"${gcc_version_trigger}\" \\\n+     && test -f ${if_topsrcdir}/gcc/version.c; then\n+    gcc_version_trigger=${if_topsrcdir}/gcc/version.c\n+  fi    \n+  if test -f \"${gcc_version_trigger}\"; then\n+    gcc_version_full=`grep version_string \"${gcc_version_trigger}\" | sed -e 's/.*\"\\([^\"]*\\)\".*/\\1/'`\n+  else\n+    gcc_version_full=`$CC -v 2>&1 | sed -n 's/^gcc version //p'`\n+  fi\n+  gcc_version=`echo ${gcc_version_full} | sed -e 's/\\([^ ]*\\) .*/\\1/'`\n+fi\n libstdcxx_incdir=c++/${gcc_version}\n \n # The trickiest part is libc_interface."}]}