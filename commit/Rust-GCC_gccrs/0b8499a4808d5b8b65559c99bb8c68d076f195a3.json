{"sha": "0b8499a4808d5b8b65559c99bb8c68d076f195a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGI4NDk5YTQ4MDhkNWI4YjY1NTU5Yzk5YmI4YzY4ZDA3NmYxOTVhMw==", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2019-12-17T11:19:32Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2019-12-17T11:19:32Z"}, "message": "libgomp/openacc.f90 \u2013 clean-up public/private attributes\n\n        * config/accel/openacc.f90 (module openacc_kinds): Use 'PUBLIC' to mark\n        all symbols as public except for the 'use \u2026, only' imported symbol,\n        which is private. \n        (module openacc): Default to 'PRIVATE' to exclude openacc_internal; mark\n        all symbols from module openacc_kinds as PUBLIC\n        * openacc.f90: Add comment with crossref to that file and openmp_lib.h;\n        fix comment typo.\n        * openacc_lib.h (acc_device_gcn): Add this PARAMETER.\n\nFrom-SVN: r279456", "tree": {"sha": "617a68936b6fa25f2445ff22344fd341560fab8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/617a68936b6fa25f2445ff22344fd341560fab8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b8499a4808d5b8b65559c99bb8c68d076f195a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b8499a4808d5b8b65559c99bb8c68d076f195a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b8499a4808d5b8b65559c99bb8c68d076f195a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b8499a4808d5b8b65559c99bb8c68d076f195a3/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e55cdb1455417b139374bf2eee5fce6692b48de7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e55cdb1455417b139374bf2eee5fce6692b48de7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e55cdb1455417b139374bf2eee5fce6692b48de7"}], "stats": {"total": 43, "additions": 33, "deletions": 10}, "files": [{"sha": "b46a68255dfe344f8672eb43cff27a3584e2bbdc", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=0b8499a4808d5b8b65559c99bb8c68d076f195a3", "patch": "@@ -1,3 +1,14 @@\n+2019-12-17  Tobias Burnus  <tobias@codesourcery.com>\n+\n+\t* config/accel/openacc.f90 (module openacc_kinds): Use 'PUBLIC' to mark\n+\tall symbols as public except for the 'use \u2026, only' imported symbol,\n+\twhich is private.\n+\t(module openacc): Default to 'PRIVATE' to exclude openacc_internal; mark\n+\tall symbols from module openacc_kinds as PUBLIC\n+\t* openacc.f90: Add comment with crossref to that file and openmp_lib.h;\n+\tfix comment typo.\n+\t* openacc_lib.h (acc_device_gcn): Add this PARAMETER.\n+\n 2019-12-13  Julian Brown  <julian@codesourcery.com>\n \n \tPR libgomp/92881"}, {"sha": "badf5e176dd7611e5a9e89695528e38a84855b15", "filename": "libgomp/config/accel/openacc.f90", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2Fconfig%2Faccel%2Fopenacc.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2Fconfig%2Faccel%2Fopenacc.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfig%2Faccel%2Fopenacc.f90?ref=0b8499a4808d5b8b65559c99bb8c68d076f195a3", "patch": "@@ -36,13 +36,12 @@ module openacc_kinds\n   use iso_fortran_env, only: int32\n   implicit none\n \n+  public\n   private :: int32\n-  public :: acc_device_kind\n \n-  integer, parameter :: acc_device_kind = int32\n+  ! When adding items, also update 'public' setting in 'module openacc' below.\n \n-  public :: acc_device_none, acc_device_default, acc_device_host\n-  public :: acc_device_not_host, acc_device_nvidia\n+  integer, parameter :: acc_device_kind = int32\n \n   ! Keep in sync with include/gomp-constants.h.\n   integer (acc_device_kind), parameter :: acc_device_none = 0\n@@ -53,7 +52,7 @@ module openacc_kinds\n   integer (acc_device_kind), parameter :: acc_device_nvidia = 5\n   integer (acc_device_kind), parameter :: acc_device_gcn = 8\n \n-end module\n+end module openacc_kinds\n \n module openacc_internal\n   use openacc_kinds\n@@ -75,13 +74,20 @@ function acc_on_device_l (d) &\n       integer (c_int), value :: d\n     end function\n   end interface\n-end module\n+end module openacc_internal\n \n module openacc\n   use openacc_kinds\n   use openacc_internal\n   implicit none\n \n+  private\n+\n+  ! From openacc_kinds\n+  public :: acc_device_kind\n+  public :: acc_device_none, acc_device_default, acc_device_host\n+  public :: acc_device_not_host, acc_device_nvidia, acc_device_gcn\n+\n   public :: acc_on_device\n \n   interface acc_on_device"}, {"sha": "fb7fc6e6d77e70fb55a106dbfc4e7096ef4fb5a8", "filename": "libgomp/openacc.f90", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2Fopenacc.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2Fopenacc.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fopenacc.f90?ref=0b8499a4808d5b8b65559c99bb8c68d076f195a3", "patch": "@@ -27,14 +27,16 @@\n !  see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n !  <http://www.gnu.org/licenses/>.\n \n+! Keep in sync with config/accel/openacc.f90 and openacc_lib.h.\n+\n module openacc_kinds\n   use iso_fortran_env, only: int32\n   implicit none\n \n   public\n   private :: int32\n \n-  ! When adding items, also update 'public' setting in 'module openmp' below.\n+  ! When adding items, also update 'public' setting in 'module openacc' below.\n \n   integer, parameter :: acc_device_kind = int32\n \n@@ -52,7 +54,7 @@ module openacc_kinds\n   ! Keep in sync with include/gomp-constants.h.\n   integer (acc_handle_kind), parameter :: acc_async_noval = -1\n   integer (acc_handle_kind), parameter :: acc_async_sync = -2\n-end module\n+end module openacc_kinds\n \n module openacc_internal\n   use openacc_kinds\n@@ -704,14 +706,15 @@ subroutine acc_update_self_async_l (a, len, async) &\n       integer (c_int), value :: async\n     end subroutine\n   end interface\n-end module\n+end module openacc_internal\n \n module openacc\n   use openacc_kinds\n   use openacc_internal\n   implicit none\n \n   private\n+\n   ! From openacc_kinds\n   public :: acc_device_kind, acc_handle_kind\n   public :: acc_device_none, acc_device_default, acc_device_host\n@@ -933,7 +936,7 @@ module openacc\n     procedure :: acc_update_self_async_array_h\n   end interface\n \n-end module\n+end module openacc\n \n function acc_get_num_devices_h (d)\n   use openacc_internal, only: acc_get_num_devices_l"}, {"sha": "a928414cffeb0a98133a53b11b5292f9d09a01e8", "filename": "libgomp/openacc_lib.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2Fopenacc_lib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b8499a4808d5b8b65559c99bb8c68d076f195a3/libgomp%2Fopenacc_lib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fopenacc_lib.h?ref=0b8499a4808d5b8b65559c99bb8c68d076f195a3", "patch": "@@ -32,6 +32,8 @@\n ! Alternatively, the user can use the module version, which permits\n ! compilation with -std=f95.\n \n+! Keep in sync with openacc.f90 and config/accel/openacc.f90.\n+\n       integer, parameter :: acc_device_kind = 4\n \n !     Keep in sync with include/gomp-constants.h.\n@@ -42,6 +44,7 @@\n !     removed.\n       integer (acc_device_kind), parameter :: acc_device_not_host = 4\n       integer (acc_device_kind), parameter :: acc_device_nvidia = 5\n+      integer (acc_device_kind), parameter :: acc_device_gcn = 8\n \n       integer, parameter :: acc_handle_kind = 4\n "}]}