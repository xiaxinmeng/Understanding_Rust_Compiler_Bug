{"sha": "46ec9261008a118470c43d6b7eeb95e4c4b12e67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZlYzkyNjEwMDhhMTE4NDcwYzQzZDZiN2VlYjk1ZTRjNGIxMmU2Nw==", "commit": {"author": {"name": "Thomas Preud'homme", "email": "thomas.preudhomme@linaro.org", "date": "2018-10-25T10:35:21Z"}, "committer": {"name": "Thomas Preud'homme", "email": "thopre01@gcc.gnu.org", "date": "2018-10-25T10:35:21Z"}, "message": "dg-cmp-results: display NA->FAIL & NA->UNRESOLVED by default\n\nCurrently, dg-cmp-results will not print anything for a test that was\nnot run before, even if it is a FAIL or UNRESOLVED now. This means that\nwhen contributing a code change together with a testcase in the same\ncommit one must run dg-cmp-results twice: once to check for regression\non a full testsuite run and once against the new testcase with -v -v.\nThis also prevents using dg-cmp-results on sum files generated with\ntest_summary since these would not contain PASS.\n\nThis patch changes dg-cmp-results to print NA->FAIL and NA->UNRESOLVED\nchanges by default.\n\n2018-10-25  Thomas Preud'homme  <thomas.preudhomme@linaro.org>\n\n    contrib/\n    * dg-cmp-results.sh: Print NA-FAIL and NA->UNRESOLVED changes at\n    default verbosity.\n\nFrom-SVN: r265483", "tree": {"sha": "26757e39aab17331c60cfba1a6c0de5a1632507d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26757e39aab17331c60cfba1a6c0de5a1632507d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46ec9261008a118470c43d6b7eeb95e4c4b12e67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46ec9261008a118470c43d6b7eeb95e4c4b12e67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46ec9261008a118470c43d6b7eeb95e4c4b12e67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46ec9261008a118470c43d6b7eeb95e4c4b12e67/comments", "author": {"login": "tpreudhomme-linaro", "id": 43454833, "node_id": "MDQ6VXNlcjQzNDU0ODMz", "avatar_url": "https://avatars.githubusercontent.com/u/43454833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tpreudhomme-linaro", "html_url": "https://github.com/tpreudhomme-linaro", "followers_url": "https://api.github.com/users/tpreudhomme-linaro/followers", "following_url": "https://api.github.com/users/tpreudhomme-linaro/following{/other_user}", "gists_url": "https://api.github.com/users/tpreudhomme-linaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tpreudhomme-linaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tpreudhomme-linaro/subscriptions", "organizations_url": "https://api.github.com/users/tpreudhomme-linaro/orgs", "repos_url": "https://api.github.com/users/tpreudhomme-linaro/repos", "events_url": "https://api.github.com/users/tpreudhomme-linaro/events{/privacy}", "received_events_url": "https://api.github.com/users/tpreudhomme-linaro/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "541eccada375ed8309ab805e0a4df146ac07fc2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/541eccada375ed8309ab805e0a4df146ac07fc2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/541eccada375ed8309ab805e0a4df146ac07fc2d"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "6606b1df6dc57b7ba753eec1db360cf2cc7ca2ac", "filename": "contrib/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46ec9261008a118470c43d6b7eeb95e4c4b12e67/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46ec9261008a118470c43d6b7eeb95e4c4b12e67/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=46ec9261008a118470c43d6b7eeb95e4c4b12e67", "patch": "@@ -1,3 +1,8 @@\n+2018-10-25  Thomas Preud'homme  <thomas.preudhomme@linaro.org>\n+\n+\t* dg-cmp-results.sh: Print NA-FAIL and NA->UNRESOLVED changes at\n+\tdefault verbosity.\n+\n 2018-10-16  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* config-list.mk (LIST): Switch to i686-solaris2.11,"}, {"sha": "eb976f68f4ac6800fca67c48bb6b3466f6213604", "filename": "contrib/dg-cmp-results.sh", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46ec9261008a118470c43d6b7eeb95e4c4b12e67/contrib%2Fdg-cmp-results.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46ec9261008a118470c43d6b7eeb95e4c4b12e67/contrib%2Fdg-cmp-results.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fdg-cmp-results.sh?ref=46ec9261008a118470c43d6b7eeb95e4c4b12e67", "patch": "@@ -137,8 +137,11 @@ function drop() {\n function compare(st, nm) {\n     old = peek()\n     if (old == 0) {\n-        # This new test wasn't run last time.\n-        if (verbose >= 2) printf(\"NA->%s:%s\\n\", st, nm)\n+\t# This new test wasn't run last time.\n+\tif(st == \"FAIL\" || st == \"UNRESOLVED\" || verbose >= 2) {\n+\t    # New test fails or we want all changes\n+\t    printf(\"NA->%s:%s\\n\", st, nm)\n+\t}\n     }\n     else {\n \t# Compare this new test to the first queued old one."}]}