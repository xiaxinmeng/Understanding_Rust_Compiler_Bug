{"sha": "ecce923e1073014b820367e487df93b7c81542fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNjZTkyM2UxMDczMDE0YjgyMDM2N2U0ODdkZjkzYjdjODE1NDJmYg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-08-23T05:52:37Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-08-23T05:52:37Z"}, "message": "* read-rtl.c (read_rtx): Tidy use of format_ptr.\n\nFrom-SVN: r86403", "tree": {"sha": "ba92bf163fa4223390a08c190b2807a9cafe6cd5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba92bf163fa4223390a08c190b2807a9cafe6cd5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ecce923e1073014b820367e487df93b7c81542fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecce923e1073014b820367e487df93b7c81542fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecce923e1073014b820367e487df93b7c81542fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecce923e1073014b820367e487df93b7c81542fb/comments", "author": null, "committer": null, "parents": [{"sha": "a269d6c8b7e68234ea5de8d42d15646911c7eea3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a269d6c8b7e68234ea5de8d42d15646911c7eea3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a269d6c8b7e68234ea5de8d42d15646911c7eea3"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "c442371f6579272ad25554000affb18de551448c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecce923e1073014b820367e487df93b7c81542fb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecce923e1073014b820367e487df93b7c81542fb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ecce923e1073014b820367e487df93b7c81542fb", "patch": "@@ -1,3 +1,7 @@\n+2004-08-23  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* read-rtl.c (read_rtx): Tidy use of format_ptr.\n+\n 2004-08-23  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* read-rtl.c (string_obstack): New file-scope variable."}, {"sha": "2b9bd915d23ac279a95ed1e888bcb743d6cda228", "filename": "gcc/read-rtl.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecce923e1073014b820367e487df93b7c81542fb/gcc%2Fread-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecce923e1073014b820367e487df93b7c81542fb/gcc%2Fread-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fread-rtl.c?ref=ecce923e1073014b820367e487df93b7c81542fb", "patch": "@@ -598,8 +598,8 @@ read_rtx (FILE *infile)\n   else\n     ungetc (i, infile);\n \n-  for (i = 0; i < GET_RTX_LENGTH (GET_CODE (return_rtx)); i++)\n-    switch (*format_ptr++)\n+  for (i = 0; format_ptr[i] != 0; i++)\n+    switch (format_ptr[i])\n       {\n \t/* 0 means a field for internal use only.\n \t   Don't expect it to be present in the input.  */\n@@ -668,15 +668,15 @@ read_rtx (FILE *infile)\n \t      /* 'S' fields are optional and should be NULL if no string\n \t\t was given.  Also allow normal 's' and 'T' strings to be\n \t\t omitted, treating them in the same way as empty strings.  */\n-\t      XSTR (return_rtx, i) = (format_ptr[-1] == 'S' ? NULL : \"\");\n+\t      XSTR (return_rtx, i) = (format_ptr[i] == 'S' ? NULL : \"\");\n \t      break;\n \t    }\n \n \t  /* The output template slot of a DEFINE_INSN,\n \t     DEFINE_INSN_AND_SPLIT, or DEFINE_PEEPHOLE automatically\n \t     gets a star inserted as its first character, if it is\n \t     written with a brace block instead of a string constant.  */\n-\t  star_if_braced = (format_ptr[-1] == 'T');\n+\t  star_if_braced = (format_ptr[i] == 'T');\n \n \t  stringbuf = read_string (infile, star_if_braced);\n \n@@ -741,7 +741,7 @@ read_rtx (FILE *infile)\n       default:\n \tfprintf (stderr,\n \t\t \"switch format wrong in rtl.read_rtx(). format was: %c.\\n\",\n-\t\t format_ptr[-1]);\n+\t\t format_ptr[i]);\n \tfprintf (stderr, \"\\tfile position: %ld\\n\", ftell (infile));\n \tabort ();\n       }"}]}