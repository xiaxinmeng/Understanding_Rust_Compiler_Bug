{"sha": "2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmU2MzE1ZWY4YzhhMGY2MDdmZTg2YzdiN2NmN2Q4OTU0OWNhYTFlOQ==", "commit": {"author": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2017-03-23T13:13:44Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2017-03-23T13:13:44Z"}, "message": "re PR tree-optimization/79908 (ICE in gimplify_expr (gimplify.c:12155) gimplification failed)\n\n[gcc]\n\n2017-03-23  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n            Richard Biener  <rguenth@suse.com>\n\n\tPR tree-optimization/79908\n\tPR tree-optimization/80136\n\t* tree-stdarg.c (expand_ifn_va_arg_1): For a VA_ARG whose LHS has\n\tbeen cast away, gimplify_and_add suffices.\n\n[gcc/testsuite]\n\n2017-03-23  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n            Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/79908\n\tPR tree-optimization/80136\n\t* gcc.dg/torture/pr79908.c: New file.\n\nFrom-SVN: r246418", "tree": {"sha": "45ce6980dee49758352b663866ffdb54957f7720", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45ce6980dee49758352b663866ffdb54957f7720"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/comments", "author": null, "committer": null, "parents": [{"sha": "16e9eaa62786ece30c36748a29a0d9d0ca62f345", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16e9eaa62786ece30c36748a29a0d9d0ca62f345", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16e9eaa62786ece30c36748a29a0d9d0ca62f345"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "091d78ab739cbb3bf52f2539cdb999e8b4c76963", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "patch": "@@ -1,3 +1,11 @@\n+2017-03-23  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+            Richard Biener  <rguenth@suse.com>\n+\n+\tPR tree-optimization/79908\n+\tPR tree-optimization/80136\n+\t* tree-stdarg.c (expand_ifn_va_arg_1): For a VA_ARG whose LHS has\n+\tbeen cast away, gimplify_and_add suffices.\n+\n 2017-03-23  Markus Trippelsdorf  <markus@trippelsdorf.de> \n \n \t* tree-vrp.c (identify_jump_threads): Delete avail_exprs."}, {"sha": "257c5ce832abffc44d0e93e091b42e1bb9b864c7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "patch": "@@ -1,6 +1,13 @@\n+2017-03-23  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+            Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/79908\n+\tPR tree-optimization/80136\n+\t* gcc.dg/torture/pr79908.c: New file.\n+\n 2017-03-22 Nicolas Koenig <koenigni@student.ethz.ch>\n \n-\tPR fortran/39239\t\n+\tPR fortran/39239\n \t* gfortran.dg/equiv_constraint_bind_c.f90: New test.\n \n 2017-03-22  Jakub Jelinek  <jakub@redhat.com>"}, {"sha": "e2d6920a4cda00d34a56a2acdefbb6398ba8f81b", "filename": "gcc/testsuite/gcc.dg/torture/pr79908.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79908.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79908.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr79908.c?ref=2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+\n+/* Used to fail in the stdarg pass before fix for PR79908.  */\n+\n+typedef __builtin_va_list __gnuc_va_list;\n+typedef __gnuc_va_list va_list;\n+\n+void testva (int n, ...)\n+{\n+  va_list ap;\n+  _Complex int i = __builtin_va_arg (ap, _Complex int);\n+}"}, {"sha": "923b315e79e17d008ffff9370394a68efad0f0e1", "filename": "gcc/tree-stdarg.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2Ftree-stdarg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9/gcc%2Ftree-stdarg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-stdarg.c?ref=2e6315ef8c8a0f607fe86c7b7cf7d89549caa1e9", "patch": "@@ -1058,7 +1058,7 @@ expand_ifn_va_arg_1 (function *fun)\n \t    gimplify_assign (lhs, expr, &pre);\n \t  }\n \telse\n-\t  gimplify_expr (&expr, &pre, &post, is_gimple_lvalue, fb_lvalue);\n+\t  gimplify_and_add (expr, &pre);\n \n \tinput_location = saved_location;\n \tpop_gimplify_context (NULL);"}]}