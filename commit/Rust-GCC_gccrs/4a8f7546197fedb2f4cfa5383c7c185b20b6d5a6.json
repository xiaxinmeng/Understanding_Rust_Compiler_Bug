{"sha": "4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE4Zjc1NDYxOTdmZWRiMmY0Y2ZhNTM4M2M3YzE4NWIyMGI2ZDVhNg==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@google.com", "date": "2012-08-17T15:37:57Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2012-08-17T15:37:57Z"}, "message": "re PR bootstrap/54281 (Fails to bootstrap with --disable-nls)\n\n2012-08-17  Diego Novillo  <dnovillo@google.com>\n\n\tPR bootstrap/54281\n\t* configure.ac: Add libintl.h to AC_CHECK_HEADERS list.\n\t* config.in: Regenerate.\n\t* configure: Regenerate.\n\t* intl.h: Always include libintl.h if HAVE_LIBINTL_H is\n\tset.\n\nFrom-SVN: r190487", "tree": {"sha": "76d219330f05a882e13d22071c9acfedb91f7040", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76d219330f05a882e13d22071c9acfedb91f7040"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/comments", "author": {"login": "dnovillo", "id": 7295335, "node_id": "MDQ6VXNlcjcyOTUzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7295335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnovillo", "html_url": "https://github.com/dnovillo", "followers_url": "https://api.github.com/users/dnovillo/followers", "following_url": "https://api.github.com/users/dnovillo/following{/other_user}", "gists_url": "https://api.github.com/users/dnovillo/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnovillo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnovillo/subscriptions", "organizations_url": "https://api.github.com/users/dnovillo/orgs", "repos_url": "https://api.github.com/users/dnovillo/repos", "events_url": "https://api.github.com/users/dnovillo/events{/privacy}", "received_events_url": "https://api.github.com/users/dnovillo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a508e1a8cb73ecd40946610bb612d8296ae2156c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a508e1a8cb73ecd40946610bb612d8296ae2156c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a508e1a8cb73ecd40946610bb612d8296ae2156c"}], "stats": {"total": 33, "additions": 28, "deletions": 5}, "files": [{"sha": "9f74dc09d2c5fbd75c93ca94a70432562415c18f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "patch": "@@ -1,3 +1,12 @@\n+2012-08-17  Diego Novillo  <dnovillo@google.com>\n+\n+\tPR bootstrap/54281\n+\t* configure.ac: Add libintl.h to AC_CHECK_HEADERS list.\n+\t* config.in: Regenerate.\n+\t* configure: Regenerate.\n+\t* intl.h: Always include libintl.h if HAVE_LIBINTL_H is\n+\tset.\n+\n 2012-08-17  Richard Guenther  <rguenther@suse.de>\n \n \t* bitmap.h (struct bitmap_element_def): GTY annotate next/prev."}, {"sha": "a9417dfd80b704f4912e44884cd18ad1ab8279e1", "filename": "gcc/config.in", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "patch": "@@ -1260,6 +1260,12 @@\n #endif\n \n \n+/* Define to 1 if you have the <libintl.h> header file. */\n+#ifndef USED_FOR_TARGET\n+#undef HAVE_LIBINTL_H\n+#endif\n+\n+\n /* Define to 1 if you have the <limits.h> header file. */\n #ifndef USED_FOR_TARGET\n #undef HAVE_LIMITS_H"}, {"sha": "7f3489d0e8f4e68e5fabdabdd9c2981cb7dd949c", "filename": "gcc/configure", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "patch": "@@ -8248,7 +8248,7 @@ fi\n for ac_header in limits.h stddef.h string.h strings.h stdlib.h time.h iconv.h \\\n \t\t fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n \t\t sys/resource.h sys/param.h sys/times.h sys/stat.h \\\n-\t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h\n+\t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h libintl.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_preproc \"$LINENO\" \"$ac_header\" \"$as_ac_Header\"\n@@ -17742,7 +17742,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 17744 \"configure\"\n+#line 17745 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -17848,7 +17848,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 17850 \"configure\"\n+#line 17851 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H"}, {"sha": "6bfbf354d1c8120016d063eb2481885b2cf2e28a", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "patch": "@@ -912,7 +912,7 @@ AC_HEADER_SYS_WAIT\n AC_CHECK_HEADERS(limits.h stddef.h string.h strings.h stdlib.h time.h iconv.h \\\n \t\t fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n \t\t sys/resource.h sys/param.h sys/times.h sys/stat.h \\\n-\t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h)\n+\t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h libintl.h)\n \n # Check for thread headers.\n AC_CHECK_HEADER(thread.h, [have_thread_h=yes], [have_thread_h=])"}, {"sha": "03be420fe68d0a219af8ea62df903113bc4cd771", "filename": "gcc/intl.h", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fintl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6/gcc%2Fintl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintl.h?ref=4a8f7546197fedb2f4cfa5383c7c185b20b6d5a6", "patch": "@@ -27,8 +27,16 @@\n # define setlocale(category, locale) (locale)\n #endif\n \n+/* If libintl.h is available, include it before testing for NLS. If we\n+   are building with --disable-nls and another header file includes\n+   libintl.h, the stubs defined down below will cause syntax errors\n+   when parsing libintl.h. See http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54281\n+   for details.  */\n+#if defined(HAVE_LIBINTL_H) || defined(ENABLE_NLS)\n+# include <libintl.h>\n+#endif\n+\n #ifdef ENABLE_NLS\n-#include <libintl.h>\n extern void gcc_init_libintl (void);\n extern size_t gcc_gettext_width (const char *);\n #else"}]}