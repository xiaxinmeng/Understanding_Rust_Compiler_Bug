{"sha": "974b8e618b52dd1d30ca067e75995fe9fc8e6895", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTc0YjhlNjE4YjUyZGQxZDMwY2EwNjdlNzU5OTVmZTlmYzhlNjg5NQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-12T18:28:32Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-12T18:28:32Z"}, "message": "re PR fortran/90002 (ICE: free_expr0(): Bad expr type)\n\n2019-06-12  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/90002\n\t* array.c (gfc_free_array_spec): When freeing an array-spec, avoid\n\tan ICE for assumed-shape coarrays \n\n2019-06-12  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/90002\n\t* gfortran.dg/pr90002.f90: New test.\n\nFrom-SVN: r272201", "tree": {"sha": "b5896ea164223e31c79166f4fd93421515a68a6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5896ea164223e31c79166f4fd93421515a68a6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/974b8e618b52dd1d30ca067e75995fe9fc8e6895", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/974b8e618b52dd1d30ca067e75995fe9fc8e6895", "html_url": "https://github.com/Rust-GCC/gccrs/commit/974b8e618b52dd1d30ca067e75995fe9fc8e6895", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/974b8e618b52dd1d30ca067e75995fe9fc8e6895/comments", "author": null, "committer": null, "parents": [{"sha": "e97bf6bbbdb43e65cca8509a0f9af681c2a01c2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e97bf6bbbdb43e65cca8509a0f9af681c2a01c2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e97bf6bbbdb43e65cca8509a0f9af681c2a01c2b"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "ee4dbea350e81e887ae090f0255f4c79e327bec0", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=974b8e618b52dd1d30ca067e75995fe9fc8e6895", "patch": "@@ -1,3 +1,9 @@\n+2019-06-12  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/90002\n+\t* array.c (gfc_free_array_spec): When freeing an array-spec, avoid\n+\tan ICE for assumed-shape coarrays \n+\n 2019-06-08  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/90786"}, {"sha": "0aee220e68d071b8a1e4dec55d2260860d7cc18a", "filename": "gcc/fortran/array.c", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ffortran%2Farray.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ffortran%2Farray.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farray.c?ref=974b8e618b52dd1d30ca067e75995fe9fc8e6895", "patch": "@@ -324,10 +324,22 @@ gfc_free_array_spec (gfc_array_spec *as)\n   if (as == NULL)\n     return;\n \n-  for (i = 0; i < as->rank + as->corank; i++)\n+  if (as->corank == 0)\n     {\n-      gfc_free_expr (as->lower[i]);\n-      gfc_free_expr (as->upper[i]);\n+      for (i = 0; i < as->rank; i++)\n+\t{\n+\t  gfc_free_expr (as->lower[i]);\n+\t  gfc_free_expr (as->upper[i]);\n+\t}\n+    }\n+  else\n+    {\n+      int n = as->rank + as->corank - (as->cotype == AS_EXPLICIT ? 1 : 0);\n+      for (i = 0; i < n; i++)\n+\t{\n+\t  gfc_free_expr (as->lower[i]);\n+\t  gfc_free_expr (as->upper[i]);\n+\t}\n     }\n \n   free (as);"}, {"sha": "e5f1a56e6ff32a5c94a5a2c9a03ad06030b8bd02", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=974b8e618b52dd1d30ca067e75995fe9fc8e6895", "patch": "@@ -1,3 +1,8 @@\n+2019-06-12  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/90002\n+\t* gfortran.dg/pr90002.f90: New test.\n+\n 2019-06-12  Martin Sebor  <msebor@redhat.com>\n \n \tPR middle-end/90676"}, {"sha": "cb993a5d5cce398a443a6b341711b3319197fa68", "filename": "gcc/testsuite/gfortran.dg/pr90002.f90", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr90002.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/974b8e618b52dd1d30ca067e75995fe9fc8e6895/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr90002.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr90002.f90?ref=974b8e618b52dd1d30ca067e75995fe9fc8e6895", "patch": "@@ -0,0 +1,6 @@\n+! { dg-do compile }\n+! { dg-options \"-fcoarray=single\" }\n+! Contributed by Arseny Solokha <asolokha at gmx dot de>\n+module pc\n+  integer, dimension(1) :: zw[1:1,1:*]\n+end module pc"}]}