{"sha": "723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzIzYTdjZWRhZTk1NzRjODE1OGJjZjllMGM1NjNlYmI3MmE2ZTI4Yw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2008-10-30T12:49:31Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-10-30T12:49:31Z"}, "message": "re PR middle-end/37730 (gcc.c-torture/compile/pr37713.c ICEs at -O3 -msse2)\n\n\tPR middle-end/37730\n\t* expr.c (store_constructor): For vectors, if target is a MEM, use\n\ttarget's MEM_ALIAS_SET instead of elttype alias set.\n\n\t* gcc.dg/vect/pr37730.c: New test.\n\nFrom-SVN: r141461", "tree": {"sha": "d8370185571c475f94b776bd2fda5cbcb22ceca6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d8370185571c475f94b776bd2fda5cbcb22ceca6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8ec6daa568f5f3d0ded34dc69905e9ee9e241a3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ec6daa568f5f3d0ded34dc69905e9ee9e241a3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ec6daa568f5f3d0ded34dc69905e9ee9e241a3e"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "b7b85230ae3542fc3a19993dd4a7964c5de5c11d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "patch": "@@ -1,3 +1,9 @@\n+2008-10-30  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/37730\n+\t* expr.c (store_constructor): For vectors, if target is a MEM, use\n+\ttarget's MEM_ALIAS_SET instead of elttype alias set.\n+\n 2008-10-29  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n \tPR target/37909"}, {"sha": "6db637e53bf8536fc53c0bb65ab5bd15baf2eb04", "filename": "gcc/expr.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "patch": "@@ -5579,6 +5579,7 @@ store_constructor (tree exp, rtx target, int cleared, HOST_WIDE_INT size)\n \tHOST_WIDE_INT bitpos;\n \trtvec vector = NULL;\n \tunsigned n_elts;\n+\talias_set_type alias;\n \n \tgcc_assert (eltmode != BLKmode);\n \n@@ -5630,7 +5631,7 @@ store_constructor (tree exp, rtx target, int cleared, HOST_WIDE_INT size)\n \tif (need_to_clear && size > 0 && !vector)\n \t  {\n \t    if (REG_P (target))\n-\t      emit_move_insn (target,  CONST0_RTX (GET_MODE (target)));\n+\t      emit_move_insn (target, CONST0_RTX (GET_MODE (target)));\n \t    else\n \t      clear_storage (target, GEN_INT (size), BLOCK_OP_NORMAL);\n \t    cleared = 1;\n@@ -5640,6 +5641,11 @@ store_constructor (tree exp, rtx target, int cleared, HOST_WIDE_INT size)\n \tif (!cleared && !vector && REG_P (target))\n \t  emit_move_insn (target, CONST0_RTX (GET_MODE (target)));\n \n+        if (MEM_P (target))\n+\t  alias = MEM_ALIAS_SET (target);\n+\telse\n+\t  alias = get_alias_set (elttype);\n+\n         /* Store each element of the constructor into the corresponding\n \t   element of TARGET, determined by counting the elements.  */\n \tfor (idx = 0, i = 0;\n@@ -5675,7 +5681,7 @@ store_constructor (tree exp, rtx target, int cleared, HOST_WIDE_INT size)\n \t\tbitpos = eltpos * elt_size;\n \t\tstore_constructor_field (target, bitsize, bitpos,\n \t\t\t\t\t value_mode, value, type,\n-\t\t\t\t\t cleared, get_alias_set (elttype));\n+\t\t\t\t\t cleared, alias);\n \t      }\n \t  }\n "}, {"sha": "bd10cc9d97282bb4ac76339c61de0caf90d46caf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "patch": "@@ -1,5 +1,8 @@\n 2008-10-30  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/37730\n+\t* gcc.dg/vect/pr37730.c: New test.\n+\n \tPR debug/36668\n \t* g++.dg/other/PR23205.C: Allow foobar to be defined as variable.\n \t* g++.dg/other/pr23205-2.C: New test."}, {"sha": "876f5499ea8b2af0518f8693363098143b58c78d", "filename": "gcc/testsuite/gcc.dg/vect/pr37730.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr37730.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/723a7cedae9574c8158bcf9e0c563ebb72a6e28c/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr37730.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr37730.c?ref=723a7cedae9574c8158bcf9e0c563ebb72a6e28c", "patch": "@@ -0,0 +1,16 @@\n+/* PR middle-end/37730 */\n+/* { dg-do compile } */\n+\n+void\n+add_opush (void)\n+{\n+  unsigned char formats[] = { 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0xff };\n+  void *dtds[sizeof (formats)];\n+  unsigned int i;\n+  unsigned char dtd = 0x08;\n+  for (i = 0; i < sizeof (formats); i++)\n+    dtds[i] = &dtd;\n+  sdp_seq_alloc (dtds);\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}]}