{"sha": "dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNkN2E3ZGZjZTE3NWMwMGY0YTBmNThkNzk1MGM2YzI2ZTI0ZGVhNQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2015-09-18T16:27:51Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2015-09-18T16:27:51Z"}, "message": "re PR middle-end/67619 (ICE at -O1 and above on x86_64-linux-gnu in int_mode_for_mode, at stor-layout.c:425)\n\n\tPR middle-end/67619\n\t* except.c (expand_builtin_eh_return): Use copy_addr_to_reg to copy\n\tthe address to a register.\n\ntestsuite/ChangeLog:\n\n\tPR middle-end/67619\n\t* gcc.dg/torture/pr67619.c: New test.\n\nFrom-SVN: r227909", "tree": {"sha": "945aa2d1b185af278cda26cf9296ebab74fdfa45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/945aa2d1b185af278cda26cf9296ebab74fdfa45"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/comments", "author": null, "committer": null, "parents": [{"sha": "a502f7b6e47d3f790e01e91ab5c480ee4b261486", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a502f7b6e47d3f790e01e91ab5c480ee4b261486", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a502f7b6e47d3f790e01e91ab5c480ee4b261486"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "4f712e3fe7fae6c40fb72aec7b8ba99258d62b73", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "patch": "@@ -1,4 +1,10 @@\n-2015-09-16  Jeff Law  <law@redhat.com>\n+2015-09-18  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR middle-end/67619\n+\t* except.c (expand_builtin_eh_return): Use copy_addr_to_reg to copy\n+\tthe address to a register.\n+\n+2015-09-18  Jeff Law  <law@redhat.com>\n \n \tPR tree-optimization/47679\n \t* Makefile.in (OBJS): Add tree-ssa-phionlycprop.o"}, {"sha": "f77a2fa6fb310b3beed2c7dbafeae65348fb34ba", "filename": "gcc/except.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "patch": "@@ -2219,7 +2219,7 @@ expand_builtin_eh_return (tree stackadj_tree ATTRIBUTE_UNUSED,\n \t\t     VOIDmode, EXPAND_NORMAL);\n   tmp = convert_memory_address (Pmode, tmp);\n   if (!crtl->eh.ehr_stackadj)\n-    crtl->eh.ehr_stackadj = copy_to_reg (tmp);\n+    crtl->eh.ehr_stackadj = copy_addr_to_reg (tmp);\n   else if (tmp != crtl->eh.ehr_stackadj)\n     emit_move_insn (crtl->eh.ehr_stackadj, tmp);\n #endif\n@@ -2228,7 +2228,7 @@ expand_builtin_eh_return (tree stackadj_tree ATTRIBUTE_UNUSED,\n \t\t     VOIDmode, EXPAND_NORMAL);\n   tmp = convert_memory_address (Pmode, tmp);\n   if (!crtl->eh.ehr_handler)\n-    crtl->eh.ehr_handler = copy_to_reg (tmp);\n+    crtl->eh.ehr_handler = copy_addr_to_reg (tmp);\n   else if (tmp != crtl->eh.ehr_handler)\n     emit_move_insn (crtl->eh.ehr_handler, tmp);\n "}, {"sha": "f959a789f55ca53207737721885422e8f6d4407e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "patch": "@@ -1,3 +1,8 @@\n+2015-09-18  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR middle-end/67619\n+\t* gcc.dg/torture/pr67619.c: New test.\n+\n 2015-09-18  Alan Lawrence  <alan.lawrence@arm.com>\n \n \tPR tree-optimization/67283"}, {"sha": "e441ee97dac98b6d63055ff928485994e3564fbd", "filename": "gcc/testsuite/gcc.dg/torture/pr67619.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr67619.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr67619.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr67619.c?ref=dcd7a7dfce175c00f4a0f58d7950c6c26e24dea5", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+\n+void\n+foo ()\n+{\n+  unsigned long l;\n+  void *p = 0; \n+\n+  __builtin_unwind_init ();\n+  l = 0; \n+  __builtin_eh_return (l, p);\n+}"}]}