{"sha": "6aaa1d573912828efed1514fbec5e1ef8a7cc3bc", "node_id": "C_kwDOANBUbNoAKDZhYWExZDU3MzkxMjgyOGVmZWQxNTE0ZmJlYzVlMWVmOGE3Y2MzYmM", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2022-05-13T10:48:50Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2022-05-13T10:48:50Z"}, "message": "ada: gcc-if: build proper String_Pointer for Get_External_Name\n\nThe compiler is allowed to assume it can access String bounds, such as\nthe prefix passed to Get_External_Name, even in circumstances in which\nthe prefix is not going to be used and has_prefix is false, so, from\nthe C side, we have to build a proper String_Template for the\nString_Pointer.\n\n\nfor  gcc/ada/ChangeLog\n\n\t* gcc-interface/decl.cc (is_cplusplus_method): Build proper\n\tString for Get_External_Name.", "tree": {"sha": "e7228d8db053b96f216c7f525d3e5bbec141c15d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7228d8db053b96f216c7f525d3e5bbec141c15d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6aaa1d573912828efed1514fbec5e1ef8a7cc3bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6aaa1d573912828efed1514fbec5e1ef8a7cc3bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6aaa1d573912828efed1514fbec5e1ef8a7cc3bc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6aaa1d573912828efed1514fbec5e1ef8a7cc3bc/comments", "author": null, "committer": null, "parents": [{"sha": "9a79854be0a81faf76fff073f447c2334d47e819", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a79854be0a81faf76fff073f447c2334d47e819", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a79854be0a81faf76fff073f447c2334d47e819"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "28e1ab7ce8159ae86e7f147b98f26dfbcd21316c", "filename": "gcc/ada/gcc-interface/decl.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aaa1d573912828efed1514fbec5e1ef8a7cc3bc/gcc%2Fada%2Fgcc-interface%2Fdecl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aaa1d573912828efed1514fbec5e1ef8a7cc3bc/gcc%2Fada%2Fgcc-interface%2Fdecl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.cc?ref=6aaa1d573912828efed1514fbec5e1ef8a7cc3bc", "patch": "@@ -4956,7 +4956,8 @@ is_cplusplus_method (Entity_Id gnat_entity)\n      'this' parameter is not encoded in the mangled name of a method.  */\n   if (Is_Subprogram (gnat_entity) && Present (Interface_Name (gnat_entity)))\n     {\n-      String_Pointer sp = { NULL, NULL };\n+      String_Template temp = { 0, 0 };\n+      String_Pointer sp = { \"\", &temp };\n       Get_External_Name (gnat_entity, false, sp);\n \n       void *mem;"}]}