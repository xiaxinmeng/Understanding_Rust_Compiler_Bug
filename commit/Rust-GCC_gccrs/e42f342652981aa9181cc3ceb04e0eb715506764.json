{"sha": "e42f342652981aa9181cc3ceb04e0eb715506764", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQyZjM0MjY1Mjk4MWFhOTE4MWNjM2NlYjA0ZTBlYjcxNTUwNjc2NA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2020-05-05T21:39:19Z"}, "committer": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2020-05-05T21:40:18Z"}, "message": "c++: CWG2235 partial ordering and non-dependent types\n\nIssue 2235 removed the rule previously added for issues 1391/1847 that had\npartial ordering completely ignore function parameters with no deducible\ntemplate parameters.\n\ngcc/cp/ChangeLog\n2020-05-05  Jason Merrill  <jason@redhat.com>\n\n\tCWG 2235\n\t* pt.c (more_specialized_fn): Do consider parms with no deducible\n\ttemplate parameters.", "tree": {"sha": "fe36b710321c53a5f0f802d943041065c1eb52c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe36b710321c53a5f0f802d943041065c1eb52c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e42f342652981aa9181cc3ceb04e0eb715506764", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e42f342652981aa9181cc3ceb04e0eb715506764", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e42f342652981aa9181cc3ceb04e0eb715506764", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e42f342652981aa9181cc3ceb04e0eb715506764/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "04b89192ace3a766a17374d5bef8fb19d9be2d7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04b89192ace3a766a17374d5bef8fb19d9be2d7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04b89192ace3a766a17374d5bef8fb19d9be2d7c"}], "stats": {"total": 37, "additions": 27, "deletions": 10}, "files": [{"sha": "c49e90e34a7051578187ba6e1cc606698c2cd906", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e42f342652981aa9181cc3ceb04e0eb715506764", "patch": "@@ -1,3 +1,9 @@\n+2020-05-05  Jason Merrill  <jason@redhat.com>\n+\n+\tCWG 2235\n+\t* pt.c (more_specialized_fn): Do consider parms with no deducible\n+\ttemplate parameters.\n+\n 2020-05-05  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/90212"}, {"sha": "2ed6d0e745732d8d9b10be2ea94ac02339a69ee9", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=e42f342652981aa9181cc3ceb04e0eb715506764", "patch": "@@ -23960,13 +23960,6 @@ more_specialized_fn (tree pat1, tree pat2, int len)\n           len = 0;\n         }\n \n-      /* DR 1847: If a particular P contains no template-parameters that\n-\t participate in template argument deduction, that P is not used to\n-\t determine the ordering.  */\n-      if (!uses_deducible_template_parms (arg1)\n-\t  && !uses_deducible_template_parms (arg2))\n-\tgoto next;\n-\n       if (TYPE_REF_P (arg1))\n \t{\n \t  ref1 = TYPE_REF_IS_RVALUE (arg1) + 1;\n@@ -24088,8 +24081,6 @@ more_specialized_fn (tree pat1, tree pat2, int len)\n \t   These must be unordered.  */\n \tbreak;\n \n-    next:\n-\n       if (TREE_CODE (arg1) == TYPE_PACK_EXPANSION\n           || TREE_CODE (arg2) == TYPE_PACK_EXPANSION)\n         /* We have already processed all of the arguments in our"}, {"sha": "624bb4bc0f09f1c14cfa7be46bd44163d6584bd8", "filename": "gcc/testsuite/g++.dg/template/partial-order1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpartial-order1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpartial-order1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpartial-order1.C?ref=e42f342652981aa9181cc3ceb04e0eb715506764", "patch": "@@ -14,5 +14,5 @@ void f(typename A<T>::size_type, T);\n \n int main()\n {\n-  f(1,2);\t\t\t// { dg-error \"ambiguous\" }\n+  f(1,2);\n }"}, {"sha": "2aed6008d0543c1d3997297aa03537ef1fb68e16", "filename": "gcc/testsuite/g++.dg/template/partial-order2.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpartial-order2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e42f342652981aa9181cc3ceb04e0eb715506764/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpartial-order2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpartial-order2.C?ref=e42f342652981aa9181cc3ceb04e0eb715506764", "patch": "@@ -0,0 +1,20 @@\n+// CWG 2235\n+\n+namespace X\n+{\n+  template<typename T> struct Const { typedef void type; };\n+  template<typename T> void f(T, typename Const<T>::type*); // T1\n+  template<typename T> void f(T, void *); // T2\n+  void g(void *p) { f(0, p); }\n+}\n+\n+namespace Y\n+{\n+  struct A { A(int); };\n+  struct B { B(int); };\n+\n+  template<typename T> void f(T, A);\n+  template<typename T> void f(T*, B);\n+\n+  void g(int *p) { f(p, 0); }\t// { dg-error \"ambiguous\" }\n+}"}]}