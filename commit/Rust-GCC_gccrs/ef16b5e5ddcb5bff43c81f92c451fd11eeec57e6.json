{"sha": "ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWYxNmI1ZTVkZGNiNWJmZjQzYzgxZjkyYzQ1MWZkMTFlZWVjNTdlNg==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1999-05-11T00:47:31Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-05-11T00:47:31Z"}, "message": "inclhack.def (sun_auth_proto): Apply to all targets.\n\n        * fixinc/inclhack.def (sun_auth_proto): Apply to all targets.\n        (sysz_stdlib_for_sun): Similarly.\n        * fixinc/fixincl.x, fixinc/inclhack.sh: Rebuilt.\n\nFrom-SVN: r26878", "tree": {"sha": "789c1b95d45e6bbc08331b7aea7b1bf9e7d2540c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/789c1b95d45e6bbc08331b7aea7b1bf9e7d2540c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/comments", "author": null, "committer": null, "parents": [{"sha": "ac65c2d7858466e96bc13d466730cc08cd83757a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac65c2d7858466e96bc13d466730cc08cd83757a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac65c2d7858466e96bc13d466730cc08cd83757a"}], "stats": {"total": 65, "additions": 35, "deletions": 30}, "files": [{"sha": "c5b5fd89add70d6f59b5d2ed38e44be3ea0019f5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "patch": "@@ -1,3 +1,9 @@\n+Tue May 11 01:32:01 1999  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* fixinc/inclhack.def (sun_auth_proto): Apply to all targets.\n+\t(sysz_stdlib_for_sun): Similarly.\n+\t* fixinc/fixincl.x, fixinc/inclhack.sh: Rebuilt.\n+\n Mon May 10 20:34:10 1999  Jim Wilson  <wilson@cygnus.com>\n \n \t* config/mips/elf.h (UNIQUE_SECTION_P): Undef."}, {"sha": "61c1447642bdcc9f11ea0222537154f3a4bdc696", "filename": "gcc/fixinc/fixincl.x", "status": "modified", "additions": 17, "deletions": 13, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2Ffixinc%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2Ffixinc%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.x?ref=ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "patch": "@@ -214,9 +214,17 @@ tSCC zArm_Norcroft_HintList[] =\n  *  Machine/OS name selection pattern\n  */\n #define apzArm_Norcroft_HintMachs (const char**)NULL\n-#define ARM_NORCROFT_HINT_TEST_CT  0\n-#define ARM_NORCROFT_HINT_RE_CT    0\n-#define aArm_Norcroft_HintTests   (tTestDesc*)NULL\n+\n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zArm_Norcroft_HintSelect0[] =\n+       \"___type p_type\";\n+\n+#define    ARM_NORCROFT_HINT_TEST_CT  1\n+#define    ARM_NORCROFT_HINT_RE_CT    1\n+tTestDesc aArm_Norcroft_HintTests[] = {\n+  { TT_EGREP,  zArm_Norcroft_HintSelect0,   (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Arm_Norcroft_Hint\n@@ -615,7 +623,7 @@ tSCC zNo_Double_SlashSelect0[] =\n  *  perform the 'test' shell command - do fix on success\n  */\n tSCC zNo_Double_SlashTest0[] =\n-       \"-z `echo ${file} | egrep '(cxx|\\\\+\\\\+)/' `\";\n+       \"-z `echo ${file} | egrep '(CC|cxx|\\\\+\\\\+)/' `\";\n \n #define    NO_DOUBLE_SLASH_TEST_CT  2\n #define    NO_DOUBLE_SLASH_RE_CT    1\n@@ -627,7 +635,8 @@ tTestDesc aNo_Double_SlashTests[] = {\n  *  Fix Command Arguments for No_Double_Slash\n  */\n const char* apzNo_Double_SlashPatch[] = { \"sed\",\n-    \"-e\", \"/\\\\(^|[^:]\\\\)\\\\/\\\\/[^\\\"*]/s|//.*$||g\",\n+    \"-e\", \"s,^//.*$,,\",\n+    \"-e\", \"s,[^:]//[^\\\"].*$,,\",\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n@@ -2650,9 +2659,7 @@ tSCC zSun_Auth_ProtoList[] =\n /*\n  *  Machine/OS name selection pattern\n  */\n-tSCC* apzSun_Auth_ProtoMachs[] = {\n-        \"*-sun-*\",\n-        (const char*)NULL };\n+#define apzSun_Auth_ProtoMachs (const char**)NULL\n \n /*\n  *  content selection pattern - do fix if pattern found\n@@ -2896,10 +2903,7 @@ tSCC zSysz_Stdlib_For_SunList[] =\n /*\n  *  Machine/OS name selection pattern\n  */\n-tSCC* apzSysz_Stdlib_For_SunMachs[] = {\n-        \"*-sun*\",\n-        \"m88k-*sysv3*\",\n-        (const char*)NULL };\n+#define apzSysz_Stdlib_For_SunMachs (const char**)NULL\n #define SYSZ_STDLIB_FOR_SUN_TEST_CT  0\n #define SYSZ_STDLIB_FOR_SUN_RE_CT    0\n #define aSysz_Stdlib_For_SunTests   (tTestDesc*)NULL\n@@ -3874,7 +3878,7 @@ const char* apzZzz_TimePatch[] = { \"sh\", \"-c\",\n  *\n  *  List of all fixes\n  */\n-#define  REGEX_COUNT  75\n+#define  REGEX_COUNT  76\n #define  FIX_COUNT    104\n tFixDesc fixDescList[ FIX_COUNT ] = {\n   {  zAix_SyswaitName,    zAix_SyswaitList,"}, {"sha": "91854a2a3e1fed1db8880ac316bf59a3cdbf859e", "filename": "gcc/fixinc/inclhack.def", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2Ffixinc%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2Ffixinc%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.def?ref=ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "patch": "@@ -1483,16 +1483,16 @@ fix = {\n \n \n /*\n- *  On *some* SunOS-es, rpc/auth.h, rpc/clnt.h, rpc/svc.h, and\n- *  rpc/xdr.h need prototypes for its ops function pointers.\n+ *  Apply fix this to all OSs since this problem seems to effect\n+ *  more than just SunOS.  In general, fixes which are triggered\n+ *  by a specific target are bad.\n  */\n fix = {\n     hackname = sun_auth_proto;\n     files    = rpc/auth.h;\n     files    = rpc/clnt.h;\n     files    = rpc/svc.h;\n     files    = rpc/xdr.h;\n-    mach     = \"*-sun-*\";\n     /*\n      *  Select those files containing '(*name)()' but *not*\n      *  containing '(*name)(junk)'.  The change would be innocuous\n@@ -1974,13 +1974,11 @@ fix = {\n \n \n /*\n- *  Fix return type of exit and abort in <stdlib.h> on SunOS 4.1.\n- *  Also wrap protection around size_t for m88k-sysv3 systems.\n+ *  Fix return type of exit and abort in <stdlib.h>\n+ *  Also wrap protection around size_t.\n  */\n fix = {\n     hackname = sysz_stdlib_for_sun;\n-    mach     = \"*-sun*\";\n-    mach     = \"m88k-*sysv3*\";\n     files    = stdlib.h;\n \n     sed   = \"s/int\\tabort/void\\tabort/g\";"}, {"sha": "4c321ddf11faacfa5010263ad5b9d55ea4d473b7", "filename": "gcc/fixinc/inclhack.sh", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2Ffixinc%2Finclhack.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6/gcc%2Ffixinc%2Finclhack.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.sh?ref=ef16b5e5ddcb5bff43c81f92c451fd11eeec57e6", "patch": "@@ -472,6 +472,8 @@ struct rusage;\n     # Fix   6:  Arm_Norcroft_Hint\n     #\n     case \"${file}\" in ./X11/Intrinsic.h )\n+    if ( test -n \"`egrep '___type p_type' ${file}`\"\n+       ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       arm_norcroft_hint\"\n     if [ ! -r ${DESTFILE} ]\n@@ -482,6 +484,7 @@ struct rusage;\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n+    fi # end of selection 'if'\n     ;; # case end for file name test\n     esac\n \n@@ -736,15 +739,16 @@ struct rusage;\n     # Fix  17:  No_Double_Slash\n     #\n     if ( test -n \"`egrep '(^|[^:])//[^\\\"*]' ${file}`\" -a \\\n-              '(' -z `echo ${file} | egrep '(cxx|\\+\\+)/' ` ')'\n+              '(' -z `echo ${file} | egrep '(CC|cxx|\\+\\+)/' ` ')'\n        ) > /dev/null 2>&1 ; then\n     fixlist=\"${fixlist}\n       no_double_slash\"\n     if [ ! -r ${DESTFILE} ]\n     then infile=${file}\n     else infile=${DESTFILE} ; fi \n \n-    sed -e '/\\(^|[^:]\\)\\/\\/[^\"*]/s|//.*$||g' \\\n+    sed -e 's,^//.*$,,' \\\n+        -e 's,[^:]//[^\"].*$,,' \\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n@@ -2151,7 +2155,6 @@ void\t(*signal(...))(...);\\\n \t./rpc/clnt.h | \\\n \t./rpc/svc.h | \\\n \t./rpc/xdr.h )\n-    case \"$target_canonical\" in *-sun-* )\n     if ( test -n \"`egrep '\\\\(\\\\*[a-z][a-z_]*\\\\)\\\\(\\\\)' ${file}`\" -a \\\n               -z \"`egrep '\\\\(\\\\*[a-z][a-z_]*\\\\)\\\\([ \t]*[a-zA-Z.].*\\\\)' ${file}`\"\n        ) > /dev/null 2>&1 ; then\n@@ -2171,8 +2174,6 @@ void\t(*signal(...))(...);\\\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n     fi # end of selection 'if'\n-    ;; # case end for machine type test\n-    esac\n     ;; # case end for file name test\n     esac\n \n@@ -2330,8 +2331,6 @@ extern unsigned int\\\n     # Fix  78:  Sysz_Stdlib_For_Sun\n     #\n     case \"${file}\" in ./stdlib.h )\n-    case \"$target_canonical\" in *-sun* | \\\n-\tm88k-*sysv3* )\n     fixlist=\"${fixlist}\n       sysz_stdlib_for_sun\"\n     if [ ! -r ${DESTFILE} ]\n@@ -2354,8 +2353,6 @@ extern unsigned int\\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    ;; # case end for machine type test\n-    esac\n     ;; # case end for file name test\n     esac\n \n@@ -3039,7 +3036,7 @@ cat > /dev/null ) < $infile > ${DESTDIR}/fixinc.tmp\n       # Find any include directives that use \"file\".\n       #\n       dir=`echo ${file} | sed -e s';/[^/]*$;;'`\n-      ddir=`echo ${DESTDIR} | sed 's;/[^/]*$;;'`/$dir\n+      ddir=`ec${DESTDIR}/$dir\n \n       for include in `\n          egrep '^[      ]*#[    ]*include[      ]*\"[^/]' ${DESTFILE} |"}]}