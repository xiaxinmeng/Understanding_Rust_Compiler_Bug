{"sha": "721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzIxYmUwZjQ3YzVjMGJiOTk0YWY2ZGY2ZjJlMjc5M2Y5YmQxM2VlMw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-10-29T17:23:52Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-10-29T17:23:52Z"}, "message": "re PR fortran/68054 (ICE on using protected attribute in program without program statement)\n\n2015-10-29  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/68054\n\t* decl.c (match_attr_spec): PROTECTED can only be a module.\n\n2015-10-29  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/68054\n\t* gfortran.dg/pr68054.f90: New test.\n\nFrom-SVN: r229542", "tree": {"sha": "ae4fa32ce8f0b772d60ee73ba7796e58e8bfb990", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae4fa32ce8f0b772d60ee73ba7796e58e8bfb990"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/comments", "author": null, "committer": null, "parents": [{"sha": "730f6d14253f7c8f44eff8c03beb5984e2f4c6cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/730f6d14253f7c8f44eff8c03beb5984e2f4c6cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/730f6d14253f7c8f44eff8c03beb5984e2f4c6cf"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "587045d057930371f935b30f06a3254513b5c6d4", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "patch": "@@ -1,3 +1,8 @@\n+2015-10-29  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/68054\n+\t* decl.c (match_attr_spec): PROTECTED can only be a module.\n+\n 2015-10-29  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/67885"}, {"sha": "6a7f3864ded44e09dcaf5dcd94dc858c6c742ce5", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "patch": "@@ -3959,7 +3959,9 @@ match_attr_spec (void)\n \t  break;\n \n \tcase DECL_PROTECTED:\n-\t  if (gfc_current_ns->proc_name->attr.flavor != FL_MODULE)\n+\t  if (gfc_current_state () != COMP_MODULE\n+\t      || (gfc_current_ns->proc_name\n+\t\t  && gfc_current_ns->proc_name->attr.flavor != FL_MODULE))\n \t    {\n \t       gfc_error (\"PROTECTED at %C only allowed in specification \"\n \t\t\t  \"part of a module\");"}, {"sha": "0ec41025170e32bee501db7ea9722ea70a8cb96b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "patch": "@@ -1,3 +1,8 @@\n+2015-10-29  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/68054\n+\t* gfortran.dg/pr68054.f90: New test.\n+\n 2015-10-29  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/67885"}, {"sha": "c4b6a341f5738b38610fd05e718355768c44fdba", "filename": "gcc/testsuite/gfortran.dg/pr68054.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr68054.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/721be0f47c5c0bb994af6df6f2e2793f9bd13ee3/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr68054.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr68054.f90?ref=721be0f47c5c0bb994af6df6f2e2793f9bd13ee3", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile }\n+! PR fortran/68054\n+! Original code contributed by Gerhard Steinmetz\n+! gerhard dot steinmetz dot fortran at t-online dot de\n+!\n+!program p\n+   real, protected :: x   ! { dg-error \"only allowed in specification\" }\n+end"}]}