{"sha": "8810712ed9d1a5c2031c640706af1a87acfd3e06", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODgxMDcxMmVkOWQxYTVjMjAzMWM2NDA3MDZhZjFhODdhY2ZkM2UwNg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2009-04-11T07:34:09Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2009-04-11T07:34:09Z"}, "message": "re PR tree-optimization/39713 (ICE in get_expr_value_id)\n\n2009-04-11  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/39713\n\t* tree-ssa-sccvn.c (vn_get_expr_for): Make sure built\n\treference trees have SSA_NAME operands.\n\n\t* g++.dg/torture/pr39713.C: New testcase.\n\nFrom-SVN: r145951", "tree": {"sha": "90a319bf42d7d6bc1abc0e0b94bf8af1853a0f95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90a319bf42d7d6bc1abc0e0b94bf8af1853a0f95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8810712ed9d1a5c2031c640706af1a87acfd3e06", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8810712ed9d1a5c2031c640706af1a87acfd3e06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8810712ed9d1a5c2031c640706af1a87acfd3e06", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8810712ed9d1a5c2031c640706af1a87acfd3e06/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fa78c0c18bd008b04e41e1679461a0d837e72087", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa78c0c18bd008b04e41e1679461a0d837e72087", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa78c0c18bd008b04e41e1679461a0d837e72087"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "3d6b046edc5ddd95ba04a1eb147e14d7bab7c620", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8810712ed9d1a5c2031c640706af1a87acfd3e06", "patch": "@@ -1,3 +1,9 @@\n+2009-04-11  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/39713\n+\t* tree-ssa-sccvn.c (vn_get_expr_for): Make sure built\n+\treference trees have SSA_NAME operands.\n+\n 2009-04-11  Richard Guenther  <rguenther@suse.de>\n \n \tPR c/39712"}, {"sha": "bcd3c2bfa5f9c5e1dead82739a9712ba4dfc4661", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8810712ed9d1a5c2031c640706af1a87acfd3e06", "patch": "@@ -1,3 +1,8 @@\n+2009-04-11  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/39713\n+\t* g++.dg/torture/pr39713.C: New testcase.\n+\n 2009-04-10  Richard Guenther  <rguenther@suse.de>\n \n \tPR c/39712"}, {"sha": "4ff72d1a773adf464fa48a1d0594fde15cdb551c", "filename": "gcc/testsuite/g++.dg/torture/pr39713.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr39713.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr39713.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr39713.C?ref=8810712ed9d1a5c2031c640706af1a87acfd3e06", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+\n+template <typename To, typename From>\n+static inline To\n+bitwise_cast (From from)\n+{\n+  union\n+    {\n+      From f;\n+      To t;\n+    } u;\n+  u.f = from;\n+  return u.t;\n+}\n+\n+extern void foo (unsigned char *);\n+\n+double\n+bar ()\n+{\n+  unsigned char b[sizeof (unsigned long long)];\n+  foo (b);\n+  return bitwise_cast<double> (*(unsigned long long *) b);\n+}\n+"}, {"sha": "f3b00e99b48826756e979e20ff941c530451aed8", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8810712ed9d1a5c2031c640706af1a87acfd3e06/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=8810712ed9d1a5c2031c640706af1a87acfd3e06", "patch": "@@ -257,9 +257,10 @@ vn_get_expr_for (tree name)\n   switch (TREE_CODE_CLASS (gimple_assign_rhs_code (def_stmt)))\n     {\n     case tcc_reference:\n-      if (gimple_assign_rhs_code (def_stmt) == VIEW_CONVERT_EXPR\n-\t  || gimple_assign_rhs_code (def_stmt) == REALPART_EXPR\n-\t  || gimple_assign_rhs_code (def_stmt) == IMAGPART_EXPR)\n+      if ((gimple_assign_rhs_code (def_stmt) == VIEW_CONVERT_EXPR\n+\t   || gimple_assign_rhs_code (def_stmt) == REALPART_EXPR\n+\t   || gimple_assign_rhs_code (def_stmt) == IMAGPART_EXPR)\n+\t  && TREE_CODE (gimple_assign_rhs1 (def_stmt)) == SSA_NAME)\n \texpr = fold_build1 (gimple_assign_rhs_code (def_stmt),\n \t\t\t    gimple_expr_type (def_stmt),\n \t\t\t    TREE_OPERAND (gimple_assign_rhs1 (def_stmt), 0));"}]}