{"sha": "5abf386014d3f91ce41b3a946857587082a014b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFiZjM4NjAxNGQzZjkxY2U0MWIzYTk0Njg1NzU4NzA4MmEwMTRiNA==", "commit": {"author": {"name": "Ira Rosen", "email": "irar@il.ibm.com", "date": "2008-09-21T08:36:07Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2008-09-21T08:36:07Z"}, "message": "re PR tree-optimization/37539 (Hang for -O3)\n\n\tPR tree-optimization/37539\n\t* tree-vect-transform.c (vect_transform_strided_load): Save vector\n\tstatement in related statement field only for the first load of the\n\tgroup of loads with the same data reference.\n\nFrom-SVN: r140522", "tree": {"sha": "dfb8bc780e774f94dbfe1e833a45241769136ada", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dfb8bc780e774f94dbfe1e833a45241769136ada"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5abf386014d3f91ce41b3a946857587082a014b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5abf386014d3f91ce41b3a946857587082a014b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5abf386014d3f91ce41b3a946857587082a014b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5abf386014d3f91ce41b3a946857587082a014b4/comments", "author": {"login": "irar2", "id": 16818592, "node_id": "MDQ6VXNlcjE2ODE4NTky", "avatar_url": "https://avatars.githubusercontent.com/u/16818592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/irar2", "html_url": "https://github.com/irar2", "followers_url": "https://api.github.com/users/irar2/followers", "following_url": "https://api.github.com/users/irar2/following{/other_user}", "gists_url": "https://api.github.com/users/irar2/gists{/gist_id}", "starred_url": "https://api.github.com/users/irar2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/irar2/subscriptions", "organizations_url": "https://api.github.com/users/irar2/orgs", "repos_url": "https://api.github.com/users/irar2/repos", "events_url": "https://api.github.com/users/irar2/events{/privacy}", "received_events_url": "https://api.github.com/users/irar2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ce00be9ede1903cd30d8ea2431ff984288ac9eb0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce00be9ede1903cd30d8ea2431ff984288ac9eb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce00be9ede1903cd30d8ea2431ff984288ac9eb0"}], "stats": {"total": 84, "additions": 74, "deletions": 10}, "files": [{"sha": "1ce145f89295a61b7fdd5ab290ae2b6c892dc970", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5abf386014d3f91ce41b3a946857587082a014b4", "patch": "@@ -1,3 +1,10 @@\n+2008-09-21  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/37539\n+\t* tree-vect-transform.c (vect_transform_strided_load): Save vector\n+\tstatement in related statement field only for the first load of the\n+\tgroup of loads with the same data reference.\n+\n 2008-09-20  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* config/mips/mips.h (TUNE_OCTEON): New macro."}, {"sha": "6f92376669a8166c9d9c0c9408273eb28125bbb2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5abf386014d3f91ce41b3a946857587082a014b4", "patch": "@@ -1,3 +1,8 @@\n+2008-09-21  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/37539\n+\t* gcc.dg/vect/pr37539.c: New test.\n+\n 2008-09-20  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR rtl-optimization/33642"}, {"sha": "1d569a9986e99a26fd7c9aff9fcfd0dbf18049d1", "filename": "gcc/testsuite/gcc.dg/vect/pr37539.c", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr37539.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr37539.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr37539.c?ref=5abf386014d3f91ce41b3a946857587082a014b4", "patch": "@@ -0,0 +1,45 @@\n+/* { dg-require-effective-target vect_int } */\n+\n+#include <stdarg.h>\n+#include \"tree-vect.h\"\n+\n+__attribute__ ((noinline)) void\n+ayuv2yuyv_ref (int *d, int *src, int n)\n+{\n+  char *dest = (char *)d;\n+  int i;\n+\n+  for(i=0;i<n/2;i++){\n+    dest[i*4 + 0] = (src[i*2 + 0])>>16;\n+    dest[i*4 + 1] = (src[i*2 + 1])>>8;\n+    dest[i*4 + 2] = (src[i*2 + 0])>>16;\n+    dest[i*4 + 3] = (src[i*2 + 0])>>0;\n+  }\n+\n+  /* Check results.  */\n+  for(i=0;i<n/2;i++){\n+   if (dest[i*4 + 0] != (src[i*2 + 0])>>16\n+       || dest[i*4 + 1] != (src[i*2 + 1])>>8\n+       || dest[i*4 + 2] != (src[i*2 + 0])>>16\n+       || dest[i*4 + 3] != (src[i*2 + 0])>>0) \n+     abort();\n+  }\n+}\n+\n+int main ()\n+{\n+  int d[256], src[128], i;\n+ \n+  for (i = 0; i < 128; i++)\n+    src[i] = i; \n+  \n+  ayuv2yuyv_ref(d, src, 128);\n+\n+  return 0;\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 2 \"vect\" { target vect_strided_wide } } } */\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */\n+\n+\n+"}, {"sha": "4965da4ad0cf8f55e8e82dff976eba68c82e9ed0", "filename": "gcc/tree-vect-transform.c", "status": "modified", "additions": 17, "deletions": 10, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2Ftree-vect-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5abf386014d3f91ce41b3a946857587082a014b4/gcc%2Ftree-vect-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-transform.c?ref=5abf386014d3f91ce41b3a946857587082a014b4", "patch": "@@ -5947,17 +5947,24 @@ vect_transform_strided_load (gimple stmt, VEC(tree,heap) *dr_chain, int size,\n \t    STMT_VINFO_VEC_STMT (vinfo_for_stmt (next_stmt)) = new_stmt;\n \t  else\n             {\n-\t      gimple prev_stmt =\n-\t\tSTMT_VINFO_VEC_STMT (vinfo_for_stmt (next_stmt));\n-\t      gimple rel_stmt =\n-\t\tSTMT_VINFO_RELATED_STMT (vinfo_for_stmt (prev_stmt));\n-\t      while (rel_stmt)\n-\t\t{\n-\t\t  prev_stmt = rel_stmt;\n-\t\t  rel_stmt = STMT_VINFO_RELATED_STMT (vinfo_for_stmt (rel_stmt));\n-\t\t}\n-\t      STMT_VINFO_RELATED_STMT (vinfo_for_stmt (prev_stmt)) = new_stmt;\n+              if (!DR_GROUP_SAME_DR_STMT (vinfo_for_stmt (next_stmt)))\n+                {\n+ \t          gimple prev_stmt =\n+\t\t    STMT_VINFO_VEC_STMT (vinfo_for_stmt (next_stmt));\n+\t          gimple rel_stmt =\n+\t\t    STMT_VINFO_RELATED_STMT (vinfo_for_stmt (prev_stmt));\n+\t          while (rel_stmt)\n+\t\t    {\n+\t\t      prev_stmt = rel_stmt;\n+\t\t      rel_stmt = \n+                        STMT_VINFO_RELATED_STMT (vinfo_for_stmt (rel_stmt));\n+\t\t    }\n+\n+  \t          STMT_VINFO_RELATED_STMT (vinfo_for_stmt (prev_stmt)) = \n+                    new_stmt;\n+                }\n             }\n+\n \t  next_stmt = DR_GROUP_NEXT_DR (vinfo_for_stmt (next_stmt));\n \t  gap_count = 1;\n \t  /* If NEXT_STMT accesses the same DR as the previous statement,"}]}