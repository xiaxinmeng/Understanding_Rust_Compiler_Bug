{"sha": "df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGY0YjljZmU1MGI0MzRlNjdlNGQ0N2Y3NzI1YWE4ZTM3Zjc3OGU1MA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2005-09-29T21:34:33Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2005-09-29T21:34:33Z"}, "message": "re PR middle-end/24109 (non unit-at-a-time failure with compound literals)\n\n\tPR middle-end/24109\n\t* c-decl.c (c_write_global_declarations_1): If any\n\twrapup_global_declaration_2 call returned true, restart the loop.\n\n\t* gcc.c-torture/execute/20050929-1.c: New test.\n\nFrom-SVN: r104794", "tree": {"sha": "a31c32203ff6d0e6114f2c5ebf7d2f5b3387aa4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a31c32203ff6d0e6114f2c5ebf7d2f5b3387aa4f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8d2c775f0175a71fefe00156505c9f5c50af4114", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d2c775f0175a71fefe00156505c9f5c50af4114", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d2c775f0175a71fefe00156505c9f5c50af4114"}], "stats": {"total": 45, "additions": 43, "deletions": 2}, "files": [{"sha": "799488a696bcf822f80c3bc2fb7fa6d60df36b3b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "patch": "@@ -1,3 +1,9 @@\n+2005-09-29  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/24109\n+\t* c-decl.c (c_write_global_declarations_1): If any\n+\twrapup_global_declaration_2 call returned true, restart the loop.\n+\n 2005-09-29  Daniel Berlin  <dberlin@dberlin.org>\n \t\n \tFix PR tree-optimization/24117"}, {"sha": "9c2e829b0c9f55b49b49ec29925274c57c5fd0cd", "filename": "gcc/c-decl.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "patch": "@@ -7548,6 +7548,7 @@ static void\n c_write_global_declarations_1 (tree globals)\n {\n   tree decl;\n+  bool reconsider;\n \n   /* Process the decls in the order they were written.  */\n   for (decl = globals; decl; decl = TREE_CHAIN (decl))\n@@ -7566,9 +7567,18 @@ c_write_global_declarations_1 (tree globals)\n \t}\n \n       wrapup_global_declaration_1 (decl);\n-      wrapup_global_declaration_2 (decl);\n-      check_global_declaration_1 (decl);\n     }\n+\n+  do\n+    {\n+      reconsider = false;\n+      for (decl = globals; decl; decl = TREE_CHAIN (decl))\n+\treconsider |= wrapup_global_declaration_2 (decl);\n+    }\n+  while (reconsider);\n+\n+  for (decl = globals; decl; decl = TREE_CHAIN (decl))\n+    check_global_declaration_1 (decl);\n }\n \n /* A subroutine of c_write_global_declarations Emit debug information for each"}, {"sha": "d595aa3f2f990f8a9d898391d8fc90218161e37d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "patch": "@@ -1,3 +1,8 @@\n+2005-09-29  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/24109\n+\t* gcc.c-torture/execute/20050929-1.c: New test.\n+\n 2005-09-29  Steven Bosscher  <stevenb@suse.de>\n \n \t* gcc.dg/tree-ssa/ssa-ccp-11.c: Fix the test case and un-xfail."}, {"sha": "7be2eb813f74e3e397b92bafb05982c66543a79e", "filename": "gcc/testsuite/gcc.c-torture/execute/20050929-1.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20050929-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df4b9cfe50b434e67e4d47f7725aa8e37f778e50/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20050929-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20050929-1.c?ref=df4b9cfe50b434e67e4d47f7725aa8e37f778e50", "patch": "@@ -0,0 +1,20 @@\n+/* PR middle-end/24109 */\n+\n+extern void abort (void);\n+\n+struct A { int i; int j; };\n+struct B { struct A *a; struct A *b; };\n+struct C { struct B *c; struct A *d; };\n+struct C e = { &(struct B) { &(struct A) { 1, 2 }, &(struct A) { 3, 4 } }, &(struct A) { 5, 6 } };\n+\n+int\n+main (void)\n+{\n+  if (e.c->a->i != 1 || e.c->a->j != 2)\n+    abort ();\n+  if (e.c->b->i != 3 || e.c->b->j != 4)\n+    abort ();\n+  if (e.d->i != 5 || e.d->j != 6)\n+    abort ();\n+  return 0;\n+}"}]}