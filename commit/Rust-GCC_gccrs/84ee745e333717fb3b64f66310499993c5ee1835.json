{"sha": "84ee745e333717fb3b64f66310499993c5ee1835", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRlZTc0NWUzMzM3MTdmYjNiNjRmNjYzMTA0OTk5OTNjNWVlMTgzNQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-01-23T19:10:48Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-01-23T19:10:48Z"}, "message": "re PR fortran/83898 (ICE in gfc_conv_expr_descriptor, at fortran/trans-array.c:7181)\n\n2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/83898\n\t* trans-stmt.c (trans_associate_var): Do not set cst_array_ctor\n\tfor characters.\n\n2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/83898\n\t* gfortran.dg/associate_33.f03 : New test.\n\nFrom-SVN: r256994", "tree": {"sha": "e6bcb86564423083aacb1a1dfb031c770dcd9d61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6bcb86564423083aacb1a1dfb031c770dcd9d61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84ee745e333717fb3b64f66310499993c5ee1835", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84ee745e333717fb3b64f66310499993c5ee1835", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84ee745e333717fb3b64f66310499993c5ee1835", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84ee745e333717fb3b64f66310499993c5ee1835/comments", "author": null, "committer": null, "parents": [{"sha": "5955438a2ea81d9fb97d87a913315062ac47672b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5955438a2ea81d9fb97d87a913315062ac47672b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5955438a2ea81d9fb97d87a913315062ac47672b"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "f50d8a8b283696f2857275d1f6c87f6ef6066d6d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=84ee745e333717fb3b64f66310499993c5ee1835", "patch": "@@ -1,3 +1,9 @@\n+2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/83898\n+\t* trans-stmt.c (trans_associate_var): Do not set cst_array_ctor\n+\tfor characters.\n+\n 2018-01-22  Janne Blomqvist  <jb@gcc.gnu.org>\n \n \tPR 78534"}, {"sha": "df83a2b664769239e47a3b3e919614eb0e57c1ab", "filename": "gcc/fortran/trans-stmt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ffortran%2Ftrans-stmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ffortran%2Ftrans-stmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-stmt.c?ref=84ee745e333717fb3b64f66310499993c5ee1835", "patch": "@@ -1579,7 +1579,8 @@ trans_associate_var (gfc_symbol *sym, gfc_wrapped_block *block)\n \n       desc = sym->backend_decl;\n       cst_array_ctor = e->expr_type == EXPR_ARRAY\n-\t      && gfc_constant_array_constructor_p (e->value.constructor);\n+\t      && gfc_constant_array_constructor_p (e->value.constructor)\n+\t      && e->ts.type != BT_CHARACTER;\n \n       /* If association is to an expression, evaluate it and create temporary.\n \t Otherwise, get descriptor of target for pointer assignment.  */"}, {"sha": "d6e6709077f8de078ef553323254644c60e4250a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=84ee745e333717fb3b64f66310499993c5ee1835", "patch": "@@ -1,3 +1,8 @@\n+2018-23-01  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/83898\n+\t* gfortran.dg/associate_33.f03 : New test.\n+\n 2018-01-23  Martin Liska  <mliska@suse.cz>\n \n \tPR lto/81440"}, {"sha": "1f87b22e8e48836fbbafd455541e2f2ebd706f1a", "filename": "gcc/testsuite/gfortran.dg/associate_33.f03", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_33.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84ee745e333717fb3b64f66310499993c5ee1835/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_33.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassociate_33.f03?ref=84ee745e333717fb3b64f66310499993c5ee1835", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do run }\n+!\n+! Test the fix for PR83898.f90\n+!\n+! Contributed by G Steinmetz  <gscfq@t-online.de>\n+!\n+program p\n+   associate (x => ['1','2'])\n+      if (any (x .ne. ['1','2'])) call abort\n+   end associate\n+end"}]}