{"sha": "1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTExNWRkN2VkN2Y3YWVjOWM1MzJiNzRhZTAxMzkwZTBmYzBmNTdjZg==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2012-11-06T10:47:21Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-11-06T10:47:21Z"}, "message": "sem_res.adb (Preanalyze_And_Resolve): In Alfa mode do not disable checks...\n\n2012-11-06  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_res.adb (Preanalyze_And_Resolve): In Alfa mode do not\n\tdisable checks, so that flags can be properly set on expressions\n\tthat are not further expanded.\n\nFrom-SVN: r193231", "tree": {"sha": "991415545ba8f2db4c910d88f75002e82164a999", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/991415545ba8f2db4c910d88f75002e82164a999"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "97ce3a148a0c13f7ec36584e70f5a2e952b63a32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97ce3a148a0c13f7ec36584e70f5a2e952b63a32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97ce3a148a0c13f7ec36584e70f5a2e952b63a32"}], "stats": {"total": 32, "additions": 28, "deletions": 4}, "files": [{"sha": "cfa05a2060159f3046bf95bc0e6f6aed5ed3136b", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf", "patch": "@@ -1,3 +1,9 @@\n+2012-11-06  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_res.adb (Preanalyze_And_Resolve): In Alfa mode do not\n+\tdisable checks, so that flags can be properly set on expressions\n+\tthat are not further expanded.\n+\n 2012-11-06  Robert Dewar  <dewar@adacore.com>\n \n \t* exp_attr.adb, sem_attr.adb: Minor reformatting."}, {"sha": "847dd30c126ebcf6113bda634b90cdf41e32b674", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 22, "deletions": 4, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=1115dd7ed7f7aec9c532b74ae01390e0fc0f57cf", "patch": "@@ -1379,6 +1379,13 @@ package body Sem_Res is\n       if Nkind (Name (N)) = N_Expanded_Name then\n          Pack := Entity (Prefix (Name (N)));\n \n+         --  If this is a package renaming, get renamed entity, which will be\n+         --  the scope of the operands if operaton is type-correct.\n+\n+         if Present (Renamed_Entity (Pack)) then\n+            Pack := Renamed_Entity (Pack);\n+         end if;\n+\n          --  If the entity being called is defined in the given package, it is\n          --  a renaming of a predefined operator, and known to be legal.\n \n@@ -1683,11 +1690,22 @@ package body Sem_Res is\n       Full_Analysis := False;\n       Expander_Mode_Save_And_Set (False);\n \n-      --  We suppress all checks for this analysis, since the checks will\n-      --  be applied properly, and in the right location, when the default\n-      --  expression is reanalyzed and reexpanded later on.\n+      --  We suppress all checks for this analysis, except in Alfa mode.\n+      --  Otherwise the checks are applied properly, and in the proper\n+      --  location, when the default expressions are reanalyzed and reexpanded\n+      --  later on.\n+\n+      --  Alfa mode suppresses all expansion but requires the setting of\n+      --  checking flags (DIvision_Check and others) in particular for Ada 2012\n+      --  constructs such as quantified expressions, that are expanded in two\n+      --  separate steps.\n \n-      Analyze_And_Resolve (N, T, Suppress => All_Checks);\n+      if Alfa_Mode then\n+         Analyze_And_Resolve (N, T);\n+\n+      else\n+         Analyze_And_Resolve (N, T, Suppress => All_Checks);\n+      end if;\n \n       Expander_Mode_Restore;\n       Full_Analysis := Save_Full_Analysis;"}]}