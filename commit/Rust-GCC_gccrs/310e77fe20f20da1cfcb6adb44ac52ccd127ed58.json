{"sha": "310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzEwZTc3ZmUyMGYyMGRhMWNmY2I2YWRiNDRhYzUyY2NkMTI3ZWQ1OA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2018-04-10T22:34:06Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2018-04-10T22:34:06Z"}, "message": "re PR c++/70808 (Spurious -Wzero-as-null-pointer-constant for nullptr_t)\n\n/cp\n2018-04-10  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/70808\n\t* init.c (build_zero_init_1): Handle NULLPTR_TYPE_P being true of\n\tthe type like TYPE_PTR_OR_PTRMEM_P.\n\n/testsuite\n2018-04-10  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/70808\n\t* g++.dg/warn/Wzero-as-null-pointer-constant-7.C: New.\n\nFrom-SVN: r259303", "tree": {"sha": "3fef46997eb34456d711d31cce93f3b8cdf76444", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3fef46997eb34456d711d31cce93f3b8cdf76444"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/comments", "author": null, "committer": null, "parents": [{"sha": "6f47ccff0e9c4dab5e9929affa99927e91c51c3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f47ccff0e9c4dab5e9929affa99927e91c51c3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f47ccff0e9c4dab5e9929affa99927e91c51c3c"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "78e7ed77b454e990b7a06350fcbb2fb92f7b57f1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "patch": "@@ -1,3 +1,9 @@\n+2018-04-10  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/70808\n+\t* init.c (build_zero_init_1): Handle NULLPTR_TYPE_P being true of\n+\tthe type like TYPE_PTR_OR_PTRMEM_P.\n+\n 2018-04-10  Jason Merrill  <jason@redhat.com>\n \n \tPR debug/65821 - wrong location for main()."}, {"sha": "52a927e46004c328a1752a83daeeb49e600b49df", "filename": "gcc/cp/init.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "patch": "@@ -180,7 +180,7 @@ build_zero_init_1 (tree type, tree nelts, bool static_storage_p,\n        items with static storage duration that are not otherwise\n        initialized are initialized to zero.  */\n     ;\n-  else if (TYPE_PTR_OR_PTRMEM_P (type))\n+  else if (TYPE_PTR_OR_PTRMEM_P (type) || NULLPTR_TYPE_P (type))\n     init = fold (convert (type, nullptr_node));\n   else if (SCALAR_TYPE_P (type))\n     init = fold (convert (type, integer_zero_node));"}, {"sha": "a311de017fb9f0aee6673e92b1282a8b4984da5d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "patch": "@@ -1,3 +1,8 @@\n+2018-04-10  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/70808\n+\t* g++.dg/warn/Wzero-as-null-pointer-constant-7.C: New.\n+\n 2018-04-10  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* gcc.target/powerpc/dfmode_off.c: Add -fno-asynchronous-unwind-tables."}, {"sha": "808b85ba8c3051ca2b78e756b20f943018a6f86c", "filename": "gcc/testsuite/g++.dg/warn/Wzero-as-null-pointer-constant-7.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWzero-as-null-pointer-constant-7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/310e77fe20f20da1cfcb6adb44ac52ccd127ed58/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWzero-as-null-pointer-constant-7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWzero-as-null-pointer-constant-7.C?ref=310e77fe20f20da1cfcb6adb44ac52ccd127ed58", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/70808\n+// { dg-options \"-Wzero-as-null-pointer-constant\" }\n+\n+int* no_warn = {};\n+decltype( nullptr ) warn = {};"}]}