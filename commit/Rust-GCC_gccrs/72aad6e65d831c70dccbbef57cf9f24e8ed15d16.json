{"sha": "72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJhYWQ2ZTY1ZDgzMWM3MGRjY2JiZWY1N2NmOWYyNGU4ZWQxNWQxNg==", "commit": {"author": {"name": "Zack Weinberg", "email": "zackw@stanford.edu", "date": "2001-06-13T14:26:03Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-06-13T14:26:03Z"}, "message": "Makefile.in: Move _bb and __gcc_bcmp to LIB2FUNCS_ST.\n\n\t* Makefile.in: Move _bb and __gcc_bcmp to LIB2FUNCS_ST.\n\t* libgcc-std.ver: Take out __bb* and __gcc_bcmp.\n\n\t* config/t-slibgcc-elf-ver, config/t-slibgcc-sld,\n\tconfig/alpha/t-osf4, config/mips/t-iris6: Extract all\n\treferences to @shlib_map_file@, @shlib_objs@, or\n\t@shlib_base_name@ to Makefile variables.\n\tBump soname version of libgcc to 1.\n\nFrom-SVN: r43316", "tree": {"sha": "915e7846979febcf2a2e47495986b5d3e402b9cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/915e7846979febcf2a2e47495986b5d3e402b9cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/comments", "author": null, "committer": null, "parents": [{"sha": "6cfb3f16f1d53ac04aca870e06dcf7f24f7915df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cfb3f16f1d53ac04aca870e06dcf7f24f7915df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cfb3f16f1d53ac04aca870e06dcf7f24f7915df"}], "stats": {"total": 109, "additions": 64, "deletions": 45}, "files": [{"sha": "74435bac8c93ae18a3b9b8fc32249a4de8d92b83", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "patch": "@@ -1,3 +1,14 @@\n+2001-06-13  Zack Weinberg  <zackw@stanford.edu>\n+\n+\t* Makefile.in: Move _bb and __gcc_bcmp to LIB2FUNCS_ST.\n+\t* libgcc-std.ver: Take out __bb* and __gcc_bcmp.                        \n+\n+\t* config/t-slibgcc-elf-ver, config/t-slibgcc-sld,\n+\tconfig/alpha/t-osf4, config/mips/t-iris6: Extract all\n+\treferences to @shlib_map_file@, @shlib_objs@, or     \n+\t@shlib_base_name@ to Makefile variables.\n+\tBump soname version of libgcc to 1.\n+\n 2001-06-13  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* doc/install.texi: Use more logical markup.  Include @node"}, {"sha": "2b41f3ebd96b1806f02014d7bba2c652494e4a78", "filename": "gcc/Makefile.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "patch": "@@ -782,13 +782,13 @@ LIB2FUNCS = _muldi3 _divdi3 _moddi3 _udivdi3 _umoddi3 _negdi2 \\\n     _fixunsdfsi _fixunssfsi _fixunsdfdi _fixdfdi _fixunssfdi _fixsfdi \\\n     _fixxfdi _fixunsxfdi _floatdixf _fixunsxfsi \\\n     _fixtfdi _fixunstfdi _floatditf \\\n-    __gcc_bcmp _bb _clear_cache _trampoline __main _exit \\\n+    _clear_cache _trampoline __main _exit \\\n     _absvsi2 _absvdi2 _addvsi3 _addvdi3 _subvsi3 _subvdi3 \\\n     _mulvsi3 _mulvdi3 _negvsi2 _negvdi2 \\\n     _ctors\n \n # Defined in libgcc2.c, included only in the static library.\n-LIB2FUNCS_ST = _eprintf\n+LIB2FUNCS_ST = _eprintf _bb __gcc_bcmp \n \n FPBIT_FUNCS = _pack_sf _unpack_sf _addsub_sf _mul_sf _div_sf \\\n     _fpcmp_parts_sf _compare_sf _eq_sf _ne_sf _gt_sf _ge_sf \\"}, {"sha": "e9c451b9c04dfd7bc78d82161a4f294e8f5d299a", "filename": "gcc/config/alpha/t-osf4", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Falpha%2Ft-osf4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Falpha%2Ft-osf4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Ft-osf4?ref=72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "patch": "@@ -6,13 +6,17 @@ TARGET_LIBGCC2_CFLAGS = -fPIC\n \n # Build a shared libgcc library.\n SHLIB_EXT = .so\n+SHLIB_NAME = @shlib_base_name@.so\n+SHLIB_SONAME = @shlib_base_name@.so.1\n+SHLIB_OBJS = @shlib_objs@\n+\n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n-\t-Wl,-msym -Wl,-set_version,gcc.0 -Wl,-soname,@shlib_base_name@.so.0 \\\n-\t-o @shlib_base_name@.so @multilib_flags@ @shlib_objs@ -lc && \\\n-\trm -f @shlib_base_name@.so.0 && \\\n-\t$(LN_S) @shlib_base_name@.so @shlib_base_name@.so.0\n+\t-Wl,-msym -Wl,-set_version,gcc.1 -Wl,-soname,$(SHLIB_SONAME) \\\n+\t-o $(SHLIB_NAME) @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n+\trm -f $(SHLIB_SONAME) && \\\n+\t$(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)\n # $(slibdir) double quoted to protect it from expansion while building\n # libgcc.mk.  We want this delayed until actual install time.\n-SHLIB_INSTALL = $(INSTALL_DATA) @shlib_base_name@.so $$(slibdir)/@shlib_base_name@.so.0; \\\n-\trm -f $$(slibdir)/@shlib_base_name@.so; \\\n-\t$(LN_S) @shlib_base_name@.so.0 $$(slibdir)/@shlib_base_name@.so\n+SHLIB_INSTALL = $(INSTALL_DATA) $(SHLIB_NAME) $$(slibdir)/$(SHLIB_SONAME); \\\n+\trm -f $$(slibdir)/$(SHLIB_NAME); \\\n+\t$(LN_S) $(SHLIB_SONAME) $$(slibdir)/$(SHLIB_NAME)"}, {"sha": "73910122b59e46b2ef72faa7067859dcaaab0263", "filename": "gcc/config/mips/t-iris6", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Fmips%2Ft-iris6", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Fmips%2Ft-iris6", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-iris6?ref=72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "patch": "@@ -16,21 +16,26 @@ CRTSTUFF_T_CFLAGS=-g1\n \n # Build a shared libgcc library.\n SHLIB_EXT = .so\n+SHLIB_NAME = @shlib_base_name@.so\n+SHLIB_SONAME = @shlib_base_name@.so.1\n+SHLIB_MAP = @shlib_map_file@\n+SHLIB_OBJS = @shlib_objs@\n+\n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n-        -Wl,-soname,@shlib_base_name@.so.0 \\\n-\t-o @shlib_base_name@.so @multilib_flags@ @shlib_objs@ -lc && \\\n-\trm -f @shlib_base_name@.so.0 && \\\n-\t$(LN_S) @shlib_base_name@.so @shlib_base_name@.so.0\n+        -Wl,-soname,$(SHLIB_SONAME) \\\n+\t-o $(SHLIB_NAME) @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n+\trm -f $(SHLIB_SONAME) && \\\n+\t$(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)\n # ??? Irix 6.5 seems to eat the option fine (if we somehow remove the\n # -hidden_symbol option, which is documented to be ignored in conjunction\n # with -exports_file), but fails to actually hide any symbols.\n-#\t-Wl,-exports_file,@shlib_map_file@\n+#\t-Wl,-exports_file,$(SHLIB_MAP)\n \n # $(slibdir) double quoted to protect it from expansion while building\n # libgcc.mk.  We want this delayed until actual install time.\n-SHLIB_INSTALL = $(INSTALL_DATA) @shlib_base_name@.so $$(slibdir)/@shlib_base_name@.so.0; \\\n-\trm -f $$(slibdir)/@shlib_base_name@.so; \\\n-\t$(LN_S) @shlib_base_name@.so.0 $$(slibdir)/@shlib_base_name@.so\n+SHLIB_INSTALL = $(INSTALL_DATA) $(SHLIB_NAME) $$(slibdir)/$(SHLIB_SONAME); \\\n+\trm -f $$(slibdir)/$(SHLIB_NAME); \\\n+\t$(LN_S) $(SHLIB_SONAME) $$(slibdir)/$(SHLIB_NAME)\n SHLIB_MKMAP = $(srcdir)/mkmap-flat.awk\n SHLIB_MAPFILES = $(srcdir)/libgcc-std.ver \n "}, {"sha": "2912e0aa50ea7c9b9eff063eea6eaf473f27197f", "filename": "gcc/config/t-slibgcc-elf-ver", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-elf-ver?ref=72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "patch": "@@ -2,16 +2,21 @@\n # with the GNU linker.\n \n SHLIB_EXT = .so\n+SHLIB_NAME = @shlib_base_name@.so\n+SHLIB_SONAME = @shlib_base_name@.so.1\n+SHLIB_MAP = @shlib_map_file@\n+SHLIB_OBJS = @shlib_objs@\n+\n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n-\t-Wl,--soname=@shlib_base_name@.so.0 \\\n-\t-Wl,--version-script=@shlib_map_file@ \\\n-\t-o @shlib_base_name@.so @multilib_flags@ @shlib_objs@ -lc && \\\n-\trm -f @shlib_base_name@.so.0 && \\\n-\t$(LN_S) @shlib_base_name@.so @shlib_base_name@.so.0\n+\t-Wl,--soname=$(SHLIB_SONAME) \\\n+\t-Wl,--version-script=$(SHLIB_MAP) \\\n+\t-o $(SHLIB_NAME) @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n+\trm -f $(SHLIB_SONAME) && \\\n+\t$(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)\n # $(slibdir) double quoted to protect it from expansion while building\n # libgcc.mk.  We want this delayed until actual install time.\n-SHLIB_INSTALL = $(INSTALL_DATA) @shlib_base_name@.so $$(slibdir)/@shlib_base_name@.so.0; \\\n-\trm -f $$(slibdir)/@shlib_base_name@.so; \\\n-\t$(LN_S) @shlib_base_name@.so.0 $$(slibdir)/@shlib_base_name@.so\n+SHLIB_INSTALL = $(INSTALL_DATA) $(SHLIB_NAME) $$(slibdir)/$(SHLIB_SONAME); \\\n+\trm -f $$(slibdir)/$(SHLIB_NAME); \\\n+\t$(LN_S) $(SHLIB_SONAME) $$(slibdir)/$(SHLIB_NAME)\n SHLIB_MKMAP = $(srcdir)/mkmap-symver.awk\n SHLIB_MAPFILES = $(srcdir)/libgcc-std.ver"}, {"sha": "35f1bc15fd7384c3d977b7f4729db10002335f7a", "filename": "gcc/config/t-slibgcc-sld", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Ft-slibgcc-sld", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Fconfig%2Ft-slibgcc-sld", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-sld?ref=72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "patch": "@@ -1,16 +1,21 @@\n # Build a shared libgcc library with the Solaris linker.\n \n SHLIB_EXT = .so\n+SHLIB_NAME = @shlib_base_name@.so\n+SHLIB_SONAME = @shlib_base_name@.so.1\n+SHLIB_MAP = @shlib_map_file@\n+SHLIB_OBJS = @shlib_objs@\n+\n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n-\t-Wl,-h,@shlib_base_name@.so.0 -Wl,-z,text -Wl,-z,defs \\\n-\t-Wl,-M,@shlib_map_file@ -o @shlib_base_name@.so \\\n-\t@multilib_flags@ @shlib_objs@ -lc && \\\n-\trm -f @shlib_base_name@.so.0 && \\\n-\t$(LN_S) @shlib_base_name@.so @shlib_base_name@.so.0\n+\t-Wl,-h,$(SHLIB_SONAME) -Wl,-z,text -Wl,-z,defs \\\n+\t-Wl,-M,$(SHLIB_MAP) -o $(SHLIB_NAME) \\\n+\t@multilib_flags@ $(SHLIB_OBJS) -lc && \\\n+\trm -f $(SHLIB_SONAME) && \\\n+\t$(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)\n # $(slibdir) double quoted to protect it from expansion while building\n # libgcc.mk.  We want this delayed until actual install time.\n-SHLIB_INSTALL = $(INSTALL_DATA) @shlib_base_name@.so $$(slibdir)/@shlib_base_name@.so.0; \\\n-\trm -f $$(slibdir)/@shlib_base_name@.so; \\\n-\t$(LN_S) @shlib_base_name@.so.0 $$(slibdir)/@shlib_base_name@.so\n+SHLIB_INSTALL = $(INSTALL_DATA) $(SHLIB_NAME) $$(slibdir)/$(SHLIB_SONAME); \\\n+\trm -f $$(slibdir)/$(SHLIB_NAME); \\\n+\t$(LN_S) $(SHLIB_SONAME) $$(slibdir)/$(SHLIB_NAME)\n SHLIB_MKMAP = $(srcdir)/mkmap-symver.awk\n SHLIB_MAPFILES = $(srcdir)/libgcc-std.ver"}, {"sha": "6bc4221329131126f1586365bf43c93c254d0763", "filename": "gcc/libgcc-std.ver", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Flibgcc-std.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72aad6e65d831c70dccbbef57cf9f24e8ed15d16/gcc%2Flibgcc-std.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc-std.ver?ref=72aad6e65d831c70dccbbef57cf9f24e8ed15d16", "patch": "@@ -141,19 +141,8 @@ GCC_3.0 {\n   __floattixf\n   __floattitf\n \n-  # Basic block profile symbols.\n-  # ??? Some of these are for `-a', which ought to die.\n-  __bb\n-  __bb_exit_func\n-  __bb_fork_func\n-  __bb_init_func\n-  __bb_init_trace_func\n-  __bb_trace_func\n-  __bb_trace_ret\n-\n-  # ??? Symbols that perhaps unused should be nuked.\n+  # Used to deal with trampoline initialization on some platforms\n   __clear_cache\n-  __gcc_bcmp\n \n   # EH symbols\n   _Unwind_DeleteException"}]}