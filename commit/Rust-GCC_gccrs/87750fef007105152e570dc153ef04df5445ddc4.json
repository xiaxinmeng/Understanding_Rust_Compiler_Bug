{"sha": "87750fef007105152e570dc153ef04df5445ddc4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODc3NTBmZWYwMDcxMDUxNTJlNTcwZGMxNTNlZjA0ZGY1NDQ1ZGRjNA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-09-23T15:49:53Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-09-23T15:49:53Z"}, "message": "jcf-write.c (generate_bytecode_insns): Optimize binary operations with equal operands without side-effects.\n\n\n\t* jcf-write.c (generate_bytecode_insns): Optimize binary operations\n\twith equal operands without side-effects.\n\nFrom-SVN: r71684", "tree": {"sha": "eb45ea4f1abb566078d25b7a306a02cfcafd35a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb45ea4f1abb566078d25b7a306a02cfcafd35a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87750fef007105152e570dc153ef04df5445ddc4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87750fef007105152e570dc153ef04df5445ddc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87750fef007105152e570dc153ef04df5445ddc4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87750fef007105152e570dc153ef04df5445ddc4/comments", "author": null, "committer": null, "parents": [{"sha": "ac20c67af10d2f8aadabeb255ff66f31364e9e6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac20c67af10d2f8aadabeb255ff66f31364e9e6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac20c67af10d2f8aadabeb255ff66f31364e9e6d"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "6f127f3df009a7020d2625ae7ba6cbc665bf6fd6", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87750fef007105152e570dc153ef04df5445ddc4/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87750fef007105152e570dc153ef04df5445ddc4/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=87750fef007105152e570dc153ef04df5445ddc4", "patch": "@@ -1,3 +1,8 @@\n+2003-09-23  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* jcf-write.c (generate_bytecode_insns): Optimize binary operations\n+\twith equal operands without side-effects.\n+\n 2003-09-22  Jeff Sturm  <jsturm@one-point.com>\n \n \t* decl.c (java_init_decl_processing): Don't emit otable decls"}, {"sha": "aed6eb9773b7ee3b79e517b648322768b26474db", "filename": "gcc/java/jcf-write.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87750fef007105152e570dc153ef04df5445ddc4/gcc%2Fjava%2Fjcf-write.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87750fef007105152e570dc153ef04df5445ddc4/gcc%2Fjava%2Fjcf-write.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-write.c?ref=87750fef007105152e570dc153ef04df5445ddc4", "patch": "@@ -2095,10 +2095,10 @@ generate_bytecode_insns (tree exp, int target, struct jcf_partial *state)\n       tree arg0 = TREE_OPERAND (exp, 0);\n       tree arg1 = TREE_OPERAND (exp, 1);\n       jopcode += adjust_typed_op (type, 3);\n-      if (arg0 == arg1 && TREE_CODE (arg0) == SAVE_EXPR)\n+      if (arg0 != NULL_TREE && operand_equal_p (arg0, arg1, 0))\n \t{\n \t  /* fold may (e.g) convert 2*x to x+x. */\n-\t  generate_bytecode_insns (TREE_OPERAND (arg0, 0), target, state);\n+\t  generate_bytecode_insns (arg0, target, state);\n \t  emit_dup (TYPE_PRECISION (TREE_TYPE (arg0)) > 32 ? 2 : 1, 0, state);\n \t}\n       else"}]}