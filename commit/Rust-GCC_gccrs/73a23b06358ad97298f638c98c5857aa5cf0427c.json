{"sha": "73a23b06358ad97298f638c98c5857aa5cf0427c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNhMjNiMDYzNThhZDk3Mjk4ZjYzOGM5OGM1ODU3YWE1Y2YwNDI3Yw==", "commit": {"author": {"name": "Balaji V. Iyer", "email": "balaji.v.iyer@intel.com", "date": "2013-06-12T22:03:20Z"}, "committer": {"name": "Balaji V. Iyer", "email": "bviyer@gcc.gnu.org", "date": "2013-06-12T22:03:20Z"}, "message": "fix pr c/57577\n\nfix pr c/57577\ngcc/c/ChangeLog\n+2013-06-12  Balaji V. Iyer  <balaji.v.iyer@intel.com>\n+\n+       * c-array-notation.c (build_array_notation_expr): Reject array notation\n+       mismatch between LHS and RHS even inside a call_expr.  Also, removed\n+       a couple while statements that were dead code.\n+\n\ngcc/testsuite/ChangeLog\n+2013-06-12  Balaji V. Iyer  <balaji.v.iyer@intel.com>\n+\n+       PR c/57577\n+       * c-c++-common/cilk-plus/AN/pr57577.c: New testcase.\n+\n\nFrom-SVN: r200043", "tree": {"sha": "8687d4442d46f2ae893bd8d95b104c6f7d5bfea0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8687d4442d46f2ae893bd8d95b104c6f7d5bfea0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73a23b06358ad97298f638c98c5857aa5cf0427c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73a23b06358ad97298f638c98c5857aa5cf0427c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73a23b06358ad97298f638c98c5857aa5cf0427c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73a23b06358ad97298f638c98c5857aa5cf0427c/comments", "author": null, "committer": null, "parents": [{"sha": "6a0263647ee6694086e4dec1ee67094a31df10d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a0263647ee6694086e4dec1ee67094a31df10d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a0263647ee6694086e4dec1ee67094a31df10d9"}], "stats": {"total": 35, "additions": 23, "deletions": 12}, "files": [{"sha": "6179c3bb546536d1d17878044b6c186f43081712", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=73a23b06358ad97298f638c98c5857aa5cf0427c", "patch": "@@ -1,3 +1,9 @@\n+2013-06-12  Balaji V. Iyer  <balaji.v.iyer@intel.com>\n+\n+\t* c-array-notation.c (build_array_notation_expr): Reject array notation\n+\tmismatch between LHS and RHS even inside a call_expr.  Also, removed\n+\ta couple while statements that were dead code.\n+\n 2013-06-10  Balaji V. Iyer  <balaji.v.iyer@intel.com>\n \n \t* c-array-notation.c (fix_builtin_array_notation_fn): Fully folded"}, {"sha": "03b66b9cf794b9abe536d509036c5af804377013", "filename": "gcc/c/c-array-notation.c", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Fc%2Fc-array-notation.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Fc%2Fc-array-notation.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-array-notation.c?ref=73a23b06358ad97298f638c98c5857aa5cf0427c", "patch": "@@ -781,7 +781,7 @@ build_array_notation_expr (location_t location, tree lhs, tree lhs_origtype,\n   rhs_list_size = vec_safe_length (rhs_list);\n   lhs_list_size = vec_safe_length (lhs_list);\n   \n-  if (lhs_rank == 0 && rhs_rank != 0 && TREE_CODE (rhs) != CALL_EXPR)\n+  if (lhs_rank == 0 && rhs_rank != 0)\n     {\n       tree rhs_base = rhs;\n       if (TREE_CODE (rhs_base) == ARRAY_NOTATION_REF)\n@@ -802,17 +802,6 @@ build_array_notation_expr (location_t location, tree lhs, tree lhs_origtype,\n     }\n   if (lhs_rank != 0 && rhs_rank != 0 && lhs_rank != rhs_rank)\n     {\n-      tree lhs_base = lhs;\n-      tree rhs_base = rhs;\n-      \n-      for (ii = 0; ii < lhs_rank; ii++)\n-\tlhs_base = ARRAY_NOTATION_ARRAY (lhs_base);\n-\n-      while (rhs_base && TREE_CODE (rhs_base) != ARRAY_NOTATION_REF)\n-\trhs_base = TREE_OPERAND (rhs_base, 0);\n-      for (ii = 0; ii < rhs_rank; ii++)\n-\trhs_base = ARRAY_NOTATION_ARRAY (rhs_base);\n-      \n       error_at (location, \"rank mismatch between %qE and %qE\", lhs, rhs);\n       pop_stmt_list (an_init);\n       return error_mark_node;"}, {"sha": "5c45e1a20a97b72e1217b385cc32a74e631b3d5c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=73a23b06358ad97298f638c98c5857aa5cf0427c", "patch": "@@ -1,3 +1,8 @@\n+2013-06-12  Balaji V. Iyer  <balaji.v.iyer@intel.com>\n+\n+\tPR c/57577\n+\t* c-c++-common/cilk-plus/AN/pr57577.c: New testcase.\n+\n 2013-06-12  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/38958"}, {"sha": "fb3490efa822f9f0d81c60c7df69ed05d08e528b", "filename": "gcc/testsuite/c-c++-common/cilk-plus/AN/pr57577.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcilk-plus%2FAN%2Fpr57577.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73a23b06358ad97298f638c98c5857aa5cf0427c/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcilk-plus%2FAN%2Fpr57577.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcilk-plus%2FAN%2Fpr57577.c?ref=73a23b06358ad97298f638c98c5857aa5cf0427c", "patch": "@@ -0,0 +1,11 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fcilkplus\" } */\n+\n+int A[10], B[10][10];\n+int foo (int a);\n+\n+int main () {\n+  A[:] = foo (B[:][:]); /* { dg-error \"rank mismatch between\" } */\n+  A[0] = foo (B[:][:]); /* { dg-error \"cannot be scalar when\" } */\n+  return 0;\n+}"}]}