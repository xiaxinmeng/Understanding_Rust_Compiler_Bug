{"sha": "8662802d4924603981b20b3340cb31a098a48b51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODY2MjgwMmQ0OTI0NjAzOTgxYjIwYjMzNDBjYjMxYTA5OGE0OGI1MQ==", "commit": {"author": {"name": "Jan Beulich", "email": "jbeulich@gcc.gnu.org", "date": "2019-06-28T08:49:23Z"}, "committer": {"name": "Jan Beulich", "email": "jbeulich@gcc.gnu.org", "date": "2019-06-28T08:49:23Z"}, "message": "add file missing from earlier commit\n\nFrom-SVN: r272781", "tree": {"sha": "b9fe9d567dd07d7b5a8acc3a4a4a4d26a9acf50e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9fe9d567dd07d7b5a8acc3a4a4a4d26a9acf50e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8662802d4924603981b20b3340cb31a098a48b51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8662802d4924603981b20b3340cb31a098a48b51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8662802d4924603981b20b3340cb31a098a48b51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8662802d4924603981b20b3340cb31a098a48b51/comments", "author": null, "committer": null, "parents": [{"sha": "c1a106c222804416897c53f3c5dc8f028137151e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1a106c222804416897c53f3c5dc8f028137151e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1a106c222804416897c53f3c5dc8f028137151e"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "cb043b84e8f0a0868c0a1afd22d1cf85c16983b4", "filename": "gcc/testsuite/gcc.target/i386/cvtpd2pi.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8662802d4924603981b20b3340cb31a098a48b51/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fcvtpd2pi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8662802d4924603981b20b3340cb31a098a48b51/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fcvtpd2pi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fcvtpd2pi.c?ref=8662802d4924603981b20b3340cb31a098a48b51", "patch": "@@ -0,0 +1,36 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -msse2\" } */\n+\n+typedef int __attribute__((vector_size(8))) v2si_t;\n+typedef int __attribute__((vector_size(16))) v4si_t;\n+typedef double __attribute__((vector_size(16))) v2df_t;\n+\n+struct __attribute__((packed)) s {\n+  int i;\n+  v2si_t m;\n+  v4si_t v;\n+};\n+\n+int test (struct s*ps)\n+{\n+  v4si_t r = ps->v;\n+  v2si_t m;\n+\n+  if (ps->i > 0)\n+    {\n+      asm volatile (\"\" : \"+m\" (*ps));\n+      m = __builtin_ia32_cvtpd2pi ((v2df_t)ps->v);\n+      r[0] = __builtin_ia32_paddd (m, m)[0];\n+    }\n+  else\n+    {\n+      asm volatile (\"\" : \"+m\" (*ps));\n+      m = __builtin_ia32_cvttpd2pi ((v2df_t)ps->v);\n+      r[0] = __builtin_ia32_paddd (m, m)[0];\n+    }\n+\n+  return r[0];\n+}\n+\n+/* { dg-final { scan-assembler-not \"cvtpd2pi\\[ \\t]\\[^\\n\\r]*\\\\(\" } } */\n+/* { dg-final { scan-assembler-not \"cvttpd2pi\\[ \\t]\\[^\\n\\r]*\\\\(\" } } */"}]}