{"sha": "3ea8f61e9fcdc8e9b558d5c03cafdec439de0147", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2VhOGY2MWU5ZmNkYzhlOWI1NThkNWMwM2NhZmRlYzQzOWRlMDE0Nw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-30T15:04:20Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-30T15:04:20Z"}, "message": "[multiple changes]\n\n2014-07-30  Vincent Celier  <celier@adacore.com>\n\n\t* makeutl.adb (Insert_Project_Sources): When the library project\n\tis an aggregate Stand-Alone Library, insert in the queue the\n\tAda interface units, with Closure set to True;\n\n2014-07-30  Eric Botcazou  <ebotcazou@adacore.com>\n\n\t* sem_util.adb: Fix minor typo.\n\t* makeutl.adb: Minor reformatting.\n\nFrom-SVN: r213294", "tree": {"sha": "4560aa9d82c0431860eaac87d1813336b4077893", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4560aa9d82c0431860eaac87d1813336b4077893"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147/comments", "author": null, "committer": null, "parents": [{"sha": "976d5a222fc23279e239ad926472c7810869e494", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/976d5a222fc23279e239ad926472c7810869e494", "html_url": "https://github.com/Rust-GCC/gccrs/commit/976d5a222fc23279e239ad926472c7810869e494"}], "stats": {"total": 85, "additions": 58, "deletions": 27}, "files": [{"sha": "2efa3d69644389f70db8b2c761a40d732a4c2ff8", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3ea8f61e9fcdc8e9b558d5c03cafdec439de0147", "patch": "@@ -1,3 +1,14 @@\n+2014-07-30  Vincent Celier  <celier@adacore.com>\n+\n+\t* makeutl.adb (Insert_Project_Sources): When the library project\n+\tis an aggregate Stand-Alone Library, insert in the queue the\n+\tAda interface units, with Closure set to True;\n+\n+2014-07-30  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* sem_util.adb: Fix minor typo.\n+\t* makeutl.adb: Minor reformatting.\n+\n 2014-07-30  Robert Dewar  <dewar@adacore.com>\n \n \t* exp_ch7.adb, checks.adb, makeutl.adb, makeutl.ads: Minor reformatting."}, {"sha": "a53ab590b5bd995f7d9e96ab4dcfebfbad46f2cc", "filename": "gcc/ada/makeutl.adb", "status": "modified", "additions": 46, "deletions": 26, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147/gcc%2Fada%2Fmakeutl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147/gcc%2Fada%2Fmakeutl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.adb?ref=3ea8f61e9fcdc8e9b558d5c03cafdec439de0147", "patch": "@@ -2969,41 +2969,61 @@ package body Makeutl is\n                   then\n                      if (Unit_Based\n                           or else Source.Unit = No_Unit_Index\n-                          or else Source.Project.Library)\n+                          or else Source.Project.Library\n+                          or else Project.Qualifier = Aggregate_Library)\n                        and then not Is_Subunit (Source)\n                      then\n                         OK := True;\n                         Closure := False;\n \n-                        if Source.Unit /= No_Unit_Index\n-                          and then Source.Project.Library\n-                          and then Source.Project.Standalone_Library /= No\n-                        then\n-                           --  Check if the unit is in the interface\n-                           OK := False;\n+                        declare\n+                           SAL_Project : Project_Id := No_Project;\n \n-                           declare\n-                              List : String_List_Id :=\n-                                Source.Project.Lib_Interface_ALIs;\n-                              Element : String_Element;\n+                        begin\n+                           if Project.Qualifier = Aggregate_Library\n+                             and then Project.Standalone_Library /= No\n+                           then\n+                              if Source.Unit /= No_Unit_Index then\n+                                 SAL_Project := Project;\n+                              end if;\n \n-                           begin\n-                              while List /= Nil_String loop\n-                                 Element :=\n-                                   Project_Tree.Shared.String_Elements.Table\n-                                     (List);\n+                           elsif Source.Unit /= No_Unit_Index\n+                             and then Source.Project.Library\n+                             and then Source.Project.Standalone_Library /= No\n+                           then\n+                              SAL_Project := Source.Project;\n+                           end if;\n \n-                                 if Element.Value = Name_Id (Source.Dep_Name)\n-                                 then\n-                                    OK := True;\n-                                    Closure := True;\n-                                    exit;\n-                                 end if;\n+                           if SAL_Project /= No_Project then\n \n-                                 List := Element.Next;\n-                              end loop;\n-                           end;\n-                        end if;\n+                              --  Check if the unit is in the interface\n+\n+                              OK := False;\n+\n+                              declare\n+                                 List    : String_List_Id :=\n+                                             SAL_Project.Lib_Interface_ALIs;\n+                                 Element : String_Element;\n+\n+                              begin\n+                                 while List /= Nil_String loop\n+                                    Element :=\n+                                      Project_Tree.Shared.String_Elements.Table\n+                                        (List);\n+\n+                                    if Element.Value =\n+                                         Name_Id (Source.Dep_Name)\n+                                    then\n+                                       OK := True;\n+                                       Closure := True;\n+                                       exit;\n+                                    end if;\n+\n+                                    List := Element.Next;\n+                                 end loop;\n+                              end;\n+                           end if;\n+                        end;\n \n                         if OK then\n                            Queue.Insert"}, {"sha": "af04384cc93c58f30b621ed693e832943632c478", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ea8f61e9fcdc8e9b558d5c03cafdec439de0147/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=3ea8f61e9fcdc8e9b558d5c03cafdec439de0147", "patch": "@@ -16001,7 +16001,7 @@ package body Sem_Util is\n          elsif Is_Scalar_Type (T) then\n \n             --  If the subrange bounds are materialized by dedicated constant\n-            --  objects, also include them to the debug info to make sure the\n+            --  objects, also include them in the debug info to make sure the\n             --  debugger can properly use them.\n \n             if Present (Scalar_Range (T))"}]}