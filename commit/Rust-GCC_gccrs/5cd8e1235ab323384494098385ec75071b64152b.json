{"sha": "5cd8e1235ab323384494098385ec75071b64152b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNkOGUxMjM1YWIzMjMzODQ0OTQwOTgzODVlYzc1MDcxYjY0MTUyYg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2006-07-15T05:11:38Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2006-07-15T05:11:38Z"}, "message": "trans-expr.c (gfc_trans_string_copy): Evaluate the string lengths\n\n2006-07-14  Steven G. Kargl  <kargls@comcast.net>\n\n\t* trans-expr.c (gfc_trans_string_copy): Evaluate the string lengths\n\nFrom-SVN: r115463", "tree": {"sha": "3db33dae36595a55d06ad18398dc9d08e584b1f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3db33dae36595a55d06ad18398dc9d08e584b1f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5cd8e1235ab323384494098385ec75071b64152b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cd8e1235ab323384494098385ec75071b64152b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cd8e1235ab323384494098385ec75071b64152b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cd8e1235ab323384494098385ec75071b64152b/comments", "author": null, "committer": null, "parents": [{"sha": "1321e7aec68278b64df07d35bcf043bd70caf189", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1321e7aec68278b64df07d35bcf043bd70caf189", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1321e7aec68278b64df07d35bcf043bd70caf189"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "d21a2bf502c13734c6c7a41888bb78c4e13f644f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cd8e1235ab323384494098385ec75071b64152b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cd8e1235ab323384494098385ec75071b64152b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5cd8e1235ab323384494098385ec75071b64152b", "patch": "@@ -1,3 +1,7 @@\n+2006-07-14  Steven G. Kargl  <kargls@comcast.net>\n+\n+\t* trans-expr.c (gfc_trans_string_copy): Evaluate the string lengths\n+\n 006-07-13  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/28174"}, {"sha": "d536dcde626655449620f90621f36b177d833d4f", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cd8e1235ab323384494098385ec75071b64152b/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cd8e1235ab323384494098385ec75071b64152b/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=5cd8e1235ab323384494098385ec75071b64152b", "patch": "@@ -2228,10 +2228,10 @@ gfc_conv_function_call (gfc_se * se, gfc_symbol * sym,\n /* Generate code to copy a string.  */\n \n static void\n-gfc_trans_string_copy (stmtblock_t * block, tree dlen, tree dest,\n-\t\t       tree slen, tree src)\n+gfc_trans_string_copy (stmtblock_t * block, tree dlength, tree dest,\n+\t\t       tree slength, tree src)\n {\n-  tree tmp;\n+  tree tmp, dlen, slen;\n   tree dsc;\n   tree ssc;\n   tree cond;\n@@ -2241,6 +2241,9 @@ gfc_trans_string_copy (stmtblock_t * block, tree dlen, tree dest,\n   tree tmp4;\n   stmtblock_t tempblock;\n \n+  dlen = fold_convert (size_type_node, gfc_evaluate_now (dlength, block));\n+  slen = fold_convert (size_type_node, gfc_evaluate_now (slength, block));\n+\n   /* Deal with single character specially.  */\n   dsc = gfc_to_single_character (dlen, dest);\n   ssc = gfc_to_single_character (slen, src);"}]}