{"sha": "41296e2a2391863bdaa411bb67d8ac9af3e39fde", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDEyOTZlMmEyMzkxODYzYmRhYTQxMWJiNjdkOGFjOWFmM2UzOWZkZQ==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@albatross.co.nz", "date": "1999-07-26T02:51:44Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "1999-07-26T02:51:44Z"}, "message": "natString.cc (substring): optimize where substring is entire String.\n\n1999-07-22  Bryce McKinlay  <bryce@albatross.co.nz>\n\n\t* java/lang/natString.cc (substring): optimize where substring is\n\tentire String.\n\t* java/io/File.java (getName): don't return separator with file name.\n\t* java/io/natFile.cc (attr): fix overflow.\n\nFrom-SVN: r28246", "tree": {"sha": "41653eeceacd1252434a7f1e6a81fc4ca6638997", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/41653eeceacd1252434a7f1e6a81fc4ca6638997"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/41296e2a2391863bdaa411bb67d8ac9af3e39fde", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41296e2a2391863bdaa411bb67d8ac9af3e39fde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41296e2a2391863bdaa411bb67d8ac9af3e39fde", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41296e2a2391863bdaa411bb67d8ac9af3e39fde/comments", "author": null, "committer": null, "parents": [{"sha": "648d2ffce89154a5c166258f6638ab32e737a2c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/648d2ffce89154a5c166258f6638ab32e737a2c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/648d2ffce89154a5c166258f6638ab32e737a2c6"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "5c4510e30aa2b987e3083aaacc8c70290e5d0c48", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=41296e2a2391863bdaa411bb67d8ac9af3e39fde", "patch": "@@ -1,3 +1,10 @@\n+1999-07-22  Bryce McKinlay  <bryce@albatross.co.nz>\n+\n+\t* java/lang/natString.cc (substring): optimize where substring is\n+\tentire String.\n+\t* java/io/File.java (getName): don't return separator with file name.\n+\t* java/io/natFile.cc (attr): fix overflow.\n+\n Sun Jul 25 01:43:34 1999  Anthony Green  <green@cygnus.com>\n \n \t* mauve-libgcj: Disable Object Serialization tests."}, {"sha": "fd96501cf2525889e00396e7ac0dcc58981b1ed3", "filename": "libjava/java/io/File.java", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2Fjava%2Fio%2FFile.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2Fjava%2Fio%2FFile.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FFile.java?ref=41296e2a2391863bdaa411bb67d8ac9af3e39fde", "patch": "@@ -108,9 +108,7 @@ public String getAbsolutePath ()\n   public String getName ()\n   {\n     int last = path.lastIndexOf(separatorChar);\n-    if (last == -1)\n-      last = 0;\n-    return path.substring(last);\n+    return path.substring(last + 1);\n   }\n \n   public String getParent ()"}, {"sha": "9b9a4affea6d15b5afc9ba055fbf8dd0230a6ab6", "filename": "libjava/java/io/natFile.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2Fjava%2Fio%2FnatFile.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2Fjava%2Fio%2FnatFile.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFile.cc?ref=41296e2a2391863bdaa411bb67d8ac9af3e39fde", "patch": "@@ -105,7 +105,7 @@ java::io::File::attr (jstring canon, jint query)\n   JvAssert (query == MODIFIED || query == LENGTH);\n   // FIXME: time computation is very POSIX-specific -- POSIX and Java\n   // have the same Epoch.\n-  return query == MODIFIED ? sb.st_mtime * 1000 : sb.st_size;\n+  return query == MODIFIED ? (jlong)sb.st_mtime * 1000 : sb.st_size;\n #else\n   // There's no good choice here.\n   return 23;"}, {"sha": "bfdc50fb7db65e2610bfdbdd3734c3ac036af673", "filename": "libjava/java/lang/natString.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2Fjava%2Flang%2FnatString.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/41296e2a2391863bdaa411bb67d8ac9af3e39fde/libjava%2Fjava%2Flang%2FnatString.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatString.cc?ref=41296e2a2391863bdaa411bb67d8ac9af3e39fde", "patch": "@@ -687,6 +687,8 @@ java::lang::String::substring (jint beginIndex, jint endIndex)\n {\n   if (beginIndex < 0 || endIndex > count || beginIndex > endIndex)\n     JvThrow (new StringIndexOutOfBoundsException());\n+  if (beginIndex == 0 && endIndex == count)\n+    return this;\n   jint newCount = endIndex - beginIndex;\n   if (newCount <= 8)  // Optimization, mainly for GC.\n     return JvNewString(JvGetStringChars(this) + beginIndex, newCount);"}]}