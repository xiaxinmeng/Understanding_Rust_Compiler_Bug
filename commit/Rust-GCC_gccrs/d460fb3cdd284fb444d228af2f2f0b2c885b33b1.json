{"sha": "d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ2MGZiM2NkZDI4NGZiNDQ0ZDIyOGFmMmYyZjBiMmM4ODViMzNiMQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-06-17T10:31:24Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-06-17T10:31:24Z"}, "message": "dwarf2out.c: Disable EH_FRAME_SECTION if we don't have .init.\n\n        * dwarf2out.c: Disable EH_FRAME_SECTION if we don't have .init.\n        * configure.in: Don't disable collect2 when we have GNU ld.\n\nFrom-SVN: r20536", "tree": {"sha": "3023c4755d1feae897aa8935050f3b5ebd32036b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3023c4755d1feae897aa8935050f3b5ebd32036b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/comments", "author": null, "committer": null, "parents": [{"sha": "4b95eb496dc3b0bc1680ad978be4b2f094de556d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b95eb496dc3b0bc1680ad978be4b2f094de556d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b95eb496dc3b0bc1680ad978be4b2f094de556d"}], "stats": {"total": 31, "additions": 21, "deletions": 10}, "files": [{"sha": "601d4da7997ee18176cb9bbc0ab3ffd9377b4608", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "patch": "@@ -1,3 +1,9 @@\n+1998-06-17  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* dwarf2out.c: Disable EH_FRAME_SECTION if we don't have .init.\n+\n+\t* configure.in: Don't disable collect2 when we have GNU ld.\n+\n Wed Jun 17 08:38:13 1998  Jeffrey A Law  (law@cygnus.com)\n \n \t* configure.in (nm): Make a link to \"nm\" in the build tree too."}, {"sha": "1390118fbaa6ae184036808792737ed78ae14db7", "filename": "gcc/configure", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "patch": "@@ -4763,11 +4763,11 @@ for machine in $build $host $target; do\n \tfi\n \n \t# No need for collect2 if we have the GNU linker.\n-\tcase x$gnu_ld in\n-\txyes)\n-\t\tuse_collect2=\n-\t\t;;\n-\tesac\n+\t# Actually, there is now; GNU ld doesn't handle the EH info or\n+\t# collecting for shared libraries.\n+\t# Instead we always turn on use_collect2; it's a rather heavyweight\n+\t# solution to the problem, but it works.\n+\tuse_collect2=yes\n \n # Save data on machine being used to compile GCC in build_xm_file.\n # Save data on host machine in vars host_xm_file and host_xmake_file."}, {"sha": "377e54521b47525a7d3f5f8c442651b8c156ee07", "filename": "gcc/configure.in", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "patch": "@@ -2919,11 +2919,11 @@ for machine in $build $host $target; do\n \tfi\n \n \t# No need for collect2 if we have the GNU linker.\n-\tcase x$gnu_ld in\n-\txyes)\n-\t\tuse_collect2=\n-\t\t;;\n-\tesac\n+\t# Actually, there is now; GNU ld doesn't handle the EH info or\n+\t# collecting for shared libraries.\n+\t# Instead we always turn on use_collect2; it's a rather heavyweight\n+\t# solution to the problem, but it works.\n+\tuse_collect2=yes\n \n # Save data on machine being used to compile GCC in build_xm_file.\n # Save data on host machine in vars host_xm_file and host_xmake_file."}, {"sha": "6d6a502c4e40afb57d66405025bcfd93890cfc83", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d460fb3cdd284fb444d228af2f2f0b2c885b33b1/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=d460fb3cdd284fb444d228af2f2f0b2c885b33b1", "patch": "@@ -1624,6 +1624,11 @@ output_cfi (cfi, fde)\n #endif\n #endif\n \n+/* If we aren't using crtstuff to run ctors, don't use it for EH.  */\n+#if !defined (HAS_INIT_SECTION) && !defined (INIT_SECTION_ASM_OP)\n+#undef EH_FRAME_SECTION\n+#endif\n+\n /* Output the call frame information used to used to record information\n    that relates to calculating the frame pointer, and records the\n    location of saved registers.  */"}]}