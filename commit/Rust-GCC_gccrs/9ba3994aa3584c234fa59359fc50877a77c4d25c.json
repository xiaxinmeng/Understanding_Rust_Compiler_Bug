{"sha": "9ba3994aa3584c234fa59359fc50877a77c4d25c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWJhMzk5NGFhMzU4NGMyMzRmYTU5MzU5ZmM1MDg3N2E3N2M0ZDI1Yw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1998-03-05T02:50:12Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-03-05T02:50:12Z"}, "message": "alpha.h (TARGET_WINDOWS_NT, [...]): Just make them real constants, since they can't be changed.\n\n        * alpha/alpha.h (TARGET_WINDOWS_NT, TARGET_OPEN_VMS): Just make them\n        real constants, since they can't be changed.\n        (TARGET_AS_CAN_SUBTRACT_LABELS): New.\n        * alpha/alpha.md (builtin_setjmp_receiver): Use it.\n        * alpha/osf.h (TARGET_AS_CAN_SUBTRACT_LABELS): New.\n        * alpha/osf2or3.h (TARGET_AS_CAN_SUBTRACT_LABELS): New.\n        * alpha/vms.h (TARGET_OPEN_VMS): New.\n        * alpha/win-nt.h (TARGET_WINDOWS_NT): New.\n\nFrom-SVN: r18417", "tree": {"sha": "1ad8cf5b863d2e50f0fee78f39eed9a33a1c2cab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ad8cf5b863d2e50f0fee78f39eed9a33a1c2cab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ba3994aa3584c234fa59359fc50877a77c4d25c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ba3994aa3584c234fa59359fc50877a77c4d25c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ba3994aa3584c234fa59359fc50877a77c4d25c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ba3994aa3584c234fa59359fc50877a77c4d25c/comments", "author": null, "committer": null, "parents": [{"sha": "5ec105cd718cc7a894cbfcd14f69863878ea8ab0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ec105cd718cc7a894cbfcd14f69863878ea8ab0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ec105cd718cc7a894cbfcd14f69863878ea8ab0"}], "stats": {"total": 71, "additions": 53, "deletions": 18}, "files": [{"sha": "59167e5ed3fd0856d27981c25965b6bcd361fb99", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ba3994aa3584c234fa59359fc50877a77c4d25c", "patch": "@@ -1,3 +1,14 @@\n+Thu Mar  5 02:45:48 1998  Richard Henderson  <rth@cygnus.com>\n+\n+\t* alpha/alpha.h (TARGET_WINDOWS_NT, TARGET_OPEN_VMS): Just make them\n+\treal constants, since they can't be changed.\n+\t(TARGET_AS_CAN_SUBTRACT_LABELS): New.\n+\t* alpha/alpha.md (builtin_setjmp_receiver): Use it.\n+\t* alpha/osf.h (TARGET_AS_CAN_SUBTRACT_LABELS): New.\n+\t* alpha/osf2or3.h (TARGET_AS_CAN_SUBTRACT_LABELS): New.\n+\t* alpha/vms.h (TARGET_OPEN_VMS): New.\n+\t* alpha/win-nt.h (TARGET_WINDOWS_NT): New.\n+\n Thu Mar  5 02:41:27 1998  Richard Henderson  <rth@cygnus.com>\n \n \t* reload.c (find_reloads): Always force (subreg (mem)) to be"}, {"sha": "0e02a640801f6fee56ede1d669a7ac07d80ef3ef", "filename": "gcc/config/alpha/alpha.h", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Falpha.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Falpha.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Falpha.h?ref=9ba3994aa3584c234fa59359fc50877a77c4d25c", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler, for DEC Alpha.\n-   Copyright (C) 1992, 93, 94, 95, 96, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1992, 93, 94, 95, 96, 97, 1998 Free Software Foundation, Inc.\n    Contributed by Richard Kenner (kenner@vlsi1.ultra.nyu.edu)\n \n This file is part of GNU CC.\n@@ -122,22 +122,12 @@ extern enum alpha_fp_trap_mode alpha_fptm;\n #define MASK_IEEE_WITH_INEXACT 32\n #define TARGET_IEEE_WITH_INEXACT (target_flags & MASK_IEEE_WITH_INEXACT)\n \n-/* This means we are compiling for Windows NT.  */\n-\n-#define MASK_WINDOWS_NT\t64\n-#define TARGET_WINDOWS_NT (target_flags & MASK_WINDOWS_NT)\n-\n /* This means we must construct all constants rather than emitting\n    them as literal data.  */\n \n #define MASK_BUILD_CONSTANTS 128\n #define TARGET_BUILD_CONSTANTS (target_flags & MASK_BUILD_CONSTANTS)\n \n-/* This means we are compiling for openVMS.  */\n-\n-#define MASK_OPEN_VMS\t256\n-#define TARGET_OPEN_VMS (target_flags & MASK_OPEN_VMS)\n-\n /* This means we handle floating points in VAX F- (float)\n    or G- (double) Format.  */\n \n@@ -170,6 +160,19 @@ extern enum alpha_fp_trap_mode alpha_fptm;\n #define MASK_SUPPORT_ARCH 32768\n #define TARGET_SUPPORT_ARCH\t(target_flags & MASK_SUPPORT_ARCH)\n \n+/* These are for target os support and cannot be changed at runtime.  */\n+#ifndef TARGET_WINDOWS_NT\n+#define TARGET_WINDOWS_NT 0\n+#endif\n+#ifndef TARGET_OPEN_VMS\n+#define TARGET_OPEN_VMS 0\n+#endif\n+\n+#ifndef TARGET_AS_CAN_SUBTRACT_LABELS\n+#define TARGET_AS_CAN_SUBTRACT_LABELS TARGET_GAS\n+#endif\n+\n+\n /* Macro to define tables used to set the flags.\n    This is a list in braces of pairs in braces,\n    each pair being { \"NAME\", VALUE }"}, {"sha": "7c3ec5237e5240cca83e0a07d4ab5fb40b581441", "filename": "gcc/config/alpha/alpha.md", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Falpha.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Falpha.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Falpha.md?ref=9ba3994aa3584c234fa59359fc50877a77c4d25c", "patch": "@@ -1,5 +1,5 @@\n ;; Machine description for DEC Alpha for GNU C compiler\n-;; Copyright (C) 1992, 93, 94, 95, 96, 1997 Free Software Foundation, Inc.\n+;; Copyright (C) 1992, 93, 94, 95, 96, 97, 1998 Free Software Foundation, Inc.\n ;; Contributed by Richard Kenner (kenner@vlsi1.ultra.nyu.edu)\n \n ;; This file is part of GNU CC.\n@@ -5076,9 +5076,14 @@\n \n (define_insn \"builtin_setjmp_receiver\"\n   [(unspec_volatile [(match_operand 0 \"\" \"\")] 2)]\n-  \"! TARGET_OPEN_VMS && ! TARGET_WINDOWS_NT\"\n+  \"! TARGET_OPEN_VMS && ! TARGET_WINDOWS_NT && TARGET_AS_CAN_SUBTRACT_LABELS\"\n   \"\\\\n$LSJ%=:\\;ldgp $29,$LSJ%=-%l0($27)\")\n \n+(define_insn \"\"\n+  [(unspec_volatile [(match_operand 0 \"\" \"\")] 2)]\n+  \"! TARGET_OPEN_VMS && ! TARGET_WINDOWS_NT\"\n+  \"br $27,$LSJ%=\\\\n$LSJ%=:\\;ldgp $29,0($27)\")\n+\n (define_expand \"nonlocal_goto_receiver\"\n   [(unspec_volatile [(const_int 0)] 1)\n    (set (reg:DI 27) (mem:DI (reg:DI 29)))"}, {"sha": "ae4170d25e3cd784db06a25dd215ad79ec9791e9", "filename": "gcc/config/alpha/osf.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fosf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fosf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fosf.h?ref=9ba3994aa3584c234fa59359fc50877a77c4d25c", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler, for DEC Alpha on OSF/1.\n-   Copyright (C) 1992, 93, 94, 95, 96, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1992, 93, 94, 95, 96, 97, 1998 Free Software Foundation, Inc.\n    Contributed by Richard Kenner (kenner@vlsi1.ultra.nyu.edu)\n \n This file is part of GNU CC.\n@@ -19,6 +19,10 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n+/* As of OSF 4.0, as can subtract adjacent labels.  */\n+\n+#undef TARGET_AS_CAN_SUBTRACT_LABELS\n+#define TARGET_AS_CAN_SUBTRACT_LABELS 1\n \n /* Names to predefine in the preprocessor for this target machine.  */\n "}, {"sha": "5abdb0e98b13ff44a74053885510e015f394e6d1", "filename": "gcc/config/alpha/osf2or3.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fosf2or3.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fosf2or3.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fosf2or3.h?ref=9ba3994aa3584c234fa59359fc50877a77c4d25c", "patch": "@@ -22,3 +22,9 @@ Boston, MA 02111-1307, USA.  */\n \n #undef LIB_SPEC\n #define LIB_SPEC \"%{p:-lprof1} %{pg:-lprof1} %{a:-lprof2} -lc\"\n+\n+/* As of OSF 3.2, as still can't subtract adjacent labels.  */\n+\n+#undef TARGET_AS_CAN_SUBTRACT_LABELS\n+#define TARGET_AS_CAN_SUBTRACT_LABELS 0\n+"}, {"sha": "2ef5de1ada16d6830c85f59c5a2b849373b27095", "filename": "gcc/config/alpha/vms.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fvms.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fvms.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fvms.h?ref=9ba3994aa3584c234fa59359fc50877a77c4d25c", "patch": "@@ -1,5 +1,5 @@\n /* Output variables, constants and external declarations, for GNU compiler.\n-   Copyright (C) 1996, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1996, 1997, 1998 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -75,7 +75,10 @@ Boston, MA 02111-1307, USA.  */\n #define DOLLARS_IN_IDENTIFIERS 2\n \n #undef TARGET_DEFAULT\n-#define TARGET_DEFAULT (MASK_FP|MASK_FPREGS|MASK_GAS|MASK_OPEN_VMS)\n+#define TARGET_DEFAULT (MASK_FP|MASK_FPREGS|MASK_GAS)\n+#undef TARGET_OPEN_VMS\n+#define TARGET_OPEN_VMS 1\n+\n #undef TARGET_NAME   \n #define TARGET_NAME \"OpenVMS/Alpha\"\n #undef TARGET_VERSION"}, {"sha": "30c8d6d07cd420321a826e84519009e8b70036e4", "filename": "gcc/config/alpha/win-nt.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fwin-nt.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ba3994aa3584c234fa59359fc50877a77c4d25c/gcc%2Fconfig%2Falpha%2Fwin-nt.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Fwin-nt.h?ref=9ba3994aa3584c234fa59359fc50877a77c4d25c", "patch": "@@ -1,6 +1,6 @@\n /* Definitions of target machine for GNU compiler, for DEC Alpha\n    running Windows/NT.\n-   Copyright (C) 1995, 1996 Free Software Foundation, Inc.\n+   Copyright (C) 1995, 1996, 1998 Free Software Foundation, Inc.\n    Contributed by Richard Kenner (kenner@vlsi1.ultra.nyu.edu)\n \n This file is part of GNU CC.\n@@ -21,7 +21,10 @@ the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n #undef TARGET_DEFAULT\n-#define TARGET_DEFAULT (MASK_FP | MASK_FPREGS | MASK_WINDOWS_NT)\n+#define TARGET_DEFAULT (MASK_FP | MASK_FPREGS)\n+\n+#undef TARGET_WINDOWS_NT\n+#define TARGET_WINDOWS_NT 1\n \n /* Names to predefine in the preprocessor for this target machine.  */\n "}]}