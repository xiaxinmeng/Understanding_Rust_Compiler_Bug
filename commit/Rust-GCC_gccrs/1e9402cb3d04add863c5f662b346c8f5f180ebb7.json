{"sha": "1e9402cb3d04add863c5f662b346c8f5f180ebb7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU5NDAyY2IzZDA0YWRkODYzYzVmNjYyYjM0NmM4ZjVmMTgwZWJiNw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-23T01:35:27Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-23T01:35:27Z"}, "message": "A variable with a preinit block requires an intialization function.\n\nFrom-SVN: r168198", "tree": {"sha": "cb145c717f1c276fe843b951b6524a08004d8194", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb145c717f1c276fe843b951b6524a08004d8194"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e9402cb3d04add863c5f662b346c8f5f180ebb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e9402cb3d04add863c5f662b346c8f5f180ebb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e9402cb3d04add863c5f662b346c8f5f180ebb7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e9402cb3d04add863c5f662b346c8f5f180ebb7/comments", "author": null, "committer": null, "parents": [{"sha": "9d65de21235ee355ae15350fb119a5be371edb4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d65de21235ee355ae15350fb119a5be371edb4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d65de21235ee355ae15350fb119a5be371edb4b"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "9e51b63e62f0a71083fcbddb9fcb5b6837444ab3", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e9402cb3d04add863c5f662b346c8f5f180ebb7/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e9402cb3d04add863c5f662b346c8f5f180ebb7/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=1e9402cb3d04add863c5f662b346c8f5f180ebb7", "patch": "@@ -1384,7 +1384,11 @@ Gogo::determine_types()\n \n \t  // If this is a global variable which requires runtime\n \t  // initialization, we need an initialization function.\n-\t  if (!variable->is_global() || variable->init() == NULL)\n+\t  if (!variable->is_global())\n+\t    ;\n+\t  else if (variable->has_pre_init())\n+\t    this->need_init_fn_ = true;\n+\t  else if (variable->init() == NULL)\n \t    ;\n \t  else if (variable->type()->interface_type() != NULL)\n \t    this->need_init_fn_ = true;"}]}