{"sha": "95489a2a279893bf2e0fbb3fb378bdfcf0212faf", "node_id": "C_kwDOANBUbNoAKDk1NDg5YTJhMjc5ODkzYmYyZTBmYmIzZmIzNzhiZGZjZjAyMTJmYWY", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2022-11-22T17:22:03Z"}, "committer": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2022-11-22T17:29:24Z"}, "message": "ipa-sra: Dump edge summaries also for non-candidates\n\nThis should have been part of r12-578-g717d278af93a4a.  Call edge\nsummaries provide information required for IPA-SRA transformations in\nthe callees but are generated when analyzing callers and thus also\ncallers which are not IPA-SRA candidates themselves.  Therefore we\nanalyze them but don't dump them, which makes the dumops quite\nincomplete. This patch fixes that.\n\ngcc/ChangeLog:\n\n2021-12-14  Martin Jambor  <mjambor@suse.cz>\n\n\t* ipa-sra.cc (ipa_sra_dump_all_summaries): Dump edge summaries even\n\tfor non-candidates.", "tree": {"sha": "6e04f35c561c2f09c89ed9a1f855705864eda891", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e04f35c561c2f09c89ed9a1f855705864eda891"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95489a2a279893bf2e0fbb3fb378bdfcf0212faf", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE5elVTFt/d09Vsoczv2PBvD+kNUAFAmN9BvQACgkQv2PBvD+k\nNUD/yg//VHjJvhoPIYkvWDVK/ebl4la/NsdSPhIodS61dSloWJGdnBO6Q3ddmA8G\nl3OouAhrsEuugRJ90qi8LgiS/JZ4xiD58tC2R+qzrIt4n0vWXAKwGcOTEM/hm4lV\nUUok7nnTZM6LZ89GlSyxkiL7wGJd0C3AK65/aGkDPRLiywG63tCNWSh5she4TO/i\nblF3RB9au9bviqmvvkrMhNEIL0QO6mZTA9jhrm6UFkBY5tFUW3KJnqOwcqZcSlYZ\nga6m4KYrwQ8us8O44wz3dA6FyhjLtwIN6Eki5HTHfmFtJeNcFwGCfXkt+0YP+vW+\nJ5MvH2eWXJCSZ6IbCBDeHdQRnIbRASrBsLI9X45IK9PSyhd5eLOpTpickolAwFXv\n6ltDLO74y3r1yauWh79d3ID/7aXBspM5Rore9SX6Ak3dKxVzoKptQVtMfZ+KBWJP\nw5PvcScNF5dgevWLPAVN89NtKo+PfoOI6eQkEdobo6EYLpU2z0mthtVbySYIIhTD\nP60GmXUaBKApD0QJydsA375pw6yYQ43kvmA5ZHe/S1bt9z04q4f8Qf7/qSldgdQl\nLdON9U7UkHKZbh2dKy8ZwJQnz+6qAKQKgCYY5TR6JKgJRJA34F+meLXNdQtqpWDj\nIBDOTrPtU9ZwHZLr8EbmoS8X8oy1ufmpstEFYxXvss5SviqXfro=\n=qqKa\n-----END PGP SIGNATURE-----", "payload": "tree 6e04f35c561c2f09c89ed9a1f855705864eda891\nparent feeb0d68f1c7085199c3734e6517a3a4b58309ef\nauthor Martin Jambor <mjambor@suse.cz> 1669137723 +0100\ncommitter Martin Jambor <mjambor@suse.cz> 1669138164 +0100\n\nipa-sra: Dump edge summaries also for non-candidates\n\nThis should have been part of r12-578-g717d278af93a4a.  Call edge\nsummaries provide information required for IPA-SRA transformations in\nthe callees but are generated when analyzing callers and thus also\ncallers which are not IPA-SRA candidates themselves.  Therefore we\nanalyze them but don't dump them, which makes the dumops quite\nincomplete. This patch fixes that.\n\ngcc/ChangeLog:\n\n2021-12-14  Martin Jambor  <mjambor@suse.cz>\n\n\t* ipa-sra.cc (ipa_sra_dump_all_summaries): Dump edge summaries even\n\tfor non-candidates.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95489a2a279893bf2e0fbb3fb378bdfcf0212faf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95489a2a279893bf2e0fbb3fb378bdfcf0212faf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95489a2a279893bf2e0fbb3fb378bdfcf0212faf/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "feeb0d68f1c7085199c3734e6517a3a4b58309ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/feeb0d68f1c7085199c3734e6517a3a4b58309ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/feeb0d68f1c7085199c3734e6517a3a4b58309ef"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "718201d27faa42136ba01a187e7455b0560a9d2c", "filename": "gcc/ipa-sra.cc", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95489a2a279893bf2e0fbb3fb378bdfcf0212faf/gcc%2Fipa-sra.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95489a2a279893bf2e0fbb3fb378bdfcf0212faf/gcc%2Fipa-sra.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-sra.cc?ref=95489a2a279893bf2e0fbb3fb378bdfcf0212faf", "patch": "@@ -2805,13 +2805,10 @@ ipa_sra_dump_all_summaries (FILE *f)\n       if (!ifs)\n \tfprintf (f, \"  Function does not have any associated IPA-SRA \"\n \t\t \"summary\\n\");\n+      else if (!ifs->m_candidate)\n+\tfprintf (f, \"  Not a candidate function\\n\");\n       else\n \t{\n-\t  if (!ifs->m_candidate)\n-\t    {\n-\t      fprintf (f, \"  Not a candidate function\\n\");\n-\t      continue;\n-\t    }\n \t  if (ifs->m_returns_value)\n \t    fprintf (f, \"  Returns value\\n\");\n \t  if (vec_safe_is_empty (ifs->m_parameters))"}]}