{"sha": "5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWVlZWRkNGQ5ZThlOGM3M2MyMjYzZjE0NDJkODlmMzU3ZWM2ZmY3Mw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-01-21T01:30:34Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1995-01-21T01:30:34Z"}, "message": "(scan_loop): For the replace_rtx call, copy the rtx that is\nbeing substituted in before the call.\n\nFrom-SVN: r8779", "tree": {"sha": "19c65f204065e513919168fd286082d035c7a283", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/19c65f204065e513919168fd286082d035c7a283"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73/comments", "author": null, "committer": null, "parents": [{"sha": "23ed92ca4c901a654040989a067819c1f0b77860", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23ed92ca4c901a654040989a067819c1f0b77860", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23ed92ca4c901a654040989a067819c1f0b77860"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "e267652bd50ff88727e138e963711d11ba0bd4c6", "filename": "gcc/loop.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73/gcc%2Floop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73/gcc%2Floop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop.c?ref=5eeedd4d9e8e8c73c2263f1442d89f357ec6ff73", "patch": "@@ -746,10 +746,12 @@ scan_loop (loop_start, end, nregs)\n \t\t  && validate_replace_rtx (SET_DEST (set), SET_SRC (set),\n \t\t\t\t\t   reg_single_usage[regno]))\n \t\t{\n-\t\t  /* Replace any usage in a REG_EQUAL note.  */\n+\t\t  /* Replace any usage in a REG_EQUAL note.  Must copy the\n+\t\t     new source, so that we don't get rtx sharing between the\n+\t\t     SET_SOURCE and REG_NOTES of insn p.  */\n \t\t  REG_NOTES (reg_single_usage[regno])\n \t\t    = replace_rtx (REG_NOTES (reg_single_usage[regno]),\n-\t\t\t\t   SET_DEST (set), SET_SRC (set));\n+\t\t\t\t   SET_DEST (set), copy_rtx (SET_SRC (set)));\n \t\t\t\t   \n \t\t  PUT_CODE (p, NOTE);\n \t\t  NOTE_LINE_NUMBER (p) = NOTE_INSN_DELETED;"}]}