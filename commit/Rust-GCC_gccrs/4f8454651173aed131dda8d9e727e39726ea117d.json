{"sha": "4f8454651173aed131dda8d9e727e39726ea117d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGY4NDU0NjUxMTczYWVkMTMxZGRhOGQ5ZTcyN2UzOTcyNmVhMTE3ZA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-07-29T21:16:58Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-07-29T21:16:58Z"}, "message": "(special_symbol, do_xifdef): Don't access value.defn of a T_CONST.\n\nFrom-SVN: r7819", "tree": {"sha": "8272dda4e6f7d216e27a09e20c94605a41eb7efc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8272dda4e6f7d216e27a09e20c94605a41eb7efc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f8454651173aed131dda8d9e727e39726ea117d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f8454651173aed131dda8d9e727e39726ea117d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f8454651173aed131dda8d9e727e39726ea117d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f8454651173aed131dda8d9e727e39726ea117d/comments", "author": null, "committer": null, "parents": [{"sha": "e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5952538c4196ee92064db9cbff88e1ca2eeb5ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5952538c4196ee92064db9cbff88e1ca2eeb5ce"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "01f1c6655317b96edb75d30acbecb0b67e52efff", "filename": "gcc/cccp.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f8454651173aed131dda8d9e727e39726ea117d/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f8454651173aed131dda8d9e727e39726ea117d/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=4f8454651173aed131dda8d9e727e39726ea117d", "patch": "@@ -3925,7 +3925,8 @@ special_symbol (hp, op)\n       goto oops;\n     if (hp = lookup (ip->bufp, -1, -1)) {\n       if (pcp_outfile && pcp_inside_if\n-\t  && hp->value.defn->predefined)\n+\t  && (hp->type == T_CONST\n+\t      || (hp->type == T_MACRO && hp->value.defn->predefined)))\n \t/* Output a precondition for this macro use. */\n \tfprintf (pcp_outfile, \"#define %s\\n\", hp->name);\n       buf = \" 1 \";\n@@ -6790,7 +6791,9 @@ do_xifdef (buf, limit, op, keyword)\n \n     if (pcp_outfile) {\n       /* Output a precondition for this macro.  */\n-      if (hp && hp->value.defn->predefined)\n+      if (hp &&\n+\t  (hp->type == T_CONST\n+\t   || (hp->type == T_MACRO && hp->value.defn->predefined)))\n \tfprintf (pcp_outfile, \"#define %s\\n\", hp->name);\n       else {\n \tU_CHAR *cp = buf;"}]}