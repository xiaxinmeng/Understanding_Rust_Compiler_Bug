{"sha": "dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ2ZjRmODk3ZTE4YWRjN2I2MGEzZWZlNWU3OGMwMzRlNzQ3Y2MyMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-06-22T20:42:50Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-06-22T20:42:50Z"}, "message": "re PR c++/44627 (ICE in dump_expr, at cp/error.c:1735)\n\n\tPR c++/44627\n\t* error.c (dump_expr): Don't look at CALL_EXPR_ARG (t, 0) if\n\tthe CALL_EXPR has no arguments.\n\n\t* g++.dg/diagnostic/method1.C: New test.\n\nFrom-SVN: r161227", "tree": {"sha": "b21ba3828833cd048b1dd8fe8c5956a49968ccc6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b21ba3828833cd048b1dd8fe8c5956a49968ccc6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f878882bef04726c04e11d0d91b5c8afa97d9daf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f878882bef04726c04e11d0d91b5c8afa97d9daf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f878882bef04726c04e11d0d91b5c8afa97d9daf"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "31479189e88cbe8e6b60c03d49bb347258d96c7f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "patch": "@@ -1,3 +1,9 @@\n+2010-06-22  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/44627\n+\t* error.c (dump_expr): Don't look at CALL_EXPR_ARG (t, 0) if\n+\tthe CALL_EXPR has no arguments.\n+\n 2010-06-21  Jason Merrill  <jason@redhat.com>\n \n \t* typeck.c (comp_except_specs): Fix ce_derived with noexcept."}, {"sha": "1902a135b89870421a6775beae3686bd9e173a9a", "filename": "gcc/cp/error.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "patch": "@@ -1759,7 +1759,9 @@ dump_expr (tree t, int flags)\n \tif (TREE_CODE (fn) == OBJ_TYPE_REF)\n \t  fn = resolve_virtual_fun_from_obj_type_ref (fn);\n \n-\tif (TREE_TYPE (fn) != NULL_TREE && NEXT_CODE (fn) == METHOD_TYPE)\n+\tif (TREE_TYPE (fn) != NULL_TREE\n+\t    && NEXT_CODE (fn) == METHOD_TYPE\n+\t    && call_expr_nargs (t))\n \t  {\n \t    tree ob = CALL_EXPR_ARG (t, 0);\n \t    if (TREE_CODE (ob) == ADDR_EXPR)"}, {"sha": "a954c9bbe23c965d98585f8824e474231943d0a7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "patch": "@@ -1,3 +1,8 @@\n+2010-06-22  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/44627\n+\t* g++.dg/diagnostic/method1.C: New test.\n+\n 2010-06-22  Cary Coutant  <ccoutant@google.com>\n \n \t* g++.dg/debug/dwarf2/dwarf4-typedef.C: New test."}, {"sha": "8e1225d0722459ac013252d458d9d21f7cf83d9e", "filename": "gcc/testsuite/g++.dg/diagnostic/method1.C", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fmethod1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd6f4f897e18adc7b60a3efe5e78c034e747cc22/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fmethod1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fmethod1.C?ref=dd6f4f897e18adc7b60a3efe5e78c034e747cc22", "patch": "@@ -0,0 +1,20 @@\n+// PR c++/44627\n+// { dg-do compile }\n+\n+struct A\n+{\n+  A *foo ();\n+};\n+\n+template <class T>\n+void\n+bar ()\n+{\n+  A::foo ().anything;\t// { dg-error \"request for member\" }\n+}\n+\n+void\n+baz ()\n+{\n+  bar <int> ();\n+}"}]}