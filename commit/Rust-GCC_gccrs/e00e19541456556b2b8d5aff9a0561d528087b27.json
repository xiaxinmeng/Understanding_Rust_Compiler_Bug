{"sha": "e00e19541456556b2b8d5aff9a0561d528087b27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTAwZTE5NTQxNDU2NTU2YjJiOGQ1YWZmOWEwNTYxZDUyODA4N2IyNw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-15T22:10:54Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-06-15T22:10:54Z"}, "message": "decl.c (gfc_match_derived_decl): Dummy argument cannot be a derived type.\n\n2019-06-15  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\t* decl.c (gfc_match_derived_decl): Dummy argument cannot be a derived\n\t type.\n\n2019-06-15  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\t* gfortran.dg/dummy_derived_typed.f90: New test.\n\nFrom-SVN: r272333", "tree": {"sha": "22ba4701cc525a9740beb80aa26f39e364aa8aa1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22ba4701cc525a9740beb80aa26f39e364aa8aa1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e00e19541456556b2b8d5aff9a0561d528087b27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e00e19541456556b2b8d5aff9a0561d528087b27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e00e19541456556b2b8d5aff9a0561d528087b27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e00e19541456556b2b8d5aff9a0561d528087b27/comments", "author": null, "committer": null, "parents": [{"sha": "98e5be211e3d59563e760feabb1d4384efe5a1b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98e5be211e3d59563e760feabb1d4384efe5a1b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98e5be211e3d59563e760feabb1d4384efe5a1b9"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "921a6fca551eaf5e52d41b0a0a610902c61870d0", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=e00e19541456556b2b8d5aff9a0561d528087b27", "patch": "@@ -1,3 +1,8 @@\n+2019-06-15  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\t* decl.c (gfc_match_derived_decl): Dummy argument cannot be a derived\n+\ttype.\n+\n 2019-06-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \t* arith.c (arith_power): Rework overflow of an integer to an integer"}, {"sha": "5fc06e48f2de65b62c36898ea605debc4790ba43", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=e00e19541456556b2b8d5aff9a0561d528087b27", "patch": "@@ -10193,6 +10193,13 @@ gfc_match_derived_decl (void)\n       && !gfc_add_function (&gensym->attr, gensym->name, NULL))\n     return MATCH_ERROR;\n \n+  if (gensym->attr.dummy)\n+    {\n+      gfc_error (\"Dummy argument %qs at %L cannot be a derived type at %C\",\n+\t\t name, &gensym->declared_at);\n+      return MATCH_ERROR;\n+    }\n+\n   sym = gfc_find_dt_in_generic (gensym);\n \n   if (sym && (sym->components != NULL || sym->attr.zero_comp))"}, {"sha": "3a1a1e7e9840001c304b2cea21ce778eb3b5b82b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e00e19541456556b2b8d5aff9a0561d528087b27", "patch": "@@ -1,3 +1,7 @@\n+2019-06-15  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\t* gfortran.dg/dummy_derived_typed.f90: New test.\n+\n 2019-06-15  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* gcc.dg/tree-ssa/alias-access-path-2.c: New testcase."}, {"sha": "5c9b3ca18181ef1c2eb28e82afbbc65144f027f7", "filename": "gcc/testsuite/gfortran.dg/dummy_derived_typed.f90", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ftestsuite%2Fgfortran.dg%2Fdummy_derived_typed.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e00e19541456556b2b8d5aff9a0561d528087b27/gcc%2Ftestsuite%2Fgfortran.dg%2Fdummy_derived_typed.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdummy_derived_typed.f90?ref=e00e19541456556b2b8d5aff9a0561d528087b27", "patch": "@@ -0,0 +1,5 @@\n+! { dg-do compile }\n+subroutine s(t)   ! { dg-error \"Dummy argument\" }\n+   type t         ! { dg-error \"cannot be a derived\" }\n+   end type       ! { dg-error \"Expecting END SUBROUTINE\" }\n+end"}]}