{"sha": "5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWVlNGNjMjZmYmFjY2Q1Mjk2NzljYTU2Y2QxMDg2YWE2MmJjOTkwMg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2000-11-28T10:06:16Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2000-11-28T10:06:16Z"}, "message": "decl.c (grokdeclarator): Do type access control on friend class.\n\ncp:\n\t* decl.c (grokdeclarator): Do type access control on friend\n\tclass.\ntestsuite:\n\t* g++.old-deja/g++.other/friend9.C: New test.\n\nFrom-SVN: r37814", "tree": {"sha": "dfcd9beb9fd00cbc3d3b6e43ed880f60301ee1e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dfcd9beb9fd00cbc3d3b6e43ed880f60301ee1e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/comments", "author": null, "committer": null, "parents": [{"sha": "8ce10512a9da9932822825cda0cd53d7e6b94ef3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ce10512a9da9932822825cda0cd53d7e6b94ef3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ce10512a9da9932822825cda0cd53d7e6b94ef3"}], "stats": {"total": 37, "additions": 36, "deletions": 1}, "files": [{"sha": "fa0940110aaaab5d8c099c38cdfe60bfb2ffa857", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "patch": "@@ -1,3 +1,8 @@\n+2000-11-28  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* decl.c (grokdeclarator): Do type access control on friend\n+\tclass.\n+\n 2000-11-27  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* decl.c (grokfndecl): Undo COMPONENT_REF damage caused by"}, {"sha": "da74687aa1a59a5b85cea9a6967065db6c55fc3a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "patch": "@@ -11305,12 +11305,15 @@ friend declaration requires class-key, i.e. `friend %#T'\",\n \t  /* Only try to do this stuff if we didn't already give up.  */\n \t  if (type != integer_type_node)\n \t    {\n+\t      decl_type_access_control (TYPE_NAME (type));\n+\t      \n \t      /* A friendly class?  */\n \t      if (current_class_type)\n \t\tmake_friend_class (current_class_type, TYPE_MAIN_VARIANT (type));\n \t      else\n \t\tcp_error (\"trying to make class `%T' a friend of global scope\",\n \t\t          type);\n+              \n \t      type = void_type_node;\n \t    }\n \t}"}, {"sha": "66e472321a2b6b41dfdbcb2b335644f6f3845ffa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "patch": "@@ -1,10 +1,14 @@\n+2000-11-28  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.old-deja/g++.other/friend9.C: New test.\n+\n 2000-11-28  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.dg/20001127-1.c: New test.\n \n 2000-11-27  Nathan Sidwell  <nathan@codesourcery.com>\n \n-\t* g++.old-deja/g++.other/friend46.C: New test.\n+\t* g++.old-deja/g++.pt/friend46.C: New test.\n \n 2000-11-27  Nathan Sidwell  <nathan@codesourcery.com>\n "}, {"sha": "442d9899e3a7d0d7de58636389a527b72ca80d2a", "filename": "gcc/testsuite/g++.old-deja/g++.other/friend9.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Ffriend9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ee4cc26fbaccd529679ca56cd1086aa62bc9902/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Ffriend9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Ffriend9.C?ref=5ee4cc26fbaccd529679ca56cd1086aa62bc9902", "patch": "@@ -0,0 +1,23 @@\n+// Build don't link:\n+\n+// Copyright (C) 2000 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 24 Nov 2000 <nathan@codesourcery.com>\n+\n+// Bug 853: We reported the wrong line no for a friend access violation\n+\n+class F\n+{\n+  class Internal;   // ERROR - is private\n+};\n+\n+class C\n+{\n+  friend class F::Internal; // ERROR - in this context\n+  public:\n+  typedef enum { A, B } e;\n+\n+  C ();\n+  ~C();\n+\n+  void m();\n+};"}]}