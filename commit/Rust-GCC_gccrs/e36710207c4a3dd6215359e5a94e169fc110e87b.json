{"sha": "e36710207c4a3dd6215359e5a94e169fc110e87b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM2NzEwMjA3YzRhM2RkNjIxNTM1OWU1YTk0ZTE2OWZjMTEwZTg3Yg==", "commit": {"author": {"name": "Joern Rennecke", "email": "joern.rennecke@embecosm.com", "date": "2019-04-05T15:01:01Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2019-04-05T15:01:01Z"}, "message": "sched-deps.c (sched_macro_fuse_insns): Check return value of targetm.fixed_condition_code_regs.\n\n        * sched-deps.c (sched_macro_fuse_insns): Check return value of\n        targetm.fixed_condition_code_regs.\n\nFrom-SVN: r270167", "tree": {"sha": "90f167a048e0ab2b4bd6fe023feef50b9e435ae6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/90f167a048e0ab2b4bd6fe023feef50b9e435ae6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e36710207c4a3dd6215359e5a94e169fc110e87b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e36710207c4a3dd6215359e5a94e169fc110e87b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e36710207c4a3dd6215359e5a94e169fc110e87b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e36710207c4a3dd6215359e5a94e169fc110e87b/comments", "author": {"login": "amylaar", "id": 1663475, "node_id": "MDQ6VXNlcjE2NjM0NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1663475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amylaar", "html_url": "https://github.com/amylaar", "followers_url": "https://api.github.com/users/amylaar/followers", "following_url": "https://api.github.com/users/amylaar/following{/other_user}", "gists_url": "https://api.github.com/users/amylaar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amylaar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amylaar/subscriptions", "organizations_url": "https://api.github.com/users/amylaar/orgs", "repos_url": "https://api.github.com/users/amylaar/repos", "events_url": "https://api.github.com/users/amylaar/events{/privacy}", "received_events_url": "https://api.github.com/users/amylaar/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "05564120c6b6e3850faa3586824c298f76cc3985", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05564120c6b6e3850faa3586824c298f76cc3985", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05564120c6b6e3850faa3586824c298f76cc3985"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "f4075784288c212bcd5f853d715493488e518b47", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e36710207c4a3dd6215359e5a94e169fc110e87b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e36710207c4a3dd6215359e5a94e169fc110e87b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e36710207c4a3dd6215359e5a94e169fc110e87b", "patch": "@@ -1,3 +1,8 @@\n+2019-04-05  Joern Rennecke  <joern.rennecke@embecosm.com>\n+\n+\t* sched-deps.c (sched_macro_fuse_insns): Check return value of\n+\ttargetm.fixed_condition_code_regs.\n+\n 2019-04-05  Richard Biener  <rguenther@suse.de>\n \n \tPR debug/89892"}, {"sha": "28b9d38ab3f0e7001b77171184a6cee1ecc3ad5a", "filename": "gcc/sched-deps.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e36710207c4a3dd6215359e5a94e169fc110e87b/gcc%2Fsched-deps.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e36710207c4a3dd6215359e5a94e169fc110e87b/gcc%2Fsched-deps.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-deps.c?ref=e36710207c4a3dd6215359e5a94e169fc110e87b", "patch": "@@ -2857,14 +2857,16 @@ sched_macro_fuse_insns (rtx_insn *insn)\n     {\n       unsigned int condreg1, condreg2;\n       rtx cc_reg_1;\n-      targetm.fixed_condition_code_regs (&condreg1, &condreg2);\n-      cc_reg_1 = gen_rtx_REG (CCmode, condreg1);\n-      if (reg_referenced_p (cc_reg_1, PATTERN (insn))\n-\t  && modified_in_p (cc_reg_1, prev))\n+      if (targetm.fixed_condition_code_regs (&condreg1, &condreg2))\n \t{\n-\t  if (targetm.sched.macro_fusion_pair_p (prev, insn))\n-\t    SCHED_GROUP_P (insn) = 1;\n-\t  return;\n+\t  cc_reg_1 = gen_rtx_REG (CCmode, condreg1);\n+\t  if (reg_referenced_p (cc_reg_1, PATTERN (insn))\n+\t      && modified_in_p (cc_reg_1, prev))\n+\t    {\n+\t      if (targetm.sched.macro_fusion_pair_p (prev, insn))\n+\t\tSCHED_GROUP_P (insn) = 1;\n+\t      return;\n+\t    }\n \t}\n     }\n "}]}