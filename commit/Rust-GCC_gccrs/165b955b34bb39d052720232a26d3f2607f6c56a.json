{"sha": "165b955b34bb39d052720232a26d3f2607f6c56a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTY1Yjk1NWIzNGJiMzlkMDUyNzIwMjMyYTI2ZDNmMjYwN2Y2YzU2YQ==", "commit": {"author": {"name": "Janis Johnson", "email": "janosjo@codesourcery.com", "date": "2012-06-15T18:04:22Z"}, "committer": {"name": "Janis Johnson", "email": "janis@gcc.gnu.org", "date": "2012-06-15T18:04:22Z"}, "message": "stackalign.exp: Combine stack alignment torture options with usual torture options.\n\n\t* g++.dg/torture/stackalign/stackalign.exp: Combine stack\n\talignment torture options with usual torture options.\n\nFrom-SVN: r188678", "tree": {"sha": "98cb0ad7fd1df9dd9522c01cdac7849c931ade88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98cb0ad7fd1df9dd9522c01cdac7849c931ade88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/165b955b34bb39d052720232a26d3f2607f6c56a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/165b955b34bb39d052720232a26d3f2607f6c56a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/165b955b34bb39d052720232a26d3f2607f6c56a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/165b955b34bb39d052720232a26d3f2607f6c56a/comments", "author": null, "committer": null, "parents": [{"sha": "0621f7c2b92460e1c67ceee0bced99c30daa6a4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0621f7c2b92460e1c67ceee0bced99c30daa6a4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0621f7c2b92460e1c67ceee0bced99c30daa6a4d"}], "stats": {"total": 40, "additions": 33, "deletions": 7}, "files": [{"sha": "4605b1b3da2488a8a38b8e36566000ae6b4b9416", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/165b955b34bb39d052720232a26d3f2607f6c56a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/165b955b34bb39d052720232a26d3f2607f6c56a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=165b955b34bb39d052720232a26d3f2607f6c56a", "patch": "@@ -1,5 +1,8 @@\n 2012-06-15  Janis Johnson  <janosjo@codesourcery.com>\n \n+\t* g++.dg/torture/stackalign/stackalign.exp: Combine stack\n+\talignment torture options with usual torture options.\n+\n \t* g++.dg/cpp0x/auto27.C: Add comments to checks for multiple\n \tmessages reported for one line of source code.\n \t* g++.dg/cpp0x/constexpr-decl.C: Likewise."}, {"sha": "b02f299277b84f72ff4e8d8365da318b2f00091f", "filename": "gcc/testsuite/g++.dg/torture/stackalign/stackalign.exp", "status": "modified", "additions": 30, "deletions": 7, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/165b955b34bb39d052720232a26d3f2607f6c56a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fstackalign%2Fstackalign.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/165b955b34bb39d052720232a26d3f2607f6c56a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fstackalign%2Fstackalign.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fstackalign%2Fstackalign.exp?ref=165b955b34bb39d052720232a26d3f2607f6c56a", "patch": "@@ -1,4 +1,4 @@\n-# Copyright (C) 2008, 2010\n+# Copyright (C) 2008, 2010, 2012\n # Free Software Foundation, Inc.\n \n # This program is free software; you can redistribute it and/or modify\n@@ -18,18 +18,41 @@\n # This harness is for tests that should be run at all optimisation levels.\n \n load_lib g++-dg.exp\n+load_lib torture-options.exp\n+\n+global DG_TORTURE_OPTIONS LTO_TORTURE_OPTIONS\n+\n dg-init\n-set additional_flags \"\"\n+torture-init\n+\n+# default_flags are replaced by a dg-options test directive, or appended\n+# to by using dg-additional-options.  Use default_flags for options that\n+# are used in all of the torture sets to limit the amount of noise in\n+# test summaries.\n+set default_flags \"\"\n+\n+# torture_flags are combined with other torture options and do not\n+# affect options specified within a test.\n+set torture_flags \"\"\n+\n+set stackalign_options [list]\n \n # If automatic stack alignment is supported, force it on.\n if { [check_effective_target_automatic_stack_alignment] } then {\n-    lappend additional_flags \"-mstackrealign\"\n-    lappend additional_flags \"-mpreferred-stack-boundary=5\"\n+    append default_flags \" -mstackrealign\"\n+    append default_flags \" -mpreferred-stack-boundary=5\"\n }\n+lappend stackalign_options [join $torture_flags]\n \n-gcc-dg-runtest [lsort [glob $srcdir/$subdir/*.C]] $additional_flags\n if { [check_effective_target_fpic] } then {\n-    lappend additional_flags \"-fpic\"\n-    gcc-dg-runtest [lsort [glob $srcdir/$subdir/*.C]] $additional_flags\n+    lappend torture_flags \"-fpic\"\n+    lappend stackalign_options [join $torture_flags]\n }\n+\n+# Combine stackalign options with the usual torture optimization flags.\n+set-torture-options [concat $DG_TORTURE_OPTIONS $LTO_TORTURE_OPTIONS] $stackalign_options\n+\n+gcc-dg-runtest [lsort [glob $srcdir/$subdir/*.C]] \"$default_flags\"\n+\n+torture-finish\n dg-finish"}]}