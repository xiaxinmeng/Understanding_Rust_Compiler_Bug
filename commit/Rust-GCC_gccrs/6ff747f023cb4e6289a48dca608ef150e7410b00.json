{"sha": "6ff747f023cb4e6289a48dca608ef150e7410b00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZmNzQ3ZjAyM2NiNGU2Mjg5YTQ4ZGNhNjA4ZWYxNTBlNzQxMGIwMA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-16T13:10:16Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-12-16T13:18:39Z"}, "message": "c++: Fix (some) solaris breakage\n\nSolaris' sys/socket uses the poisoned bcopy identifier, so we must\npreemptively copy a bit of cody's inclusion logic to get it earlier.\n\n\tgcc/cp/\n\t* mapper-client.cc: Include sys/socket.h before system.h.", "tree": {"sha": "de2b73b4f7b8ddcbe39918212dfcd65845645718", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de2b73b4f7b8ddcbe39918212dfcd65845645718"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ff747f023cb4e6289a48dca608ef150e7410b00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ff747f023cb4e6289a48dca608ef150e7410b00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ff747f023cb4e6289a48dca608ef150e7410b00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ff747f023cb4e6289a48dca608ef150e7410b00/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c4aefb6818bf0850a3c3263e66fbf9673f069fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c4aefb6818bf0850a3c3263e66fbf9673f069fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c4aefb6818bf0850a3c3263e66fbf9673f069fd"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "2ad770b3d78d1cd2beb62554151a3732d858a635", "filename": "gcc/cp/mapper-client.cc", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ff747f023cb4e6289a48dca608ef150e7410b00/gcc%2Fcp%2Fmapper-client.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ff747f023cb4e6289a48dca608ef150e7410b00/gcc%2Fcp%2Fmapper-client.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmapper-client.cc?ref=6ff747f023cb4e6289a48dca608ef150e7410b00", "patch": "@@ -19,6 +19,11 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n #include \"config.h\"\n+#if defined (__unix__)\n+// Solaris11's socket header used bcopy, which we poison.  cody.hh\n+// will include it later under the above check\n+#include <sys/socket.h>\n+#endif\n #include \"system.h\"\n \n #include \"line-map.h\"\n@@ -28,6 +33,10 @@ along with GCC; see the file COPYING3.  If not see\n \n #include \"../../c++tools/resolver.h\"\n \n+#if !HOST_HAS_O_CLOEXEC\n+#define O_CLOEXEC 0\n+#endif\n+\n module_client::module_client (pex_obj *p, int fd_from, int fd_to)\n   : Client (fd_from, fd_to), pex (p)\n {"}]}