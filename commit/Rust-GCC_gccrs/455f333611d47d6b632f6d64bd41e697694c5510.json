{"sha": "455f333611d47d6b632f6d64bd41e697694c5510", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDU1ZjMzMzYxMWQ0N2Q2YjYzMmY2ZDY0YmQ0MWU2OTc2OTRjNTUxMA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2013-10-17T10:37:17Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2013-10-17T10:37:17Z"}, "message": "[multiple changes]\n\n2013-10-17  Vincent Celier  <celier@adacore.com>\n\n\t* gnat_ugn.texi: Add examples of switches -gnateD, including\n\tone where the value is a string.\n\t* projects.texi: Do not convert switches in project files to\n\tVMS qualifiers.\n\n2013-10-17  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_prag.adb (Report_Extra_Clauses): Don't complain about\n\trefinements with null input since null should be considered to\n\talways match.\n\nFrom-SVN: r203749", "tree": {"sha": "381b4839c1ca210574ba3ab8025f52ad71d88272", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/381b4839c1ca210574ba3ab8025f52ad71d88272"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/455f333611d47d6b632f6d64bd41e697694c5510", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/455f333611d47d6b632f6d64bd41e697694c5510", "html_url": "https://github.com/Rust-GCC/gccrs/commit/455f333611d47d6b632f6d64bd41e697694c5510", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/455f333611d47d6b632f6d64bd41e697694c5510/comments", "author": null, "committer": null, "parents": [{"sha": "9877936160e4131c0acdc03250b976d438c6e192", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9877936160e4131c0acdc03250b976d438c6e192", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9877936160e4131c0acdc03250b976d438c6e192"}], "stats": {"total": 261, "additions": 158, "deletions": 103}, "files": [{"sha": "e6cfe6d0b420e37bea21b5c17711098226550b0f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=455f333611d47d6b632f6d64bd41e697694c5510", "patch": "@@ -1,3 +1,16 @@\n+2013-10-17  Vincent Celier  <celier@adacore.com>\n+\n+\t* gnat_ugn.texi: Add examples of switches -gnateD, including\n+\tone where the value is a string.\n+\t* projects.texi: Do not convert switches in project files to\n+\tVMS qualifiers.\n+\n+2013-10-17  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_prag.adb (Report_Extra_Clauses): Don't complain about\n+\trefinements with null input since null should be considered to\n+\talways match.\n+\n 2013-10-17  Robert Dewar  <dewar@adacore.com>\n \n \t* gnat_ugn.texi: Document -gnatw.y/-gnatw.Y."}, {"sha": "b737b32664544fd8a6a30a7babb5ab0d889f0aea", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=455f333611d47d6b632f6d64bd41e697694c5510", "patch": "@@ -7724,11 +7724,23 @@ Examples of valid lines in a preprocessor data file:\n Define or redefine a preprocessing symbol, associated with value. If no value\n is given on the command line, then the value of the symbol is @code{True}.\n A symbol is an identifier, following normal Ada (case-insensitive)\n-rules for its syntax, and value is any sequence (including an empty sequence)\n-of characters from the set (letters, digits, period, underline).\n+rules for its syntax, and value is either an arbitrary string between double\n+quotes or any sequence (including an empty sequence) of characters from the\n+set (letters, digits, period, underline).\n Ada reserved words may be used as symbols, with the exceptions of @code{if},\n @code{else}, @code{elsif}, @code{end}, @code{and}, @code{or} and @code{then}.\n \n+@ifclear vms\n+@noindent\n+Examples:\n+\n+@smallexample\n+   -gnateDToto=Titi\n+   -gnateDFoo\n+   -gnateDFoo=\\\"Foo-Bar\\\"\n+@end smallexample\n+@end ifclear\n+\n @noindent\n A symbol declared with this ^switch^switch^ on the command line replaces a\n symbol with the same name either in a definition file or specified with a"}, {"sha": "01a02937fbe433a15fb08caebb7e8cce2956edb0", "filename": "gcc/ada/projects.texi", "status": "modified", "additions": 112, "deletions": 89, "changes": 201, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2Fprojects.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2Fprojects.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprojects.texi?ref=455f333611d47d6b632f6d64bd41e697694c5510", "patch": "@@ -41,7 +41,7 @@ project files allow you to specify:\n @item The directory in which the compiler's output\n   (@file{ALI} files, object files, tree files, etc.) is to be placed\n @item The directory in which the executable programs are to be placed\n-@item Switch settings for any of the project-enabled tools;\n+@item ^Switch^Switch^ settings for any of the project-enabled tools;\n   you can apply these settings either globally or to individual compilation units.\n @item The source files containing the main subprogram(s) to be built\n @item The source programming language(s)\n@@ -68,7 +68,7 @@ Subsystems}).\n   More generally, the Project Manager lets you structure large development\n   efforts into hierarchical subsystems, where build decisions are delegated\n   to the subsystem level, and thus different compilation environments\n-  (switch settings) used for different subsystems.\n+  (^switch^switch^ settings) used for different subsystems.\n @item You can organize GNAT projects in a hierarchy: a child project\n   can extend a parent project, inheriting the parent's source files and\n   optionally overriding any of them with alternative versions\n@@ -89,7 +89,7 @@ easily handled:\n \n @itemize @bullet\n @item Using a common set of source files and generating object files in different\n-  directories via different switch settings. It can be used for instance, for\n+  directories via different ^switch^switch^ settings. It can be used for instance, for\n   generating separate sets of object files for debugging and for production.\n @item Using a mostly-shared set of source files with different versions of\n   some units or subunits. It can be used for instance, for grouping and hiding\n@@ -174,6 +174,7 @@ detailed later in this documentation. They are summarized here as a reference.\n   @b{Object_Dir} attribute. In order to store objects in\n   two or more object directories, the system must be split into\n   distinct subsystems with their own project file.\n+/first exam\n \n @end table\n \n@@ -184,7 +185,8 @@ following examples.\n The Ada source files @file{pack.ads}, @file{pack.adb}, and @file{proc.adb} are in\n the @file{common/} directory. The file @file{proc.adb} contains an Ada main\n subprogram @code{Proc} that @code{with}s package @code{Pack}. We want to compile\n-these source files with the switch @option{-O2}, and put the resulting files in\n+these source files with the ^switch^switch^\n+@option{^-O2^-O2^}, and put the resulting files in\n the directory @file{obj/}.\n \n @smallexample\n@@ -448,7 +450,8 @@ Its value is the path to the object directory, either absolute or\n relative to the directory containing the project file. This\n directory must already exist and be readable and writable, although\n some tools have a switch to create the directory if needed (See\n-the switch @code{-p} for @command{gnatmake} and @command{gprbuild}).\n+the switch @code{^-p^/CREATE_MISSING_DIRS^} for @command{gnatmake}\n+and @command{gprbuild}).\n \n If the attribute @code{Object_Dir} is not specified, it defaults to\n the project directory, that is the directory containing the project file.\n@@ -614,13 +617,13 @@ packages would be involved in the build process.\n \n @noindent\n Let's first examine the compiler switches. As stated in the initial description\n-of the example, we want to compile all files with @option{-O2}. This is a\n+of the example, we want to compile all files with @option{^-O2^-O2^}. This is a\n compiler switch, although it is usual, on the command line, to pass it to the\n builder which then passes it to the compiler. It is recommended to use directly\n the right package, which will make the setup easier to understand for other\n people.\n \n-Several attributes can be used to specify the switches:\n+Several attributes can be used to specify the ^switches^switches^:\n \n @table @asis\n @item @b{Default_Switches}:\n@@ -633,49 +636,53 @@ Several attributes can be used to specify the switches:\n   likely be used for each language, and each compiler has its own set of\n   switches). The value of the attribute is a list of switches.\n \n-  In this example, we want to compile all Ada source files with the\n-  @option{-O2} switch, and the resulting project file is as follows\n+  In this example, we want to compile all Ada source files with the ^switch^switch^\n+  @option{^-O2^-O2^}, and the resulting project file is as follows\n   (only the @code{Compiler} package is shown):\n \n   @smallexample\n   @b{package} Compiler @b{is}\n-    @b{for} Default_Switches (\"Ada\") @b{use} (\"-O2\");\n+    @b{for} Default_Switches (\"Ada\") @b{use} (\"^-O2^-O2^\");\n   @b{end} Compiler;\n   @end smallexample\n \n-@item @b{Switches}:\n-@cindex @code{Switches}\n-  in some cases, we might want to use specific switches\n+@item @b{^Switches^Switches^}:\n+@cindex @code{^Switches^Switches^}\n+  in some cases, we might want to use specific ^switches^switches^\n   for one or more files. For instance, compiling @file{proc.adb} might not be\n   possible at high level of optimization because of a compiler issue.\n-  In such a case, the @emph{Switches}\n+  In such a case, the @emph{^Switches^Switches^}\n   attribute (indexed on the file name) can be used and will override the\n   switches defined by @emph{Default_Switches}. Our project file would\n   become:\n \n   @smallexample\n-  @b{package} Compiler @b{is}\n-    @b{for} Default_Switches (\"Ada\") @b{use} (\"-O2\");\n-    @b{for} Switches (\"proc.adb\") @b{use} (\"-O0\");\n-  @b{end} Compiler;\n+  package Compiler is\n+     for Default_Switches (\"Ada\")\n+         use (\"^-O2^-O2^\");\n+     for ^Switches^Switches^ (\"proc.adb\")\n+         use (\"^-O0^-O0^\");\n+  end Compiler;\n   @end smallexample\n \n   @noindent\n-  @code{Switches} may take a pattern as an index, such as in:\n+  @code{^Switches^Switches^} may take a pattern as an index, such as in:\n \n   @smallexample\n-  @b{package} Compiler @b{is}\n-    @b{for} Default_Switches (\"Ada\") @b{use} (\"-O2\");\n-    @b{for} Switches (\"pkg*\") @b{use} (\"-O0\");\n-  @b{end} Compiler;\n+  package Compiler is\n+    for Default_Switches (\"Ada\")\n+        use (\"^-O2^-O2^\");\n+    for ^Switches^Switches^ (\"pkg*\")\n+        use (\"^-O0^-O0^\");\n+  end Compiler;\n   @end smallexample\n \n   @noindent\n-  Sources @file{pkg.adb} and @file{pkg-child.adb} would be compiled with -O0,\n-  not -O2.\n+  Sources @file{pkg.adb} and @file{pkg-child.adb} would be compiled with ^-O0^-O0^,\n+  not ^-O2^-O2^.\n \n   @noindent\n-  @code{Switches} can also be given a language name as index instead of a file\n+  @code{^Switches^Switches^} can also be given a language name as index instead of a file\n   name in which case it has the same semantics as @emph{Default_Switches}.\n   However, indexes with wild cards are never valid for language name.\n \n@@ -689,7 +696,7 @@ Several attributes can be used to specify the switches:\n @end table\n \n The switches for the other tools are defined in a similar manner through the\n-@b{Default_Switches} and @b{Switches} attributes, respectively in the\n+@b{Default_Switches} and @b{^Switches^Switches^} attributes, respectively in the\n @emph{Builder} package (for @command{gnatmake} and @command{gprbuild}),\n the @emph{Binder} package (binding Ada executables) and the @emph{Linker}\n package (for linking executables).\n@@ -816,8 +823,8 @@ project C_Main is\n    package Compiler is\n       C_Switches := (\"-pedantic\");\n       for Default_Switches (\"C\")   use C_Switches;\n-      for Default_Switches (\"Ada\") use (\"-gnaty\");\n-      for Switches (\"main.c\") use C_Switches & (\"-g\");\n+      for Default_Switches (\"Ada\") use (\"^-gnaty^-gnaty^\");\n+      for ^Switches^Switches^ (\"main.c\") use C_Switches & (\"-g\");\n    end Compiler;\n end C_Main;\n @end smallexample\n@@ -841,7 +848,7 @@ In this specific situation the use of a variable could have been\n replaced by a reference to the @code{Default_Switches} attribute:\n \n @smallexample @c projectfile\n-   for Switches (\"c_main.c\") use Compiler'Default_Switches (\"C\") & (\"-g\");\n+   for ^Switches^Switches^ (\"c_main.c\") use Compiler'Default_Switches (\"C\") & (\"-g\");\n @end smallexample\n \n @noindent\n@@ -1353,18 +1360,20 @@ There are two main approaches to avoiding this duplication:\n   @smallexample @c projectfile\n   project Logging is\n      package Compiler is\n-        for Switches (\"Ada\") use (\"-O2\");\n+        for ^Switches^Switches^ (\"Ada\")\n+            use (\"^-O2^-O2^\");\n      end Compiler;\n      package Binder is\n-        for Switches (\"Ada\") use (\"-E\");\n+        for ^Switches^Switches^ (\"Ada\")\n+            use (\"-E\");\n      end Binder;\n   end Logging;\n \n   with \"logging.gpr\";\n   project Build is\n      package Compiler renames Logging.Compiler;\n      package Binder is\n-        for Switches (\"Ada\") use Logging.Binder'Switches (\"Ada\");\n+        for ^Switches^Switches^ (\"Ada\") use Logging.Binder'Switches (\"Ada\");\n      end Binder;\n   end Build;\n   @end smallexample\n@@ -1394,9 +1403,10 @@ There are two main approaches to avoiding this duplication:\n \n   @smallexample @c projectfile\n   abstract project Shared is\n-     for Source_Files use ();   --  no project\n+     for Source_Files use ();   --  no sources\n      package Compiler is\n-        for Switches (\"Ada\") use (\"-O2\");\n+        for ^Switches^Switches^ (\"Ada\")\n+            use (\"^-O2^-O2^\");\n      end Compiler;\n   end Shared;\n \n@@ -1482,7 +1492,7 @@ information, when the second will focus on improving code optimization).\n \n Let's enhance our example to support a debug and a release modes.The issue is to\n let the user choose what kind of system he is building:\n-use @option{-g} as compiler switches in debug mode and @option{-O2}\n+use @option{-g} as compiler switches in debug mode and @option{^-O2^-O2^}\n in release mode. We will also setup the projects so that we do not share the\n same object directory in both modes, otherwise switching from one to the other\n might trigger more recompilations than needed or mix objects from the 2 modes.\n@@ -1556,9 +1566,11 @@ sections in the project. The following example shows how this can be done:\n       package Compiler is\n          case Mode is\n             when \"debug\" =>\n-               for Switches (\"Ada\") use (\"-g\");\n+               for ^Switches^Switches^ (\"Ada\")\n+                   use (\"-g\");\n             when \"release\" =>\n-               for Switches (\"Ada\") use (\"-O2\");\n+               for ^Switches^Switches^ (\"Ada\")\n+                   use (\"^-O2^-O2^\");\n          end case;\n       end Compiler;\n    end Build;\n@@ -2414,7 +2426,7 @@ building. The syntax looks like\n       for External (\"BUILD\") use \"PRODUCTION\";\n \n       package Builder is\n-         for Switches (\"Ada\") use (\"-q\");\n+         for ^Switches^Switches^ (\"Ada\") use (\"-q\");\n       end Builder;\n    end Agg;\n @end smallexample\n@@ -2681,15 +2693,15 @@ an aggregate project. In this package, only the following attributes\n are valid:\n \n @table @asis\n-@item @b{Switches}:\n-@cindex @code{Switches}\n+@item @b{^Switches^Switches^}:\n+@cindex @code{^Switches^Switches^}\n This attribute gives the list of switches to use for the builder\n (@command{gprbuild} or @command{gnatmake}), depending on the language of the\n main file. For instance,\n \n @smallexample @c projectfile\n-for Switches (\"Ada\") use (\"-d\", \"-p\");\n-for Switches (\"C\")   use (\"-p\");\n+for ^Switches^Switches^ (\"Ada\") use (\"-d\", \"-p\");\n+for ^Switches^Switches^ (\"C\")   use (\"-p\");\n @end smallexample\n \n These switches are only read from the main aggregate project (the\n@@ -2705,8 +2717,8 @@ This attribute gives the list of compiler switches for the various\n languages. For instance,\n \n @smallexample @c projectfile\n-for Global_Compilation_Switches (\"Ada\") use (\"-O1\", \"-g\");\n-for Global_Compilation_Switches (\"C\")   use (\"-O2\");\n+for Global_Compilation_Switches (\"Ada\") use (\"^O1^-O1^\", \"-g\");\n+for Global_Compilation_Switches (\"C\")   use (\"^-O2^-O2^\");\n @end smallexample\n \n This attribute is only taken into account in the aggregate project\n@@ -2728,34 +2740,39 @@ both depend on C. Here is an extra for all of these projects:\n       aggregate project Agg is\n           for Project_Files use (\"a.gpr\", \"b.gpr\");\n           package Builder is\n-             for Global_Compilation_Switches (\"Ada\") use (\"-O2\");\n+             for Global_Compilation_Switches (\"Ada\") use (\"^-O2^-O2^\");\n           end Builder;\n       end Agg;\n \n       with \"c.gpr\";\n       project A is\n           package Builder is\n-             for Global_Compilation_Switches (\"Ada\") use (\"-O1\");\n+             for Global_Compilation_Switches (\"Ada\") use (\"^-O1^-O1^\");\n              --  ignored\n           end Builder;\n \n           package Compiler is\n-             for Default_Switches (\"Ada\") use (\"-O1\", \"-g\");\n-             for Switches (\"a_file1.adb\") use (\"-O0\");\n+             for Default_Switches (\"Ada\")\n+                 use (\"^-O1^-O1^\", \"-g\");\n+             for ^Switches^Switches^ (\"a_file1.adb\")\n+                 use (\"^-O0^-O0^\");\n           end Compiler;\n       end A;\n \n       with \"c.gpr\";\n       project B is\n           package Compiler is\n-             for Default_Switches (\"Ada\") use (\"-O0\");\n+             for Default_Switches (\"Ada\") use (\"^-O0^-O0^\");\n           end Compiler;\n       end B;\n \n       project C is\n           package Compiler is\n-             for Default_Switches (\"Ada\") use (\"-O3\", \"-gnatn\");\n-             for Switches (\"c_file1.adb\") use (\"-O0\", \"-g\");\n+             for Default_Switches (\"Ada\")\n+                 use (\"^-O3^-O3^\",\n+                      \"^-gnatn^-gnatn^\");\n+             for ^Switches^Switches^ (\"c_file1.adb\")\n+                 use (\"^-O0^-O0^\", \"-g\");\n           end Compiler;\n       end C;\n @end smallexample\n@@ -2764,13 +2781,13 @@ then the following switches are used:\n \n @itemize @bullet\n @item all files from project A except a_file1.adb are compiled\n-      with \"-O2 -g\", since the aggregate project has priority.\n+      with \"^-O2^-O2^ -g\", since the aggregate project has priority.\n @item the file a_file1.adb is compiled with\n-      \"-O0\", since the Compiler.Switches has priority\n+      \"^-O0^-O0^\", since the Compiler.Switches has priority\n @item all files from project B are compiled with\n-      \"-O2\", since the aggregate project has priority\n-@item all files from C are compiled with \"-O2 -gnatn\", except for\n-      c_file1.adb which is compiled with \"-O0 -g\"\n+      \"^-O2^-O2^\", since the aggregate project has priority\n+@item all files from C are compiled with \"^-O2^-O2^ -gnatn\", except for\n+      c_file1.adb which is compiled with \"^-O0^-O0^ -g\"\n @end itemize\n \n Even though C is seen through two paths (through A and through\n@@ -3141,25 +3158,25 @@ The following packages are currently supported in project files\n @item Cross_Reference\n   This package specifies the options used when calling the library tool\n   @command{gnatxref} via the @command{gnat} driver. Its attributes\n-  @b{Default_Switches} and @b{Switches} have the same semantics as for the\n+  @b{Default_Switches} and @b{^Switches^Switches^} have the same semantics as for the\n   package @code{Builder}.\n @item Eliminate\n   This package specifies the options used when calling the tool\n   @command{gnatelim} via the @command{gnat} driver. Its attributes\n-  @b{Default_Switches} and @b{Switches} have the same semantics as for the\n+  @b{Default_Switches} and @b{^Switches^Switches^} have the same semantics as for the\n   package @code{Builder}.\n @item Finder\n   This package specifies the options used when calling the search tool\n   @command{gnatfind} via the @command{gnat} driver. Its attributes\n-  @b{Default_Switches} and @b{Switches} have the same semantics as for the\n+  @b{Default_Switches} and @b{^Switches^Switches^} have the same semantics as for the\n   package @code{Builder}.\n @item Gnatls\n   This package the options to use when invoking @command{gnatls} via the\n   @command{gnat} driver.\n @item Gnatstub\n   This package specifies the options used when calling the tool\n   @command{gnatstub} via the @command{gnat} driver. Its attributes\n-  @b{Default_Switches} and @b{Switches} have the same semantics as for the\n+  @b{Default_Switches} and @b{^Switches^Switches^} have the same semantics as for the\n   package @code{Builder}.\n @item IDE\n   This package specifies the options used when starting an integrated\n@@ -3173,7 +3190,7 @@ The following packages are currently supported in project files\n @item Metrics\n   This package specifies the options used when calling the tool\n   @command{gnatmetric} via the @command{gnat} driver. Its attributes\n-  @b{Default_Switches} and @b{Switches} have the same semantics as for the\n+  @b{Default_Switches} and @b{^Switches^Switches^} have the same semantics as for the\n   package @code{Builder}.\n @item Naming\n   This package specifies the naming conventions that apply\n@@ -3184,15 +3201,15 @@ The following packages are currently supported in project files\n @item Pretty_Printer\n   This package specifies the options used when calling the formatting tool\n   @command{gnatpp} via the @command{gnat} driver. Its attributes\n-  @b{Default_Switches} and @b{Switches} have the same semantics as for the\n+  @b{Default_Switches} and @b{^Switches^Switches^} have the same semantics as for the\n   package @code{Builder}.\n @item Remote\n   This package is used by @command{gprbuild} to describe how distributed\n   compilation should be done.\n @item Stack\n   This package specifies the options used when calling the tool\n   @command{gnatstack} via the @command{gnat} driver. Its attributes\n-  @b{Default_Switches} and @b{Switches} have the same semantics as for the\n+  @b{Default_Switches} and @b{^Switches^Switches^} have the same semantics as for the\n   package @code{Builder}.\n @item Synchronize\n   This package specifies the options used when calling the tool\n@@ -3401,11 +3418,14 @@ last separator and the end are components of the string list.\n @end smallexample\n \n @noindent\n-If the external value is \"-O2,-g\", the result is (\"-O2\", \"-g\").\n+If the external value is \"^-O2^-O2^,-g\",\n+the result is (\"^-O2^-O2^\", \"-g\").\n \n-If the external value is \",-O2,-g,\", the result is also (\"-O2\", \"-g\").\n+If the external value is \",^-O2^-O2^,-g,\",\n+the result is also (\"^-O2^-O2^\", \"-g\").\n \n-if the external value is \"-gnav\", the result is (\"-gnatv\").\n+if the external value is \"^-gnatv^-gnatv^\",\n+the result is (\"^-gnatv^-gnatv^\").\n \n If the external value is \",,\", the result is (\"\").\n \n@@ -3582,9 +3602,11 @@ project MyProj is\n    package Compiler is\n      case OS is\n        when \"GNU/Linux\" | \"Unix\" =>\n-         for Switches (\"Ada\") use (\"-gnath\");\n+         for ^Switches^Switches^ (\"Ada\")\n+             use (\"-gnath\");\n        when \"NT\" =>\n-         for Switches (\"Ada\") use (\"-gnatP\");\n+         for ^Switches^Switches^ (\"Ada\")\n+             use (\"^-gnatP^-gnatP^\");\n        when others =>\n          null;\n      end case;\n@@ -3663,8 +3685,9 @@ Here are some examples of attribute declarations:\n \n    --  indexed attributes\n    for Body (\"main\") use \"Main.ada\";\n-   for Switches (\"main.ada\") use (\"-v\", \"-gnatv\");\n-   for Switches (\"main.ada\") use Builder'Switches (\"main.ada\") & \"-g\";\n+   for ^Switches^Switches^ (\"main.ada\")\n+       use (\"-v\", \"^-gnatv^-gnatv^\");\n+   for ^Switches^Switches^ (\"main.ada\") use Builder'Switches (\"main.ada\") & \"-g\";\n \n    --  indexed attributes copy (from package Builder in project Default)\n    --  The package name must always be specified, even if it is the current\n@@ -4166,10 +4189,10 @@ sources of runtime libraries are located.\n @item @b{Default_Switches}: list, indexed, case-insensitive index\n \n Index is a language name. Value is the list of switches to be used when binding\n-code of the language, if there is no applicable attribute Switches.\n+code of the language, if there is no applicable attribute ^Switches^Switches^.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n-                    others allowed\n+@item @b{^Switches^Switches^}: list, optional index, indexed,\n+                    case-insensitive index, others allowed\n \n Index is either a language name or a source file name. Value is the list of\n switches to be used when binding code. Index is either the source file name\n@@ -4223,7 +4246,7 @@ Index is a language name. Value is the list of builder switches to be used when\n building an executable of the language, if there is no applicable attribute\n Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is either a language name or a source file name. Value is the list of\n@@ -4269,9 +4292,9 @@ project tree.\n \n Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatcheck} for a source of the language, if there is no applicable\n-attribute Switches.\n+attribute ^Switches^Switches^.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when\n@@ -4284,7 +4307,7 @@ invoking @code{gnatcheck} for the source.\n \n @itemize @bullet\n \n-@item @b{Switches}: list\n+@item @b{^Switches^Switches^}: list\n \n Value is a list of switches to be used by the cleaning application.\n \n@@ -4327,7 +4350,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n the compiler for the language for a source of the project, if there is no\n applicable attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name or a language name. Value is the list of switches\n@@ -4561,7 +4584,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatxref} for a source of the language, if there is no applicable\n attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when\n@@ -4580,7 +4603,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatelim} for a source of the language, if there is no applicable\n attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when\n@@ -4599,7 +4622,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatfind} for a source of the language, if there is no applicable\n attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when\n@@ -4612,7 +4635,7 @@ invoking @code{gnatfind} for the source.\n \n @itemize @bullet\n \n-@item @b{Switches}: list\n+@item @b{^Switches^Switches^}: list\n \n Value is a list of switches to be used when invoking @code{gnatls}.\n \n@@ -4629,7 +4652,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatstub} for a source of the language, if there is no applicable\n attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when\n@@ -4764,7 +4787,7 @@ Index is a source file name or a language name. Value is the list of switches\n to be used at the beginning of the command line when invoking the linker to\n build an executable for the source or for its language.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name or a language name. Value is the list of switches\n@@ -4837,7 +4860,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatmetric} for a source of the language, if there is no applicable\n attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when\n@@ -4925,7 +4948,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatpp} for a source of the language, if there is no applicable\n attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when\n@@ -4954,7 +4977,7 @@ Value is the root directory used by the slave machines.\n \n @itemize @bullet\n \n-@item @b{Switches}: list\n+@item @b{^Switches^Switches^}: list\n \n Value is the list of switches to be used when invoking @code{gnatstack}.\n \n@@ -4971,7 +4994,7 @@ Index is a language name. Value is a list of switches to be used when invoking\n @code{gnatsync} for a source of the language, if there is no applicable\n attribute Switches.\n \n-@item @b{Switches}: list, optional index, indexed, case-insensitive index,\n+@item @b{^Switches^Switches^}: list, optional index, indexed, case-insensitive index,\n                     others allowed\n \n Index is a source file name. Value is the list of switches to be used when"}, {"sha": "34b9d973579f11e4e30d9915ae485e62772fb8e3", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 19, "deletions": 12, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/455f333611d47d6b632f6d64bd41e697694c5510/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=455f333611d47d6b632f6d64bd41e697694c5510", "patch": "@@ -20031,6 +20031,8 @@ package body Sem_Prag is\n                         elsif Has_Non_Null_Refinement (Dep_Id) then\n                            Has_Refined_State := True;\n \n+                           --  Ref_Input is an entity name\n+\n                            if Is_Entity_Name (Ref_Input) then\n                               Ref_Id := Entity_Of (Ref_Input);\n \n@@ -20422,8 +20424,7 @@ package body Sem_Prag is\n                      end if;\n                   end if;\n \n-               --  Formal parameters and variables match when their inputs\n-               --  match.\n+               --  Formal parameters and variables match if their inputs match\n \n                elsif Is_Entity_Name (Ref_Output)\n                  and then Entity_Of (Ref_Output) = Dep_Id\n@@ -20506,9 +20507,17 @@ package body Sem_Prag is\n          if Present (Refinements) then\n             Clause := First (Refinements);\n             while Present (Clause) loop\n-               Error_Msg_N\n-                 (\"unmatched or extra clause in dependence refinement\",\n-                  Clause);\n+\n+               --  Do not complain about a null input refinement, since a null\n+               --  input legitimately matches anything.\n+\n+               if Nkind (Clause) /= N_Component_Association\n+                 or else Nkind (Expression (Clause)) /= N_Null\n+               then\n+                  Error_Msg_N\n+                    (\"unmatched or extra clause in dependence refinement\",\n+                     Clause);\n+               end if;\n \n                Next (Clause);\n             end loop;\n@@ -20596,19 +20605,19 @@ package body Sem_Prag is\n          if Nkind (Refs) = N_Null then\n             Refinements := No_List;\n \n-         --  Multiple dependeny clauses appear as component associations of an\n+         --  Multiple dependency clauses appear as component associations of an\n          --  aggregate. Note that the clauses are copied because the algorithm\n          --  modifies them and this should not be visible in Refined_Depends.\n \n          else pragma Assert (Nkind (Refs) = N_Aggregate);\n             Refinements := New_Copy_List (Component_Associations (Refs));\n          end if;\n \n-         --  Inspect all the clauses of pragma Depends trying to find a\n-         --  matching clause in pragma Refined_Depends. The approach is to use\n-         --  the sole output of a clause as a key. Output items are unique in a\n+         --  Inspect all the clauses of pragma Depends looking for a matching\n+         --  clause in pragma Refined_Depends. The approach is to use the\n+         --  sole output of a clause as a key. Output items are unique in a\n          --  dependence relation. Clause normalization also ensured that all\n-         --  clauses have exactly on output. Depending on what the key is, one\n+         --  clauses have exactly one output. Depending on what the key is, one\n          --  or more refinement clauses may satisfy the dependency clause. Each\n          --  time a dependency clause is matched, its related refinement clause\n          --  is consumed. In the end, two things may happen:\n@@ -20622,7 +20631,6 @@ package body Sem_Prag is\n          Clause := First (Dependencies);\n          while Present (Clause) loop\n             Check_Dependency_Clause (Clause);\n-\n             Next (Clause);\n          end loop;\n       end if;\n@@ -21583,7 +21591,6 @@ package body Sem_Prag is\n                if Node (State_Elmt) = State_Id then\n                   Add_Item (State_Id, Refined_States_Seen);\n                   Remove_Elmt (Abstr_States, State_Elmt);\n-\n                   return;\n                end if;\n "}]}