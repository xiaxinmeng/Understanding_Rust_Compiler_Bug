{"sha": "64db4d29006823b28081c1aad7158d150f0fad18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjRkYjRkMjkwMDY4MjNiMjgwODFjMWFhZDcxNThkMTUwZjBmYWQxOA==", "commit": {"author": {"name": "Erik Edelmann", "email": "eedelman@gcc.gnu.org", "date": "2006-01-30T22:23:57Z"}, "committer": {"name": "Erik Edelmann", "email": "eedelman@gcc.gnu.org", "date": "2006-01-30T22:23:57Z"}, "message": "re PR fortran/24266 (ICE when writing to array of strings that is an elements of a user defined type)\n\nfortran/\n2005-01-30  Erik Edelmann  <eedelman@gcc.gnu.org>\n\n        PR fortran/24266\n        * trans-io.c (set_internal_unit): Check the rank of the\n        expression node itself instead of its symbol.\n\n\ntestsuite/\n2005-01-30  Erik Edelmann  <eedelman@gcc.gnu.org>\n\n        PR fortran/24266\n        * gfortran.dg/arrayio_derived_2.f90: New.\n\nFrom-SVN: r110412", "tree": {"sha": "d7333d6cba028f930db25db37029ca71b9a5a57e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7333d6cba028f930db25db37029ca71b9a5a57e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/64db4d29006823b28081c1aad7158d150f0fad18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64db4d29006823b28081c1aad7158d150f0fad18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64db4d29006823b28081c1aad7158d150f0fad18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64db4d29006823b28081c1aad7158d150f0fad18/comments", "author": null, "committer": null, "parents": [{"sha": "e939885ff55dc2a789f35c222ae2ef8066da91f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e939885ff55dc2a789f35c222ae2ef8066da91f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e939885ff55dc2a789f35c222ae2ef8066da91f5"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "bcdd7992cb0d7f12f81ce1ad737781aa162362e2", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=64db4d29006823b28081c1aad7158d150f0fad18", "patch": "@@ -1,3 +1,9 @@\n+2005-01-30  Erik Edelmann  <eedelman@gcc.gnu.org>\n+\n+\tPR fortran/24266\n+\t* trans-io.c (set_internal_unit): Check the rank of the\n+\texpression node itself instead of its symbol.\n+\n 2006-01-29  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/18578"}, {"sha": "db1a4813be143a346c6319e8d75593795c9adc5d", "filename": "gcc/fortran/trans-io.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ffortran%2Ftrans-io.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ffortran%2Ftrans-io.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-io.c?ref=64db4d29006823b28081c1aad7158d150f0fad18", "patch": "@@ -599,7 +599,7 @@ set_internal_unit (stmtblock_t * block, tree var, gfc_expr * e)\n     }\n \n   /* Character array.  */\n-  else if (e->symtree && (e->symtree->n.sym->as->rank > 0))\n+  else if (e->rank > 0)\n     {\n       se.ss = gfc_walk_expr (e);\n "}, {"sha": "5c8e59bbbfc126f5fe53ec5e1913f71317c430ac", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=64db4d29006823b28081c1aad7158d150f0fad18", "patch": "@@ -1,3 +1,8 @@\n+2005-01-30  Erik Edelmann  <eedelman@gcc.gnu.org>\n+\n+\tPR fortran/24266\n+\t* gfortran.dg/arrayio_derived_2.f90: New.\n+\n 2006-01-30  Carlos O'Donell  <carlos@codesourcery.com>\n \n \t* gcc.dg/unsigned-long-compare.c: New test."}, {"sha": "5ebe602fd003b44d977faec37cf37b467f73409d", "filename": "gcc/testsuite/gfortran.dg/arrayio_derived_2.f90", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ftestsuite%2Fgfortran.dg%2Farrayio_derived_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64db4d29006823b28081c1aad7158d150f0fad18/gcc%2Ftestsuite%2Fgfortran.dg%2Farrayio_derived_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Farrayio_derived_2.f90?ref=64db4d29006823b28081c1aad7158d150f0fad18", "patch": "@@ -0,0 +1,17 @@\n+! { dg-do compile }\n+! PR 24266: IO to/from arrays that are components of derived types.\n+program main\n+  implicit none\n+\n+  type ice\n+    character(len=80) :: mess(3)\n+  end type ice\n+  type(ice) :: tp\n+  integer :: i\n+  character(len=80) :: mess\n+\n+  write(tp%mess,*) \"message\"\n+  read(tp%mess,*) mess\n+  print *, mess\n+\n+end program main"}]}