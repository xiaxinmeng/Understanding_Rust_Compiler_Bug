{"sha": "f26deb3d4478566f86a9aa21f54b08b457abe79c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI2ZGViM2Q0NDc4NTY2Zjg2YTlhYTIxZjU0YjA4YjQ1N2FiZTc5Yw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@wasabisystems.com", "date": "2003-12-01T22:04:04Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2003-12-01T22:04:04Z"}, "message": "cp-demangle.c (d_demangle): Only return success if we consumed the entire demangled string.\n\n\t* cp-demangle.c (d_demangle): Only return success if we consumed\n\tthe entire demangled string.\n\t(is_ctor_or_dtor): Likewise.\n\nFrom-SVN: r74129", "tree": {"sha": "b912fd4effe416a4fa963feda3f2d3e896417a19", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b912fd4effe416a4fa963feda3f2d3e896417a19"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f26deb3d4478566f86a9aa21f54b08b457abe79c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f26deb3d4478566f86a9aa21f54b08b457abe79c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f26deb3d4478566f86a9aa21f54b08b457abe79c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f26deb3d4478566f86a9aa21f54b08b457abe79c/comments", "author": null, "committer": null, "parents": [{"sha": "be571b775855e3c25831e38b9933dd3ff96f63a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be571b775855e3c25831e38b9933dd3ff96f63a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be571b775855e3c25831e38b9933dd3ff96f63a6"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "a6cfd9e02096197cc761cc8c43d9f99561528ed8", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f26deb3d4478566f86a9aa21f54b08b457abe79c/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f26deb3d4478566f86a9aa21f54b08b457abe79c/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=f26deb3d4478566f86a9aa21f54b08b457abe79c", "patch": "@@ -1,3 +1,13 @@\n+2003-11-29  Ian Lance Taylor  <ian@wasabisystems.com>\n+\n+\t* cp-demangle.c (d_demangle): Only return success if we consumed\n+\tthe entire demangled string.\n+\t(is_ctor_or_dtor): Likewise.\n+\n+\t* testsuite/demangle-expected: Revert one part of 2003-06-26 patch\n+\tto restore expected result of EDG test case to original expected\n+\tresult.\n+\n 2003-11-26  Ian Lance Taylor  <ian@wasabisystems.com>\n \n \t* cp-demangle.c (struct d_print_mod): Add templates field."}, {"sha": "0fe568faf0e6763c119771c563f7e66c9d9ada77", "filename": "libiberty/cp-demangle.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f26deb3d4478566f86a9aa21f54b08b457abe79c/libiberty%2Fcp-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f26deb3d4478566f86a9aa21f54b08b457abe79c/libiberty%2Fcp-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcp-demangle.c?ref=f26deb3d4478566f86a9aa21f54b08b457abe79c", "patch": "@@ -3324,7 +3324,7 @@ d_print_cast (dpi, dc)\n       /* It appears that for a templated cast operator, we need to put\n \t the template parameters in scope for the operator name, but\n \t not for the parameters.  The effect is that we need to handle\n-\t the template printing here.  FIXME: Verify this.  */\n+\t the template printing here.  */\n \n       hold_dpm = dpi->modifiers;\n       dpi->modifiers = NULL;\n@@ -3456,6 +3456,11 @@ d_demangle (mangled, options, palc)\n   else\n     dc = d_type (&di);\n \n+  /* If we didn't consume the entire mangled string, then we didn't\n+     successfully demangle it.  */\n+  if (d_peek_char (&di) != '\\0')\n+    dc = NULL;\n+\n #ifdef CP_DEMANGLE_DEBUG\n   if (dc == NULL)\n     printf (\"failed demangling\\n\");\n@@ -3657,7 +3662,7 @@ is_ctor_or_dtor (mangled, ctor_kind, dtor_kind)\n \n   dc = d_mangled_name (&di, 1);\n \n-  if (dc == NULL)\n+  if (dc == NULL || d_peek_char (&di) != '\\0')\n     return 0;\n \n   while (dc != NULL)"}]}