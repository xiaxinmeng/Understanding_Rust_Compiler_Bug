{"sha": "c4269a634c6c7a1a3308d0530804623e34f05651", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQyNjlhNjM0YzZjN2ExYTMzMDhkMDUzMDgwNDYyM2UzNGYwNTY1MQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2012-08-15T18:37:30Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2012-08-15T18:37:30Z"}, "message": "cxx11.cc (struct datum): New.\n\n\t* testsuite/libstdc++-prettyprinters/cxx11.cc (struct datum):\n\tNew.\n\t(global): New global.\n\t(main): Add test for unique_ptr.\n\t* python/libstdcxx/v6/printers.py\n\t(UniquePointerPrinter.to_string): Extract the pointer and also\n\tprint its type.\n\nFrom-SVN: r190417", "tree": {"sha": "81401eaa7a7d0a2b21796664fe48f0466bbb3ccd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81401eaa7a7d0a2b21796664fe48f0466bbb3ccd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c4269a634c6c7a1a3308d0530804623e34f05651", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4269a634c6c7a1a3308d0530804623e34f05651", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4269a634c6c7a1a3308d0530804623e34f05651", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4269a634c6c7a1a3308d0530804623e34f05651/comments", "author": null, "committer": null, "parents": [{"sha": "5dfe1ad49692530846e53ed49823fa3bf10e4371", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5dfe1ad49692530846e53ed49823fa3bf10e4371", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5dfe1ad49692530846e53ed49823fa3bf10e4371"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "26215b321f4a24f280587245797e9343ad4c2874", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4269a634c6c7a1a3308d0530804623e34f05651/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4269a634c6c7a1a3308d0530804623e34f05651/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c4269a634c6c7a1a3308d0530804623e34f05651", "patch": "@@ -1,3 +1,13 @@\n+2012-08-15  Tom Tromey  <tromey@redhat.com>\n+\n+\t* testsuite/libstdc++-prettyprinters/cxx11.cc (struct datum):\n+\tNew.\n+\t(global): New global.\n+\t(main): Add test for unique_ptr.\n+\t* python/libstdcxx/v6/printers.py\n+\t(UniquePointerPrinter.to_string): Extract the pointer and also\n+\tprint its type.\n+\n 2012-08-13  David Adler  <d.adler.s@gmail.com>\n \n \tPR libstdc++/54185"}, {"sha": "0eac413bf4a9faea284d991651109fdf2e50c287", "filename": "libstdc++-v3/python/libstdcxx/v6/printers.py", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4269a634c6c7a1a3308d0530804623e34f05651/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4269a634c6c7a1a3308d0530804623e34f05651/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py?ref=c4269a634c6c7a1a3308d0530804623e34f05651", "patch": "@@ -71,7 +71,9 @@ def __init__ (self, typename, val):\n         self.val = val\n \n     def to_string (self):\n-        return self.val['_M_t']\n+        v = self.val['_M_t']['_M_head_impl']\n+        return ('std::unique_ptr<%s> containing %s' % (str(v.type.target()),\n+                                                       str(v)))\n \n class StdListPrinter:\n     \"Print a std::list\""}, {"sha": "0d015581478b05e433f742730583b8421c275667", "filename": "libstdc++-v3/testsuite/libstdc++-prettyprinters/cxx11.cc", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4269a634c6c7a1a3308d0530804623e34f05651/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2Fcxx11.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4269a634c6c7a1a3308d0530804623e34f05651/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2Fcxx11.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2Fcxx11.cc?ref=c4269a634c6c7a1a3308d0530804623e34f05651", "patch": "@@ -48,6 +48,14 @@ use(const T &container)\n     placeholder(*i);\n }\n \n+struct datum\n+{\n+  std::string s;\n+  int i;\n+};\n+\n+std::unique_ptr<datum> global;\n+\n int\n main()\n {\n@@ -86,13 +94,20 @@ main()\n   uoms.insert(5);\n // { dg-final { note-test uoms {std::unordered_multiset with 1 elements = {[0] = 5}} } }\n \n+  std::unique_ptr<datum> uptr (new datum);\n+  uptr->s = \"hi bob\";\n+  uptr->i = 23;\n+// { dg-final { regexp-test uptr {std::unique_ptr.datum. containing 0x.*} } }\n+\n   placeholder(\"\"); // Mark SPOT\n   use(efl);\n   use(fl);\n   use(eum);\n   use(eumm);\n   use(eus);\n   use(eums);\n+  use(uoms);\n+  use(uptr->s);\n \n   return 0;\n }"}]}