{"sha": "4082ab0f2a60828dce62203e2af7430e971faf9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDA4MmFiMGYyYTYwODI4ZGNlNjIyMDNlMmFmNzQzMGU5NzFmYWY5Zg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2001-03-08T11:33:06Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-03-08T11:33:06Z"}, "message": "* config/i386/i386.md (clrstrsi): Call ix86_set_move_mem_attrs.\n\nFrom-SVN: r40319", "tree": {"sha": "e28070fb5ceba6e11101207122fd86a579e3c764", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e28070fb5ceba6e11101207122fd86a579e3c764"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4082ab0f2a60828dce62203e2af7430e971faf9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4082ab0f2a60828dce62203e2af7430e971faf9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4082ab0f2a60828dce62203e2af7430e971faf9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4082ab0f2a60828dce62203e2af7430e971faf9f/comments", "author": null, "committer": null, "parents": [{"sha": "553bf4387d9c00875f9404ecc7a38dc19ff9d25c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/553bf4387d9c00875f9404ecc7a38dc19ff9d25c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/553bf4387d9c00875f9404ecc7a38dc19ff9d25c"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "d8bb57772b88e7479338efd11073486bd4e18cbf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4082ab0f2a60828dce62203e2af7430e971faf9f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4082ab0f2a60828dce62203e2af7430e971faf9f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4082ab0f2a60828dce62203e2af7430e971faf9f", "patch": "@@ -1,3 +1,7 @@\n+Thu Mar  8 06:32:50 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* config/i386/i386.md (clrstrsi): Call ix86_set_move_mem_attrs.\n+\n 2001-03-08  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* configure.in (enable_shared): Support per-package shared-library"}, {"sha": "3a2a09abeb544a533380fbee4dda4c6a53c11b46", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4082ab0f2a60828dce62203e2af7430e971faf9f/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4082ab0f2a60828dce62203e2af7430e971faf9f/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=4082ab0f2a60828dce62203e2af7430e971faf9f", "patch": "@@ -11506,6 +11506,9 @@\n   rtx destreg, zeroreg, countreg;\n   int align = 0;\n   int count = -1;\n+  rtx insns;\n+\n+  start_sequence ();\n \n   if (GET_CODE (operands[2]) == CONST_INT)\n     align = INTVAL (operands[2]);\n@@ -11519,7 +11522,7 @@\n \n   destreg = copy_to_mode_reg (Pmode, XEXP (operands[0], 0));\n \n-  emit_insn (gen_cld());\n+  emit_insn (gen_cld ());\n \n   /* When optimizing for size emit simple rep ; movsb instruction for\n      counts not divisible by 4.  */\n@@ -11562,10 +11565,13 @@\n          library version, since it is usually equally fast and result in\n \t shorter code.  */\n       if (!TARGET_INLINE_ALL_STRINGOPS && align < 4)\n-\tFAIL;\n+\t{\n+\t  end_sequence ();\n+\t  FAIL;\n+\t}\n \n       if (TARGET_SINGLE_STRINGOP)\n-\temit_insn (gen_cld());\n+\temit_insn (gen_cld ());\n \n       countreg2 = gen_reg_rtx (SImode);\n       countreg = copy_to_mode_reg (SImode, operands[1]);\n@@ -11659,6 +11665,13 @@\n \t  LABEL_NUSES (label) = 1;\n \t}\n     }\n+\n+  insns = get_insns ();\n+  end_sequence ();\n+\n+  ix86_set_move_mem_attrs (insns, operands[0], operands[0], destreg, destreg);\n+  emit_insns (insns);\n+\n   DONE;\n }\")\n "}]}