{"sha": "9c2390853e656fa61d6af8919e9718f3eb790060", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWMyMzkwODUzZTY1NmZhNjFkNmFmODkxOWU5NzE4ZjNlYjc5MDA2MA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-12-11T21:01:00Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-12-11T21:01:00Z"}, "message": "re PR tree-optimization/51485 (ICE in vectorizable_assignment)\n\n\tPR tree-optimization/51485\n\t* tree-vect-data-refs.c (vect_analyze_data_refs): Give up on\n\tDRs in call stmts.\n\n\t* g++.dg/vect/pr51485.cc: New test.\n\nFrom-SVN: r182212", "tree": {"sha": "cdb0adbe66fc88a9ace1d03bba0ff77d7399c28d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cdb0adbe66fc88a9ace1d03bba0ff77d7399c28d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c2390853e656fa61d6af8919e9718f3eb790060", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c2390853e656fa61d6af8919e9718f3eb790060", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c2390853e656fa61d6af8919e9718f3eb790060", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c2390853e656fa61d6af8919e9718f3eb790060/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fba5ace06b2af2a403a489fa2bb490e6cd3137cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fba5ace06b2af2a403a489fa2bb490e6cd3137cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fba5ace06b2af2a403a489fa2bb490e6cd3137cc"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "7668767850dcd7fa8e17e3bb5b76dd1d38a5e9c7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9c2390853e656fa61d6af8919e9718f3eb790060", "patch": "@@ -1,3 +1,9 @@\n+2011-12-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/51485\n+\t* tree-vect-data-refs.c (vect_analyze_data_refs): Give up on\n+\tDRs in call stmts.\n+\n 2011-12-11  Patrick Marlier  <patrick.marlier@gmail.com>\n \n \t* trans-mem.c (ipa_tm_transform_calls_redirect): Do not remove"}, {"sha": "6f2ce63f2070a9bff3302c4d8c0f23d87fad981f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9c2390853e656fa61d6af8919e9718f3eb790060", "patch": "@@ -1,3 +1,8 @@\n+2011-12-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/51485\n+\t* g++.dg/vect/pr51485.cc: New test.\n+\n 2011-12-11  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/50923"}, {"sha": "d57d7596d0e2bc2a9bcf018a59cb2233cbdb0c77", "filename": "gcc/testsuite/g++.dg/vect/pr51485.cc", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr51485.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr51485.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr51485.cc?ref=9c2390853e656fa61d6af8919e9718f3eb790060", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+\n+struct A { A (); unsigned int a; };\n+double bar (A a) throw () __attribute__((pure));\n+\n+void\n+foo (unsigned int x, double *y, A *z)\n+{\n+  unsigned int i;\n+  for (i = 0; i < x; i++)\n+    y[i] = bar (z[i]);\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "6a85b7bf4aa35819a02075ebbfc4d2a0bca962e1", "filename": "gcc/tree-vect-data-refs.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2Ftree-vect-data-refs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c2390853e656fa61d6af8919e9718f3eb790060/gcc%2Ftree-vect-data-refs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-data-refs.c?ref=9c2390853e656fa61d6af8919e9718f3eb790060", "patch": "@@ -2896,6 +2896,26 @@ vect_analyze_data_refs (loop_vec_info loop_vinfo,\n           return false;\n         }\n \n+      if (is_gimple_call (stmt))\n+\t{\n+\t  if (vect_print_dump_info (REPORT_UNVECTORIZED_LOCATIONS))\n+\t    {\n+\t      fprintf (vect_dump, \"not vectorized: dr in a call \");\n+\t      print_gimple_stmt (vect_dump, stmt, 0, TDF_SLIM);\n+\t    }\n+\n+\t  if (bb_vinfo)\n+\t    {\n+\t      STMT_VINFO_VECTORIZABLE (stmt_info) = false;\n+\t      stop_bb_analysis = true;\n+\t      continue;\n+\t    }\n+\n+\t  if (gather)\n+\t    free_data_ref (dr);\n+\t  return false;\n+\t}\n+\n       /* Update DR field in stmt_vec_info struct.  */\n \n       /* If the dataref is in an inner-loop of the loop that is considered for"}]}