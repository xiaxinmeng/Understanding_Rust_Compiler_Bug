{"sha": "e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk4ZjZlZDFlMmU5ZjBjZmFhYzVkYWQwZTI3OTA5MWQ4OGZkMzUzZg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2020-08-02T12:14:50Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-10-21T07:22:45Z"}, "message": "[Ada] Use helper function in Freeze_Subprogram_Body\n\ngcc/ada/\n\n\t* sem_ch12.adb (Freeze_Subprogram_Body): Call\n\tPackage_Freeze_Node to retrieve the freeze node for the\n\tenclosing body of the generic.", "tree": {"sha": "63c16f44004b7ac05ef83232542e6d838defb007", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63c16f44004b7ac05ef83232542e6d838defb007"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f/comments", "author": null, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bd4dc93d42b0148cf24a8a4738a0f27d1be580f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd4dc93d42b0148cf24a8a4738a0f27d1be580f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd4dc93d42b0148cf24a8a4738a0f27d1be580f8"}], "stats": {"total": 16, "additions": 4, "deletions": 12}, "files": [{"sha": "e2b14bfa47787812962bd257e6a233f8f24a1a07", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=e98f6ed1e2e9f0cfaac5dad0e279091d88fd353f", "patch": "@@ -8980,8 +8980,8 @@ package body Sem_Ch12 is\n   is\n       Gen_Unit : constant Entity_Id := Get_Generic_Entity (Inst_Node);\n       Par      : constant Entity_Id := Scope (Gen_Unit);\n-      E_G_Id   : Entity_Id;\n       Enc_G    : Entity_Id;\n+      Enc_G_F  : Node_Id;\n       Enc_I    : Node_Id;\n       F_Node   : Node_Id;\n \n@@ -9128,14 +9128,6 @@ package body Sem_Ch12 is\n         and then Enc_G /= Enc_I\n         and then Earlier (Inst_Node, Gen_Body)\n       then\n-         if Nkind (Enc_G) = N_Package_Body then\n-            E_G_Id :=\n-              Corresponding_Spec (Enc_G);\n-         else pragma Assert (Nkind (Enc_G) = N_Package_Body_Stub);\n-            E_G_Id :=\n-              Corresponding_Spec (Proper_Body (Unit (Library_Unit (Enc_G))));\n-         end if;\n-\n          --  Freeze package that encloses instance, and place node after the\n          --  package that encloses generic. If enclosing package is already\n          --  frozen we have to assume it is at the proper place. This may be a\n@@ -9163,10 +9155,10 @@ package body Sem_Ch12 is\n \n          --  Freeze enclosing subunit before instance\n \n-         Ensure_Freeze_Node (E_G_Id);\n+         Enc_G_F := Package_Freeze_Node (Enc_G);\n \n-         if not Is_List_Member (Freeze_Node (E_G_Id)) then\n-            Insert_After (Enc_G, Freeze_Node (E_G_Id));\n+         if not Is_List_Member (Enc_G_F) then\n+            Insert_After (Enc_G, Enc_G_F);\n          end if;\n \n          Insert_Freeze_Node_For_Instance (Inst_Node, F_Node);"}]}