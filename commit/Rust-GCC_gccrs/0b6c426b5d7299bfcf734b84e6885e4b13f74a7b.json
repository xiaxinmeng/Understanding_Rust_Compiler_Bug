{"sha": "0b6c426b5d7299bfcf734b84e6885e4b13f74a7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGI2YzQyNmI1ZDcyOTliZmNmNzM0Yjg0ZTY4ODVlNGIxM2Y3NGE3Yg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2001-12-10T01:28:03Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-12-10T01:28:03Z"}, "message": "tree.c (append_random_char): Conditionalize INO for VMS.\n\n\t* tree.c (append_random_char): Conditionalize INO for VMS.\n\nCo-Authored-By: Douglas B Rupp <rupp@gnat.com>\n\nFrom-SVN: r47827", "tree": {"sha": "842cc6a6f8f9e704fe43acbb3e6082b5dff21624", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/842cc6a6f8f9e704fe43acbb3e6082b5dff21624"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b/comments", "author": null, "committer": null, "parents": [{"sha": "6d8b12448d9bbe96517f2145a93f4589e947edb5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d8b12448d9bbe96517f2145a93f4589e947edb5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d8b12448d9bbe96517f2145a93f4589e947edb5"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "a0ca3f34a1ce0fa49bed565bf3b3195e75edf4ec", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0b6c426b5d7299bfcf734b84e6885e4b13f74a7b", "patch": "@@ -1,3 +1,8 @@\n+Sun Dec  9 20:19:32 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\t\t\t  Douglas B. Rupp  <rupp@gnat.com>\n+\n+\t* tree.c (append_random_char): Conditionalize INO for VMS.\n+\n 2001-12-09  Richard Henderson  <rth@redhat.com>\n \n \t* cfgcleanup.c (label_is_jump_target_p): New function."}, {"sha": "45d18f6acde251cad39b591e6de23571ed9f2bc8", "filename": "gcc/tree.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b6c426b5d7299bfcf734b84e6885e4b13f74a7b/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=0b6c426b5d7299bfcf734b84e6885e4b13f74a7b", "patch": "@@ -4467,14 +4467,20 @@ append_random_chars (template)\n     {\n       struct stat st;\n \n-      /* VALUE should be unique for each file and must\n-\t not change between compiles since this can cause\n-\t bootstrap comparison errors.  */\n+      /* VALUE should be unique for each file and must not change between\n+\t compiles since this can cause bootstrap comparison errors.  */\n \n       if (stat (main_input_filename, &st) < 0)\n \tabort ();\n \n-      value = st.st_dev ^ st.st_ino ^ st.st_mtime;\n+      /* In VMS, ino is an array, so we have to use both values.  We\n+\t conditionalize that.  */\n+#ifdef VMS\n+#define INO_TO_INT(INO) ((int) (INO)[1] << 16 ^ (int) (INO)[2])\n+#else\n+#define INO_TO_INT(INO) INO\n+#endif\n+      value = st.st_dev ^ INO_TO_INT (st.st_ino) ^ st.st_mtime;\n     }\n \n   template += strlen (template);"}]}