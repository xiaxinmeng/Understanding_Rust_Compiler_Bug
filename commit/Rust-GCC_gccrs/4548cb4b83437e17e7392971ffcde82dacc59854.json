{"sha": "4548cb4b83437e17e7392971ffcde82dacc59854", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDU0OGNiNGI4MzQzN2UxN2U3MzkyOTcxZmZjZGU4MmRhY2M1OTg1NA==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2010-01-17T10:24:16Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2010-01-17T10:24:16Z"}, "message": "re PR c++/42697 (ice-on-legal-code: template class template function local objects)\n\nFix PR c++/42697\n\ngcc/cp/ChangeLog:\n\tPR c++/42697\n\t*pt.c (tsubst_decl): Get the arguments of a specialization from\n\tthe specialization template, not from the most general template.\n\ngcc/testsuite/ChangeLog:\n\tPR c++/42697\n\t* g++.dg/template/crash94.C: New test.\n\nFrom-SVN: r155975", "tree": {"sha": "d1b36373452b558ec08f6d1810d30ccf674a5f7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d1b36373452b558ec08f6d1810d30ccf674a5f7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4548cb4b83437e17e7392971ffcde82dacc59854", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4548cb4b83437e17e7392971ffcde82dacc59854", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4548cb4b83437e17e7392971ffcde82dacc59854", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4548cb4b83437e17e7392971ffcde82dacc59854/comments", "author": null, "committer": null, "parents": [{"sha": "a90110c3df1c1408e0a68d22a71b705a78680f6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a90110c3df1c1408e0a68d22a71b705a78680f6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a90110c3df1c1408e0a68d22a71b705a78680f6d"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "dc563cc2524ab0af3cd314616dbece9d72584ba3", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=4548cb4b83437e17e7392971ffcde82dacc59854", "patch": "@@ -1,3 +1,9 @@\n+2010-01-17  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/42697\n+\t*pt.c (tsubst_decl): Get the arguments of a specialization from\n+\tthe specialization template, not from the most general template.\n+\n 2010-01-16  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/42761"}, {"sha": "0acb86064198ac12599cd44c8ab5ed440d3c8aab", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=4548cb4b83437e17e7392971ffcde82dacc59854", "patch": "@@ -8825,7 +8825,8 @@ tsubst_decl (tree t, tree args, tsubst_flags_t complain)\n \t       specialize R.  */\n \t    gen_tmpl = most_general_template (DECL_TI_TEMPLATE (t));\n \t    argvec = tsubst_template_args (DECL_TI_ARGS\n-\t\t\t\t\t   (DECL_TEMPLATE_RESULT (gen_tmpl)),\n+\t\t\t\t\t   (DECL_TEMPLATE_RESULT\n+\t\t\t\t\t\t  (DECL_TI_TEMPLATE (t))),\n \t\t\t\t\t   args, complain, in_decl);\n \n \t    /* Check to see if we already have this specialization.  */"}, {"sha": "8211355516b3bde562800f0472747c9c67fb0206", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4548cb4b83437e17e7392971ffcde82dacc59854", "patch": "@@ -1,3 +1,8 @@\n+2010-01-17  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/42697\n+\t* g++.dg/template/crash94.C: New test.\n+\n 2010-01-17  Jie Zhang  <jie.zhang@analog.com>\n \n \tPR debug/42767"}, {"sha": "810aed0a61c6e97a1222e76130ad1f6e4e8fb382", "filename": "gcc/testsuite/g++.dg/template/crash94.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash94.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4548cb4b83437e17e7392971ffcde82dacc59854/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash94.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash94.C?ref=4548cb4b83437e17e7392971ffcde82dacc59854", "patch": "@@ -0,0 +1,28 @@\n+// Origin: PR c++/42697\n+// { dg-do compile }\n+\n+template<class Value_t>\n+class fparser\n+{\n+    template<bool Option>\n+    void eval2(Value_t r[2]);\n+public:\n+    void evaltest();\n+};\n+\n+template<>\n+template<bool Option>\n+void fparser<int>::eval2(int r[2])\n+{\n+    struct ObjType {};\n+}\n+\n+\n+template<class Value_t>\n+void fparser<Value_t>::evaltest\n+    ()\n+{\n+    eval2<false>(0);\n+}\n+\n+template class fparser<int>;"}]}