{"sha": "9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWUxY2E0ZTNhYjBmYjcxNTZmZWQ0NDgwYzhmMzU4MTBkMDBmZjg0ZA==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2021-03-01T15:23:38Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-06-17T14:32:09Z"}, "message": "[Ada] Apply aliasing checks only to names and not to objects as actuals\n\ngcc/ada/\n\n\t* checks.adb (Apply_Parameter_Aliasing_Checks): Replace calls to\n\tIs_Object_Reference with calls to Is_Name_Reference; remove\n\tasymmetric condition that only detected an aggregate as the\n\tfirst actual (aggregate objects were just a special case of an\n\tobject reference that was not a name).", "tree": {"sha": "a2fb8793cfe7859293527715c39b80adb66155c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2fb8793cfe7859293527715c39b80adb66155c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f54fb769ec25976858e6bdea9c6a1beeb70f91fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f54fb769ec25976858e6bdea9c6a1beeb70f91fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f54fb769ec25976858e6bdea9c6a1beeb70f91fa"}], "stats": {"total": 21, "additions": 4, "deletions": 17}, "files": [{"sha": "d8cdb64c45474dc714c1544b980b48ba4320e504", "filename": "gcc/ada/checks.adb", "status": "modified", "additions": 4, "deletions": 17, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d/gcc%2Fada%2Fchecks.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d/gcc%2Fada%2Fchecks.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fchecks.adb?ref=9e1ca4e3ab0fb7156fed4480c8f35810d00ff84d", "patch": "@@ -2507,29 +2507,16 @@ package body Checks is\n       while Present (Actual_1) and then Present (Formal_1) loop\n          Orig_Act_1 := Original_Actual (Actual_1);\n \n-         --  Ensure that the actual is an object that is not passed by value.\n-         --  Elementary types are always passed by value, therefore actuals of\n-         --  such types cannot lead to aliasing. An aggregate is an object in\n-         --  Ada 2012, but an actual that is an aggregate cannot overlap with\n-         --  another actual.\n-\n-         if Nkind (Orig_Act_1) = N_Aggregate\n-           or else (Nkind (Orig_Act_1) = N_Qualified_Expression\n-                     and then Nkind (Expression (Orig_Act_1)) = N_Aggregate)\n-         then\n-            null;\n-\n-         elsif Is_Object_Reference (Orig_Act_1) then\n+         if Is_Name_Reference (Orig_Act_1) then\n             Actual_2 := Next_Actual (Actual_1);\n             Formal_2 := Next_Formal (Formal_1);\n             while Present (Actual_2) and then Present (Formal_2) loop\n                Orig_Act_2 := Original_Actual (Actual_2);\n \n-               --  The other actual we are testing against must also denote\n-               --  a non pass-by-value object. Generate the check only when\n-               --  the mode of the two formals may lead to aliasing.\n+               --  Generate the check only when the mode of the two formals may\n+               --  lead to aliasing.\n \n-               if Is_Object_Reference (Orig_Act_2)\n+               if Is_Name_Reference (Orig_Act_2)\n                  and then May_Cause_Aliasing (Formal_1, Formal_2)\n                then\n "}]}