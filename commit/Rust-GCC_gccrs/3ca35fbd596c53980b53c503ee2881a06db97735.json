{"sha": "3ca35fbd596c53980b53c503ee2881a06db97735", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2NhMzVmYmQ1OTZjNTM5ODBiNTNjNTAzZWUyODgxYTA2ZGI5NzczNQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2010-11-16T03:43:22Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2010-11-16T03:43:22Z"}, "message": "builtin-math-2.c: Split out fma tests...\n\n\t* gcc.dg/torture/builtin-math-2.c: Split out fma tests...\n\t* gcc.dg/torture/builtin-math-8.c: ... here.  New file.\n\tUse builtin_constant_p rather than scanning for builtin name.\n\nFrom-SVN: r166791", "tree": {"sha": "70913b276b0ef4a27f6cf7629b7683f49f2d16f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70913b276b0ef4a27f6cf7629b7683f49f2d16f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ca35fbd596c53980b53c503ee2881a06db97735", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ca35fbd596c53980b53c503ee2881a06db97735", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ca35fbd596c53980b53c503ee2881a06db97735", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ca35fbd596c53980b53c503ee2881a06db97735/comments", "author": null, "committer": null, "parents": [{"sha": "93f9a911c3654b6c29012bdff2487603aef6fa3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93f9a911c3654b6c29012bdff2487603aef6fa3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93f9a911c3654b6c29012bdff2487603aef6fa3f"}], "stats": {"total": 55, "additions": 40, "deletions": 15}, "files": [{"sha": "f6b4acabc73ec8912219a17e6f7929f1986e3530", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca35fbd596c53980b53c503ee2881a06db97735/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca35fbd596c53980b53c503ee2881a06db97735/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3ca35fbd596c53980b53c503ee2881a06db97735", "patch": "@@ -1,3 +1,9 @@\n+2010-11-15  Richard Henderson  <rth@redhat.com>\n+\n+\t* gcc.dg/torture/builtin-math-2.c: Split out fma tests...\n+\t* gcc.dg/torture/builtin-math-8.c: ... here.  New file.\n+\tUse builtin_constant_p rather than scanning for builtin name.\n+\n 2010-11-15  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \t* objc.dg/property/dotsyntax-18.m: New."}, {"sha": "7e2ff13836871fd2c99aa5a4a84c66ebee5a9600", "filename": "gcc/testsuite/gcc.dg/torture/builtin-math-2.c", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca35fbd596c53980b53c503ee2881a06db97735/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca35fbd596c53980b53c503ee2881a06db97735/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-2.c?ref=3ca35fbd596c53980b53c503ee2881a06db97735", "patch": "@@ -184,18 +184,6 @@ void bar()\n   fool (__builtin_powl (__LDBL_MAX__, -3.5L));\n   TESTIT2 (pow, 2.0, -0x1p50);\n   \n-  foof (__builtin_fmaf (__FLT_MAX__, __FLT_MAX__, 0.0F));\n-  foof (__builtin_fmaf (__FLT_MAX__, 1.0F, __FLT_MAX__));\n-  foof (__builtin_fmaf (__FLT_MIN__, __FLT_MIN__, 0.0F));\n-  \n-  foo (__builtin_fma (__DBL_MAX__, __DBL_MAX__, 0.0));\n-  foo (__builtin_fma (__DBL_MAX__, 1.0, __DBL_MAX__));\n-  foo (__builtin_fma (__DBL_MIN__, __DBL_MIN__, 0.0));\n-  \n-  fool (__builtin_fmal (__LDBL_MAX__, __LDBL_MAX__, 0.0L));\n-  fool (__builtin_fmal (__LDBL_MAX__, 1.0L, __LDBL_MAX__));\n-  fool (__builtin_fmal (__LDBL_MIN__, __LDBL_MIN__, 0.0L));\n-\n   /* The sqrt arg must be [0 ... Inf] inclusive.  */\n   TESTIT (sqrt, -0.5);\n   TESTIT (sqrt, -0.0);\n@@ -351,9 +339,6 @@ void bar()\n /* { dg-final { scan-tree-dump-times \"powf\" 13 \"original\" { target { ! { spu*-*-* } } } } } */\n /* { dg-final { scan-tree-dump-times \"powf\" 7 \"original\" { target { spu*-*-* } } } } */\n /* { dg-final { scan-tree-dump-times \"powl\" 13 \"original\" } } */\n-/* { dg-final { scan-tree-dump-times \"fma \" 3 \"original\" } } */\n-/* { dg-final { scan-tree-dump-times \"fmaf\" 3 \"original\" } } */\n-/* { dg-final { scan-tree-dump-times \"fmal\" 3 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"sqrt \" 1 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"sqrtf\" 1 \"original\" } } */\n /* { dg-final { scan-tree-dump-times \"sqrtl\" 1 \"original\" } } */"}, {"sha": "1a1a843e72ce757c5b0ee286ec3b5664ee998a32", "filename": "gcc/testsuite/gcc.dg/torture/builtin-math-8.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca35fbd596c53980b53c503ee2881a06db97735/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca35fbd596c53980b53c503ee2881a06db97735/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fbuiltin-math-8.c?ref=3ca35fbd596c53980b53c503ee2881a06db97735", "patch": "@@ -0,0 +1,34 @@\n+/* { dg-do link } */\n+\n+extern void link_error (void);\n+\n+int main()\n+{\n+  if (!__builtin_constant_p(1.0))\n+    link_error ();\n+  if (!__builtin_constant_p(__builtin_fma (1.0, 1.0, 1.0)))\n+    link_error ();\n+\n+  if (__builtin_constant_p(__builtin_fmaf (__FLT_MAX__, __FLT_MAX__, 0.0F)))\n+    link_error ();\n+  if (__builtin_constant_p(__builtin_fmaf (__FLT_MAX__, 1.0F, __FLT_MAX__)))\n+    link_error ();\n+  if (__builtin_constant_p(__builtin_fmaf (__FLT_MIN__, __FLT_MIN__, 0.0F)))\n+    link_error ();\n+\n+  if (__builtin_constant_p(__builtin_fma (__DBL_MAX__, __DBL_MAX__, 0.0)))\n+    link_error ();\n+  if (__builtin_constant_p(__builtin_fma (__DBL_MAX__, 1.0, __DBL_MAX__)))\n+    link_error ();\n+  if (__builtin_constant_p(__builtin_fma (__DBL_MIN__, __DBL_MIN__, 0.0)))\n+    link_error ();\n+\n+  if (__builtin_constant_p(__builtin_fmal (__LDBL_MAX__, __LDBL_MAX__, 0.0L)))\n+    link_error ();\n+  if (__builtin_constant_p(__builtin_fmal (__LDBL_MAX__, 1.0L, __LDBL_MAX__)))\n+    link_error ();\n+  if (__builtin_constant_p(__builtin_fmal (__LDBL_MIN__, __LDBL_MIN__, 0.0L)))\n+    link_error ();\n+\n+  return 0;\n+}"}]}