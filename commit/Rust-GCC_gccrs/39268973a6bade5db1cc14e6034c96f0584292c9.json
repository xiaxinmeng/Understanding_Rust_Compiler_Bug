{"sha": "39268973a6bade5db1cc14e6034c96f0584292c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzkyNjg5NzNhNmJhZGU1ZGIxY2MxNGU2MDM0Yzk2ZjA1ODQyOTJjOQ==", "commit": {"author": {"name": "Ulrich Drepper", "email": "drepper@cygnus.com", "date": "1999-01-13T16:04:01Z"}, "committer": {"name": "Ulrich Drepper", "email": "drepper@gcc.gnu.org", "date": "1999-01-13T16:04:01Z"}, "message": "configure.in: Test for \"ln -s\" and set LN_S in generated Makefile.\n\n        * configure.in: Test for \"ln -s\" and set LN_S in generated Makefile.\n        * Makefile.in: Use $(LN_S) instead of explicitly ln -s.\n\nFrom-SVN: r24655", "tree": {"sha": "9654284a6bbde139a2f62eeaa02b048a6709b8fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9654284a6bbde139a2f62eeaa02b048a6709b8fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39268973a6bade5db1cc14e6034c96f0584292c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39268973a6bade5db1cc14e6034c96f0584292c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39268973a6bade5db1cc14e6034c96f0584292c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39268973a6bade5db1cc14e6034c96f0584292c9/comments", "author": null, "committer": null, "parents": [{"sha": "3bd380b1fc20c668c692679fdec30c980070bf3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bd380b1fc20c668c692679fdec30c980070bf3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bd380b1fc20c668c692679fdec30c980070bf3e"}], "stats": {"total": 42, "additions": 33, "deletions": 9}, "files": [{"sha": "6b4750748e448c4d64231998717db7ea469eaeb8", "filename": "libstdc++/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39268973a6bade5db1cc14e6034c96f0584292c9/libstdc%2B%2B%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39268973a6bade5db1cc14e6034c96f0584292c9/libstdc%2B%2B%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FChangeLog?ref=39268973a6bade5db1cc14e6034c96f0584292c9", "patch": "@@ -1,3 +1,8 @@\n+1999-01-13  Ulrich Drepper  <drepper@cygnus.com>\n+\n+\t* configure.in: Test for \"ln -s\" and set LN_S in generated Makefile.\n+\t* Makefile.in: Use $(LN_S) instead of explicitly ln -s.\n+\n Sun Jan 03 03:16:02 1999  Robert Lipe  <robertlipe@usa.net>\n \n \t* configure.in:  (*-*-sysv5, *-*-*udk*):  Treat like sysv4."}, {"sha": "bb1920234073e06e2d64527579e7b6ed489079f3", "filename": "libstdc++/Makefile.in", "status": "modified", "additions": 15, "deletions": 9, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39268973a6bade5db1cc14e6034c96f0584292c9/libstdc%2B%2B%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39268973a6bade5db1cc14e6034c96f0584292c9/libstdc%2B%2B%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FMakefile.in?ref=39268973a6bade5db1cc14e6034c96f0584292c9", "patch": "@@ -35,7 +35,7 @@ SHLIB   = libstdc++.so.$(VERSION)\n SHARLIB = libstdc++-sh.a\n SHLINK  = libstdc++.so\n MSHLINK = libstdc++.so.`echo $(VERSION) | sed 's/\\([0-9][.][0-9]\\).*/\\1/'`\n-SHFLAGS = \n+SHFLAGS =\n SHDEPS  =\n \n STAMP   = bigstmp\n@@ -90,7 +90,7 @@ $(ARLIB): stdlist\n \n $(ARLINK):\n \t-rm -f $(ARLINK)\n-\tln -s $(ARLIB) $(ARLINK)\n+\t$(LN_S) $(ARLIB) $(ARLINK) || cp $(ARLIB) $(ARLINK)\n \n marlink:\n \t@$(MAKE) $(MARLINK) \"ARLINK=$(MARLINK)\"\n@@ -106,7 +106,7 @@ $(SHARLIB): $(SHLIB)\n \n $(SHLINK):\n \t-rm -f $(SHLINK)\n-\tln -s $(SHLIB) $(SHLINK)\n+\t$(LN_S) $(SHLIB) $(SHLINK) || cp $(ARLIB) $(ARLINK)\n \n mshlink:\n \t@$(MAKE) $(MSHLINK) \"SHLINK=$(MSHLINK)\"\n@@ -315,28 +315,34 @@ install:\n \t  if [ $$FILE = $(SHLINK) ] ; then \\\n \t    if [ -f $${INSTALLDIR}/$(MSHLINK) ]; then \\\n \t      rm -f $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n-\t      ln -s $${RELINSTALLDIR}$(MSHLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      $(LN_S) $${RELINSTALLDIR}$(MSHLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE \\\n+\t\t|| cp $${RELINSTALLDIR}$(MSHLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    else \\\n \t      rm -f $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n-\t      ln -s $${RELINSTALLDIR}$(SHLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      $(LN_S) $${RELINSTALLDIR}$(SHLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE \\\n+\t\t|| cp $${RELINSTALLDIR}$(SHLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    fi; \\\n \t  elif [ $$FILE = $(ARLINK) ] ; then \\\n \t    if [ -f $${INSTALLDIR}/$(MARLINK) ]; then \\\n \t      rm -f $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n-\t      ln -s $${RELINSTALLDIR}$(MARLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      $(LN_S) $${RELINSTALLDIR}$(MARLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE \\\n+\t\t|| cp $${RELINSTALLDIR}$(MARLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    else \\\n \t      rm -f $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n-\t      ln -s $${RELINSTALLDIR}$(ARLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      $(LN_S) $${RELINSTALLDIR}$(ARLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE \\\n+\t\t|| cp $${RELINSTALLDIR}$(ARLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    fi; \\\n \t  elif [ $$FILE = mshlink ]; then \\\n \t    for FILE in $(MSHLINK) ; do \\\n \t      rm -f $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n-\t      ln -s $(SHLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      $(LN_S) $(SHLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE \\\n+\t\t|| cp $(SHLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    done; \\\n \t  elif [ $$FILE = marlink ]; then \\\n \t    for FILE in $(MARLINK) ; do \\\n \t      rm -f $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n-\t      ln -s $(ARLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      $(LN_S) $(ARLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE \\\n+\t\t|| cp $(ARLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    done; \\\n \t  elif [ $$FILE = $(SHLIB) ]; then \\\n \t    $(INSTALL_PROGRAM) $$FILE $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\"}, {"sha": "6c2e13a2af5540e15f8146a65bdf74d47628fd9f", "filename": "libstdc++/configure.in", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39268973a6bade5db1cc14e6034c96f0584292c9/libstdc%2B%2B%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39268973a6bade5db1cc14e6034c96f0584292c9/libstdc%2B%2B%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2Fconfigure.in?ref=39268973a6bade5db1cc14e6034c96f0584292c9", "patch": "@@ -115,6 +115,19 @@ CXX_INTERFACE=${cxx_interface}\n LIBC_INTERFACE=${libc_interface}\n \" >> ${package_makefile_frag}\n \n+# This duplicated the AC_PROG_LN_S macro in GNU autoconf.\n+rm -f conttestdata\n+if ln -s X conftestdata 2>/dev/null\n+then\n+  rm -f conftestdata\n+  LN_S=\"ln -s\"\n+else\n+  LN_S=ln\n+fi\n+echo \"\n+LN_S=$LN_S\n+\" >> ${package_makefile_frag}\n+\n # post-target:\n \n # If cross-compiling, we install in $(tooldir)/lib or in $(libsubdir)"}]}