{"sha": "9ed7423543f3d321058eefc527972d5db7ce3b83", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWVkNzQyMzU0M2YzZDMyMTA1OGVlZmM1Mjc5NzJkNWRiN2NlM2I4Mw==", "commit": {"author": {"name": "Anatoly Sokolov", "email": "aesok@post.ru", "date": "2009-09-23T18:44:34Z"}, "committer": {"name": "Anatoly Sokolov", "email": "aesok@gcc.gnu.org", "date": "2009-09-23T18:44:34Z"}, "message": "avr.c (avr_regs_to_save): Use current_function_is_leaf instead of cfun->machine->is_leaf.\n\n\t* config/avr/avr.c (avr_regs_to_save): Use current_function_is_leaf\n\tinstead of cfun->machine->is_leaf.\n\t* config/avr/avr.h (machine_function): Remove is_leaf field.\n\nFrom-SVN: r152093", "tree": {"sha": "5a5840116a1ebfd863ce064423033c98eb601a59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a5840116a1ebfd863ce064423033c98eb601a59"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ed7423543f3d321058eefc527972d5db7ce3b83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ed7423543f3d321058eefc527972d5db7ce3b83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ed7423543f3d321058eefc527972d5db7ce3b83", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ed7423543f3d321058eefc527972d5db7ce3b83/comments", "author": null, "committer": null, "parents": [{"sha": "abab57efc6cf2982fd362638dfdf726830334d3b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abab57efc6cf2982fd362638dfdf726830334d3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abab57efc6cf2982fd362638dfdf726830334d3b"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "41493dcf73358542dbf085f90f57b29142e725b3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ed7423543f3d321058eefc527972d5db7ce3b83/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ed7423543f3d321058eefc527972d5db7ce3b83/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ed7423543f3d321058eefc527972d5db7ce3b83", "patch": "@@ -1,3 +1,9 @@\n+2009-09-23  Anatoly Sokolov  <aesok@post.ru>\n+\n+\t* config/avr/avr.c (avr_regs_to_save): Use current_function_is_leaf\n+\tinstead of cfun->machine->is_leaf.\n+\t* config/avr/avr.h (machine_function): Remove is_leaf field.\n+\n 2009-09-23  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/41439"}, {"sha": "76df476f4c458b43d2fe4f343c49aee4db77a132", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ed7423543f3d321058eefc527972d5db7ce3b83/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ed7423543f3d321058eefc527972d5db7ce3b83/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=9ed7423543f3d321058eefc527972d5db7ce3b83", "patch": "@@ -393,9 +393,6 @@ avr_regs_to_save (HARD_REG_SET *set)\n   int int_or_sig_p = (interrupt_function_p (current_function_decl)\n \t\t      || signal_function_p (current_function_decl));\n \n-  if (!reload_completed)\n-    cfun->machine->is_leaf = leaf_function_p ();\n-\n   if (set)\n     CLEAR_HARD_REG_SET (*set);\n   count = 0;\n@@ -414,7 +411,7 @@ avr_regs_to_save (HARD_REG_SET *set)\n       if (fixed_regs[reg])\n \tcontinue;\n \n-      if ((int_or_sig_p && !cfun->machine->is_leaf && call_used_regs[reg])\n+      if ((int_or_sig_p && !current_function_is_leaf && call_used_regs[reg])\n \t  || (df_regs_ever_live_p (reg)\n \t      && (int_or_sig_p || !call_used_regs[reg])\n \t      && !(frame_pointer_needed"}, {"sha": "0927e3928c1d756a7ded42ddf96e3a7ddb295b83", "filename": "gcc/config/avr/avr.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ed7423543f3d321058eefc527972d5db7ce3b83/gcc%2Fconfig%2Favr%2Favr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ed7423543f3d321058eefc527972d5db7ce3b83/gcc%2Fconfig%2Favr%2Favr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.h?ref=9ed7423543f3d321058eefc527972d5db7ce3b83", "patch": "@@ -841,9 +841,6 @@ mmcu=*:-mmcu=%*}\"\n    This is added to the cfun structure.  */\n struct GTY(()) machine_function\n {\n-  /* 'true' - if the current function is a leaf function.  */\n-  int is_leaf;\n-\n   /* 'true' - if current function is a naked function.  */\n   int is_naked;\n "}]}