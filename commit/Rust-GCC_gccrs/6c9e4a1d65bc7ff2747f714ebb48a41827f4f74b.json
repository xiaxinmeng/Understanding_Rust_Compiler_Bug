{"sha": "6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmM5ZTRhMWQ2NWJjN2ZmMjc0N2Y3MTRlYmI0OGE0MTgyN2Y0Zjc0Yg==", "commit": {"author": {"name": "Bob Duff", "email": "duff@adacore.com", "date": "2019-12-13T09:04:12Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-12-13T09:04:12Z"}, "message": "[Ada] Remove Is_Available function\n\n2019-12-13  Bob Duff  <duff@adacore.com>\n\ngcc/ada/\n\n\t* exp_attr.adb (Is_Available): Remove this function, and replace\n\tall calls with RTE_Available. RTE_Available will return True if\n\t\"not Configurable_Run_Time_Mode\". Remove the \"???\" comment.\n\nFrom-SVN: r279350", "tree": {"sha": "888fe4351a5e4078ecd5701b1feab60a68c42f02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/888fe4351a5e4078ecd5701b1feab60a68c42f02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b/comments", "author": {"login": "bobduff", "id": 29099567, "node_id": "MDQ6VXNlcjI5MDk5NTY3", "avatar_url": "https://avatars.githubusercontent.com/u/29099567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobduff", "html_url": "https://github.com/bobduff", "followers_url": "https://api.github.com/users/bobduff/followers", "following_url": "https://api.github.com/users/bobduff/following{/other_user}", "gists_url": "https://api.github.com/users/bobduff/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobduff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobduff/subscriptions", "organizations_url": "https://api.github.com/users/bobduff/orgs", "repos_url": "https://api.github.com/users/bobduff/repos", "events_url": "https://api.github.com/users/bobduff/events{/privacy}", "received_events_url": "https://api.github.com/users/bobduff/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7f8ad8f001a4054e07b7d0762a14a6784bec136c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f8ad8f001a4054e07b7d0762a14a6784bec136c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f8ad8f001a4054e07b7d0762a14a6784bec136c"}], "stats": {"total": 113, "additions": 47, "deletions": 66}, "files": [{"sha": "475a38912d72e4fa8286b1472b1f858c44820960", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b", "patch": "@@ -1,3 +1,9 @@\n+2019-12-13  Bob Duff  <duff@adacore.com>\n+\n+\t* exp_attr.adb (Is_Available): Remove this function, and replace\n+\tall calls with RTE_Available. RTE_Available will return True if\n+\t\"not Configurable_Run_Time_Mode\". Remove the \"???\" comment.\n+\n 2019-12-13  Ed Schonberg  <schonberg@adacore.com>\n \n \t* sem_ch7.adb (Analyze_Package_Body_Helper): Do not call"}, {"sha": "7701d723717e3e1041672c97902f66eae04caa99", "filename": "gcc/ada/exp_attr.adb", "status": "modified", "additions": 41, "deletions": 66, "changes": 107, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b/gcc%2Fada%2Fexp_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b/gcc%2Fada%2Fexp_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_attr.adb?ref=6c9e4a1d65bc7ff2747f714ebb48a41827f4f74b", "patch": "@@ -7818,31 +7818,6 @@ package body Exp_Attr is\n    is\n       Base_Typ : constant Entity_Id := Base_Type (Typ);\n       Ent      : constant Entity_Id := TSS (Typ, Nam);\n-\n-      function Is_Available (Entity : RE_Id) return Boolean;\n-      pragma Inline (Is_Available);\n-      --  Function to check whether the specified run-time call is available\n-      --  in the run time used. In the case of a configurable run time, it\n-      --  is normal that some subprograms are not there.\n-      --\n-      --  I don't understand this routine at all, why is this not just a\n-      --  call to RTE_Available? And if for some reason we need a different\n-      --  routine with different semantics, why is not in Rtsfind ???\n-\n-      ------------------\n-      -- Is_Available --\n-      ------------------\n-\n-      function Is_Available (Entity : RE_Id) return Boolean is\n-      begin\n-         --  Assume that the unit will always be available when using a\n-         --  \"normal\" (not configurable) run time.\n-\n-         return not Configurable_Run_Time_Mode or else RTE_Available (Entity);\n-      end Is_Available;\n-\n-   --  Start of processing for Find_Stream_Subprogram\n-\n    begin\n       if Present (Ent) then\n          return Ent;\n@@ -7859,7 +7834,7 @@ package body Exp_Attr is\n       --  that stream routines for string types are not present (they require\n       --  file system support). In this case, the specific stream routines for\n       --  strings are not used, relying on the regular stream mechanism\n-      --  instead. That is why we include the test Is_Available when dealing\n+      --  instead. That is why we include the test RTE_Available when dealing\n       --  with these cases.\n \n       if not Is_Predefined_Unit (Current_Sem_Unit) then\n@@ -7871,22 +7846,22 @@ package body Exp_Attr is\n \n             if Restriction_Active (No_Stream_Optimizations) then\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Storage_Array_Input)\n+                 and then RTE_Available (RE_Storage_Array_Input)\n                then\n                   return RTE (RE_Storage_Array_Input);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Storage_Array_Output)\n+                 and then RTE_Available (RE_Storage_Array_Output)\n                then\n                   return RTE (RE_Storage_Array_Output);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Storage_Array_Read)\n+                 and then RTE_Available (RE_Storage_Array_Read)\n                then\n                   return RTE (RE_Storage_Array_Read);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Storage_Array_Write)\n+                 and then RTE_Available (RE_Storage_Array_Write)\n                then\n                   return RTE (RE_Storage_Array_Write);\n \n@@ -7903,22 +7878,22 @@ package body Exp_Attr is\n \n             else\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Storage_Array_Input_Blk_IO)\n+                 and then RTE_Available (RE_Storage_Array_Input_Blk_IO)\n                then\n                   return RTE (RE_Storage_Array_Input_Blk_IO);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Storage_Array_Output_Blk_IO)\n+                 and then RTE_Available (RE_Storage_Array_Output_Blk_IO)\n                then\n                   return RTE (RE_Storage_Array_Output_Blk_IO);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Storage_Array_Read_Blk_IO)\n+                 and then RTE_Available (RE_Storage_Array_Read_Blk_IO)\n                then\n                   return RTE (RE_Storage_Array_Read_Blk_IO);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Storage_Array_Write_Blk_IO)\n+                 and then RTE_Available (RE_Storage_Array_Write_Blk_IO)\n                then\n                   return RTE (RE_Storage_Array_Write_Blk_IO);\n \n@@ -7939,22 +7914,22 @@ package body Exp_Attr is\n \n             if Restriction_Active (No_Stream_Optimizations) then\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Stream_Element_Array_Input)\n+                 and then RTE_Available (RE_Stream_Element_Array_Input)\n                then\n                   return RTE (RE_Stream_Element_Array_Input);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Stream_Element_Array_Output)\n+                 and then RTE_Available (RE_Stream_Element_Array_Output)\n                then\n                   return RTE (RE_Stream_Element_Array_Output);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Stream_Element_Array_Read)\n+                 and then RTE_Available (RE_Stream_Element_Array_Read)\n                then\n                   return RTE (RE_Stream_Element_Array_Read);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Stream_Element_Array_Write)\n+                 and then RTE_Available (RE_Stream_Element_Array_Write)\n                then\n                   return RTE (RE_Stream_Element_Array_Write);\n \n@@ -7971,22 +7946,22 @@ package body Exp_Attr is\n \n             else\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Stream_Element_Array_Input_Blk_IO)\n+                 and then RTE_Available (RE_Stream_Element_Array_Input_Blk_IO)\n                then\n                   return RTE (RE_Stream_Element_Array_Input_Blk_IO);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Stream_Element_Array_Output_Blk_IO)\n+                 and then RTE_Available (RE_Stream_Element_Array_Output_Blk_IO)\n                then\n                   return RTE (RE_Stream_Element_Array_Output_Blk_IO);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Stream_Element_Array_Read_Blk_IO)\n+                 and then RTE_Available (RE_Stream_Element_Array_Read_Blk_IO)\n                then\n                   return RTE (RE_Stream_Element_Array_Read_Blk_IO);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Stream_Element_Array_Write_Blk_IO)\n+                 and then RTE_Available (RE_Stream_Element_Array_Write_Blk_IO)\n                then\n                   return RTE (RE_Stream_Element_Array_Write_Blk_IO);\n \n@@ -8007,22 +7982,22 @@ package body Exp_Attr is\n \n             if Restriction_Active (No_Stream_Optimizations) then\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_String_Input)\n+                 and then RTE_Available (RE_String_Input)\n                then\n                   return RTE (RE_String_Input);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_String_Output)\n+                 and then RTE_Available (RE_String_Output)\n                then\n                   return RTE (RE_String_Output);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_String_Read)\n+                 and then RTE_Available (RE_String_Read)\n                then\n                   return RTE (RE_String_Read);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_String_Write)\n+                 and then RTE_Available (RE_String_Write)\n                then\n                   return RTE (RE_String_Write);\n \n@@ -8039,22 +8014,22 @@ package body Exp_Attr is\n \n             else\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_String_Input_Blk_IO)\n+                 and then RTE_Available (RE_String_Input_Blk_IO)\n                then\n                   return RTE (RE_String_Input_Blk_IO);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_String_Output_Blk_IO)\n+                 and then RTE_Available (RE_String_Output_Blk_IO)\n                then\n                   return RTE (RE_String_Output_Blk_IO);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_String_Read_Blk_IO)\n+                 and then RTE_Available (RE_String_Read_Blk_IO)\n                then\n                   return RTE (RE_String_Read_Blk_IO);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_String_Write_Blk_IO)\n+                 and then RTE_Available (RE_String_Write_Blk_IO)\n                then\n                   return RTE (RE_String_Write_Blk_IO);\n \n@@ -8075,22 +8050,22 @@ package body Exp_Attr is\n \n             if Restriction_Active (No_Stream_Optimizations) then\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Wide_String_Input)\n+                 and then RTE_Available (RE_Wide_String_Input)\n                then\n                   return RTE (RE_Wide_String_Input);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Wide_String_Output)\n+                 and then RTE_Available (RE_Wide_String_Output)\n                then\n                   return RTE (RE_Wide_String_Output);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Wide_String_Read)\n+                 and then RTE_Available (RE_Wide_String_Read)\n                then\n                   return RTE (RE_Wide_String_Read);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Wide_String_Write)\n+                 and then RTE_Available (RE_Wide_String_Write)\n                then\n                   return RTE (RE_Wide_String_Write);\n \n@@ -8107,22 +8082,22 @@ package body Exp_Attr is\n \n             else\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Wide_String_Input_Blk_IO)\n+                 and then RTE_Available (RE_Wide_String_Input_Blk_IO)\n                then\n                   return RTE (RE_Wide_String_Input_Blk_IO);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Wide_String_Output_Blk_IO)\n+                 and then RTE_Available (RE_Wide_String_Output_Blk_IO)\n                then\n                   return RTE (RE_Wide_String_Output_Blk_IO);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Wide_String_Read_Blk_IO)\n+                 and then RTE_Available (RE_Wide_String_Read_Blk_IO)\n                then\n                   return RTE (RE_Wide_String_Read_Blk_IO);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Wide_String_Write_Blk_IO)\n+                 and then RTE_Available (RE_Wide_String_Write_Blk_IO)\n                then\n                   return RTE (RE_Wide_String_Write_Blk_IO);\n \n@@ -8143,22 +8118,22 @@ package body Exp_Attr is\n \n             if Restriction_Active (No_Stream_Optimizations) then\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Wide_Wide_String_Input)\n+                 and then RTE_Available (RE_Wide_Wide_String_Input)\n                then\n                   return RTE (RE_Wide_Wide_String_Input);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Wide_Wide_String_Output)\n+                 and then RTE_Available (RE_Wide_Wide_String_Output)\n                then\n                   return RTE (RE_Wide_Wide_String_Output);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Wide_Wide_String_Read)\n+                 and then RTE_Available (RE_Wide_Wide_String_Read)\n                then\n                   return RTE (RE_Wide_Wide_String_Read);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Wide_Wide_String_Write)\n+                 and then RTE_Available (RE_Wide_Wide_String_Write)\n                then\n                   return RTE (RE_Wide_Wide_String_Write);\n \n@@ -8175,22 +8150,22 @@ package body Exp_Attr is\n \n             else\n                if Nam = TSS_Stream_Input\n-                 and then Is_Available (RE_Wide_Wide_String_Input_Blk_IO)\n+                 and then RTE_Available (RE_Wide_Wide_String_Input_Blk_IO)\n                then\n                   return RTE (RE_Wide_Wide_String_Input_Blk_IO);\n \n                elsif Nam = TSS_Stream_Output\n-                 and then Is_Available (RE_Wide_Wide_String_Output_Blk_IO)\n+                 and then RTE_Available (RE_Wide_Wide_String_Output_Blk_IO)\n                then\n                   return RTE (RE_Wide_Wide_String_Output_Blk_IO);\n \n                elsif Nam = TSS_Stream_Read\n-                 and then Is_Available (RE_Wide_Wide_String_Read_Blk_IO)\n+                 and then RTE_Available (RE_Wide_Wide_String_Read_Blk_IO)\n                then\n                   return RTE (RE_Wide_Wide_String_Read_Blk_IO);\n \n                elsif Nam = TSS_Stream_Write\n-                 and then Is_Available (RE_Wide_Wide_String_Write_Blk_IO)\n+                 and then RTE_Available (RE_Wide_Wide_String_Write_Blk_IO)\n                then\n                   return RTE (RE_Wide_Wide_String_Write_Blk_IO);\n "}]}