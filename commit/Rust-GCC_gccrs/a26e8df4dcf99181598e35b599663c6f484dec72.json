{"sha": "a26e8df4dcf99181598e35b599663c6f484dec72", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI2ZThkZjRkY2Y5OTE4MTU5OGUzNWI1OTk2NjNjNmY0ODRkZWM3Mg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2011-02-11T21:07:17Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2011-02-11T21:07:17Z"}, "message": "re PR fortran/47550 (PURE with VALUE and w/o INTENT: add gfc_notify_std (GFC_STD_F2008 ?)\n\n2011-02-11  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/47550\n        * resolve.c (resolve_formal_arglist): PURE with VALUE\n        and no INTENT: Add -std= diagnostics.\n\n2011-02-11  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/47550\n        * gfortran.dg/pure_formal_2.f90: New.\n\nFrom-SVN: r170060", "tree": {"sha": "56b66b81ad62bc528a894a33f1d79ba5c4b08e46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56b66b81ad62bc528a894a33f1d79ba5c4b08e46"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a26e8df4dcf99181598e35b599663c6f484dec72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a26e8df4dcf99181598e35b599663c6f484dec72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a26e8df4dcf99181598e35b599663c6f484dec72", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a26e8df4dcf99181598e35b599663c6f484dec72/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3f82421f9c460408f21dc8a68079957aada10c0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f82421f9c460408f21dc8a68079957aada10c0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f82421f9c460408f21dc8a68079957aada10c0e"}], "stats": {"total": 59, "additions": 51, "deletions": 8}, "files": [{"sha": "9980d4ddd69824b751908423fb858eff624eab22", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a26e8df4dcf99181598e35b599663c6f484dec72", "patch": "@@ -1,3 +1,9 @@\n+2011-02-11  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/47550\n+\t* resolve.c (resolve_formal_arglist): PURE with VALUE\n+\tand no INTENT: Add -std= diagnostics.\n+\n 2011-02-09  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/47352"}, {"sha": "fefb6436c96031ac68451aaac6bcda979e7d98e1", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 22, "deletions": 8, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=a26e8df4dcf99181598e35b599663c6f484dec72", "patch": "@@ -341,17 +341,31 @@ resolve_formal_arglist (gfc_symbol *proc)\n       if (gfc_pure (proc) && !sym->attr.pointer\n \t  && sym->attr.flavor != FL_PROCEDURE)\n \t{\n-\t  if (proc->attr.function && sym->attr.intent != INTENT_IN\n-\t      && !sym->attr.value)\n-\t    gfc_error (\"Argument '%s' of pure function '%s' at %L must be \"\n-\t\t       \"INTENT(IN) or VALUE\", sym->name, proc->name,\n-\t\t       &sym->declared_at);\n+\t  if (proc->attr.function && sym->attr.intent != INTENT_IN)\n+\t    {\n+\t      if (sym->attr.value)\n+\t\tgfc_notify_std (GFC_STD_F2008, \"Fortran 2008: Argument '%s' \"\n+\t\t\t\t\"of pure function '%s' at %L with VALUE \"\n+\t\t\t\t\"attribute but without INTENT(IN)\", sym->name,\n+\t\t\t\tproc->name, &sym->declared_at);\n+\t      else\n+\t\tgfc_error (\"Argument '%s' of pure function '%s' at %L must be \"\n+\t\t\t   \"INTENT(IN) or VALUE\", sym->name, proc->name,\n+\t\t\t   &sym->declared_at);\n+\t    }\n \n-\t  if (proc->attr.subroutine && sym->attr.intent == INTENT_UNKNOWN\n-\t      && !sym->attr.value)\n-\t    gfc_error (\"Argument '%s' of pure subroutine '%s' at %L must \"\n+\t  if (proc->attr.subroutine && sym->attr.intent == INTENT_UNKNOWN)\n+\t    {\n+\t      if (sym->attr.value)\n+\t\tgfc_notify_std (GFC_STD_F2008, \"Fortran 2008: Argument '%s' \"\n+\t\t\t\t\"of pure subroutine '%s' at %L with VALUE \"\n+\t\t\t\t\"attribute but without INTENT\", sym->name,\n+\t\t\t\tproc->name, &sym->declared_at);\n+\t      else\n+\t\tgfc_error (\"Argument '%s' of pure subroutine '%s' at %L must \"\n \t\t       \"have its INTENT specified or have the VALUE \"\n \t\t       \"attribute\", sym->name, proc->name, &sym->declared_at);\n+\t    }\n \t}\n \n       if (proc->attr.implicit_pure && !sym->attr.pointer"}, {"sha": "996c2d9ded38036c4e10067f7660b3d78dc6537d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a26e8df4dcf99181598e35b599663c6f484dec72", "patch": "@@ -1,3 +1,8 @@\n+2011-02-11  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/47550\n+\t* gfortran.dg/pure_formal_2.f90: New.\n+\n 2011-02-11  Pat Haugen <pthaugen@us.ibm.com>\n \n \tPR rtl-optimization/47614"}, {"sha": "b3c8a0e0e2c20a2207af0be55fe8bf58c849035f", "filename": "gcc/testsuite/gfortran.dg/pure_formal_2.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a26e8df4dcf99181598e35b599663c6f484dec72/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_2.f90?ref=a26e8df4dcf99181598e35b599663c6f484dec72", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f2003\" }\n+!\n+! PR fortran/47550\n+! Follow up to: PR fortran/47507\n+!\n+! PURE procedures: Allow arguments w/o INTENT if they are VALUE\n+!\n+\n+pure function f(x) ! { dg-error \"Fortran 2008: Argument 'x' of pure function\" }\n+  real, VALUE :: x\n+  real :: f\n+  f = sin(x)\n+end function f\n+\n+pure subroutine sub(x) ! { dg-error \"Fortran 2008: Argument 'x' of pure subroutine\" }\n+  real, VALUE :: x\n+end subroutine sub"}]}