{"sha": "d56f4479e63df5de87b47572640de835924cf443", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU2ZjQ0NzllNjNkZjVkZTg3YjQ3NTcyNjQwZGU4MzU5MjRjZjQ0Mw==", "commit": {"author": {"name": "Javier Miranda", "email": "miranda@adacore.com", "date": "2014-10-10T13:23:22Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-10-10T13:23:22Z"}, "message": "exp_ch3.adb (Build_Init_Procedure): Complete the condition of an if-stmt to match its current documentation.\n\n2014-10-10  Javier Miranda  <miranda@adacore.com>\n\n\t* exp_ch3.adb (Build_Init_Procedure): Complete the condition of an\n\tif-stmt to match its current documentation.\n\nFrom-SVN: r216080", "tree": {"sha": "874ad07b81a5d2346941e7af5e2b47f33acca72e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/874ad07b81a5d2346941e7af5e2b47f33acca72e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d56f4479e63df5de87b47572640de835924cf443", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d56f4479e63df5de87b47572640de835924cf443", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d56f4479e63df5de87b47572640de835924cf443", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d56f4479e63df5de87b47572640de835924cf443/comments", "author": {"login": "miranda-adacore", "id": 54413934, "node_id": "MDQ6VXNlcjU0NDEzOTM0", "avatar_url": "https://avatars.githubusercontent.com/u/54413934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miranda-adacore", "html_url": "https://github.com/miranda-adacore", "followers_url": "https://api.github.com/users/miranda-adacore/followers", "following_url": "https://api.github.com/users/miranda-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/miranda-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/miranda-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miranda-adacore/subscriptions", "organizations_url": "https://api.github.com/users/miranda-adacore/orgs", "repos_url": "https://api.github.com/users/miranda-adacore/repos", "events_url": "https://api.github.com/users/miranda-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/miranda-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5e396da6b43aa2ba1fc30df73b8beb257bfd081d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e396da6b43aa2ba1fc30df73b8beb257bfd081d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e396da6b43aa2ba1fc30df73b8beb257bfd081d"}], "stats": {"total": 27, "additions": 13, "deletions": 14}, "files": [{"sha": "d8408eb3d35660379a1ae5bad760e7780890b5ce", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d56f4479e63df5de87b47572640de835924cf443/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d56f4479e63df5de87b47572640de835924cf443/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d56f4479e63df5de87b47572640de835924cf443", "patch": "@@ -1,3 +1,8 @@\n+2014-10-10  Javier Miranda  <miranda@adacore.com>\n+\n+\t* exp_ch3.adb (Build_Init_Procedure): Complete the condition of an\n+\tif-stmt to match its current documentation.\n+\n 2014-10-10  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_ch7.adb, einfo.adb, einfo.ads, sem_prag.adb, sem_ch12.adb,"}, {"sha": "1aa813e3acc4980b902accf7c6d20659dfe4a2c5", "filename": "gcc/ada/exp_ch3.adb", "status": "modified", "additions": 8, "deletions": 14, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d56f4479e63df5de87b47572640de835924cf443/gcc%2Fada%2Fexp_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d56f4479e63df5de87b47572640de835924cf443/gcc%2Fada%2Fexp_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch3.adb?ref=d56f4479e63df5de87b47572640de835924cf443", "patch": "@@ -2371,16 +2371,11 @@ package body Exp_Ch3 is\n                   --  such case the initialization of the _parent field was not\n                   --  generated.\n \n-                  if not Is_Interface (Etype (Rec_Ent)) then\n-                     declare\n-                        First_Stmt : constant Node_Id := Remove_Head (Stmts);\n-                     begin\n-                        pragma Assert\n-                          (Nkind (First_Stmt) = N_Procedure_Call_Statement\n-                             and then\n-                           Is_Init_Proc (Name (First_Stmt)));\n-                        Prepend_To (Body_Stmts, First_Stmt);\n-                     end;\n+                  if not Is_Interface (Etype (Rec_Ent))\n+                    and then Nkind (First (Stmts)) = N_Procedure_Call_Statement\n+                    and then Is_Init_Proc (Name (First (Stmts)))\n+                  then\n+                     Prepend_To (Body_Stmts, Remove_Head (Stmts));\n                   end if;\n \n                   Append_List_To (Body_Stmts, Stmts);\n@@ -2664,9 +2659,9 @@ package body Exp_Ch3 is\n \n       function Build_Init_Statements (Comp_List : Node_Id) return List_Id is\n          Checks       : constant List_Id := New_List;\n-         Actions      : List_Id   := No_List;\n+         Actions      : List_Id          := No_List;\n+         Counter_Id   : Entity_Id        := Empty;\n          Comp_Loc     : Source_Ptr;\n-         Counter_Id   : Entity_Id := Empty;\n          Decl         : Node_Id;\n          Has_POC      : Boolean;\n          Id           : Entity_Id;\n@@ -2980,8 +2975,7 @@ package body Exp_Ch3 is\n                   else\n                      Append_List_To (Stmts, Actions);\n \n-                     --  Preserve the initialization state in the current\n-                     --  counter\n+                     --  Preserve initialization state in the current counter\n \n                      if Needs_Finalization (Typ) then\n                         if No (Counter_Id) then"}]}