{"sha": "f51c724c7e65498f1c0af15c6d566397257b6d5f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjUxYzcyNGM3ZTY1NDk4ZjFjMGFmMTVjNmQ1NjYzOTcyNTdiNmQ1Zg==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2018-11-26T17:50:03Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2018-11-26T17:50:03Z"}, "message": "[arm][1/3] Rename mul64 attr to widen_mul64\n\nThe mul64 attribute in types.md causes some confusion as it is used to represent\naarch32 instructions that do widening multiplication to generate 32->64 bit results.\nBut these types are shared with aarch64, which has native 64-bit multiplication operations.\n\nThose are currently not properly represented, which I will fix in follow-up patches.\nFor now, this patch renames the mul64 attribute to widen_mul64 to more clearly communicate its meaning.\n\nIt mechanically updates all users of that name in config/arm/ (there are no users in config/aarch64).\nThere is thus no change in behaviour.\n\n\t* config/arm/types.md (mul64): Rename to...\n\t(widen_mul64): ... This.\n\t* config/arm/arm-generic.md: Rename mul64 to widen_mul64.\n\t* config/arm/cortex-a15.md: Likewise.\n\t* config/arm/cortex-a5.md: Likewise.\n\t* config/arm/cortex-a53.md: Likewise.\n\t* config/arm/cortex-a57.md: Likewise.\n\t* config/arm/cortex-a7.md: Likewise.\n\t* config/arm/cortex-m4.md: Likewise.\n\t* config/arm/exynos-m1.md: Likewise.\n\t* config/arm/marvell-pj4.md: Likewise.\n\t* config/arm/xgene1.md: Likewise.\n\nFrom-SVN: r266471", "tree": {"sha": "e6509cd7bc35893049ac75b261428ec385fc37af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e6509cd7bc35893049ac75b261428ec385fc37af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f51c724c7e65498f1c0af15c6d566397257b6d5f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f51c724c7e65498f1c0af15c6d566397257b6d5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f51c724c7e65498f1c0af15c6d566397257b6d5f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f51c724c7e65498f1c0af15c6d566397257b6d5f/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e20145f12ca3ecd913f28619d5f1b04ee91a18e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e20145f12ca3ecd913f28619d5f1b04ee91a18e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e20145f12ca3ecd913f28619d5f1b04ee91a18e8"}], "stats": {"total": 49, "additions": 32, "deletions": 17}, "files": [{"sha": "f98017b29e329b677d7f302c84fe1fcc35aeb81a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -1,3 +1,18 @@\n+2018-11-26  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* config/arm/types.md (mul64): Rename to...\n+\t(widen_mul64): ... This.\n+\t* config/arm/arm-generic.md: Rename mul64 to widen_mul64.\n+\t* config/arm/cortex-a15.md: Likewise.\n+\t* config/arm/cortex-a5.md: Likewise.\n+\t* config/arm/cortex-a53.md: Likewise.\n+\t* config/arm/cortex-a57.md: Likewise.\n+\t* config/arm/cortex-a7.md: Likewise.\n+\t* config/arm/cortex-m4.md: Likewise.\n+\t* config/arm/exynos-m1.md: Likewise.\n+\t* config/arm/marvell-pj4.md: Likewise.\n+\t* config/arm/xgene1.md: Likewise.\n+\n 2018-11-26  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/88182"}, {"sha": "9b8f65c4314959a228733f904f8c04bc648f4b59", "filename": "gcc/config/arm/arm-generic.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Farm-generic.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Farm-generic.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-generic.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -116,23 +116,23 @@\n   (and (eq_attr \"generic_sched\" \"yes\")\n        (and (eq_attr \"ldsched\" \"no\")\n \t    (ior (eq_attr \"mul32\" \"yes\")\n-\t\t (eq_attr \"mul64\" \"yes\"))))\n+\t\t (eq_attr \"widen_mul64\" \"yes\"))))\n   \"core*16\")\n \n (define_insn_reservation \"mult_ldsched_strongarm\" 3\n   (and (eq_attr \"generic_sched\" \"yes\")\n        (and (eq_attr \"ldsched\" \"yes\") \n \t    (and (eq_attr \"tune\" \"strongarm\")\n \t\t (ior (eq_attr \"mul32\" \"yes\")\n-\t\t      (eq_attr \"mul64\" \"yes\")))))\n+\t\t      (eq_attr \"widen_mul64\" \"yes\")))))\n   \"core*2\")\n \n (define_insn_reservation \"mult_ldsched\" 4\n   (and (eq_attr \"generic_sched\" \"yes\")\n        (and (eq_attr \"ldsched\" \"yes\") \n \t    (and (eq_attr \"tune\" \"!strongarm\")\n \t         (ior (eq_attr \"mul32\" \"yes\")\n-\t\t      (eq_attr \"mul64\" \"yes\")))))\n+\t\t      (eq_attr \"widen_mul64\" \"yes\")))))\n   \"core*4\")\n \n (define_insn_reservation \"multi_cycle\" 32\n@@ -141,7 +141,7 @@\n             (and (eq_attr \"type\" \"!load_byte,load_4,load_8,load_12,load_16,\\\n                                   store_4,store_8,store_12,store_16\")\n \t\t (not (ior (eq_attr \"mul32\" \"yes\")\n-\t\t\t   (eq_attr \"mul64\" \"yes\"))))))\n+\t\t\t   (eq_attr \"widen_mul64\" \"yes\"))))))\n   \"core*32\")\n \n (define_insn_reservation \"single_cycle\" 1"}, {"sha": "9bec99ae7637e48c562bf5972263074da11f102a", "filename": "gcc/config/arm/cortex-a15.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a15.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a15.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a15.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -105,7 +105,7 @@\n ;; 64-bit multiplies\n (define_insn_reservation \"cortex_a15_mult64\" 4\n   (and (eq_attr \"tune\" \"cortexa15\")\n-       (eq_attr \"mul64\" \"yes\"))\n+       (eq_attr \"widen_mul64\" \"yes\"))\n   \"ca15_issue1,ca15_mx*2\")\n \n ;; Integer divide"}, {"sha": "9ff98a236b7474af59cc18194fc324d8d9c39433", "filename": "gcc/config/arm/cortex-a5.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a5.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a5.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a5.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -93,7 +93,7 @@\n (define_insn_reservation \"cortex_a5_mul\" 2\n   (and (eq_attr \"tune\" \"cortexa5\")\n        (ior (eq_attr \"mul32\" \"yes\")\n-\t    (eq_attr \"mul64\" \"yes\")))\n+\t    (eq_attr \"widen_mul64\" \"yes\")))\n   \"cortex_a5_ex1\")\n \n ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}, {"sha": "5e9fa88c4a15c0c8d9f0e54e9f0c740317234467", "filename": "gcc/config/arm/cortex-a53.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a53.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a53.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a53.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -111,7 +111,7 @@\n (define_insn_reservation \"cortex_a53_mul\" 4\n   (and (eq_attr \"tune\" \"cortexa53\")\n        (ior (eq_attr \"mul32\" \"yes\")\n-\t    (eq_attr \"mul64\" \"yes\")))\n+\t    (eq_attr \"widen_mul64\" \"yes\")))\n   \"cortex_a53_slot_any+cortex_a53_imul\")\n \n ;; From the perspective of the GCC scheduling state machine, if we wish to"}, {"sha": "89e322cc248c239b00b1328f2e0fc9d59dccc298", "filename": "gcc/config/arm/cortex-a57.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a57.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a57.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a57.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -328,7 +328,7 @@\n (define_insn_reservation \"cortex_a57_mult32\" 3\n   (and (eq_attr \"tune\" \"cortexa57\")\n        (ior (eq_attr \"mul32\" \"yes\")\n-\t    (eq_attr \"mul64\" \"yes\")))\n+\t    (eq_attr \"widen_mul64\" \"yes\")))\n   \"ca57_mx\")\n \n ;; Integer divide"}, {"sha": "fee25161a9ea9d0789b84400f66287e71454a4db", "filename": "gcc/config/arm/cortex-a7.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a7.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-a7.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-a7.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -171,7 +171,7 @@\n (define_insn_reservation \"cortex_a7_mul\" 2\n   (and (eq_attr \"tune\" \"cortexa7\")\n        (ior (eq_attr \"mul32\" \"yes\")\n-            (eq_attr \"mul64\" \"yes\")))\n+\t    (eq_attr \"widen_mul64\" \"yes\")))\n   \"cortex_a7_both\")\n \n ;; Forward the result of a multiply operation to the accumulator "}, {"sha": "419f094999e53b4f4f415b7935a6807e94be78b9", "filename": "gcc/config/arm/cortex-m4.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-m4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fcortex-m4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcortex-m4.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -44,7 +44,7 @@\n                              mvn_imm,mvn_reg,mvn_shift,mvn_shift_reg,\\\n                              mrs,multiple,no_insn\")\n \t    (ior (eq_attr \"mul32\" \"yes\")\n-\t\t (eq_attr \"mul64\" \"yes\"))))\n+\t\t (eq_attr \"widen_mul64\" \"yes\"))))\n   \"cortex_m4_ex\")\n \n ;; Byte, half-word and word load is two cycles."}, {"sha": "2bdfd187ea8a5185e7d4e4511a9bafef1d043fe8", "filename": "gcc/config/arm/exynos-m1.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fexynos-m1.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fexynos-m1.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fexynos-m1.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -417,7 +417,7 @@\n \n (define_insn_reservation \"exynos_m1_mlal\" 4\n   (and (eq_attr \"tune\" \"exynosm1\")\n-       (eq_attr \"mul64\" \"yes\"))\n+       (eq_attr \"widen_mul64\" \"yes\"))\n   \"em1_alu, em1_c\")\n \n ;; Integer divide"}, {"sha": "0e24a9abd09031d3b14aa8e804dd0b03d45a51e3", "filename": "gcc/config/arm/marvell-pj4.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fmarvell-pj4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fmarvell-pj4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fmarvell-pj4.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -119,8 +119,8 @@\n (define_insn_reservation \"pj4_ir_mul\" 3\n   (and (eq_attr \"tune\" \"marvell_pj4\")\n        (ior (eq_attr \"mul32\" \"yes\")\n-            (eq_attr \"mul64\" \"yes\")))\n-                     \"pj4_is,pj4_mul,nothing*2,pj4_cp\")\n+\t    (eq_attr \"widen_mul64\" \"yes\")))\n+\t\t     \"pj4_is,pj4_mul,nothing*2,pj4_cp\")\n \n (define_insn_reservation \"pj4_ir_div\" 20\n   (and (eq_attr \"tune\" \"marvell_pj4\") "}, {"sha": "3f10367545cc9b9b4f54340dcd9873df5b6ca95b", "filename": "gcc/config/arm/types.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Ftypes.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Ftypes.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ftypes.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -1100,8 +1100,8 @@\n     (const_string \"yes\")\n     (const_string \"no\")))\n \n-; Is this an (integer side) multiply with a 64-bit result?\n-(define_attr \"mul64\" \"no,yes\"\n+; Is this an (integer side) widening multiply with a 64-bit result?\n+(define_attr \"widen_mul64\" \"no,yes\"\n   (if_then_else\n     (eq_attr \"type\"\n      \"smlalxy,umull,umulls,umaal,umlal,umlals,smull,smulls,smlal,smlals\")"}, {"sha": "893cb37e4bb93687de08b4d2b63848f9432b1252", "filename": "gcc/config/arm/xgene1.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fxgene1.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f51c724c7e65498f1c0af15c6d566397257b6d5f/gcc%2Fconfig%2Farm%2Fxgene1.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fxgene1.md?ref=f51c724c7e65498f1c0af15c6d566397257b6d5f", "patch": "@@ -169,9 +169,9 @@\n        (eq_attr \"mul32\" \"yes\"))\n   \"xgene1_decode2op, xgene1_IXB + xgene1_multiply, xgene1_multiply, nothing, xgene1_IXB_compl\")\n \n-(define_insn_reservation \"xgene1_mul64\" 5\n+(define_insn_reservation \"xgene1_widen_mul64\" 5\n   (and (eq_attr \"tune\" \"xgene1\")\n-       (eq_attr \"mul64\" \"yes\"))\n+       (eq_attr \"widen_mul64\" \"yes\"))\n   \"xgene1_decode2op, xgene1_IXB + xgene1_multiply, xgene1_multiply, nothing*2, xgene1_IXB_compl\")\n \n (define_insn_reservation \"xgene1_div\" 34"}]}