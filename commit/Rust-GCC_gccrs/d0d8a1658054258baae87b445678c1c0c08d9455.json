{"sha": "d0d8a1658054258baae87b445678c1c0c08d9455", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDBkOGExNjU4MDU0MjU4YmFhZTg3YjQ0NTY3OGMxYzBjMDhkOTQ1NQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-11-03T13:53:24Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2020-11-03T15:23:06Z"}, "message": "middle-end/97579 - fix VEC_COND_EXPR ISEL optab query\n\nThis fixes a mistake in the optab query done by ISEL.  It\ndoesn't fix the PR but shifts the ICE elsewhere.\n\n2020-11-03  Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/97579\n\t* gimple-isel.cc (gimple_expand_vec_cond_expr): Use\n\tthe correct types for the vcond_mask/vec_cmp optab queries.", "tree": {"sha": "d81d9b8f325f85d36b2f025daadd58efd4b4e369", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d81d9b8f325f85d36b2f025daadd58efd4b4e369"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0d8a1658054258baae87b445678c1c0c08d9455", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0d8a1658054258baae87b445678c1c0c08d9455", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0d8a1658054258baae87b445678c1c0c08d9455", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0d8a1658054258baae87b445678c1c0c08d9455/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea7df355ca4a4571d07d1fc9528cccd1393c2420", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea7df355ca4a4571d07d1fc9528cccd1393c2420", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea7df355ca4a4571d07d1fc9528cccd1393c2420"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "9186ff55cdd9a3a6d2884567ee8e6f8c22df15e9", "filename": "gcc/gimple-isel.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0d8a1658054258baae87b445678c1c0c08d9455/gcc%2Fgimple-isel.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0d8a1658054258baae87b445678c1c0c08d9455/gcc%2Fgimple-isel.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-isel.cc?ref=d0d8a1658054258baae87b445678c1c0c08d9455", "patch": "@@ -162,11 +162,12 @@ gimple_expand_vec_cond_expr (gimple_stmt_iterator *gsi,\n \t  op0a = gimple_assign_rhs1 (def_stmt);\n \t  op0b = gimple_assign_rhs2 (def_stmt);\n \n+\t  tree op0_type = TREE_TYPE (op0);\n \t  tree op0a_type = TREE_TYPE (op0a);\n \t  if (used_vec_cond_exprs >= 2\n-\t      && (get_vcond_mask_icode (mode, TYPE_MODE (op0a_type))\n+\t      && (get_vcond_mask_icode (mode, TYPE_MODE (op0_type))\n \t\t  != CODE_FOR_nothing)\n-\t      && expand_vec_cmp_expr_p (op0a_type, TREE_TYPE (lhs), tcode))\n+\t      && expand_vec_cmp_expr_p (op0a_type, op0_type, tcode))\n \t    {\n \t      /* Keep the SSA name and use vcond_mask.  */\n \t      tcode = TREE_CODE (op0);"}]}