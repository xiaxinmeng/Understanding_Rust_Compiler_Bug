{"sha": "9675a91e9b34e7f8e0ecdcad732c58f14784d465", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTY3NWE5MWU5YjM0ZTdmOGUwZWNkY2FkNzMyYzU4ZjE0Nzg0ZDQ2NQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2002-11-19T15:17:24Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2002-11-19T15:17:24Z"}, "message": "h8300.c (print_operand): Update the use of EIGHTBIT_CONSTANT_ADDRESS_P.\n\n\t* config/h8300/h8300.c (print_operand): Update the use of\n\tEIGHTBIT_CONSTANT_ADDRESS_P.\n\t(h8300_adjust_insn_length): Likewise.\n\t(h8300_eightbit_constant_address_p): Check if the given rtx is\n\ta variable with __attribute__((eightbit_data)).\n\t* config/h8300/h8300.h (OK_FOR_U): Update the use of\n\tEIGHTBIT_CONSTANT_ADDRESS_P.\n\nFrom-SVN: r59263", "tree": {"sha": "5a16dadb7e10f22c60af73c8d48a2353556e744a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a16dadb7e10f22c60af73c8d48a2353556e744a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9675a91e9b34e7f8e0ecdcad732c58f14784d465", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9675a91e9b34e7f8e0ecdcad732c58f14784d465", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9675a91e9b34e7f8e0ecdcad732c58f14784d465", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9675a91e9b34e7f8e0ecdcad732c58f14784d465/comments", "author": null, "committer": null, "parents": [{"sha": "c9a1e3d03a418394109f198d7c44e0b4a24d76eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9a1e3d03a418394109f198d7c44e0b4a24d76eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9a1e3d03a418394109f198d7c44e0b4a24d76eb"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "a4f11ed0d80c1f403bfa0e13a5e3b5c474ab00be", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9675a91e9b34e7f8e0ecdcad732c58f14784d465/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9675a91e9b34e7f8e0ecdcad732c58f14784d465/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9675a91e9b34e7f8e0ecdcad732c58f14784d465", "patch": "@@ -1,3 +1,13 @@\n+2002-11-19  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.c (print_operand): Update the use of\n+\tEIGHTBIT_CONSTANT_ADDRESS_P.\n+\t(h8300_adjust_insn_length): Likewise.\n+\t(h8300_eightbit_constant_address_p): Check if the given rtx is\n+\ta variable with __attribute__((eightbit_data)).\n+\t* config/h8300/h8300.h (OK_FOR_U): Update the use of\n+\tEIGHTBIT_CONSTANT_ADDRESS_P.\n+\n 2002-11-19  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>\n \n \t* doc/contrib.texi (Contributors): Add self as second contact in"}, {"sha": "c5bfb137fe42901c5aed170bc0964586d4300043", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9675a91e9b34e7f8e0ecdcad732c58f14784d465/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9675a91e9b34e7f8e0ecdcad732c58f14784d465/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=9675a91e9b34e7f8e0ecdcad732c58f14784d465", "patch": "@@ -1434,9 +1434,7 @@ print_operand (file, x, code)\n \tcase MEM:\n \t  {\n \t    rtx addr = XEXP (x, 0);\n-\t    int eightbit_ok = ((GET_CODE (addr) == SYMBOL_REF\n-\t\t\t\t&& SYMBOL_REF_FLAG (addr))\n-\t\t\t       || EIGHTBIT_CONSTANT_ADDRESS_P (addr));\n+\t    int eightbit_ok = EIGHTBIT_CONSTANT_ADDRESS_P (addr);\n \t    int tiny_ok = ((GET_CODE (addr) == SYMBOL_REF\n \t\t\t    && TINY_DATA_NAME_P (XSTR (addr, 0)))\n \t\t\t   || TINY_CONSTANT_ADDRESS_P (addr));\n@@ -3721,8 +3719,7 @@ h8300_adjust_insn_length (insn, length)\n \n \t  /* @aa:8 is 2 bytes shorter than the longest.  */\n \t  if (GET_MODE (SET_SRC (pat)) == QImode\n-\t      && ((GET_CODE (addr) == SYMBOL_REF && SYMBOL_REF_FLAG (addr))\n-\t\t  || EIGHTBIT_CONSTANT_ADDRESS_P (addr)))\n+\t      && EIGHTBIT_CONSTANT_ADDRESS_P (addr))\n \t    return -2;\n \t}\n       else\n@@ -3875,6 +3872,10 @@ h8300_eightbit_constant_address_p (x)\n \n   unsigned HOST_WIDE_INT addr;\n \n+  /* We accept symbols declared with eightbit_data.  */\n+  if (GET_CODE (x) == SYMBOL_REF && SYMBOL_REF_FLAG (x))\n+    return 1;\n+\n   if (GET_CODE (x) != CONST_INT)\n     return 0;\n "}, {"sha": "79898aab4e989fbee9064d5c4dd9b9da826fc50c", "filename": "gcc/config/h8300/h8300.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9675a91e9b34e7f8e0ecdcad732c58f14784d465/gcc%2Fconfig%2Fh8300%2Fh8300.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9675a91e9b34e7f8e0ecdcad732c58f14784d465/gcc%2Fconfig%2Fh8300%2Fh8300.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.h?ref=9675a91e9b34e7f8e0ecdcad732c58f14784d465", "patch": "@@ -863,7 +863,7 @@ struct cum_arg\n    || (GET_CODE (OP) == MEM && GET_CODE (XEXP (OP, 0)) == REG\t\t\\\n        && REG_OK_FOR_BASE_P (XEXP (OP, 0)))\t\t\t\t\\\n    || (GET_CODE (OP) == MEM && GET_CODE (XEXP (OP, 0)) == SYMBOL_REF\t\\\n-       && (TARGET_H8300S || SYMBOL_REF_FLAG (XEXP (OP, 0))))\t\t\\\n+       && TARGET_H8300S)\t\t\t\t\t\t\\\n    || ((GET_CODE (OP) == MEM && GET_CODE (XEXP (OP, 0)) == CONST\t\\\n         && GET_CODE (XEXP (XEXP (OP, 0), 0)) == PLUS\t\t\t\\\n         && GET_CODE (XEXP (XEXP (XEXP (OP, 0), 0), 0)) == SYMBOL_REF\t\\"}]}