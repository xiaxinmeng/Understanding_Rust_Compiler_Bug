{"sha": "b30d77c4d8698bf37710352d848cff181fdbba8a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMwZDc3YzRkODY5OGJmMzc3MTAzNTJkODQ4Y2ZmMTgxZmRiYmE4YQ==", "commit": {"author": {"name": "James E Wilson", "email": "wilson@specifixinc.com", "date": "2004-09-03T20:12:29Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2004-09-03T20:12:29Z"}, "message": "More MIPS vector cleanup work.\n\n* config/mips/mips.h (TARGET_CPU_CPP_BUILTINS): Add __mips3d.\n* config/mips/generic.md (generic_frecip_fsqrt_step): New.\n* config/mips/mips-ps-3d.md (mips_rsqrt1_<fmt>): Use frsqrt1 type.\n(mips_rsqrt2_<fmt>): Use frsqrt2 type.\n(mips_recip1_<fmt>): Use frdiv1 type.\n(mips_recip2_<fmt>): Use frdiv2 type.\n* config/mips/mips.md (type): Add frdiv1, frdiv2, frsqrt1, frsqrt2.\n* config/mips/sb1.md (ir_sb1_fpu_2pipes, ir_sb1_fpu_1pipe): Add frdiv1\nand frsqrt1.\n(ir_sb1_fpu_step2_2pipes, ir_sb1_fpu_step2_1pipe): New.\n\nFrom-SVN: r87050", "tree": {"sha": "d7dd5d5c8bd972a51c909ff90c2bcd640d2e17f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7dd5d5c8bd972a51c909ff90c2bcd640d2e17f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b30d77c4d8698bf37710352d848cff181fdbba8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30d77c4d8698bf37710352d848cff181fdbba8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b30d77c4d8698bf37710352d848cff181fdbba8a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30d77c4d8698bf37710352d848cff181fdbba8a/comments", "author": null, "committer": null, "parents": [{"sha": "87cda9d6cadaff58cbebb89bc5c0b8bd72ed1ff1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87cda9d6cadaff58cbebb89bc5c0b8bd72ed1ff1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87cda9d6cadaff58cbebb89bc5c0b8bd72ed1ff1"}], "stats": {"total": 51, "additions": 44, "deletions": 7}, "files": [{"sha": "311f24c1fc1a71f9f0ceccff00b92ab69d1a766d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b30d77c4d8698bf37710352d848cff181fdbba8a", "patch": "@@ -1,3 +1,17 @@\n+2004-09-03  James E Wilson  <wilson@specifixinc.com>\n+\n+\t* config/mips/mips.h (TARGET_CPU_CPP_BUILTINS): Add __mips3d.\n+\n+\t* config/mips/generic.md (generic_frecip_fsqrt_step): New.\n+\t* config/mips/mips-ps-3d.md (mips_rsqrt1_<fmt>): Use frsqrt1 type.\n+\t(mips_rsqrt2_<fmt>): Use frsqrt2 type.\n+\t(mips_recip1_<fmt>): Use frdiv1 type.\n+\t(mips_recip2_<fmt>): Use frdiv2 type.\n+\t* config/mips/mips.md (type): Add frdiv1, frdiv2, frsqrt1, frsqrt2.\n+\t* config/mips/sb1.md (ir_sb1_fpu_2pipes, ir_sb1_fpu_1pipe): Add frdiv1\n+\tand frsqrt1.\n+\t(ir_sb1_fpu_step2_2pipes, ir_sb1_fpu_step2_1pipe): New.\n+\n 2004-09-03  Daniel Jacobowitz  <dan@debian.org>\n \n \t* reload.c (find_reloads): Swap operand_loc pointers for"}, {"sha": "237272eb8afee094ee165eae57a02a529f65a411", "filename": "gcc/config/mips/generic.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fgeneric.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fgeneric.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fgeneric.md?ref=b30d77c4d8698bf37710352d848cff181fdbba8a", "patch": "@@ -100,3 +100,7 @@\n   (and (eq_attr \"type\" \"fsqrt,frsqrt\")\n        (eq_attr \"mode\" \"DF\"))\n   \"alu\")\n+\n+(define_insn_reservation \"generic_frecip_fsqrt_step\" 5\n+  (eq_attr \"type\" \"frdiv1,frdiv2,frsqrt1,frsqrt2\")\n+  \"alu\")"}, {"sha": "766abdc3d649d39d54ff826bbf05fe19f95abd4d", "filename": "gcc/config/mips/mips-ps-3d.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md?ref=b30d77c4d8698bf37710352d848cff181fdbba8a", "patch": "@@ -444,7 +444,7 @@\n \t\t     UNSPEC_RSQRT1))]\n   \"TARGET_MIPS3D\"\n   \"rsqrt1.<fmt>\\t%0,%1\"\n-  [(set_attr \"type\" \"frsqrt\")\n+  [(set_attr \"type\" \"frsqrt1\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n \n (define_insn \"mips_rsqrt2_<fmt>\"\n@@ -454,7 +454,7 @@\n \t\t     UNSPEC_RSQRT2))]\n   \"TARGET_MIPS3D\"\n   \"rsqrt2.<fmt>\\t%0,%1,%2\"\n-  [(set_attr \"type\" \"frsqrt\")\n+  [(set_attr \"type\" \"frsqrt2\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n \n (define_insn \"mips_recip1_<fmt>\"\n@@ -463,7 +463,7 @@\n \t\t     UNSPEC_RECIP1))]\n   \"TARGET_MIPS3D\"\n   \"recip1.<fmt>\\t%0,%1\"\n-  [(set_attr \"type\" \"frdiv\")\n+  [(set_attr \"type\" \"frdiv1\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n \n (define_insn \"mips_recip2_<fmt>\"\n@@ -473,5 +473,5 @@\n \t\t     UNSPEC_RECIP2))]\n   \"TARGET_MIPS3D\"\n   \"recip2.<fmt>\\t%0,%1,%2\"\n-  [(set_attr \"type\" \"frdiv\")\n+  [(set_attr \"type\" \"frdiv2\")\n    (set_attr \"mode\" \"<UNITMODE>\")])"}, {"sha": "8862e5816b658be02e917e3000d38009a7883eb0", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=b30d77c4d8698bf37710352d848cff181fdbba8a", "patch": "@@ -411,6 +411,9 @@ extern const struct mips_cpu_info *mips_tune_info;\n       if (TARGET_MIPS16)\t\t\t\t\t\\\n \tbuiltin_define (\"__mips16\");\t\t\t\t\\\n \t\t\t\t\t\t\t\t\\\n+      if (TARGET_MIPS3D)\t\t\t\t\t\\\n+\tbuiltin_define (\"__mips3d\");\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\\\n       MIPS_CPP_SET_PROCESSOR (\"_MIPS_ARCH\", mips_arch_info);\t\\\n       MIPS_CPP_SET_PROCESSOR (\"_MIPS_TUNE\", mips_tune_info);\t\\\n \t\t\t\t\t\t\t\t\\"}, {"sha": "54bc7c3e251e274efb5263de8b44da86de4eb701", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=b30d77c4d8698bf37710352d848cff181fdbba8a", "patch": "@@ -133,16 +133,20 @@\n ;; fmadd\tfloating point multiply-add\n ;; fdiv\t\tfloating point divide\n ;; frdiv\tfloating point reciprocal divide\n+;; frdiv1\tfloating point reciprocal divide step 1\n+;; frdiv2\tfloating point reciprocal divide step 2\n ;; fabs\t\tfloating point absolute value\n ;; fneg\t\tfloating point negation\n ;; fcmp\t\tfloating point compare\n ;; fcvt\t\tfloating point convert\n ;; fsqrt\tfloating point square root\n ;; frsqrt       floating point reciprocal square root\n+;; frsqrt1      floating point reciprocal square root step1\n+;; frsqrt2      floating point reciprocal square root step2\n ;; multi\tmultiword sequence (or user asm statements)\n ;; nop\t\tno operation\n (define_attr \"type\"\n-  \"unknown,branch,jump,call,load,fpload,fpidxload,store,fpstore,fpidxstore,prefetch,prefetchx,condmove,xfer,mthilo,mfhilo,const,arith,shift,slt,clz,trap,imul,imadd,idiv,fmove,fadd,fmul,fmadd,fdiv,frdiv,fabs,fneg,fcmp,fcvt,fsqrt,frsqrt,multi,nop\"\n+  \"unknown,branch,jump,call,load,fpload,fpidxload,store,fpstore,fpidxstore,prefetch,prefetchx,condmove,xfer,mthilo,mfhilo,const,arith,shift,slt,clz,trap,imul,imadd,idiv,fmove,fadd,fmul,fmadd,fdiv,frdiv,frdiv1,frdiv2,fabs,fneg,fcmp,fcvt,fsqrt,frsqrt,frsqrt1,frsqrt2,multi,nop\"\n   (cond [(eq_attr \"jal\" \"!unset\") (const_string \"call\")\n \t (eq_attr \"got\" \"load\") (const_string \"load\")]\n \t(const_string \"unknown\")))"}, {"sha": "3ab033302fd1127ebea56c947a92f02088f6668f", "filename": "gcc/config/mips/sb1.md", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fsb1.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30d77c4d8698bf37710352d848cff181fdbba8a/gcc%2Fconfig%2Fmips%2Fsb1.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fsb1.md?ref=b30d77c4d8698bf37710352d848cff181fdbba8a", "patch": "@@ -353,13 +353,25 @@\n \n (define_insn_reservation \"ir_sb1_fpu_2pipes\" 4\n   (and (eq_attr \"cpu\" \"sb1\")\n-       (and (eq_attr \"type\" \"fmove,fadd,fmul,fabs,fneg,fcvt\")\n+       (and (eq_attr \"type\" \"fmove,fadd,fmul,fabs,fneg,fcvt,frdiv1,frsqrt1\")\n \t    (eq_attr \"sb1_fp_pipes\" \"two\")))\n   \"sb1_fp1 | sb1_fp0\")\n \n (define_insn_reservation \"ir_sb1_fpu_1pipe\" 4\n   (and (eq_attr \"cpu\" \"sb1\")\n-       (and (eq_attr \"type\" \"fmove,fadd,fmul,fabs,fneg,fcvt\")\n+       (and (eq_attr \"type\" \"fmove,fadd,fmul,fabs,fneg,fcvt,frdiv1,frsqrt1\")\n+\t    (eq_attr \"sb1_fp_pipes\" \"one\")))\n+  \"sb1_fp1\")\n+\n+(define_insn_reservation \"ir_sb1_fpu_step2_2pipes\" 8\n+  (and (eq_attr \"cpu\" \"sb1\")\n+       (and (eq_attr \"type\" \"frdiv2,frsqrt2\")\n+\t    (eq_attr \"sb1_fp_pipes\" \"two\")))\n+  \"sb1_fp1 | sb1_fp0\")\n+\n+(define_insn_reservation \"ir_sb1_fpu_step2_1pipe\" 8\n+  (and (eq_attr \"cpu\" \"sb1\")\n+       (and (eq_attr \"type\" \"frdiv2,frsqrt2\")\n \t    (eq_attr \"sb1_fp_pipes\" \"one\")))\n   \"sb1_fp1\")\n "}]}