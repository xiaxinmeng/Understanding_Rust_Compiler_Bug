{"sha": "dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGVhNjBiNTkwY2NmODk2OGI1YjY1MWVkZGZjMjVkZGYzMjI2YzhhMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-05-03T11:38:38Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-05-03T11:38:38Z"}, "message": "re PR tree-optimization/70916 (gcc ICE at -O3 on valid code on x86_64-linux-gnu in \"tree_operand_check\")\n\n\tPR tree-optimization/70916\n\t* tree-vect-patterns.c (vect_recog_mask_conversion_pattern): Give up\n\tif COND_EXPR rhs1 is neither SSA_NAME nor COMPARISON_CLASS_P.\n\n\t* gcc.c-torture/compile/pr70916.c: New test.\n\nFrom-SVN: r235814", "tree": {"sha": "3459d718336d1ebc25505364e09c63567058e8b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3459d718336d1ebc25505364e09c63567058e8b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "adedd5c173388ae505470df152b9cb3947339566", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adedd5c173388ae505470df152b9cb3947339566", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adedd5c173388ae505470df152b9cb3947339566"}], "stats": {"total": 39, "additions": 38, "deletions": 1}, "files": [{"sha": "83760681c0de0691ebabb167ae04cf8b98622514", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "patch": "@@ -1,5 +1,9 @@\n 2016-05-03  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/70916\n+\t* tree-vect-patterns.c (vect_recog_mask_conversion_pattern): Give up\n+\tif COND_EXPR rhs1 is neither SSA_NAME nor COMPARISON_CLASS_P.\n+\n \tPR target/49244\n \t* tree-ssa-ccp.c: Include stor-layout.h and optabs-query.h.\n \t(optimize_atomic_bit_test_and): New function."}, {"sha": "0941f39afa5d7a226d7d63451801c8f583a3370a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "patch": "@@ -1,5 +1,8 @@\n 2016-05-03  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/70916\n+\t* gcc.c-torture/compile/pr70916.c: New test.\n+\n \tPR target/49244\n \t* gcc.target/i386/pr49244-1.c: New test.\n \t* gcc.target/i386/pr49244-2.c: New test."}, {"sha": "c3ea69fba9bcd19e5cb902f9429e693df0686509", "filename": "gcc/testsuite/gcc.c-torture/compile/pr70916.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr70916.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr70916.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr70916.c?ref=dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "patch": "@@ -0,0 +1,28 @@\n+/* PR tree-optimization/70916 */\n+\n+int a, b, c, d, i, k;\n+int static *e = &b, *j;\n+int **f;\n+int static ***g = &f;\n+int *h;\n+void\n+fn1 ()\n+{\n+  for (;;)\n+    {\n+      int l[1] = { };\n+      int m = (__UINTPTR_TYPE__) l;\n+      for (; d; d--)\n+\t{\n+\t  int ****n;\n+\t  int *****o = &n;\n+\t  i = a & 7 ? : a;\n+\t  *e = (((*o = &g) != (int ****) g) < h[c], 0) || k;\n+\t  if (*e)\n+\t    {\n+\t      **n = &j;\n+\t      *e = (__UINTPTR_TYPE__) h;\n+\t    }\n+\t}\n+    }\n+}"}, {"sha": "d08b45477568dec2bf291ee8c271b42d29585533", "filename": "gcc/tree-vect-patterns.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2Ftree-vect-patterns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dea60b590ccf8968b5b651eddfc25ddf3226c8a1/gcc%2Ftree-vect-patterns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-patterns.c?ref=dea60b590ccf8968b5b651eddfc25ddf3226c8a1", "patch": "@@ -3673,8 +3673,10 @@ vect_recog_mask_conversion_pattern (vec<gimple *> *stmts, tree *type_in,\n \t  if (!rhs1_type)\n \t    return NULL;\n \t}\n-      else\n+      else if (COMPARISON_CLASS_P (rhs1))\n \trhs1_type = TREE_TYPE (TREE_OPERAND (rhs1, 0));\n+      else\n+\treturn NULL;\n \n       vectype2 = get_mask_type_for_scalar_type (rhs1_type);\n "}]}