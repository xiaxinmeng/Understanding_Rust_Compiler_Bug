{"sha": "3ab68120e2c7f48ff4de37f103800d0a2385d31c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FiNjgxMjBlMmM3ZjQ4ZmY0ZGUzN2YxMDM4MDBkMGEyMzg1ZDMxYw==", "commit": {"author": {"name": "Devang Patel", "email": "dpatel@gcc.gnu.org", "date": "2002-12-19T23:46:49Z"}, "committer": {"name": "Devang Patel", "email": "dpatel@gcc.gnu.org", "date": "2002-12-19T23:46:49Z"}, "message": "Add support for darwin linker option -dynamic.\n\nFrom-SVN: r60341", "tree": {"sha": "2f5dbeda7efb4dbc70659b7100dee20daf5c1fc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f5dbeda7efb4dbc70659b7100dee20daf5c1fc1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ab68120e2c7f48ff4de37f103800d0a2385d31c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ab68120e2c7f48ff4de37f103800d0a2385d31c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ab68120e2c7f48ff4de37f103800d0a2385d31c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ab68120e2c7f48ff4de37f103800d0a2385d31c/comments", "author": null, "committer": null, "parents": [{"sha": "b2dfd40f472d34141d32e9062e3553f1e8a9e3e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2dfd40f472d34141d32e9062e3553f1e8a9e3e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2dfd40f472d34141d32e9062e3553f1e8a9e3e5"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "88efab4a4cfdcc2d7ef0a004932d345b739aada9", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ab68120e2c7f48ff4de37f103800d0a2385d31c/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ab68120e2c7f48ff4de37f103800d0a2385d31c/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=3ab68120e2c7f48ff4de37f103800d0a2385d31c", "patch": "@@ -100,7 +100,6 @@ Boston, MA 02111-1307, USA.  */\n    name, that also takes an argument, needs to be modified so the\n    prefix is different, otherwise a '*' after the shorter option will\n    match with the longer one.  */\n-/* Ignore -dynamic for now */\n #define TARGET_OPTION_TRANSLATE_TABLE \\\n   { \"-all_load\", \"-Zall_load\" },  \\\n   { \"-allowable_client\", \"-Zallowable_client\" },  \\\n@@ -111,7 +110,7 @@ Boston, MA 02111-1307, USA.  */\n   { \"-weak_reference_mismatches\", \"-Zweak_reference_mismatches\" },  \\\n   { \"-dependency-file\", \"-MF\" }, \\\n   { \"-dylib_file\", \"-Zdylib_file\" }, \\\n-  { \"-dynamic\", \" \" },  \\\n+  { \"-dynamic\", \"-Zdynamic\" },  \\\n   { \"-dynamiclib\", \"-Zdynamiclib\" },  \\\n   { \"-exported_symbols_list\", \"-Zexported_symbols_list\" },  \\\n   { \"-seg_addr_table_filename\", \"-Zseg_addr_table_filename\" }, \\\n@@ -174,7 +173,7 @@ Boston, MA 02111-1307, USA.  */\n /* Machine dependent cpp options.  */\n \n #undef\tCPP_SPEC\n-#define CPP_SPEC \"%{static:-D__STATIC__}%{!static:-D__DYNAMIC__}\"\n+#define CPP_SPEC \"%{static:%{!dynamic:-D__STATIC__}}%{!static:-D__DYNAMIC__}\"\n \n /* This is mostly a clone of the standard LINK_COMMAND_SPEC, plus\n    precomp, libtool, and fat build additions.  Also we\n@@ -234,6 +233,7 @@ Boston, MA 02111-1307, USA.  */\n    %{Zbind_at_load:-bind_at_load} \\\n    %{Zarch_errors_fatal:-arch_errors_fatal} \\\n    %{Zdylib_file*:-dylib_file %*} \\\n+   %{Zdynamic:-dynamic}\\\n    %{Zexported_symbols_list*:-exported_symbols_list %*} \\\n    %{Zflat_namespace:-flat_namespace} \\\n    %{headerpad_max_install_names*} \\"}, {"sha": "b3468f2b66b69176a738befa6f3c71e92dd46435", "filename": "gcc/config/rs6000/darwin.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ab68120e2c7f48ff4de37f103800d0a2385d31c/gcc%2Fconfig%2Frs6000%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ab68120e2c7f48ff4de37f103800d0a2385d31c/gcc%2Fconfig%2Frs6000%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fdarwin.h?ref=3ab68120e2c7f48ff4de37f103800d0a2385d31c", "patch": "@@ -58,7 +58,9 @@ Boston, MA 02111-1307, USA.  */\n /* We want -fPIC by default, unless we're using -static to compile for\n    the kernel or some such.  */\n \n-#define CC1_SPEC \"%{!static:-fPIC}\"\n+#define CC1_SPEC \"\\\n+%{static: %{Zdynamic: %e conflicting code gen style switches are used}}\\\n+%{!static:-fPIC}\"\n \n /* Make both r2 and r3 available for allocation.  */\n #define FIXED_R2 0"}, {"sha": "0540f92bcbb54e87adb2a6b11d2f0092be07f079", "filename": "gcc/testsuite/gcc.dg/darwin-ld-5.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ab68120e2c7f48ff4de37f103800d0a2385d31c/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-ld-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ab68120e2c7f48ff4de37f103800d0a2385d31c/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-ld-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-ld-5.c?ref=3ab68120e2c7f48ff4de37f103800d0a2385d31c", "patch": "@@ -1,7 +1,7 @@\n-/* Test Darwin linker option -bundle_loader.  */\n+/* Test Darwin linker option -dynamic.  */\n /* Developed by Devang Patel <dpatel@apple.com>.  */\n \n-/* { dg-options \"-bundle -bundle_loader foo\" } */\n+/* { dg-options \"-dynamic\" } */\n /* { dg-do link { target *-*-darwin* } } */\n \n int main()"}]}