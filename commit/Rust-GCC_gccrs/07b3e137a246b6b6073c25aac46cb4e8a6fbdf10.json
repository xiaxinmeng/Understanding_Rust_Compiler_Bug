{"sha": "07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDdiM2UxMzdhMjQ2YjZiNjA3M2MyNWFhYzQ2Y2I0ZThhNmZiZGYxMA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2017-01-06T11:01:21Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2017-01-06T11:01:21Z"}, "message": "[multiple changes]\n\n2017-01-06  Tristan Gingold  <gingold@adacore.com>\n\n\t* s-rident.ads (Profile_Info): Remove No_Entry_Queue from\n\tGnat_Extended_Ravenscar.\n\t* exp_ch9.adb, s-tpoben.adb, s-tpoben.ads: Fix spelling.\n\n2017-01-06  Gary Dismukes  <dismukes@adacore.com>\n\n\t* sem_util.ads: Minor typo fix and reformatting.\n\nFrom-SVN: r244130", "tree": {"sha": "babc2f9a77ec67cf7622f6a5ebf6f71a10aa1aba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/babc2f9a77ec67cf7622f6a5ebf6f71a10aa1aba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/comments", "author": null, "committer": null, "parents": [{"sha": "ac8380d5d8e2d9b4a82f000b5d95165124a73a95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac8380d5d8e2d9b4a82f000b5d95165124a73a95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac8380d5d8e2d9b4a82f000b5d95165124a73a95"}], "stats": {"total": 102, "additions": 56, "deletions": 46}, "files": [{"sha": "ee3603d6116de65611f16da4046a4e28878fd419", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "patch": "@@ -1,3 +1,13 @@\n+2017-01-06  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* s-rident.ads (Profile_Info): Remove No_Entry_Queue from\n+\tGnat_Extended_Ravenscar.\n+\t* exp_ch9.adb, s-tpoben.adb, s-tpoben.ads: Fix spelling.\n+\n+2017-01-06  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* sem_util.ads: Minor typo fix and reformatting.\n+\n 2017-01-06  Yannick Moy  <moy@adacore.com>\n \n \t* ghost.adb Minor fixing of references to SPARK RM."}, {"sha": "a7dd4db71bed523e2c59826bbc1961776e89d8de", "filename": "gcc/ada/exp_ch9.adb", "status": "modified", "additions": 19, "deletions": 18, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fexp_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fexp_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch9.adb?ref=07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "patch": "@@ -9769,22 +9769,23 @@ package body Exp_Ch9 is\n \n       if Has_Entries (Prot_Typ) then\n          declare\n-            Need_Array : Boolean := False;\n-            Maxs       : List_Id;\n             Count      : Int;\n             Item       : Entity_Id;\n-            Maxs_Id    : Entity_Id;\n             Max_Vals   : Node_Id;\n+            Maxes      : List_Id;\n+            Maxes_Id   : Entity_Id;\n+            Need_Array : Boolean := False;\n \n          begin\n             --  First check if there is any Max_Queue_Length pragma\n \n-            Item  := First_Entity (Prot_Typ);\n+            Item := First_Entity (Prot_Typ);\n             while Present (Item) loop\n                if Is_Entry (Item) and then Has_Max_Queue_Length (Item) then\n                   Need_Array := True;\n                   exit;\n                end if;\n+\n                Next_Entity (Item);\n             end loop;\n \n@@ -9793,32 +9794,32 @@ package body Exp_Ch9 is\n             --  queue length.\n \n             if Need_Array then\n-               Maxs := New_List;\n                Count := 0;\n                Item  := First_Entity (Prot_Typ);\n+               Maxes := New_List;\n                while Present (Item) loop\n                   if Is_Entry (Item) then\n                      Count := Count + 1;\n-                     Append_To (Maxs,\n-                        Make_Integer_Literal (Loc,\n-                           Get_Max_Queue_Length (Item)));\n+                     Append_To (Maxes,\n+                       Make_Integer_Literal\n+                         (Loc, Get_Max_Queue_Length (Item)));\n                   end if;\n \n                   Next_Entity (Item);\n                end loop;\n \n                --  Create the declaration of the array object. Generate:\n \n-               --    Maxs_Id : aliased Protected_Entry_Queue_Max_Array\n-               --                        (1 .. Count) := (..., ...);\n+               --    Maxes_Id : aliased Protected_Entry_Queue_Max_Array\n+               --                         (1 .. Count) := (..., ...);\n \n-               Maxs_Id :=\n+               Maxes_Id :=\n                  Make_Defining_Identifier (Loc,\n                    Chars => New_External_Name (Chars (Prot_Typ), 'B'));\n \n                Max_Vals :=\n                  Make_Object_Declaration (Loc,\n-                   Defining_Identifier => Maxs_Id,\n+                   Defining_Identifier => Maxes_Id,\n                    Aliased_Present     => True,\n                    Constant_Present    => True,\n                    Object_Definition   =>\n@@ -9832,17 +9833,17 @@ package body Exp_Ch9 is\n                              Make_Range (Loc,\n                                Make_Integer_Literal (Loc, 1),\n                                Make_Integer_Literal (Loc, Count))))),\n-                   Expression          => Make_Aggregate (Loc, Maxs));\n+                   Expression          => Make_Aggregate (Loc, Maxes));\n \n-               --  A pointer to this array will be placed in the\n-               --  corresponding record by its initialization procedure so\n-               --  this needs to be analyzed here.\n+               --  A pointer to this array will be placed in the corresponding\n+               --  record by its initialization procedure so this needs to be\n+               --  analyzed here.\n \n                Insert_After (Current_Node, Max_Vals);\n                Current_Node := Max_Vals;\n                Analyze (Max_Vals);\n \n-               Set_Entry_Max_Queue_Lengths_Array (Prot_Typ, Maxs_Id);\n+               Set_Entry_Max_Queue_Lengths_Array (Prot_Typ, Maxes_Id);\n             end if;\n          end;\n       end if;\n@@ -14192,7 +14193,7 @@ package body Exp_Ch9 is\n                      raise Program_Error;\n             end case;\n \n-            --  Entry_Queue_Maxs parameter. This is an access to an array of\n+            --  Entry_Queue_Maxes parameter. This is an access to an array of\n             --  naturals representing the entry queue maximums for each entry\n             --  in the protected type. Zero represents no max. The access is\n             --  null if there is no limit for all entries (usual case)."}, {"sha": "beb42f8fc564ac71cb739140021f0ae102d85b9b", "filename": "gcc/ada/s-rident.ads", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fs-rident.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fs-rident.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-rident.ads?ref=07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "patch": "@@ -554,7 +554,6 @@ package System.Rident is\n                            No_Asynchronous_Control         => True,\n                            No_Dynamic_Attachment           => True,\n                            No_Dynamic_Priorities           => True,\n-                           No_Entry_Queue                  => True,\n                            No_Local_Protected_Objects      => True,\n                            No_Protected_Type_Allocators    => True,\n                            No_Requeue_Statements           => True,"}, {"sha": "79f425e13954a14fce077ceace5316efb02838f3", "filename": "gcc/ada/s-tpoben.adb", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fs-tpoben.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fs-tpoben.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-tpoben.adb?ref=07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "patch": "@@ -171,12 +171,12 @@ package body System.Tasking.Protected_Objects.Entries is\n    -----------------------------------\n \n    procedure Initialize_Protection_Entries\n-     (Object           : Protection_Entries_Access;\n-      Ceiling_Priority : Integer;\n-      Compiler_Info    : System.Address;\n-      Entry_Queue_Maxs : Protected_Entry_Queue_Max_Access;\n-      Entry_Bodies     : Protected_Entry_Body_Access;\n-      Find_Body_Index  : Find_Body_Index_Access)\n+     (Object            : Protection_Entries_Access;\n+      Ceiling_Priority  : Integer;\n+      Compiler_Info     : System.Address;\n+      Entry_Queue_Maxes : Protected_Entry_Queue_Max_Access;\n+      Entry_Bodies      : Protected_Entry_Body_Access;\n+      Find_Body_Index   : Find_Body_Index_Access)\n    is\n       Init_Priority : Integer := Ceiling_Priority;\n       Self_ID       : constant Task_Id := STPO.Self;\n@@ -206,15 +206,15 @@ package body System.Tasking.Protected_Objects.Entries is\n       Initialize_Lock (Init_Priority, Object.L'Access);\n       Initialization.Undefer_Abort_Nestable (Self_ID);\n \n-      Object.Ceiling          := System.Any_Priority (Init_Priority);\n-      Object.New_Ceiling      := System.Any_Priority (Init_Priority);\n-      Object.Owner            := Null_Task;\n-      Object.Compiler_Info    := Compiler_Info;\n-      Object.Pending_Action   := False;\n-      Object.Call_In_Progress := null;\n-      Object.Entry_Queue_Maxs := Entry_Queue_Maxs;\n-      Object.Entry_Bodies     := Entry_Bodies;\n-      Object.Find_Body_Index  := Find_Body_Index;\n+      Object.Ceiling           := System.Any_Priority (Init_Priority);\n+      Object.New_Ceiling       := System.Any_Priority (Init_Priority);\n+      Object.Owner             := Null_Task;\n+      Object.Compiler_Info     := Compiler_Info;\n+      Object.Pending_Action    := False;\n+      Object.Call_In_Progress  := null;\n+      Object.Entry_Queue_Maxes := Entry_Queue_Maxes;\n+      Object.Entry_Bodies      := Entry_Bodies;\n+      Object.Find_Body_Index   := Find_Body_Index;\n \n       for E in Object.Entry_Queues'Range loop\n          Object.Entry_Queues (E).Head := null;"}, {"sha": "d069ebc58664b0af0aa736470c4b1b46d7eeedbc", "filename": "gcc/ada/s-tpoben.ads", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fs-tpoben.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fs-tpoben.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-tpoben.ads?ref=07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "patch": "@@ -150,9 +150,9 @@ package System.Tasking.Protected_Objects.Entries is\n \n       Entry_Queues : Protected_Entry_Queue_Array (1 .. Num_Entries);\n \n-      Entry_Queue_Maxs : Protected_Entry_Queue_Max_Access;\n-      --  Access to an array of naturals representing the max value for\n-      --  each entry's queue length. A value of 0 signifies no max.\n+      Entry_Queue_Maxes : Protected_Entry_Queue_Max_Access;\n+      --  Access to an array of naturals representing the max value for each\n+      --  entry's queue length. A value of 0 signifies no max.\n \n       Entry_Names : Protected_Entry_Names_Access := null;\n       --  An array of string names which denotes entry [family member] names.\n@@ -185,12 +185,12 @@ package System.Tasking.Protected_Objects.Entries is\n    --  System.Tasking.Protected_Objects.Initialize_Protection.\n \n    procedure Initialize_Protection_Entries\n-     (Object           : Protection_Entries_Access;\n-      Ceiling_Priority : Integer;\n-      Compiler_Info    : System.Address;\n-      Entry_Queue_Maxs : Protected_Entry_Queue_Max_Access;\n-      Entry_Bodies     : Protected_Entry_Body_Access;\n-      Find_Body_Index  : Find_Body_Index_Access);\n+     (Object            : Protection_Entries_Access;\n+      Ceiling_Priority  : Integer;\n+      Compiler_Info     : System.Address;\n+      Entry_Queue_Maxes : Protected_Entry_Queue_Max_Access;\n+      Entry_Bodies      : Protected_Entry_Body_Access;\n+      Find_Body_Index   : Find_Body_Index_Access);\n    --  Initialize the Object parameter so that it can be used by the runtime\n    --  to keep track of the runtime state of a protected object.\n "}, {"sha": "92503fed407085315e366430d49e3282aa760046", "filename": "gcc/ada/sem_util.ads", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fsem_util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07b3e137a246b6b6073c25aac46cb4e8a6fbdf10/gcc%2Fada%2Fsem_util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.ads?ref=07b3e137a246b6b6073c25aac46cb4e8a6fbdf10", "patch": "@@ -2345,11 +2345,11 @@ package Sem_Util is\n    --  views of the same entity have the same unique defining entity:\n    --    * entry declaration and entry body\n    --    * package spec, package body, and package body stub\n-   --    * protected type declaration, protected body and protected body stub\n+   --    * protected type declaration, protected body, and protected body stub\n    --    * private view and full view of a deferred constant\n    --    * private view and full view of a type\n-   --    * subprogram declaration, subprogram and subprogram body stub\n-   --    * task type declaration, task body and task body stub\n+   --    * subprogram declaration, subprogram, and subprogram body stub\n+   --    * task type declaration, task body, and task body stub\n    --  In other cases, return the defining entity for N.\n \n    function Unique_Entity (E : Entity_Id) return Entity_Id;"}]}