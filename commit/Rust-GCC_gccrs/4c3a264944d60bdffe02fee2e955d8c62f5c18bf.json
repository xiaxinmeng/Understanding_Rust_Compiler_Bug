{"sha": "4c3a264944d60bdffe02fee2e955d8c62f5c18bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGMzYTI2NDk0NGQ2MGJkZmZlMDJmZWUyZTk1NWQ4YzYyZjVjMThiZg==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.co.uk", "date": "2000-10-28T19:36:04Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2000-10-28T19:36:04Z"}, "message": "Never set reload_override_in for optional reloads.\n\nFrom-SVN: r37103", "tree": {"sha": "8fa2ed45b53c76593168ff3146bcd5bb17ba6a54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8fa2ed45b53c76593168ff3146bcd5bb17ba6a54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c3a264944d60bdffe02fee2e955d8c62f5c18bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c3a264944d60bdffe02fee2e955d8c62f5c18bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c3a264944d60bdffe02fee2e955d8c62f5c18bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c3a264944d60bdffe02fee2e955d8c62f5c18bf/comments", "author": null, "committer": null, "parents": [{"sha": "69add2a8a5e947cafdfc26ea3f8c3f708fc3f093", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69add2a8a5e947cafdfc26ea3f8c3f708fc3f093", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69add2a8a5e947cafdfc26ea3f8c3f708fc3f093"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "755ad30eb114685e85daf04acef9af2319eb2f45", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c3a264944d60bdffe02fee2e955d8c62f5c18bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c3a264944d60bdffe02fee2e955d8c62f5c18bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4c3a264944d60bdffe02fee2e955d8c62f5c18bf", "patch": "@@ -3,6 +3,8 @@\n \t* reload.c (find_reloads): Distinguish \"wins\" so that we know whether\n \ta given operand won because of a matching constraint or not; then use\n \tthat information to compute goal_alternative_matched properly.\n+\t* reload1.c (choose_reload_regs): Never set reload_override_in for an\n+\toptional reload.\n \n 2000-10-28  Neil Booth  <neilb@earthling.net>\n "}, {"sha": "66c98f545953fd38a1a8584757f01b5fbc1493ad", "filename": "gcc/reload1.c", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c3a264944d60bdffe02fee2e955d8c62f5c18bf/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c3a264944d60bdffe02fee2e955d8c62f5c18bf/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=4c3a264944d60bdffe02fee2e955d8c62f5c18bf", "patch": "@@ -5417,9 +5417,12 @@ choose_reload_regs (chain)\n \t\t\t      || (rld[r].out && rld[r].reg_rtx\n \t\t\t\t  && rtx_equal_p (rld[r].out, rld[r].reg_rtx)))\n \t\t\t    {\n-\t\t\t      reload_override_in[r] = last_reg;\n-\t\t\t      reload_inheritance_insn[r]\n-\t\t\t\t= reg_reloaded_insn[i];\n+\t\t\t      if (! rld[r].optional)\n+\t\t\t\t{\n+\t\t\t\t  reload_override_in[r] = last_reg;\n+\t\t\t\t  reload_inheritance_insn[r]\n+\t\t\t\t    = reg_reloaded_insn[i];\n+\t\t\t\t}\n \t\t\t    }\n \t\t\t  else\n \t\t\t    {\n@@ -5518,7 +5521,8 @@ choose_reload_regs (chain)\n \t\t  if (reg_overlap_mentioned_for_reload_p (equiv,\n \t\t\t\t\t\t\t  reload_earlyclobbers[i]))\n \t\t    {\n-\t\t      reload_override_in[r] = equiv;\n+\t\t      if (! rld[r].optional)\n+\t\t\treload_override_in[r] = equiv;\n \t\t      equiv = 0;\n \t\t      break;\n \t\t    }\n@@ -5541,7 +5545,8 @@ choose_reload_regs (chain)\n \t\t    case RELOAD_OTHER:\n \t\t    case RELOAD_FOR_INPUT:\n \t\t    case RELOAD_FOR_OPERAND_ADDRESS:\n-\t\t      reload_override_in[r] = equiv;\n+\t\t      if (! rld[r].optional)\n+\t\t\treload_override_in[r] = equiv;\n \t\t      /* Fall through.  */\n \t\t    default:\n \t\t      equiv = 0;"}]}