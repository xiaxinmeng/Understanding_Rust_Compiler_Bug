{"sha": "c9f4aa9767727934160c65b63ec69b88e93ec062", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzlmNGFhOTc2NzcyNzkzNDE2MGM2NWI2M2VjNjliODhlOTNlYzA2Mg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-05-29T19:33:43Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-05-29T19:33:43Z"}, "message": "re PR fortran/27634 (formatted reading/writing: real format without dot)\n\n2006-05-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/27634\n\t* io.c (check_format): Add error for missing period in format\n\tspecifier unless -std=legacy.\n\t* gfortran.texi: Add description of expanded namelist read and\n\tmissing period in format extensions.\n\nFrom-SVN: r114213", "tree": {"sha": "d4fabd6c87691525698809329a4aadac6be67a39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d4fabd6c87691525698809329a4aadac6be67a39"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9f4aa9767727934160c65b63ec69b88e93ec062", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9f4aa9767727934160c65b63ec69b88e93ec062", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9f4aa9767727934160c65b63ec69b88e93ec062", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9f4aa9767727934160c65b63ec69b88e93ec062/comments", "author": null, "committer": null, "parents": [{"sha": "a7a8dddd9946fcdba42bc4a65956c8c575a36db5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7a8dddd9946fcdba42bc4a65956c8c575a36db5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7a8dddd9946fcdba42bc4a65956c8c575a36db5"}], "stats": {"total": 54, "additions": 48, "deletions": 6}, "files": [{"sha": "701f236f1095a3784a75079221dca3b39156dc9f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9f4aa9767727934160c65b63ec69b88e93ec062/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9f4aa9767727934160c65b63ec69b88e93ec062/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c9f4aa9767727934160c65b63ec69b88e93ec062", "patch": "@@ -1,3 +1,11 @@\n+2006-05-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/27634\n+\t* io.c (check_format): Add error for missing period in format\n+\tspecifier unless -std=legacy.\n+\t* gfortran.texi: Add description of expanded namelist read and\n+\tmissing period in format extensions.\n+\n 2006-05-29  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \tPR fortran/19777"}, {"sha": "bfafbfc09e0f0d6c82a41911cb98f1cf18137f5f", "filename": "gcc/fortran/gfortran.texi", "status": "modified", "additions": 26, "deletions": 1, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9f4aa9767727934160c65b63ec69b88e93ec062/gcc%2Ffortran%2Fgfortran.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9f4aa9767727934160c65b63ec69b88e93ec062/gcc%2Ffortran%2Fgfortran.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.texi?ref=c9f4aa9767727934160c65b63ec69b88e93ec062", "patch": "@@ -607,7 +607,7 @@ this is also missing, the default is @file{/tmp}.\n @node GFORTRAN_UNBUFFERED_ALL\n @section @env{GFORTRAN_UNBUFFERED_ALL}---Don't buffer output\n \n-This environment variable controls wether all output is unbuffered.\n+This environment variable controls whether all output is unbuffered.\n If the first letter is @samp{y}, @samp{Y} or @samp{1}, all output is\n unbuffered. This will slow down large writes.  If the first letter is\n @samp{n}, @samp{N}  or @samp{0}, output is buffered.  This is the\n@@ -743,6 +743,7 @@ of extensions, and @option{-std=legacy} allows both without warning.\n * Extensions to namelist::\n * X format descriptor::\n * Commas in FORMAT specifications::\n+* Missing period in FORMAT specifications::\n * I/O item lists::\n * Hexadecimal constants::\n * Real array indices::\n@@ -857,6 +858,15 @@ PROGRAM test_print\n END PROGRAM test_print\n @end smallexample\n \n+Expanded namelist reads are permitted.  This causes an error if -std=f95\n+is used.  In the following example, the first element of the array will be\n+given the value 0.00 and succeeding elements will be 1.00 and 2.00.\n+@smallexample\n+&MYNML\n+  X(1,1) = 0.00 , 1.00 , 2.00\n+/\n+@end smallexample\n+\n @node X format descriptor\n @section X format descriptor\n @cindex X format descriptor\n@@ -883,6 +893,21 @@ descriptors in FORMAT statements.\n 10     FORMAT ('FOO='I1' BAR='I2)\n @end smallexample\n \n+\n+@node Missing period in FORMAT specifications\n+@section Missing period in FORMAT specifications\n+@cindex Missing period in FORMAT specifications\n+\n+To support legacy codes, @command{gfortran} allows missing periods in format\n+specifications if and only if -std=legacy is given on the command line.  This\n+is considered non-conforming code and is discouraged.\n+\n+@smallexample\n+       REAL :: value\n+       READ(*,10) value\n+10     FORMAT ('F4')\n+@end smallexample\n+\n @node I/O item lists\n @section I/O item lists\n @cindex I/O item lists"}, {"sha": "aab5d39dc34ea21d1082c7a2813ed518052e6e09", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9f4aa9767727934160c65b63ec69b88e93ec062/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9f4aa9767727934160c65b63ec69b88e93ec062/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=c9f4aa9767727934160c65b63ec69b88e93ec062", "patch": "@@ -413,7 +413,6 @@ static try\n check_format (void)\n {\n   const char *posint_required\t  = _(\"Positive width required\");\n-  const char *period_required\t  = _(\"Period required\");\n   const char *nonneg_required\t  = _(\"Nonnegative width required\");\n   const char *unexpected_element  = _(\"Unexpected element\");\n   const char *unexpected_end\t  = _(\"Unexpected end of format string\");\n@@ -610,8 +609,13 @@ check_format (void)\n       u = format_lex ();\n       if (u != FMT_PERIOD)\n \t{\n-\t  error = period_required;\n-\t  goto syntax;\n+\t  /* Warn if -std=legacy, otherwise error.  */\n+\t  if (gfc_option.warn_std != 0)\n+\t    gfc_error_now (\"Period required in format specifier at %C\");\n+\t  else\n+\t    gfc_warning (\"Period required in format specifier at %C\");\n+\t  saved_token = u;\n+\t  break;\n \t}\n \n       u = format_lex ();\n@@ -653,8 +657,13 @@ check_format (void)\n       t = format_lex ();\n       if (t != FMT_PERIOD)\n \t{\n-\t  error = period_required;\n-\t  goto syntax;\n+\t  /* Warn if -std=legacy, otherwise error.  */\n+          if (gfc_option.warn_std != 0)\n+\t    gfc_error_now (\"Period required in format specifier at %C\");\n+\t  else\n+\t    gfc_warning (\"Period required in format specifier at %C\");\n+\t  saved_token = t;\n+\t  break;\n \t}\n \n       t = format_lex ();"}]}