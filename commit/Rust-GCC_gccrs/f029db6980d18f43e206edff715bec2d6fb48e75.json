{"sha": "f029db6980d18f43e206edff715bec2d6fb48e75", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjAyOWRiNjk4MGQxOGY0M2UyMDZlZGZmNzE1YmVjMmQ2ZmI0OGU3NQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-07-03T19:34:30Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-07-03T19:34:30Z"}, "message": "timevar.def (TV_OUT_OF_SSA, [...]): New timevars.\n\n\n\t* timevar.def (TV_OUT_OF_SSA, TV_VAR_EXPAND, TV_POST_EXPAND,\n\tTV_VAR_TRACKING_DATAFLOW, TV_VAR_TRACKING_EMIT): New timevars.\n\t* cfgexpand.c (gimple_expand_cfg): Use new timevars.\n\t* var-tracking.c (vt_find_locations, variable_tracking_main_1):\n\tLikewise.\n\n\t* lto-stramer-out.c (pass_ipa_lto_gimple_out, pass_ipa_lto_finish_out):\n\tUpdate timevars.V\n\t* timevar.def (TV_IPA_LTO_GIMPLE_IO, TV_IPA_LTO_DECL_IO): Remove.\n\t(TV_IPA_LTO_GIMPLE_IN, TV_IPA_LTO_GIMPLE_OUT, TV_IPA_LTO_DECL_IN,\n\tTV_IPA_LTO_DECL_OUT): New.\n\t* lto.c (read_cgraph_and_symbols, materialize_cgraph): Update timevars.\n\nFrom-SVN: r161779", "tree": {"sha": "92fd474513a4b99dd15dccfa56a907a3c196f084", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/92fd474513a4b99dd15dccfa56a907a3c196f084"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f029db6980d18f43e206edff715bec2d6fb48e75", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f029db6980d18f43e206edff715bec2d6fb48e75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f029db6980d18f43e206edff715bec2d6fb48e75", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f029db6980d18f43e206edff715bec2d6fb48e75/comments", "author": null, "committer": null, "parents": [{"sha": "9b8051b48af14a50112a918b535e6c7068c7b871", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b8051b48af14a50112a918b535e6c7068c7b871", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b8051b48af14a50112a918b535e6c7068c7b871"}], "stats": {"total": 51, "additions": 43, "deletions": 8}, "files": [{"sha": "350a41b33e3ae42c1e1e0028cd8f4672c868cf2b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f029db6980d18f43e206edff715bec2d6fb48e75", "patch": "@@ -1,3 +1,18 @@\n+2010-07-03  Jan Hubicka  <jh@suse.cz>\n+\n+\t* timevar.def (TV_OUT_OF_SSA, TV_VAR_EXPAND, TV_POST_EXPAND,\n+\tTV_VAR_TRACKING_DATAFLOW, TV_VAR_TRACKING_EMIT): New timevars.\n+\t* cfgexpand.c (gimple_expand_cfg): Use new timevars.\n+\t* var-tracking.c (vt_find_locations, variable_tracking_main_1):\n+\tLikewise.\n+\n+\t* lto-stramer-out.c (pass_ipa_lto_gimple_out, pass_ipa_lto_finish_out):\n+\tUpdate timevars.V\n+\t* timevar.def (TV_IPA_LTO_GIMPLE_IO, TV_IPA_LTO_DECL_IO): Remove.\n+\t(TV_IPA_LTO_GIMPLE_IN, TV_IPA_LTO_GIMPLE_OUT, TV_IPA_LTO_DECL_IN,\n+\tTV_IPA_LTO_DECL_OUT): New.\n+\t* lto.c (read_cgraph_and_symbols, materialize_cgraph): Update timevars.\n+\n 2010-07-03  Jan Hubicka  <jh@suse.cz>\n \n \t* ipa-inline.c (update_edge_key): Break out from ..."}, {"sha": "771ed47854e80423c78bcd08ef5222e39d197197", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=f029db6980d18f43e206edff715bec2d6fb48e75", "patch": "@@ -3764,7 +3764,9 @@ gimple_expand_cfg (void)\n   edge e;\n   unsigned i;\n \n+  timevar_push (TV_OUT_OF_SSA);\n   rewrite_out_of_ssa (&SA);\n+  timevar_pop (TV_OUT_OF_SSA);\n   SA.partition_to_pseudo = (rtx *)xcalloc (SA.map->num_partitions,\n \t\t\t\t\t   sizeof (rtx));\n \n@@ -3807,7 +3809,9 @@ gimple_expand_cfg (void)\n \n \n   /* Expand the variables recorded during gimple lowering.  */\n+  timevar_push (TV_VAR_EXPAND);\n   expand_used_vars ();\n+  timevar_pop (TV_VAR_EXPAND);\n \n   /* Honor stack protection warnings.  */\n   if (warn_stack_protect)\n@@ -3887,8 +3891,11 @@ gimple_expand_cfg (void)\n     expand_debug_locations ();\n \n   execute_free_datastructures ();\n+  timevar_push (TV_OUT_OF_SSA);\n   finish_out_of_ssa (&SA);\n+  timevar_pop (TV_OUT_OF_SSA);\n \n+  timevar_push (TV_POST_EXPAND);\n   /* We are no longer in SSA form.  */\n   cfun->gimple_df->in_ssa_p = false;\n \n@@ -3998,6 +4005,7 @@ gimple_expand_cfg (void)\n      the common parent easily.  */\n   set_block_levels (DECL_INITIAL (cfun->decl), 0);\n   default_rtl_profile ();\n+  timevar_pop (TV_POST_EXPAND);\n   return 0;\n }\n "}, {"sha": "d4bccfb923aafb055d0aa52a16256956d64cd186", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=f029db6980d18f43e206edff715bec2d6fb48e75", "patch": "@@ -2132,7 +2132,7 @@ struct ipa_opt_pass_d pass_ipa_lto_gimple_out =\n   NULL,\t\t\t\t\t/* sub */\n   NULL,\t\t\t\t\t/* next */\n   0,\t\t\t\t\t/* static_pass_number */\n-  TV_IPA_LTO_GIMPLE_IO,\t\t        /* tv_id */\n+  TV_IPA_LTO_GIMPLE_OUT,\t\t        /* tv_id */\n   0,\t                                /* properties_required */\n   0,\t\t\t\t\t/* properties_provided */\n   0,\t\t\t\t\t/* properties_destroyed */\n@@ -2544,7 +2544,7 @@ struct ipa_opt_pass_d pass_ipa_lto_finish_out =\n   NULL,\t\t\t\t\t/* sub */\n   NULL,\t\t\t\t\t/* next */\n   0,\t\t\t\t\t/* static_pass_number */\n-  TV_IPA_LTO_DECL_IO,\t\t        /* tv_id */\n+  TV_IPA_LTO_DECL_OUT,\t\t        /* tv_id */\n   0,\t                                /* properties_required */\n   0,\t\t\t\t\t/* properties_provided */\n   0,\t\t\t\t\t/* properties_destroyed */"}, {"sha": "500cb4f71577e1c89ace663598d51d15f184a34f", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=f029db6980d18f43e206edff715bec2d6fb48e75", "patch": "@@ -1436,7 +1436,7 @@ read_cgraph_and_symbols (unsigned nfiles, const char **fnames)\n \n   lto_stats.num_input_files = nfiles;\n \n-  timevar_push (TV_IPA_LTO_DECL_IO);\n+  timevar_push (TV_IPA_LTO_DECL_IN);\n \n   /* Set the hooks so that all of the ipa passes can read in their data.  */\n   all_file_decl_data\n@@ -1498,7 +1498,7 @@ read_cgraph_and_symbols (unsigned nfiles, const char **fnames)\n   /* Set the hooks so that all of the ipa passes can read in their data.  */\n   lto_set_in_hooks (all_file_decl_data, get_section_data, free_section_data);\n \n-  timevar_pop (TV_IPA_LTO_DECL_IO);\n+  timevar_pop (TV_IPA_LTO_DECL_IN);\n \n   if (!quiet_flag)\n     fprintf (stderr, \"\\nReading the callgraph\\n\");\n@@ -1590,7 +1590,7 @@ materialize_cgraph (void)\n \n   /* Now that we have input the cgraph, we need to clear all of the aux\n      nodes and read the functions if we are not running in WPA mode.  */\n-  timevar_push (TV_IPA_LTO_GIMPLE_IO);\n+  timevar_push (TV_IPA_LTO_GIMPLE_IN);\n \n   for (node = cgraph_nodes; node; node = node->next)\n     {\n@@ -1611,7 +1611,7 @@ materialize_cgraph (void)\n \t}\n     }\n \n-  timevar_pop (TV_IPA_LTO_GIMPLE_IO);\n+  timevar_pop (TV_IPA_LTO_GIMPLE_IN);\n \n   /* Start the appropriate timer depending on the mode that we are\n      operating in.  */"}, {"sha": "a3e93bc4d06465c762df3c1a6a0f56c8415709c5", "filename": "gcc/timevar.def", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Ftimevar.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Ftimevar.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftimevar.def?ref=f029db6980d18f43e206edff715bec2d6fb48e75", "patch": "@@ -53,8 +53,10 @@ DEFTIMEVAR (TV_CGRAPHOPT             , \"callgraph optimization\")\n DEFTIMEVAR (TV_VARPOOL               , \"varpool construction\")\n DEFTIMEVAR (TV_IPA_CONSTANT_PROP     , \"ipa cp\")\n DEFTIMEVAR (TV_IPA_FNSPLIT           , \"ipa function splitting\")\n-DEFTIMEVAR (TV_IPA_LTO_GIMPLE_IO     , \"ipa lto gimple I/O\")\n-DEFTIMEVAR (TV_IPA_LTO_DECL_IO       , \"ipa lto decl I/O\")\n+DEFTIMEVAR (TV_IPA_LTO_GIMPLE_IN     , \"ipa lto gimple in\")\n+DEFTIMEVAR (TV_IPA_LTO_GIMPLE_OUT    , \"ipa lto gimple out\")\n+DEFTIMEVAR (TV_IPA_LTO_DECL_IN       , \"ipa lto decl in\")\n+DEFTIMEVAR (TV_IPA_LTO_DECL_OUT      , \"ipa lto decl out\")\n DEFTIMEVAR (TV_IPA_LTO_DECL_INIT_IO  , \"ipa lto decl init I/O\")\n DEFTIMEVAR (TV_IPA_LTO_CGRAPH_IO     , \"ipa lto cgraph I/O\")\n DEFTIMEVAR (TV_IPA_LTO_DECL_MERGE    , \"ipa lto decl merge\")\n@@ -172,7 +174,10 @@ DEFTIMEVAR (TV_DOMINANCE             , \"dominance computation\")\n DEFTIMEVAR (TV_CONTROL_DEPENDENCES   , \"control dependences\")\n DEFTIMEVAR (TV_OVERLOAD              , \"overload resolution\")\n DEFTIMEVAR (TV_TEMPLATE_INSTANTIATION, \"template instantiation\")\n+DEFTIMEVAR (TV_OUT_OF_SSA\t     , \"out of ssa\")\n+DEFTIMEVAR (TV_VAR_EXPAND\t     , \"expand vars\")\n DEFTIMEVAR (TV_EXPAND\t\t     , \"expand\")\n+DEFTIMEVAR (TV_POST_EXPAND\t     , \"post expand cleanups\")\n DEFTIMEVAR (TV_VARCONST              , \"varconst\")\n DEFTIMEVAR (TV_LOWER_SUBREG\t     , \"lower subreg\")\n DEFTIMEVAR (TV_JUMP                  , \"jump\")\n@@ -226,6 +231,8 @@ DEFTIMEVAR (TV_FINAL                 , \"final\")\n DEFTIMEVAR (TV_VAROUT                , \"variable output\")\n DEFTIMEVAR (TV_SYMOUT                , \"symout\")\n DEFTIMEVAR (TV_VAR_TRACKING          , \"variable tracking\")\n+DEFTIMEVAR (TV_VAR_TRACKING_DATAFLOW , \"var-tracking dataflow\")\n+DEFTIMEVAR (TV_VAR_TRACKING_EMIT     , \"var-tracking emit\")\n DEFTIMEVAR (TV_TREE_IFCOMBINE        , \"tree if-combine\")\n DEFTIMEVAR (TV_TREE_UNINIT           , \"uninit var anaysis\")\n DEFTIMEVAR (TV_PLUGIN_INIT           , \"plugin initialization\")"}, {"sha": "33061c5a55d74daccead399b1d1305a3df62be74", "filename": "gcc/var-tracking.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Fvar-tracking.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f029db6980d18f43e206edff715bec2d6fb48e75/gcc%2Fvar-tracking.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvar-tracking.c?ref=f029db6980d18f43e206edff715bec2d6fb48e75", "patch": "@@ -5992,6 +5992,7 @@ vt_find_locations (void)\n   int htabmax = PARAM_VALUE (PARAM_MAX_VARTRACK_SIZE);\n   bool success = true;\n \n+  timevar_push (TV_VAR_TRACKING_DATAFLOW);\n   /* Compute reverse completion order of depth first search of the CFG\n      so that the data-flow runs faster.  */\n   rc_order = XNEWVEC (int, n_basic_blocks - NUM_FIXED_BLOCKS);\n@@ -6027,6 +6028,7 @@ vt_find_locations (void)\n \t{\n \t  bb = (basic_block) fibheap_extract_min (worklist);\n \t  RESET_BIT (in_worklist, bb->index);\n+\t  gcc_assert (!TEST_BIT (visited, bb->index));\n \t  if (!TEST_BIT (visited, bb->index))\n \t    {\n \t      bool changed;\n@@ -6179,6 +6181,7 @@ vt_find_locations (void)\n   sbitmap_free (in_worklist);\n   sbitmap_free (in_pending);\n \n+  timevar_pop (TV_VAR_TRACKING_DATAFLOW);\n   return success;\n }\n \n@@ -8534,7 +8537,9 @@ variable_tracking_main_1 (void)\n       dump_flow_info (dump_file, dump_flags);\n     }\n \n+  timevar_push (TV_VAR_TRACKING_EMIT);\n   vt_emit_notes ();\n+  timevar_pop (TV_VAR_TRACKING_EMIT);\n \n   vt_finalize ();\n   vt_debug_insns_local (false);"}]}