{"sha": "8d54aaaeb7237a43a29b51baabbef74c09c305fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ1NGFhYWViNzIzN2E0M2EyOWI1MWJhYWJiZWY3NGMwOWMzMDVmYw==", "commit": {"author": {"name": "Erik Edelmann", "email": "erik.edelmann@iki.fi", "date": "2005-10-19T22:20:56Z"}, "committer": {"name": "Erik Edelmann", "email": "eedelman@gcc.gnu.org", "date": "2005-10-19T22:20:56Z"}, "message": "re PR fortran/21625 ([4.0 only] Nested derived type pointer component not initialized on ALLOCATE)\n\n\tPR fortran/21625\n\t* gfortran.fg/der_init_1.f90: New.\n\nFrom-SVN: r105643", "tree": {"sha": "52b822a42cfe87cf9cd181f3d1fdeed52aea7477", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52b822a42cfe87cf9cd181f3d1fdeed52aea7477"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d54aaaeb7237a43a29b51baabbef74c09c305fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d54aaaeb7237a43a29b51baabbef74c09c305fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d54aaaeb7237a43a29b51baabbef74c09c305fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d54aaaeb7237a43a29b51baabbef74c09c305fc/comments", "author": null, "committer": null, "parents": [{"sha": "68577e568595f35fc42115886a770e40a1765a5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68577e568595f35fc42115886a770e40a1765a5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68577e568595f35fc42115886a770e40a1765a5c"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "7a536a72c1870925408cd3a1a23b6b049258b4a7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d54aaaeb7237a43a29b51baabbef74c09c305fc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d54aaaeb7237a43a29b51baabbef74c09c305fc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8d54aaaeb7237a43a29b51baabbef74c09c305fc", "patch": "@@ -1,3 +1,8 @@\n+2005-10-20  Erik Edelmann  <erik.edelmann@iki.fi>\n+\n+\tPR fortran/21625\n+\t* gfortran.fg/der_init_1.f90: New.\n+\n 2005-10-19  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* gcc.dg/20050824-1.c (f): Clobber %r13 and %r14 only on s390x."}, {"sha": "bdd7d3773d7bbbbe5820f45c3655aeb8b287295b", "filename": "gcc/testsuite/gfortran.dg/derived_init_1.f90", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d54aaaeb7237a43a29b51baabbef74c09c305fc/gcc%2Ftestsuite%2Fgfortran.dg%2Fderived_init_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d54aaaeb7237a43a29b51baabbef74c09c305fc/gcc%2Ftestsuite%2Fgfortran.dg%2Fderived_init_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fderived_init_1.f90?ref=8d54aaaeb7237a43a29b51baabbef74c09c305fc", "patch": "@@ -0,0 +1,32 @@\n+! { dg-do run }\n+! Check that allocatable/pointer variables of derived types with initialized\n+! components are are initialized when allocated\n+! PR 21625\n+program test\n+\n+    implicit none\n+    type :: t\n+        integer :: a = 3\n+    end type t\n+    type :: s\n+        type(t), pointer :: p(:)\n+        type(t), pointer :: p2\n+    end type s\n+    type(t), pointer :: p\n+    type(t), allocatable :: q(:,:)\n+    type(s) :: z\n+    type(s) :: x(2)\n+\n+    allocate(p, q(2,2))\n+    if (p%a /= 3) call abort()\n+    if (any(q(:,:)%a /= 3)) call abort()\n+\n+    allocate(z%p2, z%p(2:3))\n+    if (z%p2%a /= 3) call abort()\n+    if (any(z%p(:)%a /= 3)) call abort()\n+\n+    allocate(x(1)%p2, x(1)%p(2))\n+    if (x(1)%p2%a /= 3) call abort()\n+    if (any(x(1)%p(:)%a /= 3)) call abort()\n+end program test\n+"}]}