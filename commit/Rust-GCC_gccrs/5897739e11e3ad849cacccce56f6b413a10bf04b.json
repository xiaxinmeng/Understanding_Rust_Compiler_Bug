{"sha": "5897739e11e3ad849cacccce56f6b413a10bf04b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg5NzczOWUxMWUzYWQ4NDljYWNjY2NlNTZmNmI0MTNhMTBiZjA0Yg==", "commit": {"author": {"name": "Jeffrey Oldham", "email": "oldham@codesourcery.com", "date": "2001-04-27T19:59:53Z"}, "committer": {"name": "Jeffrey D. Oldham", "email": "oldham@gcc.gnu.org", "date": "2001-04-27T19:59:53Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r41645", "tree": {"sha": "9549761c28ea76715ba53bb9ad4c9c4c578cd20e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9549761c28ea76715ba53bb9ad4c9c4c578cd20e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5897739e11e3ad849cacccce56f6b413a10bf04b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5897739e11e3ad849cacccce56f6b413a10bf04b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5897739e11e3ad849cacccce56f6b413a10bf04b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5897739e11e3ad849cacccce56f6b413a10bf04b/comments", "author": null, "committer": null, "parents": [{"sha": "994682b99a23470050f3f259ebae33207f672b99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/994682b99a23470050f3f259ebae33207f672b99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/994682b99a23470050f3f259ebae33207f672b99"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "1ec2cfd726677e90aa65ebbfe90017689a456e29", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5897739e11e3ad849cacccce56f6b413a10bf04b", "patch": "@@ -1,3 +1,12 @@\n+2001-04-27  Jeffrey Oldham  <oldham@codesourcery.com>\n+\n+\t* collect2.c (main): Add `-L' case to remove duplicate entries.\n+\t(is_in_args): New function to check for a duplicate argument.\n+\t* defaults.h (LINK_ELIMINATE_DUPLICATE_LDIRECTORIES): New macro.\n+\t* tm.texi (LINK_ELIMINATE_DUPLICATE_LDIRECTORIES): New documentation.\n+\t* config/mips/iris6.h (LINK_ELIMINATE_DUPLICATE_LDIRECTORIES):\n+\tDefine to be nonzero.\n+\n 2001-04-27  Andreas Jaeger  <aj@suse.de>\n \t    Richard Henderson  <rth@redhat.com>\n "}, {"sha": "83ed200da4f1b371af24a1255d82249f2b5da04e", "filename": "gcc/collect2.c", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=5897739e11e3ad849cacccce56f6b413a10bf04b", "patch": "@@ -292,6 +292,9 @@ static void scan_prog_file\tPARAMS ((const char *, enum pass));\n #ifdef SCAN_LIBRARIES\n static void scan_libraries\tPARAMS ((const char *));\n #endif\n+#if LINK_ELIMINATE_DUPLICATE_LDIRECTORIES\n+static int is_in_args\t\tPARAMS ((const char *, const char **, const char **));\n+#endif\n #ifdef COLLECT_EXPORT_LIST\n static int is_in_list\t\tPARAMS ((const char *, struct id *));\n static void write_aix_file\tPARAMS ((FILE *, struct id *));\n@@ -1177,6 +1180,13 @@ main (argc, argv)\n        \t    case 'L':\n \t      add_prefix (&cmdline_lib_dirs, arg+2);\n \t      break;\n+#else \n+#if LINK_ELIMINATE_DUPLICATE_LDIRECTORIES\n+\t    case 'L':\n+\t      if (is_in_args (arg, (const char **) ld1_argv, ld1-1))\n+\t\t--ld1;\n+\t      break;\n+#endif /* LINK_ELIMINATE_DUPLICATE_LDIRECTORIES */\n #endif\n \n \t    case 'o':\n@@ -1756,6 +1766,24 @@ write_list (stream, prefix, list)\n     }\n }\n \n+#if LINK_ELIMINATE_DUPLICATE_LDIRECTORIES\n+/* Given a STRING, return nonzero if it occurs in the list in range\n+   [ARGS_BEGIN,ARGS_END).  */\n+\n+static int\n+is_in_args (string, args_begin, args_end)\n+     const char *string;\n+     const char **args_begin;\n+     const char **args_end;\n+{\n+  const char **args_pointer;\n+  for (args_pointer = args_begin; args_pointer != args_end; ++args_pointer)\n+    if (strcmp (string, *args_pointer) == 0)\n+      return 1;\n+  return 0;\n+}\n+#endif /* LINK_ELIMINATE_DUPLICATE_LDIRECTORIES */\n+\n #ifdef COLLECT_EXPORT_LIST\n /* This function is really used only on AIX, but may be useful.  */\n static int"}, {"sha": "e9b594f8cb0eaabf27e85a70e6db1d6b93868b74", "filename": "gcc/config/mips/iris6.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Fconfig%2Fmips%2Firis6.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Fconfig%2Fmips%2Firis6.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis6.h?ref=5897739e11e3ad849cacccce56f6b413a10bf04b", "patch": "@@ -204,6 +204,10 @@ Boston, MA 02111-1307, USA.  */\n #undef SUPPORTS_INIT_PRIORITY\n #define SUPPORTS_INIT_PRIORITY 0\n \n+/* A linker error can empirically be avoided by removing duplicate\n+   library search directories.  */\n+#define LINK_ELIMINATE_DUPLICATE_LDIRECTORIES 1\n+\n #define POPSECTION_ASM_OP\t\"\\t.popsection\"\n \n #define DEBUG_INFO_SECTION\t\".debug_info,0x7000001e,0,0,1\""}, {"sha": "4ed35f2a24222829655b1f6b7cb1b36b8aac3c26", "filename": "gcc/defaults.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Fdefaults.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Fdefaults.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdefaults.h?ref=5897739e11e3ad849cacccce56f6b413a10bf04b", "patch": "@@ -170,6 +170,13 @@ do { ASM_OUTPUT_LABEL(FILE,LABEL_ALTERNATE_NAME (INSN)); } while (0)\n #define SUPPORTS_INIT_PRIORITY 1\n #endif /* SUPPORTS_INIT_PRIORITY */\n \n+/* If duplicate library search directories can be removed from a\n+   linker command without changing the linker's semantics, give this\n+   symbol a nonzero.  */\n+#ifndef LINK_ELIMINATE_DUPLICATE_LDIRECTORIES\n+#define LINK_ELIMINATE_DUPLICATE_LDIRECTORIES 0\n+#endif /* LINK_ELIMINATE_DUPLICATE_LDIRECTORIES */\n+\n /* If we have a definition of INCOMING_RETURN_ADDR_RTX, assume that\n    the rest of the DWARF 2 frame unwind support is also provided.  */\n #if !defined (DWARF2_UNWIND_INFO) && defined (INCOMING_RETURN_ADDR_RTX)"}, {"sha": "bf4c1a7114771509308e738d51062bcedba4d9c8", "filename": "gcc/tm.texi", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5897739e11e3ad849cacccce56f6b413a10bf04b/gcc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftm.texi?ref=5897739e11e3ad849cacccce56f6b413a10bf04b", "patch": "@@ -325,6 +325,12 @@ define this macro only if you need to completely redefine the command\n line for invoking the linker and there is no other way to accomplish\n the effect you need.\n \n+@findex LINK_ELIMINATE_DUPLICATE_LDIRECTORIES\n+@item LINK_ELIMINATE_DUPLICATE_LDIRECTORIES\n+A nonzero value causes collect2 to remove duplicate -L<directory> search\n+directories from linking commands.  Do not give it a nonzero value if\n+removing duplicate search directories changes the linker's semantics.\n+\n @findex MULTILIB_DEFAULTS\n @item MULTILIB_DEFAULTS\n Define this macro as a C expression for the initializer of an array of"}]}