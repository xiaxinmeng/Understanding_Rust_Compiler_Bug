{"sha": "3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI5MGY1ZTdjN2E4NGFkMTllZTlmYTcwYWU5MzhmMTI0MWFlMmNkNA==", "commit": {"author": {"name": "Charles Baylis", "email": "charles.baylis@linaro.org", "date": "2014-07-31T14:27:58Z"}, "committer": {"name": "Charles Baylis", "email": "cbaylis@gcc.gnu.org", "date": "2014-07-31T14:27:58Z"}, "message": "re PR target/61948 ([ARM] [4.10 regression] ICE with DImode shift by 1 bit (in copyprop_hardreg_forward_1))\n\nPR target/61948\n\ngcc/ChangeLog:\n2014-07-29  Charles Baylis  <charles.baylis@linaro.org>\n\n\tPR target/61948\n\t* config/arm/neon.md (ashldi3_neon): Don't emit arm_ashldi3_1bit unless\n\tconstraints are satisfied.\n\t(<shift>di3_neon): Likewise.\n\ngcc/testsuite/ChangeLog:\n2014-07-29  Charles Baylis  <charles.baylis@linaro.org>\n\n        PR target/61948\n        * gcc.target/arm/pr61948.c: New test case.\n\nFrom-SVN: r213376", "tree": {"sha": "e439337d478b57a9ca89cef07e1187353c032812", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e439337d478b57a9ca89cef07e1187353c032812"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/comments", "author": null, "committer": null, "parents": [{"sha": "030e321a73d177ca17395338b51b5fca3bbb7287", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/030e321a73d177ca17395338b51b5fca3bbb7287", "html_url": "https://github.com/Rust-GCC/gccrs/commit/030e321a73d177ca17395338b51b5fca3bbb7287"}], "stats": {"total": 36, "additions": 34, "deletions": 2}, "files": [{"sha": "33930dce8298b31b172d06b222c34aa0615f447d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "patch": "@@ -1,3 +1,10 @@\n+2014-07-31  Charles Baylis  <charles.baylis@linaro.org>\n+\n+\tPR target/61948\n+\t* config/arm/neon.md (ashldi3_neon): Don't emit arm_ashldi3_1bit unless\n+\tconstraints are satisfied.\n+\t(<shift>di3_neon): Likewise.\n+\n 2014-07-31  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/61964"}, {"sha": "dc364eeb64e8cbb3b9a2eb5725338110ea3e8a7a", "filename": "gcc/config/arm/neon.md", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2Fconfig%2Farm%2Fneon.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2Fconfig%2Farm%2Fneon.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fneon.md?ref=3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "patch": "@@ -1041,7 +1041,9 @@\n       }\n     else\n       {\n-\tif (CONST_INT_P (operands[2]) && INTVAL (operands[2]) == 1)\n+\tif (CONST_INT_P (operands[2]) && INTVAL (operands[2]) == 1\n+\t    && (!reg_overlap_mentioned_p (operands[0], operands[1])\n+\t\t|| REGNO (operands[0]) == REGNO (operands[1])))\n \t  /* This clobbers CC.  */\n \t  emit_insn (gen_arm_ashldi3_1bit (operands[0], operands[1]));\n \telse\n@@ -1141,7 +1143,9 @@\n       }\n     else\n       {\n-\tif (CONST_INT_P (operands[2]) && INTVAL (operands[2]) == 1)\n+\tif (CONST_INT_P (operands[2]) && INTVAL (operands[2]) == 1\n+\t    && (!reg_overlap_mentioned_p (operands[0], operands[1])\n+\t\t|| REGNO (operands[0]) == REGNO (operands[1])))\n \t  /* This clobbers CC.  */\n \t  emit_insn (gen_arm_<shift>di3_1bit (operands[0], operands[1]));\n \telse"}, {"sha": "1932ab146a55217a67024137302d35476042a67a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "patch": "@@ -1,3 +1,8 @@\n+2014-07-31  Charles Baylis  <charles.baylis@linaro.org>\n+\n+\tPR target/61948\n+\t* gcc.target/arm/pr61948.c: New test case.\n+\n 2014-07-31  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/61964"}, {"sha": "411e898ea77cafc2ce6932499ba388b7bfe69324", "filename": "gcc/testsuite/gcc.target/arm/pr61948.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr61948.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr61948.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr61948.c?ref=3290f5e7c7a84ad19ee9fa70ae938f1241ae2cd4", "patch": "@@ -0,0 +1,16 @@\n+/* PR target/61948 */\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_neon_ok } */\n+/* { dg-require-effective-target arm_thumb2_ok } */\n+/* { dg-options \"-O2 -mthumb\" } */\n+/* { dg-add-options arm_neon } */\n+\n+long long f (long long *c)\n+{\n+  long long t = c[0];\n+  asm (\"nop\" : : : \"r0\", \"r3\", \"r4\", \"r5\",\n+\t\t   \"r6\", \"r7\", \"r8\", \"r9\",\n+\t\t   \"r10\", \"r11\", \"r12\", \"memory\");\n+  return t >> 1;\n+}\n+"}]}