{"sha": "b835c5b30e5ef49488d634aebc9ffc40e9590121", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjgzNWM1YjMwZTVlZjQ5NDg4ZDYzNGFlYmM5ZmZjNDBlOTU5MDEyMQ==", "commit": {"author": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1997-04-27T19:40:44Z"}, "committer": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1997-04-27T19:40:44Z"}, "message": "Avoid expansion in node titles.\n\nMerge cropmarks code into main output routine.\n\nFrom-SVN: r13986", "tree": {"sha": "6d550c21221f35da7dcb975a6658b700f1e3226f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d550c21221f35da7dcb975a6658b700f1e3226f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b835c5b30e5ef49488d634aebc9ffc40e9590121", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b835c5b30e5ef49488d634aebc9ffc40e9590121", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b835c5b30e5ef49488d634aebc9ffc40e9590121", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b835c5b30e5ef49488d634aebc9ffc40e9590121/comments", "author": null, "committer": null, "parents": [{"sha": "3c5d868350f5b4af18e41f54177d7d81d5d4b04f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c5d868350f5b4af18e41f54177d7d81d5d4b04f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c5d868350f5b4af18e41f54177d7d81d5d4b04f"}], "stats": {"total": 134, "additions": 71, "deletions": 63}, "files": [{"sha": "23af39804e48fe8635746c52b71992e1663a4706", "filename": "gcc/texinfo.tex", "status": "modified", "additions": 71, "deletions": 63, "changes": 134, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b835c5b30e5ef49488d634aebc9ffc40e9590121/gcc%2Ftexinfo.tex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b835c5b30e5ef49488d634aebc9ffc40e9590121/gcc%2Ftexinfo.tex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftexinfo.tex?ref=b835c5b30e5ef49488d634aebc9ffc40e9590121", "patch": "@@ -1,5 +1,5 @@\n %% TeX macros to handle Texinfo files.\n-%% $Id: texinfo.tex,v 2.193.1.1 1997/01/04 19:21:48 karl Exp $\n+%% $Id: texinfo.tex,v 2.197 1997/04/26 23:22:03 karl Exp $\n \n %  Copyright (C) 1985, 86, 88, 90, 91, 92, 93,\n %                94, 95, 96, 97 Free Software Foundation, Inc.\n@@ -36,7 +36,7 @@\n \n % This automatically updates the version number based on RCS.\n \\def\\deftexinfoversion$#1: #2 ${\\def\\texinfoversion{#2}}\n-\\deftexinfoversion$Revision: 2.193.1.1 $\n+\\deftexinfoversion$Revision: 2.197 $\n \\message{Loading texinfo package [Version \\texinfoversion]:}\n \n % If in a .fmt file, print the version number\n@@ -118,33 +118,41 @@\n    \\showboxbreadth\\maxdimen\\showboxdepth\\maxdimen\n }%\n \n-%---------------------Begin change-----------------------\n+% For @cropmarks command.\n+% Do @cropmarks to get crop marks.\n+% \n+\\newif\\ifcropmarks\n+\\let\\cropmarks = \\cropmarkstrue\n %\n-%%%% For @cropmarks command.\n-% Dimensions to add cropmarks at corners Added by P. A. MacKay, 12 Nov. 1986\n+% Dimensions to add cropmarks at corners.\n+% Added by P. A. MacKay, 12 Nov. 1986\n %\n \\newdimen\\cornerlong \\newdimen\\cornerthick\n-\\newdimen \\topandbottommargin\n-\\newdimen \\outerhsize \\newdimen \\outervsize\n+\\newdimen\\topandbottommargin\n+\\newdimen\\outerhsize \\newdimen\\outervsize\n \\cornerlong=1pc\\cornerthick=.3pt        % These set size of cropmarks\n \\outerhsize=7in\n %\\outervsize=9.5in\n % Alternative @smallbook page size is 9.25in\n \\outervsize=9.25in\n \\topandbottommargin=.75in\n-%\n-%---------------------End change-----------------------\n \n % Main output routine.\n \\chardef\\PAGE = 255\n \\output = {\\onepageout{\\pagecontents\\PAGE}}\n \n-\\newbox\\headlinebox  \\newbox\\footlinebox\n+\\newbox\\headlinebox\n+\\newbox\\footlinebox\n \n % \\onepageout takes a vbox as an argument.  Note that \\pagecontents\n % does insertions, but you have to call it yourself.\n \\def\\onepageout#1{%\n-  \\hoffset=\\normaloffset\n+  \\ifcropmarks\n+    \\hoffset = 0pt\n+  \\else\n+    \\hoffset = \\normaloffset\n+  \\fi\n+  %\n   \\ifodd\\pageno  \\advance\\hoffset by \\bindingoffset\n   \\else \\advance\\hoffset by -\\bindingoffset\\fi\n   %\n@@ -163,53 +171,41 @@\n     \\normalturnoffactive  % \\ in index entries must not stay \\, e.g., if\n                    % the page break happens to be in the middle of an example.\n     \\shipout\\vbox{%\n+      \\ifcropmarks\n+        \\vbox to \\outervsize\\bgroup\n+          \\hsize = \\outerhsize\n+          \\vbox{\\line{\\ewtop\\hfill\\ewtop}}%\n+          \\nointerlineskip\n+          \\line{%\n+            \\vbox{\\moveleft\\cornerthick\\nstop}%\n+            \\hfill\n+            \\vbox{\\moveright\\cornerthick\\nstop}%\n+          }%\n+          \\vskip\\topandbottommargin\n+      \\fi\n+      %\n       \\unvbox\\headlinebox\n       \\pagebody{#1}%\n       \\unvbox\\footlinebox\n+      %\n+      \\ifcropmarks\n+          \\vskip\\topandbottommargin plus1fill minus1fill\n+          \\boxmaxdepth = \\cornerthick\n+          \\line{%\n+            \\vbox{\\moveleft\\cornerthick\\nsbot}%\n+            \\hfill\n+            \\vbox{\\moveright\\cornerthick\\nsbot}%\n+          }%\n+          \\nointerlineskip\n+          \\vbox{\\line{\\ewbot\\hfill\\ewbot}}%\n+        \\egroup % \\vbox from first cropmarks clause\n+      \\fi\n     }%\n     }%\n   \\advancepageno\n   \\ifnum\\outputpenalty>-20000 \\else\\dosupereject\\fi\n }\n \n-%%%% For @cropmarks command %%%%\n-\n-% Here is a modification of the main output routine for Near East Publications\n-% This provides right-angle cropmarks at all four corners.\n-% The contents of the page are centerlined into the cropmarks,\n-% and any desired binding offset is added as an \\hskip on either\n-% site of the centerlined box.  (P. A. MacKay, 12 November, 1986)\n-%\n-\\def\\croppageout#1{\\hoffset=0pt % make sure this doesn't mess things up\n-{\\escapechar=`\\\\\\relax % makes sure backslash is used in output files.\n-                 \\shipout\n-                 \\vbox to \\outervsize{\\hsize=\\outerhsize\n-                 \\vbox{\\line{\\ewtop\\hfill\\ewtop}}\n-                 \\nointerlineskip\n-                 \\line{\\vbox{\\moveleft\\cornerthick\\nstop}\n-                       \\hfill\n-                       \\vbox{\\moveright\\cornerthick\\nstop}}\n-                 \\vskip \\topandbottommargin\n-                 \\centerline{\\ifodd\\pageno\\hskip\\bindingoffset\\fi\n-                        \\vbox{\n-                        {\\let\\hsize=\\pagewidth \\makeheadline}\n-                        \\pagebody{#1}\n-                        {\\let\\hsize=\\pagewidth \\makefootline}}\n-                        \\ifodd\\pageno\\else\\hskip\\bindingoffset\\fi}\n-                 \\vskip \\topandbottommargin plus1fill minus1fill\n-                 \\boxmaxdepth\\cornerthick\n-                 \\line{\\vbox{\\moveleft\\cornerthick\\nsbot}\n-                       \\hfill\n-                       \\vbox{\\moveright\\cornerthick\\nsbot}}\n-                 \\nointerlineskip\n-                 \\vbox{\\line{\\ewbot\\hfill\\ewbot}}\n-        }}\n-  \\advancepageno\n-  \\ifnum\\outputpenalty>-20000 \\else\\dosupereject\\fi}\n-%\n-% Do @cropmarks to get crop marks\n-\\def\\cropmarks{\\let\\onepageout=\\croppageout }\n-\n \\newinsert\\margin \\dimen\\margin=\\maxdimen\n \n \\def\\pagebody#1{\\vbox to\\pageheight{\\boxmaxdepth=\\maxdepth #1}}\n@@ -2240,6 +2236,7 @@\n \\def\\r##1{\\realbackslash r {##1}}%\n \\def\\i##1{\\realbackslash i {##1}}%\n \\def\\b##1{\\realbackslash b {##1}}%\n+\\def\\sc##1{\\realbackslash sc {##1}}%\n \\def\\cite##1{\\realbackslash cite {##1}}%\n \\def\\key##1{\\realbackslash key {##1}}%\n \\def\\file##1{\\realbackslash file {##1}}%\n@@ -2774,7 +2771,8 @@\n % because we don't want its macros evaluated now.\n \\xdef\\thischapter{\\putwordChapter{} \\the\\chapno: \\noexpand\\thischaptername}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash chapentry {#1}{\\the\\chapno}{\\noexpand\\folio}}}%\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash chapentry{\\the\\toks0}{\\the\\chapno}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp  %\n \\donoderef %\n@@ -2793,8 +2791,9 @@\n \\gdef\\thischaptername{#1}%\n \\xdef\\thischapter{\\putwordAppendix{} \\appendixletter: \\noexpand\\thischaptername}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash chapentry\n-  {#1}{\\putwordAppendix{} \\appendixletter}{\\noexpand\\folio}}}%\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash chapentry{\\the\\toks0}%\n+  {\\putwordAppendix{} \\appendixletter}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp  %\n \\appendixnoderef %\n@@ -2828,7 +2827,8 @@\n \\unnumbchapmacro {#1}%\n \\gdef\\thischapter{#1}\\gdef\\thissection{#1}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash unnumbchapentry {#1}{\\noexpand\\folio}}}%\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash unnumbchapentry{\\the\\toks0}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp  %\n \\unnumbnoderef %\n@@ -2843,8 +2843,9 @@\n \\subsecno=0 \\subsubsecno=0 \\global\\advance \\secno by 1 %\n \\gdef\\thissection{#1}\\secheading {#1}{\\the\\chapno}{\\the\\secno}%\n {\\chapternofonts%\n+\\toks0 = {#1}%\n \\edef\\temp{{\\realbackslash secentry %\n-{#1}{\\the\\chapno}{\\the\\secno}{\\noexpand\\folio}}}%\n+{\\the\\toks0}{\\the\\chapno}{\\the\\secno}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp %\n \\donoderef %\n@@ -2858,8 +2859,9 @@\n \\subsecno=0 \\subsubsecno=0 \\global\\advance \\secno by 1 %\n \\gdef\\thissection{#1}\\secheading {#1}{\\appendixletter}{\\the\\secno}%\n {\\chapternofonts%\n+\\toks0 = {#1}%\n \\edef\\temp{{\\realbackslash secentry %\n-{#1}{\\appendixletter}{\\the\\secno}{\\noexpand\\folio}}}%\n+{\\the\\toks0}{\\appendixletter}{\\the\\secno}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp %\n \\appendixnoderef %\n@@ -2871,7 +2873,8 @@\n \\def\\unnumberedseczzz #1{\\seccheck{unnumberedsec}%\n \\plainsecheading {#1}\\gdef\\thissection{#1}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash unnumbsecentry{#1}{\\noexpand\\folio}}}%\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash unnumbsecentry{\\the\\toks0}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp %\n \\unnumbnoderef %\n@@ -2884,8 +2887,9 @@\n \\gdef\\thissection{#1}\\subsubsecno=0 \\global\\advance \\subsecno by 1 %\n \\subsecheading {#1}{\\the\\chapno}{\\the\\secno}{\\the\\subsecno}%\n {\\chapternofonts%\n+\\toks0 = {#1}%\n \\edef\\temp{{\\realbackslash subsecentry %\n-{#1}{\\the\\chapno}{\\the\\secno}{\\the\\subsecno}{\\noexpand\\folio}}}%\n+{\\the\\toks0}{\\the\\chapno}{\\the\\secno}{\\the\\subsecno}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp %\n \\donoderef %\n@@ -2898,8 +2902,9 @@\n \\gdef\\thissection{#1}\\subsubsecno=0 \\global\\advance \\subsecno by 1 %\n \\subsecheading {#1}{\\appendixletter}{\\the\\secno}{\\the\\subsecno}%\n {\\chapternofonts%\n+\\toks0 = {#1}%\n \\edef\\temp{{\\realbackslash subsecentry %\n-{#1}{\\appendixletter}{\\the\\secno}{\\the\\subsecno}{\\noexpand\\folio}}}%\n+{\\the\\toks0}{\\appendixletter}{\\the\\secno}{\\the\\subsecno}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp %\n \\appendixnoderef %\n@@ -2911,7 +2916,8 @@\n \\def\\unnumberedsubseczzz #1{\\seccheck{unnumberedsubsec}%\n \\plainsubsecheading {#1}\\gdef\\thissection{#1}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash unnumbsubsecentry{#1}{\\noexpand\\folio}}}%\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash unnumbsubsecentry{\\the\\toks0}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp %\n \\unnumbnoderef %\n@@ -2925,8 +2931,8 @@\n \\subsubsecheading {#1}\n   {\\the\\chapno}{\\the\\secno}{\\the\\subsecno}{\\the\\subsubsecno}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash subsubsecentry %\n-  {#1}\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash subsubsecentry{\\the\\toks0}\n   {\\the\\chapno}{\\the\\secno}{\\the\\subsecno}{\\the\\subsubsecno}\n   {\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n@@ -2942,7 +2948,8 @@\n \\subsubsecheading {#1}\n   {\\appendixletter}{\\the\\secno}{\\the\\subsecno}{\\the\\subsubsecno}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash subsubsecentry{#1}%\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash subsubsecentry{\\the\\toks0}%\n   {\\appendixletter}\n   {\\the\\secno}{\\the\\subsecno}{\\the\\subsubsecno}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n@@ -2956,7 +2963,8 @@\n \\def\\unnumberedsubsubseczzz #1{\\seccheck{unnumberedsubsubsec}%\n \\plainsubsubsecheading {#1}\\gdef\\thissection{#1}%\n {\\chapternofonts%\n-\\edef\\temp{{\\realbackslash unnumbsubsubsecentry{#1}{\\noexpand\\folio}}}%\n+\\toks0 = {#1}%\n+\\edef\\temp{{\\realbackslash unnumbsubsubsecentry{\\the\\toks0}{\\noexpand\\folio}}}%\n \\escapechar=`\\\\%\n \\write \\contentsfile \\temp %\n \\unnumbnoderef %"}]}