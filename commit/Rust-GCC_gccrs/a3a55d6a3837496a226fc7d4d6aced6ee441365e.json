{"sha": "a3a55d6a3837496a226fc7d4d6aced6ee441365e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNhNTVkNmEzODM3NDk2YTIyNmZjN2Q0ZDZhY2VkNmVlNDQxMzY1ZQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-03-04T23:45:47Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-03-04T23:45:47Z"}, "message": "(HAVE_ATEXIT): Define if NEED_ATEXIT is defined.\n\n(atexit): Use `int atexit' prototype also if NEED_ATEXIT is defined.\n(on_exit): According to man on_exit on the Sun it returns int not void.\n\nFrom-SVN: r11431", "tree": {"sha": "f255be35a884f3738b12cbe595990118078d08e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f255be35a884f3738b12cbe595990118078d08e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3a55d6a3837496a226fc7d4d6aced6ee441365e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3a55d6a3837496a226fc7d4d6aced6ee441365e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3a55d6a3837496a226fc7d4d6aced6ee441365e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3a55d6a3837496a226fc7d4d6aced6ee441365e/comments", "author": null, "committer": null, "parents": [{"sha": "948260f6fe2cff2fdf53df511feb09b58edfc86a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/948260f6fe2cff2fdf53df511feb09b58edfc86a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/948260f6fe2cff2fdf53df511feb09b58edfc86a"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "7c17aea2931fa4c70ad7d2ee04f7cf15a5e9b000", "filename": "gcc/gbl-ctors.h", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3a55d6a3837496a226fc7d4d6aced6ee441365e/gcc%2Fgbl-ctors.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3a55d6a3837496a226fc7d4d6aced6ee441365e/gcc%2Fgbl-ctors.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgbl-ctors.h?ref=a3a55d6a3837496a226fc7d4d6aced6ee441365e", "patch": "@@ -2,7 +2,7 @@\n    for getting g++ file-scope static objects constructed.  This file\n    will get included either by libgcc2.c (for systems that don't support\n    a .init section) or by crtstuff.c (for those that do).\n-   Copyright (C) 1991, 1995 Free Software Foundation, Inc.\n+   Copyright (C) 1991, 1995, 1996 Free Software Foundation, Inc.\n    Contributed by Ron Guilmette (rfg@segfault.us.com)\n \n This file is part of GNU CC.\n@@ -30,16 +30,22 @@ Boston, MA 02111-1307, USA.  */\n \tNote that this file should only be compiled with GCC.\n */\n \n+#ifdef NEED_ATEXIT\n+#ifndef HAVE_ATEXIT\n+#define HAVE_ATEXIT\t1\t/* Take it from libgcc2.c */\n+#endif\n+#endif\n+\n #ifdef HAVE_ATEXIT\n-#ifdef WINNT\n+#if defined (WINNT) || defined (NEED_ATEXIT)\n extern int atexit (void (*) (void));\n #else\n extern void atexit (void (*) (void));\n #endif\n #define ON_EXIT(FUNC,ARG) atexit ((FUNC))\n #else\n #ifdef sun\n-extern void on_exit (void*, void*);\n+extern int on_exit (void*, void*);\t/* The man page says it returns int. */\n #define ON_EXIT(FUNC,ARG) on_exit ((FUNC), (ARG))\n #endif\n #endif"}]}