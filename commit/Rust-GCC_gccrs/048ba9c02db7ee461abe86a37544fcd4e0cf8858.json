{"sha": "048ba9c02db7ee461abe86a37544fcd4e0cf8858", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ4YmE5YzAyZGI3ZWU0NjFhYmU4NmEzNzU0NGZjZDRlMGNmODg1OA==", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-07-24T18:31:36Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2020-07-24T18:39:10Z"}, "message": "c++: Add testcase for [PR81339]\n\nWe correctly reject this testcase since r11-434, i.e. since the fix for\nPR c++/57943.\n\ngcc/testsuite/ChangeLog:\n\n\tPR c++/81339\n\t* g++.dg/cpp0x/decltype78.C: New test.", "tree": {"sha": "66e3a7f128daa01752baae6c094a7e5d9f7eb0ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/66e3a7f128daa01752baae6c094a7e5d9f7eb0ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/048ba9c02db7ee461abe86a37544fcd4e0cf8858", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/048ba9c02db7ee461abe86a37544fcd4e0cf8858", "html_url": "https://github.com/Rust-GCC/gccrs/commit/048ba9c02db7ee461abe86a37544fcd4e0cf8858", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/048ba9c02db7ee461abe86a37544fcd4e0cf8858/comments", "author": null, "committer": null, "parents": [{"sha": "29a14a1a907947fe9e43bce62d3468559f17da97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29a14a1a907947fe9e43bce62d3468559f17da97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29a14a1a907947fe9e43bce62d3468559f17da97"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "6f4e5b4ad3b7e2b340d7888aecf568a099926522", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype78.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/048ba9c02db7ee461abe86a37544fcd4e0cf8858/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype78.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/048ba9c02db7ee461abe86a37544fcd4e0cf8858/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype78.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype78.C?ref=048ba9c02db7ee461abe86a37544fcd4e0cf8858", "patch": "@@ -0,0 +1,24 @@\n+// PR c++/81339\n+// { dg-do compile { target c++11 } }\n+\n+struct true_type { static const bool value = true; };\n+struct false_type { static const bool value = false; };\n+\n+template <typename T>\n+struct IsDefaultConstructibleT\n+{\n+    // using T here (instead of U) should be an error\n+    template <typename U, typename = decltype(T())> // { dg-error \"deleted\" }\n+      static true_type test(void*);\n+\n+    template <typename U>\n+      static false_type test(...);\n+\n+    static constexpr bool value = decltype(test<T>(nullptr))::value;\n+};\n+\n+struct S {\n+  S() = delete;\n+};\n+\n+static_assert( IsDefaultConstructibleT<S>::value, \"\" ); // { dg-error \"assertion failed\" }"}]}