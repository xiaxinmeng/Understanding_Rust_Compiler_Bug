{"sha": "3c7bdeb832a18ea64c7b1a66327dea3c438eac4b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2M3YmRlYjgzMmExOGVhNjRjN2IxYTY2MzI3ZGVhM2M0MzhlYWM0Yg==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2009-11-25T04:59:39Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2009-11-25T04:59:39Z"}, "message": "graphite-dependences.c (dot_deps_stmt_1): New.\n\n2009-10-13  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* graphite-dependences.c (dot_deps_stmt_1): New.\n\t(dot_deps_stmt): New.\n\t* graphite-dependences.h (dot_deps_stmt): Declared.\n\nFrom-SVN: r154572", "tree": {"sha": "4baaa2d8210a1d58b14ae3f0da6fa3cbb93906bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4baaa2d8210a1d58b14ae3f0da6fa3cbb93906bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7f05acf925b4cec2f7fa2cde699e829600814c0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f05acf925b4cec2f7fa2cde699e829600814c0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f05acf925b4cec2f7fa2cde699e829600814c0b"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "576c7b6d09ca0e42d82f5f615545a49040bf47e4", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=3c7bdeb832a18ea64c7b1a66327dea3c438eac4b", "patch": "@@ -1,3 +1,9 @@\n+2009-10-13  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-dependences.c (dot_deps_stmt_1): New.\n+\t(dot_deps_stmt): New.\n+\t* graphite-dependences.h (dot_deps_stmt): Declared.\n+\n 2009-10-09  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* graphite-sese-to-poly.c (rewrite_cross_bb_scalar_dependence): Do"}, {"sha": "5be1647bc66841b4f12aa553855b9cdffdf43b4e", "filename": "gcc/graphite-dependences.c", "status": "modified", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b/gcc%2Fgraphite-dependences.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b/gcc%2Fgraphite-dependences.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-dependences.c?ref=3c7bdeb832a18ea64c7b1a66327dea3c438eac4b", "patch": "@@ -817,6 +817,35 @@ dependency_between_pbbs_p (poly_bb_p pbb1, poly_bb_p pbb2, int level)\n   return false;\n }\n \n+/* Pretty print to FILE all the data dependences of SCoP in DOT\n+   format.  */\n+\n+static void\n+dot_deps_stmt_1 (FILE *file, scop_p scop)\n+{\n+  int i, j, k, l;\n+  poly_bb_p pbb1, pbb2;\n+  poly_dr_p pdr1, pdr2;\n+\n+  fputs (\"digraph all {\\n\", file);\n+\n+  for (i = 0; VEC_iterate (poly_bb_p, SCOP_BBS (scop), i, pbb1); i++)\n+    for (j = 0; VEC_iterate (poly_bb_p, SCOP_BBS (scop), j, pbb2); j++)\n+      {\n+\tfor (k = 0; VEC_iterate (poly_dr_p, PBB_DRS (pbb1), k, pdr1); k++)\n+\t  for (l = 0; VEC_iterate (poly_dr_p, PBB_DRS (pbb2), l, pdr2); l++)\n+\t    if (pddr_original_scattering (pbb1, pbb2, pdr1, pdr2))\n+\t      {\n+\t\tfprintf (file, \"S%d -> S%d\\n\",\n+\t\t\t pbb_index (pbb1), pbb_index (pbb2));\n+\t\tgoto done;\n+\t      }\n+      done:;\n+      }\n+\n+  fputs (\"}\\n\\n\", file);\n+}\n+\n /* Pretty print to FILE all the data dependences of SCoP in DOT\n    format.  */\n \n@@ -862,5 +891,25 @@ dot_deps (scop_p scop)\n #endif\n }\n \n+/* Display all the statement dependences in SCoP using dotty.  */\n+\n+void\n+dot_deps_stmt (scop_p scop)\n+{\n+  /* When debugging, enable the following code.  This cannot be used\n+     in production compilers because it calls \"system\".  */\n+#if 0\n+  int x;\n+  FILE *stream = fopen (\"/tmp/scopdeps.dot\", \"w\");\n+  gcc_assert (stream);\n+\n+  dot_deps_stmt_1 (stream, scop);\n+  fclose (stream);\n+\n+  x = system (\"dotty /tmp/scopdeps.dot\");\n+#else\n+  dot_deps_1 (stderr, scop);\n+#endif\n+}\n \n #endif"}, {"sha": "cd89ba386445aed87c0bc135bb2a2a0e1b73f451", "filename": "gcc/graphite-dependences.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b/gcc%2Fgraphite-dependences.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c7bdeb832a18ea64c7b1a66327dea3c438eac4b/gcc%2Fgraphite-dependences.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-dependences.h?ref=3c7bdeb832a18ea64c7b1a66327dea3c438eac4b", "patch": "@@ -51,5 +51,6 @@ extern int eq_poly_ddr_p (const void *, const void *);\n extern hashval_t hash_poly_ddr_p (const void *);\n extern void free_poly_ddr (void *);\n extern void dot_deps (scop_p);\n+extern void dot_deps_stmt (scop_p);\n \n #endif"}]}