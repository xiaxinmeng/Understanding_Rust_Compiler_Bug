{"sha": "a973864338539f4b1e9f27b517ea3c6caa1e3f8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk3Mzg2NDMzODUzOWY0YjFlOWYyN2I1MTdlYTNjNmNhYTFlM2Y4ZA==", "commit": {"author": {"name": "Denis Chertykov", "email": "denisc@overta.ru", "date": "2002-09-09T18:20:45Z"}, "committer": {"name": "Denis Chertykov", "email": "denisc@gcc.gnu.org", "date": "2002-09-09T18:20:45Z"}, "message": "avr.md (movstrhi, clrstrhi): Use gen_int_mode for right conversion of operands[1].\n\n\t* config/avr/avr.md (movstrhi, clrstrhi): Use gen_int_mode for\n\tright conversion of operands[1].\n\nFrom-SVN: r56975", "tree": {"sha": "5d7957fdd48b7fe7c307d88c588f74cd367887c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5d7957fdd48b7fe7c307d88c588f74cd367887c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a973864338539f4b1e9f27b517ea3c6caa1e3f8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a973864338539f4b1e9f27b517ea3c6caa1e3f8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a973864338539f4b1e9f27b517ea3c6caa1e3f8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a973864338539f4b1e9f27b517ea3c6caa1e3f8d/comments", "author": null, "committer": null, "parents": [{"sha": "05b9aaaa89af451a049e106366a7827446518355", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05b9aaaa89af451a049e106366a7827446518355", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05b9aaaa89af451a049e106366a7827446518355"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "c37f1f89d315b84b226c07f96e7ca8bace382ebe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a973864338539f4b1e9f27b517ea3c6caa1e3f8d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a973864338539f4b1e9f27b517ea3c6caa1e3f8d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a973864338539f4b1e9f27b517ea3c6caa1e3f8d", "patch": "@@ -1,3 +1,8 @@\n+2002-09-09  Denis Chertykov  <denisc@overta.ru>\n+\n+\t* config/avr/avr.md (movstrhi, clrstrhi): Use gen_int_mode for\n+\tright conversion of operands[1].\n+\n 2002-09-09  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* config/s390/s390.md (\"*tmdi_reg\", \"*tmsi_reg\"): Do not mark as"}, {"sha": "0c050b7b94e555fb776b43fe6568e8413b1e0851", "filename": "gcc/config/avr/avr.md", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a973864338539f4b1e9f27b517ea3c6caa1e3f8d/gcc%2Fconfig%2Favr%2Favr.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a973864338539f4b1e9f27b517ea3c6caa1e3f8d/gcc%2Fconfig%2Favr%2Favr.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.md?ref=a973864338539f4b1e9f27b517ea3c6caa1e3f8d", "patch": "@@ -356,13 +356,14 @@\n   \"{\n   rtx addr0, addr1;\n   int cnt8;\n+  enum machine_mode mode;\n \n   if (GET_CODE (operands[2]) != CONST_INT)\n     FAIL;\n-  cnt8 = byte_immediate_operand (operands[2], GET_MODE (operands[2]));\n-  operands[2] = copy_to_mode_reg (cnt8 ? QImode : HImode, operands[2]);\n-  operands[4] = operands[2];\n-\n+  cnt8 = byte_immediate_operand (operands[1], GET_MODE (operands[1]));\n+  mode = cnt8 ? QImode : HImode;\n+  operands[1] = copy_to_mode_reg (mode,\n+                                  gen_int_mode (INTVAL (operands[1]), mode));\n   addr0 = copy_to_mode_reg (Pmode, XEXP (operands[0], 0));\n   addr1 = copy_to_mode_reg (Pmode, XEXP (operands[1], 0));\n \n@@ -428,12 +429,15 @@\n   \"{\n   rtx addr0;\n   int cnt8;\n+  enum machine_mode mode;\n \n   if (GET_CODE (operands[1]) != CONST_INT)\n     FAIL;\n \n   cnt8 = byte_immediate_operand (operands[1], GET_MODE (operands[1]));\n-  operands[1] = copy_to_mode_reg (cnt8 ? QImode : HImode, operands[1]);\n+  mode = cnt8 ? QImode : HImode;\n+  operands[1] = copy_to_mode_reg (mode,\n+                                  gen_int_mode (INTVAL (operands[1]), mode));\n   operands[3] = operands[1];\n \n   addr0 = copy_to_mode_reg (Pmode, XEXP (operands[0], 0));"}]}