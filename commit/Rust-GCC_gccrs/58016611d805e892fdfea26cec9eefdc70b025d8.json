{"sha": "58016611d805e892fdfea26cec9eefdc70b025d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTgwMTY2MTFkODA1ZTg5MmZkZmVhMjZjZWM5ZWVmZGM3MGIwMjVkOA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2004-09-20T00:05:38Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-09-20T00:05:38Z"}, "message": "* predict.c (estimate_probability): Remove unnecesary code.\n\nFrom-SVN: r87736", "tree": {"sha": "2f70e487a222169bdb3574db111b49895b9efdca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f70e487a222169bdb3574db111b49895b9efdca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58016611d805e892fdfea26cec9eefdc70b025d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58016611d805e892fdfea26cec9eefdc70b025d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58016611d805e892fdfea26cec9eefdc70b025d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58016611d805e892fdfea26cec9eefdc70b025d8/comments", "author": null, "committer": null, "parents": [{"sha": "5bd916325a042777aa2fc925818c6f514979505f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bd916325a042777aa2fc925818c6f514979505f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bd916325a042777aa2fc925818c6f514979505f"}], "stats": {"total": 36, "additions": 6, "deletions": 30}, "files": [{"sha": "6f6582d3f1c90120fd876e5c002a6ad7b1c0550d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58016611d805e892fdfea26cec9eefdc70b025d8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58016611d805e892fdfea26cec9eefdc70b025d8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=58016611d805e892fdfea26cec9eefdc70b025d8", "patch": "@@ -1,3 +1,7 @@\n+2004-09-20  Jan Hubicka  <jh@suse.cz>\n+\n+\t* predict.c (estimate_probability): Remove unnecesary code.\n+\n 2004-09-19  Ira Rosen  <irar@il.ibm.com>\n \n \t* tree-vectorizer.h (stmt_vec_info): Add vect_dr_base field."}, {"sha": "d344907717779db07a71c519355dcc4388754297", "filename": "gcc/predict.c", "status": "modified", "additions": 2, "deletions": 30, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58016611d805e892fdfea26cec9eefdc70b025d8/gcc%2Fpredict.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58016611d805e892fdfea26cec9eefdc70b025d8/gcc%2Fpredict.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpredict.c?ref=58016611d805e892fdfea26cec9eefdc70b025d8", "patch": "@@ -852,37 +852,9 @@ estimate_probability (struct loops *loops_info)\n \n   /* Attach the combined probability to each conditional jump.  */\n   FOR_EACH_BB (bb)\n-    if (JUMP_P (BB_END (bb))\n-\t&& any_condjump_p (BB_END (bb))\n-\t&& bb->succ->succ_next != NULL)\n-      combine_predictions_for_insn (BB_END (bb), bb);\n+    combine_predictions_for_insn (BB_END (bb), bb);\n \n-  remove_fake_exit_edges ();\n-  /* Fill in the probability values in flowgraph based on the REG_BR_PROB\n-     notes.  */\n-  FOR_EACH_BB (bb)\n-    {\n-      rtx last_insn = BB_END (bb);\n-\n-      if (!can_predict_insn_p (last_insn))\n-\t{\n-\t  /* We can predict only conditional jumps at the moment.\n-\t     Expect each edge to be equally probable.\n-\t     ?? In the future we want to make abnormal edges improbable.  */\n-\t  int nedges = 0;\n-\t  edge e;\n-\n-\t  for (e = bb->succ; e; e = e->succ_next)\n-\t    {\n-\t      nedges++;\n-\t      if (e->probability != 0)\n-\t\tbreak;\n-\t    }\n-\t  if (!e)\n-\t    for (e = bb->succ; e; e = e->succ_next)\n-\t      e->probability = (REG_BR_PROB_BASE + nedges / 2) / nedges;\n-\t}\n-    }\n+  remove_fake_edges ();\n   estimate_bb_frequencies (loops_info);\n   free_dominance_info (CDI_POST_DOMINATORS);\n   if (profile_status == PROFILE_ABSENT)"}]}