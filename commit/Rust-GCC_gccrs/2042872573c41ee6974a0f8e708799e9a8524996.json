{"sha": "2042872573c41ee6974a0f8e708799e9a8524996", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA0Mjg3MjU3M2M0MWVlNjk3NGEwZjhlNzA4Nzk5ZTlhODUyNDk5Ng==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-05T13:53:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-05T13:53:59Z"}, "message": "[multiple changes]\n\n2011-09-05  Ed Schonberg  <schonberg@adacore.com>\n\n\t* exp_aggr.adb (Replace_Type): If the target of the assignment is\n\ta selected component and the right-hand side is a self-referential\n\taccess, the proper prefix of the rewritten attribute is a copy\n\tof the left-hand side, not of its prefix.\n\n2011-09-05  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_ch5.adb: Minor reformatting.\n\t* sem_ch3.adb: Minor code clean up.\n\n2011-09-05  Jose Ruiz  <ruiz@adacore.com>\n\n\t* exp_ch9.adb (Make_Initialize_Protection): The fact that\n\trestriction No_Dynamic_Attachment is in effect or not should\n\tnot influence the default priority associated to a protected\n\tobject. With this change, when the restriction is in effect (as\n\tis the case for the Ravenscar profile) the default priority of\n\ta protected object with an interrupt handler is in the range of\n\tinterrupt priorities (Default_Interrupt_Priority) as required\n\tby D.3(10).\n\n2011-09-05  Arnaud Charlet  <charlet@adacore.com>\n\n\t* a-iteint.ads: Fix header.\n\n2011-09-05  Vincent Celier  <celier@adacore.com>\n\n\t* prj-conf.adb (Do_Autoconf): Make sure Obj_Dir always ends\n\twith a directory separator to avoid output such as:\n\t  \"/path/to/objauto.cgpr\" has been deleted.\n\nFrom-SVN: r178542", "tree": {"sha": "c00fa7d44868cc45cbf3831fa0c85848cf18a486", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c00fa7d44868cc45cbf3831fa0c85848cf18a486"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2042872573c41ee6974a0f8e708799e9a8524996", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2042872573c41ee6974a0f8e708799e9a8524996", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2042872573c41ee6974a0f8e708799e9a8524996", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2042872573c41ee6974a0f8e708799e9a8524996/comments", "author": null, "committer": null, "parents": [{"sha": "e8b803e6e520f204be7e6bcc7b402934fefe022e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8b803e6e520f204be7e6bcc7b402934fefe022e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8b803e6e520f204be7e6bcc7b402934fefe022e"}], "stats": {"total": 80, "additions": 52, "deletions": 28}, "files": [{"sha": "fc96642975c0996f00aab7ab661f352b6d26452a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2042872573c41ee6974a0f8e708799e9a8524996", "patch": "@@ -1,3 +1,36 @@\n+2011-09-05  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* exp_aggr.adb (Replace_Type): If the target of the assignment is\n+\ta selected component and the right-hand side is a self-referential\n+\taccess, the proper prefix of the rewritten attribute is a copy\n+\tof the left-hand side, not of its prefix.\n+\n+2011-09-05  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_ch5.adb: Minor reformatting.\n+\t* sem_ch3.adb: Minor code clean up.\n+\n+2011-09-05  Jose Ruiz  <ruiz@adacore.com>\n+\n+\t* exp_ch9.adb (Make_Initialize_Protection): The fact that\n+\trestriction No_Dynamic_Attachment is in effect or not should\n+\tnot influence the default priority associated to a protected\n+\tobject. With this change, when the restriction is in effect (as\n+\tis the case for the Ravenscar profile) the default priority of\n+\ta protected object with an interrupt handler is in the range of\n+\tinterrupt priorities (Default_Interrupt_Priority) as required\n+\tby D.3(10).\n+\n+2011-09-05  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* a-iteint.ads: Fix header.\n+\n+2011-09-05  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-conf.adb (Do_Autoconf): Make sure Obj_Dir always ends\n+\twith a directory separator to avoid output such as:\n+\t  \"/path/to/objauto.cgpr\" has been deleted.\n+\n 2011-09-05  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_ch3.adb: Minor reformatting."}, {"sha": "f0e1659c53195c811d5b06174f47060efed03f1f", "filename": "gcc/ada/a-iteint.ads", "status": "modified", "additions": 4, "deletions": 20, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fa-iteint.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fa-iteint.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-iteint.ads?ref=2042872573c41ee6974a0f8e708799e9a8524996", "patch": "@@ -6,34 +6,18 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2004-2011, Free Software Foundation, Inc.         --\n---                                                                          --\n -- This specification is derived from the Ada Reference Manual for use with --\n--- GNAT. The copyright notice above, and the license provisions that follow --\n--- apply solely to the  contents of the part following the private keyword. --\n---                                                                          --\n--- GNAT is free software;  you can  redistribute it  and/or modify it under --\n--- terms of the  GNU General Public License as published  by the Free Soft- --\n--- ware  Foundation;  either version 3,  or (at your option) any later ver- --\n--- sion.  GNAT is distributed in the hope that it will be useful, but WITH- --\n--- OUT ANY WARRANTY;  without even the  implied warranty of MERCHANTABILITY --\n--- or FITNESS FOR A PARTICULAR PURPOSE.                                     --\n---                                                                          --\n--- As a special exception under Section 7 of GPL version 3, you are granted --\n--- additional permissions described in the GCC Runtime Library Exception,   --\n--- version 3.1, as published by the Free Software Foundation.               --\n---                                                                          --\n--- You should have received a copy of the GNU General Public License and    --\n--- a copy of the GCC Runtime Library Exception along with this program;     --\n--- see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see    --\n--- <http://www.gnu.org/licenses/>.                                          --\n+-- GNAT.  In accordance with the copyright of that document, you can freely --\n+-- copy and modify this specification,  provided that if you redistribute a --\n+-- modified version,  any changes that you have made are clearly indicated. --\n --                                                                          --\n ------------------------------------------------------------------------------\n \n generic\n    type Cursor;\n    with function Has_Element (Position : Cursor) return Boolean;\n    pragma Unreferenced (Has_Element);\n+\n package Ada.Iterator_Interfaces is\n    pragma Pure;\n "}, {"sha": "74a7edf629c5d5af4b702be6b757e7a39d19eef2", "filename": "gcc/ada/exp_aggr.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fexp_aggr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fexp_aggr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_aggr.adb?ref=2042872573c41ee6974a0f8e708799e9a8524996", "patch": "@@ -2168,7 +2168,7 @@ package body Exp_Aggr is\n                Rewrite (Expr,\n                  Make_Attribute_Reference (Loc,\n                    Attribute_Name => Name_Unrestricted_Access,\n-                   Prefix         => New_Copy_Tree (Prefix (Lhs))));\n+                   Prefix         => New_Copy_Tree (Lhs)));\n                Set_Analyzed (Parent (Expr), False);\n \n             else"}, {"sha": "bbdb56be33856d0db33f243c7eaf420468423c4a", "filename": "gcc/ada/exp_ch9.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fexp_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fexp_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch9.adb?ref=2042872573c41ee6974a0f8e708799e9a8524996", "patch": "@@ -12503,8 +12503,8 @@ package body Exp_Ch9 is\n       --  When no priority is specified but an xx_Handler pragma is, we default\n       --  to System.Interrupts.Default_Interrupt_Priority, see D.3(10).\n \n-      elsif (Has_Attach_Handler (Ptyp) or else Has_Interrupt_Handler (Ptyp))\n-        and then not Restriction_Active (No_Dynamic_Attachment)\n+      elsif Has_Attach_Handler (Ptyp)\n+        or else Has_Interrupt_Handler (Ptyp)\n       then\n          Append_To (Args,\n            New_Reference_To (RTE (RE_Default_Interrupt_Priority), Loc));"}, {"sha": "1514107effbf6e9d709591461cdd61553ff878ab", "filename": "gcc/ada/prj-conf.adb", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fprj-conf.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fprj-conf.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-conf.adb?ref=2042872573c41ee6974a0f8e708799e9a8524996", "patch": "@@ -959,6 +959,13 @@ package body Prj.Conf is\n             end if;\n          end loop;\n \n+         --  Make sure that Obj_Dir ends with a directory separator\n+\n+         if Name_Buffer (Name_Len) /= Directory_Separator then\n+            Name_Len := Name_Len + 1;\n+            Name_Buffer (Name_Len) := Directory_Separator;\n+         end if;\n+\n          declare\n             Obj_Dir         : constant String := Name_Buffer (1 .. Name_Len);\n             Config_Switches : Argument_List_Access;"}, {"sha": "8a36be79a4569853c9c38aa10fba0bb1df0a1ca5", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=2042872573c41ee6974a0f8e708799e9a8524996", "patch": "@@ -3270,11 +3270,7 @@ package body Sem_Ch3 is\n          --  In SPARK, a declaration of unconstrained type is allowed\n          --  only for constants of type string.\n \n-         --  Why do we need to test Original_Node here ???\n-\n-         if Is_String_Type (T)\n-           and then not Constant_Present (Original_Node (N))\n-         then\n+         if Is_String_Type (T) and then not Constant_Present (N) then\n             Check_SPARK_Restriction\n               (\"declaration of object of unconstrained type not allowed\",\n                N);"}, {"sha": "d22f6ce792e8b4b4b6791372fc43b1bea0310681", "filename": "gcc/ada/sem_ch5.adb", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fsem_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2042872573c41ee6974a0f8e708799e9a8524996/gcc%2Fada%2Fsem_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch5.adb?ref=2042872573c41ee6974a0f8e708799e9a8524996", "patch": "@@ -2337,10 +2337,14 @@ package body Sem_Ch5 is\n          if Of_Present (N) then\n             Set_Etype (Def_Id, Component_Type (Typ));\n \n+         --  Here we have a missing Range attribute\n+\n          else\n             Error_Msg_N\n               (\"missing Range attribute in iteration over an array\", N);\n \n+            --  In Ada 2012 mode, this may be an attempt at an iterator\n+\n             if Ada_Version >= Ada_2012 then\n                Error_Msg_NE\n                  (\"\\if& is meant to designate an element of the array, use OF\","}]}