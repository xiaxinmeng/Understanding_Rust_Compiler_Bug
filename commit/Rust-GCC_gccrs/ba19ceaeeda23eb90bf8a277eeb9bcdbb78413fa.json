{"sha": "ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmExOWNlYWVlZGEyM2ViOTBiZjhhMjc3ZWViOWJjZGJiNzg0MTNmYQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2006-10-15T19:46:26Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2006-10-15T19:46:26Z"}, "message": "re PR middle-end/29241 ([non unit-at-a-time] ICE with always inline)\n\n\tPR middle-end/29241\n\t* cgraphunit.c (cgraph_preserve_function_body_p): Preserve functions\n\tdeclared always_inline even when not inlining.\n\n\t* gcc.c-torture/compile/pr29241.c: New testcase.\n\nFrom-SVN: r117753", "tree": {"sha": "1902397fabe9819b2a235506aa5e63af0363f012", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1902397fabe9819b2a235506aa5e63af0363f012"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/comments", "author": null, "committer": null, "parents": [{"sha": "564738dfd1e2f0d3182d811d7abafd9391208ed8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/564738dfd1e2f0d3182d811d7abafd9391208ed8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/564738dfd1e2f0d3182d811d7abafd9391208ed8"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "2676f32b6f62697e825a68e72f34eb439eac83bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "patch": "@@ -1,3 +1,9 @@\n+2006-10-15  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/29241\n+\t* cgraphunit.c (cgraph_preserve_function_body_p): Preserve functions\n+\tdeclared always_inline even when not inlining.\n+\n 2006-10-15  Eric Botcazou  <ebotcazou@libertysurf.fr>\n             John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n             Andrew Pinski  <pinskia@gmail.com>"}, {"sha": "309fb73f01235ccd37f10d68b803a6e9b934510d", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "patch": "@@ -1494,7 +1494,9 @@ cgraph_preserve_function_body_p (tree decl)\n {\n   struct cgraph_node *node;\n   if (!cgraph_global_info_ready)\n-    return (DECL_INLINE (decl) && !flag_really_no_inline);\n+    return (flag_really_no_inline\n+\t    ? lang_hooks.tree_inlining.disregard_inline_limits (decl)\n+\t    : DECL_INLINE (decl));\n   /* Look if there is any clone around.  */\n   for (node = cgraph_node (decl); node; node = node->next_clone)\n     if (node->global.inlined_to)"}, {"sha": "33d2825fc1cf036cb8eac76bd16a6e124b60031b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "patch": "@@ -1,3 +1,8 @@\n+2006-10-15  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/29241\n+\t* gcc.c-torture/compile/pr29241.c: New testcase.\n+\n 2006-10-15  David Edelsohn  <edelsohn@gnu.org>\n \n \tPR middle-end/29250"}, {"sha": "6db15c1c13b30eaa0d2d9c3317e7a2a46c30dac6", "filename": "gcc/testsuite/gcc.c-torture/compile/pr29241.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr29241.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr29241.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr29241.c?ref=ba19ceaeeda23eb90bf8a277eeb9bcdbb78413fa", "patch": "@@ -0,0 +1,15 @@\n+static inline __attribute__((always_inline)) void ip_finish_output2(){}\n+void ip_fragment(void (*)(void));\n+static inline __attribute__((always_inline)) void ip_finish_output()\n+{\n+ ip_fragment(ip_finish_output2);\n+ ip_finish_output2();\n+}\n+void ip_mc_output()\n+{\n+ ip_finish_output();\n+}\n+void ip_output()\n+{\n+ ip_finish_output();\n+}"}]}