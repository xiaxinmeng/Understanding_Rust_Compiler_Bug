{"sha": "362badb092f963572a3be89c74bc814162b024bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzYyYmFkYjA5MmY5NjM1NzJhM2JlODljNzRiYzgxNDE2MmIwMjRiZg==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@scf.usc.edu", "date": "1998-03-20T18:11:26Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-03-20T18:11:26Z"}, "message": "* pt.c (tsubst, TEMPLATE_TEMPLATE_PARM): Simplify.\n\nFrom-SVN: r18735", "tree": {"sha": "94b64fe0f99ddb0d3ecbc900981f538d85919e36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/94b64fe0f99ddb0d3ecbc900981f538d85919e36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/362badb092f963572a3be89c74bc814162b024bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/362badb092f963572a3be89c74bc814162b024bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/362badb092f963572a3be89c74bc814162b024bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/362badb092f963572a3be89c74bc814162b024bf/comments", "author": null, "committer": null, "parents": [{"sha": "990249560440183d0dfac65faf64be91fdbeed03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/990249560440183d0dfac65faf64be91fdbeed03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/990249560440183d0dfac65faf64be91fdbeed03"}], "stats": {"total": 27, "additions": 13, "deletions": 14}, "files": [{"sha": "dd33cd6fa18c63e63d840f28a3f81136657f3b02", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/362badb092f963572a3be89c74bc814162b024bf/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/362badb092f963572a3be89c74bc814162b024bf/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=362badb092f963572a3be89c74bc814162b024bf", "patch": "@@ -1,3 +1,7 @@\n+Fri Mar 20 18:07:39 1998  Kriang Lerdsuwanakij  <lerdsuwa@scf.usc.edu>\n+\n+\t* pt.c (tsubst, TEMPLATE_TEMPLATE_PARM): Simplify.\n+\n Fri Mar 20 10:42:07 1998  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* decl.c (make_implicit_typename): Rewrite removed code."}, {"sha": "3454b6e33a8224284b2f23d7c2f9dd629b97d3e3", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 9, "deletions": 14, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/362badb092f963572a3be89c74bc814162b024bf/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/362badb092f963572a3be89c74bc814162b024bf/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=362badb092f963572a3be89c74bc814162b024bf", "patch": "@@ -3689,27 +3689,22 @@ tsubst (t, args, in_decl)\n \t  {\n \t  case TEMPLATE_TYPE_PARM:\n \t  case TEMPLATE_TEMPLATE_PARM:\n-\n-\t    if (TREE_CODE (t) == TEMPLATE_TEMPLATE_PARM\n-\t\t&& CLASSTYPE_TEMPLATE_INFO (t))\n-\t      {\n-\t\ttree argvec = tsubst (CLASSTYPE_TI_ARGS (t),\n-\t\t\t\t      args, in_decl);\n-\t\tr = lookup_template_class (TYPE_NAME (t), argvec, in_decl, \n-\t\t\t\t\t   DECL_CONTEXT (TYPE_NAME (t)));\n-\t\tr = cp_build_type_variant (r, TYPE_READONLY (t),\n-\t\t\t\t\t   TYPE_VOLATILE (t));\n-\t      }\n-\t    else\n-\t      r = copy_node (t);\n-\n+\t    r = copy_node (t);\n \t    TEMPLATE_TYPE_PARM_INDEX (r)\n \t      = reduce_template_parm_level (TEMPLATE_TYPE_PARM_INDEX (t),\n \t\t\t\t\t    r, levels);\n \t    TYPE_STUB_DECL (r) = TYPE_NAME (r) = TEMPLATE_TYPE_DECL (r);\n \t    TYPE_MAIN_VARIANT (r) = r;\n \t    TYPE_POINTER_TO (r) = NULL_TREE;\n \t    TYPE_REFERENCE_TO (r) = NULL_TREE;\n+\n+\t    if (TREE_CODE (t) == TEMPLATE_TEMPLATE_PARM\n+\t\t&& CLASSTYPE_TEMPLATE_INFO (t))\n+\t      {\n+\t\ttree argvec = tsubst (CLASSTYPE_TI_ARGS (t), args, in_decl);\n+\t\tCLASSTYPE_TEMPLATE_INFO (r)\n+\t\t  = perm_tree_cons (TYPE_NAME (t), argvec, NULL_TREE);\n+\t      }\n \t    break;\n \n \t  case TEMPLATE_PARM_INDEX:"}]}