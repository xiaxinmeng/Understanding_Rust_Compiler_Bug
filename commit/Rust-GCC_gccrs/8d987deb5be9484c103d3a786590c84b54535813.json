{"sha": "8d987deb5be9484c103d3a786590c84b54535813", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ5ODdkZWI1YmU5NDg0YzEwM2QzYTc4NjU5MGM4NGI1NDUzNTgxMw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-09-16T17:55:38Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-09-16T17:55:38Z"}, "message": "re PR fortran/77612 (ICE on invalid character len in contained procedure)\n\n2016-09-16  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/77612\n\t* decl.c (char_len_param_value): Check parent namespace for \n\tseen_implicit_none.\n\n\n2016-09-16  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/77612\n\t* gfortran.dg/pr77612.f90: New test.\n\nFrom-SVN: r240191", "tree": {"sha": "479051f0bfcb474681d6d794d5fd09b133bafdb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/479051f0bfcb474681d6d794d5fd09b133bafdb6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d987deb5be9484c103d3a786590c84b54535813", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d987deb5be9484c103d3a786590c84b54535813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d987deb5be9484c103d3a786590c84b54535813", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d987deb5be9484c103d3a786590c84b54535813/comments", "author": null, "committer": null, "parents": [{"sha": "426042f5f227944c12fbdfb597e078cfbcb1e13d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/426042f5f227944c12fbdfb597e078cfbcb1e13d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/426042f5f227944c12fbdfb597e078cfbcb1e13d"}], "stats": {"total": 32, "additions": 29, "deletions": 3}, "files": [{"sha": "5954c73f4047a3e23bdb00f1601669ef23f5a3e0", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8d987deb5be9484c103d3a786590c84b54535813", "patch": "@@ -1,4 +1,11 @@\n+2016-09-16  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/77612\n+\t* decl.c (char_len_param_value): Check parent namespace for \n+\tseen_implicit_none.\n+\n 2016-09-15  Louis Krupp  <louis.krupp@zoho.com>\n+\n \tPR fortran/69963\n \t* parse.c (reject_statement): Clear charlen pointers in implicit\n \tcharacter typespecs before those charlen structures are freed."}, {"sha": "c83e9d4d7915c140e4668627120dc200e6959f8e", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=8d987deb5be9484c103d3a786590c84b54535813", "patch": "@@ -920,9 +920,10 @@ char_len_param_value (gfc_expr **expr, bool *deferred)\n \n       t = gfc_reduce_init_expr (e);\n \n-      if (!t && (e->ts.type == BT_UNKNOWN\n-\t\t && e->symtree->n.sym->attr.untyped == 1\n-\t\t && e->symtree->n.sym->ns->seen_implicit_none == 1))\n+      if (!t && e->ts.type == BT_UNKNOWN\n+\t  && e->symtree->n.sym->attr.untyped == 1\n+\t  && (e->symtree->n.sym->ns->seen_implicit_none == 1\n+\t      || e->symtree->n.sym->ns->parent->seen_implicit_none == 1))\n \t{\n \t  gfc_free_expr (e);\n \t  goto syntax;"}, {"sha": "3c992548d111a139a761b2097d647161aacd704b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8d987deb5be9484c103d3a786590c84b54535813", "patch": "@@ -1,3 +1,8 @@\n+2016-09-16  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/77612\n+\t* gfortran.dg/pr77612.f90: New test.\n+\n 2016-09-16  Senthil Kumar Selvaraj  <senthil_kumar.selvaraj@atmel.com>\n \n \t* gcc.dg/torture/pr70421.c: Require int32plus."}, {"sha": "7bc5a492c789494f753c83c959fe49c6e76730e5", "filename": "gcc/testsuite/gfortran.dg/pr77612.f90", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr77612.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d987deb5be9484c103d3a786590c84b54535813/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr77612.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr77612.f90?ref=8d987deb5be9484c103d3a786590c84b54535813", "patch": "@@ -0,0 +1,13 @@\n+! { dg-do compile }\n+\n+program bad_len\n+\n+  implicit none\n+\n+contains\n+\n+  subroutine sub\n+    character(len = ICE) :: line ! { dg-error \"INTEGER expression expected\" }\n+  end subroutine\n+\n+end program"}]}