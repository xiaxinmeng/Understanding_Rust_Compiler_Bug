{"sha": "217c4f5393976eb36dc759957cec82513c1f85e1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE3YzRmNTM5Mzk3NmViMzZkYzc1OTk1N2NlYzgyNTEzYzFmODVlMQ==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2009-07-17T19:40:23Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2009-07-17T19:40:23Z"}, "message": "When finalizing I/O transfer, set current_record to 0 before returning.\n\nPR libfortran/40714\n\nCo-Authored-By: Jerry DeLisle <jvdelisle@gcc.gnu.org>\n\nFrom-SVN: r149757", "tree": {"sha": "3b7e875280b0d4f1359830ee122c4bd052dcc4a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b7e875280b0d4f1359830ee122c4bd052dcc4a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/217c4f5393976eb36dc759957cec82513c1f85e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/217c4f5393976eb36dc759957cec82513c1f85e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/217c4f5393976eb36dc759957cec82513c1f85e1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/217c4f5393976eb36dc759957cec82513c1f85e1/comments", "author": null, "committer": null, "parents": [{"sha": "23b1a789fd78c9a5bd2957d2375fad585bb5e060", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23b1a789fd78c9a5bd2957d2375fad585bb5e060", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23b1a789fd78c9a5bd2957d2375fad585bb5e060"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "23746839c5de78bf86ce163e5bdf1b1ab39cb516", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/217c4f5393976eb36dc759957cec82513c1f85e1/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/217c4f5393976eb36dc759957cec82513c1f85e1/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=217c4f5393976eb36dc759957cec82513c1f85e1", "patch": "@@ -1,3 +1,10 @@\n+2009-07-17  Janne Blomqvist  <jb@gcc.gnu.org>\n+\t    Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\t\t\n+\tPR libfortran/40714\n+\t* io/transfer.c (finalize_transfer): Set current_record to 0\n+\tbefore returning in case of error.\n+\n 2009-07-12  Tobias Burnus  <burnus@net-b.de>\n \n \tPR libfortran/22423"}, {"sha": "59f88d4fb9bb862f1f0b23bd4ffb62c1cf66dadb", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/217c4f5393976eb36dc759957cec82513c1f85e1/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/217c4f5393976eb36dc759957cec82513c1f85e1/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=217c4f5393976eb36dc759957cec82513c1f85e1", "patch": "@@ -3103,7 +3103,11 @@ finalize_transfer (st_parameter_dt *dtp)\n     }\n \n   if ((dtp->common.flags & IOPARM_LIBRETURN_MASK) != IOPARM_LIBRETURN_OK)\n-    return;\n+    {\n+      if (dtp->u.p.current_unit && current_mode (dtp) == UNFORMATTED_SEQUENTIAL)\n+\tdtp->u.p.current_unit->current_record = 0;\n+      return;\n+    }\n \n   if ((dtp->u.p.ionml != NULL)\n       && (cf & IOPARM_DT_HAS_NAMELIST_NAME) != 0)"}]}