{"sha": "2c703f3a6a2a283318a0678fc8a5eba27b6663df", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM3MDNmM2E2YTJhMjgzMzE4YTA2NzhmYzhhNWViYTI3YjY2NjNkZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-05-12T11:54:33Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-05-12T11:54:33Z"}, "message": "re PR debug/48967 (ICE during use_narrower_mode)\n\n\tPR debug/48967\n\t* var-tracking.c (use_narrower_mode_test) <case REG>: Return 1\n\tif validate_subreg fails.\n\n\t* g++.dg/opt/pr48967.C: New test.\n\nFrom-SVN: r173701", "tree": {"sha": "16b23a19fb0e88769f1641dcb70af0e8ffd96569", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16b23a19fb0e88769f1641dcb70af0e8ffd96569"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c703f3a6a2a283318a0678fc8a5eba27b6663df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c703f3a6a2a283318a0678fc8a5eba27b6663df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c703f3a6a2a283318a0678fc8a5eba27b6663df", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c703f3a6a2a283318a0678fc8a5eba27b6663df/comments", "author": null, "committer": null, "parents": [{"sha": "35d828c58ba757ef44380f1eb6a5a4d1c325da6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35d828c58ba757ef44380f1eb6a5a4d1c325da6b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35d828c58ba757ef44380f1eb6a5a4d1c325da6b"}], "stats": {"total": 115, "additions": 114, "deletions": 1}, "files": [{"sha": "6f994adaedbe6fcb18ca2ffdc616170a5fc61be7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c703f3a6a2a283318a0678fc8a5eba27b6663df", "patch": "@@ -1,4 +1,10 @@\n-2011-05-12  Hariharan Sandanagobalane <hariharan@picochip.com>\n+2011-05-12  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/48967\n+\t* var-tracking.c (use_narrower_mode_test) <case REG>: Return 1\n+\tif validate_subreg fails.\n+\n+2011-05-12  Hariharan Sandanagobalane  <hariharan@picochip.com>\n \n \t* ira.c (clarify_prohibited_class_mode_regs): Prevent the function from\n \taccessing beyond the end of REGNO_REG_CLASS array by stopping the loop"}, {"sha": "b0b337445adabf051da666b9806e38fa7348c841", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2c703f3a6a2a283318a0678fc8a5eba27b6663df", "patch": "@@ -1,3 +1,8 @@\n+2011-05-12  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/48967\n+\t* g++.dg/opt/pr48967.C: New test.\n+\n 2011-05-11  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/constexpr-friend.C: New."}, {"sha": "db2ea5474e41df7a9d11c6d85379c0132793bd03", "filename": "gcc/testsuite/g++.dg/opt/pr48967.C", "status": "added", "additions": 98, "deletions": 0, "changes": 98, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr48967.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr48967.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr48967.C?ref=2c703f3a6a2a283318a0678fc8a5eba27b6663df", "patch": "@@ -0,0 +1,98 @@\n+// PR debug/48967\n+// { dg-do compile }\n+// { dg-options \"-g -O2\" }\n+\n+template <typename> struct A;\n+template <typename T> struct A <T *>\n+{\n+  typedef T ref;\n+};\n+template <typename T, typename> struct B\n+{\n+  typedef A <T> t;\n+  typedef typename t::ref ref;\n+  ref operator * () { return ref (); }\n+};\n+template <typename T> struct I\n+{\n+  typedef T *cp;\n+  template <typename T1> struct J\n+  {\n+    typedef I <T1> other;\n+  };\n+};\n+template <typename T> struct S : public I <T>\n+{\n+};\n+template <typename T, typename _A> struct E\n+{\n+  typedef typename _A::template J <T>::other at;\n+};\n+template <typename T, typename _A = S <T> > struct D\n+{\n+  typedef E <T, _A> _Base;\n+  typedef typename _Base::at at;\n+  typedef typename at::cp cp;\n+  typedef B <cp, D> H;\n+};\n+template <class T> struct F\n+{\n+  T *operator -> () { return __null; }\n+};\n+template <typename T> long\n+lfloor (T x)\n+{\n+  return static_cast <long>(x) - (x && x != static_cast <long>(x));\n+}\n+template <typename T> long\n+lround (T x)\n+{\n+  return lfloor (x - 0.5) + 1;\n+}\n+class M;\n+template <typename> class P;\n+typedef P <M> Q;\n+template <typename> struct P\n+{\n+  float x ();\n+};\n+struct CV\n+{\n+  Q c;\n+};\n+struct C\n+{\n+  void foo (const CV &) const;\n+  class O;\n+  typedef D <F <O> > R;\n+  R n;\n+};\n+struct S3\n+{\n+  S3 (int, int);\n+};\n+struct S2\n+{\n+  S3 sx, sy;\n+  S2 (int x = 0, int y = 0, int s = 0, int t = 0) : sx (x, y), sy (s, t) {}\n+};\n+template <typename> struct N\n+{\n+  int bar ();\n+};\n+struct C::O\n+{\n+  N <float> o;\n+  void foo (CV r, int)\n+  {\n+    Q c = r.c;\n+    float t = 0.5 * (o.bar ());\n+    S2 (lround (c.x ()), t);\n+  }\n+};\n+void\n+C::foo (const CV &w) const\n+{\n+  R::H m;\n+  (*m)->foo (w, 8);\n+}"}, {"sha": "278f546a86080a90b913db9b57330ead4b7b51d0", "filename": "gcc/var-tracking.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2Fvar-tracking.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c703f3a6a2a283318a0678fc8a5eba27b6663df/gcc%2Fvar-tracking.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvar-tracking.c?ref=2c703f3a6a2a283318a0678fc8a5eba27b6663df", "patch": "@@ -745,6 +745,10 @@ use_narrower_mode_test (rtx *loc, void *data)\n     case REG:\n       if (cselib_lookup (*loc, GET_MODE (SUBREG_REG (subreg)), 0, VOIDmode))\n \treturn 1;\n+      if (!validate_subreg (GET_MODE (subreg), GET_MODE (*loc),\n+\t\t\t    *loc, subreg_lowpart_offset (GET_MODE (subreg),\n+\t\t\t\t\t\t\t GET_MODE (*loc))))\n+\treturn 1;\n       return -1;\n     case PLUS:\n     case MINUS:"}]}