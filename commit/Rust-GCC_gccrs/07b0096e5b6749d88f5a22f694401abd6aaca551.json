{"sha": "07b0096e5b6749d88f5a22f694401abd6aaca551", "node_id": "C_kwDOANBUbNoAKDA3YjAwOTZlNWI2NzQ5ZDg4ZjVhMjJmNjk0NDAxYWJkNmFhY2E1NTE", "commit": {"author": {"name": "Bernhard Reutner-Fischer", "email": "aldot@gcc.gnu.org", "date": "2022-11-03T20:52:51Z"}, "committer": {"name": "Bernhard Reutner-Fischer", "email": "aldot@gcc.gnu.org", "date": "2022-11-06T00:53:20Z"}, "message": "Plug memory leak in attribute target_clones\n\nIt looks like there was some memory leak in the handling\nof attribute target_clones.\n\nOk for trunk if testing passes?\n\ngcc/ChangeLog:\n\n\t* multiple_target.cc (expand_target_clones): Free memory.\n\nSigned-off-by: Bernhard Reutner-Fischer <aldot@gcc.gnu.org>", "tree": {"sha": "325c01a37b3e616615d35c86c73624d0284a7c91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/325c01a37b3e616615d35c86c73624d0284a7c91"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07b0096e5b6749d88f5a22f694401abd6aaca551", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07b0096e5b6749d88f5a22f694401abd6aaca551", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07b0096e5b6749d88f5a22f694401abd6aaca551", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07b0096e5b6749d88f5a22f694401abd6aaca551/comments", "author": null, "committer": null, "parents": [{"sha": "efbf11e97b476d7f85a3d5c599a6c11e211362e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/efbf11e97b476d7f85a3d5c599a6c11e211362e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/efbf11e97b476d7f85a3d5c599a6c11e211362e8"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "77e0f21dd055cb572d06bc409577c47b2926e881", "filename": "gcc/multiple_target.cc", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07b0096e5b6749d88f5a22f694401abd6aaca551/gcc%2Fmultiple_target.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07b0096e5b6749d88f5a22f694401abd6aaca551/gcc%2Fmultiple_target.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmultiple_target.cc?ref=07b0096e5b6749d88f5a22f694401abd6aaca551", "patch": "@@ -390,19 +390,23 @@ expand_target_clones (struct cgraph_node *node, bool definition)\n   for (i = 0; i < attrnum; i++)\n     {\n       char *attr = attrs[i];\n-      char *suffix = XNEWVEC (char, strlen (attr) + 1);\n \n-      create_new_asm_name (attr, suffix);\n       /* Create new target clone.  */\n       tree attributes = make_attribute (\"target\", attr,\n \t\t\t\t\tDECL_ATTRIBUTES (node->decl));\n \n+      char *suffix = XNEWVEC (char, strlen (attr) + 1);\n+      create_new_asm_name (attr, suffix);\n       cgraph_node *new_node = create_target_clone (node, definition, suffix,\n \t\t\t\t\t\t   attributes);\n+      XDELETEVEC (suffix);\n       if (new_node == NULL)\n-\treturn false;\n+\t{\n+\t  XDELETEVEC (attrs);\n+\t  XDELETEVEC (attr_str);\n+\t  return false;\n+\t}\n       new_node->local = false;\n-      XDELETEVEC (suffix);\n \n       decl2_v = new_node->function_version ();\n       if (decl2_v != NULL)"}]}