{"sha": "0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVlYjlmM2Q3Y2I5MmQwZTMyZmI3ZTIwNmJhNjFlYzc0MjY4YzM4Ng==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-09-18T09:15:32Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-09-18T09:15:32Z"}, "message": "re PR target/81361 (broken exception handling at -O2)\n\n\tPR target/81361\n\t* dwarf2cfi.c (add_cfis_to_fde): Do not generate DW_CFA_set_loc after\n\tswitching to a new text section.\n\nFrom-SVN: r252914", "tree": {"sha": "1d23d9725179797fa2dfe0145137e045f48ccbcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d23d9725179797fa2dfe0145137e045f48ccbcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386/comments", "author": null, "committer": null, "parents": [{"sha": "845af9e6dd60d34cbcda3c95d36adc57985a13a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/845af9e6dd60d34cbcda3c95d36adc57985a13a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/845af9e6dd60d34cbcda3c95d36adc57985a13a9"}], "stats": {"total": 19, "additions": 8, "deletions": 11}, "files": [{"sha": "17b0d7c71f98afbfb5a38c90f313d0f19530eb8f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "patch": "@@ -1,3 +1,9 @@\n+2017-09-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR target/81361\n+\t* dwarf2cfi.c (add_cfis_to_fde): Do not generate DW_CFA_set_loc after\n+\tswitching to a new text section.\n+\n 2017-09-18  Richard Biener  <rguenther@suse.de>\n \n \t* graphite-scop-detection.c (scop_detection::stmt_has_simple_data_ref):"}, {"sha": "45b5e3099d2bb7bb82ccfac2b520db47315767e0", "filename": "gcc/dwarf2cfi.c", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386/gcc%2Fdwarf2cfi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386/gcc%2Fdwarf2cfi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2cfi.c?ref=0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "patch": "@@ -2209,20 +2209,13 @@ add_cfis_to_fde (void)\n {\n   dw_fde_ref fde = cfun->fde;\n   rtx_insn *insn, *next;\n-  /* We always start with a function_begin label.  */\n-  bool first = false;\n \n   for (insn = get_insns (); insn; insn = next)\n     {\n       next = NEXT_INSN (insn);\n \n       if (NOTE_P (insn) && NOTE_KIND (insn) == NOTE_INSN_SWITCH_TEXT_SECTIONS)\n-\t{\n-\t  fde->dw_fde_switch_cfi_index = vec_safe_length (fde->dw_fde_cfi);\n-\t  /* Don't attempt to advance_loc4 between labels\n-\t     in different sections.  */\n-\t  first = true;\n-\t}\n+\tfde->dw_fde_switch_cfi_index = vec_safe_length (fde->dw_fde_cfi);\n \n       if (NOTE_P (insn) && NOTE_KIND (insn) == NOTE_INSN_CFI)\n \t{\n@@ -2247,8 +2240,7 @@ add_cfis_to_fde (void)\n \n \t      /* Set the location counter to the new label.  */\n \t      xcfi = new_cfi ();\n-\t      xcfi->dw_cfi_opc = (first ? DW_CFA_set_loc\n-\t\t\t\t  : DW_CFA_advance_loc4);\n+\t      xcfi->dw_cfi_opc = DW_CFA_advance_loc4;\n \t      xcfi->dw_cfi_oprnd1.dw_cfi_addr = label;\n \t      vec_safe_push (fde->dw_fde_cfi, xcfi);\n \n@@ -2263,7 +2255,6 @@ add_cfis_to_fde (void)\n \t      insn = NEXT_INSN (insn);\n \t    }\n \t  while (insn != next);\n-\t  first = false;\n \t}\n     }\n }"}]}