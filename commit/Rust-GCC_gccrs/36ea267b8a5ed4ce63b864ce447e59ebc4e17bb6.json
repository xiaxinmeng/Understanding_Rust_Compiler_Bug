{"sha": "36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzZlYTI2N2I4YTVlZDRjZTYzYjg2NGNlNDQ3ZTU5ZWJjNGUxN2JiNg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2011-01-28T19:49:25Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2011-01-28T19:49:25Z"}, "message": "re PR fortran/47507 (PURE functions with VALUE arguments invalidly rejectd)\n\n2011-01-28  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/47507\n        * resolve.c (resolve_formal_arglist): Allow arguments with VALUE\n        attribute also without INTENT.\n\n2011-01-28  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/47507\n        * gfortran.dg/pure_formal_1.f90: New.\n\nFrom-SVN: r169372", "tree": {"sha": "0b7402a91c513d3f4534f6e36ee16a517b28e7dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b7402a91c513d3f4534f6e36ee16a517b28e7dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5582f599f61e783867a944f192f34e6ad1b764ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5582f599f61e783867a944f192f34e6ad1b764ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5582f599f61e783867a944f192f34e6ad1b764ca"}], "stats": {"total": 39, "additions": 34, "deletions": 5}, "files": [{"sha": "b7064921b43c85b1f3ef41066b2d1a8381329745", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "patch": "@@ -1,3 +1,9 @@\n+2011-01-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/47507\n+\t* resolve.c (resolve_formal_arglist): Allow arguments with VALUE\n+\tattribute also without INTENT.\n+\n 2011-01-28  Tobias Burnus  <burnus@net-b.de>\n \n \t* gfortran.texi (Fortran 2003 status): Mention support for"}, {"sha": "55b5183776fcd3953fb14ee1e09b44cef4343a19", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "patch": "@@ -338,15 +338,17 @@ resolve_formal_arglist (gfc_symbol *proc)\n       if (gfc_pure (proc) && !sym->attr.pointer\n \t  && sym->attr.flavor != FL_PROCEDURE)\n \t{\n-\t  if (proc->attr.function && sym->attr.intent != INTENT_IN)\n+\t  if (proc->attr.function && sym->attr.intent != INTENT_IN\n+\t      && !sym->attr.value)\n \t    gfc_error (\"Argument '%s' of pure function '%s' at %L must be \"\n-\t\t       \"INTENT(IN)\", sym->name, proc->name,\n+\t\t       \"INTENT(IN) or VALUE\", sym->name, proc->name,\n \t\t       &sym->declared_at);\n \n-\t  if (proc->attr.subroutine && sym->attr.intent == INTENT_UNKNOWN)\n+\t  if (proc->attr.subroutine && sym->attr.intent == INTENT_UNKNOWN\n+\t      && !sym->attr.value)\n \t    gfc_error (\"Argument '%s' of pure subroutine '%s' at %L must \"\n-\t\t       \"have its INTENT specified\", sym->name, proc->name,\n-\t\t       &sym->declared_at);\n+\t\t       \"have its INTENT specified or have the VALUE \"\n+\t\t       \"attribute\", sym->name, proc->name, &sym->declared_at);\n \t}\n \n       if (proc->attr.implicit_pure && !sym->attr.pointer"}, {"sha": "892a5437a20ed8142f97782e27550a708690f66c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "patch": "@@ -1,3 +1,8 @@\n+2011-01-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/47507\n+\t* gfortran.dg/pure_formal_1.f90: New.\n+\n 2011-01-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/42894"}, {"sha": "4e62cf9dee67cad79e9cd657a982d7ece7425108", "filename": "gcc/testsuite/gfortran.dg/pure_formal_1.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpure_formal_1.f90?ref=36ea267b8a5ed4ce63b864ce447e59ebc4e17bb6", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do compile }\n+!\n+! PR fortran/47507\n+!\n+! PURE procedures: Allow arguments w/o INTENT if they are VALUE\n+!\n+\n+pure function f(x)\n+  real, VALUE :: x\n+  real :: f\n+  f = sin(x)\n+end function f\n+\n+pure subroutine sub(x)\n+  real, VALUE :: x\n+end subroutine sub"}]}