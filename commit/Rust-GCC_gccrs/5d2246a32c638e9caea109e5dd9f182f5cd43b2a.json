{"sha": "5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQyMjQ2YTMyYzYzOGU5Y2FlYTEwOWU1ZGQ5ZjE4MmY1Y2Q0M2IyYQ==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2020-05-08T01:10:42Z"}, "committer": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2020-05-18T22:07:18Z"}, "message": "c++: Sorry about type-dependent arg for __builtin_has_attribute [PR90915]\n\nUntil 92104 is fixed, let's sorry rather than crash.\n\n\tPR c++/90915\n\t* parser.c (cp_parser_has_attribute_expression): Sorry on a\n\ttype-dependent argument.\n\n\t* g++.dg/ext/builtin-has-attribute.C: New test.", "tree": {"sha": "a04197831e09ef6c5a636e2ff3c92ceb9c892bb3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a04197831e09ef6c5a636e2ff3c92ceb9c892bb3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a41fcde6c67faafab8c8ee2a31140999383dcef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a41fcde6c67faafab8c8ee2a31140999383dcef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a41fcde6c67faafab8c8ee2a31140999383dcef"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "d8ad1d63bd41e491d9efee02bb50a8e88f4a7a85", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "patch": "@@ -1,3 +1,9 @@\n+2020-05-18  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/90915\n+\t* parser.c (cp_parser_has_attribute_expression): Sorry on a\n+\ttype-dependent argument.\n+\n 2020-05-18  Marek Polacek  <polacek@redhat.com>\n \n \tDR 1512"}, {"sha": "e944841f5a34467cc264ee6aee7e2c7a48984ac7", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "patch": "@@ -8679,7 +8679,12 @@ cp_parser_has_attribute_expression (cp_parser *parser)\n   location_t atloc = cp_lexer_peek_token (parser->lexer)->location;\n   if (tree attr = cp_parser_gnu_attribute_list (parser, /*exactly_one=*/true))\n     {\n-      if (oper != error_mark_node)\n+      if (oper == error_mark_node)\n+\t/* Nothing.  */;\n+      else if (type_dependent_expression_p (oper))\n+\tsorry_at (atloc, \"%<__builtin_has_attribute%> with dependent argument \"\n+\t\t  \"not supported yet\");\n+      else\n \t{\n \t  /* Fold constant expressions used in attributes first.  */\n \t  cp_check_const_attributes (attr);"}, {"sha": "67e9394ed92f09e707af2233216937fec41f6354", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "patch": "@@ -1,3 +1,8 @@\n+2020-05-18  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/90915\n+\t* g++.dg/ext/builtin-has-attribute.C: New test.\n+\n 2020-05-18  Martin Sebor  <msebor@redhat.com>\n \n \tPR middle-end/92815"}, {"sha": "3438dd59ba3d8d8303668e0d1fd78ece8b636a45", "filename": "gcc/testsuite/g++.dg/ext/builtin-has-attribute.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fbuiltin-has-attribute.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d2246a32c638e9caea109e5dd9f182f5cd43b2a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fbuiltin-has-attribute.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fbuiltin-has-attribute.C?ref=5d2246a32c638e9caea109e5dd9f182f5cd43b2a", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/90915\n+// { dg-do compile { target c++11 } }\n+\n+template<typename T>\n+void foo ()\n+{\n+  static_assert(!__builtin_has_attribute(T::a, aligned), \"\"); // { dg-message \"sorry, unimplemented: .__builtin_has_attribute. with dependent argument not supported yet\" }\n+}"}]}