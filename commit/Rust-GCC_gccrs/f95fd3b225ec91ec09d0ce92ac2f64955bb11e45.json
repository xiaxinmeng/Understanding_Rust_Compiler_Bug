{"sha": "f95fd3b225ec91ec09d0ce92ac2f64955bb11e45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk1ZmQzYjIyNWVjOTFlYzA5ZDBjZTkyYWMyZjY0OTU1YmIxMWU0NQ==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2007-06-06T10:40:36Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-06-06T10:40:36Z"}, "message": "prep.ads, prep.adb (Expression): New Boolean parameter Complemented, defaulted to False.\n\n2007-04-20  Vincent Celier  <celier@adacore.com>\n\n\t* prep.ads, prep.adb (Expression): New Boolean parameter Complemented,\n\tdefaulted to False.\n\tIn the \"not\" case, recursive call with Complemented set to True.\n\tDo not allow \"or\" or \"and\" operators when Complemented is True.\n\nFrom-SVN: r125441", "tree": {"sha": "be45f9bbf5629efc95fca1d2011930badfdacb2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be45f9bbf5629efc95fca1d2011930badfdacb2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "af1a7c88790c042e3bf59ae3863f197b397fd561", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af1a7c88790c042e3bf59ae3863f197b397fd561", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af1a7c88790c042e3bf59ae3863f197b397fd561"}], "stats": {"total": 35, "additions": 25, "deletions": 10}, "files": [{"sha": "d6b5d0fa2970f4a1b694bc6d66e6ac2a42c5c6eb", "filename": "gcc/ada/prep.adb", "status": "modified", "additions": 22, "deletions": 8, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45/gcc%2Fada%2Fprep.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45/gcc%2Fada%2Fprep.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprep.adb?ref=f95fd3b225ec91ec09d0ce92ac2f64955bb11e45", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2002-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2002-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,7 +26,6 @@\n \n with Csets;    use Csets;\n with Err_Vars; use Err_Vars;\n-with Namet;    use Namet;\n with Opt;      use Opt;\n with Osint;    use Osint;\n with Output;   use Output;\n@@ -191,7 +190,9 @@ package body Prep is\n    function Deleting return Boolean;\n    --  Return True if code should be deleted or commented out\n \n-   function Expression (Evaluate_It : Boolean) return Boolean;\n+   function Expression\n+     (Evaluate_It  : Boolean;\n+      Complemented : Boolean := False) return Boolean;\n    --  Evaluate a condition in an #if or an #elsif statement.\n    --  If Evaluate_It is False, the condition is effectively evaluated,\n    --  otherwise, only the syntax is checked.\n@@ -361,7 +362,6 @@ package body Prep is\n \n       if Pp_States.Last = Ground then\n          return False;\n-\n       else\n          return Pp_States.Table (Pp_States.Last).Deleting;\n       end if;\n@@ -371,7 +371,10 @@ package body Prep is\n    -- Expression --\n    ----------------\n \n-   function Expression (Evaluate_It : Boolean) return Boolean is\n+   function Expression\n+     (Evaluate_It  : Boolean;\n+      Complemented : Boolean := False) return Boolean\n+   is\n       Evaluation : Boolean := Evaluate_It;\n       --  Is set to False after an \"or else\" when left term is True and\n       --  after an \"and then\" when left term is False.\n@@ -420,7 +423,8 @@ package body Prep is\n                --  not expression\n \n                Scan.all;\n-               Current_Result := not Expression (Evaluation);\n+               Current_Result :=\n+                 not Expression (Evaluation, Complemented => True);\n \n             when Tok_Identifier =>\n                Symbol_Name1 := Token_Name;\n@@ -601,7 +605,12 @@ package body Prep is\n          --  Check the next operator\n \n          if Token = Tok_And then\n-            if Current_Operator = Op_Or then\n+            if Complemented then\n+               Error_Msg\n+                (\"mixing NOT and AND is not allowed, parentheses are required\",\n+                 Token_Ptr);\n+\n+            elsif Current_Operator = Op_Or then\n                Error_Msg (\"mixing OR and AND is not allowed\", Token_Ptr);\n             end if;\n \n@@ -617,7 +626,12 @@ package body Prep is\n             end if;\n \n          elsif Token = Tok_Or then\n-            if Current_Operator = Op_And then\n+            if Complemented then\n+               Error_Msg\n+                 (\"mixing NOT and OR is not allowed, parentheses are required\",\n+                  Token_Ptr);\n+\n+            elsif Current_Operator = Op_And then\n                Error_Msg (\"mixing AND and OR is not allowed\", Token_Ptr);\n             end if;\n "}, {"sha": "043b87cad9eb3f80f6965e295a9480eb4714acc3", "filename": "gcc/ada/prep.ads", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45/gcc%2Fada%2Fprep.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f95fd3b225ec91ec09d0ce92ac2f64955bb11e45/gcc%2Fada%2Fprep.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprep.ads?ref=f95fd3b225ec91ec09d0ce92ac2f64955bb11e45", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2002-2006, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2002-2007, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -26,7 +26,8 @@\n \n with GNAT.Dynamic_Tables;\n \n-with Types;  use Types;\n+with Namet; use Namet;\n+with Types; use Types;\n \n package Prep is\n "}]}