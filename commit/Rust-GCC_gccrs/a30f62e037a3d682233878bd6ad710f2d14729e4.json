{"sha": "a30f62e037a3d682233878bd6ad710f2d14729e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTMwZjYyZTAzN2EzZDY4MjIzMzg3OGJkNmFkNzEwZjJkMTQ3MjllNA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-05-23T22:48:37Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-05-23T22:48:37Z"}, "message": "re PR c++/15165 (ICE in instantiate_template)\n\n\tPR c++/15165\n\t* pt.c (instantiate_template): Robustify.\n\n\tPR c++/15165\n\t* g++.dg/template/crash19.C: New test.\n\nFrom-SVN: r82174", "tree": {"sha": "213a3972a017598389124eaebbdab15fa08899d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/213a3972a017598389124eaebbdab15fa08899d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a30f62e037a3d682233878bd6ad710f2d14729e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a30f62e037a3d682233878bd6ad710f2d14729e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a30f62e037a3d682233878bd6ad710f2d14729e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a30f62e037a3d682233878bd6ad710f2d14729e4/comments", "author": null, "committer": null, "parents": [{"sha": "9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "a517716fc21ebf9f5ded3ea6dbeda3f883e11b10", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a30f62e037a3d682233878bd6ad710f2d14729e4", "patch": "@@ -1,3 +1,8 @@\n+2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/15165\n+\t* pt.c (instantiate_template): Robustify.\n+\n 2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/15025"}, {"sha": "38c91a0e188fc90854fde9e65bece2c624df92b2", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=a30f62e037a3d682233878bd6ad710f2d14729e4", "patch": "@@ -8661,10 +8661,14 @@ instantiate_template (tree tmpl, tree targ_ptr, tsubst_flags_t complain)\n   /* If this function is a clone, handle it specially.  */\n   if (DECL_CLONED_FUNCTION_P (tmpl))\n     {\n-      tree spec = instantiate_template (DECL_CLONED_FUNCTION (tmpl), targ_ptr,\n-\t\t\t\t\tcomplain);\n+      tree spec;\n       tree clone;\n       \n+      spec = instantiate_template (DECL_CLONED_FUNCTION (tmpl), targ_ptr,\n+\t\t\t\t   complain);\n+      if (spec == error_mark_node)\n+\treturn error_mark_node;\n+\n       /* Look for the clone.  */\n       for (clone = TREE_CHAIN (spec);\n \t   clone && DECL_CLONED_FUNCTION_P (clone);"}, {"sha": "82101e4804c720ede87fe295f0508dc5d56ae377", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a30f62e037a3d682233878bd6ad710f2d14729e4", "patch": "@@ -1,3 +1,8 @@\n+2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/15165\n+\t* g++.dg/template/crash19.C: New test.\n+\n 2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/15025"}, {"sha": "a28827f31ac80ced0e4cffb3bdaef2c98719ee3f", "filename": "gcc/testsuite/g++.dg/template/crash19.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash19.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a30f62e037a3d682233878bd6ad710f2d14729e4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash19.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash19.C?ref=a30f62e037a3d682233878bd6ad710f2d14729e4", "patch": "@@ -0,0 +1,17 @@\n+// PR c++/15165\n+\n+struct S \n+{ \n+    template <class T> S(const T &e);\n+};\n+int operator *(const double, const S &); \n+template <class T>\n+struct X { \n+    enum { SIXTY_FOUR=64 }; \n+    struct node {\n+      unsigned char *ptr[sizeof(T)*SIXTY_FOUR];\n+        void d() {}\n+    };\n+    node *head; \n+};\n+template struct X<int>;"}]}