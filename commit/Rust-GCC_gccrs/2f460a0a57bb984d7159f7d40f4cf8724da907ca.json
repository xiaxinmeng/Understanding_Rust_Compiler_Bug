{"sha": "2f460a0a57bb984d7159f7d40f4cf8724da907ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmY0NjBhMGE1N2JiOTg0ZDcxNTlmN2Q0MGY0Y2Y4NzI0ZGE5MDdjYQ==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2002-04-10T17:56:02Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2002-04-10T17:56:02Z"}, "message": "reload1.c (choose_reload_regs): HARD_FRAME_POINTER_REGNUM is only used as frame pointer when...\n\n\t* reload1.c (choose_reload_regs): HARD_FRAME_POINTER_REGNUM\n\tis only used as frame pointer when frame_pointer_needed is true.\n\nFrom-SVN: r52140", "tree": {"sha": "6554b57f5818e4bb7dc50d8933ac6ec89e8552d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6554b57f5818e4bb7dc50d8933ac6ec89e8552d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f460a0a57bb984d7159f7d40f4cf8724da907ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f460a0a57bb984d7159f7d40f4cf8724da907ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f460a0a57bb984d7159f7d40f4cf8724da907ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f460a0a57bb984d7159f7d40f4cf8724da907ca/comments", "author": null, "committer": null, "parents": [{"sha": "6127eac4bdeb3bdd7c03831880a64b3b4a3be34e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6127eac4bdeb3bdd7c03831880a64b3b4a3be34e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6127eac4bdeb3bdd7c03831880a64b3b4a3be34e"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "dd1a961dcaaa9a135b9d103ae9511460639c6407", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f460a0a57bb984d7159f7d40f4cf8724da907ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f460a0a57bb984d7159f7d40f4cf8724da907ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2f460a0a57bb984d7159f7d40f4cf8724da907ca", "patch": "@@ -1,3 +1,8 @@\n+2002-04-10  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\t* reload1.c (choose_reload_regs): HARD_FRAME_POINTER_REGNUM\n+\tis only used as frame pointer when frame_pointer_needed is true.\n+\n 2002-04-10  Richard Earnshaw  <rearnsha@arm.com>\n \n \tPR target/817"}, {"sha": "cf807af01e1b5c1cca42c41777513103878ecfcd", "filename": "gcc/reload1.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f460a0a57bb984d7159f7d40f4cf8724da907ca/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f460a0a57bb984d7159f7d40f4cf8724da907ca/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=2f460a0a57bb984d7159f7d40f4cf8724da907ca", "patch": "@@ -5565,6 +5565,7 @@ choose_reload_regs (chain)\n \t\t\t\t  && ! TEST_HARD_REG_BIT (reg_reloaded_dead, i))\n \t\t\t      /* Don't clobber the frame pointer.  */\n \t\t\t      || (i == HARD_FRAME_POINTER_REGNUM\n+\t\t\t\t  && frame_pointer_needed\n \t\t\t\t  && rld[r].out)\n \t\t\t      /* Don't really use the inherited spill reg\n \t\t\t\t if we need it wider than we've got it.  */\n@@ -5735,7 +5736,9 @@ choose_reload_regs (chain)\n \n \t      /* If we found an equivalent reg, say no code need be generated\n \t\t to load it, and use it as our reload reg.  */\n-\t      if (equiv != 0 && regno != HARD_FRAME_POINTER_REGNUM)\n+\t      if (equiv != 0 \n+\t\t  && (regno != HARD_FRAME_POINTER_REGNUM \n+\t\t      || !frame_pointer_needed))\n \t\t{\n \t\t  int nr = HARD_REGNO_NREGS (regno, rld[r].mode);\n \t\t  int k;"}]}