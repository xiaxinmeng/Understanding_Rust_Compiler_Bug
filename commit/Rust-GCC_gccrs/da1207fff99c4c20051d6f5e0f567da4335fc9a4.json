{"sha": "da1207fff99c4c20051d6f5e0f567da4335fc9a4", "node_id": "C_kwDOANBUbNoAKGRhMTIwN2ZmZjk5YzRjMjAwNTFkNmY1ZTBmNTY3ZGE0MzM1ZmM5YTQ", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-10-03T21:16:19Z"}, "committer": {"name": "Marc Poulhi\u00e8s", "email": "poulhies@adacore.com", "date": "2022-11-04T13:47:23Z"}, "message": "ada: Reject expanded global names in lock-free protected objects\n\nLock-free expansion of protected subprograms is only possible when there\nare no references to global assignable objects. We only detected such\nreferences when they appeared as direct names, but we must similarly\ndetect expanded names.\n\ngcc/ada/\n\n\t* sem_ch9.adb (Satisfies_Lock_Free_Requirements): Detect\n\treferences via expanded names.", "tree": {"sha": "80c69f6329f0fcb3b51dc8afa16e960f895da6ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80c69f6329f0fcb3b51dc8afa16e960f895da6ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da1207fff99c4c20051d6f5e0f567da4335fc9a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da1207fff99c4c20051d6f5e0f567da4335fc9a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da1207fff99c4c20051d6f5e0f567da4335fc9a4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da1207fff99c4c20051d6f5e0f567da4335fc9a4/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dkm", "id": 87603, "node_id": "MDQ6VXNlcjg3NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/87603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkm", "html_url": "https://github.com/dkm", "followers_url": "https://api.github.com/users/dkm/followers", "following_url": "https://api.github.com/users/dkm/following{/other_user}", "gists_url": "https://api.github.com/users/dkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkm/subscriptions", "organizations_url": "https://api.github.com/users/dkm/orgs", "repos_url": "https://api.github.com/users/dkm/repos", "events_url": "https://api.github.com/users/dkm/events{/privacy}", "received_events_url": "https://api.github.com/users/dkm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8080a1b64ae6030bb85ce88486dc2447d3063b09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8080a1b64ae6030bb85ce88486dc2447d3063b09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8080a1b64ae6030bb85ce88486dc2447d3063b09"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "5dee216256c1f68bea1e46c9eefd6f6e6b934e80", "filename": "gcc/ada/sem_ch9.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da1207fff99c4c20051d6f5e0f567da4335fc9a4/gcc%2Fada%2Fsem_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da1207fff99c4c20051d6f5e0f567da4335fc9a4/gcc%2Fada%2Fsem_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch9.adb?ref=da1207fff99c4c20051d6f5e0f567da4335fc9a4", "patch": "@@ -463,7 +463,7 @@ package body Sem_Ch9 is\n \n                   --  References\n \n-                  elsif Kind = N_Identifier\n+                  elsif Kind in N_Identifier | N_Expanded_Name\n                     and then Present (Entity (N))\n                   then\n                      declare\n@@ -564,7 +564,7 @@ package body Sem_Ch9 is\n                   --  reference only one component of the protected type, plus\n                   --  the type of the component must support atomic operation.\n \n-                  if Kind = N_Identifier\n+                  if Kind in N_Identifier | N_Expanded_Name\n                     and then Present (Entity (N))\n                   then\n                      declare"}]}