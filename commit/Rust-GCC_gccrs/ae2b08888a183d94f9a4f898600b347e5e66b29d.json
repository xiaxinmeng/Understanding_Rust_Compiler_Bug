{"sha": "ae2b08888a183d94f9a4f898600b347e5e66b29d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWUyYjA4ODg4YTE4M2Q5NGY5YTRmODk4NjAwYjM0N2U1ZTY2YjI5ZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-04-26T09:52:05Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-04-26T09:52:05Z"}, "message": "* cgraphunit.c (cgraph_copy_node_for_versioning): Fix profile updating.\n\nFrom-SVN: r158724", "tree": {"sha": "199315ea3ba0ab8d18c800814ea451dd8cafcb85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/199315ea3ba0ab8d18c800814ea451dd8cafcb85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae2b08888a183d94f9a4f898600b347e5e66b29d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae2b08888a183d94f9a4f898600b347e5e66b29d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae2b08888a183d94f9a4f898600b347e5e66b29d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae2b08888a183d94f9a4f898600b347e5e66b29d/comments", "author": null, "committer": null, "parents": [{"sha": "98b2dfbb6d39dc038d047a51c5637358d87b8c18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98b2dfbb6d39dc038d047a51c5637358d87b8c18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98b2dfbb6d39dc038d047a51c5637358d87b8c18"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "9d7d66931cd1b94d6a63dbf5723bfece8c78f718", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae2b08888a183d94f9a4f898600b347e5e66b29d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae2b08888a183d94f9a4f898600b347e5e66b29d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ae2b08888a183d94f9a4f898600b347e5e66b29d", "patch": "@@ -1,3 +1,7 @@\n+2010-04-26  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraphunit.c (cgraph_copy_node_for_versioning): Fix profile updating.\n+\n 2010-04-26  Richard Guenther  <rguenther@suse.de>\n \n \tPR lto/43080"}, {"sha": "fcb96b2044c1c965a3373b3d18b5e9459ccc8299", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae2b08888a183d94f9a4f898600b347e5e66b29d/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae2b08888a183d94f9a4f898600b347e5e66b29d/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=ae2b08888a183d94f9a4f898600b347e5e66b29d", "patch": "@@ -2027,7 +2027,7 @@ cgraph_copy_node_for_versioning (struct cgraph_node *old_version,\n \t\t\t\t VEC(cgraph_edge_p,heap) *redirect_callers)\n  {\n    struct cgraph_node *new_version;\n-   struct cgraph_edge *e, *new_e;\n+   struct cgraph_edge *e;\n    struct cgraph_edge *next_callee;\n    unsigned i;\n \n@@ -2046,10 +2046,10 @@ cgraph_copy_node_for_versioning (struct cgraph_node *old_version,\n       also cloned.  */\n    for (e = old_version->callees;e; e=e->next_callee)\n      {\n-       new_e = cgraph_clone_edge (e, new_version, e->call_stmt,\n-\t\t\t\t  e->lto_stmt_uid, 0, e->frequency,\n-\t\t\t\t  e->loop_nest, true);\n-       new_e->count = e->count;\n+       cgraph_clone_edge (e, new_version, e->call_stmt,\n+\t\t\t  e->lto_stmt_uid, REG_BR_PROB_BASE,\n+\t\t\t  CGRAPH_FREQ_BASE,\n+\t\t\t  e->loop_nest, true);\n      }\n    /* Fix recursive calls.\n       If OLD_VERSION has a recursive call after the"}]}