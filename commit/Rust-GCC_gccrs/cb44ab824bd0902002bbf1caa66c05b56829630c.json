{"sha": "cb44ab824bd0902002bbf1caa66c05b56829630c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2I0NGFiODI0YmQwOTAyMDAyYmJmMWNhYTY2YzA1YjU2ODI5NjMwYw==", "commit": {"author": {"name": "Victor Leikehman", "email": "lei@haifasphere.co.il", "date": "2004-05-14T22:52:04Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-05-14T22:52:04Z"}, "message": "decl.c (variable_decl): Always apply default initializer.\n\nfortran/\n\t* decl.c (variable_decl): Always apply default initializer.\nlibgfortran/\n\t* gfortran.fortran-torture/execute/def_init_3.f90: New test.\n\nFrom-SVN: r81865", "tree": {"sha": "939f71ae9665cb55420bcc4ffa9d70f3850da94c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/939f71ae9665cb55420bcc4ffa9d70f3850da94c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb44ab824bd0902002bbf1caa66c05b56829630c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb44ab824bd0902002bbf1caa66c05b56829630c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb44ab824bd0902002bbf1caa66c05b56829630c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb44ab824bd0902002bbf1caa66c05b56829630c/comments", "author": null, "committer": null, "parents": [{"sha": "15f8ac7f0878178cca61636f81323629624e4585", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15f8ac7f0878178cca61636f81323629624e4585", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15f8ac7f0878178cca61636f81323629624e4585"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "19a66ce588a7d78eaa9d624b23df8d4bd93e68a8", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=cb44ab824bd0902002bbf1caa66c05b56829630c", "patch": "@@ -1,3 +1,7 @@\n+2004-05-14  Victor Leikehman  <lei@haifasphere.co.il>\n+\n+\t* decl.c (variable_decl): Always apply default initializer.\n+\n 2004-05-08  Tobias Schl\ufffdter <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/15206"}, {"sha": "2aed9b248d6f7c3b41fb25fe6ec810e3ae38f2f8", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=cb44ab824bd0902002bbf1caa66c05b56829630c", "patch": "@@ -619,10 +619,11 @@ variable_decl (void)\n \t  if (m != MATCH_YES)\n \t    goto cleanup;\n \t}\n-      else if (current_ts.type == BT_DERIVED)\n-        {\n-          initializer = default_initializer ();\n-        }\n+    }\n+\n+  if (current_ts.type == BT_DERIVED && !initializer)\n+    {\n+      initializer = default_initializer ();\n     }\n \n   /* Add the initializer.  Note that it is fine if &initializer is"}, {"sha": "7e14671867298b257bc0125c622eee7547133efd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cb44ab824bd0902002bbf1caa66c05b56829630c", "patch": "@@ -1,3 +1,7 @@\n+2004-05-14  Victor Leikehman  <lei@haifasphere.co.il>\n+\n+\t* gfortran.fortran-torture/execute/def_init_3.f90: New test.\n+\n 2004-05-14  Jeff Law  <law@redhat.com>\n \n \t* gcc.dg/tree-ssa/20040514-2.c: New test."}, {"sha": "16f203a3059be2980230ad98b173da1fa271f5fe", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/der_init_3.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fder_init_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb44ab824bd0902002bbf1caa66c05b56829630c/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fder_init_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fder_init_3.f90?ref=cb44ab824bd0902002bbf1caa66c05b56829630c", "patch": "@@ -0,0 +1,12 @@\n+! PR15365\n+! Default initializers were being missed\n+program main\n+  type xyz\n+     integer :: x = 123\n+  end\n+\n+  type (xyz) :: a  !! ok\n+  type (xyz) b    !!! not initialized !!!\n+  if (a%x.ne.123) call abort\n+  if (b%x.ne.123) call abort\n+end"}]}