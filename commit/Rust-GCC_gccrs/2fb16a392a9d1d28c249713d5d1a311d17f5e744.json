{"sha": "2fb16a392a9d1d28c249713d5d1a311d17f5e744", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmZiMTZhMzkyYTlkMWQyOGMyNDk3MTNkNWQxYTMxMWQxN2Y1ZTc0NA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2010-05-28T21:47:07Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-05-28T21:47:07Z"}, "message": "stl_vector.h (vector<>::data): Fix return type in c++0x mode.\n\n2010-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* include/bits/stl_vector.h (vector<>::data): Fix return type\n\tin c++0x mode.\n\t* testsuite/23_containers/vector/requirements/dr438/\n\tassign_neg.cc: Adjust dg-error line number.\n\t* testsuite/23_containers/vector/requirements/dr438/insert_neg.cc:\n\tLikewise.\n\t* testsuite/23_containers/vector/requirements/dr438/\n\tconstructor_1_neg.cc: Likewise.\n\t* testsuite/23_containers/vector/requirements/dr438/\n\tconstructor_2_neg.cc: Likewise.\n\nFrom-SVN: r159998", "tree": {"sha": "8aa0d1f4f4ab82a468c5b887567e38458a6e9863", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8aa0d1f4f4ab82a468c5b887567e38458a6e9863"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2fb16a392a9d1d28c249713d5d1a311d17f5e744", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fb16a392a9d1d28c249713d5d1a311d17f5e744", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fb16a392a9d1d28c249713d5d1a311d17f5e744", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fb16a392a9d1d28c249713d5d1a311d17f5e744/comments", "author": null, "committer": null, "parents": [{"sha": "984ad4496bd398d0bf4c6a440fe0eb823f82508c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/984ad4496bd398d0bf4c6a440fe0eb823f82508c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/984ad4496bd398d0bf4c6a440fe0eb823f82508c"}], "stats": {"total": 33, "additions": 27, "deletions": 6}, "files": [{"sha": "5e6702b49715f38cc7ca35d19cde503a006959f6", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=2fb16a392a9d1d28c249713d5d1a311d17f5e744", "patch": "@@ -1,3 +1,16 @@\n+2010-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* include/bits/stl_vector.h (vector<>::data): Fix return type\n+\tin c++0x mode.\n+\t* testsuite/23_containers/vector/requirements/dr438/\n+\tassign_neg.cc: Adjust dg-error line number.\n+\t* testsuite/23_containers/vector/requirements/dr438/insert_neg.cc:\n+\tLikewise.\n+\t* testsuite/23_containers/vector/requirements/dr438/\n+\tconstructor_1_neg.cc: Likewise.\n+\t* testsuite/23_containers/vector/requirements/dr438/\n+\tconstructor_2_neg.cc: Likewise.\n+\n 2010-05-27  Jason Merrill  <jason@redhat.com>\n \n \tRevert:"}, {"sha": "f025b4eeb4511dcff3f2818cec94363779dfdf41", "filename": "libstdc++-v3/include/bits/stl_vector.h", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_vector.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_vector.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_vector.h?ref=2fb16a392a9d1d28c249713d5d1a311d17f5e744", "patch": "@@ -718,13 +718,21 @@ _GLIBCXX_BEGIN_NESTED_NAMESPACE(std, _GLIBCXX_STD_D)\n        *   Returns a pointer such that [data(), data() + size()) is a valid\n        *   range.  For a non-empty %vector, data() == &front().\n        */\n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+      _Tp*\n+#else\n       pointer\n+#endif\n       data()\n-      { return pointer(this->_M_impl._M_start); }\n+      { return std::__addressof(front()); }\n \n+#ifdef __GXX_EXPERIMENTAL_CXX0X__\n+      const _Tp*\n+#else\n       const_pointer\n+#endif\n       data() const\n-      { return const_pointer(this->_M_impl._M_start); }\n+      { return std::__addressof(front()); }\n \n       // [23.2.4.3] modifiers\n       /**"}, {"sha": "b96b5359963b346f02ad219054cfd6529360efbd", "filename": "libstdc++-v3/testsuite/23_containers/vector/requirements/dr438/assign_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fassign_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fassign_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fassign_neg.cc?ref=2fb16a392a9d1d28c249713d5d1a311d17f5e744", "patch": "@@ -18,7 +18,7 @@\n // <http://www.gnu.org/licenses/>.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 1055 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1063 }\n // { dg-excess-errors \"\" }\n \n #include <vector>"}, {"sha": "950643857c532cf0218a5940057ec752779bfc34", "filename": "libstdc++-v3/testsuite/23_containers/vector/requirements/dr438/constructor_1_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fconstructor_1_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fconstructor_1_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fconstructor_1_neg.cc?ref=2fb16a392a9d1d28c249713d5d1a311d17f5e744", "patch": "@@ -18,7 +18,7 @@\n // <http://www.gnu.org/licenses/>.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 995 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1003 }\n // { dg-excess-errors \"\" }\n \n #include <vector>"}, {"sha": "f17b541a4e000eac11ebc11090a2f8f65dab459b", "filename": "libstdc++-v3/testsuite/23_containers/vector/requirements/dr438/constructor_2_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fconstructor_2_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fconstructor_2_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Fconstructor_2_neg.cc?ref=2fb16a392a9d1d28c249713d5d1a311d17f5e744", "patch": "@@ -18,7 +18,7 @@\n // <http://www.gnu.org/licenses/>.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 995 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1003 }\n // { dg-excess-errors \"\" }\n \n #include <vector>"}, {"sha": "19d3fd08c4b8e5edd5197d85ffeda46ce0187067", "filename": "libstdc++-v3/testsuite/23_containers/vector/requirements/dr438/insert_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Finsert_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fb16a392a9d1d28c249713d5d1a311d17f5e744/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Finsert_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F23_containers%2Fvector%2Frequirements%2Fdr438%2Finsert_neg.cc?ref=2fb16a392a9d1d28c249713d5d1a311d17f5e744", "patch": "@@ -18,7 +18,7 @@\n // <http://www.gnu.org/licenses/>.\n \n // { dg-do compile }\n-// { dg-error \"no matching\" \"\" { target *-*-* } 1096 }\n+// { dg-error \"no matching\" \"\" { target *-*-* } 1104 }\n // { dg-excess-errors \"\" }\n \n #include <vector>"}]}