{"sha": "9890ad7a9ea7d1561beaf71149d210f9c02aad9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg5MGFkN2E5ZWE3ZDE1NjFiZWFmNzExNDlkMjEwZjljMDJhYWQ5Yw==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1995-03-08T21:29:44Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1995-03-08T21:29:44Z"}, "message": "More typos\n\nFrom-SVN: r9133", "tree": {"sha": "cfa391b9e69ec6fb239bcf17280afc24777e1947", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cfa391b9e69ec6fb239bcf17280afc24777e1947"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9890ad7a9ea7d1561beaf71149d210f9c02aad9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9890ad7a9ea7d1561beaf71149d210f9c02aad9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9890ad7a9ea7d1561beaf71149d210f9c02aad9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9890ad7a9ea7d1561beaf71149d210f9c02aad9c/comments", "author": null, "committer": null, "parents": [{"sha": "b890f297ea0a693ca72fc6261475981a1fad2289", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b890f297ea0a693ca72fc6261475981a1fad2289", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b890f297ea0a693ca72fc6261475981a1fad2289"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "9d32dd14e2bba4795496d2677647c5db3288a1a8", "filename": "gcc/config/rs6000/eabi.asm", "status": "modified", "additions": 15, "deletions": 8, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9890ad7a9ea7d1561beaf71149d210f9c02aad9c/gcc%2Fconfig%2Frs6000%2Feabi.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9890ad7a9ea7d1561beaf71149d210f9c02aad9c/gcc%2Fconfig%2Frs6000%2Feabi.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Feabi.asm?ref=9890ad7a9ea7d1561beaf71149d210f9c02aad9c", "patch": "@@ -6,13 +6,19 @@\n \t.globl\t __eabi\n \n \t .section \".got2\",\"aw\"\n-.LCTOC1 = .+32768\n+.LCTOC1 = . # +32768\n \n # Table of addresses\n .Ltable = .-.LCTOC1\n-\t.long\t.Laddr\t\t\t\t# address we are really at\n+\t.long\t.LCTOC1\t\t\t\t# address we are really at\n+\n+.Lgot = .-.LCTOC1\n \t.long\t_GLOBAL_OFFSET_TABLE_\t\t# normal GOT address\n+\n+.Lgot2s = .-.LCTOC1\n \t.long\t_GOT2_START_\t\t\t# -mrelocatable GOT pointers start\n+\n+.Lgot2e = .-.LCTOC1\n \t.long\t_GOT2_END_\t\t\t# -mrelocatable GOT pointers end\n \n \t.text\n@@ -21,25 +27,26 @@\n \n __eabi:\tmflr\t0\n \tbl\t.Laddr\t\t\t\t# get current address\n-.Laddr:\tmflr\t11\t\t\t\t# real address of .Ltable\n-\tlwz\t12,(.Lptr-.Laddr)(11)\t\t# linker generated address of .Ltable\n-\tadd\t12,12,11\t\t\t# correct to real pointer\n+.Laddr:\tmflr\t12\t\t\t\t# real address of .Laddr\n+\tlwz\t11,(.Lptr-.Laddr)(12)\t\t# linker generated address of .LCTOC1\n+\tadd\t11,11,12\t\t\t# correct to real pointer\n+\tlwz\t12,.Ltable(11)\t\t\t# get linker's idea of where .Laddr is\n \tsubf.\t12,12,11\t\t\t# calculate difference\n \tbc\t4,2,.Lreloc\t\t\t# skip if we need to relocate\n \n # Normal program, load up register 2\n \n \tmtlr\t0\t\t\t\t# restore link register\n-\tlwz\t2,4(11)\t\t\t\t# normal GOT address\n+\tlwz\t2,.Lgot(11)\t\t\t# normal GOT address\n \tblr\n \n # We need to relocate the .got2 pointers.  Don't load register 2\n \n .Lreloc:\n \tstwu\t30,-4(1)\n \tstwu\t31,-4(1)\n-\tlwz\t30,8(11)\t\t\t# GOT pointers start\n-\tlwz\t31,12(11)\t\t\t# GOT pointers end\n+\tlwz\t30,.Lgot2s(11)\t\t\t# GOT pointers start\n+\tlwz\t31,.Lgot2e(11)\t\t\t# GOT pointers end\n \tadd\t30,12,30\t\t\t# adjust pointers\n \tadd\t31,12,31\n "}]}