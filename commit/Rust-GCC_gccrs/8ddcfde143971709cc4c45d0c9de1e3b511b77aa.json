{"sha": "8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGRkY2ZkZTE0Mzk3MTcwOWNjNGM0NWQwYzlkZTFlM2I1MTFiNzdhYQ==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "dan@codesourcery.com", "date": "2008-02-23T15:45:03Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2008-02-23T15:45:03Z"}, "message": "expmed.c (extract_bit_field): Always use adjust_address for MEM.\n\n\t* expmed.c (extract_bit_field): Always use adjust_address for MEM.\n\n\t* gcc.c-torture/execute/20080222-1.c: New test.\n\nFrom-SVN: r132573", "tree": {"sha": "84e9fb8c32865e229b5d07b01784d8d73cbd761c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84e9fb8c32865e229b5d07b01784d8d73cbd761c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/comments", "author": null, "committer": null, "parents": [{"sha": "84495fd9b77ce40bcde7604dda738738bb52cd27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84495fd9b77ce40bcde7604dda738738bb52cd27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84495fd9b77ce40bcde7604dda738738bb52cd27"}], "stats": {"total": 49, "additions": 38, "deletions": 11}, "files": [{"sha": "f33f1d352d489e63b6d84900c9f543d7e7f88ace", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "patch": "@@ -1,3 +1,7 @@\n+2008-02-23  Daniel Jacobowitz  <dan@codesourcery.com>\n+\n+\t* expmed.c (extract_bit_field): Always use adjust_address for MEM.\n+\n 2008-02-23  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/22076"}, {"sha": "04071d375ed9a81700084ad034eeb0809f3889c8", "filename": "gcc/expmed.c", "status": "modified", "additions": 8, "deletions": 11, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "patch": "@@ -1339,18 +1339,15 @@ extract_bit_field_1 (rtx str_rtx, unsigned HOST_WIDE_INT bitsize,\n \t\t  || (offset * BITS_PER_UNIT % bitsize == 0\n \t\t      && MEM_ALIGN (op0) % bitsize == 0)))))\n     {\n-      if (mode1 != GET_MODE (op0))\n+      if (MEM_P (op0))\n+\top0 = adjust_address (op0, mode1, offset);\n+      else if (mode1 != GET_MODE (op0))\n \t{\n-\t  if (MEM_P (op0))\n-\t    op0 = adjust_address (op0, mode1, offset);\n-\t  else\n-\t    {\n-\t      rtx sub = simplify_gen_subreg (mode1, op0, GET_MODE (op0),\n-\t\t\t\t\t     byte_offset);\n-\t      if (sub == NULL)\n-\t\tgoto no_subreg_mode_swap;\n-\t      op0 = sub;\n-\t    }\n+\t  rtx sub = simplify_gen_subreg (mode1, op0, GET_MODE (op0),\n+\t\t\t\t\t byte_offset);\n+\t  if (sub == NULL)\n+\t    goto no_subreg_mode_swap;\n+\t  op0 = sub;\n \t}\n       if (mode1 != mode)\n \treturn convert_to_mode (tmode, op0, unsignedp);"}, {"sha": "b111ef4da71e89e1a89f8c4bedca75e2f1c8ee9e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "patch": "@@ -1,3 +1,7 @@\n+2008-02-23  Daniel Jacobowitz  <dan@codesourcery.com>\n+\n+\t* gcc.c-torture/execute/20080222-1.c: New test.\n+\n 2008-02-23  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/22076"}, {"sha": "6db83ccdf9028a7f10bfce67af6c7632d087407b", "filename": "gcc/testsuite/gcc.c-torture/execute/20080222-1.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20080222-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ddcfde143971709cc4c45d0c9de1e3b511b77aa/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20080222-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20080222-1.c?ref=8ddcfde143971709cc4c45d0c9de1e3b511b77aa", "patch": "@@ -0,0 +1,22 @@\n+extern void abort (void);\n+\n+struct container\n+{\n+  unsigned char data[1];\n+};\n+\n+unsigned char space[6] = {1, 2, 3, 4, 5, 6};\n+\n+int\n+foo (struct container *p)\n+{\n+  return p->data[4];\n+}\n+\n+int\n+main ()\n+{\n+  if (foo ((struct container *) space) != 5)\n+    abort ();\n+  return 0;\n+}"}]}