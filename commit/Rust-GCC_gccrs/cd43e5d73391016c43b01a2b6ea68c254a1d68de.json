{"sha": "cd43e5d73391016c43b01a2b6ea68c254a1d68de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Q0M2U1ZDczMzkxMDE2YzQzYjAxYTJiNmVhNjhjMjU0YTFkNjhkZQ==", "commit": {"author": {"name": "Li Feng", "email": "nemokingdom@gmail.com", "date": "2009-11-25T04:50:45Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2009-11-25T04:50:45Z"}, "message": "graphite-sese-to-poly.c (write_alias_graph_to_ascii_dimacs): New.\n\n2009-09-25  Li Feng  <nemokingdom@gmail.com>\n\n\t* graphite-sese-to-poly.c (write_alias_graph_to_ascii_dimacs): New.\n\t(build_scop_drs): When debugging, write the alias graph to file,\n\totherwise, should be disabled.\n\nFrom-SVN: r154553", "tree": {"sha": "b32ca9f2e7b90973d2cfda8f5b37cbfaebacec25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b32ca9f2e7b90973d2cfda8f5b37cbfaebacec25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cd43e5d73391016c43b01a2b6ea68c254a1d68de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd43e5d73391016c43b01a2b6ea68c254a1d68de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd43e5d73391016c43b01a2b6ea68c254a1d68de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd43e5d73391016c43b01a2b6ea68c254a1d68de/comments", "author": {"login": "LiFeng", "id": 117740, "node_id": "MDQ6VXNlcjExNzc0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/117740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LiFeng", "html_url": "https://github.com/LiFeng", "followers_url": "https://api.github.com/users/LiFeng/followers", "following_url": "https://api.github.com/users/LiFeng/following{/other_user}", "gists_url": "https://api.github.com/users/LiFeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/LiFeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LiFeng/subscriptions", "organizations_url": "https://api.github.com/users/LiFeng/orgs", "repos_url": "https://api.github.com/users/LiFeng/repos", "events_url": "https://api.github.com/users/LiFeng/events{/privacy}", "received_events_url": "https://api.github.com/users/LiFeng/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aeda6535863f3d604fa9e3c19c264adaf546f264", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aeda6535863f3d604fa9e3c19c264adaf546f264", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aeda6535863f3d604fa9e3c19c264adaf546f264"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "419f882eed7455f8cb4679bfb5e677217edb21e8", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd43e5d73391016c43b01a2b6ea68c254a1d68de/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd43e5d73391016c43b01a2b6ea68c254a1d68de/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=cd43e5d73391016c43b01a2b6ea68c254a1d68de", "patch": "@@ -1,3 +1,9 @@\n+2009-09-25  Li Feng  <nemokingdom@gmail.com>\n+\n+\t* graphite-sese-to-poly.c (write_alias_graph_to_ascii_dimacs): New.\n+\t(build_scop_drs): When debugging, write the alias graph to file,\n+\totherwise, should be disabled.\n+\n 2009-09-17  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* graphite-scop-detection.c (stmt_simple_memref_p): Removed."}, {"sha": "4dc738ded9e7ebdc9e6e093a27fa7cb36bbb6673", "filename": "gcc/graphite-sese-to-poly.c", "status": "modified", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd43e5d73391016c43b01a2b6ea68c254a1d68de/gcc%2Fgraphite-sese-to-poly.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd43e5d73391016c43b01a2b6ea68c254a1d68de/gcc%2Fgraphite-sese-to-poly.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-sese-to-poly.c?ref=cd43e5d73391016c43b01a2b6ea68c254a1d68de", "patch": "@@ -1708,6 +1708,40 @@ build_poly_dr (data_reference_p dr, poly_bb_p pbb)\n \t       dr, DR_NUM_DIMENSIONS (dr));\n }\n \n+/* Write to FILE the alias graph of data references DRS.  */\n+\n+static inline bool\n+write_alias_graph_to_ascii_dimacs (FILE *file, char *comment,\n+\t\t\t\t   VEC (data_reference_p, heap) *drs)\n+{\n+  int num_vertex = VEC_length (data_reference_p, drs);\n+  int edge_num = 0;\n+  data_reference_p dr1, dr2;\n+  int i, j;\n+\n+  if (num_vertex == 0)\n+    return true;\n+\n+  for (i = 0; VEC_iterate (data_reference_p, drs, i, dr1); i++)\n+    for (j = i + 1; VEC_iterate (data_reference_p, drs, j, dr2); j++)\n+      if (dr_may_alias_p (dr1, dr2))\n+\tedge_num++;\n+\n+  fprintf (file, \"$\\n\");\n+\n+  if (comment)\n+    fprintf (file, \"c %s\\n\", comment);\n+\n+  fprintf (file, \"p edge %d %d\\n\", num_vertex, edge_num);\n+\n+  for (i = 0; VEC_iterate (data_reference_p, drs, i, dr1); i++)\n+    for (j = i + 1; VEC_iterate (data_reference_p, drs, j, dr2); j++)\n+      if (dr_may_alias_p (dr1, dr2))\n+\tfprintf (file, \"e %d %d\\n\", i + 1, j + 1);\n+\n+  return true;\n+}\n+\n static void\n partition_drs_to_sets (VEC (data_reference_p, heap) **drs, int choice,\n \t\t\t bool (* edge_exist_p) (const struct data_reference *,\n@@ -1802,6 +1836,24 @@ build_scop_drs (scop_p scop)\n   build_alias_set_for_drs (&drs);\n   build_base_obj_set_for_drs (&drs);\n \n+  /* When debugging, enable the following code.  This cannot be used\n+     in production compilers.  */\n+#if 0\n+  {\n+    char comment[100];\n+    FILE *file;\n+\n+    file = fopen (\"/tmp/dr_alias_graph\", \"ab\");\n+    if (file)\n+      {\n+\tsnprintf (comment, sizeof (comment), \"%s %s\", main_input_filename,\n+\t\t  current_function_name ());\n+\twrite_alias_graph_to_ascii_dimacs (file, comment, drs);\n+\tfclose (file);\n+      }\n+  }\n+#endif\n+\n   VEC_free (data_reference_p, heap, drs);\n \n   for (i = 0; VEC_iterate (poly_bb_p, SCOP_BBS (scop), i, pbb); i++)"}]}