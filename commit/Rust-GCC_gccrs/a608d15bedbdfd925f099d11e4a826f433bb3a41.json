{"sha": "a608d15bedbdfd925f099d11e4a826f433bb3a41", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTYwOGQxNWJlZGJkZmQ5MjVmMDk5ZDExZTRhODI2ZjQzM2JiM2E0MQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2016-09-22T15:26:23Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2016-09-22T15:26:23Z"}, "message": "re PR c++/71979 (ICE with on C++ code with incorrect type in overloaded base class '=' operator: in build_base_path, at cp/class.c:304)\n\n/cp\n2016-09-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/71979\n\t* class.c (build_base_path): Allow for lookup_base returning\n\tNULL_TREE.\n\n/testsuite\n2016-09-22  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/71979\n\t* g++.dg/cpp0x/pr71979.C: New.\n\nFrom-SVN: r240373", "tree": {"sha": "be22a099bd5a6401212867a319ef06598e38382f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be22a099bd5a6401212867a319ef06598e38382f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a608d15bedbdfd925f099d11e4a826f433bb3a41", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a608d15bedbdfd925f099d11e4a826f433bb3a41", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a608d15bedbdfd925f099d11e4a826f433bb3a41", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a608d15bedbdfd925f099d11e4a826f433bb3a41/comments", "author": null, "committer": null, "parents": [{"sha": "ed64a4e75f2ff16fa34a738dd5b923b45b4b9eac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed64a4e75f2ff16fa34a738dd5b923b45b4b9eac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed64a4e75f2ff16fa34a738dd5b923b45b4b9eac"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "3a4d1f45f8cf5f749b44f9e4bf7151a5ed9f0ce3", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a608d15bedbdfd925f099d11e4a826f433bb3a41", "patch": "@@ -1,3 +1,9 @@\n+2016-09-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/71979\n+\t* class.c (build_base_path): Allow for lookup_base returning\n+\tNULL_TREE.\n+\n 2016-09-21  Jason Merrill  <jason@redhat.com>\n \n \tCore 903"}, {"sha": "dab163020f41ef26f6f6008501e48b4bad7a7cb7", "filename": "gcc/cp/class.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=a608d15bedbdfd925f099d11e4a826f433bb3a41", "patch": "@@ -296,12 +296,13 @@ build_base_path (enum tree_code code,\n       /* This can happen when adjust_result_of_qualified_name_lookup can't\n \t find a unique base binfo in a call to a member function.  We\n \t couldn't give the diagnostic then since we might have been calling\n-\t a static member function, so we do it now.  */\n+\t a static member function, so we do it now.  In other cases, eg.\n+\t during error recovery (c++/71979), we may not have a base at all.  */\n       if (complain & tf_error)\n \t{\n \t  tree base = lookup_base (probe, BINFO_TYPE (d_binfo),\n \t\t\t\t   ba_unique, NULL, complain);\n-\t  gcc_assert (base == error_mark_node);\n+\t  gcc_assert (base == error_mark_node || !base);\n \t}\n       return error_mark_node;\n     }"}, {"sha": "6daa92163b7038eceae23fb2904b2d220711262d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a608d15bedbdfd925f099d11e4a826f433bb3a41", "patch": "@@ -1,3 +1,8 @@\n+2016-09-22  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/71979\n+\t* g++.dg/cpp0x/pr71979.C: New.\n+\n 2016-09-22  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* g++.dg/pr77550.C: Use __SIZE_TYPE__."}, {"sha": "e67eed111ac25e6ea9f9768e2da75266167b9467", "filename": "gcc/testsuite/g++.dg/cpp0x/pr71979.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71979.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a608d15bedbdfd925f099d11e4a826f433bb3a41/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71979.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71979.C?ref=a608d15bedbdfd925f099d11e4a826f433bb3a41", "patch": "@@ -0,0 +1,15 @@\n+// PR c++/71979\n+// { dg-do compile { target c++11 } }\n+\n+struct A\n+{ \n+  A & operator= (A &);\n+};\n+\n+struct B : A {};   // { dg-error \"cannot bind\" }\n+\n+void foo ()\n+{ \n+  B b;\n+  b = B ();  // { dg-error \"use of deleted\" }\n+}"}]}