{"sha": "3d5ee65b2e605ae4073028e38a87fe438398fb91", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2Q1ZWU2NWIyZTYwNWFlNDA3MzAyOGUzOGE4N2ZlNDM4Mzk4ZmI5MQ==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2002-11-21T16:36:52Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2002-11-21T16:36:52Z"}, "message": "fr30.md (movsf_constant_store): Move code to detect 0.0 into fr30.c.\n\n* config/fr30/fr30.md (movsf_constant_store): Move code to detect 0.0 into fr30.c.\n* config/fr30/fr30-protos.h (fr30_const_double_is_zero): Prototype.\n* config/fr30/fr30.c (fr30_const_double_is_zero): New function.  Return true if the rtx is 0.0.\n\nFrom-SVN: r59349", "tree": {"sha": "d58b8289fb91b5e9fbcc7546c9c826a178c7d117", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d58b8289fb91b5e9fbcc7546c9c826a178c7d117"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d5ee65b2e605ae4073028e38a87fe438398fb91", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d5ee65b2e605ae4073028e38a87fe438398fb91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d5ee65b2e605ae4073028e38a87fe438398fb91", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d5ee65b2e605ae4073028e38a87fe438398fb91/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4d938a09129480cd0e107e8afa74ef95b5a3fae9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d938a09129480cd0e107e8afa74ef95b5a3fae9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d938a09129480cd0e107e8afa74ef95b5a3fae9"}], "stats": {"total": 37, "additions": 28, "deletions": 9}, "files": [{"sha": "302d13db8565fc3e2c869ddd6e13131b46ea67da", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3d5ee65b2e605ae4073028e38a87fe438398fb91", "patch": "@@ -1,3 +1,12 @@\n+2002-11-21  Nick Clifton  <nickc@redhat.com>\n+\n+\t* config/fr30/fr30.md (movsf_constant_store): Move code to\n+\tdetect 0.0 into fr30.c.\n+\t* config/fr30/fr30-protos.h (fr30_const_double_is_zero):\n+\tPrototype.\n+\t* config/fr30/fr30.c (fr30_const_double_is_zero): New\n+\tfunction.  Return true if the rtx is 0.0.\n+\n 2002-11-21  Jason Thorpe  <thorpej@wasabisystems.com>\n \n \t* config/arm/elf.h (ASM_SPEC, LINK_SPEC): Pass -EL"}, {"sha": "4aab88c48421d0426546acb1e2bbfcb419751f35", "filename": "gcc/config/fr30/fr30-protos.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2Fconfig%2Ffr30%2Ffr30-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2Fconfig%2Ffr30%2Ffr30-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffr30%2Ffr30-protos.h?ref=3d5ee65b2e605ae4073028e38a87fe438398fb91", "patch": "@@ -1,5 +1,5 @@\n /* Prototypes for fr30.c functions used in the md file & elsewhere.\n-   Copyright (C) 1999, 2000 Free Software Foundation, Inc.\n+   Copyright (C) 1999, 2000, 2002 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -39,6 +39,7 @@ extern int   low_register_operand       PARAMS ((rtx, Mmode));\n extern int   call_operand               PARAMS ((rtx, Mmode));\n extern int   di_operand \t\tPARAMS ((rtx, Mmode));\n extern int   nonimmediate_di_operand \tPARAMS ((rtx, Mmode));\n+extern int   fr30_const_double_is_zero  PARAMS ((rtx));\n #undef Mmode\n #endif /* HAVE_MACHINE_MODES */\n #endif /* RTX_CODE */"}, {"sha": "d01d6bd1610922ef831b36e23270dc10ff382c31", "filename": "gcc/config/fr30/fr30.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2Fconfig%2Ffr30%2Ffr30.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2Fconfig%2Ffr30%2Ffr30.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffr30%2Ffr30.c?ref=3d5ee65b2e605ae4073028e38a87fe438398fb91", "patch": "@@ -951,6 +951,20 @@ fr30_check_multiple_regs (operands, num_operands, descending)\n   return 1;\n }\n \n+int\n+fr30_const_double_is_zero (operand)\n+     rtx operand;\n+{\n+  REAL_VALUE_TYPE d;\n+\n+  if (operand == NULL || GET_CODE (operand) != CONST_DOUBLE)\n+    return 0;\n+\n+  REAL_VALUE_FROM_CONST_DOUBLE (d, operand);\n+\n+  return REAL_VALUES_EQUAL (d, dconst0);\n+}\n+\n /*}}}*/\n /*{{{  Instruction Output Routines  */\n "}, {"sha": "b19f65580570d3ab0e863c33b85a680b120df95f", "filename": "gcc/config/fr30/fr30.md", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2Fconfig%2Ffr30%2Ffr30.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d5ee65b2e605ae4073028e38a87fe438398fb91/gcc%2Fconfig%2Ffr30%2Ffr30.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffr30%2Ffr30.md?ref=3d5ee65b2e605ae4073028e38a87fe438398fb91", "patch": "@@ -1,5 +1,5 @@\n ;; FR30 machine description.\n-;; Copyright (C) 1998, 1999, 2000 Free Software Foundation, Inc.\n+;; Copyright (C) 1998, 1999, 2000, 2002 Free Software Foundation, Inc.\n ;; Contributed by Cygnus Solutions.\n \n ;; This file is part of GNU CC.\n@@ -571,14 +571,9 @@\n   const char *    ldi_instr;\n   const char *    tmp_reg;\n   static char     buffer[100];\n-  REAL_VALUE_TYPE d;\n \n-  REAL_VALUE_FROM_CONST_DOUBLE (d, operands[1]);\n-  \n-  if (REAL_VALUES_EQUAL (d, dconst0))\n-    ldi_instr = \\\"ldi:8\\\";\n-  else\n-    ldi_instr = \\\"ldi:32\\\";\n+  ldi_instr = fr30_const_double_is_zero (operands[1])\n+\t    ? ldi_instr = \\\"ldi:8\\\" : \\\"ldi:32\\\";\n \n   tmp_reg = reg_names [COMPILER_SCRATCH_REGISTER];\n   "}]}