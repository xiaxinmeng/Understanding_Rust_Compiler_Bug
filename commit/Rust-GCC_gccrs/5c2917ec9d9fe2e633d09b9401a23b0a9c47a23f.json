{"sha": "5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWMyOTE3ZWM5ZDlmZTJlNjMzZDA5Yjk0MDFhMjNiMGE5YzQ3YTIzZg==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2011-01-26T22:03:47Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2011-01-26T22:03:47Z"}, "message": "re PR rtl-optimization/46878 (V850 ICE in in maybe_add_or_update_dep_1, at sched-deps.c:854)\n\nPR rtl-optimization/46878\n* combine.c (insn_a_feeds_b): Check for the implicit cc0\nsetter/user dependency as well.\n\n* gcc.dg/pr46878-1.c: New test.\n\nFrom-SVN: r169307", "tree": {"sha": "0b4b6309cb2c8c5e4a75beb4bca4b4058e10e2f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b4b6309cb2c8c5e4a75beb4bca4b4058e10e2f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/comments", "author": null, "committer": null, "parents": [{"sha": "81cce6f682ecac63e57d6b12514fd774808bc067", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81cce6f682ecac63e57d6b12514fd774808bc067", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81cce6f682ecac63e57d6b12514fd774808bc067"}], "stats": {"total": 49, "additions": 48, "deletions": 1}, "files": [{"sha": "67ce1d2bd69400d90bf717f7e61aa988e27a03f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "patch": "@@ -1,3 +1,9 @@\n+2011-01-26  DJ Delorie  <dj@redhat.com>\n+\n+\tPR rtl-optimization/46878\n+\t* combine.c (insn_a_feeds_b): Check for the implicit cc0\n+\tsetter/user dependency as well.\n+\n 2011-01-26  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR rtl-optimization/44469"}, {"sha": "4fe71f334174822cbe9c0a7f7ea1ee4063f7f5bb", "filename": "gcc/combine.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "patch": "@@ -1032,7 +1032,9 @@ clear_log_links (void)\n /* Walk the LOG_LINKS of insn B to see if we find a reference to A.  Return\n    true if we found a LOG_LINK that proves that A feeds B.  This only works\n    if there are no instructions between A and B which could have a link\n-   depending on A, since in that case we would not record a link for B.  */\n+   depending on A, since in that case we would not record a link for B.\n+   We also check the implicit dependency created by a cc0 setter/user\n+   pair.  */\n \n static bool\n insn_a_feeds_b (rtx a, rtx b)\n@@ -1041,6 +1043,10 @@ insn_a_feeds_b (rtx a, rtx b)\n   for (links = LOG_LINKS (b); links; links = XEXP (links, 1))\n     if (XEXP (links, 0) == a)\n       return true;\n+#ifdef HAVE_cc0\n+  if (sets_cc0_p (a))\n+    return true;\n+#endif\n   return false;\n }\n \f"}, {"sha": "a4ed36535de4983aab37db6a3b2bc1935ae9d1e2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "patch": "@@ -1,3 +1,8 @@\n+2011-01-26  DJ Delorie  <dj@redhat.com>\n+\n+\tPR rtl-optimization/46878\n+\t* gcc.dg/pr46878-1.c: New test.\n+\n 2011-01-26  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/47476"}, {"sha": "f5b42de118be5c237fd0827470100a52b564d399", "filename": "gcc/testsuite/gcc.dg/pr46878-1.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46878-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46878-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46878-1.c?ref=5c2917ec9d9fe2e633d09b9401a23b0a9c47a23f", "patch": "@@ -0,0 +1,30 @@\n+/* PR rtl-optimization/46878 */\n+/* Make sure this doesn't ICE.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+struct baz\n+{\n+  int *newp;\n+};\n+\n+int\n+get_ice (int *op, struct baz *ret)\n+{\n+  int *tmpp;\n+  int c;\n+  c = (__foo () != 1);\n+  if (__bar ())\n+    {\n+      return (1);\n+    }\n+  if (c)\n+    tmpp = op;\n+  if (tmpp)\n+    {\n+    }\n+  else if (c)\n+    {\n+      ret->newp = tmpp;\n+    }\n+}"}]}