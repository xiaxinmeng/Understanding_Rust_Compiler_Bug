{"sha": "a7b01a4bf1537bc20459fbc2467c95bef9147c83", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTdiMDFhNGJmMTUzN2JjMjA0NTlmYmMyNDY3Yzk1YmVmOTE0N2M4Mw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-08-29T09:31:44Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-08-29T09:31:44Z"}, "message": "bb-reorder.c (function_tail_eff_head): New.\n\n        * bb-reorder.c (function_tail_eff_head): New.\n        (record_effective_endpoints): Set it.\n        (fixup_reorder_chain): Use it.\n\nFrom-SVN: r45255", "tree": {"sha": "24fd9efa04c81a860a36bba92bac52734b3833f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24fd9efa04c81a860a36bba92bac52734b3833f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7b01a4bf1537bc20459fbc2467c95bef9147c83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7b01a4bf1537bc20459fbc2467c95bef9147c83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7b01a4bf1537bc20459fbc2467c95bef9147c83", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7b01a4bf1537bc20459fbc2467c95bef9147c83/comments", "author": null, "committer": null, "parents": [{"sha": "c43f84d7ced26730f6ca327e9007846aaa715783", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c43f84d7ced26730f6ca327e9007846aaa715783", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c43f84d7ced26730f6ca327e9007846aaa715783"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "657f68aa341812c83647f066d1cf5684dbb75829", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7b01a4bf1537bc20459fbc2467c95bef9147c83/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7b01a4bf1537bc20459fbc2467c95bef9147c83/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a7b01a4bf1537bc20459fbc2467c95bef9147c83", "patch": "@@ -1,3 +1,9 @@\n+2001-08-29  Richard Henderson  <rth@redhat.com>\n+\n+\t* bb-reorder.c (function_tail_eff_head): New.\n+\t(record_effective_endpoints): Set it.\n+\t(fixup_reorder_chain): Use it.\n+\n 2001-08-28  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* dwarf2asm.c (dw2_asm_output_nstring): Fix typo in previous change."}, {"sha": "72d3902e7fc6f49eade319ff4ff865fc91d0817c", "filename": "gcc/bb-reorder.c", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7b01a4bf1537bc20459fbc2467c95bef9147c83/gcc%2Fbb-reorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7b01a4bf1537bc20459fbc2467c95bef9147c83/gcc%2Fbb-reorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbb-reorder.c?ref=a7b01a4bf1537bc20459fbc2467c95bef9147c83", "patch": "@@ -171,6 +171,9 @@ typedef struct reorder_block_def\n \n #define RBI(BB)\t((reorder_block_def) (BB)->aux)\n \n+/* Holds the interesting trailing notes for the function.  */\n+static rtx function_tail_eff_head;\n+\n \n /* Local function prototypes.  */\n static rtx skip_insns_after_block\tPARAMS ((basic_block));\n@@ -307,6 +310,7 @@ record_effective_endpoints ()\n       RBI (bb)->eff_end = end;\n       next_insn = NEXT_INSN (end);\n     }\n+  function_tail_eff_head = next_insn;\n }\n \n \n@@ -580,8 +584,18 @@ fixup_reorder_chain ()\n       last_bb = bb;\n       bb = RBI (bb)->next;\n     }\n-  NEXT_INSN (RBI (last_bb)->eff_end) = NULL_RTX;\n-  set_last_insn (RBI (last_bb)->eff_end);\n+\n+  {\n+    rtx insn = RBI (last_bb)->eff_end;\n+\n+    NEXT_INSN (insn) = function_tail_eff_head;\n+    if (function_tail_eff_head)\n+      PREV_INSN (function_tail_eff_head) = insn;\n+\n+    while (NEXT_INSN (insn))\n+      insn = NEXT_INSN (insn);\n+    set_last_insn (insn);\n+  }\n \n   /* Now add jumps and labels as needed to match the blocks new\n      outgoing edges.  */"}]}