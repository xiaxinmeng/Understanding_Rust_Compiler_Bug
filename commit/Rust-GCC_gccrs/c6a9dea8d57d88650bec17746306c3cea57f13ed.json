{"sha": "c6a9dea8d57d88650bec17746306c3cea57f13ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzZhOWRlYThkNTdkODg2NTBiZWMxNzc0NjMwNmMzY2VhNTdmMTNlZA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1998-05-05T15:37:37Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1998-05-05T15:37:37Z"}, "message": "Fix old -pedantic error I noticed while reviewing patch from Ulrich.\n\n\t* c-common.c (scan_char_table): Separate 's' and 'c'.  'c' does not\n\taccept 'a' flag.  'S' does accept 'a' flag.\n\t(check_format_info): When pedantic, warn for m/C/S/a/A formats,\n\tand `a' flag.\n\nFrom-SVN: r19545", "tree": {"sha": "b88fbf6271b8f48652a2b5ab77704175b040ca87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b88fbf6271b8f48652a2b5ab77704175b040ca87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6a9dea8d57d88650bec17746306c3cea57f13ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6a9dea8d57d88650bec17746306c3cea57f13ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6a9dea8d57d88650bec17746306c3cea57f13ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6a9dea8d57d88650bec17746306c3cea57f13ed/comments", "author": null, "committer": null, "parents": [{"sha": "664f169d752e79165a969c6be8e32997626b8397", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/664f169d752e79165a969c6be8e32997626b8397", "html_url": "https://github.com/Rust-GCC/gccrs/commit/664f169d752e79165a969c6be8e32997626b8397"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "fb3651c9a03c6bd3b5bd344af48f4c9466feeb6a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6a9dea8d57d88650bec17746306c3cea57f13ed/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6a9dea8d57d88650bec17746306c3cea57f13ed/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c6a9dea8d57d88650bec17746306c3cea57f13ed", "patch": "@@ -1,5 +1,10 @@\n Tue May  5 14:33:49 1998  Jim Wilson  <wilson@cygnus.com>\n \n+\t* c-common.c (scan_char_table): Separate 's' and 'c'.  'c' does not\n+\taccept 'a' flag.  'S' does accept 'a' flag.\n+\t(check_format_info): When pedantic, warn for m/C/S/a/A formats,\n+\tand `a' flag.\n+\n \t* elf64.h (MULTILIB_DEFAULTS): Move definition after mips.h include.\n \n Tue May  5 10:50:39 1998  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>"}, {"sha": "8857141b8bdeefcbfd35e3d017a32889da17a2f6", "filename": "gcc/c-common.c", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6a9dea8d57d88650bec17746306c3cea57f13ed/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6a9dea8d57d88650bec17746306c3cea57f13ed/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=c6a9dea8d57d88650bec17746306c3cea57f13ed", "patch": "@@ -1012,10 +1012,11 @@ static format_char_info scan_char_table[] = {\n   { \"di\",\t1,\tT_I,\tT_C,\tT_S,\tT_L,\tT_LL,\tT_LL,\tNULL,\t\"*\"\t},\n   { \"ouxX\",\t1,\tT_UI,\tT_UC,\tT_US,\tT_UL,\tT_ULL,\tT_ULL,\tNULL,\t\"*\"\t},\n   { \"efgEGaA\",\t1,\tT_F,\tNULL,\tNULL,\tT_D,\tNULL,\tT_LD,\tNULL,\t\"*\"\t},\n-  { \"sc\",\t1,\tT_C,\tNULL,\tNULL,\tT_W,\tNULL,\tNULL,\tNULL,\t\"*a\"\t},\n+  { \"c\",\t1,\tT_C,\tNULL,\tNULL,\tT_W,\tNULL,\tNULL,\tNULL,\t\"*\"\t},\n+  { \"s\",\t1,\tT_C,\tNULL,\tNULL,\tT_W,\tNULL,\tNULL,\tNULL,\t\"*a\"\t},\n   { \"[\",\t1,\tT_C,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\t\"*a\"\t},\n   { \"C\",\t1,\tT_W,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\t\"*\"\t},\n-  { \"S\",\t1,\tT_W,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\t\"*\"\t},\n+  { \"S\",\t1,\tT_W,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\t\"*a\"\t},\n   { \"p\",\t2,\tT_V,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\tNULL,\t\"*\"\t},\n   { \"n\",\t1,\tT_I,\tT_C,\tT_S,\tT_L,\tT_LL,\tNULL,\tNULL,\t\"\"\t},\n   { NULL }\n@@ -1574,6 +1575,15 @@ check_format_info (info, params)\n \t  warning (\"conversion lacks type at end of format\");\n \t  continue;\n \t}\n+      /* The m, C, and S formats are GNU extensions.  */\n+      if (pedantic && info->format_type != strftime_format_type\n+\t  && (format_char == 'm' || format_char == 'C' || format_char == 'S'))\n+\twarning (\"ANSI C does not support the `%c' format\", format_char);\n+      /* ??? The a and A formats are C9X extensions, and should be allowed\n+\t when a C9X option is added.  */\n+      if (pedantic && info->format_type != strftime_format_type\n+\t  && (format_char == 'a' || format_char == 'A'))\n+\twarning (\"ANSI C does not support the `%c' format\", format_char);\n       format_chars++;\n       switch (info->format_type)\n \t{\n@@ -1625,6 +1635,9 @@ check_format_info (info, params)\n \t  /* To simplify the following code.  */\n \t  aflag = 0;\n \t}\n+      /* The a flag is a GNU extension.  */\n+      else if (pedantic && aflag)\n+\twarning (\"ANSI C does not support the `a' flag\");\n       if (info->format_type == scanf_format_type && format_char == '[')\n \t{\n \t  /* Skip over scan set, in case it happens to have '%' in it.  */"}]}