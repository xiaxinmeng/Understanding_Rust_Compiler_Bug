{"sha": "295ac7c79ebe8ec1dec799c748c49e44fd6b4b47", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjk1YWM3Yzc5ZWJlOGVjMWRlYzc5OWM3NDhjNDllNDRmZDZiNGI0Nw==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2019-07-28T09:29:11Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2019-07-28T09:29:11Z"}, "message": "[RS6000] PR91135, __linux__ not defined with -mcall-aixdesc on 9.x and ppc64\n\nThis patch makes the obvious fix for PR91135, and deletes extraneous\ncopies of GNU_USER_TARGET_D_OS_VERSIONS that appear in rs6000/linux.h\nand rs6000/linux64.h.  Since all configurations using either of these\nfiles also include linux.h there is no need to duplicate the macro.\n\n\tPR target/91135\n\t* config/rs6000/linux.h (GNU_USER_TARGET_D_OS_VERSIONS): Don't\n\tdefine.\n\t* config/rs6000/linux64.h (TARGET_OS_CPP_BUILTINS): Invoke\n\tGNU_USER_TARGET_OS_CPP_BUILTINS for aixdesc abi.\n\t(GNU_USER_TARGET_D_OS_VERSIONS): Don't define.\n\nFrom-SVN: r273854", "tree": {"sha": "0ffe169a6e3bd1aaf5ef04ca3f91529fab315eee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ffe169a6e3bd1aaf5ef04ca3f91529fab315eee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8d852645145d10bbf72cbd82ef080a0057eb9c0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d852645145d10bbf72cbd82ef080a0057eb9c0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d852645145d10bbf72cbd82ef080a0057eb9c0e"}], "stats": {"total": 38, "additions": 11, "deletions": 27}, "files": [{"sha": "34120003c5fe5931d3c66287c8f5a1656709d0f8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=295ac7c79ebe8ec1dec799c748c49e44fd6b4b47", "patch": "@@ -1,3 +1,12 @@\n+2019-07-28  Alan Modra  <amodra@gmail.com>\n+\n+\tPR target/91135\n+\t* config/rs6000/linux.h (GNU_USER_TARGET_D_OS_VERSIONS): Don't\n+\tdefine.\n+\t* config/rs6000/linux64.h (TARGET_OS_CPP_BUILTINS): Invoke\n+\tGNU_USER_TARGET_OS_CPP_BUILTINS for aixdesc abi.\n+\t(GNU_USER_TARGET_D_OS_VERSIONS): Don't define.\n+\n 2019-07-28  Alan Modra  <amodra@gmail.com>\n \n \tPR target/91050"}, {"sha": "ffceb32bf653c7f60f33a63c76d7175e7b637461", "filename": "gcc/config/rs6000/linux.h", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47/gcc%2Fconfig%2Frs6000%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47/gcc%2Fconfig%2Frs6000%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux.h?ref=295ac7c79ebe8ec1dec799c748c49e44fd6b4b47", "patch": "@@ -59,19 +59,6 @@\n     }\t\t\t\t\t\t\t\\\n   while (0)\n \n-#define GNU_USER_TARGET_D_OS_VERSIONS()\t\t\\\n-    do {\t\t\t\t\t\\\n-\tbuiltin_version (\"linux\");\t\t\\\n-\tif (OPTION_GLIBC)\t\t\t\\\n-\t  builtin_version (\"CRuntime_Glibc\");\t\\\n-\telse if (OPTION_UCLIBC)\t\t\t\\\n-\t  builtin_version (\"CRuntime_UClibc\");\t\\\n-\telse if (OPTION_BIONIC)\t\t\t\\\n-\t  builtin_version (\"CRuntime_Bionic\");\t\\\n-\telse if (OPTION_MUSL)\t\t\t\\\n-\t  builtin_version (\"CRuntime_Musl\");\t\\\n-    } while (0)\n-\n #undef\tCPP_OS_DEFAULT_SPEC\n #define CPP_OS_DEFAULT_SPEC \"%(cpp_os_linux)\"\n "}, {"sha": "4d329b544ad98d56ef25217ddb07cdef419df86d", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 2, "deletions": 14, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/295ac7c79ebe8ec1dec799c748c49e44fd6b4b47/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=295ac7c79ebe8ec1dec799c748c49e44fd6b4b47", "patch": "@@ -372,7 +372,8 @@ extern int dot_symbols;\n #define TARGET_OS_CPP_BUILTINS()\t\t\t\\\n   do\t\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\\\n-      if (strcmp (rs6000_abi_name, \"linux\") == 0)\t\\\n+      if (strcmp (rs6000_abi_name, \"linux\") == 0\t\\\n+\t  || strcmp (rs6000_abi_name, \"aixdesc\") == 0)\t\\\n \tGNU_USER_TARGET_OS_CPP_BUILTINS();\t\t\\\n       if (TARGET_64BIT)\t\t\t\t\t\\\n \t{\t\t\t\t\t\t\\\n@@ -396,19 +397,6 @@ extern int dot_symbols;\n     }\t\t\t\t\t\t\t\\\n   while (0)\n \n-#define GNU_USER_TARGET_D_OS_VERSIONS()\t\t\\\n-    do {\t\t\t\t\t\\\n-\tbuiltin_version (\"linux\");\t\t\\\n-\tif (OPTION_GLIBC)\t\t\t\\\n-\t  builtin_version (\"CRuntime_Glibc\");\t\\\n-\telse if (OPTION_UCLIBC)\t\t\t\\\n-\t  builtin_version (\"CRuntime_UClibc\");\t\\\n-\telse if (OPTION_BIONIC)\t\t\t\\\n-\t  builtin_version (\"CRuntime_Bionic\");\t\\\n-\telse if (OPTION_MUSL)\t\t\t\\\n-\t  builtin_version (\"CRuntime_Musl\");\t\\\n-    } while (0)\n-\n #undef  CPP_OS_DEFAULT_SPEC\n #define CPP_OS_DEFAULT_SPEC \"%(cpp_os_linux) %(include_extra)\"\n "}]}