{"sha": "175aed004525c485193d7fed4991a4588846fd79", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTc1YWVkMDA0NTI1YzQ4NTE5M2Q3ZmVkNDk5MWE0NTg4ODQ2ZmQ3OQ==", "commit": {"author": {"name": "Andreas Schwab", "email": "schwab@linux-m68k.org", "date": "2012-07-10T11:48:00Z"}, "committer": {"name": "Andreas Schwab", "email": "schwab@gcc.gnu.org", "date": "2012-07-10T11:48:00Z"}, "message": "re PR bootstrap/53913 (resource.c:1179:5: error: 'current_function_decl' undeclared broke m68k bootstrap)\n\nPR bootstrap/53913\n* config/m68k/m68k.c (m68k_epilogue_uses): New.\n* config/m68k/m68k.h (EPILOGUE_USES): Use it.\n* config/m68k/m68k-protos.h (m68k_epilogue_uses): Add prototype.\n\nFrom-SVN: r189410", "tree": {"sha": "83ab5660032743de079b7fa294956e3d98bd009f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83ab5660032743de079b7fa294956e3d98bd009f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/175aed004525c485193d7fed4991a4588846fd79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/175aed004525c485193d7fed4991a4588846fd79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/175aed004525c485193d7fed4991a4588846fd79", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/175aed004525c485193d7fed4991a4588846fd79/comments", "author": {"login": "andreas-schwab", "id": 2175493, "node_id": "MDQ6VXNlcjIxNzU0OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2175493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-schwab", "html_url": "https://github.com/andreas-schwab", "followers_url": "https://api.github.com/users/andreas-schwab/followers", "following_url": "https://api.github.com/users/andreas-schwab/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-schwab/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-schwab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-schwab/subscriptions", "organizations_url": "https://api.github.com/users/andreas-schwab/orgs", "repos_url": "https://api.github.com/users/andreas-schwab/repos", "events_url": "https://api.github.com/users/andreas-schwab/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-schwab/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "30a7bac96d207827916e549718cd1157fe9dbf9a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30a7bac96d207827916e549718cd1157fe9dbf9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30a7bac96d207827916e549718cd1157fe9dbf9a"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "c5ebfd5222f1e894c61f437d0f6b45e5294602bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175aed004525c485193d7fed4991a4588846fd79/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175aed004525c485193d7fed4991a4588846fd79/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=175aed004525c485193d7fed4991a4588846fd79", "patch": "@@ -1,3 +1,10 @@\n+2012-07-10  Andreas Schwab  <schwab@linux-m68k.org>\n+\n+\tPR bootstrap/53913\n+\t* config/m68k/m68k.c (m68k_epilogue_uses): New.\n+\t* config/m68k/m68k.h (EPILOGUE_USES): Use it.\n+\t* config/m68k/m68k-protos.h (m68k_epilogue_uses): Add prototype.\n+\n 2012-07-10  Richard Henderson  <rth@redhat.com>\n \n \t* target.def (builtin_mul_widen_even, builtin_mul_widen_odd): Remove."}, {"sha": "a6b5dee181779eafff32141f15977d20dc7e1ed3", "filename": "gcc/config/m68k/m68k-protos.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175aed004525c485193d7fed4991a4588846fd79/gcc%2Fconfig%2Fm68k%2Fm68k-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175aed004525c485193d7fed4991a4588846fd79/gcc%2Fconfig%2Fm68k%2Fm68k-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k-protos.h?ref=175aed004525c485193d7fed4991a4588846fd79", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler.  Sun 68000/68020 version.\n-   Copyright (C) 2000, 2002, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n+   Copyright (C) 2000, 2002, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2012\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -68,6 +68,7 @@ extern int emit_move_sequence (rtx *, enum machine_mode, rtx);\n extern bool m68k_movem_pattern_p (rtx, rtx, HOST_WIDE_INT, bool);\n extern const char *m68k_output_movem (rtx *, rtx, HOST_WIDE_INT, bool);\n extern void m68k_final_prescan_insn (rtx, rtx *, int);\n+extern bool m68k_epilogue_uses (int);\n \n /* Functions from m68k.c used in constraints.md.  */\n extern rtx m68k_unwrap_symbol (rtx, bool);"}, {"sha": "0e55e1c230916c47f5932b5a568ced5ab277eb61", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175aed004525c485193d7fed4991a4588846fd79/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175aed004525c485193d7fed4991a4588846fd79/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=175aed004525c485193d7fed4991a4588846fd79", "patch": "@@ -6506,4 +6506,14 @@ m68k_init_sync_libfuncs (void)\n   init_sync_libfuncs (UNITS_PER_WORD);\n }\n \n+/* Implements EPILOGUE_USES.  All registers are live on exit from an\n+   interrupt routine.  */\n+bool\n+m68k_epilogue_uses (int regno ATTRIBUTE_UNUSED)\n+{\n+  return (reload_completed\n+\t  && (m68k_get_function_kind (current_function_decl)\n+\t      == m68k_fk_interrupt_handler));\n+}\n+\n #include \"gt-m68k.h\""}, {"sha": "8be0879e2821aa196359a8341c4f2708fc9833c2", "filename": "gcc/config/m68k/m68k.h", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/175aed004525c485193d7fed4991a4588846fd79/gcc%2Fconfig%2Fm68k%2Fm68k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/175aed004525c485193d7fed4991a4588846fd79/gcc%2Fconfig%2Fm68k%2Fm68k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.h?ref=175aed004525c485193d7fed4991a4588846fd79", "patch": "@@ -802,11 +802,7 @@ do { if (cc_prev_status.flags & CC_IN_68881)\t\t\t\\\n /* Before the prologue, the top of the frame is at 4(%sp).  */\n #define INCOMING_FRAME_SP_OFFSET 4\n \n-/* All registers are live on exit from an interrupt routine.  */\n-#define EPILOGUE_USES(REGNO)\t\t\t\t\t\\\n-  (reload_completed\t\t\t\t\t\t\\\n-   && (m68k_get_function_kind (current_function_decl)\t\\\n-       == m68k_fk_interrupt_handler))\n+#define EPILOGUE_USES(REGNO) m68k_epilogue_uses (REGNO)\n \n /* Describe how we implement __builtin_eh_return.  */\n #define EH_RETURN_DATA_REGNO(N) \\"}]}