{"sha": "52fdc9b5d9e8e868a066146571d364c470986061", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTJmZGM5YjVkOWU4ZTg2OGEwNjYxNDY1NzFkMzY0YzQ3MDk4NjA2MQ==", "commit": {"author": {"name": "Keith Seitz", "email": "keiths@redhat.com", "date": "2007-04-20T00:06:11Z"}, "committer": {"name": "Keith Seitz", "email": "kseitz@gcc.gnu.org", "date": "2007-04-20T00:06:11Z"}, "message": "interpret-run.cc [...]: Save the original insn for the breakpoint before posting the JVMTI notification.\n\n        * interpret-run.cc [insn_breakpoint]: Save the original\n        insn for the breakpoint before posting the JVMTI notification.\n\nFrom-SVN: r123985", "tree": {"sha": "3445ad0de038ba6d533d5820552dfe986c5d94d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3445ad0de038ba6d533d5820552dfe986c5d94d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52fdc9b5d9e8e868a066146571d364c470986061", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52fdc9b5d9e8e868a066146571d364c470986061", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52fdc9b5d9e8e868a066146571d364c470986061", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52fdc9b5d9e8e868a066146571d364c470986061/comments", "author": {"login": "shtiek", "id": 107581324, "node_id": "U_kgDOBmmPjA", "avatar_url": "https://avatars.githubusercontent.com/u/107581324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shtiek", "html_url": "https://github.com/shtiek", "followers_url": "https://api.github.com/users/shtiek/followers", "following_url": "https://api.github.com/users/shtiek/following{/other_user}", "gists_url": "https://api.github.com/users/shtiek/gists{/gist_id}", "starred_url": "https://api.github.com/users/shtiek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shtiek/subscriptions", "organizations_url": "https://api.github.com/users/shtiek/orgs", "repos_url": "https://api.github.com/users/shtiek/repos", "events_url": "https://api.github.com/users/shtiek/events{/privacy}", "received_events_url": "https://api.github.com/users/shtiek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "699cee69531988d1dcc6bd5ae17bc9ba56a0125f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/699cee69531988d1dcc6bd5ae17bc9ba56a0125f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/699cee69531988d1dcc6bd5ae17bc9ba56a0125f"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "6e916a71b63735d98ab1db0a3c201985547b3759", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52fdc9b5d9e8e868a066146571d364c470986061/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52fdc9b5d9e8e868a066146571d364c470986061/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=52fdc9b5d9e8e868a066146571d364c470986061", "patch": "@@ -1,3 +1,8 @@\n+2007-04-19  Keith Seitz  <keiths@redhat.com>\n+\n+\t* interpret-run.cc [insn_breakpoint]: Save the original\n+\tinsn for the breakpoint before posting the JVMTI notification.\n+\n 2007-04-19  Tom Tromey  <tromey@redhat.com>\n \n \t* gnu/javax/net/ssl/provider/SSLSocketFactoryImpl.h: Rebuilt."}, {"sha": "649b1bd2486702686101036b38c0e14373599c4e", "filename": "libjava/interpret-run.cc", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52fdc9b5d9e8e868a066146571d364c470986061/libjava%2Finterpret-run.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52fdc9b5d9e8e868a066146571d364c470986061/libjava%2Finterpret-run.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finterpret-run.cc?ref=52fdc9b5d9e8e868a066146571d364c470986061", "patch": "@@ -2600,18 +2600,19 @@ details.  */\n \tThread *thread = Thread::currentThread ();\n \tJNIEnv *jni_env = _Jv_GetCurrentJNIEnv ();\n \n-\t_Jv_JVMTI_PostEvent (JVMTI_EVENT_BREAKPOINT, thread, jni_env,\n-\t\t\t     method, location);\n-\n-\t// Continue execution\n+\t// Save the insn here since the breakpoint could be removed\n+\t// before the JVMTI notification returns.\n \tusing namespace gnu::gcj::jvmti;\n \tBreakpoint *bp\n \t  = BreakpointManager::getBreakpoint (reinterpret_cast<jlong> (method),\n \t\t\t\t\t      location);\n \tJvAssert (bp != NULL);\n-\n \tpc_t opc = reinterpret_cast<pc_t> (bp->getInsn ());\n \n+\t_Jv_JVMTI_PostEvent (JVMTI_EVENT_BREAKPOINT, thread, jni_env,\n+\t\t\t     method, location);\n+\n+\t// Continue execution\n #ifdef DIRECT_THREADED\n \tgoto *(opc->insn);\n #else"}]}