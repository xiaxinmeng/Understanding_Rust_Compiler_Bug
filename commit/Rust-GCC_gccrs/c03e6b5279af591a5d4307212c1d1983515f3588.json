{"sha": "c03e6b5279af591a5d4307212c1d1983515f3588", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzAzZTZiNTI3OWFmNTkxYTVkNDMwNzIxMmMxZDE5ODM1MTVmMzU4OA==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-04-01T15:11:01Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2013-04-01T15:11:01Z"}, "message": "re PR fortran/56500 ([OOP] \"IMPLICIT CLASS(...)\" wrongly rejected)\n\n2013-04-01  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/56500\n\t* symbol.c (gfc_set_default_type): Build class container for\n\tIMPLICIT CLASS.\n\n2013-04-01  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/56500\n\t* gfortran.dg/implicit_class_1.f90: New.\n\nFrom-SVN: r197306", "tree": {"sha": "114a4fb74107b03a1e46eef2f68c14b30ce7aae9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/114a4fb74107b03a1e46eef2f68c14b30ce7aae9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c03e6b5279af591a5d4307212c1d1983515f3588", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c03e6b5279af591a5d4307212c1d1983515f3588", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c03e6b5279af591a5d4307212c1d1983515f3588", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c03e6b5279af591a5d4307212c1d1983515f3588/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5717a8d48e4d4e28d22b4a69b7f86965cc2cc5c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5717a8d48e4d4e28d22b4a69b7f86965cc2cc5c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5717a8d48e4d4e28d22b4a69b7f86965cc2cc5c2"}], "stats": {"total": 50, "additions": 50, "deletions": 0}, "files": [{"sha": "7f9a1a5ccb3d2f695f46f0c2e513aa9315c3c68e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c03e6b5279af591a5d4307212c1d1983515f3588", "patch": "@@ -1,3 +1,9 @@\n+2013-04-01  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/56500\n+\t* symbol.c (gfc_set_default_type): Build class container for\n+\tIMPLICIT CLASS.\n+\n 2013-03-31  Tobias Burnus  <burnus@net-b.de>\n \n \t* class.c (finalization_scalarizer, finalizer_insert_packed_call,"}, {"sha": "6fc5812b218cbf52995e8aa9a637562f12a5653c", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=c03e6b5279af591a5d4307212c1d1983515f3588", "patch": "@@ -261,6 +261,10 @@ gfc_set_default_type (gfc_symbol *sym, int error_flag, gfc_namespace *ns)\n \n   if (ts->type == BT_CHARACTER && ts->u.cl)\n     sym->ts.u.cl = gfc_new_charlen (sym->ns, ts->u.cl);\n+  else if (ts->type == BT_CLASS\n+\t   && gfc_build_class_symbol (&sym->ts, &sym->attr,\n+\t\t\t\t      &sym->as, false) == FAILURE)\n+    return FAILURE;\n \n   if (sym->attr.is_bind_c == 1 && gfc_option.warn_c_binding_type)\n     {"}, {"sha": "c1fc14d4bb435bd716990b93850da4b0e77928af", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c03e6b5279af591a5d4307212c1d1983515f3588", "patch": "@@ -1,3 +1,8 @@\n+2013-04-01  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/56500\n+\t* gfortran.dg/implicit_class_1.f90: New.\n+\n 2013-03-31  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/56786"}, {"sha": "329f57aaa12ed8553245197cfec6e0d41bd86923", "filename": "gcc/testsuite/gfortran.dg/implicit_class_1.f90", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_class_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c03e6b5279af591a5d4307212c1d1983515f3588/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_class_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_class_1.f90?ref=c03e6b5279af591a5d4307212c1d1983515f3588", "patch": "@@ -0,0 +1,35 @@\n+! { dg-do run }\n+!\n+! PR 56500: [OOP] \"IMPLICIT CLASS(...)\" wrongly rejected\n+!\n+! Contributed by Reinhold Bader <Reinhold.Bader@lrz.de>\n+\n+program upimp\n+  implicit class(foo) (a-b)\n+  implicit class(*) (c)\n+  type :: foo\n+    integer :: i\n+  end type\n+  allocatable :: aaf, caf\n+\n+  allocate(aaf, source=foo(2))\n+  select type (aaf)\n+  type is (foo)\n+    if (aaf%i /= 2) call abort\n+  class default\n+    call abort\n+  end select\n+\n+  allocate(caf, source=foo(3))\n+  select type (caf)\n+  type is (foo)\n+    if (caf%i /= 3) call abort\n+  class default\n+    call abort\n+  end select\n+\n+contains\n+  subroutine gloo(x)\n+    implicit class(*) (a-z)\n+  end\n+end program"}]}