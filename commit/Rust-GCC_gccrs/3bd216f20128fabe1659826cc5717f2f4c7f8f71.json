{"sha": "3bd216f20128fabe1659826cc5717f2f4c7f8f71", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2JkMjE2ZjIwMTI4ZmFiZTE2NTk4MjZjYzU3MTdmMmY0YzdmOGY3MQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2002-10-24T09:02:24Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-10-24T09:02:24Z"}, "message": "reload.c (find_reloads_toplev): Mode of X is not important when simplifying subregs of constants.\n\n        * reload.c (find_reloads_toplev): Mode of X is not important\n        when simplifying subregs of constants.\n\t* g++.dg/opt/reload1.C: New.\n\nFrom-SVN: r58490", "tree": {"sha": "4872d54c6a68e5d36a81166e122435fbbb288ec7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4872d54c6a68e5d36a81166e122435fbbb288ec7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3bd216f20128fabe1659826cc5717f2f4c7f8f71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bd216f20128fabe1659826cc5717f2f4c7f8f71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3bd216f20128fabe1659826cc5717f2f4c7f8f71", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3bd216f20128fabe1659826cc5717f2f4c7f8f71/comments", "author": null, "committer": null, "parents": [{"sha": "60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60bc2b4b9cf62bd9b7294a80f2e42beb569fb7c2"}], "stats": {"total": 52, "additions": 50, "deletions": 2}, "files": [{"sha": "7f368957a55885883ad0c82f91070f0a6aa378aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bd216f20128fabe1659826cc5717f2f4c7f8f71/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bd216f20128fabe1659826cc5717f2f4c7f8f71/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3bd216f20128fabe1659826cc5717f2f4c7f8f71", "patch": "@@ -1,3 +1,9 @@\n+2002-10-24  Richard Henderson  <rth@redhat.com>\n+\n+        PR opt/7944\n+        * reload.c (find_reloads_toplev): Mode of X is not important\n+\twhen simplifying subregs of constants.\n+\n 2002-10-24  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config.gcc (mips64vr-*-elf*, mips64vrel-*-elf*): Add"}, {"sha": "d500350f868e8feb332a11f3b8503b692e480765", "filename": "gcc/reload.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bd216f20128fabe1659826cc5717f2f4c7f8f71/gcc%2Freload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bd216f20128fabe1659826cc5717f2f4c7f8f71/gcc%2Freload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload.c?ref=3bd216f20128fabe1659826cc5717f2f4c7f8f71", "patch": "@@ -4471,8 +4471,7 @@ find_reloads_toplev (x, opnum, type, ind_levels, is_set_dest, insn,\n \t\t\t\t\treg_equiv_constant[regno])) != 0)\n \treturn tem;\n \n-      if (GET_MODE_BITSIZE (GET_MODE (x)) == BITS_PER_WORD\n-\t  && regno >= FIRST_PSEUDO_REGISTER && reg_renumber[regno] < 0\n+      if (regno >= FIRST_PSEUDO_REGISTER && reg_renumber[regno] < 0\n \t  && reg_equiv_constant[regno] != 0)\n \t{\n \t  tem ="}, {"sha": "0d8fb894e4e10fb29d6f2ca6f5e01231cd1a391b", "filename": "gcc/testsuite/g++.dg/opt/reload1.C", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3bd216f20128fabe1659826cc5717f2f4c7f8f71/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Freload1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3bd216f20128fabe1659826cc5717f2f4c7f8f71/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Freload1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Freload1.C?ref=3bd216f20128fabe1659826cc5717f2f4c7f8f71", "patch": "@@ -0,0 +1,43 @@\n+// PR 7944\n+// { dg-do compile }\n+// { dg-options -O2 }\n+\n+struct B\n+{\n+  B & operator << (short s)\n+  {\n+    int j;\n+    if (j)\n+        return operator << (s);\n+    else\n+        return operator << (s);\n+  }\n+};\n+\n+struct A\n+{\n+  int i;\n+  static void bar ();\n+  static int quux ()\n+  {\n+    bar ();\n+    return 0;\n+  }\n+\n+  A ():i (quux ())\n+  {\n+  }\n+  ~A ()\n+  {\n+  }\n+};\n+\n+void\n+foo ()\n+{\n+  short s[4] = { 0, 0, 0, 1 };\n+  A a[2] = { A (), A () };\n+\n+  B b;\n+  b << s[0] << s[2];\n+}"}]}