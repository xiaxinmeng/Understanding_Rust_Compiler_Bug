{"sha": "83bd032b4b837724b81c7db25be205771311a3a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODNiZDAzMmI0YjgzNzcyNGI4MWM3ZGIyNWJlMjA1NzcxMzExYTNhMw==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2007-02-04T23:51:28Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2007-02-04T23:51:28Z"}, "message": "cfgcleanup.c (try_optimize_cfg): Avoid removing ENTRY_BLOCK_PTR.\n\n\t* cfgcleanup.c (try_optimize_cfg): Avoid removing ENTRY_BLOCK_PTR.\n\nFrom-SVN: r121584", "tree": {"sha": "cb5883febf06ea7e39d3e7a41458c08e927af1a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb5883febf06ea7e39d3e7a41458c08e927af1a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/83bd032b4b837724b81c7db25be205771311a3a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83bd032b4b837724b81c7db25be205771311a3a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83bd032b4b837724b81c7db25be205771311a3a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83bd032b4b837724b81c7db25be205771311a3a3/comments", "author": null, "committer": null, "parents": [{"sha": "14fa2cc05762323f22f92cdb1dee039277bc6292", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14fa2cc05762323f22f92cdb1dee039277bc6292", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14fa2cc05762323f22f92cdb1dee039277bc6292"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "f458ac7b176f6487c43c29357efafe7c3fafbbf4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83bd032b4b837724b81c7db25be205771311a3a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83bd032b4b837724b81c7db25be205771311a3a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=83bd032b4b837724b81c7db25be205771311a3a3", "patch": "@@ -1,3 +1,7 @@\n+2007-02-04  Zdenek Dvorak <dvorakz@suse.cz>\n+\n+\t* cfgcleanup.c (try_optimize_cfg): Avoid removing ENTRY_BLOCK_PTR.\n+\n 2007-02-04  Zdenek Dvorak <dvorakz@suse.cz>\n \n \t* cfgloopmanip.c (loop_delete_branch_edge): Removed.\n@@ -43,7 +47,7 @@\n \t* passes.c (init_optimization_passes): Reindent.\n \n 2007-02-04  Jan Hubicka  <jh@suse.cz>\n-            Eric Botcazou  <ebotcazou@adacore.com>\n+\t    Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* tree-optimize.c (has_abnormal_outgoing_edge_p): Move to...\n \t(execute_fixup_cfg): Break out the abnormal goto code."}, {"sha": "ee5c69bd2e6a3ec601e2b354cbb2d000e38086b5", "filename": "gcc/cfgcleanup.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83bd032b4b837724b81c7db25be205771311a3a3/gcc%2Fcfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83bd032b4b837724b81c7db25be205771311a3a3/gcc%2Fcfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgcleanup.c?ref=83bd032b4b837724b81c7db25be205771311a3a3", "patch": "@@ -1992,7 +1992,7 @@ try_optimize_cfg (int mode)\n \t      bool changed_here = false;\n \n \t      /* Delete trivially dead basic blocks.  */\n-\t      while (EDGE_COUNT (b->preds) == 0)\n+\t      if (EDGE_COUNT (b->preds) == 0)\n \t\t{\n \t\t  c = b->prev_bb;\n \t\t  if (dump_file)\n@@ -2002,7 +2002,9 @@ try_optimize_cfg (int mode)\n \t\t  delete_basic_block (b);\n \t\t  if (!(mode & CLEANUP_CFGLAYOUT))\n \t\t    changed = true;\n-\t\t  b = c;\n+\t\t  /* Avoid trying to remove ENTRY_BLOCK_PTR.  */\n+\t\t  b = (c == ENTRY_BLOCK_PTR ? c->next_bb : c);\n+\t\t  continue;\n \t\t}\n \n \t      /* Remove code labels no longer used.  */"}]}