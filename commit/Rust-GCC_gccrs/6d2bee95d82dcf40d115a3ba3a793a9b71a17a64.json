{"sha": "6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQyYmVlOTVkODJkY2Y0MGQxMTVhM2JhM2E3OTNhOWI3MWExN2E2NA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2013-05-28T18:30:03Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2013-05-28T18:30:03Z"}, "message": "re PR fortran/37336 ([F03] Finish derived-type finalization)\n\n2013-05-28  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/37336\n        * resolve.c (gfc_resolve_finalizers): Remove not implemented\n        * error.\n\n2013-05-28  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/37336\n        * gfortran.dg/finalize_11.f90: New.\n        * gfortran.dg/finalize_4.f03: Remove dg-error.\n        * gfortran.dg/finalize_5.f03: Ditto.\n        * gfortran.dg/finalize_6.f03: Ditto.\n        * gfortran.dg/finalize_7.f03: Ditto.\n\nFrom-SVN: r199388", "tree": {"sha": "f824b075b5ea79e41e049837b2d617971b19e54c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f824b075b5ea79e41e049837b2d617971b19e54c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b49eefa5747d53788ac33f34fa1d034acd21668e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b49eefa5747d53788ac33f34fa1d034acd21668e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b49eefa5747d53788ac33f34fa1d034acd21668e"}], "stats": {"total": 67, "additions": 48, "deletions": 19}, "files": [{"sha": "326a01f0875c8e1e9625edda23c533fec0743a6f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -1,3 +1,8 @@\n+2013-05-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/37336\n+\t* resolve.c (gfc_resolve_finalizers): Remove not implemented error.\n+\n 2013-05-28  Tobias Burnus  <burnus@net-b.de>\n \n \t* trans-expr.c (gfc_conv_procedure_call): Deallocate"}, {"sha": "4cfc858b7c48262ff10884afeb4f675bac3b043c", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -11241,10 +11241,6 @@ gfc_resolve_finalizers (gfc_symbol* derived)\n \t\t \" defined at %L, suggest also scalar one\",\n \t\t derived->name, &derived->declared_at);\n \n-  /* TODO:  Remove this error when finalization is finished.  */\n-  gfc_error (\"Finalization at %L is not yet implemented\",\n-\t     &derived->declared_at);\n-\n   gfc_find_derived_vtab (derived);\n   return result;\n }"}, {"sha": "cbf3d3261497d216b7feeb9832e8bbdd9578b6d9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -1,3 +1,12 @@\n+2013-05-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/37336\n+\t* gfortran.dg/finalize_11.f90: New.\n+\t* gfortran.dg/finalize_4.f03: Remove dg-error.\n+\t* gfortran.dg/finalize_5.f03: Ditto.\n+\t* gfortran.dg/finalize_6.f03: Ditto.\n+\t* gfortran.dg/finalize_7.f03: Ditto.\n+\n 2013-05-28  Tobias Burnus  <burnus@net-b.de>\n \n \t* gfortran.dg/class_array_16.f90: New."}, {"sha": "e9bb8147789ccd932e9e6d80eaf746476318c144", "filename": "gcc/testsuite/gfortran.dg/finalize_11.f90", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_11.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_11.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_11.f90?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -0,0 +1,31 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f2003\" }\n+!\n+! Copied from finalize_6.f90 - was before rejected as the finalization\n+! wrapper uses TS29913 (-std=f2008ts) features.\n+!\n+\n+MODULE final_type\n+  IMPLICIT NONE\n+\n+  TYPE :: mytype\n+    INTEGER :: fooarr(42)\n+    REAL :: foobar\n+  CONTAINS\n+    FINAL :: finalize_single\n+  END TYPE mytype\n+\n+CONTAINS\n+\n+  SUBROUTINE finalize_single (el)\n+    IMPLICIT NONE\n+    TYPE(mytype) :: el\n+    ! Do nothing in this test\n+  END SUBROUTINE finalize_single\n+\n+END MODULE final_type\n+\n+PROGRAM finalizer\n+  IMPLICIT NONE\n+  ! Do nothing\n+END PROGRAM finalizer"}, {"sha": "b4c08f236da61044707ba14d496b56105d176671", "filename": "gcc/testsuite/gfortran.dg/finalize_4.f03", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_4.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_4.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_4.f03?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -48,6 +48,3 @@ PROGRAM finalizer\n   DEALLOCATE(mat)\n \n END PROGRAM finalizer\n-\n-! TODO: Remove this once finalization is implemented.\n-! { dg-excess-errors \"not yet implemented\" }"}, {"sha": "fb8153140b7f568b7285df5b6fa3132e001f8951", "filename": "gcc/testsuite/gfortran.dg/finalize_5.f03", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_5.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_5.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_5.f03?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -107,6 +107,3 @@ PROGRAM finalizer\n   IMPLICIT NONE\n   ! Nothing here, errors above\n END PROGRAM finalizer\n-\n-! TODO: Remove this once finalization is implemented.\n-! { dg-excess-errors \"not yet implemented\" }"}, {"sha": "d155c7bd0a504b693126547389948c388c2e7c6a", "filename": "gcc/testsuite/gfortran.dg/finalize_6.f90", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_6.f90?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -10,9 +10,9 @@ MODULE final_type\n   TYPE :: mytype\n     INTEGER :: fooarr(42)\n     REAL :: foobar\n-  CONTAINS ! { dg-error \"Fortran 2003\" }\n-    FINAL :: finalize_single ! { dg-error \"Fortran 2003\" }\n-  END TYPE mytype\n+  CONTAINS ! { dg-error \"Fortran 2003: CONTAINS block in derived type definition\" }\n+    FINAL :: finalize_single ! { dg-error \"Fortran 2003: FINAL procedure declaration|FINAL procedure 'finalize_single' at .1. is not a SUBROUTINE\" }\n+  END TYPE mytype ! { dg-error \"Fortran 2008: Derived type definition at .1. with empty CONTAINS section\" }\n \n CONTAINS\n \n@@ -28,6 +28,3 @@ PROGRAM finalizer\n   IMPLICIT NONE\n   ! Do nothing\n END PROGRAM finalizer\n-\n-! TODO: Remove this once finalization is implemented.\n-! { dg-excess-errors \"not yet implemented\" }"}, {"sha": "5807ed50e15fd9bdd7637e963bc712828a133e1c", "filename": "gcc/testsuite/gfortran.dg/finalize_7.f03", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_7.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d2bee95d82dcf40d115a3ba3a793a9b71a17a64/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_7.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffinalize_7.f03?ref=6d2bee95d82dcf40d115a3ba3a793a9b71a17a64", "patch": "@@ -52,6 +52,3 @@ PROGRAM finalizer\n   IMPLICIT NONE\n   ! Nothing here\n END PROGRAM finalizer\n-\n-! TODO: Remove this once finalization is implemented.\n-! { dg-excess-errors \"not yet implemented\" }"}]}