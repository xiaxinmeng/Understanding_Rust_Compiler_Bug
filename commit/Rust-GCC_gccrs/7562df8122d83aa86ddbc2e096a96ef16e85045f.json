{"sha": "7562df8122d83aa86ddbc2e096a96ef16e85045f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU2MmRmODEyMmQ4M2FhODZkZGJjMmUwOTZhOTZlZjE2ZTg1MDQ1Zg==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@redhat.com", "date": "2007-08-31T14:28:38Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2007-08-31T14:28:38Z"}, "message": "tree-ssa-coalesce.c (compare_pairs): Use the elements as secondary keys in order to obtain a stable sort.\n\n* tree-ssa-coalesce.c (compare_pairs): Use the elements as secondary keys \n  in order to obtain a stable sort.\n\nFrom-SVN: r127993", "tree": {"sha": "186057dc0dca9f422aab0bbbc925c792aee79361", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/186057dc0dca9f422aab0bbbc925c792aee79361"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7562df8122d83aa86ddbc2e096a96ef16e85045f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7562df8122d83aa86ddbc2e096a96ef16e85045f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7562df8122d83aa86ddbc2e096a96ef16e85045f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7562df8122d83aa86ddbc2e096a96ef16e85045f/comments", "author": {"login": "nickclifton", "id": 31441682, "node_id": "MDQ6VXNlcjMxNDQxNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickclifton", "html_url": "https://github.com/nickclifton", "followers_url": "https://api.github.com/users/nickclifton/followers", "following_url": "https://api.github.com/users/nickclifton/following{/other_user}", "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions", "organizations_url": "https://api.github.com/users/nickclifton/orgs", "repos_url": "https://api.github.com/users/nickclifton/repos", "events_url": "https://api.github.com/users/nickclifton/events{/privacy}", "received_events_url": "https://api.github.com/users/nickclifton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3681df8fe1eac5d26deefddeb621d2d74bbf5bb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3681df8fe1eac5d26deefddeb621d2d74bbf5bb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3681df8fe1eac5d26deefddeb621d2d74bbf5bb9"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "e7d598a7a7fd8848952746f819992734bb6882df", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7562df8122d83aa86ddbc2e096a96ef16e85045f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7562df8122d83aa86ddbc2e096a96ef16e85045f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7562df8122d83aa86ddbc2e096a96ef16e85045f", "patch": "@@ -1,3 +1,8 @@\n+2007-08-31  Nick Clifton  <nickc@redhat.com>\n+\n+\t* tree-ssa-coalesce.c (compare_pairs): Use the elements as\n+\tsecondary keys in order to obtain a stable sort.\n+\n 2007-08-31  Nick Clifton  <nickc@redhat.com>\n \n \tPR target/33132"}, {"sha": "ef1ebcab4a97142c124d619f7cd2f1c4b5a51c0e", "filename": "gcc/tree-ssa-coalesce.c", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7562df8122d83aa86ddbc2e096a96ef16e85045f/gcc%2Ftree-ssa-coalesce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7562df8122d83aa86ddbc2e096a96ef16e85045f/gcc%2Ftree-ssa-coalesce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-coalesce.c?ref=7562df8122d83aa86ddbc2e096a96ef16e85045f", "patch": "@@ -314,8 +314,22 @@ add_coalesce (coalesce_list_p cl, int p1, int p2,\n static int \n compare_pairs (const void *p1, const void *p2)\n {\n-  return (*(const_coalesce_pair_p const*)p1)->cost\n-    - (*(const_coalesce_pair_p const*)p2)->cost;\n+  const_coalesce_pair_p const * pp1 = p1;\n+  const_coalesce_pair_p const * pp2 = p2;\n+  int result;\n+\n+  result = (* pp2)->cost - (* pp1)->cost;\n+  /* Since qsort does not guarantee stability we use the elements\n+     as a secondary key.  This provides us with independence from\n+     the host's implementation of the sorting algorithm.  */\n+  if (result == 0)\n+    {\n+      result = (* pp2)->first_element - (* pp1)->first_element;\n+      if (result == 0)\n+\tresult = (* pp2)->second_element - (* pp1)->second_element;\n+    }\n+\n+  return result;\n }\n \n "}]}