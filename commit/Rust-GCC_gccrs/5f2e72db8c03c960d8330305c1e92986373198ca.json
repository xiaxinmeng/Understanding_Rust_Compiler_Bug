{"sha": "5f2e72db8c03c960d8330305c1e92986373198ca", "node_id": "C_kwDOANBUbNoAKDVmMmU3MmRiOGMwM2M5NjBkODMzMDMwNWMxZTkyOTg2MzczMTk4Y2E", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-03-02T09:38:39Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2022-03-02T09:38:39Z"}, "message": "testsuite: Add testcases for already fixed PR [PR100541]\n\nThese testcases started failing with r12-630 and one of them\ngot fixed with r12-4531 (aka PR102764 fix and r12-4616 further\nimproved the fix) and the other went latent in r12-2591 (i.e. threader\nchanges) and I believe was fixed for real by the PR102764 fix too.\n\n2022-03-02  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR debug/100541\n\t* g++.dg/opt/pr100541-1.C: New test.\n\t* g++.dg/opt/pr100541-2.C: New test.", "tree": {"sha": "56ea3ccf1ce452fe1ff32d4741c8c7542cff423c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56ea3ccf1ce452fe1ff32d4741c8c7542cff423c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f2e72db8c03c960d8330305c1e92986373198ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f2e72db8c03c960d8330305c1e92986373198ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f2e72db8c03c960d8330305c1e92986373198ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f2e72db8c03c960d8330305c1e92986373198ca/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "31702fe9694e7ebeab91805e7121a1a757c108bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31702fe9694e7ebeab91805e7121a1a757c108bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31702fe9694e7ebeab91805e7121a1a757c108bd"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "9a73e15f98bfb4bf921585ef46dab327a2f4d0a0", "filename": "gcc/testsuite/g++.dg/opt/pr100541-1.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f2e72db8c03c960d8330305c1e92986373198ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr100541-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f2e72db8c03c960d8330305c1e92986373198ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr100541-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr100541-1.C?ref=5f2e72db8c03c960d8330305c1e92986373198ca", "patch": "@@ -0,0 +1,24 @@\n+// PR debug/100541\n+// { dg-do compile }\n+// { dg-options \"-O3 -fno-expensive-optimizations -fno-tree-dce -fno-tree-dominator-opts -fcompare-debug\" }\n+\n+int a, b, i, x, y;\n+\n+int\n+foo ()\n+{\n+  int rcmd = 0;\n+  switch (x) {\n+  case 0:\n+    if (i)\n+      rcmd = 6;\n+    if (y % 3)\n+      int &m1 = rcmd = rcmd | 5;\n+    break;\n+  case 1:\n+    rcmd = b;\n+  }\n+  if (rcmd != 7)\n+    return rcmd;\n+  return a;\n+}"}, {"sha": "35624814ed4be2f23a1949addfd12813921e4b9d", "filename": "gcc/testsuite/g++.dg/opt/pr100541-2.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f2e72db8c03c960d8330305c1e92986373198ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr100541-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f2e72db8c03c960d8330305c1e92986373198ca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr100541-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr100541-2.C?ref=5f2e72db8c03c960d8330305c1e92986373198ca", "patch": "@@ -0,0 +1,25 @@\n+// PR debug/100541\n+// { dg-do compile { target c++11 } }\n+// { dg-options \"-O2 -fno-tree-dce -fno-tree-dominator-opts -fcompare-debug\" }\n+\n+int INVALID_TILE;\n+void GetSlopePixelZ();\n+long RUNWAY_IN_block;\n+struct Airport {\n+  long flags;\n+};\n+struct Station {\n+  Airport airport;\n+} * HandleCrashedAircraft_st;\n+short HandleCrashedAircraft_v_0;\n+void HandleCrashedAircraft() {\n+  Station *__trans_tmp_1 = INVALID_TILE ? nullptr : HandleCrashedAircraft_st,\n+          *st;\n+  if (HandleCrashedAircraft_v_0 && __trans_tmp_1 == nullptr &&\n+      HandleCrashedAircraft_v_0 % 3)\n+    GetSlopePixelZ();\n+  if (HandleCrashedAircraft_v_0)\n+    GetSlopePixelZ();\n+  if (__trans_tmp_1)\n+    st->airport.flags &= RUNWAY_IN_block;\n+}"}]}