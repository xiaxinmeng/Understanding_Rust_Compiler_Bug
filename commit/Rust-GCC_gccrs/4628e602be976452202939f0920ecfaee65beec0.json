{"sha": "4628e602be976452202939f0920ecfaee65beec0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYyOGU2MDJiZTk3NjQ1MjIwMjkzOWYwOTIwZWNmYWVlNjViZWVjMA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2008-05-20T10:03:27Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2008-05-20T10:03:27Z"}, "message": "tree-vn.c (vn_lookup_with_vuses): Do not use the alias oracle.\n\n2008-05-20  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-vn.c (vn_lookup_with_vuses): Do not use the alias oracle.\n\n\t* gcc.c-torture/execute/20080519-1.c: New testcase.\n\nFrom-SVN: r135605", "tree": {"sha": "219b4745e3d4bd267487f2ab7694a7b7d012f750", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/219b4745e3d4bd267487f2ab7694a7b7d012f750"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4628e602be976452202939f0920ecfaee65beec0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4628e602be976452202939f0920ecfaee65beec0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4628e602be976452202939f0920ecfaee65beec0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4628e602be976452202939f0920ecfaee65beec0/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3b23a6d3910d7b3cffaea9d66ade2e1c1e4f4dbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b23a6d3910d7b3cffaea9d66ade2e1c1e4f4dbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b23a6d3910d7b3cffaea9d66ade2e1c1e4f4dbf"}], "stats": {"total": 70, "additions": 69, "deletions": 1}, "files": [{"sha": "fc28f21667e71778c4e9d45fcb21b65f7a78f9be", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4628e602be976452202939f0920ecfaee65beec0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4628e602be976452202939f0920ecfaee65beec0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4628e602be976452202939f0920ecfaee65beec0", "patch": "@@ -1,3 +1,7 @@\n+2008-05-20  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-vn.c (vn_lookup_with_vuses): Do not use the alias oracle.\n+\n 2008-05-20  Kai Tietz  <kai.tietz@onevision.com>\n \n \t* config/i386/i386-protos.h (ix86_return_in_memory): Removed."}, {"sha": "e0ac508059d0938c3ee03602b73e2391a37ba365", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4628e602be976452202939f0920ecfaee65beec0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4628e602be976452202939f0920ecfaee65beec0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4628e602be976452202939f0920ecfaee65beec0", "patch": "@@ -1,3 +1,7 @@\n+2008-05-20  Richard Guenther  <rguenther@suse.de>\n+\n+\t* gcc.c-torture/execute/20080519-1.c: New testcase.\n+\n 2008-05-19  Xinliang David Li  <davidxl@google.com>\n \n \t* gcc.dg/cdce1.c: Remove test."}, {"sha": "303c4e65f637d85ee962fd53898c43c86938a4a2", "filename": "gcc/testsuite/gcc.c-torture/execute/20080519-1.c", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4628e602be976452202939f0920ecfaee65beec0/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20080519-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4628e602be976452202939f0920ecfaee65beec0/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20080519-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20080519-1.c?ref=4628e602be976452202939f0920ecfaee65beec0", "patch": "@@ -0,0 +1,58 @@\n+extern void abort (void);\n+\n+typedef unsigned long HARD_REG_SET[2];\n+HARD_REG_SET reg_class_contents[2];\n+\n+struct du_chain\n+{\n+  struct du_chain *next_use;\n+  int cl;\n+};\n+\n+void __attribute__((noinline))\n+merge_overlapping_regs (HARD_REG_SET *p)\n+{\n+  if ((*p)[0] != -1 || (*p)[1] != -1)\n+    abort ();\n+}\n+\n+void __attribute__((noinline))\n+regrename_optimize (struct du_chain *this)\n+{\n+  HARD_REG_SET this_unavailable;\n+  unsigned long *scan_fp_;\n+  int n_uses;\n+  struct du_chain *last;\n+\n+  this_unavailable[0] = 0;\n+  this_unavailable[1] = 0;\n+\n+  n_uses = 0;\n+  for (last = this; last->next_use; last = last->next_use)\n+    {\n+      scan_fp_ = reg_class_contents[last->cl];\n+      n_uses++;\n+      this_unavailable[0] |= ~ scan_fp_[0];\n+      this_unavailable[1] |= ~ scan_fp_[1];\n+    }\n+  if (n_uses < 1)\n+    return;\n+\n+  scan_fp_ = reg_class_contents[last->cl];\n+  this_unavailable[0] |= ~ scan_fp_[0];\n+  this_unavailable[1] |= ~ scan_fp_[1];\n+\n+  merge_overlapping_regs (&this_unavailable);\n+}\n+\n+int main()\n+{\n+  struct du_chain du1 = { 0, 0 };\n+  struct du_chain du0 = { &du1, 1 };\n+  reg_class_contents[0][0] = -1;\n+  reg_class_contents[0][1] = -1;\n+  reg_class_contents[1][0] = 0;\n+  reg_class_contents[1][1] = 0;\n+  regrename_optimize (&du0);\n+  return 0;\n+}"}, {"sha": "1d2e5a55de009ee05e1a19f66a9891c05537e477", "filename": "gcc/tree-vn.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4628e602be976452202939f0920ecfaee65beec0/gcc%2Ftree-vn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4628e602be976452202939f0920ecfaee65beec0/gcc%2Ftree-vn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vn.c?ref=4628e602be976452202939f0920ecfaee65beec0", "patch": "@@ -306,7 +306,9 @@ vn_lookup_with_vuses (tree expr, VEC (tree, gc) *vuses)\n   if (is_gimple_min_invariant (expr) || TREE_CODE (expr) == FIELD_DECL)\n     return expr;\n \n-  return vn_reference_lookup (expr, vuses, true);\n+  /* We may not walk the use-def chains here as the alias oracle cannot\n+     properly deal with VALUE_HANDLE tree nodes we feed it here.  */\n+  return vn_reference_lookup (expr, vuses, false);\n }\n \n static tree"}]}