{"sha": "edb740aa72b882e6899897d454a5855b3155089a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWRiNzQwYWE3MmI4ODJlNjg5OTg5N2Q0NTRhNTg1NWIzMTU1MDg5YQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-09-09T08:51:08Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-09-09T08:51:08Z"}, "message": "[multiple changes]\n\n2010-09-09  Robert Dewar  <dewar@adacore.com>\n\n\t* par-ch4.adb (Box_Error): New procedure.\n\n2010-09-09  Thomas Quinot  <quinot@adacore.com>\n\n\t* sem.adb: Minor reformatting.\n\n2010-09-09  Pascal Obry  <obry@adacore.com>\n\n\t* prj-env.adb: Style fix, use /and then/ and /or else/.\n\t* gnat_ugn.texi: Fix typos.\n\nFrom-SVN: r164053", "tree": {"sha": "c65b04d09d55c419ad9e38e97ec11f862afbb2cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c65b04d09d55c419ad9e38e97ec11f862afbb2cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/edb740aa72b882e6899897d454a5855b3155089a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edb740aa72b882e6899897d454a5855b3155089a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edb740aa72b882e6899897d454a5855b3155089a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edb740aa72b882e6899897d454a5855b3155089a/comments", "author": null, "committer": null, "parents": [{"sha": "1a14a58c73942ef8c23114fd05f4fc6acf40a991", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a14a58c73942ef8c23114fd05f4fc6acf40a991", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a14a58c73942ef8c23114fd05f4fc6acf40a991"}], "stats": {"total": 81, "additions": 58, "deletions": 23}, "files": [{"sha": "ae8b006d6ae188e3b026fcfd5a8249a6f2db72e0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=edb740aa72b882e6899897d454a5855b3155089a", "patch": "@@ -1,3 +1,16 @@\n+2010-09-09  Robert Dewar  <dewar@adacore.com>\n+\n+\t* par-ch4.adb (Box_Error): New procedure.\n+\n+2010-09-09  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* sem.adb: Minor reformatting.\n+\n+2010-09-09  Pascal Obry  <obry@adacore.com>\n+\n+\t* prj-env.adb: Style fix, use /and then/ and /or else/.\n+\t* gnat_ugn.texi: Fix typos.\n+\n 2010-09-03  Joseph Myers  <joseph@codesourcery.com>\n \n \tPR ada/45499"}, {"sha": "480f391a4ef41e6604c3238cc5c02d7ebbd3100f", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=edb740aa72b882e6899897d454a5855b3155089a", "patch": "@@ -27456,7 +27456,7 @@ end API;\n \n @noindent\n Note that a variable is\n-@strong{always imported with a Stdcall convention}. A function\n+@strong{always imported with a DLL convention}. A function\n can have @code{C} or @code{Stdcall} convention.\n (@pxref{Windows Calling Conventions}).\n \n@@ -28474,7 +28474,6 @@ The program is built with foreign tools and the DLL is built with\n @item\n The program is built with @code{GCC/GNAT} and the DLL is built with\n foreign tools.\n-@item\n @end enumerate\n \n @noindent"}, {"sha": "6de5e84aed93f6ba6c429bc8648d118c9ca8d808", "filename": "gcc/ada/par-ch4.adb", "status": "modified", "additions": 40, "deletions": 17, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fpar-ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fpar-ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch4.adb?ref=edb740aa72b882e6899897d454a5855b3155089a", "patch": "@@ -1153,6 +1153,33 @@ package body Ch4 is\n       Lparen_Sloc    : Source_Ptr;\n       Scan_State     : Saved_Scan_State;\n \n+      procedure Box_Error;\n+      --  Called if <> is encountered as positional aggregate element. Issues\n+      --  error message and sets Expr_Node to Error.\n+\n+      ---------------\n+      -- Box_Error --\n+      ---------------\n+\n+      procedure Box_Error is\n+      begin\n+         if Ada_Version < Ada_2005 then\n+            Error_Msg_SC (\"box in aggregate is an Ada 2005 extension\");\n+         end if;\n+\n+         --  Ada 2005 (AI-287): The box notation is allowed only with named\n+         --  notation because positional notation might be error prone. For\n+         --  example, in \"(X, <>, Y, <>)\", there is no type associated with\n+         --  the boxes, so you might not be leaving out the components you\n+         --  thought you were leaving out.\n+\n+         Error_Msg_SC (\"(Ada 2005) box only allowed with named notation\");\n+         Scan; -- past box\n+         Expr_Node := Error;\n+      end Box_Error;\n+\n+   --  Start of processsing for P_Aggregate_Or_Paren_Expr\n+\n    begin\n       Lparen_Sloc := Token_Ptr;\n       T_Left_Paren;\n@@ -1196,26 +1223,17 @@ package body Ch4 is\n             end if;\n          end if;\n \n-         --  Ada 2005 (AI-287): The box notation is allowed only with named\n-         --  notation because positional notation might be error prone. For\n-         --  example, in \"(X, <>, Y, <>)\", there is no type associated with\n-         --  the boxes, so you might not be leaving out the components you\n-         --  thought you were leaving out.\n+         --  Scan expression, handling box appearing as positional argument\n \n-         if Ada_Version >= Ada_05 and then Token = Tok_Box then\n-            Error_Msg_SC (\"(Ada 2005) box notation only allowed with \"\n-                          & \"named notation\");\n-            Scan; --  past BOX\n-            Aggregate_Node := New_Node (N_Aggregate, Lparen_Sloc);\n-            return Aggregate_Node;\n+         if Token = Tok_Box then\n+            Box_Error;\n+         else\n+            Expr_Node := P_Expression_Or_Range_Attribute_If_OK;\n          end if;\n \n-         Expr_Node := P_Expression_Or_Range_Attribute_If_OK;\n-\n          --  Extension aggregate case\n \n          if Token = Tok_With then\n-\n             if Nkind (Expr_Node) = N_Attribute_Reference\n               and then Attribute_Name (Expr_Node) = Name_Range\n             then\n@@ -1316,8 +1334,7 @@ package body Ch4 is\n                              \"extension aggregate\");\n             raise Error_Resync;\n \n-         --  A range attribute can only appear as part of a discrete choice\n-         --  list.\n+         --  Range attribute can only appear as part of a discrete choice list\n \n          elsif Nkind (Expr_Node) = N_Attribute_Reference\n            and then Attribute_Name (Expr_Node) = Name_Range\n@@ -1386,11 +1403,17 @@ package body Ch4 is\n             exit;\n          end if;\n \n+         --  Deal with misused box\n+\n+         if Token = Tok_Box then\n+            Box_Error;\n+\n          --  Otherwise initiate for reentry to top of loop by scanning an\n          --  initial expression, unless the first token is OTHERS.\n \n-         if Token = Tok_Others then\n+         elsif Token = Tok_Others then\n             Expr_Node := Empty;\n+\n          else\n             Save_Scan_State (Scan_State); -- at start of expression\n             Expr_Node := P_Expression_Or_Range_Attribute_If_OK;"}, {"sha": "7af52e8451aff4f780079d8388218148745511fc", "filename": "gcc/ada/prj-env.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fprj-env.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fprj-env.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-env.adb?ref=edb740aa72b882e6899897d454a5855b3155089a", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2009, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2010, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -1582,7 +1582,7 @@ package body Prj.Env is\n       --  For the object path, we make a distinction depending on\n       --  Including_Libraries.\n \n-      if Objects_Path and Including_Libraries then\n+      if Objects_Path and then Including_Libraries then\n          if Project.Objects_Path_File_With_Libs = No_Path then\n             Object_Path_Table.Init (Object_Paths);\n             Process_Object_Dirs := True;\n@@ -1602,7 +1602,7 @@ package body Prj.Env is\n       --  If there is something to do, set Seen to False for all projects,\n       --  then call the recursive procedure Add for Project.\n \n-      if Process_Source_Dirs or Process_Object_Dirs then\n+      if Process_Source_Dirs or else Process_Object_Dirs then\n          For_All_Projects (Project, Dummy);\n       end if;\n "}, {"sha": "f5c7629b401e62a7509d76e4c761f252d8557aef", "filename": "gcc/ada/sem.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fsem.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/edb740aa72b882e6899897d454a5855b3155089a/gcc%2Fada%2Fsem.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem.adb?ref=edb740aa72b882e6899897d454a5855b3155089a", "patch": "@@ -67,7 +67,7 @@ package body Sem is\n    --  Controls debugging printouts for Walk_Library_Items\n \n    Outer_Generic_Scope : Entity_Id := Empty;\n-   --  Global reference to the outer scope that is generic. In a non- generic\n+   --  Global reference to the outer scope that is generic. In a non-generic\n    --  context, it is empty. At the moment, it is only used for avoiding\n    --  freezing of external references in generics.\n "}]}