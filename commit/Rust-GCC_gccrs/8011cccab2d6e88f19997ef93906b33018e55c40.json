{"sha": "8011cccab2d6e88f19997ef93906b33018e55c40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODAxMWNjY2FiMmQ2ZTg4ZjE5OTk3ZWY5MzkwNmIzMzAxOGU1NWM0MA==", "commit": {"author": {"name": "Michael Eager", "email": "eager@gcc.gnu.org", "date": "2014-02-23T18:53:47Z"}, "committer": {"name": "Michael Eager", "email": "eager@gcc.gnu.org", "date": "2014-02-23T18:53:47Z"}, "message": "[multiple changes]\n\n2014-02-23  Edgar E. Iglesias <edgar.iglesias@xilinx.com>\n\n\t* config/microblaze/microblaze.h: Remove SECONDARY_MEMORY_NEEDED\n\tdefinition.\n\n2014-02-23  David Holsgrove <david.holsgrove@xilinx.com>\n\n\t* gcc/testsuite/gcc.target/microblaze/others/mem_reload.c: New test.\n\nFrom-SVN: r208059", "tree": {"sha": "14da54258a99c76908a64ba690500535f2bbf046", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/14da54258a99c76908a64ba690500535f2bbf046"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8011cccab2d6e88f19997ef93906b33018e55c40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8011cccab2d6e88f19997ef93906b33018e55c40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8011cccab2d6e88f19997ef93906b33018e55c40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8011cccab2d6e88f19997ef93906b33018e55c40/comments", "author": null, "committer": null, "parents": [{"sha": "c332c7df482723c319d8834253df4c8c9bc8a0d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c332c7df482723c319d8834253df4c8c9bc8a0d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c332c7df482723c319d8834253df4c8c9bc8a0d9"}], "stats": {"total": 94, "additions": 87, "deletions": 7}, "files": [{"sha": "269d3f5bea74377511d23771d7d9caf1eba25256", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8011cccab2d6e88f19997ef93906b33018e55c40", "patch": "@@ -1,3 +1,8 @@\n+2014-02-23  Edgar E. Iglesias <edgar.iglesias@xilinx.com>\n+\n+\t* config/microblaze/microblaze.h: Remove SECONDARY_MEMORY_NEEDED\n+\tdefinition.\n+\n 2014-02-23  David Holsgrove <david.holsgrove@xilinx.com>\n \n \t* /config/microblaze/microblaze.c: Add microblaze_asm_output_mi_thunk"}, {"sha": "58d8895a319c7187aeb8360db0b51eee5a5926e3", "filename": "gcc/config/microblaze/microblaze.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.h?ref=8011cccab2d6e88f19997ef93906b33018e55c40", "patch": "@@ -412,9 +412,6 @@ extern enum reg_class microblaze_regno_to_class[];\n \t  || GET_MODE (X) == VOIDmode)\t\t\t\t\t\\\n \t ? (GR_REGS) : (CLASS))))\n \n-#define SECONDARY_MEMORY_NEEDED(CLASS1, CLASS2, MODE)\t\t\t\\\n-  (GET_MODE_CLASS (MODE) == MODE_INT)\n-\n /* Stack layout; function entry, exit and calling.  */\n \n #define STACK_GROWS_DOWNWARD"}, {"sha": "f3c0c851c0f47703a2f2b367be404a8d410d138f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8011cccab2d6e88f19997ef93906b33018e55c40", "patch": "@@ -1,9 +1,13 @@\n+2014-02-23  David Holsgrove <david.holsgrove@xilinx.com>\n+\n+\t* gcc/testsuite/gcc.target/microblaze/others/mem_reload.c: New test.\n+\n 2014-02-23  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n-        * gcc.dg/vmx/lde.c: New test.\n-        * gcc.dg/vmx/lde-be-order.c: New test.\n-        * gcc.dg/vmx/ste.c: New test.\n-        * gcc.dg/vmx/ste-be-order.c: New test.\n+\t* gcc.dg/vmx/lde.c: New test.\n+\t* gcc.dg/vmx/lde-be-order.c: New test.\n+\t* gcc.dg/vmx/ste.c: New test.\n+\t* gcc.dg/vmx/ste-be-order.c: New test.\n \n 2014-02-22  Hans-Peter Nilsson  <hp@axis.com>\n "}, {"sha": "e285fb8212ac5ca9f43be5e438de746d506c781d", "filename": "gcc/testsuite/gcc.target/microblaze/others/mem_reload.c", "status": "added", "additions": 74, "deletions": 0, "changes": 74, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2Ftestsuite%2Fgcc.target%2Fmicroblaze%2Fothers%2Fmem_reload.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8011cccab2d6e88f19997ef93906b33018e55c40/gcc%2Ftestsuite%2Fgcc.target%2Fmicroblaze%2Fothers%2Fmem_reload.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmicroblaze%2Fothers%2Fmem_reload.c?ref=8011cccab2d6e88f19997ef93906b33018e55c40", "patch": "@@ -0,0 +1,74 @@\n+/* { dg-options \"-O2 -fPIC\" } */\n+\n+typedef struct test_struct\n+{\n+    unsigned long long h[8];\n+    unsigned long long Nl,Nh;\n+    union {\n+        unsigned long long d[16];\n+        unsigned char p[(16*8)];\n+    } u;\n+    unsigned int num,md_len;\n+} TEST_STRUCT;\n+\n+static const unsigned long long K512[12] = {\n+    0x428a2f98d728ae22,0x7137449123ef65cd,\n+    0xb5c0fbcfec4d3b2f,0xe9b5dba58189dbbc,\n+    0x3956c25bf348b538,0x59f111f1b605d019,\n+    0x923f82a4af194f9b,0xab1c5ed5da6d8118,\n+    0xd807aa98a3030242,0x12835b0145706fbe,\n+    0x243185be4ee4b28c,0x550c7dc3d5ffb4e2};\n+\n+#define ROTR(x,s)   (((x)>>s) | (x)<<(64-s))\n+#define Sigma0(x)   (ROTR((x),28) ^ ROTR((x),34) ^ ROTR((x),39))\n+#define Sigma1(x)   (ROTR((x),14) ^ ROTR((x),18) ^ ROTR((x),41))\n+#define Ch(x,y,z)   (((x) & (y)) ^ ((~(x)) & (z)))\n+#define Maj(x,y,z)  (((x) & (y)) ^ ((x) & (z)) ^ ((y) & (z)))\n+\n+#define ROUND_00_15(i,a,b,c,d,e,f,g,h)  do {    \\\n+    T1 += h + Sigma1(e) + Ch(e,f,g) + K512[i];  \\\n+    h = Sigma0(a) + Maj(a,b,c);         \\\n+    d += T1;    h += T1;        } while (0)\n+\n+#define ROUND_16_80(i,a,b,c,d,e,f,g,h,X)    do {    \\\n+    T1 = X[(i)&0x0f] += s0 + s1 + X[(i+9)&0x0f];    \\\n+    ROUND_00_15(i,a,b,c,d,e,f,g,h);     } while (0)\n+\n+static void testfunc1 (TEST_STRUCT *ctx, const void *in, unsigned int num)\n+{\n+    const unsigned long long *W=in;\n+    unsigned long long  a,b,c,d,e,f,g,h,s0,s1,T1;\n+    unsigned long long  X[16];\n+    int i;\n+\n+    while (num--) {\n+\n+        T1 = X[0] = W[0];   ROUND_00_15(0,a,b,c,d,e,f,g,h);\n+        T1 = X[1] = W[1];   ROUND_00_15(1,h,a,b,c,d,e,f,g);\n+        T1 = X[2] = W[2];   ROUND_00_15(2,g,h,a,b,c,d,e,f);\n+        T1 = X[3] = W[3];   ROUND_00_15(3,f,g,h,a,b,c,d,e);\n+        T1 = X[4] = W[4];   ROUND_00_15(4,e,f,g,h,a,b,c,d);\n+        T1 = X[5] = W[5];   ROUND_00_15(5,d,e,f,g,h,a,b,c);\n+        T1 = X[6] = W[6];   ROUND_00_15(6,c,d,e,f,g,h,a,b);\n+        T1 = X[7] = W[7];   ROUND_00_15(7,b,c,d,e,f,g,h,a);\n+        T1 = X[8] = W[8];   ROUND_00_15(8,a,b,c,d,e,f,g,h);\n+        T1 = X[9] = W[9];   ROUND_00_15(9,h,a,b,c,d,e,f,g);\n+\n+        for (i=16;i<80;i+=8)\n+        {\n+            ROUND_16_80(i+0,a,b,c,d,e,f,g,h,X);\n+        }\n+\n+        ctx->h[4] += e; ctx->h[5] += f; ctx->h[6] += g; ctx->h[7] += h;\n+    }\n+}\n+\n+int testfunc2 (TEST_STRUCT *c, const void *_data, unsigned int len)\n+{\n+    const unsigned char *data=(const unsigned char *)_data;\n+\n+    unsigned char *p=(unsigned char *)c->u.p;\n+\n+    testfunc1 (c,p,0);\n+    testfunc1 (c,data,len/sizeof(c->u));\n+}"}]}