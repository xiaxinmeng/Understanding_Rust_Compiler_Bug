{"sha": "283a159fe38e477d93b189d43888f1e42043c0af", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjgzYTE1OWZlMzhlNDc3ZDkzYjE4OWQ0Mzg4OGYxZTQyMDQzYzBhZg==", "commit": {"author": {"name": "Andrew Haley", "email": "aph@cygnus.com", "date": "2000-01-17T15:45:24Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2000-01-17T15:45:24Z"}, "message": "natThrowable.cc: New file.\n\n2000-01-14  Andrew Haley  <aph@cygnus.com>\n\n\t* java/lang/natThrowable.cc: New file.\n\n\t* java/lang/Throwable.java (fillInStackTrace): Make native.\n\t(printStackTrace): Call native method to do this.\n\t(Throwable): Call fillInStackTrace.\n\t(stackTrace): New variable.\n\n\t* include/jvm.h: Add _Jv_ThisExecutable functions.\n\n\t* prims.cc: (_Jv_execName): New variable.\n\t(catch_segv): Call fillInStackTrace.\n\t(catch_fpe): Ditto.\n\t(_Jv_ThisExecutable): New functions.\n\t(JvRunMain): Set the name of this executable.\n\n\t* Makefile.am: Add java/lang/natThrowable.cc.\n\tAdd name-finder.cc.\n\t* Makefile.in: Rebuilt.\n\n\t* acconfig.h: Add HAVE_PROC_SELF_EXE.\n\n\t* configure.in: Force link with __frame_state_for in\n\tFORCELIBGCCSPEC.  Add new checks for backtrace.\n\t* include/config.h.in: Rebuilt.\n\n\t* name-finder.cc: New file.\n\t* include/name-finder.h: New file.\n\nFrom-SVN: r31460", "tree": {"sha": "e7424bbdd7c568c2f6f24481d328b24bade92628", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7424bbdd7c568c2f6f24481d328b24bade92628"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/283a159fe38e477d93b189d43888f1e42043c0af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/283a159fe38e477d93b189d43888f1e42043c0af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/283a159fe38e477d93b189d43888f1e42043c0af", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/283a159fe38e477d93b189d43888f1e42043c0af/comments", "author": null, "committer": null, "parents": [{"sha": "1353681247458baa6a3df8375b786df8ace7664c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1353681247458baa6a3df8375b786df8ace7664c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1353681247458baa6a3df8375b786df8ace7664c"}], "stats": {"total": 892, "additions": 731, "deletions": 161}, "files": [{"sha": "53f778822b036ddccba8eddd9196382b1cb3a840", "filename": "libjava/ChangeLog", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -1,3 +1,33 @@\n+2000-01-14  Andrew Haley  <aph@cygnus.com>\n+\n+\t* java/lang/natThrowable.cc: New file.\n+\n+\t* java/lang/Throwable.java (fillInStackTrace): Make native.\n+\t(printStackTrace): Call native method to do this.\n+\t(Throwable): Call fillInStackTrace.\n+\t(stackTrace): New variable.\n+\t\n+\t* include/jvm.h: Add _Jv_ThisExecutable functions.\n+\t\n+\t* prims.cc: (_Jv_execName): New variable.\n+\t(catch_segv): Call fillInStackTrace.\n+\t(catch_fpe): Ditto.\n+\t(_Jv_ThisExecutable): New functions.\n+\t(JvRunMain): Set the name of this executable.\n+\n+\t* Makefile.am: Add java/lang/natThrowable.cc.\n+\tAdd name-finder.cc.\n+\t* Makefile.in: Rebuilt.\n+\n+\t* acconfig.h: Add HAVE_PROC_SELF_EXE.\n+\n+\t* configure.in: Force link with __frame_state_for in\n+\tFORCELIBGCCSPEC.  Add new checks for backtrace.\n+\t* include/config.h.in: Rebuilt.\n+\n+\t* name-finder.cc: New file.\n+\t* include/name-finder.h: New file.\n+\t\n 2000-01-16  Anthony Green  <green@cygnus.com>\n \n \t* java/lang/StringBuffer.java (StringBuffer): Don't special case"}, {"sha": "bc828ce498f01cc3239ee4390d444b23eab1de72", "filename": "libjava/Makefile.am", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -112,7 +112,7 @@ javao_files = $(java_source_files:.java=.lo) \\\n libffi_files = `$(AR) t ../libffi/.libs/libffi.a 2>/dev/null | sed 's/\\.o/\\.lo/g' | sed 's/^/..\\/libffi\\//g'`\n \n libgcj_la_SOURCES = prims.cc jni.cc exception.cc \\\n-\tresolve.cc defineclass.cc interpret.cc\n+\tresolve.cc defineclass.cc interpret.cc name-finder.cc\n EXTRA_libgcj_la_SOURCES = boehm.cc nogc.cc posix-threads.cc no-threads.cc \\\n \t$(c_source_files) $(java_source_files) $(built_java_source_files)\n libgcj_la_DEPENDENCIES = libgcj.zip $(javao_files) $(nat_files) \\\n@@ -804,6 +804,7 @@ java/lang/natRuntime.cc\t\\\n java/lang/natString.cc \\\n java/lang/natSystem.cc \\\n java/lang/natThread.cc \\\n+java/lang/natThrowable.cc \\\n java/lang/reflect/natArray.cc \\\n java/lang/reflect/natConstructor.cc \\\n java/lang/reflect/natField.cc \\"}, {"sha": "26ee2e3076f9a7569daa9a1358ec5328fce866b6", "filename": "libjava/Makefile.in", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -184,7 +184,7 @@ javao_files = $(java_source_files:.java=.lo) \\\n libffi_files = `$(AR) t ../libffi/.libs/libffi.a 2>/dev/null | sed 's/\\.o/\\.lo/g' | sed 's/^/..\\/libffi\\//g'`\n \n libgcj_la_SOURCES = prims.cc jni.cc exception.cc \\\n-\tresolve.cc defineclass.cc interpret.cc\n+\tresolve.cc defineclass.cc interpret.cc name-finder.cc\n \n EXTRA_libgcj_la_SOURCES = boehm.cc nogc.cc posix-threads.cc no-threads.cc \\\n \t$(c_source_files) $(java_source_files) $(built_java_source_files)\n@@ -618,6 +618,7 @@ java/lang/natRuntime.cc\t\\\n java/lang/natString.cc \\\n java/lang/natSystem.cc \\\n java/lang/natThread.cc \\\n+java/lang/natThrowable.cc \\\n java/lang/reflect/natArray.cc \\\n java/lang/reflect/natConstructor.cc \\\n java/lang/reflect/natField.cc \\\n@@ -699,7 +700,7 @@ libgcjdata_a_LIBADD =\n LTLIBRARIES =  $(toolexeclib_LTLIBRARIES)\n \n libgcj_la_OBJECTS =  prims.lo jni.lo exception.lo resolve.lo \\\n-defineclass.lo interpret.lo\n+defineclass.lo interpret.lo name-finder.lo\n @NATIVE_TRUE@bin_PROGRAMS =  jv-convert$(EXEEXT) gij$(EXEEXT)\n @NATIVE_TRUE@@MAINTAINER_MODE_TRUE@noinst_PROGRAMS =  \\\n @NATIVE_TRUE@@MAINTAINER_MODE_TRUE@gen-from-JIS$(EXEEXT)\n@@ -923,8 +924,8 @@ DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n .deps/java/util/zip/ZipException.P .deps/java/util/zip/ZipFile.P \\\n .deps/java/util/zip/ZipInputStream.P \\\n .deps/java/util/zip/ZipOutputStream.P .deps/jni.P .deps/libgcjdata.P \\\n-.deps/no-threads.P .deps/nogc.P .deps/posix-threads.P .deps/prims.P \\\n-.deps/resolve.P\n+.deps/name-finder.P .deps/no-threads.P .deps/nogc.P \\\n+.deps/posix-threads.P .deps/prims.P .deps/resolve.P\n SOURCES = $(libgcjdata_a_SOURCES) $(libgcj_la_SOURCES) $(EXTRA_libgcj_la_SOURCES) $(jv_convert_SOURCES) $(EXTRA_jv_convert_SOURCES) $(gij_SOURCES) $(EXTRA_gij_SOURCES) $(gen_from_JIS_SOURCES) $(EXTRA_gen_from_JIS_SOURCES)\n OBJECTS = $(libgcjdata_a_OBJECTS) $(libgcj_la_OBJECTS) $(jv_convert_OBJECTS) $(gij_OBJECTS) $(gen_from_JIS_OBJECTS)\n "}, {"sha": "75931b7ef6f72e80993b150c08f9d1a754c38a24", "filename": "libjava/acconfig.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Facconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Facconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Facconfig.h?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -120,5 +120,8 @@\n /* Define if using setjmp/longjmp exceptions.  */\n #undef SJLJ_EXCEPTIONS\n \n+/* Define if you have /proc/self/exe */\n+#undef HAVE_PROC_SELF_EXE\n+ \n /* Define if getuid() and friends are missing.  */\n #undef NO_GETUID"}, {"sha": "56183b82feb37dde55d27a4eee0ed9e3ad79a13a", "filename": "libjava/configure", "status": "modified", "additions": 248, "deletions": 117, "changes": 365, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -2456,7 +2456,7 @@ fi\n \n FORCELIBGCCSPEC=\n if test \"$ac_cv_prog_gnu_ld\" = yes; then\n-   FORCELIBGCCSPEC=\"-u __rethrow -lgcc\"\n+   FORCELIBGCCSPEC=\"-u __rethrow -u __frame_state_for -lgcc\"\n fi   \n \n echo $ac_n \"checking for data_start\"\"... $ac_c\" 1>&6\n@@ -3224,16 +3224,147 @@ else\n fi\n done\n \n+   for ac_func in backtrace fork execvp pipe\n+do\n+echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n+echo \"configure:3231: checking for $ac_func\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 3236 \"configure\"\n+#include \"confdefs.h\"\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char $ac_func(); below.  */\n+#include <assert.h>\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char $ac_func();\n+\n+int main() {\n+\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)\n+choke me\n+#else\n+$ac_func();\n+#endif\n+\n+; return 0; }\n+EOF\n+if { (eval echo configure:3259: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_func_$ac_func=yes\"\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_func_$ac_func=no\"\n+fi\n+rm -f conftest*\n+fi\n+\n+if eval \"test \\\"`echo '$ac_cv_func_'$ac_func`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n+  cat >> confdefs.h <<EOF\n+#define $ac_tr_func 1\n+EOF\n+ \n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+done\n+\n+   for ac_hdr in execinfo.h unistd.h dlfcn.h\n+do\n+ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n+echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n+echo \"configure:3287: checking for $ac_hdr\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 3292 \"configure\"\n+#include \"confdefs.h\"\n+#include <$ac_hdr>\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:3297: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  rm -rf conftest*\n+  eval \"ac_cv_header_$ac_safe=yes\"\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_header_$ac_safe=no\"\n+fi\n+rm -f conftest*\n+fi\n+if eval \"test \\\"`echo '$ac_cv_header_'$ac_safe`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`\n+  cat >> confdefs.h <<EOF\n+#define $ac_tr_hdr 1\n+EOF\n+ \n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+done\n+ \n+   for ac_file in /proc/self/exe\n+do\n+\n+ac_safe=`echo \"$ac_file\" | sed 'y%./+-%__p_%'`\n+echo $ac_n \"checking for $ac_file\"\"... $ac_c\" 1>&6\n+echo \"configure:3328: checking for $ac_file\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_file_$ac_safe'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    { echo \"configure: error: Cannot check for file existence when cross compiling\" 1>&2; exit 1; }\n+else\n+  if test -r $ac_file; then\n+    eval \"ac_cv_file_$ac_safe=yes\"\n+  else\n+    eval \"ac_cv_file_$ac_safe=no\"\n+  fi\n+fi\n+fi\n+if eval \"test \\\"`echo '$ac_cv_file_'$ac_safe`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+    ac_tr_file=HAVE_`echo $ac_file | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`\n+  cat >> confdefs.h <<EOF\n+#define $ac_tr_file 1\n+EOF\n+ \n+     cat >> confdefs.h <<\\EOF\n+#define HAVE_PROC_SELF_EXE 1\n+EOF\n+\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+\n+fi\n+done\n+\n \n    for ac_func in gethostbyname_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3232: checking for $ac_func\" >&5\n+echo \"configure:3363: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3237 \"configure\"\n+#line 3368 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3256,7 +3387,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3260: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3391: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3283,7 +3414,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3287 \"configure\"\n+#line 3418 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3303,7 +3434,7 @@ rm -f conftest*\n      *\" -D_REENTRANT \"*) ;;\n      *)\n \t\techo $ac_n \"checking whether gethostbyname_r declaration requires -D_REENTRANT\"\"... $ac_c\" 1>&6\n-echo \"configure:3307: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n+echo \"configure:3438: checking whether gethostbyname_r declaration requires -D_REENTRANT\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_gethostbyname_r_needs_reentrant'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3316,14 +3447,14 @@ ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftes\n cross_compiling=$ac_cv_prog_cxx_cross\n \n \t  cat > conftest.$ac_ext <<EOF\n-#line 3320 \"configure\"\n+#line 3451 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:3327: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3458: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=no\n else\n@@ -3333,14 +3464,14 @@ else\n   \t\tCPPFLAGS_SAVE=\"$CPPFLAGS\"\n \t\tCPPFLAGS=\"$CPPFLAGS -D_REENTRANT\"\n \t\tcat > conftest.$ac_ext <<EOF\n-#line 3337 \"configure\"\n+#line 3468 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n int main() {\n gethostbyname_r(\"\", 0, 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:3344: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3475: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_gethostbyname_r_needs_reentrant=yes\n else\n@@ -3375,12 +3506,12 @@ EOF\n      esac\n \n      echo $ac_n \"checking for struct hostent_data\"\"... $ac_c\" 1>&6\n-echo \"configure:3379: checking for struct hostent_data\" >&5\n+echo \"configure:3510: checking for struct hostent_data\" >&5\n if eval \"test \\\"`echo '$''{'libjava_cv_struct_hostent_data'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \tcat > conftest.$ac_ext <<EOF\n-#line 3384 \"configure\"\n+#line 3515 \"configure\"\n #include \"confdefs.h\"\n \n #if GETHOSTBYNAME_R_NEEDS_REENTRANT && !defined(_REENTRANT)\n@@ -3391,7 +3522,7 @@ int main() {\n struct hostent_data data;\n ; return 0; }\n EOF\n-if { (eval echo configure:3395: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3526: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libjava_cv_struct_hostent_data=yes\n else\n@@ -3420,12 +3551,12 @@ done\n    for ac_func in gethostbyaddr_r\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3424: checking for $ac_func\" >&5\n+echo \"configure:3555: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3429 \"configure\"\n+#line 3560 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3448,7 +3579,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3452: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3583: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3475,7 +3606,7 @@ EOF\n      # We look for the one that returns `int'.\n      # Hopefully this check is robust enough.\n      cat > conftest.$ac_ext <<EOF\n-#line 3479 \"configure\"\n+#line 3610 \"configure\"\n #include \"confdefs.h\"\n #include <netdb.h>\n EOF\n@@ -3499,12 +3630,12 @@ done\n    for ac_func in gethostname\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3503: checking for $ac_func\" >&5\n+echo \"configure:3634: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3508 \"configure\"\n+#line 3639 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3527,7 +3658,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3531: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3662: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3551,7 +3682,7 @@ EOF\n EOF\n \n      cat > conftest.$ac_ext <<EOF\n-#line 3555 \"configure\"\n+#line 3686 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -3582,12 +3713,12 @@ done\n       for ac_func in pthread_mutexattr_settype pthread_mutexattr_setkind_np\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3586: checking for $ac_func\" >&5\n+echo \"configure:3717: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3591 \"configure\"\n+#line 3722 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3610,7 +3741,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3614: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3745: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3640,12 +3771,12 @@ done\n       for ac_func in sched_yield\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3644: checking for $ac_func\" >&5\n+echo \"configure:3775: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3649 \"configure\"\n+#line 3780 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3668,7 +3799,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3672: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3803: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3690,15 +3821,15 @@ EOF\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for sched_yield in -lrt\"\"... $ac_c\" 1>&6\n-echo \"configure:3694: checking for sched_yield in -lrt\" >&5\n+echo \"configure:3825: checking for sched_yield in -lrt\" >&5\n ac_lib_var=`echo rt'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lrt  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3702 \"configure\"\n+#line 3833 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3709,7 +3840,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:3713: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3844: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3735,15 +3866,15 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n \n \t  echo $ac_n \"checking for sched_yield in -lposix4\"\"... $ac_c\" 1>&6\n-echo \"configure:3739: checking for sched_yield in -lposix4\" >&5\n+echo \"configure:3870: checking for sched_yield in -lposix4\" >&5\n ac_lib_var=`echo posix4'_'sched_yield | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lposix4  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3747 \"configure\"\n+#line 3878 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3754,7 +3885,7 @@ int main() {\n sched_yield()\n ; return 0; }\n EOF\n-if { (eval echo configure:3758: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3889: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -3790,7 +3921,7 @@ done\n       # We can save a little space at runtime if the mutex has m_count\n       # or __m_count.  This is a nice hack for Linux.\n       cat > conftest.$ac_ext <<EOF\n-#line 3794 \"configure\"\n+#line 3925 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -3799,7 +3930,7 @@ int main() {\n         \n ; return 0; }\n EOF\n-if { (eval echo configure:3803: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3934: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE_M_COUNT 1\n@@ -3811,7 +3942,7 @@ else\n   rm -rf conftest*\n   \n \tcat > conftest.$ac_ext <<EOF\n-#line 3815 \"configure\"\n+#line 3946 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n int main() {\n@@ -3820,7 +3951,7 @@ int main() {\n \t  \n ; return 0; }\n EOF\n-if { (eval echo configure:3824: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3955: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define PTHREAD_MUTEX_HAVE___M_COUNT 1\n@@ -3840,12 +3971,12 @@ rm -f conftest*\n    for ac_func in gettimeofday time ftime\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3844: checking for $ac_func\" >&5\n+echo \"configure:3975: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3849 \"configure\"\n+#line 3980 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3868,7 +3999,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3872: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4003: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3899,12 +4030,12 @@ done\n    for ac_func in memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3903: checking for $ac_func\" >&5\n+echo \"configure:4034: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3908 \"configure\"\n+#line 4039 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3927,7 +4058,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3931: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4062: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3957,12 +4088,12 @@ done\n    for ac_func in memcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3961: checking for $ac_func\" >&5\n+echo \"configure:4092: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3966 \"configure\"\n+#line 4097 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3985,7 +4116,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3989: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4120: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -4033,20 +4164,20 @@ done\n    #--------------------------------------------------------------------\n \n    echo $ac_n \"checking for socket libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:4037: checking for socket libraries\" >&5\n+echo \"configure:4168: checking for socket libraries\" >&5\n if eval \"test \\\"`echo '$''{'gcj_cv_lib_sockets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   gcj_cv_lib_sockets=\n      gcj_checkBoth=0\n      unset ac_cv_func_connect\n      echo $ac_n \"checking for connect\"\"... $ac_c\" 1>&6\n-echo \"configure:4045: checking for connect\" >&5\n+echo \"configure:4176: checking for connect\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_connect'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4050 \"configure\"\n+#line 4181 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char connect(); below.  */\n@@ -4069,7 +4200,7 @@ connect();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4073: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4204: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_connect=yes\"\n else\n@@ -4092,22 +4223,22 @@ fi\n      if test \"$gcj_checkSocket\" = 1; then\n \t unset ac_cv_func_connect\n \t echo $ac_n \"checking for main in -lsocket\"\"... $ac_c\" 1>&6\n-echo \"configure:4096: checking for main in -lsocket\" >&5\n+echo \"configure:4227: checking for main in -lsocket\" >&5\n ac_lib_var=`echo socket'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lsocket  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4104 \"configure\"\n+#line 4235 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4111: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4242: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4134,12 +4265,12 @@ fi\n \t LIBS=\"$LIBS -lsocket -lnsl\"\n \t unset ac_cv_func_accept\n \t echo $ac_n \"checking for accept\"\"... $ac_c\" 1>&6\n-echo \"configure:4138: checking for accept\" >&5\n+echo \"configure:4269: checking for accept\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_accept'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4143 \"configure\"\n+#line 4274 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char accept(); below.  */\n@@ -4162,7 +4293,7 @@ accept();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4166: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4297: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_accept=yes\"\n else\n@@ -4189,12 +4320,12 @@ fi\n      gcj_oldLibs=$LIBS\n      LIBS=\"$LIBS $gcj_cv_lib_sockets\"\n      echo $ac_n \"checking for gethostbyname\"\"... $ac_c\" 1>&6\n-echo \"configure:4193: checking for gethostbyname\" >&5\n+echo \"configure:4324: checking for gethostbyname\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4198 \"configure\"\n+#line 4329 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char gethostbyname(); below.  */\n@@ -4217,7 +4348,7 @@ gethostbyname();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4221: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4352: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_gethostbyname=yes\"\n else\n@@ -4235,22 +4366,22 @@ if eval \"test \\\"`echo '$ac_cv_func_'gethostbyname`\\\" = yes\"; then\n else\n   echo \"$ac_t\"\"no\" 1>&6\n echo $ac_n \"checking for main in -lnsl\"\"... $ac_c\" 1>&6\n-echo \"configure:4239: checking for main in -lnsl\" >&5\n+echo \"configure:4370: checking for main in -lnsl\" >&5\n ac_lib_var=`echo nsl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lnsl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4247 \"configure\"\n+#line 4378 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4254: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4385: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4282,15 +4413,15 @@ echo \"$ac_t\"\"$gcj_cv_lib_sockets\" 1>&6\n \n    if test \"$with_system_zlib\" = yes; then\n       echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:4286: checking for deflate in -lz\" >&5\n+echo \"configure:4417: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4294 \"configure\"\n+#line 4425 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -4301,7 +4432,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:4305: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4436: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4330,22 +4461,22 @@ fi\n    # requires -ldl.\n    if test \"$GC\" = boehm; then\n       echo $ac_n \"checking for main in -ldl\"\"... $ac_c\" 1>&6\n-echo \"configure:4334: checking for main in -ldl\" >&5\n+echo \"configure:4465: checking for main in -ldl\" >&5\n ac_lib_var=`echo dl'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 4342 \"configure\"\n+#line 4473 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:4349: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4480: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -4465,7 +4596,7 @@ EOF\n # See if gcj supports -fuse-divide-subroutine.  gcc 2.95 does not, and\n # we want to continue to support that version.\n echo $ac_n \"checking whether gcj supports -fuse-divide-subroutine\"\"... $ac_c\" 1>&6\n-echo \"configure:4469: checking whether gcj supports -fuse-divide-subroutine\" >&5\n+echo \"configure:4600: checking whether gcj supports -fuse-divide-subroutine\" >&5\n cat > conftest.java << 'END'\n public class conftest { }\n END\n@@ -4485,17 +4616,17 @@ for ac_hdr in unistd.h bstring.h sys/time.h sys/types.h fcntl.h sys/ioctl.h sys/\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4489: checking for $ac_hdr\" >&5\n+echo \"configure:4620: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4494 \"configure\"\n+#line 4625 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4499: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4630: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4525,17 +4656,17 @@ for ac_hdr in dirent.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:4529: checking for $ac_hdr\" >&5\n+echo \"configure:4660: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4534 \"configure\"\n+#line 4665 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4539: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4670: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4563,20 +4694,20 @@ done\n \n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:4567: checking for ANSI C header files\" >&5\n+echo \"configure:4698: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4572 \"configure\"\n+#line 4703 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4580: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4711: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4593,7 +4724,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 4597 \"configure\"\n+#line 4728 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -4611,7 +4742,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 4615 \"configure\"\n+#line 4746 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -4632,7 +4763,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4636 \"configure\"\n+#line 4767 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -4643,7 +4774,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:4647: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4778: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -4667,12 +4798,12 @@ EOF\n fi\n \n echo $ac_n \"checking for ssize_t\"\"... $ac_c\" 1>&6\n-echo \"configure:4671: checking for ssize_t\" >&5\n+echo \"configure:4802: checking for ssize_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_ssize_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4676 \"configure\"\n+#line 4807 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -4701,9 +4832,9 @@ fi\n \n \n echo $ac_n \"checking for in_addr_t\"\"... $ac_c\" 1>&6\n-echo \"configure:4705: checking for in_addr_t\" >&5\n+echo \"configure:4836: checking for in_addr_t\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4707 \"configure\"\n+#line 4838 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -4717,7 +4848,7 @@ int main() {\n in_addr_t foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:4721: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4852: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_IN_ADDR_T 1\n@@ -4733,16 +4864,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct ip_mreq is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4737: checking whether struct ip_mreq is in netinet/in.h\" >&5\n+echo \"configure:4868: checking whether struct ip_mreq is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4739 \"configure\"\n+#line 4870 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct ip_mreq mreq;\n ; return 0; }\n EOF\n-if { (eval echo configure:4746: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4877: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_STRUCT_IP_MREQ 1\n@@ -4758,16 +4889,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking whether struct sockaddr_in6 is in netinet/in.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4762: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n+echo \"configure:4893: checking whether struct sockaddr_in6 is in netinet/in.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4764 \"configure\"\n+#line 4895 \"configure\"\n #include \"confdefs.h\"\n #include <netinet/in.h>\n int main() {\n struct sockaddr_in6 addr6;\n ; return 0; }\n EOF\n-if { (eval echo configure:4771: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4902: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_INET6 1\n@@ -4783,16 +4914,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for socklen_t in sys/socket.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4787: checking for socklen_t in sys/socket.h\" >&5\n+echo \"configure:4918: checking for socklen_t in sys/socket.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4789 \"configure\"\n+#line 4920 \"configure\"\n #include \"confdefs.h\"\n #include <sys/socket.h>\n int main() {\n socklen_t x = 5;\n ; return 0; }\n EOF\n-if { (eval echo configure:4796: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4927: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_SOCKLEN_T 1\n@@ -4808,16 +4939,16 @@ fi\n rm -f conftest*\n \n echo $ac_n \"checking for tm_gmtoff in struct tm\"\"... $ac_c\" 1>&6\n-echo \"configure:4812: checking for tm_gmtoff in struct tm\" >&5\n+echo \"configure:4943: checking for tm_gmtoff in struct tm\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 4814 \"configure\"\n+#line 4945 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n struct tm tim; tim.tm_gmtoff = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:4821: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4952: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define STRUCT_TM_HAS_GMTOFF 1\n@@ -4830,16 +4961,16 @@ else\n   rm -rf conftest*\n   echo \"$ac_t\"\"no\" 1>&6\n    echo $ac_n \"checking for global timezone variable\"\"... $ac_c\" 1>&6\n-echo \"configure:4834: checking for global timezone variable\" >&5\n+echo \"configure:4965: checking for global timezone variable\" >&5\n             cat > conftest.$ac_ext <<EOF\n-#line 4836 \"configure\"\n+#line 4967 \"configure\"\n #include \"confdefs.h\"\n #include <time.h>\n int main() {\n long z2 = timezone;\n ; return 0; }\n EOF\n-if { (eval echo configure:4843: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4974: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<\\EOF\n #define HAVE_TIMEZONE 1\n@@ -4859,19 +4990,19 @@ rm -f conftest*\n # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4863: checking for working alloca.h\" >&5\n+echo \"configure:4994: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4868 \"configure\"\n+#line 4999 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:4875: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5006: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -4892,12 +5023,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:4896: checking for alloca\" >&5\n+echo \"configure:5027: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4901 \"configure\"\n+#line 5032 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -4925,7 +5056,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:4929: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5060: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -4957,12 +5088,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:4961: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:5092: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4966 \"configure\"\n+#line 5097 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -4987,12 +5118,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:4991: checking for $ac_func\" >&5\n+echo \"configure:5122: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4996 \"configure\"\n+#line 5127 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -5015,7 +5146,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:5019: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5150: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -5042,15 +5173,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:5046: checking stack direction for C alloca\" >&5\n+echo \"configure:5177: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 5054 \"configure\"\n+#line 5185 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -5069,7 +5200,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:5073: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:5204: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -5096,7 +5227,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5100: checking for $ac_word\" >&5\n+echo \"configure:5231: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_PERL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else"}, {"sha": "612b30fa59c20f381342b70ba578cbdc2f83ac84", "filename": "libjava/configure.in", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.in?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -86,7 +86,7 @@ fi\n FORCELIBGCCSPEC=\n dnl Work around libgcc design flaw.\n if test \"$ac_cv_prog_gnu_ld\" = yes; then\n-   FORCELIBGCCSPEC=\"-u __rethrow -lgcc\"\n+   FORCELIBGCCSPEC=\"-u __rethrow -u __frame_state_for -lgcc\"\n fi   \n \n AC_MSG_CHECKING([for data_start])\n@@ -360,6 +360,10 @@ else\n    AC_CHECK_FUNCS(access stat mkdir rename rmdir unlink realpath)\n    AC_CHECK_FUNCS(inet_aton inet_addr, break)\n    AC_CHECK_FUNCS(inet_pton uname inet_ntoa)\n+   AC_CHECK_FUNCS(backtrace fork execvp pipe)\n+   AC_CHECK_HEADERS(execinfo.h unistd.h dlfcn.h) \n+   AC_CHECK_FILES(/proc/self/exe, [\n+     AC_DEFINE(HAVE_PROC_SELF_EXE)])\n \n    AC_CHECK_FUNCS(gethostbyname_r, [\n      AC_DEFINE(HAVE_GETHOSTBYNAME_R)"}, {"sha": "c636c93f2102b36eea8ba58e7c72e41bcbdefac8", "filename": "libjava/include/config.h.in", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Finclude%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Finclude%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fconfig.h.in?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -135,12 +135,25 @@\n /* Define if using setjmp/longjmp exceptions.  */\n #undef SJLJ_EXCEPTIONS\n \n+/* Define if you have /proc/self/exe */\n+#undef HAVE_PROC_SELF_EXE\n+\n+ \n /* Define if getuid() and friends are missing.  */\n #undef NO_GETUID\n \n /* Define if you have the access function.  */\n #undef HAVE_ACCESS\n \n+/* Define if you have the backtrace function.  */\n+#undef HAVE_BACKTRACE\n+\n+/* Define if you have the execvp function.  */\n+#undef HAVE_EXECVP\n+\n+/* Define if you have the fork function.  */\n+#undef HAVE_FORK\n+\n /* Define if you have the fstat function.  */\n #undef HAVE_FSTAT\n \n@@ -201,6 +214,9 @@\n /* Define if you have the open function.  */\n #undef HAVE_OPEN\n \n+/* Define if you have the pipe function.  */\n+#undef HAVE_PIPE\n+\n /* Define if you have the pthread_mutexattr_setkind_np function.  */\n #undef HAVE_PTHREAD_MUTEXATTR_SETKIND_NP\n \n@@ -252,6 +268,12 @@\n /* Define if you have the <dirent.h> header file.  */\n #undef HAVE_DIRENT_H\n \n+/* Define if you have the <dlfcn.h> header file.  */\n+#undef HAVE_DLFCN_H\n+\n+/* Define if you have the <execinfo.h> header file.  */\n+#undef HAVE_EXECINFO_H\n+\n /* Define if you have the <fcntl.h> header file.  */\n #undef HAVE_FCNTL_H\n "}, {"sha": "49fc47b0b9edd115f1d784a056295698433ad559", "filename": "libjava/include/jvm.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Finclude%2Fjvm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Finclude%2Fjvm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjvm.h?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -182,4 +182,8 @@ extern \"C\"\n   jlong _Jv_remJ (jlong, jlong);\n }\n \n+/* get/set the name of the running executable. */\n+extern char *_Jv_ThisExecutable (void);\n+extern void _Jv_ThisExecutable (const char *);\n+\n #endif /* __JAVA_JVM_H__ */"}, {"sha": "9a1d7dfdaac2aaeffbf47ef8dc1b0178b7e522ca", "filename": "libjava/include/name-finder.h", "status": "added", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Finclude%2Fname-finder.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Finclude%2Fname-finder.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fname-finder.h?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -0,0 +1,69 @@\n+// name-finder.h - Convert addresses to names\n+\n+/* Copyright (C) 2000  Red Hat Inc\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+/**\n+ * @author Andrew Haley <aph@cygnus.com>\n+ * @date Jan 6  2000\n+ */\n+\n+#include <gcj/cni.h>\n+#include <jvm.h>\n+\n+#include <sys/types.h>\n+\n+#include <string.h>\n+#include <stdio.h>\n+\n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+\n+/* _Jv_name_finder is a class wrapper around a mechanism that can\n+   convert addresses of methods to their names and the names of files\n+   in which they appear. */\n+\n+class _Jv_name_finder\n+{\n+public:  \n+  _Jv_name_finder (char *executable);\n+  ~_Jv_name_finder ()\n+    {\n+#if defined (HAVE_PIPE) && defined (HAVE_FORK)\n+      close (f_pipe[1]);\n+      fclose (b_pipe_fd);\n+#endif\n+    }  \n+\n+/* Given a pointer to a function or method, try to convert it into a\n+   name and the appropriate line and source file.  The caller passes\n+   the code pointer in p.\n+\n+   Returns false if the lookup fails.  Even if this happens, the field\n+   hex will have been correctly filled in with the pointer. \n+\n+   The other fields are method_name and file_name, which lookup will\n+   attempt to fill appropriately.  If the lookup has failed, these\n+   fields contain garbage.*/\n+  bool lookup (void *p);\n+\n+  char method_name[1024];\n+  char file_name[1024];\n+  char hex[sizeof (void *) * 2 + 5];\n+\n+private:\n+  void toHex (void *p);\n+#if defined (HAVE_PIPE) && defined (HAVE_FORK)\n+  int pid;\n+  int f_pipe[2], b_pipe[2];\n+  FILE *b_pipe_fd;\n+  int error;\n+#endif\n+};\n+"}, {"sha": "faba2be1aa72db4ee2c417503ad31af26c17dd4a", "filename": "libjava/java/lang/Throwable.java", "status": "modified", "additions": 34, "deletions": 37, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fjava%2Flang%2FThrowable.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fjava%2Flang%2FThrowable.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FThrowable.java?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -12,6 +12,7 @@\n import java.io.PrintStream;\n import java.io.PrintWriter;\n import java.io.Serializable;\n+import java.io.OutputStreamWriter;\n \n /**\n  * @author Tom Tromey <tromey@cygnus.com>\n@@ -26,55 +27,51 @@\n \n public class Throwable implements Serializable\n {\n-  public Throwable fillInStackTrace ()\n-    {\n-      return this;\n-    }\n+  public native Throwable fillInStackTrace ();\n \n   public String getLocalizedMessage ()\n-    {\n-      return getMessage ();\n-    }\n+  {\n+    return getMessage ();\n+  }\n \n   public String getMessage ()\n-    {\n-      return detailMessage;\n-    }\n+  {\n+    return detailMessage;\n+  }\n \n   public void printStackTrace ()\n-    {\n-      printStackTrace (System.err);\n-    }\n-\n-  public void printStackTrace (PrintStream s)\n-    {\n-      // No stack trace, but we can still print this object.\n-      s.println(toString ());\n-    }\n-\n-  public void printStackTrace (PrintWriter wr)\n-    {\n-      // No stack trace, but we can still print this object.\n-      wr.println(toString ());\n-    }\n-\n+  {\n+    printStackTrace (System.err);\n+  }\n+\n+  public void printStackTrace (PrintStream ps)\n+  {\n+    printStackTrace (new PrintWriter(new OutputStreamWriter(ps)));\n+  }\n+  \n+  public native void printStackTrace (PrintWriter wr);\n+  \n   public Throwable ()\n-    {\n-      detailMessage = null;\n-    }\n+  {\n+    detailMessage = null;\n+    fillInStackTrace ();\n+  }\n \n   public Throwable (String message)\n-    {\n-      detailMessage = message;\n-    }\n+  {\n+    detailMessage = message;\n+    fillInStackTrace ();\n+  }\n \n   public String toString ()\n-    {\n-      return ((detailMessage == null)\n-\t      ? getClass().getName()\n-\t      : getClass().getName() + \": \" + getMessage ());\n-    }\n+  {\n+    return ((detailMessage == null)\n+\t    ? getClass().getName()\n+\t    : getClass().getName() + \": \" + getMessage ());\n+  }\n \n   // Name of this field comes from serialization spec.\n   private String detailMessage;\n+\n+  private byte stackTrace[];\n }"}, {"sha": "2227e7d35d17dc0838cc41f94e873bf951017e23", "filename": "libjava/java/lang/natThrowable.cc", "status": "added", "additions": 95, "deletions": 0, "changes": 95, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fjava%2Flang%2FnatThrowable.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fjava%2Flang%2FnatThrowable.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatThrowable.cc?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -0,0 +1,95 @@\n+// natThrowable.cc - Superclass for all exceptions.\n+\n+/* Copyright (C) 2000  Red Hat Inc\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+/**\n+ * @author Andrew Haley <aph@cygnus.com>\n+ * @date Jan 6  2000\n+ */\n+\n+#include <config.h>\n+\n+#include <string.h>\n+\n+#pragma implementation \"Throwable.h\"\n+\n+#include <gcj/cni.h>\n+#include <jvm.h>\n+#include <java/lang/Object.h>\n+#include <java-threads.h>\n+#include <java/lang/Throwable.h>\n+#include <java/io/PrintStream.h>\n+#include <java/io/PrintWriter.h>\n+\n+#include <sys/types.h>\n+\n+#include <stdlib.h>\n+#include <stdio.h>\n+\n+#include <unistd.h>\n+\n+#ifdef HAVE_EXECINFO_H\n+#include <execinfo.h>\n+#endif\n+\n+#include <name-finder.h>\n+\n+/* FIXME: size of the stack trace is limited to 128 elements.  It's\n+   undoubtedly sensible to limit the stack trace, but 128 is rather\n+   arbitrary.  It may be better to configure this.  */\n+\n+java::lang::Throwable *\n+java::lang::Throwable::fillInStackTrace (void)\n+{\n+#ifdef HAVE_BACKTRACE\n+  void *p[128];\n+  \n+  // We subtract 1 from the number of elements because we don't want\n+  // to include the call to fillInStackTrace in the trace.\n+  int n = backtrace (p, 128) - 1;  \n+\n+  // ???  Might this cause a problem if the byte array isn't aligned?\n+  stackTrace = JvNewByteArray (n * sizeof p[0]);\n+  memcpy (elements (stackTrace), p+1, (n * sizeof p[0]));\n+\n+  return this;\n+#endif\n+}\n+\n+void \n+java::lang::Throwable::printStackTrace (java::io::PrintWriter *wr)\n+{\n+  wr->println (toString ());\n+#ifdef HAVE_BACKTRACE\n+  if (!stackTrace)\n+    return;\n+\n+  void **p = (void **)elements (stackTrace);\n+  int depth = stackTrace->length / sizeof p[0];\n+\n+  _Jv_name_finder finder (_Jv_ThisExecutable ());\n+\n+  for (int i = 0; i < depth; i++)\n+    {\n+      bool found = finder.lookup (p[i]);\n+      wr->print (JvNewStringLatin1 (\"   at \"));\n+      wr->print (JvNewStringLatin1 (finder.hex));\n+      if (found)\n+\t{\n+\t  wr->print (JvNewStringLatin1 (\": \"));\n+\t  wr->print (JvNewStringLatin1 (finder.method_name));\n+\t  wr->print (JvNewStringLatin1 (\" (\"));\n+\t  wr->print (JvNewStringLatin1 (finder.file_name));\n+\t  wr->print (JvNewStringLatin1 (\")\"));\n+\t}\n+      wr->println ();\n+    }\n+#endif /* HAVE_BACKTRACE */\n+}\n+"}, {"sha": "ba8a5ae7384443418915db9dc4fc6ea14a838514", "filename": "libjava/name-finder.cc", "status": "added", "additions": 180, "deletions": 0, "changes": 180, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fname-finder.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fname-finder.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fname-finder.cc?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -0,0 +1,180 @@\n+// name-finder.cc - Convert addresses to names\n+\n+/* Copyright (C) 2000  Red Hat Inc\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+/**\n+ * @author Andrew Haley <aph@cygnus.com>\n+ * @date Jan 6  2000\n+ */\n+\n+/* _Jv_name_finder is a class wrapper around a mechanism that can\n+   convert address of methods to their names and the names of files in\n+   which they appear.\n+\n+   Right now, the only implementation of this involves running a copy\n+   of addr2line, but at some point it is worth building this\n+   functionality into libgcj, if only for embedded systems.  */\n+\n+\n+#ifndef _GNU_SOURCE\n+#define _GNU_SOURCE 1\n+#endif\n+\n+#include <config.h>\n+\n+#include <string.h>\n+\n+#include <gcj/cni.h>\n+#include <jvm.h>\n+#include <java/lang/Object.h>\n+#include <java-threads.h>\n+#include <java/lang/Throwable.h>\n+#include <java/io/PrintStream.h>\n+#include <java/io/PrintWriter.h>\n+\n+#include <sys/types.h>\n+\n+#include <stdlib.h>\n+#include <stdio.h>\n+\n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+\n+#ifdef HAVE_DLFCN_H\n+#include <dlfcn.h>\n+#endif\n+\n+#include <name-finder.h>\n+\n+/* Create a new name finder which will perform address lookups on an\n+   executable. */\n+\n+_Jv_name_finder::_Jv_name_finder (char *executable)\n+{\n+#if defined (HAVE_PIPE) && defined (HAVE_FORK) && defined (HAVE_EXECVP)\n+  error = 0;\n+\n+  char *argv[6];\n+  {\n+    int arg = 0;\n+    argv[arg++] = \"addr2line\";\n+    argv[arg++] = \"-C\";\n+    argv[arg++] = \"-f\";\n+    argv[arg++] = \"-e\";\n+    argv[arg++] = executable;\n+    argv[arg] = NULL;\n+  }\n+\n+  error |= pipe (f_pipe) < 0;\n+  error |= pipe (b_pipe) < 0;\n+      \n+  if (error)\n+    return;\n+\n+  pid = fork ();\n+  if (pid == 0)\n+    {\n+      close (f_pipe[1]);\n+      close (b_pipe[0]);\n+      dup2 (f_pipe[0], fileno (stdin));\n+      dup2 (b_pipe[1], fileno (stdout));\n+      execvp (argv[0], argv);\n+      _exit (127);\n+    }\n+      \n+  close (f_pipe [0]);\n+  close (b_pipe [1]);\n+      \n+  if (pid < 0)\n+    {\n+      error |= 1; \n+      return;\n+    }\n+      \n+  b_pipe_fd = fdopen (b_pipe[0], \"r\");\n+  error |= !b_pipe_fd;\n+#endif\n+}\n+\n+/* Convert a pointer to hex. */\n+\n+void\n+_Jv_name_finder::toHex (void *p)\n+{\n+  unsigned long long n = (unsigned long long)p;\n+  int digits = sizeof (void *) * 2;\n+\n+  strcpy (hex, \"0x\");\n+  for (int i = digits - 1; i >= 0; i--)\n+    {\n+      int digit = n % 16;\n+      \n+      n /= 16;\n+      hex[i+2] = digit > 9 ? 'a' + digit - 10 : '0' + digit; \n+    }\n+  hex [digits+2] = 0;\n+}   \n+\n+/* Given a pointer to a function or method, try to convert it into a\n+   name and the appropriate line and source file.  The caller passes\n+   the code pointer in p.\n+\n+   Returns false if the lookup fails.  Even if this happens, the field\n+   he will have been correctly filled in with the pointer.  */\n+\n+bool\n+_Jv_name_finder::lookup (void *p)\n+{\n+  toHex (p);\n+      \n+#ifdef HAVE_DLFCN_H\n+  {\n+    Dl_info dl_info;\n+    \n+    if (dladdr (p, &dl_info))\n+      {\n+\tstrncpy (file_name, dl_info.dli_fname, sizeof file_name);\n+\tstrncpy (method_name, dl_info.dli_sname, sizeof method_name);\n+\treturn true;\n+      }\n+  }\n+#endif\n+\n+#if defined (HAVE_PIPE) && defined (HAVE_FORK) && defined (HAVE_EXECVP)\n+  if (error)\n+    return false;\n+\n+  error |= write (f_pipe[1], hex, strlen (hex)) < 0;\n+  if (error)\n+    return false;\n+  error |= write (f_pipe[1], \"\\n\", 1) < 0;\n+  if (error)\n+    return false;\n+\n+  error |= (fgets (method_name, sizeof method_name, b_pipe_fd) == NULL);\n+  if (error)\n+    return false;\n+  error |= (fgets (file_name, sizeof file_name, b_pipe_fd) == NULL);\n+  if (error)\n+    return false;\n+\n+  char *newline = strchr (method_name, '\\n');\n+  if (newline)\n+    *newline = 0;\n+  newline = strchr (file_name, '\\n');\n+  if (newline)\n+    *newline = 0;\n+\n+  return true;\n+\n+#else\n+  return false;\n+#endif /* defined (HAVE_PIPE) && defined (HAVE_FORK) && defined (HAVE_EXECVP) */\n+}"}, {"sha": "f427a5adf36903145a990add33336f3f0fbe71e6", "filename": "libjava/prims.cc", "status": "modified", "additions": 34, "deletions": 1, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fprims.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/283a159fe38e477d93b189d43888f1e42043c0af/libjava%2Fprims.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fprims.cc?ref=283a159fe38e477d93b189d43888f1e42043c0af", "patch": "@@ -16,6 +16,10 @@ details.  */\n #include <string.h>\n #include <signal.h>\n \n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+\n #include <gcj/cni.h>\n #include <jvm.h>\n #include <java-signal.h>\n@@ -68,13 +72,18 @@ const char **_Jv_Compiler_Properties;\n // Property key/value pairs.\n property_pair *_Jv_Environment_Properties;\n #endif\n+\n+// The name of this executable.\n+static char * _Jv_execName;\n+\n \f\n \n #ifdef HANDLE_SEGV\n static java::lang::NullPointerException *nullp;\n SIGNAL_HANDLER (catch_segv)\n {\n   MAKE_THROW_FRAME;\n+  nullp->fillInStackTrace ();\n   _Jv_Throw (nullp);\n }\n #endif\n@@ -89,6 +98,7 @@ SIGNAL_HANDLER (catch_fpe)\n #else\n   MAKE_THROW_FRAME;\n #endif\n+  arithexception->fillInStackTrace ();\n   _Jv_Throw (arithexception);\n }\n #endif\n@@ -638,8 +648,24 @@ static java::lang::ThreadGroup *main_group;\n // The primary thread.\n static java::lang::Thread *main_thread;\n \n+char *\n+_Jv_ThisExecutable (void)\n+{\n+  return _Jv_execName;\n+}\n+\n+void\n+_Jv_ThisExecutable (const char *name)\n+{\n+  if (name)\n+    {\n+      _Jv_execName = new char[strlen (name) + 1];\n+      strcpy (_Jv_execName, name);\n+    }\n+}\n+\n static void\n-main_init (void)\n+main_init ()\n {\n   INIT_SEGV;\n #ifdef HANDLE_FPE\n@@ -812,6 +838,13 @@ JvRunMain (jclass klass, int argc, const char **argv)\n   PROCESS_GCJ_PROPERTIES;\n \n   main_init ();\n+#ifdef HAVE_PROC_SELF_EXE\n+  char exec_name[20];\n+  sprintf (exec_name, \"/proc/%d/exe\", getpid ());\n+  _Jv_ThisExecutable (exec_name);\n+#else\n+  _Jv_ThisExecutable (argv[0]);\n+#endif\n \n   arg_vec = JvConvertArgv (argc - 1, argv + 1);\n   main_group = new java::lang::ThreadGroup (23);"}]}