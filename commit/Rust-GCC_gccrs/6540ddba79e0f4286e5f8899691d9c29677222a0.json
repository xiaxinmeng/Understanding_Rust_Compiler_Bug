{"sha": "6540ddba79e0f4286e5f8899691d9c29677222a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjU0MGRkYmE3OWUwZjQyODZlNWY4ODk5NjkxZDljMjk2NzcyMjJhMA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-24T03:53:10Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-02-24T03:53:10Z"}, "message": "Don't crash on type switch of nil.\n\nFrom-SVN: r170455", "tree": {"sha": "0a8cfa5bc5f24821f0707120b66f70a6a0418406", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a8cfa5bc5f24821f0707120b66f70a6a0418406"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6540ddba79e0f4286e5f8899691d9c29677222a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6540ddba79e0f4286e5f8899691d9c29677222a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6540ddba79e0f4286e5f8899691d9c29677222a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6540ddba79e0f4286e5f8899691d9c29677222a0/comments", "author": null, "committer": null, "parents": [{"sha": "d6007535e639e34b9a73fd3967d1b7f135414386", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6007535e639e34b9a73fd3967d1b7f135414386", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6007535e639e34b9a73fd3967d1b7f135414386"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "629fdd8161519f54cec55ae29f929ff20403a088", "filename": "gcc/go/gofrontend/statements.cc", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6540ddba79e0f4286e5f8899691d9c29677222a0/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6540ddba79e0f4286e5f8899691d9c29677222a0/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.cc?ref=6540ddba79e0f4286e5f8899691d9c29677222a0", "patch": "@@ -3905,10 +3905,13 @@ Type_switch_statement::do_lower(Gogo*, Block* enclosing)\n     {\n       // Doing a type switch on a non-interface type.  Should we issue\n       // a warning for this case?\n-      // descriptor_temp = DESCRIPTOR\n       Expression* lhs = Expression::make_temporary_reference(descriptor_temp,\n \t\t\t\t\t\t\t     loc);\n-      Expression* rhs = Expression::make_type_descriptor(val_type, loc);\n+      Expression* rhs;\n+      if (val_type->is_nil_type())\n+\trhs = Expression::make_nil(loc);\n+      else\n+\trhs = Expression::make_type_descriptor(val_type, loc);\n       Statement* s = Statement::make_assignment(lhs, rhs, loc);\n       b->add_statement(s);\n     }"}]}