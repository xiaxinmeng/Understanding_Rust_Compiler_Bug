{"sha": "e0e349f3f25d1b2d8c492fc384506bf250cb1d6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTBlMzQ5ZjNmMjVkMWIyZDhjNDkyZmMzODQ1MDZiZjI1MGNiMWQ2YQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-05-24T17:11:35Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-05-24T17:11:35Z"}, "message": "* sched-int.h (sd_iterator_cond): Manually tail recurse.\n\nFrom-SVN: r210895", "tree": {"sha": "8f4aa2dacf35de6152be220e014de1e5c193750a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f4aa2dacf35de6152be220e014de1e5c193750a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a/comments", "author": null, "committer": null, "parents": [{"sha": "06e3da3474d25621bdd86c6ebb05bc0e6611f72c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06e3da3474d25621bdd86c6ebb05bc0e6611f72c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06e3da3474d25621bdd86c6ebb05bc0e6611f72c"}], "stats": {"total": 49, "additions": 28, "deletions": 21}, "files": [{"sha": "f4195746d962312b9bc725e973a0fc7157fe3881", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e0e349f3f25d1b2d8c492fc384506bf250cb1d6a", "patch": "@@ -1,3 +1,7 @@\n+2014-05-23  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* sched-int.h (sd_iterator_cond): Manually tail recurse.\n+\n 2014-05-23  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/440.md (ppc440-integer): Include shift without"}, {"sha": "fe00496faa5a0388ec8113165ed6ca3edbc3ee4e", "filename": "gcc/sched-int.h", "status": "modified", "additions": 24, "deletions": 21, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a/gcc%2Fsched-int.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0e349f3f25d1b2d8c492fc384506bf250cb1d6a/gcc%2Fsched-int.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-int.h?ref=e0e349f3f25d1b2d8c492fc384506bf250cb1d6a", "patch": "@@ -1550,34 +1550,37 @@ sd_iterator_start (rtx insn, sd_list_types_def types)\n static inline bool\n sd_iterator_cond (sd_iterator_def *it_ptr, dep_t *dep_ptr)\n {\n-  dep_link_t link = *it_ptr->linkp;\n-\n-  if (link != NULL)\n-    {\n-      *dep_ptr = DEP_LINK_DEP (link);\n-      return true;\n-    }\n-  else\n+  while (true)\n     {\n-      sd_list_types_def types = it_ptr->types;\n+      dep_link_t link = *it_ptr->linkp;\n \n-      if (types != SD_LIST_NONE)\n-\t/* Switch to next list.  */\n+      if (link != NULL)\n+\t{\n+\t  *dep_ptr = DEP_LINK_DEP (link);\n+\t  return true;\n+\t}\n+      else\n \t{\n-\t  deps_list_t list;\n+\t  sd_list_types_def types = it_ptr->types;\n \n-\t  sd_next_list (it_ptr->insn,\n-\t\t\t&it_ptr->types, &list, &it_ptr->resolved_p);\n+\t  if (types != SD_LIST_NONE)\n+\t    /* Switch to next list.  */\n+\t    {\n+\t      deps_list_t list;\n \n-\t  it_ptr->linkp = &DEPS_LIST_FIRST (list);\n+\t      sd_next_list (it_ptr->insn,\n+\t\t\t    &it_ptr->types, &list, &it_ptr->resolved_p);\n \n-\t  if (list)\n-\t    return sd_iterator_cond (it_ptr, dep_ptr);\n-\t}\n+\t      it_ptr->linkp = &DEPS_LIST_FIRST (list);\n+\n+\t      if (list)\n+\t\tcontinue;\n+\t    }\n \n-      *dep_ptr = NULL;\n-      return false;\n-    }\n+\t  *dep_ptr = NULL;\n+\t  return false;\n+\t}\n+   }\n }\n \n /* Advance iterator.  */"}]}