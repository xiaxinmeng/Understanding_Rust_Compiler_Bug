{"sha": "d61bff850d13ff103de3c2fb13d5e371996e1a3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDYxYmZmODUwZDEzZmYxMDNkZTNjMmZiMTNkNWUzNzE5OTZlMWEzYw==", "commit": {"author": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2019-10-02T19:05:35Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2019-10-02T19:05:35Z"}, "message": "Testsuite, remove alloca header\n\n2019-10-02  Andreas Tobler  <andreast@gcc.gnu.org>\n\n\t* testsuite/libgomp.oacc-c-c++-common/loop-default.h: Remove alloca.h\n\tinclude. Replace alloca () with __builtin_alloca ().\n\t* testsuite/libgomp.oacc-c-c++-common/loop-dim-default.c: Likewise.\n\nReviewed-by: Thomas Schwinge <thomas@codesourcery.com>\n\nFrom-SVN: r276479", "tree": {"sha": "6cff8efeff4c1a2d25237d4c0f682fe89e3f15cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6cff8efeff4c1a2d25237d4c0f682fe89e3f15cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d61bff850d13ff103de3c2fb13d5e371996e1a3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d61bff850d13ff103de3c2fb13d5e371996e1a3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d61bff850d13ff103de3c2fb13d5e371996e1a3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d61bff850d13ff103de3c2fb13d5e371996e1a3c/comments", "author": null, "committer": null, "parents": [{"sha": "c20a90e0c82f7037f1064693ceb17a58e4682c22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c20a90e0c82f7037f1064693ceb17a58e4682c22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c20a90e0c82f7037f1064693ceb17a58e4682c22"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "3fe34c7c0b73afcdc72e60be8b9f32a0c6af28d0", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d61bff850d13ff103de3c2fb13d5e371996e1a3c/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d61bff850d13ff103de3c2fb13d5e371996e1a3c/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=d61bff850d13ff103de3c2fb13d5e371996e1a3c", "patch": "@@ -1,3 +1,9 @@\n+2019-10-02  Andreas Tobler  <andreast@gcc.gnu.org>\n+\n+\t* testsuite/libgomp.oacc-c-c++-common/loop-default.h: Remove alloca.h\n+\tinclude. Replace alloca () with __builtin_alloca ().\n+\t* testsuite/libgomp.oacc-c-c++-common/loop-dim-default.c: Likewise.\n+\n 2019-10-01  Jakub Jelinek  <jakub@redhat.com>\n \n \t* configure.ac: Remove GCC_HEADER_STDINT(gstdint.h)."}, {"sha": "8c71249687c44584efdc9c89b54f50f7810a07f6", "filename": "libgomp/testsuite/libgomp.oacc-c-c++-common/loop-default.h", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d61bff850d13ff103de3c2fb13d5e371996e1a3c/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Floop-default.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d61bff850d13ff103de3c2fb13d5e371996e1a3c/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Floop-default.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Floop-default.h?ref=d61bff850d13ff103de3c2fb13d5e371996e1a3c", "patch": "@@ -1,5 +1,4 @@\n #include <openacc.h>\n-#include <alloca.h>\n #include <string.h>\n #include <stdio.h>\n #include <gomp-constants.h>\n@@ -28,9 +27,9 @@ check (const int *ary, int size, int gp, int wp, int vp)\n {\n   int exit = 0;\n   int ix;\n-  int *gangs = (int *)alloca (gp * sizeof (int));\n-  int *workers = (int *)alloca (wp * sizeof (int));\n-  int *vectors = (int *)alloca (vp * sizeof (int));\n+  int *gangs = (int *)__builtin_alloca (gp * sizeof (int));\n+  int *workers = (int *)__builtin_alloca (wp * sizeof (int));\n+  int *vectors = (int *)__builtin_alloca (vp * sizeof (int));\n   int offloaded = 0;\n \n   memset (gangs, 0, gp * sizeof (int));"}, {"sha": "04387d36174959d90df8b15410154f16b0906e28", "filename": "libgomp/testsuite/libgomp.oacc-c-c++-common/loop-dim-default.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d61bff850d13ff103de3c2fb13d5e371996e1a3c/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Floop-dim-default.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d61bff850d13ff103de3c2fb13d5e371996e1a3c/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Floop-dim-default.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.oacc-c-c%2B%2B-common%2Floop-dim-default.c?ref=d61bff850d13ff103de3c2fb13d5e371996e1a3c", "patch": "@@ -1,7 +1,6 @@\n /* { dg-additional-options \"-fopenacc-dim=16:16\" } */\n \n #include <openacc.h>\n-#include <alloca.h>\n #include <string.h>\n #include <stdio.h>\n #include <gomp-constants.h>\n@@ -28,9 +27,9 @@ int check (const int *ary, int size, int gp, int wp, int vp)\n {\n   int exit = 0;\n   int ix;\n-  int *gangs = (int *)alloca (gp * sizeof (int));\n-  int *workers = (int *)alloca (wp * sizeof (int));\n-  int *vectors = (int *)alloca (vp * sizeof (int));\n+  int *gangs = (int *)__builtin_alloca (gp * sizeof (int));\n+  int *workers = (int *)__builtin_alloca (wp * sizeof (int));\n+  int *vectors = (int *)__builtin_alloca (vp * sizeof (int));\n   int offloaded = 0;\n   \n   memset (gangs, 0, gp * sizeof (int));"}]}