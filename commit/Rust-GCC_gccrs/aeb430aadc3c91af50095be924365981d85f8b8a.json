{"sha": "aeb430aadc3c91af50095be924365981d85f8b8a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWViNDMwYWFkYzNjOTFhZjUwMDk1YmU5MjQzNjU5ODFkODVmOGI4YQ==", "commit": {"author": {"name": "Harald Anlauf", "email": "anlauf@gmx.de", "date": "2020-04-20T12:20:19Z"}, "committer": {"name": "Harald Anlauf", "email": "anlauf@gmx.de", "date": "2020-04-20T12:20:19Z"}, "message": "PR fortran/93364 - ICE in gfc_set_array_spec, at fortran/array.c:879\n\nAdd missing check in gfc_set_array_spec for sum of rank and corank to not\nexceed GFC_MAX_DIMENSIONS.\n\n2020-04-20  Harald Anlauf  <anlauf@gmx.de>\n\n\tPR fortran/93364\n\t* array.c (gfc_set_array_spec): Check for sum of rank and corank\n\tnot exceeding GFC_MAX_DIMENSIONS.\n\n2020-04-20  Harald Anlauf  <anlauf@gmx.de>\n\n\tPR fortran/93364\n\t* gfortran.dg/pr93364.f90: New test.", "tree": {"sha": "13752307651507dcf8f23ee6bda0f5aae86b49e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13752307651507dcf8f23ee6bda0f5aae86b49e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aeb430aadc3c91af50095be924365981d85f8b8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aeb430aadc3c91af50095be924365981d85f8b8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aeb430aadc3c91af50095be924365981d85f8b8a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aeb430aadc3c91af50095be924365981d85f8b8a/comments", "author": {"login": "harald-anlauf", "id": 90786862, "node_id": "MDQ6VXNlcjkwNzg2ODYy", "avatar_url": "https://avatars.githubusercontent.com/u/90786862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harald-anlauf", "html_url": "https://github.com/harald-anlauf", "followers_url": "https://api.github.com/users/harald-anlauf/followers", "following_url": "https://api.github.com/users/harald-anlauf/following{/other_user}", "gists_url": "https://api.github.com/users/harald-anlauf/gists{/gist_id}", "starred_url": "https://api.github.com/users/harald-anlauf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harald-anlauf/subscriptions", "organizations_url": "https://api.github.com/users/harald-anlauf/orgs", "repos_url": "https://api.github.com/users/harald-anlauf/repos", "events_url": "https://api.github.com/users/harald-anlauf/events{/privacy}", "received_events_url": "https://api.github.com/users/harald-anlauf/received_events", "type": "User", "site_admin": false}, "committer": {"login": "harald-anlauf", "id": 90786862, "node_id": "MDQ6VXNlcjkwNzg2ODYy", "avatar_url": "https://avatars.githubusercontent.com/u/90786862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harald-anlauf", "html_url": "https://github.com/harald-anlauf", "followers_url": "https://api.github.com/users/harald-anlauf/followers", "following_url": "https://api.github.com/users/harald-anlauf/following{/other_user}", "gists_url": "https://api.github.com/users/harald-anlauf/gists{/gist_id}", "starred_url": "https://api.github.com/users/harald-anlauf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harald-anlauf/subscriptions", "organizations_url": "https://api.github.com/users/harald-anlauf/orgs", "repos_url": "https://api.github.com/users/harald-anlauf/repos", "events_url": "https://api.github.com/users/harald-anlauf/events{/privacy}", "received_events_url": "https://api.github.com/users/harald-anlauf/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b4d38df3f190311a4a5b5abb49ed97b1f60d46c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b4d38df3f190311a4a5b5abb49ed97b1f60d46c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b4d38df3f190311a4a5b5abb49ed97b1f60d46c"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "b783bfc7949f7264864f72a7ef2195efc71f5a98", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=aeb430aadc3c91af50095be924365981d85f8b8a", "patch": "@@ -1,3 +1,9 @@\n+2020-04-20  Harald Anlauf  <anlauf@gmx.de>\n+\n+\tPR fortran/93364\n+\t* array.c (gfc_set_array_spec): Check for sum of rank and corank\n+\tnot exceeding GFC_MAX_DIMENSIONS.\n+\n 2020-04-20  Steve Kargl  <kargl@gcc.gnu.org>\n \tThomas Koenig  <tkoenig@gcc.gnu.org>\n "}, {"sha": "471523fb7675fa1404088c1f68990aeca56bbf55", "filename": "gcc/fortran/array.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ffortran%2Farray.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ffortran%2Farray.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farray.c?ref=aeb430aadc3c91af50095be924365981d85f8b8a", "patch": "@@ -864,6 +864,10 @@ gfc_set_array_spec (gfc_symbol *sym, gfc_array_spec *as, locus *error_loc)\n       return false;\n     }\n \n+  /* Check F2018:C822.  */\n+  if (sym->as->rank + sym->as->corank > GFC_MAX_DIMENSIONS)\n+    goto too_many;\n+\n   if (as->corank)\n     {\n       sym->as->cotype = as->cotype;"}, {"sha": "473295dbef397e43d0796ca20e02f736e96ecd95", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aeb430aadc3c91af50095be924365981d85f8b8a", "patch": "@@ -1,3 +1,8 @@\n+2020-04-20  Harald Anlauf  <anlauf@gmx.de>\n+\n+\tPR fortran/93364\n+\t* gfortran.dg/pr93364.f90: New test.\n+\n 2020-04-20  Steve Kargl  <kargl@gcc.gnu.org>\n \tThomas Koenig  <tkoenig@gcc.gnu.org>\n "}, {"sha": "61d7fa149a622c4fe3b24d5d9e1ce1d0506271d0", "filename": "gcc/testsuite/gfortran.dg/pr93364.f90", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr93364.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aeb430aadc3c91af50095be924365981d85f8b8a/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr93364.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr93364.f90?ref=aeb430aadc3c91af50095be924365981d85f8b8a", "patch": "@@ -0,0 +1,13 @@\n+! { dg-do compile }\n+! { dg-options \"-fcoarray=single\" }\n+!\n+! PR fortran/93364 - check fix for ICE in gfc_set_array_spec\n+\n+type(t) function f()\n+  codimension :: t[1,2,1,2,1,2,1,*]\n+  dimension :: t(1,2,1,2,1,2,1,2)\n+end\n+\n+! { dg-error \"has not been declared\" \" \" { target *-*-* } 6 }\n+! { dg-error \"is of type 't'\" \" \" { target *-*-* } 6 }\n+! { dg-error \"rank \\\\+ corank of\" \" \" { target *-*-* } 8 }"}]}