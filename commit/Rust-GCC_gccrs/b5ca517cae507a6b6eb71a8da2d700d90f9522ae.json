{"sha": "b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjVjYTUxN2NhZTUwN2E2YjZlYjcxYThkYTJkNzAwZDkwZjk1MjJhZQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-01-04T13:58:30Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-01-04T13:58:30Z"}, "message": "re PR gcov-profile/34609 (ICE with \"-ftest-coverage\" and references)\n\n\tPR gcov-profile/34609\n\t* tree-inline.c (declare_return_variable): Set TREE_ADDRESSABLE on\n\treturn_slot if result is TREE_ADDRESSABLE.\n\n\t* g++.dg/gcov/gcov-6.C: New test.\n\nFrom-SVN: r131322", "tree": {"sha": "2eefdf7ef8e8005e7aa45d21ff663139d975b418", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2eefdf7ef8e8005e7aa45d21ff663139d975b418"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/comments", "author": null, "committer": null, "parents": [{"sha": "a9fe2f76d7d3bbf941e7056b3eb9a4b5f0c45657", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9fe2f76d7d3bbf941e7056b3eb9a4b5f0c45657", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9fe2f76d7d3bbf941e7056b3eb9a4b5f0c45657"}], "stats": {"total": 55, "additions": 49, "deletions": 6}, "files": [{"sha": "7aea66bff50922380d228d4d2aa575acb09ecf7b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "patch": "@@ -1,11 +1,17 @@\n+2008-01-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR gcov-profile/34609\n+\t* tree-inline.c (declare_return_variable): Set TREE_ADDRESSABLE on\n+\treturn_slot if result is TREE_ADDRESSABLE.\n+\n 2008-01-04  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \t* config/mips/mips.md (sqrt_condition): Tweak comment.\n \t(recip_condition): Likewise.  Require TARGET_FLOAT64 for DFmode.\n \n 2008-01-03  Tom Tromey  <tromey@redhat.com>\n \n-\tPR c/34457:\n+\tPR c/34457\n \t* c-common.c (c_type_hash): Handle VLAs.\n \n 2008-01-03  Jan Hubicka  <jh@suse.cz>\n@@ -964,7 +970,7 @@\n \n 2007-12-06  Tom Tromey  <tromey@redhat.com>\n \n-\tPR c/29172:\n+\tPR c/29172\n \t* c-opts.c (c_common_parse_file): Call cpp_clear_file_cache.\n \n 2007-12-06  Richard Sandiford  <rsandifo@nildram.co.uk>\n@@ -2446,7 +2452,8 @@\n \n 2007-11-06  Tom Tromey  <tromey@redhat.com>\n \n-\tPR c++/32256, PR c++/32368:\n+\tPR c++/32256\n+\tPR c++/32368\n \t* function.c (saved_in_system_header): New global.\n \t(push_cfun): Save in_system_header.\n \t(pop_cfun): Restore in_system_header.\n@@ -25910,7 +25917,7 @@\n \n 2007-03-13  David Taylor  <taylor@candd.org>\n \n-\tPR driver/12448:\n+\tPR driver/12448\n \t* gcc.c (cpp_unique_options): If -MT or -MQ is seen, don't pass\n \tdefault -MQ.\n \n@@ -33089,7 +33096,8 @@\n \n 2007-01-11  Tom Tromey  <tromey@redhat.com>\n \n-\tPR preprocessor/15185, PR preprocessor/20989:\n+\tPR preprocessor/15185\n+\tPR preprocessor/20989\n \t* doc/cppopts.texi <-MT>: Update description of algorithm for\n \tcomputing default target.\n \t<-M, -MD>: Reword \"basename\" text."}, {"sha": "239fbebd9bc850df0ea4bc956d9f74465dbd4e55", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "patch": "@@ -1,3 +1,8 @@\n+2008-01-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR gcov-profile/34609\n+\t* g++.dg/gcov/gcov-6.C: New test.\n+\n 2008-01-04  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/31081"}, {"sha": "53a2b20bfd5370badfcd9d3bef3fad0337f15e6d", "filename": "gcc/testsuite/g++.dg/gcov/gcov-6.C", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-6.C?ref=b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "patch": "@@ -0,0 +1,29 @@\n+// PR gcov-profile/34609\n+// { dg-do compile }\n+// { dg-options \"-O -ftest-coverage\" }\n+\n+struct A\n+{\n+  int i;\n+  int &get () { return i; }\n+};\n+\n+inline A foo ()\n+{\n+  A a;\n+  a.get ();\n+  return a;\n+}\n+\n+inline A bar ()\n+{\n+  return foo ();\n+}\n+\n+void baz ()\n+{\n+  A a;\n+  a = bar ();\n+}\n+\n+// { dg-final { cleanup-coverage-files } }"}, {"sha": "8c5626d6712d2a4ee9962824fe0e6187e865e7b7", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5ca517cae507a6b6eb71a8da2d700d90f9522ae/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=b5ca517cae507a6b6eb71a8da2d700d90f9522ae", "patch": "@@ -1,5 +1,5 @@\n /* Tree inlining.\n-   Copyright 2001, 2002, 2003, 2004, 2005, 2006, 2007\n+   Copyright 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n    Free Software Foundation, Inc.\n    Contributed by Alexandre Oliva <aoliva@redhat.com>\n \n@@ -1719,6 +1719,7 @@ declare_return_variable (copy_body_data *id, tree return_slot, tree modify_dest,\n \t{\n \t  var = return_slot;\n \t  gcc_assert (TREE_CODE (var) != SSA_NAME);\n+\t  TREE_ADDRESSABLE (var) |= TREE_ADDRESSABLE (result);\n \t}\n       if ((TREE_CODE (TREE_TYPE (result)) == COMPLEX_TYPE\n            || TREE_CODE (TREE_TYPE (result)) == VECTOR_TYPE)"}]}