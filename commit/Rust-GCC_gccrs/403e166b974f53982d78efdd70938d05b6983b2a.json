{"sha": "403e166b974f53982d78efdd70938d05b6983b2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAzZTE2NmI5NzRmNTM5ODJkNzhlZmRkNzA5MzhkMDViNjk4M2IyYQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2020-06-20T04:17:26Z"}, "committer": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2020-06-24T14:59:17Z"}, "message": "x86: Add Cooper Lake detection with AVX512BF16\n\nAll Sky Lake family processors have the same CPUID model number, 0x55.\nThe differences are Cascade Lake has AVX512VNNI and Cooper Lake has\nAVX512VNNI + AVX512BF16.  Check AVX512BF16 for Cooper Lake.\n\n\tPR target/95774\n\t* common/config/i386/cpuinfo.h (get_intel_cpu): Add Cooper Lake\n\tdetection with AVX512BF16.", "tree": {"sha": "c118a62be78b35970d1a40adb6768d88f88744c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c118a62be78b35970d1a40adb6768d88f88744c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/403e166b974f53982d78efdd70938d05b6983b2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403e166b974f53982d78efdd70938d05b6983b2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/403e166b974f53982d78efdd70938d05b6983b2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403e166b974f53982d78efdd70938d05b6983b2a/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c35d16a3925958b3a22426de0cb8e04f654b6dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c35d16a3925958b3a22426de0cb8e04f654b6dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c35d16a3925958b3a22426de0cb8e04f654b6dd"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "27b7b4d8581f74c683c09ae50f576567d27625cf", "filename": "gcc/common/config/i386/cpuinfo.h", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403e166b974f53982d78efdd70938d05b6983b2a/gcc%2Fcommon%2Fconfig%2Fi386%2Fcpuinfo.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403e166b974f53982d78efdd70938d05b6983b2a/gcc%2Fcommon%2Fconfig%2Fi386%2Fcpuinfo.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Fi386%2Fcpuinfo.h?ref=403e166b974f53982d78efdd70938d05b6983b2a", "patch": "@@ -398,7 +398,15 @@ get_intel_cpu (struct __processor_model *cpu_model,\n       CHECK___builtin_cpu_is (\"corei7\");\n       cpu_model->__cpu_type = INTEL_COREI7;\n       if (has_cpu_feature (cpu_model, cpu_features2,\n-\t\t\t   FEATURE_AVX512VNNI))\n+\t\t\t   FEATURE_AVX512BF16))\n+\t{\n+\t  /* Cooper Lake.  */\n+\t  cpu = \"cooperlake\";\n+\t  CHECK___builtin_cpu_is (\"cooperlake\");\n+\t  cpu_model->__cpu_subtype = INTEL_COREI7_COOPERLAKE;\n+\t}\n+      else if (has_cpu_feature (cpu_model, cpu_features2,\n+\t\t\t\tFEATURE_AVX512VNNI))\n \t{\n \t  /* Cascade Lake.  */\n \t  cpu = \"cascadelake\";"}]}