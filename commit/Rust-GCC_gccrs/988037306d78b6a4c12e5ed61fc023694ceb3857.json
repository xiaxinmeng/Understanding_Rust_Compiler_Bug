{"sha": "988037306d78b6a4c12e5ed61fc023694ceb3857", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg4MDM3MzA2ZDc4YjZhNGMxMmU1ZWQ2MWZjMDIzNjk0Y2ViMzg1Nw==", "commit": {"author": {"name": "Mike Stump", "email": "mrs@apple.com", "date": "2005-11-16T02:08:11Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "2005-11-16T02:08:11Z"}, "message": "c-decl.c (lookup_name_two): Add.\n\n\t* c-decl.c (lookup_name_two): Add.\n\t* c-tree.h (lookup_name_two): Likewise.\n\t* c-common.c (handle_cleanup_attribute): Use lookup_name_two instead.\n\t* config/darwin-c.c (darwin_pragma_unused): Likewise.\n\ncp:\n\t* name-lookup.c (lookup_name_two): Add.\n\t* name-lookup.h: Likewise.\n\ntestsuite:\n\t* g++.old-deja/g++.mike/unused.C: Add.\n\nFrom-SVN: r107062", "tree": {"sha": "e9a699fec7c15696fe1e831cc04c62ec3c6645e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9a699fec7c15696fe1e831cc04c62ec3c6645e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/988037306d78b6a4c12e5ed61fc023694ceb3857", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/988037306d78b6a4c12e5ed61fc023694ceb3857", "html_url": "https://github.com/Rust-GCC/gccrs/commit/988037306d78b6a4c12e5ed61fc023694ceb3857", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/988037306d78b6a4c12e5ed61fc023694ceb3857/comments", "author": null, "committer": null, "parents": [{"sha": "cb110f3d8e3157cc18b48bb76abfcbd17dc4a560", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb110f3d8e3157cc18b48bb76abfcbd17dc4a560", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb110f3d8e3157cc18b48bb76abfcbd17dc4a560"}], "stats": {"total": 46, "additions": 44, "deletions": 2}, "files": [{"sha": "16b1dfc60e2905c851138669e6c55a15a2593aab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -1,3 +1,10 @@\n+2005-11-15  Mike Stump  <mrs@apple.com>\n+\n+\t* c-decl.c (lookup_name_two): Add.\n+\t* c-tree.h (lookup_name_two): Likewise.\n+\t* c-common.c (handle_cleanup_attribute): Use lookup_name_two instead.\n+\t* config/darwin-c.c (darwin_pragma_unused): Likewise.\n+\n 2005-11-16  Alan Modra  <amodra@bigpond.net.au>\n \n \tPR rtl-optimization/23392"}, {"sha": "feb87ef523a2e31213a1a142961c49d622422e69", "filename": "gcc/c-common.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -5464,7 +5464,7 @@ handle_cleanup_attribute (tree *node, tree name, tree args,\n       *no_add_attrs = true;\n       return NULL_TREE;\n     }\n-  cleanup_decl = lookup_name (cleanup_id);\n+  cleanup_decl = lookup_name_two (cleanup_id, 0);\n   if (!cleanup_decl || TREE_CODE (cleanup_decl) != FUNCTION_DECL)\n     {\n       error (\"cleanup argument not a function\");"}, {"sha": "99e91c04406616cb82253a1777607e13e01d66e3", "filename": "gcc/c-decl.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -2671,6 +2671,15 @@ lookup_name (tree name)\n   return 0;\n }\n \n+/* Similar to `lookup_name' for the benefit of common code and the C++\n+   front end.  */\n+\n+tree\n+lookup_name_two (tree name, int ARG_UNUSED (prefer_type))\n+{\n+  return lookup_name (name);\n+}\n+\n /* Similar to `lookup_name' but look only at the indicated scope.  */\n \n static tree"}, {"sha": "0399e893e3a8aafbb5f16a25fac5bd2629b31321", "filename": "gcc/c-tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fc-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fc-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-tree.h?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -455,6 +455,7 @@ extern tree grokparm (const struct c_parm *);\n extern tree implicitly_declare (tree);\n extern void keep_next_level (void);\n extern tree lookup_name (tree);\n+extern tree lookup_name_two (tree, int);\n extern void pending_xref_error (void);\n extern void c_push_function_context (struct function *);\n extern void c_pop_function_context (struct function *);"}, {"sha": "893aaf7d7b8478ac73d1de517931a2906d25814d", "filename": "gcc/config/darwin-c.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fconfig%2Fdarwin-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fconfig%2Fdarwin-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin-c.c?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -141,7 +141,7 @@ darwin_pragma_unused (cpp_reader *pfile ATTRIBUTE_UNUSED)\n       tok = c_lex (&decl);\n       if (tok == CPP_NAME && decl)\n \t{\n-\t  tree local = lookup_name (decl);\n+\t  tree local = lookup_name_two (decl, 0);\n \t  if (local && (TREE_CODE (local) == PARM_DECL\n \t\t\t|| TREE_CODE (local) == VAR_DECL))\n \t    TREE_USED (local) = 1;"}, {"sha": "6d354d9d16464a3646fdbfd8b7f9fe295218730f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -1,3 +1,8 @@\n+2005-11-15  Mike Stump  <mrs@apple.com>\n+\n+\t* name-lookup.c (lookup_name_two): Add.\n+\t* name-lookup.h: Likewise.\n+\n 2005-11-15  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/24667"}, {"sha": "ce27704f75feefed3981b7244d474d654a1be639", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -4000,6 +4000,14 @@ lookup_name (tree name, int prefer_type)\n \t\t\t   0, LOOKUP_COMPLAIN);\n }\n \n+/* Similar to `lookup_name' for the benefit of common code.  */\n+\n+tree\n+lookup_name_two (tree name, int prefer_type)\n+{\n+  return lookup_name (name, prefer_type);\n+}\n+\n /* Look up NAME for type used in elaborated name specifier in\n    the scopes given by SCOPE.  SCOPE can be either TS_CURRENT or\n    TS_WITHIN_ENCLOSING_NON_CLASS.  Although not implied by the"}, {"sha": "a6466d3fb74142d980e0ca04c7db936411b9f0cd", "filename": "gcc/cp/name-lookup.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fcp%2Fname-lookup.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Fcp%2Fname-lookup.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.h?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -313,6 +313,7 @@ extern void pushlevel_class (void);\n extern void poplevel_class (void);\n extern tree pushdecl_with_scope (tree, cxx_scope *, bool);\n extern tree lookup_name\t(tree, int);\n+extern tree lookup_name_two (tree, int);\n extern tree lookup_name_real (tree, int, int, bool, int, int);\n extern tree lookup_type_scope (tree, tag_scope);\n extern tree namespace_binding (tree, tree);"}, {"sha": "8b43fc896855a7de0f1163be8725c40fbb412311", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -1,3 +1,7 @@\n+2005-11-11  Mike Stump  <mrs@apple.com>\n+\n+\t* g++.old-deja/g++.mike/unused.C: Add.\n+\n 2005-11-15  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/24667"}, {"sha": "b441a77f55ef4b06e6abc43846d67fd829dd1b39", "filename": "gcc/testsuite/g++.old-deja/g++.mike/unused.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.mike%2Funused.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/988037306d78b6a4c12e5ed61fc023694ceb3857/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.mike%2Funused.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.mike%2Funused.C?ref=988037306d78b6a4c12e5ed61fc023694ceb3857", "patch": "@@ -0,0 +1,7 @@\n+// { dg-do compile { target *-*-darwin* } }\n+// { dg-options { -Wunused-parameter } }\n+// Radar 4125055\n+\n+void foo(int x) {\n+#pragma unused ( x )\n+}"}]}