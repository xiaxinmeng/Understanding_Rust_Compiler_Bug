{"sha": "88682ff62d51b96c6278e30862068780f5eb6f1d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg2ODJmZjYyZDUxYjk2YzYyNzhlMzA4NjIwNjg3ODBmNWViNmYxZA==", "commit": {"author": {"name": "Joseph Myers", "email": "jsm@polyomino.org.uk", "date": "2003-10-24T15:30:37Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2003-10-24T15:30:37Z"}, "message": "re PR c/11943 (Accepts invalid declaration \"int x[2, 3];\" in C99 mode)\n\n\t* c-parse.in (array_declarator): Use expr_no_commas.\n\tFixes PR c/11943.\n\ntestsuite:\n\t* gcc.dg/c99-arraydecl-2.c: New test.  PR c/11943.\n\nFrom-SVN: r72900", "tree": {"sha": "0e20c06d9c4524d1e9acb4a0a01a1f9474f0fd26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e20c06d9c4524d1e9acb4a0a01a1f9474f0fd26"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88682ff62d51b96c6278e30862068780f5eb6f1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88682ff62d51b96c6278e30862068780f5eb6f1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88682ff62d51b96c6278e30862068780f5eb6f1d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88682ff62d51b96c6278e30862068780f5eb6f1d/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d39f00757c94705cd29e629359a3e63c2bbbe80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d39f00757c94705cd29e629359a3e63c2bbbe80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d39f00757c94705cd29e629359a3e63c2bbbe80"}], "stats": {"total": 31, "additions": 28, "deletions": 3}, "files": [{"sha": "445a0062d2baed9f97e490da490640b2684aa55f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=88682ff62d51b96c6278e30862068780f5eb6f1d", "patch": "@@ -1,3 +1,8 @@\n+2003-10-24  Joseph S. Myers  <jsm@polyomino.org.uk>\n+\n+\t* c-parse.in (array_declarator): Use expr_no_commas.\n+\tFixes PR c/11943.\n+\n 2003-10-24  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mips/linux.h: Wrap MD_FALLBACK_FRAME_STATE_FOR and"}, {"sha": "22bab99077a663ce9ec66320ba8272de534c1621", "filename": "gcc/c-parse.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=88682ff62d51b96c6278e30862068780f5eb6f1d", "patch": "@@ -1973,16 +1973,16 @@ direct_absdcl1:\n /* The [...] part of a declarator for an array type.  */\n \n array_declarator:\n-\t'[' maybe_type_quals_attrs expr ']'\n+\t'[' maybe_type_quals_attrs expr_no_commas ']'\n \t\t{ $$ = build_array_declarator ($3, $2, 0, 0); }\n \t| '[' maybe_type_quals_attrs ']'\n \t\t{ $$ = build_array_declarator (NULL_TREE, $2, 0, 0); }\n \t| '[' maybe_type_quals_attrs '*' ']'\n \t\t{ $$ = build_array_declarator (NULL_TREE, $2, 0, 1); }\n-\t| '[' STATIC maybe_type_quals_attrs expr ']'\n+\t| '[' STATIC maybe_type_quals_attrs expr_no_commas ']'\n \t\t{ $$ = build_array_declarator ($4, $3, 1, 0); }\n \t/* declspecs_nosc_nots is a synonym for type_quals_attrs.  */\n-\t| '[' declspecs_nosc_nots STATIC expr ']'\n+\t| '[' declspecs_nosc_nots STATIC expr_no_commas ']'\n \t\t{ $$ = build_array_declarator ($4, $2, 1, 0); }\n \t;\n "}, {"sha": "dd43b9363b72b6b75c58d9a23379d216081b26c8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=88682ff62d51b96c6278e30862068780f5eb6f1d", "patch": "@@ -1,3 +1,7 @@\n+2003-10-24  Joseph S. Myers  <jsm@polyomino.org.uk>\n+\n+\t* gcc.dg/c99-arraydecl-2.c: New test.  PR c/11943.\n+\n 2003-10-24  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n \n \tPR c++/11076"}, {"sha": "e2085e1a186310cf631484df5595d1a961646096", "filename": "gcc/testsuite/gcc.dg/c99-arraydecl-2.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-arraydecl-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88682ff62d51b96c6278e30862068780f5eb6f1d/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-arraydecl-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-arraydecl-2.c?ref=88682ff62d51b96c6278e30862068780f5eb6f1d", "patch": "@@ -0,0 +1,16 @@\n+/* Test for C99 array declarators: expression must be an\n+   assignment-expression.  PR 11943.  */\n+/* Origin: Joseph Myers <jsm@polyomino.org.uk> */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=iso9899:1999 -pedantic-errors\" } */\n+\n+void\n+foo (void)\n+{\n+  int a[2, 3]; /* { dg-error \"parse|syntax\" \"bad array declarator\" } */\n+  void b(int x[2, 3]); /* { dg-error \"parse|syntax\" \"bad array declarator\" } */\n+  void c(int [2, 3]); /* { dg-error \"parse|syntax\" \"bad array declarator\" } */\n+  void d(int *x[restrict 2, 3]); /* { dg-error \"parse|syntax\" \"bad array declarator\" } */\n+  void e(int *x[static restrict 2, 3]); /* { dg-error \"parse|syntax\" \"bad array declarator\" } */\n+  void f(int *x[restrict static 2, 3]); /* { dg-error \"parse|syntax\" \"bad array declarator\" } */\n+}"}]}