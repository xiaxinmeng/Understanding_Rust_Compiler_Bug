{"sha": "479ec1d1e046ba967cb712b7421dcb299733f4aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc5ZWMxZDFlMDQ2YmE5NjdjYjcxMmI3NDIxZGNiMjk5NzMzZjRhYQ==", "commit": {"author": {"name": "Devang Patel", "email": "dpatel@apple.com", "date": "2004-11-24T17:47:32Z"}, "committer": {"name": "Devang Patel", "email": "dpatel@gcc.gnu.org", "date": "2004-11-24T17:47:32Z"}, "message": "gcc.h (DEFAULT_WORD_SWITCH_TAKES_ARG): Add isysroot.\n\n        PR/18555\n        * gcc.h (DEFAULT_WORD_SWITCH_TAKES_ARG): Add isysroot.\n        * config/darwin-c.c (darwin_register_frameworks): Use sysroot.\n\n        testsuite\n        * gcc.dg/cpp/isysroot-1.c: New test.\n        * gcc.dg/cpp/usr/include/stdio.h: New file.\n        * gcc.dg/cpp/isysroot-2.c: New test.\n        * gcc.dg/cpp/System/Library/Framework/Carbon.framework/Headers/Carbon.h:\n        New file.\n\nFrom-SVN: r91178", "tree": {"sha": "ea366309ad8043d0c8ca90046334475e8522bf10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea366309ad8043d0c8ca90046334475e8522bf10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/479ec1d1e046ba967cb712b7421dcb299733f4aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/479ec1d1e046ba967cb712b7421dcb299733f4aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/479ec1d1e046ba967cb712b7421dcb299733f4aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/479ec1d1e046ba967cb712b7421dcb299733f4aa/comments", "author": null, "committer": null, "parents": [{"sha": "b0896d72f0bad01f440692c69003962200806e31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0896d72f0bad01f440692c69003962200806e31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0896d72f0bad01f440692c69003962200806e31"}], "stats": {"total": 53, "additions": 51, "deletions": 2}, "files": [{"sha": "62854cdae1c78abc2e318ad536370acffb1ef904", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -1,3 +1,9 @@\n+2004-11-24  Devang Patel  <dpatel@apple.com>\n+\n+\tPR/18555\n+\t* gcc.h (DEFAULT_WORD_SWITCH_TAKES_ARG): Add isysroot.\n+\t* config/darwin-c.c (darwin_register_frameworks): Use sysroot.\n+\n 2004-11-24  Devang Patel  <dpatel@apple.com>\n \n \t* gcc.c (process_command): Supply -v to linker."}, {"sha": "feb26f185d297721401cb8b1f7894a4aa63963ba", "filename": "gcc/config/darwin-c.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Fconfig%2Fdarwin-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Fconfig%2Fdarwin-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin-c.c?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -468,7 +468,7 @@ darwin_register_objc_includes (const char *sysroot, const char *iprefix,\n    frameworks had been registered.  */\n \n void\n-darwin_register_frameworks (const char *sysroot ATTRIBUTE_UNUSED,\n+darwin_register_frameworks (const char *sysroot,\n \t\t\t    const char *iprefix ATTRIBUTE_UNUSED, int stdinc)\n {\n   if (stdinc)\n@@ -478,8 +478,13 @@ darwin_register_frameworks (const char *sysroot ATTRIBUTE_UNUSED,\n       /* Setup default search path for frameworks.  */\n       for (i=0; i<sizeof (framework_defaults)/sizeof(const char *); ++i)\n \t{\n+\t  char *str;\n+\t  if (sysroot)\n+\t    str = concat (sysroot, xstrdup (framework_defaults [i]), NULL);\n+\t  else\n+\t    str = xstrdup (framework_defaults[i]);\n \t  /* System Framework headers are cxx aware.  */\n-\t  add_system_framework_path (xstrdup (framework_defaults[i]));\n+\t  add_system_framework_path (str);\n \t}\n     }\n "}, {"sha": "6c3c9829cbcee4afe15de6c15a46ad0b3ed036f1", "filename": "gcc/gcc.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Fgcc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Fgcc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.h?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -49,6 +49,7 @@ struct spec_function\n   || !strcmp (STR, \"idirafter\") || !strcmp (STR, \"iprefix\") \\\n   || !strcmp (STR, \"iwithprefix\") || !strcmp (STR, \"iwithprefixbefore\") \\\n   || !strcmp (STR, \"iquote\") || !strcmp (STR, \"isystem\") \\\n+  || !strcmp (STR, \"isysroot\") \\\n   || !strcmp (STR, \"-param\") || !strcmp (STR, \"specs\") \\\n   || !strcmp (STR, \"MF\") || !strcmp (STR, \"MT\") || !strcmp (STR, \"MQ\"))\n "}, {"sha": "cb68c281d2283567dacf44d17bf8353a30e3cb99", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -1,3 +1,12 @@\n+2004-11-24  Devang Patel  <dpatel@apple.com>\n+\n+\tPR/18555\n+\t* gcc.dg/cpp/isysroot-1.c: New test.\n+\t* gcc.dg/cpp/usr/include/stdio.h: New file.\n+\t* gcc.dg/cpp/isysroot-2.c: New test.\n+\t* gcc.dg/cpp/System/Library/Framework/Carbon.framework/Headers/Carbon.h:\n+\tNew file.\n+\n 2004-11-24  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n \tPR c++/8929"}, {"sha": "4259c3718faecadbb7687b68fdfe7e12a8c33d15", "filename": "gcc/testsuite/gcc.dg/cpp/System/Library/Frameworks/Carbon.framework/Headers/Carbon.h", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2FSystem%2FLibrary%2FFrameworks%2FCarbon.framework%2FHeaders%2FCarbon.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2FSystem%2FLibrary%2FFrameworks%2FCarbon.framework%2FHeaders%2FCarbon.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2FSystem%2FLibrary%2FFrameworks%2FCarbon.framework%2FHeaders%2FCarbon.h?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -0,0 +1,4 @@\n+/* Used by gcc.dg/cpp/isysroot-2.c to test isysroot.  */\n+void foo()\n+{\n+}"}, {"sha": "bfbf25565e518060d9fdd7056eef3802d3b51b6f", "filename": "gcc/testsuite/gcc.dg/cpp/isysroot-1.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fisysroot-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fisysroot-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fisysroot-1.c?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-options \"-isysroot ${srcdir}/gcc.dg/cpp\" } */\n+/* { dg-do compile } */\n+\n+#include <stdio.h>\n+int main()\n+{\n+  /* Special stdio.h supplies function foo.  */\n+  void (*x)(void) = foo;\n+  return 0;\n+}"}, {"sha": "a32618c25123b98e662d715d15ac50ee0344234a", "filename": "gcc/testsuite/gcc.dg/cpp/isysroot-2.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fisysroot-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fisysroot-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fisysroot-2.c?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-options \"-isysroot ${srcdir}/gcc.dg/cpp\" { target *-*-darwin* } } */\n+/* { dg-do compile } */\n+\n+#include <Carbon/Carbon.h>\n+int main()\n+{\n+  /* Special Carbon.h supplies function foo.  */\n+  void (*x)(void) = foo;\n+  return 0;\n+}"}, {"sha": "c674e89f7ef7e65f0af68efd1af6ef0f6653a512", "filename": "gcc/testsuite/gcc.dg/cpp/usr/include/stdio.h", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fusr%2Finclude%2Fstdio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/479ec1d1e046ba967cb712b7421dcb299733f4aa/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fusr%2Finclude%2Fstdio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fusr%2Finclude%2Fstdio.h?ref=479ec1d1e046ba967cb712b7421dcb299733f4aa", "patch": "@@ -0,0 +1,4 @@\n+/* Used by gcc.dg/cpp/isysroot-1.c to test isysroot.  */\n+void foo()\n+{\n+}"}]}