{"sha": "c5e36c09e5df095a140f98e064d14759a09e1108", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzVlMzZjMDllNWRmMDk1YTE0MGY5OGUwNjRkMTQ3NTlhMDllMTEwOA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2004-07-25T03:58:50Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2004-07-25T03:58:50Z"}, "message": "Zack Weinberg <zack@codesourcery.com\n\n2004-07-24  Alexander Kabaev  <kan@freebsd.org>\n\t    Zack Weinberg  <zack@codesourcery.com\n\n\tPR 16684\n\t* c-decl.c (diagnose_mismatched_decls): Don't issue a\n\tredundant-declaration warning the first time a builtin is\n\tdeclared explicitly.\ntestsuite:\n\t* gcc.dg/Wredundant-decls-1.c: New test case.\n\nFrom-SVN: r85140", "tree": {"sha": "e08d5c38fdbe7459662ce1f4849c678ef281f3ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e08d5c38fdbe7459662ce1f4849c678ef281f3ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c5e36c09e5df095a140f98e064d14759a09e1108", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5e36c09e5df095a140f98e064d14759a09e1108", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5e36c09e5df095a140f98e064d14759a09e1108", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5e36c09e5df095a140f98e064d14759a09e1108/comments", "author": null, "committer": null, "parents": [{"sha": "9d55a9660d0e067d4265d3b82af7f25fbb8d018e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d55a9660d0e067d4265d3b82af7f25fbb8d018e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d55a9660d0e067d4265d3b82af7f25fbb8d018e"}], "stats": {"total": 51, "additions": 38, "deletions": 13}, "files": [{"sha": "05d3615d934d3e57c8cffaf803de33627980ca8f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c5e36c09e5df095a140f98e064d14759a09e1108", "patch": "@@ -1,3 +1,11 @@\n+2004-07-24  Alexander Kabaev  <kan@freebsd.org>\n+\t    Zack Weinberg  <zack@codesourcery.com\n+\n+\tPR 16684\n+\t* c-decl.c (diagnose_mismatched_decls): Don't issue a\n+\tredundant-declaration warning the first time a builtin is\n+\tdeclared explicitly.\n+\n 2004-07-25  Bernardo Innocenti  <bernie@develer.com>\n \n \t* tree.h (staticp): Change return type to bool."}, {"sha": "41e7df0c01af57a26012282089d3deedfbd3c932", "filename": "gcc/c-decl.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=c5e36c09e5df095a140f98e064d14759a09e1108", "patch": "@@ -1444,6 +1444,11 @@ diagnose_mismatched_decls (tree newdecl, tree olddecl,\n \t definition.  */\n       && !(TREE_CODE (newdecl) == FUNCTION_DECL\n \t   && DECL_INITIAL (newdecl) && !DECL_INITIAL (olddecl))\n+      /* Don't warn about redundant redeclarations of builtins. */\n+      && !(TREE_CODE (newdecl) == FUNCTION_DECL\n+\t   && !DECL_BUILT_IN (newdecl)\n+\t   && DECL_BUILT_IN (olddecl)\n+\t   && !C_DECL_DECLARED_BUILTIN (olddecl))\n       /* Don't warn about an extern followed by a definition.  */\n       && !(DECL_EXTERNAL (olddecl) && !DECL_EXTERNAL (newdecl))\n       /* Don't warn about forward parameter decls.  */"}, {"sha": "8c9515942eb1c7d792b1b4b97b013a85426c4064", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 18, "deletions": 13, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c5e36c09e5df095a140f98e064d14759a09e1108", "patch": "@@ -1,3 +1,8 @@\n+2004-07-24  Zack Weinberg  <zack@codesourcery.com>\n+\n+\tPR 16684\n+\t* gcc.dg/Wredundant-decls-1.c: New test case.\n+\n 2004-07-24  Jakub Jelinek  <jakub@redhat.com>\n \n \t* README.compat: Add RUN_ALL_COMPAT_TESTS documentation.\n@@ -58,7 +63,7 @@\n \n 2004-07-22  David Billinghurst (David.Billinghurst@riotinto.com)\n \n-\t* gfortran.dg/g77/970625-2.f Copy from g77.f-torture/execute. \n+\t* gfortran.dg/g77/970625-2.f Copy from g77.f-torture/execute.\n \tAdd dg-run directive.  Declare variables as required.\n \t* gfortran.dg/g77/README: Update\n \n@@ -112,7 +117,7 @@\n 2004-07-21  David Billinghurst (David.Billinghurst@riotinto.com)\n \n \tCopy cases from g77.f-torture/execute and add dg-run\n-\tdirective.  Other changes as noted.    \n+\tdirective.  Other changes as noted.\n \t* gfortran.dg/g77/13037.f\n \t* gfortran.dg/g77/1832.f\n \t* gfortran.dg/g77/19981119-0.f\n@@ -184,7 +189,7 @@\n \tg++.dg/parse/casting-operator2.C, g++.dg/parse/dtor3.C,\n \tg++.dg/parse/typename6.C, g++.dg/template/dependent-expr4.C,\n \tg++.dg/template/nontype3.C: Remove trailing CR from tests.\n-\t\n+\n 2004-07-18  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/16623\n@@ -298,7 +303,7 @@\n \n \tPR c++/16518\n \t* g++.dg/parse/mutable1.C: New test.\n-\t\n+\n 2004-07-13  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR tree-optimization/16443\n@@ -312,7 +317,7 @@\n 2004-07-13  David Billinghurst <David.Billinghurst@riotinto.com>\n \n \t* gfortran.dg/g77/README: New file\n-\t* gfortran.dg/g77/19981216-0.f:  Copy from \n+\t* gfortran.dg/g77/19981216-0.f:  Copy from\n \tg77.f-torture/noncompile.  Add \"dg-do compile\" and\n \tdg-error as required.\n \t* gfortran.dg/g77/19990218-1.f: Likewise\n@@ -334,12 +339,12 @@\n \t* gfortran.dg/g77/970125-0.f: Add dg-excess-errors.\n \t* gfortran.dg/g77/980519-2.f: Declare hd_S,hd_Z,hd_T\n \t* gfortran.dg/g77/990115-1.f: Declare RANK as INTEGER\n-\t* gfortran.dg/g77/alpha1.f: Separate declaration and DATA \n-\tstatement to conform to standard.  Append alpha1.x for reference. \n+\t* gfortran.dg/g77/alpha1.f: Separate declaration and DATA\n+\tstatement to conform to standard.  Append alpha1.x for reference.\n \t* gfortran.dg/g77/xformat.f: Add dg-warning\n \n 2004-07-13  David Billinghurst <David.Billinghurst@riotinto.com>\n- \n+\n \t* gfortran.dg/g77/cpp.F: Copy from g77.f-torture/compile.\n \tAdd {dg-do compile} directive.\n \t* gfortran.dg/g77/cpp2.F: Likewise\n@@ -361,7 +366,7 @@\n \t* g++.old-deja/g++.ns/new1.C: Remove (ill-formed).\n \n 2004-07-12  David Billinghurst <David.Billinghurst@riotinto.com>\n- \n+\n \t* gfortran.dg/g77/12002.f: Copy from g77.f-torture/compile.\n \tAdd {dg-do compile} directive.\n \t* gfortran.dg/g77/13060.f: Likewise\n@@ -428,14 +433,14 @@\n \n \tPR fortran/17574\n \t* gfortran.dg/pr15754.f90: New test.\n-\t\n+\n 2004-07-11  Joseph S. Myers  <jsm@polyomino.org.uk>\n \n \tPR tree-optimization/16437\n \t* gcc.c-torture/execute/bitfld-4.c: New test.\n \n 2004-07-10  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n-\t\n+\n \t* gfortran.fortran-torture/execute/common_2.f90: Add check for\n \taccess to common var from module.\n \n@@ -465,7 +470,7 @@\n \t* gfortran.dg/g77/pr9258.f: Likewise.  Add dg-warning lines.\n \n 2004-07-10  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n-\t\n+\n \t* gfortran.fortran-torture/execute/module_init_1.f90: Fix test.\n \n 2004-07-10 Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n@@ -484,7 +489,7 @@\n \t* gcc.c-torture/compile/20040709-1.c: New.\n \n 2004-07-09  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n-\t\n+\n \tPR fortran/14077\n \t* gfortran.fortran-torture/execute/module_init_1.f90: New test.\n "}, {"sha": "c38c7b5540f2b936704d8dc5a5a5aac0895866b5", "filename": "gcc/testsuite/gcc.dg/Wredundant-decls-1.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2Ftestsuite%2Fgcc.dg%2FWredundant-decls-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5e36c09e5df095a140f98e064d14759a09e1108/gcc%2Ftestsuite%2Fgcc.dg%2FWredundant-decls-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWredundant-decls-1.c?ref=c5e36c09e5df095a140f98e064d14759a09e1108", "patch": "@@ -0,0 +1,7 @@\n+/* PR 16684: no redundant declaration warnings should issue the first\n+   time a built-in function is declared.\n+   { dg-do compile }\n+   { dg-options \"-Wredundant-decls\" } */\n+\n+void *malloc (__SIZE_TYPE__);  /* { dg-bogus \"redundant\" } */\n+void *malloc (__SIZE_TYPE__);  /* { dg-warning \"redundant\" } */"}]}