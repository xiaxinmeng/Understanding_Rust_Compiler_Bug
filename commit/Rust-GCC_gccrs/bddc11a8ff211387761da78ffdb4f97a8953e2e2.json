{"sha": "bddc11a8ff211387761da78ffdb4f97a8953e2e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmRkYzExYThmZjIxMTM4Nzc2MWRhNzhmZmRiNGY5N2E4OTUzZTJlMg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-04-24T22:08:32Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-04-24T22:08:32Z"}, "message": "re PR go/65616 (libgobegin.a not compiled with -fPIC)\n\n\tPR go/65616\nlibgo: Compile go-main, in libgobegin, with -fPIC.\n\nFrom-SVN: r222431", "tree": {"sha": "ceb4b471d379efcfe88f0607797a16c9ba743016", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ceb4b471d379efcfe88f0607797a16c9ba743016"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bddc11a8ff211387761da78ffdb4f97a8953e2e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bddc11a8ff211387761da78ffdb4f97a8953e2e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bddc11a8ff211387761da78ffdb4f97a8953e2e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bddc11a8ff211387761da78ffdb4f97a8953e2e2/comments", "author": null, "committer": null, "parents": [{"sha": "67739d3bd5759305b06128faee60fd2c19f40d45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67739d3bd5759305b06128faee60fd2c19f40d45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67739d3bd5759305b06128faee60fd2c19f40d45"}], "stats": {"total": 49, "additions": 36, "deletions": 13}, "files": [{"sha": "15af3dc1bec98c8fa803052b6fb2630d61cb6f31", "filename": "libgo/Makefile.am", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bddc11a8ff211387761da78ffdb4f97a8953e2e2/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bddc11a8ff211387761da78ffdb4f97a8953e2e2/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=bddc11a8ff211387761da78ffdb4f97a8953e2e2", "patch": "@@ -2032,6 +2032,10 @@ libgobegin_a_SOURCES = \\\n libgobegin_llgo_a_SOURCES = \\\n \truntime/go-main.c\n \n+# Use -fPIC for libgobegin so that it can be put in a PIE.\n+libgobegin_a_CFLAGS = $(AM_CFLAGS) -fPIC\n+libgobegin_llgo_a_CFLAGS = $(AM_CFLAGS) -fPIC\n+\n libnetgo_a_SOURCES = $(go_netgo_files)\n libnetgo_a_LIBADD = netgo.o\n "}, {"sha": "29602d378815c452094c40b34187b309f22381e8", "filename": "libgo/Makefile.in", "status": "modified", "additions": 32, "deletions": 13, "changes": 45, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bddc11a8ff211387761da78ffdb4f97a8953e2e2/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bddc11a8ff211387761da78ffdb4f97a8953e2e2/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=bddc11a8ff211387761da78ffdb4f97a8953e2e2", "patch": "@@ -130,11 +130,11 @@ LIBRARIES = $(toolexeclib_LIBRARIES)\n ARFLAGS = cru\n libgobegin_llgo_a_AR = $(AR) $(ARFLAGS)\n libgobegin_llgo_a_LIBADD =\n-am_libgobegin_llgo_a_OBJECTS = go-main.$(OBJEXT)\n+am_libgobegin_llgo_a_OBJECTS = libgobegin_llgo_a-go-main.$(OBJEXT)\n libgobegin_llgo_a_OBJECTS = $(am_libgobegin_llgo_a_OBJECTS)\n libgobegin_a_AR = $(AR) $(ARFLAGS)\n libgobegin_a_LIBADD =\n-am_libgobegin_a_OBJECTS = go-main.$(OBJEXT)\n+am_libgobegin_a_OBJECTS = libgobegin_a-go-main.$(OBJEXT)\n libgobegin_a_OBJECTS = $(am_libgobegin_a_OBJECTS)\n libnetgo_a_AR = $(AR) $(ARFLAGS)\n libnetgo_a_DEPENDENCIES = netgo.o\n@@ -2098,6 +2098,10 @@ libgobegin_a_SOURCES = \\\n libgobegin_llgo_a_SOURCES = \\\n \truntime/go-main.c\n \n+\n+# Use -fPIC for libgobegin so that it can be put in a PIE.\n+libgobegin_a_CFLAGS = $(AM_CFLAGS) -fPIC\n+libgobegin_llgo_a_CFLAGS = $(AM_CFLAGS) -fPIC\n libnetgo_a_SOURCES = $(go_netgo_files)\n libnetgo_a_LIBADD = netgo.o\n LTLDFLAGS = $(shell $(SHELL) $(top_srcdir)/../libtool-ldflags $(LDFLAGS))\n@@ -2497,7 +2501,6 @@ distclean-compile:\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-interface-compare.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-interface-eface-compare.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-interface-val-compare.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-main.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-make-slice.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-map-delete.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-map-index.Plo@am__quote@\n@@ -2541,6 +2544,8 @@ distclean-compile:\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/go-varargs.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/heapdump.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/lfstack.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgobegin_a-go-main.Po@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libgobegin_llgo_a-go-main.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/lock_futex.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/lock_sema.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/malloc.Plo@am__quote@\n@@ -2598,19 +2603,33 @@ distclean-compile:\n @AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n @am__fastdepCC_FALSE@\t$(LTCOMPILE) -c -o $@ $<\n \n-go-main.o: runtime/go-main.c\n-@am__fastdepCC_TRUE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT go-main.o -MD -MP -MF $(DEPDIR)/go-main.Tpo -c -o go-main.o `test -f 'runtime/go-main.c' || echo '$(srcdir)/'`runtime/go-main.c\n-@am__fastdepCC_TRUE@\t$(am__mv) $(DEPDIR)/go-main.Tpo $(DEPDIR)/go-main.Po\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='runtime/go-main.c' object='go-main.o' libtool=no @AMDEPBACKSLASH@\n+libgobegin_llgo_a-go-main.o: runtime/go-main.c\n+@am__fastdepCC_TRUE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_llgo_a_CFLAGS) $(CFLAGS) -MT libgobegin_llgo_a-go-main.o -MD -MP -MF $(DEPDIR)/libgobegin_llgo_a-go-main.Tpo -c -o libgobegin_llgo_a-go-main.o `test -f 'runtime/go-main.c' || echo '$(srcdir)/'`runtime/go-main.c\n+@am__fastdepCC_TRUE@\t$(am__mv) $(DEPDIR)/libgobegin_llgo_a-go-main.Tpo $(DEPDIR)/libgobegin_llgo_a-go-main.Po\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='runtime/go-main.c' object='libgobegin_llgo_a-go-main.o' libtool=no @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCC_FALSE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_llgo_a_CFLAGS) $(CFLAGS) -c -o libgobegin_llgo_a-go-main.o `test -f 'runtime/go-main.c' || echo '$(srcdir)/'`runtime/go-main.c\n+\n+libgobegin_llgo_a-go-main.obj: runtime/go-main.c\n+@am__fastdepCC_TRUE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_llgo_a_CFLAGS) $(CFLAGS) -MT libgobegin_llgo_a-go-main.obj -MD -MP -MF $(DEPDIR)/libgobegin_llgo_a-go-main.Tpo -c -o libgobegin_llgo_a-go-main.obj `if test -f 'runtime/go-main.c'; then $(CYGPATH_W) 'runtime/go-main.c'; else $(CYGPATH_W) '$(srcdir)/runtime/go-main.c'; fi`\n+@am__fastdepCC_TRUE@\t$(am__mv) $(DEPDIR)/libgobegin_llgo_a-go-main.Tpo $(DEPDIR)/libgobegin_llgo_a-go-main.Po\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='runtime/go-main.c' object='libgobegin_llgo_a-go-main.obj' libtool=no @AMDEPBACKSLASH@\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n+@am__fastdepCC_FALSE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_llgo_a_CFLAGS) $(CFLAGS) -c -o libgobegin_llgo_a-go-main.obj `if test -f 'runtime/go-main.c'; then $(CYGPATH_W) 'runtime/go-main.c'; else $(CYGPATH_W) '$(srcdir)/runtime/go-main.c'; fi`\n+\n+libgobegin_a-go-main.o: runtime/go-main.c\n+@am__fastdepCC_TRUE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_a_CFLAGS) $(CFLAGS) -MT libgobegin_a-go-main.o -MD -MP -MF $(DEPDIR)/libgobegin_a-go-main.Tpo -c -o libgobegin_a-go-main.o `test -f 'runtime/go-main.c' || echo '$(srcdir)/'`runtime/go-main.c\n+@am__fastdepCC_TRUE@\t$(am__mv) $(DEPDIR)/libgobegin_a-go-main.Tpo $(DEPDIR)/libgobegin_a-go-main.Po\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='runtime/go-main.c' object='libgobegin_a-go-main.o' libtool=no @AMDEPBACKSLASH@\n @AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n-@am__fastdepCC_FALSE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o go-main.o `test -f 'runtime/go-main.c' || echo '$(srcdir)/'`runtime/go-main.c\n+@am__fastdepCC_FALSE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_a_CFLAGS) $(CFLAGS) -c -o libgobegin_a-go-main.o `test -f 'runtime/go-main.c' || echo '$(srcdir)/'`runtime/go-main.c\n \n-go-main.obj: runtime/go-main.c\n-@am__fastdepCC_TRUE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT go-main.obj -MD -MP -MF $(DEPDIR)/go-main.Tpo -c -o go-main.obj `if test -f 'runtime/go-main.c'; then $(CYGPATH_W) 'runtime/go-main.c'; else $(CYGPATH_W) '$(srcdir)/runtime/go-main.c'; fi`\n-@am__fastdepCC_TRUE@\t$(am__mv) $(DEPDIR)/go-main.Tpo $(DEPDIR)/go-main.Po\n-@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='runtime/go-main.c' object='go-main.obj' libtool=no @AMDEPBACKSLASH@\n+libgobegin_a-go-main.obj: runtime/go-main.c\n+@am__fastdepCC_TRUE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_a_CFLAGS) $(CFLAGS) -MT libgobegin_a-go-main.obj -MD -MP -MF $(DEPDIR)/libgobegin_a-go-main.Tpo -c -o libgobegin_a-go-main.obj `if test -f 'runtime/go-main.c'; then $(CYGPATH_W) 'runtime/go-main.c'; else $(CYGPATH_W) '$(srcdir)/runtime/go-main.c'; fi`\n+@am__fastdepCC_TRUE@\t$(am__mv) $(DEPDIR)/libgobegin_a-go-main.Tpo $(DEPDIR)/libgobegin_a-go-main.Po\n+@AMDEP_TRUE@@am__fastdepCC_FALSE@\tsource='runtime/go-main.c' object='libgobegin_a-go-main.obj' libtool=no @AMDEPBACKSLASH@\n @AMDEP_TRUE@@am__fastdepCC_FALSE@\tDEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@\n-@am__fastdepCC_FALSE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o go-main.obj `if test -f 'runtime/go-main.c'; then $(CYGPATH_W) 'runtime/go-main.c'; else $(CYGPATH_W) '$(srcdir)/runtime/go-main.c'; fi`\n+@am__fastdepCC_FALSE@\t$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libgobegin_a_CFLAGS) $(CFLAGS) -c -o libgobegin_a-go-main.obj `if test -f 'runtime/go-main.c'; then $(CYGPATH_W) 'runtime/go-main.c'; else $(CYGPATH_W) '$(srcdir)/runtime/go-main.c'; fi`\n \n go-append.lo: runtime/go-append.c\n @am__fastdepCC_TRUE@\t$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT go-append.lo -MD -MP -MF $(DEPDIR)/go-append.Tpo -c -o go-append.lo `test -f 'runtime/go-append.c' || echo '$(srcdir)/'`runtime/go-append.c"}]}