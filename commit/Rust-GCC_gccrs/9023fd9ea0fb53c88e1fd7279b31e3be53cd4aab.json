{"sha": "9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTAyM2ZkOWVhMGZiNTNjODhlMWZkNzI3OWIzMWUzYmU1M2NkNGFhYg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2016-04-20T14:41:55Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2016-04-20T14:41:55Z"}, "message": "Don't build 32-bit libatomic with -march=i486 on x86-64\n\nGcc uses the same -march= for both -m32 and -m64 on x86-64 unless\n--with-arch-32= is used.  There is no need for -march=i486 to compile\n32-bit libatomic on x86-64.\n\n\tPR target/70454\n\t* configure.tgt (XCFLAGS): Don't add -march=i486 to compile\n\t32-bit x86 target library on x86-64.\n\nFrom-SVN: r235287", "tree": {"sha": "9928a8343d69f74437c08a8878114a440d4075ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9928a8343d69f74437c08a8878114a440d4075ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8f6a773bd879c6d3e693f5dff7e3854e1ea03418", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f6a773bd879c6d3e693f5dff7e3854e1ea03418", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f6a773bd879c6d3e693f5dff7e3854e1ea03418"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "70a7f7ceca1fcb4545a945b56b65baeb82dadda3", "filename": "libatomic/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab/libatomic%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab/libatomic%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libatomic%2FChangeLog?ref=9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab", "patch": "@@ -1,3 +1,9 @@\n+2016-04-20  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/70454\n+\t* configure.tgt (XCFLAGS): Don't add -march=i486 to compile\n+\t32-bit x86 target library on x86-64.\n+\n 2016-01-06  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n \n \tPR other/67627"}, {"sha": "49233a4f45ae5314d514266b9600539f404af61d", "filename": "libatomic/configure.tgt", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab/libatomic%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab/libatomic%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libatomic%2Fconfigure.tgt?ref=9023fd9ea0fb53c88e1fd7279b31e3be53cd4aab", "patch": "@@ -81,14 +81,8 @@ case \"${target_cpu}\" in\n \ttry_ifunc=yes\n \t;;\n   x86_64)\n-\tcase \" ${CC} ${CFLAGS} \" in\n-\t  *\" -m32 \"*)\n-\t    XCFLAGS=\"${XCFLAGS} -march=i486 -mtune=generic\"\n-\t    XCFLAGS=\"${XCFLAGS} -fomit-frame-pointer\"\n-\t    ;;\n-\t  *)\n-\t    ;;\n-\tesac\n+\t# x86_64 compiler passes -march=x86_64 by default when building\n+\t# 32bit target libraries.\n \tARCH=x86\n \t# ??? Detect when -mcx16 is already enabled.\n \ttry_ifunc=yes"}]}