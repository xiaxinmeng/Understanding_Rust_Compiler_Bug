{"sha": "b95591361e32a755231d99c348f8a43e2aed0187", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjk1NTkxMzYxZTMyYTc1NTIzMWQ5OWMzNDhmOGE0M2UyYWVkMDE4Nw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-05-22T05:38:04Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-05-22T05:38:04Z"}, "message": "re PR lto/61012 (lto1: errors during merging of translation units (error: variable \u2018link\u2019 redeclared as function))\n\n\n\tPR lto/61012\n\t* lto-symtab.c (lto_symtab_merge_decls_1): Do not ICE on undefined externals\n\tmixed with variables.\n\nFrom-SVN: r210740", "tree": {"sha": "c72d00aded03e79f8a7ecd9f03ab4b6240acf2db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c72d00aded03e79f8a7ecd9f03ab4b6240acf2db"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b95591361e32a755231d99c348f8a43e2aed0187", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b95591361e32a755231d99c348f8a43e2aed0187", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b95591361e32a755231d99c348f8a43e2aed0187", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b95591361e32a755231d99c348f8a43e2aed0187/comments", "author": null, "committer": null, "parents": [{"sha": "4269f19c09163d6ef65043171eeccc9c521d9b5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4269f19c09163d6ef65043171eeccc9c521d9b5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4269f19c09163d6ef65043171eeccc9c521d9b5f"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "dedabf36867d00919f22fae55faef31fbed76370", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b95591361e32a755231d99c348f8a43e2aed0187/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b95591361e32a755231d99c348f8a43e2aed0187/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=b95591361e32a755231d99c348f8a43e2aed0187", "patch": "@@ -1,3 +1,9 @@\n+2014-05-17  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR lto/61012\n+\t* lto-symtab.c (lto_symtab_merge_decls_1): Do not ICE on undefined externals\n+\tmixed with variables.\n+\n 2014-05-17  Trevor Saunders  <tsaunders@mozilla.com>\n \n \t* lto-tree.h: Don't use variable_size gty attribute."}, {"sha": "957261ec8b7e388b94b8c0536e63a0cf90d8b0cf", "filename": "gcc/lto/lto-symtab.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b95591361e32a755231d99c348f8a43e2aed0187/gcc%2Flto%2Flto-symtab.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b95591361e32a755231d99c348f8a43e2aed0187/gcc%2Flto%2Flto-symtab.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-symtab.c?ref=b95591361e32a755231d99c348f8a43e2aed0187", "patch": "@@ -447,7 +447,12 @@ lto_symtab_merge_decls_1 (symtab_node *first)\n      cgraph or a varpool node.  */\n   if (!prevailing)\n     {\n-      prevailing = first;\n+      for (prevailing = first;\n+\t   prevailing; prevailing = prevailing->next_sharing_asm_name)\n+\tif (lto_symtab_symbol_p (prevailing))\n+\t  break;\n+      if (!prevailing)\n+\treturn;\n       /* For variables chose with a priority variant with vnode\n \t attached (i.e. from unit where external declaration of\n \t variable is actually used)."}]}