{"sha": "ca1930ce8b3dfa6965b2c6991232139e43420dab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ExOTMwY2U4YjNkZmE2OTY1YjJjNjk5MTIzMjEzOWU0MzQyMGRhYg==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2010-05-25T15:19:55Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2010-05-25T15:19:55Z"}, "message": "s390.c (optimization_options): Fix and move the flag_prefetch_loop_arrays override ...\n\n2010-05-25  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* config/s390/s390.c (optimization_options): Fix and move the\n\tflag_prefetch_loop_arrays override ...\n\t(override_options): ... here.\n\nFrom-SVN: r159822", "tree": {"sha": "ff86677b132312265ae0be35db462aad4a72b760", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff86677b132312265ae0be35db462aad4a72b760"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca1930ce8b3dfa6965b2c6991232139e43420dab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca1930ce8b3dfa6965b2c6991232139e43420dab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca1930ce8b3dfa6965b2c6991232139e43420dab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca1930ce8b3dfa6965b2c6991232139e43420dab/comments", "author": null, "committer": null, "parents": [{"sha": "076a7055bbc9d840bf675beae019246ef7a93f3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/076a7055bbc9d840bf675beae019246ef7a93f3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/076a7055bbc9d840bf675beae019246ef7a93f3e"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "1edcb62c9f02366716a16de8808cc1679c8152ff", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca1930ce8b3dfa6965b2c6991232139e43420dab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca1930ce8b3dfa6965b2c6991232139e43420dab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca1930ce8b3dfa6965b2c6991232139e43420dab", "patch": "@@ -1,3 +1,9 @@\n+2010-05-25  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* config/s390/s390.c (optimization_options): Fix and move the\n+\tflag_prefetch_loop_arrays override ...\n+\t(override_options): ... here.\n+\n 2010-05-25  Joseph Myers  <joseph@codesourcery.com>\n \n \t* diagnostic.c: Don't include plugin.h."}, {"sha": "2972545eac2ab722f8c792ccf1c4338980923967", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca1930ce8b3dfa6965b2c6991232139e43420dab/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca1930ce8b3dfa6965b2c6991232139e43420dab/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=ca1930ce8b3dfa6965b2c6991232139e43420dab", "patch": "@@ -1474,9 +1474,6 @@ optimization_options (int level ATTRIBUTE_UNUSED, int size ATTRIBUTE_UNUSED)\n      without maintaining a stack frame back-chain.  */\n   flag_asynchronous_unwind_tables = 1;\n \n-  if (HAVE_prefetch || optimize >= 3)\n-      flag_prefetch_loop_arrays = 1;\n-\n   /* Use MVCLE instructions to decrease code size if requested.  */\n   if (size != 0)\n     target_flags |= MASK_MVCLE;\n@@ -1676,6 +1673,11 @@ override_options (void)\n     set_param_value (\"prefetch-min-insn-to-mem-ratio\", 2);\n   if (!PARAM_SET_P (PARAM_SIMULTANEOUS_PREFETCHES))\n     set_param_value (\"simultaneous-prefetches\", 6);\n+\n+  /* This cannot reside in optimization_options since HAVE_prefetch\n+     requires the arch flags to be evaluated already.  */\n+  if (HAVE_prefetch && optimize >= 3)\n+    flag_prefetch_loop_arrays = 1;\n }\n \n /* Map for smallest class containing reg regno.  */"}]}