{"sha": "83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODNhYTczZTdmOGVlMjM3MjZjMmRhNGMyYjBiNzgwNWZmNTI0ZGNkOQ==", "commit": {"author": {"name": "Alessandro Fanfarillo", "email": "fanfarillo.gcc@gmail.com", "date": "2016-02-27T11:57:16Z"}, "committer": {"name": "Alessandro Fanfarillo", "email": "afanfa@gcc.gnu.org", "date": "2016-02-27T11:57:16Z"}, "message": "Right size for events\n\nFrom-SVN: r233779", "tree": {"sha": "07c158d42233921a9f190d43a9742094ba449fff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/07c158d42233921a9f190d43a9742094ba449fff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9/comments", "author": null, "committer": null, "parents": [{"sha": "bd522678f0bb10849e24c10391d8a244b5098815", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd522678f0bb10849e24c10391d8a244b5098815", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd522678f0bb10849e24c10391d8a244b5098815"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "5f1bc4f497f4eb3868f9a4130d6820fc31a7611b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9", "patch": "@@ -1,3 +1,10 @@\n+2016-02-27  Alessandro Fanfarillo  <fanfarillo.gcc@gmail.com>\n+\n+\t* trans.c (gfc_allocate_allocatable): size conversion\n+\tfrom byte to number of elements for event variables.\n+\t* trans-types.c (gfc_get_derived_type): event variables\n+\trepresented as a pointer (like lock variable).\n+\n 2016-02-23  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/61156"}, {"sha": "a71cf0bcd27a0346f3f8b7bf9436849e4bbbaa4a", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9", "patch": "@@ -2370,7 +2370,8 @@ gfc_get_derived_type (gfc_symbol * derived)\n   if (derived->attr.unlimited_polymorphic\n       || (flag_coarray == GFC_FCOARRAY_LIB\n \t  && derived->from_intmod == INTMOD_ISO_FORTRAN_ENV\n-\t  && derived->intmod_sym_id == ISOFORTRAN_LOCK_TYPE))\n+\t  && (derived->intmod_sym_id == ISOFORTRAN_LOCK_TYPE\n+\t      || derived->intmod_sym_id == ISOFORTRAN_EVENT_TYPE)))\n     return ptr_type_node;\n \n   if (flag_coarray != GFC_FCOARRAY_LIB"}, {"sha": "c6688d351a790e76b37aa5c359cdfeccd842ef5d", "filename": "gcc/fortran/trans.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9/gcc%2Ffortran%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9/gcc%2Ffortran%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans.c?ref=83aa73e7f8ee23726c2da4c2b0b7805ff524dcd9", "patch": "@@ -820,7 +820,7 @@ gfc_allocate_allocatable (stmtblock_t * block, tree mem, tree size, tree token,\n \t the FE only passes the pointer around and leaves the actual\n \t representation to the library. Hence, we have to convert back to the\n \t number of elements.  */\n-      if (lock_var)\n+      if (lock_var || event_var)\n \tsize = fold_build2_loc (input_location, TRUNC_DIV_EXPR, size_type_node,\n \t\t\t\tsize, TYPE_SIZE_UNIT (ptr_type_node));\n "}]}