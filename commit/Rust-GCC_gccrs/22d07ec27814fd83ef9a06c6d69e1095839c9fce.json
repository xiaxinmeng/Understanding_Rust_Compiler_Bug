{"sha": "22d07ec27814fd83ef9a06c6d69e1095839c9fce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJkMDdlYzI3ODE0ZmQ4M2VmOWEwNmM2ZDY5ZTEwOTU4MzljOWZjZQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2017-09-15T07:26:14Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2017-09-15T07:26:14Z"}, "message": "re PR fortran/82184 (187.facerec in SPEC CPU 2000 miscompares)\n\n2017-09-15  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/82184\n\ttrans-decl.c (gfc_trans_deferred_vars): Do not null the 'span'\n\tfield if the symbol is either implicitly or explicitly saved.\n\n\n2017-09-15  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/82184\n\t* gfortran.dg/pointer_array_9.f90: New test.\n\nFrom-SVN: r252781", "tree": {"sha": "b35a948f728e4b919d3c6d6417522b421d17b853", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b35a948f728e4b919d3c6d6417522b421d17b853"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22d07ec27814fd83ef9a06c6d69e1095839c9fce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22d07ec27814fd83ef9a06c6d69e1095839c9fce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22d07ec27814fd83ef9a06c6d69e1095839c9fce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22d07ec27814fd83ef9a06c6d69e1095839c9fce/comments", "author": null, "committer": null, "parents": [{"sha": "b6ab6ef81c11e2353f7ef7b771e4aca774f1be68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6ab6ef81c11e2353f7ef7b771e4aca774f1be68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6ab6ef81c11e2353f7ef7b771e4aca774f1be68"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "8bdd6357af143a98ef734be18265ef000d2d2d4b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=22d07ec27814fd83ef9a06c6d69e1095839c9fce", "patch": "@@ -1,3 +1,9 @@\n+2017-09-15  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/82184\n+\ttrans-decl.c (gfc_trans_deferred_vars): Do not null the 'span'\n+\tfield if the symbol is either implicitly or explicitly saved.\n+\n 2017-09-13  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/82173"}, {"sha": "d227d519c63c66fab01a9a319a5c43300c47cf64", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=22d07ec27814fd83ef9a06c6d69e1095839c9fce", "patch": "@@ -4342,6 +4342,7 @@ gfc_trans_deferred_vars (gfc_symbol * proc_sym, gfc_wrapped_block * block)\n \t}\n \n       if (sym->attr.pointer && sym->attr.dimension\n+\t  && sym->attr.save == SAVE_NONE\n \t  && !sym->attr.use_assoc\n \t  && !sym->attr.host_assoc\n \t  && !sym->attr.dummy"}, {"sha": "d98cdbf33cb54563805c795710b07a758ff9a055", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=22d07ec27814fd83ef9a06c6d69e1095839c9fce", "patch": "@@ -1,3 +1,8 @@\n+2017-09-15  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/82184\n+\t* gfortran.dg/pointer_array_9.f90: New test.\n+\n 2017-09-14  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \t* gcc.target/powerpc/abs128-1.c: Use __builtin_fabsf128 instead of"}, {"sha": "a54a2b54f2192ef3288a2bf177bbefa52368fec7", "filename": "gcc/testsuite/gfortran.dg/pointer_array_9.f90", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_array_9.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22d07ec27814fd83ef9a06c6d69e1095839c9fce/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_array_9.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpointer_array_9.f90?ref=22d07ec27814fd83ef9a06c6d69e1095839c9fce", "patch": "@@ -0,0 +1,23 @@\n+! { dg-do run }\n+!\n+! Tests fix for PR82184\n+!\n+! Contributed by Andrey Guskov  <andrey.y.guskov@intel.com)\n+!\n+program r187\n+  call s()\n+  call s()\n+contains\n+  subroutine s()\n+    complex(4), allocatable, save :: a(:, :)\n+    complex(4), pointer,     save :: b(:, :)\n+    if (.not. associated(b)) then\n+      allocate(a(2, 2))\n+      allocate(b(2, 2))\n+      a = reshape ([cmplx(1, 1), cmplx(2, 2), cmplx(1, 2), cmplx(2, 1)], [2,2])\n+    else\n+      b = transpose(a)\n+      if (merge(\"PASSED\", \"FAILED\", all (transpose (a) .eq. b)) .eq. \"FAILED\") call abort\n+    end if\n+  end subroutine s\n+end program r187"}]}