{"sha": "f8af8c09eccb9b1c824a7c2ab53dcd0c99352029", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjhhZjhjMDllY2NiOWIxYzgyNGE3YzJhYjUzZGNkMGM5OTM1MjAyOQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2008-05-31T23:01:09Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-05-31T23:01:09Z"}, "message": "re PR libstdc++/36338 (heap_sort effectively hangs with -D_GLIBCXX_DEBUG)\n\n2008-05-31  Paolo Carlini  <paolo.carlini@oracle.com>\n\t    Chris Jefferson  <chris@bubblescope.net>\n\n\tPR libstdc++/36338\n\t* include/bits/stl_heap.h (sort_heap): Use __pop_heap directly.\n\t(pop_heap): Slightly tweak.\n\nCo-Authored-By: Chris Jefferson <chris@bubblescope.net>\n\nFrom-SVN: r136242", "tree": {"sha": "a1930641e70d9ae196c1dd45fcad3362613d7091", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a1930641e70d9ae196c1dd45fcad3362613d7091"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029/comments", "author": null, "committer": null, "parents": [{"sha": "7306494a7e4a2dfd05dc3c2a51ac8f29d1fad207", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7306494a7e4a2dfd05dc3c2a51ac8f29d1fad207", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7306494a7e4a2dfd05dc3c2a51ac8f29d1fad207"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "614d54c22e87f0b7f8331d6a7a9c4d056050842f", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=f8af8c09eccb9b1c824a7c2ab53dcd0c99352029", "patch": "@@ -1,3 +1,10 @@\n+2008-05-31  Paolo Carlini  <paolo.carlini@oracle.com>\n+\t    Chris Jefferson  <chris@bubblescope.net>\n+\n+\tPR libstdc++/36338\n+\t* include/bits/stl_heap.h (sort_heap): Use __pop_heap directly.\n+\t(pop_heap): Slightly tweak.\n+\n 2008-05-29  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* include/debug/bitset (bitset(const char*)): Implement DR 778"}, {"sha": "4deafd2f4c708fbad08e3f741507fc8d2899a708", "filename": "libstdc++-v3/include/bits/stl_heap.h", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_heap.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8af8c09eccb9b1c824a7c2ab53dcd0c99352029/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_heap.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_heap.h?ref=f8af8c09eccb9b1c824a7c2ab53dcd0c99352029", "patch": "@@ -1,6 +1,6 @@\n // Heap implementation -*- C++ -*-\n \n-// Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007\n+// Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -285,7 +285,8 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       __glibcxx_requires_valid_range(__first, __last);\n       __glibcxx_requires_heap(__first, __last);\n \n-      std::__pop_heap(__first, __last - 1, __last - 1);\n+      --__last;\n+      std::__pop_heap(__first, __last, __last);\n     }\n \n   template<typename _RandomAccessIterator, typename _Distance,\n@@ -355,7 +356,8 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       __glibcxx_requires_valid_range(__first, __last);\n       __glibcxx_requires_heap_pred(__first, __last, __comp);\n \n-      std::__pop_heap(__first, __last - 1, __last - 1, __comp);\n+      --__last;\n+      std::__pop_heap(__first, __last, __last, __comp);\n     }\n \n   /**\n@@ -458,7 +460,10 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       __glibcxx_requires_heap(__first, __last);\n \n       while (__last - __first > 1)\n-\tstd::pop_heap(__first, _RandomAccessIterator(__last--));\n+\t{\n+\t  --__last;\n+\t  std::__pop_heap(__first, __last, __last);\n+\t}\n     }\n \n   /**\n@@ -483,7 +488,10 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n       __glibcxx_requires_heap_pred(__first, __last, __comp);\n \n       while (__last - __first > 1)\n-\tstd::pop_heap(__first, _RandomAccessIterator(__last--), __comp);\n+\t{\n+\t  --__last;\n+\t  std::__pop_heap(__first, __last, __last, __comp);\n+\t}\n     }\n \n #ifdef __GXX_EXPERIMENTAL_CXX0X__"}]}