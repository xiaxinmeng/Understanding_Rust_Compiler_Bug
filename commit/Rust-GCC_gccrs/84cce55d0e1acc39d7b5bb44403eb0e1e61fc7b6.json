{"sha": "84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRjY2U1NWQwZTFhY2MzOWQ3YjViYjQ0NDAzZWIwZTFlNjFmYzdiNg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-09-13T02:28:19Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-09-13T02:28:19Z"}, "message": "re PR tree-optimization/10528 (Unexpected loop un-optimization when removing a field of a class)\n\n        PR tree-opt/10528\n        * tree-inline.c (copy_body_r): Recompute bits for ADDR_EXPR,\n        after copying its argument.\n\nFrom-SVN: r87423", "tree": {"sha": "efa4c7cf22e184883607e95aae594bdc7e8b1fa1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/efa4c7cf22e184883607e95aae594bdc7e8b1fa1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6/comments", "author": null, "committer": null, "parents": [{"sha": "40b7c2f8d2a28381db12d703dc628fda304a1b89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40b7c2f8d2a28381db12d703dc628fda304a1b89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40b7c2f8d2a28381db12d703dc628fda304a1b89"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "ce26d86ad264598e088e1c933add1a5373ae24de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6", "patch": "@@ -1,3 +1,9 @@\n+2004-09-13  Richard Henderson  <rth@redhat.com>\n+\n+\tPR tree-opt/10528\n+\t* tree-inline.c (copy_body_r): Recompute bits for ADDR_EXPR,\n+\tafter copying its argument.\n+\n 2004-09-13  Joseph S. Myers  <jsm@polyomino.org.uk>\n \n \t* c-common.c, c-decl.c, c-lex.c, c-objc-common.c, c-opts.c,"}, {"sha": "82b7857cb1b256fff04fa7bd62842caea9f1f2d6", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=84cce55d0e1acc39d7b5bb44403eb0e1e61fc7b6", "patch": "@@ -619,6 +619,16 @@ copy_body_r (tree *tp, int *walk_subtrees, void *data)\n \t  TREE_OPERAND (*tp, 1) = TREE_OPERAND (*tp, 3);\n \t  TREE_OPERAND (*tp, 3) = NULL_TREE;\n \t}\n+\n+      /* Variable substitution need not be simple.  In particular, the\n+\t INDIRECT_REF substitution above.  Make sure that TREE_CONSTANT\n+\t and friends are up-to-date.  */\n+      else if (TREE_CODE (*tp) == ADDR_EXPR)\n+\t{\n+\t  walk_tree (&TREE_OPERAND (*tp, 0), copy_body_r, id, NULL);\n+\t  recompute_tree_invarant_for_addr_expr (*tp);\n+\t  *walk_subtrees = 0;\n+\t}\n     }\n \n   /* Keep iterating.  */"}]}