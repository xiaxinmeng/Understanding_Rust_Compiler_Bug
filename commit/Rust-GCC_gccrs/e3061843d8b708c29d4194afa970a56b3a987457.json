{"sha": "e3061843d8b708c29d4194afa970a56b3a987457", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTMwNjE4NDNkOGI3MDhjMjlkNDE5NGFmYTk3MGE1NmIzYTk4NzQ1Nw==", "commit": {"author": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-07-05T09:04:44Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-07-05T09:04:44Z"}, "message": "tree-cfg.c (verify_gimple_return): Handle DECL_BY_REFERENCE RESULT_DECLs properly.\n\n2010-07-05  Richard Guenther  <rguenther@suse.de>\n\n\t* tree-cfg.c (verify_gimple_return): Handle DECL_BY_REFERENCE\n\tRESULT_DECLs properly.\n\nFrom-SVN: r161821", "tree": {"sha": "59850848c5abef9945446e189f590380583debc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59850848c5abef9945446e189f590380583debc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3061843d8b708c29d4194afa970a56b3a987457", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3061843d8b708c29d4194afa970a56b3a987457", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3061843d8b708c29d4194afa970a56b3a987457", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3061843d8b708c29d4194afa970a56b3a987457/comments", "author": null, "committer": null, "parents": [{"sha": "5bb120900a7cdb113b00ccfac46714c553d8f4fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bb120900a7cdb113b00ccfac46714c553d8f4fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bb120900a7cdb113b00ccfac46714c553d8f4fc"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "09e8deec6480058c72febd0642f8275f57788c02", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3061843d8b708c29d4194afa970a56b3a987457/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3061843d8b708c29d4194afa970a56b3a987457/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e3061843d8b708c29d4194afa970a56b3a987457", "patch": "@@ -1,3 +1,8 @@\n+2010-07-05  Richard Guenther  <rguenther@suse.de>\n+\n+\t* tree-cfg.c (verify_gimple_return): Handle DECL_BY_REFERENCE\n+\tRESULT_DECLs properly.\n+\n 2010-07-04  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR rtl-optimization/44695\n@@ -15,8 +20,8 @@\n \n 2010-07-04  Jan Hubicka  <jh@suse.cz>\n \n-        * cgraphunit.c (init_cgraph): Only initialize dump file if it is not already\n-        initialized.\n+        * cgraphunit.c (init_cgraph): Only initialize dump file if it is not\n+\talready initialized.\n \n 2010-07-04  Richard Sandiford  <rdsandiford@googlemail.com>\n "}, {"sha": "448e2752259b15be7125a1315f1fcede89689d3f", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3061843d8b708c29d4194afa970a56b3a987457/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3061843d8b708c29d4194afa970a56b3a987457/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=e3061843d8b708c29d4194afa970a56b3a987457", "patch": "@@ -3826,12 +3826,14 @@ verify_gimple_return (gimple stmt)\n       return true;\n     }\n \n-  if (!useless_type_conversion_p (restype, TREE_TYPE (op))\n-      /* ???  With C++ we can have the situation that the result\n-\t decl is a reference type while the return type is an aggregate.  */\n-      && !(TREE_CODE (op) == RESULT_DECL\n-\t   && TREE_CODE (TREE_TYPE (op)) == REFERENCE_TYPE\n-\t   && useless_type_conversion_p (restype, TREE_TYPE (TREE_TYPE (op)))))\n+  if ((TREE_CODE (op) == RESULT_DECL\n+       && DECL_BY_REFERENCE (op))\n+      || (TREE_CODE (op) == SSA_NAME\n+\t  && TREE_CODE (SSA_NAME_VAR (op)) == RESULT_DECL\n+\t  && DECL_BY_REFERENCE (SSA_NAME_VAR (op))))\n+    op = TREE_TYPE (op);\n+\n+  if (!useless_type_conversion_p (restype, TREE_TYPE (op)))\n     {\n       error (\"invalid conversion in return statement\");\n       debug_generic_stmt (restype);"}]}