{"sha": "343fb4120866d610c7e233f19dfcf2b3322774ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzQzZmI0MTIwODY2ZDYxMGM3ZTIzM2YxOWRmY2YyYjMzMjI3NzRjYQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2001-11-03T15:33:45Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-11-03T15:33:45Z"}, "message": "builtins.c (get_memory_rtx): Properly set MEM alias set and attributes.\n\n\t* builtins.c (get_memory_rtx): Properly set MEM alias set and\n\tattributes.\n\nFrom-SVN: r46732", "tree": {"sha": "a54d651a7abdfb3792acc32dcad3d2b1c8a9b462", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a54d651a7abdfb3792acc32dcad3d2b1c8a9b462"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/343fb4120866d610c7e233f19dfcf2b3322774ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/343fb4120866d610c7e233f19dfcf2b3322774ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/343fb4120866d610c7e233f19dfcf2b3322774ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/343fb4120866d610c7e233f19dfcf2b3322774ca/comments", "author": null, "committer": null, "parents": [{"sha": "13ba36b478bfdfe2881bdc4a83c2caf2fd26fbd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13ba36b478bfdfe2881bdc4a83c2caf2fd26fbd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13ba36b478bfdfe2881bdc4a83c2caf2fd26fbd2"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "de15b86295fb0e8986c9679b45a1ac0d95cb665e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343fb4120866d610c7e233f19dfcf2b3322774ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343fb4120866d610c7e233f19dfcf2b3322774ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=343fb4120866d610c7e233f19dfcf2b3322774ca", "patch": "@@ -1,3 +1,8 @@\n+Sat Nov  3 10:37:56 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* builtins.c (get_memory_rtx): Properly set MEM alias set and\n+\tattributes.\n+\n 2001-11-03  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* doc/extend.texi, doc/gcc.texi, doc/install.texi, doc/tm.texi:"}, {"sha": "ca7eb667b1da203c18ff4d20348cd5cf221043a9", "filename": "gcc/builtins.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/343fb4120866d610c7e233f19dfcf2b3322774ca/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/343fb4120866d610c7e233f19dfcf2b3322774ca/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=343fb4120866d610c7e233f19dfcf2b3322774ca", "patch": "@@ -731,7 +731,6 @@ get_memory_rtx (exp)\n #endif\n \n   mem = gen_rtx_MEM (BLKmode, memory_address (BLKmode, addr));\n-  set_mem_attributes (mem, exp, 0);\n \n   /* Get an expression we can use to find the attributes to assign to MEM.\n      If it is an ADDR_EXPR, use the operand.  Otherwise, dereference it if\n@@ -742,14 +741,17 @@ get_memory_rtx (exp)\n     exp = TREE_OPERAND (exp, 0);\n \n   if (TREE_CODE (exp) == ADDR_EXPR)\n-    exp = TREE_OPERAND (exp, 0);\n+    {\n+      exp = TREE_OPERAND (exp, 0);\n+      set_mem_attributes (mem, exp, 0);\n+    }\n   else if (POINTER_TYPE_P (TREE_TYPE (exp)))\n-    exp = build1 (INDIRECT_REF, TREE_TYPE (TREE_TYPE (exp)), exp);\n-  else\n-    return mem;\n+    {\n+      exp = build1 (INDIRECT_REF, TREE_TYPE (TREE_TYPE (exp)), exp);\n+      /* memcpy, memset and other builtin stringops can alias with anything.  */\n+      set_mem_alias_set (mem, 0);\n+    }\n \n-  /* memcpy, memset and other builtin stringops can alias with anything.  */\n-  set_mem_alias_set (mem, 0);\n   return mem;\n }\n \f"}]}