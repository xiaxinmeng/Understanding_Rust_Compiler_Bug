{"sha": "a5cfa13ab9ef5b9a740129fca6b73acea436c493", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVjZmExM2FiOWVmNWI5YTc0MDEyOWZjYTZiNzNhY2VhNDM2YzQ5Mw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2017-05-29T16:50:41Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2017-05-29T16:50:41Z"}, "message": "PR c++/80891 (#4)\n\n\tPR c++/80891 (#4)\n\t* ptree.c (cxx_print_xnode): Show internal OVERLOAD structure.\n\t* tree.c (ovl_insert, ovl_iterator_remove_node): Fix copying\n\tassert.\n\n\tPR c++/80891 (#4)\n\t* g++.dg/lookup/pr80891-4.C: New.\n\nFrom-SVN: r248576", "tree": {"sha": "2fc8718059ccf433205f8e19102a61ef691a7320", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fc8718059ccf433205f8e19102a61ef691a7320"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5cfa13ab9ef5b9a740129fca6b73acea436c493", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5cfa13ab9ef5b9a740129fca6b73acea436c493", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5cfa13ab9ef5b9a740129fca6b73acea436c493", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5cfa13ab9ef5b9a740129fca6b73acea436c493/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3c9cca8848a19225074fbdbe597b889ab00114d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c9cca8848a19225074fbdbe597b889ab00114d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c9cca8848a19225074fbdbe597b889ab00114d8"}], "stats": {"total": 31, "additions": 24, "deletions": 7}, "files": [{"sha": "faae715de4a0471502ca76f61206198040d44e3f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a5cfa13ab9ef5b9a740129fca6b73acea436c493", "patch": "@@ -1,5 +1,9 @@\n 2017-05-29  Nathan Sidwell  <nathan@acm.org>\n \n+\tPR c++/80891 (#4)\n+\t* ptree.c (cxx_print_xnode): Show internal OVERLOAD structure.\n+\t* tree.c (ovl_insert, ovl_iterator_remove_node): Fix copying assert.\n+\n \tStat hack representation\n \t* name-lookup.c (STAT_HACK_P, STAT_TYPE, STAT_DECL,\n \tMAYBE_STAT_DECL, MAYBE_STAT_TYPE): New."}, {"sha": "f8e879ef65672ff83b7eb9e1d7771ebd908fdfcb", "filename": "gcc/cp/ptree.c", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Fcp%2Fptree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Fcp%2Fptree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fptree.c?ref=a5cfa13ab9ef5b9a740129fca6b73acea436c493", "patch": "@@ -236,11 +236,8 @@ cxx_print_xnode (FILE *file, tree node, int indent)\n \t\t  indent + 4);\n       break;\n     case OVERLOAD:\n-      print_node (file, \"name\", OVL_NAME (node), indent+4);\n-      for (ovl_iterator iter (node, true); iter; ++iter)\n-\tprint_node (file,\n-\t\t    TREE_CODE (*iter) == OVERLOAD ? \"inner\" : \"function\",\n-\t\t    *iter, indent+4);\n+      print_node (file, \"function\", OVL_FUNCTION (node), indent+4);\n+      print_node (file, \"next\", OVL_CHAIN (node), indent+4);\n       break;\n     case TEMPLATE_PARM_INDEX:\n       print_node (file, \"decl\", TEMPLATE_PARM_DECL (node), indent+4);"}, {"sha": "411c9f3b18083db1f41337dd272f0534bde2bb2e", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=a5cfa13ab9ef5b9a740129fca6b73acea436c493", "patch": "@@ -2170,7 +2170,7 @@ ovl_insert (tree fn, tree maybe_ovl, bool using_p)\n \t\t       | (OVL_USING_P (maybe_ovl) << 0))))\n     {\n       gcc_checking_assert (!OVL_LOOKUP_P (maybe_ovl)\n-\t\t\t   && (!OVL_USED_P (maybe_ovl) || !copying));\n+\t\t\t   && (!copying || OVL_USED_P (maybe_ovl)));\n       if (OVL_USED_P (maybe_ovl))\n \t{\n \t  copying = true;\n@@ -2264,7 +2264,7 @@ ovl_iterator::remove_node (tree overload, tree node)\n     {\n       tree probe = *slot;\n       gcc_checking_assert (!OVL_LOOKUP_P (probe)\n-\t\t\t   && (!OVL_USED_P (probe) || !copying));\n+\t\t\t   && (!copying || OVL_USED_P (probe)));\n       if (OVL_USED_P (probe))\n \t{\n \t  copying = true;"}, {"sha": "4eb53a7ce1b8c70bcd43bb8befe73f170ac55328", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a5cfa13ab9ef5b9a740129fca6b73acea436c493", "patch": "@@ -1,5 +1,8 @@\n 2017-05-29  Nathan Sidwell  <nathan@acm.org>\n \n+\tPR c++/80891 (#4)\n+\t* g++.dg/lookup/pr80891-4.C: New.\n+\n \tPR c++/80891 (#1)\n \t* g++.dg/lookup/pr80891-1.C: New.\n "}, {"sha": "d536613496628e667b079d99a72915bf85245f0b", "filename": "gcc/testsuite/g++.dg/lookup/pr80891-4.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fpr80891-4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5cfa13ab9ef5b9a740129fca6b73acea436c493/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fpr80891-4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fpr80891-4.C?ref=a5cfa13ab9ef5b9a740129fca6b73acea436c493", "patch": "@@ -0,0 +1,13 @@\n+// PR c++/80891 part 4\n+// Inserting into an immutable overload set\n+\n+namespace tuples {\n+template <class, class> void get();\n+template <int> void get();\n+}\n+using tuples::get;\n+template <class RandomAccessIterator> void make_iterator_vertex_map() {\n+  RandomAccessIterator a;\n+  a, get;\n+}\n+template <class> void get();"}]}