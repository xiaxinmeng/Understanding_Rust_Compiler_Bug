{"sha": "2c68ba8ee709e39df8cd03ecea9af1f463065f9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM2OGJhOGVlNzA5ZTM5ZGY4Y2QwM2VjZWE5YWYxZjQ2MzA2NWY5ZQ==", "commit": {"author": {"name": "Laurynas Biveinis", "email": "laurynas.biveinis@gmail.com", "date": "2008-06-22T15:28:04Z"}, "committer": {"name": "Laurynas Biveinis", "email": "lauras@gcc.gnu.org", "date": "2008-06-22T15:28:04Z"}, "message": "re PR middle-end/34906 (valgrind error indication from testsuite gimplify.c: gimplify_asm_expr)\n\n2008-06-22  Laurynas Biveinis  <laurynas.biveinis@gmail.com>\n\n\tPR middle-end/34906\n\t* gimplify.c (gimplify_asm_expr): Check the return code of\n\tparse_output_constraint call, set function return and is_inout\n\tvalue if it failed.\n\nFrom-SVN: r137020", "tree": {"sha": "6cfa632a138684ffc45a8c9b6f1b01f69fa6780b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6cfa632a138684ffc45a8c9b6f1b01f69fa6780b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c68ba8ee709e39df8cd03ecea9af1f463065f9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c68ba8ee709e39df8cd03ecea9af1f463065f9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c68ba8ee709e39df8cd03ecea9af1f463065f9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c68ba8ee709e39df8cd03ecea9af1f463065f9e/comments", "author": {"login": "laurynas-biveinis", "id": 58894, "node_id": "MDQ6VXNlcjU4ODk0", "avatar_url": "https://avatars.githubusercontent.com/u/58894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laurynas-biveinis", "html_url": "https://github.com/laurynas-biveinis", "followers_url": "https://api.github.com/users/laurynas-biveinis/followers", "following_url": "https://api.github.com/users/laurynas-biveinis/following{/other_user}", "gists_url": "https://api.github.com/users/laurynas-biveinis/gists{/gist_id}", "starred_url": "https://api.github.com/users/laurynas-biveinis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laurynas-biveinis/subscriptions", "organizations_url": "https://api.github.com/users/laurynas-biveinis/orgs", "repos_url": "https://api.github.com/users/laurynas-biveinis/repos", "events_url": "https://api.github.com/users/laurynas-biveinis/events{/privacy}", "received_events_url": "https://api.github.com/users/laurynas-biveinis/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d75d71e0acaac3a1d67061ca26fdabd05d6a3295", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d75d71e0acaac3a1d67061ca26fdabd05d6a3295", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d75d71e0acaac3a1d67061ca26fdabd05d6a3295"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "c3f003bf47d542c6685125db1eaeb27af91e3491", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c68ba8ee709e39df8cd03ecea9af1f463065f9e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c68ba8ee709e39df8cd03ecea9af1f463065f9e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c68ba8ee709e39df8cd03ecea9af1f463065f9e", "patch": "@@ -1,3 +1,10 @@\n+2008-06-22  Laurynas Biveinis  <laurynas.biveinis@gmail.com>\n+\n+\tPR middle-end/34906\n+\t* gimplify.c (gimplify_asm_expr): Check the return code of\n+\tparse_output_constraint call, set function return and is_inout\n+\tvalue if it failed.\n+\n 2008-06-22  Ian Lance Taylor  <iant@google.com>\n \n \t* c-lex.c (narrowest_unsigned_type): Change itk to int."}, {"sha": "bf81bb0c09a0d494d7ff36e6d8ffe6221fb4b41c", "filename": "gcc/gimplify.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c68ba8ee709e39df8cd03ecea9af1f463065f9e/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c68ba8ee709e39df8cd03ecea9af1f463065f9e/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=2c68ba8ee709e39df8cd03ecea9af1f463065f9e", "patch": "@@ -4308,14 +4308,20 @@ gimplify_asm_expr (tree *expr_p, tree *pre_p, tree *post_p)\n   for (i = 0, link = ASM_OUTPUTS (expr); link; ++i, link = TREE_CHAIN (link))\n     {\n       size_t constraint_len;\n+      bool ok;\n       oconstraints[i] = constraint\n \t= TREE_STRING_POINTER (TREE_VALUE (TREE_PURPOSE (link)));\n       constraint_len = strlen (constraint);\n       if (constraint_len == 0)\n         continue;\n \n-      parse_output_constraint (&constraint, i, 0, 0,\n-\t\t\t       &allows_mem, &allows_reg, &is_inout);\n+      ok = parse_output_constraint (&constraint, i, 0, 0,\n+\t\t\t\t    &allows_mem, &allows_reg, &is_inout);\n+      if (!ok)\n+\t{\n+\t  ret = GS_ERROR;\n+\t  is_inout = false;\n+\t}\n \n       if (!allows_reg && allows_mem)\n \tmark_addressable (TREE_VALUE (link));"}]}