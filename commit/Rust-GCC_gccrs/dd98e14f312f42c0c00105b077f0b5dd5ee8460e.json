{"sha": "dd98e14f312f42c0c00105b077f0b5dd5ee8460e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ5OGUxNGYzMTJmNDJjMGMwMDEwNWIwNzdmMGI1ZGQ1ZWU4NDYwZQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2002-08-04T14:43:46Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2002-08-04T14:43:46Z"}, "message": "cp-tree.h (VF_DERIVED_VALUE): Remove.\n\n\t* cp-tree.h (VF_DERIVED_VALUE): Remove.\n\t* class.c (finish_struct_1): Use VF_BINFO_VALUE not VF_DERIVED_VALUE.\n\nFrom-SVN: r56023", "tree": {"sha": "54a07e1a0fa5c54d93ef982a99d4ad496b14b440", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54a07e1a0fa5c54d93ef982a99d4ad496b14b440"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd98e14f312f42c0c00105b077f0b5dd5ee8460e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd98e14f312f42c0c00105b077f0b5dd5ee8460e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd98e14f312f42c0c00105b077f0b5dd5ee8460e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd98e14f312f42c0c00105b077f0b5dd5ee8460e/comments", "author": null, "committer": null, "parents": [{"sha": "04c1334cba6f0cf25e434f1b548c07f4a236140f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04c1334cba6f0cf25e434f1b548c07f4a236140f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04c1334cba6f0cf25e434f1b548c07f4a236140f"}], "stats": {"total": 26, "additions": 13, "deletions": 13}, "files": [{"sha": "ee0a612c1b37b113174edd8df4dfd4cbacc870ff", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd98e14f312f42c0c00105b077f0b5dd5ee8460e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd98e14f312f42c0c00105b077f0b5dd5ee8460e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=dd98e14f312f42c0c00105b077f0b5dd5ee8460e", "patch": "@@ -1,3 +1,8 @@\n+2002-08-04  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* cp-tree.h (VF_DERIVED_VALUE): Remove.\n+\t* class.c (finish_struct_1): Use VF_BINFO_VALUE not VF_DERIVED_VALUE.\n+\n 2002-08-03  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR 7470."}, {"sha": "7129308059a11c7ad7e9ce1c82e501c527c4d361", "filename": "gcc/cp/class.c", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd98e14f312f42c0c00105b077f0b5dd5ee8460e/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd98e14f312f42c0c00105b077f0b5dd5ee8460e/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=dd98e14f312f42c0c00105b077f0b5dd5ee8460e", "patch": "@@ -5120,15 +5120,13 @@ finish_struct_1 (t)\n     {\n       tree vfields = CLASSTYPE_VFIELDS (t);\n \n-      while (vfields)\n-\t{\n-\t  /* Mark the fact that constructor for T\n-\t     could affect anybody inheriting from T\n-\t     who wants to initialize vtables for VFIELDS's type.  */\n-\t  if (VF_DERIVED_VALUE (vfields))\n-\t    TREE_ADDRESSABLE (vfields) = 1;\n-\t  vfields = TREE_CHAIN (vfields);\n-\t}\n+      for (vfields = CLASSTYPE_VFIELDS (t);\n+\t   vfields; vfields = TREE_CHAIN (vfields))\n+\t/* Mark the fact that constructor for T could affect anybody\n+\t   inheriting from T who wants to initialize vtables for\n+\t   VFIELDS's type.  */\n+\tif (VF_BINFO_VALUE (vfields))\n+\t  TREE_ADDRESSABLE (vfields) = 1;\n     }\n \n   /* Make the rtl for any new vtables we have created, and unmark"}, {"sha": "5bdd4197fb622d7741f9c3904b0048adeeddd309", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd98e14f312f42c0c00105b077f0b5dd5ee8460e/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd98e14f312f42c0c00105b077f0b5dd5ee8460e/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=dd98e14f312f42c0c00105b077f0b5dd5ee8460e", "patch": "@@ -1620,8 +1620,6 @@ struct lang_type GTY(())\n #define VF_BASETYPE_VALUE(NODE) TREE_VALUE (NODE)\n \n /* Accessor macros for the BINFO_VIRTUALS list. */\n-#define VF_DERIVED_VALUE(NODE) \\\n-   (VF_BINFO_VALUE (NODE) ? BINFO_TYPE (VF_BINFO_VALUE (NODE)) : NULL_TREE)\n \n /* The number of bytes by which to adjust the `this' pointer when\n    calling this virtual function.  Subtract this value from the this\n@@ -1637,8 +1635,7 @@ struct lang_type GTY(())\n #define BV_FN(NODE) (TREE_VALUE (NODE))\n \n /* Nonzero if we should use a virtual thunk for this entry.  */\n-#define BV_USE_VCALL_INDEX_P(NODE) \\\n-   (TREE_LANG_FLAG_0 (NODE))\n+#define BV_USE_VCALL_INDEX_P(NODE) (TREE_LANG_FLAG_0 (NODE))\n \f\n /* Nonzero for TREE_LIST node means that this list of things\n    is a list of parameters, as opposed to a list of expressions.  */"}]}