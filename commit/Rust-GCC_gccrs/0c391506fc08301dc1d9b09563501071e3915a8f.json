{"sha": "0c391506fc08301dc1d9b09563501071e3915a8f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGMzOTE1MDZmYzA4MzAxZGMxZDliMDk1NjM1MDEwNzFlMzkxNWE4Zg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2006-10-07T09:22:20Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2006-10-07T09:22:20Z"}, "message": "debug-1.c: Use -fno-if-conversion MIPS targets.\n\ngcc/testsuite/\n\t* gcc.dg/debug/debug-1.c: Use -fno-if-conversion MIPS targets.\n\t* gcc.dg/debug/debug-2.c: Likewise.\n\nFrom-SVN: r117530", "tree": {"sha": "0cce2ba10f4038ad464a20ba75101d60ffacb8d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0cce2ba10f4038ad464a20ba75101d60ffacb8d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c391506fc08301dc1d9b09563501071e3915a8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c391506fc08301dc1d9b09563501071e3915a8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c391506fc08301dc1d9b09563501071e3915a8f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c391506fc08301dc1d9b09563501071e3915a8f/comments", "author": null, "committer": null, "parents": [{"sha": "55ce980dc27b2fef4af65a4ec92b37c229585a82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55ce980dc27b2fef4af65a4ec92b37c229585a82", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55ce980dc27b2fef4af65a4ec92b37c229585a82"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "83be965f88d13d20bf2cd0d1045e78f23f4d3088", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c391506fc08301dc1d9b09563501071e3915a8f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c391506fc08301dc1d9b09563501071e3915a8f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0c391506fc08301dc1d9b09563501071e3915a8f", "patch": "@@ -1,3 +1,8 @@\n+2006-10-07  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* gcc.dg/debug/debug-1.c: Use -fno-if-conversion MIPS targets.\n+\t* gcc.dg/debug/debug-2.c: Likewise.\n+\n 2006-10-06  Uros Bizjak  <uros@kss-loka.si>\n \n \t* gcc.c-torture/compile/sync-2.c: New test."}, {"sha": "35b5c91b1f33ef5305b587fa033db327c6f11715", "filename": "gcc/testsuite/gcc.dg/debug/debug-1.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c391506fc08301dc1d9b09563501071e3915a8f/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdebug-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c391506fc08301dc1d9b09563501071e3915a8f/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdebug-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdebug-1.c?ref=0c391506fc08301dc1d9b09563501071e3915a8f", "patch": "@@ -1,6 +1,24 @@\n /* Verify that the scheduler does not discard the lexical block.  */\n /* { dg-do compile } */\n /* { dg-options \"-dA\" } */\n+/* On MIPS targets that support conditional moves, the optimal\n+   implementation of this function is:\n+\n+\tl[wd] tmp,p\n+\tli $2,2\n+\tjr $31\n+\tmovz $2,$0,tmp\n+\n+   After if-conversion, we have a conditional move into a pseudo P\n+   followed a copy of P into the return register ($2).  P is associated\n+   with xyzzy, so if-conversion is behaving as expected, and has not lost\n+   the variable association.  The destination of the second instruction\n+   is associated with the function return value.  Combine then combines\n+   these two instructions, removing the last use of P and xyzzy.\n+\n+   Everything is behaving as expected in this scenario, so we avoid\n+   using conditional moves for this test.  */\n+/* { dg-options \"-dA -fno-if-conversion\" { target mips*-*-* } } */\n /* { dg-final { scan-assembler \"xyzzy\" } } */\n \n long p;"}, {"sha": "1e86f2fc706172e03ff2e203209dfb97ab0645f1", "filename": "gcc/testsuite/gcc.dg/debug/debug-2.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c391506fc08301dc1d9b09563501071e3915a8f/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdebug-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c391506fc08301dc1d9b09563501071e3915a8f/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdebug-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdebug-2.c?ref=0c391506fc08301dc1d9b09563501071e3915a8f", "patch": "@@ -1,6 +1,8 @@\n /* Verify that the scheduler does not discard the lexical block.  */\n /* { dg-do compile } */\n /* { dg-options \"-dA\" } */\n+/* See the comment in debug-1.c.  */\n+/* { dg-options \"-dA -fno-if-conversion\" { target mips*-*-* } } */\n /* { dg-final { scan-assembler \"xyzzy\" } } */\n \n long p;"}]}