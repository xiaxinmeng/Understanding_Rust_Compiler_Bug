{"sha": "3326f4101aab4be3befedda3eb52a7d58746aa97", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzMyNmY0MTAxYWFiNGJlM2JlZmVkZGEzZWI1MmE3ZDU4NzQ2YWE5Nw==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "dan@debian.org", "date": "2004-07-10T19:01:40Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2004-07-10T19:01:40Z"}, "message": "i386.c (override_options): Pick a 64-bit CPU for the default tuning if TARGET_64BIT.\n\n\t* config/i386/i386.c (override_options): Pick a 64-bit CPU\n\tfor the default tuning if TARGET_64BIT.\n\nFrom-SVN: r84470", "tree": {"sha": "6c2594c80c5d6eab561b8d693b5b802e5f86f027", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c2594c80c5d6eab561b8d693b5b802e5f86f027"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3326f4101aab4be3befedda3eb52a7d58746aa97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3326f4101aab4be3befedda3eb52a7d58746aa97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3326f4101aab4be3befedda3eb52a7d58746aa97", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3326f4101aab4be3befedda3eb52a7d58746aa97/comments", "author": null, "committer": null, "parents": [{"sha": "07b8df0a3d66c6198221375616d9685d81a1fc1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07b8df0a3d66c6198221375616d9685d81a1fc1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07b8df0a3d66c6198221375616d9685d81a1fc1a"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "3ce75e9dbb8e8732e63c86de298e6775eb3098ce", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3326f4101aab4be3befedda3eb52a7d58746aa97/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3326f4101aab4be3befedda3eb52a7d58746aa97/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3326f4101aab4be3befedda3eb52a7d58746aa97", "patch": "@@ -1,3 +1,8 @@\n+2004-07-10  Daniel Jacobowitz  <dan@debian.org>\n+\n+\t* config/i386/i386.c (override_options): Pick a 64-bit CPU\n+\tfor the default tuning if TARGET_64BIT.\n+\n 2004-07-10  Richard Henderson  <rth@redhat.com>\n \n \t* builtins.c (std_gimplify_va_arg_expr): Widen align/boundary"}, {"sha": "dafc60afe41bff2c0d82e87c1d1a50af03730b1a", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 20, "deletions": 2, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3326f4101aab4be3befedda3eb52a7d58746aa97/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3326f4101aab4be3befedda3eb52a7d58746aa97/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=3326f4101aab4be3befedda3eb52a7d58746aa97", "patch": "@@ -1097,6 +1097,8 @@ void\n override_options (void)\n {\n   int i;\n+  int ix86_tune_defaulted = 0;\n+\n   /* Comes from final.c -- no real reason to change it.  */\n #define MAX_CODE_ALIGN 16\n \n@@ -1221,7 +1223,10 @@ override_options (void)\n   if (!ix86_tune_string && ix86_arch_string)\n     ix86_tune_string = ix86_arch_string;\n   if (!ix86_tune_string)\n-    ix86_tune_string = cpu_names [TARGET_CPU_DEFAULT];\n+    {\n+      ix86_tune_string = cpu_names [TARGET_CPU_DEFAULT];\n+      ix86_tune_defaulted = 1;\n+    }\n   if (!ix86_arch_string)\n     ix86_arch_string = TARGET_64BIT ? \"x86-64\" : \"i386\";\n \n@@ -1293,7 +1298,20 @@ override_options (void)\n \tif (processor_alias_table[i].flags & PTA_PREFETCH_SSE)\n \t  x86_prefetch_sse = true;\n \tif (TARGET_64BIT && !(processor_alias_table[i].flags & PTA_64BIT))\n-\t  error (\"CPU you selected does not support x86-64 instruction set\");\n+\t  {\n+\t    if (ix86_tune_defaulted)\n+\t      {\n+\t\tix86_tune_string = \"x86-64\";\n+\t\tfor (i = 0; i < pta_size; i++)\n+\t\t  if (! strcmp (ix86_tune_string,\n+\t\t\t\tprocessor_alias_table[i].name))\n+\t\t    break;\n+\t\tix86_tune = processor_alias_table[i].processor;\n+\t      }\n+\t    else\n+\t      error (\"CPU you selected does not support x86-64 \"\n+\t\t     \"instruction set\");\n+\t  }\n \tbreak;\n       }\n "}]}