{"sha": "d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDdjMmUzODVlYTZiZTkzZWQ5MmNiZGVhYTZiMzkyMTVhZDE5NmRmYg==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "1998-05-08T13:14:32Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-05-08T13:14:32Z"}, "message": "reload1.c (emit_reload_insns): When performing expensive optimizations...\n\n        * reload1.c (emit_reload_insns): When performing expensive\n        optimizations, do not output the last reload insn if OLD is\n        not the dest of NSN and is in the src and is clobbered by INSN.\n\nFrom-SVN: r19634", "tree": {"sha": "24a54ea2ffe64ccf6deedae31c29ed5838ba2767", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24a54ea2ffe64ccf6deedae31c29ed5838ba2767"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb/comments", "author": null, "committer": null, "parents": [{"sha": "507c117699e8f4786557f57f1f6038eabd3e4963", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/507c117699e8f4786557f57f1f6038eabd3e4963", "html_url": "https://github.com/Rust-GCC/gccrs/commit/507c117699e8f4786557f57f1f6038eabd3e4963"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "4f36e060afb6c74af0e04dc017c91525361b566a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb", "patch": "@@ -1,3 +1,9 @@\n+Fri May  8 14:13:21 1998  H.J. Lu  (hjl@gnu.org)\n+\n+\t* reload1.c (emit_reload_insns): When performing expensive\n+\toptimizations, do not output the last reload insn if OLD is\n+\tnot the dest of NSN and is in the src and is clobbered by INSN.\n+\n Fri May  8 13:59:31 1998  Paul Eggert  <eggert@twinsun.com>\n \n \t* dwarf2out.c: Don't assume that `.section \".text\"' causes the"}, {"sha": "65e5d65f26b459e47c73e18e113463c116be120b", "filename": "gcc/reload1.c", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=d7c2e385ea6be93ed92cbdeaa6b39215ad196dfb", "patch": "@@ -6755,8 +6755,20 @@ emit_reload_insns (insn)\n \n \t  /* Output the last reload insn.  */\n \t  if (! special)\n-\t    gen_reload (old, reloadreg, reload_opnum[j],\n-\t\t\treload_when_needed[j]);\n+\t    {\n+\t      rtx set;\n+\n+\t      /* Don't output the last reload if OLD is not the dest of\n+\t\t INSN and is in the src and is clobbered by INSN. */\n+\t      if (! flag_expensive_optimizations\n+\t\t  || GET_CODE (old) != REG\n+\t\t  || !(set = single_set (insn))\n+\t\t  || rtx_equal_p (old, SET_DEST (set))\n+\t\t  || !reg_mentioned_p (old, SET_SRC (set))\n+\t\t  || !regno_clobbered_p (REGNO (old), insn))\n+\t\tgen_reload (old, reloadreg, reload_opnum[j],\n+\t\t\t    reload_when_needed[j]);\n+\t    }\n \n #ifdef PRESERVE_DEATH_INFO_REGNO_P\n \t  /* If final will look at death notes for this reg,"}]}