{"sha": "7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YzZDRiMmY3NTg2YTUwNDlhOGRiYjhhNTcyZWJmMDRiYTU4YzkyZQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-07-28T18:06:21Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1993-07-28T18:06:21Z"}, "message": "(simple_if, if_prefix, stmt): Undo Jul 7 change.\n\n(if_prefix): Store stmt_count in $$ not $1.\n(stmt): Add comment explaining why empty-if warning is here.\n\nFrom-SVN: r5029", "tree": {"sha": "8e9647f38527a96e34cfff809f7505c5b63eb06a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e9647f38527a96e34cfff809f7505c5b63eb06a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e/comments", "author": null, "committer": null, "parents": [{"sha": "2516bc12a8e08cc2aa172a7a5d8acd6b0bfdc9de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2516bc12a8e08cc2aa172a7a5d8acd6b0bfdc9de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2516bc12a8e08cc2aa172a7a5d8acd6b0bfdc9de"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "7acce2a42ca73ab36fdfcddd88bf876c6b8681d4", "filename": "gcc/c-parse.in", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=7f3d4b2f7586a5049a8dbb8a572ebf04ba58c92e", "patch": "@@ -1568,12 +1568,7 @@ compstmt: '{' '}'\n \n /* Value is number of statements counted as of the closeparen.  */\n simple_if:\n-\t  if_prefix\n-\t\t{ $<itype>1 = stmt_count; }\n-\t  lineno_labeled_stmt\n-\t\t{ if (extra_warnings && stmt_count == $<itype>1)\n-\t\t    warning_with_file_and_line (if_stmt_file, if_stmt_line,\n-\t\t\t\t\t\t\"empty body in an if-statement\"); }\n+\t  if_prefix lineno_labeled_stmt\n /* Make sure expand_end_cond is run once\n    for each call to expand_start_cond.\n    Otherwise a crash is likely.  */\n@@ -1584,6 +1579,7 @@ if_prefix:\n \t  IF '(' expr ')'\n \t\t{ emit_line_note ($<filename>-1, $<lineno>0);\n \t\t  expand_start_cond (truthvalue_conversion ($3), 0);\n+\t\t  $<itype>$ = stmt_count;\n \t\t  if_stmt_file = $<filename>-1;\n \t\t  if_stmt_line = $<lineno>0;\n \t\t  position_after_white_space (); }\n@@ -1658,7 +1654,13 @@ stmt:\n \t\t  if (extra_warnings && stmt_count == $<itype>1)\n \t\t    warning (\"empty body in an else-statement\"); }\n \t| simple_if %prec IF\n-\t\t{ expand_end_cond (); }\n+\t\t{ expand_end_cond ();\n+\t\t  /* This warning is here instead of in simple_if, because we\n+\t\t     do not want a warning if an empty if is followed by an\n+\t\t     else statement.  */\n+\t\t  if (extra_warnings && stmt_count == $<itype>1)\n+\t\t    warning_with_file_and_line (if_stmt_file, if_stmt_line,\n+\t\t\t\t\t\t\"empty body in an if-statement\"); }\n /* Make sure expand_end_cond is run once\n    for each call to expand_start_cond.\n    Otherwise a crash is likely.  */"}]}