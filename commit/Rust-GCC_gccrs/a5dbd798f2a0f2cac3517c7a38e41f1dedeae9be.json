{"sha": "a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVkYmQ3OThmMmEwZjJjYWMzNTE3YzdhMzhlNDFmMWRlZGVhZTliZQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-07-28T19:34:22Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-07-28T19:34:22Z"}, "message": "(iterator_loop_{pro,epi}logue): Set TREE_SIDE_EFFECTS on the MODIFY_EXPRs we make.\n\n(iterator_loop_{pro,epi}logue): Set TREE_SIDE_EFFECTS on the MODIFY_EXPRs we\nmake.\nPass const0_rtx as TARGET to expand_expr.\n\nFrom-SVN: r5032", "tree": {"sha": "c34d8b1fc4b797f04aa41efe29e6d06a483cedc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c34d8b1fc4b797f04aa41efe29e6d06a483cedc3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be/comments", "author": null, "committer": null, "parents": [{"sha": "c49f1ce85dce7d834bac3f80b0402878104c252f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c49f1ce85dce7d834bac3f80b0402878104c252f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c49f1ce85dce7d834bac3f80b0402878104c252f"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "99f9a794d2ae26dfac22c9db7a261ea57bd48217", "filename": "gcc/c-iterate.c", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be/gcc%2Fc-iterate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be/gcc%2Fc-iterate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-iterate.c?ref=a5dbd798f2a0f2cac3517c7a38e41f1dedeae9be", "patch": "@@ -278,19 +278,22 @@ iterator_loop_prologue (idecl, start_note, end_note)\n      tree idecl;\n      rtx *start_note, *end_note;\n {\n+  tree expr;\n+\n   /* Force the save_expr in DECL_INITIAL to be calculated\n      if it hasn't been calculated yet.  */\n-  expand_expr (DECL_INITIAL (idecl), 0, VOIDmode, 0);\n+  expand_expr (DECL_INITIAL (idecl), const0_rtx, VOIDmode, 0);\n \n   if (DECL_RTL (idecl) == 0)\n     expand_decl (idecl);\n \n   if (start_note)\n     *start_note = emit_note (0, NOTE_INSN_DELETED);\n+\n   /* Initialize counter.  */\n-  expand_expr (build (MODIFY_EXPR, TREE_TYPE (idecl),\n-\t\t      idecl, integer_zero_node),\n-\t       0, VOIDmode, 0);\n+  expr = build (MODIFY_EXPR, TREE_TYPE (idecl), idecl, integer_zero_node);\n+  TREE_SIDE_EFFECTS (expr) = 1;\n+  expand_expr (expr, const0_rtx, VOIDmode, 0);\n \n   expand_start_loop_continue_elsewhere (1);\n \n@@ -329,8 +332,9 @@ iterator_loop_epilogue (idecl, start_note, end_note)\n     *start_note = emit_note (0, NOTE_INSN_DELETED);\n   expand_loop_continue_here ();\n   incr = build_binary_op (PLUS_EXPR, idecl, integer_one_node, 0);\n-  expand_expr (build (MODIFY_EXPR, TREE_TYPE (idecl), idecl, incr),\n-\t       0, VOIDmode, 0);\n+  incr = build (MODIFY_EXPR, TREE_TYPE (idecl), idecl, incr);\n+  TREE_SIDE_EFFECTS (incr) = 1;\n+  expand_expr (incr, const0_rtx, VOIDmode, 0);\n   test = build_binary_op (LT_EXPR, idecl, DECL_INITIAL (idecl), 0);\n   expand_exit_loop_if_false (0, test);\n   expand_end_loop ();"}]}