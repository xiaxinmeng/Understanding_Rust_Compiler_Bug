{"sha": "ccfc7360c6a9d89e530cc1e920595602293f48d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NmYzczNjBjNmE5ZDg5ZTUzMGNjMWU5MjA1OTU2MDIyOTNmNDhkOA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2003-06-07T14:55:56Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2003-06-07T14:55:56Z"}, "message": "copy-file.exp: New.\n\n2003-06-07  H.J. Lu <hongjiu.lu@intel.com>\n\n\t* lib/copy-file.exp: New. Implement gcc_copy_files.\n\n\t* lib/dg-pch.exp: Load copy-file.exp\n\t(dg-pch): Use gcc_copy_files instead of \"file copy\".\n\nFrom-SVN: r67588", "tree": {"sha": "cc44757f7278bbd028038f9d6bf0ae9f4d9148ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc44757f7278bbd028038f9d6bf0ae9f4d9148ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccfc7360c6a9d89e530cc1e920595602293f48d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccfc7360c6a9d89e530cc1e920595602293f48d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccfc7360c6a9d89e530cc1e920595602293f48d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccfc7360c6a9d89e530cc1e920595602293f48d8/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "248e983efb6324556826bbe825e679f98cda72b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/248e983efb6324556826bbe825e679f98cda72b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/248e983efb6324556826bbe825e679f98cda72b0"}], "stats": {"total": 46, "additions": 44, "deletions": 2}, "files": [{"sha": "b0edd885678e2a7cd05fbd22160bca1a49a14f79", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccfc7360c6a9d89e530cc1e920595602293f48d8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccfc7360c6a9d89e530cc1e920595602293f48d8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ccfc7360c6a9d89e530cc1e920595602293f48d8", "patch": "@@ -1,3 +1,10 @@\n+2003-06-07  H.J. Lu <hongjiu.lu@intel.com>\n+\n+\t* lib/copy-file.exp: New. Implement gcc_copy_files.\n+\n+\t* lib/dg-pch.exp: Load copy-file.exp\n+\t(dg-pch): Use gcc_copy_files instead of \"file copy\".\n+\n 2003-06-06  Mark Mitchell  <mark@codesourcery.com>\n \n \t* gcc.dg/weak/weak.exp: Simplify."}, {"sha": "b1b937af5ab9281e9d63776e784a7f9315ebe2ed", "filename": "gcc/testsuite/lib/copy-file.exp", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccfc7360c6a9d89e530cc1e920595602293f48d8/gcc%2Ftestsuite%2Flib%2Fcopy-file.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccfc7360c6a9d89e530cc1e920595602293f48d8/gcc%2Ftestsuite%2Flib%2Fcopy-file.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fcopy-file.exp?ref=ccfc7360c6a9d89e530cc1e920595602293f48d8", "patch": "@@ -0,0 +1,33 @@\n+#   Copyright (C) 2003 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2 of the License, or\n+# (at your option) any later version.\n+# \n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+# \n+# You should have received a copy of the GNU General Public License\n+# along with this program; if not, write to the Free Software\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  \n+\n+# This file defines a proc for copying regular files as well as\n+# symlinks.\n+\n+proc gcc_copy_files {srcfiles dstdir} {\n+    foreach f $srcfiles {\n+\tif { [catch { set symlink [file readlink $f] } x] } then {\n+\t    file copy -force $f $dstdir\n+\t} else {\n+\t    if { [regexp \"^/\" \"$symlink\"] } then {\n+\t\tfile copy -force $symlink $dstdir\n+\t    } else {\n+\t\tset dirname [file dirname $f]\n+\t\tfile copy -force $dirname/$symlink $dstdir\n+\t    }\n+\t}\n+    }\n+}"}, {"sha": "ca7d8c3c9e3241eb899b89f9f2c982bf2a14b2cd", "filename": "gcc/testsuite/lib/dg-pch.exp", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccfc7360c6a9d89e530cc1e920595602293f48d8/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccfc7360c6a9d89e530cc1e920595602293f48d8/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fdg-pch.exp?ref=ccfc7360c6a9d89e530cc1e920595602293f48d8", "patch": "@@ -14,6 +14,8 @@\n # along with this program; if not, write to the Free Software\n # Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  \n \n+load_lib copy-file.exp\n+\n proc dg-pch { subdir test options suffix } {\n     global runtests dg-do-what-default\n \n@@ -36,7 +38,7 @@ proc dg-pch { subdir test options suffix } {\n \t# For the header files, the default is to precompile.\n \tset dg-do-what-default precompile\n \tcatch { file delete \"$bname$suffix\" }\n-\tfile copy \"[file rootname $test]${suffix}s\" \"$bname$suffix\"\n+\tgcc_copy_files \"[file rootname $test]${suffix}s\" \"$bname$suffix\"\n \tdg-test -keep-output \"$bname$suffix\" $flags \"\"\n \n \t# For the rest, the default is to compile to .s.\n@@ -50,7 +52,7 @@ proc dg-pch { subdir test options suffix } {\n \t    file delete \"$bname$suffix.gch\"\n \t    if { [ file exists \"$bname.s\" ] } {\n \t\tfile rename \"$bname.s\" \"$bname.s-gch\"\n-\t\tfile copy \"[file rootname $test]${suffix}s\" \"$bname$suffix\"\n+\t\tgcc_copy_files \"[file rootname $test]${suffix}s\" \"$bname$suffix\"\n \t\tdg-test -keep-output $test $flags \"-I.\"\n \t\tset tmp [ diff \"$bname.s\" \"$bname.s-gch\" ]\n \t\tif { $tmp == 0 } {"}]}