{"sha": "94b00ee4e1126901db295a7223b3c6d7c5b1868d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTRiMDBlZTRlMTEyNjkwMWRiMjk1YTcyMjNiM2M2ZDdjNWIxODY4ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2005-07-14T07:15:00Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2005-07-14T07:15:00Z"}, "message": "re PR fortran/22417 (gfortran preprocessing regression: nonsense warning about file left but not entered)\n\n\tPR fortran/22417\n\t* scanner.c (preprocessor_line): Don't treat flag 3 as the start of a new\n\tfile.  Fix file left but not entered warning.\n\n\t* gfortran.dg/g77/cpp5.F: New test.\n\t* gfortran.dg/g77/cpp5.h: New file.\n\t* gfortran.dg/g77/cpp5inc.h: New file.\n\nFrom-SVN: r102010", "tree": {"sha": "13c40bee0e01dc6be30a1e076b1de7319d0344fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13c40bee0e01dc6be30a1e076b1de7319d0344fd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94b00ee4e1126901db295a7223b3c6d7c5b1868d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94b00ee4e1126901db295a7223b3c6d7c5b1868d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94b00ee4e1126901db295a7223b3c6d7c5b1868d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94b00ee4e1126901db295a7223b3c6d7c5b1868d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1c80856534ddb0f084bb7cd049015c930b7d929f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c80856534ddb0f084bb7cd049015c930b7d929f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c80856534ddb0f084bb7cd049015c930b7d929f"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "5f17e5edc6b7d6c143c1bf44260b7593b203f036", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=94b00ee4e1126901db295a7223b3c6d7c5b1868d", "patch": "@@ -1,3 +1,9 @@\n+2005-07-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR fortran/22417\n+\t* scanner.c (preprocessor_line): Don't treat flag 3 as the start of a new\n+\tfile.  Fix file left but not entered warning.\n+\n 2005-07-14  Feng Wang  <fengwang@nudt.edu.cn>\n \tSteven G. Kargl  <kargls@comcast.net>\n "}, {"sha": "eee3a684fc3ebbdef090ebe28db648154c917296", "filename": "gcc/fortran/scanner.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ffortran%2Fscanner.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ffortran%2Fscanner.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fscanner.c?ref=94b00ee4e1126901db295a7223b3c6d7c5b1868d", "patch": "@@ -899,7 +899,7 @@ preprocessor_line (char *c)\n \n   /* Interpret flags.  */\n \n-  if (flag[1] || flag[3]) /* Starting new file.  */\n+  if (flag[1]) /* Starting new file.  */\n     {\n       f = get_file (filename, LC_RENAME);\n       f->up = current_file;\n@@ -908,15 +908,15 @@ preprocessor_line (char *c)\n \n   if (flag[2]) /* Ending current file.  */\n     {\n-      if (strcmp (current_file->filename, filename) != 0)\n+      if (!current_file->up\n+\t  || strcmp (current_file->up->filename, filename) != 0)\n \t{\n \t  gfc_warning_now (\"%s:%d: file %s left but not entered\",\n \t\t\t   current_file->filename, current_file->line,\n \t\t\t   filename);\n \t  return;\n \t}\n-      if (current_file->up)\n-\tcurrent_file = current_file->up;\n+      current_file = current_file->up;\n     }\n \n   /* The name of the file can be a temporary file produced by"}, {"sha": "d0c2c653efab2fdf402bd25b3d8dd05c3e40ce48", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=94b00ee4e1126901db295a7223b3c6d7c5b1868d", "patch": "@@ -1,3 +1,10 @@\n+2005-07-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR fortran/22417\n+\t* gfortran.dg/g77/cpp5.F: New test.\n+\t* gfortran.dg/g77/cpp5.h: New file.\n+\t* gfortran.dg/g77/cpp5inc.h: New file.\n+\n 2005-07-12  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR libfortran/16435"}, {"sha": "8e35d78ea381658e737caf90cc67e847d91d0bc4", "filename": "gcc/testsuite/gfortran.dg/g77/cpp5.F", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5.F", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5.F", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5.F?ref=94b00ee4e1126901db295a7223b3c6d7c5b1868d", "patch": "@@ -0,0 +1,4 @@\n+\t! { dg-do run }\n+#include \"cpp5.h\"\n+\tIF (FOO().NE.1) CALL ABORT ()\n+\tEND"}, {"sha": "2e77f6a692f89474070120f88b57bb72032b0452", "filename": "gcc/testsuite/gfortran.dg/g77/cpp5.h", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5.h?ref=94b00ee4e1126901db295a7223b3c6d7c5b1868d", "patch": "@@ -0,0 +1,3 @@\n+\tFUNCTION FOO()\n+#include \"cpp5inc.h\"\n+\tEND FUNCTION"}, {"sha": "3cc86cd0d180fe463f18c3fe7f47209475df3ba8", "filename": "gcc/testsuite/gfortran.dg/g77/cpp5inc.h", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5inc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b00ee4e1126901db295a7223b3c6d7c5b1868d/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5inc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fg77%2Fcpp5inc.h?ref=94b00ee4e1126901db295a7223b3c6d7c5b1868d", "patch": "@@ -0,0 +1 @@\n+\tFOO = 1"}]}