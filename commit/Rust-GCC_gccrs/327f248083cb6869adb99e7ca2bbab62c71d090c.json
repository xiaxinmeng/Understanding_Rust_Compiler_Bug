{"sha": "327f248083cb6869adb99e7ca2bbab62c71d090c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI3ZjI0ODA4M2NiNjg2OWFkYjk5ZTdjYTJiYmFiNjJjNzFkMDkwYw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-05-05T16:11:36Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-05-05T16:11:36Z"}, "message": "re GNATS libgcj/220 (build fails with \"only absolute run-paths are allowed\" error during linking)\n\n\tFix for PR libgcj/220:\n\t* Makefile.in: Rebuilt.\n\t* Makefile.am (gij_LDFLAGS): Don't use libstdc++.\n\t(jv_convert_LDFLAGS): Likewise.\n\t(libgcj_la_LDFLAGS): Likewise.\n\t(GCJLINK): New macro.\n\t(jv_convert_LINK): Use it.\n\t(gij_LINK): Likewise.\n\t(libgcj_la_LINK): New macro.\n\t(libgcjawt_la_LINK): Likewise.\n\nFrom-SVN: r33706", "tree": {"sha": "25bdd698fdf3a04a597bcb32e316522458fda94f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25bdd698fdf3a04a597bcb32e316522458fda94f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/327f248083cb6869adb99e7ca2bbab62c71d090c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/327f248083cb6869adb99e7ca2bbab62c71d090c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/327f248083cb6869adb99e7ca2bbab62c71d090c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/327f248083cb6869adb99e7ca2bbab62c71d090c/comments", "author": null, "committer": null, "parents": [{"sha": "ad3958e7dbc34f94ea03d86eeaaf29e57c2721f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad3958e7dbc34f94ea03d86eeaaf29e57c2721f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad3958e7dbc34f94ea03d86eeaaf29e57c2721f3"}], "stats": {"total": 111, "additions": 78, "deletions": 33}, "files": [{"sha": "f26689af4ff9e057c2e0358febb70e0a736ede19", "filename": "libjava/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/327f248083cb6869adb99e7ca2bbab62c71d090c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/327f248083cb6869adb99e7ca2bbab62c71d090c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=327f248083cb6869adb99e7ca2bbab62c71d090c", "patch": "@@ -1,3 +1,16 @@\n+2000-05-05  Tom Tromey  <tromey@cygnus.com>\n+\n+\tFix for PR libgcj/220:\n+\t* Makefile.in: Rebuilt.\n+\t* Makefile.am (gij_LDFLAGS): Don't use libstdc++.\n+\t(jv_convert_LDFLAGS): Likewise.\n+\t(libgcj_la_LDFLAGS): Likewise.\n+\t(GCJLINK): New macro.\n+\t(jv_convert_LINK): Use it.\n+\t(gij_LINK): Likewise.\n+\t(libgcj_la_LINK): New macro.\n+\t(libgcjawt_la_LINK): Likewise.\n+\n 2000-05-04  Tom Tromey  <tromey@cygnus.com>\n \n \t* gcj/field.h (JvFieldIsRef): Return false for gnu.gcj.RawData"}, {"sha": "b243822c0da0ac6ab229ac78ea26764445027a2b", "filename": "libjava/Makefile.am", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/327f248083cb6869adb99e7ca2bbab62c71d090c/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/327f248083cb6869adb99e7ca2bbab62c71d090c/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=327f248083cb6869adb99e7ca2bbab62c71d090c", "patch": "@@ -72,6 +72,7 @@ ZIP = $(MULTIBUILDTOP)../$(COMPPATH)/zip/zip$(EXEEXT)\n endif # CANADIAN\n \n GCJCOMPILE = CLASSPATH=$(here) $(LIBTOOL) --mode=compile $(GCJ) -fassume-compiled -L$(here) $(JC1FLAGS) -c\n+GCJLINK = $(LIBTOOL) --mode=link $(GCJ) -L$(here) $(JC1FLAGS) $(LDFLAGS) -o $@\n \n JAVAC = $(GCJ) -C\n \n@@ -128,9 +129,10 @@ libgcj_la_DEPENDENCIES = libgcj.zip $(javao_files) $(nat_files) \\\n \t$(c_files) $(GCOBJS) $(THREADOBJS) $(LIBLTDL)\n libgcj_la_LIBADD = $(javao_files) $(nat_files) $(c_files) $(GCOBJS) \\\n \t$(THREADOBJS) $(libffi_files) $(LIBLTDL)\n-libgcj_la_LDFLAGS = -L../libstdc++ -rpath $(toolexeclibdir) \\\n+libgcj_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n ## The mysterious backslash is consumed by make.\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`\n+libgcj_la_LINK = $(GCJLINK)\n \n libgcjawt_la_SOURCES = ## Nothing\n EXTRA_libgcjawt_la_SOURCES = $(awt_java_source_files)\n@@ -139,6 +141,7 @@ libgcjawt_la_LIBADD = $(awto_files)\n libgcjawt_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n ## The mysterious backslash is consumed by make.\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`\n+libgcjawt_la_LINK = $(GCJLINK)\n \n ## Make the .class files depend on the .zip file.  This seems\n ## backwards, but is right.  This doesn't catch all the .class files,\n@@ -361,9 +364,8 @@ EXTRA_jv_convert_SOURCES = $(convert_source_files)\n ## need this because we are explicitly using libtool to link using the\n ## `.la' file.\n jv_convert_LDFLAGS = --main=gnu.gcj.convert.Convert \\\n-\t-rpath `if test -d ../libstdc++; then cd ../libstdc++; pwd; fi` -rpath $(toolexeclibdir)\n-jv_convert_LINK = $(LIBTOOL) --mode=link $(GCJ) -L$(here) $(JC1FLAGS) $(LDFLAGS) \\\n-\t-o jv-convert\n+\t-rpath $(toolexeclibdir)\n+jv_convert_LINK = $(GCJLINK)\n ## We explicitly link in the libraries we need.  This way we don't\n ## need -nodefaultlibs, so we can still rely on gcj picking up the\n ## system libraries we need (via the specs file).\n@@ -380,9 +382,8 @@ gij_SOURCES = gij.cc\n ## We need -nodefaultlibs because we want to avoid gcj's `-lgcj'.  We\n ## need this because we are explicitly using libtool to link using the\n ## `.la' file.\n-gij_LDFLAGS = -rpath `if test -d ../libstdc++; then cd ../libstdc++; pwd; fi` -rpath $(toolexeclibdir)\n-gij_LINK = $(LIBTOOL) --mode=link $(GCJ) -L$(here) $(JC1FLAGS) $(LDFLAGS) \\\n-\t-o gij\n+gij_LDFLAGS = -rpath $(toolexeclibdir)\n+gij_LINK = $(GCJLINK)\n ## We explicitly link in the libraries we need.  This way we don't\n ## need -nodefaultlibs, so we can still rely on gcj picking up the\n ## system libraries we need (via the specs file)."}, {"sha": "ef81c3e9f5c2a41ff95e89b69d2a7736f49c8658", "filename": "libjava/Makefile.in", "status": "modified", "additions": 57, "deletions": 26, "changes": 83, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/327f248083cb6869adb99e7ca2bbab62c71d090c/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/327f248083cb6869adb99e7ca2bbab62c71d090c/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=327f248083cb6869adb99e7ca2bbab62c71d090c", "patch": "@@ -158,6 +158,7 @@ data_DATA = libgcj.zip\n @CANADIAN_FALSE@`cd $(MULTIBUILDTOP)../$(COMPPATH)/gcc && pwd`\n \n GCJCOMPILE = CLASSPATH=$(here) $(LIBTOOL) --mode=compile $(GCJ) -fassume-compiled -L$(here) $(JC1FLAGS) -c\n+GCJLINK = $(LIBTOOL) --mode=link $(GCJ) -L$(here) $(JC1FLAGS) $(LDFLAGS) -o $@\n \n JAVAC = $(GCJ) -C\n \n@@ -204,9 +205,10 @@ libgcj_la_DEPENDENCIES = libgcj.zip $(javao_files) $(nat_files) \\\n libgcj_la_LIBADD = $(javao_files) $(nat_files) $(c_files) $(GCOBJS) \\\n \t$(THREADOBJS) $(libffi_files) $(LIBLTDL)\n \n-libgcj_la_LDFLAGS = -L../libstdc++ -rpath $(toolexeclibdir) \\\n+libgcj_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`\n \n+libgcj_la_LINK = $(GCJLINK)\n \n libgcjawt_la_SOURCES = ## Nothing\n EXTRA_libgcjawt_la_SOURCES = $(awt_java_source_files)\n@@ -215,6 +217,7 @@ libgcjawt_la_LIBADD = $(awto_files)\n libgcjawt_la_LDFLAGS = -rpath $(toolexeclibdir) \\\n \t-version-info `grep -v '^\\#' $(srcdir)/libtool-version`\n \n+libgcjawt_la_LINK = $(GCJLINK)\n \n MOSTLYCLEANFILES = $(javao_files) $(nat_files) $(nat_headers) $(c_files) \\\n \t$(awto_files)\n@@ -240,11 +243,9 @@ CONVERT_DIR = gnu/gcj/convert\n jv_convert_SOURCES = \n EXTRA_jv_convert_SOURCES = $(convert_source_files)\n jv_convert_LDFLAGS = --main=gnu.gcj.convert.Convert \\\n-\t-rpath `if test -d ../libstdc++; then cd ../libstdc++; pwd; fi` -rpath $(toolexeclibdir)\n-\n-jv_convert_LINK = $(LIBTOOL) --mode=link $(GCJ) -L$(here) $(JC1FLAGS) $(LDFLAGS) \\\n-\t-o jv-convert\n+\t-rpath $(toolexeclibdir)\n \n+jv_convert_LINK = $(GCJLINK)\n jv_convert_LDADD = $(convert_source_files:.java=.lo) libgcj.la \\\n \t$(GCLIBS) $(THREADLIBS) $(ZLIBS) -L$(here)/.libs\n \n@@ -253,10 +254,8 @@ jv_convert_DEPENDENCIES = $(convert_source_files:.java=.lo) \\\n \n \n gij_SOURCES = gij.cc\n-gij_LDFLAGS = -rpath `if test -d ../libstdc++; then cd ../libstdc++; pwd; fi` -rpath $(toolexeclibdir)\n-gij_LINK = $(LIBTOOL) --mode=link $(GCJ) -L$(here) $(JC1FLAGS) $(LDFLAGS) \\\n-\t-o gij\n-\n+gij_LDFLAGS = -rpath $(toolexeclibdir)\n+gij_LINK = $(GCJLINK)\n gij_LDADD = libgcj.la $(GCLIBS) $(THREADLIBS) $(ZLIBS) -L$(here)/.libs\n gij_DEPENDENCIES = $(GCDEPS) $(THREADDEPS) $(ZDEPS) libgcj.la libgcj.spec\n \n@@ -842,8 +841,9 @@ LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@\n DATA =  $(data_DATA) $(toolexeclib_DATA)\n \n DIST_COMMON =  README COPYING ChangeLog Makefile.am Makefile.in NEWS \\\n-THANKS acinclude.m4 aclocal.m4 configure configure.in \\\n-libgcj-test.spec.in libgcj.spec.in\n+THANKS acconfig.h acinclude.m4 aclocal.m4 configure configure.in \\\n+include/config.h.in include/stamp-h.in libgcj-test.spec.in \\\n+libgcj.spec.in\n \n \n DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)\n@@ -1156,6 +1156,34 @@ config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n \t$(SHELL) ./config.status --recheck\n $(srcdir)/configure: @MAINTAINER_MODE_TRUE@$(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)\n \tcd $(srcdir) && $(AUTOCONF)\n+\n+include/config.h: include/stamp-h\n+\t@if test ! -f $@; then \\\n+\t\trm -f include/stamp-h; \\\n+\t\t$(MAKE) include/stamp-h; \\\n+\telse :; fi\n+include/stamp-h: $(srcdir)/include/config.h.in $(top_builddir)/config.status\n+\tcd $(top_builddir) \\\n+\t  && CONFIG_FILES= CONFIG_HEADERS=include/config.h \\\n+\t     $(SHELL) ./config.status\n+\t@echo timestamp > include/stamp-h 2> /dev/null\n+$(srcdir)/include/config.h.in: @MAINTAINER_MODE_TRUE@$(srcdir)/include/stamp-h.in\n+\t@if test ! -f $@; then \\\n+\t\trm -f $(srcdir)/include/stamp-h.in; \\\n+\t\t$(MAKE) $(srcdir)/include/stamp-h.in; \\\n+\telse :; fi\n+$(srcdir)/include/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) acconfig.h\n+\tcd $(top_srcdir) && $(AUTOHEADER)\n+\t@echo timestamp > $(srcdir)/include/stamp-h.in 2> /dev/null\n+\n+mostlyclean-hdr:\n+\n+clean-hdr:\n+\n+distclean-hdr:\n+\t-rm -f include/config.h\n+\n+maintainer-clean-hdr:\n libgcj.spec: $(top_builddir)/config.status libgcj.spec.in\n \tcd $(top_builddir) && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status\n libgcj-test.spec: $(top_builddir)/config.status libgcj-test.spec.in\n@@ -1256,10 +1284,10 @@ uninstall-toolexeclibLTLIBRARIES:\n \tdone\n \n libgcj.la: $(libgcj_la_OBJECTS) $(libgcj_la_DEPENDENCIES)\n-\t$(CXXLINK) -rpath $(toolexeclibdir) $(libgcj_la_LDFLAGS) $(libgcj_la_OBJECTS) $(libgcj_la_LIBADD) $(LIBS)\n+\t$(libgcj_la_LINK) -rpath $(toolexeclibdir) $(libgcj_la_LDFLAGS) $(libgcj_la_OBJECTS) $(libgcj_la_LIBADD) $(LIBS)\n \n libgcjawt.la: $(libgcjawt_la_OBJECTS) $(libgcjawt_la_DEPENDENCIES)\n-\t$(LINK) -rpath $(toolexeclibdir) $(libgcjawt_la_LDFLAGS) $(libgcjawt_la_OBJECTS) $(libgcjawt_la_LIBADD) $(LIBS)\n+\t$(libgcjawt_la_LINK) -rpath $(toolexeclibdir) $(libgcjawt_la_LDFLAGS) $(libgcjawt_la_OBJECTS) $(libgcjawt_la_LIBADD) $(LIBS)\n \n mostlyclean-binPROGRAMS:\n \n@@ -1599,31 +1627,33 @@ distclean-generic:\n \t-rm -f config.cache config.log stamp-h stamp-h[0-9]*\n \n maintainer-clean-generic:\n-mostlyclean-am:  mostlyclean-toolexeclibLIBRARIES mostlyclean-compile \\\n-\t\tmostlyclean-libtool mostlyclean-toolexeclibLTLIBRARIES \\\n+mostlyclean-am:  mostlyclean-hdr mostlyclean-toolexeclibLIBRARIES \\\n+\t\tmostlyclean-compile mostlyclean-libtool \\\n+\t\tmostlyclean-toolexeclibLTLIBRARIES \\\n \t\tmostlyclean-binPROGRAMS mostlyclean-noinstPROGRAMS \\\n \t\tmostlyclean-tags mostlyclean-depend mostlyclean-generic\n \n mostlyclean: mostlyclean-recursive\n \n-clean-am:  clean-toolexeclibLIBRARIES clean-compile clean-libtool \\\n-\t\tclean-toolexeclibLTLIBRARIES clean-binPROGRAMS \\\n-\t\tclean-noinstPROGRAMS clean-tags clean-depend \\\n-\t\tclean-generic mostlyclean-am clean-local\n+clean-am:  clean-hdr clean-toolexeclibLIBRARIES clean-compile \\\n+\t\tclean-libtool clean-toolexeclibLTLIBRARIES \\\n+\t\tclean-binPROGRAMS clean-noinstPROGRAMS clean-tags \\\n+\t\tclean-depend clean-generic mostlyclean-am clean-local\n \n clean: clean-recursive\n \n-distclean-am:  distclean-toolexeclibLIBRARIES distclean-compile \\\n-\t\tdistclean-libtool distclean-toolexeclibLTLIBRARIES \\\n-\t\tdistclean-binPROGRAMS distclean-noinstPROGRAMS \\\n-\t\tdistclean-tags distclean-depend distclean-generic \\\n-\t\tclean-am\n+distclean-am:  distclean-hdr distclean-toolexeclibLIBRARIES \\\n+\t\tdistclean-compile distclean-libtool \\\n+\t\tdistclean-toolexeclibLTLIBRARIES distclean-binPROGRAMS \\\n+\t\tdistclean-noinstPROGRAMS distclean-tags \\\n+\t\tdistclean-depend distclean-generic clean-am\n \t-rm -f libtool\n \n distclean: distclean-recursive\n \t-rm -f config.status\n \n-maintainer-clean-am:  maintainer-clean-toolexeclibLIBRARIES \\\n+maintainer-clean-am:  maintainer-clean-hdr \\\n+\t\tmaintainer-clean-toolexeclibLIBRARIES \\\n \t\tmaintainer-clean-compile maintainer-clean-libtool \\\n \t\tmaintainer-clean-toolexeclibLTLIBRARIES \\\n \t\tmaintainer-clean-binPROGRAMS \\\n@@ -1636,7 +1666,8 @@ maintainer-clean-am:  maintainer-clean-toolexeclibLIBRARIES \\\n maintainer-clean: maintainer-clean-recursive\n \t-rm -f config.status\n \n-.PHONY: mostlyclean-toolexeclibLIBRARIES distclean-toolexeclibLIBRARIES \\\n+.PHONY: mostlyclean-hdr distclean-hdr clean-hdr maintainer-clean-hdr \\\n+mostlyclean-toolexeclibLIBRARIES distclean-toolexeclibLIBRARIES \\\n clean-toolexeclibLIBRARIES maintainer-clean-toolexeclibLIBRARIES \\\n uninstall-toolexeclibLIBRARIES install-toolexeclibLIBRARIES \\\n mostlyclean-compile distclean-compile clean-compile \\"}]}