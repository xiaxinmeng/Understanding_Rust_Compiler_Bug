{"sha": "44ef03008c75059368245eb3dcd6054bed3f7643", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDRlZjAzMDA4Yzc1MDU5MzY4MjQ1ZWIzZGNkNjA1NGJlZDNmNzY0Mw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-10-01T20:17:11Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-10-01T20:17:11Z"}, "message": "libgo: support x32 as GOARCH=amd64p32 GOOS=linux\n    \n    This is enough to let libgo build when configured using\n    --with-multilib-list=m64,m32,mx32.  I don't have an x32-enabled kernel\n    so I haven't tested whether it executes correctly.\n    \n    For https://gcc.gnu.org/PR87470\n    \n    Reviewed-on: https://go-review.googlesource.com/138817\n\nFrom-SVN: r264772", "tree": {"sha": "b5bbe87fcb0616ef9758a0ce62e988d331f879cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5bbe87fcb0616ef9758a0ce62e988d331f879cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44ef03008c75059368245eb3dcd6054bed3f7643", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44ef03008c75059368245eb3dcd6054bed3f7643", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44ef03008c75059368245eb3dcd6054bed3f7643", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44ef03008c75059368245eb3dcd6054bed3f7643/comments", "author": null, "committer": null, "parents": [{"sha": "1b28253347dedba72abaf81e86b1812863d07a11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b28253347dedba72abaf81e86b1812863d07a11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b28253347dedba72abaf81e86b1812863d07a11"}], "stats": {"total": 43, "additions": 38, "deletions": 5}, "files": [{"sha": "6ad214689fb7bafee33a0a812b86ae79c4cf845d", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ef03008c75059368245eb3dcd6054bed3f7643/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ef03008c75059368245eb3dcd6054bed3f7643/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=44ef03008c75059368245eb3dcd6054bed3f7643", "patch": "@@ -1,4 +1,4 @@\n-013a9e68c9a31f888733d46182d19f9e5d956f27\n+2f56d51c6b3104242613c74b02fa6c63a2fe16c5\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "f7996e115ebda1a9dc276364b4d340b5230a5181", "filename": "libgo/configure", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=44ef03008c75059368245eb3dcd6054bed3f7643", "patch": "@@ -13685,7 +13685,19 @@ _ACEOF\n if ac_fn_c_try_compile \"$LINENO\"; then :\n   GOARCH=386\n else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+\n+#ifdef __ILP32__\n+#error x32\n+#endif\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n   GOARCH=amd64\n+else\n+  GOARCH=amd64p32\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n     ;;"}, {"sha": "20ce205f2f434d266f2201d1b2360641ee35bb65", "filename": "libgo/configure.ac", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=44ef03008c75059368245eb3dcd6054bed3f7643", "patch": "@@ -252,8 +252,13 @@ changequote([,])dnl\n #ifdef __x86_64__\n #error 64-bit\n #endif],\n-[GOARCH=386],\n-[GOARCH=amd64])\n+\t[GOARCH=386],\n+\tAC_COMPILE_IFELSE([\n+#ifdef __ILP32__\n+#error x32\n+#endif],\n+\t[GOARCH=amd64],\n+\t[GOARCH=amd64p32]))\n     ;;\n   ia64-*-*)\n     GOARCH=ia64"}, {"sha": "f61b801b4184da28d88a4f38a20b4761506f28d1", "filename": "libgo/go/hash/crc32/crc32_amd64p32.go", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgo%2Fhash%2Fcrc32%2Fcrc32_amd64p32.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgo%2Fhash%2Fcrc32%2Fcrc32_amd64p32.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fhash%2Fcrc32%2Fcrc32_amd64p32.go?ref=44ef03008c75059368245eb3dcd6054bed3f7643", "patch": "@@ -2,6 +2,8 @@\n // Use of this source code is governed by a BSD-style\n // license that can be found in the LICENSE file.\n \n+// +build ignore\n+\n package crc32\n \n import \"internal/cpu\""}, {"sha": "911b6089ff3e6cbdcb9e1d343175605e571b4552", "filename": "libgo/go/internal/syscall/unix/getrandom_linux_amd64p32.go", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fgetrandom_linux_amd64p32.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fgetrandom_linux_amd64p32.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Finternal%2Fsyscall%2Funix%2Fgetrandom_linux_amd64p32.go?ref=44ef03008c75059368245eb3dcd6054bed3f7643", "patch": "@@ -0,0 +1,9 @@\n+// Copyright 2018 The Go Authors. All rights reserved.\n+// Use of this source code is governed by a BSD-style\n+// license that can be found in the LICENSE file.\n+\n+package unix\n+\n+// Linux getrandom system call number.\n+// See GetRandom in getrandom_linux.go.\n+const randomTrap uintptr = 0x40000000 + 318"}, {"sha": "f50c50895b491caa1fba8c411c934211c15349b6", "filename": "libgo/go/runtime/lfstack_32bit.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgo%2Fruntime%2Flfstack_32bit.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgo%2Fruntime%2Flfstack_32bit.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fruntime%2Flfstack_32bit.go?ref=44ef03008c75059368245eb3dcd6054bed3f7643", "patch": "@@ -2,7 +2,7 @@\n // Use of this source code is governed by a BSD-style\n // license that can be found in the LICENSE file.\n \n-// +build 386 arm nacl armbe m68k mips mipsle mips64p32 mips64p32le nios2 ppc s390 sh shbe sparc\n+// +build 386 amd64p32 arm nacl armbe m68k mips mipsle mips64p32 mips64p32le nios2 ppc s390 sh shbe sparc\n \n package runtime\n "}, {"sha": "f7aef9d7ddeb4f677dbcc7b18637a68477e9ed9c", "filename": "libgo/goarch.sh", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgoarch.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ef03008c75059368245eb3dcd6054bed3f7643/libgo%2Fgoarch.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgoarch.sh?ref=44ef03008c75059368245eb3dcd6054bed3f7643", "patch": "@@ -57,10 +57,15 @@ case $goarch in\n \tdefaultphyspagesize=8192\n \tpcquantum=4\n \t;;\n-    amd64 | amd64p32)\n+    amd64)\n \tfamily=AMD64\n \thugepagesize=\"1 << 21\"\n \t;;\n+    amd64p32)\n+\tfamily=AMD64\n+\thugepagesize=\"1 << 21\"\n+\tptrsize=4\n+\t;;\n     arm | armbe)\n \tfamily=ARM\n \tcachelinesize=32"}]}