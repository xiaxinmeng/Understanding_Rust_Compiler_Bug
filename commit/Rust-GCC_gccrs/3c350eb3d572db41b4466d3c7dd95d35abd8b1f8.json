{"sha": "3c350eb3d572db41b4466d3c7dd95d35abd8b1f8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2MzNTBlYjNkNTcyZGI0MWI0NDY2ZDNjN2RkOTVkMzVhYmQ4YjFmOA==", "commit": {"author": {"name": "Craig Burley", "email": "craig@jcb-sc.com", "date": "1999-02-22T08:35:11Z"}, "committer": {"name": "Craig Burley", "email": "burley@gcc.gnu.org", "date": "1999-02-22T08:35:11Z"}, "message": "fix -fsyntax-only ICEs\n\nFrom-SVN: r25365", "tree": {"sha": "32843906094e7f9114ba80354abb0cac412ac66f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/32843906094e7f9114ba80354abb0cac412ac66f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8/comments", "author": null, "committer": null, "parents": [{"sha": "e2e0986eb009914748986c469a89aae521805bfb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2e0986eb009914748986c469a89aae521805bfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2e0986eb009914748986c469a89aae521805bfb"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "74c103122be332e514613a92a57fb31324748ac4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3c350eb3d572db41b4466d3c7dd95d35abd8b1f8", "patch": "@@ -4,6 +4,12 @@ Mon Feb 22 10:55:00 1999  Gavin Romig-Koch  <gavin@cygnus.com>\n \tlarger than long-longs, with a warning about integer constants \n         being larger than the largest target integer.\n \n+Mon Feb 22 08:35:38 1999  Craig Burley  <craig@jcb-sc.com>\n+\n+\tFix -fsyntax-only ICEs:\n+\t* varasm.c (assemble_zeros, assemble_variable,\n+\toutput_constant_def): Do nothing when -fsyntax-only.\n+\n Fri Feb 19 18:18:56 1999  Don Bowman  <don@pixstream.com>\n \n \t* configure.in (mips*-*-vxworks*): Enable gthreads vxworks support."}, {"sha": "a247cd775afb77d2e5e9f683d842cc64d43cc883", "filename": "gcc/varasm.c", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c350eb3d572db41b4466d3c7dd95d35abd8b1f8/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=3c350eb3d572db41b4466d3c7dd95d35abd8b1f8", "patch": "@@ -1062,6 +1062,10 @@ void\n assemble_zeros (size)\n      int size;\n {\n+  /* Do no output if -fsyntax-only.  */\n+  if (flag_syntax_only)\n+    return;\n+\n #ifdef ASM_NO_SKIP_IN_TEXT\n   /* The `space' pseudo in the text section outputs nop insns rather than 0s,\n      so we must output 0s explicitly in the text section.  */\n@@ -1168,6 +1172,10 @@ assemble_variable (decl, top_level, at_end, dont_output_data)\n \treturn;\n       TREE_ASM_WRITTEN (decl) = 1;\n \n+      /* Do no output if -fsyntax-only.  */\n+      if (flag_syntax_only)\n+\treturn;\n+\n #if defined (DBX_DEBUGGING_INFO) || defined (XCOFF_DEBUGGING_INFO)\n       /* File-scope global variables are output here.  */\n       if ((write_symbols == DBX_DEBUG || write_symbols == XCOFF_DEBUG)\n@@ -1235,6 +1243,10 @@ assemble_variable (decl, top_level, at_end, dont_output_data)\n \n   TREE_ASM_WRITTEN (decl) = 1;\n \n+  /* Do no output if -fsyntax-only.  */\n+  if (flag_syntax_only)\n+    return;\n+\n   app_disable ();\n \n   if (! dont_output_data)\n@@ -3017,7 +3029,12 @@ output_constant_def (exp)\n \t    }\n \t}\n       else\n-\toutput_constant_def_contents (exp, reloc, const_labelno++);\n+\t{\n+\t  /* Do no output if -fsyntax-only.  */\n+\t  if (! flag_syntax_only)\n+\t    output_constant_def_contents (exp, reloc, const_labelno);\n+\t  ++const_labelno;\n+\t}\n     }\n \n   return TREE_CST_RTL (exp);"}]}