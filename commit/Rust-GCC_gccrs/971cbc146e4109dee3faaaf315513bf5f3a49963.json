{"sha": "971cbc146e4109dee3faaaf315513bf5f3a49963", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTcxY2JjMTQ2ZTQxMDlkZWUzZmFhYWYzMTU1MTNiZjVmM2E0OTk2Mw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-03-05T20:46:18Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-03-05T20:46:18Z"}, "message": "expr.c (cplus_expand_expr, [...]): Use expand_start_stmt_expr and expand_end_stmt_expr directly.\n\n\t* expr.c (cplus_expand_expr, case STMT_EXPR): Use\n\texpand_start_stmt_expr and expand_end_stmt_expr directly.  Set\n\tRTL_EXPR_HAS_NO_SCOPE.\n\n\t* pt.c (instantiate_decl): Clear TI_PENDING_TEMPLATE_FLAG a little\n\tlater.\n\n\t* dump.c (dequeue_and_dump): Dump SCOPE_NO_CLEANUPS_P.\n\nFrom-SVN: r32345", "tree": {"sha": "6d7e49043bdd0fb72e5fca632e820df584bec597", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d7e49043bdd0fb72e5fca632e820df584bec597"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/971cbc146e4109dee3faaaf315513bf5f3a49963", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/971cbc146e4109dee3faaaf315513bf5f3a49963", "html_url": "https://github.com/Rust-GCC/gccrs/commit/971cbc146e4109dee3faaaf315513bf5f3a49963", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/971cbc146e4109dee3faaaf315513bf5f3a49963/comments", "author": null, "committer": null, "parents": [{"sha": "9f93702662f417705f1fc306ffbd078fef8abe02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f93702662f417705f1fc306ffbd078fef8abe02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f93702662f417705f1fc306ffbd078fef8abe02"}], "stats": {"total": 24, "additions": 19, "deletions": 5}, "files": [{"sha": "d1f5473cfaa275facd08d2da520b29b281dfea00", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=971cbc146e4109dee3faaaf315513bf5f3a49963", "patch": "@@ -1,3 +1,14 @@\n+2000-03-05  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* expr.c (cplus_expand_expr, case STMT_EXPR): Use\n+\texpand_start_stmt_expr and expand_end_stmt_expr directly.  Set\n+\tRTL_EXPR_HAS_NO_SCOPE.\n+\n+\t* pt.c (instantiate_decl): Clear TI_PENDING_TEMPLATE_FLAG a little\n+\tlater.\n+\t\n+\t* dump.c (dequeue_and_dump): Dump SCOPE_NO_CLEANUPS_P.\n+\n 2000-03-05  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* call.c (convert_like): Macrofy."}, {"sha": "c8152d5336f6b47a14e752a339a7aab8aedf49f1", "filename": "gcc/cp/dump.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2Fdump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2Fdump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdump.c?ref=971cbc146e4109dee3faaaf315513bf5f3a49963", "patch": "@@ -768,6 +768,8 @@ dequeue_and_dump (di)\n \tdump_string (di, \"end\");\n       if (SCOPE_NULLIFIED_P (t))\n \tdump_string (di, \"null\");\n+      if (!SCOPE_NO_CLEANUPS_P (t))\n+\tdump_string (di, \"clnp\");\n       dump_next_stmt (di, t);\n       break;\n "}, {"sha": "f83518117067f99386aba219ba66b1e9ab325e9e", "filename": "gcc/cp/expr.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fexpr.c?ref=971cbc146e4109dee3faaaf315513bf5f3a49963", "patch": "@@ -145,9 +145,10 @@ cplus_expand_expr (exp, target, tmode, modifier)\n \n     case STMT_EXPR:\n       {\n-\ttree rtl_expr = begin_stmt_expr ();\n+\ttree rtl_expr = expand_start_stmt_expr ();\n \texpand_stmt (STMT_EXPR_STMT (exp));\n-\tfinish_stmt_expr (rtl_expr);\n+\texpand_end_stmt_expr (rtl_expr);\n+\tRTL_EXPR_HAS_NO_SCOPE (rtl_expr) = 1;\n \treturn expand_expr (rtl_expr, target, tmode, modifier);\n       }\n       break;"}, {"sha": "b9d4627865687b750710a14b3dfaf9e17479747f", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/971cbc146e4109dee3faaaf315513bf5f3a49963/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=971cbc146e4109dee3faaaf315513bf5f3a49963", "patch": "@@ -9569,9 +9569,6 @@ instantiate_decl (d)\n      try to instantiate it again.  */\n   DECL_TEMPLATE_INSTANTIATED (d) = 1;\n \n-  /* And we're not deferring instantiation any more.  */\n-  TI_PENDING_TEMPLATE_FLAG (DECL_TEMPLATE_INFO (d)) = 0;\n-\n   /* Regenerate the declaration in case the template has been modified\n      by a subsequent redeclaration.  */\n   regenerate_decl_from_template (d, td);\n@@ -9611,6 +9608,9 @@ instantiate_decl (d)\n       expand_body (finish_function (lineno, 0));\n     }\n \n+  /* We're not deferring instantiation any more.  */\n+  TI_PENDING_TEMPLATE_FLAG (DECL_TEMPLATE_INFO (d)) = 0;\n+\n out:\n   lineno = line;\n   input_filename = file;"}]}