{"sha": "9e3de74cdf7b5c6f3b762299a6492889429931c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWUzZGU3NGNkZjdiNWM2ZjNiNzYyMjk5YTY0OTI4ODk0Mjk5MzFjMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-11-26T20:54:37Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-11-26T20:54:37Z"}, "message": "re PR rtl-optimization/59166 (ICE in simplify_subreg, at simplify-rtx.c:5901 on valid code (at -O1 and above with -g enabled))\n\n\tPR rtl-optimization/59166\n\t* ira.c (find_moveable_pseudos): Use DF_REF_REAL_LOC instead of\n\tDF_REF_LOC in validate_change call.\n\t(split_live_ranges_for_shrink_wrap): Likewise.\n\n\t* gcc.dg/torture/pr59166.c: New test.\n\nFrom-SVN: r205413", "tree": {"sha": "24e0beaf45dda2fa9d828f649cefe0700c0a2ca9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24e0beaf45dda2fa9d828f649cefe0700c0a2ca9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e3de74cdf7b5c6f3b762299a6492889429931c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e3de74cdf7b5c6f3b762299a6492889429931c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e3de74cdf7b5c6f3b762299a6492889429931c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e3de74cdf7b5c6f3b762299a6492889429931c1/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5999f07fba49a339bed42319b2a304f521872931", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5999f07fba49a339bed42319b2a304f521872931", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5999f07fba49a339bed42319b2a304f521872931"}], "stats": {"total": 51, "additions": 48, "deletions": 3}, "files": [{"sha": "c2d977efdf259beb6925cc213359da72cfe14fcd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e3de74cdf7b5c6f3b762299a6492889429931c1", "patch": "@@ -1,5 +1,10 @@\n 2013-11-26  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR rtl-optimization/59166\n+\t* ira.c (find_moveable_pseudos): Use DF_REF_REAL_LOC instead of\n+\tDF_REF_LOC in validate_change call.\n+\t(split_live_ranges_for_shrink_wrap): Likewise.\n+\n \tPR middle-end/59150\n \t* omp-low.c (lower_rec_input_clause): For reduction with placeholder\n \tof references to constant size types in simd loops, defer emitting"}, {"sha": "cb2d94725b5d200d8ad19b9c847935b8f8916d62", "filename": "gcc/ira.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2Fira.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2Fira.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira.c?ref=9e3de74cdf7b5c6f3b762299a6492889429931c1", "patch": "@@ -4812,7 +4812,7 @@ find_moveable_pseudos (void)\n \t{\n \t  rtx def_reg = DF_REF_REG (def);\n \t  rtx newreg = ira_create_new_reg (def_reg);\n-\t  if (validate_change (def_insn, DF_REF_LOC (def), newreg, 0))\n+\t  if (validate_change (def_insn, DF_REF_REAL_LOC (def), newreg, 0))\n \t    {\n \t      unsigned nregno = REGNO (newreg);\n \t      emit_insn_before (gen_move_insn (def_reg, newreg), use_insn);\n@@ -5034,7 +5034,7 @@ split_live_ranges_for_shrink_wrap (void)\n \n       rtx newreg = NULL_RTX;\n       df_ref use, next;\n-      for (use = DF_REG_USE_CHAIN (REGNO(dest)); use; use = next)\n+      for (use = DF_REG_USE_CHAIN (REGNO (dest)); use; use = next)\n \t{\n \t  rtx uin = DF_REF_INSN (use);\n \t  next = DF_REF_NEXT_REG (use);\n@@ -5045,7 +5045,7 @@ split_live_ranges_for_shrink_wrap (void)\n \t    {\n \t      if (!newreg)\n \t\tnewreg = ira_create_new_reg (dest);\n-\t      validate_change (uin, DF_REF_LOC (use), newreg, true);\n+\t      validate_change (uin, DF_REF_REAL_LOC (use), newreg, true);\n \t    }\n \t}\n "}, {"sha": "fc50a051f2636eb8a9c8dec99a68edc0d58ffac7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9e3de74cdf7b5c6f3b762299a6492889429931c1", "patch": "@@ -1,5 +1,8 @@\n 2013-11-26  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR rtl-optimization/59166\n+\t* gcc.dg/torture/pr59166.c: New test.\n+\n \tPR c++/58874\n \t* g++.dg/gomp/pr58874.C: New test.\n "}, {"sha": "d29ec33e0f93d0d930ffa4dbf4c8696b867b1e15", "filename": "gcc/testsuite/gcc.dg/torture/pr59166.c", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr59166.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e3de74cdf7b5c6f3b762299a6492889429931c1/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr59166.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr59166.c?ref=9e3de74cdf7b5c6f3b762299a6492889429931c1", "patch": "@@ -0,0 +1,37 @@\n+/* PR rtl-optimization/59166 */\n+/* { dg-additional-options \"-fcompare-debug\" } */\n+\n+int a, b, c, f, g;\n+\n+void\n+foo ()\n+{\n+  for (; b; b++)\n+    for (; f; f = g)\n+      for (; a;)\n+\t;\n+}\n+\n+static int\n+bar (int p)\n+{\n+  short d;\n+  if (c)\n+    {\n+      for (; f; f = g);\n+      foo ();\n+      d = p;\n+      char e = d;\n+      if (p)\n+\treturn 1;\n+    }\n+  return p;\n+}\n+\n+int\n+main ()\n+{\n+  bar (0);\n+  bar (g);\n+  return 0;\n+}"}]}