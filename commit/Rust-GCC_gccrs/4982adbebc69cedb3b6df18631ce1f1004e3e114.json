{"sha": "4982adbebc69cedb3b6df18631ce1f1004e3e114", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDk4MmFkYmViYzY5Y2VkYjNiNmRmMTg2MzFjZTFmMTAwNGUzZTExNA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-12-03T10:40:18Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-12-03T10:40:18Z"}, "message": "config.if: Delete.\n\n\t* config.if: Delete.\n\t* configure.in: Set libstdcxx_incdir directly.\n\t* configure: Regenerate.\n\nFrom-SVN: r91679", "tree": {"sha": "68aa74ace108d73eedf10a7a9157e955ae39b486", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68aa74ace108d73eedf10a7a9157e955ae39b486"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4982adbebc69cedb3b6df18631ce1f1004e3e114", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4982adbebc69cedb3b6df18631ce1f1004e3e114", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4982adbebc69cedb3b6df18631ce1f1004e3e114", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4982adbebc69cedb3b6df18631ce1f1004e3e114/comments", "author": null, "committer": null, "parents": [{"sha": "ad1063d5454b3d745bea35909dc677344250d827", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad1063d5454b3d745bea35909dc677344250d827", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad1063d5454b3d745bea35909dc677344250d827"}], "stats": {"total": 105, "additions": 40, "deletions": 65}, "files": [{"sha": "7f07743625976b6d49fd34888d06876a5661535c", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4982adbebc69cedb3b6df18631ce1f1004e3e114/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4982adbebc69cedb3b6df18631ce1f1004e3e114/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=4982adbebc69cedb3b6df18631ce1f1004e3e114", "patch": "@@ -1,3 +1,9 @@\n+2004-12-03  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config.if: Delete.\n+\t* configure.in: Set libstdcxx_incdir directly.\n+\t* configure: Regenerate.\n+\n 2004-12-02  Eric Christopher  <echristo@redhat.com>\n \n \t* Makefile.tpl (clean-target-libgcc): Make change in correct place."}, {"sha": "2655bc3b56ab3744a04f85c723d21da6beec26af", "filename": "config.if", "status": "removed", "additions": 0, "deletions": 37, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ad1063d5454b3d745bea35909dc677344250d827/config.if", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ad1063d5454b3d745bea35909dc677344250d827/config.if", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config.if?ref=ad1063d5454b3d745bea35909dc677344250d827", "patch": "@@ -1,37 +0,0 @@\n-#! /dev/null\n-# Don't call it directly. This shell script fragment is called to\n-# determine:\n-#\n-#\t1. libstcxx_incdir: the interface name for libstdc++.\n-#\n-\n-# Get the top level src dir.\n-if [ -z \"${topsrcdir}\" -a -z \"${top_srcdir}\" ]\n-then\n-  echo \"Undefined top level src dir: topsrcdir and top_srcdir are empty\" >&2\n-  exit 1\n-fi\n-\n-if [ -n \"${topsrcdir}\" ]\n-then\n-  if_topsrcdir=${topsrcdir}\n-else\n-  if_topsrcdir=${top_srcdir}\n-fi\n-\n-# Set libstdcxx_incdir.\n-# This is the same as gcc/configure.in and libstdc++-v3/acinclude.m4. \n-if test -z \"$gcc_version\"; then\n-  if test -z \"${gcc_version_trigger}\" \\\n-     && test -f ${if_topsrcdir}/gcc/version.c; then\n-    gcc_version_trigger=${if_topsrcdir}/gcc/version.c\n-  fi    \n-  if test -f \"${gcc_version_trigger}\"; then\n-    gcc_version_full=`grep version_string \"${gcc_version_trigger}\" | sed -e 's/.*\"\\([^\"]*\\)\".*/\\1/'`\n-  else\n-    gcc_version_full=`$CC -v 2>&1 | sed -n 's/^gcc version //p'`\n-  fi\n-  gcc_version=`echo ${gcc_version_full} | sed -e 's/\\([^ ]*\\) .*/\\1/'`\n-fi\n-libstdcxx_incdir=c++/${gcc_version}\n-"}, {"sha": "65b13b8ca11f9af8ab4f4cdde4f9dbe93fd1d2a6", "filename": "configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4982adbebc69cedb3b6df18631ce1f1004e3e114/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4982adbebc69cedb3b6df18631ce1f1004e3e114/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=4982adbebc69cedb3b6df18631ce1f1004e3e114", "patch": "@@ -3387,7 +3387,7 @@ case \"${with_gxx_include_dir}\" in\n     case \"${enable_version_specific_runtime_libs}\" in\n       yes) gxx_include_dir='${libsubdir}/include/c++' ;;\n       *)\n-        . ${srcdir}/config.if\n+\tlibstdcxx_incdir=c++/${gcc_version}\n         gxx_include_dir='${prefix}/include/'${libstdcxx_incdir} ;;\n     esac ;;\n   *) gxx_include_dir=${with_gxx_include_dir} ;;"}, {"sha": "587bf926a06b230c7c2638af2ea349afccfe705e", "filename": "configure.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4982adbebc69cedb3b6df18631ce1f1004e3e114/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4982adbebc69cedb3b6df18631ce1f1004e3e114/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=4982adbebc69cedb3b6df18631ce1f1004e3e114", "patch": "@@ -1974,7 +1974,7 @@ case \"${with_gxx_include_dir}\" in\n     case \"${enable_version_specific_runtime_libs}\" in\n       yes) gxx_include_dir='${libsubdir}/include/c++' ;;\n       *)\n-        . ${srcdir}/config.if\n+\tlibstdcxx_incdir=c++/${gcc_version}\n         gxx_include_dir='${prefix}/include/'${libstdcxx_incdir} ;;\n     esac ;;\n   *) gxx_include_dir=${with_gxx_include_dir} ;;"}, {"sha": "64f3579d61de0735745c860714cae44515aeee4e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4982adbebc69cedb3b6df18631ce1f1004e3e114/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4982adbebc69cedb3b6df18631ce1f1004e3e114/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4982adbebc69cedb3b6df18631ce1f1004e3e114", "patch": "@@ -1,3 +1,9 @@\n+2004-12-03  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* configure.ac: Move TL_AC_GCC_VERSION into initialization section.\n+\tSet libstdcxx_incdir directly.\n+\t* configure: Regenerate.\n+\n 2004-12-03  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-ssa-dom.c (record_equivalences_from_phis): Remove an"}, {"sha": "5d1aa1e4aec3b2d46a2f00f18694b2209ecae181", "filename": "gcc/configure", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4982adbebc69cedb3b6df18631ce1f1004e3e114/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4982adbebc69cedb3b6df18631ce1f1004e3e114/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=4982adbebc69cedb3b6df18631ce1f1004e3e114", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LTLIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file gcc_version_trigger gcc_version_full gcc_version PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default set_gcc_lib_path GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical build_subdir host_subdir target_subdir gcc_version_trigger gcc_version_full gcc_version GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP EGREP strict1_warn warn_cflags WERROR nocommon_flag TREEBROWSER valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN_S LN RANLIB ac_ct_RANLIB ranlib_flags INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON NM AR stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LTLIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO collect2 libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines c_target_objs cxx_target_objs target_cpu_default set_gcc_lib_path GMPLIBS GMPINC LIBOBJS LTLIBOBJS'\n ac_subst_files='language_hooks'\n \n # Initialize some variables set by options.\n@@ -1601,6 +1601,23 @@ echo \"$as_me: error:\n    { (exit 1); exit 1; }; }\n fi\n \n+\n+if test \"${with_gcc_version_trigger+set}\" = set; then\n+  gcc_version_trigger=$with_gcc_version_trigger\n+else\n+  gcc_version_trigger=$srcdir/../gcc/version.c\n+fi\n+if test -f \"${gcc_version_trigger}\"; then\n+  gcc_version_full=`grep version_string \"${gcc_version_trigger}\" | sed -e 's/.*\"\\([^\"]*\\)\".*/\\1/'`\n+else\n+  gcc_version_full=`$CC -v 2>&1 | sed -n 's/^gcc version //p'`\n+fi\n+gcc_version=`echo ${gcc_version_full} | sed -e 's/\\([^ ]*\\) .*/\\1/'`\n+\n+\n+\n+\n+\n # -----------\n # Directories\n # -----------\n@@ -1647,7 +1664,7 @@ if test x${gcc_gxx_include_dir} = x; then\n   if test x${enable_version_specific_runtime_libs} = xyes; then\n     gcc_gxx_include_dir='${libsubdir}/include/c++'\n   else\n-    topsrcdir=${srcdir}/.. . ${srcdir}/../config.if\n+    libstdcxx_incdir=c++/${gcc_version}\n     gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/include/\"${libstdcxx_incdir}\n   fi\n fi\n@@ -7372,7 +7389,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:7375: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:7392: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -12185,23 +12202,6 @@ xm_file=\"ansidecl.h ${xm_file}\"\n # UNSORTED\n # --------\n \n-\n-if test \"${with_gcc_version_trigger+set}\" = set; then\n-  gcc_version_trigger=$with_gcc_version_trigger\n-else\n-  gcc_version_trigger=$srcdir/../gcc/version.c\n-fi\n-if test -f \"${gcc_version_trigger}\"; then\n-  gcc_version_full=`grep version_string \"${gcc_version_trigger}\" | sed -e 's/.*\"\\([^\"]*\\)\".*/\\1/'`\n-else\n-  gcc_version_full=`$CC -v 2>&1 | sed -n 's/^gcc version //p'`\n-fi\n-gcc_version=`echo ${gcc_version_full} | sed -e 's/\\([^ ]*\\) .*/\\1/'`\n-\n-\n-\n-\n-\n # Compile in configure arguments.\n if test -f configargs.h ; then\n \t# Being re-configured.\n@@ -15953,6 +15953,9 @@ s,@target_noncanonical@,$target_noncanonical,;t t\n s,@build_subdir@,$build_subdir,;t t\n s,@host_subdir@,$host_subdir,;t t\n s,@target_subdir@,$target_subdir,;t t\n+s,@gcc_version_trigger@,$gcc_version_trigger,;t t\n+s,@gcc_version_full@,$gcc_version_full,;t t\n+s,@gcc_version@,$gcc_version,;t t\n s,@GENINSRC@,$GENINSRC,;t t\n s,@CC@,$CC,;t t\n s,@CFLAGS@,$CFLAGS,;t t\n@@ -16011,9 +16014,6 @@ s,@manext@,$manext,;t t\n s,@objext@,$objext,;t t\n s,@gthread_flags@,$gthread_flags,;t t\n s,@extra_modes_file@,$extra_modes_file,;t t\n-s,@gcc_version_trigger@,$gcc_version_trigger,;t t\n-s,@gcc_version_full@,$gcc_version_full,;t t\n-s,@gcc_version@,$gcc_version,;t t\n s,@PACKAGE@,$PACKAGE,;t t\n s,@VERSION@,$VERSION,;t t\n s,@USE_NLS@,$USE_NLS,;t t"}, {"sha": "b261551045cedede3439f23475886c0dde6c6adb", "filename": "gcc/configure.ac", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4982adbebc69cedb3b6df18631ce1f1004e3e114/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4982adbebc69cedb3b6df18631ce1f1004e3e114/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=4982adbebc69cedb3b6df18631ce1f1004e3e114", "patch": "@@ -100,6 +100,8 @@ AC_MSG_ERROR([\n *** and run configure again.])\n fi\n \n+TL_AC_GCC_VERSION([$srcdir/..])\n+\n # -----------\n # Directories\n # -----------\n@@ -137,7 +139,7 @@ if test x${gcc_gxx_include_dir} = x; then\n   if test x${enable_version_specific_runtime_libs} = xyes; then\n     gcc_gxx_include_dir='${libsubdir}/include/c++'\n   else\n-    topsrcdir=${srcdir}/.. . ${srcdir}/../config.if\n+    libstdcxx_incdir=c++/${gcc_version}\n changequote(<<, >>)dnl\n     gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/include/\"${libstdcxx_incdir}\n changequote([, ])dnl\n@@ -1379,8 +1381,6 @@ xm_file=\"ansidecl.h ${xm_file}\"\n # UNSORTED\n # --------\n \n-TL_AC_GCC_VERSION([$srcdir/..])\n-\n changequote(,)dnl\n # Compile in configure arguments.\n if test -f configargs.h ; then"}]}