{"sha": "ab530ea8b8d089c3e11eb054b8e5680540ca0203", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI1MzBlYThiOGQwODljM2UxMWViMDU0YjhlNTY4MDU0MGNhMDIwMw==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2004-01-17T07:46:49Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2004-01-17T07:46:49Z"}, "message": "cfgrtl.c (try_redirect_by_replacing_jump): Optimize tablejumps even after reload, just don't remove the actual jump tables.\n\n\t* cfgrtl.c (try_redirect_by_replacing_jump): Optimize tablejumps\n\teven after reload, just don't remove the actual jump tables.\n\nFrom-SVN: r76028", "tree": {"sha": "390dbdb10bedab490d434c7af0fe7cd3ed62c00b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/390dbdb10bedab490d434c7af0fe7cd3ed62c00b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab530ea8b8d089c3e11eb054b8e5680540ca0203", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab530ea8b8d089c3e11eb054b8e5680540ca0203", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab530ea8b8d089c3e11eb054b8e5680540ca0203", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab530ea8b8d089c3e11eb054b8e5680540ca0203/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "53dd3be37fbb18aa5d4be96f40c34b19d6634a91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53dd3be37fbb18aa5d4be96f40c34b19d6634a91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53dd3be37fbb18aa5d4be96f40c34b19d6634a91"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "b039e860ee2f7d7b4bc99a305c7c1e0d5b764169", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab530ea8b8d089c3e11eb054b8e5680540ca0203/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab530ea8b8d089c3e11eb054b8e5680540ca0203/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ab530ea8b8d089c3e11eb054b8e5680540ca0203", "patch": "@@ -1,3 +1,8 @@\n+2004-01-16  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* cfgrtl.c (try_redirect_by_replacing_jump): Optimize tablejumps\n+\teven after reload, just don't remove the actual jump tables.\n+\n 2004-01-17  J. Brobecker  <brobecker@gnat.com>\n \n \t* dwarf2out.c (is_subrange_type): Renamed from is_ada_subrange_type()."}, {"sha": "9bf10f5fd8c28638bed7020ec89ad638a0faa697", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab530ea8b8d089c3e11eb054b8e5680540ca0203/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab530ea8b8d089c3e11eb054b8e5680540ca0203/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=ab530ea8b8d089c3e11eb054b8e5680540ca0203", "patch": "@@ -703,7 +703,7 @@ try_redirect_by_replacing_jump (edge e, basic_block target, bool in_cfglayout)\n \n   if (tmp || !onlyjump_p (insn))\n     return false;\n-  if ((!optimize || reload_completed) && tablejump_p (insn, NULL, NULL))\n+  if ((!optimize || flow2_completed) && tablejump_p (insn, NULL, NULL))\n     return false;\n \n   /* Avoid removing branch with side effects.  */\n@@ -793,7 +793,7 @@ try_redirect_by_replacing_jump (edge e, basic_block target, bool in_cfglayout)\n       /* Recognize a tablejump that we are converting to a\n \t simple jump and remove its associated CODE_LABEL\n \t and ADDR_VEC or ADDR_DIFF_VEC.  */\n-      if (tablejump_p (insn, &label, &table))\n+      if (! reload_completed && tablejump_p (insn, &label, &table))\n \tdelete_insn_chain (label, table);\n \n       barrier = next_nonnote_insn (BB_END (src));"}]}