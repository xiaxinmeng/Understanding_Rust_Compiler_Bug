{"sha": "6c02751b14035a957cd17450909605fa973b3b27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmMwMjc1MWIxNDAzNWE5NTdjZDE3NDUwOTA5NjA1ZmE5NzNiM2IyNw==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2005-02-02T21:58:46Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2005-02-02T21:58:46Z"}, "message": "re PR c++/17413 (local classes as template argument)\n\n\tPR c++/17413\n\t* pt.c (check_instantiated_args): Improve error message.\n\tFix logic when to print its second part.\n\n\tPR c++/17413\n\t* g++.dg/template/local4.C: Tweak.\n\nFrom-SVN: r94618", "tree": {"sha": "c59586e3e6430820b1419013af9228ee2f7302f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c59586e3e6430820b1419013af9228ee2f7302f5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c02751b14035a957cd17450909605fa973b3b27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c02751b14035a957cd17450909605fa973b3b27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c02751b14035a957cd17450909605fa973b3b27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c02751b14035a957cd17450909605fa973b3b27/comments", "author": null, "committer": null, "parents": [{"sha": "b5870beeee4a54ffbbc0d7fa75ffe74c6804b09e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5870beeee4a54ffbbc0d7fa75ffe74c6804b09e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5870beeee4a54ffbbc0d7fa75ffe74c6804b09e"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "0aca2e0136e91493ea9fc971e8bdb2de79c28587", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6c02751b14035a957cd17450909605fa973b3b27", "patch": "@@ -1,3 +1,9 @@\n+2005-02-02  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/17413\n+\t* pt.c (check_instantiated_args): Improve error message.\n+\tFix logic when to print its second part.\n+\n 2005-02-02  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \t* cp-tree.h (complete_type_or_else): Remove macro."}, {"sha": "0e6ce130f8d383471a48d93dcdf831f2a9ff0422", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=6c02751b14035a957cd17450909605fa973b3b27", "patch": "@@ -8903,6 +8903,7 @@ check_instantiated_args (tree tmpl, tree args, tsubst_flags_t complain)\n {\n   int ix, len = DECL_NTPARMS (tmpl);\n   bool result = false;\n+  bool error_p = complain & tf_error;\n \n   for (ix = 0; ix != len; ix++)\n     {\n@@ -8920,10 +8921,11 @@ check_instantiated_args (tree tmpl, tree args, tsubst_flags_t complain)\n \t  if (nt)\n \t    {\n \t      if (TYPE_ANONYMOUS_P (nt))\n-\t\terror (\"%qT uses anonymous type\", t);\n+\t\terror (\"%qT is/uses anonymous type\", t);\n \t      else\n \t\terror (\"%qT uses local type %qT\", t, nt);\n \t      result = true;\n+\t      error_p = true;\n \t    }\n \t  /* In order to avoid all sorts of complications, we do not\n \t     allow variably-modified types as template arguments.  */\n@@ -8945,7 +8947,7 @@ check_instantiated_args (tree tmpl, tree args, tsubst_flags_t complain)\n \t  result = true;\n \t}\n     }\n-  if (result && complain & tf_error)\n+  if (result && error_p)\n     error (\"  trying to instantiate %qD\", tmpl);\n   return result;\n }"}, {"sha": "e83ff1a7800daa0db9cb5ec950a2825c25da62b2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6c02751b14035a957cd17450909605fa973b3b27", "patch": "@@ -1,3 +1,8 @@\n+2005-02-02  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n+\n+\tPR c++/17413\n+\t* g++.dg/template/local4.C: Tweak.\n+\n 2005-02-02  Richard Sandiford  <rsandifo@redhat.com>\n \n \tPR tree-optimization/19578"}, {"sha": "748810b409ecb9713685d04d5f5080e4c8ef336a", "filename": "gcc/testsuite/g++.dg/template/local4.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Flocal4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c02751b14035a957cd17450909605fa973b3b27/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Flocal4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Flocal4.C?ref=6c02751b14035a957cd17450909605fa973b3b27", "patch": "@@ -7,5 +7,5 @@ int main () {\n   // We do not simply use \"local|match\" on line 10 because we want to\n   // make sure that \"local\" appears.\n   // { dg-error \"local\" \"\" { target *-*-* } 10 }\n-  foo<S> (); // { dg-error \"match\" } \n+  foo<S> (); // { dg-error \"trying|match\" } \n }"}]}