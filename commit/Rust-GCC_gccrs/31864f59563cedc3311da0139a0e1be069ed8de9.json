{"sha": "31864f59563cedc3311da0139a0e1be069ed8de9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzE4NjRmNTk1NjNjZWRjMzMxMWRhMDEzOWEwZTFiZTA2OWVkOGRlOQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-11-08T22:41:40Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-11-08T22:41:40Z"}, "message": "tree-cfg.c (thread_jumps): Speed up by keeping a pointer to the last used element in the worklist.\n\n\t* tree-cfg.c (thread_jumps): Speed up by keeping a pointer to\n\tthe last used element in the worklist.\n\nFrom-SVN: r90314", "tree": {"sha": "ec56bc6d355d6883616455c1023dc6a3fce63600", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec56bc6d355d6883616455c1023dc6a3fce63600"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31864f59563cedc3311da0139a0e1be069ed8de9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31864f59563cedc3311da0139a0e1be069ed8de9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31864f59563cedc3311da0139a0e1be069ed8de9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31864f59563cedc3311da0139a0e1be069ed8de9/comments", "author": null, "committer": null, "parents": [{"sha": "892c7e1ec64650c6759c5f7f33f980ff8df9f464", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/892c7e1ec64650c6759c5f7f33f980ff8df9f464", "html_url": "https://github.com/Rust-GCC/gccrs/commit/892c7e1ec64650c6759c5f7f33f980ff8df9f464"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "c373c836ed7cc8278349241d8dfff2bfb5bb131d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31864f59563cedc3311da0139a0e1be069ed8de9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31864f59563cedc3311da0139a0e1be069ed8de9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=31864f59563cedc3311da0139a0e1be069ed8de9", "patch": "@@ -1,3 +1,8 @@\n+2004-11-08  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* tree-cfg.c (thread_jumps): Speed up by keeping a pointer to\n+\tthe last used element in the worklist.\n+\n 2004-11-08  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-inline.c (remap_save_expr): Make it static."}, {"sha": "8dfaffb13b0e76522a87228b507459010f22f227", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31864f59563cedc3311da0139a0e1be069ed8de9/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31864f59563cedc3311da0139a0e1be069ed8de9/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=31864f59563cedc3311da0139a0e1be069ed8de9", "patch": "@@ -3934,7 +3934,7 @@ thread_jumps (void)\n   basic_block bb;\n   bool retval = false;\n   basic_block *worklist = xmalloc (sizeof (basic_block) * last_basic_block);\n-  unsigned int size = 0;\n+  basic_block *current = worklist;\n \n   FOR_EACH_BB (bb)\n     {\n@@ -3974,17 +3974,15 @@ thread_jumps (void)\n \t      && !bb_ann (e->src)->forwardable)\n \t    {\n \t      e->src->flags |= BB_VISITED;\n-\t      worklist[size] = e->src;\n-\t      size++;\n+\t      *current++ = e->src;\n \t    }\n \t}\n     }\n \n   /* Now let's drain WORKLIST.  */\n-  while (size > 0)\n+  while (worklist != current)\n     {\n-      size--;\n-      bb = worklist[size];\n+      bb = *--current;\n \n       /* BB is no longer in WORKLIST, so clear BB_VISITED.  */\n       bb->flags &= ~BB_VISITED;\n@@ -4013,8 +4011,7 @@ thread_jumps (void)\n \t\t      && !bb_ann (f->src)->forwardable)\n \t\t    {\n \t\t      f->src->flags |= BB_VISITED;\n-\t\t      worklist[size] = f->src;\n-\t\t      size++;\n+\t\t      *current++ = f->src;\n \t\t    }\n \t\t}\n \t    }"}]}