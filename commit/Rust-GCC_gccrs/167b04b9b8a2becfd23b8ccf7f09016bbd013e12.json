{"sha": "167b04b9b8a2becfd23b8ccf7f09016bbd013e12", "node_id": "C_kwDOANBUbNoAKDE2N2IwNGI5YjhhMmJlY2ZkMjNiOGNjZjdmMDkwMTZiYmQwMTNlMTI", "commit": {"author": {"name": "Monk Chiang", "email": "monk.chiang@sifive.com", "date": "2023-02-03T04:58:51Z"}, "committer": {"name": "Kito Cheng", "email": "kito.cheng@sifive.com", "date": "2023-02-03T06:57:42Z"}, "message": "RISC-V: Remove unnecessary register class.\n\nAvoid VL_REGS, VTYPE_REGS join register allocation.\n\ngcc/ChangeLog:\n\n\t* config/riscv/riscv.h: Remove VL_REGS, VTYPE_REGS class.\n\t* config/riscv/riscv.cc: Ditto.", "tree": {"sha": "ea95dfd51458848dd1080f777c1d85f3df909728", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea95dfd51458848dd1080f777c1d85f3df909728"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/167b04b9b8a2becfd23b8ccf7f09016bbd013e12", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/167b04b9b8a2becfd23b8ccf7f09016bbd013e12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/167b04b9b8a2becfd23b8ccf7f09016bbd013e12", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/167b04b9b8a2becfd23b8ccf7f09016bbd013e12/comments", "author": {"login": "monkchiang", "id": 62004175, "node_id": "MDQ6VXNlcjYyMDA0MTc1", "avatar_url": "https://avatars.githubusercontent.com/u/62004175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monkchiang", "html_url": "https://github.com/monkchiang", "followers_url": "https://api.github.com/users/monkchiang/followers", "following_url": "https://api.github.com/users/monkchiang/following{/other_user}", "gists_url": "https://api.github.com/users/monkchiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/monkchiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monkchiang/subscriptions", "organizations_url": "https://api.github.com/users/monkchiang/orgs", "repos_url": "https://api.github.com/users/monkchiang/repos", "events_url": "https://api.github.com/users/monkchiang/events{/privacy}", "received_events_url": "https://api.github.com/users/monkchiang/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kito-cheng", "id": 2723185, "node_id": "MDQ6VXNlcjI3MjMxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/2723185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kito-cheng", "html_url": "https://github.com/kito-cheng", "followers_url": "https://api.github.com/users/kito-cheng/followers", "following_url": "https://api.github.com/users/kito-cheng/following{/other_user}", "gists_url": "https://api.github.com/users/kito-cheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/kito-cheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kito-cheng/subscriptions", "organizations_url": "https://api.github.com/users/kito-cheng/orgs", "repos_url": "https://api.github.com/users/kito-cheng/repos", "events_url": "https://api.github.com/users/kito-cheng/events{/privacy}", "received_events_url": "https://api.github.com/users/kito-cheng/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3a10f4fff3d6751aa65df58b8629f84a0c04545", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3a10f4fff3d6751aa65df58b8629f84a0c04545", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3a10f4fff3d6751aa65df58b8629f84a0c04545"}], "stats": {"total": 16, "additions": 2, "deletions": 14}, "files": [{"sha": "3b7804b7501d4ed5a0114bceb20e34381d6cd913", "filename": "gcc/config/riscv/riscv.cc", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/167b04b9b8a2becfd23b8ccf7f09016bbd013e12/gcc%2Fconfig%2Friscv%2Friscv.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/167b04b9b8a2becfd23b8ccf7f09016bbd013e12/gcc%2Fconfig%2Friscv%2Friscv.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.cc?ref=167b04b9b8a2becfd23b8ccf7f09016bbd013e12", "patch": "@@ -293,7 +293,7 @@ const enum reg_class riscv_regno_to_class[FIRST_PSEUDO_REGISTER] = {\n   FP_REGS,\tFP_REGS,\tFP_REGS,\tFP_REGS,\n   FP_REGS,\tFP_REGS,\tFP_REGS,\tFP_REGS,\n   FP_REGS,\tFP_REGS,\tFP_REGS,\tFP_REGS,\n-  FRAME_REGS,\tFRAME_REGS,\tVL_REGS,\tVTYPE_REGS,\n+  FRAME_REGS,\tFRAME_REGS,\tNO_REGS,\tNO_REGS,\n   NO_REGS,\tNO_REGS,\tNO_REGS,\tNO_REGS,\n   NO_REGS,\tNO_REGS,\tNO_REGS,\tNO_REGS,\n   NO_REGS,\tNO_REGS,\tNO_REGS,\tNO_REGS,\n@@ -5831,12 +5831,6 @@ riscv_class_max_nregs (reg_class_t rclass, machine_mode mode)\n   if (reg_class_subset_p (rclass, V_REGS))\n     return riscv_hard_regno_nregs (V_REG_FIRST, mode);\n \n-  if (reg_class_subset_p (rclass, VL_REGS))\n-    return 1;\n-\n-  if (reg_class_subset_p (rclass, VTYPE_REGS))\n-    return 1;\n-\n   return 0;\n }\n "}, {"sha": "faffd5a77fe48550db2548afe7650762ac58dc40", "filename": "gcc/config/riscv/riscv.h", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/167b04b9b8a2becfd23b8ccf7f09016bbd013e12/gcc%2Fconfig%2Friscv%2Friscv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/167b04b9b8a2becfd23b8ccf7f09016bbd013e12/gcc%2Fconfig%2Friscv%2Friscv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.h?ref=167b04b9b8a2becfd23b8ccf7f09016bbd013e12", "patch": "@@ -462,8 +462,6 @@ enum reg_class\n   GR_REGS,\t\t\t/* integer registers */\n   FP_REGS,\t\t\t/* floating-point registers */\n   FRAME_REGS,\t\t\t/* arg pointer and frame pointer */\n-  VL_REGS,\t\t\t/* vl register */\n-  VTYPE_REGS,\t\t\t/* vtype register */\n   VM_REGS,\t\t\t/* v0.t registers */\n   VD_REGS,\t\t\t/* vector registers except v0.t */\n   V_REGS,\t\t\t/* vector registers */\n@@ -487,8 +485,6 @@ enum reg_class\n   \"GR_REGS\",\t\t\t\t\t\t\t\t\\\n   \"FP_REGS\",\t\t\t\t\t\t\t\t\\\n   \"FRAME_REGS\",\t\t\t\t\t\t\t\t\\\n-  \"VL_REGS\",\t\t\t\t\t\t\t\t\\\n-  \"VTYPE_REGS\",\t\t\t\t\t\t\t\t\\\n   \"VM_REGS\",\t\t\t\t\t\t\t\t\\\n   \"VD_REGS\",\t\t\t\t\t\t\t\t\\\n   \"V_REGS\",\t\t\t\t\t\t\t\t\\\n@@ -514,12 +510,10 @@ enum reg_class\n   { 0xffffffff, 0x00000000, 0x00000000, 0x00000000 },\t/* GR_REGS */\t\t\\\n   { 0x00000000, 0xffffffff, 0x00000000, 0x00000000 },\t/* FP_REGS */\t\t\\\n   { 0x00000000, 0x00000000, 0x00000003, 0x00000000 },\t/* FRAME_REGS */\t\\\n-  { 0x00000000, 0x00000000, 0x00000004, 0x00000000 },\t/* VL_REGS */\t\t\\\n-  { 0x00000000, 0x00000000, 0x00000008, 0x00000000 },\t/* VTYPE_REGS */\t\\\n   { 0x00000000, 0x00000000, 0x00000000, 0x00000001 },\t/* V0_REGS */\t\t\\\n   { 0x00000000, 0x00000000, 0x00000000, 0xfffffffe },\t/* VNoV0_REGS */\t\\\n   { 0x00000000, 0x00000000, 0x00000000, 0xffffffff },\t/* V_REGS */\t\t\\\n-  { 0xffffffff, 0xffffffff, 0x0000000f, 0xffffffff }\t/* ALL_REGS */\t\t\\\n+  { 0xffffffff, 0xffffffff, 0x00000003, 0xffffffff }\t/* ALL_REGS */\t\t\\\n }\n \n /* A C expression whose value is a register class containing hard"}]}