{"sha": "2aca912d657a18f70c1eb03181fb8921828c7829", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFjYTkxMmQ2NTdhMThmNzBjMWViMDMxODFmYjg5MjE4MjhjNzgyOQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernd.schmidt@analog.com", "date": "2008-10-22T22:47:05Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2008-10-22T22:47:05Z"}, "message": "bfin.c (bdesc_2arg): Add mulhisill, mulhisilh, mulhisihl and mulhisihh builtins.\n\ngcc/:\n\t* config/bfin/bfin.c (bdesc_2arg): Add mulhisill, mulhisilh,\n\tmulhisihl and mulhisihh builtins.\n\ngcc/testsuite/:\n\t* gcc.target/bfin/hisilh.c: New file.\n\t* gcc.target/bfin/hisilh-O0.c: New file.\n\nFrom-SVN: r141312", "tree": {"sha": "61ea2c232e09b5fd6ea9cd9b24ac7e91285b8ab0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61ea2c232e09b5fd6ea9cd9b24ac7e91285b8ab0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2aca912d657a18f70c1eb03181fb8921828c7829", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aca912d657a18f70c1eb03181fb8921828c7829", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2aca912d657a18f70c1eb03181fb8921828c7829", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aca912d657a18f70c1eb03181fb8921828c7829/comments", "author": null, "committer": null, "parents": [{"sha": "23cf1526e3cc3fd35b1c3584e52e62f9b7183a2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23cf1526e3cc3fd35b1c3584e52e62f9b7183a2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23cf1526e3cc3fd35b1c3584e52e62f9b7183a2b"}], "stats": {"total": 106, "additions": 105, "deletions": 1}, "files": [{"sha": "bd8ba33d173c771fdf2099a8ef442735a2d1fb5b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2aca912d657a18f70c1eb03181fb8921828c7829", "patch": "@@ -1,5 +1,8 @@\n 2008-10-23  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n+\t* config/bfin/bfin.c (bdesc_2arg): Add mulhisill, mulhisilh,\n+\tmulhisihl and mulhisihh builtins.\n+\n \tFrom Jie Zhang  <jie.zhang@analog.com>\n \t* config/bfin/bfin.md (composev2hi): Put operands into vector\n \twith correct order."}, {"sha": "3421dd07f78635bde5aead1017f5e61251356e5d", "filename": "gcc/config/bfin/bfin.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Fconfig%2Fbfin%2Fbfin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Fconfig%2Fbfin%2Fbfin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.c?ref=2aca912d657a18f70c1eb03181fb8921828c7829", "patch": "@@ -5669,7 +5669,13 @@ static const struct builtin_description bdesc_2arg[] =\n   { CODE_FOR_flag_mulhi, \"__builtin_bfin_mult_fr1x16\", BFIN_BUILTIN_MULT_1X16, MACFLAG_T },\n   { CODE_FOR_flag_mulhi, \"__builtin_bfin_multr_fr1x16\", BFIN_BUILTIN_MULTR_1X16, MACFLAG_NONE },\n   { CODE_FOR_flag_mulv2hi, \"__builtin_bfin_mult_fr2x16\", BFIN_BUILTIN_MULT_2X16, MACFLAG_T },\n-  { CODE_FOR_flag_mulv2hi, \"__builtin_bfin_multr_fr2x16\", BFIN_BUILTIN_MULTR_2X16, MACFLAG_NONE }\n+  { CODE_FOR_flag_mulv2hi, \"__builtin_bfin_multr_fr2x16\", BFIN_BUILTIN_MULTR_2X16, MACFLAG_NONE },\n+\n+  { CODE_FOR_mulhisi_ll, \"__builtin_bfin_mulhisill\", BFIN_BUILTIN_MULHISILL, -1 },\n+  { CODE_FOR_mulhisi_lh, \"__builtin_bfin_mulhisilh\", BFIN_BUILTIN_MULHISILH, -1 },\n+  { CODE_FOR_mulhisi_hl, \"__builtin_bfin_mulhisihl\", BFIN_BUILTIN_MULHISIHL, -1 },\n+  { CODE_FOR_mulhisi_hh, \"__builtin_bfin_mulhisihh\", BFIN_BUILTIN_MULHISIHH, -1 }\n+\n };\n \n static const struct builtin_description bdesc_1arg[] ="}, {"sha": "583ddbc250a4d26563b9607545fc9a665a28bd3e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2aca912d657a18f70c1eb03181fb8921828c7829", "patch": "@@ -1,5 +1,8 @@\n 2008-10-22  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n+\t* gcc.target/bfin/hisilh.c: New file.\n+\t* gcc.target/bfin/hisilh-O0.c: New file.\n+\n \tFrom Mike Frysinger  <michael.frysinger@analog.com>\n \t* gcc.target/bfin/mcpu-bf522.c: Check SILICON_REVISION is 0x0002.  Invert\n \tcheck for __WORKAROUND_RETS when SILICON_REVISION is 0x0002+."}, {"sha": "50786b8be67037260db28c096422513ff2032c69", "filename": "gcc/testsuite/gcc.target/bfin/hisilh-O0.c", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Ftestsuite%2Fgcc.target%2Fbfin%2Fhisilh-O0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Ftestsuite%2Fgcc.target%2Fbfin%2Fhisilh-O0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fbfin%2Fhisilh-O0.c?ref=2aca912d657a18f70c1eb03181fb8921828c7829", "patch": "@@ -0,0 +1,46 @@\n+/* { dg-do run { target bfin*-*-* } } */\n+/* { dg-options \"-O0\" } */\n+#include <stdlib.h>\n+typedef short raw2x16 __attribute__ ((vector_size(4)));\n+\n+int x;\n+\n+int ll(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisill(a, b);\n+    return x;\n+}\n+\n+int lh(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisilh(a, b);\n+    return x;\n+}\n+\n+int hl(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisihl(a, b);\n+    return x;\n+}\n+\n+int hh(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisihh(a, b);\n+    return x;\n+}\n+\n+int main ()\n+{\n+    raw2x16 a = __builtin_bfin_compose_2x16 (0x1234, 0x5678);\n+    raw2x16 b = __builtin_bfin_compose_2x16 (0xFEDC, 0xBA98);\n+    if (ll (a, b) != 0xe88e8740)\n+\tabort ();\n+    if (lh (a, b) != 0xff9d5f20)\n+\tabort ();\n+    if (hl (a, b) != 0xfb1096e0)\n+\tabort ();\n+    if (hh (a, b) != 0xffeb3cb0)\n+\tabort ();\n+    \n+    return 0;\n+}"}, {"sha": "4efbfd44915f1e270309fd64687be227074fb003", "filename": "gcc/testsuite/gcc.target/bfin/hisilh.c", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Ftestsuite%2Fgcc.target%2Fbfin%2Fhisilh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2aca912d657a18f70c1eb03181fb8921828c7829/gcc%2Ftestsuite%2Fgcc.target%2Fbfin%2Fhisilh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fbfin%2Fhisilh.c?ref=2aca912d657a18f70c1eb03181fb8921828c7829", "patch": "@@ -0,0 +1,46 @@\n+/* { dg-do run { target bfin*-*-* } } */\n+/* { dg-options \"-O2\" } */\n+#include <stdlib.h>\n+typedef short raw2x16 __attribute__ ((vector_size(4)));\n+\n+int x;\n+\n+int ll(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisill(a, b);\n+    return x;\n+}\n+\n+int lh(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisilh(a, b);\n+    return x;\n+}\n+\n+int hl(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisihl(a, b);\n+    return x;\n+}\n+\n+int hh(raw2x16 a, raw2x16 b)\n+{\n+    x = __builtin_bfin_mulhisihh(a, b);\n+    return x;\n+}\n+\n+int main ()\n+{\n+    raw2x16 a = __builtin_bfin_compose_2x16 (0x1234, 0x5678);\n+    raw2x16 b = __builtin_bfin_compose_2x16 (0xFEDC, 0xBA98);\n+    if (ll (a, b) != 0xe88e8740)\n+\tabort ();\n+    if (lh (a, b) != 0xff9d5f20)\n+\tabort ();\n+    if (hl (a, b) != 0xfb1096e0)\n+\tabort ();\n+    if (hh (a, b) != 0xffeb3cb0)\n+\tabort ();\n+    \n+    return 0;\n+}"}]}