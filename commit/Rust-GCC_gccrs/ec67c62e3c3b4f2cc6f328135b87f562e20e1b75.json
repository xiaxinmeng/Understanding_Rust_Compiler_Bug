{"sha": "ec67c62e3c3b4f2cc6f328135b87f562e20e1b75", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWM2N2M2MmUzYzNiNGYyY2M2ZjMyODEzNWI4N2Y1NjJlMjBlMWI3NQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2016-06-13T17:44:12Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2016-06-13T17:44:12Z"}, "message": "tree-ssa-sccvn.c (vn_reference_lookup_3): Use a uniform test and update shared_lookup_references only once after changing...\n\n\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Use a uniform test and\n\tupdate shared_lookup_references only once after changing operands.\n\nFrom-SVN: r237388", "tree": {"sha": "81bb2a02f5c31224f0fa271f5c363233b4162739", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81bb2a02f5c31224f0fa271f5c363233b4162739"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75/comments", "author": null, "committer": null, "parents": [{"sha": "f7e4f2e3f34178795180ed6160b135eb7072c987", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7e4f2e3f34178795180ed6160b135eb7072c987", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7e4f2e3f34178795180ed6160b135eb7072c987"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "b1026bdcf47dd7130d5f304b47c912416311d234", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ec67c62e3c3b4f2cc6f328135b87f562e20e1b75", "patch": "@@ -1,3 +1,8 @@\n+2016-06-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Use a uniform test and\n+\tupdate shared_lookup_references only once after changing operands.\n+\n 2016-06-13  Thomas Schwinge  <thomas@codesourcery.com>\n \n \tPR middle-end/71373"}, {"sha": "0cbd2cd56f24bba09f95fe9d6ae50a62535cca6d", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec67c62e3c3b4f2cc6f328135b87f562e20e1b75/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=ec67c62e3c3b4f2cc6f328135b87f562e20e1b75", "patch": "@@ -2089,11 +2089,7 @@ vn_reference_lookup_3 (ao_ref *ref, tree vuse, void *vr_,\n       /* We need to pre-pend vr->operands[0..i] to rhs.  */\n       vec<vn_reference_op_s> old = vr->operands;\n       if (i + 1 + rhs.length () > vr->operands.length ())\n-\t{\n-\t  vr->operands.safe_grow (i + 1 + rhs.length ());\n-\t  if (old == shared_lookup_references)\n-\t    shared_lookup_references = vr->operands;\n-\t}\n+\tvr->operands.safe_grow (i + 1 + rhs.length ());\n       else\n \tvr->operands.truncate (i + 1 + rhs.length ());\n       FOR_EACH_VEC_ELT (rhs, j, vro)\n@@ -2244,8 +2240,7 @@ vn_reference_lookup_3 (ao_ref *ref, tree vuse, void *vr_,\n \t{\n \t  vec<vn_reference_op_s> old = vr->operands;\n \t  vr->operands.safe_grow_cleared (2);\n-\t  if (old == shared_lookup_references\n-\t      && vr->operands != old)\n+\t  if (old == shared_lookup_references)\n \t    shared_lookup_references = vr->operands;\n \t}\n       else"}]}