{"sha": "a3b50977d934b27d0683fb9bf75309dceda2a098", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNiNTA5NzdkOTM0YjI3ZDA2ODNmYjliZjc1MzA5ZGNlZGEyYTA5OA==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2013-12-13T21:58:29Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2013-12-13T21:58:29Z"}, "message": "msp430.md (movqi): replace general_operand with msp_general_operand and nonimmediate_operand with...\n\n* config/msp430/msp430.md (movqi): replace general_operand with\nmsp_general_operand and nonimmediate_operand with\nmsp_nonimmediate_operand to allow volatile operands.\n(movhi): Likewise.\n(movpsi): Likewise.\n(addpsi3): Likewise.\n(addhi3): Likewise.\n(addhi3_cy): Likewise.\n(addchi4_cy): Likewise.\n(xor<mode>3): Likewise.\n(ome_cmpl<mode>2): Likewise.\n(extendqihi2): Likewise.\n(zero_extendqihi2): Likewise.\n(zero_extendhipsi2): Likewise.\n(truncpsihi2): Likewise.\n(srai_1): Likewise.\n\nFrom-SVN: r205977", "tree": {"sha": "ff12ae290061dd5ac04366d4fbd758fb6ba65168", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff12ae290061dd5ac04366d4fbd758fb6ba65168"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3b50977d934b27d0683fb9bf75309dceda2a098", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3b50977d934b27d0683fb9bf75309dceda2a098", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3b50977d934b27d0683fb9bf75309dceda2a098", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3b50977d934b27d0683fb9bf75309dceda2a098/comments", "author": null, "committer": null, "parents": [{"sha": "4cd3c67de7449a93bc59b47c2db7fac25db4c4ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cd3c67de7449a93bc59b47c2db7fac25db4c4ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cd3c67de7449a93bc59b47c2db7fac25db4c4ec"}], "stats": {"total": 89, "additions": 54, "deletions": 35}, "files": [{"sha": "1d7c12e522382058608518c4f29792e70fcf83e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3b50977d934b27d0683fb9bf75309dceda2a098/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3b50977d934b27d0683fb9bf75309dceda2a098/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3b50977d934b27d0683fb9bf75309dceda2a098", "patch": "@@ -1,3 +1,22 @@\n+2013-12-13  DJ Delorie  <dj@redhat.com>\n+\n+\t* config/msp430/msp430.md (movqi): replace general_operand with\n+\tmsp_general_operand and nonimmediate_operand with\n+\tmsp_nonimmediate_operand to allow volatile operands.\n+\t(movhi): Likewise.\n+\t(movpsi): Likewise.\n+\t(addpsi3): Likewise.\n+\t(addhi3): Likewise.\n+\t(addhi3_cy): Likewise.\n+\t(addchi4_cy): Likewise.\n+\t(xor<mode>3): Likewise.\n+\t(ome_cmpl<mode>2): Likewise.\n+\t(extendqihi2): Likewise.\n+\t(zero_extendqihi2): Likewise.\n+\t(zero_extendhipsi2): Likewise.\n+\t(truncpsihi2): Likewise.\n+\t(srai_1): Likewise.\n+\n 2013-12-13  Vladimir Makarov  <vmakarov@redhat.com>\n \n \t* ira.h (struct ira_reg_equiv): Rename to ira_reg_equiv_s."}, {"sha": "93ff3bd21f83eafee78dc54ed6dfb5a0e4a638bd", "filename": "gcc/config/msp430/msp430.md", "status": "modified", "additions": 35, "deletions": 35, "changes": 70, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3b50977d934b27d0683fb9bf75309dceda2a098/gcc%2Fconfig%2Fmsp430%2Fmsp430.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3b50977d934b27d0683fb9bf75309dceda2a098/gcc%2Fconfig%2Fmsp430%2Fmsp430.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.md?ref=a3b50977d934b27d0683fb9bf75309dceda2a098", "patch": "@@ -172,17 +172,17 @@\n )\n \n (define_insn \"movqi\"\n-  [(set (match_operand:QI 0 \"nonimmediate_operand\" \"=rYs,rm\")\n-\t(match_operand:QI 1 \"general_operand\" \"riYs,rmi\"))]\n+  [(set (match_operand:QI 0 \"msp_nonimmediate_operand\" \"=rYs,rm\")\n+\t(match_operand:QI 1 \"msp_general_operand\" \"riYs,rmi\"))]\n   \"\"\n   \"@\n   MOV.B\\t%1, %0\n   MOV%X0.B\\t%1, %0\"\n )\n \n (define_insn \"movhi\"\n-  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=rYs,rm\")\n-\t(match_operand:HI 1 \"general_operand\" \"riYs,rmi\"))]\n+  [(set (match_operand:HI 0 \"msp_nonimmediate_operand\" \"=rYs,rm\")\n+\t(match_operand:HI 1 \"msp_general_operand\" \"riYs,rmi\"))]\n   \"\"\n   \"@\n   MOV.W\\t%1, %0\n@@ -211,8 +211,8 @@\n \n ;; Some MOVX.A cases can be done with MOVA, this is only a few of them.\n (define_insn \"movpsi\"\n-  [(set (match_operand:PSI 0 \"nonimmediate_operand\" \"=r,Ya,rm\")\n-\t(match_operand:PSI 1 \"general_operand\" \"riYa,r,rmi\"))]\n+  [(set (match_operand:PSI 0 \"msp_nonimmediate_operand\" \"=r,Ya,rm\")\n+\t(match_operand:PSI 1 \"msp_general_operand\" \"riYa,r,rmi\"))]\n   \"\"\n   \"@\n   MOV%A0\\t%1, %0\n@@ -237,29 +237,29 @@\n ;; Math\n \n (define_insn \"addpsi3\"\n-  [(set (match_operand:PSI           0 \"nonimmediate_operand\" \"=r,rm\")\n-\t(plus:PSI (match_operand:PSI 1 \"nonimmediate_operand\" \"%0,0\")\n-\t\t  (match_operand:PSI 2 \"general_operand\"      \"rLs,rmi\")))]\n+  [(set (match_operand:PSI           0 \"msp_nonimmediate_operand\" \"=r,rm\")\n+\t(plus:PSI (match_operand:PSI 1 \"msp_nonimmediate_operand\" \"%0,0\")\n+\t\t  (match_operand:PSI 2 \"msp_general_operand\"      \"rLs,rmi\")))]\n   \"\"\n   \"@\n   ADDA\\t%2, %0\n   ADDX.A\\t%2, %0\"\n )\n \n (define_insn \"addqi3\"\n-  [(set (match_operand:QI          0 \"nonimmediate_operand\" \"=rYs,rm\")\n-\t(plus:QI (match_operand:QI 1 \"nonimmediate_operand\" \"%0,0\")\n-\t\t (match_operand:QI 2 \"general_operand\"      \"riYs,rmi\")))]\n+  [(set (match_operand:QI          0 \"msp_nonimmediate_operand\" \"=rYs,rm\")\n+\t(plus:QI (match_operand:QI 1 \"msp_nonimmediate_operand\" \"%0,0\")\n+\t\t (match_operand:QI 2 \"msp_general_operand\"      \"riYs,rmi\")))]\n   \"\"\n   \"@\n    ADD.B\\t%2, %0\n    ADD%X0.B\\t%2, %0\"\n )\n \n (define_insn \"addhi3\"\n-  [(set (match_operand:HI           0 \"nonimmediate_operand\" \"=rYs,rm\")\n-\t(plus:HI (match_operand:HI  1 \"nonimmediate_operand\" \"%0,0\")\n-\t\t  (match_operand:HI 2 \"general_operand\"      \"riYs,rmi\")))]\n+  [(set (match_operand:HI           0 \"msp_nonimmediate_operand\" \"=rYs,rm\")\n+\t(plus:HI (match_operand:HI  1 \"msp_nonimmediate_operand\" \"%0,0\")\n+\t\t  (match_operand:HI 2 \"msp_general_operand\"      \"riYs,rmi\")))]\n   \"\"\n   \"@\n    ADD.W\\t%2, %0\n@@ -316,9 +316,9 @@\n ; that are not single_set() very well.\n \n (define_insn \"addhi3_cy\"\n-  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=r,rm\")\n-\t(plus:HI (match_operand:HI 1 \"nonimmediate_operand\" \"%0,0\")\n-\t\t (match_operand:HI 2 \"general_operand\" \"r,rm\")))\n+  [(set (match_operand:HI 0 \"msp_nonimmediate_operand\" \"=r,rm\")\n+\t(plus:HI (match_operand:HI 1 \"msp_nonimmediate_operand\" \"%0,0\")\n+\t\t (match_operand:HI 2 \"msp_general_operand\" \"r,rm\")))\n    (set (reg:BI CARRY)\n \t(truncate:BI (lshiftrt:SI (plus:SI (zero_extend:SI (match_dup 1))\n \t\t\t\t\t   (zero_extend:SI (match_dup 2)))\n@@ -347,9 +347,9 @@\n \n ; Version of addhi that adds the carry, for SImode adds.\n (define_insn \"addchi4_cy\"\n-  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=r,rm\")\n-\t(plus:HI (plus:HI (match_operand:HI 1 \"nonimmediate_operand\" \"%0,0\")\n-\t\t\t  (match_operand:HI 2 \"general_operand\" \"ri,rmi\"))\n+  [(set (match_operand:HI 0 \"msp_nonimmediate_operand\" \"=r,rm\")\n+\t(plus:HI (plus:HI (match_operand:HI 1 \"msp_nonimmediate_operand\" \"%0,0\")\n+\t\t\t  (match_operand:HI 2 \"msp_general_operand\" \"ri,rmi\"))\n \t\t (zero_extend:HI (reg:BI CARRY))))\n    ]\n   \"\"\n@@ -487,9 +487,9 @@\n )\n \n (define_insn \"xor<mode>3\"\n-  [(set (match_operand:QHI 0 \"nonimmediate_operand\" \"=rYs,rm\")\n-\t(xor:QHI (match_operand:QHI 1 \"nonimmediate_operand\" \"%0,0\")\n-\t\t (match_operand:QHI 2 \"general_operand\" \"riYs,rmi\")))]\n+  [(set (match_operand:QHI 0 \"msp_nonimmediate_operand\" \"=rYs,rm\")\n+\t(xor:QHI (match_operand:QHI 1 \"msp_nonimmediate_operand\" \"%0,0\")\n+\t\t (match_operand:QHI 2 \"msp_general_operand\" \"riYs,rmi\")))]\n   \"\"\n   \"@\n    XOR%x0%B0\\t%2, %0\n@@ -498,26 +498,26 @@\n \n ;; Macro : XOR #~0, %0\n (define_insn \"one_cmpl<mode>2\"\n-  [(set (match_operand:QHI 0 \"nonimmediate_operand\" \"=rYs,m\")\n-\t(not:QHI (match_operand:QHI 1 \"nonimmediate_operand\" \"0,0\")))]\n+  [(set (match_operand:QHI 0 \"msp_nonimmediate_operand\" \"=rYs,m\")\n+\t(not:QHI (match_operand:QHI 1 \"msp_nonimmediate_operand\" \"0,0\")))]\n   \"\"\n   \"@\n    INV%x0%B0\\t%0\n    INV%X0%B0\\t%0\"\n )\n \n (define_insn \"extendqihi2\"\n-  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=rYs,m\")\n-\t(sign_extend:HI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0\")))]\n+  [(set (match_operand:HI 0 \"msp_nonimmediate_operand\" \"=rYs,m\")\n+\t(sign_extend:HI (match_operand:QI 1 \"msp_nonimmediate_operand\" \"0,0\")))]\n   \"\"\n   \"@\n    SXT%X0\\t%0\n    SXT%X0\\t%0\"\n )\n \n (define_insn \"zero_extendqihi2\"\n-  [(set (match_operand:HI 0 \"nonimmediate_operand\" \"=rYs,m\")\n-\t(zero_extend:HI (match_operand:QI 1 \"nonimmediate_operand\" \"0,0\")))]\n+  [(set (match_operand:HI 0 \"msp_nonimmediate_operand\" \"=rYs,m\")\n+\t(zero_extend:HI (match_operand:QI 1 \"msp_nonimmediate_operand\" \"0,0\")))]\n   \"\"\n   \"@\n    AND\\t#0xff, %0\n@@ -536,14 +536,14 @@\n )\n    \n (define_insn \"zero_extendhipsi2\"\n-  [(set (match_operand:PSI 0 \"nonimmediate_operand\" \"=r,m\")\n-\t(zero_extend:PSI (match_operand:HI 1 \"nonimmediate_operand\" \"rm,r\")))]\n+  [(set (match_operand:PSI 0 \"msp_nonimmediate_operand\" \"=r,m\")\n+\t(zero_extend:PSI (match_operand:HI 1 \"msp_nonimmediate_operand\" \"rm,r\")))]\n   \"\"\n   \"MOVX\\t%1, %0\"\n )\n \n (define_insn \"truncpsihi2\"\n-  [(set (match_operand:HI               0 \"nonimmediate_operand\" \"=rm\")\n+  [(set (match_operand:HI               0 \"msp_nonimmediate_operand\" \"=rm\")\n \t(truncate:HI (match_operand:PSI 1 \"register_operand\"      \"r\")))]\n   \"\"\n   \"MOVX\\t%1, %0\"\n@@ -769,8 +769,8 @@\n )\n \n (define_insn \"srai_1\"\n-  [(set (match_operand:HI              0 \"nonimmediate_operand\" \"=rm\")\n-\t(ashiftrt:HI (match_operand:HI 1 \"general_operand\"      \"0\")\n+  [(set (match_operand:HI              0 \"msp_nonimmediate_operand\" \"=rm\")\n+\t(ashiftrt:HI (match_operand:HI 1 \"msp_general_operand\"      \"0\")\n \t\t     (const_int 1)))]\n   \"\"\n   \"RRA.W\\t%0\""}]}