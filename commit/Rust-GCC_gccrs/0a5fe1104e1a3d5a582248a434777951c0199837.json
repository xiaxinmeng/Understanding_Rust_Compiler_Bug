{"sha": "0a5fe1104e1a3d5a582248a434777951c0199837", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGE1ZmUxMTA0ZTFhM2Q1YTU4MjI0OGE0MzQ3Nzc5NTFjMDE5OTgzNw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2008-02-29T12:55:06Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2008-02-29T12:55:06Z"}, "message": "expr.c (expand_byte_code): Set DECL_FUNCTION_LAST_LINE on method.\n\n\t* expr.c (expand_byte_code): Set DECL_FUNCTION_LAST_LINE on\n\tmethod.\n\t* java-tree.h (struct lang_decl_func): Remove obsolete comment.\n\nFrom-SVN: r132767", "tree": {"sha": "25913b4e0b76c5a0ab05d84339e5149bd388d1b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25913b4e0b76c5a0ab05d84339e5149bd388d1b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0a5fe1104e1a3d5a582248a434777951c0199837", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a5fe1104e1a3d5a582248a434777951c0199837", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a5fe1104e1a3d5a582248a434777951c0199837", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a5fe1104e1a3d5a582248a434777951c0199837/comments", "author": null, "committer": null, "parents": [{"sha": "b0fbea136ef18450fdc326a7ea6a35deca625448", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0fbea136ef18450fdc326a7ea6a35deca625448", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0fbea136ef18450fdc326a7ea6a35deca625448"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "eed2fd2c6763130313aaf082d0d5edf53d05f536", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a5fe1104e1a3d5a582248a434777951c0199837/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a5fe1104e1a3d5a582248a434777951c0199837/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=0a5fe1104e1a3d5a582248a434777951c0199837", "patch": "@@ -1,3 +1,9 @@\n+2008-02-29  Tom Tromey  <tromey@redhat.com>\n+\n+\t* expr.c (expand_byte_code): Set DECL_FUNCTION_LAST_LINE on\n+\tmethod.\n+\t* java-tree.h (struct lang_decl_func): Remove obsolete comment.\n+\n 2008-02-26  Tom Tromey  <tromey@redhat.com>\n \n \t* lang.c (java_post_options): Remove conditional."}, {"sha": "b113df1de9e82d4932661e1c088ab79257f045cf", "filename": "gcc/java/expr.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a5fe1104e1a3d5a582248a434777951c0199837/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a5fe1104e1a3d5a582248a434777951c0199837/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=0a5fe1104e1a3d5a582248a434777951c0199837", "patch": "@@ -3132,6 +3132,7 @@ expand_byte_code (JCF *jcf, tree method)\n   int dead_code_index = -1;\n   unsigned char* byte_ops;\n   long length = DECL_CODE_LENGTH (method);\n+  location_t max_location = input_location;\n \n   stack_pointer = 0;\n   JCF_SEEK (jcf, DECL_CODE_OFFSET (method));\n@@ -3219,6 +3220,8 @@ expand_byte_code (JCF *jcf, tree method)\n \t\t{\n \t\t  int line = GET_u2 (linenumber_pointer - 2);\n \t\t  input_location = linemap_line_start (line_table, line, 1);\n+\t\t  if (input_location > max_location)\n+\t\t    max_location = input_location;\n \t\t  if (!(instruction_bits[PC] & BCODE_HAS_MULTI_LINENUMBERS))\n \t\t    break;\n \t\t}\n@@ -3238,6 +3241,8 @@ expand_byte_code (JCF *jcf, tree method)\n \twarning (0, \"unreachable bytecode from %d to the end of the method\", \n \t\t dead_code_index);\n     }\n+\n+  DECL_FUNCTION_LAST_LINE (method) = max_location;\n }\n \n static void"}, {"sha": "494c428db199c7572beeb490cf94d69774e75660", "filename": "gcc/java/java-tree.h", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a5fe1104e1a3d5a582248a434777951c0199837/gcc%2Fjava%2Fjava-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a5fe1104e1a3d5a582248a434777951c0199837/gcc%2Fjava%2Fjava-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjava-tree.h?ref=0a5fe1104e1a3d5a582248a434777951c0199837", "patch": "@@ -1,7 +1,7 @@\n /* Definitions for parsing and type checking for the GNU compiler for\n    the Java(TM) language.\n    Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,\n-   2005, 2006, 2007 Free Software Foundation, Inc.\n+   2005, 2006, 2007, 2008 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -793,8 +793,6 @@ struct lang_decl_func GTY(())\n   int max_locals;\n   int max_stack;\n   int arg_slot_count;\n-  /* A temporary lie for the sake of ggc.  Actually, last_line is\n-     only a source_location if USE_MAPPED_LOCATION.  FIXME.  */\n   source_location last_line;\t/* End line number for a function decl */\n   tree throws_list;\t\t/* Exception specified by `throws' */\n "}]}