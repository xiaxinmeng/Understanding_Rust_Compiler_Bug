{"sha": "cf22ce3c7f2137dcd3b74211fd48a2d98564ac23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2YyMmNlM2M3ZjIxMzdkY2QzYjc0MjExZmQ0OGEyZDk4NTY0YWMyMw==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2004-04-11T08:20:42Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2004-04-11T08:20:42Z"}, "message": "bb-reorder.c (fix_crossing_conditional_branches): Fix bootstrap failure on solaris.\n\n2004-04-11  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* bb-reorder.c (fix_crossing_conditional_branches): Fix bootstrap\n\tfailure on solaris. Place ifdef HAVE_return around gen_ret call.\n\t* cfgrtl.c (force_nonfallthru_and_redirect): Remove ifdef\n\tHAVE_return and place it around the place where it is needed.\n\nFrom-SVN: r80594", "tree": {"sha": "079b6c74f8f28cdd969feec97bfb776803d6ac17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/079b6c74f8f28cdd969feec97bfb776803d6ac17"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23/comments", "author": null, "committer": null, "parents": [{"sha": "3498229434bf8e8d7d7029eed3031377e6c8dd00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3498229434bf8e8d7d7029eed3031377e6c8dd00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3498229434bf8e8d7d7029eed3031377e6c8dd00"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "6c446a74f4c81be03c3d127a323c860e501ba3e4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cf22ce3c7f2137dcd3b74211fd48a2d98564ac23", "patch": "@@ -1,3 +1,10 @@\n+2004-04-11  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* bb-reorder.c (fix_crossing_conditional_branches): Fix bootstrap\n+\tfailure on solaris. Place ifdef HAVE_return around gen_ret call.\n+\t* cfgrtl.c (force_nonfallthru_and_redirect): Remove ifdef\n+\tHAVE_return and place it around the place where it is needed.\n+\n 2004-04-11  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* varasm.c (text_section): Use TEXT_SECTION_ASM_OP and"}, {"sha": "022cb33eb2eb78b1f9149e7ec160fddae2d0c0d1", "filename": "gcc/bb-reorder.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23/gcc%2Fbb-reorder.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23/gcc%2Fbb-reorder.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbb-reorder.c?ref=cf22ce3c7f2137dcd3b74211fd48a2d98564ac23", "patch": "@@ -1684,9 +1684,11 @@ fix_crossing_conditional_branches (void)\n \t\t\t\t\t\t       (old_label), \n \t\t\t\t\t\t       BB_END (new_bb));\n \t\t    }\n+#ifdef HAVE_return\n \t\t  else if (GET_CODE (old_label) == RETURN)\n \t\t    new_jump = emit_jump_insn_after (gen_return (), \n \t\t\t\t\t\t     BB_END (new_bb));\n+#endif\n \t\t  else\n \t\t    abort ();\n \t\t  "}, {"sha": "461eb34a6f725246102944b64148604c2c9f26c0", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf22ce3c7f2137dcd3b74211fd48a2d98564ac23/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=cf22ce3c7f2137dcd3b74211fd48a2d98564ac23", "patch": "@@ -57,11 +57,6 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #include \"cfglayout.h\"\n #include \"expr.h\"\n \n-/* Stubs in case we don't have a return insn.  */\n-#ifndef HAVE_return\n-#define HAVE_return 0\n-#define gen_return() NULL_RTX\n-#endif\n \n /* The labels mentioned in non-jump rtl.  Valid during find_basic_blocks.  */\n /* ??? Should probably be using LABEL_NUSES instead.  It would take a\n@@ -1134,10 +1129,11 @@ force_nonfallthru_and_redirect (edge e, basic_block target)\n   e->flags &= ~EDGE_FALLTHRU;\n   if (target == EXIT_BLOCK_PTR)\n     {\n-      if (HAVE_return)\n+#ifdef HAVE_return\n \temit_jump_insn_after (gen_return (), BB_END (jump_block));\n-      else\n+#else\n \tabort ();\n+#endif\n     }\n   else\n     {"}]}