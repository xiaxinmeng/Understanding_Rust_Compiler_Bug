{"sha": "9d65de21235ee355ae15350fb119a5be371edb4b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQ2NWRlMjEyMzVlZTM1NWFlMTUzNTBmYjExOWE1YmUzNzFlZGI0Yg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-23T01:22:32Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-23T01:22:32Z"}, "message": "Don't crash building map descriptor for erroneous map.\n\nFrom-SVN: r168197", "tree": {"sha": "85f48cb973dc77f694919355d57c39d90228f5d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85f48cb973dc77f694919355d57c39d90228f5d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d65de21235ee355ae15350fb119a5be371edb4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d65de21235ee355ae15350fb119a5be371edb4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d65de21235ee355ae15350fb119a5be371edb4b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d65de21235ee355ae15350fb119a5be371edb4b/comments", "author": null, "committer": null, "parents": [{"sha": "42471ba9170c27da4fe830b46ce3b9fb49ae2b78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42471ba9170c27da4fe830b46ce3b9fb49ae2b78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42471ba9170c27da4fe830b46ce3b9fb49ae2b78"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "05a701feffc544190b611f36eadd7e1a33f6d1be", "filename": "gcc/go/gofrontend/gogo-tree.cc", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d65de21235ee355ae15350fb119a5be371edb4b/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d65de21235ee355ae15350fb119a5be371edb4b/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo-tree.cc?ref=9d65de21235ee355ae15350fb119a5be371edb4b", "patch": "@@ -2356,6 +2356,8 @@ Gogo::map_descriptor(Map_type* maptype)\n   Map_descriptors::iterator p = ins.first;\n   if (!ins.second)\n     {\n+      if (p->second == error_mark_node)\n+\treturn error_mark_node;\n       gcc_assert(p->second != NULL_TREE && DECL_P(p->second));\n       return build_fold_addr_expr(p->second);\n     }\n@@ -2385,7 +2387,10 @@ Gogo::map_descriptor(Map_type* maptype)\n \t\t\t\t\t\"__val\",\n \t\t\t\t\tvaltype->get_tree(this));\n   if (map_entry_type == error_mark_node)\n-    return error_mark_node;\n+    {\n+      p->second = error_mark_node;\n+      return error_mark_node;\n+    }\n \n   tree map_entry_key_field = DECL_CHAIN(TYPE_FIELDS(map_entry_type));\n   gcc_assert(strcmp(IDENTIFIER_POINTER(DECL_NAME(map_entry_key_field)),"}]}