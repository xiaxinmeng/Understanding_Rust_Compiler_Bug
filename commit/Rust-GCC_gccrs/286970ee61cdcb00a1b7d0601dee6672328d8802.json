{"sha": "286970ee61cdcb00a1b7d0601dee6672328d8802", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg2OTcwZWU2MWNkY2IwMGExYjdkMDYwMWRlZTY2NzIzMjhkODgwMg==", "commit": {"author": {"name": "Joseph Myers", "email": "jsm28@cam.ac.uk", "date": "2001-11-05T08:47:51Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2001-11-05T08:47:51Z"}, "message": "update_web_docs: Allow for the same file name in different directories.\n\n\t* update_web_docs: Allow for the same file name in different\n\tdirectories.\n\nFrom-SVN: r46784", "tree": {"sha": "fa79d079a58d871707192b93306be464cb798fb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa79d079a58d871707192b93306be464cb798fb9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/286970ee61cdcb00a1b7d0601dee6672328d8802", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/286970ee61cdcb00a1b7d0601dee6672328d8802", "html_url": "https://github.com/Rust-GCC/gccrs/commit/286970ee61cdcb00a1b7d0601dee6672328d8802", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/286970ee61cdcb00a1b7d0601dee6672328d8802/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a33b51de360973295a3020c9a7053974cb1fb7ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a33b51de360973295a3020c9a7053974cb1fb7ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a33b51de360973295a3020c9a7053974cb1fb7ac"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "5d8c609d0f10e770e58122ea569059744fafd7cc", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/286970ee61cdcb00a1b7d0601dee6672328d8802/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/286970ee61cdcb00a1b7d0601dee6672328d8802/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=286970ee61cdcb00a1b7d0601dee6672328d8802", "patch": "@@ -1,3 +1,8 @@\n+2001-11-05  Joseph S. Myers  <jsm28@cam.ac.uk>\n+\n+\t* update_web_docs: Allow for the same file name in different\n+\tdirectories.\n+\n 2001-10-29  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* update_web_docs: Generate libiberty and gnat-style manuals."}, {"sha": "6872a4a329d9c2896fd4b9da81316691c2fde741", "filename": "maintainer-scripts/update_web_docs", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/286970ee61cdcb00a1b7d0601dee6672328d8802/maintainer-scripts%2Fupdate_web_docs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/286970ee61cdcb00a1b7d0601dee6672328d8802/maintainer-scripts%2Fupdate_web_docs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fupdate_web_docs?ref=286970ee61cdcb00a1b7d0601dee6672328d8802", "patch": "@@ -87,19 +87,21 @@ cd $WORKDIR\n find $CVSROOT/gcc -name \\*.texi,v -print | fgrep -v -f/home/gccadmin/scripts/doc_exclude | sed -e s#$CVSROOT/##g -e s#,v##g -e s#Attic/##g > FILES\n \n \n-# Checkout all the texi files and get them into a single directory.\n-# If we ever have texi files with the same name we'll have to do this\n-# differently.\n+# Checkout all the texi files.\n cvs -Q co -r$RELEASE `cat FILES` gcc/gcc/doc/install.texi2html gcc/gcc/texinfo.tex gcc/gcc/doc/texinfo.tex gcc/gcc/doc/include/texinfo.tex\n-mv `find . -name \\*.texi -print` .\n-mv `find . -name \\*.tex -print` .\n+\n+# Find the directory to pass to -I; this is the one with texinfo.tex\n+# and fdl.texi.\n+texitexloc=`find . -name texinfo.tex`\n+includedir=${texitexloc%/*}\n \n # Now convert the relevant files from texi to HTML and PostScript.\n for file in cpp chill cppinternals gcc gcj g77 gnat-style libiberty \\\n     objc-features porting; do\n-  if [ -e ${file}.texi ]; then\n-    /usr/local/bin/texi2html -glossary -menu -split_chapter ${file}.texi\n-    texi2dvi ${file}.texi </dev/null && dvips -o ${file}.ps ${file}.dvi\n+  filename=`find . -name ${file}.texi`\n+  if [ \"${filename}\" ]; then\n+    /usr/local/bin/texi2html -glossary -menu -split_chapter -I ${includedir} ${filename}\n+    texi2dvi -I ${includedir} ${filename} </dev/null && dvips -o ${file}.ps ${file}.dvi\n   fi\n done\n "}]}