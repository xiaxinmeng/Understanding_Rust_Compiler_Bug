{"sha": "85017431068251628478f38346c273418c71209b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODUwMTc0MzEwNjgyNTE2Mjg0NzhmMzgzNDZjMjczNDE4YzcxMjA5Yg==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-07-02T08:51:57Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-07-02T14:50:16Z"}, "message": "Darwin, CTF, BTF: Do not run the DWARF debug link for BTF/CTF [PR101283].\n\nDarwin uses an efficient two-stage process for debug linking.\nThe static linker (ld64) notes the inputs required but does not\nlink the debug.  When required / on demand the debug is linked\ninto a separate package by the debug linker (dsymutil).  At\npresent none of the Darwin tools consume or understand BTF/CTF.\nThe static linker silently accepts the sections (but will not\nact on them as containing anything to be processed).\n\nHowever, the debug linker produces a warning that it has been\npresented with input with no [DWARF] debug content:\nwarning: no debug symbols in executable (-arch x86_64).\n\nThis causes several testsuite fails with excess errors.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\nPR debug/101283 - Several tests fail on Darwin with -gctf/gbtf\n\n\tPR debug/101283\n\ngcc/ChangeLog:\n\n\t* config/darwin.h (DSYMUTIL_SPEC): Do not try to run\n\tdsymutil for BTF/CTF.", "tree": {"sha": "5ce40b874ff3a69547a1db978664556e21320982", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ce40b874ff3a69547a1db978664556e21320982"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/85017431068251628478f38346c273418c71209b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85017431068251628478f38346c273418c71209b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85017431068251628478f38346c273418c71209b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85017431068251628478f38346c273418c71209b/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb817f27e82769aef545d580a0c47a3aa50d1ec4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb817f27e82769aef545d580a0c47a3aa50d1ec4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb817f27e82769aef545d580a0c47a3aa50d1ec4"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "5f1197899732d154d2c4a5777a1d19d769583dbc", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85017431068251628478f38346c273418c71209b/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85017431068251628478f38346c273418c71209b/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=85017431068251628478f38346c273418c71209b", "patch": "@@ -250,10 +250,10 @@ extern GTY(()) int darwin_ms_struct;\n #define DSYMUTIL_SPEC \\\n    \"%{!fdump=*:%{!fsyntax-only:%{!c:%{!M:%{!MM:%{!E:%{!S:\\\n     %{v} \\\n-    %{g*:%{!gstabs*:%{%:debug-level-gt(0): -idsym}}}\\\n+    %{g*:%{!gctf:%{!gbtf:%{!gstabs*:%{%:debug-level-gt(0): -idsym}}}}}\\\n     %{.c|.cc|.C|.cpp|.cp|.c++|.cxx|.CPP|.m|.mm|.s|.f|.f90|\\\n       .f95|.f03|.f77|.for|.F|.F90|.F95|.F03: \\\n-    %{g*:%{!gstabs*:%{%:debug-level-gt(0): -dsym}}}}}}}}}}}\"\n+    %{g*:%{!gctf:%{!gbtf:%{!gstabs*:%{%:debug-level-gt(0): -dsym}}}}}}}}}}}}}\"\n \n #define LINK_COMMAND_SPEC LINK_COMMAND_SPEC_A DSYMUTIL_SPEC\n "}]}