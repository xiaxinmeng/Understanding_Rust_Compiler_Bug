{"sha": "7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NhZDhhOGY5ZjdiZmE4ZTk4ZjZhMDYxNTU0MWY1ODlmZDFkM2ZjMQ==", "commit": {"author": {"name": "Serge Belyshev", "email": "belyshev@depni.sinp.msu.ru", "date": "2021-07-16T07:52:33Z"}, "committer": {"name": "Serge Belyshev", "email": "belyshev@depni.sinp.msu.ru", "date": "2021-08-20T21:09:54Z"}, "message": "configure: drop version checks for in-tree gas [PR91602]\n\nSpecial-casing checks for in-tree gas features is unnecessary since\nr100007 which made configure-gcc depend on all-gas, and thus making\nalternate code path in gcc_GAS_CHECK_FEATURE for in-tree gas\nredundant.\n\nAlong the way this fixes PR 91602, which is caused by incorrect guess\nof leb128 support presence in RISC-V.\n\nFirst patch removes alternate code path in gcc_GAS_CHECK_FEATURE and\nrelated code, the rest are further cleanups.  Patches 2 and 3 in\nseries make no functional changes, thus configure is unchanged.\n\ngcc/ChangeLog:\n\n\tPR target/91602\n\t* acinclude.m4 (_gcc_COMPUTE_GAS_VERSION, _gcc_GAS_VERSION_GTE_IFELSE)\n\t(gcc_GAS_VERSION_GTE_IFELSE): Remove.\n\t(gcc_GAS_CHECK_FEATURE): Do not handle in-tree case specially.\n\t* configure.ac: Remove gcc_cv_gas_major_version, gcc_cv_gas_minor_version.\n\tRemove remaining checks for in-tree assembler.\n\t* configure: Regenerate.", "tree": {"sha": "0b34cf4b9bb6088c1954616357cc0e2c9cbd02d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b34cf4b9bb6088c1954616357cc0e2c9cbd02d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1/comments", "author": {"login": "ssb83", "id": 37732995, "node_id": "MDQ6VXNlcjM3NzMyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/37732995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssb83", "html_url": "https://github.com/ssb83", "followers_url": "https://api.github.com/users/ssb83/followers", "following_url": "https://api.github.com/users/ssb83/following{/other_user}", "gists_url": "https://api.github.com/users/ssb83/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssb83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssb83/subscriptions", "organizations_url": "https://api.github.com/users/ssb83/orgs", "repos_url": "https://api.github.com/users/ssb83/repos", "events_url": "https://api.github.com/users/ssb83/events{/privacy}", "received_events_url": "https://api.github.com/users/ssb83/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ssb83", "id": 37732995, "node_id": "MDQ6VXNlcjM3NzMyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/37732995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssb83", "html_url": "https://github.com/ssb83", "followers_url": "https://api.github.com/users/ssb83/followers", "following_url": "https://api.github.com/users/ssb83/following{/other_user}", "gists_url": "https://api.github.com/users/ssb83/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssb83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssb83/subscriptions", "organizations_url": "https://api.github.com/users/ssb83/orgs", "repos_url": "https://api.github.com/users/ssb83/repos", "events_url": "https://api.github.com/users/ssb83/events{/privacy}", "received_events_url": "https://api.github.com/users/ssb83/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f80c6270de6ac79d819de50048b32351a6b97c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f80c6270de6ac79d819de50048b32351a6b97c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f80c6270de6ac79d819de50048b32351a6b97c3"}], "stats": {"total": 506, "additions": 61, "deletions": 445}, "files": [{"sha": "e038990cca66a008cc333821b35105136f584004", "filename": "gcc/acinclude.m4", "status": "modified", "additions": 2, "deletions": 64, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1/gcc%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1/gcc%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Facinclude.m4?ref=7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1", "patch": "@@ -442,63 +442,6 @@ AC_DEFINE_UNQUOTED(HAVE_INITFINI_ARRAY_SUPPORT,\n   [Define 0/1 if .init_array/.fini_array sections are available and working.])\n ])\n \n-dnl # _gcc_COMPUTE_GAS_VERSION\n-dnl # Used by gcc_GAS_VERSION_GTE_IFELSE\n-dnl #\n-dnl # WARNING:\n-dnl # gcc_cv_as_gas_srcdir must be defined before this.\n-dnl # This gross requirement will go away eventually.\n-AC_DEFUN([_gcc_COMPUTE_GAS_VERSION],\n-[gcc_cv_as_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n-for f in $gcc_cv_as_bfd_srcdir/configure \\\n-         $gcc_cv_as_gas_srcdir/configure \\\n-         $gcc_cv_as_gas_srcdir/configure.ac \\\n-         $gcc_cv_as_gas_srcdir/Makefile.in ; do\n-  gcc_cv_gas_version=`sed -n -e 's/^[[ \t]]*VERSION=[[^0-9A-Za-z_]]*\\([[0-9]]*\\.[[0-9]]*.*\\)/VERSION=\\1/p' < $f`\n-  if test x$gcc_cv_gas_version != x; then\n-    break\n-  fi\n-done\n-case $gcc_cv_gas_version in\n-  VERSION=[[0-9]]*) ;;\n-  *) AC_MSG_ERROR([[cannot find version of in-tree assembler]]);;\n-esac\n-gcc_cv_gas_major_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=\\([[0-9]]*\\)\"`\n-gcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[[0-9]]*\\.\\([[0-9]]*\\)\"`\n-gcc_cv_gas_patch_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[[0-9]]*\\.[[0-9]]*\\.\\([[0-9]]*\\)\"`\n-case $gcc_cv_gas_patch_version in\n-  \"\") gcc_cv_gas_patch_version=\"0\" ;;\n-esac\n-gcc_cv_gas_vers=`expr \\( \\( $gcc_cv_gas_major_version \\* 1000 \\) \\\n-\t\t\t    + $gcc_cv_gas_minor_version \\) \\* 1000 \\\n-\t\t\t    + $gcc_cv_gas_patch_version`\n-]) []dnl # _gcc_COMPUTE_GAS_VERSION\n-\n-dnl # gcc_GAS_VERSION_GTE_IFELSE([elf,] major, minor, patchlevel,\n-dnl #                     [command_if_true = :], [command_if_false = :])\n-dnl # Check to see if the version of GAS is greater than or\n-dnl # equal to the specified version.\n-dnl #\n-dnl # The first ifelse() shortens the shell code if the patchlevel\n-dnl # is unimportant (the usual case).  The others handle missing\n-dnl # commands.  Note that the tests are structured so that the most\n-dnl # common version number cases are tested first.\n-AC_DEFUN([_gcc_GAS_VERSION_GTE_IFELSE],\n-[ifelse([$1], elf,\n- [if test $in_tree_gas_is_elf = yes \\\n-  &&],\n- [if]) test $gcc_cv_gas_vers -ge `expr \\( \\( $2 \\* 1000 \\) + $3 \\) \\* 1000 + $4`\n-  then dnl\n-ifelse([$5],,:,[$5])[]dnl\n-ifelse([$6],,,[\n-  else $6])\n-fi])\n-\n-AC_DEFUN([gcc_GAS_VERSION_GTE_IFELSE],\n-[AC_REQUIRE([_gcc_COMPUTE_GAS_VERSION])dnl\n-ifelse([$1], elf, [_gcc_GAS_VERSION_GTE_IFELSE($@)],\n-                  [_gcc_GAS_VERSION_GTE_IFELSE(,$@)])])\n-\n dnl # gcc_GAS_FLAGS\n dnl # Used by gcc_GAS_CHECK_FEATURE \n dnl #\n@@ -531,9 +474,7 @@ dnl gcc_GAS_CHECK_FEATURE(description, cv, [[elf,]major,minor,patchlevel],\n dnl [extra switches to as], [assembler input],\n dnl [extra testing logic], [command if feature available])\n dnl\n-dnl Checks for an assembler feature.  If we are building an in-tree\n-dnl gas, the feature is available if the associated assembler version\n-dnl is greater than or equal to major.minor.patchlevel.  If not, then\n+dnl Checks for an assembler feature.\n dnl ASSEMBLER INPUT is fed to the assembler and the feature is available\n dnl if assembly succeeds.  If EXTRA TESTING LOGIC is not the empty string,\n dnl then it is run instead of simply setting CV to \"yes\" - it is responsible\n@@ -542,10 +483,7 @@ AC_DEFUN([gcc_GAS_CHECK_FEATURE],\n [AC_REQUIRE([gcc_GAS_FLAGS])dnl\n AC_CACHE_CHECK([assembler for $1], [$2],\n  [[$2]=no\n-  ifelse([$3],,,[dnl\n-  if test $in_tree_gas = yes; then\n-    gcc_GAS_VERSION_GTE_IFELSE($3, [[$2]=yes])\n-  el])if test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     AS_ECHO([ifelse(m4_substr([$5],0,1),[$], \"[$5]\", '[$5]')]) > conftest.s\n     if AC_TRY_COMMAND([$gcc_cv_as $gcc_cv_as_flags $4 -o conftest.o conftest.s >&AS_MESSAGE_LOG_FD])\n     then"}, {"sha": "97395ed4cc9c8c0c4dee1afee6ac1cebee6ae36f", "filename": "gcc/configure", "status": "modified", "additions": 58, "deletions": 356, "changes": 414, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1", "patch": "@@ -22842,8 +22842,6 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n # If build != host, and we aren't building gas in-tree, we identify a\n # build->target assembler and hope that it will have the same features\n # as the host->target assembler we'll be using.\n-gcc_cv_gas_major_version=\n-gcc_cv_gas_minor_version=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n \n if ${gcc_cv_as+:} false; then :\n@@ -22913,52 +22911,6 @@ case \"$ORIGINAL_AS_FOR_TARGET\" in\n  ;;\n esac\n \n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking what assembler to use\" >&5\n-$as_echo_n \"checking what assembler to use... \" >&6; }\n-if test \"$gcc_cv_as\" = ../gas/as-new$build_exeext; then\n-  # Single tree build which includes gas.  We want to prefer it\n-  # over whatever linker top-level may have detected, since\n-  # we'll use what we're building after installation anyway.\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: newly built gas\" >&5\n-$as_echo \"newly built gas\" >&6; }\n-  in_tree_gas=yes\n-  gcc_cv_as_bfd_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/bfd\n-for f in $gcc_cv_as_bfd_srcdir/configure \\\n-         $gcc_cv_as_gas_srcdir/configure \\\n-         $gcc_cv_as_gas_srcdir/configure.ac \\\n-         $gcc_cv_as_gas_srcdir/Makefile.in ; do\n-  gcc_cv_gas_version=`sed -n -e 's/^[ \t]*VERSION=[^0-9A-Za-z_]*\\([0-9]*\\.[0-9]*.*\\)/VERSION=\\1/p' < $f`\n-  if test x$gcc_cv_gas_version != x; then\n-    break\n-  fi\n-done\n-case $gcc_cv_gas_version in\n-  VERSION=[0-9]*) ;;\n-  *) as_fn_error $? \"cannot find version of in-tree assembler\" \"$LINENO\" 5;;\n-esac\n-gcc_cv_gas_major_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=\\([0-9]*\\)\"`\n-gcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n-gcc_cv_gas_patch_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.[0-9]*\\.\\([0-9]*\\)\"`\n-case $gcc_cv_gas_patch_version in\n-  \"\") gcc_cv_gas_patch_version=\"0\" ;;\n-esac\n-gcc_cv_gas_vers=`expr \\( \\( $gcc_cv_gas_major_version \\* 1000 \\) \\\n-\t\t\t    + $gcc_cv_gas_minor_version \\) \\* 1000 \\\n-\t\t\t    + $gcc_cv_gas_patch_version`\n-\n-  in_tree_gas_is_elf=no\n-  if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     || (grep 'obj_format = multi' ../gas/Makefile \\\n-         && grep 'extra_objects =.* obj-elf' ../gas/Makefile) > /dev/null\n-  then\n-    in_tree_gas_is_elf=yes\n-  fi\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gcc_cv_as\" >&5\n-$as_echo \"$gcc_cv_as\" >&6; }\n-  in_tree_gas=no\n-fi\n-\n default_ld=\n # Check whether --enable-ld was given.\n if test \"${enable_ld+set}\" = set; then :\n@@ -23582,11 +23534,7 @@ if ${gcc_cv_as_balign_and_p2align+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_balign_and_p2align=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 6 \\) \\* 1000 + 0`\n-  then gcc_cv_as_balign_and_p2align=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.balign 4\n .p2align 2' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n@@ -23619,11 +23567,7 @@ if ${gcc_cv_as_max_skip_p2align+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_max_skip_p2align=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 8 \\) \\* 1000 + 0`\n-  then gcc_cv_as_max_skip_p2align=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.p2align 4,,7' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -23655,11 +23599,7 @@ if ${gcc_cv_as_literal16+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_literal16=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 8 \\) \\* 1000 + 0`\n-  then gcc_cv_as_literal16=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.literal16' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -23691,12 +23631,7 @@ if ${gcc_cv_as_subsection_m1+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_subsection_m1=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 9 \\) \\* 1000 + 0`\n-  then gcc_cv_as_subsection_m1=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo 'conftest_label1: .word 0\n .subsection -1\n conftest_label2: .word 0\n@@ -23739,11 +23674,7 @@ if ${gcc_cv_as_weak+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_weak=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 2 \\) \\* 1000 + 0`\n-  then gcc_cv_as_weak=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.weak foobar' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -23775,11 +23706,7 @@ if ${gcc_cv_as_weakref+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_weakref=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 17 \\) \\* 1000 + 0`\n-  then gcc_cv_as_weakref=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.weakref foobar, barfnot' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -23811,11 +23738,7 @@ if ${gcc_cv_as_nsubspa_comdat+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_nsubspa_comdat=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 15 \\) \\* 1000 + 91`\n-  then gcc_cv_as_nsubspa_comdat=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.SPACE $TEXT$\n \t.NSUBSPA $CODE$,COMDAT' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n@@ -23864,12 +23787,7 @@ if ${gcc_cv_as_hidden+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_hidden=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 13 \\) \\* 1000 + 0`\n-  then gcc_cv_as_hidden=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -24322,12 +24240,7 @@ if ${gcc_cv_as_leb128+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_leb128=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 11 \\) \\* 1000 + 0`\n-  then gcc_cv_as_leb128=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.data\n \t.uleb128 L2 - L1\n L1:\n@@ -24612,12 +24525,7 @@ if ${gcc_cv_as_eh_frame+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_eh_frame=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 12 \\) \\* 1000 + 0`\n-  then gcc_cv_as_eh_frame=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.text\n .LFB1:\n \t.4byte\t0\n@@ -24716,11 +24624,7 @@ if ${gcc_cv_as_section_exclude_e+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_section_exclude_e=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 22 \\) \\* 1000 + 51`\n-  then gcc_cv_as_section_exclude_e=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section foo1,\"e\"\n   .byte 0,0,0,0' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --fatal-warnings -o conftest.o conftest.s >&5'\n@@ -24807,12 +24711,7 @@ if ${gcc_cv_as_shf_gnu_retain+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_shf_gnu_retain=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 36 \\) \\* 1000 + 0`\n-  then gcc_cv_as_shf_gnu_retain=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section .foo,\"awR\",%progbits\n .byte 0' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --fatal-warnings -o conftest.o conftest.s >&5'\n@@ -24858,11 +24757,7 @@ if ${gcc_cv_as_section_link_order+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_section_link_order=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 35 \\) \\* 1000 + 0`\n-  then gcc_cv_as_section_link_order=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section .foo,\"a\"\n .byte 0\n .section __patchable_function_entries,\"awo\",%progbits,.foo\n@@ -24900,12 +24795,7 @@ if ${gcc_cv_as_shf_merge+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_shf_merge=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 12 \\) \\* 1000 + 0`\n-  then gcc_cv_as_shf_merge=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section .rodata.str, \"aMS\", @progbits, 1' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --fatal-warnings -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -24933,12 +24823,7 @@ if ${gcc_cv_as_shf_merge+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_shf_merge=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 12 \\) \\* 1000 + 0`\n-  then gcc_cv_as_shf_merge=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section .rodata.str, \"aMS\", %progbits, 1' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --fatal-warnings -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -25021,12 +24906,7 @@ if ${gcc_cv_as_comdat_group+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_comdat_group=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 16 \\) \\* 1000 + 0`\n-  then gcc_cv_as_comdat_group=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section .text,\"axG\",@progbits,.foo,comdat' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --fatal-warnings -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -25057,12 +24937,7 @@ if ${gcc_cv_as_comdat_group_percent+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_comdat_group_percent=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 16 \\) \\* 1000 + 0`\n-  then gcc_cv_as_comdat_group_percent=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section .text,\"axG\",%progbits,.foo,comdat' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --fatal-warnings -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -25239,11 +25114,7 @@ if ${gcc_cv_as_is_stmt+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_is_stmt=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 16 \\) \\* 1000 + 92`\n-  then gcc_cv_as_is_stmt=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.text\n \t.file 1 \"conf.c\"\n \t.loc 1 1 0 is_stmt 1' > conftest.s\n@@ -25277,11 +25148,7 @@ if ${gcc_cv_as_discriminator+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_discriminator=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 19 \\) \\* 1000 + 51`\n-  then gcc_cv_as_discriminator=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.text\n \t.file 1 \"conf.c\"\n \t.loc 1 1 0 discriminator 1' > conftest.s\n@@ -25821,11 +25688,7 @@ if ${gcc_cv_as_tls+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_tls=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( $tls_first_major \\* 1000 \\) + $tls_first_minor \\) \\* 1000 + 0`\n-  then gcc_cv_as_tls=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags $tls_as_opt -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -26237,11 +26100,7 @@ if ${gcc_cv_as_alpha_explicit_relocs+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_alpha_explicit_relocs=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 12 \\) \\* 1000 + 0`\n-  then gcc_cv_as_alpha_explicit_relocs=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.set nomacro\n \t.text\n \textbl\t$3, $2, $3\t!lituse_bytoff!1\n@@ -26284,11 +26143,7 @@ if ${gcc_cv_as_alpha_jsrdirect_relocs+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_alpha_jsrdirect_relocs=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 16 \\) \\* 1000 + 90`\n-  then gcc_cv_as_alpha_jsrdirect_relocs=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.set nomacro\n \t.text\n \tldq\t$27, a($29)\t!literal!1\n@@ -26485,11 +26340,7 @@ if ${gcc_cv_as_cris_no_mul_bug+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_cris_no_mul_bug=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 15 \\) \\* 1000 + 91`\n-  then gcc_cv_as_cris_no_mul_bug=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.text' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags -no-mul-bug-abort -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -26964,11 +26815,7 @@ if ${gcc_cv_as_comm_has_align+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_comm_has_align=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 19 \\) \\* 1000 + 52`\n-  then gcc_cv_as_comm_has_align=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.comm foo,1,32' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -27001,11 +26848,7 @@ if ${gcc_cv_as_ix86_pe_secrel32+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_ix86_pe_secrel32=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 15 \\) \\* 1000 + 91`\n-  then gcc_cv_as_ix86_pe_secrel32=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.text\n foo:\tnop\n .data\n@@ -27047,11 +26890,7 @@ if ${gcc_cv_as_section_has_align+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_section_has_align=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 20 \\) \\* 1000 + 1`\n-  then gcc_cv_as_section_has_align=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section lto_test,\"dr0\"' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags -fatal-warnings -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -27752,11 +27591,7 @@ if ${gcc_cv_as_ix86_gotoff_in_data+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_ix86_gotoff_in_data=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 11 \\) \\* 1000 + 0`\n-  then gcc_cv_as_ix86_gotoff_in_data=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.text\n .L0:\n \tnop\n@@ -27850,11 +27685,7 @@ if ${gcc_cv_as_ia64_ltoffx_ldxmov_relocs+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_ia64_ltoffx_ldxmov_relocs=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 14 \\) \\* 1000 + 0`\n-  then gcc_cv_as_ia64_ltoffx_ldxmov_relocs=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.text\n \taddl r15 = @ltoffx(x#), gp\n \t;;\n@@ -27942,11 +27773,7 @@ if ${gcc_cv_as_powerpc_mfcrf+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_powerpc_mfcrf=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 14 \\) \\* 1000 + 0`\n-  then gcc_cv_as_powerpc_mfcrf=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -27991,11 +27818,7 @@ if ${gcc_cv_as_powerpc_rel16+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_powerpc_rel16=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 17 \\) \\* 1000 + 0`\n-  then gcc_cv_as_powerpc_rel16=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags -a32 -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28036,11 +27859,7 @@ if ${gcc_cv_as_powerpc_vsx+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_powerpc_vsx=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 19 \\) \\* 1000 + 2`\n-  then gcc_cv_as_powerpc_vsx=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags -a32 -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28072,11 +27891,7 @@ if ${gcc_cv_as_powerpc_gnu_attribute+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_powerpc_gnu_attribute=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 18 \\) \\* 1000 + 0`\n-  then gcc_cv_as_powerpc_gnu_attribute=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.gnu_attribute 4,1' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28108,11 +27923,7 @@ if ${gcc_cv_as_powerpc_entry_markers+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_powerpc_entry_markers=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 26 \\) \\* 1000 + 0`\n-  then gcc_cv_as_powerpc_entry_markers=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo ' .reloc .,R_PPC64_ENTRY; nop' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags -a64 --fatal-warnings -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28144,11 +27955,7 @@ if ${gcc_cv_as_powerpc_pltseq_markers+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_powerpc_pltseq_markers=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 31 \\) \\* 1000 + 0`\n-  then gcc_cv_as_powerpc_pltseq_markers=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo ' .reloc .,R_PPC_PLTSEQ; nop' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags -a32 --fatal-warnings -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28182,11 +27989,7 @@ if ${gcc_cv_as_aix_ref+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_aix_ref=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 21 \\) \\* 1000 + 0`\n-  then gcc_cv_as_aix_ref=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.csect stuff[rw]\n \t     stuff:\n \t\t.long 1\n@@ -28223,11 +28026,7 @@ if ${gcc_cv_as_aix_dwloc+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_aix_dwloc=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 21 \\) \\* 1000 + 0`\n-  then gcc_cv_as_aix_dwloc=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.dwsect 0xA0000\n \tLframe..0:\n \t\t.vbyte 4,Lframe..0\n@@ -28266,11 +28065,7 @@ if ${gcc_cv_as_mips_explicit_relocs+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_mips_explicit_relocs=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 14 \\) \\* 1000 + 0`\n-  then gcc_cv_as_mips_explicit_relocs=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\tlw $4,%gp_rel(foo)($4)' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28303,11 +28098,7 @@ if ${gcc_cv_as_mips_no_shared+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_mips_no_shared=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 16 \\) \\* 1000 + 0`\n-  then gcc_cv_as_mips_no_shared=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo 'nop' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags -mno-shared -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28339,11 +28130,7 @@ if ${gcc_cv_as_mips_gnu_attribute+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_mips_gnu_attribute=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 18 \\) \\* 1000 + 0`\n-  then gcc_cv_as_mips_gnu_attribute=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.gnu_attribute 4,1' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28444,11 +28231,7 @@ if ${gcc_cv_as_mips_dtprelword+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_mips_dtprelword=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 18 \\) \\* 1000 + 0`\n-  then gcc_cv_as_mips_dtprelword=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.section .tdata,\"awT\",@progbits\n x:\n \t.word 2\n@@ -28652,11 +28435,7 @@ if ${gcc_cv_as_msp430_gnu_attribute+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_msp430_gnu_attribute=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 33 \\) \\* 1000 + 50`\n-  then gcc_cv_as_msp430_gnu_attribute=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.gnu_attribute 4,1' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28687,11 +28466,7 @@ if ${gcc_cv_as_msp430_mspabi_attribute+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_msp430_mspabi_attribute=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 33 \\) \\* 1000 + 50`\n-  then gcc_cv_as_msp430_mspabi_attribute=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.mspabi_attribute 4,2' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28766,11 +28541,7 @@ if ${gcc_cv_as_riscv_attribute+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_riscv_attribute=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 32 \\) \\* 1000 + 0`\n-  then gcc_cv_as_riscv_attribute=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.attribute stack_align,4' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28865,11 +28636,7 @@ if ${gcc_cv_as_s390_gnu_attribute+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_s390_gnu_attribute=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 18 \\) \\* 1000 + 0`\n-  then gcc_cv_as_s390_gnu_attribute=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.gnu_attribute 8,1' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28900,11 +28667,7 @@ if ${gcc_cv_as_s390_machine_machinemode+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_s390_machine_machinemode=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 24 \\) \\* 1000 + 0`\n-  then gcc_cv_as_s390_machine_machinemode=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.machinemode push\n \t.machinemode pop\n \t.machine push\n@@ -28938,11 +28701,7 @@ if ${gcc_cv_as_s390_architecture_modifiers+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_s390_architecture_modifiers=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 26 \\) \\* 1000 + 0`\n-  then gcc_cv_as_s390_architecture_modifiers=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\t.machine z13+vx ' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -28973,11 +28732,7 @@ if ${gcc_cv_as_s390_vector_loadstore_alignment_hints+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_s390_vector_loadstore_alignment_hints=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 31 \\) \\* 1000 + 0`\n-  then gcc_cv_as_s390_vector_loadstore_alignment_hints=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '\tvl %v24,0(%r15),3 ' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29240,12 +28995,7 @@ if ${gcc_cv_as_dwarf2_debug_line+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_dwarf2_debug_line=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 11 \\) \\* 1000 + 0`\n-  then gcc_cv_as_dwarf2_debug_line=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29329,12 +29079,7 @@ if ${gcc_cv_as_dwarf2_debug_view+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_dwarf2_debug_view=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 27 \\) \\* 1000 + 0`\n-  then gcc_cv_as_dwarf2_debug_view=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29368,12 +29113,7 @@ if ${gcc_cv_as_gdwarf2_flag+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_gdwarf2_flag=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 11 \\) \\* 1000 + 0`\n-  then gcc_cv_as_gdwarf2_flag=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$insn\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --gdwarf2 -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29405,12 +29145,7 @@ if ${gcc_cv_as_gdwarf_5_flag+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_gdwarf_5_flag=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 36 \\) \\* 1000 + 0`\n-  then gcc_cv_as_gdwarf_5_flag=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$insn\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --gdwarf-5 -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29614,12 +29349,7 @@ if ${gcc_cv_as_debug_line_32_flag+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_debug_line_32_flag=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 36 \\) \\* 1000 + 0`\n-  then gcc_cv_as_debug_line_32_flag=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29649,12 +29379,7 @@ if ${gcc_cv_as_debug_line_64_flag+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_debug_line_64_flag=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 36 \\) \\* 1000 + 0`\n-  then gcc_cv_as_debug_line_64_flag=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29686,12 +29411,7 @@ if ${gcc_cv_as_dwarf_4_debug_line_flag+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_dwarf_4_debug_line_flag=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 36 \\) \\* 1000 + 0`\n-  then gcc_cv_as_dwarf_4_debug_line_flag=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$conftest_s\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --gdwarf-4 -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29827,12 +29547,7 @@ if ${gcc_cv_as_gstabs_flag+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_gstabs_flag=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 11 \\) \\* 1000 + 0`\n-  then gcc_cv_as_gstabs_flag=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$insn\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --gstabs -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -29864,11 +29579,7 @@ if ${gcc_cv_as_debug_prefix_map_flag+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_debug_prefix_map_flag=no\n-    if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 18 \\) \\* 1000 + 0`\n-  then gcc_cv_as_debug_prefix_map_flag=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo \"$insn\" > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags --debug-prefix-map /a=/b -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -30053,12 +29764,7 @@ if ${gcc_cv_as_gnu_unique_object+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_gnu_unique_object=no\n-    if test $in_tree_gas = yes; then\n-    if test $in_tree_gas_is_elf = yes \\\n-  && test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 19 \\) \\* 1000 + 52`\n-  then gcc_cv_as_gnu_unique_object=yes\n-fi\n-  elif test x$gcc_cv_as != x; then\n+  if test x$gcc_cv_as != x; then\n     $as_echo '.type foo, '$target_type_format_char'gnu_unique_object' > conftest.s\n     if { ac_try='$gcc_cv_as $gcc_cv_as_flags  -o conftest.o conftest.s >&5'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5\n@@ -30102,11 +29808,7 @@ if ${gcc_cv_as_line_zero+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   gcc_cv_as_line_zero=no\n-  if test $in_tree_gas = yes; then\n-    if test $gcc_cv_gas_vers -ge `expr \\( \\( 2 \\* 1000 \\) + 16 \\) \\* 1000 + 91`\n-  then gcc_cv_as_line_zero=yes\n-fi\n-  elif test \"x$gcc_cv_as\" != x; then\n+  if test \"x$gcc_cv_as\" != x; then\n     { echo '# 1 \"test.s\" 1'; echo '# 0 \"\" 2'; } > conftest.s\n     if { ac_try='$gcc_cv_as -o conftest.o conftest.s >&5 2>conftest.out'\n   { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_try\\\"\"; } >&5"}, {"sha": "89f08759971358e1bd65eb16e4c29e994a5c3e7a", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 25, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=7cad8a8f9f7bfa8e98f6a0615541f589fd1d3fc1", "patch": "@@ -2556,8 +2556,6 @@ AC_SUBST(enable_fast_install)\n # If build != host, and we aren't building gas in-tree, we identify a\n # build->target assembler and hope that it will have the same features\n # as the host->target assembler we'll be using.\n-gcc_cv_gas_major_version=\n-gcc_cv_gas_minor_version=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n \n m4_pattern_allow([AS_FOR_TARGET])dnl\n@@ -2584,26 +2582,6 @@ case \"$ORIGINAL_AS_FOR_TARGET\" in\n   *) AC_CONFIG_FILES(as:exec-tool.in, [chmod +x as]) ;;\n esac \n \n-AC_MSG_CHECKING(what assembler to use)\n-if test \"$gcc_cv_as\" = ../gas/as-new$build_exeext; then\n-  # Single tree build which includes gas.  We want to prefer it\n-  # over whatever linker top-level may have detected, since\n-  # we'll use what we're building after installation anyway.\n-  AC_MSG_RESULT(newly built gas)\n-  in_tree_gas=yes\n-  _gcc_COMPUTE_GAS_VERSION\n-  in_tree_gas_is_elf=no\n-  if grep 'obj_format = elf' ../gas/Makefile > /dev/null \\\n-     || (grep 'obj_format = multi' ../gas/Makefile \\\n-         && grep 'extra_objects =.* obj-elf' ../gas/Makefile) > /dev/null\n-  then\n-    in_tree_gas_is_elf=yes\n-  fi\n-else\n-  AC_MSG_RESULT($gcc_cv_as)\n-  in_tree_gas=no\n-fi\n-\n default_ld=\n AC_ARG_ENABLE(ld,\n [[  --enable-ld[=ARG]       build ld [ARG={default,yes,no}]]],\n@@ -5904,9 +5882,7 @@ fi\n AC_CACHE_CHECK([assembler for tolerance to line number 0],\n  [gcc_cv_as_line_zero],\n  [gcc_cv_as_line_zero=no\n-  if test $in_tree_gas = yes; then\n-    gcc_GAS_VERSION_GTE_IFELSE(2, 16, 91, [gcc_cv_as_line_zero=yes])\n-  elif test \"x$gcc_cv_as\" != x; then\n+  if test \"x$gcc_cv_as\" != x; then\n     { echo '# 1 \"test.s\" 1'; echo '# 0 \"\" 2'; } > conftest.s\n     if AC_TRY_COMMAND([$gcc_cv_as -o conftest.o conftest.s >&AS_MESSAGE_LOG_FD 2>conftest.out]) &&\n        test \"x`cat conftest.out`\" = x"}]}