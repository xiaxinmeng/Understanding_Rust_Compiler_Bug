{"sha": "2bdc7dcbbd2eee4f114c09443933cc37a546dbff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmJkYzdkY2JiZDJlZWU0ZjExNGMwOTQ0MzkzM2NjMzdhNTQ2ZGJmZg==", "commit": {"author": {"name": "Sam Tebbs", "email": "sam.tebbs@arm.com", "date": "2019-07-05T13:16:55Z"}, "committer": {"name": "Sam Tebbs", "email": "samtebbs@gcc.gnu.org", "date": "2019-07-05T13:16:55Z"}, "message": "[PATCH][GCC][AARCH64] PR target/90712 Fix gcc.dg/rtl/aarch64/subs_adds_sp.c regression\n\ngcc/\n2019-07-05  Sam Tebbs  <sam.tebbs@arm.com>\n\n\tPR target/90712\n\t* aarch64/aarch64.c (aarch64_post_cfi_startproc): Replace thunk check\n\twith a frame laid out check.\n\nFrom-SVN: r273138", "tree": {"sha": "45dda3a8b77b9a87f3e054727486d8e5eb6c49b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45dda3a8b77b9a87f3e054727486d8e5eb6c49b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2bdc7dcbbd2eee4f114c09443933cc37a546dbff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bdc7dcbbd2eee4f114c09443933cc37a546dbff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2bdc7dcbbd2eee4f114c09443933cc37a546dbff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2bdc7dcbbd2eee4f114c09443933cc37a546dbff/comments", "author": null, "committer": null, "parents": [{"sha": "66076dcb60bee1c3d2c41ced5424ada90149d7fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66076dcb60bee1c3d2c41ced5424ada90149d7fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66076dcb60bee1c3d2c41ced5424ada90149d7fc"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "53e671410eddc5be0e172e3f8d1976f914f5ef62", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bdc7dcbbd2eee4f114c09443933cc37a546dbff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bdc7dcbbd2eee4f114c09443933cc37a546dbff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2bdc7dcbbd2eee4f114c09443933cc37a546dbff", "patch": "@@ -1,3 +1,9 @@\n+2019-07-05  Sam Tebbs  <sam.tebbs@arm.com>\n+\n+\tPR target/90712\n+\t* aarch64/aarch64.c (aarch64_post_cfi_startproc): Replace thunk check\n+\twith a frame laid out check.\n+\n 2019-07-05  Richard Biener  <rguenther@suse.de>\n \n \t* tree-ssa-sccvn.c (vn_reference_lookup_3): Valueize RHS"}, {"sha": "a18fbd0f0aa8acc000fd57af5d060961ef0a4e13", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2bdc7dcbbd2eee4f114c09443933cc37a546dbff/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2bdc7dcbbd2eee4f114c09443933cc37a546dbff/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=2bdc7dcbbd2eee4f114c09443933cc37a546dbff", "patch": "@@ -15745,7 +15745,7 @@ aarch64_asm_output_external (FILE *stream, tree decl, const char* name)\n void\n aarch64_post_cfi_startproc (FILE *f, tree ignored ATTRIBUTE_UNUSED)\n {\n-  if (!cfun->is_thunk && aarch64_return_address_signing_enabled ()\n+  if (cfun->machine->frame.laid_out && aarch64_return_address_signing_enabled ()\n       && aarch64_ra_sign_key == AARCH64_KEY_B)\n \tasm_fprintf (f, \"\\t.cfi_b_key_frame\\n\");\n }"}]}