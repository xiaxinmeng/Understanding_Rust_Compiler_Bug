{"sha": "8eacc23d9414c3d513d75b93cac2c8ae5209747f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGVhY2MyM2Q5NDE0YzNkNTEzZDc1YjkzY2FjMmM4YWU1MjA5NzQ3Zg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2007-07-02T23:29:27Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2007-07-02T23:29:27Z"}, "message": "[multiple changes]\n\n2007-07-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tRestore collateral damage from ISO C Binding merge.\n\n        2007-06-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/32456\n\t* io/unit.c (filename_from_unit): Don't use find_unit, instead search\n\tfor unit directly.\n\nFrom-SVN: r126238", "tree": {"sha": "cbef3e3f5b652593da3a654b71e444f8fc22bc8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cbef3e3f5b652593da3a654b71e444f8fc22bc8c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8eacc23d9414c3d513d75b93cac2c8ae5209747f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8eacc23d9414c3d513d75b93cac2c8ae5209747f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8eacc23d9414c3d513d75b93cac2c8ae5209747f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8eacc23d9414c3d513d75b93cac2c8ae5209747f/comments", "author": null, "committer": null, "parents": [{"sha": "5cc48455646e5339afc2ed777eff0d852fc08215", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cc48455646e5339afc2ed777eff0d852fc08215", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cc48455646e5339afc2ed777eff0d852fc08215"}], "stats": {"total": 35, "additions": 31, "deletions": 4}, "files": [{"sha": "dc0e2468ef99c70009dcb1b3b20156fd5cbe0c27", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8eacc23d9414c3d513d75b93cac2c8ae5209747f/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8eacc23d9414c3d513d75b93cac2c8ae5209747f/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=8eacc23d9414c3d513d75b93cac2c8ae5209747f", "patch": "@@ -1,3 +1,14 @@\n+2007-07-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tRestore collateral damage from ISO C Binding merge.\n+\n+        2007-06-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/32456\n+\t* io/unit.c (filename_from_unit): Don't use find_unit, instead search\n+\tfor unit directly.\n+\n+\n 2007-07-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \t* Makefile.in:  Regenerated with automake 1.9.6."}, {"sha": "fac67bdaf7ec494f973836369f1f76f4e11305ba", "filename": "libgfortran/io/unit.c", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8eacc23d9414c3d513d75b93cac2c8ae5209747f/libgfortran%2Fio%2Funit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8eacc23d9414c3d513d75b93cac2c8ae5209747f/libgfortran%2Fio%2Funit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funit.c?ref=8eacc23d9414c3d513d75b93cac2c8ae5209747f", "patch": "@@ -690,11 +690,26 @@ update_position (gfc_unit *u)\n    must free memory allocated for the filename string.  */\n \n char *\n-filename_from_unit (int unit_number)\n+filename_from_unit (int n)\n {\n   char *filename;\n-  gfc_unit *u = NULL;\n-  u = find_unit (unit_number);\n+  gfc_unit *u;\n+  int c;\n+\n+  /* Find the unit.  */\n+  u = unit_root;\n+  while (u != NULL)\n+    {\n+      c = compare (n, u->unit_number);\n+      if (c < 0)\n+\tu = u->left;\n+      if (c > 0)\n+\tu = u->right;\n+      if (c == 0)\n+\tbreak;\n+    }\n+\n+  /* Get the filename.  */\n   if (u != NULL)\n     {\n       filename = (char *) get_mem (u->file_len + 1);\n@@ -703,4 +718,5 @@ filename_from_unit (int unit_number)\n     }\n   else\n     return (char *) NULL;\n-}\n\\ No newline at end of file\n+}\n+"}]}