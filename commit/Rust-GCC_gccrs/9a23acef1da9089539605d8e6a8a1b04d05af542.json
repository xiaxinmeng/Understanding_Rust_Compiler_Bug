{"sha": "9a23acef1da9089539605d8e6a8a1b04d05af542", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWEyM2FjZWYxZGE5MDg5NTM5NjA1ZDhlNmE4YTFiMDRkMDVhZjU0Mg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2009-05-09T20:10:37Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2009-05-09T20:10:37Z"}, "message": "re PR middle-end/40080 (error: missing callgraph edge for call stmt)\n\n\n\tPR middle-end/40080\n\t* cgraphunit.c (cgraph_materialize_all_clones): Do not redirect\n\tindirect calls; verify cgraph afterwards.\n\nFrom-SVN: r147320", "tree": {"sha": "43b5d9b7a4d59a1f00ee1125d664d5a5f6f6748b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/43b5d9b7a4d59a1f00ee1125d664d5a5f6f6748b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a23acef1da9089539605d8e6a8a1b04d05af542", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a23acef1da9089539605d8e6a8a1b04d05af542", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a23acef1da9089539605d8e6a8a1b04d05af542", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a23acef1da9089539605d8e6a8a1b04d05af542/comments", "author": null, "committer": null, "parents": [{"sha": "d563610d814b5ebd2942b4c7b61ca57110d279ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d563610d814b5ebd2942b4c7b61ca57110d279ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d563610d814b5ebd2942b4c7b61ca57110d279ca"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "73de4f377f0e54b80d8315042723ba511b7691af", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a23acef1da9089539605d8e6a8a1b04d05af542/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a23acef1da9089539605d8e6a8a1b04d05af542/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9a23acef1da9089539605d8e6a8a1b04d05af542", "patch": "@@ -1,3 +1,9 @@\n+2009-05-09  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/40080\n+\t* cgraphunit.c (cgraph_materialize_all_clones): Do not redirect\n+\tindirect calls; verify cgraph afterwards.\n+\n 2009-05-09  Jan Hubicka  <jh@suse.cz>\n \n \tPR bootstrap/40082"}, {"sha": "e88d00d0dfb5733f8b6dd7a01c616522bde746aa", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a23acef1da9089539605d8e6a8a1b04d05af542/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a23acef1da9089539605d8e6a8a1b04d05af542/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=9a23acef1da9089539605d8e6a8a1b04d05af542", "patch": "@@ -1762,7 +1762,12 @@ cgraph_materialize_all_clones (void)\n \tfor (e = node->callees; e; e = e->next_callee)\n \t  {\n \t    tree decl = gimple_call_fndecl (e->call_stmt);\n-\t    if (decl != e->callee->decl)\n+\t    /* When function gets inlined, indirect inlining might've invented\n+\t       new edge for orginally indirect stmt.  Since we are not\n+\t       preserving clones in the original form, we must not update here\n+\t       since other inline clones don't need to contain call to the same\n+\t       call.  Inliner will do the substitution for us later.  */\n+\t    if (decl && decl != e->callee->decl)\n \t      {\n \t\tgimple new_stmt;\n \t\tgimple_stmt_iterator gsi;\n@@ -1808,6 +1813,9 @@ cgraph_materialize_all_clones (void)\n         verify_cgraph_node (node);\n #endif\n       }\n+#ifdef ENABLE_CHECKING\n+  verify_cgraph ();\n+#endif\n   cgraph_remove_unreachable_nodes (false, cgraph_dump_file);\n }\n "}]}