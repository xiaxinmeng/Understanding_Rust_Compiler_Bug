{"sha": "9688f9ada6db1aa893b02fdaf01c4222f904c73f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTY4OGY5YWRhNmRiMWFhODkzYjAyZmRhZjAxYzQyMjJmOTA0YzczZg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-05-23T22:53:54Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-05-23T22:53:54Z"}, "message": "* integrate.c (expand_inline_function): Handle CONCAT DECL_RESULT.\n\nFrom-SVN: r42515", "tree": {"sha": "1cc72a43dc9843e6f1821d6a933f266316a81d86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1cc72a43dc9843e6f1821d6a933f266316a81d86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9688f9ada6db1aa893b02fdaf01c4222f904c73f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9688f9ada6db1aa893b02fdaf01c4222f904c73f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9688f9ada6db1aa893b02fdaf01c4222f904c73f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9688f9ada6db1aa893b02fdaf01c4222f904c73f/comments", "author": null, "committer": null, "parents": [{"sha": "f8710242d38de963d4d8204af1058cef8c05472b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8710242d38de963d4d8204af1058cef8c05472b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8710242d38de963d4d8204af1058cef8c05472b"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "a62306dd0846c7b1a914583c68477d099525a0ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9688f9ada6db1aa893b02fdaf01c4222f904c73f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9688f9ada6db1aa893b02fdaf01c4222f904c73f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9688f9ada6db1aa893b02fdaf01c4222f904c73f", "patch": "@@ -1,3 +1,7 @@\n+2001-05-23  Richard Henderson <rth@redhat.com>\n+\n+\t* integrate.c (expand_inline_function): Handle CONCAT DECL_RESULT.\n+\n 2001-05-23  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* cpp.texi: Update for handling of charconsts."}, {"sha": "9b7a4e74d5100219910d835ff6b981b10f2336ca", "filename": "gcc/integrate.c", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9688f9ada6db1aa893b02fdaf01c4222f904c73f/gcc%2Fintegrate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9688f9ada6db1aa893b02fdaf01c4222f904c73f/gcc%2Fintegrate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintegrate.c?ref=9688f9ada6db1aa893b02fdaf01c4222f904c73f", "patch": "@@ -1083,6 +1083,31 @@ expand_inline_function (fndecl, parms, target, ignore, type,\n       else\n \tmap->reg_map[REGNO (loc)] = reg_to_map;\n     }\n+  else if (GET_CODE (loc) == CONCAT)\n+    {\n+      enum machine_mode departing_mode = TYPE_MODE (type);\n+      enum machine_mode arriving_mode\n+\t= GET_MODE (DECL_RTL (DECL_RESULT (fndecl)));\n+\n+      if (departing_mode != arriving_mode)\n+\tabort ();\n+      if (GET_CODE (XEXP (loc, 0)) != REG\n+\t  || GET_CODE (XEXP (loc, 1)) != REG)\n+\tabort ();\n+\n+      /* Don't use MEMs as direct targets because on some machines\n+\t substituting a MEM for a REG makes invalid insns.\n+\t Let the combiner substitute the MEM if that is valid.  */\n+      if (target == 0 || GET_CODE (target) != REG\n+\t  || GET_MODE (target) != departing_mode)\n+\ttarget = gen_reg_rtx (departing_mode);\n+\n+      if (GET_CODE (target) != CONCAT)\n+\tabort ();\n+\n+      map->reg_map[REGNO (XEXP (loc, 0))] = XEXP (target, 0);\n+      map->reg_map[REGNO (XEXP (loc, 1))] = XEXP (target, 1);\n+    }\n   else\n     abort ();\n "}]}