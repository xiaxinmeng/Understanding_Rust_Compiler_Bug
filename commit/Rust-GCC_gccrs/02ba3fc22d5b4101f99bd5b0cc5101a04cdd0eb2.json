{"sha": "02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDJiYTNmYzIyZDViNDEwMWY5OWJkNWIwY2M1MTAxYTA0Y2RkMGViMg==", "commit": {"author": {"name": "Tim Shen", "email": "timshen@google.com", "date": "2014-11-25T05:43:04Z"}, "committer": {"name": "Tim Shen", "email": "timshen@gcc.gnu.org", "date": "2014-11-25T05:43:04Z"}, "message": "re PR libstdc++/63920 (Any regular expression should not match an empty sequence if match_not_null is specified)\n\n\tPR libstdc++/63920\n\t* include/bits/regex_executor.h: Make _M_begin non const.\n\t* include/bits/regex_executor.tcc (_Executor<>::_M_search): Increase\n\t_M_begin in search algorithm, so that _M_begin is treated as\n\t\"current start position\" for each search iteration.\n\t* testsuite/28_regex/algorithms/regex_search/ecma/flags.cc: New\n\ttestcase.\n\nFrom-SVN: r218037", "tree": {"sha": "b5ca80b80eb4fcbdf7b29b72f70f709d6d1c5f9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5ca80b80eb4fcbdf7b29b72f70f709d6d1c5f9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/comments", "author": {"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5534b254aeaec496b1aa0cf9f9c951c9debfa97d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5534b254aeaec496b1aa0cf9f9c951c9debfa97d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5534b254aeaec496b1aa0cf9f9c951c9debfa97d"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "0c4cce9ed36a402e2190d6d6bf89edf3e9d333d2", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "patch": "@@ -1,3 +1,13 @@\n+2014-11-25  Tim Shen  <timshen@google.com>\n+\n+\tPR libstdc++/63920\n+\t* include/bits/regex_executor.h: Make _M_begin non const.\n+\t* include/bits/regex_executor.tcc (_Executor<>::_M_search): Increase\n+\t_M_begin in search algorithm, so that _M_begin is treated as\n+\t\"current start position\" for each search iteration.\n+\t* testsuite/28_regex/algorithms/regex_search/ecma/flags.cc: New\n+\ttestcase.\n+\n 2014-11-21  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR bootstrap/63784"}, {"sha": "2d7796fba8010f38b07735bfb185cf293002386a", "filename": "libstdc++-v3/include/bits/regex_executor.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fregex_executor.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fregex_executor.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fregex_executor.h?ref=02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "patch": "@@ -205,7 +205,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     public:\n       _ResultsVec                                           _M_cur_results;\n       _BiIter                                               _M_current;\n-      const _BiIter                                         _M_begin;\n+      _BiIter                                               _M_begin;\n       const _BiIter                                         _M_end;\n       const _RegexT&                                        _M_re;\n       const _NFAT&                                          _M_nfa;"}, {"sha": "a9736675bf60a70164b108fe8e5f3d05078ec58f", "filename": "libstdc++-v3/include/bits/regex_executor.tcc", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fregex_executor.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fregex_executor.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fregex_executor.tcc?ref=02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "patch": "@@ -39,17 +39,17 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     bool _Executor<_BiIter, _Alloc, _TraitsT, __dfs_mode>::\n     _M_search()\n     {\n+      if (_M_search_from_first())\n+\treturn true;\n       if (_M_flags & regex_constants::match_continuous)\n-\treturn _M_search_from_first();\n-      auto __cur = _M_begin;\n-      do\n+\treturn false;\n+      _M_flags |= regex_constants::match_prev_avail;\n+      while (_M_begin != _M_end)\n \t{\n-\t  _M_current = __cur;\n-\t  if (_M_main(_Match_mode::_Prefix))\n+\t  ++_M_begin;\n+\t  if (_M_search_from_first())\n \t    return true;\n \t}\n-      // Continue when __cur == _M_end\n-      while (__cur++ != _M_end);\n       return false;\n     }\n "}, {"sha": "6b038ee9333a546bde512f3a2442f538ed6f45ee", "filename": "libstdc++-v3/testsuite/28_regex/algorithms/regex_search/ecma/flags.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2Ftestsuite%2F28_regex%2Falgorithms%2Fregex_search%2Fecma%2Fflags.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2/libstdc%2B%2B-v3%2Ftestsuite%2F28_regex%2Falgorithms%2Fregex_search%2Fecma%2Fflags.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F28_regex%2Falgorithms%2Fregex_search%2Fecma%2Fflags.cc?ref=02ba3fc22d5b4101f99bd5b0cc5101a04cdd0eb2", "patch": "@@ -65,6 +65,8 @@ test01()\n \t\t\t     regex_constants::match_prev_avail));\n   VERIFY( regex_search_debug(\"ba\"+1, regex(\"\\\\Ba\"),\n \t\t\t     regex_constants::match_prev_avail));\n+  // PR libstdc++/63920\n+  VERIFY(!regex_search_debug(\"a\", regex(\"b*\"), regex_constants::match_not_null));\n }\n \n int"}]}