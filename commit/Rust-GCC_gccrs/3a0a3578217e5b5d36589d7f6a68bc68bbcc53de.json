{"sha": "3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2EwYTM1NzgyMTdlNWI1ZDM2NTg5ZDdmNmE2OGJjNjhiYmNjNTNkZQ==", "commit": {"author": {"name": "Ira Rosen", "email": "ira.rosen@linaro.org", "date": "2011-10-09T15:09:00Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2011-10-09T15:09:00Z"}, "message": "re PR tree-optimization/50635 (ICE on valid: segfault in vectorize_loops)\n\n\n        PR tree-optimization/50635\n        * tree-vect-patterns.c (vect_handle_widen_mult_by_const): Add\n        DEF_STMT to the list of statements to be replaced by the\n        pattern statements.\n        (vect_handle_widen_mult_by_const): Don't check TYPE_OUT.\n\nFrom-SVN: r179724", "tree": {"sha": "d20015fff4fe516413cda16224d927d9f47cbdbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d20015fff4fe516413cda16224d927d9f47cbdbb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/comments", "author": null, "committer": null, "parents": [{"sha": "4e5d3db2c4ceca99cbeaeca30080c3825ddcceef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e5d3db2c4ceca99cbeaeca30080c3825ddcceef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e5d3db2c4ceca99cbeaeca30080c3825ddcceef"}], "stats": {"total": 37, "additions": 35, "deletions": 2}, "files": [{"sha": "925b62577e02f6f8733b9e25b52ff7861fcf2d80", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "patch": "@@ -1,3 +1,11 @@\n+2011-10-09  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/50635\n+\t* tree-vect-patterns.c (vect_handle_widen_mult_by_const): Add\n+\tDEF_STMT to the list of statements to be replaced by the\n+\tpattern statements.\n+\t(vect_handle_widen_mult_by_const): Don't check TYPE_OUT.\n+\n 2011-10-09  Anatoly Sokolov  <aesok@post.ru>\n \n \t* system.h: Commit forgotten hunk in previous patch."}, {"sha": "67bd0400af216bff5dca662e26351c72157e6d84", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "patch": "@@ -1,3 +1,8 @@\n+2011-10-09  Ira Rosen  <ira.rosen@linaro.org>\n+\n+\tPR tree-optimization/50635\n+\t* gcc.dg/vect/pr50635.c: New test.\n+\n 2011-10-09  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/50659"}, {"sha": "6a7ac52e82126deeacc55d8066b97b8814ca2678", "filename": "gcc/testsuite/gcc.dg/vect/pr50635.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr50635.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr50635.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr50635.c?ref=3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do compile } */\n+\n+typedef signed long int32_t;\n+typedef char int8_t;\n+\n+void f0a(int32_t * result, int32_t * arg1, int8_t * arg2, int32_t temp_3)\n+{\n+  int idx;\n+  for (idx=0;idx<10;idx += 1)\n+    {\n+      int32_t temp_4;\n+      int32_t temp_12;\n+\n+      temp_4 = (-2 & arg2[idx]) + temp_3;\n+      temp_12 = -2 * arg2[idx] + temp_4;\n+      result[idx] = temp_12;\n+    }\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */\n+"}, {"sha": "44a37b91e387aa39029fea2dbe485ecb0b8a282b", "filename": "gcc/tree-vect-patterns.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2Ftree-vect-patterns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0a3578217e5b5d36589d7f6a68bc68bbcc53de/gcc%2Ftree-vect-patterns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-patterns.c?ref=3a0a3578217e5b5d36589d7f6a68bc68bbcc53de", "patch": "@@ -388,6 +388,7 @@ vect_handle_widen_mult_by_const (gimple stmt, tree const_oprnd, tree *oprnd,\n           || TREE_TYPE (gimple_assign_lhs (new_stmt)) != new_type)\n         return false;\n \n+      VEC_safe_push (gimple, heap, *stmts, def_stmt);\n       *oprnd = gimple_assign_lhs (new_stmt);\n     }\n   else\n@@ -1424,8 +1425,6 @@ vect_pattern_recog_1 (vect_recog_func_ptr vect_recog_func,\n     {\n       /* No need to check target support (already checked by the pattern\n          recognition function).  */\n-      if (type_out)\n-\tgcc_assert (VECTOR_MODE_P (TYPE_MODE (type_out)));\n       pattern_vectype = type_out ? type_out : type_in;\n     }\n   else"}]}