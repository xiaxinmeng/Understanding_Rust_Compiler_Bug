{"sha": "7f75ae868a2108e93c21500b9a2b1017b6ccf691", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y3NWFlODY4YTIxMDhlOTNjMjE1MDBiOWEyYjEwMTdiNmNjZjY5MQ==", "commit": {"author": {"name": "Catherine Moore", "email": "clm@codesourcery.com", "date": "2008-11-10T23:56:24Z"}, "committer": {"name": "Catherine Moore", "email": "clm@gcc.gnu.org", "date": "2008-11-10T23:56:24Z"}, "message": "config.gcc (mips64vrel-*-elf*): Include the tm_file prior to vr.h.\n\n        * config.gcc (mips64vrel-*-elf*): Include the tm_file\n        prior to vr.h.\n        * config/mips/linux.h (LINUX_DRIVER_SELF_SPECS): New.\n        (BASE_DRIVER_SELF_SPECS): Remove.\n        (DRIVER_SELF_SPECS): New definition.\n        * config/mips/elfoabi.h: (DRIVER_SELF_SPECS): Include\n        BASE_DRIVER_SELF_SPECS.\n        * config/mips/sde.h: Likewise.\n        * config/mips/iris6.h: Likewise.\n        * config/mips/vr.h: Likewise.\n        * config/mips/mips.h (BASE_DRIVER_SELF_SPECS): New.\n\nFrom-SVN: r141754", "tree": {"sha": "29f1d4ec454e9c8aef2fe78689616b436b91642d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29f1d4ec454e9c8aef2fe78689616b436b91642d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f75ae868a2108e93c21500b9a2b1017b6ccf691", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f75ae868a2108e93c21500b9a2b1017b6ccf691", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f75ae868a2108e93c21500b9a2b1017b6ccf691", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f75ae868a2108e93c21500b9a2b1017b6ccf691/comments", "author": {"login": "CatherineMoore", "id": 15636327, "node_id": "MDQ6VXNlcjE1NjM2MzI3", "avatar_url": "https://avatars.githubusercontent.com/u/15636327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CatherineMoore", "html_url": "https://github.com/CatherineMoore", "followers_url": "https://api.github.com/users/CatherineMoore/followers", "following_url": "https://api.github.com/users/CatherineMoore/following{/other_user}", "gists_url": "https://api.github.com/users/CatherineMoore/gists{/gist_id}", "starred_url": "https://api.github.com/users/CatherineMoore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CatherineMoore/subscriptions", "organizations_url": "https://api.github.com/users/CatherineMoore/orgs", "repos_url": "https://api.github.com/users/CatherineMoore/repos", "events_url": "https://api.github.com/users/CatherineMoore/events{/privacy}", "received_events_url": "https://api.github.com/users/CatherineMoore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "548a63222ed9b9e8de3503388d64366121ba621d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/548a63222ed9b9e8de3503388d64366121ba621d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/548a63222ed9b9e8de3503388d64366121ba621d"}], "stats": {"total": 60, "additions": 51, "deletions": 9}, "files": [{"sha": "a09fd980c3b62db687dbf52abf9b4785f55eee69", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -1,3 +1,17 @@\n+2008-11-10  Catherine Moore  <clm@codesourcery.com>\n+\n+\t* config.gcc (mips64vrel-*-elf*): Include the tm_file\n+\tprior to vr.h.\n+\t* config/mips/linux.h (LINUX_DRIVER_SELF_SPECS): New.\n+\t(BASE_DRIVER_SELF_SPECS): Remove.\n+\t(DRIVER_SELF_SPECS): New definition.\n+\t* config/mips/elfoabi.h: (DRIVER_SELF_SPECS): Include\n+\tBASE_DRIVER_SELF_SPECS.\n+\t* config/mips/sde.h: Likewise.\n+\t* config/mips/iris6.h: Likewise.\n+\t* config/mips/vr.h: Likewise.\n+\t* config/mips/mips.h (BASE_DRIVER_SELF_SPECS): New. \n+\n 2008-11-07  Vladimir Makarov  <vmakarov@redhat.com>\n \t    \n \tPR rtl-optimizations/37948"}, {"sha": "99f7c89b9453776aee8ddbedc77f9a3aa61ea343", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -1672,7 +1672,7 @@ mips64-*-elf* | mips64el-*-elf*)\n \ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=3 MIPS_ABI_DEFAULT=ABI_O64\"\n \t;;\n mips64vr-*-elf* | mips64vrel-*-elf*)\n-        tm_file=\"mips/vr.h elfos.h ${tm_file} mips/elf.h\"\n+        tm_file=\"elfos.h ${tm_file} mips/vr.h mips/elf.h\"\n         tmake_file=mips/t-vr\n         ;;\n mips64orion-*-elf* | mips64orionel-*-elf*)"}, {"sha": "add44b4cae84219d55dfd3b3b344e11037538986", "filename": "gcc/config/mips/elfoabi.h", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Felfoabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Felfoabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Felfoabi.h?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -19,6 +19,7 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n+#undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n   /* Make sure a -mips option is present.  This helps us to pick\t\\\n      the right multilib, and also makes the later specs easier\t\t\\\n@@ -32,4 +33,8 @@ along with GCC; see the file COPYING3.  If not see\n   /* Remove a redundant -mfp64 for -mabi=o64; we want the !mfp64\t\\\n      multilibs.  There's no need to check whether the architecture\t\\\n      is 64-bit; cc1 will complain if it isn't.  */\t\t\t\\\n-  \"%{mabi=o64: %<mfp64}\"\n+  \"%{mabi=o64: %<mfp64}\",\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  /* Configuration-independent MIPS rules.*/\t\t\t\t\\\n+  BASE_DRIVER_SELF_SPECS\n+"}, {"sha": "b47c38f1218c6fa45254a255911f77777e41cd48", "filename": "gcc/config/mips/iris6.h", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Firis6.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Firis6.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis6.h?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -29,9 +29,12 @@ along with GCC; see the file COPYING3.  If not see\n \n /* Force the default ABI onto the command line in order to make the specs\n    easier to write.  Default to the mips2 ISA for the O32 ABI.  */\n-#define DRIVER_SELF_SPECS \\\n-  \"%{!mabi=*: -mabi=n32}\", \\\n-  \"%{mabi=32: %{!mips*: %{!march*: -mips2}}}\"\n+#undef DRIVER_SELF_SPECS\n+#define DRIVER_SELF_SPECS \t\t\t\\\n+  \"%{!mabi=*: -mabi=n32}\", \t\t\t\\\n+  \"%{mabi=32: %{!mips*: %{!march*: -mips2}}}\", \t\\\n+  /* Configuration-independent MIPS rules.  */\t\\\n+  BASE_DRIVER_SELF_SPECS\n \n /* Force the generation of dwarf .debug_frame sections even if not\n    compiling -g.  This guarantees that we can unwind the stack.  */"}, {"sha": "c028f563de07f5bc6c573d144a1ec0cd0a4270cc", "filename": "gcc/config/mips/linux.h", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux.h?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -134,12 +134,16 @@ extern const char *host_detect_local_cpu (int argc, const char **argv);\n # define MARCH_MTUNE_NATIVE_SPECS \"\"\n #endif\n \n-#define BASE_DRIVER_SELF_SPECS \\\n+#define LINUX_DRIVER_SELF_SPECS \\\n   NO_SHARED_SPECS\t\t\t\t\t\t\t\\\n   MARCH_MTUNE_NATIVE_SPECS,\t\t\t\t\t\t\\\n   /* -mplt has no effect without -mno-shared.  Simplify later\t\t\\\n      specs handling by removing a redundant option.  */\t\t\t\\\n   \"%{!mno-shared:%<mplt}\",\t\t\t\t\t\t\\\n   /* -mplt likewise has no effect for -mabi=64 without -msym32.  */\t\\\n   \"%{mabi=64:%{!msym32:%<mplt}}\"\n-#define DRIVER_SELF_SPECS BASE_DRIVER_SELF_SPECS\n+\n+#undef DRIVER_SELF_SPECS\n+#define DRIVER_SELF_SPECS \\\n+  BASE_DRIVER_SELF_SPECS, \\\n+  LINUX_DRIVER_SELF_SPECS"}, {"sha": "bf2e0d0fae7b5c777804ceb7c6e23db2ef7e3a17", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -742,6 +742,12 @@ enum mips_code_readable_setting {\n   {\"mips-plt\", \"%{!mplt:%{!mno-plt:-m%(VALUE)}}\" }\n \n \n+/* A spec that infers the -mdsp setting from an -march argument.  */\n+#define BASE_DRIVER_SELF_SPECS \\\n+  \"%{!mno-dsp:%{march=24ke*|march=34k*|march=74k*: -mdsp}}\"\n+\n+#define DRIVER_SELF_SPECS BASE_DRIVER_SELF_SPECS\n+\n #define GENERATE_DIVIDE_TRAPS (TARGET_DIVIDE_TRAPS \\\n                                && ISA_HAS_COND_TRAP)\n "}, {"sha": "f80b6f71b08c8485f3825099cf61ecf2c27b4aa6", "filename": "gcc/config/mips/sde.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Fsde.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Fsde.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fsde.h?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -19,6 +19,7 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n+#undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS\t\t\t\t\t\t\\\n   /* Make sure a -mips option is present.  This helps us to pick\t\\\n      the right multilib, and also makes the later specs easier\t\t\\\n@@ -46,7 +47,10 @@ along with GCC; see the file COPYING3.  If not see\n      The latter trumps the former.  */\t\t\t\t\t\\\n   \"%{mno-data-in-code: -mcode-readable=no}\",\t\t\t\t\\\n   \"%{!mcode-readable=no: %{mcode-xonly: -mcode-readable=pcrel}}\",\t\\\n-  \"%<mno-data-in-code %<mcode-xonly\"\n+  \"%<mno-data-in-code %<mcode-xonly\",\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+  /* Configuration-independent MIPS rules.  */\t\t\t\t\\\n+  BASE_DRIVER_SELF_SPECS\t\t\t\t\n \n /* Use trap rather than break for all but MIPS I ISA.  Force -no-mips16,\n    so that MIPS16 assembler code requires an explicit \".set mips16\"."}, {"sha": "b5b32c8ea2149948436ba757a0083a6736b84bc1", "filename": "gcc/config/mips/vr.h", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Fvr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f75ae868a2108e93c21500b9a2b1017b6ccf691/gcc%2Fconfig%2Fmips%2Fvr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fvr.h?ref=7f75ae868a2108e93c21500b9a2b1017b6ccf691", "patch": "@@ -20,12 +20,15 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n #define DEFAULT_VR_ARCH \"mfix-vr4130\"\n+#undef MIPS_ABI_DEFAULT\n #define MIPS_ABI_DEFAULT ABI_EABI\n+#undef MULTILIB_DEFAULTS\n #define MULTILIB_DEFAULTS \\\n \t{ MULTILIB_ENDIAN_DEFAULT,\t\t\\\n \t  MULTILIB_ABI_DEFAULT,\t\t\t\\\n \t  DEFAULT_VR_ARCH }\n \n+#undef DRIVER_SELF_SPECS\n #define DRIVER_SELF_SPECS \\\n \t/* Enforce the default architecture.  This is mostly for\t\\\n \t   the assembler's benefit.  */\t\t\t\t\t\\\n@@ -51,4 +54,7 @@ along with GCC; see the file COPYING3.  If not see\n \t\"%{mabi=eabi:%{!mlong*:%{!mgp32:-mlong64}}}\",\t\t\t\\\n \t\t\t\t\t\t\t\t\t\\\n \t/* Remove -mgp32 if it is redundant.  */\t\t\t\\\n-\t\"%{mabi=32:%<mgp32}\"\n+\t\"%{mabi=32:%<mgp32}\",\t\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\t\\\n+\t/* Configuration-independent MIPS rules.  */\t\t\t\\\n+\tBASE_DRIVER_SELF_SPECS"}]}