{"sha": "18f5df94df9a8abcbf9410c79c180de6f7b85f51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MThmNWRmOTRkZjlhOGFiY2JmOTQxMGM3OWMxODBkZTZmN2I4NWY1MQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2019-01-26T10:08:00Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-01-26T10:08:00Z"}, "message": "re PR preprocessor/88974 (ICE: Segmentation fault (in linemap_resolve_location))\n\n\tPR preprocessor/88974\n\t* directives.c (SEEN_EOL): Move macro to ...\n\t* internal.h (SEEN_EOL): ... here.\n\t* expr.c (parse_has_include): Don't cpp_get_token if SEEN_EOL ().\n\n\t* c-c++-common/cpp/pr88974.c: New test.\n\nFrom-SVN: r268285", "tree": {"sha": "9c09a82425d5c1d2c2859f73f4ca6281c4a446b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c09a82425d5c1d2c2859f73f4ca6281c4a446b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/18f5df94df9a8abcbf9410c79c180de6f7b85f51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18f5df94df9a8abcbf9410c79c180de6f7b85f51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18f5df94df9a8abcbf9410c79c180de6f7b85f51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18f5df94df9a8abcbf9410c79c180de6f7b85f51/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2f6a6b28ebec12d88256c90a34288f33cbfd607e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f6a6b28ebec12d88256c90a34288f33cbfd607e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f6a6b28ebec12d88256c90a34288f33cbfd607e"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "a1805f854421e3fc4fab251bfd2089b741d829bc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5df94df9a8abcbf9410c79c180de6f7b85f51/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5df94df9a8abcbf9410c79c180de6f7b85f51/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=18f5df94df9a8abcbf9410c79c180de6f7b85f51", "patch": "@@ -1,3 +1,8 @@\n+2019-01-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR preprocessor/88974\n+\t* c-c++-common/cpp/pr88974.c: New test.\n+\n 2019-01-25  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/88969"}, {"sha": "c375d83c75f1f4e2312785b5ad868fe35480d35a", "filename": "gcc/testsuite/c-c++-common/cpp/pr88974.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5df94df9a8abcbf9410c79c180de6f7b85f51/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcpp%2Fpr88974.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5df94df9a8abcbf9410c79c180de6f7b85f51/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcpp%2Fpr88974.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fcpp%2Fpr88974.c?ref=18f5df94df9a8abcbf9410c79c180de6f7b85f51", "patch": "@@ -0,0 +1,6 @@\n+/* PR preprocessor/88974 */\n+/* { dg-do preprocess } */\n+\n+#if __has_include (<pr88974.h)\n+/* { dg-error \"missing terminating > character\" \"\" { target *-*-* } .-1 } */\n+#endif"}, {"sha": "ae05d6be9a6bc8f807bb8274693a229f79c2a3b0", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=18f5df94df9a8abcbf9410c79c180de6f7b85f51", "patch": "@@ -1,3 +1,10 @@\n+2019-01-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR preprocessor/88974\n+\t* directives.c (SEEN_EOL): Move macro to ...\n+\t* internal.h (SEEN_EOL): ... here.\n+\t* expr.c (parse_has_include): Don't cpp_get_token if SEEN_EOL ().\n+\n 2019-01-01  Jakub Jelinek  <jakub@redhat.com>\n \n \tUpdate copyright years."}, {"sha": "1ada834da17482ebd75fd9ed57312b0e41cd24a7", "filename": "libcpp/directives.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2Fdirectives.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2Fdirectives.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fdirectives.c?ref=18f5df94df9a8abcbf9410c79c180de6f7b85f51", "patch": "@@ -204,8 +204,6 @@ static const directive linemarker_dir =\n   do_linemarker, UC\"#\", 1, KANDR, IN_I\n };\n \n-#define SEEN_EOL() (pfile->cur_token[-1].type == CPP_EOF)\n-\n /* Skip any remaining tokens in a directive.  */\n static void\n skip_rest_of_line (cpp_reader *pfile)"}, {"sha": "d8438a5bb75fd2620e40323c3a5ea4108c73cebb", "filename": "libcpp/expr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fexpr.c?ref=18f5df94df9a8abcbf9410c79c180de6f7b85f51", "patch": "@@ -2238,7 +2238,7 @@ parse_has_include (cpp_reader *pfile, enum include_type type)\n       XDELETEVEC (fname);\n     }\n \n-  if (paren && cpp_get_token (pfile)->type != CPP_CLOSE_PAREN)\n+  if (paren && !SEEN_EOL () && cpp_get_token (pfile)->type != CPP_CLOSE_PAREN)\n     cpp_error (pfile, CPP_DL_ERROR,\n \t       \"missing ')' after \\\"__has_include__\\\"\");\n "}, {"sha": "77a2a3becb31fd33829af36ba161493bf11412f2", "filename": "libcpp/internal.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2Finternal.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/18f5df94df9a8abcbf9410c79c180de6f7b85f51/libcpp%2Finternal.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Finternal.h?ref=18f5df94df9a8abcbf9410c79c180de6f7b85f51", "patch": "@@ -593,6 +593,8 @@ struct cpp_reader\n #define is_nvspace(x)\tIS_NVSPACE(x)\n #define is_space(x)\tIS_SPACE_OR_NUL(x)\n \n+#define SEEN_EOL() (pfile->cur_token[-1].type == CPP_EOF)\n+\n /* This table is constant if it can be initialized at compile time,\n    which is the case if cpp was compiled with GCC >=2.7, or another\n    compiler that supports C99.  */"}]}