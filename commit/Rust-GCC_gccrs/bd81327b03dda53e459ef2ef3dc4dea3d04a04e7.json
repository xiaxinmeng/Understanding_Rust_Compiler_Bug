{"sha": "bd81327b03dda53e459ef2ef3dc4dea3d04a04e7", "node_id": "C_kwDOANBUbNoAKGJkODEzMjdiMDNkZGE1M2U0NTllZjJlZjNkYzRkZWEzZDA0YTA0ZTc", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-03-22T21:29:56Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-03-23T10:03:03Z"}, "message": "libstdc++: Fix feature test macros in <version> for freestanding\n\nSome C++17 and C++20 feature test macros are only defined in <version>\nfor hosted builds, even though the features are supported for\nfreestanding.\n\nAll C++23 feature test macros are defined in <version> for freestanding,\nbut most of the features are only supported for hosted.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/std/version [!_GLIBCXX_HOSTED]\n\t(__cpp_lib_hardware_interference_size): Define for freestanding.\n\t(__cpp_lib_bit_cast): Likewise.\n\t(__cpp_lib_is_layout_compatible): Likewise.\n\t(__cpp_lib_is_pointer_interconvertible): Likewise.\n\t(__cpp_lib_adaptor_iterator_pair_constructor): Do not define for\n\tfreestanding.\n\t(__cpp_lib_invoke_r): Likewise.\n\t(__cpp_lib_ios_noreplace): Likewise.\n\t(__cpp_lib_monadic_optional): Likewise.\n\t(__cpp_lib_move_only_function): Likewise.\n\t(__cpp_lib_spanstream): Likewise.\n\t(__cpp_lib_stacktrace): Likewise.\n\t(__cpp_lib_string_contains): Likewise.\n\t(__cpp_lib_string_resize_and_overwrite): Likewise.\n\t(__cpp_lib_to_underlying): Likewise.", "tree": {"sha": "e1bb0d92d931ef2f461c30381e58911f66718673", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1bb0d92d931ef2f461c30381e58911f66718673"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd81327b03dda53e459ef2ef3dc4dea3d04a04e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd81327b03dda53e459ef2ef3dc4dea3d04a04e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd81327b03dda53e459ef2ef3dc4dea3d04a04e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd81327b03dda53e459ef2ef3dc4dea3d04a04e7/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5bf59b004808abf6acbfe5ef54a0f9216b8dce22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bf59b004808abf6acbfe5ef54a0f9216b8dce22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bf59b004808abf6acbfe5ef54a0f9216b8dce22"}], "stats": {"total": 35, "additions": 19, "deletions": 16}, "files": [{"sha": "535f095108ac99d52e3c36ada10aa913408d0279", "filename": "libstdc++-v3/include/std/version", "status": "modified", "additions": 19, "deletions": 16, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd81327b03dda53e459ef2ef3dc4dea3d04a04e7/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fversion", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd81327b03dda53e459ef2ef3dc4dea3d04a04e7/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fversion", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fversion?ref=bd81327b03dda53e459ef2ef3dc4dea3d04a04e7", "patch": "@@ -108,6 +108,9 @@\n #ifdef _GLIBCXX_HAVE_BUILTIN_HAS_UNIQ_OBJ_REP\n # define __cpp_lib_has_unique_object_representations 201606L\n #endif\n+#ifdef __GCC_DESTRUCTIVE_SIZE\n+# define __cpp_lib_hardware_interference_size 201703L\n+#endif\n #ifdef _GLIBCXX_HAVE_BUILTIN_IS_AGGREGATE\n # define __cpp_lib_is_aggregate 201703L\n #endif\n@@ -142,9 +145,6 @@\n #define __cpp_lib_filesystem 201703L\n #define __cpp_lib_gcd 201606L\n #define __cpp_lib_gcd_lcm 201606L\n-#ifdef __GCC_DESTRUCTIVE_SIZE\n-# define __cpp_lib_hardware_interference_size 201703L\n-#endif\n #define __cpp_lib_hypot 201603L\n #define __cpp_lib_invoke 201411L\n #define __cpp_lib_lcm 201606L\n@@ -188,6 +188,9 @@\n #define __cpp_lib_atomic_float 201711L\n #define __cpp_lib_atomic_ref 201806L\n #define __cpp_lib_atomic_value_initialization 201911L\n+#if __has_builtin(__builtin_bit_cast)\n+# define __cpp_lib_bit_cast 201806L\n+#endif\n #define __cpp_lib_bitops 201907L\n #define __cpp_lib_bounded_array_traits 201902L\n // __cpp_lib_char8_t is defined in <bits/c++config.h>\n@@ -202,7 +205,15 @@\n #ifdef _GLIBCXX_HAVE_IS_CONSTANT_EVALUATED\n # define __cpp_lib_is_constant_evaluated 201811L\n #endif\n+#if __has_builtin(__is_layout_compatible) \\\n+  && __has_builtin(__builtin_is_corresponding_member)\n+# define __cpp_lib_is_layout_compatible 201907L\n+#endif\n #define __cpp_lib_is_nothrow_convertible 201806L\n+#if __has_builtin(__is_pointer_interconvertible_base_of) \\\n+ && __has_builtin(__builtin_is_pointer_interconvertible_with_class)\n+# define __cpp_lib_is_pointer_interconvertible 201907L\n+#endif\n #define __cpp_lib_remove_cvref 201711L\n #if __has_builtin(__builtin_source_location)\n # define __cpp_lib_source_location 201907L\n@@ -224,9 +235,6 @@\n # endif\n #endif\n #define __cpp_lib_bind_front 201907L\n-#if __has_builtin(__builtin_bit_cast)\n-# define __cpp_lib_bit_cast 201806L\n-#endif\n // FIXME: #define __cpp_lib_execution 201902L\n #define __cpp_lib_integer_comparison_functions 202002L\n #define __cpp_lib_constexpr_algorithms 201806L\n@@ -255,14 +263,6 @@\n #ifdef _GLIBCXX_HAS_GTHREADS\n # define __cpp_lib_jthread 201911L\n #endif\n-#if __has_builtin(__is_layout_compatible) \\\n-  && __has_builtin(__builtin_is_corresponding_member)\n-# define __cpp_lib_is_layout_compatible 201907L\n-#endif\n-#if __has_builtin(__is_pointer_interconvertible_base_of) \\\n- && __has_builtin(__builtin_is_pointer_interconvertible_with_class)\n-# define __cpp_lib_is_pointer_interconvertible 201907L\n-#endif\n #if __cpp_lib_atomic_wait\n # define __cpp_lib_latch 201907L\n #endif\n@@ -300,12 +300,14 @@\n \n #if __cplusplus > 202002L\n // c++2b\n-#define __cpp_lib_adaptor_iterator_pair_constructor 202106L\n #define __cpp_lib_byteswap 202110L\n #define __cpp_lib_constexpr_typeinfo 202106L\n+#define __cpp_lib_is_scoped_enum 202011L\n+\n+#if _GLIBCXX_HOSTED\n+#define __cpp_lib_adaptor_iterator_pair_constructor 202106L\n #define __cpp_lib_invoke_r 202106L\n #define __cpp_lib_ios_noreplace 202200L\n-#define __cpp_lib_is_scoped_enum 202011L\n #if __cpp_lib_concepts\n # define __cpp_lib_monadic_optional 202110L\n #endif\n@@ -321,6 +323,7 @@\n # define __cpp_lib_string_resize_and_overwrite 202110L\n #endif\n #define __cpp_lib_to_underlying 202102L\n+#endif\n #endif // C++2b\n #endif // C++20\n #endif // C++17"}]}