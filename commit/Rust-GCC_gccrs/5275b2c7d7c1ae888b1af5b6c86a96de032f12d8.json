{"sha": "5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTI3NWIyYzdkN2MxYWU4ODhiMWFmNWI2Yzg2YTk2ZGUwMzJmMTJkOA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2013-03-17T02:35:01Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2013-03-17T02:35:01Z"}, "message": "re PR c++/55017 ([DR 1051] [C++11] Rvalue-reference member should cause copy constructor to be deleted, but still declared)\n\n\tPR c++/55017\n\t* method.c (walk_field_subobs): Disallow copy of rvalue ref.\n\nFrom-SVN: r196728", "tree": {"sha": "a4da442b8834b4db3354eea10a7a13417cf5982d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4da442b8834b4db3354eea10a7a13417cf5982d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cdf47df08aba23c5b40fa3e4b8d7f4c9cc2c882e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdf47df08aba23c5b40fa3e4b8d7f4c9cc2c882e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cdf47df08aba23c5b40fa3e4b8d7f4c9cc2c882e"}], "stats": {"total": 34, "additions": 33, "deletions": 1}, "files": [{"sha": "28b110c68a4562bd5603afb015c9bf0771e6e590", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "patch": "@@ -1,5 +1,8 @@\n 2013-03-16  Jason Merrill  <jason@redhat.com>\n \n+\tPR c++/55017\n+\t* method.c (walk_field_subobs): Disallow copy of rvalue ref.\n+\n \tPR c++/55240\n \t* parser.c (parsing_nsdmi): New.\n \t* semantics.c (outer_automatic_var_p): Check it."}, {"sha": "55c7e50d30894d72c97282cfc91682a8111af6c6", "filename": "gcc/cp/method.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "patch": "@@ -1115,6 +1115,19 @@ walk_field_subobs (tree fields, tree fnname, special_function_kind sfk,\n \t\t\t\"initialize %q+#D\", field);\n \t    }\n \t}\n+      else if (sfk == sfk_copy_constructor)\n+\t{\n+\t  /* 12.8p11b5 */\n+\t  if (TREE_CODE (mem_type) == REFERENCE_TYPE\n+\t      && TYPE_REF_IS_RVALUE (mem_type))\n+\t    {\n+\t      if (diag)\n+\t\terror (\"copying non-static data member %q#D of rvalue \"\n+\t\t       \"reference type\", field);\n+\t      if (deleted_p)\n+\t\t*deleted_p = true;\n+\t    }\n+\t}\n \n       if (!CLASS_TYPE_P (mem_type))\n \tcontinue;"}, {"sha": "70d3d7192227dfee5fe1a0232c099b618a726811", "filename": "gcc/testsuite/g++.dg/cpp0x/rv-copy1.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Frv-copy1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Frv-copy1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Frv-copy1.C?ref=5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/55017\n+// { dg-do compile { target c++11 } }\n+\n+struct S {\t\t\t// { dg-error \"rvalue ref\" }\n+  int&& rr;\n+  S(int&& rr) : rr(static_cast<int&&>(rr)) {}\n+};\n+\n+S s1(13);\n+S s2 = s1;\t\t\t// { dg-error \"deleted\" }"}, {"sha": "6de5bbbd2e6f0ce0175bf02240abb8d294101579", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "patch": "@@ -1,3 +1,8 @@\n+2013-03-16  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/55017\n+\t* testsuite/20_util/pair/piecewise2.cc (test01): Use std::move.\n+\n 2013-03-16  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \tPR libstdc++/56468"}, {"sha": "0273c14ad56dd2708e47971b4a70ffec9546308a", "filename": "libstdc++-v3/testsuite/20_util/pair/piecewise2.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2Fpiecewise2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5275b2c7d7c1ae888b1af5b6c86a96de032f12d8/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2Fpiecewise2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fpair%2Fpiecewise2.cc?ref=5275b2c7d7c1ae888b1af5b6c86a96de032f12d8", "patch": "@@ -51,7 +51,8 @@ struct Default\n void test01(std::tuple<NoCon&, NoCon&&> t1,\n             std::tuple<NoCon&, NoCon&&, NoCon&> t2)\n {\n-  std::pair<RefCheck1, RefCheck2>(std::piecewise_construct, t1, t2);\n+  std::pair<RefCheck1, RefCheck2>(std::piecewise_construct,\n+\t\t\t\t  std::move(t1), std::move(t2));\n }\n \n void test02(std::tuple<> t1, std::tuple<int> t2)"}]}