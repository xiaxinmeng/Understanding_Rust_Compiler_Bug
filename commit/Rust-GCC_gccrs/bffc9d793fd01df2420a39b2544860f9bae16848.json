{"sha": "bffc9d793fd01df2420a39b2544860f9bae16848", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZmYzlkNzkzZmQwMWRmMjQyMGEzOWIyNTQ0ODYwZjliYWUxNjg0OA==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2008-06-06T19:11:26Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2008-06-06T19:11:26Z"}, "message": "configure.ac: Do not check for gconv.h.\n\n\t* configure.ac: Do not check for gconv.h.\n\t* crossconfig.m4 (GLIBCXX_CROSSCONFIG): Do not test for gconv.h or\n\tgconf.h.  For glibc and uClibc systems, define\n\t_GLIBCXX_USE_RANDOM_TR1 and HAVE_MMAP and use AC_LC_MESSAGES and\n\tAM_ICONV.\n\t* configure, config.h.in: Regenerate.\n\nFrom-SVN: r136494", "tree": {"sha": "16521bbe945f4368aaa62b35c00f9cbb1b922d6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16521bbe945f4368aaa62b35c00f9cbb1b922d6f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bffc9d793fd01df2420a39b2544860f9bae16848", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bffc9d793fd01df2420a39b2544860f9bae16848", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bffc9d793fd01df2420a39b2544860f9bae16848", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bffc9d793fd01df2420a39b2544860f9bae16848/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41870ac553f4ea9df38ada05abf8aecb23c330f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41870ac553f4ea9df38ada05abf8aecb23c330f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41870ac553f4ea9df38ada05abf8aecb23c330f8"}], "stats": {"total": 516, "additions": 501, "deletions": 15}, "files": [{"sha": "81e6d74e2ccf93d14988b849be213e6ee804a858", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=bffc9d793fd01df2420a39b2544860f9bae16848", "patch": "@@ -1,3 +1,12 @@\n+2008-06-06  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* configure.ac: Do not check for gconv.h.\n+\t* crossconfig.m4 (GLIBCXX_CROSSCONFIG): Do not test for gconv.h or\n+\tgconf.h.  For glibc and uClibc systems, define\n+\t_GLIBCXX_USE_RANDOM_TR1 and HAVE_MMAP and use AC_LC_MESSAGES and\n+\tAM_ICONV.\n+\t* configure, config.h.in: Regenerate.\n+\n 2008-06-06  Joseph Myers  <joseph@codesourcery.com>\n \n \t* testsuite/17_intro/headers/all.cc,"}, {"sha": "d107f481be7c53e6d095c02e58bea987ab77abb4", "filename": "libstdc++-v3/config.h.in", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig.h.in?ref=bffc9d793fd01df2420a39b2544860f9bae16848", "patch": "@@ -156,12 +156,6 @@\n /* Define to 1 if you have the `frexpl' function. */\n #undef HAVE_FREXPL\n \n-/* Define to 1 if you have the <gconf.h> header file. */\n-#undef HAVE_GCONF_H\n-\n-/* Define to 1 if you have the <gconv.h> header file. */\n-#undef HAVE_GCONV_H\n-\n /* Define if _Unwind_GetIPInfo is available. */\n #undef HAVE_GETIPINFO\n "}, {"sha": "4546c617ed13485b53c0cebe4c219e61251415b2", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 480, "deletions": 6, "changes": 486, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=bffc9d793fd01df2420a39b2544860f9bae16848", "patch": "@@ -18251,9 +18251,8 @@ if $GLIBCXX_IS_NATIVE; then\n \n \n \n-\n for ac_header in nan.h ieeefp.h endian.h sys/isa_defs.h machine/endian.h \\\n-  machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h gconv.h \\\n+  machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h \\\n   sys/types.h sys/ipc.h sys/sem.h\n do\n as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n@@ -64015,9 +64014,8 @@ _ACEOF\n \n \n \n-\n for ac_header in nan.h ieeefp.h endian.h sys/isa_defs.h machine/endian.h \\\n-    machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h gconv.h \\\n+    machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h \\\n     sys/types.h\n do\n as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n@@ -87441,11 +87439,10 @@ _ACEOF\n \n \n \n-\n for ac_header in nan.h ieeefp.h endian.h sys/isa_defs.h \\\n       machine/endian.h machine/param.h sys/machine.h sys/types.h \\\n       fp.h float.h endian.h inttypes.h locale.h float.h stdint.h \\\n-      sys/ipc.h sys/sem.h gconf.h\n+      sys/ipc.h sys/sem.h\n do\n as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n@@ -109974,6 +109971,223 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n \n+    cat >>confdefs.h <<\\_ACEOF\n+#define _GLIBCXX_USE_RANDOM_TR1 1\n+_ACEOF\n+\n+\n+\n+  if test \"${ac_cv_header_locale_h+set}\" = set; then\n+  echo \"$as_me:$LINENO: checking for locale.h\" >&5\n+echo $ECHO_N \"checking for locale.h... $ECHO_C\" >&6\n+if test \"${ac_cv_header_locale_h+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_header_locale_h\" >&5\n+echo \"${ECHO_T}$ac_cv_header_locale_h\" >&6\n+else\n+  # Is the header compilable?\n+echo \"$as_me:$LINENO: checking locale.h usability\" >&5\n+echo $ECHO_N \"checking locale.h usability... $ECHO_C\" >&6\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+$ac_includes_default\n+#include <locale.h>\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_header_compiler=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_header_compiler=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n+echo \"${ECHO_T}$ac_header_compiler\" >&6\n+\n+# Is the header present?\n+echo \"$as_me:$LINENO: checking locale.h presence\" >&5\n+echo $ECHO_N \"checking locale.h presence... $ECHO_C\" >&6\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <locale.h>\n+_ACEOF\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_cpp conftest.$ac_ext\\\"\") >&5\n+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } >/dev/null; then\n+  if test -s conftest.err; then\n+    ac_cpp_err=$ac_c_preproc_warn_flag\n+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag\n+  else\n+    ac_cpp_err=\n+  fi\n+else\n+  ac_cpp_err=yes\n+fi\n+if test -z \"$ac_cpp_err\"; then\n+  ac_header_preproc=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+  ac_header_preproc=no\n+fi\n+rm -f conftest.err conftest.$ac_ext\n+echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n+echo \"${ECHO_T}$ac_header_preproc\" >&6\n+\n+# So?  What about this header?\n+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in\n+  yes:no: )\n+    { echo \"$as_me:$LINENO: WARNING: locale.h: accepted by the compiler, rejected by the preprocessor!\" >&5\n+echo \"$as_me: WARNING: locale.h: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: locale.h: proceeding with the compiler's result\" >&5\n+echo \"$as_me: WARNING: locale.h: proceeding with the compiler's result\" >&2;}\n+    ac_header_preproc=yes\n+    ;;\n+  no:yes:* )\n+    { echo \"$as_me:$LINENO: WARNING: locale.h: present but cannot be compiled\" >&5\n+echo \"$as_me: WARNING: locale.h: present but cannot be compiled\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: locale.h:     check for missing prerequisite headers?\" >&5\n+echo \"$as_me: WARNING: locale.h:     check for missing prerequisite headers?\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: locale.h: see the Autoconf documentation\" >&5\n+echo \"$as_me: WARNING: locale.h: see the Autoconf documentation\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: locale.h:     section \\\"Present But Cannot Be Compiled\\\"\" >&5\n+echo \"$as_me: WARNING: locale.h:     section \\\"Present But Cannot Be Compiled\\\"\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: locale.h: proceeding with the preprocessor's result\" >&5\n+echo \"$as_me: WARNING: locale.h: proceeding with the preprocessor's result\" >&2;}\n+    { echo \"$as_me:$LINENO: WARNING: locale.h: in the future, the compiler will take precedence\" >&5\n+echo \"$as_me: WARNING: locale.h: in the future, the compiler will take precedence\" >&2;}\n+    (\n+      cat <<\\_ASBOX\n+## ----------------------------------------- ##\n+## Report this to the package-unused lists.  ##\n+## ----------------------------------------- ##\n+_ASBOX\n+    ) |\n+      sed \"s/^/$as_me: WARNING:     /\" >&2\n+    ;;\n+esac\n+echo \"$as_me:$LINENO: checking for locale.h\" >&5\n+echo $ECHO_N \"checking for locale.h... $ECHO_C\" >&6\n+if test \"${ac_cv_header_locale_h+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  ac_cv_header_locale_h=$ac_header_preproc\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_header_locale_h\" >&5\n+echo \"${ECHO_T}$ac_cv_header_locale_h\" >&6\n+\n+fi\n+if test $ac_cv_header_locale_h = yes; then\n+\n+    echo \"$as_me:$LINENO: checking for LC_MESSAGES\" >&5\n+echo $ECHO_N \"checking for LC_MESSAGES... $ECHO_C\" >&6\n+if test \"${ac_cv_val_LC_MESSAGES+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  if test x$gcc_no_link = xyes; then\n+  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n+echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <locale.h>\n+int\n+main ()\n+{\n+return LC_MESSAGES\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_val_LC_MESSAGES=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_val_LC_MESSAGES=no\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_val_LC_MESSAGES\" >&5\n+echo \"${ECHO_T}$ac_cv_val_LC_MESSAGES\" >&6\n+    if test $ac_cv_val_LC_MESSAGES = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_LC_MESSAGES 1\n+_ACEOF\n+\n+    fi\n+\n+fi\n+\n+\n+\n+\n     # Check for sigsetjmp\n     cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n@@ -110026,6 +110240,266 @@ sed 's/^/| /' conftest.$ac_ext >&5\n \n fi\n rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+    cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_MMAP 1\n+_ACEOF\n+\n+\n+    # For iconv support.\n+\n+\n+\n+\n+\n+          am_save_CPPFLAGS=\"$CPPFLAGS\"\n+\n+  for element in $INCICONV; do\n+    haveit=\n+    for x in $CPPFLAGS; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+      if test \"X$x\" = \"X$element\"; then\n+        haveit=yes\n+        break\n+      fi\n+    done\n+    if test -z \"$haveit\"; then\n+      CPPFLAGS=\"${CPPFLAGS}${CPPFLAGS:+ }$element\"\n+    fi\n+  done\n+\n+\n+  echo \"$as_me:$LINENO: checking for iconv\" >&5\n+echo $ECHO_N \"checking for iconv... $ECHO_C\" >&6\n+if test \"${am_cv_func_iconv+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+\n+    am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n+    am_cv_lib_iconv=no\n+    if test x$gcc_no_link = xyes; then\n+  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n+echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+#include <iconv.h>\n+int\n+main ()\n+{\n+iconv_t cd = iconv_open(\"\",\"\");\n+       iconv(cd,NULL,NULL,NULL,NULL);\n+       iconv_close(cd);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  am_cv_func_iconv=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+    if test \"$am_cv_func_iconv\" != yes; then\n+      am_save_LIBS=\"$LIBS\"\n+      LIBS=\"$LIBS $LIBICONV\"\n+      if test x$gcc_no_link = xyes; then\n+  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n+echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n+   { (exit 1); exit 1; }; }\n+fi\n+cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+#include <iconv.h>\n+int\n+main ()\n+{\n+iconv_t cd = iconv_open(\"\",\"\");\n+         iconv(cd,NULL,NULL,NULL,NULL);\n+         iconv_close(cd);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext conftest$ac_exeext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n+  (eval $ac_link) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest$ac_exeext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  am_cv_lib_iconv=yes\n+        am_cv_func_iconv=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+fi\n+rm -f conftest.err conftest.$ac_objext \\\n+      conftest$ac_exeext conftest.$ac_ext\n+      LIBS=\"$am_save_LIBS\"\n+    fi\n+\n+fi\n+echo \"$as_me:$LINENO: result: $am_cv_func_iconv\" >&5\n+echo \"${ECHO_T}$am_cv_func_iconv\" >&6\n+  if test \"$am_cv_func_iconv\" = yes; then\n+\n+cat >>confdefs.h <<\\_ACEOF\n+#define HAVE_ICONV 1\n+_ACEOF\n+\n+  fi\n+  if test \"$am_cv_lib_iconv\" = yes; then\n+    echo \"$as_me:$LINENO: checking how to link with libiconv\" >&5\n+echo $ECHO_N \"checking how to link with libiconv... $ECHO_C\" >&6\n+    echo \"$as_me:$LINENO: result: $LIBICONV\" >&5\n+echo \"${ECHO_T}$LIBICONV\" >&6\n+  else\n+            CPPFLAGS=\"$am_save_CPPFLAGS\"\n+    LIBICONV=\n+    LTLIBICONV=\n+  fi\n+\n+\n+\n+  if test \"$am_cv_func_iconv\" = yes; then\n+    echo \"$as_me:$LINENO: checking for iconv declaration\" >&5\n+echo $ECHO_N \"checking for iconv declaration... $ECHO_C\" >&6\n+    if test \"${am_cv_proto_iconv+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+\n+      cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+#include <stdlib.h>\n+#include <iconv.h>\n+extern\n+#ifdef __cplusplus\n+\"C\"\n+#endif\n+#if defined(__STDC__) || defined(__cplusplus)\n+size_t iconv (iconv_t cd, char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);\n+#else\n+size_t iconv();\n+#endif\n+\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\n+\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  am_cv_proto_iconv_arg1=\"\"\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+am_cv_proto_iconv_arg1=\"const\"\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+      am_cv_proto_iconv=\"extern size_t iconv (iconv_t cd, $am_cv_proto_iconv_arg1 char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);\"\n+fi\n+\n+    am_cv_proto_iconv=`echo \"$am_cv_proto_iconv\" | tr -s ' ' | sed -e 's/( /(/'`\n+    echo \"$as_me:$LINENO: result: ${ac_t:-\n+         }$am_cv_proto_iconv\" >&5\n+echo \"${ECHO_T}${ac_t:-\n+         }$am_cv_proto_iconv\" >&6\n+\n+cat >>confdefs.h <<_ACEOF\n+#define ICONV_CONST $am_cv_proto_iconv_arg1\n+_ACEOF\n+\n+  fi\n+\n     ;;\n   *-mingw32*)\n "}, {"sha": "19501aac1bec3c9d1726709dce9db86b75d1e2e1", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=bffc9d793fd01df2420a39b2544860f9bae16848", "patch": "@@ -131,7 +131,7 @@ if $GLIBCXX_IS_NATIVE; then\n \n   # Check for available headers.\n   AC_CHECK_HEADERS([nan.h ieeefp.h endian.h sys/isa_defs.h machine/endian.h \\\n-  machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h gconv.h \\\n+  machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h \\\n   sys/types.h sys/ipc.h sys/sem.h])\n \n   GLIBCXX_CHECK_LINKER_FEATURES"}, {"sha": "d40f30f8c7b6b35fb2b3839f41fe57ea83b38bed", "filename": "libstdc++-v3/crossconfig.m4", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fcrossconfig.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bffc9d793fd01df2420a39b2544860f9bae16848/libstdc%2B%2B-v3%2Fcrossconfig.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fcrossconfig.m4?ref=bffc9d793fd01df2420a39b2544860f9bae16848", "patch": "@@ -46,7 +46,7 @@ case \"${host}\" in\n     # so we just check for all the features here.\n     # Check for available headers.\n     AC_CHECK_HEADERS([nan.h ieeefp.h endian.h sys/isa_defs.h machine/endian.h \\\n-    machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h gconv.h \\\n+    machine/param.h sys/machine.h fp.h locale.h float.h inttypes.h \\\n     sys/types.h])\n \n     # Don't call GLIBCXX_CHECK_LINKER_FEATURES, Darwin doesn't have a GNU ld\n@@ -197,7 +197,7 @@ case \"${host}\" in\n     AC_CHECK_HEADERS([nan.h ieeefp.h endian.h sys/isa_defs.h \\\n       machine/endian.h machine/param.h sys/machine.h sys/types.h \\\n       fp.h float.h endian.h inttypes.h locale.h float.h stdint.h \\\n-      sys/ipc.h sys/sem.h gconf.h])\n+      sys/ipc.h sys/sem.h])\n     SECTION_FLAGS='-ffunction-sections -fdata-sections'\n     AC_SUBST(SECTION_FLAGS)\n     GLIBCXX_CHECK_COMPILER_FEATURES\n@@ -223,6 +223,10 @@ case \"${host}\" in\n     # For C99 support to TR1.\n     GLIBCXX_CHECK_C99_TR1\n \n+    AC_DEFINE(_GLIBCXX_USE_RANDOM_TR1)\n+\n+    AC_LC_MESSAGES\n+\n     # Check for sigsetjmp\n     AC_TRY_COMPILE(\n       [#include <setjmp.h>],\n@@ -231,6 +235,11 @@ case \"${host}\" in\n          siglongjmp (env, 1);\n       ],\n       [AC_DEFINE(HAVE_SIGSETJMP, 1, [Define if sigsetjmp is available.])])\n+\n+    AC_DEFINE(HAVE_MMAP) \n+\n+    # For iconv support.\n+    AM_ICONV\n     ;;\n   *-mingw32*)\n     AC_CHECK_HEADERS([sys/types.h locale.h float.h])"}]}