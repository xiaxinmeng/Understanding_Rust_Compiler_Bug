{"sha": "73a9216b8a47889234c94e3aaec193391ee6604d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzNhOTIxNmI4YTQ3ODg5MjM0Yzk0ZTNhYWVjMTkzMzkxZWU2NjA0ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-03-06T15:22:27Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-03-06T15:22:27Z"}, "message": "libgcov: Fix build on Darwin [PR99406]\n\nAs reported, bootstrap currently fails on older Darwin because MAP_ANONYMOUS\nis not defined.\n\nThe following is what gcc/system.h does, so I think it should work for\nlibgcov.\n\n2021-03-06  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR gcov-profile/99406\n\t* libgcov.h (MAP_FAILED, MAP_ANONYMOUS): If HAVE_SYS_MMAN_H is\n\tdefined, define these macros if not defined already.", "tree": {"sha": "f6e8adbde15e21a0e99e723edc13a787335798a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f6e8adbde15e21a0e99e723edc13a787335798a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/73a9216b8a47889234c94e3aaec193391ee6604d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73a9216b8a47889234c94e3aaec193391ee6604d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73a9216b8a47889234c94e3aaec193391ee6604d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73a9216b8a47889234c94e3aaec193391ee6604d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "84185598dc7470bad4e7f8c22b64e3c944efb670", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84185598dc7470bad4e7f8c22b64e3c944efb670", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84185598dc7470bad4e7f8c22b64e3c944efb670"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "7b0d367ec52693dec4ea2a798635b3e32fa8f300", "filename": "libgcc/libgcov.h", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/73a9216b8a47889234c94e3aaec193391ee6604d/libgcc%2Flibgcov.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/73a9216b8a47889234c94e3aaec193391ee6604d/libgcc%2Flibgcov.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov.h?ref=73a9216b8a47889234c94e3aaec193391ee6604d", "patch": "@@ -172,6 +172,16 @@ extern struct gcov_info *gcov_list;\n #define ATTRIBUTE_HIDDEN\n #endif\n \n+#if HAVE_SYS_MMAN_H\n+#ifndef MAP_FAILED\n+#define MAP_FAILED ((void *)-1)\n+#endif\n+\n+#if !defined (MAP_ANONYMOUS) && defined (MAP_ANON)\n+#define MAP_ANONYMOUS MAP_ANON\n+#endif\n+#endif\n+\n #include \"gcov-io.h\"\n \n /* Structures embedded in coveraged program.  The structures generated"}]}