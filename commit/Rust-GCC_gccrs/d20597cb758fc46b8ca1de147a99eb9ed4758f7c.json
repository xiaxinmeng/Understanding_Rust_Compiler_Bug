{"sha": "d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDIwNTk3Y2I3NThmYzQ2YjhjYTFkZTE0N2E5OWViOWVkNDc1OGY3Yw==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2012-02-05T20:14:00Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2012-02-05T20:14:00Z"}, "message": "re PR fortran/48847 (Wrong \"unused parameter\" warning with interface block)\n\n2012-02-05  Thomas K\u00f6nig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/48847\n\t* trans-decl.c:  Warn about unused dummy procedure arguments\n\tif -Wunused-dummy-argument is specified.  Suppress middle-end\n\twarnings about procedure arguments.\n\n2012-02-05  Thomas K\u00f6nig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/48847\n\t* gfortran.dg/warn_unused_dummy_argument_3.f90:  New test.\n\nFrom-SVN: r183916", "tree": {"sha": "a0528138fc85155466228dfccaa174157581b083", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0528138fc85155466228dfccaa174157581b083"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/comments", "author": null, "committer": null, "parents": [{"sha": "83f42cad22eb85b74dff0592029b39870795c381", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83f42cad22eb85b74dff0592029b39870795c381", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83f42cad22eb85b74dff0592029b39870795c381"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "4cde6e2beae63b2fd6190ba7a5d175af39cefbd4", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "patch": "@@ -1,3 +1,10 @@\n+2012-02-05  Thomas K\u00f6nig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/48847\n+\t* trans-decl.c:  Warn about unused dummy procedure arguments\n+\tif -Wunused-dummy-argument is specified.  Suppress middle-end\n+\twarnings about procedure arguments.\n+\n 2012-02-05  Paul Thomas  <pault@gcc.gnu.org>\n \n \t* trans-array.c (gfc_array_allocate): Zero memory for all class"}, {"sha": "e497fd6ede3a368f65746bd4ea9ebe6d56cf494a", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "patch": "@@ -4683,6 +4683,22 @@ generate_local_decl (gfc_symbol * sym)\n \t  && sym->ts.type == BT_CHARACTER && sym->ts.is_c_interop\n \t  && sym->ns->proc_name != NULL && sym->ns->proc_name->attr.is_bind_c)\n \tgfc_conv_scalar_char_value (sym, NULL, NULL);\n+\n+      /* Unused procedure passed as dummy argument.  */\n+      if (sym->attr.flavor == FL_PROCEDURE)\n+\t{\n+\t  if (!sym->attr.referenced)\n+\t    {\n+\t      if (gfc_option.warn_unused_dummy_argument)\n+\t\tgfc_warning (\"Unused dummy argument '%s' at %L\", sym->name,\n+\t\t\t     &sym->declared_at);\t     \n+\t    }\n+\n+\t  /* Silence bogus \"unused parameter\" warnings from the\n+\t     middle end.  */\n+\t  if (sym->backend_decl != NULL_TREE)\n+\t\tTREE_NO_WARNING (sym->backend_decl) = 1;\n+\t}\n     }\n \n   /* Make sure we convert the types of the derived types from iso_c_binding"}, {"sha": "306ad5c3c205b48985a293d3fbdf126760363911", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "patch": "@@ -1,3 +1,8 @@\n+2012-02-05  Thomas K\u00f6nig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/48847\n+\t* gfortran.dg/warn_unused_dummy_argument_3.f90:  New test.\n+\n 2012-02-05  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/52102"}, {"sha": "f15026e9a2a55399aed85efa144296e162c4d633", "filename": "gcc/testsuite/gfortran.dg/warn_unused_dummy_argument_3.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_unused_dummy_argument_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d20597cb758fc46b8ca1de147a99eb9ed4758f7c/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_unused_dummy_argument_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_unused_dummy_argument_3.f90?ref=d20597cb758fc46b8ca1de147a99eb9ed4758f7c", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do compile }\n+! { dg-options \"-Wunused-dummy-argument -Wunused-parameter\" }\n+! PR 48847 - we used to generate a warning for g(), and none for h()\n+program main\n+contains\n+  function f(g,h)\n+    interface\n+       real function g()\n+       end function g\n+    end interface\n+    interface\n+       real function h()  !  { dg-warning \"Unused dummy argument\" }\n+       end function h\n+    end interface\n+    real :: f\n+    f = g()\n+  end function f\n+end program main"}]}