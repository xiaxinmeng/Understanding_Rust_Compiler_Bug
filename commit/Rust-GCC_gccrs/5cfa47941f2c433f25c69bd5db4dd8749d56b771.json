{"sha": "5cfa47941f2c433f25c69bd5db4dd8749d56b771", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNmYTQ3OTQxZjJjNDMzZjI1YzY5YmQ1ZGI0ZGQ4NzQ5ZDU2Yjc3MQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-01-05T16:13:46Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-01-05T16:13:46Z"}, "message": "9507.cc: Remove child process.\n\n\t* testsuite/27_io/basic_filebuf/open/char/9507.cc: Remove child\n\tprocess.\n\nFrom-SVN: r92953", "tree": {"sha": "d00ed8aa05f3ba2d08de140dae0259b566de1c77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d00ed8aa05f3ba2d08de140dae0259b566de1c77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5cfa47941f2c433f25c69bd5db4dd8749d56b771", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cfa47941f2c433f25c69bd5db4dd8749d56b771", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cfa47941f2c433f25c69bd5db4dd8749d56b771", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cfa47941f2c433f25c69bd5db4dd8749d56b771/comments", "author": null, "committer": null, "parents": [{"sha": "9143de5c0185332e852f3d3167a7d6c8ae0b2514", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9143de5c0185332e852f3d3167a7d6c8ae0b2514", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9143de5c0185332e852f3d3167a7d6c8ae0b2514"}], "stats": {"total": 25, "additions": 11, "deletions": 14}, "files": [{"sha": "521f8fba981ae4668694be7d19f00ce11ba7a0d2", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cfa47941f2c433f25c69bd5db4dd8749d56b771/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cfa47941f2c433f25c69bd5db4dd8749d56b771/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5cfa47941f2c433f25c69bd5db4dd8749d56b771", "patch": "@@ -1,3 +1,8 @@\n+2005-01-05  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* testsuite/27_io/basic_filebuf/open/char/9507.cc: Remove child\n+\tprocess.\n+\t\n 2005-01-05  Paolo Carlini  <pcarlini@suse.de>\n \n \t* src/istream.cc (basic_istream<char>::ignore(streamsize),"}, {"sha": "eacf8fa43de71244ee724ae705bc118fb2af183e", "filename": "libstdc++-v3/testsuite/27_io/basic_filebuf/open/char/9507.cc", "status": "modified", "additions": 6, "deletions": 14, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5cfa47941f2c433f25c69bd5db4dd8749d56b771/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fopen%2Fchar%2F9507.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5cfa47941f2c433f25c69bd5db4dd8749d56b771/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fopen%2Fchar%2F9507.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_filebuf%2Fopen%2Fchar%2F9507.cc?ref=5cfa47941f2c433f25c69bd5db4dd8749d56b771", "patch": "@@ -37,33 +37,25 @@ void test_06()\n   using namespace __gnu_test;\n   bool test __attribute__((unused)) = true;\n   const char* name = \"tmp_fifo2\";\n-  semaphore s1, s2;\n \n   signal(SIGPIPE, SIG_IGN);\n \n   unlink(name);\n   try_mkfifo(name, S_IRWXU);\n   \n-  if (!fork())\n-    {\n-      std::filebuf fbuf;\n-      fbuf.open(name, std::ios_base::in);\n-      fbuf.sgetc();\n-      s1.signal ();\n-      fbuf.close();\n-      s2.wait ();\n-      exit(0);\n-    }\n-\n   std::filebuf fbuf;\n+  // The use of ios_base::ate implies an attempt to seek on the file\n+  // descriptor.  The seek will fail.  Thus, at the OS level, this\n+  // call to \"fbuf.open\" will result in a call to \"open\" (which will\n+  // succeed), a call to \"lseek\" (which will fail), and, finally, a\n+  // call to \"close\" (which will succeed).  Thus, after this call, the\n+  // file should be closed.\n   std::filebuf* r = fbuf.open(name,\n \t\t\t      std::ios_base::in \n \t\t\t      | std::ios_base::out\n \t\t\t      | std::ios_base::ate);\n-  s1.wait ();\n   VERIFY( !fbuf.is_open() );\n   VERIFY( r == NULL );\n-  s2.signal ();\n }\n \n int"}]}