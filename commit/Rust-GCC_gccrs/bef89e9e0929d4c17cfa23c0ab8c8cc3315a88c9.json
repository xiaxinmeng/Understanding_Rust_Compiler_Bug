{"sha": "bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmVmODllOWUwOTI5ZDRjMTdjZmEyM2MwYWI4YzhjYzMzMTVhODhjOQ==", "commit": {"author": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@users.sourceforge.net", "date": "2003-07-22T14:36:00Z"}, "committer": {"name": "Kriang Lerdsuwanakij", "email": "lerdsuwa@gcc.gnu.org", "date": "2003-07-22T14:36:00Z"}, "message": "re PR c++/10793 (ICE (treecheck) when partial-specializing with an invalid type and a base class, in xref_basetypes, at cp/decl.c:12834)\n\n\tPR c++/10793\n\t* decl.c (xref_basetypes): Handle error_mark_node.\n\n\t* g++.dg/template/crash9.C: New test.\n\nFrom-SVN: r69671", "tree": {"sha": "fb7aa2c09256858ae8da46b8501e04dbc73b22be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb7aa2c09256858ae8da46b8501e04dbc73b22be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/comments", "author": null, "committer": null, "parents": [{"sha": "4bd5635487c4a0623c2ea4f825611edcc528a360", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bd5635487c4a0623c2ea4f825611edcc528a360", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bd5635487c4a0623c2ea4f825611edcc528a360"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "79565c65bec8327890f81dd10589371818b4afb8", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "patch": "@@ -1,3 +1,8 @@\n+2003-07-22  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/10793\n+\t* decl.c (xref_basetypes): Handle error_mark_node.\n+\n 2003-07-22  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* cp-tree.h (enum cp_lvalue_kind): Add clk_packed."}, {"sha": "9e90d9e904549bbbbfd10b23aa6a1c595f71ed34", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "patch": "@@ -12831,6 +12831,9 @@ xref_basetypes (tree ref, tree base_list)\n   int i;\n   enum tag_types tag_code;\n \n+  if (ref == error_mark_node)\n+    return;\n+\n   if (TREE_CODE (ref) == UNION_TYPE)\n     {\n       error (\"derived union `%T' invalid\", ref);"}, {"sha": "eddfa73d3b49cfe026d6686cd14a903f975ba9d7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "patch": "@@ -1,3 +1,8 @@\n+2003-07-22  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>\n+\n+\tPR c++/10793\n+\t* g++.dg/template/crash9.C: New test.\n+\n 2003-07-22  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c++/3004"}, {"sha": "44ce57b1316c9652062c8cc1956866cc818e160f", "filename": "gcc/testsuite/g++.dg/parse/crash9.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash9.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash9.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash9.C?ref=bef89e9e0929d4c17cfa23c0ab8c8cc3315a88c9", "patch": "@@ -0,0 +1,9 @@\n+// { dg-do compile }\n+\n+// Origin: Volker Reichelt <reichelt@gcc.gnu.org>\n+\n+// PR c++/10793: ICE in handling base class when the current class\n+// contains error.\n+\n+template <typename> struct A {};\n+template <typename> struct A<INVALID> : A<int> { }; // { dg-error \"not declared|invalid\" }"}]}