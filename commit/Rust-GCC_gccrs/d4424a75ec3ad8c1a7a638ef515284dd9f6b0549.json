{"sha": "d4424a75ec3ad8c1a7a638ef515284dd9f6b0549", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ0MjRhNzVlYzNhZDhjMWE3YTYzOGVmNTE1Mjg0ZGQ5ZjZiMDU0OQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-08-24T22:28:40Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-08-24T22:28:40Z"}, "message": "(default_conversion): Don't substitute constant value if array since\nwill return address.\n\nFrom-SVN: r7970", "tree": {"sha": "2a73e434a8989364ac08075fa2f86077461a3422", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a73e434a8989364ac08075fa2f86077461a3422"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4424a75ec3ad8c1a7a638ef515284dd9f6b0549", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4424a75ec3ad8c1a7a638ef515284dd9f6b0549", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4424a75ec3ad8c1a7a638ef515284dd9f6b0549", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4424a75ec3ad8c1a7a638ef515284dd9f6b0549/comments", "author": null, "committer": null, "parents": [{"sha": "aff2a12b7029cbbe67612a4d2ce9edfe7bb150fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aff2a12b7029cbbe67612a4d2ce9edfe7bb150fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aff2a12b7029cbbe67612a4d2ce9edfe7bb150fe"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "bb638dc7c25efa3afeeef20b63159720188a6369", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4424a75ec3ad8c1a7a638ef515284dd9f6b0549/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4424a75ec3ad8c1a7a638ef515284dd9f6b0549/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=d4424a75ec3ad8c1a7a638ef515284dd9f6b0549", "patch": "@@ -990,8 +990,11 @@ default_conversion (exp)\n   /* Constants can be used directly unless they're not loadable.  */\n   if (TREE_CODE (exp) == CONST_DECL)\n     exp = DECL_INITIAL (exp);\n-  /* Replace a nonvolatile const static variable with its value.  */\n-  else if (optimize && TREE_CODE (exp) == VAR_DECL)\n+\n+  /* Replace a nonvolatile const static variable with its value unless\n+     it is an array, in which case we must be sure that taking the\n+     address of the array produces consistent results.  */\n+  else if (optimize && TREE_CODE (exp) == VAR_DECL && code != ARRAY_TYPE)\n     {\n       exp = decl_constant_value (exp);\n       type = TREE_TYPE (exp);"}]}