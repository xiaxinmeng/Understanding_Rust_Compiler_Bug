{"sha": "c18b1b0bc78c27257cfc8448581564337412f567", "node_id": "C_kwDOANBUbNoAKGMxOGIxYjBiYzc4YzI3MjU3Y2ZjODQ0ODU4MTU2NDMzNzQxMmY1Njc", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2023-04-08T10:05:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2023-04-08T10:05:04Z"}, "message": "riscv: Fix genrvv-type-indexer dependencies\n\nI've noticed\nmake: Circular build/genrvv-type-indexer.o <- gtype-desc.h dependency dropped.\n\nThe following patch fixes that.  The RTL_BASE_H variable includes a lot of\nheaders which the generator doesn't include, including gtype-desc.h.\nI've preprocessed it and checked all gcc/libiberty headers against what is\nincluded in the other dependency variables and here is what I found:\n1) coretypes.h includes align.h, poly-int.h and poly-int-types.h which\n   weren't listed (most of dependencies are thankfully done automatically,\n   so it isn't that big deal except for these generators and the like)\n2) system.h includes filenames.h (already listed) but filenames.h includes\n   hashtab.h; instead of adding FILENAMES_H I've just added the dependency\n   to SYSTEM_H\n3) $(RTL_BASE_H) wasn't really needed at all and insn-modes.h is already\n   included in $(CORETYPES_H)\n\n2023-04-08  Jakub Jelinek  <jakub@redhat.com>\n\n\t* Makefile.in (CORETYPES_H): Depend on align.h, poly-int.h and\n\tpoly-int-types.h.\n\t(SYSTEM_H): Depend on $(HASHTAB_H).\n\t* config/riscv/t-riscv (build/genrvv-type-indexer.o): Remove unused\n\tdependency on $(RTL_BASE_H), remove redundant dependency on\n\tinsn-modes.h.", "tree": {"sha": "3943e7a63b320f78bd73fb2b4d84e518394cd79b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3943e7a63b320f78bd73fb2b4d84e518394cd79b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c18b1b0bc78c27257cfc8448581564337412f567", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c18b1b0bc78c27257cfc8448581564337412f567", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c18b1b0bc78c27257cfc8448581564337412f567", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c18b1b0bc78c27257cfc8448581564337412f567/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eac493851f07df98213ecf67a5e9ab41a7babcd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eac493851f07df98213ecf67a5e9ab41a7babcd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eac493851f07df98213ecf67a5e9ab41a7babcd2"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "ad9a5d94cd015be950ec5b21c2b10a1a3d3654f2", "filename": "gcc/Makefile.in", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c18b1b0bc78c27257cfc8448581564337412f567/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c18b1b0bc78c27257cfc8448581564337412f567/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=c18b1b0bc78c27257cfc8448581564337412f567", "patch": "@@ -945,7 +945,8 @@ TARGET_DEF_H = target-def.h target-hooks-def.h $(HOOKS_H) targhooks.h\n C_TARGET_DEF_H = c-family/c-target-def.h c-family/c-target-hooks-def.h \\\n   $(TREE_H) $(C_COMMON_H) $(HOOKS_H) common/common-targhooks.h\n CORETYPES_H = coretypes.h insn-modes.h signop.h wide-int.h wide-int-print.h \\\n-  insn-modes-inline.h $(MACHMODE_H) double-int.h\n+  insn-modes-inline.h $(MACHMODE_H) double-int.h align.h poly-int.h \\\n+  poly-int-types.h\n RTL_BASE_H = $(CORETYPES_H) rtl.h rtl.def reg-notes.def \\\n   insn-notes.def $(INPUT_H) $(REAL_H) statistics.h $(VEC_H) \\\n   $(FIXED_VALUE_H) alias.h $(HASHTAB_H)\n@@ -998,7 +999,8 @@ C_COMMON_H = c-family/c-common.h c-family/c-common.def $(TREE_H) \\\n C_PRAGMA_H = c-family/c-pragma.h $(CPPLIB_H)\n C_TREE_H = c/c-tree.h $(C_COMMON_H) $(DIAGNOSTIC_H)\n SYSTEM_H = system.h hwint.h $(srcdir)/../include/libiberty.h \\\n-\t$(srcdir)/../include/safe-ctype.h $(srcdir)/../include/filenames.h\n+\t$(srcdir)/../include/safe-ctype.h $(srcdir)/../include/filenames.h \\\n+\t$(HASHTAB_H)\n PREDICT_H = predict.h predict.def\n CPPLIB_H = $(srcdir)/../libcpp/include/line-map.h \\\n \t$(srcdir)/../libcpp/include/cpplib.h"}, {"sha": "1252d6f851ac55b1d865a1b718bd978e79655bc7", "filename": "gcc/config/riscv/t-riscv", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c18b1b0bc78c27257cfc8448581564337412f567/gcc%2Fconfig%2Friscv%2Ft-riscv", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c18b1b0bc78c27257cfc8448581564337412f567/gcc%2Fconfig%2Friscv%2Ft-riscv", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Ft-riscv?ref=c18b1b0bc78c27257cfc8448581564337412f567", "patch": "@@ -102,8 +102,8 @@ $(common_out_file): $(srcdir)/config/riscv/riscv-cores.def \\\n     $(srcdir)/config/riscv/riscv-protos.h \\\n     $(srcdir)/config/riscv/riscv-subset.h\n \n-build/genrvv-type-indexer.o: $(srcdir)/config/riscv/genrvv-type-indexer.cc $(RTL_BASE_H) $(BCONFIG_H) $(SYSTEM_H)\t\\\n-  $(CORETYPES_H) $(GTM_H) errors.h $(GENSUPPORT_H) insn-modes.h\n+build/genrvv-type-indexer.o: $(srcdir)/config/riscv/genrvv-type-indexer.cc $(BCONFIG_H) $(SYSTEM_H)\t\\\n+  $(CORETYPES_H) $(GTM_H) errors.h $(GENSUPPORT_H)\n \n build/genrvv-type-indexer$(build_exeext): build/genrvv-type-indexer.o\n \t+$(LINKER_FOR_BUILD) $(BUILD_LINKERFLAGS) $(BUILD_LDFLAGS) -o $@ \\"}]}