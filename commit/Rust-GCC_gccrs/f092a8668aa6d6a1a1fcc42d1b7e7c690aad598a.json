{"sha": "f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjA5MmE4NjY4YWE2ZDZhMWExZmNjNDJkMWI3ZTdjNjkwYWFkNTk4YQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2006-08-04T04:58:36Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2006-08-04T04:58:36Z"}, "message": "re PR c++/28148 (ICE with pointer to member function initializer and cast to a different type)\n\n\tPR c++/28148\n\t* varasm.c (output_constant): Give the front end another chance to\n\texpand constants, after stripping NOPs.\n\n\tPR c++/28148\n\t* g++.dg/init/ptrmem3.C: New test.\n\nFrom-SVN: r115919", "tree": {"sha": "2d1cd1c342adf7eca633c52a85a1247b402a54a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d1cd1c342adf7eca633c52a85a1247b402a54a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/comments", "author": null, "committer": null, "parents": [{"sha": "493297e3842118cddb1d20edf855b4c9d5060d7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/493297e3842118cddb1d20edf855b4c9d5060d7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/493297e3842118cddb1d20edf855b4c9d5060d7b"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "216b686529b94894f76c3a360d529c6b9ea16508", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "patch": "@@ -1,3 +1,9 @@\n+2006-08-03  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/28148\n+\t* varasm.c (output_constant): Give the front end another chance to\n+\texpand constants, after stripping NOPs.\n+\n 2006-08-03  Jan Hubicka  <jh@suse.cz>\n \n \t* domwalk.c (walk_dominator_tree): Reorganize to non-recursive"}, {"sha": "a07f7c1c4a0aa26875c9ebf2b348c123c70951ff", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "patch": "@@ -1,3 +1,8 @@\n+2006-08-03  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/28148\n+\t* g++.dg/init/ptrmem3.C: New test.\n+\n 2006-08-03  Dorit Nuzman  <dorit@il.ibm.com>\n \n \tPR tree-optimization/27770"}, {"sha": "95b60379b401b803cfd77e775045cd865026c660", "filename": "gcc/testsuite/g++.dg/init/ptrmem3.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fptrmem3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fptrmem3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fptrmem3.C?ref=f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/28148\n+\n+struct foo {\n+public:\n+  virtual int bar(int);\n+};\n+\n+void (foo::*__Virtual__foo__Var1)() = (void (foo::*)())(&foo::bar);"}, {"sha": "9837e0de14742bca6f6dbc36533b5cace9dd080b", "filename": "gcc/varasm.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=f092a8668aa6d6a1a1fcc42d1b7e7c690aad598a", "patch": "@@ -4048,6 +4048,9 @@ output_constant (tree exp, unsigned HOST_WIDE_INT size, unsigned int align)\n   code = TREE_CODE (TREE_TYPE (exp));\n   thissize = int_size_in_bytes (TREE_TYPE (exp));\n \n+  /* Give the front end another chance to expand constants.  */\n+  exp = lang_hooks.expand_constant (exp);\n+\n   /* Allow a constructor with no elements for any data type.\n      This means to fill the space with zeros.  */\n   if (TREE_CODE (exp) == CONSTRUCTOR"}]}