{"sha": "4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGMxY2I0ZGE3YWU5OTE2ZTNkYWU1MTZmMzYwZDZhNDM4ZTVhZjVlNQ==", "commit": {"author": {"name": "Maxim Blumenthal", "email": "maxim.blumenthal@intel.com", "date": "2015-07-14T18:54:35Z"}, "committer": {"name": "Ilya Verbin", "email": "iverbin@gcc.gnu.org", "date": "2015-07-14T18:54:35Z"}, "message": "simd-3.c: (main): Change type of res and ref from int to double.\n\n2015-07-14  Maxim Blumenthal  <maxim.blumenthal@intel.com>\n\nlibgomp/\n\t* testsuite/libgomp.c/examples-4/simd-3.c: (main): Change type of res\n\tand ref from int to double.  Replaced their comparison with\n\tan inequality of their difference and EPS.\n\t* testsuite/libgomp.c/examples-4/simd-8.c: (main): Replace the\n\tcomparison of pri and a reference number with an inequality of their\n\tdifference and EPS.\n\t* testsuite/libgomp.fortran/examples-4/simd-3.f90: (main): Replaced\n\tthe comparison of sum and sum_ref with an inequality of their\n\tdifference and EPS.\n\t* testsuite/libgomp.fortran/examples-4/simd-8.f90: (main): Replace\n\tthe comparison of pri and a reference number with an inequality of\n\ttheir difference and EPS.\n\nFrom-SVN: r225786", "tree": {"sha": "e5dcec9f9dccfd2a80bd5288ad62b0509eff9870", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5dcec9f9dccfd2a80bd5288ad62b0509eff9870"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/comments", "author": null, "committer": null, "parents": [{"sha": "e056dfd06a163af1204b2af5b7e44322a3e39cd1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e056dfd06a163af1204b2af5b7e44322a3e39cd1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e056dfd06a163af1204b2af5b7e44322a3e39cd1"}], "stats": {"total": 45, "additions": 36, "deletions": 9}, "files": [{"sha": "27c205d495dfdd93f843faf53c3dd92fecaaea2c", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "patch": "@@ -1,3 +1,18 @@\n+2015-07-14  Maxim Blumenthal  <maxim.blumenthal@intel.com>\n+\n+\t* testsuite/libgomp.c/examples-4/simd-3.c: (main): Change type of res\n+\tand ref from int to double.  Replaced their comparison with\n+\tan inequality of their difference and EPS.\n+\t* testsuite/libgomp.c/examples-4/simd-8.c: (main): Replace the\n+\tcomparison of pri and a reference number with an inequality of their\n+\tdifference and EPS.\n+\t* testsuite/libgomp.fortran/examples-4/simd-3.f90: (main): Replaced\n+\tthe comparison of sum and sum_ref with an inequality of their\n+\tdifference and EPS.\n+\t* testsuite/libgomp.fortran/examples-4/simd-8.f90: (main): Replace\n+\tthe comparison of pri and a reference number with an inequality of\n+\ttheir difference and EPS.\n+\n 2015-07-13  Maxim Blumenthal  <maxim.blumenthal@intel.com>\n \n \t* testsuite/libgomp.c++/examples-4/e.53.2.C: Renamed to..."}, {"sha": "9082e49ecc308a9c39e0fc8d020ebf1cb97d2998", "filename": "libgomp/testsuite/libgomp.c/examples-4/simd-3.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.c%2Fexamples-4%2Fsimd-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.c%2Fexamples-4%2Fsimd-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fexamples-4%2Fsimd-3.c?ref=4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "patch": "@@ -46,15 +46,16 @@ double work_ref( double *a, double *b, int n )\n \n int main ()\n {\n-  double a[N], a_ref[N], b[N];\n-  int res, ref;\n+  double a[N], a_ref[N], b[N], res, ref, diff;\n \n   init(a, a_ref, b, N);\n \n   res = work(a, b, N);\n   ref = work_ref(a_ref, b, N);\n \n-  if (res != ref)\n+  diff = res - ref;\n+\n+  if (diff > EPS || -diff > EPS)\n     abort ();\n \n   return 0;"}, {"sha": "bbef778b776914c17a2cfbed330640b31a33a85a", "filename": "libgomp/testsuite/libgomp.c/examples-4/simd-8.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.c%2Fexamples-4%2Fsimd-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.c%2Fexamples-4%2Fsimd-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fexamples-4%2Fsimd-8.c?ref=4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "patch": "@@ -5,6 +5,8 @@\n #include <stdlib.h>\n #include <math.h>\n \n+#define EPS 0.005\n+\n int   P[1000];\n float A[1000];\n \n@@ -31,7 +33,7 @@ float do_work(float *arr)\n \n int main(void)\n {\n-  float pri, arr[1000];\n+  float pri, arr[1000], diff;\n \n   for (int i = 0; i < 1000; ++i)\n   {\n@@ -42,7 +44,9 @@ int main(void)\n \n   pri = do_work(&arr[0]);\n \n-  if (pri != 8237.25)\n+  diff = pri - 8237.25;\n+\n+  if (diff > EPS || -diff > EPS)\n     abort ();\n \n   return 0;"}, {"sha": "2c02945de87408ab2a2452bb83bcacda99d7bb24", "filename": "libgomp/testsuite/libgomp.fortran/examples-4/simd-3.f90", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fexamples-4%2Fsimd-3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fexamples-4%2Fsimd-3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fexamples-4%2Fsimd-3.f90?ref=4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "patch": "@@ -49,11 +49,14 @@ subroutine init (a, b, n)\n \n program SIMD3\n   use SIMD3_mod\n-  double precision :: a(128), b(128), sum, sum_ref\n+  double precision :: a(128), b(128), sum, sum_ref, diff\n+  double precision, parameter :: EPS = 0.0000000000000001\n \n   call  work(a, b, 128, sum)\n   call  work_ref(a, b, 128, sum_ref)\n \n-  if (sum .ne. sum_ref) call abort\n+  diff = sum - sum_ref\n+\n+  if (diff > EPS .or. -diff > EPS) call abort\n \n end program"}, {"sha": "ba7b0f90a4efcb03c7dc8d9e475cc6cbb1c1e89e", "filename": "libgomp/testsuite/libgomp.fortran/examples-4/simd-8.f90", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fexamples-4%2Fsimd-8.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c1cb4da7ae9916e3dae516f360d6a438e5af5e5/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fexamples-4%2Fsimd-8.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.fortran%2Fexamples-4%2Fsimd-8.f90?ref=4c1cb4da7ae9916e3dae516f360d6a438e5af5e5", "patch": "@@ -34,15 +34,19 @@ end module work\n program simd_8f\n   use work\n   implicit none\n-  real :: pri, arr(1000)\n+  real :: pri, arr(1000), diff\n   integer :: i\n+  integer, parameter :: EPS = 0.005\n \n   do i = 1, 1000\n      P(i)   = i\n      A(i)   = (i-1) * 1.5\n      arr(i) = (i-1) * 1.8\n   end do\n   pri = do_work(arr)\n-  if (pri .ne. 8237.25) call abort ()\n+\n+  diff = pri - 8237.25\n+\n+  if (diff > EPS .or. -diff > EPS) call abort\n \n end program"}]}