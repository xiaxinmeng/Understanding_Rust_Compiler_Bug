{"sha": "0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGUyNmJmM2Q0ZTkwZmY4NTQ5ZDc0NDIyYzJiZTNkMjMwMmI5ZDdmNw==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2013-06-06T13:02:08Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2013-06-06T13:02:08Z"}, "message": "arm-ldmstm.ml: Set \"predicable_short_it\" to \"no\" where appropriate.\n\n2013-06-06  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n\n\t* config/arm/arm-ldmstm.ml: Set \"predicable_short_it\" to \"no\"\n\twhere appropriate.\n\t* config/arm/ldmstm.md: Regenerate.\n\nFrom-SVN: r199734", "tree": {"sha": "cf9de40b85eaf02f84e22b4b2c9ef658200243c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf9de40b85eaf02f84e22b4b2c9ef658200243c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "12b4e7ef7497b653d6e925649a230b76a4cf241d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12b4e7ef7497b653d6e925649a230b76a4cf241d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12b4e7ef7497b653d6e925649a230b76a4cf241d"}], "stats": {"total": 85, "additions": 60, "deletions": 25}, "files": [{"sha": "b14fbe0e3ad815867fc5d293924f5de189d6706d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7", "patch": "@@ -1,3 +1,9 @@\n+2013-06-06  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* config/arm/arm-ldmstm.ml: Set \"predicable_short_it\" to \"no\"\n+\twhere appropriate.\n+\t* config/arm/ldmstm.md: Regenerate.\n+\n 2013-06-06  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/arm/sync.md (atomic_loaddi_1):"}, {"sha": "e615437b12526a44be3afc1ed9abbd8846f615aa", "filename": "gcc/config/arm/arm-ldmstm.ml", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7/gcc%2Fconfig%2Farm%2Farm-ldmstm.ml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7/gcc%2Fconfig%2Farm%2Farm-ldmstm.ml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-ldmstm.ml?ref=0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7", "patch": "@@ -146,12 +146,15 @@ let can_thumb addrmode update is_store =\n   | IA, true, true -> true\n   | _ -> false\n \n+exception InvalidAddrMode of string;;\n+\n let target addrmode thumb =\n   match addrmode, thumb with\n     IA, true -> \"TARGET_THUMB1\"\n   | IA, false -> \"TARGET_32BIT\"\n   | DB, false -> \"TARGET_32BIT\"\n   | _, false -> \"TARGET_ARM\"\n+  | _, _ -> raise (InvalidAddrMode \"ERROR: Invalid Addressing mode for Thumb1.\")\n \n let write_pattern_1 name ls addrmode nregs write_set_fn update thumb =\n   let astr = string_of_addrmode addrmode in\n@@ -181,8 +184,10 @@ let write_pattern_1 name ls addrmode nregs write_set_fn update thumb =\n   done;\n   Printf.printf \"}\\\"\\n\";\n   Printf.printf \"  [(set_attr \\\"type\\\" \\\"%s%d\\\")\" ls nregs;\n-  begin if not thumb then\n+  if not thumb then begin\n     Printf.printf \"\\n   (set_attr \\\"predicable\\\" \\\"yes\\\")\";\n+    if addrmode == IA || addrmode == DB then\n+      Printf.printf \"\\n   (set_attr \\\"predicable_short_it\\\" \\\"no\\\")\";\n   end;\n   Printf.printf \"])\\n\\n\"\n "}, {"sha": "ad137d492e468e0306f7ef06aedef2987385da0f", "filename": "gcc/config/arm/ldmstm.md", "status": "modified", "additions": 48, "deletions": 24, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7/gcc%2Fconfig%2Farm%2Fldmstm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7/gcc%2Fconfig%2Farm%2Fldmstm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fldmstm.md?ref=0e26bf3d4e90ff8549d74422c2be3d2302b9d7f7", "patch": "@@ -37,7 +37,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"ldm%(ia%)\\t%5, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"load4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_ldm4_ia\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -74,7 +75,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 5\"\n   \"ldm%(ia%)\\t%5!, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"load4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_ldm4_ia_update\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -108,7 +110,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"stm%(ia%)\\t%5, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"store4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm4_ia_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -125,7 +128,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 5\"\n   \"stm%(ia%)\\t%5!, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"store4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_stm4_ia_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -302,7 +306,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"ldm%(db%)\\t%5, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"load4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*ldm4_db_update\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -323,7 +328,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 5\"\n   \"ldm%(db%)\\t%5!, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"load4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm4_db\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -338,7 +344,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"stm%(db%)\\t%5, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"store4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm4_db_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -355,7 +362,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 5\"\n   \"stm%(db%)\\t%5!, {%1, %2, %3, %4}\"\n   [(set_attr \"type\" \"store4\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_peephole2\n   [(set (match_operand:SI 0 \"s_register_operand\" \"\")\n@@ -477,7 +485,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"ldm%(ia%)\\t%4, {%1, %2, %3}\"\n   [(set_attr \"type\" \"load3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_ldm3_ia\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -508,7 +517,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"ldm%(ia%)\\t%4!, {%1, %2, %3}\"\n   [(set_attr \"type\" \"load3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_ldm3_ia_update\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -537,7 +547,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"stm%(ia%)\\t%4, {%1, %2, %3}\"\n   [(set_attr \"type\" \"store3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm3_ia_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -552,7 +563,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"stm%(ia%)\\t%4!, {%1, %2, %3}\"\n   [(set_attr \"type\" \"store3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_stm3_ia_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -704,7 +716,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"ldm%(db%)\\t%4, {%1, %2, %3}\"\n   [(set_attr \"type\" \"load3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*ldm3_db_update\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -722,7 +735,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"ldm%(db%)\\t%4!, {%1, %2, %3}\"\n   [(set_attr \"type\" \"load3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm3_db\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -735,7 +749,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"stm%(db%)\\t%4, {%1, %2, %3}\"\n   [(set_attr \"type\" \"store3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm3_db_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -750,7 +765,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 4\"\n   \"stm%(db%)\\t%4!, {%1, %2, %3}\"\n   [(set_attr \"type\" \"store3\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_peephole2\n   [(set (match_operand:SI 0 \"s_register_operand\" \"\")\n@@ -855,7 +871,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 2\"\n   \"ldm%(ia%)\\t%3, {%1, %2}\"\n   [(set_attr \"type\" \"load2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_ldm2_ia\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -880,7 +897,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"ldm%(ia%)\\t%3!, {%1, %2}\"\n   [(set_attr \"type\" \"load2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_ldm2_ia_update\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -904,7 +922,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 2\"\n   \"stm%(ia%)\\t%3, {%1, %2}\"\n   [(set_attr \"type\" \"store2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm2_ia_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -917,7 +936,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"stm%(ia%)\\t%3!, {%1, %2}\"\n   [(set_attr \"type\" \"store2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*thumb_stm2_ia_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -1044,7 +1064,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 2\"\n   \"ldm%(db%)\\t%3, {%1, %2}\"\n   [(set_attr \"type\" \"load2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*ldm2_db_update\"\n   [(match_parallel 0 \"load_multiple_operation\"\n@@ -1059,7 +1080,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"ldm%(db%)\\t%3!, {%1, %2}\"\n   [(set_attr \"type\" \"load2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm2_db\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -1070,7 +1092,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 2\"\n   \"stm%(db%)\\t%3, {%1, %2}\"\n   [(set_attr \"type\" \"store2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_insn \"*stm2_db_update\"\n   [(match_parallel 0 \"store_multiple_operation\"\n@@ -1083,7 +1106,8 @@\n   \"TARGET_32BIT && XVECLEN (operands[0], 0) == 3\"\n   \"stm%(db%)\\t%3!, {%1, %2}\"\n   [(set_attr \"type\" \"store2\")\n-   (set_attr \"predicable\" \"yes\")])\n+   (set_attr \"predicable\" \"yes\")\n+   (set_attr \"predicable_short_it\" \"no\")])\n \n (define_peephole2\n   [(set (match_operand:SI 0 \"s_register_operand\" \"\")"}]}