{"sha": "66d4b7331f6b178f3eeb5f4315c6c596733d9da4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjZkNGI3MzMxZjZiMTc4ZjNlZWI1ZjQzMTVjNmM1OTY3MzNkOWRhNA==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-11-08T08:51:52Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-11-08T08:51:52Z"}, "message": "[mips] Wrap ASM_OUTPUT_LABELREF in do {} while (0)\n\n2017-11-07  Tom de Vries  <tom@codesourcery.com>\n\n\t* config/mips/mips.h (ASM_OUTPUT_LABELREF): Wrap in \"do {} while (0)\".\n\nFrom-SVN: r254521", "tree": {"sha": "368732fc9b8d08042e61adbb5ccdec6c9858329a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/368732fc9b8d08042e61adbb5ccdec6c9858329a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66d4b7331f6b178f3eeb5f4315c6c596733d9da4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66d4b7331f6b178f3eeb5f4315c6c596733d9da4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66d4b7331f6b178f3eeb5f4315c6c596733d9da4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66d4b7331f6b178f3eeb5f4315c6c596733d9da4/comments", "author": null, "committer": null, "parents": [{"sha": "65f371e47ee0f9e6af51412b552f1b46a0d33f51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65f371e47ee0f9e6af51412b552f1b46a0d33f51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65f371e47ee0f9e6af51412b552f1b46a0d33f51"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "ed9a130637066946012c11045a512263d4a10be4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66d4b7331f6b178f3eeb5f4315c6c596733d9da4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66d4b7331f6b178f3eeb5f4315c6c596733d9da4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=66d4b7331f6b178f3eeb5f4315c6c596733d9da4", "patch": "@@ -1,3 +1,7 @@\n+2017-11-07  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* config/mips/mips.h (ASM_OUTPUT_LABELREF): Wrap in \"do {} while (0)\".\n+\n 2017-11-07  Tom de Vries  <tom@codesourcery.com>\n \n \t* config/mips/mips.h (ASM_OUTPUT_CASE_END): Remove semicolon after"}, {"sha": "bea2ce844ce9ebc2ab2ea5d1e12616897d5ff65b", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66d4b7331f6b178f3eeb5f4315c6c596733d9da4/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66d4b7331f6b178f3eeb5f4315c6c596733d9da4/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=66d4b7331f6b178f3eeb5f4315c6c596733d9da4", "patch": "@@ -2566,12 +2566,15 @@ typedef struct mips_args {\n /* This handles the magic '..CURRENT_FUNCTION' symbol, which means\n    'the start of the function that this code is output in'.  */\n \n-#define ASM_OUTPUT_LABELREF(FILE,NAME)  \\\n-  if (strcmp (NAME, \"..CURRENT_FUNCTION\") == 0)\t\t\t\t\\\n-    asm_fprintf ((FILE), \"%U%s\",\t\t\t\t\t\\\n-\t\t XSTR (XEXP (DECL_RTL (current_function_decl), 0), 0));\t\\\n-  else\t\t\t\t\t\t\t\t\t\\\n-    asm_fprintf ((FILE), \"%U%s\", (NAME))\n+#define ASM_OUTPUT_LABELREF(FILE,NAME)\t\t\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\t\\\n+    if (strcmp (NAME, \"..CURRENT_FUNCTION\") == 0)\t\t\t\\\n+      asm_fprintf ((FILE), \"%U%s\",\t\t\t\t\t\\\n+\t\t   XSTR (XEXP (DECL_RTL (current_function_decl),\t\\\n+\t\t\t       0), 0));\t\t\t\t\t\\\n+    else\t\t\t\t\t\t\t\t\\\n+      asm_fprintf ((FILE), \"%U%s\", (NAME));\t\t\t\t\\\n+  } while (0)\n \f\n /* Flag to mark a function decl symbol that requires a long call.  */\n #define SYMBOL_FLAG_LONG_CALL\t(SYMBOL_FLAG_MACH_DEP << 0)"}]}