{"sha": "33cf5823a5cb6439135e3820e924695819a4759f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNjZjU4MjNhNWNiNjQzOTEzNWUzODIwZTkyNDY5NTgxOWE0NzU5Zg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-04-26T16:29:48Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-04-26T16:29:48Z"}, "message": "(expand_builtin, case BUILT_IN_CONSTANT_P): A pointer to a string\nconstant is a constant.\n\nFrom-SVN: r9475", "tree": {"sha": "b9b51dada4ca281467dd107bee78ebff55cf8fe4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9b51dada4ca281467dd107bee78ebff55cf8fe4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33cf5823a5cb6439135e3820e924695819a4759f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33cf5823a5cb6439135e3820e924695819a4759f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33cf5823a5cb6439135e3820e924695819a4759f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33cf5823a5cb6439135e3820e924695819a4759f/comments", "author": null, "committer": null, "parents": [{"sha": "ccafc85b7ff4c29f2ba72bc6fe19d91fe67da577", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccafc85b7ff4c29f2ba72bc6fe19d91fe67da577", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccafc85b7ff4c29f2ba72bc6fe19d91fe67da577"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "818618927ca854fc9acb29dcfe8bd308fd59de52", "filename": "gcc/expr.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33cf5823a5cb6439135e3820e924695819a4759f/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33cf5823a5cb6439135e3820e924695819a4759f/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=33cf5823a5cb6439135e3820e924695819a4759f", "patch": "@@ -7505,8 +7505,15 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n       if (arglist == 0)\n \treturn const0_rtx;\n       else\n-\treturn (TREE_CODE_CLASS (TREE_CODE (TREE_VALUE (arglist))) == 'c'\n-\t\t? const1_rtx : const0_rtx);\n+\t{\n+\t  tree arg = TREE_VALUE (arglist);\n+\n+\t  STRIP_NOPS (arg);\n+\t  return (TREE_CODE_CLASS (TREE_CODE (arg)) == 'c'\n+\t\t  || (TREE_CODE (arg) == ADDR_EXPR\n+\t\t      && TREE_CODE (TREE_OPERAND (arg, 0)) == STRING_CST)\n+\t\t  ? const1_rtx : const0_rtx);\n+\t}\n \n     case BUILT_IN_FRAME_ADDRESS:\n       /* The argument must be a nonnegative integer constant."}]}