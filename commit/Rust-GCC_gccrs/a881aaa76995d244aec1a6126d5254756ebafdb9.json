{"sha": "a881aaa76995d244aec1a6126d5254756ebafdb9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTg4MWFhYTc2OTk1ZDI0NGFlYzFhNjEyNmQ1MjU0NzU2ZWJhZmRiOQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-03-24T14:43:16Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-03-24T14:43:16Z"}, "message": "re PR tree-optimization/48271 (ICE: SIGSEGV in tree_ssa_dominator_optimize (tree-ssa-dom.c:2964) with -O -ftree-vrp -fno-guess-branch-probability -fnon-call-exceptions)\n\n2011-03-24  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/48271\n\t* tree-ssa-dom.c (tree_ssa_dominator_optimize): Only cleanup\n\tblocks that still exist.\n\n\t* g++.dg/torture/pr48271.C: New testcase.\n\nFrom-SVN: r171395", "tree": {"sha": "1d8153ce00daca65241e4fb2d0ed678e09967244", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d8153ce00daca65241e4fb2d0ed678e09967244"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a881aaa76995d244aec1a6126d5254756ebafdb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a881aaa76995d244aec1a6126d5254756ebafdb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a881aaa76995d244aec1a6126d5254756ebafdb9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a881aaa76995d244aec1a6126d5254756ebafdb9/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "dbaa912cc8f340546b006071be3a72bf948aed55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbaa912cc8f340546b006071be3a72bf948aed55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbaa912cc8f340546b006071be3a72bf948aed55"}], "stats": {"total": 136, "additions": 134, "deletions": 2}, "files": [{"sha": "4c00adc8d9490feae9963483bddeb18422a8283e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a881aaa76995d244aec1a6126d5254756ebafdb9", "patch": "@@ -1,3 +1,9 @@\n+2011-03-24  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/48271\n+\t* tree-ssa-dom.c (tree_ssa_dominator_optimize): Only cleanup\n+\tblocks that still exist.\n+\n 2011-03-24  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/48270"}, {"sha": "1bed864420e409f238e156487472d99422d9f042", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a881aaa76995d244aec1a6126d5254756ebafdb9", "patch": "@@ -1,3 +1,8 @@\n+2011-03-24  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/48271\n+\t* g++.dg/torture/pr48271.C: New testcase.\n+\n 2011-03-24  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/array15.ad[sb]: New test."}, {"sha": "5b60ccd768cb192bce95dd0c898e2cd0e0e0f7a3", "filename": "gcc/testsuite/g++.dg/torture/pr48271.C", "status": "added", "additions": 119, "deletions": 0, "changes": 119, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr48271.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr48271.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr48271.C?ref=a881aaa76995d244aec1a6126d5254756ebafdb9", "patch": "@@ -0,0 +1,119 @@\n+// { dg-do compile }\n+// { dg-options \"-ftree-vrp -fno-guess-branch-probability -fnon-call-exceptions\" }\n+\n+void *xalloc ();\n+void xfree (void *);\n+void error ();\n+\n+static inline void *\n+MallocT ()\n+{\n+  void *p = xalloc ();\n+  if (!p)\n+    error ();\n+  return p;\n+}\n+\n+\n+struct ByteBlob\n+{\n+  int *header;\n+\n+  ByteBlob();\n+\n+  ~ByteBlob ()\n+  {\n+    Free ();\n+  }\n+\n+  int RawFree (int * p)\n+  {\n+    if (!p)\n+      error ();\n+    xfree (p);\n+  }\n+\n+  int *LengthRef ();\n+\n+  void Free ()\n+  {\n+    if (*header)\n+      RawFree (header);\n+  }\n+\n+  int Append (int num_ints)\n+  {\n+    if (*header)\n+      MallocT ();\n+    *LengthRef () += num_ints;\n+  }\n+};\n+\n+struct CBlobT:ByteBlob\n+{\n+  ~CBlobT ()\n+  {\n+    Free ();\n+  }\n+};\n+\n+template < class T > struct FixedSizeArray\n+{\n+  int HeaderSize;\n+  T *data;\n+  FixedSizeArray ();\n+  int RefCnt ()\n+  {\n+    return *(int *) MallocT ();\n+  }\n+   ~FixedSizeArray ()\n+  {\n+    if (RefCnt ())\n+      for (T * pItem = data + Length (); pItem != data; pItem--)\n+\tT ();\n+  }\n+  int Length ();\n+};\n+\n+class SmallArray\n+{\n+  typedef FixedSizeArray < int > SubArray;\n+  typedef FixedSizeArray < SubArray > SuperArray;\n+  SuperArray data;\n+};\n+\n+struct CHashTableT\n+{\n+  int *m_slots;\n+  ~CHashTableT ()\n+  {\n+    delete m_slots;\n+  }\n+};\n+\n+struct CYapfBaseT\n+{\n+  int *PfGetSettings ();\n+  SmallArray m_arr;\n+  CHashTableT m_closed;\n+  CYapfBaseT ()\n+  {\n+    MallocT ();\n+  }\n+};\n+\n+struct CYapfCostRailT:CYapfBaseT\n+{\n+  CBlobT m_sig_look_ahead_costs;\n+  CYapfCostRailT ()\n+  {\n+    m_sig_look_ahead_costs.Append (*Yapf ()->PfGetSettings ());\n+    Yapf ()->PfGetSettings ();\n+  }\n+  CYapfBaseT *Yapf ();\n+};\n+\n+void stCheckReverseTrain ()\n+{\n+  CYapfCostRailT pf1;\n+}"}, {"sha": "0f649f3cfed9f9fcf15b5aa62ee25a203872ad40", "filename": "gcc/tree-ssa-dom.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2Ftree-ssa-dom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a881aaa76995d244aec1a6126d5254756ebafdb9/gcc%2Ftree-ssa-dom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dom.c?ref=a881aaa76995d244aec1a6126d5254756ebafdb9", "patch": "@@ -701,7 +701,8 @@ tree_ssa_dominator_optimize (void)\n     gimple_stmt_iterator gsi;\n     basic_block bb;\n     FOR_EACH_BB (bb)\n-      {for (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n+      {\n+\tfor (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n \t  update_stmt_if_modified (gsi_stmt (gsi));\n       }\n   }\n@@ -734,7 +735,8 @@ tree_ssa_dominator_optimize (void)\n       EXECUTE_IF_SET_IN_BITMAP (need_eh_cleanup, 0, i, bi)\n \t{\n \t  basic_block bb = BASIC_BLOCK (i);\n-\t  if (single_succ_p (bb) == 1\n+\t  if (bb\n+\t      && single_succ_p (bb)\n \t      && (single_succ_edge (bb)->flags & EDGE_EH) == 0)\n \t    {\n \t      bitmap_clear_bit (need_eh_cleanup, i);"}]}