{"sha": "a45918f8a7444a40eb397a037683ba5900a2db74", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQ1OTE4ZjhhNzQ0NGE0MGViMzk3YTAzNzY4M2JhNTkwMGEyZGI3NA==", "commit": {"author": {"name": "Bernd Edlinger", "email": "bernd.edlinger@hotmail.de", "date": "2021-07-24T10:53:39Z"}, "committer": {"name": "Bernd Edlinger", "email": "bernd.edlinger@hotmail.de", "date": "2021-08-11T05:29:27Z"}, "message": "Ada: Remove debug line number for DECL_IGNORED_P functions\n\nIt was pointed out in PR101598 to be inappropriate, that\nignored Ada decls receive the source line number which was\nrecorded in the function decl's DECL_SOURCE_LOCATION.\nTherefore set all front-end-generated Ada decls with\nDECL_IGNORED_P to UNKNOWN_LOCATION.\n\n2021-08-11  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n\tPR debug/101598\n\t* gcc-interface/trans.c (Subprogram_Body_to_gnu): Set the\n\tDECL_SOURCE_LOCATION of DECL_IGNORED_P gnu_subprog_decl to\n\tUNKNOWN_LOCATION.", "tree": {"sha": "63e0dc06354de56f4a97cb19df82798a09294bde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63e0dc06354de56f4a97cb19df82798a09294bde"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a45918f8a7444a40eb397a037683ba5900a2db74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a45918f8a7444a40eb397a037683ba5900a2db74", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a45918f8a7444a40eb397a037683ba5900a2db74", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a45918f8a7444a40eb397a037683ba5900a2db74/comments", "author": {"login": "bernd-edlinger", "id": 17638929, "node_id": "MDQ6VXNlcjE3NjM4OTI5", "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bernd-edlinger", "html_url": "https://github.com/bernd-edlinger", "followers_url": "https://api.github.com/users/bernd-edlinger/followers", "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}", "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions", "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs", "repos_url": "https://api.github.com/users/bernd-edlinger/repos", "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}", "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bernd-edlinger", "id": 17638929, "node_id": "MDQ6VXNlcjE3NjM4OTI5", "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bernd-edlinger", "html_url": "https://github.com/bernd-edlinger", "followers_url": "https://api.github.com/users/bernd-edlinger/followers", "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}", "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions", "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs", "repos_url": "https://api.github.com/users/bernd-edlinger/repos", "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}", "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fed7c1634e8e50600e20cb97dbfbd74ecbd5ba22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fed7c1634e8e50600e20cb97dbfbd74ecbd5ba22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fed7c1634e8e50600e20cb97dbfbd74ecbd5ba22"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "3df56aa0560e152b6df29d5959d3111f2072b56a", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a45918f8a7444a40eb397a037683ba5900a2db74/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a45918f8a7444a40eb397a037683ba5900a2db74/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=a45918f8a7444a40eb397a037683ba5900a2db74", "patch": "@@ -3885,7 +3885,9 @@ Subprogram_Body_to_gnu (Node_Id gnat_node)\n     }\n \n   /* Set the line number in the decl to correspond to that of the body.  */\n-  if (!Sloc_to_locus (Sloc (gnat_node), &locus, false, gnu_subprog_decl))\n+  if (DECL_IGNORED_P (gnu_subprog_decl))\n+    locus = UNKNOWN_LOCATION;\n+  else if (!Sloc_to_locus (Sloc (gnat_node), &locus, false, gnu_subprog_decl))\n     locus = input_location;\n   DECL_SOURCE_LOCATION (gnu_subprog_decl) = locus;\n "}]}