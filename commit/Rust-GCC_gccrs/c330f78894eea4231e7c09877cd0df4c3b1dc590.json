{"sha": "c330f78894eea4231e7c09877cd0df4c3b1dc590", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzMzMGY3ODg5NGVlYTQyMzFlN2MwOTg3N2NkMGRmNGMzYjFkYzU5MA==", "commit": {"author": {"name": "Matthew Fortune", "email": "matthew.fortune@imgtec.com", "date": "2017-03-31T09:21:57Z"}, "committer": {"name": "Matthew Fortune", "email": "mpf@gcc.gnu.org", "date": "2017-03-31T09:21:57Z"}, "message": "Fix extraction from odd-numbered MSA registers\n\nThis fixes a build-failure with gcc.c-torture/execute/20050604-1.c when\nusing -mabi=32 -mmsa -mno-odd-spreg.\n\ngcc/\n\t* config/mips/mips-msa.md (msa_vec_extract_<msafmt_f>): Update\n\textraction from odd-numbered MSA register.\n\nFrom-SVN: r246613", "tree": {"sha": "fb47a3bf6add22f75a0c9956d3d8fdcbdaa873f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb47a3bf6add22f75a0c9956d3d8fdcbdaa873f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c330f78894eea4231e7c09877cd0df4c3b1dc590", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c330f78894eea4231e7c09877cd0df4c3b1dc590", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c330f78894eea4231e7c09877cd0df4c3b1dc590", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c330f78894eea4231e7c09877cd0df4c3b1dc590/comments", "author": {"login": "mfortune", "id": 10220247, "node_id": "MDQ6VXNlcjEwMjIwMjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10220247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfortune", "html_url": "https://github.com/mfortune", "followers_url": "https://api.github.com/users/mfortune/followers", "following_url": "https://api.github.com/users/mfortune/following{/other_user}", "gists_url": "https://api.github.com/users/mfortune/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfortune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfortune/subscriptions", "organizations_url": "https://api.github.com/users/mfortune/orgs", "repos_url": "https://api.github.com/users/mfortune/repos", "events_url": "https://api.github.com/users/mfortune/events{/privacy}", "received_events_url": "https://api.github.com/users/mfortune/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "eceb24097b2781965126302bf60ef5273f1c4073", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eceb24097b2781965126302bf60ef5273f1c4073", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eceb24097b2781965126302bf60ef5273f1c4073"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "594b32a4563db4e5175e2bdca8a00c9677ce482c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c330f78894eea4231e7c09877cd0df4c3b1dc590/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c330f78894eea4231e7c09877cd0df4c3b1dc590/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c330f78894eea4231e7c09877cd0df4c3b1dc590", "patch": "@@ -1,3 +1,8 @@\n+2017-03-31  Matthew Fortune  <matthew.fortune@imgtec.com>\n+\n+\t* config/mips/mips-msa.md (msa_vec_extract_<msafmt_f>): Update\n+\textraction from odd-numbered MSA register.\n+\n 2017-03-31  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/80173"}, {"sha": "c80be471026cfedf3e4b0870460895b8200752aa", "filename": "gcc/config/mips/mips-msa.md", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c330f78894eea4231e7c09877cd0df4c3b1dc590/gcc%2Fconfig%2Fmips%2Fmips-msa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c330f78894eea4231e7c09877cd0df4c3b1dc590/gcc%2Fconfig%2Fmips%2Fmips-msa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-msa.md?ref=c330f78894eea4231e7c09877cd0df4c3b1dc590", "patch": "@@ -366,7 +366,20 @@\n   \"#\"\n   \"&& reload_completed\"\n   [(set (match_dup 0) (match_dup 1))]\n-  \"operands[1] = gen_rtx_REG (<UNITMODE>mode, REGNO (operands[1]));\"\n+{\n+  /* An MSA register cannot be reinterpreted as a single precision\n+     register when using -mno-odd-spreg and the MSA register is\n+     an odd number.  */\n+  if (<UNITMODE>mode == SFmode && !TARGET_ODD_SPREG\n+      && (REGNO (operands[1]) & 1))\n+    {\n+      emit_move_insn (gen_rtx_REG (<MODE>mode, REGNO (operands[0])),\n+\t\t      operands[1]);\n+      operands[1] = operands[0];\n+    }\n+  else\n+    operands[1] = gen_rtx_REG (<UNITMODE>mode, REGNO (operands[1]));\n+}\n   [(set_attr \"move_type\" \"fmove\")\n    (set_attr \"mode\" \"<UNITMODE>\")])\n "}]}