{"sha": "0bd83abd44afe09f841905c2b77e726eecfe016b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGJkODNhYmQ0NGFmZTA5Zjg0MTkwNWMyYjc3ZTcyNmVlY2ZlMDE2Yg==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1997-10-22T15:58:33Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-10-22T15:58:33Z"}, "message": "local-alloc.c (block_alloc): Don't lose if two SCRATCH expressions are shared.\n\n        * local-alloc.c (block_alloc): Don't lose if two SCRATCH expressions\n        are shared.\n\nFrom-SVN: r16147", "tree": {"sha": "d3e4ff1446320645e119745a87b3cd8285cea617", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d3e4ff1446320645e119745a87b3cd8285cea617"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0bd83abd44afe09f841905c2b77e726eecfe016b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bd83abd44afe09f841905c2b77e726eecfe016b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bd83abd44afe09f841905c2b77e726eecfe016b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bd83abd44afe09f841905c2b77e726eecfe016b/comments", "author": null, "committer": null, "parents": [{"sha": "b22b9b3ef27313822b3e3b05d40be84b7d365d5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b22b9b3ef27313822b3e3b05d40be84b7d365d5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b22b9b3ef27313822b3e3b05d40be84b7d365d5b"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "d5c3c8e35e60ebe252cb9f0d71fc5b8dd042778e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bd83abd44afe09f841905c2b77e726eecfe016b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bd83abd44afe09f841905c2b77e726eecfe016b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0bd83abd44afe09f841905c2b77e726eecfe016b", "patch": "@@ -1,5 +1,8 @@\n Wed Oct 22 00:34:12 1997  Jeffrey A Law  (law@cygnus.com)\n \n+\t* local-alloc.c (block_alloc): Don't lose if two SCRATCH expressions\n+\tare shared.\n+\n \t* rs6000.md (*movsi_got_internal_mem): New pattern.\n \t(*movsi_got_internal_mem splitter): New define_split.\n "}, {"sha": "ce7b4b9f405f2b3bcff3e4929cd984aac01654d2", "filename": "gcc/local-alloc.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0bd83abd44afe09f841905c2b77e726eecfe016b/gcc%2Flocal-alloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0bd83abd44afe09f841905c2b77e726eecfe016b/gcc%2Flocal-alloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flocal-alloc.c?ref=0bd83abd44afe09f841905c2b77e726eecfe016b", "patch": "@@ -1714,17 +1714,12 @@ block_alloc (b)\n \t  {\n \t    if (GET_CODE (qty_scratch_rtx[q]) == REG)\n \t      abort ();\n-\t    PUT_CODE (qty_scratch_rtx[q], REG);\n-\t    REGNO (qty_scratch_rtx[q]) = qty_phys_reg[q];\n+\n+\t    qty_scratch_rtx[q] = gen_rtx (REG, GET_MODE (qty_scratch_rtx[q]),\n+\t\t\t\t\t  qty_phys_reg[q]);\n \n \t    scratch_block[scratch_index] = b;\n \t    scratch_list[scratch_index++] = qty_scratch_rtx[q];\n-\n-\t    /* Must clear the USED field, because it will have been set by\n-\t       copy_rtx_if_shared, but the leaf_register code expects that\n-\t       it is zero in all REG rtx.  copy_rtx_if_shared does not set the\n-\t       used bit for REGs, but does for SCRATCHes.  */\n-\t    qty_scratch_rtx[q]->used = 0;\n \t  }\n       }\n }"}]}