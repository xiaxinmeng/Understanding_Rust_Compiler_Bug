{"sha": "858025041274c93ca54456cdf29caabd1c9fb342", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODU4MDI1MDQxMjc0YzkzY2E1NDQ1NmNkZjI5Y2FhYmQxYzlmYjM0Mg==", "commit": {"author": {"name": "Gunther Nikl", "email": "gni@gecko.de", "date": "2003-10-26T22:08:07Z"}, "committer": {"name": "Bernardo Innocenti", "email": "bernie@gcc.gnu.org", "date": "2003-10-26T22:08:07Z"}, "message": "m68k.c (m68k_compute_frame_layout): Swap reg_mask and reg_rev_mask computation.\n\n\t* config/m68k/m68k.c (m68k_compute_frame_layout): Swap reg_mask and\n\treg_rev_mask computation.\n\t(m68k_output_function_prologue): Fix usage of current_frame (one typo\n\tand one missing); use reg_rev_mask not reg_mask.\n\t(m68k_output_function_epilogue): Fix usage of current_frame;\n\tuse fpu_rev_mask not fpu_mask.\n\nFrom-SVN: r72964", "tree": {"sha": "81a6acc842e1c5ba68e2f20b80afcdd5d7ff4957", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81a6acc842e1c5ba68e2f20b80afcdd5d7ff4957"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/858025041274c93ca54456cdf29caabd1c9fb342", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/858025041274c93ca54456cdf29caabd1c9fb342", "html_url": "https://github.com/Rust-GCC/gccrs/commit/858025041274c93ca54456cdf29caabd1c9fb342", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/858025041274c93ca54456cdf29caabd1c9fb342/comments", "author": null, "committer": null, "parents": [{"sha": "a89e3f2128fe8977cb114403f8f6d4899d852a30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a89e3f2128fe8977cb114403f8f6d4899d852a30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a89e3f2128fe8977cb114403f8f6d4899d852a30"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "794acfd9c912d27d34c2849400f966c354bbf216", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/858025041274c93ca54456cdf29caabd1c9fb342/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/858025041274c93ca54456cdf29caabd1c9fb342/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=858025041274c93ca54456cdf29caabd1c9fb342", "patch": "@@ -1,3 +1,12 @@\n+2003-10-26  Gunther Nikl  <gni@gecko.de>\n+\n+\t* config/m68k/m68k.c (m68k_compute_frame_layout): Swap reg_mask and\n+\treg_rev_mask computation.\n+\t(m68k_output_function_prologue): Fix usage of current_frame (one typo\n+\tand one missing); use reg_rev_mask not reg_mask.\n+\t(m68k_output_function_epilogue): Fix usage of current_frame;\n+\tuse fpu_rev_mask not fpu_mask.\n+\n 2003-10-26  Bernardo Innocenti  <bernie@develer.com>\n \n \t* config/m68k/m68k.c (m68k_output_function_prologue): Eliminate"}, {"sha": "64c8c9c62dcc83e6d424a4644cdcebf04dc3ad17", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/858025041274c93ca54456cdf29caabd1c9fb342/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/858025041274c93ca54456cdf29caabd1c9fb342/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=858025041274c93ca54456cdf29caabd1c9fb342", "patch": "@@ -358,8 +358,8 @@ m68k_compute_frame_layout (void)\n       for (regno = 16; regno < 24; regno++)\n \tif (m68k_save_reg (regno, interrupt_handler))\n \t  {\n-\t    mask |= 1 << (23 - regno);\n-\t    rmask |= 1 << (regno - 16);\n+\t    mask |= 1 << (regno - 16);\n+\t    rmask |= 1 << (23 - regno);\n \t    saved++;\n \t  }\n       current_frame.foffset = saved * 12 /* (TARGET_CFV4E ? 8 : 12) */;\n@@ -610,7 +610,7 @@ m68k_output_function_prologue (FILE *stream, HOST_WIDE_INT size ATTRIBUTE_UNUSED\n #ifdef MOTOROLA\n \t  asm_fprintf (stream, \"\\tfmovm %I0x%x,-(%Rsp)\\n\", current_frame.fpu_mask);\n #else\n-\t  asm_fprintf (stream, \"\\tfmovem %I0x%x,%Rsp@-\\n\", current_frmae.fpu_mask);\n+\t  asm_fprintf (stream, \"\\tfmovem %I0x%x,%Rsp@-\\n\", current_frame.fpu_mask);\n #endif\n \t  if (dwarf2out_do_frame ())\n \t    {\n@@ -695,9 +695,9 @@ m68k_output_function_prologue (FILE *stream, HOST_WIDE_INT size ATTRIBUTE_UNUSED\n       else\n \t{\n #ifdef MOTOROLA\n-\t  asm_fprintf (stream, \"\\tmovm.l %I0x%x,-(%Rsp)\\n\", current_frame.reg_mask);\n+\t  asm_fprintf (stream, \"\\tmovm.l %I0x%x,-(%Rsp)\\n\", current_frame.reg_rev_mask);\n #else\n-\t  asm_fprintf (stream, \"\\tmoveml %I0x%x,%Rsp@-\\n\", current_frame.reg_mask);\n+\t  asm_fprintf (stream, \"\\tmoveml %I0x%x,%Rsp@-\\n\", current_frame.reg_rev_mask);\n #endif\n \t}\n       if (dwarf2out_do_frame ())\n@@ -922,7 +922,7 @@ m68k_output_function_epilogue (FILE *stream, HOST_WIDE_INT size ATTRIBUTE_UNUSED\n #else\n               asm_fprintf (stream, \"\\tmoveml %s@(-%wd),%I0x%x\\n\",\n                            reg_names[FRAME_POINTER_REGNUM],\n-                           offset + fsize,\n+                           current_frame.offset + fsize,\n \t\t\t   current_frame.reg_mask);\n #endif\n \t    }\n@@ -1001,7 +1001,7 @@ m68k_output_function_epilogue (FILE *stream, HOST_WIDE_INT size ATTRIBUTE_UNUSED\n \t  asm_fprintf (stream, \"\\tfmovm -%wd(%s),%I0x%x\\n\",\n \t\t       current_frame.foffset + fsize,\n \t\t       reg_names[FRAME_POINTER_REGNUM],\n-\t\t       current_frame.fpu_mask);\n+\t\t       current_frame.fpu_rev_mask);\n #else\n \t  asm_fprintf (stream, \"\\tfmovem %s@(-%wd),%I0x%x\\n\",\n \t\t       reg_names[FRAME_POINTER_REGNUM],"}]}