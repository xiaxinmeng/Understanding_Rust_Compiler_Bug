{"sha": "d409320ca8b8a9e121e56a636084604b6089ea60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQwOTMyMGNhOGI4YTllMTIxZTU2YTYzNjA4NDYwNGI2MDg5ZWE2MA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-08-31T19:00:59Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-08-31T19:00:59Z"}, "message": "re PR c/54428 (ICE in gimplify_expr, at gimplify.c:7591)\n\n\tPR c/54428\n\t* c-convert.c (convert): Don't call fold_convert_loc if\n\tTYPE_MAIN_VARIANT of a COMPLEX_TYPE is the same, unless e\n\tis a COMPLEX_EXPR.  Remove TYPE_MAIN_VARIANT check from\n\tCOMPLEX_TYPE -> COMPLEX_TYPE conversion.\n\n\t* gcc.c-torture/compile/pr54428.c: New test.\n\nFrom-SVN: r190840", "tree": {"sha": "a5737acf8dc02d85ba026d10d52d0c174a265645", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5737acf8dc02d85ba026d10d52d0c174a265645"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d409320ca8b8a9e121e56a636084604b6089ea60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d409320ca8b8a9e121e56a636084604b6089ea60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d409320ca8b8a9e121e56a636084604b6089ea60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d409320ca8b8a9e121e56a636084604b6089ea60/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2c84f67d8458beba886d3cf319327bf44060a9ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c84f67d8458beba886d3cf319327bf44060a9ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c84f67d8458beba886d3cf319327bf44060a9ad"}], "stats": {"total": 51, "additions": 37, "deletions": 14}, "files": [{"sha": "11f9be7b5359c1f117b2906eb98fcc980c695b1c", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=d409320ca8b8a9e121e56a636084604b6089ea60", "patch": "@@ -1,3 +1,11 @@\n+2012-08-31  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/54428\n+\t* c-convert.c (convert): Don't call fold_convert_loc if\n+\tTYPE_MAIN_VARIANT of a COMPLEX_TYPE is the same, unless e\n+\tis a COMPLEX_EXPR.  Remove TYPE_MAIN_VARIANT check from\n+\tCOMPLEX_TYPE -> COMPLEX_TYPE conversion.\n+\n 2012-08-24  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/54355"}, {"sha": "48d7375765302a32eb3c4656135848a0314de348", "filename": "gcc/c/c-convert.c", "status": "modified", "additions": 15, "deletions": 14, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Fc%2Fc-convert.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Fc%2Fc-convert.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-convert.c?ref=d409320ca8b8a9e121e56a636084604b6089ea60", "patch": "@@ -1,6 +1,6 @@\n /* Language-level data type conversion for GNU C.\n    Copyright (C) 1987, 1988, 1991, 1998, 2002, 2003, 2004, 2005, 2007, 2008,\n-   2009, 2010 Free Software Foundation, Inc.\n+   2009, 2010, 2011, 2012 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -92,7 +92,9 @@ convert (tree type, tree expr)\n \n   STRIP_TYPE_NOPS (e);\n \n-  if (TYPE_MAIN_VARIANT (type) == TYPE_MAIN_VARIANT (TREE_TYPE (expr)))\n+  if (TYPE_MAIN_VARIANT (type) == TYPE_MAIN_VARIANT (TREE_TYPE (expr))\n+      && (TREE_CODE (TREE_TYPE (expr)) != COMPLEX_TYPE\n+\t  || TREE_CODE (e) == COMPLEX_EXPR))\n     return fold_convert_loc (loc, type, expr);\n   if (TREE_CODE (TREE_TYPE (expr)) == ERROR_MARK)\n     return error_mark_node;\n@@ -135,24 +137,23 @@ convert (tree type, tree expr)\n \t but for the C FE c_save_expr needs to be called instead.  */\n       if (TREE_CODE (TREE_TYPE (e)) == COMPLEX_TYPE)\n \t{\n-\t  tree subtype = TREE_TYPE (type);\n-\t  tree elt_type = TREE_TYPE (TREE_TYPE (e));\n-\n-\t  if (TYPE_MAIN_VARIANT (elt_type) != TYPE_MAIN_VARIANT (subtype)\n-\t      && TREE_CODE (e) != COMPLEX_EXPR)\n+\t  if (TREE_CODE (e) != COMPLEX_EXPR)\n \t    {\n+\t      tree subtype = TREE_TYPE (type);\n+\t      tree elt_type = TREE_TYPE (TREE_TYPE (e));\n+\n \t      if (in_late_binary_op)\n \t\te = save_expr (e);\n \t      else\n \t\te = c_save_expr (e);\n \t      ret\n-\t\t= fold_build2 (COMPLEX_EXPR, type,\n-\t\t\t       convert (subtype,\n-\t\t\t\t\tfold_build1 (REALPART_EXPR,\n-\t\t\t\t\t\t     elt_type, e)),\n-\t\t\t       convert (subtype,\n-\t\t\t\t\tfold_build1 (IMAGPART_EXPR,\n-\t\t\t\t\t\t     elt_type, e)));\n+\t\t= fold_build2_loc (loc, COMPLEX_EXPR, type,\n+\t\t\t\t   convert (subtype,\n+\t\t\t\t\t    fold_build1 (REALPART_EXPR,\n+\t\t\t\t\t\t\t elt_type, e)),\n+\t\t\t\t   convert (subtype,\n+\t\t\t\t\t    fold_build1 (IMAGPART_EXPR,\n+\t\t\t\t\t\t\t elt_type, e)));\n \t      goto maybe_fold;\n \t    }\n \t}"}, {"sha": "685c60dc460621b23d2642fc39a759725036e3b6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d409320ca8b8a9e121e56a636084604b6089ea60", "patch": "@@ -1,3 +1,8 @@\n+2012-08-31  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/54428\n+\t* gcc.c-torture/compile/pr54428.c: New test.\n+\n 2012-08-31  Ollie Wild  <aaw@google.com>\n \n \tPR c++/54197"}, {"sha": "84a5dbd82bd7d758009c7ad47bcdac3c6d2e0498", "filename": "gcc/testsuite/gcc.c-torture/compile/pr54428.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr54428.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d409320ca8b8a9e121e56a636084604b6089ea60/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr54428.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr54428.c?ref=d409320ca8b8a9e121e56a636084604b6089ea60", "patch": "@@ -0,0 +1,9 @@\n+/* PR c/54428 */\n+\n+typedef double _Complex C;\n+\n+C\n+foo (C x, C y, double z, C w)\n+{\n+  return y - z * __builtin_cpow (x, 75) * w;\n+}"}]}