{"sha": "0cf17a80513e9b637e07a9fadc6717e67750ea53", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNmMTdhODA1MTNlOWI2MzdlMDdhOWZhZGM2NzE3ZTY3NzUwZWE1Mw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-11-27T04:07:48Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-11-27T04:07:48Z"}, "message": "Makefile.in: Rebuilt.\n\n\t* Makefile.in: Rebuilt.\n\t* Makefile.am (core_java_source_files): Added\n\tRuntimePermission.java.\n\t* java/lang/RuntimePermission.java: Imported from Classpath.\n\t* java/lang/Thread.java (getContextClassLoader): Now\n\tsynchronized.  Added security code.\n\t(setContextClassLoader): Likewise.\n\nFrom-SVN: r37772", "tree": {"sha": "55d0346a0f02ec766a2f9727307c6ef34124d6ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55d0346a0f02ec766a2f9727307c6ef34124d6ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0cf17a80513e9b637e07a9fadc6717e67750ea53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cf17a80513e9b637e07a9fadc6717e67750ea53", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cf17a80513e9b637e07a9fadc6717e67750ea53", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cf17a80513e9b637e07a9fadc6717e67750ea53/comments", "author": null, "committer": null, "parents": [{"sha": "2721806e9811dee451f847eba2e9655979ad4065", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2721806e9811dee451f847eba2e9655979ad4065", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2721806e9811dee451f847eba2e9655979ad4065"}], "stats": {"total": 278, "additions": 241, "deletions": 37}, "files": [{"sha": "27a30154729510c63e9b4a123cb5528350758cc1", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -1,5 +1,13 @@\n 2000-11-26  Tom Tromey  <tromey@cygnus.com>\n \n+\t* Makefile.in: Rebuilt.\n+\t* Makefile.am (core_java_source_files): Added\n+\tRuntimePermission.java.\n+\t* java/lang/RuntimePermission.java: Imported from Classpath.\n+\t* java/lang/Thread.java (getContextClassLoader): Now\n+\tsynchronized.  Added security code.\n+\t(setContextClassLoader): Likewise.\n+\n \t* prims.cc (_Jv_NewObjectArray): Use const_cast to initialize\n \tlength field of array.\n \t(_Jv_NewPrimArray): Likewise."}, {"sha": "70fe6e00ca516abccbe39015bb8bcd092b0b245d", "filename": "libjava/Makefile.am", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -816,6 +816,7 @@ java/lang/Process.java \\\n java/lang/Runnable.java\t\\\n java/lang/Runtime.java \\\n java/lang/RuntimeException.java\t\\\n+java/lang/RuntimePermission.java \\\n java/lang/SecurityException.java \\\n java/lang/SecurityManager.java \\\n java/lang/Short.java \\\n@@ -941,6 +942,7 @@ java/util/EventListener.java \\\n java/util/EventObject.java \\\n java/util/GregorianCalendar.java \\\n java/util/HashMap.java \\\n+java/util/HashSet.java \\\n java/util/Hashtable.java \\\n java/util/Iterator.java\t\\\n java/util/LinkedList.java \\\n@@ -968,6 +970,8 @@ java/util/TimeZone.java\t\\\n java/util/Timer.java \\\n java/util/TimerTask.java \\\n java/util/TooManyListenersException.java \\\n+java/util/TreeMap.java \\\n+java/util/TreeSet.java \\\n java/util/Vector.java\n \n "}, {"sha": "f325ee75dbfae6d1025103bba2edc6b1cccba7e1", "filename": "libjava/Makefile.in", "status": "modified", "additions": 52, "deletions": 30, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -120,29 +120,43 @@ here = @here@\n libgcj_basedir = @libgcj_basedir@\n \n AUTOMAKE_OPTIONS = foreign no-installinfo\n-@TESTSUBDIR_TRUE@SUBDIRS = @TESTSUBDIR_TRUE@$(DIRLTDL) testsuite gcj include\n-@TESTSUBDIR_FALSE@SUBDIRS = @TESTSUBDIR_FALSE@$(DIRLTDL) gcj include\n-@USE_LIBDIR_TRUE@toolexeclibdir = @USE_LIBDIR_TRUE@$(libdir)$(MULTISUBDIR)\n-@USE_LIBDIR_FALSE@toolexeclibdir = @USE_LIBDIR_FALSE@$(toolexecdir)/lib$(MULTISUBDIR)\n-@USE_LIBDIR_FALSE@toolexecdir = @USE_LIBDIR_FALSE@$(exec_prefix)/$(target_alias)\n-@NO_X_TRUE@cond_x_ltlibrary = \n-@NO_X_FALSE@cond_x_ltlibrary = @NO_X_FALSE@libgcjx.la\n+@TESTSUBDIR_TRUE@SUBDIRS = \\\n+@TESTSUBDIR_TRUE@$(DIRLTDL) testsuite gcj include\n+@TESTSUBDIR_FALSE@SUBDIRS = \\\n+@TESTSUBDIR_FALSE@$(DIRLTDL) gcj include\n+@USE_LIBDIR_TRUE@toolexeclibdir = \\\n+@USE_LIBDIR_TRUE@$(libdir)$(MULTISUBDIR)\n+@USE_LIBDIR_FALSE@toolexeclibdir = \\\n+@USE_LIBDIR_FALSE@$(toolexecdir)/lib$(MULTISUBDIR)\n+@USE_LIBDIR_FALSE@toolexecdir = \\\n+@USE_LIBDIR_FALSE@$(exec_prefix)/$(target_alias)\n+@NO_X_TRUE@cond_x_ltlibrary = \\\n+@NO_X_FALSE@cond_x_ltlibrary = \\\n+@NO_X_FALSE@libgcjx.la\n \n toolexeclib_LTLIBRARIES = libgcj.la $(cond_x_ltlibrary)\n toolexeclib_DATA = libgcj.spec\n data_DATA = libgcj.zip\n \n-@NEEDS_DATA_START_TRUE@toolexeclib_LIBRARIES = @NEEDS_DATA_START_TRUE@libgcjdata.a\n-@NEEDS_DATA_START_TRUE@libgcjdata_a_SOURCES = @NEEDS_DATA_START_TRUE@libgcjdata.c\n+@NEEDS_DATA_START_TRUE@toolexeclib_LIBRARIES = \\\n+@NEEDS_DATA_START_TRUE@libgcjdata.a\n+@NEEDS_DATA_START_TRUE@libgcjdata_a_SOURCES = \\\n+@NEEDS_DATA_START_TRUE@libgcjdata.c\n \n-@NATIVE_TRUE@bin_PROGRAMS = @NATIVE_TRUE@jv-convert gij\n+@NATIVE_TRUE@bin_PROGRAMS = \\\n+@NATIVE_TRUE@jv-convert gij\n \n bin_SCRIPTS = addr2name.awk\n-@CANADIAN_TRUE@@NULL_TARGET_TRUE@ZIP = @CANADIAN_TRUE@@NULL_TARGET_TRUE@$(MULTIBUILDTOP)../$(COMPPATH)/zip/zip$(EXEEXT)\n-@CANADIAN_TRUE@@NULL_TARGET_FALSE@ZIP = @CANADIAN_TRUE@@NULL_TARGET_FALSE@zip\n-@CANADIAN_FALSE@ZIP = @CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/zip/zip$(EXEEXT)\n-@CANADIAN_TRUE@GCJH = @CANADIAN_TRUE@gcjh\n-@CANADIAN_FALSE@GCJH = @CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/gcc/gcjh$(EXEEXT)\n+@CANADIAN_TRUE@@NULL_TARGET_TRUE@ZIP = \\\n+@CANADIAN_TRUE@@NULL_TARGET_TRUE@$(MULTIBUILDTOP)../$(COMPPATH)/zip/zip$(EXEEXT)\n+@CANADIAN_TRUE@@NULL_TARGET_FALSE@ZIP = \\\n+@CANADIAN_TRUE@@NULL_TARGET_FALSE@zip\n+@CANADIAN_FALSE@ZIP = \\\n+@CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/zip/zip$(EXEEXT)\n+@CANADIAN_TRUE@GCJH = \\\n+@CANADIAN_TRUE@gcjh\n+@CANADIAN_FALSE@GCJH = \\\n+@CANADIAN_FALSE@$(MULTIBUILDTOP)../$(COMPPATH)/gcc/gcjh$(EXEEXT)\n \n GCJCOMPILE = $(LIBTOOL) --tag=GCJ --mode=compile $(GCJ) -fassume-compiled -fclasspath=$(here) -L$(here) $(JC1FLAGS) -MD -MT $@ -MF $(@:.lo=.d) -c\n GCJLINK = $(LIBTOOL) --mode=link $(GCJ) -L$(here) $(JC1FLAGS) $(LDFLAGS) -o $@\n@@ -157,8 +171,10 @@ AM_CXXFLAGS = -fno-rtti -fvtable-thunks -fasynchronous-exceptions \\\n \t-fdollars-in-identifiers \\\n \t@LIBGCJ_CXXFLAGS@ @EXCEPTIONSPEC@ @X_CFLAGS@ $(WARNINGS) -D_GNU_SOURCE\n \n-@USING_GCC_TRUE@AM_CFLAGS = @USING_GCC_TRUE@@LIBGCJ_CFLAGS@ $(WARNINGS)\n-@USING_GCC_FALSE@AM_CFLAGS = @USING_GCC_FALSE@@LIBGCJ_CFLAGS@\n+@USING_GCC_TRUE@AM_CFLAGS = \\\n+@USING_GCC_TRUE@@LIBGCJ_CFLAGS@ $(WARNINGS)\n+@USING_GCC_FALSE@AM_CFLAGS = \\\n+@USING_GCC_FALSE@@LIBGCJ_CFLAGS@\n \n JCFLAGS = -g\n JC1FLAGS = -g @LIBGCJ_JAVAFLAGS@\n@@ -225,7 +241,8 @@ extra_headers = java/lang/Object.h java/lang/Class.h\n \n NM = nm\n \n-@NATIVE_TRUE@@MAINTAINER_MODE_TRUE@noinst_PROGRAMS = @NATIVE_TRUE@@MAINTAINER_MODE_TRUE@gen-from-JIS\n+@NATIVE_TRUE@@MAINTAINER_MODE_TRUE@noinst_PROGRAMS = \\\n+@NATIVE_TRUE@@MAINTAINER_MODE_TRUE@gen-from-JIS\n \n CONVERT_DIR = gnu/gcj/convert\n \n@@ -567,6 +584,7 @@ java/lang/Process.java \\\n java/lang/Runnable.java\t\\\n java/lang/Runtime.java \\\n java/lang/RuntimeException.java\t\\\n+java/lang/RuntimePermission.java \\\n java/lang/SecurityException.java \\\n java/lang/SecurityManager.java \\\n java/lang/Short.java \\\n@@ -692,6 +710,7 @@ java/util/EventListener.java \\\n java/util/EventObject.java \\\n java/util/GregorianCalendar.java \\\n java/util/HashMap.java \\\n+java/util/HashSet.java \\\n java/util/Hashtable.java \\\n java/util/Iterator.java\t\\\n java/util/LinkedList.java \\\n@@ -719,6 +738,8 @@ java/util/TimeZone.java\t\\\n java/util/Timer.java \\\n java/util/TimerTask.java \\\n java/util/TooManyListenersException.java \\\n+java/util/TreeMap.java \\\n+java/util/TreeSet.java \\\n java/util/Vector.java\n \n \n@@ -1167,7 +1188,7 @@ libgcj-test.spec.in libgcj.spec.in\n \n DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)\n \n-TAR = gtar\n+TAR = tar\n GZIP_ENV = --best\n DIST_SUBDIRS =  @DIRLTDL@ testsuite gcj include @DIRLTDL@ gcj include\n DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n@@ -1497,10 +1518,10 @@ DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n .deps/java/lang/NumberFormatException.P .deps/java/lang/Object.P \\\n .deps/java/lang/OutOfMemoryError.P .deps/java/lang/Process.P \\\n .deps/java/lang/Runnable.P .deps/java/lang/Runtime.P \\\n-.deps/java/lang/RuntimeException.P .deps/java/lang/SecurityException.P \\\n-.deps/java/lang/SecurityManager.P .deps/java/lang/Short.P \\\n-.deps/java/lang/StackOverflowError.P .deps/java/lang/String.P \\\n-.deps/java/lang/StringBuffer.P \\\n+.deps/java/lang/RuntimeException.P .deps/java/lang/RuntimePermission.P \\\n+.deps/java/lang/SecurityException.P .deps/java/lang/SecurityManager.P \\\n+.deps/java/lang/Short.P .deps/java/lang/StackOverflowError.P \\\n+.deps/java/lang/String.P .deps/java/lang/StringBuffer.P \\\n .deps/java/lang/StringIndexOutOfBoundsException.P \\\n .deps/java/lang/System.P .deps/java/lang/Thread.P \\\n .deps/java/lang/ThreadDeath.P .deps/java/lang/ThreadGroup.P \\\n@@ -1647,11 +1668,11 @@ DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n .deps/java/util/EmptyStackException.P .deps/java/util/Enumeration.P \\\n .deps/java/util/EventListener.P .deps/java/util/EventObject.P \\\n .deps/java/util/GregorianCalendar.P .deps/java/util/HashMap.P \\\n-.deps/java/util/Hashtable.P .deps/java/util/Iterator.P \\\n-.deps/java/util/LinkedList.P .deps/java/util/List.P \\\n-.deps/java/util/ListIterator.P .deps/java/util/ListResourceBundle.P \\\n-.deps/java/util/Locale.P .deps/java/util/Map.P \\\n-.deps/java/util/MissingResourceException.P \\\n+.deps/java/util/HashSet.P .deps/java/util/Hashtable.P \\\n+.deps/java/util/Iterator.P .deps/java/util/LinkedList.P \\\n+.deps/java/util/List.P .deps/java/util/ListIterator.P \\\n+.deps/java/util/ListResourceBundle.P .deps/java/util/Locale.P \\\n+.deps/java/util/Map.P .deps/java/util/MissingResourceException.P \\\n .deps/java/util/NoSuchElementException.P .deps/java/util/Observable.P \\\n .deps/java/util/Observer.P .deps/java/util/Properties.P \\\n .deps/java/util/PropertyPermission.P \\\n@@ -1661,7 +1682,8 @@ DEP_FILES =  .deps/$(srcdir)/$(CONVERT_DIR)/gen-from-JIS.P \\\n .deps/java/util/SortedSet.P .deps/java/util/Stack.P \\\n .deps/java/util/StringTokenizer.P .deps/java/util/TimeZone.P \\\n .deps/java/util/Timer.P .deps/java/util/TimerTask.P \\\n-.deps/java/util/TooManyListenersException.P .deps/java/util/Vector.P \\\n+.deps/java/util/TooManyListenersException.P .deps/java/util/TreeMap.P \\\n+.deps/java/util/TreeSet.P .deps/java/util/Vector.P \\\n .deps/java/util/jar/Attributes.P .deps/java/util/jar/JarEntry.P \\\n .deps/java/util/jar/JarException.P .deps/java/util/jar/JarFile.P \\\n .deps/java/util/jar/JarInputStream.P \\\n@@ -2058,7 +2080,7 @@ distdir: $(DISTFILES)\n \t@for file in $(DISTFILES); do \\\n \t  d=$(srcdir); \\\n \t  if test -d $$d/$$file; then \\\n-\t    cp -pr $$d/$$file $(distdir)/$$file; \\\n+\t    cp -pr $$/$$file $(distdir)/$$file; \\\n \t  else \\\n \t    test -f $(distdir)/$$file \\\n \t    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \\"}, {"sha": "b2ffae0594d3aa5fa65e9289f522c147ab0a267b", "filename": "libjava/gcj/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fgcj%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fgcj%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgcj%2FMakefile.in?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -88,6 +88,7 @@ GCTESTSPEC = @GCTESTSPEC@\n INCLTDL = @INCLTDL@\n JC1GCSPEC = @JC1GCSPEC@\n LIBDATASTARTSPEC = @LIBDATASTARTSPEC@\n+LIBGCJDEBUG = @LIBGCJDEBUG@\n LIBGCJTESTSPEC = @LIBGCJTESTSPEC@\n LIBGCJ_CFLAGS = @LIBGCJ_CFLAGS@\n LIBGCJ_CXXFLAGS = @LIBGCJ_CXXFLAGS@"}, {"sha": "021c1efa6321fcf1e9e09b2b96e59158bfeaf62a", "filename": "libjava/include/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2FMakefile.in?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -88,6 +88,7 @@ GCTESTSPEC = @GCTESTSPEC@\n INCLTDL = @INCLTDL@\n JC1GCSPEC = @JC1GCSPEC@\n LIBDATASTARTSPEC = @LIBDATASTARTSPEC@\n+LIBGCJDEBUG = @LIBGCJDEBUG@\n LIBGCJTESTSPEC = @LIBGCJTESTSPEC@\n LIBGCJ_CFLAGS = @LIBGCJ_CFLAGS@\n LIBGCJ_CXXFLAGS = @LIBGCJ_CXXFLAGS@"}, {"sha": "402e81248642b0818d7901a9d0f0fffd656ac785", "filename": "libjava/java/lang/ClassLoader.java", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fjava%2Flang%2FClassLoader.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fjava%2Flang%2FClassLoader.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClassLoader.java?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -426,4 +426,3 @@ protected Enumeration findResources (String name) throws IOException\n     return null;\n   }\n }\n-"}, {"sha": "40b3da2c3c2d5daefe2aadacf33ff5260776e304", "filename": "libjava/java/lang/RuntimePermission.java", "status": "added", "additions": 153, "deletions": 0, "changes": 153, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fjava%2Flang%2FRuntimePermission.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fjava%2Flang%2FRuntimePermission.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FRuntimePermission.java?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -0,0 +1,153 @@\n+/* RuntimePermission.java\n+   Copyright (C) 1998 Free Software Foundation, Inc.\n+\n+This file is part of GNU Classpath.\n+\n+GNU Classpath is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+ \n+GNU Classpath is distributed in the hope that it will be useful, but\n+WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU Classpath; see the file COPYING.  If not, write to the\n+Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA\n+02111-1307 USA.\n+\n+As a special exception, if you link this library with other files to\n+produce an executable, this library does not by itself cause the\n+resulting executable to be covered by the GNU General Public License.\n+This exception does not however invalidate any other reasons why the\n+executable file might be covered by the GNU General Public License. */\n+\n+\n+package java.lang;\n+\n+import java.security.*;\n+\n+/**\n+ * A <code>RuntimePermission</code> contains a permission name, but no\n+ * actions list.  This means you either have the permission or you don't.\n+ *\n+ * Permission names have the follow the hierarchial property naming\n+ * convention.  In addition, an asterisk may appear at the end of a \n+ * name if following a period or by itself.\n+ *\n+ * <table border=1>\n+ * <tr><th>Valid names</th><th>Invalid names</th></tr>\n+ * <tr><td>\"accessClassInPackage.*\",\"*\"</td>\n+ * <td>\"**\", \"*x\", \"*.a\"</td></tr>\n+ * </table>\n+ * <br> \n+ * \n+ * The following table provides a list of all the possible RuntimePermission\n+ * permission names with a description of what that permission allows.\n+ * <br>\n+ * <table border=1>\n+ * <tr><th>Permission Name</th><th>Permission Allows</th></tr>\n+ * <tr>\n+ *   <td><code>createClassLoader</code></td>\n+ *   <td>creation of a class loader</td></tr>\n+ * <tr>\n+ *   <td><code>getClassLoader</code></td>\n+ *   <td>retrieval of the class loader for the calling class</td></tr>\n+ * <tr>\n+ *   <td><code>setContextClassLoader</code></td>\n+ *   <td>allows the setting of the context class loader used by a \n+ *       thread including system threads</td></tr>\n+ * <tr>\n+ *   <td><code>setSecurityManager</code></td>\n+ *   <td>allows the application to replace the security manager with\n+ *       another, possibly less restrictive one.</td></tr>\n+ * <tr>\n+ *   <td><code>createSecurityManager</code></td>\n+ *   <td>allows the application to create a new security manager</td></tr>\n+ * <tr>\n+ *   <td><code>exitVM</code></td>\n+ *   <td>allows the application to halt the virtual machine</td></tr>\n+ * <tr>\n+ *   <td><code>setFactory</code></td>\n+ *   <td>allows the application to set the socket factory for socket, \n+ *       server socket, stream handler, or RMI socket factory.</td></tr>\n+ * <tr>\n+ *   <td><code>setIO</code></td>\n+ *   <td>allows the application to set System.out, System.in, and \n+ *       System.err</td></tr>\n+ * <tr>\n+ *   <td><code>modifyThread</code></td>\n+ *   <td>allows the application to modify any thread in the virtual machine\n+ *       using any of the methods <code>stop</code>, <code>resume</code>,\n+ *       <code>suspend</code>, <code>setPriority</code>, and \n+ *       <code>setName</code> of classs <code>Thread</code></td></tr>\n+ * <tr>\n+ *   <td><code>stopThread</code></td>\n+ *   <td>allows the application to <code>stop</code> any thread it has\n+ *       access to in the system</td></tr>\n+ * <tr>\n+ *   <td><code>modifyThreadGroup</td>\n+ *   <td>allows the application to modify thread groups using any of the\n+ *       methods <code>destroy</code>, <code>resume</code>, \n+ *       <code>setDaemon</code>, <code>setMaxPriority</code>, \n+ *       <code>stop</code>, and <code>suspend</code> of the class\n+ *       <code>ThreadGroup</code></td></tr>\n+ * <tr>\n+ *   <td><code>getProtectionDomain</code></td>\n+ *   <td></td></tr>\n+ * <tr>\n+ *   <td><code>readFileDescriptor</code></td>\n+ *   <td></td></tr>\n+ * <tr>\n+ *   <td><code>writeFileDescriptor</code</td>\n+ *   <td></td></tr>\n+ * <tr>\n+ *   <td><code>loadLibrary.{library name}</code></td>\n+ *   <td></td></tr>\n+ * <tr>\n+ *   <td><code>accessClassInPackage.{package name}</code></td>\n+ *   <td></td></tr>\n+ * <tr>\n+ *   <td><code>defineClassInPackage.{package name}</code></td>\n+ *   <td></td></tr>\n+ * <tr>\n+ *   <td><code>accessDeclaredMembers</code></td>\n+ *   <td></td></tr>\n+ * <tr>\n+ *   <td><code>queuePrintJob</code></td>\n+ *   <td></td></tr>\n+ * </table>\n+ * \n+ * @since JDK 1.2\n+ * \n+ * @author Brian Jones\n+ */\n+public class RuntimePermission extends java.security.BasicPermission\n+{\n+  /**\n+   * \n+   * @param permissionName the name of the granted permission\n+   * \n+   * @throws IllegalArgumentException thrown if the name contains an invalid \n+   * wildcard character\n+   */\n+  public RuntimePermission(String permissionName)\n+    {\n+      this(permissionName, null);\n+    }\n+\n+  /**\n+   *\n+   * @param permissionName the name of the granted permission\n+   * @param actions this should always be null\n+   * \n+   * @throws IllegalArgumentException throw if the name contains an invalid\n+   * wildcard character\n+   */\n+  public RuntimePermission(String permissionName, String actions)\n+    {\n+      super(permissionName, actions);\n+    }\n+}"}, {"sha": "12c7eb6cb45da7ea675c87906db6ee6c3be141dc", "filename": "libjava/java/lang/Thread.java", "status": "modified", "additions": 22, "deletions": 6, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fjava%2Flang%2FThread.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cf17a80513e9b637e07a9fadc6717e67750ea53/libjava%2Fjava%2Flang%2FThread.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FThread.java?ref=0cf17a80513e9b637e07a9fadc6717e67750ea53", "patch": "@@ -145,21 +145,37 @@ public final void setDaemon (boolean status)\n     daemon_flag = status;\n   }\n \n-  public ClassLoader getContextClassLoader()\n+  public synchronized ClassLoader getContextClassLoader()\n   {\n     if (context_class_loader == null)\n+      context_class_loader = ClassLoader.getSystemClassLoader ();\n+\n+    SecurityManager s = System.getSecurityManager();\n+    // FIXME: we can't currently find the caller's class loader.\n+    ClassLoader callers = null;\n+    if (s != null && callers != null)\n       {\n-\tcontext_class_loader = ClassLoader.getSystemClassLoader ();\n-\treturn context_class_loader;\n+\t// See if the caller's class loader is the same as or an\n+\t// ancestor of this thread's class loader.\n+\twhile (callers != null && callers != context_class_loader)\n+\t  {\n+\t    // FIXME: should use some internal version of getParent\n+\t    // that avoids security checks.\n+\t    callers = callers.getParent ();\n+\t  }\n+\n+\tif (callers != context_class_loader)\n+\t  s.checkPermission (new RuntimePermission (\"getClassLoader\"));\n       }\n \n-    // FIXME: Add security manager stuff here.\n     return context_class_loader;\n   }\n \n-  public void setContextClassLoader(ClassLoader cl)\n+  public synchronized void setContextClassLoader(ClassLoader cl)\n   {\n-    // FIXME: Add security manager stuff here.\n+    SecurityManager s = System.getSecurityManager ();\n+    if (s != null)\n+      s.checkPermission (new RuntimePermission (\"setContextClassLoader\"));\n     context_class_loader = cl;\n   }\n "}]}