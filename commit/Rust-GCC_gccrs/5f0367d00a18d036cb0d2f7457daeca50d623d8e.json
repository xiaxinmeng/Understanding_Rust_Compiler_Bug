{"sha": "5f0367d00a18d036cb0d2f7457daeca50d623d8e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWYwMzY3ZDAwYTE4ZDAzNmNiMGQyZjc0NTdkYWVjYTUwZDYyM2Q4ZQ==", "commit": {"author": {"name": "Francois-Xavier Coudert", "email": "fxcoudert@gcc.gnu.org", "date": "2018-02-11T18:55:31Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-02-11T18:55:31Z"}, "message": "re PR fortran/35299 (scope of variables in statement function do not acquire rank from host)\n\n2018-02-11  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n\n\tPR fortran/35299\n\t* gfortran.dg/statement_function_3.f: New test.\n\n2018-02-11  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n\n\tPR fortran/35299\n\t* resolve.c (resolve_formal_arglist): Update error message.\n\nFrom-SVN: r257566", "tree": {"sha": "5929bf0e124a5148647e3befcef5001fd8ef5a0c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5929bf0e124a5148647e3befcef5001fd8ef5a0c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f0367d00a18d036cb0d2f7457daeca50d623d8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f0367d00a18d036cb0d2f7457daeca50d623d8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f0367d00a18d036cb0d2f7457daeca50d623d8e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f0367d00a18d036cb0d2f7457daeca50d623d8e/comments", "author": {"login": "fxcoudert", "id": 1980544, "node_id": "MDQ6VXNlcjE5ODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1980544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxcoudert", "html_url": "https://github.com/fxcoudert", "followers_url": "https://api.github.com/users/fxcoudert/followers", "following_url": "https://api.github.com/users/fxcoudert/following{/other_user}", "gists_url": "https://api.github.com/users/fxcoudert/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxcoudert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxcoudert/subscriptions", "organizations_url": "https://api.github.com/users/fxcoudert/orgs", "repos_url": "https://api.github.com/users/fxcoudert/repos", "events_url": "https://api.github.com/users/fxcoudert/events{/privacy}", "received_events_url": "https://api.github.com/users/fxcoudert/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f3883269c3dd4528cb089c640edb35029b1398a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3883269c3dd4528cb089c640edb35029b1398a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3883269c3dd4528cb089c640edb35029b1398a0"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "429c1c481cafae082540912ecb30224f628a5a92", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f0367d00a18d036cb0d2f7457daeca50d623d8e/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f0367d00a18d036cb0d2f7457daeca50d623d8e/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=5f0367d00a18d036cb0d2f7457daeca50d623d8e", "patch": "@@ -512,8 +512,11 @@ resolve_formal_arglist (gfc_symbol *proc)\n \t{\n \t  if (sym->as != NULL)\n \t    {\n-\t      gfc_error (\"Argument %qs of statement function at %L must \"\n-\t\t\t \"be scalar\", sym->name, &sym->declared_at);\n+\t      /* F03:C1263 (R1238) The function-name and each dummy-arg-name\n+\t\t shall be specified, explicitly or implicitly, to be scalar.  */\n+\t      gfc_error (\"Argument '%s' of statement function '%s' at %L \"\n+\t\t\t \"must be scalar\", sym->name, proc->name,\n+\t\t\t &proc->declared_at);\n \t      continue;\n \t    }\n "}, {"sha": "dcfb3e2b9dc1551a6a4256da3024f02aeb5e2057", "filename": "gcc/testsuite/gfortran.dg/statement_function_3.f", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f0367d00a18d036cb0d2f7457daeca50d623d8e/gcc%2Ftestsuite%2Fgfortran.dg%2Fstatement_function_3.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f0367d00a18d036cb0d2f7457daeca50d623d8e/gcc%2Ftestsuite%2Fgfortran.dg%2Fstatement_function_3.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fstatement_function_3.f?ref=5f0367d00a18d036cb0d2f7457daeca50d623d8e", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do compile }\n+! PR fortran/35299\n+      subroutine phtod(e,n,i,h)\n+      dimension e(n)\n+      hstar(e,b)=b**.4*((1.25*fun(-e/40)+.18)) ! { dg-error \"must be scalar\" }\n+      a = 1.\n+      h = hstar(e(i-1), a)\n+      end\n+\n+      function fun(a)\n+         real a(*)\n+         fun = 42\n+      end\n+! { dg-prune-output \" Obsolescent feature\" }\n+"}]}