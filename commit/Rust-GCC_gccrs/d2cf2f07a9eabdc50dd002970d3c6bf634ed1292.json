{"sha": "d2cf2f07a9eabdc50dd002970d3c6bf634ed1292", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDJjZjJmMDdhOWVhYmRjNTBkZDAwMjk3MGQzYzZiZjYzNGVkMTI5Mg==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2008-11-12T16:35:03Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2008-11-12T16:35:03Z"}, "message": "cond.md (cond_to_int peephole2): Don't eliminate the insns if the intermediate value will be used later.\n\n* config/m32c/cond.md (cond_to_int peephole2): Don't eliminate the\ninsns if the intermediate value will be used later.\n\nFrom-SVN: r141788", "tree": {"sha": "ece9aebff8260ed974540a05a22b91fa32dc6079", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ece9aebff8260ed974540a05a22b91fa32dc6079"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292/comments", "author": null, "committer": null, "parents": [{"sha": "429ce9927e78f2dab7393a739ecb193815b0b188", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/429ce9927e78f2dab7393a739ecb193815b0b188", "html_url": "https://github.com/Rust-GCC/gccrs/commit/429ce9927e78f2dab7393a739ecb193815b0b188"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "dcfedb13cd52efe284b90d26c658cc2f0b3f70f5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d2cf2f07a9eabdc50dd002970d3c6bf634ed1292", "patch": "@@ -1,3 +1,8 @@\n+2008-11-12  DJ Delorie  <dj@redhat.com>\n+\n+\t* config/m32c/cond.md (cond_to_int peephole2): Don't eliminate the\n+\tinsns if the intermediate value will be used later.\n+\n 2008-11-12  Andreas Schwab  <schwab@suse.de>\n \n \t* config/m68k/m68k.c (print_operand): Mask off extra extension"}, {"sha": "a64d3cafcc682ecb6250996670f87cf16c4317a3", "filename": "gcc/config/m32c/cond.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292/gcc%2Fconfig%2Fm32c%2Fcond.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2cf2f07a9eabdc50dd002970d3c6bf634ed1292/gcc%2Fconfig%2Fm32c%2Fcond.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fcond.md?ref=d2cf2f07a9eabdc50dd002970d3c6bf634ed1292", "patch": "@@ -300,7 +300,9 @@\n   [(set_attr \"flags\" \"x\")]\n   )  \n \n-;; A cond_to_int followed by a compare against zero is essentially a no-op.\n+;; A cond_to_int followed by a compare against zero is essentially a\n+;; no-op.  However, the result of the cond_to_int may be used by later\n+;; insns, so make sure it's dead before deleting its set.\n \n (define_peephole2\n   [(set (match_operand:HI 0 \"mra_qi_operand\" \"\")\n@@ -313,6 +315,7 @@\n \t(compare (match_operand:HI 1 \"mra_qi_operand\" \"\")\n \t\t (const_int 0)))\n    ]\n-  \"rtx_equal_p(operands[0], operands[1])\"\n+  \"rtx_equal_p (operands[0], operands[1])\n+     && dead_or_set_p (peep2_next_insn (1), operands[0])\"\n   [(const_int 1)]\n   \"\")"}]}