{"sha": "8fbd2dc7cbb6cd07133124ff9430a047f28f848b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGZiZDJkYzdjYmI2Y2QwNzEzMzEyNGZmOTQzMGEwNDdmMjhmODQ4Yg==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@cygnus.com", "date": "1997-11-26T23:16:39Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1997-11-26T23:16:39Z"}, "message": "Fix -msdata=sysv and pass -dynamic-linker if not already passed\n\nFrom-SVN: r16768", "tree": {"sha": "4532929fc0c5bc2325549ec6dd90e54bfaca32d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4532929fc0c5bc2325549ec6dd90e54bfaca32d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8fbd2dc7cbb6cd07133124ff9430a047f28f848b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fbd2dc7cbb6cd07133124ff9430a047f28f848b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fbd2dc7cbb6cd07133124ff9430a047f28f848b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fbd2dc7cbb6cd07133124ff9430a047f28f848b/comments", "author": null, "committer": null, "parents": [{"sha": "a226df468638df96fa2ebf5274f266b2a9cbcec7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a226df468638df96fa2ebf5274f266b2a9cbcec7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a226df468638df96fa2ebf5274f266b2a9cbcec7"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "1920597e6ba3d30ca8836a1a499e3ba15b8b87eb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fbd2dc7cbb6cd07133124ff9430a047f28f848b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fbd2dc7cbb6cd07133124ff9430a047f28f848b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8fbd2dc7cbb6cd07133124ff9430a047f28f848b", "patch": "@@ -1,5 +1,13 @@\n Wed Nov 26 15:47:30 1997  Michael Meissner  <meissner@cygnus.com>\n \n+\t* rs6000.c (SMALL_DATA_REG): Register to use for small data relocs.\n+\t(print_operand): Use SMALL_DATA_REG for the register involved in\n+\tsmall data relocations.\n+\t(print_operand_address): Ditto.\n+\n+\t* rs6000/linux.h (LINK_SPEC): Pass -dynamic-linker /lib/ld.so.1 if\n+\t-dynamic linker is not used.\n+\n \t* rs6000.md (call insns): For local calls, use @local suffix under\n \tSystem V.  Don't use @plt under Solaris.\n "}, {"sha": "0632dce365573d08a03a507fe1a22a5c1ed6db2a", "filename": "gcc/config/rs6000/linux.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fbd2dc7cbb6cd07133124ff9430a047f28f848b/gcc%2Fconfig%2Frs6000%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fbd2dc7cbb6cd07133124ff9430a047f28f848b/gcc%2Fconfig%2Frs6000%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux.h?ref=8fbd2dc7cbb6cd07133124ff9430a047f28f848b", "patch": "@@ -28,7 +28,9 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #undef LINK_SPEC\n #define LINK_SPEC \"-m elf32ppc %{shared:-shared} \\\n   %{!shared: \\\n-    %{!static: %{rdynamic:-export-dynamic}} \\\n+    %{!static: \\\n+      %{rdynamic:-export-dynamic} \\\n+      %{!dynamic-linker:-dynamic-linker /lib/ld.so.1}} \\\n     %{static:-static}}\"\n \n #undef\tLIB_DEFAULT_SPEC"}, {"sha": "a39b94132be78f26074f70c6ec4733248d0954f9", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fbd2dc7cbb6cd07133124ff9430a047f28f848b/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fbd2dc7cbb6cd07133124ff9430a047f28f848b/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=8fbd2dc7cbb6cd07133124ff9430a047f28f848b", "patch": "@@ -2342,8 +2342,10 @@ rs6000_init_expanders ()\n \n #if TARGET_ELF\n #define SMALL_DATA_RELOC ((rs6000_sdata == SDATA_EABI) ? \"sda21\" : \"sdarel\")\n+#define SMALL_DATA_REG ((rs6000_sdata == SDATA_EABI) ? 0 : 13)\n #else\n #define SMALL_DATA_RELOC \"sda21\"\n+#define SMALL_DATA_REG 0\n #endif\n \n void\n@@ -2542,7 +2544,8 @@ print_operand (file, x, code)\n \t  else\n \t    output_address (plus_constant (XEXP (x, 0), 4));\n \t  if (small_data_operand (x, GET_MODE (x)))\n-\t    fprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC, reg_names[0]);\n+\t    fprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC,\n+\t\t     reg_names[SMALL_DATA_REG]);\n \t}\n       return;\n \t\t\t    \n@@ -2770,7 +2773,8 @@ print_operand (file, x, code)\n \t  else\n \t    output_address (plus_constant (XEXP (x, 0), 8));\n \t  if (small_data_operand (x, GET_MODE (x)))\n-\t    fprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC, reg_names[0]);\n+\t    fprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC,\n+\t\t     reg_names[SMALL_DATA_REG]);\n \t}\n       return;\n \t\t\t    \n@@ -2819,7 +2823,8 @@ print_operand (file, x, code)\n \t  else\n \t    output_address (plus_constant (XEXP (x, 0), 12));\n \t  if (small_data_operand (x, GET_MODE (x)))\n-\t    fprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC, reg_names[0]);\n+\t    fprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC,\n+\t\t     reg_names[SMALL_DATA_REG]);\n \t}\n       return;\n \t\t\t    \n@@ -2861,7 +2866,8 @@ print_operand_address (file, x)\n     {\n       output_addr_const (file, x);\n       if (small_data_operand (x, GET_MODE (x)))\n-\tfprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC, reg_names[0]);\n+\tfprintf (file, \"@%s(%s)\", SMALL_DATA_RELOC,\n+\t\t reg_names[SMALL_DATA_REG]);\n \n #ifdef TARGET_NO_TOC\n       else if (TARGET_NO_TOC)"}]}