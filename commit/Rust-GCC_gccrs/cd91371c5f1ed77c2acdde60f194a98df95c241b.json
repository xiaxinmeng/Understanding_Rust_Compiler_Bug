{"sha": "cd91371c5f1ed77c2acdde60f194a98df95c241b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Q5MTM3MWM1ZjFlZDc3YzJhY2RkZTYwZjE5NGE5OGRmOTVjMjQxYg==", "commit": {"author": {"name": "Ilya Tocar", "email": "ilya.tocar@intel.com", "date": "2014-09-30T16:04:15Z"}, "committer": {"name": "Ilya Tocar", "email": "tocarip@gcc.gnu.org", "date": "2014-09-30T16:04:15Z"}, "message": "re PR target/62120 ([ICE] ADDITIONAL_REGISTER_NAMES for [YZ]MMs, regno>8 should be disable in 32-bit)\n\nFix PR 62120.\n\ngcc/\n2014-09-30  Ilya Tocar  <ilya.tocar@intel.com>\n\n       PR middle-end/62120\n       * varasm.c (decode_reg_name_and_count): Check availability for\n       registers from ADDITIONAL_REGISTER_NAMES.\n\ntestsuite/\n2014-09-30  Ilya Tocar  <ilya.tocar@intel.com>\n\n       PR middle-end/62120\n       * gcc.target/i386/avx512f-additional-reg-names.c: Use register valid\n       in 32-bit mode.\n       * gcc.target/i386/pr62120.c: New.\n\nFrom-SVN: r215729", "tree": {"sha": "0cfb5c8f8bfef559be4989cedd0621171ac8c382", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0cfb5c8f8bfef559be4989cedd0621171ac8c382"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cd91371c5f1ed77c2acdde60f194a98df95c241b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd91371c5f1ed77c2acdde60f194a98df95c241b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd91371c5f1ed77c2acdde60f194a98df95c241b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd91371c5f1ed77c2acdde60f194a98df95c241b/comments", "author": {"login": "TocarIP", "id": 16836375, "node_id": "MDQ6VXNlcjE2ODM2Mzc1", "avatar_url": "https://avatars.githubusercontent.com/u/16836375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TocarIP", "html_url": "https://github.com/TocarIP", "followers_url": "https://api.github.com/users/TocarIP/followers", "following_url": "https://api.github.com/users/TocarIP/following{/other_user}", "gists_url": "https://api.github.com/users/TocarIP/gists{/gist_id}", "starred_url": "https://api.github.com/users/TocarIP/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TocarIP/subscriptions", "organizations_url": "https://api.github.com/users/TocarIP/orgs", "repos_url": "https://api.github.com/users/TocarIP/repos", "events_url": "https://api.github.com/users/TocarIP/events{/privacy}", "received_events_url": "https://api.github.com/users/TocarIP/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b355f52ed1a3d6a4a684c9d213d786f3f026de2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b355f52ed1a3d6a4a684c9d213d786f3f026de2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b355f52ed1a3d6a4a684c9d213d786f3f026de2d"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "c2840ae0f21ecf3d63576bdb20853570f0a4649a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cd91371c5f1ed77c2acdde60f194a98df95c241b", "patch": "@@ -1,3 +1,9 @@\n+2014-09-30  Ilya Tocar  <ilya.tocar@intel.com>\n+\n+\tPR middle-end/62120\n+\t* varasm.c (decode_reg_name_and_count): Check availability for\n+\tregisters from ADDITIONAL_REGISTER_NAMES.\n+\n 2014-09-30  David Malcolm  <dmalcolm@redhat.com>\n \n \tPR plugins/63410"}, {"sha": "858df23c8ee1f5a6f1ba17334bff8648c412fbf6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cd91371c5f1ed77c2acdde60f194a98df95c241b", "patch": "@@ -1,3 +1,10 @@\n+2014-09-30  Ilya Tocar  <ilya.tocar@intel.com>\n+\n+\tPR middle-end/62120\n+\t* gcc.target/i386/avx512f-additional-reg-names.c: Use register valid\n+\tin 32-bit mode.\n+\t* gcc.target/i386/pr62120.c: New. \n+\n 2014-09-30  James Greenhalgh  <james.greenhalgh@arm.com>\n \n \t* gcc.target/aarch64/simd/vqdmullh_laneq_s16.c: New."}, {"sha": "e5ee08bcbd2deb768d4cb88bbf3da71df20f50a8", "filename": "gcc/testsuite/gcc.target/i386/avx512f-additional-reg-names.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-additional-reg-names.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-additional-reg-names.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512f-additional-reg-names.c?ref=cd91371c5f1ed77c2acdde60f194a98df95c241b", "patch": "@@ -3,7 +3,7 @@\n \n void foo ()\n {\n-  register int zmm_var asm (\"zmm9\") __attribute__((unused));\n+  register int zmm_var asm (\"zmm6\") __attribute__((unused));\n \n   __asm__ __volatile__(\"vxorpd %%zmm0, %%zmm0, %%zmm7\\n\" : : : \"zmm7\" );\n }"}, {"sha": "bfb8c4703eb6ce61c3e21ecfa9c57c2939013cb0", "filename": "gcc/testsuite/gcc.target/i386/pr62120.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr62120.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr62120.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr62120.c?ref=cd91371c5f1ed77c2acdde60f194a98df95c241b", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mno-sse\" } */\n+\n+void foo ()\n+{\n+  register int zmm_var asm (\"ymm9\");/* { dg-error \"invalid register name\" } */\n+  register int zmm_var2 asm (\"23\");/* { dg-error \"invalid register name\" } */\n+}"}, {"sha": "0b99b39c1b87f5b518fe562e7a57e2f1d91e343a", "filename": "gcc/varasm.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd91371c5f1ed77c2acdde60f194a98df95c241b/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=cd91371c5f1ed77c2acdde60f194a98df95c241b", "patch": "@@ -888,7 +888,7 @@ decode_reg_name_and_count (const char *asmspec, int *pnregs)\n       if (asmspec[0] != 0 && i < 0)\n \t{\n \t  i = atoi (asmspec);\n-\t  if (i < FIRST_PSEUDO_REGISTER && i >= 0)\n+\t  if (i < FIRST_PSEUDO_REGISTER && i >= 0 && reg_names[i][0])\n \t    return i;\n \t  else\n \t    return -2;\n@@ -925,7 +925,8 @@ decode_reg_name_and_count (const char *asmspec, int *pnregs)\n \n \tfor (i = 0; i < (int) ARRAY_SIZE (table); i++)\n \t  if (table[i].name[0]\n-\t      && ! strcmp (asmspec, table[i].name))\n+\t      && ! strcmp (asmspec, table[i].name)\n+\t      && reg_names[table[i].number][0])\n \t    return table[i].number;\n       }\n #endif /* ADDITIONAL_REGISTER_NAMES */"}]}