{"sha": "a4d2774c9c1e213cb129c8b81a591297669838c8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTRkMjc3NGM5YzFlMjEzY2IxMjljOGI4MWE1OTEyOTc2Njk4MzhjOA==", "commit": {"author": {"name": "Matthew Malcomson", "email": "matthew.malcomson@arm.com", "date": "2020-04-09T15:11:09Z"}, "committer": {"name": "Matthew Malcomson", "email": "matthew.malcomson@arm.com", "date": "2020-04-09T15:11:09Z"}, "message": "[Arm] Allow the use of arm_cde.h for C++\n\narm_cde.h includes the arm_mve_types.h header, which declares some C++\noverloaded functions.\n\nThere is a superfluous `extern \"C\"` statement in arm_cde.h, which\nencompasses these functions.  This means that if compiling for C++, the\noverloaded functions are declared, but are declared without name\nmangling.  Hence all the function names are the same and we have many\nconflicting declarations.\n\nTesting Done:\n  Regression tested for arm-none-eabi.\n\ngcc/ChangeLog:\n\n2020-04-09  Matthew Malcomson  <matthew.malcomson@arm.com>\n\n\t* config/arm/arm_cde.h: Remove `extern \"C\"` when compiling for\n\tC++.\n\ngcc/testsuite/ChangeLog:\n\n2020-04-09  Matthew Malcomson  <matthew.malcomson@arm.com>\n\n\t* g++.target/arm/cde_mve.C: New test.", "tree": {"sha": "2fdaed046a07816384088601330b27dc160102e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fdaed046a07816384088601330b27dc160102e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4d2774c9c1e213cb129c8b81a591297669838c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4d2774c9c1e213cb129c8b81a591297669838c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4d2774c9c1e213cb129c8b81a591297669838c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4d2774c9c1e213cb129c8b81a591297669838c8/comments", "author": {"login": "mmalcomson", "id": 57484298, "node_id": "MDQ6VXNlcjU3NDg0Mjk4", "avatar_url": "https://avatars.githubusercontent.com/u/57484298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmalcomson", "html_url": "https://github.com/mmalcomson", "followers_url": "https://api.github.com/users/mmalcomson/followers", "following_url": "https://api.github.com/users/mmalcomson/following{/other_user}", "gists_url": "https://api.github.com/users/mmalcomson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmalcomson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmalcomson/subscriptions", "organizations_url": "https://api.github.com/users/mmalcomson/orgs", "repos_url": "https://api.github.com/users/mmalcomson/repos", "events_url": "https://api.github.com/users/mmalcomson/events{/privacy}", "received_events_url": "https://api.github.com/users/mmalcomson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mmalcomson", "id": 57484298, "node_id": "MDQ6VXNlcjU3NDg0Mjk4", "avatar_url": "https://avatars.githubusercontent.com/u/57484298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmalcomson", "html_url": "https://github.com/mmalcomson", "followers_url": "https://api.github.com/users/mmalcomson/followers", "following_url": "https://api.github.com/users/mmalcomson/following{/other_user}", "gists_url": "https://api.github.com/users/mmalcomson/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmalcomson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmalcomson/subscriptions", "organizations_url": "https://api.github.com/users/mmalcomson/orgs", "repos_url": "https://api.github.com/users/mmalcomson/repos", "events_url": "https://api.github.com/users/mmalcomson/events{/privacy}", "received_events_url": "https://api.github.com/users/mmalcomson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bbb0de4a4ac9d6b6b6ca6be4755913bf4379d51a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbb0de4a4ac9d6b6b6ca6be4755913bf4379d51a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bbb0de4a4ac9d6b6b6ca6be4755913bf4379d51a"}], "stats": {"total": 27, "additions": 19, "deletions": 8}, "files": [{"sha": "d081003609f55a5be61fba4af2f34fbf22a81876", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a4d2774c9c1e213cb129c8b81a591297669838c8", "patch": "@@ -1,3 +1,8 @@\n+2020-04-09  Matthew Malcomson  <matthew.malcomson@arm.com>\n+\n+\t* config/arm/arm_cde.h: Remove `extern \"C\"` when compiling for\n+\tC++.\n+\n 2020-04-09  Martin Jambor  <mjambor@suse.cz>\n \t    Richard Biener  <rguenther@suse.de>\n "}, {"sha": "0ba3ee02d057dd280c9b3400ef70b46ed472aec3", "filename": "gcc/config/arm/arm_cde.h", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2Fconfig%2Farm%2Farm_cde.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2Fconfig%2Farm%2Farm_cde.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm_cde.h?ref=a4d2774c9c1e213cb129c8b81a591297669838c8", "patch": "@@ -27,10 +27,6 @@\n #ifndef _GCC_ARM_CDE_H\n #define _GCC_ARM_CDE_H 1\n \n-#ifdef __cplusplus\n-extern \"C\" {\n-#endif\n-\n #include <stdint.h>\n \n #if defined (__ARM_FEATURE_CDE)\n@@ -177,8 +173,4 @@ extern \"C\" {\n \n #endif\n \n-#ifdef __cplusplus\n-}\n-#endif\n-\n #endif"}, {"sha": "d79c4db1aeee033df3ae7c5e6f58666a3a998a3d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a4d2774c9c1e213cb129c8b81a591297669838c8", "patch": "@@ -1,3 +1,7 @@\n+2020-04-09  Matthew Malcomson  <matthew.malcomson@arm.com>\n+\n+\t* g++.target/arm/cde_mve.C: New test.\n+\n 2020-04-09  Christophe Lyon  <christophe.lyon@linaro.org>\n \n \t* gcc.target/arm/cmse/cmse-15.c: Use check-function-bodies."}, {"sha": "897cbd2b8119471385c1c51158b1aa4851acbaf1", "filename": "gcc/testsuite/g++.target/arm/cde_mve.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2Ftestsuite%2Fg%2B%2B.target%2Farm%2Fcde_mve.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4d2774c9c1e213cb129c8b81a591297669838c8/gcc%2Ftestsuite%2Fg%2B%2B.target%2Farm%2Fcde_mve.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.target%2Farm%2Fcde_mve.C?ref=a4d2774c9c1e213cb129c8b81a591297669838c8", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_v8_1m_main_cde_mve_fp_ok } */\n+/* { dg-add-options arm_v8_1m_main_cde_mve_fp } */\n+\n+/* Ensure this compiles.  */\n+#include \"arm_cde.h\"\n+int foo ()\n+{\n+  return 1;\n+}"}]}