{"sha": "454a86dc55687014bed85561a3c91b794646c2d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDU0YTg2ZGM1NTY4NzAxNGJlZDg1NTYxYTNjOTFiNzk0NjQ2YzJkNQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2008-03-26T07:37:12Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-03-26T07:37:12Z"}, "message": "stand.ads: Deal with reordering of package standard declarations\n\n2008-03-26  Robert Dewar  <dewar@adacore.com>\n\n\t* stand.ads: Deal with reordering of package standard declarations\n\n\t* cstand.adb: Put package Standard declarations in proper order\n\nFrom-SVN: r133554", "tree": {"sha": "33c138451a603360f07397808e6edd12459cc6c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/33c138451a603360f07397808e6edd12459cc6c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/454a86dc55687014bed85561a3c91b794646c2d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/454a86dc55687014bed85561a3c91b794646c2d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/454a86dc55687014bed85561a3c91b794646c2d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/454a86dc55687014bed85561a3c91b794646c2d5/comments", "author": null, "committer": null, "parents": [{"sha": "1c3340e65db79867d7aaf37ff4d1876bc01f604c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c3340e65db79867d7aaf37ff4d1876bc01f604c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c3340e65db79867d7aaf37ff4d1876bc01f604c"}], "stats": {"total": 70, "additions": 35, "deletions": 35}, "files": [{"sha": "7a036cd63140449401a6b782dd0b0520f7c99103", "filename": "gcc/ada/cstand.adb", "status": "modified", "additions": 18, "deletions": 21, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/454a86dc55687014bed85561a3c91b794646c2d5/gcc%2Fada%2Fcstand.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/454a86dc55687014bed85561a3c91b794646c2d5/gcc%2Fada%2Fcstand.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fcstand.adb?ref=454a86dc55687014bed85561a3c91b794646c2d5", "patch": "@@ -379,13 +379,26 @@ package body CStand is\n       Set_Is_Pure (Standard_Standard);\n       Set_Is_Compilation_Unit (Standard_Standard);\n \n-      --  Create type declaration nodes for standard types\n+      --  Create type/subtype declaration nodes for standard types\n \n       for S in S_Types loop\n-         Decl := New_Node (N_Full_Type_Declaration, Stloc);\n-         Set_Defining_Identifier (Decl, Standard_Entity (S));\n+\n+         --  Subtype declaration case\n+\n+         if S = S_Natural or else S = S_Positive then\n+            Decl := New_Node (N_Subtype_Declaration, Stloc);\n+            Set_Subtype_Indication (Decl,\n+              New_Occurrence_Of (Standard_Integer, Stloc));\n+\n+         --  Full type declaration case\n+\n+         else\n+            Decl := New_Node (N_Full_Type_Declaration, Stloc);\n+         end if;\n+\n          Set_Is_Frozen (Standard_Entity (S));\n          Set_Is_Public (Standard_Entity (S));\n+         Set_Defining_Identifier (Decl, Standard_Entity (S));\n          Append (Decl, Decl_S);\n       end loop;\n \n@@ -768,13 +781,7 @@ package body CStand is\n       Set_Entity (E_Id, Standard_Positive);\n       Set_Etype (E_Id, Standard_Positive);\n \n-      --  Create subtype declaration for Natural\n-\n-      Decl := New_Node (N_Subtype_Declaration, Stloc);\n-      Set_Defining_Identifier (Decl, Standard_Natural);\n-      Set_Subtype_Indication (Decl,\n-        New_Occurrence_Of (Standard_Integer, Stloc));\n-      Append (Decl, Decl_S);\n+      --  Setup entity for Naturalend Create_Standard;\n \n       Set_Ekind          (Standard_Natural, E_Signed_Integer_Subtype);\n       Set_Etype          (Standard_Natural, Base_Type (Standard_Integer));\n@@ -788,16 +795,8 @@ package body CStand is\n         Lb  => Uint_0,\n         Hb  => Intval (High_Bound (Scalar_Range (Standard_Integer))));\n       Set_Is_Constrained (Standard_Natural);\n-      Set_Is_Frozen      (Standard_Natural);\n-      Set_Is_Public      (Standard_Natural);\n-\n-      --  Create subtype declaration for Positive\n \n-      Decl := New_Node (N_Subtype_Declaration, Stloc);\n-      Set_Defining_Identifier (Decl, Standard_Positive);\n-      Set_Subtype_Indication (Decl,\n-        New_Occurrence_Of (Standard_Integer, Stloc));\n-      Append (Decl, Decl_S);\n+      --  Setup entity for Positive\n \n       Set_Ekind          (Standard_Positive, E_Signed_Integer_Subtype);\n       Set_Etype          (Standard_Positive, Base_Type (Standard_Integer));\n@@ -812,8 +811,6 @@ package body CStand is\n          Lb  => Uint_1,\n          Hb  => Intval (High_Bound (Scalar_Range (Standard_Integer))));\n       Set_Is_Constrained   (Standard_Positive);\n-      Set_Is_Frozen        (Standard_Positive);\n-      Set_Is_Public        (Standard_Positive);\n \n       --  Create declaration for package ASCII\n "}, {"sha": "964ff192d316f9822f38f12c69873aedfc2d82f0", "filename": "gcc/ada/stand.ads", "status": "modified", "additions": 17, "deletions": 14, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/454a86dc55687014bed85561a3c91b794646c2d5/gcc%2Fada%2Fstand.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/454a86dc55687014bed85561a3c91b794646c2d5/gcc%2Fada%2Fstand.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fstand.ads?ref=454a86dc55687014bed85561a3c91b794646c2d5", "patch": "@@ -54,38 +54,41 @@ package Stand is\n       S_Standard,\n       S_ASCII,\n \n-      --  Types defined in package Standard\n+      --  Types and subtypes defined in package Standard (in the order in which\n+      --  they appear in the RM, so that the declarations are in the right\n+      --  order for the purposes of ASIS traversals\n \n       S_Boolean,\n-      S_Character,\n-      S_Wide_Character,\n-      S_Wide_Wide_Character,\n-      S_String,\n-      S_Wide_String,\n-      S_Wide_Wide_String,\n-      S_Duration,\n \n       S_Short_Short_Integer,\n       S_Short_Integer,\n       S_Integer,\n       S_Long_Integer,\n       S_Long_Long_Integer,\n \n+      S_Natural,\n+      S_Positive,\n+\n       S_Short_Float,\n       S_Float,\n       S_Long_Float,\n       S_Long_Long_Float,\n \n+      S_Character,\n+      S_Wide_Character,\n+      S_Wide_Wide_Character,\n+\n+      S_String,\n+      S_Wide_String,\n+      S_Wide_Wide_String,\n+\n+      S_Duration,\n+\n       --  Enumeration literals for type Boolean\n \n       S_False,\n       S_True,\n \n-      --  Subtypes declared in package Standard\n-\n-      S_Natural,\n-      S_Positive,\n-\n       --  Exceptions declared in package Standard\n \n       S_Constraint_Error,\n@@ -218,7 +221,7 @@ package Stand is\n       S_DEL);           -- 16#7F#\n \n    subtype S_Types is\n-     Standard_Entity_Type range S_Boolean .. S_Long_Long_Float;\n+     Standard_Entity_Type range S_Boolean .. S_Duration;\n \n    subtype S_Exceptions is\n      Standard_Entity_Type range S_Constraint_Error .. S_Tasking_Error;"}]}