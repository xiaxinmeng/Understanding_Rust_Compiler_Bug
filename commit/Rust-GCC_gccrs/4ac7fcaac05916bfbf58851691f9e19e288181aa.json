{"sha": "4ac7fcaac05916bfbf58851691f9e19e288181aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGFjN2ZjYWFjMDU5MTZiZmJmNTg4NTE2OTFmOWUxOWUyODgxODFhYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-04-01T22:53:54Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-04-01T22:53:54Z"}, "message": "libgo: Try to guess the right type for select bits in mksysinfo.\n\nFrom-SVN: r171858", "tree": {"sha": "7a2eaa2a2e05514cc9e4637814d3b7776ae4ac18", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a2eaa2a2e05514cc9e4637814d3b7776ae4ac18"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4ac7fcaac05916bfbf58851691f9e19e288181aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ac7fcaac05916bfbf58851691f9e19e288181aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ac7fcaac05916bfbf58851691f9e19e288181aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ac7fcaac05916bfbf58851691f9e19e288181aa/comments", "author": null, "committer": null, "parents": [{"sha": "15a03a11ceae0d0423ce6d762842f89a0c8feadd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15a03a11ceae0d0423ce6d762842f89a0c8feadd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15a03a11ceae0d0423ce6d762842f89a0c8feadd"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "30d1cdcd5cbda7639073c43a54489098c996858c", "filename": "libgo/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=4ac7fcaac05916bfbf58851691f9e19e288181aa", "patch": "@@ -14228,7 +14228,7 @@ no)\n   ;;\n esac\n \n-for ac_header in sys/mman.h syscall.h sys/epoll.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h\n+for ac_header in sys/mman.h syscall.h sys/epoll.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\""}, {"sha": "cf0c17ff0a4db4a6906ee321b190bcfaa02347bc", "filename": "libgo/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=4ac7fcaac05916bfbf58851691f9e19e288181aa", "patch": "@@ -417,7 +417,7 @@ no)\n   ;;\n esac\n \n-AC_CHECK_HEADERS(sys/mman.h syscall.h sys/epoll.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h)\n+AC_CHECK_HEADERS(sys/mman.h syscall.h sys/epoll.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h)\n AM_CONDITIONAL(HAVE_SYS_MMAN_H, test \"$ac_cv_header_sys_mman_h\" = yes)\n \n AC_CHECK_FUNCS(srandom random strerror_r strsignal wait4)"}, {"sha": "77d699e75a5dd8cc659ea3d7912c5ae195c2fbaf", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=4ac7fcaac05916bfbf58851691f9e19e288181aa", "patch": "@@ -73,6 +73,9 @@ cat > sysinfo.c <<EOF\n #if defined(HAVE_SYS_UTSNAME_H)\n #include <sys/utsname.h>\n #endif\n+#if defined(HAVE_SYS_SELECT_H)\n+#include <sys/select.h>\n+#endif\n #include <unistd.h>\n EOF\n \n@@ -438,4 +441,12 @@ grep '^type _ip_mreq ' gen-sysinfo.go | \\\n       -e 's/_in_addr/[4]byte/g' \\\n     >> ${OUT}\n \n+# Try to guess the type to use for fd_set.\n+fd_set=`grep '^type _fd_set ' gen-sysinfo.go || true`\n+fds_bits_type=\"_C_long\"\n+if test \"$fd_set\" != \"\"; then\n+    fds_bits_type=`echo $fd_set | sed -e 's/.*[]]\\([^;]*\\); }$/\\1/'`\n+fi\n+echo \"type fds_bits_type $fds_bits_type\" >> ${OUT}\n+\n exit $?"}, {"sha": "a16ba4aba607f2341fbe97c52e4cf0342150cc19", "filename": "libgo/syscalls/sysfile_posix.go", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fsyscalls%2Fsysfile_posix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ac7fcaac05916bfbf58851691f9e19e288181aa/libgo%2Fsyscalls%2Fsysfile_posix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fsyscalls%2Fsysfile_posix.go?ref=4ac7fcaac05916bfbf58851691f9e19e288181aa", "patch": "@@ -181,10 +181,10 @@ func Gettimeofday(tv *Timeval) (errno int) {\n   return;\n }\n \n-const nfdbits = unsafe.Sizeof(_C_long) * 8\n+const nfdbits = unsafe.Sizeof(fds_bits_type) * 8\n \n type FdSet_t struct {\n-\tFds_bits [(FD_SETSIZE + nfdbits - 1) / nfdbits]_C_long\n+\tFds_bits [(FD_SETSIZE + nfdbits - 1) / nfdbits]fds_bits_type\n }\n \n func FDSet(fd int, set *FdSet_t) {"}]}