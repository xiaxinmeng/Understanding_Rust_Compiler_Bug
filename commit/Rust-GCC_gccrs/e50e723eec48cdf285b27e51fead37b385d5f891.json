{"sha": "e50e723eec48cdf285b27e51fead37b385d5f891", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTUwZTcyM2VlYzQ4Y2RmMjg1YjI3ZTUxZmVhZDM3YjM4NWQ1Zjg5MQ==", "commit": {"author": {"name": "Tristan Gingold", "email": "gingold@adacore.com", "date": "2011-11-15T10:22:55Z"}, "committer": {"name": "Tristan Gingold", "email": "gingold@gcc.gnu.org", "date": "2011-11-15T10:22:55Z"}, "message": "c-pragma.h (pragma_extern_prefix): Declare.\n\n2011-11-15  Tristan Gingold  <gingold@adacore.com>\n\n\t* c-family/c-pragma.h (pragma_extern_prefix): Declare.\n\t* c-family/c-pragma.c (pragma_extern_prefix): Make it public.\n\t* config/vms/vms-c.c (saved_extern_prefix): New variable.\n\t(vms_pragma_extern_prefix): New function.\n\t(vms_c_register_pragma): Register vms_pragma_extern_prefix.\n\nFrom-SVN: r181379", "tree": {"sha": "d4582430bbacc6d392241d140391b5fb7daa194c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d4582430bbacc6d392241d140391b5fb7daa194c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e50e723eec48cdf285b27e51fead37b385d5f891", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e50e723eec48cdf285b27e51fead37b385d5f891", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e50e723eec48cdf285b27e51fead37b385d5f891", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e50e723eec48cdf285b27e51fead37b385d5f891/comments", "author": {"login": "gingold-adacore", "id": 16334725, "node_id": "MDQ6VXNlcjE2MzM0NzI1", "avatar_url": "https://avatars.githubusercontent.com/u/16334725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gingold-adacore", "html_url": "https://github.com/gingold-adacore", "followers_url": "https://api.github.com/users/gingold-adacore/followers", "following_url": "https://api.github.com/users/gingold-adacore/following{/other_user}", "gists_url": "https://api.github.com/users/gingold-adacore/gists{/gist_id}", "starred_url": "https://api.github.com/users/gingold-adacore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gingold-adacore/subscriptions", "organizations_url": "https://api.github.com/users/gingold-adacore/orgs", "repos_url": "https://api.github.com/users/gingold-adacore/repos", "events_url": "https://api.github.com/users/gingold-adacore/events{/privacy}", "received_events_url": "https://api.github.com/users/gingold-adacore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7c209481147555ddd22296b1eff0fd1833588d35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c209481147555ddd22296b1eff0fd1833588d35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c209481147555ddd22296b1eff0fd1833588d35"}], "stats": {"total": 50, "additions": 49, "deletions": 1}, "files": [{"sha": "eab0ca46c8bbd23657f810103b54c25ee7b1b12a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e50e723eec48cdf285b27e51fead37b385d5f891", "patch": "@@ -1,3 +1,11 @@\n+2011-11-15  Tristan Gingold  <gingold@adacore.com>\n+\n+\t* c-family/c-pragma.h (pragma_extern_prefix): Declare.\n+\t* c-family/c-pragma.c (pragma_extern_prefix): Make it public.\n+\t* config/vms/vms-c.c (saved_extern_prefix): New variable.\n+\t(vms_pragma_extern_prefix): New function.\n+\t(vms_c_register_pragma): Register vms_pragma_extern_prefix.\n+\n 2011-11-15  Georg-Johann Lay  <avr@gjlay.de>\n \n \tPR target/49868"}, {"sha": "930423bcff62a1ed59d24f4d091181618240972f", "filename": "gcc/c-family/c-pragma.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2Fc-family%2Fc-pragma.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2Fc-family%2Fc-pragma.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-pragma.c?ref=e50e723eec48cdf285b27e51fead37b385d5f891", "patch": "@@ -494,7 +494,8 @@ add_to_renaming_pragma_list (tree oldname, tree newname)\n   p->newname = newname;\n }\n \n-static GTY(()) tree pragma_extern_prefix;\n+/* The current prefix set by #pragma extern_prefix.  */\n+GTY(()) tree pragma_extern_prefix;\n \n /* #pragma extern_prefix \"prefix\" */\n static void"}, {"sha": "86681ae99ccca8cdfc7eb438f9d7410c5d2d1f9c", "filename": "gcc/c-family/c-pragma.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2Fc-family%2Fc-pragma.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2Fc-family%2Fc-pragma.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-pragma.h?ref=e50e723eec48cdf285b27e51fead37b385d5f891", "patch": "@@ -146,4 +146,6 @@ extern enum cpp_ttype c_lex_with_flags (tree *, location_t *, unsigned char *,\n \n extern void c_pp_lookup_pragma (unsigned int, const char **, const char **);\n \n+extern GTY(()) tree pragma_extern_prefix;\n+\n #endif /* GCC_C_PRAGMA_H */"}, {"sha": "19291b628777581b6c6b28e38c27e5c0d4db1e09", "filename": "gcc/config/vms/vms-c.c", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2Fconfig%2Fvms%2Fvms-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e50e723eec48cdf285b27e51fead37b385d5f891/gcc%2Fconfig%2Fvms%2Fvms-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvms%2Fvms-c.c?ref=e50e723eec48cdf285b27e51fead37b385d5f891", "patch": "@@ -227,6 +227,42 @@ vms_pragma_message (cpp_reader *pfile ATTRIBUTE_UNUSED)\n #endif\n }\n \n+/* Handle '#pragma __extern_prefix'  */\n+\n+static GTY(()) tree saved_extern_prefix;\n+\n+static void\n+vms_pragma_extern_prefix (cpp_reader * ARG_UNUSED (dummy))\n+{\n+  enum cpp_ttype tok;\n+  tree x;\n+\n+  tok = pragma_lex (&x);\n+  if (tok == CPP_NAME)\n+    {\n+      const char *op = IDENTIFIER_POINTER (x);\n+\n+      if (!strcmp (op, \"__save\"))\n+        saved_extern_prefix = pragma_extern_prefix;\n+      else if (!strcmp (op, \"__restore\"))\n+        pragma_extern_prefix = saved_extern_prefix;\n+      else\n+        warning (OPT_Wpragmas,\n+                 \"malformed '#pragma __extern_prefix', ignoring\");\n+      return;\n+    }\n+  else if (tok != CPP_STRING)\n+    {\n+      warning (OPT_Wpragmas,\n+               \"malformed '#pragma __extern_prefix', ignoring\");\n+    }\n+  else\n+    {\n+      /* Note that the length includes the null terminator.  */\n+      pragma_extern_prefix = (TREE_STRING_LENGTH (x) > 1 ? x : NULL);\n+    }\n+}\n+\n /* Add vms-specific pragma.  */\n \n void\n@@ -245,4 +281,5 @@ vms_c_register_pragma (void)\n   c_register_pragma (NULL, \"__extern_model\", vms_pragma_extern_model);\n   c_register_pragma (NULL, \"extern_model\", vms_pragma_extern_model);\n   c_register_pragma (NULL, \"__message\", vms_pragma_message);\n+  c_register_pragma (NULL, \"__extern_prefix\", vms_pragma_extern_prefix);\n }"}]}