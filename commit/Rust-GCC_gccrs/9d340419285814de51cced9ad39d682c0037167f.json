{"sha": "9d340419285814de51cced9ad39d682c0037167f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWQzNDA0MTkyODU4MTRkZTUxY2NlZDlhZDM5ZDY4MmMwMDM3MTY3Zg==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2003-09-29T22:07:39Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2003-09-29T22:07:39Z"}, "message": "dwarf2out.c (default_eh_frame_section): Split into ...\n\n\t* dwarf2out.c (default_eh_frame_section): Split into ...\n\t(named_section_eh_frame_section, collect2_eh_frame_section): ... new\n\tfunctions.\n\t* output.h (named_section_eh_frame_section): Declare.\n\t(collect2_eh_frame_section): Likewise.\n\nFrom-SVN: r71920", "tree": {"sha": "60a0220083007bd188f5ad527ba761e6c87ea827", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60a0220083007bd188f5ad527ba761e6c87ea827"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9d340419285814de51cced9ad39d682c0037167f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d340419285814de51cced9ad39d682c0037167f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d340419285814de51cced9ad39d682c0037167f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d340419285814de51cced9ad39d682c0037167f/comments", "author": null, "committer": null, "parents": [{"sha": "bc800bb24754583687623be67c348523ca78731a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc800bb24754583687623be67c348523ca78731a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc800bb24754583687623be67c348523ca78731a"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "2b6facfa8c6aab42fb2c21656c210ef269da4d81", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d340419285814de51cced9ad39d682c0037167f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d340419285814de51cced9ad39d682c0037167f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9d340419285814de51cced9ad39d682c0037167f", "patch": "@@ -1,3 +1,11 @@\n+2003-09-29  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* dwarf2out.c (default_eh_frame_section): Split into ...\n+\t(named_section_eh_frame_section, collect2_eh_frame_section): ... new\n+\tfunctions. \n+\t* output.h (named_section_eh_frame_section): Declare.\n+\t(collect2_eh_frame_section): Likewise.\n+\n 2003-09-29  Zack Weinberg  <zack@codesourcery.com>\n \n \t* real.c (real_sqrt): Use get_canonical_qnan directly."}, {"sha": "f22ca5045fd73314eb3123d3ff134f2258a72be6", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 21, "deletions": 5, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d340419285814de51cced9ad39d682c0037167f/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d340419285814de51cced9ad39d682c0037167f/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=9d340419285814de51cced9ad39d682c0037167f", "patch": "@@ -110,12 +110,12 @@ dwarf2out_do_frame (void)\n #define PTR_SIZE (POINTER_SIZE / BITS_PER_UNIT)\n #endif\n \n-/* Default version of targetm.eh_frame_section.  Note this must appear\n-   outside the DWARF2_DEBUGGING_INFO || DWARF2_UNWIND_INFO macro\n-   guards.  */\n+/* Various versions of targetm.eh_frame_section.  Note these must appear\n+   outside the DWARF2_DEBUGGING_INFO || DWARF2_UNWIND_INFO macro guards.  */\n \n+/* Version of targetm.eh_frame_section for systems with named sections.  */ \n void\n-default_eh_frame_section (void)\n+named_section_eh_frame_section (void)\n {\n #ifdef EH_FRAME_SECTION_NAME\n #ifdef HAVE_LD_RO_RW_SECTION_MIXING\n@@ -136,13 +136,29 @@ default_eh_frame_section (void)\n #else\n   named_section_flags (EH_FRAME_SECTION_NAME, SECTION_WRITE);\n #endif\n-#else\n+#endif\n+}\n+\n+/* Version of targetm.eh_frame_section for systems using collect2.  */ \n+void\n+collect2_eh_frame_section (void)\n+{\n   tree label = get_file_function_name ('F');\n \n   data_section ();\n   ASM_OUTPUT_ALIGN (asm_out_file, floor_log2 (PTR_SIZE));\n   (*targetm.asm_out.globalize_label) (asm_out_file, IDENTIFIER_POINTER (label));\n   ASM_OUTPUT_LABEL (asm_out_file, IDENTIFIER_POINTER (label));\n+}\n+\n+/* Default version of targetm.eh_frame_section.  */\n+void\n+default_eh_frame_section (void)\n+{\n+#ifdef EH_FRAME_SECTION_NAME\n+  named_section_eh_frame_section ();\n+#else\n+  collect2_eh_frame_section ();\n #endif\n }\n "}, {"sha": "c4fdc536746e345b7ae515e8ec43828f5efc882e", "filename": "gcc/output.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9d340419285814de51cced9ad39d682c0037167f/gcc%2Foutput.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9d340419285814de51cced9ad39d682c0037167f/gcc%2Foutput.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foutput.h?ref=9d340419285814de51cced9ad39d682c0037167f", "patch": "@@ -447,6 +447,8 @@ extern void default_function_pro_epilogue (FILE *, HOST_WIDE_INT);\n extern void default_exception_section (void);\n \n /* Tell assembler to switch to the section for the EH frames.  */\n+extern void named_section_eh_frame_section (void);\n+extern void collect2_eh_frame_section (void);\n extern void default_eh_frame_section (void);\n \n /* Default target hook that outputs nothing to a stream.  */"}]}