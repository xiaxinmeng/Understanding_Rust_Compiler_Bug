{"sha": "1ca950caf96bf812480298c217c05e4ab8c68cca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWNhOTUwY2FmOTZiZjgxMjQ4MDI5OGMyMTdjMDVlNGFiOGM2OGNjYQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernd.schmidt@analog.com", "date": "2007-06-13T17:41:07Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2007-06-13T17:41:07Z"}, "message": "bfin.h (EH_RETURN_HANDLER_RTX): Use gen_frame_mem.\n\n\t* config/bfin/bfin.h (EH_RETURN_HANDLER_RTX): Use gen_frame_mem.\n\t* config/bfin/bfin.md (UNSPEC_VOLATILE_STORE_EH_HANDLER): New constant.\n\t(eh_store_handler): New pattern.\n\t(eh_return): Emit it instead of a plain move.\n\nFrom-SVN: r125681", "tree": {"sha": "1fd39ca08ed531ffce8f08996fcf7143ee74743f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1fd39ca08ed531ffce8f08996fcf7143ee74743f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ca950caf96bf812480298c217c05e4ab8c68cca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ca950caf96bf812480298c217c05e4ab8c68cca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ca950caf96bf812480298c217c05e4ab8c68cca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ca950caf96bf812480298c217c05e4ab8c68cca/comments", "author": null, "committer": null, "parents": [{"sha": "8d3641040cfe5100d576e35eb40fec9f3f9db25f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d3641040cfe5100d576e35eb40fec9f3f9db25f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d3641040cfe5100d576e35eb40fec9f3f9db25f"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "411f28a08b81530537d9291e612d79ea65c19fb0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ca950caf96bf812480298c217c05e4ab8c68cca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ca950caf96bf812480298c217c05e4ab8c68cca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1ca950caf96bf812480298c217c05e4ab8c68cca", "patch": "@@ -1,3 +1,10 @@\n+2007-06-13  Bernd Schmidt  <bernd.schmidt@analog.com>\n+\n+\t* config/bfin/bfin.h (EH_RETURN_HANDLER_RTX): Use gen_frame_mem.\n+\t* config/bfin/bfin.md (UNSPEC_VOLATILE_STORE_EH_HANDLER): New constant.\n+\t(eh_store_handler): New pattern.\n+\t(eh_return): Emit it instead of a plain move.\n+\n 2007-06-13  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.c (ix86_init_mmx_sse_builtins)"}, {"sha": "b42a096fd7a07797d5ecc7d2e5bb06866ff9891b", "filename": "gcc/config/bfin/bfin.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ca950caf96bf812480298c217c05e4ab8c68cca/gcc%2Fconfig%2Fbfin%2Fbfin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ca950caf96bf812480298c217c05e4ab8c68cca/gcc%2Fconfig%2Fbfin%2Fbfin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.h?ref=1ca950caf96bf812480298c217c05e4ab8c68cca", "patch": "@@ -813,7 +813,7 @@ typedef struct {\n #define EH_RETURN_DATA_REGNO(N)\t((N) < 2 ? (N) : INVALID_REGNUM)\n #define EH_RETURN_STACKADJ_RTX\tgen_rtx_REG (Pmode, REG_P2)\n #define EH_RETURN_HANDLER_RTX \\\n-    gen_rtx_MEM (Pmode, plus_constant (frame_pointer_rtx, UNITS_PER_WORD))\n+    gen_frame_mem (Pmode, plus_constant (frame_pointer_rtx, UNITS_PER_WORD))\n \n /* Addressing Modes */\n "}, {"sha": "144df5af30c9df78988691674901866e716cba34", "filename": "gcc/config/bfin/bfin.md", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ca950caf96bf812480298c217c05e4ab8c68cca/gcc%2Fconfig%2Fbfin%2Fbfin.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ca950caf96bf812480298c217c05e4ab8c68cca/gcc%2Fconfig%2Fbfin%2Fbfin.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.md?ref=1ca950caf96bf812480298c217c05e4ab8c68cca", "patch": "@@ -144,7 +144,8 @@\n   [(UNSPEC_VOLATILE_EH_RETURN 0)\n    (UNSPEC_VOLATILE_CSYNC 1)\n    (UNSPEC_VOLATILE_SSYNC 2)\n-   (UNSPEC_VOLATILE_LOAD_FUNCDESC 3)])\n+   (UNSPEC_VOLATILE_LOAD_FUNCDESC 3)\n+   (UNSPEC_VOLATILE_STORE_EH_HANDLER 4)])\n \n (define_constants\n   [(MACFLAG_NONE 0)\n@@ -2687,12 +2688,20 @@\n \t\t    UNSPEC_VOLATILE_EH_RETURN)]\n   \"\"\n {\n-  emit_move_insn (EH_RETURN_HANDLER_RTX, operands[0]);\n+  emit_insn (gen_eh_store_handler (EH_RETURN_HANDLER_RTX, operands[0]));\n   emit_jump_insn (gen_eh_return_internal ());\n   emit_barrier ();\n   DONE;\n })\n \n+(define_insn \"eh_store_handler\"\n+  [(unspec_volatile [(match_operand:SI 1 \"register_operand\" \"da\")]\n+\t\t    UNSPEC_VOLATILE_STORE_EH_HANDLER)\n+   (clobber (match_operand:SI 0 \"memory_operand\" \"=m\"))]\n+  \"\"\n+  \"%0 = %1%!\"\n+  [(set_attr \"type\" \"mcst\")])\n+\n (define_insn_and_split \"eh_return_internal\"\n   [(set (pc)\n \t(unspec_volatile [(reg:SI REG_P2)] UNSPEC_VOLATILE_EH_RETURN))]"}]}