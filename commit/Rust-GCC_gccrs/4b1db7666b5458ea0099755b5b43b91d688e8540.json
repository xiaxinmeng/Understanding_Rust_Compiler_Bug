{"sha": "4b1db7666b5458ea0099755b5b43b91d688e8540", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGIxZGI3NjY2YjU0NThlYTAwOTk3NTViNWI0M2I5MWQ2ODhlODU0MA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2015-06-01T13:51:20Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2015-06-01T13:51:20Z"}, "message": "tree-ssa-structalias.c (ipa_pta_execute): Handle address-taken functions.\n\n2015-06-01  Richard Biener  <rguenther@suse.de>\n\n\t* tree-ssa-structalias.c (ipa_pta_execute): Handle address-taken\n\tfunctions.\n\n\t* gcc.dg/ipa/ipa-pta-1.c: Adjust.\n\nFrom-SVN: r223977", "tree": {"sha": "e1f0ebd04de6ae07234e088b21c345a46f6d5a21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1f0ebd04de6ae07234e088b21c345a46f6d5a21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4b1db7666b5458ea0099755b5b43b91d688e8540", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b1db7666b5458ea0099755b5b43b91d688e8540", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b1db7666b5458ea0099755b5b43b91d688e8540", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b1db7666b5458ea0099755b5b43b91d688e8540/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "95b9c8b0ce828a96630b90780d437a905e74ef20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95b9c8b0ce828a96630b90780d437a905e74ef20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95b9c8b0ce828a96630b90780d437a905e74ef20"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "28cfe8bca616118509dd9adad689dc7f2431425c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4b1db7666b5458ea0099755b5b43b91d688e8540", "patch": "@@ -1,3 +1,8 @@\n+2015-06-01  Richard Biener  <rguenther@suse.de>\n+\n+\t* tree-ssa-structalias.c (ipa_pta_execute): Handle address-taken\n+\tfunctions.\n+\n 2015-06-01  Martin Liska  <mliska@suse.cz>\n \n \t* alloc-pool.h: Add ATTRIBUTE_UNUSED for"}, {"sha": "d74d29d8e661a2db5b67deba876c73af91231808", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4b1db7666b5458ea0099755b5b43b91d688e8540", "patch": "@@ -1,3 +1,7 @@\n+2015-06-01  Richard Biener  <rguenther@suse.de>\n+\n+\t* gcc.dg/ipa/ipa-pta-1.c: Adjust.\n+\n 2015-06-01  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.target/s390/hotpatch-compile-15.c: Remove dg-prune-output"}, {"sha": "c183fcb641c5e73b3e638c5c380fb0087b8289b0", "filename": "gcc/testsuite/gcc.dg/ipa/ipa-pta-1.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fipa-pta-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fipa-pta-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fipa%2Fipa-pta-1.c?ref=4b1db7666b5458ea0099755b5b43b91d688e8540", "patch": "@@ -40,10 +40,13 @@ int main()\n }\n \n /* IPA PTA needs to handle indirect calls properly.  Verify that\n-   both bar and foo get a (and only a) in their arguments points-to sets.  */\n+   both bar and foo get a (and only a) in their arguments points-to sets.\n+   ???  As bar and foo have their address taken there might be callers\n+   not seen by IPA PTA (if the address escapes the unit which we only compute\n+   during IPA PTA...).  Thus the solution also includes NONLOCAL.  */\n \n /* { dg-final { scan-ipa-dump \"fn_1 = { bar foo }\" \"pta\" } } */\n-/* { dg-final { scan-ipa-dump \"bar.arg0 = { a }\" \"pta\" } } */\n-/* { dg-final { scan-ipa-dump \"bar.arg1 = { a }\" \"pta\" } } */\n-/* { dg-final { scan-ipa-dump \"foo.arg0 = { a }\" \"pta\" } } */\n-/* { dg-final { scan-ipa-dump \"foo.arg1 = { a }\" \"pta\" } } */\n+/* { dg-final { scan-ipa-dump \"bar.arg0 = { NONLOCAL a }\" \"pta\" } } */\n+/* { dg-final { scan-ipa-dump \"bar.arg1 = { NONLOCAL a }\" \"pta\" } } */\n+/* { dg-final { scan-ipa-dump \"foo.arg0 = { NONLOCAL a }\" \"pta\" } } */\n+/* { dg-final { scan-ipa-dump \"foo.arg1 = { NONLOCAL a }\" \"pta\" } } */"}, {"sha": "0cd881236f0e6d831aa55c14c159bc22d530df3b", "filename": "gcc/tree-ssa-structalias.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2Ftree-ssa-structalias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4b1db7666b5458ea0099755b5b43b91d688e8540/gcc%2Ftree-ssa-structalias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-structalias.c?ref=4b1db7666b5458ea0099755b5b43b91d688e8540", "patch": "@@ -7369,7 +7369,8 @@ ipa_pta_execute (void)\n \t constraints for parameters.  */\n       if (node->used_from_other_partition\n \t  || node->externally_visible\n-\t  || node->force_output)\n+\t  || node->force_output\n+\t  || node->address_taken)\n \t{\n \t  intra_create_variable_infos (func);\n "}]}