{"sha": "171fc18dd9e9fc5653711067b1c7061238348099", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTcxZmMxOGRkOWU5ZmM1NjUzNzExMDY3YjFjNzA2MTIzODM0ODA5OQ==", "commit": {"author": {"name": "Bud Davis", "email": "bdavis9659@sbcglobal.net", "date": "2009-08-26T02:18:14Z"}, "committer": {"name": "Bud Davis", "email": "bdavis@gcc.gnu.org", "date": "2009-08-26T02:18:14Z"}, "message": "re PR fortran/28039 (Warn when ignoring extra characters in the format specification)\n\n2009-08-22      Bud Davis <bdavis9659@sbcglobal.net>\n         \n         PR fortran/28093\n         * io.c: reverted previous patch\n\nFrom-SVN: r151112", "tree": {"sha": "9b5b5c5ce3abc8cded9731ade1d75d4ff3392dbc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b5b5c5ce3abc8cded9731ade1d75d4ff3392dbc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/171fc18dd9e9fc5653711067b1c7061238348099", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/171fc18dd9e9fc5653711067b1c7061238348099", "html_url": "https://github.com/Rust-GCC/gccrs/commit/171fc18dd9e9fc5653711067b1c7061238348099", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/171fc18dd9e9fc5653711067b1c7061238348099/comments", "author": null, "committer": null, "parents": [{"sha": "645bf0489cee84b6ac0c9a471c6e08f5faa7b1c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/645bf0489cee84b6ac0c9a471c6e08f5faa7b1c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/645bf0489cee84b6ac0c9a471c6e08f5faa7b1c8"}], "stats": {"total": 34, "additions": 20, "deletions": 14}, "files": [{"sha": "43c4081f4e773c6d96495d5bffda9f3d34e468ed", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/171fc18dd9e9fc5653711067b1c7061238348099/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/171fc18dd9e9fc5653711067b1c7061238348099/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=171fc18dd9e9fc5653711067b1c7061238348099", "patch": "@@ -1,3 +1,8 @@\n+2009-08-22      Bud Davis <bdavis9659@sbcglobal.net>\n+\n+\tPR fortran/28093\n+\t* io.c: reverted previous patch\n+\n 2009-08-25  Janne Blomqvist  <jb@gcc.gnu.org>\n \n \t* gfortran.texi: Fix ENCODE example."}, {"sha": "56a9e39af46ad51eefbbb74f4318369c4147f623", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 15, "deletions": 14, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/171fc18dd9e9fc5653711067b1c7061238348099/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/171fc18dd9e9fc5653711067b1c7061238348099/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=171fc18dd9e9fc5653711067b1c7061238348099", "patch": "@@ -121,7 +121,6 @@ format_token;\n static gfc_char_t *format_string;\n static int format_string_pos;\n static int format_length, use_last_char;\n-static int starting_format_length;\n static char error_element;\n static locus format_locus;\n \n@@ -933,11 +932,20 @@ check_format (bool is_input)\n \t  gfc_warning (\"The H format specifier at %L is\"\n \t\t       \" a Fortran 95 deleted feature\", &format_locus);\n \t}\n-      while (repeat >0)\n-       {\n-          next_char (1);\n-          repeat -- ;\n-       }\n+\n+      if (mode == MODE_STRING)\n+\t{\n+\t  format_string += value;\n+\t  format_length -= value;\n+\t}\n+      else\n+\t{\n+\t  while (repeat >0)\n+\t   {\n+\t     next_char (1);\n+\t     repeat -- ;\n+\t   }\n+\t}\n      break;\n \n     case FMT_IBOZ:\n@@ -1096,13 +1104,6 @@ check_format (bool is_input)\n   rv = FAILURE;\n \n finished:\n-  /* check for extraneous characters at end of valid format string */\n-  if ( starting_format_length > format_length )\n-    {\n-       format_locus.nextc += format_length + 1; /* point to the extra */\n-       gfc_warning (\"Extraneous characters in format at %L\", &format_locus); \n-    }\n-    \n   return rv;\n }\n \n@@ -1118,7 +1119,7 @@ check_format_string (gfc_expr *e, bool is_input)\n \n   mode = MODE_STRING;\n   format_string = e->value.character.string;\n-  starting_format_length = e->value.character.length;\n+\n   /* More elaborate measures are needed to show where a problem is within a\n      format string that has been calculated, but that's probably not worth the\n      effort.  */"}]}