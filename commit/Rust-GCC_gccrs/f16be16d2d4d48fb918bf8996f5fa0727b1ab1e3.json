{"sha": "f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjE2YmUxNmQyZDRkNDhmYjkxOGJmODk5NmY1ZmEwNzI3YjFhYjFlMw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-07-30T20:02:27Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2019-07-30T20:02:27Z"}, "message": "re PR fortran/91296 (ICE when passing complex number %re/%im as a procedure argument with -Waliasing.)\n\n2019-07-30  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91296\n\t* interface.c (compare_actual_expr): When checking for aliasing, add\n\ta case to handle REF_INQUIRY (e.g., foo(x%re, x%im) do not alias).\n\n2019-07-30  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/91296\n\t* gfortran.dg/pr91296.f90: New test.\n\nFrom-SVN: r273914", "tree": {"sha": "c64fcf9b77cc38fdce9b83307e85e01ad48a24a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c64fcf9b77cc38fdce9b83307e85e01ad48a24a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/comments", "author": null, "committer": null, "parents": [{"sha": "5ec4a442965f71b8535ee4080a498a147d8fc8a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ec4a442965f71b8535ee4080a498a147d8fc8a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ec4a442965f71b8535ee4080a498a147d8fc8a8"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "fd55ca72bd3cd20d925f380e5c32c099311dfab3", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "patch": "@@ -1,3 +1,9 @@\n+2019-07-30  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91296\n+\t* interface.c (compare_actual_expr): When checking for aliasing, add\n+\ta case to handle REF_INQUIRY (e.g., foo(x%re, x%im) do not alias).\n+\n 2019-07-29  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/90813"}, {"sha": "1d14f83057eabc6a075202a6abf9f0827d8804cd", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "patch": "@@ -3489,6 +3489,13 @@ compare_actual_expr (gfc_expr *e1, gfc_expr *e2)\n \tcase REF_SUBSTRING:\n \t  return false;\n \n+\tcase REF_INQUIRY:\n+\t  if (e1->symtree->n.sym->ts.type == BT_COMPLEX\n+\t      && e1->ts.type == BT_REAL && e2->ts.type == BT_REAL\n+\t      && r1->u.i != r2->u.i)\n+\t    return false;\n+\t  break;\n+\n \tdefault:\n \t  gfc_internal_error (\"compare_actual_expr(): Bad component code\");\n \t}"}, {"sha": "6afc2f05bfb68ab62412bbbd3076a2bb6ed8c656", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "patch": "@@ -1,3 +1,8 @@\n+2019-07-30  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/91296\n+\t* gfortran.dg/pr91296.f90: New test.\n+\n 2019-07-30  Martin Liska  <mliska@suse.cz>\n \n \tPR tree-optimization/91270"}, {"sha": "5f7bb0e70d3de774f7ba592a8b7cccb25c553b7c", "filename": "gcc/testsuite/gfortran.dg/pr91296.f90", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91296.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91296.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr91296.f90?ref=f16be16d2d4d48fb918bf8996f5fa0727b1ab1e3", "patch": "@@ -0,0 +1,27 @@\n+! { dg-do compile }\n+! { dg-options \"-Waliasing\" }\n+! PR fortran/91296\n+! Code contributed by Chinoune Mehdi <chinoune dot medhi at hotmail dot com> \n+module m\n+  implicit none\n+  integer, parameter :: sp = selected_real_kind(6)\n+\n+contains\n+  pure subroutine s(a,b,c)\n+    real(sp), intent(in) :: a, b\n+    real(sp), intent(out) :: c\n+    c = a + b\n+  end subroutine s\n+end module m\n+\n+program test\n+  use m\n+  implicit none\n+  real(sp) :: a\n+  complex(sp) :: c\n+\n+  c = (1._sp,1._sp)\n+  call s(c%re,c%im,a)   ! *** This use to cause an ICE. ***\n+  print*,a\n+\n+end program test"}]}