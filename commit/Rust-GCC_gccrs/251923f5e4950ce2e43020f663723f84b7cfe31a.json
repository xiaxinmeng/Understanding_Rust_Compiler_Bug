{"sha": "251923f5e4950ce2e43020f663723f84b7cfe31a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjUxOTIzZjVlNDk1MGNlMmU0MzAyMGY2NjM3MjNmODRiN2NmZTMxYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-03-06T17:28:54Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2008-03-06T17:28:54Z"}, "message": "gimplify.c (goa_lhs_expr_p): Allow different ADDR_EXPR nodes for the same VAR_DECL.\n\n\t* gimplify.c (goa_lhs_expr_p): Allow different ADDR_EXPR nodes\n\tfor the same VAR_DECL.\n\n\t* testsuite/libgomp.c/atomic-3.c: New test.\n\nFrom-SVN: r132977", "tree": {"sha": "47a7934fccf7b621bf8bfc543f09205c27cf5284", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/47a7934fccf7b621bf8bfc543f09205c27cf5284"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/251923f5e4950ce2e43020f663723f84b7cfe31a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/251923f5e4950ce2e43020f663723f84b7cfe31a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/251923f5e4950ce2e43020f663723f84b7cfe31a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/251923f5e4950ce2e43020f663723f84b7cfe31a/comments", "author": null, "committer": null, "parents": [{"sha": "e8645a4001a8d117dd336ea75942aac49101af49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8645a4001a8d117dd336ea75942aac49101af49", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8645a4001a8d117dd336ea75942aac49101af49"}], "stats": {"total": 66, "additions": 64, "deletions": 2}, "files": [{"sha": "4bc1c280e78313aeb3c0083531f1d5b8b7e5ba43", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/251923f5e4950ce2e43020f663723f84b7cfe31a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/251923f5e4950ce2e43020f663723f84b7cfe31a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=251923f5e4950ce2e43020f663723f84b7cfe31a", "patch": "@@ -1,3 +1,8 @@\n+2008-03-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gimplify.c (goa_lhs_expr_p): Allow different ADDR_EXPR nodes\n+\tfor the same VAR_DECL.\n+\n 2008-03-06  Tom Tromey  <tromey@redhat.com>\n \n \t* treelang: Delete."}, {"sha": "cb7460ee3021c997af389f0252b58cbd7ddf749f", "filename": "gcc/gimplify.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/251923f5e4950ce2e43020f663723f84b7cfe31a/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/251923f5e4950ce2e43020f663723f84b7cfe31a/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=251923f5e4950ce2e43020f663723f84b7cfe31a", "patch": "@@ -5464,7 +5464,10 @@ goa_lhs_expr_p (tree expr, tree addr)\n \t  expr = TREE_OPERAND (expr, 0);\n \t  addr = TREE_OPERAND (addr, 0);\n \t}\n-      return expr == addr;\n+      if (expr == addr)\n+\treturn true;\n+      return (TREE_CODE (addr) == ADDR_EXPR && TREE_CODE (expr) == ADDR_EXPR\n+\t      && TREE_OPERAND (addr, 0) == TREE_OPERAND (expr, 0));\n     }\n   if (TREE_CODE (addr) == ADDR_EXPR && expr == TREE_OPERAND (addr, 0))\n     return true;"}, {"sha": "84c70491ece58d4d6137ef9280fa826af6ea470c", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/251923f5e4950ce2e43020f663723f84b7cfe31a/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/251923f5e4950ce2e43020f663723f84b7cfe31a/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=251923f5e4950ce2e43020f663723f84b7cfe31a", "patch": "@@ -1,7 +1,11 @@\n+2008-03-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* testsuite/libgomp.c/atomic-3.c: New test.\n+\n 2008-03-03  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n \n \tPR fortran/33197\n-\t* libgomp/testsuite/libgomp.fortran/fortran.exp: Add .f08 and\n+\t* testsuite/libgomp.fortran/fortran.exp: Add .f08 and\n \t.F08 file suffixes.\n \n 2008-03-03  Peter O'Gorman  <pogma@thewrittenword.com>"}, {"sha": "5b8fdc1a79e181703d6278643f54d08f8bc477f5", "filename": "libgomp/testsuite/libgomp.c/atomic-3.c", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/251923f5e4950ce2e43020f663723f84b7cfe31a/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/251923f5e4950ce2e43020f663723f84b7cfe31a/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.c%2Fatomic-3.c?ref=251923f5e4950ce2e43020f663723f84b7cfe31a", "patch": "@@ -0,0 +1,50 @@\n+/* { dg-do run } */\n+/* { dg-options \"-fopenmp -O0\" } */\n+\n+#include <omp.h>\n+#include <stdlib.h>\n+\n+short e[64];\n+int g;\n+_Complex double d, f;\n+int num_threads;\n+\n+__attribute__((noinline)) void\n+foo (int x, long long y)\n+{\n+#pragma omp parallel num_threads (4)\n+  {\n+    int i;\n+    #pragma omp barrier\n+    for (i = 0; i < 2400; i++)\n+      {\n+\tif (i == 0)\n+\t  num_threads = omp_get_num_threads ();\n+\t#pragma omp atomic\n+\t  e[0] += x;\n+\t#pragma omp atomic\n+\t  e[16] += x;\n+\t#pragma omp atomic\n+\t  g += y;\n+\t#pragma omp atomic\n+\t  __real__ d += x;\n+\t#pragma omp atomic\n+\t  __imag__ f += x;\n+      }\n+  }\n+}\n+\n+int\n+main (void)\n+{\n+  int i;\n+  foo (3, 3LL);\n+  if (g != 3 * 2400 * num_threads\n+      || __real__ d != g || __imag__ d != 0\n+      || __real__ f != 0 || __imag__ f != g)\n+    abort ();\n+  for (i = 0; i < 64; i++)\n+    if (e[i] != ((i && i != 16) ? 0 : g))\n+      abort ();\n+  return 0;\n+}"}]}