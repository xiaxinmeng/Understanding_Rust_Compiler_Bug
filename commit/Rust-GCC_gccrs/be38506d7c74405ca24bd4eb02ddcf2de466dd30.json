{"sha": "be38506d7c74405ca24bd4eb02ddcf2de466dd30", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmUzODUwNmQ3Yzc0NDA1Y2EyNGJkNGViMDJkZGNmMmRlNDY2ZGQzMA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely.gcc@gmail.com", "date": "2012-02-05T23:55:51Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2012-02-05T23:55:51Z"}, "message": "re PR libstdc++/52104 (go1 fails to run on Solaris 10/11 x86 with with gld)\n\n\tPR libstdc++/52104\n\t* include/std/future (__future_base::_Async_state_common): Define\n\tdestructor inline for targets without TLS.\n\t* src/c++11/future.cc (__future_base::_Async_state_common): Only\n\tdefine destructor for TLS targets.\n\nFrom-SVN: r183920", "tree": {"sha": "4e0e1dbfc1d92c837f9a097b7f0766a965e6cb0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e0e1dbfc1d92c837f9a097b7f0766a965e6cb0d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be38506d7c74405ca24bd4eb02ddcf2de466dd30", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be38506d7c74405ca24bd4eb02ddcf2de466dd30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be38506d7c74405ca24bd4eb02ddcf2de466dd30", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be38506d7c74405ca24bd4eb02ddcf2de466dd30/comments", "author": null, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "148ea7d8ef5d9ab40dd9c9a74247b0305200f70c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/148ea7d8ef5d9ab40dd9c9a74247b0305200f70c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/148ea7d8ef5d9ab40dd9c9a74247b0305200f70c"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "799be7c5d4e5c2d5f7d10feed29cfe8e27fe6b3e", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be38506d7c74405ca24bd4eb02ddcf2de466dd30/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be38506d7c74405ca24bd4eb02ddcf2de466dd30/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=be38506d7c74405ca24bd4eb02ddcf2de466dd30", "patch": "@@ -1,3 +1,11 @@\n+2012-02-05  Jonathan Wakely  <jwakely.gcc@gmail.com>\n+\n+\tPR libstdc++/52104\n+\t* include/std/future (__future_base::_Async_state_common): Define\n+\tdestructor inline for targets without TLS.\n+\t* src/c++11/future.cc (__future_base::_Async_state_common): Only\n+\tdefine destructor for TLS targets.\n+\n 2012-02-05  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \tPR libstdc++/51956"}, {"sha": "962400bda65931e98dd42c8214855a84076a00f8", "filename": "libstdc++-v3/include/std/future", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be38506d7c74405ca24bd4eb02ddcf2de466dd30/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffuture", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be38506d7c74405ca24bd4eb02ddcf2de466dd30/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffuture", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Ffuture?ref=be38506d7c74405ca24bd4eb02ddcf2de466dd30", "patch": "@@ -1425,7 +1425,11 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n   class __future_base::_Async_state_common : public __future_base::_State_base\n   {\n   protected:\n+#ifdef _GLIBCXX_HAVE_TLS\n     ~_Async_state_common();\n+#else\n+    ~_Async_state_common() { _M_join(); }\n+#endif\n \n     // Allow non-timed waiting functions to block until the thread completes,\n     // as if joined."}, {"sha": "61a9729a1336146547c123f9bbe89bfd20982f2e", "filename": "libstdc++-v3/src/c++11/future.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be38506d7c74405ca24bd4eb02ddcf2de466dd30/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Ffuture.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be38506d7c74405ca24bd4eb02ddcf2de466dd30/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Ffuture.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B11%2Ffuture.cc?ref=be38506d7c74405ca24bd4eb02ddcf2de466dd30", "patch": "@@ -85,11 +85,13 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n   __future_base::_State_base::~_State_base() = default;\n \n+#ifdef _GLIBCXX_HAVE_TLS\n   __future_base::_Async_state_common::~_Async_state_common() { _M_join(); }\n \n   // Explicit instantiation due to -fno-implicit-instantiation.\n   template void call_once(once_flag&, void (thread::*&&)(), reference_wrapper<thread>&&);\n #endif\n+#endif\n \n _GLIBCXX_END_NAMESPACE_VERSION\n } // namespace std"}]}