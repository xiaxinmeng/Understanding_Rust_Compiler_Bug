{"sha": "b8e51f72bd934e95a47811f99347a7bcf2dfbde6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjhlNTFmNzJiZDkzNGU5NWE0NzgxMWY5OTM0N2E3YmNmMmRmYmRlNg==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2006-02-15T09:45:56Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2006-02-15T09:45:56Z"}, "message": "sinput-d.adb (Write_Line): Update the Source_Index_Table after each line.\n\n2006-02-13  Thomas Quinot  <quinot@adacore.com>\n\n\t* sinput-d.adb (Write_Line): Update the Source_Index_Table after each\n\tline. This is necessary to allow In_Extended_Main_Unit to provide\n\tcorrect results for itypes while writing out expanded source.\n\t(Close_File): No need to update the source_index_table here since it's\n\tnow done for each line.\n\nFrom-SVN: r111098", "tree": {"sha": "5f3e2352a8e93f22601b9b5d22e424ae989c6705", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5f3e2352a8e93f22601b9b5d22e424ae989c6705"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b8e51f72bd934e95a47811f99347a7bcf2dfbde6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8e51f72bd934e95a47811f99347a7bcf2dfbde6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8e51f72bd934e95a47811f99347a7bcf2dfbde6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8e51f72bd934e95a47811f99347a7bcf2dfbde6/comments", "author": null, "committer": null, "parents": [{"sha": "045683693078d55e32bcd836e1e953c7c634a48f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/045683693078d55e32bcd836e1e953c7c634a48f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/045683693078d55e32bcd836e1e953c7c634a48f"}], "stats": {"total": 17, "additions": 8, "deletions": 9}, "files": [{"sha": "d9e290a15634f42d76dbd4323668814a5567cd56", "filename": "gcc/ada/sinput-d.adb", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b8e51f72bd934e95a47811f99347a7bcf2dfbde6/gcc%2Fada%2Fsinput-d.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b8e51f72bd934e95a47811f99347a7bcf2dfbde6/gcc%2Fada%2Fsinput-d.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinput-d.adb?ref=b8e51f72bd934e95a47811f99347a7bcf2dfbde6", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2002-2003, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2002-2006, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -44,13 +44,12 @@ package body Sinput.D is\n       Trim_Lines_Table (Dfile);\n       Close_Debug_File;\n \n-      --  Now we need to read the file that we wrote and store it\n-      --  in memory for subsequent access.\n+      --  Now we need to read the file that we wrote and store it in memory for\n+      --  subsequent access.\n \n       Read_Source_File\n         (S.Full_Debug_Name, S.Source_First, S.Source_Last, Src);\n       S.Source_Text := Src;\n-      Set_Source_File_Index_Table (Dfile);\n    end Close_Debug_Source;\n \n    -------------------------\n@@ -78,8 +77,8 @@ package body Sinput.D is\n          S.Lines_Table       := null;\n          S.Last_Source_Line  := 1;\n \n-         --  Allocate lines table, guess that it needs to be three times\n-         --  bigger than the original source (in number of lines).\n+         --  Allocate lines table, guess that it needs to be three times bigger\n+         --  than the original source (in number of lines).\n \n          Alloc_Line_Tables\n            (S, Int (Source_File.Table (Source).Last_Source_Line * 3));\n@@ -100,15 +99,15 @@ package body Sinput.D is\n       if Str'Length = 0 and then Loc = S.Source_First then\n          return;\n \n-      --  Here we write the line, compute the source location for the\n-      --  following line, allocate its table entry, and update the source\n-      --  record entry.\n+      --  Here we write the line, compute the source location for the following\n+      --  line, allocate its table entry, and update the source record entry.\n \n       else\n          Write_Debug_Info (Str (Str'First .. Str'Last - 1));\n          Loc := Loc - 1 + Source_Ptr (Str'Length + Debug_File_Eol_Length);\n          Add_Line_Tables_Entry (S, Loc);\n          S.Source_Last := Loc;\n+         Set_Source_File_Index_Table (Dfile);\n       end if;\n    end Write_Debug_Line;\n "}]}