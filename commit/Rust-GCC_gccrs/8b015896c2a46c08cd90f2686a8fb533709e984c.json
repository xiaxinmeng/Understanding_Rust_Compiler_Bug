{"sha": "8b015896c2a46c08cd90f2686a8fb533709e984c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGIwMTU4OTZjMmE0NmMwOGNkOTBmMjY4NmE4ZmI1MzM3MDllOTg0Yw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1998-06-08T10:44:01Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-06-08T10:44:01Z"}, "message": "expr.c (force_operand): Detect PIC address loads before splitting arithmetic.\n\n* expr.c (force_operand): Detect PIC address loads before\nsplitting arithmetic.\n\nFrom-SVN: r20331", "tree": {"sha": "13f3d73c19b2fe99a8c17ba211278597eb2202f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13f3d73c19b2fe99a8c17ba211278597eb2202f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b015896c2a46c08cd90f2686a8fb533709e984c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b015896c2a46c08cd90f2686a8fb533709e984c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b015896c2a46c08cd90f2686a8fb533709e984c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b015896c2a46c08cd90f2686a8fb533709e984c/comments", "author": null, "committer": null, "parents": [{"sha": "8bc3afab6f4a17c290029f726a3d3295c99b056b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bc3afab6f4a17c290029f726a3d3295c99b056b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bc3afab6f4a17c290029f726a3d3295c99b056b"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "ff1a1e4e3d845366e5bc11903782a824a3ecf4a7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b015896c2a46c08cd90f2686a8fb533709e984c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b015896c2a46c08cd90f2686a8fb533709e984c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8b015896c2a46c08cd90f2686a8fb533709e984c", "patch": "@@ -1,12 +1,9 @@\n-Mon Jun 8 09:22:38 PDT 1998 Jeff Law  (law@cygnus.com)\n-\n-\t* version.c: Bump for snapshot.\n+Mon Jun  8 10:43:15 1998  Richard Henderson  <rth@cygnus.com>\n \n-Mon Jun 8 09:17:09 PDT 1998 Jeff Law  (law@cygnus.com)\n+\t* expr.c (force_operand): Detect PIC address loads before \n+\tsplitting arithmetic.\n \n-\t* version.c: Bump for snapshot.\n-\n-Mon Jun 8 02:09:47 PDT 1998 Jeff Law  (law@cygnus.com)\n+Mon Jun 8 09:22:38 PDT 1998 Jeff Law  (law@cygnus.com)\n \n \t* version.c: Bump for snapshot.\n "}, {"sha": "058d12175dbdb9c0960d514409d144601c798087", "filename": "gcc/expr.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b015896c2a46c08cd90f2686a8fb533709e984c/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b015896c2a46c08cd90f2686a8fb533709e984c/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=8b015896c2a46c08cd90f2686a8fb533709e984c", "patch": "@@ -4525,6 +4525,20 @@ force_operand (value, target)\n   /* Use subtarget as the target for operand 0 of a binary operation.  */\n   register rtx subtarget = (target != 0 && GET_CODE (target) == REG ? target : 0);\n \n+  /* Check for a PIC address load.  */\n+  if (flag_pic\n+      && (GET_CODE (value) == PLUS || GET_CODE (value) == MINUS)\n+      && XEXP (value, 0) == pic_offset_table_rtx\n+      && (GET_CODE (XEXP (value, 1)) == SYMBOL_REF\n+\t  || GET_CODE (XEXP (value, 1)) == LABEL_REF\n+\t  || GET_CODE (XEXP (value, 1)) == CONST))\n+    {\n+      if (!subtarget)\n+\tsubtarget = gen_reg_rtx (GET_MODE (value));\n+      emit_move_insn (subtarget, value);\n+      return subtarget;\n+    }\n+\n   if (GET_CODE (value) == PLUS)\n     binoptab = add_optab;\n   else if (GET_CODE (value) == MINUS)"}]}