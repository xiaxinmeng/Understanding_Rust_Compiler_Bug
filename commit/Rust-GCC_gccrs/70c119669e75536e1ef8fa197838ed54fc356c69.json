{"sha": "70c119669e75536e1ef8fa197838ed54fc356c69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzBjMTE5NjY5ZTc1NTM2ZTFlZjhmYTE5NzgzOGVkNTRmYzM1NmM2OQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.vnet.ibm.com", "date": "2016-07-01T18:23:29Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2016-07-01T18:23:29Z"}, "message": "re PR target/71720 (initialization of a vector of floats generates incorrect code for -mcpu=power9)\n\n[gcc]\n2016-07-01  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\tPR target/71720\n\t* config/rs6000/vsx.md (vsx_splat_v4sf_internal): When splitting\n\tthe insns, use vsx_xxspltw_v4sf_direct which does not check for\n\tlittle endian.\n\n[gcc/testsuite]\n2016-07-01  Michael Meissner  <meissner@linux.vnet.ibm.com>\n\n\tPR target/71720\n\t* gcc.target/powerpc/pr71720.c: New test.\n\nFrom-SVN: r237920", "tree": {"sha": "61acca698a8064ffd961a7c6b8a1aba22cc11c61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61acca698a8064ffd961a7c6b8a1aba22cc11c61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/70c119669e75536e1ef8fa197838ed54fc356c69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70c119669e75536e1ef8fa197838ed54fc356c69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70c119669e75536e1ef8fa197838ed54fc356c69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70c119669e75536e1ef8fa197838ed54fc356c69/comments", "author": null, "committer": null, "parents": [{"sha": "a8dbab92f0f397bd4b5f5a8d4fc08823006151be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8dbab92f0f397bd4b5f5a8d4fc08823006151be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8dbab92f0f397bd4b5f5a8d4fc08823006151be"}], "stats": {"total": 32, "additions": 29, "deletions": 3}, "files": [{"sha": "a2fccf51852ae4dee6440b9c8a1b1bb63f4ee199", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=70c119669e75536e1ef8fa197838ed54fc356c69", "patch": "@@ -1,3 +1,10 @@\n+2016-07-01  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/71720\n+\t* config/rs6000/vsx.md (vsx_splat_v4sf_internal): When splitting\n+\tthe insns, use vsx_xxspltw_v4sf_direct which does not check for\n+\tlittle endian.\n+\n 2016-07-01  Jan Beulich  <jbeulich@suse.com>\n \n \t* varasm.c (get_variable_section): Validate initializer in"}, {"sha": "861b1479a2e1db896ddb966f8d06ec36f22d221a", "filename": "gcc/config/rs6000/vsx.md", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2Fconfig%2Frs6000%2Fvsx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2Fconfig%2Frs6000%2Fvsx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fvsx.md?ref=70c119669e75536e1ef8fa197838ed54fc356c69", "patch": "@@ -2512,9 +2512,8 @@\n   [(set (match_dup 0)\n \t(unspec:V4SF [(match_dup 1)] UNSPEC_VSX_CVDPSPN))\n    (set (match_dup 0)\n-\t(vec_duplicate:V4SF\n-\t (vec_select:SF (match_dup 0)\n-\t\t\t(parallel [(const_int 0)]))))]\n+\t(unspec:V4SF [(match_dup 0)\n+\t\t      (const_int 0)] UNSPEC_VSX_XXSPLTW))]\n   \"\"\n   [(set_attr \"type\" \"vecload,vecperm,mftgpr\")\n    (set_attr \"length\" \"4,8,4\")])"}, {"sha": "a1255a0763f291fde8efba9e1eb775d6e4d59711", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=70c119669e75536e1ef8fa197838ed54fc356c69", "patch": "@@ -1,3 +1,8 @@\n+2016-07-01  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/71720\n+\t* gcc.target/powerpc/pr71720.c: New test.\n+\n 2016-07-01  Jan Beulich  <jbeulich@suse.com>\n \n \t* gcc.dg/bss.c: New."}, {"sha": "a0c330db931030b496c447cd561270cae21ae69c", "filename": "gcc/testsuite/gcc.target/powerpc/pr71720.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr71720.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70c119669e75536e1ef8fa197838ed54fc356c69/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr71720.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr71720.c?ref=70c119669e75536e1ef8fa197838ed54fc356c69", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile { target { powerpc64*-*-* && lp64 } } } */\n+/* { dg-skip-if \"do not override -mcpu\" { powerpc*-*-* } { \"-mcpu=*\" } { \"-mcpu=power9\" } } */\n+/* { dg-require-effective-target powerpc_p9vector_ok } */\n+/* { dg-options \"-mcpu=power9 -O2 -mupper-regs-di\" } */\n+\n+/* Verify that we generate xxspltw <reg>,<reg>,0 for V4SFmode splat.  */\n+\n+vector float\n+splat_v4sf (float f)\n+{\n+  return (vector float) { f, f, f, f };\n+}\n+\n+/* { dg-final { scan-assembler \"xscvdpspn \"      } } */\n+/* { dg-final { scan-assembler \"xxspltw .*,.*,0\" } } */"}]}