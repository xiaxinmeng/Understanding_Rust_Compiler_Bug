{"sha": "7b7034ea9a1670ccc3fd5808cd0219e0645ffae7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2I3MDM0ZWE5YTE2NzBjY2MzZmQ1ODA4Y2QwMjE5ZTA2NDVmZmFlNw==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-01-18T06:21:28Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-01-18T06:21:28Z"}, "message": "re PR libfortran/25697 (libfortran - Segmentation fault/ Bad Address on unformatted read)\n\n2006-01-17  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/25697\n\t* io/transfer.c (us_read): Detect end of file condition from previous\n\toperations and bail out (no need to pre-position).\n\nFrom-SVN: r109870", "tree": {"sha": "18ea553828ecf780f4551052d6ab0fa5acedf71b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/18ea553828ecf780f4551052d6ab0fa5acedf71b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7/comments", "author": null, "committer": null, "parents": [{"sha": "3dd0df7f136e41d9b05a1804ba1d01166a3a0a0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3dd0df7f136e41d9b05a1804ba1d01166a3a0a0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3dd0df7f136e41d9b05a1804ba1d01166a3a0a0e"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "009b044f51df7871d44325b41466703da069026b", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=7b7034ea9a1670ccc3fd5808cd0219e0645ffae7", "patch": "@@ -1,3 +1,9 @@\n+2006-01-17  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/25697\n+\t* io/transfer.c (us_read): Detect end of file condition from previous\n+\toperations and bail out (no need to pre-position).\n+\n 2006-01-17  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/25631"}, {"sha": "b5b8df45e9cff2f1ce9b15599b2b5a64d010ebf6", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b7034ea9a1670ccc3fd5808cd0219e0645ffae7/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=7b7034ea9a1670ccc3fd5808cd0219e0645ffae7", "patch": "@@ -1,4 +1,4 @@\n-/* Copyright (C) 2002, 2003, 2004, 2005 Free Software Foundation, Inc.\n+/* Copyright (C) 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.\n    Contributed by Andy Vaught\n    Namelist transfer functions contributed by Paul Thomas\n \n@@ -1219,11 +1219,17 @@ us_read (st_parameter_dt *dtp)\n   int n;\n   gfc_offset i;\n \n+  if (dtp->u.p.current_unit->endfile == AT_ENDFILE)\n+    return;\n+\n   n = sizeof (gfc_offset);\n   p = salloc_r (dtp->u.p.current_unit->s, &n);\n \n   if (n == 0)\n-    return;  /* end of file */\n+    {\n+      dtp->u.p.current_unit->endfile = AT_ENDFILE;\n+      return;  /* end of file */\n+    }\n \n   if (p == NULL || n != sizeof (gfc_offset))\n     {"}]}