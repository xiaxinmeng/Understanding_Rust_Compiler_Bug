{"sha": "92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJmYmI3NTkyYmJkMzg5OWE3YjJjYTk4YjRhYzBlOWY4NTdmZTExNA==", "commit": {"author": {"name": "Bud Davis", "email": "bdavis9659@comcast.net", "date": "2004-05-13T10:11:02Z"}, "committer": {"name": "Bud Davis", "email": "bdavis@gcc.gnu.org", "date": "2004-05-13T10:11:02Z"}, "message": "re PR libfortran/15204 (ADJUSTR intrinsic accesses corrupted pointer)\n\n\n        PR fortran/15294\n        * gfortran.fortran-torture/execute/adjustr.f90: New file.\n        * io/intrinsic/string_intrinsics.c(adjustr): rework logic.\n\nFrom-SVN: r81771", "tree": {"sha": "6b9d1350b0d987f11cd8edd85e5f95c559f990bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b9d1350b0d987f11cd8edd85e5f95c559f990bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/comments", "author": null, "committer": null, "parents": [{"sha": "014251eae30e30a6cc960f41c939d24ffed00066", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/014251eae30e30a6cc960f41c939d24ffed00066", "html_url": "https://github.com/Rust-GCC/gccrs/commit/014251eae30e30a6cc960f41c939d24ffed00066"}], "stats": {"total": 61, "additions": 58, "deletions": 3}, "files": [{"sha": "be4920e880cdadeebc28ef71d0a38fea8d251538", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "patch": "@@ -1,3 +1,8 @@\n+2004-05-13  Bud Davis  <bdavis9659@comcast.net>\n+\n+\tPR fortran/15294\n+\t* gfortran.fortran-torture/execute/adjustr.f90: New file.\n+\n 2004-05-13  Diego Novillo  <dnovillo@redhat.com>\n \n \tMerge from tree-ssa-20020619-branch.  See"}, {"sha": "8264ba7f811331a26e097884551834881215b2a5", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/adjustr.f90", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fadjustr.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fadjustr.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fadjustr.f90?ref=92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "patch": "@@ -0,0 +1,46 @@\n+! pr 15294 - [gfortran] ADJUSTR intrinsic accesses corrupted pointer\n+!\n+  program test_adjustr\n+  implicit none\n+  integer test_cases\n+  parameter (test_cases=13)\n+  integer i\n+  character(len=10) s1(test_cases), s2(test_cases)\n+  s1(1)='A'\n+  s2(1)='         A'\n+  s1(2)='AB'\n+  s2(2)='        AB'\n+  s1(3)='ABC'\n+  s2(3)='       ABC'\n+  s1(4)='ABCD'\n+  s2(4)='      ABCD'\n+  s1(5)='ABCDE'\n+  s2(5)='     ABCDE'\n+  s1(6)='ABCDEF'\n+  s2(6)='    ABCDEF'\n+  s1(7)='ABCDEFG'\n+  s2(7)='   ABCDEFG'\n+  s1(8)='ABCDEFGH'\n+  s2(8)='  ABCDEFGH'\n+  s1(9)='ABCDEFGHI'\n+  s2(9)=' ABCDEFGHI'\n+  s1(10)='ABCDEFGHIJ'\n+  s2(10)='ABCDEFGHIJ'\n+  s1(11)=''\n+  s2(11)=''\n+  s1(12)=' '\n+  s2(12)=' '\n+  s1(13)='          '\n+  s2(13)='          '\n+  do I = 1,test_cases\n+     print*,i\n+     print*, 's1          = \"', s1(i), '\"'\n+     print*, 's2          = \"', s2(i), '\"'\n+     print*, 'adjustr(s1) = \"', adjustr(s1(i)), '\"'\n+     if (adjustr(s1(i)).ne.s2(i)) then\n+         print*,'fail'\n+         call abort\n+     endif\n+  enddo\n+   \n+  end program test_adjustr"}, {"sha": "b597f52baa4843164d95db8f3bb80d0574dcd18e", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "patch": "@@ -1,3 +1,8 @@\n+2004-05-13  Bud Davis  <bdavis9659@comcast.net>\n+\n+\tPR fortran/15294\n+\t* io/intrinsic/string_intrinsics.c(adjustr): rework logic.\n+\n 2004-05-06  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n \t    Steven Bosscher  <stevenb@suse.de>\n "}, {"sha": "2cd07a2b77b01794a17d6a624ea8f1ef9adc7f70", "filename": "libgfortran/intrinsics/string_intrinsics.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/libgfortran%2Fintrinsics%2Fstring_intrinsics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114/libgfortran%2Fintrinsics%2Fstring_intrinsics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Fstring_intrinsics.c?ref=92fbb7592bbd3899a7b2ca98b4ac0e9f857fe114", "patch": "@@ -276,12 +276,11 @@ adjustr (char *dest, GFC_INTEGER_4 len, const char *src)\n \n   i = len;\n   while (i > 0 && src[i - 1] == ' ')\n-    i++;\n+    i--;\n \n-  if (i < len)\n-    memcpy (&dest[len - i], &src, i);\n   if (i < len)\n     memset (dest, ' ', len - i);\n+  memcpy (dest + (len - i), src, i );\n }\n \n "}]}