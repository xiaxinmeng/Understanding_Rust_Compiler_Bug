{"sha": "8da665d583ad51bbba86a5e135dfc33d4b764455", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGRhNjY1ZDU4M2FkNTFiYmJhODZhNWUxMzVkZmMzM2Q0Yjc2NDQ1NQ==", "commit": {"author": {"name": "Stan Cox", "email": "scox@cygnus.com", "date": "1999-09-23T01:03:13Z"}, "committer": {"name": "Stan Cox", "email": "scox@gcc.gnu.org", "date": "1999-09-23T01:03:13Z"}, "message": "mips.h (GO_IF_LEGITIMATE_ADDRESS): Don't accept large register offsets; let LEGITIMIZE_ADDRESS load it into a register.\n\n* mips.h (GO_IF_LEGITIMATE_ADDRESS): Don't accept large\nregister offsets; let LEGITIMIZE_ADDRESS load it into a register.\n(LEGITIMIZE_ADDRESS): Use plus_constant to avoid (plus (reg) (const_int 0))\n* mips.md (call_internal3c): New pattern for -mips16 -mlong-calls.\n\nFrom-SVN: r29608", "tree": {"sha": "fe8507a33bd2c739d2aa1c9a1223244ba551d964", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe8507a33bd2c739d2aa1c9a1223244ba551d964"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8da665d583ad51bbba86a5e135dfc33d4b764455", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8da665d583ad51bbba86a5e135dfc33d4b764455", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8da665d583ad51bbba86a5e135dfc33d4b764455", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8da665d583ad51bbba86a5e135dfc33d4b764455/comments", "author": null, "committer": null, "parents": [{"sha": "f38b27c7cb8392960f06b54303830e51704f8c6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f38b27c7cb8392960f06b54303830e51704f8c6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f38b27c7cb8392960f06b54303830e51704f8c6e"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "a381ea8f278a53ac5cb8eb93af0c736ec3285fb7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8da665d583ad51bbba86a5e135dfc33d4b764455/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8da665d583ad51bbba86a5e135dfc33d4b764455/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8da665d583ad51bbba86a5e135dfc33d4b764455", "patch": "@@ -1,3 +1,11 @@\n+Wed Sep 22 17:58:01 1999  Stan Cox  <scox@cygnus.com>\n+\n+\t* mips.h (GO_IF_LEGITIMATE_ADDRESS): Don't accept large\n+\tregister offsets; let LEGITIMIZE_ADDRESS load it into a register.\n+\t(LEGITIMIZE_ADDRESS): Use plus_constant to avoid\n+\t(plus (reg) (const_int 0))\n+\t* mips.md (call_internal3c): New pattern for -mips16 -mlong-calls.\n+\t\n Wed Sep 22 17:55:31 1999  David Edelsohn  <edelsohn@gnu.org>\n \n \t* rs6000.c (expand_block_move): DImode loads and stores require"}, {"sha": "61a1dfe61c10b39ad1ad54191916c24e51ac33d8", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8da665d583ad51bbba86a5e135dfc33d4b764455/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8da665d583ad51bbba86a5e135dfc33d4b764455/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=8da665d583ad51bbba86a5e135dfc33d4b764455", "patch": "@@ -2966,6 +2966,7 @@ extern struct rtx_def *mips_va_arg ();\n \t      && (!TARGET_EMBEDDED_PIC\t\t\t\t\t\\\n \t\t  || code1 != CONST\t\t\t\t\t\\\n \t\t  || GET_CODE (XEXP (xplus1, 0)) != MINUS)\t\t\\\n+\t      && ! (code1 == CONST_INT && ! SMALL_INT (xplus1))         \\\n \t      && !TARGET_MIPS16)\t\t\t\t\t\\\n \t    goto ADDR;\t\t\t\t\t\t\t\\\n \t}\t\t\t\t\t\t\t\t\\\n@@ -3125,8 +3126,7 @@ extern struct rtx_def *mips_va_arg ();\n \t\t\t\t  ptr_reg,\t\t\t\t\\\n \t\t\t\t  gen_rtx_PLUS (Pmode, xplus0, int_reg))); \\\n \t\t\t\t\t\t\t\t\t\\\n-\t  X = gen_rtx_PLUS (Pmode, ptr_reg,\t\t\t\t\\\n-\t\t\t    GEN_INT (INTVAL (xplus1) & 0x7fff));\t\\\n+\t  X = plus_constant (ptr_reg, INTVAL (xplus1) & 0x7fff);\t\\\n \t  goto WIN;\t\t\t\t\t\t\t\\\n \t}\t\t\t\t\t\t\t\t\\\n     }\t\t\t\t\t\t\t\t\t\\"}, {"sha": "d6e533b11642ad405fea085cfc9bfffcc49a7258", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8da665d583ad51bbba86a5e135dfc33d4b764455/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8da665d583ad51bbba86a5e135dfc33d4b764455/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=8da665d583ad51bbba86a5e135dfc33d4b764455", "patch": "@@ -9591,7 +9591,8 @@ move\\\\t%0,%z4\\\\n\\\\\n   [(call (mem:SI (match_operand:SI 0 \"register_operand\" \"r\"))\n \t (match_operand 1 \"\" \"i\"))\n    (clobber (match_operand:SI 2 \"register_operand\" \"=d\"))]\n-  \"!(Pmode == DImode) && !TARGET_ABICALLS && TARGET_LONG_CALLS\"\n+  \"!TARGET_MIPS16\n+   && !(Pmode == DImode) && !TARGET_ABICALLS && TARGET_LONG_CALLS\"\n   \"%*jal\\\\t%2,%0\"\n   [(set_attr \"type\"\t\"call\")\n    (set_attr \"mode\"\t\"none\")])\n@@ -9600,7 +9601,19 @@ move\\\\t%0,%z4\\\\n\\\\\n   [(call (mem:DI (match_operand:DI 0 \"se_register_operand\" \"r\"))\n \t (match_operand 1 \"\" \"i\"))\n    (clobber (match_operand:SI 2 \"register_operand\" \"=d\"))]\n-  \"Pmode == DImode && !TARGET_ABICALLS && TARGET_LONG_CALLS\"\n+  \"!TARGET_MIPS16\n+   && Pmode == DImode && !TARGET_ABICALLS && TARGET_LONG_CALLS\"\n+  \"%*jal\\\\t%2,%0\"\n+  [(set_attr \"type\"\t\"call\")\n+   (set_attr \"mode\"\t\"none\")\n+   (set_attr \"length\"\t\"1\")])\n+\n+(define_insn \"call_internal3c\"\n+  [(call (mem:SI (match_operand:SI 0 \"register_operand\" \"e\"))\n+\t (match_operand 1 \"\" \"i\"))\n+   (clobber (match_operand:SI 2 \"register_operand\" \"=y\"))]\n+  \"TARGET_MIPS16 && !(Pmode == DImode) && !TARGET_ABICALLS && TARGET_LONG_CALLS\n+   && GET_CODE (operands[2]) == REG && REGNO (operands[2]) == 31\"\n   \"%*jal\\\\t%2,%0\"\n   [(set_attr \"type\"\t\"call\")\n    (set_attr \"mode\"\t\"none\")])"}]}