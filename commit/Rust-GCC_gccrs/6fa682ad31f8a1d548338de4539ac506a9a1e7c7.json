{"sha": "6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZhNjgyYWQzMWY4YTFkNTQ4MzM4ZGU0NTM5YWM1MDZhOWExZTdjNw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-07-14T20:54:40Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2016-07-14T20:54:40Z"}, "message": "re PR fortran/29819 (Error/warning message should ignore comments for \"1\" in %C output)\n\n2016-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/29819\n\t* parse.c (parse_contained): Use proper locus.\n \n\n2016-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/29819\n\t* gfortran.dg/bind_c_usage_9.f03: Move dg-error.\n\t* gfortran.dg/contains.f90: Ditto.\n\t* gfortran.dg/contains_empty_1.f03: Ditto.\n\t* gfortran.dg/submodule_3.f08: Ditto.\n\nFrom-SVN: r238354", "tree": {"sha": "6b427a4e401b42d3cadc38fd8352a28ace1308bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b427a4e401b42d3cadc38fd8352a28ace1308bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/comments", "author": null, "committer": null, "parents": [{"sha": "a60a5d31dd7360a2788e2cac7865d5f491c3464e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a60a5d31dd7360a2788e2cac7865d5f491c3464e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a60a5d31dd7360a2788e2cac7865d5f491c3464e"}], "stats": {"total": 57, "additions": 36, "deletions": 21}, "files": [{"sha": "594b19ec9a3321c15b4cecb65dd889fdc6f8f899", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "patch": "@@ -1,3 +1,8 @@\n+2016-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/29819\n+\t* parse.c (parse_contained): Use proper locus.\n+ \n 2016-07-14  Andre Vehreschild  <vehre@gcc.gnu.org>\n \n \tPR fortran/70842"}, {"sha": "bd7b1384a0c81d839f9f08fa9a143cbd9dc6151f", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "patch": "@@ -5321,6 +5321,7 @@ parse_contained (int module)\n   gfc_statement st;\n   gfc_symbol *sym;\n   gfc_entry_list *el;\n+  locus old_loc;\n   int contains_statements = 0;\n   int seen_error = 0;\n \n@@ -5337,6 +5338,7 @@ parse_contained (int module)\n  next:\n       /* Process the next available statement.  We come here if we got an error\n \t and rejected the last statement.  */\n+      old_loc = gfc_current_locus;\n       st = next_statement ();\n \n       switch (st)\n@@ -5442,7 +5444,7 @@ parse_contained (int module)\n   pop_state ();\n   if (!contains_statements)\n     gfc_notify_std (GFC_STD_F2008, \"CONTAINS statement without \"\n-\t\t    \"FUNCTION or SUBROUTINE statement at %C\");\n+\t\t    \"FUNCTION or SUBROUTINE statement at %L\", &old_loc);\n }\n \n "}, {"sha": "825442746c00091a514e735b110ac17d648a9c9b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "patch": "@@ -1,3 +1,11 @@\n+2016-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/29819\n+\t* gfortran.dg/bind_c_usage_9.f03: Move dg-error.\n+\t* gfortran.dg/contains.f90: Ditto.\n+\t* gfortran.dg/contains_empty_1.f03: Ditto.\n+\t* gfortran.dg/submodule_3.f08: Ditto.\n+\n 2016-07-14  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR testsuite/71865"}, {"sha": "016fc7f62e06cb399d34ec3023c7a12e83eed0ae", "filename": "gcc/testsuite/gfortran.dg/bind_c_usage_9.f03", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fbind_c_usage_9.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fbind_c_usage_9.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fbind_c_usage_9.f03?ref=6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "patch": "@@ -6,42 +6,42 @@\n ! for Fortran 2003.\n !\n subroutine foo() bind(c)\n-contains\n+contains ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n   subroutine bar() bind (c) ! { dg-error \"may not be specified for an internal\" }\n   end subroutine bar ! { dg-error \"Expected label\" }\n-end subroutine foo ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n+end subroutine foo\n \n subroutine foo2() bind(c)\n   use iso_c_binding\n-contains\n+contains ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n   integer(c_int) function barbar() bind (c) ! { dg-error \"may not be specified for an internal\" }\n   end function barbar ! { dg-error \"Expecting END SUBROUTINE\" }\n-end subroutine foo2 ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n+end subroutine foo2\n \n function one() bind(c)\n   use iso_c_binding\n   integer(c_int) :: one\n   one = 1\n-contains\n+contains ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n   integer(c_int) function two() bind (c) ! { dg-error \"may not be specified for an internal\" }\n   end function two ! { dg-error \"Expected label\" }\n-end function one ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n+end function one\n \n function one2() bind(c)\n   use iso_c_binding\n   integer(c_int) :: one2\n   one2 = 1\n-contains\n+contains ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n   subroutine three() bind (c) ! { dg-error \"may not be specified for an internal\" }\n   end subroutine three ! { dg-error \"Expecting END FUNCTION statement\" }\n-end function one2 ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n+end function one2\n \n program main\n   use iso_c_binding\n   implicit none\n-contains\n+contains ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n   subroutine test() bind(c) ! { dg-error \"may not be specified for an internal\" }\n   end subroutine test ! { dg-error \"Expecting END PROGRAM\" }\n   integer(c_int) function test2() bind (c) ! { dg-error \"may not be specified for an internal\" }\n   end function test2  ! { dg-error \"Expecting END PROGRAM\" }\n-end program main ! { dg-error \"Fortran 2008: CONTAINS statement\" }\n+end program main"}, {"sha": "420160b259809405330d19dd51c6a85c52d4cc27", "filename": "gcc/testsuite/gfortran.dg/contains.f90", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains.f90?ref=6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "patch": "@@ -3,9 +3,9 @@\n ! Check whether empty contains are allowd\n ! PR fortran/29806\n module x\n- contains\n-end module x ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE statement\" }\n+ contains ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE statement\" }\n+end module x\n \n program y\n-  contains\n-end program y ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE statement\" }\n+  contains  ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE statement\" }\n+end program y"}, {"sha": "b9cdc6731a1884089cd85396aa07324004fc1b7f", "filename": "gcc/testsuite/gfortran.dg/contains_empty_1.f03", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains_empty_1.f03", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains_empty_1.f03", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains_empty_1.f03?ref=6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "patch": "@@ -2,10 +2,10 @@\n ! { dg-options \"-std=f2003 -pedantic\" }\n program test\n   print *, 'hello there'\n-contains\n-end program test ! { dg-error \"Fortran 2008: CONTAINS statement without\" }\n+contains ! { dg-error \"Fortran 2008: CONTAINS statement without\" }\n+end program test\n \n module truc\n   integer, parameter :: answer = 42\n-contains\n-end module truc ! { dg-error \"Fortran 2008: CONTAINS statement without\" }\n+contains ! { dg-error \"Fortran 2008: CONTAINS statement without\" }\n+end module truc"}, {"sha": "26a2217d28af0795c2415174b8301cc5813c2d6d", "filename": "gcc/testsuite/gfortran.dg/submodule_3.f08", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fsubmodule_3.f08", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fa682ad31f8a1d548338de4539ac506a9a1e7c7/gcc%2Ftestsuite%2Fgfortran.dg%2Fsubmodule_3.f08", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fsubmodule_3.f08?ref=6fa682ad31f8a1d548338de4539ac506a9a1e7c7", "patch": "@@ -21,7 +21,7 @@ character(16) module function array2(this, that) ! { dg-error \"MODULE prefix\" }\n !\n   SUBMODULE (foo_interface) foo_interface_son ! { dg-error \"SUBMODULE declaration\" }\n !\n-  contains\n+  contains ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE\" }\n \n      module function array1 (this) result(that) ! { dg-error \"MODULE prefix\" }\n      end function ! { dg-error \"Expecting END PROGRAM\" }\n@@ -33,5 +33,5 @@ module function array1 (this) result(that) ! { dg-error \"MODULE prefix\" }\n \n   end SUBMODULE foo_interface_son ! { dg-error \"Expecting END PROGRAM\" }\n \n-end ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE\" }\n+end\n "}]}