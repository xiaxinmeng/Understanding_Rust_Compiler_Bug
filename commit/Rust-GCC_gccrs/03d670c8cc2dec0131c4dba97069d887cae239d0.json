{"sha": "03d670c8cc2dec0131c4dba97069d887cae239d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNkNjcwYzhjYzJkZWMwMTMxYzRkYmE5NzA2OWQ4ODdjYWUyMzlkMA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2012-11-22T14:10:47Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2012-11-22T14:10:47Z"}, "message": "Add STATIC_LIBASAN_LIBS for -static-libasan\n\n\t* gcc.c (ADD_STATIC_LIBASAN_LIBS): New macro.  Defined\n\twith STATIC_LIBASAN_LIBS.\n\t(LIBASAN_SPEC): Add STATIC_LIBASAN_LIBS.\n\t* config/gnu-user.h (STATIC_LIBASAN_LIBS): New macro.\n\nFrom-SVN: r193725", "tree": {"sha": "518df44bfe7cd27883ffcc9dccc1119a0873ee5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/518df44bfe7cd27883ffcc9dccc1119a0873ee5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03d670c8cc2dec0131c4dba97069d887cae239d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03d670c8cc2dec0131c4dba97069d887cae239d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03d670c8cc2dec0131c4dba97069d887cae239d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03d670c8cc2dec0131c4dba97069d887cae239d0/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "099f2693499d5066de3a9adc4f32c51727157d2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/099f2693499d5066de3a9adc4f32c51727157d2f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/099f2693499d5066de3a9adc4f32c51727157d2f"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "1e9769195730124bd9eba823d7dc275759010781", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03d670c8cc2dec0131c4dba97069d887cae239d0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03d670c8cc2dec0131c4dba97069d887cae239d0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=03d670c8cc2dec0131c4dba97069d887cae239d0", "patch": "@@ -1,3 +1,10 @@\n+2012-11-22  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* gcc.c (ADD_STATIC_LIBASAN_LIBS): New macro.  Defined\n+\twith STATIC_LIBASAN_LIBS.\n+\t(LIBASAN_SPEC): Add STATIC_LIBASAN_LIBS.\n+\t* config/gnu-user.h (STATIC_LIBASAN_LIBS): New macro.\n+\n 2012-11-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/arm/arm.md (*arm_abssi2): Define predicable attribute."}, {"sha": "8c4bbc6bb62a32e867aca37f0b992a34fc287a96", "filename": "gcc/config/gnu-user.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03d670c8cc2dec0131c4dba97069d887cae239d0/gcc%2Fconfig%2Fgnu-user.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03d670c8cc2dec0131c4dba97069d887cae239d0/gcc%2Fconfig%2Fgnu-user.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgnu-user.h?ref=03d670c8cc2dec0131c4dba97069d887cae239d0", "patch": "@@ -98,3 +98,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n \n #define TARGET_C99_FUNCTIONS 1\n #define TARGET_HAS_SINCOS 1\n+\n+/* Additional libraries needed by -static-libasan.  */\n+#undef STATIC_LIBASAN_LIBS\n+#define STATIC_LIBASAN_LIBS \"-ldl -lpthread\""}, {"sha": "764ee1bf36fd11ca0833fb36a78061b66665733e", "filename": "gcc/gcc.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03d670c8cc2dec0131c4dba97069d887cae239d0/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03d670c8cc2dec0131c4dba97069d887cae239d0/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=03d670c8cc2dec0131c4dba97069d887cae239d0", "patch": "@@ -545,11 +545,18 @@ proper position among the other output files.  */\n #define STACK_SPLIT_SPEC \" %{fsplit-stack: --wrap=pthread_create}\"\n \n #ifndef LIBASAN_SPEC\n+#ifdef STATIC_LIBASAN_LIBS\n+#define ADD_STATIC_LIBASAN_LIBS \\\n+  \" %{static-libasan:\" STATIC_LIBASAN_LIBS \"}\"\n+#else\n+#define ADD_STATIC_LIBASAN_LIBS\n+#endif\n #ifdef HAVE_LD_STATIC_DYNAMIC\n #define LIBASAN_SPEC \"%{static-libasan:\" LD_STATIC_OPTION \\\n-\t\t     \"} -lasan %{static-libasan:\" LD_DYNAMIC_OPTION \"}\"\n+\t\t     \"} -lasan %{static-libasan:\" LD_DYNAMIC_OPTION \"}\" \\\n+\t\t     ADD_STATIC_LIBASAN_LIBS\n #else\n-#define LIBASAN_SPEC \"-lasan\"\n+#define LIBASAN_SPEC \"-lasan\" ADD_STATIC_LIBASAN_LIBS\n #endif\n #endif\n "}]}