{"sha": "b9e467a24acb203f5a087721a74943a3af67f16a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjllNDY3YTI0YWNiMjAzZjVhMDg3NzIxYTc0OTQzYTNhZjY3ZjE2YQ==", "commit": {"author": {"name": "Basile Starynkevitch", "email": "basile@starynkevitch.net", "date": "2009-10-13T14:58:11Z"}, "committer": {"name": "Basile Starynkevitch", "email": "bstarynk@gcc.gnu.org", "date": "2009-10-13T14:58:11Z"}, "message": "passes.c (register_pass): Replaced gcc_unreachable by fatal_error on failure.\n\n\n2009-10-13  Basile Starynkevitch  <basile@starynkevitch.net>\n    * gcc/passes.c (register_pass): Replaced gcc_unreachable by\n    fatal_error on failure. Mentions plugins in comments & messages.\n\nFrom-SVN: r152709", "tree": {"sha": "65b28e352bda503a353f6ef20fab063733eeb5f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/65b28e352bda503a353f6ef20fab063733eeb5f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9e467a24acb203f5a087721a74943a3af67f16a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9e467a24acb203f5a087721a74943a3af67f16a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9e467a24acb203f5a087721a74943a3af67f16a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9e467a24acb203f5a087721a74943a3af67f16a/comments", "author": {"login": "bstarynk", "id": 90412, "node_id": "MDQ6VXNlcjkwNDEy", "avatar_url": "https://avatars.githubusercontent.com/u/90412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstarynk", "html_url": "https://github.com/bstarynk", "followers_url": "https://api.github.com/users/bstarynk/followers", "following_url": "https://api.github.com/users/bstarynk/following{/other_user}", "gists_url": "https://api.github.com/users/bstarynk/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstarynk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstarynk/subscriptions", "organizations_url": "https://api.github.com/users/bstarynk/orgs", "repos_url": "https://api.github.com/users/bstarynk/repos", "events_url": "https://api.github.com/users/bstarynk/events{/privacy}", "received_events_url": "https://api.github.com/users/bstarynk/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a018595e87017b5f77a791b20dadf45e7cb25e58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a018595e87017b5f77a791b20dadf45e7cb25e58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a018595e87017b5f77a791b20dadf45e7cb25e58"}], "stats": {"total": 30, "additions": 21, "deletions": 9}, "files": [{"sha": "e2a71f9b5ce920d97624169eda1e9b50a42a09f6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9e467a24acb203f5a087721a74943a3af67f16a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9e467a24acb203f5a087721a74943a3af67f16a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b9e467a24acb203f5a087721a74943a3af67f16a", "patch": "@@ -1,3 +1,8 @@\n+\n+2009-10-13  Basile Starynkevitch  <basile@starynkevitch.net>\n+    * passes.c (register_pass): Replaced gcc_unreachable by\n+    fatal_error on failure. Mentions plugins in comments & messages.\n+\n 2009-10-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/41693"}, {"sha": "5a472156aa28e80aea46d94a5c17c941b4b98df9", "filename": "gcc/passes.c", "status": "modified", "additions": 16, "deletions": 9, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9e467a24acb203f5a087721a74943a3af67f16a/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9e467a24acb203f5a087721a74943a3af67f16a/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=b9e467a24acb203f5a087721a74943a3af67f16a", "patch": "@@ -600,24 +600,31 @@ position_pass (struct register_pass_info *new_pass_info,\n void\n register_pass (struct register_pass_info *pass_info)\n {\n+  /* The checks below could fail in buggy plugins.  Existing GCC\n+     passes should never fail these checks, so we mention plugin in\n+     the messages.  */\n   if (!pass_info->pass)\n-    {\n-      gcc_unreachable ();\n-    } \n+      fatal_error (\"plugin cannot register a missing pass\");\n+\n+  if (!pass_info->pass->name)\n+      fatal_error (\"plugin cannot register an unnamed pass\");\n \n   if (!pass_info->reference_pass_name)\n-    {\n-      gcc_unreachable ();\n-    }\n+      fatal_error\n+\t(\"plugin cannot register pass %qs without reference pass name\",\n+\t pass_info->pass->name);\n \n-  /* Try to insert the new pass to the pass lists. We need to check all\n-     three lists as the reference pass could be in one (or all) of them.  */\n+  /* Try to insert the new pass to the pass lists.  We need to check\n+     all three lists as the reference pass could be in one (or all) of\n+     them.  */\n   if (!position_pass (pass_info, &all_lowering_passes)\n       && !position_pass (pass_info, &all_small_ipa_passes)\n       && !position_pass (pass_info, &all_regular_ipa_passes)\n       && !position_pass (pass_info, &all_lto_gen_passes)\n       && !position_pass (pass_info, &all_passes))\n-    gcc_unreachable ();\n+    fatal_error\n+      (\"pass %qs not found but is referenced by new pass %qs\",\n+       pass_info->reference_pass_name, pass_info->pass->name);\n   else\n     {\n       /* OK, we have successfully inserted the new pass. We need to register"}]}