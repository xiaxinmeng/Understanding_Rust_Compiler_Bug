{"sha": "ee7b8369c2babb18188722d55fc2d5476ceca115", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWU3YjgzNjljMmJhYmIxODE4ODcyMmQ1NWZjMmQ1NDc2Y2VjYTExNQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "1999-10-20T12:39:01Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "1999-10-20T12:39:01Z"}, "message": "(merge_blocks_move_predecessor_nojumps): Re-order the basic block records so...\n\n(merge_blocks_move_predecessor_nojumps): Re-order the basic\nblock records so that merge_blocks_nomove will clean up correctly.\n\nFrom-SVN: r30100", "tree": {"sha": "6152adf70398cd3ab6b4380c422bc304208173a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6152adf70398cd3ab6b4380c422bc304208173a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee7b8369c2babb18188722d55fc2d5476ceca115", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee7b8369c2babb18188722d55fc2d5476ceca115", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee7b8369c2babb18188722d55fc2d5476ceca115", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee7b8369c2babb18188722d55fc2d5476ceca115/comments", "author": null, "committer": null, "parents": [{"sha": "dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dc9e9f3f8891dad8aad9bf346a68bedeae82c03f"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "de82cea92939271a09bb962b811005b5e3307097", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee7b8369c2babb18188722d55fc2d5476ceca115/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee7b8369c2babb18188722d55fc2d5476ceca115/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee7b8369c2babb18188722d55fc2d5476ceca115", "patch": "@@ -2,6 +2,9 @@ Wed Oct 20 10:46:41 1999  Richard Earnshaw (rearnsha@arm.com)\n \n \t* jump.c (jump_optimize_1): More accurately detect casesi insns.\n \n+\t* flow.c (merge_blocks_move_predecessor_nojumps): Re-order the basic\n+\tblock records so that merge_blocks_nomove will clean up correctly.\n+\n Tue Oct 19 23:43:50 1999  Jeffrey A Law  (law@cygnus.com)\n \n \t* pa.md (call, call_value): Do not emit a blockage after restoring"}, {"sha": "fcefe0aaa2c5251145db2b0da9f2fbdc65cfbb33", "filename": "gcc/flow.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee7b8369c2babb18188722d55fc2d5476ceca115/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee7b8369c2babb18188722d55fc2d5476ceca115/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=ee7b8369c2babb18188722d55fc2d5476ceca115", "patch": "@@ -2006,6 +2006,7 @@ merge_blocks_move_predecessor_nojumps (a, b)\n      basic_block a, b;\n {\n   rtx start, end, insertpoint, barrier;\n+  int index;\n \n   start = a->head;\n   end = a->end;\n@@ -2037,15 +2038,24 @@ merge_blocks_move_predecessor_nojumps (a, b)\n   /* Scramble the insn chain.  */\n   reorder_insns (start, end, insertpoint);\n \n-  /* Now blocks A and B are contiguous.  Merge them.  */\n-  merge_blocks_nomove (a, b);\n-\n   if (rtl_dump_file)\n     {\n       fprintf (rtl_dump_file, \"Moved block %d before %d and merged.\\n\",\n \t       a->index, b->index);\n     }\n \n+  /* Swap the records for the two blocks around.  Although we are deleting B,\n+     A is now where B was and we want to compact the BB array from where\n+     A used to be.  */\n+  BASIC_BLOCK(a->index) = b;\n+  BASIC_BLOCK(b->index) = a;\n+  index = a->index;\n+  a->index = b->index;\n+  b->index = index;\n+  \n+  /* Now blocks A and B are contiguous.  Merge them.  */\n+  merge_blocks_nomove (a, b);\n+\n   return 1;\n }\n "}]}