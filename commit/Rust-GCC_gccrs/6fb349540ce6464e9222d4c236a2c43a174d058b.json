{"sha": "6fb349540ce6464e9222d4c236a2c43a174d058b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZiMzQ5NTQwY2U2NDY0ZTkyMjJkNGMyMzZhMmM0M2ExNzRkMDU4Yg==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2019-11-04T14:05:24Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2019-11-04T14:05:24Z"}, "message": "system.h: Include malloc.h if INCLUDE_MALLOC_H and HAVE_MALLINFO.\n\n2019-11-04  Richard Biener  <rguenther@suse.de>\n\n\t* system.h: Include malloc.h if INCLUDE_MALLOC_H and HAVE_MALLINFO.\n\t* ggc-common.c: Remove inclusion of malloc.h, define INCLUDE_MALLOC_H.\n\nFrom-SVN: r277779", "tree": {"sha": "3e98900b6ea727f70412a326d7bbd6f069a1160d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e98900b6ea727f70412a326d7bbd6f069a1160d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6fb349540ce6464e9222d4c236a2c43a174d058b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fb349540ce6464e9222d4c236a2c43a174d058b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fb349540ce6464e9222d4c236a2c43a174d058b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fb349540ce6464e9222d4c236a2c43a174d058b/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "253f29f1adefd9bc9808addd4498e6b9cea7827b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/253f29f1adefd9bc9808addd4498e6b9cea7827b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/253f29f1adefd9bc9808addd4498e6b9cea7827b"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "b53c793d6c20ab71fda6e176b60f4a3e39b63125", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fb349540ce6464e9222d4c236a2c43a174d058b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fb349540ce6464e9222d4c236a2c43a174d058b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6fb349540ce6464e9222d4c236a2c43a174d058b", "patch": "@@ -1,3 +1,8 @@\n+2019-11-04  Richard Biener  <rguenther@suse.de>\n+\n+\t* system.h: Include malloc.h if INCLUDE_MALLOC_H and HAVE_MALLINFO.\n+\t* ggc-common.c: Remove inclusion of malloc.h, define INCLUDE_MALLOC_H.\n+\n 2019-11-04  David Edelsohn  <dje.gcc@gmail.com>\n \n \t* ggc-common.c: Include system.h before malloc.h."}, {"sha": "a7edb1591f854b8125fc0061ebca4de8642d7f2e", "filename": "gcc/ggc-common.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fb349540ce6464e9222d4c236a2c43a174d058b/gcc%2Fggc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fb349540ce6464e9222d4c236a2c43a174d058b/gcc%2Fggc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fggc-common.c?ref=6fb349540ce6464e9222d4c236a2c43a174d058b", "patch": "@@ -21,10 +21,8 @@ along with GCC; see the file COPYING3.  If not see\n    any particular GC implementation.  */\n \n #include \"config.h\"\n+#define INCLUDE_MALLOC_H\n #include \"system.h\"\n-#ifdef HAVE_MALLINFO\n-#include <malloc.h>\n-#endif\n #include \"coretypes.h\"\n #include \"timevar.h\"\n #include \"diagnostic-core.h\""}, {"sha": "3ef668f550899d3289dad05182e0e0034f11f2ec", "filename": "gcc/system.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fb349540ce6464e9222d4c236a2c43a174d058b/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fb349540ce6464e9222d4c236a2c43a174d058b/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=6fb349540ce6464e9222d4c236a2c43a174d058b", "patch": "@@ -730,6 +730,12 @@ extern int vsnprintf (char *, size_t, const char *, va_list);\n # include \"unique-ptr.h\"\n #endif\n \n+#ifdef INCLUDE_MALLOC_H\n+#ifdef HAVE_MALLINFO\n+#include <malloc.h>\n+#endif\n+#endif\n+\n /* Redefine abort to report an internal error w/o coredump, and\n    reporting the location of the error in the source file.  */\n extern void fancy_abort (const char *, int, const char *)"}]}