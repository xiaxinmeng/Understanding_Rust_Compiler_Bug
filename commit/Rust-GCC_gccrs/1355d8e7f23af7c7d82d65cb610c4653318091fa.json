{"sha": "1355d8e7f23af7c7d82d65cb610c4653318091fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTM1NWQ4ZTdmMjNhZjdjN2Q4MmQ2NWNiNjEwYzQ2NTMzMTgwOTFmYQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2007-02-28T08:03:47Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2007-02-28T08:03:47Z"}, "message": "re PR fortran/30968 ([4.1 only] Bogus warning with continued lines of concatenated strings)\n\n2007-02-28  Tobias Burnus  <burnus@net-b.de>\n\n\tPR fortran/30968\n\t* primary.c (next_string_char): Correct reading a character\n\tafter the delimiter.\n\t(match_string_constant): Print warning message only once.\n\n2007-02-28  Tobias Burnus  <burnus@net-b.de>\n\n\tPR fortran/30968\n\t* gfortran.dg/continuation_7.f90: New test.\n\nFrom-SVN: r122401", "tree": {"sha": "829d7f7b224cee40a9d8e2a04c4502dfdc321ec6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/829d7f7b224cee40a9d8e2a04c4502dfdc321ec6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1355d8e7f23af7c7d82d65cb610c4653318091fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1355d8e7f23af7c7d82d65cb610c4653318091fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1355d8e7f23af7c7d82d65cb610c4653318091fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1355d8e7f23af7c7d82d65cb610c4653318091fa/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d5b7e9722dfdc89b8b8ee5e4070621a1631ff696", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5b7e9722dfdc89b8b8ee5e4070621a1631ff696", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5b7e9722dfdc89b8b8ee5e4070621a1631ff696"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "32bf7e63da5874b9a530761839844f16ff25d959", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1355d8e7f23af7c7d82d65cb610c4653318091fa", "patch": "@@ -1,3 +1,10 @@\n+2007-02-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/30968\n+\t* primary.c (next_string_char): Correct reading a character\n+\tafter the delimiter.\n+\t(match_string_constant): Print warning message only once.\n+\n 2007-02-27  Richard Guenther  <rguenther@suse.de>\n \n \t* trans-array.c (structure_alloc_comps): Use correct type"}, {"sha": "3044703357ac3fa9e28d4d3000c18949cf536d5f", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=1355d8e7f23af7c7d82d65cb610c4653318091fa", "patch": "@@ -773,7 +773,7 @@ next_string_char (char delimiter)\n     return c;\n \n   old_locus = gfc_current_locus;\n-  c = gfc_next_char_literal (1);\n+  c = gfc_next_char_literal (0);\n \n   if (c == delimiter)\n     return c;\n@@ -852,7 +852,7 @@ static match\n match_string_constant (gfc_expr **result)\n {\n   char *p, name[GFC_MAX_SYMBOL_LEN + 1];\n-  int i, c, kind, length, delimiter;\n+  int i, c, kind, length, delimiter, warn_ampersand;\n   locus old_locus, start_locus;\n   gfc_symbol *sym;\n   gfc_expr *e;\n@@ -979,10 +979,16 @@ match_string_constant (gfc_expr **result)\n   gfc_current_locus = start_locus;\n   gfc_next_char ();\t\t/* Skip delimiter */\n \n+  /* We disable the warning for the following loop as the warning has already\n+     been printed in the loop above.  */\n+  warn_ampersand = gfc_option.warn_ampersand;\n+  gfc_option.warn_ampersand = 0;\n+\n   for (i = 0; i < length; i++)\n     *p++ = next_string_char (delimiter);\n \n   *p = '\\0';\t/* TODO: C-style string is for development/debug purposes.  */\n+  gfc_option.warn_ampersand = warn_ampersand;\n \n   if (next_string_char (delimiter) != -1)\n     gfc_internal_error (\"match_string_constant(): Delimiter not found\");"}, {"sha": "1261449aa7276c07b7c4409efa946f7380441586", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1355d8e7f23af7c7d82d65cb610c4653318091fa", "patch": "@@ -1,3 +1,8 @@\n+2007-02-28  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/30968\n+\t* gfortran.dg/continuation_7.f90: New test.\n+\n 2007-02-28  Bernd Schmidt  <bernd.schmidt@analog.com>\n \n \t* g++.dg/inherit/thunk7.C: New test."}, {"sha": "0a761889ba99c2d060ed5bea60535783d66d00b1", "filename": "gcc/testsuite/gfortran.dg/continuation_7.f90", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_7.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1355d8e7f23af7c7d82d65cb610c4653318091fa/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_7.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontinuation_7.f90?ref=1355d8e7f23af7c7d82d65cb610c4653318091fa", "patch": "@@ -0,0 +1,22 @@\n+! { dg-do \"compile\" }\n+! { dg-options \"-Wall -std=f95\" }\n+! There should only two warnings be printed.\n+! PR fortran/30968\n+print *, \"Foo bar&\n+        &Bar foo\"\n+print *, \"Foo bar&\n+        Bar foo\" ! { dg-warning \"Missing '&' in continued character constant\" }\n+print *, \"Foo bar\"&\n+        &, \"Bar foo\"\n+print *, \"Foo bar\"&\n+        , \"Bar foo\"\n+\n+print '(&\n+    a)', 'Hello' ! { dg-warning \"Missing '&' in continued character constant\" }\n+print '(&\n+   &a)', 'Hello'\n+print '('&\n+   &//'a)', 'Hello'\n+print '('&\n+   // \"a)\", 'Hello'\n+end"}]}