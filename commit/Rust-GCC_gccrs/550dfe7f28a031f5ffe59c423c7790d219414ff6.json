{"sha": "550dfe7f28a031f5ffe59c423c7790d219414ff6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTUwZGZlN2YyOGEwMzFmNWZmZTU5YzQyM2M3NzkwZDIxOTQxNGZmNg==", "commit": {"author": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2013-09-25T07:48:47Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2013-09-25T07:48:47Z"}, "message": "re PR c++/58516 (ICE with __transaction_atomic)\n\n\tPR c++/58516\ncp/\n\t* semantics.c (finish_transaction_stmt): Check for EXPR_P before\n\tsetting the expr location.\n\ntestsuite/\n\t* g++.dg/tm/pr58516.C: New test.\n\nFrom-SVN: r202883", "tree": {"sha": "4cf8e83b7c042a6b7a6eba0f1e6ae6fb83762c51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4cf8e83b7c042a6b7a6eba0f1e6ae6fb83762c51"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/550dfe7f28a031f5ffe59c423c7790d219414ff6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/550dfe7f28a031f5ffe59c423c7790d219414ff6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/550dfe7f28a031f5ffe59c423c7790d219414ff6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/550dfe7f28a031f5ffe59c423c7790d219414ff6/comments", "author": null, "committer": null, "parents": [{"sha": "28d18db363050e2e8122d202cd59d131a3ffa167", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28d18db363050e2e8122d202cd59d131a3ffa167", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28d18db363050e2e8122d202cd59d131a3ffa167"}], "stats": {"total": 28, "additions": 24, "deletions": 4}, "files": [{"sha": "5cbc070040ed8a6f9c3dd083093c5fb1e71e9733", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=550dfe7f28a031f5ffe59c423c7790d219414ff6", "patch": "@@ -1,3 +1,9 @@\n+2013-09-25  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/58516\n+\t* semantics.c (finish_transaction_stmt): Check for EXPR_P before\n+\tsetting the expr location.\n+\n 2013-09-23  Adam Butcher  <adam@jessamine.co.uk>\n \n \tPR c++/58500"}, {"sha": "13277948bf4355d7bbdd9ae7b0aa3759752f3ba2", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=550dfe7f28a031f5ffe59c423c7790d219414ff6", "patch": "@@ -5199,7 +5199,9 @@ finish_transaction_stmt (tree stmt, tree compound_stmt, int flags, tree noex)\n     {\n       tree body = build_must_not_throw_expr (TRANSACTION_EXPR_BODY (stmt),\n \t\t\t\t\t     noex);\n-      SET_EXPR_LOCATION (body, EXPR_LOCATION (TRANSACTION_EXPR_BODY (stmt)));\n+      /* This may not be true when the STATEMENT_LIST is empty.  */\n+      if (EXPR_P (body))\n+        SET_EXPR_LOCATION (body, EXPR_LOCATION (TRANSACTION_EXPR_BODY (stmt)));\n       TREE_SIDE_EFFECTS (body) = 1;\n       TRANSACTION_EXPR_BODY (stmt) = body;\n     }"}, {"sha": "68e38cc94196c2090309a4d42da24d6fc92573d1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=550dfe7f28a031f5ffe59c423c7790d219414ff6", "patch": "@@ -1,8 +1,13 @@\n+2013-09-25  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR c++/58516\n+\t* g++.dg/tm/pr58516.C: New test.\n+\n 2013-09-24  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n-    * lib/target-supports.exp (check_effective_target_arm_cond_exec):\n-    New procedure.\n-    * gcc.target/arm/minmax_minus.c: Check for cond_exec target.\n+\t* lib/target-supports.exp (check_effective_target_arm_cond_exec):\n+\tNew procedure.\n+\t* gcc.target/arm/minmax_minus.c: Check for cond_exec target.\n \n 2013-09-24  Richard Biener  <rguenther@suse.de>\n "}, {"sha": "b1ada3c8c1df7e00bfc3443dec577aed9d24652b", "filename": "gcc/testsuite/g++.dg/tm/pr58516.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftm%2Fpr58516.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/550dfe7f28a031f5ffe59c423c7790d219414ff6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftm%2Fpr58516.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftm%2Fpr58516.C?ref=550dfe7f28a031f5ffe59c423c7790d219414ff6", "patch": "@@ -0,0 +1,7 @@\n+// { dg-do compile }\n+// { dg-options \"-std=c++11 -fgnu-tm\" }\n+\n+void foo()\n+{\n+  __transaction_atomic noexcept(false) {}\n+}"}]}