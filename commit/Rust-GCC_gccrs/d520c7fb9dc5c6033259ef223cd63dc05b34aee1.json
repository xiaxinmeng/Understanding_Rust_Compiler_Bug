{"sha": "d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUyMGM3ZmI5ZGM1YzYwMzMyNTllZjIyM2NkNjNkYzA1YjM0YWVlMQ==", "commit": {"author": {"name": "Rafael Avila de Espindola", "email": "espindola@google.com", "date": "2009-10-08T13:59:32Z"}, "committer": {"name": "Rafael Espindola", "email": "espindola@gcc.gnu.org", "date": "2009-10-08T13:59:32Z"}, "message": "lto-plugin.c (add_input_library): New.\n\n2009-10-08  Rafael Avila de Espindola  <espindola@google.com>\n\n\t* lto-plugin.c (add_input_library): New.\n\t(all_symbols_read_handler): Use add_input_library for items that\n\tstart with -l.\n\t(process_option): Fit in 80 columns.\n\t(onload): Handle LDPT_ADD_INPUT_LIBRARY.\n\n2009-10-08  Rafael Avila de Espindola  <espindola@google.com>\n\n\t* gcc.c (LINK_COMMAND_SPEC): Pass libc with -pass-through if it is\n\tbeing statically linked.\n\nFrom-SVN: r152558", "tree": {"sha": "0ba2664c4b1be2ad1cda3f03ee68b336b1cd342e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ba2664c4b1be2ad1cda3f03ee68b336b1cd342e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/comments", "author": null, "committer": null, "parents": [{"sha": "d72ff618d3477947f78c058e1d9e8249ddb9015b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d72ff618d3477947f78c058e1d9e8249ddb9015b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d72ff618d3477947f78c058e1d9e8249ddb9015b"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "8f0ba61031f567d408b80a4167d93b58fd450009", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "patch": "@@ -1,3 +1,8 @@\n+2009-10-08  Rafael Avila de Espindola  <espindola@google.com>\n+\n+\t* gcc.c (LINK_COMMAND_SPEC): Pass libc with -pass-through if it is\n+\tbeing statically linked.\n+\n 2009-10-08  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* collect2.c (add_lto_object): Only define if OBJECT_FORMAT_NONE."}, {"sha": "1891adb45bc63f062e7975745104f850423aa4c3", "filename": "gcc/gcc.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "patch": "@@ -775,6 +775,7 @@ proper position among the other output files.  */\n     -plugin-opt=%(lto_wrapper) \\\n     -plugin-opt=%(lto_gcc) \\\n     %{static|static-libgcc:-plugin-opt=-pass-through=%(lto_libgcc)}\t\\\n+    %{static:-plugin-opt=-pass-through=-lc}\t\\\n     %{O*:-plugin-opt=-O%*} \\\n     %{w:-plugin-opt=-w} \\\n     %{f*:-plugin-opt=-f%*} \\"}, {"sha": "cabfcca9f2ee8661ff8abde99c35d52d918920a7", "filename": "lto-plugin/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/lto-plugin%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/lto-plugin%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2FChangeLog?ref=d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "patch": "@@ -1,3 +1,11 @@\n+2009-10-08  Rafael Avila de Espindola  <espindola@google.com>\n+\n+\t* lto-plugin.c (add_input_library): New.\n+\t(all_symbols_read_handler): Use add_input_library for items that\n+\tstart with -l.\n+\t(process_option): Fit in 80 columns.\n+\t(onload): Handle LDPT_ADD_INPUT_LIBRARY.\n+\n 2009-10-02  Diego Novillo  <dnovillo@google.com>\n \n \t* Makefile.am (AM_CPPFLAGS): Remove -D_LARGEFILE_SOURCE"}, {"sha": "71b4961496cc20051f4a155c93480db0a79d3809", "filename": "lto-plugin/lto-plugin.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/lto-plugin%2Flto-plugin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d520c7fb9dc5c6033259ef223cd63dc05b34aee1/lto-plugin%2Flto-plugin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2Flto-plugin.c?ref=d520c7fb9dc5c6033259ef223cd63dc05b34aee1", "patch": "@@ -81,6 +81,7 @@ static ld_plugin_register_all_symbols_read register_all_symbols_read;\n static ld_plugin_get_symbols get_symbols;\n static ld_plugin_register_cleanup register_cleanup;\n static ld_plugin_add_input_file add_input_file;\n+static ld_plugin_add_input_library add_input_library;\n \n static struct plugin_file_info *claimed_files = NULL;\n static unsigned int num_claimed_files = 0;\n@@ -467,7 +468,10 @@ all_symbols_read_handler (void)\n       unsigned int i;\n       for (i = 0; i < num_pass_through_items; i++)\n         {\n-          add_input_file (pass_through_items[i]);\n+          if (strncmp (pass_through_items[i], \"-l\", 2) == 0)\n+            add_input_library (pass_through_items[i] + 2);\n+          else\n+            add_input_file (pass_through_items[i]);\n           free (pass_through_items[i]);\n           pass_through_items[i] = NULL;\n         }\n@@ -607,8 +611,10 @@ process_option (const char *option)\n   else if (!strncmp (option, \"-pass-through=\", strlen(\"-pass-through=\")))\n     {\n       num_pass_through_items++;\n-      pass_through_items = realloc (pass_through_items, num_pass_through_items * sizeof (char *));\n-      pass_through_items[num_pass_through_items - 1] = strdup (option + strlen (\"-pass-through=\"));\n+      pass_through_items = realloc (pass_through_items,\n+                                    num_pass_through_items * sizeof (char *));\n+      pass_through_items[num_pass_through_items - 1] =\n+          strdup (option + strlen (\"-pass-through=\"));\n     }\n   else\n     {\n@@ -655,6 +661,9 @@ onload (struct ld_plugin_tv *tv)\n \tcase LDPT_ADD_INPUT_FILE:\n \t  add_input_file = p->tv_u.tv_add_input_file;\n \t  break;\n+\tcase LDPT_ADD_INPUT_LIBRARY:\n+\t  add_input_library = p->tv_u.tv_add_input_library;\n+\t  break;\n \tcase LDPT_OPTION:\n \t  process_option (p->tv_u.tv_string);\n \t  break;"}]}