{"sha": "fbf7be801c91a75bfae7b43cd169620743ba1f52", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJmN2JlODAxYzkxYTc1YmZhZTdiNDNjZDE2OTYyMDc0M2JhMWY1Mg==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2011-12-09T02:21:43Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2011-12-09T02:21:43Z"}, "message": "re PR libgomp/51376 (libgomp taskwait failure)\n\n\tPR libgomp/51376\n\t* task.c (GOMP_taskwait): Don't access task->children outside of\n\ttask_lock mutex region.\n\t(GOMP_task): Likewise.\n\nFrom-SVN: r182151", "tree": {"sha": "34b694493aa13f6544581b57928cb2b0a952d54a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34b694493aa13f6544581b57928cb2b0a952d54a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbf7be801c91a75bfae7b43cd169620743ba1f52", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbf7be801c91a75bfae7b43cd169620743ba1f52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbf7be801c91a75bfae7b43cd169620743ba1f52", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbf7be801c91a75bfae7b43cd169620743ba1f52/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "108ba412c4c375613a49bd02508fe1e776037576", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/108ba412c4c375613a49bd02508fe1e776037576", "html_url": "https://github.com/Rust-GCC/gccrs/commit/108ba412c4c375613a49bd02508fe1e776037576"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "6af961d93b0f78bbd54918bf8b3fb65f1cb2195a", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf7be801c91a75bfae7b43cd169620743ba1f52/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf7be801c91a75bfae7b43cd169620743ba1f52/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=fbf7be801c91a75bfae7b43cd169620743ba1f52", "patch": "@@ -1,3 +1,10 @@\n+2011-12-09  Alan Modra  <amodra@gmail.com>\n+\n+\tPR libgomp/51376\n+\t* task.c (GOMP_taskwait): Don't access task->children outside of\n+\ttask_lock mutex region.\n+\t(GOMP_task): Likewise.\n+\n 2011-12-06  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR libgomp/51132"}, {"sha": "4b75850072bb450ff6f55ff16e1dd51c20d000e4", "filename": "libgomp/task.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbf7be801c91a75bfae7b43cd169620743ba1f52/libgomp%2Ftask.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbf7be801c91a75bfae7b43cd169620743ba1f52/libgomp%2Ftask.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftask.c?ref=fbf7be801c91a75bfae7b43cd169620743ba1f52", "patch": "@@ -116,10 +116,11 @@ GOMP_task (void (*fn) (void *), void *data, void (*cpyfn) (void *, void *),\n \t}\n       else\n \tfn (data);\n-      if (task.children)\n+      if (team != NULL)\n \t{\n \t  gomp_mutex_lock (&team->task_lock);\n-\t  gomp_clear_parent (task.children);\n+\t  if (task.children != NULL)\n+\t    gomp_clear_parent (task.children);\n \t  gomp_mutex_unlock (&team->task_lock);\n \t}\n       gomp_end_task ();\n@@ -290,8 +291,9 @@ GOMP_taskwait (void)\n   struct gomp_task *child_task = NULL;\n   struct gomp_task *to_free = NULL;\n \n-  if (task == NULL || task->children == NULL)\n+  if (task == NULL || team == NULL)\n     return;\n+\n   gomp_mutex_lock (&team->task_lock);\n   while (1)\n     {"}]}