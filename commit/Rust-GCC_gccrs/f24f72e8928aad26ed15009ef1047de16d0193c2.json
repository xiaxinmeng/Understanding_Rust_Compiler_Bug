{"sha": "f24f72e8928aad26ed15009ef1047de16d0193c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI0ZjcyZTg5MjhhYWQyNmVkMTUwMDllZjEwNDdkZTE2ZDAxOTNjMg==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2007-06-06T10:28:45Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-06-06T10:28:45Z"}, "message": "g-catiio.ads, [...] (Image): Check for null picture string\n\n2007-04-20  Robert Dewar  <dewar@adacore.com>\n\n\t* g-catiio.ads, g-catiio.adb (Image): Check for null picture string\n\nFrom-SVN: r125413", "tree": {"sha": "26815fd1d08bb4d694ccbb28dc36830707549b12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26815fd1d08bb4d694ccbb28dc36830707549b12"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f24f72e8928aad26ed15009ef1047de16d0193c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f24f72e8928aad26ed15009ef1047de16d0193c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f24f72e8928aad26ed15009ef1047de16d0193c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f24f72e8928aad26ed15009ef1047de16d0193c2/comments", "author": null, "committer": null, "parents": [{"sha": "a2fd0ecb6e52f5193f3378eee368a9153b075933", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2fd0ecb6e52f5193f3378eee368a9153b075933", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2fd0ecb6e52f5193f3378eee368a9153b075933"}], "stats": {"total": 39, "additions": 28, "deletions": 11}, "files": [{"sha": "f0174d5266a1a66ab8afd46bde5488582a6afd52", "filename": "gcc/ada/g-catiio.adb", "status": "modified", "additions": 26, "deletions": 9, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f24f72e8928aad26ed15009ef1047de16d0193c2/gcc%2Fada%2Fg-catiio.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f24f72e8928aad26ed15009ef1047de16d0193c2/gcc%2Fada%2Fg-catiio.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-catiio.adb?ref=f24f72e8928aad26ed15009ef1047de16d0193c2", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---                     Copyright (C) 1999-2006, AdaCore                     --\n+--                     Copyright (C) 1999-2007, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -202,33 +202,47 @@ package body GNAT.Calendar.Time_IO is\n       Second     : Second_Number;\n       Sub_Second : Second_Duration;\n \n-      P : Positive := Picture'First;\n+      P : Positive;\n \n    begin\n+      --  Get current time in split format\n+\n       Split (Date, Year, Month, Day, Hour, Minute, Second, Sub_Second);\n \n-      loop\n+      --  Null picture string is error\n+\n+      if Picture = \"\" then\n+         raise Picture_Error with \"null picture string\";\n+      end if;\n+\n+      --  Loop through characters of picture string, building result\n+\n+      Result := Null_Unbounded_String;\n+      P := Picture'First;\n+      while P <= Picture'Last loop\n+\n          --  A directive has the following format \"%[-_].\"\n \n          if Picture (P) = '%' then\n             Padding := Zero;\n \n             if P = Picture'Last then\n-               raise Picture_Error;\n+               raise Picture_Error with \"picture string ends with '%\";\n             end if;\n \n             --  Check for GNU extension to change the padding\n \n             if Picture (P + 1) = '-' then\n                Padding := None;\n                P := P + 1;\n+\n             elsif Picture (P + 1) = '_' then\n                Padding := Space;\n                P := P + 1;\n             end if;\n \n             if P = Picture'Last then\n-               raise Picture_Error;\n+               raise Picture_Error with \"picture string ends with '- or '_\";\n             end if;\n \n             case Picture (P + 1) is\n@@ -462,18 +476,21 @@ package body GNAT.Calendar.Time_IO is\n                   Result := Result & Image (Year, None, 4);\n \n                when others =>\n-                  raise Picture_Error;\n+                  raise Picture_Error with\n+                    \"unknown format character in picture string\";\n+\n             end case;\n \n+            --  Skip past % and format character\n+\n             P := P + 2;\n \n+         --  Character other than % is copied into the result\n+\n          else\n             Result := Result & Picture (P);\n             P := P + 1;\n          end if;\n-\n-         exit when P > Picture'Last;\n-\n       end loop;\n \n       return To_String (Result);"}, {"sha": "48abe6a14d424751a4267685e5ba57c8cda87b77", "filename": "gcc/ada/g-catiio.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f24f72e8928aad26ed15009ef1047de16d0193c2/gcc%2Fada%2Fg-catiio.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f24f72e8928aad26ed15009ef1047de16d0193c2/gcc%2Fada%2Fg-catiio.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-catiio.ads?ref=f24f72e8928aad26ed15009ef1047de16d0193c2", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---                     Copyright (C) 1999-2006, AdaCore                     --\n+--                     Copyright (C) 1999-2007, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -114,7 +114,7 @@ package GNAT.Calendar.Time_IO is\n      (Date    : Ada.Calendar.Time;\n       Picture : Picture_String) return String;\n    --  Return Date as a string with format Picture. Raise Picture_Error if\n-   --  picture string is wrong.\n+   --  picture string is null or has an incorrect format.\n \n    function Value (Date : String) return Ada.Calendar.Time;\n    --  Parse the string Date and return its equivalent as a Time value. The"}]}