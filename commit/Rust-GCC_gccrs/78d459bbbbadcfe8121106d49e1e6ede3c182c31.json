{"sha": "78d459bbbbadcfe8121106d49e1e6ede3c182c31", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzhkNDU5YmJiYmFkY2ZlODEyMTEwNmQ0OWUxZTZlZGUzYzE4MmMzMQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@linaro.org", "date": "2017-09-16T20:39:01Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2017-09-16T20:39:01Z"}, "message": "PR82228: Move ncopies calculation in vectorizable_live_operation\n\nThis should have been after the early exit for non-vectorised statements.\n\n2017-09-16  Richard Sandiford  <richard.sandiford@linaro.org>\n\ngcc/\n\tPR tree-optimization/82228\n\t* tree-vect-loop.c (vectorizable_live_operation): Move initialization\n\tof ncopies.\n\nFrom-SVN: r252888", "tree": {"sha": "99026bdf04dab3b9df8fe72a88f68fcd30f100b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99026bdf04dab3b9df8fe72a88f68fcd30f100b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/78d459bbbbadcfe8121106d49e1e6ede3c182c31", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78d459bbbbadcfe8121106d49e1e6ede3c182c31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78d459bbbbadcfe8121106d49e1e6ede3c182c31", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78d459bbbbadcfe8121106d49e1e6ede3c182c31/comments", "author": null, "committer": null, "parents": [{"sha": "4a8d26ab790f160776782c0986eeba58aad5feba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a8d26ab790f160776782c0986eeba58aad5feba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a8d26ab790f160776782c0986eeba58aad5feba"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "e213db6e2a07b52a71aab1d1cc054a267bfd0db5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78d459bbbbadcfe8121106d49e1e6ede3c182c31/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78d459bbbbadcfe8121106d49e1e6ede3c182c31/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=78d459bbbbadcfe8121106d49e1e6ede3c182c31", "patch": "@@ -1,3 +1,9 @@\n+2017-09-16  Richard Sandiford  <richard.sandiford@linaro.org>\n+\n+\tPR tree-optimization/82228\n+\t* tree-vect-loop.c (vectorizable_live_operation): Move initialization\n+\tof ncopies.\n+\n 2017-09-16  Chung-Ju Wu  <jasonwucj@gmail.com>\n \n \t* common/config/nds32/nds32-common.c"}, {"sha": "c7cc79fd76db0ed0fc878fecfa7fdd9f7bde5edd", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78d459bbbbadcfe8121106d49e1e6ede3c182c31/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78d459bbbbadcfe8121106d49e1e6ede3c182c31/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=78d459bbbbadcfe8121106d49e1e6ede3c182c31", "patch": "@@ -7029,11 +7029,6 @@ vectorizable_live_operation (gimple *stmt,\n \n   gcc_assert (STMT_VINFO_LIVE_P (stmt_info));\n \n-  if (slp_node)\n-    ncopies = 1;\n-  else\n-    ncopies = vect_get_num_copies (loop_vinfo, vectype);\n-\n   if (STMT_VINFO_DEF_TYPE (stmt_info) == vect_reduction_def)\n     return false;\n \n@@ -7054,6 +7049,11 @@ vectorizable_live_operation (gimple *stmt,\n       return true;\n     }\n \n+  if (slp_node)\n+    ncopies = 1;\n+  else\n+    ncopies = vect_get_num_copies (loop_vinfo, vectype);\n+\n   if (!vec_stmt)\n     /* No transformation required.  */\n     return true;"}]}