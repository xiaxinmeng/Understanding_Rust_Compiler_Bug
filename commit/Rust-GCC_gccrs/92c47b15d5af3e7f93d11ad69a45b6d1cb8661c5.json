{"sha": "92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5", "node_id": "C_kwDOANBUbNoAKDkyYzQ3YjE1ZDVhZjNlN2Y5M2QxMWFkNjlhNDViNmQxY2I4NjYxYzU", "commit": {"author": {"name": "Matthias Kretz", "email": "m.kretz@gsi.de", "date": "2023-02-20T10:13:44Z"}, "committer": {"name": "Matthias Kretz", "email": "m.kretz@gsi.de", "date": "2023-02-23T14:01:49Z"}, "message": "libstdc++: Fix simd build failure on clang\n\nClang does not support __attribute__ on lambdas. Therefore, only set\n_GLIBCXX_SIMD_ALWAYS_INLINE_LAMBDA if __clang__ is not defined.\n\nSigned-off-by: Matthias Kretz <m.kretz@gsi.de>\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/108030\n\t* include/experimental/bits/simd_detail.h\n\t(_GLIBCXX_SIMD_ALWAYS_INLINE_LAMBDA): Define as empty for\n\t__clang__.", "tree": {"sha": "5b001de53d138da8fb0d642707154b155ff637d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b001de53d138da8fb0d642707154b155ff637d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5/comments", "author": {"login": "mattkretz", "id": 3306474, "node_id": "MDQ6VXNlcjMzMDY0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3306474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattkretz", "html_url": "https://github.com/mattkretz", "followers_url": "https://api.github.com/users/mattkretz/followers", "following_url": "https://api.github.com/users/mattkretz/following{/other_user}", "gists_url": "https://api.github.com/users/mattkretz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattkretz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattkretz/subscriptions", "organizations_url": "https://api.github.com/users/mattkretz/orgs", "repos_url": "https://api.github.com/users/mattkretz/repos", "events_url": "https://api.github.com/users/mattkretz/events{/privacy}", "received_events_url": "https://api.github.com/users/mattkretz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mattkretz", "id": 3306474, "node_id": "MDQ6VXNlcjMzMDY0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3306474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattkretz", "html_url": "https://github.com/mattkretz", "followers_url": "https://api.github.com/users/mattkretz/followers", "following_url": "https://api.github.com/users/mattkretz/following{/other_user}", "gists_url": "https://api.github.com/users/mattkretz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattkretz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattkretz/subscriptions", "organizations_url": "https://api.github.com/users/mattkretz/orgs", "repos_url": "https://api.github.com/users/mattkretz/repos", "events_url": "https://api.github.com/users/mattkretz/events{/privacy}", "received_events_url": "https://api.github.com/users/mattkretz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2e29e2fbeb8936e5c85cefaf547cba42e17e137b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e29e2fbeb8936e5c85cefaf547cba42e17e137b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e29e2fbeb8936e5c85cefaf547cba42e17e137b"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "30cc1ef0eefd41537ab855ae55f993f2a4801a02", "filename": "libstdc++-v3/include/experimental/bits/simd_detail.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Fsimd_detail.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Fsimd_detail.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Fsimd_detail.h?ref=92c47b15d5af3e7f93d11ad69a45b6d1cb8661c5", "patch": "@@ -254,15 +254,16 @@\n \n #ifdef __clang__\n #define _GLIBCXX_SIMD_NORMAL_MATH\n+#define _GLIBCXX_SIMD_ALWAYS_INLINE_LAMBDA\n #else\n #define _GLIBCXX_SIMD_NORMAL_MATH                                              \\\n   [[__gnu__::__optimize__(\"finite-math-only,no-signed-zeros\")]]\n+#define _GLIBCXX_SIMD_ALWAYS_INLINE_LAMBDA __attribute__((__always_inline__))\n #endif\n #define _GLIBCXX_SIMD_NEVER_INLINE [[__gnu__::__noinline__]]\n #define _GLIBCXX_SIMD_INTRINSIC                                                \\\n   [[__gnu__::__always_inline__, __gnu__::__artificial__]] inline\n #define _GLIBCXX_SIMD_ALWAYS_INLINE [[__gnu__::__always_inline__]] inline\n-#define _GLIBCXX_SIMD_ALWAYS_INLINE_LAMBDA __attribute__((__always_inline__))\n #define _GLIBCXX_SIMD_IS_UNLIKELY(__x) __builtin_expect(__x, 0)\n #define _GLIBCXX_SIMD_IS_LIKELY(__x) __builtin_expect(__x, 1)\n "}]}