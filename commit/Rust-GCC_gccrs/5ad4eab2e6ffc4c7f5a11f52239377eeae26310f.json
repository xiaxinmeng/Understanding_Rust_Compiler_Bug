{"sha": "5ad4eab2e6ffc4c7f5a11f52239377eeae26310f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFkNGVhYjJlNmZmYzRjN2Y1YTExZjUyMjM5Mzc3ZWVhZTI2MzEwZg==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-07-26T17:47:25Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-07-30T10:51:36Z"}, "message": "d: Don't generate a PREDICT_EXPR when assert contracts are turned off.\n\nThis expression is just discarded by add_stmt, so never reaches the\nmiddle-end.\n\ngcc/d/ChangeLog:\n\n\t* expr.cc (ExprVisitor::visit (AssertExp *)): Don't generate\n\tPREDICT_EXPR.", "tree": {"sha": "844afcc34639f2f732735c36a8f1692071a6cb50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/844afcc34639f2f732735c36a8f1692071a6cb50"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ad4eab2e6ffc4c7f5a11f52239377eeae26310f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ad4eab2e6ffc4c7f5a11f52239377eeae26310f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ad4eab2e6ffc4c7f5a11f52239377eeae26310f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ad4eab2e6ffc4c7f5a11f52239377eeae26310f/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c18db639a31b9d651b3b997fee331106b25789ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c18db639a31b9d651b3b997fee331106b25789ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c18db639a31b9d651b3b997fee331106b25789ef"}], "stats": {"total": 12, "additions": 3, "deletions": 9}, "files": [{"sha": "73e0abeaa43fddae3f9d9a7fa7e603cf3648cf0a", "filename": "gcc/d/expr.cc", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ad4eab2e6ffc4c7f5a11f52239377eeae26310f/gcc%2Fd%2Fexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ad4eab2e6ffc4c7f5a11f52239377eeae26310f/gcc%2Fd%2Fexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fexpr.cc?ref=5ad4eab2e6ffc4c7f5a11f52239377eeae26310f", "patch": "@@ -2085,15 +2085,9 @@ class ExprVisitor : public Visitor\n       }\n     else\n       {\n-\t/* Assert contracts are turned off, if the contract condition has no\n-\t   side effects can still use it as a predicate for the optimizer.  */\n-\tif (TREE_SIDE_EFFECTS (arg))\n-\t  {\n-\t    this->result_ = void_node;\n-\t    return;\n-\t  }\n-\n-\tassert_fail = build_predict_expr (PRED_NORETURN, NOT_TAKEN);\n+\t/* Assert contracts are turned off.  */\n+\tthis->result_ = void_node;\n+\treturn;\n       }\n \n     /* Build condition that we are asserting in this contract.  */"}]}