{"sha": "b01d215df18ba753746a170125b883befe100d67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjAxZDIxNWRmMThiYTc1Mzc0NmExNzAxMjViODgzYmVmZTEwMGQ2Nw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-12-07T09:57:04Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-12-07T09:57:04Z"}, "message": "Fix @multitable handling in texi2pod.pl\n\nWhile trying out Dennis's Armv8.6-A patch, I noticed that texi2pod.pl\ndidn't handle the new @multitable correctly.  There were two problems:\n\n(1) @multitables nested in other @tables inherited the @item type from\n    the enclosing @table.  Since the new @multitable is in a @table @samp,\n    we applied @samp markup to the @multitable @items.  This in turn\n    meant that it captured the @tab separator in the @item markup.\n\n    Fixed by pushing an empty item code onto the stack.\n\n(2) We didn't handle @headitem.  Fixed by enclosing it in italics,\n    like we do for section headings.  This causes it to be underlined\n    in the man output.\n\n2019-12-07  Richard Sandiford  <richard.sandiford@arm.com>\n\ncontrib/\n\t* texi2pod.pl: Handle @headitems in @multitables, printing them\n\tin italics.  Push an empty item code onto the stack.\n\nFrom-SVN: r279074", "tree": {"sha": "cfa0480e677426ff1f561fb22f69bdb5583b4feb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cfa0480e677426ff1f561fb22f69bdb5583b4feb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b01d215df18ba753746a170125b883befe100d67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b01d215df18ba753746a170125b883befe100d67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b01d215df18ba753746a170125b883befe100d67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b01d215df18ba753746a170125b883befe100d67/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ae169f9e4cbb5a1f1767106d86f322d166d5189d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae169f9e4cbb5a1f1767106d86f322d166d5189d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae169f9e4cbb5a1f1767106d86f322d166d5189d"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "b1910a642102f1d0c3c53ad35240028f3fcaf839", "filename": "contrib/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b01d215df18ba753746a170125b883befe100d67/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b01d215df18ba753746a170125b883befe100d67/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=b01d215df18ba753746a170125b883befe100d67", "patch": "@@ -1,3 +1,8 @@\n+2019-12-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* texi2pod.pl: Handle @headitems in @multitables, printing them\n+\tin italics.  Push an empty item code onto the stack.\n+\n 2019-11-13  Janne Blomqvist  <jb@gcc.gnu.org>\n \n \t* download_prerequisites: Use http instead of ftp for downloading."}, {"sha": "608dff42415f79e08212a7783abb1de5bca832a6", "filename": "contrib/texi2pod.pl", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b01d215df18ba753746a170125b883befe100d67/contrib%2Ftexi2pod.pl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b01d215df18ba753746a170125b883befe100d67/contrib%2Ftexi2pod.pl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ftexi2pod.pl?ref=b01d215df18ba753746a170125b883befe100d67", "patch": "@@ -164,6 +164,7 @@\n \t    $ic = pop @icstack;\n \t} elsif ($ended eq \"multitable\") {\n \t    $_ = \"\\n=back\\n\";\n+\t    $ic = pop @icstack;\n \t} else {\n \t    die \"unknown command \\@end $ended at line $.\\n\";\n \t}\n@@ -288,7 +289,9 @@\n \n     /^\\@multitable\\s.*/ and do {\n \tpush @endwstack, $endw;\n+\tpush @icstack, $ic;\n \t$endw = \"multitable\";\n+\t$ic = \"\";\n \t$_ = \"\\n=over 4\\n\";\n     };\n \n@@ -312,11 +315,13 @@\n \t$_ = \"\";\t# need a paragraph break\n     };\n \n-    /^\\@item\\s+(.*\\S)\\s*$/ and $endw eq \"multitable\" and do {\n+    /^\\@(headitem|item)\\s+(.*\\S)\\s*$/ and $endw eq \"multitable\" and do {\n \t@columns = ();\n-\tfor $column (split (/\\s*\\@tab\\s*/, $1)) {\n+\t$item = $1;\n+\tfor $column (split (/\\s*\\@tab\\s*/, $2)) {\n \t    # @strong{...} is used a @headitem work-alike\n \t    $column =~ s/^\\@strong\\{(.*)\\}$/$1/;\n+\t    $column = \"I<$column>\" if $item eq \"headitem\";\n \t    push @columns, $column;\n \t}\n \t$_ = \"\\n=item \".join (\" : \", @columns).\"\\n\";"}]}