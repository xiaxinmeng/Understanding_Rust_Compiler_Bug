{"sha": "02a18962ab86a9a9eab7220cd779acc33fadf94e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDJhMTg5NjJhYjg2YTlhOWVhYjcyMjBjZDc3OWFjYzMzZmFkZjk0ZQ==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2000-05-16T02:59:31Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2000-05-16T02:59:31Z"}, "message": "Makefile.in: Change \"pic\" to depend on $(PICFLAG), not on $(enable_shared).\n\n        * Makefile.in: Change \"pic\" to depend on $(PICFLAG), not\n        on $(enable_shared).\n        * aix.ml: Build AIX-style shared library.\n\nFrom-SVN: r33921", "tree": {"sha": "ed17b01726b42e304b108b63265d95a47f788b45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed17b01726b42e304b108b63265d95a47f788b45"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02a18962ab86a9a9eab7220cd779acc33fadf94e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02a18962ab86a9a9eab7220cd779acc33fadf94e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02a18962ab86a9a9eab7220cd779acc33fadf94e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02a18962ab86a9a9eab7220cd779acc33fadf94e/comments", "author": null, "committer": null, "parents": [{"sha": "63b8af0cca267a078ae2ffac7c443348114ff36c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63b8af0cca267a078ae2ffac7c443348114ff36c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63b8af0cca267a078ae2ffac7c443348114ff36c"}], "stats": {"total": 67, "additions": 47, "deletions": 20}, "files": [{"sha": "fa59afe35a23326e949e3e715669a396931a1d48", "filename": "libstdc++/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02a18962ab86a9a9eab7220cd779acc33fadf94e/libstdc%2B%2B%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02a18962ab86a9a9eab7220cd779acc33fadf94e/libstdc%2B%2B%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FChangeLog?ref=02a18962ab86a9a9eab7220cd779acc33fadf94e", "patch": "@@ -1,3 +1,9 @@\n+2000-05-15  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* Makefile.in: Change \"pic\" to depend on $(PICFLAG), not\n+\ton $(enable_shared).\n+\t* aix.ml: Build AIX-style shared library.\n+\n 2000-05-10  Jakub Jelinek  <jakub@redhat.com>\n \n \t* configure.in: Use mh-sparcpic for sparc*-*-*."}, {"sha": "f2e1a8c58c2078c537f68b694466fb680f972794", "filename": "libstdc++/Makefile.in", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02a18962ab86a9a9eab7220cd779acc33fadf94e/libstdc%2B%2B%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02a18962ab86a9a9eab7220cd779acc33fadf94e/libstdc%2B%2B%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FMakefile.in?ref=02a18962ab86a9a9eab7220cd779acc33fadf94e", "patch": "@@ -84,7 +84,7 @@ stdlist: $(IO_DIR)/iostream.list $(OBJS) $(SUBLIBS) $(LIBIBERTY_DIR)/libiberty.a\n piclist: stdlist\n \t-rm -f tlist\n \tcp stdlist tlist\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  sed 's,\\([A-Za-z_]*\\.o\\),pic/\\1,g' tlist > tlist2 ; \\\n \t  mv tlist2 tlist ; \\\n \telse true ; fi\n@@ -143,7 +143,7 @@ stmp-string: ${srcdir}/sinst.cc ${srcdir}/std/bastring.h \\\n \t     ${srcdir}/std/bastring.cc ${srcdir}/std/straits.h\n \tfor name in $(STRFUNCS) $(STRIO); do \\\n \t  echo c$${name}; \\\n-\t  if [ x\"$(enable_shared)\" = xyes ]; then \\\n+\t  if [ x\"$(PICFLAG)\" != x ]; then \\\n \t    $(COMPILE.cc) $(PICFLAG) -DC -D$${name} ${srcdir}/sinst.cc \\\n \t      -o pic/c$${name}.o; \\\n \t  else true ; fi; \\\n@@ -156,15 +156,15 @@ stmp-string: ${srcdir}/sinst.cc ${srcdir}/std/bastring.h \\\n bigstmp-string: ${srcdir}/sinst.cc ${srcdir}/std/bastring.h \\\n \t        ${srcdir}/std/bastring.cc ${srcdir}/std/straits.h\n \techo cstring\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DC \\\n \t    `for N in $(STRFUNCS); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/sinst.cc -o pic/cstrmain.o; \\\n \telse true ; fi\n \t$(COMPILE.cc) -DC `for N in $(STRFUNCS); do echo \" -D$${N}\"; done` \\\n \t  $(srcdir)/sinst.cc -o cstrmain.o\n \techo cstrio\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DC \\\n \t    `for N in $(STRIO); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/sinst.cc -o pic/cstrio.o; \\\n@@ -183,23 +183,23 @@ stmp-complx: ${srcdir}/cinst.cc ${srcdir}/std/complext.h \\\n \t      ${srcdir}/std/ldcomplex.h\n \tfor N in $(COMFUNCS) $(COMIO); do \\\n \t  echo f$${N}; \\\n-\t  if [ x\"$(enable_shared)\" = xyes ]; then \\\n+\t  if [ x\"$(PICFLAG)\" != x ]; then \\\n \t    $(COMPILE.cc) $(PICFLAG) -DF -D$${N} $(srcdir)/cinst.cc \\\n \t      -o pic/f$${N}.o; \\\n \t  else true ; fi; \\\n \t  if [ $$? -eq 0 ]; then true; else exit 1; fi; \\\n \t  $(COMPILE.cc) -DF -D$${N} ${srcdir}/cinst.cc -o f$${N}.o; \\\n \t  if [ $$? -eq 0 ]; then true; else exit 1; fi; \\\n \t  echo d$${N}; \\\n-\t  if [ x\"$(enable_shared)\" = xyes ]; then \\\n+\t  if [ x\"$(PICFLAG)\" != x ]; then \\\n \t    $(COMPILE.cc) $(PICFLAG) -DD -D$${N} $(srcdir)/cinst.cc \\\n \t      -o pic/d$${N}.o; \\\n \t  else true ; fi; \\\n \t  if [ $$? -eq 0 ]; then true; else exit 1; fi; \\\n \t  $(COMPILE.cc) -DD -D$${N} ${srcdir}/cinst.cc -o d$${N}.o; \\\n \t  if [ $$? -eq 0 ]; then true; else exit 1; fi; \\\n \t  echo ld$${N}; \\\n-\t  if [ x\"$(enable_shared)\" = xyes ]; then \\\n+\t  if [ x\"$(PICFLAG)\" != x ]; then \\\n \t    $(COMPILE.cc) $(PICFLAG) -DLD -D$${N} $(srcdir)/cinst.cc \\\n \t      -o pic/ld$${N}.o; \\\n \t  else true ; fi; \\\n@@ -213,47 +213,47 @@ bigstmp-complx: ${srcdir}/cinst.cc ${srcdir}/std/complext.h \\\n \t         ${srcdir}/std/complext.cc ${srcdir}/std/dcomplex.h \\\n \t         ${srcdir}/std/ldcomplex.h\n \techo fcomplex\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DF \\\n \t    `for N in $(COMFUNCS); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/cinst.cc -o pic/fcomplex.o; \\\n \telse true ; fi\n \t$(COMPILE.cc) -DF `for N in $(COMFUNCS); do echo \" -D$${N}\"; done` \\\n \t  $(srcdir)/cinst.cc -o fcomplex.o\n \techo fcomio\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DF \\\n \t    `for N in $(COMIO); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/cinst.cc -o pic/fcomio.o; \\\n \telse true ; fi\n \t$(COMPILE.cc) -DF `for N in $(COMIO); do echo \" -D$${N}\"; done` \\\n \t  $(srcdir)/cinst.cc -o fcomio.o\n \techo dcomplex\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DD \\\n \t    `for N in $(COMFUNCS); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/cinst.cc -o pic/dcomplex.o; \\\n \telse true ; fi\n \t$(COMPILE.cc) -DD `for N in $(COMFUNCS); do echo \" -D$${N}\"; done` \\\n \t  $(srcdir)/cinst.cc -o dcomplex.o\n \techo dcomio\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DD \\\n \t    `for N in $(COMIO); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/cinst.cc -o pic/dcomio.o; \\\n \telse true ; fi\n \t$(COMPILE.cc) -DD `for N in $(COMIO); do echo \" -D$${N}\"; done` \\\n \t  $(srcdir)/cinst.cc -o dcomio.o\n \techo ldcomplex\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DLD \\\n \t    `for N in $(COMFUNCS); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/cinst.cc -o pic/ldcomplex.o; \\\n \telse true ; fi\n \t$(COMPILE.cc) -DLD `for N in $(COMFUNCS); do echo \" -D$${N}\"; done` \\\n \t  $(srcdir)/cinst.cc -o ldcomplex.o\n \techo ldcomio\n-\tif [ x\"$(enable_shared)\" = xyes ]; then \\\n+\tif [ x\"$(PICFLAG)\" != x ]; then \\\n \t  $(COMPILE.cc) $(PICFLAG) -DLD \\\n \t    `for N in $(COMIO); do echo \" -D$${N}\"; done` \\\n \t    $(srcdir)/cinst.cc -o pic/ldcomio.o; \\"}, {"sha": "5d6b6b245eb31313f4255e30e46975f535e5f951", "filename": "libstdc++/config/aix.ml", "status": "modified", "additions": 28, "deletions": 7, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02a18962ab86a9a9eab7220cd779acc33fadf94e/libstdc%2B%2B%2Fconfig%2Faix.ml", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02a18962ab86a9a9eab7220cd779acc33fadf94e/libstdc%2B%2B%2Fconfig%2Faix.ml", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2Fconfig%2Faix.ml?ref=02a18962ab86a9a9eab7220cd779acc33fadf94e", "patch": "@@ -1,9 +1,30 @@\n-# AIX has wierd shared/non-shared libraries.\n+# AIX has weird shared/non-shared libraries.\n \n-ARLIB\t = libstdc++-ar.a.$(VERSION)\n-ARLINK\t = libstdc++-ar.a\n-SHLINK   = libstdc++.a\n-LIBS     = $(ARLIB) $(ARLINK) $(SHLIB) $(SHLINK)\n-DEPLIBS  = ../$(SHLIB)\n+ARLIB    =\n+ARLINK   =\n+\n+# Build shared object with interface versioning in name.\n+# Archive resulting shared object in a library.\n+AIXLINK  = libstdc++.a\n+AIXLIB   = libstdc++-$(VERSION).a\n+AIXSHLIB = shr$(LIBSTDCXX_INTERFACE)$(CXX_INTERFACE).o\n+SHFLAGS  = -Wl,-bexpall\n SHDEPS   = -lm\n-SHFLAGS  = -Wl,-unix\n+SHOPT    = -shared\n+\n+LIBS     = $(AIXLIB) $(AIXLINK)\n+\n+$(AIXSHLIB): stdlist\n+\t$(CC) $(LIBCXXFLAGS) $(SHFLAGS) $(SHOPT) -o $(AIXSHLIB) `cat stdlist` $(SHDEPS)\n+\n+# Delete $(AIXSHLIB) so that it is not included in stdlist if rebuilding.\n+$(AIXLIB): $(AIXSHLIB)\n+\t-rm -f t$(AIXLIB)\n+\t$(AR) $(AR_FLAGS) t$(AIXLIB) $(AIXSHLIB)\n+\tmv t$(AIXLIB) $(AIXLIB)\n+\t-rm -f $(AIXSHLIB)\n+\n+$(AIXLINK):\n+\t-rm -f $(AIXLINK)\n+\t$(LN_S) $(AIXLIB) $(AIXLINK) || cp $(AIXLIB) $(AIXLINK)\n+"}]}