{"sha": "364ed4bac6400aa6645064c6b9e7e518f08dab54", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzY0ZWQ0YmFjNjQwMGFhNjY0NTA2NGM2YjllN2U1MThmMDhkYWI1NA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-08-07T19:01:16Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-08-07T19:01:16Z"}, "message": "compiler: Fix \"missing return\" error for case T1, T2 in type switches.\n\nAlso change the \"missing return\" text and report it at the end\nof the function, rather than the start, to match the gc\ncompiler.\n\nFrom-SVN: r201579", "tree": {"sha": "4fdcc767cf3efa1928a8fcdd124138d160565ba6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4fdcc767cf3efa1928a8fcdd124138d160565ba6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/364ed4bac6400aa6645064c6b9e7e518f08dab54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/364ed4bac6400aa6645064c6b9e7e518f08dab54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/364ed4bac6400aa6645064c6b9e7e518f08dab54", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/364ed4bac6400aa6645064c6b9e7e518f08dab54/comments", "author": null, "committer": null, "parents": [{"sha": "5cf6635b26c757412e1a3124c604c9ccb319ff9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cf6635b26c757412e1a3124c604c9ccb319ff9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cf6635b26c757412e1a3124c604c9ccb319ff9d"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "4e5bd44783157606f0a03ee085133bfca758fd4e", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/364ed4bac6400aa6645064c6b9e7e518f08dab54/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/364ed4bac6400aa6645064c6b9e7e518f08dab54/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=364ed4bac6400aa6645064c6b9e7e518f08dab54", "patch": "@@ -3133,7 +3133,8 @@ Check_return_statements_traverse::function(Named_object* no)\n     return TRAVERSE_CONTINUE;\n \n   if (func->block()->may_fall_through())\n-    error_at(func->location(), \"control reaches end of non-void function\");\n+    error_at(func->block()->end_location(),\n+\t     \"missing return at end of function\");\n \n   return TRAVERSE_CONTINUE;\n }"}, {"sha": "7314918a9a16e2516e7f41f18f89ba6ae47e79eb", "filename": "gcc/go/gofrontend/statements.cc", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/364ed4bac6400aa6645064c6b9e7e518f08dab54/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/364ed4bac6400aa6645064c6b9e7e518f08dab54/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.cc?ref=364ed4bac6400aa6645064c6b9e7e518f08dab54", "patch": "@@ -4093,6 +4093,16 @@ Type_case_clauses::Type_case_clause::lower(Type* switch_val_type,\n bool\n Type_case_clauses::Type_case_clause::may_fall_through() const\n {\n+  if (this->is_fallthrough_)\n+    {\n+      // This case means that we automatically fall through to the\n+      // next case (it's used for T1 in case T1, T2:).  It does not\n+      // mean that we fall through to the end of the type switch as a\n+      // whole.  There is sure to be a next case and that next case\n+      // will determine whether we fall through to the statements\n+      // after the type switch.\n+      return false;\n+    }\n   if (this->statements_ == NULL)\n     return true;\n   return this->statements_->may_fall_through();"}, {"sha": "40d236206696005965e94ea3353912763e287a90", "filename": "gcc/testsuite/go.test/test/fixedbugs/bug086.go", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/364ed4bac6400aa6645064c6b9e7e518f08dab54/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fbug086.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/364ed4bac6400aa6645064c6b9e7e518f08dab54/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fbug086.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgo.test%2Ftest%2Ffixedbugs%2Fbug086.go?ref=364ed4bac6400aa6645064c6b9e7e518f08dab54", "patch": "@@ -6,12 +6,12 @@\n \n package main\n \n-func f() int {\t// ERROR \"return|control\"\n+func f() int {\n \tif false {\n \t\treturn 0;\n \t}\n \t// we should not be able to return successfully w/o a return statement\n-}\n+} // ERROR \"return\"\n \n func main() {\n \tprint(f(), \"\\n\");"}]}