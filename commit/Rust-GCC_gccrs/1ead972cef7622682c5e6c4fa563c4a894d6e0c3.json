{"sha": "1ead972cef7622682c5e6c4fa563c4a894d6e0c3", "node_id": "C_kwDOANBUbNoAKDFlYWQ5NzJjZWY3NjIyNjgyYzVlNmM0ZmE1NjNjNGE4OTRkNmUwYzM", "commit": {"author": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2022-01-18T11:44:53Z"}, "committer": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2022-01-19T06:50:49Z"}, "message": "powerc: Fix asm machine directive for some CPUs\n\nFor some CPUs, the assembler machine directive cannot be determined by ISA\nflags.\n\ngcc/\n\n\tPR target/104090\n\t* config/rs6000/rs6000.cc (rs6000_machine_from_flags): Use also\n\trs6000_cpu.", "tree": {"sha": "78e9340ea18dcc787612c5ecfefab5bb3767c1fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78e9340ea18dcc787612c5ecfefab5bb3767c1fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ead972cef7622682c5e6c4fa563c4a894d6e0c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ead972cef7622682c5e6c4fa563c4a894d6e0c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ead972cef7622682c5e6c4fa563c4a894d6e0c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ead972cef7622682c5e6c4fa563c4a894d6e0c3/comments", "author": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8160b410517e1e3493d92358579d380872acb3e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8160b410517e1e3493d92358579d380872acb3e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8160b410517e1e3493d92358579d380872acb3e8"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "2a338a222c14dd2570eba51c0aa62147296a1e05", "filename": "gcc/config/rs6000/rs6000.cc", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ead972cef7622682c5e6c4fa563c4a894d6e0c3/gcc%2Fconfig%2Frs6000%2Frs6000.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ead972cef7622682c5e6c4fa563c4a894d6e0c3/gcc%2Fconfig%2Frs6000%2Frs6000.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.cc?ref=1ead972cef7622682c5e6c4fa563c4a894d6e0c3", "patch": "@@ -5935,6 +5935,31 @@ const char *rs6000_machine;\n const char *\n rs6000_machine_from_flags (void)\n {\n+  /* For some CPUs, the machine cannot be determined by ISA flags.  We have to\n+     check them first.  */\n+  switch (rs6000_cpu)\n+    {\n+    case PROCESSOR_PPC8540:\n+    case PROCESSOR_PPC8548:\n+      return \"e500\";\n+\n+    case PROCESSOR_PPCE300C2:\n+    case PROCESSOR_PPCE300C3:\n+      return \"e300\";\n+\n+    case PROCESSOR_PPCE500MC:\n+      return \"e500mc\";\n+\n+    case PROCESSOR_PPCE500MC64:\n+      return \"e500mc64\";\n+\n+    case PROCESSOR_PPCE5500:\n+      return \"e5500\";\n+\n+    case PROCESSOR_PPCE6500:\n+      return \"e6500\";\n+    }\n+\n   HOST_WIDE_INT flags = rs6000_isa_flags;\n \n   /* Disable the flags that should never influence the .machine selection.  */"}]}