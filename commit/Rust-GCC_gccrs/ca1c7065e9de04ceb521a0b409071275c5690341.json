{"sha": "ca1c7065e9de04ceb521a0b409071275c5690341", "node_id": "C_kwDOANBUbNoAKGNhMWM3MDY1ZTlkZTA0Y2ViNTIxYTBiNDA5MDcxMjc1YzU2OTAzNDE", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-12-10T11:39:26Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-12-10T14:05:46Z"}, "message": "libstdc++: Fix definition of _GLIBCXX_NO_SLEEP config macro\n\nIf no OS function to sleep (e.g. nanosleep, usleep, Win32 Sleep etc.) is\navailable then configure defines the macro NO_SLEEP. But this will not\nget prefixed with \"_GLIBCXX_\" because include/Makefile.am only does that\nfor macros beginning with \"HAVE_\". The configure script should define\n_GLIBCXX_NO_SLEEP instead (which is what the code actually checks for).\n\nlibstdc++-v3/ChangeLog:\n\n\t* acinclude.m4 (GLIBCXX_ENABLE_LIBSTDCXX_TIME): Add _GLIBCXX_\n\tprefix to NO_SLEEP macro.\n\t* config.h.in: Regenerate.\n\t* configure: Regenerate.", "tree": {"sha": "c50e8517c7885e806a9a152e6f0cdf359dbd91cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c50e8517c7885e806a9a152e6f0cdf359dbd91cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca1c7065e9de04ceb521a0b409071275c5690341", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca1c7065e9de04ceb521a0b409071275c5690341", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca1c7065e9de04ceb521a0b409071275c5690341", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca1c7065e9de04ceb521a0b409071275c5690341/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "68fd247e15e4de6eedd6c5cde5085e302406e183", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68fd247e15e4de6eedd6c5cde5085e302406e183", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68fd247e15e4de6eedd6c5cde5085e302406e183"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "635168d7e25a954905afcc426b35f0ff4d33389b", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca1c7065e9de04ceb521a0b409071275c5690341/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca1c7065e9de04ceb521a0b409071275c5690341/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=ca1c7065e9de04ceb521a0b409071275c5690341", "patch": "@@ -1562,7 +1562,7 @@ AC_DEFUN([GLIBCXX_ENABLE_LIBSTDCXX_TIME], [\n   fi\n \n   if test x\"$ac_no_sleep\" = x\"yes\"; then\n-    AC_DEFINE(NO_SLEEP,1, [Defined if no way to sleep is available.])\n+    AC_DEFINE(_GLIBCXX_NO_SLEEP,1, [Defined if no way to sleep is available.])\n   fi\n \n   AC_SUBST(GLIBCXX_LIBS)"}, {"sha": "10675fe253027b021bae4bfd16349cd30e672a98", "filename": "libstdc++-v3/config.h.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca1c7065e9de04ceb521a0b409071275c5690341/libstdc%2B%2B-v3%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca1c7065e9de04ceb521a0b409071275c5690341/libstdc%2B%2B-v3%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig.h.in?ref=ca1c7065e9de04ceb521a0b409071275c5690341", "patch": "@@ -714,9 +714,6 @@\n    */\n #undef LT_OBJDIR\n \n-/* Defined if no way to sleep is available. */\n-#undef NO_SLEEP\n-\n /* Name of package */\n #undef PACKAGE\n \n@@ -838,6 +835,9 @@\n /* Define if C99 llrint and llround functions are missing from <math.h>. */\n #undef _GLIBCXX_NO_C99_ROUNDING_FUNCS\n \n+/* Defined if no way to sleep is available. */\n+#undef _GLIBCXX_NO_SLEEP\n+\n /* Define if ptrdiff_t is int. */\n #undef _GLIBCXX_PTRDIFF_T_IS_INT\n "}, {"sha": "b1a0157d0b91de990cac72ec6355af109c05d617", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca1c7065e9de04ceb521a0b409071275c5690341/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca1c7065e9de04ceb521a0b409071275c5690341/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=ca1c7065e9de04ceb521a0b409071275c5690341", "patch": "@@ -21006,7 +21006,7 @@ $as_echo \"$ac_has_win32_sleep\" >&6; }\n \n   if test x\"$ac_no_sleep\" = x\"yes\"; then\n \n-$as_echo \"#define NO_SLEEP 1\" >>confdefs.h\n+$as_echo \"#define _GLIBCXX_NO_SLEEP 1\" >>confdefs.h\n \n   fi\n "}]}