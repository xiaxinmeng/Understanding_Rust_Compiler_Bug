{"sha": "4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGFlMmUzZTkyMjVkYmQ3YjJlYjZkMDg1NzdiMDQ1YmQwYTBkMDE3Zg==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-08-22T22:29:17Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-08-22T22:29:17Z"}, "message": "hashtable.c (ht_expand): Avoid calculating rehash for the common case that the first probe hits an empty...\n\n\n\t* hashtable.c (ht_expand): Avoid calculating rehash for the common\n\tcase that the first probe hits an empty hash table slot.\n\nFrom-SVN: r70706", "tree": {"sha": "c56487fa5d7f717c41116718e450a2f92ae59134", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c56487fa5d7f717c41116718e450a2f92ae59134"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f/comments", "author": null, "committer": null, "parents": [{"sha": "a30f2d659c606f7c46265eeafcd968b8cf6abd7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a30f2d659c606f7c46265eeafcd968b8cf6abd7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a30f2d659c606f7c46265eeafcd968b8cf6abd7b"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "f97afe2b005c8ea5442a66cb217eb4109478b63f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f", "patch": "@@ -1,3 +1,8 @@\n+2003-08-22  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* hashtable.c (ht_expand): Avoid calculating rehash for the common\n+\tcase that the first probe hits an empty hash table slot.\n+\n 2003-08-22  Mark Mitchell  <mark@codesourcery.com>\n \n \t* config/ia64/hpux.h (SUPPORTS_INIT_PRIORITY): Define to 0."}, {"sha": "58f19d055fc21c402146d581b584dcdfd639a47f", "filename": "gcc/hashtable.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f/gcc%2Fhashtable.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f/gcc%2Fhashtable.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhashtable.c?ref=4ae2e3e9225dbd7b2eb6d08577b045bd0a0d017f", "patch": "@@ -184,19 +184,18 @@ ht_expand (hash_table *table)\n \tunsigned int index, hash, hash2;\n \n \thash = (*p)->hash_value;\n-\thash2 = ((hash * 17) & sizemask) | 1;\n \tindex = hash & sizemask;\n \n-\tfor (;;)\n+\tif (nentries[index])\n \t  {\n-\t    if (! nentries[index])\n+\t    hash2 = ((hash * 17) & sizemask) | 1;\n+\t    do\n \t      {\n-\t\tnentries[index] = *p;\n-\t\tbreak;\n+\t\tindex = (index + hash2) & sizemask;\n \t      }\n-\n-\t    index = (index + hash2) & sizemask;\n+\t    while (nentries[index]);\n \t  }\n+\tnentries[index] = *p;\n       }\n   while (++p < limit);\n "}]}