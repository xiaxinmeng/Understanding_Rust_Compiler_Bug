{"sha": "19372aa11298a67c864d067ae2ab6534204b83cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTkzNzJhYTExMjk4YTY3Yzg2NGQwNjdhZTJhYjY1MzQyMDRiODNjYg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1997-08-22T21:39:10Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-08-22T21:39:10Z"}, "message": "Fix AIX build problem when IBM cc is used.\n\n\t* acconfig.h (NEED_DECLARATION_CALLOC): Add.\n\t* configure.in: Add GCC_NEED_DECLARATION call for calloc.\n\t* rs6000/xm-rs6000.h (malloc, realloc, calloc, free): Delete\n\tdeclarations.\n\t* config.in, configure: Regenerate.\n\nFrom-SVN: r14896", "tree": {"sha": "55032a17e6a3e566f846fb342c9a65c976ae91dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/55032a17e6a3e566f846fb342c9a65c976ae91dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19372aa11298a67c864d067ae2ab6534204b83cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19372aa11298a67c864d067ae2ab6534204b83cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19372aa11298a67c864d067ae2ab6534204b83cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19372aa11298a67c864d067ae2ab6534204b83cb/comments", "author": null, "committer": null, "parents": [{"sha": "ea16770fb129c32c08a82af834ba176c583415e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea16770fb129c32c08a82af834ba176c583415e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea16770fb129c32c08a82af834ba176c583415e9"}], "stats": {"total": 93, "additions": 75, "deletions": 18}, "files": [{"sha": "28d7add8e5f994dedd8d19401141ed8cd17f9dd2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=19372aa11298a67c864d067ae2ab6534204b83cb", "patch": "@@ -1,3 +1,11 @@\n+Fri Aug 22 14:05:55 1997  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* acconfig.h (NEED_DECLARATION_CALLOC): Add.\n+\t* configure.in: Add GCC_NEED_DECLARATION call for calloc.\n+\t* rs6000/xm-rs6000.h (malloc, realloc, calloc, free): Delete\n+\tdeclarations.\n+\t* config.in, configure: Regenerate.\n+\n Thu Aug 21 23:52:16 1997  John F. Carr  <jfc@mit.edu>\n \n \t* alias.c (find_base_value): Improve handling of PLUS, MINUS, and"}, {"sha": "fcc71620a0a4a19a1fac049fe2608f1737b72a3a", "filename": "gcc/acconfig.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Facconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Facconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Facconfig.h?ref=19372aa11298a67c864d067ae2ab6534204b83cb", "patch": "@@ -9,6 +9,9 @@\n /* Whether realloc must be declared even if <stdlib.h> is included.  */\n #undef NEED_DECLARATION_REALLOC\n \n+/* Whether calloc must be declared even if <stdlib.h> is included.  */\n+#undef NEED_DECLARATION_CALLOC\n+\n /* Whether free must be declared even if <stdlib.h> is included.  */\n #undef NEED_DECLARATION_FREE\n @TOP@"}, {"sha": "504e1bb2bc6e45dc92ddf7dddb659ba6cfd0339d", "filename": "gcc/config.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=19372aa11298a67c864d067ae2ab6534204b83cb", "patch": "@@ -10,6 +10,9 @@\n /* Whether realloc must be declared even if <stdlib.h> is included.  */\n #undef NEED_DECLARATION_REALLOC\n \n+/* Whether calloc must be declared even if <stdlib.h> is included.  */\n+#undef NEED_DECLARATION_CALLOC\n+\n /* Whether free must be declared even if <stdlib.h> is included.  */\n #undef NEED_DECLARATION_FREE\n "}, {"sha": "9dbd41ed7babdd68313f5a87d0c64172223502e6", "filename": "gcc/config/rs6000/xm-rs6000.h", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfig%2Frs6000%2Fxm-rs6000.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfig%2Frs6000%2Fxm-rs6000.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fxm-rs6000.h?ref=19372aa11298a67c864d067ae2ab6534204b83cb", "patch": "@@ -59,10 +59,3 @@ extern char *alloca ();\n    collect has a chance to see them, so scan the object files directly.  */\n #define COLLECT_EXPORT_LIST\n #endif\n-\n-#ifndef __STDC__\n-extern char *malloc (), *realloc (), *calloc ();\n-#else\n-extern void *malloc (), *realloc (), *calloc ();\n-#endif\n-extern void free ();"}, {"sha": "5df865edf7d46ac9656fa85eb18860553bed0ce8", "filename": "gcc/configure", "status": "modified", "additions": 60, "deletions": 11, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=19372aa11298a67c864d067ae2ab6534204b83cb", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n \n # Guess values for system-dependent variables and create Makefiles.\n-# Generated automatically using autoconf version 2.12 \n+# Generated automatically using autoconf version 2.12.1 \n # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.\n #\n # This configure script is free software; the Free Software Foundation\n@@ -350,7 +350,7 @@ EOF\n     verbose=yes ;;\n \n   -version | --version | --versio | --versi | --vers)\n-    echo \"configure generated by autoconf version 2.12\"\n+    echo \"configure generated by autoconf version 2.12.1\"\n     exit 0 ;;\n \n   -with-* | --with-*)\n@@ -704,7 +704,7 @@ esac\n \n \n # Make sure we can run config.sub.\n-if $ac_config_sub sun4 >/dev/null 2>&1; then :\n+if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :\n else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n@@ -716,14 +716,14 @@ case \"$host_alias\" in\n NONE)\n   case $nonopt in\n   NONE)\n-    if host_alias=`$ac_config_guess`; then :\n+    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :\n     else { echo \"configure: error: can not guess host type; you must specify one\" 1>&2; exit 1; }\n     fi ;;\n   *) host_alias=$nonopt ;;\n   esac ;;\n esac\n \n-host=`$ac_config_sub $host_alias`\n+host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`\n host_cpu=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\1/'`\n host_vendor=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\2/'`\n host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n@@ -741,7 +741,7 @@ NONE)\n   esac ;;\n esac\n \n-target=`$ac_config_sub $target_alias`\n+target=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $target_alias`\n target_cpu=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\1/'`\n target_vendor=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\2/'`\n target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n@@ -759,7 +759,7 @@ NONE)\n   esac ;;\n esac\n \n-build=`$ac_config_sub $build_alias`\n+build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`\n build_cpu=`echo $build | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\1/'`\n build_vendor=`echo $build | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\2/'`\n build_os=`echo $build | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n@@ -1424,13 +1424,61 @@ EOF\n \n fi\n \n+echo $ac_n \"checking whether calloc must be declared\"\"... $ac_c\" 1>&6\n+echo \"configure:1429: checking whether calloc must be declared\" >&5\n+if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_calloc'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1434 \"configure\"\n+#include \"confdefs.h\"\n+\n+#include <stdio.h>\n+#ifdef HAVE_STRING_H\n+#include <string.h>\n+#else\n+#ifdef HAVE_STRINGS_H\n+#include <strings.h>\n+#endif\n+#endif\n+#ifdef HAVE_STDLIB_H\n+#include <stdlib.h>\n+#endif\n+#ifdef HAVE_UNISTD_H\n+#include <unistd.h>\n+#endif\n+int main() {\n+char *(*pfn) = (char *(*)) calloc\n+; return 0; }\n+EOF\n+if { (eval echo configure:1455: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  gcc_cv_decl_needed_calloc=no\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  gcc_cv_decl_needed_calloc=yes\n+fi\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$gcc_cv_decl_needed_calloc\" 1>&6\n+if test $gcc_cv_decl_needed_calloc = yes; then\n+  gcc_tr_decl=NEED_DECLARATION_`echo calloc | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n+  cat >> confdefs.h <<EOF\n+#define $gcc_tr_decl 1\n+EOF\n+\n+fi\n+\n echo $ac_n \"checking whether free must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:1429: checking whether free must be declared\" >&5\n+echo \"configure:1477: checking whether free must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_free'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1434 \"configure\"\n+#line 1482 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -1451,7 +1499,7 @@ int main() {\n char *(*pfn) = (char *(*)) free\n ; return 0; }\n EOF\n-if { (eval echo configure:1455: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1503: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_decl_needed_free=no\n else\n@@ -4418,6 +4466,7 @@ ${CONFIG_SHELL-/bin/sh} $srcdir/configure.frag $srcdir \"$subdirs\" \"$dep_host_xma\n \n \n \n+\n \n \n # Echo that links are built\n@@ -4541,7 +4590,7 @@ do\n     echo \"running \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion\"\n     exec \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;\n   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)\n-    echo \"$CONFIG_STATUS generated by autoconf version 2.12\"\n+    echo \"$CONFIG_STATUS generated by autoconf version 2.12.1\"\n     exit 0 ;;\n   -help | --help | --hel | --he | --h)\n     echo \"\\$ac_cs_usage\"; exit 0 ;;"}, {"sha": "510018b93a1c2d7dff3819456bd2abf576ac80cf", "filename": "gcc/configure.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19372aa11298a67c864d067ae2ab6534204b83cb/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=19372aa11298a67c864d067ae2ab6534204b83cb", "patch": "@@ -137,6 +137,7 @@ AC_CHECK_HEADERS(stddef.h string.h strings.h stdlib.h time.h unistd.h)\n \n GCC_NEED_DECLARATION(malloc)\n GCC_NEED_DECLARATION(realloc)\n+GCC_NEED_DECLARATION(calloc)\n GCC_NEED_DECLARATION(free)\n \n # File extensions"}]}