{"sha": "62371b9228c43790749be80ceff5d892f3b705f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIzNzFiOTIyOGM0Mzc5MDc0OWJlODBjZWZmNWQ4OTJmM2I3MDVmNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-10-06T14:36:44Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-10-06T14:36:44Z"}, "message": "tree-vect-patterns.c (vect_handle_widen_mult_by_const): For lhs don't set SSA_NAME_DEF_STMT that has been already set by...\n\n\t* tree-vect-patterns.c (vect_handle_widen_mult_by_const): For lhs\n\tdon't set SSA_NAME_DEF_STMT that has been already set by\n\tgimple_build_assign_with_ops.\n\t(vect_recog_pow_pattern, vect_recog_widen_sum_pattern,\n\tvect_operation_fits_smaller_type, vect_recog_over_widening_pattern):\n\tLikewise.\n\nFrom-SVN: r179615", "tree": {"sha": "33fdfaeb54514ab46a20666f783b1a37ec464df4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/33fdfaeb54514ab46a20666f783b1a37ec464df4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62371b9228c43790749be80ceff5d892f3b705f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62371b9228c43790749be80ceff5d892f3b705f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62371b9228c43790749be80ceff5d892f3b705f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62371b9228c43790749be80ceff5d892f3b705f5/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e7f9dae09c771b101425e5b1f92b74278c48cb8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7f9dae09c771b101425e5b1f92b74278c48cb8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7f9dae09c771b101425e5b1f92b74278c48cb8d"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "03529551e40873e8d73af3ee3ed7a3949de0c67e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62371b9228c43790749be80ceff5d892f3b705f5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62371b9228c43790749be80ceff5d892f3b705f5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=62371b9228c43790749be80ceff5d892f3b705f5", "patch": "@@ -1,5 +1,12 @@\n 2011-10-06  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* tree-vect-patterns.c (vect_handle_widen_mult_by_const): For lhs\n+\tdon't set SSA_NAME_DEF_STMT that has been already set by\n+\tgimple_build_assign_with_ops.\n+\t(vect_recog_pow_pattern, vect_recog_widen_sum_pattern,\n+\tvect_operation_fits_smaller_type, vect_recog_over_widening_pattern):\n+\tLikewise.\n+\n \t* tree.h (avoid_folding_inline_builtin): New prototype.\n \t* builtins.c (avoid_folding_inline_builtin): No longer static.\n \t* gimple-fold.c (gimple_fold_builtin): Give up if"}, {"sha": "28c657a422a7aa7d14c1fd202dceac26eb9d9048", "filename": "gcc/tree-vect-patterns.c", "status": "modified", "additions": 3, "deletions": 10, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62371b9228c43790749be80ceff5d892f3b705f5/gcc%2Ftree-vect-patterns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62371b9228c43790749be80ceff5d892f3b705f5/gcc%2Ftree-vect-patterns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-patterns.c?ref=62371b9228c43790749be80ceff5d892f3b705f5", "patch": "@@ -396,7 +396,6 @@ vect_handle_widen_mult_by_const (gimple stmt, tree const_oprnd, tree *oprnd,\n       new_oprnd = make_ssa_name (tmp, NULL);\n       new_stmt = gimple_build_assign_with_ops (NOP_EXPR, new_oprnd, *oprnd,\n \t\t\t\t\t       NULL_TREE);\n-      SSA_NAME_DEF_STMT (new_oprnd) = new_stmt;\n       STMT_VINFO_RELATED_STMT (vinfo_for_stmt (def_stmt)) = new_stmt;\n       VEC_safe_push (gimple, heap, *stmts, def_stmt);\n       *oprnd = new_oprnd;\n@@ -615,7 +614,6 @@ vect_recog_widen_mult_pattern (VEC (gimple, heap) **stmts,\n   var = vect_recog_temp_ssa_var (type, NULL);\n   pattern_stmt = gimple_build_assign_with_ops (WIDEN_MULT_EXPR, var, oprnd0,\n \t\t\t\t\t       oprnd1);\n-  SSA_NAME_DEF_STMT (var) = pattern_stmt;\n \n   if (vect_print_dump_info (REPORT_DETAILS))\n     print_gimple_stmt (vect_dump, pattern_stmt, 0, TDF_SLIM);\n@@ -699,7 +697,6 @@ vect_recog_pow_pattern (VEC (gimple, heap) **stmts, tree *type_in,\n \n       var = vect_recog_temp_ssa_var (TREE_TYPE (base), NULL);\n       stmt = gimple_build_assign_with_ops (MULT_EXPR, var, base, base);\n-      SSA_NAME_DEF_STMT (var) = stmt;\n       return stmt;\n     }\n \n@@ -822,7 +819,6 @@ vect_recog_widen_sum_pattern (VEC (gimple, heap) **stmts, tree *type_in,\n   var = vect_recog_temp_ssa_var (type, NULL);\n   pattern_stmt = gimple_build_assign_with_ops (WIDEN_SUM_EXPR, var,\n \t\t\t\t\t       oprnd0, oprnd1);\n-  SSA_NAME_DEF_STMT (var) = pattern_stmt;\n \n   if (vect_print_dump_info (REPORT_DETAILS))\n     {\n@@ -1012,7 +1008,6 @@ vect_operation_fits_smaller_type (gimple stmt, tree def, tree *new_type,\n               new_oprnd = make_ssa_name (tmp, NULL);\n               new_stmt = gimple_build_assign_with_ops (NOP_EXPR, new_oprnd,\n                                                        oprnd, NULL_TREE);\n-              SSA_NAME_DEF_STMT (new_oprnd) = new_stmt;\n               STMT_VINFO_RELATED_STMT (vinfo_for_stmt (def_stmt)) = new_stmt;\n               VEC_safe_push (gimple, heap, *stmts, def_stmt);\n               oprnd = new_oprnd;\n@@ -1034,7 +1029,6 @@ vect_operation_fits_smaller_type (gimple stmt, tree def, tree *new_type,\n           new_oprnd = make_ssa_name (tmp, NULL);\n           new_stmt = gimple_build_assign_with_ops (NOP_EXPR, new_oprnd,\n                                                    oprnd, NULL_TREE);\n-          SSA_NAME_DEF_STMT (new_oprnd) = new_stmt;\n           oprnd = new_oprnd;\n           *new_def_stmt = new_stmt;\n         }\n@@ -1137,9 +1131,9 @@ vect_recog_over_widening_pattern (VEC (gimple, heap) **stmts,\n         VEC_safe_push (gimple, heap, *stmts, prev_stmt);\n \n       var = vect_recog_temp_ssa_var (new_type, NULL);\n-      pattern_stmt = gimple_build_assign_with_ops (\n-                          gimple_assign_rhs_code (stmt), var, op0, op1);\n-      SSA_NAME_DEF_STMT (var) = pattern_stmt;\n+      pattern_stmt\n+\t= gimple_build_assign_with_ops (gimple_assign_rhs_code (stmt), var,\n+\t\t\t\t\top0, op1);\n       STMT_VINFO_RELATED_STMT (vinfo_for_stmt (stmt)) = pattern_stmt;\n       STMT_VINFO_PATTERN_DEF_STMT (vinfo_for_stmt (stmt)) = new_def_stmt;\n \n@@ -1178,7 +1172,6 @@ vect_recog_over_widening_pattern (VEC (gimple, heap) **stmts,\n           new_oprnd = make_ssa_name (tmp, NULL);\n           pattern_stmt = gimple_build_assign_with_ops (NOP_EXPR, new_oprnd,\n                                                        var, NULL_TREE);\n-          SSA_NAME_DEF_STMT (new_oprnd) = pattern_stmt;\n           STMT_VINFO_RELATED_STMT (vinfo_for_stmt (use_stmt)) = pattern_stmt;\n \n           *type_in = get_vectype_for_scalar_type (new_type);"}]}