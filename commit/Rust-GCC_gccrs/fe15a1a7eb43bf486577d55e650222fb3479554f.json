{"sha": "fe15a1a7eb43bf486577d55e650222fb3479554f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmUxNWExYTdlYjQzYmY0ODY1NzdkNTVlNjUwMjIyZmIzNDc5NTU0Zg==", "commit": {"author": {"name": "Edward Smith-Rowland", "email": "3dw4rd@verizon.net", "date": "2013-10-23T11:43:25Z"}, "committer": {"name": "Edward Smith-Rowland", "email": "emsr@gcc.gnu.org", "date": "2013-10-23T11:43:25Z"}, "message": "Implement C++14 [[deprecated]] modulo [[gnu::deprecated]] bugs.\n\ngcc/cp:\n\n2013-10-23  Edward Smith-Rowland  <3dw4rd@verizon.net>\n\n\tImplement C++14 [[deprecated]] modulo [[gnu::deprecated]] bugs.\n\t* parser.c (cp_parser_std_attribute): Interpret [[deprecated]]\n\tas [[gnu::deprecated]].\n\ngcc/testsuite:\n\n2013-10-23  Edward Smith-Rowland  <3dw4rd@verizon.net>\n\n\tImplement C++14 [[deprecated]] modulo [[gnu::deprecated]] bugs.\n\t* g++.dg/cpp1y/attr-deprecated.C: New.\n\t* g++.dg/cpp1y/attr-deprecated-neg.C: New.\n\nFrom-SVN: r203955", "tree": {"sha": "afde1543e428548d165bc5ec5b019eb0735f30f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/afde1543e428548d165bc5ec5b019eb0735f30f8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe15a1a7eb43bf486577d55e650222fb3479554f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe15a1a7eb43bf486577d55e650222fb3479554f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe15a1a7eb43bf486577d55e650222fb3479554f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe15a1a7eb43bf486577d55e650222fb3479554f/comments", "author": {"login": "emsr", "id": 1936479, "node_id": "MDQ6VXNlcjE5MzY0Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1936479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emsr", "html_url": "https://github.com/emsr", "followers_url": "https://api.github.com/users/emsr/followers", "following_url": "https://api.github.com/users/emsr/following{/other_user}", "gists_url": "https://api.github.com/users/emsr/gists{/gist_id}", "starred_url": "https://api.github.com/users/emsr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emsr/subscriptions", "organizations_url": "https://api.github.com/users/emsr/orgs", "repos_url": "https://api.github.com/users/emsr/repos", "events_url": "https://api.github.com/users/emsr/events{/privacy}", "received_events_url": "https://api.github.com/users/emsr/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1099e56939f8c8a9e54d7a83087e25d87b01d1b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1099e56939f8c8a9e54d7a83087e25d87b01d1b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1099e56939f8c8a9e54d7a83087e25d87b01d1b2"}], "stats": {"total": 133, "additions": 133, "deletions": 0}, "files": [{"sha": "c17e19d75f32a60c5f0161003bb6977640289e43", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fe15a1a7eb43bf486577d55e650222fb3479554f", "patch": "@@ -1,3 +1,9 @@\n+2013-10-23  Edward Smith-Rowland  <3dw4rd@verizon.net>\n+\n+\tImplement C++14 [[deprecated]] modulo [[gnu::deprecated]] bugs.\n+\t* parser.c (cp_parser_std_attribute): Interpret [[deprecated]]\n+\tas [[gnu::deprecated]].\n+\n 2013-10-22  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/58816"}, {"sha": "c5d19a42beb5f3c70d627fb6d521e7b21db96c7b", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=fe15a1a7eb43bf486577d55e650222fb3479554f", "patch": "@@ -21426,6 +21426,9 @@ cp_parser_std_attribute (cp_parser *parser)\n       /* C++11 noreturn attribute is equivalent to GNU's.  */\n       if (is_attribute_p (\"noreturn\", attr_id))\n \tTREE_PURPOSE (TREE_PURPOSE (attribute)) = get_identifier (\"gnu\");\n+      /* C++14 deprecated attribute is equivalent to GNU's.  */\n+      else if (cxx_dialect >= cxx1y && is_attribute_p (\"deprecated\", attr_id))\n+\tTREE_PURPOSE (TREE_PURPOSE (attribute)) = get_identifier (\"gnu\");\n     }\n \n   /* Now parse the optional argument clause of the attribute.  */"}, {"sha": "f71e314dd1a32c2a094b3c3e19935034c3a5dee0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fe15a1a7eb43bf486577d55e650222fb3479554f", "patch": "@@ -1,3 +1,9 @@\n+2013-10-23  Edward Smith-Rowland  <3dw4rd@verizon.net>\n+\n+\tImplement C++14 [[deprecated]] modulo [[gnu::deprecated]] bugs.\n+\t* g++.dg/cpp1y/attr-deprecated.C: New.\n+\t* g++.dg/cpp1y/attr-deprecated-neg.C: New.\n+\n 2013-10-23  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/58793"}, {"sha": "b2f0e1238d7359a55540d8f1365dfb3cbefae690", "filename": "gcc/testsuite/g++.dg/cpp1y/attr-deprecated-neg.C", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-neg.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-neg.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated-neg.C?ref=fe15a1a7eb43bf486577d55e650222fb3479554f", "patch": "@@ -0,0 +1,59 @@\n+// { dg-do compile }\n+// { dg-options -std=c++11 }\n+\n+class [[deprecated]] A // { dg-warning \"attribute directive ignored\" }\n+{\n+};\n+\n+[[deprecated]]\n+int\n+foo(int n) // { dg-warning \"attribute directive ignored\" }\n+{\n+  return 42 + n;\n+}\n+\n+class [[deprecated(\"B has been superceded by C\")]] B // { dg-warning \"attribute directive ignored\" }\n+{\n+};\n+\n+[[deprecated(\"bar is unsafe; use foobar instead\")]]\n+int\n+bar(int n) // { dg-warning \"attribute directive ignored\" }\n+{\n+  return 42 + n - 1;\n+}\n+\n+#if __cplusplus > 201103L\n+\n+//  Deprecate C for C++14 onwards.\n+class [[deprecated]] C;\n+\n+//  Deprecate foobar for C++14 onwards.\n+[[deprecated]]\n+int\n+foobar(int n);\n+\n+#endif\n+\n+class C\n+{\n+};\n+\n+int\n+foobar(int n)\n+{\n+  return 43 + n - 1;\n+}\n+\n+int\n+main()\n+{\n+  A aaa;\n+  int n = foo(12);\n+\n+  B bbb;\n+  int m = bar(666);\n+\n+  C ccc;\n+  int l = foobar(8);\n+}"}, {"sha": "8cd09c7bb7c57bfcfb1f6de11be689baba70adc0", "filename": "gcc/testsuite/g++.dg/cpp1y/attr-deprecated.C", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe15a1a7eb43bf486577d55e650222fb3479554f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fattr-deprecated.C?ref=fe15a1a7eb43bf486577d55e650222fb3479554f", "patch": "@@ -0,0 +1,59 @@\n+// { dg-do compile }\n+// { dg-options -std=c++1y }\n+\n+class [[deprecated]] A\n+{\n+};\n+\n+[[deprecated]]\n+int\n+foo(int n)\n+{\n+  return 42 + n;\n+}\n+\n+class [[deprecated(\"B has been superceded by C\")]] B\n+{\n+};\n+\n+[[deprecated(\"bar is unsafe; use foobar instead\")]]\n+int\n+bar(int n)\n+{\n+  return 42 + n - 1;\n+}\n+\n+#if __cplusplus > 201103L\n+\n+//  Deprecate C for C++14 onwards.\n+class [[deprecated]] C;\n+\n+//  Deprecate foobar for C++14 onwards.\n+[[deprecated]]\n+int\n+foobar(int n);\n+\n+#endif\n+\n+class C\n+{\n+};\n+\n+int\n+foobar(int n)\n+{\n+  return 43 + n - 1;\n+}\n+\n+int\n+main()\n+{\n+  A aaa; // { dg-warning \"is deprecated\" }\n+  int n = foo(12); // { dg-warning \"is deprecated\" }\n+\n+  B bbb; // { dg-warning \"is deprecated\" \"B has been superceded by C\" }\n+  int m = bar(666); // { dg-warning \"is deprecated\" \"bar is unsafe; use foobar instead\" }\n+\n+  C ccc; // { dg-warning \"is deprecated\" }\n+  int l = foobar(8); // { dg-warning \"is deprecated\" }\n+}"}]}