{"sha": "370f66b6af3e70ac31593d60a00d328a3368834a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcwZjY2YjZhZjNlNzBhYzMxNTkzZDYwYTAwZDMyOGEzMzY4ODM0YQ==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-07-26T17:10:47Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2021-07-30T10:51:36Z"}, "message": "d: Only handle named enums in enum_initializer_decl\n\nAnonymous enums neither generate an initializer nor typeinfo symbol, so\nit's safe to assert that all enum declarations passed to this function\nalways have an identifier.\n\ngcc/d/ChangeLog:\n\n\t* decl.cc (enum_initializer_decl): Only handle named enums.", "tree": {"sha": "299c2b20996e928ac4ea7974c38c109ecdc02360", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/299c2b20996e928ac4ea7974c38c109ecdc02360"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/370f66b6af3e70ac31593d60a00d328a3368834a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370f66b6af3e70ac31593d60a00d328a3368834a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/370f66b6af3e70ac31593d60a00d328a3368834a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370f66b6af3e70ac31593d60a00d328a3368834a/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e22b7ae15b09aef1ec05dec6e24580d0063e9ab1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e22b7ae15b09aef1ec05dec6e24580d0063e9ab1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e22b7ae15b09aef1ec05dec6e24580d0063e9ab1"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "0d46ee180e75d52774dbb10d3cac58cc1e573451", "filename": "gcc/d/decl.cc", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370f66b6af3e70ac31593d60a00d328a3368834a/gcc%2Fd%2Fdecl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370f66b6af3e70ac31593d60a00d328a3368834a/gcc%2Fd%2Fdecl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fd%2Fdecl.cc?ref=370f66b6af3e70ac31593d60a00d328a3368834a", "patch": "@@ -2218,13 +2218,10 @@ enum_initializer_decl (EnumDeclaration *decl)\n   if (decl->sinit)\n     return decl->sinit;\n \n-  tree type = build_ctype (decl->type);\n+  gcc_assert (decl->ident);\n \n-  Identifier *ident_save = decl->ident;\n-  if (!decl->ident)\n-    decl->ident = Identifier::generateId (\"__enum\");\n+  tree type = build_ctype (decl->type);\n   tree ident = mangle_internal_decl (decl, \"__init\", \"Z\");\n-  decl->ident = ident_save;\n \n   decl->sinit = declare_extern_var (ident, type);\n   DECL_LANG_SPECIFIC (decl->sinit) = build_lang_decl (NULL);"}]}