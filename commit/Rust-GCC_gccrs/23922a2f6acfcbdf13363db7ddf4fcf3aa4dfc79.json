{"sha": "23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjM5MjJhMmY2YWNmY2JkZjEzMzYzZGI3ZGRmNGZjZjNhYTRkZmM3OQ==", "commit": {"author": {"name": "Pascal Obry", "email": "obry@adacore.com", "date": "2008-08-22T13:26:38Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-22T13:26:38Z"}, "message": "adaint.c: Fix possible race condition on win32_wait().\n\n2008-08-22  Pascal Obry  <obry@adacore.com>\n\n\t* adaint.c: Fix possible race condition on win32_wait().\n\nFrom-SVN: r139466", "tree": {"sha": "e45e53c192bef24215b3765eb5faa3c4a5d7f146", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e45e53c192bef24215b3765eb5faa3c4a5d7f146"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79/comments", "author": {"login": "TurboGit", "id": 467069, "node_id": "MDQ6VXNlcjQ2NzA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/467069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TurboGit", "html_url": "https://github.com/TurboGit", "followers_url": "https://api.github.com/users/TurboGit/followers", "following_url": "https://api.github.com/users/TurboGit/following{/other_user}", "gists_url": "https://api.github.com/users/TurboGit/gists{/gist_id}", "starred_url": "https://api.github.com/users/TurboGit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TurboGit/subscriptions", "organizations_url": "https://api.github.com/users/TurboGit/orgs", "repos_url": "https://api.github.com/users/TurboGit/repos", "events_url": "https://api.github.com/users/TurboGit/events{/privacy}", "received_events_url": "https://api.github.com/users/TurboGit/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fb34edfafac9e1b807e5ee6b93624e262b28aa78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb34edfafac9e1b807e5ee6b93624e262b28aa78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb34edfafac9e1b807e5ee6b93624e262b28aa78"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "0971a028b3a974a5d93d52bd5b1863729487ade7", "filename": "gcc/ada/adaint.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79/gcc%2Fada%2Fadaint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79/gcc%2Fada%2Fadaint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.c?ref=23922a2f6acfcbdf13363db7ddf4fcf3aa4dfc79", "patch": "@@ -2266,19 +2266,22 @@ win32_wait (int *status)\n   DWORD res;\n   int k;\n   Process_List *pl;\n+  int hl_len;\n \n   if (plist_length == 0)\n     {\n       errno = ECHILD;\n       return -1;\n     }\n \n-  hl = (HANDLE *) xmalloc (sizeof (HANDLE) * plist_length);\n-\n   k = 0;\n   plist_enter();\n \n+  hl_len = plist_length;\n+\n   /* -------------------- critical section -------------------- */\n+  hl = (HANDLE *) xmalloc (sizeof (HANDLE) * hl_len);\n+\n   pl = PLIST;\n   while (pl)\n     {\n@@ -2289,7 +2292,7 @@ win32_wait (int *status)\n \n   plist_leave();\n \n-  res = WaitForMultipleObjects (plist_length, hl, FALSE, INFINITE);\n+  res = WaitForMultipleObjects (hl_len, hl, FALSE, INFINITE);\n   h = hl[res - WAIT_OBJECT_0];\n   free (hl);\n "}]}