{"sha": "c35383cbdf71d91609e075e87f01a18b7f96bb5c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzM1MzgzY2JkZjcxZDkxNjA5ZTA3NWU4N2YwMWExOGI3Zjk2YmI1Yw==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2002-07-19T13:24:55Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2002-07-19T13:24:55Z"}, "message": "prefix.c (update_path): Don't zap single `.' path components unless followed by another `.' and fix...\n\n\t* prefix.c (update_path): Don't zap single `.' path components\n\tunless followed by another `.' and fix typo last patch.\n\nFrom-SVN: r55586", "tree": {"sha": "3b24143bd484d1b79ed5da6d0ca2736654271b0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b24143bd484d1b79ed5da6d0ca2736654271b0d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c35383cbdf71d91609e075e87f01a18b7f96bb5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c35383cbdf71d91609e075e87f01a18b7f96bb5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c35383cbdf71d91609e075e87f01a18b7f96bb5c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c35383cbdf71d91609e075e87f01a18b7f96bb5c/comments", "author": null, "committer": null, "parents": [{"sha": "c42c75bfc4eb02ebecc0d837cf108be92090e23a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c42c75bfc4eb02ebecc0d837cf108be92090e23a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c42c75bfc4eb02ebecc0d837cf108be92090e23a"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "7e943e4affe95bc92ae08e51e0be3e42bb88c946", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c35383cbdf71d91609e075e87f01a18b7f96bb5c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c35383cbdf71d91609e075e87f01a18b7f96bb5c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c35383cbdf71d91609e075e87f01a18b7f96bb5c", "patch": "@@ -1,3 +1,8 @@\n+2002-07-19  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* prefix.c (update_path): Don't zap single `.' path components\n+\tunless followed by another `.' and fix typo last patch.\n+\n 2002-07-18  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* cppexp.c (cpp_num_mul): Remove unused parameter."}, {"sha": "18f79987a34e8284b1e87f4ee5a1d03cbe4b1449", "filename": "gcc/prefix.c", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c35383cbdf71d91609e075e87f01a18b7f96bb5c/gcc%2Fprefix.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c35383cbdf71d91609e075e87f01a18b7f96bb5c/gcc%2Fprefix.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprefix.c?ref=c35383cbdf71d91609e075e87f01a18b7f96bb5c", "patch": "@@ -284,17 +284,23 @@ update_path (path, key)\n       p = strchr (p, '.');\n       if (p == NULL)\n \tbreak;\n-      /* Get rid of a leading `./' and replace `/./' with `/'.  */\n+      /* Get rid of a leading `./' and replace `/./' with `/', when\n+\t such components are followed with another `.'.  */\n       if (IS_DIR_SEPARATOR (p[1])\n \t  && (p == result || IS_DIR_SEPARATOR (p[-1])))\n \t{\n \t  src = p + 2;\n \t  /* Be careful about .//foo  */\n \t  while (IS_DIR_SEPARATOR (*src))\n \t    ++src;\n-\t  dest = p;\n-\t  while ((*dest++ = *src++) != 0)\n-\t    ;\n+\t  if (*src == '.')\n+\t    {\n+\t      dest = p;\n+\t      while ((*dest++ = *src++) != 0)\n+\t\t;\n+\t    }\n+\t  else\n+\t    ++p;\n \t}\n       /* Look for `/../'  */\n       else if (p[1] == '.'\n@@ -316,7 +322,7 @@ update_path (path, key)\n \t      dest = p - 1;\n \t      while (dest != result && IS_DIR_SEPARATOR (*dest))\n \t\t--dest;\n-\t      while (dest != result && IS_DIR_SEPARATOR (dest[-1]))\n+\t      while (dest != result && !IS_DIR_SEPARATOR (dest[-1]))\n \t\t--dest;\n \t      /* Don't strip leading `/'.  */\n \t      while (IS_DIR_SEPARATOR (*dest))"}]}