{"sha": "091c9413bb5e21d619ff38e5a5dcea2e78e0ae42", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDkxYzk0MTNiYjVlMjFkNjE5ZmYzOGU1YTVkY2VhMmU3OGUwYWU0Mg==", "commit": {"author": {"name": "Erik Edelmann", "email": "eedelman@gcc.gnu.org", "date": "2006-01-27T17:05:21Z"}, "committer": {"name": "Erik Edelmann", "email": "eedelman@gcc.gnu.org", "date": "2006-01-27T17:05:21Z"}, "message": "symbol.c (free_old_symbol): Fix confusing comment, and add code to free old_symbol->formal.\n\nfortran/\n2005-01-27  Erik Edelmann  <eedelman@gcc.gnu.org>\n\n        * symbol.c (free_old_symbol): Fix confusing comment, and add code\n         to free old_symbol->formal.\n\nFrom-SVN: r110301", "tree": {"sha": "4f22a102c13e2eac8890d0ed4906fb9043ae2ccd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f22a102c13e2eac8890d0ed4906fb9043ae2ccd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42/comments", "author": null, "committer": null, "parents": [{"sha": "929e5e5b5d1dcc5de28ab486605c889dc879ab20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/929e5e5b5d1dcc5de28ab486605c889dc879ab20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/929e5e5b5d1dcc5de28ab486605c889dc879ab20"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "c395a0ce7fceefe9eae0bd405442dd628c59d713", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=091c9413bb5e21d619ff38e5a5dcea2e78e0ae42", "patch": "@@ -1,3 +1,8 @@\n+2005-01-27  Erik Edelmann  <eedelman@gcc.gnu.org>\n+\n+\t* symbol.c (free_old_symbol): Fix confusing comment, and add code\n+\t  to free old_symbol->formal.\n+\n 2005-01-26  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/25964"}, {"sha": "111c6926473be26cb9ee667bb9b5a2e2f314534f", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/091c9413bb5e21d619ff38e5a5dcea2e78e0ae42/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=091c9413bb5e21d619ff38e5a5dcea2e78e0ae42", "patch": "@@ -2230,8 +2230,11 @@ gfc_undo_symbols (void)\n }\n \n \n-/* Free sym->old_symbol.  sym->old_symbol is mostly a shallow copy of sym; but\n-   few components might have been given new values. */\n+/* Free sym->old_symbol. sym->old_symbol is mostly a shallow copy of sym; the\n+   components of old_symbol that might need deallocation are the \"allocatables\"\n+   that are restored in gfc_undo_symbols(), with two exceptions: namelist and\n+   namelist_tail.  In case these differ between old_symbol and sym, it's just\n+   because sym->namelist has gotten a few more items.  */\n \n static void\n free_old_symbol (gfc_symbol * sym)\n@@ -2245,6 +2248,9 @@ free_old_symbol (gfc_symbol * sym)\n   if (sym->old_symbol->value != sym->value) \n     gfc_free_expr (sym->old_symbol->value);\n \n+  if (sym->old_symbol->formal != sym->formal)\n+    gfc_free_formal_arglist (sym->old_symbol->formal);\n+\n   gfc_free (sym->old_symbol);\n   sym->old_symbol = NULL;\n }"}]}