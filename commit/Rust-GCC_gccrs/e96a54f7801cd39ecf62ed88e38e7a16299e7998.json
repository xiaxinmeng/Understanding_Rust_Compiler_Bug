{"sha": "e96a54f7801cd39ecf62ed88e38e7a16299e7998", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk2YTU0Zjc4MDFjZDM5ZWNmNjJlZDg4ZTM4ZTdhMTYyOTllNzk5OA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2007-09-04T10:29:23Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2007-09-04T10:29:23Z"}, "message": "regrename.c (build_def_use): Don't share RTL between MATCH_OPERATOR and corresponding MATCH_DUP.\n\n\n\t* regrename.c (build_def_use): Don't share RTL between MATCH_OPERATOR\n\tand corresponding MATCH_DUP.\n\t* regrename.c(copyprop_hardreg_forward_1): Unshare when doing copyprop.\n\nFrom-SVN: r128073", "tree": {"sha": "9e2793de9a5d32dbc94f1c6424858af9f5305430", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e2793de9a5d32dbc94f1c6424858af9f5305430"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e96a54f7801cd39ecf62ed88e38e7a16299e7998", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e96a54f7801cd39ecf62ed88e38e7a16299e7998", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e96a54f7801cd39ecf62ed88e38e7a16299e7998", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e96a54f7801cd39ecf62ed88e38e7a16299e7998/comments", "author": null, "committer": null, "parents": [{"sha": "95afbcac54236d4704a84d2c0fff4dd63005d30c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95afbcac54236d4704a84d2c0fff4dd63005d30c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95afbcac54236d4704a84d2c0fff4dd63005d30c"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "1e56d980a3dbbc8248abb23d161e5de29947f0d5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e96a54f7801cd39ecf62ed88e38e7a16299e7998/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e96a54f7801cd39ecf62ed88e38e7a16299e7998/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e96a54f7801cd39ecf62ed88e38e7a16299e7998", "patch": "@@ -1,3 +1,12 @@\n+2007-09-04  Jan Hubicka  <jh@suse.cz>\n+\n+\t* regrename.c(copyprop_hardreg_forward_1): Unshare when doing copyprop.\n+\n+2007-09-04  Jan Hubicka  <jh@suse.cz>\n+\n+\t* regrename.c (build_def_use): Don't share RTL between MATCH_OPERATOR\n+\tand corresponding MATCH_DUP.\n+\n 2007-09-04  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR middle-end/33187"}, {"sha": "5ff3062503ed7b2755197f91625885271be0de99", "filename": "gcc/regrename.c", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e96a54f7801cd39ecf62ed88e38e7a16299e7998/gcc%2Fregrename.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e96a54f7801cd39ecf62ed88e38e7a16299e7998/gcc%2Fregrename.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregrename.c?ref=e96a54f7801cd39ecf62ed88e38e7a16299e7998", "patch": "@@ -807,16 +807,8 @@ build_def_use (basic_block bb)\n \t    }\n \t  for (i = 0; i < recog_data.n_dups; i++)\n \t    {\n-\t      int dup_num = recog_data.dup_num[i];\n-\n \t      old_dups[i] = *recog_data.dup_loc[i];\n \t      *recog_data.dup_loc[i] = cc0_rtx;\n-\n-\t      /* For match_dup of match_operator or match_parallel, share\n-\t\t them, so that we don't miss changes in the dup.  */\n-\t      if (icode >= 0\n-\t\t  && insn_data[icode].operand[dup_num].eliminable == 0)\n-\t\told_dups[i] = recog_data.operand[dup_num];\n \t    }\n \n \t  scan_rtx (insn, &PATTERN (insn), NO_REGS, terminate_all_read,\n@@ -1745,7 +1737,7 @@ copyprop_hardreg_forward_1 (basic_block bb, struct value_data *vd)\n \t      recog_data.operand[i] = new;\n \t      for (j = 0; j < recog_data.n_dups; j++)\n \t\tif (recog_data.dup_num[j] == i)\n-\t\t  validate_change (insn, recog_data.dup_loc[j], new, 1);\n+\t\t  validate_unshare_change (insn, recog_data.dup_loc[j], new, 1);\n \n \t      any_replacements = true;\n \t    }"}]}