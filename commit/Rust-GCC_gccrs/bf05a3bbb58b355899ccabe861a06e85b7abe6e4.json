{"sha": "bf05a3bbb58b355899ccabe861a06e85b7abe6e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmYwNWEzYmJiNThiMzU1ODk5Y2NhYmU4NjFhMDZlODViN2FiZTZlNA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2019-08-26T09:29:07Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2019-08-26T09:29:07Z"}, "message": "re PR c/91526 (Unnecessary SSE and other instructions generated when compiling in C mode (vs. C++ mode))\n\n2019-08-26  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/91526\n\t* passes.def: Note that after late FRE we do TODO_update_address_taken.\n\t* tree-ssa-sccvn.c (pass_fre::execute): In late mode schedule\n\tTODO_update_address_taken.\n\nFrom-SVN: r274922", "tree": {"sha": "d27ee2541e74e6193894d4818d2a4c19b898e43c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d27ee2541e74e6193894d4818d2a4c19b898e43c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf05a3bbb58b355899ccabe861a06e85b7abe6e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf05a3bbb58b355899ccabe861a06e85b7abe6e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf05a3bbb58b355899ccabe861a06e85b7abe6e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf05a3bbb58b355899ccabe861a06e85b7abe6e4/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "20e7012b755427d1db00ba6f236583ff3c24e710", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/20e7012b755427d1db00ba6f236583ff3c24e710", "html_url": "https://github.com/Rust-GCC/gccrs/commit/20e7012b755427d1db00ba6f236583ff3c24e710"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "705c993bc158eb230529f4f7fdca95adffadb651", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf05a3bbb58b355899ccabe861a06e85b7abe6e4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf05a3bbb58b355899ccabe861a06e85b7abe6e4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bf05a3bbb58b355899ccabe861a06e85b7abe6e4", "patch": "@@ -1,3 +1,10 @@\n+2019-08-26  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/91526\n+\t* passes.def: Note that after late FRE we do TODO_update_address_taken.\n+\t* tree-ssa-sccvn.c (pass_fre::execute): In late mode schedule\n+\tTODO_update_address_taken.\n+\n 2019-08-26  Gerald Pfeifer  <gerald@pfeifer.com>\n \n \t* config/i386/gmm_malloc.h: Only use <errno.h> and errno if"}, {"sha": "fe5a411504defd658bc38e599dba78aacc6b1e1c", "filename": "gcc/passes.def", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf05a3bbb58b355899ccabe861a06e85b7abe6e4/gcc%2Fpasses.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf05a3bbb58b355899ccabe861a06e85b7abe6e4/gcc%2Fpasses.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.def?ref=bf05a3bbb58b355899ccabe861a06e85b7abe6e4", "patch": "@@ -313,6 +313,8 @@ along with GCC; see the file COPYING3.  If not see\n       NEXT_PASS (pass_split_paths);\n       NEXT_PASS (pass_tracer);\n       NEXT_PASS (pass_fre, false /* may_iterate */);\n+      /* After late FRE we rewrite no longer addressed locals into SSA\n+         form if possible.  */\n       NEXT_PASS (pass_thread_jumps);\n       NEXT_PASS (pass_dominator, false /* may_peel_loop_headers_p */);\n       NEXT_PASS (pass_strlen);"}, {"sha": "336a7c72c48789783c1d9233aa3091a8f28d0b8c", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf05a3bbb58b355899ccabe861a06e85b7abe6e4/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf05a3bbb58b355899ccabe861a06e85b7abe6e4/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=bf05a3bbb58b355899ccabe861a06e85b7abe6e4", "patch": "@@ -7312,6 +7312,11 @@ pass_fre::execute (function *fun)\n   if (iterate_p)\n     loop_optimizer_finalize ();\n \n+  /* For late FRE after IVOPTs and unrolling, see if we can\n+     remove some TREE_ADDRESSABLE and rewrite stuff into SSA.  */\n+  if (!may_iterate)\n+    todo |= TODO_update_address_taken;\n+\n   return todo;\n }\n "}]}