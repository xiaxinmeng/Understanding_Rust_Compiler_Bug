{"sha": "a949cf1c752e2a711c1794e8f511f118ab927b40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk0OWNmMWM3NTJlMmE3MTFjMTc5NGU4ZjUxMWYxMThhYjkyN2I0MA==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2013-04-09T15:02:41Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2013-04-09T15:02:41Z"}, "message": "sched-vis.c (print_pattern): Print SEQUENCE of insns as insns.\n\n\n\t* sched-vis.c (print_pattern): Print SEQUENCE of insns as insns.\n\nFrom-SVN: r197640", "tree": {"sha": "78c131deabe6c46e9291c59117a110435fec542e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78c131deabe6c46e9291c59117a110435fec542e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a949cf1c752e2a711c1794e8f511f118ab927b40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a949cf1c752e2a711c1794e8f511f118ab927b40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a949cf1c752e2a711c1794e8f511f118ab927b40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a949cf1c752e2a711c1794e8f511f118ab927b40/comments", "author": null, "committer": null, "parents": [{"sha": "48eecbeeb808ae9dc4e2d6a43298452d8cb670cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48eecbeeb808ae9dc4e2d6a43298452d8cb670cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48eecbeeb808ae9dc4e2d6a43298452d8cb670cc"}], "stats": {"total": 33, "additions": 28, "deletions": 5}, "files": [{"sha": "6181c6741ae946e3eaa63692942a12c272b599a8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a949cf1c752e2a711c1794e8f511f118ab927b40/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a949cf1c752e2a711c1794e8f511f118ab927b40/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a949cf1c752e2a711c1794e8f511f118ab927b40", "patch": "@@ -1,5 +1,7 @@\n 2013-04-09  Steven Bosscher  <steven@gcc.gnu.org>\n \n+\t* sched-vis.c (print_pattern): Print SEQUENCE of insns as insns.\n+\n \t* config/sparc/sparc.md: Use define_c_enum for \"unspec\" and \"unspecv\".\n \n 2013-04-09  Marek Polacek  <polacek@redhat.com>"}, {"sha": "763230ccdb2bd5638ddcc4cf6c2ac63e57a853ec", "filename": "gcc/sched-vis.c", "status": "modified", "additions": 26, "deletions": 5, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a949cf1c752e2a711c1794e8f511f118ab927b40/gcc%2Fsched-vis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a949cf1c752e2a711c1794e8f511f118ab927b40/gcc%2Fsched-vis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-vis.c?ref=a949cf1c752e2a711c1794e8f511f118ab927b40", "patch": "@@ -51,6 +51,9 @@ along with GCC; see the file COPYING3.  If not see\n static bool rtl_slim_pp_initialized = false;\n static pretty_printer rtl_slim_pp;\n \n+/* For insns we print patterns, and for some patterns we print insns...  */\n+static void print_insn_with_notes (pretty_printer *, const_rtx);\n+\n /* This recognizes rtx'en classified as expressions.  These are always\n    represent some action on values or results of other expression, that\n    may be stored in objects representing values.  */\n@@ -562,13 +565,31 @@ print_pattern (pretty_printer *pp, const_rtx x, int verbose)\n       break;\n     case SEQUENCE:\n       {\n-\tint i;\n-\n \tpp_string (pp, \"sequence{\");\n-\tfor (i = 0; i < XVECLEN (x, 0); i++)\n+\tif (INSN_P (XVECEXP (x, 0, 0)))\n \t  {\n-\t    print_pattern (pp, XVECEXP (x, 0, i), verbose);\n-\t    pp_character (pp, ';');\n+\t    /* Print the sequence insns indented.  */\n+\t    const char * save_print_rtx_head = print_rtx_head;\n+\t    char indented_print_rtx_head[32];\n+\n+\t    pp_newline (pp);\n+\t    gcc_assert (strlen (print_rtx_head) < sizeof (indented_print_rtx_head) - 4);\n+\t    snprintf (indented_print_rtx_head,\n+\t\t      sizeof (indented_print_rtx_head),\n+\t\t      \"%s     \", print_rtx_head);\n+\t    print_rtx_head = indented_print_rtx_head;\n+\t    for (int i = 0; i < XVECLEN (x, 0); i++)\n+\t      print_insn_with_notes (pp, XVECEXP (x, 0, i));\n+\t    pp_printf (pp, \"%s      \", save_print_rtx_head);\n+\t    print_rtx_head = save_print_rtx_head;\n+\t  }\n+\telse\n+\t  {\n+\t    for (int i = 0; i < XVECLEN (x, 0); i++)\n+\t      {\n+\t\tprint_pattern (pp, XVECEXP (x, 0, i), verbose);\n+\t\tpp_character (pp, ';');\n+\t      }\n \t  }\n \tpp_character (pp, '}');\n       }"}]}