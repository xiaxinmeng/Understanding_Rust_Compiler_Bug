{"sha": "a43434ffab6e7983ed1b9233490e38d4a1bc6f1a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQzNDM0ZmZhYjZlNzk4M2VkMWI5MjMzNDkwZTM4ZDRhMWJjNmYxYQ==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2012-06-03T12:46:44Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2012-06-03T12:46:44Z"}, "message": "pa.h (MAX_PCREL17F_OFFSET): Define.\n\n\t* config/pa/pa.h (MAX_PCREL17F_OFFSET): Define.\n\t* config/pa/pa.c (pa_attr_length_millicode_call): Use\n\tMAX_PCREL17F_OFFSET instead of fixed offset.\n\t(pa_attr_length_call): Likewise.\n\t(pa_attr_length_indirect_call): Likewise.\n\nFrom-SVN: r188151", "tree": {"sha": "bc0a9e5cc20a658cd006bd6480a65ace5676dbad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc0a9e5cc20a658cd006bd6480a65ace5676dbad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a/comments", "author": null, "committer": null, "parents": [{"sha": "aba92f5fe08ffe72abe562a42381ab9f089177fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aba92f5fe08ffe72abe562a42381ab9f089177fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aba92f5fe08ffe72abe562a42381ab9f089177fa"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "09a8923669361ae70e1d997b86f5b0d055223eba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a43434ffab6e7983ed1b9233490e38d4a1bc6f1a", "patch": "@@ -1,3 +1,11 @@\n+2012-06-03  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* config/pa/pa.h (MAX_PCREL17F_OFFSET): Define.\n+\t* config/pa/pa.c (pa_attr_length_millicode_call): Use\n+\tMAX_PCREL17F_OFFSET instead of fixed offset.\n+\t(pa_attr_length_call): Likewise.\n+\t(pa_attr_length_indirect_call): Likewise.\n+\n 2012-06-03  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/53512"}, {"sha": "9dee55b525dfa2fea79f7255a9a0637ec73743a5", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=a43434ffab6e7983ed1b9233490e38d4a1bc6f1a", "patch": "@@ -7457,7 +7457,7 @@ pa_attr_length_millicode_call (rtx insn)\n     return 24;\n   else\n     {\n-      if (!TARGET_LONG_CALLS && distance < 240000)\n+      if (!TARGET_LONG_CALLS && distance < MAX_PCREL17F_OFFSET)\n \treturn 8;\n \n       if (TARGET_LONG_ABS_CALL && !flag_pic)\n@@ -7670,7 +7670,7 @@ pa_attr_length_call (rtx insn, int sibcall)\n   /* pc-relative branch.  */\n   if (!TARGET_LONG_CALLS\n       && ((TARGET_PA_20 && !sibcall && distance < 7600000)\n-\t  || distance < 240000))\n+\t  || distance < MAX_PCREL17F_OFFSET))\n     length += 8;\n \n   /* 64-bit plabel sequence.  */\n@@ -8029,7 +8029,7 @@ pa_attr_length_indirect_call (rtx insn)\n   if (TARGET_FAST_INDIRECT_CALLS\n       || (!TARGET_PORTABLE_RUNTIME\n \t  && ((TARGET_PA_20 && !TARGET_SOM && distance < 7600000)\n-\t      || distance < 240000)))\n+\t      || distance < MAX_PCREL17F_OFFSET)))\n     return 8;\n \n   if (flag_pic)"}, {"sha": "d977c64fdb28d8e907081fdb875982206487e1cd", "filename": "gcc/config/pa/pa.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a/gcc%2Fconfig%2Fpa%2Fpa.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a43434ffab6e7983ed1b9233490e38d4a1bc6f1a/gcc%2Fconfig%2Fpa%2Fpa.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.h?ref=a43434ffab6e7983ed1b9233490e38d4a1bc6f1a", "patch": "@@ -1519,3 +1519,12 @@ do { \t\t\t\t\t\t\t\t\t\\\n #undef TARGET_HAVE_TLS\n #define TARGET_HAVE_TLS true\n #endif\n+\n+/* The maximum offset in bytes for a PA 1.X pc-relative call to the\n+   head of the preceding stub table.  The selected offsets have been\n+   chosen so that approximately one call stub is allocated for every\n+   86.7 instructions.  A long branch stub is two instructions when\n+   not generating PIC code.  For HP-UX and ELF targets, PIC stubs are\n+   seven and four instructions, respectively.  */  \n+#define MAX_PCREL17F_OFFSET \\\n+  (flag_pic ? (TARGET_HPUX ? 198164 : 221312) : 240000)"}]}