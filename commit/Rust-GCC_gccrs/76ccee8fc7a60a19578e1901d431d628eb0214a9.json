{"sha": "76ccee8fc7a60a19578e1901d431d628eb0214a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzZjY2VlOGZjN2E2MGExOTU3OGUxOTAxZDQzMWQ2MjhlYjAyMTRhOQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2019-08-20T09:49:28Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-08-20T09:49:28Z"}, "message": "[Ada] More complete information level for -gnatR4 output\n\nThis instructs -gnatR4 to also list the Etype of a user-declared record\nsubtype if it is compiler-generated, for example in:\n\npackage P is\n\n   type U_Arr is array (Integer range <>) of Character;\n\n   type Rec1 (D1, D2 : Integer) is record\n      C : U_Arr (D1 .. D2);\n   end record;\n\n   type Rec_N is new Rec1 (1, 2);\n\nend P;\n\n2019-08-20  Eric Botcazou  <ebotcazou@adacore.com>\n\ngcc/ada/\n\n\t* repinfo.adb (List_Record_Info): In -gnatR4 mode, set the\n\trelevant flag on the implicit base type of a record subtype.\n\nFrom-SVN: r274727", "tree": {"sha": "0a3bce79bddaf34e1d8dbf0baaf5334eb226999f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a3bce79bddaf34e1d8dbf0baaf5334eb226999f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76ccee8fc7a60a19578e1901d431d628eb0214a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76ccee8fc7a60a19578e1901d431d628eb0214a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76ccee8fc7a60a19578e1901d431d628eb0214a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76ccee8fc7a60a19578e1901d431d628eb0214a9/comments", "author": null, "committer": null, "parents": [{"sha": "f2a35a2fe4a6fef35de549c3aaff120e110cceb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2a35a2fe4a6fef35de549c3aaff120e110cceb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2a35a2fe4a6fef35de549c3aaff120e110cceb8"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "82dd6a17a25c5cc1ddb36be914de923c05bd71db", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76ccee8fc7a60a19578e1901d431d628eb0214a9/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76ccee8fc7a60a19578e1901d431d628eb0214a9/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=76ccee8fc7a60a19578e1901d431d628eb0214a9", "patch": "@@ -1,3 +1,8 @@\n+2019-08-20  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* repinfo.adb (List_Record_Info): In -gnatR4 mode, set the\n+\trelevant flag on the implicit base type of a record subtype.\n+\n 2019-08-20  Bob Duff  <duff@adacore.com>\n \n \t* sem_eval.adb (Expr_Value): Implement the case of an unchecked"}, {"sha": "0f318a0d65e0542e14bc9a86f5176b11ed5e6d2e", "filename": "gcc/ada/repinfo.adb", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76ccee8fc7a60a19578e1901d431d628eb0214a9/gcc%2Fada%2Frepinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76ccee8fc7a60a19578e1901d431d628eb0214a9/gcc%2Fada%2Frepinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Frepinfo.adb?ref=76ccee8fc7a60a19578e1901d431d628eb0214a9", "patch": "@@ -1681,6 +1681,15 @@ package body Repinfo is\n          Write_Eol;\n          Write_Line (\"}\");\n       end if;\n+\n+      --  The type is relevant for a record subtype\n+\n+      if List_Representation_Info = 4\n+        and then not Is_Base_Type (Ent)\n+        and then Is_Itype (Etype (Ent))\n+      then\n+         Relevant_Entities.Set (Etype (Ent), True);\n+      end if;\n    end List_Record_Info;\n \n    -------------------"}]}