{"sha": "7e8dad182700d23558d74de4d1461379d9ed6124", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2U4ZGFkMTgyNzAwZDIzNTU4ZDc0ZGU0ZDE0NjEzNzlkOWVkNjEyNA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2000-08-09T09:57:55Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2000-08-09T09:57:55Z"}, "message": "rtti.c (build_dynamic_cast_1): Set \"C\" linkage for new abi runtime.\n\n\t* rtti.c (build_dynamic_cast_1): Set \"C\" linkage for new abi\n\truntime.\n\t* cp/tinfo.cc (__dynamic_cast): Likewise.\n\t* cp/inc/cxxabi.h (__dynamic_cast): Likewise.\n\nFrom-SVN: r35588", "tree": {"sha": "0b6e6bc230ef4ae30574d192950e97f879cf3428", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b6e6bc230ef4ae30574d192950e97f879cf3428"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e8dad182700d23558d74de4d1461379d9ed6124", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e8dad182700d23558d74de4d1461379d9ed6124", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e8dad182700d23558d74de4d1461379d9ed6124", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e8dad182700d23558d74de4d1461379d9ed6124/comments", "author": null, "committer": null, "parents": [{"sha": "68c9819964ede72d8d57c47877825a1dce358486", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68c9819964ede72d8d57c47877825a1dce358486", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68c9819964ede72d8d57c47877825a1dce358486"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "8912264d2d50b5181b4be97013f3cbafbb4d2640", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7e8dad182700d23558d74de4d1461379d9ed6124", "patch": "@@ -1,3 +1,10 @@\n+2000-08-09  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* rtti.c (build_dynamic_cast_1): Set \"C\" linkage for new abi\n+\truntime.\n+\t* cp/tinfo.cc (__dynamic_cast): Likewise.\n+\t* cp/inc/cxxabi.h (__dynamic_cast): Likewise.\t\n+\n 2000-08-09  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* cvt.c (convert_to_pointer_force): Fix error message when"}, {"sha": "2587e85f26fe45cf07dda2e9e9c1412c81c90a8d", "filename": "gcc/cp/inc/cxxabi.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2Finc%2Fcxxabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2Finc%2Fcxxabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finc%2Fcxxabi.h?ref=7e8dad182700d23558d74de4d1461379d9ed6124", "patch": "@@ -414,7 +414,7 @@ class __vmi_class_type_info : public __class_type_info {\n };\n \n /* dynamic cast runtime */\n-extern \"C++\"\n+extern \"C\"\n void *__dynamic_cast (const void *__src_ptr,    /* object started from */\n                       const __class_type_info *__src_type, /* static type of object */\n                       const __class_type_info *__dst_type, /* desired target type */"}, {"sha": "94e67a551a93ad88d6fa0a01451368b04d279f37", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=7e8dad182700d23558d74de4d1461379d9ed6124", "patch": "@@ -846,11 +846,7 @@ build_dynamic_cast_1 (type, expr)\n \t                  (NULL_TREE, ptrdiff_type_node, void_list_node))));\n \t        }\n \t      tmp = build_function_type (ptr_type_node, tmp);\n-\t      if (new_abi_rtti_p ())\n-\t\t/* We want its name mangling.  */\n-\t\tdcast_fn = build_cp_library_fn_ptr (name, tmp);\n-\t      else\n-\t\tdcast_fn = build_library_fn_ptr (name, tmp);\n+\t      dcast_fn = build_library_fn_ptr (name, tmp);\n               pop_nested_namespace (ns);\n               dynamic_cast_node = dcast_fn;\n \t    }"}, {"sha": "c381ff111013a5735f38bb547d70496317f0f12a", "filename": "gcc/cp/tinfo.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2Ftinfo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e8dad182700d23558d74de4d1461379d9ed6124/gcc%2Fcp%2Ftinfo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftinfo.cc?ref=7e8dad182700d23558d74de4d1461379d9ed6124", "patch": "@@ -1165,7 +1165,7 @@ __do_upcast (const __class_type_info *dst, const void *obj_ptr,\n }\n \n // this is the external interface to the dynamic cast machinery\n-extern \"C++\" void *\n+extern \"C\" void *\n __dynamic_cast (const void *src_ptr,    // object started from\n                 const __class_type_info *src_type, // type of the starting object\n                 const __class_type_info *dst_type, // desired target type"}]}