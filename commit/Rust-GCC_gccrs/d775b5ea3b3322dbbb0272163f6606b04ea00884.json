{"sha": "d775b5ea3b3322dbbb0272163f6606b04ea00884", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDc3NWI1ZWEzYjMzMjJkYmJiMDI3MjE2M2Y2NjA2YjA0ZWEwMDg4NA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2013-09-01T16:51:41Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-09-01T16:51:41Z"}, "message": "re PR ada/58239 (pretty-print.c:789: undefined reference to `operator delete(void*)')\n\n\tPR ada/58239\ngnattools/\n\t* Makefile.in (CXX_LFLAGS): New.\n\t(TOOLS_FLAGS_TO_PASS_NATIVE): Pass CXX and CXX_LFLAGS.\n\t(TOOLS_FLAGS_TO_PASS_RE): Likewise.\n\t(TOOLS_FLAGS_TO_PASS_CROSS): Pass CXX.\ngcc/ada/\n\t* gcc-interface/Makefile.in (GCC_LINK_FLAGS): Add -static-libstdc++.\n\t(GCC_LINK): Use CXX instead of CC.\n\t* gcc-interface/Make-lang.in (CXX_LFLAGS): New.\n\t(ADA_TOOLS_FLAGS_TO_PASS): Pass CXX, and CXX_LFLAGS for native.\n\nCo-Authored-By: Iain Sandoe <iain@codesourcery.com>\n\nFrom-SVN: r202150", "tree": {"sha": "e3df2269fd519d8902b71015555d5e8e2ca0a294", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3df2269fd519d8902b71015555d5e8e2ca0a294"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d775b5ea3b3322dbbb0272163f6606b04ea00884", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d775b5ea3b3322dbbb0272163f6606b04ea00884", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d775b5ea3b3322dbbb0272163f6606b04ea00884", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d775b5ea3b3322dbbb0272163f6606b04ea00884/comments", "author": null, "committer": null, "parents": [{"sha": "cec8583c755149b5d03dd64bb8f5323c0ca6263b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cec8583c755149b5d03dd64bb8f5323c0ca6263b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cec8583c755149b5d03dd64bb8f5323c0ca6263b"}], "stats": {"total": 43, "additions": 40, "deletions": 3}, "files": [{"sha": "61fd991bef2d8bdb0cc6fba08b753d041d55ec4f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d775b5ea3b3322dbbb0272163f6606b04ea00884/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d775b5ea3b3322dbbb0272163f6606b04ea00884/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d775b5ea3b3322dbbb0272163f6606b04ea00884", "patch": "@@ -1,3 +1,12 @@\n+2013-09-01  Eric Botcazou  <ebotcazou@adacore.com>\n+\t    Iain Sandoe  <iain@codesourcery.com>\n+\n+\tPR ada/58239\n+\t* gcc-interface/Makefile.in (GCC_LINK_FLAGS): Add -static-libstdc++.\n+\t(GCC_LINK): Use CXX instead of CC.\n+\t* gcc-interface/Make-lang.in (CXX_LFLAGS): New.\n+\t(ADA_TOOLS_FLAGS_TO_PASS): Pass CXX, and CXX_LFLAGS for native.\n+\n 2013-08-13  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity): Do not bother about alias"}, {"sha": "93250da561c4eb4d446757f293046933fd012230", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d775b5ea3b3322dbbb0272163f6606b04ea00884/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d775b5ea3b3322dbbb0272163f6606b04ea00884/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=d775b5ea3b3322dbbb0272163f6606b04ea00884", "patch": "@@ -111,6 +111,12 @@ ada: gnat1$(exeext) gnatbind$(exeext)\n # Tell GNU Make to ignore these, if they exist.\n .PHONY: ada\n \n+CXX_LFLAGS = \\\n+ -B../../../$(target_noncanonical)/libstdc++-v3/src/.libs \\\n+ -B../../../$(target_noncanonical)/libstdc++-v3/libsupc++/.libs \\\n+ -L../../../$(target_noncanonical)/libstdc++-v3/src/.libs \\\n+ -L../../../$(target_noncanonical)/libstdc++-v3/libsupc++/.libs\n+\n # There are too many Ada sources to check against here.  Let's\n # always force the recursive make.\n ifeq ($(build), $(host))\n@@ -119,6 +125,7 @@ ifeq ($(build), $(host))\n     # tree.\n     ADA_TOOLS_FLAGS_TO_PASS=\\\n         CC=\"../../xgcc -B../../\" \\\n+        CXX=\"../../xg++ -B../../ $(CXX_LFLAGS)\" \\\n         $(COMMON_FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n         ADA_INCLUDES=\"-I- -I../rts\" \\\n         GNATMAKE=\"../../gnatmake\" \\\n@@ -136,6 +143,7 @@ ifeq ($(build), $(host))\n \n     ADA_TOOLS_FLAGS_TO_PASS=\\\n         CC=\"$(CC)\" \\\n+        CXX=\"$(CXX)\" \\\n         $(COMMON_FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n         ADA_INCLUDES=\"-I$(RTS_DIR)../adainclude -I$(RTS_DIR)\" \\\n         GNATMAKE=\"gnatmake\" \\\n@@ -158,6 +166,7 @@ else\n     # built runtime.\n     ADA_TOOLS_FLAGS_TO_PASS=\\\n         CC=\"$(CC)\" \\\n+        CXX=\"$(CXX)\" \\\n         $(COMMON_FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS)  \\\n         ADA_INCLUDES=\"-I../rts\"                \\\n         GNATMAKE=\"$(GNATMAKE_FOR_HOST)\"      \\\n@@ -172,6 +181,7 @@ else\n     endif\n     ADA_TOOLS_FLAGS_TO_PASS=\\\n         CC=\"$(CC)\" \\\n+        CXX=\"$(CXX)\" \\\n         $(COMMON_FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS)  \\\n         ADA_INCLUDES=\"-I$(RTS_DIR)../adainclude -I$(RTS_DIR)\" \\\n         GNATMAKE=\"$(GNATMAKE_FOR_HOST)\"      \\"}, {"sha": "0c4057c1019a2b26a4e9871f626d63b6d6a8156e", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d775b5ea3b3322dbbb0272163f6606b04ea00884/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d775b5ea3b3322dbbb0272163f6606b04ea00884/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=d775b5ea3b3322dbbb0272163f6606b04ea00884", "patch": "@@ -198,7 +198,7 @@ RTSDIR = rts$(subst /,_,$(MULTISUBDIR))\n # Link flags used to build gnat tools.  By default we prefer to statically\n # link with libgcc to avoid a dependency on shared libgcc (which is tricky\n # to deal with as it may conflict with the libgcc provided by the system).\n-GCC_LINK_FLAGS=-static-libgcc\n+GCC_LINK_FLAGS=-static-libstdc++ -static-libgcc\n \n # End of variables for you to override.\n \n@@ -2275,7 +2275,7 @@ ifeq ($(strip $(filter-out darwin%,$(osys))),)\n   GMEM_LIB = gmemlib\n   LIBRARY_VERSION := $(LIB_VERSION)\n   soext = .dylib\n-  GCC_LINK_FLAGS=\n+  GCC_LINK_FLAGS=-static-libstdc++\n endif\n \n # ARM Nucleus\n@@ -2397,7 +2397,7 @@ TOOLS_FLAGS_TO_PASS=\t\t\\\n \t\"GNATLINK=$(GNATLINK)\"\t\\\n \t\"GNATBIND=$(GNATBIND)\"\n \n-GCC_LINK=$(CC) $(GCC_LINK_FLAGS) $(ADA_INCLUDES)\n+GCC_LINK=$(CXX) $(GCC_LINK_FLAGS) $(ADA_INCLUDES)\n \n # Build directory for the tools. Let's copy the target-dependent\n # sources using the same mechanism as for gnatlib. The other sources are"}, {"sha": "a1e7b9a32b8dacda64774292a842f5b2d59ece27", "filename": "gnattools/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d775b5ea3b3322dbbb0272163f6606b04ea00884/gnattools%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d775b5ea3b3322dbbb0272163f6606b04ea00884/gnattools%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gnattools%2FChangeLog?ref=d775b5ea3b3322dbbb0272163f6606b04ea00884", "patch": "@@ -1,3 +1,12 @@\n+2013-09-01  Eric Botcazou  <ebotcazou@adacore.com>\n+\t    Iain Sandoe  <iain@codesourcery.com>\n+\n+\tPR ada/58239\n+\t* Makefile.in (CXX_LFLAGS): New.\n+\t(TOOLS_FLAGS_TO_PASS_NATIVE): Pass CXX and CXX_LFLAGS.\n+\t(TOOLS_FLAGS_TO_PASS_RE): Likewise.\n+\t(TOOLS_FLAGS_TO_PASS_CROSS): Pass CXX.\n+\n 2012-03-14  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* configure.ac (mips-sgi-irix*): Remove."}, {"sha": "fdd649194df21de1733a0f34924f13a59e2431e5", "filename": "gnattools/Makefile.in", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d775b5ea3b3322dbbb0272163f6606b04ea00884/gnattools%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d775b5ea3b3322dbbb0272163f6606b04ea00884/gnattools%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gnattools%2FMakefile.in?ref=d775b5ea3b3322dbbb0272163f6606b04ea00884", "patch": "@@ -63,9 +63,16 @@ INCLUDES_FOR_SUBDIR = -I. -I.. -I../.. -I$(fsrcdir)/ada -I$(fsrcdir)/config \\\n \t-I$(fsrcdir)/../include -I$(fsrcdir)\n ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir)/ada\n \n+CXX_LFLAGS = \\\n+ -B../../../$(target_noncanonical)/libstdc++-v3/src/.libs \\\n+ -B../../../$(target_noncanonical)/libstdc++-v3/libsupc++/.libs \\\n+ -L../../../$(target_noncanonical)/libstdc++-v3/src/.libs \\\n+ -L../../../$(target_noncanonical)/libstdc++-v3/libsupc++/.libs\n+\n # Variables for gnattools, native\n TOOLS_FLAGS_TO_PASS_NATIVE= \\\n \t\"CC=../../xgcc -B../../\" \\\n+\t\"CXX=../../xg++ -B../../ $(CXX_LFLAGS)\" \\\n \t\"CFLAGS=$(CFLAGS) $(WARN_CFLAGS)\" \\\n \t\"LDFLAGS=$(LDFLAGS)\" \\\n \t\"ADAFLAGS=$(ADAFLAGS)\" \\\n@@ -83,6 +90,7 @@ TOOLS_FLAGS_TO_PASS_NATIVE= \\\n # Variables for regnattools\n TOOLS_FLAGS_TO_PASS_RE= \\\n \t\"CC=../../xgcc -B../../\" \\\n+\t\"CXX=../../xg++ -B../../ $(CXX_LFLAGS)\" \\\n \t\"CFLAGS=$(CFLAGS)\" \\\n \t\"ADAFLAGS=$(ADAFLAGS)\" \\\n \t\"ADA_CFLAGS=$(ADA_CFLAGS)\" \\\n@@ -99,6 +107,7 @@ TOOLS_FLAGS_TO_PASS_RE= \\\n # Variables for gnattools, cross\n TOOLS_FLAGS_TO_PASS_CROSS= \\\n \t\"CC=$(CC)\" \\\n+\t\"CXX=$(CXX)\" \\\n \t\"CFLAGS=$(CFLAGS) $(WARN_CFLAGS)\" \\\n \t\"LDFLAGS=$(LDFLAGS)\" \\\n \t\"ADAFLAGS=$(ADAFLAGS)\"\t\\"}]}