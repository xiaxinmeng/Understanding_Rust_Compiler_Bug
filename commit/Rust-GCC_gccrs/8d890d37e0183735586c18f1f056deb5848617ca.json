{"sha": "8d890d37e0183735586c18f1f056deb5848617ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ4OTBkMzdlMDE4MzczNTU4NmMxOGYxZjA1NmRlYjU4NDg2MTdjYQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2019-11-18T19:28:53Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2019-11-18T19:28:53Z"}, "message": "re PR ipa/92508 (ICE in do_estimate_edge_time, at ipa-inline-analysis.c:223 since r278159)\n\n\n\tPR ipa/92508\n\t* ipa-inline.c (inline_small_functions): Add new edges after reseting\n\tcaches.\n\t* ipa-inline-analysis.c (do_estimate_edge_time): Fix sanity check.\n\nFrom-SVN: r278419", "tree": {"sha": "0d638d75291cc6786b2a339c529209f6b659553f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d638d75291cc6786b2a339c529209f6b659553f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d890d37e0183735586c18f1f056deb5848617ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d890d37e0183735586c18f1f056deb5848617ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d890d37e0183735586c18f1f056deb5848617ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d890d37e0183735586c18f1f056deb5848617ca/comments", "author": null, "committer": null, "parents": [{"sha": "092508a07975a00b3bc7c4c6ef551d5b6dc2c193", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/092508a07975a00b3bc7c4c6ef551d5b6dc2c193", "html_url": "https://github.com/Rust-GCC/gccrs/commit/092508a07975a00b3bc7c4c6ef551d5b6dc2c193"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "4e381af329b72fa4285db40b2f18e194b0ac3b68", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d890d37e0183735586c18f1f056deb5848617ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d890d37e0183735586c18f1f056deb5848617ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d890d37e0183735586c18f1f056deb5848617ca", "patch": "@@ -1,3 +1,10 @@\n+2019-11-18  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR ipa/92508\n+\t* ipa-inline.c (inline_small_functions): Add new edges after reseting\n+\tcaches.\n+\t* ipa-inline-analysis.c (do_estimate_edge_time): Fix sanity check.\n+\n 2019-11-18  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* doc/sourcebuild.texi (vect_check_ptrs): Document."}, {"sha": "b5a55a71d5a46788f6f240d9dd7ee70e61ee47c1", "filename": "gcc/ipa-inline-analysis.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d890d37e0183735586c18f1f056deb5848617ca/gcc%2Fipa-inline-analysis.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d890d37e0183735586c18f1f056deb5848617ca/gcc%2Fipa-inline-analysis.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-analysis.c?ref=8d890d37e0183735586c18f1f056deb5848617ca", "patch": "@@ -211,7 +211,7 @@ do_estimate_edge_time (struct cgraph_edge *edge, sreal *ret_nonspec_time)\n \t  nonspec_time = e->entry.nonspec_time;\n \t  hints = e->entry.hints;\n \t  if (flag_checking\n-\t      && !edge->callee->count.ipa_p ())\n+\t      && !callee->count.ipa_p ())\n \t    {\n \t      sreal chk_time, chk_nonspec_time;\n \t      int chk_size, chk_min_size;"}, {"sha": "1f77ba25ce0e32a9770e87478566457a93957d85", "filename": "gcc/ipa-inline.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d890d37e0183735586c18f1f056deb5848617ca/gcc%2Fipa-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d890d37e0183735586c18f1f056deb5848617ca/gcc%2Fipa-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline.c?ref=8d890d37e0183735586c18f1f056deb5848617ca", "patch": "@@ -2136,9 +2136,8 @@ inline_small_functions (void)\n \n \t  gcc_checking_assert (!callee->inlined_to);\n \t  inline_call (edge, true, &new_indirect_edges, &overall_size, true);\n-\t  add_new_edges_to_heap (&edge_heap, new_indirect_edges);\n-\n \t  reset_edge_caches (edge->callee);\n+\t  add_new_edges_to_heap (&edge_heap, new_indirect_edges);\n \n \t  update_callee_keys (&edge_heap, where, updated_nodes);\n \t}"}]}