{"sha": "f9cf182edf755856667f7f6ce434a08248d5ea40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjljZjE4MmVkZjc1NTg1NjY2N2Y3ZjZjZTQzNGEwODI0OGQ1ZWE0MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-09-27T23:19:54Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-09-27T23:19:54Z"}, "message": "(newline_fix, name_newline_fix): Don't treat \\r specially here; it only causes bugs.\n\n(newline_fix, name_newline_fix): Don't treat \\r specially here; it\nonly causes bugs.  This undoes the May 14 16:01:13 1990 change to\nnewline_fix and name_newline_fix.\n\nFrom-SVN: r8151", "tree": {"sha": "275ad1b25aa99a1d50913e667d06e8ad8afdb861", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/275ad1b25aa99a1d50913e667d06e8ad8afdb861"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f9cf182edf755856667f7f6ce434a08248d5ea40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9cf182edf755856667f7f6ce434a08248d5ea40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9cf182edf755856667f7f6ce434a08248d5ea40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9cf182edf755856667f7f6ce434a08248d5ea40/comments", "author": null, "committer": null, "parents": [{"sha": "1abe4c83cacedf009737748283337eefad1237f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1abe4c83cacedf009737748283337eefad1237f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1abe4c83cacedf009737748283337eefad1237f4"}], "stats": {"total": 36, "additions": 8, "deletions": 28}, "files": [{"sha": "d34d8ed87babd5a95499645dbc1c66c8e6feb95d", "filename": "gcc/cccp.c", "status": "modified", "additions": 8, "deletions": 28, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9cf182edf755856667f7f6ce434a08248d5ea40/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9cf182edf755856667f7f6ce434a08248d5ea40/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=f9cf182edf755856667f7f6ce434a08248d5ea40", "patch": "@@ -2310,25 +2310,15 @@ newline_fix (bp)\n      U_CHAR *bp;\n {\n   register U_CHAR *p = bp;\n-  register int count = 0;\n \n   /* First count the backslash-newline pairs here.  */\n \n-  while (1) {\n-    if (p[0] == '\\\\') {\n-      if (p[1] == '\\n')\n-\tp += 2, count++;\n-      else if (p[1] == '\\r' && p[2] == '\\n')\n-\tp += 3, count++;\n-      else\n-\tbreak;\n-    } else\n-      break;\n-  }\n+  while (p[0] == '\\\\' && p[1] == '\\n')\n+    p += 2;\n \n   /* What follows the backslash-newlines is not embarrassing.  */\n \n-  if (count == 0 || (*p != '/' && *p != '*'))\n+  if (*p != '/' && *p != '*')\n     return;\n \n   /* Copy all potentially embarrassing characters\n@@ -2339,7 +2329,7 @@ newline_fix (bp)\n     *bp++ = *p++;\n \n   /* Now write the same number of pairs after the embarrassing chars.  */\n-  while (count-- > 0) {\n+  while (bp < p) {\n     *bp++ = '\\\\';\n     *bp++ = '\\n';\n   }\n@@ -2353,24 +2343,14 @@ name_newline_fix (bp)\n      U_CHAR *bp;\n {\n   register U_CHAR *p = bp;\n-  register int count = 0;\n \n   /* First count the backslash-newline pairs here.  */\n-  while (1) {\n-    if (p[0] == '\\\\') {\n-      if (p[1] == '\\n')\n-\tp += 2, count++;\n-      else if (p[1] == '\\r' && p[2] == '\\n')\n-\tp += 3, count++;\n-      else\n-\tbreak;\n-    } else\n-      break;\n-  }\n+  while (p[0] == '\\\\' && p[1] == '\\n')\n+    p += 2;\n \n   /* What follows the backslash-newlines is not embarrassing.  */\n \n-  if (count == 0 || !is_idchar[*p])\n+  if (!is_idchar[*p])\n     return;\n \n   /* Copy all potentially embarrassing characters\n@@ -2381,7 +2361,7 @@ name_newline_fix (bp)\n     *bp++ = *p++;\n \n   /* Now write the same number of pairs after the embarrassing chars.  */\n-  while (count-- > 0) {\n+  while (bp < p) {\n     *bp++ = '\\\\';\n     *bp++ = '\\n';\n   }"}]}