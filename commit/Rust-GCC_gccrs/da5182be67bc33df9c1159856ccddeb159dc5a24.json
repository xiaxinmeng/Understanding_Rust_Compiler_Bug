{"sha": "da5182be67bc33df9c1159856ccddeb159dc5a24", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE1MTgyYmU2N2JjMzNkZjljMTE1OTg1NmNjZGRlYjE1OWRjNWEyNA==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2012-09-18T14:26:06Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-09-18T14:26:06Z"}, "message": "invoke.texi: Document -fada-spec-parent.\n\n\t* doc/invoke.texi: Document -fada-spec-parent.\nc-family/\n\t* c.opt (-fada-spec-parent): Define new command line switch.\n\t* c-ada-spec.c (get_ada_package): When -fada-spec-parent\n\tis specified, generate binding spec as a child of the specified unit.\n\nFrom-SVN: r191427", "tree": {"sha": "c33f17e71b696977df973f39757eb9e46a3ce77c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c33f17e71b696977df973f39757eb9e46a3ce77c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da5182be67bc33df9c1159856ccddeb159dc5a24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5182be67bc33df9c1159856ccddeb159dc5a24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da5182be67bc33df9c1159856ccddeb159dc5a24", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5182be67bc33df9c1159856ccddeb159dc5a24/comments", "author": null, "committer": null, "parents": [{"sha": "ecfce0b850ae17455c559493c027599df251699a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecfce0b850ae17455c559493c027599df251699a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecfce0b850ae17455c559493c027599df251699a"}], "stats": {"total": 42, "additions": 35, "deletions": 7}, "files": [{"sha": "951467b6c138e2477b96595ad3343942d04c61f7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=da5182be67bc33df9c1159856ccddeb159dc5a24", "patch": "@@ -1,3 +1,7 @@\n+2012-09-18 Thomas Quinot  <quinot@adacore.com>       \n+\n+\t* doc/invoke.texi: Document -fada-spec-parent.\n+\n 2012-09-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/54610"}, {"sha": "fd2bab9ef0c9fc2999daaaa699429ad9116c1275", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=da5182be67bc33df9c1159856ccddeb159dc5a24", "patch": "@@ -1,3 +1,9 @@\n+2012-09-18 Thomas Quinot  <quinot@adacore.com>\n+\n+\t* c.opt (-fada-spec-parent): Define new command line switch.\n+\t* c-ada-spec.c (get_ada_package): When -fada-spec-parent\n+\tis specified, generate binding spec as a child of the specified unit.\n+\n 2012-09-13  Paolo Carlini  <paolo.carlini@oracle.com>\n \t    Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n "}, {"sha": "435b0c99d7de91d5e1f58992aeb150d86469e20b", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 20, "deletions": 6, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=da5182be67bc33df9c1159856ccddeb159dc5a24", "patch": "@@ -817,15 +817,26 @@ get_ada_package (const char *file)\n   char *res;\n   const char *s;\n   int i;\n+  size_t plen;\n \n   s = strstr (file, \"/include/\");\n   if (s)\n     base = s + 9;\n   else\n     base = lbasename (file);\n-  res = XNEWVEC (char, strlen (base) + 1);\n \n-  for (i = 0; *base; base++, i++)\n+  if (ada_specs_parent == NULL)\n+    plen = 0;\n+  else\n+    plen = strlen (ada_specs_parent) + 1;\n+\n+  res = XNEWVEC (char, plen + strlen (base) + 1);\n+  if (ada_specs_parent != NULL) {\n+    strcpy (res, ada_specs_parent);\n+    res[plen - 1] = '.';\n+  }\n+\n+  for (i = plen; *base; base++, i++)\n     switch (*base)\n       {\n \tcase '+':\n@@ -837,14 +848,14 @@ get_ada_package (const char *file)\n \tcase '_':\n \tcase '/':\n \tcase '\\\\':\n-\t  res [i] = (i == 0 || res [i - 1] == '_') ? 'u' : '_';\n+\t  res[i] = (i == 0 || res[i - 1] == '.' || res[i - 1] == '_') ? 'u' : '_';\n \t  break;\n \n \tdefault:\n-\t  res [i] = *base;\n+\t  res[i] = *base;\n \t  break;\n       }\n-  res [i] = '\\0';\n+  res[i] = '\\0';\n \n   return res;\n }\n@@ -3250,7 +3261,10 @@ dump_ads (const char *source_file,\n   ads_name = xstrdup (pkg_name);\n \n   for (s = ads_name; *s; s++)\n-    *s = TOLOWER (*s);\n+    if (*s == '.')\n+      *s = '-';\n+    else\n+      *s = TOLOWER (*s);\n \n   ads_name = reconcat (ads_name, ads_name, \".ads\", NULL);\n "}, {"sha": "6aa53a577441bfc12add314b3c17ab7a5dc1c5f0", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=da5182be67bc33df9c1159856ccddeb159dc5a24", "patch": "@@ -729,6 +729,10 @@ faccess-control\n C++ ObjC++ Var(flag_access_control) Init(1)\n Enforce class member access control semantics\n \n+fada-spec-parent=\n+C ObjC C++ ObjC++ RejectNegative Joined Var(ada_specs_parent)\n+-fada-spec-parent=unit  Dump Ada specs as child units of given parent\n+\n fall-virtual\n C++ ObjC++ Ignore Warn(switch %qs is no longer supported)\n "}, {"sha": "748e7923243239e495c7d201c57c8dea9d3b926d", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5182be67bc33df9c1159856ccddeb159dc5a24/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=da5182be67bc33df9c1159856ccddeb159dc5a24", "patch": "@@ -166,7 +166,7 @@ in the following sections.\n -pipe  -pass-exit-codes  @gol\n -x @var{language}  -v  -###  --help@r{[}=@var{class}@r{[},@dots{}@r{]]}  --target-help  @gol\n --version -wrapper @@@var{file} -fplugin=@var{file} -fplugin-arg-@var{name}=@var{arg}  @gol\n--fdump-ada-spec@r{[}-slim@r{]} -fdump-go-spec=@var{file}}\n+-fdump-ada-spec@r{[}-slim@r{]} -fada-spec-parent=@var{arg} -fdump-go-spec=@var{file}}\n \n @item C Language Options\n @xref{C Dialect Options,,Options Controlling C Dialect}."}]}