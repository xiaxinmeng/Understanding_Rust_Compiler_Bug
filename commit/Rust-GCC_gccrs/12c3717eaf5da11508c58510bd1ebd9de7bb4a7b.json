{"sha": "12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTJjMzcxN2VhZjVkYTExNTA4YzU4NTEwYmQxZWJkOWRlN2JiNGE3Yg==", "commit": {"author": {"name": "David Billinghurst", "email": "David.Billinghurst@riotinto.com", "date": "2002-03-24T23:41:22Z"}, "committer": {"name": "David Billinghurst", "email": "billingd@gcc.gnu.org", "date": "2002-03-24T23:41:22Z"}, "message": "g++.exp: Fix handling of LD_LIBRARY_PATH et al\n\n2002-03-25  David Billinghurst  <David.Billinghurst@riotinto.com>\n\n\t* lib/g++.exp:  Fix handling of LD_LIBRARY_PATH et al\n\t* lib/g77.exp:  Likewise\n\t* lib/objc.exp: Likewise\n\nFrom-SVN: r51279", "tree": {"sha": "e0eea5a7e7f99d181fed000c044ddfe21bf10312", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e0eea5a7e7f99d181fed000c044ddfe21bf10312"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/comments", "author": null, "committer": null, "parents": [{"sha": "e1a0d743f10eddf7f2fc988e49d453f8776bdf12", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1a0d743f10eddf7f2fc988e49d453f8776bdf12", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1a0d743f10eddf7f2fc988e49d453f8776bdf12"}], "stats": {"total": 90, "additions": 42, "deletions": 48}, "files": [{"sha": "8ee75ef5b1f8aadd6bfceb3d7a79aace300363b0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "patch": "@@ -1,3 +1,9 @@\n+2002-03-25  David Billinghurst  <David.Billinghurst@riotinto.com>\n+\n+\t* lib/g++.exp:  Fix handling of LD_LIBRARY_PATH et al\n+\t* lib/g77.exp:  Likewise\n+\t* lib/objc.exp: Likewise\n+\n 2002-03-23  Andrew Cagney  <ac131313@redhat.com>\n \n \t* gcc.dg/Wswitch-default.c: New test."}, {"sha": "a9a49e4e619ccfa33342c4f49c55bf0f44f4801f", "filename": "gcc/testsuite/lib/g++.exp", "status": "modified", "additions": 12, "deletions": 17, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fg%2B%2B.exp?ref=12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "patch": "@@ -159,6 +159,18 @@ proc g++_link_flags { paths } {\n           append flags \"-L${librx} \";\n       }\n     }\n+\n+    # On IRIX 6, we have to set variables akin to LD_LIBRARY_PATH, but\n+    # called LD_LIBRARYN32_PATH (for the N32 ABI) and LD_LIBRARY64_PATH\n+    # (for the 64-bit ABI).  The right way to do this would be to modify\n+    # unix.exp -- but that's not an option since it's part of DejaGNU\n+    # proper, so we do it here.  We really only need to do \n+    # this on IRIX, but it shouldn't hurt to do it anywhere else.\n+    setenv  LD_LIBRARY_PATH     $ld_library_path\n+    setenv  SHLIB_PATH          $ld_library_path\n+    setenv  LD_LIBRARYN32_PATH  $ld_library_path\n+    setenv  LD_LIBRARY64_PATH   $ld_library_path\n+\n     return \"$flags\"\n }\n \n@@ -278,23 +290,6 @@ proc g++_target_compile { source dest type options } {\n     return [target_compile $source $dest $type $options]\n }\n \n-#\n-# g++_set_ld_library_path --\n-# On IRIX 6, we have to set variables akin to LD_LIBRARY_PATH, but\n-# called LD_LIBRARYN32_PATH (for the N32 ABI) and LD_LIBRARY64_PATH\n-# (for the 64-bit ABI).  The right way to do this would be to modify\n-# unix.exp -- but that's not an option since it's part of DejaGNU\n-# proper, so we do it here, by trickery.  We really only need to do \n-# this on IRIX, but it shouldn't hurt to do it anywhere else.\n-#\n-\n-proc ${tool}_set_ld_library_path { name element op } {\n-  setenv LD_LIBRARYN32_PATH [getenv LD_LIBRARY_PATH]\n-  setenv LD_LIBRARY64_PATH [getenv LD_LIBRARY_PATH]\n-}\n-\n-trace variable env(LD_LIBRARY_PATH) w ${tool}_set_ld_library_path\n-\n #\n # ${tool}_option_help\n #"}, {"sha": "8ad51e9b56b15499a396f4527e9ec52b6c93950b", "filename": "gcc/testsuite/lib/g77.exp", "status": "modified", "additions": 12, "deletions": 17, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2Flib%2Fg77.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2Flib%2Fg77.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fg77.exp?ref=12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "patch": "@@ -94,6 +94,18 @@ proc g77_link_flags { paths } {\n       }\n       append ld_library_path \":${rootme}\"\n     }\n+\n+    # On IRIX 6, we have to set variables akin to LD_LIBRARY_PATH, but\n+    # called LD_LIBRARYN32_PATH (for the N32 ABI) and LD_LIBRARY64_PATH\n+    # (for the 64-bit ABI).  The right way to do this would be to modify\n+    # unix.exp -- but that's not an option since it's part of DejaGNU\n+    # proper, so we do it here.  We really only need to do \n+    # this on IRIX, but it shouldn't hurt to do it anywhere else.\n+    setenv  LD_LIBRARY_PATH     $ld_library_path\n+    setenv  SHLIB_PATH          $ld_library_path\n+    setenv  LD_LIBRARYN32_PATH  $ld_library_path\n+    setenv  LD_LIBRARY64_PATH   $ld_library_path\n+\n     return \"$flags\"\n }\n \n@@ -191,20 +203,3 @@ proc g77_target_compile { source dest type options } {\n \n     return [target_compile $source $dest $type $options]\n }\n-\n-#\n-# g77_set_ld_library_path --\n-# On IRIX 6, we have to set variables akin to LD_LIBRARY_PATH, but\n-# called LD_LIBRARYN32_PATH (for the N32 ABI) and LD_LIBRARY64_PATH\n-# (for the 64-bit ABI).  The right way to do this would be to modify\n-# unix.exp -- but that's not an option since it's part of DejaGNU\n-# proper, so we do it here, by trickery.  We really only need to do \n-# this on IRIX, but it shouldn't hurt to do it anywhere else.\n-#\n-\n-proc ${tool}_set_ld_library_path { name element op } {\n-  setenv LD_LIBRARYN32_PATH [getenv LD_LIBRARY_PATH]\n-  setenv LD_LIBRARY64_PATH [getenv LD_LIBRARY_PATH]\n-}\n-\n-trace variable env(LD_LIBRARY_PATH) w ${tool}_set_ld_library_path"}, {"sha": "d82442c4382f9dbc89d93814203d6726ef25d871", "filename": "gcc/testsuite/lib/objc.exp", "status": "modified", "additions": 12, "deletions": 14, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2Flib%2Fobjc.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12c3717eaf5da11508c58510bd1ebd9de7bb4a7b/gcc%2Ftestsuite%2Flib%2Fobjc.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fobjc.exp?ref=12c3717eaf5da11508c58510bd1ebd9de7bb4a7b", "patch": "@@ -157,6 +157,18 @@ proc objc_target_compile { source dest type options } {\n \tappend ld_library_path \":${libobjc_dir}\"\n     }\n     lappend options \"compiler=$OBJC_UNDER_TEST\"\n+\n+    # On IRIX 6, we have to set variables akin to LD_LIBRARY_PATH, but\n+    # called LD_LIBRARYN32_PATH (for the N32 ABI) and LD_LIBRARY64_PATH\n+    # (for the 64-bit ABI).  The right way to do this would be to modify\n+    # unix.exp -- but that's not an option since it's part of DejaGNU\n+    # proper, so we do it here.  We really only need to do \n+    # this on IRIX, but it shouldn't hurt to do it anywhere else.\n+    setenv  LD_LIBRARY_PATH     $ld_library_path\n+    setenv  SHLIB_PATH          $ld_library_path\n+    setenv  LD_LIBRARYN32_PATH  $ld_library_path\n+    setenv  LD_LIBRARY64_PATH   $ld_library_path\n+\n     return [target_compile $source $dest $type $options]\n }\n \n@@ -241,20 +253,6 @@ if { [info procs prune_warnings] == \"\" } then {\n     }\n }\n \n-# On IRIX 6, we have to set variables akin to LD_LIBRARY_PATH, but\n-# called LD_LIBRARYN32_PATH (for the N32 ABI) and LD_LIBRARY64_PATH\n-# (for the 64-bit ABI).  The right way to do this would be to modify\n-# unix.exp -- but that's not an option since it's part of DejaGNU\n-# proper, so we do it here, by trickery.  We really only need to do \n-# this on IRIX, but it shouldn't hurt to do it anywhere else.\n-\n-proc ${tool}_set_ld_library_path { name element op } {\n-  setenv LD_LIBRARYN32_PATH [getenv LD_LIBRARY_PATH]\n-  setenv LD_LIBRARY64_PATH [getenv LD_LIBRARY_PATH]\n-}\n-\n-trace variable env(LD_LIBRARY_PATH) w ${tool}_set_ld_library_path\n-\n # Utility used by mike-gcc.exp and c-torture.exp.\n # Check the compiler(/assembler/linker) output for text indicating that\n # the testcase should be marked as \"unsupported\"."}]}