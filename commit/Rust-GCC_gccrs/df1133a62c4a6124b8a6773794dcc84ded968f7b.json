{"sha": "df1133a62c4a6124b8a6773794dcc84ded968f7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGYxMTMzYTYyYzRhNjEyNGI4YTY3NzM3OTRkY2M4NGRlZDk2OGY3Yg==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2007-01-08T22:24:13Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2007-01-08T22:24:13Z"}, "message": "genautomata.c (STATS_OPTION): New option.\n\n\t* genautomata.c (STATS_OPTION): New option.\n\t(stats_flag): New flag.\n\t(gen_automata_option): Handle it.\n\t(initiate_automaton_gen): Ditto.\n\t(write_automata): Output statistics only if stats_flag is\n\tset. Likewise, output time statistics only if time_flag is set.\n\t* doc/md.texi (Processor pipeline description): Document new flag.\n\nFrom-SVN: r120594", "tree": {"sha": "b9d157b7247629d146a3456b564d863cbfc5c01e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9d157b7247629d146a3456b564d863cbfc5c01e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/df1133a62c4a6124b8a6773794dcc84ded968f7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df1133a62c4a6124b8a6773794dcc84ded968f7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df1133a62c4a6124b8a6773794dcc84ded968f7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df1133a62c4a6124b8a6773794dcc84ded968f7b/comments", "author": null, "committer": null, "parents": [{"sha": "2b60792f2b31e4b305033502a6717a76308dff50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b60792f2b31e4b305033502a6717a76308dff50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b60792f2b31e4b305033502a6717a76308dff50"}], "stats": {"total": 40, "additions": 30, "deletions": 10}, "files": [{"sha": "9157e1418e1527a00b809547ffa068744f9f2fe4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df1133a62c4a6124b8a6773794dcc84ded968f7b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df1133a62c4a6124b8a6773794dcc84ded968f7b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=df1133a62c4a6124b8a6773794dcc84ded968f7b", "patch": "@@ -1,3 +1,13 @@\n+2007-01-09  Ben Elliston  <bje@au.ibm.com>\n+\n+\t* genautomata.c (STATS_OPTION): New option.\n+\t(stats_flag): New flag.\n+\t(gen_automata_option): Handle it.\n+\t(initiate_automaton_gen): Ditto.\n+\t(write_automata): Output statistics only if stats_flag is\n+\tset. Likewise, output time statistics only if time_flag is set.\n+\t* doc/md.texi (Processor pipeline description): Document new flag.\n+\n 2007-01-08  Richard Guenther  <rguenther@suse.de>\n \n \t* builtins.c (fold_builtin_int_roundingfn): Use fit_double_type."}, {"sha": "c209fde5dd2be554caaf5004790b1af8f120f3b7", "filename": "gcc/doc/md.texi", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df1133a62c4a6124b8a6773794dcc84ded968f7b/gcc%2Fdoc%2Fmd.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df1133a62c4a6124b8a6773794dcc84ded968f7b/gcc%2Fdoc%2Fmd.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fmd.texi?ref=df1133a62c4a6124b8a6773794dcc84ded968f7b", "patch": "@@ -7250,8 +7250,12 @@ only worth to do when we are debugging the description and need to\n look more accurately at reservations of states.\n \n @item\n-@dfn{time} means printing additional time statistics about\n-generation of automata.\n+@dfn{time} means printing time statistics about the generation of\n+automata.\n+\n+@item\n+@dfn{stats} means printing statistics about the generated automata\n+such as the number of DFA states, NDFA states and arcs.\n \n @item\n @dfn{v} means a generation of the file describing the result automata."}, {"sha": "e63df33e952921b68ef220dd182bab3251ebb873", "filename": "gcc/genautomata.c", "status": "modified", "additions": 14, "deletions": 8, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/df1133a62c4a6124b8a6773794dcc84ded968f7b/gcc%2Fgenautomata.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/df1133a62c4a6124b8a6773794dcc84ded968f7b/gcc%2Fgenautomata.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgenautomata.c?ref=df1133a62c4a6124b8a6773794dcc84ded968f7b", "patch": "@@ -1,5 +1,5 @@\n /* Pipeline hazard description translator.\n-   Copyright (C) 2000, 2001, 2002, 2003, 2004, 2005\n+   Copyright (C) 2000, 2001, 2002, 2003, 2004, 2005, 2007\n    Free Software Foundation, Inc.\n \n    Written by Vladimir Makarov <vmakarov@redhat.com>\n@@ -238,15 +238,11 @@ static arc_t next_out_arc              (arc_t);\n    macros.  */\n \n #define NO_MINIMIZATION_OPTION \"-no-minimization\"\n-\n #define TIME_OPTION \"-time\"\n-\n+#define STATS_OPTION \"-stats\"\n #define V_OPTION \"-v\"\n-\n #define W_OPTION \"-w\"\n-\n #define NDFA_OPTION \"-ndfa\"\n-\n #define PROGRESS_OPTION \"-progress\"\n \n /* The following flags are set up by function `initiate_automaton_gen'.  */\n@@ -267,6 +263,9 @@ static int split_argument;\n /* Flag of output time statistics (`-time').  */\n static int time_flag;\n \n+/* Flag of automata statistics (`-stats').  */\n+static int stats_flag;\n+\n /* Flag of creation of description file which contains description of\n    result automaton and statistics information (`-v').  */\n static int v_flag;\n@@ -1511,6 +1510,8 @@ gen_automata_option (rtx def)\n     no_minimization_flag = 1;\n   else if (strcmp (XSTR (def, 0), TIME_OPTION + 1) == 0)\n     time_flag = 1;\n+  else if (strcmp (XSTR (def, 0), STATS_OPTION + 1) == 0)\n+    stats_flag = 1;\n   else if (strcmp (XSTR (def, 0), V_OPTION + 1) == 0)\n     v_flag = 1;\n   else if (strcmp (XSTR (def, 0), W_OPTION + 1) == 0)\n@@ -8937,6 +8938,7 @@ initiate_automaton_gen (int argc, char **argv)\n   split_argument = 0;  /* default value */\n   no_minimization_flag = 0;\n   time_flag = 0;\n+  stats_flag = 0;\n   v_flag = 0;\n   w_flag = 0;\n   progress_flag = 0;\n@@ -8945,6 +8947,8 @@ initiate_automaton_gen (int argc, char **argv)\n       no_minimization_flag = 1;\n     else if (strcmp (argv [i], TIME_OPTION) == 0)\n       time_flag = 1;\n+    else if (strcmp (argv [i], STATS_OPTION) == 0)\n+      stats_flag = 1;\n     else if (strcmp (argv [i], V_OPTION) == 0)\n       v_flag = 1;\n     else if (strcmp (argv [i], W_OPTION) == 0)\n@@ -9206,9 +9210,11 @@ write_automata (void)\n \tfprintf (stderr, \"done\\n\");\n       output_statistics (output_description_file);\n     }\n-  output_statistics (stderr);\n+  if (stats_flag)\n+    output_statistics (stderr);\n   ticker_off (&output_time);\n-  output_time_statistics (stderr);\n+  if (time_flag)\n+    output_time_statistics (stderr);\n   finish_states ();\n   finish_arcs ();\n   finish_automata_lists ();"}]}