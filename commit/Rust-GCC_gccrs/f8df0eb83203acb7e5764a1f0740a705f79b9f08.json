{"sha": "f8df0eb83203acb7e5764a1f0740a705f79b9f08", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjhkZjBlYjgzMjAzYWNiN2U1NzY0YTFmMDc0MGE3MDVmNzliOWYwOA==", "commit": {"author": {"name": "Daniel Franke", "email": "franke.daniel@gmail.com", "date": "2008-12-31T14:21:44Z"}, "committer": {"name": "Daniel Franke", "email": "dfranke@gcc.gnu.org", "date": "2008-12-31T14:21:44Z"}, "message": "check.c (dim_rank_check): Fixed checking of dimension argument if array is of type EXPR_ARRAY.\n\ngcc/fortran:\n2008-12-31  Daniel Franke  <franke.daniel@gmail.com>\n\n        * check.c (dim_rank_check): Fixed checking of dimension argument\n        if array is of type EXPR_ARRAY.\n\ngcc/testsuite:\n2008-12-31  Daniel Franke  <franke.daniel@gmail.com>\n\n\t* gfortran.dg/mapping_2.f90: Fixed testcase.\n\nFrom-SVN: r142981", "tree": {"sha": "dac0747bf56162cc838ebc8dcc2c2e6c44dfd842", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dac0747bf56162cc838ebc8dcc2c2e6c44dfd842"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f8df0eb83203acb7e5764a1f0740a705f79b9f08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8df0eb83203acb7e5764a1f0740a705f79b9f08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8df0eb83203acb7e5764a1f0740a705f79b9f08", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8df0eb83203acb7e5764a1f0740a705f79b9f08/comments", "author": {"login": "dfranke76", "id": 15729164, "node_id": "MDQ6VXNlcjE1NzI5MTY0", "avatar_url": "https://avatars.githubusercontent.com/u/15729164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dfranke76", "html_url": "https://github.com/dfranke76", "followers_url": "https://api.github.com/users/dfranke76/followers", "following_url": "https://api.github.com/users/dfranke76/following{/other_user}", "gists_url": "https://api.github.com/users/dfranke76/gists{/gist_id}", "starred_url": "https://api.github.com/users/dfranke76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dfranke76/subscriptions", "organizations_url": "https://api.github.com/users/dfranke76/orgs", "repos_url": "https://api.github.com/users/dfranke76/repos", "events_url": "https://api.github.com/users/dfranke76/events{/privacy}", "received_events_url": "https://api.github.com/users/dfranke76/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "261b8381fef69be03bb6b5bbc5a9cd37cf94e1ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/261b8381fef69be03bb6b5bbc5a9cd37cf94e1ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/261b8381fef69be03bb6b5bbc5a9cd37cf94e1ef"}], "stats": {"total": 30, "additions": 22, "deletions": 8}, "files": [{"sha": "d1135b35dfc08eec965049c3dd1babbca95299fe", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f8df0eb83203acb7e5764a1f0740a705f79b9f08", "patch": "@@ -1,3 +1,8 @@\n+2008-12-31  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\t* check.c (dim_rank_check): Fixed checking of dimension argument\n+\tif array is of type EXPR_ARRAY.\n+\n 2008-12-22  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/38602"}, {"sha": "228ccb2ef0f72fbfeabd3899f59a4ca9a98b48d9", "filename": "gcc/fortran/check.c", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ffortran%2Fcheck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ffortran%2Fcheck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fcheck.c?ref=f8df0eb83203acb7e5764a1f0740a705f79b9f08", "patch": "@@ -339,16 +339,21 @@ dim_rank_check (gfc_expr *dim, gfc_expr *array, int allow_assumed)\n   gfc_array_ref *ar;\n   int rank;\n \n-  if (dim->expr_type != EXPR_CONSTANT || array->expr_type != EXPR_VARIABLE)\n+  if (dim->expr_type != EXPR_CONSTANT\n+      || (array->expr_type != EXPR_VARIABLE\n+\t  && array->expr_type != EXPR_ARRAY))\n     return SUCCESS;\n \n-  ar = gfc_find_array_ref (array);\n   rank = array->rank;\n-  if (ar->as->type == AS_ASSUMED_SIZE\n-      && !allow_assumed\n-      && ar->type != AR_ELEMENT\n-      && ar->type != AR_SECTION)\n-    rank--;\n+  if (array->expr_type == EXPR_VARIABLE)\n+    {\n+      ar = gfc_find_array_ref (array);\n+      if (ar->as->type == AS_ASSUMED_SIZE\n+\t  && !allow_assumed\n+\t  && ar->type != AR_ELEMENT\n+\t  && ar->type != AR_SECTION)\n+\trank--;\n+    }\n \n   if (mpz_cmp_ui (dim->value.integer, 1) < 0\n       || mpz_cmp_ui (dim->value.integer, rank) > 0)"}, {"sha": "a5600c256139c059752896e0b9208d33e12509cd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f8df0eb83203acb7e5764a1f0740a705f79b9f08", "patch": "@@ -1,3 +1,7 @@\n+2008-12-31  Daniel Franke  <franke.daniel@gmail.com>\n+\n+\t* gfortran.dg/mapping_2.f90: Fixed testcase.\n+\t\n 2008-12-31  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/38647"}, {"sha": "9104184a59bb4df07b1cd4a0ab57d86b9a12f30d", "filename": "gcc/testsuite/gfortran.dg/mapping_2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ftestsuite%2Fgfortran.dg%2Fmapping_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8df0eb83203acb7e5764a1f0740a705f79b9f08/gcc%2Ftestsuite%2Fgfortran.dg%2Fmapping_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fmapping_2.f90?ref=f8df0eb83203acb7e5764a1f0740a705f79b9f08", "patch": "@@ -11,7 +11,7 @@ module test\n       function my_string(x)\n          integer i\n          real, intent(in) :: x(:)\n-         character(0) h4(1:minval([(i,i=30,32)],15))\n+         character(0) h4(1:minval([(i,i=30,32), 15]))\n          character(0) sv1(size(x,1):size(h4))\n          character(0) sv2(2*lbound(sv1,1):size(h4))\n          character(lbound(sv2,1)-3) my_string"}]}