{"sha": "6545ef83c162894776c23e0a9811d6cadc1bff66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjU0NWVmODNjMTYyODk0Nzc2YzIzZTBhOTgxMWQ2Y2FkYzFiZmY2Ng==", "commit": {"author": {"name": "Thomas Koenig", "email": "Thomas.Koenig@online.de", "date": "2006-05-28T20:25:15Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2006-05-28T20:25:15Z"}, "message": "string_intrinsics.c (compare_string): Use memcmp instead of strncmp to avoid tripping over CHAR(0) in a string.\n\n2006-05-28  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\t* intrinsics/string_intrinsics.c (compare_string):\n\tUse memcmp instead of strncmp to avoid tripping over\n\tCHAR(0) in a string.\n\n2006-05-28  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\t* gfortran.dg/string_null_compare_1.f:  New test case.\n\nFrom-SVN: r114175", "tree": {"sha": "d10973bffbe6cff83f2b74ebd3c5762ac2392da0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d10973bffbe6cff83f2b74ebd3c5762ac2392da0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6545ef83c162894776c23e0a9811d6cadc1bff66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6545ef83c162894776c23e0a9811d6cadc1bff66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6545ef83c162894776c23e0a9811d6cadc1bff66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6545ef83c162894776c23e0a9811d6cadc1bff66/comments", "author": null, "committer": null, "parents": [{"sha": "375277f69d4536e142609d553df186586ee4ac8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/375277f69d4536e142609d553df186586ee4ac8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/375277f69d4536e142609d553df186586ee4ac8a"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "96c5729e534148ab38dc1986a673496faf9df675", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6545ef83c162894776c23e0a9811d6cadc1bff66/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6545ef83c162894776c23e0a9811d6cadc1bff66/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6545ef83c162894776c23e0a9811d6cadc1bff66", "patch": "@@ -1,3 +1,9 @@\n+2006-05-28  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\t* intrinsics/string_intrinsics.c (compare_string):\n+\tUse memcmp instead of strncmp to avoid tripping over\n+\tCHAR(0) in a string.\n+\n 2006-05-27  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/27773"}, {"sha": "2e6eb1b2b88feb3ceba042b95f376fda3d7b30e1", "filename": "gcc/testsuite/gfortran.dg/string_null_compare_1.f", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6545ef83c162894776c23e0a9811d6cadc1bff66/gcc%2Ftestsuite%2Fgfortran.dg%2Fstring_null_compare_1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6545ef83c162894776c23e0a9811d6cadc1bff66/gcc%2Ftestsuite%2Fgfortran.dg%2Fstring_null_compare_1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fstring_null_compare_1.f?ref=6545ef83c162894776c23e0a9811d6cadc1bff66", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do run }\n+! PR 27784 - Different strings should compare unequal even if they\n+!            have CHAR(0) in them.\n+\n+      program main\n+      character*3 str1, str2\n+      call setval(str1, str2)\n+      if (str1 == str2) call abort\n+      end\n+\n+      subroutine setval(str1, str2)\n+      character*3 str1, str2\n+      str1 = 'a' // CHAR(0) // 'a'\n+      str2 = 'a' // CHAR(0) // 'c'\n+      end"}, {"sha": "50ebaf230c06b4400adc82fc8f80d4a97769395e", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6545ef83c162894776c23e0a9811d6cadc1bff66/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6545ef83c162894776c23e0a9811d6cadc1bff66/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=6545ef83c162894776c23e0a9811d6cadc1bff66", "patch": "@@ -1,3 +1,9 @@\n+2006-05-28  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\t* intrinsics/string_intrinsics.c (compare_string):\n+\tUse memcmp instead of strncmp to avoid tripping over\n+\tCHAR(0) in a string.\n+\n 2006-05-27  Janne Blomqvist  <jb@gcc.gnu.org>\n \n \t* io/io.h (find_or_create_unit): Correct export declaration."}, {"sha": "1bc4ff2201229315b39a6cbaf237ca73d1e55488", "filename": "libgfortran/intrinsics/string_intrinsics.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6545ef83c162894776c23e0a9811d6cadc1bff66/libgfortran%2Fintrinsics%2Fstring_intrinsics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6545ef83c162894776c23e0a9811d6cadc1bff66/libgfortran%2Fintrinsics%2Fstring_intrinsics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Fstring_intrinsics.c?ref=6545ef83c162894776c23e0a9811d6cadc1bff66", "patch": "@@ -109,7 +109,7 @@ compare_string (GFC_INTEGER_4 len1, const char * s1,\n   const char *s;\n   int len;\n \n-  res = strncmp (s1, s2, (len1 < len2) ? len1 : len2);\n+  res = memcmp (s1, s2, (len1 < len2) ? len1 : len2);\n   if (res != 0)\n     return res;\n "}]}