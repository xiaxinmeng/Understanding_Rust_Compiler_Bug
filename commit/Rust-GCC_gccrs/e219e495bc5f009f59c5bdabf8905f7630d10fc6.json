{"sha": "e219e495bc5f009f59c5bdabf8905f7630d10fc6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTIxOWU0OTViYzVmMDA5ZjU5YzViZGFiZjg5MDVmNzYzMGQxMGZjNg==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2015-11-05T09:46:10Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-11-05T09:46:10Z"}, "message": "targhooks.c (default_get_mask_mode): Use BLKmode in case target doesn't support required vector mode.\n\ngcc/\n\n2015-10-29  Ilya Enkovich  <enkovich.gnu@gmail.com>\n\n\t* targhooks.c (default_get_mask_mode): Use BLKmode in\n\tcase target doesn't support required vector mode.\n\t* stor-layout.c (layout_type); Check for BLKmode.\n\nFrom-SVN: r229794", "tree": {"sha": "5c64d4d4e5bf6e0a1b34ef887efc1b7dec23697e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c64d4d4e5bf6e0a1b34ef887efc1b7dec23697e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e219e495bc5f009f59c5bdabf8905f7630d10fc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e219e495bc5f009f59c5bdabf8905f7630d10fc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e219e495bc5f009f59c5bdabf8905f7630d10fc6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e219e495bc5f009f59c5bdabf8905f7630d10fc6/comments", "author": null, "committer": null, "parents": [{"sha": "175a31e4914dc8814c08f8961daf0d419e2f0cb7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/175a31e4914dc8814c08f8961daf0d419e2f0cb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/175a31e4914dc8814c08f8961daf0d419e2f0cb7"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "2e58c51ad70f7fad023864e1988ec11cdfb2d425", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e219e495bc5f009f59c5bdabf8905f7630d10fc6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e219e495bc5f009f59c5bdabf8905f7630d10fc6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e219e495bc5f009f59c5bdabf8905f7630d10fc6", "patch": "@@ -1,3 +1,9 @@\n+2015-11-05  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\t* targhooks.c (default_get_mask_mode): Use BLKmode in\n+\tcase target doesn't support required vector mode.\n+\t* stor-layout.c (layout_type); Check for BLKmode.\n+\n 2015-11-04  Aditya Kumar  <aditya.k7@samsung.com>\n \t    Sebastian Pop  <s.pop@samsung.com>\n "}, {"sha": "364a0b5454bded3cd665292fc6437a585e735f5e", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e219e495bc5f009f59c5bdabf8905f7630d10fc6/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e219e495bc5f009f59c5bdabf8905f7630d10fc6/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=e219e495bc5f009f59c5bdabf8905f7630d10fc6", "patch": "@@ -2174,7 +2174,8 @@ layout_type (tree type)\n \tTYPE_SATURATING (type) = TYPE_SATURATING (TREE_TYPE (type));\n         TYPE_UNSIGNED (type) = TYPE_UNSIGNED (TREE_TYPE (type));\n \t/* Several boolean vector elements may fit in a single unit.  */\n-\tif (VECTOR_BOOLEAN_TYPE_P (type))\n+\tif (VECTOR_BOOLEAN_TYPE_P (type)\n+\t    && type->type_common.mode != BLKmode)\n \t  TYPE_SIZE_UNIT (type)\n \t    = size_int (GET_MODE_SIZE (type->type_common.mode));\n \telse"}, {"sha": "14324b7addc0ec5e35209952ae0ee4db57a25e2d", "filename": "gcc/targhooks.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e219e495bc5f009f59c5bdabf8905f7630d10fc6/gcc%2Ftarghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e219e495bc5f009f59c5bdabf8905f7630d10fc6/gcc%2Ftarghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftarghooks.c?ref=e219e495bc5f009f59c5bdabf8905f7630d10fc6", "patch": "@@ -1087,10 +1087,16 @@ default_get_mask_mode (unsigned nunits, unsigned vector_size)\n   unsigned elem_size = vector_size / nunits;\n   machine_mode elem_mode\n     = smallest_mode_for_size (elem_size * BITS_PER_UNIT, MODE_INT);\n+  machine_mode vector_mode;\n \n   gcc_assert (elem_size * nunits == vector_size);\n \n-  return mode_for_vector (elem_mode, nunits);\n+  vector_mode = mode_for_vector (elem_mode, nunits);\n+  if (VECTOR_MODE_P (vector_mode)\n+      && !targetm.vector_mode_supported_p (vector_mode))\n+    vector_mode = BLKmode;\n+\n+  return vector_mode;\n }\n \n /* By default, the cost model accumulates three separate costs (prologue,"}]}