{"sha": "9c874875a167bb023af5dd5b0f018757a65afb11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM4NzQ4NzVhMTY3YmIwMjNhZjVkZDViMGYwMTg3NTdhNjVhZmIxMQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-01-16T00:27:05Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-01-16T00:27:05Z"}, "message": "re PR java/5365 (gcjh -stubs does not include correct files)\n\n\tFix for PR java/5365:\n\t* gjavah.c (process_file): Turn class name into a file name.\n\nFrom-SVN: r48891", "tree": {"sha": "473b006b7a1aa177d93c3aac443c2e435d8e3455", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/473b006b7a1aa177d93c3aac443c2e435d8e3455"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c874875a167bb023af5dd5b0f018757a65afb11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c874875a167bb023af5dd5b0f018757a65afb11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c874875a167bb023af5dd5b0f018757a65afb11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c874875a167bb023af5dd5b0f018757a65afb11/comments", "author": null, "committer": null, "parents": [{"sha": "acfab996f3ad303f4d5e9c01dd5e31dda216f3d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acfab996f3ad303f4d5e9c01dd5e31dda216f3d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acfab996f3ad303f4d5e9c01dd5e31dda216f3d7"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "f0a4eee9b0340bc66d035700df79b6f61cdc80d7", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c874875a167bb023af5dd5b0f018757a65afb11/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c874875a167bb023af5dd5b0f018757a65afb11/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=9c874875a167bb023af5dd5b0f018757a65afb11", "patch": "@@ -1,3 +1,8 @@\n+2002-01-15  Tom Tromey  <tromey@redhat.com>\n+\n+\tFix for PR java/5365:\n+\t* gjavah.c (process_file): Turn class name into a file name.\n+\n 2002-01-14  Matthias Klose  <doko@debian.org>\n \n \t* gcj.texi: Fix whitespace and formatting errors in the"}, {"sha": "d5de1ebd426d933fb27dd5b5514c3cb854c6f0f8", "filename": "gcc/java/gjavah.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c874875a167bb023af5dd5b0f018757a65afb11/gcc%2Fjava%2Fgjavah.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c874875a167bb023af5dd5b0f018757a65afb11/gcc%2Fjava%2Fgjavah.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fgjavah.c?ref=9c874875a167bb023af5dd5b0f018757a65afb11", "patch": "@@ -1,7 +1,7 @@\n /* Program to write C++-suitable header files from a Java(TM) .class\n    file.  This is similar to SUN's javah.\n \n-Copyright (C) 1996, 1998, 1999, 2000, 2001 Free Software Foundation, Inc.\n+Copyright (C) 1996, 1998, 1999, 2000, 2001, 2002 Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify\n it under the terms of the GNU General Public License as published by\n@@ -1969,10 +1969,18 @@ DEFUN(process_file, (jcf, out),\n \t{\n \t  /* Strip off the \".class\" portion of the name when printing\n \t     the include file name.  */\n-\t  int len = strlen (jcf->classname);\n+\t  char *name;\n+\t  int i, len = strlen (jcf->classname);\n \t  if (len > 6 && ! strcmp (&jcf->classname[len - 6], \".class\"))\n \t    len -= 6;\n-\t  print_include (out, jcf->classname, len);\n+\t  /* Turn the class name into a file name.  */\n+\t  name = xmalloc (len + 1);\n+\t  for (i = 0; i < len; ++i)\n+\t    name[i] = jcf->classname[i] == '.' ? '/' : jcf->classname[i];\n+\t  name[i] = '\\0';\n+\t  print_include (out, name, len);\n+\t  free (name);\n+\n \t  if (! flag_jni)\n \t    print_include (out, \"gcj/cni\", -1);\n \t}"}]}