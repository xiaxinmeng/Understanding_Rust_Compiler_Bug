{"sha": "68dd57808f7c0147acdb5ca72c88ff655afcb0ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjhkZDU3ODA4ZjdjMDE0N2FjZGI1Y2E3MmM4OGZmNjU1YWZjYjBjZQ==", "commit": {"author": {"name": "Carl Love", "email": "carll@us.ibm.com", "date": "2020-03-20T23:15:05Z"}, "committer": {"name": "Carl Love", "email": "carll@us.ibm.com", "date": "2020-03-20T23:16:24Z"}, "message": "rs6000: Add command line and builtin compatibility check\n\n2020-03-20  Carl Love  <cel@us.ibm.com>\n\n\tPR/target 87583\n\t* gcc/config/rs6000/rs6000.c (rs6000_option_override_internal):\n\tAdd check for TARGET_FPRND for Power 7 or newer.", "tree": {"sha": "863e999e898d947be7ee90b7c66c3313c2345b30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/863e999e898d947be7ee90b7c66c3313c2345b30"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/68dd57808f7c0147acdb5ca72c88ff655afcb0ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68dd57808f7c0147acdb5ca72c88ff655afcb0ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68dd57808f7c0147acdb5ca72c88ff655afcb0ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68dd57808f7c0147acdb5ca72c88ff655afcb0ce/comments", "author": null, "committer": null, "parents": [{"sha": "72b3bc895f023bf451357659cfe96c966945bdf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72b3bc895f023bf451357659cfe96c966945bdf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72b3bc895f023bf451357659cfe96c966945bdf9"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "2bb7ccc615724e99caf42125e20b98073824f1ff", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68dd57808f7c0147acdb5ca72c88ff655afcb0ce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68dd57808f7c0147acdb5ca72c88ff655afcb0ce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=68dd57808f7c0147acdb5ca72c88ff655afcb0ce", "patch": "@@ -1,3 +1,9 @@\n+2020-03-20  Carl Love  <cel@us.ibm.com>\n+\n+\tPR/target 87583\n+\t* gcc/config/rs6000/rs6000.c (rs6000_option_override_internal):\n+\tAdd check for TARGET_FPRND for Power 7 or newer.\n+\n 2020-03-20  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR ipa/93347"}, {"sha": "07f7cf516babd13893685ad4dd3545d0a6661d7d", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/68dd57808f7c0147acdb5ca72c88ff655afcb0ce/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/68dd57808f7c0147acdb5ca72c88ff655afcb0ce/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=68dd57808f7c0147acdb5ca72c88ff655afcb0ce", "patch": "@@ -3714,6 +3714,14 @@ rs6000_option_override_internal (bool global_init_p)\n       rs6000_isa_flags &= ~OPTION_MASK_CRYPTO;\n     }\n \n+  if (!TARGET_FPRND && TARGET_VSX)\n+    {\n+      if (rs6000_isa_flags_explicit & OPTION_MASK_FPRND)\n+\t/* TARGET_VSX = 1 implies Power 7 and newer */\n+\terror (\"%qs requires %qs\", \"-mvsx\", \"-mfprnd\");\n+      rs6000_isa_flags &= ~OPTION_MASK_FPRND;\n+    }\n+\n   if (TARGET_DIRECT_MOVE && !TARGET_VSX)\n     {\n       if (rs6000_isa_flags_explicit & OPTION_MASK_DIRECT_MOVE)"}]}