{"sha": "c87b25e6971b0ca7f8d5a28fa8775594d415d263", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg3YjI1ZTY5NzFiMGNhN2Y4ZDVhMjhmYTg3NzU1OTRkNDE1ZDI2Mw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2015-05-05T14:21:02Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2015-05-05T14:21:02Z"}, "message": "libcpp: Improvements to comments in line-map.h/c\n\nlibcpp/ChangeLog:\n\t* include/line-map.h: Fix comment at the top of the file.\n\t(source_location): Rewrite and expand the comment for this\n\ttypedef, adding an ascii-art table to clarify how source_location\n\tvalues are allocated.\n\t* line-map.c: Fix comment at the top of the file.\n\nFrom-SVN: r222806", "tree": {"sha": "7c7a54c3abafff428115672634e58676508baa3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c7a54c3abafff428115672634e58676508baa3c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c87b25e6971b0ca7f8d5a28fa8775594d415d263", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c87b25e6971b0ca7f8d5a28fa8775594d415d263", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c87b25e6971b0ca7f8d5a28fa8775594d415d263", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c87b25e6971b0ca7f8d5a28fa8775594d415d263/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b9066f5ae8c8bb806d173238c3f77097390fa405", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9066f5ae8c8bb806d173238c3f77097390fa405", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9066f5ae8c8bb806d173238c3f77097390fa405"}], "stats": {"total": 81, "additions": 78, "deletions": 3}, "files": [{"sha": "ba386de280720baa7274ab584b7d42c9dc0c0f27", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c87b25e6971b0ca7f8d5a28fa8775594d415d263/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c87b25e6971b0ca7f8d5a28fa8775594d415d263/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=c87b25e6971b0ca7f8d5a28fa8775594d415d263", "patch": "@@ -1,3 +1,11 @@\n+2015-05-05  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* include/line-map.h: Fix comment at the top of the file.\n+\t(source_location): Rewrite and expand the comment for this\n+\ttypedef, adding an ascii-art table to clarify how source_location\n+\tvalues are allocated.\n+\t* line-map.c: Fix comment at the top of the file.\n+\n 2015-04-09  Richard Biener  <rguenther@suse.de>\n \n \tPR pch/65550"}, {"sha": "e1681ea591d91ec59f07f7d5897974243569e448", "filename": "libcpp/include/line-map.h", "status": "modified", "additions": 69, "deletions": 2, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c87b25e6971b0ca7f8d5a28fa8775594d415d263/libcpp%2Finclude%2Fline-map.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c87b25e6971b0ca7f8d5a28fa8775594d415d263/libcpp%2Finclude%2Fline-map.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Finclude%2Fline-map.h?ref=c87b25e6971b0ca7f8d5a28fa8775594d415d263", "patch": "@@ -1,4 +1,4 @@\n-/* Map logical line numbers to (source file, line number) pairs.\n+/* Map (unsigned int) keys to (source file, line, column) triples.\n    Copyright (C) 2001-2015 Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify it\n@@ -46,7 +46,74 @@ enum lc_reason\n /* The type of line numbers.  */\n typedef unsigned int linenum_type;\n \n-/* A logical line/column number, i.e. an \"index\" into a line_map.  */\n+/* The typedef \"source_location\" is a key within the location database,\n+   identifying a source location or macro expansion.\n+\n+   This key only has meaning in relation to a line_maps instance.  Within\n+   gcc there is a single line_maps instance: \"line_table\", declared in\n+   gcc/input.h and defined in gcc/input.c.\n+\n+   The values of the keys are intended to be internal to libcpp,\n+   but for ease-of-understanding the implementation, they are currently\n+   assigned as follows:\n+\n+  Actual     | Value                         | Meaning\n+  -----------+-------------------------------+-------------------------------\n+  0x00000000 |                               | Reserved for use by libcpp\n+  0x00000001 | RESERVED_LOCATION_COUNT - 1   | Reserved for use by libcpp\n+  -----------+-------------------------------+-------------------------------\n+  0x00000002 | RESERVED_LOCATION_COUNT       | The first location to be\n+             | (also                         | handed out, and the\n+             |  ordmap[0]->start_location)   | first line in ordmap 0\n+  -----------+-------------------------------+-------------------------------\n+             | ordmap[1]->start_location     | First line in ordmap 1\n+             | ordmap[1]->start_location+1   | First column in that line\n+             | ordmap[1]->start_location+2   | 2nd column in that line\n+             |                               | Subsequent lines are offset by\n+             |                               | (1 << column_bits),\n+             |                               | e.g. 128 for 7 bits, with a\n+             |                               | column value of 0 representing\n+             |                               | \"the whole line\".\n+             | ordmap[2]->start_location-1   | Final location in ordmap 1\n+  -----------+-------------------------------+-------------------------------\n+             | ordmap[2]->start_location     | First line in ordmap 2\n+             | ordmap[3]->start_location-1   | Final location in ordmap 2\n+  -----------+-------------------------------+-------------------------------\n+             |                               | (etc)\n+  -----------+-------------------------------+-------------------------------\n+             | ordmap[n-1]->start_location   | First line in final ord map\n+             |                               | (etc)\n+             | set->highest_location - 1     | Final location in that ordmap\n+  -----------+-------------------------------+-------------------------------\n+             | set->highest_location         | Location of the where the next\n+             |                               | ordinary linemap would start\n+  -----------+-------------------------------+-------------------------------\n+             |                               |\n+             |                  VVVVVVVVVVVVVVVVVVVVVVVVVVV\n+             |                  Ordinary maps grow this way\n+             |\n+             |                    (unallocated integers)\n+             |\n+             |                   Macro maps grow this way\n+             |                   ^^^^^^^^^^^^^^^^^^^^^^^^\n+             |                               |\n+  -----------+-------------------------------+-------------------------------\n+             | LINEMAPS_MACRO_LOWEST_LOCATION| Locations within macro maps\n+             | macromap[m-1]->start_location | Start of last macro map\n+             |                               |\n+  -----------+-------------------------------+-------------------------------\n+             | macromap[m-2]->start_location | Start of penultimate macro map\n+  -----------+-------------------------------+-------------------------------\n+             | macromap[1]->start_location   | Start of macro map 1\n+  -----------+-------------------------------+-------------------------------\n+             | macromap[0]->start_location   | Start of macro map 0\n+  0x7fffffff | MAX_SOURCE_LOCATION           |\n+  -----------+-------------------------------+-------------------------------\n+  0x80000000 | Start of ad-hoc values        |\n+  ...        |                               |\n+  0xffffffff | UINT_MAX                      |\n+  -----------+-------------------------------+-------------------------------\n+  .  */\n typedef unsigned int source_location;\n \n /* Memory allocation function typedef.  Works like xrealloc.  */"}, {"sha": "1db59a7ce45e2aa29dd626934f56a4c01b4d08d6", "filename": "libcpp/line-map.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c87b25e6971b0ca7f8d5a28fa8775594d415d263/libcpp%2Fline-map.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c87b25e6971b0ca7f8d5a28fa8775594d415d263/libcpp%2Fline-map.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fline-map.c?ref=c87b25e6971b0ca7f8d5a28fa8775594d415d263", "patch": "@@ -1,4 +1,4 @@\n-/* Map logical line numbers to (source file, line number) pairs.\n+/* Map (unsigned int) keys to (source file, line, column) triples.\n    Copyright (C) 2001-2015 Free Software Foundation, Inc.\n \n This program is free software; you can redistribute it and/or modify it"}]}