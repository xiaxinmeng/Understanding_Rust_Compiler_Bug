{"sha": "427ee3601dba2c12c5066af9b7508c5467e8209a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI3ZWUzNjAxZGJhMmMxMmM1MDY2YWY5Yjc1MDhjNTQ2N2U4MjA5YQ==", "commit": {"author": {"name": "Dean Ferreyra", "email": "dferreyra@igc.org", "date": "2004-03-13T06:43:30Z"}, "committer": {"name": "Denis Chertykov", "email": "denisc@gcc.gnu.org", "date": "2004-03-13T06:43:30Z"}, "message": "re PR target/14047 (__progmem__ attribute doesn't work)\n\n\tPR target/14047\n\t* config/avr/avr.c (avr_progmem_p): Add \"attributes\" parameter.\n\t(avr_insert_attributes): Pass \"attributes\" to avr_progmem_p.\n\t* config/avr/avr-protos.h (avr_progmem_p): Change prototype.\n\nFrom-SVN: r79433", "tree": {"sha": "c30f06b88586680a292b9f49c91ba387f39bc8e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c30f06b88586680a292b9f49c91ba387f39bc8e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/427ee3601dba2c12c5066af9b7508c5467e8209a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/427ee3601dba2c12c5066af9b7508c5467e8209a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/427ee3601dba2c12c5066af9b7508c5467e8209a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/427ee3601dba2c12c5066af9b7508c5467e8209a/comments", "author": null, "committer": null, "parents": [{"sha": "58354fa8a14d6262918ea65282f36cd07e0c572f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58354fa8a14d6262918ea65282f36cd07e0c572f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58354fa8a14d6262918ea65282f36cd07e0c572f"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "d52d5bb5316c79c1d6a9352c9d571afbe86fce86", "filename": "gcc/config/avr/avr-protos.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/427ee3601dba2c12c5066af9b7508c5467e8209a/gcc%2Fconfig%2Favr%2Favr-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/427ee3601dba2c12c5066af9b7508c5467e8209a/gcc%2Fconfig%2Favr%2Favr-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr-protos.h?ref=427ee3601dba2c12c5066af9b7508c5467e8209a", "patch": "@@ -42,7 +42,7 @@ extern void gas_output_ascii (FILE *file, const char *str, size_t length);\n \n #ifdef TREE_CODE\n extern void asm_output_external (FILE *file, tree decl, char *name);\n-extern int avr_progmem_p (tree decl);\n+extern int avr_progmem_p (tree decl, tree attributes);\n \n #ifdef RTX_CODE /* inside TREE_CODE */\n extern rtx avr_function_value (tree type, tree func);"}, {"sha": "092f1da9e0307eca6fba241d9be340e732101c53", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/427ee3601dba2c12c5066af9b7508c5467e8209a/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/427ee3601dba2c12c5066af9b7508c5467e8209a/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=427ee3601dba2c12c5066af9b7508c5467e8209a", "patch": "@@ -4575,15 +4575,15 @@ avr_handle_fndecl_attribute (tree *node, tree name,\n    if found return 1, otherwise 0.  */\n \n int\n-avr_progmem_p (tree decl)\n+avr_progmem_p (tree decl, tree attributes)\n {\n   tree a;\n \n   if (TREE_CODE (decl) != VAR_DECL)\n     return 0;\n \n   if (NULL_TREE\n-      != lookup_attribute (\"progmem\", DECL_ATTRIBUTES (decl)))\n+      != lookup_attribute (\"progmem\", attributes))\n     return 1;\n \n   a=decl;\n@@ -4607,7 +4607,7 @@ avr_insert_attributes (tree node, tree *attributes)\n {\n   if (TREE_CODE (node) == VAR_DECL\n       && (TREE_STATIC (node) || DECL_EXTERNAL (node))\n-      && avr_progmem_p (node))\n+      && avr_progmem_p (node, *attributes))\n     {\n       static const char dsec[] = \".progmem.data\";\n       *attributes = tree_cons (get_identifier (\"section\"),"}]}