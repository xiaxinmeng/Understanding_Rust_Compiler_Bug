{"sha": "a4a1f96551882663b7eb75cf09c00ab9052dd08d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTRhMWY5NjU1MTg4MjY2M2I3ZWI3NWNmMDljMDBhYjkwNTJkZDA4ZA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-01-06T12:06:47Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2020-01-06T12:06:47Z"}, "message": "libstdc++: Remove redundant inequality operators in <stop_token>\n\n\t* include/std/stop_token (stop_token): Remove operator!= (LWG 3254).\n\t(stop_source): Likewise (LWG 3362).\n\t* testsuite/30_threads/stop_token/stop_source.cc: Test equality\n\tcomparisons.\n\nFrom-SVN: r279897", "tree": {"sha": "719a7391b8f5f437de05a2881942bbb87e20cf4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/719a7391b8f5f437de05a2881942bbb87e20cf4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4a1f96551882663b7eb75cf09c00ab9052dd08d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4a1f96551882663b7eb75cf09c00ab9052dd08d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4a1f96551882663b7eb75cf09c00ab9052dd08d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4a1f96551882663b7eb75cf09c00ab9052dd08d/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f31a99f7c1239d0bde7b1f60e664ee98020bd4e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f31a99f7c1239d0bde7b1f60e664ee98020bd4e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f31a99f7c1239d0bde7b1f60e664ee98020bd4e0"}], "stats": {"total": 58, "additions": 41, "deletions": 17}, "files": [{"sha": "1e46178c999aecbcb5840ed0fa1e4c32cff53fb6", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a1f96551882663b7eb75cf09c00ab9052dd08d/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a1f96551882663b7eb75cf09c00ab9052dd08d/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a4a1f96551882663b7eb75cf09c00ab9052dd08d", "patch": "@@ -1,5 +1,10 @@\n 2020-01-06  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* include/std/stop_token (stop_token): Remove operator!= (LWG 3254).\n+\t(stop_source): Likewise (LWG 3362).\n+\t* testsuite/30_threads/stop_token/stop_source.cc: Test equality\n+\tcomparisons.\n+\n \t* include/bits/stl_algobase.h (__is_byte_iter, __min_cmp)\n \t(lexicographical_compare_three_way): Do not depend on\n \t__cpp_lib_concepts."}, {"sha": "e23d139e66ca3d803c5cc1d853b50d8b5d1f7eab", "filename": "libstdc++-v3/include/std/stop_token", "status": "modified", "additions": 1, "deletions": 17, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a1f96551882663b7eb75cf09c00ab9052dd08d/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstop_token", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a1f96551882663b7eb75cf09c00ab9052dd08d/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstop_token", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fstop_token?ref=a4a1f96551882663b7eb75cf09c00ab9052dd08d", "patch": "@@ -87,16 +87,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     [[nodiscard]]\n     friend bool\n     operator==(const stop_token& __a, const stop_token& __b)\n-    {\n-      return __a._M_state == __b._M_state;\n-    }\n-\n-    [[nodiscard]]\n-    friend bool\n-    operator!=(const stop_token& __a, const stop_token& __b)\n-    {\n-      return __a._M_state != __b._M_state;\n-    }\n+    { return __a._M_state == __b._M_state; }\n \n     friend void\n     swap(stop_token& __lhs, stop_token& __rhs) noexcept\n@@ -301,13 +292,6 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       return __a._M_state == __b._M_state;\n     }\n \n-    [[nodiscard]]\n-    friend bool\n-    operator!=(const stop_source& __a, const stop_source& __b) noexcept\n-    {\n-      return __a._M_state != __b._M_state;\n-    }\n-\n     friend void\n     swap(stop_source& __lhs, stop_source& __rhs) noexcept\n     {"}, {"sha": "9d15f0781ea69a726f91e511087a4e254ad94bde", "filename": "libstdc++-v3/testsuite/30_threads/stop_token/stop_source.cc", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4a1f96551882663b7eb75cf09c00ab9052dd08d/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fstop_token%2Fstop_source.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4a1f96551882663b7eb75cf09c00ab9052dd08d/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fstop_token%2Fstop_source.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F30_threads%2Fstop_token%2Fstop_source.cc?ref=a4a1f96551882663b7eb75cf09c00ab9052dd08d", "patch": "@@ -27,12 +27,18 @@ test01()\n   std::stop_source ssrc;\n   VERIFY( ssrc.stop_possible() );\n   VERIFY( !ssrc.stop_requested() );\n+  VERIFY( ssrc == ssrc );\n+  VERIFY( !(ssrc != ssrc) );\n \n   std::stop_source copy(ssrc);\n   VERIFY( copy.stop_possible() );\n   VERIFY( !copy.stop_requested() );\n   VERIFY( ssrc.stop_possible() );\n   VERIFY( !ssrc.stop_requested() );\n+  VERIFY( copy == ssrc );\n+  VERIFY( !(copy != ssrc) );\n+  VERIFY( ssrc == ssrc );\n+  VERIFY( !(ssrc != ssrc) );\n \n   std::stop_source move(std::move(ssrc));\n   VERIFY( move.stop_possible() );\n@@ -41,6 +47,14 @@ test01()\n   VERIFY( !copy.stop_requested() );\n   VERIFY( !ssrc.stop_possible() );\n   VERIFY( !ssrc.stop_requested() );\n+  VERIFY( !(move == ssrc) );\n+  VERIFY( move != ssrc );\n+  VERIFY( ssrc == ssrc );\n+  VERIFY( !(ssrc != ssrc) );\n+  VERIFY( move == copy );\n+  VERIFY( !(move != copy) );\n+  VERIFY( !(copy == ssrc) );\n+  VERIFY( copy != ssrc );\n }\n \n void\n@@ -52,12 +66,18 @@ test02()\n   std::stop_source ssrc(std::nostopstate);\n   VERIFY( !ssrc.stop_possible() );\n   VERIFY( !ssrc.stop_requested() );\n+  VERIFY( ssrc == ssrc );\n+  VERIFY( !(ssrc != ssrc) );\n \n   std::stop_source copy(ssrc);\n   VERIFY( !copy.stop_possible() );\n   VERIFY( !copy.stop_requested() );\n   VERIFY( !ssrc.stop_possible() );\n   VERIFY( !ssrc.stop_requested() );\n+  VERIFY( copy == ssrc );\n+  VERIFY( !(copy != ssrc) );\n+  VERIFY( ssrc == ssrc );\n+  VERIFY( !(ssrc != ssrc) );\n \n   std::stop_source move(std::move(ssrc));\n   VERIFY( !move.stop_possible() );\n@@ -66,24 +86,39 @@ test02()\n   VERIFY( !copy.stop_requested() );\n   VERIFY( !ssrc.stop_possible() );\n   VERIFY( !ssrc.stop_requested() );\n+  VERIFY( move == ssrc );\n+  VERIFY( !(move != ssrc) );\n+  VERIFY( ssrc == ssrc );\n+  VERIFY( !(ssrc != ssrc) );\n+  VERIFY( move == copy );\n+  VERIFY( !(move != copy) );\n+  VERIFY( copy == ssrc );\n+  VERIFY( !(copy != ssrc) );\n }\n \n void\n test03()\n {\n   std::stop_source s1;\n+  std::stop_source copy(s1);\n   s1.request_stop();\n   std::stop_source s2(std::nostopstate);\n+  VERIFY( s1 != s2 );\n+\n   s1.swap(s2);\n   VERIFY( !s1.stop_possible() );\n   VERIFY( !s1.stop_requested() );\n   VERIFY( s2.stop_possible() );\n   VERIFY( s2.stop_requested() );\n+  VERIFY( s1 != s2 );\n+  VERIFY( s2 == copy );\n+\n   swap(s1, s2);\n   VERIFY( s1.stop_possible() );\n   VERIFY( s1.stop_requested() );\n   VERIFY( !s2.stop_possible() );\n   VERIFY( !s2.stop_requested() );\n+  VERIFY( s1 == copy );\n }\n \n int main()"}]}