{"sha": "5a21849883efce34b55216109644da8ab8b16fcd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWEyMTg0OTg4M2VmY2UzNGI1NTIxNjEwOTY0NGRhOGFiOGIxNmZjZA==", "commit": {"author": {"name": "Samuel Tardieu", "email": "sam@rfc1149.net", "date": "2007-11-28T20:46:18Z"}, "committer": {"name": "Samuel Tardieu", "email": "sam@gcc.gnu.org", "date": "2007-11-28T20:46:18Z"}, "message": "re PR ada/32792 (Assert_Failure sinfo.adb:1730)\n\n    gcc/ada/\n\tPR ada/32792\n\t* sem_attr.adb (Analyze_Attribute, Attribute_Integer_Value clause):\n\tSignal an error when attribute argument is a fixed-point value of\n\tan unknown type.\n\n    gcc/testsuite/\n\tPR ada/32792\n\t* gnat.dg/specs/integer_value.ads: New test.\n\nFrom-SVN: r130497", "tree": {"sha": "82a9d4e41ce310ca835c0e4af4cb5c7030eb85c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82a9d4e41ce310ca835c0e4af4cb5c7030eb85c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a21849883efce34b55216109644da8ab8b16fcd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a21849883efce34b55216109644da8ab8b16fcd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a21849883efce34b55216109644da8ab8b16fcd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a21849883efce34b55216109644da8ab8b16fcd/comments", "author": {"login": "samueltardieu", "id": 44656, "node_id": "MDQ6VXNlcjQ0NjU2", "avatar_url": "https://avatars.githubusercontent.com/u/44656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samueltardieu", "html_url": "https://github.com/samueltardieu", "followers_url": "https://api.github.com/users/samueltardieu/followers", "following_url": "https://api.github.com/users/samueltardieu/following{/other_user}", "gists_url": "https://api.github.com/users/samueltardieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/samueltardieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samueltardieu/subscriptions", "organizations_url": "https://api.github.com/users/samueltardieu/orgs", "repos_url": "https://api.github.com/users/samueltardieu/repos", "events_url": "https://api.github.com/users/samueltardieu/events{/privacy}", "received_events_url": "https://api.github.com/users/samueltardieu/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9c5a3a8d78b8767ae6120216a55b39d9dc552b4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c5a3a8d78b8767ae6120216a55b39d9dc552b4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c5a3a8d78b8767ae6120216a55b39d9dc552b4b"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "c7635154fd825bca4845e42393e1d544d7126c0f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=5a21849883efce34b55216109644da8ab8b16fcd", "patch": "@@ -17,6 +17,11 @@\n \n \t* snames.ads (Attribute_Class_Array): Moved from sem-attr.ads.\n \n+\tPR ada/32792\n+\t* sem_attr.adb (Analyze_Attribute, Attribute_Integer_Value clause):\n+\tSignal an error when attribute argument is a fixed-point value of\n+\tan unknown type.\n+\n 2007-11-26  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n         PR 34081/C++"}, {"sha": "1a0b0c82d4faf296dbf5cf22a564d21ebbd3009f", "filename": "gcc/ada/sem_attr.adb", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Fada%2Fsem_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Fada%2Fsem_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.adb?ref=5a21849883efce34b55216109644da8ab8b16fcd", "patch": "@@ -2975,6 +2975,15 @@ package body Sem_Attr is\n          Check_E1;\n          Check_Integer_Type;\n          Resolve (E1, Any_Fixed);\n+\n+         --  Signal an error if argument type is not a specific fixed-point\n+         --  subtype. An error has been signalled already if the argument\n+         --  was not of a fixed-point type.\n+\n+         if Etype (E1) = Any_Fixed and then not Error_Posted (E1) then\n+            Error_Attr (\"argument of % must be of a fixed-point type\", E1);\n+         end if;\n+\n          Set_Etype (N, P_Base_Type);\n \n       -----------"}, {"sha": "95b437bbbbce3dfc7b388b5890123ef9d0406e4a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5a21849883efce34b55216109644da8ab8b16fcd", "patch": "@@ -6,6 +6,9 @@\n \tPR ada/17317\n \t* gnat.dg/specs/attribute_parsing.ads: New test.\n \n+\tPR ada/32792\n+\t* gnat.dg/specs/integer_value.ads: New test.\n+\n 2007-11-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/34140"}, {"sha": "6e9c1b51f3201cbf5867a2c52d87c1bc1c3b487e", "filename": "gcc/testsuite/gnat.dg/specs/integer_value.ads", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Finteger_value.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a21849883efce34b55216109644da8ab8b16fcd/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Finteger_value.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Finteger_value.ads?ref=5a21849883efce34b55216109644da8ab8b16fcd", "patch": "@@ -0,0 +1,5 @@\n+-- { dg-do compile }\n+package Integer_Value is\n+   X : constant Integer :=\n+     Integer'Integer_Value (12.8); -- { dg-error \"fixed-point type\" \"\" }\n+end Integer_Value;"}]}