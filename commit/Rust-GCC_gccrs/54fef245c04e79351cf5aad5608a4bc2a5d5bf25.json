{"sha": "54fef245c04e79351cf5aad5608a4bc2a5d5bf25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRmZWYyNDVjMDRlNzkzNTFjZjVhYWQ1NjA4YTRiYzJhNWQ1YmYyNQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2000-11-29T00:27:54Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-11-29T00:27:54Z"}, "message": "calls.c (expand_call): Defer const/pure NO_DEFER_POP until after sibcall do_pending_stack_adjust.\n\n        * calls.c (expand_call): Defer const/pure NO_DEFER_POP until\n        after sibcall do_pending_stack_adjust.\n\nFrom-SVN: r37836", "tree": {"sha": "6df51adb0c924d773dcd2be93d9b25211ea55d8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6df51adb0c924d773dcd2be93d9b25211ea55d8c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54fef245c04e79351cf5aad5608a4bc2a5d5bf25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54fef245c04e79351cf5aad5608a4bc2a5d5bf25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54fef245c04e79351cf5aad5608a4bc2a5d5bf25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54fef245c04e79351cf5aad5608a4bc2a5d5bf25/comments", "author": null, "committer": null, "parents": [{"sha": "f423a6a7dd5bf70b31f5618c08205975cb36a0f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f423a6a7dd5bf70b31f5618c08205975cb36a0f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f423a6a7dd5bf70b31f5618c08205975cb36a0f1"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "0fc0b844a11e63457b77afdff0679897f9c89765", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54fef245c04e79351cf5aad5608a4bc2a5d5bf25/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54fef245c04e79351cf5aad5608a4bc2a5d5bf25/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=54fef245c04e79351cf5aad5608a4bc2a5d5bf25", "patch": "@@ -1,3 +1,8 @@\n+2000-11-28  Richard Henderson  <rth@redhat.com>\n+\n+\t* calls.c (expand_call): Defer const/pure NO_DEFER_POP until\n+\tafter sibcall do_pending_stack_adjust.\n+\n Wed Nov 29 00:08:23 2000  J\"orn Rennecke <amylaar@redhat.com>\n \n \t* jump.c (delete_insn): Check that REG_LABEL note actually contains"}, {"sha": "45210c26cf9ab9f0b2e28a5278857e60d4f6e2d3", "filename": "gcc/calls.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54fef245c04e79351cf5aad5608a4bc2a5d5bf25/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54fef245c04e79351cf5aad5608a4bc2a5d5bf25/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=54fef245c04e79351cf5aad5608a4bc2a5d5bf25", "patch": "@@ -2657,11 +2657,6 @@ expand_call (exp, target, ignore)\n \t  expand_start_target_temps ();\n \t}\n \n-      /* When calling a const function, we must pop the stack args right away,\n-\t so that the pop is deleted or moved with the call.  */\n-      if (flags & (ECF_CONST | ECF_PURE))\n-\tNO_DEFER_POP;\n-\n       /* Don't let pending stack adjusts add up to too much.\n \t Also, do all pending adjustments now if there is any chance\n \t this might be a call to alloca or if we are expanding a sibling\n@@ -2671,6 +2666,11 @@ expand_call (exp, target, ignore)\n \t  || pass == 0)\n \tdo_pending_stack_adjust ();\n \n+      /* When calling a const function, we must pop the stack args right away,\n+\t so that the pop is deleted or moved with the call.  */\n+      if (flags & (ECF_CONST | ECF_PURE))\n+\tNO_DEFER_POP;\n+\n       /* Push the temporary stack slot level so that we can free any\n \t temporaries we make.  */\n       push_temp_slots ();"}]}