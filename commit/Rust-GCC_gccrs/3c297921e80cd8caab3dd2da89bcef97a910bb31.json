{"sha": "3c297921e80cd8caab3dd2da89bcef97a910bb31", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2MyOTc5MjFlODBjZDhjYWFiM2RkMmRhODliY2VmOTdhOTEwYmIzMQ==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2021-03-05T22:01:07Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2021-03-06T03:14:30Z"}, "message": "gcc.target/cris/pr93372-1.c: Adjust expectations for eliminated stack-frame\n\nSee comment.\n\n\t* gcc.target/cris/pr93372-1.c: Adjust expected assembler result\n\tto allow an eliminated stack-frame.", "tree": {"sha": "2910a841b2a30c201d6ac6911aecfb1672d51d28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2910a841b2a30c201d6ac6911aecfb1672d51d28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c297921e80cd8caab3dd2da89bcef97a910bb31", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c297921e80cd8caab3dd2da89bcef97a910bb31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c297921e80cd8caab3dd2da89bcef97a910bb31", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c297921e80cd8caab3dd2da89bcef97a910bb31/comments", "author": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ceae9533826aabaf4c78d173c60e3bedeffc6955", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ceae9533826aabaf4c78d173c60e3bedeffc6955", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ceae9533826aabaf4c78d173c60e3bedeffc6955"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "bc637302dfae5a6223397ef6d3a5fadeb8564b2e", "filename": "gcc/testsuite/gcc.target/cris/pr93372-1.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c297921e80cd8caab3dd2da89bcef97a910bb31/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Fpr93372-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c297921e80cd8caab3dd2da89bcef97a910bb31/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Fpr93372-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Fpr93372-1.c?ref=3c297921e80cd8caab3dd2da89bcef97a910bb31", "patch": "@@ -2,7 +2,16 @@\n    are filled. */\n /* { dg-do compile } */\n /* { dg-options \"-O2\" } */\n-/* { dg-final { scan-assembler-not \"\\tnop\" } } */\n+/* { dg-final { scan-assembler-times \"\\tnop|addq 8,|subq 8,\" 2 } } */\n+\n+/* The reason for the weird variant of scan-assembler-not \"\\tnop\" is that we\n+   used to have an unused DWunion temp on stack in xlshrdi3 and delay-slots for\n+   the conditional jumps filled by the addq 8/subq setting up that, but with a\n+   MAX_FIXED_MODE_SIZE no longer 32, but the default 64, that stack-frame is\n+   eliminated, but we no longer have eligible insns to fill the delay-slots.\n+   Not wanting to tweak the code in the test-case, this is second best: allowing\n+   two nops -or- an addq 8 + subq 8 assuming code generation is otherwise\n+   reasonably sane.  */\n \n void *f(void **p)\n {"}]}