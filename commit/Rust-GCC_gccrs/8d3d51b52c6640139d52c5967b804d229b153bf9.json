{"sha": "8d3d51b52c6640139d52c5967b804d229b153bf9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQzZDUxYjUyYzY2NDAxMzlkNTJjNTk2N2I4MDRkMjI5YjE1M2JmOQ==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "rakdver@atrey.karlin.mff.cuni.cz", "date": "2004-07-11T19:57:47Z"}, "committer": {"name": "Zdenek Dvorak", "email": "rakdver@gcc.gnu.org", "date": "2004-07-11T19:57:47Z"}, "message": "re PR tree-optimization/15654 (ICE in calculate_live_on_entry with -O2 -fno-tree-dominator-opts)\n\n\tPR tree-optimization/15654\n\t* tree-tailcall.c (eliminate_tail_call): Remove unreachable code.\n\nFrom-SVN: r84527", "tree": {"sha": "3053fd7033c9fa15e5dc48ee261f16909ec7260e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3053fd7033c9fa15e5dc48ee261f16909ec7260e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d3d51b52c6640139d52c5967b804d229b153bf9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d3d51b52c6640139d52c5967b804d229b153bf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d3d51b52c6640139d52c5967b804d229b153bf9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d3d51b52c6640139d52c5967b804d229b153bf9/comments", "author": null, "committer": null, "parents": [{"sha": "6f4229658a77a80aedbe50f435ea8c693e745583", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f4229658a77a80aedbe50f435ea8c693e745583", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f4229658a77a80aedbe50f435ea8c693e745583"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "ca5666d00d83d273c49e77b7e17d7b8aa72c8e13", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d3d51b52c6640139d52c5967b804d229b153bf9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d3d51b52c6640139d52c5967b804d229b153bf9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d3d51b52c6640139d52c5967b804d229b153bf9", "patch": "@@ -1,3 +1,8 @@\n+2004-07-11  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+\n+\tPR tree-optimization/15654\n+\t* tree-tailcall.c (eliminate_tail_call): Remove unreachable code.\n+\n 2004-07-11  Roger Sayle  <roger@eyesopen.com>\n \n \t* builtins.c (fold_builtin_fputs): Don't bother converting the"}, {"sha": "fdd010f160cafa680de0e8b05c63384f933016ab", "filename": "gcc/tree-tailcall.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d3d51b52c6640139d52c5967b804d229b153bf9/gcc%2Ftree-tailcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d3d51b52c6640139d52c5967b804d229b153bf9/gcc%2Ftree-tailcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-tailcall.c?ref=8d3d51b52c6640139d52c5967b804d229b153bf9", "patch": "@@ -647,6 +647,7 @@ eliminate_tail_call (struct tailcall *t)\n   stmt_ann_t ann;\n   v_may_def_optype v_may_defs;\n   unsigned i;\n+  block_stmt_iterator bsi;\n \n   stmt = bsi_stmt (t->call_bsi);\n   get_stmt_operands (stmt);\n@@ -666,6 +667,21 @@ eliminate_tail_call (struct tailcall *t)\n \n   first = ENTRY_BLOCK_PTR->succ->dest;\n \n+  /* Remove the code after call_bsi that will become unreachable.  The\n+     possibly unreachable code in other blocks is removed later in\n+     cfg cleanup.  */\n+  bsi = t->call_bsi;\n+  bsi_next (&bsi);\n+  while (!bsi_end_p (bsi))\n+    {\n+      /* Do not remove the return statement, so that redirect_edge_and_branch\n+\t sees how the block ends.  */\n+      if (TREE_CODE (bsi_stmt (bsi)) == RETURN_EXPR)\n+\tbreak;\n+\n+      bsi_remove (&bsi);\n+    }\n+\n   /* Replace the call by a jump to the start of function.  */\n   e = redirect_edge_and_branch (t->call_block->succ, first);\n   if (!e)"}]}