{"sha": "068d2c9db6aa8553b34925ea0c0957e8ce671e30", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDY4ZDJjOWRiNmFhODU1M2IzNDkyNWVhMGMwOTU3ZThjZTY3MWUzMA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-03-23T22:57:26Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-03-23T22:57:26Z"}, "message": "re PR c/8224 (Incorrect joining of signed and unsigned division)\n\n\tPR c/8224\n\t* fold-const.c (extract_muldiv_1): Don't pass through type conversions\n\twhen signedness changes for division or modulus.\n\n\tPR c/8224\n\t* gcc.dg/20030323-1.c: New test.\n\nFrom-SVN: r64760", "tree": {"sha": "e1c8674477700f6ed2edd93d67199d024ef407d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1c8674477700f6ed2edd93d67199d024ef407d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/068d2c9db6aa8553b34925ea0c0957e8ce671e30", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/068d2c9db6aa8553b34925ea0c0957e8ce671e30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/068d2c9db6aa8553b34925ea0c0957e8ce671e30", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/068d2c9db6aa8553b34925ea0c0957e8ce671e30/comments", "author": null, "committer": null, "parents": [{"sha": "c967e28c2fc6e87601f1ef89f44baff7f53083ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c967e28c2fc6e87601f1ef89f44baff7f53083ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c967e28c2fc6e87601f1ef89f44baff7f53083ea"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "596e91e09848b6f356eabcf6adca6d16a8d3c26e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=068d2c9db6aa8553b34925ea0c0957e8ce671e30", "patch": "@@ -1,3 +1,9 @@\n+2003-03-23  Glen Nakamura <glen@imodulo.com>\n+\n+\tPR c/8224\n+\t* fold-const.c (extract_muldiv_1): Don't pass through type conversions\n+\twhen signedness changes for division or modulus.\n+\n 2003-03-24  Alan Modra  <amodra@bigpond.net.au>\n \n \t* config/rs6000/sysv4.h (ASM_OUTPUT_ALIGNED_BSS): Remove unnecessary"}, {"sha": "0f9f3d419a57074e4bd8eb59dfea0859e744b71c", "filename": "gcc/fold-const.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=068d2c9db6aa8553b34925ea0c0957e8ce671e30", "patch": "@@ -4170,7 +4170,12 @@ extract_muldiv_1 (t, c, code, wide_type)\n \t      /* ... or its type is larger than ctype,\n \t\t then we cannot pass through this truncation.  */\n \t      || (GET_MODE_SIZE (TYPE_MODE (ctype))\n-\t\t  < GET_MODE_SIZE (TYPE_MODE (TREE_TYPE (op0))))))\n+\t\t  < GET_MODE_SIZE (TYPE_MODE (TREE_TYPE (op0))))\n+\t      /* ... or signedness changes for division or modulus,\n+\t\t then we cannot pass through this conversion.  */\n+\t      || (code != MULT_EXPR\n+\t\t  && (TREE_UNSIGNED (ctype)\n+\t\t      != TREE_UNSIGNED (TREE_TYPE (op0))))))\n \tbreak;\n \n       /* Pass the constant down and see if we can make a simplification.  If"}, {"sha": "9db85358f04b0a911712d65c19eb72b6384edd6d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=068d2c9db6aa8553b34925ea0c0957e8ce671e30", "patch": "@@ -1,3 +1,8 @@\n+2003-03-23  Mikulas Patocka <mikulas@artax.karlin.mff.cuni.cz>\n+\n+\tPR c/8224\n+\t* gcc.dg/20030323-1.c: New test.\n+\n 2003-03-23  Roger Sayle  <roger@eyesopen.com>\n \n \t* gcc.c-torture/compile/20030323-1.c: New test case."}, {"sha": "8a563ec5eb21f09740b32c94c1145cb0f37a10fa", "filename": "gcc/testsuite/gcc.dg/20030323-1.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2Ftestsuite%2Fgcc.dg%2F20030323-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/068d2c9db6aa8553b34925ea0c0957e8ce671e30/gcc%2Ftestsuite%2Fgcc.dg%2F20030323-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20030323-1.c?ref=068d2c9db6aa8553b34925ea0c0957e8ce671e30", "patch": "@@ -0,0 +1,24 @@\n+/* { dg-do run } */\n+\n+/* PR c/8224 */\n+/* Contributed by Mikulas Patocka <mikulas@artax.karlin.mff.cuni.cz> */\n+\n+extern void abort (void);\n+\n+unsigned f (int x)\n+{\n+  return (unsigned) (x / 2) / 2;\n+}\n+\n+unsigned f1 (int x)\n+{\n+  unsigned xx = x / 2;\n+  return xx / 2;\n+}\n+\n+int main ()\n+{\n+  if (f1 (-5) != f (-5))\n+    abort ();\n+  return 0;\n+}"}]}