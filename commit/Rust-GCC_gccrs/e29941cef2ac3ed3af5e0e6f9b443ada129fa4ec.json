{"sha": "e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTI5OTQxY2VmMmFjM2VkM2FmNWUwZTZmOWI0NDNhZGExMjlmYTRlYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-09-20T00:54:30Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-09-20T00:54:30Z"}, "message": "compiler: Give error for byte-order-mark in middle of file.\n\nFrom-SVN: r191507", "tree": {"sha": "8684bfd3ff7726e4ed537914fc18fc642471fe89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8684bfd3ff7726e4ed537914fc18fc642471fe89"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec/comments", "author": null, "committer": null, "parents": [{"sha": "f8f72892e8e371f75b430c070f518cada22b8318", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8f72892e8e371f75b430c070f518cada22b8318", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8f72892e8e371f75b430c070f518cada22b8318"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "25aaeb794a55ce2975a22e3e70a01f5a1e07d66e", "filename": "gcc/go/gofrontend/lex.cc", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec/gcc%2Fgo%2Fgofrontend%2Flex.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec/gcc%2Fgo%2Fgofrontend%2Flex.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Flex.cc?ref=e29941cef2ac3ed3af5e0e6f9b443ada129fa4ec", "patch": "@@ -726,7 +726,7 @@ Lex::next_token()\n \t\t\t\t\t\t\t\t&issued_error);\n \n \t\t// Ignore byte order mark at start of file.\n-\t\tif (ci == 0xfeff && this->lineno_ == 1 && this->lineoff_ == 0)\n+\t\tif (ci == 0xfeff)\n \t\t  {\n \t\t    p = pnext;\n \t\t    break;\n@@ -840,6 +840,14 @@ Lex::advance_one_utf8_char(const char* p, unsigned int* value,\n       *issued_error = true;\n       return p + 1;\n     }\n+\n+  // Warn about byte order mark, except at start of file.\n+  if (*value == 0xfeff && (this->lineno_ != 1 || this->lineoff_ != 0))\n+    {\n+      error_at(this->location(), \"Unicode (UTF-8) BOM in middle of file\");\n+      *issued_error = true;\n+    }\n+\n   return p + adv;\n }\n "}]}