{"sha": "100338dfc493aef6cfcaba4d6faca31fc4a6f0a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTAwMzM4ZGZjNDkzYWVmNmNmY2FiYTRkNmZhY2EzMWZjNGE2ZjBhOA==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-06-29T03:34:25Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1996-06-29T03:34:25Z"}, "message": "reload1.c (choose_reload_regs): Properly mark spill registers as in use for inherited reloads.\n\n        * reload1.c (choose_reload_regs): Properly mark spill registers\n        as in use for inherited reloads.\n\nFrom-SVN: r12377", "tree": {"sha": "72511a709211c2106277d786c61f6a8dac7f4a5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/72511a709211c2106277d786c61f6a8dac7f4a5e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/100338dfc493aef6cfcaba4d6faca31fc4a6f0a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/100338dfc493aef6cfcaba4d6faca31fc4a6f0a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/100338dfc493aef6cfcaba4d6faca31fc4a6f0a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/100338dfc493aef6cfcaba4d6faca31fc4a6f0a8/comments", "author": null, "committer": null, "parents": [{"sha": "49c8f4a40c9492dc7d3b1659d9422d0de73f067e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49c8f4a40c9492dc7d3b1659d9422d0de73f067e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49c8f4a40c9492dc7d3b1659d9422d0de73f067e"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "03d313fcff62b894bf717d42d69ad9d368016a35", "filename": "gcc/reload1.c", "status": "modified", "additions": 15, "deletions": 11, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/100338dfc493aef6cfcaba4d6faca31fc4a6f0a8/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/100338dfc493aef6cfcaba4d6faca31fc4a6f0a8/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=100338dfc493aef6cfcaba4d6faca31fc4a6f0a8", "patch": "@@ -5376,20 +5376,24 @@ choose_reload_regs (insn, avoid_return_reg)\n \t\t to load it, and use it as our reload reg.  */\n \t      if (equiv != 0 && regno != HARD_FRAME_POINTER_REGNUM)\n \t\t{\n+\t\t  int nr = HARD_REGNO_NREGS (regno, reload_mode[r]);\n+\t\t  int k;\n \t\t  reload_reg_rtx[r] = equiv;\n \t\t  reload_inherited[r] = 1;\n-\t\t  /* If it is a spill reg,\n-\t\t     mark the spill reg as in use for this insn.  */\n-\t\t  i = spill_reg_order[regno];\n-\t\t  if (i >= 0)\n+\n+\t\t  /* If any of the hard registers in EQUIV are spill\n+\t\t     registers, mark them as in use for this insn.  */\n+\t\t  for (k = 0; k < nr; k++)\n \t\t    {\n-\t\t      int nr = HARD_REGNO_NREGS (regno, reload_mode[r]);\n-\t\t      int k;\n-\t\t      mark_reload_reg_in_use (regno, reload_opnum[r],\n-\t\t\t\t\t      reload_when_needed[r],\n-\t\t\t\t\t      reload_mode[r]);\n-\t\t      for (k = 0; k < nr; k++)\n-\t\t\tSET_HARD_REG_BIT (reload_reg_used_for_inherit, regno + k);\n+\t\t      i = spill_reg_order[regno + k];\n+\t\t      if (i >= 0)\n+\t\t\t{\n+\t\t\t  mark_reload_reg_in_use (regno, reload_opnum[r],\n+\t\t\t\t\t\t  reload_when_needed[r],\n+\t\t\t\t\t\t  reload_mode[r]);\n+\t\t\t  SET_HARD_REG_BIT (reload_reg_used_for_inherit,\n+\t\t\t\t\t    regno + k);\n+\t\t\t}\n \t\t    }\n \t\t}\n \t    }"}]}