{"sha": "6bd26f0bee556c3951a99a7cd2ae76a413d5ce18", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmJkMjZmMGJlZTU1NmMzOTUxYTk5YTdjZDJhZTc2YTQxM2Q1Y2UxOA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@wasabisystems.com", "date": "2004-12-15T01:02:55Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2004-12-15T01:02:55Z"}, "message": "combine.c (combine_validate_cost): Consider cost of undobuf.other_insn rather than always allowing the...\n\n\t* combine.c (combine_validate_cost): Consider cost of\n\tundobuf.other_insn rather than always allowing the recombination\n\tif it is set.\n\nFrom-SVN: r92173", "tree": {"sha": "34de22ef15bc7b692a6de966bdcff544172790d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34de22ef15bc7b692a6de966bdcff544172790d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18/comments", "author": null, "committer": null, "parents": [{"sha": "0c88d886685d51b8579f29f079d81433ae1e9d31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c88d886685d51b8579f29f079d81433ae1e9d31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c88d886685d51b8579f29f079d81433ae1e9d31"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "a6a46452f3dfe3304947559570f02810d633b6ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6bd26f0bee556c3951a99a7cd2ae76a413d5ce18", "patch": "@@ -1,3 +1,9 @@\n+2004-12-14  Ian Lance Taylor  <ian@wasabisystems.com>\n+\n+\t* combine.c (combine_validate_cost): Consider cost of\n+\tundobuf.other_insn rather than always allowing the recombination\n+\tif it is set.\n+\n 2004-12-14  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \t* pa-host.c (MAP_FAILED): Define if not defined."}, {"sha": "800e65ea1006b6c4ad4ea5db3a8872a57d841d8a", "filename": "gcc/combine.c", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6bd26f0bee556c3951a99a7cd2ae76a413d5ce18/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=6bd26f0bee556c3951a99a7cd2ae76a413d5ce18", "patch": "@@ -560,10 +560,25 @@ combine_validate_cost (rtx i1, rtx i2, rtx i3, rtx newpat, rtx newi2pat)\n       new_i2_cost = 0;\n     }\n \n+  if (undobuf.other_insn)\n+    {\n+      int old_other_cost, new_other_cost;\n+\n+      old_other_cost = (INSN_UID (undobuf.other_insn) <= last_insn_cost\n+\t\t\t? uid_insn_cost[INSN_UID (undobuf.other_insn)] : 0);\n+      new_other_cost = insn_rtx_cost (PATTERN (undobuf.other_insn));\n+      if (old_other_cost > 0 && new_other_cost > 0)\n+\t{\n+\t  old_cost += old_other_cost;\n+\t  new_cost += new_other_cost;\n+\t}\n+      else\n+\told_cost = 0;\n+    }\n+\n   /* Disallow this recombination if both new_cost and old_cost are\n      greater than zero, and new_cost is greater than old cost.  */\n-  if (!undobuf.other_insn\n-      && old_cost > 0\n+  if (old_cost > 0\n       && new_cost > old_cost)\n     {\n       if (dump_file)"}]}