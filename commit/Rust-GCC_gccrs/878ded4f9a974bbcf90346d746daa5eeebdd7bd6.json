{"sha": "878ded4f9a974bbcf90346d746daa5eeebdd7bd6", "node_id": "C_kwDOANBUbNoAKDg3OGRlZDRmOWE5NzRiYmNmOTAzNDZkNzQ2ZGFhNWVlZWJkZDdiZDY", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2022-04-22T23:09:39Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-05-30T08:29:02Z"}, "message": "[Ada] Do not freeze specifically for dispatch tables\n\nThe left-overs of the old freezing code in Make_DT are now redundant since\nthe semantic analyzer performs the same task for the 'Access attribute.\n\ngcc/ada/\n\n\t* exp_disp.adb (Make_DT): Remove remaining freezing code.", "tree": {"sha": "813591fee4c576261b557fb80cb34a943aa4fa9b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/813591fee4c576261b557fb80cb34a943aa4fa9b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/878ded4f9a974bbcf90346d746daa5eeebdd7bd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/878ded4f9a974bbcf90346d746daa5eeebdd7bd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/878ded4f9a974bbcf90346d746daa5eeebdd7bd6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/878ded4f9a974bbcf90346d746daa5eeebdd7bd6/comments", "author": null, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "79b7ab68bce24103adc388d184ff74755914cdda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79b7ab68bce24103adc388d184ff74755914cdda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79b7ab68bce24103adc388d184ff74755914cdda"}], "stats": {"total": 29, "additions": 0, "deletions": 29}, "files": [{"sha": "1f43458294b965af086fda7370a73382fd7b4e15", "filename": "gcc/ada/exp_disp.adb", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/878ded4f9a974bbcf90346d746daa5eeebdd7bd6/gcc%2Fada%2Fexp_disp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/878ded4f9a974bbcf90346d746daa5eeebdd7bd6/gcc%2Fada%2Fexp_disp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_disp.adb?ref=878ded4f9a974bbcf90346d746daa5eeebdd7bd6", "patch": "@@ -4469,35 +4469,6 @@ package body Exp_Disp is\n          Parent_Typ := Full_View (Parent_Typ);\n       end if;\n \n-      --  Ensure that all the primitives are frozen. This is only required when\n-      --  building static dispatch tables: the primitives must be frozen to be\n-      --  referenced, otherwise we have problems with the back end. But this is\n-      --  not a requirement with nonstatic dispatch tables because in this case\n-      --  we generate an empty dispatch table at this point and the extra code\n-      --  required to register the primitives in their slot will be generated\n-      --  later, when each primitive is frozen (see Freeze_Subprogram).\n-\n-      if Building_Static_DT (Typ) then\n-         declare\n-            F_List    : List_Id;\n-            Prim      : Entity_Id;\n-            Prim_Elmt : Elmt_Id;\n-\n-         begin\n-            Prim_Elmt := First_Elmt (Primitive_Operations (Typ));\n-            while Present (Prim_Elmt) loop\n-               Prim   := Node (Prim_Elmt);\n-               F_List := Freeze_Entity (Prim, Typ, Do_Freeze_Profile => False);\n-\n-               if Present (F_List) then\n-                  Append_List_To (Result, F_List);\n-               end if;\n-\n-               Next_Elmt (Prim_Elmt);\n-            end loop;\n-         end;\n-      end if;\n-\n       if not Is_Interface (Typ) and then Has_Interfaces (Typ) then\n          declare\n             Cannot_Have_Null_Disc : Boolean := False;"}]}