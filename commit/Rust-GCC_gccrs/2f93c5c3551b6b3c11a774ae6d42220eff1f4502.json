{"sha": "2f93c5c3551b6b3c11a774ae6d42220eff1f4502", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmY5M2M1YzM1NTFiNmIzYzExYTc3NGFlNmQ0MjIyMGVmZjFmNDUwMg==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.co.uk", "date": "2000-09-14T16:45:42Z"}, "committer": {"name": "Bernd Schmidt", "email": "crux@gcc.gnu.org", "date": "2000-09-14T16:45:42Z"}, "message": "Generate REG_EQUAL notes when they'd be helpful\n\nFrom-SVN: r36409", "tree": {"sha": "af29e8a74afd83f5a30120f40006cdf8c5d312df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/af29e8a74afd83f5a30120f40006cdf8c5d312df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f93c5c3551b6b3c11a774ae6d42220eff1f4502", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f93c5c3551b6b3c11a774ae6d42220eff1f4502", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f93c5c3551b6b3c11a774ae6d42220eff1f4502", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f93c5c3551b6b3c11a774ae6d42220eff1f4502/comments", "author": null, "committer": null, "parents": [{"sha": "cad396c8b06436a2299ddcbfd24d8b1080bff46d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cad396c8b06436a2299ddcbfd24d8b1080bff46d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cad396c8b06436a2299ddcbfd24d8b1080bff46d"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "ffa9e03fa7ad17cd4fd81a312076320ba1e0918c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f93c5c3551b6b3c11a774ae6d42220eff1f4502/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f93c5c3551b6b3c11a774ae6d42220eff1f4502/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2f93c5c3551b6b3c11a774ae6d42220eff1f4502", "patch": "@@ -1,3 +1,10 @@\n+2000-09-12  Bernd Schmidt  <bernds@redhat.co.uk>\n+\n+\tFrom Joern Rennecke:\n+\t* local-alloc.c (update_equiv_regs): If there is no REG_EQUAL note\n+\ton an insn and function_invariant_p returns nonzero for the source,\n+\tadd a REG_EQUAL note.\n+\n Thu Sep 14 00:51:57 EDT 2000  John Wehle  (john@feith.com)\n \n \t* alias.c (memrefs_conflict_p): An ADDRESSOF doesn't"}, {"sha": "04b1613b68955ec935373a97017e39c26c217aab", "filename": "gcc/local-alloc.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f93c5c3551b6b3c11a774ae6d42220eff1f4502/gcc%2Flocal-alloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f93c5c3551b6b3c11a774ae6d42220eff1f4502/gcc%2Flocal-alloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flocal-alloc.c?ref=2f93c5c3551b6b3c11a774ae6d42220eff1f4502", "patch": "@@ -787,6 +787,13 @@ update_equiv_regs ()\n \n       note = find_reg_note (insn, REG_EQUAL, NULL_RTX);\n \n+      /* cse sometimes generates function invariants, but doesn't put a\n+\t REG_EQUAL note on the insn.  Since this note would be redundant,\n+         there's no point creating it earlier than here.  */\n+      if (! note && function_invariant_p (src))\n+\tREG_NOTES (insn)\n+\t  = note = gen_rtx_EXPR_LIST (REG_EQUAL, src, REG_NOTES (insn));\n+\n       if (REG_N_SETS (regno) != 1\n \t  && (! note\n \t      || ! function_invariant_p (XEXP (note, 0))"}]}