{"sha": "fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmU4M2Y1NDM5YWNiMWNlOGQxMmQ0NmU5OTFlODhhZWNmNWQ3YzZkYw==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-07-13T02:33:10Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-07-13T02:33:10Z"}, "message": "re PR middle-end/21840 (ICE while building Linux kernel (seg fault), missing cast)\n\n2005-07-12  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR tree-opt/21840\n        * tree-ssa-pre.c (eliminate): Convert the sprime to the correct type\n        if *rhs_p is not a SSA_NAME.\n\n2005-07-12  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR tree-opt/21840\n        * gcc.c-torture/compile/pr21840.c: New test.\n\nFrom-SVN: r101960", "tree": {"sha": "78b04c4676a17e65c12a5837d99d6bfd0a8fa7cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78b04c4676a17e65c12a5837d99d6bfd0a8fa7cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/comments", "author": null, "committer": null, "parents": [{"sha": "13c2c08bad28dbf30454a90f56ad6da9ee171ae1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13c2c08bad28dbf30454a90f56ad6da9ee171ae1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13c2c08bad28dbf30454a90f56ad6da9ee171ae1"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "3f3d0feb01e839deb73535476ca7ffc05190b3e4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "patch": "@@ -1,3 +1,9 @@\n+2005-07-12  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR tree-opt/21840\n+\t* tree-ssa-pre.c (eliminate): Convert the sprime to the correct type\n+\tif *rhs_p is not a SSA_NAME.\n+\n 2005-07-12  Daniel Berlin  <dberlin@dberlin.org>\n \t\n \tFix PR tree-optimization/22422 "}, {"sha": "15b1c4dbd4d3b5f767e94dd0c4abdfb325d358a8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "patch": "@@ -1,3 +1,8 @@\n+2005-07-12  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR tree-opt/21840\n+\t* gcc.c-torture/compile/pr21840.c: New test.\n+\n 2005-07-12  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc.c-torture/compile/pr22379.c: New test."}, {"sha": "bec3d6bf5d7e2c23c79da897fdfe316504e9d25c", "filename": "gcc/testsuite/gcc.c-torture/compile/pr21840.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr21840.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr21840.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr21840.c?ref=fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "patch": "@@ -0,0 +1,11 @@\n+void fn_show_state(void);\n+typedef void (*fn_handler_fn)(void);\n+static fn_handler_fn fn_handler[1];\n+\n+void k_spec(unsigned char value)\n+{\n+  void *func = fn_handler[value];\n+  if (func == fn_show_state )\n+    return;\n+  fn_handler[value]();\n+}"}, {"sha": "fbfda11cebe12040c2d32b9e7caa4c98c9140e07", "filename": "gcc/tree-ssa-pre.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2Ftree-ssa-pre.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc/gcc%2Ftree-ssa-pre.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-pre.c?ref=fe83f5439acb1ce8d12d46e991e88aecf5d7c6dc", "patch": "@@ -2334,8 +2334,17 @@ eliminate (void)\n \t\t      fprintf (dump_file, \" in \");\n \t\t      print_generic_stmt (dump_file, stmt, 0);\n \t\t    }\n+\t\t  \n \t\t  if (TREE_CODE (sprime) == SSA_NAME) \n \t\t    NECESSARY (SSA_NAME_DEF_STMT (sprime)) = 1;\n+\t\t  /* We need to make sure the new and old types actually match,\n+\t\t     which may require adding a simple cast, which fold_convert\n+\t\t     will do for us.  */\n+\t\t  if (TREE_CODE (*rhs_p) != SSA_NAME\n+\t\t      && !tree_ssa_useless_type_conversion_1 (TREE_TYPE (*rhs_p),\n+\t\t\t\t\t\t\t      TREE_TYPE (sprime)))\n+\t\t    sprime = fold_convert (TREE_TYPE (*rhs_p), sprime);\n+\t\t  \n \t\t  pre_stats.eliminations++;\n \t\t  propagate_tree_value (rhs_p, sprime);\n \t\t  update_stmt (stmt);"}]}