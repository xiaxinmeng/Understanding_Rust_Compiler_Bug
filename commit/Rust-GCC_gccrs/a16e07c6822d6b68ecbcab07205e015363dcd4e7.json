{"sha": "a16e07c6822d6b68ecbcab07205e015363dcd4e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE2ZTA3YzY4MjJkNmI2OGVjYmNhYjA3MjA1ZTAxNTM2M2RjZDRlNw==", "commit": {"author": {"name": "Dave Korn", "email": "dave.korn.cygwin@gmail.com", "date": "2010-11-11T13:29:46Z"}, "committer": {"name": "Dave Korn", "email": "davek@gcc.gnu.org", "date": "2010-11-11T13:29:46Z"}, "message": "lto-streamer-out.c (write_symbol): Use int_size_in_bytes rather than assembling high and low parts of size if...\n\n\t* lto-streamer-out.c (write_symbol): Use int_size_in_bytes rather than\n\tassembling high and low parts of size if not using 32-bit HWINT; else\n\tuse DECL_SIZE_UNITS, not DECL_SIZE.\n\nFrom-SVN: r166600", "tree": {"sha": "c7e19d09bacfcc8a51c1aedc4a75683025f33c24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c7e19d09bacfcc8a51c1aedc4a75683025f33c24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a16e07c6822d6b68ecbcab07205e015363dcd4e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a16e07c6822d6b68ecbcab07205e015363dcd4e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a16e07c6822d6b68ecbcab07205e015363dcd4e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a16e07c6822d6b68ecbcab07205e015363dcd4e7/comments", "author": {"login": "davek-cygwin", "id": 530057, "node_id": "MDQ6VXNlcjUzMDA1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/530057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davek-cygwin", "html_url": "https://github.com/davek-cygwin", "followers_url": "https://api.github.com/users/davek-cygwin/followers", "following_url": "https://api.github.com/users/davek-cygwin/following{/other_user}", "gists_url": "https://api.github.com/users/davek-cygwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/davek-cygwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davek-cygwin/subscriptions", "organizations_url": "https://api.github.com/users/davek-cygwin/orgs", "repos_url": "https://api.github.com/users/davek-cygwin/repos", "events_url": "https://api.github.com/users/davek-cygwin/events{/privacy}", "received_events_url": "https://api.github.com/users/davek-cygwin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ad269884765cfe6e5f4cf1f3abb50b4e74f79ac9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad269884765cfe6e5f4cf1f3abb50b4e74f79ac9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad269884765cfe6e5f4cf1f3abb50b4e74f79ac9"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "78e48c4f98d76640930dcf06987bd850c251c10d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a16e07c6822d6b68ecbcab07205e015363dcd4e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a16e07c6822d6b68ecbcab07205e015363dcd4e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a16e07c6822d6b68ecbcab07205e015363dcd4e7", "patch": "@@ -1,3 +1,9 @@\n+2010-11-11  Dave Korn  <dave.korn.cygwin@gmail.com>\n+\n+\t* lto-streamer-out.c (write_symbol): Use int_size_in_bytes rather than\n+\tassembling high and low parts of size if not using 32-bit HWINT; else\n+\tuse DECL_SIZE_UNITS, not DECL_SIZE.\n+\n 2010-11-11  Martin Jambor  <mjambor@suse.cz>\n \n \tPR tree-optimization/46383"}, {"sha": "2a4d985c9b9ef5875a06624549729de8cd9c2448", "filename": "gcc/lto-streamer-out.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a16e07c6822d6b68ecbcab07205e015363dcd4e7/gcc%2Flto-streamer-out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a16e07c6822d6b68ecbcab07205e015363dcd4e7/gcc%2Flto-streamer-out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-out.c?ref=a16e07c6822d6b68ecbcab07205e015363dcd4e7", "patch": "@@ -2435,8 +2435,12 @@ write_symbol (struct lto_streamer_cache_d *cache,\n   if (kind == GCCPK_COMMON\n       && DECL_SIZE (t)\n       && TREE_CODE (DECL_SIZE (t)) == INTEGER_CST)\n-    size = (((uint64_t) TREE_INT_CST_HIGH (DECL_SIZE (t))) << 32)\n-      | TREE_INT_CST_LOW (DECL_SIZE (t));\n+    {\n+      size = (HOST_BITS_PER_WIDE_INT >= 64)\n+\t? (uint64_t) int_size_in_bytes (TREE_TYPE (t))\n+\t: (((uint64_t) TREE_INT_CST_HIGH (DECL_SIZE_UNIT (t))) << 32)\n+\t\t| TREE_INT_CST_LOW (DECL_SIZE_UNIT (t));\n+    }\n   else\n     size = 0;\n "}]}