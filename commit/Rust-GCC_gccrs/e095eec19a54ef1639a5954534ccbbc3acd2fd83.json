{"sha": "e095eec19a54ef1639a5954534ccbbc3acd2fd83", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTA5NWVlYzE5YTU0ZWYxNjM5YTU5NTQ1MzRjY2JiYzNhY2QyZmQ4Mw==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2018-03-05T06:31:24Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2018-03-05T06:31:24Z"}, "message": "configfiles.texi (Configuration Files): Move info about conditionalizing $target-protos.h to...\n\n2018-03-05  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/\n\t* doc/configfiles.texi (Configuration Files): Move info about\n\tconditionalizing $target-protos.h to...\n\t* doc/sourcebuild.texi (Back End): Here.  Explain how $target.h\n\tdiffers from $target-protos.h.\n\nFrom-SVN: r258240", "tree": {"sha": "234ac94ae5abb587dfc69f7be3fb4a469ed1d396", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/234ac94ae5abb587dfc69f7be3fb4a469ed1d396"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e095eec19a54ef1639a5954534ccbbc3acd2fd83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e095eec19a54ef1639a5954534ccbbc3acd2fd83", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e095eec19a54ef1639a5954534ccbbc3acd2fd83", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e095eec19a54ef1639a5954534ccbbc3acd2fd83/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "142439c50cfd7e3a2ef609cbd754541152814f95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/142439c50cfd7e3a2ef609cbd754541152814f95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/142439c50cfd7e3a2ef609cbd754541152814f95"}], "stats": {"total": 34, "additions": 28, "deletions": 6}, "files": [{"sha": "bd2c768820fb16e11ac5318903a3169d33755964", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e095eec19a54ef1639a5954534ccbbc3acd2fd83/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e095eec19a54ef1639a5954534ccbbc3acd2fd83/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e095eec19a54ef1639a5954534ccbbc3acd2fd83", "patch": "@@ -1,3 +1,10 @@\n+2018-03-05  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* doc/configfiles.texi (Configuration Files): Move info about\n+\tconditionalizing $target-protos.h to...\n+\t* doc/sourcebuild.texi (Back End): Here.  Explain how $target.h\n+\tdiffers from $target-protos.h.\n+\n 2018-03-05  Kito Cheng  <kito.cheng@gmail.com>\n \t    Chung-Ju Wu  <jasonwucj@gmail.com>\n "}, {"sha": "fcd1d99dbd7ada74ef92e32629a16ea1bf3931d0", "filename": "gcc/doc/configfiles.texi", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e095eec19a54ef1639a5954534ccbbc3acd2fd83/gcc%2Fdoc%2Fconfigfiles.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e095eec19a54ef1639a5954534ccbbc3acd2fd83/gcc%2Fdoc%2Fconfigfiles.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fconfigfiles.texi?ref=e095eec19a54ef1639a5954534ccbbc3acd2fd83", "patch": "@@ -59,12 +59,10 @@ machine.\n @item\n @file{tm_p.h}, which includes the header @file{@var{machine}-protos.h}\n that contains prototypes for functions in the target\n-@file{@var{machine}.c} file.  The header @file{@var{machine}-protos.h}\n-can include prototypes of functions that use rtl and tree data\n-structures inside appropriate @code{#ifdef RTX_CODE} and @code{#ifdef\n-TREE_CODE} conditional code segements.  The\n-@file{@var{machine}-protos.h} is included after the @file{rtl.h}\n-and/or @file{tree.h} would have been included.  The @file{tm_p.h} also\n+@file{@var{machine}.c} file.  The\n+@file{@var{machine}-protos.h} header is included after the @file{rtl.h}\n+and/or @file{tree.h} would have been included.\n+The @file{tm_p.h} also\n includes the header @file{tm-preds.h} which is generated by\n @file{genpreds} program during the build to define the declarations\n and inline functions for the predicate functions."}, {"sha": "b9672ca8b8e5ea2b04470d033713f4e3e6c6507f", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e095eec19a54ef1639a5954534ccbbc3acd2fd83/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e095eec19a54ef1639a5954534ccbbc3acd2fd83/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=e095eec19a54ef1639a5954534ccbbc3acd2fd83", "patch": "@@ -822,6 +822,23 @@ manual needs to be installed as info for this to work, or to be a\n chapter of this manual.\n @end itemize\n \n+The @file{@var{machine}.h} header is included very early in GCC's\n+standard sequence of header files, while @file{@var{machine}-protos.h}\n+is included late in the sequence.  Thus @file{@var{machine}-protos.h}\n+can include declarations referencing types that are not defined when\n+@file{@var{machine}.h} is included, specifically including those from\n+@file{rtl.h} and @file{tree.h}.  Since both RTL and tree types may not\n+be available in every context where @file{@var{machine}-protos.h} is\n+included, in this file you should guard declarations using these types\n+inside appropriate @code{#ifdef RTX_CODE} or @code{#ifdef TREE_CODE}\n+conditional code segments.\n+\n+If the backend uses shared data structures that require @code{GTY} markers \n+for garbage collection (@pxref{Type Information}), you must declare those\n+in @file{@var{machine}.h} rather than @file{@var{machine}-protos.h}.  \n+Any definitions required for building libgcc must also go in\n+@file{@var{machine}.h}.\n+\n GCC uses the macro @code{IN_TARGET_CODE} to distinguish between\n machine-specific @file{.c} and @file{.cc} files and\n machine-independent @file{.c} and @file{.cc} files.  Machine-specific"}]}