{"sha": "bf5372e7f0c5c0df7f239ce96ce35a2114400269", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY1MzcyZTdmMGM1YzBkZjdmMjM5Y2U5NmNlMzVhMjExNDQwMDI2OQ==", "commit": {"author": {"name": "Yaakov Selkowitz", "email": "yselkowi@redhat.com", "date": "2015-08-07T05:13:52Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2015-08-07T05:13:52Z"}, "message": "Makefile.def (libiconv): Define bootstrap=true.\n\n2015-08-06  Yaakov Selkowitz  <yselkowi@redhat.com>\n\n\t* Makefile.def (libiconv): Define bootstrap=true.\n\tMark pdf/html/info as missing.\n\t(configure-gcc): Depend on all-libiconv.\n\t(all-gcc): Ditto.\n\t(configure-libcpp): Ditto.\n\t(all-libcpp): Ditto.\n\t(configure-intl): Ditto.\n\t(all-intl): Ditto.\n\t* Makefile.in: Regenerate.\n\nintl/\n\t* configure: Reflects renaming of configure.in to configure.ac\n\nlibcpp/\n\t* configure: Regenerate.\n\ngcc/\n\t* configure.ac: Define LIBICONV_DEP with in-tree libiconv.\n\t* configure: Regenerate.\n\nFrom-SVN: r226712", "tree": {"sha": "fe4a555c5372a25485b0bc8224f9107f52ef87e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe4a555c5372a25485b0bc8224f9107f52ef87e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf5372e7f0c5c0df7f239ce96ce35a2114400269", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf5372e7f0c5c0df7f239ce96ce35a2114400269", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf5372e7f0c5c0df7f239ce96ce35a2114400269", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf5372e7f0c5c0df7f239ce96ce35a2114400269/comments", "author": {"login": "yselkowitz", "id": 13408495, "node_id": "MDQ6VXNlcjEzNDA4NDk1", "avatar_url": "https://avatars.githubusercontent.com/u/13408495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yselkowitz", "html_url": "https://github.com/yselkowitz", "followers_url": "https://api.github.com/users/yselkowitz/followers", "following_url": "https://api.github.com/users/yselkowitz/following{/other_user}", "gists_url": "https://api.github.com/users/yselkowitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yselkowitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yselkowitz/subscriptions", "organizations_url": "https://api.github.com/users/yselkowitz/orgs", "repos_url": "https://api.github.com/users/yselkowitz/repos", "events_url": "https://api.github.com/users/yselkowitz/events{/privacy}", "received_events_url": "https://api.github.com/users/yselkowitz/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8c49d0c4190ec35f143daea22147ef1d198120a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c49d0c4190ec35f143daea22147ef1d198120a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c49d0c4190ec35f143daea22147ef1d198120a9"}], "stats": {"total": 1726, "additions": 1020, "deletions": 706}, "files": [{"sha": "bd0f35e34cec1eea0ca0198b7a022c0ec8a3b76d", "filename": "ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -1,3 +1,15 @@\n+2015-08-06  Yaakov Selkowitz  <yselkowi@redhat.com>\n+\n+\t* Makefile.def (libiconv): Define bootstrap=true.\n+\tMark pdf/html/info as missing.\n+\t(configure-gcc): Depend on all-libiconv.\n+\t(all-gcc): Ditto.\n+\t(configure-libcpp): Ditto.\n+\t(all-libcpp): Ditto.\n+\t(configure-intl): Ditto.\n+\t(all-intl): Ditto.\n+\t* Makefile.in: Regenerate.\n+\n 2015-08-03  Bin Cheng  <bin.cheng@arm.com>\n \n \t* MAINTAINERS (loop ivopts): Add the entry and myself."}, {"sha": "01445e4ff6a516da6f5b23c9a265fea7580cbe93", "filename": "Makefile.def", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -93,9 +93,12 @@ host_modules= { module= libiberty-linker-plugin; bootstrap=true;\n \t\textra_make_flags='@extra_linker_plugin_flags@'; };\n // We abuse missing to avoid installing anything for libiconv.\n host_modules= { module= libiconv;\n+\t\tbootstrap=true;\n \t\textra_configure_flags='--disable-shared';\n \t\tno_install= true;\n-\t\tmissing= install-info;\n+\t\tmissing= pdf;\n+\t\tmissing= html;\n+\t\tmissing= info;\n \t\tmissing= install-pdf;\n \t\tmissing= install-html;\n \t\tmissing= install-info; };\n@@ -324,6 +327,7 @@ dependencies = { module=configure-gcc; on=all-gas; };\n dependencies = { module=configure-gcc; on=all-ld; };\n dependencies = { module=configure-gcc; on=all-gold; };\n dependencies = { module=configure-gcc; on=all-libelf; };\n+dependencies = { module=configure-gcc; on=all-libiconv; };\n dependencies = { module=all-gcc; on=all-libiberty; hard=true; };\n dependencies = { module=all-gcc; on=all-intl; };\n dependencies = { module=all-gcc; on=all-mpfr; };\n@@ -342,6 +346,7 @@ dependencies = { module=all-gcc; on=all-libdecnumber; hard=true; };\n dependencies = { module=all-gcc; on=all-libiberty; };\n dependencies = { module=all-gcc; on=all-fixincludes; };\n dependencies = { module=all-gcc; on=all-lto-plugin; };\n+dependencies = { module=all-gcc; on=all-libiconv; };\n dependencies = { module=info-gcc; on=all-build-libiberty; };\n dependencies = { module=dvi-gcc; on=all-build-libiberty; };\n dependencies = { module=pdf-gcc; on=all-build-libiberty; };\n@@ -353,8 +358,10 @@ dependencies = { module=install-strip-gcc ; on=install-strip-lto-plugin; };\n \n dependencies = { module=configure-libcpp; on=configure-libiberty; hard=true; };\n dependencies = { module=configure-libcpp; on=configure-intl; };\n+dependencies = { module=configure-libcpp; on=all-libiconv; };\n dependencies = { module=all-libcpp; on=all-libiberty; hard=true; };\n dependencies = { module=all-libcpp; on=all-intl; };\n+dependencies = { module=all-libcpp; on=all-libiconv; };\n \n dependencies = { module=all-fixincludes; on=all-libiberty; };\n \n@@ -373,9 +380,11 @@ dependencies = { module=all-gotools; on=all-target-libgo; };\n \n dependencies = { module=all-utils; on=all-libiberty; };\n \n+dependencies = { module=configure-intl; on=all-libiconv; };\n dependencies = { module=configure-mpfr; on=all-gmp; };\n dependencies = { module=configure-mpc; on=all-mpfr; };\n dependencies = { module=configure-isl; on=all-gmp; };\n+dependencies = { module=all-intl; on=all-libiconv; };\n \n // Host modules specific to gdb.\n dependencies = { module=configure-gdb; on=all-intl; };"}, {"sha": "13f3740e9f66656ef7f68064500154d1fb612a21", "filename": "Makefile.in", "status": "modified", "additions": 582, "deletions": 65, "changes": 647, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -1079,7 +1079,9 @@ all-host: maybe-all-libiberty\n @if libiberty-linker-plugin-no-bootstrap\n all-host: maybe-all-libiberty-linker-plugin\n @endif libiberty-linker-plugin-no-bootstrap\n+@if libiconv-no-bootstrap\n all-host: maybe-all-libiconv\n+@endif libiconv-no-bootstrap\n all-host: maybe-all-m4\n all-host: maybe-all-readline\n all-host: maybe-all-sid\n@@ -24134,7 +24136,6 @@ configure-libiconv: stage_current\n @if libiconv\n maybe-configure-libiconv: configure-libiconv\n configure-libiconv: \n-\t@: $(MAKE); $(unstage)\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \ttest ! -f $(HOST_SUBDIR)/libiconv/Makefile || exit 0; \\\n@@ -24158,6 +24159,211 @@ configure-libiconv:\n \n \n \n+.PHONY: configure-stage1-libiconv maybe-configure-stage1-libiconv\n+maybe-configure-stage1-libiconv:\n+@if libiconv-bootstrap\n+maybe-configure-stage1-libiconv: configure-stage1-libiconv\n+configure-stage1-libiconv:\n+\t@[ $(current_stage) = stage1 ] || $(MAKE) stage1-start\n+\t@$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE1_TFLAGS)\"; \\\n+\ttest ! -f $(HOST_SUBDIR)/libiconv/Makefile || exit 0; \\\n+\t$(HOST_EXPORTS) \\\n+\tCFLAGS=\"$(STAGE1_CFLAGS)\"; export CFLAGS; \\\n+\tCXXFLAGS=\"$(STAGE1_CXXFLAGS)\"; export CXXFLAGS; \\\n+\tLIBCFLAGS=\"$(LIBCFLAGS)\"; export LIBCFLAGS;  \\\n+\techo Configuring stage 1 in $(HOST_SUBDIR)/libiconv; \\\n+\t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv; \\\n+\tcd $(HOST_SUBDIR)/libiconv || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  /* | [A-Za-z]:[\\\\/]*) topdir=$(srcdir) ;; \\\n+\t  *) topdir=`echo $(HOST_SUBDIR)/libiconv/ | \\\n+\t\tsed -e 's,\\./,,g' -e 's,[^/]*/,../,g' `$(srcdir) ;; \\\n+\tesac; \\\n+\tmodule_srcdir=libiconv; \\\n+\t$(SHELL) $$s/$$module_srcdir/configure \\\n+\t  --srcdir=$${topdir}/$$module_srcdir \\\n+\t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n+\t  --target=${target_alias} \\\n+\t   \\\n+\t  $(STAGE1_CONFIGURE_FLAGS) \\\n+\t  --disable-shared\n+@endif libiconv-bootstrap\n+\n+.PHONY: configure-stage2-libiconv maybe-configure-stage2-libiconv\n+maybe-configure-stage2-libiconv:\n+@if libiconv-bootstrap\n+maybe-configure-stage2-libiconv: configure-stage2-libiconv\n+configure-stage2-libiconv:\n+\t@[ $(current_stage) = stage2 ] || $(MAKE) stage2-start\n+\t@$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE2_TFLAGS)\"; \\\n+\ttest ! -f $(HOST_SUBDIR)/libiconv/Makefile || exit 0; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS) \\\n+\tCFLAGS=\"$(STAGE2_CFLAGS)\"; export CFLAGS; \\\n+\tCXXFLAGS=\"$(STAGE2_CXXFLAGS)\"; export CXXFLAGS; \\\n+\tLIBCFLAGS=\"$(STAGE2_CFLAGS)\"; export LIBCFLAGS;  \\\n+\techo Configuring stage 2 in $(HOST_SUBDIR)/libiconv; \\\n+\t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv; \\\n+\tcd $(HOST_SUBDIR)/libiconv || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  /* | [A-Za-z]:[\\\\/]*) topdir=$(srcdir) ;; \\\n+\t  *) topdir=`echo $(HOST_SUBDIR)/libiconv/ | \\\n+\t\tsed -e 's,\\./,,g' -e 's,[^/]*/,../,g' `$(srcdir) ;; \\\n+\tesac; \\\n+\tmodule_srcdir=libiconv; \\\n+\t$(SHELL) $$s/$$module_srcdir/configure \\\n+\t  --srcdir=$${topdir}/$$module_srcdir \\\n+\t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n+\t  --target=${target_alias} \\\n+\t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n+\t  $(STAGE2_CONFIGURE_FLAGS) \\\n+\t  --disable-shared\n+@endif libiconv-bootstrap\n+\n+.PHONY: configure-stage3-libiconv maybe-configure-stage3-libiconv\n+maybe-configure-stage3-libiconv:\n+@if libiconv-bootstrap\n+maybe-configure-stage3-libiconv: configure-stage3-libiconv\n+configure-stage3-libiconv:\n+\t@[ $(current_stage) = stage3 ] || $(MAKE) stage3-start\n+\t@$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE3_TFLAGS)\"; \\\n+\ttest ! -f $(HOST_SUBDIR)/libiconv/Makefile || exit 0; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS) \\\n+\tCFLAGS=\"$(STAGE3_CFLAGS)\"; export CFLAGS; \\\n+\tCXXFLAGS=\"$(STAGE3_CXXFLAGS)\"; export CXXFLAGS; \\\n+\tLIBCFLAGS=\"$(STAGE3_CFLAGS)\"; export LIBCFLAGS;  \\\n+\techo Configuring stage 3 in $(HOST_SUBDIR)/libiconv; \\\n+\t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv; \\\n+\tcd $(HOST_SUBDIR)/libiconv || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  /* | [A-Za-z]:[\\\\/]*) topdir=$(srcdir) ;; \\\n+\t  *) topdir=`echo $(HOST_SUBDIR)/libiconv/ | \\\n+\t\tsed -e 's,\\./,,g' -e 's,[^/]*/,../,g' `$(srcdir) ;; \\\n+\tesac; \\\n+\tmodule_srcdir=libiconv; \\\n+\t$(SHELL) $$s/$$module_srcdir/configure \\\n+\t  --srcdir=$${topdir}/$$module_srcdir \\\n+\t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n+\t  --target=${target_alias} \\\n+\t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n+\t  $(STAGE3_CONFIGURE_FLAGS) \\\n+\t  --disable-shared\n+@endif libiconv-bootstrap\n+\n+.PHONY: configure-stage4-libiconv maybe-configure-stage4-libiconv\n+maybe-configure-stage4-libiconv:\n+@if libiconv-bootstrap\n+maybe-configure-stage4-libiconv: configure-stage4-libiconv\n+configure-stage4-libiconv:\n+\t@[ $(current_stage) = stage4 ] || $(MAKE) stage4-start\n+\t@$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE4_TFLAGS)\"; \\\n+\ttest ! -f $(HOST_SUBDIR)/libiconv/Makefile || exit 0; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS) \\\n+\tCFLAGS=\"$(STAGE4_CFLAGS)\"; export CFLAGS; \\\n+\tCXXFLAGS=\"$(STAGE4_CXXFLAGS)\"; export CXXFLAGS; \\\n+\tLIBCFLAGS=\"$(STAGE4_CFLAGS)\"; export LIBCFLAGS;  \\\n+\techo Configuring stage 4 in $(HOST_SUBDIR)/libiconv; \\\n+\t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv; \\\n+\tcd $(HOST_SUBDIR)/libiconv || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  /* | [A-Za-z]:[\\\\/]*) topdir=$(srcdir) ;; \\\n+\t  *) topdir=`echo $(HOST_SUBDIR)/libiconv/ | \\\n+\t\tsed -e 's,\\./,,g' -e 's,[^/]*/,../,g' `$(srcdir) ;; \\\n+\tesac; \\\n+\tmodule_srcdir=libiconv; \\\n+\t$(SHELL) $$s/$$module_srcdir/configure \\\n+\t  --srcdir=$${topdir}/$$module_srcdir \\\n+\t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n+\t  --target=${target_alias} \\\n+\t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n+\t  $(STAGE4_CONFIGURE_FLAGS) \\\n+\t  --disable-shared\n+@endif libiconv-bootstrap\n+\n+.PHONY: configure-stageprofile-libiconv maybe-configure-stageprofile-libiconv\n+maybe-configure-stageprofile-libiconv:\n+@if libiconv-bootstrap\n+maybe-configure-stageprofile-libiconv: configure-stageprofile-libiconv\n+configure-stageprofile-libiconv:\n+\t@[ $(current_stage) = stageprofile ] || $(MAKE) stageprofile-start\n+\t@$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGEprofile_TFLAGS)\"; \\\n+\ttest ! -f $(HOST_SUBDIR)/libiconv/Makefile || exit 0; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS) \\\n+\tCFLAGS=\"$(STAGEprofile_CFLAGS)\"; export CFLAGS; \\\n+\tCXXFLAGS=\"$(STAGEprofile_CXXFLAGS)\"; export CXXFLAGS; \\\n+\tLIBCFLAGS=\"$(STAGEprofile_CFLAGS)\"; export LIBCFLAGS;  \\\n+\techo Configuring stage profile in $(HOST_SUBDIR)/libiconv; \\\n+\t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv; \\\n+\tcd $(HOST_SUBDIR)/libiconv || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  /* | [A-Za-z]:[\\\\/]*) topdir=$(srcdir) ;; \\\n+\t  *) topdir=`echo $(HOST_SUBDIR)/libiconv/ | \\\n+\t\tsed -e 's,\\./,,g' -e 's,[^/]*/,../,g' `$(srcdir) ;; \\\n+\tesac; \\\n+\tmodule_srcdir=libiconv; \\\n+\t$(SHELL) $$s/$$module_srcdir/configure \\\n+\t  --srcdir=$${topdir}/$$module_srcdir \\\n+\t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n+\t  --target=${target_alias} \\\n+\t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n+\t  $(STAGEprofile_CONFIGURE_FLAGS) \\\n+\t  --disable-shared\n+@endif libiconv-bootstrap\n+\n+.PHONY: configure-stagefeedback-libiconv maybe-configure-stagefeedback-libiconv\n+maybe-configure-stagefeedback-libiconv:\n+@if libiconv-bootstrap\n+maybe-configure-stagefeedback-libiconv: configure-stagefeedback-libiconv\n+configure-stagefeedback-libiconv:\n+\t@[ $(current_stage) = stagefeedback ] || $(MAKE) stagefeedback-start\n+\t@$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGEfeedback_TFLAGS)\"; \\\n+\ttest ! -f $(HOST_SUBDIR)/libiconv/Makefile || exit 0; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS) \\\n+\tCFLAGS=\"$(STAGEfeedback_CFLAGS)\"; export CFLAGS; \\\n+\tCXXFLAGS=\"$(STAGEfeedback_CXXFLAGS)\"; export CXXFLAGS; \\\n+\tLIBCFLAGS=\"$(STAGEfeedback_CFLAGS)\"; export LIBCFLAGS;  \\\n+\techo Configuring stage feedback in $(HOST_SUBDIR)/libiconv; \\\n+\t$(SHELL) $(srcdir)/mkinstalldirs $(HOST_SUBDIR)/libiconv; \\\n+\tcd $(HOST_SUBDIR)/libiconv || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  /* | [A-Za-z]:[\\\\/]*) topdir=$(srcdir) ;; \\\n+\t  *) topdir=`echo $(HOST_SUBDIR)/libiconv/ | \\\n+\t\tsed -e 's,\\./,,g' -e 's,[^/]*/,../,g' `$(srcdir) ;; \\\n+\tesac; \\\n+\tmodule_srcdir=libiconv; \\\n+\t$(SHELL) $$s/$$module_srcdir/configure \\\n+\t  --srcdir=$${topdir}/$$module_srcdir \\\n+\t  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \\\n+\t  --target=${target_alias} \\\n+\t  --with-build-libsubdir=$(HOST_SUBDIR) \\\n+\t  $(STAGEfeedback_CONFIGURE_FLAGS) \\\n+\t  --disable-shared\n+@endif libiconv-bootstrap\n+\n+\n+\n \n \n .PHONY: all-libiconv maybe-all-libiconv\n@@ -24169,7 +24375,6 @@ all-libiconv: stage_current\n TARGET-libiconv=all\n maybe-all-libiconv: all-libiconv\n all-libiconv: configure-libiconv\n-\t@: $(MAKE); $(unstage)\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(HOST_EXPORTS)  \\\n@@ -24180,6 +24385,255 @@ all-libiconv: configure-libiconv\n \n \n \n+.PHONY: all-stage1-libiconv maybe-all-stage1-libiconv\n+.PHONY: clean-stage1-libiconv maybe-clean-stage1-libiconv\n+maybe-all-stage1-libiconv:\n+maybe-clean-stage1-libiconv:\n+@if libiconv-bootstrap\n+maybe-all-stage1-libiconv: all-stage1-libiconv\n+all-stage1: all-stage1-libiconv\n+TARGET-stage1-libiconv = $(TARGET-libiconv)\n+all-stage1-libiconv: configure-stage1-libiconv\n+\t@[ $(current_stage) = stage1 ] || $(MAKE) stage1-start\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE1_TFLAGS)\"; \\\n+\t$(HOST_EXPORTS)  \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(BASE_FLAGS_TO_PASS) \\\n+\t\tCFLAGS=\"$(STAGE1_CFLAGS)\" \\\n+\t\tCXXFLAGS=\"$(STAGE1_CXXFLAGS)\" \\\n+\t\tLIBCFLAGS=\"$(LIBCFLAGS)\" \\\n+\t\tCFLAGS_FOR_TARGET=\"$(CFLAGS_FOR_TARGET)\" \\\n+\t\tCXXFLAGS_FOR_TARGET=\"$(CXXFLAGS_FOR_TARGET)\" \\\n+\t\tLIBCFLAGS_FOR_TARGET=\"$(LIBCFLAGS_FOR_TARGET)\" \\\n+\t\t$(EXTRA_HOST_FLAGS)  \\\n+\t\t$(STAGE1_FLAGS_TO_PASS)  \\\n+\t\tTFLAGS=\"$(STAGE1_TFLAGS)\" \\\n+\t\t$(TARGET-stage1-libiconv)\n+\n+maybe-clean-stage1-libiconv: clean-stage1-libiconv\n+clean-stage1: clean-stage1-libiconv\n+clean-stage1-libiconv:\n+\t@if [ $(current_stage) = stage1 ]; then \\\n+\t  [ -f $(HOST_SUBDIR)/libiconv/Makefile ] || exit 0; \\\n+\telse \\\n+\t  [ -f $(HOST_SUBDIR)/stage1-libiconv/Makefile ] || exit 0; \\\n+\t  $(MAKE) stage1-start; \\\n+\tfi; \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(EXTRA_HOST_FLAGS)  \\\n+\t$(STAGE1_FLAGS_TO_PASS)  clean\n+@endif libiconv-bootstrap\n+\n+\n+.PHONY: all-stage2-libiconv maybe-all-stage2-libiconv\n+.PHONY: clean-stage2-libiconv maybe-clean-stage2-libiconv\n+maybe-all-stage2-libiconv:\n+maybe-clean-stage2-libiconv:\n+@if libiconv-bootstrap\n+maybe-all-stage2-libiconv: all-stage2-libiconv\n+all-stage2: all-stage2-libiconv\n+TARGET-stage2-libiconv = $(TARGET-libiconv)\n+all-stage2-libiconv: configure-stage2-libiconv\n+\t@[ $(current_stage) = stage2 ] || $(MAKE) stage2-start\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE2_TFLAGS)\"; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS)  \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(BASE_FLAGS_TO_PASS) \\\n+\t\tCFLAGS=\"$(STAGE2_CFLAGS)\" \\\n+\t\tCXXFLAGS=\"$(STAGE2_CXXFLAGS)\" \\\n+\t\tLIBCFLAGS=\"$(STAGE2_CFLAGS)\" \\\n+\t\tCFLAGS_FOR_TARGET=\"$(CFLAGS_FOR_TARGET)\" \\\n+\t\tCXXFLAGS_FOR_TARGET=\"$(CXXFLAGS_FOR_TARGET)\" \\\n+\t\tLIBCFLAGS_FOR_TARGET=\"$(LIBCFLAGS_FOR_TARGET)\" \\\n+\t\t$(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  \\\n+\t\tTFLAGS=\"$(STAGE2_TFLAGS)\" \\\n+\t\t$(TARGET-stage2-libiconv)\n+\n+maybe-clean-stage2-libiconv: clean-stage2-libiconv\n+clean-stage2: clean-stage2-libiconv\n+clean-stage2-libiconv:\n+\t@if [ $(current_stage) = stage2 ]; then \\\n+\t  [ -f $(HOST_SUBDIR)/libiconv/Makefile ] || exit 0; \\\n+\telse \\\n+\t  [ -f $(HOST_SUBDIR)/stage2-libiconv/Makefile ] || exit 0; \\\n+\t  $(MAKE) stage2-start; \\\n+\tfi; \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  clean\n+@endif libiconv-bootstrap\n+\n+\n+.PHONY: all-stage3-libiconv maybe-all-stage3-libiconv\n+.PHONY: clean-stage3-libiconv maybe-clean-stage3-libiconv\n+maybe-all-stage3-libiconv:\n+maybe-clean-stage3-libiconv:\n+@if libiconv-bootstrap\n+maybe-all-stage3-libiconv: all-stage3-libiconv\n+all-stage3: all-stage3-libiconv\n+TARGET-stage3-libiconv = $(TARGET-libiconv)\n+all-stage3-libiconv: configure-stage3-libiconv\n+\t@[ $(current_stage) = stage3 ] || $(MAKE) stage3-start\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE3_TFLAGS)\"; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS)  \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(BASE_FLAGS_TO_PASS) \\\n+\t\tCFLAGS=\"$(STAGE3_CFLAGS)\" \\\n+\t\tCXXFLAGS=\"$(STAGE3_CXXFLAGS)\" \\\n+\t\tLIBCFLAGS=\"$(STAGE3_CFLAGS)\" \\\n+\t\tCFLAGS_FOR_TARGET=\"$(CFLAGS_FOR_TARGET)\" \\\n+\t\tCXXFLAGS_FOR_TARGET=\"$(CXXFLAGS_FOR_TARGET)\" \\\n+\t\tLIBCFLAGS_FOR_TARGET=\"$(LIBCFLAGS_FOR_TARGET)\" \\\n+\t\t$(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  \\\n+\t\tTFLAGS=\"$(STAGE3_TFLAGS)\" \\\n+\t\t$(TARGET-stage3-libiconv)\n+\n+maybe-clean-stage3-libiconv: clean-stage3-libiconv\n+clean-stage3: clean-stage3-libiconv\n+clean-stage3-libiconv:\n+\t@if [ $(current_stage) = stage3 ]; then \\\n+\t  [ -f $(HOST_SUBDIR)/libiconv/Makefile ] || exit 0; \\\n+\telse \\\n+\t  [ -f $(HOST_SUBDIR)/stage3-libiconv/Makefile ] || exit 0; \\\n+\t  $(MAKE) stage3-start; \\\n+\tfi; \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  clean\n+@endif libiconv-bootstrap\n+\n+\n+.PHONY: all-stage4-libiconv maybe-all-stage4-libiconv\n+.PHONY: clean-stage4-libiconv maybe-clean-stage4-libiconv\n+maybe-all-stage4-libiconv:\n+maybe-clean-stage4-libiconv:\n+@if libiconv-bootstrap\n+maybe-all-stage4-libiconv: all-stage4-libiconv\n+all-stage4: all-stage4-libiconv\n+TARGET-stage4-libiconv = $(TARGET-libiconv)\n+all-stage4-libiconv: configure-stage4-libiconv\n+\t@[ $(current_stage) = stage4 ] || $(MAKE) stage4-start\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGE4_TFLAGS)\"; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS)  \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(BASE_FLAGS_TO_PASS) \\\n+\t\tCFLAGS=\"$(STAGE4_CFLAGS)\" \\\n+\t\tCXXFLAGS=\"$(STAGE4_CXXFLAGS)\" \\\n+\t\tLIBCFLAGS=\"$(STAGE4_CFLAGS)\" \\\n+\t\tCFLAGS_FOR_TARGET=\"$(CFLAGS_FOR_TARGET)\" \\\n+\t\tCXXFLAGS_FOR_TARGET=\"$(CXXFLAGS_FOR_TARGET)\" \\\n+\t\tLIBCFLAGS_FOR_TARGET=\"$(LIBCFLAGS_FOR_TARGET)\" \\\n+\t\t$(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  \\\n+\t\tTFLAGS=\"$(STAGE4_TFLAGS)\" \\\n+\t\t$(TARGET-stage4-libiconv)\n+\n+maybe-clean-stage4-libiconv: clean-stage4-libiconv\n+clean-stage4: clean-stage4-libiconv\n+clean-stage4-libiconv:\n+\t@if [ $(current_stage) = stage4 ]; then \\\n+\t  [ -f $(HOST_SUBDIR)/libiconv/Makefile ] || exit 0; \\\n+\telse \\\n+\t  [ -f $(HOST_SUBDIR)/stage4-libiconv/Makefile ] || exit 0; \\\n+\t  $(MAKE) stage4-start; \\\n+\tfi; \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  clean\n+@endif libiconv-bootstrap\n+\n+\n+.PHONY: all-stageprofile-libiconv maybe-all-stageprofile-libiconv\n+.PHONY: clean-stageprofile-libiconv maybe-clean-stageprofile-libiconv\n+maybe-all-stageprofile-libiconv:\n+maybe-clean-stageprofile-libiconv:\n+@if libiconv-bootstrap\n+maybe-all-stageprofile-libiconv: all-stageprofile-libiconv\n+all-stageprofile: all-stageprofile-libiconv\n+TARGET-stageprofile-libiconv = $(TARGET-libiconv)\n+all-stageprofile-libiconv: configure-stageprofile-libiconv\n+\t@[ $(current_stage) = stageprofile ] || $(MAKE) stageprofile-start\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGEprofile_TFLAGS)\"; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS)  \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(BASE_FLAGS_TO_PASS) \\\n+\t\tCFLAGS=\"$(STAGEprofile_CFLAGS)\" \\\n+\t\tCXXFLAGS=\"$(STAGEprofile_CXXFLAGS)\" \\\n+\t\tLIBCFLAGS=\"$(STAGEprofile_CFLAGS)\" \\\n+\t\tCFLAGS_FOR_TARGET=\"$(CFLAGS_FOR_TARGET)\" \\\n+\t\tCXXFLAGS_FOR_TARGET=\"$(CXXFLAGS_FOR_TARGET)\" \\\n+\t\tLIBCFLAGS_FOR_TARGET=\"$(LIBCFLAGS_FOR_TARGET)\" \\\n+\t\t$(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  \\\n+\t\tTFLAGS=\"$(STAGEprofile_TFLAGS)\" \\\n+\t\t$(TARGET-stageprofile-libiconv)\n+\n+maybe-clean-stageprofile-libiconv: clean-stageprofile-libiconv\n+clean-stageprofile: clean-stageprofile-libiconv\n+clean-stageprofile-libiconv:\n+\t@if [ $(current_stage) = stageprofile ]; then \\\n+\t  [ -f $(HOST_SUBDIR)/libiconv/Makefile ] || exit 0; \\\n+\telse \\\n+\t  [ -f $(HOST_SUBDIR)/stageprofile-libiconv/Makefile ] || exit 0; \\\n+\t  $(MAKE) stageprofile-start; \\\n+\tfi; \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  clean\n+@endif libiconv-bootstrap\n+\n+\n+.PHONY: all-stagefeedback-libiconv maybe-all-stagefeedback-libiconv\n+.PHONY: clean-stagefeedback-libiconv maybe-clean-stagefeedback-libiconv\n+maybe-all-stagefeedback-libiconv:\n+maybe-clean-stagefeedback-libiconv:\n+@if libiconv-bootstrap\n+maybe-all-stagefeedback-libiconv: all-stagefeedback-libiconv\n+all-stagefeedback: all-stagefeedback-libiconv\n+TARGET-stagefeedback-libiconv = $(TARGET-libiconv)\n+all-stagefeedback-libiconv: configure-stagefeedback-libiconv\n+\t@[ $(current_stage) = stagefeedback ] || $(MAKE) stagefeedback-start\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tTFLAGS=\"$(STAGEfeedback_TFLAGS)\"; \\\n+\t$(HOST_EXPORTS) \\\n+\t$(POSTSTAGE1_HOST_EXPORTS)  \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(BASE_FLAGS_TO_PASS) \\\n+\t\tCFLAGS=\"$(STAGEfeedback_CFLAGS)\" \\\n+\t\tCXXFLAGS=\"$(STAGEfeedback_CXXFLAGS)\" \\\n+\t\tLIBCFLAGS=\"$(STAGEfeedback_CFLAGS)\" \\\n+\t\tCFLAGS_FOR_TARGET=\"$(CFLAGS_FOR_TARGET)\" \\\n+\t\tCXXFLAGS_FOR_TARGET=\"$(CXXFLAGS_FOR_TARGET)\" \\\n+\t\tLIBCFLAGS_FOR_TARGET=\"$(LIBCFLAGS_FOR_TARGET)\" \\\n+\t\t$(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  \\\n+\t\tTFLAGS=\"$(STAGEfeedback_TFLAGS)\" \\\n+\t\t$(TARGET-stagefeedback-libiconv)\n+\n+maybe-clean-stagefeedback-libiconv: clean-stagefeedback-libiconv\n+clean-stagefeedback: clean-stagefeedback-libiconv\n+clean-stagefeedback-libiconv:\n+\t@if [ $(current_stage) = stagefeedback ]; then \\\n+\t  [ -f $(HOST_SUBDIR)/libiconv/Makefile ] || exit 0; \\\n+\telse \\\n+\t  [ -f $(HOST_SUBDIR)/stagefeedback-libiconv/Makefile ] || exit 0; \\\n+\t  $(MAKE) stagefeedback-start; \\\n+\tfi; \\\n+\tcd $(HOST_SUBDIR)/libiconv && \\\n+\t$(MAKE) $(EXTRA_HOST_FLAGS) $(POSTSTAGE1_FLAGS_TO_PASS)  clean\n+@endif libiconv-bootstrap\n+\n+\n+\n+\n \n .PHONY: check-libiconv maybe-check-libiconv\n maybe-check-libiconv:\n@@ -24190,9 +24644,9 @@ check-libiconv:\n \t@: $(MAKE); $(unstage)\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(HOST_EXPORTS)  \\\n+\t$(HOST_EXPORTS) $(EXTRA_HOST_EXPORTS) \\\n \t(cd $(HOST_SUBDIR)/libiconv && \\\n-\t  $(MAKE) $(FLAGS_TO_PASS)  check)\n+\t  $(MAKE) $(FLAGS_TO_PASS)  $(EXTRA_BOOTSTRAP_FLAGS) check)\n \n @endif libiconv\n \n@@ -24221,24 +24675,8 @@ maybe-info-libiconv:\n @if libiconv\n maybe-info-libiconv: info-libiconv\n \n-info-libiconv: \\\n-    configure-libiconv \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f ./libiconv/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(HOST_EXPORTS) \\\n-\tfor flag in $(EXTRA_HOST_FLAGS) ; do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\techo \"Doing info in libiconv\"; \\\n-\t(cd $(HOST_SUBDIR)/libiconv && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t          info) \\\n-\t  || exit 1\n+# libiconv doesn't support info.\n+info-libiconv:\n \n @endif libiconv\n \n@@ -24249,7 +24687,6 @@ maybe-dvi-libiconv: dvi-libiconv\n \n dvi-libiconv: \\\n     configure-libiconv \n-\t@: $(MAKE); $(unstage)\n \t@[ -f ./libiconv/Makefile ] || exit 0; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -24273,24 +24710,8 @@ maybe-pdf-libiconv:\n @if libiconv\n maybe-pdf-libiconv: pdf-libiconv\n \n-pdf-libiconv: \\\n-    configure-libiconv \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f ./libiconv/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(HOST_EXPORTS) \\\n-\tfor flag in $(EXTRA_HOST_FLAGS) ; do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\techo \"Doing pdf in libiconv\"; \\\n-\t(cd $(HOST_SUBDIR)/libiconv && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t          pdf) \\\n-\t  || exit 1\n+# libiconv doesn't support pdf.\n+pdf-libiconv:\n \n @endif libiconv\n \n@@ -24299,24 +24720,8 @@ maybe-html-libiconv:\n @if libiconv\n maybe-html-libiconv: html-libiconv\n \n-html-libiconv: \\\n-    configure-libiconv \n-\t@: $(MAKE); $(unstage)\n-\t@[ -f ./libiconv/Makefile ] || exit 0; \\\n-\tr=`${PWD_COMMAND}`; export r; \\\n-\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n-\t$(HOST_EXPORTS) \\\n-\tfor flag in $(EXTRA_HOST_FLAGS) ; do \\\n-\t  eval `echo \"$$flag\" | sed -e \"s|^\\([^=]*\\)=\\(.*\\)|\\1='\\2'; export \\1|\"`; \\\n-\tdone; \\\n-\techo \"Doing html in libiconv\"; \\\n-\t(cd $(HOST_SUBDIR)/libiconv && \\\n-\t  $(MAKE) $(BASE_FLAGS_TO_PASS) \"AR=$${AR}\" \"AS=$${AS}\" \\\n-\t          \"CC=$${CC}\" \"CXX=$${CXX}\" \"LD=$${LD}\" \"NM=$${NM}\" \\\n-\t          \"RANLIB=$${RANLIB}\" \\\n-\t          \"DLLTOOL=$${DLLTOOL}\" \"WINDRES=$${WINDRES}\" \"WINDMC=$${WINDMC}\" \\\n-\t          html) \\\n-\t  || exit 1\n+# libiconv doesn't support html.\n+html-libiconv:\n \n @endif libiconv\n \n@@ -24327,7 +24732,6 @@ maybe-TAGS-libiconv: TAGS-libiconv\n \n TAGS-libiconv: \\\n     configure-libiconv \n-\t@: $(MAKE); $(unstage)\n \t@[ -f ./libiconv/Makefile ] || exit 0; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -24383,7 +24787,6 @@ maybe-installcheck-libiconv: installcheck-libiconv\n \n installcheck-libiconv: \\\n     configure-libiconv \n-\t@: $(MAKE); $(unstage)\n \t@[ -f ./libiconv/Makefile ] || exit 0; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -24408,7 +24811,6 @@ maybe-mostlyclean-libiconv:\n maybe-mostlyclean-libiconv: mostlyclean-libiconv\n \n mostlyclean-libiconv: \n-\t@: $(MAKE); $(unstage)\n \t@[ -f ./libiconv/Makefile ] || exit 0; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -24433,7 +24835,6 @@ maybe-clean-libiconv:\n maybe-clean-libiconv: clean-libiconv\n \n clean-libiconv: \n-\t@: $(MAKE); $(unstage)\n \t@[ -f ./libiconv/Makefile ] || exit 0; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -24458,7 +24859,6 @@ maybe-distclean-libiconv:\n maybe-distclean-libiconv: distclean-libiconv\n \n distclean-libiconv: \n-\t@: $(MAKE); $(unstage)\n \t@[ -f ./libiconv/Makefile ] || exit 0; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -24483,7 +24883,6 @@ maybe-maintainer-clean-libiconv:\n maybe-maintainer-clean-libiconv: maintainer-clean-libiconv\n \n maintainer-clean-libiconv: \n-\t@: $(MAKE); $(unstage)\n \t@[ -f ./libiconv/Makefile ] || exit 0; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -47537,6 +47936,11 @@ stage1-start::\n \t  mkdir stage1-libiberty-linker-plugin; \\\n \tmv stage1-libiberty-linker-plugin libiberty-linker-plugin\n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@cd $(HOST_SUBDIR); [ -d stage1-libiconv ] || \\\n+\t  mkdir stage1-libiconv; \\\n+\tmv stage1-libiconv libiconv\n+@endif libiconv\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage1-zlib ] || \\\n \t  mkdir stage1-zlib; \\\n@@ -47647,6 +48051,11 @@ stage1-end::\n \t  cd $(HOST_SUBDIR); mv libiberty-linker-plugin stage1-libiberty-linker-plugin; \\\n \tfi\n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@if test -d $(HOST_SUBDIR)/libiconv; then \\\n+\t  cd $(HOST_SUBDIR); mv libiconv stage1-libiconv; \\\n+\tfi\n+@endif libiconv\n @if zlib\n \t@if test -d $(HOST_SUBDIR)/zlib; then \\\n \t  cd $(HOST_SUBDIR); mv zlib stage1-zlib; \\\n@@ -47819,6 +48228,12 @@ stage2-start::\n \tmv stage2-libiberty-linker-plugin libiberty-linker-plugin; \\\n \tmv stage1-libiberty-linker-plugin prev-libiberty-linker-plugin || test -f stage1-lean \n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@cd $(HOST_SUBDIR); [ -d stage2-libiconv ] || \\\n+\t  mkdir stage2-libiconv; \\\n+\tmv stage2-libiconv libiconv; \\\n+\tmv stage1-libiconv prev-libiconv || test -f stage1-lean \n+@endif libiconv\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage2-zlib ] || \\\n \t  mkdir stage2-zlib; \\\n@@ -47951,6 +48366,12 @@ stage2-end::\n \t  mv prev-libiberty-linker-plugin stage1-libiberty-linker-plugin; : ; \\\n \tfi\n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@if test -d $(HOST_SUBDIR)/libiconv; then \\\n+\t  cd $(HOST_SUBDIR); mv libiconv stage2-libiconv; \\\n+\t  mv prev-libiconv stage1-libiconv; : ; \\\n+\tfi\n+@endif libiconv\n @if zlib\n \t@if test -d $(HOST_SUBDIR)/zlib; then \\\n \t  cd $(HOST_SUBDIR); mv zlib stage2-zlib; \\\n@@ -48149,6 +48570,12 @@ stage3-start::\n \tmv stage3-libiberty-linker-plugin libiberty-linker-plugin; \\\n \tmv stage2-libiberty-linker-plugin prev-libiberty-linker-plugin || test -f stage2-lean \n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@cd $(HOST_SUBDIR); [ -d stage3-libiconv ] || \\\n+\t  mkdir stage3-libiconv; \\\n+\tmv stage3-libiconv libiconv; \\\n+\tmv stage2-libiconv prev-libiconv || test -f stage2-lean \n+@endif libiconv\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage3-zlib ] || \\\n \t  mkdir stage3-zlib; \\\n@@ -48281,6 +48708,12 @@ stage3-end::\n \t  mv prev-libiberty-linker-plugin stage2-libiberty-linker-plugin; : ; \\\n \tfi\n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@if test -d $(HOST_SUBDIR)/libiconv; then \\\n+\t  cd $(HOST_SUBDIR); mv libiconv stage3-libiconv; \\\n+\t  mv prev-libiconv stage2-libiconv; : ; \\\n+\tfi\n+@endif libiconv\n @if zlib\n \t@if test -d $(HOST_SUBDIR)/zlib; then \\\n \t  cd $(HOST_SUBDIR); mv zlib stage3-zlib; \\\n@@ -48535,6 +48968,12 @@ stage4-start::\n \tmv stage4-libiberty-linker-plugin libiberty-linker-plugin; \\\n \tmv stage3-libiberty-linker-plugin prev-libiberty-linker-plugin || test -f stage3-lean \n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@cd $(HOST_SUBDIR); [ -d stage4-libiconv ] || \\\n+\t  mkdir stage4-libiconv; \\\n+\tmv stage4-libiconv libiconv; \\\n+\tmv stage3-libiconv prev-libiconv || test -f stage3-lean \n+@endif libiconv\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage4-zlib ] || \\\n \t  mkdir stage4-zlib; \\\n@@ -48667,6 +49106,12 @@ stage4-end::\n \t  mv prev-libiberty-linker-plugin stage3-libiberty-linker-plugin; : ; \\\n \tfi\n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@if test -d $(HOST_SUBDIR)/libiconv; then \\\n+\t  cd $(HOST_SUBDIR); mv libiconv stage4-libiconv; \\\n+\t  mv prev-libiconv stage3-libiconv; : ; \\\n+\tfi\n+@endif libiconv\n @if zlib\n \t@if test -d $(HOST_SUBDIR)/zlib; then \\\n \t  cd $(HOST_SUBDIR); mv zlib stage4-zlib; \\\n@@ -48909,6 +49354,12 @@ stageprofile-start::\n \tmv stageprofile-libiberty-linker-plugin libiberty-linker-plugin; \\\n \tmv stage1-libiberty-linker-plugin prev-libiberty-linker-plugin || test -f stage1-lean \n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@cd $(HOST_SUBDIR); [ -d stageprofile-libiconv ] || \\\n+\t  mkdir stageprofile-libiconv; \\\n+\tmv stageprofile-libiconv libiconv; \\\n+\tmv stage1-libiconv prev-libiconv || test -f stage1-lean \n+@endif libiconv\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-zlib ] || \\\n \t  mkdir stageprofile-zlib; \\\n@@ -49041,6 +49492,12 @@ stageprofile-end::\n \t  mv prev-libiberty-linker-plugin stage1-libiberty-linker-plugin; : ; \\\n \tfi\n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@if test -d $(HOST_SUBDIR)/libiconv; then \\\n+\t  cd $(HOST_SUBDIR); mv libiconv stageprofile-libiconv; \\\n+\t  mv prev-libiconv stage1-libiconv; : ; \\\n+\tfi\n+@endif libiconv\n @if zlib\n \t@if test -d $(HOST_SUBDIR)/zlib; then \\\n \t  cd $(HOST_SUBDIR); mv zlib stageprofile-zlib; \\\n@@ -49216,6 +49673,12 @@ stagefeedback-start::\n \tmv stagefeedback-libiberty-linker-plugin libiberty-linker-plugin; \\\n \tmv stageprofile-libiberty-linker-plugin prev-libiberty-linker-plugin || test -f stageprofile-lean \n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@cd $(HOST_SUBDIR); [ -d stagefeedback-libiconv ] || \\\n+\t  mkdir stagefeedback-libiconv; \\\n+\tmv stagefeedback-libiconv libiconv; \\\n+\tmv stageprofile-libiconv prev-libiconv || test -f stageprofile-lean \n+@endif libiconv\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-zlib ] || \\\n \t  mkdir stagefeedback-zlib; \\\n@@ -49348,6 +49811,12 @@ stagefeedback-end::\n \t  mv prev-libiberty-linker-plugin stageprofile-libiberty-linker-plugin; : ; \\\n \tfi\n @endif libiberty-linker-plugin\n+@if libiconv\n+\t@if test -d $(HOST_SUBDIR)/libiconv; then \\\n+\t  cd $(HOST_SUBDIR); mv libiconv stagefeedback-libiconv; \\\n+\t  mv prev-libiconv stageprofile-libiconv; : ; \\\n+\tfi\n+@endif libiconv\n @if zlib\n \t@if test -d $(HOST_SUBDIR)/zlib; then \\\n \t  cd $(HOST_SUBDIR); mv zlib stagefeedback-zlib; \\\n@@ -49668,6 +50137,14 @@ configure-stage3-gcc: maybe-all-stage3-libelf\n configure-stage4-gcc: maybe-all-stage4-libelf\n configure-stageprofile-gcc: maybe-all-stageprofile-libelf\n configure-stagefeedback-gcc: maybe-all-stagefeedback-libelf\n+configure-gcc: maybe-all-libiconv\n+\n+configure-stage1-gcc: maybe-all-stage1-libiconv\n+configure-stage2-gcc: maybe-all-stage2-libiconv\n+configure-stage3-gcc: maybe-all-stage3-libiconv\n+configure-stage4-gcc: maybe-all-stage4-libiconv\n+configure-stageprofile-gcc: maybe-all-stageprofile-libiconv\n+configure-stagefeedback-gcc: maybe-all-stagefeedback-libiconv\n all-gcc: all-libiberty\n \n all-stage1-gcc: all-stage1-libiberty\n@@ -49812,6 +50289,14 @@ all-stage3-gcc: maybe-all-stage3-lto-plugin\n all-stage4-gcc: maybe-all-stage4-lto-plugin\n all-stageprofile-gcc: maybe-all-stageprofile-lto-plugin\n all-stagefeedback-gcc: maybe-all-stagefeedback-lto-plugin\n+all-gcc: maybe-all-libiconv\n+\n+all-stage1-gcc: maybe-all-stage1-libiconv\n+all-stage2-gcc: maybe-all-stage2-libiconv\n+all-stage3-gcc: maybe-all-stage3-libiconv\n+all-stage4-gcc: maybe-all-stage4-libiconv\n+all-stageprofile-gcc: maybe-all-stageprofile-libiconv\n+all-stagefeedback-gcc: maybe-all-stagefeedback-libiconv\n info-gcc: maybe-all-build-libiberty\n \n info-stage1-gcc: maybe-all-build-libiberty\n@@ -49864,6 +50349,14 @@ configure-stage3-libcpp: maybe-configure-stage3-intl\n configure-stage4-libcpp: maybe-configure-stage4-intl\n configure-stageprofile-libcpp: maybe-configure-stageprofile-intl\n configure-stagefeedback-libcpp: maybe-configure-stagefeedback-intl\n+configure-libcpp: maybe-all-libiconv\n+\n+configure-stage1-libcpp: maybe-all-stage1-libiconv\n+configure-stage2-libcpp: maybe-all-stage2-libiconv\n+configure-stage3-libcpp: maybe-all-stage3-libiconv\n+configure-stage4-libcpp: maybe-all-stage4-libiconv\n+configure-stageprofile-libcpp: maybe-all-stageprofile-libiconv\n+configure-stagefeedback-libcpp: maybe-all-stagefeedback-libiconv\n all-libcpp: all-libiberty\n \n all-stage1-libcpp: all-stage1-libiberty\n@@ -49880,6 +50373,14 @@ all-stage3-libcpp: maybe-all-stage3-intl\n all-stage4-libcpp: maybe-all-stage4-intl\n all-stageprofile-libcpp: maybe-all-stageprofile-intl\n all-stagefeedback-libcpp: maybe-all-stagefeedback-intl\n+all-libcpp: maybe-all-libiconv\n+\n+all-stage1-libcpp: maybe-all-stage1-libiconv\n+all-stage2-libcpp: maybe-all-stage2-libiconv\n+all-stage3-libcpp: maybe-all-stage3-libiconv\n+all-stage4-libcpp: maybe-all-stage4-libiconv\n+all-stageprofile-libcpp: maybe-all-stageprofile-libiconv\n+all-stagefeedback-libcpp: maybe-all-stagefeedback-libiconv\n all-fixincludes: maybe-all-libiberty\n \n all-stage1-fixincludes: maybe-all-stage1-libiberty\n@@ -49910,6 +50411,14 @@ configure-libcc1: maybe-configure-gcc\n all-libcc1: maybe-all-gcc\n all-gotools: maybe-all-target-libgo\n all-utils: maybe-all-libiberty\n+configure-intl: maybe-all-libiconv\n+\n+configure-stage1-intl: maybe-all-stage1-libiconv\n+configure-stage2-intl: maybe-all-stage2-libiconv\n+configure-stage3-intl: maybe-all-stage3-libiconv\n+configure-stage4-intl: maybe-all-stage4-libiconv\n+configure-stageprofile-intl: maybe-all-stageprofile-libiconv\n+configure-stagefeedback-intl: maybe-all-stagefeedback-libiconv\n configure-mpfr: maybe-all-gmp\n \n configure-stage1-mpfr: maybe-all-stage1-gmp\n@@ -49934,6 +50443,14 @@ configure-stage3-isl: maybe-all-stage3-gmp\n configure-stage4-isl: maybe-all-stage4-gmp\n configure-stageprofile-isl: maybe-all-stageprofile-gmp\n configure-stagefeedback-isl: maybe-all-stagefeedback-gmp\n+all-intl: maybe-all-libiconv\n+\n+all-stage1-intl: maybe-all-stage1-libiconv\n+all-stage2-intl: maybe-all-stage2-libiconv\n+all-stage3-intl: maybe-all-stage3-libiconv\n+all-stage4-intl: maybe-all-stage4-libiconv\n+all-stageprofile-intl: maybe-all-stageprofile-libiconv\n+all-stagefeedback-intl: maybe-all-stagefeedback-libiconv\n configure-gdb: maybe-all-intl\n configure-gdb: maybe-configure-sim\n configure-gdb: maybe-all-bfd"}, {"sha": "75b4d94f0dc4d23a3e4eae8e31f423e1ffff9f63", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -1,3 +1,8 @@\n+2015-08-06  Yaakov Selkowitz  <yselkowi@redhat.com>\n+\n+\t* configure.ac: Define LIBICONV_DEP with in-tree libiconv.\n+\t* configure: Regenerate.\n+\n 2015-08-06    Ramana Radhakrishnan  <ramana.radhakrishnan@arm.com>\n \t      Jiong Wang  <jiong.wang@arm.com>\n "}, {"sha": "8e89dd9c6ebb39b56915e9133d243efbbc179eb2", "filename": "gcc/configure", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -10764,6 +10764,9 @@ _ACEOF\n \n # Until we have in-tree GNU iconv:\n LIBICONV_DEP=\n+if test -f \"$LTLIBICONV\"; then\n+  LIBICONV_DEP=$LTLIBICONV\n+fi\n \n \n \n@@ -18338,7 +18341,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 18341 \"configure\"\n+#line 18344 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -18444,7 +18447,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 18447 \"configure\"\n+#line 18450 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H"}, {"sha": "c7d5d327a2e0f3819270d11a7f25818bad8a4229", "filename": "gcc/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -1220,6 +1220,9 @@ AM_ICONV\n \n # Until we have in-tree GNU iconv:\n LIBICONV_DEP=\n+if test -f \"$LTLIBICONV\"; then\n+  LIBICONV_DEP=$LTLIBICONV\n+fi\n AC_SUBST(LIBICONV_DEP)\n \n AM_LC_MESSAGES"}, {"sha": "51915e7dbb8a818e82d66e646d500ff8a4aa1c1c", "filename": "intl/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/intl%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/intl%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/intl%2FChangeLog?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -1,3 +1,7 @@\n+2015-08-06  Yaakov Selkowitz  <yselkowi@redhat.com>\n+\n+\t* configure: Reflects renaming of configure.in to configure.ac\n+\n 2015-07-24  Micahel Darling  <darlingm@gmail.com>\n \n \tPR other/66259"}, {"sha": "77b5eb2f2b66b7968956d2516450a679af09a1e6", "filename": "intl/configure", "status": "modified", "additions": 268, "deletions": 612, "changes": 880, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/intl%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/intl%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/intl%2Fconfigure?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -609,8 +609,6 @@ CATOBJEXT\n USE_INCLUDED_LIBINTL\n BUILD_INCLUDED_LIBINTL\n INTLBISON\n-LTLIBICONV\n-LIBICONV\n GLIBC21\n ALLOCA\n EGREP\n@@ -684,9 +682,9 @@ ac_subst_files=''\n ac_user_opts='\n enable_option_checking\n enable_nls\n+with_libiconv_prefix\n with_gnu_ld\n enable_rpath\n-with_libiconv_prefix\n with_included_gettext\n with_libintl_prefix\n enable_maintainer_mode\n@@ -1319,9 +1317,9 @@ Optional Features:\n Optional Packages:\n   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]\n   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)\n+  --with-libiconv-prefix=DIR\n+                          search for libiconv in DIR/include and DIR/lib\n   --with-gnu-ld           assume the C compiler uses GNU ld default=no\n-  --with-libiconv-prefix[=DIR]  search for libiconv in DIR/include and DIR/lib\n-  --without-libiconv-prefix     don't search for libiconv in includedir and libdir\n   --with-included-gettext use the GNU gettext library included here\n   --with-libintl-prefix[=DIR]  search for libintl in DIR/include and DIR/lib\n   --without-libintl-prefix     don't search for libintl in includedir and libdir\n@@ -4849,640 +4847,136 @@ _ACEOF\n   fi\n \n \n-      if test \"X$prefix\" = \"XNONE\"; then\n-    acl_final_prefix=\"$ac_default_prefix\"\n-  else\n-    acl_final_prefix=\"$prefix\"\n-  fi\n-  if test \"X$exec_prefix\" = \"XNONE\"; then\n-    acl_final_exec_prefix='${prefix}'\n-  else\n-    acl_final_exec_prefix=\"$exec_prefix\"\n-  fi\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  eval acl_final_exec_prefix=\\\"$acl_final_exec_prefix\\\"\n-  prefix=\"$acl_save_prefix\"\n-\n-\n-# Check whether --with-gnu-ld was given.\n-if test \"${with_gnu_ld+set}\" = set; then :\n-  withval=$with_gnu_ld; test \"$withval\" = no || with_gnu_ld=yes\n-else\n-  with_gnu_ld=no\n-fi\n \n-# Prepare PATH_SEPARATOR.\n-# The user is always right.\n-if test \"${PATH_SEPARATOR+set}\" != set; then\n-  echo \"#! /bin/sh\" >conf$$.sh\n-  echo  \"exit 0\"   >>conf$$.sh\n-  chmod +x conf$$.sh\n-  if (PATH=\"/nonexistent;.\"; conf$$.sh) >/dev/null 2>&1; then\n-    PATH_SEPARATOR=';'\n-  else\n-    PATH_SEPARATOR=:\n-  fi\n-  rm -f conf$$.sh\n-fi\n-ac_prog=ld\n-if test \"$GCC\" = yes; then\n-  # Check if gcc -print-prog-name=ld gives a path.\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for ld used by GCC\" >&5\n-$as_echo_n \"checking for ld used by GCC... \" >&6; }\n-  case $host in\n-  *-*-mingw*)\n-    # gcc leaves a trailing carriage return which upsets mingw\n-    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\\015'` ;;\n-  *)\n-    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;\n-  esac\n-  case $ac_prog in\n-    # Accept absolute paths.\n-    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n-      re_direlt='/[^/][^/]*/\\.\\./'\n-      # Canonicalize the path of ld\n-      ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n-      while echo $ac_prog | grep \"$re_direlt\" > /dev/null 2>&1; do\n-\tac_prog=`echo $ac_prog| sed \"s%$re_direlt%/%\"`\n-      done\n-      test -z \"$LD\" && LD=\"$ac_prog\"\n-      ;;\n-  \"\")\n-    # If it fails, then pretend we aren't using GCC.\n-    ac_prog=ld\n-    ;;\n-  *)\n-    # If it is relative, then search for the first ld in PATH.\n-    with_gnu_ld=unknown\n-    ;;\n-  esac\n-elif test \"$with_gnu_ld\" = yes; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for GNU ld\" >&5\n-$as_echo_n \"checking for GNU ld... \" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for non-GNU ld\" >&5\n-$as_echo_n \"checking for non-GNU ld... \" >&6; }\n-fi\n-if test \"${acl_cv_path_LD+set}\" = set; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -z \"$LD\"; then\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n-  for ac_dir in $PATH; do\n-    test -z \"$ac_dir\" && ac_dir=.\n-    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n-      acl_cv_path_LD=\"$ac_dir/$ac_prog\"\n-      # Check to see if the program is GNU ld.  I'd rather use --version,\n-      # but apparently some GNU ld's only accept -v.\n-      # Break only if it was the GNU/non-GNU ld that we prefer.\n-      if \"$acl_cv_path_LD\" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then\n-\ttest \"$with_gnu_ld\" != no && break\n-      else\n-\ttest \"$with_gnu_ld\" != yes && break\n-      fi\n-    fi\n-  done\n-  IFS=\"$ac_save_ifs\"\n-else\n-  acl_cv_path_LD=\"$LD\" # Let the user override the test with a path.\n-fi\n-fi\n+  for ac_header in argz.h limits.h locale.h nl_types.h malloc.h stddef.h \\\n+stdlib.h string.h unistd.h sys/param.h\n+do :\n+  as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n+ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\"\n+eval as_val=\\$$as_ac_Header\n+   if test \"x$as_val\" = x\"\"yes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define `$as_echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n+_ACEOF\n \n-LD=\"$acl_cv_path_LD\"\n-if test -n \"$LD\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $LD\" >&5\n-$as_echo \"$LD\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-test -z \"$LD\" && as_fn_error \"no acceptable ld found in \\$PATH\" \"$LINENO\" 5\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld\" >&5\n-$as_echo_n \"checking if the linker ($LD) is GNU ld... \" >&6; }\n-if test \"${acl_cv_prog_gnu_ld+set}\" = set; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  # I'd rather use --version here, but apparently some GNU ld's only accept -v.\n-if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then\n-  acl_cv_prog_gnu_ld=yes\n-else\n-  acl_cv_prog_gnu_ld=no\n-fi\n fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $acl_cv_prog_gnu_ld\" >&5\n-$as_echo \"$acl_cv_prog_gnu_ld\" >&6; }\n-with_gnu_ld=$acl_cv_prog_gnu_ld\n-\n \n+done\n \n-                                                { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for shared library run path origin\" >&5\n-$as_echo_n \"checking for shared library run path origin... \" >&6; }\n-if test \"${acl_cv_rpath+set}\" = set; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-\n-    CC=\"$CC\" GCC=\"$GCC\" LDFLAGS=\"$LDFLAGS\" LD=\"$LD\" with_gnu_ld=\"$with_gnu_ld\" \\\n-    ${CONFIG_SHELL-/bin/sh} \"$ac_aux_dir/config.rpath\" \"$host\" > conftest.sh\n-    . ./conftest.sh\n-    rm -f ./conftest.sh\n-    acl_cv_rpath=done\n+  for ac_func in feof_unlocked fgets_unlocked getc_unlocked getcwd getegid \\\n+geteuid getgid getuid mempcpy munmap putenv setenv setlocale stpcpy \\\n+strcasecmp strdup strtoul tsearch __argz_count __argz_stringify __argz_next \\\n+__fsetlocking\n+do :\n+  as_ac_var=`$as_echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n+ac_fn_c_check_func \"$LINENO\" \"$ac_func\" \"$as_ac_var\"\n+eval as_val=\\$$as_ac_var\n+   if test \"x$as_val\" = x\"\"yes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define `$as_echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n+_ACEOF\n \n fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $acl_cv_rpath\" >&5\n-$as_echo \"$acl_cv_rpath\" >&6; }\n-  wl=\"$acl_cv_wl\"\n-  libext=\"$acl_cv_libext\"\n-  shlibext=\"$acl_cv_shlibext\"\n-  hardcode_libdir_flag_spec=\"$acl_cv_hardcode_libdir_flag_spec\"\n-  hardcode_libdir_separator=\"$acl_cv_hardcode_libdir_separator\"\n-  hardcode_direct=\"$acl_cv_hardcode_direct\"\n-  hardcode_minus_L=\"$acl_cv_hardcode_minus_L\"\n-    # Check whether --enable-rpath was given.\n-if test \"${enable_rpath+set}\" = set; then :\n-  enableval=$enable_rpath; :\n-else\n-  enable_rpath=yes\n-fi\n-\n-\n-\n-\n-\n-\n-\n-\n-    use_additional=yes\n+done\n \n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n \n-    eval additional_includedir=\\\"$includedir\\\"\n-    eval additional_libdir=\\\"$libdir\\\"\n \n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n \n \n # Check whether --with-libiconv-prefix was given.\n if test \"${with_libiconv_prefix+set}\" = set; then :\n   withval=$with_libiconv_prefix;\n-    if test \"X$withval\" = \"Xno\"; then\n-      use_additional=no\n-    else\n-      if test \"X$withval\" = \"X\"; then\n+    for dir in `echo \"$withval\" | tr : ' '`; do\n+      if test -d $dir/include; then LIBICONV_INCLUDE=\"-I$dir/include\"; fi\n+      if test -d $dir/lib; then LIBICONV_LIBDIR=\"-L$dir/lib\"; fi\n+    done\n \n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n+fi\n \n-          eval additional_includedir=\\\"$includedir\\\"\n-          eval additional_libdir=\\\"$libdir\\\"\n \n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n+  BUILD_LIBICONV_LIBDIRS=\"../libiconv/lib/.libs ../libiconv/lib/_libs\"\n+  BUILD_LIBICONV_INCLUDE=\"-I../libiconv/include\"\n \n-      else\n-        additional_includedir=\"$withval/include\"\n-        additional_libdir=\"$withval/lib\"\n-      fi\n-    fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for iconv\" >&5\n+$as_echo_n \"checking for iconv... \" >&6; }\n+if test \"${am_cv_func_iconv+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+\n+    am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n+    am_cv_lib_iconv=no\n+    am_cv_use_build_libiconv=no\n+    am_cv_build_libiconv_path=\n \n+    # First, try to find iconv in libc.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+#include <iconv.h>\n+int\n+main ()\n+{\n+iconv_t cd = iconv_open(\"\",\"\");\n+         iconv(cd,NULL,NULL,NULL,NULL);\n+         iconv_close(cd);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_link \"$LINENO\"; then :\n+  am_cv_func_iconv=yes\n fi\n+rm -f core conftest.err conftest.$ac_objext \\\n+    conftest$ac_exeext conftest.$ac_ext\n \n-      LIBICONV=\n-  LTLIBICONV=\n-  INCICONV=\n-  rpathdirs=\n-  ltrpathdirs=\n-  names_already_handled=\n-  names_next_round='iconv '\n-  while test -n \"$names_next_round\"; do\n-    names_this_round=\"$names_next_round\"\n-    names_next_round=\n-    for name in $names_this_round; do\n-      already_handled=\n-      for n in $names_already_handled; do\n-        if test \"$n\" = \"$name\"; then\n-          already_handled=yes\n-          break\n-        fi\n-      done\n-      if test -z \"$already_handled\"; then\n-        names_already_handled=\"$names_already_handled $name\"\n-                        uppername=`echo \"$name\" | sed -e 'y|abcdefghijklmnopqrstuvwxyz./-|ABCDEFGHIJKLMNOPQRSTUVWXYZ___|'`\n-        eval value=\\\"\\$HAVE_LIB$uppername\\\"\n-        if test -n \"$value\"; then\n-          if test \"$value\" = yes; then\n-            eval value=\\\"\\$LIB$uppername\\\"\n-            test -z \"$value\" || LIBICONV=\"${LIBICONV}${LIBICONV:+ }$value\"\n-            eval value=\\\"\\$LTLIB$uppername\\\"\n-            test -z \"$value\" || LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }$value\"\n-          else\n-                                    :\n-          fi\n-        else\n-                              found_dir=\n-          found_la=\n-          found_so=\n-          found_a=\n-          if test $use_additional = yes; then\n-            if test -n \"$shlibext\" && test -f \"$additional_libdir/lib$name.$shlibext\"; then\n-              found_dir=\"$additional_libdir\"\n-              found_so=\"$additional_libdir/lib$name.$shlibext\"\n-              if test -f \"$additional_libdir/lib$name.la\"; then\n-                found_la=\"$additional_libdir/lib$name.la\"\n-              fi\n-            else\n-              if test -f \"$additional_libdir/lib$name.$libext\"; then\n-                found_dir=\"$additional_libdir\"\n-                found_a=\"$additional_libdir/lib$name.$libext\"\n-                if test -f \"$additional_libdir/lib$name.la\"; then\n-                  found_la=\"$additional_libdir/lib$name.la\"\n-                fi\n-              fi\n-            fi\n-          fi\n-          if test \"X$found_dir\" = \"X\"; then\n-            for x in $LDFLAGS $LTLIBICONV; do\n-\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n-  eval x=\\\"$x\\\"\n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n-\n-              case \"$x\" in\n-                -L*)\n-                  dir=`echo \"X$x\" | sed -e 's/^X-L//'`\n-                  if test -n \"$shlibext\" && test -f \"$dir/lib$name.$shlibext\"; then\n-                    found_dir=\"$dir\"\n-                    found_so=\"$dir/lib$name.$shlibext\"\n-                    if test -f \"$dir/lib$name.la\"; then\n-                      found_la=\"$dir/lib$name.la\"\n-                    fi\n-                  else\n-                    if test -f \"$dir/lib$name.$libext\"; then\n-                      found_dir=\"$dir\"\n-                      found_a=\"$dir/lib$name.$libext\"\n-                      if test -f \"$dir/lib$name.la\"; then\n-                        found_la=\"$dir/lib$name.la\"\n-                      fi\n-                    fi\n-                  fi\n-                  ;;\n-              esac\n-              if test \"X$found_dir\" != \"X\"; then\n-                break\n-              fi\n-            done\n-          fi\n-          if test \"X$found_dir\" != \"X\"; then\n-                        LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-L$found_dir -l$name\"\n-            if test \"X$found_so\" != \"X\"; then\n-                                                        if test \"$enable_rpath\" = no || test \"X$found_dir\" = \"X/usr/lib\"; then\n-                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n-              else\n-                                                                                haveit=\n-                for x in $ltrpathdirs; do\n-                  if test \"X$x\" = \"X$found_dir\"; then\n-                    haveit=yes\n-                    break\n-                  fi\n-                done\n-                if test -z \"$haveit\"; then\n-                  ltrpathdirs=\"$ltrpathdirs $found_dir\"\n-                fi\n-                                if test \"$hardcode_direct\" = yes; then\n-                                                      LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n-                else\n-                  if test -n \"$hardcode_libdir_flag_spec\" && test \"$hardcode_minus_L\" = no; then\n-                                                            LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n-                                                            haveit=\n-                    for x in $rpathdirs; do\n-                      if test \"X$x\" = \"X$found_dir\"; then\n-                        haveit=yes\n-                        break\n-                      fi\n-                    done\n-                    if test -z \"$haveit\"; then\n-                      rpathdirs=\"$rpathdirs $found_dir\"\n-                    fi\n-                  else\n-                                                                                haveit=\n-                    for x in $LDFLAGS $LIBICONV; do\n-\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n-  eval x=\\\"$x\\\"\n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n-\n-                      if test \"X$x\" = \"X-L$found_dir\"; then\n-                        haveit=yes\n-                        break\n-                      fi\n-                    done\n-                    if test -z \"$haveit\"; then\n-                      LIBICONV=\"${LIBICONV}${LIBICONV:+ }-L$found_dir\"\n-                    fi\n-                    if test \"$hardcode_minus_L\" != no; then\n-                                                                                        LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_so\"\n-                    else\n-                                                                                                                                                                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }-l$name\"\n-                    fi\n-                  fi\n-                fi\n-              fi\n-            else\n-              if test \"X$found_a\" != \"X\"; then\n-                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }$found_a\"\n-              else\n-                                                LIBICONV=\"${LIBICONV}${LIBICONV:+ }-L$found_dir -l$name\"\n-              fi\n-            fi\n-                        additional_includedir=\n-            case \"$found_dir\" in\n-              */lib | */lib/)\n-                basedir=`echo \"X$found_dir\" | sed -e 's,^X,,' -e 's,/lib/*$,,'`\n-                additional_includedir=\"$basedir/include\"\n-                ;;\n-            esac\n-            if test \"X$additional_includedir\" != \"X\"; then\n-                                                                                                                if test \"X$additional_includedir\" != \"X/usr/include\"; then\n-                haveit=\n-                if test \"X$additional_includedir\" = \"X/usr/local/include\"; then\n-                  if test -n \"$GCC\"; then\n-                    case $host_os in\n-                      linux*) haveit=yes;;\n-                    esac\n-                  fi\n-                fi\n-                if test -z \"$haveit\"; then\n-                  for x in $CPPFLAGS $INCICONV; do\n-\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n-  eval x=\\\"$x\\\"\n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n-\n-                    if test \"X$x\" = \"X-I$additional_includedir\"; then\n-                      haveit=yes\n-                      break\n-                    fi\n-                  done\n-                  if test -z \"$haveit\"; then\n-                    if test -d \"$additional_includedir\"; then\n-                                            INCICONV=\"${INCICONV}${INCICONV:+ }-I$additional_includedir\"\n-                    fi\n-                  fi\n-                fi\n-              fi\n-            fi\n-                        if test -n \"$found_la\"; then\n-                                                        save_libdir=\"$libdir\"\n-              case \"$found_la\" in\n-                */* | *\\\\*) . \"$found_la\" ;;\n-                *) . \"./$found_la\" ;;\n-              esac\n-              libdir=\"$save_libdir\"\n-                            for dep in $dependency_libs; do\n-                case \"$dep\" in\n-                  -L*)\n-                    additional_libdir=`echo \"X$dep\" | sed -e 's/^X-L//'`\n-                                                                                                                                                                if test \"X$additional_libdir\" != \"X/usr/lib\"; then\n-                      haveit=\n-                      if test \"X$additional_libdir\" = \"X/usr/local/lib\"; then\n-                        if test -n \"$GCC\"; then\n-                          case $host_os in\n-                            linux*) haveit=yes;;\n-                          esac\n-                        fi\n-                      fi\n-                      if test -z \"$haveit\"; then\n-                        haveit=\n-                        for x in $LDFLAGS $LIBICONV; do\n-\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n-  eval x=\\\"$x\\\"\n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n-\n-                          if test \"X$x\" = \"X-L$additional_libdir\"; then\n-                            haveit=yes\n-                            break\n-                          fi\n-                        done\n-                        if test -z \"$haveit\"; then\n-                          if test -d \"$additional_libdir\"; then\n-                                                        LIBICONV=\"${LIBICONV}${LIBICONV:+ }-L$additional_libdir\"\n-                          fi\n-                        fi\n-                        haveit=\n-                        for x in $LDFLAGS $LTLIBICONV; do\n-\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n-  eval x=\\\"$x\\\"\n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n-\n-                          if test \"X$x\" = \"X-L$additional_libdir\"; then\n-                            haveit=yes\n-                            break\n-                          fi\n-                        done\n-                        if test -z \"$haveit\"; then\n-                          if test -d \"$additional_libdir\"; then\n-                                                        LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-L$additional_libdir\"\n-                          fi\n-                        fi\n-                      fi\n-                    fi\n-                    ;;\n-                  -R*)\n-                    dir=`echo \"X$dep\" | sed -e 's/^X-R//'`\n-                    if test \"$enable_rpath\" != no; then\n-                                                                  haveit=\n-                      for x in $rpathdirs; do\n-                        if test \"X$x\" = \"X$dir\"; then\n-                          haveit=yes\n-                          break\n-                        fi\n-                      done\n-                      if test -z \"$haveit\"; then\n-                        rpathdirs=\"$rpathdirs $dir\"\n-                      fi\n-                                                                  haveit=\n-                      for x in $ltrpathdirs; do\n-                        if test \"X$x\" = \"X$dir\"; then\n-                          haveit=yes\n-                          break\n-                        fi\n-                      done\n-                      if test -z \"$haveit\"; then\n-                        ltrpathdirs=\"$ltrpathdirs $dir\"\n-                      fi\n-                    fi\n-                    ;;\n-                  -l*)\n-                                        names_next_round=\"$names_next_round \"`echo \"X$dep\" | sed -e 's/^X-l//'`\n-                    ;;\n-                  *.la)\n-                                                                                names_next_round=\"$names_next_round \"`echo \"X$dep\" | sed -e 's,^X.*/,,' -e 's,^lib,,' -e 's,\\.la$,,'`\n-                    ;;\n-                  *)\n-                                        LIBICONV=\"${LIBICONV}${LIBICONV:+ }$dep\"\n-                    LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }$dep\"\n-                    ;;\n-                esac\n-              done\n-            fi\n-          else\n-                                                            LIBICONV=\"${LIBICONV}${LIBICONV:+ }-l$name\"\n-            LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-l$name\"\n-          fi\n-        fi\n-      fi\n-    done\n-  done\n-  if test \"X$rpathdirs\" != \"X\"; then\n-    if test -n \"$hardcode_libdir_separator\"; then\n-                        alldirs=\n-      for found_dir in $rpathdirs; do\n-        alldirs=\"${alldirs}${alldirs:+$hardcode_libdir_separator}$found_dir\"\n-      done\n-            acl_save_libdir=\"$libdir\"\n-      libdir=\"$alldirs\"\n-      eval flag=\\\"$hardcode_libdir_flag_spec\\\"\n-      libdir=\"$acl_save_libdir\"\n-      LIBICONV=\"${LIBICONV}${LIBICONV:+ }$flag\"\n-    else\n-            for found_dir in $rpathdirs; do\n-        acl_save_libdir=\"$libdir\"\n-        libdir=\"$found_dir\"\n-        eval flag=\\\"$hardcode_libdir_flag_spec\\\"\n-        libdir=\"$acl_save_libdir\"\n-        LIBICONV=\"${LIBICONV}${LIBICONV:+ }$flag\"\n-      done\n-    fi\n-  fi\n-  if test \"X$ltrpathdirs\" != \"X\"; then\n-            for found_dir in $ltrpathdirs; do\n-      LTLIBICONV=\"${LTLIBICONV}${LTLIBICONV:+ }-R$found_dir\"\n-    done\n-  fi\n-\n-\n-\n-\n-  for ac_header in argz.h limits.h locale.h nl_types.h malloc.h stddef.h \\\n-stdlib.h string.h unistd.h sys/param.h\n-do :\n-  as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n-ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\"\n-eval as_val=\\$$as_ac_Header\n-   if test \"x$as_val\" = x\"\"yes; then :\n-  cat >>confdefs.h <<_ACEOF\n-#define `$as_echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n-_ACEOF\n-\n-fi\n-\n-done\n-\n-  for ac_func in feof_unlocked fgets_unlocked getc_unlocked getcwd getegid \\\n-geteuid getgid getuid mempcpy munmap putenv setenv setlocale stpcpy \\\n-strcasecmp strdup strtoul tsearch __argz_count __argz_stringify __argz_next \\\n-__fsetlocking\n-do :\n-  as_ac_var=`$as_echo \"ac_cv_func_$ac_func\" | $as_tr_sh`\n-ac_fn_c_check_func \"$LINENO\" \"$ac_func\" \"$as_ac_var\"\n-eval as_val=\\$$as_ac_var\n-   if test \"x$as_val\" = x\"\"yes; then :\n-  cat >>confdefs.h <<_ACEOF\n-#define `$as_echo \"HAVE_$ac_func\" | $as_tr_cpp` 1\n-_ACEOF\n-\n-fi\n-done\n-\n-\n-\n-\n-\n-\n-\n-          am_save_CPPFLAGS=\"$CPPFLAGS\"\n-\n-  for element in $INCICONV; do\n-    haveit=\n-    for x in $CPPFLAGS; do\n-\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n-  eval x=\\\"$x\\\"\n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n-\n-      if test \"X$x\" = \"X$element\"; then\n-        haveit=yes\n-        break\n-      fi\n-    done\n-    if test -z \"$haveit\"; then\n-      CPPFLAGS=\"${CPPFLAGS}${CPPFLAGS:+ }$element\"\n-    fi\n-  done\n-\n-\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for iconv\" >&5\n-$as_echo_n \"checking for iconv... \" >&6; }\n-if test \"${am_cv_func_iconv+set}\" = set; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-\n-    am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n-    am_cv_lib_iconv=no\n-    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+    # If libiconv is part of the build tree, then try using it over\n+    # any system libiconv.\n+    if test \"$am_cv_func_iconv\" != yes && test -d ../libiconv; then\n+      for lib_dir in $BUILD_LIBICONV_LIBDIRS; do\n+        am_save_LIBS=\"$LIBS\"\n+        am_save_CPPFLAGS=\"$CPPFLAGS\"\n+        LIBS=\"$LIBS $lib_dir/libiconv.a\"\n+        CPPFLAGS=\"$CPPFLAGS $BUILD_LIBICONV_INCLUDE\"\n+        cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <stdlib.h>\n #include <iconv.h>\n int\n main ()\n {\n iconv_t cd = iconv_open(\"\",\"\");\n-       iconv(cd,NULL,NULL,NULL,NULL);\n-       iconv_close(cd);\n+           iconv(cd,NULL,NULL,NULL,NULL);\n+           iconv_close(cd);\n   ;\n   return 0;\n }\n _ACEOF\n if ac_fn_c_try_link \"$LINENO\"; then :\n-  am_cv_func_iconv=yes\n+  am_cv_use_build_libiconv=yes\n+          am_cv_build_libiconv_path=$lib_dir/libiconv.a\n+          am_cv_lib_iconv=yes\n+          am_cv_func_iconv=yes\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n+        LIBS=\"$am_save_LIBS\"\n+        CPPFLAGS=\"$am_save_CPPFLAGS\"\n+        if test \"$am_cv_use_build_libiconv\" = \"yes\"; then\n+          break\n+        fi\n+      done\n+    fi\n+\n+    # If iconv was not in libc, try -liconv.  In this case, arrange to\n+    # look in the libiconv prefix, if it was specified by the user.\n     if test \"$am_cv_func_iconv\" != yes; then\n+      am_save_CPPFLAGS=\"$CPPFLAGS\"\n       am_save_LIBS=\"$LIBS\"\n-      LIBS=\"$LIBS $LIBICONV\"\n+      if test -n \"$LIBICONV_INCLUDE\"; then\n+        CPPFLAGS=\"$CPPFLAGS $LIBICONV_INCLUDE\"\n+        LIBS=\"$LIBS $LIBICONV_LIBDIR\"\n+      fi\n+      LIBS=\"$LIBS -liconv\"\n       cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <stdlib.h>\n@@ -5504,30 +4998,34 @@ fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n       LIBS=\"$am_save_LIBS\"\n+      CPPFLAGS=\"$am_save_CPPFLAGS\"\n     fi\n \n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $am_cv_func_iconv\" >&5\n $as_echo \"$am_cv_func_iconv\" >&6; }\n-  if test \"$am_cv_func_iconv\" = yes; then\n-\n-$as_echo \"#define HAVE_ICONV 1\" >>confdefs.h\n \n-  fi\n+  # Set the various flags based on the cache variables.  We can't rely\n+  # on the flags to remain set from the above code, due to caching.\n+  LIBICONV=\n   if test \"$am_cv_lib_iconv\" = yes; then\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking how to link with libiconv\" >&5\n-$as_echo_n \"checking how to link with libiconv... \" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $LIBICONV\" >&5\n-$as_echo \"$LIBICONV\" >&6; }\n+    LIBICONV=\"-liconv\"\n   else\n-            CPPFLAGS=\"$am_save_CPPFLAGS\"\n-    LIBICONV=\n-    LTLIBICONV=\n+    LIBICONV_LIBDIR=\n+    LIBICONV_INCLUDE=\n   fi\n+  if test \"$am_cv_use_build_libiconv\" = yes; then\n+    LIBICONV=\"$am_cv_build_libiconv_path\"\n+    LIBICONV_LIBDIR=\"\"\n+    LIBICONV_INCLUDE=\"$BUILD_LIBICONV_INCLUDE\"\n+  fi\n+  CPPFLAGS=\"$CPPFLAGS $LIBICONV_INCLUDE\"\n+  LIBS=\"$LIBS $LIBICONV_LIBDIR $LIBICONV\"\n \n+  if test \"$am_cv_func_iconv\" = yes; then\n \n+$as_echo \"#define HAVE_ICONV 1\" >>confdefs.h\n \n-  if test \"$am_cv_func_iconv\" = yes; then\n     { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for iconv declaration\" >&5\n $as_echo_n \"checking for iconv declaration... \" >&6; }\n     if test \"${am_cv_proto_iconv+set}\" = set; then :\n@@ -5710,6 +5208,164 @@ $as_echo \"$ac_prog_version\" >&6; }\n   fi\n \n \n+      if test \"X$prefix\" = \"XNONE\"; then\n+    acl_final_prefix=\"$ac_default_prefix\"\n+  else\n+    acl_final_prefix=\"$prefix\"\n+  fi\n+  if test \"X$exec_prefix\" = \"XNONE\"; then\n+    acl_final_exec_prefix='${prefix}'\n+  else\n+    acl_final_exec_prefix=\"$exec_prefix\"\n+  fi\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  eval acl_final_exec_prefix=\\\"$acl_final_exec_prefix\\\"\n+  prefix=\"$acl_save_prefix\"\n+\n+\n+# Check whether --with-gnu-ld was given.\n+if test \"${with_gnu_ld+set}\" = set; then :\n+  withval=$with_gnu_ld; test \"$withval\" = no || with_gnu_ld=yes\n+else\n+  with_gnu_ld=no\n+fi\n+\n+# Prepare PATH_SEPARATOR.\n+# The user is always right.\n+if test \"${PATH_SEPARATOR+set}\" != set; then\n+  echo \"#! /bin/sh\" >conf$$.sh\n+  echo  \"exit 0\"   >>conf$$.sh\n+  chmod +x conf$$.sh\n+  if (PATH=\"/nonexistent;.\"; conf$$.sh) >/dev/null 2>&1; then\n+    PATH_SEPARATOR=';'\n+  else\n+    PATH_SEPARATOR=:\n+  fi\n+  rm -f conf$$.sh\n+fi\n+ac_prog=ld\n+if test \"$GCC\" = yes; then\n+  # Check if gcc -print-prog-name=ld gives a path.\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for ld used by GCC\" >&5\n+$as_echo_n \"checking for ld used by GCC... \" >&6; }\n+  case $host in\n+  *-*-mingw*)\n+    # gcc leaves a trailing carriage return which upsets mingw\n+    ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\\015'` ;;\n+  *)\n+    ac_prog=`($CC -print-prog-name=ld) 2>&5` ;;\n+  esac\n+  case $ac_prog in\n+    # Accept absolute paths.\n+    [\\\\/]* | [A-Za-z]:[\\\\/]*)\n+      re_direlt='/[^/][^/]*/\\.\\./'\n+      # Canonicalize the path of ld\n+      ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n+      while echo $ac_prog | grep \"$re_direlt\" > /dev/null 2>&1; do\n+\tac_prog=`echo $ac_prog| sed \"s%$re_direlt%/%\"`\n+      done\n+      test -z \"$LD\" && LD=\"$ac_prog\"\n+      ;;\n+  \"\")\n+    # If it fails, then pretend we aren't using GCC.\n+    ac_prog=ld\n+    ;;\n+  *)\n+    # If it is relative, then search for the first ld in PATH.\n+    with_gnu_ld=unknown\n+    ;;\n+  esac\n+elif test \"$with_gnu_ld\" = yes; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for GNU ld\" >&5\n+$as_echo_n \"checking for GNU ld... \" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for non-GNU ld\" >&5\n+$as_echo_n \"checking for non-GNU ld... \" >&6; }\n+fi\n+if test \"${acl_cv_path_LD+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if test -z \"$LD\"; then\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR-:}\"\n+  for ac_dir in $PATH; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f \"$ac_dir/$ac_prog\" || test -f \"$ac_dir/$ac_prog$ac_exeext\"; then\n+      acl_cv_path_LD=\"$ac_dir/$ac_prog\"\n+      # Check to see if the program is GNU ld.  I'd rather use --version,\n+      # but apparently some GNU ld's only accept -v.\n+      # Break only if it was the GNU/non-GNU ld that we prefer.\n+      if \"$acl_cv_path_LD\" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then\n+\ttest \"$with_gnu_ld\" != no && break\n+      else\n+\ttest \"$with_gnu_ld\" != yes && break\n+      fi\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+else\n+  acl_cv_path_LD=\"$LD\" # Let the user override the test with a path.\n+fi\n+fi\n+\n+LD=\"$acl_cv_path_LD\"\n+if test -n \"$LD\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $LD\" >&5\n+$as_echo \"$LD\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+fi\n+test -z \"$LD\" && as_fn_error \"no acceptable ld found in \\$PATH\" \"$LINENO\" 5\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld\" >&5\n+$as_echo_n \"checking if the linker ($LD) is GNU ld... \" >&6; }\n+if test \"${acl_cv_prog_gnu_ld+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  # I'd rather use --version here, but apparently some GNU ld's only accept -v.\n+if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then\n+  acl_cv_prog_gnu_ld=yes\n+else\n+  acl_cv_prog_gnu_ld=no\n+fi\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $acl_cv_prog_gnu_ld\" >&5\n+$as_echo \"$acl_cv_prog_gnu_ld\" >&6; }\n+with_gnu_ld=$acl_cv_prog_gnu_ld\n+\n+\n+\n+                                                { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for shared library run path origin\" >&5\n+$as_echo_n \"checking for shared library run path origin... \" >&6; }\n+if test \"${acl_cv_rpath+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+\n+    CC=\"$CC\" GCC=\"$GCC\" LDFLAGS=\"$LDFLAGS\" LD=\"$LD\" with_gnu_ld=\"$with_gnu_ld\" \\\n+    ${CONFIG_SHELL-/bin/sh} \"$ac_aux_dir/config.rpath\" \"$host\" > conftest.sh\n+    . ./conftest.sh\n+    rm -f ./conftest.sh\n+    acl_cv_rpath=done\n+\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $acl_cv_rpath\" >&5\n+$as_echo \"$acl_cv_rpath\" >&6; }\n+  wl=\"$acl_cv_wl\"\n+  libext=\"$acl_cv_libext\"\n+  shlibext=\"$acl_cv_shlibext\"\n+  hardcode_libdir_flag_spec=\"$acl_cv_hardcode_libdir_flag_spec\"\n+  hardcode_libdir_separator=\"$acl_cv_hardcode_libdir_separator\"\n+  hardcode_direct=\"$acl_cv_hardcode_direct\"\n+  hardcode_minus_L=\"$acl_cv_hardcode_minus_L\"\n+    # Check whether --enable-rpath was given.\n+if test \"${enable_rpath+set}\" = set; then :\n+  enableval=$enable_rpath; :\n+else\n+  enable_rpath=yes\n+fi\n+\n+\n+\n \n \n "}, {"sha": "28ce2d8ace3cca98c8dfc5d60ef64368558408ef", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -1,3 +1,7 @@\n+2015-08-06  Yaakov Selkowitz  <yselkowi@redhat.com>\n+\n+\t* configure: Regenerate.\n+\n 2015-07-08  Thomas Schwinge  <thomas@codesourcery.com>\n \n \t* include/line-map.h (RESERVED_LOCATION_COUNT): Change type to"}, {"sha": "8cf2f77cacebb8193989cc32914029655b6d5460", "filename": "libcpp/configure", "status": "modified", "additions": 127, "deletions": 26, "changes": 153, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5372e7f0c5c0df7f239ce96ce35a2114400269/libcpp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5372e7f0c5c0df7f239ce96ce35a2114400269/libcpp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fconfigure?ref=bf5372e7f0c5c0df7f239ce96ce35a2114400269", "patch": "@@ -4733,6 +4733,12 @@ test -n \"$AUTOHEADER\" || AUTOHEADER=\"$MISSING autoheader\"\n # Figure out what compiler warnings we can enable.\n # See config/warnings.m4 for details.\n \n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n warn=\n save_CFLAGS=\"$CFLAGS\"\n for real_option in -W -Wall -Wno-narrowing -Wwrite-strings \\\n@@ -4778,6 +4784,18 @@ $as_echo \"$ac_res\" >&6; }\n fi\n   done\n CFLAGS=\"$save_CFLAGS\"\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n c_warn=\n save_CFLAGS=\"$CFLAGS\"\n@@ -4824,6 +4842,18 @@ $as_echo \"$ac_res\" >&6; }\n fi\n   done\n CFLAGS=\"$save_CFLAGS\"\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n+\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n WARN_PEDANTIC=\n # Do the check with the no- prefix removed from the warning options\n@@ -4862,9 +4892,21 @@ if test $acx_cv_prog_cc_pedantic__Wlong_long = yes; then :\n fi\n \n fi\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n \n \n # Disable exceptions and RTTI if building with g++\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n noexception_flags=\n save_CFLAGS=\"$CFLAGS\"\n for real_option in -fno-exceptions -fno-rtti; do\n@@ -4909,10 +4951,22 @@ $as_echo \"$ac_res\" >&6; }\n fi\n   done\n CFLAGS=\"$save_CFLAGS\"\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n \n \n # Only enable with --enable-werror-always until existing warnings are\n # corrected.\n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n WERROR=\n # Check whether --enable-werror-always was given.\n if test \"${enable_werror_always+set}\" = set; then :\n@@ -4925,6 +4979,12 @@ if test $enable_werror_always = yes; then :\n   WERROR=\"$WERROR${WERROR:+ }-Werror\"\n fi\n \n+ac_ext=c\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n+ac_compiler_gnu=$ac_cv_c_compiler_gnu\n+\n \n \n # Dependency checking.\n@@ -6971,31 +7031,6 @@ fi\n \n \n \n-          am_save_CPPFLAGS=\"$CPPFLAGS\"\n-\n-  for element in $INCICONV; do\n-    haveit=\n-    for x in $CPPFLAGS; do\n-\n-  acl_save_prefix=\"$prefix\"\n-  prefix=\"$acl_final_prefix\"\n-  acl_save_exec_prefix=\"$exec_prefix\"\n-  exec_prefix=\"$acl_final_exec_prefix\"\n-  eval x=\\\"$x\\\"\n-  exec_prefix=\"$acl_save_exec_prefix\"\n-  prefix=\"$acl_save_prefix\"\n-\n-      if test \"X$x\" = \"X$element\"; then\n-        haveit=yes\n-        break\n-      fi\n-    done\n-    if test -z \"$haveit\"; then\n-      CPPFLAGS=\"${CPPFLAGS}${CPPFLAGS:+ }$element\"\n-    fi\n-  done\n-\n-\n   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for iconv\" >&5\n $as_echo_n \"checking for iconv... \" >&6; }\n if test \"${am_cv_func_iconv+set}\" = set; then :\n@@ -7004,6 +7039,8 @@ else\n \n     am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n     am_cv_lib_iconv=no\n+                    am_save_CPPFLAGS=\"$CPPFLAGS\"\n+    CPPFLAGS=\"$CPPFLAGS $INCICONV\"\n     cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <stdlib.h>\n@@ -7023,8 +7060,49 @@ if ac_fn_cxx_try_link \"$LINENO\"; then :\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n+    CPPFLAGS=\"$am_save_CPPFLAGS\"\n+\n+    if test \"$am_cv_func_iconv\" != yes && test -d ../libiconv; then\n+      for _libs in .libs _libs; do\n+        am_save_CPPFLAGS=\"$CPPFLAGS\"\n+        am_save_LIBS=\"$LIBS\"\n+        CPPFLAGS=\"$CPPFLAGS -I../libiconv/include\"\n+        LIBS=\"$LIBS ../libiconv/lib/$_libs/libiconv.a\"\n+        cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <stdlib.h>\n+#include <iconv.h>\n+int\n+main ()\n+{\n+iconv_t cd = iconv_open(\"\",\"\");\n+           iconv(cd,NULL,NULL,NULL,NULL);\n+           iconv_close(cd);\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_cxx_try_link \"$LINENO\"; then :\n+  INCICONV=\"-I../libiconv/include\"\n+          LIBICONV='${top_builddir}'/../libiconv/lib/$_libs/libiconv.a\n+          LTLIBICONV='${top_builddir}'/../libiconv/lib/libiconv.la\n+          am_cv_lib_iconv=yes\n+          am_cv_func_iconv=yes\n+fi\n+rm -f core conftest.err conftest.$ac_objext \\\n+    conftest$ac_exeext conftest.$ac_ext\n+        CPPFLAGS=\"$am_save_CPPFLAGS\"\n+        LIBS=\"$am_save_LIBS\"\n+        if test \"$am_cv_func_iconv\" = \"yes\"; then\n+          break\n+        fi\n+      done\n+    fi\n+\n     if test \"$am_cv_func_iconv\" != yes; then\n+      am_save_CPPFLAGS=\"$CPPFLAGS\"\n       am_save_LIBS=\"$LIBS\"\n+      CPPFLAGS=\"$LIBS $INCICONV\"\n       LIBS=\"$LIBS $LIBICONV\"\n       cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n@@ -7046,6 +7124,7 @@ if ac_fn_cxx_try_link \"$LINENO\"; then :\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n+      CPPFLAGS=\"$am_save_CPPFLAGS\"\n       LIBS=\"$am_save_LIBS\"\n     fi\n \n@@ -7058,12 +7137,34 @@ $as_echo \"#define HAVE_ICONV 1\" >>confdefs.h\n \n   fi\n   if test \"$am_cv_lib_iconv\" = yes; then\n+\n+  for element in $INCICONV; do\n+    haveit=\n+    for x in $CPPFLAGS; do\n+\n+  acl_save_prefix=\"$prefix\"\n+  prefix=\"$acl_final_prefix\"\n+  acl_save_exec_prefix=\"$exec_prefix\"\n+  exec_prefix=\"$acl_final_exec_prefix\"\n+  eval x=\\\"$x\\\"\n+  exec_prefix=\"$acl_save_exec_prefix\"\n+  prefix=\"$acl_save_prefix\"\n+\n+      if test \"X$x\" = \"X$element\"; then\n+        haveit=yes\n+        break\n+      fi\n+    done\n+    if test -z \"$haveit\"; then\n+      CPPFLAGS=\"${CPPFLAGS}${CPPFLAGS:+ }$element\"\n+    fi\n+  done\n+\n     { $as_echo \"$as_me:${as_lineno-$LINENO}: checking how to link with libiconv\" >&5\n $as_echo_n \"checking how to link with libiconv... \" >&6; }\n     { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $LIBICONV\" >&5\n $as_echo \"$LIBICONV\" >&6; }\n   else\n-            CPPFLAGS=\"$am_save_CPPFLAGS\"\n     LIBICONV=\n     LTLIBICONV=\n   fi"}]}