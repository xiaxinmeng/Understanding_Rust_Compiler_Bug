{"sha": "b0c32a738700b8d010d97cda9d6be3334b7d05a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjBjMzJhNzM4NzAwYjhkMDEwZDk3Y2RhOWQ2YmUzMzM0YjdkMDVhNQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2005-03-09T02:42:46Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2005-03-09T02:42:46Z"}, "message": "tree-cfg.c (cleanup_control_flow): If removal of a computed goto results in the removal of edges in the CFG...\n\n        * tree-cfg.c (cleanup_control_flow): If removal of a computed\n        goto results in the removal of edges in the CFG, then we need\n        to recompute dominators.\n\nFrom-SVN: r96160", "tree": {"sha": "06c0224c7be0a6643a617ff27b888cd03448df33", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/06c0224c7be0a6643a617ff27b888cd03448df33"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b0c32a738700b8d010d97cda9d6be3334b7d05a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0c32a738700b8d010d97cda9d6be3334b7d05a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0c32a738700b8d010d97cda9d6be3334b7d05a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0c32a738700b8d010d97cda9d6be3334b7d05a5/comments", "author": null, "committer": null, "parents": [{"sha": "b735d54b7a3eb3446a161ed162d422ee32a5b6b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b735d54b7a3eb3446a161ed162d422ee32a5b6b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b735d54b7a3eb3446a161ed162d422ee32a5b6b6"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "02bcdd2fb7f0aa3483121dcbcac6c975857eca4d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c32a738700b8d010d97cda9d6be3334b7d05a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c32a738700b8d010d97cda9d6be3334b7d05a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b0c32a738700b8d010d97cda9d6be3334b7d05a5", "patch": "@@ -1,3 +1,9 @@\n+2005-03-08  Jeff Law  <law@redhat.com>\n+\n+\t* tree-cfg.c (cleanup_control_flow): If removal of a computed\n+\tgoto results in the removal of edges in the CFG, then we need\n+\tto recompute dominators.\n+\n 2005-03-09  Ben Elliston  <bje@au.ibm.com>\n \n \t* c-common.c (c_do_switch_warnings): Comment fix."}, {"sha": "be7ee56bdb4922d9321e885ce781f4477edeeea5", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b0c32a738700b8d010d97cda9d6be3334b7d05a5/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b0c32a738700b8d010d97cda9d6be3334b7d05a5/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=b0c32a738700b8d010d97cda9d6be3334b7d05a5", "patch": "@@ -2148,6 +2148,7 @@ cleanup_control_flow (void)\n \t  tree label;\n \t  edge_iterator ei;\n \t  basic_block target_block;\n+\t  bool removed_edge = false;\n \n \t  /* First look at all the outgoing edges.  Delete any outgoing\n \t     edges which do not go to the right block.  For the one\n@@ -2157,7 +2158,10 @@ cleanup_control_flow (void)\n \t  for (ei = ei_start (bb->succs); (e = ei_safe_edge (ei)); )\n \t    {\n \t      if (e->dest != target_block)\n-\t\tremove_edge (e);\n+\t\t{\n+\t\t  removed_edge = true;\n+\t\t  remove_edge (e);\n+\t\t}\n \t      else\n \t        {\n \t\t  /* Turn off the EDGE_ABNORMAL flag.  */\n@@ -2169,6 +2173,11 @@ cleanup_control_flow (void)\n \t\t}\n \t    }\n \n+\t  /* If we removed one or more edges, then we will need to fix the\n+\t     dominators.  It may be possible to incrementally update them.  */\n+\t  if (removed_edge)\n+\t    free_dominance_info (CDI_DOMINATORS);\n+\n \t  /* Remove the GOTO_EXPR as it is not needed.  The CFG has all the\n \t     relevant information we need.  */\n \t  bsi_remove (&bsi);"}]}