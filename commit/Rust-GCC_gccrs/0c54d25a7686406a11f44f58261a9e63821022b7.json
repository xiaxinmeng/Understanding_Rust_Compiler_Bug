{"sha": "0c54d25a7686406a11f44f58261a9e63821022b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM1NGQyNWE3Njg2NDA2YTExZjQ0ZjU4MjYxYTllNjM4MjEwMjJiNw==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2021-05-10T22:44:25Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-05-10T23:07:20Z"}, "message": "Fix missing version_string in Ada\n\ngcc/ada/\n\tPR bootstrap/100506\n\t* Make-generated.in: Replace version.c with ada/version.c.\n\t* gcc-interface/Make-lang.in: Add version.o to GNAT1_C_OBJS.\n\tAdd version.o to GNAT_ADA_OBJS and GNATBIND_OBJS.\n\t* gcc-interface/Makefile.in: Add version.o to TOOLS_LIBS.\n\t* gnatvsn.adb: Start using a new C symbol gnat_version_string.\n\t* version.c: New file.", "tree": {"sha": "3352df6c3d67780f0023aeb17980b35ac034a05f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3352df6c3d67780f0023aeb17980b35ac034a05f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c54d25a7686406a11f44f58261a9e63821022b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c54d25a7686406a11f44f58261a9e63821022b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c54d25a7686406a11f44f58261a9e63821022b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c54d25a7686406a11f44f58261a9e63821022b7/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "77804c9a62fa40d132b7b3a22320a75b06a63ca5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77804c9a62fa40d132b7b3a22320a75b06a63ca5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77804c9a62fa40d132b7b3a22320a75b06a63ca5"}], "stats": {"total": 51, "additions": 44, "deletions": 7}, "files": [{"sha": "6fc23aebf1424a1f31dfc1ec068e967536cb0c01", "filename": "gcc/ada/Make-generated.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2FMake-generated.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2FMake-generated.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMake-generated.in?ref=0c54d25a7686406a11f44f58261a9e63821022b7", "patch": "@@ -58,7 +58,7 @@ ada/stamp-snames : ada/snames.ads-tmpl ada/snames.adb-tmpl ada/snames.h-tmpl ada\n \ttouch ada/stamp-snames\n \n ada/sdefault.adb: ada/stamp-sdefault ; @true\n-ada/stamp-sdefault : $(srcdir)/version.c Makefile\n+ada/stamp-sdefault : $(srcdir)/ada/version.c Makefile\n \t$(ECHO) \"pragma Style_Checks (Off);\" >tmp-sdefault.adb\n \t$(ECHO) \"with Osint; use Osint;\" >>tmp-sdefault.adb\n \t$(ECHO) \"package body Sdefault is\" >>tmp-sdefault.adb"}, {"sha": "c8c02d3f795f0a82b7887b08537bc4992e1fb7b7", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=0c54d25a7686406a11f44f58261a9e63821022b7", "patch": "@@ -247,7 +247,8 @@ GNAT1_C_OBJS = ada/adadecode.o ada/adaint.o ada/argv.o ada/cio.o \\\n  ada/cstreams.o ada/env.o ada/init.o ada/initialize.o ada/raise.o \\\n  ada/raise-gcc.o \\\n  ada/seh_init.o ada/targext.o ada/cuintp.o ada/decl.o ada/rtfinal.o \\\n- ada/rtinit.o ada/misc.o ada/utils.o ada/utils2.o ada/trans.o ada/targtyps.o\n+ ada/rtinit.o ada/misc.o ada/utils.o ada/utils2.o ada/trans.o ada/targtyps.o \\\n+ ada/version.o\n \n # Object files from Ada sources that are used by gnat1\n GNAT_ADA_OBJS =\t\\\n@@ -648,6 +649,7 @@ GNATBIND_OBJS = \\\n  ada/uintp.o      \\\n  ada/uname.o      \\\n  ada/urealp.o     \\\n+ ada/version.o    \\\n  ada/widechar.o\n \n # Language-independent object files."}, {"sha": "4ab71977e0b9800a33c5ad3d075aacb55b241a32", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=0c54d25a7686406a11f44f58261a9e63821022b7", "patch": "@@ -250,9 +250,10 @@ LIBS = $(LIBINTL) $(LIBICONV) $(LIBBACKTRACE) $(LIBIBERTY) $(SYSLIBS)\n LIBDEPS = $(LIBINTL_DEP) $(LIBICONV_DEP) $(LIBBACKTRACE) $(LIBIBERTY)\n # Default is no TGT_LIB; one might be passed down or something\n TGT_LIB =\n-TOOLS_LIBS = ../link.o ../targext.o ../../ggc-none.o ../../libcommon-target.a \\\n-  ../../libcommon.a ../../../libcpp/libcpp.a $(LIBGNAT) $(LIBINTL) $(LIBICONV) \\\n-  ../$(LIBBACKTRACE) ../$(LIBIBERTY) $(SYSLIBS) $(TGT_LIB)\n+TOOLS_LIBS = ../version.o ../link.o ../targext.o ../../ggc-none.o \\\n+  ../../libcommon-target.a ../../libcommon.a ../../../libcpp/libcpp.a \\\n+  $(LIBGNAT) $(LIBINTL) $(LIBICONV) ../$(LIBBACKTRACE) ../$(LIBIBERTY) \\\n+  $(SYSLIBS) $(TGT_LIB)\n \n # Add -no-pie to TOOLS_LIBS since some of them are compiled with -fno-PIE.\n TOOLS_LIBS += @NO_PIE_FLAG@\n@@ -302,7 +303,7 @@ ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir)/ada\n \t$(CC) -c $(ALL_ADAFLAGS) $(ADA_INCLUDES) $< $(OUTPUT_OPTION)\n \n # how to regenerate this file\n-Makefile: ../config.status $(srcdir)/ada/gcc-interface/Makefile.in $(srcdir)/ada/Makefile.in $(srcdir)/version.c\n+Makefile: ../config.status $(srcdir)/ada/gcc-interface/Makefile.in $(srcdir)/ada/Makefile.in $(srcdir)/ada/version.c\n \tcd ..; \\\n \tLANGUAGES=\"$(CONFIG_LANGUAGES)\" \\\n \tCONFIG_HEADERS= \\"}, {"sha": "d6d2a5a3ace34564db7a9153bbc127e729624b16", "filename": "gcc/ada/gnatvsn.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fgnatvsn.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fgnatvsn.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatvsn.adb?ref=0c54d25a7686406a11f44f58261a9e63821022b7", "patch": "@@ -53,7 +53,7 @@ package body Gnatvsn is\n    --  version.c using the zero-based convention of the C language.\n    --  The size is not the real one, which does not matter since we will\n    --  check for the nul character in Gnat_Version_String.\n-   pragma Import (C, Version_String, \"version_string\");\n+   pragma Import (C, Version_String, \"gnat_version_string\");\n \n    -------------------------\n    -- Gnat_Version_String --"}, {"sha": "e6cc612404001b8f0e537032c69f560e48f568e0", "filename": "gcc/ada/version.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fversion.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c54d25a7686406a11f44f58261a9e63821022b7/gcc%2Fada%2Fversion.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fversion.c?ref=0c54d25a7686406a11f44f58261a9e63821022b7", "patch": "@@ -0,0 +1,34 @@\n+/****************************************************************************\n+ *                                                                          *\n+ *                         GNAT COMPILER COMPONENTS                         *\n+ *                                                                          *\n+ *\t\t\t\tV E R S I O N                               *\n+ *                                                                          *\n+ *                          C Implementation File                           *\n+ *                                                                          *\n+ *          Copyright (C) 2021, Free Software Foundation, Inc.         *\n+ *                                                                          *\n+ * GNAT is free software;  you can  redistribute it  and/or modify it under *\n+ * terms of the  GNU General Public License as published  by the Free Soft- *\n+ * ware  Foundation;  either version 3,  or (at your option) any later ver- *\n+ * sion.  GNAT is distributed in the hope that it will be useful, but WITH- *\n+ * OUT ANY WARRANTY;  without even the  implied warranty of MERCHANTABILITY *\n+ * or FITNESS FOR A PARTICULAR PURPOSE.                                     *\n+ *                                                                          *\n+ * As a special exception under Section 7 of GPL version 3, you are granted *\n+ * additional permissions described in the GCC Runtime Library Exception,   *\n+ * version 3.1, as published by the Free Software Foundation.               *\n+ *                                                                          *\n+ * You should have received a copy of the GNU General Public License and    *\n+ * a copy of the GCC Runtime Library Exception along with this program;     *\n+ * see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see    *\n+ * <http://www.gnu.org/licenses/>.                                          *\n+ *                                                                          *\n+ * GNAT was originally developed  by the GNAT team at  New York University. *\n+ * Extensive contributions were provided by Ada Core Technologies Inc.      *\n+ *                                                                          *\n+ ****************************************************************************/\n+\n+#include \"version.h\"\n+\n+char gnat_version_string[] = version_string;"}]}