{"sha": "250d125cd3a406baba2b47de990b68650021c542", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjUwZDEyNWNkM2E0MDZiYWJhMmI0N2RlOTkwYjY4NjUwMDIxYzU0Mg==", "commit": {"author": {"name": "Kenneth Zadeck", "email": "zadeck@naturalbridge.com", "date": "2007-10-11T22:31:55Z"}, "committer": {"name": "Kenneth Zadeck", "email": "zadeck@gcc.gnu.org", "date": "2007-10-11T22:31:55Z"}, "message": "re PR rtl-optimization/33676 (libgfortran bootstrap failure: selected_int_kind.f90:22: Segmentation fault, wrong code with -fomit-frame-pointer)\n\n2007-10-11  Kenneth Zadeck <zadeck@naturalbridge.com>\n\n\tPR middle-end/33676\n\t* global.c (build_insn_chain): Include insn that occur between\n\tbasic blocks.\n\n2007-10-11  Kenneth Zadeck <zadeck@naturalbridge.com>\n\n\tPR middle-end/33676\n\t* gcc.dg/torture/pr33676.c: New.\n\nFrom-SVN: r129244", "tree": {"sha": "6fca97e7fa634cb7828e03fc3e299c4086378acb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6fca97e7fa634cb7828e03fc3e299c4086378acb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/250d125cd3a406baba2b47de990b68650021c542", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/250d125cd3a406baba2b47de990b68650021c542", "html_url": "https://github.com/Rust-GCC/gccrs/commit/250d125cd3a406baba2b47de990b68650021c542", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/250d125cd3a406baba2b47de990b68650021c542/comments", "author": {"login": "zadeck", "id": 42682403, "node_id": "MDQ6VXNlcjQyNjgyNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/42682403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zadeck", "html_url": "https://github.com/zadeck", "followers_url": "https://api.github.com/users/zadeck/followers", "following_url": "https://api.github.com/users/zadeck/following{/other_user}", "gists_url": "https://api.github.com/users/zadeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/zadeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zadeck/subscriptions", "organizations_url": "https://api.github.com/users/zadeck/orgs", "repos_url": "https://api.github.com/users/zadeck/repos", "events_url": "https://api.github.com/users/zadeck/events{/privacy}", "received_events_url": "https://api.github.com/users/zadeck/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0c3de9003f8e0684664149aec9628c8c5b73d62a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c3de9003f8e0684664149aec9628c8c5b73d62a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c3de9003f8e0684664149aec9628c8c5b73d62a"}], "stats": {"total": 97, "additions": 97, "deletions": 0}, "files": [{"sha": "dac597f2b6212bf631d26ed2eaf97398053c613d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/250d125cd3a406baba2b47de990b68650021c542/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/250d125cd3a406baba2b47de990b68650021c542/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=250d125cd3a406baba2b47de990b68650021c542", "patch": "@@ -1,3 +1,9 @@\n+2007-10-11  Kenneth Zadeck <zadeck@naturalbridge.com>\n+\n+\tPR middle-end/33676\n+\t* global.c (build_insn_chain): Include insn that occur between\n+\tbasic blocks.\n+\t\n 2007-10-11  Tom Tromey  <tromey@redhat.com>\n \n \t* gengtype-yacc.y: Delete."}, {"sha": "69257bc3c415e0a08397b6cb5fe61ba06751adb8", "filename": "gcc/global.c", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/250d125cd3a406baba2b47de990b68650021c542/gcc%2Fglobal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/250d125cd3a406baba2b47de990b68650021c542/gcc%2Fglobal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fglobal.c?ref=250d125cd3a406baba2b47de990b68650021c542", "patch": "@@ -1575,6 +1575,41 @@ build_insn_chain (void)\n \t\t  }\n \t    }\n \t}\n+\n+      /* FIXME!! The following code is a disaster.  Reload needs to see the\n+\t labels and jump tables that are just hanging out in between\n+\t the basic blocks.  See pr33676.  */\n+\n+      insn = BB_HEAD (bb);\n+\n+      /* Skip over the barriers and cruft.  */\n+      while (insn && (BARRIER_P (insn) || NOTE_P (insn) || BLOCK_FOR_INSN (insn) == bb))\n+\tinsn = PREV_INSN (insn);\n+\t\n+      /* While we add anything except barriers and notes, the focus is\n+\t to get the labels and jump tables into the\n+\t reload_insn_chain.  */\n+      while (insn)\n+\t{\n+\t  if (!NOTE_P (insn) && !BARRIER_P (insn))\n+\t    {\n+\t      if (BLOCK_FOR_INSN (insn))\n+\t\tbreak;\n+\n+\t      c = new_insn_chain ();\n+\t      c->next = next;\n+\t      next = c;\n+\t      *p = c;\n+\t      p = &c->prev;\n+\t      \n+\t      c->insn = insn;\n+\t      /* The block makes no sense here, but it is what the old\n+\t\t code did.  */\n+\t      c->block = bb->index;\n+\t      bitmap_copy (&c->live_throughout, live_relevant_regs);\n+\t    }\t  \n+\t  insn = PREV_INSN (insn);\n+\t}\n     }\n \n   for (i = 0; i < (unsigned int)max_regno; i++)"}, {"sha": "69ab86f189481c3055da4cd13ab5c126b8b3dd1f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/250d125cd3a406baba2b47de990b68650021c542/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/250d125cd3a406baba2b47de990b68650021c542/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=250d125cd3a406baba2b47de990b68650021c542", "patch": "@@ -1,3 +1,8 @@\n+2007-10-11  Kenneth Zadeck <zadeck@naturalbridge.com>\n+\n+\tPR middle-end/33676\n+\t* gcc.dg/torture/pr33676.c: New.\n+\n 2007-10-11  Paolo Carlini  <pcarlini@suse.de>\n \n \tPR c++/31441"}, {"sha": "74525c279a274ccec8726e750c082b63f9b6f804", "filename": "gcc/testsuite/gcc.dg/torture/pr33676.c", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/250d125cd3a406baba2b47de990b68650021c542/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr33676.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/250d125cd3a406baba2b47de990b68650021c542/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr33676.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr33676.c?ref=250d125cd3a406baba2b47de990b68650021c542", "patch": "@@ -0,0 +1,51 @@\n+/* { dg-do run } */ \n+/* { dg-options \"-march=i586 -fomit-frame-pointer\" { target { { i?86-*-* x86_64-*-* } && ilp32 } } } */\n+\n+__attribute__((noreturn,noinline)) void abrt (const char *fi, const char *fu)\n+{\n+  __builtin_abort ();\n+}\n+\n+__attribute__((noinline)) int f (int k)\n+{\n+  return k;\n+}\n+\n+__attribute__((noinline)) int g (int t, int k)\n+{\n+  int b;\n+\n+  switch (t)\n+    {\n+    case 0:\n+      abrt (__FILE__, __FUNCTION__);\n+\n+    case 1:\n+      b = f (k);\n+      break;\n+\n+    case 2:\n+      b = f (k);\n+      break;\n+\n+    case 3:\n+      b = f (k);\n+      break;\n+\n+    case 4:\n+      b = f (k);\n+      break;\n+\n+    default:\n+      abrt (__FILE__, __FUNCTION__);\n+    }\n+\n+  return b;\n+}\n+\n+int main (void)\n+{\n+  if (g (3, 1337) != 1337)\n+      abrt (__FILE__, __FUNCTION__);\n+  return 0;\n+}"}]}