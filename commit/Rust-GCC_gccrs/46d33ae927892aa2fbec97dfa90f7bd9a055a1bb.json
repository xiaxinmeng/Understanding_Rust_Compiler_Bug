{"sha": "46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZkMzNhZTkyNzg5MmFhMmZiZWM5N2RmYTkwZjdiZDlhMDU1YTFiYg==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-06-17T21:01:25Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-06-17T21:01:25Z"}, "message": "expmed.c (ceil_log2): Move from here...\n\n\t* expmed.c (ceil_log2): Move from here...\n\t* hwint.c: ... to here for older GCCs...\n\t* hwint.h: ... and here for newer GCCs.\n\t* rtl.h (ceil_log2): Remove prototype.\n\n\t* tree-phinodes.c: Do not include rtl.h.\n\t* Makefile.in (tree-phinodes.o): Do not depend on RTL_H.\n\nFrom-SVN: r188710", "tree": {"sha": "a4d54b10f7c0db155dd485fd849fee5c27f1b77c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4d54b10f7c0db155dd485fd849fee5c27f1b77c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/comments", "author": null, "committer": null, "parents": [{"sha": "0df965d73f62798d8b9288a27c351502edbb1831", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0df965d73f62798d8b9288a27c351502edbb1831", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0df965d73f62798d8b9288a27c351502edbb1831"}], "stats": {"total": 50, "additions": 33, "deletions": 17}, "files": [{"sha": "32080f2233c12bd046da85f15750b46da6346689", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "patch": "@@ -1,3 +1,13 @@\n+2012-06-17  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* expmed.c (ceil_log2): Move from here...\n+\t* hwint.c: ... to here for older GCCs...\n+\t* hwint.h: ... and here for newer GCCs.\n+\t* rtl.h (ceil_log2): Remove prototype.\n+\n+\t* tree-phinodes.c: Do not include rtl.h.\n+\t* Makefile.in (tree-phinodes.o): Do not depend on RTL_H.\n+\n 2012-06-17  Steven Bosscher  <steven@gcc.gnu.org>\n \n \t* config/cris/cris.h (TARGET_ELF): Remove."}, {"sha": "32190ec90f120edf4c84e60253203f711552ec02", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "patch": "@@ -2410,7 +2410,7 @@ tree-ssanames.o : tree-ssanames.c $(CONFIG_H) $(SYSTEM_H) coretypes.h \\\n    $(TM_H) $(TREE_H) $(TREE_FLOW_H) $(TREE_PASS_H)\n tree-phinodes.o : tree-phinodes.c $(CONFIG_H) $(SYSTEM_H) coretypes.h \\\n    $(TM_H) $(TREE_H) $(GGC_H) $(BASIC_BLOCK_H) $(TREE_FLOW_H) \\\n-   gt-tree-phinodes.h $(RTL_H) $(DIAGNOSTIC_CORE_H)  $(GIMPLE_H)\n+   gt-tree-phinodes.h $(DIAGNOSTIC_CORE_H) $(GIMPLE_H)\n domwalk.o : domwalk.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) \\\n    $(BASIC_BLOCK_H) domwalk.h sbitmap.h\n tree-ssa-live.o : tree-ssa-live.c $(TREE_FLOW_H) $(CONFIG_H) $(SYSTEM_H) \\"}, {"sha": "9f5f6a207aec98870e652ce6b85d465732556394", "filename": "gcc/expmed.c", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "patch": "@@ -3267,14 +3267,6 @@ expand_widening_mult (enum machine_mode mode, rtx op0, rtx op1, rtx target,\n \t\t       unsignedp, OPTAB_LIB_WIDEN);\n }\n \f\n-/* Return the smallest n such that 2**n >= X.  */\n-\n-int\n-ceil_log2 (unsigned HOST_WIDE_INT x)\n-{\n-  return floor_log2 (x - 1) + 1;\n-}\n-\n /* Choose a minimal N + 1 bit approximation to 1/D that can be used to\n    replace division by D, and put the least significant N bits of the result\n    in *MULTIPLIER_PTR and return the most significant bit."}, {"sha": "bfc5e3dedcdd84200ae4b5a29c99b3aecc4ee684", "filename": "gcc/hwint.c", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Fhwint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Fhwint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhwint.c?ref=46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "patch": "@@ -25,10 +25,11 @@ along with GCC; see the file COPYING3.  If not see\n \n #if GCC_VERSION < 3004\n \n-/* The functions clz_hwi, ctz_hwi, ffs_hwi, floor_log2 and exact_log2\n-   are defined as inline functions in hwint.h if GCC_VERSION >= 3004.\n-   The definitions here are used for older versions of GCC and non-GCC\n-   bootstrap compilers.  */\n+/* The functions clz_hwi, ctz_hwi, ffs_hwi, floor_log2, ceil_log2,\n+   and exact_log2 are defined as inline functions in hwint.h\n+   if GCC_VERSION >= 3004.\n+   The definitions here are used for older versions of GCC and\n+   non-GCC bootstrap compilers.  */\n \n /* Given X, an unsigned number, return the largest int Y such that 2**Y <= X.\n    If X is 0, return -1.  */\n@@ -61,6 +62,14 @@ floor_log2 (unsigned HOST_WIDE_INT x)\n   return t;\n }\n \n+/* Given X, an unsigned number, return the largest Y such that 2**Y >= X.  */\n+\n+int\n+ceil_log2 (unsigned HOST_WIDE_INT x)\n+{\n+  return floor_log2 (x - 1) + 1;\n+}\n+\n /* Return the logarithm of X, base 2, considering X unsigned,\n    if X is a power of 2.  Otherwise, returns -1.  */\n "}, {"sha": "00c9538fb112a2cb0784aef36b48ea34c702d055", "filename": "gcc/hwint.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Fhwint.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Fhwint.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhwint.h?ref=46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "patch": "@@ -185,6 +185,9 @@ extern int exact_log2                  (unsigned HOST_WIDE_INT);\n /* Return floor of log2, with -1 for zero.  */\n extern int floor_log2                  (unsigned HOST_WIDE_INT);\n \n+/* Return the smallest n such that 2**n >= X.  */\n+extern int ceil_log2\t\t\t(unsigned HOST_WIDE_INT);\n+\n #else /* GCC_VERSION >= 3004 */\n \n /* For convenience, define 0 -> word_size.  */\n@@ -234,6 +237,12 @@ floor_log2 (unsigned HOST_WIDE_INT x)\n   return HOST_BITS_PER_WIDE_INT - 1 - clz_hwi (x);\n }\n \n+static inline int\n+ceil_log2 (unsigned HOST_WIDE_INT x)\n+{\n+  return floor_log2 (x - 1) + 1;\n+}\n+\n static inline int\n exact_log2 (unsigned HOST_WIDE_INT x)\n {"}, {"sha": "f9864cb48479cbeb8bb072a5313a5dda479a0969", "filename": "gcc/rtl.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "patch": "@@ -1638,9 +1638,6 @@ extern int currently_expanding_to_rtl;\n \n /* Generally useful functions.  */\n \n-/* In expmed.c */\n-extern int ceil_log2 (unsigned HOST_WIDE_INT);\n-\n /* In explow.c */\n extern HOST_WIDE_INT trunc_int_for_mode\t(HOST_WIDE_INT, enum machine_mode);\n extern rtx plus_constant (enum machine_mode, rtx, HOST_WIDE_INT);"}, {"sha": "6408a52529806c8f9bb7b1d8ca58f09602e34ed5", "filename": "gcc/tree-phinodes.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Ftree-phinodes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46d33ae927892aa2fbec97dfa90f7bd9a055a1bb/gcc%2Ftree-phinodes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-phinodes.c?ref=46d33ae927892aa2fbec97dfa90f7bd9a055a1bb", "patch": "@@ -23,7 +23,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"coretypes.h\"\n #include \"tm.h\"\n #include \"tree.h\"\n-#include \"rtl.h\"\t/* FIXME: Only for ceil_log2, of all things...  */\n #include \"ggc.h\"\n #include \"basic-block.h\"\n #include \"tree-flow.h\""}]}