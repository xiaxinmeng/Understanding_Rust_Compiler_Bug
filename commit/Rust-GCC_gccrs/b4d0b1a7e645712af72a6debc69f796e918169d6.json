{"sha": "b4d0b1a7e645712af72a6debc69f796e918169d6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjRkMGIxYTdlNjQ1NzEyYWY3MmE2ZGViYzY5Zjc5NmU5MTgxNjlkNg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2018-05-29T07:08:11Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2018-05-29T07:08:11Z"}, "message": "[testsuite] Fix error message in scan-hidden/scan-not-hidden\n\n2018-05-29  Tom de Vries  <tom@codesourcery.com>\n\n\t* lib/scanasm.exp (scan-hidden, scan-not-hidden): Handle being called\n\twith no arguments.\n\nFrom-SVN: r260857", "tree": {"sha": "3b1c8d5c8cb882e2f6a559e2d4e25373902cb33e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b1c8d5c8cb882e2f6a559e2d4e25373902cb33e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b4d0b1a7e645712af72a6debc69f796e918169d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4d0b1a7e645712af72a6debc69f796e918169d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4d0b1a7e645712af72a6debc69f796e918169d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4d0b1a7e645712af72a6debc69f796e918169d6/comments", "author": null, "committer": null, "parents": [{"sha": "240e12d031ad63550e9851aa4dd61f56f7d8f05b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/240e12d031ad63550e9851aa4dd61f56f7d8f05b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/240e12d031ad63550e9851aa4dd61f56f7d8f05b"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "43210ab82486a85d1e4efd69844b20694a7defc6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b4d0b1a7e645712af72a6debc69f796e918169d6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b4d0b1a7e645712af72a6debc69f796e918169d6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b4d0b1a7e645712af72a6debc69f796e918169d6", "patch": "@@ -1,3 +1,8 @@\n+2018-05-29  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* lib/scanasm.exp (scan-hidden, scan-not-hidden): Handle being called\n+\twith no arguments.\n+\n 2018-05-28  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/85934"}, {"sha": "5c574d550cb1719404575c8cae021a5a78de6ccc", "filename": "gcc/testsuite/lib/scanasm.exp", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b4d0b1a7e645712af72a6debc69f796e918169d6/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b4d0b1a7e645712af72a6debc69f796e918169d6/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fscanasm.exp?ref=b4d0b1a7e645712af72a6debc69f796e918169d6", "patch": "@@ -125,11 +125,13 @@ proc scan-hidden { args } {\n     set filename [lindex $testcase 0]\n     set output_file \"[file rootname [file tail $filename]].s\"\n \n-    set symbol [lindex $args 0]\n+    if { [llength $args] > 0 } {\n+\tset symbol [lindex $args 0]\n \n-    set hidden_scan [hidden-scan-for $symbol]\n+\tset hidden_scan [hidden-scan-for $symbol]\n \n-    set args [lreplace $args 0 0 \"$hidden_scan\"]\n+\tset args [lreplace $args 0 0 \"$hidden_scan\"]\n+    }\n \n     dg-scan \"scan-hidden\" 1 $testcase $output_file $args\n }\n@@ -143,10 +145,12 @@ proc scan-not-hidden { args } {\n     set filename [lindex $testcase 0]\n     set output_file \"[file rootname [file tail $filename]].s\"\n \n-    set symbol [lindex $args 0]\n-    set hidden_scan [hidden-scan-for $symbol]\n+    if { [llength $args] > 0 } {\n+\tset symbol [lindex $args 0]\n+\tset hidden_scan [hidden-scan-for $symbol]\n \n-    set args [lreplace $args 0 0 \"$hidden_scan\"]\n+\tset args [lreplace $args 0 0 \"$hidden_scan\"]\n+    }\n \n     dg-scan \"scan-not-hidden\" 0 $testcase $output_file $args\n }"}]}