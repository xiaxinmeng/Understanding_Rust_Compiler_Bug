{"sha": "6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmRmZWI3Y2VhYzc0YjYxY2I3MWIwYzM5ZGMzYjAyODk3YWViNzA4Nw==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2016-01-28T15:41:46Z"}, "committer": {"name": "Wilco Dijkstra", "email": "wilco@gcc.gnu.org", "date": "2016-01-28T15:41:46Z"}, "message": "A recent change added UNSPEC to the CCMP patterns to stop combine optimizing the immediate in a rare case.\n\nA recent change added UNSPEC to the CCMP patterns to stop combine optimizing\nthe immediate in a rare case.  This requires a fix to the CCMP cost\ncalculation as the CCMP instruction with unspec is no longer recognized.\nFix the ccmp_1.c test by adding -ffinite-math-only so FCCMPE is emitted on\nrelational compares.\n\n2016-01-28  Wilco Dijkstra  <wdijkstr@arm.com>\n\n    gcc/\n\t* config/aarch64/aarch64.c (aarch64_if_then_else_costs):\n\tRemove CONST_INT_P check in CCMP cost calculation.\n\n    gcc/testsuite/\n\t* gcc.target/aarch64/ccmp_1.c: Fix test issue.\n\nFrom-SVN: r232930", "tree": {"sha": "bc7a7c873de37353cf30b98682c4cbb8d7781166", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bc7a7c873de37353cf30b98682c4cbb8d7781166"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/comments", "author": null, "committer": null, "parents": [{"sha": "e448880c20c01a2925c7707838841c8c117c9e8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e448880c20c01a2925c7707838841c8c117c9e8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e448880c20c01a2925c7707838841c8c117c9e8d"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "551dedfc2d227cd30c08c6e5cc11a1a715111254", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "patch": "@@ -1,3 +1,8 @@\n+2016-01-28  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\t* config/aarch64/aarch64.c (aarch64_if_then_else_costs):\n+\tRemove CONST_INT_P check in CCMP cost calculation.\n+\n 2016-01-28  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \t* config/aarch64/aarch64.c (generic_vector_cost):"}, {"sha": "bba7a9b6f42c2587cefbcb84dd6ace6a5de4b1a8", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "patch": "@@ -6010,7 +6010,7 @@ aarch64_if_then_else_costs (rtx op0, rtx op1, rtx op2, int *cost, bool speed)\n   else if (GET_MODE_CLASS (GET_MODE (inner)) == MODE_CC)\n     {\n       /* CCMP.  */\n-      if ((GET_CODE (op1) == COMPARE) && CONST_INT_P (op2))\n+      if (GET_CODE (op1) == COMPARE)\n \t{\n \t  /* Increase cost of CCMP reg, 0, imm, CC to prefer CMP reg, 0.  */\n \t  if (XEXP (op1, 1) == const0_rtx)"}, {"sha": "6e5e218815361ed31dc90a2d8abd8bb6f653d9d0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "patch": "@@ -1,3 +1,7 @@\n+2016-01-28  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\t* gcc.target/aarch64/ccmp_1.c: Fix test issue.\n+\n 2016-01-28  David Edelsohn  <dje.gcc@gmail.com>\n \n \t* gcc.dg/pr65980.c: Skip on AIX."}, {"sha": "fd38b2cfdb834c6395ddb939b54d23345c51b8d9", "filename": "gcc/testsuite/gcc.target/aarch64/ccmp_1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fccmp_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fccmp_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fccmp_1.c?ref=6dfeb7ceac74b61cb71b0c39dc3b02897aeb7087", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2\" } */\n+/* { dg-options \"-O2 -ffinite-math-only\" } */\n \n int\n f1 (int a)"}]}