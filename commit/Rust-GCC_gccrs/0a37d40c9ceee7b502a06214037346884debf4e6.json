{"sha": "0a37d40c9ceee7b502a06214037346884debf4e6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGEzN2Q0MGM5Y2VlZTdiNTAyYTA2MjE0MDM3MzQ2ODg0ZGViZjRlNg==", "commit": {"author": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2017-05-30T15:34:00Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2017-05-30T15:34:00Z"}, "message": "gimplify_modify_expr: avoid DECL_DEBUG_EXPR links across functions\n\nAn upcoming patch exposes a bug in gimplify_modify_expr.  There, we try\nnot to create DECL_DEBUG_EXPR links across functions, however we don't\ncheck that *FROM_P actually belongs to the current function before\nmodifying it.  This patch fixes this oversight.\n\ngcc/\n\n\t* gimplify.c (gimplify_modify_expr): Don't create a\n\tDECL_DEBUG_EXPR link if *FROM_P does not belong to the current\n\tfunction.\n\nFrom-SVN: r248688", "tree": {"sha": "f1761d3932477acc359771d0b1794dacbd2457af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1761d3932477acc359771d0b1794dacbd2457af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0a37d40c9ceee7b502a06214037346884debf4e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a37d40c9ceee7b502a06214037346884debf4e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a37d40c9ceee7b502a06214037346884debf4e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a37d40c9ceee7b502a06214037346884debf4e6/comments", "author": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e2f353338584c197e7d62370821fe48f76a52ce8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2f353338584c197e7d62370821fe48f76a52ce8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2f353338584c197e7d62370821fe48f76a52ce8"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "9da74328dcf8b270f4681560df541f1e5ead4912", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a37d40c9ceee7b502a06214037346884debf4e6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a37d40c9ceee7b502a06214037346884debf4e6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0a37d40c9ceee7b502a06214037346884debf4e6", "patch": "@@ -1,3 +1,9 @@\n+2017-05-30  Pierre-Marie de Rodat  <derodat@adacore.com>\n+\n+\t* gimplify.c (gimplify_modify_expr): Don't create a\n+\tDECL_DEBUG_EXPR link if *FROM_P does not belong to the current\n+\tfunction.\n+\n 2017-05-30  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \t* config/arm/arm-builtins.c (arm_expand_builtin): Remove const."}, {"sha": "2c7fc9fabd14cfbdfa0c8c8767fe64e05a8a2b4c", "filename": "gcc/gimplify.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a37d40c9ceee7b502a06214037346884debf4e6/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a37d40c9ceee7b502a06214037346884debf4e6/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=0a37d40c9ceee7b502a06214037346884debf4e6", "patch": "@@ -5580,7 +5580,8 @@ gimplify_modify_expr (tree *expr_p, gimple_seq *pre_p, gimple_seq *post_p,\n       && DECL_IGNORED_P (*from_p)\n       && DECL_P (*to_p)\n       && !DECL_IGNORED_P (*to_p)\n-      && decl_function_context (*to_p) == current_function_decl)\n+      && decl_function_context (*to_p) == current_function_decl\n+      && decl_function_context (*from_p) == current_function_decl)\n     {\n       if (!DECL_NAME (*from_p) && DECL_NAME (*to_p))\n \tDECL_NAME (*from_p)"}]}