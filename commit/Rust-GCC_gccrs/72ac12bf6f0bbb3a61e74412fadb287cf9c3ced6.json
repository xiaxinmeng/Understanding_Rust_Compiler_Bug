{"sha": "72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJhYzEyYmY2ZjBiYmIzYTYxZTc0NDEyZmFkYjI4N2NmOWMzY2VkNg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-12-24T01:47:10Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-12-24T01:47:10Z"}, "message": "utils.c (end_subprog_body): Push GC context around rest_of_compilation for nested functions.\n\n        * utils.c (end_subprog_body): Push GC context around\n        rest_of_compilation for nested functions.\n\nFrom-SVN: r48294", "tree": {"sha": "b37a87a99944963c71884b215fa3a08b68ee91de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b37a87a99944963c71884b215fa3a08b68ee91de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6/comments", "author": null, "committer": null, "parents": [{"sha": "b6e220169cd0b67067e1c4929eb08b964191aa1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6e220169cd0b67067e1c4929eb08b964191aa1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6e220169cd0b67067e1c4929eb08b964191aa1b"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "20a7cdf579eb3cfeeade10e4262d9f278870ae14", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6", "patch": "@@ -1,3 +1,8 @@\n+2001-12-23  Richard Henderson  <rth@redhat.com>\n+\n+\t* utils.c (end_subprog_body): Push GC context around\n+\trest_of_compilation for nested functions.\n+\n 2001-12-23  Richard Henderson  <rth@redhat.com>\n \n \t* 5nosinte.ads: Get definition of \"int\" from Interfaces.C."}, {"sha": "ead4d02d83b5ed696d1aa43a3c77a22908a00cf7", "filename": "gcc/ada/utils.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6/gcc%2Fada%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6/gcc%2Fada%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Futils.c?ref=72ac12bf6f0bbb3a61e74412fadb287cf9c3ced6", "patch": "@@ -6,7 +6,7 @@\n  *                                                                          *\n  *                          C Implementation File                           *\n  *                                                                          *\n- *                            $Revision: 1.6 $\n+ *                            $Revision: 1.7 $\n  *                                                                          *\n  *          Copyright (C) 1992-2001, Free Software Foundation, Inc.         *\n  *                                                                          *\n@@ -1844,8 +1844,18 @@ end_subprog_body ()\n   DECL_CONTEXT (DECL_RESULT (current_function_decl)) = current_function_decl;\n \n   expand_function_end (input_filename, lineno, 0);\n+\n+  /* If this is a nested function, push a new GC context.  That will keep\n+     local variables on the stack from being collected while we're doing\n+     the compilation of this function.  */\n+  if (function_nesting_depth > 1)\n+    ggc_push_context ();\n+\n   rest_of_compilation (current_function_decl);\n \n+  if (function_nesting_depth > 1)\n+    ggc_pop_context ();\n+\n #if 0\n   /* If we're sure this function is defined in this file then mark it\n      as such */"}]}