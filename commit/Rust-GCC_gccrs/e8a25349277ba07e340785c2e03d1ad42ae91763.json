{"sha": "e8a25349277ba07e340785c2e03d1ad42ae91763", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZThhMjUzNDkyNzdiYTA3ZTM0MDc4NWMyZTAzZDFhZDQyYWU5MTc2Mw==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2007-04-12T18:10:10Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2007-04-12T18:10:10Z"}, "message": "re PR fortran/31266 (Spurious(?) warning about character truncation)\n\nPR fortran/31266\nfortran/\n* primary.c (gfc_variable_attr): Don't copy string length if it\ndoesn't make sense.\n* resolve.c (resolve_code): Clarify error message.\ntestsuite/\n* gfortran.dg/char_assign_1.f90: New.\n\nFrom-SVN: r123759", "tree": {"sha": "550df545c484ecad51d5eaf3a1dc655c91c223a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/550df545c484ecad51d5eaf3a1dc655c91c223a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e8a25349277ba07e340785c2e03d1ad42ae91763", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8a25349277ba07e340785c2e03d1ad42ae91763", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8a25349277ba07e340785c2e03d1ad42ae91763", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8a25349277ba07e340785c2e03d1ad42ae91763/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "690af37922ff3399d545d03196867ad1424c14aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/690af37922ff3399d545d03196867ad1424c14aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/690af37922ff3399d545d03196867ad1424c14aa"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "ca2721c528441950eef60117896e12a6eaa91e19", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=e8a25349277ba07e340785c2e03d1ad42ae91763", "patch": "@@ -1,5 +1,10 @@\n 2007-04-12  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n \n+\tPR fortran/31266\n+\t* primary.c (gfc_variable_attr): Don't copy string length if it\n+\tdoesn't make sense.\n+\t* resolve.c (resolve_code): Clarify error message.\n+\n \tPR fortran/31471\n \t* decl.c (gfc_match_end): Also check for construct name in END\n \tFORALL and END WERE statements."}, {"sha": "1ef37a695512bb17c4909a2b673bbf7afe8cef51", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=e8a25349277ba07e340785c2e03d1ad42ae91763", "patch": "@@ -1844,7 +1844,14 @@ gfc_variable_attr (gfc_expr *expr, gfc_typespec *ts)\n       case REF_COMPONENT:\n \tgfc_get_component_attr (&attr, ref->u.c.component);\n \tif (ts != NULL)\n-\t  *ts = ref->u.c.component->ts;\n+\t  {\n+\t    *ts = ref->u.c.component->ts;\n+\t    /* Don't set the string length if a substring reference\n+\t       follows.  */\n+\t    if (ts->type == BT_CHARACTER\n+\t\t&& ref->next && ref->next->type == REF_SUBSTRING)\n+\t\tts->cl = NULL;\n+\t  }\n \n \tpointer = ref->u.c.component->pointer;\n \tallocatable = ref->u.c.component->allocatable;"}, {"sha": "467ccf47681439dc263c379fd763a0e187f4378b", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=e8a25349277ba07e340785c2e03d1ad42ae91763", "patch": "@@ -5135,8 +5135,9 @@ resolve_code (gfc_code *code, gfc_namespace *ns)\n \t\trlen = mpz_get_si (code->expr2->ts.cl->length->value.integer);\n \n \t      if (rlen && llen && rlen > llen)\n-\t\tgfc_warning_now (\"rhs of CHARACTER assignment at %L will be \"\n-\t\t\t\t \"truncated (%d/%d)\", &code->loc, rlen, llen);\n+\t\tgfc_warning_now (\"CHARACTER expression will be truncated \"\n+\t\t\t\t \"in assignment (%d/%d) at %L\",\n+\t\t\t\t llen, rlen, &code->loc);\n \t    }\n \n \t  if (gfc_pure (NULL))"}, {"sha": "2beab7818320305894fe058da7160089a16ee22a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8a25349277ba07e340785c2e03d1ad42ae91763/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e8a25349277ba07e340785c2e03d1ad42ae91763", "patch": "@@ -1,5 +1,8 @@\n 2007-04-12  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n \n+\tPR fortran/31266\n+\t* gfortran.dg/char_assign_1.f90: New.\n+\n \tPR fortran/31471\n \t* gfortran.dg/block_name_1.f90: New.\n \t* gfortran.dg/block_name_2.f90: New."}]}