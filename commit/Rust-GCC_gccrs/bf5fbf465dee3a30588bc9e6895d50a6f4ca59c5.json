{"sha": "bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY1ZmJmNDY1ZGVlM2EzMDU4OGJjOWU2ODk1ZDUwYTZmNGNhNTljNQ==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2017-01-11T17:28:52Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@gcc.gnu.org", "date": "2017-01-11T17:28:52Z"}, "message": "PR c/78768 - -Walloca-larger-than and -Wformat-length warnings disabled by -flto\n\ngcc/ChangeLog:\n\t* c.opt (-Walloca-larger-than, -Wformat-length, -Wformat-truncation):\n\tAlso enable for LTO.\n\ngcc/testsuite/ChangeLog:\n\tPR c/78768\n\t* gcc.dg/pr78768.c: New test.\n\nFrom-SVN: r244326", "tree": {"sha": "a4a7ff7d85ae5229e27ef5950d168a127b78b34b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4a7ff7d85ae5229e27ef5950d168a127b78b34b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "19ff0049cd22794359a46c86d34fa19be655ba3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19ff0049cd22794359a46c86d34fa19be655ba3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19ff0049cd22794359a46c86d34fa19be655ba3d"}], "stats": {"total": 30, "additions": 27, "deletions": 3}, "files": [{"sha": "8faecd4e6a583765ece14e6e71a29419d357ec41", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "patch": "@@ -1,3 +1,9 @@\n+2017-01-11  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR c/78768\n+\t* c.opt (-Walloca-larger-than, -Wformat-length, -Wformat-truncation):\n+\tAlso enable for LTO.\n+\n 2017-01-10  Jason Merrill  <jason@redhat.com>\n \n \tImplement P0195R2, C++17 variadic using."}, {"sha": "1b49d211bc69e598b378bf6538e8a1f1b1aab77a", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "patch": "@@ -313,7 +313,7 @@ C ObjC C++ ObjC++ Var(warn_alloc_zero) Warning\n -Walloc-zero Warn for calls to allocation functions that specify zero bytes.\n \n Walloca-larger-than=\n-C ObjC C++ ObjC++ Var(warn_alloca_limit) Warning Joined RejectNegative UInteger\n+C ObjC C++ LTO ObjC++ Var(warn_alloca_limit) Warning Joined RejectNegative UInteger\n -Walloca-larger-than=<number> Warn on unbounded uses of\n alloca, and on bounded uses of alloca whose bound can be larger than\n <number> bytes.\n@@ -521,7 +521,7 @@ C ObjC C++ ObjC++ Var(warn_format_extra_args) Warning LangEnabledBy(C ObjC C++ O\n Warn if passing too many arguments to a function for its format string.\n \n Wformat-length\n-C ObjC C++ ObjC++ Warning Alias(Wformat-length=, 1, 0)\n+C ObjC C++ LTO ObjC++ Warning Alias(Wformat-length=, 1, 0)\n Warn about function calls with format strings that write past the end\n of the destination region.  Same as -Wformat-length=1.\n \n@@ -538,7 +538,7 @@ C ObjC C++ ObjC++ Var(warn_format_signedness) Warning\n Warn about sign differences with format functions.\n \n Wformat-truncation\n-C ObjC C++ ObjC++ Warning Alias(Wformat-truncation=, 1, 0)\n+C ObjC C++ LTO ObjC++ Warning Alias(Wformat-truncation=, 1, 0)\n Warn about calls to snprintf and similar functions that truncate output.\n Same as -Wformat-truncation=1.\n "}, {"sha": "bd56e7bcefbd84d7e67a97f67177641a583d0e26", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "patch": "@@ -1,3 +1,8 @@\n+2017-01-11  Martin Sebor  <msebor@redhat.com>\n+\n+\tPR c/78768\n+\t* gcc.dg/pr78768.c: New test.\n+\n 2017-01-11  David Malcolm  <dmalcolm@redhat.com>\n \n \tPR driver/78877"}, {"sha": "e3d16a7ea639cd21d1fe8b247987587a2845f56e", "filename": "gcc/testsuite/gcc.dg/pr78768.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Ftestsuite%2Fgcc.dg%2Fpr78768.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5/gcc%2Ftestsuite%2Fgcc.dg%2Fpr78768.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr78768.c?ref=bf5fbf465dee3a30588bc9e6895d50a6f4ca59c5", "patch": "@@ -0,0 +1,13 @@\n+/* PR c/78768 - -Walloca-larger-than and -Wformat-length warnings disabled\n+   by -flto\n+  { dg-do run }\n+  { dg-options \"-O2 -Walloca-larger-than=10 -Wformat -Wformat-length -flto\" } */\n+\n+int main (void)\n+{\n+  char *d = (char *)__builtin_alloca (12);  /* { dg-warning \"argument to .alloca. is too large\" } */\n+\n+  __builtin_sprintf (d, \"%32s\", \"x\");   /* { dg-warning \"directive writing 32 bytes into a region of size 12\" \"-Wformat-length\" { xfail *-*-* } } */\n+\n+  return 0;\n+}"}]}