{"sha": "0ec5fef2187bc6f4f962e3afe1b2d829b7474d80", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVjNWZlZjIxODdiYzZmNGY5NjJlM2FmZTFiMmQ4MjliNzQ3NGQ4MA==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2003-11-18T07:17:01Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2003-11-18T07:17:01Z"}, "message": "jar.exp: Cleanup files and reset CLASSPATH.\n\n2003-11-18  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* libjava.jar/jar.exp: Cleanup files and reset CLASSPATH.\n\nFrom-SVN: r73696", "tree": {"sha": "3c03ed54e6c7de0766fb91507d9ee6d836f78bfb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c03ed54e6c7de0766fb91507d9ee6d836f78bfb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80/comments", "author": null, "committer": null, "parents": [{"sha": "217ec3ae923010d33e00cf6de3c3550c714bf644", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/217ec3ae923010d33e00cf6de3c3550c714bf644", "html_url": "https://github.com/Rust-GCC/gccrs/commit/217ec3ae923010d33e00cf6de3c3550c714bf644"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "674b0b74a53807b283ed874a34cd95413faf64a2", "filename": "libjava/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80/libjava%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80/libjava%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2FChangeLog?ref=0ec5fef2187bc6f4f962e3afe1b2d829b7474d80", "patch": "@@ -1,3 +1,7 @@\n+2003-11-18  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* libjava.jar/jar.exp: Cleanup files and reset CLASSPATH.\n+\n 2003-11-17  Jeff Sturm  <jsturm@one-point.com>\n \n \t* libjava.compile/PR12857.java: New test case."}, {"sha": "bff1fea2c8c9613adddc622ddb9026c32d2e1433", "filename": "libjava/testsuite/libjava.jar/jar.exp", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80/libjava%2Ftestsuite%2Flibjava.jar%2Fjar.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ec5fef2187bc6f4f962e3afe1b2d829b7474d80/libjava%2Ftestsuite%2Flibjava.jar%2Fjar.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Ftestsuite%2Flibjava.jar%2Fjar.exp?ref=0ec5fef2187bc6f4f962e3afe1b2d829b7474d80", "patch": "@@ -19,7 +19,7 @@ proc gcj_jar_compile_one {jarfile mainclass} {\n proc gcj_jar_interpret {jarfile} {\n   global INTERPRETER srcdir\n \n-  set gij [libjava_find_gij] \n+  set gij [libjava_find_gij]\n   # libjava_find_gij will return `gij' if it couldn't find the\n   # program; in this case we want to skip the test.\n   if {$INTERPRETER != \"yes\" || $gij == \"gij\"} {\n@@ -35,7 +35,7 @@ proc gcj_jar_interpret {jarfile} {\n }\n \n proc gcj_jar_run {} {\n-  global srcdir subdir\n+  global srcdir subdir env\n   foreach jar [lsort [glob -nocomplain ${srcdir}/${subdir}/*.jar]] {\n     set xff [file rootname $jar].xfail\n     set main {}\n@@ -54,6 +54,14 @@ proc gcj_jar_run {} {\n       gcj_jar_interpret $jar\n     }\n   }\n+    # When we succeed we remove all our clutter.\n+    eval gcj_cleanup [glob -nocomplain -- ${main}.*] [list $main ]\n+\n+    # Reset CLASSPATH that we do not look into testsuite/libjava.jar for *.jar\n+    # files which do not belong to the libgcj itself.\n+    set env(CLASSPATH) \"\"\n+\n+    return 1\n }\n \n gcj_jar_run"}]}