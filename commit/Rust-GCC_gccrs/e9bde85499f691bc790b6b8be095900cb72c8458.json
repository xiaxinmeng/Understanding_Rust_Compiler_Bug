{"sha": "e9bde85499f691bc790b6b8be095900cb72c8458", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTliZGU4NTQ5OWY2OTFiYzc5MGI2YjhiZTA5NTkwMGNiNzJjODQ1OA==", "commit": {"author": {"name": "Kirill Yukhin", "email": "kirill.yukhin@intel.com", "date": "2016-03-21T10:51:04Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2016-03-21T10:51:04Z"}, "message": "re PR target/70293 ([ICE, AVX-512] Wrong reg constraints in vec_dup)\n\nPR target/70293\n\ngcc/\n\t* config/i386 (define_insn \"*vec_dup<mode>\"/AVX2): Block\n\tthird alternative for AVX-512VL target,\n\ngcc/testsuite/\n\t* gcc.target/i386/pr70293.c: New test.\n\nFrom-SVN: r234363", "tree": {"sha": "e39e262807f6832b5352b56a5a22d0e6e89675ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e39e262807f6832b5352b56a5a22d0e6e89675ef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9bde85499f691bc790b6b8be095900cb72c8458", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9bde85499f691bc790b6b8be095900cb72c8458", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9bde85499f691bc790b6b8be095900cb72c8458", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9bde85499f691bc790b6b8be095900cb72c8458/comments", "author": null, "committer": null, "parents": [{"sha": "c1db25ac14ae4bfd2278cd33cd63b9bacef1df0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1db25ac14ae4bfd2278cd33cd63b9bacef1df0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1db25ac14ae4bfd2278cd33cd63b9bacef1df0b"}], "stats": {"total": 52, "additions": 51, "deletions": 1}, "files": [{"sha": "02c2580193999fd46c1b0f54fa18e0ac16c751d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e9bde85499f691bc790b6b8be095900cb72c8458", "patch": "@@ -1,3 +1,9 @@\n+2016-03-21  Kirill Yukhin  <kirill.yukhin@intel.com>\n+\n+\tPR target/70293\n+        * config/i386/sse.md: (define_insn \"*vec_dup<mode>\"/AVX2):\n+\tBlock third alternative for AVX-512VL target,\n+\n 2016-03-21  Martin Liska  <mliska@suse.cz>\n \n \tPR hsa/70234"}, {"sha": "44141ea5d97f92e2e067d84fd79a33ea5f90988e", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=e9bde85499f691bc790b6b8be095900cb72c8458", "patch": "@@ -17419,7 +17419,8 @@\n    v<sseintprefix>broadcast<bcstscalarsuff>\\t{%1, %0|%0, %1}\n    v<sseintprefix>broadcast<bcstscalarsuff>\\t{%x1, %0|%0, %x1}\n    #\"\n-  [(set_attr \"type\" \"ssemov\")\n+  [(set_attr \"isa\" \"*,*,noavx512vl\")\n+   (set_attr \"type\" \"ssemov\")\n    (set_attr \"prefix_extra\" \"1\")\n    (set_attr \"prefix\" \"maybe_evex\")\n    (set_attr \"mode\" \"<sseinsnmode>\")])"}, {"sha": "9f4d811710f7e6e1cc63d8d885411566bd845b4f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e9bde85499f691bc790b6b8be095900cb72c8458", "patch": "@@ -1,3 +1,8 @@\n+2016-03-21  Kirill Yukhin  <kirill.yukhin@intel.com>\n+\n+\tPR target/70293\n+\t* gcc.target/i386/pr70293.c: New test.\n+\n 2016-03-21  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/70288"}, {"sha": "4510166ead8647c4d0b59b47dfc818871a090cea", "filename": "gcc/testsuite/gcc.target/i386/pr70293.c", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70293.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9bde85499f691bc790b6b8be095900cb72c8458/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70293.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70293.c?ref=e9bde85499f691bc790b6b8be095900cb72c8458", "patch": "@@ -0,0 +1,38 @@\n+/* PR target/70293 */\n+/* { dg-do compile } */\n+/* { dg-require-effective-target lp64 } */\n+/* { dg-options \"-mtune=westmere -mavx512vl -O2\" } */\n+\n+typedef short __v8hi __attribute__((__vector_size__(16)));\n+typedef int __v8hu __attribute__((__vector_size__(16)));\n+typedef long __m128i __attribute__((__vector_size__(16)));\n+__m128i _mm_madd_epi16___B, _mm_mullo_epi16___A,\n+    scaled_bilinear_scanline_sse2_8888_8_8888_OVER_xmm_b,\n+    scaled_bilinear_scanline_sse2_8888_8_8888_OVER___trans_tmp_16,\n+    scaled_bilinear_scanline_sse2_8888_8_8888_OVER___trans_tmp_13;\n+int _mm_srli_epi16___B, scaled_bilinear_scanline_sse2_8888_8_8888_OVER_m,\n+    scaled_bilinear_scanline_sse2_8888_8_8888_OVER_dst,\n+    scaled_bilinear_scanline_sse2_8888_8_8888_OVER_wt;\n+__m128i _mm_set_epi16();\n+void _mm_cvtsi128_si32();\n+void\n+scaled_bilinear_scanline_sse2_8888_8_8888_OVER(int p1) {\n+  __m128i __trans_tmp_12, __trans_tmp_6, __trans_tmp_5, xmm_x = _mm_set_epi16();\n+  int mask;\n+  __trans_tmp_5 = (__m128i){scaled_bilinear_scanline_sse2_8888_8_8888_OVER_wt};\n+  __trans_tmp_6 = (__m128i)(__v8hi){p1, p1, p1, p1, p1, p1, p1, p1};\n+  while (scaled_bilinear_scanline_sse2_8888_8_8888_OVER_dst) {\n+    scaled_bilinear_scanline_sse2_8888_8_8888_OVER_m = mask++;\n+    if (scaled_bilinear_scanline_sse2_8888_8_8888_OVER_m) {\n+      __trans_tmp_12 =\n+          (__m128i)((__v8hu)_mm_mullo_epi16___A * (__v8hu)__trans_tmp_6);\n+      scaled_bilinear_scanline_sse2_8888_8_8888_OVER_xmm_b = __trans_tmp_12;\n+      scaled_bilinear_scanline_sse2_8888_8_8888_OVER___trans_tmp_13 =\n+          (__m128i)__builtin_ia32_psrlwi128((__v8hi)xmm_x, _mm_srli_epi16___B);\n+      scaled_bilinear_scanline_sse2_8888_8_8888_OVER___trans_tmp_16 =\n+          (__m128i)__builtin_ia32_pmaddwd128((__v8hi)__trans_tmp_5,\n+                                             (__v8hi)_mm_madd_epi16___B);\n+      _mm_cvtsi128_si32();\n+    }\n+  }\n+}"}]}