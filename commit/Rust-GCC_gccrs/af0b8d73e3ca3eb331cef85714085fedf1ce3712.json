{"sha": "af0b8d73e3ca3eb331cef85714085fedf1ce3712", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWYwYjhkNzNlM2NhM2ViMzMxY2VmODU3MTQwODVmZWRmMWNlMzcxMg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2009-09-14T17:01:05Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2009-09-14T17:01:05Z"}, "message": "re PR libstdc++/41037 (dec not set in cerr flags)\n\n2009-09-14  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR libstdc++/41037\n\t* src/ios_init.cc (ios_base::Init::Init): Properly initialize cerr\n\tand wcerr flags.\n\t* testsuite/27_io/objects/char/41037.cc: New.\n\t* testsuite/27_io/objects/wchar_t/41037.cc: Likewise.\n\nFrom-SVN: r151692", "tree": {"sha": "f2b39180f2e97baf3e89753410587e0af9044aef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f2b39180f2e97baf3e89753410587e0af9044aef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af0b8d73e3ca3eb331cef85714085fedf1ce3712", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af0b8d73e3ca3eb331cef85714085fedf1ce3712", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af0b8d73e3ca3eb331cef85714085fedf1ce3712", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af0b8d73e3ca3eb331cef85714085fedf1ce3712/comments", "author": null, "committer": null, "parents": [{"sha": "5910fb59b9df9dbdde8a70a71609c4bc1467a29b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5910fb59b9df9dbdde8a70a71609c4bc1467a29b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5910fb59b9df9dbdde8a70a71609c4bc1467a29b"}], "stats": {"total": 82, "additions": 80, "deletions": 2}, "files": [{"sha": "f47356699c1194e635ece7caa6b8d60a35b5f300", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=af0b8d73e3ca3eb331cef85714085fedf1ce3712", "patch": "@@ -1,3 +1,11 @@\n+2009-09-14  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR libstdc++/41037\n+\t* src/ios_init.cc (ios_base::Init::Init): Properly initialize cerr\n+\tand wcerr flags.\n+\t* testsuite/27_io/objects/char/41037.cc: New.\n+\t* testsuite/27_io/objects/wchar_t/41037.cc: Likewise.\n+\n 2009-09-14  Andrew Stubbs  <ams@codesourcery.com>\n \n \t* config/cpu/sh/atomicity.h (__exchange_and_add): Set earlyclobber"}, {"sha": "1885d825971a1007136ab9b00a9de0aacc391a06", "filename": "libstdc++-v3/src/ios_init.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2Fsrc%2Fios_init.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2Fsrc%2Fios_init.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fios_init.cc?ref=af0b8d73e3ca3eb331cef85714085fedf1ce3712", "patch": "@@ -93,7 +93,7 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n \tnew (&cerr) ostream(&buf_cerr_sync);\n \tnew (&clog) ostream(&buf_cerr_sync);\n \tcin.tie(&cout);\n-\tcerr.flags(ios_base::unitbuf);\n+\tcerr.setf(ios_base::unitbuf);\n \t// _GLIBCXX_RESOLVE_LIB_DEFECTS\n \t// 455. cerr::tie() and wcerr::tie() are overspecified.\n \tcerr.tie(&cout);\n@@ -108,7 +108,7 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n \tnew (&wcerr) wostream(&buf_wcerr_sync);\n \tnew (&wclog) wostream(&buf_wcerr_sync);\n \twcin.tie(&wcout);\n-\twcerr.flags(ios_base::unitbuf);\n+\twcerr.setf(ios_base::unitbuf);\n \twcerr.tie(&wcout);\t\n #endif\n \t"}, {"sha": "a38221cab6e291685046b6a154ef2dc47b7960b9", "filename": "libstdc++-v3/testsuite/27_io/objects/char/41037.cc", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F41037.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F41037.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fchar%2F41037.cc?ref=af0b8d73e3ca3eb331cef85714085fedf1ce3712", "patch": "@@ -0,0 +1,35 @@\n+// Copyright (C) 2009 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+ \n+#include <iostream>\n+#include <testsuite_hooks.h>\n+\n+// PR libstdc++/41037\n+void test01()\n+{\n+  bool test __attribute__((unused)) = true;\n+\n+  VERIFY( std::cerr.flags() & std::ios_base::dec );\n+  VERIFY( std::cerr.flags() & std::ios_base::skipws );\n+  VERIFY( std::cerr.flags() & std::ios_base::unitbuf );\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}, {"sha": "b3c01a0b7dca6166486fcdb4948fd2a5d88ba424", "filename": "libstdc++-v3/testsuite/27_io/objects/wchar_t/41037.cc", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F41037.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af0b8d73e3ca3eb331cef85714085fedf1ce3712/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F41037.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fobjects%2Fwchar_t%2F41037.cc?ref=af0b8d73e3ca3eb331cef85714085fedf1ce3712", "patch": "@@ -0,0 +1,35 @@\n+// Copyright (C) 2009 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+ \n+#include <iostream>\n+#include <testsuite_hooks.h>\n+\n+// PR libstdc++/41037\n+void test01()\n+{\n+  bool test __attribute__((unused)) = true;\n+\n+  VERIFY( std::wcerr.flags() & std::ios_base::dec );\n+  VERIFY( std::wcerr.flags() & std::ios_base::skipws );\n+  VERIFY( std::wcerr.flags() & std::ios_base::unitbuf );\n+}\n+\n+int main()\n+{\n+  test01();\n+  return 0;\n+}"}]}