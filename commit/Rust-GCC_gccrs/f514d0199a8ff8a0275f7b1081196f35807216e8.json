{"sha": "f514d0199a8ff8a0275f7b1081196f35807216e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjUxNGQwMTk5YThmZjhhMDI3NWY3YjEwODExOTZmMzU4MDcyMTZlOA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2019-12-08T16:57:20Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2019-12-08T16:57:20Z"}, "message": "Fix tp_first_run update in split_function.\n\nThe value 0 in tp_first_run is special meaing that profile is unknown.  We\nshould not set it to 1.\n\n\t* ipa-split.c (split_function): Preserve 0 tp_first_run.\n\nFrom-SVN: r279091", "tree": {"sha": "62ad09a1d0b93fe499a4d1c50c32e5ebbb57c8c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/62ad09a1d0b93fe499a4d1c50c32e5ebbb57c8c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f514d0199a8ff8a0275f7b1081196f35807216e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f514d0199a8ff8a0275f7b1081196f35807216e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f514d0199a8ff8a0275f7b1081196f35807216e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f514d0199a8ff8a0275f7b1081196f35807216e8/comments", "author": null, "committer": null, "parents": [{"sha": "a63574d7ed2b09a161ae9182936bd06cf5aef7b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a63574d7ed2b09a161ae9182936bd06cf5aef7b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a63574d7ed2b09a161ae9182936bd06cf5aef7b4"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "416e7d6f54347ef88f1bb30ba5aaf25993829cca", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f514d0199a8ff8a0275f7b1081196f35807216e8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f514d0199a8ff8a0275f7b1081196f35807216e8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f514d0199a8ff8a0275f7b1081196f35807216e8", "patch": "@@ -1,3 +1,7 @@\n+2019-12-07  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* ipa-split.c (split_function): Preserve 0 tp_first_run.\n+\n 2019-12-07  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* ipa-inline-analysis.c (do_estimate_edge_time): Silence overactive"}, {"sha": "81a2448cc2857cbcbc2fef504db732a0393b7e7a", "filename": "gcc/ipa-split.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f514d0199a8ff8a0275f7b1081196f35807216e8/gcc%2Fipa-split.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f514d0199a8ff8a0275f7b1081196f35807216e8/gcc%2Fipa-split.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-split.c?ref=f514d0199a8ff8a0275f7b1081196f35807216e8", "patch": "@@ -1369,7 +1369,8 @@ split_function (basic_block return_bb, class split_point *split_point,\n \n \n   /* Let's take a time profile for splitted function.  */\n-  node->tp_first_run = cur_node->tp_first_run + 1;\n+  if (cur_node->tp_first_run)\n+    node->tp_first_run = cur_node->tp_first_run + 1;\n \n   /* For usual cloning it is enough to clear builtin only when signature\n      changes.  For partial inlining we however cannot expect the part"}]}