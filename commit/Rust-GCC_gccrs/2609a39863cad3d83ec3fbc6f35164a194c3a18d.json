{"sha": "2609a39863cad3d83ec3fbc6f35164a194c3a18d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjYwOWEzOTg2M2NhZDNkODNlYzNmYmM2ZjM1MTY0YTE5NGMzYTE4ZA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-03-02T11:17:44Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-03-02T11:17:44Z"}, "message": "re PR c++/52688 (static local variable can accessed from local class of function template)\n\n2013-03-02  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/52688\n\t* g++.dg/template/static33.C: New.\n\t* g++.dg/template/static34.C: Likewise.\n\n\tPR c++/10291\n\t* g++.dg/template/static35.C: New.\n\nFrom-SVN: r196405", "tree": {"sha": "37aca4d90d1348309f68f7e5a677d8f73be71213", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/37aca4d90d1348309f68f7e5a677d8f73be71213"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2609a39863cad3d83ec3fbc6f35164a194c3a18d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2609a39863cad3d83ec3fbc6f35164a194c3a18d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2609a39863cad3d83ec3fbc6f35164a194c3a18d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2609a39863cad3d83ec3fbc6f35164a194c3a18d/comments", "author": null, "committer": null, "parents": [{"sha": "9eb24748218a8c1ed1750eb5db33c180cf27ace5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eb24748218a8c1ed1750eb5db33c180cf27ace5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9eb24748218a8c1ed1750eb5db33c180cf27ace5"}], "stats": {"total": 69, "additions": 69, "deletions": 0}, "files": [{"sha": "112b6ae37ec817483633b93d7377f0fe9d896f1a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2609a39863cad3d83ec3fbc6f35164a194c3a18d", "patch": "@@ -1,3 +1,12 @@\n+2013-03-02  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/52688\n+\t* g++.dg/template/static33.C: New.\n+\t* g++.dg/template/static34.C: Likewise.\n+\n+\tPR c++/10291\n+\t* g++.dg/template/static35.C: New.\n+\n 2013-03-01  Steve Ellcey  <sellcey@mips.com>\n \n \t* gcc.dg/pr56396.c: Require pic support."}, {"sha": "2d7b97da13851ab8bbcc47e75f6c8288f54db7a8", "filename": "gcc/testsuite/g++.dg/template/static33.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic33.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic33.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic33.C?ref=2609a39863cad3d83ec3fbc6f35164a194c3a18d", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/52688\n+// { dg-do link }\n+\n+template<typename T>\n+T f()\n+{\n+  static const double staticLocalVariable = 100.0;\n+  struct local\n+  {\n+      static double f() { return staticLocalVariable; }\n+  };\n+  return T(local::f());\n+}\n+\n+int main()\n+{\n+  f<double>();\n+}"}, {"sha": "122fffafbcb569971cb45ec01731eb7a550a59a9", "filename": "gcc/testsuite/g++.dg/template/static34.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic34.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic34.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic34.C?ref=2609a39863cad3d83ec3fbc6f35164a194c3a18d", "patch": "@@ -0,0 +1,21 @@\n+// PR c++/52688\n+// { dg-do link }\n+\n+template<class T>\n+struct A {\n+  static bool test() {\n+    static bool value = false;\n+    if (value)\n+      return false;\n+    struct S {\n+      S() { value = true; }\n+    };\n+    static S s;\n+    return true;\n+  }\n+};\n+\n+int main()\n+{\n+  A<int>::test();\n+}"}, {"sha": "d645f249041c6109b2e47f6fa54dd28fbe56b21d", "filename": "gcc/testsuite/g++.dg/template/static35.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic35.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2609a39863cad3d83ec3fbc6f35164a194c3a18d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic35.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fstatic35.C?ref=2609a39863cad3d83ec3fbc6f35164a194c3a18d", "patch": "@@ -0,0 +1,21 @@\n+// PR c++/10291\n+// { dg-do link }\n+\n+template <class T>\n+int foo ()\n+{\n+  static int i;\n+\n+  struct S {\n+    int bar () {\n+      return i;\n+    }\n+  } s;\n+\n+  return s.bar ();\n+}\n+\n+int main ()\n+{\n+  foo<int>();\n+}"}]}