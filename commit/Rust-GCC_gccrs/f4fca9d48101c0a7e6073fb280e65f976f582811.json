{"sha": "f4fca9d48101c0a7e6073fb280e65f976f582811", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjRmY2E5ZDQ4MTAxYzBhN2U2MDczZmIyODBlNjVmOTc2ZjU4MjgxMQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-08-17T18:04:35Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-08-17T18:04:35Z"}, "message": "compiler: Don't generate value reference in range clause if receiver is a sink.\n\nThe panic in test/fixedbugs/bug454.go was caused by the generation of an unnecessary var reference when writing a range value into a sink. If the receiving variable is a sink, there's no need to dereference a possible NULL pointer.\n\nFixes Issue 24.\n\nFrom-SVN: r201815", "tree": {"sha": "db2a4ef73c5f043aa93ea0f8a006dc3afbc40b11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db2a4ef73c5f043aa93ea0f8a006dc3afbc40b11"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f4fca9d48101c0a7e6073fb280e65f976f582811", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4fca9d48101c0a7e6073fb280e65f976f582811", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4fca9d48101c0a7e6073fb280e65f976f582811", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4fca9d48101c0a7e6073fb280e65f976f582811/comments", "author": null, "committer": null, "parents": [{"sha": "47fa5d230292f22802436d3f58af758795da3cbe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47fa5d230292f22802436d3f58af758795da3cbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47fa5d230292f22802436d3f58af758795da3cbe"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "9d112850fee27151f88bc93e956f603892db4f69", "filename": "gcc/go/gofrontend/parse.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f4fca9d48101c0a7e6073fb280e65f976f582811/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f4fca9d48101c0a7e6073fb280e65f976f582811/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fparse.cc?ref=f4fca9d48101c0a7e6073fb280e65f976f582811", "patch": "@@ -5266,7 +5266,8 @@ Parse::range_clause_decl(const Typed_identifier_list* til,\n \tno->var_value()->set_type_from_range_value();\n       if (is_new)\n \tany_new = true;\n-      p_range_clause->value = Expression::make_var_reference(no, location);\n+      if (!Gogo::is_sink_name(pti->name()))\n+        p_range_clause->value = Expression::make_var_reference(no, location);\n     }\n \n   if (!any_new)"}]}