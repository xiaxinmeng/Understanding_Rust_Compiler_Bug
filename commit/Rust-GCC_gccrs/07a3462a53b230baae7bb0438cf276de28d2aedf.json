{"sha": "07a3462a53b230baae7bb0438cf276de28d2aedf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDdhMzQ2MmE1M2IyMzBiYWFlN2JiMDQzOGNmMjc2ZGUyOGQyYWVkZg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "2000-02-01T02:17:06Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2000-02-01T02:17:06Z"}, "message": "Fix gdb testsuite regressions.\n\n\t* class.c (build_vtbl_or_vbase_field): New parameter fcontext.\n\tStore it in DECL_FCONTEXT.\n\t(build_vbase_pointer_fields, create_vtable_ptr): Fix callers.\n\nFrom-SVN: r31729", "tree": {"sha": "223d6b9b9355da4641f6cf8a9ed7c8628504c7a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/223d6b9b9355da4641f6cf8a9ed7c8628504c7a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07a3462a53b230baae7bb0438cf276de28d2aedf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07a3462a53b230baae7bb0438cf276de28d2aedf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07a3462a53b230baae7bb0438cf276de28d2aedf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07a3462a53b230baae7bb0438cf276de28d2aedf/comments", "author": null, "committer": null, "parents": [{"sha": "5ef17dd258db461da74077df59185cf314b8ccaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ef17dd258db461da74077df59185cf314b8ccaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ef17dd258db461da74077df59185cf314b8ccaf"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "da734e4df146c1d1029c3206b6598c56ba5140d0", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07a3462a53b230baae7bb0438cf276de28d2aedf/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07a3462a53b230baae7bb0438cf276de28d2aedf/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=07a3462a53b230baae7bb0438cf276de28d2aedf", "patch": "@@ -1,3 +1,9 @@\n+Mon Jan 31 15:35:29 2000  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* class.c (build_vtbl_or_vbase_field): New parameter fcontext.\n+\tStore it in DECL_FCONTEXT.\n+\t(build_vbase_pointer_fields, create_vtable_ptr): Fix callers.\n+\n 2000-01-31  Jason Merrill  <jason@casey.cygnus.com>\n \n \t* tinfo.h (old abi): #include \"tconfig.h\"."}, {"sha": "2d45510521591bb91c4794c4c3c4245c019a6100", "filename": "gcc/cp/class.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07a3462a53b230baae7bb0438cf276de28d2aedf/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07a3462a53b230baae7bb0438cf276de28d2aedf/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=07a3462a53b230baae7bb0438cf276de28d2aedf", "patch": "@@ -118,7 +118,8 @@ static int avoid_overlap PARAMS ((tree, tree, int *));\n static tree build_base_field PARAMS ((tree, tree, int *, int *, unsigned int *));\n static tree build_base_fields PARAMS ((tree, int *));\n static tree build_vbase_pointer_fields PARAMS ((tree, int *));\n-static tree build_vtbl_or_vbase_field PARAMS ((tree, tree, tree, tree, int *));\n+static tree build_vtbl_or_vbase_field PARAMS ((tree, tree, tree, tree, tree,\n+\t\t\t\t\t       int *));\n static void check_methods PARAMS ((tree));\n static void remove_zero_width_bit_fields PARAMS ((tree));\n static void check_bases PARAMS ((tree, int *, int *, int *));\n@@ -225,6 +226,7 @@ build_vbase_pointer_fields (rec, empty_p)\n \t\t\t\t\t    get_identifier (VTABLE_BASE),\n \t\t\t\t\t    build_pointer_type (basetype),\n \t\t\t\t\t    rec,\n+\t\t\t\t\t    basetype,\n \t\t\t\t\t    empty_p);\n \t  BINFO_VPTR_FIELD (base_binfo) = decl;\n \t  TREE_CHAIN (decl) = vbase_decls;\n@@ -3970,17 +3972,19 @@ check_field_decls (t, access_decls, empty_p,\n /* Return a FIELD_DECL for a pointer-to-virtual-table or\n    pointer-to-virtual-base.  The NAME, ASSEMBLER_NAME, and TYPE of the\n    field are as indicated.  The CLASS_TYPE in which this field occurs\n-   is also indicated.  *EMPTY_P is set to a non-zero value by this\n+   is also indicated.  FCONTEXT is the type that is needed for the debug\n+   info output routines.  *EMPTY_P is set to a non-zero value by this\n    function to indicate that a class containing this field is\n    non-empty.  */\n \n static tree\n-build_vtbl_or_vbase_field (name, assembler_name, type, class_type, \n+build_vtbl_or_vbase_field (name, assembler_name, type, class_type, fcontext,\n \t\t\t   empty_p)\n      tree name;\n      tree assembler_name;\n      tree type;\n      tree class_type;\n+     tree fcontext;\n      int *empty_p;\n {\n   tree field;\n@@ -3995,7 +3999,7 @@ build_vtbl_or_vbase_field (name, assembler_name, type, class_type,\n   DECL_ARTIFICIAL (field) = 1;\n   DECL_FIELD_CONTEXT (field) = class_type;\n   DECL_CLASS_CONTEXT (field) = class_type;\n-  DECL_FCONTEXT (field) = class_type;\n+  DECL_FCONTEXT (field) = fcontext;\n   DECL_SAVED_INSNS (field) = 0;\n   DECL_FIELD_SIZE (field) = 0;\n   DECL_ALIGN (field) = TYPE_ALIGN (type);\n@@ -4381,6 +4385,7 @@ create_vtable_ptr (t, empty_p, has_virtual_p,\n \t\t\t\t     get_identifier (VFIELD_BASE),\n \t\t\t\t     vtbl_ptr_type_node,\n \t\t\t\t     t,\n+\t\t\t\t     t,\n \t\t\t\t     empty_p);\n \n       /* Add the new field to the list of fields in this class.  */"}]}