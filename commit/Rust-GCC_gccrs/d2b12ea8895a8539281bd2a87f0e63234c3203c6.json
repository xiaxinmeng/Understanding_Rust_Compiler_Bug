{"sha": "d2b12ea8895a8539281bd2a87f0e63234c3203c6", "node_id": "C_kwDOANBUbNoAKGQyYjEyZWE4ODk1YTg1MzkyODFiZDJhODdmMGU2MzIzNGMzMjAzYzY", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-10-25T15:22:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-25T15:22:35Z"}, "message": "Merge #768\n\n768: CompileExpr: fix copy pasta error message r=philberty a=mathstuf\n\nAlso downgrade from a fatal error to a compilation error.\r\n\r\nSigned-off-by: Ben Boeckel <mathstuf@gmail.com>\r\n\r\n---\r\nFixes: #702 \r\n\r\nHere is a checklist to help you with your PR.\r\n\r\n- \\[x] GCC development requires copyright assignment or the Developer's Certificate of Origin sign-off, see https://gcc.gnu.org/contribute.html or https://gcc.gnu.org/dco.html\r\n- \\[x] Read contributing guidlines\r\n- \\[x] `make check-rust` passes locally\r\n- \\[x] Run `clang-format` (letting CI handle this)\r\n- \\[ ] Added any relevant test cases to `gcc/testsuite/rust/` (I don't see any existing tests that seem to test things like this; it's a gccrs internal error about lookup up the type it seems?)\n\nCo-authored-by: Ben Boeckel <mathstuf@gmail.com>", "tree": {"sha": "15177a00bf9745776d1cba5061fbb1a9badb5ea6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15177a00bf9745776d1cba5061fbb1a9badb5ea6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2b12ea8895a8539281bd2a87f0e63234c3203c6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhdsu8CRBK7hj4Ov3rIwAATocIAKC4nbuJJWMonZG2g6+yFTX4\nCirUQ8KMd/4jXl0v+k+2x+sLHtAWd0ZvscMEqvMAOhPsPX/PGzVgqIlYJ2deBodX\nMGTePYUvwKUkbXkYxeT+hLWCc61gcT4XWnplLjHV+wp78OsNXDZU2iKTZ8Spqv+W\nwUXGiOd17vUYQ1+o2obuRZEVM7jZyLZJjCioFd1BA+VAysVZodIz/0uXEYca+eCK\ndmBjvOztC45pjKQcbe99zwJ06dSLXYA0Lod4NZp3zBAKBvjvSIRtFJhfQizSQbfx\nv6enTVyc+zBvyNPZC15qfYoQkhCDkOJLERNH7BGK4Cnv3crm1mInshLuZxuvfXE=\n=m+ID\n-----END PGP SIGNATURE-----\n", "payload": "tree 15177a00bf9745776d1cba5061fbb1a9badb5ea6\nparent aefdb4d0365ce9f010be58afee74f81a1777f29f\nparent 5d65ef58a991c811f16d35423ca3f2271fd20b7b\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1635175355 +0000\ncommitter GitHub <noreply@github.com> 1635175355 +0000\n\nMerge #768\n\n768: CompileExpr: fix copy pasta error message r=philberty a=mathstuf\n\nAlso downgrade from a fatal error to a compilation error.\r\n\r\nSigned-off-by: Ben Boeckel <mathstuf@gmail.com>\r\n\r\n---\r\nFixes: #702 \r\n\r\nHere is a checklist to help you with your PR.\r\n\r\n- \\[x] GCC development requires copyright assignment or the Developer's Certificate of Origin sign-off, see https://gcc.gnu.org/contribute.html or https://gcc.gnu.org/dco.html\r\n- \\[x] Read contributing guidlines\r\n- \\[x] `make check-rust` passes locally\r\n- \\[x] Run `clang-format` (letting CI handle this)\r\n- \\[ ] Added any relevant test cases to `gcc/testsuite/rust/` (I don't see any existing tests that seem to test things like this; it's a gccrs internal error about lookup up the type it seems?)\n\nCo-authored-by: Ben Boeckel <mathstuf@gmail.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2b12ea8895a8539281bd2a87f0e63234c3203c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2b12ea8895a8539281bd2a87f0e63234c3203c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2b12ea8895a8539281bd2a87f0e63234c3203c6/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aefdb4d0365ce9f010be58afee74f81a1777f29f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aefdb4d0365ce9f010be58afee74f81a1777f29f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aefdb4d0365ce9f010be58afee74f81a1777f29f"}, {"sha": "5d65ef58a991c811f16d35423ca3f2271fd20b7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d65ef58a991c811f16d35423ca3f2271fd20b7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d65ef58a991c811f16d35423ca3f2271fd20b7b"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "0512373cf7cf3292e4fa940b69f8c8fe7e0741fd", "filename": "gcc/rust/backend/rust-compile-expr.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2b12ea8895a8539281bd2a87f0e63234c3203c6/gcc%2Frust%2Fbackend%2Frust-compile-expr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2b12ea8895a8539281bd2a87f0e63234c3203c6/gcc%2Frust%2Fbackend%2Frust-compile-expr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fbackend%2Frust-compile-expr.h?ref=d2b12ea8895a8539281bd2a87f0e63234c3203c6", "patch": "@@ -317,8 +317,8 @@ class CompileExpr : public HIRCompileBase\n \t  if (!ctx->get_tyctx ()->lookup_type (\n \t\texpr.get_mappings ().get_hirid (), &tyty))\n \t    {\n-\t      rust_fatal_error (expr.get_locus (),\n-\t\t\t\t\"did not resolve type for this array expr\");\n+\t      rust_error_at (expr.get_locus (),\n+\t\t\t     \"did not resolve type for this byte string\");\n \t      return;\n \t    }\n "}]}