{"sha": "aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFkMzZjNTY5ZDE0YmFkYThmMjc4ZmNkYjllYjc4MDU2YWU2YjZhYw==", "commit": {"author": {"name": "Julia Koval", "email": "julia.koval@intel.com", "date": "2018-01-26T04:14:15Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2018-01-26T04:14:15Z"}, "message": "Fix various x86 avx512{bitalg, vpopcntdq, vbmi2} issues (PR target/83488)\n\ngcc/\n\t* config/i386/avx512bitalgintrin.h (_mm512_bitshuffle_epi64_mask,\n\t_mm512_mask_bitshuffle_epi64_mask, _mm256_bitshuffle_epi64_mask,\n\t_mm256_mask_bitshuffle_epi64_mask, _mm_bitshuffle_epi64_mask,\n\t_mm_mask_bitshuffle_epi64_mask): Fix type.\n\t* config/i386/i386-builtin-types.def (UHI_FTYPE_V2DI_V2DI_UHI,\n\tUSI_FTYPE_V4DI_V4DI_USI): Remove.\n\t* config/i386/i386-builtin.def (__builtin_ia32_vpshufbitqmb512_mask,\n\t__builtin_ia32_vpshufbitqmb256_mask,\n\t__builtin_ia32_vpshufbitqmb128_mask): Fix types.\n\t* config/i386/i386.c (ix86_expand_args_builtin): Remove old types.\n\t* config/i386/sse.md (VI1_AVX512VLBW): Change types.\n\ngcc/testsuite/\n\t* gcc.target/i386/avx512bitalg-vpshufbitqmb-1.c: Add -mavx512f -mavx512bw.\n\t* gcc.target/i386/avx512bitalgvl-vpshufbitqmb-1.c: Add -mavx512bw.\n\t* gcc.target/i386/i386.exp: Fix types.\n\nFrom-SVN: r257075", "tree": {"sha": "eff8ca625509539ee62ed6ee042b45f4e4af6f6c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eff8ca625509539ee62ed6ee042b45f4e4af6f6c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/comments", "author": {"login": "vaalfreja", "id": 5216345, "node_id": "MDQ6VXNlcjUyMTYzNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5216345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vaalfreja", "html_url": "https://github.com/vaalfreja", "followers_url": "https://api.github.com/users/vaalfreja/followers", "following_url": "https://api.github.com/users/vaalfreja/following{/other_user}", "gists_url": "https://api.github.com/users/vaalfreja/gists{/gist_id}", "starred_url": "https://api.github.com/users/vaalfreja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vaalfreja/subscriptions", "organizations_url": "https://api.github.com/users/vaalfreja/orgs", "repos_url": "https://api.github.com/users/vaalfreja/repos", "events_url": "https://api.github.com/users/vaalfreja/events{/privacy}", "received_events_url": "https://api.github.com/users/vaalfreja/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "09e2984ff8b755ea4a2f03d07b9b955625fb3ef2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09e2984ff8b755ea4a2f03d07b9b955625fb3ef2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09e2984ff8b755ea4a2f03d07b9b955625fb3ef2"}], "stats": {"total": 72, "additions": 44, "deletions": 28}, "files": [{"sha": "f92720c0284705b9338ea4f6adbf9f40bb10f713", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -1,3 +1,17 @@\n+2018-01-26  Julia Koval  <julia.koval@intel.com>\n+\n+\t* config/i386/avx512bitalgintrin.h (_mm512_bitshuffle_epi64_mask,\n+\t_mm512_mask_bitshuffle_epi64_mask, _mm256_bitshuffle_epi64_mask,\n+\t_mm256_mask_bitshuffle_epi64_mask, _mm_bitshuffle_epi64_mask,\n+\t_mm_mask_bitshuffle_epi64_mask): Fix type.\n+\t* config/i386/i386-builtin-types.def (UHI_FTYPE_V2DI_V2DI_UHI,\n+\tUSI_FTYPE_V4DI_V4DI_USI): Remove.\n+\t* config/i386/i386-builtin.def (__builtin_ia32_vpshufbitqmb512_mask,\n+\t__builtin_ia32_vpshufbitqmb256_mask,\n+\t__builtin_ia32_vpshufbitqmb128_mask): Fix types.\n+\t* config/i386/i386.c (ix86_expand_args_builtin): Remove old types.\n+\t* config/i386/sse.md (VI1_AVX512VLBW): Change types.\n+\n 2018-01-26  Alan Modra  <amodra@gmail.com>\n \n \tPR target/84033"}, {"sha": "54f03eec3e93fa238174ab5e7c16ed5dab1ee2af", "filename": "gcc/config/i386/avx512bitalgintrin.h", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Favx512bitalgintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Favx512bitalgintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Favx512bitalgintrin.h?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -100,17 +100,17 @@ extern __inline __mmask64\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_bitshuffle_epi64_mask (__m512i __A, __m512i __B)\n {\n-  return (__mmask64) __builtin_ia32_vpshufbitqmb512_mask ((__v8di) __A,\n-\t\t\t\t\t\t (__v8di) __B,\n+  return (__mmask64) __builtin_ia32_vpshufbitqmb512_mask ((__v64qi) __A,\n+\t\t\t\t\t\t (__v64qi) __B,\n \t\t\t\t\t\t (__mmask64) -1);\n }\n \n extern __inline __mmask64\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm512_mask_bitshuffle_epi64_mask (__mmask8 __M, __m512i __A, __m512i __B)\n {\n-  return (__mmask64) __builtin_ia32_vpshufbitqmb512_mask ((__v8di) __A,\n-\t\t\t\t\t\t (__v8di) __B,\n+  return (__mmask64) __builtin_ia32_vpshufbitqmb512_mask ((__v64qi) __A,\n+\t\t\t\t\t\t (__v64qi) __B,\n \t\t\t\t\t\t (__mmask64) __M);\n }\n \n@@ -148,17 +148,17 @@ extern __inline __mmask32\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm256_bitshuffle_epi64_mask (__m256i __A, __m256i __B)\n {\n-  return (__mmask32) __builtin_ia32_vpshufbitqmb256_mask ((__v4di) __A,\n-\t\t\t\t\t\t (__v4di) __B,\n+  return (__mmask32) __builtin_ia32_vpshufbitqmb256_mask ((__v32qi) __A,\n+\t\t\t\t\t\t (__v32qi) __B,\n \t\t\t\t\t\t (__mmask32) -1);\n }\n \n extern __inline __mmask32\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm256_mask_bitshuffle_epi64_mask (__mmask32 __M, __m256i __A, __m256i __B)\n {\n-  return (__mmask32) __builtin_ia32_vpshufbitqmb256_mask ((__v4di) __A,\n-\t\t\t\t\t\t (__v4di) __B,\n+  return (__mmask32) __builtin_ia32_vpshufbitqmb256_mask ((__v32qi) __A,\n+\t\t\t\t\t\t (__v32qi) __B,\n \t\t\t\t\t\t (__mmask32) __M);\n }\n \n@@ -178,17 +178,17 @@ extern __inline __mmask16\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm_bitshuffle_epi64_mask (__m128i __A, __m128i __B)\n {\n-  return (__mmask16) __builtin_ia32_vpshufbitqmb128_mask ((__v2di) __A,\n-\t\t\t\t\t\t (__v2di) __B,\n+  return (__mmask16) __builtin_ia32_vpshufbitqmb128_mask ((__v16qi) __A,\n+\t\t\t\t\t\t (__v16qi) __B,\n \t\t\t\t\t\t (__mmask16) -1);\n }\n \n extern __inline __mmask16\n __attribute__((__gnu_inline__, __always_inline__, __artificial__))\n _mm_mask_bitshuffle_epi64_mask (__mmask16 __M, __m128i __A, __m128i __B)\n {\n-  return (__mmask16) __builtin_ia32_vpshufbitqmb128_mask ((__v2di) __A,\n-\t\t\t\t\t\t (__v2di) __B,\n+  return (__mmask16) __builtin_ia32_vpshufbitqmb128_mask ((__v16qi) __A,\n+\t\t\t\t\t\t (__v16qi) __B,\n \t\t\t\t\t\t (__mmask16) __M);\n }\n "}, {"sha": "ba3354904897e9af8270565ab873c2c78be877e1", "filename": "gcc/config/i386/i386-builtin-types.def", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fi386-builtin-types.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fi386-builtin-types.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-builtin-types.def?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -1260,8 +1260,6 @@ DEF_FUNCTION_TYPE (V16SI, V16SI, V16SI, V16SI, INT)\n DEF_FUNCTION_TYPE (V2DI, V2DI, V2DI, V2DI, INT)\n \n # BITALG builtins\n-DEF_FUNCTION_TYPE (UHI, V2DI, V2DI, UHI)\n-DEF_FUNCTION_TYPE (USI, V4DI, V4DI, USI)\n DEF_FUNCTION_TYPE (V4DI, V4DI)\n DEF_FUNCTION_TYPE (V4SI, V4SI, V4SI, UHI)\n DEF_FUNCTION_TYPE (V8SI, V8SI, V8SI, UHI)"}, {"sha": "0b8347206d35d6402d45235dbab0aa16d4ebb961", "filename": "gcc/config/i386/i386-builtin.def", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fi386-builtin.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fi386-builtin.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-builtin.def?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -2626,9 +2626,9 @@ BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512VL, CODE_FOR_vpopcou\n BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512VL, CODE_FOR_vpopcountv8hi, \"__builtin_ia32_vpopcountw_v8hi\", IX86_BUILTIN_VPOPCOUNTWV8HI, UNKNOWN, (int) V8HI_FTYPE_V8HI)\n BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512VL, CODE_FOR_vpopcountv8hi_mask, \"__builtin_ia32_vpopcountw_v8hi_mask\", IX86_BUILTIN_VPOPCOUNTQV8HI_MASK, UNKNOWN, (int) V8HI_FTYPE_V8HI_V8HI_UQI)\n \n-BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512BW, CODE_FOR_avx512vl_vpshufbitqmbv8di_mask, \"__builtin_ia32_vpshufbitqmb512_mask\", IX86_BUILTIN_VPSHUFBITQMB512_MASK, UNKNOWN, (int) UQI_FTYPE_V8DI_V8DI_UQI)\n-BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512VL | OPTION_MASK_ISA_AVX512BW, CODE_FOR_avx512vl_vpshufbitqmbv4di_mask, \"__builtin_ia32_vpshufbitqmb256_mask\", IX86_BUILTIN_VPSHUFBITQMB256_MASK, UNKNOWN, (int) USI_FTYPE_V4DI_V4DI_USI)\n-BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_vpshufbitqmbv2di_mask, \"__builtin_ia32_vpshufbitqmb128_mask\", IX86_BUILTIN_VPSHUFBITQMB128_MASK, UNKNOWN, (int) UHI_FTYPE_V2DI_V2DI_UHI)\n+BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512BW, CODE_FOR_avx512vl_vpshufbitqmbv64qi_mask, \"__builtin_ia32_vpshufbitqmb512_mask\", IX86_BUILTIN_VPSHUFBITQMB512_MASK, UNKNOWN, (int) UDI_FTYPE_V64QI_V64QI_UDI)\n+BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512VL | OPTION_MASK_ISA_AVX512BW, CODE_FOR_avx512vl_vpshufbitqmbv32qi_mask, \"__builtin_ia32_vpshufbitqmb256_mask\", IX86_BUILTIN_VPSHUFBITQMB256_MASK, UNKNOWN, (int) USI_FTYPE_V32QI_V32QI_USI)\n+BDESC (OPTION_MASK_ISA_AVX512BITALG | OPTION_MASK_ISA_AVX512VL, CODE_FOR_avx512vl_vpshufbitqmbv16qi_mask, \"__builtin_ia32_vpshufbitqmb128_mask\", IX86_BUILTIN_VPSHUFBITQMB128_MASK, UNKNOWN, (int) UHI_FTYPE_V16QI_V16QI_UHI)\n \n /* Builtins with rounding support.  */\n BDESC_END (ARGS, ROUND_ARGS)"}, {"sha": "3653ddd6e2de983f5e027e2fccd20fe821bad997", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -34739,8 +34739,6 @@ ix86_expand_args_builtin (const struct builtin_description *d,\n     case HI_FTYPE_V16SF_INT_UHI:\n     case QI_FTYPE_V8SF_INT_UQI:\n     case QI_FTYPE_V4SF_INT_UQI:\n-    case UHI_FTYPE_V2DI_V2DI_UHI:\n-    case USI_FTYPE_V4DI_V4DI_USI:\n     case V4SI_FTYPE_V4SI_V4SI_UHI:\n     case V8SI_FTYPE_V8SI_V8SI_UHI:\n       nargs = 3;"}, {"sha": "4bb06e25615a2246a2d2bd0e2c4e5de2d118ea28", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -507,9 +507,9 @@\n    (V4SI \"TARGET_AVX2\") (V2DI \"TARGET_AVX2\")\n    (V8SI \"TARGET_AVX2\") (V4DI \"TARGET_AVX2\")])\n \n-(define_mode_iterator VI48_AVX512VLBW\n-  [(V8DI \"TARGET_AVX512BW\") (V4DI  \"TARGET_AVX512VL\")\n-\t(V2DI  \"TARGET_AVX512VL\")])\n+(define_mode_iterator VI1_AVX512VLBW\n+  [(V64QI \"TARGET_AVX512BW\") (V32QI  \"TARGET_AVX512VL\")\n+\t(V16QI  \"TARGET_AVX512VL\")])\n \n (define_mode_attr avx512\n   [(V16QI \"avx512vl\") (V32QI \"avx512vl\") (V64QI \"avx512bw\")\n@@ -20583,8 +20583,8 @@\n (define_insn \"avx512vl_vpshufbitqmb<mode><mask_scalar_merge_name>\"\n   [(set (match_operand:<avx512fmaskmode> 0 \"register_operand\" \"=Yk\")\n \t(unspec:<avx512fmaskmode>\n-\t  [(match_operand:VI48_AVX512VLBW 1 \"register_operand\" \"v\")\n-\t   (match_operand:VI48_AVX512VLBW 2 \"nonimmediate_operand\" \"vm\")]\n+\t  [(match_operand:VI1_AVX512VLBW 1 \"register_operand\" \"v\")\n+\t   (match_operand:VI1_AVX512VLBW 2 \"nonimmediate_operand\" \"vm\")]\n \t  UNSPEC_VPSHUFBIT))]\n   \"TARGET_AVX512BITALG\"\n   \"vpshufbitqmb\\t{%2, %1, %0<mask_scalar_merge_operand3>|%0<mask_scalar_merge_operand3>, %1, %2}\""}, {"sha": "72a0069eb9c4773de22d14ba0e4a4b415f6d71db", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -1,3 +1,9 @@\n+2018-01-26  Julia Koval  <julia.koval@intel.com>\n+\n+\t* gcc.target/i386/avx512bitalg-vpshufbitqmb-1.c: Add -mavx512f -mavx512bw.\n+\t* gcc.target/i386/avx512bitalgvl-vpshufbitqmb-1.c: Add -mavx512bw.\n+\t* gcc.target/i386/i386.exp: Fix types.\n+\n 2018-01-26  Alan Modra  <amodra@gmail.com>\n \n \tPR target/84033"}, {"sha": "727fb130ab581c2757afd4b7ae5ee448eebf4496", "filename": "gcc/testsuite/gcc.target/i386/avx512bitalg-vpshufbitqmb-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512bitalg-vpshufbitqmb-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512bitalg-vpshufbitqmb-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512bitalg-vpshufbitqmb-1.c?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do run } */\n-/* { dg-options \"-O2 -mavx512bitalg\" } */\n+/* { dg-options \"-O2 -mavx512bitalg -mavx512f -mavx512bw\" } */\n /* { dg-require-effective-target avx512bitalg } */\n \n #include \"avx512f-helper.h\""}, {"sha": "76598c449466d8349aa2134e3a4799d60ecb9b92", "filename": "gcc/testsuite/gcc.target/i386/avx512bitalgvl-vpshufbitqmb-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512bitalgvl-vpshufbitqmb-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512bitalgvl-vpshufbitqmb-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Favx512bitalgvl-vpshufbitqmb-1.c?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do run } */\n-/* { dg-options \"-O2 -mavx512vl -mavx512bitalg\" } */\n+/* { dg-options \"-O2 -mavx512vl -mavx512bitalg -mavx512bw\" } */\n /* { dg-require-effective-target avx512vl } */\n /* { dg-require-effective-target avx512bitalg } */\n "}, {"sha": "6b30de3022f3884658dd3eb1aa3ae350293d88de", "filename": "gcc/testsuite/gcc.target/i386/i386.exp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fi386.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad36c569d14bada8f278fcdb9eb78056ae6b6ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fi386.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fi386.exp?ref=aad36c569d14bada8f278fcdb9eb78056ae6b6ac", "patch": "@@ -487,12 +487,12 @@ proc check_effective_target_vpclmulqdq { } {\n # Return 1 if avx512_bitalg instructions can be compiled.\n proc check_effective_target_avx512bitalg { } {\n     return [check_no_compiler_messages avx512bitalg object {\n-        typedef int __v32hi __attribute__ ((__vector_size__ (64)));\n+        typedef short int __v32hi __attribute__ ((__vector_size__ (64)));\n \n         __v32hi\n         _mm512_popcnt_epi16 (__v32hi __A)\n         {\n-            return (__v32hi) __builtin_ia32_vpopcountd_v32hi ((__v32hi) __A);\n+            return (__v32hi) __builtin_ia32_vpopcountw_v32hi ((__v32hi) __A);\n         }\n     } \"-mavx512bitalg\" ]\n }"}]}