{"sha": "ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E4MWMxNDlkNDE4YmMzNDllZTY3NDlmZTFjZmE3ZWMwMDVjNWExZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2000-07-07T20:06:57Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2000-07-07T20:06:57Z"}, "message": "integrate.c (copy_insn_list): Remove REG_LABEL notes.\n\n\t* integrate.c (copy_insn_list): Remove REG_LABEL notes.\n\n\t* gcc.dg/20000707-1.c: New test.\n\nFrom-SVN: r34907", "tree": {"sha": "c2e4867c5960cbe07481426cf9f690ecabfa41d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2e4867c5960cbe07481426cf9f690ecabfa41d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f5afd9e924c198f8a01a92bb40ff48be87525ab1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5afd9e924c198f8a01a92bb40ff48be87525ab1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5afd9e924c198f8a01a92bb40ff48be87525ab1"}], "stats": {"total": 38, "additions": 35, "deletions": 3}, "files": [{"sha": "b9261b3b73aa69d8036f90c7e25478a43f0dbaf4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "patch": "@@ -1,3 +1,7 @@\n+2000-07-07  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* integrate.c (copy_insn_list): Remove REG_LABEL notes.\n+\n 2000-07-07  Jakub Jelinek  <jakub@redhat.com>\n \n \t* sibcall.c (uses_addressof): Add INMEM argument, check for"}, {"sha": "93ed6d43c7de5c9e065a1059198e26c150eee7db", "filename": "gcc/integrate.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2Fintegrate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2Fintegrate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintegrate.c?ref=ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "patch": "@@ -1581,13 +1581,21 @@ copy_insn_list (insns, map, static_chain_value)\n \t&& map->insn_map[INSN_UID (insn)]\n \t&& REG_NOTES (insn))\n       {\n-\trtx tem = copy_rtx_and_substitute (REG_NOTES (insn), map, 0);\n+\trtx next, note = copy_rtx_and_substitute (REG_NOTES (insn), map, 0);\n \n \t/* We must also do subst_constants, in case one of our parameters\n \t   has const type and constant value.  */\n-\tsubst_constants (&tem, NULL_RTX, map, 0);\n+\tsubst_constants (&note, NULL_RTX, map, 0);\n \tapply_change_group ();\n-\tREG_NOTES (map->insn_map[INSN_UID (insn)]) = tem;\n+\tREG_NOTES (map->insn_map[INSN_UID (insn)]) = note;\n+\n+\t/* Finally, delete any REG_LABEL notes from the chain.  */\t          \n+\tfor (; note; note = next)\n+\t  {\n+\t    next = XEXP (note, 1);\n+\t    if (REG_NOTE_KIND (note) == REG_LABEL)\n+\t      remove_note (map->insn_map[INSN_UID (insn)], note);\n+\t  }\n       }\n \n   if (local_return_label)"}, {"sha": "096cea1e456015be96a2dc8b884880c44889fd40", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "patch": "@@ -1,3 +1,7 @@\n+2000-07-07  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc.dg/20000707-1.c: New test.\n+\n 2000-07-07  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.c-torture/execute/20000706-1.c: New test."}, {"sha": "5328dfa63d9e25a8b21b720580af0c46ed981079", "filename": "gcc/testsuite/gcc.dg/20000707-1.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2Ftestsuite%2Fgcc.dg%2F20000707-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca81c149d418bc349ee6749fe1cfa7ec005c5a1f/gcc%2Ftestsuite%2Fgcc.dg%2F20000707-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20000707-1.c?ref=ca81c149d418bc349ee6749fe1cfa7ec005c5a1f", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -Wall\" } */\n+\n+extern void foo(void *here);\n+extern inline void bar(void)\n+{\n+  __label__ here;\n+  foo(&&here);\n+here:\n+  ;\n+}\n+\n+void baz(void)\n+{\n+  bar();\n+}"}]}