{"sha": "ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWM2OTJkNWYxMDhlMmY0ODVlMWFhOGM2ZDc3NjBhZjlmYjMyYWI2ZQ==", "commit": {"author": {"name": "Kai Tietz", "email": "kai.tietz@onevision.com", "date": "2010-12-05T08:06:25Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2010-12-05T08:06:25Z"}, "message": "config.h.in: Regenerated.\n\n2010-12-05  Kai Tietz  <kai.tietz@onevision.com>\n\n        * config.h.in: Regenerated.\n        * configure: Regenerated.\n        * configure.ac (AC_CHECK_HEADERS): Replaced by AC_HEADER_SYS_WAIT.\n        * lto-plugin.c (WIFEXITED): Define default.\n        (WEXITSTATUS): Likeiwse.\n\nFrom-SVN: r167468", "tree": {"sha": "b83482850bc80775ca54aa8c43f57a164d38d68b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b83482850bc80775ca54aa8c43f57a164d38d68b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/comments", "author": null, "committer": null, "parents": [{"sha": "e7abfe07eeb03485efb146e40cbece2d55dcdbc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7abfe07eeb03485efb146e40cbece2d55dcdbc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7abfe07eeb03485efb146e40cbece2d55dcdbc0"}], "stats": {"total": 154, "additions": 55, "deletions": 99}, "files": [{"sha": "2463d83098b5361fdcc3d4cfc9c8a15573453e12", "filename": "lto-plugin/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2FChangeLog?ref=ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "patch": "@@ -1,3 +1,11 @@\n+2010-12-05  Kai Tietz  <kai.tietz@onevision.com>\n+\n+\t* config.h.in: Regenerated.\n+\t* configure: Regenerated.\n+\t* configure.ac (AC_CHECK_HEADERS): Replaced by AC_HEADER_SYS_WAIT.\n+\t* lto-plugin.c (WIFEXITED): Define default.\n+\t(WEXITSTATUS): Likeiwse.\n+\n 2010-12-01  Kai Tietz  <kai.tietz@onevision.com>\n \n \t* config.h.in: Regenerated."}, {"sha": "a591ccc7b36ed29d6c7f2afc1cac105ed8b36442", "filename": "lto-plugin/config.h.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2Fconfig.h.in?ref=ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "patch": "@@ -27,7 +27,7 @@\n /* Define to 1 if you have the <sys/types.h> header file. */\n #undef HAVE_SYS_TYPES_H\n \n-/* Define to 1 if you have the <sys/wait.h> header file. */\n+/* Define to 1 if you have <sys/wait.h> that is POSIX.1 compatible. */\n #undef HAVE_SYS_WAIT_H\n \n /* Define to 1 if you have the <unistd.h> header file. */"}, {"sha": "8b94622b3ff453d1f77aafaf219f3ba49c0a1c2b", "filename": "lto-plugin/configure", "status": "modified", "additions": 39, "deletions": 97, "changes": 136, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2Fconfigure?ref=ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "patch": "@@ -1852,93 +1852,6 @@ $as_echo \"$ac_res\" >&6; }\n   eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n \n } # ac_fn_c_find_uintX_t\n-\n-# ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES\n-# -------------------------------------------------------\n-# Tests whether HEADER exists, giving a warning if it cannot be compiled using\n-# the include files in INCLUDES and setting the cache variable VAR\n-# accordingly.\n-ac_fn_c_check_header_mongrel ()\n-{\n-  as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n-  if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $2\" >&5\n-$as_echo_n \"checking for $2... \" >&6; }\n-if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n-  $as_echo_n \"(cached) \" >&6\n-fi\n-eval ac_res=\\$$3\n-\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n-$as_echo \"$ac_res\" >&6; }\n-else\n-  # Is the header compilable?\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking $2 usability\" >&5\n-$as_echo_n \"checking $2 usability... \" >&6; }\n-cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-$4\n-#include <$2>\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_header_compiler=yes\n-else\n-  ac_header_compiler=no\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler\" >&5\n-$as_echo \"$ac_header_compiler\" >&6; }\n-\n-# Is the header present?\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking $2 presence\" >&5\n-$as_echo_n \"checking $2 presence... \" >&6; }\n-cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#include <$2>\n-_ACEOF\n-if ac_fn_c_try_cpp \"$LINENO\"; then :\n-  ac_header_preproc=yes\n-else\n-  ac_header_preproc=no\n-fi\n-rm -f conftest.err conftest.$ac_ext\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc\" >&5\n-$as_echo \"$ac_header_preproc\" >&6; }\n-\n-# So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((\n-  yes:no: )\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!\" >&5\n-$as_echo \"$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result\" >&5\n-$as_echo \"$as_me: WARNING: $2: proceeding with the compiler's result\" >&2;}\n-    ;;\n-  no:yes:* )\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled\" >&5\n-$as_echo \"$as_me: WARNING: $2: present but cannot be compiled\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?\" >&5\n-$as_echo \"$as_me: WARNING: $2:     check for missing prerequisite headers?\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation\" >&5\n-$as_echo \"$as_me: WARNING: $2: see the Autoconf documentation\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \\\"Present But Cannot Be Compiled\\\"\" >&5\n-$as_echo \"$as_me: WARNING: $2:     section \\\"Present But Cannot Be Compiled\\\"\" >&2;}\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result\" >&5\n-$as_echo \"$as_me: WARNING: $2: proceeding with the compiler's result\" >&2;}\n-    ;;\n-esac\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $2\" >&5\n-$as_echo_n \"checking for $2... \" >&6; }\n-if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  eval \"$3=\\$ac_header_compiler\"\n-fi\n-eval ac_res=\\$$3\n-\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n-$as_echo \"$ac_res\" >&6; }\n-fi\n-  eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n-\n-} # ac_fn_c_check_header_mongrel\n cat >config.log <<_ACEOF\n This file contains any messages produced by compilers while\n running configure, to aid debugging if configure makes a mistake.\n@@ -10592,7 +10505,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10595 \"configure\"\n+#line 10508 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10698,7 +10611,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10701 \"configure\"\n+#line 10614 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10979,17 +10892,46 @@ _ACEOF\n ;;\n   esac\n \n-for ac_header in sys/wait.h\n-do :\n-  ac_fn_c_check_header_mongrel \"$LINENO\" \"sys/wait.h\" \"ac_cv_header_sys_wait_h\" \"$ac_includes_default\"\n-if test \"x$ac_cv_header_sys_wait_h\" = x\"\"yes; then :\n-  cat >>confdefs.h <<_ACEOF\n-#define HAVE_SYS_WAIT_H 1\n-_ACEOF\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n+$as_echo_n \"checking for sys/wait.h that is POSIX.1 compatible... \" >&6; }\n+if test \"${ac_cv_header_sys_wait_h+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <sys/types.h>\n+#include <sys/wait.h>\n+#ifndef WEXITSTATUS\n+# define WEXITSTATUS(stat_val) ((unsigned int) (stat_val) >> 8)\n+#endif\n+#ifndef WIFEXITED\n+# define WIFEXITED(stat_val) (((stat_val) & 255) == 0)\n+#endif\n \n+int\n+main ()\n+{\n+  int s;\n+  wait (&s);\n+  s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  ac_cv_header_sys_wait_h=yes\n+else\n+  ac_cv_header_sys_wait_h=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_sys_wait_h\" >&5\n+$as_echo \"$ac_cv_header_sys_wait_h\" >&6; }\n+if test $ac_cv_header_sys_wait_h = yes; then\n \n-done\n+$as_echo \"#define HAVE_SYS_WAIT_H 1\" >>confdefs.h\n+\n+fi\n \n ac_config_files=\"$ac_config_files Makefile\"\n "}, {"sha": "442b2395a6784a68c328168f434a4298e31d4a7f", "filename": "lto-plugin/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2Fconfigure.ac?ref=ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "patch": "@@ -22,7 +22,7 @@ case $target in\n esac\n AC_TYPE_INT64_T\n AC_TYPE_UINT64_T\n-AC_CHECK_HEADERS(sys/wait.h)\n+AC_HEADER_SYS_WAIT\n AC_CONFIG_FILES(Makefile)\n AC_CONFIG_HEADERS(config.h)\n AC_OUTPUT"}, {"sha": "5ca4c9a27a31269df761b6cde3fdffd06adfc3a3", "filename": "lto-plugin/lto-plugin.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Flto-plugin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e/lto-plugin%2Flto-plugin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2Flto-plugin.c?ref=ec692d5f108e2f485e1aa8c6d7760af9fb32ab6e", "patch": "@@ -50,6 +50,12 @@ along with this program; see the file COPYING3.  If not see\n #ifdef HAVE_SYS_WAIT_H\n #include <sys/wait.h>\n #endif\n+#ifndef WIFEXITED\n+#define WIFEXITED(S) (((S) & 0xff) == 0)\n+#endif\n+#ifndef WEXITSTATUS\n+#define WEXITSTATUS(S) (((S) & 0xff00) >> 8)\n+#endif\n #include <libiberty.h>\n #include <hashtab.h>\n #include \"../gcc/lto/common.h\""}]}