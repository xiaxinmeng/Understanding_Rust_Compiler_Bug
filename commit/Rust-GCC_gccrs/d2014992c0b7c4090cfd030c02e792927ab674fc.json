{"sha": "d2014992c0b7c4090cfd030c02e792927ab674fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDIwMTQ5OTJjMGI3YzQwOTBjZmQwMzBjMDJlNzkyOTI3YWI2NzRmYw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2019-01-01T13:10:39Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2019-01-01T13:10:39Z"}, "message": "devirt-13_0.C: Drop broken scan of ssa dump.\n\n\n\t* g++.dg/lto/devirt-13_0.C: Drop broken scan of ssa dump.\n\t* g++.dg/lto/devirt-14_0.C: Drop broken scan of ssa dump.\n\t* g++.dg/lto/devirt-23_0.C: Add -fdump-ipa-cp.\n\nFrom-SVN: r267496", "tree": {"sha": "39da07c6fac5abf7fbdb3743277db88ebe87d76d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/39da07c6fac5abf7fbdb3743277db88ebe87d76d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2014992c0b7c4090cfd030c02e792927ab674fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2014992c0b7c4090cfd030c02e792927ab674fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2014992c0b7c4090cfd030c02e792927ab674fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2014992c0b7c4090cfd030c02e792927ab674fc/comments", "author": null, "committer": null, "parents": [{"sha": "962e88a9f5a19736412f8b17b24464e2b700f002", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/962e88a9f5a19736412f8b17b24464e2b700f002", "html_url": "https://github.com/Rust-GCC/gccrs/commit/962e88a9f5a19736412f8b17b24464e2b700f002"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "8ebf5250f34bd76c7d8092c7c9b7401c571d248c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d2014992c0b7c4090cfd030c02e792927ab674fc", "patch": "@@ -1,3 +1,9 @@\n+2019-01-01  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* g++.dg/lto/devirt-13_0.C: Drop broken scan of ssa dump.\n+\t* g++.dg/lto/devirt-14_0.C: Drop broken scan of ssa dump.\n+\t* g++.dg/lto/devirt-23_0.C: Add -fdump-ipa-cp.\n+\n 2019-01-01  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* g++.dg/tree-prof/devirt.C: Update testcase."}, {"sha": "49d7b6576639ca36a153b44dd3b8818c638c7b63", "filename": "gcc/testsuite/g++.dg/lto/devirt-13_0.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-13_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-13_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-13_0.C?ref=d2014992c0b7c4090cfd030c02e792927ab674fc", "patch": "@@ -1,5 +1,5 @@\n /* { dg-lto-do run } */\n /* Call to foo should be devirtualized because there are no derived types of A.  */\n-/* { dg-lto-options \"-O2 -flto -fdump-tree-ssa\"  } */\n+/* { dg-lto-options \"-O2 -flto\"  } */\n #include \"../ipa/devirt-13.C\"\n-/* { dg-final { scan-tree-dump-times \"OBJ_TYPE_REF\" 0 \"ssa\"} } */\n+/* Ideally we should also { scan-tree-dump-times \"OBJ_TYPE_REF\" 0 \"ssa\"}.  */"}, {"sha": "bdd79d7cdc50ce864c59242b4dbf348ccabe068e", "filename": "gcc/testsuite/g++.dg/lto/devirt-14_0.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-14_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-14_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-14_0.C?ref=d2014992c0b7c4090cfd030c02e792927ab674fc", "patch": "@@ -1,4 +1,4 @@\n /* { dg-lto-do run } */\n /* { dg-lto-options \"-O2 -fdump-tree-ssa\"  } */\n #include \"../ipa/devirt-14.C\"\n-/* { dg-final { scan-tree-dump-not \"A.*foo\" \"ssa\"} } */\n+/* Ideally we should also { scan-tree-dump-not \"A.*foo\" \"ssa\"} } */"}, {"sha": "ad515dcd784b2e954c04c110e18bf4daab7d74dd", "filename": "gcc/testsuite/g++.dg/lto/devirt-23_0.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-23_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2014992c0b7c4090cfd030c02e792927ab674fc/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-23_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fdevirt-23_0.C?ref=d2014992c0b7c4090cfd030c02e792927ab674fc", "patch": "@@ -1,4 +1,4 @@\n /* { dg-lto-do run } */\n-/* { dg-lto-options { \"-O3 -fno-early-inlining -fno-ipa-sra -flto -fno-devirtualize-speculatively\" } } */\n+/* { dg-lto-options { \"-O3 -fno-early-inlining -fno-ipa-sra -fdump-ipa-cp -flto -fno-devirtualize-speculatively\" } } */\n #include \"../ipa/devirt-23.C\"\n /* { dg-final { scan-wpa-ipa-dump \"Discovered a virtual call to\" \"cp\" { xfail *-*-* } } } */"}]}