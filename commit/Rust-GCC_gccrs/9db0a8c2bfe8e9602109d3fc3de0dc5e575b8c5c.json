{"sha": "9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRiMGE4YzJiZmU4ZTk2MDIxMDlkM2ZjM2RlMGRjNWU1NzViOGM1Yw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-01-19T15:41:15Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-01-19T15:41:15Z"}, "message": "re PR target/79127 (Error: invalid register for .seh_savexmm in matmul_i4.c)\n\n\tPR target/79127\n\t* acinclude.m4 (LIBGFOR_CHECK_AVX512F): Ensure the test clobbers\n\tsome zmm16+ registers to verify they are handled by unwind info\n\tproperly if needed.\n\t* configure: Regenerated.\n\nFrom-SVN: r244636", "tree": {"sha": "4bae35124712f9ca92f86fa84595ae73858cd929", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4bae35124712f9ca92f86fa84595ae73858cd929"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0655c6d5561026bf5b3749d69cc3f30ea09ff66e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0655c6d5561026bf5b3749d69cc3f30ea09ff66e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0655c6d5561026bf5b3749d69cc3f30ea09ff66e"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "6d252be9186c0ee231380f4032a634ce876b2b03", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c", "patch": "@@ -1,3 +1,11 @@\n+2017-01-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/79127\n+\t* acinclude.m4 (LIBGFOR_CHECK_AVX512F): Ensure the test clobbers\n+\tsome zmm16+ registers to verify they are handled by unwind info\n+\tproperly if needed.\n+\t* configure: Regenerated.\n+\n 2017-01-17  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR other/79046"}, {"sha": "34e14071aebd996d07dc248ac2a0eb2ebe5a8254", "filename": "libgfortran/acinclude.m4", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c/libgfortran%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c/libgfortran%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Facinclude.m4?ref=9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c", "patch": "@@ -437,7 +437,14 @@ AC_DEFUN([LIBGFOR_CHECK_AVX512F], [\n \ttypedef double __m512d __attribute__ ((__vector_size__ (64)));\n \t__m512d _mm512_add (__m512d a)\n \t{\n-\t  return __builtin_ia32_addpd512_mask (a, a, a, 1, 4);\n+\t  __m512d b = __builtin_ia32_addpd512_mask (a, a, a, 1, 4);\n+\t  /* For -m64/-mx32 also verify that code will work even if\n+\t     the target uses call saved zmm16+ and needs to emit\n+\t     unwind info for them (e.g. on mingw).  See PR79127.  */\n+#ifdef __x86_64__\n+\t  asm volatile (\"\" : : : \"zmm16\", \"zmm17\", \"zmm18\", \"zmm19\");\n+#endif\n+\t  return b;\n         }]], [[]])],\n \tAC_DEFINE(HAVE_AVX512F, 1,\n \t[Define if AVX512f instructions can be compiled.]),"}, {"sha": "20b5e6817126dca09519e4baa29892c94df56175", "filename": "libgfortran/configure", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c/libgfortran%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c/libgfortran%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fconfigure?ref=9db0a8c2bfe8e9602109d3fc3de0dc5e575b8c5c", "patch": "@@ -26300,7 +26300,14 @@ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n \ttypedef double __m512d __attribute__ ((__vector_size__ (64)));\n \t__m512d _mm512_add (__m512d a)\n \t{\n-\t  return __builtin_ia32_addpd512_mask (a, a, a, 1, 4);\n+\t  __m512d b = __builtin_ia32_addpd512_mask (a, a, a, 1, 4);\n+\t  /* For -m64/-mx32 also verify that code will work even if\n+\t     the target uses call saved zmm16+ and needs to emit\n+\t     unwind info for them (e.g. on mingw).  See PR79127.  */\n+#ifdef __x86_64__\n+\t  asm volatile (\"\" : : : \"zmm16\", \"zmm17\", \"zmm18\", \"zmm19\");\n+#endif\n+\t  return b;\n         }\n int\n main ()"}]}