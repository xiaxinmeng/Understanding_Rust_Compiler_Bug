{"sha": "80a44e089f4c87786b68642620d9edb9d03a6c79", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODBhNDRlMDg5ZjRjODc3ODZiNjg2NDI2MjBkOWVkYjlkMDNhNmM3OQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-04-06T17:38:52Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-04-06T17:38:52Z"}, "message": "jni.cc (wrap_value<jobject>, [...]): Removed.\n\n\t* jni.cc (wrap_value<jobject>, wrap_value<jclass>): Removed.\n\t(wrap_value<T*>): New specialization.\n\t(_Jv_JNI_PopLocalFrame): Update env->locals.\n\nFrom-SVN: r41157", "tree": {"sha": "6bbdd0f12fad77699643f7bfd8b5ea26671da489", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bbdd0f12fad77699643f7bfd8b5ea26671da489"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/80a44e089f4c87786b68642620d9edb9d03a6c79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80a44e089f4c87786b68642620d9edb9d03a6c79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80a44e089f4c87786b68642620d9edb9d03a6c79", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80a44e089f4c87786b68642620d9edb9d03a6c79/comments", "author": null, "committer": null, "parents": [{"sha": "67916302b5485823a5b190ef2f33c174b8002a6e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67916302b5485823a5b190ef2f33c174b8002a6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67916302b5485823a5b190ef2f33c174b8002a6e"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "b68b23a341841e8f4ca7e2866bb38887cb294bba", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80a44e089f4c87786b68642620d9edb9d03a6c79/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80a44e089f4c87786b68642620d9edb9d03a6c79/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=80a44e089f4c87786b68642620d9edb9d03a6c79", "patch": "@@ -1,3 +1,9 @@\n+2001-04-06  Tom Tromey  <tromey@redhat.com>\n+\n+\t* jni.cc (wrap_value<jobject>, wrap_value<jclass>): Removed.\n+\t(wrap_value<T*>): New specialization.\n+\t(_Jv_JNI_PopLocalFrame): Update env->locals.\n+\n 2001-04-05  Tom Tromey  <tromey@redhat.com>\n \n \t* libtool-version: Updated current."}, {"sha": "6190f4f8d740287e3c104e5910147a7e94c1f772", "filename": "libjava/jni.cc", "status": "modified", "additions": 9, "deletions": 11, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80a44e089f4c87786b68642620d9edb9d03a6c79/libjava%2Fjni.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80a44e089f4c87786b68642620d9edb9d03a6c79/libjava%2Fjni.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni.cc?ref=80a44e089f4c87786b68642620d9edb9d03a6c79", "patch": "@@ -335,6 +335,9 @@ _Jv_JNI_PopLocalFrame (JNIEnv *env, jobject result, int stop)\n       rf = n;\n     }\n \n+  // Update the local frame information.\n+  env->locals = rf;\n+\n   return result == NULL ? NULL : _Jv_JNI_NewLocalRef (env, result);\n }\n \n@@ -369,20 +372,15 @@ wrap_value (JNIEnv *, T value)\n   return value;\n }\n \n-template<>\n-static jobject\n-wrap_value (JNIEnv *env, jobject value)\n-{\n-  return value == NULL ? value : _Jv_JNI_NewLocalRef (env, value);\n-}\n-\n-template<>\n-static jclass\n-wrap_value (JNIEnv *env, jclass value)\n+// This specialization is used for jobject, jclass, jstring, jarray,\n+// etc.\n+template<typename T>\n+static T *\n+wrap_value (JNIEnv *env, T *value)\n {\n   return (value == NULL\n \t  ? value\n-\t  : (jclass) _Jv_JNI_NewLocalRef (env, (jobject) value));\n+\t  : (T *) _Jv_JNI_NewLocalRef (env, (jobject) value));\n }\n \n \f"}]}