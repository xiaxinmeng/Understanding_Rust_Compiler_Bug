{"sha": "7be00c496f17724614118d79e6b56ccf4f135007", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2JlMDBjNDk2ZjE3NzI0NjE0MTE4ZDc5ZTZiNTZjY2Y0ZjEzNTAwNw==", "commit": {"author": {"name": "Jeff Sturm", "email": "jeff.sturm@commerceone.com", "date": "2001-01-29T08:43:46Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2001-01-29T08:43:46Z"}, "message": "zextract.c (read_zip_archive): Read file_offset before writing zipd and consequently clobbering the header...\n\n2000-01-24  Jeff Sturm  <jeff.sturm@commerceone.com>\n\n\t* zextract.c (read_zip_archive): Read file_offset before writing\n\tzipd and consequently clobbering the header contents.\n\n(http://gcc.gnu.org/ml/gcc-patches/2001-01/msg02129.html)\n\nFrom-SVN: r39328", "tree": {"sha": "b3bb87a6746fe2ddd3bf24b0bf009a09b73e11b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3bb87a6746fe2ddd3bf24b0bf009a09b73e11b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7be00c496f17724614118d79e6b56ccf4f135007", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7be00c496f17724614118d79e6b56ccf4f135007", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7be00c496f17724614118d79e6b56ccf4f135007", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7be00c496f17724614118d79e6b56ccf4f135007/comments", "author": null, "committer": null, "parents": [{"sha": "f2d1f0ba552e043b985396f93360f1b72d9d4b67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2d1f0ba552e043b985396f93360f1b72d9d4b67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2d1f0ba552e043b985396f93360f1b72d9d4b67"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "387e5169b454359ca507d31b77f7c903ef2654aa", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7be00c496f17724614118d79e6b56ccf4f135007/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7be00c496f17724614118d79e6b56ccf4f135007/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=7be00c496f17724614118d79e6b56ccf4f135007", "patch": "@@ -1,3 +1,8 @@\n+2000-01-24  Jeff Sturm  <jeff.sturm@commerceone.com>\n+\n+\t* zextract.c (read_zip_archive): Read file_offset before writing\n+\tzipd and consequently clobbering the header contents.\n+\n 2001-01-27  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* Make-lang.in: Remove all dependencies on defaults.h."}, {"sha": "3985cd9200142ded9c74dcd3dc627f240ca8d883", "filename": "gcc/java/zextract.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7be00c496f17724614118d79e6b56ccf4f135007/gcc%2Fjava%2Fzextract.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7be00c496f17724614118d79e6b56ccf4f135007/gcc%2Fjava%2Fzextract.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fzextract.c?ref=7be00c496f17724614118d79e6b56ccf4f135007", "patch": "@@ -323,6 +323,7 @@ read_zip_archive (zipf)\n       long uncompressed_size = makelong (&dir_ptr[4+C_UNCOMPRESSED_SIZE]);\n       long filename_length = makeword (&dir_ptr[4+C_FILENAME_LENGTH]);\n       long extra_field_length = makeword (&dir_ptr[4+C_EXTRA_FIELD_LENGTH]);\n+      long file_offset = makelong (&dir_ptr[4+C_RELATIVE_OFFSET_LOCAL_HEADER]);\n       int unpadded_direntry_length;\n       if ((dir_ptr-zipf->central_directory)+filename_length+CREC_SIZE+4>zipf->dir_size)\n \treturn -1;\n@@ -337,8 +338,7 @@ read_zip_archive (zipf)\n #else\n #define DIR_ALIGN sizeof(long)\n #endif\n-      zipd->filestart = find_zip_file_start (zipf->fd, \n-\t\t\t\t\t     makelong (&dir_ptr[4+C_RELATIVE_OFFSET_LOCAL_HEADER]));\n+      zipd->filestart = find_zip_file_start (zipf->fd, file_offset);\n       zipd->filename_offset = CREC_SIZE+4 - dir_last_pad;\n       unpadded_direntry_length \n \t  = zipd->filename_offset + zipd->filename_length + extra_field_length;"}]}