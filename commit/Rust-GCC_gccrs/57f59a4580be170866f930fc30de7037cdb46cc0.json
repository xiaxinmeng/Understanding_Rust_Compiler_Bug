{"sha": "57f59a4580be170866f930fc30de7037cdb46cc0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTdmNTlhNDU4MGJlMTcwODY2ZjkzMGZjMzBkZTcwMzdjZGI0NmNjMA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-09-05T17:12:02Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-09-05T17:12:02Z"}, "message": "[multiple changes]\n\n2008-09-05  Peter Dimov  <pdimov@mmltd.net>\n\n\t* testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref_2.cc: New.\n\n2008-09-05  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref.cc: Rename\n\tto...\n\t* testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref_1.cc: ...\n\tthis.\n\nFrom-SVN: r140039", "tree": {"sha": "75fc8650cd40b0149175cd7a14202fd7ac41295d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/75fc8650cd40b0149175cd7a14202fd7ac41295d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57f59a4580be170866f930fc30de7037cdb46cc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57f59a4580be170866f930fc30de7037cdb46cc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57f59a4580be170866f930fc30de7037cdb46cc0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57f59a4580be170866f930fc30de7037cdb46cc0/comments", "author": null, "committer": null, "parents": [{"sha": "c07cd2c7c4d054415c8c0674617aab31efe9c73f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c07cd2c7c4d054415c8c0674617aab31efe9c73f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c07cd2c7c4d054415c8c0674617aab31efe9c73f"}], "stats": {"total": 75, "additions": 75, "deletions": 0}, "files": [{"sha": "2fb1197050807ccb55d59608aa156ce6e914666b", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f59a4580be170866f930fc30de7037cdb46cc0/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f59a4580be170866f930fc30de7037cdb46cc0/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=57f59a4580be170866f930fc30de7037cdb46cc0", "patch": "@@ -1,3 +1,14 @@\n+2008-09-05  Peter Dimov  <pdimov@mmltd.net>\n+\n+\t* testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref_2.cc: New.\n+\n+2008-09-05  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref.cc: Rename\n+\tto...\n+\t* testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref_1.cc: ...\n+\tthis.\n+\n 2008-09-04  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \tPR libstdc++/36962"}, {"sha": "58d7c400032819615e3291492286f630224b187d", "filename": "libstdc++-v3/testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref_1.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f59a4580be170866f930fc30de7037cdb46cc0/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcons%2Funique_ptr_deleter_ref_1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f59a4580be170866f930fc30de7037cdb46cc0/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcons%2Funique_ptr_deleter_ref_1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcons%2Funique_ptr_deleter_ref_1.cc?ref=57f59a4580be170866f930fc30de7037cdb46cc0", "previous_filename": "libstdc++-v3/testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref.cc"}, {"sha": "0b8fd91a4015d07d60cde1cb84fc6a11ae9dc19b", "filename": "libstdc++-v3/testsuite/20_util/shared_ptr/cons/unique_ptr_deleter_ref_2.cc", "status": "added", "additions": 64, "deletions": 0, "changes": 64, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57f59a4580be170866f930fc30de7037cdb46cc0/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcons%2Funique_ptr_deleter_ref_2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57f59a4580be170866f930fc30de7037cdb46cc0/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcons%2Funique_ptr_deleter_ref_2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcons%2Funique_ptr_deleter_ref_2.cc?ref=57f59a4580be170866f930fc30de7037cdb46cc0", "patch": "@@ -0,0 +1,64 @@\n+// { dg-options \"-std=gnu++0x\" }\n+\n+// Copyright (C) 2008 Free Software Foundation\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301,\n+// USA.\n+\n+// 20.7.12.2 Template class shared_ptr [util.smartptr.shared]\n+\n+#include <memory>\n+#include <functional>\n+#include <testsuite_hooks.h>\n+\n+struct A { };\n+\n+struct D {\n+    typedef void result_type;\n+    void operator()(A* p) { delete p;  ++count; }\n+    int count;\n+};\n+\n+\n+// 20.7.12.2.1 shared_ptr constructors [util.smartptr.shared.const]\n+\n+// Construction from unique_ptr\n+// See: http://gcc.gnu.org/ml/libstdc++/2008-09/msg00070.html.\n+int\n+test01()\n+{\n+  bool test __attribute__((unused)) = true;\n+\n+  D d;\n+  std::unique_ptr<A, D&> p1(new A, d);\n+\n+  std::shared_ptr<A> p2(std::move(p1));\n+\n+  typedef std::reference_wrapper<D> D2;\n+  D2* p3 = std::get_deleter<D2>(p2);\n+\n+  VERIFY( p3 != 0 );\n+  VERIFY( &p3->get() == &d );\n+\n+  return 0;\n+}\n+\n+int\n+main()\n+{\n+  test01();\n+  return 0;\n+}"}]}