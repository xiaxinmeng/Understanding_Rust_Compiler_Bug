{"sha": "152c16a9acfdcf0eedcfb800b7aed3c57539aa5c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTUyYzE2YTlhY2ZkY2YwZWVkY2ZiODAwYjdhZWQzYzU3NTM5YWE1Yw==", "commit": {"author": {"name": "Gabriel Dos Reis", "email": "gdr@integrable-solutions.net", "date": "2003-04-30T13:45:40Z"}, "committer": {"name": "Gabriel Dos Reis", "email": "gdr@gcc.gnu.org", "date": "2003-04-30T13:45:40Z"}, "message": "decl.c (check_previous_goto_1): Adjust prototype.\n\n        * decl.c (check_previous_goto_1): Adjust prototype.\n        (check_previous_goto): Adjust use.\n        (check_switch_goto): Likewise.\n        (use_label): Adjust.\n        (check_previous_goto_1): Don't use pedwarn_with_file_and_line.\n        (struct named_label_use_list): Use location_t datatype.\n\nFrom-SVN: r66290", "tree": {"sha": "593d04b5e6e91addf98e05bc17c5523be7702cce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/593d04b5e6e91addf98e05bc17c5523be7702cce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c/comments", "author": {"login": "cxx-undef", "id": 5528103, "node_id": "MDQ6VXNlcjU1MjgxMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5528103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cxx-undef", "html_url": "https://github.com/cxx-undef", "followers_url": "https://api.github.com/users/cxx-undef/followers", "following_url": "https://api.github.com/users/cxx-undef/following{/other_user}", "gists_url": "https://api.github.com/users/cxx-undef/gists{/gist_id}", "starred_url": "https://api.github.com/users/cxx-undef/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cxx-undef/subscriptions", "organizations_url": "https://api.github.com/users/cxx-undef/orgs", "repos_url": "https://api.github.com/users/cxx-undef/repos", "events_url": "https://api.github.com/users/cxx-undef/events{/privacy}", "received_events_url": "https://api.github.com/users/cxx-undef/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d3d40e23b32e60afbbdfa3677208c0d9722c1a38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3d40e23b32e60afbbdfa3677208c0d9722c1a38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3d40e23b32e60afbbdfa3677208c0d9722c1a38"}], "stats": {"total": 35, "additions": 20, "deletions": 15}, "files": [{"sha": "d6fd395505f4a97e148f57d128c72983ad4c6ca6", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=152c16a9acfdcf0eedcfb800b7aed3c57539aa5c", "patch": "@@ -1,3 +1,12 @@\n+2003-04-30  Garbiel Dos Reis  <gcc@integrable-solutions.net>\n+\n+\t* decl.c (check_previous_goto_1): Adjust prototype.\n+\t(check_previous_goto): Adjust use.\n+\t(check_switch_goto): Likewise.\n+\t(use_label): Adjust.\n+\t(check_previous_goto_1): Don't use pedwarn_with_file_and_line.\n+\t(struct named_label_use_list): Use location_t datatype.\n+\n 2003-04-29  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/10551"}, {"sha": "2c911a50329e763d2a9a06aa16a2244ab773b34a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 11, "deletions": 15, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/152c16a9acfdcf0eedcfb800b7aed3c57539aa5c/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=152c16a9acfdcf0eedcfb800b7aed3c57539aa5c", "patch": "@@ -112,7 +112,7 @@ static void add_decl_to_level (tree, struct cp_binding_level *);\n static tree make_label_decl (tree, int);\n static void use_label (tree);\n static void check_previous_goto_1 (tree, struct cp_binding_level *, tree,\n-\t\t\t\t   const char *, int);\n+\t\t\t\t   const location_t *);\n static void check_previous_goto (struct named_label_use_list *);\n static void check_switch_goto (struct cp_binding_level *);\n static void check_previous_gotos (tree);\n@@ -215,8 +215,7 @@ struct named_label_use_list GTY(())\n   struct cp_binding_level *binding_level;\n   tree names_in_scope;\n   tree label_decl;\n-  const char *filename_o_goto;\n-  int lineno_o_goto;\n+  location_t o_goto_locus;\n   struct named_label_use_list *next;\n };\n \n@@ -4626,8 +4625,8 @@ use_label (tree decl)\n       new_ent->label_decl = decl;\n       new_ent->names_in_scope = current_binding_level->names;\n       new_ent->binding_level = current_binding_level;\n-      new_ent->lineno_o_goto = lineno;\n-      new_ent->filename_o_goto = input_filename;\n+      new_ent->o_goto_locus.line = lineno;\n+      new_ent->o_goto_locus.file = input_filename;\n       new_ent->next = named_label_uses;\n       named_label_uses = new_ent;\n     }\n@@ -4726,9 +4725,7 @@ decl_jump_unsafe (tree decl)\n static void\n check_previous_goto_1 (tree decl,\n                        struct cp_binding_level* level,\n-                       tree names,\n-                       const char* file,\n-                       int line)\n+                       tree names, const location_t *locus)\n {\n   int identified = 0;\n   int saw_eh = 0;\n@@ -4751,8 +4748,8 @@ check_previous_goto_1 (tree decl,\n \t      else\n \t\tpedwarn (\"jump to case label\");\n \n-\t      if (file)\n-\t\tpedwarn_with_file_and_line (file, line, \"  from here\");\n+\t      if (locus)\n+\t\tpedwarn (\"%H  from here\", locus);\n \t      identified = 1;\n \t    }\n \n@@ -4775,8 +4772,8 @@ check_previous_goto_1 (tree decl,\n \t      else\n \t\tpedwarn (\"jump to case label\");\n \n-\t      if (file)\n-\t\tpedwarn_with_file_and_line (file, line, \"  from here\");\n+\t      if (locus)\n+\t\tpedwarn (\"%H  from here\", locus);\n \t      identified = 1;\n \t    }\n \t  if (b->is_try_scope)\n@@ -4792,14 +4789,13 @@ static void\n check_previous_goto (struct named_label_use_list* use)\n {\n   check_previous_goto_1 (use->label_decl, use->binding_level,\n-\t\t\t use->names_in_scope, use->filename_o_goto,\n-\t\t\t use->lineno_o_goto);\n+\t\t\t use->names_in_scope, &use->o_goto_locus);\n }\n \n static void\n check_switch_goto (struct cp_binding_level* level)\n {\n-  check_previous_goto_1 (NULL_TREE, level, level->names, NULL, 0);\n+  check_previous_goto_1 (NULL_TREE, level, level->names, NULL);\n }\n \n /* Check that any previously seen jumps to a newly defined label DECL"}]}