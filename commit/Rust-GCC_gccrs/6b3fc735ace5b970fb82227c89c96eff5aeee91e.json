{"sha": "6b3fc735ace5b970fb82227c89c96eff5aeee91e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIzZmM3MzVhY2U1Yjk3MGZiODIyMjdjODljOTZlZmY1YWVlZTkxZQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2009-07-15T09:38:34Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-07-15T09:38:34Z"}, "message": "switch-c.adb, [...]: Implement new switch -gnatw.g.\n\n2009-07-15  Robert Dewar  <dewar@adacore.com>\n\n\t* switch-c.adb, sem_ch10.adb, sem_warn.adb, sem_warn.ads: Implement\n\tnew switch -gnatw.g.\n\t(Set_GNAT_Mode_Warnings): New procedure.\n\n\t* lib-xref.adb: Minor reformatting\n\nFrom-SVN: r149666", "tree": {"sha": "439c660991c7ccaba025ac153ec4d00b702988ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/439c660991c7ccaba025ac153ec4d00b702988ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b3fc735ace5b970fb82227c89c96eff5aeee91e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b3fc735ace5b970fb82227c89c96eff5aeee91e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b3fc735ace5b970fb82227c89c96eff5aeee91e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b3fc735ace5b970fb82227c89c96eff5aeee91e/comments", "author": null, "committer": null, "parents": [{"sha": "124e3829bbb56ff80d11c7c8f4c5ed473342d0f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/124e3829bbb56ff80d11c7c8f4c5ed473342d0f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/124e3829bbb56ff80d11c7c8f4c5ed473342d0f2"}], "stats": {"total": 85, "additions": 59, "deletions": 26}, "files": [{"sha": "c50487b537751b6bee715275b9fc87304061ec8f", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6b3fc735ace5b970fb82227c89c96eff5aeee91e", "patch": "@@ -1,3 +1,11 @@\n+2009-07-15  Robert Dewar  <dewar@adacore.com>\n+\n+\t* switch-c.adb, sem_ch10.adb, sem_warn.adb, sem_warn.ads: Implement\n+\tnew switch -gnatw.g.\n+\t(Set_GNAT_Mode_Warnings): New procedure.\n+\n+\t* lib-xref.adb: Minor reformatting\n+\n 2009-07-15  Robert Dewar  <dewar@adacore.com>\n \n \t* exp_aggr.adb, tbuild.ads, tbuild.adb: Minor reformatting"}, {"sha": "2f0c9ae44ee6fcdf78b060dc4bec1e1fcaa5ace8", "filename": "gcc/ada/lib-xref.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Flib-xref.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Flib-xref.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref.adb?ref=6b3fc735ace5b970fb82227c89c96eff5aeee91e", "patch": "@@ -1464,7 +1464,6 @@ package body Lib.Xref is\n \n             if Name_Len /= Curlen then\n                return True;\n-\n             else\n                return Name_Buffer (1 .. Curlen) /= Curnam (1 .. Curlen);\n             end if;\n@@ -1543,7 +1542,7 @@ package body Lib.Xref is\n                --  Used for {} or <> or () for type reference\n \n                procedure Check_Type_Reference\n-                 (Ent : Entity_Id;\n+                 (Ent            : Entity_Id;\n                   List_Interface : Boolean);\n                --  Find whether there is a meaningful type reference for\n                --  Ent, and display it accordingly. If List_Interface is\n@@ -1565,7 +1564,7 @@ package body Lib.Xref is\n                --------------------------\n \n                procedure Check_Type_Reference\n-                 (Ent : Entity_Id;\n+                 (Ent            : Entity_Id;\n                   List_Interface : Boolean)\n                is\n                begin"}, {"sha": "a21cd5be34f969d1cc004a857d6c6ca6164cd478", "filename": "gcc/ada/sem_ch10.adb", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fsem_ch10.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fsem_ch10.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch10.adb?ref=6b3fc735ace5b970fb82227c89c96eff5aeee91e", "patch": "@@ -2328,7 +2328,6 @@ package body Sem_Ch10 is\n            and then Current_Sem_Unit = Main_Unit\n            and then not Intunit\n            and then not Implicit_With (N)\n-           and then not GNAT_Mode\n          then\n             declare\n                U_Kind : constant Kind_Of_Unit :="}, {"sha": "610baee29905a140339886a253b0c6b656c9492a", "filename": "gcc/ada/sem_warn.adb", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fsem_warn.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fsem_warn.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_warn.adb?ref=6b3fc735ace5b970fb82227c89c96eff5aeee91e", "patch": "@@ -2997,6 +2997,9 @@ package body Sem_Warn is\n             Warn_On_Unrepped_Components         := True;\n             Warn_On_Warnings_Off                := True;\n \n+         when 'g' =>\n+            Set_GNAT_Mode_Warnings;\n+\n          when 'm' =>\n             Warn_On_Suspicious_Modulus_Value    := True;\n \n@@ -3041,6 +3044,45 @@ package body Sem_Warn is\n       return True;\n    end Set_Dot_Warning_Switch;\n \n+   ----------------------------\n+   -- Set_GNAT_Mode_Warnings --\n+   ----------------------------\n+\n+   procedure Set_GNAT_Mode_Warnings is\n+   begin\n+      Address_Clause_Overlay_Warnings     := True;\n+      Check_Unreferenced                  := True;\n+      Check_Unreferenced_Formals          := True;\n+      Check_Withs                         := True;\n+      Constant_Condition_Warnings         := True;\n+      Elab_Warnings                       := False;\n+      Implementation_Unit_Warnings        := False;\n+      Ineffective_Inline_Warnings         := True;\n+      Warn_On_Ada_2005_Compatibility      := True;\n+      Warn_On_All_Unread_Out_Parameters   := False;\n+      Warn_On_Assertion_Failure           := True;\n+      Warn_On_Assumed_Low_Bound           := True;\n+      Warn_On_Bad_Fixed_Value             := True;\n+      Warn_On_Biased_Representation       := True;\n+      Warn_On_Constant                    := True;\n+      Warn_On_Deleted_Code                := False;\n+      Warn_On_Dereference                 := False;\n+      Warn_On_Export_Import               := True;\n+      Warn_On_Hiding                      := False;\n+      Warn_On_Modified_Unread             := True;\n+      Warn_On_No_Value_Assigned           := True;\n+      Warn_On_Non_Local_Exception         := False;\n+      Warn_On_Object_Renames_Function     := False;\n+      Warn_On_Obsolescent_Feature         := True;\n+      Warn_On_Questionable_Missing_Parens := True;\n+      Warn_On_Redundant_Constructs        := True;\n+      Warn_On_Object_Renames_Function     := True;\n+      Warn_On_Unchecked_Conversion        := True;\n+      Warn_On_Unrecognized_Pragma         := True;\n+      Warn_On_Unrepped_Components         := False;\n+      Warn_On_Warnings_Off                := False;\n+   end Set_GNAT_Mode_Warnings;\n+\n    ------------------------\n    -- Set_Warning_Switch --\n    ------------------------"}, {"sha": "1e0f96814bdc8a5fa6dc6555e6139a770468c59f", "filename": "gcc/ada/sem_warn.ads", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fsem_warn.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fsem_warn.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_warn.ads?ref=6b3fc735ace5b970fb82227c89c96eff5aeee91e", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1999-2008, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1999-2009, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -77,6 +77,10 @@ package Sem_Warn is\n    --  the command line or .C in a string literal in pragma Warnings. Returns\n    --  True for valid warning character C, False for invalid character.\n \n+   procedure Set_GNAT_Mode_Warnings;\n+   --  This is called in -gnatg mode to set the warnings for gnat mode. It is\n+   --  also used to set the proper warning statuses for -gnatw.g.\n+\n    ------------------------------------------\n    -- Routines to Handle Unused References --\n    ------------------------------------------"}, {"sha": "b391ce3913faf661b6a640f3ff85788df431b7b9", "filename": "gcc/ada/switch-c.adb", "status": "modified", "additions": 2, "deletions": 21, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fswitch-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b3fc735ace5b970fb82227c89c96eff5aeee91e/gcc%2Fada%2Fswitch-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-c.adb?ref=6b3fc735ace5b970fb82227c89c96eff5aeee91e", "patch": "@@ -508,28 +508,9 @@ package body Switch.C is\n                Ada_Version := Ada_05;\n                Ada_Version_Explicit := Ada_Version;\n \n-               --  Set default warnings for -gnatg\n-\n-               Check_Unreferenced              := True;\n-               Check_Unreferenced_Formals      := True;\n-               Check_Withs                     := True;\n-               Constant_Condition_Warnings     := True;\n-               Implementation_Unit_Warnings    := True;\n-               Ineffective_Inline_Warnings     := True;\n-               Warn_On_Assertion_Failure       := True;\n-               Warn_On_Assumed_Low_Bound       := True;\n-               Warn_On_Bad_Fixed_Value         := True;\n-               Warn_On_Constant                := True;\n-               Warn_On_Export_Import           := True;\n-               Warn_On_Modified_Unread         := True;\n-               Warn_On_No_Value_Assigned       := True;\n-               Warn_On_Non_Local_Exception     := False;\n-               Warn_On_Obsolescent_Feature     := True;\n-               Warn_On_Redundant_Constructs    := True;\n-               Warn_On_Object_Renames_Function := True;\n-               Warn_On_Unchecked_Conversion    := True;\n-               Warn_On_Unrecognized_Pragma     := True;\n+               --  Set default warnings and style checks for -gnatg\n \n+               Set_GNAT_Mode_Warnings;\n                Set_GNAT_Style_Check_Options;\n \n             --  Processing for G switch"}]}