{"sha": "5791cc29703f503573795fb2ddfad79fb99e8be3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTc5MWNjMjk3MDNmNTAzNTczNzk1ZmIyZGRmYWQ3OWZiOTllOGJlMw==", "commit": {"author": {"name": "Jason Thorpe", "email": "thorpej@wasabisystems.com", "date": "2002-10-18T23:00:50Z"}, "committer": {"name": "Jason Thorpe", "email": "thorpej@gcc.gnu.org", "date": "2002-10-18T23:00:50Z"}, "message": "i386.c (x86_initialize_trampoline): Emit a call to __enable_execute_stack with the address of the trampoline if...\n\n* config/i386/i386.c (x86_initialize_trampoline): Emit a call\nto __enable_execute_stack with the address of the trampoline\nif TRANSFER_FROM_TRAMPOLINE is defined.\n* config/i386/i386.h (TARGET_64BIT): Expand to a compile-time\nconstant if building libgcc2.\n\nFrom-SVN: r58291", "tree": {"sha": "cf6d00e4ab5a65b48d5631ad751f795e94d77af1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf6d00e4ab5a65b48d5631ad751f795e94d77af1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5791cc29703f503573795fb2ddfad79fb99e8be3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5791cc29703f503573795fb2ddfad79fb99e8be3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5791cc29703f503573795fb2ddfad79fb99e8be3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5791cc29703f503573795fb2ddfad79fb99e8be3/comments", "author": null, "committer": null, "parents": [{"sha": "e4f4feba329d1cd7e3fe6fb40c93bdb532f6cb5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4f4feba329d1cd7e3fe6fb40c93bdb532f6cb5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4f4feba329d1cd7e3fe6fb40c93bdb532f6cb5d"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "53bbe9a713c3aa83f9e479e927f9a19bdde60f68", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5791cc29703f503573795fb2ddfad79fb99e8be3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5791cc29703f503573795fb2ddfad79fb99e8be3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5791cc29703f503573795fb2ddfad79fb99e8be3", "patch": "@@ -1,3 +1,11 @@\n+2002-10-18  Jason Thorpe  <thorpej@wasabisystems.com>\n+\n+\t* config/i386/i386.c (x86_initialize_trampoline): Emit a call\n+\tto __enable_execute_stack with the address of the trampoline\n+\tif TRANSFER_FROM_TRAMPOLINE is defined.\n+\t* config/i386/i386.h (TARGET_64BIT): Expand to a compile-time\n+\tconstant if building libgcc2.\n+\n 2002-10-17  Roger Sayle  <roger@eyesopen.com>\n \n \t* doc/c-tree.texi: Update description of COND_EXPR tree nodes."}, {"sha": "1ea90ee860ff095331a5bb44c947d410c1b7bd9e", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5791cc29703f503573795fb2ddfad79fb99e8be3/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5791cc29703f503573795fb2ddfad79fb99e8be3/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=5791cc29703f503573795fb2ddfad79fb99e8be3", "patch": "@@ -11713,6 +11713,11 @@ x86_initialize_trampoline (tramp, fnaddr, cxt)\n       if (offset > TRAMPOLINE_SIZE)\n \tabort ();\n     }\n+\n+#ifdef TRANSFER_FROM_TRAMPOLINE\n+  emit_library_call (gen_rtx (SYMBOL_REF, Pmode, \"__enable_execute_stack\"),\n+\t\t     LCT_NORMAL, VOIDmode, 1, tramp, Pmode);\n+#endif\n }\n \f\n #define def_builtin(MASK, NAME, TYPE, CODE)\t\t\t\\"}, {"sha": "9e52d66e7ffb0ae6a8b44a5a2e6f1fe6939cb96c", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5791cc29703f503573795fb2ddfad79fb99e8be3/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5791cc29703f503573795fb2ddfad79fb99e8be3/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=5791cc29703f503573795fb2ddfad79fb99e8be3", "patch": "@@ -177,7 +177,15 @@ extern int target_flags;\n /* Debug FUNCTION_ARG macros */\n #define TARGET_DEBUG_ARG (ix86_debug_arg_string != 0)\n \n-/* 64bit Sledgehammer mode */\n+/* 64bit Sledgehammer mode.  For libgcc2 we make sure this is a\n+   compile-time constant.  */\n+#ifdef IN_LIBGCC2\n+#ifdef __x86_64__\n+#define TARGET_64BIT 1\n+#else\n+#define TARGET_64BIT 0\n+#endif\n+#else\n #ifdef TARGET_BI_ARCH\n #define TARGET_64BIT (target_flags & MASK_64BIT)\n #else\n@@ -187,6 +195,7 @@ extern int target_flags;\n #define TARGET_64BIT 0\n #endif\n #endif\n+#endif\n \n #define TARGET_386 (ix86_cpu == PROCESSOR_I386)\n #define TARGET_486 (ix86_cpu == PROCESSOR_I486)"}]}