{"sha": "7e964f49026322eb357412e38ba98e14325ca80c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2U5NjRmNDkwMjYzMjJlYjM1NzQxMmUzOGJhOThlMTQzMjVjYTgwYw==", "commit": {"author": {"name": "Vladimir Makarov", "email": "vmakarov@redhat.com", "date": "2016-12-08T21:14:42Z"}, "committer": {"name": "Vladimir Makarov", "email": "vmakarov@gcc.gnu.org", "date": "2016-12-08T21:14:42Z"}, "message": "re PR rtl-optimization/78671 (ICE: in extract_constrain_insn, at recog.c:2213 with -Og -march=skylake-avx512)\n\n2016-12-08  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/78671\n\t* lra-assign.c (lra-assigns.c): Check prohibited regs for an\n\tallocno class.\n\n2016-12-08  Vladimir Makarov  <vmakarov@redhat.com>\n\n\tPR rtl-optimization/78671\n\t* gcc.target/i386/pr78671.c: New.\n\nFrom-SVN: r243462", "tree": {"sha": "34613b9efe94e880416e257a167dc61fda32b61d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34613b9efe94e880416e257a167dc61fda32b61d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e964f49026322eb357412e38ba98e14325ca80c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e964f49026322eb357412e38ba98e14325ca80c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e964f49026322eb357412e38ba98e14325ca80c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e964f49026322eb357412e38ba98e14325ca80c/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "060162e0c44f4596709cf6f6d69a5794bfb315f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/060162e0c44f4596709cf6f6d69a5794bfb315f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/060162e0c44f4596709cf6f6d69a5794bfb315f4"}], "stats": {"total": 37, "additions": 35, "deletions": 2}, "files": [{"sha": "c9371f630311cfad56b3df969a5419306e854fa0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7e964f49026322eb357412e38ba98e14325ca80c", "patch": "@@ -1,3 +1,9 @@\n+2016-12-08  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/78671\n+\t* lra-assign.c (lra-assigns.c): Check prohibited regs for an\n+\tallocno class.\n+\n 2016-12-08  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gcc.target/i386/i386.h (HARD_REGNO_NREGS): Use GENERAL_REGNO_P."}, {"sha": "e852a68fb199c249537991f8acd4ea93c0bf93a7", "filename": "gcc/lra-assigns.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2Flra-assigns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2Flra-assigns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-assigns.c?ref=7e964f49026322eb357412e38ba98e14325ca80c", "patch": "@@ -628,9 +628,13 @@ find_hard_regno_for_1 (int regno, int *cost, int try_only_hard_regno,\n \thard_regno = ira_class_hard_regs[rclass][i];\n       if (! overlaps_hard_reg_set_p (conflict_set,\n \t\t\t\t     PSEUDO_REGNO_MODE (regno), hard_regno)\n-\t  /* We can not use prohibited_class_mode_regs because it is\n-\t     not defined for all classes.  */\n \t  && HARD_REGNO_MODE_OK (hard_regno, PSEUDO_REGNO_MODE (regno))\n+\t  /* We can not use prohibited_class_mode_regs for all classes\n+\t     because it is not defined for all classes.  */\n+\t  && (ira_allocno_class_translate[rclass] != rclass\n+\t      || ! TEST_HARD_REG_BIT (ira_prohibited_class_mode_regs\n+\t\t\t\t      [rclass][PSEUDO_REGNO_MODE (regno)],\n+\t\t\t\t      hard_regno))\n \t  && ! TEST_HARD_REG_BIT (impossible_start_hard_regs, hard_regno)\n \t  && (nregs_diff == 0\n \t      || (WORDS_BIG_ENDIAN"}, {"sha": "f00fcc2df382fdc9fe24e723913a003e2af28a48", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7e964f49026322eb357412e38ba98e14325ca80c", "patch": "@@ -1,3 +1,8 @@\n+2016-12-08  Vladimir Makarov  <vmakarov@redhat.com>\n+\n+\tPR rtl-optimization/78671\n+\t* gcc.target/i386/pr78671.c: New.\n+\n 2015-12-08  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \tPR target/78733"}, {"sha": "026ff17af4fe9052403c5c94d4ec88d4671172de", "filename": "gcc/testsuite/gcc.target/i386/pr78671.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78671.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e964f49026322eb357412e38ba98e14325ca80c/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78671.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr78671.c?ref=7e964f49026322eb357412e38ba98e14325ca80c", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-march=skylake-avx512 -Og\" } */\n+\n+typedef unsigned __int128 u128;\n+typedef unsigned __int128 v64u128 __attribute__ ((vector_size (64)));\n+\n+v64u128\n+foo (u128 u128_3, v64u128 v64u128_3, v64u128 v64u128_2, v64u128 v64u128_1,\n+     v64u128 v64u128_0)\n+{\n+  v64u128_0 <<= 1;\n+  v64u128_2 >>= 0 != v64u128_2;\n+  v64u128_3[v64u128_3[0]] &= 1;\n+  v64u128_3 = v64u128_3 & 1;\n+  v64u128_2 = v64u128_2 >> 1 | v64u128_2 << v64u128_1[0];\n+  v64u128_0[0] >>= 127;\n+  return u128_3 + v64u128_0 + v64u128_2 + v64u128_3;\n+}"}]}