{"sha": "d1d1af106b3e735c2e29a63840ee1687f12927d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFkMWFmMTA2YjNlNzM1YzJlMjlhNjM4NDBlZTE2ODdmMTI5MjdkMg==", "commit": {"author": {"name": "Adam Butcher", "email": "adam@jessamine.co.uk", "date": "2013-11-25T07:43:55Z"}, "committer": {"name": "Adam Butcher", "email": "abutcher@gcc.gnu.org", "date": "2013-11-25T07:43:55Z"}, "message": "Disallow implicit function templates in local functions unless defining a lambda.\n\ngcc/cp/\n\tPR c++/59112\n\tPR c++/59113\n\t* parser.c (cp_parser_parameter_declaration_clause): Disallow implicit\n\tfunction templates in local functions unless defining a lambda.\n\ngcc/testsuite/\n\tPR c++/59112\n\tPR c++/59113\n\tg++.dg/cpp1y/pr58533.C: Updated testcase.\n\tg++.dg/cpp1y/pr59112.C: New testcase.\n\tg++.dg/cpp1y/pr59113.C: New testcase.\n\nFrom-SVN: r205343", "tree": {"sha": "7f720b0c9e4110c48d04a4c1bce549fed22023b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f720b0c9e4110c48d04a4c1bce549fed22023b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1d1af106b3e735c2e29a63840ee1687f12927d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1d1af106b3e735c2e29a63840ee1687f12927d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1d1af106b3e735c2e29a63840ee1687f12927d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1d1af106b3e735c2e29a63840ee1687f12927d2/comments", "author": {"login": "abutcher-gh", "id": 10379705, "node_id": "MDQ6VXNlcjEwMzc5NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/10379705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abutcher-gh", "html_url": "https://github.com/abutcher-gh", "followers_url": "https://api.github.com/users/abutcher-gh/followers", "following_url": "https://api.github.com/users/abutcher-gh/following{/other_user}", "gists_url": "https://api.github.com/users/abutcher-gh/gists{/gist_id}", "starred_url": "https://api.github.com/users/abutcher-gh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abutcher-gh/subscriptions", "organizations_url": "https://api.github.com/users/abutcher-gh/orgs", "repos_url": "https://api.github.com/users/abutcher-gh/repos", "events_url": "https://api.github.com/users/abutcher-gh/events{/privacy}", "received_events_url": "https://api.github.com/users/abutcher-gh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "02231c13506fcbd63be93bba1215211bcbd1024c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02231c13506fcbd63be93bba1215211bcbd1024c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02231c13506fcbd63be93bba1215211bcbd1024c"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "92b520b45edebba681af3fe641da0952a3b2dd9c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d1d1af106b3e735c2e29a63840ee1687f12927d2", "patch": "@@ -1,3 +1,10 @@\n+2013-11-25  Adam Butcher  <adam@jessamine.co.uk>\n+\n+\tPR c++/59112\n+\tPR c++/59113\n+\t* parser.c (cp_parser_parameter_declaration_clause): Disallow implicit\n+\tfunction templates in local functions unless defining a lambda.\n+\n 2013-11-23  Easwaran Raman  <eraman@google.com>\n \n \tPR c++/59031"}, {"sha": "d7092cc6759bc2b9fb7199f965d13864c0c165e3", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=d1d1af106b3e735c2e29a63840ee1687f12927d2", "patch": "@@ -18042,7 +18042,9 @@ cp_parser_parameter_declaration_clause (cp_parser* parser)\n   (void) cleanup;\n \n   if (!processing_specialization)\n-    parser->auto_is_implicit_function_template_parm_p = true;\n+    if (!current_function_decl\n+\t|| (current_class_type && LAMBDA_TYPE_P (current_class_type)))\n+      parser->auto_is_implicit_function_template_parm_p = true;\n \n   /* Peek at the next token.  */\n   token = cp_lexer_peek_token (parser->lexer);"}, {"sha": "ddc0fa21167fee3d9680e058ceb89f3057780e5f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d1d1af106b3e735c2e29a63840ee1687f12927d2", "patch": "@@ -1,3 +1,11 @@\n+2013-11-25  Adam Butcher  <adam@jessamine.co.uk>\n+\n+\tPR c++/59112\n+\tPR c++/59113\n+\tg++.dg/cpp1y/pr58533.C: Updated testcase.\n+\tg++.dg/cpp1y/pr59112.C: New testcase.\n+\tg++.dg/cpp1y/pr59113.C: New testcase.\n+\n 2013-11-25  Terry Guo  <terry.guo@arm.com>\n \n \t* gcc.target/arm/thumb2-slow-flash-data.c: New."}, {"sha": "9bcd7716697fa8147f082c7e8a1bf464208353ef", "filename": "gcc/testsuite/g++.dg/cpp1y/pr58533.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr58533.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr58533.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr58533.C?ref=d1d1af106b3e735c2e29a63840ee1687f12927d2", "patch": "@@ -3,5 +3,5 @@\n \n void foo()\n {\n-  void (*fp)(auto); // { dg-error \"template\" }\n+  void (*fp)(auto); // { dg-error \"auto|not permitted\" }\n }"}, {"sha": "e7326ac311303cdf547a265cbb58056eb00ef0f2", "filename": "gcc/testsuite/g++.dg/cpp1y/pr59112.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr59112.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr59112.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr59112.C?ref=d1d1af106b3e735c2e29a63840ee1687f12927d2", "patch": "@@ -0,0 +1,12 @@\n+// { dg-do compile }\n+// { dg-options \"-std=gnu++1y\" }\n+\n+// PR c++/59112\n+\n+void foo()\n+{\n+  struct A\n+  {\n+    A(auto) {} // { dg-error \"auto|not permitted\" }\n+  };\n+}"}, {"sha": "f909a76bd3581d91dc5fbf11e4fc45e87ac48297", "filename": "gcc/testsuite/g++.dg/cpp1y/pr59113.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr59113.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1d1af106b3e735c2e29a63840ee1687f12927d2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr59113.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fpr59113.C?ref=d1d1af106b3e735c2e29a63840ee1687f12927d2", "patch": "@@ -0,0 +1,11 @@\n+// { dg-do compile }\n+// { dg-options \"-std=gnu++1y\" }\n+\n+// PR c++/59113\n+\n+void foo()\n+{\n+  void bar(auto) {} // { dg-error \"function-definition|auto|not permitted\" }\n+}\n+\n+auto i = 0;"}]}