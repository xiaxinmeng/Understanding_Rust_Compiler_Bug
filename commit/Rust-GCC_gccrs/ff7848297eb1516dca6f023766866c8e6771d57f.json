{"sha": "ff7848297eb1516dca6f023766866c8e6771d57f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY3ODQ4Mjk3ZWIxNTE2ZGNhNmYwMjM3NjY4NjZjOGU2NzcxZDU3Zg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-01-15T09:31:28Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-01-15T09:31:28Z"}, "message": "re PR tree-optimization/55955 (ICE in optab_for_tree_code, at optabs.c:402)\n\n\tPR tree-optimization/55955\n\t* tree-vect-loop.c (vectorizable_reduction): Give up early on\n\t*SHIFT_EXPR and *ROTATE_EXPR codes.\n\n\t* gcc.c-torture/compile/pr55955.c: New test.\n\nFrom-SVN: r195190", "tree": {"sha": "fd8e90b5557638e064987b6da3dd91ca61186bc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd8e90b5557638e064987b6da3dd91ca61186bc0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff7848297eb1516dca6f023766866c8e6771d57f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff7848297eb1516dca6f023766866c8e6771d57f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff7848297eb1516dca6f023766866c8e6771d57f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff7848297eb1516dca6f023766866c8e6771d57f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cd61690f63612fc5e50945e446a44b9ee34c088c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd61690f63612fc5e50945e446a44b9ee34c088c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd61690f63612fc5e50945e446a44b9ee34c088c"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "ea0e4fa01a07db29164f20141b96124e56815181", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ff7848297eb1516dca6f023766866c8e6771d57f", "patch": "@@ -1,5 +1,9 @@\n 2013-01-15  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/55955\n+\t* tree-vect-loop.c (vectorizable_reduction): Give up early on\n+\t*SHIFT_EXPR and *ROTATE_EXPR codes.\n+\n \tPR tree-optimization/48766\n \t* opts.c (common_handle_option): For -fwrapv disable -ftrapv, for\n \t-ftrapv disable -fwrapv."}, {"sha": "a80f16bd85625b8aac9e3628885828e8d6e8277e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ff7848297eb1516dca6f023766866c8e6771d57f", "patch": "@@ -1,3 +1,8 @@\n+2013-01-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/55955\n+\t* gcc.c-torture/compile/pr55955.c: New test.\n+\n 2013-01-15  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR c++/55663"}, {"sha": "2656ffb94fb4b9c56c5cd46c4341b98a7957bc42", "filename": "gcc/testsuite/gcc.c-torture/compile/pr55955.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr55955.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr55955.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr55955.c?ref=ff7848297eb1516dca6f023766866c8e6771d57f", "patch": "@@ -0,0 +1,12 @@\n+/* PR tree-optimization/55955 */\n+\n+int b;\n+\n+void\n+foo (int x)\n+{\n+  int a;\n+  for (a = x; a < 2; a++)\n+    for (b = 0; b < 2; b++)\n+      *(unsigned short *) 0x100000UL %= 46;\n+}"}, {"sha": "d4f6bc72451975ab82146206293574e0a76d6296", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7848297eb1516dca6f023766866c8e6771d57f/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=ff7848297eb1516dca6f023766866c8e6771d57f", "patch": "@@ -4776,6 +4776,17 @@ vectorizable_reduction (gimple stmt, gimple_stmt_iterator *gsi,\n     {\n       /* 4. Supportable by target?  */\n \n+      if (code == LSHIFT_EXPR || code == RSHIFT_EXPR\n+\t  || code == LROTATE_EXPR || code == RROTATE_EXPR)\n+\t{\n+\t  /* Shifts and rotates are only supported by vectorizable_shifts,\n+\t     not vectorizable_reduction.  */\n+          if (dump_enabled_p ())\n+\t    dump_printf_loc (MSG_MISSED_OPTIMIZATION, vect_location,\n+\t\t\t     \"unsupported shift or rotation.\");\n+\t  return false;\n+\t}\n+\n       /* 4.1. check support for the operation in the loop  */\n       optab = optab_for_tree_code (code, vectype_in, optab_default);\n       if (!optab)"}]}