{"sha": "fbcd3360678c348338fefdf6767dcdf376835e80", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJjZDMzNjA2NzhjMzQ4MzM4ZmVmZGY2NzY3ZGNkZjM3NjgzNWU4MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-08-08T23:41:47Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-08-08T23:41:47Z"}, "message": "(create_definition): Warn about `#define a@'...\n\n(create_definition): Warn about `#define a@', since a diagnostic is\nnow required (see ISO TC1's addition to subclause 6.8).  Also warn\nabout `#define is-empty(x) (!x)'.\n\nFrom-SVN: r7877", "tree": {"sha": "48684bc5bf99bafc53c299518553afc39cbf9905", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48684bc5bf99bafc53c299518553afc39cbf9905"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbcd3360678c348338fefdf6767dcdf376835e80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbcd3360678c348338fefdf6767dcdf376835e80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbcd3360678c348338fefdf6767dcdf376835e80", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbcd3360678c348338fefdf6767dcdf376835e80/comments", "author": null, "committer": null, "parents": [{"sha": "73b2ad9e646a0fd610eaad04faca02f8b34eb143", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73b2ad9e646a0fd610eaad04faca02f8b34eb143", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73b2ad9e646a0fd610eaad04faca02f8b34eb143"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "c0678d01f2f8e4fac7b83fc76d4500c55db6ae53", "filename": "gcc/cccp.c", "status": "modified", "additions": 25, "deletions": 3, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbcd3360678c348338fefdf6767dcdf376835e80/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbcd3360678c348338fefdf6767dcdf376835e80/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=fbcd3360678c348338fefdf6767dcdf376835e80", "patch": "@@ -5368,9 +5368,31 @@ create_definition (buf, limit, op)\n   } else {\n     /* Simple expansion or empty definition.  */\n \n-    /* Skip spaces and tabs if any.  */\n-    while (bp < limit && (*bp == ' ' || *bp == '\\t'))\n-      ++bp;\n+    if (bp < limit)\n+      {\n+\tswitch (*bp)\n+\t  {\n+\t    case '\\t': case ' ':\n+\t      /* Skip spaces and tabs.  */\n+\t      while (++bp < limit && (*bp == ' ' || *bp == '\\t'))\n+\t\tcontinue;\n+\t      break;\n+\n+\t    case '!':  case '\"':  case '#':  case '%':  case '&':  case '\\'':\n+\t    case ')':  case '*':  case '+':  case ',':  case '-':  case '.':\n+\t    case '/':  case ':':  case ';':  case '<':  case '=':  case '>':\n+\t    case '?':  case '[':  case '\\\\': case ']':  case '^':  case '{':\n+\t    case '|':  case '}':  case '~':\n+\t      warning (\"missing white space after `#define %.*s'\",\n+\t\t       sym_length, symname);\n+\t      break;\n+\n+\t    default:\n+\t      pedwarn (\"missing white space after `#define %.*s'\",\n+\t\t       sym_length, symname);\n+\t      break;\n+\t  }\n+      }\n     /* Now everything from bp before limit is the definition. */\n     defn = collect_expansion (bp, limit, -1, NULL_PTR);\n     defn->args.argnames = (U_CHAR *) \"\";"}]}