{"sha": "ba245151fca2c6a5af41378f56952250a1d7672e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmEyNDUxNTFmY2EyYzZhNWFmNDEzNzhmNTY5NTIyNTBhMWQ3NjcyZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2003-09-06T22:47:19Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2003-09-06T22:47:19Z"}, "message": "cgraph.c (cgraph_mark_reachable_node): Only enqueue finalized functions.\n\n\n\t* cgraph.c (cgraph_mark_reachable_node): Only enqueue finalized\n\tfunctions.\n\t(cgraph_varpool_finalize_decl): Notice global symbol when needed.\n\nFrom-SVN: r71149", "tree": {"sha": "d978aa32ef0b5a79b89c076b7716cd14ffd50a86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d978aa32ef0b5a79b89c076b7716cd14ffd50a86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba245151fca2c6a5af41378f56952250a1d7672e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba245151fca2c6a5af41378f56952250a1d7672e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba245151fca2c6a5af41378f56952250a1d7672e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba245151fca2c6a5af41378f56952250a1d7672e/comments", "author": null, "committer": null, "parents": [{"sha": "7e668417e948ec56c7ecacdde8651eab9effb4f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e668417e948ec56c7ecacdde8651eab9effb4f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e668417e948ec56c7ecacdde8651eab9effb4f2"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "2f265b796290ec7ab65f6b8eb0d38d58313dd82c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba245151fca2c6a5af41378f56952250a1d7672e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba245151fca2c6a5af41378f56952250a1d7672e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba245151fca2c6a5af41378f56952250a1d7672e", "patch": "@@ -3,6 +3,10 @@ Sun Sep  7 00:22:22 CEST 2003  Jan Hubicka  <jh@suse.cz>\n \t* toplev.c  (rest_of_decl_compilation):  Do not finalize external\n \tvirables. \n \n+\t* cgraph.c (cgraph_mark_reachable_node): Only enqueue finalized\n+\tfunctions.\n+\t(cgraph_varpool_finalize_decl): Notice global symbol when needed.\n+\n Sat Sep  6 23:49:13 CEST 2003  Jan Hubicka  <jh@suse.cz>\n \n \tPR target/12070"}, {"sha": "4eaa60e8e76c17f02b4670eb0d78a742eac998fd", "filename": "gcc/cgraph.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba245151fca2c6a5af41378f56952250a1d7672e/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba245151fca2c6a5af41378f56952250a1d7672e/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=ba245151fca2c6a5af41378f56952250a1d7672e", "patch": "@@ -239,13 +239,13 @@ cgraph_remove_node (struct cgraph_node *node)\n void\n cgraph_mark_reachable_node (struct cgraph_node *node)\n {\n-  if (!node->reachable && DECL_SAVED_TREE (node->decl))\n+  if (!node->reachable && node->local.finalized)\n     {\n+      notice_global_symbol (node->decl);\n       node->reachable = 1;\n \n       node->next_needed = cgraph_nodes_queue;\n       cgraph_nodes_queue = node;\n-      notice_global_symbol (node->decl);\n \n       /* At the moment frontend automatically emits all nested functions.  */\n       if (node->nested)\n@@ -486,6 +486,7 @@ cgraph_varpool_finalize_decl (tree decl)\n     {\n       node->next_needed = cgraph_varpool_nodes_queue;\n       cgraph_varpool_nodes_queue = node;\n+      notice_global_symbol (decl);\n     }\n   node->finalized = true;\n "}]}