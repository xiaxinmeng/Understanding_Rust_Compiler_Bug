{"sha": "2d309510df0ab85c0e86e721aa93c3193b8f9d39", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQzMDk1MTBkZjBhYjg1YzBlODZlNzIxYWE5M2MzMTkzYjhmOWQzOQ==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gnu.org", "date": "2006-01-04T12:21:27Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2006-01-04T12:21:27Z"}, "message": "re PR middle-end/24252 (Missing \"warning: control reaches end of non-void function\" in static function)\n\n2006-01-04  Paolo Bonzini  <bonzini@gnu.org>\n\n\tPR bootstrap/24252\n\n\t* Makefile.def (flags_to_pass): Add STAGE1_CFLAGS and STAGE1_LANGUAGES.\n\t* Makefile.tpl (OBJDUMP): New.\n\t(EXTRA_HOST_FLAGS): Add it.\n\t(EXTRA_GCC_FLAGS): Remove flags already specified in flags_to_pass.\n\n        * Makefile.tpl (stage[+id+]-start, stage[+id+]-end): Do not try\n        to use symbolic links between directories.  Avoid race conditions\n        or make them harmless.\n        * configure.in: Do not try to use symbolic links between directories.\n\n\t* Makefile.def (LEAN): Pass.\n\t* Makefile.tpl (LEAN): Define.\n\t(stage[+id+]-start): Accept that the previous directory does not\n\texist, if the bootstrap is lean.\n\t(stage[+id+]-bubble): Invoke lean bootstrap commands after\n\tstage[+id+]-start.  Use a makefile variable and an `if' instead of a\n\tconfigure substitution.\n\t([+compare-target+]): Likewise.\n\t([+bootstrap-target+]-lean): New.\n\t* configure.in: Remove lean bootstrap support from here.\n\n        * Makefile.in: Regenerate.\n        * configure: Regenerate.\n\nFrom-SVN: r109325", "tree": {"sha": "30f6935e6b485478719f19cb5db78114923c7244", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/30f6935e6b485478719f19cb5db78114923c7244"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d309510df0ab85c0e86e721aa93c3193b8f9d39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d309510df0ab85c0e86e721aa93c3193b8f9d39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d309510df0ab85c0e86e721aa93c3193b8f9d39", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d309510df0ab85c0e86e721aa93c3193b8f9d39/comments", "author": {"login": "bonzini", "id": 42082, "node_id": "MDQ6VXNlcjQyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonzini", "html_url": "https://github.com/bonzini", "followers_url": "https://api.github.com/users/bonzini/followers", "following_url": "https://api.github.com/users/bonzini/following{/other_user}", "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "organizations_url": "https://api.github.com/users/bonzini/orgs", "repos_url": "https://api.github.com/users/bonzini/repos", "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f7ace77f1f4a713c2e96b4daf6181216b5df29d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7ace77f1f4a713c2e96b4daf6181216b5df29d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7ace77f1f4a713c2e96b4daf6181216b5df29d9"}], "stats": {"total": 1381, "additions": 570, "deletions": 811}, "files": [{"sha": "b10a7135cc35506cf43393921e4b55253253efcc", "filename": "ChangeLog", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d309510df0ab85c0e86e721aa93c3193b8f9d39/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d309510df0ab85c0e86e721aa93c3193b8f9d39/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=2d309510df0ab85c0e86e721aa93c3193b8f9d39", "patch": "@@ -1,3 +1,31 @@\n+2006-01-04  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\tPR bootstrap/24252\n+\n+\t* Makefile.def (flags_to_pass): Add STAGE1_CFLAGS and STAGE1_LANGUAGES.\n+\t* Makefile.tpl (OBJDUMP): New.\n+\t(EXTRA_HOST_FLAGS): Add it.\n+\t(EXTRA_GCC_FLAGS): Remove flags already specified in flags_to_pass.\n+\n+        * Makefile.tpl (stage[+id+]-start, stage[+id+]-end): Do not try\n+        to use symbolic links between directories.  Avoid race conditions\n+        or make them harmless.\n+        * configure.in: Do not try to use symbolic links between directories.\n+\n+\t* Makefile.def (LEAN): Pass.\n+\t* Makefile.tpl (LEAN): Define.\n+\t(stage[+id+]-start): Accept that the previous directory does not\n+\texist, if the bootstrap is lean.\n+\t(stage[+id+]-bubble): Invoke lean bootstrap commands after\n+\tstage[+id+]-start.  Use a makefile variable and an `if' instead of a\n+\tconfigure substitution.\n+\t([+compare-target+]): Likewise.\n+\t([+bootstrap-target+]-lean): New.\n+\t* configure.in: Remove lean bootstrap support from here.\n+\n+        * Makefile.in: Regenerate.\n+        * configure: Regenerate.\n+\n 2006-01-04  Ben Elliston  <bje@au.ibm.com>\n \n \t* MAINTAINERS (libdecnumber): Add myself."}, {"sha": "acc770dc3d639dc4206357e2be0bd746a3a7f04a", "filename": "Makefile.def", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d309510df0ab85c0e86e721aa93c3193b8f9d39/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d309510df0ab85c0e86e721aa93c3193b8f9d39/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=2d309510df0ab85c0e86e721aa93c3193b8f9d39", "patch": "@@ -4,7 +4,7 @@ AutoGen definitions Makefile.tpl;\n // Makefile.in is generated from Makefile.tpl by 'autogen Makefile.def'.\n // This file was originally written by Nathanael Nerode.\n //\n-//   Copyright 2002, 2003 Free Software Foundation\n+//   Copyright 2002, 2003, 2004, 2005, 2006 Free Software Foundation\n //\n // This file is free software; you can redistribute it and/or modify\n // it under the terms of the GNU General Public License as published by\n@@ -213,6 +213,8 @@ flags_to_pass = { flag= CXXFLAGS ; };\n flags_to_pass = { flag= LDFLAGS ; };\n flags_to_pass = { flag= LIBCFLAGS ; };\n flags_to_pass = { flag= LIBCXXFLAGS ; };\n+flags_to_pass = { flag= STAGE1_CFLAGS ; };\n+flags_to_pass = { flag= STAGE1_LANGUAGES ; };\n \n // Target tools\n flags_to_pass = { flag= AR_FOR_TARGET ; };\n@@ -236,6 +238,9 @@ flags_to_pass = { flag= RANLIB_FOR_TARGET ; };\n flags_to_pass = { flag= STRIP_FOR_TARGET ; };\n flags_to_pass = { flag= WINDRES_FOR_TARGET ; };\n \n+// Miscellaneous\n+flags_to_pass = { flag= LEAN ; };\n+\n // Inter-module dependencies\n \n // Build modules"}, {"sha": "1dad15b97c466d055d9fd191293e94003ef7a513", "filename": "Makefile.in", "status": "modified", "additions": 411, "deletions": 617, "changes": 1028, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d309510df0ab85c0e86e721aa93c3193b8f9d39/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d309510df0ab85c0e86e721aa93c3193b8f9d39/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=2d309510df0ab85c0e86e721aa93c3193b8f9d39", "patch": "@@ -3,7 +3,7 @@\n #\n # Makefile for directory with subdirs to build.\n #   Copyright (C) 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-#   1999, 2000, 2001, 2002, 2003, 2004 Free Software Foundation\n+#   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation\n #\n # This file is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -282,6 +282,7 @@ DLLTOOL = @DLLTOOL@\n LD = @LD@\n LIPO = @LIPO@\n NM = @NM@\n+OBJDUMP = @OBJDUMP@\n RANLIB = @RANLIB@\n STRIP = @STRIP@\n WINDRES = @WINDRES@\n@@ -440,6 +441,8 @@ BASE_FLAGS_TO_PASS = \\\n \t\"LDFLAGS=$(LDFLAGS)\" \\\n \t\"LIBCFLAGS=$(LIBCFLAGS)\" \\\n \t\"LIBCXXFLAGS=$(LIBCXXFLAGS)\" \\\n+\t\"STAGE1_CFLAGS=$(STAGE1_CFLAGS)\" \\\n+\t\"STAGE1_LANGUAGES=$(STAGE1_LANGUAGES)\" \\\n \t\"AR_FOR_TARGET=$(AR_FOR_TARGET)\" \\\n \t\"AS_FOR_TARGET=$(AS_FOR_TARGET)\" \\\n \t\"CC_FOR_TARGET=$(CC_FOR_TARGET)\" \\\n@@ -460,6 +463,7 @@ BASE_FLAGS_TO_PASS = \\\n \t\"RANLIB_FOR_TARGET=$(RANLIB_FOR_TARGET)\" \\\n \t\"STRIP_FOR_TARGET=$(STRIP_FOR_TARGET)\" \\\n \t\"WINDRES_FOR_TARGET=$(WINDRES_FOR_TARGET)\" \\\n+\t\"LEAN=$(LEAN)\" \\\n \t\"CONFIG_SHELL=$(SHELL)\" \\\n \t\"MAKEINFO=$(MAKEINFO) $(MAKEINFOFLAGS)\" \n \n@@ -477,6 +481,7 @@ EXTRA_HOST_FLAGS = \\\n \t'LD=$(LD)' \\\n \t'LIPO=$(LIPO)' \\\n \t'NM=$(NM)' \\\n+\t'OBJDUMP=$(OBJDUMP)' \\\n \t'RANLIB=$(RANLIB)' \\\n \t'STRIP=$(STRIP)' \\\n \t'WINDRES=$(WINDRES)'\n@@ -534,8 +539,6 @@ EXTRA_GCC_FLAGS = \\\n \t\"`echo 'LIBGCC2_CFLAGS=$(LIBGCC2_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n \t\"`echo 'LIBGCC2_DEBUG_CFLAGS=$(LIBGCC2_DEBUG_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n \t\"`echo 'LIBGCC2_INCLUDES=$(LIBGCC2_INCLUDES)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n-\t\"`echo 'STAGE1_CFLAGS=$(STAGE1_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n-\t\"`echo 'BOOT_CFLAGS=$(BOOT_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n \t\"`echo 'BOOT_ADAFLAGS=$(BOOT_ADAFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\"\n \n GCC_FLAGS_TO_PASS = $(BASE_FLAGS_TO_PASS) $(EXTRA_HOST_FLAGS) $(EXTRA_GCC_FLAGS)\n@@ -35679,6 +35682,9 @@ unstage:\n stage:\n \t@: $(MAKE); $(stage)\n \n+# Disable commands for lean bootstrap.\n+LEAN = false\n+\n # We name the build directories for the various stages \"stage1-gcc\",\n # \"stage2-gcc\",\"stage3-gcc\", etc.\n \n@@ -35733,146 +35739,122 @@ stage1-start::\n @if bfd\n \t@cd $(HOST_SUBDIR); [ -d stage1-bfd ] || \\\n \t  mkdir stage1-bfd; \\\n-\tset stage1-bfd bfd ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-bfd bfd \n @endif bfd\n @if opcodes\n \t@cd $(HOST_SUBDIR); [ -d stage1-opcodes ] || \\\n \t  mkdir stage1-opcodes; \\\n-\tset stage1-opcodes opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-opcodes opcodes \n @endif opcodes\n @if binutils\n \t@cd $(HOST_SUBDIR); [ -d stage1-binutils ] || \\\n \t  mkdir stage1-binutils; \\\n-\tset stage1-binutils binutils ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-binutils binutils \n @endif binutils\n @if gas\n \t@cd $(HOST_SUBDIR); [ -d stage1-gas ] || \\\n \t  mkdir stage1-gas; \\\n-\tset stage1-gas gas ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-gas gas \n @endif gas\n @if gcc\n \t@cd $(HOST_SUBDIR); [ -d stage1-gcc ] || \\\n \t  mkdir stage1-gcc; \\\n-\tset stage1-gcc gcc ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-gcc gcc \n @endif gcc\n @if intl\n \t@cd $(HOST_SUBDIR); [ -d stage1-intl ] || \\\n \t  mkdir stage1-intl; \\\n-\tset stage1-intl intl ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-intl intl \n @endif intl\n @if ld\n \t@cd $(HOST_SUBDIR); [ -d stage1-ld ] || \\\n \t  mkdir stage1-ld; \\\n-\tset stage1-ld ld ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-ld ld \n @endif ld\n @if libcpp\n \t@cd $(HOST_SUBDIR); [ -d stage1-libcpp ] || \\\n \t  mkdir stage1-libcpp; \\\n-\tset stage1-libcpp libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-libcpp libcpp \n @endif libcpp\n @if libdecnumber\n \t@cd $(HOST_SUBDIR); [ -d stage1-libdecnumber ] || \\\n \t  mkdir stage1-libdecnumber; \\\n-\tset stage1-libdecnumber libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-libdecnumber libdecnumber \n @endif libdecnumber\n @if libiberty\n \t@cd $(HOST_SUBDIR); [ -d stage1-libiberty ] || \\\n \t  mkdir stage1-libiberty; \\\n-\tset stage1-libiberty libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-libiberty libiberty \n @endif libiberty\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage1-zlib ] || \\\n \t  mkdir stage1-zlib; \\\n-\tset stage1-zlib zlib ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-zlib zlib \n @endif zlib\n \t@[ -d stage1-$(TARGET_SUBDIR) ] || \\\n \t  mkdir stage1-$(TARGET_SUBDIR); \\\n-\tset stage1-$(TARGET_SUBDIR) $(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage1-$(TARGET_SUBDIR) $(TARGET_SUBDIR) \n \n-stage1-end::\n-\t@rm -f stage_current\n+stage1-end:: \n @if bfd\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set bfd stage1-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/bfd ; then \\\n+\t  cd $(HOST_SUBDIR); mv bfd stage1-bfd  ; \\\n \tfi\n @endif bfd\n @if opcodes\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set opcodes stage1-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/opcodes ; then \\\n+\t  cd $(HOST_SUBDIR); mv opcodes stage1-opcodes  ; \\\n \tfi\n @endif opcodes\n @if binutils\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set binutils stage1-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/binutils ; then \\\n+\t  cd $(HOST_SUBDIR); mv binutils stage1-binutils  ; \\\n \tfi\n @endif binutils\n @if gas\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gas stage1-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gas ; then \\\n+\t  cd $(HOST_SUBDIR); mv gas stage1-gas  ; \\\n \tfi\n @endif gas\n @if gcc\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gcc stage1-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gcc ; then \\\n+\t  cd $(HOST_SUBDIR); mv gcc stage1-gcc  ; \\\n \tfi\n @endif gcc\n @if intl\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set intl stage1-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/intl ; then \\\n+\t  cd $(HOST_SUBDIR); mv intl stage1-intl  ; \\\n \tfi\n @endif intl\n @if ld\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set ld stage1-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/ld ; then \\\n+\t  cd $(HOST_SUBDIR); mv ld stage1-ld  ; \\\n \tfi\n @endif ld\n @if libcpp\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libcpp stage1-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libcpp ; then \\\n+\t  cd $(HOST_SUBDIR); mv libcpp stage1-libcpp  ; \\\n \tfi\n @endif libcpp\n @if libdecnumber\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libdecnumber stage1-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libdecnumber ; then \\\n+\t  cd $(HOST_SUBDIR); mv libdecnumber stage1-libdecnumber  ; \\\n \tfi\n @endif libdecnumber\n @if libiberty\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libiberty stage1-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libiberty ; then \\\n+\t  cd $(HOST_SUBDIR); mv libiberty stage1-libiberty  ; \\\n \tfi\n @endif libiberty\n @if zlib\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set zlib stage1-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/zlib ; then \\\n+\t  cd $(HOST_SUBDIR); mv zlib stage1-zlib  ; \\\n \tfi\n @endif zlib\n \t@if test -d $(TARGET_SUBDIR) ; then \\\n-\t  set $(TARGET_SUBDIR) stage1-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n+\t  mv $(TARGET_SUBDIR) stage1-$(TARGET_SUBDIR)  ; \\\n \tfi\n+\trm -f stage_current\n \n # Bubble a bugfix through all the stages up to stage 1.  They are\n # remade, but not reconfigured.  The next stage (if any) will not be\n@@ -35919,194 +35901,146 @@ stage2-start::\n @if bfd\n \t@cd $(HOST_SUBDIR); [ -d stage2-bfd ] || \\\n \t  mkdir stage2-bfd; \\\n-\tset stage2-bfd bfd ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-bfd prev-bfd ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-bfd bfd  ; \\\n+\tmv stage1-bfd prev-bfd || test -f stage1-lean \n @endif bfd\n @if opcodes\n \t@cd $(HOST_SUBDIR); [ -d stage2-opcodes ] || \\\n \t  mkdir stage2-opcodes; \\\n-\tset stage2-opcodes opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-opcodes prev-opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-opcodes opcodes  ; \\\n+\tmv stage1-opcodes prev-opcodes || test -f stage1-lean \n @endif opcodes\n @if binutils\n \t@cd $(HOST_SUBDIR); [ -d stage2-binutils ] || \\\n \t  mkdir stage2-binutils; \\\n-\tset stage2-binutils binutils ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-binutils prev-binutils ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-binutils binutils  ; \\\n+\tmv stage1-binutils prev-binutils || test -f stage1-lean \n @endif binutils\n @if gas\n \t@cd $(HOST_SUBDIR); [ -d stage2-gas ] || \\\n \t  mkdir stage2-gas; \\\n-\tset stage2-gas gas ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-gas prev-gas ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-gas gas  ; \\\n+\tmv stage1-gas prev-gas || test -f stage1-lean \n @endif gas\n @if gcc\n \t@cd $(HOST_SUBDIR); [ -d stage2-gcc ] || \\\n \t  mkdir stage2-gcc; \\\n-\tset stage2-gcc gcc ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-gcc prev-gcc ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-gcc gcc  ; \\\n+\tmv stage1-gcc prev-gcc || test -f stage1-lean \n @endif gcc\n @if intl\n \t@cd $(HOST_SUBDIR); [ -d stage2-intl ] || \\\n \t  mkdir stage2-intl; \\\n-\tset stage2-intl intl ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-intl prev-intl ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-intl intl  ; \\\n+\tmv stage1-intl prev-intl || test -f stage1-lean \n @endif intl\n @if ld\n \t@cd $(HOST_SUBDIR); [ -d stage2-ld ] || \\\n \t  mkdir stage2-ld; \\\n-\tset stage2-ld ld ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-ld prev-ld ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-ld ld  ; \\\n+\tmv stage1-ld prev-ld || test -f stage1-lean \n @endif ld\n @if libcpp\n \t@cd $(HOST_SUBDIR); [ -d stage2-libcpp ] || \\\n \t  mkdir stage2-libcpp; \\\n-\tset stage2-libcpp libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-libcpp prev-libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-libcpp libcpp  ; \\\n+\tmv stage1-libcpp prev-libcpp || test -f stage1-lean \n @endif libcpp\n @if libdecnumber\n \t@cd $(HOST_SUBDIR); [ -d stage2-libdecnumber ] || \\\n \t  mkdir stage2-libdecnumber; \\\n-\tset stage2-libdecnumber libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-libdecnumber prev-libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-libdecnumber libdecnumber  ; \\\n+\tmv stage1-libdecnumber prev-libdecnumber || test -f stage1-lean \n @endif libdecnumber\n @if libiberty\n \t@cd $(HOST_SUBDIR); [ -d stage2-libiberty ] || \\\n \t  mkdir stage2-libiberty; \\\n-\tset stage2-libiberty libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-libiberty prev-libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-libiberty libiberty  ; \\\n+\tmv stage1-libiberty prev-libiberty || test -f stage1-lean \n @endif libiberty\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage2-zlib ] || \\\n \t  mkdir stage2-zlib; \\\n-\tset stage2-zlib zlib ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-zlib prev-zlib ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-zlib zlib  ; \\\n+\tmv stage1-zlib prev-zlib || test -f stage1-lean \n @endif zlib\n \t@[ -d stage2-$(TARGET_SUBDIR) ] || \\\n \t  mkdir stage2-$(TARGET_SUBDIR); \\\n-\tset stage2-$(TARGET_SUBDIR) $(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage2-$(TARGET_SUBDIR) $(TARGET_SUBDIR)  ; \\\n+\tmv stage1-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) || test -f stage1-lean \n \n-stage2-end::\n-\t@rm -f stage_current\n+stage2-end:: \n @if bfd\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set bfd stage2-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-bfd stage1-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/bfd ; then \\\n+\t  cd $(HOST_SUBDIR); mv bfd stage2-bfd ; \\\n+\t  mv prev-bfd stage1-bfd ; :  ; \\\n \tfi\n @endif bfd\n @if opcodes\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set opcodes stage2-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-opcodes stage1-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/opcodes ; then \\\n+\t  cd $(HOST_SUBDIR); mv opcodes stage2-opcodes ; \\\n+\t  mv prev-opcodes stage1-opcodes ; :  ; \\\n \tfi\n @endif opcodes\n @if binutils\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set binutils stage2-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-binutils stage1-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/binutils ; then \\\n+\t  cd $(HOST_SUBDIR); mv binutils stage2-binutils ; \\\n+\t  mv prev-binutils stage1-binutils ; :  ; \\\n \tfi\n @endif binutils\n @if gas\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gas stage2-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gas stage1-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gas ; then \\\n+\t  cd $(HOST_SUBDIR); mv gas stage2-gas ; \\\n+\t  mv prev-gas stage1-gas ; :  ; \\\n \tfi\n @endif gas\n @if gcc\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gcc stage2-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gcc stage1-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gcc ; then \\\n+\t  cd $(HOST_SUBDIR); mv gcc stage2-gcc ; \\\n+\t  mv prev-gcc stage1-gcc ; :  ; \\\n \tfi\n @endif gcc\n @if intl\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set intl stage2-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-intl stage1-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/intl ; then \\\n+\t  cd $(HOST_SUBDIR); mv intl stage2-intl ; \\\n+\t  mv prev-intl stage1-intl ; :  ; \\\n \tfi\n @endif intl\n @if ld\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set ld stage2-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-ld stage1-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/ld ; then \\\n+\t  cd $(HOST_SUBDIR); mv ld stage2-ld ; \\\n+\t  mv prev-ld stage1-ld ; :  ; \\\n \tfi\n @endif ld\n @if libcpp\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libcpp stage2-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libcpp stage1-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libcpp ; then \\\n+\t  cd $(HOST_SUBDIR); mv libcpp stage2-libcpp ; \\\n+\t  mv prev-libcpp stage1-libcpp ; :  ; \\\n \tfi\n @endif libcpp\n @if libdecnumber\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libdecnumber stage2-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libdecnumber stage1-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libdecnumber ; then \\\n+\t  cd $(HOST_SUBDIR); mv libdecnumber stage2-libdecnumber ; \\\n+\t  mv prev-libdecnumber stage1-libdecnumber ; :  ; \\\n \tfi\n @endif libdecnumber\n @if libiberty\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libiberty stage2-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libiberty stage1-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libiberty ; then \\\n+\t  cd $(HOST_SUBDIR); mv libiberty stage2-libiberty ; \\\n+\t  mv prev-libiberty stage1-libiberty ; :  ; \\\n \tfi\n @endif libiberty\n @if zlib\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set zlib stage2-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-zlib stage1-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/zlib ; then \\\n+\t  cd $(HOST_SUBDIR); mv zlib stage2-zlib ; \\\n+\t  mv prev-zlib stage1-zlib ; :  ; \\\n \tfi\n @endif zlib\n \t@if test -d $(TARGET_SUBDIR) ; then \\\n-\t  set $(TARGET_SUBDIR) stage2-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n-\t  set prev-$(TARGET_SUBDIR) stage1-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n+\t  mv $(TARGET_SUBDIR) stage2-$(TARGET_SUBDIR)  ; \\\n+\t  mv prev-$(TARGET_SUBDIR) stage1-$(TARGET_SUBDIR) ; :  ; \\\n \tfi\n+\trm -f stage_current\n \n # Bubble a bugfix through all the stages up to stage 2.  They are\n # remade, but not reconfigured.  The next stage (if any) will not be\n@@ -36131,7 +36065,7 @@ do-clean: clean-stage2\n \n \n \n-.PHONY: bootstrap2\n+.PHONY: bootstrap2 bootstrap2-lean\n bootstrap2:\n \techo stage2 > stage_final\n \t@r=`${PWD_COMMAND}`; export r; \\\n@@ -36142,6 +36076,16 @@ bootstrap2:\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n \n+bootstrap2-lean:\n+\techo stage2 > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) LEAN=: stage2-bubble\n+\t@: $(MAKE); $(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stage1:: distclean-stage2 \n@@ -36164,207 +36108,162 @@ stage3-start::\n @if bfd\n \t@cd $(HOST_SUBDIR); [ -d stage3-bfd ] || \\\n \t  mkdir stage3-bfd; \\\n-\tset stage3-bfd bfd ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-bfd prev-bfd ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-bfd bfd  ; \\\n+\tmv stage2-bfd prev-bfd || test -f stage2-lean \n @endif bfd\n @if opcodes\n \t@cd $(HOST_SUBDIR); [ -d stage3-opcodes ] || \\\n \t  mkdir stage3-opcodes; \\\n-\tset stage3-opcodes opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-opcodes prev-opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-opcodes opcodes  ; \\\n+\tmv stage2-opcodes prev-opcodes || test -f stage2-lean \n @endif opcodes\n @if binutils\n \t@cd $(HOST_SUBDIR); [ -d stage3-binutils ] || \\\n \t  mkdir stage3-binutils; \\\n-\tset stage3-binutils binutils ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-binutils prev-binutils ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-binutils binutils  ; \\\n+\tmv stage2-binutils prev-binutils || test -f stage2-lean \n @endif binutils\n @if gas\n \t@cd $(HOST_SUBDIR); [ -d stage3-gas ] || \\\n \t  mkdir stage3-gas; \\\n-\tset stage3-gas gas ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-gas prev-gas ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-gas gas  ; \\\n+\tmv stage2-gas prev-gas || test -f stage2-lean \n @endif gas\n @if gcc\n \t@cd $(HOST_SUBDIR); [ -d stage3-gcc ] || \\\n \t  mkdir stage3-gcc; \\\n-\tset stage3-gcc gcc ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-gcc prev-gcc ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-gcc gcc  ; \\\n+\tmv stage2-gcc prev-gcc || test -f stage2-lean \n @endif gcc\n @if intl\n \t@cd $(HOST_SUBDIR); [ -d stage3-intl ] || \\\n \t  mkdir stage3-intl; \\\n-\tset stage3-intl intl ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-intl prev-intl ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-intl intl  ; \\\n+\tmv stage2-intl prev-intl || test -f stage2-lean \n @endif intl\n @if ld\n \t@cd $(HOST_SUBDIR); [ -d stage3-ld ] || \\\n \t  mkdir stage3-ld; \\\n-\tset stage3-ld ld ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-ld prev-ld ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-ld ld  ; \\\n+\tmv stage2-ld prev-ld || test -f stage2-lean \n @endif ld\n @if libcpp\n \t@cd $(HOST_SUBDIR); [ -d stage3-libcpp ] || \\\n \t  mkdir stage3-libcpp; \\\n-\tset stage3-libcpp libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-libcpp prev-libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-libcpp libcpp  ; \\\n+\tmv stage2-libcpp prev-libcpp || test -f stage2-lean \n @endif libcpp\n @if libdecnumber\n \t@cd $(HOST_SUBDIR); [ -d stage3-libdecnumber ] || \\\n \t  mkdir stage3-libdecnumber; \\\n-\tset stage3-libdecnumber libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-libdecnumber prev-libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-libdecnumber libdecnumber  ; \\\n+\tmv stage2-libdecnumber prev-libdecnumber || test -f stage2-lean \n @endif libdecnumber\n @if libiberty\n \t@cd $(HOST_SUBDIR); [ -d stage3-libiberty ] || \\\n \t  mkdir stage3-libiberty; \\\n-\tset stage3-libiberty libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-libiberty prev-libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-libiberty libiberty  ; \\\n+\tmv stage2-libiberty prev-libiberty || test -f stage2-lean \n @endif libiberty\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage3-zlib ] || \\\n \t  mkdir stage3-zlib; \\\n-\tset stage3-zlib zlib ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-zlib prev-zlib ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-zlib zlib  ; \\\n+\tmv stage2-zlib prev-zlib || test -f stage2-lean \n @endif zlib\n \t@[ -d stage3-$(TARGET_SUBDIR) ] || \\\n \t  mkdir stage3-$(TARGET_SUBDIR); \\\n-\tset stage3-$(TARGET_SUBDIR) $(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage2-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage3-$(TARGET_SUBDIR) $(TARGET_SUBDIR)  ; \\\n+\tmv stage2-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) || test -f stage2-lean \n \n-stage3-end::\n-\t@rm -f stage_current\n+stage3-end:: \n @if bfd\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set bfd stage3-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-bfd stage2-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/bfd ; then \\\n+\t  cd $(HOST_SUBDIR); mv bfd stage3-bfd ; \\\n+\t  mv prev-bfd stage2-bfd ; :  ; \\\n \tfi\n @endif bfd\n @if opcodes\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set opcodes stage3-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-opcodes stage2-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/opcodes ; then \\\n+\t  cd $(HOST_SUBDIR); mv opcodes stage3-opcodes ; \\\n+\t  mv prev-opcodes stage2-opcodes ; :  ; \\\n \tfi\n @endif opcodes\n @if binutils\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set binutils stage3-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-binutils stage2-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/binutils ; then \\\n+\t  cd $(HOST_SUBDIR); mv binutils stage3-binutils ; \\\n+\t  mv prev-binutils stage2-binutils ; :  ; \\\n \tfi\n @endif binutils\n @if gas\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gas stage3-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gas stage2-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gas ; then \\\n+\t  cd $(HOST_SUBDIR); mv gas stage3-gas ; \\\n+\t  mv prev-gas stage2-gas ; :  ; \\\n \tfi\n @endif gas\n @if gcc\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gcc stage3-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gcc stage2-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gcc ; then \\\n+\t  cd $(HOST_SUBDIR); mv gcc stage3-gcc ; \\\n+\t  mv prev-gcc stage2-gcc ; :  ; \\\n \tfi\n @endif gcc\n @if intl\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set intl stage3-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-intl stage2-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/intl ; then \\\n+\t  cd $(HOST_SUBDIR); mv intl stage3-intl ; \\\n+\t  mv prev-intl stage2-intl ; :  ; \\\n \tfi\n @endif intl\n @if ld\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set ld stage3-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-ld stage2-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/ld ; then \\\n+\t  cd $(HOST_SUBDIR); mv ld stage3-ld ; \\\n+\t  mv prev-ld stage2-ld ; :  ; \\\n \tfi\n @endif ld\n @if libcpp\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libcpp stage3-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libcpp stage2-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libcpp ; then \\\n+\t  cd $(HOST_SUBDIR); mv libcpp stage3-libcpp ; \\\n+\t  mv prev-libcpp stage2-libcpp ; :  ; \\\n \tfi\n @endif libcpp\n @if libdecnumber\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libdecnumber stage3-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libdecnumber stage2-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libdecnumber ; then \\\n+\t  cd $(HOST_SUBDIR); mv libdecnumber stage3-libdecnumber ; \\\n+\t  mv prev-libdecnumber stage2-libdecnumber ; :  ; \\\n \tfi\n @endif libdecnumber\n @if libiberty\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libiberty stage3-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libiberty stage2-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libiberty ; then \\\n+\t  cd $(HOST_SUBDIR); mv libiberty stage3-libiberty ; \\\n+\t  mv prev-libiberty stage2-libiberty ; :  ; \\\n \tfi\n @endif libiberty\n @if zlib\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set zlib stage3-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-zlib stage2-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/zlib ; then \\\n+\t  cd $(HOST_SUBDIR); mv zlib stage3-zlib ; \\\n+\t  mv prev-zlib stage2-zlib ; :  ; \\\n \tfi\n @endif zlib\n \t@if test -d $(TARGET_SUBDIR) ; then \\\n-\t  set $(TARGET_SUBDIR) stage3-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n-\t  set prev-$(TARGET_SUBDIR) stage2-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n+\t  mv $(TARGET_SUBDIR) stage3-$(TARGET_SUBDIR)  ; \\\n+\t  mv prev-$(TARGET_SUBDIR) stage2-$(TARGET_SUBDIR) ; :  ; \\\n \tfi\n+\trm -f stage_current\n \n # Bubble a bugfix through all the stages up to stage 3.  They are\n # remade, but not reconfigured.  The next stage (if any) will not be\n # reconfigured as well.\n .PHONY: stage3-bubble\n stage3-bubble:: stage2-bubble\n-\t@bootstrap_lean@-rm -rf stage1-* ; $(STAMP) stage1-lean\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \tif test -f stage3-lean || test -f stage2-lean  ; then \\\n \t  echo Skipping rebuild of stage3 ; \\\n \telse \\\n \t  $(MAKE) stage3-start; \\\n+\t  if $(LEAN); then \\\n+\t    rm -rf stage1-* ; \\\n+\t    $(STAMP) stage1-lean ; \\\n+\t  fi; \\\n \t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage3; \\\n \tfi\n \t$(MAKE) $(RECURSE_FLAGS_TO_PASS) compare\n@@ -36408,11 +36307,14 @@ compare:\n \t  true; \\\n \tfi ; \\\n \t$(STAMP) compare\n-\t@bootstrap_lean@-rm -rf stage2-* ; $(STAMP) stage2-lean\n+\tif $(LEAN); then \\\n+\t  rm -rf stage2-*; \\\n+\t  $(STAMP) stage2-lean; \\\n+\tfi\n \n \n \n-.PHONY: bootstrap\n+.PHONY: bootstrap bootstrap-lean\n bootstrap:\n \techo stage3 > stage_final\n \t@r=`${PWD_COMMAND}`; export r; \\\n@@ -36423,6 +36325,16 @@ bootstrap:\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n \n+bootstrap-lean:\n+\techo stage3 > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) LEAN=: stage3-bubble\n+\t@: $(MAKE); $(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stage2:: distclean-stage3 \n@@ -36448,207 +36360,162 @@ stage4-start::\n @if bfd\n \t@cd $(HOST_SUBDIR); [ -d stage4-bfd ] || \\\n \t  mkdir stage4-bfd; \\\n-\tset stage4-bfd bfd ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-bfd prev-bfd ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-bfd bfd  ; \\\n+\tmv stage3-bfd prev-bfd || test -f stage3-lean \n @endif bfd\n @if opcodes\n \t@cd $(HOST_SUBDIR); [ -d stage4-opcodes ] || \\\n \t  mkdir stage4-opcodes; \\\n-\tset stage4-opcodes opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-opcodes prev-opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-opcodes opcodes  ; \\\n+\tmv stage3-opcodes prev-opcodes || test -f stage3-lean \n @endif opcodes\n @if binutils\n \t@cd $(HOST_SUBDIR); [ -d stage4-binutils ] || \\\n \t  mkdir stage4-binutils; \\\n-\tset stage4-binutils binutils ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-binutils prev-binutils ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-binutils binutils  ; \\\n+\tmv stage3-binutils prev-binutils || test -f stage3-lean \n @endif binutils\n @if gas\n \t@cd $(HOST_SUBDIR); [ -d stage4-gas ] || \\\n \t  mkdir stage4-gas; \\\n-\tset stage4-gas gas ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-gas prev-gas ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-gas gas  ; \\\n+\tmv stage3-gas prev-gas || test -f stage3-lean \n @endif gas\n @if gcc\n \t@cd $(HOST_SUBDIR); [ -d stage4-gcc ] || \\\n \t  mkdir stage4-gcc; \\\n-\tset stage4-gcc gcc ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-gcc prev-gcc ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-gcc gcc  ; \\\n+\tmv stage3-gcc prev-gcc || test -f stage3-lean \n @endif gcc\n @if intl\n \t@cd $(HOST_SUBDIR); [ -d stage4-intl ] || \\\n \t  mkdir stage4-intl; \\\n-\tset stage4-intl intl ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-intl prev-intl ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-intl intl  ; \\\n+\tmv stage3-intl prev-intl || test -f stage3-lean \n @endif intl\n @if ld\n \t@cd $(HOST_SUBDIR); [ -d stage4-ld ] || \\\n \t  mkdir stage4-ld; \\\n-\tset stage4-ld ld ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-ld prev-ld ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-ld ld  ; \\\n+\tmv stage3-ld prev-ld || test -f stage3-lean \n @endif ld\n @if libcpp\n \t@cd $(HOST_SUBDIR); [ -d stage4-libcpp ] || \\\n \t  mkdir stage4-libcpp; \\\n-\tset stage4-libcpp libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-libcpp prev-libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-libcpp libcpp  ; \\\n+\tmv stage3-libcpp prev-libcpp || test -f stage3-lean \n @endif libcpp\n @if libdecnumber\n \t@cd $(HOST_SUBDIR); [ -d stage4-libdecnumber ] || \\\n \t  mkdir stage4-libdecnumber; \\\n-\tset stage4-libdecnumber libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-libdecnumber prev-libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-libdecnumber libdecnumber  ; \\\n+\tmv stage3-libdecnumber prev-libdecnumber || test -f stage3-lean \n @endif libdecnumber\n @if libiberty\n \t@cd $(HOST_SUBDIR); [ -d stage4-libiberty ] || \\\n \t  mkdir stage4-libiberty; \\\n-\tset stage4-libiberty libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-libiberty prev-libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-libiberty libiberty  ; \\\n+\tmv stage3-libiberty prev-libiberty || test -f stage3-lean \n @endif libiberty\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stage4-zlib ] || \\\n \t  mkdir stage4-zlib; \\\n-\tset stage4-zlib zlib ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-zlib prev-zlib ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-zlib zlib  ; \\\n+\tmv stage3-zlib prev-zlib || test -f stage3-lean \n @endif zlib\n \t@[ -d stage4-$(TARGET_SUBDIR) ] || \\\n \t  mkdir stage4-$(TARGET_SUBDIR); \\\n-\tset stage4-$(TARGET_SUBDIR) $(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage3-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stage4-$(TARGET_SUBDIR) $(TARGET_SUBDIR)  ; \\\n+\tmv stage3-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) || test -f stage3-lean \n \n-stage4-end::\n-\t@rm -f stage_current\n+stage4-end:: \n @if bfd\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set bfd stage4-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-bfd stage3-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/bfd ; then \\\n+\t  cd $(HOST_SUBDIR); mv bfd stage4-bfd ; \\\n+\t  mv prev-bfd stage3-bfd ; :  ; \\\n \tfi\n @endif bfd\n @if opcodes\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set opcodes stage4-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-opcodes stage3-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/opcodes ; then \\\n+\t  cd $(HOST_SUBDIR); mv opcodes stage4-opcodes ; \\\n+\t  mv prev-opcodes stage3-opcodes ; :  ; \\\n \tfi\n @endif opcodes\n @if binutils\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set binutils stage4-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-binutils stage3-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/binutils ; then \\\n+\t  cd $(HOST_SUBDIR); mv binutils stage4-binutils ; \\\n+\t  mv prev-binutils stage3-binutils ; :  ; \\\n \tfi\n @endif binutils\n @if gas\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gas stage4-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gas stage3-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gas ; then \\\n+\t  cd $(HOST_SUBDIR); mv gas stage4-gas ; \\\n+\t  mv prev-gas stage3-gas ; :  ; \\\n \tfi\n @endif gas\n @if gcc\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gcc stage4-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gcc stage3-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gcc ; then \\\n+\t  cd $(HOST_SUBDIR); mv gcc stage4-gcc ; \\\n+\t  mv prev-gcc stage3-gcc ; :  ; \\\n \tfi\n @endif gcc\n @if intl\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set intl stage4-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-intl stage3-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/intl ; then \\\n+\t  cd $(HOST_SUBDIR); mv intl stage4-intl ; \\\n+\t  mv prev-intl stage3-intl ; :  ; \\\n \tfi\n @endif intl\n @if ld\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set ld stage4-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-ld stage3-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/ld ; then \\\n+\t  cd $(HOST_SUBDIR); mv ld stage4-ld ; \\\n+\t  mv prev-ld stage3-ld ; :  ; \\\n \tfi\n @endif ld\n @if libcpp\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libcpp stage4-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libcpp stage3-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libcpp ; then \\\n+\t  cd $(HOST_SUBDIR); mv libcpp stage4-libcpp ; \\\n+\t  mv prev-libcpp stage3-libcpp ; :  ; \\\n \tfi\n @endif libcpp\n @if libdecnumber\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libdecnumber stage4-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libdecnumber stage3-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libdecnumber ; then \\\n+\t  cd $(HOST_SUBDIR); mv libdecnumber stage4-libdecnumber ; \\\n+\t  mv prev-libdecnumber stage3-libdecnumber ; :  ; \\\n \tfi\n @endif libdecnumber\n @if libiberty\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libiberty stage4-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libiberty stage3-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libiberty ; then \\\n+\t  cd $(HOST_SUBDIR); mv libiberty stage4-libiberty ; \\\n+\t  mv prev-libiberty stage3-libiberty ; :  ; \\\n \tfi\n @endif libiberty\n @if zlib\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set zlib stage4-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-zlib stage3-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/zlib ; then \\\n+\t  cd $(HOST_SUBDIR); mv zlib stage4-zlib ; \\\n+\t  mv prev-zlib stage3-zlib ; :  ; \\\n \tfi\n @endif zlib\n \t@if test -d $(TARGET_SUBDIR) ; then \\\n-\t  set $(TARGET_SUBDIR) stage4-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n-\t  set prev-$(TARGET_SUBDIR) stage3-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n+\t  mv $(TARGET_SUBDIR) stage4-$(TARGET_SUBDIR)  ; \\\n+\t  mv prev-$(TARGET_SUBDIR) stage3-$(TARGET_SUBDIR) ; :  ; \\\n \tfi\n+\trm -f stage_current\n \n # Bubble a bugfix through all the stages up to stage 4.  They are\n # remade, but not reconfigured.  The next stage (if any) will not be\n # reconfigured as well.\n .PHONY: stage4-bubble\n stage4-bubble:: stage3-bubble\n-\t@bootstrap_lean@-rm -rf stage2-* ; $(STAMP) stage2-lean\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \tif test -f stage4-lean || test -f stage3-lean  ; then \\\n \t  echo Skipping rebuild of stage4 ; \\\n \telse \\\n \t  $(MAKE) stage4-start; \\\n+\t  if $(LEAN); then \\\n+\t    rm -rf stage2-* ; \\\n+\t    $(STAMP) stage2-lean ; \\\n+\t  fi; \\\n \t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage4; \\\n \tfi\n \t$(MAKE) $(RECURSE_FLAGS_TO_PASS) compare3\n@@ -36692,11 +36559,14 @@ compare3:\n \t  true; \\\n \tfi ; \\\n \t$(STAMP) compare3\n-\t@bootstrap_lean@-rm -rf stage3-* ; $(STAMP) stage3-lean\n+\tif $(LEAN); then \\\n+\t  rm -rf stage3-*; \\\n+\t  $(STAMP) stage3-lean; \\\n+\tfi\n \n \n \n-.PHONY: bootstrap4\n+.PHONY: bootstrap4 bootstrap4-lean\n bootstrap4:\n \techo stage4 > stage_final\n \t@r=`${PWD_COMMAND}`; export r; \\\n@@ -36707,6 +36577,16 @@ bootstrap4:\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n \n+bootstrap4-lean:\n+\techo stage4 > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) LEAN=: stage4-bubble\n+\t@: $(MAKE); $(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stage3:: distclean-stage4 \n@@ -36729,194 +36609,146 @@ stageprofile-start::\n @if bfd\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-bfd ] || \\\n \t  mkdir stageprofile-bfd; \\\n-\tset stageprofile-bfd bfd ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-bfd prev-bfd ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-bfd bfd  ; \\\n+\tmv stage1-bfd prev-bfd || test -f stage1-lean \n @endif bfd\n @if opcodes\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-opcodes ] || \\\n \t  mkdir stageprofile-opcodes; \\\n-\tset stageprofile-opcodes opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-opcodes prev-opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-opcodes opcodes  ; \\\n+\tmv stage1-opcodes prev-opcodes || test -f stage1-lean \n @endif opcodes\n @if binutils\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-binutils ] || \\\n \t  mkdir stageprofile-binutils; \\\n-\tset stageprofile-binutils binutils ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-binutils prev-binutils ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-binutils binutils  ; \\\n+\tmv stage1-binutils prev-binutils || test -f stage1-lean \n @endif binutils\n @if gas\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-gas ] || \\\n \t  mkdir stageprofile-gas; \\\n-\tset stageprofile-gas gas ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-gas prev-gas ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-gas gas  ; \\\n+\tmv stage1-gas prev-gas || test -f stage1-lean \n @endif gas\n @if gcc\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-gcc ] || \\\n \t  mkdir stageprofile-gcc; \\\n-\tset stageprofile-gcc gcc ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-gcc prev-gcc ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-gcc gcc  ; \\\n+\tmv stage1-gcc prev-gcc || test -f stage1-lean \n @endif gcc\n @if intl\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-intl ] || \\\n \t  mkdir stageprofile-intl; \\\n-\tset stageprofile-intl intl ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-intl prev-intl ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-intl intl  ; \\\n+\tmv stage1-intl prev-intl || test -f stage1-lean \n @endif intl\n @if ld\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-ld ] || \\\n \t  mkdir stageprofile-ld; \\\n-\tset stageprofile-ld ld ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-ld prev-ld ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-ld ld  ; \\\n+\tmv stage1-ld prev-ld || test -f stage1-lean \n @endif ld\n @if libcpp\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-libcpp ] || \\\n \t  mkdir stageprofile-libcpp; \\\n-\tset stageprofile-libcpp libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-libcpp prev-libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-libcpp libcpp  ; \\\n+\tmv stage1-libcpp prev-libcpp || test -f stage1-lean \n @endif libcpp\n @if libdecnumber\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-libdecnumber ] || \\\n \t  mkdir stageprofile-libdecnumber; \\\n-\tset stageprofile-libdecnumber libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-libdecnumber prev-libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-libdecnumber libdecnumber  ; \\\n+\tmv stage1-libdecnumber prev-libdecnumber || test -f stage1-lean \n @endif libdecnumber\n @if libiberty\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-libiberty ] || \\\n \t  mkdir stageprofile-libiberty; \\\n-\tset stageprofile-libiberty libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-libiberty prev-libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-libiberty libiberty  ; \\\n+\tmv stage1-libiberty prev-libiberty || test -f stage1-lean \n @endif libiberty\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stageprofile-zlib ] || \\\n \t  mkdir stageprofile-zlib; \\\n-\tset stageprofile-zlib zlib ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-zlib prev-zlib ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-zlib zlib  ; \\\n+\tmv stage1-zlib prev-zlib || test -f stage1-lean \n @endif zlib\n \t@[ -d stageprofile-$(TARGET_SUBDIR) ] || \\\n \t  mkdir stageprofile-$(TARGET_SUBDIR); \\\n-\tset stageprofile-$(TARGET_SUBDIR) $(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stage1-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stageprofile-$(TARGET_SUBDIR) $(TARGET_SUBDIR)  ; \\\n+\tmv stage1-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) || test -f stage1-lean \n \n-stageprofile-end::\n-\t@rm -f stage_current\n+stageprofile-end:: \n @if bfd\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set bfd stageprofile-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-bfd stage1-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/bfd ; then \\\n+\t  cd $(HOST_SUBDIR); mv bfd stageprofile-bfd ; \\\n+\t  mv prev-bfd stage1-bfd ; :  ; \\\n \tfi\n @endif bfd\n @if opcodes\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set opcodes stageprofile-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-opcodes stage1-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/opcodes ; then \\\n+\t  cd $(HOST_SUBDIR); mv opcodes stageprofile-opcodes ; \\\n+\t  mv prev-opcodes stage1-opcodes ; :  ; \\\n \tfi\n @endif opcodes\n @if binutils\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set binutils stageprofile-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-binutils stage1-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/binutils ; then \\\n+\t  cd $(HOST_SUBDIR); mv binutils stageprofile-binutils ; \\\n+\t  mv prev-binutils stage1-binutils ; :  ; \\\n \tfi\n @endif binutils\n @if gas\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gas stageprofile-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gas stage1-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gas ; then \\\n+\t  cd $(HOST_SUBDIR); mv gas stageprofile-gas ; \\\n+\t  mv prev-gas stage1-gas ; :  ; \\\n \tfi\n @endif gas\n @if gcc\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gcc stageprofile-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gcc stage1-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gcc ; then \\\n+\t  cd $(HOST_SUBDIR); mv gcc stageprofile-gcc ; \\\n+\t  mv prev-gcc stage1-gcc ; :  ; \\\n \tfi\n @endif gcc\n @if intl\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set intl stageprofile-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-intl stage1-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/intl ; then \\\n+\t  cd $(HOST_SUBDIR); mv intl stageprofile-intl ; \\\n+\t  mv prev-intl stage1-intl ; :  ; \\\n \tfi\n @endif intl\n @if ld\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set ld stageprofile-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-ld stage1-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/ld ; then \\\n+\t  cd $(HOST_SUBDIR); mv ld stageprofile-ld ; \\\n+\t  mv prev-ld stage1-ld ; :  ; \\\n \tfi\n @endif ld\n @if libcpp\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libcpp stageprofile-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libcpp stage1-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libcpp ; then \\\n+\t  cd $(HOST_SUBDIR); mv libcpp stageprofile-libcpp ; \\\n+\t  mv prev-libcpp stage1-libcpp ; :  ; \\\n \tfi\n @endif libcpp\n @if libdecnumber\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libdecnumber stageprofile-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libdecnumber stage1-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libdecnumber ; then \\\n+\t  cd $(HOST_SUBDIR); mv libdecnumber stageprofile-libdecnumber ; \\\n+\t  mv prev-libdecnumber stage1-libdecnumber ; :  ; \\\n \tfi\n @endif libdecnumber\n @if libiberty\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libiberty stageprofile-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libiberty stage1-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libiberty ; then \\\n+\t  cd $(HOST_SUBDIR); mv libiberty stageprofile-libiberty ; \\\n+\t  mv prev-libiberty stage1-libiberty ; :  ; \\\n \tfi\n @endif libiberty\n @if zlib\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set zlib stageprofile-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-zlib stage1-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/zlib ; then \\\n+\t  cd $(HOST_SUBDIR); mv zlib stageprofile-zlib ; \\\n+\t  mv prev-zlib stage1-zlib ; :  ; \\\n \tfi\n @endif zlib\n \t@if test -d $(TARGET_SUBDIR) ; then \\\n-\t  set $(TARGET_SUBDIR) stageprofile-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n-\t  set prev-$(TARGET_SUBDIR) stage1-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n+\t  mv $(TARGET_SUBDIR) stageprofile-$(TARGET_SUBDIR)  ; \\\n+\t  mv prev-$(TARGET_SUBDIR) stage1-$(TARGET_SUBDIR) ; :  ; \\\n \tfi\n+\trm -f stage_current\n \n # Bubble a bugfix through all the stages up to stage profile.  They are\n # remade, but not reconfigured.  The next stage (if any) will not be\n@@ -36963,194 +36795,146 @@ stagefeedback-start::\n @if bfd\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-bfd ] || \\\n \t  mkdir stagefeedback-bfd; \\\n-\tset stagefeedback-bfd bfd ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-bfd prev-bfd ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-bfd bfd  ; \\\n+\tmv stageprofile-bfd prev-bfd || test -f stageprofile-lean \n @endif bfd\n @if opcodes\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-opcodes ] || \\\n \t  mkdir stagefeedback-opcodes; \\\n-\tset stagefeedback-opcodes opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-opcodes prev-opcodes ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-opcodes opcodes  ; \\\n+\tmv stageprofile-opcodes prev-opcodes || test -f stageprofile-lean \n @endif opcodes\n @if binutils\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-binutils ] || \\\n \t  mkdir stagefeedback-binutils; \\\n-\tset stagefeedback-binutils binutils ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-binutils prev-binutils ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-binutils binutils  ; \\\n+\tmv stageprofile-binutils prev-binutils || test -f stageprofile-lean \n @endif binutils\n @if gas\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-gas ] || \\\n \t  mkdir stagefeedback-gas; \\\n-\tset stagefeedback-gas gas ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-gas prev-gas ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-gas gas  ; \\\n+\tmv stageprofile-gas prev-gas || test -f stageprofile-lean \n @endif gas\n @if gcc\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-gcc ] || \\\n \t  mkdir stagefeedback-gcc; \\\n-\tset stagefeedback-gcc gcc ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-gcc prev-gcc ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-gcc gcc  ; \\\n+\tmv stageprofile-gcc prev-gcc || test -f stageprofile-lean \n @endif gcc\n @if intl\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-intl ] || \\\n \t  mkdir stagefeedback-intl; \\\n-\tset stagefeedback-intl intl ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-intl prev-intl ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-intl intl  ; \\\n+\tmv stageprofile-intl prev-intl || test -f stageprofile-lean \n @endif intl\n @if ld\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-ld ] || \\\n \t  mkdir stagefeedback-ld; \\\n-\tset stagefeedback-ld ld ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-ld prev-ld ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-ld ld  ; \\\n+\tmv stageprofile-ld prev-ld || test -f stageprofile-lean \n @endif ld\n @if libcpp\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-libcpp ] || \\\n \t  mkdir stagefeedback-libcpp; \\\n-\tset stagefeedback-libcpp libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-libcpp prev-libcpp ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-libcpp libcpp  ; \\\n+\tmv stageprofile-libcpp prev-libcpp || test -f stageprofile-lean \n @endif libcpp\n @if libdecnumber\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-libdecnumber ] || \\\n \t  mkdir stagefeedback-libdecnumber; \\\n-\tset stagefeedback-libdecnumber libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-libdecnumber prev-libdecnumber ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-libdecnumber libdecnumber  ; \\\n+\tmv stageprofile-libdecnumber prev-libdecnumber || test -f stageprofile-lean \n @endif libdecnumber\n @if libiberty\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-libiberty ] || \\\n \t  mkdir stagefeedback-libiberty; \\\n-\tset stagefeedback-libiberty libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-libiberty prev-libiberty ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-libiberty libiberty  ; \\\n+\tmv stageprofile-libiberty prev-libiberty || test -f stageprofile-lean \n @endif libiberty\n @if zlib\n \t@cd $(HOST_SUBDIR); [ -d stagefeedback-zlib ] || \\\n \t  mkdir stagefeedback-zlib; \\\n-\tset stagefeedback-zlib zlib ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-zlib prev-zlib ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-zlib zlib  ; \\\n+\tmv stageprofile-zlib prev-zlib || test -f stageprofile-lean \n @endif zlib\n \t@[ -d stagefeedback-$(TARGET_SUBDIR) ] || \\\n \t  mkdir stagefeedback-$(TARGET_SUBDIR); \\\n-\tset stagefeedback-$(TARGET_SUBDIR) $(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@  ; \\\n-\tset stageprofile-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ \n+\tmv stagefeedback-$(TARGET_SUBDIR) $(TARGET_SUBDIR)  ; \\\n+\tmv stageprofile-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) || test -f stageprofile-lean \n \n-stagefeedback-end::\n-\t@rm -f stage_current\n+stagefeedback-end:: \n @if bfd\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set bfd stagefeedback-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-bfd stageprofile-bfd ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/bfd ; then \\\n+\t  cd $(HOST_SUBDIR); mv bfd stagefeedback-bfd ; \\\n+\t  mv prev-bfd stageprofile-bfd ; :  ; \\\n \tfi\n @endif bfd\n @if opcodes\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set opcodes stagefeedback-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-opcodes stageprofile-opcodes ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/opcodes ; then \\\n+\t  cd $(HOST_SUBDIR); mv opcodes stagefeedback-opcodes ; \\\n+\t  mv prev-opcodes stageprofile-opcodes ; :  ; \\\n \tfi\n @endif opcodes\n @if binutils\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set binutils stagefeedback-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-binutils stageprofile-binutils ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/binutils ; then \\\n+\t  cd $(HOST_SUBDIR); mv binutils stagefeedback-binutils ; \\\n+\t  mv prev-binutils stageprofile-binutils ; :  ; \\\n \tfi\n @endif binutils\n @if gas\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gas stagefeedback-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gas stageprofile-gas ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gas ; then \\\n+\t  cd $(HOST_SUBDIR); mv gas stagefeedback-gas ; \\\n+\t  mv prev-gas stageprofile-gas ; :  ; \\\n \tfi\n @endif gas\n @if gcc\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set gcc stagefeedback-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-gcc stageprofile-gcc ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/gcc ; then \\\n+\t  cd $(HOST_SUBDIR); mv gcc stagefeedback-gcc ; \\\n+\t  mv prev-gcc stageprofile-gcc ; :  ; \\\n \tfi\n @endif gcc\n @if intl\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set intl stagefeedback-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-intl stageprofile-intl ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/intl ; then \\\n+\t  cd $(HOST_SUBDIR); mv intl stagefeedback-intl ; \\\n+\t  mv prev-intl stageprofile-intl ; :  ; \\\n \tfi\n @endif intl\n @if ld\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set ld stagefeedback-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-ld stageprofile-ld ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/ld ; then \\\n+\t  cd $(HOST_SUBDIR); mv ld stagefeedback-ld ; \\\n+\t  mv prev-ld stageprofile-ld ; :  ; \\\n \tfi\n @endif ld\n @if libcpp\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libcpp stagefeedback-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libcpp stageprofile-libcpp ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libcpp ; then \\\n+\t  cd $(HOST_SUBDIR); mv libcpp stagefeedback-libcpp ; \\\n+\t  mv prev-libcpp stageprofile-libcpp ; :  ; \\\n \tfi\n @endif libcpp\n @if libdecnumber\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libdecnumber stagefeedback-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libdecnumber stageprofile-libdecnumber ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libdecnumber ; then \\\n+\t  cd $(HOST_SUBDIR); mv libdecnumber stagefeedback-libdecnumber ; \\\n+\t  mv prev-libdecnumber stageprofile-libdecnumber ; :  ; \\\n \tfi\n @endif libdecnumber\n @if libiberty\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set libiberty stagefeedback-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-libiberty stageprofile-libiberty ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/libiberty ; then \\\n+\t  cd $(HOST_SUBDIR); mv libiberty stagefeedback-libiberty ; \\\n+\t  mv prev-libiberty stageprofile-libiberty ; :  ; \\\n \tfi\n @endif libiberty\n @if zlib\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set zlib stagefeedback-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n-\tset prev-zlib stageprofile-zlib ; \\\n-\t@UNDO_LINK_TO_DIR@  ; \\\n+\t@if test -d $(HOST_SUBDIR)/zlib ; then \\\n+\t  cd $(HOST_SUBDIR); mv zlib stagefeedback-zlib ; \\\n+\t  mv prev-zlib stageprofile-zlib ; :  ; \\\n \tfi\n @endif zlib\n \t@if test -d $(TARGET_SUBDIR) ; then \\\n-\t  set $(TARGET_SUBDIR) stagefeedback-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n-\t  set prev-$(TARGET_SUBDIR) stageprofile-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@  ; \\\n+\t  mv $(TARGET_SUBDIR) stagefeedback-$(TARGET_SUBDIR)  ; \\\n+\t  mv prev-$(TARGET_SUBDIR) stageprofile-$(TARGET_SUBDIR) ; :  ; \\\n \tfi\n+\trm -f stage_current\n \n # Bubble a bugfix through all the stages up to stage feedback.  They are\n # remade, but not reconfigured.  The next stage (if any) will not be\n@@ -37175,7 +36959,7 @@ do-clean: clean-stagefeedback\n \n \n \n-.PHONY: profiledbootstrap\n+.PHONY: profiledbootstrap profiledbootstrap-lean\n profiledbootstrap:\n \techo stagefeedback > stage_final\n \t@r=`${PWD_COMMAND}`; export r; \\\n@@ -37186,6 +36970,16 @@ profiledbootstrap:\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n \n+profiledbootstrap-lean:\n+\techo stagefeedback > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) LEAN=: stagefeedback-bubble\n+\t@: $(MAKE); $(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap\n distclean-stageprofile:: distclean-stagefeedback "}, {"sha": "afeaef52fd09f7a17f28f76db1e62fad6f9293b6", "filename": "Makefile.tpl", "status": "modified", "additions": 38, "deletions": 27, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d309510df0ab85c0e86e721aa93c3193b8f9d39/Makefile.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d309510df0ab85c0e86e721aa93c3193b8f9d39/Makefile.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.tpl?ref=2d309510df0ab85c0e86e721aa93c3193b8f9d39", "patch": "@@ -6,7 +6,7 @@ in\n #\n # Makefile for directory with subdirs to build.\n #   Copyright (C) 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-#   1999, 2000, 2001, 2002, 2003, 2004 Free Software Foundation\n+#   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation\n #\n # This file is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -285,6 +285,7 @@ DLLTOOL = @DLLTOOL@\n LD = @LD@\n LIPO = @LIPO@\n NM = @NM@\n+OBJDUMP = @OBJDUMP@\n RANLIB = @RANLIB@\n STRIP = @STRIP@\n WINDRES = @WINDRES@\n@@ -407,6 +408,7 @@ EXTRA_HOST_FLAGS = \\\n \t'LD=$(LD)' \\\n \t'LIPO=$(LIPO)' \\\n \t'NM=$(NM)' \\\n+\t'OBJDUMP=$(OBJDUMP)' \\\n \t'RANLIB=$(RANLIB)' \\\n \t'STRIP=$(STRIP)' \\\n \t'WINDRES=$(WINDRES)'\n@@ -464,8 +466,6 @@ EXTRA_GCC_FLAGS = \\\n \t\"`echo 'LIBGCC2_CFLAGS=$(LIBGCC2_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n \t\"`echo 'LIBGCC2_DEBUG_CFLAGS=$(LIBGCC2_DEBUG_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n \t\"`echo 'LIBGCC2_INCLUDES=$(LIBGCC2_INCLUDES)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n-\t\"`echo 'STAGE1_CFLAGS=$(STAGE1_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n-\t\"`echo 'BOOT_CFLAGS=$(BOOT_CFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\" \\\n \t\"`echo 'BOOT_ADAFLAGS=$(BOOT_ADAFLAGS)' | sed -e s'/[^=][^=]*=$$/XFOO=/'`\"\n \n GCC_FLAGS_TO_PASS = $(BASE_FLAGS_TO_PASS) $(EXTRA_HOST_FLAGS) $(EXTRA_GCC_FLAGS)\n@@ -1222,6 +1222,9 @@ unstage:\n stage:\n \t@: $(MAKE); $(stage)\n \n+# Disable commands for lean bootstrap.\n+LEAN = false\n+\n # We name the build directories for the various stages \"stage1-gcc\",\n # \"stage2-gcc\",\"stage3-gcc\", etc.\n \n@@ -1277,48 +1280,43 @@ stage[+id+]-start::\n @if [+ module +]\n \t@cd $(HOST_SUBDIR); [ -d stage[+id+]-[+module+] ] || \\\n \t  mkdir stage[+id+]-[+module+]; \\\n-\tset stage[+id+]-[+module+] [+module+] ; \\\n-\t@CREATE_LINK_TO_DIR@ [+ IF prev +] ; \\\n-\tset stage[+prev+]-[+module+] prev-[+module+] ; \\\n-\t@CREATE_LINK_TO_DIR@ [+ ENDIF prev +]\n+\tmv stage[+id+]-[+module+] [+module+] [+ IF prev +] ; \\\n+\tmv stage[+prev+]-[+module+] prev-[+module+] || test -f stage[+prev+]-lean [+ ENDIF prev +]\n @endif [+ module +][+ ENDIF bootstrap +][+ ENDFOR host_modules +]\n \t@[ -d stage[+id+]-$(TARGET_SUBDIR) ] || \\\n \t  mkdir stage[+id+]-$(TARGET_SUBDIR); \\\n-\tset stage[+id+]-$(TARGET_SUBDIR) $(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ [+ IF prev +] ; \\\n-\tset stage[+prev+]-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) ; \\\n-\t@CREATE_LINK_TO_DIR@ [+ ENDIF prev +]\n+\tmv stage[+id+]-$(TARGET_SUBDIR) $(TARGET_SUBDIR) [+ IF prev +] ; \\\n+\tmv stage[+prev+]-$(TARGET_SUBDIR) prev-$(TARGET_SUBDIR) || test -f stage[+prev+]-lean [+ ENDIF prev +]\n \n-stage[+id+]-end::\n-\t@rm -f stage_current[+ FOR host_modules +][+ IF bootstrap +]\n+stage[+id+]-end:: [+ FOR host_modules +][+ IF bootstrap +]\n @if [+ module +]\n-\t@if test -d $(HOST_SUBDIR) ; then \\\n-\tcd $(HOST_SUBDIR); set [+module+] stage[+id+]-[+module+] ; \\\n-\t@UNDO_LINK_TO_DIR@ [+ IF prev +] ; \\\n-\tset prev-[+module+] stage[+prev+]-[+module+] ; \\\n-\t@UNDO_LINK_TO_DIR@ [+ ENDIF prev +] ; \\\n+\t@if test -d $(HOST_SUBDIR)/[+module+] ; then \\\n+\t  cd $(HOST_SUBDIR); mv [+module+] stage[+id+]-[+module+] [+ IF prev +]; \\\n+\t  mv prev-[+module+] stage[+prev+]-[+module+] ; : [+ ENDIF prev +] ; \\\n \tfi\n @endif [+ module +][+ ENDIF bootstrap +][+ ENDFOR host_modules +]\n \t@if test -d $(TARGET_SUBDIR) ; then \\\n-\t  set $(TARGET_SUBDIR) stage[+id+]-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@ [+ IF prev +] ; \\\n-\t  set prev-$(TARGET_SUBDIR) stage[+prev+]-$(TARGET_SUBDIR) ; \\\n-\t  @UNDO_LINK_TO_DIR@ [+ ENDIF prev +] ; \\\n+\t  mv $(TARGET_SUBDIR) stage[+id+]-$(TARGET_SUBDIR) [+ IF prev +] ; \\\n+\t  mv prev-$(TARGET_SUBDIR) stage[+prev+]-$(TARGET_SUBDIR) ; : [+ ENDIF prev +] ; \\\n \tfi\n+\trm -f stage_current\n \n # Bubble a bugfix through all the stages up to stage [+id+].  They are\n # remade, but not reconfigured.  The next stage (if any) will not be\n # reconfigured as well.\n .PHONY: stage[+id+]-bubble\n-stage[+id+]-bubble:: [+ IF prev +]stage[+prev+]-bubble[+ ENDIF +][+IF lean +]\n-\t@bootstrap_lean@-rm -rf stage[+lean+]-* ; $(STAMP) stage[+lean+]-lean[+ ENDIF lean +]\n+stage[+id+]-bubble:: [+ IF prev +]stage[+prev+]-bubble[+ ENDIF +]\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \tif test -f stage[+id+]-lean [+\n \t  IF prev +]|| test -f stage[+prev+]-lean [+ ENDIF prev +] ; then \\\n \t  echo Skipping rebuild of stage[+id+] ; \\\n \telse \\\n-\t  $(MAKE) stage[+id+]-start; \\\n+\t  $(MAKE) stage[+id+]-start; \\[+IF lean +]\n+\t  if $(LEAN); then \\\n+\t    rm -rf stage[+lean+]-* ; \\\n+\t    $(STAMP) stage[+lean+]-lean ; \\\n+\t  fi; \\[+ ENDIF lean +]\n \t  $(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage[+id+]; \\\n \tfi[+ IF compare-target +]\n \t$(MAKE) $(RECURSE_FLAGS_TO_PASS) [+compare-target+][+ ENDIF compare-target +]\n@@ -1362,11 +1360,14 @@ do-clean: clean-stage[+id+]\n \t  true; \\\n \tfi ; \\\n \t$(STAMP) [+compare-target+][+ IF prev +]\n-\t@bootstrap_lean@-rm -rf stage[+prev+]-* ; $(STAMP) stage[+prev+]-lean[+ ENDIF prev +]\n+\tif $(LEAN); then \\\n+\t  rm -rf stage[+prev+]-*; \\\n+\t  $(STAMP) stage[+prev+]-lean; \\\n+\tfi[+ ENDIF prev +]\n [+ ENDIF compare-target +]\n \n [+ IF bootstrap-target +]\n-.PHONY: [+bootstrap-target+]\n+.PHONY: [+bootstrap-target+] [+bootstrap-target+]-lean\n [+bootstrap-target+]:\n \techo stage[+id+] > stage_final\n \t@r=`${PWD_COMMAND}`; export r; \\\n@@ -1376,6 +1377,16 @@ do-clean: clean-stage[+id+]\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n+\n+[+bootstrap-target+]-lean:\n+\techo stage[+id+] > stage_final\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) LEAN=: stage[+id+]-bubble\n+\t@: $(MAKE); $(unstage)\n+\t@r=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\t$(MAKE) $(TARGET_FLAGS_TO_PASS) all-host all-target\n [+ ENDIF bootstrap-target +]\n \n # Rules to wipe a stage and all the following ones, also used for cleanstrap"}, {"sha": "cf1560b14d14b60b924b96d7040f5ff06bf3f372", "filename": "configure", "status": "modified", "additions": 81, "deletions": 125, "changes": 206, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d309510df0ab85c0e86e721aa93c3193b8f9d39/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d309510df0ab85c0e86e721aa93c3193b8f9d39/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=2d309510df0ab85c0e86e721aa93c3193b8f9d39", "patch": "@@ -27,7 +27,7 @@ ac_help=\"$ac_help\n   --with-build-sysroot=sysroot\n                           use sysroot as the system root during the build\"\n ac_help=\"$ac_help\n-  --enable-bootstrap[=lean]     Enable bootstrapping [no]\"\n+  --enable-bootstrap           Enable bootstrapping [yes if native build]\"\n ac_help=\"$ac_help\n   --enable-serial-[{host,target,build}-]configure\n                           Force sequential configuration of\n@@ -2967,17 +2967,17 @@ case \"$have_compiler:$host:$target:$enable_bootstrap\" in\n     enable_bootstrap=no ;;\n \n   # We have a compiler and we are in a native configuration, bootstrap is ok\n-  yes:$build:$build:yes | yes:$build:$build:lean)\n+  yes:$build:$build:yes)\n     ;;\n \n   # Other configurations, but we have a compiler.  Assume the user knows\n   # what he's doing.\n-  yes:*:*:yes | yes:*:*:lean)\n+  yes:*:*:yes)\n     echo \"configure: warning: trying to bootstrap a cross compiler\" 1>&2\n     ;;\n \n   # No compiler: if they passed --enable-bootstrap explicitly, fail\n-  no:*:*:yes | no:*:*:lean)\n+  no:*:*:yes)\n     { echo \"configure: error: cannot bootstrap without a compiler\" 1>&2; exit 1; } ;;\n \n   # Fail if wrong command line\n@@ -2989,16 +2989,11 @@ esac\n # Adjust the toplevel makefile according to whether bootstrap was selected.\n case \"$enable_bootstrap\" in\n   yes)\n-    bootstrap_lean='#'\n-    bootstrap_suffix=bootstrap ;;\n-  lean)\n-    bootstrap_lean=''\n     bootstrap_suffix=bootstrap ;;\n   no)\n     bootstrap_suffix=no-bootstrap ;;\n esac\n \n-\n for module in ${build_configdirs} ; do\n   if test -z \"${no_recursion}\" \\\n      && test -f ${build_subdir}/${module}/Makefile; then\n@@ -3317,7 +3312,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3318: checking for $ac_word\" >&5\n+echo \"configure:3316: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_YACC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3357,7 +3352,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3358: checking for $ac_word\" >&5\n+echo \"configure:3356: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_BISON'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3396,7 +3391,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3397: checking for $ac_word\" >&5\n+echo \"configure:3395: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_M4'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3435,7 +3430,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3436: checking for $ac_word\" >&5\n+echo \"configure:3434: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3475,7 +3470,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3476: checking for $ac_word\" >&5\n+echo \"configure:3474: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_FLEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3514,7 +3509,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3515: checking for $ac_word\" >&5\n+echo \"configure:3513: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_MAKEINFO'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3567,7 +3562,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3568: checking for $ac_word\" >&5\n+echo \"configure:3566: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_EXPECT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3608,7 +3603,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3609: checking for $ac_word\" >&5\n+echo \"configure:3607: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RUNTEST'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3656,7 +3651,7 @@ test -n \"$target_alias\" && ncn_target_tool_prefix=$target_alias-\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3657: checking for $ac_word\" >&5\n+echo \"configure:3655: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3687,7 +3682,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3688: checking for $ac_word\" >&5\n+echo \"configure:3686: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3731,7 +3726,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3732: checking for $ac_word\" >&5\n+echo \"configure:3730: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3762,7 +3757,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3763: checking for $ac_word\" >&5\n+echo \"configure:3761: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3806,7 +3801,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3807: checking for $ac_word\" >&5\n+echo \"configure:3805: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3837,7 +3832,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3838: checking for $ac_word\" >&5\n+echo \"configure:3836: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3881,7 +3876,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3882: checking for $ac_word\" >&5\n+echo \"configure:3880: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3912,7 +3907,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3913: checking for $ac_word\" >&5\n+echo \"configure:3911: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3956,7 +3951,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3957: checking for $ac_word\" >&5\n+echo \"configure:3955: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3987,7 +3982,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3988: checking for $ac_word\" >&5\n+echo \"configure:3986: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4031,7 +4026,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4032: checking for $ac_word\" >&5\n+echo \"configure:4030: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4062,7 +4057,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4063: checking for $ac_word\" >&5\n+echo \"configure:4061: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4106,7 +4101,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4107: checking for $ac_word\" >&5\n+echo \"configure:4105: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4137,7 +4132,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4138: checking for $ac_word\" >&5\n+echo \"configure:4136: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4176,7 +4171,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4177: checking for $ac_word\" >&5\n+echo \"configure:4175: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4207,7 +4202,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4208: checking for $ac_word\" >&5\n+echo \"configure:4206: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4246,7 +4241,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4247: checking for $ac_word\" >&5\n+echo \"configure:4245: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4277,7 +4272,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4278: checking for $ac_word\" >&5\n+echo \"configure:4276: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4321,7 +4316,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4322: checking for $ac_word\" >&5\n+echo \"configure:4320: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4352,7 +4347,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4353: checking for $ac_word\" >&5\n+echo \"configure:4351: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4396,7 +4391,7 @@ fi\n     # Extract the first word of \"${ncn_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4397: checking for $ac_word\" >&5\n+echo \"configure:4395: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4427,7 +4422,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4428: checking for $ac_word\" >&5\n+echo \"configure:4426: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4478,7 +4473,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4479: checking for $ac_word\" >&5\n+echo \"configure:4477: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4509,7 +4504,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4510: checking for $ac_word\" >&5\n+echo \"configure:4508: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4553,7 +4548,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4554: checking for $ac_word\" >&5\n+echo \"configure:4552: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4584,7 +4579,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4585: checking for $ac_word\" >&5\n+echo \"configure:4583: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4628,7 +4623,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4629: checking for $ac_word\" >&5\n+echo \"configure:4627: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4659,7 +4654,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4660: checking for $ac_word\" >&5\n+echo \"configure:4658: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4703,7 +4698,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4704: checking for $ac_word\" >&5\n+echo \"configure:4702: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CXX_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4734,7 +4729,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4735: checking for $ac_word\" >&5\n+echo \"configure:4733: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CXX_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4778,7 +4773,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4779: checking for $ac_word\" >&5\n+echo \"configure:4777: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4809,7 +4804,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4810: checking for $ac_word\" >&5\n+echo \"configure:4808: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4853,7 +4848,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4854: checking for $ac_word\" >&5\n+echo \"configure:4852: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4884,7 +4879,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4885: checking for $ac_word\" >&5\n+echo \"configure:4883: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCC_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4923,7 +4918,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4924: checking for $ac_word\" >&5\n+echo \"configure:4922: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4954,7 +4949,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4955: checking for $ac_word\" >&5\n+echo \"configure:4953: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GCJ_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4998,7 +4993,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4999: checking for $ac_word\" >&5\n+echo \"configure:4997: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GFORTRAN_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5029,7 +5024,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5030: checking for $ac_word\" >&5\n+echo \"configure:5028: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GFORTRAN_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5073,7 +5068,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5074: checking for $ac_word\" >&5\n+echo \"configure:5072: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5104,7 +5099,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5105: checking for $ac_word\" >&5\n+echo \"configure:5103: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5148,7 +5143,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5149: checking for $ac_word\" >&5\n+echo \"configure:5147: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5179,7 +5174,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5180: checking for $ac_word\" >&5\n+echo \"configure:5178: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LIPO_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5223,7 +5218,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5224: checking for $ac_word\" >&5\n+echo \"configure:5222: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5254,7 +5249,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5255: checking for $ac_word\" >&5\n+echo \"configure:5253: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5298,7 +5293,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5299: checking for $ac_word\" >&5\n+echo \"configure:5297: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5329,7 +5324,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5330: checking for $ac_word\" >&5\n+echo \"configure:5328: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5373,7 +5368,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5374: checking for $ac_word\" >&5\n+echo \"configure:5372: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5404,7 +5399,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5405: checking for $ac_word\" >&5\n+echo \"configure:5403: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5443,7 +5438,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5444: checking for $ac_word\" >&5\n+echo \"configure:5442: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5474,7 +5469,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5475: checking for $ac_word\" >&5\n+echo \"configure:5473: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_STRIP_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5518,7 +5513,7 @@ fi\n     # Extract the first word of \"${ncn_target_tool_prefix}${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5519: checking for $ac_word\" >&5\n+echo \"configure:5517: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5549,7 +5544,7 @@ fi\n     # Extract the first word of \"${ncn_progname}\", so it can be a program name with args.\n set dummy ${ncn_progname}; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:5550: checking for $ac_word\" >&5\n+echo \"configure:5548: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5592,7 +5587,7 @@ fi\n RAW_CXX_FOR_TARGET=\"$CXX_FOR_TARGET\"\n \n echo $ac_n \"checking where to find the target ar\"\"... $ac_c\" 1>&6\n-echo \"configure:5593: checking where to find the target ar\" >&5\n+echo \"configure:5591: checking where to find the target ar\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5617,7 +5612,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target as\"\"... $ac_c\" 1>&6\n-echo \"configure:5618: checking where to find the target as\" >&5\n+echo \"configure:5616: checking where to find the target as\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5642,7 +5637,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target cc\"\"... $ac_c\" 1>&6\n-echo \"configure:5643: checking where to find the target cc\" >&5\n+echo \"configure:5641: checking where to find the target cc\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5667,7 +5662,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target c++\"\"... $ac_c\" 1>&6\n-echo \"configure:5668: checking where to find the target c++\" >&5\n+echo \"configure:5666: checking where to find the target c++\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5695,7 +5690,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target c++ for libstdc++\"\"... $ac_c\" 1>&6\n-echo \"configure:5696: checking where to find the target c++ for libstdc++\" >&5\n+echo \"configure:5694: checking where to find the target c++ for libstdc++\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5723,7 +5718,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target dlltool\"\"... $ac_c\" 1>&6\n-echo \"configure:5724: checking where to find the target dlltool\" >&5\n+echo \"configure:5722: checking where to find the target dlltool\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5748,7 +5743,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target gcc\"\"... $ac_c\" 1>&6\n-echo \"configure:5749: checking where to find the target gcc\" >&5\n+echo \"configure:5747: checking where to find the target gcc\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5773,7 +5768,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target gcj\"\"... $ac_c\" 1>&6\n-echo \"configure:5774: checking where to find the target gcj\" >&5\n+echo \"configure:5772: checking where to find the target gcj\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5801,7 +5796,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target gfortran\"\"... $ac_c\" 1>&6\n-echo \"configure:5802: checking where to find the target gfortran\" >&5\n+echo \"configure:5800: checking where to find the target gfortran\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5829,7 +5824,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target ld\"\"... $ac_c\" 1>&6\n-echo \"configure:5830: checking where to find the target ld\" >&5\n+echo \"configure:5828: checking where to find the target ld\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5854,7 +5849,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target lipo\"\"... $ac_c\" 1>&6\n-echo \"configure:5855: checking where to find the target lipo\" >&5\n+echo \"configure:5853: checking where to find the target lipo\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5869,7 +5864,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target nm\"\"... $ac_c\" 1>&6\n-echo \"configure:5870: checking where to find the target nm\" >&5\n+echo \"configure:5868: checking where to find the target nm\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5894,7 +5889,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target objdump\"\"... $ac_c\" 1>&6\n-echo \"configure:5895: checking where to find the target objdump\" >&5\n+echo \"configure:5893: checking where to find the target objdump\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5919,7 +5914,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target ranlib\"\"... $ac_c\" 1>&6\n-echo \"configure:5920: checking where to find the target ranlib\" >&5\n+echo \"configure:5918: checking where to find the target ranlib\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5944,7 +5939,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target strip\"\"... $ac_c\" 1>&6\n-echo \"configure:5945: checking where to find the target strip\" >&5\n+echo \"configure:5943: checking where to find the target strip\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -5969,7 +5964,7 @@ else\n   fi\n fi\n echo $ac_n \"checking where to find the target windres\"\"... $ac_c\" 1>&6\n-echo \"configure:5970: checking where to find the target windres\" >&5\n+echo \"configure:5968: checking where to find the target windres\" >&5\n if test \"x${build}\" != \"x${host}\" ; then\n   # Canadian cross, just use what we found\n   echo \"$ac_t\"\"pre-installed\" 1>&6\n@@ -6022,7 +6017,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:6023: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:6021: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -6065,42 +6060,6 @@ case $build in\n esac\n \n \n-# It makes debugging easier if we create as symlinks the stage directories\n-# gcc for stageN-gcc and stagePREV-gcc for stage(N-1).  In case this is not\n-# possible, however, we can resort to mv.\n-echo $ac_n \"checking if symbolic links between directories work\"\"... $ac_c\" 1>&6\n-echo \"configure:6070: checking if symbolic links between directories work\" >&5\n-if eval \"test \\\"`echo '$''{'gcc_cv_prog_ln_s_dir'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test \"${LN_S}\" = \"ln -s\" \\\n-   && mkdir confdir.s1 \\\n-   && ln -s confdir.s1 confdir.s2 \\\n-   && echo timestamp1 > confdir.s1/conftest.1 \\\n-   && cmp confdir.s1/conftest.1 confdir.s2/conftest.1 \\\n-   && echo timestamp2 > confdir.s2/conftest.2 \\\n-   && cmp confdir.s1/conftest.2 confdir.s1/conftest.2 \\\n-   && rm -f confdir.s2; then\n-  gcc_cv_prog_ln_s_dir=yes\n-else\n-  gcc_cv_prog_ln_s_dir=no\n-fi\n-rm -rf confdir.s1 confdir.s2\n-fi\n-\n-echo \"$ac_t\"\"$gcc_cv_prog_ln_s_dir\" 1>&6\n-\n-case ${gcc_cv_prog_ln_s_dir} in\n-  yes)\n-    CREATE_LINK_TO_DIR='ln -s $$1 $$2'\n-    UNDO_LINK_TO_DIR='rm -f $$1' ;;\n-  *)\n-    CREATE_LINK_TO_DIR='mv $$1 $$2'\n-    UNDO_LINK_TO_DIR='mv $$1 $$2' ;;\n-esac\n-\n-\n-\n # Enable -Werror in bootstrap stage2 and later.\n # Change the default to \"no\" on release branches.\n # Check whether --enable-werror or --disable-werror was given.\n@@ -6293,7 +6252,6 @@ s%@gmplibs@%$gmplibs%g\n s%@gmpinc@%$gmpinc%g\n s%@stage1_languages@%$stage1_languages%g\n s%@SYSROOT_CFLAGS_FOR_TARGET@%$SYSROOT_CFLAGS_FOR_TARGET%g\n-s%@bootstrap_lean@%$bootstrap_lean%g\n /@serialization_dependencies@/r $serialization_dependencies\n s%@serialization_dependencies@%%g\n /@host_makefile_frag@/r $host_makefile_frag\n@@ -6365,8 +6323,6 @@ s%@MAINTAINER_MODE_TRUE@%$MAINTAINER_MODE_TRUE%g\n s%@MAINTAINER_MODE_FALSE@%$MAINTAINER_MODE_FALSE%g\n s%@MAINT@%$MAINT%g\n s%@stage1_cflags@%$stage1_cflags%g\n-s%@CREATE_LINK_TO_DIR@%$CREATE_LINK_TO_DIR%g\n-s%@UNDO_LINK_TO_DIR@%$UNDO_LINK_TO_DIR%g\n s%@stage2_werror_flag@%$stage2_werror_flag%g\n \n CEOF"}, {"sha": "b2e841437beea3815e1827da278b5a5c30bc5d83", "filename": "configure.in", "status": "modified", "additions": 6, "deletions": 41, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d309510df0ab85c0e86e721aa93c3193b8f9d39/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d309510df0ab85c0e86e721aa93c3193b8f9d39/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=2d309510df0ab85c0e86e721aa93c3193b8f9d39", "patch": "@@ -1,5 +1,5 @@\n-#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-#   1999, 2000, 2001, 2002, 2003, 2004, 2006 Free Software Foundation, Inc.\n+#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n+#   2000, 2001, 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.\n #\n # This file is free software; you can redistribute it and/or modify it\n # under the terms of the GNU General Public License as published by\n@@ -1736,7 +1736,7 @@ INSTALL_GDB_TK=`echo ${GDB_TK} | sed s/-all-/-install-/g`\n # not to nest @if/@endif pairs, because configure will not warn you at all.\n \n AC_ARG_ENABLE([bootstrap],\n-[  --enable-bootstrap[=lean]     Enable bootstrapping [no]],,\n+[  --enable-bootstrap           Enable bootstrapping [yes if native build]],,\n enable_bootstrap=default)\n \n # Issue errors and warnings for invalid/strange bootstrap combinations.\n@@ -1757,17 +1757,17 @@ case \"$have_compiler:$host:$target:$enable_bootstrap\" in\n     enable_bootstrap=no ;;\n \n   # We have a compiler and we are in a native configuration, bootstrap is ok\n-  yes:$build:$build:yes | yes:$build:$build:lean)\n+  yes:$build:$build:yes)\n     ;;\n \n   # Other configurations, but we have a compiler.  Assume the user knows\n   # what he's doing.\n-  yes:*:*:yes | yes:*:*:lean)\n+  yes:*:*:yes)\n     AC_MSG_WARN([trying to bootstrap a cross compiler])\n     ;;\n \n   # No compiler: if they passed --enable-bootstrap explicitly, fail\n-  no:*:*:yes | no:*:*:lean)\n+  no:*:*:yes)\n     AC_MSG_ERROR([cannot bootstrap without a compiler]) ;;\n \n   # Fail if wrong command line\n@@ -1779,15 +1779,10 @@ esac\n # Adjust the toplevel makefile according to whether bootstrap was selected.\n case \"$enable_bootstrap\" in\n   yes)\n-    bootstrap_lean='#'\n-    bootstrap_suffix=bootstrap ;;\n-  lean)\n-    bootstrap_lean=''\n     bootstrap_suffix=bootstrap ;;\n   no)\n     bootstrap_suffix=no-bootstrap ;;\n esac\n-AC_SUBST(bootstrap_lean)\n \n for module in ${build_configdirs} ; do\n   if test -z \"${no_recursion}\" \\\n@@ -2290,36 +2285,6 @@ case $build in\n esac\n AC_SUBST(stage1_cflags)\n \n-# It makes debugging easier if we create as symlinks the stage directories\n-# gcc for stageN-gcc and stagePREV-gcc for stage(N-1).  In case this is not\n-# possible, however, we can resort to mv.\n-AC_CACHE_CHECK([if symbolic links between directories work],\n-[gcc_cv_prog_ln_s_dir],\n-[if test \"${LN_S}\" = \"ln -s\" \\\n-   && mkdir confdir.s1 \\\n-   && ln -s confdir.s1 confdir.s2 \\\n-   && echo timestamp1 > confdir.s1/conftest.1 \\\n-   && cmp confdir.s1/conftest.1 confdir.s2/conftest.1 \\\n-   && echo timestamp2 > confdir.s2/conftest.2 \\\n-   && cmp confdir.s1/conftest.2 confdir.s1/conftest.2 \\\n-   && rm -f confdir.s2; then\n-  gcc_cv_prog_ln_s_dir=yes\n-else\n-  gcc_cv_prog_ln_s_dir=no\n-fi\n-rm -rf confdir.s1 confdir.s2])\n-\n-case ${gcc_cv_prog_ln_s_dir} in\n-  yes)\n-    CREATE_LINK_TO_DIR='ln -s $$1 $$2'\n-    UNDO_LINK_TO_DIR='rm -f $$1' ;;\n-  *)\n-    CREATE_LINK_TO_DIR='mv $$1 $$2'\n-    UNDO_LINK_TO_DIR='mv $$1 $$2' ;;\n-esac\n-AC_SUBST(CREATE_LINK_TO_DIR)\n-AC_SUBST(UNDO_LINK_TO_DIR)\n-\n # Enable -Werror in bootstrap stage2 and later.\n # Change the default to \"no\" on release branches.\n AC_ARG_ENABLE(werror,"}]}