{"sha": "19cef1c1f1da315cf5c66aeea465058d3ef5114b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTljZWYxYzFmMWRhMzE1Y2Y1YzY2YWVlYTQ2NTA1OGQzZWY1MTE0Yg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-01-28T21:44:53Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-01-28T21:44:53Z"}, "message": "compiler: Put nointerface methods in unique sections.\n\nFrom-SVN: r207214", "tree": {"sha": "f48937c317d18e360d8c4c96332b341c9416fa51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f48937c317d18e360d8c4c96332b341c9416fa51"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19cef1c1f1da315cf5c66aeea465058d3ef5114b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19cef1c1f1da315cf5c66aeea465058d3ef5114b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19cef1c1f1da315cf5c66aeea465058d3ef5114b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19cef1c1f1da315cf5c66aeea465058d3ef5114b/comments", "author": null, "committer": null, "parents": [{"sha": "0f59a31da8c70c08f7887139aaf8c9318ba7e130", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f59a31da8c70c08f7887139aaf8c9318ba7e130", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f59a31da8c70c08f7887139aaf8c9318ba7e130"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "9739f289f4d243138528c81f596a9f52a0087dc9", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19cef1c1f1da315cf5c66aeea465058d3ef5114b/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19cef1c1f1da315cf5c66aeea465058d3ef5114b/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=19cef1c1f1da315cf5c66aeea465058d3ef5114b", "patch": "@@ -4094,12 +4094,19 @@ Function::get_or_make_decl(Gogo* gogo, Named_object* no)\n       // stack splitting for the thunk.\n       bool disable_split_stack = this->is_recover_thunk_;\n \n+      // This should go into a unique section if that has been\n+      // requested elsewhere, or if this is a nointerface function.\n+      // We want to put a nointerface function into a unique section\n+      // because there is a good chance that the linker garbage\n+      // collection can discard it.\n+      bool in_unique_section = this->in_unique_section_ || this->nointerface_;\n+\n       Btype* functype = this->type_->get_backend_fntype(gogo);\n       this->fndecl_ =\n           gogo->backend()->function(functype, no->get_id(gogo), asm_name,\n                                     is_visible, false, is_inlinable,\n-                                    disable_split_stack,\n-                                    this->in_unique_section_, this->location());\n+                                    disable_split_stack, in_unique_section,\n+\t\t\t\t    this->location());\n     }\n   return this->fndecl_;\n }"}]}