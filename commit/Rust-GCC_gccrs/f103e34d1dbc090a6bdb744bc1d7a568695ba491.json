{"sha": "f103e34d1dbc090a6bdb744bc1d7a568695ba491", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEwM2UzNGQxZGJjMDkwYTZiZGI3NDRiYzFkN2E1Njg2OTViYTQ5MQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2004-01-17T09:31:30Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2004-01-17T09:31:30Z"}, "message": "re PR pch/13689 (GGC PCH breaks aliasing)\n\n\tPR pch/13689\n\t* alias.c (new_alias_set): Mark last_alias_set for PCH.\n\t(get_varargs_alias_set): Rename 'set' to 'varargs_set' and mark it\n\tfor PCH.\n\t(get_frame_alias_set): Likewise, except rename it to 'frame_set'.\n\t* config/rs6000/rs6000.c (rs6000_sr_alias_set): Mark for PCH.\n\t(get_TOC_alias_set): Mark 'set' for PCH.\n\nFrom-SVN: r76031", "tree": {"sha": "b625381801a0df010d5793b058692ce3e8e4c49b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b625381801a0df010d5793b058692ce3e8e4c49b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f103e34d1dbc090a6bdb744bc1d7a568695ba491", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f103e34d1dbc090a6bdb744bc1d7a568695ba491", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f103e34d1dbc090a6bdb744bc1d7a568695ba491", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f103e34d1dbc090a6bdb744bc1d7a568695ba491/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "19833df131fca53366980de52e90e0923920aa31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19833df131fca53366980de52e90e0923920aa31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19833df131fca53366980de52e90e0923920aa31"}], "stats": {"total": 44, "additions": 27, "deletions": 17}, "files": [{"sha": "e8abc331be36554ee28a0c9bae3a2aca0aeab198", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f103e34d1dbc090a6bdb744bc1d7a568695ba491/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f103e34d1dbc090a6bdb744bc1d7a568695ba491/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f103e34d1dbc090a6bdb744bc1d7a568695ba491", "patch": "@@ -1,3 +1,12 @@\n+2004-01-17  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* alias.c (new_alias_set): Mark last_alias_set for PCH.\n+\t(get_varargs_alias_set): Rename 'set' to 'varargs_set' and mark it\n+\tfor PCH.\n+\t(get_frame_alias_set): Likewise, except rename it to 'frame_set'.\n+\t* config/rs6000/rs6000.c (rs6000_sr_alias_set): Mark for PCH.\n+\t(get_TOC_alias_set): Mark 'set' for PCH.\n+\n 2004-01-16  Geoffrey Keating  <geoffk@apple.com>\n \n \t* cfgrtl.c (try_redirect_by_replacing_jump): Optimize tablejumps"}, {"sha": "02554a9a1ac577a3e78fc3a0ee5b05ed35df5330", "filename": "gcc/alias.c", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f103e34d1dbc090a6bdb744bc1d7a568695ba491/gcc%2Falias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f103e34d1dbc090a6bdb744bc1d7a568695ba491/gcc%2Falias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Falias.c?ref=f103e34d1dbc090a6bdb744bc1d7a568695ba491", "patch": "@@ -592,11 +592,11 @@ get_alias_set (tree t)\n \n /* Return a brand-new alias set.  */\n \n+static GTY(()) HOST_WIDE_INT last_alias_set;\n+\n HOST_WIDE_INT\n new_alias_set (void)\n {\n-  static HOST_WIDE_INT last_alias_set;\n-\n   if (flag_strict_aliasing)\n     {\n       if (!alias_sets)\n@@ -724,29 +724,29 @@ record_component_aliases (tree type)\n /* Allocate an alias set for use in storing and reading from the varargs\n    spill area.  */\n \n+static GTY(()) HOST_WIDE_INT varargs_set = -1;\n+\n HOST_WIDE_INT\n get_varargs_alias_set (void)\n {\n-  static HOST_WIDE_INT set = -1;\n-\n-  if (set == -1)\n-    set = new_alias_set ();\n+  if (varargs_set == -1)\n+    varargs_set = new_alias_set ();\n \n-  return set;\n+  return varargs_set;\n }\n \n /* Likewise, but used for the fixed portions of the frame, e.g., register\n    save areas.  */\n \n+static GTY(()) HOST_WIDE_INT frame_set = -1;\n+\n HOST_WIDE_INT\n get_frame_alias_set (void)\n {\n-  static HOST_WIDE_INT set = -1;\n+  if (frame_set == -1)\n+    frame_set = new_alias_set ();\n \n-  if (set == -1)\n-    set = new_alias_set ();\n-\n-  return set;\n+  return frame_set;\n }\n \n /* Inside SRC, the source of a SET, find a base address.  */"}, {"sha": "183cf21ab7e90704b59105bb7f7767f8b885b031", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f103e34d1dbc090a6bdb744bc1d7a568695ba491/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f103e34d1dbc090a6bdb744bc1d7a568695ba491/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=f103e34d1dbc090a6bdb744bc1d7a568695ba491", "patch": "@@ -230,7 +230,7 @@ int toc_initialized;\n char toc_label_name[10];\n \n /* Alias set for saves and restores from the rs6000 stack.  */\n-static int rs6000_sr_alias_set;\n+static GTY(()) int rs6000_sr_alias_set;\n \n /* Call distance, overridden by -mlongcall and #pragma longcall(1).\n    The only place that looks at this is rs6000_set_default_type_attributes;\n@@ -11106,13 +11106,14 @@ rs6000_emit_eh_reg_restore (rtx source, rtx scratch)\n     emit_move_insn (gen_rtx_REG (Pmode, LINK_REGISTER_REGNUM), operands[0]);\n }\n \n+static GTY(()) int set = -1;\n+\n int   \n get_TOC_alias_set (void)\n {\n-    static int set = -1;\n-    if (set == -1)\n-      set = new_alias_set ();\n-    return set;\n+  if (set == -1)\n+    set = new_alias_set ();\n+  return set;\n }   \n \n /* This returns nonzero if the current function uses the TOC.  This is"}]}