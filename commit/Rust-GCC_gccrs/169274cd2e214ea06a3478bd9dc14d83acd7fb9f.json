{"sha": "169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTY5Mjc0Y2QyZTIxNGVhMDZhMzQ3OGJkOWRjMTRkODNhY2Q3ZmI5Zg==", "commit": {"author": {"name": "Jason Thorpe", "email": "thorpej@wasabisystems.com", "date": "2002-06-12T00:02:07Z"}, "committer": {"name": "Jason Thorpe", "email": "thorpej@gcc.gnu.org", "date": "2002-06-12T00:02:07Z"}, "message": "config.gcc (vax-*-bsd*): Add vax/bsd.h to ${tm_file}.\n\n* config.gcc (vax-*-bsd*): Add vax/bsd.h to ${tm_file}.\n* config/vax/bsd.h: New file.\n* config/vax/netbsd.h: Add missing notice.\n(CPP_PREDEFINES): Remove.\n(TARGET_OS_CPP_BUILTINS): Define.\n(CPP_SPEC): Use NETBSD_CPP_SPEC.\n* config/vax/openbsd.h: Update copyright years.\n(CPP_PREDEFINES): Remove.\n(TARGET_OS_CPP_BUILTINS): Define.\n* config/vax/ultrix.h: Likewise.\n* config/vax/vaxv.h: Likewise.\n* config/vax/vms.h: Likewise.\n* config/vax/vax.h (TARGET_CPU_CPP_BUILTINS): Define.\n(CPP_PREDEFINES, CPP_SPEC): Remove.\n\nFrom-SVN: r54538", "tree": {"sha": "df987459df2d6942684c12f97f5c4b2aa2bcc5b8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/df987459df2d6942684c12f97f5c4b2aa2bcc5b8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/comments", "author": null, "committer": null, "parents": [{"sha": "2f41793e07ad6cca0c54517afe5661d9f0edd378", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f41793e07ad6cca0c54517afe5661d9f0edd378", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f41793e07ad6cca0c54517afe5661d9f0edd378"}], "stats": {"total": 171, "additions": 145, "deletions": 26}, "files": [{"sha": "ae0e26dfe053e6f2a9cd6cb11b171698f48929df", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -1,3 +1,20 @@\n+2002-06-11  Jason Thorpe  <thorpej@wasabisystems.com>\n+\n+\t* config.gcc (vax-*-bsd*): Add vax/bsd.h to ${tm_file}. \n+\t* config/vax/bsd.h: New file.\n+\t* config/vax/netbsd.h: Add missing notice.\n+\t(CPP_PREDEFINES): Remove.  \n+\t(TARGET_OS_CPP_BUILTINS): Define.  \n+\t(CPP_SPEC): Use NETBSD_CPP_SPEC.   \n+\t* config/vax/openbsd.h: Update copyright years.\n+\t(CPP_PREDEFINES): Remove.\n+\t(TARGET_OS_CPP_BUILTINS): Define.\n+\t* config/vax/ultrix.h: Likewise.\n+\t* config/vax/vaxv.h: Likewise.\n+\t* config/vax/vms.h: Likewise.\n+\t* config/vax/vax.h (TARGET_CPU_CPP_BUILTINS): Define.\n+\t(CPP_PREDEFINES, CPP_SPEC): Remove.\n+\n Wed Jun 12 01:50:28 CEST 2002  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.md (addqi_1_slp, subqi_1_slp"}, {"sha": "4868f46f2569ed28e2eba42e08fa02fd306f7723", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -2627,6 +2627,7 @@ v850-*-*)\n \tcxx_target_objs=\"v850-c.o\"\n \t;;\n vax-*-bsd*)\t\t\t# VAXen running BSD\n+\ttm_file=\"${tm_file} vax/bsd.h\"\n \tuse_collect2=yes\n \tfloat_format=vax\n \t;;"}, {"sha": "9b3b77045ffcefa247ca31d7b4e0ccdbe96e02e0", "filename": "gcc/config/vax/bsd.h", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fbsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fbsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fbsd.h?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -0,0 +1,32 @@\n+/* Definitions of target machine for GNU compiler.  BSD version.\n+   Copyright (C) 2002 Free Software Foundation, Inc.\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define_std (\"unix\");\t\t\\\n+      builtin_assert (\"system=bsd\");\t\t\\\n+\t\t\t\t\t\t\\\n+      builtin_define_std (\"vax\");\t\t\\\n+      if (TARGET_G_FLOAT)\t\t\t\\\n+\tbuiltin_define_std (\"GFLOAT\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)"}, {"sha": "46bbac77c53de5e66f5332641ee6bfdfa25a06d9", "filename": "gcc/config/vax/netbsd.h", "status": "modified", "additions": 30, "deletions": 4, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fnetbsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fnetbsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fnetbsd.h?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -1,8 +1,35 @@\n-#undef CPP_PREDEFINES\n-#define CPP_PREDEFINES \"-Dunix -Dvax -D__NetBSD__ -Asystem=unix -Asystem=NetBSD -Acpu=vax -Amachine=vax\"\n+/* Definitions of target machine for GNU compiler.\n+   NetBSD/vax a.out version.\n+   Copyright (C) 1997, 1998, 1999, 2000, 2001, 2002\n+   Free Software Foundation, Inc.\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      NETBSD_OS_CPP_BUILTINS_AOUT();\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n \n #undef CPP_SPEC\n-#define CPP_SPEC \"%{posix:-D_POSIX_SOURCE}\"\n+#define CPP_SPEC NETBSD_CPP_SPEC\n \n /* Make gcc agree with <machine/ansi.h> */\n \n@@ -15,4 +42,3 @@\n /* Until they use ELF or something that handles dwarf2 unwinds\n    and initialization stuff better.  */\n #undef DWARF2_UNWIND_INFO\n-"}, {"sha": "bc3af245d86ff8556243af768003efe0170db70b", "filename": "gcc/config/vax/openbsd.h", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fopenbsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fopenbsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fopenbsd.h?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -1,5 +1,5 @@\n /* Configuration fragment for a VAX OpenBSD target.\n-   Copyright (C) 2000 Free Software Foundation, Inc.\n+   Copyright (C) 2000, 2002 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -20,8 +20,15 @@ Boston, MA 02111-1307, USA.  */\n \n /* Amend common OpenBSD definitions for VAX target.  */\n \n-#undef CPP_PREDEFINES\n-#define CPP_PREDEFINES \"-D__unix__ -D__vax__ -D__OpenBSD__ -Asystem=unix -Asystem=OpenBSD -Acpu=vax -Amachine=vax\"\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define (\"__unix__\");\t\t\\\n+      builtin_define (\"__OpenBSD__\");\t\t\\\n+      builtin_assert (\"system=unix\");\t\t\\\n+      builtin_assert (\"system=OpenBSD\");\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n \n /* Layout of source language data types.  */\n "}, {"sha": "f8ade575737c6aa8e601821cef4200fededdeadc", "filename": "gcc/config/vax/ultrix.h", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fultrix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fultrix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fultrix.h?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -1,5 +1,5 @@\n /* Output variables, constants and external declarations, for GNU compiler.\n-   Copyright (C) 1999 Free Software Foundation, Inc.\n+   Copyright (C) 1999, 2002 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -18,8 +18,21 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-#undef CPP_PREDEFINES\n-#define CPP_PREDEFINES \" -Dvax -Dunix -Dultrix -Dbsd4_2 -D__vax -D__unix -D__ultrix -D__bsd4_2 -Asystem=unix -Asystem=bsd -Acpu=vax -Amachine=vax\"\n+\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define_std (\"unix\");\t\t\\\n+      builtin_define_std (\"ultrix\");\t\t\\\n+      builtin_define_std (\"bsd4_2\");\t\t\\\n+      builtin_assert (\"system=unix\");\t\t\\\n+      builtin_assert (\"system=bsd\");\t\t\\\n+\t\t\t\t\t\t\\\n+      builtin_define_std (\"vax\");\t\t\\\n+      if (TARGET_G_FLOAT)\t\t\t\\\n+\tbuiltin_define_std (\"GFLOAT\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n \n /* These are as defined in /usr/include/sys/stdtypes.h.\n    These values are for ultrix 4.2 on the VAX.  */"}, {"sha": "c6b377ee5bf6f03e0be4f2992f7f344dd5c29adb", "filename": "gcc/config/vax/vax.h", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fvax.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fvax.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fvax.h?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -19,20 +19,28 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-#define VMS_TARGET 0\n \n-/* Names to predefine in the preprocessor for this target machine.  */\n+/* Target CPU builtins.  */\n+#define TARGET_CPU_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define (\"__vax__\");\t\t\\\n+      builtin_assert (\"cpu=vax\");\t\t\\\n+      builtin_assert (\"machine=vax\");\t\t\\\n+      if (TARGET_G_FLOAT)\t\t\t\\\n+\t{\t\t\t\t\t\\\n+\t  builtin_define (\"__GFLOAT\");\t\t\\\n+\t  builtin_define (\"__GFLOAT__\");\t\\\n+\t}\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n \n-#define CPP_PREDEFINES \"-Dvax -D__vax__ -Dunix -Asystem=unix -Asystem=bsd -Acpu=vax -Amachine=vax\"\n+#define VMS_TARGET 0\n \n /* Use -J option for long branch support with Unix assembler.  */\n \n #define ASM_SPEC \"-J\"\n \n-/* If using g-format floating point, alter math.h.  */\n-\n-#define\tCPP_SPEC \"%{mg:%{!ansi:-DGFLOAT} -D__GFLOAT}\"\n-\n /* Choose proper libraries depending on float format.\n    Note that there are no profiling libraries for g-format.\n    Also use -lg for the sake of dbx.  */"}, {"sha": "a86615277ea1d2e45657071e5f38ff628ce16ec6", "filename": "gcc/config/vax/vaxv.h", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fvaxv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fvaxv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fvaxv.h?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler.  VAX sysV version.\n-   Copyright (C) 1988, 1993, 1996, 2000 Free Software Foundation, Inc.\n+   Copyright (C) 1988, 1993, 1996, 2000, 2002 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -22,8 +22,17 @@ Boston, MA 02111-1307, USA.  */\n \n #define SCCS_DIRECTIVE\n \n-#undef CPP_PREDEFINES\n-#define CPP_PREDEFINES \"-Dvax -Dunix -Asystem=unix -Asystem=svr3 -Acpu=vax -Amachine=vax\"\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define_std (\"unix\");\t\t\\\n+      builtin_assert (\"system=svr3\");\t\t\\\n+\t\t\t\t\t\t\\\n+      builtin_define_std (\"vax\");\t\t\\\n+      if (TARGET_G_FLOAT)\t\t\t\\\n+\tbuiltin_define_std (\"GFLOAT\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n \n /* Output #ident as a .ident.  */\n "}, {"sha": "943882975d5f0b7b1317f8a6ddee08ba5b635afc", "filename": "gcc/config/vax/vms.h", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fvms.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/169274cd2e214ea06a3478bd9dc14d83acd7fb9f/gcc%2Fconfig%2Fvax%2Fvms.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fvax%2Fvms.h?ref=169274cd2e214ea06a3478bd9dc14d83acd7fb9f", "patch": "@@ -35,17 +35,23 @@ Boston, MA 02111-1307, USA.  */\n #define VMS_TARGET 1\n \n #undef LIB_SPEC\n-#undef CPP_PREDEFINES\n #undef TARGET_NAME\n #undef TARGET_DEFAULT\n #undef CALL_USED_REGISTERS\n #undef STARTING_FRAME_OFFSET\n \n-/* Predefine this in CPP because VMS limits the size of command options\n-   and GNU CPP is not used on VMS except with GNU C.  */\n-#define CPP_PREDEFINES \\\n-\"-Dvax -Dvms -DVMS -D__vax__ -D__vms__ -D__VMS__\\\n- -D__GNUC__=2 -D__GNUC_MINOR__=7 -Asystem=vms -Acpu=vax -Amachine=vax\"\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      builtin_define_std (\"vms\");\t\t\\\n+      builtin_define_std (\"VMS\");\t\t\\\n+      builtin_assert (\"system=vms\");\t\t\\\n+\t\t\t\t\t\t\\\n+      builtin_define_std (\"vax\");\t\t\\\n+      if (TARGET_G_FLOAT)\t\t\t\\\n+\tbuiltin_define_std (\"GFLOAT\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n \n /* These match the definitions used in VAXCRTL, the VMS C run-time library */\n "}]}