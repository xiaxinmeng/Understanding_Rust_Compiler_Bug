{"sha": "48e55066d5d0cd652b6527f08cb67768c4aaabe7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhlNTUwNjZkNWQwY2Q2NTJiNjUyN2YwOGNiNjc3NjhjNGFhYWJlNw==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2008-03-22T19:34:09Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-03-22T19:34:09Z"}, "message": "i386.c (assign_386_stack_local): Align DImode slots to their natural alignment to avoid store forwarding stalls.\n\n        * config/i386/i386.c (assign_386_stack_local): Align DImode slots\n        to their natural alignment to avoid store forwarding stalls.\n\nFrom-SVN: r133451", "tree": {"sha": "82814b277271d80e7634965c77b5d2a2dd97a857", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82814b277271d80e7634965c77b5d2a2dd97a857"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48e55066d5d0cd652b6527f08cb67768c4aaabe7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48e55066d5d0cd652b6527f08cb67768c4aaabe7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48e55066d5d0cd652b6527f08cb67768c4aaabe7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48e55066d5d0cd652b6527f08cb67768c4aaabe7/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a6b2268416c7eb9069998c930cd0c5bff0a5bd79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6b2268416c7eb9069998c930cd0c5bff0a5bd79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6b2268416c7eb9069998c930cd0c5bff0a5bd79"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "d1d0a18e6ee3548b639f921ffa034c7c57a47d69", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48e55066d5d0cd652b6527f08cb67768c4aaabe7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48e55066d5d0cd652b6527f08cb67768c4aaabe7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=48e55066d5d0cd652b6527f08cb67768c4aaabe7", "patch": "@@ -1,3 +1,8 @@\n+2008-03-22  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386.c (assign_386_stack_local): Align DImode slots\n+\tto their natural alignment to avoid store forwarding stalls.\n+\n 2008-03-21  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n \n \tPR target/27946"}, {"sha": "60c000c6335771ac0e73d11fa5d718647a4137d1", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48e55066d5d0cd652b6527f08cb67768c4aaabe7/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48e55066d5d0cd652b6527f08cb67768c4aaabe7/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=48e55066d5d0cd652b6527f08cb67768c4aaabe7", "patch": "@@ -16315,6 +16315,7 @@ rtx\n assign_386_stack_local (enum machine_mode mode, enum ix86_stack_slot n)\n {\n   struct stack_local_entry *s;\n+  int align;\n \n   gcc_assert (n < MAX_386_STACK_LOCALS);\n \n@@ -16325,11 +16326,19 @@ assign_386_stack_local (enum machine_mode mode, enum ix86_stack_slot n)\n     if (s->mode == mode && s->n == n)\n       return copy_rtx (s->rtl);\n \n+  /* Align DImode slots to their natural alignment\n+     to avoid store forwarding stalls.  */\n+  if (mode == DImode\n+      && (GET_MODE_BITSIZE (mode) > GET_MODE_ALIGNMENT (mode)))\n+    align = GET_MODE_BITSIZE (mode);\n+  else\n+    align = 0;\n+\n   s = (struct stack_local_entry *)\n     ggc_alloc (sizeof (struct stack_local_entry));\n   s->n = n;\n   s->mode = mode;\n-  s->rtl = assign_stack_local (mode, GET_MODE_SIZE (mode), 0);\n+  s->rtl = assign_stack_local (mode, GET_MODE_SIZE (mode), align);\n \n   s->next = ix86_stack_locals;\n   ix86_stack_locals = s;"}]}