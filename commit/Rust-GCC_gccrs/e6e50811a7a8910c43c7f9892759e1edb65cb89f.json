{"sha": "e6e50811a7a8910c43c7f9892759e1edb65cb89f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTZlNTA4MTFhN2E4OTEwYzQzYzdmOTg5Mjc1OWUxZWRiNjVjYjg5Zg==", "commit": {"author": {"name": "Anthony Green", "email": "green@moxielogic.com", "date": "2010-01-04T08:29:53Z"}, "committer": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "2010-01-04T08:29:53Z"}, "message": "Fix libgcc build for moxie.\n\nFrom-SVN: r155609", "tree": {"sha": "88c94cd7c4a1f22beec2165613e526eb7a0f44fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88c94cd7c4a1f22beec2165613e526eb7a0f44fa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e6e50811a7a8910c43c7f9892759e1edb65cb89f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6e50811a7a8910c43c7f9892759e1edb65cb89f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6e50811a7a8910c43c7f9892759e1edb65cb89f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6e50811a7a8910c43c7f9892759e1edb65cb89f/comments", "author": {"login": "atgreen", "id": 89993, "node_id": "MDQ6VXNlcjg5OTkz", "avatar_url": "https://avatars.githubusercontent.com/u/89993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atgreen", "html_url": "https://github.com/atgreen", "followers_url": "https://api.github.com/users/atgreen/followers", "following_url": "https://api.github.com/users/atgreen/following{/other_user}", "gists_url": "https://api.github.com/users/atgreen/gists{/gist_id}", "starred_url": "https://api.github.com/users/atgreen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atgreen/subscriptions", "organizations_url": "https://api.github.com/users/atgreen/orgs", "repos_url": "https://api.github.com/users/atgreen/repos", "events_url": "https://api.github.com/users/atgreen/events{/privacy}", "received_events_url": "https://api.github.com/users/atgreen/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "93c7168800d48c3b05910109163ce0b603241ee9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/93c7168800d48c3b05910109163ce0b603241ee9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/93c7168800d48c3b05910109163ce0b603241ee9"}], "stats": {"total": 160, "additions": 158, "deletions": 2}, "files": [{"sha": "d8424c16cace0a446cac0fb756e3f0b406adc9a3", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=e6e50811a7a8910c43c7f9892759e1edb65cb89f", "patch": "@@ -1,3 +1,10 @@\n+2010-01-04  Anthony Green  <green@moxielogic.com>\n+\n+\t* config/moxie/crti.asm, config/moxie/crtn.asm,\n+\tconfig/moxie/t-moxie-softfp, config/moxie/sfp-machine.h,\n+\tconfig/moxie/t-moxie: New files.\n+\t* config.host: Add t-moxie-softfp reference.\n+\n 2009-11-18  Iain Sandoe <iain.sandoe@sandoe-acoustics.co.uk>\n \n \tPR other/39888"}, {"sha": "5c3bfa6999655c8d7dcede33bbe5f0687df99cfa", "filename": "libgcc/config.host", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=e6e50811a7a8910c43c7f9892759e1edb65cb89f", "patch": "@@ -1,6 +1,6 @@\n # libgcc host-specific configuration file.\n # Copyright 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,\n-# 2008, 2009 Free Software Foundation, Inc.\n+# 2008, 2009, 2010 Free Software Foundation, Inc.\n \n #This file is part of GCC.\n \n@@ -436,7 +436,7 @@ mmix-knuth-mmixware)\n mn10300-*-*)\n \t;;\n moxie-*-*)\n-\ttmake_file=${cpu_type}/t-moxie\n+\ttmake_file=\"moxie/t-moxie moxie/t-moxie-softfp\"\n \textra_parts=\"crtbegin.o crtend.o crti.o crtn.o\"\n \t;;\n pdp11-*-*)"}, {"sha": "f44582799a3421df1e072a00896ae7469f1f2ef1", "filename": "libgcc/config/moxie/crti.asm", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Fcrti.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Fcrti.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmoxie%2Fcrti.asm?ref=e6e50811a7a8910c43c7f9892759e1edb65cb89f", "patch": "@@ -0,0 +1,40 @@\n+# crti.asm for moxie\n+#\n+#   Copyright (C) 2009 Free Software Foundation\n+# \n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by the\n+# Free Software Foundation; either version 3, or (at your option) any\n+# later version.\n+# \n+# This file is distributed in the hope that it will be useful, but\n+# WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+# General Public License for more details.\n+# \n+# Under Section 7 of GPL version 3, you are granted additional\n+# permissions described in the GCC Runtime Library Exception, version\n+# 3.1, as published by the Free Software Foundation.\n+#\n+# You should have received a copy of the GNU General Public License and\n+# a copy of the GCC Runtime Library Exception along with this program;\n+# see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+# <http://www.gnu.org/licenses/>.\n+\n+# This file just make a stack frame for the contents of the .fini and\n+# .init sections.  Users may put any desired instructions in those\n+# sections.\n+\n+\t.file\t\t\"crti.asm\"\n+\n+\t.section\t\".init\"\n+\t.global\t_init\n+\t.type\t_init, @function\t\n+\t.p2align\t1\n+_init:\n+\n+\t.section\t\".fini\"\n+\t.global\t_fini\n+\t.type\t_fini,@function\n+\t.p2align\t1\n+_fini:"}, {"sha": "3ac9d31eed88514f8d0974e7eb7139f05b002eb3", "filename": "libgcc/config/moxie/crtn.asm", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Fcrtn.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Fcrtn.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmoxie%2Fcrtn.asm?ref=e6e50811a7a8910c43c7f9892759e1edb65cb89f", "patch": "@@ -0,0 +1,34 @@\n+# crtn.asm for moxie\n+# \n+#   Copyright (C) 2009 Free Software Foundation\n+# \n+# This file is free software; you can redistribute it and/or modify it\n+# under the terms of the GNU General Public License as published by the\n+# Free Software Foundation; either version 3, or (at your option) any\n+# later version.\n+# \n+# This file is distributed in the hope that it will be useful, but\n+# WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+# General Public License for more details.\n+# \n+# Under Section 7 of GPL version 3, you are granted additional\n+# permissions described in the GCC Runtime Library Exception, version\n+# 3.1, as published by the Free Software Foundation.\n+#\n+# You should have received a copy of the GNU General Public License and\n+# a copy of the GCC Runtime Library Exception along with this program;\n+# see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+# <http://www.gnu.org/licenses/>.\n+\n+# This file just makes sure that the .fini and .init sections do in\n+# fact return.  Users may put any desired instructions in those sections.\n+# This file is the last thing linked into any executable.\n+\n+\t.file\t\t\"crtn.asm\"\n+\n+\t.section\t\".init\"\n+\tret\n+\t\n+\t.section\t\".fini\"\n+\tret"}, {"sha": "98f9f1bf491d427f4b3b22d84eba1ba60f91ef51", "filename": "libgcc/config/moxie/sfp-machine.h", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Fsfp-machine.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Fsfp-machine.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmoxie%2Fsfp-machine.h?ref=e6e50811a7a8910c43c7f9892759e1edb65cb89f", "patch": "@@ -0,0 +1,57 @@\n+#define _FP_W_TYPE_SIZE\t\t32\n+#define _FP_W_TYPE\t\tunsigned long\n+#define _FP_WS_TYPE\t\tsigned long\n+#define _FP_I_TYPE\t\tlong\n+\n+/* The type of the result of a floating point comparison.  This must\n+   match `__libgcc_cmp_return__' in GCC for the target.  */\n+typedef int __gcc_CMPtype __attribute__ ((mode (__libgcc_cmp_return__)));\n+#define CMPtype __gcc_CMPtype\n+\n+#define _FP_MUL_MEAT_S(R,X,Y)\t\t\t\t\\\n+  _FP_MUL_MEAT_1_wide(_FP_WFRACBITS_S,R,X,Y,umul_ppmm)\n+#define _FP_MUL_MEAT_D(R,X,Y)\t\t\t\t\\\n+  _FP_MUL_MEAT_2_wide(_FP_WFRACBITS_D,R,X,Y,umul_ppmm)\n+#define _FP_MUL_MEAT_Q(R,X,Y)\t\t\t\t\\\n+  _FP_MUL_MEAT_4_wide(_FP_WFRACBITS_Q,R,X,Y,umul_ppmm)\n+\n+#define _FP_DIV_MEAT_S(R,X,Y)\t_FP_DIV_MEAT_1_loop(S,R,X,Y)\n+#define _FP_DIV_MEAT_D(R,X,Y)\t_FP_DIV_MEAT_2_udiv(D,R,X,Y)\n+#define _FP_DIV_MEAT_Q(R,X,Y)\t_FP_DIV_MEAT_4_udiv(Q,R,X,Y)\n+\n+#define _FP_NANFRAC_S\t\t((_FP_QNANBIT_S << 1) - 1)\n+#define _FP_NANFRAC_D\t\t((_FP_QNANBIT_D << 1) - 1), -1\n+#define _FP_NANFRAC_Q\t\t((_FP_QNANBIT_Q << 1) - 1), -1, -1, -1\n+#define _FP_NANSIGN_S\t\t0\n+#define _FP_NANSIGN_D\t\t0\n+#define _FP_NANSIGN_Q\t\t0\n+\n+#define _FP_KEEPNANFRACP 1\n+\n+/* Someone please check this.  */\n+#define _FP_CHOOSENAN(fs, wc, R, X, Y, OP)\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\\\n+    if ((_FP_FRAC_HIGH_RAW_##fs(X) & _FP_QNANBIT_##fs)\t\t\\\n+\t&& !(_FP_FRAC_HIGH_RAW_##fs(Y) & _FP_QNANBIT_##fs))\t\\\n+      {\t\t\t\t\t\t\t\t\\\n+\tR##_s = Y##_s;\t\t\t\t\t\t\\\n+\t_FP_FRAC_COPY_##wc(R,Y);\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\\\n+    else\t\t\t\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\\\n+\tR##_s = X##_s;\t\t\t\t\t\t\\\n+\t_FP_FRAC_COPY_##wc(R,X);\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\\\n+    R##_c = FP_CLS_NAN;\t\t\t\t\t\t\\\n+  } while (0)\n+\n+#define\t__LITTLE_ENDIAN\t1234\n+#define\t__BIG_ENDIAN\t4321\n+\n+# define __BYTE_ORDER __BIG_ENDIAN\n+\n+/* Define ALIASNAME as a strong alias for NAME.  */\n+# define strong_alias(name, aliasname) _strong_alias(name, aliasname)\n+# define _strong_alias(name, aliasname) \\\n+  extern __typeof (name) aliasname __attribute__ ((alias (#name)));\n+"}, {"sha": "6e62aec22244cff085a016e87a015beba8da6eb5", "filename": "libgcc/config/moxie/t-moxie", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Ft-moxie", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Ft-moxie", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmoxie%2Ft-moxie?ref=e6e50811a7a8910c43c7f9892759e1edb65cb89f", "patch": "@@ -0,0 +1,9 @@\n+# Assemble startup files.\n+\n+$(T)crti.o: $(srcdir)/config/moxie/crti.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(MULTILIB_CFLAGS) $(INCLUDES) \\\n+\t-c -o $(T)crti.o -x assembler-with-cpp $(srcdir)/config/moxie/crti.asm\n+\n+$(T)crtn.o: $(srcdir)/config/moxie/crtn.asm $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) $(GCC_CFLAGS) $(MULTILIB_CFLAGS) $(INCLUDES) \\\n+\t-c -o $(T)crtn.o -x assembler-with-cpp $(srcdir)/config/moxie/crtn.asm"}, {"sha": "61c575132e9affe66ed4494eb58c7b3e22becb1d", "filename": "libgcc/config/moxie/t-moxie-softfp", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Ft-moxie-softfp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6e50811a7a8910c43c7f9892759e1edb65cb89f/libgcc%2Fconfig%2Fmoxie%2Ft-moxie-softfp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmoxie%2Ft-moxie-softfp?ref=e6e50811a7a8910c43c7f9892759e1edb65cb89f", "patch": "@@ -0,0 +1,9 @@\n+softfp_float_modes := sf df\n+softfp_int_modes := si di\n+softfp_extensions := sfdf\n+softfp_truncations := dfsf\n+softfp_machine_header := moxie/sfp-machine.h\n+softfp_exclude_libgcc2 := y\n+\n+# softfp seems to be missing a whole bunch of prototypes.\n+TARGET_LIBGCC2_CFLAGS += -Wno-missing-prototypes"}]}