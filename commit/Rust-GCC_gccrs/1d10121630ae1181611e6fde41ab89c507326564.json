{"sha": "1d10121630ae1181611e6fde41ab89c507326564", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWQxMDEyMTYzMGFlMTE4MTYxMWU2ZmRlNDFhYjg5YzUwNzMyNjU2NA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2016-01-24T22:18:20Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2016-01-24T22:18:20Z"}, "message": "[multiple changes]\n\n2016-01-23  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/69397\n\tPR fortran/68442\n\t* interface.c (gfc_arglist_matches_symbol): Replace assert with\n\ta return false if not a procedure.\n\t* resolve.c (resolve_generic_f): Test if we are resolving an\n\tinitialization expression and adjust error message accordingly.\n\n2016-01-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/69397\n\tPR fortran/68442\n\t* gfortran.dg/interface_38.f90: New test.\n\t* gfortran.dg/interface_39.f90: New test.\n\nFrom-SVN: r232780", "tree": {"sha": "c4b2fa7e6c57bcfb7985990569b0be1ef4d640b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4b2fa7e6c57bcfb7985990569b0be1ef4d640b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1d10121630ae1181611e6fde41ab89c507326564", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d10121630ae1181611e6fde41ab89c507326564", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d10121630ae1181611e6fde41ab89c507326564", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d10121630ae1181611e6fde41ab89c507326564/comments", "author": null, "committer": null, "parents": [{"sha": "a220f43d1154946c71a2208bd13fa10c945fcef5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a220f43d1154946c71a2208bd13fa10c945fcef5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a220f43d1154946c71a2208bd13fa10c945fcef5"}], "stats": {"total": 58, "additions": 55, "deletions": 3}, "files": [{"sha": "5853ddf374c42e1dfff6b2d155e1ed7499909aaf", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=1d10121630ae1181611e6fde41ab89c507326564", "patch": "@@ -1,3 +1,12 @@\n+2016-01-23  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/69397\n+\tPR fortran/68442\n+\t* interface.c (gfc_arglist_matches_symbol): Replace assert with\n+\ta return false if not a procedure.\n+\t* resolve.c (resolve_generic_f): Test if we are resolving an\n+\tinitialization expression and adjust error message accordingly.\n+\n 2016-01-24  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/66094"}, {"sha": "5c66c6ef31cfee9d07ed136187afd1db307f4e38", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=1d10121630ae1181611e6fde41ab89c507326564", "patch": "@@ -3506,7 +3506,8 @@ gfc_arglist_matches_symbol (gfc_actual_arglist** args, gfc_symbol* sym)\n   gfc_formal_arglist *dummy_args;\n   bool r;\n \n-  gcc_assert (sym->attr.flavor == FL_PROCEDURE);\n+  if (sym->attr.flavor != FL_PROCEDURE)\n+    return false;\n \n   dummy_args = gfc_sym_get_dummy_args (sym);\n "}, {"sha": "8752fd4693b928fcdf57a2bc57943ad547d6c22b", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=1d10121630ae1181611e6fde41ab89c507326564", "patch": "@@ -2565,8 +2565,13 @@ resolve_generic_f (gfc_expr *expr)\n      that possesses a matching interface.  14.1.2.4  */\n   if (sym  && !intr && !gfc_is_intrinsic (sym, 0, expr->where))\n     {\n-      gfc_error (\"There is no specific function for the generic %qs \"\n-\t\t \"at %L\", expr->symtree->n.sym->name, &expr->where);\n+      if (gfc_init_expr_flag)\n+\tgfc_error (\"Function %qs in initialization expression at %L \"\n+\t\t   \"must be an intrinsic function\",\n+\t\t   expr->symtree->n.sym->name, &expr->where);\n+      else\n+\tgfc_error (\"There is no specific function for the generic %qs \"\n+\t\t   \"at %L\", expr->symtree->n.sym->name, &expr->where);\n       return false;\n     }\n "}, {"sha": "30540554b733a2f971a90cb78f3fa7e01497e198", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1d10121630ae1181611e6fde41ab89c507326564", "patch": "@@ -1,3 +1,10 @@\n+2016-01-24  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/69397\n+\tPR fortran/68442\n+\t* gfortran.dg/interface_38.f90: New test.\n+\t* gfortran.dg/interface_39.f90: New test.\n+\t\n 2016-01-24  Patrick Palka  <ppalka@gcc.gnu.org>\n \n \tRevert:"}, {"sha": "d8f42ee814f792ce26c543aa5734aa57126e8d41", "filename": "gcc/testsuite/gfortran.dg/interface_38.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_38.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_38.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_38.f90?ref=1d10121630ae1181611e6fde41ab89c507326564", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do compile }\n+! PR69397\n+program p\n+   interface f\n+      procedure f1 ! { dg-error \"neither function nor subroutine\" }\n+      !... more\n+   end interface\n+   integer, allocatable :: z\n+   print *, f(z) ! { dg-error \"no specific function\" }\n+contains\n+   integer function f2 (x)\n+      integer, allocatable :: x\n+      f2 = 1\n+   end\n+end\n+"}, {"sha": "0d6a38e11e26305fe3f8c1d395321d201fc17cd9", "filename": "gcc/testsuite/gfortran.dg/interface_39.f90", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_39.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d10121630ae1181611e6fde41ab89c507326564/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_39.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_39.f90?ref=1d10121630ae1181611e6fde41ab89c507326564", "patch": "@@ -0,0 +1,14 @@\n+! { dg-do compile }\n+! PR68442\n+module m\n+   interface gkind\n+      procedure g\n+   end interface\n+contains\n+   subroutine f(x)\n+      character(kind=gkind()) :: x ! { dg-error \"must be an intrinsic\" }\n+   end\n+   integer function g()\n+      g = 1\n+   end\n+end"}]}