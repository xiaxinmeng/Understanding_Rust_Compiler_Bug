{"sha": "9bbd109176af4f1f879ea303f6c04d07f8a107cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWJiZDEwOTE3NmFmNGYxZjg3OWVhMzAzZjZjMDRkMDdmOGExMDdjYg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-20T22:28:08Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-20T22:28:08Z"}, "message": "(main): Delete output file before opening it.\n\nDiscard directory names from progname.\n\nFrom-SVN: r5842", "tree": {"sha": "f11b5347e8e4919f577203cc43a677bb912ae5de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f11b5347e8e4919f577203cc43a677bb912ae5de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9bbd109176af4f1f879ea303f6c04d07f8a107cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bbd109176af4f1f879ea303f6c04d07f8a107cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9bbd109176af4f1f879ea303f6c04d07f8a107cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9bbd109176af4f1f879ea303f6c04d07f8a107cb/comments", "author": null, "committer": null, "parents": [{"sha": "94698f4d2363e3e926a65a29446c1d54be43ab9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94698f4d2363e3e926a65a29446c1d54be43ab9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94698f4d2363e3e926a65a29446c1d54be43ab9e"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "59a93577f6767ad2dc74adb48b597837c1677636", "filename": "gcc/fix-header.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9bbd109176af4f1f879ea303f6c04d07f8a107cb/gcc%2Ffix-header.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9bbd109176af4f1f879ea303f6c04d07f8a107cb/gcc%2Ffix-header.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffix-header.c?ref=9bbd109176af4f1f879ea303f6c04d07f8a107cb", "patch": "@@ -626,7 +626,15 @@ main (argc, argv)\n   long int inf_size;\n \n   if (argv[0] && argv[0][0])\n-    progname = argv[0];\n+    {\n+      register char *p;\n+\n+      progname = 0;\n+      for (p = argv[0]; *p; p++)\n+        if (*p == '/')\n+          progname = p;\n+      progname = progname ? progname+1 : argv[0];\n+    }\n \n   if (argc < 4)\n     {\n@@ -717,6 +725,7 @@ main (argc, argv)\n   if (inf_limit > inf_buffer && inf_limit[-1] != '\\n')\n     inf_limit++;\n \n+  unlink (argv[3]);\n   outf = fopen (argv[3], \"w\");\n   if (outf == NULL)\n     {"}]}