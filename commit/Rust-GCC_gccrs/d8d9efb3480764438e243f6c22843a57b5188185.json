{"sha": "d8d9efb3480764438e243f6c22843a57b5188185", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhkOWVmYjM0ODA3NjQ0MzhlMjQzZjZjMjI4NDNhNTdiNTE4ODE4NQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-08-27T00:44:11Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-08-27T00:44:11Z"}, "message": "compiler: Don't crash on invalid builtin calls.\n\n    \n    Fixes golang/go#11544.\n    \n    Reviewed-on: https://go-review.googlesource.com/13893\n\nFrom-SVN: r227245", "tree": {"sha": "e42134a1e3cde1b47412f40a0bf80e01e9b0847f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e42134a1e3cde1b47412f40a0bf80e01e9b0847f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8d9efb3480764438e243f6c22843a57b5188185", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8d9efb3480764438e243f6c22843a57b5188185", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8d9efb3480764438e243f6c22843a57b5188185", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8d9efb3480764438e243f6c22843a57b5188185/comments", "author": null, "committer": null, "parents": [{"sha": "d252f921bb6560c226c05c25ced419493ab48ab6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d252f921bb6560c226c05c25ced419493ab48ab6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d252f921bb6560c226c05c25ced419493ab48ab6"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "f29ffd4c71e7ae9c4788d30e55ef87a131cf6597", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8d9efb3480764438e243f6c22843a57b5188185/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8d9efb3480764438e243f6c22843a57b5188185/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=d8d9efb3480764438e243f6c22843a57b5188185", "patch": "@@ -1,4 +1,4 @@\n-cd5362c7bb0b207f484a8dfb8db229fd2bffef09\n+5ee78e7d52a4cad0b23f5bc62e5b452489243c70\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "c18ae4a3b482d229064ba4f5d1bb0c1a0084cc77", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8d9efb3480764438e243f6c22843a57b5188185/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8d9efb3480764438e243f6c22843a57b5188185/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=d8d9efb3480764438e243f6c22843a57b5188185", "patch": "@@ -6588,7 +6588,11 @@ Builtin_call_expression::Builtin_call_expression(Gogo* gogo,\n     recover_arg_is_set_(false)\n {\n   Func_expression* fnexp = this->fn()->func_expression();\n-  go_assert(fnexp != NULL);\n+  if (fnexp == NULL)\n+    {\n+      this->code_ = BUILTIN_INVALID;\n+      return;\n+    }\n   const std::string& name(fnexp->named_object()->name());\n   if (name == \"append\")\n     this->code_ = BUILTIN_APPEND;\n@@ -6661,7 +6665,7 @@ Expression*\n Builtin_call_expression::do_lower(Gogo* gogo, Named_object* function,\n \t\t\t\t  Statement_inserter* inserter, int)\n {\n-  if (this->classification() == EXPRESSION_ERROR)\n+  if (this->is_error_expression())\n     return this;\n \n   Location loc = this->location();\n@@ -7500,11 +7504,13 @@ Builtin_call_expression::do_discarding_value()\n Type*\n Builtin_call_expression::do_type()\n {\n+  if (this->is_error_expression())\n+    return Type::make_error_type();\n   switch (this->code_)\n     {\n     case BUILTIN_INVALID:\n     default:\n-      go_unreachable();\n+      return Type::make_error_type();\n \n     case BUILTIN_NEW:\n     case BUILTIN_MAKE:"}]}