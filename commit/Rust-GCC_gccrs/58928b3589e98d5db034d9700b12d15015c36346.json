{"sha": "58928b3589e98d5db034d9700b12d15015c36346", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg5MjhiMzU4OWU5OGQ1ZGIwMzRkOTcwMGIxMmQxNTAxNWMzNjM0Ng==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2017-04-11T16:37:31Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2017-04-11T16:37:31Z"}, "message": "Do not create a constprop clone for calls_comdat_local nodes (PR ipa/80212).\n\n2017-04-11  Martin Liska  <mliska@suse.cz>\n\n\tPR ipa/80212\n\t* ipa-cp.c (determine_versionability): Handle calls_comdat_local\n\tflags.\n\nFrom-SVN: r246847", "tree": {"sha": "c3d082ea4ffd3cc4e7be063a8bcdb834ac0158de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3d082ea4ffd3cc4e7be063a8bcdb834ac0158de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/58928b3589e98d5db034d9700b12d15015c36346", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58928b3589e98d5db034d9700b12d15015c36346", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58928b3589e98d5db034d9700b12d15015c36346", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58928b3589e98d5db034d9700b12d15015c36346/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3812f460464251b944255065422bd2755efad659", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3812f460464251b944255065422bd2755efad659", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3812f460464251b944255065422bd2755efad659"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "1536626851af95065fd6a05d520a822836cdd366", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58928b3589e98d5db034d9700b12d15015c36346/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58928b3589e98d5db034d9700b12d15015c36346/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=58928b3589e98d5db034d9700b12d15015c36346", "patch": "@@ -1,3 +1,9 @@\n+2017-04-11  Martin Liska  <mliska@suse.cz>\n+\n+\tPR ipa/80212\n+\t* ipa-cp.c (determine_versionability): Handle calls_comdat_local\n+\tflags.\n+\n 2017-04-11  Martin Sebor  <msebor@redhat.com>\n \n \tPR middle-end/80364"}, {"sha": "fa3d5fd7548496c525a0241e9a8af2c1bc43ef43", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/58928b3589e98d5db034d9700b12d15015c36346/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/58928b3589e98d5db034d9700b12d15015c36346/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=58928b3589e98d5db034d9700b12d15015c36346", "patch": "@@ -614,6 +614,12 @@ determine_versionability (struct cgraph_node *node,\n      decloned constructors, inlining is always better anyway.  */\n   else if (node->comdat_local_p ())\n     reason = \"comdat-local function\";\n+  else if (node->calls_comdat_local)\n+    {\n+      /* TODO: call is versionable if we make sure that all\n+\t callers are inside of a comdat group.  */\n+      reason = \"calls comdat-local function\";\n+    }\n \n   if (reason && dump_file && !node->alias && !node->thunk.thunk_p)\n     fprintf (dump_file, \"Function %s/%i is not versionable, reason: %s.\\n\","}]}