{"sha": "426357eaccd7e80b91170d8f92f71697e633707c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDI2MzU3ZWFjY2Q3ZTgwYjkxMTcwZDhmOTJmNzE2OTdlNjMzNzA3Yw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-05-28T15:43:14Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-05-28T15:43:14Z"}, "message": "tree-inline.c (cfun_stack): Change the type to VEC(function_p,heap).\n\n\t* tree-inline.c (cfun_stack): Change the type to\n\tVEC(function_p,heap).\n\t(push_cfun, pop_cfun): Use VEC instead of VARRAY.\n\nFrom-SVN: r100294", "tree": {"sha": "ebb35ff2e8b0d859e9e1bb7482d5f6d6116263b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebb35ff2e8b0d859e9e1bb7482d5f6d6116263b0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/426357eaccd7e80b91170d8f92f71697e633707c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/426357eaccd7e80b91170d8f92f71697e633707c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/426357eaccd7e80b91170d8f92f71697e633707c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/426357eaccd7e80b91170d8f92f71697e633707c/comments", "author": null, "committer": null, "parents": [{"sha": "8184759dbcf120129a08d3c2c96d1a9e82256877", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8184759dbcf120129a08d3c2c96d1a9e82256877", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8184759dbcf120129a08d3c2c96d1a9e82256877"}], "stats": {"total": 23, "additions": 12, "deletions": 11}, "files": [{"sha": "aa55a95e4a901827e35d61cfbd316f18c217e3de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/426357eaccd7e80b91170d8f92f71697e633707c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/426357eaccd7e80b91170d8f92f71697e633707c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=426357eaccd7e80b91170d8f92f71697e633707c", "patch": "@@ -9,6 +9,10 @@\n \t(simplify_cond_and_lookup_avail_expr, record_range): Update\n \tuses of VRP records.\n \n+\t* tree-inline.c (cfun_stack): Change the type to\n+\tVEC(function_p,heap).\n+\t(push_cfun, pop_cfun): Use VEC instead of VARRAY.\n+\n 2005-05-27  Ian Lance Taylor  <ian@airs.com>\n \n \t* c-decl.c (add_stmt): Add C frontend specific version."}, {"sha": "224004e0ebdb28bb7b74033ef20d9d39b1b4deb6", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 8, "deletions": 11, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/426357eaccd7e80b91170d8f92f71697e633707c/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/426357eaccd7e80b91170d8f92f71697e633707c/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=426357eaccd7e80b91170d8f92f71697e633707c", "patch": "@@ -1813,28 +1813,25 @@ estimate_num_insns (tree expr)\n   return num;\n }\n \n+typedef struct function *function_p;\n+\n+DEF_VEC_P(function_p);\n+DEF_VEC_ALLOC_P(function_p,heap);\n+\n /* Initialized with NOGC, making this poisonous to the garbage collector.  */\n-static varray_type cfun_stack;\n+static VEC(function_p,heap) *cfun_stack;\n \n void\n push_cfun (struct function *new_cfun)\n {\n-  static bool initialized = false;\n-\n-  if (!initialized)\n-    {\n-      VARRAY_GENERIC_PTR_NOGC_INIT (cfun_stack, 20, \"cfun_stack\");\n-      initialized = true;\n-    }\n-  VARRAY_PUSH_GENERIC_PTR (cfun_stack, cfun);\n+  VEC_safe_push (function_p, heap, cfun_stack, cfun);\n   cfun = new_cfun;\n }\n \n void\n pop_cfun (void)\n {\n-  cfun = (struct function *)VARRAY_TOP_GENERIC_PTR (cfun_stack);\n-  VARRAY_POP (cfun_stack);\n+  cfun = VEC_pop (function_p, cfun_stack);\n }\n \n /* Install new lexical TREE_BLOCK underneath 'current_block'.  */"}]}