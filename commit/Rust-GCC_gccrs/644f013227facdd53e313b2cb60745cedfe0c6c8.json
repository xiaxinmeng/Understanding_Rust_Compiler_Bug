{"sha": "644f013227facdd53e313b2cb60745cedfe0c6c8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQ0ZjAxMzIyN2ZhY2RkNTNlMzEzYjJjYjYwNzQ1Y2VkZmUwYzZjOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-11-21T07:49:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-11-21T07:49:14Z"}, "message": "re PR target/82981 (unnecessary __multi3 call for mips64r6 linux kernel)\n\n\tPR target/82981\n\t* internal-fn.c (expand_mul_overflow): Use OPTAB_WIDEN instead of\n\tOPTAB_DIRECT in calls to expand_simple_binop.\n\nFrom-SVN: r254986", "tree": {"sha": "46c8f4d8d3cf8e3a1adc2878d0aa870e6bbbf709", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46c8f4d8d3cf8e3a1adc2878d0aa870e6bbbf709"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/644f013227facdd53e313b2cb60745cedfe0c6c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/644f013227facdd53e313b2cb60745cedfe0c6c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/644f013227facdd53e313b2cb60745cedfe0c6c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/644f013227facdd53e313b2cb60745cedfe0c6c8/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b76602dcf22ea0dd89560142d7a4d00c928f5abe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b76602dcf22ea0dd89560142d7a4d00c928f5abe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b76602dcf22ea0dd89560142d7a4d00c928f5abe"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "8efe4b7c59f979722d94f103904053d9821977ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/644f013227facdd53e313b2cb60745cedfe0c6c8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/644f013227facdd53e313b2cb60745cedfe0c6c8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=644f013227facdd53e313b2cb60745cedfe0c6c8", "patch": "@@ -1,3 +1,9 @@\n+2017-11-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/82981\n+\t* internal-fn.c (expand_mul_overflow): Use OPTAB_WIDEN instead of\n+\tOPTAB_DIRECT in calls to expand_simple_binop.\n+\n 2017-11-20  David Malcolm  <dmalcolm@redhat.com>\n \n \tPR c/81404"}, {"sha": "139dcff4495d0fae37c944475bbeee3054fb4d52", "filename": "gcc/internal-fn.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/644f013227facdd53e313b2cb60745cedfe0c6c8/gcc%2Finternal-fn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/644f013227facdd53e313b2cb60745cedfe0c6c8/gcc%2Finternal-fn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Finternal-fn.c?ref=644f013227facdd53e313b2cb60745cedfe0c6c8", "patch": "@@ -1760,7 +1760,7 @@ expand_mul_overflow (location_t loc, tree lhs, tree arg0, tree arg1,\n \t      tem = convert_modes (mode, hmode, lopart, 1);\n \t      tem = expand_shift (LSHIFT_EXPR, mode, tem, hprec, NULL_RTX, 1);\n \t      tem = expand_simple_binop (mode, MINUS, loxhi, tem, NULL_RTX,\n-\t\t\t\t\t 1, OPTAB_DIRECT);\n+\t\t\t\t\t 1, OPTAB_WIDEN);\n \t      emit_move_insn (loxhi, tem);\n \n \t      emit_label (after_hipart_neg);\n@@ -1774,7 +1774,7 @@ expand_mul_overflow (location_t loc, tree lhs, tree arg0, tree arg1,\n \t\t\t\t\t profile_probability::even ());\n \n \t      tem = expand_simple_binop (mode, MINUS, loxhi, larger, NULL_RTX,\n-\t\t\t\t\t 1, OPTAB_DIRECT);\n+\t\t\t\t\t 1, OPTAB_WIDEN);\n \t      emit_move_insn (loxhi, tem);\n \n \t      emit_label (after_lopart_neg);\n@@ -1783,7 +1783,7 @@ expand_mul_overflow (location_t loc, tree lhs, tree arg0, tree arg1,\n \t  /* loxhi += (uns) lo0xlo1 >> (bitsize / 2);  */\n \t  tem = expand_shift (RSHIFT_EXPR, mode, lo0xlo1, hprec, NULL_RTX, 1);\n \t  tem = expand_simple_binop (mode, PLUS, loxhi, tem, NULL_RTX,\n-\t\t\t\t     1, OPTAB_DIRECT);\n+\t\t\t\t     1, OPTAB_WIDEN);\n \t  emit_move_insn (loxhi, tem);\n \n \t  /* if (loxhi >> (bitsize / 2)\n@@ -1810,7 +1810,7 @@ expand_mul_overflow (location_t loc, tree lhs, tree arg0, tree arg1,\n \t\t\t       convert_modes (hmode, mode, lo0xlo1, 1), 1);\n \n \t  tem = expand_simple_binop (mode, IOR, loxhishifted, tem, res,\n-\t\t\t\t     1, OPTAB_DIRECT);\n+\t\t\t\t     1, OPTAB_WIDEN);\n \t  if (tem != res)\n \t    emit_move_insn (res, tem);\n \t  emit_jump (done_label);\n@@ -1835,7 +1835,7 @@ expand_mul_overflow (location_t loc, tree lhs, tree arg0, tree arg1,\n \t      if (!op0_medium_p)\n \t\t{\n \t\t  tem = expand_simple_binop (hmode, PLUS, hipart0, const1_rtx,\n-\t\t\t\t\t     NULL_RTX, 1, OPTAB_DIRECT);\n+\t\t\t\t\t     NULL_RTX, 1, OPTAB_WIDEN);\n \t\t  do_compare_rtx_and_jump (tem, const1_rtx, GTU, true, hmode,\n \t\t\t\t\t   NULL_RTX, NULL, do_error,\n \t\t\t\t\t   profile_probability::very_unlikely ());\n@@ -1844,7 +1844,7 @@ expand_mul_overflow (location_t loc, tree lhs, tree arg0, tree arg1,\n \t      if (!op1_medium_p)\n \t\t{\n \t\t  tem = expand_simple_binop (hmode, PLUS, hipart1, const1_rtx,\n-\t\t\t\t\t     NULL_RTX, 1, OPTAB_DIRECT);\n+\t\t\t\t\t     NULL_RTX, 1, OPTAB_WIDEN);\n \t\t  do_compare_rtx_and_jump (tem, const1_rtx, GTU, true, hmode,\n \t\t\t\t\t   NULL_RTX, NULL, do_error,\n \t\t\t\t\t   profile_probability::very_unlikely ());"}]}