{"sha": "a3cd024676cbf385396d57b6b1f752040a902779", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNjZDAyNDY3NmNiZjM4NTM5NmQ1N2I2YjFmNzUyMDQwYTkwMjc3OQ==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2014-03-12T10:13:07Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2014-03-12T10:13:07Z"}, "message": "[AArch64] Fix selection of default CPU options at configure-time\n\n\t* config.gcc (aarch64*-*-*): Use ISA flags from aarch64-arches.def.\n\tDo not define target_cpu_default2 to generic.\n\t* config/aarch64/aarch64.h (TARGET_CPU_DEFAULT): Use generic cpu.\n\t* config/aarch64/aarch64.c (aarch64_override_options): Update comment.\n\t* config/aarch64/aarch64-arches.def (armv8-a): Use generic cpu.\n\nFrom-SVN: r208508", "tree": {"sha": "bbb49b22c63dea0728e5a211db412d6bea21aba5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bbb49b22c63dea0728e5a211db412d6bea21aba5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3cd024676cbf385396d57b6b1f752040a902779", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3cd024676cbf385396d57b6b1f752040a902779", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3cd024676cbf385396d57b6b1f752040a902779", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3cd024676cbf385396d57b6b1f752040a902779/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c888139c9aee51699484bf7e442b208a962773c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c888139c9aee51699484bf7e442b208a962773c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c888139c9aee51699484bf7e442b208a962773c8"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "cc980d95ddecb477e370e6710b2f6b86954e80ec", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3cd024676cbf385396d57b6b1f752040a902779", "patch": "@@ -1,3 +1,11 @@\n+2014-03-12  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* config.gcc (aarch64*-*-*): Use ISA flags from aarch64-arches.def.\n+\tDo not define target_cpu_default2 to generic.\n+\t* config/aarch64/aarch64.h (TARGET_CPU_DEFAULT): Use generic cpu.\n+\t* config/aarch64/aarch64.c (aarch64_override_options): Update comment.\n+\t* config/aarch64/aarch64-arches.def (armv8-a): Use generic cpu.\n+\n 2014-03-12  Jakub Jelinek  <jakub@redhat.com>\n \t    Marc Glisse  <marc.glisse@inria.fr>\n "}, {"sha": "3c55c88af4d3125cf537d6a8f4aaa2e877b4a57c", "filename": "gcc/config.gcc", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=a3cd024676cbf385396d57b6b1f752040a902779", "patch": "@@ -3396,6 +3396,11 @@ case \"${target}\" in\n \t\t\t\t  ${srcdir}/config/aarch64/$def | \\\n \t\t\t\t  sed -e 's/^[^,]*,[ \t]*//' | \\\n \t\t\t\t  sed -e 's/,.*$//'`\n+\t\t\t\t# Extract the architecture flags from aarch64-arches.def\n+\t\t\t\text_mask=`grep \"^$pattern(\\\"$base_val\\\",\" \\\n+\t\t\t\t   ${srcdir}/config/aarch64/$def | \\\n+\t\t\t\t   sed -e 's/)$//' | \\\n+\t\t\t\t   sed -e 's/^.*,//'`\n \t\t\t  else\n \t\t\t\tbase_id=`grep \"^$pattern(\\\"$base_val\\\",\" \\\n \t\t\t\t  ${srcdir}/config/aarch64/$def | \\\n@@ -4057,10 +4062,8 @@ esac\n target_cpu_default2=\n case ${target} in\n \taarch64*-*-*)\n-\t\tif test x$target_cpu_cname = x\n+\t\tif test x\"$target_cpu_cname\" != x\n \t\tthen\n-\t\t\ttarget_cpu_default2=TARGET_CPU_generic\n-\t\telse\n \t\t\ttarget_cpu_default2=$target_cpu_cname\n \t\tfi\n \t\t;;"}, {"sha": "4b796d8c90b07eb13d564c35000d627ee21e135b", "filename": "gcc/config/aarch64/aarch64-arches.def", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig%2Faarch64%2Faarch64-arches.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig%2Faarch64%2Faarch64-arches.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-arches.def?ref=a3cd024676cbf385396d57b6b1f752040a902779", "patch": "@@ -26,4 +26,4 @@\n    this architecture.  ARCH is the architecture revision.  FLAGS are\n    the flags implied by the architecture.  */\n \n-AARCH64_ARCH(\"armv8-a\",\t      cortexa53,\t     8,  AARCH64_FL_FOR_ARCH8)\n+AARCH64_ARCH(\"armv8-a\",\t      generic,\t     8,  AARCH64_FL_FOR_ARCH8)"}, {"sha": "4e6728a04b4ced8e70025dae0c623e20ad605523", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=a3cd024676cbf385396d57b6b1f752040a902779", "patch": "@@ -5250,7 +5250,7 @@ aarch64_override_options (void)\n \n   /* If the user did not specify a processor, choose the default\n      one for them.  This will be the CPU set during configuration using\n-     --with-cpu, otherwise it is \"cortex-a53\".  */\n+     --with-cpu, otherwise it is \"generic\".  */\n   if (!selected_cpu)\n     {\n       selected_cpu = &all_cores[TARGET_CPU_DEFAULT & 0x3f];"}, {"sha": "1f71ee57acef66d7db39906fe0ade8e3b5d0783b", "filename": "gcc/config/aarch64/aarch64.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig%2Faarch64%2Faarch64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cd024676cbf385396d57b6b1f752040a902779/gcc%2Fconfig%2Faarch64%2Faarch64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.h?ref=a3cd024676cbf385396d57b6b1f752040a902779", "patch": "@@ -475,10 +475,10 @@ enum target_cpus\n   TARGET_CPU_generic\n };\n \n-/* If there is no CPU defined at configure, use \"cortex-a53\" as default.  */\n+/* If there is no CPU defined at configure, use generic as default.  */\n #ifndef TARGET_CPU_DEFAULT\n #define TARGET_CPU_DEFAULT \\\n-  (TARGET_CPU_cortexa53 | (AARCH64_CPU_DEFAULT_FLAGS << 6))\n+  (TARGET_CPU_generic | (AARCH64_CPU_DEFAULT_FLAGS << 6))\n #endif\n \n /* The processor for which instructions should be scheduled.  */"}]}