{"sha": "646abff51d38292367bce009d01087c404c4759b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQ2YWJmZjUxZDM4MjkyMzY3YmNlMDA5ZDAxMDg3YzQwNGM0NzU5Yg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-14T05:19:51Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2010-12-14T05:19:51Z"}, "message": "Better error message if malloc gets a SIGSEGV.\n\nFrom-SVN: r167785", "tree": {"sha": "ed56a19f49ccc3bcdb64886c9187a3c9fa886ad7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed56a19f49ccc3bcdb64886c9187a3c9fa886ad7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/646abff51d38292367bce009d01087c404c4759b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/646abff51d38292367bce009d01087c404c4759b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/646abff51d38292367bce009d01087c404c4759b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/646abff51d38292367bce009d01087c404c4759b/comments", "author": null, "committer": null, "parents": [{"sha": "cac7efc966071ab8b1dc2faef70a698c45dfc895", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cac7efc966071ab8b1dc2faef70a698c45dfc895", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cac7efc966071ab8b1dc2faef70a698c45dfc895"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "3838ab98871ca3592d0723dd5acc86f5c5ca4f98", "filename": "libgo/runtime/go-signal.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/646abff51d38292367bce009d01087c404c4759b/libgo%2Fruntime%2Fgo-signal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/646abff51d38292367bce009d01087c404c4759b/libgo%2Fruntime%2Fgo-signal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-signal.c?ref=646abff51d38292367bce009d01087c404c4759b", "patch": "@@ -133,6 +133,12 @@ sighandler (int sig)\n     {\n       sigset_t clear;\n \n+      if (__sync_bool_compare_and_swap (&m->mallocing, 1, 1))\n+\t{\n+\t  fprintf (stderr, \"caught signal while mallocing: %s\\n\", msg);\n+\t  __go_assert (0);\n+\t}\n+\n       /* The signal handler blocked signals; unblock them.  */\n       i = sigfillset (&clear);\n       __go_assert (i == 0);"}]}