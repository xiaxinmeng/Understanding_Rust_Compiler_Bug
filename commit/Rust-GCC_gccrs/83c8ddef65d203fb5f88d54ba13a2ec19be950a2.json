{"sha": "83c8ddef65d203fb5f88d54ba13a2ec19be950a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODNjOGRkZWY2NWQyMDNmYjVmODhkNTRiYTEzYTJlYzE5YmU5NTBhMg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "1998-01-25T22:14:54Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-01-25T22:14:54Z"}, "message": "* toplev.c (get_run_time): Make sure each case gets its variables.\n\nFrom-SVN: r17484", "tree": {"sha": "f84fd5f4b3afd5918db538a0da9c56f13e945c24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f84fd5f4b3afd5918db538a0da9c56f13e945c24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/83c8ddef65d203fb5f88d54ba13a2ec19be950a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83c8ddef65d203fb5f88d54ba13a2ec19be950a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83c8ddef65d203fb5f88d54ba13a2ec19be950a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83c8ddef65d203fb5f88d54ba13a2ec19be950a2/comments", "author": null, "committer": null, "parents": [{"sha": "db81d74a81ff11aac0c707b76bbbd6bd49289fbc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db81d74a81ff11aac0c707b76bbbd6bd49289fbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db81d74a81ff11aac0c707b76bbbd6bd49289fbc"}], "stats": {"total": 53, "additions": 28, "deletions": 25}, "files": [{"sha": "c0c433f8f540fe77212e28bfa2d84db7883a6256", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83c8ddef65d203fb5f88d54ba13a2ec19be950a2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83c8ddef65d203fb5f88d54ba13a2ec19be950a2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=83c8ddef65d203fb5f88d54ba13a2ec19be950a2", "patch": "@@ -1,3 +1,7 @@\n+Sun Jan 25 22:14:28 1998  Richard Henderson  <rth@cygnus.com>\n+\n+\t* toplev.c (get_run_time): Make sure each case gets its variables.\n+\n Sun Jan 25 22:10:21 1998  Richard Henderson  <rth@cygnus.com>\n \n \t* configure.in (build_xm_file): Add auto-config.h if host=build."}, {"sha": "fbdbc41712d4d7db3f71807d941b63a22ead0d18", "filename": "gcc/toplev.c", "status": "modified", "additions": 24, "deletions": 25, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83c8ddef65d203fb5f88d54ba13a2ec19be950a2/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83c8ddef65d203fb5f88d54ba13a2ec19be950a2/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=83c8ddef65d203fb5f88d54ba13a2ec19be950a2", "patch": "@@ -994,26 +994,9 @@ int dump_time;\n int\n get_run_time ()\n {\n-#if !defined (_WIN32) || defined (__CYGWIN32__)\n-#ifdef USG\n-  struct tms tms;\n-#else\n-#ifndef VMS\n-  struct rusage rusage;\n-#else\n-  struct\n-    {\n-      int proc_user_time;\n-      int proc_system_time;\n-      int child_user_time;\n-      int child_system_time;\n-    } vms_times;\n-#endif\n-#endif\n-#endif\n-\n   if (quiet_flag)\n     return 0;\n+\n #ifdef __BEOS__\n   return 0;\n #else /* not BeOS */\n@@ -1026,23 +1009,39 @@ get_run_time ()\n #ifdef _SC_CLK_TCK\n   {\n     static int tick;\n+    struct tms tms;\n     if (tick == 0)\n       tick = 1000000 / sysconf(_SC_CLK_TCK);\n     times (&tms);\n     return (tms.tms_utime + tms.tms_stime) * tick;\n   }\n #else\n #ifdef USG\n-  times (&tms);\n-  return (tms.tms_utime + tms.tms_stime) * (1000000 / HZ);\n+  {\n+    struct tms tms;\n+    times (&tms);\n+    return (tms.tms_utime + tms.tms_stime) * (1000000 / HZ);\n+  }\n #else\n #ifndef VMS\n-  getrusage (0, &rusage);\n-  return (rusage.ru_utime.tv_sec * 1000000 + rusage.ru_utime.tv_usec\n-\t  + rusage.ru_stime.tv_sec * 1000000 + rusage.ru_stime.tv_usec);\n+  {\n+    struct rusage rusage;\n+    getrusage (0, &rusage);\n+    return (rusage.ru_utime.tv_sec * 1000000 + rusage.ru_utime.tv_usec\n+\t    + rusage.ru_stime.tv_sec * 1000000 + rusage.ru_stime.tv_usec);\n+  }\n #else /* VMS */\n-  times ((void *) &vms_times);\n-  return (vms_times.proc_user_time + vms_times.proc_system_time) * 10000;\n+  {\n+    struct\n+      {\n+        int proc_user_time;\n+        int proc_system_time;\n+        int child_user_time;\n+        int child_system_time;\n+      } vms_times;\n+    times ((void *) &vms_times);\n+    return (vms_times.proc_user_time + vms_times.proc_system_time) * 10000;\n+  }\n #endif\t/* VMS */\n #endif\t/* USG */\n #endif  /* _SC_CLK_TCK */"}]}