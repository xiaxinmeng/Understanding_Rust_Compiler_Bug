{"sha": "844be113d35abc450a43098c47641c81bde1036a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODQ0YmUxMTNkMzVhYmM0NTBhNDMwOThjNDc2NDFjODFiZGUxMDM2YQ==", "commit": {"author": {"name": "Alexander Ivchenko", "email": "alexander.ivchenko@intel.com", "date": "2013-07-29T06:05:34Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2013-07-29T06:05:34Z"}, "message": "target-supports.exp (check_effective_target_non_bionic): New effective-target test.\n\n        * lib/target-supports.exp (check_effective_target_non_bionic): New\n        effective-target test.\n        * g++.dg/tls/thread_local4.C: Disable test for Bionic.\n        * g++.dg/tls/thread_local4g.C: Ditto.\n\n\nCo-Authored-By: Maxim Kuvyrkov <maxim@kugelworks.com>\n\nFrom-SVN: r201298", "tree": {"sha": "08d78373a0268d8038024eedb42eabfa5946ce8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08d78373a0268d8038024eedb42eabfa5946ce8c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/844be113d35abc450a43098c47641c81bde1036a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/844be113d35abc450a43098c47641c81bde1036a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/844be113d35abc450a43098c47641c81bde1036a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/844be113d35abc450a43098c47641c81bde1036a/comments", "author": null, "committer": null, "parents": [{"sha": "afbc84993c14807de70780ddb603990a88bf95ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afbc84993c14807de70780ddb603990a88bf95ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afbc84993c14807de70780ddb603990a88bf95ab"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "8082e4a159c000d986479db83bb7a7c620f58328", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=844be113d35abc450a43098c47641c81bde1036a", "patch": "@@ -1,3 +1,11 @@\n+2013-07-29  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n+\t    Maxim Kuvyrkov  <maxim@kugelworks.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_non_bionic): New\n+\teffective-target test.\n+\t* g++.dg/tls/thread_local4.C: Disable test for Bionic.\n+\t* g++.dg/tls/thread_local4g.C: Ditto.\n+\n 2013-07-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/58009"}, {"sha": "24f2de6ff1cb4fbb0acd3c04b147c3c161c01644", "filename": "gcc/testsuite/g++.dg/tls/thread_local4.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fthread_local4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fthread_local4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fthread_local4.C?ref=844be113d35abc450a43098c47641c81bde1036a", "patch": "@@ -4,6 +4,7 @@\n // { dg-require-effective-target c++11 }\n // { dg-require-effective-target tls_runtime }\n // { dg-require-effective-target pthread }\n+// { dg-require-effective-target non_bionic }\n // { dg-options -pthread }\n // { dg-add-options tls }\n "}, {"sha": "f6a5d4c5b69ce65c14c8a793ebe4d16a41c5e609", "filename": "gcc/testsuite/g++.dg/tls/thread_local4g.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fthread_local4g.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fthread_local4g.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fthread_local4g.C?ref=844be113d35abc450a43098c47641c81bde1036a", "patch": "@@ -4,6 +4,7 @@\n // { dg-require-effective-target c++11 }\n // { dg-require-effective-target tls_runtime }\n // { dg-require-effective-target pthread }\n+// { dg-require-effective-target non_bionic }\n // { dg-require-cxa-atexit \"\" }\n // { dg-options -pthread }\n // { dg-add-options tls }"}, {"sha": "0fb135c529870b5807ed078e7dd823cf22a383ec", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/844be113d35abc450a43098c47641c81bde1036a/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=844be113d35abc450a43098c47641c81bde1036a", "patch": "@@ -4637,6 +4637,17 @@ proc check_effective_target_newlib {} {\n     }]\n }\n \n+# Return true if this is NOT a Bionic target.\n+\n+proc check_effective_target_non_bionic {} {\n+    return [check_no_compiler_messages non_bionic object {\n+\t#include <ctype.h>\n+\t#if defined (__BIONIC__)\n+\t#error FOO\n+\t#endif\n+    }]\n+}\n+\n # Return 1 if\n #   (a) an error of a few ULP is expected in string to floating-point\n #       conversion functions; and"}]}