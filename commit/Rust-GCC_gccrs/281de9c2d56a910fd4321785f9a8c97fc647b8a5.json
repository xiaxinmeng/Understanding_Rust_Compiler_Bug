{"sha": "281de9c2d56a910fd4321785f9a8c97fc647b8a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjgxZGU5YzJkNTZhOTEwZmQ0MzIxNzg1ZjlhOGM5N2ZjNjQ3YjhhNQ==", "commit": {"author": {"name": "Steven Munroe", "email": "munroesj@gcc.gnu.org", "date": "2017-08-24T17:46:01Z"}, "committer": {"name": "Steven Munroe", "email": "munroesj@gcc.gnu.org", "date": "2017-08-24T17:46:01Z"}, "message": "Adds the powerpc equivalent mm_malloc.h header which is needed by xmmintrin.h...\n\nAdds the powerpc equivalent mm_malloc.h header which is needed by\nxmmintrin.h and cleans up some noisy warnings from the previous MMX\ncommit.\n\nFrom-SVN: r251339", "tree": {"sha": "938e749ad59c239b7a43e5ca6a788bc81da4cfd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/938e749ad59c239b7a43e5ca6a788bc81da4cfd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/281de9c2d56a910fd4321785f9a8c97fc647b8a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/281de9c2d56a910fd4321785f9a8c97fc647b8a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/281de9c2d56a910fd4321785f9a8c97fc647b8a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/281de9c2d56a910fd4321785f9a8c97fc647b8a5/comments", "author": null, "committer": null, "parents": [{"sha": "10bfe16f97e9d25a748c563c14802a7c29b4f546", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10bfe16f97e9d25a748c563c14802a7c29b4f546", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10bfe16f97e9d25a748c563c14802a7c29b4f546"}], "stats": {"total": 73, "additions": 73, "deletions": 0}, "files": [{"sha": "93ad528214bbd91f008fed22600e69c6d7b5b452", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=281de9c2d56a910fd4321785f9a8c97fc647b8a5", "patch": "@@ -1,3 +1,7 @@\n+2017-08-24  Steven Munroe  <munroesj@gcc.gnu.org>\n+\n+\t* config/rs6000/mm_malloc.h: New file.\n+\n 2017-08-24  Bin Cheng  <bin.cheng@arm.com>\n \n \tPR tree-optimization/81913"}, {"sha": "a4115e6d788735630f09b83f0d350d3ed1ab947e", "filename": "gcc/config/rs6000/mm_malloc.h", "status": "added", "additions": 62, "deletions": 0, "changes": 62, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2Fconfig%2Frs6000%2Fmm_malloc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2Fconfig%2Frs6000%2Fmm_malloc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fmm_malloc.h?ref=281de9c2d56a910fd4321785f9a8c97fc647b8a5", "patch": "@@ -0,0 +1,62 @@\n+/* Copyright (C) 2004-2017 Free Software Foundation, Inc.\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   GCC is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+\n+   Under Section 7 of GPL version 3, you are granted additional\n+   permissions described in the GCC Runtime Library Exception, version\n+   3.1, as published by the Free Software Foundation.\n+\n+   You should have received a copy of the GNU General Public License and\n+   a copy of the GCC Runtime Library Exception along with this program;\n+   see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#ifndef _MM_MALLOC_H_INCLUDED\n+#define _MM_MALLOC_H_INCLUDED\n+\n+#include <stdlib.h>\n+\n+/* We can't depend on <stdlib.h> since the prototype of posix_memalign\n+   may not be visible.  */\n+#ifndef __cplusplus\n+extern int posix_memalign (void **, size_t, size_t);\n+#else\n+extern \"C\" int posix_memalign (void **, size_t, size_t) throw ();\n+#endif\n+\n+static __inline void *\n+_mm_malloc (size_t size, size_t alignment)\n+{\n+  /* PowerPC64 ELF V2 ABI requires quadword alignment.  */\n+  size_t vec_align = sizeof (__vector float);\n+  /* Linux GLIBC malloc alignment is at least 2 X ptr size.  */\n+  size_t malloc_align = (sizeof (void *) + sizeof (void *));\n+  void *ptr;\n+\n+  if (alignment == malloc_align && alignment == vec_align)\n+    return malloc (size);\n+  if (alignment < vec_align)\n+    alignment = vec_align;\n+  if (posix_memalign (&ptr, alignment, size) == 0)\n+    return ptr;\n+  else\n+    return NULL;\n+}\n+\n+static __inline void\n+_mm_free (void * ptr)\n+{\n+  free (ptr);\n+}\n+\n+#endif /* _MM_MALLOC_H_INCLUDED */"}, {"sha": "7ea691980029809c74cbcb405ec585b74e9a7652", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=281de9c2d56a910fd4321785f9a8c97fc647b8a5", "patch": "@@ -1,3 +1,8 @@\n+2017-08-24  Steven Munroe  <munroesj@gcc.gnu.org>\n+\n+\t* gcc.target/powerpc/mmx-packuswb-1.c [NO_WARN_X86_INTRINSICS]:\n+\tDefine.  Suppress warning during tests.\n+\n 2017-08-24  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* lib/target-supports.exp: Group together target-dependant checks."}, {"sha": "de8ff5bc7a4362b17f3cf3b52260ab01d4db0e09", "filename": "gcc/testsuite/gcc.target/powerpc/mmx-packuswb-1.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fmmx-packuswb-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/281de9c2d56a910fd4321785f9a8c97fc647b8a5/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fmmx-packuswb-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fmmx-packuswb-1.c?ref=281de9c2d56a910fd4321785f9a8c97fc647b8a5", "patch": "@@ -3,6 +3,8 @@\n /* { dg-require-effective-target lp64 } */\n /* { dg-require-effective-target p8vector_hw } */\n \n+#define NO_WARN_X86_INTRINSICS 1\n+\n #ifndef CHECK_H\n #define CHECK_H \"mmx-check.h\"\n #endif"}]}