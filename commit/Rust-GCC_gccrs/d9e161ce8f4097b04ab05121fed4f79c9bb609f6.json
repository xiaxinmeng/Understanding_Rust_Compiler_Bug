{"sha": "d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDllMTYxY2U4ZjQwOTdiMDRhYjA1MTIxZmVkNGY3OWM5YmI2MDlmNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2007-09-08T10:02:28Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2007-09-08T10:02:28Z"}, "message": "decl.c (make_packable_type): If the new type has been given BLKmode, try again to get an integral mode for it.\n\n\t* decl.c (make_packable_type): If the new type has been given BLKmode,\n\ttry again to get an integral mode for it.\n\nFrom-SVN: r128266", "tree": {"sha": "a6ea51cc23507f13421159b63f8269f06f0fb1da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6ea51cc23507f13421159b63f8269f06f0fb1da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/comments", "author": null, "committer": null, "parents": [{"sha": "dab1260138c4b5347270ecd535428116b2acab72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dab1260138c4b5347270ecd535428116b2acab72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dab1260138c4b5347270ecd535428116b2acab72"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "e23d6b813c797b4c949c7091fbd8bfcc538b3cc0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "patch": "@@ -1,3 +1,8 @@\n+2007-09-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* decl.c (make_packable_type): If the new type has been given BLKmode,\n+\ttry again to get an integral mode for it.\n+\n 2007-09-07  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tRe-apply accidentally reverted change:"}, {"sha": "7a01327c8652236db68ada20418d9e8619e3bfc9", "filename": "gcc/ada/decl.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Fada%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Fada%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fdecl.c?ref=d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "patch": "@@ -5218,6 +5218,13 @@ make_packable_type (tree type)\n \n   finish_record_type (new_type, nreverse (field_list), 1, true);\n   copy_alias_set (new_type, type);\n+\n+  /* Try harder to get a packable type if necessary, for example\n+     in case the record itself contains a BLKmode field.  */\n+  if (TYPE_MODE (new_type) == BLKmode)\n+    TYPE_MODE (new_type)\n+      = mode_for_size_tree (TYPE_SIZE (new_type), MODE_INT, 1);\n+\n   return TYPE_MODE (new_type) == BLKmode ? type : new_type;\n }\n \f"}, {"sha": "dd0a5285570879caed5d14ed275c1bc5170173bb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "patch": "@@ -1,3 +1,7 @@\n+2007-09-08  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/unaligned_rep_clause.adb: New testcase.\n+\n 2007-09-08  Dorit Nuzman  <dorit@il.ibm.com>\n \n \tPR tree-optimization/33301"}, {"sha": "b25c62ee9e7be6c8247643168ebc1dd1173b0b64", "filename": "gcc/testsuite/gnat.dg/unaligned_rep_clause.adb", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Ftestsuite%2Fgnat.dg%2Funaligned_rep_clause.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9e161ce8f4097b04ab05121fed4f79c9bb609f6/gcc%2Ftestsuite%2Fgnat.dg%2Funaligned_rep_clause.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Funaligned_rep_clause.adb?ref=d9e161ce8f4097b04ab05121fed4f79c9bb609f6", "patch": "@@ -0,0 +1,35 @@\n+procedure Unaligned_Rep_Clause is\n+\n+   type One_Bit_Record is\n+      record\n+         B : Boolean;\n+      end record;\n+   Pragma Pack(One_Bit_Record);\n+\n+   subtype Version_Number_Type is String (1 .. 3);\n+\n+   type Inter is\n+      record\n+         Version : Version_Number_Type;\n+      end record;\n+\n+   type Msg_Type is\n+      record\n+         Status  : One_Bit_Record;\n+         Version : Inter;\n+      end record;\n+\n+   for Msg_Type use\n+      record\n+         Status  at 0 range 0 .. 0;\n+         Version at 0 range 1 .. 24;\n+      end record;\n+   for Msg_Type'Size use 25;\n+\n+   Data : Msg_Type;\n+   Pragma Warnings (Off, Data);\n+   Version : Inter;\n+\n+begin\n+   Version := Data.Version;\n+end;"}]}