{"sha": "431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDMxYjFlZTBlMDAzNDVkZGEwYmY0YjhkMmI2MGVhN2Q1ZTZmZWVhYg==", "commit": {"author": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1992-07-07T19:58:52Z"}, "committer": {"name": "Torbjorn Granlund", "email": "tege@gnu.org", "date": "1992-07-07T19:58:52Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r1504", "tree": {"sha": "2714ddc20da697d1d08c5c1bd09396268ed7d9f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2714ddc20da697d1d08c5c1bd09396268ed7d9f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab/comments", "author": null, "committer": null, "parents": [{"sha": "ab49538861468caa8bb7d1cd6df050e614ffab1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab49538861468caa8bb7d1cd6df050e614ffab1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab49538861468caa8bb7d1cd6df050e614ffab1c"}], "stats": {"total": 102, "additions": 101, "deletions": 1}, "files": [{"sha": "8c70133dd895e69fadaa2d72cac6daa227255612", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 101, "deletions": 1, "changes": 102, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=431b1ee0e00345dda0bf4b8d2b60ea7d5e6feeab", "patch": "@@ -92,7 +92,7 @@ typedef union\n   DItype ll;\n } DIunion;\n \n-#if defined (L_udivmoddi4) || defined (L_muldi3)\n+#if defined (L_udivmoddi4) || defined (L_muldi3) || defined (L_udiv_using_sdiv)\n \n #include \"longlong.h\"\n \n@@ -269,6 +269,106 @@ __muldi3 (u, v)\n }\n #endif\n \f\n+#ifdef L_udiv_using_sdiv\n+USItype\n+__udiv_using_sdiv (rp, a1, a0, d)\n+     USItype *rp, a1, a0, d;\n+{\n+  USItype q, r;\n+  USItype c0, c1, b1;\n+\n+  if ((SItype) d >= 0)\n+    {\n+      if (a1 < d - a1 - (a0 >> 31))\n+\t{\n+\t  /* dividend, divisor, and quotient are nonnegative */\n+\t  sdiv_qrnnd (q, r, a1, a0, d);\n+\t}\n+      else\n+\t{\n+\t  /* Compute c1*2^32 + c0 = a1*2^32 + a0 - 2^31*d */\n+\t  sub_ddmmss (c1, c0, a1, a0, d >> 1, d << 31);\n+\t  /* Divide (c1*2^32 + c0) by d */\n+\t  sdiv_qrnnd (q, r, c1, c0, d);\n+\t  /* Add 2^31 to quotient */\n+\t  q += 1 << 31;\n+\t}\n+    }\n+  else\n+    {\n+      b1 = d >> 1;\t\t\t/* d/2, between 2^30 and 2^31 - 1 */\n+      c1 = a1 >> 1;\t\t\t/* A/2 */\n+      c0 = (a1 << 31) + (a0 >> 1);\n+\n+      if (a1 < b1)\t\t\t/* A < 2^32*b1, so A/2 < 2^31*b1 */\n+\t{\n+\t  sdiv_qrnnd (q, r, c1, c0, b1); /* (A/2) / (d/2) */\n+\n+\t  r = 2*r + (a0 & 1);\t\t/* Remainder from A/(2*b1) */\n+\t  if ((d & 1) != 0)\n+\t    {\n+\t      if (r >= q)\n+\t\tr = r - q;\n+\t      else if (q - r <= d)\n+\t\t{\n+\t\t  r = r - q + d;\n+\t\t  q--;\n+\t\t}\n+\t      else\n+\t\t{\n+\t\t  r = r - q + 2*d;\n+\t\t  q -= 2;\n+\t\t}\n+\t    }\n+\t}\n+      else if (c1 < b1)\t\t\t/* So 2^31 <= (A/2)/b1 < 2^32 */\n+\t{\n+\t  c1 = (b1 - 1) - c1;\n+\t  c0 = ~c0;\t\t\t/* logical NOT */\n+\n+\t  sdiv_qrnnd (q, r, c1, c0, b1); /* (A/2) / (d/2) */\n+\n+\t  q = ~q;\t\t\t/* (A/2)/b1 */\n+\t  r = (b1 - 1) - r;\n+\n+\t  r = 2*r + (a0 & 1);\t\t/* A/(2*b1) */\n+\n+\t  if ((d & 1) != 0)\n+\t    {\n+\t      if (r >= q)\n+\t\tr = r - q;\n+\t      else if (q - r <= d)\n+\t\t{\n+\t\t  r = r - q + d;\n+\t\t  q--;\n+\t\t}\n+\t      else\n+\t\t{\n+\t\t  r = r - q + 2*d;\n+\t\t  q -= 2;\n+\t\t}\n+\t    }\n+\t}\n+      else\t\t\t\t/* Implies c1 = b1 */\n+\t{\t\t\t\t/* Hence a1 = d - 1 = 2*b1 - 1 */\n+\t  if (a0 >= -d)\n+\t    {\n+\t      q = -1;\n+\t      r = a0 + d;\n+\t    }\n+\t  else\n+\t    {\n+\t      q = -2;\n+\t      r = a0 + 2*d;\n+\t    }\n+\t}\n+    }\n+\n+  *rp = r;\n+  return q;\n+}\n+#endif\n+\f\n #ifdef L_udivmoddi4\n static const UQItype __clz_tab[] =\n {"}]}