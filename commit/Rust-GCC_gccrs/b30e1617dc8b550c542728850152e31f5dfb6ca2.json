{"sha": "b30e1617dc8b550c542728850152e31f5dfb6ca2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMwZTE2MTdkYzhiNTUwYzU0MjcyODg1MDE1MmUzMWY1ZGZiNmNhMg==", "commit": {"author": {"name": "Dale Johannesen", "email": "dalej@apple.com", "date": "2004-02-27T23:48:00Z"}, "committer": {"name": "Dale Johannesen", "email": "dalej@gcc.gnu.org", "date": "2004-02-27T23:48:00Z"}, "message": "darwin.c (machopic_output_possible_stub_label): Remove.\n\n\n2004-02-27  Dale Johannesen  <dalej@apple.com>\n        * config/darwin.c (machopic_output_possible_stub_label):  Remove.\n        config/darwin-protos.h:  Ditto.\n        config/darwin.h:  Remove call to it.\n        * combine.c (distribute_notes): Do not place a REG_DEAD note\n        when value is both set and used.\n\nFrom-SVN: r78590", "tree": {"sha": "5864d75205e934d178070eec26d0d98f19e99fe8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5864d75205e934d178070eec26d0d98f19e99fe8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b30e1617dc8b550c542728850152e31f5dfb6ca2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30e1617dc8b550c542728850152e31f5dfb6ca2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b30e1617dc8b550c542728850152e31f5dfb6ca2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b30e1617dc8b550c542728850152e31f5dfb6ca2/comments", "author": null, "committer": null, "parents": [{"sha": "bbc51dc29f2e78be13e4631172d3c1bd05405249", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbc51dc29f2e78be13e4631172d3c1bd05405249", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bbc51dc29f2e78be13e4631172d3c1bd05405249"}], "stats": {"total": 63, "additions": 12, "deletions": 51}, "files": [{"sha": "59930057fd7b44826adfd0729e0cd648ed701812", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b30e1617dc8b550c542728850152e31f5dfb6ca2", "patch": "@@ -1,3 +1,10 @@\n+2004-02-27  Dale Johannesen  <dalej@apple.com>\n+\t* config/darwin.c (machopic_output_possible_stub_label):  Remove.\n+\tconfig/darwin-protos.h:  Ditto.\n+\tconfig/darwin.h:  Remove call to it.\n+\t* combine.c (distribute_notes): Do not place a REG_DEAD note\n+\twhen value is both set and used.\n+\n 2004-02-27  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/fixunssfsi.c (__fixunssfsi): Enable on H8/300"}, {"sha": "e6656e0671f9c79fa148dc90505f753ca13e9b79", "filename": "gcc/combine.c", "status": "modified", "additions": 5, "deletions": 15, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=b30e1617dc8b550c542728850152e31f5dfb6ca2", "patch": "@@ -12729,26 +12729,16 @@ distribute_notes (rtx notes, rtx from_insn, rtx i3, rtx i2)\n \t\t\t    }\n #endif\n \t\t\t}\n-\t\t      /* If the register is both set and used here, put the\n-\t\t\t REG_DEAD note here, but place a REG_UNUSED note\n-\t\t\t here too unless there already is one.  */\n-\t\t      else if (reg_referenced_p (XEXP (note, 0),\n-\t\t\t\t\t\t PATTERN (tem)))\n-\t\t\t{\n-\t\t\t  place = tem;\n-\n-\t\t\t  if (! find_regno_note (tem, REG_UNUSED,\n-\t\t\t\t\t\t REGNO (XEXP (note, 0))))\n-\t\t\t    REG_NOTES (tem)\n-\t\t\t      = gen_rtx_EXPR_LIST (REG_UNUSED, XEXP (note, 0),\n-\t\t\t\t\t\t   REG_NOTES (tem));\n-\t\t\t}\n \t\t      else\n \t\t\t{\n \t\t\t  PUT_REG_NOTE_KIND (note, REG_UNUSED);\n \n \t\t\t  /*  If there isn't already a REG_UNUSED note, put one\n-\t\t\t      here.  */\n+\t\t\t      here.  Do not place a REG_DEAD note, even if\n+\t\t\t      the register is also used here; that would not\n+\t\t\t      match the algorithm used in lifetime analysis\n+\t\t\t      and can cause the consistency check in the\n+\t\t\t      scheduler to fail.  */\n \t\t\t  if (! find_regno_note (tem, REG_UNUSED,\n \t\t\t\t\t\t REGNO (XEXP (note, 0))))\n \t\t\t    place = tem;"}, {"sha": "28660339488d6deb0b65ff23fca91355d49afb0a", "filename": "gcc/config/darwin-protos.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fconfig%2Fdarwin-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fconfig%2Fdarwin-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin-protos.h?ref=b30e1617dc8b550c542728850152e31f5dfb6ca2", "patch": "@@ -65,8 +65,6 @@ extern const char *darwin_strip_name_encoding (const char *);\n \n extern void machopic_finish (FILE *);\n \n-extern void machopic_output_possible_stub_label (FILE *, const char*);\n-\n extern void darwin_exception_section (void);\n extern void darwin_eh_frame_section (void);\n extern void machopic_select_section (tree, int, unsigned HOST_WIDE_INT);"}, {"sha": "87523fe6b9e7754b0799571d0244ab34e8211e85", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 0, "deletions": 31, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=b30e1617dc8b550c542728850152e31f5dfb6ca2", "patch": "@@ -1096,37 +1096,6 @@ update_non_lazy_ptrs (const char *name)\n     }\n }\n \n-/* Function NAME is being defined, and its label has just been output.\n-   If there's already a reference to a stub for this function, we can\n-   just emit the stub label now and we don't bother emitting the stub later.  */\n-\n-void\n-machopic_output_possible_stub_label (FILE *file, const char *name)\n-{\n-  tree temp;\n-\n-  /* Ensure we're looking at a section-encoded name.  */\n-  if (name[0] != '!' || (name[1] != 't' && name[1] != 'T'))\n-    return;\n-\n-  for (temp = machopic_stubs;\n-       temp != NULL_TREE;\n-       temp = TREE_CHAIN (temp))\n-    {\n-      const char *sym_name;\n-\n-      sym_name = IDENTIFIER_POINTER (TREE_VALUE (temp));\n-      if (sym_name[0] == '!' && (sym_name[1] == 'T' || sym_name[1] == 't')\n-\t  && ! strcmp (name+2, sym_name+2))\n-\t{\n-\t  ASM_OUTPUT_LABEL (file, IDENTIFIER_POINTER (TREE_PURPOSE (temp)));\n-\t  /* Avoid generating a stub for this.  */\n-\t  TREE_USED (temp) = 0;\n-\t  break;\n-\t}\n-    }\n-}\n-\n /* Scan the list of stubs and update any recorded names whose\n    stripped name matches the argument.  */\n "}, {"sha": "83c7a8c8bdf18296020b621489e397df58332070", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b30e1617dc8b550c542728850152e31f5dfb6ca2/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=b30e1617dc8b550c542728850152e31f5dfb6ca2", "patch": "@@ -395,9 +395,6 @@ do { text_section ();\t\t\t\t\t\t\t\\\n         || DECL_INITIAL (DECL))                                         \\\n       (* targetm.encode_section_info) (DECL, DECL_RTL (DECL), false);\t\\\n     ASM_OUTPUT_LABEL (FILE, xname);                                     \\\n-    /* Avoid generating stubs for functions we've just defined by\t\\\n-       outputting any required stub name label now.  */\t\t\t\\\n-    machopic_output_possible_stub_label (FILE, xname);\t\t\t\\\n   } while (0)\n \n #define ASM_DECLARE_CONSTANT_NAME(FILE, NAME, EXP, SIZE)\t\\"}]}