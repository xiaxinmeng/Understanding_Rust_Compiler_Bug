{"sha": "066922e6cd5d48610d0306b3c2e2e73ae9ddbb25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDY2OTIyZTZjZDVkNDg2MTBkMDMwNmIzYzJlMmU3M2FlOWRkYmIyNQ==", "commit": {"author": {"name": "Chung-Lin Tang", "email": "cltang@codesourcery.com", "date": "2012-03-27T13:05:01Z"}, "committer": {"name": "Chung-Lin Tang", "email": "cltang@gcc.gnu.org", "date": "2012-03-27T13:05:01Z"}, "message": "re PR target/52667 (sh_reorg segfault)\n\n2012-03-27  Chung-Lin Tang  <cltang@codesourcery.com>\n\n\tPR target/52667\n\t* config/sh/sh.c (find_barrier): Add equality check of last_got\n\tto avoid going above orig insn. Update comments.\n\nFrom-SVN: r185867", "tree": {"sha": "6f25b957bcdb236a085a54cc45cbfdadf2b5ad9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6f25b957bcdb236a085a54cc45cbfdadf2b5ad9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25/comments", "author": {"login": "cltang", "id": 4055966, "node_id": "MDQ6VXNlcjQwNTU5NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4055966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cltang", "html_url": "https://github.com/cltang", "followers_url": "https://api.github.com/users/cltang/followers", "following_url": "https://api.github.com/users/cltang/following{/other_user}", "gists_url": "https://api.github.com/users/cltang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cltang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cltang/subscriptions", "organizations_url": "https://api.github.com/users/cltang/orgs", "repos_url": "https://api.github.com/users/cltang/repos", "events_url": "https://api.github.com/users/cltang/events{/privacy}", "received_events_url": "https://api.github.com/users/cltang/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "005aa1b4fba54dfc9f8a532ee82a8ac5f7257b9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/005aa1b4fba54dfc9f8a532ee82a8ac5f7257b9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/005aa1b4fba54dfc9f8a532ee82a8ac5f7257b9f"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "876da2511a584dc22a287d68bdf2efd0a8d0a487", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=066922e6cd5d48610d0306b3c2e2e73ae9ddbb25", "patch": "@@ -1,3 +1,9 @@\n+2012-03-27  Chung-Lin Tang  <cltang@codesourcery.com>\n+\n+\tPR target/52667\n+\t* config/sh/sh.c (find_barrier): Add equality check of last_got\n+\tto avoid going above orig insn. Update comments.\n+\n 2012-03-27  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/52720"}, {"sha": "68e6034203c2a2ee2d5a1710b9faa1e92cfe5b7a", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/066922e6cd5d48610d0306b3c2e2e73ae9ddbb25/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=066922e6cd5d48610d0306b3c2e2e73ae9ddbb25", "patch": "@@ -4751,8 +4751,12 @@ find_barrier (int num_mova, rtx mova, rtx from)\n       /* Don't emit a constant table int the middle of global pointer setting,\n \t since that that would move the addressing base GOT into another table. \n \t We need the first mov instruction before the _GLOBAL_OFFSET_TABLE_\n-\t in the pool anyway, so just move up the whole constant pool.  */\n-      if (last_got)\n+\t in the pool anyway, so just move up the whole constant pool.\n+\n+\t However, avoid doing so when the last single GOT mov is the starting\n+\t insn itself. Going past above the start insn would create a negative\n+\t offset, causing errors.  */\n+      if (last_got && last_got != orig)\n         from = PREV_INSN (last_got);\n \n       /* Don't insert the constant pool table at the position which"}]}