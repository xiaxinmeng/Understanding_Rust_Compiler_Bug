{"sha": "08744705c05e5eac1407a340ea03d88f00d2cfbe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDg3NDQ3MDVjMDVlNWVhYzE0MDdhMzQwZWEwM2Q4OGYwMGQyY2ZiZQ==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2003-04-10T19:53:54Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2003-04-10T19:53:54Z"}, "message": "ia64-protos.h (addp4_optimize_ok): New.\n\n\t* ia64-protos.h (addp4_optimize_ok): New.\n\t* ia64.c (addp4_optimize_ok): New.\n\t* ia64.md (*ptr_extend_plus_1): Use addp4_optimize_ok.\n\t(*ptr_extend_plus_2): Ditto.\n\nFrom-SVN: r65435", "tree": {"sha": "ed41c5efcbe4fe54012b732654ab0888a32b1052", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed41c5efcbe4fe54012b732654ab0888a32b1052"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08744705c05e5eac1407a340ea03d88f00d2cfbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08744705c05e5eac1407a340ea03d88f00d2cfbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08744705c05e5eac1407a340ea03d88f00d2cfbe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08744705c05e5eac1407a340ea03d88f00d2cfbe/comments", "author": null, "committer": null, "parents": [{"sha": "267b28bd11e3d35397892c9e65e18f6b98d2532e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/267b28bd11e3d35397892c9e65e18f6b98d2532e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/267b28bd11e3d35397892c9e65e18f6b98d2532e"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "d56304733d13786de130ac1229a3f9c8c8f2aa69", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=08744705c05e5eac1407a340ea03d88f00d2cfbe", "patch": "@@ -1,3 +1,10 @@\n+2003-04-10  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* ia64-protos.h (addp4_optimize_ok): New.\n+\t* ia64.c (addp4_optimize_ok): New.\n+\t* ia64.md (*ptr_extend_plus_1): Use addp4_optimize_ok.\n+\t(*ptr_extend_plus_2): Ditto.\n+\n 2003-04-10  Steve Ellcey  <sje@cup.hp.com>\n \n \t* expr.c (expand_assignment): Extend offset_rtx with convert_to_mode"}, {"sha": "baffb0169c3cbb445dca1acce63a17ac9142b5b0", "filename": "gcc/config/ia64/ia64-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2Fconfig%2Fia64%2Fia64-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2Fconfig%2Fia64%2Fia64-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64-protos.h?ref=08744705c05e5eac1407a340ea03d88f00d2cfbe", "patch": "@@ -76,6 +76,7 @@ extern int basereg_operand PARAMS((rtx, enum machine_mode));\n \n extern rtx ia64_expand_move PARAMS ((rtx, rtx));\n extern int ia64_move_ok PARAMS((rtx, rtx));\n+extern int addp4_optimize_ok PARAMS((rtx, rtx));\n extern void ia64_emit_cond_move PARAMS((rtx, rtx, rtx));\n extern int ia64_depz_field_mask PARAMS((rtx, rtx));\n extern rtx ia64_split_timode PARAMS((rtx[], rtx, rtx));"}, {"sha": "3f867b5d73d218140c1dd0a97ed00395b6d6b990", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=08744705c05e5eac1407a340ea03d88f00d2cfbe", "patch": "@@ -48,6 +48,7 @@ Boston, MA 02111-1307, USA.  */\n #include \"target-def.h\"\n #include \"tm_p.h\"\n #include \"hashtab.h\"\n+#include \"langhooks.h\"\n \n /* This is used for communication between ASM_OUTPUT_LABEL and\n    ASM_OUTPUT_LABELREF.  */\n@@ -1075,6 +1076,21 @@ ia64_move_ok (dst, src)\n     return GET_CODE (src) == CONST_DOUBLE && CONST_DOUBLE_OK_FOR_G (src);\n }\n \n+/* Return 0 if we are doing C++ code.  This optimization fails with\n+   C++ because of GNAT c++/6685.  */\n+\n+int\n+addp4_optimize_ok (op1, op2)\n+     rtx op1, op2;\n+{\n+\n+  if (!strcmp (lang_hooks.name, \"GNU C++\"))\n+    return 0;\n+\n+  return (basereg_operand (op1, GET_MODE(op1)) !=\n+\t  basereg_operand (op2, GET_MODE(op2)));\n+}\n+\n /* Check if OP is a mask suitable for use with SHIFT in a dep.z instruction.\n    Return the length of the field, or <= 0 on failure.  */\n "}, {"sha": "8a503cea539b408f95123e02c007a641bcd2f9b7", "filename": "gcc/config/ia64/ia64.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2Fconfig%2Fia64%2Fia64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08744705c05e5eac1407a340ea03d88f00d2cfbe/gcc%2Fconfig%2Fia64%2Fia64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.md?ref=08744705c05e5eac1407a340ea03d88f00d2cfbe", "patch": "@@ -5469,7 +5469,7 @@\n          [(plus:SI (match_operand:SI 1 \"basereg_operand\" \"r\")\n                    (match_operand:SI 2 \"gr_reg_or_14bit_operand\" \"rI\"))]\n          UNSPEC_ADDP4))]\n-  \"\"\n+  \"addp4_optimize_ok (operands[1], operands[2])\"\n   \"addp4 %0 = %2, %1\"\n   [(set_attr \"itanium_class\" \"ialu\")])\n \n@@ -5479,6 +5479,6 @@\n          [(plus:SI (match_operand:SI 1 \"gr_register_operand\" \"r\")\n                    (match_operand:SI 2 \"basereg_operand\" \"r\"))]\n          UNSPEC_ADDP4))]\n-  \"\"\n+  \"addp4_optimize_ok (operands[1], operands[2])\"\n   \"addp4 %0 = %1, %2\"\n   [(set_attr \"itanium_class\" \"ialu\")])"}]}