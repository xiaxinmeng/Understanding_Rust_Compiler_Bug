{"sha": "15c918bc7645580d6e48fdcab77fc6a2a3347daf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTVjOTE4YmM3NjQ1NTgwZDZlNDhmZGNhYjc3ZmM2YTJhMzM0N2RhZg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-10-26T17:39:07Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-10-26T17:39:07Z"}, "message": "re PR fortran/36192 (ICE with wrong index types and bad parens)\n\n2015-10-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/36192\n\t* array.c (gfc_ref_dimen_size): Check for BT_INTEGER before calling\n\tmpz_set.\n\n\n2015-10-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/36192\n\t* gfortran.dg/pr36192.f90: New test.\n\nFrom-SVN: r229387", "tree": {"sha": "c99ee7a2d7b43c2b17dd0633706b17ebae54e920", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c99ee7a2d7b43c2b17dd0633706b17ebae54e920"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15c918bc7645580d6e48fdcab77fc6a2a3347daf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15c918bc7645580d6e48fdcab77fc6a2a3347daf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15c918bc7645580d6e48fdcab77fc6a2a3347daf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15c918bc7645580d6e48fdcab77fc6a2a3347daf/comments", "author": null, "committer": null, "parents": [{"sha": "f6c1575958f7bf97c543943f18e7461cb17e43d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6c1575958f7bf97c543943f18e7461cb17e43d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6c1575958f7bf97c543943f18e7461cb17e43d5"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "181545117f64dbefc7203e4d220941cc94913063", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=15c918bc7645580d6e48fdcab77fc6a2a3347daf", "patch": "@@ -1,3 +1,9 @@\n+2015-10-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/36192\n+\t* array.c (gfc_ref_dimen_size): Check for BT_INTEGER before calling\n+\tmpz_set.\n+\n 2015-10-26  Andre Vehreschild  <vehre@gcc.gnu.org>\n \n \tPR fortran/66927"}, {"sha": "940eeafd7b6ce7828103b0b59814c362bd577977", "filename": "gcc/fortran/array.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ffortran%2Farray.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ffortran%2Farray.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farray.c?ref=15c918bc7645580d6e48fdcab77fc6a2a3347daf", "patch": "@@ -2208,7 +2208,8 @@ gfc_ref_dimen_size (gfc_array_ref *ar, int dimen, mpz_t *result, mpz_t *end)\n       if (ar->start[dimen] == NULL)\n \t{\n \t  if (ar->as->lower[dimen] == NULL\n-\t      || ar->as->lower[dimen]->expr_type != EXPR_CONSTANT)\n+\t      || ar->as->lower[dimen]->expr_type != EXPR_CONSTANT\n+\t      || ar->as->lower[dimen]->ts.type != BT_INTEGER)\n \t    goto cleanup;\n \t  mpz_set (lower, ar->as->lower[dimen]->value.integer);\n \t}\n@@ -2222,7 +2223,8 @@ gfc_ref_dimen_size (gfc_array_ref *ar, int dimen, mpz_t *result, mpz_t *end)\n       if (ar->end[dimen] == NULL)\n \t{\n \t  if (ar->as->upper[dimen] == NULL\n-\t      || ar->as->upper[dimen]->expr_type != EXPR_CONSTANT)\n+\t      || ar->as->upper[dimen]->expr_type != EXPR_CONSTANT\n+\t      || ar->as->upper[dimen]->ts.type != BT_INTEGER)\n \t    goto cleanup;\n \t  mpz_set (upper, ar->as->upper[dimen]->value.integer);\n \t}"}, {"sha": "c0f8b0dbf64e81ca923732641514537cd449434e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=15c918bc7645580d6e48fdcab77fc6a2a3347daf", "patch": "@@ -1,3 +1,8 @@\n+2015-10-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/36192\n+\t* gfortran.dg/pr36192.f90: New test.\n+\n 2015-10-26  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc.dg/atomic-noinline.c: Change test on __atomic_is_lock_free."}, {"sha": "df3bfd75f2434d94c9f0526ebb47a38e7e718f4e", "filename": "gcc/testsuite/gfortran.dg/pr36192.f90", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr36192.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c918bc7645580d6e48fdcab77fc6a2a3347daf/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr36192.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr36192.f90?ref=15c918bc7645580d6e48fdcab77fc6a2a3347daf", "patch": "@@ -0,0 +1,9 @@\n+! { dg-do compile }\n+! PR fortran/36192.f90\n+!\n+program three_body\n+  real, parameter :: n = 2, d = 2\n+  real, dimension(n,d) :: x      ! { dg-error \"of INTEGER type|of INTEGER type\" }\n+  x(1,:) = (/ 1.0, 0.0 /)\n+end program three_body\n+! { dg-prune-output \"have constant shape\" }"}]}