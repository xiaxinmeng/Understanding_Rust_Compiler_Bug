{"sha": "e6dc3aa0ee1e616a385d12371a6965ab83b2238b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTZkYzNhYTBlZTFlNjE2YTM4NWQxMjM3MWE2OTY1YWI4M2IyMjM4Yg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-11-28T18:09:26Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-11-28T18:09:26Z"}, "message": "doloop.c (doloop_modify_runtime): Properly select induction variable...\n\n        * doloop.c (doloop_modify_runtime): Properly select induction\n        variable; skip late entry test if biv initializer created by loop.\n\nFrom-SVN: r47423", "tree": {"sha": "ac2618577cfde9967a56e67bf26ecd32a0196efc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac2618577cfde9967a56e67bf26ecd32a0196efc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e6dc3aa0ee1e616a385d12371a6965ab83b2238b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6dc3aa0ee1e616a385d12371a6965ab83b2238b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6dc3aa0ee1e616a385d12371a6965ab83b2238b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6dc3aa0ee1e616a385d12371a6965ab83b2238b/comments", "author": null, "committer": null, "parents": [{"sha": "969ff1a01916ab79390cf9302bb8db63483bf0e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/969ff1a01916ab79390cf9302bb8db63483bf0e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/969ff1a01916ab79390cf9302bb8db63483bf0e7"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "0407789369711bfd49f48747904efaa5c0cf159b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6dc3aa0ee1e616a385d12371a6965ab83b2238b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6dc3aa0ee1e616a385d12371a6965ab83b2238b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e6dc3aa0ee1e616a385d12371a6965ab83b2238b", "patch": "@@ -1,3 +1,8 @@\n+2001-11-28  Richard Henderson  <rth@redhat.com>\n+\n+\t* doloop.c (doloop_modify_runtime): Properly select induction\n+\tvariable; skip late entry test if biv initializer created by loop.\n+\n Wed Nov 28 08:21:47 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* tree.h (EXPR_WFL_LINECOL): Used by Java in node other than"}, {"sha": "cf50d68509648ce82920b8b8842bbe721736023e", "filename": "gcc/doloop.c", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6dc3aa0ee1e616a385d12371a6965ab83b2238b/gcc%2Fdoloop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6dc3aa0ee1e616a385d12371a6965ab83b2238b/gcc%2Fdoloop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoloop.c?ref=e6dc3aa0ee1e616a385d12371a6965ab83b2238b", "patch": "@@ -621,11 +621,23 @@ doloop_modify_runtime (loop, iterations_max,\n \n   if (loop->scan_start)\n     {\n+      rtx iteration_var = loop_info->iteration_var;\n       struct loop_ivs *ivs = LOOP_IVS (loop);\n-      struct iv_class *bl\n-\t= REG_IV_CLASS (ivs, REGNO (loop_info->iteration_var));\n+      struct iv_class *bl;\n \n-      if (INSN_LUID (bl->biv->insn) < INSN_LUID (loop->scan_start))\n+      if (REG_IV_TYPE (ivs, REGNO (iteration_var)) == BASIC_INDUCT)\n+\tbl = REG_IV_CLASS (ivs, REGNO (iteration_var));\n+      else if (REG_IV_TYPE (ivs, REGNO (iteration_var)) == GENERAL_INDUCT)\n+\t{\n+\t  struct induction *v = REG_IV_INFO (ivs, REGNO (iteration_var));\n+\t  bl = REG_IV_CLASS (ivs, REGNO (v->src_reg));\n+\t}\n+      else\n+\t/* Iteration var must be an induction variable to get here.  */\n+\tabort();\n+\n+      if (INSN_UID (bl->biv->insn) < max_uid_for_loop\n+\t  && INSN_LUID (bl->biv->insn) < INSN_LUID (loop->scan_start))\n \t{\n \t  if (loop_dump_stream)\n \t    fprintf (loop_dump_stream,"}]}