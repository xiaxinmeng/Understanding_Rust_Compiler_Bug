{"sha": "72ced87475c02fc6d4211a9baa41a8c8bb14ab0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJjZWQ4NzQ3NWMwMmZjNmQ0MjExYTliYWE0MWE4YzhiYjE0YWIwYw==", "commit": {"author": {"name": "Kwok Cheung Yeung", "email": "kcy@codesourcery.com", "date": "2018-09-12T13:53:34Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@gcc.gnu.org", "date": "2018-09-12T13:53:34Z"}, "message": "Fix interleaving of Fortran STOP messages\n\nFortran STOP and ERROR STOP use a different function to print the \"STOP\" string\nand the message string.  On GCN this results in out-of-order output, such as\n\"<msg>ERROR STOP \".\n\nThis patch fixes the problem by making estr_write use the proper Fortran write,\nnot C printf, so both parts are now output the same way.  This also ensures\nthat both parts are output to STDERR (not that that means anything on GCN).\n\n2018-09-12  Kwok Cheung Yeung  <kcy@codesourcery.com>\n\n\tlibgfortran/\n\t* runtime/minimal.c (estr_write): Define in terms of write.\n\nFrom-SVN: r264239", "tree": {"sha": "854875f5b91ae1001d9e908f3f2447010a0ce667", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/854875f5b91ae1001d9e908f3f2447010a0ce667"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c/comments", "author": {"login": "k-yeung", "id": 16960193, "node_id": "MDQ6VXNlcjE2OTYwMTkz", "avatar_url": "https://avatars.githubusercontent.com/u/16960193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-yeung", "html_url": "https://github.com/k-yeung", "followers_url": "https://api.github.com/users/k-yeung/followers", "following_url": "https://api.github.com/users/k-yeung/following{/other_user}", "gists_url": "https://api.github.com/users/k-yeung/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-yeung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-yeung/subscriptions", "organizations_url": "https://api.github.com/users/k-yeung/orgs", "repos_url": "https://api.github.com/users/k-yeung/repos", "events_url": "https://api.github.com/users/k-yeung/events{/privacy}", "received_events_url": "https://api.github.com/users/k-yeung/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "1120d30fd2a695044fce8e209ac2df11ad496cef", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=72ced87475c02fc6d4211a9baa41a8c8bb14ab0c", "patch": "@@ -1,3 +1,7 @@\n+2018-09-12  Kwok Cheung Yeung  <kcy@codesourcery.com>\n+\n+\t* runtime/minimal.c (estr_write): Define in terms of write.\n+\n 2018-09-12  Andrew Stubbs  <ams@codesourcery.com>\n \n \t* runtime/minimal.c (exit): Only work around nvptx bugs on nvptx."}, {"sha": "b6d26fd22288038338cf752df97f285c0f1a6bcc", "filename": "libgfortran/runtime/minimal.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c/libgfortran%2Fruntime%2Fminimal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72ced87475c02fc6d4211a9baa41a8c8bb14ab0c/libgfortran%2Fruntime%2Fminimal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fruntime%2Fminimal.c?ref=72ced87475c02fc6d4211a9baa41a8c8bb14ab0c", "patch": "@@ -196,7 +196,7 @@ sys_abort (void)\n #undef st_printf\n #define st_printf printf\n #undef estr_write\n-#define estr_write printf\n+#define estr_write(X) write(STDERR_FILENO, (X), strlen (X))\n #if __nvptx__\n /* Map \"exit\" to \"abort\"; see PR85463 '[nvptx] \"exit\" in offloaded region\n    doesn't terminate process'.  */"}]}