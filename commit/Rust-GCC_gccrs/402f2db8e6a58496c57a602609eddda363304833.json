{"sha": "402f2db8e6a58496c57a602609eddda363304833", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAyZjJkYjhlNmE1ODQ5NmM1N2E2MDI2MDllZGRkYTM2MzMwNDgzMw==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2009-09-16T22:18:30Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2009-09-16T22:18:30Z"}, "message": "m32c.c (m32c_emit_epilogue): Check for R8C or M16C chip and ignore the \"fast_interrupt\" attribute if so.\n\n* config/m32c/m32c.c (m32c_emit_epilogue): Check for R8C or M16C\nchip and ignore the \"fast_interrupt\" attribute if so.\n\nFrom-SVN: r151780", "tree": {"sha": "741c4169ead4eff9580b64c147fe6354cac9ea2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/741c4169ead4eff9580b64c147fe6354cac9ea2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/402f2db8e6a58496c57a602609eddda363304833", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/402f2db8e6a58496c57a602609eddda363304833", "html_url": "https://github.com/Rust-GCC/gccrs/commit/402f2db8e6a58496c57a602609eddda363304833", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/402f2db8e6a58496c57a602609eddda363304833/comments", "author": null, "committer": null, "parents": [{"sha": "ee3422cf454a833648a34bee99beddb0dea78757", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee3422cf454a833648a34bee99beddb0dea78757", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee3422cf454a833648a34bee99beddb0dea78757"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "bbbc1bb95f7eca41426dbedd4b30998c49629e1a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/402f2db8e6a58496c57a602609eddda363304833/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/402f2db8e6a58496c57a602609eddda363304833/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=402f2db8e6a58496c57a602609eddda363304833", "patch": "@@ -1,3 +1,8 @@\n+2009-09-16  DJ Delorie  <dj@redhat.com>\n+\n+\t* config/m32c/m32c.c (m32c_emit_epilogue): Check for R8C or M16C\n+\tchip and ignore the \"fast_interrupt\" attribute if so.\n+\n 2009-09-16  Richard Henderson  <rth@redhat.com>\n \n \tPR middle-end/41360"}, {"sha": "1bf3d1bcb2f0d4bcf7d543950013492fdf7489c0", "filename": "gcc/config/m32c/m32c.c", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/402f2db8e6a58496c57a602609eddda363304833/gcc%2Fconfig%2Fm32c%2Fm32c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/402f2db8e6a58496c57a602609eddda363304833/gcc%2Fconfig%2Fm32c%2Fm32c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fm32c.c?ref=402f2db8e6a58496c57a602609eddda363304833", "patch": "@@ -4052,8 +4052,26 @@ m32c_emit_epilogue (void)\n       if (!bank_switch_p (cfun->decl) && cfun->machine->intr_pushm)\n \temit_insn (gen_popm (GEN_INT (cfun->machine->intr_pushm)));\n \n+      /* The FREIT (Fast REturn from InTerrupt) instruction should be\n+         generated only for M32C/M32CM targets (generate the REIT\n+         instruction otherwise).  */\n       if (fast_interrupt_p (cfun->decl))\n-\temit_jump_insn (gen_epilogue_freit ());\n+        {\n+          /* Check if fast_attribute is set for M32C or M32CM.  */\n+          if (TARGET_A24)\n+            {\n+              emit_jump_insn (gen_epilogue_freit ());\n+            }\n+          /* If fast_interrupt attribute is set for an R8C or M16C\n+             target ignore this attribute and generated REIT\n+             instruction.  */\n+          else\n+\t    {\n+\t      warning (OPT_Wattributes,\n+\t\t       \"%<fast_interrupt%> attribute directive ignored\");\n+\t      emit_jump_insn (gen_epilogue_reit_16 ());\n+\t    }\n+        }\n       else if (TARGET_A16)\n \temit_jump_insn (gen_epilogue_reit_16 ());\n       else"}]}