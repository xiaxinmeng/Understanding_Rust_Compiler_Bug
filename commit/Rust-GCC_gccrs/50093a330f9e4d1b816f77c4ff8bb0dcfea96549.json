{"sha": "50093a330f9e4d1b816f77c4ff8bb0dcfea96549", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTAwOTNhMzMwZjllNGQxYjgxNmY3N2M0ZmY4YmIwZGNmZWE5NjU0OQ==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2015-05-01T13:19:34Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2015-05-01T13:19:34Z"}, "message": "[AArch64] Make aarch64_min_divisions_for_recip_mul configurable\n\nOn behalf of Wilco Dijkstra\n\n2015-05-01  Wilco Dijkstra  <wdijkstr@arm.com>\n\n\t* gcc/config/aarch64/aarch64-protos.h (tune_params):\n\tAdd min_div_recip_mul_sf and min_div_recip_mul_df fields.\n\t* gcc/config/aarch64/aarch64.c (aarch64_min_divisions_for_recip_mul):\n\tReturn value depending on target.\n\t(generic_tunings): Initialize new target settings.\n\t(cortexa53_tunings): Likewise.\n\t(cortexa57_tunings): Likewise.\n\t(thunderx_tunings): Likewise.\n\t(xgene1_tunings): Likewise.\n\nFrom-SVN: r222679", "tree": {"sha": "0454c045f7a2e18b4854f39126344eedefb2a5a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0454c045f7a2e18b4854f39126344eedefb2a5a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50093a330f9e4d1b816f77c4ff8bb0dcfea96549", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50093a330f9e4d1b816f77c4ff8bb0dcfea96549", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50093a330f9e4d1b816f77c4ff8bb0dcfea96549", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50093a330f9e4d1b816f77c4ff8bb0dcfea96549/comments", "author": null, "committer": null, "parents": [{"sha": "e8b9138291b5070bb7740339e34e8b54cbcc879a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8b9138291b5070bb7740339e34e8b54cbcc879a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8b9138291b5070bb7740339e34e8b54cbcc879a"}], "stats": {"total": 40, "additions": 33, "deletions": 7}, "files": [{"sha": "223eb8b821e0b13e6cbb34b3273b7c00070e31c4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50093a330f9e4d1b816f77c4ff8bb0dcfea96549/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50093a330f9e4d1b816f77c4ff8bb0dcfea96549/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=50093a330f9e4d1b816f77c4ff8bb0dcfea96549", "patch": "@@ -1,3 +1,15 @@\n+2015-05-01  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\t* gcc/config/aarch64/aarch64-protos.h (tune_params):\n+\tAdd min_div_recip_mul_sf and min_div_recip_mul_df fields.\n+\t* gcc/config/aarch64/aarch64.c (aarch64_min_divisions_for_recip_mul):\n+\tReturn value depending on target.\n+\t(generic_tunings): Initialize new target settings.\n+\t(cortexa53_tunings): Likewise.\n+\t(cortexa57_tunings): Likewise.\n+\t(thunderx_tunings): Likewise.\n+\t(xgene1_tunings): Likewise.\n+\n 2015-05-01  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \t* gcc/config/arm/aarch-cost-tables.h (cortexa53_extra_costs):"}, {"sha": "08ce5f1eb1629100844a9ce16769e3e286866904", "filename": "gcc/config/aarch64/aarch64-protos.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50093a330f9e4d1b816f77c4ff8bb0dcfea96549/gcc%2Fconfig%2Faarch64%2Faarch64-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50093a330f9e4d1b816f77c4ff8bb0dcfea96549/gcc%2Fconfig%2Faarch64%2Faarch64-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-protos.h?ref=50093a330f9e4d1b816f77c4ff8bb0dcfea96549", "patch": "@@ -177,6 +177,8 @@ struct tune_params\n   const int int_reassoc_width;\n   const int fp_reassoc_width;\n   const int vec_reassoc_width;\n+  const int min_div_recip_mul_sf;\n+  const int min_div_recip_mul_df;\n };\n \n HOST_WIDE_INT aarch64_initial_elimination_offset (unsigned, unsigned);"}, {"sha": "374b0a951cf1584f613a5613a239c73849ce3813", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 19, "deletions": 7, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50093a330f9e4d1b816f77c4ff8bb0dcfea96549/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50093a330f9e4d1b816f77c4ff8bb0dcfea96549/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=50093a330f9e4d1b816f77c4ff8bb0dcfea96549", "patch": "@@ -354,7 +354,9 @@ static const struct tune_params generic_tunings =\n   4,\t/* loop_align.  */\n   2,\t/* int_reassoc_width.  */\n   4,\t/* fp_reassoc_width.  */\n-  1\t/* vec_reassoc_width.  */\n+  1,\t/* vec_reassoc_width.  */\n+  2,\t/* min_div_recip_mul_sf.  */\n+  2\t/* min_div_recip_mul_df.  */\n };\n \n static const struct tune_params cortexa53_tunings =\n@@ -372,7 +374,9 @@ static const struct tune_params cortexa53_tunings =\n   4,\t/* loop_align.  */\n   2,\t/* int_reassoc_width.  */\n   4,\t/* fp_reassoc_width.  */\n-  1\t/* vec_reassoc_width.  */\n+  1,\t/* vec_reassoc_width.  */\n+  2,\t/* min_div_recip_mul_sf.  */\n+  2\t/* min_div_recip_mul_df.  */\n };\n \n static const struct tune_params cortexa57_tunings =\n@@ -390,7 +394,9 @@ static const struct tune_params cortexa57_tunings =\n   4,\t/* loop_align.  */\n   2,\t/* int_reassoc_width.  */\n   4,\t/* fp_reassoc_width.  */\n-  1\t/* vec_reassoc_width.  */\n+  1,\t/* vec_reassoc_width.  */\n+  2,\t/* min_div_recip_mul_sf.  */\n+  2\t/* min_div_recip_mul_df.  */\n };\n \n static const struct tune_params thunderx_tunings =\n@@ -407,7 +413,9 @@ static const struct tune_params thunderx_tunings =\n   8,\t/* loop_align.  */\n   2,\t/* int_reassoc_width.  */\n   4,\t/* fp_reassoc_width.  */\n-  1\t/* vec_reassoc_width.  */\n+  1,\t/* vec_reassoc_width.  */\n+  2,\t/* min_div_recip_mul_sf.  */\n+  2\t/* min_div_recip_mul_df.  */\n };\n \n static const struct tune_params xgene1_tunings =\n@@ -424,7 +432,9 @@ static const struct tune_params xgene1_tunings =\n   16,\t/* loop_align.  */\n   2,\t/* int_reassoc_width.  */\n   4,\t/* fp_reassoc_width.  */\n-  1\t/* vec_reassoc_width.  */\n+  1,\t/* vec_reassoc_width.  */\n+  2,\t/* min_div_recip_mul_sf.  */\n+  2\t/* min_div_recip_mul_df.  */\n };\n \n /* A processor implementing AArch64.  */\n@@ -513,9 +523,11 @@ static const char * const aarch64_condition_codes[] =\n };\n \n static unsigned int\n-aarch64_min_divisions_for_recip_mul (enum machine_mode mode ATTRIBUTE_UNUSED)\n+aarch64_min_divisions_for_recip_mul (enum machine_mode mode)\n {\n-  return 2;\n+  if (GET_MODE_UNIT_SIZE (mode) == 4)\n+    return aarch64_tune_params->min_div_recip_mul_sf;\n+  return aarch64_tune_params->min_div_recip_mul_df;\n }\n \n static int"}]}