{"sha": "37207ee73dce7e537637606d3b4e7fc9852522d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcyMDdlZTczZGNlN2U1Mzc2Mzc2MDZkM2I0ZTdmYzk4NTI1MjJkMw==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-10-25T17:57:03Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-10-25T17:57:03Z"}, "message": "langhooks.c (lang_hook_default_clear_binding_stack): New.\n\n\t* langhooks.c (lang_hook_default_clear_binding_stack): New.\n\t(lang_hook_default_get_alias_set): Move next to other alias\n\thooks.\n\t* langhooks.h: Prototype lang_hook_default_clear_binding_stack.\n\t(LANG_HOOKS_CLEAR_BINDING_STACK): New macro.\n\t(LANG_HOOKS_INITIALIZER): Add it.\n\t* toplev.h (struct lang_hooks): Add clear_binding_stack.\n\t* toplev.c (compile_file):  Call lang_hooks.clear_binding_stack\n\tinstead of a loop calling poplevel.\ncp:\n\t* cp-lang.c: Redefine LANG_HOOKS_CLEAR_BINDING_STACK to\n\tpop_everything.\n\nFrom-SVN: r46492", "tree": {"sha": "12b2533fede08e5ce838d046b4e64bf512682986", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/12b2533fede08e5ce838d046b4e64bf512682986"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37207ee73dce7e537637606d3b4e7fc9852522d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37207ee73dce7e537637606d3b4e7fc9852522d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37207ee73dce7e537637606d3b4e7fc9852522d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37207ee73dce7e537637606d3b4e7fc9852522d3/comments", "author": null, "committer": null, "parents": [{"sha": "5037fa8112b6c0c7fc4c3a33a21ddc06104c9b7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5037fa8112b6c0c7fc4c3a33a21ddc06104c9b7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5037fa8112b6c0c7fc4c3a33a21ddc06104c9b7f"}], "stats": {"total": 63, "additions": 48, "deletions": 15}, "files": [{"sha": "63933977d7f200e76b8494d0fc03985541b1c8ef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=37207ee73dce7e537637606d3b4e7fc9852522d3", "patch": "@@ -1,3 +1,15 @@\n+2001-10-25  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* langhooks.c (lang_hook_default_clear_binding_stack): New.\n+\t(lang_hook_default_get_alias_set): Move next to other alias\n+\thooks.\n+\t* langhooks.h: Prototype lang_hook_default_clear_binding_stack.\n+\t(LANG_HOOKS_CLEAR_BINDING_STACK): New macro.\n+\t(LANG_HOOKS_INITIALIZER): Add it.\n+\t* toplev.h (struct lang_hooks): Add clear_binding_stack.\n+\t* toplev.c (compile_file):  Call lang_hooks.clear_binding_stack\n+\tinstead of a loop calling poplevel.\n+\n 2001-10-25  Nick Clifton  <nickc@cambridge.redhat.com>\n \n \t* config/mips/isa3264.h (SUBTARGET_CPP_SIZE_SPEC): Replace\n@@ -37,7 +49,7 @@ Wed Oct 24 18:43:42 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \t* dwarf2out.c (file_info_cmp): Always return consistent results.\n \n 2001-10-24  Roger Sayle <roger@eyesopen.com>\n- \n+\n \t* stmt.c (expand_end_case): Index jumptables from zero for\n \tsuitably small values of minval.\n "}, {"sha": "5fbcc47e2f8ec0e527e9dfd2502ce480ff077701", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=37207ee73dce7e537637606d3b4e7fc9852522d3", "patch": "@@ -1,3 +1,8 @@\n+2001-10-25  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* cp-lang.c: Redefine LANG_HOOKS_CLEAR_BINDING_STACK to\n+\tpop_everything.\n+\n Tue Oct 23 14:00:20 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* cp-lang.c (cxx_get_alias_set): New function.\n@@ -108,7 +113,7 @@ Tue Oct 23 14:00:20 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n 2001-10-10  Richard Henderson  <rth@redhat.com>\n \n-        * parse.y (asm_operand): Allow named operands.\n+\t* parse.y (asm_operand): Allow named operands.\n \t* semantics.c (finish_asm_stmt): Tweek for changed location\n \tof the operand constrant.\n \n@@ -144,7 +149,7 @@ Tue Oct 23 14:00:20 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* class.c (build_vtable_entry_ref): Const-ify.\n \t* decl.c (predefined_identifier,\n-\tinitialize_predefined_identifiers): Likewise. \n+\tinitialize_predefined_identifiers): Likewise.\n \t* init.c (build_new_1): Likewise.\n \t* lex.c (cplus_tree_code_type, cplus_tree_code_length, resword):\n \tLikewise."}, {"sha": "4ff47af990a18bd63913322aacf1940255d5eb5f", "filename": "gcc/cp/cp-lang.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Fcp%2Fcp-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Fcp%2Fcp-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-lang.c?ref=37207ee73dce7e537637606d3b4e7fc9852522d3", "patch": "@@ -32,6 +32,8 @@ static HOST_WIDE_INT cxx_get_alias_set PARAMS ((tree));\n #define LANG_HOOKS_INIT cxx_init\n #undef LANG_HOOKS_FINISH\n #define LANG_HOOKS_FINISH cxx_finish\n+#undef LANG_HOOKS_CLEAR_BINDING_STACK\n+#define LANG_HOOKS_CLEAR_BINDING_STACK pop_everything\n #undef LANG_HOOKS_INIT_OPTIONS\n #define LANG_HOOKS_INIT_OPTIONS cxx_init_options\n #undef LANG_HOOKS_DECODE_OPTION"}, {"sha": "40a041fceceb9f0279b44693c505aacb1c08f818", "filename": "gcc/langhooks.c", "status": "modified", "additions": 19, "deletions": 10, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Flanghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Flanghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.c?ref=37207ee73dce7e537637606d3b4e7fc9852522d3", "patch": "@@ -36,16 +36,6 @@ lang_hook_default_do_nothing ()\n {\n }\n \n-/* Provide a default routine for alias sets that always returns -1.  This\n-   is used by languages that don't need to do anything special.  */\n-\n-HOST_WIDE_INT\n-lang_hook_default_get_alias_set (t)\n-     tree t ATTRIBUTE_UNUSED;\n-{\n-  return -1;\n-}\n-\n /* Do nothing; the default hook to decode an option.  */\n \n int\n@@ -56,6 +46,25 @@ lang_hook_default_decode_option (argc, argv)\n   return 0;\n }\n \n+/* Provide a default routine to clear the binding stack.  This is used\n+   by languages that don't need to do anything special.  */\n+void\n+lang_hook_default_clear_binding_stack ()\n+{\n+  while (! global_bindings_p ())\n+    poplevel (0, 0, 0);\n+}\n+\n+/* Provide a default routine for alias sets that always returns -1.  This\n+   is used by languages that don't need to do anything special.  */\n+\n+HOST_WIDE_INT\n+lang_hook_default_get_alias_set (t)\n+     tree t ATTRIBUTE_UNUSED;\n+{\n+  return -1;\n+}\n+\n /* Provide a hook routine for alias sets that always returns 0.  This is\n    used by languages that haven't deal with alias sets yet.  */\n "}, {"sha": "d844cdb94141364197da81e5b046b639567364f0", "filename": "gcc/langhooks.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Flanghooks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Flanghooks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.h?ref=37207ee73dce7e537637606d3b4e7fc9852522d3", "patch": "@@ -38,9 +38,11 @@ extern HOST_WIDE_INT hook_get_alias_set_0\tPARAMS ((tree));\n extern void lang_hook_default_do_nothing PARAMS ((void));\n extern int lang_hook_default_decode_option PARAMS ((int, char **));\n extern HOST_WIDE_INT lang_hook_default_get_alias_set PARAMS ((tree));\n+extern void lang_hook_default_clear_binding_stack PARAMS ((void));\n \n #define LANG_HOOKS_INIT\t\t\tlang_hook_default_do_nothing\n #define LANG_HOOKS_FINISH\t\tlang_hook_default_do_nothing\n+#define LANG_HOOKS_CLEAR_BINDING_STACK\tlang_hook_default_clear_binding_stack\n #define LANG_HOOKS_INIT_OPTIONS\t\tlang_hook_default_do_nothing\n #define LANG_HOOKS_DECODE_OPTION\tlang_hook_default_decode_option\n #define LANG_HOOKS_POST_OPTIONS\t\tlang_hook_default_do_nothing\n@@ -99,6 +101,7 @@ int tree_inlining_default_hook_anon_aggr_type_p\t\tPARAMS ((tree));\n #define LANG_HOOKS_INITIALIZER { \\\n   LANG_HOOKS_INIT, \\\n   LANG_HOOKS_FINISH, \\\n+  LANG_HOOKS_CLEAR_BINDING_STACK, \\\n   LANG_HOOKS_INIT_OPTIONS, \\\n   LANG_HOOKS_DECODE_OPTION, \\\n   LANG_HOOKS_POST_OPTIONS, \\"}, {"sha": "818da6fc47ba896c48339971599abfd5953d1e19", "filename": "gcc/toplev.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=37207ee73dce7e537637606d3b4e7fc9852522d3", "patch": "@@ -2334,8 +2334,7 @@ compile_file (name)\n \n   /* In case there were missing block closers,\n      get us back to the global binding level.  */\n-  while (! global_bindings_p ())\n-    poplevel (0, 0, 0);\n+  (*lang_hooks.clear_binding_stack) ();\n \n   /* Compilation is now finished except for writing\n      what's left of the symbol table output.  */"}, {"sha": "8f21b031baf97134021ad0e53876ef6fd69d5261", "filename": "gcc/toplev.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Ftoplev.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37207ee73dce7e537637606d3b4e7fc9852522d3/gcc%2Ftoplev.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.h?ref=37207ee73dce7e537637606d3b4e7fc9852522d3", "patch": "@@ -149,6 +149,9 @@ struct lang_hooks\n   /* Called last, as a finalizer.  */\n   void (*finish) PARAMS ((void));\n \n+  /* Called immediately after parsing to clear the binding stack.  */\n+  void (*clear_binding_stack) PARAMS ((void));\n+\n   /* Called to initialize options, before any calls to decode_option.  */\n   void (*init_options) PARAMS ((void));\n "}]}