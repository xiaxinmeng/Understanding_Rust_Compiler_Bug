{"sha": "83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODNhMDFmMjRjMzYwYjdjYjYyZjU2OGQ0ZDg4NmVlMjFmNWVkMGQ3OQ==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2006-12-13T05:25:57Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2006-12-13T05:25:57Z"}, "message": "spu.h (C_COMMON_OVERRIDE_OPTIONS): Define.\n\n\t* config/spu/spu.h (C_COMMON_OVERRIDE_OPTIONS): Define.\n\t(REGISTER_TARGET_PRAGMAS): Don't zero warn_main flag.\n\t* config/spu/spu-protos.h (spu_c_common_override_options):\n\tDeclare.\n\t* config/spu/spu-c.c (spu_c_common_override_options): New.\n\t* config/spu/spu.c (spu_override_options): Whitespace fix.\n\ntestsuite/\n\t* gcc.target/spu/Wmain.c: New test.\n\nFrom-SVN: r119817", "tree": {"sha": "46921cd4d659ebf3be2f757a6c581f1dde455773", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46921cd4d659ebf3be2f757a6c581f1dde455773"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/comments", "author": null, "committer": null, "parents": [{"sha": "26dff230b80bb1e387e02f1ffee0e896c13657f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26dff230b80bb1e387e02f1ffee0e896c13657f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26dff230b80bb1e387e02f1ffee0e896c13657f7"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "0c159c8128232d1820d189441ea1aeb3f32bf219", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "patch": "@@ -1,3 +1,13 @@\n+2006-12-13  Sa Liu  <saliu@de.ibm.com>\n+\t    Ben Elliston  <bje@au.ibm.com>\n+\n+\t* config/spu/spu.h (C_COMMON_OVERRIDE_OPTIONS): Define.\n+\t(REGISTER_TARGET_PRAGMAS): Don't zero warn_main flag.\n+\t* config/spu/spu-protos.h (spu_c_common_override_options):\n+\tDeclare.\n+\t* config/spu/spu-c.c (spu_c_common_override_options): New.\n+\t* config/spu/spu.c (spu_override_options): Whitespace fix.\n+\n 2006-12-12  Trevor Smigiel  <trevor_smigiel@playstation.sony.com>\n \n \t* config/spu/spu.c (cpat_info): Fix an incorrectly identified case."}, {"sha": "43d5d16b82578dec6dc58662aeea2c6d9f824b53", "filename": "gcc/config/spu/spu-c.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu-c.c?ref=83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "patch": "@@ -141,3 +141,12 @@ spu_cpu_cpp_builtins (struct cpp_reader *pfile)\n   builtin_define_std (\"__vector=__attribute__((__spu_vector__))\");\n }\n \n+void\n+spu_c_common_override_options (void)\n+{ \n+  if (!TARGET_STD_MAIN)\n+    {\n+      /* Don't give warnings about the main() function.  */\n+      warn_main = 0;\n+    }\n+}"}, {"sha": "01f5c60c887cad8f61666d9702b1d412f73e7613", "filename": "gcc/config/spu/spu-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu-protos.h?ref=83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "patch": "@@ -24,6 +24,7 @@ extern enum machine_mode spu_eh_return_filter_mode (void);\n extern void spu_cpu_cpp_builtins (struct cpp_reader * pfile);\n extern void builtin_define_std (const char *);\n extern void spu_override_options (void);\n+extern void spu_c_common_override_options (void);\n extern int valid_subreg (rtx op);\n extern void spu_expand_extv (rtx * ops, int unsignedp);\n extern void spu_expand_insv (rtx * ops);"}, {"sha": "7317da70afbd0de0e1c173754badbf5a6631694d", "filename": "gcc/config/spu/spu.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.c?ref=83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "patch": "@@ -257,7 +257,6 @@ struct gcc_target targetm = TARGET_INITIALIZER;\n void\n spu_override_options (void)\n {\n-\n   /* Override some of the default param values.  With so many registers\n      larger values are better for these params.  */\n   if (MAX_UNROLLED_INSNS == 100)"}, {"sha": "5dc88fb8ee3d47f76cd410c5114ac1595ea5ffd1", "filename": "gcc/config/spu/spu.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Fconfig%2Fspu%2Fspu.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.h?ref=83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "patch": "@@ -22,6 +22,7 @@\n #define TARGET_VERSION fprintf (stderr, \" (spu %s)\", __DATE__);\n \n #define OVERRIDE_OPTIONS spu_override_options()\n+#define C_COMMON_OVERRIDE_OPTIONS spu_c_common_override_options()\n \n extern int target_flags;\n extern const char *spu_fixed_range_string;\n@@ -242,8 +243,6 @@ enum reg_class {\n \n #define REGISTER_TARGET_PRAGMAS() do {\t\t\t\t\t\\\n targetm.resolve_overloaded_builtin = spu_resolve_overloaded_builtin;\t\\\n-  /* Don't give warnings about the main() function. */\t\t\t\\\n-warn_main = 0;\t\t\t\t\t\t\t\t\\\n }while (0);\n \n \f"}, {"sha": "6f8978106decc168ff3eef17e7cadefc439b8b45", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "patch": "@@ -1,3 +1,7 @@\n+2006-12-13  Ben Elliston  <bje@au.ibm.com>\n+\n+\t* gcc.target/spu/Wmain.c: New test.\n+\n 2006-12-12  Josh Conner  <jconner@apple.com>\n \n \t* g++.dg/abi/thunk3.C: Use .weak_definition on darwin."}, {"sha": "530c03f2afc22ced3eba0b95d422a3f7830638f1", "filename": "gcc/testsuite/gcc.target/spu/Wmain.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Ftestsuite%2Fgcc.target%2Fspu%2FWmain.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83a01f24c360b7cb62f568d4d886ee21f5ed0d79/gcc%2Ftestsuite%2Fgcc.target%2Fspu%2FWmain.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fspu%2FWmain.c?ref=83a01f24c360b7cb62f568d4d886ee21f5ed0d79", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Wmain -mstdmain\" } */\n+\n+int main (void *wrong)\n+{ /* { dg-warning \"first argument of 'main' should be 'int'\" \"\" } */\n+  /* { dg-warning \"'main' takes only zero or two arguments\" \"\" { target *-*-* } 5 } */\n+}"}]}