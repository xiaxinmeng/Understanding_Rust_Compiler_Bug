{"sha": "c0389e926a082d20ff739684790d5801b026a888", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzAzODllOTI2YTA4MmQyMGZmNzM5Njg0NzkwZDU4MDFiMDI2YTg4OA==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2009-09-08T22:36:41Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2009-09-08T22:36:41Z"}, "message": "Use -fno-merge-debug-string for some dwarf tests\n\n\tUse -fno-merge-debug-string to comply with Darwin\n\t* g++.dg/debug/dwarf2/namespace-1.C: Use -fno-merge-debug-string\n\tand adjust.\n\t* g++.dg/debug/dwarf2/template-func-params-6.C: Likewise.\n\t* g++.dg/debug/dwarf2/template-func-params-7.C: Likewise.\n\t* g++.dg/debug/dwarf2/template-params-6.C: Likewise.\n\t* g++.dg/debug/dwarf2/pubnames-1.C: Likewise. Also, adjust to\n\ttake darwin specifics in account.\n\nFrom-SVN: r151538", "tree": {"sha": "377e0c6829a8666e75d21f5fd797c1bad3738b9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/377e0c6829a8666e75d21f5fd797c1bad3738b9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c0389e926a082d20ff739684790d5801b026a888", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0389e926a082d20ff739684790d5801b026a888", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0389e926a082d20ff739684790d5801b026a888", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0389e926a082d20ff739684790d5801b026a888/comments", "author": null, "committer": null, "parents": [{"sha": "edf736cb4d256faf2f7f83e2fe09bd68e93880be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edf736cb4d256faf2f7f83e2fe09bd68e93880be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edf736cb4d256faf2f7f83e2fe09bd68e93880be"}], "stats": {"total": 54, "additions": 37, "deletions": 17}, "files": [{"sha": "229c800ea741de94c29914569ed0b92e8756a70d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c0389e926a082d20ff739684790d5801b026a888", "patch": "@@ -1,3 +1,14 @@\n+2009-09-08  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tFix some test breakages on Darwin\n+\t* g++.dg/debug/dwarf2/namespace-1.C: Use -fno-merge-debug-string\n+\tand adjust.\n+\t* g++.dg/debug/dwarf2/template-func-params-6.C: Likewise.\n+\t* g++.dg/debug/dwarf2/template-func-params-7.C: Likewise.\n+\t* g++.dg/debug/dwarf2/template-params-6.C: Likewise.\n+\t* g++.dg/debug/dwarf2/pubnames-1.C: Likewise. Also, adjust to\n+\ttake darwin specifics in account.\n+\n 2009-09-08  Joseph Myers  <joseph@codesourcery.com>\n \n \t* gcc.dg/profile-dir-1.c, gcc.dg/profile-dir-2.c,"}, {"sha": "d3f26f11222b5d9e5bee313f8702d0f1489fc302", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/namespace-1.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fnamespace-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fnamespace-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fnamespace-1.C?ref=c0389e926a082d20ff739684790d5801b026a888", "patch": "@@ -1,12 +1,12 @@\n // Contributed by Dodji Seketeli <dodji@redhat.com>\n // Origin PR debug/41170\n-// { dg-options \"-g -dA\" }\n+// { dg-options \"-g -dA -fno-merge-debug-strings\" }\n //\n // We want to test that there is a DW_TAG_namespace DIE DW_AT_name is set\n // to \"not_emitted\". That namespace die has a child DW_TAG_typedef DIE\n // which DW_AT_name is the null terminated string \"T\".\n // { dg-final { scan-assembler-times \"DIE +\\\\(.*?\\\\) DW_TAG_namespace\" 1 } }\n-// { dg-final { scan-assembler-times \"DW_AT_name: \\\"not_emitted\\\"\" 1 } }\n+// { dg-final { scan-assembler-times \"\\\"not_emitted.0\\\".*?DW_AT_name\" 1 } }\n // { dg-final { scan-assembler-times \"DIE +\\\\(.*?\\\\) DW_TAG_typedef\" 1 } }\n // { dg-final { scan-assembler-times \"\\.ascii \\\"T.0\\\"\\[\\t \\]+.*?DW_AT_name\" 1 } }\n "}, {"sha": "543439da323e0190ba00b81526600acef68de0ce", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/pubnames-1.C", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpubnames-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpubnames-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpubnames-1.C?ref=c0389e926a082d20ff739684790d5801b026a888", "patch": "@@ -1,9 +1,18 @@\n // Contributed by Dodji Seketeli <dodji@redhat.com>\n // Origin PR debug/39706\n-// { dg-options \"-g -dA\" }\n+// { dg-options \"-g -dA -fno-merge-debug-strings\" }\n // { dg-do compile }\n-// { dg-final { scan-assembler-times \".debug_pubnames\" 1 } }\n-// { dg-final { scan-assembler-times \"\\\"main\\\".*external name\" 1 } }\n+//\n+// There should be one debug_pubnames section generated.\n+// On Darwin though, there is also a label pointing at the begining of the\n+// debug_pubnames section. The assembly code of that label adds an occurence\n+// of section declaration assembly. So on Darwin, we need to check for two\n+// occurences of the debug_pubnames section declaration.\n+// { dg-final { scan-assembler-times \"\\.section\\[\\t \\].*?debug_pubnames\" 1 { target { ! *-*-darwin* } } } }\n+// { dg-final { scan-assembler-times \"\\.section\\[\\t \\].*?debug_pubnames\" 2 { target { *-*-darwin* } } } }\n+//\n+// Then check of the presence of the names we are interested in.\n+// { dg-final { scan-assembler-times \"\\\"main.0\\\".*external name\" 1 } }\n // { dg-final { scan-assembler-times \"\\\"ns::ns_x.*external name\" 1 } }\n // { dg-final { scan-assembler-times \"\\\"y::y_x.*external name\" 1 } }\n "}, {"sha": "99bbba3da8d4113240221abd49fea56f8ce2ef2a", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/template-func-params-6.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-func-params-6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-func-params-6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-func-params-6.C?ref=c0389e926a082d20ff739684790d5801b026a888", "patch": "@@ -1,8 +1,8 @@\n // Contributed by Dodji Seketeli <dodji@redhat.com>\n // Origin PR debug/30161\n-// { dg-options \"-g -dA\" }\n+// { dg-options \"-g -dA -fno-merge-debug-strings\" }\n // { dg-final { scan-assembler-times \"DW_TAG_GNU_template_template_param\" 2 } }\n-// { dg-final { scan-assembler-times \"DW_AT_GNU_template_name: \\\"vector\\\"\" 1 } }\n+// { dg-final { scan-assembler-times \"\\\"vector.0\\\".*?DW_AT_GNU_template_name\" 1 } }\n // { dg-final { scan-assembler-times \".ascii \\\"U.0\\\".*?DW_AT_name\" 1 } }\n \n template <class T>"}, {"sha": "dc6ac990313ba63e82df6ef00736ce87bdea6008", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/template-func-params-7.C", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-func-params-7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-func-params-7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-func-params-7.C?ref=c0389e926a082d20ff739684790d5801b026a888", "patch": "@@ -1,6 +1,6 @@\n // Contributed by Dodji Seketeli <dodji@redhat.com>\n // Origin PR debug/30161\n-// { dg-options \"-g -dA -std=c++0x\" }\n+// { dg-options \"-g -dA -std=c++0x -fno-merge-debug-strings\" }\n // { dg-do compile }\n \n // There must be 5 subprograms generated:\n@@ -10,20 +10,20 @@\n \n // That makes 6 template type parameters.\n // { dg-final {scan-assembler-times \"DIE \\\\(0x.*?\\\\) DW_TAG_template_type_param\" 6 } }\n-// { dg-final {scan-assembler-times \"DW_AT_name: \\\"printf<int, char, int>\\\"\" 1 } }\n-// { dg-final {scan-assembler-times \"DW_AT_name: \\\"printf<char, int>\\\"\" 1 } }\n-// { dg-final {scan-assembler-times \"DW_AT_name: \\\"printf<int>\\\"\" 1 } }\n-// { dg-final {scan-assembler-times \"DW_AT_name: \\\"printf\\\"\" 1 } }\n+// { dg-final {scan-assembler-times \"\\\"printf<int, char, int>.0\\\".*?DW_AT_name\" 1 } }\n+// { dg-final {scan-assembler-times \"\\\"printf<char, int>.0\\\".*?DW_AT_name\" 1 } }\n+// { dg-final {scan-assembler-times \"\\\"printf<int>.0\\\".*?DW_AT_name\" 1 } }\n+// { dg-final {scan-assembler-times \"\\\"printf.0\\\".*?DW_AT_name\" 1 } }\n \n // printf<int, char, int> and printf<char, int> have a pack expansion as\n // function parameters. In the former, the elements of the parameter pack\n // expansion are PackTypes#0, PackTypes#1 and the arguments are args#0 and\n // args#1. In the later, the element of the parameter pack expansion\n // is PackTypes#0 and the argument is args#0.\n // { dg-final {scan-assembler-times \"DW_AT_name: \\\"PackTypes#0\\\"\" 2 } }\n-// { dg-final {scan-assembler-times \"DW_AT_name: \\\"args#0\\\"\" 2 } }\n-// { dg-final {scan-assembler-times \"DW_AT_name: \\\"PackTypes#1\\\"\" 1 } }\n-// { dg-final {scan-assembler-times \"DW_AT_name: \\\"args#1\\\"\" 1 } }\n+// { dg-final {scan-assembler-times \"\\\"args#0.0\\\".*?DW_AT_name\" 2 } }\n+// { dg-final {scan-assembler-times \"\\\"PackTypes#1.0\\\".*?DW_AT_name\" 1 } }\n+// { dg-final {scan-assembler-times \"\\\"args#1.0\\\".*?DW_AT_name\" 1 } }\n \n // { dg_final {scan-assembler-times \"\\.ascii \\\"T.0\\\"\\[\\t \\]+.*?DW_AT_name\" 3 } }\n "}, {"sha": "184a90f98aa5985f5380686935803472718a498c", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/template-params-6.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-params-6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0389e926a082d20ff739684790d5801b026a888/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-params-6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Ftemplate-params-6.C?ref=c0389e926a082d20ff739684790d5801b026a888", "patch": "@@ -1,8 +1,8 @@\n // Contributed by Dodji Seketeli <dodji@redhat.com>\n // Origin PR debug/30161\n-// { dg-options \"-g -dA\" }\n+// { dg-options \"-g -dA -fno-merge-debug-strings\" }\n // { dg-final { scan-assembler-times \"DW_TAG_GNU_template_template_param\" 2 } }\n-// { dg-final { scan-assembler-times \"DW_AT_GNU_template_name: \\\"vector\\\"\" 1 } }\n+// { dg-final { scan-assembler-times \"\\\"vector.0\\\".*?DW_AT_GNU_template_name\" 1 } }\n // { dg-final { scan-assembler-times \".ascii \\\"U.0\\\".*?DW_AT_name\" 1 } }\n \n template <class T>"}]}