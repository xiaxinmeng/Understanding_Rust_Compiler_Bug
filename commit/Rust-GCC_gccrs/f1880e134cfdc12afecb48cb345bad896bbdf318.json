{"sha": "f1880e134cfdc12afecb48cb345bad896bbdf318", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjE4ODBlMTM0Y2ZkYzEyYWZlY2I0OGNiMzQ1YmFkODk2YmJkZjMxOA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2001-12-03T12:39:49Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-12-03T12:39:49Z"}, "message": "re PR c++/3381 (explicit template instantations fail with absolutely qualified names)\n\ncp:\n\tPR g++/3381\n\t* parse.y (named_complex_class_head_sans_basetype): Add new\n\treduction.\n\t* Make-lang.in (parse.c): Adjust expected conflict count.\ntestsuite:\n\t* g++.dg/other/scope1.C: New test.\n\t* g++.dg/template/explicit-instantiation.C: Remove XFAIL\n\nFrom-SVN: r47546", "tree": {"sha": "c1a02801c2ebe84c57e712a5100279181bff61dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1a02801c2ebe84c57e712a5100279181bff61dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1880e134cfdc12afecb48cb345bad896bbdf318", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1880e134cfdc12afecb48cb345bad896bbdf318", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1880e134cfdc12afecb48cb345bad896bbdf318", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1880e134cfdc12afecb48cb345bad896bbdf318/comments", "author": null, "committer": null, "parents": [{"sha": "a2ad3e94f562fc6fed235f6577edff17413995af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2ad3e94f562fc6fed235f6577edff17413995af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2ad3e94f562fc6fed235f6577edff17413995af"}], "stats": {"total": 39, "additions": 37, "deletions": 2}, "files": [{"sha": "6b970756d4a4ea3473a4715062cdf78b121920cf", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f1880e134cfdc12afecb48cb345bad896bbdf318", "patch": "@@ -1,3 +1,10 @@\n+2001-12-03  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR g++/3381\n+\t* parse.y (named_complex_class_head_sans_basetype): Add new\n+\treduction.\n+\t* Make-lang.in (parse.c): Adjust expected conflict count.\n+\n 2001-12-03  Jason Merrill  <jason@redhat.com>\n \n \t* class.c (finish_vtbls): Fill in BINFO_VPTR_FIELD in the"}, {"sha": "eb42decff4fe6139989bbfe801c9047fd1e76b38", "filename": "gcc/cp/Make-lang.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Fcp%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Fcp%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FMake-lang.in?ref=f1880e134cfdc12afecb48cb345bad896bbdf318", "patch": "@@ -119,7 +119,7 @@ $(srcdir)/cp/cfns.h: $(srcdir)/cp/cfns.gperf\n \t\t$(srcdir)/cp/cfns.gperf > $(srcdir)/cp/cfns.h\n \n $(srcdir)/cp/parse.h $(srcdir)/cp/parse.c: $(srcdir)/cp/parse.y\n-\t@echo \"Expect 33 shift/reduce conflicts and 58 reduce/reduce conflicts.\"\n+\t@echo \"Expect 36 shift/reduce conflicts and 58 reduce/reduce conflicts.\"\n \tcd $(srcdir)/cp; $(BISON) $(BISONFLAGS) -d -o p$$$$.c parse.y ; \\\n \tgrep '^#define[ \t]*YYEMPTY' p$$$$.c >> p$$$$.h ; \\\n \tmv -f p$$$$.c parse.c ; mv -f p$$$$.h parse.h"}, {"sha": "a27f288eedcb9fed42887c5a84b4c5d27ea2bd0b", "filename": "gcc/cp/parse.y", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Fcp%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Fcp%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparse.y?ref=f1880e134cfdc12afecb48cb345bad896bbdf318", "patch": "@@ -2404,6 +2404,13 @@ named_complex_class_head_sans_basetype:\n \t\t  push_scope (CP_DECL_CONTEXT ($$.t));\n \t\t  $$.new_type_flag = 1;\n \t\t}\n+\t| aggr global_scope nested_name_specifier apparent_template_type\n+\t\t{ \n+\t\t  current_aggr = $1; \n+\t\t  $$.t = $4;\n+\t\t  push_scope (CP_DECL_CONTEXT ($$.t));\n+\t\t  $$.new_type_flag = 1;\n+\t\t}\n \t;\n \n named_class_head:"}, {"sha": "a9715d8734e44d47b3556b654ac017b68d12ed44", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f1880e134cfdc12afecb48cb345bad896bbdf318", "patch": "@@ -1,3 +1,8 @@\n+2001-12-03  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.dg/other/scope1.C: New test.\n+\t* g++.dg/template/explicit-instantiation.C: Remove XFAIL\n+\n 2001-12-03  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* gcc.dg/vla-init-1.c: New test."}, {"sha": "73b141bdf0b0e56dc964668590cd215fea133a48", "filename": "gcc/testsuite/g++.dg/other/scope1.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fscope1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fscope1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fscope1.C?ref=f1880e134cfdc12afecb48cb345bad896bbdf318", "patch": "@@ -0,0 +1,14 @@\n+// { dg-do compile }\n+\n+// Copyright (C) 2000 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 30 Nov 2001 <nathan@nathan@codesourcery.com>\n+\n+// PR 3381\n+\n+namespace N {\n+  template<class T>\n+  class A { };\n+}\n+\n+template class N::A<unsigned>; // this works (by itself)\n+template class ::N::A<int>; // but this doesn't"}, {"sha": "67e44c49f024c840034b23eb9698ff07853b61b3", "filename": "gcc/testsuite/g++.dg/template/explicit-instantiation.C", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fexplicit-instantiation.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1880e134cfdc12afecb48cb345bad896bbdf318/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fexplicit-instantiation.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fexplicit-instantiation.C?ref=f1880e134cfdc12afecb48cb345bad896bbdf318", "patch": "@@ -2,13 +2,15 @@\n // Origin: Jens.Maurer@gmx.net\n // { dg-do compile }\n \n+// Fixed: PR 3381\n+\n namespace N\n {\n   template<class T>\n   class A { };\n }\n \n-template class ::N::A<int>;     // { dg-bogus \".*\" \"\" { xfail *-*-* } }\n+template class ::N::A<int>;\n \n \n "}]}