{"sha": "75a418785a223a0efa41824bf55826271a4ddde6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzVhNDE4Nzg1YTIyM2EwZWZhNDE4MjRiZjU1ODI2MjcxYTRkZGRlNg==", "commit": {"author": {"name": "Eric Christopher", "email": "echristo@gmail.com", "date": "2013-07-22T21:54:33Z"}, "committer": {"name": "Eric Christopher", "email": "echristo@gcc.gnu.org", "date": "2013-07-22T21:54:33Z"}, "message": "dwarf2out.c (die_odr_checksum): New function to use CHECKSUM_ macros and ULEB128 for DIE tag.\n\n2013-07-22  Eric Christopher  <echristo@gmail.com>\n\n\t    * dwarf2out.c (die_odr_checksum): New function to use\n\t    CHECKSUM_ macros and ULEB128 for DIE tag.\n\t    (generate_type_signature): Use.\n\nFrom-SVN: r201148", "tree": {"sha": "4dde03da694b2ad00265488cda73bcc32342639b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4dde03da694b2ad00265488cda73bcc32342639b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75a418785a223a0efa41824bf55826271a4ddde6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75a418785a223a0efa41824bf55826271a4ddde6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75a418785a223a0efa41824bf55826271a4ddde6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75a418785a223a0efa41824bf55826271a4ddde6/comments", "author": {"login": "echristo", "id": 327308, "node_id": "MDQ6VXNlcjMyNzMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/327308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/echristo", "html_url": "https://github.com/echristo", "followers_url": "https://api.github.com/users/echristo/followers", "following_url": "https://api.github.com/users/echristo/following{/other_user}", "gists_url": "https://api.github.com/users/echristo/gists{/gist_id}", "starred_url": "https://api.github.com/users/echristo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/echristo/subscriptions", "organizations_url": "https://api.github.com/users/echristo/orgs", "repos_url": "https://api.github.com/users/echristo/repos", "events_url": "https://api.github.com/users/echristo/events{/privacy}", "received_events_url": "https://api.github.com/users/echristo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "38ae58ca9fd17ebf4fe679fe7a91472f5d6c37b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38ae58ca9fd17ebf4fe679fe7a91472f5d6c37b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38ae58ca9fd17ebf4fe679fe7a91472f5d6c37b1"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "8613ff5d0252a662143a73a7f8555662f2ddaf95", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75a418785a223a0efa41824bf55826271a4ddde6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75a418785a223a0efa41824bf55826271a4ddde6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75a418785a223a0efa41824bf55826271a4ddde6", "patch": "@@ -1,3 +1,9 @@\n+2013-07-22  Eric Christopher  <echristo@gmail.com>\n+\n+\t* dwarf2out.c (die_odr_checksum): New function to use\n+\tCHECKSUM_ macros and ULEB128 for DIE tag.\n+\t(generate_type_signature): Use.\n+\t\n 2013-07-22  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* config.gcc (sparc*-*-*): Accept leon3 processor."}, {"sha": "87f96447fa319caeec0f83439211163ed4c9249d", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75a418785a223a0efa41824bf55826271a4ddde6/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75a418785a223a0efa41824bf55826271a4ddde6/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=75a418785a223a0efa41824bf55826271a4ddde6", "patch": "@@ -6103,6 +6103,14 @@ die_checksum_ordered (dw_die_ref die, struct md5_ctx *ctx, int *mark)\n   CHECKSUM_ULEB128 (0);\n }\n \n+/* Add a type name and tag to a hash.  */\n+static void\n+die_odr_checksum (int tag, const char *name, md5_ctx *ctx)\n+{\n+  CHECKSUM_ULEB128 (tag);\n+  CHECKSUM_STRING (name);\n+}\n+\n #undef CHECKSUM\n #undef CHECKSUM_STRING\n #undef CHECKSUM_ATTR\n@@ -6143,8 +6151,8 @@ generate_type_signature (dw_die_ref die, comdat_type_node *type_node)\n       if (parent != NULL)\n         checksum_die_context (parent, &ctx);\n \n-      md5_process_bytes (&die->die_tag, sizeof (die->die_tag), &ctx);\n-      md5_process_bytes (name, strlen (name) + 1, &ctx);\n+      /* Checksum the current DIE. */\n+      die_odr_checksum (die->die_tag, name, &ctx);\n       md5_finish_ctx (&ctx, checksum);\n \n       add_AT_data8 (type_node->root_die, DW_AT_GNU_odr_signature, &checksum[8]);"}]}