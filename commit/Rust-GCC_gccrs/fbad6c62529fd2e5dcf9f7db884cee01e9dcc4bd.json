{"sha": "fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJhZDZjNjI1MjlmZDJlNWRjZjlmN2RiODg0Y2VlMDFlOWRjYzRiZA==", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2021-06-19T00:55:51Z"}, "committer": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2021-06-26T01:47:42Z"}, "message": "Reset the range info on the moved instruction in PHIOPT\n\nI had missed this when wrote the patch which allowed the\ngimple to be moved from inside the conditional as it.  It\nwas also missed in the review.  Anyways the range information\nneeds to be reset for the moved gimple as it was under a\nconditional and the flow has changed to be unconditional.\nI have not seen any testcase in the wild that produces wrong code\nyet which is why there is no testcase but this is similar to what\nthe other code in phiopt does so after moving those to match, there\nmight be some.\n\nOK? Bootstrapped and tested on x86_64-linux-gnu with no regressions.\n\ngcc/ChangeLog:\n\n\t* tree-ssa-phiopt.c (match_simplify_replacement): Reset\n\tflow senatitive info on the moved ssa set.", "tree": {"sha": "a5630c578a4010307307a8f58ecba075654ad999", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5630c578a4010307307a8f58ecba075654ad999"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd/comments", "author": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "committer": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86fc076dc289f1861adebee02e6afcbaa1a2cdb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86fc076dc289f1861adebee02e6afcbaa1a2cdb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86fc076dc289f1861adebee02e6afcbaa1a2cdb6"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "1777bff2f7cb9adbaf36f5742f40e7953b2ce965", "filename": "gcc/tree-ssa-phiopt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd/gcc%2Ftree-ssa-phiopt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd/gcc%2Ftree-ssa-phiopt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-phiopt.c?ref=fbad6c62529fd2e5dcf9f7db884cee01e9dcc4bd", "patch": "@@ -836,7 +836,7 @@ match_simplify_replacement (basic_block cond_bb, basic_block middle_bb,\n       if (!is_gimple_assign (stmt_to_move))\n \treturn false;\n \n-      tree lhs = gimple_assign_lhs  (stmt_to_move);\n+      tree lhs = gimple_assign_lhs (stmt_to_move);\n       gimple *use_stmt;\n       use_operand_p use_p;\n \n@@ -892,6 +892,7 @@ match_simplify_replacement (basic_block cond_bb, basic_block middle_bb,\n \t}\n       gimple_stmt_iterator gsi1 = gsi_for_stmt (stmt_to_move);\n       gsi_move_before (&gsi1, &gsi);\n+      reset_flow_sensitive_info (gimple_assign_lhs (stmt_to_move));\n     }\n   if (seq)\n     gsi_insert_seq_before (&gsi, seq, GSI_SAME_STMT);"}]}