{"sha": "b543d68098e1b74c63db89960f281cb96d3724a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjU0M2Q2ODA5OGUxYjc0YzYzZGI4OTk2MGYyODFjYjk2ZDM3MjRhNQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2017-07-02T22:11:14Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2017-07-02T22:11:14Z"}, "message": "* tree-complex.c (expand_complex_div_wide): update profile.\n\nFrom-SVN: r249884", "tree": {"sha": "fb39002b84166011a70ef4fd5414ed4fad723b52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb39002b84166011a70ef4fd5414ed4fad723b52"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b543d68098e1b74c63db89960f281cb96d3724a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b543d68098e1b74c63db89960f281cb96d3724a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b543d68098e1b74c63db89960f281cb96d3724a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b543d68098e1b74c63db89960f281cb96d3724a5/comments", "author": null, "committer": null, "parents": [{"sha": "ef29f5dd771fcfdd778b304c515bcbc7a27b699e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef29f5dd771fcfdd778b304c515bcbc7a27b699e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef29f5dd771fcfdd778b304c515bcbc7a27b699e"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "953b38413c25186f5314f1eb00e73c4a2dfc3388", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b543d68098e1b74c63db89960f281cb96d3724a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b543d68098e1b74c63db89960f281cb96d3724a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b543d68098e1b74c63db89960f281cb96d3724a5", "patch": "@@ -1,3 +1,7 @@\n+2017-07-02  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* tree-complex.c (expand_complex_div_wide): update profile.\n+\n 2017-07-02  Richard Sandiford  <richard.sandiford@linaro.org>\n \t    Alan Hayward  <alan.hayward@arm.com>\n \t    David Sherwood  <david.sherwood@arm.com>"}, {"sha": "d61047bbf5f809f8d4cb4f41df846aa2cf77cc82", "filename": "gcc/tree-complex.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b543d68098e1b74c63db89960f281cb96d3724a5/gcc%2Ftree-complex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b543d68098e1b74c63db89960f281cb96d3724a5/gcc%2Ftree-complex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-complex.c?ref=b543d68098e1b74c63db89960f281cb96d3724a5", "patch": "@@ -1186,13 +1186,22 @@ expand_complex_div_wide (gimple_stmt_iterator *gsi, tree inner_type,\n       bb_join = e->dest;\n       bb_true = create_empty_bb (bb_cond);\n       bb_false = create_empty_bb (bb_true);\n+      bb_true->frequency = bb_false->frequency = bb_cond->frequency / 2;\n+      bb_true->count = bb_false->count\n+\t = bb_cond->count.apply_probability (profile_probability::even ());\n \n       /* Wire the blocks together.  */\n       e->flags = EDGE_TRUE_VALUE;\n+      e->count = bb_true->count;\n+      /* TODO: With value profile we could add an historgram to determine real\n+\t branch outcome.  */\n+      e->probability = profile_probability::even ();\n       redirect_edge_succ (e, bb_true);\n-      make_edge (bb_cond, bb_false, EDGE_FALSE_VALUE);\n-      make_edge (bb_true, bb_join, EDGE_FALLTHRU);\n-      make_edge (bb_false, bb_join, EDGE_FALLTHRU);\n+      edge e2 = make_edge (bb_cond, bb_false, EDGE_FALSE_VALUE);\n+      e2->count = bb_false->count;\n+      e2->probability = profile_probability::even ();\n+      make_single_succ_edge (bb_true, bb_join, EDGE_FALLTHRU);\n+      make_single_succ_edge (bb_false, bb_join, EDGE_FALLTHRU);\n       add_bb_to_loop (bb_true, bb_cond->loop_father);\n       add_bb_to_loop (bb_false, bb_cond->loop_father);\n "}]}