{"sha": "f1e3a534a0f331c40cf76318812e915e1482b45c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFlM2E1MzRhMGYzMzFjNDBjZjc2MzE4ODEyZTkxNWUxNDgyYjQ1Yw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-09-18T09:31:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-09-18T09:31:14Z"}, "message": "re PR middle-end/82145 (i386/pr38988.c, i386/pr46254.c, i386/pr55154.c, i386/pr81766.c fails)\n\n\tPR target/82145\n\t* config/i386/i386.c (ix86_init_large_pic_reg): Revert 2017-09-01\n\tchanges.  Turn CODE_LABEL into NOTE_INSN_DELETED_LABEL immediately.\n\t(ix86_init_pic_reg): Revert 2017-09-01 changes.\n\nFrom-SVN: r252915", "tree": {"sha": "6e53f6abdecf68203d4659d516962481cfe9cb58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e53f6abdecf68203d4659d516962481cfe9cb58"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1e3a534a0f331c40cf76318812e915e1482b45c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1e3a534a0f331c40cf76318812e915e1482b45c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1e3a534a0f331c40cf76318812e915e1482b45c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1e3a534a0f331c40cf76318812e915e1482b45c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0eeb9f3d7cb92d0e32fb7e206ba61ec74268c386"}], "stats": {"total": 33, "additions": 13, "deletions": 20}, "files": [{"sha": "efedc341b9d2e9bd507876aebbafd39e86c487b7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1e3a534a0f331c40cf76318812e915e1482b45c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1e3a534a0f331c40cf76318812e915e1482b45c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f1e3a534a0f331c40cf76318812e915e1482b45c", "patch": "@@ -1,3 +1,10 @@\n+2017-09-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/82145\n+\t* config/i386/i386.c (ix86_init_large_pic_reg): Revert 2017-09-01\n+\tchanges.  Turn CODE_LABEL into NOTE_INSN_DELETED_LABEL immediately.\n+\t(ix86_init_pic_reg): Revert 2017-09-01 changes.\n+\n 2017-09-18  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR target/81361"}, {"sha": "7103d11937478dcab82ec3c6eddff92617f7a05c", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 6, "deletions": 20, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1e3a534a0f331c40cf76318812e915e1482b45c/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1e3a534a0f331c40cf76318812e915e1482b45c/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=f1e3a534a0f331c40cf76318812e915e1482b45c", "patch": "@@ -8888,7 +8888,7 @@ ix86_use_pseudo_pic_reg (void)\n \n /* Initialize large model PIC register.  */\n \n-static rtx_code_label *\n+static void\n ix86_init_large_pic_reg (unsigned int tmp_regno)\n {\n   rtx_code_label *label;\n@@ -8905,7 +8905,10 @@ ix86_init_large_pic_reg (unsigned int tmp_regno)\n   emit_insn (gen_set_got_offset_rex64 (tmp_reg, label));\n   emit_insn (ix86_gen_add3 (pic_offset_table_rtx,\n \t\t\t    pic_offset_table_rtx, tmp_reg));\n-  return label;\n+  const char *name = LABEL_NAME (label);\n+  PUT_CODE (label, NOTE);\n+  NOTE_KIND (label) = NOTE_INSN_DELETED_LABEL;\n+  NOTE_DELETED_LABEL_NAME (label) = name;\n }\n \n /* Create and initialize PIC register if required.  */\n@@ -8914,7 +8917,6 @@ ix86_init_pic_reg (void)\n {\n   edge entry_edge;\n   rtx_insn *seq;\n-  rtx_code_label *label = NULL;\n \n   if (!ix86_use_pseudo_pic_reg ())\n     return;\n@@ -8924,7 +8926,7 @@ ix86_init_pic_reg (void)\n   if (TARGET_64BIT)\n     {\n       if (ix86_cmodel == CM_LARGE_PIC)\n-\tlabel = ix86_init_large_pic_reg (R11_REG);\n+\tix86_init_large_pic_reg (R11_REG);\n       else\n \temit_insn (gen_set_got_rex64 (pic_offset_table_rtx));\n     }\n@@ -8948,22 +8950,6 @@ ix86_init_pic_reg (void)\n   entry_edge = single_succ_edge (ENTRY_BLOCK_PTR_FOR_FN (cfun));\n   insert_insn_on_edge (seq, entry_edge);\n   commit_one_edge_insertion (entry_edge);\n-\n-  if (label)\n-    {\n-      basic_block bb = BLOCK_FOR_INSN (label);\n-      rtx_insn *bb_note = PREV_INSN (label);\n-      /* If the note preceding the label starts a basic block, and the\n-\t label is a member of the same basic block, interchange the two.  */\n-      if (bb_note != NULL_RTX\n-\t  && NOTE_INSN_BASIC_BLOCK_P (bb_note)\n-\t  && bb != NULL\n-\t  && bb == BLOCK_FOR_INSN (bb_note))\n-\t{\n-\t  reorder_insns_nobb (bb_note, bb_note, label);\n-\t  BB_HEAD (bb) = label;\n-\t}\n-    }\n }\n \n /* Initialize a variable CUM of type CUMULATIVE_ARGS"}]}