{"sha": "c5086228cd79f7baa7d8d3c4bba04a69ab756253", "node_id": "C_kwDOANBUbNoAKGM1MDg2MjI4Y2Q3OWY3YmFhN2Q4ZDNjNGJiYTA0YTY5YWI3NTYyNTM", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-03-13T16:38:49Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2022-03-18T15:29:50Z"}, "message": "testsuite, modules, Darwin: Adjust expected output for older OS versions.\n\nDarwin versions <= 10 (macOS 10.6) emit different diagnostics for the failure\ncase being tested by bad-mapper-1.C.  Adjust the dg- expressions to reflect this.\n\nSigned-off-by: Iain Sandoe <iain@sandoe.co.uk>\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/modules/bad-mapper-1.C: Make dg- expressions that match the\n\tdiagnostics output by earlier Darwin too.", "tree": {"sha": "5527cbddb9281a578bc5aaba5f1d1c3fae798475", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5527cbddb9281a578bc5aaba5f1d1c3fae798475"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c5086228cd79f7baa7d8d3c4bba04a69ab756253", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5086228cd79f7baa7d8d3c4bba04a69ab756253", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5086228cd79f7baa7d8d3c4bba04a69ab756253", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5086228cd79f7baa7d8d3c4bba04a69ab756253/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "63746c253a83be0022d920e045dfd356b1ca0149", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63746c253a83be0022d920e045dfd356b1ca0149", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63746c253a83be0022d920e045dfd356b1ca0149"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "6d0ed4b5895d000de461ac73600b0428e155ab17", "filename": "gcc/testsuite/g++.dg/modules/bad-mapper-1.C", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c5086228cd79f7baa7d8d3c4bba04a69ab756253/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbad-mapper-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c5086228cd79f7baa7d8d3c4bba04a69ab756253/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbad-mapper-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbad-mapper-1.C?ref=c5086228cd79f7baa7d8d3c4bba04a69ab756253", "patch": "@@ -1,6 +1,9 @@\n //  { dg-additional-options \"-fmodules-ts -fmodule-mapper=|this-will-not-work\" }\n import unique1.bob;\n-// { dg-error \"-:failed exec.*mapper.* .*this-will-not-work\" \"\" { target *-*-* } 0 }\n+// { dg-error \"-:failed exec.*mapper.* .*this-will-not-work\" \"\" { target { ! { *-*-darwin[89]* *-*-darwin10* } } } 0 }\n // { dg-prune-output \"fatal error:\" }\n // { dg-prune-output \"failed to read\" }\n // { dg-prune-output \"compilation terminated\" }\n+// { dg-error \"-:failed mapper handshake communication\" \"\" { target { *-*-darwin[89]* *-*-darwin10* } } 0 }\n+// { dg-prune-output \"trying to exec .this-will-not-work.\"  }\n+// { dg-prune-output \"unknown Compiled Module Interface\"  }"}]}