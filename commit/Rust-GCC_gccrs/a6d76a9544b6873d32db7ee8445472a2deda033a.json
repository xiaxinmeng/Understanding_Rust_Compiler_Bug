{"sha": "a6d76a9544b6873d32db7ee8445472a2deda033a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZkNzZhOTU0NGI2ODczZDMyZGI3ZWU4NDQ1NDcyYTJkZWRhMDMzYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-07-30T09:37:20Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-07-30T09:37:20Z"}, "message": "re PR c++/32108 (ICE with __label__ outside of block scope)\n\ncp/\n2007-07-30  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/32108\n\t* semantics.c (finish_label_stmt): Reject the __label__\n\textension outside function scopes.\n\ntestsuite/\n2007-07-30  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/32108\n\t* g++.dg/ext/label6.C: New.\n\nFrom-SVN: r127059", "tree": {"sha": "0e8a252c5c0d0359f7fe24e52ca3bc43a3ef72bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e8a252c5c0d0359f7fe24e52ca3bc43a3ef72bb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6d76a9544b6873d32db7ee8445472a2deda033a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6d76a9544b6873d32db7ee8445472a2deda033a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6d76a9544b6873d32db7ee8445472a2deda033a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6d76a9544b6873d32db7ee8445472a2deda033a/comments", "author": null, "committer": null, "parents": [{"sha": "5c24ddaf36be1236f276269d356257d59ff860b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c24ddaf36be1236f276269d356257d59ff860b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c24ddaf36be1236f276269d356257d59ff860b3"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "8004e19149324515e13613b395069de4d0e09769", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a6d76a9544b6873d32db7ee8445472a2deda033a", "patch": "@@ -1,3 +1,9 @@\n+2007-07-30  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/32108\n+\t* semantics.c (finish_label_stmt): Reject the __label__\n+\textension outside function scopes.\n+\n 2007-07-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* parser.c (eof_token): Un-constify."}, {"sha": "d80cd2b1128ce6802fe5351ddf15b26218b7821d", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=a6d76a9544b6873d32db7ee8445472a2deda033a", "patch": "@@ -1343,8 +1343,13 @@ finish_label_stmt (tree name)\n void\n finish_label_decl (tree name)\n {\n-  tree decl = declare_local_label (name);\n-  add_decl_expr (decl);\n+  if (!at_function_scope_p ())\n+    {\n+      error (\"__label__ declarations are only allowed in function scopes\");\n+      return;\n+    }\n+\n+  add_decl_expr (declare_local_label (name));\n }\n \n /* When DECL goes out of scope, make sure that CLEANUP is executed.  */"}, {"sha": "f60df69a862e22d7779359ab5051241f14410bae", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a6d76a9544b6873d32db7ee8445472a2deda033a", "patch": "@@ -1,3 +1,8 @@\n+2007-07-30  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/32108\n+\t* g++.dg/ext/label6.C: New.\n+\n 2007-07-29  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/32858"}, {"sha": "d026777eb9f688c3ff566886d60ad0ac52e9a816", "filename": "gcc/testsuite/g++.dg/ext/label6.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Flabel6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6d76a9544b6873d32db7ee8445472a2deda033a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Flabel6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Flabel6.C?ref=a6d76a9544b6873d32db7ee8445472a2deda033a", "patch": "@@ -0,0 +1,3 @@\n+// PR c++/32108\n+\n+__label__ L; // { dg-error \"function scopes\" }"}]}