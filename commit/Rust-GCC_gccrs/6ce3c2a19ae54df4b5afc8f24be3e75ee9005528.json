{"sha": "6ce3c2a19ae54df4b5afc8f24be3e75ee9005528", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNlM2MyYTE5YWU1NGRmNGI1YWZjOGYyNGJlM2U3NWVlOTAwNTUyOA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-02-21T23:52:14Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-02-21T23:52:14Z"}, "message": "(fix_argv): Rewrite.\n\nFrom-SVN: r9013", "tree": {"sha": "767f0d50edf13e2a00ed6ec15f69b9c47c6d78da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/767f0d50edf13e2a00ed6ec15f69b9c47c6d78da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ce3c2a19ae54df4b5afc8f24be3e75ee9005528", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ce3c2a19ae54df4b5afc8f24be3e75ee9005528", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ce3c2a19ae54df4b5afc8f24be3e75ee9005528", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ce3c2a19ae54df4b5afc8f24be3e75ee9005528/comments", "author": null, "committer": null, "parents": [{"sha": "3709124dc1d418e37577a27623594f61ff83c91c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3709124dc1d418e37577a27623594f61ff83c91c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3709124dc1d418e37577a27623594f61ff83c91c"}], "stats": {"total": 67, "additions": 35, "deletions": 32}, "files": [{"sha": "74b2625e10a5c6c5f586889add3d443a28d9e921", "filename": "gcc/gcc.c", "status": "modified", "additions": 35, "deletions": 32, "changes": 67, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ce3c2a19ae54df4b5afc8f24be3e75ee9005528/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ce3c2a19ae54df4b5afc8f24be3e75ee9005528/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=6ce3c2a19ae54df4b5afc8f24be3e75ee9005528", "patch": "@@ -2163,39 +2163,42 @@ pexecute (search_flag, program, argv, not_last)\n \n #ifdef WINNT\n \n-char **\n+/* This is a kludge to get around the Microsoft C spawn functions' propensity\n+   to remove the outermost set of double quotes from all arguments.  */\n+\n+const char * const\n fix_argv (argvec)\n-     char **argvec\n+     char **argvec;\n {\n-   int i;\n-\n-   for (i = 1; argvec[i] != 0; i++)\n-     {\n-       int len, j;\n-       char *temp, *newtemp;\n-\n-       temp = argvec[i];\n-       len = strlen (temp);\n-       for (j = 0; j < len; j++)\n-\t {\n-\t   if (temp[j] == '\"')\n-\t     {\n-\t       newtemp = xmalloc (len + 2);\n-\t       strncpy (newtemp, temp, j);\n-\t       newtemp [j] = '\\\\';\n-\t       strncpy (&newtemp [j+1], &temp [j], len-j);\n-\t       newtemp [len+1] = 0;\n-\t       free (temp);\n-\t       temp = newtemp;\n-\t       len++;\n-\t       j++;\n-\t     }\n-\t }\n-\n-       argvec[i] = temp;\n-     }\n-\n-   return argvec;\n+  int i;\n+\n+  for (i = 1; argvec[i] != 0; i++)\n+    {\n+      int len, j;\n+      char *temp, *newtemp;\n+\n+      temp = argvec[i];\n+      len = strlen (temp);\n+      for (j = 0; j < len; j++)\n+        {\n+          if (temp[j] == '\"')\n+            {\n+              newtemp = xmalloc (len + 2);\n+              strncpy (newtemp, temp, j);\n+              newtemp [j] = '\\\\';\n+              strncpy (&newtemp [j+1], &temp [j], len-j);\n+              newtemp [len+1] = 0;\n+              free (temp);\n+              temp = newtemp;\n+              len++;\n+              j++;\n+            }\n+        }\n+\n+        argvec[i] = temp;\n+      }\n+\n+  return (const char* const*) argvec;\n }\n \n #define FIX_ARGV(a) fix_argv(a)\n@@ -2204,7 +2207,7 @@ fix_argv (argvec)\n \n #define FIX_ARGV(a) a\n \n-#endif /* OS2 or WINNT */\n+#endif\n \n static int\n pexecute (search_flag, program, argv, not_last)"}]}