{"sha": "ef6bd9cda95c5f40965c195ce0545df85652a6ed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWY2YmQ5Y2RhOTVjNWY0MDk2NWMxOTVjZTA1NDVkZjg1NjUyYTZlZA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-05-14T20:17:19Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-05-14T20:17:19Z"}, "message": "re PR target/85756 (wrong code at -Os on x86-64-linux-gnu in 32-bit mode)\n\n\tPR target/85756\n\t* gnat.dg/opt70.adb: New test.\n\t* gnat.dg/opt70_pkg.ad[sb]: New helper.\n\nFrom-SVN: r260239", "tree": {"sha": "3c63199bd25bf38da83b872a428a35f827e076d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c63199bd25bf38da83b872a428a35f827e076d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ef6bd9cda95c5f40965c195ce0545df85652a6ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef6bd9cda95c5f40965c195ce0545df85652a6ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef6bd9cda95c5f40965c195ce0545df85652a6ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef6bd9cda95c5f40965c195ce0545df85652a6ed/comments", "author": null, "committer": null, "parents": [{"sha": "403f22aae5b6e4e8f0e50b89b41a82aaf910931e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403f22aae5b6e4e8f0e50b89b41a82aaf910931e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/403f22aae5b6e4e8f0e50b89b41a82aaf910931e"}], "stats": {"total": 81, "additions": 81, "deletions": 0}, "files": [{"sha": "4a0b371cecc50f4def04f956eb614150d8881fda", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ef6bd9cda95c5f40965c195ce0545df85652a6ed", "patch": "@@ -1,3 +1,9 @@\n+2018-05-14  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR target/85756\n+\t* gnat.dg/opt70.adb: New test.\n+\t* gnat.dg/opt70_pkg.ad[sb]: New helper.\n+\n 2018-05-14  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* gcc.target/aarch64/crypto-fuse-1.c: New test."}, {"sha": "fcf55432b1cce5fa2a8ac7c0b26057d559caca6b", "filename": "gcc/testsuite/gnat.dg/opt70.adb", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70.adb?ref=ef6bd9cda95c5f40965c195ce0545df85652a6ed", "patch": "@@ -0,0 +1,13 @@\n+-- { dg-do run }\n+-- { dg-options \"-O2\" }\n+\n+with Ada.Calendar;\n+with Opt70_Pkg;\n+\n+procedure Opt70 is\n+  T : Ada.Calendar.Time := Ada.Calendar.Time_Of (2001, 10, 31);\n+begin\n+  if Opt70_Pkg.Image (T, \"%y\") /= \"01\" then\n+    raise Program_Error;\n+  end if;\n+end;"}, {"sha": "d6a9f3943b0acc736d1c6211b6898b3d27ac75af", "filename": "gcc/testsuite/gnat.dg/opt70_pkg.adb", "status": "added", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70_pkg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70_pkg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70_pkg.adb?ref=ef6bd9cda95c5f40965c195ce0545df85652a6ed", "patch": "@@ -0,0 +1,55 @@\n+with Ada.Calendar;          use Ada.Calendar;\n+with Ada.Strings.Unbounded; use Ada.Strings.Unbounded;\n+with GNAT.Calendar;         use GNAT.Calendar;\n+\n+package body Opt70_Pkg is\n+\n+   type Enum is (None, Zero, Space);\n+\n+   type Sec_Number is mod 2 ** 64;\n+\n+   function Image (N : Sec_Number; Pad : Enum; Length : Natural) return String;\n+\n+   function Image (N : Natural; Pad : Enum; Length: Natural) return String is\n+   begin\n+      return Image (Sec_Number (N), Pad, Length);\n+   end;\n+\n+   function Image (N : Sec_Number; Pad : Enum; Length : Natural) return String is\n+\n+      function Pad_Char return String is\n+      begin\n+         case Pad is\n+            when None  => return \"\";\n+            when Zero  => return \"00\";\n+            when Space => return \"  \";\n+         end case;\n+      end;\n+\n+      NI  : constant String := Sec_Number'Image (N);\n+      NIP : constant String := Pad_Char & NI (2 .. NI'Last);\n+\n+   begin\n+      return NIP (NIP'Last - Length + 1 .. NIP'Last);\n+   end;\n+\n+   function Image (Date : Ada.Calendar.Time; S : String) return String is\n+      Result     : Unbounded_String := Null_Unbounded_String;\n+      Year       : Year_Number;\n+      Month      : Month_Number;\n+      Day        : Day_Number;\n+      Hour       : Hour_Number;\n+      Minute     : Minute_Number;\n+      Second     : Second_Number;\n+      Sub_Second : Second_Duration;\n+   begin\n+      Split (Date, Year, Month, Day, Hour, Minute, Second, Sub_Second);\n+      case S (S'First + 1) is\n+         when 'S' => Result := Result & Image (Second, Zero, 2);\n+         when 'y' => Result := Result & Image (Sec_Number (1), Zero, 2);\n+         when others => null;\n+      end case;\n+      return To_String (Result);\n+   end;\n+\n+end Opt70_Pkg;"}, {"sha": "d578d0beccb53c7a6d94d03bc5831752ae335812", "filename": "gcc/testsuite/gnat.dg/opt70_pkg.ads", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ef6bd9cda95c5f40965c195ce0545df85652a6ed/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt70_pkg.ads?ref=ef6bd9cda95c5f40965c195ce0545df85652a6ed", "patch": "@@ -0,0 +1,7 @@\n+with Ada.Calendar;\n+\n+package Opt70_Pkg is\n+\n+   function Image (Date : Ada.Calendar.Time; S : String) return String;\n+\n+end Opt70_Pkg;"}]}