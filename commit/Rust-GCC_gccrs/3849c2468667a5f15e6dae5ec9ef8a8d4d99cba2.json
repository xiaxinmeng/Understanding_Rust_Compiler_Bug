{"sha": "3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzg0OWMyNDY4NjY3YTVmMTVlNmRhZTVlYzllZjhhOGQ0ZDk5Y2JhMg==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2014-08-01T08:34:02Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-08-01T08:34:02Z"}, "message": "debug.adb: Remove doc for gnatmake/gprbuild switch -ds.\n\n2014-08-01  Vincent Celier  <celier@adacore.com>\n\n\t* debug.adb: Remove doc for gnatmake/gprbuild switch -ds.\n\t* make.adb (List_Bad_Compilations): Use Opt.No_Exit_Message\n\tinstead of Debug.Debug_Flag_S.\n\t* makeutl.adb (Finish_Program, Fail_Program): Use Opt flag\n\tNo_Exit_Message instead of Debug.Debug_Flag_S to suppress exit\n\terror messages.\n\t* makeutl.ads (No_Exit_Message_Option): New constant string\n\tfor switch --no-exit-message.\n\t* opt.ads (No_Exit_Message): New Boolean flag, defaulted to False.\n\t* switch-m.adb (Scan_Make_Switches): Recognize new switch\n\t--no-exit-message.\n\nFrom-SVN: r213424", "tree": {"sha": "100115cccc2eee78fbcc573f0a314fbc9d2692f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/100115cccc2eee78fbcc573f0a314fbc9d2692f5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "16b10ccc1f7d3deeaaa5b976fcbca04fba035e9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16b10ccc1f7d3deeaaa5b976fcbca04fba035e9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16b10ccc1f7d3deeaaa5b976fcbca04fba035e9c"}], "stats": {"total": 48, "additions": 34, "deletions": 14}, "files": [{"sha": "502df3ef0f3a30967f4beb86c8c7c96be5d67fb0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "patch": "@@ -1,3 +1,17 @@\n+2014-08-01  Vincent Celier  <celier@adacore.com>\n+\n+\t* debug.adb: Remove doc for gnatmake/gprbuild switch -ds.\n+\t* make.adb (List_Bad_Compilations): Use Opt.No_Exit_Message\n+\tinstead of Debug.Debug_Flag_S.\n+\t* makeutl.adb (Finish_Program, Fail_Program): Use Opt flag\n+\tNo_Exit_Message instead of Debug.Debug_Flag_S to suppress exit\n+\terror messages.\n+\t* makeutl.ads (No_Exit_Message_Option): New constant string\n+\tfor switch --no-exit-message.\n+\t* opt.ads (No_Exit_Message): New Boolean flag, defaulted to False.\n+\t* switch-m.adb (Scan_Make_Switches): Recognize new switch\n+\t--no-exit-message.\n+\n 2014-08-01  Arnaud Charlet  <charlet@adacore.com>\n \n \t* exp_vfpt.adb, exp_vfpt.ads: Removed, no longer used."}, {"sha": "94da8ec7db841adabdbb6801995cc90922f51634", "filename": "gcc/ada/debug.adb", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fdebug.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fdebug.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fdebug.adb?ref=3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "patch": "@@ -214,7 +214,7 @@ package body Debug is\n    --  dp  Prints the contents of the Q used by Make.Compile_Sources\n    --  dq  Prints source files as they are enqueued and dequeued\n    --  dr\n-   --  ds  Suppress exit message when compilation fails\n+   --  ds\n    --  dt  Display time stamps when there is a mismatch\n    --  du  List units as their ali files are acquired\n    --  dv\n@@ -801,10 +801,6 @@ package body Debug is\n    --      used by routine Make.Compile_Sources. Useful to figure out the\n    --      order in which sources are recompiled.\n \n-   --  ds  When one or more compilations compilation fail, gnatmake does not\n-   --      issue an error message such as:\n-   --         gnatmake: \"/path/to/main.adb\" compilation error\n-\n    --  dt  When a time stamp mismatch has been found for an ALI file,\n    --      display the source file name, the time stamp expected and\n    --      the time stamp found.\n@@ -824,10 +820,6 @@ package body Debug is\n    --      of execution, such as temporary config pragma files, mapping\n    --      files or project path files.\n \n-   --  ds  When one or more compilations compilation fail, gprbuild does not\n-   --      issue the error message:\n-   --         gprbuild: *** compilation phase failed\n-\n    --  dt  When a time stamp mismatch has been found for an ALI file,\n    --      display the source file name, the time stamp expected and\n    --      the time stamp found."}, {"sha": "05cb6f14308aa6c1fbedbfd119229ba67e02a962", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "patch": "@@ -6948,7 +6948,7 @@ package body Make is\n \n    procedure List_Bad_Compilations is\n    begin\n-      if not Debug.Debug_Flag_S then\n+      if not No_Exit_Message then\n          for J in Bad_Compilation.First .. Bad_Compilation.Last loop\n             if Bad_Compilation.Table (J).File = No_File then\n                null;"}, {"sha": "9dde6cb0194e665798c78a53aae0313e4b7e83a0", "filename": "gcc/ada/makeutl.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fmakeutl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fmakeutl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.adb?ref=3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "patch": "@@ -777,7 +777,7 @@ package body Makeutl is\n       Flush_Messages : Boolean := True)\n    is\n    begin\n-      if Flush_Messages and then not Debug.Debug_Flag_S then\n+      if Flush_Messages and then not No_Exit_Message then\n          if Total_Errors_Detected /= 0 or else Warnings_Detected /= 0 then\n             Errutil.Finalize;\n          end if;\n@@ -806,13 +806,13 @@ package body Makeutl is\n \n       if S'Length > 0 then\n          if Exit_Code /= E_Success then\n-            if Debug.Debug_Flag_S then\n+            if No_Exit_Message then\n                Osint.Exit_Program (E_Fatal);\n             else\n                Osint.Fail (S);\n             end if;\n \n-         elsif not Debug.Debug_Flag_S then\n+         elsif not No_Exit_Message then\n             Write_Str (S);\n          end if;\n       end if;"}, {"sha": "ff7b492db7f041775cf03e2e83b59f6da14ec6da", "filename": "gcc/ada/makeutl.ads", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fmakeutl.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fmakeutl.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.ads?ref=3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "patch": "@@ -79,6 +79,12 @@ package Makeutl is\n    Create_Map_File_Switch : constant String := \"--create-map-file\";\n    --  Switch to create a map file when an executable is linked\n \n+   No_Exit_Message_Option : constant String := \"--no-exit-message\";\n+   --  Switch to suppress exit error message when there are compilation\n+   --  failures. This is useful when a tool, such as gnatprove, call silently\n+   --  the builder and do not want to pollute its output with error messages\n+   --  coming from the builder. This is an internal switch.\n+\n    Load_Standard_Base : Boolean := True;\n    --  False when gprbuild is called with --db-\n "}, {"sha": "bdbdf0aa0a697ad5b2d25e4926ab072cfe2c068e", "filename": "gcc/ada/opt.ads", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fopt.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fopt.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fopt.ads?ref=3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "patch": "@@ -1938,6 +1938,11 @@ package Opt is\n    --  This switch is not set when the pragma appears ahead of a given\n    --  unit, so it does not affect the compilation of other units.\n \n+   No_Exit_Message : Boolean := False;\n+   --  GNATMAKE, GPRBUILD\n+   --  Set with switch --no-exit-message. When True, if there are compilation\n+   --  failure, the builder does not issue an exit error message.\n+\n    Optimize_Alignment_Config : Character;\n    --  GNAT\n    --  This is the value of the configuration switch that controls the"}, {"sha": "aba22230522beca1935487eba80ddc7d736b1026", "filename": "gcc/ada/switch-m.adb", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fswitch-m.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2/gcc%2Fada%2Fswitch-m.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-m.adb?ref=3849c2468667a5f15e6dae5ec9ef8a8d4d99cba2", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2013, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -790,6 +790,9 @@ package body Switch.M is\n          elsif Switch_Chars = Makeutl.Single_Compile_Per_Obj_Dir_Switch then\n             Opt.One_Compilation_Per_Obj_Dir := True;\n \n+         elsif Switch_Chars = Makeutl.No_Exit_Message_Option then\n+            Opt.No_Exit_Message := True;\n+\n          elsif Switch_Chars (Ptr) = '-' then\n             Bad_Switch (Switch_Chars);\n "}]}