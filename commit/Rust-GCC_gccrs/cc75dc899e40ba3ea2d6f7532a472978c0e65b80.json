{"sha": "cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2M3NWRjODk5ZTQwYmEzZWEyZDZmNzUzMmE0NzI5NzhjMGU2NWI4MA==", "commit": {"author": {"name": "Felix Yang", "email": "felix.yang@huawei.com", "date": "2014-12-16T14:58:03Z"}, "committer": {"name": "Fei Yang", "email": "fyang@gcc.gnu.org", "date": "2014-12-16T14:58:03Z"}, "message": "re PR target/64240 ([AArch64] SMS-3.c causes runtime exception(segfault).)\n\n+       PR rtl-optimization/64240\n+       * ddg.c (mark_mem_use): Check *iter instead of *x.\n\nFrom-SVN: r218780", "tree": {"sha": "3ee45c95e7b1169b6fc197d4a5c5dac52a18ff00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ee45c95e7b1169b6fc197d4a5c5dac52a18ff00"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/comments", "author": null, "committer": null, "parents": [{"sha": "5007f79810c5192d217be89256cef2fc9b9989ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5007f79810c5192d217be89256cef2fc9b9989ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5007f79810c5192d217be89256cef2fc9b9989ce"}], "stats": {"total": 55, "additions": 54, "deletions": 1}, "files": [{"sha": "4b134ad05194ce00c1497e9fceb8485e13f2a300", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "patch": "@@ -1,3 +1,8 @@\n+2014-12-16  Felix Yang  <felix.yang@huawei.com>\n+\n+\tPR rtl-optimization/64240\n+\t* ddg.c (mark_mem_use): Check *iter instead of *x.\n+\n 2014-12-16  Martin Liska  <mliska@suse.cz>\n \n \tPR ipa/64278"}, {"sha": "2dd39f30a1cd5db93849979a9ddf24a3ffb94326", "filename": "gcc/ddg.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2Fddg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2Fddg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fddg.c?ref=cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "patch": "@@ -77,7 +77,7 @@ mark_mem_use (rtx *x, void *)\n {\n   subrtx_iterator::array_type array;\n   FOR_EACH_SUBRTX (iter, array, *x, NONCONST)\n-    if (MEM_P (*x))\n+    if (MEM_P (*iter))\n       {\n \tmem_ref_p = true;\n \tbreak;"}, {"sha": "47565a2f465f03561b90fa4bc97e1ad466a6de11", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "patch": "@@ -1,3 +1,8 @@\n+2014-12-16  Felix Yang  <felix.yang@huawei.com>\n+\n+\tPR rtl-optimization/64240\n+\t* gcc.dg/sms-12.c: New test.\n+\n 2014-12-16  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/64244"}, {"sha": "23cff3b137a6dd28c700734f2497be5fcdf10418", "filename": "gcc/testsuite/gcc.dg/sms-12.c", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2Ftestsuite%2Fgcc.dg%2Fsms-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc75dc899e40ba3ea2d6f7532a472978c0e65b80/gcc%2Ftestsuite%2Fgcc.dg%2Fsms-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsms-12.c?ref=cc75dc899e40ba3ea2d6f7532a472978c0e65b80", "patch": "@@ -0,0 +1,43 @@\n+/* { dg-do run } */\n+/* { dg-skip-if \"\" { ! { aarch64*-*-* } } { \"*\" } { \"\" } } */\n+/* { dg-options \"-O2 -fmodulo-sched -funroll-loops -fdump-rtl-sms --param sms-min-sc=1 -fmodulo-sched-allow-regmoves -fPIC\" } */\n+\n+extern void abort (void);\n+\n+int X[1000]={0};\n+int Y[1000]={0};\n+\n+extern void abort (void);\n+\n+__attribute__ ((noinline))\n+int\n+foo (int len, long a)\n+{\n+  int i;\n+  long res = a;\n+\n+  len = 1000;\n+  for (i = 0; i < len; i++)\n+    res += X[i]* Y[i];\n+\n+  if (res != 601)\n+    abort ();\n+\n+}\n+\n+int\n+main ()\n+{\n+  X[0] = Y[1] = 2;\n+  Y[0] = X[1] = 21;\n+  X[2] = Y[3] = 3;\n+  Y[2] = X[3] = 31;\n+  X[4] = Y[5] = 4;\n+  Y[4] = X[5] = 41;\n+\n+  foo (6, 3);\n+  return 0;\n+}\n+\n+/* { dg-final { cleanup-rtl-dump \"sms\" } } */\n+"}]}