{"sha": "46c47420a5fefd4d9d02b0db347235dd74e20fb2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZjNDc0MjBhNWZlZmQ0ZDlkMDJiMGRiMzQ3MjM1ZGQ3NGUyMGZiMg==", "commit": {"author": {"name": "Stefan Schulze Frielinghaus", "email": "stefansf@linux.ibm.com", "date": "2021-04-12T14:08:42Z"}, "committer": {"name": "Stefan Schulze Frielinghaus", "email": "stefansf@linux.ibm.com", "date": "2021-04-12T14:08:42Z"}, "message": "IBM Z: Add alternative to *movdi_{31,64} in order to load a DFP zero\n\ngcc/ChangeLog:\n\n\t* config/s390/s390.md (\"*movdi_31\", \"*movdi_64\"): Add\n\t  alternative in order to load a DFP zero.", "tree": {"sha": "9b6c1038e3f731cb4e02106b298439cab9aaa85d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b6c1038e3f731cb4e02106b298439cab9aaa85d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46c47420a5fefd4d9d02b0db347235dd74e20fb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46c47420a5fefd4d9d02b0db347235dd74e20fb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46c47420a5fefd4d9d02b0db347235dd74e20fb2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46c47420a5fefd4d9d02b0db347235dd74e20fb2/comments", "author": {"login": "stefan-sf-ibm", "id": 73470131, "node_id": "MDQ6VXNlcjczNDcwMTMx", "avatar_url": "https://avatars.githubusercontent.com/u/73470131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefan-sf-ibm", "html_url": "https://github.com/stefan-sf-ibm", "followers_url": "https://api.github.com/users/stefan-sf-ibm/followers", "following_url": "https://api.github.com/users/stefan-sf-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/stefan-sf-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefan-sf-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefan-sf-ibm/subscriptions", "organizations_url": "https://api.github.com/users/stefan-sf-ibm/orgs", "repos_url": "https://api.github.com/users/stefan-sf-ibm/repos", "events_url": "https://api.github.com/users/stefan-sf-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/stefan-sf-ibm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "stefan-sf-ibm", "id": 73470131, "node_id": "MDQ6VXNlcjczNDcwMTMx", "avatar_url": "https://avatars.githubusercontent.com/u/73470131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefan-sf-ibm", "html_url": "https://github.com/stefan-sf-ibm", "followers_url": "https://api.github.com/users/stefan-sf-ibm/followers", "following_url": "https://api.github.com/users/stefan-sf-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/stefan-sf-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefan-sf-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefan-sf-ibm/subscriptions", "organizations_url": "https://api.github.com/users/stefan-sf-ibm/orgs", "repos_url": "https://api.github.com/users/stefan-sf-ibm/repos", "events_url": "https://api.github.com/users/stefan-sf-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/stefan-sf-ibm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bb8f2c32306445979be10a91bd4a3febf34c554e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb8f2c32306445979be10a91bd4a3febf34c554e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb8f2c32306445979be10a91bd4a3febf34c554e"}], "stats": {"total": 25, "additions": 14, "deletions": 11}, "files": [{"sha": "7faf775fbf2df720e2c336be14227832e33f98cd", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46c47420a5fefd4d9d02b0db347235dd74e20fb2/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46c47420a5fefd4d9d02b0db347235dd74e20fb2/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=46c47420a5fefd4d9d02b0db347235dd74e20fb2", "patch": "@@ -1868,9 +1868,9 @@\n \n (define_insn \"*movdi_64\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\"\n-         \"=d,    d,    d,    d,    d, d,    d,    d,f,d,d,d,d,d,T,!*f,!*f,!*f,!R,!T,b,Q,d,t,Q,t,v,v,v,d,v,R,d\")\n+         \"=d,    d,    d,    d,    d, d,    d,    d,f,d,!*f,d,d,d,d,T,!*f,!*f,!*f,!R,!T,b,Q,d,t,Q,t,v,v,v,d,v,R,d\")\n         (match_operand:DI 1 \"general_operand\"\n-         \" K,N0HD0,N1HD0,N2HD0,N3HD0,Os,N0SD0,N1SD0,d,f,L,b,d,T,d, *f,  R,  T,*f,*f,d,K,t,d,t,Q,K,v,d,v,R,v,ZL\"))]\n+         \" K,N0HD0,N1HD0,N2HD0,N3HD0,Os,N0SD0,N1SD0,d,f,j00,L,b,d,T,d, *f,  R,  T,*f,*f,d,K,t,d,t,Q,K,v,d,v,R,v,ZL\"))]\n   \"TARGET_ZARCH\"\n   \"@\n    lghi\\t%0,%h1\n@@ -1883,6 +1883,7 @@\n    llilf\\t%0,%k1\n    ldgr\\t%0,%1\n    lgdr\\t%0,%1\n+   lzdr\\t%0\n    lay\\t%0,%a1\n    lgrl\\t%0,%1\n    lgr\\t%0,%1\n@@ -1906,13 +1907,13 @@\n    vleg\\t%v0,%1,0\n    vsteg\\t%v1,%0,0\n    larl\\t%0,%1\"\n-  [(set_attr \"op_type\" \"RI,RI,RI,RI,RI,RIL,RIL,RIL,RRE,RRE,RXY,RIL,RRE,RXY,\n+  [(set_attr \"op_type\" \"RI,RI,RI,RI,RI,RIL,RIL,RIL,RRE,RRE,RRE,RXY,RIL,RRE,RXY,\n                         RXY,RR,RX,RXY,RX,RXY,RIL,SIL,*,*,RS,RS,VRI,VRR,VRS,VRS,\n                         VRX,VRX,RIL\")\n-   (set_attr \"type\" \"*,*,*,*,*,*,*,*,floaddf,floaddf,la,larl,lr,load,store,\n+   (set_attr \"type\" \"*,*,*,*,*,*,*,*,floaddf,floaddf,fsimpdf,la,larl,lr,load,store,\n                      floaddf,floaddf,floaddf,fstoredf,fstoredf,larl,*,*,*,*,\n                      *,*,*,*,*,*,*,larl\")\n-   (set_attr \"cpu_facility\" \"*,*,*,*,*,extimm,extimm,extimm,dfp,dfp,longdisp,\n+   (set_attr \"cpu_facility\" \"*,*,*,*,*,extimm,extimm,extimm,dfp,dfp,*,longdisp,\n                              z10,*,*,*,*,*,longdisp,*,longdisp,\n                              z10,z10,*,*,*,*,vx,vx,vx,vx,vx,vx,*\")\n    (set_attr \"z10prop\" \"z10_fwd_A1,\n@@ -1925,6 +1926,7 @@\n                         z10_fwd_E1,\n                         *,\n                         *,\n+\t\t\t*,\n                         z10_fwd_A1,\n                         z10_fwd_A3,\n                         z10_fr_E1,\n@@ -1942,7 +1944,7 @@\n                         *,\n                         *,*,*,*,*,*,*,\n                         z10_super_A1\")\n-   (set_attr \"relative_long\" \"*,*,*,*,*,*,*,*,*,*,\n+   (set_attr \"relative_long\" \"*,*,*,*,*,*,*,*,*,*,*,\n                               *,yes,*,*,*,*,*,*,*,*,\n                               yes,*,*,*,*,*,*,*,*,*,\n                               *,*,yes\")\n@@ -2002,9 +2004,9 @@\n \n (define_insn \"*movdi_31\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\"\n-                            \"=d,d,Q,S,d  ,o,!*f,!*f,!*f,!R,!T,d\")\n+                            \"=d,d,Q,S,d  ,o,!*f,!*f,!*f,!*f,!R,!T,d\")\n         (match_operand:DI 1 \"general_operand\"\n-                            \" Q,S,d,d,dPT,d, *f,  R,  T,*f,*f,b\"))]\n+                            \" Q,S,d,d,dPT,d, *f,  R,  T,j00,*f,*f,b\"))]\n   \"!TARGET_ZARCH\"\n   \"@\n    lm\\t%0,%N0,%S1\n@@ -2016,12 +2018,13 @@\n    ldr\\t%0,%1\n    ld\\t%0,%1\n    ldy\\t%0,%1\n+   lzdr\\t%0\n    std\\t%1,%0\n    stdy\\t%1,%0\n    #\"\n-  [(set_attr \"op_type\" \"RS,RSY,RS,RSY,*,*,RR,RX,RXY,RX,RXY,*\")\n-   (set_attr \"type\" \"lm,lm,stm,stm,*,*,floaddf,floaddf,floaddf,fstoredf,fstoredf,*\")\n-   (set_attr \"cpu_facility\" \"*,longdisp,*,longdisp,*,*,*,*,longdisp,*,longdisp,z10\")])\n+  [(set_attr \"op_type\" \"RS,RSY,RS,RSY,*,*,RR,RX,RXY,RRE,RX,RXY,*\")\n+   (set_attr \"type\" \"lm,lm,stm,stm,*,*,floaddf,floaddf,floaddf,fsimpdf,fstoredf,fstoredf,*\")\n+   (set_attr \"cpu_facility\" \"*,longdisp,*,longdisp,*,*,*,*,longdisp,*,*,longdisp,z10\")])\n \n ; For a load from a symbol ref we can use one of the target registers\n ; together with larl to load the address."}]}