{"sha": "0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGMzZWYwY2MyYTViYmYzNmY1ZTI3NjczMDE0MDhkMWQ0ZWI1MTBmYQ==", "commit": {"author": {"name": "Gary Dismukes", "email": "dismukes@adacore.com", "date": "2017-04-27T08:45:22Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2017-04-27T08:45:22Z"}, "message": "exp_ch4.adb, [...]: Minor typo fix and reformatting.\n\n2017-04-27  Gary Dismukes  <dismukes@adacore.com>\n\n\t* exp_ch4.adb, sem_ch4.adb: Minor typo fix and reformatting.\n\nFrom-SVN: r247294", "tree": {"sha": "a5b9b65161e32f16d40bdf0f228b8193536fed02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5b9b65161e32f16d40bdf0f228b8193536fed02"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa/comments", "author": {"login": "dismukes", "id": 50880541, "node_id": "MDQ6VXNlcjUwODgwNTQx", "avatar_url": "https://avatars.githubusercontent.com/u/50880541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dismukes", "html_url": "https://github.com/dismukes", "followers_url": "https://api.github.com/users/dismukes/followers", "following_url": "https://api.github.com/users/dismukes/following{/other_user}", "gists_url": "https://api.github.com/users/dismukes/gists{/gist_id}", "starred_url": "https://api.github.com/users/dismukes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dismukes/subscriptions", "organizations_url": "https://api.github.com/users/dismukes/orgs", "repos_url": "https://api.github.com/users/dismukes/repos", "events_url": "https://api.github.com/users/dismukes/events{/privacy}", "received_events_url": "https://api.github.com/users/dismukes/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "985b839307f824880481ed840c4431bbae440073", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/985b839307f824880481ed840c4431bbae440073", "html_url": "https://github.com/Rust-GCC/gccrs/commit/985b839307f824880481ed840c4431bbae440073"}], "stats": {"total": 127, "additions": 65, "deletions": 62}, "files": [{"sha": "5f25858abc7620f71824c6e570a71e55ddc5a71b", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa", "patch": "@@ -1,3 +1,7 @@\n+2017-04-27  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* exp_ch4.adb, sem_ch4.adb: Minor typo fix and reformatting.\n+\n 2017-04-25  Arnaud Charlet  <charlet@adacore.com>\n \n \t* gnat_rm.texi, gnat_ugn.texi,"}, {"sha": "cf3f2694fa3e31a1dd4e4076fb9bfd5baa1f3f22", "filename": "gcc/ada/exp_ch4.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa/gcc%2Fada%2Fexp_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa/gcc%2Fada%2Fexp_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch4.adb?ref=0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa", "patch": "@@ -4869,11 +4869,10 @@ package body Exp_Ch4 is\n       else\n          if Generate_C_Code then\n \n-            --  We cannot ensure that correct C code will be generated if\n-            --  any temporary is created down the line (to e.g. handle\n-            --  checks or capture values) since we might end up with\n-            --  dangling references to local variables, so better be safe\n-            --  and reject the construct.\n+            --  We cannot ensure that correct C code will be generated if any\n+            --  temporary is created down the line (to e.g. handle checks or\n+            --  capture values) since we might end up with dangling references\n+            --  to local variables, so better be safe and reject the construct.\n \n             Error_Msg_N\n               (\"case expression too complex, use case statement instead\", N);"}, {"sha": "d97bdbb8b296a411ea2f58fe0773ba5f8c4a9aae", "filename": "gcc/ada/sem_ch4.adb", "status": "modified", "additions": 57, "deletions": 57, "changes": 114, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa/gcc%2Fada%2Fsem_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa/gcc%2Fada%2Fsem_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch4.adb?ref=0c3ef0cc2a5bbf36f5e2767301408d1d4eb510fa", "patch": "@@ -7521,20 +7521,20 @@ package body Sem_Ch4 is\n    is\n       Pref_Typ : constant Entity_Id := Etype (Prefix);\n \n+      function Constant_Indexing_OK return Boolean;\n+      --  Constant_Indexing is legal if there is no Variable_Indexing defined\n+      --  for the type, or else node not a target of assignment, or an actual\n+      --  for an IN OUT or OUT formal (RM 4.1.6 (11)).\n+\n       function Expr_Matches_In_Formal\n         (Subp : Entity_Id;\n          Par  : Node_Id) return Boolean;\n       --  Find formal corresponding to given indexed component that is an\n       --  actual in a call. Note that the enclosing subprogram call has not\n-      --  beenanalyzed yet, and the parameter list is not normalized, so\n+      --  been analyzed yet, and the parameter list is not normalized, so\n       --  that if the argument is a parameter association we must match it\n       --  by name and not by position.\n \n-      function Constant_Indexing_OK return Boolean;\n-      --  Constant_Indexing is legal if there is no Variable_Indexing defined\n-      --  for the type, or else node not a target of assignment, or an actual\n-      --  for an IN OUT or OUT formal (RM 4.1.6 (11)).\n-\n       function Find_Indexing_Operations\n         (T           : Entity_Id;\n          Nam         : Name_Id;\n@@ -7544,56 +7544,6 @@ package body Sem_Ch4 is\n       --  interpretations. Flag Is_Constant should be set when the context is\n       --  constant indexing.\n \n-      -----------------------------\n-      -- Expr_Matches_In_Formal  --\n-      -----------------------------\n-\n-      function Expr_Matches_In_Formal\n-        (Subp : Entity_Id;\n-         Par  : Node_Id) return Boolean\n-      is\n-         Actual : Node_Id;\n-         Formal : Node_Id;\n-\n-      begin\n-         Formal := First_Formal (Subp);\n-         Actual := First  (Parameter_Associations ((Parent (Par))));\n-\n-         if Nkind (Par) /= N_Parameter_Association then\n-\n-            --  Match by position.\n-\n-            while Present (Actual) and then Present (Formal) loop\n-               exit when Actual = Par;\n-               Next (Actual);\n-\n-               if Present (Formal) then\n-                  Next_Formal (Formal);\n-\n-               --  Otherwise this is a parameter mismatch, the error is\n-               --  reported elsewhere, or else variable indexing is implied.\n-\n-               else\n-                  return False;\n-               end if;\n-            end loop;\n-\n-         else\n-            --  Match by name\n-\n-            while Present (Formal) loop\n-               exit when Chars (Formal) = Chars (Selector_Name (Par));\n-               Next_Formal (Formal);\n-\n-               if No (Formal) then\n-                  return False;\n-               end if;\n-            end loop;\n-         end if;\n-\n-         return Present (Formal) and then Ekind (Formal) = E_In_Parameter;\n-      end Expr_Matches_In_Formal;\n-\n       --------------------------\n       -- Constant_Indexing_OK --\n       --------------------------\n@@ -7653,7 +7603,7 @@ package body Sem_Ch4 is\n                         end loop;\n                      end;\n \n-                     --  All interpretations have a matching in-formal.\n+                     --  All interpretations have a matching in-mode formal\n \n                      return True;\n \n@@ -7711,6 +7661,56 @@ package body Sem_Ch4 is\n          return True;\n       end Constant_Indexing_OK;\n \n+      -----------------------------\n+      -- Expr_Matches_In_Formal  --\n+      -----------------------------\n+\n+      function Expr_Matches_In_Formal\n+        (Subp : Entity_Id;\n+         Par  : Node_Id) return Boolean\n+      is\n+         Actual : Node_Id;\n+         Formal : Node_Id;\n+\n+      begin\n+         Formal := First_Formal (Subp);\n+         Actual := First (Parameter_Associations ((Parent (Par))));\n+\n+         if Nkind (Par) /= N_Parameter_Association then\n+\n+            --  Match by position\n+\n+            while Present (Actual) and then Present (Formal) loop\n+               exit when Actual = Par;\n+               Next (Actual);\n+\n+               if Present (Formal) then\n+                  Next_Formal (Formal);\n+\n+               --  Otherwise this is a parameter mismatch, the error is\n+               --  reported elsewhere, or else variable indexing is implied.\n+\n+               else\n+                  return False;\n+               end if;\n+            end loop;\n+\n+         else\n+            --  Match by name\n+\n+            while Present (Formal) loop\n+               exit when Chars (Formal) = Chars (Selector_Name (Par));\n+               Next_Formal (Formal);\n+\n+               if No (Formal) then\n+                  return False;\n+               end if;\n+            end loop;\n+         end if;\n+\n+         return Present (Formal) and then Ekind (Formal) = E_In_Parameter;\n+      end Expr_Matches_In_Formal;\n+\n       ------------------------------\n       -- Find_Indexing_Operations --\n       ------------------------------"}]}