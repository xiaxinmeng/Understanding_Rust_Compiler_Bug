{"sha": "7c27e184c87d2b245f80287be1d28f686b68519e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2MyN2UxODRjODdkMmIyNDVmODAyODdiZTFkMjhmNjg2YjY4NTE5ZQ==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2004-08-17T07:27:16Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2004-08-17T07:27:16Z"}, "message": "Makefile.in: Regenerate.\n\n2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\n\t* Makefile.def (bootstrap-stage): Rename extra_*_flags to\n\tstage_*_flags.\n\t* Makefile.tpl (configure-[+module+], all-[+module+]): Exit\n\tfor bootstrapped modules if toplevel bootstrap is going.\n\t(GCC bootstrap): Generate per-stage targets for all bootstrapped\n\tmodules.  Adjust for changes in Makefile.def.  Enable several\n\trules even in non-bootstrap mode, just to avoid peppering the\n\ttemplate with unnecessary \"@if/@endif gcc-bootstrap\" pairs.\n\t(stage-[+prev+]-bubble): Remove.\n\n\t* Makefile.def (Dependencies): Depend on all-build-bison,\n\tall-build-flex, all-build-byacc, all-build-texinfo, rather\n\tthan the host variations.\n\t* Makefile.tpl (BUILD_DIR_PREFIX): Remove.  Replace throughout\n\twith BUILD_SUBDIR.\n\t(BISON): Update for recent Bisons.\n\t(YACC): Fix typo.\n\t(cross): Depend on all-build.\n\t(all): Do not depend on all-build.\n\t(prebootstrap): Remove.\n\t(dep-kind): Accept separate prefixes for MODULE and ON variables.\n\t(Prebootstrap dependencies): Add them to the per-stage targets\n\tand to all-prebootstrap.\n\t* configure.in (build_configdirs): Always enable build_tools.\n\t(BUILD_DIR_PREFIX): Remove.\n\n\t* Makefile.def (gcc): Add target variable.\n\t(gdb, expect, guile, tk, tix): Replace with_x with extra_make_flags.\n\t* Makefile.tpl (Autogenerated `all-*' targets): Invoke $(TARGET-*)\n\tin the recursive `make', instead of hardwiring `all'.\n\t(Autogenerated TARGET-* variables): New.\n\ngcc/ChangeLog:\n2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n\n\t* configure.ac: Trust toplevel's notion of BISON/FLEX/MAKEINFO.\n\tNo need to check if in a cross configuration.\n\t* configure: Regenerate.\n\n\t* calls.c (precompute_register_parameters):\n\tInline preserve_subexpressions_p ().\n\t* expmed.c (expand_mult_const, emit_store_flag): Likewise.\n\t* optabs.c (expand_binop, expand_twoval_binop, prepare_cmp_insn):\n\tLikewise.\n\t* expr.c (get_subtarget): Likewise.\n\t* rtl.h (preserve_subexpressions_p): Remove.\n\t* stmt.c (preserve_subexpressions_p): Remove.\n\n\t* dojump.c (do_jump) <COND_EXPR, EQ_EXPR, NE_EXPR,\n\tTRUTH_ANDIF_EXPR, TRUTH_ORIF_EXPR, COMPOUND_EXPR>:\n\tAbort on gimplified cases.\n\nFrom-SVN: r86111", "tree": {"sha": "0f8a615af173ede05125885d4bfc8d27ef332ff7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f8a615af173ede05125885d4bfc8d27ef332ff7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c27e184c87d2b245f80287be1d28f686b68519e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c27e184c87d2b245f80287be1d28f686b68519e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c27e184c87d2b245f80287be1d28f686b68519e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c27e184c87d2b245f80287be1d28f686b68519e/comments", "author": null, "committer": null, "parents": [{"sha": "9a9ff549030a22a0b8c0af58b633e006073959d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a9ff549030a22a0b8c0af58b633e006073959d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a9ff549030a22a0b8c0af58b633e006073959d7"}], "stats": {"total": 6149, "additions": 4787, "deletions": 1362}, "files": [{"sha": "191caeefa756f9874f1c934c8f86e80f8b51efe7", "filename": "ChangeLog", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -1,3 +1,40 @@\n+2004-08-16  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* Makefile.in: Regenerate.\n+\t* configure: Regenerate.\n+\n+\t* Makefile.def (bootstrap-stage): Rename extra_*_flags to\n+\tstage_*_flags.\n+\t* Makefile.tpl (configure-[+module+], all-[+module+]): Exit\n+\tfor bootstrapped modules if toplevel bootstrap is going.\n+\t(GCC bootstrap): Generate per-stage targets for all bootstrapped\n+\tmodules.  Adjust for changes in Makefile.def.  Enable several\n+\trules even in non-bootstrap mode, just to avoid peppering the\n+\ttemplate with unnecessary \"@if/@endif gcc-bootstrap\" pairs.\n+\t(stage-[+prev+]-bubble): Remove.\n+\n+\t* Makefile.def (Dependencies): Depend on all-build-bison,\n+\tall-build-flex, all-build-byacc, all-build-texinfo, rather\n+\tthan the host variations.\n+\t* Makefile.tpl (BUILD_DIR_PREFIX): Remove.  Replace throughout\n+\twith BUILD_SUBDIR.\n+\t(BISON): Update for recent Bisons.\n+\t(YACC): Fix typo.\n+\t(cross): Depend on all-build.\n+\t(all): Do not depend on all-build.\n+\t(prebootstrap): Remove.\n+\t(dep-kind): Accept separate prefixes for MODULE and ON variables.\n+\t(Prebootstrap dependencies): Add them to the per-stage targets\n+\tand to all-prebootstrap.\n+\t* configure.in (build_configdirs): Always enable build_tools.\n+\t(BUILD_DIR_PREFIX): Remove.\n+\n+\t* Makefile.def (gcc): Add target variable.\n+\t(gdb, expect, guile, tk, tix): Replace with_x with extra_make_flags.\n+\t* Makefile.tpl (Autogenerated `all-*' targets): Invoke $(TARGET-*)\n+\tin the recursive `make', instead of hardwiring `all'.\n+\t(Autogenerated TARGET-* variables): New.\n+\n 2004-08-13  Brian Booth  <bbooth@redhat.com>\n \n \t* MAINTAINERS: Remove myself from write-after-approval."}, {"sha": "c9de58b718804b9074d06b08f572cbf5c44e1b1d", "filename": "Makefile.def", "status": "modified", "additions": 48, "deletions": 50, "changes": 98, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -25,7 +25,6 @@ AutoGen definitions Makefile.tpl;\n // that recursive target in its Makefile.\n \n build_modules= { module= libiberty; };\n-build_modules= { module= libbanshee; };\n build_modules= { module= bison; };\n build_modules= { module= byacc; };\n build_modules= { module= flex; };\n@@ -53,6 +52,7 @@ host_modules= { module= find; };\n host_modules= { module= flex; no_check_cross= true; };\n host_modules= { module= gas; bootstrap=true; };\n host_modules= { module= gcc; bootstrap=true; \n+\t\ttarget=\"`if [ -f gcc/stage_last ]; then echo quickstrap ; else echo all; fi`\";\n \t\textra_make_flags=\"$(EXTRA_GCC_FLAGS)\"; };\n host_modules= { module= gawk; };\n host_modules= { module= gettext; };\n@@ -94,10 +94,10 @@ host_modules= { module= uudecode; };\n host_modules= { module= wdiff; };\n host_modules= { module= zip; no_check_cross=true; };\n host_modules= { module= zlib; no_install=true; no_check=true; bootstrap=true; };\n-host_modules= { module= gdb; with_x=true; };\n-host_modules= { module= expect; with_x=true; };\n-host_modules= { module= guile; with_x=true; };\n-host_modules= { module= tk; with_x=true; };\n+host_modules= { module= gdb; extra_make_flags=\"$(X11_FLAGS_TO_PASS)\"; };\n+host_modules= { module= expect; extra_make_flags=\"$(X11_FLAGS_TO_PASS)\"; };\n+host_modules= { module= guile; extra_make_flags=\"$(X11_FLAGS_TO_PASS)\"; };\n+host_modules= { module= tk; extra_make_flags=\"$(X11_FLAGS_TO_PASS)\"; };\n host_modules= { module= libtermcap; no_check=true; \n                 missing=mostlyclean;\n                 missing=clean;\n@@ -238,14 +238,12 @@ dependencies = { module=configure-gcc; on=configure-intl; };\n dependencies = { module=configure-gcc; on=configure-binutils; };\n dependencies = { module=configure-gcc; on=configure-gas; };\n dependencies = { module=configure-gcc; on=configure-ld; };\n-dependencies = { module=configure-gcc; on=configure-bison; };\n-dependencies = { module=configure-gcc; on=configure-flex; };\n dependencies = { module=all-gcc; on=all-libiberty; hard=true; };\n dependencies = { module=all-gcc; on=all-intl; };\n-dependencies = { module=all-gcc; on=all-texinfo; };\n-dependencies = { module=all-gcc; on=all-bison; };\n-dependencies = { module=all-gcc; on=all-byacc; };\n-dependencies = { module=all-gcc; on=all-flex; };\n+dependencies = { module=all-gcc; on=all-build-texinfo; };\n+dependencies = { module=all-gcc; on=all-build-bison; };\n+dependencies = { module=all-gcc; on=all-build-byacc; };\n+dependencies = { module=all-gcc; on=all-build-flex; };\n dependencies = { module=all-gcc; on=all-binutils; };\n dependencies = { module=all-gcc; on=all-gas; };\n dependencies = { module=all-gcc; on=all-ld; };\n@@ -268,8 +266,8 @@ dependencies = { module=all-gdb; on=all-libiberty; };\n dependencies = { module=all-gdb; on=all-opcodes; };\n dependencies = { module=all-gdb; on=all-bfd; };\n dependencies = { module=all-gdb; on=all-readline; };\n-dependencies = { module=all-gdb; on=all-bison; };\n-dependencies = { module=all-gdb; on=all-byacc; };\n+dependencies = { module=all-gdb; on=all-build-bison; };\n+dependencies = { module=all-gdb; on=all-build-byacc; };\n dependencies = { module=all-gdb; on=all-sim; };\n dependencies = { module=install-gdb; on=install-tcl; };\n dependencies = { module=install-gdb; on=install-tk; };\n@@ -290,9 +288,9 @@ dependencies = { module=all-bfd; on=all-intl; };\n dependencies = { module=all-binutils; on=all-libiberty; };\n dependencies = { module=all-binutils; on=all-opcodes; };\n dependencies = { module=all-binutils; on=all-bfd; };\n-dependencies = { module=all-binutils; on=all-flex; };\n-dependencies = { module=all-binutils; on=all-bison; };\n-dependencies = { module=all-binutils; on=all-byacc; };\n+dependencies = { module=all-binutils; on=all-build-flex; };\n+dependencies = { module=all-binutils; on=all-build-bison; };\n+dependencies = { module=all-binutils; on=all-build-byacc; };\n dependencies = { module=all-binutils; on=all-intl; };\n \n // We put install-opcodes before install-binutils because the installed\n@@ -314,9 +312,9 @@ dependencies = { module=all-gprof; on=all-intl; };\n dependencies = { module=all-ld; on=all-libiberty; };\n dependencies = { module=all-ld; on=all-bfd; };\n dependencies = { module=all-ld; on=all-opcodes; };\n-dependencies = { module=all-ld; on=all-bison; };\n-dependencies = { module=all-ld; on=all-byacc; };\n-dependencies = { module=all-ld; on=all-flex; };\n+dependencies = { module=all-ld; on=all-build-bison; };\n+dependencies = { module=all-ld; on=all-build-byacc; };\n+dependencies = { module=all-ld; on=all-build-flex; };\n dependencies = { module=all-ld; on=all-intl; };\n \n dependencies = { module=all-opcodes; on=all-bfd; };\n@@ -358,43 +356,43 @@ dependencies = { module=all-sim; on=configure-gdb; };\n \n // Other host modules.\n dependencies = { module=all-fastjar; on=all-zlib; };\n-dependencies = { module=all-fastjar; on=all-texinfo; };\n+dependencies = { module=all-fastjar; on=all-build-texinfo; };\n dependencies = { module=all-fastjar; on=all-libiberty; };\n \n // Warning, these are not well tested.\n dependencies = { module=all-autoconf; on=all-m4; };\n-dependencies = { module=all-autoconf; on=all-texinfo; };\n+dependencies = { module=all-autoconf; on=all-build-texinfo; };\n dependencies = { module=all-automake; on=all-m4; };\n-dependencies = { module=all-automake; on=all-texinfo; };\n+dependencies = { module=all-automake; on=all-build-texinfo; };\n dependencies = { module=all-automake; on=all-autoconf; };\n dependencies = { module=all-bison; on=all-intl; };\n-dependencies = { module=all-bison; on=all-texinfo; };\n+dependencies = { module=all-bison; on=all-build-texinfo; };\n dependencies = { module=all-diff; on=all-intl; };\n-dependencies = { module=all-diff; on=all-texinfo; };\n+dependencies = { module=all-diff; on=all-build-texinfo; };\n dependencies = { module=all-fileutils; on=all-intl; };\n-dependencies = { module=all-fileutils; on=all-texinfo; };\n-dependencies = { module=all-flex; on=all-bison; };\n-dependencies = { module=all-flex; on=all-byacc; };\n+dependencies = { module=all-fileutils; on=all-build-texinfo; };\n+dependencies = { module=all-flex; on=all-build-bison; };\n+dependencies = { module=all-flex; on=all-build-byacc; };\n dependencies = { module=all-flex; on=all-intl; };\n dependencies = { module=all-flex; on=all-m4; };\n-dependencies = { module=all-flex; on=all-texinfo; };\n+dependencies = { module=all-flex; on=all-build-texinfo; };\n dependencies = { module=all-gzip; on=all-intl; };\n dependencies = { module=all-gzip; on=all-zlib; };\n-dependencies = { module=all-gzip; on=all-texinfo; };\n+dependencies = { module=all-gzip; on=all-build-texinfo; };\n dependencies = { module=all-hello; on=all-intl; };\n-dependencies = { module=all-hello; on=all-texinfo; };\n+dependencies = { module=all-hello; on=all-build-texinfo; };\n dependencies = { module=all-m4; on=all-intl; };\n-dependencies = { module=all-m4; on=all-texinfo; };\n+dependencies = { module=all-m4; on=all-build-texinfo; };\n dependencies = { module=all-make; on=all-intl; };\n-dependencies = { module=all-make; on=all-texinfo; };\n-dependencies = { module=all-patch; on=all-texinfo; };\n-dependencies = { module=all-make; on=all-texinfo; };\n+dependencies = { module=all-make; on=all-build-texinfo; };\n+dependencies = { module=all-patch; on=all-build-texinfo; };\n+dependencies = { module=all-make; on=all-build-texinfo; };\n dependencies = { module=all-prms; on=all-libiberty; };\n-dependencies = { module=all-recode; on=all-texinfo; };\n-dependencies = { module=all-sed; on=all-texinfo; };\n+dependencies = { module=all-recode; on=all-build-texinfo; };\n+dependencies = { module=all-sed; on=all-build-texinfo; };\n dependencies = { module=all-send-pr; on=all-prms; };\n-dependencies = { module=all-tar; on=all-texinfo; };\n-dependencies = { module=all-uudecode; on=all-texinfo; };\n+dependencies = { module=all-tar; on=all-build-texinfo; };\n+dependencies = { module=all-uudecode; on=all-build-texinfo; };\n \n // Target modules.  These can also have dependencies on the language\n // environment (e.g. on libstdc++).\n@@ -438,32 +436,32 @@ dependencies = { module=all-target-winsup; on=all-target-libtermcap; };\n // Toplevel bootstrap\n bootstrap_stage = {\n \tid=1 ;\n-\textra_configure_flags='--disable-intermodule \\\n+\tstage_configure_flags='--disable-intermodule \\\n \t  --disable-coverage --enable-languages=\"$(STAGE1_LANGUAGES)\"' ;\n-\textra_make_flags='CFLAGS=\"$(STAGE1_CFLAGS)\"' ; };\n+\tstage_make_flags='CFLAGS=\"$(STAGE1_CFLAGS)\"' ; };\n bootstrap_stage = {\n \tid=2 ; prev=1 ;\n \tbootstrap_target=bootstrap2 ;\n-\textra_configure_flags=\"@stage2_werror_flag@\" ;\n-\textra_make_flags=\"\" ; };\n+\tstage_configure_flags=\"@stage2_werror_flag@\" ;\n+\tstage_make_flags=\"\" ; };\n bootstrap_stage = {\n \tid=3 ; prev=2 ;\n \tcompare_target=compare ;\n \tbootstrap_target=bootstrap ;\n \tcleanstrap_target=cleanstrap ;\n-\textra_configure_flags=\"@stage2_werror_flag@\" ;\n-\textra_make_flags=\"\" ; };\n+\tstage_configure_flags=\"@stage2_werror_flag@\" ;\n+\tstage_make_flags=\"\" ; };\n bootstrap_stage = {\n \tid=4 ; prev=3 ;\n \tcompare_target=compare3 ;\n \tbootstrap_target=bootstrap4 ;\n-\textra_configure_flags=\"@stage2_werror_flag@\" ;\n-\textra_make_flags=\"\" ; };\n+\tstage_configure_flags=\"@stage2_werror_flag@\" ;\n+\tstage_make_flags=\"\" ; };\n bootstrap_stage = {\n \tid=profile ; prev=1 ;\n-\textra_configure_flags=\"@stage2_werror_flag@\" ;\n-\textra_make_flags='CFLAGS=\"$(BOOT_CFLAGS) -fprofile-generate\"' ; };\n+\tstage_configure_flags=\"@stage2_werror_flag@\" ;\n+\tstage_make_flags='CFLAGS=\"$(BOOT_CFLAGS) -fprofile-generate\"' ; };\n bootstrap_stage = {\n \tid=feedback ; prev=1 ;\n-\textra_configure_flags=\"@stage2_werror_flag@\" ;\n-\textra_make_flags='CFLAGS=\"$(BOOT_CFLAGS) -fprofile-use\"' ; };\n+\tstage_configure_flags=\"@stage2_werror_flag@\" ;\n+\tstage_make_flags='CFLAGS=\"$(BOOT_CFLAGS) -fprofile-use\"' ; };"}, {"sha": "fa9432ba26d8702f44d6aea7e37eefb9d0b76539", "filename": "Makefile.in", "status": "modified", "additions": 4370, "deletions": 800, "changes": 5170, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=7c27e184c87d2b245f80287be1d28f686b68519e"}, {"sha": "27ab1fbafdd8d98609d0da6be3646a3f54edfe7a", "filename": "Makefile.tpl", "status": "modified", "additions": 122, "deletions": 119, "changes": 241, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/Makefile.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/Makefile.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.tpl?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -243,52 +243,49 @@ CFLAGS_FOR_BUILD = @CFLAGS_FOR_BUILD@\n \n CXX_FOR_BUILD = $(CXX)\n \n-# Path to the build directory for a Canadian cross, empty otherwise.\n-BUILD_DIR_PREFIX = @BUILD_DIR_PREFIX@\n-\n # Special variables passed down in EXTRA_GCC_FLAGS.  They are defined\n # here so that they can be overridden by Makefile fragments.\n BUILD_PREFIX = @BUILD_PREFIX@\n BUILD_PREFIX_1 = @BUILD_PREFIX_1@\n \n CONFIGURED_BISON = @CONFIGURED_BISON@\n-BISON = `if [ -f $$r/$(BUILD_DIR_PREFIX)/bison/bison ] ; then \\\n-\t    echo $$r/$(BUILD_DIR_PREFIX)/bison/bison -L $$s/bison/ ; \\\n+BISON = `if [ -f $$r/$(BUILD_SUBDIR)/bison/tests/bison ] ; then \\\n+\t    echo $$r/$(BUILD_SUBDIR)/bison/tests/bison ; \\\n \t else \\\n \t    echo ${CONFIGURED_BISON} ; \\\n \t fi`\n \n CONFIGURED_YACC = @CONFIGURED_YACC@\n-YACC = `if [ -f $$s/$(BUILD_DIR_PREFIX)/bison/bison ] ; then \\\n-\t    echo $$r/$(BUILD_DIR_PREFIX)/bison/bison -y -L $$s/bison/ ; \\\n-\telif [ -f $$s/$(BUILD_DIR_PREFIX)/byacc/byacc ] ; then \\\n-\t    echo $$r/$(BUILD_DIR_PREFIX)/byacc/byacc ; \\\n+YACC = `if [ -f $$r/$(BUILD_SUBDIR)/bison/tests/bison ] ; then \\\n+\t    echo $$r/$(BUILD_SUBDIR)/bison/tests/bison -y ; \\\n+\telif [ -f $$r/$(BUILD_SUBDIR)/byacc/byacc ] ; then \\\n+\t    echo $$r/$(BUILD_SUBDIR)/byacc/byacc ; \\\n \telse \\\n \t    echo ${CONFIGURED_YACC} ; \\\n \tfi`\n \n CONFIGURED_FLEX = @CONFIGURED_FLEX@\n-FLEX = `if [ -f $$r/$(BUILD_DIR_PREFIX)/flex/flex ] ; \\\n-\tthen echo $$r/$(BUILD_DIR_PREFIX)/flex/flex ; \\\n+FLEX = `if [ -f $$r/$(BUILD_SUBDIR)/flex/flex ] ; \\\n+\tthen echo $$r/$(BUILD_SUBDIR)/flex/flex ; \\\n \telse echo ${CONFIGURED_FLEX} ; fi`\n \n CONFIGURED_LEX = @CONFIGURED_LEX@\n-LEX = `if [ -f $$r/$(BUILD_DIR_PREFIX)/flex/flex ] ; \\\n-\tthen echo $$r/$(BUILD_DIR_PREFIX)/flex/flex ; \\\n+LEX = `if [ -f $$r/$(BUILD_SUBDIR)/flex/flex ] ; \\\n+\tthen echo $$r/$(BUILD_SUBDIR)/flex/flex ; \\\n \telse echo ${CONFIGURED_LEX} ; fi`\n \n CONFIGURED_M4 = @CONFIGURED_M4@\n-M4 = `if [ -f $$r/$(BUILD_DIR_PREFIX)/m4/m4 ] ; \\\n-\tthen echo $$r/$(BUILD_DIR_PREFIX)/m4/m4 ; \\\n+M4 = `if [ -f $$r/$(BUILD_SUBDIR)/m4/m4 ] ; \\\n+\tthen echo $$r/$(BUILD_SUBDIR)/m4/m4 ; \\\n \telse echo ${CONFIGURED_M4} ; fi`\n \n # For an installed makeinfo, we require it to be from texinfo 4.2 or\n # higher, else we use the \"missing\" dummy.  We also pass the subdirectory\n # makeinfo even if only the Makefile is there, because Texinfo builds its\n # manual when made, and it requires its own version.\n CONFIGURED_MAKEINFO = @CONFIGURED_MAKEINFO@\n-MAKEINFO = `if [ -f $$r/$(BUILD_DIR_PREFIX)/texinfo/makeinfo/Makefile ] ; \\\n-\tthen echo $$r/$(BUILD_DIR_PREFIX)/texinfo/makeinfo/makeinfo ; \\\n+MAKEINFO = `if [ -f $$r/$(BUILD_SUBDIR)/texinfo/makeinfo/Makefile ] ; \\\n+\tthen echo $$r/$(BUILD_SUBDIR)/texinfo/makeinfo/makeinfo ; \\\n \telse if (${CONFIGURED_MAKEINFO} --version \\\n \t  | egrep 'texinfo[^0-9]*([1-3][0-9]|4\\.[2-9]|[5-9])') >/dev/null 2>&1; \\\n         then echo ${CONFIGURED_MAKEINFO}; else echo $$s/missing makeinfo; fi; fi`\n@@ -603,7 +600,7 @@ configure-target: [+\n \n # The target built for a native non-bootstrap build.\n .PHONY: all\n-all: unstage all-build all-host all-target stage\n+all: unstage all-host all-target stage\n \n .PHONY: all-build\n all-build: [+\n@@ -864,12 +861,14 @@ configure-build-[+module+]:\n .PHONY: all-build-[+module+] maybe-all-build-[+module+]\n maybe-all-build-[+module+]:\n @if build-[+module+]\n+TARGET-build-[+module+]=[+ IF target +][+target+][+ ELSE +]all[+ ENDIF target +]\n maybe-all-build-[+module+]: all-build-[+module+]\n all-build-[+module+]: configure-build-[+module+]\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(BUILD_EXPORTS) \\\n-\t(cd $(BUILD_SUBDIR)/[+module+] && $(MAKE) [+extra_make_flags+] all)\n+\t(cd $(BUILD_SUBDIR)/[+module+] && \\\n+\t  $(MAKE) [+extra_make_flags+] $(TARGET-build-[+module+]))\n @endif build-[+module+]\n [+ ENDFOR build_modules +]\n \n@@ -882,7 +881,8 @@ maybe-configure-[+module+]:\n @if [+module+]\n maybe-configure-[+module+]: configure-[+module+]\n configure-[+module+]:\n-\t@test ! -f [+module+]/Makefile || exit 0; \\\n+\t@[+ IF bootstrap +]test -f stage_last && exit 0; \\\n+\t[+ ENDIF bootstrap +]test ! -f [+module+]/Makefile || exit 0; \\\n \t[ -d [+module+] ] || mkdir [+module+]; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -910,7 +910,8 @@ maybe-all-[+module+]:\n @if [+module+]\n maybe-all-[+module+]: all-[+module+]\n all-[+module+]: configure-[+module+]\n-\t@r=`${PWD_COMMAND}`; export r; \\\n+\t@[+ IF bootstrap +]test -f stage_last && exit 0; \\\n+\t[+ ENDIF bootstrap +]r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(SET_LIB_PATH) \\\n \t$(HOST_EXPORTS) \\\n@@ -937,10 +938,8 @@ check-[+module+]:\n \t  s=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t  $(SET_LIB_PATH) \\\n \t  $(HOST_EXPORTS) \\\n-\t  (cd [+module+] && $(MAKE) $(FLAGS_TO_PASS)[+ \n-\t    IF with_x \n-\t      +] $(X11_FLAGS_TO_PASS)[+ \n-\t    ENDIF with_x +] [+extra_make_flags+] check); \\\n+\t  (cd [+module+] && $(MAKE) $(FLAGS_TO_PASS) [+ \n+\t    extra_make_flags+] check); \\\n \tfi\n [+ ELSE check +]\n check-[+module+]:\n@@ -949,9 +948,7 @@ check-[+module+]:\n \t$(SET_LIB_PATH) \\\n \t$(HOST_EXPORTS) \\\n \t(cd [+module+] && $(MAKE) $(FLAGS_TO_PASS)[+ \n-\t  IF with_x \n-\t    +] $(X11_FLAGS_TO_PASS)[+ \n-\t  ENDIF with_x +] [+extra_make_flags+] check)\n+\t  extra_make_flags+] check)\n [+ ENDIF no_check +]\n @endif [+module+]\n \n@@ -968,9 +965,7 @@ install-[+module+]: installdirs\n \t$(SET_LIB_PATH) \\\n \t$(HOST_EXPORTS) \\\n \t(cd [+module+] && $(MAKE) $(FLAGS_TO_PASS)[+ \n-\t  IF with_x \n-\t    +] $(X11_FLAGS_TO_PASS)[+ \n-\t  ENDIF with_x +] [+extra_make_flags+] install)\n+\t  extra_make_flags+] install)\n [+ ENDIF no_install +]\n @endif [+module+]\n \n@@ -1080,6 +1075,7 @@ ENDIF raw_cxx +]\n .PHONY: all-target-[+module+] maybe-all-target-[+module+]\n maybe-all-target-[+module+]:\n @if target-[+module+]\n+TARGET-target-[+module+]=[+ IF target +][+target+][+ ELSE +]all[+ ENDIF target +]\n maybe-all-target-[+module+]: all-target-[+module+]\n all-target-[+module+]: configure-target-[+module+]\n \t@r=`${PWD_COMMAND}`; export r; \\\n@@ -1095,7 +1091,7 @@ ENDIF raw_cxx +]\n \t    IF raw_cxx \n \t  +] 'CXX=$$(RAW_CXX_FOR_TARGET)' 'CXX_FOR_TARGET=$$(RAW_CXX_FOR_TARGET)' [+ \n \t    ENDIF raw_cxx \n-\t  +] [+extra_make_flags+] all)\n+\t  +] [+extra_make_flags+] $(TARGET-target-[+module+]))\n @endif target-[+module+]\n \n .PHONY: check-target-[+module+] maybe-check-target-[+module+]\n@@ -1249,7 +1245,7 @@ profiledbootstrap: all-prebootstrap configure-gcc\n \t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all\n \n .PHONY: cross\n-cross: all-texinfo all-bison all-byacc all-binutils all-gas all-ld\n+cross: all-build all-gas all-ld\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(SET_LIB_PATH) \\\n@@ -1322,7 +1318,6 @@ stage:\n \t@$(MAKE) `cat stage_current`-end\n @endif gcc-bootstrap\n \n-@if gcc-bootstrap\n # We name the build directories for the various stages \"stage1-gcc\",\n # \"stage2-gcc\",\"stage3-gcc\", etc.\n \n@@ -1360,12 +1355,6 @@ STAGE1_LANGUAGES=@stage1_languages@\n # We only want to compare .o files, so set this!\n objext = .o\n \n-# Real targets act phony if they depend on phony targets; this hack\n-# prevents gratuitous rebuilding of stage 1.\n-prebootstrap:\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all-prebootstrap\n-\t$(STAMP) prebootstrap\n-\n # Flags to pass to stage2 and later makes.\n BOOT_CFLAGS= -g -O2\n POSTSTAGE1_FLAGS_TO_PASS = \\\n@@ -1389,39 +1378,46 @@ POSTSTAGE1_FLAGS_TO_PASS = \\\n stage[+id+]-start::\n \t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n \techo stage[+id+] > stage_current ; \\\n-\techo stage[+id+] > stage_last ; \\\n-\t[ -d stage[+id+]-gcc ] || mkdir stage[+id+]-gcc; \\\n-\tset stage[+id+]-gcc gcc ; @CREATE_LINK_TO_DIR@ [+ IF prev +] ; \\\n-\tset stage[+prev+]-gcc prev-gcc ; @CREATE_LINK_TO_DIR@ [+ ENDIF prev +]\n+\techo stage[+id+] > stage_last[+ FOR host_modules +][+ IF bootstrap +]\n+@if [+ module +]\n+\t[ -d stage[+id+]-[+module+] ] || mkdir stage[+id+]-[+module+]; \\\n+\tset stage[+id+]-[+module+] [+module+] ; @CREATE_LINK_TO_DIR@ [+ IF prev +] ; \\\n+\tset stage[+prev+]-[+module+] prev-[+module+] ; @CREATE_LINK_TO_DIR@ [+ ENDIF prev +]\n+@endif [+ module +][+ ENDIF bootstrap +][+ ENDFOR host_modules +]\n \n stage[+id+]-end::\n-\trm -f stage_current ; \\\n-\tset gcc stage[+id+]-gcc ; @UNDO_LINK_TO_DIR@ [+ IF prev +] ; \\\n-\tset prev-gcc stage[+prev+]-gcc ; @UNDO_LINK_TO_DIR@ [+ ENDIF prev +]\n+\trm -f stage_current[+ FOR host_modules +][+ IF bootstrap +]\n+@if [+ module +]\n+\tset [+module+] stage[+id+]-[+module+] ; @UNDO_LINK_TO_DIR@ [+ IF prev +] ; \\\n+\tset prev-[+module+] stage[+prev+]-[+module+] ; @UNDO_LINK_TO_DIR@ [+ ENDIF prev +]\n+@endif [+ module +][+ ENDIF bootstrap +][+ ENDFOR host_modules +]\n \n # Bubble a bugfix through all the stages up to stage [+id+].  They\n # are remade, but not reconfigured.  The next stage (if any) will not\n # be reconfigured as well.\n .PHONY: stage[+id+]-bubble\n stage[+id+]-bubble:: [+ IF prev +]stage[+prev+]-bubble[+ ENDIF +]\n-\t@if [ -f all-stage[+id+]-gcc ] ; then \\\n-\t  echo Remaking stage [+id+] ; \\\n-\t  rm -f all-stage[+id+]-gcc ; \\\n-\tfi ; \\\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage[+id+]-gcc\n-\n-[+ IF prev +]\n-stage[+prev+]-bubble::\n-\t@if [ -f configure-stage[+id+]-gcc ] ; then \\\n-\t  $(STAMP) configure-stage[+id+]-gcc ; \\\n-\tfi\n-[+ ENDIF prev +]\n-\n-configure-stage[+id+]-gcc: [+ IF prev +] all-stage[+prev+]-gcc [+\n-\t  ELSE +] prebootstrap [+ ENDIF prev +]\n+\t@case `echo all-stage[+id+]-*` in \\\n+\t  'all-stage[+id+]-*') ;; \\\n+\t  *) echo Remaking stage [+id+] ; rm -f all-stage[+id+]-* ;; \\\n+\tesac ; \\\n+\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) all-stage[+id+]\n+\n+.PHONY: all-stage[+id+]\n+all-stage[+id+]: [+ FOR host_modules +][+ IF bootstrap +]\\\n+  maybe-all-stage[+id+]-[+module+][+\n+ENDIF bootstrap+] [+ ENDFOR host_modules +]\n+\n+[+ FOR host_modules +][+ IF bootstrap +]\n+maybe-configure-stage[+id+]-[+module+]:\n+maybe-all-stage[+id+]-[+module+]:\n+\n+@if [+module+]-bootstrap\n+maybe-configure-stage[+id+]-[+module+]: configure-stage[+id+]-[+module+]\n+configure-stage[+id+]-[+module+]: [+ IF prev +] maybe-all-stage[+prev+]-[+module+] [+ ENDIF prev +]\n \t$(MAKE) stage[+id+]-start\n-\t@if [ -f stage[+id+]-gcc/Makefile ] ; then \\\n-\t  $(STAMP) configure-stage[+id+]-gcc ; \\\n+\t@if [ -f stage[+id+]-[+module+]/Makefile ] ; then \\\n+\t  $(STAMP) configure-stage[+id+]-[+module+] ; \\\n \t  exit 0; \\\n \telse \\\n \t  true ; \\\n@@ -1430,35 +1426,42 @@ configure-stage[+id+]-gcc: [+ IF prev +] all-stage[+prev+]-gcc [+\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; [+ IF prev +] \\\n \t$(STAGE_HOST_EXPORTS) [+ ELSE prev +] \\\n \t$(HOST_EXPORTS) [+ ENDIF prev +] \\\n-\techo Configuring stage [+id+] in gcc ; \\\n-\tcd gcc || exit 1; \\\n+\techo Configuring stage [+id+] in [+module+] ; \\\n+\tcd [+module+] || exit 1; \\\n \tcase $(srcdir) in \\\n \t  \\.) \\\n \t    srcdiroption=\"--srcdir=.\"; \\\n \t    libsrcdir=\".\";; \\\n \t  /* | [A-Za-z]:[\\\\/]*) \\\n-\t    srcdiroption=\"--srcdir=$(srcdir)/gcc\"; \\\n-\t    libsrcdir=\"$$s/gcc\";; \\\n+\t    srcdiroption=\"--srcdir=$(srcdir)/[+module+]\"; \\\n+\t    libsrcdir=\"$$s/[+module+]\";; \\\n \t  *) \\\n-\t    srcdiroption=\"--srcdir=../$(srcdir)/gcc\"; \\\n-\t    libsrcdir=\"$$s/gcc\";; \\\n+\t    srcdiroption=\"--srcdir=../$(srcdir)/[+module+]\"; \\\n+\t    libsrcdir=\"$$s/[+module+]\";; \\\n \tesac; \\\n \t$(SHELL) $${libsrcdir}/configure \\\n \t  $(HOST_CONFIGARGS) $${srcdiroption} \\\n-\t  [+extra_configure_flags+] && \\\n-\t  $(STAMP) ../configure-stage[+id+]-gcc\n+\t  [+stage_configure_flags+] [+extra_configure_flags+] && \\\n+\t  $(STAMP) ../configure-stage[+id+]-[+module+]\n \n-all-stage[+id+]-gcc: configure-stage[+id+]-gcc\n+maybe-all-stage[+id+]-[+module+]: all-stage[+id+]-[+module+]\n+all-stage[+id+]-[+module+]: configure-stage[+id+]-[+module+]\n \t$(MAKE) stage[+id+]-start\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; [+ IF prev +] \\\n \t$(STAGE_HOST_EXPORTS) [+ ELSE prev +] \\\n \t$(HOST_EXPORTS) [+ ENDIF prev +] \\\n-\tcd gcc && \\\n-\t$(MAKE) $(GCC_FLAGS_TO_PASS) [+ IF prev +] \\\n+\tcd [+module+] && \\\n+\t$(MAKE) $(FLAGS_TO_PASS) [+ IF prev +] \\\n \t\t$(POSTSTAGE1_FLAGS_TO_PASS) [+ ENDIF prev +] \\\n-\t\t[+extra_make_flags+] && $(STAMP) ../all-stage[+id+]-gcc\n+\t\t[+stage_make_flags+] [+extra_make_flags+] && \\\n+\t$(STAMP) ../all-stage[+id+]-[+module+]\n+@endif [+module+]-bootstrap\n+[+ ENDIF bootstrap +][+ ENDFOR host_modules +]\n \n+# FIXME: Will not need to be conditional when toplevel bootstrap is the\n+# only possibility, but now it conflicts with no-bootstrap rules\n+@if gcc-bootstrap\n [+ IF compare-target +]\n [+compare-target+]: all-stage[+id+]-gcc\n \t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n@@ -1485,8 +1488,7 @@ all-stage[+id+]-gcc: configure-stage[+id+]-gcc\n \n [+ IF bootstrap-target +]\n .PHONY: [+bootstrap-target+]\n-[+bootstrap-target+]:\n-\t$(MAKE) $(RECURSE_FLAGS_TO_PASS) stage[+id+]-bubble [+\n+[+bootstrap-target+]: stage[+id+]-bubble [+\n \t  IF compare-target +] [+compare-target+] [+\n \t  ENDIF compare-target +] all\n [+ ENDIF bootstrap-target +]\n@@ -1497,33 +1499,39 @@ all-stage[+id+]-gcc: configure-stage[+id+]-gcc\n [+ IF prev +]distclean-stage[+prev+]:: distclean-stage[+id+] [+ ENDIF prev +]\n distclean-stage[+id+]::\n \t[ -f stage_current ] && $(MAKE) `cat stage_current`-end || :\n-\trm -rf configure-stage[+id+]-gcc all-stage[+id+]-gcc stage[+id+]-gcc [+\n+\trm -rf configure-stage[+id+]-* all-stage[+id+]-* stage[+id+]-* [+\n \t  IF compare-target +][+compare-target+] [+ ENDIF compare-target +]\n \n # Rules to renew the timestamp on a stage and all the following ones\n [+ IF prev +]touch-stage[+prev+]:: touch-stage[+id+] [+ ENDIF prev +]\n touch-stage[+id+]::\n-\t@[ -f configure-stage[+id+]-gcc ] && \\\n-\t  echo '$(STAMP) configure-stage[+id+]-gcc' && \\\n-\t  $(STAMP) configure-stage[+id+]-gcc; \\\n-\t[ -f all-stage[+id+]-gcc ] && \\\n-\t  echo '$(STAMP) all-stage[+id+]-gcc' && \\\n-\t  $(STAMP) all-stage[+id+]-gcc; \\\n-\t:\n+\t@case `echo configure-stage[+id+]-*` in \\\n+\t  'configure-stage[+id+]-*') ;; \\\n+\t  *) \\\n+\t    echo '$(STAMP)' configure-stage[+id+]-* && \\\n+\t    $(STAMP) configure-stage[+id+]-* ;; \\\n+\tesac ; \\\n+\tcase `echo all-stage[+id+]-*` in \\\n+\t  'all-stage[+id+]-*') ;; \\\n+\t  *) \\\n+\t    echo '$(STAMP)' all-stage[+id+]-* && \\\n+\t    $(STAMP) all-stage[+id+]-* ;; \\\n+\tesac\n \n # After building a stage, touch the following ones\n [+ IF prev +]restage[+prev+]:: touch-stage[+id+] [+ ENDIF prev +]\n restage[+id+]::\n-\trm -rf all-stage[+id+]-gcc [+\n+\trm -rf all-stage[+id+]-* [+\n \t  IF compare-target +][+compare-target+] [+ ENDIF compare-target +]\n \t$(MAKE) $(RECURSE_FLAGS_TO_PASS) [+\n \t  IF compare-target +][+compare-target+] [+\n-\t  ELSE +] all-stage[+id+]-gcc [+ ENDIF compare-target +]\n+\t  ELSE +] all-stage[+id+] [+ ENDIF compare-target +]\n \n [+ IF cleanstrap-target +]\n .PHONY: [+cleanstrap-target+]\n [+cleanstrap-target+]: distclean-stage1 [+bootstrap-target+]\n [+ ENDIF cleanstrap-target +]\n+@endif gcc-bootstrap\n \n [+ ENDFOR bootstrap-stage +]\n \n@@ -1534,7 +1542,10 @@ stagefeedback-start::\n \t  { find . -type d | sort | sed 's,.*,$(SHELL) '\"$$s\"'/mkinstalldirs \"../gcc/&\",' | $(SHELL); } && \\\n \t  { find . -name '*.*da' | sed 's,.*,$(LN) -f \"&\" \"../gcc/&\",' | $(SHELL); }\n \n-profiledbootstrap: all-prebootstrap configure-gcc\n+# FIXME: Will not need to be conditional when toplevel bootstrap is the\n+# only possibility, but now it conflicts with no-bootstrap rules\n+@if gcc-bootstrap\n+profiledbootstrap:\n \t@r=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t$(SET_LIB_PATH) \\\n@@ -1552,7 +1563,6 @@ profiledbootstrap: all-prebootstrap configure-gcc\n \t$(HOST_EXPORTS) \\\n \techo \"Building feedback based compiler\"; \\\n \t$(MAKE) stagefeedback-bubble stagefeedback-end\n-\n @endif gcc-bootstrap\n \n # --------------------------------------\n@@ -1589,10 +1599,10 @@ configure-target-[+module+]: maybe-all-target-newlib maybe-all-target-libgloss\n       )))\n \n    ;; make-dep builds a dependency from the MODULE and ON AutoGen vars.\n-   (define make-dep (lambda (module-kind)\n+   (define make-dep (lambda (module-kind on-kind)\n       (string-append\n          (dep-target module-kind \"module\" #t) \": \"\n-         (dep-target module-kind \"on\" (exist? \"hard\")))))\n+         (dep-target on-kind \"on\" (exist? \"hard\")))))\n \n    ;; dep-subtarget extracts everything up to the first dash in the given\n    ;; AutoGen variable, for example it extracts \"all-\" out of \"all-gcc\".\n@@ -1620,23 +1630,21 @@ configure-target-[+module+]: maybe-all-target-newlib maybe-all-target-libgloss\n    ;; or if the LHS module is not bootstrapped.  It returns \"bootstrap\" for\n    ;; configure or build dependencies between bootstrapped modules; it returns\n    ;; \"prebootstrap\" for configure or build dependencies of bootstrapped\n-   ;; modules on a non-bootstrapped modules (e.g. gcc on bison).  All this\n+   ;; modules on a build module (e.g. all-gcc on all-build-bison).  All this\n    ;; is only necessary for host modules.\n    (define dep-kind (lambda ()\n-      (if (or (= (dep-subtarget \"on\") \"install-\")\n-\t      (=* (dep-module \"on\") \"build-\")\n-\t      (=* (dep-module \"on\") \"target-\"))\n-          \"normal\"\n+      (if (and (hash-ref boot-modules (dep-module \"module\"))\n+\t       (=* (dep-module \"on\") \"build-\"))\n+\t  \"prebootstrap\"\n \n-          (if (hash-ref boot-modules (dep-module \"module\"))\n-              (if (hash-ref boot-modules (dep-module \"on\"))\n-\t          \"bootstrap\"\n-\t          \"prebootstrap\")\n-\t      \"normal\"))))\n+\t  (if (or (= (dep-subtarget \"on\") \"install-\")\n+\t\t  (=* (dep-module \"on\") \"target-\")\n+\t\t  (not (hash-ref boot-modules (dep-module \"module\"))))\n+              \"normal\"\n+\t      \"bootstrap\"))))\n \n    ;; We now build the hash table that is used by dep-kind.\n    (define boot-modules (make-hash-table 113))\n-   (define preboot-modules (make-hash-table 37))\n +]\n \n [+ FOR host_modules +][+\n@@ -1649,27 +1657,22 @@ configure-target-[+module+]: maybe-all-target-newlib maybe-all-target-libgloss\n # to check for bootstrap/prebootstrap dependencies.  To resolve\n # prebootstrap dependencies, prebootstrap modules are gathered in\n # a hash table.\n-[+ FOR dependencies +][+ (make-dep \"\") +]\n-[+ CASE (dep-kind) +][+\n-   == \"prebootstrap\"\n-     +][+ (hash-create-handle! preboot-modules (dep-module \"on\") #t) \"\" +][+\n-   == \"bootstrap\"\n+[+ FOR dependencies +][+ (make-dep \"\" \"\") +]\n+[+ CASE (dep-kind) +]\n+[+ == \"prebootstrap\"\n      +][+ FOR bootstrap_stage +]\n-[+ (make-dep (dep-stage)) +][+\n+[+ (make-dep (dep-stage) \"\") +][+\n+       ENDFOR bootstrap_stage +]\n+all-prebootstrap: [+ (dep-target \"\" \"on\" (exist? \"hard\")) +]\n+[+ == \"bootstrap\"\n+     +][+ FOR bootstrap_stage +]\n+[+ (make-dep (dep-stage) (dep-stage)) +][+\n        ENDFOR bootstrap_stage +]\n [+ ESAC +][+\n ENDFOR dependencies +]\n \n-# Now build the prebootstrap dependencies.\n-[+ FOR host_modules +][+\n-   IF (hash-ref preboot-modules (get \"module\")) +]\n-all-prebootstrap: maybe-all-[+module+][+\n-   ENDIF +][+\n-ENDFOR host_modules +]\n-\n-# Unless toplevel bootstrap is going, bootstrapped packages are actually\n-# prebootstrapped, with the exception of gcc.  Another wart that will go\n-# away with toplevel bootstrap.\n+# Non-toplevel bootstrap rules must depend on several packages, to be built\n+# before gcc.  Another wart that will go away, hopefully soon.\n @if gcc-no-bootstrap\n [+ FOR host_modules +][+\n    IF (and (not (= (get \"module\") \"gcc\"))"}, {"sha": "3cc6d2b1d11e36eecccf61070bedc3229c6855d2", "filename": "configure", "status": "modified", "additions": 37, "deletions": 39, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -939,9 +939,11 @@ target_tools=\"target-examples target-groff target-gperf target-rda\"\n configdirs=`echo ${host_libs} ${host_tools}`\n target_configdirs=`echo ${target_libraries} ${target_tools}`\n \n-# Only make build modules if build != host.\n+# Only make build libraries if build != host.\n if test ${host_alias} != ${build_alias} ; then\n   build_configdirs=`echo ${build_libs} ${build_tools}`\n+else\n+  build_configdirs=`echo ${build_tools}`\n fi\n \n ################################################################################\n@@ -1769,7 +1771,6 @@ if test \"${build}\" != \"${host}\" ; then\n   CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}\n   GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}\n   GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}\n-  BUILD_DIR_PREFIX=${build_subdir}\n   BUILD_PREFIX=${build_alias}-\n   BUILD_PREFIX_1=${build_alias}-\n \n@@ -1784,7 +1785,6 @@ else\n \n   CC_FOR_BUILD=\"\\$(CC)\"\n   GCC_FOR_TARGET=\"\\$(USUAL_GCC_FOR_TARGET)\"\n-  BUILD_DIR_PREFIX=\n   BUILD_PREFIX=\n   BUILD_PREFIX_1=loser-\n \n@@ -3504,7 +3504,6 @@ done\n \n \n \n-\n # Build module lists & subconfigure args.\n \n \n@@ -3531,7 +3530,7 @@ test -n \"$target_alias\" && ncn_target_tool_prefix=$target_alias-\n   # Extract the first word of \"${ncn_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3535: checking for $ac_word\" >&5\n+echo \"configure:3534: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3564,7 +3563,7 @@ if test -z \"$ac_cv_prog_AR\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3568: checking for $ac_word\" >&5\n+echo \"configure:3567: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3603,7 +3602,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3607: checking for $ac_word\" >&5\n+echo \"configure:3606: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3636,7 +3635,7 @@ if test -z \"$ac_cv_prog_AS\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3640: checking for $ac_word\" >&5\n+echo \"configure:3639: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3675,7 +3674,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3679: checking for $ac_word\" >&5\n+echo \"configure:3678: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3708,7 +3707,7 @@ if test -z \"$ac_cv_prog_DLLTOOL\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3712: checking for $ac_word\" >&5\n+echo \"configure:3711: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3747,7 +3746,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3751: checking for $ac_word\" >&5\n+echo \"configure:3750: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3780,7 +3779,7 @@ if test -z \"$ac_cv_prog_LD\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3784: checking for $ac_word\" >&5\n+echo \"configure:3783: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3819,7 +3818,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3823: checking for $ac_word\" >&5\n+echo \"configure:3822: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3852,7 +3851,7 @@ if test -z \"$ac_cv_prog_NM\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3856: checking for $ac_word\" >&5\n+echo \"configure:3855: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3891,7 +3890,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3895: checking for $ac_word\" >&5\n+echo \"configure:3894: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3924,7 +3923,7 @@ if test -z \"$ac_cv_prog_RANLIB\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3928: checking for $ac_word\" >&5\n+echo \"configure:3927: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3963,7 +3962,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3967: checking for $ac_word\" >&5\n+echo \"configure:3966: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3996,7 +3995,7 @@ if test -z \"$ac_cv_prog_WINDRES\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4000: checking for $ac_word\" >&5\n+echo \"configure:3999: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4035,7 +4034,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objcopy\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4039: checking for $ac_word\" >&5\n+echo \"configure:4038: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4068,7 +4067,7 @@ if test -z \"$ac_cv_prog_OBJCOPY\" ; then\n     # Extract the first word of \"objcopy\", so it can be a program name with args.\n set dummy objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4072: checking for $ac_word\" >&5\n+echo \"configure:4071: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4107,7 +4106,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objdump\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4111: checking for $ac_word\" >&5\n+echo \"configure:4110: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4140,7 +4139,7 @@ if test -z \"$ac_cv_prog_OBJDUMP\" ; then\n     # Extract the first word of \"objdump\", so it can be a program name with args.\n set dummy objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4144: checking for $ac_word\" >&5\n+echo \"configure:4143: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4186,7 +4185,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4190: checking for $ac_word\" >&5\n+echo \"configure:4189: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4219,7 +4218,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_AR_FOR_TARGET\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4223: checking for $ac_word\" >&5\n+echo \"configure:4222: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4258,7 +4257,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4262: checking for $ac_word\" >&5\n+echo \"configure:4261: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4291,7 +4290,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_AS_FOR_TARGET\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4295: checking for $ac_word\" >&5\n+echo \"configure:4294: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4330,7 +4329,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4334: checking for $ac_word\" >&5\n+echo \"configure:4333: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4363,7 +4362,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_DLLTOOL_FOR_TARGET\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4367: checking for $ac_word\" >&5\n+echo \"configure:4366: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4402,7 +4401,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4406: checking for $ac_word\" >&5\n+echo \"configure:4405: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4435,7 +4434,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_LD_FOR_TARGET\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4439: checking for $ac_word\" >&5\n+echo \"configure:4438: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4474,7 +4473,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4478: checking for $ac_word\" >&5\n+echo \"configure:4477: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4507,7 +4506,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_NM_FOR_TARGET\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4511: checking for $ac_word\" >&5\n+echo \"configure:4510: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4546,7 +4545,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4550: checking for $ac_word\" >&5\n+echo \"configure:4549: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4579,7 +4578,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_RANLIB_FOR_TARGET\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4583: checking for $ac_word\" >&5\n+echo \"configure:4582: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4618,7 +4617,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4622: checking for $ac_word\" >&5\n+echo \"configure:4621: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4651,7 +4650,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_WINDRES_FOR_TARGET\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4655: checking for $ac_word\" >&5\n+echo \"configure:4654: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4736,7 +4735,7 @@ RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}\n NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}\n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:4740: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:4739: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -4783,7 +4782,7 @@ esac\n # gcc for stageN-gcc and stage-prev for stage(N-1).  In case this is not\n # possible, however, we can resort to mv.\n echo $ac_n \"checking if symbolic links between directories work\"\"... $ac_c\" 1>&6\n-echo \"configure:4787: checking if symbolic links between directories work\" >&5\n+echo \"configure:4786: checking if symbolic links between directories work\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_ln_s_dir'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -5025,7 +5024,6 @@ s%@alphaieee_frag@%%g\n s%@ospace_frag@%%g\n s%@SET_LIB_PATH@%$SET_LIB_PATH%g\n s%@RPATH_ENVVAR@%$RPATH_ENVVAR%g\n-s%@BUILD_DIR_PREFIX@%$BUILD_DIR_PREFIX%g\n s%@BUILD_PREFIX@%$BUILD_PREFIX%g\n s%@BUILD_PREFIX_1@%$BUILD_PREFIX_1%g\n s%@gcc_version_trigger@%$gcc_version_trigger%g"}, {"sha": "67de498b737c43de16f31a6f787416891ba04ddb", "filename": "configure.in", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -184,9 +184,11 @@ target_tools=\"target-examples target-groff target-gperf target-rda\"\n configdirs=`echo ${host_libs} ${host_tools}`\n target_configdirs=`echo ${target_libraries} ${target_tools}`\n \n-# Only make build modules if build != host.\n+# Only make build libraries if build != host.\n if test ${host_alias} != ${build_alias} ; then\n   build_configdirs=`echo ${build_libs} ${build_tools}`\n+else\n+  build_configdirs=`echo ${build_tools}`\n fi\n \n ################################################################################\n@@ -985,7 +987,6 @@ if test \"${build}\" != \"${host}\" ; then\n   CXX_FOR_TARGET=${CXX_FOR_TARGET-${target_alias}-c++}\n   GCJ_FOR_TARGET=${GCJ_FOR_TARGET-${target_alias}-gcj}\n   GCC_FOR_TARGET=${GCC_FOR_TARGET-${CC_FOR_TARGET-${target_alias}-gcc}}\n-  BUILD_DIR_PREFIX=${build_subdir}\n   BUILD_PREFIX=${build_alias}-\n   BUILD_PREFIX_1=${build_alias}-\n \n@@ -1000,7 +1001,6 @@ else\n \n   CC_FOR_BUILD=\"\\$(CC)\"\n   GCC_FOR_TARGET=\"\\$(USUAL_GCC_FOR_TARGET)\"\n-  BUILD_DIR_PREFIX=\n   BUILD_PREFIX=\n   BUILD_PREFIX_1=loser-\n \n@@ -2089,7 +2089,6 @@ AC_SUBST_FILE(ospace_frag)\n # Miscellanea: directories, flags, etc.\n AC_SUBST(SET_LIB_PATH)\n AC_SUBST(RPATH_ENVVAR)\n-AC_SUBST(BUILD_DIR_PREFIX)\n AC_SUBST(BUILD_PREFIX)\n AC_SUBST(BUILD_PREFIX_1)\n AC_SUBST(gcc_version_trigger)"}, {"sha": "7f581a9f4b433c745721b268d72df14ba48efa52", "filename": "gcc/ChangeLog", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -1,3 +1,22 @@\n+2004-08-17  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* configure.ac: Trust toplevel's notion of BISON/FLEX/MAKEINFO.\n+\tNo need to check if in a cross configuration.\n+\t* configure: Regenerate.\n+\n+\t* calls.c (precompute_register_parameters):\n+\tInline preserve_subexpressions_p ().\n+\t* expmed.c (expand_mult_const, emit_store_flag): Likewise.\n+\t* optabs.c (expand_binop, expand_twoval_binop, prepare_cmp_insn):\n+\tLikewise.\n+\t* expr.c (get_subtarget): Likewise.\n+\t* rtl.h (preserve_subexpressions_p): Remove.\n+\t* stmt.c (preserve_subexpressions_p): Remove.\n+\n+\t* dojump.c (do_jump) <COND_EXPR, EQ_EXPR, NE_EXPR,\n+\tTRUTH_ANDIF_EXPR, TRUTH_ORIF_EXPR, COMPOUND_EXPR>:\n+\tAbort on gimplified cases.\n+\n 2004-08-16  James E Wilson  <wilson@specifixinc.com>\n \n \t* tree.h (VECTOR_FLOAT_TYPE_P): New.\n@@ -115,6 +134,7 @@\n \tCheck for arificial variables, not is_gimple_tmp_var.\n \t* tree-ssa-live.c (var_union): Likewise.\n \n+>>>>>>> 2.4930\n 2004-08-16  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* calls.c (load_register_parameters): Remove spurious FIXME token."}, {"sha": "3552737846a149e4cd61a6948972b780d1a0ce73", "filename": "gcc/calls.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -691,7 +691,7 @@ precompute_register_parameters (int num_actuals, struct arg_data *args, int *reg\n \t    && args[i].mode != BLKmode\n \t    && rtx_cost (args[i].value, SET) > COSTS_N_INSNS (1)\n \t    && ((SMALL_REGISTER_CLASSES && *reg_parm_seen)\n-\t\t|| preserve_subexpressions_p ()))\n+\t\t|| optimize))\n \t  args[i].value = copy_to_mode_reg (args[i].mode, args[i].value);\n       }\n }"}, {"sha": "f8a0b00157e471c2ecaf481c83e5a37bc0a480e5", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -2666,17 +2666,18 @@ function_arg (CUMULATIVE_ARGS *cum,\t/* current arg information */\n       && GET_MODE_CLASS (TYPE_MODE (type)) != MODE_VECTOR_FLOAT)\n     {\n       enum machine_mode innermode = TYPE_MODE (TREE_TYPE (type));\n-      mode = TREE_CODE (TREE_TYPE (type)) == REAL_TYPE\n-\t     ? MIN_MODE_VECTOR_FLOAT : MIN_MODE_VECTOR_INT;\n+      enum machine_mode newmode\n+\t= TREE_CODE (TREE_TYPE (type)) == REAL_TYPE\n+\t  ? MIN_MODE_VECTOR_FLOAT : MIN_MODE_VECTOR_INT;\n \n       /* Get the mode which has this inner mode and number of units.  */\n-      while (GET_MODE_NUNITS (mode) != TYPE_VECTOR_SUBPARTS (type)\n-\t     || GET_MODE_INNER (mode) != innermode)\n-\t{\n-\t  mode = GET_MODE_WIDER_MODE (mode);\n-\t  if (mode == VOIDmode)\n-\t    abort ();\n-\t}\n+      for (; newmode != VOIDmode; newmode = GET_MODE_WIDER_MODE (newmode))\n+\tif (GET_MODE_NUNITS (newmode) == TYPE_VECTOR_SUBPARTS (type)\n+\t    && GET_MODE_INNER (newmode) == innermode)\n+\t  {\n+\t    mode = newmode;\n+\t    break;\n+\t  }\n     }\n \n   /* Handle a hidden AL argument containing number of registers for varargs"}, {"sha": "8cae074c979eab31b7f97aee1d17bd9189e93d80", "filename": "gcc/configure", "status": "modified", "additions": 94, "deletions": 152, "changes": 246, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -1030,7 +1030,7 @@ esac\n     else\n       echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2\n     fi\n-    cd $ac_popdir\n+    cd \"$ac_popdir\"\n   done\n fi\n \n@@ -2379,8 +2379,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2438,8 +2437,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2555,8 +2553,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2610,8 +2607,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2656,8 +2652,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -2701,8 +2696,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3108,8 +3102,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3180,8 +3173,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3240,8 +3232,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3307,8 +3298,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3378,8 +3368,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3449,8 +3438,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3520,8 +3508,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3592,8 +3579,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3665,8 +3651,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3739,8 +3724,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3790,8 +3774,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -3849,8 +3832,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4062,8 +4044,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4233,8 +4214,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -4297,8 +4277,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5215,16 +5194,11 @@ echo \"${ECHO_T}no\" >&6\n fi\n \n \n-# Do we have a single-tree copy of texinfo?\n-if test -f $srcdir/../texinfo/Makefile.in; then\n-  MAKEINFO='$(objdir)/../texinfo/makeinfo/makeinfo'\n-  gcc_cv_prog_makeinfo_modern=yes\n-  echo \"$as_me:$LINENO: result: Using makeinfo from the unified source tree.\" >&5\n-echo \"${ECHO_T}Using makeinfo from the unified source tree.\" >&6\n-else\n-  # See if makeinfo has been installed and is modern enough\n-  # that we can use it.\n-  # Extract the first word of \"makeinfo\", so it can be a program name with args.\n+MISSING=\"${CONFIG_SHELL-/bin/sh} $srcdir/../missing\"\n+\n+# See if makeinfo has been installed and is modern enough\n+# that we can use it.\n+# Extract the first word of \"makeinfo\", so it can be a program name with args.\n set dummy makeinfo; ac_word=$2\n echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n@@ -5268,7 +5242,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:5271: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:5245: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -5283,9 +5257,8 @@ else\n   gcc_cv_prog_makeinfo_modern=no\n fi\n \n-fi\n-\n if test $gcc_cv_prog_makeinfo_modern = no; then\n+  MAKEINFO=\"$MISSING makeinfo\"\n   { echo \"$as_me:$LINENO: WARNING:\n *** Makeinfo is missing or too old.\n *** Info documentation will not be built.\" >&5\n@@ -5297,6 +5270,7 @@ else\n   BUILD_INFO=info\n fi\n \n+\n # Is pod2man recent enough to regenerate manpages?\n echo \"$as_me:$LINENO: checking for recent Pod::Man\" >&5\n echo $ECHO_N \"checking for recent Pod::Man... $ECHO_C\" >&6\n@@ -5310,13 +5284,12 @@ echo \"${ECHO_T}no\" >&6\n   GENERATED_MANPAGES=\n fi\n \n+\n # How about lex?\n-if test x${build} = x${host} && test -f $srcdir/../flex/skel.c \\\n-  && test -d ../flex ; then\n-  FLEX='$(objdir)/../flex/flex'\n-else\n-  # Extract the first word of \"flex\", so it can be a program name with args.\n-set dummy flex; ac_word=$2\n+for ac_prog in flex\n+do\n+  # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n if test \"${ac_cv_prog_FLEX+set}\" = set; then\n@@ -5332,14 +5305,13 @@ do\n   test -z \"$as_dir\" && as_dir=.\n   for ac_exec_ext in '' $ac_executable_extensions; do\n   if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_FLEX=\"flex\"\n+    ac_cv_prog_FLEX=\"$ac_prog\"\n     echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n   fi\n done\n done\n \n-  test -z \"$ac_cv_prog_FLEX\" && ac_cv_prog_FLEX=\"${CONFIG_SHELL-/bin/sh} ${srcdir}/../missing flex\"\n fi\n fi\n FLEX=$ac_cv_prog_FLEX\n@@ -5351,16 +5323,16 @@ else\n echo \"${ECHO_T}no\" >&6\n fi\n \n-fi\n+  test -n \"$FLEX\" && break\n+done\n+test -n \"$FLEX\" || FLEX=\"$MISSING flex\"\n+\n \n # Bison?\n-# The -L switch is so bison can find its skeleton file.\n-if test x${build} = x${host} && test -f $srcdir/../bison/bison.simple \\\n-  && test -d ../bison ; then\n-  BISON='$(objdir)/../bison/bison -L $(srcdir)/../bison/'\n-else\n-  # Extract the first word of \"bison\", so it can be a program name with args.\n-set dummy bison; ac_word=$2\n+for ac_prog in bison\n+do\n+  # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n+set dummy $ac_prog; ac_word=$2\n echo \"$as_me:$LINENO: checking for $ac_word\" >&5\n echo $ECHO_N \"checking for $ac_word... $ECHO_C\" >&6\n if test \"${ac_cv_prog_BISON+set}\" = set; then\n@@ -5376,14 +5348,13 @@ do\n   test -z \"$as_dir\" && as_dir=.\n   for ac_exec_ext in '' $ac_executable_extensions; do\n   if $as_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_BISON=\"bison\"\n+    ac_cv_prog_BISON=\"$ac_prog\"\n     echo \"$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext\" >&5\n     break 2\n   fi\n done\n done\n \n-  test -z \"$ac_cv_prog_BISON\" && ac_cv_prog_BISON=\"${CONFIG_SHELL-/bin/sh} ${srcdir}/../missing bison\"\n fi\n fi\n BISON=$ac_cv_prog_BISON\n@@ -5395,7 +5366,13 @@ else\n echo \"${ECHO_T}no\" >&6\n fi\n \n-fi\n+  test -n \"$BISON\" && break\n+done\n+test -n \"$BISON\" || BISON=\"$MISSING bison\"\n+\n+\n+# Binutils are not build modules, unlike bison/flex/makeinfo.  So we\n+# check for build == host before using them.\n \n # NM\n if test x${build} = x${host} && test -f $srcdir/../binutils/nm.c \\\n@@ -5520,8 +5497,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5591,8 +5567,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5757,8 +5732,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5819,8 +5793,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -5890,8 +5863,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6165,8 +6137,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6239,8 +6210,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6281,8 +6251,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6484,8 +6453,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6559,8 +6527,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6614,8 +6581,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6693,8 +6659,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6748,8 +6713,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6817,8 +6781,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -6948,8 +6911,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7070,8 +7032,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7422,8 +7383,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7540,8 +7500,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7653,8 +7612,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -7812,8 +7770,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8182,8 +8139,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8233,8 +8189,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8309,8 +8264,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8384,8 +8338,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8487,8 +8440,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8573,8 +8525,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8643,8 +8594,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8713,8 +8663,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8797,8 +8746,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8874,8 +8822,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -8941,8 +8888,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9078,8 +9024,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9162,8 +9107,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9453,8 +9397,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9723,8 +9666,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -9778,8 +9720,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n   cat conftest.err >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n   { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n   (eval $ac_try) 2>&5\n   ac_status=$?\n@@ -13467,11 +13408,6 @@ esac\n \n \n \n-  if test x\"$ac_file\" != x-; then\n-    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n-echo \"$as_me: creating $ac_file\" >&6;}\n-    rm -f \"$ac_file\"\n-  fi\n   # Let's still pretend it is `configure' which instantiates (i.e., don't\n   # use $as_me), people would be surprised to read:\n   #    /* config.h.  Generated by config.status.  */\n@@ -13510,6 +13446,12 @@ echo \"$as_me: error: cannot find input file: $f\" >&2;}\n \t fi;;\n       esac\n     done` || { (exit 1); exit 1; }\n+\n+  if test x\"$ac_file\" != x-; then\n+    { echo \"$as_me:$LINENO: creating $ac_file\" >&5\n+echo \"$as_me: creating $ac_file\" >&6;}\n+    rm -f \"$ac_file\"\n+  fi\n _ACEOF\n cat >>$CONFIG_STATUS <<_ACEOF\n   sed \"$ac_vpsub"}, {"sha": "96d8e04cd7087d44810d8794fdb8f7bdb635ca1e", "filename": "gcc/configure.ac", "status": "modified", "additions": 15, "deletions": 26, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -756,56 +756,45 @@ gcc_AC_PROG_CMP_IGNORE_INITIAL\n # See if we have the mktemp command.\n AC_CHECK_PROG(have_mktemp_command, mktemp, yes, no)\n \n-# Do we have a single-tree copy of texinfo?\n-if test -f $srcdir/../texinfo/Makefile.in; then\n-  MAKEINFO='$(objdir)/../texinfo/makeinfo/makeinfo'\n-  gcc_cv_prog_makeinfo_modern=yes\n-  AC_MSG_RESULT([Using makeinfo from the unified source tree.])\n-else\n-  # See if makeinfo has been installed and is modern enough\n-  # that we can use it.\n-  gcc_AC_CHECK_PROG_VER(MAKEINFO, makeinfo, --version,\n+MISSING=\"${CONFIG_SHELL-/bin/sh} $srcdir/../missing\"\n+\n+# See if makeinfo has been installed and is modern enough\n+# that we can use it.\n+gcc_AC_CHECK_PROG_VER(MAKEINFO, makeinfo, --version,\n   [GNU texinfo.* \\([0-9][0-9.]*\\)],\n   [4.[2-9]*])\n-fi\n-\n if test $gcc_cv_prog_makeinfo_modern = no; then\n+  MAKEINFO=\"$MISSING makeinfo\"\n   AC_MSG_WARN([\n *** Makeinfo is missing or too old.\n *** Info documentation will not be built.])\n   BUILD_INFO=\n else\n-  BUILD_INFO=info\t\tAC_SUBST(BUILD_INFO)\n+  BUILD_INFO=info\n fi\n+AC_SUBST(BUILD_INFO)\n \n # Is pod2man recent enough to regenerate manpages?\n AC_MSG_CHECKING([for recent Pod::Man])\n if (perl -e 'use 1.10 Pod::Man') >/dev/null 2>&1; then\n   AC_MSG_RESULT(yes)\n-  GENERATED_MANPAGES=generated-manpages\t\tAC_SUBST(GENERATED_MANPAGES)\n+  GENERATED_MANPAGES=generated-manpages\n else\n   AC_MSG_RESULT(no)\n   GENERATED_MANPAGES=\n fi\n+AC_SUBST(GENERATED_MANPAGES)\n \n # How about lex?\n dnl Don't use AC_PROG_LEX; we insist on flex.\n dnl LEXLIB is not useful in gcc.\n-if test x${build} = x${host} && test -f $srcdir/../flex/skel.c \\\n-  && test -d ../flex ; then\n-  FLEX='$(objdir)/../flex/flex'\n-else\n-  AC_CHECK_PROG(FLEX, flex, flex, ${CONFIG_SHELL-/bin/sh} ${srcdir}/../missing flex)\n-fi\n+AC_CHECK_PROGS([FLEX], flex, [$MISSING flex])\n \n # Bison?\n-# The -L switch is so bison can find its skeleton file.\n-if test x${build} = x${host} && test -f $srcdir/../bison/bison.simple \\\n-  && test -d ../bison ; then\n-  BISON='$(objdir)/../bison/bison -L $(srcdir)/../bison/'\n-else\n-  AC_CHECK_PROG(BISON, bison, bison, ${CONFIG_SHELL-/bin/sh} ${srcdir}/../missing bison)\n-fi\n+AC_CHECK_PROGS([BISON], bison, [$MISSING bison])\n+\n+# Binutils are not build modules, unlike bison/flex/makeinfo.  So we\n+# check for build == host before using them.\n \n # NM\n if test x${build} = x${host} && test -f $srcdir/../binutils/nm.c \\"}, {"sha": "3877f79de7315882b74dd089df04c40a93bfb597", "filename": "gcc/dojump.c", "status": "modified", "additions": 5, "deletions": 122, "changes": 127, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fdojump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fdojump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdojump.c?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -208,19 +208,6 @@ do_jump (tree exp, rtx if_false_label, rtx if_true_label)\n       do_jump (TREE_OPERAND (exp, 0), if_false_label, if_true_label);\n       break;\n \n-#if 0\n-      /* This is never less insns than evaluating the PLUS_EXPR followed by\n-         a test and can be longer if the test is eliminated.  */\n-    case PLUS_EXPR:\n-      /* Reduce to minus.  */\n-      exp = build2 (MINUS_EXPR, TREE_TYPE (exp),\n-\t\t    TREE_OPERAND (exp, 0),\n-\t\t    fold (build1 (NEGATE_EXPR,\n-\t\t\t\t  TREE_TYPE (TREE_OPERAND (exp, 1)),\n-\t\t\t\t  TREE_OPERAND (exp, 1))));\n-      /* Process as MINUS.  */\n-#endif\n-\n     case MINUS_EXPR:\n       /* Nonzero iff operands of minus differ.  */\n       do_compare_and_jump (build2 (NE_EXPR, TREE_TYPE (exp),\n@@ -281,28 +268,11 @@ do_jump (tree exp, rtx if_false_label, rtx if_true_label)\n       break;\n \n     case TRUTH_ANDIF_EXPR:\n-      if (if_false_label == 0)\n-        if_false_label = drop_through_label = gen_label_rtx ();\n-      do_jump (TREE_OPERAND (exp, 0), if_false_label, NULL_RTX);\n-      do_jump (TREE_OPERAND (exp, 1), if_false_label, if_true_label);\n-      break;\n-\n     case TRUTH_ORIF_EXPR:\n-      if (if_true_label == 0)\n-        if_true_label = drop_through_label = gen_label_rtx ();\n-      do_jump (TREE_OPERAND (exp, 0), NULL_RTX, if_true_label);\n-      do_jump (TREE_OPERAND (exp, 1), if_false_label, if_true_label);\n-      break;\n-\n     case COMPOUND_EXPR:\n-      push_temp_slots ();\n-      expand_expr (TREE_OPERAND (exp, 0), const0_rtx, VOIDmode, 0);\n-      preserve_temp_slots (NULL_RTX);\n-      free_temp_slots ();\n-      pop_temp_slots ();\n-      do_pending_stack_adjust ();\n-      do_jump (TREE_OPERAND (exp, 1), if_false_label, if_true_label);\n-      break;\n+    case COND_EXPR:\n+      /* Lowered by gimplify.c.  */\n+      abort ();\n \n     case COMPONENT_REF:\n     case BIT_FIELD_REF:\n@@ -334,70 +304,15 @@ do_jump (tree exp, rtx if_false_label, rtx if_true_label)\n         goto normal;\n       }\n \n-    case COND_EXPR:\n-      /* Do (a ? 1 : 0) and (a ? 0 : 1) as special cases.  */\n-      if (integer_onep (TREE_OPERAND (exp, 1))\n-          && integer_zerop (TREE_OPERAND (exp, 2)))\n-        do_jump (TREE_OPERAND (exp, 0), if_false_label, if_true_label);\n-\n-      else if (integer_zerop (TREE_OPERAND (exp, 1))\n-               && integer_onep (TREE_OPERAND (exp, 2)))\n-        do_jump (TREE_OPERAND (exp, 0), if_true_label, if_false_label);\n-\n-      else\n-      {\n-        rtx label1 = gen_label_rtx ();\n-        drop_through_label = gen_label_rtx ();\n-\n-        do_jump (TREE_OPERAND (exp, 0), label1, NULL_RTX);\n-\n-        /* Now the THEN-expression.  */\n-        do_jump (TREE_OPERAND (exp, 1),\n-                 if_false_label ? if_false_label : drop_through_label,\n-                 if_true_label ? if_true_label : drop_through_label);\n-        /* In case the do_jump just above never jumps.  */\n-        do_pending_stack_adjust ();\n-        emit_label (label1);\n-\n-        /* Now the ELSE-expression.  */\n-        do_jump (TREE_OPERAND (exp, 2),\n-           if_false_label ? if_false_label : drop_through_label,\n-           if_true_label ? if_true_label : drop_through_label);\n-      }\n-      break;\n-\n     case EQ_EXPR:\n       {\n         tree inner_type = TREE_TYPE (TREE_OPERAND (exp, 0));\n \n         if (GET_MODE_CLASS (TYPE_MODE (inner_type)) == MODE_COMPLEX_FLOAT\n             || GET_MODE_CLASS (TYPE_MODE (inner_type)) == MODE_COMPLEX_INT)\n-          {\n-            tree exp0 = save_expr (TREE_OPERAND (exp, 0));\n-            tree exp1 = save_expr (TREE_OPERAND (exp, 1));\n-            do_jump\n-              (fold\n-               (build2 (TRUTH_ANDIF_EXPR, TREE_TYPE (exp),\n-                 fold (build2 (EQ_EXPR, TREE_TYPE (exp),\n-                  fold (build1 (REALPART_EXPR,\n-                    TREE_TYPE (inner_type),\n-                    exp0)),\n-                  fold (build1 (REALPART_EXPR,\n-                    TREE_TYPE (inner_type),\n-                    exp1)))),\n-                 fold (build2 (EQ_EXPR, TREE_TYPE (exp),\n-                  fold (build1 (IMAGPART_EXPR,\n-                    TREE_TYPE (inner_type),\n-                    exp0)),\n-                  fold (build1 (IMAGPART_EXPR,\n-                    TREE_TYPE (inner_type),\n-                    exp1)))))),\n-               if_false_label, if_true_label);\n-          }\n-\n+\t  abort ();\n         else if (integer_zerop (TREE_OPERAND (exp, 1)))\n           do_jump (TREE_OPERAND (exp, 0), if_true_label, if_false_label);\n-\n         else if (GET_MODE_CLASS (TYPE_MODE (inner_type)) == MODE_INT\n                  && !can_compare_p (EQ, TYPE_MODE (inner_type), ccp_jump))\n           do_jump_by_parts_equality (exp, if_false_label, if_true_label);\n@@ -412,32 +327,9 @@ do_jump (tree exp, rtx if_false_label, rtx if_true_label)\n \n         if (GET_MODE_CLASS (TYPE_MODE (inner_type)) == MODE_COMPLEX_FLOAT\n             || GET_MODE_CLASS (TYPE_MODE (inner_type)) == MODE_COMPLEX_INT)\n-          {\n-            tree exp0 = save_expr (TREE_OPERAND (exp, 0));\n-            tree exp1 = save_expr (TREE_OPERAND (exp, 1));\n-            do_jump\n-              (fold\n-               (build2 (TRUTH_ORIF_EXPR, TREE_TYPE (exp),\n-                 fold (build2 (NE_EXPR, TREE_TYPE (exp),\n-                  fold (build1 (REALPART_EXPR,\n-                    TREE_TYPE (inner_type),\n-                    exp0)),\n-                  fold (build1 (REALPART_EXPR,\n-                    TREE_TYPE (inner_type),\n-                    exp1)))),\n-                 fold (build2 (NE_EXPR, TREE_TYPE (exp),\n-                    fold (build1 (IMAGPART_EXPR,\n-                      TREE_TYPE (inner_type),\n-                      exp0)),\n-                    fold (build1 (IMAGPART_EXPR,\n-                      TREE_TYPE (inner_type),\n-                      exp1)))))),\n-               if_false_label, if_true_label);\n-          }\n-\n+\t  abort ();\n         else if (integer_zerop (TREE_OPERAND (exp, 1)))\n           do_jump (TREE_OPERAND (exp, 0), if_false_label, if_true_label);\n-\n         else if (GET_MODE_CLASS (TYPE_MODE (inner_type)) == MODE_INT\n            && !can_compare_p (NE, TYPE_MODE (inner_type), ccp_jump))\n           do_jump_by_parts_equality (exp, if_true_label, if_false_label);\n@@ -602,15 +494,6 @@ do_jump (tree exp, rtx if_false_label, rtx if_true_label)\n     default:\n     normal:\n       temp = expand_expr (exp, NULL_RTX, VOIDmode, 0);\n-#if 0\n-      /* This is not needed any more and causes poor code since it causes\n-         comparisons and tests from non-SI objects to have different code\n-         sequences.  */\n-      /* Copy to register to avoid generating bad insns by cse\n-         from (set (mem ...) (arithop))  (set (cc0) (mem ...)).  */\n-      if (!cse_not_expected && MEM_P (temp))\n-        temp = copy_to_reg (temp);\n-#endif\n       do_pending_stack_adjust ();\n \n       if (GET_CODE (temp) == CONST_INT"}, {"sha": "b44ba65e28bbbfc697c34e965dd8f88896c55c3c", "filename": "gcc/expmed.c", "status": "modified", "additions": 11, "deletions": 13, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -2547,13 +2547,12 @@ expand_mult_const (enum machine_mode mode, rtx op0, HOST_WIDE_INT val,\n   for (opno = 1; opno < alg->ops; opno++)\n     {\n       int log = alg->log[opno];\n-      int preserve = preserve_subexpressions_p ();\n-      rtx shift_subtarget = preserve ? 0 : accum;\n+      rtx shift_subtarget = optimize ? 0 : accum;\n       rtx add_target\n \t= (opno == alg->ops - 1 && target != 0 && variant != add_variant\n-\t   && ! preserve)\n+\t   && !optimize)\n \t  ? target : 0;\n-      rtx accum_target = preserve ? 0 : accum;\n+      rtx accum_target = optimize ? 0 : accum;\n \n       switch (alg->op[opno])\n \t{\n@@ -2615,8 +2614,8 @@ expand_mult_const (enum machine_mode mode, rtx op0, HOST_WIDE_INT val,\n \t\t\t      build_int_cst (NULL_TREE, log, 0),\n \t\t\t      NULL_RTX, 0);\n \t  accum = force_operand (gen_rtx_MINUS (mode, tem, accum),\n-\t\t\t\t (add_target ? add_target\n-\t\t\t\t  : preserve ? 0 : tem));\n+\t\t\t\t (add_target\n+\t\t\t\t  ? add_target : (optimize ? 0 : tem)));\n \t  val_so_far = (val_so_far << log) - val_so_far;\n \t  break;\n \n@@ -4829,8 +4828,7 @@ emit_store_flag (rtx target, enum rtx_code code, rtx op0, rtx op1,\n       compare_mode = insn_data[(int) icode].operand[0].mode;\n       subtarget = target;\n       pred = insn_data[(int) icode].operand[0].predicate;\n-      if (preserve_subexpressions_p ()\n-\t  || ! (*pred) (subtarget, compare_mode))\n+      if (optimize || ! (*pred) (subtarget, compare_mode))\n \tsubtarget = gen_reg_rtx (compare_mode);\n \n       pattern = GEN_FCN (icode) (subtarget);\n@@ -4863,7 +4861,7 @@ emit_store_flag (rtx target, enum rtx_code code, rtx op0, rtx op1,\n \t  /* If we want to keep subexpressions around, don't reuse our\n \t     last target.  */\n \n-\t  if (preserve_subexpressions_p ())\n+\t  if (optimize)\n \t    subtarget = 0;\n \n \t  /* Now normalize to the proper value in COMPARE_MODE.  Sometimes\n@@ -4908,10 +4906,10 @@ emit_store_flag (rtx target, enum rtx_code code, rtx op0, rtx op1,\n \n   delete_insns_since (last);\n \n-  /* If expensive optimizations, use different pseudo registers for each\n-     insn, instead of reusing the same pseudo.  This leads to better CSE,\n-     but slows down the compiler, since there are more pseudos */\n-  subtarget = (!flag_expensive_optimizations\n+  /* If optimizing, use different pseudo registers for each insn, instead\n+     of reusing the same pseudo.  This leads to better CSE, but slows\n+     down the compiler, since there are more pseudos */\n+  subtarget = (!optimize\n \t       && (target_mode == mode)) ? target : NULL_RTX;\n \n   /* If we reached here, we can't do this with a scc insn.  However, there"}, {"sha": "f34285be7d51724809d13eb9c3c9ad24406eaf6f", "filename": "gcc/expr.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -3445,16 +3445,14 @@ emit_push_insn (rtx x, enum machine_mode mode, tree type, rtx size,\n static rtx\n get_subtarget (rtx x)\n {\n-  return ((x == 0\n+  return (optimize\n+          || x == 0\n \t   /* Only registers can be subtargets.  */\n \t   || !REG_P (x)\n \t   /* If the register is readonly, it can't be set more than once.  */\n \t   || RTX_UNCHANGING_P (x)\n \t   /* Don't use hard regs to avoid extending their life.  */\n \t   || REGNO (x) < FIRST_PSEUDO_REGISTER\n-\t   /* Avoid subtargets inside loops,\n-\t      since they hide some invariant expressions.  */\n-\t   || preserve_subexpressions_p ())\n \t  ? 0 : x);\n }\n "}, {"sha": "42f714b3d828b940868fd04dd781d84bef069bb5", "filename": "gcc/optabs.c", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Foptabs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Foptabs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Foptabs.c?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -782,13 +782,13 @@ expand_binop (enum machine_mode mode, optab binoptab, rtx op0, rtx op1,\n       binoptab = add_optab;\n     }\n \n-  /* If we are inside an appropriately-short loop and one operand is an\n-     expensive constant, force it into a register.  */\n-  if (CONSTANT_P (op0) && preserve_subexpressions_p ()\n+  /* If we are inside an appropriately-short loop and we are optimizing,\n+     force expensive constants into a register.  */\n+  if (CONSTANT_P (op0) && optimize\n       && rtx_cost (op0, binoptab->code) > COSTS_N_INSNS (1))\n     op0 = force_reg (mode, op0);\n \n-  if (CONSTANT_P (op1) && preserve_subexpressions_p ()\n+  if (CONSTANT_P (op1) && optimize\n       && ! shift_op && rtx_cost (op1, binoptab->code) > COSTS_N_INSNS (1))\n     op1 = force_reg (mode, op1);\n \n@@ -2348,13 +2348,13 @@ expand_twoval_binop (optab binoptab, rtx op0, rtx op1, rtx targ0, rtx targ1,\n       op1 = force_not_mem (op1);\n     }\n \n-  /* If we are inside an appropriately-short loop and one operand is an\n-     expensive constant, force it into a register.  */\n-  if (CONSTANT_P (op0) && preserve_subexpressions_p ()\n+  /* If we are inside an appropriately-short loop and we are optimizing,\n+     force expensive constants into a register.  */\n+  if (CONSTANT_P (op0) && optimize\n       && rtx_cost (op0, binoptab->code) > COSTS_N_INSNS (1))\n     op0 = force_reg (mode, op0);\n \n-  if (CONSTANT_P (op1) && preserve_subexpressions_p ()\n+  if (CONSTANT_P (op1) && optimize\n       && rtx_cost (op1, binoptab->code) > COSTS_N_INSNS (1))\n     op1 = force_reg (mode, op1);\n \n@@ -3750,13 +3750,13 @@ prepare_cmp_insn (rtx *px, rtx *py, enum rtx_code *pcomparison, rtx size,\n \t}\n     }\n \n-  /* If we are inside an appropriately-short loop and one operand is an\n-     expensive constant, force it into a register.  */\n-  if (CONSTANT_P (x) && preserve_subexpressions_p ()\n+  /* If we are inside an appropriately-short loop and we are optimizing,\n+     force expensive constants into a register.  */\n+  if (CONSTANT_P (x) && optimize\n       && rtx_cost (x, COMPARE) > COSTS_N_INSNS (1))\n     x = force_reg (mode, x);\n \n-  if (CONSTANT_P (y) && preserve_subexpressions_p ()\n+  if (CONSTANT_P (y) && optimize\n       && rtx_cost (y, COMPARE) > COSTS_N_INSNS (1))\n     y = force_reg (mode, y);\n "}, {"sha": "8c01776b2877bf07ed25290655370ccb3797332d", "filename": "gcc/rtl.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -2239,7 +2239,6 @@ extern void update_temp_slot_address (rtx, rtx);\n extern void expand_null_return (void);\n extern void expand_naked_return (void);\n extern void emit_jump (rtx);\n-extern int preserve_subexpressions_p (void);\n \n /* In expr.c */\n extern rtx move_by_pieces (rtx, rtx, unsigned HOST_WIDE_INT,"}, {"sha": "760be9f3516bc490c05e7cf131c1baf3812c87b9", "filename": "gcc/stmt.c", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c27e184c87d2b245f80287be1d28f686b68519e/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=7c27e184c87d2b245f80287be1d28f686b68519e", "patch": "@@ -1491,16 +1491,6 @@ warn_if_unused_value (tree exp, location_t locus)\n       return 1;\n     }\n }\n-\f\n-/* Return nonzero if we should preserve sub-expressions as separate\n-   pseudos.  We never do so if we aren't optimizing.  We always do so\n-   if -fexpensive-optimizations.  */\n-\n-int\n-preserve_subexpressions_p (void)\n-{\n-  return optimize && (cfun || flag_expensive_optimizations);\n-}\n \n \f\n /* Generate RTL to return from the current function, with no value."}]}