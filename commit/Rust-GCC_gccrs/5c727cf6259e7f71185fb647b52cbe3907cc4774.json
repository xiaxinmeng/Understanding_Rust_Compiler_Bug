{"sha": "5c727cf6259e7f71185fb647b52cbe3907cc4774", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWM3MjdjZjYyNTllN2Y3MTE4NWZiNjQ3YjUyY2JlMzkwN2NjNDc3NA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-04-18T04:11:22Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-04-18T04:11:22Z"}, "message": "re PR go/90110 (libgo fails to build against glibc 2.19)\n\n\tPR go/90110\n    compiler: use temporary to avoid early destruction\n    \n    The code was passing a substr directly to strtol, and then checking\n    the *end value returned by strtol.  But the substr could be destroyed\n    as soon as strtol returns, making the test of *end invalid.\n    \n    Also fix an incorrect test of the string index rather than the value.\n    \n    Fixes https://gcc.gnu.org/PR90110\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/172663\n\nFrom-SVN: r270434", "tree": {"sha": "b8471eb63988c582ac946e04f2ad644d953b4884", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b8471eb63988c582ac946e04f2ad644d953b4884"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5c727cf6259e7f71185fb647b52cbe3907cc4774", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c727cf6259e7f71185fb647b52cbe3907cc4774", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c727cf6259e7f71185fb647b52cbe3907cc4774", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c727cf6259e7f71185fb647b52cbe3907cc4774/comments", "author": null, "committer": null, "parents": [{"sha": "5a58e967b526eba3d9b850cd7bc76dcc580bf708", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a58e967b526eba3d9b850cd7bc76dcc580bf708", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a58e967b526eba3d9b850cd7bc76dcc580bf708"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "6007b4f750a800154112e90455843530f559e62b", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c727cf6259e7f71185fb647b52cbe3907cc4774/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c727cf6259e7f71185fb647b52cbe3907cc4774/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=5c727cf6259e7f71185fb647b52cbe3907cc4774", "patch": "@@ -1,4 +1,4 @@\n-20010e494f46d8fd58cfd372093b059578d3379a\n+ecbd6562aff604b9559f63d714e922a0c9c2a77f\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "c1982eb4300951dfbd9a3dcb10f8e5d5c2f76d5e", "filename": "gcc/go/gofrontend/import.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5c727cf6259e7f71185fb647b52cbe3907cc4774/gcc%2Fgo%2Fgofrontend%2Fimport.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5c727cf6259e7f71185fb647b52cbe3907cc4774/gcc%2Fgo%2Fgofrontend%2Fimport.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fimport.cc?ref=5c727cf6259e7f71185fb647b52cbe3907cc4774", "patch": "@@ -1478,8 +1478,9 @@ Import_function_body::read_type()\n   this->off_ = i + 1;\n \n   char *end;\n-  long val = strtol(this->body_.substr(start, i - start).c_str(), &end, 10);\n-  if (*end != '\\0' || i > 0x7fffffff)\n+  std::string num = this->body_.substr(start, i - start);\n+  long val = strtol(num.c_str(), &end, 10);\n+  if (*end != '\\0' || val > 0x7fffffff)\n     {\n       if (!this->saw_error_)\n \tgo_error_at(this->location(),"}]}