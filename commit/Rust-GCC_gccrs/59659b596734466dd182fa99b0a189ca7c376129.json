{"sha": "59659b596734466dd182fa99b0a189ca7c376129", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTk2NTliNTk2NzM0NDY2ZGQxODJmYTk5YjBhMTg5Y2E3YzM3NjEyOQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2011-11-18T16:15:59Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2011-11-18T16:15:59Z"}, "message": "Support libitm on Solaris 8 and 9/x86 with Sun as\n\n\t* config/generic/asmcfi.h: Fix comment.\n\t* config/x86/sjlj.S (_ITM_beginTransaction): Provide ELF PIC code\n\tsequence without .hidden support, error for non-ELF targets.\n\t(GTM_longjmp) [__ELF__]: Only use .hidden if\n\tHAVE_ATTRIBUTE_VISIBILITY.\n\nFrom-SVN: r181481", "tree": {"sha": "c571e1e0ec2e804464122759d57525541ffd6d36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c571e1e0ec2e804464122759d57525541ffd6d36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/59659b596734466dd182fa99b0a189ca7c376129", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59659b596734466dd182fa99b0a189ca7c376129", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59659b596734466dd182fa99b0a189ca7c376129", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59659b596734466dd182fa99b0a189ca7c376129/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "919f402ca5eae1caf53ed2b9caffc9a50e92cdd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/919f402ca5eae1caf53ed2b9caffc9a50e92cdd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/919f402ca5eae1caf53ed2b9caffc9a50e92cdd0"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "642c42a01b7bf4dac20f2577e556a66b111247b7", "filename": "libitm/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59659b596734466dd182fa99b0a189ca7c376129/libitm%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59659b596734466dd182fa99b0a189ca7c376129/libitm%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FChangeLog?ref=59659b596734466dd182fa99b0a189ca7c376129", "patch": "@@ -1,3 +1,11 @@\n+2011-11-18  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* config/generic/asmcfi.h: Fix comment.\n+\t* config/x86/sjlj.S (_ITM_beginTransaction): Provide ELF PIC code\n+\tsequence without .hidden support, error for non-ELF targets.\n+\t(GTM_longjmp) [__ELF__]: Only use .hidden if\n+\tHAVE_ATTRIBUTE_VISIBILITY.\n+\n 2011-11-17  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* alloc_cpp.cc [__osf__] (_ZnwX, _ZdlPv, _ZnaX, _ZdaPv,"}, {"sha": "4344d6f8f9798b9b97df79299363a20719758eef", "filename": "libitm/config/generic/asmcfi.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59659b596734466dd182fa99b0a189ca7c376129/libitm%2Fconfig%2Fgeneric%2Fasmcfi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59659b596734466dd182fa99b0a189ca7c376129/libitm%2Fconfig%2Fgeneric%2Fasmcfi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Fgeneric%2Fasmcfi.h?ref=59659b596734466dd182fa99b0a189ca7c376129", "patch": "@@ -41,4 +41,4 @@\n #define cfi_def_cfa(r,n)\n #define cfi_register(o,n)\n \n-#endif /* HAVE_ASM_CFI */\n+#endif /* HAVE_AS_CFI_PSEUDO_OP */"}, {"sha": "ed755daa8a03f575ee00db83652e58e24bad4a12", "filename": "libitm/config/x86/sjlj.S", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59659b596734466dd182fa99b0a189ca7c376129/libitm%2Fconfig%2Fx86%2Fsjlj.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59659b596734466dd182fa99b0a189ca7c376129/libitm%2Fconfig%2Fx86%2Fsjlj.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Fx86%2Fsjlj.S?ref=59659b596734466dd182fa99b0a189ca7c376129", "patch": "@@ -60,7 +60,17 @@ _ITM_beginTransaction:\n \tmovl\t%edi, 20(%esp)\n \tmovl\t%ebp, 24(%esp)\n \tleal\t8(%esp), %edx\n+#if defined HAVE_ATTRIBUTE_VISIBILITY || !defined __PIC__\n \tcall\tGTM_begin_transaction\n+#elif defined __ELF__\n+\tcall\t1f\n+1:\tpopl\t%ebx\n+\taddl\t$_GLOBAL_OFFSET_TABLE_+[.-1b], %ebx\n+\tcall\tGTM_begin_transaction@PLT\n+\tmovl\t12(%esp), %ebx\n+#else\n+# error \"Unsupported PIC sequence\"\n+#endif\n \taddl\t$28, %esp\n \tcfi_def_cfa_offset(4)\n \tret\n@@ -108,7 +118,9 @@ GTM_longjmp:\n \n #ifdef __ELF__\n \t.type\tGTM_longjmp, @function\n+#ifdef HAVE_ATTRIBUTE_VISIBILITY\n \t.hidden\tGTM_longjmp\n+#endif\n \t.size\tGTM_longjmp, .-GTM_longjmp\n #endif\n "}]}