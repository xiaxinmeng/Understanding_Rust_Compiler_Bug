{"sha": "3a265431763860a5381416371d38e2d602cfdaaf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2EyNjU0MzE3NjM4NjBhNTM4MTQxNjM3MWQzOGUyZDYwMmNmZGFhZg==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-01-17T14:51:41Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-01-17T14:51:41Z"}, "message": "gcc.c (process_command): New local lang_n_files, and use it in test of -c with -o.\n\n\t* gcc.c (process_command): New local lang_n_files, and use\n\tit in test of -c with -o.  Move test of -save-temps.\n\tTest for trailing NUL in -c.\n\nFrom-SVN: r11038", "tree": {"sha": "0b145318e9393b43ec1c15fe8de0cef1fd1aff36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b145318e9393b43ec1c15fe8de0cef1fd1aff36"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a265431763860a5381416371d38e2d602cfdaaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a265431763860a5381416371d38e2d602cfdaaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a265431763860a5381416371d38e2d602cfdaaf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a265431763860a5381416371d38e2d602cfdaaf/comments", "author": null, "committer": null, "parents": [{"sha": "5b65a74fb5a0d3048624f34e76ef57712436e3f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b65a74fb5a0d3048624f34e76ef57712436e3f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b65a74fb5a0d3048624f34e76ef57712436e3f7"}], "stats": {"total": 24, "additions": 14, "deletions": 10}, "files": [{"sha": "d905f5f5656d363b7cf8d3e01394b2449e05c891", "filename": "gcc/gcc.c", "status": "modified", "additions": 14, "deletions": 10, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a265431763860a5381416371d38e2d602cfdaaf/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a265431763860a5381416371d38e2d602cfdaaf/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=3a265431763860a5381416371d38e2d602cfdaaf", "patch": "@@ -2361,6 +2361,7 @@ process_command (argc, argv)\n   int last_language_n_infiles;\n   int have_c = 0;\n   int have_o = 0;\n+  int lang_n_infiles = 0;\n \n   gcc_exec_prefix = getenv (\"GCC_EXEC_PREFIX\");\n \n@@ -2615,6 +2616,11 @@ process_command (argc, argv)\n \t}\n       else if (strncmp (argv[i], \"-l\", 2) == 0)\n \tn_infiles++;\n+      else if (strcmp (argv[i], \"-save-temps\") == 0)\n+\t{\n+\t  save_temps_flag = 1;\n+\t  n_switches++;\n+\t}\n       else if (argv[i][0] == '-' && argv[i][1] != 0)\n \t{\n \t  register char *p = &argv[i][1];\n@@ -2697,20 +2703,15 @@ process_command (argc, argv)\n \t      warn_std_ptr = &warn_std;\n \t      break;\n \n-\t    case 's':\n-\t      if (!strcmp (p, \"save-temps\"))\n+\t    case 'c':\n+\t      if (p[1] == 0)\n \t\t{\n-\t\t  save_temps_flag = 1;\n+\t\t  have_c = 1;\n \t\t  n_switches++;\n \t\t  break;\n \t\t}\n \t      goto normal_switch;\n \n-\t    case 'c':\n-\t      have_c = 1;\n-\t      n_switches++;\n-\t      break;\n-\n \t    case 'o':\n \t      have_o = 1;\n \t      goto normal_switch;\n@@ -2726,10 +2727,13 @@ process_command (argc, argv)\n \t    }\n \t}\n       else\n-\tn_infiles++;\n+\t{\n+\t  n_infiles++;\n+\t  lang_n_infiles++;\n+\t}\n     }\n \n-  if (have_c && have_o && n_infiles != 1)\n+  if (have_c && have_o && lang_n_infiles > 1)\n     fatal (\"cannot specify -o with -c and multiple compilations\");\n \n   /* Set up the search paths before we go looking for config files.  */"}]}