{"sha": "f13c4673a54c76a1c92018d630f48126349732b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEzYzQ2NzNhNTRjNzZhMWM5MjAxOGQ2MzBmNDgxMjYzNDk3MzJiMA==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2015-06-11T12:37:37Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2015-06-11T12:37:37Z"}, "message": "match.pd ((x & y) ^ (x | y) -> x ^ y): New pattern.\n\n\t* match.pd ((x & y) ^ (x | y) -> x ^ y): New pattern.\n\n\t* gcc.dg/fold-xor-3.c: New test.\n\nFrom-SVN: r224370", "tree": {"sha": "e15f3019d96fd6027462f91b4cf4b7d6283cd925", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e15f3019d96fd6027462f91b4cf4b7d6283cd925"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f13c4673a54c76a1c92018d630f48126349732b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f13c4673a54c76a1c92018d630f48126349732b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f13c4673a54c76a1c92018d630f48126349732b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f13c4673a54c76a1c92018d630f48126349732b0/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6e28e5162a44473169a5a55ce24b9eebdfcdd3e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e28e5162a44473169a5a55ce24b9eebdfcdd3e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e28e5162a44473169a5a55ce24b9eebdfcdd3e0"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "6327ef5aeff14af821ecaa6ec8d4cc24e1206c29", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f13c4673a54c76a1c92018d630f48126349732b0", "patch": "@@ -1,3 +1,7 @@\n+2015-06-11  Marek Polacek  <polacek@redhat.com>\n+\n+\t* match.pd ((x & y) ^ (x | y) -> x ^ y): New pattern.\n+\n 2015-06-11  Marek Polacek  <polacek@redhat.com>\n \n \t* match.pd: Use single_use throughout."}, {"sha": "9a1317e1f230eb78b000fa11af0c4a5f257707a6", "filename": "gcc/match.pd", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2Fmatch.pd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2Fmatch.pd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatch.pd?ref=f13c4673a54c76a1c92018d630f48126349732b0", "patch": "@@ -320,6 +320,12 @@ along with GCC; see the file COPYING3.  If not see\n   (bitop:c (rbitop:c @0 @1) (bit_not@2 @0))\n   (bitop @1 @2)))\n \n+/* (x & y) ^ (x | y) -> x ^ y */\n+(simplify\n+ (bit_xor:c (bit_and@2 @0 @1) (bit_ior@3 @0 @1))\n+  (if (single_use (@2) && single_use (@3))\n+   (bit_xor @0 @1)))\n+\n (simplify\n  (abs (negate @0))\n  (abs @0))"}, {"sha": "f5abd3d4de752fb6f9f8ff06a3ee4365d7e2ffab", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f13c4673a54c76a1c92018d630f48126349732b0", "patch": "@@ -1,3 +1,7 @@\n+2015-06-11  Marek Polacek  <polacek@redhat.com>\n+\n+\t* gcc.dg/fold-xor-3.c: New test.\n+\n 2015-06-11  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* gcc.target/arm/short-it-ifcvt-1.c: New test."}, {"sha": "c2c0af66ad3fee7c31057ab8f892fbfb310e648f", "filename": "gcc/testsuite/gcc.dg/fold-xor-3.c", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-xor-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f13c4673a54c76a1c92018d630f48126349732b0/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-xor-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-xor-3.c?ref=f13c4673a54c76a1c92018d630f48126349732b0", "patch": "@@ -0,0 +1,37 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -fdump-tree-cddce1\" } */\n+\n+int\n+fn1 (signed int x, signed int y)\n+{\n+  signed int tem1 = x & y;\n+  signed int tem2 = x | y;\n+  return tem1 ^ tem2;\n+}\n+\n+unsigned int\n+fn2 (unsigned int x, unsigned int y)\n+{\n+  unsigned int tem1 = x & y;\n+  unsigned int tem2 = x | y;\n+  return tem1 ^ tem2;\n+}\n+\n+int\n+fn3 (signed int x, signed int y)\n+{\n+  signed int tem1 = x & y;\n+  signed int tem2 = x | y;\n+  return tem2 ^ tem1;\n+}\n+\n+unsigned int\n+fn4 (unsigned int x, unsigned int y)\n+{\n+  unsigned int tem1 = x & y;\n+  unsigned int tem2 = x | y;\n+  return tem2 ^ tem1;\n+}\n+\n+/* { dg-final { scan-tree-dump-not \" & \" \"cddce1\" } } */\n+/* { dg-final { scan-tree-dump-not \" \\\\| \" \"cddce1\" } } */"}]}