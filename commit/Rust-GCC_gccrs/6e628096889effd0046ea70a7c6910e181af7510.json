{"sha": "6e628096889effd0046ea70a7c6910e181af7510", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU2MjgwOTY4ODllZmZkMDA0NmVhNzBhN2M2OTEwZTE4MWFmNzUxMA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-04-14T17:38:35Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-04-14T17:38:35Z"}, "message": "flow.c (find_auto_inc): Don't autoinc eliminable registers.\n\n\t* flow.c (find_auto_inc): Don't autoinc eliminable registers.\n\tIf the original source is dead in the incr insn, it's dead now.\n\nFrom-SVN: r33150", "tree": {"sha": "d5b8eaff0f37ffecf4917d6f49e8cdcd9e492811", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d5b8eaff0f37ffecf4917d6f49e8cdcd9e492811"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e628096889effd0046ea70a7c6910e181af7510", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e628096889effd0046ea70a7c6910e181af7510", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e628096889effd0046ea70a7c6910e181af7510", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e628096889effd0046ea70a7c6910e181af7510/comments", "author": null, "committer": null, "parents": [{"sha": "b1ba4cc3a816154b5290595bd1ac73280e75116e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1ba4cc3a816154b5290595bd1ac73280e75116e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1ba4cc3a816154b5290595bd1ac73280e75116e"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "4465c292dfcd3ec5a388e1ca9879f5d9ae671d3e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e628096889effd0046ea70a7c6910e181af7510/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e628096889effd0046ea70a7c6910e181af7510/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6e628096889effd0046ea70a7c6910e181af7510", "patch": "@@ -1,3 +1,8 @@\n+2000-04-14  Richard Henderson  <rth@cygnus.com>\n+\n+\t* flow.c (find_auto_inc): Don't autoinc eliminable registers.\n+\tIf the original source is dead in the incr insn, it's dead now.\n+\n Fri Apr 14 07:40:32 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* stor-layout.c (layout_decl): Properly compare KNOWN_ALIGN to"}, {"sha": "33a54ae1883916a447914b3354a244f14d7ba4f1", "filename": "gcc/flow.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e628096889effd0046ea70a7c6910e181af7510/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e628096889effd0046ea70a7c6910e181af7510/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=6e628096889effd0046ea70a7c6910e181af7510", "patch": "@@ -4309,7 +4309,10 @@ find_auto_inc (pbi, x, insn)\n \t\t\t\t    ? (offset ? PRE_INC : POST_INC)\n \t\t\t\t    : (offset ? PRE_DEC : POST_DEC));\n \n-\t  if (dead_or_set_p (incr, addr))\n+\t  if (dead_or_set_p (incr, addr)\n+\t      /* Mustn't autoinc an eliminable register.  */\n+\t      && (regno >= FIRST_PSEUDO_REGISTER\n+\t          || ! TEST_HARD_REG_BIT (elim_reg_set, regno)))\n \t    {\n \t      /* This is the simple case.  Try to make the auto-inc.  If\n \t\t we can't, we are done.  Otherwise, we will do any\n@@ -4410,6 +4413,11 @@ find_auto_inc (pbi, x, insn)\n \t     register.  */\n \t  if (SET_DEST (set) == addr)\n \t    {\n+\t      /* If the original source was dead, it's dead now.  */\n+\t      rtx note = find_reg_note (incr, REG_DEAD, NULL_RTX);\n+\t      if (note && XEXP (note, 0) != addr)\n+\t\tSET_REGNO_REG_SET (pbi->new_dead, REGNO (XEXP (note, 0)));\n+\t      \n \t      PUT_CODE (incr, NOTE);\n \t      NOTE_LINE_NUMBER (incr) = NOTE_INSN_DELETED;\n \t      NOTE_SOURCE_FILE (incr) = 0;"}]}