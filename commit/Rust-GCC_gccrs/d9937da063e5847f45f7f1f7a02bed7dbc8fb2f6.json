{"sha": "d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk5MzdkYTA2M2U1ODQ3ZjQ1ZjdmMWY3YTAyYmVkN2RiYzhmYjJmNg==", "commit": {"author": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2021-05-05T15:41:45Z"}, "committer": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2021-05-05T15:41:45Z"}, "message": "arm/97903: Missed optimization in lowering test operation.\n\ngcc/ChangeLog:\n\n2021-05-05  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n\n\t* config/arm/neon.md (neon_vtst_combine<mode>): New pattern.\n\t* config/arm/predicates.md (minus_one_operand): New predicate.", "tree": {"sha": "27259dd57f59c93b7749256685a05277759ed6d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27259dd57f59c93b7749256685a05277759ed6d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6/comments", "author": null, "committer": null, "parents": [{"sha": "b927ffdd6cecd0eeda6ef77df2623519870b1e75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b927ffdd6cecd0eeda6ef77df2623519870b1e75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b927ffdd6cecd0eeda6ef77df2623519870b1e75"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "2a1e304f2baa0bf9f45b73fb645097b76bee3fda", "filename": "gcc/config/arm/neon.md", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6/gcc%2Fconfig%2Farm%2Fneon.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6/gcc%2Fconfig%2Farm%2Fneon.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fneon.md?ref=d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6", "patch": "@@ -2588,6 +2588,19 @@\n   [(set_attr \"type\" \"neon_tst<q>\")]\n )\n \n+(define_insn \"neon_vtst_combine<mode>\"\n+  [(set (match_operand:VDQIW 0 \"s_register_operand\" \"=w\")\n+        (plus:VDQIW\n+\t  (eq:VDQIW\n+\t    (and:VDQIW (match_operand:VDQIW 1 \"s_register_operand\" \"w\")\n+\t\t       (match_operand:VDQIW 2 \"s_register_operand\" \"w\"))\n+\t    (match_operand:VDQIW 3 \"zero_operand\" \"i\"))\n+\t  (match_operand:VDQIW 4 \"minus_one_operand\" \"i\")))]\n+  \"TARGET_NEON\"\n+  \"vtst.<V_sz_elem>\\t%<V_reg>0, %<V_reg>1, %<V_reg>2\"\n+  [(set_attr \"type\" \"neon_tst<q>\")]\n+)\n+\n (define_insn \"neon_vabd<sup><mode>\"\n   [(set (match_operand:VDQIW 0 \"s_register_operand\" \"=w\")\n         (unspec:VDQIW [(match_operand:VDQIW 1 \"s_register_operand\" \"w\")"}, {"sha": "9db061dc88c1d54a99efce4438acaf228cfacecb", "filename": "gcc/config/arm/predicates.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6/gcc%2Fconfig%2Farm%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6/gcc%2Fconfig%2Farm%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fpredicates.md?ref=d9937da063e5847f45f7f1f7a02bed7dbc8fb2f6", "patch": "@@ -200,6 +200,10 @@\n   (and (match_code \"const_int,const_double,const_vector\")\n        (match_test \"op == CONST0_RTX (mode)\")))\n \n+(define_predicate \"minus_one_operand\"\n+  (and (match_code \"const_int,const_double,const_vector\")\n+       (match_test \"op == CONSTM1_RTX (mode)\")))\n+\n ;; Match a register, or zero in the appropriate mode.\n (define_predicate \"reg_or_zero_operand\"\n   (ior (match_operand 0 \"s_register_operand\")"}]}