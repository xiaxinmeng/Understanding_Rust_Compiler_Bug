{"sha": "3126957087d5ce8dc7e7c5f38118769732c335bc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzEyNjk1NzA4N2Q1Y2U4ZGM3ZTdjNWYzODExODc2OTczMmMzMzViYw==", "commit": {"author": {"name": "James Norris", "email": "jnorris@codesourcery.com", "date": "2016-05-10T18:05:02Z"}, "committer": {"name": "James Norris", "email": "jnorris@gcc.gnu.org", "date": "2016-05-10T18:05:02Z"}, "message": "sysv4.h (CRTOFFLOADBEGIN): Define.\n\n\t* config/rs6000/sysv4.h (CRTOFFLOADBEGIN): Define. Add crtoffloadbegin.o\n\tif offloading is enabled and -fopenacc or -fopenmp is specified.\n\t(CRTOFFLOADEND): Likewise.\n\t(STARTFILE_LINUX_SPEC): Add CRTOFFLOADBEGIN.\n\t(ENDFILE_LINUX_SPEC): Add CRTOFFLOADEND.\n\nFrom-SVN: r236098", "tree": {"sha": "a3e8b12020ac56f9dce1f0a67ff71c395a41b3c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3e8b12020ac56f9dce1f0a67ff71c395a41b3c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3126957087d5ce8dc7e7c5f38118769732c335bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3126957087d5ce8dc7e7c5f38118769732c335bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3126957087d5ce8dc7e7c5f38118769732c335bc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3126957087d5ce8dc7e7c5f38118769732c335bc/comments", "author": null, "committer": null, "parents": [{"sha": "6ca7558bfe5d864ad317613d1793931ec8e82cb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ca7558bfe5d864ad317613d1793931ec8e82cb2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ca7558bfe5d864ad317613d1793931ec8e82cb2"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "1fa7f5e0ada26ec896869dd9228702cd573b5b0a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3126957087d5ce8dc7e7c5f38118769732c335bc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3126957087d5ce8dc7e7c5f38118769732c335bc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3126957087d5ce8dc7e7c5f38118769732c335bc", "patch": "@@ -1,3 +1,11 @@\n+2016-05-10  James Norris  <jnorris@codesourcery.com>\n+\n+\t* config/rs6000/sysv4.h (CRTOFFLOADBEGIN): Define. Add crtoffloadbegin.o\n+\tif offloading is enabled and -fopenacc or -fopenmp is specified.\n+\t(CRTOFFLOADEND): Likewise.\n+\t(STARTFILE_LINUX_SPEC): Add CRTOFFLOADBEGIN.\n+\t(ENDFILE_LINUX_SPEC): Add CRTOFFLOADEND.\n+\n 2016-05-10  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.c (legitimize_pic_address): Merge 64-bit and 32-bit"}, {"sha": "dbef3780a9d685bb9837e83f2301083894354522", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3126957087d5ce8dc7e7c5f38118769732c335bc/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3126957087d5ce8dc7e7c5f38118769732c335bc/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=3126957087d5ce8dc7e7c5f38118769732c335bc", "patch": "@@ -749,21 +749,32 @@ ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n %{!mnewlib: %{pthread:-lpthread} %{shared:-lc} \\\n %{!shared: %{profile:-lc_p} %{!profile:-lc}}}\"\n \n+#if ENABLE_OFFLOADING == 1\n+#define CRTOFFLOADBEGIN \"%{fopenacc|fopenmp:crtoffloadbegin%O%s}\"\n+#define CRTOFFLOADEND \"%{fopenacc|fopenmp:crtoffloadend%O%s}\"\n+#else\n+#define CRTOFFLOADBEGIN \"\"\n+#define CRTOFFLOADEND \"\"\n+#endif\n+\n #ifdef HAVE_LD_PIE\n #define\tSTARTFILE_LINUX_SPEC \"\\\n %{!shared: %{pg|p|profile:gcrt1.o%s;pie:Scrt1.o%s;:crt1.o%s}} \\\n %{mnewlib:ecrti.o%s;:crti.o%s} \\\n-%{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s}\"\n+%{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s} \\\n+\" CRTOFFLOADBEGIN\n #else\n #define\tSTARTFILE_LINUX_SPEC \"\\\n %{!shared: %{pg|p|profile:gcrt1.o%s;:crt1.o%s}} \\\n %{mnewlib:ecrti.o%s;:crti.o%s} \\\n-%{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s}\"\n+%{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s} \\\n+\" CRTOFFLOADBEGIN\n #endif\n \n #define\tENDFILE_LINUX_SPEC \"\\\n %{shared|pie:crtendS.o%s;:crtend.o%s} \\\n-%{mnewlib:ecrtn.o%s;:crtn.o%s}\"\n+%{mnewlib:ecrtn.o%s;:crtn.o%s} \\\n+\" CRTOFFLOADEND\n \n #define LINK_START_LINUX_SPEC \"\"\n "}]}