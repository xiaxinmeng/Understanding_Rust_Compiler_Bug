{"sha": "3665f77c7f63737252fea0e153a6426aa1241a7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzY2NWY3N2M3ZjYzNzM3MjUyZmVhMGUxNTNhNjQyNmFhMTI0MWE3YQ==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-10-05T07:01:57Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2018-10-05T07:01:57Z"}, "message": "re PR testsuite/87487 (New test case gfortran.dg/deferred_character_24.f90 in r264721 fails on big endian)\n\n2018-10-05  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/87487\n\t* trans-decl.c (gfc_get_symbol_decl): Make sure that deferred\n\tcharacter length pointer initializer has the right type to fix\n\tproblem with deferred_character_24.f90 on big endian.\n\nFrom-SVN: r264862", "tree": {"sha": "d961d5ff3ae1cf63c8a0d6aa6e0551c7eb592cc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d961d5ff3ae1cf63c8a0d6aa6e0551c7eb592cc4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3665f77c7f63737252fea0e153a6426aa1241a7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3665f77c7f63737252fea0e153a6426aa1241a7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3665f77c7f63737252fea0e153a6426aa1241a7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3665f77c7f63737252fea0e153a6426aa1241a7a/comments", "author": null, "committer": null, "parents": [{"sha": "1afa270f17b04c6eca9deb44d374c28164e34ba1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1afa270f17b04c6eca9deb44d374c28164e34ba1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1afa270f17b04c6eca9deb44d374c28164e34ba1"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "7eece23364044a3ac5e7351168f3030887f0e564", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3665f77c7f63737252fea0e153a6426aa1241a7a/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3665f77c7f63737252fea0e153a6426aa1241a7a/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=3665f77c7f63737252fea0e153a6426aa1241a7a", "patch": "@@ -1,6 +1,13 @@\n+2018-10-05  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/87487\n+\t* trans-decl.c (gfc_get_symbol_decl): Make sure that deferred\n+\tcharacter length pointer initializer has the right type to fix\n+\tproblem with deferred_character_24.f90 on big endian.\n+\n 2018-10-03  Jeff Law  <law@redhat.comg>\n \n-        * trans-types.c (get_typenode_from_name): Moved into gcc/tree.c.\n+\t* trans-types.c (get_typenode_from_name): Moved into gcc/tree.c.\n \n 2018-10-01  Paul Thomas  <pault@gcc.gnu.org>\n "}, {"sha": "b0c12e5fc38107559a734d1dc87fd675a2466630", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3665f77c7f63737252fea0e153a6426aa1241a7a/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3665f77c7f63737252fea0e153a6426aa1241a7a/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=3665f77c7f63737252fea0e153a6426aa1241a7a", "patch": "@@ -1758,6 +1758,7 @@ gfc_get_symbol_decl (gfc_symbol * sym)\n       && TREE_CODE (length) != INTEGER_CST\n       && TREE_CODE (sym->ts.u.cl->backend_decl) != INDIRECT_REF)\n     {\n+      length = fold_convert (gfc_charlen_type_node, length);\n       gfc_finish_var_decl (length, sym);\n       if (!sym->attr.associate_var\n \t  && TREE_CODE (length) == VAR_DECL\n@@ -1767,6 +1768,8 @@ gfc_get_symbol_decl (gfc_symbol * sym)\n \t  DECL_INITIAL (length) = gfc_conv_initializer (len, &len->ts,\n \t\t\t\t\t\t\tTREE_TYPE (length),\n \t\t\t\t\t\t\tfalse, false, false);\n+\t  DECL_INITIAL (length) = fold_convert (gfc_charlen_type_node,\n+\t\t\t\t\t\tDECL_INITIAL (length));\n \t}\n       else\n \tgcc_assert (!sym->value);"}]}