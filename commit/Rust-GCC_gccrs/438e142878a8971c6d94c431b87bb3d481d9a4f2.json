{"sha": "438e142878a8971c6d94c431b87bb3d481d9a4f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDM4ZTE0Mjg3OGE4OTcxYzZkOTRjNDMxYjg3YmIzZDQ4MWQ5YTRmMg==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-04-29T00:13:08Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-04-29T00:13:08Z"}, "message": "gfortran.h (gfc_namespace): Add seen_implicit_none field.\n\nfortran/\n\t* gfortran.h (gfc_namespace): Add seen_implicit_none field.\n\t* symbol.c (gfc_set_implicit_none): Give error if there's a previous\n\tIMPLICIT NONE, set seen_implicit_none.\n\t(gfc_merge_new_implicit): Error if there's an IMPLICIT NONE statement.\ntestsuite/\n\t* gfortran.dg/implicit_4.f90: New test.\n\nFrom-SVN: r98952", "tree": {"sha": "2051a24ebabc1b52ffc476e56425d722d44bad2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2051a24ebabc1b52ffc476e56425d722d44bad2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/438e142878a8971c6d94c431b87bb3d481d9a4f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/438e142878a8971c6d94c431b87bb3d481d9a4f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/438e142878a8971c6d94c431b87bb3d481d9a4f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/438e142878a8971c6d94c431b87bb3d481d9a4f2/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd2778f346eeff349f8e5d86932e9f90e5ffa8a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd2778f346eeff349f8e5d86932e9f90e5ffa8a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd2778f346eeff349f8e5d86932e9f90e5ffa8a0"}], "stats": {"total": 50, "additions": 48, "deletions": 2}, "files": [{"sha": "7ef40e0cdaef1aba5e856ce4aeafaa95a7f08013", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=438e142878a8971c6d94c431b87bb3d481d9a4f2", "patch": "@@ -1,3 +1,10 @@\n+2005-04-29  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* gfortran.h (gfc_namespace): Add seen_implicit_none field.\n+\t* symbol.c (gfc_set_implicit_none): Give error if there's a previous\n+\tIMPLICIT NONE, set seen_implicit_none.\n+\t(gfc_merge_new_implicit): Error if there's an IMPLICIT NONE statement.\n+\n 2005-04-28  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \t* gfortran.h (gfc_gsymbol): Make name a const char *."}, {"sha": "5fb9f53db8781d1d6948ecdd1f6d2a8b9206b052", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=438e142878a8971c6d94c431b87bb3d481d9a4f2", "patch": "@@ -106,6 +106,14 @@ gfc_set_implicit_none (void)\n {\n   int i;\n \n+  if (gfc_current_ns->seen_implicit_none)\n+    {\n+      gfc_error (\"Duplicate IMPLICIT NONE statement at %C\");\n+      return;\n+    }\n+\n+  gfc_current_ns->seen_implicit_none = 1;\n+\n   for (i = 0; i < GFC_LETTERS; i++)\n     {\n       gfc_clear_ts (&gfc_current_ns->default_type[i]);\n@@ -160,6 +168,12 @@ gfc_merge_new_implicit (gfc_typespec * ts)\n {\n   int i;\n \n+  if (gfc_current_ns->seen_implicit_none)\n+    {\n+      gfc_error (\"Cannot specify IMPLICIT at %C after IMPLICIT NONE\");\n+      return FAILURE;\n+    }\n+\n   for (i = 0; i < GFC_LETTERS; i++)\n     {\n       if (new_flag[i])"}, {"sha": "0ab6998a33a03a4541e73432a84b5cff7ef924fe", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=438e142878a8971c6d94c431b87bb3d481d9a4f2", "patch": "@@ -1,9 +1,13 @@\n-2004-04-28  Bob Wilson  <bob.wilson@acm.org>\n+2005-04-29  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* gfortran.dg/implicit_4.f90: New test.\n+\n+2005-04-28  Bob Wilson  <bob.wilson@acm.org>\n \n \t* lib/target-supports.exp (check_profiling_available): Return\n \tfalse for xtensa-*-elf.\n \n-2004-04-29  David Billinghurst (David.Billinghurst@riotinto.com)\n+2005-04-29  David Billinghurst (David.Billinghurst@riotinto.com)\n \n \t* lib/fortran-torture.exp (fortran-torture.exp): Catch\n \terror if file cannot be deleted."}, {"sha": "2e871b09d89aa555302f193199bb1d2adee18c04", "filename": "gcc/testsuite/gfortran.dg/implicit_4.f90", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/438e142878a8971c6d94c431b87bb3d481d9a4f2/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplicit_4.f90?ref=438e142878a8971c6d94c431b87bb3d481d9a4f2", "patch": "@@ -0,0 +1,21 @@\n+! { dg-do compile }\n+! Verify error diagnosis for invalid combinations of IMPLICIT statements\n+IMPLICIT NONE\n+IMPLICIT NONE ! { dg-error \"Duplicate\" }\n+END\n+\n+SUBROUTINE a\n+IMPLICIT REAL(b-j) ! { dg-error \"cannot follow\" }\n+implicit none      ! { dg-error \"cannot follow\" }\n+END SUBROUTINE a\n+\n+subroutine b\n+implicit none\n+implicit real(g-k) ! { dg-error \"Cannot specify\" }\n+end subroutine b\n+\n+subroutine c\n+implicit real(a-b)\n+implicit integer (b-c) ! { dg-error \"already\" }\n+implicit real(d-f), complex(f-g) ! { dg-error \"already\" }\n+end subroutine c"}]}