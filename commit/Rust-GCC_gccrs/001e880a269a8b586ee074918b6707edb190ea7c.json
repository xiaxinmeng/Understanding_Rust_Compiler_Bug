{"sha": "001e880a269a8b586ee074918b6707edb190ea7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDAxZTg4MGEyNjlhOGI1ODZlZTA3NDkxOGI2NzA3ZWRiMTkwZWE3Yw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1999-02-25T21:35:57Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-02-25T21:35:57Z"}, "message": "fixinc.wrap: Also handle struct queue in sys/stream.h.\n\n\t* fixinc.wrap: Also handle struct queue in sys/stream.h.\n\t* fixinc.svr4: Likewise.\n\nFrom-SVN: r25449", "tree": {"sha": "58be9a3cd9cef0f5c823ad1215f0017ac36649c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58be9a3cd9cef0f5c823ad1215f0017ac36649c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/001e880a269a8b586ee074918b6707edb190ea7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/001e880a269a8b586ee074918b6707edb190ea7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/001e880a269a8b586ee074918b6707edb190ea7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/001e880a269a8b586ee074918b6707edb190ea7c/comments", "author": null, "committer": null, "parents": [{"sha": "6646d96c23467215ae2284060dbf4719c7adac08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6646d96c23467215ae2284060dbf4719c7adac08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6646d96c23467215ae2284060dbf4719c7adac08"}], "stats": {"total": 70, "additions": 69, "deletions": 1}, "files": [{"sha": "aaedc35ff7e4c9071af02ba2b4cd4b11a51625f4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/001e880a269a8b586ee074918b6707edb190ea7c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/001e880a269a8b586ee074918b6707edb190ea7c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=001e880a269a8b586ee074918b6707edb190ea7c", "patch": "@@ -1,3 +1,8 @@\n+Thu Feb 25 21:32:34 1999  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* fixinc.wrap: Also handle struct queue in sys/stream.h.\n+\t* fixinc.svr4: Likewise.\n+\n Thu Feb 25 21:23:06 1999  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* dwarf2out.c (scope_die_for): Set scope_die to comp_unit_die"}, {"sha": "e633ed5bb15f3b929cf840a6c811ffa5552fce07", "filename": "gcc/fixinc.svr4", "status": "modified", "additions": 35, "deletions": 1, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/001e880a269a8b586ee074918b6707edb190ea7c/gcc%2Ffixinc.svr4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/001e880a269a8b586ee074918b6707edb190ea7c/gcc%2Ffixinc.svr4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc.svr4?ref=001e880a269a8b586ee074918b6707edb190ea7c", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n # Install modified versions of certain ANSI-incompatible\n # native System V Release 4 system include files.\n-# Copyright (C) 1994, 1996, 1997, 1998 Free Software Foundation, Inc.\n+# Copyright (C) 1994, 1996, 1997, 1998, 1999 Free Software Foundation, Inc.\n # Contributed by Ron Guilmette (rfg@monkeys.com).\n #\n # This file is part of GNU CC.\n@@ -1527,6 +1527,40 @@ if [ \\! -z \"$file_to_fix\" ]; then\n   rm -f /tmp/$base\n fi\n \n+# Similarly for struct queue in sys/stream.h.\n+file=sys/stream.h\n+base=`basename $file`\n+if [ -r ${LIB}/$file ]; then\n+  file_to_fix=${LIB}/$file\n+else\n+  if [ -r ${INPUT}/$file ]; then\n+    file_to_fix=${INPUT}/$file\n+  else\n+    file_to_fix=\"\"\n+  fi\n+fi\n+if [ \\! -z \"$file_to_fix\" ]; then\n+  echo Checking $file_to_fix\n+  sed -e '/struct[ \t]*queue/i\\\n+#ifdef __cplusplus\\\n+#define queue __stream_queue\\\n+#endif'\\\n+      -e '/struct[ \t]*queue/a\\\n+#ifdef __cplusplus\\\n+#undef queue\\\n+#endif' $file_to_fix > /tmp/$base\n+  if cmp $file_to_fix /tmp/$base >/dev/null 2>&1; then \\\n+    true\n+  else\n+    echo Fixed $file_to_fix\n+    mkdir -p $LIB/`dirname $file`\n+    rm -f ${LIB}/$file\n+    cp /tmp/$base ${LIB}/$file\n+    chmod a+r ${LIB}/$file\n+  fi\n+  rm -f /tmp/$base\n+fi\n+\n echo 'Removing unneeded directories:'\n cd $LIB\n files=`find . -type d -print | sort -r`"}, {"sha": "bb783f95589d3e74f9af85071e0b8bf1d2cb9a12", "filename": "gcc/fixinc.wrap", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/001e880a269a8b586ee074918b6707edb190ea7c/gcc%2Ffixinc.wrap", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/001e880a269a8b586ee074918b6707edb190ea7c/gcc%2Ffixinc.wrap", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc.wrap?ref=001e880a269a8b586ee074918b6707edb190ea7c", "patch": "@@ -53,6 +53,35 @@ __EOF__\n   fi\n fi\n \n+# Similarly for struct queue in sys/stream.h.\n+file=sys/stream.h\n+if [ -r $INPUT/$file ]; then\n+  echo Checking $INPUT/$file\n+  if grep 'struct[ \t]*queue' $INPUT/$file >/dev/null\n+  then\n+    echo Fixed $file\n+    mkdir -p $LIB/`dirname $file`\n+    rm -f $LIB/$file\n+    cat <<'__EOF__' >$LIB/$file\n+#ifndef _SYS_STREAM_H_WRAPPER\n+#ifdef __cplusplus\n+# define queue __stream_queue\n+#endif\n+#include_next <sys/stream.h>\n+#ifdef __cplusplus\n+# undef queue\n+#endif\n+#define _SYS_STREAM_H_WRAPPER\n+#endif /* _SYS_STREAM_H_WRAPPER */\n+__EOF__\n+    # Define _SYS_STREAM_H_WRAPPER at the end of the wrapper, not the start,\n+    # so that if #include_next gets another instance of the wrapper,\n+    # this will follow the #include_next chain until we arrive at\n+    # the real <sys/stream.h>.\n+    chmod a+r $LIB/$file\n+  fi\n+fi\n+\n # Avoid the definition of the bool type in the Solaris 2.x curses.h when using\n # g++, since it's now an official type in the C++ language.\n file=curses.h"}]}