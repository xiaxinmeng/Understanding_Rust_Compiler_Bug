{"sha": "d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFmYzNiYmQ4MGE0ZDRkZmY5NTdiOWVlYjVhZTQ2M2YzZThmNTViMQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2005-02-14T12:01:15Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2005-02-14T12:01:15Z"}, "message": "re PR c++/17816 (duplicate definition of pure virtual function not diagnosed)\n\ngcc/cp/ChangeLog:\nPR c++/17816\n* decl.c (redeclaration_error_message): Report redefinition of\npure virtual function.\ngcc/testsuite/ChangeLog:\nPR c++/17816\n* g++.dg/other/redecl2.C: New.\n\nFrom-SVN: r95008", "tree": {"sha": "a349501139d54b3f88650641cacf655a514a2bd1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a349501139d54b3f88650641cacf655a514a2bd1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/comments", "author": null, "committer": null, "parents": [{"sha": "af9ecd0ca05832b2681965b96e0f169b19355f89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af9ecd0ca05832b2681965b96e0f169b19355f89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af9ecd0ca05832b2681965b96e0f169b19355f89"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "777f520179a2380042da55a8769e01e4e2b682bd", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "patch": "@@ -1,3 +1,9 @@\n+2005-02-14  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR c++/17816\n+\t* decl.c (redeclaration_error_message): Report redefinition of\n+\tpure virtual function.\n+\n 2005-02-11  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/19891"}, {"sha": "47732cb6bc8112625dc47632106686704faf7b6a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "patch": "@@ -1913,7 +1913,8 @@ redeclaration_error_message (tree newdecl, tree olddecl)\n       /* If this is a pure function, its olddecl will actually be\n \t the original initialization to `0' (which we force to call\n \t abort()).  Don't complain about redefinition in this case.  */\n-      if (DECL_LANG_SPECIFIC (olddecl) && DECL_PURE_VIRTUAL_P (olddecl))\n+      if (DECL_LANG_SPECIFIC (olddecl) && DECL_PURE_VIRTUAL_P (olddecl)\n+\t  && DECL_INITIAL (olddecl) == NULL_TREE)\n \treturn 0;\n \n       /* If both functions come from different namespaces, this is not"}, {"sha": "e185aad254de43fcf7bdebfa53bf474f785d0d5a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "patch": "@@ -1,3 +1,8 @@\n+2005-02-14  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR c++/17816\n+\t* g++.dg/other/redecl2.C: New.\n+\n 2005-02-14  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/19891"}, {"sha": "591c258b8911ed1cb386e7f12461125bebde9166", "filename": "gcc/testsuite/g++.dg/other/redecl2.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fredecl2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fredecl2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fredecl2.C?ref=d1fc3bbd80a4d4dff957b9eeb5ae463f3e8f55b1", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/17816\n+// We failed to report duplicate definitions of pure virtual ns.\n+\n+// { dg-do compile }\n+\n+struct S {\n+  virtual int foo() = 0;\n+};\n+ \n+int S::foo() { return 0; } // { dg-error \"defined here\" }\n+int S::foo() { return 0; } // { dg-error \"redefinition\" }"}]}