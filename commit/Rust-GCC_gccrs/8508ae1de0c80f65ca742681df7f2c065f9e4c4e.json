{"sha": "8508ae1de0c80f65ca742681df7f2c065f9e4c4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODUwOGFlMWRlMGM4MGY2NWNhNzQyNjgxZGY3ZjJjMDY1ZjllNGM0ZQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2019-08-12T10:59:58Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2019-08-12T10:59:58Z"}, "message": "re PR driver/91130 (-MF clashes with -flto on aarch64)\n\n2019-08-12  Richard Biener  <rguenther@suse.de>\n\n\tPR driver/91130\n\t* lto-wrapper.c (get_options_from_collect_gcc_options): Remove\n\tlang_mask option, always use CL_DRIVER.\n\t(get_options_from_collect_gcc_options): Adjust.\n\t(find_and_merge_options): Likewise.\n\t(run_gcc): Likewise.\n\nFrom-SVN: r274309", "tree": {"sha": "4c93b4b59a49e360f61b3bbeadc594dc93a6cfed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4c93b4b59a49e360f61b3bbeadc594dc93a6cfed"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8508ae1de0c80f65ca742681df7f2c065f9e4c4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8508ae1de0c80f65ca742681df7f2c065f9e4c4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8508ae1de0c80f65ca742681df7f2c065f9e4c4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8508ae1de0c80f65ca742681df7f2c065f9e4c4e/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8467866f26927d46be47240308278a867e3fb2b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8467866f26927d46be47240308278a867e3fb2b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8467866f26927d46be47240308278a867e3fb2b0"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "c59df62ed0f83e7c3492302432b94d9bfdd536d1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8508ae1de0c80f65ca742681df7f2c065f9e4c4e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8508ae1de0c80f65ca742681df7f2c065f9e4c4e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8508ae1de0c80f65ca742681df7f2c065f9e4c4e", "patch": "@@ -1,3 +1,12 @@\n+2019-08-12  Richard Biener  <rguenther@suse.de>\n+\n+\tPR driver/91130\n+\t* lto-wrapper.c (get_options_from_collect_gcc_options): Remove\n+\tlang_mask option, always use CL_DRIVER.\n+\t(get_options_from_collect_gcc_options): Adjust.\n+\t(find_and_merge_options): Likewise.\n+\t(run_gcc): Likewise.\n+\n 2019-08-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* ipa-predicate.c (add_condition): Restore inverted test."}, {"sha": "c88b8ecf18ae343070625c8ad13a5879f856171f", "filename": "gcc/lto-wrapper.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8508ae1de0c80f65ca742681df7f2c065f9e4c4e/gcc%2Flto-wrapper.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8508ae1de0c80f65ca742681df7f2c065f9e4c4e/gcc%2Flto-wrapper.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-wrapper.c?ref=8508ae1de0c80f65ca742681df7f2c065f9e4c4e", "patch": "@@ -128,12 +128,11 @@ maybe_unlink (const char *file)\n #define DUMPBASE_SUFFIX \".ltrans18446744073709551615\"\n \n /* Create decoded options from the COLLECT_GCC and COLLECT_GCC_OPTIONS\n-   environment according to LANG_MASK.  */\n+   environment.  */\n \n static void\n get_options_from_collect_gcc_options (const char *collect_gcc,\n \t\t\t\t      const char *collect_gcc_options,\n-\t\t\t\t      unsigned int lang_mask,\n \t\t\t\t      struct cl_decoded_option **decoded_options,\n \t\t\t\t      unsigned int *decoded_options_count)\n {\n@@ -176,8 +175,7 @@ get_options_from_collect_gcc_options (const char *collect_gcc,\n   argc = obstack_object_size (&argv_obstack) / sizeof (void *) - 1;\n   argv = XOBFINISH (&argv_obstack, const char **);\n \n-  decode_cmdline_options_to_array (argc, (const char **)argv,\n-\t\t\t\t   lang_mask,\n+  decode_cmdline_options_to_array (argc, (const char **)argv, CL_DRIVER,\n \t\t\t\t   decoded_options, decoded_options_count);\n   obstack_free (&argv_obstack, NULL);\n }\n@@ -1009,8 +1007,7 @@ find_and_merge_options (int fd, off_t file_offset, const char *prefix,\n     {\n       struct cl_decoded_option *f2decoded_options;\n       unsigned int f2decoded_options_count;\n-      get_options_from_collect_gcc_options (collect_gcc,\n-\t\t\t\t\t    fopts, CL_DRIVER,\n+      get_options_from_collect_gcc_options (collect_gcc, fopts,\n \t\t\t\t\t    &f2decoded_options,\n \t\t\t\t\t    &f2decoded_options_count);\n       if (!fdecoded_options)\n@@ -1282,7 +1279,6 @@ run_gcc (unsigned argc, char *argv[])\n     fatal_error (input_location,\n \t\t \"environment variable %<COLLECT_GCC_OPTIONS%> must be set\");\n   get_options_from_collect_gcc_options (collect_gcc, collect_gcc_options,\n-\t\t\t\t\tCL_DRIVER,\n \t\t\t\t\t&decoded_options,\n \t\t\t\t\t&decoded_options_count);\n "}]}