{"sha": "4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGU3MmUxYzVhMmNkZWY0ZTliMTIzY2ZhNTQ0ZTdmZTc4YzkyZWRhMg==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-04-30T03:19:37Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2006-04-30T03:19:37Z"}, "message": "re PR libfortran/27360 (Memory leaks when reading logicals)\n\n2006-04-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR libgfortran/27360\n\t\n\t* io/list_read.c (read_logical):  Free line_buffer and free saved.\n\nFrom-SVN: r113388", "tree": {"sha": "e68b4424e5f3dc50a2b26fc763cbeef380fb27c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e68b4424e5f3dc50a2b26fc763cbeef380fb27c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2/comments", "author": null, "committer": null, "parents": [{"sha": "aedb974e2c35a0ab679ce7d84286dd34c490f324", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aedb974e2c35a0ab679ce7d84286dd34c490f324", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aedb974e2c35a0ab679ce7d84286dd34c490f324"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "90537156703670bdc29af997ad79934113c3b733", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2", "patch": "@@ -1,3 +1,9 @@\n+2006-04-29  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR libgfortran/27360\n+\t\n+\t* io/list_read.c (read_logical):  Free line_buffer and free saved.\n+\n 2006-04-28  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/27304"}, {"sha": "ab3965d5f5800c62842f9f8ebc0eb520901e55f5", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=4e72e1c5a2cdef4e9b123cfa544e7fe78c92eda2", "patch": "@@ -652,6 +652,7 @@ read_logical (st_parameter_dt *dtp, int length)\n   dtp->u.p.item_count = 0;\n   dtp->u.p.line_buffer_enabled = 0;\n   set_integer ((int *) dtp->u.p.value, v, length);\n+  free_line (dtp);\n \n   return;\n \n@@ -689,25 +690,27 @@ read_logical (st_parameter_dt *dtp, int length)\n \n  bad_logical:\n \n+  free_line (dtp);\n+\n   if (nml_bad_return (dtp, c))\n     return;\n \n   eat_line (dtp);\n   free_saved (dtp);\n-  if (dtp->u.p.line_buffer != NULL)\n-    free_mem (dtp->u.p.line_buffer);\n   st_sprintf (message, \"Bad logical value while reading item %d\",\n \t      dtp->u.p.item_count);\n   generate_error (&dtp->common, ERROR_READ_VALUE, message);\n   return;\n \n  logical_done:\n-  \n+\n   dtp->u.p.item_count = 0;\n   dtp->u.p.line_buffer_enabled = 0;\n   dtp->u.p.saved_type = BT_LOGICAL;\n   dtp->u.p.saved_length = length;\n   set_integer ((int *) dtp->u.p.value, v, length);\n+  free_saved (dtp);\n+  free_line (dtp);\n }\n \n "}]}