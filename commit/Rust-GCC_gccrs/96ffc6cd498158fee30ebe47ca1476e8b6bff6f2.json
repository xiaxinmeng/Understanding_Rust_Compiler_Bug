{"sha": "96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZmZmM2Y2Q0OTgxNThmZWUzMGViZTQ3Y2ExNDc2ZThiNmJmZjZmMg==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2009-01-05T10:43:39Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2009-01-05T10:43:39Z"}, "message": "re PR fortran/38672 (ICE during build with versions 4.3.2 and 4.4-20081226)\n\n2009-01-05  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/38672\n\t* trans-types.c (gfc_get_derived_type):  Check for the\n\tpresence of derived->ns->proc_name before\n\taccessing derived->ns->proc_name->attr.flavor .\n\t* resolve.c (resolve_symbol):  Likewise.\n\n2009-01-05  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/38672\n\t* gfortran.dg/host_assoc_blockdata_1.f90:  New test.\n\t* gfortran.dg/host_assoc_blockdata_2.f90:  New test.\n\nFrom-SVN: r143074", "tree": {"sha": "5e4b4bfd64b4fbd290b6baf15824c81df0f4495a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e4b4bfd64b4fbd290b6baf15824c81df0f4495a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/comments", "author": null, "committer": null, "parents": [{"sha": "fc0cd1807271550633138c197d4428e5405dd79d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc0cd1807271550633138c197d4428e5405dd79d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc0cd1807271550633138c197d4428e5405dd79d"}], "stats": {"total": 46, "additions": 45, "deletions": 1}, "files": [{"sha": "a6622a05e6a3712745042f1dfb9fa9c0015d4cb2", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "patch": "@@ -1,3 +1,11 @@\n+2009-01-05  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/38672\n+\t* trans-types.c (gfc_get_derived_type):  Check for the\n+\tpresence of derived->ns->proc_name before\n+\taccessing derived->ns->proc_name->attr.flavor .\n+\t* resolve.c (resolve_symbol):  Likewise.\n+\n 2009-01-05  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/38665"}, {"sha": "0cdf40eda9f2e01b6ff1e2fbce12f9bdc1dfce44", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "patch": "@@ -9247,6 +9247,7 @@ resolve_symbol (gfc_symbol *sym)\n      module function and is not PRIVATE.  */\n   if (sym->ts.type == BT_DERIVED\n \t&& sym->ts.derived->attr.use_assoc\n+\t&& sym->ns->proc_name\n \t&& sym->ns->proc_name->attr.flavor == FL_MODULE)\n     {\n       gfc_symbol *ds;"}, {"sha": "da0c869ca93533048a425b5710644dd295340fb0", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "patch": "@@ -1930,7 +1930,8 @@ gfc_get_derived_type (gfc_symbol * derived)\n \n   gfc_finish_type (typenode);\n   gfc_set_decl_location (TYPE_STUB_DECL (typenode), &derived->declared_at);\n-  if (derived->module && derived->ns->proc_name->attr.flavor == FL_MODULE)\n+  if (derived->module && derived->ns->proc_name\n+      && derived->ns->proc_name->attr.flavor == FL_MODULE)\n     {\n       if (derived->ns->proc_name->backend_decl\n \t  && TREE_CODE (derived->ns->proc_name->backend_decl)"}, {"sha": "d70fac70a5517805d6b27514827197b8cf712ec5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "patch": "@@ -1,3 +1,9 @@\n+2009-01-05  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/38672\n+\t* gfortran.dg/host_assoc_blockdata_1.f90:  New test.\n+\t* gfortran.dg/host_assoc_blockdata_2.f90:  New test.\n+\n 2009-01-05  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gcc.dg/compat/struct-layout-1_generate.c (dg-options): Add -mieee"}, {"sha": "7f24fecb0e00a9a1dcddc48dfc03ab739dda17c4", "filename": "gcc/testsuite/gfortran.dg/host_assoc_blockdata_1.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ftestsuite%2Fgfortran.dg%2Fhost_assoc_blockdata_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ftestsuite%2Fgfortran.dg%2Fhost_assoc_blockdata_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fhost_assoc_blockdata_1.f90?ref=96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! PR 38672 - this used to ICE.\n+MODULE globals\n+  TYPE :: type1\n+     integer :: x\n+  END TYPE type1\n+  TYPE (type1) :: pdm_bps\n+END module globals\n+BLOCK DATA\n+   use globals\n+END BLOCK DATA"}, {"sha": "3cb4abaedd23b4eafb99cfc446db5be453c6ecf2", "filename": "gcc/testsuite/gfortran.dg/host_assoc_blockdata_2.f90", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ftestsuite%2Fgfortran.dg%2Fhost_assoc_blockdata_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96ffc6cd498158fee30ebe47ca1476e8b6bff6f2/gcc%2Ftestsuite%2Fgfortran.dg%2Fhost_assoc_blockdata_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fhost_assoc_blockdata_2.f90?ref=96ffc6cd498158fee30ebe47ca1476e8b6bff6f2", "patch": "@@ -0,0 +1,17 @@\n+! { dg-do compile }\n+MODULE globals\n+  TYPE :: type1\n+     sequence\n+     integer :: x\n+  END TYPE type1\n+  TYPE (type1) :: pdm_bps\n+  common /co/ pdm_bps\n+END module globals\n+BLOCK DATA\n+   use globals\n+END BLOCK DATA\n+\n+program main\n+  use globals\n+  common /co/ pdm_bps ! { dg-error \"already in a COMMON block\" }\n+end program main"}]}