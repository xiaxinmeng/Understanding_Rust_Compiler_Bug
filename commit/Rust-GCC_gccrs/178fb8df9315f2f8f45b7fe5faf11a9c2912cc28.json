{"sha": "178fb8df9315f2f8f45b7fe5faf11a9c2912cc28", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTc4ZmI4ZGY5MzE1ZjJmOGY0NWI3ZmU1ZmFmMTFhOWMyOTEyY2MyOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-06-24T13:58:02Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2021-06-24T13:58:02Z"}, "message": "c: Fix up c_parser_has_attribute_expression [PR101176]\n\nThis function keeps src_range member of the result uninitialized, which at\nleast under valgrind can show up later when those uninitialized location_t's\ncan make it into the IL or location_t hash tables.\n\n2021-06-24  Jakub Jelinek  <jakub@redhat.com>\n\n\tPR c/101176\n\t* c-parser.c (c_parser_has_attribute_expression): Set source range for\n\tthe result.", "tree": {"sha": "77b7f56ba08c34edeab910ebbaedfb6918da183c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77b7f56ba08c34edeab910ebbaedfb6918da183c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/178fb8df9315f2f8f45b7fe5faf11a9c2912cc28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/178fb8df9315f2f8f45b7fe5faf11a9c2912cc28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/178fb8df9315f2f8f45b7fe5faf11a9c2912cc28", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/178fb8df9315f2f8f45b7fe5faf11a9c2912cc28/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fdc5522fb04b4a820b28c4d1f16f54897f5978de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fdc5522fb04b4a820b28c4d1f16f54897f5978de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fdc5522fb04b4a820b28c4d1f16f54897f5978de"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "27034f88f4924b04b5ce09b01e52e839d5e1e11b", "filename": "gcc/c/c-parser.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/178fb8df9315f2f8f45b7fe5faf11a9c2912cc28/gcc%2Fc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/178fb8df9315f2f8f45b7fe5faf11a9c2912cc28/gcc%2Fc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-parser.c?ref=178fb8df9315f2f8f45b7fe5faf11a9c2912cc28", "patch": "@@ -8406,6 +8406,7 @@ c_parser_has_attribute_expression (c_parser *parser)\n {\n   gcc_assert (c_parser_next_token_is_keyword (parser,\n \t\t\t\t\t      RID_BUILTIN_HAS_ATTRIBUTE));\n+  location_t start = c_parser_peek_token (parser)->location;\n   c_parser_consume_token (parser);\n \n   c_inhibit_evaluation_warnings++;\n@@ -8484,6 +8485,7 @@ c_parser_has_attribute_expression (c_parser *parser)\n \n   parser->translate_strings_p = save_translate_strings_p;\n \n+  location_t finish = c_parser_peek_token (parser)->location;\n   if (c_parser_next_token_is (parser, CPP_CLOSE_PAREN))\n     c_parser_consume_token (parser);\n   else\n@@ -8512,6 +8514,7 @@ c_parser_has_attribute_expression (c_parser *parser)\n   else\n     result.value =  boolean_false_node;\n \n+  set_c_expr_source_range (&result, start, finish);\n   return result;\n }\n "}]}