{"sha": "f8a39967a57f8880b7050d53cbf888218626c493", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjhhMzk5NjdhNTdmODg4MGI3MDUwZDUzY2JmODg4MjE4NjI2YzQ5Mw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2014-07-29T09:36:36Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2014-07-29T09:36:36Z"}, "message": "gimple-fold.c (fold_gimple_assign): Fix condition guarding ipa-devirt path; fix thinko there.\n\n\t* gimple-fold.c (fold_gimple_assign): Fix condition guarding\n\tipa-devirt path; fix thinko there.\n\nFrom-SVN: r213150", "tree": {"sha": "281f5b739d6f8a6c8ed7eeab2bbcfd90eb80502d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/281f5b739d6f8a6c8ed7eeab2bbcfd90eb80502d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f8a39967a57f8880b7050d53cbf888218626c493", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8a39967a57f8880b7050d53cbf888218626c493", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8a39967a57f8880b7050d53cbf888218626c493", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8a39967a57f8880b7050d53cbf888218626c493/comments", "author": null, "committer": null, "parents": [{"sha": "eb5453a5902bc304efe2c97a360b947cd0424413", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb5453a5902bc304efe2c97a360b947cd0424413", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb5453a5902bc304efe2c97a360b947cd0424413"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "8f1a133261e85aeec008396d7350680f05a3b5b4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8a39967a57f8880b7050d53cbf888218626c493/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8a39967a57f8880b7050d53cbf888218626c493/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f8a39967a57f8880b7050d53cbf888218626c493", "patch": "@@ -1,3 +1,8 @@\n+2014-07-28  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* gimple-fold.c (fold_gimple_assign): Fix condition guarding\n+\tipa-devirt path; fix thinko there.\n+\n 2014-07-28  Trevor Saunders  <tsaunders@mozilla.com>\n \n \t* config/i386/i386.c (ix86_return_in_memory): replace one"}, {"sha": "2e0f2bff4388e0a2107391f1cb7cdebbc5460223", "filename": "gcc/gimple-fold.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f8a39967a57f8880b7050d53cbf888218626c493/gcc%2Fgimple-fold.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f8a39967a57f8880b7050d53cbf888218626c493/gcc%2Fgimple-fold.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-fold.c?ref=f8a39967a57f8880b7050d53cbf888218626c493", "patch": "@@ -372,11 +372,11 @@ fold_gimple_assign (gimple_stmt_iterator *si)\n \t    tree val = OBJ_TYPE_REF_EXPR (rhs);\n \t    if (is_gimple_min_invariant (val))\n \t      return val;\n-\t    else if (flag_devirtualize && virtual_method_call_p (val))\n+\t    else if (flag_devirtualize && virtual_method_call_p (rhs))\n \t      {\n \t\tbool final;\n \t\tvec <cgraph_node *>targets\n-\t\t  = possible_polymorphic_call_targets (val, stmt, &final);\n+\t\t  = possible_polymorphic_call_targets (rhs, stmt, &final);\n \t\tif (final && targets.length () <= 1 && dbg_cnt (devirt))\n \t\t  {\n \t\t    tree fndecl;\n@@ -395,7 +395,8 @@ fold_gimple_assign (gimple_stmt_iterator *si)\n \t\t\t\t\t ? targets[0]->name ()\n \t\t\t\t\t : \"__builtin_unreachable\");\n \t\t      }\n-\t\t    val = fold_convert (TREE_TYPE (val), fndecl);\n+\t\t    val = fold_convert (TREE_TYPE (val),\n+\t\t\t\t\tbuild_fold_addr_expr_loc (loc, fndecl));\n \t\t    STRIP_USELESS_TYPE_CONVERSION (val);\n \t\t    return val;\n \t\t  }"}]}