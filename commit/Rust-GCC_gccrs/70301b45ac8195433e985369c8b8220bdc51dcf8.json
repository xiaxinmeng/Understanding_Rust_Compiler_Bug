{"sha": "70301b45ac8195433e985369c8b8220bdc51dcf8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzAzMDFiNDVhYzgxOTU0MzNlOTg1MzY5YzhiODIyMGJkYzUxZGNmOA==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2004-04-27T14:20:10Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-04-27T14:20:10Z"}, "message": "arm.c (arm_promote_prototypes): New function.\n\n\t* config/arm/arm.c (arm_promote_prototypes): New function.\n\t(TARGET_PROMOTE_PROTOTYPES): Use it.\n\nFrom-SVN: r81223", "tree": {"sha": "d5ae0c1f309adf0663e8e39a639713eab76c1edd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d5ae0c1f309adf0663e8e39a639713eab76c1edd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/70301b45ac8195433e985369c8b8220bdc51dcf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70301b45ac8195433e985369c8b8220bdc51dcf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70301b45ac8195433e985369c8b8220bdc51dcf8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70301b45ac8195433e985369c8b8220bdc51dcf8/comments", "author": null, "committer": null, "parents": [{"sha": "632933d5d0f00cdd397c28daa7cb2486f4d81a58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/632933d5d0f00cdd397c28daa7cb2486f4d81a58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/632933d5d0f00cdd397c28daa7cb2486f4d81a58"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "ddc303c9b5888fc3a9e96ae7e969284835d57685", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70301b45ac8195433e985369c8b8220bdc51dcf8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70301b45ac8195433e985369c8b8220bdc51dcf8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=70301b45ac8195433e985369c8b8220bdc51dcf8", "patch": "@@ -1,3 +1,8 @@\n+2004-04-27  Paul Brook  <paul@codesourcery.com>\n+\n+\t* config/arm/arm.c (arm_promote_prototypes): New function.\n+\t(TARGET_PROMOTE_PROTOTYPES): Use it.\n+\n 2004-04-27  Paul Brook  <paul@codesourcery.com>\n \n \t* config/arm/arm.c (arm_expand_epilogue): Count blocks of 4 regs."}, {"sha": "cde2b27fb1cc811ad7d289f042574eeb7dd8c975", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70301b45ac8195433e985369c8b8220bdc51dcf8/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70301b45ac8195433e985369c8b8220bdc51dcf8/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=70301b45ac8195433e985369c8b8220bdc51dcf8", "patch": "@@ -158,6 +158,7 @@ static void aof_file_end (void);\n static rtx arm_struct_value_rtx (tree, int);\n static void arm_setup_incoming_varargs (CUMULATIVE_ARGS *, enum machine_mode,\n \t\t\t\t\ttree, int *, int);\n+static bool arm_promote_prototypes (tree);\n \n \f\n /* Initialize the GCC target structure.  */\n@@ -247,7 +248,7 @@ static void arm_setup_incoming_varargs (CUMULATIVE_ARGS *, enum machine_mode,\n #undef TARGET_PROMOTE_FUNCTION_RETURN\n #define TARGET_PROMOTE_FUNCTION_RETURN hook_bool_tree_true\n #undef TARGET_PROMOTE_PROTOTYPES\n-#define TARGET_PROMOTE_PROTOTYPES hook_bool_tree_false\n+#define TARGET_PROMOTE_PROTOTYPES arm_promote_prototypes\n \n #undef TARGET_STRUCT_VALUE_RTX\n #define TARGET_STRUCT_VALUE_RTX arm_struct_value_rtx\n@@ -14439,3 +14440,13 @@ arm_no_early_mul_dep (rtx producer, rtx consumer)\n \t  && !reg_overlap_mentioned_p (value, XEXP (op, 0)));\n }\n \n+\n+/* We can't rely on the caller doing the proper promotion when\n+   using APCS or ATPCS.  */\n+\n+static bool\n+arm_promote_prototypes (tree t ATTRIBUTE_UNUSED)\n+{\n+    return arm_abi == ARM_ABI_APCS || arm_abi == ARM_ABI_ATPCS;\n+}\n+"}]}