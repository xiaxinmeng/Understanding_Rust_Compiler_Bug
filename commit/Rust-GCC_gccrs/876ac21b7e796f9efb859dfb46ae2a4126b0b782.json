{"sha": "876ac21b7e796f9efb859dfb46ae2a4126b0b782", "node_id": "C_kwDOANBUbNoAKDg3NmFjMjFiN2U3OTZmOWVmYjg1OWRmYjQ2YWUyYTQxMjZiMGI3ODI", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2022-04-06T10:26:13Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2022-05-11T12:27:42Z"}, "message": "libgomp: Remove unused '--with-hsa-runtime', '--with-hsa-runtime-include', '--with-hsa-runtime-lib'\n\nWith recent commit 2e309a4eff80e55b53d32d26926a2a94eabfea21 \"libgomp testsuite:\nDon't amend 'LD_LIBRARY_PATH' for system-provided HSA Runtime library\",\nand commit d6adba307508c75f1ccb2121eb1a43c9ab1d4056 \"libgomp GCN plugin:\n Clean up unused references to system-provided HSA Runtime library\", the last\nuses of '--with-hsa-runtime' etc. are gone.\n\n\tgcc/\n\t* doc/install.texi: Don't document '--with-hsa-runtime',\n\t'--with-hsa-runtime-include', '--with-hsa-runtime-lib'.\n\tlibgomp/\n\t* plugin/configfrag.ac: Remove '--with-hsa-runtime',\n\t'--with-hsa-runtime-include', '--with-hsa-runtime-lib' processing.\n\t* Makefile.in: Regenerate.\n\t* configure: Likewise.\n\t* testsuite/Makefile.in: Likewise.", "tree": {"sha": "964b308a6dea891be4a71f3644de065d43f2bbb0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/964b308a6dea891be4a71f3644de065d43f2bbb0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/876ac21b7e796f9efb859dfb46ae2a4126b0b782", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/876ac21b7e796f9efb859dfb46ae2a4126b0b782", "html_url": "https://github.com/Rust-GCC/gccrs/commit/876ac21b7e796f9efb859dfb46ae2a4126b0b782", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/876ac21b7e796f9efb859dfb46ae2a4126b0b782/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91a6dcd14915181b4bce51cd44b56a3e9f9d35d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91a6dcd14915181b4bce51cd44b56a3e9f9d35d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91a6dcd14915181b4bce51cd44b56a3e9f9d35d8"}], "stats": {"total": 100, "additions": 2, "deletions": 98}, "files": [{"sha": "042241e9fadc6d89b973821009e1e388abe61121", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876ac21b7e796f9efb859dfb46ae2a4126b0b782/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876ac21b7e796f9efb859dfb46ae2a4126b0b782/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=876ac21b7e796f9efb859dfb46ae2a4126b0b782", "patch": "@@ -2329,18 +2329,6 @@ those are in separate optional packages and where the presence or absence\n of those optional packages should determine the actual supported offloading\n target set rather than the GCC configure-time selection.\n \n-@item --with-hsa-runtime=@var{pathname}\n-@itemx --with-hsa-runtime-include=@var{pathname}\n-@itemx --with-hsa-runtime-lib=@var{pathname}\n-\n-If you configure GCC with offloading which uses an HSA run-time such as\n-AMDGCN but do not have the HSA run-time library installed in a standard\n-location then you can explicitly specify the directory where they are\n-installed.  The @option{--with-hsa-runtime=@/@var{hsainstalldir}} option\n-is a shorthand for\n-@option{--with-hsa-runtime-lib=@/@var{hsainstalldir}/lib} and\n-@option{--with-hsa-runtime-include=@/@var{hsainstalldir}/include}.\n-\n @item --enable-cet\n @itemx --disable-cet\n Enable building target run-time libraries with control-flow"}, {"sha": "f2712aa51337d78165655dd7067f28b868c336c4", "filename": "libgomp/Makefile.in", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FMakefile.in?ref=876ac21b7e796f9efb859dfb46ae2a4126b0b782", "patch": "@@ -385,8 +385,6 @@ FC = @FC@\n FCFLAGS = @FCFLAGS@\n FGREP = @FGREP@\n GREP = @GREP@\n-HSA_RUNTIME_INCLUDE = @HSA_RUNTIME_INCLUDE@\n-HSA_RUNTIME_LIB = @HSA_RUNTIME_LIB@\n INSTALL = @INSTALL@\n INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@"}, {"sha": "3de8eb2641f1334cca4a28799fe3d1b863a87204", "filename": "libgomp/configure", "status": "modified", "additions": 2, "deletions": 53, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=876ac21b7e796f9efb859dfb46ae2a4126b0b782", "patch": "@@ -675,8 +675,6 @@ offload_targets\n offload_plugins\n PLUGIN_GCN_LIBS\n PLUGIN_GCN\n-HSA_RUNTIME_LIB\n-HSA_RUNTIME_INCLUDE\n PLUGIN_NVPTX_LIBS\n PLUGIN_NVPTX_LDFLAGS\n PLUGIN_NVPTX_CPPFLAGS\n@@ -834,9 +832,6 @@ enable_maintainer_mode\n with_cuda_driver\n with_cuda_driver_include\n with_cuda_driver_lib\n-with_hsa_runtime\n-with_hsa_runtime_include\n-with_hsa_runtime_lib\n enable_linux_futex\n enable_tls\n enable_symvers\n@@ -1519,16 +1514,6 @@ Optional Packages:\n   --with-cuda-driver-lib=PATH\n                           specify directory for the installed CUDA driver\n                           library\n-  --with-hsa-runtime=PATH specify prefix directory for installed HSA run-time\n-                          package. Equivalent to\n-                          --with-hsa-runtime-include=PATH/include plus\n-                          --with-hsa-runtime-lib=PATH/lib\n-  --with-hsa-runtime-include=PATH\n-                          specify directory for installed HSA run-time include\n-                          files\n-  --with-hsa-runtime-lib=PATH\n-                          specify directory for the installed HSA run-time\n-                          library\n   --with-gcc-major-version-only\n                           use only GCC major number in filesystem paths\n \n@@ -11429,7 +11414,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11432 \"configure\"\n+#line 11417 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11535,7 +11520,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11538 \"configure\"\n+#line 11523 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -15236,42 +15221,6 @@ PLUGIN_NVPTX_DYNAMIC=0\n \n \n \n-# Look for HSA run-time, its includes and libraries\n-\n-HSA_RUNTIME_INCLUDE=\n-HSA_RUNTIME_LIB=\n-\n-\n-\n-\n-# Check whether --with-hsa-runtime was given.\n-if test \"${with_hsa_runtime+set}\" = set; then :\n-  withval=$with_hsa_runtime;\n-fi\n-\n-\n-# Check whether --with-hsa-runtime-include was given.\n-if test \"${with_hsa_runtime_include+set}\" = set; then :\n-  withval=$with_hsa_runtime_include;\n-fi\n-\n-\n-# Check whether --with-hsa-runtime-lib was given.\n-if test \"${with_hsa_runtime_lib+set}\" = set; then :\n-  withval=$with_hsa_runtime_lib;\n-fi\n-\n-if test \"x$with_hsa_runtime\" != x; then\n-  HSA_RUNTIME_INCLUDE=$with_hsa_runtime/include\n-  HSA_RUNTIME_LIB=$with_hsa_runtime/lib\n-fi\n-if test \"x$with_hsa_runtime_include\" != x; then\n-  HSA_RUNTIME_INCLUDE=$with_hsa_runtime_include\n-fi\n-if test \"x$with_hsa_runtime_lib\" != x; then\n-  HSA_RUNTIME_LIB=$with_hsa_runtime_lib\n-fi\n-\n PLUGIN_GCN=0\n PLUGIN_GCN_LIBS=\n "}, {"sha": "9eeac4562e4bb395fd27f404ab3cebe274db6355", "filename": "libgomp/plugin/configfrag.ac", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2Fplugin%2Fconfigfrag.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2Fplugin%2Fconfigfrag.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fplugin%2Fconfigfrag.ac?ref=876ac21b7e796f9efb859dfb46ae2a4126b0b782", "patch": "@@ -91,35 +91,6 @@ AC_SUBST(PLUGIN_NVPTX_CPPFLAGS)\n AC_SUBST(PLUGIN_NVPTX_LDFLAGS)\n AC_SUBST(PLUGIN_NVPTX_LIBS)\n \n-# Look for HSA run-time, its includes and libraries\n-\n-HSA_RUNTIME_INCLUDE=\n-HSA_RUNTIME_LIB=\n-AC_SUBST(HSA_RUNTIME_INCLUDE)\n-AC_SUBST(HSA_RUNTIME_LIB)\n-\n-AC_ARG_WITH(hsa-runtime,\n-\t[AS_HELP_STRING([--with-hsa-runtime=PATH],\n-\t\t[specify prefix directory for installed HSA run-time package.\n-\t\t Equivalent to --with-hsa-runtime-include=PATH/include\n-\t\t plus --with-hsa-runtime-lib=PATH/lib])])\n-AC_ARG_WITH(hsa-runtime-include,\n-\t[AS_HELP_STRING([--with-hsa-runtime-include=PATH],\n-\t\t[specify directory for installed HSA run-time include files])])\n-AC_ARG_WITH(hsa-runtime-lib,\n-\t[AS_HELP_STRING([--with-hsa-runtime-lib=PATH],\n-\t\t[specify directory for the installed HSA run-time library])])\n-if test \"x$with_hsa_runtime\" != x; then\n-  HSA_RUNTIME_INCLUDE=$with_hsa_runtime/include\n-  HSA_RUNTIME_LIB=$with_hsa_runtime/lib\n-fi\n-if test \"x$with_hsa_runtime_include\" != x; then\n-  HSA_RUNTIME_INCLUDE=$with_hsa_runtime_include\n-fi\n-if test \"x$with_hsa_runtime_lib\" != x; then\n-  HSA_RUNTIME_LIB=$with_hsa_runtime_lib\n-fi\n-\n PLUGIN_GCN=0\n PLUGIN_GCN_LIBS=\n AC_SUBST(PLUGIN_GCN)"}, {"sha": "32be337b8fc412df357a734d669bef6479e4a6ac", "filename": "libgomp/testsuite/Makefile.in", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/876ac21b7e796f9efb859dfb46ae2a4126b0b782/libgomp%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2FMakefile.in?ref=876ac21b7e796f9efb859dfb46ae2a4126b0b782", "patch": "@@ -163,8 +163,6 @@ FC = @FC@\n FCFLAGS = @FCFLAGS@\n FGREP = @FGREP@\n GREP = @GREP@\n-HSA_RUNTIME_INCLUDE = @HSA_RUNTIME_INCLUDE@\n-HSA_RUNTIME_LIB = @HSA_RUNTIME_LIB@\n INSTALL = @INSTALL@\n INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@"}]}