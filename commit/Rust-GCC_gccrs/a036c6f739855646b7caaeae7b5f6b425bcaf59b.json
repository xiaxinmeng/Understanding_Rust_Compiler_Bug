{"sha": "a036c6f739855646b7caaeae7b5f6b425bcaf59b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTAzNmM2ZjczOTg1NTY0NmI3Y2FhZWFlN2I1ZjZiNDI1YmNhZjU5Yg==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2004-11-06T15:42:32Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2004-11-06T15:42:32Z"}, "message": "2064.md (\"z_o2\", \"z_o3\"): Remove.\n\n\t* config/s390/2064.md (\"z_o2\", \"z_o3\"): Remove.\n\t* config/s390/2084.md (\"x_o2\", \"x_o3\"): Remove.\n\t(\"x_fdivd\"): Use also for fsqrtd type.\n\t(\"x_fdivs\"): Use also for fsqrts type.\n\t* config/s390/s390.md (attribute \"type\"): Remove \"o2\" and \"o3\" types.\n\t(\"fix_truncdfsi2_ieee\"): Set type to \"ftoi\".\n\t(\"fix_truncdfsi2_ibm\"): Set type to \"other\".\n\t(\"floatdidf2\", \"floatdisf2\"): Do not clobber CC.\n\t(\"floatsidf2\", \"floatsidf2_ieee\"): Likewise.\n\t(\"floatsisf2\", \"floatsisf2_ieee\"): Likewise.\n\t(\"truncdfsf2\", \"truncdfsf2_ieee\"): Only allow \"register_operand\".\n\t(\"truncdfsf2_ibm\"): Only allow \"nonimmediate_operand\".  Use LER\n\tinstead of LRER.\n\t(\"extendsfdf2_ibm\"): Do not set atype.  Set type to \"floads\".\n\t(\"sqrtdf2\"): Set type to \"fsqrtd\".\n\t(\"sqrtsf2\"): Set type to \"fsqrts\".\n\nFrom-SVN: r90174", "tree": {"sha": "a0e9a2d70b6e3363b8dd3b772b21058d1d59481c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a0e9a2d70b6e3363b8dd3b772b21058d1d59481c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a036c6f739855646b7caaeae7b5f6b425bcaf59b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a036c6f739855646b7caaeae7b5f6b425bcaf59b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a036c6f739855646b7caaeae7b5f6b425bcaf59b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a036c6f739855646b7caaeae7b5f6b425bcaf59b/comments", "author": null, "committer": null, "parents": [{"sha": "b2c24c1b9f722c57ed70c067e77d4fda1c63abda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2c24c1b9f722c57ed70c067e77d4fda1c63abda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2c24c1b9f722c57ed70c067e77d4fda1c63abda"}], "stats": {"total": 92, "additions": 42, "deletions": 50}, "files": [{"sha": "be68b522c7819e6468452156f1a1a8a437fd7264", "filename": "gcc/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a036c6f739855646b7caaeae7b5f6b425bcaf59b", "patch": "@@ -1,3 +1,22 @@\n+2004-11-06  Ulrich Weigand  <uweigand@de.ibm.com>\n+\n+\t* config/s390/2064.md (\"z_o2\", \"z_o3\"): Remove.\n+\t* config/s390/2084.md (\"x_o2\", \"x_o3\"): Remove.\n+\t(\"x_fdivd\"): Use also for fsqrtd type.\n+\t(\"x_fdivs\"): Use also for fsqrts type.\n+\t* config/s390/s390.md (attribute \"type\"): Remove \"o2\" and \"o3\" types.\n+\t(\"fix_truncdfsi2_ieee\"): Set type to \"ftoi\".\n+\t(\"fix_truncdfsi2_ibm\"): Set type to \"other\".\n+\t(\"floatdidf2\", \"floatdisf2\"): Do not clobber CC.\n+\t(\"floatsidf2\", \"floatsidf2_ieee\"): Likewise.\n+\t(\"floatsisf2\", \"floatsisf2_ieee\"): Likewise.\n+\t(\"truncdfsf2\", \"truncdfsf2_ieee\"): Only allow \"register_operand\".\n+\t(\"truncdfsf2_ibm\"): Only allow \"nonimmediate_operand\".  Use LER\n+\tinstead of LRER. \n+\t(\"extendsfdf2_ibm\"): Do not set atype.  Set type to \"floads\".\n+\t(\"sqrtdf2\"): Set type to \"fsqrtd\".\n+\t(\"sqrtsf2\"): Set type to \"fsqrts\".\n+\n 2004-11-06  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-phinodes.c (remove_all_phi_nodes_for): Speed up using a"}, {"sha": "643277e889b6df95a01fef261d92a9bd02f1a0f0", "filename": "gcc/config/s390/2064.md", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2Fconfig%2Fs390%2F2064.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2Fconfig%2Fs390%2F2064.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2F2064.md?ref=a036c6f739855646b7caaeae7b5f6b425bcaf59b", "patch": "@@ -72,16 +72,6 @@\n        (eq_attr \"type\" \"jsr\"))\n   \"z_e1*5,z_wr\")\n \n-(define_insn_reservation \"z_o2\" 2\n-  (and (eq_attr \"cpu\" \"z900,g5,g6\")\n-       (eq_attr \"type\" \"o2\"))\n-  \"z_e1*2,z_wr\")\n-\n-(define_insn_reservation \"z_o3\" 3\n-  (and (eq_attr \"cpu\" \"z900,g5,g6\")\n-       (eq_attr \"type\" \"o3\"))\n-  \"z_e1*3,z_wr\")\n-\n ;\n ; Insn still not mentioned are check for\n ; the usage of the agen unit "}, {"sha": "cff4420f29adc84474ee35ea553dc646ff0181b6", "filename": "gcc/config/s390/2084.md", "status": "modified", "additions": 3, "deletions": 13, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2Fconfig%2Fs390%2F2084.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2Fconfig%2Fs390%2F2084.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2F2084.md?ref=a036c6f739855646b7caaeae7b5f6b425bcaf59b", "patch": "@@ -1,5 +1,5 @@\n ;; Scheduling description for z990 (cpu 2084).\n-;;   Copyright (C) 2003 Free Software Foundation, Inc.\n+;;   Copyright (C) 2003,2004 Free Software Foundation, Inc.\n ;;   Contributed by Hartmut Penner (hpenner@de.ibm.com) and\n ;;                  Ulrich Weigand (uweigand@de.ibm.com).\n \n@@ -120,16 +120,6 @@\n        (eq_attr \"op_type\" \"NN\"))\n   \"x-e1-np,x-wr-np\") \n \n-(define_insn_reservation \"x_o2\" 2 \n-  (and (eq_attr \"cpu\" \"z990\")\n-       (eq_attr \"type\" \"o2\"))\n-  \"x-e1-np*2,x-wr-np\") \n-\n-(define_insn_reservation \"x_o3\" 3 \n-  (and (eq_attr \"cpu\" \"z990\")\n-       (eq_attr \"type\" \"o3\"))\n-  \"x-e1-np*3,x-wr-np\") \n-\n ;;\n ;; Floating point insns\n ;;\n@@ -146,12 +136,12 @@\n \n (define_insn_reservation \"x_fdivd\" 36\n   (and (eq_attr \"cpu\" \"z990\")\n-       (eq_attr \"type\" \"fdivd\"))\n+       (eq_attr \"type\" \"fdivd,fsqrtd\"))\n   \"x_e1_t*30,x-wr-fp\") \n \n (define_insn_reservation \"x_fdivs\" 36 \n   (and (eq_attr \"cpu\" \"z990\")\n-       (eq_attr \"type\" \"fdivs\"))\n+       (eq_attr \"type\" \"fdivs,fsqrts\"))\n   \"x_e1_t*30,x-wr-fp\") \n \n (define_insn_reservation \"x_floadd\" 6 "}, {"sha": "f763294cf739b9bbae3bb9bf0033d2f1392d3d51", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 20, "deletions": 27, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a036c6f739855646b7caaeae7b5f6b425bcaf59b/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=a036c6f739855646b7caaeae7b5f6b425bcaf59b", "patch": "@@ -160,7 +160,7 @@\n \t\t     floadd,floads,fstored, fstores,\n \t\t     fmuld,fmuls,fdivd,fdivs,\n \t\t     ftoi,itof,fsqrtd,fsqrts,\n-                     other,o2,o3\"\n+                     other\"\n   (const_string \"integer\"))\n \n ;; Operand type. Used to default length attribute values\n@@ -2967,7 +2967,7 @@\n   \"TARGET_HARD_FLOAT && TARGET_IEEE_FLOAT\"\n   \"cfdbr\\t%0,%h2,%1\"\n    [(set_attr \"op_type\" \"RRE\")\n-    (set_attr \"type\"    \"other\" )])\n+    (set_attr \"type\"    \"ftoi\")])\n \n (define_insn \"fix_truncdfsi2_ibm\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n@@ -2985,7 +2985,7 @@\n    return \"l\\t%0,%N4\";\n }\n   [(set_attr \"op_type\" \"NN\")\n-   (set_attr \"type\"    \"ftoi\")\n+   (set_attr \"type\"    \"other\")\n    (set_attr \"atype\"   \"agen\")\n    (set_attr \"length\"  \"20\")])\n \n@@ -3107,8 +3107,7 @@\n \n (define_insn \"floatdidf2\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n-        (float:DF (match_operand:DI 1 \"register_operand\" \"d\")))\n-   (clobber (reg:CC 33))]\n+        (float:DF (match_operand:DI 1 \"register_operand\" \"d\")))]\n   \"TARGET_64BIT && TARGET_HARD_FLOAT && TARGET_IEEE_FLOAT\"\n   \"cdgbr\\t%0,%1\"\n   [(set_attr \"op_type\" \"RRE\")\n@@ -3120,8 +3119,7 @@\n \n (define_insn \"floatdisf2\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n-        (float:SF (match_operand:DI 1 \"register_operand\" \"d\")))\n-   (clobber (reg:CC 33))]\n+        (float:SF (match_operand:DI 1 \"register_operand\" \"d\")))]\n   \"TARGET_64BIT && TARGET_HARD_FLOAT && TARGET_IEEE_FLOAT\"\n   \"cegbr\\t%0,%1\"\n   [(set_attr \"op_type\" \"RRE\")\n@@ -3132,10 +3130,8 @@\n ;\n \n (define_expand \"floatsidf2\"\n-  [(parallel\n-    [(set (match_operand:DF 0 \"register_operand\" \"\")\n-          (float:DF (match_operand:SI 1 \"register_operand\" \"\")))\n-     (clobber (reg:CC 33))])]\n+  [(set (match_operand:DF 0 \"register_operand\" \"\")\n+        (float:DF (match_operand:SI 1 \"register_operand\" \"\")))]\n   \"TARGET_HARD_FLOAT\"\n {\n   if (TARGET_IBM_FLOAT)\n@@ -3152,8 +3148,7 @@\n \n (define_insn \"floatsidf2_ieee\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n-        (float:DF (match_operand:SI 1 \"register_operand\"  \"d\")))\n-   (clobber (reg:CC 33))]\n+        (float:DF (match_operand:SI 1 \"register_operand\" \"d\")))]\n   \"TARGET_HARD_FLOAT && TARGET_IEEE_FLOAT\"\n   \"cdfbr\\t%0,%1\"\n   [(set_attr \"op_type\" \"RRE\")\n@@ -3183,10 +3178,8 @@\n ;\n \n (define_expand \"floatsisf2\"\n-  [(parallel\n-    [(set (match_operand:SF 0 \"register_operand\" \"\")\n-          (float:SF (match_operand:SI 1 \"register_operand\" \"\")))\n-     (clobber (reg:CC 33))])]\n+  [(set (match_operand:SF 0 \"register_operand\" \"\")\n+        (float:SF (match_operand:SI 1 \"register_operand\" \"\")))]\n   \"TARGET_HARD_FLOAT\"\n {\n   if (TARGET_IBM_FLOAT)\n@@ -3201,8 +3194,7 @@\n \n (define_insn \"floatsisf2_ieee\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n-        (float:SF (match_operand:SI 1 \"register_operand\" \"d\")))\n-   (clobber (reg:CC 33))]\n+        (float:SF (match_operand:SI 1 \"register_operand\" \"d\")))]\n   \"TARGET_HARD_FLOAT && TARGET_IEEE_FLOAT\"\n   \"cefbr\\t%0,%1\"\n   [(set_attr \"op_type\" \"RRE\")\n@@ -3214,23 +3206,23 @@\n \n (define_expand \"truncdfsf2\"\n   [(set (match_operand:SF 0 \"register_operand\" \"\")\n-        (float_truncate:SF (match_operand:DF 1 \"general_operand\" \"\")))]\n+        (float_truncate:SF (match_operand:DF 1 \"register_operand\" \"\")))]\n   \"TARGET_HARD_FLOAT\"\n   \"\")\n \n (define_insn \"truncdfsf2_ieee\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n-        (float_truncate:SF (match_operand:DF 1 \"general_operand\" \"f\")))]\n+        (float_truncate:SF (match_operand:DF 1 \"register_operand\" \"f\")))]\n   \"TARGET_HARD_FLOAT && TARGET_IEEE_FLOAT\"\n   \"ledbr\\t%0,%1\"\n   [(set_attr \"op_type\"  \"RRE\")])\n \n (define_insn \"truncdfsf2_ibm\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f,f\")\n-        (float_truncate:SF (match_operand:DF 1 \"general_operand\" \"f,R\")))]\n+        (float_truncate:SF (match_operand:DF 1 \"nonimmediate_operand\" \"f,R\")))]\n   \"TARGET_HARD_FLOAT && TARGET_IBM_FLOAT\"\n   \"@\n-   lrer\\t%0,%1\n+   ler\\t%0,%1\n    le\\t%0,%1\"\n   [(set_attr \"op_type\"  \"RR,RX\")\n    (set_attr \"type\"   \"floads,floads\")])\n@@ -3270,9 +3262,8 @@\n    sdr\\t%0,%0\\;ler\\t%0,%1\n    sdr\\t%0,%0\\;le\\t%0,%1\"\n   [(set_attr \"op_type\"  \"NN,NN\")\n-   (set_attr \"atype\"    \"reg,agen\")\n    (set_attr \"length\"   \"4,6\")\n-   (set_attr \"type\"     \"o2,o2\")])\n+   (set_attr \"type\"     \"floads,floads\")])\n \n \n ;;\n@@ -6357,7 +6348,8 @@\n   \"@\n    sqdbr\\t%0,%1\n    sqdb\\t%0,%1\"\n-  [(set_attr \"op_type\"  \"RRE,RXE\")])\n+  [(set_attr \"op_type\" \"RRE,RXE\")\n+   (set_attr \"type\" \"fsqrtd\")])\n \n ;\n ; sqrtsf2 instruction pattern(s).\n@@ -6370,7 +6362,8 @@\n   \"@\n    sqebr\\t%0,%1\n    sqeb\\t%0,%1\"\n-  [(set_attr \"op_type\"  \"RRE,RXE\")])\n+  [(set_attr \"op_type\" \"RRE,RXE\")\n+   (set_attr \"type\" \"fsqrts\")])\n \n ;;\n ;;- One complement instructions."}]}