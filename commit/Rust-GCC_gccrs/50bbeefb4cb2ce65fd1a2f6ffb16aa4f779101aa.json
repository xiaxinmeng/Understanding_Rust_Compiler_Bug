{"sha": "50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTBiYmVlZmI0Y2IyY2U2NWZkMWEyZjZmZmIxNmFhNGY3NzkxMDFhYQ==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2011-11-06T19:12:54Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2011-11-06T19:12:54Z"}, "message": "pa.c (pa_hpux_init_libfuncs): Rename to pa_init_libfuncs.\n\n\t* config/pa/pa.c (pa_hpux_init_libfuncs): Rename to pa_init_libfuncs.\n\tRemove dependence of declaration and target define on definition of\n\tHPUX_LONG_DOUBLE_LIBRARY.  Update implementation.\n\nFrom-SVN: r181038", "tree": {"sha": "0c2bfe1139d798570203a53daf4e88db5d55fddf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c2bfe1139d798570203a53daf4e88db5d55fddf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa/comments", "author": null, "committer": null, "parents": [{"sha": "ba3aa0e6c7552cceaefe7cb23db2daf40a32de00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba3aa0e6c7552cceaefe7cb23db2daf40a32de00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba3aa0e6c7552cceaefe7cb23db2daf40a32de00"}], "stats": {"total": 101, "additions": 56, "deletions": 45}, "files": [{"sha": "2a033618e47931cfd47d5f0e12fcc9de6ce788f4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa", "patch": "@@ -1,3 +1,9 @@\n+2011-11-06  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* config/pa/pa.c (pa_hpux_init_libfuncs): Rename to pa_init_libfuncs.\n+\tRemove dependence of declaration and target define on definition of\n+\tHPUX_LONG_DOUBLE_LIBRARY.  Update implementation.\n+\n 2011-11-06  Andrew Macleod  <amacleod@redhat.com>\n \t    Richard Henderson  <rth@redhat.com>\n \t    Aldy Hernandez  <aldyh@redhat.com>"}, {"sha": "66574bad2fa11296552ce8200235665ff9f30d03", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 50, "deletions": 45, "changes": 95, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=50bbeefb4cb2ce65fd1a2f6ffb16aa4f779101aa", "patch": "@@ -155,9 +155,7 @@ static void output_deferred_profile_counters (void) ATTRIBUTE_UNUSED;\n #ifdef ASM_OUTPUT_EXTERNAL_REAL\n static void pa_hpux_file_end (void);\n #endif\n-#if HPUX_LONG_DOUBLE_LIBRARY\n-static void pa_hpux_init_libfuncs (void);\n-#endif\n+static void pa_init_libfuncs (void);\n static rtx pa_struct_value_rtx (tree, int);\n static bool pa_pass_by_reference (cumulative_args_t, enum machine_mode,\n \t\t\t\t  const_tree, bool);\n@@ -316,10 +314,8 @@ static size_t n_deferred_plabels = 0;\n #undef TARGET_MACHINE_DEPENDENT_REORG\n #define TARGET_MACHINE_DEPENDENT_REORG pa_reorg\n \n-#if HPUX_LONG_DOUBLE_LIBRARY\n #undef TARGET_INIT_LIBFUNCS\n-#define TARGET_INIT_LIBFUNCS pa_hpux_init_libfuncs\n-#endif\n+#define TARGET_INIT_LIBFUNCS pa_init_libfuncs\n \n #undef TARGET_PROMOTE_FUNCTION_MODE\n #define TARGET_PROMOTE_FUNCTION_MODE pa_promote_function_mode\n@@ -5542,47 +5538,56 @@ output_deferred_plabels (void)\n     }\n }\n \n-#if HPUX_LONG_DOUBLE_LIBRARY\n-/* Initialize optabs to point to HPUX long double emulation routines.  */\n+/* Initialize optabs to point to emulation routines.  */\n+\n static void\n-pa_hpux_init_libfuncs (void)\n-{\n-  set_optab_libfunc (add_optab, TFmode, \"_U_Qfadd\");\n-  set_optab_libfunc (sub_optab, TFmode, \"_U_Qfsub\");\n-  set_optab_libfunc (smul_optab, TFmode, \"_U_Qfmpy\");\n-  set_optab_libfunc (sdiv_optab, TFmode, \"_U_Qfdiv\");\n-  set_optab_libfunc (smin_optab, TFmode, \"_U_Qmin\");\n-  set_optab_libfunc (smax_optab, TFmode, \"_U_Qfmax\");\n-  set_optab_libfunc (sqrt_optab, TFmode, \"_U_Qfsqrt\");\n-  set_optab_libfunc (abs_optab, TFmode, \"_U_Qfabs\");\n-  set_optab_libfunc (neg_optab, TFmode, \"_U_Qfneg\");\n-\n-  set_optab_libfunc (eq_optab, TFmode, \"_U_Qfeq\");\n-  set_optab_libfunc (ne_optab, TFmode, \"_U_Qfne\");\n-  set_optab_libfunc (gt_optab, TFmode, \"_U_Qfgt\");\n-  set_optab_libfunc (ge_optab, TFmode, \"_U_Qfge\");\n-  set_optab_libfunc (lt_optab, TFmode, \"_U_Qflt\");\n-  set_optab_libfunc (le_optab, TFmode, \"_U_Qfle\");\n-  set_optab_libfunc (unord_optab, TFmode, \"_U_Qfunord\");\n-\n-  set_conv_libfunc (sext_optab,   TFmode, SFmode, \"_U_Qfcnvff_sgl_to_quad\");\n-  set_conv_libfunc (sext_optab,   TFmode, DFmode, \"_U_Qfcnvff_dbl_to_quad\");\n-  set_conv_libfunc (trunc_optab,  SFmode, TFmode, \"_U_Qfcnvff_quad_to_sgl\");\n-  set_conv_libfunc (trunc_optab,  DFmode, TFmode, \"_U_Qfcnvff_quad_to_dbl\");\n-\n-  set_conv_libfunc (sfix_optab,   SImode, TFmode, TARGET_64BIT\n-\t\t\t\t\t\t  ? \"__U_Qfcnvfxt_quad_to_sgl\"\n-\t\t\t\t\t\t  : \"_U_Qfcnvfxt_quad_to_sgl\");\n-  set_conv_libfunc (sfix_optab,   DImode, TFmode, \"_U_Qfcnvfxt_quad_to_dbl\");\n-  set_conv_libfunc (ufix_optab,   SImode, TFmode, \"_U_Qfcnvfxt_quad_to_usgl\");\n-  set_conv_libfunc (ufix_optab,   DImode, TFmode, \"_U_Qfcnvfxt_quad_to_udbl\");\n-\n-  set_conv_libfunc (sfloat_optab, TFmode, SImode, \"_U_Qfcnvxf_sgl_to_quad\");\n-  set_conv_libfunc (sfloat_optab, TFmode, DImode, \"_U_Qfcnvxf_dbl_to_quad\");\n-  set_conv_libfunc (ufloat_optab, TFmode, SImode, \"_U_Qfcnvxf_usgl_to_quad\");\n-  set_conv_libfunc (ufloat_optab, TFmode, DImode, \"_U_Qfcnvxf_udbl_to_quad\");\n+pa_init_libfuncs (void)\n+{\n+  if (HPUX_LONG_DOUBLE_LIBRARY)\n+    {\n+      set_optab_libfunc (add_optab, TFmode, \"_U_Qfadd\");\n+      set_optab_libfunc (sub_optab, TFmode, \"_U_Qfsub\");\n+      set_optab_libfunc (smul_optab, TFmode, \"_U_Qfmpy\");\n+      set_optab_libfunc (sdiv_optab, TFmode, \"_U_Qfdiv\");\n+      set_optab_libfunc (smin_optab, TFmode, \"_U_Qmin\");\n+      set_optab_libfunc (smax_optab, TFmode, \"_U_Qfmax\");\n+      set_optab_libfunc (sqrt_optab, TFmode, \"_U_Qfsqrt\");\n+      set_optab_libfunc (abs_optab, TFmode, \"_U_Qfabs\");\n+      set_optab_libfunc (neg_optab, TFmode, \"_U_Qfneg\");\n+\n+      set_optab_libfunc (eq_optab, TFmode, \"_U_Qfeq\");\n+      set_optab_libfunc (ne_optab, TFmode, \"_U_Qfne\");\n+      set_optab_libfunc (gt_optab, TFmode, \"_U_Qfgt\");\n+      set_optab_libfunc (ge_optab, TFmode, \"_U_Qfge\");\n+      set_optab_libfunc (lt_optab, TFmode, \"_U_Qflt\");\n+      set_optab_libfunc (le_optab, TFmode, \"_U_Qfle\");\n+      set_optab_libfunc (unord_optab, TFmode, \"_U_Qfunord\");\n+\n+      set_conv_libfunc (sext_optab, TFmode, SFmode, \"_U_Qfcnvff_sgl_to_quad\");\n+      set_conv_libfunc (sext_optab, TFmode, DFmode, \"_U_Qfcnvff_dbl_to_quad\");\n+      set_conv_libfunc (trunc_optab, SFmode, TFmode, \"_U_Qfcnvff_quad_to_sgl\");\n+      set_conv_libfunc (trunc_optab, DFmode, TFmode, \"_U_Qfcnvff_quad_to_dbl\");\n+\n+      set_conv_libfunc (sfix_optab, SImode, TFmode,\n+\t\t\tTARGET_64BIT ? \"__U_Qfcnvfxt_quad_to_sgl\"\n+\t\t\t\t     : \"_U_Qfcnvfxt_quad_to_sgl\");\n+      set_conv_libfunc (sfix_optab, DImode, TFmode,\n+\t\t\t\"_U_Qfcnvfxt_quad_to_dbl\");\n+      set_conv_libfunc (ufix_optab, SImode, TFmode,\n+\t\t\t\"_U_Qfcnvfxt_quad_to_usgl\");\n+      set_conv_libfunc (ufix_optab, DImode, TFmode,\n+\t\t\t\"_U_Qfcnvfxt_quad_to_udbl\");\n+\n+      set_conv_libfunc (sfloat_optab, TFmode, SImode,\n+\t\t\t\"_U_Qfcnvxf_sgl_to_quad\");\n+      set_conv_libfunc (sfloat_optab, TFmode, DImode,\n+\t\t\t\"_U_Qfcnvxf_dbl_to_quad\");\n+      set_conv_libfunc (ufloat_optab, TFmode, SImode,\n+\t\t\t\"_U_Qfcnvxf_usgl_to_quad\");\n+      set_conv_libfunc (ufloat_optab, TFmode, DImode,\n+\t\t\t\"_U_Qfcnvxf_udbl_to_quad\");\n+    }\n }\n-#endif\n \n /* HP's millicode routines mean something special to the assembler.\n    Keep track of which ones we have used.  */"}]}