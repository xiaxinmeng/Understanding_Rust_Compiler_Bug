{"sha": "7140b0dba6389942f7dd33e4629fe85a5df7db52", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE0MGIwZGJhNjM4OTk0MmY3ZGQzM2U0NjI5ZmU4NWE1ZGY3ZGI1Mg==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@rabi.phys.columbia.edu", "date": "1998-10-29T11:55:06Z"}, "committer": {"name": "Dave Brolley", "email": "brolley@gcc.gnu.org", "date": "1998-10-29T11:55:06Z"}, "message": "lex.c: Call check_newline from lang_init always.\n\n1998-10-28  Zack Weinberg  <zack@rabi.phys.columbia.edu>\n\t* cp/lex.c: Call check_newline from lang_init always.\tAfter\n\tcalling cpp_start_read, set yy_cur and yy_lim to read from the\n\tcpplib token buffer.\n\nFrom-SVN: r23425", "tree": {"sha": "7a41568dce8aee7bafc71cedf34c4112d3c9dbaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7a41568dce8aee7bafc71cedf34c4112d3c9dbaf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7140b0dba6389942f7dd33e4629fe85a5df7db52", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7140b0dba6389942f7dd33e4629fe85a5df7db52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7140b0dba6389942f7dd33e4629fe85a5df7db52", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7140b0dba6389942f7dd33e4629fe85a5df7db52/comments", "author": null, "committer": null, "parents": [{"sha": "add7091b5b09593736c839d9ffa33d74f5d7cb61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/add7091b5b09593736c839d9ffa33d74f5d7cb61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/add7091b5b09593736c839d9ffa33d74f5d7cb61"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "fd5706bef643951c65b2d6dd656555220f78dbd9", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7140b0dba6389942f7dd33e4629fe85a5df7db52/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7140b0dba6389942f7dd33e4629fe85a5df7db52/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7140b0dba6389942f7dd33e4629fe85a5df7db52", "patch": "@@ -8,6 +8,12 @@\n \t* Makefile.in (cc1plus): Put CXX_OBJS, and thence @extra_cxx_objs@,\n \tlast.\n \n+1998-10-28  Zack Weinberg  <zack@rabi.phys.columbia.edu>\n+\t\n+\t* cp/lex.c: Call check_newline from lang_init always.\tAfter\n+\tcalling cpp_start_read, set yy_cur and yy_lim to read from the\n+\tcpplib token buffer.\n+\n 1998-10-28  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* class.c (instantiate_type): Don't consider templates for a normal"}, {"sha": "5901c8a89fee0b0be1dfe7d8970583e31846e20e", "filename": "gcc/cp/lex.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7140b0dba6389942f7dd33e4629fe85a5df7db52/gcc%2Fcp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7140b0dba6389942f7dd33e4629fe85a5df7db52/gcc%2Fcp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Flex.c?ref=7140b0dba6389942f7dd33e4629fe85a5df7db52", "patch": "@@ -395,11 +395,14 @@ lang_init_options ()\n void\n lang_init ()\n {\n-#if ! USE_CPPLIB\n   /* the beginning of the file is a new line; check for # */\n   /* With luck, we discover the real source file's name from that\n      and put it in input_filename.  */\n+#if ! USE_CPPLIB\n   put_back (check_newline ());\n+#else\n+  check_newline ();\n+  yy_cur--;\n #endif\n   if (flag_gnu_xref) GNU_xref_begin (input_filename);\n   init_repo (input_filename);\n@@ -475,12 +478,15 @@ init_parse (filename)\n #endif\n \n #if USE_CPPLIB\n-  yy_cur = \"\\n\";\n-  yy_lim = yy_cur + 1;\n-\n   parse_in.show_column = 1;\n   if (! cpp_start_read (&parse_in, filename))\n     abort ();\n+\n+  /* cpp_start_read always puts at least one line directive into the\n+     token buffer.  We must arrange to read it out here. */\n+  yy_cur = parse_in.token_buffer;\n+  yy_lim = CPP_PWRITTEN (&parse_in);\n+\n #else\n   /* Open input file.  */\n   if (filename == 0 || !strcmp (filename, \"-\"))"}]}