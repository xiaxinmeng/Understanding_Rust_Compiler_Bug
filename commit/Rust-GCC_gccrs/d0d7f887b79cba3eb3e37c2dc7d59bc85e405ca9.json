{"sha": "d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDBkN2Y4ODdiNzljYmEzZWIzZTM3YzJkYzdkNTliYzg1ZTQwNWNhOQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.com", "date": "2016-09-29T16:21:20Z"}, "committer": {"name": "Aaron Sawdey", "email": "acsawdey@gcc.gnu.org", "date": "2016-09-29T16:21:20Z"}, "message": "builtins.c (expand_builtin_memcmp): don't swap args unless result is only being compared with zero.\n\n2016-09-29  Bernd Schmidt  <bschmidt@redhat.com>\n\n\t* builtins.c (expand_builtin_memcmp): don't swap args unless\n\tresult is only being compared with zero.\n\nFrom-SVN: r240625", "tree": {"sha": "6d028a0fe3e7b556ecb9495dce43012d4bedc709", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d028a0fe3e7b556ecb9495dce43012d4bedc709"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9/comments", "author": null, "committer": null, "parents": [{"sha": "0b4b9552ee6be2ac37b09193c07fae68028ed3dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b4b9552ee6be2ac37b09193c07fae68028ed3dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b4b9552ee6be2ac37b09193c07fae68028ed3dd"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "bb83b0648657ac73c4b42ac568e22b50e6303c93", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9", "patch": "@@ -1,3 +1,8 @@\n+2016-09-29  Bernd Schmidt  <bschmidt@redhat.com>\n+\n+\t* builtins.c (expand_builtin_memcmp): don't swap args unless\n+\tresult is only being compared with zero.\n+\n 2016-09-29  Marek Polacek  <polacek@redhat.com>\n \n \t* dwarf2out.c (loc_descriptor): Add fall through comment."}, {"sha": "35cb109bc4bfbf384c662a3d1ab567b724dda4c3", "filename": "gcc/builtins.c", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=d0d7f887b79cba3eb3e37c2dc7d59bc85e405ca9", "patch": "@@ -3707,11 +3707,13 @@ expand_builtin_memcmp (tree exp, rtx target, bool result_eq)\n \n   by_pieces_constfn constfn = NULL;\n \n-  const char *src_str = c_getstr (arg1);\n-  if (src_str == NULL)\n-    src_str = c_getstr (arg2);\n-  else\n-    std::swap (arg1_rtx, arg2_rtx);\n+  const char *src_str = c_getstr (arg2);\n+  if (result_eq && src_str == NULL)\n+    {\n+      src_str = c_getstr (arg1);\n+      if (src_str != NULL)\n+       std::swap (arg1_rtx, arg2_rtx);\n+    }\n \n   /* If SRC is a string constant and block move would be done\n      by pieces, we can avoid loading the string from memory"}]}