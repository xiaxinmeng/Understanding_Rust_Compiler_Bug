{"sha": "dae1bf4d22414d05d627b3ef619d888d773715b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGFlMWJmNGQyMjQxNGQwNWQ2MjdiM2VmNjE5ZDg4OGQ3NzM3MTViNg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2005-10-17T13:54:34Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2005-10-17T13:54:34Z"}, "message": "re PR c++/22551 ([ICE] in tree_low_cst, at tree.c:3843)\n\n.:\tPR c++/22551\n\t* c-common.c (c_add_case_label): Revert my 2005-10-14 clearing of\n\toverflow flags.\ntestsuite:\n\tPR c++/22551\n\t* g++.dg/other/switch2.C: Remove expected warnings.\n\nFrom-SVN: r105501", "tree": {"sha": "8b6b365e7f47a804d1ed870d77c86ff5467fe674", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b6b365e7f47a804d1ed870d77c86ff5467fe674"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dae1bf4d22414d05d627b3ef619d888d773715b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dae1bf4d22414d05d627b3ef619d888d773715b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dae1bf4d22414d05d627b3ef619d888d773715b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dae1bf4d22414d05d627b3ef619d888d773715b6/comments", "author": null, "committer": null, "parents": [{"sha": "61efc800192945b33cdb2bba51efbdfd133d84d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61efc800192945b33cdb2bba51efbdfd133d84d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61efc800192945b33cdb2bba51efbdfd133d84d4"}], "stats": {"total": 29, "additions": 17, "deletions": 12}, "files": [{"sha": "b34969c714b1debd90e09f274f08eecf53f17b34", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dae1bf4d22414d05d627b3ef619d888d773715b6", "patch": "@@ -1,3 +1,9 @@\n+2005-10-17  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/22551\n+\t* c-common.c (c_add_case_label): Revert my 2005-10-14 clearing of\n+\toverflow flags.\n+\n 2005-10-17  Kaz Kojima  <kkojima@gcc.gnu.org>\n \n \t* config/sh/sh.h (OPTIMIZATION_OPTIONS): Set flag_schedule_insns"}, {"sha": "86bb1c856cc076d959bae7aa8acb9c4954c5a61e", "filename": "gcc/c-common.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=dae1bf4d22414d05d627b3ef619d888d773715b6", "patch": "@@ -3590,18 +3590,13 @@ c_add_case_label (splay_tree cases, tree cond, tree orig_type,\n       low_value = convert_and_check (type, low_value);\n       if (low_value == error_mark_node)\n \tgoto error_out;\n-      /* Do not propagate any overflow information past this point.\n-\t It is safe to just clear the flags, as any constants with\n-\t them set will not be shared.  */\n-      TREE_CONSTANT_OVERFLOW (low_value) = TREE_OVERFLOW (low_value) = 0;\n     }\n   if (high_value)\n     {\n       high_value = check_case_value (high_value);\n       high_value = convert_and_check (type, high_value);\n       if (high_value == error_mark_node)\n \tgoto error_out;\n-      TREE_CONSTANT_OVERFLOW (high_value) = TREE_OVERFLOW (high_value) = 0;\n     }\n \n   if (low_value && high_value)"}, {"sha": "e17dc16bf02f44cf74cffe3ed00e9e3ebd33d1f7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dae1bf4d22414d05d627b3ef619d888d773715b6", "patch": "@@ -1,5 +1,8 @@\n 2005-10-17  Nathan Sidwell  <nathan@codesourcery.com>\n \n+\tPR c++/22551\n+\t* g++.dg/other/switch2.C: Remove expected warnings.\n+\n \tPR c++/21353\n \t* g++.dg/template/defarg6.C: New.\n "}, {"sha": "6994e2a39bb5f6fa1b1155314d50116eb6720af6", "filename": "gcc/testsuite/g++.dg/other/switch2.C", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fswitch2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dae1bf4d22414d05d627b3ef619d888d773715b6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fswitch2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fswitch2.C?ref=dae1bf4d22414d05d627b3ef619d888d773715b6", "patch": "@@ -4,7 +4,7 @@\n // PR 22551:ICE\n // Origin:  Johnny Casey <emailwastefilter-bugzillagccorg@yahoo.com>\n \n-const int B = 0x80000000;\n+const int B = ~(~0u >> 1);\n \n #define b(x) (B + x)\n \n@@ -13,10 +13,11 @@ int Foo (int error)\n {\n   switch (error)\n   {\n-  case b (1): return 0; // { dg-error \"overflow\" \"\" }\n-  case b (2): return 0; // { dg-error \"overflow\" \"\" }\n-  case b (3): return 0; // { dg-error \"overflow\" \"\" }\n-  case b (4): return 0; // { dg-error \"overflow\" \"\" }\n-  case b (5): return 0; // { dg-error \"overflow\" \"\" }\n- }\n+  case b (1): return 0;\n+  case b (2): return 0;\n+  case b (3): return 0;\n+  case b (4): return 0;\n+  case b (5): return 0;\n+  }\n+  return 0;\n }"}]}