{"sha": "48e5d11979af0dd03c54623faffddc5f0c3c1741", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDhlNWQxMTk3OWFmMGRkMDNjNTQ2MjNmYWZmZGRjNWYwYzNjMTc0MQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2011-04-29T22:03:40Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-04-29T22:03:40Z"}, "message": "re PR c++/48606 (g++.dg/init/ctor9.C ICE: tree check: expected class 'type', have 'exceptional' (error_mark) with -fkeep-inline-functions)\n\n/cp\n2011-04-29  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/48606\n\t* init.c (perform_member_init): Check build_value_init return\n\tvalue for error_mark_node.\n\n/testsuite\n2011-04-29  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/48606\n\t* g++.dg/init/ctor10.C: New.\n\nFrom-SVN: r173194", "tree": {"sha": "4303b30e583abeff4c47262505046c90b9a0162a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4303b30e583abeff4c47262505046c90b9a0162a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/48e5d11979af0dd03c54623faffddc5f0c3c1741", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48e5d11979af0dd03c54623faffddc5f0c3c1741", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48e5d11979af0dd03c54623faffddc5f0c3c1741", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48e5d11979af0dd03c54623faffddc5f0c3c1741/comments", "author": null, "committer": null, "parents": [{"sha": "b15c64ee1aafcb68df59ecc46bd2c799d7618160", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b15c64ee1aafcb68df59ecc46bd2c799d7618160", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b15c64ee1aafcb68df59ecc46bd2c799d7618160"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "55ba50bf93f6dcd1fe1b107dd51431d5ab47a009", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=48e5d11979af0dd03c54623faffddc5f0c3c1741", "patch": "@@ -1,3 +1,9 @@\n+2011-04-29  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/48606\n+\t* init.c (perform_member_init): Check build_value_init return\n+\tvalue for error_mark_node.\n+\n 2011-04-29  Nicola Pero  <nicola.pero@meta-innovation.com>,\n \t    Mike Stump <mikestump@comcast.net>\n "}, {"sha": "d8b19c7491ee2580a923cbd6260ecb2b5ccf36d9", "filename": "gcc/cp/init.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=48e5d11979af0dd03c54623faffddc5f0c3c1741", "patch": "@@ -513,8 +513,10 @@ perform_member_init (tree member, tree init)\n \t}\n       else\n \t{\n-\t  init = build2 (INIT_EXPR, type, decl,\n-\t\t\t build_value_init (type, tf_warning_or_error));\n+\t  tree value = build_value_init (type, tf_warning_or_error);\n+\t  if (value == error_mark_node)\n+\t    return;\n+\t  init = build2 (INIT_EXPR, type, decl, value);\n \t  finish_expr_stmt (init);\n \t}\n     }"}, {"sha": "873e368c163190fda2546e240cfb7ecb100ea5ce", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=48e5d11979af0dd03c54623faffddc5f0c3c1741", "patch": "@@ -1,3 +1,8 @@\n+2011-04-29  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/48606\n+\t* g++.dg/init/ctor10.C: New.\n+\n 2011-04-29  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/48462"}, {"sha": "91cc25012090da1deae1dca79189f58216359764", "filename": "gcc/testsuite/g++.dg/init/ctor10.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fctor10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/48e5d11979af0dd03c54623faffddc5f0c3c1741/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fctor10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finit%2Fctor10.C?ref=48e5d11979af0dd03c54623faffddc5f0c3c1741", "patch": "@@ -0,0 +1,9 @@\n+// PR c++/48606\n+// { dg-do compile }\n+// { dg-options \"-fkeep-inline-functions\" }\n+\n+struct S\n+{\n+  int &ref;\n+  S() : ref() {};\t// { dg-error \"value-initialization of\" }\n+};"}]}