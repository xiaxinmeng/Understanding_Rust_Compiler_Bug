{"sha": "7303f45c7544c9bdca4911c7bea78c8fa6986800", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzMwM2Y0NWM3NTQ0YzliZGNhNDkxMWM3YmVhNzhjOGZhNjk4NjgwMA==", "commit": {"author": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1996-04-26T21:36:40Z"}, "committer": {"name": "Jason Merrill", "email": "merrill@gnu.org", "date": "1996-04-26T21:36:40Z"}, "message": "Fixes\n\nFrom-SVN: r11897", "tree": {"sha": "7b167249ae9595e4d67de4f250900145b4670ae2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b167249ae9595e4d67de4f250900145b4670ae2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7303f45c7544c9bdca4911c7bea78c8fa6986800", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7303f45c7544c9bdca4911c7bea78c8fa6986800", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7303f45c7544c9bdca4911c7bea78c8fa6986800", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7303f45c7544c9bdca4911c7bea78c8fa6986800/comments", "author": null, "committer": null, "parents": [{"sha": "637166fe38d18739525dd29ce586c188457efa14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/637166fe38d18739525dd29ce586c188457efa14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/637166fe38d18739525dd29ce586c188457efa14"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "d42bc926c3827c6b8ad9f576d256ac35d5f08432", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7303f45c7544c9bdca4911c7bea78c8fa6986800/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7303f45c7544c9bdca4911c7bea78c8fa6986800/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=7303f45c7544c9bdca4911c7bea78c8fa6986800", "patch": "@@ -2979,7 +2979,7 @@ finish_file ()\n \t{\n \t  temp = build_cleanup (decl);\n \n-\t  if (DECL_COMMON (decl))\n+\t  if (DECL_COMMON (decl) && TREE_PUBLIC (decl))\n \t    {\n \t      tree sentry = get_sentry (DECL_ASSEMBLER_NAME (decl));\n \t      sentry = build_unary_op (PREDECREMENT_EXPR, sentry, 0);\n@@ -2989,7 +2989,7 @@ finish_file ()\n \n \t  expand_expr_stmt (temp);\n \n-\t  if (DECL_COMMON (decl))\n+\t  if (DECL_COMMON (decl) && TREE_PUBLIC (decl))\n \t    expand_end_cond ();\n \t}\n     }\n@@ -3048,10 +3048,7 @@ finish_file ()\n \t      || DECL_EXTERNAL (decl)\n \t      || (init && TREE_CODE (init) == TREE_LIST\n \t\t  && value_member (error_mark_node, init)))\n-\t    {\n-\t      vars = TREE_CHAIN (vars);\n-\t      goto next_mess;\n-\t    }\n+\t    goto next_mess;\n \n \t  if (TREE_CODE (decl) == VAR_DECL)\n \t    {\n@@ -3066,7 +3063,7 @@ finish_file ()\n \t      DECL_CLASS_CONTEXT (current_function_decl) = DECL_CONTEXT (decl);\n \t      DECL_STATIC_FUNCTION_P (current_function_decl) = 1;\n \n-\t      if (DECL_COMMON (decl))\n+\t      if (DECL_COMMON (decl) && TREE_PUBLIC (decl))\n \t\t{\n \t\t  tree sentry = get_sentry (DECL_ASSEMBLER_NAME (decl));\n \t\t  sentry = build_unary_op (PREINCREMENT_EXPR, sentry, 0);\n@@ -3088,7 +3085,7 @@ finish_file ()\n \t      else\n \t\texpand_assignment (decl, init, 0, 0);\n \n-\t      if (DECL_COMMON (decl))\n+\t      if (DECL_COMMON (decl) && TREE_PUBLIC (decl))\n \t\texpand_end_cond ();\n \n \t      DECL_CLASS_CONTEXT (current_function_decl) = NULL_TREE;"}]}