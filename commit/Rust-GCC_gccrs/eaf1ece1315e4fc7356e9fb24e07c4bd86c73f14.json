{"sha": "eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWFmMWVjZTEzMTVlNGZjNzM1NmU5ZmIyNGUwN2M0YmQ4NmM3M2YxNA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-09-20T15:17:41Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-09-20T15:17:41Z"}, "message": "re PR c++/77638 (ICE on x86_64-linux-gnu (internal compiler error: tree check: expected tree that contains \u2018decl common\u2019 structure, have \u2018error_mark\u2019 in cp_parser_template_declaration_after_parameters, at cp/parser.c:25722))\n\n\tPR c++/77638\n\t* parser.c (cp_parser_template_declaration_after_parameter): For 2\n\targument operator\"\" template set ok to false for\n\tparm == error_mark_node.\n\n\t* g++.dg/cpp0x/udlit-tmpl-arg-neg2.C: New test.\n\nFrom-SVN: r240266", "tree": {"sha": "7d5967c69ac06d2e7a5f0e9354b946b4a56ee352", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7d5967c69ac06d2e7a5f0e9354b946b4a56ee352"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "590b62e90d6d86e68442ffa608c7c6e5653736d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/590b62e90d6d86e68442ffa608c7c6e5653736d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/590b62e90d6d86e68442ffa608c7c6e5653736d5"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "5efc79522befdee9701538f57ac5b4ac007f4458", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "patch": "@@ -1,5 +1,10 @@\n 2016-09-20  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/77638\n+\t* parser.c (cp_parser_template_declaration_after_parameter): For 2\n+\targument operator\"\" template set ok to false for\n+\tparm == error_mark_node.\n+\n \tPR c++/77637\n \t* parser.c (cp_parser_std_attribute_list): Reject ... without\n \tpreceding attribute."}, {"sha": "168486c741c7a37869eb336b9b7fded40eec3028", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "patch": "@@ -25723,7 +25723,8 @@ cp_parser_template_declaration_after_parameters (cp_parser* parser,\n \t      tree type = INNERMOST_TEMPLATE_PARMS (parm_type);\n \t      tree parm_list = TREE_VEC_ELT (parameter_list, 1);\n \t      tree parm = INNERMOST_TEMPLATE_PARMS (parm_list);\n-\t      if (TREE_TYPE (parm) != TREE_TYPE (type)\n+\t      if (parm == error_mark_node\n+\t\t  || TREE_TYPE (parm) != TREE_TYPE (type)\n \t\t  || !TEMPLATE_PARM_PARAMETER_PACK (DECL_INITIAL (parm)))\n \t\tok = false;\n \t    }"}, {"sha": "8ffa014add7daf84e639416491a924e41929b918", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "patch": "@@ -1,5 +1,8 @@\n 2016-09-20  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/77638\n+\t* g++.dg/cpp0x/udlit-tmpl-arg-neg2.C: New test.\n+\n \tPR c++/77637\n \t* g++.dg/cpp0x/gen-attrs-62.C: New test.\n "}, {"sha": "c426e0e4d85ec77521d2529dc8c584b463156dbd", "filename": "gcc/testsuite/g++.dg/cpp0x/udlit-tmpl-arg-neg2.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-arg-neg2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-arg-neg2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fudlit-tmpl-arg-neg2.C?ref=eaf1ece1315e4fc7356e9fb24e07c4bd86c73f14", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/77638\n+// { dg-do compile { target c++11 } }\n+\n+template <T, T... U>\t\t// { dg-error \"'T' has not been declared\" }\n+int operator\"\" _foo ();\t\t// { dg-error \"has invalid parameter list\" }\n+template <T... U>\t\t// { dg-error \"'T' has not been declared\" }\n+int operator\"\" _bar ();\t\t// { dg-error \"has invalid parameter list\" }"}]}