{"sha": "75d2cf695f0ad555d6e37a95bbb4d186c78c58d6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzVkMmNmNjk1ZjBhZDU1NWQ2ZTM3YTk1YmJiNGQxODZjNzhjNThkNg==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2005-07-31T20:36:47Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2005-07-31T20:36:47Z"}, "message": "trans-stmt.c (gfc_trans_goto): Jump to the known label instead of the assigned goto variable.\n\n\t* trans-stmt.c (gfc_trans_goto): Jump to the known label instead\n\tof the assigned goto variable.\n\nFrom-SVN: r102607", "tree": {"sha": "9b75890b2b738049291b05d366a16111ed46b33b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b75890b2b738049291b05d366a16111ed46b33b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6/comments", "author": null, "committer": null, "parents": [{"sha": "7dcbf65993ee71dd17805df86bbff9d7a8716258", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dcbf65993ee71dd17805df86bbff9d7a8716258", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dcbf65993ee71dd17805df86bbff9d7a8716258"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "f64e743aff9392f929ee71a9cc97ae460e3b2566", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=75d2cf695f0ad555d6e37a95bbb4d186c78c58d6", "patch": "@@ -1,3 +1,8 @@\n+2005-07-31  Steven Bosscher  <stevenb@suse.de>\n+\n+\t* trans-stmt.c (gfc_trans_goto): Jump to the known label instead\n+\tof the assigned goto variable.\n+\n 2005-07-29  Steven Bosscher  <stevenb@suse.de>\n \n \t* trans-types.h (gfc_array_range_type): Add missing GTY decl for this."}, {"sha": "72407ae44254ec1123040c9e877eed3fafb03efa", "filename": "gcc/fortran/trans-stmt.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6/gcc%2Ffortran%2Ftrans-stmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75d2cf695f0ad555d6e37a95bbb4d186c78c58d6/gcc%2Ffortran%2Ftrans-stmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-stmt.c?ref=75d2cf695f0ad555d6e37a95bbb4d186c78c58d6", "patch": "@@ -163,11 +163,11 @@ gfc_trans_goto (gfc_code * code)\n   gfc_trans_runtime_check (tmp, assign_error, &se.pre);\n \n   assigned_goto = GFC_DECL_ASSIGN_ADDR (se.expr);\n-  target = build1 (GOTO_EXPR, void_type_node, assigned_goto);\n \n   code = code->block;\n   if (code == NULL)\n     {\n+      target = build1 (GOTO_EXPR, void_type_node, assigned_goto);\n       gfc_add_expr_to_block (&se.pre, target);\n       return gfc_finish_block (&se.pre);\n     }\n@@ -177,10 +177,12 @@ gfc_trans_goto (gfc_code * code)\n \n   do\n     {\n-      tmp = gfc_get_label_decl (code->label);\n-      tmp = gfc_build_addr_expr (pvoid_type_node, tmp);\n+      target = gfc_get_label_decl (code->label);\n+      tmp = gfc_build_addr_expr (pvoid_type_node, target);\n       tmp = build2 (EQ_EXPR, boolean_type_node, tmp, assigned_goto);\n-      tmp = build3_v (COND_EXPR, tmp, target, build_empty_stmt ());\n+      tmp = build3_v (COND_EXPR, tmp,\n+\t\t      build1 (GOTO_EXPR, void_type_node, target),\n+\t\t      build_empty_stmt ());\n       gfc_add_expr_to_block (&se.pre, tmp);\n       code = code->block;\n     }"}]}