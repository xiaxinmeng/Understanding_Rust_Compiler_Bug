{"sha": "ea2417e542d859a7f7e33488a00b36d237165b60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWEyNDE3ZTU0MmQ4NTlhN2Y3ZTMzNDg4YTAwYjM2ZDIzNzE2NWI2MA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2001-11-28T19:49:00Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2001-11-28T19:49:00Z"}, "message": "misc.c (gnat_expand_constant): Move declaration above definition of lang_hooks.\n\n\t* misc.c (gnat_expand_constant): Move declaration above\n\tdefinition of lang_hooks.\n\t(LANG_HOOKS_EXPAND_CONSTANT): Set to gnat_expand_constant.\n\t(gnat_init): lang_expand_constant no longer exists.\n\n\t(internal_error_function): Remove #ifdef HAVE_VPRINTF.  We\n\talways have vprintf.\n\t(gnat_init): Always call set_internal_error_function.\n\nFrom-SVN: r47426", "tree": {"sha": "7e4bfd74bf8acb63ff5968470264a399e4ee0de9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e4bfd74bf8acb63ff5968470264a399e4ee0de9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea2417e542d859a7f7e33488a00b36d237165b60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea2417e542d859a7f7e33488a00b36d237165b60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea2417e542d859a7f7e33488a00b36d237165b60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea2417e542d859a7f7e33488a00b36d237165b60/comments", "author": null, "committer": null, "parents": [{"sha": "6dafbab7e5febd9324c3f2bb919bb8b287fddf1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6dafbab7e5febd9324c3f2bb919bb8b287fddf1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6dafbab7e5febd9324c3f2bb919bb8b287fddf1d"}], "stats": {"total": 27, "additions": 16, "deletions": 11}, "files": [{"sha": "74a6e757f76dceb4c8eb20a48257f8d40b09e3e8", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea2417e542d859a7f7e33488a00b36d237165b60/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea2417e542d859a7f7e33488a00b36d237165b60/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ea2417e542d859a7f7e33488a00b36d237165b60", "patch": "@@ -1,3 +1,14 @@\n+2001-11-28  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* misc.c (gnat_expand_constant): Move declaration above\n+\tdefinition of lang_hooks.\n+\t(LANG_HOOKS_EXPAND_CONSTANT): Set to gnat_expand_constant.\n+\t(gnat_init): lang_expand_constant no longer exists.\n+\n+\t(internal_error_function): Remove #ifdef HAVE_VPRINTF.  We\n+\talways have vprintf.\n+\t(gnat_init): Always call set_internal_error_function.\n+\n 2001-11-27  Andreas Jaeger  <aj@suse.de>\n \n \t* Makefile.in (stamp-tool_src_dir): Use symbolic link."}, {"sha": "f3c9cbce2040f91ec28528a28a78da91be42a09d", "filename": "gcc/ada/misc.c", "status": "modified", "additions": 5, "deletions": 11, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea2417e542d859a7f7e33488a00b36d237165b60/gcc%2Fada%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea2417e542d859a7f7e33488a00b36d237165b60/gcc%2Fada%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmisc.c?ref=ea2417e542d859a7f7e33488a00b36d237165b60", "patch": "@@ -6,7 +6,7 @@\n  *                                                                          *\n  *                           C Implementation File                          *\n  *                                                                          *\n- *                             $Revision: 1.12 $\n+ *                             $Revision: 1.13 $\n  *                                                                          *\n  *          Copyright (C) 1992-2001 Free Software Foundation, Inc.          *\n  *                                                                          *\n@@ -116,6 +116,7 @@ static HOST_WIDE_INT gnat_get_alias_set\tPARAMS ((tree));\n static void gnat_print_decl\t\tPARAMS ((FILE *, tree, int));\n static void gnat_print_type\t\tPARAMS ((FILE *, tree, int));\n extern void gnat_init_decl_processing\tPARAMS ((void));\n+static tree gnat_expand_constant\tPARAMS ((tree));\n \n /* Structure giving our language-specific hooks.  */\n \n@@ -137,6 +138,8 @@ extern void gnat_init_decl_processing\tPARAMS ((void));\n #define LANG_HOOKS_PRINT_DECL\t\tgnat_print_decl\n #undef LANG_HOOKS_PRINT_TYPE\n #define LANG_HOOKS_PRINT_TYPE\t\tgnat_print_type\n+#undef LANG_HOOKS_EXPAND_CONSTANT\n+#define LANG_HOOKS_EXPAND_CONSTANT\tgnat_expand_constant\n \n const struct lang_hooks lang_hooks = LANG_HOOKS_INITIALIZER;\n \n@@ -153,7 +156,6 @@ int ggc_p = 1;\n static void internal_error_function\tPARAMS ((const char *, va_list *));\n static rtx gnat_expand_expr\t\tPARAMS ((tree, rtx, enum machine_mode,\n \t\t\t\t\t\t enum expand_modifier));\n-static tree gnat_expand_constant\tPARAMS ((tree));\n static void gnat_adjust_rli\t\tPARAMS ((record_layout_info));\n \n #if defined(MIPS_DEBUGGING_INFO) && defined(DWARF2_DEBUGGING_INFO)\n@@ -307,11 +309,7 @@ lang_mark_tree (t)\n     }\n }\n \n-/* Here we have the function to handle the compiler error processing in GCC.\n-   Do this only if VPRINTF is available.  */\n-\n-#if defined(HAVE_VPRINTF)\n-#define DO_INTERNAL_ERROR_FUNCTION\n+/* Here we have the function to handle the compiler error processing in GCC.  */\n \n static void\n internal_error_function (msgid, ap)\n@@ -339,7 +337,6 @@ internal_error_function (msgid, ap)\n   Current_Error_Node = error_gnat_node;\n   Compiler_Abort (fp, -1);\n }\n-#endif\n \n /* Perform all the initialization steps that are language-specific.  */\n \n@@ -354,7 +351,6 @@ gnat_init (filename)\n    it, but it's where g++ does it.  */\n \n   lang_expand_expr = gnat_expand_expr;\n-  lang_expand_constant = gnat_expand_constant;\n \n   memcpy ((char *) (tree_code_type + (int) LAST_AND_UNUSED_TREE_CODE),\n \t  (char *) gnat_tree_code_type,\n@@ -378,9 +374,7 @@ gnat_init (filename)\n   gnat_argc++;\n   gnat_argv [gnat_argc] = 0;\n \n-#ifdef DO_INTERNAL_ERROR_FUNCTION\n   set_internal_error_function (internal_error_function);\n-#endif\n \n   /* Show that REFERENCE_TYPEs are internal and should be Pmode.  */\n   internal_reference_types ();"}]}