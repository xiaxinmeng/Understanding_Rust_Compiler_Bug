{"sha": "ed044066ac73d9678ae8fabc141f647b54ed91c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQwNDQwNjZhYzczZDk2NzhhZThmYWJjMTQxZjY0N2I1NGVkOTFjMg==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.ibm.com", "date": "2018-06-21T22:55:50Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2018-06-21T22:55:50Z"}, "message": "rs6000.c (init_float128_ieee): Prevent complex multiply and divide external functions from being created more...\n\n2018-06-23  Michael Meissner  <meissner@linux.ibm.com>\n\n\t* config/rs6000/rs6000.c (init_float128_ieee): Prevent complex\n\tmultiply and divide external functions from being created more\n\tthan once.\n\nFrom-SVN: r261870", "tree": {"sha": "ef7e7a21dbe8d67f00a1bed7a972aa2a61d06434", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef7e7a21dbe8d67f00a1bed7a972aa2a61d06434"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed044066ac73d9678ae8fabc141f647b54ed91c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed044066ac73d9678ae8fabc141f647b54ed91c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed044066ac73d9678ae8fabc141f647b54ed91c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed044066ac73d9678ae8fabc141f647b54ed91c2/comments", "author": null, "committer": null, "parents": [{"sha": "e8ccf824115b6671d3ad62e26e8e9d8ee2884d50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8ccf824115b6671d3ad62e26e8e9d8ee2884d50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8ccf824115b6671d3ad62e26e8e9d8ee2884d50"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "9fdd3e62a0ecb5c2acf084b24fe6a0ab3386cf5a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed044066ac73d9678ae8fabc141f647b54ed91c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed044066ac73d9678ae8fabc141f647b54ed91c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed044066ac73d9678ae8fabc141f647b54ed91c2", "patch": "@@ -5,6 +5,9 @@\n \tIEEE 128-bit long double.\n \t(neg<mode>2_internal): Use the correct mode to check whether the\n \tmode is IBM extended.\n+\t* config/rs6000/rs6000.c (init_float128_ieee): Prevent complex\n+\tmultiply and divide external functions from being created more\n+\tthan once.\n \n 2018-06-21  Eric Botcazou  <ebotcazou@adacore.com>\n "}, {"sha": "3cc64456a3ed86f7236ef038a97b9d1431f21f59", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed044066ac73d9678ae8fabc141f647b54ed91c2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed044066ac73d9678ae8fabc141f647b54ed91c2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=ed044066ac73d9678ae8fabc141f647b54ed91c2", "patch": "@@ -17892,9 +17892,14 @@ init_float128_ieee (machine_mode mode)\n {\n   if (FLOAT128_VECTOR_P (mode))\n     {\n-      /* Set up to call __mulkc3 and __divkc3 under -mabi=ieeelongdouble.  */\n-     if (mode == TFmode && TARGET_IEEEQUAD)\n+      static bool complex_muldiv_init_p = false;\n+\n+      /* Set up to call __mulkc3 and __divkc3 under -mabi=ieeelongdouble.  If\n+\t we have clone or target attributes, this will be called a second\n+\t time.  We want to create the built-in function only once.  */\n+     if (mode == TFmode && TARGET_IEEEQUAD && !complex_muldiv_init_p)\n        {\n+\t complex_muldiv_init_p = true;\n \t built_in_function fncode_mul =\n \t   (built_in_function) (BUILT_IN_COMPLEX_MUL_MIN + TCmode\n \t\t\t\t- MIN_MODE_COMPLEX_FLOAT);"}]}