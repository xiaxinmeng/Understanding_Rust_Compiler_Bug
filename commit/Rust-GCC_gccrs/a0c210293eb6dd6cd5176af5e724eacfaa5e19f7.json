{"sha": "a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTBjMjEwMjkzZWI2ZGQ2Y2Q1MTc2YWY1ZTcyNGVhY2ZhYTVlMTlmNw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-03-31T10:42:56Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-03-31T10:42:56Z"}, "message": "sysv4.h (PUSHSECTION_FORMAT): Remove undef.\n\n\t* config/sparc/sysv4.h (PUSHSECTION_FORMAT): Remove undef.\n\t(PUSHSECTION_ASM_OP): Remove.\n\t(POPSECTION_ASM_OP): Remove.\n\t(PUSHSECTION_FORMAT): Remove.\n\t* config/sol2.h (PUSHSECTION_FORMAT): Define.\n\t* config/sparc/sol2.h [!USE_GAS] (PUSHSECTION_FORMAT): Redefine.\n\t* config/sol2.c (solaris_output_init_fini): Use it.\n\nFrom-SVN: r157861", "tree": {"sha": "56b3c89e38ee32ccfa037993c047f9f85ddcdd72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56b3c89e38ee32ccfa037993c047f9f85ddcdd72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a3f410a2146cce18fc027f8cb3ad1496cb4a64ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3f410a2146cce18fc027f8cb3ad1496cb4a64ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3f410a2146cce18fc027f8cb3ad1496cb4a64ac"}], "stats": {"total": 35, "additions": 24, "deletions": 11}, "files": [{"sha": "8d7b219259a223a948bc05d96cc22f96c98cea07", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "patch": "@@ -1,3 +1,13 @@\n+2010-03-31  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* config/sparc/sysv4.h (PUSHSECTION_FORMAT): Remove undef.\n+\t(PUSHSECTION_ASM_OP): Remove.\n+\t(POPSECTION_ASM_OP): Remove.\n+\t(PUSHSECTION_FORMAT): Remove.\n+\t* config/sol2.h (PUSHSECTION_FORMAT): Define.\n+\t* config/sparc/sol2.h [!USE_GAS] (PUSHSECTION_FORMAT): Redefine.\n+\t* config/sol2.c (solaris_output_init_fini): Use it.\n+\n 2010-03-31  Jie Zhang  <jie@codesourcery.com>\n \n \tPR 43574"}, {"sha": "32fa4f354f2171d5281fcb6665f79a558e7fdf77", "filename": "gcc/config/sol2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsol2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsol2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsol2.c?ref=a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "patch": "@@ -105,14 +105,14 @@ solaris_output_init_fini (FILE *file, tree decl)\n {\n   if (lookup_attribute (\"init\", DECL_ATTRIBUTES (decl)))\n     {\n-      fprintf (file, \"\\t.pushsection\\t\\\".init\\\"\\n\");\n+      fprintf (file, PUSHSECTION_FORMAT, \".init\");\n       ASM_OUTPUT_CALL (file, decl);\n       fprintf (file, \"\\t.popsection\\n\");\n     }\n \n   if (lookup_attribute (\"fini\", DECL_ATTRIBUTES (decl)))\n     {\n-      fprintf (file, \"\\t.pushsection\\t\\\".fini\\\"\\n\");\n+      fprintf (file, PUSHSECTION_FORMAT, \".fini\");\n       ASM_OUTPUT_CALL (file, decl);\n       fprintf (file, \"\\t.popsection\\n\");\n     }"}, {"sha": "8f24bc745f30fceb5d012abae4d92d5a45967cd2", "filename": "gcc/config/sol2.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsol2.h?ref=a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "patch": "@@ -254,6 +254,10 @@ __enable_execute_stack (void *addr)\t\t\t\t\t\\\n   { \"init\",      0, 0, true,  false,  false, NULL },\t\t\t\\\n   { \"fini\",      0, 0, true,  false,  false, NULL }\n \n+/* Solaris/x86 as and gas support the common ELF .section/.pushsection\n+   syntax.  */\n+#define PUSHSECTION_FORMAT\t\"\\t.pushsection\\t%s\\n\"\n+\n /* This is how to declare the size of a function.  For Solaris, we output\n    any .init or .fini entries here.  */\n #undef ASM_DECLARE_FUNCTION_SIZE"}, {"sha": "a341bcfd30b4e457823544da1714dde57a73abe4", "filename": "gcc/config/sparc/sol2.h", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsparc%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsparc%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsol2.h?ref=a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "patch": "@@ -1,6 +1,6 @@\n /* Definitions of target machine for GCC, for SPARC running Solaris 2\n    Copyright 1992, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2004, 2005,\n-   2006, 2007, 2008 Free Software Foundation, Inc.\n+   2006, 2007, 2008, 2010 Free Software Foundation, Inc.\n    Contributed by Ron Guilmette (rfg@netcom.com).\n    Additional changes by David V. Henkel-Wallace (gumby@cygnus.com).\n \n@@ -181,4 +181,11 @@ along with GCC; see the file COPYING3.  If not see\n #undef TARGET_ASM_NAMED_SECTION\n #define TARGET_ASM_NAMED_SECTION sparc_solaris_elf_asm_named_section\n \n+/* Solaris/SPARC as uses a non-standard .section/.pushsection syntax.\n+   While gas supports it, too, we prefer the standard variant.  */\n+#ifndef USE_GAS\n+#undef PUSHSECTION_FORMAT\n+#define PUSHSECTION_FORMAT\t\"\\t.pushsection\\t\\\"%s\\\"\\n\"\n+#endif\n+\n #define MD_UNWIND_SUPPORT \"config/sparc/sol2-unwind.h\""}, {"sha": "542f7c1b0550faba53dc4ae748fb2873cd781e58", "filename": "gcc/config/sparc/sysv4.h", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsparc%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a0c210293eb6dd6cd5176af5e724eacfaa5e19f7/gcc%2Fconfig%2Fsparc%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsysv4.h?ref=a0c210293eb6dd6cd5176af5e724eacfaa5e19f7", "patch": "@@ -42,7 +42,6 @@ along with GCC; see the file COPYING3.  If not see\n #undef FINI_SECTION_ASM_OP\n #undef READONLY_DATA_SECTION_ASM_OP\n #undef TYPE_OPERAND_FMT\n-#undef PUSHSECTION_FORMAT\n #undef STRING_ASM_OP\n #undef COMMON_ASM_OP\n #undef SKIP_ASM_OP\n@@ -63,19 +62,12 @@ along with GCC; see the file COPYING3.  If not see\n #define STRING_ASM_OP\t\t\"\\t.asciz\\t\"\n #define COMMON_ASM_OP\t\t\"\\t.common\\t\"\n #define SKIP_ASM_OP\t\t\"\\t.skip\\t\"\n-#define PUSHSECTION_ASM_OP\t\"\\t.pushsection\\t\"\n-#define POPSECTION_ASM_OP\t\"\\t.popsection\"\n \n /* This is the format used to print the second operand of a .type pseudo-op\n    for the SPARC/svr4 assembler.  */\n \n #define TYPE_OPERAND_FMT      \"#%s\"\n \n-/* This is the format used to print a .pushsection pseudo-op (and its operand)\n-   for the SPARC/svr4 assembler.  */\n-\n-#define PUSHSECTION_FORMAT\t\"%s\\\"%s\\\"\\n\"\n-\n #undef ASM_OUTPUT_CASE_LABEL\n #define ASM_OUTPUT_CASE_LABEL(FILE, PREFIX, NUM, JUMPTABLE)\t\t\\\n do { ASM_OUTPUT_ALIGN ((FILE), Pmode == SImode ? 2 : 3);\t\t\\"}]}