{"sha": "854376338b6b291fddd35507f05838792b91ea58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODU0Mzc2MzM4YjZiMjkxZmRkZDM1NTA3ZjA1ODM4NzkyYjkxZWE1OA==", "commit": {"author": {"name": "Andreas Simbuerger", "email": "simbuerg@fim.uni-passau.de", "date": "2010-08-11T20:30:56Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-08-11T20:30:56Z"}, "message": "Remove cloog_initialize and cloog_finalize when using official CLooG releases.\n\nThis requires to initialize the Parma Polyhedra Library by graphite,\nas newer CLooG versions are not bound to a PPL backend.\n\n2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n\n\t* graphite.c (graphite_initialize): Do not initialize\n\tCLooG and initialize the Parma Polyhedra Library\n\tmanually when using CLOOG_ORG.\n\t(graphite_finalize): Do not finalize CLooG and finalize\n\tthe Parma Polyhedra Library manually when using CLOOG_ORG.\n\t* graphite-cloog-compat.h (cloog_initialize): Hide function\n\twhen using CLOOG_ORG.\n\t(cloog_finalize): Same.\n\nFrom-SVN: r163166", "tree": {"sha": "075b4a5d95555b415291d963c6124b626b310ff3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/075b4a5d95555b415291d963c6124b626b310ff3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/854376338b6b291fddd35507f05838792b91ea58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/854376338b6b291fddd35507f05838792b91ea58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/854376338b6b291fddd35507f05838792b91ea58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/854376338b6b291fddd35507f05838792b91ea58/comments", "author": {"login": "simbuerg", "id": 598281, "node_id": "MDQ6VXNlcjU5ODI4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/598281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simbuerg", "html_url": "https://github.com/simbuerg", "followers_url": "https://api.github.com/users/simbuerg/followers", "following_url": "https://api.github.com/users/simbuerg/following{/other_user}", "gists_url": "https://api.github.com/users/simbuerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/simbuerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simbuerg/subscriptions", "organizations_url": "https://api.github.com/users/simbuerg/orgs", "repos_url": "https://api.github.com/users/simbuerg/repos", "events_url": "https://api.github.com/users/simbuerg/events{/privacy}", "received_events_url": "https://api.github.com/users/simbuerg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1461761bf95367ca1577650c885b022e01c47c5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1461761bf95367ca1577650c885b022e01c47c5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1461761bf95367ca1577650c885b022e01c47c5f"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "cf92a9466300e366b996b63e0ccccf049be7dc46", "filename": "gcc/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/854376338b6b291fddd35507f05838792b91ea58/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/854376338b6b291fddd35507f05838792b91ea58/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=854376338b6b291fddd35507f05838792b91ea58", "patch": "@@ -1,3 +1,22 @@\n+2010-08-02  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n+\n+\t* graphite-cloog-util.c (oppose_constraint):\n+\tExtend loop counter's value range (CLOOG_ORG).\n+\t(cloog_matrix_to_ppl_constraint): Same.\n+\t(new_Constraint_System_from_Cloog_matrix): Same.\n+\t* graphite-cloog-compat.h (matrix_num_type): New.\n+\n+2010-08-02  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n+\n+\t* graphite.c (graphite_initialize): Do not initialize\n+\tCLooG and initialize the Parma Polyhedra Library\n+\tmanually when using CLOOG_ORG.\n+\t(graphite_finalize): Do not finalize CLooG and finalize\n+\tthe Parma Polyhedra Library manually when using CLOOG_ORG.\n+\t* graphite-cloog-compat.h (cloog_initialize): Hide function\n+\twhen using CLOOG_ORG.\n+\t(cloog_finalize): Same.\n+\n 2010-08-02  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n \n \t* graphite-clast-to-gimple.c (free_scattering): Change"}, {"sha": "7a7b02cb4ff6b28eae23acae00dd8b97f488539d", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/854376338b6b291fddd35507f05838792b91ea58/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/854376338b6b291fddd35507f05838792b91ea58/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=854376338b6b291fddd35507f05838792b91ea58", "patch": "@@ -1,5 +1,16 @@\n 2010-07-27  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n \n+\t* graphite.c (graphite_initialize): Do not initialize\n+\tCLooG and initialize the Parma Polyhedra Library\n+\tmanually when using CLOOG_ORG.\n+\t(graphite_finalize): Do not finalize CLooG and finalize\n+\tthe Parma Polyhedra Library manually when using CLOOG_ORG.\n+\t* graphite-cloog-compat.h (cloog_initialize): Hide function\n+\twhen using CLOOG_ORG.\n+\t(cloog_finalize): Same.\n+\n+2010-07-18  Andreas Simbuerger  <simbuerg@fim.uni-passau.de>\n+\n \t* graphite-clast-to-gimple.c (free_scattering): Change\n \tCloogDomainList/CloogDomain to CloogScatteringList/CloogScattering\n \t(CLOOG_ORG)."}, {"sha": "c39b18ea3bcbabeb838355d96347ae972b72cc76", "filename": "gcc/graphite-cloog-compat.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/854376338b6b291fddd35507f05838792b91ea58/gcc%2Fgraphite-cloog-compat.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/854376338b6b291fddd35507f05838792b91ea58/gcc%2Fgraphite-cloog-compat.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-cloog-compat.h?ref=854376338b6b291fddd35507f05838792b91ea58", "patch": "@@ -29,6 +29,11 @@ typedef const struct clast_expr *clast_name_p;\n typedef const char *clast_name_p;\n #endif\n \n+#ifdef CLOOG_ORG\n+#define cloog_initialize()\n+#define cloog_finalize()\n+#endif\n+\n #ifndef CLOOG_ORG\n \n /* CloogOptions compatibility.  */"}, {"sha": "12dbd0c3a1a179ef92e8fa7beffe77c2b80d3b9b", "filename": "gcc/graphite.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/854376338b6b291fddd35507f05838792b91ea58/gcc%2Fgraphite.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/854376338b6b291fddd35507f05838792b91ea58/gcc%2Fgraphite.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite.c?ref=854376338b6b291fddd35507f05838792b91ea58", "patch": "@@ -61,6 +61,7 @@ along with GCC; see the file COPYING3.  If not see\n \n #include \"cloog/cloog.h\"\n #include \"ppl_c.h\"\n+#include \"graphite-cloog-compat.h\"\n #include \"graphite-ppl.h\"\n #include \"graphite.h\"\n #include \"graphite-poly.h\"\n@@ -200,6 +201,8 @@ print_graphite_statistics (FILE* file, VEC (scop_p, heap) *scops)\n static bool\n graphite_initialize (void)\n {\n+  int ppl_initialized;\n+\n   if (number_of_loops () <= 1\n       /* FIXME: This limit on the number of basic blocks of a function\n \t should be removed when the SCOP detection is faster.  */\n@@ -213,6 +216,10 @@ graphite_initialize (void)\n \n   recompute_all_dominators ();\n   initialize_original_copy_tables ();\n+\n+  ppl_initialized = ppl_initialize ();\n+  gcc_assert (ppl_initialized == 0);\n+\n   cloog_initialize ();\n \n   if (dump_file && dump_flags)\n@@ -237,6 +244,7 @@ graphite_finalize (bool need_cfg_cleanup_p)\n     }\n \n   cloog_finalize ();\n+  ppl_finalize ();\n   free_original_copy_tables ();\n \n   if (dump_file && dump_flags)"}]}