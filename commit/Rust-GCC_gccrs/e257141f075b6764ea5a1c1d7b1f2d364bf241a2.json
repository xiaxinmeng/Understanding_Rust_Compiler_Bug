{"sha": "e257141f075b6764ea5a1c1d7b1f2d364bf241a2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTI1NzE0MWYwNzViNjc2NGVhNWExYzFkN2IxZjJkMzY0YmYyNDFhMg==", "commit": {"author": {"name": "Ville Voutilainen", "email": "ville.voutilainen@gmail.com", "date": "2017-06-01T11:09:41Z"}, "committer": {"name": "Ville Voutilainen", "email": "ville@gcc.gnu.org", "date": "2017-06-01T11:09:41Z"}, "message": "re PR c++/80812 (ICE: in build_value_init_noctor, at cp/init.c:483)\n\nPR c++/80812\n\ncp/\n\nPR c++/80812\n* method.c (constructible_expr): Strip array types before calling\nbuild_value_init.\n\nlibstdc++/\n\nPR c++/80812\n* testsuite/20_util/is_constructible/80812.cc: New.\n\nFrom-SVN: r248788", "tree": {"sha": "d0b29da84cf2665ab1bb708eb2416279fe33f6bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0b29da84cf2665ab1bb708eb2416279fe33f6bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e257141f075b6764ea5a1c1d7b1f2d364bf241a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e257141f075b6764ea5a1c1d7b1f2d364bf241a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e257141f075b6764ea5a1c1d7b1f2d364bf241a2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e257141f075b6764ea5a1c1d7b1f2d364bf241a2/comments", "author": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d16708fa186148ca13f375c18e05abb806508eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d16708fa186148ca13f375c18e05abb806508eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d16708fa186148ca13f375c18e05abb806508eb"}], "stats": {"total": 37, "additions": 36, "deletions": 1}, "files": [{"sha": "64f476a218820d031da3c0d1cd9bfb3462d99444", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e257141f075b6764ea5a1c1d7b1f2d364bf241a2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e257141f075b6764ea5a1c1d7b1f2d364bf241a2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=e257141f075b6764ea5a1c1d7b1f2d364bf241a2", "patch": "@@ -1,3 +1,9 @@\n+2017-06-01  Ville Voutilainen  <ville.voutilainen@gmail.com>\n+\n+\tPR c++/80812\n+\t* method.c (constructible_expr): Strip array types before calling\n+\tbuild_value_init.\n+\n 2017-06-01  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/80896"}, {"sha": "aa607d533466fd5ac6359521f0d989ba604ee0ea", "filename": "gcc/cp/method.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e257141f075b6764ea5a1c1d7b1f2d364bf241a2/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e257141f075b6764ea5a1c1d7b1f2d364bf241a2/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=e257141f075b6764ea5a1c1d7b1f2d364bf241a2", "patch": "@@ -1188,7 +1188,7 @@ constructible_expr (tree to, tree from)\n   else\n     {\n       if (from == NULL_TREE)\n-\treturn build_value_init (to, tf_none);\n+\treturn build_value_init (strip_array_types (to), tf_none);\n       else if (TREE_CHAIN (from))\n \treturn error_mark_node; // too many initializers\n       from = build_stub_object (TREE_VALUE (from));"}, {"sha": "17af9aeb61f9a656141e1deb4f618e0087e685ec", "filename": "libstdc++-v3/testsuite/20_util/is_constructible/80812.cc", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e257141f075b6764ea5a1c1d7b1f2d364bf241a2/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fis_constructible%2F80812.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e257141f075b6764ea5a1c1d7b1f2d364bf241a2/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fis_constructible%2F80812.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fis_constructible%2F80812.cc?ref=e257141f075b6764ea5a1c1d7b1f2d364bf241a2", "patch": "@@ -0,0 +1,29 @@\n+// { dg-do compile { target c++11 } }\n+// Copyright (C) 2017 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+//\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+//\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+#include <type_traits>\n+\n+struct X\n+{\n+  X() {}\n+};\n+\n+void test01()\n+{\n+  static_assert(std::is_constructible<X[4]>::value);\n+}"}]}