{"sha": "568fe067bc84a419816b46848bbe44b18cd2c80f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY4ZmUwNjdiYzg0YTQxOTgxNmI0Njg0OGJiZTQ0YjE4Y2QyYzgwZg==", "commit": {"author": {"name": "Anthony Green", "email": "green@cygnus.com", "date": "2000-04-09T05:41:56Z"}, "committer": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "2000-04-09T05:41:56Z"}, "message": "posix-threads.cc (_Jv_MutexLock): Moved back to posix-threads.h.\n\n2000-04-08  Anthony Green  <green@cygnus.com>\n\n\t* posix-threads.cc (_Jv_MutexLock): Moved back to posix-threads.h.\n\t(_Jv_MutexUnlock): Ditto.\n\t* include/posix-threads.h (_Jv_MutexLock): From posix-threads.cc.\n\t(_Jv_MutexUnlock): Ditto.\n\nFrom-SVN: r33037", "tree": {"sha": "d99505540e265a3314a56696be14cfaa4bedd148", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d99505540e265a3314a56696be14cfaa4bedd148"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/568fe067bc84a419816b46848bbe44b18cd2c80f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/568fe067bc84a419816b46848bbe44b18cd2c80f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/568fe067bc84a419816b46848bbe44b18cd2c80f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/568fe067bc84a419816b46848bbe44b18cd2c80f/comments", "author": null, "committer": null, "parents": [{"sha": "bdf2ced9051950168dda357983e58f234363ef28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdf2ced9051950168dda357983e58f234363ef28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdf2ced9051950168dda357983e58f234363ef28"}], "stats": {"total": 74, "additions": 39, "deletions": 35}, "files": [{"sha": "f282e0f84cd5e581a1472ffed4741419b0ecd20b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568fe067bc84a419816b46848bbe44b18cd2c80f/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568fe067bc84a419816b46848bbe44b18cd2c80f/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=568fe067bc84a419816b46848bbe44b18cd2c80f", "patch": "@@ -1,3 +1,10 @@\n+2000-04-08  Anthony Green  <green@cygnus.com>\n+\n+\t* posix-threads.cc (_Jv_MutexLock): Moved back to posix-threads.h.\n+\t(_Jv_MutexUnlock): Ditto.\n+\t* include/posix-threads.h (_Jv_MutexLock): From posix-threads.cc.\n+\t(_Jv_MutexUnlock): Ditto.\n+\n 2000-04-08  Anthony Green  <green@cygnus.com>\n \n \t* java/lang/StringBuffer.java (ensureCapacity): Don't call Math::max."}, {"sha": "03a43906bd6fab4293d4f0fd44a5452214014b02", "filename": "libjava/include/posix-threads.h", "status": "modified", "additions": 32, "deletions": 2, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568fe067bc84a419816b46848bbe44b18cd2c80f/libjava%2Finclude%2Fposix-threads.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568fe067bc84a419816b46848bbe44b18cd2c80f/libjava%2Finclude%2Fposix-threads.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fposix-threads.h?ref=568fe067bc84a419816b46848bbe44b18cd2c80f", "patch": "@@ -115,8 +115,38 @@ _Jv_MutexInit (_Jv_Mutex_t *mu)\n   mu->owner = 0;\n }\n \n-int _Jv_MutexLock (_Jv_Mutex_t *mu);\n-int _Jv_MutexUnlock (_Jv_Mutex_t *mu);\n+inline int\n+_Jv_MutexLock (_Jv_Mutex_t *mu)\n+{\n+  pthread_t self = pthread_self ();\n+  if (mu->owner == self)\n+    {\n+      mu->count++;\n+    }\n+  else\n+    {\n+      pthread_mutex_lock (&mu->mutex);\n+      mu->count = 1;\n+      mu->owner = self;\n+    }\n+  return 0;\n+}\n+\n+inline int\n+_Jv_MutexUnlock (_Jv_Mutex_t *mu)\n+{\n+  if (_Jv_PthreadCheckMonitor (mu))\n+    return _JV_NOT_OWNER;\n+    \n+  mu->count--;\n+\n+  if (mu->count == 0)\n+    {\n+      mu->owner = 0;\n+      pthread_mutex_unlock (&mu->mutex);\n+    }\n+  return 0;\n+}\n \n #ifndef LINUX_THREADS\n "}, {"sha": "e6b4b256720ce44197c8a531bb1fc27976017824", "filename": "libjava/posix-threads.cc", "status": "modified", "additions": 0, "deletions": 33, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/568fe067bc84a419816b46848bbe44b18cd2c80f/libjava%2Fposix-threads.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/568fe067bc84a419816b46848bbe44b18cd2c80f/libjava%2Fposix-threads.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fposix-threads.cc?ref=568fe067bc84a419816b46848bbe44b18cd2c80f", "patch": "@@ -402,39 +402,6 @@ _Jv_ThreadStart (java::lang::Thread *thread, _Jv_Thread_t *data,\n     }\n }\n \n-int\n-_Jv_MutexLock (_Jv_Mutex_t *mu)\n-{\n-  pthread_t self = pthread_self ();\n-  if (mu->owner == self)\n-    {\n-      mu->count++;\n-    }\n-  else\n-    {\n-      pthread_mutex_lock (&mu->mutex);\n-      mu->count = 1;\n-      mu->owner = self;\n-    }\n-  return 0;\n-}\n-\n-int\n-_Jv_MutexUnlock (_Jv_Mutex_t *mu)\n-{\n-  if (_Jv_PthreadCheckMonitor (mu))\n-    return _JV_NOT_OWNER;\n-    \n-  mu->count--;\n-\n-  if (mu->count == 0)\n-    {\n-      mu->owner = 0;\n-      pthread_mutex_unlock (&mu->mutex);\n-    }\n-  return 0;\n-}\n-\n void\n _Jv_ThreadWait (void)\n {"}]}