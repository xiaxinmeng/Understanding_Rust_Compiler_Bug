{"sha": "ebb6faaafae68ade1685169e3f23a6870ed63102", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWJiNmZhYWFmYWU2OGFkZTE2ODUxNjllM2YyM2E2ODcwZWQ2MzEwMg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-06T13:07:09Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-06T13:07:09Z"}, "message": "[multiple changes]\n\n2011-09-06  Jerome Guitton  <guitton@adacore.com>\n\n\t* sysdep.c (__gnat_get_task_options): Disable VX_SPE_TASK\n\ton vThreads.\n\n2011-09-06  Thomas Quinot  <quinot@adacore.com>\n\n\t* s-solita.adb: Minor reformatting.\n\n2011-09-06  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch6.adb (Analyze_Subprogram_Body_Helper): The body that\n\tis a rewriting of an expression function does not freeze previous\n\tentities.\n\n2011-09-06  Robert Dewar  <dewar@adacore.com>\n\n\t* impunit.adb (Is_Known_Unit): Fix bad handling of Ada 2012 case\n\nFrom-SVN: r178593", "tree": {"sha": "bd2a46378d5d0c491e6e9ed5f4c8e364b95888eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bd2a46378d5d0c491e6e9ed5f4c8e364b95888eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ebb6faaafae68ade1685169e3f23a6870ed63102", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebb6faaafae68ade1685169e3f23a6870ed63102", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ebb6faaafae68ade1685169e3f23a6870ed63102", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebb6faaafae68ade1685169e3f23a6870ed63102/comments", "author": null, "committer": null, "parents": [{"sha": "604352863ceed2abf06f77f95184d6e46fc62501", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/604352863ceed2abf06f77f95184d6e46fc62501", "html_url": "https://github.com/Rust-GCC/gccrs/commit/604352863ceed2abf06f77f95184d6e46fc62501"}], "stats": {"total": 44, "additions": 37, "deletions": 7}, "files": [{"sha": "2e770b7b51bef354d0dc55ed7bf5c970b698671e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ebb6faaafae68ade1685169e3f23a6870ed63102", "patch": "@@ -1,3 +1,22 @@\n+2011-09-06  Jerome Guitton  <guitton@adacore.com>\n+\n+\t* sysdep.c (__gnat_get_task_options): Disable VX_SPE_TASK\n+\ton vThreads.\n+\n+2011-09-06  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* s-solita.adb: Minor reformatting.\n+\n+2011-09-06  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch6.adb (Analyze_Subprogram_Body_Helper): The body that\n+\tis a rewriting of an expression function does not freeze previous\n+\tentities.\n+\n+2011-09-06  Robert Dewar  <dewar@adacore.com>\n+\n+\t* impunit.adb (Is_Known_Unit): Fix bad handling of Ada 2012 case\n+\n 2011-09-06  Tristan Gingold  <gingold@adacore.com>\n \n \t* gcc-interface/Makefile.in: Handle e500v2-wrs-vxworksae like"}, {"sha": "99382f1ab64bd6565dd16a3063294a0e793301bd", "filename": "gcc/ada/impunit.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fimpunit.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fimpunit.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fimpunit.adb?ref=ebb6faaafae68ade1685169e3f23a6870ed63102", "patch": "@@ -761,6 +761,12 @@ package body Impunit is\n          end if;\n       end loop;\n \n+      for J in Non_Imp_File_Names_12'Range loop\n+         if Name_Buffer (1 .. 8) = Non_Imp_File_Names_12 (J) then\n+            return True;\n+         end if;\n+      end loop;\n+\n       --  If not found, not known\n \n       return False;"}, {"sha": "a222c87f470897ad260fe77430b091fe95c4a670", "filename": "gcc/ada/s-solita.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fs-solita.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fs-solita.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-solita.adb?ref=ebb6faaafae68ade1685169e3f23a6870ed63102", "patch": "@@ -150,12 +150,11 @@ package body System.Soft_Links.Tasking is\n       EO      : Ada.Exceptions.Exception_Occurrence;\n \n    begin\n-      --  We can only be here because we are terminating the environment\n-      --  task. Task termination for the rest of the tasks is handled in\n-      --  the Task_Wrapper.\n+      --  We can only be here because we are terminating the environment task.\n+      --  Task termination for all other tasks is handled in the Task_Wrapper.\n \n       --  We do not want to enable this check and e.g. call System.OS_Lib.Abort\n-      --  here because some restricted run-times may not have system.os_lib\n+      --  here because some restricted run-times may not have System.OS_Lib\n       --  (e.g. JVM), and calling abort may do more harm than good to the\n       --  main application.\n \n@@ -216,7 +215,7 @@ package body System.Soft_Links.Tasking is\n          SSL.Timed_Delay              := Timed_Delay_T'Access;\n          SSL.Task_Termination_Handler := Task_Termination_Handler_T'Access;\n \n-         --  No need to create a new Secondary Stack, since we will use the\n+         --  No need to create a new secondary stack, since we will use the\n          --  default one created in s-secsta.adb.\n \n          SSL.Set_Sec_Stack_Addr     (SSL.Get_Sec_Stack_Addr_NT);"}, {"sha": "10de09907998a9e52ef33abe3a14cdae8274e969", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=ebb6faaafae68ade1685169e3f23a6870ed63102", "patch": "@@ -2346,7 +2346,12 @@ package body Sem_Ch6 is\n             --  expansion has generated an equivalent type that is used when\n             --  elaborating the body.\n \n-            if No (Spec_Id) then\n+            --  An exception in the case of Ada2012, AI05-177: The bodies\n+            --  created for expression functions do not freeze.\n+\n+            if No (Spec_Id)\n+              and then Nkind (Original_Node (N)) /= N_Expression_Function\n+            then\n                Freeze_Before (N, Body_Id);\n \n             elsif Nkind (Parent (N)) = N_Compilation_Unit then"}, {"sha": "696630ec298bae52d1a9a263f803d5b64e53a0eb", "filename": "gcc/ada/sysdep.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fsysdep.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebb6faaafae68ade1685169e3f23a6870ed63102/gcc%2Fada%2Fsysdep.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsysdep.c?ref=ebb6faaafae68ade1685169e3f23a6870ed63102", "patch": "@@ -911,7 +911,8 @@ __gnat_get_task_options (void)\n \n   /* Force VX_FP_TASK because it is almost always required */\n   options |= VX_FP_TASK;\n-#if defined (__SPE__) && (! defined (__VXWORKSMILS__))\n+#if defined (__SPE__) && (! defined (__VXWORKSMILS__)) \\\n+    && (! defined (VTHREADS))\n   options |= VX_SPE_TASK;\n #endif\n "}]}