{"sha": "39bac0102c930a6d38486f5716793d531dc90302", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzliYWMwMTAyYzkzMGE2ZDM4NDg2ZjU3MTY3OTNkNTMxZGM5MDMwMg==", "commit": {"author": {"name": "Dodji Seketeli", "email": "dodji@redhat.com", "date": "2010-03-20T08:55:32Z"}, "committer": {"name": "Dodji Seketeli", "email": "dodji@gcc.gnu.org", "date": "2010-03-20T08:55:32Z"}, "message": "re PR c++/43375 (ICE during compiling SSE code)\n\nFix for PR c++/43375\n\ngcc/cp/ChangeLog:\n\tPR c++/43375\n\t* method.c (make_alias_for): Avoid crashing when DECL_LANG_SPECIFIC\n\tis NULL.\n\t* decl2.c (vague_linkage_p): Likewise.\n\ngcc/testsuite/g++.dg/ChangeLog:\n\tPR c++/43375\n\t* g++.dg/abi/mangle42.C: New test.\n\nFrom-SVN: r157590", "tree": {"sha": "2cbb1e98a70db4f750198b5cede54daf5d4f5bcc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2cbb1e98a70db4f750198b5cede54daf5d4f5bcc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39bac0102c930a6d38486f5716793d531dc90302", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39bac0102c930a6d38486f5716793d531dc90302", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39bac0102c930a6d38486f5716793d531dc90302", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39bac0102c930a6d38486f5716793d531dc90302/comments", "author": null, "committer": null, "parents": [{"sha": "4dd9ee924baa6c168c7c25d07e364d39729f4e8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4dd9ee924baa6c168c7c25d07e364d39729f4e8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4dd9ee924baa6c168c7c25d07e364d39729f4e8c"}], "stats": {"total": 38, "additions": 34, "deletions": 4}, "files": [{"sha": "41fb7923a7e7b41e64c098f9ff0660201a9c0c5a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=39bac0102c930a6d38486f5716793d531dc90302", "patch": "@@ -1,3 +1,10 @@\n+2010-03-20  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/43375\n+\t* method.c (make_alias_for): Avoid crashing when DECL_LANG_SPECIFIC\n+\tis NULL.\n+\t* decl2.c (vague_linkage_p): Likewise.\n+\n 2010-03-18  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/43418"}, {"sha": "4e4930af563dd8dcfaed250ac140b5605e03a556", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=39bac0102c930a6d38486f5716793d531dc90302", "patch": "@@ -1655,7 +1655,8 @@ vague_linkage_p (tree decl)\n   return (DECL_COMDAT (decl)\n \t  || (((TREE_CODE (decl) == FUNCTION_DECL\n \t\t&& DECL_DECLARED_INLINE_P (decl))\n-\t       || DECL_TEMPLATE_INSTANTIATION (decl))\n+\t       || (DECL_LANG_SPECIFIC (decl)\n+\t\t   && DECL_TEMPLATE_INSTANTIATION (decl)))\n \t      && TREE_PUBLIC (decl)));\n }\n "}, {"sha": "5ed98bc93bd40ece99c212742c42673cd8439464", "filename": "gcc/cp/method.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Fcp%2Fmethod.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Fcp%2Fmethod.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fmethod.c?ref=39bac0102c930a6d38486f5716793d531dc90302", "patch": "@@ -221,12 +221,15 @@ make_alias_for (tree target, tree newid)\n   TREE_THIS_VOLATILE (alias) = TREE_THIS_VOLATILE (target);\n   TREE_PUBLIC (alias) = 0;\n   DECL_INTERFACE_KNOWN (alias) = 1;\n-  DECL_NOT_REALLY_EXTERN (alias) = 1;\n+  if (DECL_LANG_SPECIFIC (alias))\n+    {\n+      DECL_NOT_REALLY_EXTERN (alias) = 1;\n+      DECL_USE_TEMPLATE (alias) = 0;\n+      DECL_TEMPLATE_INFO (alias) = NULL;\n+    }\n   DECL_EXTERNAL (alias) = 0;\n   DECL_ARTIFICIAL (alias) = 1;\n-  DECL_USE_TEMPLATE (alias) = 0;\n   DECL_TEMPLATE_INSTANTIATED (alias) = 0;\n-  DECL_TEMPLATE_INFO (alias) = NULL;\n   if (TREE_CODE (alias) == FUNCTION_DECL)\n     {\n       DECL_SAVED_FUNCTION_DATA (alias) = NULL;"}, {"sha": "f0d88f0ed71fe0dba340a68a185aca10de040dbe", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=39bac0102c930a6d38486f5716793d531dc90302", "patch": "@@ -1,3 +1,8 @@\n+2010-03-20  Dodji Seketeli  <dodji@redhat.com>\n+\n+\tPR c++/43375\n+\t* g++.dg/abi/mangle42.C: New test.\n+\n 2010-03-19  Andrew Pinski  <andrew_pinski@caviumnetworks.com>\n \n \tPR C/43211"}, {"sha": "730781b300b30c1a75b45254ee0efcd7e8be9d4f", "filename": "gcc/testsuite/g++.dg/abi/mangle42.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle42.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39bac0102c930a6d38486f5716793d531dc90302/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle42.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fmangle42.C?ref=39bac0102c930a6d38486f5716793d531dc90302", "patch": "@@ -0,0 +1,14 @@\n+// Origin: PR c++/43375\n+// { dg-do compile { target i?86-*-* x86_64-*-* } }\n+// { dg-options \"-msse2 -std=gnu++0x\" }\n+\n+typedef float __v4sf __attribute__ ((__vector_size__ (16)));\n+typedef int __v4si __attribute__ ((__vector_size__ (16)));\n+__v4sf my_asin(__v4sf x)\n+{\n+  static const __v4si g_Mask{0x7fffffff,\n+\t\t\t     0x00000000,\n+\t\t\t     0x7fffffff,\n+\t\t\t     0x7fffffff };\n+  return __builtin_ia32_andnps ((__v4sf) g_Mask, x);\n+}"}]}