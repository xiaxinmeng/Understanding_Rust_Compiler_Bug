{"sha": "a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTRiNTZlMDIxOGVjZmM0NWE0NTJjZGJlNjBmM2QxOWYzNWE2YzhiOQ==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2010-12-16T18:12:23Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2010-12-16T18:12:23Z"}, "message": "t-spu-elf (LIB2_SIDITI_CONV_FUNC): Define.\n\n\t* config/spu/t-spu-elf (LIB2_SIDITI_CONV_FUNC): Define.\n\t* config/spu/spu.h (MIN_UNITS_PER_WORD): Do not define.\n\t(LIBGCC2_UNITS_PER_WORD): Define if not already defined.\n\nFrom-SVN: r167950", "tree": {"sha": "5a3401d20cbba543eb6dcc4b9302c304ae9353af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a3401d20cbba543eb6dcc4b9302c304ae9353af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9/comments", "author": null, "committer": null, "parents": [{"sha": "9712cba0068a0afe871a49c455d104efcb8260a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9712cba0068a0afe871a49c455d104efcb8260a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9712cba0068a0afe871a49c455d104efcb8260a0"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "18eaa23380d70e1af3f7e3d13edc352f6f366f95", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9", "patch": "@@ -1,3 +1,9 @@\n+2010-12-16  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\t* config/spu/t-spu-elf (LIB2_SIDITI_CONV_FUNC): Define.\n+\t* config/spu/spu.h (MIN_UNITS_PER_WORD): Do not define.\n+\t(LIBGCC2_UNITS_PER_WORD): Define if not already defined.\n+\n 2010-12-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/46893"}, {"sha": "d56a52b550444b015165c8f525f420055afd10b2", "filename": "gcc/config/spu/spu.h", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9/gcc%2Fconfig%2Fspu%2Fspu.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9/gcc%2Fconfig%2Fspu%2Fspu.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.h?ref=a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9", "patch": "@@ -65,9 +65,16 @@ extern GTY(()) int spu_tune;\n \n #define UNITS_PER_WORD (BITS_PER_WORD/BITS_PER_UNIT)\n \n-/* We never actually change UNITS_PER_WORD, but defining this causes\n-   libgcc to use some different sizes of types when compiling. */\n-#define MIN_UNITS_PER_WORD 4\n+/* When building libgcc, we need to assume 4 words per units even\n+   though UNITS_PER_WORD is 16, because the SPU has basically a 32-bit\n+   instruction set although register size is 128 bits.  In particular,\n+   this causes libgcc to contain __divdi3 instead of __divti3 etc.\n+   However, we allow this default to be re-defined on the command\n+   line, so that we can use the LIB2_SIDITI_CONV_FUNCS mechanism\n+   to get (in addition) TImode versions of some routines.  */\n+#ifndef LIBGCC2_UNITS_PER_WORD\n+#define LIBGCC2_UNITS_PER_WORD 4\n+#endif\n \n #define POINTER_SIZE 32\n "}, {"sha": "341a5aadee3d032e21574099e5d6c552751fd545", "filename": "gcc/config/spu/t-spu-elf", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9/gcc%2Fconfig%2Fspu%2Ft-spu-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9/gcc%2Fconfig%2Fspu%2Ft-spu-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Ft-spu-elf?ref=a4b56e0218ecfc45a452cdbe60f3d19f35a6c8b9", "patch": "@@ -61,6 +61,10 @@ fp-bit.c: $(srcdir)/config/fp-bit.c $(srcdir)/config/spu/t-spu-elf\n \techo '#define FLOAT' > fp-bit.c\n \tcat $(srcdir)/config/fp-bit.c >> fp-bit.c\n \n+# Build TImode conversion routines to support Fortran 128-bit\n+# integer data types.\n+LIB2_SIDITI_CONV_FUNCS=yes\n+\n # Don't let CTOR_LIST end up in sdata section.\n CRTSTUFF_T_CFLAGS =\n "}]}