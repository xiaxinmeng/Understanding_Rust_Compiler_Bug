{"sha": "5801e165b3902f3376387649c632933c05647274", "node_id": "C_kwDOANBUbNoAKDU4MDFlMTY1YjM5MDJmMzM3NjM4NzY0OWM2MzI5MzNjMDU2NDcyNzQ", "commit": {"author": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-02-11T10:18:24Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-02-11T10:18:24Z"}, "message": "Fix warnings when including rust-target.h information", "tree": {"sha": "8c7e1c8cb8cd8c2fa708da79dae95d7a1e5cdcd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c7e1c8cb8cd8c2fa708da79dae95d7a1e5cdcd6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5801e165b3902f3376387649c632933c05647274", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5801e165b3902f3376387649c632933c05647274", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5801e165b3902f3376387649c632933c05647274", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5801e165b3902f3376387649c632933c05647274/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d21ae240496a48628cf1beafcc192760ebe1be89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d21ae240496a48628cf1beafcc192760ebe1be89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d21ae240496a48628cf1beafcc192760ebe1be89"}], "stats": {"total": 29, "additions": 8, "deletions": 21}, "files": [{"sha": "5529fbf6931c3eb168a798784ae9259e9ab18c1b", "filename": "gcc/rust/rust-session-manager.cc", "status": "modified", "additions": 1, "deletions": 19, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5801e165b3902f3376387649c632933c05647274/gcc%2Frust%2Frust-session-manager.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5801e165b3902f3376387649c632933c05647274/gcc%2Frust%2Frust-session-manager.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-session-manager.cc?ref=5801e165b3902f3376387649c632933c05647274", "patch": "@@ -19,21 +19,6 @@\n \n #include \"rust-session-manager.h\"\n #include \"rust-diagnostics.h\"\n-\n-//#include \"rust-target.h\"\n-/*TODO This isn't (currently?) necessary, but if '#include'd after '#include\n-   \"target.h\"', causes: In file included from\n-   [...]/gcc/rust/rust-session-manager.cc:31:\n-    [...]/gcc/rust/rust-target.h:23: error: \"DEFHOOK\" redefined [-Werror]\n-       23 | #define DEFHOOK(NAME, DOC, TYPE, PARAMS, INIT) TYPE (*NAME) PARAMS;\n-\t  |\n-    In file included from [...]/gcc/rust/rust-session-manager.cc:27:\n-    [...]/gcc/target.h:272: note: this is the location of the previous\n-   definition 272 | #define DEFHOOK(NAME, DOC, TYPE, PARAMS, INIT) TYPE (* NAME)\n-   PARAMS;\n-\t  |\n-*/\n-\n #include \"rust-lex.h\"\n #include \"rust-parse.h\"\n #include \"rust-macro-expand.h\"\n@@ -47,10 +32,7 @@\n \n #include \"diagnostic.h\"\n #include \"input.h\"\n-#include \"target.h\"\n-#include \"tm.h\"\n-#include \"memmodel.h\"\n-#include \"tm_p.h\"\n+#include \"rust-target.h\"\n \n extern bool\n saw_errors (void);"}, {"sha": "743ac518ebb5dca04ef4e3597284cd0c4d67cc29", "filename": "gcc/rust/rust-target.h", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5801e165b3902f3376387649c632933c05647274/gcc%2Frust%2Frust-target.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5801e165b3902f3376387649c632933c05647274/gcc%2Frust%2Frust-target.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-target.h?ref=5801e165b3902f3376387649c632933c05647274", "patch": "@@ -18,9 +18,14 @@\n #ifndef GCC_RUST_TARGET_H\n #define GCC_RUST_TARGET_H\n \n+#include \"target.h\"\n+#include \"tm.h\"\n+#include \"memmodel.h\"\n+#include \"tm_p.h\"\n+\n // TODO: find out what this stuff actually does\n #define DEFHOOKPOD(NAME, DOC, TYPE, INIT) TYPE NAME;\n-#define DEFHOOK(NAME, DOC, TYPE, PARAMS, INIT) TYPE (*NAME) PARAMS;\n+// #define DEFHOOK(NAME, DOC, TYPE, PARAMS, INIT) TYPE (*NAME) PARAMS;\n #define DEFHOOK_UNDOC DEFHOOK\n #define HOOKSTRUCT(FRAGMENT) FRAGMENT\n \n@@ -39,4 +44,4 @@ extern struct gcc_targetrustm targetrustm;\n extern void\n rust_add_target_info (const char *key, const char *value);\n \n-#endif\n\\ No newline at end of file\n+#endif"}]}