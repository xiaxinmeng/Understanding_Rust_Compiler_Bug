{"sha": "eb864be48fc4aadf84956cc3f48f0209429443e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWI4NjRiZTQ4ZmM0YWFkZjg0OTU2Y2MzZjQ4ZjAyMDk0Mjk0NDNlMA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-04-25T19:42:33Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2011-04-25T19:42:33Z"}, "message": "libgo/time: Support Irix 6 location of zoneinfo files.\n\nFrom-SVN: r172936", "tree": {"sha": "31658d2c4b57a392ca982362b48b4d717de57495", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31658d2c4b57a392ca982362b48b4d717de57495"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb864be48fc4aadf84956cc3f48f0209429443e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb864be48fc4aadf84956cc3f48f0209429443e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb864be48fc4aadf84956cc3f48f0209429443e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb864be48fc4aadf84956cc3f48f0209429443e0/comments", "author": null, "committer": null, "parents": [{"sha": "9f3b1e6c603e255e87ff8fe087591d795cf2b974", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f3b1e6c603e255e87ff8fe087591d795cf2b974", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f3b1e6c603e255e87ff8fe087591d795cf2b974"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "42659ed606265ef631511f1ba0abdaf31c2f5d1a", "filename": "libgo/go/time/zoneinfo_unix.go", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb864be48fc4aadf84956cc3f48f0209429443e0/libgo%2Fgo%2Ftime%2Fzoneinfo_unix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb864be48fc4aadf84956cc3f48f0209429443e0/libgo%2Fgo%2Ftime%2Fzoneinfo_unix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Ftime%2Fzoneinfo_unix.go?ref=eb864be48fc4aadf84956cc3f48f0209429443e0", "patch": "@@ -17,8 +17,6 @@ import (\n \n const (\n \theaderSize = 4 + 16 + 4*7\n-\tzoneDir    = \"/usr/share/zoneinfo/\"\n-\tzoneDir2   = \"/usr/share/lib/zoneinfo/\"\n )\n \n // Simple I/O interface to binary blob of data.\n@@ -211,16 +209,22 @@ func setupZone() {\n \t// no $TZ means use the system default /etc/localtime.\n \t// $TZ=\"\" means use UTC.\n \t// $TZ=\"foo\" means use /usr/share/zoneinfo/foo.\n+\t// Many systems use /usr/share/zoneinfo, Solaris 2 has\n+\t// /usr/share/lib/zoneinfo, IRIX 6 has /usr/lib/locale/TZ.\n+\tzoneDirs := []string{\"/usr/share/zoneinfo/\",\n+\t\t\"/usr/share/lib/zoneinfo/\",\n+\t\t\"/usr/lib/locale/TZ/\"}\n \n \ttz, err := os.Getenverror(\"TZ\")\n \tswitch {\n \tcase err == os.ENOENV:\n \t\tzones, _ = readinfofile(\"/etc/localtime\")\n \tcase len(tz) > 0:\n-\t\tvar ok bool\n-\t\tzones, ok = readinfofile(zoneDir + tz)\n-\t\tif !ok {\n-\t\t\tzones, _ = readinfofile(zoneDir2 + tz)\n+\t\tfor _, zoneDir := range zoneDirs {\n+\t\t\tvar ok bool\n+\t\t\tif zones, ok = readinfofile(zoneDir + tz); ok {\n+\t\t\t\tbreak\n+\t\t\t}\n \t\t}\n \tcase len(tz) == 0:\n \t\t// do nothing: use UTC"}]}