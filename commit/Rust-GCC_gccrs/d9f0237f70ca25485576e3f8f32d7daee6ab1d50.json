{"sha": "d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDlmMDIzN2Y3MGNhMjU0ODU1NzZlM2Y4ZjMyZDdkYWVlNmFiMWQ1MA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-02-01T22:46:39Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-02-01T22:46:39Z"}, "message": "libgo: add configury and sysinfo support for hurd\n    \n    Patch by Svante Signell.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/160824\n\nFrom-SVN: r268461", "tree": {"sha": "d8b9c9233ef5de0788131a4778fc3aa15e8c5e4e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d8b9c9233ef5de0788131a4778fc3aa15e8c5e4e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/comments", "author": null, "committer": null, "parents": [{"sha": "59ea40d0f2ea7a7b3606afb6617474915c7c80cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59ea40d0f2ea7a7b3606afb6617474915c7c80cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59ea40d0f2ea7a7b3606afb6617474915c7c80cf"}], "stats": {"total": 63, "additions": 57, "deletions": 6}, "files": [{"sha": "1036fc953e25eaa2b3f0b1f39e3d476d3bc6db00", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "patch": "@@ -1,4 +1,4 @@\n-87dd981901c645a7d54a52c5f4c35caec31a8978\n+51fb93fd71b8a0a690455dfdd3d12b2aa0171f5c\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "1f78111445b78652f316a4c8b2a6d5fb7bba3b9f", "filename": "libgo/Makefile.am", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "patch": "@@ -428,6 +428,9 @@ else\n if LIBGO_IS_AIX\n runtime_getncpu_file = runtime/getncpu-aix.c\n else\n+if LIBGO_IS_HURD\n+runtime_getncpu_file = runtime/getncpu-hurd.c\n+else\n runtime_getncpu_file = runtime/getncpu-none.c\n endif\n endif\n@@ -436,6 +439,7 @@ endif\n endif\n endif\n endif\n+endif\n \n runtime_files = \\\n \truntime/aeshash.c \\"}, {"sha": "0b26158dd7d77f033171a6c521c18730b85a06da", "filename": "libgo/Makefile.in", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "patch": "@@ -230,7 +230,8 @@ am__DEPENDENCIES_4 = $(am__DEPENDENCIES_2) \\\n libgo_llgo_la_DEPENDENCIES = $(am__DEPENDENCIES_4)\n @LIBGO_IS_RTEMS_TRUE@am__objects_1 =  \\\n @LIBGO_IS_RTEMS_TRUE@\truntime/rtems-task-variable-add.lo\n-@LIBGO_IS_AIX_FALSE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@am__objects_2 = runtime/getncpu-none.lo\n+@LIBGO_IS_AIX_FALSE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_HURD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@am__objects_2 = runtime/getncpu-none.lo\n+@LIBGO_IS_AIX_FALSE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_HURD_TRUE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@am__objects_2 = runtime/getncpu-hurd.lo\n @LIBGO_IS_AIX_TRUE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@am__objects_2 = runtime/getncpu-aix.lo\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_TRUE@@LIBGO_IS_SOLARIS_FALSE@am__objects_2 = runtime/getncpu-bsd.lo\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_TRUE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_SOLARIS_FALSE@am__objects_2 = runtime/getncpu-bsd.lo\n@@ -855,7 +856,8 @@ noinst_DATA = internal/x/net/internal/nettest.gox \\\n \tzdefaultcc.go\n @LIBGO_IS_RTEMS_FALSE@rtems_task_variable_add_file = \n @LIBGO_IS_RTEMS_TRUE@rtems_task_variable_add_file = runtime/rtems-task-variable-add.c\n-@LIBGO_IS_AIX_FALSE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@runtime_getncpu_file = runtime/getncpu-none.c\n+@LIBGO_IS_AIX_FALSE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_HURD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@runtime_getncpu_file = runtime/getncpu-none.c\n+@LIBGO_IS_AIX_FALSE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_HURD_TRUE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@runtime_getncpu_file = runtime/getncpu-hurd.c\n @LIBGO_IS_AIX_TRUE@@LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@runtime_getncpu_file = runtime/getncpu-aix.c\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_TRUE@@LIBGO_IS_SOLARIS_FALSE@runtime_getncpu_file = runtime/getncpu-bsd.c\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_TRUE@@LIBGO_IS_IRIX_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_SOLARIS_FALSE@runtime_getncpu_file = runtime/getncpu-bsd.c\n@@ -1378,6 +1380,8 @@ runtime/rtems-task-variable-add.lo: runtime/$(am__dirstamp) \\\n \truntime/$(DEPDIR)/$(am__dirstamp)\n runtime/getncpu-none.lo: runtime/$(am__dirstamp) \\\n \truntime/$(DEPDIR)/$(am__dirstamp)\n+runtime/getncpu-hurd.lo: runtime/$(am__dirstamp) \\\n+\truntime/$(DEPDIR)/$(am__dirstamp)\n runtime/getncpu-aix.lo: runtime/$(am__dirstamp) \\\n \truntime/$(DEPDIR)/$(am__dirstamp)\n runtime/getncpu-bsd.lo: runtime/$(am__dirstamp) \\\n@@ -1407,6 +1411,7 @@ distclean-compile:\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/env_posix.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/getncpu-aix.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/getncpu-bsd.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/getncpu-hurd.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/getncpu-irix.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/getncpu-linux.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/getncpu-none.Plo@am__quote@"}, {"sha": "0b8ebce3f9c38b5fa582184647c9b0c7c82f1aeb", "filename": "libgo/configure", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "patch": "@@ -669,6 +669,8 @@ ALLGOOS\n GOOS\n LIBGO_IS_BSD_FALSE\n LIBGO_IS_BSD_TRUE\n+LIBGO_IS_HURD_FALSE\n+LIBGO_IS_HURD_TRUE\n LIBGO_IS_AIX_FALSE\n LIBGO_IS_AIX_TRUE\n LIBGO_IS_SOLARIS_FALSE\n@@ -11341,7 +11343,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11344 \"configure\"\n+#line 11346 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11447,7 +11449,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11450 \"configure\"\n+#line 11452 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13756,6 +13758,7 @@ is_dragonfly=no\n is_rtems=no\n is_solaris=no\n is_aix=no\n+is_hurd=no\n GOOS=unknown\n case ${host} in\n   *-*-darwin*)   is_darwin=yes;  GOOS=darwin ;;\n@@ -13768,6 +13771,7 @@ case ${host} in\n   *-*-rtems*)    is_rtems=yes;   GOOS=rtems ;;\n   *-*-solaris2*) is_solaris=yes; GOOS=solaris ;;\n   *-*-aix*)      is_aix=yes;     GOOS=aix ;;\n+  *-*-gnu*)      is_hurd=yes;    GOOS=hurd ;;\n esac\n  if test $is_darwin = yes; then\n   LIBGO_IS_DARWIN_TRUE=\n@@ -13849,6 +13853,14 @@ else\n   LIBGO_IS_AIX_FALSE=\n fi\n \n+ if test $is_hurd = yes; then\n+  LIBGO_IS_HURD_TRUE=\n+  LIBGO_IS_HURD_FALSE='#'\n+else\n+  LIBGO_IS_HURD_TRUE='#'\n+  LIBGO_IS_HURD_FALSE=\n+fi\n+\n  if test $is_darwin = yes -o $is_dragonfly = yes -o $is_freebsd = yes -o $is_netbsd = yes -o $is_openbsd = yes; then\n   LIBGO_IS_BSD_TRUE=\n   LIBGO_IS_BSD_FALSE='#'\n@@ -15852,6 +15864,10 @@ if test -z \"${LIBGO_IS_AIX_TRUE}\" && test -z \"${LIBGO_IS_AIX_FALSE}\"; then\n   as_fn_error $? \"conditional \\\"LIBGO_IS_AIX\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n fi\n+if test -z \"${LIBGO_IS_HURD_TRUE}\" && test -z \"${LIBGO_IS_HURD_FALSE}\"; then\n+  as_fn_error $? \"conditional \\\"LIBGO_IS_HURD\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n+fi\n if test -z \"${LIBGO_IS_BSD_TRUE}\" && test -z \"${LIBGO_IS_BSD_FALSE}\"; then\n   as_fn_error $? \"conditional \\\"LIBGO_IS_BSD\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5"}, {"sha": "44b59482c531c240602582a51eab9736d2bd7347", "filename": "libgo/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "patch": "@@ -165,6 +165,7 @@ is_dragonfly=no\n is_rtems=no\n is_solaris=no\n is_aix=no\n+is_hurd=no\n GOOS=unknown\n case ${host} in\n   *-*-darwin*)   is_darwin=yes;  GOOS=darwin ;;\n@@ -177,6 +178,7 @@ case ${host} in\n   *-*-rtems*)    is_rtems=yes;   GOOS=rtems ;;\n   *-*-solaris2*) is_solaris=yes; GOOS=solaris ;;\n   *-*-aix*)      is_aix=yes;     GOOS=aix ;;\n+  *-*-gnu*)      is_hurd=yes;    GOOS=hurd ;;\n esac\n AM_CONDITIONAL(LIBGO_IS_DARWIN, test $is_darwin = yes)\n AM_CONDITIONAL(LIBGO_IS_FREEBSD, test $is_freebsd = yes)\n@@ -188,6 +190,7 @@ AM_CONDITIONAL(LIBGO_IS_DRAGONFLY, test $is_dragonfly = yes)\n AM_CONDITIONAL(LIBGO_IS_RTEMS, test $is_rtems = yes)\n AM_CONDITIONAL(LIBGO_IS_SOLARIS, test $is_solaris = yes)\n AM_CONDITIONAL(LIBGO_IS_AIX, test $is_aix = yes)\n+AM_CONDITIONAL(LIBGO_IS_HURD, test $is_hurd = yes)\n AM_CONDITIONAL(LIBGO_IS_BSD, test $is_darwin = yes -o $is_dragonfly = yes -o $is_freebsd = yes -o $is_netbsd = yes -o $is_openbsd = yes)\n AC_SUBST(GOOS)\n AC_SUBST(ALLGOOS)"}, {"sha": "11e4ec436bd893202ebca4c685d41b9ea50b1ce8", "filename": "libgo/mksigtab.sh", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fmksigtab.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fmksigtab.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksigtab.sh?ref=d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "patch": "@@ -91,6 +91,7 @@ checksig _SIGCANCEL  '{_SigSetStack + _SigUnblock, \"SIGCANCEL: reserved signal f\n checksig _SIGXRES    '{_SigNotify, \"SIGXRES: resource control exceeded\"}'\n checksig _SIGJVM1    '{_SigNotify, \"SIGJVM1: reserved signal for Java Virtual Machine\"}'\n checksig _SIGJVM2    '{_SigNotify, \"SIGJVM2: reserved signal for Java Virtual Machine\"}'\n+checksig _SIGLOST '   {_SigNotify, \"SIGLOST: resource lost (Sun); server died (GNU)\"}'\n \n # Special handling of signals 32 and 33 on GNU/Linux systems,\n # because they are special to glibc.\n@@ -112,6 +113,11 @@ else\n \t    rtmax=`grep 'const _*SIGRTMAX = [0-9]*$' gen-sysinfo.go | sed -e 's/.* = \\([0-9]*\\)/\\1/'`\n \t    if test -n \"$rtmax\"; then\n \t\tnsig=`expr $rtmax + 1`\n+\t    elif grep 'const _*SIGRTMAX = [ (]*_*SIGRTMIN[ )]*' gen-sysinfo.go >/dev/null 2>&1; then\n+\t\trtmin=`grep 'const _*SIGRTMIN = [0-9]*$' gen-sysinfo.go | sed -e 's/.* = \\([0-9]*\\)/\\1/'`\n+\t\tif test -n \"$rtmin\"; then\n+\t\t    nsig=`expr $rtmin + 1`\n+\t\tfi\n \t    fi\n \tfi\n     fi"}, {"sha": "6a58e7633dea42dcde34517680ece383d1df9653", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9f0237f70ca25485576e3f8f32d7daee6ab1d50/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=d9f0237f70ca25485576e3f8f32d7daee6ab1d50", "patch": "@@ -55,9 +55,13 @@ grep '^type _mld_hdr_t ' gen-sysinfo.go | \\\n   sed -e 's/_in6_addr/[16]byte/' >> ${OUT}\n \n # The errno constants.  These get type Errno.\n-  egrep '#define E[A-Z0-9_]+ ' errno.i | \\\n+egrep '#define E[A-Z0-9_]+ [0-9E]' errno.i | \\\n   sed -e 's/^#define \\(E[A-Z0-9_]*\\) .*$/const \\1 = Errno(_\\1)/' >> ${OUT}\n \n+# Workaround for GNU/Hurd _EMIG_* errors having negative values\n+egrep '#define E[A-Z0-9_]+ -[0-9]' errno.i | \\\n+  sed -e 's/^#define \\(E[A-Z0-9_]*\\) .*$/const \\1 = Errno(-_\\1)/' >> ${OUT}\n+\n # The O_xxx flags.\n egrep '^const _(O|F|FD)_' gen-sysinfo.go | \\\n   sed -e 's/^\\(const \\)_\\([^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n@@ -130,6 +134,11 @@ grep '^const _SYS_' gen-sysinfo.go | \\\n     echo \"const $sup = _$sys\" >> ${OUT}\n   done\n \n+# Special treatment of SYS_IOCTL for GNU/Hurd.\n+if ! grep '^const SYS_IOCTL' ${OUT} > /dev/null 2>&1; then\n+  echo \"const SYS_IOCTL = 0\" >> ${OUT}\n+fi\n+\n # The GNU/Linux support wants to use SYS_GETDENTS64 if available.\n if ! grep '^const SYS_GETDENTS ' ${OUT} >/dev/null 2>&1; then\n   echo \"const SYS_GETDENTS = 0\" >> ${OUT}\n@@ -475,6 +484,13 @@ grep '^type _st_timespec ' gen-sysinfo.go | \\\n       -e 's/tv_sec/Sec/' \\\n       -e 's/tv_nsec/Nsec/' >> ${OUT}\n \n+# Special treatment of struct stat st_dev for GNU/Hurd\n+# /usr/include/i386-gnu/bits/stat.h: #define st_dev st_fsid\n+fsid_to_dev=\n+if grep 'define st_dev st_fsid' gen-sysinfo.go > /dev/null 2>&1; then\n+  fsid_to_dev=\"-e 's/st_fsid/Dev/'\"\n+fi\n+\n # The stat type.\n # Prefer largefile variant if available.\n stat=`grep '^type _stat64 ' gen-sysinfo.go || true`\n@@ -485,6 +501,7 @@ else\n fi | sed -e 's/type _stat64/type Stat_t/' \\\n          -e 's/type _stat/type Stat_t/' \\\n          -e 's/st_dev/Dev/' \\\n+         ${fsid_to_dev} \\\n          -e 's/st_ino/Ino/g' \\\n          -e 's/st_nlink/Nlink/' \\\n          -e 's/st_mode/Mode/' \\"}]}