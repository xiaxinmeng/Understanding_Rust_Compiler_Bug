{"sha": "22cc53bcef662b3f15055efae4df9ef96a956da5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjJjYzUzYmNlZjY2MmIzZjE1MDU1ZWZhZTRkZjllZjk2YTk1NmRhNQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-03T10:50:06Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-03T10:50:06Z"}, "message": "(FUNCTION_PROFILER, ASM_OUTPUT_ADDR_DIFF_ELT):\n\nRemove PIC stuff.  We wait for the ELF support in gas and binutils.\n(LINK_SPEC): Defined for -v.\n\nFrom-SVN: r4308", "tree": {"sha": "c4cd8d8f2be289457ad8b7a73632ca32d78f1404", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4cd8d8f2be289457ad8b7a73632ca32d78f1404"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/22cc53bcef662b3f15055efae4df9ef96a956da5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22cc53bcef662b3f15055efae4df9ef96a956da5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22cc53bcef662b3f15055efae4df9ef96a956da5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22cc53bcef662b3f15055efae4df9ef96a956da5/comments", "author": null, "committer": null, "parents": [{"sha": "a34f8b66bad6158347948c6f84308b8720699c0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a34f8b66bad6158347948c6f84308b8720699c0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a34f8b66bad6158347948c6f84308b8720699c0f"}], "stats": {"total": 42, "additions": 6, "deletions": 36}, "files": [{"sha": "359a9f3aa900a12914e8dbf8eee7b24a7ca2d535", "filename": "gcc/config/i386/linux.h", "status": "modified", "additions": 6, "deletions": 36, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/22cc53bcef662b3f15055efae4df9ef96a956da5/gcc%2Fconfig%2Fi386%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/22cc53bcef662b3f15055efae4df9ef96a956da5/gcc%2Fconfig%2Fi386%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Flinux.h?ref=22cc53bcef662b3f15055efae4df9ef96a956da5", "patch": "@@ -90,25 +90,6 @@\n \n #endif\n \f\n-/* The following macros are copied from i386bsd.h.  */\n-\n-/* Redefine this to use %eax instead of %edx.  */\n-#undef FUNCTION_PROFILER\n-#define FUNCTION_PROFILER(FILE, LABELNO)  \\\n-{\t\t\t\t\t\t\t\t\t\\\n-  if (flag_pic)\t\t\t\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\tleal %sP%d@GOTOFF(%%ebx),%%eax\\n\",\t\t\\\n-\t       LPREFIX, (LABELNO));\t\t\t\t\t\\\n-      fprintf (FILE, \"\\tcall *_mcount@GOT(%%ebx)\\n\");\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-  else\t\t\t\t\t\t\t\t\t\\\n-    {\t\t\t\t\t\t\t\t\t\\\n-      fprintf (FILE, \"\\tmovl $%sP%d,%%eax\\n\", LPREFIX, (LABELNO));\t\\\n-      fprintf (FILE, \"\\tcall _mcount\\n\");\t\t\t\t\\\n-    }\t\t\t\t\t\t\t\t\t\\\n-}\n-\n /* There are conflicting reports about whether this system uses\n    a different assembler syntax.  wilson@cygnus.com says # is right.  */\n #undef COMMENT_BEGIN\n@@ -120,23 +101,12 @@\n #undef ASM_APP_OFF\n #define ASM_APP_OFF \"#NO_APP\\n\"\n \f\n-/* The following macros are copied from i386v4.h.  */\n-\n-/* These have to be defined to get PIC code correct */\n-\n-/* This is how to output an element of a case-vector that is relative.\n-   This is only used for PIC code.  See comments by the `casesi' insn in\n-   i386.md for an explanation of the expression this outputs. */\n-\n-#undef ASM_OUTPUT_ADDR_DIFF_ELT\n-#define ASM_OUTPUT_ADDR_DIFF_ELT(FILE, VALUE, REL) \\\n-  fprintf (FILE, \"\\t.long _GLOBAL_OFFSET_TABLE_+[.-%s%d]\\n\", LPREFIX, VALUE)\n-\n-/* Indicate that jump tables go in the text section.  This is\n-   necessary when compiling PIC code.  */\n-\n-#define JUMP_TABLES_IN_TEXT_SECTION\n+#undef LINK_SPEC\n \n /* Don't default to pcc-struct-return, because gcc is the only compiler, and\n-   we want to retain compatibility with older gcc versions.  */\n+#if TARGET_CPU_DEFAULT == 2\n+#define LINK_SPEC\t\"%{v:-dll-verbose} %{!m386:-m486}\"\n+#else\n+#define LINK_SPEC\t\"%{v:-dll-verbose} %{m486:-m486}\"\n+#endif\n #define DEFAULT_PCC_STRUCT_RETURN 0"}]}