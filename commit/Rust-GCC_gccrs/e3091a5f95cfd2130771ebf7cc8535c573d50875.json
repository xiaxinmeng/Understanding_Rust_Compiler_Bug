{"sha": "e3091a5f95cfd2130771ebf7cc8535c573d50875", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTMwOTFhNWY5NWNmZDIxMzA3NzFlYmY3Y2M4NTM1YzU3M2Q1MDg3NQ==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "joern.rennecke@superh.com", "date": "2003-06-04T17:19:36Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2003-06-04T17:19:36Z"}, "message": "c-decl.c (c_init_decl_processing): Clear input_file_name while building common nodes.\n\n\t* c-decl.c (c_init_decl_processing): Clear input_file_name\n\twhile building common nodes.\n\t* dwarf2out.c (gen_compile_unit_die, dwarf2out_finish):\n\tDon't add working directory for strings like <built-in> .\n\nFrom-SVN: r67452", "tree": {"sha": "9c6eef08bd0e2573f12d93a729188a118acda416", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9c6eef08bd0e2573f12d93a729188a118acda416"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3091a5f95cfd2130771ebf7cc8535c573d50875", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3091a5f95cfd2130771ebf7cc8535c573d50875", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3091a5f95cfd2130771ebf7cc8535c573d50875", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3091a5f95cfd2130771ebf7cc8535c573d50875/comments", "author": null, "committer": null, "parents": [{"sha": "f0483418a0c29a4c6358f15dbf2fe028f07282e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0483418a0c29a4c6358f15dbf2fe028f07282e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0483418a0c29a4c6358f15dbf2fe028f07282e7"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "7c7b426f8183373265f4c77847db194ae52f20b8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3091a5f95cfd2130771ebf7cc8535c573d50875/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3091a5f95cfd2130771ebf7cc8535c573d50875/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e3091a5f95cfd2130771ebf7cc8535c573d50875", "patch": "@@ -1,3 +1,10 @@\n+2003-06-04  J\"orn Rennecke <joern.rennecke@superh.com>\n+\n+\t* c-decl.c (c_init_decl_processing): Clear input_file_name\n+\twhile building common nodes.\n+\t* dwarf2out.c (gen_compile_unit_die, dwarf2out_finish):\n+\tDon't add working directory for strings like <built-in> .\n+\n 2003-06-04  David Edelsohn  <edelsohn@gnu.org>\n \n \t* doc/install.texi (*-ibm-aix*): Native as and ld required"}, {"sha": "b81ecd8e2b2387dbcbbae3f34c22602a5a6d16f6", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3091a5f95cfd2130771ebf7cc8535c573d50875/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3091a5f95cfd2130771ebf7cc8535c573d50875/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=e3091a5f95cfd2130771ebf7cc8535c573d50875", "patch": "@@ -2268,6 +2268,7 @@ c_init_decl_processing ()\n {\n   tree endlink;\n   tree ptr_ftype_void, ptr_ftype_ptr;\n+  const char *save_input_filename;\n \n   /* Adds some ggc roots, and reserved words for c-parse.in.  */\n   c_parse_init ();\n@@ -2280,6 +2281,11 @@ c_init_decl_processing ()\n   /* Make the binding_level structure for global names.  */\n   pushlevel (0);\n   global_binding_level = current_binding_level;\n+  /* Declarations from c_common_nodes_and_builtins must not be associated\n+     with this input file, lest we get differences between using and not\n+     using preprocessed headers.  */\n+  save_input_filename = input_filename;\n+  input_filename = NULL;\n \n   build_common_tree_nodes (flag_signed_char);\n \n@@ -2307,6 +2313,8 @@ c_init_decl_processing ()\n     = build_function_type (ptr_type_node,\n \t\t\t   tree_cons (NULL_TREE, ptr_type_node, endlink));\n \n+  input_filename = save_input_filename;\n+\n   pedantic_lvalues = pedantic;\n \n   make_fname_decl = c_make_fname_decl;"}, {"sha": "e64932941acac5d4f036b77a6495ac434ad8d09b", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3091a5f95cfd2130771ebf7cc8535c573d50875/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3091a5f95cfd2130771ebf7cc8535c573d50875/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=e3091a5f95cfd2130771ebf7cc8535c573d50875", "patch": "@@ -11493,7 +11493,8 @@ gen_compile_unit_die (filename)\n   if (filename)\n     {\n       add_name_attribute (die, filename);\n-      if (filename[0] != DIR_SEPARATOR)\n+      /* Don't add cwd for <built-in>.  */\n+      if (filename[0] != DIR_SEPARATOR && filename[0] != '<')\n \tadd_comp_dir_attribute (die);\n     }\n \n@@ -13084,7 +13085,9 @@ dwarf2out_finish (filename)\n     {\n       size_t i;\n       for (i = 1; i < VARRAY_ACTIVE_SIZE (file_table); i++)\n-\tif (VARRAY_CHAR_PTR (file_table, i)[0] != DIR_SEPARATOR)\n+\tif (VARRAY_CHAR_PTR (file_table, i)[0] != DIR_SEPARATOR\n+\t    /* Don't add cwd for <built-in>.  */\n+\t    && VARRAY_CHAR_PTR (file_table, i)[0] != '<')\n \t  {\n \t    add_comp_dir_attribute (comp_unit_die);\n \t    break;"}]}