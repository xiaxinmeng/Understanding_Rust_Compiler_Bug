{"sha": "c96738e3218fbdd5b3822c599d1a341c0d37008d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzk2NzM4ZTMyMThmYmRkNWIzODIyYzU5OWQxYTM0MWMwZDM3MDA4ZA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-10-18T10:41:03Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-10-18T10:41:03Z"}, "message": "misc.c (gnat_tree_size): Move around.\n\n\t* gcc-interface/misc.c (gnat_tree_size): Move around.\n\n\t* gcc-interface/utils.c (max_size): Deal with SSA names.\n\nFrom-SVN: r253852", "tree": {"sha": "8122f18a2a8257d216e570dc3b1e75b7a68320f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8122f18a2a8257d216e570dc3b1e75b7a68320f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c96738e3218fbdd5b3822c599d1a341c0d37008d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c96738e3218fbdd5b3822c599d1a341c0d37008d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c96738e3218fbdd5b3822c599d1a341c0d37008d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c96738e3218fbdd5b3822c599d1a341c0d37008d/comments", "author": null, "committer": null, "parents": [{"sha": "f8049c44b999c27e4573be61aebb3aeedfa0a471", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8049c44b999c27e4573be61aebb3aeedfa0a471", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8049c44b999c27e4573be61aebb3aeedfa0a471"}], "stats": {"total": 44, "additions": 27, "deletions": 17}, "files": [{"sha": "2139cbf4d86e237c6869c74807472c34956cd39d", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c96738e3218fbdd5b3822c599d1a341c0d37008d/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c96738e3218fbdd5b3822c599d1a341c0d37008d/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c96738e3218fbdd5b3822c599d1a341c0d37008d", "patch": "@@ -1,3 +1,9 @@\n+2017-10-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/misc.c (gnat_tree_size): Move around.\n+\n+\t* gcc-interface/utils.c (max_size): Deal with SSA names.\n+\n 2017-10-17  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc-interface/misc.c (gnat_tree_size): New function."}, {"sha": "7bdb3803c13dcf49bed99608127086f75f2905df", "filename": "gcc/ada/gcc-interface/misc.c", "status": "modified", "additions": 17, "deletions": 17, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c96738e3218fbdd5b3822c599d1a341c0d37008d/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c96738e3218fbdd5b3822c599d1a341c0d37008d/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fmisc.c?ref=c96738e3218fbdd5b3822c599d1a341c0d37008d", "patch": "@@ -343,23 +343,6 @@ internal_error_function (diagnostic_context *context, const char *msgid,\n   Compiler_Abort (sp, sp_loc, true);\n }\n \n-/* lang_hooks.tree_size: Determine the size of a tree with code C,\n-   which is a language-specific tree code in category tcc_constant,\n-   tcc_exceptional or tcc_type.  The default expects never to be called.  */\n-\n-static size_t\n-gnat_tree_size (enum tree_code code)\n-{\n-  gcc_checking_assert (code >= NUM_TREE_CODES);\n-  switch (code)\n-    {\n-    case UNCONSTRAINED_ARRAY_TYPE:\n-      return sizeof (tree_type_non_common);\n-    default:\n-      gcc_unreachable ();\n-    }\n-}\n-\n /* Perform all the initialization steps that are language-specific.  */\n \n static bool\n@@ -1387,6 +1370,23 @@ gnat_init_ts (void)\n   MARK_TS_TYPED (EXIT_STMT);\n }\n \n+/* Return the size of a tree with CODE, which is a language-specific tree code\n+   in category tcc_constant, tcc_exceptional or tcc_type.  The default expects\n+   never to be called.  */\n+\n+static size_t\n+gnat_tree_size (enum tree_code code)\n+{\n+  gcc_checking_assert (code >= NUM_TREE_CODES);\n+  switch (code)\n+    {\n+    case UNCONSTRAINED_ARRAY_TYPE:\n+      return sizeof (tree_type_non_common);\n+    default:\n+      gcc_unreachable ();\n+    }\n+}\n+\n /* Return the lang specific structure attached to NODE.  Allocate it (cleared)\n    if needed.  */\n "}, {"sha": "99453821e419eac433298f940a2b46ed94d309b6", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c96738e3218fbdd5b3822c599d1a341c0d37008d/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c96738e3218fbdd5b3822c599d1a341c0d37008d/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=c96738e3218fbdd5b3822c599d1a341c0d37008d", "patch": "@@ -3595,6 +3595,10 @@ max_size (tree exp, bool max_p)\n     case tcc_constant:\n       return exp;\n \n+    case tcc_exceptional:\n+      gcc_assert (code == SSA_NAME);\n+      return exp;\n+\n     case tcc_vl_exp:\n       if (code == CALL_EXPR)\n \t{"}]}