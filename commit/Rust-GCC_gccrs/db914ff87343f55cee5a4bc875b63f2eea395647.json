{"sha": "db914ff87343f55cee5a4bc875b63f2eea395647", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI5MTRmZjg3MzQzZjU1Y2VlNWE0YmM4NzViNjNmMmVlYTM5NTY0Nw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-07-23T07:35:03Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-07-23T07:35:03Z"}, "message": "[multiple changes]\n\n2012-07-23  Fedor Rybin  <frybin@adacore.com>\n\n\t* gnat_ugn.texi: Removing obsolete limitation of gnattest\n\tto support only ada05.\tUpdating gnattest support for other\n\tplatforms/run-times section to reflect the usage of taget\n\tprefix in gnattest calls.  Fixing missed obsolete --stub-default\n\toption name.\n\n2012-07-23  Robert Dewar  <dewar@adacore.com>\n\n\t* uintp.adb: Minor reformatting.\n\n2012-07-23  Olivier Hainque  <hainque@adacore.com>\n\n\t* system-vxworks-ppc.ads: Replace the default\n\tLinker_Options requesting crtbe by a commented out request for\n\t-nostartfiles.\n\n2012-07-23  Vincent Celier  <celier@adacore.com>\n\n\t* prj-nmsc.adb (Check_Naming): Do not get the exceptions names\n\tin a virtual project.\n\nFrom-SVN: r189771", "tree": {"sha": "0afacf2e587bc3a58ed103ced7ec6a71291fc1ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0afacf2e587bc3a58ed103ced7ec6a71291fc1ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db914ff87343f55cee5a4bc875b63f2eea395647", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db914ff87343f55cee5a4bc875b63f2eea395647", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db914ff87343f55cee5a4bc875b63f2eea395647", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db914ff87343f55cee5a4bc875b63f2eea395647/comments", "author": null, "committer": null, "parents": [{"sha": "2557e0547105f1c8f4fd0148bb514112499a4b72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2557e0547105f1c8f4fd0148bb514112499a4b72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2557e0547105f1c8f4fd0148bb514112499a4b72"}], "stats": {"total": 69, "additions": 48, "deletions": 21}, "files": [{"sha": "0d06faf842b0fcd78a593eb38a14de1574981538", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=db914ff87343f55cee5a4bc875b63f2eea395647", "patch": "@@ -1,3 +1,26 @@\n+2012-07-23  Fedor Rybin  <frybin@adacore.com>\n+\n+\t* gnat_ugn.texi: Removing obsolete limitation of gnattest\n+\tto support only ada05.\tUpdating gnattest support for other\n+\tplatforms/run-times section to reflect the usage of taget\n+\tprefix in gnattest calls.  Fixing missed obsolete --stub-default\n+\toption name.\n+\n+2012-07-23  Robert Dewar  <dewar@adacore.com>\n+\n+\t* uintp.adb: Minor reformatting.\n+\n+2012-07-23  Olivier Hainque  <hainque@adacore.com>\n+\n+\t* system-vxworks-ppc.ads: Replace the default\n+\tLinker_Options requesting crtbe by a commented out request for\n+\t-nostartfiles.\n+\n+2012-07-23  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-nmsc.adb (Check_Naming): Do not get the exceptions names\n+\tin a virtual project.\n+\n 2012-07-23  Robert Dewar  <dewar@adacore.com>\n \n \t* layout.adb, sem_prag.adb, sem.ads, freeze.adb,"}, {"sha": "a9eccf205a45716190b08bea08b14173ba4f41e0", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=db914ff87343f55cee5a4bc875b63f2eea395647", "patch": "@@ -18416,7 +18416,7 @@ as passed to gnattest when generating the test driver.\n Passing it to the driver generated on the first example:\n \n @smallexample\n-test_runner --stub-default=pass\n+test_runner --skeleton-default=pass\n @end smallexample\n \n makes both tests pass, even the unimplemented one.\n@@ -18633,11 +18633,13 @@ such as Zero FootPrint (ZFP), a simplified harness is generated.\n Two variables are used to tell the underlying AUnit framework how to generate\n the test harness: @code{PLATFORM}, which identifies the target, and\n @code{RUNTIME}, used to determine the run-time library for which the harness\n-is generated. For example, the following options are used to generate the\n-AUnit test harness for a PowerPC ELF target using the ZFP run-time library:\n+is generated. Corresponding prefix should also be used when calling\n+@command{gnattest} for non-native targets. For example, the following options\n+are used to generate the AUnit test harness for a PowerPC ELF target using\n+the ZFP run-time library:\n \n @smallexample\n-gnattest -Psimple.gpr -XPLATFORM=powerpc-elf -XRUNTIME=zfp\n+powerpc-elf-gnattest -Psimple.gpr -XPLATFORM=powerpc-elf -XRUNTIME=zfp\n @end smallexample\n \n @node Current Limitations\n@@ -18650,7 +18652,6 @@ The tool currently does not support following features:\n @itemize @bullet\n @item generic tests for generic packages and package instantiations\n @item tests for protected subprograms and entries\n-@item generating test packages for code that is not conformant with ada 2005\n \n @end itemize\n "}, {"sha": "77d1cfd1cde9a1bd70558d7c540dedcf533f40af", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=db914ff87343f55cee5a4bc875b63f2eea395647", "patch": "@@ -4209,22 +4209,25 @@ package body Prj.Nmsc is\n             Lang_Id := Lang_Id.Next;\n          end loop;\n \n-         --  Get the naming exceptions for all languages\n-\n-         for Kind in Spec_Or_Body loop\n-            Lang_Id := Project.Languages;\n-            while Lang_Id /= No_Language_Index loop\n-               case Lang_Id.Config.Kind is\n+         --  Get the naming exceptions for all languages, but not for virtual\n+         --  projects.\n+\n+         if not Project.Virtual then\n+            for Kind in Spec_Or_Body loop\n+               Lang_Id := Project.Languages;\n+               while Lang_Id /= No_Language_Index loop\n+                  case Lang_Id.Config.Kind is\n                   when File_Based =>\n                      Process_Exceptions_File_Based (Lang_Id, Kind);\n \n                   when Unit_Based =>\n                      Process_Exceptions_Unit_Based (Lang_Id, Kind);\n-               end case;\n+                  end case;\n \n-               Lang_Id := Lang_Id.Next;\n+                  Lang_Id := Lang_Id.Next;\n+               end loop;\n             end loop;\n-         end loop;\n+         end if;\n       end Check_Naming;\n \n       ----------------------------"}, {"sha": "62d604f63192f2c1dbc77d0697a7f3edb822d8fb", "filename": "gcc/ada/system-vxworks-ppc.ads", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fsystem-vxworks-ppc.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fsystem-vxworks-ppc.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsystem-vxworks-ppc.ads?ref=db914ff87343f55cee5a4bc875b63f2eea395647", "patch": "@@ -115,14 +115,14 @@ package System is\n \n private\n \n-   --  Note: we are moving to a scheme where we more closely rely on the\n-   --  VxWorks mechanisms to register exception tables. This change requests\n-   --  it by default (-auto-register) and removes the incomplete circuitry\n-   --  that was taking care of the registration as part of the Ada RTS\n-   --  initialization.\n+   --  Note: we now more closely rely on the VxWorks mechanisms to register\n+   --  exception tables for ZCX support in kernel mode, thanks to crt objects\n+   --  featuring dedicated constructors triggered by linker options below.\n+\n+   --  Commenting the pragma for the sjlj runtimes is performed automatically\n+   --  by our Makefiles, so this line needs to be manipulated with care.\n \n    pragma Linker_Options (\"-crtbe\" & ASCII.NUL & \"-auto-register\");\n-   --  Required by ZCX on VxWorks kernel\n \n    type Address is mod Memory_Size;\n    Null_Address : constant Address := 0;"}, {"sha": "ce7436ffccd19a74b97cf4d8891a4e3c7424cd64", "filename": "gcc/ada/uintp.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fuintp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db914ff87343f55cee5a4bc875b63f2eea395647/gcc%2Fada%2Fuintp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fuintp.adb?ref=db914ff87343f55cee5a4bc875b63f2eea395647", "patch": "@@ -1188,7 +1188,7 @@ package body Uintp is\n \n             if D > Int_1 then\n \n-               --  Multiply Dividend by D\n+               --  Multiply Dividend by d\n \n                Carry := 0;\n                for J in reverse Dividend'Range loop"}]}