{"sha": "8318d4ce56634f309a5d47da92ba4fccb72fec15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODMxOGQ0Y2U1NjYzNGYzMDlhNWQ0N2RhOTJiYTRmY2NiNzJmZWMxNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-12-12T23:19:32Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-12-12T23:19:32Z"}, "message": "re PR debug/55665 (Missing DW_TAG_lexical_block PC range)\n\n\tPR debug/55665\n\t* tree-inline.c (remap_decls): Change nonlocalized_list\n\tto pointer to pointer to vector from pointer to vector.\n\t(remap_block): Pass address of BLOCK_NONLOCALIZED_VARS.\n\n\t* g++.dg/guality/pr55665.C: New test.\n\nFrom-SVN: r194461", "tree": {"sha": "560fde10b868dbca3f5a3d1244b1a395a8b4e9b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/560fde10b868dbca3f5a3d1244b1a395a8b4e9b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8318d4ce56634f309a5d47da92ba4fccb72fec15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8318d4ce56634f309a5d47da92ba4fccb72fec15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8318d4ce56634f309a5d47da92ba4fccb72fec15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8318d4ce56634f309a5d47da92ba4fccb72fec15/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a42a906c420d7bb196cb8541e0ab65264a0b04b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a42a906c420d7bb196cb8541e0ab65264a0b04b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a42a906c420d7bb196cb8541e0ab65264a0b04b0"}], "stats": {"total": 49, "additions": 45, "deletions": 4}, "files": [{"sha": "bb26702a60f8de33c620dd9db6c18ef61f27c224", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8318d4ce56634f309a5d47da92ba4fccb72fec15", "patch": "@@ -1,5 +1,10 @@\n 2012-12-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR debug/55665\n+\t* tree-inline.c (remap_decls): Change nonlocalized_list\n+\tto pointer to pointer to vector from pointer to vector.\n+\t(remap_block): Pass address of BLOCK_NONLOCALIZED_VARS.\n+\n \tPR sanitizer/55508\n \t* builtin-attrs.def (ATTR_TMPURE_NOTHROW_LEAF_LIST,\n \tATTR_TMPURE_NORETURN_NOTHROW_LEAF_LIST): New."}, {"sha": "e9b645db24b221dfb25497a9a6992aba87a5a0a2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8318d4ce56634f309a5d47da92ba4fccb72fec15", "patch": "@@ -1,5 +1,8 @@\n 2012-12-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR debug/55665\n+\t* g++.dg/guality/pr55665.C: New test.\n+\n \t* lib/gcc-dg.exp (${tool}_load): Handle non-existing\n \tset_target_env_var the same as if it is empty list.\n \t(dg-set-target-env-var): Fix up error message."}, {"sha": "16c6d2816613b7bae5bf09edb05fca796f484ec4", "filename": "gcc/testsuite/g++.dg/guality/pr55665.C", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fguality%2Fpr55665.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fguality%2Fpr55665.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fguality%2Fpr55665.C?ref=8318d4ce56634f309a5d47da92ba4fccb72fec15", "patch": "@@ -0,0 +1,33 @@\n+// PR debug/55655\n+// { dg-do run }\n+// { dg-options \"-g\" }\n+\n+extern \"C\" void abort ();\n+struct A { A (int); int a; };\n+\n+__attribute__((noinline, noclone)) int\n+bar (void)\n+{\n+  return 40;\n+}\n+\n+__attribute__((noinline, noclone)) void\n+foo (int x)\n+{\n+  __asm volatile (\"\" : : \"r\" (x) : \"memory\");\n+}\n+\n+A::A (int x)\n+{\n+  static int p = bar ();\n+  foo (p);\t\t// { dg-final { gdb-test 23 \"p\" \"40\" } }\n+  a = ++p;\n+}\n+\n+int\n+main ()\n+{\n+  A a (42);\n+  if (a.a != 41)\n+    abort ();\n+}"}, {"sha": "70aa56755cb8e9d8076cdee871d36a0186455584", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8318d4ce56634f309a5d47da92ba4fccb72fec15/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=8318d4ce56634f309a5d47da92ba4fccb72fec15", "patch": "@@ -536,7 +536,7 @@ can_be_nonlocal (tree decl, copy_body_data *id)\n }\n \n static tree\n-remap_decls (tree decls, vec<tree, va_gc> *nonlocalized_list,\n+remap_decls (tree decls, vec<tree, va_gc> **nonlocalized_list,\n \t     copy_body_data *id)\n {\n   tree old_var;\n@@ -557,7 +557,7 @@ remap_decls (tree decls, vec<tree, va_gc> *nonlocalized_list,\n \t  if ((!optimize || debug_info_level > DINFO_LEVEL_TERSE)\n \t      && !DECL_IGNORED_P (old_var)\n \t      && nonlocalized_list)\n-\t    vec_safe_push (nonlocalized_list, old_var);\n+\t    vec_safe_push (*nonlocalized_list, old_var);\n \t  continue;\n \t}\n \n@@ -575,7 +575,7 @@ remap_decls (tree decls, vec<tree, va_gc> *nonlocalized_list,\n \t  if ((!optimize || debug_info_level > DINFO_LEVEL_TERSE)\n \t      && !DECL_IGNORED_P (old_var)\n \t      && nonlocalized_list)\n-\t    vec_safe_push (nonlocalized_list, old_var);\n+\t    vec_safe_push (*nonlocalized_list, old_var);\n \t}\n       else\n \t{\n@@ -622,7 +622,7 @@ remap_block (tree *block, copy_body_data *id)\n \n   /* Remap its variables.  */\n   BLOCK_VARS (new_block) = remap_decls (BLOCK_VARS (old_block),\n-  \t\t\t\t\tBLOCK_NONLOCALIZED_VARS (new_block),\n+  \t\t\t\t\t&BLOCK_NONLOCALIZED_VARS (new_block),\n \t\t\t\t\tid);\n \n   if (id->transform_lang_insert_block)"}]}