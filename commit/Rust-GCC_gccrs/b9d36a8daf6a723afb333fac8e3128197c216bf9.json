{"sha": "b9d36a8daf6a723afb333fac8e3128197c216bf9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjlkMzZhOGRhZjZhNzIzYWZiMzMzZmFjOGUzMTI4MTk3YzIxNmJmOQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-07-14T22:21:37Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-07-14T22:21:37Z"}, "message": "cmd/go: use gccSupportsFlag for -fsplit-stack\n    \n    Don't assume that all (or only) 386/amd64 compilers support\n    -fsplit-stack.\n    \n    Reviewed-on: https://go-review.googlesource.com/48592\n\nFrom-SVN: r250216", "tree": {"sha": "0f4bdcc81c3a5891b1e0c9aa6b448c48f92acd7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f4bdcc81c3a5891b1e0c9aa6b448c48f92acd7e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9d36a8daf6a723afb333fac8e3128197c216bf9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9d36a8daf6a723afb333fac8e3128197c216bf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9d36a8daf6a723afb333fac8e3128197c216bf9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9d36a8daf6a723afb333fac8e3128197c216bf9/comments", "author": null, "committer": null, "parents": [{"sha": "b70bb05bd189a80c79225f7056441d7e3e1c0b6c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b70bb05bd189a80c79225f7056441d7e3e1c0b6c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b70bb05bd189a80c79225f7056441d7e3e1c0b6c"}], "stats": {"total": 8, "additions": 3, "deletions": 5}, "files": [{"sha": "5c5602188da62fb7ff0f77c220bdbb08b5a1bd41", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9d36a8daf6a723afb333fac8e3128197c216bf9/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9d36a8daf6a723afb333fac8e3128197c216bf9/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=b9d36a8daf6a723afb333fac8e3128197c216bf9", "patch": "@@ -1,4 +1,4 @@\n-9294e79fced202ade7eb236bbe78b766e7e0374f\n+a77b1091fa83cfaf200e6dad26e92e42483bae43\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "9623b9c32be89638001dabaab957f471b9e022b4", "filename": "libgo/go/cmd/go/build.go", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9d36a8daf6a723afb333fac8e3128197c216bf9/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9d36a8daf6a723afb333fac8e3128197c216bf9/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fcmd%2Fgo%2Fbuild.go?ref=b9d36a8daf6a723afb333fac8e3128197c216bf9", "patch": "@@ -3092,8 +3092,7 @@ func (tools gccgoToolchain) cc(b *builder, p *Package, objdir, ofile, cfile stri\n \tif pkgpath := gccgoCleanPkgpath(p); pkgpath != \"\" {\n \t\tdefs = append(defs, `-D`, `GOPKGPATH=\"`+pkgpath+`\"`)\n \t}\n-\tswitch goarch {\n-\tcase \"386\", \"amd64\":\n+\tif b.gccSupportsFlag(\"-fsplit-stack\") {\n \t\tdefs = append(defs, \"-fsplit-stack\")\n \t}\n \tdefs = tools.maybePIC(defs)\n@@ -3428,8 +3427,7 @@ func (b *builder) cgo(a *action, cgoExe, obj string, pcCFLAGS, pcLDFLAGS, cgofil\n \t}\n \n \tif _, ok := buildToolchain.(gccgoToolchain); ok {\n-\t\tswitch goarch {\n-\t\tcase \"386\", \"amd64\":\n+\t\tif b.gccSupportsFlag(\"-fsplit-stack\") {\n \t\t\tcgoCFLAGS = append(cgoCFLAGS, \"-fsplit-stack\")\n \t\t}\n \t\tcgoflags = append(cgoflags, \"-gccgo\")"}]}