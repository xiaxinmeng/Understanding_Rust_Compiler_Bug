{"sha": "7b24b675378a69ff254e4a4b5faa3615d4abd84d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2IyNGI2NzUzNzhhNjlmZjI1NGU0YTRiNWZhYTM2MTVkNGFiZDg0ZA==", "commit": {"author": {"name": "Teresa Johnson", "email": "tejohnson@google.com", "date": "2013-07-11T21:32:14Z"}, "committer": {"name": "Teresa Johnson", "email": "tejohnson@gcc.gnu.org", "date": "2013-07-11T21:32:14Z"}, "message": "This patch adds a call to ggc_free from va_gc::release, which is called by vec_free.\n\nThis patch adds a call to ggc_free from va_gc::release, which is\ncalled by vec_free. This restores the functionality of the old VEC_free\nand reduces the memory footprint during compilation.\n\n2013-07-11  Teresa Johnson  <tejohnson@google.com>\n\n\t* vec.h (struct va_gc): Move release out-of-line.\n\t(va_gc::release): Call ggc_free on released vec.\n\nFrom-SVN: r200909", "tree": {"sha": "d76fb8801d882b05bf1c9285d1a89d33bf3b002e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d76fb8801d882b05bf1c9285d1a89d33bf3b002e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7b24b675378a69ff254e4a4b5faa3615d4abd84d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b24b675378a69ff254e4a4b5faa3615d4abd84d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b24b675378a69ff254e4a4b5faa3615d4abd84d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b24b675378a69ff254e4a4b5faa3615d4abd84d/comments", "author": {"login": "teresajohnson", "id": 20446403, "node_id": "MDQ6VXNlcjIwNDQ2NDAz", "avatar_url": "https://avatars.githubusercontent.com/u/20446403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teresajohnson", "html_url": "https://github.com/teresajohnson", "followers_url": "https://api.github.com/users/teresajohnson/followers", "following_url": "https://api.github.com/users/teresajohnson/following{/other_user}", "gists_url": "https://api.github.com/users/teresajohnson/gists{/gist_id}", "starred_url": "https://api.github.com/users/teresajohnson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teresajohnson/subscriptions", "organizations_url": "https://api.github.com/users/teresajohnson/orgs", "repos_url": "https://api.github.com/users/teresajohnson/repos", "events_url": "https://api.github.com/users/teresajohnson/events{/privacy}", "received_events_url": "https://api.github.com/users/teresajohnson/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "85d4cbb878c645fbb76838f228ac24cd4c898212", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85d4cbb878c645fbb76838f228ac24cd4c898212", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85d4cbb878c645fbb76838f228ac24cd4c898212"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "4454b01a50ae64421f6782af4ba9c5d879d014c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b24b675378a69ff254e4a4b5faa3615d4abd84d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b24b675378a69ff254e4a4b5faa3615d4abd84d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7b24b675378a69ff254e4a4b5faa3615d4abd84d", "patch": "@@ -1,3 +1,8 @@\n+2013-07-11  Teresa Johnson  <tejohnson@google.com>\n+\n+\t* vec.h (struct va_gc): Move release out-of-line.\n+\t(va_gc::release): Call ggc_free on released vec.\n+\n 2013-07-11  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \t* config/rs6000/rs6000.md (\"\"*tls_gd_low<TLSmode:tls_abi_suffix>\"):"}, {"sha": "09a1d0a4d86f02cfafe0564b9c61ea7864b7d3d6", "filename": "gcc/vec.h", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b24b675378a69ff254e4a4b5faa3615d4abd84d/gcc%2Fvec.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b24b675378a69ff254e4a4b5faa3615d4abd84d/gcc%2Fvec.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvec.h?ref=7b24b675378a69ff254e4a4b5faa3615d4abd84d", "patch": "@@ -337,10 +337,22 @@ struct va_gc\n \t\t       CXX_MEM_STAT_INFO);\n \n   template<typename T, typename A>\n-  static void release (vec<T, A, vl_embed> *&v) { v = NULL; }\n+  static void release (vec<T, A, vl_embed> *&v);\n };\n \n \n+/* Free GC memory used by V and reset V to NULL.  */\n+\n+template<typename T, typename A>\n+inline void\n+va_gc::release (vec<T, A, vl_embed> *&v)\n+{\n+  if (v)\n+    ::ggc_free (v);\n+  v = NULL;\n+}\n+\n+\n /* Allocator for GC memory.  Ensure there are at least RESERVE free\n    slots in V.  If EXACT is true, grow exactly, else grow\n    exponentially.  As a special case, if the vector had not been"}]}