{"sha": "90fb0c24988b0aa9a250761c457f6c22ee6f3651", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTBmYjBjMjQ5ODhiMGFhOWEyNTA3NjFjNDU3ZjZjMjJlZTZmMzY1MQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-06-22T02:36:09Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-06-22T02:36:09Z"}, "message": "* ltconfig, ltmain.sh: Update to libtool 1.2f.\n\nFrom-SVN: r27699", "tree": {"sha": "132e0462eede9134e867f2b105af6e4beace24ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/132e0462eede9134e867f2b105af6e4beace24ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90fb0c24988b0aa9a250761c457f6c22ee6f3651", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90fb0c24988b0aa9a250761c457f6c22ee6f3651", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90fb0c24988b0aa9a250761c457f6c22ee6f3651", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90fb0c24988b0aa9a250761c457f6c22ee6f3651/comments", "author": null, "committer": null, "parents": [{"sha": "bd0eb0baa5035f68946a985f99d271d714514128", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd0eb0baa5035f68946a985f99d271d714514128", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd0eb0baa5035f68946a985f99d271d714514128"}], "stats": {"total": 4778, "additions": 3516, "deletions": 1262}, "files": [{"sha": "fc97172cac2655d94f34b13ac6bc94b6ccc0e3a1", "filename": "ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90fb0c24988b0aa9a250761c457f6c22ee6f3651/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90fb0c24988b0aa9a250761c457f6c22ee6f3651/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=90fb0c24988b0aa9a250761c457f6c22ee6f3651", "patch": "@@ -23,6 +23,10 @@ Thu May 20 10:00:42 1999   Stephen L Moshier  <moshier@world.std.com>\n \n \t * Makefile.in (GCC_FOR_TARGET): Add -I$(build_tooldir)/include.\n \n+1999-04-23  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* ltconfig, ltmain.sh: Update to libtool 1.2f.\n+\n Tue Apr 13 22:50:54 1999  Donn Terry (donn@interix.com)\n                           Martin Heller (Ing.-Buero_Heller@t-online.de)\n "}, {"sha": "ab304fd3b731521a2bc5144cc7b00d74b2423153", "filename": "ltconfig", "status": "modified", "additions": 1466, "deletions": 359, "changes": 1825, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90fb0c24988b0aa9a250761c457f6c22ee6f3651/ltconfig", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90fb0c24988b0aa9a250761c457f6c22ee6f3651/ltconfig", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltconfig?ref=90fb0c24988b0aa9a250761c457f6c22ee6f3651", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n \n # ltconfig - Create a system-specific libtool.\n-# Copyright (C) 1996-1998 Free Software Foundation, Inc.\n+# Copyright (C) 1996-1999 Free Software Foundation, Inc.\n # Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996\n #\n # This file is free software; you can redistribute it and/or modify it\n@@ -31,6 +31,13 @@ echo=echo\n if test \"X$1\" = X--no-reexec; then\n   # Discard the --no-reexec flag, and continue.\n   shift\n+elif test \"X$1\" = X--fallback-echo; then\n+  # used as fallback echo\n+  shift\n+  cat <<EOF\n+$*\n+EOF\n+  exit 0\n elif test \"X`($echo '\\t') 2>/dev/null`\" = 'X\\t'; then\n   # Yippee, $echo works!\n   :\n@@ -39,19 +46,45 @@ else\n   exec \"$SHELL\" \"$0\" --no-reexec ${1+\"$@\"}\n fi\n \n+# Find the correct PATH separator.  Usually this is `:', but\n+# DJGPP uses `;' like DOS.\n+if test \"X${PATH_SEPARATOR+set}\" != \"Xset\"; then\n+  UNAME=${UNAME-`uname 2>/dev/null`}\n+  case X$UNAME in\n+    *-DOS) PATH_SEPARATOR=';' ;;\n+    *)     PATH_SEPARATOR=':' ;;\n+  esac\n+fi\n+\n # The HP-UX ksh and POSIX shell print the target directory to stdout\n # if CDPATH is set.\n if test \"${CDPATH+set}\" = set; then CDPATH=; export CDPATH; fi\n \n-if test \"X`($echo '\\t') 2>/dev/null`\" != 'X\\t'; then\n+if test \"X${echo_test_string+set}\" != \"Xset\"; then\n+  # find a string as large as possible, as long as the shell can cope with it\n+  for cmd in 'sed 50q \"$0\"' 'sed 20q \"$0\"' 'sed 10q \"$0\"' 'sed 2q \"$0\"' 'echo test'; do\n+    # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...\n+    if (echo_test_string=\"`eval $cmd`\") 2>/dev/null &&\n+       echo_test_string=\"`eval $cmd`\" &&\n+       (test \"X$echo_test_string\" = \"X$echo_test_string\") 2>/dev/null; then\n+      break\n+    fi\n+  done\n+fi\n+\n+if test \"X`($echo '\\t') 2>/dev/null`\" != 'X\\t' ||\n+   test \"X`($echo \"$echo_test_string\") 2>/dev/null`\" != X\"$echo_test_string\"; then\n   # The Solaris, AIX, and Digital Unix default echo programs unquote\n   # backslashes.  This makes it impossible to quote backslashes using\n   #   echo \"$something\" | sed 's/\\\\/\\\\\\\\/g'\n   #\n   # So, first we look for a working echo in the user's PATH.\n-  IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+\n+  IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n   for dir in $PATH /usr/ucb; do\n-    if test -f $dir/echo && test \"X`($dir/echo '\\t') 2>/dev/null`\" = 'X\\t'; then\n+    if test -f $dir/echo &&\n+       test \"X`($dir/echo '\\t') 2>/dev/null`\" = 'X\\t' &&\n+       test \"X`($dir/echo \"$echo_test_string\") 2>/dev/null`\" = X\"$echo_test_string\"; then\n       echo=\"$dir/echo\"\n       break\n     fi\n@@ -60,20 +93,53 @@ if test \"X`($echo '\\t') 2>/dev/null`\" != 'X\\t'; then\n \n   if test \"X$echo\" = Xecho; then\n     # We didn't find a better echo, so look for alternatives.\n-    if test \"X`(print -r '\\t') 2>/dev/null`\" = 'X\\t'; then\n+    if test \"X`(print -r '\\t') 2>/dev/null`\" = 'X\\t' &&\n+       test \"X`(print -r \"$echo_test_string\") 2>/dev/null`\" = X\"$echo_test_string\"; then\n       # This shell has a builtin print -r that does the trick.\n       echo='print -r'\n     elif test -f /bin/ksh && test \"X$CONFIG_SHELL\" != X/bin/ksh; then\n       # If we have ksh, try running ltconfig again with it.\n+      ORIGINAL_CONFIG_SHELL=\"${CONFIG_SHELL-/bin/sh}\"\n+      export ORIGINAL_CONFIG_SHELL\n       CONFIG_SHELL=/bin/ksh\n       export CONFIG_SHELL\n       exec \"$CONFIG_SHELL\" \"$0\" --no-reexec ${1+\"$@\"}\n     else\n       # Try using printf.\n-      echo='printf %s\\n'\n-      if test \"X`($echo '\\t') 2>/dev/null`\" != 'X\\t'; then\n-        # Oops.  We lost completely, so just stick with echo.\n-        echo=echo\n+      echo='printf \"%s\\n\"'\n+      if test \"X`($echo '\\t') 2>/dev/null`\" = 'X\\t' &&\n+\t test \"X`($echo \"$echo_test_string\") 2>/dev/null`\" = X\"$echo_test_string\"; then\n+\t# Cool, printf works\n+\t:\n+      elif test \"X`(\"$ORIGINAL_CONFIG_SHELL\" \"$0\" --fallback-echo '\\t') 2>/dev/null`\" = 'X\\t' &&\n+\t   test \"X`(\"$ORIGINAL_CONFIG_SHELL\" \"$0\" --fallback-echo \"$echo_test_string\") 2>/dev/null`\" = X\"$echo_test_string\"; then\n+\tCONFIG_SHELL=\"$ORIGINAL_CONFIG_SHELL\"\n+\texport CONFIG_SHELL\n+\tSHELL=\"$CONFIG_SHELL\"\n+\texport SHELL\n+\techo=\"$CONFIG_SHELL $0 --fallback-echo\"\n+      elif test \"X`(\"$CONFIG_SHELL\" \"$0\" --fallback-echo '\\t') 2>/dev/null`\" = 'X\\t' &&\n+\t   test \"X`(\"$CONFIG_SHELL\" \"$0\" --fallback-echo \"$echo_test_string\") 2>/dev/null`\" = X\"$echo_test_string\"; then\n+\techo=\"$CONFIG_SHELL $0 --fallback-echo\"\n+      else\n+\t# maybe with a smaller string...\n+\tprev=:\n+\n+\tfor cmd in 'echo test' 'sed 2q \"$0\"' 'sed 10q \"$0\"' 'sed 20q \"$0\"' 'sed 50q \"$0\"'; do\n+\t  if (test \"X$echo_test_string\" = \"X`eval $cmd`\") 2>/dev/null; then\n+\t    break\n+\t  fi\n+\t  prev=\"$cmd\"\n+\tdone\n+\n+\tif test \"$prev\" != 'sed 50q \"$0\"'; then\n+\t  echo_test_string=`eval $prev`\n+\t  export echo_test_string\n+\t  exec \"${ORIGINAL_CONFIG_SHELL}\" \"$0\" ${1+\"$@\"}\n+\telse\n+\t  # Oops.  We lost completely, so just stick with echo.\n+\t  echo=echo\n+\tfi\n       fi\n     fi\n   fi\n@@ -87,13 +153,18 @@ sed_quote_subst='s/\\([\\\\\"\\\\`$\\\\\\\\]\\)/\\\\\\1/g'\n # Same as above, but do not quote variable references.\n double_quote_subst='s/\\([\\\\\"\\\\`\\\\\\\\]\\)/\\\\\\1/g'\n \n+# Sed substitution to delay expansion of an escaped shell variable in a\n+# double_quote_subst'ed string.\n+delay_variable_subst='s/\\\\\\\\\\\\\\\\\\\\\\$/\\\\\\\\\\\\$/g'\n+\n # The name of this program.\n progname=`$echo \"X$0\" | $Xsed -e 's%^.*/%%'`\n \n # Constants:\n PROGRAM=ltconfig\n PACKAGE=libtool\n-VERSION=1.2b\n+VERSION=1.2f\n+TIMESTAMP=\" (1.385 1999/03/15 17:24:54)\"\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.c 1>&5'\n ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.c $LIBS 1>&5'\n rm=\"rm -f\"\n@@ -106,6 +177,8 @@ can_build_shared=yes\n enable_shared=yes\n # All known linkers require a `.a' archive for static linking.\n enable_static=yes\n+enable_fast_install=yes\n+enable_dlopen=unknown\n ltmain=\n silent=\n srcdir=\n@@ -117,8 +190,11 @@ ofile=\"$default_ofile\"\n verify_host=yes\n with_gcc=no\n with_gnu_ld=no\n+need_locks=yes\n+ac_ext=c\n objext=o\n libext=a\n+cache_file=\n \n old_AR=\"$AR\"\n old_CC=\"$CC\"\n@@ -150,13 +226,16 @@ do\n \n   case \"$option\" in\n   --help) cat <<EOM\n-Usage: $progname [OPTION]... LTMAIN [HOST]\n+Usage: $progname [OPTION]... [HOST [LTMAIN]]\n \n Generate a system-specific libtool script.\n \n     --debug                enable verbose shell tracing\n     --disable-shared       do not build shared libraries\n     --disable-static       do not build static libraries\n+    --disable-fast-install do not optimize for fast installation\n+    --enable-dlopen        enable dlopen support\n+    --enable-dlopen-self   enable support for dlopening programs\n     --help                 display this help and exit\n     --no-verify            do not verify that HOST is a valid host type\n -o, --output=FILE          specify the output file [default=$default_ofile]\n@@ -166,9 +245,11 @@ Generate a system-specific libtool script.\n     --version              output version information and exit\n     --with-gcc             assume that the GNU C compiler will be used\n     --with-gnu-ld          assume that the C compiler uses the GNU linker\n+    --disable-lock         disable file locking\n+    --cache-file=FILE      configure cache file\n \n-LTMAIN is the \\`ltmain.sh' shell script fragment that provides basic libtool\n-functionality.\n+LTMAIN is the \\`ltmain.sh' shell script fragment or \\`ltmain.c' program\n+that provides basic libtool functionality.\n \n HOST is the canonical host system name [default=guessed].\n EOM\n@@ -184,6 +265,10 @@ EOM\n \n   --disable-static) enable_static=no ;;\n \n+  --disable-fast-install) enable_fast_install=no ;;\n+\n+  --enable-dlopen) enable_dlopen=yes ;;\n+\n   --quiet | --silent) silent=yes ;;\n \n   --srcdir) prev=srcdir ;;\n@@ -194,11 +279,15 @@ EOM\n   --output | -o) prev=ofile ;;\n   --output=*) ofile=\"$optarg\" ;;\n \n-  --version) echo \"$PROGRAM (GNU $PACKAGE) $VERSION\"; exit 0 ;;\n+  --version) echo \"$PROGRAM (GNU $PACKAGE) $VERSION$TIMESTAMP\"; exit 0 ;;\n \n   --with-gcc) with_gcc=yes ;;\n   --with-gnu-ld) with_gnu_ld=yes ;;\n \n+  --disable-lock) need_locks=no ;;\n+\n+  --cache-file=*) cache_file=\"$optarg\" ;;\n+\n   -*)\n     echo \"$progname: unrecognized option \\`$option'\" 1>&2\n     echo \"$help\" 1>&2\n@@ -269,6 +358,11 @@ exec 5>>./config.log\n if test \"${LC_ALL+set}\" = set; then LC_ALL=C; export LC_ALL; fi\n if test \"${LANG+set}\"   = set; then LANG=C;   export LANG;   fi\n \n+if test -n \"$cache_file\" && test -r \"$cache_file\"; then\n+  echo \"loading cache $cache_file within ltconfig\"\n+  . $cache_file\n+fi\n+\n if (echo \"testing\\c\"; echo 1,2,3) | grep c >/dev/null; then\n   # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.\n   if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then\n@@ -282,8 +376,8 @@ else\n fi\n \n if test -z \"$srcdir\"; then\n-  # Assume the source directory is the same one as the path to ltmain.sh.\n-  srcdir=`$echo \"$ltmain\" | $Xsed -e 's%/[^/]*$%%'`\n+  # Assume the source directory is the same one as the path to LTMAIN.\n+  srcdir=`$echo \"X$ltmain\" | $Xsed -e 's%/[^/]*$%%'`\n   test \"$srcdir\" = \"$ltmain\" && srcdir=.\n fi\n \n@@ -374,7 +468,7 @@ if test \"${RANLIB+set}\" != \"set\"; then\n   result=no\n \n   echo $ac_n \"checking for ranlib... $ac_c\" 1>&6\n-  IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n   for dir in $PATH; do\n     test -z \"$dir\" && dir=.\n     if test -f $dir/ranlib; then\n@@ -389,11 +483,11 @@ if test \"${RANLIB+set}\" != \"set\"; then\n fi\n \n if test -n \"$RANLIB\"; then\n-  old_archive_cmds=\"$old_archive_cmds;\\$RANLIB \\$oldlib\"\n-  old_postinstall_cmds=\"\\$RANLIB \\$oldlib;$old_postinstall_cmds\"\n+  old_archive_cmds=\"$old_archive_cmds~\\$RANLIB \\$oldlib\"\n+  old_postinstall_cmds=\"\\$RANLIB \\$oldlib~$old_postinstall_cmds\"\n fi\n \n-# Set sane defaults for `DLLTOOL' and `AS', used on cygwin32.\n+# Set sane defaults for `DLLTOOL' and `AS', used on cygwin.\n test -z \"$DLLTOOL\" && DLLTOOL=dlltool\n test -z \"$AS\" && AS=as\n \n@@ -402,7 +496,7 @@ if test \"$with_gcc\" != yes || test -z \"$CC\"; then\n   # If CC is not set, then try to find GCC or a usable CC.\n   if test -z \"$CC\"; then\n     echo $ac_n \"checking for gcc... $ac_c\" 1>&6\n-    IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+    IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n     for dir in $PATH; do\n       IFS=\"$save_ifs\"\n       test -z \"$dir\" && dir=.\n@@ -423,7 +517,7 @@ if test \"$with_gcc\" != yes || test -z \"$CC\"; then\n   # Not \"gcc\", so try \"cc\", rejecting \"/usr/ucb/cc\".\n   if test -z \"$CC\"; then\n     echo $ac_n \"checking for cc... $ac_c\" 1>&6\n-    IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+    IFS=\"${IFS= \t}\"; save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n     cc_rejected=no\n     for dir in $PATH; do\n       test -z \"$dir\" && dir=.\n@@ -467,15 +561,15 @@ if test \"$with_gcc\" != yes || test -z \"$CC\"; then\n   # Now see if the compiler is really GCC.\n   with_gcc=no\n   echo $ac_n \"checking whether we are using GNU C... $ac_c\" 1>&6\n-  echo \"$progname:470: checking whether we are using GNU C\" >&5\n+  echo \"$progname:564: checking whether we are using GNU C\" >&5\n \n   $rm conftest.c\n   cat > conftest.c <<EOF\n #ifdef __GNUC__\n   yes;\n #endif\n EOF\n-  if { ac_try='${CC-cc} -E conftest.c'; { (eval echo $progname:478: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+  if { ac_try='${CC-cc} -E conftest.c'; { (eval echo $progname:572: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n     with_gcc=yes\n   fi\n   $rm conftest.c\n@@ -489,8 +583,8 @@ compiler=\"$2\"\n echo $ac_n \"checking for object suffix... $ac_c\" 1>&6\n $rm conftest*\n echo 'int i = 1;' > conftest.c\n-echo \"$progname:492: checking for object suffix\" >& 5\n-if { (eval echo $progname:493: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; }; then\n+echo \"$progname:586: checking for object suffix\" >& 5\n+if { (eval echo $progname:587: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; }; then\n   # Append any warnings to the config.log.\n   cat conftest.err 1>&5\n \n@@ -518,13 +612,21 @@ no_builtin_flag=\n if test \"$with_gcc\" = yes; then\n   wl='-Wl,'\n   link_static_flag='-static'\n-  no_builtin_flag=' -fno-builtin'\n \n   case \"$host_os\" in\n-  aix3* | aix4* | irix5* | irix6* | osf3* | osf4*)\n+  beos* | irix5* | irix6* | osf3* | osf4*)\n     # PIC is the default for these OSes.\n     ;;\n-  cygwin32* | mingw32* | os2*)\n+  aix*)\n+    # Below there is a dirty hack to force normal static linking with -ldl\n+    # The problem is because libdl dynamically linked with both libc and\n+    # libC (AIX C++ library), which obviously doesn't included in libraries\n+    # list by gcc. This cause undefined symbols with -static flags.\n+    # This hack allows C programs to be linked with \"-static -ldl\", but\n+    # we not sure about C++ programs.\n+    link_static_flag=\"$link_static_flag ${wl}-lC\"\n+    ;;\n+  cygwin* | mingw* | os2*)\n     # We can build DLLs from non-PIC.\n     ;;\n   amigaos*)\n@@ -558,7 +660,7 @@ else\n     # PIC (with -KPIC) is the default.\n     ;;\n \n-  cygwin32* | mingw32* | os2*)\n+  cygwin* | mingw* | os2*)\n     # We can build DLLs from non-PIC.\n     ;;\n \n@@ -574,7 +676,7 @@ else\n     special_shlib_compile_flags='-belf'\n     ;;\n \n-  solaris2*)\n+  solaris*)\n     pic_flag='-KPIC'\n     link_static_flag='-Bstatic'\n     wl='-Wl,'\n@@ -586,7 +688,7 @@ else\n     wl='-Qoption ld '\n     ;;\n \n-  sysv4.2uw2*)\n+  sysv4.2uw2* | sysv4.3* | sysv5*)\n     pic_flag='-KPIC'\n     link_static_flag='-Bstatic'\n     wl='-Wl,'\n@@ -612,33 +714,156 @@ if test -n \"$pic_flag\"; then\n   echo \"int some_variable = 0;\" > conftest.c\n   save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS $pic_flag -DPIC\"\n-  echo \"$progname:615: checking if $compiler PIC flag $pic_flag works\" >&5\n-  if { (eval echo $progname:616: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; } && test -s conftest.$objext; then\n+  echo \"$progname:717: checking if $compiler PIC flag $pic_flag works\" >&5\n+  if { (eval echo $progname:718: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; } && test -s conftest.$objext; then\n     # Append any warnings to the config.log.\n     cat conftest.err 1>&5\n+    \n+    case \"$host_os\" in\n+    hpux9* | hpux10* | hpux11*)\n+      # On HP-UX, both CC and GCC only warn that PIC is supported... then they\n+      # create non-PIC objects.  So, if there were any warnings, we assume that\n+      # PIC is not supported.\n+      if test -s conftest.err; then\n+\techo \"$ac_t\"no 1>&6\n+\tcan_build_shared=no\n+\tpic_flag=\n+      else\n+\techo \"$ac_t\"yes 1>&6\n+\tpic_flag=\" $pic_flag\"\n+      fi\n+      ;;\n+    *)\n+      echo \"$ac_t\"yes 1>&6\n+      pic_flag=\" $pic_flag\"\n+      ;;\n+    esac\n+  else\n+    # Append any errors to the config.log.\n+    cat conftest.err 1>&5\n+    can_build_shared=no\n+    pic_flag=\n+    echo \"$ac_t\"no 1>&6\n+  fi\n+  CFLAGS=\"$save_CFLAGS\"\n+  $rm conftest*\n+else\n+  echo \"$ac_t\"none 1>&6\n+fi\n \n-    # On HP-UX, both CC and GCC only warn that PIC is supported... then they\n-    # create non-PIC objects.  So, if there were any warnings, we assume that\n-    # PIC is not supported.\n+# Check to see if options -o and -c are simultaneously supported by compiler\n+echo $ac_n \"checking if $compiler supports -c -o file.o... $ac_c\" 1>&6\n+$rm conftest*\n+echo \"int some_variable = 0;\" > conftest.c\n+save_CFLAGS=\"$CFLAGS\"\n+CFLAGS=\"$CFLAGS -c -o conftest2.o\"\n+echo \"$progname:760: checking if $compiler supports -c -o file.o\" >&5\n+if { (eval echo $progname:761: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; } && test -s conftest2.o; then\n+\n+  # The compiler can only warn and ignore the option if not recognized\n+  # So say no if there are warnings\n     if test -s conftest.err; then\n       echo \"$ac_t\"no 1>&6\n-      can_build_shared=no\n-      pic_flag=\n+      compiler_c_o=no\n     else\n       echo \"$ac_t\"yes 1>&6\n-      pic_flag=\" $pic_flag\"\n+      compiler_c_o=yes\n     fi\n+else\n+  # Append any errors to the config.log.\n+  cat conftest.err 1>&5\n+  compiler_c_o=no\n+  echo \"$ac_t\"no 1>&6\n+fi\n+CFLAGS=\"$save_CFLAGS\"\n+$rm conftest*\n+\n+if test x\"$compiler_c_o\" = x\"yes\"; then\n+  # Check to see if we can write to a .lo\n+  echo $ac_n \"checking if $compiler supports -c -o file.lo... $ac_c\" 1>&6\n+  $rm conftest*\n+  echo \"int some_variable = 0;\" > conftest.c\n+  save_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"$CFLAGS -c -o conftest.lo\"\n+  echo \"$progname:788: checking if $compiler supports -c -o file.lo\" >&5\n+if { (eval echo $progname:789: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; } && test -s conftest.lo; then\n+\n+    # The compiler can only warn and ignore the option if not recognized\n+    # So say no if there are warnings\n+      if test -s conftest.err; then\n+\techo \"$ac_t\"no 1>&6\n+\tcompiler_o_lo=no\n+      else\n+\techo \"$ac_t\"yes 1>&6\n+\tcompiler_o_lo=yes\n+      fi\n   else\n     # Append any errors to the config.log.\n     cat conftest.err 1>&5\n-    can_build_shared=no\n-    pic_flag=\n+    compiler_o_lo=no\n     echo \"$ac_t\"no 1>&6\n   fi\n   CFLAGS=\"$save_CFLAGS\"\n   $rm conftest*\n else\n-  echo \"$ac_t\"none 1>&6\n+  compiler_o_lo=no\n+fi\n+\n+# Check to see if we can do hard links to lock some files if needed\n+hard_links=\"nottested\"\n+if test \"$compiler_c_o\" = no && test \"$need_locks\" != no; then\n+  # do not overwrite the value of need_locks provided by the user\n+  echo $ac_n \"checking if we can lock with hard links... $ac_c\" 1>&6\n+  hard_links=yes\n+  $rm conftest*\n+  ln conftest.a conftest.b 2>/dev/null && hard_links=no\n+  touch conftest.a\n+  ln conftest.a conftest.b 2>&5 || hard_links=no\n+  ln conftest.a conftest.b 2>/dev/null && hard_links=no\n+  echo \"$ac_t$hard_links\" 1>&6\n+  $rm conftest*\n+  if test \"$hard_links\" = no; then\n+    echo \"*** WARNING: \\`$CC' does not support \\`-c -o', so \\`make -j' may be unsafe\" >&2\n+    need_locks=warn\n+  fi\n+else\n+  need_locks=no\n+fi\n+\n+if test \"$with_gcc\" = yes; then\n+  # Check to see if options -fno-rtti -fno-exceptions are supported by compiler\n+  echo $ac_n \"checking if $compiler supports -fno-rtti -fno-exceptions ... $ac_c\" 1>&6\n+  $rm conftest*\n+  echo \"int some_variable = 0;\" > conftest.c\n+  save_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"$CFLAGS -fno-rtti -fno-exceptions -c conftest.c\"\n+  echo \"$progname:840: checking if $compiler supports -fno-rtti -fno-exceptions\" >&5\n+  if { (eval echo $progname:841: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>conftest.err; } && test -s conftest.o; then\n+\n+    # The compiler can only warn and ignore the option if not recognized\n+    # So say no if there are warnings\n+      if test -s conftest.err; then\n+\techo \"$ac_t\"no 1>&6\n+\tcompiler_rtti_exceptions=no\n+      else\n+\techo \"$ac_t\"yes 1>&6\n+\tcompiler_rtti_exceptions=yes\n+      fi\n+  else\n+    # Append any errors to the config.log.\n+    cat conftest.err 1>&5\n+    compiler_rtti_exceptions=no\n+    echo \"$ac_t\"no 1>&6\n+  fi\n+  CFLAGS=\"$save_CFLAGS\"\n+  $rm conftest*\n+\n+  if test \"$compiler_rtti_exceptions\" = \"yes\"; then\n+    no_builtin_flag=' -fno-builtin -fno-rtti -fno-exceptions'\n+  else\n+    no_builtin_flag=' -fno-builtin'\n+  fi\n+  \n fi\n \n # Check for any special shared library compilation flags.\n@@ -656,8 +881,8 @@ $rm conftest*\n echo 'main(){return(0);}' > conftest.c\n save_LDFLAGS=\"$LDFLAGS\"\n LDFLAGS=\"$LDFLAGS $link_static_flag\"\n-echo \"$progname:659: checking if $compiler static flag $link_static_flag works\" >&5\n-if { (eval echo $progname:660: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+echo \"$progname:884: checking if $compiler static flag $link_static_flag works\" >&5\n+if { (eval echo $progname:885: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   echo \"$ac_t$link_static_flag\" 1>&6\n else\n   echo \"$ac_t\"none 1>&6\n@@ -689,11 +914,17 @@ if test -z \"$LD\"; then\n   if test \"$with_gcc\" = yes; then\n     # Check if gcc -print-prog-name=ld gives a path.\n     echo $ac_n \"checking for ld used by GCC... $ac_c\" 1>&6\n-    echo \"$progname:692: checking for ld used by GCC\" >&5\n+    echo \"$progname:917: checking for ld used by GCC\" >&5\n     ac_prog=`($CC -print-prog-name=ld) 2>&5`\n     case \"$ac_prog\" in\n     # Accept absolute paths.\n-    /* | [A-Za-z]:[/\\\\]*)\n+    /* | [A-Za-z]:[\\\\/]*)\n+      re_direlt='/[^/][^/]*/\\.\\./'\n+      # Canonicalize the path of ld\n+      ac_prog=`echo $ac_prog| sed 's%\\\\\\\\%/%g'`\n+      while echo $ac_prog | grep \"$re_direlt\" > /dev/null 2>&1; do\n+\tac_prog=`echo $ac_prog| sed \"s%$re_direlt%/%\"`\n+      done\n       test -z \"$LD\" && LD=\"$ac_prog\"\n       ;;\n     \"\")\n@@ -707,14 +938,14 @@ if test -z \"$LD\"; then\n     esac\n   elif test \"$with_gnu_ld\" = yes; then\n     echo $ac_n \"checking for GNU ld... $ac_c\" 1>&6\n-    echo \"$progname:710: checking for GNU ld\" >&5\n+    echo \"$progname:941: checking for GNU ld\" >&5\n   else\n     echo $ac_n \"checking for non-GNU ld\"\"... $ac_c\" 1>&6\n-    echo \"$progname:713: checking for non-GNU ld\" >&5\n+    echo \"$progname:944: checking for non-GNU ld\" >&5\n   fi\n \n   if test -z \"$LD\"; then\n-    IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+    IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n     for ac_dir in $PATH; do\n       test -z \"$ac_dir\" && ac_dir=.\n       if test -f \"$ac_dir/$ac_prog\"; then\n@@ -759,107 +990,146 @@ echo $ac_n \"checking whether the linker ($LD) supports shared libraries... $ac_c\n \n allow_undefined_flag=\n no_undefined_flag=\n+need_lib_prefix=unknown\n+need_version=unknown\n+# when you set need_version to no, make sure it does not cause -set_version\n+# flags to be left without arguments\n archive_cmds=\n+archive_expsym_cmds=\n old_archive_from_new_cmds=\n export_dynamic_flag_spec=\n whole_archive_flag_spec=\n+thread_safe_flag_spec=\n hardcode_libdir_flag_spec=\n hardcode_libdir_separator=\n hardcode_direct=no\n hardcode_minus_L=no\n hardcode_shlibpath_var=unsupported\n runpath_var=\n-fix_srcfile_path=\n+always_export_symbols=no\n+export_symbols_cmds='$NM $libobjs | $global_symbol_pipe | sed '\\''s/.* //'\\'' | sort | uniq > $export_symbols'\n+# include_expsyms should be a list of space-separated symbols to be *always*\n+# included in the symbol list\n+include_expsyms=\n+# exclude_expsyms can be an egrep regular expression of symbols to exclude\n+# it will be wrapped by ` (' and `)$', so one must not match beginning or\n+# end of line.  Example: `a|bc|.*d.*' will exclude the symbols `a' and `bc',\n+# as well as any symbol that contains `d'.\n+exclude_expsyms=\n \n case \"$host_os\" in\n-aix3* | aix4*)\n-  # On AIX, the GNU linker works like the native linker.\n-  with_gnu_ld=no\n+cygwin* | mingw*)\n+  # FIXME: the MSVC++ port hasn't been tested in a loooong time\n+  # When not using gcc, we currently assume that we are using\n+  # Microsoft Visual C++.\n+  if test \"$with_gcc\" != yes; then\n+    with_gnu_ld=no\n+  fi\n   ;;\n+\n+freebsd2* | sunos4*)\n+  exclude_expsyms=\"_GLOBAL_OFFSET_TABLE_\"\n+  ;;\n+\n esac\n \n ld_shlibs=yes\n if test \"$with_gnu_ld\" = yes; then\n+  # If archive_cmds runs LD, not CC, wlarc should be empty\n+  wlarc='${wl}'\n \n   # See if GNU ld supports shared libraries.\n   case \"$host_os\" in\n+  aix3* | aix4*)\n+    # On AIX, the GNU linker is very broken\n+    ld_shlibs=no\n+    cat <<EOF 1>&2\n+\n+*** Warning: the GNU linker, at least up to release 2.9.1, is reported\n+*** to be unable to reliably create shared libraries on AIX.\n+*** Therefore, libtool is disabling shared libraries support.  If you\n+*** really care for shared libraries, you may want to modify your PATH\n+*** so that a non-GNU linker is found, and then restart.\n+\n+EOF\n+    ;;\n+\n   amigaos*)\n-    archive_cmds='$rm $objdir/a2ixlibrary.data;$echo \"#define NAME $libname\" > $objdir/a2ixlibrary.data;$echo \"#define LIBRARY_ID 1\" >> $objdir/a2ixlibrary.data;$echo \"#define VERSION $major\" >> $objdir/a2ixlibrary.data;$echo \"#define REVISION $revision\" >> $objdir/a2ixlibrary.data;$AR cru $lib$libobjs;$RANLIB $lib;(cd $objdir && a2ixlibrary -32)'\n+    archive_cmds='$rm $objdir/a2ixlibrary.data~$echo \"#define NAME $libname\" > $objdir/a2ixlibrary.data~$echo \"#define LIBRARY_ID 1\" >> $objdir/a2ixlibrary.data~$echo \"#define VERSION $major\" >> $objdir/a2ixlibrary.data~$echo \"#define REVISION $revision\" >> $objdir/a2ixlibrary.data~$AR cru $lib $libobjs~$RANLIB $lib~(cd $objdir && a2ixlibrary -32)'\n     hardcode_libdir_flag_spec='-L$libdir'\n     hardcode_minus_L=yes\n     ;;\n \n   sunos4*)\n-    archive_cmds='$LD -assert pure-text -Bstatic -o $lib$libobjs'\n+    archive_cmds='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linkopts'\n+    wlarc=\n     hardcode_direct=yes\n-    # The GNU linker will only hardcode -L options if -rpath is not\n-    # used, but we will be using -rpath because we set\n-    # hardcode_libdir_flag_spec below.\n-    hardcode_minus_L=no\n+    hardcode_minus_L=yes\n     hardcode_shlibpath_var=no\n     ;;\n \n-  cygwin32* | mingw32*)\n-    if test \"$with_gcc\" = yes; then\n-      # hardcode_libdir_flag_spec is actually meaningless, as there is\n-      # no search path for DLLs.\n-      hardcode_libdir_flag_spec='-L$libdir'\n-      allow_undefined_flag=unsupported\n-      # Very, very bogus.\n-      echo '\n-#include <windows.h>\n-\n-struct _reent *_impure_ptr;\n-extern struct _reent *__imp_reent_data;\n-BOOL APIENTRY\n-__dll_entry (HINSTANCE hinst, DWORD reason, LPVOID reserved)\n-{\n-  _impure_ptr = __imp_reent_data;\n-}\n-' > libtool.c\n-      archive_cmds='$CC -c '\"`pwd`\"'/libtool.c;echo EXPORTS > $soname-def;$NM$libobjs | $global_symbol_pipe | sed '\\''s/.* //'\\'' >> $soname-def;$LD -s --base-file $soname-base --dll -e ___dll_entry@12 -o $lib libtool.$objext$libobjs$deplibs;$DLLTOOL --as=$AS --dllname $soname --def $soname-def --base-file $soname-base --output-exp $soname-exp;$LD -s --base-file $soname-base $soname-exp --dll -e ___dll_entry@12 -o $lib libtool.$objext$libobjs$deplibs;$DLLTOOL --as=$AS --dllname $soname --def $soname-def --base-file $soname-base --output-exp $soname-exp;$LD $soname-exp --dll -e ___dll_entry@12 -o $lib libtool.$objext$libobjs$deplibs;$rm libtool.$objext $soname-base $soname-exp'\n-      old_archive_from_new_cmds='$DLLTOOL --as=$AS --dllname $soname --def $soname-def --output-lib $objdir/$libname.a;$rm $soname-def'\n+  beos*)\n+    if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n+      archive_cmds='$CC -nostart $libobjs $deplibs $linkopts ${wl}-soname $wl$soname -o $lib'\n     else\n-      # When not using gcc, we currently assume that we are using\n-      # Microsoft Visual C++.\n-      with_gnu_ld=no\n-      # hardcode_libdir_flag_spec is actually meaningless, as there is\n-      # no search path for DLLs.\n-      hardcode_libdir_flag_spec=' '\n-      allow_undefined_flag=unsupported\n-      # Tell ltmain to make .lib files, not .a files.\n-      libext=lib\n-      # FIXME: Setting linknames here is a bad hack.\n-      archive_cmds='$CC -o $lib$libobjs`echo \"$deplibs\" | sed -e '\\''s/ -lc$//'\\''` -link -dll;linknames='\n-      # The linker will automatically build a .lib file if we build a DLL.\n-      old_archive_from_new_cmds='true'\n-      # FIXME: Should let the user specify the lib program.\n-      old_archive_cmds='lib /OUT:$oldlib$oldobjs'\n-      fix_srcfile_path='`cygpath -w $srcfile`'\n+      ld_shlibs=no\n     fi\n     ;;\n \n+  cygwin* | mingw*)\n+    # hardcode_libdir_flag_spec is actually meaningless, as there is\n+    # no search path for DLLs.\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    allow_undefined_flag=unsupported\n+    always_export_symbols=yes\n+\n+    # Extract the symbol export list from an `--export-all' def file,\n+    # then regenerate the def file from the symbol export list, so that\n+    # the compiled dll only exports the symbol export list.\n+    export_symbols_cmds='rm -f $objdir/$soname-ltdll.c~\n+      sed -e \"/^# \\/\\* ltdll.c starts here \\*\\//,/^# \\/\\* ltdll.c ends here \\*\\// { s/^# //; p; }\" -e d < $0 > $objdir/$soname-ltdll.c~\n+      (cd $objdir && $CC -c $soname-ltdll.c)~\n+      $DLLTOOL --export-all --exclude-symbols DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12 --output-def $objdir/$soname-def  $objdir/$soname-ltdll.$objext $libobjs~\n+      sed -e \"1,/EXPORTS/d\" -e \"s/ @ [0-9]* ; *//\" < $objdir/$soname-def > $export_symbols'\n+\n+    archive_expsym_cmds='echo EXPORTS > $objdir/$soname-def~\n+      _lt_hint=1;\n+      for symbol in `cat $export_symbols`; do\n+        echo \"\t\\$symbol @ \\$_lt_hint ; \" >> $objdir/$soname-def;\n+\t_lt_hint=`expr 1 + \\$_lt_hint`;\n+      done~\n+      $CC -Wl,--base-file,$objdir/$soname-base -Wl,--dll -nostartfiles -Wl,-e,__cygwin_dll_entry@12 -o $lib $objdir/$soname-ltdll.$objext $libobjs $deplibs $linkopts~\n+      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12 --def $objdir/$soname-def --base-file $objdir/$soname-base --output-exp $objdir/$soname-exp~\n+      $CC -Wl,--base-file,$objdir/$soname-base $objdir/$soname-exp -Wl,--dll -nostartfiles -Wl,-e,__cygwin_dll_entry@12 -o $lib $objdir/$soname-ltdll.$objext $libobjs $deplibs $linkopts~\n+      $DLLTOOL --as=$AS --dllname $soname --exclude-symbols DllMain@12,_cygwin_dll_entry@12,_cygwin_noncygwin_dll_entry@12 --def $objdir/$soname-def --base-file $objdir/$soname-base --output-exp $objdir/$soname-exp~\n+      $CC $objdir/$soname-exp -Wl,--dll -nostartfiles -Wl,-e,__cygwin_dll_entry@12 -o $lib $objdir/$soname-ltdll.$objext $libobjs $deplibs $linkopts'\n+\n+      old_archive_from_new_cmds='$DLLTOOL --as=$AS --dllname $soname --def $objdir/$soname-def --output-lib $objdir/$libname.a'\n+    ;;\n+\n   *)\n     if $LD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then\n-      archive_cmds='$CC -shared ${wl}-soname $wl$soname -o $lib$libobjs'\n+      archive_cmds='$CC -shared $libobjs $deplibs $linkopts ${wl}-soname $wl$soname -o $lib'\n+      archive_expsym_cmds='$CC -shared $libobjs $deplibs $linkopts ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'\n     else\n       ld_shlibs=no\n     fi\n     ;;\n   esac\n \n-  if test \"$ld_shlibs\" = yes && test \"$with_gnu_ld\" = yes; then\n+  if test \"$ld_shlibs\" = yes; then\n     runpath_var=LD_RUN_PATH\n     hardcode_libdir_flag_spec='${wl}--rpath ${wl}$libdir'\n     export_dynamic_flag_spec='${wl}--export-dynamic'\n-    whole_archive_flag_spec='${wl}--whole-archive$convenience ${wl}--no-whole-archive'\n+    whole_archive_flag_spec=\"$wlarc\"'--whole-archive$convenience '\"$wlarc\"'--no-whole-archive'\n   fi\n else\n   # PORTME fill in a description of your system's linker (not GNU ld)\n   case \"$host_os\" in\n   aix3*)\n     allow_undefined_flag=unsupported\n-    archive_cmds='$NM$libobjs | $global_symbol_pipe | sed '\\''s/.* //'\\'' > $lib.exp;$LD -o $objdir/$soname$libobjs -bE:$lib.exp -T512 -H512 -bM:SRE;$AR cru $lib $objdir/$soname'\n+    always_export_symbols=yes\n+    archive_expsym_cmds='$LD -o $objdir/$soname $libobjs $deplibs $linkopts -bE:$export_symbols -T512 -H512 -bM:SRE~$AR cru $lib $objdir/$soname'\n     # Note: this linker hardcodes the directories in LIBPATH if there\n     # are no directories specified by -L.\n     hardcode_minus_L=yes\n@@ -871,96 +1141,99 @@ else\n     ;;\n \n   aix4*)\n-    allow_undefined_flag=unsupported\n-    archive_cmds='$NM$libobjs | $global_symbol_pipe | sed '\\''s/.* //'\\'' > $lib.exp;$CC -o $objdir/$soname$libobjs ${wl}-bE:$lib.exp ${wl}-bM:SRE ${wl}-bnoentry;$AR cru $lib $objdir/$soname'\n-    hardcode_direct=yes\n+    allow_undefined_flag=\n+    if test \"$with_gcc\" = yes; then\n+      if strings `${CC} -print-prog-name=collect2` | \\\n+\t grep resolve_lib_name >/dev/null\n+      then\n+\t# We have reworked collect2\n+\thardcode_direct=yes\n+      else\n+\t# We have old collect2\n+\thardcode_direct=unsupported\n+      fi\n+      archive_cmds='$CC -shared ${wl}-bnoentry -o $objdir/$soname $libobjs $deplibs $linkopts'\n+    else\n+      always_export_symbols=yes\n+      archive_expsym_cmds='$CC -o $objdir/$soname $libobjs $deplibs $linkopts ${wl}-bE:$export_symbols ${wl}-bM:SRE ${wl}-bnoentry'\n+      hardcode_direct=yes\n+    fi\n     hardcode_minus_L=yes\n-    ;;\n+    # Though LIBPATH variable hardcodes shlibpath into executable,\n+    # it doesn't affect searching for -l* libraries; this confuses\n+    # tests in mdemo.\n+    hardcode_shlibpath_var=unsupported\n+    hardcode_libdir_flag_spec='-L$libdir'\n+   ;;\n \n   amigaos*)\n-    archive_cmds='$rm $objdir/a2ixlibrary.data;$echo \"#define NAME $libname\" > $objdir/a2ixlibrary.data;$echo \"#define LIBRARY_ID 1\" >> $objdir/a2ixlibrary.data;$echo \"#define VERSION $major\" >> $objdir/a2ixlibrary.data;$echo \"#define REVISION $revision\" >> $objdir/a2ixlibrary.data;$AR cru $lib$libobjs;$RANLIB $lib;(cd $objdir && a2ixlibrary -32)'\n+    archive_cmds='$rm $objdir/a2ixlibrary.data~$echo \"#define NAME $libname\" > $objdir/a2ixlibrary.data~$echo \"#define LIBRARY_ID 1\" >> $objdir/a2ixlibrary.data~$echo \"#define VERSION $major\" >> $objdir/a2ixlibrary.data~$echo \"#define REVISION $revision\" >> $objdir/a2ixlibrary.data~$AR cru $lib $libobjs~$RANLIB $lib~(cd $objdir && a2ixlibrary -32)'\n     hardcode_libdir_flag_spec='-L$libdir'\n     hardcode_minus_L=yes\n     ;;\n \n-  cygwin32* | mingw32*)\n-    if test \"$with_gcc\" = yes; then\n-      # hardcode_libdir_flag_spec is actually meaningless, as there is\n-      # no search path for DLLs.\n-      hardcode_libdir_flag_spec='-L$libdir'\n-      allow_undefined_flag=unsupported\n-      # Very, very bogus.\n-      echo '\n-#include <windows.h>\n-\n-struct _reent *_impure_ptr;\n-extern struct _reent *__imp_reent_data;\n-BOOL APIENTRY\n-__dll_entry (HINSTANCE hinst, DWORD reason, LPVOID reserved)\n-{\n-  _impure_ptr = __imp_reent_data;\n-}\n-' > libtool.c\n-      archive_cmds='$CC -c '\"`pwd`\"'/libtool.c;echo EXPORTS > $soname-def;$NM$libobjs | $global_symbol_pipe | sed '\\''s/.* //'\\'' >> $soname-def;$LD -s --base-file $soname-base --dll -e ___dll_entry@12 -o $lib libtool.$objext$libobjs$deplibs;$DLLTOOL --as=$AS --dllname $soname --def $soname-def --base-file $soname-base --output-exp $soname-exp;$LD -s --base-file $soname-base $soname-exp --dll -e ___dll_entry@12 -o $lib libtool.$objext$libobjs$deplibs;$DLLTOOL --as=$AS --dllname $soname --def $soname-def --base-file $soname-base --output-exp $soname-exp;$LD $soname-exp --dll -e ___dll_entry@12 -o $lib libtool.$objext$libobjs$deplibs;$rm libtool.$objext $soname-base $soname-exp'\n-      old_archive_from_new_cmds='$DLLTOOL --as=$AS --dllname $soname --def $soname-def --output-lib $objdir/$libname.a;$rm $soname-def'\n-    else\n-      # When not using gcc, we currently assume that we are using\n-      # Microsoft Visual C++.\n-      # hardcode_libdir_flag_spec is actually meaningless, as there is\n-      # no search path for DLLs.\n-      hardcode_libdir_flag_spec=' '\n-      allow_undefined_flag=unsupported\n-      # Tell ltmain to make .lib files, not .a files.\n-      libext=lib\n-      # FIXME: Setting linknames here is a bad hack.\n-      archive_cmds='$CC -o $lib$libobjs`echo \"$deplibs\" | sed -e '\\''s/ -lc$//'\\''` -link -dll;linknames='\n-      # The linker will automatically build a .lib file if we build a DLL.\n-      old_archive_from_new_cmds='true'\n-      # FIXME: Should let the user specify the lib program.\n-      old_archive_cmds='lib /OUT:$oldlib$oldobjs'\n-      fix_srcfile_path='`cygpath -w $srcfile`'\n-    fi\n+  cygwin* | mingw*)\n+    # When not using gcc, we currently assume that we are using\n+    # Microsoft Visual C++.\n+    # hardcode_libdir_flag_spec is actually meaningless, as there is\n+    # no search path for DLLs.\n+    hardcode_libdir_flag_spec=' '\n+    allow_undefined_flag=unsupported\n+    # Tell ltmain to make .lib files, not .a files.\n+    libext=lib\n+    # FIXME: Setting linknames here is a bad hack.\n+    archive_cmds='$CC -o $lib $libobjs $linkopts `echo \"$deplibs\" | sed -e '\\''s/ -lc$//'\\''` -link -dll~linknames='\n+    # The linker will automatically build a .lib file if we build a DLL.\n+    old_archive_from_new_cmds='true'\n+    # FIXME: Should let the user specify the lib program.\n+    old_archive_cmds='lib /OUT:$oldlib$oldobjs'\n+    fix_srcfile_path='`cygpath -w $srcfile`'\n+    ;;\n+\n+  freebsd1*)\n+    ld_shlibs=no\n+    can_build_shared=no\n     ;;\n \n   # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor\n   # support.  Future versions do this automatically, but an explicit c++rt0.o\n   # does not break anything, and helps significantly (at the cost of a little\n   # extra space).\n   freebsd2.2*)\n-    archive_cmds='$LD -Bshareable -o $lib$libobjs /usr/lib/c++rt0.o'\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linkopts /usr/lib/c++rt0.o'\n     hardcode_libdir_flag_spec='-R$libdir'\n     hardcode_direct=yes\n-    hardcode_minus_L=yes\n+    hardcode_minus_L=no # verified on 2.2.6\n     hardcode_shlibpath_var=no\n     ;;\n \n   # Unfortunately, older versions of FreeBSD 2 do not have this feature.\n   freebsd2*)\n-    archive_cmds='$LD -Bshareable -o $lib$libobjs'\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linkopts'\n     hardcode_direct=yes\n     hardcode_minus_L=yes\n     hardcode_shlibpath_var=no\n     ;;\n \n-  # FreeBSD 3, at last, uses gcc -shared to do shared libraries.\n-  freebsd3*)\n-    archive_cmds='$CC -shared -o $lib$libobjs'\n+  # FreeBSD 3 and greater uses gcc -shared to do shared libraries.\n+  freebsd*)\n+    archive_cmds='$CC -shared -o $lib $libobjs $deplibs $linkopts'\n     hardcode_libdir_flag_spec='-R$libdir'\n     hardcode_direct=yes\n     hardcode_minus_L=no\n     hardcode_shlibpath_var=no\n     ;;\n \n   hpux9*)\n-    archive_cmds='$rm $objdir/$soname;$LD -b +s +b $install_libdir -o $objdir/$soname$libobjs;mv $objdir/$soname $lib'\n+    archive_cmds='$rm $objdir/$soname~$LD -b +s +b $install_libdir -o $objdir/$soname $libobjs $deplibs $linkopts~test $objdir/$soname = $lib || mv $objdir/$soname $lib'\n     hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'\n     hardcode_direct=yes\n     hardcode_minus_L=yes\n     export_dynamic_flag_spec='${wl}-E'\n     ;;\n \n   hpux10* | hpux11*)\n-    archive_cmds='$LD -b +h $soname +s +b $install_libdir -o $lib$libobjs'\n+    archive_cmds='$LD -b +h $soname +s +b $install_libdir -o $lib $libobjs $deplibs $linkopts'\n     hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'\n     hardcode_direct=yes\n     hardcode_minus_L=yes\n@@ -969,23 +1242,27 @@ __dll_entry (HINSTANCE hinst, DWORD reason, LPVOID reserved)\n \n   irix5* | irix6*)\n     if test \"$with_gcc\" = yes; then\n-      archive_cmds='$CC -shared -o $lib ${wl}-soname ${wl}$soname ${wl}-set_version ${wl}$verstring$libobjs'\n+      archive_cmds='$CC -shared $libobjs $deplibs $linkopts ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` -o $lib'\n     else\n-      archive_cmds='$LD -shared -o $lib -soname $soname -set_version $verstring$libobjs'\n+      archive_cmds='$LD -shared $libobjs $deplibs $linkopts -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -o $lib'\n     fi\n     hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n+    hardcode_libdir_separator=:\n     ;;\n \n   netbsd*)\n-    # Tested with NetBSD 1.2 ld\n-    archive_cmds='$LD -Bshareable -o $lib$libobjs'\n-    hardcode_libdir_flag_spec='-R$libdir'\n+    if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then\n+      archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linkopts'  # a.out\n+    else\n+      archive_cmds='$LD -shared -o $lib $libobjs $deplibs $linkopts'      # ELF\n+    fi\n+    hardcode_libdir_flag_spec='${wl}-R$libdir'\n     hardcode_direct=yes\n     hardcode_shlibpath_var=no\n     ;;\n \n   openbsd*)\n-    archive_cmds='$LD -Bshareable -o $lib$libobjs'\n+    archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linkopts'\n     hardcode_libdir_flag_spec='-R$libdir'\n     hardcode_direct=yes\n     hardcode_shlibpath_var=no\n@@ -995,46 +1272,70 @@ __dll_entry (HINSTANCE hinst, DWORD reason, LPVOID reserved)\n     hardcode_libdir_flag_spec='-L$libdir'\n     hardcode_minus_L=yes\n     allow_undefined_flag=unsupported\n-    archive_cmds='$echo \"LIBRARY $libname INITINSTANCE\" > $objdir/$libname.def;$echo \"DESCRIPTION \\\"$libname\\\"\" >> $objdir/$libname.def;$echo DATA >> $objdir/$libname.def;$echo \" SINGLE NONSHARED\" >> $objdir/$libname.def;$echo EXPORTS >> $objdir/$libname.def;emxexp$libobjs >> $objdir/$libname.def;$CC -Zdll -Zcrtdll -o $lib$libobjs $objdir/$libname.def'\n+    archive_cmds='$echo \"LIBRARY $libname INITINSTANCE\" > $objdir/$libname.def~$echo \"DESCRIPTION \\\"$libname\\\"\" >> $objdir/$libname.def~$echo DATA >> $objdir/$libname.def~$echo \" SINGLE NONSHARED\" >> $objdir/$libname.def~$echo EXPORTS >> $objdir/$libname.def~emxexp $libobjs >> $objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $linkopts $objdir/$libname.def'\n     old_archive_from_new_cmds='emximp -o $objdir/$libname.a $objdir/$libname.def'\n     ;;\n \n   osf3* | osf4*)\n-    allow_undefined_flag=' -expect_unresolved \\*'\n-    archive_cmds='$LD -shared${allow_undefined_flag} -o $lib -soname $soname -set_version $verstring$libobjs$deplibs'\n+    if test \"$with_gcc\" = yes; then\n+      allow_undefined_flag=' ${wl}-expect_unresolved ${wl}\\*'\n+      archive_cmds='$CC -shared${allow_undefined_flag} $libobjs $deplibs $linkopts ${wl}-soname ${wl}$soname `test -n \"$verstring\" && echo ${wl}-set_version ${wl}$verstring` -o $lib'\n+    else\n+      allow_undefined_flag=' -expect_unresolved \\*'\n+      archive_cmds='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linkopts -soname $soname `test -n \"$verstring\" && echo -set_version $verstring` -o $lib'\n+    fi\n     hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'\n     hardcode_libdir_separator=:\n     ;;\n \n   sco3.2v5*)\n-    archive_cmds='$LD -G -o $lib$libobjs'\n+    archive_cmds='$LD -G -o $lib $libobjs $deplibs $linkopts'\n     hardcode_direct=yes\n     ;;\n \n-  solaris2*)\n+  solaris*)\n     no_undefined_flag=' -z text'\n-    archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib$libobjs'\n+    # $CC -shared without GNU ld will not create a library from C++\n+    # object files and a static libstdc++, better avoid it by now\n+    archive_cmds='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linkopts'\n+    archive_expsym_cmds='$echo \"{ global:\" > $lib.exp~cat $export_symbols | sed -e \"s/\\(.*\\)/\\1;/\" >> $lib.exp~$echo \"local: *; };\" >> $lib.exp~\n+\t\t$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linkopts~$rm $lib.exp'\n     hardcode_libdir_flag_spec='-R$libdir'\n     hardcode_shlibpath_var=no\n-\n-    # Solaris 2 before 2.5 hardcodes -L paths.\n-    case \"$host_os\" in\n-    solaris2.[0-4]*)\n-      hardcode_minus_L=yes\n-      ;;\n-    esac\n     ;;\n \n   sunos4*)\n-    archive_cmds='$LD -assert pure-text -Bstatic -o $lib$libobjs'\n+    # Why do we need -Bstatic?  To avoid inter-library dependencies, maybe...\n+    if test \"$with_gcc\" = yes; then\n+      # Use -fPIC here because libgcc is multilibbed\n+      archive_cmds='$CC -shared ${wl}-Bstatic -fPIC -o $lib $libobjs $deplibs $linkopts'\n+    else\n+      archive_cmds='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linkopts'\n+    fi\n     hardcode_libdir_flag_spec='-L$libdir'\n     hardcode_direct=yes\n     hardcode_minus_L=yes\n     hardcode_shlibpath_var=no\n     ;;\n \n+  sysv4.3*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linkopts'\n+    hardcode_direct=no\n+    hardcode_minus_L=no\n+    hardcode_shlibpath_var=no\n+    export_dynamic_flag_spec='-Bexport'\n+    ;;\n+\n   uts4*)\n-    archive_cmds='$LD -G -h $soname -o $lib$libobjs'\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linkopts'\n+    hardcode_libdir_flag_spec='-L$libdir'\n+    hardcode_direct=no\n+    hardcode_minus_L=no\n+    hardcode_shlibpath_var=no\n+    ;;\n+\n+  dgux*)\n+    archive_cmds='$LD -G -h $soname -o $lib $libobjs $deplibs $linkopts'\n     hardcode_libdir_flag_spec='-L$libdir'\n     hardcode_direct=no\n     hardcode_minus_L=no\n@@ -1054,21 +1355,23 @@ if test -z \"$NM\"; then\n   case \"$NM\" in\n   /* | [A-Za-z]:[/\\\\]*) ;; # Let the user override the test with a path.\n   *)\n-    IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n-    for ac_dir in /usr/ucb /usr/ccs/bin $PATH /bin; do\n+    IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}${PATH_SEPARATOR}\"\n+    for ac_dir in $PATH /usr/ucb /usr/ccs/bin /bin; do\n       test -z \"$ac_dir\" && ac_dir=.\n       if test -f $ac_dir/nm; then\n-        # Check to see if the nm accepts a BSD-compat flag.\n-        # Adding the `sed 1q' prevents false positives on HP-UX, which says:\n-        #   nm: unknown option \"B\" ignored\n-        if ($ac_dir/nm -B /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n-          NM=\"$ac_dir/nm -B\"\n-        elif ($ac_dir/nm -p /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n-          NM=\"$ac_dir/nm -p\"\n+\t# Check to see if the nm accepts a BSD-compat flag.\n+\t# Adding the `sed 1q' prevents false positives on HP-UX, which says:\n+\t#   nm: unknown option \"B\" ignored\n+\tif ($ac_dir/nm -B /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\t  NM=\"$ac_dir/nm -B\"\n+\t  break\n+\telif ($ac_dir/nm -p /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then\n+\t  NM=\"$ac_dir/nm -p\"\n+\t  break\n \telse\n-          NM=\"$ac_dir/nm\"\n+\t  NM=${NM=\"$ac_dir/nm\"} # keep the first match, but\n+\t  continue # so that we can try to find one that supports BSD flags\n \tfi\n-        break\n       fi\n     done\n     IFS=\"$ac_save_ifs\"\n@@ -1085,52 +1388,51 @@ echo $ac_n \"checking command to parse $NM output... $ac_c\" 1>&6\n # [They come from Ultrix.  What could be older than Ultrix?!! ;)]\n \n # Character class describing NM global symbol codes.\n-symcode='[BCDEGRSTU]'\n+symcode='[BCDEGRST]'\n \n # Regexp to match symbols that can be accessed directly from C.\n sympat='\\([_A-Za-z][_A-Za-z0-9]*\\)'\n \n # Transform the above into a raw symbol and a C symbol.\n-symxfrm='\\1 \\1'\n+symxfrm='\\1 \\2\\3 \\3'\n+\n+# Transform an extracted symbol line into a proper C declaration\n+global_symbol_to_cdecl=\"sed -n -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n \n # Define system-specific variables.\n case \"$host_os\" in\n aix*)\n-  symcode='[BCDTU]'\n+  symcode='[BCDT]'\n   ;;\n-cygwin32* | mingw32*)\n-  sympat='_\\([_A-Za-z][_A-Za-z0-9]*\\)'\n-  symxfrm='_\\1 \\1'\n+cygwin* | mingw*)\n+  symcode='[ABCDGISTW]'\n+  ;;\n+hpux*) # Its linker distinguishes data from code symbols\n+  global_symbol_to_cdecl=\"sed -n -e 's/^T .* \\(.*\\)$/extern char \\1();/p' -e 's/^. .* \\(.*\\)$/extern char \\1;/p'\"\n   ;;\n irix*)\n-  # Cannot use undefined symbols on IRIX because inlined functions mess us up.\n   symcode='[BCDEGRST]'\n   ;;\n-solaris2*)\n-  symcode='[BDTU]'\n+solaris*)\n+  symcode='[BDT]'\n   ;;\n esac\n \n # If we're using GNU nm, then use its standard symbol codes.\n if $NM -V 2>&1 | egrep '(GNU|with BFD)' > /dev/null; then\n-  symcode='[ABCDGISTUW]'\n+  symcode='[ABCDGISTW]'\n fi\n \n-case \"$host_os\" in\n-cygwin32* | mingw32*)\n-  # We do not want undefined symbols on cygwin32.  The user must\n-  # arrange to define them via -l arguments.\n-  symcode='[ABCDGISTW]'\n-  ;;\n-esac\n+# Try without a prefix undercore, then with it.\n+for ac_symprfx in \"\" \"_\"; do\n \n-# Write the raw and C identifiers.\n-global_symbol_pipe=\"sed -n -e 's/^.* $symcode $sympat$/$symxfrm/p'\"\n+  # Write the raw and C identifiers.\n+  global_symbol_pipe=\"sed -n -e 's/^.*[ \t]\\($symcode\\)[ \t][ \t]*\\($ac_symprfx\\)$sympat$/$symxfrm/p'\"\n \n-# Check to see that the pipe works correctly.\n-pipe_works=no\n-$rm conftest*\n-cat > conftest.c <<EOF\n+  # Check to see that the pipe works correctly.\n+  pipe_works=no\n+  $rm conftest*\n+  cat > conftest.c <<EOF\n #ifdef __cplusplus\n extern \"C\" {\n #endif\n@@ -1142,93 +1444,96 @@ void nm_test_func(){}\n main(){nm_test_var='a';nm_test_func();return(0);}\n EOF\n \n-echo \"$progname:1145: checking if global_symbol_pipe works\" >&5\n-if { (eval echo $progname:1146: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; } && test -s conftest.$objext; then\n-  # Now try to grab the symbols.\n-  nlist=conftest.nm\n-  if { echo \"$progname:1149: eval \\\"$NM conftest.$objext | $global_symbol_pipe > $nlist\\\"\" >&5; eval \"$NM conftest.$objext | $global_symbol_pipe > $nlist 2>&5\"; } && test -s \"$nlist\"; then\n-\n-    # Try sorting and uniquifying the output.\n-    if sort \"$nlist\" | uniq > \"$nlist\"T; then\n-      mv -f \"$nlist\"T \"$nlist\"\n-      wcout=`wc \"$nlist\" 2>/dev/null`\n-      count=`$echo \"X$wcout\" | $Xsed -e 's/^[ \t]*\\([0-9][0-9]*\\).*$/\\1/'`\n-      (test \"$count\" -ge 0) 2>/dev/null || count=-1\n-    else\n-      rm -f \"$nlist\"T\n-      count=-1\n-    fi\n+  echo \"$progname:1447: checking if global_symbol_pipe works\" >&5\n+  if { (eval echo $progname:1448: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; } && test -s conftest.$objext; then\n+    # Now try to grab the symbols.\n+    nlist=conftest.nm\n+    if { echo \"$progname:1451: eval \\\"$NM conftest.$objext | $global_symbol_pipe > $nlist\\\"\" >&5; eval \"$NM conftest.$objext | $global_symbol_pipe > $nlist 2>&5\"; } && test -s \"$nlist\"; then\n \n-    # Make sure that we snagged all the symbols we need.\n-    if egrep ' nm_test_var$' \"$nlist\" >/dev/null; then\n-      if egrep ' nm_test_func$' \"$nlist\" >/dev/null; then\n-\tcat <<EOF > conftest.c\n+      # Try sorting and uniquifying the output.\n+      if sort \"$nlist\" | uniq > \"$nlist\"T; then\n+\tmv -f \"$nlist\"T \"$nlist\"\n+      else\n+\trm -f \"$nlist\"T\n+      fi\n+\n+      # Make sure that we snagged all the symbols we need.\n+      if egrep ' nm_test_var$' \"$nlist\" >/dev/null; then\n+\tif egrep ' nm_test_func$' \"$nlist\" >/dev/null; then\n+\t  cat <<EOF > conftest.c\n #ifdef __cplusplus\n extern \"C\" {\n #endif\n \n EOF\n-        # Now generate the symbol file.\n-        sed 's/^.* \\(.*\\)$/extern char \\1;/' < \"$nlist\" >> conftest.c\n+\t  # Now generate the symbol file.\n+\t  eval \"$global_symbol_to_cdecl\"' < \"$nlist\" >> conftest.c'\n \n-\tcat <<EOF >> conftest.c\n+\t  cat <<EOF >> conftest.c\n #if defined (__STDC__) && __STDC__\n-# define __ptr_t void *\n+# define lt_ptr_t void *\n #else\n-# define __ptr_t char *\n+# define lt_ptr_t char *\n+# define const\n #endif\n \n-/* The number of symbols in dld_preloaded_symbols, -1 if unsorted. */\n-int dld_preloaded_symbol_count = $count;\n-\n /* The mapping between symbol names and symbols. */\n-struct {\n-  char *name;\n-  __ptr_t address;\n+const struct {\n+  const char *name;\n+  lt_ptr_t address;\n }\n-dld_preloaded_symbols[] =\n+lt_preloaded_symbols[] =\n {\n EOF\n-        sed 's/^\\(.*\\) \\(.*\\)$/  {\"\\1\", (__ptr_t) \\&\\2},/' < \"$nlist\" >> conftest.c\n-        cat <<\\EOF >> conftest.c\n-  {0, (__ptr_t) 0}\n+\t  sed 's/^. \\(.*\\) \\(.*\\)$/  {\"\\2\", (lt_ptr_t) \\&\\2},/' < \"$nlist\" >> conftest.c\n+\t  cat <<\\EOF >> conftest.c\n+  {0, (lt_ptr_t) 0}\n };\n \n #ifdef __cplusplus\n }\n #endif\n EOF\n-        # Now try linking the two files.\n-        mv conftest.$objext conftestm.$objext\n-\tsave_LIBS=\"$LIBS\"\n-\tsave_CFLAGS=\"$CFLAGS\"\n-        LIBS=\"conftestm.$objext\"\n-\tCFLAGS=\"$CFLAGS$no_builtin_flag\"\n-        if { (eval echo $progname:1207: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n-          pipe_works=yes\n-        else\n-          echo \"$progname: failed program was:\" >&5\n-          cat conftest.c >&5\n-        fi\n-        LIBS=\"$save_LIBS\"\n+\t  # Now try linking the two files.\n+\t  mv conftest.$objext conftestm.$objext\n+\t  save_LIBS=\"$LIBS\"\n+\t  save_CFLAGS=\"$CFLAGS\"\n+\t  LIBS=\"conftestm.$objext\"\n+\t  CFLAGS=\"$CFLAGS$no_builtin_flag\"\n+\t  if { (eval echo $progname:1503: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+\t    pipe_works=yes\n+\t  else\n+\t    echo \"$progname: failed program was:\" >&5\n+\t    cat conftest.c >&5\n+\t  fi\n+\t  LIBS=\"$save_LIBS\"\n+\telse\n+\t  echo \"cannot find nm_test_func in $nlist\" >&5\n+\tfi\n       else\n-        echo \"cannot find nm_test_func in $nlist\" >&5\n+\techo \"cannot find nm_test_var in $nlist\" >&5\n       fi\n     else\n-      echo \"cannot find nm_test_var in $nlist\" >&5\n+      echo \"cannot run $global_symbol_pipe\" >&5\n     fi\n   else\n-    echo \"cannot run $global_symbol_pipe\" >&5\n+    echo \"$progname: failed program was:\" >&5\n+    cat conftest.c >&5\n   fi\n-else\n-  echo \"$progname: failed program was:\" >&5\n-  cat conftest.c >&5\n-fi\n-$rm conftest*\n+  $rm conftest*\n \n-# Do not use the global_symbol_pipe unless it works.\n+  # Do not use the global_symbol_pipe unless it works.\n+  if test \"$pipe_works\" = yes; then\n+    break\n+  else\n+    global_symbol_pipe=\n+  fi\n+done\n echo \"$ac_t$pipe_works\" 1>&6\n-test \"$pipe_works\" = yes || global_symbol_pipe=\n+\n+if test -z \"$global_symbol_pipe\"; then\n+  global_symbol_to_cdecl=\n+fi\n \n # Check hardcoding attributes.\n echo $ac_n \"checking how to hardcode library paths into programs... $ac_c\" 1>&6\n@@ -1272,12 +1577,27 @@ postuninstall_cmds=\n finish_cmds=\n finish_eval=\n shlibpath_var=\n+shlibpath_overrides_runpath=unknown\n version_type=none\n dynamic_linker=\"$host_os ld.so\"\n-\n+sys_lib_dlsearch_path_spec=\"/lib /usr/lib\"\n+sys_lib_search_path_spec=\"/lib /usr/lib /usr/local/lib\"\n+file_magic_cmd=\n+file_magic_test_file=\n+deplibs_check_method='unknown'\n+# Need to set the preceding variable on all platforms that support\n+# interlibrary dependencies.\n+# 'none' -- dependencies not supported.\n+# `unknown' -- same as none, but documents that we really don't know.\n+# 'pass_all' -- all dependencies passed with no checks.\n+# 'test_compile' -- check by making test program.\n+# 'file_magic [regex]' -- check by looking for files in library path\n+# which responds to the $file_magic_cmd with a given egrep regex.\n+# If you have `file' or equivalent on your system and you're not sure\n+# whether `pass_all' will *always* work, you probably want this one.\n echo $ac_n \"checking dynamic linker characteristics... $ac_c\" 1>&6\n case \"$host_os\" in\n-aix3* | aix4*)\n+aix3*)\n   version_type=linux\n   library_names_spec='${libname}${release}.so$versuffix $libname.a'\n   shlibpath_var=LIBPATH\n@@ -1286,27 +1606,84 @@ aix3* | aix4*)\n   soname_spec='${libname}${release}.so$major'\n   ;;\n \n+aix4*)\n+  version_type=linux\n+  # AIX has no versioning support, so currently we can not hardcode correct\n+  # soname into executable. Probably we can add versioning support to\n+  # collect2, so additional links can be useful in future.\n+  # We preserve .a as extension for shared libraries though AIX4.2\n+  # and later linker supports .so\n+  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.a'\n+  shlibpath_var=LIBPATH\n+  deplibs_check_method=pass_all\n+  ;;\n+\n amigaos*)\n   library_names_spec='$libname.ixlibrary $libname.a'\n   # Create ${libname}_ixlibrary.a entries in /sys/libs.\n   finish_eval='for lib in `ls $libdir/*.ixlibrary 2>/dev/null`; do libname=`$echo \"X$lib\" | $Xsed -e '\\''s%^.*/\\([^/]*\\)\\.ixlibrary$%\\1%'\\''`; test $rm /sys/libs/${libname}_ixlibrary.a; $show \"(cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a)\"; (cd /sys/libs && $LN_S $lib ${libname}_ixlibrary.a) || exit 1; done'\n   ;;\n \n-cygwin32* | mingw32*)\n+beos*)\n+  library_names_spec='${libname}.so'\n+  dynamic_linker=\"$host_os ld.so\"\n+  shlibpath_var=LIBRARY_PATH\n+  ;;\n+\n+bsdi4*)\n+  version_type=linux\n+  library_names_spec='${libname}.so$major ${libname}.so'\n+  soname_spec='${libname}.so'\n+  finish_cmds='PATH=\"$PATH:/sbin\" ldconfig $libdir'\n+  shlibpath_var=LD_LIBRARY_PATH\n+  deplibs_check_method='file_magic ELF 32-bit LSB shared object'\n+  file_magic_cmd=/usr/bin/file\n+  file_magic_test_file=/shlib/libc.so\n+  sys_lib_search_path_spec=\"/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib\"\n+  sys_lib_dlsearch_path_spec=\"/shlib /usr/lib /usr/local/lib\"\n+  # the default ld.so.conf also contains /usr/contrib/lib and\n+  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow\n+  # libtool to hard-code these into programs\n+  ;;\n+\n+cygwin* | mingw*)\n   version_type=windows\n   if test \"$with_gcc\" = yes; then\n     library_names_spec='${libname}`echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll $libname.a'\n   else\n     library_names_spec='${libname}`echo ${release} | sed -e 's/[.]/-/g'`${versuffix}.dll $libname.lib'\n   fi\n   dynamic_linker='Win32 ld.exe'\n+  deplibs_check_method='file_magic file format pei*-i386.*architecture: i386'\n+  file_magic_cmd='objdump -f'\n+  need_lib_prefix=no\n+  # FIXME: first we should search . and the directory the executable is in\n   shlibpath_var=PATH\n   ;;\n \n-freebsd2* | freebsd3*)\n-  version_type=sunos\n-  library_names_spec='${libname}${release}.so$versuffix $libname.so'\n-  finish_cmds='PATH=\"\\$PATH:/sbin\" ldconfig -m $libdir'\n+freebsd1*)\n+  dynamic_linker=no\n+  ;;\n+  \n+freebsd*)\n+  objformat=`test -x /usr/bin/objformat && /usr/bin/objformat || echo aout`\n+  version_type=freebsd-$objformat\n+  case \"$version_type\" in\n+    freebsd-elf*)\n+      deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'\n+      file_magic_cmd=/usr/bin/file\n+      file_magic_test_file=`echo /usr/lib/libc.so*`\n+      library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so $libname.so'\n+      need_version=no\n+      need_lib_prefix=no\n+      ;;\n+    freebsd-*)\n+      deplibs_check_method=unknown\n+      library_names_spec='${libname}${release}.so$versuffix $libname.so$versuffix'\n+      need_version=yes\n+      ;;\n+  esac\n+  finish_cmds='PATH=\"$PATH:/sbin\" OBJFORMAT=\"'\"$objformat\"'\" ldconfig -m $libdir'\n   shlibpath_var=LD_LIBRARY_PATH\n   ;;\n \n@@ -1321,18 +1698,49 @@ hpux9* | hpux10* | hpux11*)\n   # link against other versions.\n   dynamic_linker=\"$host_os dld.sl\"\n   version_type=sunos\n+  need_lib_prefix=no\n+  need_version=no\n   shlibpath_var=SHLIB_PATH\n   library_names_spec='${libname}${release}.sl$versuffix ${libname}${release}.sl$major $libname.sl'\n   soname_spec='${libname}${release}.sl$major'\n   # HP-UX runs *really* slowly unless shared libraries are mode 555.\n   postinstall_cmds='chmod 555 $lib'\n   ;;\n \n-irix5* | irix6*)\n-  version_type=osf\n+irix5*)\n+  version_type=irix\n   soname_spec='${libname}${release}.so'\n-  library_names_spec='${libname}${release}.so$versuffix $libname.so'\n+  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so $libname.so'\n   shlibpath_var=LD_LIBRARY_PATH\n+  deplibs_check_method=\"file_magic ELF 32-bit MSB dynamic lib MIPS - version 1\" # or should it be pass_all?\n+  file_magic_cmd=/usr/bin/file\n+  file_magic_test_file=`echo /lib/libc.so*`\n+  shlibpath_overrides_runpath=no\n+  ;;\n+\n+irix6*)\n+  version_type=irix\n+  need_lib_prefix=no\n+  need_version=no\n+  soname_spec='${libname}${release}.so'\n+  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so $libname.so'\n+  case \"$LD\" in # libtool.m4 will add one of these switches to LD\n+  *-32|*\"-32 \") libsuff= shlibsuff= libmagic=32-bit;;\n+  *-n32|*\"-n32 \") libsuff=32 shlibsuff=N32 libmagic=N32;;\n+  *-64|*\"-64 \") libsuff=64 shlibsuff=64 libmagic=64-bit;;\n+  *) libsuff= shlibsuff= libmagic=never-match;;\n+  esac\n+  shlibpath_var=LD_LIBRARY${shlibsuff}_PATH\n+  shlibpath_overrides_runpath=no\n+  # even though /usr/local/lib is always searched, the man-page says\n+  # shared libraries should not be installed there if they use an ABI\n+  # different from -32, so we'd better not search for shared libraries\n+  # there either\n+  sys_lib_search_path_spec=\"/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}\"\n+  sys_lib_dlsearch_path_spec=\"/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}\"\n+  deplibs_check_method=\"file_magic ELF ${libmagic} MSB mips-[1234] dynamic lib MIPS - version 1\" # or should it be pass_all?\n+  file_magic_cmd=/usr/bin/file\n+  file_magic_test_file=`echo /lib${libsuff}/libc.so*`\n   ;;\n \n # No shared lib support for Linux oldld, aout, or coff.\n@@ -1343,10 +1751,16 @@ linux-gnuoldld* | linux-gnuaout* | linux-gnucoff*)\n # This must be Linux ELF.\n linux-gnu*)\n   version_type=linux\n+  need_lib_prefix=no\n+  need_version=no\n   library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'\n   soname_spec='${libname}${release}.so$major'\n-  finish_cmds='PATH=\"\\$PATH:/sbin\" ldconfig -n $libdir'\n+  finish_cmds='PATH=\"$PATH:/sbin\" ldconfig -n $libdir'\n   shlibpath_var=LD_LIBRARY_PATH\n+  shlibpath_overrides_runpath=no\n+  deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB (shared object|dynamic lib )'\n+  file_magic_cmd=/usr/bin/file\n+  file_magic_test_file=`echo /lib/libc.so* /lib/libc-*.so`\n \n   if test -f /lib/ld.so.1; then\n     dynamic_linker='GNU ld.so'\n@@ -1359,15 +1773,34 @@ linux-gnu*)\n   fi\n   ;;\n \n-netbsd* | openbsd*)\n+netbsd*)\n   version_type=sunos\n-  library_names_spec='${libname}${release}.so$versuffix'\n+  if echo __ELF__ | $CC -E - | grep __ELF__ >/dev/null; then\n+    library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'\n+    finish_cmds='PATH=\"$PATH:/sbin\" ldconfig -m $libdir'\n+    dynamic_linker='NetBSD (a.out) ld.so'\n+  else\n+    library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major ${libname}${release}.so ${libname}.so'\n+    soname_spec='${libname}${release}.so$major'\n+    dynamic_linker='NetBSD ld.elf_so'\n+  fi\n+  shlibpath_var=LD_LIBRARY_PATH\n+  ;;\n+\n+openbsd*)\n+  version_type=sunos\n+  if test \"$with_gnu_ld\" = yes; then\n+    need_lib_prefix=no\n+    need_version=no\n+  fi\n+  library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'\n   finish_cmds='PATH=\"\\$PATH:/sbin\" ldconfig -m $libdir'\n   shlibpath_var=LD_LIBRARY_PATH\n   ;;\n \n os2*)\n   libname_spec='$name'\n+  need_lib_prefix=no\n   library_names_spec='$libname.dll $libname.a'\n   dynamic_linker='OS/2 ld.exe'\n   shlibpath_var=LIBPATH\n@@ -1376,8 +1809,18 @@ os2*)\n osf3* | osf4*)\n   version_type=osf\n   soname_spec='${libname}${release}.so'\n-  library_names_spec='${libname}${release}.so$versuffix $libname.so'\n+  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so $libname.so'\n   shlibpath_var=LD_LIBRARY_PATH\n+  # deplibs_check_method='pass_all'\n+  # Although pass_all appears to work, it copies symbols from static libraries\n+  # into shared ones and exports them.  So, when a program is linked with two\n+  # or more libraries that have got copies of the same symbols, link fails\n+  # This was only tested on osf4:\n+  deplibs_check_method='file_magic COFF format alpha shared library'\n+  file_magic_cmd=/usr/bin/file\n+  file_magic_test_file=/shlib/libc.so\n+  sys_lib_search_path_spec=\"/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib\"\n+  sys_lib_dlsearch_path_spec=\"$sys_lib_search_path_spec\"\n   ;;\n \n sco3.2v5*)\n@@ -1387,27 +1830,43 @@ sco3.2v5*)\n   shlibpath_var=LD_LIBRARY_PATH\n   ;;\n \n-solaris2*)\n+solaris*)\n   version_type=linux\n+  need_lib_prefix=no\n+  need_version=no\n   library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'\n   soname_spec='${libname}${release}.so$major'\n   shlibpath_var=LD_LIBRARY_PATH\n+  shlibpath_overrides_runpath=yes\n   # ldd complains unless libraries are executable\n   postinstall_cmds='chmod +x $lib'\n+  deplibs_check_method=\"file_magic ELF [0-9][0-9]-bit [LM]SB dynamic lib\"\n+  file_magic_cmd=/usr/bin/file\n+  file_magic_test_file=/lib/libc.so\n   ;;\n \n sunos4*)\n   version_type=sunos\n   library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'\n   finish_cmds='PATH=\"\\$PATH:/usr/etc\" ldconfig $libdir'\n   shlibpath_var=LD_LIBRARY_PATH\n+  shlibpath_overrides_runpath=yes\n+  if test \"$with_gnu_ld\" = yes; then\n+    need_lib_prefix=no\n+  fi\n+  need_version=yes\n   ;;\n \n-sysv4.2uw2*)\n+sysv4.2uw2* | sysv4.3* | sysv5*)\n   version_type=linux\n   library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'\n   soname_spec='${libname}${release}.so$major'\n   shlibpath_var=LD_LIBRARY_PATH\n+  case \"$host_vendor\" in\n+    ncr)\n+      deplibs_check_method='pass_all'\n+      ;;\n+  esac\n   ;;\n \n uts4*)\n@@ -1417,29 +1876,66 @@ uts4*)\n   shlibpath_var=LD_LIBRARY_PATH\n   ;;\n \n+dgux*)\n+  version_type=linux\n+  need_lib_prefix=no\n+  need_version=no\n+  library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'\n+  soname_spec='${libname}${release}.so$major'\n+  shlibpath_var=LD_LIBRARY_PATH\n+  ;;\n+\n *)\n   dynamic_linker=no\n   ;;\n esac\n-echo \"$ac_t$dynamic_linker\"\n+echo \"$ac_t$dynamic_linker\" 1>&6\n test \"$dynamic_linker\" = no && can_build_shared=no\n \n # Report the final consequences.\n echo \"checking if libtool supports shared libraries... $can_build_shared\" 1>&6\n \n+if test -n \"$file_magic_test_file\" && test -n \"$file_magic_cmd\"; then\n+  case \"$deplibs_check_method\" in\n+  \"file_magic \"*)\n+    file_magic_regex=\"`expr \\\"$deplibs_check_method\\\" : \\\"file_magic \\(.*\\)\\\"`\"\n+    if eval $file_magic_cmd \\$file_magic_test_file 2> /dev/null |\n+       egrep \"$file_magic_regex\" > /dev/null; then\n+      :\n+    else\n+      cat <<EOF 1>&2\n+\n+*** Warning: the command libtool uses to detect shared libraries,\n+*** $file_magic_cmd, produces output that libtool cannot recognize.\n+*** The result is that libtool may fail to recognize shared libraries\n+*** as such.  This will affect the creation of libtool libraries that\n+*** depend on shared libraries, but programs linked with such libtool\n+*** libraries will work regardless of this problem.  Nevertheless, you\n+*** may want to report the problem to your system manager and/or to\n+*** bug-libtool@gnu.org\n+\n+EOF\n+    fi ;;\n+  esac\n+fi\n+\n echo $ac_n \"checking whether to build shared libraries... $ac_c\" 1>&6\n test \"$can_build_shared\" = \"no\" && enable_shared=no\n \n # On AIX, shared libraries and static libraries use the same namespace, and\n # are all built from PIC.\n case \"$host_os\" in\n-aix*)\n+aix3*)\n   test \"$enable_shared\" = yes && enable_static=no\n   if test -n \"$RANLIB\"; then\n-    archive_cmds=\"$archive_cmds;\\$RANLIB \\$lib\"\n+    archive_cmds=\"$archive_cmds~\\$RANLIB \\$lib\"\n     postinstall_cmds='$RANLIB $lib'\n   fi\n   ;;\n+\n+aix4*)\n+  test \"$enable_shared\" = yes && enable_static=no\n+  ;;\n esac\n \n echo \"$ac_t$enable_shared\" 1>&6\n@@ -1449,6 +1945,15 @@ test \"$enable_shared\" = yes || enable_static=yes\n \n echo \"checking whether to build static libraries... $enable_static\" 1>&6\n \n+if test \"$hardcode_action\" = relink; then\n+  # Fast installation is not supported\n+  enable_fast_install=no\n+elif test \"$shlibpath_overrides_runpath\" = yes ||\n+     test \"$enable_shared\" = no; then\n+  # Fast installation is not necessary\n+  enable_fast_install=needless\n+fi\n+\n echo $ac_n \"checking for objdir... $ac_c\" 1>&6\n rm -f .libs 2>/dev/null\n mkdir .libs 2>/dev/null\n@@ -1461,46 +1966,502 @@ fi\n rmdir .libs 2>/dev/null\n echo \"$ac_t$objdir\" 1>&6\n \n+if test \"x$enable_dlopen\" != xyes; then\n+  enable_dlopen=unknown\n+  enable_dlopen_self=unknown\n+  enable_dlopen_self_static=unknown\n+else\n+if eval \"test \\\"`echo '$''{'lt_cv_dlopen'+set}'`\\\" != set\"; then\n+  lt_cv_dlopen=no lt_cv_dlopen_libs=\n+echo $ac_n \"checking for dlopen\"\"... $ac_c\" 1>&6\n+echo \"$progname:1977: checking for dlopen\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_func_dlopen'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 1982 \"ltconfig\"\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char dlopen(); below.  */\n+#include <assert.h>\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char dlopen();\n+\n+int main() {\n+\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_dlopen) || defined (__stub___dlopen)\n+choke me\n+#else\n+dlopen();\n+#endif\n+\n+; return 0; }\n+EOF\n+if { (eval echo $progname:2004: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_func_dlopen=yes\"\n+else\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_func_dlopen=no\"\n+fi\n+rm -f conftest*\n+fi\n+\n+if eval \"test \\\"`echo '$ac_cv_func_'dlopen`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  lt_cv_dlopen=\"dlopen\"\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+echo $ac_n \"checking for dlopen in -ldl\"\"... $ac_c\" 1>&6\n+echo \"$progname:2022: checking for dlopen in -ldl\" >&5\n+ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`\n+if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_save_LIBS=\"$LIBS\"\n+LIBS=\"-ldl  $LIBS\"\n+cat > conftest.$ac_ext <<EOF\n+#line 2030 \"ltconfig\"\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char dlopen();\n+\n+int main() {\n+dlopen()\n+; return 0; }\n+EOF\n+if { (eval echo $progname:2040: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=yes\"\n+else\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=no\"\n+fi\n+rm -f conftest*\n+LIBS=\"$ac_save_LIBS\"\n+\n+fi\n+if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  lt_cv_dlopen=\"dlopen\" lt_cv_dlopen_libs=\"-ldl\"\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+echo $ac_n \"checking for dld_link in -ldld\"\"... $ac_c\" 1>&6\n+echo \"$progname:2059: checking for dld_link in -ldld\" >&5\n+ac_lib_var=`echo dld'_'dld_link | sed 'y%./+-%__p_%'`\n+if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_save_LIBS=\"$LIBS\"\n+LIBS=\"-ldld  $LIBS\"\n+cat > conftest.$ac_ext <<EOF\n+#line 2067 \"ltconfig\"\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char dld_link();\n+\n+int main() {\n+dld_link()\n+; return 0; }\n+EOF\n+if { (eval echo $progname:2077: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=yes\"\n+else\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_lib_$ac_lib_var=no\"\n+fi\n+rm -f conftest*\n+LIBS=\"$ac_save_LIBS\"\n+\n+fi\n+if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  lt_cv_dlopen=\"dld_link\" lt_cv_dlopen_libs=\"-ldld\"\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+echo $ac_n \"checking for shl_load\"\"... $ac_c\" 1>&6\n+echo \"$progname:2096: checking for shl_load\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_func_shl_load'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 2101 \"ltconfig\"\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char shl_load(); below.  */\n+#include <assert.h>\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char shl_load();\n+\n+int main() {\n+\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_shl_load) || defined (__stub___shl_load)\n+choke me\n+#else\n+shl_load();\n+#endif\n+\n+; return 0; }\n+EOF\n+if { (eval echo $progname:2123: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_func_shl_load=yes\"\n+else\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_func_shl_load=no\"\n+fi\n+rm -f conftest*\n+fi\n+\n+if eval \"test \\\"`echo '$ac_cv_func_'shl_load`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  lt_cv_dlopen=\"shl_load\"\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+echo $ac_n \"checking for LoadLibrary\"\"... $ac_c\" 1>&6\n+echo \"$progname:2141: checking for LoadLibrary\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_func_LoadLibrary'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 2146 \"ltconfig\"\n+/* System header to define __stub macros and hopefully few prototypes,\n+    which can conflict with char LoadLibrary(); below.  */\n+#include <assert.h>\n+/* Override any gcc2 internal prototype to avoid an error.  */\n+/* We use char because int might match the return type of a gcc2\n+    builtin and then its argument prototype would still apply.  */\n+char LoadLibrary();\n+\n+int main() {\n+\n+/* The GNU C library defines this for functions which it implements\n+    to always fail with ENOSYS.  Some functions are actually named\n+    something starting with __ and the normal name is an alias.  */\n+#if defined (__stub_LoadLibrary) || defined (__stub___LoadLibrary)\n+choke me\n+#else\n+LoadLibrary();\n+#endif\n+\n+; return 0; }\n+EOF\n+if { (eval echo $progname:2168: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+  rm -rf conftest*\n+  eval \"ac_cv_func_LoadLibrary=yes\"\n+else\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_func_LoadLibrary=no\"\n+fi\n+rm -f conftest*\n+fi\n+\n+if eval \"test \\\"`echo '$ac_cv_func_'LoadLibrary`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+  lt_cv_dlopen=\"LoadLibrary\"\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+\n+      \n+fi\n+\n+    \n+fi\n+\n+  \n+fi\n+\n+\n+fi\n+\n+fi\n+\n+  if test \"x$lt_cv_dlopen\" != xno; then\n+    enable_dlopen=yes\n+  fi\n+\n+  case \"$lt_cv_dlopen\" in\n+  dlopen)\n+for ac_hdr in dlfcn.h; do\n+ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n+echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n+echo \"$progname:2210: checking for $ac_hdr\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 2215 \"ltconfig\"\n+#include <$ac_hdr>\n+int fnord = 0;\n+EOF\n+ac_try=\"$ac_compile conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo $progname:2220: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  rm -rf conftest*\n+  eval \"ac_cv_header_$ac_safe=yes\"\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  eval \"ac_cv_header_$ac_safe=no\"\n+fi\n+rm -f conftest*\n+fi\n+if eval \"test \\\"`echo '$ac_cv_header_'$ac_safe`\\\" = yes\"; then\n+  echo \"$ac_t\"\"yes\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+done\n+\n+    if test \"x$ac_cv_header_dlfcn_h\" = xyes; then\n+      CPPFLAGS=\"$CPPFLAGS -DHAVE_DLFCN_H\"\n+    fi\n+    eval LDFLAGS=\\\"\\$LDFLAGS $export_dynamic_flag_spec\\\"\n+    LIBS=\"$lt_cv_dlopen_libs $LIBS\"\n+\n+  echo $ac_n \"checking whether a program can dlopen itself\"\"... $ac_c\" 1>&6\n+echo \"$progname:2248: checking whether a program can dlopen itself\" >&5\n+if test \"${lt_cv_dlopen_self+set}\" = set; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    lt_cv_dlopen_self=cross\n+  else\n+    cat > conftest.c <<EOF\n+#line 2256 \"ltconfig\"\n+\n+#if HAVE_DLFCN_H\n+#include <dlfcn.h>\n+#endif\n+\n+#include <stdio.h>\n+\n+#ifdef RTLD_GLOBAL\n+# define LTDL_GLOBAL\tRTLD_GLOBAL\n+#else\n+# ifdef DL_GLOBAL\n+#  define LTDL_GLOBAL\tDL_GLOBAL\n+# else\n+#  define LTDL_GLOBAL\t0\n+# endif\n+#endif\n+\n+/* We may have to define LTDL_LAZY_OR_NOW in the command line if we\n+   find out it does not work in some platform. */\n+#ifndef LTDL_LAZY_OR_NOW\n+# ifdef RTLD_LAZY\n+#  define LTDL_LAZY_OR_NOW\tRTLD_LAZY\n+# else\n+#  ifdef DL_LAZY\n+#   define LTDL_LAZY_OR_NOW\tDL_LAZY\n+#  else\n+#   ifdef RTLD_NOW\n+#    define LTDL_LAZY_OR_NOW\tRTLD_NOW\n+#   else\n+#    ifdef DL_NOW\n+#     define LTDL_LAZY_OR_NOW\tDL_NOW\n+#    else\n+#     define LTDL_LAZY_OR_NOW\t0\n+#    endif\n+#   endif\n+#  endif\n+# endif\n+#endif\n+\n+fnord() { int i=42;}\n+main() { void *self, *ptr1, *ptr2; self=dlopen(0,LTDL_GLOBAL|LTDL_LAZY_OR_NOW);\n+    if(self) { ptr1=dlsym(self,\"fnord\"); ptr2=dlsym(self,\"_fnord\");\n+\t       if(ptr1 || ptr2) exit(0); } exit(1); } \n+\n+EOF\n+if { (eval echo $progname:2302: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+then\n+  lt_cv_dlopen_self=yes\n+else\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  lt_cv_dlopen_self=no\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+\n+echo \"$ac_t\"\"$lt_cv_dlopen_self\" 1>&6\n+\n+  if test \"$lt_cv_dlopen_self\" = yes; then\n+    LDFLAGS=\"$LDFLAGS $link_static_flag\"\n+  echo $ac_n \"checking whether a statically linked program can dlopen itself\"\"... $ac_c\" 1>&6\n+echo \"$progname:2321: checking whether a statically linked program can dlopen itself\" >&5\n+if test \"${lt_cv_dlopen_self_static+set}\" = set; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test \"$cross_compiling\" = yes; then\n+    lt_cv_dlopen_self_static=cross\n+  else\n+    cat > conftest.c <<EOF\n+#line 2329 \"ltconfig\"\n+\n+#if HAVE_DLFCN_H\n+#include <dlfcn.h>\n+#endif\n+\n+#include <stdio.h>\n+\n+#ifdef RTLD_GLOBAL\n+# define LTDL_GLOBAL\tRTLD_GLOBAL\n+#else\n+# ifdef DL_GLOBAL\n+#  define LTDL_GLOBAL\tDL_GLOBAL\n+# else\n+#  define LTDL_GLOBAL\t0\n+# endif\n+#endif\n+\n+/* We may have to define LTDL_LAZY_OR_NOW in the command line if we\n+   find out it does not work in some platform. */\n+#ifndef LTDL_LAZY_OR_NOW\n+# ifdef RTLD_LAZY\n+#  define LTDL_LAZY_OR_NOW\tRTLD_LAZY\n+# else\n+#  ifdef DL_LAZY\n+#   define LTDL_LAZY_OR_NOW\tDL_LAZY\n+#  else\n+#   ifdef RTLD_NOW\n+#    define LTDL_LAZY_OR_NOW\tRTLD_NOW\n+#   else\n+#    ifdef DL_NOW\n+#     define LTDL_LAZY_OR_NOW\tDL_NOW\n+#    else\n+#     define LTDL_LAZY_OR_NOW\t0\n+#    endif\n+#   endif\n+#  endif\n+# endif\n+#endif\n+\n+fnord() { int i=42;}\n+main() { void *self, *ptr1, *ptr2; self=dlopen(0,LTDL_GLOBAL|LTDL_LAZY_OR_NOW);\n+    if(self) { ptr1=dlsym(self,\"fnord\"); ptr2=dlsym(self,\"_fnord\");\n+    if(ptr1 || ptr2) exit(0); } exit(1); } \n+\n+EOF\n+if { (eval echo $progname:2375: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+then\n+  lt_cv_dlopen_self_static=yes\n+else\n+  echo \"$progname: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  lt_cv_dlopen_self_static=no\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+\n+echo \"$ac_t\"\"$lt_cv_dlopen_self_static\" 1>&6\n+fi\n+    ;;\n+  esac\n+\n+  case \"$lt_cv_dlopen_self\" in\n+  yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;\n+  *) enable_dlopen_self=unknown ;;\n+  esac\n+\n+  case \"$lt_cv_dlopen_self_static\" in\n+  yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;\n+  *) enable_dlopen_self_static=unknown ;;\n+  esac\n+fi\n+\n # Copy echo and quote the copy, instead of the original, because it is\n # used later.\n ltecho=\"$echo\"\n+if test \"X$ltecho\" = \"X$CONFIG_SHELL $0 --fallback-echo\"; then\n+   ltecho=\"$CONFIG_SHELL \\$0 --fallback-echo\"\n+fi\n+LTSHELL=\"$SHELL\"\n \n-# Now quote all the things that may contain metacharacters.\n-for var in ltecho old_CC old_CFLAGS old_CPPFLAGS old_LD old_NM old_RANLIB \\\n-  old_LN_S old_DLLTOOL old_AS AR CC LD LN_S NM DLLTOOL AS reload_flag \\\n-  reload_cmds wl pic_flag link_static_flag no_builtin_flag \\\n-  export_dynamic_flag_spec whole_archive_flag_spec libname_spec \\\n-  library_names_spec soname_spec RANLIB \\\n-  old_archive_cmds old_archive_from_new_cmds old_postinstall_cmds \\\n-  old_postuninstall_cmds archive_cmds postinstall_cmds postuninstall_cmds \\\n-  allow_undefined_flag no_undefined_flag objext libext \\\n-  finish_cmds finish_eval global_symbol_pipe fix_srcfile_path \\\n-  hardcode_libdir_flag_spec hardcode_libdir_separator; do\n-\n-  case \"$var\" in\n-  reload_cmds | old_archive_cmds | old_archive_from_new_cmds | \\\n-  old_postinstall_cmds | old_postuninstall_cmds | archive_cmds | \\\n-  postinstall_cmds | postuninstall_cmds | finish_cmds)\n-    # Double-quote double-evaled strings.\n-    eval \"$var=\\`\\$echo \\\"X\\$$var\\\" | \\$Xsed -e \\\"\\$double_quote_subst\\\" -e \\\"\\$sed_quote_subst\\\"\\`\"\n-    ;;\n-  *)\n-    eval \"$var=\\`\\$echo \\\"X\\$$var\\\" | \\$Xsed -e \\\"\\$sed_quote_subst\\\"\\`\"\n+LTCONFIG_VERSION=\"$VERSION\"\n+\n+# Only quote variables if we're using ltmain.sh.\n+case \"$ltmain\" in\n+*.sh)\n+  # Now quote all the things that may contain metacharacters.\n+  for var in ltecho old_CC old_CFLAGS old_CPPFLAGS old_LD old_NM old_RANLIB \\\n+    old_LN_S old_DLLTOOL old_AS AR CC LD LN_S NM LTSHELL LTCONFIG_VERSION \\\n+    reload_flag reload_cmds wl \\\n+    pic_flag link_static_flag no_builtin_flag export_dynamic_flag_spec \\\n+    thread_safe_flag_spec whole_archive_flag_spec libname_spec \\\n+    library_names_spec soname_spec \\\n+    RANLIB old_archive_cmds old_archive_from_new_cmds old_postinstall_cmds \\\n+    old_postuninstall_cmds archive_cmds archive_expsym_cmds postinstall_cmds postuninstall_cmds \\\n+    file_magic_cmd export_symbols_cmds deplibs_check_method allow_undefined_flag no_undefined_flag \\\n+    finish_cmds finish_eval global_symbol_pipe global_symbol_to_cdecl \\\n+    hardcode_libdir_flag_spec hardcode_libdir_separator  \\\n+    sys_lib_search_path_spec sys_lib_dlsearch_path_spec \\\n+    compiler_c_o compiler_o_lo need_locks exclude_expsyms include_expsyms; do\n+\n+    case \"$var\" in\n+    reload_cmds | old_archive_cmds | old_archive_from_new_cmds | \\\n+    old_postinstall_cmds | old_postuninstall_cmds | \\\n+    export_symbols_cmds | archive_cmds | archive_expsym_cmds | \\\n+    postinstall_cmds | postuninstall_cmds | \\\n+    finish_cmds | sys_lib_search_path_spec | sys_lib_dlsearch_path_spec)\n+      # Double-quote double-evaled strings.\n+      eval \"$var=\\\\\\\"\\`\\$echo \\\"X\\$$var\\\" | \\$Xsed -e \\\"\\$double_quote_subst\\\" -e \\\"\\$sed_quote_subst\\\" -e \\\"\\$delay_variable_subst\\\"\\`\\\\\\\"\"\n+      ;;\n+    *)\n+      eval \"$var=\\\\\\\"\\`\\$echo \\\"X\\$$var\\\" | \\$Xsed -e \\\"\\$sed_quote_subst\\\"\\`\\\\\\\"\"\n+      ;;\n+    esac\n+  done\n+\n+  case \"$ltecho\" in\n+  *'\\$0 --fallback-echo\"')\n+    ltecho=`$echo \"X$ltecho\" | $Xsed -e 's/\\\\\\\\\\\\\\$0 --fallback-echo\"$/$0 --fallback-echo\"/'`\n     ;;\n   esac\n-done\n \n-trap \"$rm \\\"$ofile\\\"; exit 1\" 1 2 15\n-echo \"creating $ofile\"\n-$rm \"$ofile\"\n-cat <<EOF > \"$ofile\"\n+  trap \"$rm \\\"$ofile\\\"; exit 1\" 1 2 15\n+  echo \"creating $ofile\"\n+  $rm \"$ofile\"\n+  cat <<EOF > \"$ofile\"\n #! $SHELL\n \n # `$echo \"$ofile\" | sed 's%^.*/%%'` - Provide generalized library-building support services.\n-# Generated automatically by $PROGRAM - GNU $PACKAGE $VERSION\n+# Generated automatically by $PROGRAM (GNU $PACKAGE $VERSION$TIMESTAMP)\n # NOTE: Changes made to this file will be lost: look at ltconfig or ltmain.sh.\n #\n-# Copyright (C) 1996-1998 Free Software Foundation, Inc.\n+# Copyright (C) 1996-1999 Free Software Foundation, Inc.\n # Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996\n #\n # This program is free software; you can redistribute it and/or modify\n@@ -1530,65 +2491,92 @@ Xsed=\"sed -e s/^X//\"\n if test \"\\${CDPATH+set}\" = set; then CDPATH=; export CDPATH; fi\n \n ### BEGIN LIBTOOL CONFIG\n+EOF\n+  cfgfile=\"$ofile\"\n+  ;;\n+\n+*)\n+  # Double-quote the variables that need it (for aesthetics).\n+  for var in old_CC old_CFLAGS old_CPPFLAGS old_LD old_NM old_RANLIB \\\n+    old_LN_S old_DLLTOOL old_AS; do\n+    eval \"$var=\\\\\\\"\\$var\\\\\\\"\"\n+  done\n+\n+  # Just create a config file.\n+  cfgfile=\"$ofile.cfg\"\n+  trap \"$rm \\\"$cfgfile\\\"; exit 1\" 1 2 15\n+  echo \"creating $cfgfile\"\n+  $rm \"$cfgfile\"\n+  cat <<EOF > \"$cfgfile\"\n+# `$echo \"$cfgfile\" | sed 's%^.*/%%'` - Libtool configuration file.\n+# Generated automatically by $PROGRAM (GNU $PACKAGE $VERSION$TIMESTAMP)\n+EOF\n+  ;;\n+esac\n+\n+cat <<EOF >> \"$cfgfile\"\n # Libtool was configured as follows, on host `(hostname || uname -n) 2>/dev/null | sed 1q`:\n #\n-# CC=\"$old_CC\" CFLAGS=\"$old_CFLAGS\" CPPFLAGS=\"$old_CPPFLAGS\" \\\\\n-# LD=\"$old_LD\" NM=\"$old_NM\" RANLIB=\"$old_RANLIB\" LN_S=\"$old_LN_S\" \\\\\n+# CC=$old_CC CFLAGS=$old_CFLAGS CPPFLAGS=$old_CPPFLAGS \\\\\n+# LD=$old_LD NM=$old_NM RANLIB=$old_RANLIB LN_S=$old_LN_S \\\\\n # DLLTOOL=\"$old_DLLTOOL\" AS=\"$old_AS\" \\\\\n #   $0$ltconfig_args\n #\n # Compiler and other test output produced by $progname, useful for\n # debugging $progname, is in ./config.log if it exists.\n \n # The version of $progname that generated this script.\n-LTCONFIG_VERSION=\"$VERSION\"\n+LTCONFIG_VERSION=$LTCONFIG_VERSION\n \n # Shell to use when invoking shell scripts.\n-SHELL=\"$SHELL\"\n+SHELL=$LTSHELL\n \n # Whether or not to build shared libraries.\n build_libtool_libs=$enable_shared\n \n # Whether or not to build static libraries.\n build_old_libs=$enable_static\n \n+# Whether or not to optimize for fast installation.\n+fast_install=$enable_fast_install\n+\n # The host system.\n-host_alias=\"$host_alias\"\n-host=\"$host\"\n+host_alias=$host_alias\n+host=$host\n \n # An echo program that does not interpret backslashes.\n-echo=\"$ltecho\"\n+echo=$ltecho\n \n # The archiver.\n-AR=\"$AR\"\n+AR=$AR\n \n # The default C compiler.\n-CC=\"$CC\"\n+CC=$CC\n \n # The linker used to build libraries.\n-LD=\"$LD\"\n+LD=$LD\n \n # Whether we need hard or soft links.\n-LN_S=\"$LN_S\"\n+LN_S=$LN_S\n \n # A BSD-compatible nm program.\n-NM=\"$NM\"\n+NM=$NM\n \n-# Used on cygwin32: DLL creation program.\n+# Used on cygwin: DLL creation program.\n DLLTOOL=\"$DLLTOOL\"\n \n-# Used on cygwin32: assembler.\n+# Used on cygwin: assembler.\n AS=\"$AS\"\n \n # The name of the directory that contains temporary libtool files.\n-objdir=\"$objdir\"\n+objdir=$objdir\n \n # How to create reloadable object files.\n-reload_flag=\"$reload_flag\"\n-reload_cmds=\"$reload_cmds\"\n+reload_flag=$reload_flag\n+reload_cmds=$reload_cmds\n \n # How to pass a linker flag through the compiler.\n-wl=\"$wl\"\n+wl=$wl\n \n # Object file suffix (normally \"o\").\n objext=\"$objext\"\n@@ -1597,77 +2585,117 @@ objext=\"$objext\"\n libext=\"$libext\"\n \n # Additional compiler flags for building library objects.\n-pic_flag=\"$pic_flag\"\n+pic_flag=$pic_flag\n+\n+# Does compiler simultaneously support -c and -o options\n+compiler_c_o=$compiler_c_o\n+\n+# Can we write directly to a .lo ?\n+compiler_o_lo=$compiler_o_lo\n+\n+# Must we lock files when doing compilation ?\n+need_locks=$need_locks\n+\n+# Do we need the lib prefix for modules?\n+need_lib_prefix=$need_lib_prefix\n+\n+# Do we need a version for libraries?\n+need_version=$need_version\n+\n+# Whether dlopen is supported.\n+dlopen=$enable_dlopen\n+\n+# Whether dlopen of programs is supported.\n+dlopen_self=$enable_dlopen_self\n+\n+# Whether dlopen of statically linked programs is supported.\n+dlopen_self_static=$enable_dlopen_self_static\n \n # Compiler flag to prevent dynamic linking.\n-link_static_flag=\"$link_static_flag\"\n+link_static_flag=$link_static_flag\n \n # Compiler flag to turn off builtin functions.\n-no_builtin_flag=\"$no_builtin_flag\"\n+no_builtin_flag=$no_builtin_flag\n \n # Compiler flag to allow reflexive dlopens.\n-export_dynamic_flag_spec=\"$export_dynamic_flag_spec\"\n+export_dynamic_flag_spec=$export_dynamic_flag_spec\n \n # Compiler flag to generate shared objects directly from archives.\n-whole_archive_flag_spec=\"$whole_archive_flag_spec\"\n+whole_archive_flag_spec=$whole_archive_flag_spec\n+\n+# Compiler flag to generate thread-safe objects.\n+thread_safe_flag_spec=$thread_safe_flag_spec\n \n # Library versioning type.\n version_type=$version_type\n \n # Format of library name prefix.\n-libname_spec=\"$libname_spec\"\n+libname_spec=$libname_spec\n \n # List of archive names.  First name is the real one, the rest are links.\n # The last name is the one that the linker finds with -lNAME.\n-library_names_spec=\"$library_names_spec\"\n+library_names_spec=$library_names_spec\n \n # The coded name of the library, if different from the real name.\n-soname_spec=\"$soname_spec\"\n+soname_spec=$soname_spec\n \n # Commands used to build and install an old-style archive.\n-RANLIB=\"$RANLIB\"\n-old_archive_cmds=\"$old_archive_cmds\"\n-old_postinstall_cmds=\"$old_postinstall_cmds\"\n-old_postuninstall_cmds=\"$old_postuninstall_cmds\"\n+RANLIB=$RANLIB\n+old_archive_cmds=$old_archive_cmds\n+old_postinstall_cmds=$old_postinstall_cmds\n+old_postuninstall_cmds=$old_postuninstall_cmds\n \n # Create an old-style archive from a shared archive.\n-old_archive_from_new_cmds=\"$old_archive_from_new_cmds\"\n+old_archive_from_new_cmds=$old_archive_from_new_cmds\n \n # Commands used to build and install a shared archive.\n-archive_cmds=\"$archive_cmds\"\n-postinstall_cmds=\"$postinstall_cmds\"\n-postuninstall_cmds=\"$postuninstall_cmds\"\n+archive_cmds=$archive_cmds\n+archive_expsym_cmds=$archive_expsym_cmds\n+postinstall_cmds=$postinstall_cmds\n+postuninstall_cmds=$postuninstall_cmds\n+\n+# Method to check whether dependent libraries are shared objects.\n+deplibs_check_method=$deplibs_check_method\n+\n+# Command to use when deplibs_check_method == file_magic\n+file_magic_cmd=$file_magic_cmd\n \n # Flag that allows shared libraries with undefined symbols to be built.\n-allow_undefined_flag=\"$allow_undefined_flag\"\n+allow_undefined_flag=$allow_undefined_flag\n \n # Flag that forces no undefined symbols.\n-no_undefined_flag=\"$no_undefined_flag\"\n+no_undefined_flag=$no_undefined_flag\n \n # Commands used to finish a libtool library installation in a directory.\n-finish_cmds=\"$finish_cmds\"\n+finish_cmds=$finish_cmds\n \n # Same as above, but a single script fragment to be evaled but not shown.\n-finish_eval=\"$finish_eval\"\n+finish_eval=$finish_eval\n \n # Take the output of nm and produce a listing of raw symbols and C names.\n-global_symbol_pipe=\"$global_symbol_pipe\"\n+global_symbol_pipe=$global_symbol_pipe\n+\n+# Transform the output of nm in a proper C declaration\n+global_symbol_to_cdecl=$global_symbol_to_cdecl\n \n # This is the shared library runtime path variable.\n runpath_var=$runpath_var\n \n # This is the shared library path variable.\n shlibpath_var=$shlibpath_var\n \n+# Is shlibpath searched before the hard-coded library search path?\n+shlibpath_overrides_runpath=$shlibpath_overrides_runpath\n+\n # How to hardcode a shared library path into an executable.\n hardcode_action=$hardcode_action\n \n # Flag to hardcode \\$libdir into a binary during linking.\n # This must work even if \\$libdir does not exist.\n-hardcode_libdir_flag_spec=\"$hardcode_libdir_flag_spec\"\n+hardcode_libdir_flag_spec=$hardcode_libdir_flag_spec\n \n # Whether we need a single -rpath flag with a separated argument.\n-hardcode_libdir_separator=\"$hardcode_libdir_separator\"\n+hardcode_libdir_separator=$hardcode_libdir_separator\n \n # Set to yes if using DIR/libNAME.so during linking hardcodes DIR into the\n # resulting binary.\n@@ -1681,13 +2709,36 @@ hardcode_minus_L=$hardcode_minus_L\n # the resulting binary.\n hardcode_shlibpath_var=$hardcode_shlibpath_var\n \n+# Compile-time system search path for libraries\n+sys_lib_search_path_spec=$sys_lib_search_path_spec\n+\n+# Run-time system search path for libraries\n+sys_lib_dlsearch_path_spec=$sys_lib_dlsearch_path_spec\n+\n # Fix the shell variable \\$srcfile for the compiler.\n fix_srcfile_path=\"$fix_srcfile_path\"\n+\n+# Set to yes if exported symbols are required\n+always_export_symbols=$always_export_symbols\n+\n+# The command to extract exported symbols\n+export_symbols_cmds=$export_symbols_cmds\n+\n+# Symbols that should not be listed in the preloaded symbols\n+exclude_expsyms=$exclude_expsyms\n+\n+# Symbols that must always be exported\n+include_expsyms=$include_expsyms\n+\n EOF\n \n-case \"$host_os\" in\n-aix3*)\n-  cat <<\\EOF >> \"$ofile\"\n+case \"$ltmain\" in\n+*.sh)\n+  echo '### END LIBTOOL CONFIG' >> \"$ofile\"\n+  echo >> \"$ofile\"\n+  case \"$host_os\" in\n+  aix3*)\n+    cat <<\\EOF >> \"$ofile\"\n \n # AIX sometimes has problems with the GCC collect2 program.  For some\n # reason, if we set the COLLECT_NAMES environment variable, the problems\n@@ -1697,16 +2748,72 @@ if test \"${COLLECT_NAMES+set}\" != set; then\n   export COLLECT_NAMES\n fi\n EOF\n+    ;;\n+  esac\n+\n+  # Append the ltmain.sh script.\n+  cat \"$ltmain\" >> \"$ofile\" || (rm -f \"$ofile\"; exit 1)\n+\n+  chmod +x \"$ofile\"\n+  ;;\n+\n+*)\n+  # Compile the libtool program.\n+  echo \"FIXME: would compile $ltmain\"\n   ;;\n esac\n \n-echo '### END LIBTOOL CONFIG' >> \"$ofile\"\n-echo >> \"$ofile\"\n+test -n \"$cache_file\" || exit 0\n \n-# Append the ltmain.sh script.\n-cat \"$ltmain\" >> \"$ofile\" || (rm -f \"$ofile\"; exit 1)\n+# AC_CACHE_SAVE\n+trap '' 1 2 15\n+cat > confcache <<\\EOF\n+# This file is a shell script that caches the results of configure\n+# tests run on this system so they can be shared between configure\n+# scripts and configure runs.  It is not useful on other systems.\n+# If it contains results you don't want to keep, you may remove or edit it.\n+#\n+# By default, configure uses ./config.cache as the cache file,\n+# creating it if it does not exist already.  You can give configure\n+# the --cache-file=FILE option to use a different cache file; that is\n+# what configure does when it calls configure scripts in\n+# subdirectories, so they share the cache.\n+# Giving --cache-file=/dev/null disables caching, for debugging configure.\n+# config.status only pays attention to the cache file if you give it the\n+# --recheck option to rerun configure.\n+#\n+EOF\n+# The following way of writing the cache mishandles newlines in values,\n+# but we know of no workaround that is simple, portable, and efficient.\n+# So, don't put newlines in cache variables' values.\n+# Ultrix sh set writes to stderr and can't be redirected directly,\n+# and sets the high bit in the cache file unless we assign to the vars.\n+(set) 2>&1 |\n+  case `(ac_space=' '; set | grep ac_space) 2>&1` in\n+  *ac_space=\\ *)\n+    # `set' does not quote correctly, so add quotes (double-quote substitution\n+    # turns \\\\\\\\ into \\\\, and sed turns \\\\ into \\).\n+    sed -n \\\n+      -e \"s/'/'\\\\\\\\''/g\" \\\n+      -e \"s/^\\\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\\\)=\\\\(.*\\\\)/\\\\1=\\${\\\\1='\\\\2'}/p\"\n+    ;;\n+  *)\n+    # `set' quotes correctly as required by POSIX, so do not add quotes.\n+    sed -n -e 's/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=${\\1=\\2}/p'\n+    ;;\n+  esac >> confcache\n+if cmp -s $cache_file confcache; then\n+  :\n+else\n+  if test -w $cache_file; then\n+    echo \"updating cache $cache_file\"\n+    cat confcache > $cache_file\n+  else\n+    echo \"not updating unwritable cache $cache_file\"\n+  fi\n+fi\n+rm -f confcache\n \n-chmod +x \"$ofile\"\n exit 0\n \n # Local Variables:"}, {"sha": "bfc7e9d7ad3069379cfbfd962a20d0fdf712da3b", "filename": "ltmain.sh", "status": "modified", "additions": 2046, "deletions": 903, "changes": 2949, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90fb0c24988b0aa9a250761c457f6c22ee6f3651/ltmain.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90fb0c24988b0aa9a250761c457f6c22ee6f3651/ltmain.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltmain.sh?ref=90fb0c24988b0aa9a250761c457f6c22ee6f3651"}]}