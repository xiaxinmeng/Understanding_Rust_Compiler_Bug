{"sha": "227351345d0caa596eff8325144f15b15f704c08", "node_id": "C_kwDOANBUbNoAKDIyNzM1MTM0NWQwY2FhNTk2ZWZmODMyNTE0NGYxNWIxNWY3MDRjMDg", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2023-01-12T13:03:01Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2023-01-13T00:15:01Z"}, "message": "libstdc++: Do not include <system_error> in concurrency headers\n\nThe <condition_variable>, <mutex>, and <shared_mutex> headers use\nstd::errc constants, but don't use std::system_error itself. They only\nuse the __throw_system_error(int) function, which is defined in\n<bits/functexcept.h>.\n\nBy including the header for the errc constants instead of the whole of\n<system_error> we avoid depending on the whole std::string definition.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/std_mutex.h: Remove <system_error> include.\n\t* include/std/condition_variable: Add <bits/error_constants.h>\n\tinclude.\n\t* include/std/mutex: Likewise.\n\t* include/std/shared_mutex: Likewise.", "tree": {"sha": "1e3c2029679941befce2fcc5551949790c0c496c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e3c2029679941befce2fcc5551949790c0c496c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/227351345d0caa596eff8325144f15b15f704c08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/227351345d0caa596eff8325144f15b15f704c08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/227351345d0caa596eff8325144f15b15f704c08", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/227351345d0caa596eff8325144f15b15f704c08/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0597d81b13c0cac41a9381fc5f3e6c73aa2ccaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0597d81b13c0cac41a9381fc5f3e6c73aa2ccaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0597d81b13c0cac41a9381fc5f3e6c73aa2ccaf"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "bc515358d23bde0c659a3f1122fba332390e4c1c", "filename": "libstdc++-v3/include/bits/std_mutex.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstd_mutex.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstd_mutex.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstd_mutex.h?ref=227351345d0caa596eff8325144f15b15f704c08", "patch": "@@ -36,7 +36,6 @@\n # include <bits/c++0x_warning.h>\n #else\n \n-#include <system_error>\n #include <bits/functexcept.h>\n #include <bits/gthr.h>\n "}, {"sha": "f671fe4afe1c9455c6cde56bdd5b899335e93d56", "filename": "libstdc++-v3/include/std/condition_variable", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fcondition_variable", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fcondition_variable", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fcondition_variable?ref=227351345d0caa596eff8325144f15b15f704c08", "patch": "@@ -38,6 +38,7 @@\n #else\n \n #include <bits/chrono.h>\n+#include <bits/error_constants.h>\n #include <bits/std_mutex.h>\n #include <bits/unique_lock.h>\n #include <bits/alloc_traits.h>\n@@ -372,7 +373,7 @@ _GLIBCXX_BEGIN_INLINE_ABI_NAMESPACE(_V2)\n         {\n           return __p();\n         }\n- \n+\n       std::stop_callback __cb(__stoken, [this] { notify_all(); });\n       shared_ptr<mutex> __mutex = _M_mutex;\n       while (!__p())"}, {"sha": "4eedbe5038ce0c5279b2fca447e1b7442f88f549", "filename": "libstdc++-v3/include/std/mutex", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fmutex?ref=227351345d0caa596eff8325144f15b15f704c08", "patch": "@@ -40,8 +40,8 @@\n #include <tuple>\n #include <exception>\n #include <type_traits>\n-#include <system_error>\n #include <bits/chrono.h>\n+#include <bits/error_constants.h>\n #include <bits/std_mutex.h>\n #include <bits/unique_lock.h>\n #if ! _GTHREAD_USE_MUTEX_TIMEDLOCK"}, {"sha": "57c3cc54d81cdef660b30cc1b4bb8d9fb7214add", "filename": "libstdc++-v3/include/std/shared_mutex", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fshared_mutex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/227351345d0caa596eff8325144f15b15f704c08/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fshared_mutex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fshared_mutex?ref=227351345d0caa596eff8325144f15b15f704c08", "patch": "@@ -36,6 +36,7 @@\n #if __cplusplus >= 201402L\n \n #include <bits/chrono.h>\n+#include <bits/error_constants.h>\n #include <bits/functexcept.h>\n #include <bits/move.h>        // move, __exchange\n #include <bits/std_mutex.h>   // defer_lock_t"}]}