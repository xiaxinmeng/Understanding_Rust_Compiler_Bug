{"sha": "1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWI2ZmE4NjAwMmFmYjRhOGYyOGFiNDBhZmM4MTJlYzVlNzNjY2JhNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-03-17T12:35:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-03-17T12:35:04Z"}, "message": "re PR rtl-optimization/48141 (DSE compile time hog)\n\n\tPR rtl-optimization/48141\n\t* dse.c (record_store): If no positions are needed in an insn\n\tthat cannot be deleted, at least unchain it from active_local_stores.\n\n\t* gcc.dg/pr48141.c: New test.\n\nFrom-SVN: r171089", "tree": {"sha": "f38d80304975154c0fc076b80fccc2023ac48021", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f38d80304975154c0fc076b80fccc2023ac48021"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cb21e9cdf7176be9c23c3a003822cf7a3d3f4995", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb21e9cdf7176be9c23c3a003822cf7a3d3f4995", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb21e9cdf7176be9c23c3a003822cf7a3d3f4995"}], "stats": {"total": 36, "additions": 32, "deletions": 4}, "files": [{"sha": "a0bdc239f2de65a52cc038d959934c466813063c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "patch": "@@ -1,3 +1,9 @@\n+2011-03-17  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/48141\n+\t* dse.c (record_store): If no positions are needed in an insn\n+\tthat cannot be deleted, at least unchain it from active_local_stores.\n+\n 2011-03-16  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR debug/47510"}, {"sha": "e43ab72d7427dba66d68b09bc4ae8c60a2a989e0", "filename": "gcc/dse.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2Fdse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2Fdse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdse.c?ref=1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "patch": "@@ -1,5 +1,5 @@\n /* RTL dead store elimination.\n-   Copyright (C) 2005, 2006, 2007, 2008, 2009, 2010\n+   Copyright (C) 2005, 2006, 2007, 2008, 2009, 2010, 2011\n    Free Software Foundation, Inc.\n \n    Contributed by Richard Sandiford <rsandifor@codesourcery.com>\n@@ -1530,8 +1530,7 @@ record_store (rtx body, bb_info_t bb_info)\n \n       /* An insn can be deleted if every position of every one of\n \t its s_infos is zero.  */\n-      if (any_positions_needed_p (s_info)\n-\t  || ptr->cannot_delete)\n+      if (any_positions_needed_p (s_info))\n \tdel = false;\n \n       if (del)\n@@ -1543,7 +1542,8 @@ record_store (rtx body, bb_info_t bb_info)\n \t  else\n \t    active_local_stores = ptr->next_local_store;\n \n-\t  delete_dead_store_insn (insn_to_delete);\n+\t  if (!insn_to_delete->cannot_delete)\n+\t    delete_dead_store_insn (insn_to_delete);\n \t}\n       else\n \tlast = ptr;"}, {"sha": "b76cd474955e4f676e9c4e9af13bf4b3eb66a00f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "patch": "@@ -1,3 +1,8 @@\n+2011-03-17  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/48141\n+\t* gcc.dg/pr48141.c: New test.\n+\n 2011-03-16  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/cpp0x/constexpr-48089.C: New."}, {"sha": "006f5cb14404358fd0a46e0230e292006f8c39b1", "filename": "gcc/testsuite/gcc.dg/pr48141.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr48141.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b6fa86002afb4a8f28ab40afc812ec5e73ccba6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr48141.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr48141.c?ref=1b6fa86002afb4a8f28ab40afc812ec5e73ccba6", "patch": "@@ -0,0 +1,17 @@\n+/* PR rtl-optimization/48141 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O\" } */\n+\n+#define A i = 0;\n+#define B A A A A A A A A A A\n+#define C B B B B B B B B B B\n+#define D C C C C C C C C C C\n+#define E D D D D D D D D D D\n+\n+int\n+foo (void)\n+{\n+  volatile int i = 0;\n+  E E E E E E E E E E E\n+  return 0;\n+}"}]}