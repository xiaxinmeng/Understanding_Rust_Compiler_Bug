{"sha": "dbeff3e56d566719bb3f0c1ba29362d61fe3ff85", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGJlZmYzZTU2ZDU2NjcxOWJiM2YwYzFiYTI5MzYyZDYxZmUzZmY4NQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2004-06-05T16:35:55Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2004-06-05T16:35:55Z"}, "message": "v850.c (v850_use_dfa_pipeline_interface): New.\n\n\t* config/v850/v850.c (v850_use_dfa_pipeline_interface): New.\n\t* config/v850/v850.md: Convert to DFA scheduler description.\n\nFrom-SVN: r82653", "tree": {"sha": "80ec3d108875c06f85c4bca54d6aae260283af01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80ec3d108875c06f85c4bca54d6aae260283af01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85/comments", "author": null, "committer": null, "parents": [{"sha": "9fc3ed51d05dc76edb1f7f0ac7a52df24c9738ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fc3ed51d05dc76edb1f7f0ac7a52df24c9738ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fc3ed51d05dc76edb1f7f0ac7a52df24c9738ef"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "9fb018e1737fed73495e419950b4a6f1dbdc5052", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dbeff3e56d566719bb3f0c1ba29362d61fe3ff85", "patch": "@@ -1,3 +1,8 @@\n+2004-06-05  Steven Bosscher  <stevenb@suse.de>\n+\n+\t* config/v850/v850.c (v850_use_dfa_pipeline_interface): New.\n+\t* config/v850/v850.md: Convert to DFA scheduler description.\n+\n 2004-06-05  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/15478"}, {"sha": "5bd8ce455b0b263c0cdd9fb4e128d0a964fc7292", "filename": "gcc/config/v850/v850.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85/gcc%2Fconfig%2Fv850%2Fv850.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85/gcc%2Fconfig%2Fv850%2Fv850.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850.c?ref=dbeff3e56d566719bb3f0c1ba29362d61fe3ff85", "patch": "@@ -64,6 +64,7 @@ static void v850_insert_attributes   (tree, tree *);\n static void v850_select_section (tree, int, unsigned HOST_WIDE_INT);\n static void v850_encode_data_area    (tree, rtx);\n static void v850_encode_section_info (tree, rtx, int);\n+static int  v850_use_dfa_pipeline_interface (void);\n static bool v850_return_in_memory    (tree, tree);\n static void v850_setup_incoming_varargs (CUMULATIVE_ARGS *, enum machine_mode,\n \t\t\t\t\t tree, int *, int);\n@@ -113,9 +114,13 @@ static int v850_interrupt_p = FALSE;\n \n #undef TARGET_RTX_COSTS\n #define TARGET_RTX_COSTS v850_rtx_costs\n+\n #undef TARGET_ADDRESS_COST\n #define TARGET_ADDRESS_COST hook_int_rtx_0\n \n+#undef TARGET_SCHED_USE_DFA_PIPELINE_INTERFACE\n+#define TARGET_SCHED_USE_DFA_PIPELINE_INTERFACE v850_use_dfa_pipeline_interface\n+\n #undef TARGET_MACHINE_DEPENDENT_REORG\n #define TARGET_MACHINE_DEPENDENT_REORG v850_reorg\n \n@@ -2340,6 +2345,12 @@ v850_encode_section_info (tree decl, rtx rtl, int first)\n     v850_encode_data_area (decl, XEXP (rtl, 0));\n }\n \n+static int\n+v850_use_dfa_pipeline_interface (void)\n+{\n+  return 1;\n+}\n+\n /* Return true if the given RTX is a register which can be restored\n    by a function epilogue.  */\n int"}, {"sha": "503f1fe675800e2f04168c23f11368b14c88fc9d", "filename": "gcc/config/v850/v850.md", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85/gcc%2Fconfig%2Fv850%2Fv850.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbeff3e56d566719bb3f0c1ba29362d61fe3ff85/gcc%2Fconfig%2Fv850%2Fv850.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fv850%2Fv850.md?ref=dbeff3e56d566719bb3f0c1ba29362d61fe3ff85", "patch": "@@ -61,10 +61,16 @@\n ;; Function units for the V850.  As best as I can tell, there's\n ;; a traditional memory load/use stall as well as a stall if\n ;; the result of a multiply is used too early.\n-;;\n-(define_function_unit \"memory\" 1 0 (eq_attr \"type\" \"load\") 2 0)\n-(define_function_unit \"mult\"   1 0 (eq_attr \"type\" \"mult\") 2 0)\n \n+(define_insn_reservation \"v850_other\" 1\n+\t\t\t (eq_attr \"type\" \"other\")\n+\t\t\t \"nothing\")\n+(define_insn_reservation \"v850_mult\" 2\n+\t\t\t (eq_attr \"type\" \"mult\")\n+\t\t\t \"nothing\")\n+(define_insn_reservation \"v850_memory\" 2\n+\t\t\t (eq_attr \"type\" \"load\")\n+\t\t\t \"nothing\")\n \f\n ;; ----------------------------------------------------------------------\n ;; MOVE INSTRUCTIONS"}]}