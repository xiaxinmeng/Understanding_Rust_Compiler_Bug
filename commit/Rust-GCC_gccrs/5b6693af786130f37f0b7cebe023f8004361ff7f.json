{"sha": "5b6693af786130f37f0b7cebe023f8004361ff7f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWI2NjkzYWY3ODYxMzBmMzdmMGI3Y2ViZTAyM2Y4MDA0MzYxZmY3Zg==", "commit": {"author": {"name": "Samuel Thibault", "email": "samuel.thibault@ens-lyon.org", "date": "2007-08-08T06:35:17Z"}, "committer": {"name": "Matthias Klose", "email": "doko@gcc.gnu.org", "date": "2007-08-08T06:35:17Z"}, "message": "gnu.h (STARTFILE_SPEC): Use gcrt0.o in profile mode, add -profile option, add pie support.\n\n2007-08-08  Samuel Thibault  <samuel.thibault@ens-lyon.org>\n\n        * gcc/config/i386/gnu.h (STARTFILE_SPEC): Use gcrt0.o in profile mode, add\n        -profile option, add pie support.\n        (ENDFILE_SPEC): New spec.\n        * gcc/config/gnu.h (LIB_SPEC): Add -profile option.\n\nFrom-SVN: r127290", "tree": {"sha": "5185ba498d5c927400c1483ff82be6687d455814", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5185ba498d5c927400c1483ff82be6687d455814"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b6693af786130f37f0b7cebe023f8004361ff7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b6693af786130f37f0b7cebe023f8004361ff7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b6693af786130f37f0b7cebe023f8004361ff7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b6693af786130f37f0b7cebe023f8004361ff7f/comments", "author": {"login": "sthibaul", "id": 5405051, "node_id": "MDQ6VXNlcjU0MDUwNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/5405051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sthibaul", "html_url": "https://github.com/sthibaul", "followers_url": "https://api.github.com/users/sthibaul/followers", "following_url": "https://api.github.com/users/sthibaul/following{/other_user}", "gists_url": "https://api.github.com/users/sthibaul/gists{/gist_id}", "starred_url": "https://api.github.com/users/sthibaul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sthibaul/subscriptions", "organizations_url": "https://api.github.com/users/sthibaul/orgs", "repos_url": "https://api.github.com/users/sthibaul/repos", "events_url": "https://api.github.com/users/sthibaul/events{/privacy}", "received_events_url": "https://api.github.com/users/sthibaul/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cf1c6ebf1319a1fa789dea2e8cd30344cc50795a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf1c6ebf1319a1fa789dea2e8cd30344cc50795a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf1c6ebf1319a1fa789dea2e8cd30344cc50795a"}], "stats": {"total": 27, "additions": 20, "deletions": 7}, "files": [{"sha": "15deba017eb1906f3cb151c3efe59ae0e0f16a4c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b6693af786130f37f0b7cebe023f8004361ff7f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b6693af786130f37f0b7cebe023f8004361ff7f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5b6693af786130f37f0b7cebe023f8004361ff7f", "patch": "@@ -1,3 +1,10 @@\n+2007-08-08  Samuel Thibault  <samuel.thibault@ens-lyon.org>\n+\n+\t* gcc/config/i386/gnu.h (STARTFILE_SPEC): Use gcrt0.o in profile mode, add\n+\t-profile option, add pie support.\n+\t(ENDFILE_SPEC): New spec.\n+\t* gcc/config/gnu.h (LIB_SPEC): Add -profile option.\n+\n 2007-08-08  Samuel Thibault  <samuel.thibault@ens-lyon.org>\n \n \t* gcc/config/i386/gnu.h (CPP_SPEC): Add -pthread option."}, {"sha": "b7fefa4427c130385471041838b2540f98fa5bb5", "filename": "gcc/config/gnu.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b6693af786130f37f0b7cebe023f8004361ff7f/gcc%2Fconfig%2Fgnu.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b6693af786130f37f0b7cebe023f8004361ff7f/gcc%2Fconfig%2Fgnu.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgnu.h?ref=5b6693af786130f37f0b7cebe023f8004361ff7f", "patch": "@@ -6,7 +6,7 @@\n \n /* Default C library spec.  Use -lbsd-compat for gcc -bsd.  */\n #undef LIB_SPEC\n-#define LIB_SPEC \"%{pthread:-lpthread} %{bsd:-lbsd-compat} %{!p:%{!pg:-lc}}%{p:-lc_p}%{pg:-lc_p}\"\n+#define LIB_SPEC \"%{pthread:-lpthread} %{bsd:-lbsd-compat} %{pg|p|profile:-lc_p;:-lc}\"\n \n /* Standard include directory.  In GNU, \"/usr\" is a four-letter word.  */\n #undef STANDARD_INCLUDE_DIR"}, {"sha": "a2b4f24291c52a8d36e64e34e6076ec06b58b5b7", "filename": "gcc/config/i386/gnu.h", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b6693af786130f37f0b7cebe023f8004361ff7f/gcc%2Fconfig%2Fi386%2Fgnu.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b6693af786130f37f0b7cebe023f8004361ff7f/gcc%2Fconfig%2Fi386%2Fgnu.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fgnu.h?ref=5b6693af786130f37f0b7cebe023f8004361ff7f", "patch": "@@ -26,13 +26,19 @@\n     %{static:-static}}\"\n \n #undef\tSTARTFILE_SPEC\n+#if defined HAVE_LD_PIE\n #define STARTFILE_SPEC \\\n-  \"%{!shared: \\\n-     %{!static: \\\n-       %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} %{!p:crt1.o%s}}} \\\n-     %{static:crt0.o%s}} \\\n-   crti.o%s %{static:crtbeginT.o%s}\\\n-   %{!static:%{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}}\"\n+  \"%{!shared: %{pg|p|profile:gcrt0.o%s;pie:Scrt1.o%s;static:crt0.o%s;:crt1.o%s}} \\\n+   crti.o%s %{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s}\"\n+#else\n+#define STARTFILE_SPEC \\\n+  \"%{!shared: %{pg|p|profile:gcrt0.o%s;static:crt0.o%s;:crt1.o%s}} \\\n+   crti.o%s %{static:crtbeginT.o%s;shared|pie:crtbeginS.o%s;:crtbegin.o%s}\"\n+#endif\n+\n+#undef\tENDFILE_SPEC\n+#define ENDFILE_SPEC \\\n+  \"%{shared|pie:crtendS.o%s;:crtend.o%s} crtn.o%s\"\n \n /* FIXME: Is a Hurd-specific fallback mechanism necessary?  */\n #undef MD_UNWIND_SUPPORT"}]}