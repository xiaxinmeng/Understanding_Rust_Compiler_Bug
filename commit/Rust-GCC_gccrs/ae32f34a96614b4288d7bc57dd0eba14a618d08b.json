{"sha": "ae32f34a96614b4288d7bc57dd0eba14a618d08b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWUzMmYzNGE5NjYxNGI0Mjg4ZDdiYzU3ZGQwZWJhMTRhNjE4ZDA4Yg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-02-10T07:25:24Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-02-10T07:25:24Z"}, "message": "* jump.c (delete_insn): Don't delete user labels at -O0.\n\nFrom-SVN: r31885", "tree": {"sha": "719755901d47e4ebb97cdc359da68c8ca3ce524c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/719755901d47e4ebb97cdc359da68c8ca3ce524c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae32f34a96614b4288d7bc57dd0eba14a618d08b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae32f34a96614b4288d7bc57dd0eba14a618d08b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae32f34a96614b4288d7bc57dd0eba14a618d08b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae32f34a96614b4288d7bc57dd0eba14a618d08b/comments", "author": null, "committer": null, "parents": [{"sha": "7e1878ef57e0ce5845a1b00b019732f2e9979bd7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e1878ef57e0ce5845a1b00b019732f2e9979bd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e1878ef57e0ce5845a1b00b019732f2e9979bd7"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "a7bbcf35ec5da9e736bf7305bb5e05e4c7898f2f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae32f34a96614b4288d7bc57dd0eba14a618d08b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae32f34a96614b4288d7bc57dd0eba14a618d08b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ae32f34a96614b4288d7bc57dd0eba14a618d08b", "patch": "@@ -1,3 +1,7 @@\n+2000-02-09  Richard Henderson  <rth@cygnus.com>\n+\n+\t* jump.c (delete_insn): Don't delete user labels at -O0.\n+\n 2000-02-09  Robert Lipe  <robertl@sco.com>\n \n \t* Makefile.in (gen-protos): Don't depend on HOST_LIBDEPS."}, {"sha": "fcabc27d34910ad4ae569fba61698e980f652a68", "filename": "gcc/jump.c", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae32f34a96614b4288d7bc57dd0eba14a618d08b/gcc%2Fjump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae32f34a96614b4288d7bc57dd0eba14a618d08b/gcc%2Fjump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjump.c?ref=ae32f34a96614b4288d7bc57dd0eba14a618d08b", "patch": "@@ -4223,15 +4223,19 @@ delete_insn (insn)\n   if (was_code_label)\n     remove_node_from_expr_list (insn, &nonlocal_goto_handler_labels);\n \n-  /* Don't delete user-declared labels.  Convert them to special NOTEs\n-     instead.  */\n-  if (was_code_label && LABEL_NAME (insn) != 0\n-      && optimize && ! dont_really_delete)\n+  /* Don't delete user-declared labels.  When optimizing, convert them\n+     to special NOTEs instead.  When not optimizing, leave them alone.  */\n+  if (was_code_label && LABEL_NAME (insn) != 0)\n     {\n-      PUT_CODE (insn, NOTE);\n-      NOTE_LINE_NUMBER (insn) = NOTE_INSN_DELETED_LABEL;\n-      NOTE_SOURCE_FILE (insn) = 0;\n-      dont_really_delete = 1;\n+      if (! optimize)\n+\tdont_really_delete = 1;\n+      else if (! dont_really_delete)\n+\t{\n+\t  PUT_CODE (insn, NOTE);\n+\t  NOTE_LINE_NUMBER (insn) = NOTE_INSN_DELETED_LABEL;\n+\t  NOTE_SOURCE_FILE (insn) = 0;\n+\t  dont_really_delete = 1;\n+\t}\n     }\n   else\n     /* Mark this insn as deleted.  */"}]}