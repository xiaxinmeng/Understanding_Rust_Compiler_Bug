{"sha": "7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NhYjA3ZjA4OTFkZWMwM2Y2NGFlNGJlMjI1ZjdkZDVlYTRjNzBlZQ==", "commit": {"author": {"name": "Wei Xiao", "email": "wei3.xiao@intel.com", "date": "2018-12-13T08:57:28Z"}, "committer": {"name": "Xuepeng Guo", "email": "xguo@gcc.gnu.org", "date": "2018-12-13T08:57:28Z"}, "message": "i386-common.c (processor_names): Add cascadelake.\n\ngcc/\n      * common/config/i386/i386-common.c (processor_names): Add cascadelake.\n      (processor_alias_table): Add cascadelake.\n      * config.gcc: Add -march=cascadelake.\n      * config/i386/i386-c.c (ix86_target_macros_internal): Handle cascadelake.\n      * config/i386/i386.c (Add m_CASCADELAKE): New.\n      (processor_cost_table): Add cascadelake.\n      (get_builtin_code_for_version): Handle cascadelake.\n      * config/i386/i386.h (TARGET_CASCADELAKE, PROCESSOR_CASCADELAKE): New.\n      (PTA_CASCADELAKE): Ditto.\n      * doc/invoke.texi: Add -march=cascadelake.\n\ngcc/testsuite/\n      * gcc.target/i386/funcspec-56.inc: Handle new march.\n\nFrom-SVN: r267080", "tree": {"sha": "c4c277cf7b2c1bfd341ac3e00a9ae740b7a86ea4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4c277cf7b2c1bfd341ac3e00a9ae740b7a86ea4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/comments", "author": {"login": "williamweixiao", "id": 23331893, "node_id": "MDQ6VXNlcjIzMzMxODkz", "avatar_url": "https://avatars.githubusercontent.com/u/23331893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/williamweixiao", "html_url": "https://github.com/williamweixiao", "followers_url": "https://api.github.com/users/williamweixiao/followers", "following_url": "https://api.github.com/users/williamweixiao/following{/other_user}", "gists_url": "https://api.github.com/users/williamweixiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/williamweixiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/williamweixiao/subscriptions", "organizations_url": "https://api.github.com/users/williamweixiao/orgs", "repos_url": "https://api.github.com/users/williamweixiao/repos", "events_url": "https://api.github.com/users/williamweixiao/events{/privacy}", "received_events_url": "https://api.github.com/users/williamweixiao/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "81f3e60f5b7d82567df02aeb780580b983f7aeaa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81f3e60f5b7d82567df02aeb780580b983f7aeaa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81f3e60f5b7d82567df02aeb780580b983f7aeaa"}], "stats": {"total": 54, "additions": 49, "deletions": 5}, "files": [{"sha": "0e1cd58fcf9b0b66d700e28eaae31232752fb636", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -1,3 +1,17 @@\n+2018-12-13  Wei Xiao  <wei3.xiao@intel.com>\n+\n+\t* common/config/i386/i386-common.c (processor_names): Add cascadelake.\n+\t(processor_alias_table): Add cascadelake.\n+\t* config.gcc: Add -march=cascadelake.\n+\t* config/i386/i386-c.c (ix86_target_macros_internal): Handle\n+\tcascadelake.\n+\t* config/i386/i386.c (Add m_CASCADELAKE): New.\n+\t(processor_cost_table): Add cascadelake.\n+\t(get_builtin_code_for_version): Handle cascadelake.\n+\t* config/i386/i386.h (TARGET_CASCADELAKE, PROCESSOR_CASCADELAKE): New.\n+\t(PTA_CASCADELAKE): Ditto.\n+\t* doc/invoke.texi: Add -march=cascadelake.\n+\n 2018-12-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/88465\n@@ -3553,7 +3567,7 @@\n \t* vr-values.c (vr_values::extract_range_from_comparison):\n \tClear equiv for constant singleton ranges.\n \n-2018-11-12 Wei Xiao <wei3.xiao@intel.com>\n+2018-11-12  Wei Xiao  <wei3.xiao@intel.com>\n \n \t* config/i386/sse.md: Combine VFIXUPIMM* patterns\n \t(<avx512>_fixupimm<mode>_maskz<round_saeonly_expand_name>): Update.\n@@ -4804,7 +4818,7 @@\n \t(pass_inc_dec::execute): Allocate and release\n \treg_next_debug_use.\n \n-2018-11-06 Wei Xiao <wei3.xiao@intel.com>\n+2018-11-06  Wei Xiao  <wei3.xiao@intel.com>\n \n \t* config/i386/avx512fintrin.h: Update VFIXUPIMM* intrinsics.\n \t(_mm512_fixupimm_round_pd): Update parameters and builtin."}, {"sha": "f7a1feae074a489158687c87ebb9d5e8d5fa7e18", "filename": "gcc/common/config/i386/i386-common.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fcommon%2Fconfig%2Fi386%2Fi386-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fcommon%2Fconfig%2Fi386%2Fi386-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Fi386%2Fi386-common.c?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -1504,6 +1504,7 @@ const char *const processor_names[] =\n   \"cannonlake\",\n   \"icelake-client\",\n   \"icelake-server\",\n+  \"cascadelake\",\n   \"intel\",\n   \"geode\",\n   \"k6\",\n@@ -1584,6 +1585,8 @@ const pta processor_alias_table[] =\n     PTA_ICELAKE_CLIENT},\n   {\"icelake-server\", PROCESSOR_ICELAKE_SERVER, CPU_HASWELL,\n     PTA_ICELAKE_SERVER},\n+  {\"cascadelake\", PROCESSOR_CASCADELAKE, CPU_HASWELL,\n+    PTA_CASCADELAKE},\n   {\"bonnell\", PROCESSOR_BONNELL, CPU_ATOM, PTA_BONNELL},\n   {\"atom\", PROCESSOR_BONNELL, CPU_ATOM, PTA_BONNELL},\n   {\"silvermont\", PROCESSOR_SILVERMONT, CPU_SLM, PTA_SILVERMONT},"}, {"sha": "3122a0ce2ae8c730582934aa0ad7661e068b2f7b", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -662,7 +662,7 @@ bdver3 bdver4 znver1 znver2 btver1 btver2 k8 k8-sse3 opteron \\\n opteron-sse3 nocona core2 corei7 corei7-avx core-avx-i core-avx2 atom \\\n slm nehalem westmere sandybridge ivybridge haswell broadwell bonnell \\\n silvermont knl knm skylake-avx512 cannonlake icelake-client icelake-server \\\n-skylake goldmont goldmont-plus tremont x86-64 native\"\n+skylake goldmont goldmont-plus tremont cascadelake x86-64 native\"\n \n # Additional x86 processors supported by --with-cpu=.  Each processor\n # MUST be separated by exactly one space."}, {"sha": "5c327dc93e9b4558dcb784884d759d77588ae4c8", "filename": "gcc/config/i386/i386-c.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig%2Fi386%2Fi386-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig%2Fi386%2Fi386-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-c.c?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -218,6 +218,10 @@ ix86_target_macros_internal (HOST_WIDE_INT isa_flag,\n       def_or_undef (parse_in, \"__icelake_server\");\n       def_or_undef (parse_in, \"__icelake_server__\");\n       break;\n+    case PROCESSOR_CASCADELAKE:\n+      def_or_undef (parse_in, \"__cascadelake\");\n+      def_or_undef (parse_in, \"__cascadelake__\");\n+      break;\n     /* use PROCESSOR_max to not set/unset the arch macro.  */\n     case PROCESSOR_max:\n       break;\n@@ -363,6 +367,9 @@ ix86_target_macros_internal (HOST_WIDE_INT isa_flag,\n     case PROCESSOR_LAKEMONT:\n       def_or_undef (parse_in, \"__tune_lakemont__\");\n       break;\n+    case PROCESSOR_CASCADELAKE:\n+      def_or_undef (parse_in, \"__tune_cascadelake__\");\n+      break;\n     case PROCESSOR_INTEL:\n     case PROCESSOR_GENERIC:\n       break;"}, {"sha": "caa701fe24245aef8cbb1546d434edf029ec93f9", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -148,8 +148,9 @@ const struct processor_costs *ix86_cost = NULL;\n #define m_CANNONLAKE (HOST_WIDE_INT_1U<<PROCESSOR_CANNONLAKE)\n #define m_ICELAKE_CLIENT (HOST_WIDE_INT_1U<<PROCESSOR_ICELAKE_CLIENT)\n #define m_ICELAKE_SERVER (HOST_WIDE_INT_1U<<PROCESSOR_ICELAKE_SERVER)\n+#define m_CASCADELAKE (HOST_WIDE_INT_1U<<PROCESSOR_CASCADELAKE)\n #define m_CORE_AVX512 (m_SKYLAKE_AVX512 | m_CANNONLAKE \\\n-\t\t       | m_ICELAKE_CLIENT | m_ICELAKE_SERVER)\n+\t\t       | m_ICELAKE_CLIENT | m_ICELAKE_SERVER | m_CASCADELAKE)\n #define m_CORE_AVX2 (m_HASWELL | m_SKYLAKE | m_CORE_AVX512)\n #define m_CORE_ALL (m_CORE2 | m_NEHALEM  | m_SANDYBRIDGE | m_CORE_AVX2)\n #define m_GOLDMONT (HOST_WIDE_INT_1U<<PROCESSOR_GOLDMONT)\n@@ -898,6 +899,7 @@ static const struct processor_costs *processor_cost_table[] =\n   &skylake_cost,\n   &skylake_cost,\n   &skylake_cost,\n+  &skylake_cost,\n   &intel_cost,\n   &geode_cost,\n   &k6_cost,\n@@ -31644,6 +31646,10 @@ get_builtin_code_for_version (tree decl, tree *predicate_list)\n \t      arg_str = \"icelake-server\";\n \t      priority = P_PROC_AVX512F;\n \t      break;\n+\t    case PROCESSOR_CASCADELAKE:\n+\t      arg_str = \"cascadelake\";\n+\t      priority = P_PROC_AVX512F;\n+\t      break;\n \t    case PROCESSOR_BONNELL:\n \t      arg_str = \"bonnell\";\n \t      priority = P_PROC_SSSE3;"}, {"sha": "64fc5d4058a1ac6433a1d13fb9b7f705b6edbf6d", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -407,6 +407,7 @@ extern const struct processor_costs ix86_size_cost;\n #define TARGET_CANNONLAKE (ix86_tune == PROCESSOR_CANNONLAKE)\n #define TARGET_ICELAKE_CLIENT (ix86_tune == PROCESSOR_ICELAKE_CLIENT)\n #define TARGET_ICELAKE_SERVER (ix86_tune == PROCESSOR_ICELAKE_SERVER)\n+#define TARGET_CASCADELAKE (ix86_tune == PROCESSOR_CASCADELAKE)\n #define TARGET_INTEL (ix86_tune == PROCESSOR_INTEL)\n #define TARGET_GENERIC (ix86_tune == PROCESSOR_GENERIC)\n #define TARGET_AMDFAM10 (ix86_tune == PROCESSOR_AMDFAM10)\n@@ -2261,6 +2262,7 @@ enum processor_type\n   PROCESSOR_CANNONLAKE,\n   PROCESSOR_ICELAKE_CLIENT,\n   PROCESSOR_ICELAKE_SERVER,\n+  PROCESSOR_CASCADELAKE,\n   PROCESSOR_INTEL,\n   PROCESSOR_GEODE,\n   PROCESSOR_K6,\n@@ -2377,6 +2379,7 @@ const wide_int_bitmask PTA_SKYLAKE = PTA_BROADWELL | PTA_CLFLUSHOPT\n const wide_int_bitmask PTA_SKYLAKE_AVX512 = PTA_SKYLAKE | PTA_AVX512F\n   | PTA_AVX512CD | PTA_AVX512VL | PTA_AVX512BW | PTA_AVX512DQ | PTA_PKU\n   | PTA_CLWB;\n+const wide_int_bitmask PTA_CASCADELAKE = PTA_SKYLAKE_AVX512 | PTA_AVX512VNNI;\n const wide_int_bitmask PTA_CANNONLAKE = PTA_SKYLAKE | PTA_AVX512F\n   | PTA_AVX512CD | PTA_AVX512VL | PTA_AVX512BW | PTA_AVX512DQ | PTA_PKU\n   | PTA_AVX512VBMI | PTA_AVX512IFMA | PTA_SHA;"}, {"sha": "1bdeac3c45a2d02657b86582b08bfa046abd0a43", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -27000,6 +27000,12 @@ AVX512IFMA, SHA, CLWB, UMIP, RDPID, GFNI, AVX512VBMI2, AVX512VPOPCNTDQ,\n AVX512BITALG, AVX512VNNI, VPCLMULQDQ, VAES, PCONFIG and WBNOINVD instruction\n set support.\n \n+@item cascadelake\n+Intel Cascadelake CPU with 64-bit extensions, MOVBE, MMX, SSE, SSE2, SSE3, SSSE3,\n+SSE4.1, SSE4.2, POPCNT, PKU, AVX, AVX2, AES, PCLMUL, FSGSBASE, RDRND, FMA, BMI,\n+BMI2, F16C, RDSEED, ADCX, PREFETCHW, CLFLUSHOPT, XSAVEC, XSAVES, AVX512F, CLWB,\n+AVX512VL, AVX512BW, AVX512DQ, AVX512CD and AVX512VNNI instruction set support.\n+\n @item k6\n AMD K6 CPU with MMX instruction set support.\n "}, {"sha": "33d4ff349ebe79b927d00ce3fb435d9fb594885a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -1,3 +1,7 @@\n+2018-12-13  Wei Xiao  <wei3.xiao@intel.com>\n+\n+\t* gcc.target/i386/funcspec-56.inc: Handle new march.\n+\n 2018-12-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/88465\n@@ -2582,7 +2586,7 @@\n \t* gcc.target/i386/pr18041-1.c: New testcase.\n \t* gcc.target/i386/pr18041-2.c: Likewise.\n \n-2018-11-06 Wei Xiao <wei3.xiao@intel.com>\n+2018-11-06  Wei Xiao  <wei3.xiao@intel.com>\n \n \t* gcc.target/i386/avx-1.c: Update tests for VFIXUPIMM* intrinsics.\n \t* gcc.target/i386/avx512f-vfixupimmpd-1.c: Ditto."}, {"sha": "0eb83a7fd305809df47aca47fac9713c655a220d", "filename": "gcc/testsuite/gcc.target/i386/funcspec-56.inc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuncspec-56.inc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cab07f0891dec03f64ae4be225f7dd5ea4c70ee/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuncspec-56.inc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Ffuncspec-56.inc?ref=7cab07f0891dec03f64ae4be225f7dd5ea4c70ee", "patch": "@@ -150,6 +150,7 @@ extern void test_arch_skylake_avx512 (void)\t__attribute__((__target__(\"arch=skyl\n extern void test_arch_cannonlake (void)\t\t__attribute__((__target__(\"arch=cannonlake\")));\n extern void test_arch_icelake_client (void)\t__attribute__((__target__(\"arch=icelake-client\")));\n extern void test_arch_icelake_server (void)\t__attribute__((__target__(\"arch=icelake-server\")));\n+extern void test_arch_cascadelake (void)\t__attribute__((__target__(\"arch=cascadelake\")));\n extern void test_arch_k8 (void)\t\t\t__attribute__((__target__(\"arch=k8\")));\n extern void test_arch_k8_sse3 (void)\t\t__attribute__((__target__(\"arch=k8-sse3\")));\n extern void test_arch_opteron (void)\t\t__attribute__((__target__(\"arch=opteron\")));"}]}