{"sha": "cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2MyODA0ZjE0ZmI1NDQzYTBmZmE2NjhmZjhmZTg5YzdhN2JiNzc0Ng==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2006-01-09T20:42:26Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2006-01-09T20:42:26Z"}, "message": "trans-stmt.c (gfc_trans_pointer_assign_need_temp): Use fold_convert to avoid type mismatch.\n\n2006-01-09  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        fortran/24936\n        * trans-stmt.c (gfc_trans_pointer_assign_need_temp): Use fold_convert\n        to avoid type mismatch.\n\n\n2006-01-09  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        fortran/24936\n        * gfortran.dg/forall_3.f90: New test.\n\nFrom-SVN: r109508", "tree": {"sha": "a5d3f403cbfa0722378e9d7854026ac228c089ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5d3f403cbfa0722378e9d7854026ac228c089ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/comments", "author": null, "committer": null, "parents": [{"sha": "76150104aa8575fb795aed3648046e22618bc2a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76150104aa8575fb795aed3648046e22618bc2a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76150104aa8575fb795aed3648046e22618bc2a3"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "44f6a481aeb54d051622c9733e8c18960d0293e2", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "patch": "@@ -1,3 +1,9 @@\n+2006-01-09  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tfortran/24936\n+\t* trans-stmt.c (gfc_trans_pointer_assign_need_temp): Use fold_convert\n+\tto avoid type mismatch.\n+\n 2006-01-09  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR fortran/21977"}, {"sha": "df93db618b283ecb835dca72b50660e296179eb3", "filename": "gcc/fortran/trans-stmt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ffortran%2Ftrans-stmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ffortran%2Ftrans-stmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-stmt.c?ref=cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "patch": "@@ -2122,7 +2122,8 @@ gfc_trans_pointer_assign_need_temp (gfc_expr * expr1, gfc_expr * expr2,\n       rse.want_pointer = 1;\n       gfc_conv_expr (&rse, expr2);\n       gfc_add_block_to_block (&body, &rse.pre);\n-      gfc_add_modify_expr (&body, lse.expr, rse.expr);\n+      gfc_add_modify_expr (&body, lse.expr,\n+\t\t\t   fold_convert (TREE_TYPE (lse.expr), rse.expr));\n       gfc_add_block_to_block (&body, &rse.post);\n \n       /* Increment count.  */"}, {"sha": "d2a59cbc9f86b0913021977455f8958daf4c6362", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "patch": "@@ -1,3 +1,8 @@\n+2006-01-09  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tfortran/24936\n+\t* gfortran.dg/forall_3.f90: New test.\n+\n 2006-01-09  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR fortran/21977"}, {"sha": "bc5e58c8077b71d05d157384db1e0d0533bc2622", "filename": "gcc/testsuite/gfortran.dg/forall_3.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ftestsuite%2Fgfortran.dg%2Fforall_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746/gcc%2Ftestsuite%2Fgfortran.dg%2Fforall_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fforall_3.f90?ref=cc2804f14fb5443a0ffa668ff8fe89c7a7bb7746", "patch": "@@ -0,0 +1,18 @@\n+! the problem here was that we had forgot to call\n+! fold_convert in gfc_trans_pointer_assign_need_temp\n+! so that we got a pointer to char instead of a \n+! pointer to an array\n+! we really don't need a temp here.\n+! { dg-do compile }\n+\n+      program test_forall\n+         type element\n+            character(32), pointer :: name\n+         end type element\n+         type(element)     :: charts(50)\n+         character(32), target :: names(50)\n+         forall(i=1:50)\n+            charts(i)%name => names(i)\n+         end forall\n+      end\n+"}]}