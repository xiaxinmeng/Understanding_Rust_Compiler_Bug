{"sha": "5378943d846887a777a0d8126c697998ffdb394c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTM3ODk0M2Q4NDY4ODdhNzc3YTBkODEyNmM2OTc5OThmZmRiMzk0Yw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-19T23:30:17Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-19T23:30:17Z"}, "message": "Added reference to INIT_SECTION_PREAMBLE for systems that do something\nwhich must be undone prior to __do_global_ctors.\n\nFrom-SVN: r9749", "tree": {"sha": "348e9ff39288c62ed44c980d06c57bce617ac742", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/348e9ff39288c62ed44c980d06c57bce617ac742"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5378943d846887a777a0d8126c697998ffdb394c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5378943d846887a777a0d8126c697998ffdb394c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5378943d846887a777a0d8126c697998ffdb394c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5378943d846887a777a0d8126c697998ffdb394c/comments", "author": null, "committer": null, "parents": [{"sha": "f218a117a0316c5d9eb4a4704fa52cfc80b3fc30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f218a117a0316c5d9eb4a4704fa52cfc80b3fc30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f218a117a0316c5d9eb4a4704fa52cfc80b3fc30"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "5a7c8d44ae880f3e4c823656b615aaae2cfcd118", "filename": "gcc/crtstuff.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5378943d846887a777a0d8126c697998ffdb394c/gcc%2Fcrtstuff.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5378943d846887a777a0d8126c697998ffdb394c/gcc%2Fcrtstuff.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcrtstuff.c?ref=5378943d846887a777a0d8126c697998ffdb394c", "patch": "@@ -3,7 +3,7 @@\n \n    Written by Ron Guilmette (rfg@netcom.com) with help from Richard Stallman.\n \n-Copyright (C) 1991, 1994 Free Software Foundation, Inc.\n+Copyright (C) 1991, 1994, 1995 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -158,6 +158,16 @@ void __do_global_ctors ()\n \n asm (INIT_SECTION_ASM_OP);\t/* cc1 doesn't know that we are switching! */\n \n+/* On some svr4 systems, the initial .init section preamble code provided in\n+   crti.o may do something, such as bump the stack, which we have to \n+   undo before we reach the function prologue code for __do_global_ctors \n+   (directly below).  For such systems, define the macro INIT_SECTION_PREAMBLE\n+   to expand into the code needed to undo the actions of the crti.o file. */\n+\n+#ifdef INIT_SECTION_PREAMBLE\n+  INIT_SECTION_PREAMBLE;\n+#endif\n+\n /* A routine to invoke all of the global constructors upon entry to the\n    program.  We put this into the .init section (for systems that have\n    such a thing) so that we can properly perform the construction of"}]}