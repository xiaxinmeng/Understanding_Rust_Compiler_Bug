{"sha": "2fc55f51f9953b451d6d6ddfae23379001e6ac95", "node_id": "C_kwDOANBUbNoAKDJmYzU1ZjUxZjk5NTNiNDUxZDZkNmRkZmFlMjMzNzkwMDFlNmFjOTU", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2023-03-09T22:35:24Z"}, "committer": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2023-03-10T03:14:10Z"}, "message": "c++: signed __int128_t [PR108099]\n\nThe code for handling signed + typedef was breaking on __int128_t, because\nit isn't a proper typedef: it doesn't have DECL_ORIGINAL_TYPE.\n\n\tPR c++/108099\n\ngcc/cp/ChangeLog:\n\n\t* decl.cc (grokdeclarator): Handle non-typedef typedef_decl.\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/ext/int128-7.C: New test.", "tree": {"sha": "5cda7ac3e5b54959462b3a298a035d161959a3af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5cda7ac3e5b54959462b3a298a035d161959a3af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2fc55f51f9953b451d6d6ddfae23379001e6ac95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fc55f51f9953b451d6d6ddfae23379001e6ac95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fc55f51f9953b451d6d6ddfae23379001e6ac95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fc55f51f9953b451d6d6ddfae23379001e6ac95/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "68c5d92a1390ecccb61d3600a95eeff6caf7ccdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68c5d92a1390ecccb61d3600a95eeff6caf7ccdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68c5d92a1390ecccb61d3600a95eeff6caf7ccdf"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "b1603859644fe40a989bbfebacb9aa29584847ff", "filename": "gcc/cp/decl.cc", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fc55f51f9953b451d6d6ddfae23379001e6ac95/gcc%2Fcp%2Fdecl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fc55f51f9953b451d6d6ddfae23379001e6ac95/gcc%2Fcp%2Fdecl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.cc?ref=2fc55f51f9953b451d6d6ddfae23379001e6ac95", "patch": "@@ -12440,10 +12440,15 @@ grokdeclarator (const cp_declarator *declarator,\n \t{\n \t  if (typedef_decl)\n \t    {\n-\t      pedwarn (loc, OPT_Wpedantic, \"%qs specified with %qT\",\n-\t\t       key, type);\n+\t      pedwarn (loc, OPT_Wpedantic, \"%qs specified with %qD\",\n+\t\t       key, typedef_decl);\n \t      ok = !flag_pedantic_errors;\n-\t      type = DECL_ORIGINAL_TYPE (typedef_decl);\n+\t      if (is_typedef_decl (typedef_decl))\n+\t\ttype = DECL_ORIGINAL_TYPE (typedef_decl);\n+\t      else\n+\t\t/* PR108099: __int128_t comes from c_common_nodes_and_builtins,\n+\t\t   and is not built as a typedef.  */\n+\t\ttype = TREE_TYPE (typedef_decl);\n \t      typedef_decl = NULL_TREE;\n \t    }\n \t  else if (declspecs->decltype_p)"}, {"sha": "bf5e8c40a4b25feacfe7fe12249b07574b64da32", "filename": "gcc/testsuite/g++.dg/ext/int128-7.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fc55f51f9953b451d6d6ddfae23379001e6ac95/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fint128-7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fc55f51f9953b451d6d6ddfae23379001e6ac95/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fint128-7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fint128-7.C?ref=2fc55f51f9953b451d6d6ddfae23379001e6ac95", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/108099\n+// { dg-do compile { target { c++11 && int128 } } }\n+\n+using i128 = signed __int128_t;\t// { dg-error \"specified with\" }"}]}