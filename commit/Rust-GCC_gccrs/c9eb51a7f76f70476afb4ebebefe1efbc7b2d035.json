{"sha": "c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzllYjUxYTdmNzZmNzA0NzZhZmI0ZWJlYmVmZTFlZmJjN2IyZDAzNQ==", "commit": {"author": {"name": "Chung-Ju Wu", "email": "jasonwucj@gmail.com", "date": "2015-01-13T05:22:25Z"}, "committer": {"name": "Chung-Ju Wu", "email": "jasonwucj@gcc.gnu.org", "date": "2015-01-13T05:22:25Z"}, "message": "[NDS32] Remove -mgp-direct/-mno-gp-direct options.\n\ngcc/\n\t* common/config/nds32/nds32-common.c (TARGET_DEFAULT_TARGET_FLAGS):\n\tRemove MASK_GP_DIRECT flag.\n\t* config/nds32/nds32.h (MULTILIB_DEFAULTS): Have -mcmodel=medium as\n\tone of the multilib default options.\n\t* config/nds32/nds32.opt (mgp-direct): Remove.\n\t* config/nds32/t-mlibs (MULTILIB_OPTIONS): Use -mcmodel instead of\n\t-mgp-direct.  We also remove unnecessary -mlittle-endian/-mbig-endian.\n\nFrom-SVN: r219510", "tree": {"sha": "78110f41849c2119b10ae05feb3287548c3ee148", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78110f41849c2119b10ae05feb3287548c3ee148"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/comments", "author": {"login": "jasonwucj", "id": 5520732, "node_id": "MDQ6VXNlcjU1MjA3MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/5520732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonwucj", "html_url": "https://github.com/jasonwucj", "followers_url": "https://api.github.com/users/jasonwucj/followers", "following_url": "https://api.github.com/users/jasonwucj/following{/other_user}", "gists_url": "https://api.github.com/users/jasonwucj/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonwucj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonwucj/subscriptions", "organizations_url": "https://api.github.com/users/jasonwucj/orgs", "repos_url": "https://api.github.com/users/jasonwucj/repos", "events_url": "https://api.github.com/users/jasonwucj/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonwucj/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fe4c07dc48d92369c030a216831fe6aff8b860bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe4c07dc48d92369c030a216831fe6aff8b860bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe4c07dc48d92369c030a216831fe6aff8b860bd"}], "stats": {"total": 49, "additions": 23, "deletions": 26}, "files": [{"sha": "cff776fb2cc6497c5ab3adf3f504865fe591a39a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "patch": "@@ -1,3 +1,13 @@\n+2015-01-13  Chung-Ju Wu  <jasonwucj@gmail.com>\n+\n+\t* common/config/nds32/nds32-common.c (TARGET_DEFAULT_TARGET_FLAGS):\n+\tRemove MASK_GP_DIRECT flag.\n+\t* config/nds32/nds32.h (MULTILIB_DEFAULTS): Have -mcmodel=medium as\n+\tone of the multilib default options.\n+\t* config/nds32/nds32.opt (mgp-direct): Remove.\n+\t* config/nds32/t-mlibs (MULTILIB_OPTIONS): Use -mcmodel instead of\n+\t-mgp-direct.  We also remove unnecessary -mlittle-endian/-mbig-endian.\n+\n 2015-01-13  Chung-Ju Wu  <jasonwucj@gmail.com>\n \n \t* config/nds32/nds32.opt (mcmodel): Add new option."}, {"sha": "a633ed7972d533ffe159a7d3a2f5101cc018f47d", "filename": "gcc/common/config/nds32/nds32-common.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fcommon%2Fconfig%2Fnds32%2Fnds32-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fcommon%2Fconfig%2Fnds32%2Fnds32-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Fnds32%2Fnds32-common.c?ref=c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "patch": "@@ -95,14 +95,12 @@ static const struct default_options nds32_option_optimization_table[] =\n \n    Other MASK_XXX flags are set individually.\n    By default we enable\n-     TARGET_GP_DIRECT: Generate gp-imply instruction.\n      TARGET_16_BIT   : Generate 16/32 bit mixed length instruction.\n      TARGET_PERF_EXT : Generate performance extention instrcution.\n      TARGET_CMOV     : Generate conditional move instruction.  */\n #undef TARGET_DEFAULT_TARGET_FLAGS\n #define TARGET_DEFAULT_TARGET_FLAGS\t\t\\\n   (TARGET_CPU_DEFAULT\t\t\t\t\\\n-   | MASK_GP_DIRECT\t\t\t\t\\\n    | MASK_16_BIT\t\t\t\t\\\n    | MASK_PERF_EXT\t\t\t\t\\\n    | MASK_CMOV)"}, {"sha": "d9a55adff480f420dbd22ba6229c3a1eec664b85", "filename": "gcc/config/nds32/nds32.h", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fconfig%2Fnds32%2Fnds32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fconfig%2Fnds32%2Fnds32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Fnds32.h?ref=c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "patch": "@@ -391,17 +391,22 @@ enum nds32_builtins\n #define ENDFILE_SPEC \\\n   \" %{!mno-ctor-dtor:crtend1.o%s}\"\n \n-/* The TARGET_BIG_ENDIAN_DEFAULT is defined if we configure gcc\n-   with --target=nds32be-* setting.\n-   Check gcc/config.gcc for more information.\n-   In addition, currently we only have elf toolchain,\n-   where mgp-direct is always the default.  */\n+/* The TARGET_BIG_ENDIAN_DEFAULT is defined if we\n+   configure gcc with --target=nds32be-* setting.\n+   Check gcc/config.gcc for more information.  */\n #ifdef TARGET_BIG_ENDIAN_DEFAULT\n-#define MULTILIB_DEFAULTS { \"mbig-endian\", \"mgp-direct\" }\n+#  define NDS32_ENDIAN_DEFAULT \"mbig-endian\"\n #else\n-#define MULTILIB_DEFAULTS { \"mlittle-endian\", \"mgp-direct\" }\n+#  define NDS32_ENDIAN_DEFAULT \"mlittle-endian\"\n #endif\n \n+/* Currently we only have elf toolchain,\n+   where -mcmodel=medium is always the default.  */\n+#define NDS32_CMODEL_DEFAULT \"mcmodel=medium\"\n+\n+#define MULTILIB_DEFAULTS \\\n+  { NDS32_ENDIAN_DEFAULT, NDS32_CMODEL_DEFAULT }\n+\n \f\n /* Run-time Target Specification.  */\n "}, {"sha": "fa8a6cea6fa2ff8dbeead3bb2bb42b0930609eea", "filename": "gcc/config/nds32/nds32.opt", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fconfig%2Fnds32%2Fnds32.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fconfig%2Fnds32%2Fnds32.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Fnds32.opt?ref=c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "patch": "@@ -53,10 +53,6 @@ m16-bit\n Target Report Mask(16_BIT)\n Generate 16-bit instructions.\n \n-mgp-direct\n-Target Report Mask(GP_DIRECT)\n-Generate GP base instructions directly.\n-\n misr-vector-size=\n Target RejectNegative Joined UInteger Var(nds32_isr_vector_size) Init(NDS32_DEFAULT_ISR_VECTOR_SIZE)\n Specify the size of each interrupt vector, which must be 4 or 16."}, {"sha": "d9e5ba4b952a1fbb265dda867d68e00549de7d17", "filename": "gcc/config/nds32/t-mlibs", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fconfig%2Fnds32%2Ft-mlibs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9eb51a7f76f70476afb4ebebefe1efbc7b2d035/gcc%2Fconfig%2Fnds32%2Ft-mlibs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnds32%2Ft-mlibs?ref=c9eb51a7f76f70476afb4ebebefe1efbc7b2d035", "patch": "@@ -18,21 +18,9 @@\n # along with GCC; see the file COPYING3.  If not see\n # <http://www.gnu.org/licenses/>.\n \n-# We need to build following multilibs combinations:\n-#\n-#   1. <None multilibs>\n-#   2. -mlittle-endian\n-#   3. -mbig-endian\n-#   4. -mgp-direct\n-#   5. -mno-gp-direct\n-#   6. -mlittle-endian -mgp-direct\n-#   7. -mlittle-endian -mno-gp-direct\n-#   8. -mbig-endian -mgp-direct\n-#   9. -mbig-endian -mno-gp-direct\n-#\n # We also define a macro MULTILIB_DEFAULTS in nds32.h that tells the\n # driver program which options are defaults for this target and thus\n # do not need to be handled specially.\n-MULTILIB_OPTIONS = mlittle-endian/mbig-endian mgp-direct/mno-gp-direct\n+MULTILIB_OPTIONS = mcmodel=small/mcmodel=medium/mcmodel=large\n \n # ------------------------------------------------------------------------"}]}