{"sha": "49b6c81e4802fddab0a7072d4c02e5cb79edb5a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDliNmM4MWU0ODAyZmRkYWIwYTcwNzJkNGMwMmU1Y2I3OWVkYjVhNQ==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1995-02-13T22:26:49Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1995-02-13T22:26:49Z"}, "message": "(find_basic_blocks): Revise calculation of when to make another pass.\n\nFrom-SVN: r8945", "tree": {"sha": "7bcc92a6dca77b2a601f3e6c2a5c542dc29f4625", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7bcc92a6dca77b2a601f3e6c2a5c542dc29f4625"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49b6c81e4802fddab0a7072d4c02e5cb79edb5a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49b6c81e4802fddab0a7072d4c02e5cb79edb5a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49b6c81e4802fddab0a7072d4c02e5cb79edb5a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49b6c81e4802fddab0a7072d4c02e5cb79edb5a5/comments", "author": null, "committer": null, "parents": [{"sha": "7d9614e0d684d7db15ccbd9948a85d0a141d2ea8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d9614e0d684d7db15ccbd9948a85d0a141d2ea8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d9614e0d684d7db15ccbd9948a85d0a141d2ea8"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "59167855fef7849970e989ac882ad10897ff39e4", "filename": "gcc/flow.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49b6c81e4802fddab0a7072d4c02e5cb79edb5a5/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49b6c81e4802fddab0a7072d4c02e5cb79edb5a5/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=49b6c81e4802fddab0a7072d4c02e5cb79edb5a5", "patch": "@@ -647,6 +647,9 @@ find_basic_blocks (f, nonlocal_label_list)\n \t       looks for loop begin/end notes.  */\n \t    if (basic_block_head[i] != basic_block_end[i])\n \t      {\n+\t\t/* It would be quicker to delete all of these with a single\n+\t\t   unchaining, rather than one at a time, but we need to keep\n+\t\t   the NOTE's.  */\n \t\tinsn = NEXT_INSN (basic_block_head[i]);\n \t\twhile (insn != basic_block_end[i])\n \t\t  {\n@@ -730,11 +733,13 @@ find_basic_blocks (f, nonlocal_label_list)\n \t another pass for the pathalogical case, we can greatly speed up\n \t their compilation without hurting normal code.  This works because\n \t all the insns in the unreachable blocks have either been deleted or\n-\t turned into notes.  */\n+\t turned into notes.\n+\t Note that we're talking about reducing memory usage by 10's of\n+\t megabytes and reducing compilation time by several minutes.  */\n       /* ??? The choice of when to make another pass is a bit arbitrary,\n \t and was derived from empirical data.  */\n       if (pass == 1\n-\t  && (deleted > n_basic_blocks / 2 || deleted > 1000))\n+\t  && deleted > 200)\n \t{\n \t  pass++;\n \t  n_basic_blocks -= deleted;"}]}