{"sha": "161031e3ae276973782ca4d86782c54267621c0f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTYxMDMxZTNhZTI3Njk3Mzc4MmNhNGQ4Njc4MmM1NDI2NzYyMWMwZg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2008-03-28T13:32:47Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2008-03-28T13:32:47Z"}, "message": "Makefile.in (POSTCOMPILE): New variable.\n\n\t* Makefile.in (POSTCOMPILE): New variable.\n\t(.c.o): Use it.\n\nFrom-SVN: r133682", "tree": {"sha": "f7af31c4990ce6a161dc543d9d215869789403d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f7af31c4990ce6a161dc543d9d215869789403d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/161031e3ae276973782ca4d86782c54267621c0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/161031e3ae276973782ca4d86782c54267621c0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/161031e3ae276973782ca4d86782c54267621c0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/161031e3ae276973782ca4d86782c54267621c0f/comments", "author": null, "committer": null, "parents": [{"sha": "2d3cd5d5abceef93e032b7d9cd782b740194ae0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d3cd5d5abceef93e032b7d9cd782b740194ae0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d3cd5d5abceef93e032b7d9cd782b740194ae0e"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "0b3ce8b3a0c0a09f5480e009835764f583f61b50", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/161031e3ae276973782ca4d86782c54267621c0f/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/161031e3ae276973782ca4d86782c54267621c0f/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=161031e3ae276973782ca4d86782c54267621c0f", "patch": "@@ -1,3 +1,8 @@\n+2008-03-28  Tom Tromey  <tromey@redhat.com>\n+\n+\t* Makefile.in (POSTCOMPILE): New variable.\n+\t(.c.o): Use it.\n+\n 2008-03-13  Tom Tromey  <tromey@redhat.com>\n \n \tPR libcpp/35322:"}, {"sha": "4112c6633de0381778907b56191f7f7f8fa9338b", "filename": "libcpp/Makefile.in", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/161031e3ae276973782ca4d86782c54267621c0f/libcpp%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/161031e3ae276973782ca4d86782c54267621c0f/libcpp%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FMakefile.in?ref=161031e3ae276973782ca4d86782c54267621c0f", "patch": "@@ -1,7 +1,7 @@\n # @configure_input@\n # Makefile for libcpp.  Run 'configure' to generate Makefile from Makefile.in\n \n-# Copyright (C) 2004 Free Software Foundation, Inc.\n+# Copyright (C) 2004, 2008 Free Software Foundation, Inc.\n \n #This file is part of libcpp.\n \n@@ -197,16 +197,24 @@ update-po: $(CATALOGS:.gmo=.pox)\n # Dependency rule.\n COMPILE.base = $(CC) $(DEFS) $(INCLUDES) $(CPPFLAGS) $(ALL_CFLAGS) -c\n ifeq ($(DEPMODE),depmode=gcc3)\n-COMPILE = $(COMPILE.base) -o $@ -MT $@ -MMD -MP -MF $(DEPDIR)/$*.Po\n+# Note that we put the dependencies into a .Tpo file, then move them\n+# into place if the compile succeeds.  We need this because gcc does\n+# not atomically write the dependency output file.\n+COMPILE = $(COMPILE.base) -o $@ -MT $@ -MMD -MP -MF $(DEPDIR)/$*.Tpo\n+POSTCOMPILE = @mv $(DEPDIR)/$*.Tpo $(DEPDIR)/$*.Po\n else\n COMPILE = source='$<' object='$@' libtool=no DEPDIR=$(DEPDIR) $(DEPMODE) \\\n \t  $(depcomp) $(COMPILE.base)\n+# depcomp handles atomicity for us, so we don't need a postcompile\n+# step.\n+POSTCOMPILE =\n endif\n \n # Implicit rules and I18N\n \n .c.o:\n \t$(COMPILE) $<\n+\t$(POSTCOMPILE)\n \n # N.B. We do not attempt to copy these into $(srcdir).\n .po.gmo:"}]}