{"sha": "5714dbda995de0b19ed5e6133457bfd90e19972d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcxNGRiZGE5OTVkZTBiMTllZDVlNjEzMzQ1N2JmZDkwZTE5OTcyZA==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-08-11T23:36:46Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-08-11T23:36:46Z"}, "message": "Add selftests to selftest.c\n\ngcc/ChangeLog:\n\t* selftest-run-tests.c (selftest::run_tests): Call selftest_c_tests.\n\t* selftest.c (selftest::test_assertions): New function.\n\t(selftest::selftest_c_tests): New function.\n\t* selftest.h (selftest::selftest_c_tests): New declaration.\n\nFrom-SVN: r239397", "tree": {"sha": "3ab5b713883d904efc7ed7f4da57b5419848174d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ab5b713883d904efc7ed7f4da57b5419848174d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5714dbda995de0b19ed5e6133457bfd90e19972d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5714dbda995de0b19ed5e6133457bfd90e19972d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5714dbda995de0b19ed5e6133457bfd90e19972d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5714dbda995de0b19ed5e6133457bfd90e19972d/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2c90c549f986ceecc49314b5b4af03a4efbbda5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c90c549f986ceecc49314b5b4af03a4efbbda5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c90c549f986ceecc49314b5b4af03a4efbbda5c"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "b861721297299f6f002a6b5ab9f70b1228eec6fd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5714dbda995de0b19ed5e6133457bfd90e19972d", "patch": "@@ -1,3 +1,10 @@\n+2016-08-11  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* selftest-run-tests.c (selftest::run_tests): Call selftest_c_tests.\n+\t* selftest.c (selftest::test_assertions): New function.\n+\t(selftest::selftest_c_tests): New function.\n+\t* selftest.h (selftest::selftest_c_tests): New declaration.\n+\n 2016-08-11  Richard Biener  <rguenther@suse.de>\n \t    Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n "}, {"sha": "6453e31498299da90e5353a87344a63660148dda", "filename": "gcc/selftest-run-tests.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2Fselftest-run-tests.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2Fselftest-run-tests.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fselftest-run-tests.c?ref=5714dbda995de0b19ed5e6133457bfd90e19972d", "patch": "@@ -42,6 +42,9 @@ selftest::run_tests ()\n   /* Run all the tests, in hand-coded order of (approximate) dependencies:\n      run the tests for lowest-level code first.  */\n \n+  /* Sanity-check for selftests themselves.  */\n+  selftest_c_tests ();\n+\n   /* Low-level data structures.  */\n   bitmap_c_tests ();\n   et_forest_c_tests ();"}, {"sha": "2951c3c9bb8ddd102c33c19d1f1c430e0e87d40c", "filename": "gcc/selftest.c", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2Fselftest.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2Fselftest.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fselftest.c?ref=5714dbda995de0b19ed5e6133457bfd90e19972d", "patch": "@@ -88,4 +88,32 @@ selftest::assert_streq (const location &loc,\n }\n \n \n+/* Selftests for the selftest system itself.  */\n+\n+namespace selftest {\n+\n+/* Sanity-check the ASSERT_ macros with various passing cases.  */\n+\n+static void\n+test_assertions ()\n+{\n+  ASSERT_TRUE (true);\n+  ASSERT_FALSE (false);\n+  ASSERT_EQ (1, 1);\n+  ASSERT_EQ_AT (SELFTEST_LOCATION, 1, 1);\n+  ASSERT_NE (1, 2);\n+  ASSERT_STREQ (\"test\", \"test\");\n+  ASSERT_STREQ_AT (SELFTEST_LOCATION, \"test\", \"test\");\n+}\n+\n+/* Run all of the selftests within this file.  */\n+\n+void\n+selftest_c_tests ()\n+{\n+  test_assertions ();\n+}\n+\n+} // namespace selftest\n+\n #endif /* #if CHECKING_P */"}, {"sha": "55601efc9f1ae78526c6a4f90123c1d5210cf781", "filename": "gcc/selftest.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2Fselftest.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5714dbda995de0b19ed5e6133457bfd90e19972d/gcc%2Fselftest.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fselftest.h?ref=5714dbda995de0b19ed5e6133457bfd90e19972d", "patch": "@@ -85,6 +85,7 @@ extern void hash_set_tests_c_tests ();\n extern void input_c_tests ();\n extern void pretty_print_c_tests ();\n extern void rtl_tests_c_tests ();\n+extern void selftest_c_tests ();\n extern void spellcheck_c_tests ();\n extern void spellcheck_tree_c_tests ();\n extern void sreal_c_tests ();"}]}