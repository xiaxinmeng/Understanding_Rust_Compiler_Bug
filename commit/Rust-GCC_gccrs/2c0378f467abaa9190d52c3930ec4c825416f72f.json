{"sha": "2c0378f467abaa9190d52c3930ec4c825416f72f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmMwMzc4ZjQ2N2FiYWE5MTkwZDUyYzM5MzBlYzRjODI1NDE2ZjcyZg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2017-08-21T15:14:27Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2017-08-21T15:14:27Z"}, "message": "PR libstdc++/81912 make std::__iterator_category constexpr\n\n\tPR libstdc++/81912\n\t* include/bits/stl_iterator_base_types.h (__iterator_category): Add\n\tconstexpr for C++11 and later.\n\t* testsuite/24_iterators/container_access.cc: Add target selector.\n\t* testsuite/24_iterators/range_access.cc: Fix clause number in\n\tcomment.\n\t* testsuite/24_iterators/range_access_cpp14.cc: Likewise.\n\t* testsuite/24_iterators/range_access_cpp17.cc: New.\n\nFrom-SVN: r251234", "tree": {"sha": "122232e29c3a90ca99d53e083f662d9f3949f55a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/122232e29c3a90ca99d53e083f662d9f3949f55a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c0378f467abaa9190d52c3930ec4c825416f72f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c0378f467abaa9190d52c3930ec4c825416f72f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c0378f467abaa9190d52c3930ec4c825416f72f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c0378f467abaa9190d52c3930ec4c825416f72f/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b66fd4fc3777e1d072a63529b70b2ff777e6efcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b66fd4fc3777e1d072a63529b70b2ff777e6efcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b66fd4fc3777e1d072a63529b70b2ff777e6efcb"}], "stats": {"total": 78, "additions": 73, "deletions": 5}, "files": [{"sha": "72c53cc5879074ad60802699b2dae345efabcd82", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=2c0378f467abaa9190d52c3930ec4c825416f72f", "patch": "@@ -1,3 +1,14 @@\n+2017-08-21  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\tPR libstdc++/81912\n+\t* include/bits/stl_iterator_base_types.h (__iterator_category): Add\n+\tconstexpr for C++11 and later.\n+\t* testsuite/24_iterators/container_access.cc: Add target selector.\n+\t* testsuite/24_iterators/range_access.cc: Fix clause number in\n+\tcomment.\n+\t* testsuite/24_iterators/range_access_cpp14.cc: Likewise.\n+\t* testsuite/24_iterators/range_access_cpp17.cc: New.\n+\n 2017-08-21  Richard Biener  <rguenther@suse.de>\n \n \t* testsuite/libstdc++-prettyprinters/prettyprinters.exp: Run all"}, {"sha": "d2c36ed2ac3496337b798f6c50146820d4eee987", "filename": "libstdc++-v3/include/bits/stl_iterator_base_types.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_types.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_types.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_types.h?ref=2c0378f467abaa9190d52c3930ec4c825416f72f", "patch": "@@ -200,7 +200,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n    *  sugar for internal library use only.\n   */\n   template<typename _Iter>\n-    inline typename iterator_traits<_Iter>::iterator_category\n+    inline _GLIBCXX_CONSTEXPR\n+    typename iterator_traits<_Iter>::iterator_category\n     __iterator_category(const _Iter&)\n     { return typename iterator_traits<_Iter>::iterator_category(); }\n "}, {"sha": "b8d0e80a2de0ee515f1dade06072876fd95139e8", "filename": "libstdc++-v3/testsuite/24_iterators/container_access.cc", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fcontainer_access.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fcontainer_access.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Fcontainer_access.cc?ref=2c0378f467abaa9190d52c3930ec4c825416f72f", "patch": "@@ -1,4 +1,4 @@\n-// { dg-do run }\n+// { dg-do run { target c++1z } }\n // { dg-options \"-std=gnu++17\" }\n \n // Copyright (C) 2015-2017 Free Software Foundation, Inc.\n@@ -62,7 +62,6 @@ test03()\n   static_assert(s == 3);\n   constexpr auto e = std::empty(il3);\n   static_assert(!e);\n-\n }\n \n void"}, {"sha": "5b978b630e126d415a311e32962d3c08ed5cfb58", "filename": "libstdc++-v3/testsuite/24_iterators/range_access.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access.cc?ref=2c0378f467abaa9190d52c3930ec4c825416f72f", "patch": "@@ -17,7 +17,7 @@\n // with this library; see the file COPYING3.  If not see\n // <http://www.gnu.org/licenses/>.\n \n-// 24.6.5, range access [iterator.range]\n+// C++ 2011 24.6.5, range access [iterator.range]\n \n #include <iterator>\n "}, {"sha": "eb75d92a463910822176135b0af35d12d74142e2", "filename": "libstdc++-v3/testsuite/24_iterators/range_access_cpp14.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access_cpp14.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access_cpp14.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access_cpp14.cc?ref=2c0378f467abaa9190d52c3930ec4c825416f72f", "patch": "@@ -17,7 +17,7 @@\n // with this library; see the file COPYING3.  If not see\n // <http://www.gnu.org/licenses/>.\n \n-// 24.6.5, range access [iterator.range]\n+// C++ 2014 24.7, range access [iterator.range]\n \n #include <iterator>\n #include <vector>"}, {"sha": "1d5b0739007806761a0302ad9ca26a42b86b5afd", "filename": "libstdc++-v3/testsuite/24_iterators/range_access_cpp17.cc", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access_cpp17.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c0378f467abaa9190d52c3930ec4c825416f72f/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access_cpp17.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Frange_access_cpp17.cc?ref=2c0378f467abaa9190d52c3930ec4c825416f72f", "patch": "@@ -0,0 +1,57 @@\n+// { dg-do compile { target c++1z } }\n+// { dg-options \"-std=gnu++17\" }\n+\n+// Copyright (C) 2017 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// C++ 2017 27.7, range access [iterator.range]\n+\n+#include <iterator>\n+\n+void\n+test01()\n+{\n+  using std::reverse_iterator;\n+  static int i[1];\n+  static_assert(std::cbegin(i) == i);\n+  static_assert(std::cend(i) == i+1);\n+  static_assert(std::rbegin(i) == reverse_iterator<int*>(i+1));\n+  static_assert(std::rend(i) == reverse_iterator<int*>(i));\n+  static_assert(std::crbegin(i) == reverse_iterator<int*>(i+1));\n+  static_assert(std::crend(i) == reverse_iterator<int*>(i));\n+}\n+\n+void\n+test02()\n+{\n+  static int i[] = { 1, 2 };\n+  static_assert(std::distance(std::begin(i), std::end(i)) == 2);\n+  static_assert(std::distance(std::cbegin(i), std::cend(i)) == 2);\n+}\n+\n+void\n+test03()\n+{\n+  using std::reverse_iterator;\n+  static std::initializer_list<int> il{1};\n+  static_assert(std::cbegin(il) == il.begin());\n+  static_assert(std::cend(il) == il.end());\n+  static_assert(std::rbegin(il) == reverse_iterator<const int*>(il.end()));\n+  static_assert(std::rend(il) == reverse_iterator<const int*>(il.begin()));\n+  static_assert(std::crbegin(il) == reverse_iterator<const int*>(il.end()));\n+  static_assert(std::crend(il) == reverse_iterator<const int*>(il.begin()));\n+}"}]}