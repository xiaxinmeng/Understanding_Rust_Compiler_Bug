{"sha": "746ecc7813de530920233339a89a2284b9937e92", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzQ2ZWNjNzgxM2RlNTMwOTIwMjMzMzM5YTg5YTIyODRiOTkzN2U5Mg==", "commit": {"author": {"name": "Bryce McKinlay", "email": "mckinlay@redhat.com", "date": "2004-04-21T19:26:22Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2004-04-21T19:26:22Z"}, "message": "natClass.cc (_Jv_LayoutInterfaceMethods): New method.\n\n2004-04-21  Bryce McKinlay  <mckinlay@redhat.com>\n\n        * java/lang/natClass.cc (_Jv_LayoutInterfaceMethods): New method.\n        Set method->index values for interface methods to their itable\n\tindex.\n        (initializeClass): Call _Jv_LayoutInterfaceMethods.\n\nFrom-SVN: r80978", "tree": {"sha": "99703a9508cd86ea402bd95d8a86b8bdbe3cbe2a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99703a9508cd86ea402bd95d8a86b8bdbe3cbe2a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/746ecc7813de530920233339a89a2284b9937e92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/746ecc7813de530920233339a89a2284b9937e92", "html_url": "https://github.com/Rust-GCC/gccrs/commit/746ecc7813de530920233339a89a2284b9937e92", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/746ecc7813de530920233339a89a2284b9937e92/comments", "author": null, "committer": null, "parents": [{"sha": "a031e7819637e549c6f074d5d943112da623bf7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a031e7819637e549c6f074d5d943112da623bf7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a031e7819637e549c6f074d5d943112da623bf7b"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "b5a60bd1216717d7e9a228fb338e0c784df4c849", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/746ecc7813de530920233339a89a2284b9937e92/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/746ecc7813de530920233339a89a2284b9937e92/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=746ecc7813de530920233339a89a2284b9937e92", "patch": "@@ -1,3 +1,9 @@\n+2004-04-21  Bryce McKinlay  <mckinlay@redhat.com>\n+\n+\t* java/lang/natClass.cc (_Jv_LayoutInterfaceMethods): New method.\n+\tSet method->index values for interface methods to their itable index.\n+\t(initializeClass): Call _Jv_LayoutInterfaceMethods.\n+\n 2004-04-21  Michael Koch  <konqueror@gmx.de>\n \n \t* java/nio/DirectByteBufferImpl.java"}, {"sha": "e93920c06b51583bf1e2b8cb2b1eec02b2335d18", "filename": "libjava/java/lang/Class.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/746ecc7813de530920233339a89a2284b9937e92/libjava%2Fjava%2Flang%2FClass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/746ecc7813de530920233339a89a2284b9937e92/libjava%2Fjava%2Flang%2FClass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.h?ref=746ecc7813de530920233339a89a2284b9937e92", "patch": "@@ -339,6 +339,7 @@ class java::lang::Class : public java::lang::Object\n   friend jshort _Jv_AppendPartialITable (jclass, jclass, void **, jshort);\n   friend jshort _Jv_FindIIndex (jclass *, jshort *, jshort);\n   friend void _Jv_LinkSymbolTable (jclass);\n+  friend void _Jv_LayoutInterfaceMethods (jclass);\n   friend void _Jv_LayoutVTableMethods (jclass klass);\n   friend void _Jv_SetVTableEntries (jclass, _Jv_VTable *, jboolean *);\n   friend void _Jv_MakeVTable (jclass);"}, {"sha": "3ceda11238f58b0e1d98b27761d0758cdde4e140", "filename": "libjava/java/lang/natClass.cc", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/746ecc7813de530920233339a89a2284b9937e92/libjava%2Fjava%2Flang%2FnatClass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/746ecc7813de530920233339a89a2284b9937e92/libjava%2Fjava%2Flang%2FnatClass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClass.cc?ref=746ecc7813de530920233339a89a2284b9937e92", "patch": "@@ -790,6 +790,9 @@ java::lang::Class::initializeClass (void)\n \t}\n     }\n \n+  if (isInterface ())\n+    _Jv_LayoutInterfaceMethods (this);\n+\n   _Jv_PrepareConstantTimeTables (this);\n \n   if (vtable == NULL)\n@@ -1787,6 +1790,20 @@ _Jv_abstractMethodError (void)\n   throw new java::lang::AbstractMethodError();\n }\n \n+// Set itable method indexes for members of interface IFACE.\n+void\n+_Jv_LayoutInterfaceMethods (jclass iface)\n+{\n+  if (! iface->isInterface())\n+    return;\n+  \n+  // itable indexes start at 1. \n+  // FIXME: Static initalizers currently get a NULL placeholder entry in the\n+  // itable so they are also assigned an index here.\n+  for (int i = 0; i < iface->method_count; i++)\n+    iface->methods[i].index = i + 1;\n+}\n+\n // Prepare virtual method declarations in KLASS, and any superclasses as \n // required, by determining their vtable index, setting method->index, and\n // finally setting the class's vtable_method_count. Must be called with the"}]}