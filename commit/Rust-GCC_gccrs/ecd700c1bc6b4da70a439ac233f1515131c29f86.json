{"sha": "ecd700c1bc6b4da70a439ac233f1515131c29f86", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNkNzAwYzFiYzZiNGRhNzBhNDM5YWMyMzNmMTUxNTEzMWMyOWY4Ng==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-09-30T16:00:42Z"}, "committer": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2020-09-30T16:00:42Z"}, "message": "Fix some fnspec strings in trans-decl.c\n\n\t* trans-decl.c (gfc_build_intrinsic_function_decls): Add traling dots\n\tto spec strings so they match the number of parameters; do not use\n\tR and W for non-pointer parameters. Drop pointless specifier on\n\tcaf_stop_numeric and caf_get_team.", "tree": {"sha": "fb3562059a3cdea51358cdb2794eccf29e57e47e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb3562059a3cdea51358cdb2794eccf29e57e47e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ecd700c1bc6b4da70a439ac233f1515131c29f86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecd700c1bc6b4da70a439ac233f1515131c29f86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecd700c1bc6b4da70a439ac233f1515131c29f86", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecd700c1bc6b4da70a439ac233f1515131c29f86/comments", "author": null, "committer": null, "parents": [{"sha": "1814c828a021adaab7eb98124e9db3a3341a86e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1814c828a021adaab7eb98124e9db3a3341a86e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1814c828a021adaab7eb98124e9db3a3341a86e3"}], "stats": {"total": 26, "additions": 13, "deletions": 13}, "files": [{"sha": "2be9df40d2c0f88185141c98dd7c32b369df32c2", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecd700c1bc6b4da70a439ac233f1515131c29f86/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecd700c1bc6b4da70a439ac233f1515131c29f86/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=ecd700c1bc6b4da70a439ac233f1515131c29f86", "patch": "@@ -3484,16 +3484,16 @@ gfc_build_intrinsic_function_decls (void)\n   /* Misc. functions.  */\n \n   gfor_fndecl_ttynam = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"ttynam\")), \".W\",\n+\tget_identifier (PREFIX(\"ttynam\")), \".W..\",\n \tvoid_type_node, 3, pchar_type_node, gfc_charlen_type_node,\n \tinteger_type_node);\n \n   gfor_fndecl_fdate = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"fdate\")), \".W\",\n+\tget_identifier (PREFIX(\"fdate\")), \".W.\",\n \tvoid_type_node, 2, pchar_type_node, gfc_charlen_type_node);\n \n   gfor_fndecl_ctime = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"ctime\")), \".W\",\n+\tget_identifier (PREFIX(\"ctime\")), \".W..\",\n \tvoid_type_node, 3, pchar_type_node, gfc_charlen_type_node,\n \tgfc_int8_type_node);\n \n@@ -3662,7 +3662,7 @@ gfc_build_intrinsic_function_decls (void)\n   TREE_NOTHROW (gfor_fndecl_size0) = 1;\n \n   gfor_fndecl_size1 = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"size1\")), \".R\",\n+\tget_identifier (PREFIX(\"size1\")), \".R.\",\n \tgfc_array_index_type, 2, pvoid_type_node, gfc_array_index_type);\n   DECL_PURE_P (gfor_fndecl_size1) = 1;\n   TREE_NOTHROW (gfor_fndecl_size1) = 1;\n@@ -3701,7 +3701,7 @@ gfc_build_builtin_function_decls (void)\n   TREE_THIS_VOLATILE (gfor_fndecl_stop_numeric) = 1;\n \n   gfor_fndecl_stop_string = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"stop_string\")), \".R.\",\n+\tget_identifier (PREFIX(\"stop_string\")), \".R..\",\n \tvoid_type_node, 3, pchar_type_node, size_type_node,\n \tboolean_type_node);\n   /* STOP doesn't return.  */\n@@ -3714,7 +3714,7 @@ gfc_build_builtin_function_decls (void)\n   TREE_THIS_VOLATILE (gfor_fndecl_error_stop_numeric) = 1;\n \n   gfor_fndecl_error_stop_string = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"error_stop_string\")), \".R.\",\n+\tget_identifier (PREFIX(\"error_stop_string\")), \".R..\",\n \tvoid_type_node, 3, pchar_type_node, size_type_node,\n \tboolean_type_node);\n   /* ERROR STOP doesn't return.  */\n@@ -3892,15 +3892,15 @@ gfc_build_builtin_function_decls (void)\n \t    integer_type_node);\n \n       gfor_fndecl_caf_sync_all = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"caf_sync_all\")), \".WW\", void_type_node,\n+\tget_identifier (PREFIX(\"caf_sync_all\")), \".WW.\", void_type_node,\n \t3, pint_type, pchar_type_node, size_type_node);\n \n       gfor_fndecl_caf_sync_memory = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"caf_sync_memory\")), \".WW\", void_type_node,\n+\tget_identifier (PREFIX(\"caf_sync_memory\")), \".WW.\", void_type_node,\n \t3, pint_type, pchar_type_node, size_type_node);\n \n       gfor_fndecl_caf_sync_images = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"caf_sync_images\")), \".RRWW\", void_type_node,\n+\tget_identifier (PREFIX(\"caf_sync_images\")), \"..RWW.\", void_type_node,\n \t5, integer_type_node, pint_type, pint_type,\n \tpchar_type_node, size_type_node);\n \n@@ -3916,8 +3916,8 @@ gfc_build_builtin_function_decls (void)\n       /* CAF's ERROR STOP doesn't return.  */\n       TREE_THIS_VOLATILE (gfor_fndecl_caf_error_stop_str) = 1;\n \n-      gfor_fndecl_caf_stop_numeric = gfc_build_library_function_decl_with_spec (\n-\tget_identifier (PREFIX(\"caf_stop_numeric\")), \".R.\",\n+      gfor_fndecl_caf_stop_numeric = gfc_build_library_function_decl (\n+\tget_identifier (PREFIX(\"caf_stop_numeric\")),\n \tvoid_type_node, 1, integer_type_node);\n       /* CAF's STOP doesn't return.  */\n       TREE_THIS_VOLATILE (gfor_fndecl_caf_stop_numeric) = 1;\n@@ -4003,8 +4003,8 @@ gfc_build_builtin_function_decls (void)\n \t    get_identifier (PREFIX(\"caf_end_team\")), void_type_node, 0);\n \n       gfor_fndecl_caf_get_team\n-\t= gfc_build_library_function_decl_with_spec (\n-\t    get_identifier (PREFIX(\"caf_get_team\")), \"R\",\n+\t= gfc_build_library_function_decl (\n+\t    get_identifier (PREFIX(\"caf_get_team\")),\n \t    void_type_node, 1, integer_type_node);\n \n       gfor_fndecl_caf_sync_team"}]}