{"sha": "8965ece1043514b1f829647a48b4e1059b4ada81", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODk2NWVjZTEwNDM1MTRiMWY4Mjk2NDdhNDhiNGUxMDU5YjRhZGE4MQ==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2004-08-02T13:19:39Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-08-02T13:19:39Z"}, "message": "re PR rtl-optimization/15068 (ICE in elim_reg_cond)\n\n\tPR rtl-optimization/15068\n\t* flow.c (init_propagate_block_info): Check condition is reversible.\n\nFrom-SVN: r85439", "tree": {"sha": "3c2ced26891b63a63c680a2b975bfcdff73ef48b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c2ced26891b63a63c680a2b975bfcdff73ef48b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8965ece1043514b1f829647a48b4e1059b4ada81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8965ece1043514b1f829647a48b4e1059b4ada81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8965ece1043514b1f829647a48b4e1059b4ada81", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8965ece1043514b1f829647a48b4e1059b4ada81/comments", "author": null, "committer": null, "parents": [{"sha": "9e2878cff24d855649135c2d896ca3c3319a26d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e2878cff24d855649135c2d896ca3c3319a26d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e2878cff24d855649135c2d896ca3c3319a26d4"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "7dc0a5b503c92758c767855f70de03cc1fa8ee80", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8965ece1043514b1f829647a48b4e1059b4ada81/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8965ece1043514b1f829647a48b4e1059b4ada81/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8965ece1043514b1f829647a48b4e1059b4ada81", "patch": "@@ -1,3 +1,8 @@\n+2004-08-02  Paul Brook  <paul@codesourcery.com>\n+\n+\tPR rtl-optimization/15068\n+\t* flow.c (init_propagate_block_info): Check condition is reversible.\n+\n 2004-08-02  Gabriel Dos Reis  <gdr@integrable-solutions.net>\n \n \t* gengtype.h (options::info): Change type to const char *."}, {"sha": "344b48bf22310fda0f45d34b58aee6bb9e7fd566", "filename": "gcc/flow.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8965ece1043514b1f829647a48b4e1059b4ada81/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8965ece1043514b1f829647a48b4e1059b4ada81/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=8965ece1043514b1f829647a48b4e1059b4ada81", "patch": "@@ -1865,19 +1865,22 @@ init_propagate_block_info (basic_block bb, regset live, regset local_set,\n \t  rtx set_src = SET_SRC (pc_set (BB_END (bb)));\n \t  rtx cond_true = XEXP (set_src, 0);\n \t  rtx reg = XEXP (cond_true, 0);\n+ \t  enum rtx_code inv_cond;\n \n \t  if (GET_CODE (reg) == SUBREG)\n \t    reg = SUBREG_REG (reg);\n \n \t  /* We can only track conditional lifetimes if the condition is\n-\t     in the form of a comparison of a register against zero.  \n-\t     If the condition is more complex than that, then it is safe\n-\t     not to record any information.  */\n-\t  if (REG_P (reg)\n+ \t     in the form of a reversible comparison of a register against\n+ \t     zero.  If the condition is more complex than that, then it is\n+ \t     safe not to record any information.  */\n+ \t  inv_cond = reversed_comparison_code (cond_true, BB_END (bb));\n+ \t  if (inv_cond != UNKNOWN\n+ \t      && REG_P (reg)\n \t      && XEXP (cond_true, 1) == const0_rtx)\n \t    {\n \t      rtx cond_false\n-\t\t= gen_rtx_fmt_ee (reverse_condition (GET_CODE (cond_true)),\n+\t\t= gen_rtx_fmt_ee (inv_cond,\n \t\t\t\t  GET_MODE (cond_true), XEXP (cond_true, 0),\n \t\t\t\t  XEXP (cond_true, 1));\n \t      if (GET_CODE (XEXP (set_src, 1)) == PC)"}]}