{"sha": "2449e8e5cdb140871c4368606cd3405a48103319", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ0OWU4ZTVjZGIxNDA4NzFjNDM2ODYwNmNkMzQwNWE0ODEwMzMxOQ==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2008-02-01T21:28:06Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2008-02-01T21:28:06Z"}, "message": "re PR rtl-optimization/34773 (miscompilation of vfprintf_r)\n\n\tPR rtl-optimization/34773\n\t* gcc.target/cris/torture/pr34773.c: New test.\n\nFrom-SVN: r132052", "tree": {"sha": "b4c52f705add0f69580fff6bac66527d6bb4db3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4c52f705add0f69580fff6bac66527d6bb4db3c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2449e8e5cdb140871c4368606cd3405a48103319", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2449e8e5cdb140871c4368606cd3405a48103319", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2449e8e5cdb140871c4368606cd3405a48103319", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2449e8e5cdb140871c4368606cd3405a48103319/comments", "author": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "aa12a573037adf13b79f05d5105d75f3070ca02c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa12a573037adf13b79f05d5105d75f3070ca02c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa12a573037adf13b79f05d5105d75f3070ca02c"}], "stats": {"total": 79, "additions": 79, "deletions": 0}, "files": [{"sha": "ffd5917ad6f1666be9bd3309fe5eb50527bba324", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2449e8e5cdb140871c4368606cd3405a48103319/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2449e8e5cdb140871c4368606cd3405a48103319/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2449e8e5cdb140871c4368606cd3405a48103319", "patch": "@@ -1,3 +1,8 @@\n+2008-02-01  Hans-Peter Nilsson  <hp@axis.com>\n+\n+\tPR rtl-optimization/34773\n+\t* gcc.target/cris/torture/pr34773.c: New test.\n+\n 2008-02-01  Nick Clifton  <nickc@redhat.com>\n \n \t* lib/target-supports.exp (check_profiling_available): Do not"}, {"sha": "4912611b853a242e8aafeccc772ae6969f500ab0", "filename": "gcc/testsuite/gcc.target/cris/torture/pr34773.c", "status": "added", "additions": 74, "deletions": 0, "changes": 74, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2449e8e5cdb140871c4368606cd3405a48103319/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fpr34773.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2449e8e5cdb140871c4368606cd3405a48103319/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fpr34773.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fcris%2Ftorture%2Fpr34773.c?ref=2449e8e5cdb140871c4368606cd3405a48103319", "patch": "@@ -0,0 +1,74 @@\n+/* { dg-do run } */\n+union double_union\n+{\n+  double d;\n+  int i[2];\n+};\n+void _dtoa_r (double) __attribute__ ((__noinline__));\n+void _vfprintf_r (double) __attribute__ ((__noinline__));\n+void\n+__sprint_r(int);\n+void\n+_vfprintf_r(double da)\n+{\n+ double ffp = da;\n+ double value = ffp;\n+ union double_union tmp;\n+\n+ tmp.d = value;\n+\n+ if ((tmp.i[1]) & ((unsigned)0x80000000L)) {\n+   value = -value;\n+ }\n+\n+ _dtoa_r (value);\n+\n+ if (ffp != 0)\n+   __sprint_r(value == 0);\n+ asm (\"\");\n+}\n+\n+\n+double dd = -.012;\n+double ff = .012;\n+\n+void exit (int) __attribute__ ((__noreturn__));\n+void abort (void) __attribute__ ((__noreturn__));\n+void *memset(void *s, int c, __SIZE_TYPE__ n);\n+void _dtoa_r (double d)\n+{\n+  if (d != ff)\n+    abort ();\n+  asm (\"\");\n+}\n+\n+void __sprint_r (int i)\n+{\n+  if (i != 0)\n+    abort ();\n+  asm (\"\");\n+}\n+\n+int clearstack (void) __attribute__ ((__noinline__));\n+int clearstack (void)\n+{\n+  char doodle[128];\n+  memset (doodle, 0, sizeof doodle);\n+  asm volatile (\"\" : : \"g\" (doodle) : \"memory\");\n+  return doodle[127];\n+}\n+\n+void doit (void) __attribute__ ((__noinline__));\n+void doit (void)\n+{\n+  _vfprintf_r (dd);\n+  _vfprintf_r (ff);\n+  asm (\"\");\n+}\n+\n+int main(void)\n+{\n+  clearstack ();\n+  doit ();\n+  exit (0);\n+}"}]}