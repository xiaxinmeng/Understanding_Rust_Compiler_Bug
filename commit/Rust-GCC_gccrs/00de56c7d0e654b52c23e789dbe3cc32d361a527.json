{"sha": "00de56c7d0e654b52c23e789dbe3cc32d361a527", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBkZTU2YzdkMGU2NTRiNTJjMjNlNzg5ZGJlM2NjMzJkMzYxYTUyNw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-01-05T05:56:00Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-01-05T05:56:00Z"}, "message": "20000926-1.c: Update expected warnings.\n\n        * gcc.dg/20000926-1.c: Update expected warnings.\n        * gcc.dg/array-2.c: Likewise.\n        * gcc.dg/array-4.c: Also validate flexible array members.\n        * gcc.dg/c99-flex-array-1.c: New.\n\nFrom-SVN: r38704", "tree": {"sha": "b4606c69a6e503b36bcef04bc2f8a017f8bd95f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4606c69a6e503b36bcef04bc2f8a017f8bd95f6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00de56c7d0e654b52c23e789dbe3cc32d361a527", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00de56c7d0e654b52c23e789dbe3cc32d361a527", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00de56c7d0e654b52c23e789dbe3cc32d361a527", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00de56c7d0e654b52c23e789dbe3cc32d361a527/comments", "author": null, "committer": null, "parents": [{"sha": "69f6e760a80eef94fa88119e4f2ac4c63353dc78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69f6e760a80eef94fa88119e4f2ac4c63353dc78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69f6e760a80eef94fa88119e4f2ac4c63353dc78"}], "stats": {"total": 44, "additions": 35, "deletions": 9}, "files": [{"sha": "59891ece4ec62ba075dd437e4098fdec84da7c03", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=00de56c7d0e654b52c23e789dbe3cc32d361a527", "patch": "@@ -1,3 +1,10 @@\n+2001-01-04  Richard Henderson  <rth@redhat.com>\n+\n+\t* gcc.dg/20000926-1.c: Update expected warnings.\n+\t* gcc.dg/array-2.c: Likewise.\n+\t* gcc.dg/array-4.c: Also validate flexible array members.\n+\t* gcc.dg/c99-flex-array-1.c: New.\n+\n 2001-01-04  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* gcc.c-torture/compile/20001222-1.x: Remove."}, {"sha": "bce1bb6626a6a77e4f2e54d3252e57111d765690", "filename": "gcc/testsuite/gcc.dg/20000926-1.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2F20000926-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2F20000926-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20000926-1.c?ref=00de56c7d0e654b52c23e789dbe3cc32d361a527", "patch": "@@ -1,5 +1,4 @@\n /* Copyright (C) 2000  Free Software Foundation.\n-\n    by William Cohen  <wcohen@redhat.com>  */\n \n /* { dg-do compile } */\n@@ -23,5 +22,5 @@ struct PLAYBOOK playbook  =\n   \"BookName\",\n   {\n     { 1, \"PName0\" },\n-  }\n+  } /* { dg-warning \"(deprecated initialization)|(near initialization)\" \"\" } */\n };"}, {"sha": "dbf1733697d2cbfcd1e2587eef5dfa78dbce0952", "filename": "gcc/testsuite/gcc.dg/array-2.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2Farray-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2Farray-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Farray-2.c?ref=00de56c7d0e654b52c23e789dbe3cc32d361a527", "patch": "@@ -1,10 +1,13 @@\n /* { dg-do compile } */\n-/* { dg-options \"\" } */\n+/* { dg-options \"-w\" } */\n \n /* Verify that we can't do things to get ourselves in trouble\n-   with GCC's zero-length array extension.  */\n+   with GCC's initialized flexible array member extension.  */\n \n-struct f { int w; int x[0]; };\n+struct f { int w; int x[]; };\n struct g { struct f f; };\n struct g g1 = { { 0, { } } };\n-struct g g2 = { { 0, { 1 } } }; /* { dg-error \"(nested structure)|(near initialization)\" \"nested\" } */\n+struct g g2 = { { 0, { 1 } } }; /* { dg-error \"(nested context)|(near initialization)\" \"nested\" } */\n+\n+struct h { int x[0]; int y; };\n+struct h h1 = { { 0 }, 1 }; /* { dg-error \"(before end)|(near initialization)\" \"before end\" } */"}, {"sha": "52ad92143a55c761f7c956656adc40e3ddcb73d4", "filename": "gcc/testsuite/gcc.dg/array-4.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2Farray-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2Farray-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Farray-4.c?ref=00de56c7d0e654b52c23e789dbe3cc32d361a527", "patch": "@@ -1,19 +1,28 @@\n /* { dg-do run } */\n /* { dg-options \"\" } */\n \n-/* Verify that GCC's extension to initialize a zero-length array\n-   member works properly.  */\n+/* Verify that GCC's initialized flexible array member extension\n+   works properly.  */\n \n extern void abort(void);\n extern void exit(int);\n \n-struct f { int w; int x[0]; } f = { 4, { 0, 1, 2, 3 } };\n+struct f { int w; int x[]; };\n+struct g { int w; int x[0]; };\n+\n+static struct f f = { 4, { 0, 1, 2, 3 } };\n+static int junk1[] = { -1, -1, -1, -1 };\n+static struct g g = { 4, { 0, 1, 2, 3 } }; /* { dg-warning \"(deprecated initialization)|(near initialization)\" \"\" } */\n+static int junk2[] = { -1, -1, -1, -1 };\n \n int main()\n {\n   int i;\n   for (i = 0; i < f.w; ++i)\n     if (f.x[i] != i)\n       abort ();\n+  for (i = 0; i < g.w; ++i)\n+    if (g.x[i] != i)\n+      abort ();\n   exit(0);\n }"}, {"sha": "b14397ad295d675104f2d6b17ff64abbbd632c1f", "filename": "gcc/testsuite/gcc.dg/c99-flex-array-1.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-flex-array-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00de56c7d0e654b52c23e789dbe3cc32d361a527/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-flex-array-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-flex-array-1.c?ref=00de56c7d0e654b52c23e789dbe3cc32d361a527", "patch": "@@ -0,0 +1,8 @@\n+/* Test for invalid uses of flexible array members.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-std=iso9899:1999 -pedantic-errors\" } */\n+\n+struct s1 { int x[]; }; /* { dg-error \"empty struct\" \"empty\" } */\n+struct s2 { int :1; int x[]; }; /* { dg-error \"empty struct\" \"empty\" } */\n+struct s3 { int x[]; int y; }; /* { dg-error \"not at end\" \"not at end\" } */\n+struct s4 { int x; int y[]; };"}]}