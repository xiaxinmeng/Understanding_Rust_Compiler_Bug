{"sha": "6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmIyY2QzN2JkOTY1YmI1MWYyZmQwOThjMTY0ZjI0NDFhZDRmNTI1Yw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-02-26T17:36:00Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-02-26T17:36:00Z"}, "message": "re PR go/69966 (libgo: Port syscall.SetsockoptUcred from golang)\n\n\tPR go/69966\n    syscall: Add new Getsockopt functions.\n    \n    Add GetsockoptICMPv6Filter, GetsockoptIPv6MTUInfo, GetsockoptUcred as\n    appropriate.  These functions exist in the master library.\n    \n    For GCC PR 69966.\n\n    Reviewed-on: https://go-review.googlesource.com/19960\n\nFrom-SVN: r233747", "tree": {"sha": "a5186cce77f730c3331fe4e1f4ce3afcff5ff594", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5186cce77f730c3331fe4e1f4ce3afcff5ff594"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/comments", "author": null, "committer": null, "parents": [{"sha": "9ece21a6c56ee2b000f194d8fa591d7348b45afb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ece21a6c56ee2b000f194d8fa591d7348b45afb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ece21a6c56ee2b000f194d8fa591d7348b45afb"}], "stats": {"total": 40, "additions": 38, "deletions": 2}, "files": [{"sha": "07ae4d0f00c506bc0ce9505ca32cd97c3e894d08", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "patch": "@@ -1,4 +1,4 @@\n-156f5f0152797ac2afe5f23803aeb3c7b8f8418e\n+3de822d11255d439fac9717897b017aae2de18c2\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "93bbc389f4d3bdea96c92a24aabe27d543f56ff7", "filename": "libgo/go/syscall/socket.go", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fgo%2Fsyscall%2Fsocket.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fgo%2Fsyscall%2Fsocket.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fsocket.go?ref=6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "patch": "@@ -251,6 +251,13 @@ func GetsockoptIPv6Mreq(fd, level, opt int) (*IPv6Mreq, error) {\n \treturn &value, err\n }\n \n+func GetsockoptICMPv6Filter(fd, level, opt int) (*ICMPv6Filter, error) {\n+\tvar value ICMPv6Filter\n+\tvallen := Socklen_t(SizeofICMPv6Filter)\n+\terr := getsockopt(fd, level, opt, unsafe.Pointer(&value), &vallen)\n+\treturn &value, err\n+}\n+\n //sys\tsetsockopt(s int, level int, name int, val unsafe.Pointer, vallen Socklen_t) (err error)\n //setsockopt(s _C_int, level _C_int, optname _C_int, val *byte, vallen Socklen_t) _C_int\n "}, {"sha": "c8da1022218be01e9cbc61893fb6ccc3ff3579b9", "filename": "libgo/go/syscall/socket_bsd.go", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fgo%2Fsyscall%2Fsocket_bsd.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fgo%2Fsyscall%2Fsocket_bsd.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fsocket_bsd.go?ref=6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "patch": "@@ -80,3 +80,10 @@ func BindToDevice(fd int, device string) (err error) {\n func anyToSockaddrOS(rsa *RawSockaddrAny) (Sockaddr, error) {\n \treturn nil, EAFNOSUPPORT\n }\n+\n+func GetsockoptIPv6MTUInfo(fd, level, opt int) (*IPv6MTUInfo, error) {\n+\tvar value IPv6MTUInfo\n+\tvallen := Socklen_t(SizeofIPv6MTUInfo)\n+\terr := getsockopt(fd, level, opt, unsafe.Pointer(&value), &vallen)\n+\treturn &value, err\n+}"}, {"sha": "3c3098e0564a0252ccee9a8e77ca29ddcc9cb5bc", "filename": "libgo/go/syscall/socket_linux.go", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fgo%2Fsyscall%2Fsocket_linux.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fgo%2Fsyscall%2Fsocket_linux.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fsocket_linux.go?ref=6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "patch": "@@ -168,6 +168,20 @@ func anyToSockaddrOS(rsa *RawSockaddrAny) (Sockaddr, error) {\n \treturn nil, EAFNOSUPPORT\n }\n \n+func GetsockoptIPv6MTUInfo(fd, level, opt int) (*IPv6MTUInfo, error) {\n+\tvar value IPv6MTUInfo\n+\tvallen := Socklen_t(SizeofIPv6MTUInfo)\n+\terr := getsockopt(fd, level, opt, unsafe.Pointer(&value), &vallen)\n+\treturn &value, err\n+}\n+\n+func GetsockoptUcred(fd, level, opt int) (*Ucred, error) {\n+\tvar value Ucred\n+\tvallen := Socklen_t(SizeofUcred)\n+\terr := getsockopt(fd, level, opt, unsafe.Pointer(&value), &vallen)\n+\treturn &value, err\n+}\n+\n //sysnb\tEpollCreate(size int) (fd int, err error)\n //epoll_create(size _C_int) _C_int\n "}, {"sha": "1271e1a550f666a327ba36b41d691e8cda5c7940", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b2cd37bd965bb51f2fd098c164f2441ad4f525c/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=6b2cd37bd965bb51f2fd098c164f2441ad4f525c", "patch": "@@ -870,6 +870,14 @@ if ! grep 'type ICMPv6Filter ' ${OUT} > /dev/null 2>&1; then\n   echo 'type ICMPv6Filter struct { Data [8]uint32 }' >> ${OUT}\n fi\n \n+# The ip6_mtuinfo struct.\n+grep '^type _ip6_mtuinfo ' gen-sysinfo.go | \\\n+    sed -e 's/_ip6_mtuinfo/IPv6MTUInfo/' \\\n+      -e 's/ip6m_addr/Addr/' \\\n+      -e 's/_sockaddr_in6/RawSockaddrInet6/' \\\n+      -e 's/ip6m_mtu/Mtu/' \\\n+    >> ${OUT}\n+\n # Try to guess the type to use for fd_set.\n fd_set=`grep '^type _fd_set ' gen-sysinfo.go || true`\n fds_bits_type=\"_C_long\"\n@@ -1464,7 +1472,7 @@ set cmsghdr Cmsghdr ip_mreq IPMreq ip_mreqn IPMreqn ipv6_mreq IPv6Mreq \\\n     msghdr Msghdr nlattr NlAttr nlmsgerr NlMsgerr nlmsghdr NlMsghdr \\\n     rtattr RtAttr rtgenmsg RtGenmsg rtmsg RtMsg rtnexthop RtNexthop \\\n     sock_filter SockFilter sock_fprog SockFprog ucred Ucred \\\n-    icmp6_filter ICMPv6Filter\n+    icmp6_filter ICMPv6Filter ip6_mtuinfo IPv6MTUInfo\n while test $# != 0; do\n     nc=$1\n     ngo=$2"}]}