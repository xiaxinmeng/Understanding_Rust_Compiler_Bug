{"sha": "9ae130f857c95929cd8af833b66f526827a7f701", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWFlMTMwZjg1N2M5NTkyOWNkOGFmODMzYjY2ZjUyNjgyN2E3ZjcwMQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2003-07-14T21:18:15Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2003-07-14T21:18:15Z"}, "message": "cfglayout.c (locator_file): Break out from ....\n\n\t* cfglayout.c (locator_file): Break out from ....\n\t(insn_file): ... here.\n\t(locator_line): Break out from ....\n\t(insn_line): ... here.\n\t* rtl.h (locator_file, locator_line): Declare.\n\t(final_start_function): Set proper line/file info.\n\nFrom-SVN: r69359", "tree": {"sha": "b05a5187c5f66174f8834e8f396ca621a418a89d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b05a5187c5f66174f8834e8f396ca621a418a89d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ae130f857c95929cd8af833b66f526827a7f701", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ae130f857c95929cd8af833b66f526827a7f701", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ae130f857c95929cd8af833b66f526827a7f701", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ae130f857c95929cd8af833b66f526827a7f701/comments", "author": null, "committer": null, "parents": [{"sha": "e07d4821a6f45e995f275980874c8ac6050cc548", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e07d4821a6f45e995f275980874c8ac6050cc548", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e07d4821a6f45e995f275980874c8ac6050cc548"}], "stats": {"total": 40, "additions": 32, "deletions": 8}, "files": [{"sha": "7d63ed9efe7183dcf2e5612015da26ec9fe6376d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ae130f857c95929cd8af833b66f526827a7f701", "patch": "@@ -1,3 +1,12 @@\n+Mon Jul 14 23:14:28 CEST 2003  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cfglayout.c (locator_file): Break out from ....\n+\t(insn_file): ... here.\n+\t(locator_line): Break out from ....\n+\t(insn_line): ... here.\n+\t* rtl.h (locator_file, locator_line): Declare.\n+\t(final_start_function): Set proper line/file info.\n+\n 2003-07-14  Gabriel Dos Reis  <gdr@integrable-solutions.net>\n \n \t* c-pretty-print.c (pp_c_unary_expression): A CONVERT_EXPR is"}, {"sha": "38390894ac8ec0c18c94fd97c757f596bcb50c53", "filename": "gcc/cfglayout.c", "status": "modified", "additions": 18, "deletions": 6, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2Fcfglayout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2Fcfglayout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfglayout.c?ref=9ae130f857c95929cd8af833b66f526827a7f701", "patch": "@@ -435,13 +435,12 @@ insn_scope (rtx insn)\n    return VARRAY_TREE (block_locators_blocks, min);\n }\n \n-/* Return line number of the statement that produced this insn.  */\n+/* Return line number of the statement specified by the locator.  */\n int\n-insn_line (rtx insn)\n+locator_line (int loc)\n {\n   int max = VARRAY_ACTIVE_SIZE (line_locators_locs);\n   int min = 0;\n-  int loc = INSN_LOCATOR (insn);\n \n   if (!max || !loc)\n     return 0;\n@@ -463,13 +462,19 @@ insn_line (rtx insn)\n    return VARRAY_INT (line_locators_lines, min);\n }\n \n-/* Return source file of the statement that produced this insn.  */\n+/* Return line number of the statement that produced this insn.  */\n+int\n+insn_line (rtx insn)\n+{\n+  return locator_line (INSN_LOCATOR (insn));\n+}\n+\n+/* Return source file of the statement specified by LOC.  */\n const char *\n-insn_file (rtx insn)\n+locator_file (int loc)\n {\n   int max = VARRAY_ACTIVE_SIZE (file_locators_locs);\n   int min = 0;\n-  int loc = INSN_LOCATOR (insn);\n \n   if (!max || !loc)\n     return NULL;\n@@ -491,6 +496,13 @@ insn_file (rtx insn)\n    return VARRAY_CHAR_PTR (file_locators_files, min);\n }\n \n+/* Return source file of the statement that produced this insn.  */\n+const char *\n+insn_file (rtx insn)\n+{\n+  return locator_file (INSN_LOCATOR (insn));\n+}\n+\n /* Rebuild all the NOTE_INSN_BLOCK_BEG and NOTE_INSN_BLOCK_END notes based\n    on the scope tree and the newly reordered instructions.  */\n "}, {"sha": "cfc730cf1f788d8fdc681d4821a8d09d4a0e510c", "filename": "gcc/final.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=9ae130f857c95929cd8af833b66f526827a7f701", "patch": "@@ -1349,8 +1349,9 @@ final_start_function (rtx first ATTRIBUTE_UNUSED, FILE *file,\n     }\n #endif\n \n-  last_linenum = 0;\n-  last_filename = 0;\n+  last_filename = locator_file (prologue_locator);\n+  last_linenum = locator_line (prologue_locator);\n+\n   high_block_linenum = high_function_linenum = last_linenum;\n \n   (*debug_hooks->begin_prologue) (last_linenum, last_filename);"}, {"sha": "9d3b0dc1b9b14b14f0fb8e3c169ff487a4e5c157", "filename": "gcc/rtl.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2Frtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ae130f857c95929cd8af833b66f526827a7f701/gcc%2Frtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.h?ref=9ae130f857c95929cd8af833b66f526827a7f701", "patch": "@@ -1544,6 +1544,8 @@ extern rtx prev_cc0_setter (rtx);\n extern tree choose_inner_scope (tree, tree);\n extern int insn_line (rtx);\n extern const char * insn_file (rtx);\n+extern int locator_line (int);\n+extern const char * locator_file (int);\n extern int prologue_locator, epilogue_locator;\n \n /* In jump.c */"}]}