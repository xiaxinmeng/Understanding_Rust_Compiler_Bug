{"sha": "9f85ecfe7faf2e502afc75d9ead39be80ad15f23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWY4NWVjZmU3ZmFmMmU1MDJhZmM3NWQ5ZWFkMzliZTgwYWQxNWYyMw==", "commit": {"author": {"name": "Dale Johannesen", "email": "dalej@apple.com", "date": "2005-10-05T17:29:41Z"}, "committer": {"name": "Dale Johannesen", "email": "dalej@gcc.gnu.org", "date": "2005-10-05T17:29:41Z"}, "message": "convert.c (convert_to_real): Don't convert (float)floor(double d) to floorf((float)d).\n\n2005-10-05  Dale Johannesen  <dalej@apple.com>\n\n        * convert.c (convert_to_real):  Don't convert\n        (float)floor(double d) to floorf((float)d).\n\nFrom-SVN: r105006", "tree": {"sha": "adf749950f317fb0643a322ff56d041135095cf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/adf749950f317fb0643a322ff56d041135095cf0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9f85ecfe7faf2e502afc75d9ead39be80ad15f23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f85ecfe7faf2e502afc75d9ead39be80ad15f23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f85ecfe7faf2e502afc75d9ead39be80ad15f23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f85ecfe7faf2e502afc75d9ead39be80ad15f23/comments", "author": null, "committer": null, "parents": [{"sha": "8acdc22e8e9a6a0c0137e4701fac2740cbb6210a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8acdc22e8e9a6a0c0137e4701fac2740cbb6210a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8acdc22e8e9a6a0c0137e4701fac2740cbb6210a"}], "stats": {"total": 37, "additions": 8, "deletions": 29}, "files": [{"sha": "102736af024abf732b4f5c87e56acc0e71735782", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f85ecfe7faf2e502afc75d9ead39be80ad15f23/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f85ecfe7faf2e502afc75d9ead39be80ad15f23/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9f85ecfe7faf2e502afc75d9ead39be80ad15f23", "patch": "@@ -1,3 +1,8 @@\n+2005-10-05  Dale Johannesen  <dalej@apple.com>\n+\n+\t* convert.c (convert_to_real):  Don't convert\n+\t(float)floor(double d) to floorf((float)d).\n+\n 2005-10-05  Daniel Jacobowitz  <dan@codesourcery.com>\n \n \t* config/arm/arm.md (insv): Use gen_int_mode in more places."}, {"sha": "471d93db5628296b6ee31e75c5f190553de90fde", "filename": "gcc/convert.c", "status": "modified", "additions": 3, "deletions": 29, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f85ecfe7faf2e502afc75d9ead39be80ad15f23/gcc%2Fconvert.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f85ecfe7faf2e502afc75d9ead39be80ad15f23/gcc%2Fconvert.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconvert.c?ref=9f85ecfe7faf2e502afc75d9ead39be80ad15f23", "patch": "@@ -200,35 +200,9 @@ convert_to_real (tree type, tree expr)\n \t  break;\n \t}\n     }\n-  if (optimize\n-      && (((fcode == BUILT_IN_FLOORL\n-\t   || fcode == BUILT_IN_CEILL\n-\t   || fcode == BUILT_IN_ROUNDL\n-\t   || fcode == BUILT_IN_RINTL\n-\t   || fcode == BUILT_IN_TRUNCL\n-\t   || fcode == BUILT_IN_NEARBYINTL)\n-\t  && (TYPE_MODE (type) == TYPE_MODE (double_type_node)\n-\t      || TYPE_MODE (type) == TYPE_MODE (float_type_node)))\n-\t  || ((fcode == BUILT_IN_FLOOR\n-\t       || fcode == BUILT_IN_CEIL\n-\t       || fcode == BUILT_IN_ROUND\n-\t       || fcode == BUILT_IN_RINT\n-\t       || fcode == BUILT_IN_TRUNC\n-\t       || fcode == BUILT_IN_NEARBYINT)\n-\t      && (TYPE_MODE (type) == TYPE_MODE (float_type_node)))))\n-    {\n-      tree fn = mathfn_built_in (type, fcode);\n-\n-      if (fn)\n-\t{\n-\t  tree arg0 = strip_float_extensions (TREE_VALUE (TREE_OPERAND (expr,\n-\t\t\t\t\t\t\t\t\t1)));\n-\t  tree arglist = build_tree_list (NULL_TREE,\n-\t\t\t\t\t  fold (convert_to_real (type, arg0)));\n-\n-\t  return build_function_call_expr (fn, arglist);\n-\t}\n-    }\n+  /* This code formerly changed (float)floor(double d) to\n+     floorf((float)d).  This is incorrect, because (float)d uses\n+     round-to-nearest and can round up to the next integer. */\n \n   /* Propagate the cast into the operation.  */\n   if (itype != type && FLOAT_TYPE_P (type))"}]}