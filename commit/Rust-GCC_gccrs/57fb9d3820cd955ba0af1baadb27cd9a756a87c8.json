{"sha": "57fb9d3820cd955ba0af1baadb27cd9a756a87c8", "node_id": "C_kwDOANBUbNoAKDU3ZmI5ZDM4MjBjZDk1NWJhMGFmMWJhYWRiMjdjZDlhNzU2YTg3Yzg", "commit": {"author": {"name": "Matthieu Eyraud", "email": "eyraud@adacore.com", "date": "2021-07-07T17:33:25Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2021-09-21T15:25:02Z"}, "message": "[Ada] SCOs: generate 'P' decisions for [Type_]Invariant pragmas\n\ngcc/ada/\n\n\t* par_sco.adb (Traverse_One): Add support for pragma Invariant /\n\tType_Invariant.", "tree": {"sha": "b67de84c27465c6dc4c5324f76c82d9d127b7225", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b67de84c27465c6dc4c5324f76c82d9d127b7225"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57fb9d3820cd955ba0af1baadb27cd9a756a87c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57fb9d3820cd955ba0af1baadb27cd9a756a87c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57fb9d3820cd955ba0af1baadb27cd9a756a87c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57fb9d3820cd955ba0af1baadb27cd9a756a87c8/comments", "author": {"login": "Jugst3r", "id": 38359364, "node_id": "MDQ6VXNlcjM4MzU5MzY0", "avatar_url": "https://avatars.githubusercontent.com/u/38359364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jugst3r", "html_url": "https://github.com/Jugst3r", "followers_url": "https://api.github.com/users/Jugst3r/followers", "following_url": "https://api.github.com/users/Jugst3r/following{/other_user}", "gists_url": "https://api.github.com/users/Jugst3r/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jugst3r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jugst3r/subscriptions", "organizations_url": "https://api.github.com/users/Jugst3r/orgs", "repos_url": "https://api.github.com/users/Jugst3r/repos", "events_url": "https://api.github.com/users/Jugst3r/events{/privacy}", "received_events_url": "https://api.github.com/users/Jugst3r/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bd413702ce3106573655490668bdf8dcd6a680c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd413702ce3106573655490668bdf8dcd6a680c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd413702ce3106573655490668bdf8dcd6a680c9"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "513275a495afea7664c3baffff24a30441813629", "filename": "gcc/ada/par_sco.adb", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fb9d3820cd955ba0af1baadb27cd9a756a87c8/gcc%2Fada%2Fpar_sco.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fb9d3820cd955ba0af1baadb27cd9a756a87c8/gcc%2Fada%2Fpar_sco.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar_sco.adb?ref=57fb9d3820cd955ba0af1baadb27cd9a756a87c8", "patch": "@@ -2248,6 +2248,8 @@ package body Par_SCO is\n                         | Name_Loop_Invariant\n                         | Name_Postcondition\n                         | Name_Precondition\n+                        | Name_Type_Invariant\n+                        | Name_Invariant\n                      =>\n                         --  For Assert/Check/Precondition/Postcondition, we\n                         --  must generate a P entry for the decision. Note\n@@ -2256,7 +2258,10 @@ package body Par_SCO is\n                         --  on when we output the decision line in Put_SCOs,\n                         --  depending on setting by Set_SCO_Pragma_Enabled.\n \n-                        if Nam = Name_Check then\n+                        if Nam = Name_Check\n+                           or else Nam = Name_Type_Invariant\n+                           or else Nam = Name_Invariant\n+                        then\n                            Next (Arg);\n                         end if;\n \n@@ -2285,8 +2290,7 @@ package body Par_SCO is\n                      --  never disabled.\n \n                      --  Should generate P decisions (not X) for assertion\n-                     --  related pragmas: [Type_]Invariant,\n-                     --  [{Static,Dynamic}_]Predicate???\n+                     --  related pragmas: [{Static,Dynamic}_]Predicate???\n \n                      when others =>\n                         Process_Decisions_Defer (N, 'X');"}]}