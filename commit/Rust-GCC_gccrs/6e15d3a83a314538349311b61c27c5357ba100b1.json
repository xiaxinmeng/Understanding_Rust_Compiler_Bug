{"sha": "6e15d3a83a314538349311b61c27c5357ba100b1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmUxNWQzYTgzYTMxNDUzODM0OTMxMWI2MWMyN2M1MzU3YmExMDBiMQ==", "commit": {"author": {"name": "Loren J. Rittle", "email": "ljrittle@acm.org", "date": "2001-08-10T17:39:34Z"}, "committer": {"name": "Loren J. Rittle", "email": "ljrittle@gcc.gnu.org", "date": "2001-08-10T17:39:34Z"}, "message": "* gnu/gcj/convert/natIconv.cc (done): Use HAVE_ICONV.\n\nFrom-SVN: r44772", "tree": {"sha": "9a04de40913d33735ab4f015545d375fc61516e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9a04de40913d33735ab4f015545d375fc61516e1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e15d3a83a314538349311b61c27c5357ba100b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e15d3a83a314538349311b61c27c5357ba100b1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e15d3a83a314538349311b61c27c5357ba100b1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e15d3a83a314538349311b61c27c5357ba100b1/comments", "author": null, "committer": null, "parents": [{"sha": "cc3835e6519606345a2e9c1cc960e0af1253cab6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc3835e6519606345a2e9c1cc960e0af1253cab6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc3835e6519606345a2e9c1cc960e0af1253cab6"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "1421e4c910db20d70f8e0898890062c1b258a33b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e15d3a83a314538349311b61c27c5357ba100b1/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e15d3a83a314538349311b61c27c5357ba100b1/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=6e15d3a83a314538349311b61c27c5357ba100b1", "patch": "@@ -1,6 +1,7 @@\n 2001-08-10  Loren J. Rittle  <ljrittle@acm.org>\n \n \t* java/lang/natObject.cc (is_mp): Protect use of _SC_NPROCESSORS_ONLN.\n+\t* gnu/gcj/convert/natIconv.cc (done): Use HAVE_ICONV.\n \n 2001-08-06  Tom Tromey  <tromey@redhat.com>\n "}, {"sha": "03fad96f1f35353c2d05b2c2af619e734c5ecdfa", "filename": "libjava/gnu/gcj/convert/natIconv.cc", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e15d3a83a314538349311b61c27c5357ba100b1/libjava%2Fgnu%2Fgcj%2Fconvert%2FnatIconv.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e15d3a83a314538349311b61c27c5357ba100b1/libjava%2Fgnu%2Fgcj%2Fconvert%2FnatIconv.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fconvert%2FnatIconv.cc?ref=6e15d3a83a314538349311b61c27c5357ba100b1", "patch": "@@ -118,6 +118,7 @@ gnu::gcj::convert::Input_iconv::read (jcharArray outbuffer,\n void\n gnu::gcj::convert::Input_iconv::done ()\n {\n+#ifdef HAVE_ICONV\n   // 50 bytes should be enough for any reset sequence.\n   size_t avail = 50;\n   char tmp[avail];\n@@ -127,6 +128,9 @@ gnu::gcj::convert::Input_iconv::done ()\n   // might be generated in that situation.\n   iconv_adapter (iconv, (iconv_t) handle, NULL, NULL, &p, &avail);\n   BytesToUnicode::done ();\n+#else /* HAVE_ICONV */\n+  // If no iconv, do nothing\n+#endif /* HAVE_ICONV */\n }\n \n void\n@@ -269,6 +273,7 @@ gnu::gcj::convert::IOConverter::iconv_init (void)\n void\n gnu::gcj::convert::Output_iconv::done ()\n {\n+#ifdef HAVE_ICONV\n   // 50 bytes should be enough for any reset sequence.\n   size_t avail = 50;\n   char tmp[avail];\n@@ -278,4 +283,7 @@ gnu::gcj::convert::Output_iconv::done ()\n   // might be generated in that situation.\n   iconv_adapter (iconv, (iconv_t) handle, NULL, NULL, &p, &avail);\n   UnicodeToBytes::done ();\n+#else /* HAVE_ICONV */\n+  // If no iconv, do nothing\n+#endif /* HAVE_ICONV */\n }"}]}