{"sha": "bf613c022efe5ef454c39d20d555c552995ec899", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY2MTNjMDIyZWZlNWVmNDU0YzM5ZDIwZDU1NWM1NTI5OTVlYzg5OQ==", "commit": {"author": {"name": "Yury Gribov", "email": "y.gribov@samsung.com", "date": "2014-06-20T10:26:55Z"}, "committer": {"name": "Maxim Ostapenko", "email": "chefmax@gcc.gnu.org", "date": "2014-06-20T10:26:55Z"}, "message": "re PR sanitizer/61530 (segfault with asan)\n\n2014-06-18  Yury Gribov  <y.gribov@samsung.com>\n\ngcc/\n\tPR sanitizer/61530\n\t* asan.c (build_check_stmt): Add condition.\n\ngcc/testsuite/\n\t* c-c++-common/asan/pr61530.c: New test.\n\t\n\nCo-Authored-By: Max Ostapenko <m.ostapenko@partner.samsung.com>\n\nFrom-SVN: r211846", "tree": {"sha": "a90cccc29da8013665a2c131a5bfee558100c135", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a90cccc29da8013665a2c131a5bfee558100c135"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf613c022efe5ef454c39d20d555c552995ec899", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf613c022efe5ef454c39d20d555c552995ec899", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf613c022efe5ef454c39d20d555c552995ec899", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf613c022efe5ef454c39d20d555c552995ec899/comments", "author": null, "committer": null, "parents": [{"sha": "803d0ab0e8ca92a0dcfa721771854c49ec3c1256", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/803d0ab0e8ca92a0dcfa721771854c49ec3c1256", "html_url": "https://github.com/Rust-GCC/gccrs/commit/803d0ab0e8ca92a0dcfa721771854c49ec3c1256"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "f26115dad532d8b85dfaa4eeb23caa3134ab51a9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bf613c022efe5ef454c39d20d555c552995ec899", "patch": "@@ -1,3 +1,9 @@\n+2014-06-20  Yury Gribov  <y.gribov@samsung.com>\n+\t    Max Ostapenko  <m.ostapenko@partner.samsung.com>\n+\n+\tPR sanitizer/61530\n+\t* asan.c (build_check_stmt): Add condition.\n+\n 2014-06-20  Martin Jambor  <mjambor@suse.cz>\n \n \tPR ipa/61211"}, {"sha": "4d87dad701144d7de68975dfb9a4de39686cb274", "filename": "gcc/asan.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2Fasan.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2Fasan.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fasan.c?ref=bf613c022efe5ef454c39d20d555c552995ec899", "patch": "@@ -1654,6 +1654,7 @@ build_check_stmt (location_t location, tree base, tree len,\n   if (size_in_bytes > 1)\n     {\n       if ((size_in_bytes & (size_in_bytes - 1)) != 0\n+\t  || !is_scalar_access\n \t  || size_in_bytes > 16)\n \tsize_in_bytes = -1;\n       else if (align && align < size_in_bytes * BITS_PER_UNIT)"}, {"sha": "ffb5caf1ad0897bddf9f17659bb52de6c0e62ae2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bf613c022efe5ef454c39d20d555c552995ec899", "patch": "@@ -1,3 +1,9 @@\n+2014-06-20  Yury Gribov  <y.gribov@samsung.com>\n+\t    Max Ostapenko  <m.ostapenko@partner.samsung.com>\n+\n+\tPR sanitizer/61530\n+\t* c-c++-common/asan/pr61530.c: New test.\n+\n 2014-06-16  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* gcc.target/aarch64/simd/vqdmulhh_lane_s16.c: New test."}, {"sha": "e306a71be93660463cd9d76a203a7661a51c5c42", "filename": "gcc/testsuite/c-c++-common/asan/pr61530.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fasan%2Fpr61530.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf613c022efe5ef454c39d20d555c552995ec899/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fasan%2Fpr61530.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fasan%2Fpr61530.c?ref=bf613c022efe5ef454c39d20d555c552995ec899", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do run } */\n+/* { dg-shouldfail \"asan\" } */\n+\n+__attribute__((noinline,noclone)) void\n+foo (char *a, char *b) {\n+  a[0] = b[0] = 0;\n+  __builtin_memcpy(a, b, 4);\n+}\n+\n+int\n+main () {\n+  char a, b;\n+  foo (&a, &b);\n+  return 0;\n+}\n+\n+/* { dg-output \"ERROR: AddressSanitizer: stack-buffer-overflow\" } */"}]}