{"sha": "31d29c406122cbefe9ee1f249c5a6f06de8cde09", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzFkMjljNDA2MTIyY2JlZmU5ZWUxZjI0OWM1YTZmMDZkZThjZGUwOQ==", "commit": {"author": {"name": "Maxim Kuvyrkov", "email": "maxim@codesourcery.com", "date": "2009-07-15T08:56:13Z"}, "committer": {"name": "Maxim Kuvyrkov", "email": "mkuvyrkov@gcc.gnu.org", "date": "2009-07-15T08:56:13Z"}, "message": "linux-unwind.h (m68k_fallback_frame_state): Update to handle 2.6.30 kernel.\n\n\t* config/m68k/linux-unwind.h (m68k_fallback_frame_state): Update to\n\thandle 2.6.30 kernel.\n\nFrom-SVN: r149663", "tree": {"sha": "4ae44f91767c6ae091e93dcceda8b3e5fecbd1b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ae44f91767c6ae091e93dcceda8b3e5fecbd1b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/31d29c406122cbefe9ee1f249c5a6f06de8cde09", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31d29c406122cbefe9ee1f249c5a6f06de8cde09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31d29c406122cbefe9ee1f249c5a6f06de8cde09", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31d29c406122cbefe9ee1f249c5a6f06de8cde09/comments", "author": null, "committer": null, "parents": [{"sha": "f6ddbf11c30d0e42e369e7b7f315a66e2e601207", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6ddbf11c30d0e42e369e7b7f315a66e2e601207", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6ddbf11c30d0e42e369e7b7f315a66e2e601207"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "d160c8d26d911eca09626ae40acce0c7d057f0f9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31d29c406122cbefe9ee1f249c5a6f06de8cde09/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31d29c406122cbefe9ee1f249c5a6f06de8cde09/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=31d29c406122cbefe9ee1f249c5a6f06de8cde09", "patch": "@@ -1,3 +1,8 @@\n+2009-07-15  Maxim Kuvyrkov  <maxim@codesourcery.com>\n+\n+\t* config/m68k/linux-unwind.h (m68k_fallback_frame_state): Update to\n+\thandle 2.6.30 kernel.\n+\n 2009-07-15  DJ Delorie  <dj@redhat.com>\n \n \t* config/mep/mep.md (sibcall_internal): Change register to allow"}, {"sha": "053c15558caaf8cf55253a09bada9d5ea43dcaff", "filename": "gcc/config/m68k/linux-unwind.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/31d29c406122cbefe9ee1f249c5a6f06de8cde09/gcc%2Fconfig%2Fm68k%2Flinux-unwind.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/31d29c406122cbefe9ee1f249c5a6f06de8cde09/gcc%2Fconfig%2Fm68k%2Flinux-unwind.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Flinux-unwind.h?ref=31d29c406122cbefe9ee1f249c5a6f06de8cde09", "patch": "@@ -77,9 +77,15 @@ m68k_fallback_frame_state (struct _Unwind_Context *context,\n       fs->regs.reg[9].how = REG_SAVED_OFFSET;\n       fs->regs.reg[9].loc.offset = (long) &sc->sc_a1 - cfa;\n \n+#ifdef __uClinux__\n+      fs->regs.reg[13].how = REG_SAVED_OFFSET;\n+      fs->regs.reg[13].loc.offset = (long) &sc->sc_a5 - cfa;\n+#endif\n+\n       fs->regs.reg[24].how = REG_SAVED_OFFSET;\n       fs->regs.reg[24].loc.offset = (long) &sc->sc_pc - cfa;\n \n+#ifndef __uClinux__\n       if (*(int *) sc->sc_fpstate)\n \t{\n \t  int *fpregs = (int *) sc->sc_fpregs;\n@@ -89,6 +95,9 @@ m68k_fallback_frame_state (struct _Unwind_Context *context,\n \t  fs->regs.reg[17].how = REG_SAVED_OFFSET;\n \t  fs->regs.reg[17].loc.offset = (long) &fpregs[M68K_FP_SIZE/4] - cfa;\n \t}\n+#elif defined __mcffpu__\n+# error Implement this when uClinux kernel is ported to an FPU architecture\n+#endif\n     }\n #ifdef __mcoldfire__\n   /* move.l #__NR_rt_sigreturn,%d0; trap #0 */"}]}