{"sha": "cd7714ee966820cc0a1fc78d54ae96d4bb47b515", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Q3NzE0ZWU5NjY4MjBjYzBhMWZjNzhkNTRhZTk2ZDRiYjQ3YjUxNQ==", "commit": {"author": {"name": "Jason Thorpe", "email": "thorpej@wasabisystems.com", "date": "2002-05-29T20:09:29Z"}, "committer": {"name": "Jason Thorpe", "email": "thorpej@gcc.gnu.org", "date": "2002-05-29T20:09:29Z"}, "message": "netbsd-elf.h (TARGET_OS_CPP_BUILTINS): Define.\n\n* config/m68k/netbsd-elf.h (TARGET_OS_CPP_BUILTINS): Define.\n(EXTRA_SPECS): Add netbsd_cpp_spec.\n(CPP_SPEC): Use %(netbsd_cpp_spec).\n(CPP_PREDEFINES): Remove.\n* config/m68k/netbsd.h (TARGET_OS_CPP_BUILTINS): Define.\n(EXTRA_SPECS): Define.\n(CPP_SPEC): Use %(netbsd_cpp_spec).\n(CPP_PREDEFINES): Remove.\n\nFrom-SVN: r54016", "tree": {"sha": "c22a5927bec357913db46e7fa2603675ed0d9cd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c22a5927bec357913db46e7fa2603675ed0d9cd6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cd7714ee966820cc0a1fc78d54ae96d4bb47b515", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd7714ee966820cc0a1fc78d54ae96d4bb47b515", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd7714ee966820cc0a1fc78d54ae96d4bb47b515", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd7714ee966820cc0a1fc78d54ae96d4bb47b515/comments", "author": null, "committer": null, "parents": [{"sha": "e7206fbc5c2615615180bf23d52727994d6b4a63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7206fbc5c2615615180bf23d52727994d6b4a63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7206fbc5c2615615180bf23d52727994d6b4a63"}], "stats": {"total": 59, "additions": 43, "deletions": 16}, "files": [{"sha": "c7942cfffefef17407ec9a5836980b8c86db1b89", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd7714ee966820cc0a1fc78d54ae96d4bb47b515/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd7714ee966820cc0a1fc78d54ae96d4bb47b515/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cd7714ee966820cc0a1fc78d54ae96d4bb47b515", "patch": "@@ -1,3 +1,14 @@\n+2002-05-29  Jason Thorpe  <thorpej@wasabisystems.com>\n+\n+\t* config/m68k/netbsd-elf.h (TARGET_OS_CPP_BUILTINS): Define.\n+\t(EXTRA_SPECS): Add netbsd_cpp_spec.\n+\t(CPP_SPEC): Use %(netbsd_cpp_spec).\n+\t(CPP_PREDEFINES): Remove.\n+\t* config/m68k/netbsd.h (TARGET_OS_CPP_BUILTINS): Define.\n+\t(EXTRA_SPECS): Define.\n+\t(CPP_SPEC): Use %(netbsd_cpp_spec).\n+\t(CPP_PREDEFINES): Remove.\n+\n 2002-05-29  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \tPR preprocessor/6844"}, {"sha": "c2d7fc0bdc540a672f8200fbcc8480620a55f1ed", "filename": "gcc/config/m68k/netbsd-elf.h", "status": "modified", "additions": 14, "deletions": 12, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd7714ee966820cc0a1fc78d54ae96d4bb47b515/gcc%2Fconfig%2Fm68k%2Fnetbsd-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd7714ee966820cc0a1fc78d54ae96d4bb47b515/gcc%2Fconfig%2Fm68k%2Fnetbsd-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fnetbsd-elf.h?ref=cd7714ee966820cc0a1fc78d54ae96d4bb47b515", "patch": "@@ -24,6 +24,17 @@ along with GNU CC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      NETBSD_OS_CPP_BUILTINS_ELF();\t\t\\\n+      builtin_define (\"__m68k__\");\t\t\\\n+      builtin_define (\"__SVR4_ABI__\");\t\t\\\n+      builtin_define (\"__motorola__\");\t\t\\\n+      builtin_assert (\"cpu=m68k\");\t\t\\\n+      builtin_assert (\"machine=m68k\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n \n /* Default target comes from config.gcc */\n #undef TARGET_DEFAULT\n@@ -44,7 +55,8 @@ Boston, MA 02111-1307, USA.  */\n   { \"cpp_cpu_default_spec\", CPP_CPU_DEFAULT_SPEC }, \\\n   { \"cpp_cpu_spec\",         CPP_CPU_SPEC }, \\\n   { \"cpp_fpu_spec\",         CPP_FPU_SPEC }, \\\n-  { \"asm_default_spec\",     ASM_DEFAULT_SPEC },\n+  { \"asm_default_spec\",     ASM_DEFAULT_SPEC }, \\\n+  { \"netbsd_cpp_spec\",      NETBSD_CPP_SPEC },\n \n \n #define CPP_CPU_SPEC \\\n@@ -80,7 +92,7 @@ Boston, MA 02111-1307, USA.  */\n \n #undef CPP_SPEC\n #define CPP_SPEC \\\n-  \"%{posix:-D_POSIX_SOURCE} %(cpp_cpu_spec) %(cpp_fpu_spec)\"\n+  \"%(netbsd_cpp_spec) %(cpp_cpu_spec) %(cpp_fpu_spec)\"\n \n \n /* Provide an ASM_SPEC appropriate for NetBSD m68k ELF targets.  We pass\n@@ -92,16 +104,6 @@ Boston, MA 02111-1307, USA.  */\n     %{m68010} %{m68020} %{m68030} %{m68040} %{m68060} \\\n     %{fpic:-k} %{fPIC:-k -K}\"\n \n-\n-/* Provide a set of CPP pre-definitions and pre-assertions appropriate\n-   for NetBSD m68k ELF targets (using the SVR4 ABI).  */\n-\n-#undef CPP_PREDEFINES\n-#define CPP_PREDEFINES \\\n-  \"-D__NetBSD__ -D__ELF__ -D__m68k__ -D__SVR4_ABI__ -D__motorola__ \\\n-   -Asystem=unix -Asystem=NetBSD -Acpu=m68k -Amachine=m68k\"\n-\n-\n /* Provide a LINK_SPEC appropriate for a NetBSD/m68k ELF target.\n    This is a copy of LINK_SPEC from <netbsd-elf.h> tweaked for\n    the m68k target.  */"}, {"sha": "6397014b89f517673813809c982023a3a74e2570", "filename": "gcc/config/m68k/netbsd.h", "status": "modified", "additions": 18, "deletions": 4, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cd7714ee966820cc0a1fc78d54ae96d4bb47b515/gcc%2Fconfig%2Fm68k%2Fnetbsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cd7714ee966820cc0a1fc78d54ae96d4bb47b515/gcc%2Fconfig%2Fm68k%2Fnetbsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fnetbsd.h?ref=cd7714ee966820cc0a1fc78d54ae96d4bb47b515", "patch": "@@ -1,3 +1,16 @@\n+#define TARGET_OS_CPP_BUILTINS()\t\t\\\n+  do\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\\\n+      NETBSD_OS_CPP_BUILTINS_AOUT();\t\t\\\n+      builtin_define_std (\"unix\");\t\t\\\n+      builtin_define_std (\"m68k\");\t\t\\\n+      builtin_define_std (\"mc68000\");\t\t\\\n+      builtin_define_std (\"mc68020\");\t\t\\\n+      builtin_assert (\"cpu=m68k\");\t\t\\\n+      builtin_assert (\"machine=m68k\");\t\t\\\n+    }\t\t\t\t\t\t\\\n+  while (0)\n+\n #include <m68k/m68k.h>\n \n /* Get generic NetBSD definitions.  */\n@@ -7,18 +20,19 @@\n \n #define TARGET_DEFAULT (MASK_BITFIELD|MASK_68881|MASK_68020)\n \n+#define EXTRA_SPECS \\\n+  { \"netbsd_cpp_spec\",      NETBSD_CPP_SPEC },\n+\n /* Define __HAVE_68881__ in preprocessor, unless -msoft-float is specified.\n    This will control the use of inline 68881 insns in certain macros.  */\n \n #undef CPP_SPEC\n-#define CPP_SPEC \"%{!msoft-float:-D__HAVE_68881__ -D__HAVE_FPU__} %{posix:-D_POSIX_SOURCE}\"\n+#define CPP_SPEC \\\n+  \"%{!msoft-float:-D__HAVE_68881__ -D__HAVE_FPU__} %(netbsd_cpp_spec)\"\n \n #undef ASM_SPEC\n #define ASM_SPEC \" %| %{m68030} %{m68040} %{m68060} %{fpic:-k} %{fPIC:-k -K}\"\n \n-/* Names to predefine in the preprocessor for this target machine.  */\n-\n-#define CPP_PREDEFINES \"-Dunix -Dm68k -Dmc68000 -Dmc68020 -D__NetBSD__ -Asystem=unix -Asystem=NetBSD -Acpu=m68k -Amachine=m68k\"\n \f\n /* Make gcc agree with <machine/ansi.h> */\n "}]}