{"sha": "ca6b370dc88ac9d5767684408e7e1010744fbd26", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E2YjM3MGRjODhhYzlkNTc2NzY4NDQwOGU3ZTEwMTA3NDRmYmQyNg==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-10-08T22:48:52Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-10-08T22:48:52Z"}, "message": "Thu Oct  8 23:42:08 1998  Jeffrey A Law  (law@cygnus.com)\n        * Merge egcs & devo libiberty.\n\nFrom-SVN: r22941", "tree": {"sha": "db156264d4fcd0d567148ca585d09c09abd9ff20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db156264d4fcd0d567148ca585d09c09abd9ff20"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca6b370dc88ac9d5767684408e7e1010744fbd26", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca6b370dc88ac9d5767684408e7e1010744fbd26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca6b370dc88ac9d5767684408e7e1010744fbd26", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca6b370dc88ac9d5767684408e7e1010744fbd26/comments", "author": null, "committer": null, "parents": [{"sha": "8398bbfb8fdfb6c9bbd70738c316bcb0870c5bd3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8398bbfb8fdfb6c9bbd70738c316bcb0870c5bd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8398bbfb8fdfb6c9bbd70738c316bcb0870c5bd3"}], "stats": {"total": 318, "additions": 205, "deletions": 113}, "files": [{"sha": "a06b64bb72c1d9f8f278d27ce1272d130acc982e", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 89, "deletions": 11, "changes": 100, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=ca6b370dc88ac9d5767684408e7e1010744fbd26", "patch": "@@ -1,3 +1,7 @@\n+Thu Oct  8 23:42:08 1998  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* Merge egcs & devo libiberty.\n+\n 1998-09-08  Martin von L\ufffdwis  <loewis@informatik.hu-berlin.de>\n \n \t* cplus-dem.c (demangle_arm_pt): Demangle anonymous namespaces.\n@@ -20,6 +24,12 @@ Sat Sep  5 03:24:49 1998  Jeffrey A Law  (law@cygnus.com)\n \t* getopt1.c, obstack.c: Similarly.\n \t* Makefile.in: Build mkstemp.o\n \n+Tue Sep  1 23:12:47 1998  Christopher Faylor <cgf@cygnus.com>\n+\n+\t* configure.in: Include asprintf in list of functions known not\n+\tto be in newlib.\n+\t* configure: Rebuild.\n+\n Wed Aug 19 14:05:01 1998  Mumit Khan  <khan@xraylith.wisc.edu>\n \n \t* cplus-dem.c (work_stuff): Add dllimported.\n@@ -36,6 +46,35 @@ Mon Aug 17 10:40:34 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \t* cplus-dem.c: Include config.h if it exists.  Also, only\n \tprototype malloc/realloc if we can't get stdlib.h.\n \n+Sat Aug 15 16:15:01 1998  Ian Lance Taylor  <ian@cygnus.com>\n+\n+\t* configure.in: Switch back to checking --with-target-subdir when\n+\tdeciding whether to check for newlib, undoing part of July 15\n+\tchange.\n+\t* configure: Rebuild.\n+\n+Thu Aug 13 16:47:38 1998  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* cplus-dem.c (type_kind_t): New type.\n+\t(demangle_template_value_parm): Add type_kind_t parameter.  Rely\n+\ton this paramter, rather than demangling the type again.\n+\t(demangle_integral_value): Pass tk_integral.\n+\t(demangle_template_: Pass the value returned from do_type.\n+\t(do_type): Return a type_kind_t.  Pass tk_integral to\n+\tdemangle_template_value_parm for array bounds.\n+\t(demangle_fund_type): Likewise.\n+\n+\tAlso incorporate from GCC version:\n+\n+\tTue Jul 21 13:28:19 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* cplus-dem.c (do_type): Use demangle_template_value_parm for arrays.\n+\n+Thu Aug 13 16:47:38 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* cplus-dem.c (demangle_nested_args): Make function definition\n+\tstatic to match the prototype.\n+\n Tue Jul 28 11:33:09 1998  Mark Mitchell  <mark@markmitchell.com>\n \n \t* cplus-dem.c (type_kind_t): New type.\n@@ -53,16 +92,32 @@ Tue Jul 28 11:33:09 1998  Mark Mitchell  <mark@markmitchell.com>\n \n \t* cplus-dem.c (do_type): Use demangle_template_value_parm for arrays.\n \n+Mon Jul 27 12:16:08 1998  Ian Lance Taylor  <ian@cygnus.com>\n+\n+\t* Makefile.in (ALLOCA): New variable.\n+\t($(TARGETLIB)): Add $(ALLOCA) to library.\n+\t(needed-list): Add $(ALLOCA).\n+\t($(ALLOCA)): Depend upon stamp-picdir.\n+\n Sun Jul 19 08:23:17 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* cplus-dem.c (demangle_nested_args): Make function definition\n \tstatic to match the prototype.\n \n-1998-07-13  Mark Mitchell  <mark@markmitchell.com>\n+Wed Jul 15 00:12:58 1998  Ian Lance Taylor  <ian@cygnus.com>\n+\n+\t* configure.in: Check --with-cross-host rather than\n+\t--with-target-subdir when deciding whether build uses a cross\n+\tcompiler, and when deciding where to install the library.\n+\t* configure: Rebuild.\n+\n+Sun Jul 12 01:27:05 1998  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* cplus-dem.c (demangle_nested_args): Return a value.\n \n-\t* cplus-dem.c: Incorporate changes from GCC version not present in\n-\tthe libiberty version:\n-\t(string): Move definition before work_stuff.\n+Sat Jul 11 16:19:48 1998  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* cplus-dem.c (string): Move definition before work_stuff.\n \t(work_stuff): Add volatile_type, forgetting_types,\n \tprevious_argument, and nrepeats fields.\n \t(SCOPE_STRING): New macro.\n@@ -91,23 +146,46 @@ Sun Jul 19 08:23:17 1998  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \t(do_arg): Improve commment.  Handle 'n' repeat code.\n \t(remember_type): Check forgetting_types.\n \t(demangle_args): Deal with 'n' repeat codes.  Tidy.\n+\t\n+Thu Jul  2 16:26:24 1998  Ian Lance Taylor  <ian@cygnus.com>\n+\n+\t* config.table: Only use mh-fbsd21 on *-*-freebsd2.2.[012], not on\n+\t*-*-freebsd2.2.*.  From Dmitrij Tejblum <tejblum@arc.hq.cti.ru>.\n+\n+Mon Jun 15 16:29:01 1998  Ian Lance Taylor  <ian@cygnus.com>\n+\n+\t* configure.in (setobjs): Correct quoting error in cygwin32 case.\n+\tFrom Chris Faylor <cgf@cygnus.com>.\n+\n+Mon Jun  1 13:47:55 1998  Jason Molenda  (crash@bugshack.cygnus.com)\n+\n+\t* obstack.c: Update to latest FSF version.\n+\n+Mon Jun  1 14:17:36 1998  Mike Stump  <mrs@wrs.com>\n+\n+\t* Makefile.in: Add a dependency on stamp-picdir for the\n+\tobjects, so that we can do a parallel build.\n \n Sat May 30 22:17:13 1998  Mumit Khan  <khan@xraylith.wisc.edu>\n \n \t* configure.in (checkfuncs): Add missing \"'\".\n \n-Fri May 22 11:06:41 1998  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n+Fri May 29 12:40:41 1998  Jason Molenda  (crash@bugshack.cygnus.com)\n \n-\t* Makefile.in (distclean): Don't remove alloca-conf.h\n+\t* obstack.c (_obstack_memory_used):  Elide this function if we're\n+\ton a system with GNU libc.\n \n-Fri May 22 01:38:07 1998  Hans-Peter Nilsson  <hp@axis.se>\n+Tue May 26 18:28:43 1998  Ian Lance Taylor  <ian@cygnus.com>\n \n-\t* cplus-dem.c (MBUF_SIZE): Bumped from 512 to 32767.\n+\t* Makefile.in (distclean): Remove config.log.\n \n-Fri May 22 01:19:28 1998  Mike Stump  <mrs@wrs.com>\n+Tue May 26 15:01:52 1998  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>\n \n-\t* Makefile.in: Add a dependency on stamp-picdir for the\n-\tobjects, so that we can do a parallel build.\n+\t* Makefile.in (distclean): Don't remove alloca-conf.h.\n+\n+Fri May 22 01:38:07 1998  Hans-Peter Nilsson  <hp@axis.se>\n+\n+\t* cplus-dem.c (MBUF_SIZE): Bumped from 512 to 32767.\n \n 1998-05-21  Mark Mitchell  <mmitchell@usa.net>\n "}, {"sha": "606e0cf50386904dc5b2e1482b3ae198ca56b286", "filename": "libiberty/Makefile.in", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FMakefile.in?ref=ca6b370dc88ac9d5767684408e7e1010744fbd26", "patch": "@@ -64,6 +64,7 @@ MAKEOVERRIDES =\n TARGETLIB = libiberty.a\n \n LIBOBJS = @LIBOBJS@\n+ALLOCA = @ALLOCA@\n \n # A configuration can specify extra .o files that should be included,\n # even if they are in libc. (Perhaps the libc version is buggy.)\n@@ -127,10 +128,10 @@ REQUIRED_OFILES = argv.o choose-temp.o concat.o cplus-dem.o \\\n   floatformat.o mkstemp.o objalloc.o obstack.o pexecute.o spaces.o strerror.o \\\n   strsignal.o xatexit.o xexit.o xmalloc.o xstrdup.o xstrerror.o\n \n-$(TARGETLIB): $(REQUIRED_OFILES) $(EXTRA_OFILES) $(LIBOBJS)\n+$(TARGETLIB): $(REQUIRED_OFILES) $(EXTRA_OFILES) $(LIBOBJS) $(ALLOCA)\n \trm -f $(TARGETLIB)\n \t$(AR) $(AR_FLAGS) $(TARGETLIB) \\\n-\t  $(REQUIRED_OFILES) $(EXTRA_OFILES) $(LIBOBJS)\n+\t  $(REQUIRED_OFILES) $(EXTRA_OFILES) $(LIBOBJS) $(ALLOCA)\n \t$(RANLIB) $(TARGETLIB)\n \n INSTALL_DEST = @INSTALL_DEST@\n@@ -150,7 +151,7 @@ install_to_tooldir: all\n \n # needed-list is used by libstdc++.\n needed-list: Makefile\n-\tf=\"$(LIBOBJS) $(EXTRA_OFILES)\"; \\\n+\tf=\"$(LIBOBJS) $(ALLOCA) $(EXTRA_OFILES)\"; \\\n \tcase $$f in \\\n \t  *alloca.o*) f=\"$$f xmalloc.o xexit.o\" ;; \\\n \tesac; \\\n@@ -196,6 +197,7 @@ clean: mostlyclean\n distclean: clean\n \t@$(MULTICLEAN) multi-clean DO=distclean\n \trm -f *~ Makefile config.status xhost-mkfrag TAGS multilib.out\n+\trm -f config.log\n maintainer-clean realclean: distclean\n \n force:\n@@ -210,7 +212,7 @@ stamp-h: config.in config.status\n config.status: $(srcdir)/configure $(srcdir)/config.table\n \t$(SHELL) ./config.status --recheck\n \n-$(REQUIRED_OFILES) $(EXTRA_OFILES) $(LIBOBJS): stamp-picdir\n+$(REQUIRED_OFILES) $(EXTRA_OFILES) $(LIBOBJS) $(ALLOCA): stamp-picdir\n \n alloca.o: config.h\n atexit.o: config.h"}, {"sha": "00944f319e8d51037e1a08d09ddb7e6b27e9acbe", "filename": "libiberty/config.table", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2Fconfig.table", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2Fconfig.table", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfig.table?ref=ca6b370dc88ac9d5767684408e7e1010744fbd26", "patch": "@@ -3,7 +3,7 @@ case \"${host}\" in\n                         frag=mh-aix ;;\n   *-*-cxux7*)\t\tfrag=mh-cxux7 ;;\n   *-*-freebsd2.1.*)\tfrag=mh-fbsd21 ;;\n-  *-*-freebsd2.2.*)\tfrag=mh-fbsd21 ;;\n+  *-*-freebsd2.2.[012])\tfrag=mh-fbsd21 ;;\n   i[345]86-*-windows*)\tfrag=mh-windows ;;\n esac\n "}, {"sha": "6843ccf0366a6384a371f5406b1ac98a55adc9e4", "filename": "libiberty/configure", "status": "modified", "additions": 99, "deletions": 90, "changes": 189, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=ca6b370dc88ac9d5767684408e7e1010744fbd26", "patch": "@@ -12,7 +12,9 @@ ac_help=\n ac_default_prefix=/usr/local\n # Any additions from configure.in:\n ac_help=\"$ac_help\n-  --with-target-subdir=SUBDIR      Configuring with a cross compiler\"\n+  --with-target-subdir=SUBDIR      Configuring in a subdirectory\"\n+ac_help=\"$ac_help\n+  --with-cross-host=HOST           Configuring with a cross compiler\"\n ac_help=\"$ac_help\n   --with-newlib                    Configuring with newlib\"\n \n@@ -530,6 +532,12 @@ if test \"${with_target_subdir+set}\" = set; then\n   :\n fi\n \n+# Check whether --with-cross-host or --without-cross-host was given.\n+if test \"${with_cross_host+set}\" = set; then\n+  withval=\"$with_cross_host\"\n+  :\n+fi\n+\n # Check whether --with-newlib or --without-newlib was given.\n if test \"${with_newlib+set}\" = set; then\n   withval=\"$with_newlib\"\n@@ -577,7 +585,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:581: checking host system type\" >&5\n+echo \"configure:589: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -600,7 +608,7 @@ echo \"$ac_t\"\"$host\" 1>&6\n \n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:604: checking build system type\" >&5\n+echo \"configure:612: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -626,7 +634,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:630: checking for $ac_word\" >&5\n+echo \"configure:638: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -657,7 +665,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:661: checking for $ac_word\" >&5\n+echo \"configure:669: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -688,7 +696,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:692: checking for $ac_word\" >&5\n+echo \"configure:700: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -732,7 +740,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:736: checking for $ac_word\" >&5\n+echo \"configure:744: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -761,7 +769,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:765: checking for $ac_word\" >&5\n+echo \"configure:773: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -809,7 +817,7 @@ fi\n fi\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:813: checking whether we are using GNU C\" >&5\n+echo \"configure:821: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -818,7 +826,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:822: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:830: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -833,7 +841,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:837: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:845: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -862,7 +870,7 @@ fi\n \n \n echo $ac_n \"checking for POSIXized ISC\"\"... $ac_c\" 1>&6\n-echo \"configure:866: checking for POSIXized ISC\" >&5\n+echo \"configure:874: checking for POSIXized ISC\" >&5\n if test -d /etc/conf/kconfig.d &&\n   grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1\n then\n@@ -900,7 +908,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:904: checking for a BSD compatible install\" >&5\n+echo \"configure:912: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -959,7 +967,7 @@ host_makefile_frag=${frag}\n # able to link anything, it had better be able to at least compile\n # something.\n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:963: checking how to run the C preprocessor\" >&5\n+echo \"configure:971: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -974,13 +982,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 978 \"configure\"\n+#line 986 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:984: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:992: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -991,13 +999,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 995 \"configure\"\n+#line 1003 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1001: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1009: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -1023,17 +1031,17 @@ for ac_hdr in sys/file.h sys/param.h stdlib.h string.h unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1027: checking for $ac_hdr\" >&5\n+echo \"configure:1035: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1032 \"configure\"\n+#line 1040 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1037: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1045: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1111,12 +1119,12 @@ if test \"x\" = \"y\"; then\n   for ac_func in asprintf atexit basename bcmp bcopy bzero clock getcwd\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1115: checking for $ac_func\" >&5\n+echo \"configure:1123: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1120 \"configure\"\n+#line 1128 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1139,7 +1147,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1143: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1151: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1166,12 +1174,12 @@ done\n   for ac_func in getpagesize index insque memchr memcmp memcpy memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1170: checking for $ac_func\" >&5\n+echo \"configure:1178: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1175 \"configure\"\n+#line 1183 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1194,7 +1202,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1198: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1206: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1221,12 +1229,12 @@ done\n   for ac_func in memset random rename rindex sigsetmask strcasecmp\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1225: checking for $ac_func\" >&5\n+echo \"configure:1233: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1230 \"configure\"\n+#line 1238 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1249,7 +1257,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1253: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1261: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1276,12 +1284,12 @@ done\n   for ac_func in strchr strdup strncasecmp strrchr strstr strtod strtol\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1280: checking for $ac_func\" >&5\n+echo \"configure:1288: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1285 \"configure\"\n+#line 1293 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1304,7 +1312,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1308: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1316: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1331,12 +1339,12 @@ done\n   for ac_func in strtoul tmpnam vasprintf vfprintf vprintf vsprintf waitpid\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1335: checking for $ac_func\" >&5\n+echo \"configure:1343: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1340 \"configure\"\n+#line 1348 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1359,7 +1367,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1363: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1371: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1398,12 +1406,12 @@ EOF\n   for ac_func in getrusage on_exit psignal strerror strsignal sysconf times\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1402: checking for $ac_func\" >&5\n+echo \"configure:1410: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1407 \"configure\"\n+#line 1415 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1426,7 +1434,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1430: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1438: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1460,20 +1468,21 @@ fi\n setobjs=\n if test -n \"${with_target_subdir}\"; then\n \n-  # We are being configured with a cross compiler.  AC_REPLACE_FUNCS\n+  # We are being configured as a target library.  AC_REPLACE_FUNCS\n   # may not work correctly, because the compiler may not be able to\n-  # link executables.\n+  # link executables.  Note that we may still be being configured\n+  # native.\n \n   # If we are being configured for newlib, we know which functions\n   # newlib provide and which ones we will be expected to provide.\n \n   if test \"x${with_newlib}\" = \"xyes\"; then\n     ALLOCA=\"alloca.o\"\n-    LIBOBJS=\"basename.o insque.o random.o strdup.o vasprintf.o\"\n+    LIBOBJS=\"asprintf.o basename.o insque.o random.o strdup.o vasprintf.o\"\n \n     for f in $funcs; do\n       case \"$f\" in\n-\tbasename | insque | random | strdup | vasprintf)\n+\tasprintf | basename | insque | random | strdup | vasprintf)\n \t  ;;\n \t*)\n \t  n=HAVE_`echo $f | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n@@ -1488,7 +1497,7 @@ EOF\n     # newlib doesnt provide any of the variables in $vars, so we\n     # dont have to check them here.\n \n-    # Of the functions in $checkfuncs, VxWorks only has strerror.\n+    # Of the functions in $checkfuncs, newlib only has strerror.\n     cat >> confdefs.h <<\\EOF\n #define HAVE_STRERROR 1\n EOF\n@@ -1580,7 +1589,7 @@ EOF\n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1584: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1593: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1590,11 +1599,11 @@ ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS\n cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext <<EOF\n-#line 1594 \"configure\"\n+#line 1603 \"configure\"\n #include \"confdefs.h\"\n main(){return(0);}\n EOF\n-if { (eval echo configure:1598: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1607: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1614,19 +1623,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1618: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1627: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1625: checking for $ac_func\" >&5\n+echo \"configure:1634: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1630 \"configure\"\n+#line 1639 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1649,7 +1658,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1653: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1662: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1678,19 +1687,19 @@ done\n   # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1682: checking for working alloca.h\" >&5\n+echo \"configure:1691: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1687 \"configure\"\n+#line 1696 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:1694: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1703: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -1711,12 +1720,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1715: checking for alloca\" >&5\n+echo \"configure:1724: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1720 \"configure\"\n+#line 1729 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -1739,7 +1748,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:1743: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1752: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -1771,12 +1780,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:1775: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:1784: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1780 \"configure\"\n+#line 1789 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -1801,12 +1810,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1805: checking for $ac_func\" >&5\n+echo \"configure:1814: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1810 \"configure\"\n+#line 1819 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1829,7 +1838,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1833: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1842: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1856,15 +1865,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1860: checking stack direction for C alloca\" >&5\n+echo \"configure:1869: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1868 \"configure\"\n+#line 1877 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -1883,7 +1892,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:1887: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1896: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -1905,20 +1914,20 @@ EOF\n fi\n \n   echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1909: checking for ANSI C header files\" >&5\n+echo \"configure:1918: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1914 \"configure\"\n+#line 1923 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1922: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1931: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1935,7 +1944,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1939 \"configure\"\n+#line 1948 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1953,7 +1962,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1957 \"configure\"\n+#line 1966 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1974,7 +1983,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1978 \"configure\"\n+#line 1987 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1985,7 +1994,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1989: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1998: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -2009,12 +2018,12 @@ EOF\n fi\n \n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2013: checking for pid_t\" >&5\n+echo \"configure:2022: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2018 \"configure\"\n+#line 2027 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2043,17 +2052,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2047: checking for vfork.h\" >&5\n+echo \"configure:2056: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2052 \"configure\"\n+#line 2061 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2057: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2066: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2078,18 +2087,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2082: checking for working vfork\" >&5\n+echo \"configure:2091: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2088: checking for vfork\" >&5\n+echo \"configure:2097: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2093 \"configure\"\n+#line 2102 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2112,7 +2121,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2116: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2125: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2134,7 +2143,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2138 \"configure\"\n+#line 2147 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2229,7 +2238,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2233: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2242: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2256,19 +2265,19 @@ fi\n   fi\n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:2260: checking for $v\" >&5\n+echo \"configure:2269: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2265 \"configure\"\n+#line 2274 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v; p = &$v;\n ; return 0; }\n EOF\n-if { (eval echo configure:2272: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2281: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -2294,12 +2303,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2298: checking for $ac_func\" >&5\n+echo \"configure:2307: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2303 \"configure\"\n+#line 2312 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2322,7 +2331,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2326: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2335: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2350,7 +2359,7 @@ fi\n \n # Install a library built with a cross compiler in $(tooldir) rather\n # than $(libdir).\n-if test -z \"${with_target_subdir}\"; then\n+if test -z \"${with_cross_host}\"; then\n   INSTALL_DEST=libdir\n else\n   INSTALL_DEST=tooldir"}, {"sha": "5ce8b609aad84a70333a56a91cb11873cb49e11f", "filename": "libiberty/configure.in", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca6b370dc88ac9d5767684408e7e1010744fbd26/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=ca6b370dc88ac9d5767684408e7e1010744fbd26", "patch": "@@ -5,7 +5,9 @@ AC_INIT(pexecute.c)\n \n dnl We use these options to decide which functions to include.\n AC_ARG_WITH(target-subdir,\n-[  --with-target-subdir=SUBDIR      Configuring with a cross compiler])\n+[  --with-target-subdir=SUBDIR      Configuring in a subdirectory])\n+AC_ARG_WITH(cross-host,\n+[  --with-cross-host=HOST           Configuring with a cross compiler])\n AC_ARG_WITH(newlib,\n [  --with-newlib                    Configuring with newlib])\n \n@@ -173,20 +175,21 @@ fi\n setobjs=\n if test -n \"${with_target_subdir}\"; then\n \n-  # We are being configured with a cross compiler.  AC_REPLACE_FUNCS\n+  # We are being configured as a target library.  AC_REPLACE_FUNCS\n   # may not work correctly, because the compiler may not be able to\n-  # link executables.\n+  # link executables.  Note that we may still be being configured\n+  # native.\n \n   # If we are being configured for newlib, we know which functions\n   # newlib provide and which ones we will be expected to provide.\n \n   if test \"x${with_newlib}\" = \"xyes\"; then\n     ALLOCA=\"alloca.o\"\n-    LIBOBJS=\"basename.o insque.o random.o strdup.o vasprintf.o\"\n+    LIBOBJS=\"asprintf.o basename.o insque.o random.o strdup.o vasprintf.o\"\n \n     for f in $funcs; do\n       case \"$f\" in\n-\tbasename | insque | random | strdup | vasprintf)\n+\tasprintf | basename | insque | random | strdup | vasprintf)\n \t  ;;\n \t*)\n \t  n=HAVE_`echo $f | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n@@ -198,7 +201,7 @@ if test -n \"${with_target_subdir}\"; then\n     # newlib doesnt provide any of the variables in $vars, so we\n     # dont have to check them here.\n \n-    # Of the functions in $checkfuncs, VxWorks only has strerror.\n+    # Of the functions in $checkfuncs, newlib only has strerror.\n     AC_DEFINE(HAVE_STRERROR)\n \n     setobjs=yes\n@@ -300,7 +303,7 @@ fi\n \n # Install a library built with a cross compiler in $(tooldir) rather\n # than $(libdir).\n-if test -z \"${with_target_subdir}\"; then\n+if test -z \"${with_cross_host}\"; then\n   INSTALL_DEST=libdir\n else\n   INSTALL_DEST=tooldir"}]}