{"sha": "5667c33d018a6f97ce58985a46c6f4e6e545f034", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY2N2MzM2QwMThhNmY5N2NlNTg5ODVhNDZjNmY0ZTZlNTQ1ZjAzNA==", "commit": {"author": {"name": "David Billinghurst", "email": "David.Billinghurst@riotinto.com", "date": "2002-02-11T22:53:09Z"}, "committer": {"name": "David Billinghurst", "email": "billingd@gcc.gnu.org", "date": "2002-02-11T22:53:09Z"}, "message": "class.c (build_utf8_ref): Move declaration of decl_size\n\n2002-02-12  David Billinghurst <Davod.Billinghurst@riotinto.com>\n\n\t* class.c(build_utf8_ref): Move declaration of decl_size\n\nFrom-SVN: r49688", "tree": {"sha": "e7be4a3b6d9c87db33d18b2ea834ac8d980beb7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7be4a3b6d9c87db33d18b2ea834ac8d980beb7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5667c33d018a6f97ce58985a46c6f4e6e545f034", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5667c33d018a6f97ce58985a46c6f4e6e545f034", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5667c33d018a6f97ce58985a46c6f4e6e545f034", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5667c33d018a6f97ce58985a46c6f4e6e545f034/comments", "author": null, "committer": null, "parents": [{"sha": "a02ac96696de10ffaf30cfdfac8a54b599368a2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a02ac96696de10ffaf30cfdfac8a54b599368a2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a02ac96696de10ffaf30cfdfac8a54b599368a2d"}], "stats": {"total": 33, "additions": 20, "deletions": 13}, "files": [{"sha": "e82fda9f1d58c2d2f1021efb839bea690dd5800b", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5667c33d018a6f97ce58985a46c6f4e6e545f034/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5667c33d018a6f97ce58985a46c6f4e6e545f034/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=5667c33d018a6f97ce58985a46c6f4e6e545f034", "patch": "@@ -1,3 +1,7 @@\n+2002-02-12  David Billinghurst <Davod.Billinghurst@riotinto.com>\n+\n+\t* class.c(build_utf8_ref): Move declaration of decl_size\n+\n 2002-02-07  Tom Tromey  <tromey@redhat.com>\n \n \t* gcj.texi (Input Options): --CLASSPATH does not suppress system"}, {"sha": "5a799feda9625bf8c0cc1783d2e3373e9089993c", "filename": "gcc/java/class.c", "status": "modified", "additions": 16, "deletions": 13, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5667c33d018a6f97ce58985a46c6f4e6e545f034/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5667c33d018a6f97ce58985a46c6f4e6e545f034/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=5667c33d018a6f97ce58985a46c6f4e6e545f034", "patch": "@@ -967,7 +967,7 @@ build_utf8_ref (name)\n   char buf[60];\n   tree ctype, field = NULL_TREE, str_type, cinit, string;\n   static int utf8_count = 0;\n-  int name_hash, decl_size;\n+  int name_hash;\n   tree ref = IDENTIFIER_UTF8_REF (name);\n   tree decl;\n   if (ref != NULL_TREE)\n@@ -1001,18 +1001,21 @@ build_utf8_ref (name)\n   TREE_THIS_VOLATILE (decl) = 0;\n   DECL_INITIAL (decl) = cinit;\n #ifdef HAVE_GAS_SHF_MERGE\n-  /* Ensure decl_size is a multiple of utf8const_type's alignment. */\n-  decl_size = (name_len + 5 + TYPE_ALIGN_UNIT (utf8const_type) - 1)\n-\t       & ~(TYPE_ALIGN_UNIT (utf8const_type) - 1);\n-  if (flag_merge_constants && decl_size < 256)\n-    {\n-      char buf[32];\n-      int flags = (SECTION_OVERRIDE\n-\t\t   | SECTION_MERGE | (SECTION_ENTSIZE & decl_size));\n-      sprintf (buf, \".rodata.jutf8.%d\", decl_size);\n-      named_section_flags (buf, flags);\n-      DECL_SECTION_NAME (decl) = build_string (strlen (buf), buf);\n-    }\n+  {\n+    int decl_size;\n+    /* Ensure decl_size is a multiple of utf8const_type's alignment. */\n+    decl_size = (name_len + 5 + TYPE_ALIGN_UNIT (utf8const_type) - 1)\n+\t         & ~(TYPE_ALIGN_UNIT (utf8const_type) - 1);\n+    if (flag_merge_constants && decl_size < 256)\n+      {\n+        char buf[32];\n+        int flags = (SECTION_OVERRIDE\n+        \t   | SECTION_MERGE | (SECTION_ENTSIZE & decl_size));\n+        sprintf (buf, \".rodata.jutf8.%d\", decl_size);\n+        named_section_flags (buf, flags);\n+        DECL_SECTION_NAME (decl) = build_string (strlen (buf), buf);\n+      }\n+  }\n #endif\n   TREE_CHAIN (decl) = utf8_decl_list;\n   layout_decl (decl, 0);"}]}