{"sha": "f94ae2f5c0d797557bd800a5e313b0083310834a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk0YWUyZjVjMGQ3OTc1NTdiZDgwMGE1ZTMxM2IwMDgzMzEwODM0YQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-03-30T10:56:25Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-03-30T10:56:25Z"}, "message": "tree.c (member_p): New fn.\n\n\t* tree.c (member_p): New fn.\n\t* decl2.c (finish_file): Only set DECL_STATIC_FUNCTION_P for\n\tinitializing class members.\n\t* cp-tree.def (TEMPLATE_PARM_INDEX): Class 'x'.\n\t* ptree.c (lang_print_xnode): Handle TEMPLATE_PARM_INDEX.\n\nFrom-SVN: r18909", "tree": {"sha": "b08d530f6d88dec32d59a69c6659e7844957685c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b08d530f6d88dec32d59a69c6659e7844957685c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f94ae2f5c0d797557bd800a5e313b0083310834a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f94ae2f5c0d797557bd800a5e313b0083310834a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f94ae2f5c0d797557bd800a5e313b0083310834a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f94ae2f5c0d797557bd800a5e313b0083310834a/comments", "author": null, "committer": null, "parents": [{"sha": "7bae46f4b2043eea685ca1a5e153c60f2ad34447", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bae46f4b2043eea685ca1a5e153c60f2ad34447", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bae46f4b2043eea685ca1a5e153c60f2ad34447"}], "stats": {"total": 33, "additions": 30, "deletions": 3}, "files": [{"sha": "f7d586f8c99d9955f1290a2a20acff1a74d0ae09", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f94ae2f5c0d797557bd800a5e313b0083310834a", "patch": "@@ -1,5 +1,12 @@\n Mon Mar 30 08:55:42 1998  Jason Merrill  <jason@yorick.cygnus.com>\n \n+\t* tree.c (member_p): New fn.\n+\t* decl2.c (finish_file): Only set DECL_STATIC_FUNCTION_P for\n+\tinitializing class members.\n+\n+\t* cp-tree.def (TEMPLATE_PARM_INDEX): Class 'x'.\n+\t* ptree.c (lang_print_xnode): Handle TEMPLATE_PARM_INDEX.\n+\n \t* call.c (build_method_call): Handle non-scoped destructors, too.\n \t* pt.c (tsubst_copy): Likewise.\n "}, {"sha": "5ee7500bfb5b937b06cfd15139f098c945b7f8e2", "filename": "gcc/cp/cp-tree.def", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Fcp-tree.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Fcp-tree.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.def?ref=f94ae2f5c0d797557bd800a5e313b0083310834a", "patch": "@@ -120,7 +120,7 @@ DEFTREECODE (TEMPLATE_DECL, \"template_decl\", 'd', 0)\n    The LEVEL is the level of the parameter when we are worrying about\n    the types of things; the ORIG_LEVEL is the level when we are\n    worrying about instantiating things.  */\n-DEFTREECODE (TEMPLATE_PARM_INDEX, \"template_parm_index\", 'c', \n+DEFTREECODE (TEMPLATE_PARM_INDEX, \"template_parm_index\", 'x', \n \t     /* The addition of (sizeof(char*) - 1) in the next\n \t\texpression is to ensure against the case where\n \t\tsizeof(char*) does not evenly divide"}, {"sha": "e65d85547d6a324ebb5576ed9d7672d8ea468135", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=f94ae2f5c0d797557bd800a5e313b0083310834a", "patch": "@@ -3007,8 +3007,12 @@ finish_file ()\n \n \t      /* 9.5p5: The initializer of a static member of a class has\n \t\t the same access rights as a member function.  */\n-\t      DECL_CLASS_CONTEXT (current_function_decl) = DECL_CONTEXT (decl);\n-\t      DECL_STATIC_FUNCTION_P (current_function_decl) = 1;\n+\t      if (member_p (decl))\n+\t\t{\n+\t\t  DECL_CLASS_CONTEXT (current_function_decl)\n+\t\t    = DECL_CONTEXT (decl);\n+\t\t  DECL_STATIC_FUNCTION_P (current_function_decl) = 1;\n+\t\t}\n \n \t      if (protect)\n \t\t{"}, {"sha": "fa749973e3cebbf4ddb1897cb3a9c6b598c7e841", "filename": "gcc/cp/ptree.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Fptree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Fptree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fptree.c?ref=f94ae2f5c0d797557bd800a5e313b0083310834a", "patch": "@@ -175,6 +175,12 @@ lang_print_xnode (file, node, indent)\n       print_node (file, \"value\", BINDING_VALUE (node), indent+4);\n       print_node (file, \"chain\", TREE_CHAIN (node), indent+4);\n       break;\n+    case TEMPLATE_PARM_INDEX:\n+      indent_to (file, indent + 3);\n+      fprintf (file, \"index %d level %d orig_level %d\",\n+\t       TEMPLATE_PARM_IDX (node), TEMPLATE_PARM_LEVEL (node),\n+\t       TEMPLATE_PARM_ORIG_LEVEL (node));\n+      break;\n     default:\n       break;\n     }"}, {"sha": "52a148ade87af1d5382391ecac1aff9c0cd067e3", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f94ae2f5c0d797557bd800a5e313b0083310834a/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=f94ae2f5c0d797557bd800a5e313b0083310834a", "patch": "@@ -2183,3 +2183,13 @@ varargs_function_p (function)\n       return 0;\n   return 1;\n }\n+\n+/* Returns 1 if decl is a member of a class.  */\n+\n+int\n+member_p (decl)\n+     tree decl;\n+{\n+  tree ctx = DECL_CONTEXT (decl);\n+  return (ctx && TREE_CODE_CLASS (TREE_CODE (ctx)) == 't');\n+}"}]}