{"sha": "71641c15a697e6553cd3f27d104fb8a6aaeeab23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE2NDFjMTVhNjk3ZTY1NTNjZDNmMjdkMTA0ZmI4YTZhYWVlYWIyMw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-02-18T20:44:44Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-02-18T20:44:44Z"}, "message": "* mips.c (mips_expand_prologue) Add REG_MAYBE_DEAD to\n        structure shift insns.\n\nFrom-SVN: r39848", "tree": {"sha": "84431a91af5c4df0946f2157bd5213c6d1c608cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84431a91af5c4df0946f2157bd5213c6d1c608cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71641c15a697e6553cd3f27d104fb8a6aaeeab23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71641c15a697e6553cd3f27d104fb8a6aaeeab23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71641c15a697e6553cd3f27d104fb8a6aaeeab23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71641c15a697e6553cd3f27d104fb8a6aaeeab23/comments", "author": null, "committer": null, "parents": [{"sha": "69a59a49f66f5996ff5c89b739399db0fbd66588", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69a59a49f66f5996ff5c89b739399db0fbd66588", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69a59a49f66f5996ff5c89b739399db0fbd66588"}], "stats": {"total": 22, "additions": 18, "deletions": 4}, "files": [{"sha": "b76448443294421e10f3bdabf733bb4e4631a905", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71641c15a697e6553cd3f27d104fb8a6aaeeab23/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71641c15a697e6553cd3f27d104fb8a6aaeeab23/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=71641c15a697e6553cd3f27d104fb8a6aaeeab23", "patch": "@@ -1,4 +1,9 @@\n-2001-02-17  Mark Mitchell  <mark@codesourcery.com>\n+2001-02-18  Shane Nay  <shane@agendacomputing.com>\n+\n+\t* mips.c (mips_expand_prologue) Add REG_MAYBE_DEAD to \n+\tstructure shift insns.\n+\n+2001-02-18  Mark Mitchell  <mark@codesourcery.com>\n \n \t* invoke.texi (-fsquangle): Remove documentation.\n \t(-fname-mangling-version): Likewise."}, {"sha": "74c548ca73ded0b6ea2cae935f77e0fcbd0b9424", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71641c15a697e6553cd3f27d104fb8a6aaeeab23/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71641c15a697e6553cd3f27d104fb8a6aaeeab23/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=71641c15a697e6553cd3f27d104fb8a6aaeeab23", "patch": "@@ -7115,13 +7115,22 @@ mips_expand_prologue ()\n \n       for (i = 0; i < num; i++)\n \t{\n-\t  rtx pattern = RTVEC_ELT (adjust, i);\n+\t  rtx insn, pattern;\n+\n+\t  pattern = RTVEC_ELT (adjust, i);\n \t  if (GET_CODE (pattern) != SET\n \t      || GET_CODE (SET_SRC (pattern)) != ASHIFT)\n \t    abort_with_insn (pattern, \"Insn is not a shift\");\n-\n \t  PUT_CODE (SET_SRC (pattern), ASHIFTRT);\n-\t  emit_insn (pattern);\n+\n+\t  insn = emit_insn (pattern);\n+\n+\t  /* Global life information isn't valid at this point, so we\n+\t     can't check whether these shifts are actually used.  Mark\n+\t     them MAYBE_DEAD so that flow2 will remove them, and not\n+\t     complain about dead code in the prologue.  */\n+\t  REG_NOTES(insn) = gen_rtx_EXPR_LIST (REG_MAYBE_DEAD, NULL_RTX,\n+\t\t\t\t\t       REG_NOTES (insn));\n \t}\n     }\n "}]}