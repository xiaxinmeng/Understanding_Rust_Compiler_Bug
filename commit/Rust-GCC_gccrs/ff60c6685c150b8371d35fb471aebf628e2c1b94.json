{"sha": "ff60c6685c150b8371d35fb471aebf628e2c1b94", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY2MGM2Njg1YzE1MGI4MzcxZDM1ZmI0NzFhZWJmNjI4ZTJjMWI5NA==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2008-07-27T17:40:04Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2008-07-27T17:40:04Z"}, "message": "re PR c++/36944 (Revision 138123 breaks constructors with default arguments)\n\ngcc/cp/\n\n2008-07-27  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR c++/36944\n\t* class.c (type_has_user_provided_default_constructor): Handle\n\tdefault parameters.\n\ngcc/testsuite/\n\n2008-07-27  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR c++/36944\n\t* g++.dg/other/pr36944.C: New.\n\nFrom-SVN: r138194", "tree": {"sha": "bf63c1aa1a17ac9a534c474ad3030bed8db34f11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bf63c1aa1a17ac9a534c474ad3030bed8db34f11"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff60c6685c150b8371d35fb471aebf628e2c1b94", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff60c6685c150b8371d35fb471aebf628e2c1b94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff60c6685c150b8371d35fb471aebf628e2c1b94", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff60c6685c150b8371d35fb471aebf628e2c1b94/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "330e765e13717fc4a294302419355a393f000428", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/330e765e13717fc4a294302419355a393f000428", "html_url": "https://github.com/Rust-GCC/gccrs/commit/330e765e13717fc4a294302419355a393f000428"}], "stats": {"total": 51, "additions": 46, "deletions": 5}, "files": [{"sha": "6a13613d860eaca8d7a7919b817c019c8782c886", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ff60c6685c150b8371d35fb471aebf628e2c1b94", "patch": "@@ -1,3 +1,9 @@\n+2008-07-27  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR c++/36944\n+\t* class.c (type_has_user_provided_default_constructor): Handle\n+\tdefault parameters.\n+\n 2008-07-27  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* decl.c (push_library_fn): Add a parameter for the exceptions that"}, {"sha": "f7e46a717aaf49e62c821ef6621a576442ec1dee", "filename": "gcc/cp/class.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=ff60c6685c150b8371d35fb471aebf628e2c1b94", "patch": "@@ -4107,7 +4107,7 @@ type_has_user_provided_constructor (tree t)\n bool\n type_has_user_provided_default_constructor (tree t)\n {\n-  tree fns;\n+  tree fns, args;\n \n   if (!TYPE_HAS_USER_CONSTRUCTOR (t))\n     return false;\n@@ -4116,10 +4116,14 @@ type_has_user_provided_default_constructor (tree t)\n     {\n       tree fn = OVL_CURRENT (fns);\n       if (TREE_CODE (fn) == FUNCTION_DECL\n-\t  && user_provided_p (fn)\n-\t  && (skip_artificial_parms_for (fn, DECL_ARGUMENTS (fn))\n-\t      == NULL_TREE))\n-\treturn true;\n+\t  && user_provided_p (fn))\n+\t{\n+\t  args = FUNCTION_FIRST_USER_PARMTYPE (fn);\n+\t  while (args && TREE_PURPOSE (args))\n+\t    args = TREE_CHAIN (args);\n+\t  if (!args || args == void_list_node)\n+\t    return true;\n+\t}\n     }\n \n   return false;"}, {"sha": "c32bc3d7d8bf7749af0830fe0b394f318b51cd56", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ff60c6685c150b8371d35fb471aebf628e2c1b94", "patch": "@@ -1,3 +1,8 @@\n+2008-07-27  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR c++/36944\n+\t* g++.dg/other/pr36944.C: New.\n+\n 2008-07-27  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/36724"}, {"sha": "b4a1dfa46fdff202ef586733db63c380481c4c4e", "filename": "gcc/testsuite/g++.dg/other/pr36944.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr36944.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff60c6685c150b8371d35fb471aebf628e2c1b94/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr36944.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fpr36944.C?ref=ff60c6685c150b8371d35fb471aebf628e2c1b94", "patch": "@@ -0,0 +1,26 @@\n+/* { dg-do compile } */\n+\n+class XObject\n+{\n+public:\n+  int foo;\n+};\n+\n+class XObjectPtr\n+{\n+public:\n+ explicit\n+ XObjectPtr(XObject* theXObject = 0) : m_xobjectPtr(theXObject)\n+ {\n+ }\n+\n+private:\n+ XObject * m_xobjectPtr;\n+};\n+\n+class SelectionEvent\n+{\n+public:\n+ SelectionEvent(bool selection) : m_selection() {}\n+ const XObjectPtr m_selection;\n+};"}]}