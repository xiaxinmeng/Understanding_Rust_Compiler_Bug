{"sha": "9515381d1cf44d4c897ac0aeee89d555d82fdd7f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUxNTM4MWQxY2Y0NGQ0Yzg5N2FjMGFlZWU4OWQ1NTVkODJmZGQ3Zg==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@gmail.com", "date": "2018-11-18T10:25:24Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2018-11-18T10:25:24Z"}, "message": "Allow target to override gnu-user.h crti and crtn\n\nAlso give target access to the gnu-user.h LINK_GCC_C_SEQUENCE_SPEC.\n\n\t* config/gnu-user.h (GNU_USER_TARGET_CRTI): Define.\n\t(GNU_USER_TARGET_STARTFILE_SPEC): Use it here.\n\t(GNU_USER_TARGET_CRTN): Define.\n\t(GNU_USER_TARGET_ENDFILE_SPEC): Use it here.\n\t(GNU_USER_TARGET_LINK_GCC_C_SEQUENCE_SPEC): Define.\n\nFrom-SVN: r266250", "tree": {"sha": "ea82708e4d7de364142384ebb902b98ff7286a75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea82708e4d7de364142384ebb902b98ff7286a75"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9515381d1cf44d4c897ac0aeee89d555d82fdd7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9515381d1cf44d4c897ac0aeee89d555d82fdd7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9515381d1cf44d4c897ac0aeee89d555d82fdd7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9515381d1cf44d4c897ac0aeee89d555d82fdd7f/comments", "author": {"login": "amodra", "id": 6006325, "node_id": "MDQ6VXNlcjYwMDYzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amodra", "html_url": "https://github.com/amodra", "followers_url": "https://api.github.com/users/amodra/followers", "following_url": "https://api.github.com/users/amodra/following{/other_user}", "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}", "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amodra/subscriptions", "organizations_url": "https://api.github.com/users/amodra/orgs", "repos_url": "https://api.github.com/users/amodra/repos", "events_url": "https://api.github.com/users/amodra/events{/privacy}", "received_events_url": "https://api.github.com/users/amodra/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "003fc14b5b74ab203d693e2a4f30c25bd280daf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/003fc14b5b74ab203d693e2a4f30c25bd280daf8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/003fc14b5b74ab203d693e2a4f30c25bd280daf8"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "62dd38eef7b70ba70732a38dc7ba0abcd12007a7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9515381d1cf44d4c897ac0aeee89d555d82fdd7f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9515381d1cf44d4c897ac0aeee89d555d82fdd7f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9515381d1cf44d4c897ac0aeee89d555d82fdd7f", "patch": "@@ -1,3 +1,11 @@\n+2018-11-18  Alan Modra  <amodra@gmail.com>\n+\n+\t* config/gnu-user.h (GNU_USER_TARGET_CRTI): Define.\n+\t(GNU_USER_TARGET_STARTFILE_SPEC): Use it here.\n+\t(GNU_USER_TARGET_CRTN): Define.\n+\t(GNU_USER_TARGET_ENDFILE_SPEC): Use it here.\n+\t(GNU_USER_TARGET_LINK_GCC_C_SEQUENCE_SPEC): Define.\n+\n 2018-11-18  Alan Modra  <amodra@gmail.com>\n \n \t* config/gnu-user.h (GNU_USER_TARGET_STARTFILE_SPEC): Delete"}, {"sha": "09170d416b83969af07e8b1e7af5a0ebbf528d49", "filename": "gcc/config/gnu-user.h", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9515381d1cf44d4c897ac0aeee89d555d82fdd7f/gcc%2Fconfig%2Fgnu-user.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9515381d1cf44d4c897ac0aeee89d555d82fdd7f/gcc%2Fconfig%2Fgnu-user.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fgnu-user.h?ref=9515381d1cf44d4c897ac0aeee89d555d82fdd7f", "patch": "@@ -40,6 +40,9 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #define CRTOFFLOADEND \"\"\n #endif\n \n+#define GNU_USER_TARGET_CRTI \"crti.o%s\"\n+#define GNU_USER_TARGET_CRTN \"crtn.o%s\"\n+\n /* Provide a STARTFILE_SPEC appropriate for GNU userspace.  Here we add\n    the GNU userspace magical crtbegin.o file (see crtstuff.c) which\n    provides part of the support for getting C++ file-scope static\n@@ -51,8 +54,8 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n      static:crt1.o%s; \\\n      static-pie:rcrt1.o%s; \\\n      \" PIE_SPEC \":Scrt1.o%s; \\\n-     :crt1.o%s} \\\n-   crti.o%s \\\n+     :crt1.o%s} \" \\\n+   GNU_USER_TARGET_CRTI \" \\\n    %{static:crtbeginT.o%s; \\\n      shared|static-pie|\" PIE_SPEC \":crtbeginS.o%s; \\\n      :crtbegin.o%s} \\\n@@ -75,8 +78,8 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n      fvtable-verify=std:vtv_end.o%s} \\\n    %{static:crtend.o%s; \\\n      shared|static-pie|\" PIE_SPEC \":crtendS.o%s; \\\n-     :crtend.o%s} \\\n-   crtn.o%s \" \\\n+     :crtend.o%s} \" \\\n+   GNU_USER_TARGET_CRTN \" \" \\\n    CRTOFFLOADEND\n #undef  ENDFILE_SPEC\n #define ENDFILE_SPEC GNU_USER_TARGET_ENDFILE_SPEC\n@@ -106,11 +109,13 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #define LINK_EH_SPEC \"%{!static|static-pie:--eh-frame-hdr} \"\n #endif\n \n-#undef LINK_GCC_C_SEQUENCE_SPEC\n-#define LINK_GCC_C_SEQUENCE_SPEC \\\n+#define GNU_USER_TARGET_LINK_GCC_C_SEQUENCE_SPEC \\\n   \"%{static|static-pie:--start-group} %G %{!nolibc:%L} \\\n    %{static|static-pie:--end-group}%{!static:%{!static-pie:%G}}\"\n \n+#undef LINK_GCC_C_SEQUENCE_SPEC\n+#define LINK_GCC_C_SEQUENCE_SPEC GNU_USER_TARGET_LINK_GCC_C_SEQUENCE_SPEC\n+\n /* Use --as-needed -lgcc_s for eh support.  */\n #ifdef HAVE_LD_AS_NEEDED\n #define USE_LD_AS_NEEDED 1"}]}