{"sha": "a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTZkMTBlODAxMTliOGRjNzdmN2U4ZDc5MWNiZDA1NDZhNGIwYWEyMg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2012-01-17T14:52:42Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-01-17T14:52:42Z"}, "message": "gospec.c (lang_specific_driver): If we see -S without -o, add -o BASE.s rather than -o BASE.o.\n\n\t* gospec.c (lang_specific_driver): If we see -S without -o, add -o\n\tBASE.s rather than -o BASE.o.\n\nFrom-SVN: r183248", "tree": {"sha": "450c67c91976dd6284e71bcd8f1ebefe6a30474e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/450c67c91976dd6284e71bcd8f1ebefe6a30474e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22/comments", "author": null, "committer": null, "parents": [{"sha": "4df0f7da3775139a40ef3b4a6fbcdb1413097b26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4df0f7da3775139a40ef3b4a6fbcdb1413097b26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4df0f7da3775139a40ef3b4a6fbcdb1413097b26"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "662b50ed4862e60f3b53b0ec7f328e185cde296d", "filename": "gcc/go/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22/gcc%2Fgo%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22/gcc%2Fgo%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2FChangeLog?ref=a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22", "patch": "@@ -1,3 +1,8 @@\n+2012-01-17  Ian Lance Taylor  <iant@google.com>\n+\n+\t* gospec.c (lang_specific_driver): If we see -S without -o, add -o\n+\tBASE.s rather than -o BASE.o.\n+\n 2012-01-11  Ian Lance Taylor  <iant@google.com>\n \n \t* go-lang.c (go_langhook_init): Initialize void_list_node before"}, {"sha": "8e8aa2dd2de4228534e53538a23482c975b25323", "filename": "gcc/go/gospec.c", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22/gcc%2Fgo%2Fgospec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22/gcc%2Fgo%2Fgospec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgospec.c?ref=a6d10e80119b8dc77f7e8d791cbd0546a4b0aa22", "patch": "@@ -1,5 +1,5 @@\n /* gospec.c -- Specific flags and argument handling of the gcc Go front end.\n-   Copyright (C) 2009, 2010, 2011 Free Software Foundation, Inc.\n+   Copyright (C) 2009, 2010, 2011, 2012 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -109,6 +109,9 @@ lang_specific_driver (struct cl_decoded_option **in_decoded_options,\n   /* Whether the -o option was used.  */\n   bool saw_opt_o = false;\n \n+  /* Whether the -S option was used.  */\n+  bool saw_opt_S = false;\n+\n   /* The first input file with an extension of .go.  */\n   const char *first_go_file = NULL;  \n \n@@ -163,7 +166,6 @@ lang_specific_driver (struct cl_decoded_option **in_decoded_options,\n \t  break;\n \n \tcase OPT_c:\n-\tcase OPT_S:\n \tcase OPT_E:\n \tcase OPT_M:\n \tcase OPT_MM:\n@@ -173,6 +175,11 @@ lang_specific_driver (struct cl_decoded_option **in_decoded_options,\n \t  library = -1;\n \t  break;\n \n+\tcase OPT_S:\n+\t  saw_opt_S = true;\n+\t  library = -1;\n+\t  break;\n+\n \tcase OPT_o:\n \t  saw_opt_o = true;\n \t  break;\n@@ -280,10 +287,13 @@ lang_specific_driver (struct cl_decoded_option **in_decoded_options,\n       alen = baselen + 3;\n       out = XNEWVEC (char, alen);\n       memcpy (out, base, baselen);\n-      /* The driver will convert .o to some other suffix if\n-\t appropriate.  */\n+      /* The driver will convert .o to some other suffix (e.g., .obj)\n+\t if appropriate.  */\n       out[baselen] = '.';\n-      out[baselen + 1] = 'o';\n+      if (saw_opt_S)\n+\tout[baselen + 1] = 's';\n+      else\n+\tout[baselen + 1] = 'o';\n       out[baselen + 2] = '\\0';\n       generate_option (OPT_o, out, 1, CL_DRIVER,\n \t\t       &new_decoded_options[j]);"}]}