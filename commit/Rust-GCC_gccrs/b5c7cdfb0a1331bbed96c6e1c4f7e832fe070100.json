{"sha": "b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjVjN2NkZmIwYTEzMzFiYmVkOTZjNmUxYzRmN2U4MzJmZTA3MDEwMA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2012-09-12T16:26:19Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2012-09-12T16:26:19Z"}, "message": "re PR lto/54312 (uniquify_nodes takes 12% of Mozilla LTO build)\n\n\n\tPR lto/54312\n\t* lto.c (uniquify_nodes): Remove quadratic loop checking if the\n\ttype is variant leader.\n\nFrom-SVN: r191228", "tree": {"sha": "3c32d98bbad6bcd8730d3f989890132168b65b84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c32d98bbad6bcd8730d3f989890132168b65b84"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100/comments", "author": null, "committer": null, "parents": [{"sha": "ed56b7f958ffab960ccad757c510d718bc85b0b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed56b7f958ffab960ccad757c510d718bc85b0b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed56b7f958ffab960ccad757c510d718bc85b0b6"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "85d59b23faf431125565c834537b3ffe76385c27", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100", "patch": "@@ -1,3 +1,9 @@\n+2012-09-11  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR lto/54312\n+\t* lto.c (uniquify_nodes): Remove quadratic loop checking if the\n+\ttype is variant leader.\n+\n 2012-09-11  Richard Guenther  <rguenther@suse.de>\n \n \t* lto.c (enum gtc_mode): Remove."}, {"sha": "c87ad6cfb06407c8f7e4a27b91ad66ef3ee62793", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=b5c7cdfb0a1331bbed96c6e1c4f7e832fe070100", "patch": "@@ -1850,17 +1850,17 @@ uniquify_nodes (struct data_in *data_in, unsigned from)\n \t     variant list state before fixup is broken.  */\n \t  tree tem, mv;\n \n+#ifdef ENABLE_CHECKING\n \t  /* Remove us from our main variant list if we are not the\n \t     variant leader.  */\n \t  if (TYPE_MAIN_VARIANT (t) != t)\n \t    {\n \t      tem = TYPE_MAIN_VARIANT (t);\n \t      while (tem && TYPE_NEXT_VARIANT (tem) != t)\n \t\ttem = TYPE_NEXT_VARIANT (tem);\n-\t      if (tem)\n-\t\tTYPE_NEXT_VARIANT (tem) = TYPE_NEXT_VARIANT (t);\n-\t      TYPE_NEXT_VARIANT (t) = NULL_TREE;\n+\t      gcc_assert (!tem && !TYPE_NEXT_VARIANT (t));\n \t    }\n+#endif\n \n \t  /* Query our new main variant.  */\n \t  mv = GIMPLE_REGISTER_TYPE (TYPE_MAIN_VARIANT (t));"}]}