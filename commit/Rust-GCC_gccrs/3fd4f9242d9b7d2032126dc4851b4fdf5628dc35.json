{"sha": "3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZkNGY5MjQyZDliN2QyMDMyMTI2ZGM0ODUxYjRmZGY1NjI4ZGMzNQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2019-11-05T16:59:41Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2019-11-05T16:59:41Z"}, "message": "[PR c++/92370] ICE with VC marker\n\nhttps://gcc.gnu.org/ml/gcc-patches/2019-11/msg00323.html\n\tcp/\n\tPR c++/92370\n\t* parser.c (cp_parser_error_1): Check EOF and UNKNOWN_LOCATION\n\twhen skipping over version control marker.\n\n\ttestsuite/\n\tPR c++/92370\n\t* g++.dg/pr92370.C: New.\n\nFrom-SVN: r277853", "tree": {"sha": "4695f86233e960ab7da052354dec811c70c88f87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4695f86233e960ab7da052354dec811c70c88f87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b00460cb14ef64b3bc5348eef94aa177c642d4b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b00460cb14ef64b3bc5348eef94aa177c642d4b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b00460cb14ef64b3bc5348eef94aa177c642d4b4"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "4d9d56755f32ae5593cf0ac623c86f9f7a49ca52", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "patch": "@@ -1,3 +1,9 @@\n+2019-11-05  Nathan Sidwell  <nathan@acm.org>\n+\n+\tPR c++/92370\n+\t* parser.c (cp_parser_error_1): Check EOF and UNKNOWN_LOCATION\n+\twhen skipping over version control marker.\n+\n 2019-11-05  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/92343"}, {"sha": "bce7161a086094dd104aae011dc1808a79d584d4", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "patch": "@@ -2890,12 +2890,16 @@ cp_parser_error_1 (cp_parser* parser, const char* gmsgid,\n \t  error_at (loc, \"version control conflict marker in file\");\n \t  expanded_location token_exploc = expand_location (token->location);\n \t  /* Consume tokens until the end of the source line.  */\n-\t  while (1)\n+\t  for (;;)\n \t    {\n \t      cp_lexer_consume_token (parser->lexer);\n \t      cp_token *next = cp_lexer_peek_token (parser->lexer);\n-\t      if (next == NULL)\n+\t      if (next->type == CPP_EOF)\n \t\tbreak;\n+\t      if (next->location == UNKNOWN_LOCATION\n+\t\t  || loc == UNKNOWN_LOCATION)\n+\t\tbreak;\n+\n \t      expanded_location next_exploc = expand_location (next->location);\n \t      if (next_exploc.file != token_exploc.file)\n \t\tbreak;"}, {"sha": "37c446913c2767f30b9369665856d06b68d3d85b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "patch": "@@ -1,3 +1,8 @@\n+2019-11-05  Nathan Sidwell  <nathan@acm.org>\n+\n+\tPR c++/92370\n+\t* g++.dg/pr92370.C: New.\n+\n 2019-11-04  Martin Sebor  <msebor@redhat.com>\n \n \tPR middle-end/92341"}, {"sha": "8f0019a884e06378e92eeb943bcb67dcb714b890", "filename": "gcc/testsuite/g++.dg/pr92370.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr92370.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fd4f9242d9b7d2032126dc4851b4fdf5628dc35/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr92370.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr92370.C?ref=3fd4f9242d9b7d2032126dc4851b4fdf5628dc35", "patch": "@@ -0,0 +1,3 @@\n+// PR 92370 ICE with conlict marker\n+\n+<<<<<<<>>>>>>> // { dg-error \"conflict marker\" }"}]}