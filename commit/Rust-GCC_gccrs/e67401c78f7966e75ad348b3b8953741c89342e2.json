{"sha": "e67401c78f7966e75ad348b3b8953741c89342e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY3NDAxYzc4Zjc5NjZlNzVhZDM0OGIzYjg5NTM3NDFjODkzNDJlMg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2011-02-19T21:02:35Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2011-02-19T21:02:35Z"}, "message": "re PR tree-optimization/46620 (32-bit structures containing bitfields are not copied correctly on -O2 , x86 backend)\n\nPR tree-optimization/46620\n* gcc.dg/pr46620.c: New.\n\nFrom-SVN: r170325", "tree": {"sha": "e5698bb165efa254c80775514567d4e6af690a56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5698bb165efa254c80775514567d4e6af690a56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e67401c78f7966e75ad348b3b8953741c89342e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e67401c78f7966e75ad348b3b8953741c89342e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e67401c78f7966e75ad348b3b8953741c89342e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e67401c78f7966e75ad348b3b8953741c89342e2/comments", "author": null, "committer": null, "parents": [{"sha": "b2cddfc892d0a59afb01941407873271415e1d9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2cddfc892d0a59afb01941407873271415e1d9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2cddfc892d0a59afb01941407873271415e1d9d"}], "stats": {"total": 81, "additions": 81, "deletions": 0}, "files": [{"sha": "db9b51d32919125b46404ced5d41d9b5adb640d9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e67401c78f7966e75ad348b3b8953741c89342e2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e67401c78f7966e75ad348b3b8953741c89342e2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e67401c78f7966e75ad348b3b8953741c89342e2", "patch": "@@ -1,3 +1,8 @@\n+2011-02-19  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR tree-optimization/46620\n+\t* gcc.dg/pr46620.c: New.\n+\n 2011-02-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c/47809"}, {"sha": "8cc71ebbb180d285e40a92b4b5759002606c1f2a", "filename": "gcc/testsuite/gcc.dg/pr46620.c", "status": "added", "additions": 76, "deletions": 0, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e67401c78f7966e75ad348b3b8953741c89342e2/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46620.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e67401c78f7966e75ad348b3b8953741c89342e2/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46620.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46620.c?ref=e67401c78f7966e75ad348b3b8953741c89342e2", "patch": "@@ -0,0 +1,76 @@\n+/* PR tree-optimization/46620 */\n+/* SRA bitfield grouping used to lose track at padding bitfields in\n+   the middle of a word.  */\n+/* { dg-do run } */\n+/* { dg-options \"-O2\" } */\n+\n+#include <stdlib.h>\n+\n+struct PCT\n+{\n+  unsigned char\tpi1\t: 4;\n+  unsigned char\tpi2\t: 3;\n+  unsigned char\tpif\t: 5;\n+\n+  unsigned char\tsl\t: 2;\n+  unsigned char\tuc\t: 1;\n+  unsigned char\tst\t: 1;\n+\n+  unsigned char\tp\t: 1;\n+  unsigned char\tcs\t: 1;\n+  unsigned char\tss\t: 1;\n+\n+  unsigned char\tpc\t: 3;\n+  unsigned char\tdmv\t: 4;\n+  unsigned char\tcv\t: 4;\n+};\n+\n+struct rt\n+{\n+  struct rt*\t\td;\n+  void (*edo)(void * const);\n+  short\t\t\tlId;\n+  char          dac;\n+};\n+\n+struct pedr\n+{\n+  struct rt re;\n+  struct PCT pc;\n+  unsigned char mid;\n+} ;\n+\n+void __attribute__((__noinline__))\n+rei(struct rt* const me, unsigned short anId, void *ad )\n+{\n+  asm volatile (\"\");\n+}\n+\n+void __attribute__((__noinline__))\n+pedrdo(void * const p)\n+{\n+  asm volatile (\"\");\n+}\n+\n+void __attribute__((__noinline__))\n+pedri (struct pedr* const  me, struct PCT ppc, unsigned char pmid)\n+{\n+  rei(&(me->re), 0x7604, 0);\n+  me->pc = ppc;\n+  me->mid = pmid;\n+  (me)->re.edo = pedrdo;\n+}\n+\n+int main()\n+{\n+  struct PCT ps;\n+  struct pedr pm;\n+\n+  pm.pc.dmv = 0;\n+  ps.dmv = 1;\n+  pedri(&pm, ps, 32);\n+\n+  if (pm.pc.dmv != 1)\n+    abort ();\n+  exit (0);\n+}"}]}