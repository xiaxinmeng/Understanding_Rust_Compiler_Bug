{"sha": "b4d4e33ddd745043583cbd4e05226dc441ac57bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjRkNGUzM2RkZDc0NTA0MzU4M2NiZDRlMDUyMjZkYzQ0MWFjNTdiZA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-19T03:19:18Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-19T03:19:18Z"}, "message": "(finish_decl): After preserve_initializer call, set\nTREE_PERMANENT bit in initializer.\n\nFrom-SVN: r5800", "tree": {"sha": "6f5c94a2c7f42e717116179fb5d0eec7a45afeba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6f5c94a2c7f42e717116179fb5d0eec7a45afeba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b4d4e33ddd745043583cbd4e05226dc441ac57bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4d4e33ddd745043583cbd4e05226dc441ac57bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b4d4e33ddd745043583cbd4e05226dc441ac57bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b4d4e33ddd745043583cbd4e05226dc441ac57bd/comments", "author": null, "committer": null, "parents": [{"sha": "2a23b99d28e5dd21731a486c6e085a3a0879cd20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a23b99d28e5dd21731a486c6e085a3a0879cd20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a23b99d28e5dd21731a486c6e085a3a0879cd20"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "888f9be676eca51e5a177179eb155d8a9d5c0da3", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b4d4e33ddd745043583cbd4e05226dc441ac57bd/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b4d4e33ddd745043583cbd4e05226dc441ac57bd/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=b4d4e33ddd745043583cbd4e05226dc441ac57bd", "patch": "@@ -3565,7 +3565,14 @@ finish_decl (decl, init, asmspec_tree)\n \t     initializer instead of discarding it so that we can optimize\n \t     references to it.  */\n \t  if (TREE_STATIC (decl) && TREE_READONLY (decl))\n-\t    preserve_initializer ();\n+\t    {\n+\t      preserve_initializer ();\n+\t      /* Hack?  Set the permanent bit for something that is permanent,\n+\t\t but not on the permenent obstack, so as to convince\n+\t\t output_constant_def to make its rtl on the permanent\n+\t\t obstack.  */\n+\t      TREE_PERMANENT (DECL_INITIAL (decl)) = 1;\n+\t    }\n \t  else\n \t    DECL_INITIAL (decl) = error_mark_node;\n \t}"}]}