{"sha": "cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JkYjRiYTJkY2YwMTNjOWVlNGIxZjI4MTgyNTk2YWI5YWUxMzVjNQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2003-06-15T13:36:07Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2003-06-15T13:36:07Z"}, "message": "* gencheck.c (main): Avoid generating duplicate macros.\n\nFrom-SVN: r67974", "tree": {"sha": "8dc04abc6c35d920aca6b99fee3c42ba914df9c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8dc04abc6c35d920aca6b99fee3c42ba914df9c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5/comments", "author": null, "committer": null, "parents": [{"sha": "9d5b9daeb91118c0b3b9f8fbce2f074917d292bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d5b9daeb91118c0b3b9f8fbce2f074917d292bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d5b9daeb91118c0b3b9f8fbce2f074917d292bc"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "79f01d31b0053166a08d916164f3ce3cbb8a1a2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5", "patch": "@@ -15,6 +15,8 @@\n \n 2003-06-15  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n+\t* gencheck.c (main): Avoid generating duplicate macros.\n+\n \t* Makefile.in (stagefeedback-start): Use $(SUBDIRS) instead of\n \tknowing names of language subdirectories.\n "}, {"sha": "aedd4965530d013c9d3726cd3d784d4de09f7bad", "filename": "gcc/gencheck.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5/gcc%2Fgencheck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5/gcc%2Fgencheck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgencheck.c?ref=cbdb4ba2dcf013c9ee4b1f28182596ab9ae135c5", "patch": "@@ -44,7 +44,7 @@ usage (void)\n int\n main (int argc, char **argv ATTRIBUTE_UNUSED)\n {\n-  int i;\n+  int i, j;\n \n   switch (argc)\n     {\n@@ -60,10 +60,18 @@ main (int argc, char **argv ATTRIBUTE_UNUSED)\n   puts (\"#ifndef GCC_TREE_CHECK_H\");\n   puts (\"#define GCC_TREE_CHECK_H\\n\");\n \n+  /* Print macros for checks based on each of the tree code names.  However,\n+     since we include the tree nodes from all languages, we must check\n+     for duplicate names to avoid defining the same macro twice.  */\n   for (i = 0; tree_codes[i]; i++)\n     {\n-      printf (\"#define %s_CHECK(t)\\tTREE_CHECK (t, %s)\\n\",\n-\t      tree_codes[i], tree_codes[i]);\n+      for (j = 0; j < i; j++)\n+\tif (strcmp (tree_codes[i], tree_codes[j]) == 0)\n+\t  break;\n+\n+      if (i == j)\n+\tprintf (\"#define %s_CHECK(t)\\tTREE_CHECK (t, %s)\\n\",\n+\t\ttree_codes[i], tree_codes[i]);\n     }\n \n   puts (\"\\n#endif /* GCC_TREE_CHECK_H */\");"}]}