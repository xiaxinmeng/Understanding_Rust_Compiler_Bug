{"sha": "a9a302d9f272cd36af49ce47863f79ef13eb9c3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTlhMzAyZDlmMjcyY2QzNmFmNDljZTQ3ODYzZjc5ZWYxM2ViOWMzYQ==", "commit": {"author": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2014-04-06T15:17:41Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2014-04-06T15:17:41Z"}, "message": "re PR debug/55794 (FAIL: g++.dg/debug/dwarf2/non-virtual-thunk.C -std=gnu++98 and -std=gnu++11)\n\n\tPR debug/55794\n\t* config/pa/pa.c (pa_output_function_epilogue): Skip address and code\n\tsize accounting for thunks.\n\t(pa_asm_output_mi_thunk): Use final_start_function() and\n\tfinal_end_function() to output function start and end directives.\n\nFrom-SVN: r209163", "tree": {"sha": "c102081e90d2f8b561245f905223d831098460f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c102081e90d2f8b561245f905223d831098460f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9a302d9f272cd36af49ce47863f79ef13eb9c3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9a302d9f272cd36af49ce47863f79ef13eb9c3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9a302d9f272cd36af49ce47863f79ef13eb9c3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9a302d9f272cd36af49ce47863f79ef13eb9c3a/comments", "author": null, "committer": null, "parents": [{"sha": "cce24f8eee4a7941cd6ba6a3000ab2702828c8fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cce24f8eee4a7941cd6ba6a3000ab2702828c8fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cce24f8eee4a7941cd6ba6a3000ab2702828c8fe"}], "stats": {"total": 28, "additions": 15, "deletions": 13}, "files": [{"sha": "80a39f85ccc5323ea6f50a9b48d53ccdd3ad2f40", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9a302d9f272cd36af49ce47863f79ef13eb9c3a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9a302d9f272cd36af49ce47863f79ef13eb9c3a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a9a302d9f272cd36af49ce47863f79ef13eb9c3a", "patch": "@@ -1,3 +1,11 @@\n+2014-04-06  John David Anglin  <danglin@gcc.gnu.org>\n+\n+\tPR debug/55794\n+\t* config/pa/pa.c (pa_output_function_epilogue): Skip address and code\n+\tsize accounting for thunks.\n+\t(pa_asm_output_mi_thunk): Use final_start_function() and\n+\tfinal_end_function() to output function start and end directives.\n+\n 2014-04-05  Pitchumani Sivanupandi  <Pitchumani.S@atmel.com>\n \n \t* config/avr/avr-arch.h (avr_mcu_t): Add dev_attribute field to have device"}, {"sha": "871e4e5c6e8e7f5a1749bbdafb9c5cbe23915258", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 7, "deletions": 13, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9a302d9f272cd36af49ce47863f79ef13eb9c3a/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9a302d9f272cd36af49ce47863f79ef13eb9c3a/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=a9a302d9f272cd36af49ce47863f79ef13eb9c3a", "patch": "@@ -4187,13 +4187,17 @@ pa_output_function_epilogue (FILE *file, HOST_WIDE_INT size ATTRIBUTE_UNUSED)\n \n   if (TARGET_SOM && TARGET_GAS)\n     {\n-      /* We done with this subspace except possibly for some additional\n+      /* We are done with this subspace except possibly for some additional\n \t debug information.  Forget that we are in this subspace to ensure\n \t that the next function is output in its own subspace.  */\n       in_section = NULL;\n       cfun->machine->in_nsubspa = 2;\n     }\n \n+  /* Thunks do their own accounting.  */\n+  if (cfun->is_thunk)\n+    return;\n+\n   if (INSN_ADDRESSES_SET_P ())\n     {\n       insn = get_last_nonnote_insn ();\n@@ -8259,8 +8263,7 @@ pa_asm_output_mi_thunk (FILE *file, tree thunk_fndecl, HOST_WIDE_INT delta,\n   xoperands[1] = XEXP (DECL_RTL (thunk_fndecl), 0);\n   xoperands[2] = GEN_INT (delta);\n \n-  ASM_OUTPUT_LABEL (file, XSTR (xoperands[1], 0));\n-  fprintf (file, \"\\t.PROC\\n\\t.CALLINFO FRAME=0,NO_CALLS\\n\\t.ENTRY\\n\");\n+  final_start_function (emit_barrier (), file, 1);\n \n   /* Output the thunk.  We know that the function is in the same\n      translation unit (i.e., the same space) as the thunk, and that\n@@ -8466,16 +8469,7 @@ pa_asm_output_mi_thunk (FILE *file, tree thunk_fndecl, HOST_WIDE_INT delta,\n \t}\n     }\n \n-  fprintf (file, \"\\t.EXIT\\n\\t.PROCEND\\n\");\n-\n-  if (TARGET_SOM && TARGET_GAS)\n-    {\n-      /* We done with this subspace except possibly for some additional\n-\t debug information.  Forget that we are in this subspace to ensure\n-\t that the next function is output in its own subspace.  */\n-      in_section = NULL;\n-      cfun->machine->in_nsubspa = 2;\n-    }\n+  final_end_function ();\n \n   if (TARGET_SOM && flag_pic && TREE_PUBLIC (function))\n     {"}]}