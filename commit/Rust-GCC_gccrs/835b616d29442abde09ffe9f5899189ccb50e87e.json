{"sha": "835b616d29442abde09ffe9f5899189ccb50e87e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM1YjYxNmQyOTQ0MmFiZGUwOWZmZTlmNTg5OTE4OWNjYjUwZTg3ZQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2007-10-06T11:47:51Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2007-10-06T11:47:51Z"}, "message": "re PR tree-optimization/33655 (ICE in bitfield_overlaps_p, at tree-sra.c:2901)\n\ngcc/ChangeLog:\nPR tree-optimization/33655\n* tree-sra.c (bitfield_overlaps_p): Handle array and complex\nelements.\ngcc/testsuite/ChangeLog:\nPR tree-optimization/33655\n* gcc.dg/torture/pr33655.c: New.\n\nFrom-SVN: r129052", "tree": {"sha": "97386aa2a17f337dd3026d0bf370e0be78a9f48d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97386aa2a17f337dd3026d0bf370e0be78a9f48d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/835b616d29442abde09ffe9f5899189ccb50e87e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/835b616d29442abde09ffe9f5899189ccb50e87e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/835b616d29442abde09ffe9f5899189ccb50e87e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/835b616d29442abde09ffe9f5899189ccb50e87e/comments", "author": null, "committer": null, "parents": [{"sha": "e9705dc5e5455d23dc95476198b3f5679f73aa5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9705dc5e5455d23dc95476198b3f5679f73aa5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9705dc5e5455d23dc95476198b3f5679f73aa5a"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "4534268ebd633b22c3d71c665606b09aa2cc8f3d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=835b616d29442abde09ffe9f5899189ccb50e87e", "patch": "@@ -1,3 +1,9 @@\n+2007-10-06  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR tree-optimization/33655\n+\t* tree-sra.c (bitfield_overlaps_p): Handle array and complex\n+\telements.\n+\n 2007-10-06  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR tree-optimization/33572"}, {"sha": "70326245c7075ec345276c71eb44881dc33b5b5c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=835b616d29442abde09ffe9f5899189ccb50e87e", "patch": "@@ -1,3 +1,8 @@\n+2007-10-06  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR tree-optimization/33655\n+\t* gcc.dg/torture/pr33655.c: New.\n+\n 2007-10-06  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR tree-optimization/33572"}, {"sha": "2f9da65aec41eb78a333900a3348274b62e2b371", "filename": "gcc/testsuite/gcc.dg/torture/pr33655.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr33655.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr33655.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr33655.c?ref=835b616d29442abde09ffe9f5899189ccb50e87e", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+typedef struct {\n+    unsigned long attr;\n+    int chars[2];\n+} cchar_t;\n+typedef struct _win_st {\n+    cchar_t _bkgrnd;\n+} WINDOW;\n+void render_char(WINDOW *win, cchar_t ch)\n+{\n+    if ((ch).chars[0] == L' '\n+        && (ch).chars[1] == L'\\0')\n+        win->_bkgrnd = ch;\n+}"}, {"sha": "764f70b0631695252e2cfb0aea0d99bbc713c369", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/835b616d29442abde09ffe9f5899189ccb50e87e/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=835b616d29442abde09ffe9f5899189ccb50e87e", "patch": "@@ -2897,6 +2897,11 @@ bitfield_overlaps_p (tree blen, tree bpos, struct sra_elt *fld,\n       flen = fold_convert (bitsizetype, TREE_OPERAND (fld->element, 1));\n       fpos = fold_convert (bitsizetype, TREE_OPERAND (fld->element, 2));\n     }\n+  else if (TREE_CODE (fld->element) == INTEGER_CST)\n+    {\n+      flen = fold_convert (bitsizetype, TYPE_SIZE (fld->type));\n+      fpos = size_binop (MULT_EXPR, flen, fld->element);\n+    }\n   else\n     gcc_unreachable ();\n "}]}