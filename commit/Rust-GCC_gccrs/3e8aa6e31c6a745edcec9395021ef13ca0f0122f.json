{"sha": "3e8aa6e31c6a745edcec9395021ef13ca0f0122f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U4YWE2ZTMxYzZhNzQ1ZWRjZWM5Mzk1MDIxZWYxM2NhMGYwMTIyZg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2000-11-25T18:54:33Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-11-25T18:54:33Z"}, "message": "haifa-sched.c (sched_analyze_1, [...]): Revert 2000-11-22 change.\n\n        * haifa-sched.c (sched_analyze_1, sched_analyze_2, sched_analyze):\n        Revert 2000-11-22 change.\n\nFrom-SVN: r37741", "tree": {"sha": "20c5d44c3811b744f3123b532991006530c7ad14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20c5d44c3811b744f3123b532991006530c7ad14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e8aa6e31c6a745edcec9395021ef13ca0f0122f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e8aa6e31c6a745edcec9395021ef13ca0f0122f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e8aa6e31c6a745edcec9395021ef13ca0f0122f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e8aa6e31c6a745edcec9395021ef13ca0f0122f/comments", "author": null, "committer": null, "parents": [{"sha": "59a9e22e8e4f24f7dcf30e90ca39c620b0743170", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59a9e22e8e4f24f7dcf30e90ca39c620b0743170", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59a9e22e8e4f24f7dcf30e90ca39c620b0743170"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "97cd49a9fbe8900be31b7c4d757c1d6afe781e45", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e8aa6e31c6a745edcec9395021ef13ca0f0122f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e8aa6e31c6a745edcec9395021ef13ca0f0122f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3e8aa6e31c6a745edcec9395021ef13ca0f0122f", "patch": "@@ -1,3 +1,8 @@\n+2000-11-25  Richard Henderson  <rth@redhat.com>\n+\n+\t* haifa-sched.c (sched_analyze_1, sched_analyze_2, sched_analyze):\n+\tRevert 2000-11-22 change.\n+\n 2000-11-25  Bernd Schmidt  <bernds@redhat.co.uk>\n \n \t* config/i386/i386.h (FIXED_REGS): Make the three flags registers"}, {"sha": "477eec3f792fac770a2413d48d30e931e161af2b", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e8aa6e31c6a745edcec9395021ef13ca0f0122f/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e8aa6e31c6a745edcec9395021ef13ca0f0122f/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=3e8aa6e31c6a745edcec9395021ef13ca0f0122f", "patch": "@@ -3405,6 +3405,11 @@ sched_analyze_1 (deps, x, insn)\n \t\t}\n \t      else\n \t\tSET_REGNO_REG_SET (reg_pending_clobbers, r);\n+\n+\t      /* Function calls clobber all call_used regs.  */\n+\t      if (global_regs[r] || (code == SET && call_used_regs[r]))\n+\t\tfor (u = deps->last_function_call; u; u = XEXP (u, 1))\n+\t\t  add_dependence (insn, XEXP (u, 0), REG_DEP_ANTI);\n \t    }\n \t}\n       else\n@@ -3556,6 +3561,11 @@ sched_analyze_2 (deps, x, insn)\n \t\t/* ??? This should never happen.  */\n \t\tfor (u = deps->reg_last_clobbers[r]; u; u = XEXP (u, 1))\n \t\t  add_dependence (insn, XEXP (u, 0), 0);\n+\n+\t\tif (call_used_regs[r] || global_regs[r])\n+\t\t  /* Function calls clobber all call_used regs.  */\n+\t\t  for (u = deps->last_function_call; u; u = XEXP (u, 1))\n+\t\t    add_dependence (insn, XEXP (u, 0), REG_DEP_ANTI);\n \t      }\n \t  }\n \telse\n@@ -3998,11 +4008,9 @@ sched_analyze (deps, head, tail)\n \t\t  {\n \t\t    for (u = deps->reg_last_uses[i]; u; u = XEXP (u, 1))\n \t\t      add_dependence (insn, XEXP (u, 0), REG_DEP_ANTI);\n- \t\t    free_INSN_LIST_list (&deps->reg_last_uses[i]);\n \n \t\t    for (u = deps->reg_last_sets[i]; u; u = XEXP (u, 1))\n-\t\t      add_dependence (insn, XEXP (u, 0), REG_DEP_OUTPUT);\n- \t\t    free_INSN_LIST_list (&deps->reg_last_sets[i]);\n+\t\t      add_dependence (insn, XEXP (u, 0), REG_DEP_ANTI);\n \n \t\t    SET_REGNO_REG_SET (reg_pending_clobbers, i);\n \t\t  }"}]}