{"sha": "b830b74cd4e447647161c1fe0f089901aa77d747", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjgzMGI3NGNkNGU0NDc2NDcxNjFjMWZlMGYwODk5MDFhYTc3ZDc0Nw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-01-19T00:47:59Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-01-19T00:47:59Z"}, "message": "re PR c++/13635 (ICE in register_specialization for specific order of template specialization)\n\n\tPR c++/13635\n\t* pt.c (tsubst): Use finish_typeof.\n\n\tPR c++/13635\n\t* g++.dg/ext/typeof7.C: New test.\n\nFrom-SVN: r76131", "tree": {"sha": "45bdf2d97596e7e36fa4223679e2edc32beabc23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45bdf2d97596e7e36fa4223679e2edc32beabc23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b830b74cd4e447647161c1fe0f089901aa77d747", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b830b74cd4e447647161c1fe0f089901aa77d747", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b830b74cd4e447647161c1fe0f089901aa77d747", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b830b74cd4e447647161c1fe0f089901aa77d747/comments", "author": null, "committer": null, "parents": [{"sha": "60fa6554f59fce6046d998f88f414c9b8164fa4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60fa6554f59fce6046d998f88f414c9b8164fa4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60fa6554f59fce6046d998f88f414c9b8164fa4f"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "840b19f17699362f17372e4913a6c085ee64a757", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b830b74cd4e447647161c1fe0f089901aa77d747", "patch": "@@ -1,3 +1,8 @@\n+2004-01-18  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/13635\n+\t* pt.c (tsubst): Use finish_typeof.\n+\n 2004-01-16  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/11725"}, {"sha": "78c2b1348ab576d5a7f52961ae81976d654214f8", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=b830b74cd4e447647161c1fe0f089901aa77d747", "patch": "@@ -7106,13 +7106,13 @@ tsubst (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n \n     case TYPEOF_TYPE:\n       {\n-\ttree e1 = tsubst_expr (TYPE_FIELDS (t), args, complain, in_decl);\n-\tif (e1 == error_mark_node)\n-\t  return error_mark_node;\n+\ttree type;\n \n-\treturn cp_build_qualified_type_real (TREE_TYPE (e1),\n+\ttype = finish_typeof (tsubst_expr (TYPE_FIELDS (t), args, complain, \n+\t\t\t\t\t   in_decl));\n+\treturn cp_build_qualified_type_real (type,\n \t\t\t\t\t     cp_type_quals (t)\n-\t\t\t\t\t     | cp_type_quals (TREE_TYPE (e1)),\n+\t\t\t\t\t     | cp_type_quals (type),\n \t\t\t\t\t     complain);\n       }\n "}, {"sha": "c9444da800dd5606a1580c2c585238b56261e6d1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b830b74cd4e447647161c1fe0f089901aa77d747", "patch": "@@ -1,3 +1,8 @@\n+2004-01-18  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/13635\n+\t* g++.dg/ext/typeof7.C: New test.\n+\n 2004-01-18  David Edelsohn  <edelsohn@gnu.org>\n \n \t* gcc.dg/array-quals-1.c: xfail on powerpc*-*-aix*."}, {"sha": "6c426931bbbc3b509beb5851c917e21586fcb7c5", "filename": "gcc/testsuite/g++.dg/ext/typeof7.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftypeof7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b830b74cd4e447647161c1fe0f089901aa77d747/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftypeof7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Ftypeof7.C?ref=b830b74cd4e447647161c1fe0f089901aa77d747", "patch": "@@ -0,0 +1,6 @@\n+// PR c++/13635\n+// { dg-options \"\" }\n+\n+template<int n> class X {template<class Y> typeof(Y::y) foo();};\n+X<0> x;\n+"}]}