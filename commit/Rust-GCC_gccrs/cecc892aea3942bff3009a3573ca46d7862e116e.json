{"sha": "cecc892aea3942bff3009a3573ca46d7862e116e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2VjYzg5MmFlYTM5NDJiZmYzMDA5YTM1NzNjYTQ2ZDc4NjJlMTE2ZQ==", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@redhat.com", "date": "2003-07-18T19:27:42Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@gcc.gnu.org", "date": "2003-07-18T19:27:42Z"}, "message": "gnu_java_awt_peer_gtk_GtkScrollBarPeer.c: Handle missing event cases, connect to \"value-changed\" signal.\n\n2003-07-18  Graydon Hoare  <graydon@redhat.com>\n\n\t* jni/gtk-peer/gnu_java_awt_peer_gtk_GtkScrollBarPeer.c:\n\tHandle missing event cases, connect to \"value-changed\" signal.\n\nFrom-SVN: r69568", "tree": {"sha": "a6c4bc57f13f95fac16facbecebe09ad564c8608", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6c4bc57f13f95fac16facbecebe09ad564c8608"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cecc892aea3942bff3009a3573ca46d7862e116e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cecc892aea3942bff3009a3573ca46d7862e116e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cecc892aea3942bff3009a3573ca46d7862e116e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cecc892aea3942bff3009a3573ca46d7862e116e/comments", "author": null, "committer": null, "parents": [{"sha": "9e508cc4703391622b221a3a7aed00938be9f2ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e508cc4703391622b221a3a7aed00938be9f2ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e508cc4703391622b221a3a7aed00938be9f2ba"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "94cb464fcf8f4d137c8e19fa392df49be84c3c1e", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cecc892aea3942bff3009a3573ca46d7862e116e/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cecc892aea3942bff3009a3573ca46d7862e116e/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=cecc892aea3942bff3009a3573ca46d7862e116e", "patch": "@@ -1,3 +1,8 @@\n+2003-07-18  Graydon Hoare  <graydon@redhat.com>\n+\n+\t* jni/gtk-peer/gnu_java_awt_peer_gtk_GtkScrollBarPeer.c: \n+\tHandle missing event cases, connect to \"value-changed\" signal.\n+\n 2003-07-18  Graydon Hoare  <graydon@redhat.com>\n \n \t* java/awt/geom/CubicCurve2D.java,"}, {"sha": "2bd3df8cf3534fa380fecfaed41e128140aadd9e", "filename": "libjava/jni/gtk-peer/gnu_java_awt_peer_gtk_GtkScrollBarPeer.c", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cecc892aea3942bff3009a3573ca46d7862e116e/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkScrollBarPeer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cecc892aea3942bff3009a3573ca46d7862e116e/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkScrollBarPeer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni%2Fgtk-peer%2Fgnu_java_awt_peer_gtk_GtkScrollBarPeer.c?ref=cecc892aea3942bff3009a3573ca46d7862e116e", "patch": "@@ -45,6 +45,17 @@ struct range_scrollbar\n   jobject *scrollbar;\n };\n \n+static void \n+post_change_event (GtkRange *range,\n+\t\t   struct range_scrollbar *rs)\n+{\n+  GtkAdjustment *adj;\n+  adj = gtk_range_get_adjustment (range);\n+  (*gdk_env)->CallVoidMethod (gdk_env, *(rs->scrollbar), postAdjustmentEventID,\n+\t\t\t      AWT_ADJUSTMENT_TRACK, (jint) adj->value);\n+  \n+}\n+\n static void \n post_adjustment_event (GtkRange *range, GtkScrollType scroll, \n \t\t       struct range_scrollbar *rs)\n@@ -56,15 +67,23 @@ post_adjustment_event (GtkRange *range, GtkScrollType scroll,\n \n   switch (scroll)\n     {\n+    case GTK_SCROLL_STEP_UP:\n+    case GTK_SCROLL_STEP_RIGHT:\n     case GTK_SCROLL_STEP_FORWARD:\n       type = AWT_ADJUSTMENT_UNIT_INCREMENT;\n       break;\n+    case GTK_SCROLL_STEP_DOWN:\n+    case GTK_SCROLL_STEP_LEFT:\n     case GTK_SCROLL_STEP_BACKWARD:\n       type = AWT_ADJUSTMENT_UNIT_DECREMENT;\n       break;\n+    case GTK_SCROLL_PAGE_UP:\n+    case GTK_SCROLL_PAGE_RIGHT:\n     case GTK_SCROLL_PAGE_FORWARD:\n       type = AWT_ADJUSTMENT_BLOCK_INCREMENT;\n       break;\n+    case GTK_SCROLL_PAGE_DOWN:\n+    case GTK_SCROLL_PAGE_LEFT:\n     case GTK_SCROLL_PAGE_BACKWARD:\n       type = AWT_ADJUSTMENT_BLOCK_DECREMENT;\n       break;\n@@ -118,9 +137,14 @@ Java_gnu_java_awt_peer_gtk_GtkScrollbarPeer_connectHooks\n   rs->scrollbar = (jobject *) malloc (sizeof (jobject));\n   *(rs->scrollbar) = (*env)->NewGlobalRef (env, obj);\n   gtk_signal_connect (GTK_OBJECT (GTK_RANGE (ptr)), \n-\t\t      \"move_slider\", \n+\t\t      \"move-slider\", \n \t\t      GTK_SIGNAL_FUNC (post_adjustment_event), rs);\n \n+  gtk_signal_connect (GTK_OBJECT (GTK_RANGE (ptr)), \n+\t\t      \"value-changed\", \n+\t\t      GTK_SIGNAL_FUNC (post_change_event), rs);\n+\n+\n   connect_awt_hook (env, obj, 1, GTK_SCROLLBAR (ptr)->range);\n   gdk_threads_leave ();\n }"}]}