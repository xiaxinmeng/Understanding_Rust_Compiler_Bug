{"sha": "03743286836c9d50ae98ce033d057789cd8eb3f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM3NDMyODY4MzZjOWQ1MGFlOThjZTAzM2QwNTc3ODljZDhlYjNmMA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2007-06-01T15:06:19Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2007-06-01T15:06:19Z"}, "message": "re PR rtl-optimization/31455 (lower subreg causes a performance regression in the inner loop sometimes)\n\n\tPR rtl-optimization/31455\n\t* lower-subreg.c (find_decomposable_subregs): Don't decompose\n\tsubregs which have a cast between modes which are not tieable.\n\nFrom-SVN: r125265", "tree": {"sha": "704191f0c23c90f6bd8f14099504c8c3976f3824", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/704191f0c23c90f6bd8f14099504c8c3976f3824"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03743286836c9d50ae98ce033d057789cd8eb3f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03743286836c9d50ae98ce033d057789cd8eb3f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03743286836c9d50ae98ce033d057789cd8eb3f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03743286836c9d50ae98ce033d057789cd8eb3f0/comments", "author": null, "committer": null, "parents": [{"sha": "96598938709133c220837081956f1b84516294e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96598938709133c220837081956f1b84516294e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96598938709133c220837081956f1b84516294e1"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "ece60c7ae48ee7e230d9c7672499e9d85bdc9c94", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03743286836c9d50ae98ce033d057789cd8eb3f0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03743286836c9d50ae98ce033d057789cd8eb3f0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=03743286836c9d50ae98ce033d057789cd8eb3f0", "patch": "@@ -1,3 +1,9 @@\n+2007-06-01  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR rtl-optimization/31455\n+\t* lower-subreg.c (find_decomposable_subregs): Don't decompose\n+\tsubregs which have a cast between modes which are not tieable.\n+\n 2007-06-01  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* expr.c (force_operand) [DIV, MOD, UDIV, UMOD, ASHIFTRT]: Remove"}, {"sha": "0b50a88de99c27591d3daf5983ea1030b633f617", "filename": "gcc/lower-subreg.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03743286836c9d50ae98ce033d057789cd8eb3f0/gcc%2Flower-subreg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03743286836c9d50ae98ce033d057789cd8eb3f0/gcc%2Flower-subreg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flower-subreg.c?ref=03743286836c9d50ae98ce033d057789cd8eb3f0", "patch": "@@ -281,6 +281,18 @@ find_decomposable_subregs (rtx *px, void *data)\n \t  bitmap_set_bit (decomposable_context, regno);\n \t  return -1;\n \t}\n+\n+      /* If this is a cast from one mode to another, where the modes\n+\t have the same size, and they are not tieable, then mark this\n+\t register as non-decomposable.  If we decompose it we are\n+\t likely to mess up whatever the backend is trying to do.  */\n+      if (outer_words > 1\n+\t  && outer_size == inner_size\n+\t  && !MODES_TIEABLE_P (GET_MODE (x), GET_MODE (inner)))\n+\t{\n+\t  bitmap_set_bit (non_decomposable_context, regno);\n+\t  return -1;\n+\t}\n     }\n   else if (REG_P (x))\n     {"}]}