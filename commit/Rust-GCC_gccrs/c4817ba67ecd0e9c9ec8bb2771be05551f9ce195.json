{"sha": "c4817ba67ecd0e9c9ec8bb2771be05551f9ce195", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQ4MTdiYTY3ZWNkMGU5YzllYzhiYjI3NzFiZTA1NTUxZjljZTE5NQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2004-09-07T20:51:25Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-09-07T20:51:25Z"}, "message": "tree-ssa-pre.c (grand_bitmap_obstack): New.\n\n\t* tree-ssa-pre.c (grand_bitmap_obstack): New.\n\t(value_insert_into_set_bitmap, bitmap_set_new): Use the obstack.\n\t(init_pre): Initialize obstack.\n\t(fini_pre): Free obstack.\n\nFrom-SVN: r87155", "tree": {"sha": "7b58d7467bc281216dc5da47d445926ac412ed9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b58d7467bc281216dc5da47d445926ac412ed9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195/comments", "author": null, "committer": null, "parents": [{"sha": "9f0df97afb590e40479e33806208870ad331467c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f0df97afb590e40479e33806208870ad331467c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f0df97afb590e40479e33806208870ad331467c"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "d00cc21e1048f3e9593e1f4826298a3d9d4376b4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c4817ba67ecd0e9c9ec8bb2771be05551f9ce195", "patch": "@@ -1,3 +1,10 @@\n+2004-09-07  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-ssa-pre.c (grand_bitmap_obstack): New.\n+\t(value_insert_into_set_bitmap, bitmap_set_new): Use the obstack.\n+\t(init_pre): Initialize obstack.\n+\t(fini_pre): Free obstack.\n+\n 2004-09-07  David Daney  <ddaney@avtrex.com>\n \n \t* config.gcc: Added support for --with-divide=[breaks|traps] for"}, {"sha": "ec12f62c008879a010182f7edb1e75a0a3251d9d", "filename": "gcc/tree-ssa-pre.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195/gcc%2Ftree-ssa-pre.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c4817ba67ecd0e9c9ec8bb2771be05551f9ce195/gcc%2Ftree-ssa-pre.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-pre.c?ref=c4817ba67ecd0e9c9ec8bb2771be05551f9ce195", "patch": "@@ -306,6 +306,7 @@ static alloc_pool value_set_node_pool;\n static alloc_pool binary_node_pool;\n static alloc_pool unary_node_pool;\n static alloc_pool reference_node_pool;\n+static struct obstack grand_bitmap_obstack;\n \n /* Set of blocks with statements that have had its EH information\n    cleaned up.  */\n@@ -468,7 +469,7 @@ value_insert_into_set_bitmap (value_set_t set, tree v)\n \n   if (set->values == NULL)\n     {\n-      set->values = BITMAP_GGC_ALLOC ();\n+      set->values = BITMAP_OBSTACK_ALLOC (&grand_bitmap_obstack);\n       bitmap_clear (set->values);\n     }\n \n@@ -482,8 +483,8 @@ static bitmap_set_t\n bitmap_set_new (void)\n {\n   bitmap_set_t ret = pool_alloc (bitmap_set_pool);\n-  ret->expressions = BITMAP_GGC_ALLOC ();\n-  ret->values = BITMAP_GGC_ALLOC ();\n+  ret->expressions = BITMAP_OBSTACK_ALLOC (&grand_bitmap_obstack);\n+  ret->values = BITMAP_OBSTACK_ALLOC (&grand_bitmap_obstack);\n   bitmap_clear (ret->expressions);\n   bitmap_clear (ret->values);\n   return ret;\n@@ -1944,6 +1945,7 @@ init_pre (void)\n   FOR_ALL_BB (bb)\n     bb->aux = xcalloc (1, sizeof (struct bb_value_sets));\n \n+  gcc_obstack_init (&grand_bitmap_obstack);\n   phi_translate_table = htab_create (511, expr_pred_trans_hash,\n \t\t\t\t     expr_pred_trans_eq, free);\n   value_set_pool = create_alloc_pool (\"Value sets\",\n@@ -1980,6 +1982,7 @@ fini_pre (void)\n {\n   basic_block bb;\n \n+  obstack_free (&grand_bitmap_obstack, NULL);\n   free_alloc_pool (value_set_pool);\n   free_alloc_pool (bitmap_set_pool);\n   free_alloc_pool (value_set_node_pool);"}]}