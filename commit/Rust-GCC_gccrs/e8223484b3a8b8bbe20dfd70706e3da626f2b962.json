{"sha": "e8223484b3a8b8bbe20dfd70706e3da626f2b962", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTgyMjM0ODRiM2E4YjhiYmUyMGRmZDcwNzA2ZTNkYTYyNmYyYjk2Mg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2016-08-26T11:35:58Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2016-08-26T11:35:58Z"}, "message": "Restore dg-interpreter-batch-mode for libstdc++ tests\n\n2016-08-26  Jonathan Wakely  <jwakely@redhat.com>\n\t    Pedro Alves  <palves@redhat.com>\n\n\t* testsuite/lib/gdb-test.exp (gdb-dg-runtest): Define wrapper to save\n\tand restore dg-interpreter-batch-mode.\n\t* testsuite/libstdc++-prettyprinters/prettyprinters.exp: Use\n\tgdb-dg-runtest instead of dg-runtest.\n\t* testsuite/libstdc++-xmethods/xmethods.exp: Likewise.\n\nCo-Authored-By: Pedro Alves <palves@redhat.com>\n\nFrom-SVN: r239776", "tree": {"sha": "b11c78e688a768d8f5f220ab1d9fd08152727987", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b11c78e688a768d8f5f220ab1d9fd08152727987"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e8223484b3a8b8bbe20dfd70706e3da626f2b962", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8223484b3a8b8bbe20dfd70706e3da626f2b962", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8223484b3a8b8bbe20dfd70706e3da626f2b962", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8223484b3a8b8bbe20dfd70706e3da626f2b962/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "21184026d5e37878304c421cba6649fbc44f1b7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21184026d5e37878304c421cba6649fbc44f1b7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21184026d5e37878304c421cba6649fbc44f1b7c"}], "stats": {"total": 35, "additions": 23, "deletions": 12}, "files": [{"sha": "8a7f59da1de6b55037a840c6f62bded4ba801e00", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=e8223484b3a8b8bbe20dfd70706e3da626f2b962", "patch": "@@ -1,3 +1,12 @@\n+2016-08-26  Jonathan Wakely  <jwakely@redhat.com>\n+\t    Pedro Alves  <palves@redhat.com>\n+\n+\t* testsuite/lib/gdb-test.exp (gdb-dg-runtest): Define wrapper to save\n+\tand restore dg-interpreter-batch-mode.\n+\t* testsuite/libstdc++-prettyprinters/prettyprinters.exp: Use\n+\tgdb-dg-runtest instead of dg-runtest.\n+\t* testsuite/libstdc++-xmethods/xmethods.exp: Likewise.\n+\n 2016-08-26  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* config/abi/pre/gnu.ver (GLIBCXX_3.4, GLIBCXX_3.4.21): Use more"}, {"sha": "a0298832be1622bcdc272b7e84d3de5c3c9b25c7", "filename": "libstdc++-v3/testsuite/lib/gdb-test.exp", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fgdb-test.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fgdb-test.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Fgdb-test.exp?ref=e8223484b3a8b8bbe20dfd70706e3da626f2b962", "patch": "@@ -277,3 +277,15 @@ proc gdb_version_check_xmethods {} {\n \t      \"python import gdb.xmethod; print(gdb.xmethod.XMethod)\" \\\n \t      \"<class 'gdb\\\\.xmethod\\\\.XMethod'>\"]\n }\n+\n+# Like dg-runtest but keep the .exe around.  dg-test has an option for\n+# this but there is no way to pass it through dg-runtest.\n+proc gdb-dg-runtest {args} {\n+  global dg-interpreter-batch-mode\n+  set saved-dg-interpreter-batch-mode ${dg-interpreter-batch-mode}\n+  set dg-interpreter-batch-mode 1\n+\n+  eval dg-runtest $args\n+\n+  set dg-interpreter-batch-mode ${saved-dg-interpreter-batch-mode}\n+}"}, {"sha": "cc003cddafde4f477cb0fd53f0e530201f5d5043", "filename": "libstdc++-v3/testsuite/libstdc++-prettyprinters/prettyprinters.exp", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2Fprettyprinters.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2Fprettyprinters.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-prettyprinters%2Fprettyprinters.exp?ref=e8223484b3a8b8bbe20dfd70706e3da626f2b962", "patch": "@@ -41,14 +41,9 @@ if {! [gdb_version_check]} {\n     return\n }\n \n-# This can be used to keep the .exe around.  dg-test has an option for\n-# this but there is no way to pass it through dg-runtest.\n-global dg-interpreter-batch-mode\n-set dg-interpreter-batch-mode 1\n-\n global DEFAULT_CXXFLAGS\n global PCH_CXXFLAGS\n-dg-runtest [lsort [glob $srcdir/$subdir/*.cc]] \\\n+gdb-dg-runtest [lsort [glob $srcdir/$subdir/*.cc]] \\\n   \"\" \"$DEFAULT_CXXFLAGS $PCH_CXXFLAGS\"\n \n if [info exists guality_gdb_name] {"}, {"sha": "e580d730a564318bd7222b775a25ca3c37f5a98d", "filename": "libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-xmethods%2Fxmethods.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e8223484b3a8b8bbe20dfd70706e3da626f2b962/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-xmethods%2Fxmethods.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flibstdc%2B%2B-xmethods%2Fxmethods.exp?ref=e8223484b3a8b8bbe20dfd70706e3da626f2b962", "patch": "@@ -42,14 +42,9 @@ if {! [gdb_version_check_xmethods]} {\n     return\n }\n \n-# This can be used to keep the .exe around.  dg-test has an option for\n-# this but there is no way to pass it through dg-runtest.\n-global dg-interpreter-batch-mode\n-set dg-interpreter-batch-mode 1\n-\n global DEFAULT_CXXFLAGS\n global PCH_CXXFLAGS\n-dg-runtest [lsort [glob $srcdir/$subdir/*.cc]] \\\n+gdb-dg-runtest [lsort [glob $srcdir/$subdir/*.cc]] \\\n   \"\" \"$DEFAULT_CXXFLAGS $PCH_CXXFLAGS\"\n \n if [info exists guality_gdb_name] {"}]}