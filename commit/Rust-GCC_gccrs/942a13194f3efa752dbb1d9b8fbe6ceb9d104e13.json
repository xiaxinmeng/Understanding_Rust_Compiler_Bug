{"sha": "942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTQyYTEzMTk0ZjNlZmE3NTJkYmIxZDliOGZiZTZjZWI5ZDEwNGUxMw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-01-01T11:55:59Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-01-01T11:55:59Z"}, "message": "re PR tree-optimization/69070 (ICE: tree check: expected real_cst, have ssa_name in gimple_expand_builtin_pow, at tree-ssa-math-opts.c:1541 with -fsignaling-nans and powl())\n\n\tPR tree-optimization/69070\n\t* tree-ssa-math-opts.c (gimple_expand_builtin_pow): Only test\n\tREAL_VALUE_ISSIGNALING_NAN on arg0 if arg0 is a REAL_CST.\n\n\t* gcc.dg/pr69070.c: New test.\n\nFrom-SVN: r232025", "tree": {"sha": "6bbd05fe88d18b607a5a7d9e9d474829afc13197", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6bbd05fe88d18b607a5a7d9e9d474829afc13197"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "10dff63f98807e6b7f65c9c3b9f69623f8f619b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10dff63f98807e6b7f65c9c3b9f69623f8f619b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10dff63f98807e6b7f65c9c3b9f69623f8f619b3"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "7d27a83413055c85dbe3892139c03f1742ac6898", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "patch": "@@ -1,5 +1,9 @@\n 2016-01-01  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/69070\n+\t* tree-ssa-math-opts.c (gimple_expand_builtin_pow): Only test\n+\tREAL_VALUE_ISSIGNALING_NAN on arg0 if arg0 is a REAL_CST.\n+\n \tPR sanitizer/69055\n \t* ubsan.c (ubsan_instrument_float_cast): Call\n \tinitialize_sanitizer_builtins."}, {"sha": "e189d4b838aa83029af730ee499be325f882c0dc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "patch": "@@ -1,5 +1,8 @@\n 2016-01-01  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR tree-optimization/69070\n+\t* gcc.dg/pr69070.c: New test.\n+\n \tPR sanitizer/69055\n \t* gfortran.dg/pr69055.f90: New test.\n "}, {"sha": "f8a82e5cd1dc4988ba740ffc185ab0ca59aa6f1b", "filename": "gcc/testsuite/gcc.dg/pr69070.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2Ftestsuite%2Fgcc.dg%2Fpr69070.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2Ftestsuite%2Fgcc.dg%2Fpr69070.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr69070.c?ref=942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "patch": "@@ -0,0 +1,9 @@\n+/* PR tree-optimization/69070 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fsignaling-nans\" } */\n+\n+double\n+foo (double d)\n+{\n+  return __builtin_pow (d, 2);\n+}"}, {"sha": "5cb8ba2275c8cb6bd5497fd7e11ed0b3780af368", "filename": "gcc/tree-ssa-math-opts.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2Ftree-ssa-math-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/942a13194f3efa752dbb1d9b8fbe6ceb9d104e13/gcc%2Ftree-ssa-math-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-math-opts.c?ref=942a13194f3efa752dbb1d9b8fbe6ceb9d104e13", "patch": "@@ -1538,7 +1538,8 @@ gimple_expand_builtin_pow (gimple_stmt_iterator *gsi, location_t loc,\n   /* Don't perform the operation if flag_signaling_nans is on\n      and the operand is a signaling NaN.  */\n   if (HONOR_SNANS (TYPE_MODE (TREE_TYPE (arg1)))\n-      && (REAL_VALUE_ISSIGNALING_NAN (TREE_REAL_CST (arg0))\n+      && ((TREE_CODE (arg0) == REAL_CST\n+\t   && REAL_VALUE_ISSIGNALING_NAN (TREE_REAL_CST (arg0)))\n \t  || REAL_VALUE_ISSIGNALING_NAN (TREE_REAL_CST (arg1))))\n     return NULL_TREE;\n "}]}