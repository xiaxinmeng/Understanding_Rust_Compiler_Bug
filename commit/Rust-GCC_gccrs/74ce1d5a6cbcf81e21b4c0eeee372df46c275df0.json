{"sha": "74ce1d5a6cbcf81e21b4c0eeee372df46c275df0", "node_id": "C_kwDOANBUbNoAKDc0Y2UxZDVhNmNiY2Y4MWUyMWI0YzBlZWVlMzcyZGY0NmMyNzVkZjA", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-02-16T11:13:57Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-05-13T08:04:26Z"}, "message": "[Ada] Accept effectively volatile components in actuals\n\nIn SPARK we forbid names that are effectively volatile for reading if\nthey occur in actual subprogram parameters. We wrongly rejected\nreferences to components, which are not names in Ada.\n\ngcc/ada/\n\n\t* sem_res.adb (Flag_Effectively_Volatile_Objects): Ignore\n\tcomponent and discriminant identifiers.", "tree": {"sha": "23febb1e46b1395198a0f3330d1790945867852c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23febb1e46b1395198a0f3330d1790945867852c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/74ce1d5a6cbcf81e21b4c0eeee372df46c275df0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74ce1d5a6cbcf81e21b4c0eeee372df46c275df0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74ce1d5a6cbcf81e21b4c0eeee372df46c275df0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74ce1d5a6cbcf81e21b4c0eeee372df46c275df0/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7427e673d818be052fd07468c9dfdad3dbfe13b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7427e673d818be052fd07468c9dfdad3dbfe13b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7427e673d818be052fd07468c9dfdad3dbfe13b3"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "4306e49ed7646e6b36baaf9a63d5449a5a1d851e", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/74ce1d5a6cbcf81e21b4c0eeee372df46c275df0/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/74ce1d5a6cbcf81e21b4c0eeee372df46c275df0/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=74ce1d5a6cbcf81e21b4c0eeee372df46c275df0", "patch": "@@ -3868,7 +3868,13 @@ package body Sem_Res is\n                when N_Identifier | N_Expanded_Name =>\n                   Id := Entity (N);\n \n+                  --  Identifiers of components and discriminants are not names\n+                  --  in the sense of Ada RM 4.1. They can only occur as a\n+                  --  selector_name in selected_component or as a choice in\n+                  --  component_association.\n+\n                   if Is_Object (Id)\n+                    and then Ekind (Id) not in E_Component | E_Discriminant\n                     and then Is_Effectively_Volatile_For_Reading (Id)\n                     and then\n                       not Is_OK_Volatile_Context (Context       => Parent (N),"}]}