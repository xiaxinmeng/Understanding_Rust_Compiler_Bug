{"sha": "7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzk0NzcxN2ZjMjE2OWViOWE3YzViOTljYTdmNWY5Y2M4YmQ0MjNjYQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-07-12T17:15:53Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-07-12T17:15:53Z"}, "message": "(FUNCTION_BLOCK_PROFILER, BLOCK_PROFILER): Define.\n\nFrom-SVN: r7748", "tree": {"sha": "44a2ab227a02d44918421b25c3677eecdfe90536", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/44a2ab227a02d44918421b25c3677eecdfe90536"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca/comments", "author": null, "committer": null, "parents": [{"sha": "96a7ba6fef3ca027876a377f10a5fb21d5372f9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96a7ba6fef3ca027876a377f10a5fb21d5372f9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96a7ba6fef3ca027876a377f10a5fb21d5372f9f"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "411dd3854262136e26450689c24aeb70e9cb47e8", "filename": "gcc/config/sparc/sysv4.h", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca/gcc%2Fconfig%2Fsparc%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca/gcc%2Fconfig%2Fsparc%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsysv4.h?ref=7947717fc2169eb9a7c5b99ca7f5f9cc8bd423ca", "patch": "@@ -225,3 +225,34 @@ do { long value[4];\t\t\t\t\t\t\t\\\n      fprintf((FILE), \"\\t.long\\t0x%x\\n\", value[2]);\t\t\t\\\n      fprintf((FILE), \"\\t.long\\t0x%x\\n\", value[3]);\t\t\t\\\n    } while (0)\n+\f\n+/* Output assembler code to FILE to initialize this source file's\n+   basic block profiling info, if that has not already been done.  */\n+\n+#undef FUNCTION_BLOCK_PROFILER\n+#define FUNCTION_BLOCK_PROFILER(FILE, LABELNO)  \\\n+  do { \\\n+    if (TARGET_MEDANY) \\\n+      fprintf (FILE, \"\\tsethi %%hi(.LLPBX0),%%o0\\n\\tor %%0,%%lo(.LLPBX0),%%o0\\n\\tld [%s+%%o0],%%o1\\n\\ttst %%o1\\n\\tbne .LLPY%d\\n\\tadd %%o0,%s,%%o0\\n\\tcall __bb_init_func\\n\\tnop\\nLPY%d:\\n\", \\\n+\t       MEDANY_BASE_REG, (LABELNO), MEDANY_BASE_REG, (LABELNO)); \\\n+    else \\\n+      fprintf (FILE, \"\\tsethi %%hi(.LLPBX0),%%o0\\n\\tld [%%lo(.LLPBX0)+%%o0],%%o1\\n\\ttst %%o1\\n\\tbne LPY%d\\n\\tadd %%o0,%%lo(.LLPBX0),%%o0\\n\\tcall __bb_init_func\\n\\tnop\\nLPY%d:\\n\", \\\n+\t       (LABELNO), (LABELNO)); \\\n+  } while (0)\n+\n+/* Output assembler code to FILE to increment the entry-count for\n+   the BLOCKNO'th basic block in this source file.  */\n+\n+#undef BLOCK_PROFILER\n+#define BLOCK_PROFILER(FILE, BLOCKNO) \\\n+{ \\\n+  int blockn = (BLOCKNO); \\\n+  if (TARGET_MEDANY) \\\n+    fprintf (FILE, \"\\tsethi %%hi(.LLPBX2+%d),%%g1\\n\\tor %%g1,%%lo(.LLPBX2+%d),%%g1\\n\\tld [%%g1+%s],%%g2\\n\\tadd %%g2,1,%%g2\\n\\tst %%g2,[%%g1+%s]\\n\", \\\n+\t     4 * blockn, 4 * blockn, MEDANY_BASE_REG, MEDANY_BASE_REG); \\\n+  else \\\n+    fprintf (FILE, \"\\tsethi %%hi(.LLPBX2+%d),%%g1\\n\\tld [%%lo(.LLPBX2+%d)+%%g1],%%g2\\n\\\n+\\tadd %%g2,1,%%g2\\n\\tst %%g2,[%%lo(.LLPBX2+%d)+%%g1]\\n\", \\\n+\t     4 * blockn, 4 * blockn, 4 * blockn); \\\n+}\n+"}]}