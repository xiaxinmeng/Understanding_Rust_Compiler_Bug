{"sha": "5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQxMWI0YmYzNmQ3ZmMxNmY2MzRhOWQ1MDhhYjVjYzJlYzQ3YWI4ZA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-10-02T10:20:08Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-10-02T10:20:08Z"}, "message": "reorg.c (make_return_insns): Use emit_copy_of_insn_after for the insns in the delay slot and add_insn_after...\n\n\t* reorg.c (make_return_insns): Use emit_copy_of_insn_after for the\n\tinsns in the delay slot and add_insn_after for the jump insn.\n\nFrom-SVN: r264780", "tree": {"sha": "b2895d7cee2222d91e45648b297a5aa552e19689", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2895d7cee2222d91e45648b297a5aa552e19689"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d/comments", "author": null, "committer": null, "parents": [{"sha": "0edf3afe139a9860ef530c9999841863e96e37e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0edf3afe139a9860ef530c9999841863e96e37e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0edf3afe139a9860ef530c9999841863e96e37e4"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "25026fce591572f979426ddf5f5a81a29478839f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d", "patch": "@@ -1,3 +1,8 @@\n+2018-10-02  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* reorg.c (make_return_insns): Use emit_copy_of_insn_after for the\n+\tinsns in the delay slot and add_insn_after for the jump insn.\n+\n 2018-10-02  Richard Biener  <rguenther@suse.de>\n \n \t* tree-inline.c (expand_call_inline): Use the location of"}, {"sha": "2f0ed547d2733154f4f7fe8d3c3be9cb142e40e3", "filename": "gcc/reorg.c", "status": "modified", "additions": 5, "deletions": 10, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d/gcc%2Freorg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d/gcc%2Freorg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freorg.c?ref=5d11b4bf36d7fc16f634a9d508ab5cc2ec47ab8d", "patch": "@@ -3638,18 +3638,13 @@ make_return_insns (rtx_insn *first)\n \t insns for its delay slots, if it needs some.  */\n       if (ANY_RETURN_P (PATTERN (jump_insn)))\n \t{\n-\t  rtx_insn *prev = PREV_INSN (insn);\n+\t  rtx_insn *after = PREV_INSN (insn);\n \n \t  delete_related_insns (insn);\n-\t  for (i = 1; i < XVECLEN (pat, 0); i++)\n-\t    {\n-\t      rtx_insn *in_seq_insn = as_a<rtx_insn *> (XVECEXP (pat, 0, i));\n-\t      prev = emit_insn_after_setloc (PATTERN (in_seq_insn), prev,\n-\t\t\t\t\t     INSN_LOCATION (in_seq_insn));\n-\t    }\n-\n-\t  insn = emit_jump_insn_after_setloc (PATTERN (jump_insn), prev,\n-\t\t\t\t\t      INSN_LOCATION (jump_insn));\n+\t  insn = jump_insn;\n+\t  for (i = 1; i < pat->len (); i++)\n+\t    after = emit_copy_of_insn_after (pat->insn (i), after);\n+\t  add_insn_after (insn, after, NULL);\n \t  emit_barrier_after (insn);\n \n \t  if (slots)"}]}