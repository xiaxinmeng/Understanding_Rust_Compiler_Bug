{"sha": "f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ2ZmZjZTRmOGY1ZGU5ZTZiMzk4NzdiMzk4ZmQ1ZjNkODJiNDNjZQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-17T21:11:17Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-17T21:11:17Z"}, "message": "(parse_escape): Diagnose '\\x' with no digits.\n\nDiagnose integer overflow when parsing \\x escapes.\n\nFrom-SVN: r2147", "tree": {"sha": "67c9ce01a89e18445ea9e479980e6fbe8213a638", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67c9ce01a89e18445ea9e479980e6fbe8213a638"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce/comments", "author": null, "committer": null, "parents": [{"sha": "0e14ddbcfcb10939d300cd2ecc530459af1979a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e14ddbcfcb10939d300cd2ecc530459af1979a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e14ddbcfcb10939d300cd2ecc530459af1979a1"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "9530a37c3ceaa3027b9dc17eca506ff88b87fbeb", "filename": "gcc/cexp.y", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce/gcc%2Fcexp.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce/gcc%2Fcexp.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcexp.y?ref=f46ffce4f8f5de9e6b39877b398fd5f3d82b43ce", "patch": "@@ -803,23 +803,28 @@ parse_escape (string_ptr)\n       }\n     case 'x':\n       {\n-\tregister int i = 0;\n+\tregister unsigned i = 0, overflow = 0, digits_found = 0, digit;\n \tfor (;;)\n \t  {\n \t    c = *(*string_ptr)++;\n \t    if (c >= '0' && c <= '9')\n-\t      i = (i << 4) + c - '0';\n+\t      digit = c - '0';\n \t    else if (c >= 'a' && c <= 'f')\n-\t      i = (i << 4) + c - 'a' + 10;\n+\t      digit = c - 'a' + 10;\n \t    else if (c >= 'A' && c <= 'F')\n-\t      i = (i << 4) + c - 'A' + 10;\n+\t      digit = c - 'A' + 10;\n \t    else\n \t      {\n \t\t(*string_ptr)--;\n \t\tbreak;\n \t      }\n+\t    overflow |= i ^ (i << 4 >> 4);\n+\t    i = (i << 4) + digit;\n+\t    digits_found = 1;\n \t  }\n-\tif ((i & ~((1 << BITS_PER_UNIT) - 1)) != 0)\n+\tif (!digits_found)\n+\t  yyerror (\"\\\\x used with no following hex digits\");\n+\tif (overflow | (i & ~((1 << BITS_PER_UNIT) - 1)))\n \t  {\n \t    i &= (1 << BITS_PER_UNIT) - 1;\n \t    warning (\"hex character constant does not fit in a byte\");"}]}