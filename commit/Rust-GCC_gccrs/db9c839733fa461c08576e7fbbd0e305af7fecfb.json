{"sha": "db9c839733fa461c08576e7fbbd0e305af7fecfb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI5YzgzOTczM2ZhNDYxYzA4NTc2ZTdmYmJkMGUzMDVhZjdmZWNmYg==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2007-01-26T01:16:57Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2007-01-26T01:16:57Z"}, "message": "m32c.c (m32c_cannot_change_mode_class): We don't allow changes to modes which don't fit in those registers.\n\n* config/m32c/m32c.c (m32c_cannot_change_mode_class): We don't\nallow changes to modes which don't fit in those registers.\n\nFrom-SVN: r121199", "tree": {"sha": "a30dc8dad6329edbcb6b7666db96ff78e7727b67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a30dc8dad6329edbcb6b7666db96ff78e7727b67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db9c839733fa461c08576e7fbbd0e305af7fecfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db9c839733fa461c08576e7fbbd0e305af7fecfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db9c839733fa461c08576e7fbbd0e305af7fecfb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db9c839733fa461c08576e7fbbd0e305af7fecfb/comments", "author": null, "committer": null, "parents": [{"sha": "21f14ff9556fb50f0280bcb570d87cd08d367774", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21f14ff9556fb50f0280bcb570d87cd08d367774", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21f14ff9556fb50f0280bcb570d87cd08d367774"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "25223c872b552aa4eef3d7de2eb7ba7cd3dc5cdf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db9c839733fa461c08576e7fbbd0e305af7fecfb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db9c839733fa461c08576e7fbbd0e305af7fecfb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=db9c839733fa461c08576e7fbbd0e305af7fecfb", "patch": "@@ -1,5 +1,8 @@\n 2007-01-25  DJ Delorie  <dj@redhat.com>\n \n+\t* config/m32c/m32c.c (m32c_cannot_change_mode_class): We don't\n+\tallow changes to modes which don't fit in those registers.\n+\n \t* reload1.c (choose_reload_regs): Check for invalid subregs before\n \tcomputing their locations, not after.\n "}, {"sha": "b28d7473e5e2560dba4db76a8a473ef7f0cb1923", "filename": "gcc/config/m32c/m32c.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db9c839733fa461c08576e7fbbd0e305af7fecfb/gcc%2Fconfig%2Fm32c%2Fm32c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db9c839733fa461c08576e7fbbd0e305af7fecfb/gcc%2Fconfig%2Fm32c%2Fm32c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fm32c.c?ref=db9c839733fa461c08576e7fbbd0e305af7fecfb", "patch": "@@ -846,11 +846,19 @@ int\n m32c_cannot_change_mode_class (enum machine_mode from,\n \t\t\t       enum machine_mode to, int rclass)\n {\n+  int rn;\n #if DEBUG0\n   fprintf (stderr, \"cannot change from %s to %s in %s\\n\",\n \t   mode_name[from], mode_name[to], class_names[rclass]);\n #endif\n \n+  /* If the larger mode isn't allowed in any of these registers, we\n+     can't allow the change.  */\n+  for (rn = 0; rn < FIRST_PSEUDO_REGISTER; rn++)\n+    if (class_contents[rclass][0] & (1 << rn))\n+      if (! m32c_hard_regno_ok (rn, to))\n+\treturn 1;\n+\n   if (to == QImode)\n     return (class_contents[rclass][0] & 0x1ffa);\n "}]}