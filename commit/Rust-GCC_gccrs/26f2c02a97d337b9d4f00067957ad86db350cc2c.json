{"sha": "26f2c02a97d337b9d4f00067957ad86db350cc2c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjZmMmMwMmE5N2QzMzdiOWQ0ZjAwMDY3OTU3YWQ4NmRiMzUwY2MyYw==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-08-05T18:24:19Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-08-05T18:24:19Z"}, "message": "i386.h (FUNCTION_OK_FOR_SIBCALL): Not OK if DECL's return type is a float mode...\n\n\t* i386.h (FUNCTION_OK_FOR_SIBCALL):  Not OK if DECL's return\n\ttype is a float mode, cfun->decl's return type is not, and\n\tTARGET_FLOAT_RETURNS_IN_80387.\n\n\t* gcc.c-torture/execute/20000731-1.x: Delete.\n\nFrom-SVN: r35506", "tree": {"sha": "c0c1b04a63c7ba64a04c706fb2299f9d6ddaa1ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0c1b04a63c7ba64a04c706fb2299f9d6ddaa1ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26f2c02a97d337b9d4f00067957ad86db350cc2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26f2c02a97d337b9d4f00067957ad86db350cc2c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26f2c02a97d337b9d4f00067957ad86db350cc2c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26f2c02a97d337b9d4f00067957ad86db350cc2c/comments", "author": null, "committer": null, "parents": [{"sha": "0681921da12cb172489157f10e460f31f5ee320f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0681921da12cb172489157f10e460f31f5ee320f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0681921da12cb172489157f10e460f31f5ee320f"}], "stats": {"total": 27, "additions": 20, "deletions": 7}, "files": [{"sha": "78006cf794aff2fc03b4c34718a680c98d882688", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26f2c02a97d337b9d4f00067957ad86db350cc2c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26f2c02a97d337b9d4f00067957ad86db350cc2c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=26f2c02a97d337b9d4f00067957ad86db350cc2c", "patch": "@@ -1,3 +1,9 @@\n+2000-08-05  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* i386.h (FUNCTION_OK_FOR_SIBCALL):  Not OK if DECL's return\n+\ttype is a float mode, cfun->decl's return type is not, and\n+\tTARGET_FLOAT_RETURNS_IN_80387.\n+\n 2000-08-04  Andreas Schwab  <schwab@suse.de>\n \n \t* cppmain.c (cb_def_pragma): Skip the first two tokens from the"}, {"sha": "62f5fb0e568e701198dafa06a78f8801deb7a8c6", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26f2c02a97d337b9d4f00067957ad86db350cc2c/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26f2c02a97d337b9d4f00067957ad86db350cc2c/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=26f2c02a97d337b9d4f00067957ad86db350cc2c", "patch": "@@ -1319,10 +1319,16 @@ typedef struct ix86_args {\n \n #define FUNCTION_ARG_PARTIAL_NREGS(CUM, MODE, TYPE, NAMED) 0\n \n-/* If PIC, we cannot optimize sibling calls to global functions\n-   because the PLT requires %ebx live.  */\n-#define FUNCTION_OK_FOR_SIBCALL(DECL) \\\n-  (DECL && (! flag_pic || ! TREE_PUBLIC (DECL)))\n+/* If PIC, we cannot make sibling calls to global functions\n+   because the PLT requires %ebx live.\n+   If we are returning floats on the register stack, we cannot make\n+   sibling calls to functions that return floats.  (The stack adjust\n+   instruction will wind up after the sibcall jump, and not be executed.) */\n+#define FUNCTION_OK_FOR_SIBCALL(DECL) (DECL \\\n+   && (! flag_pic || ! TREE_PUBLIC (DECL)) \\\n+   && (! TARGET_FLOAT_RETURNS_IN_80387 \\\n+       || ! FLOAT_MODE_P (TYPE_MODE (TREE_TYPE (TREE_TYPE (DECL)))) \\\n+       || FLOAT_MODE_P (TYPE_MODE (TREE_TYPE (TREE_TYPE (cfun->decl))))))\n \n /* This macro is invoked just before the start of a function.\n    It is used here to output code for -fpic that will load the"}, {"sha": "aca5368d4654e61bd6ec69170c5447aad3e30360", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26f2c02a97d337b9d4f00067957ad86db350cc2c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26f2c02a97d337b9d4f00067957ad86db350cc2c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=26f2c02a97d337b9d4f00067957ad86db350cc2c", "patch": "@@ -1,3 +1,7 @@\n+2000-08-05  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* gcc.c-torture/execute/20000731-1.x: Delete.  \n+\n 2000-08-04  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* lib/gcc-dg.exp: Set up TORTURE_OPTIONS, torture_with_loops,"}, {"sha": "8d4b6e23f33336b7b4838593dfa892a379e53a41", "filename": "gcc/testsuite/gcc.c-torture/execute/20000731-1.x", "status": "removed", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0681921da12cb172489157f10e460f31f5ee320f/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20000731-1.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0681921da12cb172489157f10e460f31f5ee320f/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20000731-1.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20000731-1.x?ref=0681921da12cb172489157f10e460f31f5ee320f", "patch": "@@ -1,3 +0,0 @@\n-# Doesn't work.  Hasn't worked ever, I think.\n-set torture_execute_xfail \"i?86-*-*\"\n-return 0"}]}