{"sha": "0b09835f1f9a32e9a4d30d47692d2f4809db6bb3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGIwOTgzNWYxZjlhMzJlOWE0ZDMwZDQ3NjkyZDJmNDgwOWRiNmJiMw==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonber@gnat.com", "date": "2001-12-11T23:27:40Z"}, "committer": {"name": "Geert Bosch", "email": "bosch@gcc.gnu.org", "date": "2001-12-11T23:27:40Z"}, "message": "sem_ch10.adb (Install_Withed_Unit): If the unit is a generic instance that is the parent of other generics...\n\n\t* sem_ch10.adb (Install_Withed_Unit): If the unit is a generic instance\n\tthat is the parent of other generics, the instance body replaces the\n\tinstance node.  Retrieve the instance of the spec, which is the one\n\tthat is visible in clients and within the body.\n\nFrom-SVN: r47906", "tree": {"sha": "20471bbeacf06ec0d9b47d29e54e88c99e53cff3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20471bbeacf06ec0d9b47d29e54e88c99e53cff3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3/comments", "author": null, "committer": null, "parents": [{"sha": "598c344654d8f0119bd38977cb22898c48ec83bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/598c344654d8f0119bd38977cb22898c48ec83bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/598c344654d8f0119bd38977cb22898c48ec83bb"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "2f055e344ab8e7df6d5a8672e72359d71b44d2bf", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0b09835f1f9a32e9a4d30d47692d2f4809db6bb3", "patch": "@@ -1,3 +1,10 @@\n+2001-12-11  Ed Schonberg <schonber@gnat.com>\n+\n+\t* sem_ch10.adb (Install_Withed_Unit): If the unit is a generic instance\n+\tthat is the parent of other generics, the instance body replaces the \n+\tinstance node.  Retrieve the instance of the spec, which is the one \n+\tthat is visible in clients and within the body.\n+\n 2001-12-11  Vincent Celier <celier@gnat.com>\n \n \t* gnatmain.adb: Initial version."}, {"sha": "8a1cc690eac5bbc8c9cd705925a8587e0b159b77", "filename": "gcc/ada/sem_ch10.adb", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3/gcc%2Fada%2Fsem_ch10.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b09835f1f9a32e9a4d30d47692d2f4809db6bb3/gcc%2Fada%2Fsem_ch10.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch10.adb?ref=0b09835f1f9a32e9a4d30d47692d2f4809db6bb3", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---                            $Revision: 1.402 $\n+--                            $Revision$\n --                                                                          --\n --          Copyright (C) 1992-2001 Free Software Foundation, Inc.          --\n --                                                                          --\n@@ -2708,10 +2708,21 @@ package body Sem_Ch10 is\n    -------------------------\n \n    procedure Install_Withed_Unit (With_Clause : Node_Id) is\n-      Uname : constant Entity_Id := Entity (Name (With_Clause));\n+      Uname : Entity_Id := Entity (Name (With_Clause));\n       P     : constant Entity_Id := Scope (Uname);\n \n    begin\n+      --  If the unit is a package instantiation, its body may have been\n+      --  generated for an inner instance, and the instance now denotes the\n+      --  body entity. For visibility purposes we need the instance in the\n+      --  specification.\n+\n+      if Ekind (Uname) = E_Package_Body\n+        and then Is_Generic_Instance (Uname)\n+      then\n+         Uname := Spec_Entity (Uname);\n+      end if;\n+\n       --  We do not apply the restrictions to an internal unit unless\n       --  we are compiling the internal unit as a main unit. This check\n       --  is also skipped for dummy units (for missing packages)."}]}