{"sha": "da8a9d695b3c4b9397b5d9a27660bfa48af8d707", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE4YTlkNjk1YjNjNGI5Mzk3YjVkOWEyNzY2MGJmYTQ4YWY4ZDcwNw==", "commit": {"author": {"name": "Stafford Horne", "email": "shorne@gmail.com", "date": "2021-04-20T20:33:15Z"}, "committer": {"name": "Stafford Horne", "email": "shorne@gmail.com", "date": "2021-08-14T22:23:12Z"}, "message": "or1k: Use cmodel=large when building crtstuff\n\nWhen linking gcc runtime objects into large binaries the link may fail\nwith the below errors.  This will happen even if we are building with\n-mcmodel=large.\n\n    /home/shorne/work/openrisc/output/host/lib/gcc/or1k-buildroot-linux-uclibc/10.3.0/crtbeginS.o: in function `deregister_tm_clones':\n    crtstuff.c:(.text+0x3c): relocation truncated to fit: R_OR1K_GOT16 against undefined symbol `_ITM_deregisterTMCloneTable'\n    /home/shorne/work/openrisc/output/host/lib/gcc/or1k-buildroot-linux-uclibc/10.3.0/crtbeginS.o: in function `register_tm_clones':\n    crtstuff.c:(.text+0xc0): relocation truncated to fit: R_OR1K_GOT16 against undefined symbol `_ITM_registerTMCloneTable'\n\nThis patch builds the gcc crtstuff binaries always with the\n-mcmodel=large option to ensure they can be linked into large binaries.\n\nlibgcc/ChangeLog:\n\n\tPR target/99783\n\t* config.host (or1k-*, tmake_file): Add or1k/t-crtstuff.\n\t* config/or1k/t-crtstuff: New file.", "tree": {"sha": "0370bda04efdaa76a75d853eb796b9985e4a6dd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0370bda04efdaa76a75d853eb796b9985e4a6dd6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da8a9d695b3c4b9397b5d9a27660bfa48af8d707", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da8a9d695b3c4b9397b5d9a27660bfa48af8d707", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da8a9d695b3c4b9397b5d9a27660bfa48af8d707", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da8a9d695b3c4b9397b5d9a27660bfa48af8d707/comments", "author": {"login": "stffrdhrn", "id": 2404255, "node_id": "MDQ6VXNlcjI0MDQyNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2404255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stffrdhrn", "html_url": "https://github.com/stffrdhrn", "followers_url": "https://api.github.com/users/stffrdhrn/followers", "following_url": "https://api.github.com/users/stffrdhrn/following{/other_user}", "gists_url": "https://api.github.com/users/stffrdhrn/gists{/gist_id}", "starred_url": "https://api.github.com/users/stffrdhrn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stffrdhrn/subscriptions", "organizations_url": "https://api.github.com/users/stffrdhrn/orgs", "repos_url": "https://api.github.com/users/stffrdhrn/repos", "events_url": "https://api.github.com/users/stffrdhrn/events{/privacy}", "received_events_url": "https://api.github.com/users/stffrdhrn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "stffrdhrn", "id": 2404255, "node_id": "MDQ6VXNlcjI0MDQyNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2404255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stffrdhrn", "html_url": "https://github.com/stffrdhrn", "followers_url": "https://api.github.com/users/stffrdhrn/followers", "following_url": "https://api.github.com/users/stffrdhrn/following{/other_user}", "gists_url": "https://api.github.com/users/stffrdhrn/gists{/gist_id}", "starred_url": "https://api.github.com/users/stffrdhrn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stffrdhrn/subscriptions", "organizations_url": "https://api.github.com/users/stffrdhrn/orgs", "repos_url": "https://api.github.com/users/stffrdhrn/repos", "events_url": "https://api.github.com/users/stffrdhrn/events{/privacy}", "received_events_url": "https://api.github.com/users/stffrdhrn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eff8110674ef193481d3657456a262beeb9951ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eff8110674ef193481d3657456a262beeb9951ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eff8110674ef193481d3657456a262beeb9951ff"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "8ca7a00082a85cf64d15099fdac0aaf43468c37b", "filename": "libgcc/config.host", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da8a9d695b3c4b9397b5d9a27660bfa48af8d707/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da8a9d695b3c4b9397b5d9a27660bfa48af8d707/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=da8a9d695b3c4b9397b5d9a27660bfa48af8d707", "patch": "@@ -1119,12 +1119,12 @@ nios2-*-*)\n \textra_parts=\"$extra_parts crti.o crtn.o\"\n \t;;\n or1k-*-linux*)\n-\ttmake_file=\"$tmake_file or1k/t-or1k\"\n+\ttmake_file=\"$tmake_file or1k/t-or1k or1k/t-crtstuff\"\n \ttmake_file=\"$tmake_file t-softfp-sfdf t-softfp\"\n \tmd_unwind_header=or1k/linux-unwind.h\n \t;;\n or1k-*-*)\n-\ttmake_file=\"$tmake_file or1k/t-or1k\"\n+\ttmake_file=\"$tmake_file or1k/t-or1k or1k/t-crtstuff\"\n \ttmake_file=\"$tmake_file t-softfp-sfdf t-softfp\"\n \t;;\n pdp11-*-*)"}, {"sha": "dcae7f3498e3287dc1caa325db002c22bdfd53dc", "filename": "libgcc/config/or1k/t-crtstuff", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da8a9d695b3c4b9397b5d9a27660bfa48af8d707/libgcc%2Fconfig%2For1k%2Ft-crtstuff", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da8a9d695b3c4b9397b5d9a27660bfa48af8d707/libgcc%2Fconfig%2For1k%2Ft-crtstuff", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2For1k%2Ft-crtstuff?ref=da8a9d695b3c4b9397b5d9a27660bfa48af8d707", "patch": "@@ -0,0 +1,2 @@\n+# Compile crtbeginS.o and crtendS.o with -mcmodel=large\n+CRTSTUFF_T_CFLAGS_S += -mcmodel=large"}]}