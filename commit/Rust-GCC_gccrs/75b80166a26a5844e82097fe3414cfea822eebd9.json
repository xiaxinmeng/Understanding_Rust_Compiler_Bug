{"sha": "75b80166a26a5844e82097fe3414cfea822eebd9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzViODAxNjZhMjZhNTg0NGU4MjA5N2ZlMzQxNGNmZWE4MjJlZWJkOQ==", "commit": {"author": {"name": "Steven Bosscher", "email": "stevenb@suse.de", "date": "2005-06-07T16:54:16Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2005-06-07T16:54:16Z"}, "message": "re PR tree-optimization/21847 (misscompiling of the following java code)\n\n\tPR tree-optimization/21847\n\t* tree-ssa-dce.c (mark_stmt_if_obviously_necessary): With\n\t-fnon-call-exceptions, also mark statements inherently\n\tnecessary if they may throw.\n\nFrom-SVN: r100714", "tree": {"sha": "de57d6e4b854feb8d7462b3305cd895ca216196b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de57d6e4b854feb8d7462b3305cd895ca216196b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75b80166a26a5844e82097fe3414cfea822eebd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75b80166a26a5844e82097fe3414cfea822eebd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75b80166a26a5844e82097fe3414cfea822eebd9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75b80166a26a5844e82097fe3414cfea822eebd9/comments", "author": null, "committer": null, "parents": [{"sha": "225962a09b477edd843f345218f75aaa71fea52f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/225962a09b477edd843f345218f75aaa71fea52f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/225962a09b477edd843f345218f75aaa71fea52f"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "12f036b4d6d347c18361ec779653e8c38ff0a4c6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b80166a26a5844e82097fe3414cfea822eebd9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b80166a26a5844e82097fe3414cfea822eebd9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75b80166a26a5844e82097fe3414cfea822eebd9", "patch": "@@ -1,3 +1,10 @@\n+2005-06-07  Steven Bosscher  <stevenb@suse.de>\n+\n+\tPR tree-optimization/21847\n+\t* tree-ssa-dce.c (mark_stmt_if_obviously_necessary): With\n+\t-fnon-call-exceptions, also mark statements inherently\n+\tnecessary if they may throw.\n+\n 2005-06-07  Adrian Straetling  <straetling@de.ibm.com>\n \n \t* config/s390/s390.md: (\"UNSPECV_MB\", \"UNSPECV_CAS\"): New constants."}, {"sha": "f6e62dc9c7f071b370d396b7e7d8f2bbeb4e7688", "filename": "gcc/tree-ssa-dce.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b80166a26a5844e82097fe3414cfea822eebd9/gcc%2Ftree-ssa-dce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b80166a26a5844e82097fe3414cfea822eebd9/gcc%2Ftree-ssa-dce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dce.c?ref=75b80166a26a5844e82097fe3414cfea822eebd9", "patch": "@@ -279,6 +279,15 @@ mark_stmt_if_obviously_necessary (tree stmt, bool aggressive)\n   tree op, def;\n   ssa_op_iter iter;\n \n+  /* With non-call exceptions, we have to assume that all statements could\n+     throw.  If a statement may throw, it is inherently necessary.  */\n+  if (flag_non_call_exceptions\n+      && tree_could_throw_p (stmt))\n+    {\n+      mark_stmt_necessary (stmt, true);\n+      return;\n+    }\n+\n   /* Statements that are implicitly live.  Most function calls, asm and return\n      statements are required.  Labels and BIND_EXPR nodes are kept because\n      they are control flow, and we have no way of knowing whether they can be"}]}