{"sha": "984dfd8c52a42e3e0ce4838ab77839c4abce4697", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg0ZGZkOGM1MmE0MmUzZTBjZTQ4MzhhYjc3ODM5YzRhYmNlNDY5Nw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenth@gcc.gnu.org", "date": "2005-06-02T20:09:01Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2005-06-02T20:09:01Z"}, "message": "c-typeck.c (build_indirect_ref): Build INDIRECT_REF with correct type.\n\n2005-06-02  Richard Guenther  <rguenth@gcc.gnu.org>\n\n\t* c-typeck.c (build_indirect_ref): Build INDIRECT_REF\n\twith correct type.\n\n\t* gcc.dg/wtypequal.c: New testcase.\n\nFrom-SVN: r100512", "tree": {"sha": "36ffef166730228b1ad7255108235c0102376aac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/36ffef166730228b1ad7255108235c0102376aac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/984dfd8c52a42e3e0ce4838ab77839c4abce4697", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/984dfd8c52a42e3e0ce4838ab77839c4abce4697", "html_url": "https://github.com/Rust-GCC/gccrs/commit/984dfd8c52a42e3e0ce4838ab77839c4abce4697", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/984dfd8c52a42e3e0ce4838ab77839c4abce4697/comments", "author": null, "committer": null, "parents": [{"sha": "c449e20709e969adcfe9e0a758fa9698d8949878", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c449e20709e969adcfe9e0a758fa9698d8949878", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c449e20709e969adcfe9e0a758fa9698d8949878"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "530350c0fc045b90202408fe18a45d9899923649", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=984dfd8c52a42e3e0ce4838ab77839c4abce4697", "patch": "@@ -1,3 +1,8 @@\n+2005-06-02  Richard Guenther  <rguenth@gcc.gnu.org>\n+\n+\t* c-typeck.c (build_indirect_ref): Build INDIRECT_REF\n+\twith correct type.\n+\n 2005-06-02  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* config/s390/s390.c (s390_add_execute): Do not handle out-of-pool"}, {"sha": "694eb696947964129322ca7b50a00d3828fe1c52", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=984dfd8c52a42e3e0ce4838ab77839c4abce4697", "patch": "@@ -1638,12 +1638,9 @@ build_indirect_ref (tree ptr, const char *errorstring)\n       else\n \t{\n \t  tree t = TREE_TYPE (type);\n-\t  tree mvt = t;\n \t  tree ref;\n \n-\t  if (TREE_CODE (mvt) != ARRAY_TYPE)\n-\t    mvt = TYPE_MAIN_VARIANT (mvt);\n-\t  ref = build1 (INDIRECT_REF, mvt, pointer);\n+\t  ref = build1 (INDIRECT_REF, t, pointer);\n \n \t  if (!COMPLETE_OR_VOID_TYPE_P (t) && TREE_CODE (t) != ARRAY_TYPE)\n \t    {"}, {"sha": "54647f001ef568411745fd96cee162139a7d97d7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=984dfd8c52a42e3e0ce4838ab77839c4abce4697", "patch": "@@ -1,3 +1,7 @@\n+2005-06-02  Richard Guenther  <rguenth@gcc.gnu.org>\n+\n+\t* gcc.dg/wtypequal.c: New testcase.\n+\n 2005-06-02  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR 21582"}, {"sha": "9a7189929d35f4b9206e989aa644e9b14ed5b81b", "filename": "gcc/testsuite/gcc.dg/wtypequal.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2Ftestsuite%2Fgcc.dg%2Fwtypequal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/984dfd8c52a42e3e0ce4838ab77839c4abce4697/gcc%2Ftestsuite%2Fgcc.dg%2Fwtypequal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fwtypequal.c?ref=984dfd8c52a42e3e0ce4838ab77839c4abce4697", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile } */\n+\n+int *__restrict *p;\n+void f(void)\n+{\n+  __typeof(*p) *q = p; /* { dg-bogus \"discards qualifiers\" } */\n+}"}]}