{"sha": "b3e68a792254d5e814e1f2797d66c7581dd63198", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNlNjhhNzkyMjU0ZDVlODE0ZTFmMjc5N2Q2NmM3NTgxZGQ2MzE5OA==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2001-03-10T16:33:57Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-03-10T16:33:57Z"}, "message": "toplev.c (file_name_nondirectory): Remove.\n\n\t* toplev.c (file_name_nondirectory): Remove.\n\t* toplev.h: Similarly.\n\t* dwarf2out.c (compute_section_prefix): Use lbasename instead\n\tof file_name_nondirectory.\n\t* cp/lex.c: Delete duplicate pending_lang_change.\n\t* cp/lex.c (handle_pragma_interface, handle_pragma_implementation):\n\tSimilarly.\n\t* cp/repo.c (get_base_filename, open_repo_file): Similarly.\n\t* cp/cp-tree.h: Remove file_name_nondirectory prototype.\n\nFrom-SVN: r40369", "tree": {"sha": "d953f81b3d415118c0d7a5ca54539ad4d240cdd3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d953f81b3d415118c0d7a5ca54539ad4d240cdd3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3e68a792254d5e814e1f2797d66c7581dd63198", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e68a792254d5e814e1f2797d66c7581dd63198", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3e68a792254d5e814e1f2797d66c7581dd63198", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e68a792254d5e814e1f2797d66c7581dd63198/comments", "author": null, "committer": null, "parents": [{"sha": "ea23d5400fa97028252affe38bac9ee6cb861f8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea23d5400fa97028252affe38bac9ee6cb861f8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea23d5400fa97028252affe38bac9ee6cb861f8f"}], "stats": {"total": 49, "additions": 23, "deletions": 26}, "files": [{"sha": "0d49ab4d1c46688409b4960ccbf987be7613b5e1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -1,3 +1,10 @@\n+2001-03-10  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\t* toplev.c (file_name_nondirectory): Remove.\n+\t* toplev.h: Similarly.\n+\t* dwarf2out.c (compute_section_prefix): Use lbasename instead\n+\tof file_name_nondirectory.\n+\n Sat Mar 10 10:36:45 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* mips-tdump.c (read_seek): Call xmalloc, not malloc."}, {"sha": "3f0fa1926073ad6de7e63eff858eb9a41232311a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -1,3 +1,14 @@\n+2001-03-10  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\t* cp/lex.c: Delete duplicate pending_lang_change.\n+\n+2001-03-10  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\t* cp/lex.c (handle_pragma_interface, handle_pragma_implementation):\n+\tSimilarly.\n+\t* cp/repo.c (get_base_filename, open_repo_file): Similarly.\n+\t* cp/cp-tree.h: Remove file_name_nondirectory prototype.\n+\n 2001-03-09  Zack Weinberg  <zackw@stanford.edu>\n \n \t* Make-lang.in: Add dependencies on $(TM_P_H) as appropriate."}, {"sha": "d948364c248de88c313fba31d647801cadc8f678", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -4051,7 +4051,6 @@ extern tree build_java_class_ref                PARAMS ((tree));\n /* in input.c */\n \n /* in lex.c */\n-extern char *file_name_nondirectory\t\tPARAMS ((const char *));\n extern tree make_pointer_declarator\t\tPARAMS ((tree, tree));\n extern tree make_reference_declarator\t\tPARAMS ((tree, tree));\n extern tree make_call_declarator\t\tPARAMS ((tree, tree, tree, tree));"}, {"sha": "690e66a38dadb991dfe0a10cd870c5418076383c", "filename": "gcc/cp/lex.c", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Flex.c?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -84,10 +84,6 @@ static void init_operators PARAMS ((void));\n \n #include \"cpplib.h\"\n \n-/* Pending language change.\n-   Positive is push count, negative is pop count.  */\n-int pending_lang_change = 0;\n-\n extern int yychar;\t\t/*  the lookahead symbol\t\t*/\n extern YYSTYPE yylval;\t\t/*  the semantic value of the\t\t*/\n \t\t\t\t/*  lookahead symbol\t\t\t*/\n@@ -1109,7 +1105,7 @@ handle_pragma_interface (dfile)\n   if (fname == (tree)-1)\n     return;\n   else if (fname == 0)\n-    main_filename = file_name_nondirectory (input_filename);\n+    main_filename = lbasename (input_filename);\n   else\n     main_filename = TREE_STRING_POINTER (fname);\n \n@@ -1158,7 +1154,7 @@ handle_pragma_implementation (dfile)\n \tmain_filename = main_input_filename;\n       else\n \tmain_filename = input_filename;\n-      main_filename = file_name_nondirectory (main_filename);\n+      main_filename = lbasename (main_filename);\n     }\n   else\n     {"}, {"sha": "897648a0b2849cfc691407de9f634d19f6ca1077", "filename": "gcc/cp/repo.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2Frepo.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fcp%2Frepo.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frepo.c?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -268,7 +268,7 @@ get_base_filename (filename)\n       return NULL;\n     }\n \n-  return file_name_nondirectory (filename);\n+  return lbasename (filename);\n }        \n \n static void\n@@ -281,7 +281,7 @@ open_repo_file (filename)\n   if (s == NULL)\n     return;\n \n-  p = file_name_nondirectory (s);\n+  p = lbasename (s);\n   p = strrchr (p, '.');\n   if (! p)\n     p = s + strlen (s);"}, {"sha": "573bc913c94512bbd148285ebd1ad107d9458e8f", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -4972,7 +4972,7 @@ compute_section_prefix (unit_die)\n   die_checksum (unit_die, &ctx);\n   md5_finish_ctx (&ctx, checksum);\n \n-  p = file_name_nondirectory (get_AT_string (unit_die, DW_AT_name));\n+  p = lbasename (get_AT_string (unit_die, DW_AT_name));\n   name = (char *) alloca (strlen (p) + 64);\n   sprintf (name, \"%s.\", p);\n "}, {"sha": "cfe797e0554b0d502b85294212806e3eef46a514", "filename": "gcc/toplev.c", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -1733,21 +1733,6 @@ strip_off_ending (name, len)\n     }\n }\n \n-/* Given a file name X, return the nondirectory portion.  */\n-\n-char *\n-file_name_nondirectory (x)\n-     const char *x;\n-{\n-  char *tmp = (char *) strrchr (x, '/');\n-  if (DIR_SEPARATOR != '/' && ! tmp)\n-    tmp = (char *) strrchr (x, DIR_SEPARATOR);\n-  if (tmp)\n-    return (char *) (tmp + 1);\n-  else\n-    return (char *) x;\n-}\n-\n /* Output a quoted string.  */\n \n void"}, {"sha": "6880e9fcc76004ba4b404f9710a8d85d80e691b8", "filename": "gcc/toplev.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Ftoplev.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3e68a792254d5e814e1f2797d66c7581dd63198/gcc%2Ftoplev.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.h?ref=b3e68a792254d5e814e1f2797d66c7581dd63198", "patch": "@@ -36,7 +36,6 @@ extern int read_integral_parameter\tPARAMS ((const char *, const char *,\n \t\t\t\t\t\tconst int));\n extern int count_error\t\t\tPARAMS ((int));\n extern void strip_off_ending\t\tPARAMS ((char *, int));\n-extern char *file_name_nondirectory\tPARAMS ((const char *));\n extern void print_time\t\t\tPARAMS ((const char *, long));\n extern void debug_start_source_file\tPARAMS ((const char *));\n extern void debug_end_source_file\tPARAMS ((unsigned));"}]}