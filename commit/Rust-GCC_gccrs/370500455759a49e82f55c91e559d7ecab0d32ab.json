{"sha": "370500455759a49e82f55c91e559d7ecab0d32ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcwNTAwNDU1NzU5YTQ5ZTgyZjU1YzkxZTU1OWQ3ZWNhYjBkMzJhYg==", "commit": {"author": {"name": "Trevor Saunders", "email": "tsaunders@mozilla.com", "date": "2015-02-10T03:40:20Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2015-02-10T03:40:20Z"}, "message": "Support gcov-tool without ftw.h\n\n\tgcc/\n\n\tPR gcov-profile/61889\n\t* config.in: regenerate.\n\t* configure.in: Likewise.\n\t* configure.ac: Check for ftw.h.\n\t* gcov-tool.c: Check for ftw.h before using nftw.\n\nFrom-SVN: r220566", "tree": {"sha": "87a98579e2db1bcfc8d7777f92b50a7acd6ca54b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87a98579e2db1bcfc8d7777f92b50a7acd6ca54b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/370500455759a49e82f55c91e559d7ecab0d32ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370500455759a49e82f55c91e559d7ecab0d32ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/370500455759a49e82f55c91e559d7ecab0d32ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370500455759a49e82f55c91e559d7ecab0d32ab/comments", "author": null, "committer": null, "parents": [{"sha": "2d51422f3908ac452fee07e099d046991ad8f8f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d51422f3908ac452fee07e099d046991ad8f8f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d51422f3908ac452fee07e099d046991ad8f8f6"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "f21856768d22dd521b3462baf2d9b816b563b195", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=370500455759a49e82f55c91e559d7ecab0d32ab", "patch": "@@ -1,3 +1,11 @@\n+2015-02-09  Trevor Saunders  <tsaunders@mozilla.com>\n+\n+\tPR gcov-profile/61889\n+\t* config.in: regenerate.\n+\t* configure.in: Likewise.\n+\t* configure.ac: Check for ftw.h.\n+\t* gcov-tool.c: Check for ftw.h before using nftw.\n+\n 2015-02-09  Trevor Saunders  <tsaunders@mozilla.com>\n \n \tPR lto/64076"}, {"sha": "7bde5b1509d4d1a4fa6a5ec9c259ce092bebe959", "filename": "gcc/config.in", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=370500455759a49e82f55c91e559d7ecab0d32ab", "patch": "@@ -1098,6 +1098,12 @@\n #endif\n \n \n+/* Define to 1 if you have the <ftw.h> header file. */\n+#ifndef USED_FOR_TARGET\n+#undef HAVE_FTW_H\n+#endif\n+\n+\n /* Define to 1 if you have the `fwrite_unlocked' function. */\n #ifndef USED_FOR_TARGET\n #undef HAVE_FWRITE_UNLOCKED"}, {"sha": "1a35d5a186aecc587f44ad7373de5f5ab4b80d29", "filename": "gcc/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=370500455759a49e82f55c91e559d7ecab0d32ab", "patch": "@@ -8448,7 +8448,7 @@ $as_echo \"#define GWINSZ_IN_SYS_IOCTL 1\" >>confdefs.h\n fi\n \n for ac_header in limits.h stddef.h string.h strings.h stdlib.h time.h iconv.h \\\n-\t\t fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n+\t\t fcntl.h ftw.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n \t\t sys/resource.h sys/param.h sys/times.h sys/stat.h \\\n \t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h\n do :"}, {"sha": "a553a653f92bffa17ea96b7945c53a07a2e0fec4", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=370500455759a49e82f55c91e559d7ecab0d32ab", "patch": "@@ -1028,7 +1028,7 @@ ACX_HEADER_STRING\n AC_HEADER_SYS_WAIT\n AC_HEADER_TIOCGWINSZ\n AC_CHECK_HEADERS(limits.h stddef.h string.h strings.h stdlib.h time.h iconv.h \\\n-\t\t fcntl.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n+\t\t fcntl.h ftw.h unistd.h sys/file.h sys/time.h sys/mman.h \\\n \t\t sys/resource.h sys/param.h sys/times.h sys/stat.h \\\n \t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h)\n "}, {"sha": "d63ad1c102ebe2023ffe9d22ab5970e2025faade", "filename": "gcc/gcov-tool.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fgcov-tool.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/370500455759a49e82f55c91e559d7ecab0d32ab/gcc%2Fgcov-tool.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcov-tool.c?ref=370500455759a49e82f55c91e559d7ecab0d32ab", "patch": "@@ -35,7 +35,9 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #include <stdio.h>\n #include <sys/stat.h>\n #include <unistd.h>\n+#if HAVE_FTW_H\n #include <ftw.h>\n+#endif\n #include <getopt.h>\n \n extern int gcov_profile_merge (struct gcov_info*, struct gcov_info*, int, int);\n@@ -49,6 +51,8 @@ extern void gcov_set_verbose (void);\n /* Set to verbose output mode.  */\n static bool verbose;\n \n+#if HAVE_FTW_H\n+\n /* Remove file NAME if it has a gcda suffix. */\n \n static int\n@@ -69,13 +73,18 @@ unlink_gcda_file (const char *name,\n \n   return ret;\n }\n+#endif\n \n /* Remove the gcda files in PATH recursively.  */\n \n static int\n-unlink_profile_dir (const char *path)\n+unlink_profile_dir (const char *path ATTRIBUTE_UNUSED)\n {\n+#if HAVE_FTW_H\n     return nftw(path, unlink_gcda_file, 64, FTW_DEPTH | FTW_PHYS);\n+#else\n+    return -1;\n+#endif\n }\n \n /* Output GCOV_INFO lists PROFILE to directory OUT. Note that"}]}