{"sha": "2805b53a6768deb889eb353aa72d7741507daa5b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjgwNWI1M2E2NzY4ZGViODg5ZWIzNTNhYTcyZDc3NDE1MDdkYWE1Yg==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-03-16T00:03:30Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-03-16T00:03:30Z"}, "message": "Makefile.tpl: Introduce experimental top level bootstrap support.\n\n2004-03-15  Nathanael Nerode  <neroden@gcc.gnu.org>\n\n\t* Makefile.tpl: Introduce experimental top level bootstrap support.\n\t* Makefile.in: Regenerate.\n\t* configure.in: Introduce support for top level bootstrap.\n\t* configure: Regenerate.\n\nFrom-SVN: r79515", "tree": {"sha": "416edde87f9fbc3f2433e08740d37e2d7b36c0bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/416edde87f9fbc3f2433e08740d37e2d7b36c0bb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2805b53a6768deb889eb353aa72d7741507daa5b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2805b53a6768deb889eb353aa72d7741507daa5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2805b53a6768deb889eb353aa72d7741507daa5b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2805b53a6768deb889eb353aa72d7741507daa5b/comments", "author": null, "committer": null, "parents": [{"sha": "0e8d0c5f6c33451ed8affbe560d382b33fda39e3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e8d0c5f6c33451ed8affbe560d382b33fda39e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e8d0c5f6c33451ed8affbe560d382b33fda39e3"}], "stats": {"total": 775, "additions": 709, "deletions": 66}, "files": [{"sha": "f2fc553c25ea44ef2efc3f8282c9fd6f5b5b209e", "filename": "ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2805b53a6768deb889eb353aa72d7741507daa5b/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2805b53a6768deb889eb353aa72d7741507daa5b/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=2805b53a6768deb889eb353aa72d7741507daa5b", "patch": "@@ -1,3 +1,10 @@\n+2004-03-15  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* Makefile.tpl: Introduce experimental top level bootstrap support.\n+\t* Makefile.in: Regenerate.\n+\t* configure.in: Introduce support for top level bootstrap.\n+\t* configure: Regenerate.\n+\n 2004-03-12  Eric Botcazou  <ebotcazou@gcc.gnu.org>\n             Paolo Bonzini  <bonzini@gnu.org>\n "}, {"sha": "d65d350ab113a711d9d126b4c0b014dd0ae216e9", "filename": "Makefile.in", "status": "modified", "additions": 272, "deletions": 5, "changes": 277, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2805b53a6768deb889eb353aa72d7741507daa5b/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2805b53a6768deb889eb353aa72d7741507daa5b/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=2805b53a6768deb889eb353aa72d7741507daa5b", "patch": "@@ -23555,10 +23555,13 @@ install-target-libada: installdirs\n # Don't use shared host config.cache, as it will confuse later\n # directories; GCC wants slightly different values for some\n # precious variables.  *sigh*\n+\n+# We must skip configuring if toplevel bootstrap is going.\n .PHONY: configure-gcc maybe-configure-gcc\n maybe-configure-gcc:\n configure-gcc:\n \t@test ! -f gcc/Makefile || exit 0; \\\n+\t[ -f stage_last ] && exit 0; \\\n \t[ -d gcc ] || mkdir gcc; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -23601,14 +23604,14 @@ configure-gcc:\n .PHONY: all-gcc maybe-all-gcc\n maybe-all-gcc:\n all-gcc: configure-gcc\n-\t@if [ -f gcc/stage_last ] ; then \\\n-\t  r=`${PWD_COMMAND}`; export r; \\\n-\t  s=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tif [ -f stage_last ] ; then \\\n+\t  true ; \\\n+\telif [ -f gcc/stage_last ] ; then \\\n \t  $(SET_LIB_PATH) \\\n \t  (cd gcc && $(MAKE) $(GCC_FLAGS_TO_PASS) quickstrap); \\\n \telse \\\n-\t  r=`${PWD_COMMAND}`; export r; \\\n-\t  s=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t  $(SET_LIB_PATH) \\\n \t  (cd gcc && $(MAKE) $(GCC_FLAGS_TO_PASS) all); \\\n \tfi\n@@ -23746,6 +23749,270 @@ gcc-no-fixedincludes:\n \t  mv gcc/tmp-include gcc/include 2>/dev/null; \\\n \telse true; fi\n \n+# ---------------------\n+# GCC bootstrap support\n+# ---------------------\n+\n+# We name the directories for the various stages \"stage1-gcc\",\n+# \"stage2-gcc\",\"stage3-gcc\", etc.  \n+# Unfortunately, the 'compare' process will fail (on debugging information)\n+# if any directory names are different!\n+# So in the building rule for each stage, we relocate them before and after.\n+# The current one is 'gcc', while the previous one is 'prev-gcc'.  (The\n+# current one must be 'gcc' for now because the scripts in that directory\n+# assume it.)\n+# At the end of the bootstrap, 'stage3-gcc' must be moved to 'gcc' so that\n+# libraries can find it.  Ick!\n+\n+# Bugs: This is almost certainly not parallel-make safe.\n+\n+# 'touch' doesn't work right on some platforms.\n+STAMP = echo timestamp > \n+\n+# Only build the C compiler for stage1, because that is the only one that\n+# we can guarantee will build with the native compiler, and also it is the\n+# only thing useful for building stage2. STAGE1_CFLAGS (via CFLAGS),\n+# MAKEINFO and MAKEINFOFLAGS are explicitly passed here to make them\n+# overrideable (for a bootstrap build stage1 also builds gcc.info).\n+\n+STAGE1_CFLAGS=@stage1_cflags@\n+STAGE1_LANGUAGES=@stage1_languages@\n+\n+configure-stage1-gcc:\n+\techo configure-stage1-gcc > stage_last ; \\\n+\tif [ -f stage1-gcc/Makefile ] ; then \\\n+\t  $(STAMP) configure-stage1-gcc ; \\\n+\t  exit 0; \\\n+\telse \\\n+\t  true ; \\\n+\tfi ; \\\n+\t[ -d stage1-gcc ] || mkdir stage1-gcc; \\\n+\tmv stage1-gcc gcc ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tCC=\"$(CC)\"; export CC; \\\n+\tCFLAGS=\"$(CFLAGS)\"; export CFLAGS; \\\n+\tCXX=\"$(CXX)\"; export CXX; \\\n+\tCXXFLAGS=\"$(CXXFLAGS)\"; export CXXFLAGS; \\\n+\tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n+\tAR=\"$(AR)\"; export AR; \\\n+\tAS=\"$(AS)\"; export AS; \\\n+\tCC_FOR_BUILD=\"$(CC_FOR_BUILD)\"; export CC_FOR_BUILD; \\\n+\tDLLTOOL=\"$(DLLTOOL)\"; export DLLTOOL; \\\n+\tLD=\"$(LD)\"; export LD; \\\n+\tNM=\"$(NM)\"; export NM; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n+\tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n+\tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\techo Configuring stage 1 in gcc; \\\n+\tcd gcc || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  \\.) \\\n+\t    srcdiroption=\"--srcdir=.\"; \\\n+\t    libsrcdir=\".\";; \\\n+\t  /* | [A-Za-z]:[\\\\/]*) \\\n+\t    srcdiroption=\"--srcdir=$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\t  *) \\\n+\t    srcdiroption=\"--srcdir=../$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\tesac; \\\n+\t$(SHELL) $${libsrcdir}/configure \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\tcd .. ; \\\n+\tmv gcc stage1-gcc ; \\\n+\t$(STAMP) configure-stage1-gcc\n+\n+all-stage1-gcc: configure-stage1-gcc all-bootstrap\n+\techo all-stage1-gcc > stage_last ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tmv stage1-gcc gcc ; \\\n+\tcd gcc && \\\n+\t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n+                LANGUAGES=\"$(STAGE1_LANGUAGES)\" \\\n+\t\tCFLAGS=\"$(STAGE1_CFLAGS)\" \\\n+\t\tCOVERAGE_FLAGS= || exit 1 ; \\\n+\tcd .. ; \\\n+\tmv gcc stage1-gcc ; \\\n+\t$(STAMP) all-stage1-gcc\n+\n+configure-stage2-gcc: all-stage1-gcc\n+\techo configure-stage2-gcc > stage_last ; \\\n+\tif [ -f stage2-gcc/Makefile ] ; then \\\n+\t  $(STAMP) configure-stage2-gcc ; \\\n+\t  exit 0; \\\n+\telse \\\n+\t  true ; \\\n+\tfi ; \\\n+\t[ -d stage2-gcc ] || mkdir stage2-gcc; \\\n+\tmv stage2-gcc gcc ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tCC=\"$(CC)\"; export CC; \\\n+\tCFLAGS=\"$(CFLAGS)\"; export CFLAGS; \\\n+\tCXX=\"$(CXX)\"; export CXX; \\\n+\tCXXFLAGS=\"$(CXXFLAGS)\"; export CXXFLAGS; \\\n+\tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n+\tAR=\"$(AR)\"; export AR; \\\n+\tAS=\"$(AS)\"; export AS; \\\n+\tCC_FOR_BUILD=\"$(CC_FOR_BUILD)\"; export CC_FOR_BUILD; \\\n+\tDLLTOOL=\"$(DLLTOOL)\"; export DLLTOOL; \\\n+\tLD=\"$(LD)\"; export LD; \\\n+\tNM=\"$(NM)\"; export NM; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n+\tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n+\tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\techo Configuring stage 2 in gcc; \\\n+\tcd gcc || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  \\.) \\\n+\t    srcdiroption=\"--srcdir=.\"; \\\n+\t    libsrcdir=\".\";; \\\n+\t  /* | [A-Za-z]:[\\\\/]*) \\\n+\t    srcdiroption=\"--srcdir=$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\t  *) \\\n+\t    srcdiroption=\"--srcdir=../$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\tesac; \\\n+\t$(SHELL) $${libsrcdir}/configure \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\tcd .. ; \\\n+\tmv gcc stage2-gcc ; \\\n+\t$(STAMP) configure-stage2-gcc\n+\n+# Flags to pass to stage2 and later makes.\n+BOOT_CFLAGS= -g -O2\n+POSTSTAGE1_FLAGS_TO_PASS = \\\n+\tCFLAGS=\"$(BOOT_CFLAGS)\" \\\n+\tADAC=\"\\$$(CC)\" \\\n+\tWARN_CFLAGS=\"\\$$(GCC_WARN_CFLAGS)\" \\\n+\tSTRICT_WARN=\"\\$$(STRICT2_WARN)\" \\\n+\tOUTPUT_OPTION=\"-o \\$$@\"\n+\n+all-stage2-gcc: all-stage1-gcc configure-stage2-gcc\n+\techo all-stage2-gcc > stage_last ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tmv stage2-gcc gcc ; \\\n+\tmv stage1-gcc prev-gcc ; \\\n+\tcd gcc && \\\n+\t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n+\t\tCC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tBUILD_CC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tCC_FOR_BUILD=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tSTAGE_PREFIX=$$r/prev-gcc/ \\\n+\t\t$(POSTSTAGE1_FLAGS_TO_PASS) || exit 1 ; \\\n+\tcd .. ; \\\n+\tmv prev-gcc stage1-gcc ; \\\n+\tmv gcc stage2-gcc ; \\\n+\t$(STAMP) all-stage2-gcc\n+\n+configure-stage3-gcc: all-stage2-gcc\n+\techo configure-stage3-gcc > stage_last ; \\\n+\tif [ -f stage3-gcc/Makefile ] ; then \\\n+\t  $(STAMP) configure-stage3-gcc ; \\\n+\t  exit 0; \\\n+\telse \\\n+\t  true ; \\\n+\tfi ; \\\n+\t[ -d stage3-gcc ] || mkdir stage3-gcc; \\\n+\tmv stage3-gcc gcc ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tCC=\"$(CC)\"; export CC; \\\n+\tCFLAGS=\"$(CFLAGS)\"; export CFLAGS; \\\n+\tCXX=\"$(CXX)\"; export CXX; \\\n+\tCXXFLAGS=\"$(CXXFLAGS)\"; export CXXFLAGS; \\\n+\tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n+\tAR=\"$(AR)\"; export AR; \\\n+\tAS=\"$(AS)\"; export AS; \\\n+\tCC_FOR_BUILD=\"$(CC_FOR_BUILD)\"; export CC_FOR_BUILD; \\\n+\tDLLTOOL=\"$(DLLTOOL)\"; export DLLTOOL; \\\n+\tLD=\"$(LD)\"; export LD; \\\n+\tNM=\"$(NM)\"; export NM; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n+\tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n+\tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\techo Configuring stage 3 in gcc; \\\n+\tcd gcc || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  \\.) \\\n+\t    srcdiroption=\"--srcdir=.\"; \\\n+\t    libsrcdir=\".\";; \\\n+\t  /* | [A-Za-z]:[\\\\/]*) \\\n+\t    srcdiroption=\"--srcdir=$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\t  *) \\\n+\t    srcdiroption=\"--srcdir=../$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\tesac; \\\n+\t$(SHELL) $${libsrcdir}/configure \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\tcd .. ; \\\n+\tmv gcc stage3-gcc ; \\\n+\t$(STAMP) configure-stage3-gcc\n+\n+# Some files might not exist.  This is disabled 'cause it don't work.\n+# cp prev-gcc/objc/objc-parse.c gcc/objc/objc-parse.c || true ; \\\n+# cp prev-gcc/java/parse.c gcc/java/parse.c || true ; \\\n+# cp prev-gcc/java/parse-scan.c gcc/java/parse-scan.c || true ; \\\n+\n+all-stage3-gcc: all-stage2-gcc configure-stage3-gcc\n+\techo all-stage3-gcc > stage_last ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tmv stage2-gcc prev-gcc ; \\\n+\tmv stage3-gcc gcc ; \\\n+\tcd gcc && \\\n+\t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n+\t\tCC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tBUILD_CC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tCC_FOR_BUILD=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tSTAGE_PREFIX=$$r/prev-gcc/ \\\n+\t\t$(POSTSTAGE1_FLAGS_TO_PASS) || exit 1 ; \\\n+\tcd .. ; \\\n+\tmv prev-gcc stage2-gcc ; \\\n+\tmv gcc stage3-gcc ; \\\n+\t$(STAMP) all-stage3-gcc\n+\n+# We only want to compare .o files, so set this!\n+objext = .o\n+\n+compare: all-stage3-gcc\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\trm -f .bad_compare ; \\\n+\tcd stage3-gcc; \\\n+\tfiles=`find . -name \"*$(objext)\" -print` ; \\\n+\tcd .. ; \\\n+\tfor file in $${files} ; do \\\n+\t  cmp --ignore-initial=16 $$r/stage2-gcc/$$file $$r/stage3-gcc/$$file \\\n+\t      > /dev/null 2>&1; \\\n+\t  test $$? -eq 1 && echo $$file differs >> .bad_compare || true; \\\n+\tdone ; \\\n+\tif [ -f .bad_compare ]; then \\\n+\t  echo \"Bootstrap comparison failure!\"; \\\n+\t  cat .bad_compare; \\\n+\t  exit 1; \\\n+\telse \\\n+\t  true; \\\n+\tfi ; \\\n+        $(STAMP) compare\n+\n+.PHONY: new-bootstrap\n+# This target exists so that everything can be made in one pass.\n+# 'all-gcc' has to avoid stomping on the bootstrap-generated gcc for\n+# this to work.\n+new-bootstrap: compare\n+\tmv stage3-gcc gcc ; \\\n+\t$(MAKE) all ; \\\n+\tmv gcc stage3-gcc\n+\n # --------------------------------------\n # Dependencies between different modules\n # --------------------------------------"}, {"sha": "b565b03079d8cac5fc2a7dc3d7d921e6fffb35de", "filename": "Makefile.tpl", "status": "modified", "additions": 272, "deletions": 5, "changes": 277, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2805b53a6768deb889eb353aa72d7741507daa5b/Makefile.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2805b53a6768deb889eb353aa72d7741507daa5b/Makefile.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.tpl?ref=2805b53a6768deb889eb353aa72d7741507daa5b", "patch": "@@ -1072,10 +1072,13 @@ install-target-[+module+]: installdirs\n # Don't use shared host config.cache, as it will confuse later\n # directories; GCC wants slightly different values for some\n # precious variables.  *sigh*\n+\n+# We must skip configuring if toplevel bootstrap is going.\n .PHONY: configure-gcc maybe-configure-gcc\n maybe-configure-gcc:\n configure-gcc:\n \t@test ! -f gcc/Makefile || exit 0; \\\n+\t[ -f stage_last ] && exit 0; \\\n \t[ -d gcc ] || mkdir gcc; \\\n \tr=`${PWD_COMMAND}`; export r; \\\n \ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n@@ -1118,14 +1121,14 @@ configure-gcc:\n .PHONY: all-gcc maybe-all-gcc\n maybe-all-gcc:\n all-gcc: configure-gcc\n-\t@if [ -f gcc/stage_last ] ; then \\\n-\t  r=`${PWD_COMMAND}`; export r; \\\n-\t  s=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tif [ -f stage_last ] ; then \\\n+\t  true ; \\\n+\telif [ -f gcc/stage_last ] ; then \\\n \t  $(SET_LIB_PATH) \\\n \t  (cd gcc && $(MAKE) $(GCC_FLAGS_TO_PASS) quickstrap); \\\n \telse \\\n-\t  r=`${PWD_COMMAND}`; export r; \\\n-\t  s=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n \t  $(SET_LIB_PATH) \\\n \t  (cd gcc && $(MAKE) $(GCC_FLAGS_TO_PASS) all); \\\n \tfi\n@@ -1263,6 +1266,270 @@ gcc-no-fixedincludes:\n \t  mv gcc/tmp-include gcc/include 2>/dev/null; \\\n \telse true; fi\n \n+# ---------------------\n+# GCC bootstrap support\n+# ---------------------\n+\n+# We name the directories for the various stages \"stage1-gcc\",\n+# \"stage2-gcc\",\"stage3-gcc\", etc.  \n+# Unfortunately, the 'compare' process will fail (on debugging information)\n+# if any directory names are different!\n+# So in the building rule for each stage, we relocate them before and after.\n+# The current one is 'gcc', while the previous one is 'prev-gcc'.  (The\n+# current one must be 'gcc' for now because the scripts in that directory\n+# assume it.)\n+# At the end of the bootstrap, 'stage3-gcc' must be moved to 'gcc' so that\n+# libraries can find it.  Ick!\n+\n+# Bugs: This is almost certainly not parallel-make safe.\n+\n+# 'touch' doesn't work right on some platforms.\n+STAMP = echo timestamp > \n+\n+# Only build the C compiler for stage1, because that is the only one that\n+# we can guarantee will build with the native compiler, and also it is the\n+# only thing useful for building stage2. STAGE1_CFLAGS (via CFLAGS),\n+# MAKEINFO and MAKEINFOFLAGS are explicitly passed here to make them\n+# overrideable (for a bootstrap build stage1 also builds gcc.info).\n+\n+STAGE1_CFLAGS=@stage1_cflags@\n+STAGE1_LANGUAGES=@stage1_languages@\n+\n+configure-stage1-gcc:\n+\techo configure-stage1-gcc > stage_last ; \\\n+\tif [ -f stage1-gcc/Makefile ] ; then \\\n+\t  $(STAMP) configure-stage1-gcc ; \\\n+\t  exit 0; \\\n+\telse \\\n+\t  true ; \\\n+\tfi ; \\\n+\t[ -d stage1-gcc ] || mkdir stage1-gcc; \\\n+\tmv stage1-gcc gcc ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tCC=\"$(CC)\"; export CC; \\\n+\tCFLAGS=\"$(CFLAGS)\"; export CFLAGS; \\\n+\tCXX=\"$(CXX)\"; export CXX; \\\n+\tCXXFLAGS=\"$(CXXFLAGS)\"; export CXXFLAGS; \\\n+\tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n+\tAR=\"$(AR)\"; export AR; \\\n+\tAS=\"$(AS)\"; export AS; \\\n+\tCC_FOR_BUILD=\"$(CC_FOR_BUILD)\"; export CC_FOR_BUILD; \\\n+\tDLLTOOL=\"$(DLLTOOL)\"; export DLLTOOL; \\\n+\tLD=\"$(LD)\"; export LD; \\\n+\tNM=\"$(NM)\"; export NM; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n+\tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n+\tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\techo Configuring stage 1 in gcc; \\\n+\tcd gcc || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  \\.) \\\n+\t    srcdiroption=\"--srcdir=.\"; \\\n+\t    libsrcdir=\".\";; \\\n+\t  /* | [A-Za-z]:[\\\\/]*) \\\n+\t    srcdiroption=\"--srcdir=$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\t  *) \\\n+\t    srcdiroption=\"--srcdir=../$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\tesac; \\\n+\t$(SHELL) $${libsrcdir}/configure \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\tcd .. ; \\\n+\tmv gcc stage1-gcc ; \\\n+\t$(STAMP) configure-stage1-gcc\n+\n+all-stage1-gcc: configure-stage1-gcc all-bootstrap\n+\techo all-stage1-gcc > stage_last ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tmv stage1-gcc gcc ; \\\n+\tcd gcc && \\\n+\t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n+                LANGUAGES=\"$(STAGE1_LANGUAGES)\" \\\n+\t\tCFLAGS=\"$(STAGE1_CFLAGS)\" \\\n+\t\tCOVERAGE_FLAGS= || exit 1 ; \\\n+\tcd .. ; \\\n+\tmv gcc stage1-gcc ; \\\n+\t$(STAMP) all-stage1-gcc\n+\n+configure-stage2-gcc: all-stage1-gcc\n+\techo configure-stage2-gcc > stage_last ; \\\n+\tif [ -f stage2-gcc/Makefile ] ; then \\\n+\t  $(STAMP) configure-stage2-gcc ; \\\n+\t  exit 0; \\\n+\telse \\\n+\t  true ; \\\n+\tfi ; \\\n+\t[ -d stage2-gcc ] || mkdir stage2-gcc; \\\n+\tmv stage2-gcc gcc ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tCC=\"$(CC)\"; export CC; \\\n+\tCFLAGS=\"$(CFLAGS)\"; export CFLAGS; \\\n+\tCXX=\"$(CXX)\"; export CXX; \\\n+\tCXXFLAGS=\"$(CXXFLAGS)\"; export CXXFLAGS; \\\n+\tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n+\tAR=\"$(AR)\"; export AR; \\\n+\tAS=\"$(AS)\"; export AS; \\\n+\tCC_FOR_BUILD=\"$(CC_FOR_BUILD)\"; export CC_FOR_BUILD; \\\n+\tDLLTOOL=\"$(DLLTOOL)\"; export DLLTOOL; \\\n+\tLD=\"$(LD)\"; export LD; \\\n+\tNM=\"$(NM)\"; export NM; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n+\tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n+\tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\techo Configuring stage 2 in gcc; \\\n+\tcd gcc || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  \\.) \\\n+\t    srcdiroption=\"--srcdir=.\"; \\\n+\t    libsrcdir=\".\";; \\\n+\t  /* | [A-Za-z]:[\\\\/]*) \\\n+\t    srcdiroption=\"--srcdir=$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\t  *) \\\n+\t    srcdiroption=\"--srcdir=../$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\tesac; \\\n+\t$(SHELL) $${libsrcdir}/configure \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\tcd .. ; \\\n+\tmv gcc stage2-gcc ; \\\n+\t$(STAMP) configure-stage2-gcc\n+\n+# Flags to pass to stage2 and later makes.\n+BOOT_CFLAGS= -g -O2\n+POSTSTAGE1_FLAGS_TO_PASS = \\\n+\tCFLAGS=\"$(BOOT_CFLAGS)\" \\\n+\tADAC=\"\\$$(CC)\" \\\n+\tWARN_CFLAGS=\"\\$$(GCC_WARN_CFLAGS)\" \\\n+\tSTRICT_WARN=\"\\$$(STRICT2_WARN)\" \\\n+\tOUTPUT_OPTION=\"-o \\$$@\"\n+\n+all-stage2-gcc: all-stage1-gcc configure-stage2-gcc\n+\techo all-stage2-gcc > stage_last ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tmv stage2-gcc gcc ; \\\n+\tmv stage1-gcc prev-gcc ; \\\n+\tcd gcc && \\\n+\t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n+\t\tCC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tBUILD_CC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tCC_FOR_BUILD=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tSTAGE_PREFIX=$$r/prev-gcc/ \\\n+\t\t$(POSTSTAGE1_FLAGS_TO_PASS) || exit 1 ; \\\n+\tcd .. ; \\\n+\tmv prev-gcc stage1-gcc ; \\\n+\tmv gcc stage2-gcc ; \\\n+\t$(STAMP) all-stage2-gcc\n+\n+configure-stage3-gcc: all-stage2-gcc\n+\techo configure-stage3-gcc > stage_last ; \\\n+\tif [ -f stage3-gcc/Makefile ] ; then \\\n+\t  $(STAMP) configure-stage3-gcc ; \\\n+\t  exit 0; \\\n+\telse \\\n+\t  true ; \\\n+\tfi ; \\\n+\t[ -d stage3-gcc ] || mkdir stage3-gcc; \\\n+\tmv stage3-gcc gcc ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tCC=\"$(CC)\"; export CC; \\\n+\tCFLAGS=\"$(CFLAGS)\"; export CFLAGS; \\\n+\tCXX=\"$(CXX)\"; export CXX; \\\n+\tCXXFLAGS=\"$(CXXFLAGS)\"; export CXXFLAGS; \\\n+\tTOPLEVEL_CONFIGURE_ARGUMENTS=\"$(TOPLEVEL_CONFIGURE_ARGUMENTS)\"; export TOPLEVEL_CONFIGURE_ARGUMENTS; \\\n+\tAR=\"$(AR)\"; export AR; \\\n+\tAS=\"$(AS)\"; export AS; \\\n+\tCC_FOR_BUILD=\"$(CC_FOR_BUILD)\"; export CC_FOR_BUILD; \\\n+\tDLLTOOL=\"$(DLLTOOL)\"; export DLLTOOL; \\\n+\tLD=\"$(LD)\"; export LD; \\\n+\tNM=\"$(NM)\"; export NM; \\\n+\tRANLIB=\"$(RANLIB)\"; export RANLIB; \\\n+\tWINDRES=\"$(WINDRES)\"; export WINDRES; \\\n+\tOBJCOPY=\"$(OBJCOPY)\"; export OBJCOPY; \\\n+\tOBJDUMP=\"$(OBJDUMP)\"; export OBJDUMP; \\\n+\techo Configuring stage 3 in gcc; \\\n+\tcd gcc || exit 1; \\\n+\tcase $(srcdir) in \\\n+\t  \\.) \\\n+\t    srcdiroption=\"--srcdir=.\"; \\\n+\t    libsrcdir=\".\";; \\\n+\t  /* | [A-Za-z]:[\\\\/]*) \\\n+\t    srcdiroption=\"--srcdir=$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\t  *) \\\n+\t    srcdiroption=\"--srcdir=../$(srcdir)/gcc\"; \\\n+\t    libsrcdir=\"$$s/gcc\";; \\\n+\tesac; \\\n+\t$(SHELL) $${libsrcdir}/configure \\\n+\t  $(HOST_CONFIGARGS) $${srcdiroption} ; \\\n+\tcd .. ; \\\n+\tmv gcc stage3-gcc ; \\\n+\t$(STAMP) configure-stage3-gcc\n+\n+# Some files might not exist.  This is disabled 'cause it don't work.\n+# cp prev-gcc/objc/objc-parse.c gcc/objc/objc-parse.c || true ; \\\n+# cp prev-gcc/java/parse.c gcc/java/parse.c || true ; \\\n+# cp prev-gcc/java/parse-scan.c gcc/java/parse-scan.c || true ; \\\n+\n+all-stage3-gcc: all-stage2-gcc configure-stage3-gcc\n+\techo all-stage3-gcc > stage_last ; \\\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\tmv stage2-gcc prev-gcc ; \\\n+\tmv stage3-gcc gcc ; \\\n+\tcd gcc && \\\n+\t$(MAKE) $(GCC_FLAGS_TO_PASS) \\\n+\t\tCC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tBUILD_CC=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tCC_FOR_BUILD=\"$(STAGE_CC_WRAPPER) $$r/prev-gcc/xgcc$(exeext) -B$$r/prev-gcc/ -B$(build_tooldir)/bin/\" \\\n+\t\tSTAGE_PREFIX=$$r/prev-gcc/ \\\n+\t\t$(POSTSTAGE1_FLAGS_TO_PASS) || exit 1 ; \\\n+\tcd .. ; \\\n+\tmv prev-gcc stage2-gcc ; \\\n+\tmv gcc stage3-gcc ; \\\n+\t$(STAMP) all-stage3-gcc\n+\n+# We only want to compare .o files, so set this!\n+objext = .o\n+\n+compare: all-stage3-gcc\n+\tr=`${PWD_COMMAND}`; export r; \\\n+\ts=`cd $(srcdir); ${PWD_COMMAND}`; export s; \\\n+\trm -f .bad_compare ; \\\n+\tcd stage3-gcc; \\\n+\tfiles=`find . -name \"*$(objext)\" -print` ; \\\n+\tcd .. ; \\\n+\tfor file in $${files} ; do \\\n+\t  cmp --ignore-initial=16 $$r/stage2-gcc/$$file $$r/stage3-gcc/$$file \\\n+\t      > /dev/null 2>&1; \\\n+\t  test $$? -eq 1 && echo $$file differs >> .bad_compare || true; \\\n+\tdone ; \\\n+\tif [ -f .bad_compare ]; then \\\n+\t  echo \"Bootstrap comparison failure!\"; \\\n+\t  cat .bad_compare; \\\n+\t  exit 1; \\\n+\telse \\\n+\t  true; \\\n+\tfi ; \\\n+        $(STAMP) compare\n+\n+.PHONY: new-bootstrap\n+# This target exists so that everything can be made in one pass.\n+# 'all-gcc' has to avoid stomping on the bootstrap-generated gcc for\n+# this to work.\n+new-bootstrap: compare\n+\tmv stage3-gcc gcc ; \\\n+\t$(MAKE) all ; \\\n+\tmv gcc stage3-gcc\n+\n # --------------------------------------\n # Dependencies between different modules\n # --------------------------------------"}, {"sha": "0efa37b6d7e768a955d4d7a9b90aff23896a069d", "filename": "configure", "status": "modified", "additions": 109, "deletions": 53, "changes": 162, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2805b53a6768deb889eb353aa72d7741507daa5b/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2805b53a6768deb889eb353aa72d7741507daa5b/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=2805b53a6768deb889eb353aa72d7741507daa5b", "patch": "@@ -21,6 +21,8 @@ ac_help=\"$ac_help\n ac_help=\"$ac_help\n   --enable-maintainer-mode enable make rules and dependencies not useful\n                           (and sometimes confusing) to the casual installer\"\n+ac_help=\"$ac_help\n+  --enable-werror         enable -Werror in bootstrap stage2 and later\"\n \n # Initialize some variables set by options.\n # The variables have the same names as the options, with\n@@ -579,7 +581,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:583: checking host system type\" >&5\n+echo \"configure:585: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -600,7 +602,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:604: checking target system type\" >&5\n+echo \"configure:606: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -618,7 +620,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:622: checking build system type\" >&5\n+echo \"configure:624: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -673,7 +675,7 @@ test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:677: checking for a BSD compatible install\" >&5\n+echo \"configure:679: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1852,7 +1854,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1856: checking for $ac_word\" >&5\n+echo \"configure:1858: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1882,7 +1884,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1886: checking for $ac_word\" >&5\n+echo \"configure:1888: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1933,7 +1935,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1937: checking for $ac_word\" >&5\n+echo \"configure:1939: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1965,7 +1967,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1969: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1971: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1976,12 +1978,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1980 \"configure\"\n+#line 1982 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1985: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1987: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -2007,12 +2009,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:2011: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:2013: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:2016: checking whether we are using GNU C\" >&5\n+echo \"configure:2018: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2021,7 +2023,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2025: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2027: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -2040,7 +2042,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:2044: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:2046: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2076,7 +2078,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}gnatbind\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2080: checking for $ac_word\" >&5\n+echo \"configure:2082: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GNATBIND'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2108,7 +2110,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"gnatbind\", so it can be a program name with args.\n set dummy gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2112: checking for $ac_word\" >&5\n+echo \"configure:2114: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GNATBIND'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2141,7 +2143,7 @@ fi\n fi\n \n echo $ac_n \"checking whether compiler driver understands Ada\"\"... $ac_c\" 1>&6\n-echo \"configure:2145: checking whether compiler driver understands Ada\" >&5\n+echo \"configure:2147: checking whether compiler driver understands Ada\" >&5\n if eval \"test \\\"`echo '$''{'acx_cv_cc_gcc_supports_ada'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2171,6 +2173,10 @@ else\n fi\n \n \n+# By default, C is the only stage 1 langauge.\n+stage1_languages=c\n+\n+\n # Figure out what language subdirectories are present.\n # Look if the user specified --enable-languages=\"...\"; if not, use\n # the environment variable $LANGUAGES if defined. $LANGUAGES might\n@@ -2233,10 +2239,11 @@ if test -d ${srcdir}/gcc; then\n       ${srcdir}/gcc/[*]/config-lang.in) ;;\n       *)\n         # From the config-lang.in, get $language, $target_libs, \n-        # $lang_dirs, and $build_by_default\n+        # $lang_dirs, $boot_language, and $build_by_default\n         language=\n         target_libs=\n         lang_dirs=\n+        boot_language=\n         build_by_default=\n         . ${lang_frag}\n         # This is quite sensitive to the ordering of the case statement arms.\n@@ -2269,10 +2276,18 @@ if test -d ${srcdir}/gcc; then\n         case $add_this_lang in\n \t  no)\n             # Remove language-dependent dirs.\n-            eval noconfigdirs='\"$noconfigdirs \"'\\\"$target_libs $lang_dirs\\\" ;;\n+            eval noconfigdirs='\"$noconfigdirs \"'\\\"$target_libs $lang_dirs\\\"\n+\t    ;;\n           *)\n \t    new_enable_languages=\"$new_enable_languages,$language\"\n-\t    missing_languages=`echo \"$missing_languages\" | sed \"s/,$language,/,/\"` ;;\n+\t    missing_languages=`echo \"$missing_languages\" | sed \"s/,$language,/,/\"`\n+\t    case ${boot_language} in\n+\t      yes)\n+\t\t# Add to (space-separated) list of stage 1 languages.\n+\t\tstage1_languages=\"${stage1_languages} ${language}\"\n+\t\t;;\n+\t    esac\n+\t    ;;\n         esac\n         ;;\n     esac\n@@ -3219,7 +3234,7 @@ test -n \"$target_alias\" && ncn_target_tool_prefix=$target_alias-\n   # Extract the first word of \"${ncn_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3223: checking for $ac_word\" >&5\n+echo \"configure:3238: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3252,7 +3267,7 @@ if test -z \"$ac_cv_prog_AR\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3256: checking for $ac_word\" >&5\n+echo \"configure:3271: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3291,7 +3306,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3295: checking for $ac_word\" >&5\n+echo \"configure:3310: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3324,7 +3339,7 @@ if test -z \"$ac_cv_prog_AS\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3328: checking for $ac_word\" >&5\n+echo \"configure:3343: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3363,7 +3378,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3367: checking for $ac_word\" >&5\n+echo \"configure:3382: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3396,7 +3411,7 @@ if test -z \"$ac_cv_prog_DLLTOOL\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3400: checking for $ac_word\" >&5\n+echo \"configure:3415: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3435,7 +3450,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3439: checking for $ac_word\" >&5\n+echo \"configure:3454: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3468,7 +3483,7 @@ if test -z \"$ac_cv_prog_LD\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3472: checking for $ac_word\" >&5\n+echo \"configure:3487: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3507,7 +3522,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3511: checking for $ac_word\" >&5\n+echo \"configure:3526: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3540,7 +3555,7 @@ if test -z \"$ac_cv_prog_NM\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3544: checking for $ac_word\" >&5\n+echo \"configure:3559: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3579,7 +3594,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3583: checking for $ac_word\" >&5\n+echo \"configure:3598: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3612,7 +3627,7 @@ if test -z \"$ac_cv_prog_RANLIB\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3616: checking for $ac_word\" >&5\n+echo \"configure:3631: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3651,7 +3666,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3655: checking for $ac_word\" >&5\n+echo \"configure:3670: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3684,7 +3699,7 @@ if test -z \"$ac_cv_prog_WINDRES\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3688: checking for $ac_word\" >&5\n+echo \"configure:3703: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3723,7 +3738,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objcopy\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3727: checking for $ac_word\" >&5\n+echo \"configure:3742: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3756,7 +3771,7 @@ if test -z \"$ac_cv_prog_OBJCOPY\" ; then\n     # Extract the first word of \"objcopy\", so it can be a program name with args.\n set dummy objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3760: checking for $ac_word\" >&5\n+echo \"configure:3775: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3795,7 +3810,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objdump\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3799: checking for $ac_word\" >&5\n+echo \"configure:3814: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3828,7 +3843,7 @@ if test -z \"$ac_cv_prog_OBJDUMP\" ; then\n     # Extract the first word of \"objdump\", so it can be a program name with args.\n set dummy objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3832: checking for $ac_word\" >&5\n+echo \"configure:3847: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3877,7 +3892,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3881: checking for $ac_word\" >&5\n+echo \"configure:3896: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3910,7 +3925,7 @@ if test -z \"$ac_cv_prog_AR_FOR_TARGET\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3914: checking for $ac_word\" >&5\n+echo \"configure:3929: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3949,7 +3964,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3953: checking for $ac_word\" >&5\n+echo \"configure:3968: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3982,7 +3997,7 @@ if test -z \"$ac_cv_prog_AS_FOR_TARGET\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3986: checking for $ac_word\" >&5\n+echo \"configure:4001: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4021,7 +4036,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4025: checking for $ac_word\" >&5\n+echo \"configure:4040: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4054,7 +4069,7 @@ if test -z \"$ac_cv_prog_DLLTOOL_FOR_TARGET\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4058: checking for $ac_word\" >&5\n+echo \"configure:4073: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4093,7 +4108,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4097: checking for $ac_word\" >&5\n+echo \"configure:4112: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4126,7 +4141,7 @@ if test -z \"$ac_cv_prog_LD_FOR_TARGET\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4130: checking for $ac_word\" >&5\n+echo \"configure:4145: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4165,7 +4180,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4169: checking for $ac_word\" >&5\n+echo \"configure:4184: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4198,7 +4213,7 @@ if test -z \"$ac_cv_prog_NM_FOR_TARGET\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4202: checking for $ac_word\" >&5\n+echo \"configure:4217: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4237,7 +4252,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4241: checking for $ac_word\" >&5\n+echo \"configure:4256: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4270,7 +4285,7 @@ if test -z \"$ac_cv_prog_RANLIB_FOR_TARGET\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4274: checking for $ac_word\" >&5\n+echo \"configure:4289: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4309,7 +4324,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4313: checking for $ac_word\" >&5\n+echo \"configure:4328: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4342,7 +4357,7 @@ if test -z \"$ac_cv_prog_WINDRES_FOR_TARGET\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4346: checking for $ac_word\" >&5\n+echo \"configure:4361: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4409,7 +4424,7 @@ RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}\n NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}\n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:4413: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:4428: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -4430,6 +4445,44 @@ else\n fi\t\n MAINT=$MAINTAINER_MODE_TRUE\n \n+# ---------------------\n+# GCC bootstrap support\n+# ---------------------\n+\n+# Stage specific cflags for build.\n+stage1_cflags=\"-g\"\n+case $build in\n+  vax-*-*)\n+    case ${GCC} in\n+      yes) stage1_cflags=\"-g -Wa,-J\" ;;\n+      *) stage1_cflags=\"-g -J\" ;;\n+    esac ;;\n+  powerpc-*-darwin*)\n+    # The spiffy cpp-precomp chokes on some legitimate constructs in GCC\n+    # sources; use -no-cpp-precomp to get to GNU cpp.\n+    # Apple's GCC has bugs in designated initializer handling, so disable\n+    # that too.\n+    stage1_cflags=\"-g -no-cpp-precomp -DHAVE_DESIGNATED_INITIALIZERS=0\"\n+    ;;\n+esac\n+\n+\n+# Enable -Werror in bootstrap stage2 and later.\n+# Change the default to \"no\" on release branches.\n+# Check whether --enable-werror or --disable-werror was given.\n+if test \"${enable_werror+set}\" = set; then\n+  enableval=\"$enable_werror\"\n+  :\n+else\n+  enable_werror=yes\n+fi\n+\n+case ${enable_error} in\n+  yes) WERROR=-Werror ;;\n+  *) WERROR= ;;\n+esac\n+\n+\n trap '' 1 2 15\n cat > confcache <<\\EOF\n # This file is a shell script that caches the results of configure\n@@ -4599,6 +4652,7 @@ s%@host_subdir@%$host_subdir%g\n s%@target_subdir@%$target_subdir%g\n s%@CC@%$CC%g\n s%@GNATBIND@%$GNATBIND%g\n+s%@stage1_languages@%$stage1_languages%g\n /@maybe_dependencies@/r $maybe_dependencies\n s%@maybe_dependencies@%%g\n /@serialization_dependencies@/r $serialization_dependencies\n@@ -4684,6 +4738,8 @@ s%@RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE@%$RAW_CXX_FOR_TARGET_FOR_RECURSIVE_MAKE\n s%@MAINTAINER_MODE_TRUE@%$MAINTAINER_MODE_TRUE%g\n s%@MAINTAINER_MODE_FALSE@%$MAINTAINER_MODE_FALSE%g\n s%@MAINT@%$MAINT%g\n+s%@stage1_cflags@%$stage1_cflags%g\n+s%@WERROR@%$WERROR%g\n \n CEOF\n EOF"}, {"sha": "a5ba6e2cad8007aba43de0afb93515c27d4695fd", "filename": "configure.in", "status": "modified", "additions": 49, "deletions": 3, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2805b53a6768deb889eb353aa72d7741507daa5b/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2805b53a6768deb889eb353aa72d7741507daa5b/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=2805b53a6768deb889eb353aa72d7741507daa5b", "patch": "@@ -1070,6 +1070,10 @@ fi\n \n ACX_PROG_GNAT\n \n+# By default, C is the only stage 1 langauge.\n+stage1_languages=c\n+AC_SUBST(stage1_languages)\n+\n # Figure out what language subdirectories are present.\n # Look if the user specified --enable-languages=\"...\"; if not, use\n # the environment variable $LANGUAGES if defined. $LANGUAGES might\n@@ -1132,10 +1136,11 @@ if test -d ${srcdir}/gcc; then\n       ${srcdir}/gcc/[[*]]/config-lang.in) ;;\n       *)\n         # From the config-lang.in, get $language, $target_libs, \n-        # $lang_dirs, and $build_by_default\n+        # $lang_dirs, $boot_language, and $build_by_default\n         language=\n         target_libs=\n         lang_dirs=\n+        boot_language=\n         build_by_default=\n         . ${lang_frag}\n         # This is quite sensitive to the ordering of the case statement arms.\n@@ -1168,10 +1173,18 @@ if test -d ${srcdir}/gcc; then\n         case $add_this_lang in\n \t  no)\n             # Remove language-dependent dirs.\n-            eval noconfigdirs='\"$noconfigdirs \"'\\\"$target_libs $lang_dirs\\\" ;;\n+            eval noconfigdirs='\"$noconfigdirs \"'\\\"$target_libs $lang_dirs\\\"\n+\t    ;;\n           *)\n \t    new_enable_languages=\"$new_enable_languages,$language\"\n-\t    missing_languages=`echo \"$missing_languages\" | sed \"s/,$language,/,/\"` ;;\n+\t    missing_languages=`echo \"$missing_languages\" | sed \"s/,$language,/,/\"`\n+\t    case ${boot_language} in\n+\t      yes)\n+\t\t# Add to (space-separated) list of stage 1 languages.\n+\t\tstage1_languages=\"${stage1_languages} ${language}\"\n+\t\t;;\n+\t    esac\n+\t    ;;\n         esac\n         ;;\n     esac\n@@ -2184,4 +2197,37 @@ fi\n MAINT=$MAINTAINER_MODE_TRUE\n AC_SUBST(MAINT)dnl\n \n+# ---------------------\n+# GCC bootstrap support\n+# ---------------------\n+\n+# Stage specific cflags for build.\n+stage1_cflags=\"-g\"\n+case $build in\n+  vax-*-*)\n+    case ${GCC} in\n+      yes) stage1_cflags=\"-g -Wa,-J\" ;;\n+      *) stage1_cflags=\"-g -J\" ;;\n+    esac ;;\n+  powerpc-*-darwin*)\n+    # The spiffy cpp-precomp chokes on some legitimate constructs in GCC\n+    # sources; use -no-cpp-precomp to get to GNU cpp.\n+    # Apple's GCC has bugs in designated initializer handling, so disable\n+    # that too.\n+    stage1_cflags=\"-g -no-cpp-precomp -DHAVE_DESIGNATED_INITIALIZERS=0\"\n+    ;;\n+esac\n+AC_SUBST(stage1_cflags)\n+\n+# Enable -Werror in bootstrap stage2 and later.\n+# Change the default to \"no\" on release branches.\n+AC_ARG_ENABLE(werror,\n+[  --enable-werror         enable -Werror in bootstrap stage2 and later], [],\n+[enable_werror=yes])\n+case ${enable_error} in\n+  yes) WERROR=-Werror ;;\n+  *) WERROR= ;;\n+esac\n+AC_SUBST(WERROR)\n+\n AC_OUTPUT(Makefile)"}]}