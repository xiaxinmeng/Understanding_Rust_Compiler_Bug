{"sha": "8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGZiYmU5MGIyNjE0MDc4Zjc5OWY2NWM5ZTM2MDhmMWVlYzhhNDhhYg==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2007-02-06T02:50:39Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2007-02-06T02:50:39Z"}, "message": "fold-const.c (negate_expr_p): Handle CONJ_EXPR.\n\n\t* fold-const.c (negate_expr_p): Handle CONJ_EXPR.\n\t(fold_negate_expr): Likewise.\n\t\ntestsuite:\n\t* gcc.dg/builtins-20.c: Add more cases.\n\nFrom-SVN: r121639", "tree": {"sha": "cee770a0428b5a0aa4b52b29a79ff52ec15c355c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cee770a0428b5a0aa4b52b29a79ff52ec15c355c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/comments", "author": null, "committer": null, "parents": [{"sha": "792eaee2cb07b64e8f255209e93cf8d95bc0f705", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/792eaee2cb07b64e8f255209e93cf8d95bc0f705", "html_url": "https://github.com/Rust-GCC/gccrs/commit/792eaee2cb07b64e8f255209e93cf8d95bc0f705"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "947df6f73c3274223cb37cc05f7978625130a1a1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "patch": "@@ -1,3 +1,8 @@\n+2007-02-05  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* fold-const.c (negate_expr_p): Handle CONJ_EXPR.\n+\t(fold_negate_expr): Likewise.\n+\n 2007-02-05  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/30189"}, {"sha": "0b37a0f943706c4c7df6b094f274b584d9c9df67", "filename": "gcc/fold-const.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "patch": "@@ -1015,6 +1015,9 @@ negate_expr_p (tree t)\n       return negate_expr_p (TREE_OPERAND (t, 0))\n \t     && negate_expr_p (TREE_OPERAND (t, 1));\n \n+    case CONJ_EXPR:\n+      return negate_expr_p (TREE_OPERAND (t, 0));\n+\n     case PLUS_EXPR:\n       if (HONOR_SIGN_DEPENDENT_ROUNDING (TYPE_MODE (type))\n \t  || HONOR_SIGNED_ZEROS (TYPE_MODE (type)))\n@@ -1145,6 +1148,12 @@ fold_negate_expr (tree t)\n \t\t\t    fold_negate_expr (TREE_OPERAND (t, 1)));\n       break;\n       \n+    case CONJ_EXPR:\n+      if (negate_expr_p (t))\n+\treturn fold_build1 (CONJ_EXPR, type,\n+\t\t\t    fold_negate_expr (TREE_OPERAND (t, 0)));\n+      break;\n+\n     case NEGATE_EXPR:\n       return TREE_OPERAND (t, 0);\n "}, {"sha": "f22064aaf6e0d10ff64e5ef70d3f10c7d0015b85", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "patch": "@@ -1,3 +1,7 @@\n+2007-02-05  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* gcc.dg/builtins-20.c: Add more cases.\n+\n 2007-02-05  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/30189"}, {"sha": "7088075511c52718b8651b12cb4fb191f83db160", "filename": "gcc/testsuite/gcc.dg/builtins-20.c", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8fbbe90b2614078f799f65c9e3608f1eec8a48ab/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltins-20.c?ref=8fbbe90b2614078f799f65c9e3608f1eec8a48ab", "patch": "@@ -260,6 +260,18 @@ void test3(__complex__ double x, __complex__ double y, int i)\n \n   if (ccos(i ? x : ctan(y/x)) != ccos(i ? -x : -ctan(-y/x)))\n     link_error();\n+\n+  if (~x != -~-x)\n+    link_error();\n+\n+  if (ccos(~x) != ccos(-~-x))\n+    link_error();\n+\n+  if (ctan(~(x-y)) != -ctan(~(y-x)))\n+    link_error();\n+\n+  if (ctan(~(x/y)) != -ctan(~(x/-y)))\n+    link_error();\n }\n \n void test1f(float x)\n@@ -467,6 +479,18 @@ void test3f(__complex__ float x, __complex__ float y, int i)\n \n   if (ccosf(i ? x : ctanf(y/x)) != ccosf(i ? -x : -ctanf(-y/x)))\n     link_error();\n+\n+  if (~x != -~-x)\n+    link_error();\n+\n+  if (ccosf(~x) != ccosf(-~-x))\n+    link_error();\n+\n+  if (ctanf(~(x-y)) != -ctanf(~(y-x)))\n+    link_error();\n+\n+  if (ctanf(~(x/y)) != -ctanf(~(x/-y)))\n+    link_error();\n }\n \n void test1l(long double x)\n@@ -674,6 +698,18 @@ void test3l(__complex__ long double x, __complex__ long double y, int i)\n \n   if (ccosl(i ? x : ctanl(y/x)) != ccosl(i ? -x : -ctanl(-y/x)))\n     link_error();\n+\n+  if (~x != -~-x)\n+    link_error();\n+\n+  if (ccosl(~x) != ccosl(-~-x))\n+    link_error();\n+\n+  if (ctanl(~(x-y)) != -ctanl(~(y-x)))\n+    link_error();\n+\n+  if (ctanl(~(x/y)) != -ctanl(~(x/-y)))\n+    link_error();\n }\n \n int main()"}]}