{"sha": "250f234988b6231669a720c52101d3686d645072", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjUwZjIzNDk4OGI2MjMxNjY5YTcyMGM1MjEwMWQzNjg2ZDY0NTA3Mg==", "commit": {"author": {"name": "Stefan Schulze Frielinghaus", "email": "stefansf@linux.ibm.com", "date": "2021-04-20T07:51:16Z"}, "committer": {"name": "Stefan Schulze Frielinghaus", "email": "stefansf@linux.ibm.com", "date": "2021-04-20T07:51:16Z"}, "message": "testsuite: Fix up gcc.target/s390/zero-scratch-regs-1.c\n\nDepending on whether GCC is configured using --with-mode=zarch or not,\nfor the 31bit target instructions are generated either for ESA or\nz/Architecture.  For the sake of simplicity and robustness test only for\nthe latter by adding manually option -mzarch.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/s390/zero-scratch-regs-1.c: Force test to run for\n\tz/Architecture only.", "tree": {"sha": "5e36407d5995079d413a7956445fb18000687ef5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e36407d5995079d413a7956445fb18000687ef5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/250f234988b6231669a720c52101d3686d645072", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/250f234988b6231669a720c52101d3686d645072", "html_url": "https://github.com/Rust-GCC/gccrs/commit/250f234988b6231669a720c52101d3686d645072", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/250f234988b6231669a720c52101d3686d645072/comments", "author": {"login": "stefan-sf-ibm", "id": 73470131, "node_id": "MDQ6VXNlcjczNDcwMTMx", "avatar_url": "https://avatars.githubusercontent.com/u/73470131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefan-sf-ibm", "html_url": "https://github.com/stefan-sf-ibm", "followers_url": "https://api.github.com/users/stefan-sf-ibm/followers", "following_url": "https://api.github.com/users/stefan-sf-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/stefan-sf-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefan-sf-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefan-sf-ibm/subscriptions", "organizations_url": "https://api.github.com/users/stefan-sf-ibm/orgs", "repos_url": "https://api.github.com/users/stefan-sf-ibm/repos", "events_url": "https://api.github.com/users/stefan-sf-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/stefan-sf-ibm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "stefan-sf-ibm", "id": 73470131, "node_id": "MDQ6VXNlcjczNDcwMTMx", "avatar_url": "https://avatars.githubusercontent.com/u/73470131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefan-sf-ibm", "html_url": "https://github.com/stefan-sf-ibm", "followers_url": "https://api.github.com/users/stefan-sf-ibm/followers", "following_url": "https://api.github.com/users/stefan-sf-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/stefan-sf-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefan-sf-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefan-sf-ibm/subscriptions", "organizations_url": "https://api.github.com/users/stefan-sf-ibm/orgs", "repos_url": "https://api.github.com/users/stefan-sf-ibm/repos", "events_url": "https://api.github.com/users/stefan-sf-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/stefan-sf-ibm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "67378cd63d62bf0c69e966d1d202a1e586550a68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67378cd63d62bf0c69e966d1d202a1e586550a68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67378cd63d62bf0c69e966d1d202a1e586550a68"}], "stats": {"total": 95, "additions": 40, "deletions": 55}, "files": [{"sha": "1c02c0c4e5155da3efd78fa347f39ff2c4023d15", "filename": "gcc/testsuite/gcc.target/s390/zero-scratch-regs-1.c", "status": "modified", "additions": 40, "deletions": 55, "changes": 95, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/250f234988b6231669a720c52101d3686d645072/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzero-scratch-regs-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/250f234988b6231669a720c52101d3686d645072/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzero-scratch-regs-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fzero-scratch-regs-1.c?ref=250f234988b6231669a720c52101d3686d645072", "patch": "@@ -1,65 +1,50 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -fzero-call-used-regs=all -march=z13\" } */\n+/* { dg-options \"-O2 -fzero-call-used-regs=all -march=z13 -mzarch\" } */\n \n /* Ensure that all call clobbered GPRs, FPRs, and VRs are zeroed and all call\n    saved registers are kept. */\n \n void foo (void) { }\n \n-/* { dg-final { scan-assembler-times \"lhi\\t\" 6 { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lhi\\t%r0,0\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lhi\\t%r1,0\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lhi\\t%r2,0\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lhi\\t%r3,0\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lhi\\t%r4,0\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lhi\\t%r5,0\" { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler-times \"lghi\\t\" 6 } } */\n+/* { dg-final { scan-assembler \"lghi\\t%r0,0\" } } */\n+/* { dg-final { scan-assembler \"lghi\\t%r1,0\" } } */\n+/* { dg-final { scan-assembler \"lghi\\t%r2,0\" } } */\n+/* { dg-final { scan-assembler \"lghi\\t%r3,0\" } } */\n+/* { dg-final { scan-assembler \"lghi\\t%r4,0\" } } */\n+/* { dg-final { scan-assembler \"lghi\\t%r5,0\" } } */\n \n-/* { dg-final { scan-assembler-times \"lzdr\\t\" 14 { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f0\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f1\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f2\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f3\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f5\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f7\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f8\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f9\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f10\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f11\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f12\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f13\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f14\" { target { ! lp64 } } } } */\n-/* { dg-final { scan-assembler \"lzdr\\t%f15\" { target { ! lp64 } } } } */\n-\n-/* { dg-final { scan-assembler-times \"lghi\\t\" 6 { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"lghi\\t%r0,0\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"lghi\\t%r1,0\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"lghi\\t%r2,0\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"lghi\\t%r3,0\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"lghi\\t%r4,0\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"lghi\\t%r5,0\" { target { lp64 } } } } */\n-\n-/* { dg-final { scan-assembler-times \"vzero\\t\" 24 { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v0\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v1\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v2\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v3\" { target { lp64 } } } } */\n+/* { dg-final { scan-assembler-times \"vzero\\t\" 30 { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler-times \"vzero\\t\" 24 { target {   lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v0\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v1\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v2\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v3\" } } */\n /* { dg-final { scan-assembler \"vzero\\t%v4\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v5\" { target { lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v5\" } } */\n /* { dg-final { scan-assembler \"vzero\\t%v6\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v7\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v16\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v17\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v18\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v19\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v20\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v21\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v22\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v23\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v24\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v25\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v26\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v27\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v28\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v29\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v30\" { target { lp64 } } } } */\n-/* { dg-final { scan-assembler \"vzero\\t%v31\" { target { lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v7\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v8\"  { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v9\"  { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v10\" { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v11\" { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v12\" { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v13\" { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v14\" { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v15\" { target { ! lp64 } } } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v16\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v17\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v18\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v19\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v20\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v21\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v22\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v23\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v24\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v25\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v26\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v27\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v28\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v29\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v30\" } } */\n+/* { dg-final { scan-assembler \"vzero\\t%v31\" } } */"}]}