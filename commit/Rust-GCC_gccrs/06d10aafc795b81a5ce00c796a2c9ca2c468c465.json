{"sha": "06d10aafc795b81a5ce00c796a2c9ca2c468c465", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDZkMTBhYWZjNzk1YjgxYTVjZTAwYzc5NmEyYzljYTJjNDY4YzQ2NQ==", "commit": {"author": {"name": "Ira Rosen", "email": "irar@il.ibm.com", "date": "2008-05-05T07:47:49Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2008-05-05T07:47:49Z"}, "message": "re PR tree-optimization/36119 (internal compiler error: in vectorizable_assignment, at tree-vect-transform.c:3671)\n\n\tPR tree-optimization/36119\n\t* tree-vect-transform.c (vectorizable_assignment): Set NCOPIES to 1\n\tin case of SLP.\n\nFrom-SVN: r134944", "tree": {"sha": "98ef947137edf3e0bf32eafe3f4091018ee32ae2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98ef947137edf3e0bf32eafe3f4091018ee32ae2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/06d10aafc795b81a5ce00c796a2c9ca2c468c465", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06d10aafc795b81a5ce00c796a2c9ca2c468c465", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06d10aafc795b81a5ce00c796a2c9ca2c468c465", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06d10aafc795b81a5ce00c796a2c9ca2c468c465/comments", "author": {"login": "irar2", "id": 16818592, "node_id": "MDQ6VXNlcjE2ODE4NTky", "avatar_url": "https://avatars.githubusercontent.com/u/16818592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/irar2", "html_url": "https://github.com/irar2", "followers_url": "https://api.github.com/users/irar2/followers", "following_url": "https://api.github.com/users/irar2/following{/other_user}", "gists_url": "https://api.github.com/users/irar2/gists{/gist_id}", "starred_url": "https://api.github.com/users/irar2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/irar2/subscriptions", "organizations_url": "https://api.github.com/users/irar2/orgs", "repos_url": "https://api.github.com/users/irar2/repos", "events_url": "https://api.github.com/users/irar2/events{/privacy}", "received_events_url": "https://api.github.com/users/irar2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "24c0514153e41537c29f2680f86303dff8a0b496", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24c0514153e41537c29f2680f86303dff8a0b496", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24c0514153e41537c29f2680f86303dff8a0b496"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "ffc49ab08876d300d19a1a94afb855b7de723969", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=06d10aafc795b81a5ce00c796a2c9ca2c468c465", "patch": "@@ -1,3 +1,9 @@\n+2008-05-05  Ira Rosen  <irar@il.ibm.com>\n+\n+        PR tree-optimization/36119\n+\t* tree-vect-transform.c (vectorizable_assignment): Set NCOPIES to 1\n+\tin case of SLP.\n+\n 2008-06-04  Jan Hubicka  <jh@suse.cz>\n \n \ttree-optimization/36100"}, {"sha": "c65deaf2ad43aa0dd43598c8a0e5a45edabda039", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=06d10aafc795b81a5ce00c796a2c9ca2c468c465", "patch": "@@ -1,3 +1,8 @@\n+2008-05-05  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/36119\n+\t* gfortran.dg/vect/pr36119.f: New test. \n+\n 2008-05-04  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/35995"}, {"sha": "d4b11cb367924f3cb7e11425f720f70427e4bdea", "filename": "gcc/testsuite/gfortran.dg/vect/pr36119.f", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr36119.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr36119.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr36119.f?ref=06d10aafc795b81a5ce00c796a2c9ca2c468c465", "patch": "@@ -0,0 +1,29 @@\n+! { dg-do compile { target { i?86-*-* x86_64-*-* } } } \n+! { dg-options \"-O3 -mfpmath=sse -msse2 -ffree-form\" } \n+\n+SUBROUTINE check_dnucint_ana (dcore)\n+  IMPLICIT NONE\n+  INTEGER, PARAMETER :: dp=8\n+  REAL(dp), DIMENSION(10, 2), INTENT(IN),&\n+       OPTIONAL                            :: dcore\n+  INTEGER                                  :: i, j\n+  REAL(dp)                                 :: delta, nssss, od, rn, ssssm, &\n+       ssssp\n+  REAL(dp), DIMENSION(10, 2)               :: corem, corep, ncore\n+  LOGICAL                                  :: check_value\n+\n+  delta = 1.0E-8_dp\n+  od = 0.5_dp/delta\n+  ncore = od * (corep - corem)\n+  nssss = od * (ssssp - ssssm)\n+  IF (PRESENT(dcore)) THEN\n+     DO i = 1, 2\n+        DO j = 1, 10\n+           IF (.NOT.check_value(ncore(j,i), dcore(j,i), delta, 0.1_dp)) THEN\n+           END IF\n+        END DO\n+     END DO\n+  END IF\n+END SUBROUTINE check_dnucint_ana\n+\n+! { dg-final { cleanup-tree-dump \"vect\" } } "}, {"sha": "7c5b68e0fdf60957e0b2a4b4428e1b0a591cc261", "filename": "gcc/tree-vect-transform.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2Ftree-vect-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/06d10aafc795b81a5ce00c796a2c9ca2c468c465/gcc%2Ftree-vect-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-transform.c?ref=06d10aafc795b81a5ce00c796a2c9ca2c468c465", "patch": "@@ -3668,6 +3668,11 @@ vectorizable_assignment (tree stmt, block_stmt_iterator *bsi, tree *vec_stmt,\n   VEC(tree,heap) *vec_oprnds = NULL;\n   tree vop;\n \n+  /* FORNOW: SLP with multiple types is not supported. The SLP analysis \n+     verifies this, so we can safely override NCOPIES with 1 here.  */\n+  if (slp_node)\n+    ncopies = 1;\n+\n   gcc_assert (ncopies >= 1);\n   if (ncopies > 1)\n     return false; /* FORNOW */"}]}