{"sha": "70a39602ab762d1cd7a1b34b9895598c81112fe0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzBhMzk2MDJhYjc2MmQxY2Q3YTFiMzRiOTg5NTU5OGM4MTExMmZlMA==", "commit": {"author": {"name": "Ira Rosen", "email": "irar@il.ibm.com", "date": "2005-08-22T08:13:18Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2005-08-22T08:13:18Z"}, "message": "altivec.md (xorv4sf3): New.\n\n        * config/rs6000/altivec.md (xorv4sf3): New.\n        (negv4sf2, neg<mode>2): Likewise.\n\nFrom-SVN: r103335", "tree": {"sha": "5338a01a224b38113ee2a7bec5e2e617e03e7d42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5338a01a224b38113ee2a7bec5e2e617e03e7d42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/70a39602ab762d1cd7a1b34b9895598c81112fe0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70a39602ab762d1cd7a1b34b9895598c81112fe0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70a39602ab762d1cd7a1b34b9895598c81112fe0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70a39602ab762d1cd7a1b34b9895598c81112fe0/comments", "author": {"login": "irar2", "id": 16818592, "node_id": "MDQ6VXNlcjE2ODE4NTky", "avatar_url": "https://avatars.githubusercontent.com/u/16818592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/irar2", "html_url": "https://github.com/irar2", "followers_url": "https://api.github.com/users/irar2/followers", "following_url": "https://api.github.com/users/irar2/following{/other_user}", "gists_url": "https://api.github.com/users/irar2/gists{/gist_id}", "starred_url": "https://api.github.com/users/irar2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/irar2/subscriptions", "organizations_url": "https://api.github.com/users/irar2/orgs", "repos_url": "https://api.github.com/users/irar2/repos", "events_url": "https://api.github.com/users/irar2/events{/privacy}", "received_events_url": "https://api.github.com/users/irar2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "85199961c5884ea82b3757c5671c44562861c55b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85199961c5884ea82b3757c5671c44562861c55b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85199961c5884ea82b3757c5671c44562861c55b"}], "stats": {"total": 79, "additions": 78, "deletions": 1}, "files": [{"sha": "968c435ca8b64c98b3c72d3ee7e11ba9f4664ed7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=70a39602ab762d1cd7a1b34b9895598c81112fe0", "patch": "@@ -1,3 +1,8 @@\n+2005-08-22 Ira Rosen <irar@il.ibm.com>\n+\n+\t* config/rs6000/altivec.md (xorv4sf3): New.\n+\t(negv4sf2, neg<mode>2): Likewise.\n+\n 2005-08-21  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/23485"}, {"sha": "9016b0d09a0589ce9281a8045e2e4a2adfc4b92b", "filename": "gcc/config/rs6000/altivec.md", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2Fconfig%2Frs6000%2Faltivec.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2Fconfig%2Frs6000%2Faltivec.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Faltivec.md?ref=70a39602ab762d1cd7a1b34b9895598c81112fe0", "patch": "@@ -1039,6 +1039,14 @@\n   \"vxor %0,%1,%2\"\n   [(set_attr \"type\" \"vecsimple\")])\n \n+(define_insn \"xorv4sf3\"\n+  [(set (match_operand:V4SF 0 \"register_operand\" \"=v\")\n+        (xor:V4SF (match_operand:V4SF 1 \"register_operand\" \"v\")\n+                  (match_operand:V4SF 2 \"register_operand\" \"v\")))]\n+  \"TARGET_ALTIVEC\"\n+  \"vxor %0,%1,%2\" \n+  [(set_attr \"type\" \"vecsimple\")])\n+\n (define_insn \"one_cmpl<mode>2\"\n   [(set (match_operand:VI 0 \"register_operand\" \"=v\")\n         (not:VI (match_operand:VI 1 \"register_operand\" \"v\")))]\n@@ -2161,3 +2169,37 @@\n   \"TARGET_ALTIVEC\"\n   \"vperm %0,%1,%2,%3\"\n   [(set_attr \"type\" \"vecperm\")])\n+\n+(define_expand \"neg<mode>2\"\n+  [(use (match_operand:VI 0 \"register_operand\" \"\"))\n+   (use (match_operand:VI 1 \"register_operand\" \"\"))]\n+  \"TARGET_ALTIVEC\"\n+  \"\n+{\n+  rtx vzero;\n+\n+  vzero = gen_reg_rtx (GET_MODE (operands[0]));\n+  emit_insn (gen_altivec_vspltis<VI_char> (vzero, const0_rtx));\n+  emit_insn (gen_sub<mode>3 (operands[0], vzero, operands[1])); \n+  \n+  DONE;\n+}\")\n+\n+(define_expand \"negv4sf2\"\n+  [(use (match_operand:V4SF 0 \"register_operand\" \"\"))\n+   (use (match_operand:V4SF 1 \"register_operand\" \"\"))]\n+  \"TARGET_ALTIVEC\"\n+  \"\n+{\n+  rtx neg0;\n+\n+  /* Generate [-0.0, -0.0, -0.0, -0.0].  */\n+  neg0 = gen_reg_rtx (V4SFmode);\n+  emit_insn (gen_altivec_vspltisw_v4sf (neg0, constm1_rtx));\n+  emit_insn (gen_altivec_vslw_v4sf (neg0, neg0, neg0));\n+\n+  /* XOR */\n+  emit_insn (gen_xorv4sf3 (operands[0], neg0, operands[1])); \n+    \n+  DONE;\n+}\")"}, {"sha": "518c6a00496ea2842282613a5941e58dcf2bb4c3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=70a39602ab762d1cd7a1b34b9895598c81112fe0", "patch": "@@ -1,3 +1,8 @@\n+2005-08-22  Ira Rosen  <irar@il.ibm.com>   \n+\n+\t* gcc.dg/vect/vect-22.c: Add test for float. All four loops\n+\tare vectorizable.\n+\n 2005-08-21  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n \t\n \t* d_lines_1.f, d_lines_2.f, d_lines_3.f, d_lines_4.f,"}, {"sha": "af46e8216ed8932fe4c014a20359ff9a8b27cb2f", "filename": "gcc/testsuite/gcc.dg/vect/vect-22.c", "status": "modified", "additions": 26, "deletions": 1, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-22.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/70a39602ab762d1cd7a1b34b9895598c81112fe0/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-22.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-22.c?ref=70a39602ab762d1cd7a1b34b9895598c81112fe0", "patch": "@@ -42,6 +42,17 @@ main1 ()\n      1,1,0,0,1,0,1,0,\n      1,1,0,0,1,0,1,0};\n \n+  float fa[N];\n+  float fb[N] =\n+    {1,1,0,0,1,0,1,0,\n+     1,1,0,0,1,0,1,0,\n+     1,1,0,0,1,0,1,0,\n+     1,1,0,0,1,0,1,0,\n+     1,1,0,0,1,0,1,0,\n+     1,1,0,0,1,0,1,0,\n+     1,1,0,0,1,0,1,0,\n+     1,1,0,0,1,0,1,0};\n+\n   /* Check ints.  */\n \n   for (i = 0; i < N; i++)\n@@ -84,6 +95,20 @@ main1 ()\n         abort ();\n     }\n \n+  /* Check floats.  */\n+\n+  for (i = 0; i < N; i++)\n+    {\n+      fa[i] = -fb[i];\n+    }\n+\n+  /* check results:  */\n+  for (i = 0; i <N; i++)\n+    {\n+      if (fa[i] != -fb[i])\n+        abort ();\n+    }\n+\n   return 0;\n }\n \n@@ -94,7 +119,7 @@ int main (void)\n   return main1 ();\n }\n \n-/* { dg-final { scan-tree-dump-times \"vectorized 3 loops\" 1 \"vect\" { xfail *-*-* } } } */\n+/* { dg-final { scan-tree-dump-times \"vectorized 4 loops\" 1 \"vect\" } } */\n /* { dg-final { scan-tree-dump-times \"Vectorizing an unaligned access\" 0 \"vect\" } } */\n \n /* { dg-final { cleanup-tree-dump \"vect\" } } */"}]}