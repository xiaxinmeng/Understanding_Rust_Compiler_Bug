{"sha": "245ef1609299d7c4975e8cbd9e50586474c86aff", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ1ZWYxNjA5Mjk5ZDdjNDk3NWU4Y2JkOWU1MDU4NjQ3NGM4NmFmZg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2012-09-29T12:33:19Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2012-09-29T12:33:19Z"}, "message": "* tree-call-cdce.c (shrink_wrap_one_built_in_call): Update profile.\n\nFrom-SVN: r191852", "tree": {"sha": "24a3edbb8fa70fb122c2fcaf01b36d2f54c98705", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24a3edbb8fa70fb122c2fcaf01b36d2f54c98705"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/245ef1609299d7c4975e8cbd9e50586474c86aff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/245ef1609299d7c4975e8cbd9e50586474c86aff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/245ef1609299d7c4975e8cbd9e50586474c86aff", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/245ef1609299d7c4975e8cbd9e50586474c86aff/comments", "author": null, "committer": null, "parents": [{"sha": "32d55567d575deabacc37245d4604a605b3fcc05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32d55567d575deabacc37245d4604a605b3fcc05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32d55567d575deabacc37245d4604a605b3fcc05"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "58c772fa03e97e01a758cf880449b62fb7960d73", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/245ef1609299d7c4975e8cbd9e50586474c86aff/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/245ef1609299d7c4975e8cbd9e50586474c86aff/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=245ef1609299d7c4975e8cbd9e50586474c86aff", "patch": "@@ -1,3 +1,7 @@\n+2012-09-28  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-call-cdce.c (shrink_wrap_one_built_in_call): Update profile.\n+\n 2012-09-28  Jan Hubicka  <jh@suse.cz>\n \n \t* function.c (dup_block_and_redirect): Update profile."}, {"sha": "2a3fd873b59ef2978a1eda1cb77ca12c77c2578e", "filename": "gcc/tree-call-cdce.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/245ef1609299d7c4975e8cbd9e50586474c86aff/gcc%2Ftree-call-cdce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/245ef1609299d7c4975e8cbd9e50586474c86aff/gcc%2Ftree-call-cdce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-call-cdce.c?ref=245ef1609299d7c4975e8cbd9e50586474c86aff", "patch": "@@ -773,8 +773,13 @@ shrink_wrap_one_built_in_call (gimple bi_call)\n                                           EDGE_FALSE_VALUE);\n \n   bi_call_in_edge0->probability = REG_BR_PROB_BASE * ERR_PROB;\n+  bi_call_in_edge0->count =\n+      apply_probability (guard_bb0->count,\n+\t\t\t bi_call_in_edge0->probability);\n   join_tgt_in_edge_fall_thru->probability =\n-      REG_BR_PROB_BASE - bi_call_in_edge0->probability;\n+      inverse_probability (bi_call_in_edge0->probability);\n+  join_tgt_in_edge_fall_thru->count =\n+      guard_bb0->count - bi_call_in_edge0->count;\n \n   /* Code generation for the rest of the conditions  */\n   guard_bb = guard_bb0;\n@@ -804,8 +809,12 @@ shrink_wrap_one_built_in_call (gimple bi_call)\n       bi_call_in_edge = make_edge (guard_bb, bi_call_bb, EDGE_TRUE_VALUE);\n \n       bi_call_in_edge->probability = REG_BR_PROB_BASE * ERR_PROB;\n+      bi_call_in_edge->count =\n+\t  apply_probability (guard_bb->count,\n+\t\t\t     bi_call_in_edge->probability);\n       guard_bb_in_edge->probability =\n-          REG_BR_PROB_BASE - bi_call_in_edge->probability;\n+          inverse_probability (bi_call_in_edge->probability);\n+      guard_bb_in_edge->count = guard_bb->count - bi_call_in_edge->count;\n     }\n \n   VEC_free (gimple, heap, conds);"}]}