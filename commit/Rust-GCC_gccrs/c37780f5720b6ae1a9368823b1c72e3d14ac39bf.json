{"sha": "c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzM3NzgwZjU3MjBiNmFlMWE5MzY4ODIzYjFjNzJlM2QxNGFjMzliZg==", "commit": {"author": {"name": "Aaron W. LaFramboise", "email": "aaronavay62@aaronwl.com", "date": "2004-11-06T04:28:10Z"}, "committer": {"name": "Aaron W. LaFramboise", "email": "aaronwl@gcc.gnu.org", "date": "2004-11-06T04:28:10Z"}, "message": "re PR target/18106 (Weak symbols are unimplemented on Windows)\n\n\tPR target/18106\n\t* config/i386/cygming.h\n\t[HAVE_GAS_WEAK] (ASM_WEAKEN_LABEL): Macro defined.\n\n\t* lib/target-supports.exp (check_weak_available): Support\n\tWindows.\n\nFrom-SVN: r90164", "tree": {"sha": "29332f29521468aae140cabe22dddc7a1eda7d9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29332f29521468aae140cabe22dddc7a1eda7d9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/comments", "author": null, "committer": null, "parents": [{"sha": "882f2b8ea931e41639c5e6f1da921c4f12b9da9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/882f2b8ea931e41639c5e6f1da921c4f12b9da9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/882f2b8ea931e41639c5e6f1da921c4f12b9da9d"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "cb2ad19d1a53a142f50526692fd91ec6eaa8bcac", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "patch": "@@ -1,3 +1,9 @@\n+2004-11-06  Aaron W. LaFramboise  <aaronavay62@aaronwl.com>\n+\n+\tPR target/18106\n+\t* config/i386/cygming.h\n+\t[HAVE_GAS_WEAK] (ASM_WEAKEN_LABEL): Macro defined.\n+\n 2004-11-06  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/sh/sh4a.md: Fix copyright."}, {"sha": "3949f4c1444d6abafd1f8df42dc0a873904552dc", "filename": "gcc/config/i386/cygming.h", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2Fconfig%2Fi386%2Fcygming.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2Fconfig%2Fi386%2Fcygming.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fcygming.h?ref=c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "patch": "@@ -396,6 +396,18 @@ extern int i386_pe_dllimport_name_p (const char *);\n       ASM_OUTPUT_DEF (STREAM, alias, IDENTIFIER_POINTER (TARGET));\t\\\n     } while (0)\n \n+/* GNU as supports weak symbols on PECOFF. */\n+#ifdef HAVE_GAS_WEAK\n+#define ASM_WEAKEN_LABEL(FILE, NAME)  \\\n+  do                                  \\\n+    {                                 \\\n+      fputs (\"\\t.weak\\t\", (FILE));    \\\n+      assemble_name ((FILE), (NAME)); \\\n+      fputc ('\\n', (FILE));           \\\n+    }                                 \\\n+  while (0)\n+#endif /* HAVE_GAS_WEAK */\n+\n /* Decide whether it is safe to use a local alias for a virtual function\n    when constructing thunks.  */\n #undef TARGET_USE_LOCAL_THUNK_ALIAS_P"}, {"sha": "66fb0993f60c2a03b2d0a91896c65912b1df8238", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "patch": "@@ -1,3 +1,9 @@\n+2004-11-06  Aaron W. LaFramboise  <aaronavay62@aaronwl.com>\n+\n+\tPR target/18106\n+\t* lib/target-supports.exp (check_weak_available): Support\n+\tWindows.\n+\n 2004-11-05  Danny Smith  <dannysmith@users.sourceforge.net>\n \n \t* gcc.dg/compat/struct-layout-1_generate.c (main): Generate a"}, {"sha": "d04d7d353bc7ac75307e7f145c61e27d7bffec55", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37780f5720b6ae1a9368823b1c72e3d14ac39bf/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=c37780f5720b6ae1a9368823b1c72e3d14ac39bf", "patch": "@@ -1,4 +1,4 @@\n-#   Copyright (C) 1999, 2001, 2003 Free Software Foundation, Inc.\n+#   Copyright (C) 1999, 2001, 2003, 2004 Free Software Foundation, Inc.\n \n # This program is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -48,6 +48,12 @@ proc check_weak_available { } {\n \treturn 1\n     }\n \n+    # Windows targets Cygwin and MingW32 support it\n+\n+    if { [regexp \".*mingw32|.*cygwin\" $target_triplet] } {\n+\treturn 1\n+    }\n+\n     # ELF and ECOFF support it. a.out does with gas/gld but may also with\n     # other linkers, so we should try it\n "}]}