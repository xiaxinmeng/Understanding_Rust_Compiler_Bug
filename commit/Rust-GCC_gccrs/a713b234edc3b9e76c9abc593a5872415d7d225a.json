{"sha": "a713b234edc3b9e76c9abc593a5872415d7d225a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTcxM2IyMzRlZGMzYjllNzZjOWFiYzU5M2E1ODcyNDE1ZDdkMjI1YQ==", "commit": {"author": {"name": "Joe Seymour", "email": "joe.s@somniumtech.com", "date": "2016-09-13T20:06:47Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2016-09-13T20:06:47Z"}, "message": "re PR target/70713 (msp430 interrupt attribute prevents overriding weak symbols)\n\n2016-09-13  Joe Seymour  <joe.s@somniumtech.com>\n\ngcc/\nPR target/70713\n* config/msp430/msp430.c (msp430_start_function): Emit an error\nif a function is both weak and specifies an interrupt number.\n\ngcc/testsuite/\nPR target/70713\n* gcc.target/msp430/function-attributes-1.c: New test.\n* gcc.target/msp430/function-attributes-2.c: New test.\n* gcc.target/msp430/function-attributes-3.c: New test.\n\nFrom-SVN: r240123", "tree": {"sha": "61d322b2d24dced2079d0bef205cefe3548fede8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61d322b2d24dced2079d0bef205cefe3548fede8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a713b234edc3b9e76c9abc593a5872415d7d225a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a713b234edc3b9e76c9abc593a5872415d7d225a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a713b234edc3b9e76c9abc593a5872415d7d225a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a713b234edc3b9e76c9abc593a5872415d7d225a/comments", "author": null, "committer": null, "parents": [{"sha": "8e14a10cab52b37c56019b738011f8e4cef28d5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e14a10cab52b37c56019b738011f8e4cef28d5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e14a10cab52b37c56019b738011f8e4cef28d5a"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "ef690e4741bfc4e8d5b05f8edfc1e3923ba2593b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a713b234edc3b9e76c9abc593a5872415d7d225a", "patch": "@@ -1,3 +1,9 @@\n+2016-09-13  Joe Seymour  <joe.s@somniumtech.com>\n+\n+\tPR target/70713\n+\t* config/msp430/msp430.c (msp430_start_function): Emit an error\n+\tif a function is both weak and specifies an interrupt number.\n+\n 2016-09-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/77454"}, {"sha": "c40d2da3e8a1ff66559dbf0ea172d202f94dc804", "filename": "gcc/config/msp430/msp430.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.c?ref=a713b234edc3b9e76c9abc593a5872415d7d225a", "patch": "@@ -2108,6 +2108,13 @@ msp430_start_function (FILE *file, const char *name, tree decl)\n \t{\n \t  char buf[101];\n \n+\t  /* Interrupt vector sections should be unique, but use of weak\n+\t     functions implies multiple definitions.  */\n+\t  if (DECL_WEAK (decl))\n+\t    {\n+\t      error (\"argument to interrupt attribute is unsupported for weak functions\");\n+\t    }\n+\n \t  intr_vector = TREE_VALUE (intr_vector);\n \n \t  /* The interrupt attribute has a vector value.  Turn this into a"}, {"sha": "39de996eb71ba37967f2ce73b71298cf0a7fa54f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a713b234edc3b9e76c9abc593a5872415d7d225a", "patch": "@@ -1,3 +1,10 @@\n+2016-09-13  Joe Seymour  <joe.s@somniumtech.com>\n+\n+\tPR target/70713\n+\t* gcc.target/msp430/function-attributes-1.c: New test.\n+\t* gcc.target/msp430/function-attributes-2.c: New test.\n+\t* gcc.target/msp430/function-attributes-3.c: New test.\n+\n 2016-09-13  Jakub Jelinek  <jakub@redhat.com>\n \n \t* g++.dg/cpp0x/gen-attrs-61.C: New test."}, {"sha": "7a3b7bea88585af323fcb159563c5b6b90865e89", "filename": "gcc/testsuite/gcc.target/msp430/function-attributes-1.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-1.c?ref=a713b234edc3b9e76c9abc593a5872415d7d225a", "patch": "@@ -0,0 +1,9 @@\n+void __attribute__((weak, interrupt))\n+weak_interrupt (void) {\n+}\n+\n+void __attribute__((interrupt(11)))\n+interrupt_number (void) {\n+}\n+\n+/* { dg-final { scan-assembler-times \"__interrupt_vector_\" 1 } } */"}, {"sha": "fcb2fb2f0116a14f0f0d1b19731565b0fcdc3247", "filename": "gcc/testsuite/gcc.target/msp430/function-attributes-2.c", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-2.c?ref=a713b234edc3b9e76c9abc593a5872415d7d225a", "patch": "@@ -0,0 +1,3 @@\n+void __attribute__((weak, interrupt(10)))\n+weak_interrupt_number (void) {\n+} /* { dg-error \"argument to interrupt attribute is unsupported for weak functions\" } */"}, {"sha": "b0acf4aae521dea47285774fccb84af4b5f06940", "filename": "gcc/testsuite/gcc.target/msp430/function-attributes-3.c", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a713b234edc3b9e76c9abc593a5872415d7d225a/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Ffunction-attributes-3.c?ref=a713b234edc3b9e76c9abc593a5872415d7d225a", "patch": "@@ -0,0 +1,3 @@\n+void __attribute__((interrupt(\"nmi\"))) __attribute__((weak))\n+interrupt_name_weak (void) {\n+} /* { dg-error \"argument to interrupt attribute is unsupported for weak functions\" } */"}]}