{"sha": "bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmZjYjkxMjE0OTU4Y2JlN2I4NmIxODRiYWUzNGY4ZDA3ZGI0ZGJiYw==", "commit": {"author": {"name": "Josh Conner", "email": "jconner@apple.com", "date": "2007-01-18T16:44:50Z"}, "committer": {"name": "Josh Conner", "email": "jconner@gcc.gnu.org", "date": "2007-01-18T16:44:50Z"}, "message": "re PR target/30485 (ICE in rs6000_emit_vector_compare when building with -fno-trapping-math)\n\n2007-01-18  Josh Conner  <jconner@apple.com>\n\n\tPR target/30485\n\t* gcc.dg/vect/vect.exp: Add support for no-trapping-math tests.\n\t* gcc.dg/vect/no-trapping-math-1: New.\n\t* gcc.dg/vect/no-trapping-math-2: New.\n\nFrom-SVN: r120903", "tree": {"sha": "39b67be03c215eba0ecd4a3f4ff6459cc36ed03e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/39b67be03c215eba0ecd4a3f4ff6459cc36ed03e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/comments", "author": null, "committer": null, "parents": [{"sha": "370df7db150b3cebad6c88751dcd215bb6d93456", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/370df7db150b3cebad6c88751dcd215bb6d93456", "html_url": "https://github.com/Rust-GCC/gccrs/commit/370df7db150b3cebad6c88751dcd215bb6d93456"}], "stats": {"total": 63, "additions": 63, "deletions": 0}, "files": [{"sha": "3b88a022fec9bb54d0fc851138ca940cee614e64", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "patch": "@@ -1,3 +1,10 @@\n+2007-01-18  Josh Conner  <jconner@apple.com>\n+\n+\tPR target/30485\n+\t* gcc.dg/vect/vect.exp: Add support for no-trapping-math tests.\n+\t* gcc.dg/vect/no-trapping-math-1: New.\n+\t* gcc.dg/vect/no-trapping-math-2: New.\n+\n 2007-01-18  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gcc.target/i386/387-8.c: Update comment about optimizing"}, {"sha": "e9d9570146b29d92621a5b9c18050275a3c4e2a3", "filename": "gcc/testsuite/gcc.dg/vect/no-trapping-math-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-trapping-math-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-trapping-math-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-trapping-math-1.c?ref=bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "patch": "@@ -0,0 +1,12 @@\n+/* Test for pr30485.  */\n+/* { dg-do compile } */\n+/* { dg-require-effective-target vect_condition } */\n+void\n+foo (float a[32], float b[2][32])\n+{\n+  int i;\n+  for (i = 0; i < 32; i++)\n+    a[i] = (b[0][i] > b[1][i]) ? b[0][i] : b[1][i];\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "b4e324961dede155dd1ff744e8cec318cb1f25dd", "filename": "gcc/testsuite/gcc.dg/vect/no-trapping-math-2.c", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-trapping-math-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-trapping-math-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fno-trapping-math-2.c?ref=bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "patch": "@@ -0,0 +1,38 @@\n+/* Test for pr30485.  */\n+/* { dg-require-effective-target vect_float } */\n+\n+#include <stdarg.h>\n+#include \"tree-vect.h\"\n+\n+#define N 16\n+\n+int\n+main1 (void)\n+{\n+  int i;\n+  float a[N];\n+  float b[N] = {0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45};\n+\n+  /* Condition in loop.  */\n+  /* This loop is vectorized on platforms that support vect_condition.  */\n+  for (i = 0; i < N; i++)\n+  {\n+    a[i] = (b[i] > 0 ? b[i] : 0);\n+  }\n+\n+  for (i = 0; i < N; i++)\n+  {\n+    if (a[i] != b[i])\n+\tabort ();\n+  }\n+  return 0;\n+}\n+\n+int main (void)\n+{\n+  check_vect ();\n+  return main1 ();\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" { target vect_condition } } } */\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "723e9b6838c2c4460f817c4fbacc2f1f93f1d33d", "filename": "gcc/testsuite/gcc.dg/vect/vect.exp", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bfcb91214958cbe7b86b184bae34f8d07db4dbbc/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect.exp?ref=bfcb91214958cbe7b86b184bae34f8d07db4dbbc", "patch": "@@ -150,6 +150,12 @@ lappend DEFAULT_VECTCFLAGS \"-funswitch-loops\"\n dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/unswitch-loops-*.\\[cS\\]]]  \\\n \t\"\" $DEFAULT_VECTCFLAGS\n \n+# -fno-trapping-math tests\n+set DEFAULT_VECTCFLAGS $SAVED_DEFAULT_VECTCFLAGS\n+lappend DEFAULT_VECTCFLAGS \"-fno-trapping-math\"\n+dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/no-trapping-math-*.\\[cS\\]]]  \\\n+\t\"\" $DEFAULT_VECTCFLAGS\n+\n # With -Os\n lappend DEFAULT_VECTCFLAGS \"-Os\"\n dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/Os-vect-*.\\[cS\\]]]  \\"}]}