{"sha": "cf526dcc5c28c03eb46440208663802b4f4bc171", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Y1MjZkY2M1YzI4YzAzZWI0NjQ0MDIwODY2MzgwMmI0ZjRiYzE3MQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-12-27T11:53:32Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-12-27T11:53:32Z"}, "message": "(copy_rtx): A CONST can be shared if it contains a SYMBOL_REF.\n\nA SCRATCH must be shared.\nA MEM may be shared if it is at a constant address.\n\nFrom-SVN: r2924", "tree": {"sha": "a5ac6a49933111a488ff27398fa497f89e7bcd6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5ac6a49933111a488ff27398fa497f89e7bcd6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf526dcc5c28c03eb46440208663802b4f4bc171", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf526dcc5c28c03eb46440208663802b4f4bc171", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf526dcc5c28c03eb46440208663802b4f4bc171", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf526dcc5c28c03eb46440208663802b4f4bc171/comments", "author": null, "committer": null, "parents": [{"sha": "b851ea098ed463f18e1534b8295ef666f6c7916d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b851ea098ed463f18e1534b8295ef666f6c7916d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b851ea098ed463f18e1534b8295ef666f6c7916d"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "8017df1b2c8eefb880dabcac7ee8b6245b34e763", "filename": "gcc/rtl.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf526dcc5c28c03eb46440208663802b4f4bc171/gcc%2Frtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf526dcc5c28c03eb46440208663802b4f4bc171/gcc%2Frtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtl.c?ref=cf526dcc5c28c03eb46440208663802b4f4bc171", "patch": "@@ -264,7 +264,23 @@ copy_rtx (orig)\n     case CODE_LABEL:\n     case PC:\n     case CC0:\n+    case SCRATCH:\n+      /* SCRATCH must be shared because they represent distinct values. */\n       return orig;\n+\n+    case CONST:\n+      /* CONST can be shared if it contains a SYMBOL_REF.  If it contains\n+\t a LABEL_REF, it isn't sharable.  */\n+      if (GET_CODE (XEXP (orig, 0)) == PLUS\n+\t  && GET_CODE (XEXP (XEXP (orig, 0), 0)) == SYMBOL_REF\n+\t  && GET_CODE (XEXP (XEXP (orig, 0), 1)) == CONST_INT)\n+\treturn orig;\n+      break;\n+\n+    case MEM:\n+      if (CONSTANT_ADDRESS_P (XEXP (orig, 0)))\n+\treturn orig;\n+      break;\n     }\n \n   copy = rtx_alloc (code);"}]}