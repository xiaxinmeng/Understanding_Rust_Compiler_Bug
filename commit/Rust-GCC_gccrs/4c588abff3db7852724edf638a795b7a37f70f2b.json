{"sha": "4c588abff3db7852724edf638a795b7a37f70f2b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGM1ODhhYmZmM2RiNzg1MjcyNGVkZjYzOGE3OTViN2EzN2Y3MGYyYg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-09-17T11:27:25Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-09-17T11:27:25Z"}, "message": "lto-cgraph.c (compute_ltrans_boundary): Use const_value_known.\n\n\n\t* lto-cgraph.c (compute_ltrans_boundary): Use const_value_known.\n\t* lto.c (lto_promote_cross_file_statics): Use const_value_known.\n\nFrom-SVN: r164366", "tree": {"sha": "f8aa9d7575b411ab590d3f864fa218d6522ee77f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f8aa9d7575b411ab590d3f864fa218d6522ee77f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c588abff3db7852724edf638a795b7a37f70f2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c588abff3db7852724edf638a795b7a37f70f2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c588abff3db7852724edf638a795b7a37f70f2b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c588abff3db7852724edf638a795b7a37f70f2b/comments", "author": null, "committer": null, "parents": [{"sha": "122603fae22d9e7eebada39d917cc42f990a04de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/122603fae22d9e7eebada39d917cc42f990a04de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/122603fae22d9e7eebada39d917cc42f990a04de"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "87577389a824466b2132ea9f58a74dbd87956c08", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4c588abff3db7852724edf638a795b7a37f70f2b", "patch": "@@ -1,3 +1,7 @@\n+2010-09-03  Jan Hubicka  <jh@suse.cz>\n+\n+\t* lto-cgraph.c (compute_ltrans_boundary): Use const_value_known.\n+\n 2010-09-03  Naveen H.S  <naveen.S@kpitcummins.com>\n \n \t* config/v850/v850.c (v850_function_value_regno_p): Make static."}, {"sha": "c81e3f90ee5a269b3468f8d51b991d80199b97e3", "filename": "gcc/lto-cgraph.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2Flto-cgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2Flto-cgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-cgraph.c?ref=4c588abff3db7852724edf638a795b7a37f70f2b", "patch": "@@ -814,7 +814,7 @@ compute_ltrans_boundary (struct lto_out_decl_state *state,\n \t  && !lto_varpool_encoder_encode_initializer_p (varpool_encoder,\n \t\t\t\t\t\t        vnode)\n \t  && (DECL_IN_CONSTANT_POOL (vnode->decl)\n-\t      ||  TREE_READONLY (vnode->decl)))\n+\t      || vnode->const_value_known))\n \t{\n \t  lto_set_varpool_encoder_encode_initializer (varpool_encoder, vnode);\n \t  add_references (encoder, varpool_encoder, &vnode->ref_list);"}, {"sha": "9bcb0014459d7cfd673fec2c8feb97ea9b493c33", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=4c588abff3db7852724edf638a795b7a37f70f2b", "patch": "@@ -1,3 +1,7 @@\n+2010-09-17  Jan Hubicka  <jh@suse.cz>\n+\n+\t* lto.c (lto_promote_cross_file_statics): Use const_value_known.\n+\n 2010-09-17  Richard Guenther  <rguenther@suse.de>\n \n \t* lang.opt (flag_wpa): Also enable for the driver."}, {"sha": "40816e51e8fbab576d228ac3ba87af0c54465b0a", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c588abff3db7852724edf638a795b7a37f70f2b/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=4c588abff3db7852724edf638a795b7a37f70f2b", "patch": "@@ -1008,7 +1008,7 @@ lto_promote_cross_file_statics (void)\n \t from this partition that are not in this partition.\n \t This needs to be done recursively.  */\n       for (vnode = varpool_nodes; vnode; vnode = vnode->next)\n-\tif ((TREE_READONLY (vnode->decl) || DECL_IN_CONSTANT_POOL (vnode->decl))\n+\tif ((vnode->const_value_known || DECL_IN_CONSTANT_POOL (vnode->decl))\n \t    && DECL_INITIAL (vnode->decl)\n \t    && !varpool_node_in_set_p (vnode, vset)\n \t    && referenced_from_this_partition_p (&vnode->ref_list, set, vset)\n@@ -1048,7 +1048,7 @@ lto_promote_cross_file_statics (void)\n \t\t\t   && !v->externally_visible && v->analyzed)\n \t\t    {\n \t\t      if (promote_var (v)\n-\t\t\t  && DECL_INITIAL (v->decl) && TREE_READONLY (v->decl)\n+\t\t\t  && DECL_INITIAL (v->decl) && v->const_value_known\n \t\t\t  && !pointer_set_insert (inserted, vnode))\n \t\t\tVEC_safe_push (varpool_node_ptr, heap,\n \t\t\t\t       promoted_initializers, v);"}]}