{"sha": "f3abed16a01153c7a72d5795076c392cdb19c9dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjNhYmVkMTZhMDExNTNjN2E3MmQ1Nzk1MDc2YzM5MmNkYjE5YzlkZA==", "commit": {"author": {"name": "Jim Wilson", "email": "jimw@sifive.com", "date": "2017-12-04T22:08:47Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2017-12-04T22:08:47Z"}, "message": "Fix typos in riscv register save/restore.\n\n\tgcc/\n\t* config/riscv/riscv.c (riscv_for_each_saved_reg): Use GP_REG_LAST\n\tinstead of GP_REG_LAST-1.\n\t(riscv_adjust_libcall_cfi_prologue): Likewise.\n\t(riscv_adjust_libcall_cri_epilogue): Likewise.\n\t* config/riscv/riscv.h (CALL_USED_REGISTERS): Change a6 to t6 in\n\tcomment.\n\nFrom-SVN: r255389", "tree": {"sha": "b5e60df1d985e303e69d27d012e86506ff003219", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5e60df1d985e303e69d27d012e86506ff003219"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f3abed16a01153c7a72d5795076c392cdb19c9dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3abed16a01153c7a72d5795076c392cdb19c9dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3abed16a01153c7a72d5795076c392cdb19c9dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3abed16a01153c7a72d5795076c392cdb19c9dd/comments", "author": null, "committer": null, "parents": [{"sha": "75622c9e2f81c00feb50a347b8ad6063b2a5134f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75622c9e2f81c00feb50a347b8ad6063b2a5134f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75622c9e2f81c00feb50a347b8ad6063b2a5134f"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "f6bef8707bb7f3d884f51278e4c5101621076c2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3abed16a01153c7a72d5795076c392cdb19c9dd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3abed16a01153c7a72d5795076c392cdb19c9dd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f3abed16a01153c7a72d5795076c392cdb19c9dd", "patch": "@@ -1,3 +1,12 @@\n+2017-12-04  Jim Wilson  <jimw@sifive.com>\n+\n+\t* config/riscv/riscv.c (riscv_for_each_saved_reg): Use GP_REG_LAST\n+\tinstead of GP_REG_LAST-1.\n+\t(riscv_adjust_libcall_cfi_prologue): Likewise.\n+\t(riscv_adjust_libcall_cri_epilogue): Likewise.\n+\t* config/riscv/riscv.h (CALL_USED_REGISTERS): Change a6 to t6 in\n+\tcomment.\n+\n 2017-12-04  Luis Machado  <luis.machado@linaro.org>\n \n \t* ipa-pure-const.c (check_decl): Add missing newline."}, {"sha": "c7283d021410f30541248c00d6714919f3adadd4", "filename": "gcc/config/riscv/riscv.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3abed16a01153c7a72d5795076c392cdb19c9dd/gcc%2Fconfig%2Friscv%2Friscv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3abed16a01153c7a72d5795076c392cdb19c9dd/gcc%2Fconfig%2Friscv%2Friscv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.c?ref=f3abed16a01153c7a72d5795076c392cdb19c9dd", "patch": "@@ -3336,7 +3336,7 @@ riscv_for_each_saved_reg (HOST_WIDE_INT sp_offset, riscv_save_restore_fn fn)\n \n   /* Save the link register and s-registers. */\n   offset = cfun->machine->frame.gp_sp_offset - sp_offset;\n-  for (int regno = GP_REG_FIRST; regno <= GP_REG_LAST-1; regno++)\n+  for (int regno = GP_REG_FIRST; regno <= GP_REG_LAST; regno++)\n     if (BITSET_P (cfun->machine->frame.mask, regno - GP_REG_FIRST))\n       {\n \triscv_save_restore_reg (word_mode, regno, offset, fn);\n@@ -3424,7 +3424,7 @@ riscv_adjust_libcall_cfi_prologue ()\n   int saved_size = cfun->machine->frame.save_libcall_adjustment;\n   int offset;\n \n-  for (int regno = GP_REG_FIRST; regno <= GP_REG_LAST-1; regno++)\n+  for (int regno = GP_REG_FIRST; regno <= GP_REG_LAST; regno++)\n     if (BITSET_P (cfun->machine->frame.mask, regno - GP_REG_FIRST))\n       {\n \t/* The save order is ra, s0, s1, s2 to s11.  */\n@@ -3552,7 +3552,7 @@ riscv_adjust_libcall_cfi_epilogue ()\n   dwarf = alloc_reg_note (REG_CFA_ADJUST_CFA, adjust_sp_rtx,\n \t\t\t  dwarf);\n \n-  for (int regno = GP_REG_FIRST; regno <= GP_REG_LAST-1; regno++)\n+  for (int regno = GP_REG_FIRST; regno <= GP_REG_LAST; regno++)\n     if (BITSET_P (cfun->machine->frame.mask, regno - GP_REG_FIRST))\n       {\n \treg = gen_rtx_REG (SImode, regno);"}, {"sha": "feada728f9af357929e93dbeefef0a0219b32467", "filename": "gcc/config/riscv/riscv.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3abed16a01153c7a72d5795076c392cdb19c9dd/gcc%2Fconfig%2Friscv%2Friscv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3abed16a01153c7a72d5795076c392cdb19c9dd/gcc%2Fconfig%2Friscv%2Friscv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Friscv.h?ref=f3abed16a01153c7a72d5795076c392cdb19c9dd", "patch": "@@ -233,7 +233,7 @@ along with GCC; see the file COPYING3.  If not see\n   1, 1\t\t\t\t\t\t\t\t\t\\\n }\n \n-/* a0-a7, t0-a6, fa0-fa7, and ft0-ft11 are volatile across calls.\n+/* a0-a7, t0-t6, fa0-fa7, and ft0-ft11 are volatile across calls.\n    The call RTLs themselves clobber ra.  */\n \n #define CALL_USED_REGISTERS\t\t\t\t\t\t\\"}]}