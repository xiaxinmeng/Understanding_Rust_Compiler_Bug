{"sha": "ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWMyZWU5YjdlN2E0Mzk4N2I2YjdlM2I4YzdlOTdlMzExNTdkZWVlNg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-01-10T18:01:05Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-01-10T18:01:05Z"}, "message": "For PR libgcj/5303:\n\n\t* gnu/java/rmi/rmic/RMIC.java (parseOptions): Handle --help and\n\t--version.  Recognize GNU-style long options.  Print GNU-style\n\terror messages.\n\t(usage): Print GNU-style help.  Exit with status 0.\n\t(error): New method.\n\t(run): Print error message if no class names found.\n\t(main): Don't print usage on error.\n\nFrom-SVN: r48740", "tree": {"sha": "6e125cbdf84ba9a0b70ad099f55e586fe0ec91e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e125cbdf84ba9a0b70ad099f55e586fe0ec91e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6/comments", "author": null, "committer": null, "parents": [{"sha": "346a81f0a5d3958d7cce392e5d3a8e91618749be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/346a81f0a5d3958d7cce392e5d3a8e91618749be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/346a81f0a5d3958d7cce392e5d3a8e91618749be"}], "stats": {"total": 55, "additions": 48, "deletions": 7}, "files": [{"sha": "d0190e44cac2272a911f7089a13e8f8a5e25394d", "filename": "libjava/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6", "patch": "@@ -1,3 +1,14 @@\n+2002-01-10  Tom Tromey  <tromey@redhat.com>\n+\n+\tFor PR libgcj/5303:\n+\t* gnu/java/rmi/rmic/RMIC.java (parseOptions): Handle --help and\n+\t--version.  Recognize GNU-style long options.  Print GNU-style\n+\terror messages.\n+\t(usage): Print GNU-style help.  Exit with status 0.\n+\t(error): New method.\n+\t(run): Print error message if no class names found.\n+\t(main): Don't print usage on error.\n+\n 2002-01-09  Tom Tromey  <tromey@redhat.com>\n \n \t* gnu/gcj/convert/Convert.java (version): Use java.vm.name"}, {"sha": "0c40a0f66221782b535b700f65fb9c3b737feed0", "filename": "libjava/gnu/java/rmi/rmic/RMIC.java", "status": "modified", "additions": 37, "deletions": 7, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6/libjava%2Fgnu%2Fjava%2Frmi%2Frmic%2FRMIC.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6/libjava%2Fgnu%2Fjava%2Frmi%2Frmic%2FRMIC.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fjava%2Frmi%2Frmic%2FRMIC.java?ref=ac2ee9b7e7a43987b6b7e3b8c7e97e31157deee6", "patch": "@@ -1,5 +1,5 @@\n /*\n-  Copyright (c) 1996, 1997, 1998, 1999, 2001 Free Software Foundation, Inc.\n+  Copyright (c) 1996, 1997, 1998, 1999, 2001, 2002 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -74,15 +74,15 @@ public static void main(String args[]) {\n \t\t\texception.printStackTrace();\n \t\t}\n \t\telse {\n-\t\t\tusage();\n+\t\t\tSystem.exit(1);\n \t\t}\n \t}\n }\n \n public boolean run() {\n \tparseOptions();\n \tif (next >= args.length) {\n-\t\treturn (false);\n+\t\terror(\"no class names found\");\n \t}\n \tfor (int i = next; i < args.length; i++) {\n \t\ttry {\n@@ -887,6 +887,11 @@ private void parseOptions() {\n \t\tString arg = args[next];\n \t\tnext++;\n \n+\t\t// Accept `--' options if they look long enough.\n+\t\tif (arg.length() > 3 && arg.charAt(0) == '-'\n+\t\t    && arg.charAt(1) == '-')\n+\t\t  arg = arg.substring(1);\n+\n \t\tif (arg.equals(\"-keep\")) {\n \t\t\tkeep = true;\n \t\t}\n@@ -920,22 +925,42 @@ else if (arg.equals(\"-nocompile\")) {\n \t\telse if (arg.equals(\"-classpath\")) {\n \t\t\tnext++;\n \t\t}\n+\t\telse if (arg.equals(\"-help\")) {\n+\t\t\tusage();\n+\t\t}\n+\t\telse if (arg.equals(\"-version\")) {\n+\t\t\tSystem.out.println(\"rmic (GNU \"\n+\t\t\t\t\t   + System.getProperty(\"java.vm.name\")\n+\t\t\t\t\t   + \") \"\n+\t\t\t\t\t   + System.getProperty(\"java.vm.version\"));\n+\t\t\tSystem.out.println();\n+\t\t\tSystem.out.println(\"Copyright 1996, 1997, 1998, 1999, 2001, 2002 Free Software Foundation\");\n+\t\t\tSystem.out.println(\"This is free software; see the source for copying conditions.  There is NO\");\n+\t\t\tSystem.out.println(\"warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\");\n+\t\t\tSystem.exit(0);\n+\t\t}\n \t\telse if (arg.equals(\"-d\")) {\n \t\t\tdestination = args[next];\n \t\t\tnext++;\n \t\t}\n \t\telse if (arg.charAt(1) == 'J') {\n \t\t}\n \t\telse {\n-\t\t\tSystem.err.println(\"Unknown option: \" + arg);\n+\t\t\terror(\"unrecognized option `\" + arg + \"'\");\n \t\t}\n \t}\n }\n \n+private static void error(String message) {\n+\tSystem.err.println(\"rmic: \" + message);\n+\tSystem.err.println(\"Try `rmic --help' for more information.\");\n+\tSystem.exit(1);\n+}\n+\n private static void usage() {\n \tSystem.out.println(\n-\"usage: rmic [-options] classes\\n\" +\n-\"Options are:\\n\" +\n+\"Usage: rmic [OPTION]... CLASS...\\n\" +\n+\"\\n\" +\n \"\t-keep \t\t\tDon't delete any intermediate files\\n\" +\n \"\t-keepgenerated \t\tSame as -keep\\n\" +\n \"\t-v1.1\t\t\tJava 1.1 style stubs only\\n\" +\n@@ -949,8 +974,13 @@ private static void usage() {\n \"\t-classpath <path> *\tUse given path as classpath\\n\" +\n \"\t-d <directory> \t\tSpecify where to place generated classes\\n\" +\n \"\t-J<flag> *\t\tPass flag to Java\\n\" +\n-\"  * Option currently ignored\"\n+\"\t-help\t\t\tPrint this help, then exit\\n\" +\n+\"\t-version\t\tPrint version number, then exit\\n\" +\n+\"\\n\" +\n+\"  * Option currently ignored\\n\" +\n+\"Long options can be used with `--option' form as well.\"\n \t);\n+\tSystem.exit(0);\n }\n \n static class MethodRef"}]}