{"sha": "a1da6cbacfac48657e23fe42e44ee8bb635314f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTFkYTZjYmFjZmFjNDg2NTdlMjNmZTQyZTQ0ZWU4YmI2MzUzMTRmMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mmitchell@usa.net", "date": "1998-03-04T11:33:01Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchell@gcc.gnu.org", "date": "1998-03-04T11:33:01Z"}, "message": "pt.c (finish_member_template_decl): Deal more gracefully with invalid declarations.\n\n\t* pt.c (finish_member_template_decl): Deal more gracefully with\n\tinvalid declarations.\n\nFrom-SVN: r18399", "tree": {"sha": "ad4956cd4d0438509b17b79145267bf8fcd876c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad4956cd4d0438509b17b79145267bf8fcd876c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a1da6cbacfac48657e23fe42e44ee8bb635314f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1da6cbacfac48657e23fe42e44ee8bb635314f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1da6cbacfac48657e23fe42e44ee8bb635314f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1da6cbacfac48657e23fe42e44ee8bb635314f3/comments", "author": null, "committer": null, "parents": [{"sha": "1dd8faa86e8230e703417b67318ee2e8c7c6c9b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dd8faa86e8230e703417b67318ee2e8c7c6c9b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dd8faa86e8230e703417b67318ee2e8c7c6c9b7"}], "stats": {"total": 30, "additions": 24, "deletions": 6}, "files": [{"sha": "014089102406446a33050f5c44702be775204805", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1da6cbacfac48657e23fe42e44ee8bb635314f3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1da6cbacfac48657e23fe42e44ee8bb635314f3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a1da6cbacfac48657e23fe42e44ee8bb635314f3", "patch": "@@ -1,3 +1,8 @@\n+Wed Mar  4 11:28:08 1998  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* pt.c (finish_member_template_decl): Deal more gracefully with\n+\tinvalid declarations.\n+\n Tue Mar  3 01:38:17 1998  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* call.c, class.c, cp-tree.h, cvt.c, decl.c, init.c, lex.c,"}, {"sha": "f4678972e589bb4a87aec6e32a52ca65099ed568", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1da6cbacfac48657e23fe42e44ee8bb635314f3/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1da6cbacfac48657e23fe42e44ee8bb635314f3/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=a1da6cbacfac48657e23fe42e44ee8bb635314f3", "patch": "@@ -118,14 +118,21 @@ finish_member_template_decl (template_parameters, decl)\n \t}\n       return NULL_TREE;\n     }\n-  else if (DECL_TEMPLATE_INFO (decl) &&\n-\t   !DECL_TEMPLATE_SPECIALIZATION (decl))\n+  else if (DECL_TEMPLATE_INFO (decl))\n     {\n-      check_member_template (DECL_TI_TEMPLATE (decl));\n-      return DECL_TI_TEMPLATE (decl);\n-    }\n+      if (!DECL_TEMPLATE_SPECIALIZATION (decl))\n+\t{\n+\t  check_member_template (DECL_TI_TEMPLATE (decl));\n+\t  return DECL_TI_TEMPLATE (decl);\n+\t}\n+      else\n+\treturn decl;\n+    } \n+  else\n+    cp_error (\"invalid member template declaration `%D'\", decl);\n+\t\n \n-  return decl;\n+  return error_mark_node;\n }\n \n /* Returns the template nesting level of the indicated class TYPE."}, {"sha": "f3b72be28cc07140e9d102efe038661185bf480a", "filename": "gcc/testsuite/g++.old-deja/g++.pt/memtemp71.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a1da6cbacfac48657e23fe42e44ee8bb635314f3/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fmemtemp71.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a1da6cbacfac48657e23fe42e44ee8bb635314f3/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fmemtemp71.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fmemtemp71.C?ref=a1da6cbacfac48657e23fe42e44ee8bb635314f3", "patch": "@@ -0,0 +1,6 @@\n+// Build don't link:\n+\n+class A\n+{\n+  template<class T>T epsilon; // ERROR - invalid member template\n+}; // ERROR - the compiler crashes here"}]}