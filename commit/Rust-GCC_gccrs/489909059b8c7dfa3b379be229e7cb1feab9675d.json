{"sha": "489909059b8c7dfa3b379be229e7cb1feab9675d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDg5OTA5MDU5YjhjN2RmYTNiMzc5YmUyMjllN2NiMWZlYWI5Njc1ZA==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2017-03-01T19:24:53Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2017-03-01T19:24:53Z"}, "message": "i386.c (print_reg): Warn for values of unsupported size in integer register.\n\n\t* config/i386/i386.c (print_reg): Warn for values of\n\tunsupported size in integer register.\n\ntestsuite/ChangeLog:\n\n\t* gcc.target/i386/invsize-2.c: New test.\n\t* gcc.target/i386/invsize-3.c: Ditto.\n\t* gcc.target/i386/invsize-4.c: Ditto.\n\t* gcc.target/i386/pr66274.c: Expect \"unsuported size\" warning.\n\t* gcc.target/i386/stackalign/asm-1.c: Ditto.\n\nFrom-SVN: r245815", "tree": {"sha": "d14a19de49ce2626615c2428364e5b61f18883fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d14a19de49ce2626615c2428364e5b61f18883fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/489909059b8c7dfa3b379be229e7cb1feab9675d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/489909059b8c7dfa3b379be229e7cb1feab9675d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/489909059b8c7dfa3b379be229e7cb1feab9675d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/489909059b8c7dfa3b379be229e7cb1feab9675d/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c85ac396f106116a20463313a2c4646a7de61433", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c85ac396f106116a20463313a2c4646a7de61433", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c85ac396f106116a20463313a2c4646a7de61433"}], "stats": {"total": 54, "additions": 46, "deletions": 8}, "files": [{"sha": "d791c18247b9b353af9aa4b35435742684b30064", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -1,3 +1,8 @@\n+2017-03-01  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386.c (print_reg): Warn for values of\n+\tunsupported size in integer register.\n+\n 2017-03-01  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/79439"}, {"sha": "754c016f13997beaccccd5896ada075fe3a48322", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -17646,13 +17646,16 @@ print_reg (rtx x, int code, FILE *file)\n \n   switch (msize)\n     {\n+    case 16:\n+    case 12:\n     case 8:\n+      if (GENERAL_REGNO_P (regno) && msize > GET_MODE_SIZE (word_mode))\n+\twarning (0, \"unsupported size for integer register\");\n+      /* FALLTHRU */\n     case 4:\n       if (LEGACY_INT_REGNO_P (regno))\n-\tputc (msize == 8 && TARGET_64BIT ? 'r' : 'e', file);\n+\tputc (msize > 4 && TARGET_64BIT ? 'r' : 'e', file);\n       /* FALLTHRU */\n-    case 16:\n-    case 12:\n     case 2:\n     normal:\n       reg = hi_reg_name[regno];\n@@ -17661,7 +17664,7 @@ print_reg (rtx x, int code, FILE *file)\n       if (regno >= ARRAY_SIZE (qi_reg_name))\n \tgoto normal;\n       if (!ANY_QI_REGNO_P (regno))\n-\terror (\"unsupported size for integer register in 32-bit mode\");\n+\terror (\"unsupported size for integer register\");\n       reg = qi_reg_name[regno];\n       break;\n     case 0:"}, {"sha": "2b73362781cc947596aac92afae09df2fab4ac23", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -1,3 +1,11 @@\n+2017-03-01  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\t* gcc.target/i386/invsize-2.c: New test.\n+\t* gcc.target/i386/invsize-3.c: Ditto.\n+\t* gcc.target/i386/invsize-4.c: Ditto.\n+\t* gcc.target/i386/pr66274.c: Expect \"unsuported size\" warning.\n+\t* gcc.target/i386/stackalign/asm-1.c: Ditto.\n+\n 2017-03-01  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/79439"}, {"sha": "eefa5fada3d25d69739c579801a35f255cddf271", "filename": "gcc/testsuite/gcc.target/i386/invsize-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-1.c?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile { target ia32 } } */\n+/* { dg-options \"\" } */\n \n void foo (char x)\n {"}, {"sha": "7a9825ab7830071f8edc3ac74c3c76519603a92a", "filename": "gcc/testsuite/gcc.target/i386/invsize-2.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-2.c?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile { target ia32 } } */\n+/* { dg-options \"\" } */\n+\n+void foo (long long x)\n+{\n+  __asm__ volatile (\"# %0\" : : \"r\" (x));\n+} /* { dg-warning \"unsupported size\" }  */"}, {"sha": "bd23353fe0013a15e70fb8e8b151c8e490d4f36a", "filename": "gcc/testsuite/gcc.target/i386/invsize-3.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-3.c?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+void foo (long double x)\n+{\n+  __asm__ volatile (\"# %0\" : : \"r\" (x));\n+} /* { dg-warning \"unsupported size\" }  */"}, {"sha": "d4a6d467aee18d2797888e89defa98fd49c5180f", "filename": "gcc/testsuite/gcc.target/i386/invsize-4.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Finvsize-4.c?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile { target int128 } } */\n+/* { dg-options \"\" } */\n+\n+void foo (__int128 x)\n+{\n+  __asm__ volatile (\"# %0\" : : \"r\" (x));\n+} /* { dg-warning \"unsupported size\" }  */"}, {"sha": "caf0d34cd9ce4f78b4dd65961f109ee9dcdf8b9c", "filename": "gcc/testsuite/gcc.target/i386/pr66274.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66274.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66274.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66274.c?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -3,7 +3,7 @@\n \n void f()\n {\n-  asm (\"push %0\" : : \"r\" ((unsigned long long) 456));\n-}\n+  asm (\"push %0\" : : \"r\" ((unsigned long long) 456 >> 32));\n+} /* { dg-warning \"unsupported size\" }  */\n \n-/* { dg-final { scan-assembler-not \"push %r\" } } */\n+/* { dg-final { scan-assembler-not \"push\\[ \\t]+%r\" } } */"}, {"sha": "e5ea06df8194dcaf7811f1ab9b9e85f9c24633b5", "filename": "gcc/testsuite/gcc.target/i386/stackalign/asm-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fstackalign%2Fasm-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/489909059b8c7dfa3b379be229e7cb1feab9675d/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fstackalign%2Fasm-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fstackalign%2Fasm-1.c?ref=489909059b8c7dfa3b379be229e7cb1feab9675d", "patch": "@@ -4,4 +4,4 @@\n \n /* This case is to detect a compile time regression introduced in stack\n    branch development. */\n-void f(){asm(\"%0\"::\"r\"(1.5F));}void g(){asm(\"%0\"::\"r\"(1.5));}\n+void f(){asm(\"%0\"::\"r\"(1.5F));}void g(){asm(\"%0\"::\"r\"(1.5));} /* { dg-warning \"unsupported size\" }  */"}]}