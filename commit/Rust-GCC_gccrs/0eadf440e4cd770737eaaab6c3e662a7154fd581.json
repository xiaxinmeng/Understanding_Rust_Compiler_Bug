{"sha": "0eadf440e4cd770737eaaab6c3e662a7154fd581", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVhZGY0NDBlNGNkNzcwNzM3ZWFhYWI2YzNlNjYyYTcxNTRmZDU4MQ==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.ch", "date": "2003-11-21T04:53:12Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2003-11-21T04:53:12Z"}, "message": "mklibgcc.in: Evaluate shlib_slibdir_qual during link step too.\n\n2003-11-21  Andreas Tobler  <a.tobler@schweiz.ch>\n\n\t* mklibgcc.in: Evaluate shlib_slibdir_qual during link\n\tstep too.\n\t* config/t-slibgcc-darwin: Adjust install path.\n\t* config/rs6000/t-darwin: Revert multilib matches since\n\tit is not used on darwin.\n\nFrom-SVN: r73790", "tree": {"sha": "3122c3075ac1b8d8dbe8dfb0bdf002a331bd54a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3122c3075ac1b8d8dbe8dfb0bdf002a331bd54a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0eadf440e4cd770737eaaab6c3e662a7154fd581", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eadf440e4cd770737eaaab6c3e662a7154fd581", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0eadf440e4cd770737eaaab6c3e662a7154fd581", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eadf440e4cd770737eaaab6c3e662a7154fd581/comments", "author": null, "committer": null, "parents": [{"sha": "c132886e7c0605edb5f66c0614c98b61840efc24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c132886e7c0605edb5f66c0614c98b61840efc24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c132886e7c0605edb5f66c0614c98b61840efc24"}], "stats": {"total": 24, "additions": 19, "deletions": 5}, "files": [{"sha": "1ee4f569946b74246fda9ba7c023062253525853", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0eadf440e4cd770737eaaab6c3e662a7154fd581", "patch": "@@ -1,3 +1,11 @@\n+2003-11-21  Andreas Tobler  <a.tobler@schweiz.ch>\n+\n+\t* mklibgcc.in: Evaluate shlib_slibdir_qual during link\n+\tstep too.\n+\t* config/t-slibgcc-darwin: Adjust install path.\n+\t* config/rs6000/t-darwin: Revert multilib matches since\n+\tit is not used on darwin.\n+\n 2003-11-20  Richard Henderson  <rth@redhat.com>\n \n \t* ssa.c, ssa-dce.c, ssa-ccp.c: Remove files."}, {"sha": "490b633ec3bc0e58666b3475d79cd5b438f98fa5", "filename": "gcc/config/rs6000/t-darwin", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2Fconfig%2Frs6000%2Ft-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2Fconfig%2Frs6000%2Ft-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-darwin?ref=0eadf440e4cd770737eaaab6c3e662a7154fd581", "patch": "@@ -1,4 +1,3 @@\n # Library code must include trampoline support.\n LIB2FUNCS_EXTRA = $(srcdir)/config/rs6000/darwin-tramp.asm\n-# Multilib options\n-MULTILIB_MATCHES        = ${MULTILIB_MATCHES_FLOAT}\n+"}, {"sha": "f27fae4948c64a9565b1d53addffebc160dfb417", "filename": "gcc/config/t-slibgcc-darwin", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2Fconfig%2Ft-slibgcc-darwin", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2Fconfig%2Ft-slibgcc-darwin", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-darwin?ref=0eadf440e4cd770737eaaab6c3e662a7154fd581", "patch": "@@ -11,7 +11,7 @@ SHLIB_OBJS = @shlib_objs@\n SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@\n \n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -dynamiclib -nodefaultlibs \\\n-\t-Wl,-install_name,$(SHLIB_SONAME) \\\n+\t-Wl,-install_name,$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SONAME) \\\n \t-Wl,-flat_namespace -o $(SHLIB_NAME) \\\n \t$(SHLIB_VERSTRING) \\\n \t@multilib_flags@ $(SHLIB_OBJS) -lc && \\"}, {"sha": "72c6c2269865d46154a2b8e4ced20469824813bf", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0eadf440e4cd770737eaaab6c3e662a7154fd581/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=0eadf440e4cd770737eaaab6c3e662a7154fd581", "patch": "@@ -388,6 +388,7 @@ EOF\n       fi\n       shlib_so_name=\"$shlib_base_name\"\n       shlib_dir=\n+      shlib_slibdir_qual=\n       if [ -n \"$MULTILIB_OSDIRNAMES\" ]; then\n \tif [ \"$dir\" != . ]; then\n \t  gcc_multilib_dir=`./xgcc -B./ $flags --print-multi-directory`\n@@ -397,8 +398,12 @@ EOF\n \t  os_multilib_base=`echo $os_multilib_dir | sed -n \"s~/${gcc_multilib_sup}\\$~~p\"`\n \t  if [ -z \"$os_multilib_base\" ]; then\n \t    shlib_so_name=libgcc_s\n+\t    if [ \"$os_multilib_dir\" != \".\" ]; then\n+\t\tshlib_slibdir_qual=\"/$os_multilib_dir\"\n+\t    fi\n \t  else\n \t    shlib_so_name=libgcc_s_`echo $gcc_multilib_sup | sed s,/,_,g`\n+\t    shlib_slibdir_qual=\"/$os_multilib_base\"\n \t  fi\n \tfi\n       fi\n@@ -411,7 +416,8 @@ EOF\n \t       -e \"s%@shlib_base_name@%$shlib_base_name%g\" \\\n \t       -e \"s%@shlib_map_file@%$mapfile%g\" \\\n \t       -e \"s%@shlib_so_name@%$shlib_so_name%g\" \\\n-\t       -e \"s%@shlib_dir@%$shlib_dir%g\"\n+\t       -e \"s%@shlib_dir@%$shlib_dir%g\" \\\n+\t       -e \"s%@shlib_slibdir_qual@%%g\"\n     elif [ \"$SHLIB_MULTILIB\" = \"$dir\" ]; then\n       shlib_base_name=\"libgcc_s\";\n       echo \"\"\n@@ -423,7 +429,8 @@ EOF\n \t       -e \"s%@shlib_base_name@%$shlib_base_name%g\" \\\n \t       -e \"s%@shlib_map_file@%$mapfile%g\" \\\n \t       -e \"s%@shlib_so_name@%$shlib_base_name%g\" \\\n-\t       -e \"s%@shlib_dir@%%g\"\n+\t       -e \"s%@shlib_dir@%%g\" \\\n+\t       -e \"s%@shlib_slibdir_qual@%%g\"\n     fi\n   fi\n done"}]}