{"sha": "d5fa86ba422125132551f77aecb7d047e160ef0e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDVmYTg2YmE0MjIxMjUxMzI1NTFmNzdhZWNiN2QwNDdlMTYwZWYwZQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@redhat.com", "date": "2001-05-07T02:54:29Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2001-05-07T02:54:29Z"}, "message": "rs6000.c (rs6000_emit_prologue): Don't save the link register if we're not going to use it.\n\n\t* config/rs6000/rs6000.c (rs6000_emit_prologue): Don't save\n\tthe link register if we're not going to use it.\n\n\t* config/rs6000/rs6000.c (output_profile_hook): Fix a warning.\n\t(output_function_profiler): Likewise.\n\nFrom-SVN: r41888", "tree": {"sha": "3727b836eb7f97c7cfce009b0b26ad656abd2ae4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3727b836eb7f97c7cfce009b0b26ad656abd2ae4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5fa86ba422125132551f77aecb7d047e160ef0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5fa86ba422125132551f77aecb7d047e160ef0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5fa86ba422125132551f77aecb7d047e160ef0e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5fa86ba422125132551f77aecb7d047e160ef0e/comments", "author": null, "committer": null, "parents": [{"sha": "ff5a340ad5ccffb8c843a3f6e7632b22461dab16", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff5a340ad5ccffb8c843a3f6e7632b22461dab16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff5a340ad5ccffb8c843a3f6e7632b22461dab16"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "9226112c1999a16213fd872a0bdf2834c3fcdf2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5fa86ba422125132551f77aecb7d047e160ef0e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5fa86ba422125132551f77aecb7d047e160ef0e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d5fa86ba422125132551f77aecb7d047e160ef0e", "patch": "@@ -1,3 +1,11 @@\n+2001-05-06  Geoff Keating  <geoffk@redhat.com>\n+\n+\t* config/rs6000/rs6000.c (rs6000_emit_prologue): Don't save\n+\tthe link register if we're not going to use it.\n+\n+\t* config/rs6000/rs6000.c (output_profile_hook): Fix a warning.\n+\t(output_function_profiler): Likewise.\n+\n 2001-05-07  Alan Modra  <amodra@one.net.au>\n \n \t* pa.c (compute_frame_size): 64-bit frame marker is 16 bytes."}, {"sha": "09cef29d3c203d2106b6f378a8f8880661c1af2a", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5fa86ba422125132551f77aecb7d047e160ef0e/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5fa86ba422125132551f77aecb7d047e160ef0e/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=d5fa86ba422125132551f77aecb7d047e160ef0e", "patch": "@@ -37,6 +37,7 @@ Boston, MA 02111-1307, USA.  */\n #include \"except.h\"\n #include \"function.h\"\n #include \"output.h\"\n+#include \"basic-block.h\"\n #include \"toplev.h\"\n #include \"ggc.h\"\n #include \"hashtab.h\"\n@@ -5940,8 +5941,9 @@ rs6000_emit_prologue ()\n        it.  We use R11 for this purpose because emit_load_toc_table\n        can use register 0.  This allows us to use a plain 'blr' to return\n        from the procedure more often.  */\n-    int save_LR_around_toc_setup = (TARGET_ELF && flag_pic != 0 && \n-\t\t\t\t    ! info->lr_save_p);\n+    int save_LR_around_toc_setup = (TARGET_ELF && flag_pic != 0\n+\t\t\t\t    && ! info->lr_save_p\n+\t\t\t\t    && EXIT_BLOCK_PTR->pred != NULL);\n     if (save_LR_around_toc_setup)\n       emit_move_insn (gen_rtx_REG (Pmode, 11), \n \t\t      gen_rtx_REG (Pmode, LINK_REGISTER_REGNUM));\n@@ -7347,7 +7349,7 @@ output_profile_hook (labelno)\n     }\n   else if (DEFAULT_ABI == ABI_DARWIN)\n     {\n-      char *mcount_name = RS6000_MCOUNT;\n+      const char *mcount_name = RS6000_MCOUNT;\n       int caller_addr_regno = LINK_REGISTER_REGNUM;\n \n       /* Be conservative and always set this, at least for now.  */\n@@ -7376,9 +7378,6 @@ output_function_profiler (file, labelno)\n   FILE *file;\n   int labelno;\n {\n-  /* The last used parameter register.  */\n-  int last_parm_reg;\n-  int i, j;\n   char buf[100];\n \n   ASM_GENERATE_INTERNAL_LABEL (buf, \"LP\", labelno);"}]}