{"sha": "71f85957b6ec652431ca32b7de602167180b7fe0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzFmODU5NTdiNmVjNjUyNDMxY2EzMmI3ZGU2MDIxNjcxODBiN2ZlMA==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2004-06-25T18:31:56Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2004-06-25T18:31:56Z"}, "message": "gimplify.c (gimplify_compound_lval): Reset TREE_SIDE_EFFECTS after gimplifying the innermost component.\n\n        * gimplify.c (gimplify_compound_lval): Reset TREE_SIDE_EFFECTS\n        after gimplifying the innermost component.\n\nIn\n\nFrom-SVN: r83670", "tree": {"sha": "897ce7da8e802ab34db5d7f0cf89f098137ad970", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/897ce7da8e802ab34db5d7f0cf89f098137ad970"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71f85957b6ec652431ca32b7de602167180b7fe0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71f85957b6ec652431ca32b7de602167180b7fe0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71f85957b6ec652431ca32b7de602167180b7fe0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71f85957b6ec652431ca32b7de602167180b7fe0/comments", "author": null, "committer": null, "parents": [{"sha": "75822272d9f74ec95289fe8dd74944c383c14348", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75822272d9f74ec95289fe8dd74944c383c14348", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75822272d9f74ec95289fe8dd74944c383c14348"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "8866356f536b2b84e241c04aa5b6b47da770d5f3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71f85957b6ec652431ca32b7de602167180b7fe0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71f85957b6ec652431ca32b7de602167180b7fe0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=71f85957b6ec652431ca32b7de602167180b7fe0", "patch": "@@ -1,3 +1,8 @@\n+2004-06-24  Jeff Law  <law@redhat.com>\n+\n+\t* gimplify.c (gimplify_compound_lval): Reset TREE_SIDE_EFFECTS\n+\tafter gimplifying the innermost component.\n+\n 2004-06-25  Richard Sandiford  <rsandifo@redhat.com>\n \n \tPR target/16176"}, {"sha": "d34de91c0a3133d839c11015ef55b29dc0634550", "filename": "gcc/gimplify.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71f85957b6ec652431ca32b7de602167180b7fe0/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71f85957b6ec652431ca32b7de602167180b7fe0/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=71f85957b6ec652431ca32b7de602167180b7fe0", "patch": "@@ -1942,6 +1942,22 @@ gimplify_compound_lval (tree *expr_p, tree *pre_p,\n \t\t\twant_lvalue ? fb_lvalue : fb_rvalue);\n   ret = MIN (ret, tret);\n \n+  /* The innermost expression P may have originally had TREE_SIDE_EFFECTS\n+     set which would have caused all the outer expressions in EXPR_P leading\n+     to P to also have had TREE_SIDE_EFFECTS set.\n+ \n+     Gimplification of P may have cleared TREE_SIDE_EFFECTS on P, which should\n+     be propagated to P's parents, innermost to outermost.  */\n+  for (p = expr_p; handled_component_p (*p); p = &TREE_OPERAND (*p, 0))\n+    VARRAY_PUSH_TREE (stack, *p);\n+\n+  for (; VARRAY_ACTIVE_SIZE (stack) > 0; )\n+    {\n+      tree t = VARRAY_TOP_TREE (stack);\n+      recalculate_side_effects (t);\n+      VARRAY_POP (stack);\n+    }\n+\n   /* If the outermost expression is a COMPONENT_REF, canonicalize its type.  */\n   if (!want_lvalue && TREE_CODE (*expr_p) == COMPONENT_REF)\n     {"}]}