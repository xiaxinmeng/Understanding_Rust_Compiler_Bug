{"sha": "5316dd1b63913e390fb2a5d7b335aeacd9da3001", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTMxNmRkMWI2MzkxM2UzOTBmYjJhNWQ3YjMzNWFlYWNkOWRhMzAwMQ==", "commit": {"author": {"name": "Wilco Dijkstra", "email": "wdijkstr@arm.com", "date": "2017-08-14T11:18:50Z"}, "committer": {"name": "Wilco Dijkstra", "email": "wilco@gcc.gnu.org", "date": "2017-08-14T11:18:50Z"}, "message": "Add check_effective_target_autoincdec.\n\nAdd check_effective_target_autoincdec that returns true if a target\nruns the auto_inc_dec optimization pass.\n\n    gcc/\n\t* doc/sourcebuild.texi (autoincdec): Add autoincdec description.\n\n    gcc/testsuite/\n\tPR middle-end/46932\n\t* gcc.dg/pr46932.c: Use dg-require-effective-target autoincdec.\n\t* lib/target-supports.exp: Add check_effective_target_autoincdec.\n\nFrom-SVN: r251087", "tree": {"sha": "438c15e4f1577cbd6142da5d6768ca7946821048", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/438c15e4f1577cbd6142da5d6768ca7946821048"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5316dd1b63913e390fb2a5d7b335aeacd9da3001", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5316dd1b63913e390fb2a5d7b335aeacd9da3001", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5316dd1b63913e390fb2a5d7b335aeacd9da3001", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5316dd1b63913e390fb2a5d7b335aeacd9da3001/comments", "author": null, "committer": null, "parents": [{"sha": "250db3f9b2182fd7dabce50b7b3fb7e2ee85bf3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/250db3f9b2182fd7dabce50b7b3fb7e2ee85bf3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/250db3f9b2182fd7dabce50b7b3fb7e2ee85bf3d"}], "stats": {"total": 33, "additions": 30, "deletions": 3}, "files": [{"sha": "19bb575bf8f8b171ae4a3c89e864182a148fcb40", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5316dd1b63913e390fb2a5d7b335aeacd9da3001", "patch": "@@ -1,3 +1,8 @@\n+2017-08-14  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\tPR middle-end/46932\n+\t* doc/sourcebuild.texi (autoincdec): Add autoincdec description.\n+\n 2017-08-14  Georg-Johann Lay  <avr@gjlay.de>\n \n \tPR target/81754"}, {"sha": "e6313dc031ef5b2b5a72180bccf1e876812efe48", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=5316dd1b63913e390fb2a5d7b335aeacd9da3001", "patch": "@@ -1846,6 +1846,9 @@ PowerPC target supports executing VSX instructions (ISA 2.06).\n \n @c Please keep this table sorted alphabetically.\n @table @code\n+@item autoincdec\n+Target supports autoincrement/decrement addressing.\n+\n @item avx\n Target supports compiling @code{avx} instructions.\n "}, {"sha": "8995806e289aca47c4aac786f1fb9e983b5f64b1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5316dd1b63913e390fb2a5d7b335aeacd9da3001", "patch": "@@ -1,3 +1,9 @@\n+2017-08-14  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\tPR middle-end/46932\n+\t* gcc.dg/pr46932.c: Use dg-require-effective-target autoincdec.\n+\t* lib/target-supports.exp: Add check_effective_target_autoincdec.\n+\n 2017-08-14  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n \n \t* gcc.target/aarch64/dbl_mov_immediate_1.c: Add"}, {"sha": "2b39990d036035d22e226b98351a4900a5dbb309", "filename": "gcc/testsuite/gcc.dg/pr46932.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46932.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46932.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr46932.c?ref=5316dd1b63913e390fb2a5d7b335aeacd9da3001", "patch": "@@ -1,7 +1,5 @@\n /* { dg-options \"-O2 -fdump-rtl-auto_inc_dec\" } */\n-\n-/* Build on targets which have pre increment.  */\n-/* { dg-do compile { target aarch64*-*-* arm*-*-* rs6000-*-* powerpc*-*-* arc*-*-* m32r-*-* tic6x-*-* } } */\n+/* { dg-require-effective-target autoincdec } */\n \n /* Check that accesses based on the frame pointer do not\n    use auto increment.  */"}, {"sha": "5219fbf4671e83a6fa7affdab926115e8a23f9cb", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5316dd1b63913e390fb2a5d7b335aeacd9da3001/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=5316dd1b63913e390fb2a5d7b335aeacd9da3001", "patch": "@@ -8482,3 +8482,18 @@ proc check_effective_target_arm_coproc4_ok { } {\n     return [check_cached_effective_target arm_coproc4_ok \\\n \t\tcheck_effective_target_arm_coproc4_ok_nocache]\n }\n+\n+# Return 1 if the target supports the auto_inc_dec optimization pass.\n+proc check_effective_target_autoincdec { } {\n+    if { ![check_no_compiler_messages auto_incdec assembly { void f () { }\n+\t } \"-O2 -fdump-rtl-auto_inc_dec\" ] } {\n+      return 0\n+    }\n+\n+    set dumpfile [glob -nocomplain \"auto_incdec[pid].c.\\[0-9\\]\\[0-9\\]\\[0-9\\]r.auto_inc_dec\"]\n+    if { [file exists $dumpfile ] } {\n+\tfile delete $dumpfile\n+\treturn 1\n+    }\n+    return 0\n+}"}]}