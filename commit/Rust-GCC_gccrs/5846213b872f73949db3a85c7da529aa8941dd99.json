{"sha": "5846213b872f73949db3a85c7da529aa8941dd99", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTg0NjIxM2I4NzJmNzM5NDlkYjNhODVjN2RhNTI5YWE4OTQxZGQ5OQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2009-04-26T19:27:50Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2009-04-26T19:27:50Z"}, "message": "re PR fortran/39893 ([4.4] gfortran ICE on invalid program)\n\n2009-04-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/39893\n\t* gfortran.dg/assumed_charlen_dummy.f90: New Test.\n\n\n2009-04-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/39893\n\tfortran/data.c (gfc_assign_data_value): If the lvalue is an \n\tassumed character length entity in a data statement, then \n\treturn FAILURE to prevent segmentation fault.\n\nFrom-SVN: r146816", "tree": {"sha": "627a6547015316bec10ca0cb4869fd5c4695b060", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/627a6547015316bec10ca0cb4869fd5c4695b060"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5846213b872f73949db3a85c7da529aa8941dd99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5846213b872f73949db3a85c7da529aa8941dd99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5846213b872f73949db3a85c7da529aa8941dd99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5846213b872f73949db3a85c7da529aa8941dd99/comments", "author": null, "committer": null, "parents": [{"sha": "17c665a9974c98d2835680cdc6fd92408f1c87f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17c665a9974c98d2835680cdc6fd92408f1c87f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17c665a9974c98d2835680cdc6fd92408f1c87f3"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "daafc06d079d79f93e7f517b589866a1b89aaba1", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5846213b872f73949db3a85c7da529aa8941dd99", "patch": "@@ -1,3 +1,10 @@\n+2009-04-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/39893\n+\tfortran/data.c (gfc_assign_data_value): If the lvalue is an \n+\tassumed character length entity in a data statement, then \n+\treturn FAILURE to prevent segmentation fault.\n+\n 2009-04-26  Jakub Jelinek  <jakub@redhat.com>\n \n \t* trans-decl.c: Include pointer-set.h."}, {"sha": "5829c7f9c672e083dd723a942a23c20e5bdf0887", "filename": "gcc/fortran/data.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ffortran%2Fdata.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ffortran%2Fdata.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdata.c?ref=5846213b872f73949db3a85c7da529aa8941dd99", "patch": "@@ -416,7 +416,11 @@ gfc_assign_data_value (gfc_expr *lvalue, gfc_expr *rvalue, mpz_t index)\n     }\n \n   if (ref || last_ts->type == BT_CHARACTER)\n-    expr = create_character_intializer (init, last_ts, ref, rvalue);\n+    {\n+      if (lvalue->ts.cl->length == NULL && !(ref && ref->u.ss.length != NULL))\n+\treturn FAILURE;\n+      expr = create_character_intializer (init, last_ts, ref, rvalue);\n+    }\n   else\n     {\n       /* Overwriting an existing initializer is non-standard but usually only"}, {"sha": "2c080fad8eece59424d1c6c6aed2e7026cb2227b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5846213b872f73949db3a85c7da529aa8941dd99", "patch": "@@ -1,3 +1,8 @@\n+2009-04-26  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/39893\n+\t* gfortran.dg/assumed_charlen_dummy.f90: New Test.\n+\n 2009-04-26  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR inline-asm/39543"}, {"sha": "04f0b9faaded773405f1f5ec4a322e1673193dbd", "filename": "gcc/testsuite/gfortran.dg/assumed_charlen_dummy.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_charlen_dummy.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5846213b872f73949db3a85c7da529aa8941dd99/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_charlen_dummy.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassumed_charlen_dummy.f90?ref=5846213b872f73949db3a85c7da529aa8941dd99", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+! Test the fix for PR fortran/39893.\n+! Original testcase provided by Deji Akingunola.\n+! Reduced testcase provided by Dominique d'Humieres.\n+!\n+      SUBROUTINE XAUTOGET()\n+      CHARACTER*(*) DICBA    ! { dg-error \"Entity with assumed character\" }\n+      DATA DICBA /\"CLIP\" /\n+      RETURN\n+      END"}]}