{"sha": "a2676865a6f4f980779e6ff60839739fbc3ad826", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI2NzY4NjVhNmY0Zjk4MDc3OWU2ZmY2MDgzOTczOWZiYzNhZDgyNg==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-09-10T00:59:16Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1997-09-10T00:59:16Z"}, "message": "except.c (expand_throw): Call build_delete for all exception types, not just objects with destructors.\n\n\t* except.c (expand_throw): Call build_delete for all\n\texception types, not just objects with destructors.\n\nFrom-SVN: r15207", "tree": {"sha": "553c64d24c890953f15d87d70d52a766dcee55a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/553c64d24c890953f15d87d70d52a766dcee55a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2676865a6f4f980779e6ff60839739fbc3ad826", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2676865a6f4f980779e6ff60839739fbc3ad826", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2676865a6f4f980779e6ff60839739fbc3ad826", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2676865a6f4f980779e6ff60839739fbc3ad826/comments", "author": null, "committer": null, "parents": [{"sha": "c82af01654489f0da3e85b80a8920220d3496c0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c82af01654489f0da3e85b80a8920220d3496c0a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c82af01654489f0da3e85b80a8920220d3496c0a"}], "stats": {"total": 7773, "additions": 3909, "deletions": 3864}, "files": [{"sha": "39b5e1cebcc9b364a2574cf2681c6dc75fa42527", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2676865a6f4f980779e6ff60839739fbc3ad826/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2676865a6f4f980779e6ff60839739fbc3ad826/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a2676865a6f4f980779e6ff60839739fbc3ad826", "patch": "@@ -3,6 +3,11 @@\n \t* typeck.c (build_indirect_ref): Heed FLAG_VOLATILE similar to\n \tc-typeck.c.\n \n+Tue Sep  9 09:36:39 1997  Benjamin Kosnik  <bkoz@rhino.cygnus.com>\n+\n+\t* except.c (expand_throw): Call build_delete for all \n+\texception types, not just objects with destructors.\n+\n Mon Sep  8 02:33:20 1997  Jody Goldberg  <jodyg@idt.net>\n \n \t* decl.c (current_local_enum): Remove static.\n@@ -46,6 +51,48 @@ Fri Sep  5 17:27:38 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* class.c (grow_method): Remove check for redeclaration.\n \n+Fri Sep  5 01:37:17 1997  Mark Mitchell  <mmitchell@usa.net>\n+\n+\t* cp-tree.h (INNERMOST_TEMPLATE_PARMS): New macro.\n+\t(DECL_INNERMOST_TEMPLATE_PARMS): Likewise.\n+\t(PRIMARY_TEMPLATE_P): Use it.\n+\t* call.c (build_overload_call_real): Use it.\n+\t* class.c (instantiate_type): Likewise.\n+\t* decl.c (decls_match): Likewise.\n+\t* method.c (build_overload_identifier): Likewise.\n+\t* pt.c (push_template_decl): Likewise.\n+\t(classtype_mangled_name): Likewise.\n+\t(lookup_template_class): Likewise.\n+\t\n+\t* cp-tree.h (DECL_NTPARMS): Change name from DECL_NT_PARMS to\n+\tDECL_NTPARMS to conform to usage elsewhere.\n+\t* call.c (add_template_candidate): Likewise.\n+\t* class.c (instantiate_type): Likewise.\n+\t* pt.c (instantiate_template): Likewise.\n+\t(get_bindings): Likewise.\n+\t\n+\t* class.c (grow_method): Use DECL_FUNCTION_TEMPLATE_P instead of\n+\tis_member_template.\n+\n+\t* pt.c (unify): Undo changes to allow multiple levels of template\n+\tparameters. \n+\t(type_unification): Likewise.\n+\t(fn_type_unification): Likewise.\n+\t(get_class_bindings): Likewise.\n+\t* cp-tree.h (Likewise).\n+\t\n+\t* decl.c (replace_defarg): Check that the type of the default\n+\tparameter does not invlove a template type before complaining\n+\tabout the initialization.\n+\n+\t* error.c (dump_expr): Deal with template constant parameters in\n+\tmember templates correctly.\n+\n+\t* pt.c (is_member_template): Deal with class specializations\n+\tcorrectly. \n+\t(tsubst): Handle \"partial instantiation\" of member templates\n+\tcorrectly. \n+\n Wed Sep  3 12:30:24 1997  Mark Mitchell  <mmitchell@usa.net>\n \n \t* pt.c (type_unification): Change calling squence to allow for"}, {"sha": "79d8e197da174f11140e518c5307ef20315b64d3", "filename": "gcc/cp/except.c", "status": "modified", "additions": 8, "deletions": 21, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2676865a6f4f980779e6ff60839739fbc3ad826/gcc%2Fcp%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2676865a6f4f980779e6ff60839739fbc3ad826/gcc%2Fcp%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fexcept.c?ref=a2676865a6f4f980779e6ff60839739fbc3ad826", "patch": "@@ -1142,27 +1142,14 @@ expand_throw (exp)\n \t  object = build_indirect_ref (exp, NULL_PTR);\n \t  throw_type = build_eh_type (object);\n \n-\t  start_sequence ();\n-\t  object = build_reinterpret_cast (TREE_TYPE (exp), saved_throw_value);\n-\t  object = build_indirect_ref (object, NULL_PTR);\n-\t  cleanup = maybe_build_cleanup_and_delete (object);\n-\t  end_sequence ();\n-\n-\t  if (cleanup)\n-\t    {\n-\t      cleanup = start_anon_func ();\n-\n-\t      expand_expr (maybe_build_cleanup_and_delete (object),\n-\t\t\t   const0_rtx, VOIDmode, 0);\n-\n-\t      end_anon_func ();\n-\n-\t      mark_addressable (cleanup);\n-\t    }\n-\t  else\n-\t    {\n-\t      cleanup = empty_fndecl;\n-\t    }\n+       \t  /* Build __tcf_ function. */\n+\t  cleanup = start_anon_func ();\n+\t  object = build_delete (TREE_TYPE (exp), saved_throw_value, \n+\t\t\t\t integer_three_node, LOOKUP_NORMAL|LOOKUP_DESTRUCTOR, 0);\n+\t  expand_expr (object, const0_rtx, VOIDmode, 0);\n+\t  end_anon_func ();\n+\t  mark_addressable (cleanup);\n+\n \t}\n \n       if (cleanup == empty_fndecl)"}, {"sha": "989b2b67f49a798613594dbd49f53b94b9dfe6aa", "filename": "gcc/cp/parse.c", "status": "modified", "additions": 3854, "deletions": 3843, "changes": 7697, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2676865a6f4f980779e6ff60839739fbc3ad826/gcc%2Fcp%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2676865a6f4f980779e6ff60839739fbc3ad826/gcc%2Fcp%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparse.c?ref=a2676865a6f4f980779e6ff60839739fbc3ad826"}]}