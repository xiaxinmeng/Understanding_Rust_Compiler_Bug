{"sha": "8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI0ODkyM2JhY2IxNjUyNmQ0YzcxOWIyYWRmZGZjMWYyY2YzNTUxYw==", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@synopsys.com", "date": "2016-04-28T11:53:34Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@gcc.gnu.org", "date": "2016-04-28T11:53:34Z"}, "message": "[ARC/LIBGCC] Add TLS support.\n\nlibgcc/\n2016-04-28  Claudiu Zissulescu  <claziss@synopsys.com>\n\t    Joern Rennecke  <joern.rennecke@embecosm.com>\n\n\t* config/arc/crttls.S: New file.\n\t* config/arc/t-arc: New rule.\n\t* config.host (arc*-*-elf*, arc*-*-linux*): Add crttls.o.\n\nCo-Authored-By: Joern Rennecke <joern.rennecke@embecosm.com>\n\nFrom-SVN: r235558", "tree": {"sha": "0b455ed4da8052e402087cf79f26d01c66105efb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b455ed4da8052e402087cf79f26d01c66105efb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "24efbb3e41ad07504ace2e6104fc0c0a6291068e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24efbb3e41ad07504ace2e6104fc0c0a6291068e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24efbb3e41ad07504ace2e6104fc0c0a6291068e"}], "stats": {"total": 79, "additions": 79, "deletions": 0}, "files": [{"sha": "598c1a09a6179ce062ac9cb1d66caf0791df9022", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "patch": "@@ -1,3 +1,10 @@\n+2016-04-28  Claudiu Zissulescu  <claziss@synopsys.com>\n+\t    Joern Rennecke  <joern.rennecke@embecosm.com>\n+\n+\t* config/arc/crttls.S: New file.\n+\t* config/arc/t-arc: New rule.\n+\t* config.host (arc*-*-elf*, arc*-*-linux*): Add crttls.o.\n+\n 2016-04-25  Nick Clifton  <nickc@redhat.com>\n \n \t* config/msp430/cmpd.c (__mspabi_cmpf): Add prototype."}, {"sha": "c5266ed82886e5bc145c517149e5ad73285a4d8c", "filename": "libgcc/config.host", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "patch": "@@ -367,10 +367,12 @@ alpha*-dec-*vms*)\n arc*-*-elf*)\n \ttmake_file=\"arc/t-arc-newlib arc/t-arc\"\n \textra_parts=\"crti.o crtn.o crtend.o crtbegin.o crtendS.o crtbeginS.o libgmon.a crtg.o crtgend.o\"\n+\textra_parts=\"${extra_parts} crttls.o\"\n \t;;\n arc*-*-linux-uclibc*)\n \ttmake_file=\"${tmake_file} t-slibgcc-libgcc t-slibgcc-nolc-override arc/t-arc700-uClibc arc/t-arc\"\n \textra_parts=\"crti.o crtn.o crtend.o crtbegin.o crtendS.o crtbeginS.o libgmon.a crtg.o crtgend.o\"\n+\textra_parts=\"${extra_parts} crttls.o\"\n \t;;\n arm-wrs-vxworks)\n \ttmake_file=\"$tmake_file arm/t-arm arm/t-elf t-softfp-sfdf t-softfp-excl arm/t-softfp t-softfp\""}, {"sha": "512c1df53c020c57ae0dba97d4e3898e780676ca", "filename": "libgcc/config/arc/crttls.S", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2Fconfig%2Farc%2Fcrttls.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2Fconfig%2Farc%2Fcrttls.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farc%2Fcrttls.S?ref=8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "patch": "@@ -0,0 +1,67 @@\n+; newlib tls glue code for Synopsys DesignWare ARC cpu.\n+\n+/* Copyright (C) 2016 Free Software Foundation, Inc.\n+   Contributor: Joern Rennecke <joern.rennecke@embecosm.com>\n+\t\ton behalf of Synopsys Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify it under\n+the terms of the GNU General Public License as published by the Free\n+Software Foundation; either version 3, or (at your option) any later\n+version.\n+\n+GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+for more details.\n+\n+Under Section 7 of GPL version 3, you are granted additional\n+permissions described in the GCC Runtime Library Exception, version\n+3.1, as published by the Free Software Foundation.\n+\n+You should have received a copy of the GNU General Public License and\n+a copy of the GCC Runtime Library Exception along with this program;\n+see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+<http://www.gnu.org/licenses/>.  */\n+\n+/* As a special exception, if you link this library with other files,\n+   some of which are compiled with GCC, to produce an executable,\n+   this library does not by itself cause the resulting executable\n+   to be covered by the GNU General Public License.\n+   This exception does not however invalidate any other reasons why\n+   the executable file might be covered by the GNU General Public License.  */\n+\n+\n+#if (__ARC_TLS_REGNO__ != -1)\n+ /* ANSI concatenation macros.  */\n+\n+#define CONCAT1(a, b) CONCAT2(a, b)\n+#define CONCAT2(a, b) a ## b\n+\n+ /* Use the right prefix for global labels.  */\n+\n+#define SYM(x) CONCAT1 (__USER_LABEL_PREFIX__, x)\n+\n+#define FUNC(X)         .type SYM(X),@function\n+#define ENDFUNC0(X)     .Lfe_##X: .size X,.Lfe_##X-X\n+#define ENDFUNC(X)      ENDFUNC0(X)\n+\n+\t.global SYM(__read_tp)\n+SYM(__read_tp):\n+\tFUNC(__read_tp)\n+\tmov r0, CONCAT1 (r, __ARC_TLS_REGNO__)\n+\tnop\n+\tj [blink]\n+\tENDFUNC(__read_tp)\n+\n+\t.section .init\n+\tmov CONCAT1 (r, __ARC_TLS_REGNO__),__main_tcb_end+256\n+\n+\t.section .tbss\n+__main_tcb:\n+\t.long 0\n+\t.long 0\n+__main_tcb_end:\n+\n+#endif /*__ARC_TLS_REGNO__ != -1 */"}, {"sha": "3523aedec13b777367c49b73be473a0c84f1dff7", "filename": "libgcc/config/arc/t-arc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2Fconfig%2Farc%2Ft-arc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b48923bacb16526d4c719b2adfdfc1f2cf3551c/libgcc%2Fconfig%2Farc%2Ft-arc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farc%2Ft-arc?ref=8b48923bacb16526d4c719b2adfdfc1f2cf3551c", "patch": "@@ -68,6 +68,9 @@ crtg.o: $(srcdir)/config/arc/crtg.S\n crtgend.o: $(srcdir)/config/arc/crtgend.S\n \t$(crt_compile) -c -x assembler-with-cpp $<\n \n+crttls.o: $(srcdir)/config/arc/crttls.S\n+\t$(crt_compile) -c -x assembler-with-cpp $<\n+\n mcount.o: $(srcdir)/config/arc/gmon/mcount.c\n \t$(gcc_compile) -isystem $(srcdir)/config/arc/gmon -c $< \\\n \t-fcall-saved-r0 -fcall-saved-r1 -fcall-saved-r2 -fcall-saved-r3 \\"}]}