{"sha": "666260c30496a7d413cce94ffde5518ad73d9364", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjY2MjYwYzMwNDk2YTdkNDEzY2NlOTRmZmRlNTUxOGFkNzNkOTM2NA==", "commit": {"author": {"name": "David O'Brien", "email": "obrien@FreeBSD.org", "date": "1999-06-15T00:55:52Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-06-15T00:55:52Z"}, "message": "freebsd-elf.h (LINK_SPEC): clean up the linking library specifications and make it realistic.\n\n\ufffd\n        * i386/freebsd-elf.h (LINK_SPEC): clean up the linking library\n        specifications and make it realistic.\n        (LIB_SPEC): Likewise.\n\nFrom-SVN: r27529", "tree": {"sha": "964b1a04575ca1123c4112a32362b8968a78de10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/964b1a04575ca1123c4112a32362b8968a78de10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/666260c30496a7d413cce94ffde5518ad73d9364", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/666260c30496a7d413cce94ffde5518ad73d9364", "html_url": "https://github.com/Rust-GCC/gccrs/commit/666260c30496a7d413cce94ffde5518ad73d9364", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/666260c30496a7d413cce94ffde5518ad73d9364/comments", "author": null, "committer": null, "parents": [{"sha": "37883afa4262fcd5ff2b655b765fe07953ae03d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37883afa4262fcd5ff2b655b765fe07953ae03d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37883afa4262fcd5ff2b655b765fe07953ae03d0"}], "stats": {"total": 48, "additions": 27, "deletions": 21}, "files": [{"sha": "9bbd8fcdad6d4986820cd496cf872a6fb3716bb1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/666260c30496a7d413cce94ffde5518ad73d9364/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/666260c30496a7d413cce94ffde5518ad73d9364/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=666260c30496a7d413cce94ffde5518ad73d9364", "patch": "@@ -1,3 +1,9 @@\n+Tue Jun 15 01:55:20 1999  David O'Brien <obrien@FreeBSD.org>\n+\n+\t* i386/freebsd-elf.h (LINK_SPEC): clean up the linking library \n+\tspecifications and make it realistic.  \n+\t(LIB_SPEC): Likewise.\n+\n Mon Jun 14 15:38:43 1999  Jim Wilson  <wilson@cygnus.com>\n \n \t* config/mips/mips.c (mips_secondary_reload_class): Check for"}, {"sha": "59988909cba83b5e34252f6e3cb8f44b61cfff80", "filename": "gcc/config/i386/freebsd-elf.h", "status": "modified", "additions": 21, "deletions": 21, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/666260c30496a7d413cce94ffde5518ad73d9364/gcc%2Fconfig%2Fi386%2Ffreebsd-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/666260c30496a7d413cce94ffde5518ad73d9364/gcc%2Fconfig%2Fi386%2Ffreebsd-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffreebsd-elf.h?ref=666260c30496a7d413cce94ffde5518ad73d9364", "patch": "@@ -210,22 +210,18 @@ Boston, MA 02111-1307, USA.  */\n #define ENDFILE_SPEC \\\n   \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n \n-\n-#undef\tLIB_SPEC\n-#if 1\n-/* We no longer link with libc_p.a or libg.a by default. If you\n- * want to profile or debug the C library, please add\n- * -lc_p or -ggdb to LDFLAGS at the link time, respectively.\n- */\n-#define LIB_SPEC \\\n-  \"%{!shared: %{mieee-fp:-lieee} %{p:-lgmon} %{pg:-lgmon} \\\n-     %{!ggdb:-lc} %{ggdb:-lg}}\"\n-#else\n-#define LIB_SPEC \\\n-  \"%{!shared: \\\n-     %{mieee-fp:-lieee} %{p:-lgmon -lc_p} %{pg:-lgmon -lc_p} \\\n-       %{!p:%{!pg:%{!g*:-lc} %{g*:-lg}}}}\"\n-#endif\n+/* Provide a LIB_SPEC appropriate for FreeBSD.  Just select the appropriate\n+   libc, depending on whether we're doing profiling or need threads support.\n+   (simular to the default, except no -lg, and no -p.  */\n+\n+#undef LIB_SPEC\n+#define LIB_SPEC \"%{!shared: \\\n+   %{!pg:%{!pthread:%{!kthread:-lc} \\\n+     %{kthread:-lpthread -lc}} \\\n+     %{pthread:-lc_r}} \\\n+   %{pg:%{!pthread:%{!kthread:-lc_p} \\\n+     %{kthread:-lpthread_p -lc_p}} \\\n+     %{pthread:-lc_r_p}}}\"\n \n /* Provide a LINK_SPEC appropriate for FreeBSD.  Here we provide support\n    for the special GCC options -static and -shared, which allow us to\n@@ -242,13 +238,17 @@ Boston, MA 02111-1307, USA.  */\n    done.  */\n \n #undef\tLINK_SPEC\n-#define LINK_SPEC \"-m elf_i386 %{shared:-shared} \\\n-  %{!shared: \\\n-    %{!ibcs: \\\n+#define LINK_SPEC \"-m elf_i386 \\\n+  %{Wl,*:%*} \\\n+  %{v:-V} \\\n+  %{assert*} %{R*} %{rpath*} %{defsym*} \\\n+  %{shared:-Bshareable %{h*} %{soname*}} \\\n+    %{!shared: \\\n       %{!static: \\\n-\t%{rdynamic:-export-dynamic} \\\n+        %{rdynamic:-export-dynamic} \\\n \t%{!dynamic-linker:-dynamic-linker /usr/libexec/ld-elf.so.1}} \\\n-\t%{static:-Bstatic}}}\"\n+    %{static:-Bstatic}}} \\\n+  %{symbolic:-Bsymbolic}\"\n \n /* A C statement to output to the stdio stream FILE an assembler\n    command to advance the location counter to a multiple of 1<<LOG"}]}