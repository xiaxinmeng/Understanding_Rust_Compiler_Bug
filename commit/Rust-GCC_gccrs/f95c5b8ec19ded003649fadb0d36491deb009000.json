{"sha": "f95c5b8ec19ded003649fadb0d36491deb009000", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk1YzViOGVjMTlkZWQwMDM2NDlmYWRiMGQzNjQ5MWRlYjAwOTAwMA==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@linaro.org", "date": "2017-11-22T13:58:20Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2017-11-22T13:58:20Z"}, "message": "Fix calculation of ptr_mode for MODE_PARTIAL_INT Pmode\n\nThis patch fixes a regression caused by r251469, where I'd incorrectly\nconverted a call to mode_for_size that sometimes needs MODE_PARTIAL_INTs.\n\n2017-11-22  Richard Sandiford  <richard.sandiford@linaro.org>\n\ngcc/\n\t* emit-rtl.c (init_derived_machine_modes): Make sure ptr_mode\n\thas the same mode class as Pmode.\n\nFrom-SVN: r255057", "tree": {"sha": "2bc596ed89706f91e1b7c5fb7ebd2b6e5cbfce51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2bc596ed89706f91e1b7c5fb7ebd2b6e5cbfce51"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f95c5b8ec19ded003649fadb0d36491deb009000", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f95c5b8ec19ded003649fadb0d36491deb009000", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f95c5b8ec19ded003649fadb0d36491deb009000", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f95c5b8ec19ded003649fadb0d36491deb009000/comments", "author": null, "committer": null, "parents": [{"sha": "902c4e8f958707fcddf8e641edf8a586ee629319", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/902c4e8f958707fcddf8e641edf8a586ee629319", "html_url": "https://github.com/Rust-GCC/gccrs/commit/902c4e8f958707fcddf8e641edf8a586ee629319"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "ed0dc478547642119bfdf88a7ac52aff3f137943", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f95c5b8ec19ded003649fadb0d36491deb009000/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f95c5b8ec19ded003649fadb0d36491deb009000/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f95c5b8ec19ded003649fadb0d36491deb009000", "patch": "@@ -1,3 +1,8 @@\n+2017-11-22  Richard Sandiford  <richard.sandiford@linaro.org>\n+\n+\t* emit-rtl.c (init_derived_machine_modes): Make sure ptr_mode\n+\thas the same mode class as Pmode.\n+\n 2017-11-22  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n \n \t* config/arm/arm.c (cmse_nonsecure_call_clear_caller_saved): Get rid of"}, {"sha": "428e4743454f78616a22ae89d466db8b84899575", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f95c5b8ec19ded003649fadb0d36491deb009000/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f95c5b8ec19ded003649fadb0d36491deb009000/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=f95c5b8ec19ded003649fadb0d36491deb009000", "patch": "@@ -6003,7 +6003,8 @@ init_derived_machine_modes (void)\n \n   byte_mode = opt_byte_mode.require ();\n   word_mode = opt_word_mode.require ();\n-  ptr_mode = int_mode_for_size (POINTER_SIZE, 0).require ();\n+  ptr_mode = as_a <scalar_int_mode>\n+    (mode_for_size (POINTER_SIZE, GET_MODE_CLASS (Pmode), 0).require ());\n }\n \n /* Create some permanent unique rtl objects shared between all functions.  */"}]}