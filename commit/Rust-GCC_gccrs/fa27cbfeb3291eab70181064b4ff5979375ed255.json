{"sha": "fa27cbfeb3291eab70181064b4ff5979375ed255", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmEyN2NiZmViMzI5MWVhYjcwMTgxMDY0YjRmZjU5NzkzNzVlZDI1NQ==", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@synopsys.com", "date": "2019-04-16T10:21:03Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@gcc.gnu.org", "date": "2019-04-16T10:21:03Z"}, "message": "[ARC] Remove Rs5 constraint.\n\nNew LRA algorithms require the all the register constraints to be\ndefined using define_register_constraint keyword. However, Rs5\nconstraint was not LRA proof. Remove it and replace it by equivalent\nRcd constraint.\n\ngcc/\nxxxx-xx-xx  Claudiu Zissulescu  <claziss@synopsys.com>\n\n\t* config/arc/arc.md (sibcall_insn): Use Rcd constraint.\n\t(sibcall_value_insn): Likewise.\n\t* config/arc/constraints.md (Rs5): Remove.\n\nFrom-SVN: r270386", "tree": {"sha": "b5c33cfd65a564157bcf620f7a60e452055eaab6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5c33cfd65a564157bcf620f7a60e452055eaab6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa27cbfeb3291eab70181064b4ff5979375ed255", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa27cbfeb3291eab70181064b4ff5979375ed255", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa27cbfeb3291eab70181064b4ff5979375ed255", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa27cbfeb3291eab70181064b4ff5979375ed255/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "47d8cb2384790968a680935485a188e2ba7b33d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47d8cb2384790968a680935485a188e2ba7b33d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47d8cb2384790968a680935485a188e2ba7b33d2"}], "stats": {"total": 44, "additions": 20, "deletions": 24}, "files": [{"sha": "2a0bc74552f8e6e975fc3f8c1656dae5993ac61a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa27cbfeb3291eab70181064b4ff5979375ed255", "patch": "@@ -1,3 +1,9 @@\n+2019-04-16  Claudiu Zissulescu  <claziss@synopsys.com>\n+\n+\t* config/arc/arc.md (sibcall_insn): Use Rcd constraint.\n+\t(sibcall_value_insn): Likewise.\n+\t* config/arc/constraints.md (Rs5): Remove.\n+\n 2019-04-16  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* config/arc/arc.c (arc_hard_regno_modes): Add two missing modes"}, {"sha": "ce1004c1b56a5a84f001674dcd3745e9fda8efc4", "filename": "gcc/config/arc/arc.md", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2Fconfig%2Farc%2Farc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2Fconfig%2Farc%2Farc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Farc.md?ref=fa27cbfeb3291eab70181064b4ff5979375ed255", "patch": "@@ -4702,17 +4702,17 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n \n (define_insn \"*sibcall_insn\"\n  [(call (mem:SI (match_operand:SI 0 \"call_address_operand\"\n-\t\t \"Cbp,Cbr,Rs5,Rsc,Cal\"))\n+\t\t \"Cbp,Cbr,!Rcd,Rsc,Cal\"))\n \t(match_operand 1 \"\" \"\"))\n   (simple_return)\n   (use (match_operand 2 \"\" \"\"))]\n   \"\"\n   \"@\n-   b%!%* %P0\n-   b%!%* %P0\n-   j%!%* [%0]%&\n-   j%!%* [%0]\n-   j%! %P0\"\n+   b%!%*\\\\t%P0\n+   b%!%*\\\\t%P0\n+   j%!%*\\\\t[%0]\n+   j%!%*\\\\t[%0]\n+   j%!\\\\t%P0\"\n   [(set_attr \"type\" \"call,call,call,call,call_no_delay_slot\")\n    (set_attr \"predicable\" \"yes,no,no,yes,yes\")\n    (set_attr \"iscompact\" \"false,false,maybe,false,false\")\n@@ -4722,17 +4722,17 @@ core_3, archs4x, archs4xd, archs4xd_slow\"\n (define_insn \"*sibcall_value_insn\"\n  [(set (match_operand 0 \"dest_reg_operand\" \"\")\n        (call (mem:SI (match_operand:SI 1 \"call_address_operand\"\n-\t      \"Cbp,Cbr,Rs5,Rsc,Cal\"))\n+\t      \"Cbp,Cbr,!Rcd,Rsc,Cal\"))\n \t     (match_operand 2 \"\" \"\")))\n   (simple_return)\n   (use (match_operand 3 \"\" \"\"))]\n   \"\"\n   \"@\n-   b%!%* %P1\n-   b%!%* %P1\n-   j%!%* [%1]%&\n-   j%!%* [%1]\n-   j%! %P1\"\n+   b%!%*\\\\t%P1\n+   b%!%*\\\\t%P1\n+   j%!%*\\\\t[%1]\n+   j%!%*\\\\t[%1]\n+   j%!\\\\t%P1\"\n   [(set_attr \"type\" \"call,call,call,call,call_no_delay_slot\")\n    (set_attr \"predicable\" \"yes,no,no,yes,yes\")\n    (set_attr \"iscompact\" \"false,false,maybe,false,false\")"}, {"sha": "494e4792316a64701dd83f9d0b5fdd5a686f3f6c", "filename": "gcc/config/arc/constraints.md", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2Fconfig%2Farc%2Fconstraints.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2Fconfig%2Farc%2Fconstraints.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Fconstraints.md?ref=fa27cbfeb3291eab70181064b4ff5979375ed255", "patch": "@@ -480,16 +480,6 @@\n   (and (match_code \"reg\")\n        (match_test \"REGNO (op) == 31\")))\n \n-(define_constraint \"Rs5\"\n-  \"@internal\n-   sibcall register - only allow one of the five available 16 bit isnsn.\n-   Registers usable in ARCompact 16-bit instructions: @code{r0}-@code{r3},\n-   @code{r12}\"\n-  (and (match_code \"reg\")\n-       (match_test \"!arc_ccfsm_cond_exec_p ()\")\n-       (ior (match_test \"(unsigned) REGNO (op) <= 3\")\n-\t    (match_test \"REGNO (op) == 12\"))))\n-\n (define_constraint \"Rcc\"\n   \"@internal\n   Condition Codes\""}, {"sha": "9ae36ca0df394770a498879b7f62c0234012665f", "filename": "gcc/testsuite/gcc.target/arc/long-calls.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Flong-calls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa27cbfeb3291eab70181064b4ff5979375ed255/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Flong-calls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Flong-calls.c?ref=fa27cbfeb3291eab70181064b4ff5979375ed255", "patch": "@@ -5,7 +5,7 @@ int g (void);\n \n int f (void)\n {\n-        g();\n+  g();\n }\n \n-/* { dg-final { scan-assembler \"j @g\" } } */\n+/* { dg-final { scan-assembler \"j\\\\t@g\" } } */"}]}