{"sha": "a8430f1914da98400c9b858419623527d3da159f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTg0MzBmMTkxNGRhOTg0MDBjOWI4NTg0MTk2MjM1MjdkM2RhMTU5Zg==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2016-04-18T18:39:03Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2016-04-18T18:39:03Z"}, "message": "Update install.texi for GCC 6 on Solaris\n\n\t* doc/install.texi (Specific, i?86-*-solaris2.10): Update gas and\n\tgld requirements.\n\t(Specific, *-*-solaris2*): Update Solaris 11 bundled gcc\n\tversions.\n\tMention Solaris 11 packaging changes.\n\tUpdate gas and gld requirements.\n\tRemove reference to pre-Solaris 10 bug.\n\t(Specific, sparc-sun-solaris2*): Remove reference to pre-Solaris 10\n\tsystems and bugs.\n\t(Specific, sparc64-*-solaris2*): Remove reference to bootstrap\n\twith cc.\n\nFrom-SVN: r235162", "tree": {"sha": "87455f9e6bf4b36b77fe58d1bbb048c15cafb3fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87455f9e6bf4b36b77fe58d1bbb048c15cafb3fd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8430f1914da98400c9b858419623527d3da159f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8430f1914da98400c9b858419623527d3da159f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8430f1914da98400c9b858419623527d3da159f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8430f1914da98400c9b858419623527d3da159f/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0cded43df4e04799722b0595b4d31cd85bd29920", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cded43df4e04799722b0595b4d31cd85bd29920", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cded43df4e04799722b0595b4d31cd85bd29920"}], "stats": {"total": 133, "additions": 55, "deletions": 78}, "files": [{"sha": "ee036bdeea90ca1e54b62a8560d54a7a15c80cfd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8430f1914da98400c9b858419623527d3da159f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8430f1914da98400c9b858419623527d3da159f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a8430f1914da98400c9b858419623527d3da159f", "patch": "@@ -1,3 +1,17 @@\n+2016-04-18  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* doc/install.texi (Specific, i?86-*-solaris2.10): Update gas and\n+\tgld requirements.\n+\t(Specific, *-*-solaris2*): Update Solaris 11 bundled gcc\n+\tversions.\n+\tMention Solaris 11 packaging changes.\n+\tUpdate gas and gld requirements.\n+\tRemove reference to pre-Solaris 10 bug.\n+\t(Specific, sparc-sun-solaris2*): Remove reference to pre-Solaris 10\n+\tsystems and bugs.\n+\t(Specific, sparc64-*-solaris2*): Remove reference to bootstrap\n+\twith cc.\n+\n 2016-04-17  Jan Hubicka  <jh@suse.cz>\n \n \t* tree-ssa-loop-ivopts.c (avg_loop_niter): Use also"}, {"sha": "4268036ca51551677615c62d55d245ca38b0517b", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 41, "deletions": 78, "changes": 119, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8430f1914da98400c9b858419623527d3da159f/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8430f1914da98400c9b858419623527d3da159f/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=a8430f1914da98400c9b858419623527d3da159f", "patch": "@@ -3924,19 +3924,24 @@ with GCC 4.7, there is also a 64-bit @samp{amd64-*-solaris2.1[0-9]*} or\n @samp{x86_64-*-solaris2.1[0-9]*} configuration that corresponds to\n @samp{sparcv9-sun-solaris2*}.\n \n-It is recommended that you configure GCC to use the GNU assembler, in\n-@file{/usr/sfw/bin/gas}.  The versions included in Solaris 10, from GNU\n-binutils 2.15, and Solaris 11, from GNU binutils 2.19, work fine,\n-although the current version, from GNU binutils\n-2.22, is known to work, too.  Recent versions of the Sun assembler in\n-@file{/usr/ccs/bin/as} work almost as well, though.\n+It is recommended that you configure GCC to use the GNU assembler.  The\n+versions included in Solaris 10, from GNU binutils 2.15 (in\n+@file{/usr/sfw/bin/gas}), and Solaris 11, from GNU binutils 2.19 or\n+newer (also available as @file{/usr/bin/gas} and\n+@file{/usr/gnu/bin/as}), work fine.  Please note that the current\n+version, from GNU binutils 2.26, only works on Solaris 12 when using the\n+Solaris linker.  On Solaris 10 and 11, you either have to wait for GNU\n+binutils 2.26.1 or newer, or stay with GNU binutils 2.25.1.  Recent\n+versions of the Solaris assembler in @file{/usr/ccs/bin/as} work almost\n+as well, though.\n @c FIXME: as patch requirements?\n \n-For linking, the Sun linker, is preferred.  If you want to use the GNU\n-linker instead, which is available in @file{/usr/sfw/bin/gld}, note that\n-due to a packaging bug the version in Solaris 10, from GNU binutils\n-2.15, cannot be used, while the version in Solaris 11, from GNU binutils\n-2.19, works, as does the latest version, from GNU binutils 2.22.\n+For linking, the Solaris linker, is preferred.  If you want to use the GNU\n+linker instead, note that due to a packaging bug the version in Solaris\n+10, from GNU binutils 2.15 (in @file{/usr/sfw/bin/gld}), cannot be used,\n+while the version in Solaris 11, from GNU binutils 2.19 or newer (also\n+in @file{/usr/gnu/bin/ld} and @file{/usr/bin/gld}), works, as does the\n+latest version, from GNU binutils 2.26.\n \n To use GNU @command{as}, configure with the options\n @option{--with-gnu-as --with-as=@//usr/@/sfw/@/bin/@/gas}.  It may be necessary\n@@ -4505,7 +4510,8 @@ in GCC 4.6.\n Sun does not ship a C compiler with Solaris 2 before Solaris 10, though\n you can download the Sun Studio compilers for free.  In Solaris 10 and\n 11, GCC 3.4.3 is available as @command{/usr/sfw/bin/gcc}.  Solaris 11\n-also provides GCC 4.5.2 as @command{/usr/gcc/4.5/bin/gcc}.  Alternatively,\n+also provides GCC 4.5.2, 4.7.3, and 4.8.2 as\n+@command{/usr/gcc/4.5/bin/gcc} or similar.  Alternatively,\n you can install a pre-built GCC to bootstrap and install GCC.  See the\n @uref{binaries.html,,binaries page} for details.\n \n@@ -4523,18 +4529,22 @@ and proceed as described in @uref{configure.html,,the configure instructions}.\n In addition we strongly recommend specifying an absolute path to invoke\n @command{@var{srcdir}/configure}.\n \n-Solaris 2 comes with a number of optional OS packages.  Some of these\n+Solaris 10 comes with a number of optional OS packages.  Some of these\n are needed to use GCC fully, namely @code{SUNWarc},\n @code{SUNWbtool}, @code{SUNWesu}, @code{SUNWhea}, @code{SUNWlibm},\n @code{SUNWsprot}, and @code{SUNWtoo}.  If you did not install all\n-optional packages when installing Solaris 2, you will need to verify that\n+optional packages when installing Solaris 10, you will need to verify that\n the packages that GCC needs are installed.\n-\n To check whether an optional package is installed, use\n the @command{pkginfo} command.  To add an optional package, use the\n-@command{pkgadd} command.  For further details, see the Solaris 2\n+@command{pkgadd} command.  For further details, see the Solaris 10\n documentation.\n \n+Starting with Solaris 11, the package management has changed, so you\n+need to check for @code{system/header}, @code{system/linker}, and\n+@code{developer/assembler} packages.  Checking for and installing\n+packages is done with the @command{pkg} command now.\n+\n Trying to use the linker and other tools in\n @file{/usr/ucb} to install GCC has been observed to cause trouble.\n For example, the linker may hang indefinitely.  The fix is to remove\n@@ -4544,35 +4554,33 @@ The build process works more smoothly with the legacy Sun tools so, if you\n have @file{/usr/xpg4/bin} in your @env{PATH}, we recommend that you place\n @file{/usr/bin} before @file{/usr/xpg4/bin} for the duration of the build.\n \n-We recommend the use of the Sun assembler or the GNU assembler, in\n-conjunction with the Sun linker.  The GNU @command{as}\n-versions included in Solaris 10, from GNU binutils 2.15, and Solaris 11,\n-from GNU binutils 2.19, are known to work.  They can be found in\n-@file{/usr/sfw/bin/gas}.  Current versions of GNU binutils (2.22)\n-are known to work as well.  Note that your mileage may vary\n-if you use a combination of the GNU tools and the Sun tools: while the\n+We recommend the use of the Solaris assembler or the GNU assembler, in\n+conjunction with the Solaris linker.  The GNU @command{as}\n+versions included in Solaris 10, from GNU binutils 2.15 (in\n+@file{/usr/sfw/bin/gas}), and Solaris 11,\n+from GNU binutils 2.19 or newer (also in @file{/usr/bin/gas} and\n+@file{/usr/gnu/bin/as}), are known to work.\n+Current versions of GNU binutils (2.26)\n+are known to work as well, with the caveat mentioned in\n+@uref{#ix86-x-solaris210,,i?86-*-solaris2.10} .  Note that your mileage may vary\n+if you use a combination of the GNU tools and the Solaris tools: while the\n combination GNU @command{as} + Sun @command{ld} should reasonably work,\n the reverse combination Sun @command{as} + GNU @command{ld} may fail to\n build or cause memory corruption at runtime in some cases for C++ programs.\n @c FIXME: still?\n GNU @command{ld} usually works as well, although the version included in\n Solaris 10 cannot be used due to several bugs.  Again, the current\n-version (2.22) is known to work, but generally lacks platform specific\n-features, so better stay with Sun @command{ld}.  To use the LTO linker\n+version (2.26) is known to work, but generally lacks platform specific\n+features, so better stay with Solaris @command{ld}.  To use the LTO linker\n plugin (@option{-fuse-linker-plugin}) with GNU @command{ld}, GNU\n binutils @emph{must} be configured with @option{--enable-largefile}.\n \n-To enable symbol versioning in @samp{libstdc++} with Sun @command{ld},\n+To enable symbol versioning in @samp{libstdc++} with Solaris @command{ld},\n you need to have any version of GNU @command{c++filt}, which is part of\n GNU binutils.  @samp{libstdc++} symbol versioning will be disabled if no\n-appropriate version is found.  Sun @command{c++filt} from the Sun Studio\n+appropriate version is found.  Solaris @command{c++filt} from the Solaris Studio\n compilers does @emph{not} work.\n \n-Sun bug 4296832 turns up when compiling X11 headers with GCC 2.95 or\n-newer: @command{g++} will complain that types are missing.  These headers\n-assume that omitting the type means @code{int}; this assumption worked for\n-C90 but is wrong for C++, and is now wrong for C99 also.\n-\n Sun bug 4927647 sometimes causes random spurious testsuite failures\n related to missing diagnostic output.  This bug doesn't affect GCC\n itself, rather it is a kernel bug triggered by the @command{expect}\n@@ -4613,40 +4621,6 @@ should try the @option{-mtune=ultrasparc} option instead, which produces\n code that, unlike full 64-bit code, can still run on non-UltraSPARC\n machines.\n \n-When configuring on a Solaris 7 or later system that is running a kernel\n-that supports only 32-bit binaries, one must configure with\n-@option{--disable-multilib}, since we will not be able to build the\n-64-bit target libraries.\n-\n-GCC 3.3 and GCC 3.4 trigger code generation bugs in earlier versions of\n-the GNU compiler (especially GCC 3.0.x versions), which lead to the\n-miscompilation of the stage1 compiler and the subsequent failure of the\n-bootstrap process.  A workaround is to use GCC 3.2.3 as an intermediary\n-stage, i.e.@: to bootstrap that compiler with the base compiler and then\n-use it to bootstrap the final compiler.\n-\n-GCC 3.4 triggers a code generation bug in versions 5.4 (Sun ONE Studio 7)\n-and 5.5 (Sun ONE Studio 8) of the Sun compiler, which causes a bootstrap\n-failure in form of a miscompilation of the stage1 compiler by the Sun\n-compiler.  This is Sun bug 4974440.  This is fixed with patch 112760-07.\n-\n-GCC 3.4 changed the default debugging format from Stabs to DWARF-2 for\n-32-bit code on Solaris 7 and later.  If you use the Sun assembler, this\n-change apparently runs afoul of Sun bug 4910101 (which is referenced as\n-an x86-only problem by Sun, probably because they do not use DWARF-2).\n-A symptom of the problem is that you cannot compile C++ programs like\n-@command{groff} 1.19.1 without getting messages similar to the following:\n-\n-@smallexample\n-ld: warning: relocation error: R_SPARC_UA32: @dots{}\n-  external symbolic relocation against non-allocatable section\n-  .debug_info cannot be processed at runtime: relocation ignored.\n-@end smallexample\n-\n-@noindent\n-To work around this problem, compile with @option{-gstabs+} instead of\n-plain @option{-g}.\n-\n When configuring the GNU Multiple Precision Library (GMP), the MPFR\n library or the MPC library on a Solaris 7 or later system, the canonical\n target triplet must be specified as the @command{build} parameter on the\n@@ -4698,17 +4672,6 @@ on a Solaris 9 system:\n % ./configure --build=sparc64-sun-solaris2.9 --prefix=xxx\n @end smallexample\n \n-The following compiler flags must be specified in the configure\n-step in order to bootstrap this target with the Sun compiler:\n-\n-@smallexample\n-% CC=\"cc -xarch=v9 -xildoff\" @var{srcdir}/configure [@var{options}] [@var{target}]\n-@end smallexample\n-\n-@noindent\n-@option{-xarch=v9} specifies the SPARC-V9 architecture to the Sun toolchain\n-and @option{-xildoff} turns off the incremental linker.\n-\n @html\n <hr />\n @end html\n@@ -4811,7 +4774,7 @@ processor (@samp{amd64-*-*} is an alias for @samp{x86_64-*-*}) on\n Solaris 10 or later.  Unlike other systems, without special options a\n bi-arch compiler is built which generates 32-bit code by default, but\n can generate 64-bit x86-64 code with the @option{-m64} switch.  Since\n-GCC 4.7, there is also configuration that defaults to 64-bit code, but\n+GCC 4.7, there is also a configuration that defaults to 64-bit code, but\n can generate 32-bit code with @option{-m32}.  To configure and build\n this way, you have to provide all support libraries like @file{libgmp}\n as 64-bit code, configure with @option{--target=x86_64-pc-solaris2.1x}"}]}