{"sha": "b602712b3ea2a0729a2eda61bd9ee795aba6138f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjYwMjcxMmIzZWEyYTA3MjlhMmVkYTYxYmQ5ZWU3OTVhYmE2MTM4Zg==", "commit": {"author": {"name": "Andre Vieira", "email": "andre.simoesdiasvieira@arm.com", "date": "2019-11-08T11:30:50Z"}, "committer": {"name": "Andre Vieira", "email": "avieira@gcc.gnu.org", "date": "2019-11-08T11:30:50Z"}, "message": "[vect] Disable vectorization of epilogues for loops with SIMDUID set\n\ngcc/ChangeLog:\n2019-11-08  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\t* tree-vect-loop.c (vect_analyze_loop): Disable epilogue vectorization\n\tfor loops with SIMDUID set.  Enable epilogue vectorization for loops\n\twith SIMDLEN set after finding a main loop with a VF that matches it.\n\nFrom-SVN: r277964", "tree": {"sha": "cc38f47e613b2e2a337c0f9dbd2d9affbec30532", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc38f47e613b2e2a337c0f9dbd2d9affbec30532"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b602712b3ea2a0729a2eda61bd9ee795aba6138f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b602712b3ea2a0729a2eda61bd9ee795aba6138f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b602712b3ea2a0729a2eda61bd9ee795aba6138f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b602712b3ea2a0729a2eda61bd9ee795aba6138f/comments", "author": {"login": "avieira-arm", "id": 68072104, "node_id": "MDQ6VXNlcjY4MDcyMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avieira-arm", "html_url": "https://github.com/avieira-arm", "followers_url": "https://api.github.com/users/avieira-arm/followers", "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}", "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions", "organizations_url": "https://api.github.com/users/avieira-arm/orgs", "repos_url": "https://api.github.com/users/avieira-arm/repos", "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/avieira-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5384a8027098be99e8d22613583a4f235d515a78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5384a8027098be99e8d22613583a4f235d515a78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5384a8027098be99e8d22613583a4f235d515a78"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "c6c7daa2987c0553f9a55c70bdb1a694f95b1653", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b602712b3ea2a0729a2eda61bd9ee795aba6138f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b602712b3ea2a0729a2eda61bd9ee795aba6138f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b602712b3ea2a0729a2eda61bd9ee795aba6138f", "patch": "@@ -1,3 +1,9 @@\n+2019-11-08  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n+\n+\t* tree-vect-loop.c (vect_analyze_loop): Disable epilogue vectorization\n+\tfor loops with SIMDUID set.  Enable epilogue vectorization for loops\n+\twith SIMDLEN set after finding a main loop with a VF that matches it.\n+\n 2019-11-08  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/92038"}, {"sha": "f25260c35b6e91b0f66d0cb8f24f1dc0c790948d", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b602712b3ea2a0729a2eda61bd9ee795aba6138f/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b602712b3ea2a0729a2eda61bd9ee795aba6138f/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=b602712b3ea2a0729a2eda61bd9ee795aba6138f", "patch": "@@ -2455,11 +2455,15 @@ vect_analyze_loop (class loop *loop, vec_info_shared *shared)\n \t    delete loop_vinfo;\n \n \t  /* Only vectorize epilogues if PARAM_VECT_EPILOGUES_NOMASK is\n-\t     enabled, this is not a simd loop and it is the innermost loop.  */\n-\t  vect_epilogues = (!loop->simdlen\n+\t     enabled, SIMDUID is not set, it is the innermost loop and we have\n+\t     either already found the loop's SIMDLEN or there was no SIMDLEN to\n+\t     begin with.\n+\t     TODO: Enable epilogue vectorization for loops with SIMDUID set.  */\n+\t  vect_epilogues = (!simdlen\n \t\t\t    && loop->inner == NULL\n \t\t\t    && PARAM_VALUE (PARAM_VECT_EPILOGUES_NOMASK)\n \t\t\t    && LOOP_VINFO_PEELING_FOR_NITER (first_loop_vinfo)\n+\t\t\t    && !loop->simduid\n \t\t\t    /* For now only allow one epilogue loop.  */\n \t\t\t    && first_loop_vinfo->epilogue_vinfos.is_empty ());\n "}]}