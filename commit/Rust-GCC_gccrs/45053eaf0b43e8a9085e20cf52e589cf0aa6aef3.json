{"sha": "45053eaf0b43e8a9085e20cf52e589cf0aa6aef3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDUwNTNlYWYwYjQzZThhOTA4NWUyMGNmNTJlNTg5Y2YwYWE2YWVmMw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-05-05T16:38:25Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-05-05T16:38:25Z"}, "message": "except.c (remove_fixup_regions): Adjust REG_EH_REGION notes to the parent of the fixup region.\n\n        * except.c (remove_fixup_regions): Adjust REG_EH_REGION notes\n        to the parent of the fixup region.\n\nFrom-SVN: r41867", "tree": {"sha": "61cc8b37ca09150a483556195e12fa6db9cbc06e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61cc8b37ca09150a483556195e12fa6db9cbc06e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3/comments", "author": null, "committer": null, "parents": [{"sha": "2a9071bb2f453b5d36ea3149c36ac27df57629fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a9071bb2f453b5d36ea3149c36ac27df57629fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a9071bb2f453b5d36ea3149c36ac27df57629fd"}], "stats": {"total": 30, "additions": 27, "deletions": 3}, "files": [{"sha": "3b9b4a60eb03a5668f71455e5a2a434778938c86", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=45053eaf0b43e8a9085e20cf52e589cf0aa6aef3", "patch": "@@ -1,4 +1,9 @@\n-2001-05-05  Jakub Jelinek  <jakub@redhat.com\n+2001-05-05  Richard Henderson  <rth@redhat.com>\n+\n+\t* except.c (remove_fixup_regions): Adjust REG_EH_REGION notes\n+\tto the parent of the fixup region.\n+\n+2001-05-05  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.c (cpp_options): Define __NO_INLINE__ unless we are honoring\n \t\"inline\" keyword."}, {"sha": "b21769c28f97418d5eb681e8b192cf2b0e43f509", "filename": "gcc/except.c", "status": "modified", "additions": 21, "deletions": 2, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/45053eaf0b43e8a9085e20cf52e589cf0aa6aef3/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=45053eaf0b43e8a9085e20cf52e589cf0aa6aef3", "patch": "@@ -1101,11 +1101,30 @@ static void\n remove_fixup_regions ()\n {\n   int i;\n+  rtx insn, note;\n+  struct eh_region *fixup;\n \n+  /* Walk the insn chain and adjust the REG_EH_REGION numbers\n+     for instructions referencing fixup regions.  This is only\n+     strictly necessary for fixup regions with no parent, but\n+     doesn't hurt to do it for all regions.  */\n+  for (insn = get_insns(); insn ; insn = NEXT_INSN (insn))\n+    if (INSN_P (insn)\n+\t&& (note = find_reg_note (insn, REG_EH_REGION, NULL))\n+\t&& INTVAL (XEXP (note, 0)) > 0\n+\t&& (fixup = cfun->eh->region_array[INTVAL (XEXP (note, 0))])\n+\t&& fixup->type == ERT_FIXUP)\n+      {\n+\tif (fixup->u.fixup.real_region)\n+\t  XEXP (note, 1) = GEN_INT (fixup->u.fixup.real_region->region_number);\n+\telse\n+\t  remove_note (insn, note);\n+      }\n+\n+  /* Remove the fixup regions from the tree.  */\n   for (i = cfun->eh->last_region_number; i > 0; --i)\n     {\n-      struct eh_region *fixup = cfun->eh->region_array[i];\n-\n+      fixup = cfun->eh->region_array[i];\n       if (! fixup)\n \tcontinue;\n "}]}