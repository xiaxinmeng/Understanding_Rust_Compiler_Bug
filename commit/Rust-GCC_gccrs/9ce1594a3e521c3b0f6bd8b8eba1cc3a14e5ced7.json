{"sha": "9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWNlMTU5NGEzZTUyMWMzYjBmNmJkOGI4ZWJhMWNjM2ExNGU1Y2VkNw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-05-23T21:06:56Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-05-23T21:06:56Z"}, "message": "re PR c++/15025 (accepts redeclaration of template as non-template)\n\n\tPR c++/15025\n\t* decl.c (xref_tag): Issue errors about redeclaring template\n\tclasses as non-template classes.\n\n\tPR c++/15025\n\t* g++.dg/template/redecl1.C: New test.\n\nFrom-SVN: r82172", "tree": {"sha": "12483800056c2eb68f15aaf63464308c42054407", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/12483800056c2eb68f15aaf63464308c42054407"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/comments", "author": null, "committer": null, "parents": [{"sha": "f746161e4ffa1427f1b2c7b08fafaad3046a9222", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f746161e4ffa1427f1b2c7b08fafaad3046a9222", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f746161e4ffa1427f1b2c7b08fafaad3046a9222"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "7fd46ac7108b4ec0d2e45b446f3ca4fd1fc19c1c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "patch": "@@ -1,3 +1,9 @@\n+2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/15025\n+\t* decl.c (xref_tag): Issue errors about redeclaring template\n+\tclasses as non-template classes.\n+\n 2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/14821"}, {"sha": "b666dd7105d3f49f0b538372e88864ac28acec41", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "patch": "@@ -9407,6 +9407,13 @@ xref_tag (enum tag_types tag_code, tree name,\n     {\n       if (!globalize && processing_template_decl && IS_AGGR_TYPE (t))\n \tredeclare_class_template (t, current_template_parms);\n+      else if (!processing_template_decl \n+\t       && CLASS_TYPE_P (t)\n+\t       && CLASSTYPE_IS_TEMPLATE (t))\n+\t{\n+\t  error (\"redeclaration of `%T' as a non-template\", t);\n+\t  t = error_mark_node;\n+\t}\n     }\n \n   POP_TIMEVAR_AND_RETURN (TV_NAME_LOOKUP, t);"}, {"sha": "32d2f1717e0b45e31c6027bb98d80a6966921be9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "patch": "@@ -1,3 +1,8 @@\n+2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\tPR c++/15025\n+\t* g++.dg/template/redecl1.C: New test.\n+\n 2004-05-23  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/14821"}, {"sha": "1bbf20ec766c254f77e78d194db88f708cd28a6c", "filename": "gcc/testsuite/g++.dg/template/redecl1.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fredecl1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fredecl1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fredecl1.C?ref=9ce1594a3e521c3b0f6bd8b8eba1cc3a14e5ced7", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/15025\n+\n+template <int> struct X; \n+struct X {}; // { dg-error \"\" }"}]}