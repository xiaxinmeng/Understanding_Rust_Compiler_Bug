{"sha": "f3392d53501de22f9fbc9e19ec738bfd8106ce1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjMzOTJkNTM1MDFkZTIyZjlmYmM5ZTE5ZWM3MzhiZmQ4MTA2Y2UxYw==", "commit": {"author": {"name": "Ralf Wildenhues", "email": "Ralf.Wildenhues@gmx.de", "date": "2009-11-02T18:52:08Z"}, "committer": {"name": "Ralf Wildenhues", "email": "rwild@gcc.gnu.org", "date": "2009-11-02T18:52:08Z"}, "message": "Work with defaulted $prefix (NONE) in libjava.\n\nlibjava/:\n\tPR bootstrap/38867\n\t* configure.ac (expanded_prefix): New variable, set to the\n\tdefault prefix if none was passed on the command line.\n\t* configure: Regenerate.\n\nFrom-SVN: r153820", "tree": {"sha": "a3ff4a65da69ce5debef506bae875850070a3748", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3ff4a65da69ce5debef506bae875850070a3748"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f3392d53501de22f9fbc9e19ec738bfd8106ce1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3392d53501de22f9fbc9e19ec738bfd8106ce1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3392d53501de22f9fbc9e19ec738bfd8106ce1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3392d53501de22f9fbc9e19ec738bfd8106ce1c/comments", "author": null, "committer": null, "parents": [{"sha": "e150c4144c5852e54a38b6152d49d86d815223df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e150c4144c5852e54a38b6152d49d86d815223df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e150c4144c5852e54a38b6152d49d86d815223df"}], "stats": {"total": 95, "additions": 56, "deletions": 39}, "files": [{"sha": "d7c6d36a09daa0a5502614b998118648e30add26", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3392d53501de22f9fbc9e19ec738bfd8106ce1c/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3392d53501de22f9fbc9e19ec738bfd8106ce1c/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=f3392d53501de22f9fbc9e19ec738bfd8106ce1c", "patch": "@@ -1,3 +1,10 @@\n+2009-11-02  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n+\n+\tPR bootstrap/38867\n+\t* configure.ac (expanded_prefix): New variable, set to the\n+\tdefault prefix if none was passed on the command line.\n+\t* configure: Regenerate.\n+\n 2009-10-22  Matthias Klose  <doko@ubuntu.com>\n \n \t* configure.ac: Rename --enable-plugin to --enable-browser-plugin,"}, {"sha": "5eabcf573b34e5f3b86eff827e108c22ed0de853", "filename": "libjava/configure", "status": "modified", "additions": 39, "deletions": 34, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3392d53501de22f9fbc9e19ec738bfd8106ce1c/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3392d53501de22f9fbc9e19ec738bfd8106ce1c/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=f3392d53501de22f9fbc9e19ec738bfd8106ce1c", "patch": "@@ -6705,9 +6705,14 @@ cat >>confdefs.h <<_ACEOF\n _ACEOF\n \n \n+expanded_prefix=$prefix\n+if test \"X$prefix\" = XNONE; then\n+  expanded_prefix=${ac_default_prefix}\n+fi\n+\n \n cat >>confdefs.h <<_ACEOF\n-#define LIBGCJ_PREFIX \"$prefix\"\n+#define LIBGCJ_PREFIX \"$expanded_prefix\"\n _ACEOF\n \n \n@@ -7506,13 +7511,13 @@ if test \"${lt_cv_nm_interface+set}\" = set; then :\n else\n   lt_cv_nm_interface=\"BSD nm\"\n   echo \"int some_variable = 0;\" > conftest.$ac_ext\n-  (eval echo \"\\\"\\$as_me:7509: $ac_compile\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:7514: $ac_compile\\\"\" >&5)\n   (eval \"$ac_compile\" 2>conftest.err)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:7512: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:7517: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n   (eval \"$NM \\\"conftest.$ac_objext\\\"\" 2>conftest.err > conftest.out)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:7515: output\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:7520: output\\\"\" >&5)\n   cat conftest.out >&5\n   if $GREP 'External.*some_variable' conftest.out > /dev/null; then\n     lt_cv_nm_interface=\"MS dumpbin\"\n@@ -8707,7 +8712,7 @@ ia64-*-hpux*)\n   ;;\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 8710 \"configure\"' > conftest.$ac_ext\n+  echo '#line 8715 \"configure\"' > conftest.$ac_ext\n   if { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_compile\\\"\"; } >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -10641,11 +10646,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:10644: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:10649: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:10648: \\$? = $ac_status\" >&5\n+   echo \"$as_me:10653: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -10980,11 +10985,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:10983: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:10988: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:10987: \\$? = $ac_status\" >&5\n+   echo \"$as_me:10992: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -11085,11 +11090,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:11088: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:11093: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:11092: \\$? = $ac_status\" >&5\n+   echo \"$as_me:11097: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -11140,11 +11145,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:11143: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:11148: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:11147: \\$? = $ac_status\" >&5\n+   echo \"$as_me:11152: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -13549,7 +13554,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13552 \"configure\"\n+#line 13557 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13645,7 +13650,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13648 \"configure\"\n+#line 13653 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -15607,11 +15612,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:15610: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:15615: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:15614: \\$? = $ac_status\" >&5\n+   echo \"$as_me:15619: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -15706,11 +15711,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:15709: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:15714: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:15713: \\$? = $ac_status\" >&5\n+   echo \"$as_me:15718: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -15758,11 +15763,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:15761: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:15766: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:15765: \\$? = $ac_status\" >&5\n+   echo \"$as_me:15770: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -17174,11 +17179,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:17177: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:17182: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:17181: \\$? = $ac_status\" >&5\n+   echo \"$as_me:17186: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -17507,11 +17512,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:17510: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:17515: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:17514: \\$? = $ac_status\" >&5\n+   echo \"$as_me:17519: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -17606,11 +17611,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:17609: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:17614: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:17613: \\$? = $ac_status\" >&5\n+   echo \"$as_me:17618: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -17658,11 +17663,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:17661: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:17666: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:17665: \\$? = $ac_status\" >&5\n+   echo \"$as_me:17670: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -19260,7 +19265,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then :\n   enableval=$enable_sjlj_exceptions; :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 19263 \"configure\"\n+#line 19268 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -22935,7 +22940,7 @@ if test ! -f gnu/classpath/Configuration.java; then\n   test -d gnu || mkdir gnu\n   test -d gnu/classpath || mkdir gnu/classpath\n   # Note that it is not crucial that all the values here be correct.\n-  sed -e \"s,@prefix@,$prefix,\" \\\n+  sed -e \"s,@prefix@,$expanded_prefix,\" \\\n       -e \"s,@VERSION@,$VERSION,\" \\\n       -e \"s,@LIBDEBUG@,false,\" \\\n       -e \"s,@INIT_LOAD_LIBRARY@,false,\" \\\n@@ -24267,10 +24272,10 @@ then\n   # Needed for installing Python modules during make install.\n   python_mod_dir=\"\\${prefix}/share/python\"\n   # Needed for substituting into aot-compile*\n-  python_mod_dir_expanded=\"${prefix}/share/python\"\n+  python_mod_dir_expanded=\"${expanded_prefix}/share/python\"\n else\n   python_mod_dir=\"\\${prefix}${with_python_dir}\"\n-  python_mod_dir_expanded=\"${prefix}${with_python_dir}\"\n+  python_mod_dir_expanded=\"${expanded_prefix}${with_python_dir}\"\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: Python modules dir: ${python_mod_dir_expanded}\" >&5\n $as_echo \"Python modules dir: ${python_mod_dir_expanded}\" >&6; };\n@@ -24512,7 +24517,7 @@ $as_echo \"arch directory: ${host_cpu}\" >&6; }\n   LIBDIR=$libdir\n   if test \"x${exec_prefix}\" = \"xNONE\"\n   then\n-      lib_exec_prefix=$prefix\n+      lib_exec_prefix=$expanded_prefix\n   else\n       lib_exec_prefix=$exec_prefix\n   fi"}, {"sha": "b2037d2815290ac95a4d75157724436dcddb00ad", "filename": "libjava/configure.ac", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3392d53501de22f9fbc9e19ec738bfd8106ce1c/libjava%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3392d53501de22f9fbc9e19ec738bfd8106ce1c/libjava%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.ac?ref=f3392d53501de22f9fbc9e19ec738bfd8106ce1c", "patch": "@@ -366,7 +366,12 @@ AM_CONDITIONAL(X_AWT, test \"$use_x_awt\" = yes)\n \n AC_DEFINE_UNQUOTED(AWT_TOOLKIT, \"$TOOLKIT\", [Name of default AWT toolkit])\n \n-AC_DEFINE_UNQUOTED(LIBGCJ_PREFIX, \"$prefix\", [Installation prefix])\n+expanded_prefix=$prefix\n+if test \"X$prefix\" = XNONE; then\n+  expanded_prefix=${ac_default_prefix}\n+fi\n+\n+AC_DEFINE_UNQUOTED(LIBGCJ_PREFIX, \"$expanded_prefix\", [Installation prefix])\n \n # Create standard.omit based on decisions we just made.\n cp $srcdir/standard.omit.in standard.omit\n@@ -1437,7 +1442,7 @@ if test ! -f gnu/classpath/Configuration.java; then\n   test -d gnu || mkdir gnu\n   test -d gnu/classpath || mkdir gnu/classpath\n   # Note that it is not crucial that all the values here be correct.\n-  sed -e \"s,@prefix@,$prefix,\" \\\n+  sed -e \"s,@prefix@,$expanded_prefix,\" \\\n       -e \"s,@VERSION@,$VERSION,\" \\\n       -e \"s,@LIBDEBUG@,false,\" \\\n       -e \"s,@INIT_LOAD_LIBRARY@,false,\" \\\n@@ -1775,10 +1780,10 @@ then\n   # Needed for installing Python modules during make install.\n   python_mod_dir=\"\\${prefix}/share/python\"\n   # Needed for substituting into aot-compile*\n-  python_mod_dir_expanded=\"${prefix}/share/python\"\n+  python_mod_dir_expanded=\"${expanded_prefix}/share/python\"\n else\n   python_mod_dir=\"\\${prefix}${with_python_dir}\"\n-  python_mod_dir_expanded=\"${prefix}${with_python_dir}\"\n+  python_mod_dir_expanded=\"${expanded_prefix}${with_python_dir}\"\n fi\n AC_MSG_RESULT(Python modules dir: ${python_mod_dir_expanded});\n AC_SUBST(python_mod_dir)\n@@ -1956,7 +1961,7 @@ then\n   LIBDIR=$libdir\n   if test \"x${exec_prefix}\" = \"xNONE\"\n   then\n-      lib_exec_prefix=$prefix\n+      lib_exec_prefix=$expanded_prefix\n   else\n       lib_exec_prefix=$exec_prefix\n   fi"}]}