{"sha": "ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQwZTUxMmFmMGRiYjBlNjRiMTBmZWM3NTlkMGUwOGRiYjc3ZGFhYg==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2005-04-04T14:31:07Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2005-04-04T14:31:07Z"}, "message": "2064.md (\"z_mul\", \"z_inf\"): New insn reservations.\n\n2005-04-04  Andreas Krebbel  <krebbel1@de.ibm.com>\n            Adrian Straetling  <straetling@de.ibm.com>\n\n\t* config/s390/2064.md (\"z_mul\", \"z_inf\"): New insn reservations.\n\t* config/s390/2084.md (\"x_mul_hi\", \"x_mul_sidi\", \"x_div\"): Likewise.\n\t* config/s390/s390.md (\"imulhi\", \"imulsi\", \"imuldi\"): Added to \"type\"\n\tattribute.\n\t(\"imul\"): Removed from \"type\" attribute.\n\t(\"*muldi3_sign\", \"muldi3\"): Changed type to imuldi.\n\t(\"mulsi3/1\", \"mulsi3/3\", \"mulsi/4\", \"mulsidi3\", \"umulsidi3\"):\n\tChanged type to imulsi.\n\t(\"*mulsi3_sign\", \"mulsi3/2\"): Changed type to imulhi.\n\nCo-Authored-By: Adrian Straetling <straetling@de.ibm.com>\n\nFrom-SVN: r97545", "tree": {"sha": "99e151040fbe1abd111234390a210261f1e12f7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99e151040fbe1abd111234390a210261f1e12f7f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/comments", "author": null, "committer": null, "parents": [{"sha": "78fb803804d8a9997ac0a6e7b6f76cbe12803eeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78fb803804d8a9997ac0a6e7b6f76cbe12803eeb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78fb803804d8a9997ac0a6e7b6f76cbe12803eeb"}], "stats": {"total": 55, "additions": 47, "deletions": 8}, "files": [{"sha": "fe1530a1eefb6d4749f448b926efeaecb587ae38", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "patch": "@@ -1,3 +1,16 @@\n+2005-04-04  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\t    Adrian Straetling  <straetling@de.ibm.com>\n+\n+\t* config/s390/2064.md (\"z_mul\", \"z_inf\"): New insn reservations.\n+\t* config/s390/2084.md (\"x_mul_hi\", \"x_mul_sidi\", \"x_div\"): Likewise.\n+\t* config/s390/s390.md (\"imulhi\", \"imulsi\", \"imuldi\"): Added to \"type\"\n+\tattribute.\n+\t(\"imul\"): Removed from \"type\" attribute.\n+\t(\"*muldi3_sign\", \"muldi3\"): Changed type to imuldi.\n+\t(\"mulsi3/1\", \"mulsi3/3\", \"mulsi/4\", \"mulsidi3\", \"umulsidi3\"): \n+\tChanged type to imulsi.\n+\t(\"*mulsi3_sign\", \"mulsi3/2\"): Changed type to imulhi.\n+\n 2005-04-04  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mcore/mcore.h (target_flags, HARDLIT_BIT, ALIGN8_BIT, DIV_BIT)"}, {"sha": "7ce6e4fc00065797a40ee47c8005890b28c91fb4", "filename": "gcc/config/s390/2064.md", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2Fconfig%2Fs390%2F2064.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2Fconfig%2Fs390%2F2064.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2F2064.md?ref=ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "patch": "@@ -72,6 +72,16 @@\n        (eq_attr \"type\" \"jsr\"))\n   \"z_e1*5,z_wr\")\n \n+(define_insn_reservation \"z_mul\" 5\n+  (and (eq_attr \"cpu\" \"g5,g6,z900\")\n+       (eq_attr \"type\" \"imulsi,imulhi\"))\n+  \"z_e1*5,z_wr\")\n+\n+(define_insn_reservation \"z_inf\" 10\n+  (and (eq_attr \"cpu\" \"g5,g6,z900\")\n+       (eq_attr \"type\" \"idiv,imuldi\"))\n+  \"z_e1*10,z_wr\")\n+\n ;; For everything else we check the atype flag.\n \n (define_insn_reservation \"z_int\" 1"}, {"sha": "ddbd3fcede04b22b218af8e5f72e4441978f3558", "filename": "gcc/config/s390/2084.md", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2Fconfig%2Fs390%2F2084.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2Fconfig%2Fs390%2F2084.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2F2084.md?ref=ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "patch": "@@ -106,7 +106,22 @@\n (define_insn_reservation \"x_call\" 5 \n   (and (eq_attr \"cpu\" \"z990\")\n        (eq_attr \"type\" \"jsr\"))\n-  \"x-e1-np*5,x-wr-np\") \n+  \"x-e1-np*5,x-wr-np\")\n+ \n+(define_insn_reservation \"x_mul_hi\" 2\n+  (and (eq_attr \"cpu\" \"z990\")\n+       (eq_attr \"type\" \"imulhi\"))\n+  \"x-e1-np*2,x-wr-np\")\n+\n+(define_insn_reservation \"x_mul_sidi\" 4\n+  (and (eq_attr \"cpu\" \"z990\")\n+       (eq_attr \"type\" \"imulsi,imuldi\"))\n+  \"x-e1-np*4,x-wr-np\")\n+\n+(define_insn_reservation \"x_div\" 10\n+  (and (eq_attr \"cpu\" \"z990\")\n+       (eq_attr \"type\" \"idiv\"))\n+  \"x-e1-np*10,x-wr-np\")\n \n ;;\n ;; Multicycle insns"}, {"sha": "4c779c34180ff9404ae8af4bed396d95f7cc1aa2", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e512af0dbb0e64b10fec759d0e08dbb77daab/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=ed0e512af0dbb0e64b10fec759d0e08dbb77daab", "patch": "@@ -156,7 +156,8 @@\n ;; Instruction type attribute used for scheduling.\n \n (define_attr \"type\" \"none,integer,load,lr,la,larl,lm,stm,\n-\t             cs,vs,store,imul,idiv,\n+\t             cs,vs,store,idiv,\n+                     imulhi,imulsi,imuldi,\n \t\t     branch,jsr,fsimpd,fsimps,\n \t\t     floadd,floads,fstored, fstores,\n \t\t     fmuld,fmuls,fdivd,fdivs,\n@@ -4512,7 +4513,7 @@\n    msgfr\\t%0,%2\n    msgf\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RXY\")\n-   (set_attr \"type\"     \"imul\")])\n+   (set_attr \"type\"     \"imuldi\")])\n \n (define_insn \"muldi3\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=d,d,d\")\n@@ -4524,7 +4525,7 @@\n    mghi\\t%0,%h2\n    msg\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RI,RXY\")\n-   (set_attr \"type\"     \"imul\")])\n+   (set_attr \"type\"     \"imuldi\")])\n \n ;\n ; mulsi3 instruction pattern(s).\n@@ -4537,7 +4538,7 @@\n   \"\"\n   \"mh\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RX\")\n-   (set_attr \"type\"     \"imul\")])\n+   (set_attr \"type\"     \"imulhi\")])\n \n (define_insn \"mulsi3\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d,d,d,d\")\n@@ -4550,7 +4551,7 @@\n    ms\\t%0,%2\n    msy\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RI,RX,RXY\")\n-   (set_attr \"type\"     \"imul\")])\n+   (set_attr \"type\"     \"imulsi,imulhi,imulsi,imulsi\")])\n \n ;\n ; mulsidi3 instruction pattern(s).\n@@ -4567,7 +4568,7 @@\n    mr\\t%0,%2\n    m\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RR,RX\")\n-   (set_attr \"type\"     \"imul\")])\n+   (set_attr \"type\"     \"imulsi\")])\n \n ;\n ; umulsidi3 instruction pattern(s).\n@@ -4584,7 +4585,7 @@\n    mlr\\t%0,%2\n    ml\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RXY\")\n-   (set_attr \"type\"     \"imul\")])\n+   (set_attr \"type\"     \"imulsi\")])\n \n ;\n ; muldf3 instruction pattern(s)."}]}