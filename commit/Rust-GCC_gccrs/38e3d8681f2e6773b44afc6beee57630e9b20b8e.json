{"sha": "38e3d8681f2e6773b44afc6beee57630e9b20b8e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhlM2Q4NjgxZjJlNjc3M2I0NGFmYzZiZWVlNTc2MzBlOWIyMGI4ZQ==", "commit": {"author": {"name": "Roland McGrath", "email": "roland@redhat.com", "date": "2010-04-27T14:27:15Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2010-04-27T14:27:15Z"}, "message": "configure.ac (--enable-gold): Support both, both/gold and both/bfd to add gold to configdirs without removing ld.\n\n        * configure.ac (--enable-gold): Support both, both/gold and\n        both/bfd to add gold to configdirs without removing ld.\n        * configure: Regenerated.\n\n        * Makefile.def: Add install-gold dependency to install-ld.\n        * Makefile.in: Regenerated.\n\nCo-Authored-By: H.J. Lu <hongjiu.lu@intel.com>\n\nFrom-SVN: r158786", "tree": {"sha": "7c312b5d48c226436e16c893bc2b530ce97557c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c312b5d48c226436e16c893bc2b530ce97557c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38e3d8681f2e6773b44afc6beee57630e9b20b8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38e3d8681f2e6773b44afc6beee57630e9b20b8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38e3d8681f2e6773b44afc6beee57630e9b20b8e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38e3d8681f2e6773b44afc6beee57630e9b20b8e/comments", "author": null, "committer": null, "parents": [{"sha": "0134416b1d2f63a6982f46a8cd38aad831985f8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0134416b1d2f63a6982f46a8cd38aad831985f8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0134416b1d2f63a6982f46a8cd38aad831985f8c"}], "stats": {"total": 144, "additions": 98, "deletions": 46}, "files": [{"sha": "64b2de3354d14b6cc3f0bd9c80abaf0be9eb9015", "filename": "ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38e3d8681f2e6773b44afc6beee57630e9b20b8e/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38e3d8681f2e6773b44afc6beee57630e9b20b8e/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=38e3d8681f2e6773b44afc6beee57630e9b20b8e", "patch": "@@ -1,3 +1,13 @@\n+2010-04-27  Roland McGrath  <roland@redhat.com>\n+\t    H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* configure.ac (--enable-gold): Support both, both/gold and\n+\tboth/bfd to add gold to configdirs without removing ld.\n+\t* configure: Regenerated.\n+\n+\t* Makefile.def: Add install-gold dependency to install-ld.\n+\t* Makefile.in: Regenerated.\n+\n 2010-04-27  Dave Korn  <dave.korn.cygwin@gmail.com>\n \n \tPR lto/42776"}, {"sha": "325d845f3a5b40e5e9c433750fd4d124f73c7ac9", "filename": "Makefile.def", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38e3d8681f2e6773b44afc6beee57630e9b20b8e/Makefile.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38e3d8681f2e6773b44afc6beee57630e9b20b8e/Makefile.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.def?ref=38e3d8681f2e6773b44afc6beee57630e9b20b8e", "patch": "@@ -425,6 +425,7 @@ dependencies = { module=all-ld; on=all-build-bison; };\n dependencies = { module=all-ld; on=all-build-byacc; };\n dependencies = { module=all-ld; on=all-build-flex; };\n dependencies = { module=all-ld; on=all-intl; };\n+dependencies = { module=install-ld; on=install-gold; };\n dependencies = { module=configure-gold; on=configure-intl; };\n dependencies = { module=all-gold; on=all-libiberty; };\n dependencies = { module=all-gold; on=all-intl; };"}, {"sha": "d1d8b323ba363b0e98a95a6a9ec15df2d578f087", "filename": "Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38e3d8681f2e6773b44afc6beee57630e9b20b8e/Makefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38e3d8681f2e6773b44afc6beee57630e9b20b8e/Makefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Makefile.in?ref=38e3d8681f2e6773b44afc6beee57630e9b20b8e", "patch": "@@ -58231,6 +58231,7 @@ all-stage3-ld: maybe-all-stage3-intl\n all-stage4-ld: maybe-all-stage4-intl\n all-stageprofile-ld: maybe-all-stageprofile-intl\n all-stagefeedback-ld: maybe-all-stagefeedback-intl\n+install-ld: maybe-install-gold\n configure-gold: maybe-configure-intl\n \n configure-stage1-gold: maybe-configure-stage1-intl"}, {"sha": "90b754e55b0684960f87aaff836e6a22dccbead8", "filename": "configure", "status": "modified", "additions": 43, "deletions": 23, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38e3d8681f2e6773b44afc6beee57630e9b20b8e/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38e3d8681f2e6773b44afc6beee57630e9b20b8e/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=38e3d8681f2e6773b44afc6beee57630e9b20b8e", "patch": "@@ -1483,7 +1483,7 @@ Optional Features:\n   --disable-option-checking  ignore unrecognized --enable/--with options\n   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n-  --enable-gold           use gold instead of ld\n+  --enable-gold[=ARG]     build gold [ARG={both}[/{gold,ld}]]\n   --enable-libada         build libada directory\n   --enable-libssp         build libssp directory\n   --enable-build-with-cxx build with C++ compiler instead of C compiler\n@@ -2901,7 +2901,7 @@ host_libs=\"intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib l\n # know that we are building the simulator.\n # binutils, gas and ld appear in that order because it makes sense to run\n # \"make check\" in that particular order.\n-# If --enable-gold is used, \"gold\" will replace \"ld\".\n+# If --enable-gold is used, \"gold\" may replace \"ld\".\n host_tools=\"texinfo byacc flex bison binutils gas ld fixincludes gcc cgen sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils gettext zip fastjar gnattools\"\n \n # libgcj represents the runtime libraries only used by gcj.\n@@ -3069,6 +3069,11 @@ case ${with_newlib} in\n esac\n \n # Handle --enable-gold.\n+#   --enable-gold\t\tBuild only gold\n+#   --disable-gold [default]\tBuild only ld\n+#   --enable-gold=both\t\tBuild both gold and ld, ld is default\n+#   --enable-gold=both/ld\tSame\n+#   --enable-gold=both/gold\tBuild both gold and ld, gold is default, ld is renamed ld.bfd\n \n # Check whether --enable-gold was given.\n if test \"${enable_gold+set}\" = set; then :\n@@ -3077,32 +3082,47 @@ else\n   ENABLE_GOLD=no\n fi\n \n-if test \"${ENABLE_GOLD}\" = \"yes\"; then\n-  # Check for ELF target.\n-  is_elf=no\n-  case \"${target}\" in\n-    *-*-elf* | *-*-sysv4* | *-*-unixware* | *-*-eabi* | hppa*64*-*-hpux* \\\n-    | *-*-linux* | frv-*-uclinux* | *-*-irix5* | *-*-irix6* \\\n-    | *-*-netbsd* | *-*-openbsd* | *-*-freebsd* | *-*-solaris2* | *-*-nto*)\n+  case \"${ENABLE_GOLD}\" in\n+  yes|both|both/gold|both/ld)\n+    # Check for ELF target.\n+    is_elf=no\n+    case \"${target}\" in\n+      *-*-elf* | *-*-sysv4* | *-*-unixware* | *-*-eabi* | hppa*64*-*-hpux* \\\n+      | *-*-linux* | frv-*-uclinux* | *-*-irix5* | *-*-irix6* \\\n+      | *-*-netbsd* | *-*-openbsd* | *-*-freebsd* | *-*-solaris2* | *-*-nto*)\n+        case \"${target}\" in\n+          *-*-linux*aout* | *-*-linux*oldld*)\n+            ;;\n+          *)\n+            is_elf=yes\n+            ;;\n+        esac\n+    esac\n+\n+    if test \"$is_elf\" = \"yes\"; then\n+      # Check for target supported by gold.\n       case \"${target}\" in\n-        *-*-linux*aout* | *-*-linux*oldld*)\n-          ;;\n-        *)\n-          is_elf=yes\n+        i?86-*-* | x86_64-*-* | sparc*-*-* | powerpc*-*-* | arm*-*-*)\n+\t  case \"${ENABLE_GOLD}\" in\n+\t  both*)\n+            configdirs=\"$configdirs gold\"\n+\t    ;;\n+\t  *)\n+            configdirs=\"`echo \" ${configdirs} \" | sed -e 's/ ld / gold /'`\"\n+\t    ;;\n+\t  esac\n+\t  ENABLE_GOLD=yes\n           ;;\n       esac\n+    fi\n+    ;;\n+  no)\n+    ;;\n+  *)\n+    as_fn_error \"invalid --enable-gold argument\" \"$LINENO\" 5\n+    ;;\n   esac\n \n-  if test \"$is_elf\" = \"yes\"; then\n-    # Check for target supported by gold.\n-    case \"${target}\" in\n-      i?86-*-* | x86_64-*-* | sparc*-*-* | powerpc*-*-* | arm*-*-*)\n-        configdirs=\"`echo \" ${configdirs} \" | sed -e 's/ ld / gold /'`\"\n-        ;;\n-    esac\n-  fi\n-fi\n-\n # Configure extra directories which are host specific\n \n case \"${host}\" in"}, {"sha": "ba690241e35d25c75507b3b9f6eaa7f7fe67204e", "filename": "configure.ac", "status": "modified", "additions": 43, "deletions": 23, "changes": 66, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38e3d8681f2e6773b44afc6beee57630e9b20b8e/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38e3d8681f2e6773b44afc6beee57630e9b20b8e/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=38e3d8681f2e6773b44afc6beee57630e9b20b8e", "patch": "@@ -174,7 +174,7 @@ host_libs=\"intl mmalloc libiberty opcodes bfd readline tcl tk itcl libgui zlib l\n # know that we are building the simulator.\n # binutils, gas and ld appear in that order because it makes sense to run\n # \"make check\" in that particular order.\n-# If --enable-gold is used, \"gold\" will replace \"ld\".\n+# If --enable-gold is used, \"gold\" may replace \"ld\".\n host_tools=\"texinfo byacc flex bison binutils gas ld fixincludes gcc cgen sid sim gdb make patch prms send-pr gprof etc expect dejagnu ash bash bzip2 m4 autoconf automake libtool diff rcs fileutils shellutils time textutils wdiff find uudecode hello tar gzip indent recode release sed utils guile perl gawk findutils gettext zip fastjar gnattools\"\n \n # libgcj represents the runtime libraries only used by gcj.\n@@ -315,37 +315,57 @@ case ${with_newlib} in\n esac\n \n # Handle --enable-gold.\n+#   --enable-gold\t\tBuild only gold\n+#   --disable-gold [default]\tBuild only ld\n+#   --enable-gold=both\t\tBuild both gold and ld, ld is default\n+#   --enable-gold=both/ld\tSame\n+#   --enable-gold=both/gold\tBuild both gold and ld, gold is default, ld is renamed ld.bfd\n \n AC_ARG_ENABLE(gold,\n-[  --enable-gold           use gold instead of ld],\n+[[  --enable-gold[=ARG]     build gold [ARG={both}[/{gold,ld}]]]],\n ENABLE_GOLD=$enableval,\n ENABLE_GOLD=no)\n-if test \"${ENABLE_GOLD}\" = \"yes\"; then\n-  # Check for ELF target.\n-  is_elf=no\n-  case \"${target}\" in\n-    *-*-elf* | *-*-sysv4* | *-*-unixware* | *-*-eabi* | hppa*64*-*-hpux* \\\n-    | *-*-linux* | frv-*-uclinux* | *-*-irix5* | *-*-irix6* \\\n-    | *-*-netbsd* | *-*-openbsd* | *-*-freebsd* | *-*-solaris2* | *-*-nto*)\n+  case \"${ENABLE_GOLD}\" in\n+  yes|both|both/gold|both/ld)\n+    # Check for ELF target.\n+    is_elf=no\n+    case \"${target}\" in\n+      *-*-elf* | *-*-sysv4* | *-*-unixware* | *-*-eabi* | hppa*64*-*-hpux* \\\n+      | *-*-linux* | frv-*-uclinux* | *-*-irix5* | *-*-irix6* \\\n+      | *-*-netbsd* | *-*-openbsd* | *-*-freebsd* | *-*-solaris2* | *-*-nto*)\n+        case \"${target}\" in\n+          *-*-linux*aout* | *-*-linux*oldld*)\n+            ;;\n+          *)\n+            is_elf=yes\n+            ;;\n+        esac\n+    esac\n+\n+    if test \"$is_elf\" = \"yes\"; then\n+      # Check for target supported by gold.\n       case \"${target}\" in\n-        *-*-linux*aout* | *-*-linux*oldld*)\n-          ;;\n-        *)\n-          is_elf=yes\n+        i?86-*-* | x86_64-*-* | sparc*-*-* | powerpc*-*-* | arm*-*-*)\n+\t  case \"${ENABLE_GOLD}\" in \n+\t  both*)\n+            configdirs=\"$configdirs gold\"\n+\t    ;;\n+\t  *)\n+            configdirs=\"`echo \" ${configdirs} \" | sed -e 's/ ld / gold /'`\"\n+\t    ;;\n+\t  esac\n+\t  ENABLE_GOLD=yes\n           ;;\n       esac\n+    fi\n+    ;;\n+  no)\n+    ;;\n+  *)\n+    AC_MSG_ERROR([invalid --enable-gold argument])\n+    ;;\n   esac\n \n-  if test \"$is_elf\" = \"yes\"; then\n-    # Check for target supported by gold.\n-    case \"${target}\" in\n-      i?86-*-* | x86_64-*-* | sparc*-*-* | powerpc*-*-* | arm*-*-*)\n-        configdirs=\"`echo \" ${configdirs} \" | sed -e 's/ ld / gold /'`\"\n-        ;;\n-    esac\n-  fi\n-fi\n-\n # Configure extra directories which are host specific\n \n case \"${host}\" in"}]}