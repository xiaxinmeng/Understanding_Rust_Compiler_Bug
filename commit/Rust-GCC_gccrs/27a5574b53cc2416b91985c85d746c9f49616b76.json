{"sha": "27a5574b53cc2416b91985c85d746c9f49616b76", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjdhNTU3NGI1M2NjMjQxNmI5MTk4NWM4NWQ3NDZjOWY0OTYxNmI3Ng==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-20T23:49:57Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-20T23:49:57Z"}, "message": "(warning_with_line, pedwarn_with_line): New functions.\n\n(rescan): For pedantic, no error if string constant has newline,\njust a pedwarn.  And don't end the string constant there.\n\nFrom-SVN: r3502", "tree": {"sha": "7b59973d0e46bd39bab3069b82049ad60519c853", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b59973d0e46bd39bab3069b82049ad60519c853"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27a5574b53cc2416b91985c85d746c9f49616b76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27a5574b53cc2416b91985c85d746c9f49616b76", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27a5574b53cc2416b91985c85d746c9f49616b76", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27a5574b53cc2416b91985c85d746c9f49616b76/comments", "author": null, "committer": null, "parents": [{"sha": "5709eb48d8c7a80b9463bd6aa58cea66f2f84672", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5709eb48d8c7a80b9463bd6aa58cea66f2f84672", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5709eb48d8c7a80b9463bd6aa58cea66f2f84672"}], "stats": {"total": 52, "additions": 49, "deletions": 3}, "files": [{"sha": "5c578e30081b2400d9761b2d39cc1bbbb4052e54", "filename": "gcc/cccp.c", "status": "modified", "additions": 49, "deletions": 3, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27a5574b53cc2416b91985c85d746c9f49616b76/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27a5574b53cc2416b91985c85d746c9f49616b76/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=27a5574b53cc2416b91985c85d746c9f49616b76", "patch": "@@ -2439,11 +2439,15 @@ do { ip = &instack[indepth];\t\t\\\n \t    beg_of_line = ibp;\n \t    goto while2end;\n \t  }\n-\t  if (pedantic || c == '\\'') {\n+\t  if (c == '\\'') {\n \t    error_with_line (line_for_error (start_line),\n-\t\t\t     \"unterminated string or character constant\");\n+\t\t\t     \"unterminated character constant\");\n \t    goto while2end;\n \t  }\n+\t  if (pedantic && multiline_string_line == 0) {\n+\t    pedwarn_with_line (line_for_error (start_line),\n+\t\t\t       \"string constant runs past end of line\");\n+\t  }\n \t  if (multiline_string_line == 0)\n \t    multiline_string_line = ip->lineno - 1;\n \t  break;\n@@ -7838,6 +7842,36 @@ error_with_line (line, msg, arg1, arg2, arg3)\n   errors++;\n }\n \n+static void\n+warning_with_line (line, msg, arg1, arg2, arg3)\n+     int line;\n+     char *msg;\n+     char *arg1, *arg2, *arg3;\n+{\n+  int i;\n+  FILE_BUF *ip = NULL;\n+\n+  if (inhibit_warnings)\n+    return;\n+\n+  if (warnings_are_errors)\n+    errors++;\n+\n+  print_containing_files ();\n+\n+  for (i = indepth; i >= 0; i--)\n+    if (instack[i].fname != NULL) {\n+      ip = &instack[i];\n+      break;\n+    }\n+\n+  if (ip != NULL)\n+    fprintf (stderr, \"%s:%d: \", ip->nominal_fname, line);\n+  fprintf (stderr, \"warning: \");\n+  fprintf (stderr, msg, arg1, arg2, arg3);\n+  fprintf (stderr, \"\\n\");\n+}\n+\n /* print an error message and maybe count it.  */\n \n void\n@@ -7851,6 +7885,18 @@ pedwarn (msg, arg1, arg2, arg3)\n     warning (msg, arg1, arg2, arg3);\n }\n \n+void\n+pedwarn_with_line (line, msg, arg1, arg2, arg3)\n+     int line;\n+     char *msg;\n+     char *arg1, *arg2, *arg3;\n+{\n+  if (pedantic_errors)\n+    error_with_line (line, msg, arg1, arg2, arg3);\n+  else\n+    warning_with_line (line, msg, arg1, arg2, arg3);\n+}\n+\n /* Report a warning (or an error if pedantic_errors)\n    giving specified file name and line number, not current.  */\n \n@@ -7866,7 +7912,7 @@ pedwarn_with_file_and_line (file, line, msg, arg1, arg2, arg3)\n     return;\n   if (file != NULL)\n     fprintf (stderr, \"%s:%d: \", file, line);\n-  if (pedantic_errors || warnings_are_errors)\n+  if (pedantic_errors)\n     errors++;\n   if (!pedantic_errors)\n     fprintf (stderr, \"warning: \");"}]}