{"sha": "bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmNiNmEyYmUyMGMyNDlmYmI2ZWRiZDE1YjZmM2QwOWM5MjVhMzdlNQ==", "commit": {"author": {"name": "Marek Michalkiewicz", "email": "marekm@amelek.gda.pl", "date": "2002-05-26T17:09:55Z"}, "committer": {"name": "Marek Michalkiewicz", "email": "marekm@gcc.gnu.org", "date": "2002-05-26T17:09:55Z"}, "message": "avr.c (avr_asm_only_p): New variable.\n\n\n\t* config/avr/avr.c (avr_asm_only_p): New variable.\n\t(avr_override_options): Set it here if AVR1.\n\t(asm_file_start): Test it here, report an error if set.\n\nFrom-SVN: r53899", "tree": {"sha": "22e08719f965c1d7e46e8f306bf5cea2362e952c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22e08719f965c1d7e46e8f306bf5cea2362e952c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5/comments", "author": null, "committer": null, "parents": [{"sha": "ca7fd9cd384910ac69933dbc5f14f2d51d3e882e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca7fd9cd384910ac69933dbc5f14f2d51d3e882e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca7fd9cd384910ac69933dbc5f14f2d51d3e882e"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "55ffba4030218a9f4a08cc212f41e0593ca2eade", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5", "patch": "@@ -1,3 +1,9 @@\n+2002-05-26  Marek Michalkiewicz  <marekm@amelek.gda.pl>\n+\n+\t* config/avr/avr.c (avr_asm_only_p): New variable.\n+\t(avr_override_options): Set it here if AVR1.\n+\t(asm_file_start): Test it here, report an error if set.\n+\n 2002-05-26  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* alias.c: Fix formatting."}, {"sha": "5167ee65ada31726e659adeff3244ecb77198061", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=bcb6a2be20c249fbb6edbd15b6f3d09c925a37e5", "patch": "@@ -114,6 +114,9 @@ int avr_mega_p = 0;\n /* Enhanced core: use \"movw\", \"mul\", ...  */\n int avr_enhanced_p = 0;\n \n+/* Assembler only.  */\n+static int avr_asm_only_p = 0;\n+\n enum avr_arch {\n   AVR1 = 1,\n   AVR2,\n@@ -227,7 +230,7 @@ avr_override_options ()\n     {\n     case AVR1:\n     default:\n-      error (\"MCU `%s' not supported\", avr_mcu_name);\n+      avr_asm_only_p = 1;\n       /* ... fall through ... */\n     case AVR2: avr_enhanced_p = 0; avr_mega_p = 0; break;\n     case AVR3: avr_enhanced_p = 0; avr_mega_p = 1; break;\n@@ -4792,6 +4795,9 @@ void\n asm_file_start (file)\n      FILE *file;\n {\n+  if (avr_asm_only_p)\n+    error (\"MCU `%s' supported for assembler only\", avr_mcu_name);\n+\n   output_file_directive (file, main_input_filename);\n   fprintf (file, \"\\t.arch %s\\n\", avr_mcu_name);\n   fputs (\"__SREG__ = 0x3f\\n\""}]}