{"sha": "aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWEyM2EyZGQ1M2Y2N2Y1Y2I0Y2JmYTcwMzhjMmZjNDhjYWE4MmNjMw==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2020-11-03T09:51:43Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2020-11-03T11:13:11Z"}, "message": "Add dg-require-effective-target fpic to gcc i386 tests\n\nThis change adds\n\n /* { dg-require-effective-target fpic } */\n\nto tests in gcc.target/i386 that do use -fpic or -fPIC\nbut don't currently query the target support.\n\nThis corresponds to what many other fpic tests do\nand helps the vxWorks ports at least, as -fpic is\ntypically not supported in at least one of the two\nmajor modes of such port (kernel vs RTP).\n\n2020-11-03  Olivier Hainque  <hainque@adacore.com>\n\ngcc/testsuite/\n\n\t* gcc.target/i386/pr45352-1.c: Add dg-require-effective-target fpic.\n\t* gcc.target/i386/pr47602.c: Likewise.\n\t* gcc.target/i386/pr55151.c: Likewise.\n\t* gcc.target/i386/pr55458.c: Likewise.\n\t* gcc.target/i386/pr56348.c: Likewise.\n\t* gcc.target/i386/pr57097.c: Likewise.\n\t* gcc.target/i386/pr65753.c: Likewise.\n\t* gcc.target/i386/pr65915.c: Likewise.\n\t* gcc.target/i386/pr66232-5.c: Likewise.\n\t* gcc.target/i386/pr66334.c: Likewise.\n\t* gcc.target/i386/pr66819-2.c: Likewise.\n\t* gcc.target/i386/pr67265.c: Likewise.\n\t* gcc.target/i386/pr81481.c: Likewise.\n\t* gcc.target/i386/pr83994.c: Likewise.", "tree": {"sha": "82e4ec4d5eda6830853a451dbe17bf8d06bff0f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82e4ec4d5eda6830853a451dbe17bf8d06bff0f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f89dcf93348b44b8ea2b57f940fcdaeae0f764f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f89dcf93348b44b8ea2b57f940fcdaeae0f764f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f89dcf93348b44b8ea2b57f940fcdaeae0f764f6"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "f5e96b270166a607bd85c2220c2c9895ae674587", "filename": "gcc/testsuite/gcc.target/i386/pr45352-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr45352-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr45352-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr45352-1.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-mtune=amdfam10 -O3 -fpeel-loops -fselective-scheduling2 -fsel-sched-pipelining -fPIC\" } */\n \n static int FIR_Tab_16[16][16];"}, {"sha": "5ed1e1fd490cd894207e706f1965ec845fd7c959", "filename": "gcc/testsuite/gcc.target/i386/pr47602.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr47602.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr47602.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr47602.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target ia32 } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-fPIC\" } */\n \n /* Test verifies that %ebx is no longer fixed when generating PIC code on i686.  */"}, {"sha": "d6255a83dee775afbcf219225b5710e772f7f719", "filename": "gcc/testsuite/gcc.target/i386/pr55151.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr55151.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr55151.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr55151.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,5 +1,6 @@\n /* PR rtl-optimization/55151 */\n /* { dg-do compile  { target { ! ia32 } } } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-fPIC\" } */\n \n int a, b, c, d, e, f, g, h, i, j, k, l;"}, {"sha": "1dea55c50c9e6781603872e41d1dff5986b6d947", "filename": "gcc/testsuite/gcc.target/i386/pr55458.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr55458.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr55458.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr55458.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target ia32 } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-fPIC\" } */\n \n /* Test verifies that %ebx is no longer fixed when generating PIC code on i686.  */"}, {"sha": "93423d9190d9df8d9f92a5efa0e2cfef38a2b0d4", "filename": "gcc/testsuite/gcc.target/i386/pr56348.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr56348.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr56348.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr56348.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,5 +1,6 @@\n /* PR target/56348 */\n /* { dg-do compile { target ia32 } } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fPIC -mfpmath=sse -msse2\" } */\n \n typedef unsigned int size_t;"}, {"sha": "debacbfc048b64c9c894068bcbf8500d35dc5081", "filename": "gcc/testsuite/gcc.target/i386/pr57097.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr57097.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr57097.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr57097.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fPIC\" } */\n extern double ad[], bd[], cd[], dd[];\n extern long long all[], bll[], cll[], dll[];"}, {"sha": "117d6ed0cf1733517d8aaab8decffef08d0c05e9", "filename": "gcc/testsuite/gcc.target/i386/pr65753.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65753.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65753.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65753.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-fPIC -O2\" } */\n /* { dg-final { scan-assembler-not \"call\" } } */\n "}, {"sha": "6588de47c4a2cbb18681253c05ab49755b1820cb", "filename": "gcc/testsuite/gcc.target/i386/pr65915.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65915.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65915.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr65915.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do run } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -mavx512f -fpic -mcmodel=medium\" } */\n /* { dg-require-effective-target avx512f } */\n /* { dg-require-effective-target lp64 } */"}, {"sha": "76705a529848f1ec98ab195d8ac7543a05e7e740", "filename": "gcc/testsuite/gcc.target/i386/pr66232-5.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66232-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66232-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66232-5.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile { target { ! ia32 } } } */\n /* { dg-require-effective-target maybe_x32 } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fpic -mx32\" } */\n \n extern void (*bar) (void);"}, {"sha": "19c2396073cd7d35be0a9b928b98d2aaa5fa45c2", "filename": "gcc/testsuite/gcc.target/i386/pr66334.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66334.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66334.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66334.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target ia32 } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fpic -fexceptions -fasynchronous-unwind-tables\" } */\n /* { dg-final { scan-assembler \"movl\\[ \\\\t\\].+, %ebx\" } } */\n extern int foo (int);"}, {"sha": "ad2a33e7fd2444c2efa4bdf60894314089b00a48", "filename": "gcc/testsuite/gcc.target/i386/pr66819-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66819-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66819-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr66819-2.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile { target ia32 } } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-fPIC -O2 -mregparm=3\" } */\n /* { dg-final { scan-assembler-not \"call\" } } */\n "}, {"sha": "1708d537b98a353741f572cab4f21ff171c291ee", "filename": "gcc/testsuite/gcc.target/i386/pr67265.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67265.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67265.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr67265.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -3,6 +3,7 @@\n \n /* { dg-do compile } */\n /* { dg-require-stack-check \"\" } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O -fstack-check -fPIC\" } */\n \n int a, b, c, d, e;"}, {"sha": "49f7821ea5be72701ff89e726e8881f40dd2be22", "filename": "gcc/testsuite/gcc.target/i386/pr81481.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr81481.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr81481.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr81481.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target ssse3 } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fpic -mssse3\" } */\n /* { dg-final { scan-assembler-not \"pshufb\\[ \\t\\]\\\\(%esp\\\\)\" } } */\n #include <immintrin.h>"}, {"sha": "1eb47e3cf0a238d956d89740610c5f00c72a5735", "filename": "gcc/testsuite/gcc.target/i386/pr83994.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr83994.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr83994.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr83994.c?ref=aa23a2dd53f67f5cb4cbfa7038c2fc48caa82cc3", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -march=i686 -fpic -fstack-clash-protection\" } */\n /* { dg-require-effective-target ia32 } */\n "}]}