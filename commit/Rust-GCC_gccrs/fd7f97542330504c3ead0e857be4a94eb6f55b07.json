{"sha": "fd7f97542330504c3ead0e857be4a94eb6f55b07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ3Zjk3NTQyMzMwNTA0YzNlYWQwZTg1N2JlNGE5NGViNmY1NWIwNw==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2008-09-07T13:33:18Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2008-09-07T13:33:18Z"}, "message": "re PR fortran/37203 (Check ORDER= of RESHAPE)\n\n2008-09-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/37203\n\t* intrinsics/reshape_generic.c:  Add checking on\n\tout-of-bounds and duplicate values of order argument.\n\t* m4/reshape.m4:  Likewise.\n\t* generated/reshape_c10.c: Regenerated.\n\t* generated/reshape_c16.c: Regenerated.\n\t* generated/reshape_c4.c: Regenerated.\n\t* generated/reshape_c8.c: Regenerated.\n\t* generated/reshape_i16.c: Regenerated.\n\t* generated/reshape_i4.c: Regenerated.\n\t* generated/reshape_i8.c: Regenerated.\n\t* generated/reshape_r10.c: Regenerated.\n\t* generated/reshape_r16.c: Regenerated.\n\t* generated/reshape_r4.c: Regenerated.\n\t* generated/reshape_r8.c: Regenerated.\n\n2008-09-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/37203\n\t* gfortran.d/reshape_order_1.f90:  New test case.\n\t* gfortran.d/reshape_order_2.f90:  New test case.\n\t* gfortran.d/reshape_order_3.f90:  New test case.\n\t* gfortran.d/reshape_order_4.f90:  New test case.\n\nFrom-SVN: r140086", "tree": {"sha": "7b6b6c1148c1ce29f42903a013d5d58a03c9d417", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b6b6c1148c1ce29f42903a013d5d58a03c9d417"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd7f97542330504c3ead0e857be4a94eb6f55b07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd7f97542330504c3ead0e857be4a94eb6f55b07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd7f97542330504c3ead0e857be4a94eb6f55b07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd7f97542330504c3ead0e857be4a94eb6f55b07/comments", "author": null, "committer": null, "parents": [{"sha": "73356a7d3b37e41a0f43a2d95f8def36416bee7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73356a7d3b37e41a0f43a2d95f8def36416bee7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73356a7d3b37e41a0f43a2d95f8def36416bee7d"}], "stats": {"total": 443, "additions": 443, "deletions": 0}, "files": [{"sha": "18555753d09d331e15a052c439d9830161070ea8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -1,3 +1,11 @@\n+2008-09-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/37203\n+\t* gfortran.d/reshape_order_1.f90:  New test case.\n+\t* gfortran.d/reshape_order_2.f90:  New test case.\n+\t* gfortran.d/reshape_order_3.f90:  New test case.\n+\t* gfortran.d/reshape_order_4.f90:  New test case.\n+\n 2008-09-07  Richard Guenther  <rguenther@suse.de>\n             Ira Rosen  <irar@il.ibm.com>\n "}, {"sha": "3909bfde22b63904df8f6567107f6f1c62cb0453", "filename": "gcc/testsuite/gfortran.dg/reshape_order_1.f90", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_1.f90?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -0,0 +1,18 @@\n+! { dg-do run }\n+! { dg-options \"-fbounds-check\" }\n+! { dg-shouldfail \"Duplicate value 2 in ORDER argument to RESHAPE intrinsic\" }\n+program main\n+  implicit none\n+  integer(kind=1), dimension(6) :: source1 = (/ 1, 2, 3, 4, 5, 6 /)\n+  integer, dimension(2) :: shape1 = (/ 2, 5/)\n+  integer(kind=1), dimension(2) :: pad1 = (/ 0, 0/)\n+  character(len=200) :: l1, l2\n+  integer :: i1, i2\n+\n+  l1 = \"2 2\"\n+  read(unit=l1,fmt=*) i1, i2\n+  write (unit=l2,fmt=*) reshape(source1, shape1, pad1, (/i1, i2/)) ! Invalid\n+end program main\n+! { dg-output \"Fortran runtime error: Duplicate value 2 in ORDER argument to RESHAPE intrinsic\" }\n+\n+"}, {"sha": "3c8ef411370e5cb1fba5f4645aa4b675acead98e", "filename": "gcc/testsuite/gfortran.dg/reshape_order_2.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_2.f90?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! { dg-options \"-fbounds-check\" }\n+! { dg-shouldfail \"Value 3 out of range in ORDER argument to RESHAPE intrinsic\" }\n+program main\n+  implicit none\n+  integer(kind=1), dimension(6) :: source1 = (/ 1, 2, 3, 4, 5, 6 /)\n+  integer, dimension(2) :: shape1 = (/ 2, 5/)\n+  integer(kind=1), dimension(2) :: pad1 = (/ 0, 0/)\n+  character(len=200) :: l1, l2\n+  integer :: i1, i2\n+\n+  l1 = \"3 2\"\n+  read(unit=l1,fmt=*) i1, i2\n+  write (unit=l2,fmt=*) reshape(source1, shape1, pad1, (/i1, i2/)) ! Invalid\n+end program main\n+! { dg-output \"Fortran runtime error: Value 3 out of range in ORDER argument to RESHAPE intrinsic\" }"}, {"sha": "263488025d8cb07739498732e5749714c9d4f6fd", "filename": "gcc/testsuite/gfortran.dg/reshape_order_3.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_3.f90?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! { dg-options \"-fbounds-check\" }\n+! { dg-shouldfail \"Duplicate value 2 in ORDER argument to RESHAPE intrinsic\" }\n+program main\n+  implicit none\n+  integer(kind=4), dimension(6) :: source1 = (/ 1, 2, 3, 4, 5, 6 /)\n+  integer, dimension(2) :: shape1 = (/ 2, 5/)\n+  integer(kind=4), dimension(2) :: pad1 = (/ 0, 0/)\n+  character(len=200) :: l1, l2\n+  integer :: i1, i2\n+  \n+  l1 = \"2 2\"\n+  read(unit=l1,fmt=*) i1, i2\n+  write (unit=l2,fmt=*) reshape(source1, shape1, pad1, (/i1, i2/)) ! Invalid\n+end program main\n+! { dg-output \"Fortran runtime error: Duplicate value 2 in ORDER argument to RESHAPE intrinsic\" }"}, {"sha": "bd0536d844ab4b31943f70d5dc9392176ebee2a2", "filename": "gcc/testsuite/gfortran.dg/reshape_order_4.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Freshape_order_4.f90?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! { dg-options \"-fbounds-check\" }\n+! { dg-shouldfail \"Value 0 out of range in ORDER argument to RESHAPE intrinsic\" }\n+program main\n+  implicit none\n+  integer(kind=4), dimension(6) :: source1 = (/ 1, 2, 3, 4, 5, 6 /)\n+  integer, dimension(2) :: shape1 = (/ 2, 5/)\n+  integer(kind=4), dimension(2) :: pad1 = (/ 0, 0/)\n+  character(len=200) :: l1, l2\n+  integer :: i1, i2\n+\n+  l1 = \"0 2\"\n+  read(unit=l1,fmt=*) i1, i2\n+  write (unit=l2,fmt=*) reshape(source1, shape1, pad1, (/i1, i2/)) ! Invalid\n+end program main\n+! { dg-output \"Fortran runtime error: Value 0 out of range in ORDER argument to RESHAPE intrinsic\" }"}, {"sha": "3a0b248353231c79bfe5e3719f720358181af45a", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -1,3 +1,21 @@\n+2008-09-07  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/37203\n+\t* intrinsics/reshape_generic.c:  Add checking on\n+\tout-of-bounds and duplicate values of order argument.\n+\t* m4/reshape.m4:  Likewise.\n+\t* generated/reshape_c10.c: Regenerated.\n+\t* generated/reshape_c16.c: Regenerated.\n+\t* generated/reshape_c4.c: Regenerated.\n+\t* generated/reshape_c8.c: Regenerated.\n+\t* generated/reshape_i16.c: Regenerated.\n+\t* generated/reshape_i4.c: Regenerated.\n+\t* generated/reshape_i8.c: Regenerated.\n+\t* generated/reshape_r10.c: Regenerated.\n+\t* generated/reshape_r16.c: Regenerated.\n+\t* generated/reshape_r4.c: Regenerated.\n+\t* generated/reshape_r8.c: Regenerated.\n+\n 2008-09-06  Tobias Burnus  <burnus@net-b.de>\n \n \t* libgfortran.h (likely,unlikely): New makros."}, {"sha": "ed54f1b637e7006b89fd2e82041a2eb7d218f11d", "filename": "libgfortran/generated/reshape_c10.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_c10.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_c10 (gfc_array_c10 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "636150933a02e7cfca092c782c1bef95a9ec7f70", "filename": "libgfortran/generated/reshape_c16.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_c16.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_c16 (gfc_array_c16 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "869d6231239600372b3bd055e68eebb30a0f2f49", "filename": "libgfortran/generated/reshape_c4.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_c4.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_c4 (gfc_array_c4 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "24ec469bcab1199d4b8cba94a95110108a7a733c", "filename": "libgfortran/generated/reshape_c8.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_c8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_c8.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_c8 (gfc_array_c8 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "e857b6b6a2448aa1e1791ebba36ec71d272f2ffe", "filename": "libgfortran/generated/reshape_i16.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_i16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_i16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_i16.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_16 (gfc_array_i16 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "517d25d8703e8f2f22bb2c1b97bf22e070ed4112", "filename": "libgfortran/generated/reshape_i4.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_i4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_i4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_i4.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_4 (gfc_array_i4 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "75ba3197f34979d30354a34fb4a5bfae00f4f3f1", "filename": "libgfortran/generated/reshape_i8.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_i8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_i8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_i8.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_8 (gfc_array_i8 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "2987ef7a58c2eaf346a4a20c01372f8c07a61dca", "filename": "libgfortran/generated/reshape_r10.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_r10.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_r10 (gfc_array_r10 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "2d84b2b8672767c6eee53892061dc4b503f85197", "filename": "libgfortran/generated/reshape_r16.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_r16.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_r16 (gfc_array_r16 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "fa68f826dac7d53f056e8829a9e109528386ae34", "filename": "libgfortran/generated/reshape_r4.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_r4.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_r4 (gfc_array_r4 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "8af573934391286460aea99ff75277a45fcf74c9", "filename": "libgfortran/generated/reshape_r8.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fgenerated%2Freshape_r8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fgenerated%2Freshape_r8.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -119,6 +119,33 @@ reshape_r8 (gfc_array_r8 * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "5abae82ca034c8eb3cd3f38c13df2bc0fba794f3", "filename": "libgfortran/intrinsics/reshape_generic.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fintrinsics%2Freshape_generic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fintrinsics%2Freshape_generic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Freshape_generic.c?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -108,6 +108,33 @@ reshape_internal (parray *ret, parray *source, shape_type *shape,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}, {"sha": "400e82cde6974fbf9617c05e853730c0ca7319f1", "filename": "libgfortran/m4/reshape.m4", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fm4%2Freshape.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd7f97542330504c3ead0e857be4a94eb6f55b07/libgfortran%2Fm4%2Freshape.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fm4%2Freshape.m4?ref=fd7f97542330504c3ead0e857be4a94eb6f55b07", "patch": "@@ -123,6 +123,33 @@ reshape_'rtype_ccode` ('rtype` * const restrict ret,\n   if (shape_empty)\n     return;\n \n+  if (unlikely (compile_options.bounds_check))\n+    {\n+      if (order)\n+\t{\n+\t  int seen[GFC_MAX_DIMENSIONS];\n+\t  index_type v;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    seen[n] = 0;\n+\n+\t  for (n = 0; n < rdim; n++)\n+\t    {\n+\t      v = order->data[n * order->dim[0].stride] - 1;\n+\n+\t      if (v < 0 || v >= rdim)\n+\t\truntime_error(\"Value %ld out of range in ORDER argument\"\n+\t\t\t      \" to RESHAPE intrinsic\", (long int) v + 1);\n+\n+\t      if (seen[v] != 0)\n+\t\truntime_error(\"Duplicate value %ld in ORDER argument to\"\n+\t\t\t      \" RESHAPE intrinsic\", (long int) v + 1);\n+\t\t\n+\t      seen[v] = 1;\n+\t    }\n+\t}\n+    }\n+\n   rsize = 1;\n   for (n = 0; n < rdim; n++)\n     {"}]}