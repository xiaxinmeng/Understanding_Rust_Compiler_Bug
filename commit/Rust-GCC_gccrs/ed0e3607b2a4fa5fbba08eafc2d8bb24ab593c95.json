{"sha": "ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQwZTM2MDdiMmE0ZmE1ZmJiYTA4ZWFmYzJkOGJiMjRhYjU5M2M5NQ==", "commit": {"author": {"name": "Asher Langton", "email": "langton2@llnl.gov", "date": "2006-07-03T20:19:23Z"}, "committer": {"name": "Asher Langton", "email": "langton@gcc.gnu.org", "date": "2006-07-03T20:19:23Z"}, "message": "decl.c (match_old_style_init): Add data attribute to symbol.\n\n\t* decl.c (match_old_style_init): Add data attribute to symbol.\n\n\t* gfortran.dg/oldstyle_2.f90: New.\n\nFrom-SVN: r115161", "tree": {"sha": "46b4a61a47ef5f0387caa05bed0d5eba599c7308", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/46b4a61a47ef5f0387caa05bed0d5eba599c7308"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/comments", "author": null, "committer": null, "parents": [{"sha": "11fc42759850498a535a03418e667a57461fab91", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11fc42759850498a535a03418e667a57461fab91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11fc42759850498a535a03418e667a57461fab91"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "a340461c2305116ee0b9d4e545f99e84a1abfa58", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "patch": "@@ -1,3 +1,7 @@\n+2006-07-03  Asher Langton  <langton2@llnl.gov>\n+\n+\t* decl.c (match_old_style_init): Add data attribute to symbol.\n+\n 2006-07-03  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \t* iresolve.c (gfc_resolve_cpu_time, gfc_resolve_random_number):"}, {"sha": "5eca35d6c6a3d7c5ac4daf10407762c6eee5db73", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "patch": "@@ -385,11 +385,13 @@ match_old_style_init (const char *name)\n {\n   match m;\n   gfc_symtree *st;\n+  gfc_symbol *sym;\n   gfc_data *newdata;\n \n   /* Set up data structure to hold initializers.  */\n   gfc_find_sym_tree (name, NULL, 0, &st);\n-\t  \n+  sym = st->n.sym;\n+\n   newdata = gfc_get_data ();\n   newdata->var = gfc_get_data_variable ();\n   newdata->var->expr = gfc_get_variable_expr (st);\n@@ -410,6 +412,13 @@ match_old_style_init (const char *name)\n       return MATCH_ERROR;\n     }\n \n+  /* Mark the variable as having appeared in a data statement.  */\n+  if (gfc_add_data (&sym->attr, sym->name, &sym->declared_at) == FAILURE)\n+    {\n+      gfc_free (newdata);\n+      return MATCH_ERROR;\n+    }\n+\n   /* Chain in namespace list of DATA initializers.  */\n   newdata->next = gfc_current_ns->data;\n   gfc_current_ns->data = newdata;"}, {"sha": "80a328c21cde4740b32f8e6e50b9895ee8014695", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "patch": "@@ -1,3 +1,7 @@\n+2006-07-03  Asher Langton  <langton2@llnl.gov>\n+\n+\t* gfortran.dg/oldstyle_2.f90: New.\n+\n 2006-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/gnat.dg/string_slice.adb: New test."}, {"sha": "6f1b477295bf2fc043fa7a4c20424a0d5b8befa6", "filename": "gcc/testsuite/gfortran.dg/oldstyle_2.f90", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ftestsuite%2Fgfortran.dg%2Foldstyle_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95/gcc%2Ftestsuite%2Fgfortran.dg%2Foldstyle_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Foldstyle_2.f90?ref=ed0e3607b2a4fa5fbba08eafc2d8bb24ab593c95", "patch": "@@ -0,0 +1,4 @@\n+! { dg-do compile}\n+subroutine foo(i) ! { dg-error \"DATA attribute\" }\n+  integer i /10/\n+end subroutine foo"}]}