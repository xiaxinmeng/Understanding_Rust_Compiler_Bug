{"sha": "28edebac58063d9c67e10121dd9d56d3a7776dd2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhlZGViYWM1ODA2M2Q5YzY3ZTEwMTIxZGQ5ZDU2ZDNhNzc3NmRkMg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-01-19T22:54:22Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-01-19T22:54:22Z"}, "message": "(output_epilog): Only restore the cr's that we actually used;\n\npreviously, we saved and restored all of them.\n\nFrom-SVN: r3282", "tree": {"sha": "129ca373e6d060bcc93fd9a125d5b7a5bda3de22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/129ca373e6d060bcc93fd9a125d5b7a5bda3de22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28edebac58063d9c67e10121dd9d56d3a7776dd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28edebac58063d9c67e10121dd9d56d3a7776dd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28edebac58063d9c67e10121dd9d56d3a7776dd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28edebac58063d9c67e10121dd9d56d3a7776dd2/comments", "author": null, "committer": null, "parents": [{"sha": "f898f03121cf231a8b458cd097cdd6df85110c1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f898f03121cf231a8b458cd097cdd6df85110c1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f898f03121cf231a8b458cd097cdd6df85110c1e"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "b9a233299fe1741db01c1c057d613403fa4e11a9", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28edebac58063d9c67e10121dd9d56d3a7776dd2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28edebac58063d9c67e10121dd9d56d3a7776dd2/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=28edebac58063d9c67e10121dd9d56d3a7776dd2", "patch": "@@ -1385,9 +1385,13 @@ output_epilog (file, size)\n       else if (first_fp_reg == 63)\n \tfprintf (file, \"\\tlfd 31,-8(1)\\n\");\n \n-      /* If we saved cr, restore it here.  Just set cr2, cr3, and cr4.  */\n+      /* If we saved cr, restore it here.  Just those of cr2, cr3, and cr4\n+\t that were used.  */\n       if (must_save_cr ())\n-\tfprintf (file, \"\\tmtcrf 0x38,12\\n\");\n+\tfprintf (file, \"\\tmtcrf %d,12\\n\",\n+\t\t (regs_ever_live[70] != 0) * 0x20\n+\t\t + (regs_ever_live[71] != 0) * 0x10\n+\t\t + (regs_ever_live[72] != 0) * 0x8);\n \n       /* If we have to restore more than two FP registers, branch to the\n \t restore function.  It will return to our caller.  */"}]}