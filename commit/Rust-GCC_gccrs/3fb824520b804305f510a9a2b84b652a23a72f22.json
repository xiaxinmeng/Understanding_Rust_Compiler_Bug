{"sha": "3fb824520b804305f510a9a2b84b652a23a72f22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZiODI0NTIwYjgwNDMwNWY1MTBhOWEyYjg0YjY1MmEyM2E3MmYyMg==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2017-07-17T11:34:30Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2017-07-17T11:34:30Z"}, "message": "re PR tree-optimization/81374 (ICE in bb_top_order_cmp, at tree-loop-distribution.c:391)\n\n\tPR tree-optimization/81374\n\t* tree-loop-distribution.c (pass_loop_distribution::execute): Record\n\tthe max index of basic blocks, rather than number of basic blocks.\n\nFrom-SVN: r250268", "tree": {"sha": "602cd64be95daacabb08438610d6f6c872196d64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/602cd64be95daacabb08438610d6f6c872196d64"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fb824520b804305f510a9a2b84b652a23a72f22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fb824520b804305f510a9a2b84b652a23a72f22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fb824520b804305f510a9a2b84b652a23a72f22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fb824520b804305f510a9a2b84b652a23a72f22/comments", "author": null, "committer": null, "parents": [{"sha": "b6c354ebc736de36d39b2b81e7dd2e3932b28404", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6c354ebc736de36d39b2b81e7dd2e3932b28404", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6c354ebc736de36d39b2b81e7dd2e3932b28404"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "841f22616f1082d4510a068cb870d8d1f44b3119", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fb824520b804305f510a9a2b84b652a23a72f22/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fb824520b804305f510a9a2b84b652a23a72f22/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3fb824520b804305f510a9a2b84b652a23a72f22", "patch": "@@ -1,3 +1,9 @@\n+2017-07-17  Bin Cheng  <bin.cheng@arm.com>\n+\n+\tPR tree-optimization/81374\n+\t* tree-loop-distribution.c (pass_loop_distribution::execute): Record\n+\tthe max index of basic blocks, rather than number of basic blocks.\n+\n 2017-07-17  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* config/arc/arc-protos.h (arc_legitimate_pc_offset_p): Remove"}, {"sha": "5c8f29dc36fb825c8c68f891258b784905fb6599", "filename": "gcc/tree-loop-distribution.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fb824520b804305f510a9a2b84b652a23a72f22/gcc%2Ftree-loop-distribution.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fb824520b804305f510a9a2b84b652a23a72f22/gcc%2Ftree-loop-distribution.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-loop-distribution.c?ref=3fb824520b804305f510a9a2b84b652a23a72f22", "patch": "@@ -2614,12 +2614,13 @@ pass_loop_distribution::execute (function *fun)\n      lexicographical order.  */\n   if (bb_top_order_index == NULL)\n     {\n+      int rpo_num;\n       int *rpo = XNEWVEC (int, last_basic_block_for_fn (cfun));\n \n       bb_top_order_index = XNEWVEC (int, last_basic_block_for_fn (cfun));\n-      bb_top_order_index_size\n-\t= pre_and_rev_post_order_compute_fn (cfun, NULL, rpo, true);\n-      for (int i = 0; i < bb_top_order_index_size; i++)\n+      bb_top_order_index_size = last_basic_block_for_fn (cfun);\n+      rpo_num = pre_and_rev_post_order_compute_fn (cfun, NULL, rpo, true);\n+      for (int i = 0; i < rpo_num; i++)\n \tbb_top_order_index[rpo[i]] = i;\n \n       free (rpo);"}]}