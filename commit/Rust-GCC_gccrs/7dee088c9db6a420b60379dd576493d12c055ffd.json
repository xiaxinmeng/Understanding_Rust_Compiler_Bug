{"sha": "7dee088c9db6a420b60379dd576493d12c055ffd", "node_id": "C_kwDOANBUbNoAKDdkZWUwODhjOWRiNmE0MjBiNjAzNzlkZDU3NjQ5M2QxMmMwNTVmZmQ", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-10-14T18:22:34Z"}, "committer": {"name": "Marc Poulhi\u00e8s", "email": "poulhies@adacore.com", "date": "2022-11-07T08:36:34Z"}, "message": "ada: Fix detection of external calls to protected objects in instances\n\nDetection of external-vs-internal calls to protected objects relied on\nthe scope stack. This didn't work when the call appeared in an instance\nof generic unit, because instances are analyzed in different context to\nwhere they appear.\n\ngcc/ada/\n\n\t* exp_ch6.adb (Expand_Protected_Subprogram_Call): Examine scope\n\ttree and not the scope stack.", "tree": {"sha": "2771ffbf848218ba7a7d91d2d7c6b852a91f53fa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2771ffbf848218ba7a7d91d2d7c6b852a91f53fa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dee088c9db6a420b60379dd576493d12c055ffd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dee088c9db6a420b60379dd576493d12c055ffd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dee088c9db6a420b60379dd576493d12c055ffd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dee088c9db6a420b60379dd576493d12c055ffd/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dkm", "id": 87603, "node_id": "MDQ6VXNlcjg3NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/87603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkm", "html_url": "https://github.com/dkm", "followers_url": "https://api.github.com/users/dkm/followers", "following_url": "https://api.github.com/users/dkm/following{/other_user}", "gists_url": "https://api.github.com/users/dkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkm/subscriptions", "organizations_url": "https://api.github.com/users/dkm/orgs", "repos_url": "https://api.github.com/users/dkm/repos", "events_url": "https://api.github.com/users/dkm/events{/privacy}", "received_events_url": "https://api.github.com/users/dkm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "90908af3f8648567f1027260d38e5979e45066a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90908af3f8648567f1027260d38e5979e45066a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90908af3f8648567f1027260d38e5979e45066a3"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "0fa97688c5b821b0282718368547d4c79d03fdf4", "filename": "gcc/ada/exp_ch6.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dee088c9db6a420b60379dd576493d12c055ffd/gcc%2Fada%2Fexp_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dee088c9db6a420b60379dd576493d12c055ffd/gcc%2Fada%2Fexp_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch6.adb?ref=7dee088c9db6a420b60379dd576493d12c055ffd", "patch": "@@ -6240,7 +6240,7 @@ package body Exp_Ch6 is\n       --  The object may be a component of some other data structure, in which\n       --  case this must be handled as an inter-object call.\n \n-      if not In_Open_Scopes (Scop)\n+      if not Scope_Within_Or_Same (Inner => Current_Scope, Outer => Scop)\n         or else Is_Entry_Wrapper (Current_Scope)\n         or else not Is_Entity_Name (Name (N))\n       then"}]}