{"sha": "67839c562779081936cb79ebca156ef43d70f65f", "node_id": "C_kwDOANBUbNoAKDY3ODM5YzU2Mjc3OTA4MTkzNmNiNzllYmNhMTU2ZWY0M2Q3MGY2NWY", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2023-03-14T10:28:24Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2023-03-14T10:29:48Z"}, "message": "Add testcase for ifcvt fix\n\ngcc/testsuite/\n\tPR tree-optimization/109005\n\t* gnat.dg/specs/opt6.ads: New test.", "tree": {"sha": "e9adee17af1228a92367598bacb577c888f72fb3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9adee17af1228a92367598bacb577c888f72fb3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67839c562779081936cb79ebca156ef43d70f65f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67839c562779081936cb79ebca156ef43d70f65f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67839c562779081936cb79ebca156ef43d70f65f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67839c562779081936cb79ebca156ef43d70f65f/comments", "author": null, "committer": null, "parents": [{"sha": "8b6c38ef6a7a8cc1f7cc2ff86a686e07ceab1641", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b6c38ef6a7a8cc1f7cc2ff86a686e07ceab1641", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b6c38ef6a7a8cc1f7cc2ff86a686e07ceab1641"}], "stats": {"total": 69, "additions": 69, "deletions": 0}, "files": [{"sha": "994949a6571acc88fa540f5f6beb29d7ea9a6fcd", "filename": "gcc/testsuite/gnat.dg/specs/opt6.ads", "status": "added", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67839c562779081936cb79ebca156ef43d70f65f/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fopt6.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67839c562779081936cb79ebca156ef43d70f65f/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fopt6.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fopt6.ads?ref=67839c562779081936cb79ebca156ef43d70f65f", "patch": "@@ -0,0 +1,69 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O2\" }\n+\n+package Opt6 is\n+\n+   type Timer_Output_Compare_And_PWM_Mode is\n+     (Frozen,\n+      Active,\n+      Inactive,\n+      Toggle,\n+      Force_Inactive,\n+      Force_Active,\n+      PWM1,\n+      PWM2);\n+\n+   type Timer_Capture_Compare_Modes is\n+     (Output, Direct_TI, Indirect_TI, TRC);\n+\n+   type Timer_Input_Capture_Filter is mod 16;\n+\n+   type Timer_Input_Capture_Prescaler is\n+     (Div1,\n+      Div2,\n+      Div4,\n+      Div8);\n+\n+   type Channel_Output_Descriptor is record\n+      OCxFast_Enable    : Boolean;\n+      OCxPreload_Enable : Boolean;\n+      OCxMode           : Timer_Output_Compare_And_PWM_Mode;\n+      OCxClear_Enable   : Boolean;\n+   end record with Size => 6;\n+   for Channel_Output_Descriptor use record\n+      OCxFast_Enable    at 0 range 0 .. 0;\n+      OCxPreload_Enable at 0 range 1 .. 1;\n+      OCxMode           at 0 range 2 .. 4;\n+      OCxClear_Enable   at 0 range 5 .. 5;\n+   end record;\n+\n+   type Channel_Input_Descriptor is record\n+      ICxFilter    : Timer_Input_Capture_Filter;\n+      ICxPrescaler : Timer_Input_Capture_Prescaler;\n+   end record with Size => 6;\n+   for Channel_Input_Descriptor use record\n+      ICxFilter    at 0 range 2 .. 5;\n+      ICxPrescaler at 0 range 0 .. 1;\n+   end record;\n+\n+   type IO_Descriptor (CCxSelection : Timer_Capture_Compare_Modes := Output) is\n+      record\n+         case CCxSelection is\n+            when Direct_TI .. TRC =>\n+               Capture : Channel_Input_Descriptor;\n+            when Output =>\n+               Compare : Channel_Output_Descriptor;\n+         end case;\n+      end record with Size => 8;\n+   for IO_Descriptor use record\n+      CCxSelection at 0 range 0 .. 1;\n+      Capture      at 0 range 2 .. 7;\n+      Compare      at 0 range 2 .. 7;\n+   end record;\n+\n+   subtype Lower_Half_Index is Integer range 1 .. 2;\n+   type TIMx_CCMRx_Lower_Half is\n+     array (Lower_Half_Index) of IO_Descriptor\n+   with Volatile_Components, Component_Size => 8, Size => 16;\n+\n+end Opt6;"}]}