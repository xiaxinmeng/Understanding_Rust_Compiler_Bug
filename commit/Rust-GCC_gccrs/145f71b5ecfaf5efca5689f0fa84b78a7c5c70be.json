{"sha": "145f71b5ecfaf5efca5689f0fa84b78a7c5c70be", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQ1ZjcxYjVlY2ZhZjVlZmNhNTY4OWYwZmE4NGI3OGE3YzVjNzBiZQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-01-11T16:28:08Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-01-11T16:28:08Z"}, "message": "compiler: Fix names for hash/equality functions for unnamed types.\n\nFrom-SVN: r183098", "tree": {"sha": "d8215ca00c4d575fe3d1fc83c41c31e260de6344", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d8215ca00c4d575fe3d1fc83c41c31e260de6344"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/145f71b5ecfaf5efca5689f0fa84b78a7c5c70be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/145f71b5ecfaf5efca5689f0fa84b78a7c5c70be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/145f71b5ecfaf5efca5689f0fa84b78a7c5c70be", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/145f71b5ecfaf5efca5689f0fa84b78a7c5c70be/comments", "author": null, "committer": null, "parents": [{"sha": "58ef756802595e58666ab05ca636f9da8ebe6dfe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/58ef756802595e58666ab05ca636f9da8ebe6dfe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/58ef756802595e58666ab05ca636f9da8ebe6dfe"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "21dac51b3708c58c9b3de9c425ce5e87a0535055", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/145f71b5ecfaf5efca5689f0fa84b78a7c5c70be/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/145f71b5ecfaf5efca5689f0fa84b78a7c5c70be/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=145f71b5ecfaf5efca5689f0fa84b78a7c5c70be", "patch": "@@ -1504,7 +1504,17 @@ Type::specific_type_functions(Gogo* gogo, Named_type* name,\n \n   std::string base_name;\n   if (name == NULL)\n-    base_name = gogo->pack_hidden_name(this->mangled_name(gogo), false);\n+    {\n+      // Mangled names can have '.' if they happen to refer to named\n+      // types in some way.  That's fine if this is simply a named\n+      // type, but otherwise it will confuse the code that builds\n+      // function identifiers.  Remove '.' when necessary.\n+      base_name = this->mangled_name(gogo);\n+      size_t i;\n+      while ((i = base_name.find('.')) != std::string::npos)\n+\tbase_name[i] = '$';\n+      base_name = gogo->pack_hidden_name(base_name, false);\n+    }\n   else\n     {\n       // This name is already hidden or not as appropriate."}]}