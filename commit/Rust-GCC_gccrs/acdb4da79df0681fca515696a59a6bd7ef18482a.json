{"sha": "acdb4da79df0681fca515696a59a6bd7ef18482a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWNkYjRkYTc5ZGYwNjgxZmNhNTE1Njk2YTU5YTZiZDdlZjE4NDgyYQ==", "commit": {"author": {"name": "Nicolas Setton", "email": "setton@adacore.com", "date": "2010-08-05T15:21:13Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-08-05T15:21:13Z"}, "message": "gcov.c (flag_display_progress): New static variable.\n\n\t* gcov.c (flag_display_progress): New static variable.\n\t(main): Display progress info on standard output if requested.\n\t(options): Add -d/--display-progress.\n\t(print_usage): Print them.\n\t(process_args): Handle them.\n\t* doc/gcov.texi: Document them.\n\nFrom-SVN: r162916", "tree": {"sha": "1ad1f10e923a13456426b5003b7b599175983bd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ad1f10e923a13456426b5003b7b599175983bd8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/acdb4da79df0681fca515696a59a6bd7ef18482a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acdb4da79df0681fca515696a59a6bd7ef18482a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acdb4da79df0681fca515696a59a6bd7ef18482a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acdb4da79df0681fca515696a59a6bd7ef18482a/comments", "author": {"login": "setton", "id": 96973, "node_id": "MDQ6VXNlcjk2OTcz", "avatar_url": "https://avatars.githubusercontent.com/u/96973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/setton", "html_url": "https://github.com/setton", "followers_url": "https://api.github.com/users/setton/followers", "following_url": "https://api.github.com/users/setton/following{/other_user}", "gists_url": "https://api.github.com/users/setton/gists{/gist_id}", "starred_url": "https://api.github.com/users/setton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/setton/subscriptions", "organizations_url": "https://api.github.com/users/setton/orgs", "repos_url": "https://api.github.com/users/setton/repos", "events_url": "https://api.github.com/users/setton/events{/privacy}", "received_events_url": "https://api.github.com/users/setton/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d2c57fe97ecc24da4c947cd89623d54ba392c66c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2c57fe97ecc24da4c947cd89623d54ba392c66c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2c57fe97ecc24da4c947cd89623d54ba392c66c"}], "stats": {"total": 36, "additions": 34, "deletions": 2}, "files": [{"sha": "4442404c5c47ca73a026a4040d80e56340711c24", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acdb4da79df0681fca515696a59a6bd7ef18482a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acdb4da79df0681fca515696a59a6bd7ef18482a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=acdb4da79df0681fca515696a59a6bd7ef18482a", "patch": "@@ -1,3 +1,12 @@\n+2010-08-05  Nicolas Setton  <setton@adacore.com>\n+\n+\t* gcov.c (flag_display_progress): New static variable.\n+\t(main): Display progress info on standard output if requested.\n+\t(options): Add -d/--display-progress.\n+\t(print_usage): Print them.\n+\t(process_args): Handle them.\n+\t* doc/gcov.texi: Document them.\n+\n 2010-08-05  Martin Jambor  <mjambor@suse.cz>\n \n \t* ipa-cp.c (ipcp_discover_new_direct_edges): New function."}, {"sha": "3f48f3b3ec654ed2b6b0eb0cd3fcc52d38c0fbab", "filename": "gcc/doc/gcov.texi", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acdb4da79df0681fca515696a59a6bd7ef18482a/gcc%2Fdoc%2Fgcov.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acdb4da79df0681fca515696a59a6bd7ef18482a/gcc%2Fdoc%2Fgcov.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fgcov.texi?ref=acdb4da79df0681fca515696a59a6bd7ef18482a", "patch": "@@ -130,6 +130,7 @@ gcov [@option{-v}|@option{--version}] [@option{-h}|@option{--help}]\n      [@option{-f}|@option{--function-summaries}]\n      [@option{-o}|@option{--object-directory} @var{directory|file}] @var{sourcefiles}\n      [@option{-u}|@option{--unconditional-branches}]\n+     [@option{-d}|@option{--display-progress}]\n @c man end\n @c man begin SEEALSO\n gpl(7), gfdl(7), fsf-funding(7), gcc(1) and the Info entry for @file{gcc}.\n@@ -211,6 +212,10 @@ option is not supplied, it defaults to the current directory.\n When branch probabilities are given, include those of unconditional branches.\n Unconditional branches are normally not interesting.\n \n+@item -d\n+@itemx --display-progress\n+Display the progress on the standard output.\n+\n @end table\n \n @command{gcov} should be run with the current directory the same as that"}, {"sha": "20d5fdf61e699e8ad43e160d616fa5d7e5866afd", "filename": "gcc/gcov.c", "status": "modified", "additions": 20, "deletions": 2, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/acdb4da79df0681fca515696a59a6bd7ef18482a/gcc%2Fgcov.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/acdb4da79df0681fca515696a59a6bd7ef18482a/gcc%2Fgcov.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcov.c?ref=acdb4da79df0681fca515696a59a6bd7ef18482a", "patch": "@@ -297,6 +297,11 @@ static int flag_unconditional = 0;\n \n static int flag_gcov_file = 1;\n \n+/* Output progress indication if this is true.  This is off by default\n+   and can be turned on by the -d option.  */\n+\n+static int flag_display_progress = 0;\n+\n /* For included files, make the gcov output file name include the name\n    of the input source file.  For example, if x.h is included in a.c,\n    then the output file name is a.c##x.h.gcov instead of x.h.gcov.  */\n@@ -355,6 +360,7 @@ int\n main (int argc, char **argv)\n {\n   int argno;\n+  int first_arg;\n \n   /* Unlock the stdio streams.  */\n   unlock_std_streams ();\n@@ -371,8 +377,15 @@ main (int argc, char **argv)\n   if (argc - argno > 1)\n     multiple_files = 1;\n \n+  first_arg = argno;\n+  \n   for (; argno != argc; argno++)\n-    process_file (argv[argno]);\n+    {\n+      if (flag_display_progress)\n+        printf(\"Processing file %d out of %d\\n\",  \n+               argno - first_arg + 1, argc - first_arg);\n+      process_file (argv[argno]);\n+    }\n \n   generate_results (multiple_files ? NULL : argv[argc - 1]);\n \n@@ -415,6 +428,7 @@ print_usage (int error_p)\n   fnotice (file, \"  -o, --object-directory DIR|FILE Search for object files in DIR or called FILE\\n\");\n   fnotice (file, \"  -p, --preserve-paths            Preserve all pathname components\\n\");\n   fnotice (file, \"  -u, --unconditional-branches    Show unconditional branch counts too\\n\");\n+  fnotice (file, \"  -d, --display-progress          Display progress information\\n\");\n   fnotice (file, \"\\nFor bug reporting instructions, please see:\\n%s.\\n\",\n \t   bug_report_url);\n   exit (status);\n@@ -449,6 +463,7 @@ static const struct option options[] =\n   { \"object-directory\",     required_argument, NULL, 'o' },\n   { \"object-file\",          required_argument, NULL, 'o' },\n   { \"unconditional-branches\", no_argument,     NULL, 'u' },\n+  { \"display-progress\",     no_argument,       NULL, 'd' },\n   { 0, 0, 0, 0 }\n };\n \n@@ -459,7 +474,7 @@ process_args (int argc, char **argv)\n {\n   int opt;\n \n-  while ((opt = getopt_long (argc, argv, \"abcfhlno:puv\", options, NULL)) != -1)\n+  while ((opt = getopt_long (argc, argv, \"abcdfhlno:puv\", options, NULL)) != -1)\n     {\n       switch (opt)\n \t{\n@@ -493,6 +508,9 @@ process_args (int argc, char **argv)\n \tcase 'u':\n \t  flag_unconditional = 1;\n \t  break;\n+        case 'd':\n+          flag_display_progress = 1;\n+          break;\n \tcase 'v':\n \t  print_version ();\n \t  /* print_version will exit.  */"}]}