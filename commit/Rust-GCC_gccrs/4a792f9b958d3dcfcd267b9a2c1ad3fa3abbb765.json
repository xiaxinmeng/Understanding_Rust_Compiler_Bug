{"sha": "4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE3OTJmOWI5NThkM2RjZmNkMjY3YjlhMmMxYWQzZmEzYWJiYjc2NQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2012-05-28T17:42:29Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-05-28T17:42:29Z"}, "message": "re PR c++/25137 (Warning \"missing braces around initializer\" causing problems with tr1::array)\n\n/c-family\n2012-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/25137\n\t* c-opts.c (c_common_handle_option): For C++ -Wall doesn't enable\n\t-Wmissing_braces.\n\n2012-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/25137\n\t* doc/invoke.texi: Document -Wmissing-braces not enabled by -Wall\n\tfor C++.\n\n/testsuite\n2012-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/25137\n\t* g++.dg/warn/Wbraces3.C: New.\n\t* g++.dg/warn/Wbraces4.C: Likewise.\n\nFrom-SVN: r187937", "tree": {"sha": "bd627083ecaa6e536f2e96103c78360ae126bc88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bd627083ecaa6e536f2e96103c78360ae126bc88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/comments", "author": null, "committer": null, "parents": [{"sha": "b492210558441781aeb94cf49e0e9ebf8ba3d782", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b492210558441781aeb94cf49e0e9ebf8ba3d782", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b492210558441781aeb94cf49e0e9ebf8ba3d782"}], "stats": {"total": 94, "additions": 91, "deletions": 3}, "files": [{"sha": "f5afb293197793ab92eb353e591e46f52848628f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "patch": "@@ -1,3 +1,9 @@\n+2012-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/25137\n+\t* doc/invoke.texi: Document -Wmissing-braces not enabled by -Wall\n+\tfor C++.\n+\n 2012-05-28  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* doc/md.texi (stack_protect_test): Remove negation of branch to"}, {"sha": "88072c0ee332eca5bd29893cc466c015e5e8f21b", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "patch": "@@ -1,3 +1,9 @@\n+2012-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/25137\n+\t* c-opts.c (c_common_handle_option): For C++ -Wall doesn't enable\n+\t-Wmissing_braces.\n+\n 2012-05-22  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR c++/53322"}, {"sha": "a88fff5c27b5675024f3ab2d49840cefda884a4e", "filename": "gcc/c-family/c-opts.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Fc-family%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Fc-family%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-opts.c?ref=4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "patch": "@@ -370,7 +370,6 @@ c_common_handle_option (size_t scode, const char *arg, int value,\n \t\t\t       c_family_lang_mask, kind, loc,\n \t\t\t       handlers, global_dc);\n       warn_char_subscripts = value;\n-      warn_missing_braces = value;\n       warn_parentheses = value;\n       warn_return_type = value;\n       warn_sequence_point = value;\t/* Was C only.  */\n@@ -402,6 +401,8 @@ c_common_handle_option (size_t scode, const char *arg, int value,\n \t     done in c_common_post_options.  */\n           if (warn_enum_compare == -1)\n             warn_enum_compare = value;\n+\n+\t  warn_missing_braces = value;\n \t}\n       else\n \t{"}, {"sha": "0cf383c1a8e1925a620bc7ae31ab00b4a8200fec", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "patch": "@@ -3090,7 +3090,7 @@ Options} and @ref{Objective-C and Objective-C++ Dialect Options}.\n -Wformat   @gol\n -Wmain @r{(only for C/ObjC and unless} @option{-ffreestanding}@r{)}  @gol\n -Wmaybe-uninitialized @gol\n--Wmissing-braces  @gol\n+-Wmissing-braces @r{(only for C/ObjC)} @gol\n -Wnonnull  @gol\n -Wparentheses  @gol\n -Wpointer-sign  @gol\n@@ -3401,7 +3401,8 @@ or @option{-Wpedantic}.\n @opindex Wno-missing-braces\n Warn if an aggregate or union initializer is not fully bracketed.  In\n the following example, the initializer for @samp{a} is not fully\n-bracketed, but that for @samp{b} is fully bracketed.\n+bracketed, but that for @samp{b} is fully bracketed.  This warning is\n+enabled by @option{-Wall} in C.\n \n @smallexample\n int a[2][2] = @{ 0, 1, 2, 3 @};"}, {"sha": "fa1ef57707400eed8651fc12c02c3f707d7f40b8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "patch": "@@ -1,3 +1,9 @@\n+2012-05-28  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/25137\n+\t* g++.dg/warn/Wbraces3.C: New.\n+\t* g++.dg/warn/Wbraces4.C: Likewise.\n+\n 2012-05-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/53505"}, {"sha": "f1aea98c4444a356f86b6e2b70b2fabc4807f11a", "filename": "gcc/testsuite/g++.dg/warn/Wbraces3.C", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWbraces3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWbraces3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWbraces3.C?ref=4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "patch": "@@ -0,0 +1,34 @@\n+// PR c++/25137\n+// { dg-options \"-Wall\" }\n+\n+struct S { int s[3]; };\n+S s1 = { 1, 1, 1 };\n+\n+struct S1 { int s[3]; };\n+struct S2 { struct S1 a; };\n+S2 s21 = { 1, 1, 1 }; \n+\n+struct S3 { int s[3]; };\n+struct S4 { struct S3 a; int b; };\n+S4 s41 = { 1, 1, 1, 1 };\n+\n+struct S5 { int s[3]; };\n+struct S6 { struct S5 a; int b; };\n+S6 s61 = { { 1, 1, 1 }, 1 };\n+\n+struct S7 { int s[3]; };\n+struct S8 { int a; struct S7 b; };\n+S8 s81 = { 1, { 1, 1, 1 } };\n+\n+struct S9 { int s[2]; };\n+struct S10 { struct S9 a; struct S9 b; };\n+S10 s101 = { { 1, 1 }, 1, 1 };\n+\n+struct S11 { int s[2]; };\n+struct S12 { struct S11 a; struct S11 b; };\n+S12 s121 = { { 1, 1 }, { 1, 1 } };\n+\n+struct S13 { int i; };\n+struct S14 { struct S13 a; };\n+struct S15 { struct S14 b; };\n+S15 s151 = { 1 };"}, {"sha": "7d77959f7676167352264815b935d237dd007ae8", "filename": "gcc/testsuite/g++.dg/warn/Wbraces4.C", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWbraces4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWbraces4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWbraces4.C?ref=4a792f9b958d3dcfcd267b9a2c1ad3fa3abbb765", "patch": "@@ -0,0 +1,34 @@\n+// PR c++/25137\n+// { dg-options \"-Wmissing-braces\" }\n+\n+struct S { int s[3]; };\n+S s1 = { 1, 1, 1 };                 // { dg-warning \"missing braces\" }\n+\n+struct S1 { int s[3]; };\n+struct S2 { struct S1 a; };\n+S2 s21 = { 1, 1, 1 };               // { dg-warning \"missing braces\" }\n+\n+struct S3 { int s[3]; };\n+struct S4 { struct S3 a; int b; };\n+S4 s41 = { 1, 1, 1, 1 };            // { dg-warning \"missing braces\" }\n+\n+struct S5 { int s[3]; };\n+struct S6 { struct S5 a; int b; };\n+S6 s61 = { { 1, 1, 1 }, 1 };        // { dg-warning \"missing braces\" }\n+\n+struct S7 { int s[3]; };\n+struct S8 { int a; struct S7 b; };\n+S8 s81 = { 1, { 1, 1, 1 } };        // { dg-warning \"missing braces\" }\n+\n+struct S9 { int s[2]; };\n+struct S10 { struct S9 a; struct S9 b; };\n+S10 s101 = { { 1, 1 }, 1, 1 };      // { dg-warning \"missing braces\" }\n+\n+struct S11 { int s[2]; };\n+struct S12 { struct S11 a; struct S11 b; };\n+S12 s121 = { { 1, 1 }, { 1, 1 } };  // { dg-warning \"missing braces\" }\n+\n+struct S13 { int i; };\n+struct S14 { struct S13 a; };\n+struct S15 { struct S14 b; };\n+S15 s151 = { 1 };                   // { dg-warning \"missing braces\" }"}]}