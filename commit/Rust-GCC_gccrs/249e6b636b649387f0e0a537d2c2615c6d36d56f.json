{"sha": "249e6b636b649387f0e0a537d2c2615c6d36d56f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ5ZTZiNjM2YjY0OTM4N2YwZTBhNTM3ZDJjMjYxNWM2ZDM2ZDU2Zg==", "commit": {"author": {"name": "Casper S. Hornstrup", "email": "chorns@users.sourceforge.net", "date": "2002-11-27T20:04:16Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2002-11-27T20:04:16Z"}, "message": "i386.h (DLL_IMPORT_EXPORT_PREFIX): Define.\n\n        * config/i386/i386.h (DLL_IMPORT_EXPORT_PREFIX): Define.\n        * config/i386/winnt.c (i386_pe_dllexport_name_p): Use\n        DLL_IMPORT_EXPORT_PREFIX, not '@'.\n        (i386_pe_dllimport_name_p): Likewise.\n        (i386_pe_mark_dllexport): Likewise.\n        (i386_pe_mark_dllimport): Likewise.\n        (i386_pe_encode_section_info): Likewise.\n        (i386_pe_strip_name_encoding): Likewise.\n\nFrom-SVN: r59580", "tree": {"sha": "aedcdb0ced570fd6812781bbbbba4970b15e7705", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aedcdb0ced570fd6812781bbbbba4970b15e7705"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/249e6b636b649387f0e0a537d2c2615c6d36d56f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/249e6b636b649387f0e0a537d2c2615c6d36d56f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/249e6b636b649387f0e0a537d2c2615c6d36d56f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/249e6b636b649387f0e0a537d2c2615c6d36d56f/comments", "author": null, "committer": null, "parents": [{"sha": "5a5c00af7d3e89fc51c0ec11de510e3e5aee05a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a5c00af7d3e89fc51c0ec11de510e3e5aee05a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a5c00af7d3e89fc51c0ec11de510e3e5aee05a4"}], "stats": {"total": 84, "additions": 50, "deletions": 34}, "files": [{"sha": "0405ac369986c15c3943bd2bc2203bea4a814fb9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 38, "deletions": 27, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/249e6b636b649387f0e0a537d2c2615c6d36d56f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/249e6b636b649387f0e0a537d2c2615c6d36d56f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=249e6b636b649387f0e0a537d2c2615c6d36d56f", "patch": "@@ -1,3 +1,14 @@\n+2002-11-27  Casper S. Hornstrup  <chorns@users.sourceforge.net>\n+\n+\t* config/i386/i386.h (DLL_IMPORT_EXPORT_PREFIX): Define.\n+\t* config/i386/winnt.c (i386_pe_dllexport_name_p): Use\n+\tDLL_IMPORT_EXPORT_PREFIX, not '@'.\n+\t(i386_pe_dllimport_name_p): Likewise.\n+\t(i386_pe_mark_dllexport): Likewise.\n+\t(i386_pe_mark_dllimport): Likewise.\n+\t(i386_pe_encode_section_info): Likewise.\n+\t(i386_pe_strip_name_encoding): Likewise.\n+\n 2002-11-27  Richard Henderson  <rth@redhat.com>\n \n \t* mkmap-symver.awk (BEGIN): Set sawsymbol false.\n@@ -21,8 +32,8 @@ Wed Nov 27 14:45:46 CET 2002  Jan Hubicka  <jh@suse.cz>\n \t\n 2002-11-26  Hartmut Penner  <hpenner@de.ibm.com>\n \n-        * config/s390/s390.c (390_output_constant_pool): Set alignment \n-        before label in 64 bit mode, behind otherwise.  \n+\t* config/s390/s390.c (390_output_constant_pool): Set alignment \n+\tbefore label in 64 bit mode, behind otherwise.  \n \n 2002-11-26  Richard Henderson  <rth@redhat.com>\n \n@@ -141,25 +152,25 @@ Wed Nov 27 14:45:46 CET 2002  Jan Hubicka  <jh@suse.cz>\n \n 2002-11-25  Aldy Hernandez  <aldyh@redhat.com>\n \n-        * config/rs6000/spe.h (__ev_create_sfix32_fs): Change macro into\n-        new function.\n-        (__ev_create_ufix32_fs): Same.\n-        (__ev_get_sfix32_fs_internal): New.\n-        (__ev_get_sfix32_fs): Define to use function.\n-        (__ev_get_ufix32_fs_internal): New.\n-        (__ev_get_ufix32_fs): Define to use function.\n-        (__ev_get_upper_ufix32_fs): Call __ev_get_ufix32_fs.\n-        (__ev_get_lower_ufix32_fs): Same.\n-        (__ev_get_upper_sfix32_fs): Call __ev_get_sfix32_fs.\n-        (__ev_get_lower_sfix32_fs): Same.\n-        (__ev_set_sfix32_fs_internal): New.\n-        (__ev_set_ufix32_fs_internal): New.\n-        (__ev_set_sfix32_fs): Call __ev_set_sfix32_fs_internal.\n-        (__ev_set_ufix32_fs): Call __ev_set_ufix32_fs_internal.\n-        (__ev_set_upper_sfix32_fs): Call function.\n-        (__ev_set_lower_sfix32_fs): Same.\n-        (__ev_set_upper_ufix32_fs): Same.\n-        (__ev_set_lower_ufix32_fs): Same.\n+\t* config/rs6000/spe.h (__ev_create_sfix32_fs): Change macro into\n+\tnew function.\n+\t(__ev_create_ufix32_fs): Same.\n+\t(__ev_get_sfix32_fs_internal): New.\n+\t(__ev_get_sfix32_fs): Define to use function.\n+\t(__ev_get_ufix32_fs_internal): New.\n+\t(__ev_get_ufix32_fs): Define to use function.\n+\t(__ev_get_upper_ufix32_fs): Call __ev_get_ufix32_fs.\n+\t(__ev_get_lower_ufix32_fs): Same.\n+\t(__ev_get_upper_sfix32_fs): Call __ev_get_sfix32_fs.\n+\t(__ev_get_lower_sfix32_fs): Same.\n+\t(__ev_set_sfix32_fs_internal): New.\n+\t(__ev_set_ufix32_fs_internal): New.\n+\t(__ev_set_sfix32_fs): Call __ev_set_sfix32_fs_internal.\n+\t(__ev_set_ufix32_fs): Call __ev_set_ufix32_fs_internal.\n+\t(__ev_set_upper_sfix32_fs): Call function.\n+\t(__ev_set_lower_sfix32_fs): Same.\n+\t(__ev_set_upper_ufix32_fs): Same.\n+\t(__ev_set_lower_ufix32_fs): Same.\n \n 2002-11-25  Douglas B Rupp  <rupp@gnat.com>\n \n@@ -249,10 +260,10 @@ Wed Nov 27 14:45:46 CET 2002  Jan Hubicka  <jh@suse.cz>\n \n 2002-11-25  Andrew Haley  <aph@redhat.com>\n \n-        * libgcc-std.ver (_Unwind_Find_Enclosing_Function): Add.\n-        * config/ia64/unwind-ia64.c (_Unwind_Find_Enclosing_Function): New.\n-        * unwind-sjlj.c (_Unwind_Find_Enclosing_Function): Likewise.\n-        * unwind-dw2.c (_Unwind_Find_Enclosing_Function): Likewise.\n+\t* libgcc-std.ver (_Unwind_Find_Enclosing_Function): Add.\n+\t* config/ia64/unwind-ia64.c (_Unwind_Find_Enclosing_Function): New.\n+\t* unwind-sjlj.c (_Unwind_Find_Enclosing_Function): Likewise.\n+\t* unwind-dw2.c (_Unwind_Find_Enclosing_Function): Likewise.\n \n 2002-11-24  Kazu Hirata  <kazu@cs.umass.edu>\n \n@@ -303,7 +314,7 @@ Wed Nov 27 14:45:46 CET 2002  Jan Hubicka  <jh@suse.cz>\n \n 2002-11-22  Dale Johannesen  <dalej@apple.com>\n \n-        * toplev.c (rest_of_compilation):  Fix comments.\n+\t* toplev.c (rest_of_compilation):  Fix comments.\n \n 2002-11-22  Geoffrey Keating  <geoffk@apple.com>\n \n@@ -529,7 +540,7 @@ Thu Nov 21 23:52:04 CET 2002  Jan Hubicka  <jH@suse.cz>\n \tdirectory.\n \t(MULTILIB_DIRNAMES): Create target dependent directory\n \t'normal'.\n-        (MULTILIB_EXCEPTIONS): Don't turn on -mn on H8/300.\n+\t(MULTILIB_EXCEPTIONS): Don't turn on -mn on H8/300.\n \t* doc/invoke.texi (gccoptlist): Describe the new switch -mn.\n \n Tue Nov 19 23:50:56 CET 2002  Jan Hubicka  <jh@suse.cz>"}, {"sha": "287cec3e5039f082b0d3a0b79fe9aea37c770777", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/249e6b636b649387f0e0a537d2c2615c6d36d56f/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/249e6b636b649387f0e0a537d2c2615c6d36d56f/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=249e6b636b649387f0e0a537d2c2615c6d36d56f", "patch": "@@ -3444,6 +3444,9 @@ enum fp_cw_mode {FP_CW_STORED, FP_CW_UNINITIALIZED, FP_CW_ANY};\n \n \f\n #define MACHINE_DEPENDENT_REORG(X) x86_machine_dependent_reorg(X)\n+\n+#define DLL_IMPORT_EXPORT_PREFIX '@'\n+\n /*\n Local variables:\n version-control: t"}, {"sha": "00b3dfd0442184d1a5cd35090f91170cf60e4c4d", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/249e6b636b649387f0e0a537d2c2615c6d36d56f/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/249e6b636b649387f0e0a537d2c2615c6d36d56f/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=249e6b636b649387f0e0a537d2c2615c6d36d56f", "patch": "@@ -199,7 +199,8 @@ int\n i386_pe_dllexport_name_p (symbol)\n      const char *symbol;\n {\n-  return symbol[0] == '@' && symbol[1] == 'e' && symbol[2] == '.';\n+  return symbol[0] == DLL_IMPORT_EXPORT_PREFIX\n+         && symbol[1] == 'e' && symbol[2] == '.';\n }\n \n /* Return nonzero if SYMBOL is marked as being dllimport'd.  */\n@@ -208,7 +209,8 @@ int\n i386_pe_dllimport_name_p (symbol)\n      const char *symbol;\n {\n-  return symbol[0] == '@' && symbol[1] == 'i' && symbol[2] == '.';\n+  return symbol[0] == DLL_IMPORT_EXPORT_PREFIX\n+         && symbol[1] == 'i' && symbol[2] == '.';\n }\n \n /* Mark a DECL as being dllexport'd.\n@@ -237,7 +239,7 @@ i386_pe_mark_dllexport (decl)\n     return; /* already done */\n \n   newname = alloca (strlen (oldname) + 4);\n-  sprintf (newname, \"@e.%s\", oldname);\n+  sprintf (newname, \"%ce.%s\", DLL_IMPORT_EXPORT_PREFIX, oldname);\n \n   /* We pass newname through get_identifier to ensure it has a unique\n      address.  RTL processing can sometimes peek inside the symbol ref\n@@ -312,7 +314,7 @@ i386_pe_mark_dllimport (decl)\n     }\n \n   newname = alloca (strlen (oldname) + 11);\n-  sprintf (newname, \"@i._imp__%s\", oldname);\n+  sprintf (newname, \"%ci._imp__%s\", DLL_IMPORT_EXPORT_PREFIX, oldname);\n \n   /* We pass newname through get_identifier to ensure it has a unique\n      address.  RTL processing can sometimes peek inside the symbol ref\n@@ -399,8 +401,8 @@ i386_pe_encode_section_info (decl, first)\n     i386_pe_mark_dllimport (decl);\n   /* It might be that DECL has already been marked as dllimport, but a\n      subsequent definition nullified that.  The attribute is gone but\n-     DECL_RTL still has @i._imp__foo.  We need to remove that. Ditto\n-     for the DECL_NON_ADDR_CONST_P flag.  */\n+     DECL_RTL still has (DLL_IMPORT_EXPORT_PREFIX)i._imp__foo.  We need\n+     to remove that. Ditto for the DECL_NON_ADDR_CONST_P flag.  */\n   else if ((TREE_CODE (decl) == FUNCTION_DECL\n \t    || TREE_CODE (decl) == VAR_DECL)\n \t   && DECL_RTL (decl) != NULL_RTX\n@@ -428,7 +430,7 @@ const char *\n i386_pe_strip_name_encoding (str)\n      const char *str;\n {\n-  if (*str == '@')\n+  if (*str == DLL_IMPORT_EXPORT_PREFIX)\n     str += 3;\n   if (*str == '*')\n     str += 1;"}]}