{"sha": "3684b02efb8df49a5795034657353d875333c86e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzY4NGIwMmVmYjhkZjQ5YTU3OTUwMzQ2NTczNTNkODc1MzMzYzg2ZQ==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2016-05-06T09:41:57Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2016-05-06T09:41:57Z"}, "message": "re PR target/54089 ([SH] Refactor shift patterns)\n\ngcc/\n\tPR target/54089\n\t* config/sh/sh.md (*rotcr): Add another variant.\n\ngcc/testsuite/\n\tPR target/54089\n\t* gcc.target/sh/pr54089-1.c (test_24): Add new sub-test.\n\nFrom-SVN: r235950", "tree": {"sha": "3d5c16253a3fbd64fcd21d3242460c274bdeba55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d5c16253a3fbd64fcd21d3242460c274bdeba55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3684b02efb8df49a5795034657353d875333c86e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3684b02efb8df49a5795034657353d875333c86e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3684b02efb8df49a5795034657353d875333c86e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3684b02efb8df49a5795034657353d875333c86e/comments", "author": null, "committer": null, "parents": [{"sha": "498988ad6a960bf75caa9c88bbeb0b981f2d0dc9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/498988ad6a960bf75caa9c88bbeb0b981f2d0dc9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/498988ad6a960bf75caa9c88bbeb0b981f2d0dc9"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "951ae2cc5dc18c42f45aa433869ce03a49524552", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3684b02efb8df49a5795034657353d875333c86e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3684b02efb8df49a5795034657353d875333c86e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3684b02efb8df49a5795034657353d875333c86e", "patch": "@@ -1,3 +1,8 @@\n+2016-05-06  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\tPR target/54089\n+\t* config/sh/sh.md (*rotcr): Add another variant.\n+\n 2016-05-06  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/70931"}, {"sha": "0ab76b562b944269f632dd101fd39456964aab09", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3684b02efb8df49a5795034657353d875333c86e/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3684b02efb8df49a5795034657353d875333c86e/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=3684b02efb8df49a5795034657353d875333c86e", "patch": "@@ -3359,6 +3359,22 @@\n   DONE;\n })\n \n+(define_insn_and_split \"*rotcr\"\n+  [(set (match_operand:SI 0 \"arith_reg_dest\")\n+\t(ior:SI (lshiftrt:SI (match_operand:SI 1 \"arith_reg_operand\")\n+\t\t\t     (const_int 1))\n+\t\t(const_int -2147483648))) ;; 0xffffffff80000000\n+   (clobber (reg:SI T_REG))]\n+  \"TARGET_SH1\"\n+  \"#\"\n+  \"&& can_create_pseudo_p ()\"\n+  [(const_int 0)]\n+{\n+  emit_insn (gen_sett ());\n+  emit_insn (gen_rotcr (operands[0], operands[1], get_t_reg_rtx ()));\n+  DONE;\n+})\n+\n ;; rotcr combine patterns for rotating in the negated T_REG value.\n (define_insn_and_split \"*rotcr_neg_t\"\n   [(set (match_operand:SI 0 \"arith_reg_dest\")"}, {"sha": "17773ced6cf8517e12c8a7028c1250ab900ed517", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3684b02efb8df49a5795034657353d875333c86e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3684b02efb8df49a5795034657353d875333c86e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3684b02efb8df49a5795034657353d875333c86e", "patch": "@@ -1,3 +1,8 @@\n+2016-05-06  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\tPR target/54089\n+\t* gcc.target/sh/pr54089-1.c (test_24): Add new sub-test.\n+\n 2016-05-06  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/70931"}, {"sha": "8b6a729f64cc2eccfae46f9441cf38b50e3031a0", "filename": "gcc/testsuite/gcc.target/sh/pr54089-1.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3684b02efb8df49a5795034657353d875333c86e/gcc%2Ftestsuite%2Fgcc.target%2Fsh%2Fpr54089-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3684b02efb8df49a5795034657353d875333c86e/gcc%2Ftestsuite%2Fgcc.target%2Fsh%2Fpr54089-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fsh%2Fpr54089-1.c?ref=3684b02efb8df49a5795034657353d875333c86e", "patch": "@@ -1,7 +1,8 @@\n /* Check that the rotcr instruction is generated.  */\n /* { dg-do compile }  */\n /* { dg-options \"-O2\" } */\n-/* { dg-final { scan-assembler-times \"rotcr\" 24 } } */\n+/* { dg-final { scan-assembler-times \"rotcr\" 25 } } */\n+/* { dg-final { scan-assembler-times \"sett\" 1 } } */\n /* { dg-final { scan-assembler-times \"shll\\t\" 1 } } */\n /* { dg-final { scan-assembler-not \"and\\t#1\" } }  */\n /* { dg-final { scan-assembler-not \"cmp/pl\" } }  */\n@@ -173,3 +174,9 @@ test_23 (unsigned int a, int b, int c)\n   bool r = b != c;\n   return ((a >> 31) | (r << 31));\n }\n+\n+unsigned int\n+test_24 (unsigned int a)\n+{\n+  return (a >> 1) | (1 << 31);\n+}"}]}