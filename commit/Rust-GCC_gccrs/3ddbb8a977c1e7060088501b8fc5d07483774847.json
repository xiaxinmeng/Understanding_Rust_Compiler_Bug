{"sha": "3ddbb8a977c1e7060088501b8fc5d07483774847", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RkYmI4YTk3N2MxZTcwNjAwODg1MDFiOGZjNWQwNzQ4Mzc3NDg0Nw==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2002-03-24T21:01:00Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2002-03-24T21:01:00Z"}, "message": "gcc.c (cpp_options): Pass -MD through as -MD not -M -MF.\n\n\tpreprocessor/3951\n\t* gcc.c (cpp_options): Pass -MD through as -MD not -M -MF.\n\t* cppinit.c (cpp_handle_option): Set no_ouput if -MD or -MMD.\n\t(init_dependency_output): Don't make no_output decision here.\n\nFrom-SVN: r51272", "tree": {"sha": "93cafea773e541b0d1ffd779009946f4538c7e23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/93cafea773e541b0d1ffd779009946f4538c7e23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ddbb8a977c1e7060088501b8fc5d07483774847", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ddbb8a977c1e7060088501b8fc5d07483774847", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ddbb8a977c1e7060088501b8fc5d07483774847", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ddbb8a977c1e7060088501b8fc5d07483774847/comments", "author": null, "committer": null, "parents": [{"sha": "740b77b675fc26c64e5e305992a199585e703a2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/740b77b675fc26c64e5e305992a199585e703a2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/740b77b675fc26c64e5e305992a199585e703a2d"}], "stats": {"total": 27, "additions": 15, "deletions": 12}, "files": [{"sha": "f8c4710d636ff584b0944e3e08dc18c15eadb7cd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ddbb8a977c1e7060088501b8fc5d07483774847/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ddbb8a977c1e7060088501b8fc5d07483774847/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3ddbb8a977c1e7060088501b8fc5d07483774847", "patch": "@@ -1,3 +1,10 @@\n+2002-03-24  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\n+\tpreprocessor/3951\n+\t* gcc.c (cpp_options): Pass -MD through as -MD not -M -MF.\t\n+\t* cppinit.c (cpp_handle_option): Set no_ouput if -MD or -MMD.\n+\t(init_dependency_output): Don't make no_output decision here.\n+\n 2002-03-24  Andrew Cagney  <ac131313@redhat.com>\n \n \t* stmt.c (check_for_full_enumeration_handling): Remove tests of"}, {"sha": "8d4e0a706280d09178711ce66573d7c34a08931a", "filename": "gcc/cppinit.c", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ddbb8a977c1e7060088501b8fc5d07483774847/gcc%2Fcppinit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ddbb8a977c1e7060088501b8fc5d07483774847/gcc%2Fcppinit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppinit.c?ref=3ddbb8a977c1e7060088501b8fc5d07483774847", "patch": "@@ -1574,10 +1574,16 @@ cpp_handle_option (pfile, argc, argv, ignore)\n \t  CPP_OPTION (pfile, print_deps_missing_files) = 1;\n \t  break;\n \tcase OPT_M:\n+\t  /* When doing dependencies with -M or -MM, suppress normal\n+\t     preprocessed output, but still do -dM etc. as software\n+\t     depends on this.  Preprocessed output occurs if -MD, -MMD\n+\t     or environment var dependency generation is used.  */\n \t  CPP_OPTION (pfile, print_deps) = 2;\n+\t  CPP_OPTION (pfile, no_output) = 1;\n \t  break;\n \tcase OPT_MM:\n \t  CPP_OPTION (pfile, print_deps) = 1;\n+\t  CPP_OPTION (pfile, no_output) = 1;\n \t  break;\n \tcase OPT_MF:\n \t  CPP_OPTION (pfile, deps_file) = arg;\n@@ -1591,12 +1597,6 @@ cpp_handle_option (pfile, argc, argv, ignore)\n \t  deps_add_target (pfile->deps, arg, opt_code == OPT_MQ);\n \t  break;\n \n-\t  /* -MD and -MMD for cpp0 are deprecated and undocumented\n-\t     (use -M or -MM with -MF instead), and probably should be\n-\t     removed with the next major GCC version.  For the moment\n-\t     we allow these for the benefit of Automake 1.4, which\n-\t     uses these when dependency tracking is enabled.  Automake\n-\t     1.5 will fix this.  */\n \tcase OPT_MD:\n \t  CPP_OPTION (pfile, print_deps) = 2;\n \t  CPP_OPTION (pfile, deps_file) = arg;\n@@ -1890,10 +1890,6 @@ init_dependency_output (pfile)\n     /* If -M or -MM was seen without -MF, default output to wherever\n        was specified with -o.  out_fname is non-NULL here.  */\n     CPP_OPTION (pfile, deps_file) = CPP_OPTION (pfile, out_fname);\n-\n-  /* When doing dependencies, suppress normal preprocessed output.\n-     Still do -dM, -dI etc. as e.g. glibc depends on this.  */\n-  CPP_OPTION (pfile, no_output) = 1;\n }\n \n /* Handle --help output.  */"}, {"sha": "5787b0e05bf02dfa7d7391db13b2c8c23460eb45", "filename": "gcc/gcc.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ddbb8a977c1e7060088501b8fc5d07483774847/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ddbb8a977c1e7060088501b8fc5d07483774847/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=3ddbb8a977c1e7060088501b8fc5d07483774847", "patch": "@@ -664,8 +664,8 @@ static const char *trad_capable_cpp =\n static const char *cpp_unique_options =\n \"%{C:%{!E:%eGNU C does not support -C without using -E}}\\\n  %{!Q:-quiet} %{nostdinc*} %{C} %{v} %{I*} %{P} %{$} %I\\\n- %{MD:-M -MF %W{!o: %b.d}%W{o*:%.d%*}}\\\n- %{MMD:-MM -MF %W{!o: %b.d}%W{o*:%.d%*}}\\\n+ %{MD:-MD %W{!o: %b.d}%W{o*:%.d%*}}\\\n+ %{MMD:-MMD %W{!o: %b.d}%W{o*:%.d%*}}\\\n  %{M} %{MM} %W{MF*} %{MG} %{MP} %{MQ*} %{MT*}\\\n  %{!E:%{!M:%{!MM:%{MD|MMD:%{o*:-MQ %*}}}}}\\\n  %{!no-gcc:-D__GNUC__=%v1 -D__GNUC_MINOR__=%v2 -D__GNUC_PATCHLEVEL__=%v3}\\"}]}