{"sha": "f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjJmNTQ3MmYwNjI0YTY3YzJiOGJkN2RkYWQ5ZDA1NDYzZGVkNDEzMQ==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@fillmore.constant.com", "date": "2001-06-27T01:07:29Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-06-27T01:07:29Z"}, "message": "streambuf.tcc (__copy_streambufs): Don't set eofbit.\n\n\n2001-06-26  Benjamin Kosnik  <bkoz@fillmore.constant.com>\n\t                     <vakatov@ncbi.nlm.nih.gov>\n\n\tlibstdc++/3272\n\t* include/bits/streambuf.tcc (__copy_streambufs): Don't set eofbit.\n\t* testsuite/27_io/ostream_inserter_other.cc (test04): Add test.\n\t* testsuite/27_io/istream_extractor_other.cc: Fix.\n\nFrom-SVN: r43602", "tree": {"sha": "557dc8c713b8270838fc406f759ba757485c4185", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/557dc8c713b8270838fc406f759ba757485c4185"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/comments", "author": null, "committer": null, "parents": [{"sha": "e979f9e88c46abb7c45dd2dacf79085a26d48301", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e979f9e88c46abb7c45dd2dacf79085a26d48301", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e979f9e88c46abb7c45dd2dacf79085a26d48301"}], "stats": {"total": 37, "additions": 28, "deletions": 9}, "files": [{"sha": "2bb5f013c266c80c58804de2479b8072e47e130e", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "patch": "@@ -1,3 +1,11 @@\n+2001-06-26  Benjamin Kosnik  <bkoz@fillmore.constant.com>\n+\t                     <vakatov@ncbi.nlm.nih.gov>\n+\n+\tlibstdc++/3272\n+\t* include/bits/streambuf.tcc (__copy_streambufs): Don't set eofbit.\n+\t* testsuite/27_io/ostream_inserter_other.cc (test04): Add test.\n+\t* testsuite/27_io/istream_extractor_other.cc: Fix.\n+\t\n 2001-06-26  Zoltan Hidvegi  <hzoli@austin.ibm.com>\n \n \t* acinclude.m4 (glibcpp_toolexeclibdir): Make multilib safe."}, {"sha": "a21ad1cb9d74350553fc58898c7dee5d4e73fd45", "filename": "libstdc++-v3/include/bits/streambuf.tcc", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstreambuf.tcc?ref=f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "patch": "@@ -206,12 +206,8 @@ namespace std {\n \t    __sbin->_M_in_cur_move(__xtrct);\n \t    if (__xtrct == __bufsize)\n \t      {\n-\t\tint_type __c = __sbin->sgetc();\n-\t\tif (__c == _Traits::eof())\n-\t\t  {\n-\t\t    __ios.setstate(ios_base::eofbit);\n-\t\t    break;\n-\t\t  }\n+\t\tif (__sbin->sgetc() == _Traits::eof())\n+\t\t  break;\n \t\t__bufsize = __sbin->in_avail();\n \t      }\n \t    else"}, {"sha": "c7053d1daad007238933eea6aaf29c15f36a87c1", "filename": "libstdc++-v3/testsuite/27_io/istream_extractor_other.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_extractor_other.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_extractor_other.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_extractor_other.cc?ref=f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "patch": "@@ -128,9 +128,9 @@ bool test01() {\n   state1 = is_04.rdstate();\n   is_04 >> &isbuf_03;   \n   state2 = is_04.rdstate();\n-  VERIFY( state1 != state2 );\n+  VERIFY( state1 == state2 );\n   VERIFY( !static_cast<bool>(state2 & statefail) );\n-  VERIFY( state2 == stateeof );\n+  VERIFY( state2 != stateeof );\n   strtmp = isbuf_03.str();\n   VERIFY( strtmp == str_02 ); // as only an \"in\" buffer\n   VERIFY( isbuf_03.sgetc() == 'a' );"}, {"sha": "6dfcfc7cdc78b282a1d517c020cf990d88ff6949", "filename": "libstdc++-v3/testsuite/27_io/ostream_inserter_other.cc", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fostream_inserter_other.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2f5472f0624a67c2b8bd7ddad9d05463ded4131/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fostream_inserter_other.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fostream_inserter_other.cc?ref=f2f5472f0624a67c2b8bd7ddad9d05463ded4131", "patch": "@@ -1,7 +1,7 @@\n // 1999-08-16 bkoz\n // 1999-11-01 bkoz\n \n-// Copyright (C) 1999, 2000 Free Software Foundation\n+// Copyright (C) 1999, 2000, 2001 Free Software Foundation\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -134,6 +134,21 @@ test03(void)\n   return 0;\n }\n \n+// libstdc++/3272\n+void test04()\n+{\n+  using namespace std;\n+  bool test = true;\n+  istringstream istr(\"inside betty carter\");\n+  ostringstream ostr;\n+  ostr << istr.rdbuf() << endl;\n+\n+  if (ostr.rdstate() & ios_base::eofbit) \n+    test = false;\n+\n+  VERIFY( test );\n+}\n+\n int \n main()\n {"}]}