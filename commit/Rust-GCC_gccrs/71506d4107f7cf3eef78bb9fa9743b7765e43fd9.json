{"sha": "71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzE1MDZkNDEwN2Y3Y2YzZWVmNzhiYjlmYTk3NDNiNzc2NWU0M2ZkOQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2015-06-29T22:02:08Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2015-06-29T22:02:08Z"}, "message": "re PR c++/65977 (Constexpr should be allowed in declaration of friend template specialization)\n\n/cp\n2015-06-29  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/65977\n\t* decl.c (grokfndecl): Allow constexpr declarations of friend\n\ttemplate specializations.\n\n/testsuite\n2015-06-29  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/65977\n\t* g++.dg/cpp0x/constexpr-friend-3.C: New.\n\t* g++.dg/cpp0x/constexpr-friend-2.C: Adjust.\n\nFrom-SVN: r225148", "tree": {"sha": "5ace469b20bf63e5cea574c3b8fbc3b4c957673d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ace469b20bf63e5cea574c3b8fbc3b4c957673d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/comments", "author": null, "committer": null, "parents": [{"sha": "9b552079a19f94b589458f8bdc62a15a27523748", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b552079a19f94b589458f8bdc62a15a27523748", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b552079a19f94b589458f8bdc62a15a27523748"}], "stats": {"total": 50, "additions": 40, "deletions": 10}, "files": [{"sha": "843b7eda1767909dd4269b060166c00785267228", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "patch": "@@ -1,3 +1,9 @@\n+2015-06-29  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/65977\n+\t* decl.c (grokfndecl): Allow constexpr declarations of friend\n+\ttemplate specializations.\n+\n 2015-06-29  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR fortran/66605"}, {"sha": "5a644d7e2f4d3561caa45ffbabcc3370fb55cd01", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "patch": "@@ -7738,15 +7738,12 @@ grokfndecl (tree ctype,\n \t    }\n \n \t  if (inlinep & 1)\n-\t    error (\"%<inline%> is not allowed in declaration of friend \"\n-\t\t   \"template specialization %qD\",\n-\t\t   decl);\n-\t  if (inlinep & 2)\n-\t    error (\"%<constexpr%> is not allowed in declaration of friend \"\n-\t\t   \"template specialization %qD\",\n-\t\t   decl);\n-\t  if (inlinep)\n-\t    return NULL_TREE;\n+\t    {\n+\t      error (\"%<inline%> is not allowed in declaration of friend \"\n+\t\t     \"template specialization %qD\",\n+\t\t     decl);\n+\t      return NULL_TREE;\n+\t    }\n \t}\n     }\n "}, {"sha": "9c2f20b2c72db1bdb7f9242cfd126863eb97041b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "patch": "@@ -1,3 +1,9 @@\n+2015-06-29  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/65977\n+\t* g++.dg/cpp0x/constexpr-friend-3.C: New.\n+\t* g++.dg/cpp0x/constexpr-friend-2.C: Adjust.\n+\n 2015-06-29  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR fortran/66605"}, {"sha": "b2ddc218d4ab018c3eeda97755b4a1b422053696", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-friend-2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-friend-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-friend-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-friend-2.C?ref=71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "patch": "@@ -3,5 +3,5 @@\n template<typename T> void f(T);\n \n template <class T> class A {\n-  friend constexpr void f<>(int);  // { dg-error \"'constexpr' is not allowed\" }\n+  friend constexpr void f<>(int);\n };"}, {"sha": "aec38eb68ff83b756c9b3ee22fcbfa031b05212e", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-friend-3.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-friend-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71506d4107f7cf3eef78bb9fa9743b7765e43fd9/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-friend-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-friend-3.C?ref=71506d4107f7cf3eef78bb9fa9743b7765e43fd9", "patch": "@@ -0,0 +1,21 @@\n+// PR c++/65977\n+// { dg-do compile { target c++11 } }\n+\n+template<__SIZE_TYPE__>\n+class bitset;\n+\n+template<__SIZE_TYPE__ N>\n+constexpr bool operator==(const bitset<N>&, const bitset<N>&) noexcept;\n+\n+template<__SIZE_TYPE__ N>\n+class bitset\n+{\n+  friend constexpr bool operator== <>(const bitset<N>&,\n+\t\t\t\t      const bitset<N>&) noexcept;\n+};\n+\n+template<__SIZE_TYPE__ N>\n+constexpr bool operator==(const bitset<N>&, const bitset<N>&) noexcept\n+{\n+  return true;\n+}"}]}