{"sha": "e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b", "node_id": "C_kwDOANBUbNoAKGU2YzA0YWM5ZmQ5YzdiNTUzOGE2ZjVmNDVlNWY5ZGMyMjk1NDc2NGI", "commit": {"author": {"name": "Dimitar Dimitrov", "email": "dimitar@dinux.eu", "date": "2022-04-03T10:41:04Z"}, "committer": {"name": "Dimitar Dimitrov", "email": "dimitar@dinux.eu", "date": "2022-05-23T15:44:38Z"}, "message": "testsuite: mallign: Handle word size of 1 byte\n\nThis patch fixes a spurious warning for the pru-unknown-elf target:\n  gcc/testsuite/gcc.dg/mallign.c:12:27: warning: ignoring return value of 'malloc' declared with attribute 'warn_unused_result' [-Wunused-result]\n\nFor 8-bit targets the resulting mask ignores all bits in the value\nreturned by malloc.  Fix by first checking the target word size.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.dg/mallign.c: Skip check if sizeof(word)==1.\n\nSigned-off-by: Dimitar Dimitrov <dimitar@dinux.eu>", "tree": {"sha": "d6b6384c4188f0a30ef14c3d7a1533a76441008a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6b6384c4188f0a30ef14c3d7a1533a76441008a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b/comments", "author": null, "committer": null, "parents": [{"sha": "b7feb71d45e4cd894d7706c21a21a3871070d098", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7feb71d45e4cd894d7706c21a21a3871070d098", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7feb71d45e4cd894d7706c21a21a3871070d098"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "9a18a00c3b08c03838fc2c21d86d692250a364e5", "filename": "gcc/testsuite/gcc.dg/mallign.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b/gcc%2Ftestsuite%2Fgcc.dg%2Fmallign.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b/gcc%2Ftestsuite%2Fgcc.dg%2Fmallign.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fmallign.c?ref=e6c04ac9fd9c7b5538a6f5f45e5f9dc22954764b", "patch": "@@ -9,7 +9,7 @@ typedef int word __attribute__((mode(word)));\n \n int main()\n {\n-    if ((__UINTPTR_TYPE__)malloc (1) & (sizeof(word)-1))\n+    if ((sizeof(word)>1) && ((__UINTPTR_TYPE__)malloc (1) & (sizeof(word)-1)))\n \tabort ();\n     return 0;\n }                                                                              "}]}