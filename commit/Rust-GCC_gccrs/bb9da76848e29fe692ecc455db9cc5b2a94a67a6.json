{"sha": "bb9da76848e29fe692ecc455db9cc5b2a94a67a6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmI5ZGE3Njg0OGUyOWZlNjkyZWNjNDU1ZGI5Y2M1YjJhOTRhNjdhNg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-03-24T12:28:21Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-03-24T12:28:21Z"}, "message": "(process_command): Instead of hardcoding non-empty switches_need_spaces to turn on \"o\" and \"L\"...\n\n(process_command): Instead of hardcoding non-empty\nswitches_need_spaces to turn on \"o\" and \"L\", make the string contain\nthe switches that need the spaces.\n\nFrom-SVN: r11609", "tree": {"sha": "86453af677d78450537df2239aa1b8d7e28847a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86453af677d78450537df2239aa1b8d7e28847a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bb9da76848e29fe692ecc455db9cc5b2a94a67a6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9da76848e29fe692ecc455db9cc5b2a94a67a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb9da76848e29fe692ecc455db9cc5b2a94a67a6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb9da76848e29fe692ecc455db9cc5b2a94a67a6/comments", "author": null, "committer": null, "parents": [{"sha": "4498659c93d3b347a8d34000c7371ef5facebab4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4498659c93d3b347a8d34000c7371ef5facebab4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4498659c93d3b347a8d34000c7371ef5facebab4"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "4252ed6ea84e0b082ae695242b9969b5498db908", "filename": "gcc/gcc.c", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bb9da76848e29fe692ecc455db9cc5b2a94a67a6/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bb9da76848e29fe692ecc455db9cc5b2a94a67a6/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=bb9da76848e29fe692ecc455db9cc5b2a94a67a6", "patch": "@@ -502,8 +502,8 @@ proper position among the other output files.  */\n   \"%{!shared:%{pg:gcrt0%O%s}%{!pg:%{p:mcrt0%O%s}%{!p:crt0%O%s}}}\"\n #endif\n \n-/* config.h can define SWITCHES_NEED_SPACES to control passing -o and -L.\n-   Make the string nonempty to require spaces there.  */\n+/* config.h can define SWITCHES_NEED_SPACES to control which options\n+   require spaces between the option and the argument.  */\n #ifndef SWITCHES_NEED_SPACES\n #define SWITCHES_NEED_SPACES \"\"\n #endif\n@@ -2946,11 +2946,15 @@ process_command (argc, argv)\n \t      /* Null-terminate the vector.  */\n \t      switches[n_switches].args[j] = 0;\n \t    }\n-\t  else if (*switches_need_spaces != 0 && (c == 'o' || c == 'L'))\n+\t  else if (index (switches_need_spaces, c))\n \t    {\n-\t      /* On some systems, ld cannot handle -o or -L without space.\n-\t\t So split the -o or -L from its argument.  */\n-\t      switches[n_switches].part1 = (c == 'o' ? \"o\" : \"L\");\n+\t      /* On some systems, ld cannot handle some options without\n+\t\t a space.  So split the option from its argument.  */\n+\t      char *part1 = (char *) xmalloc (2);\n+\t      part1[0] = c;\n+\t      part1[1] = '\\0';\n+\t      \n+\t      switches[n_switches].part1 = part1;\n \t      switches[n_switches].args = (char **) xmalloc (2 * sizeof (char *));\n \t      switches[n_switches].args[0] = xmalloc (strlen (p));\n \t      strcpy (switches[n_switches].args[0], &p[1]);"}]}