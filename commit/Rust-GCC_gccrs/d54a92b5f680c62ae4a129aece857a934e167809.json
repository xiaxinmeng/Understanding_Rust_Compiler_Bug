{"sha": "d54a92b5f680c62ae4a129aece857a934e167809", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU0YTkyYjVmNjgwYzYyYWU0YTEyOWFlY2U4NTdhOTM0ZTE2NzgwOQ==", "commit": {"author": {"name": "Anatoly Sokolov", "email": "aesok@post.ru", "date": "2007-03-31T09:03:10Z"}, "committer": {"name": "Anatoly Sokolov", "email": "aesok@gcc.gnu.org", "date": "2007-03-31T09:03:10Z"}, "message": "predicates.md (even_register_operand, [...]): New predicates.\n\n\t* config/avr/predicates.md (even_register_operand, \n\todd_register_operand): New predicates.\n\t* config/avr/avr.md (movw peephole2): New.\n\t(movw_r peephole2): New.\n\nFrom-SVN: r123379", "tree": {"sha": "fea849a81db9d66ed3a5e9dc2ead056424f91118", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fea849a81db9d66ed3a5e9dc2ead056424f91118"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d54a92b5f680c62ae4a129aece857a934e167809", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d54a92b5f680c62ae4a129aece857a934e167809", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d54a92b5f680c62ae4a129aece857a934e167809", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d54a92b5f680c62ae4a129aece857a934e167809/comments", "author": null, "committer": null, "parents": [{"sha": "89de14b25c08bd30d4ab854810a5a150483db53c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89de14b25c08bd30d4ab854810a5a150483db53c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89de14b25c08bd30d4ab854810a5a150483db53c"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "ce64d10b0ff7d1369eecd4e616ec4c3056ef5b80", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54a92b5f680c62ae4a129aece857a934e167809/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54a92b5f680c62ae4a129aece857a934e167809/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d54a92b5f680c62ae4a129aece857a934e167809", "patch": "@@ -1,3 +1,10 @@\n+2007-03-31  Anatoly Sokolov <aesok@post.ru>\n+\n+\t* config/avr/predicates.md (even_register_operand, \n+\todd_register_operand): New predicates.\n+\t* config/avr/avr.md (movw peephole2): New.\n+\t(movw_r peephole2): New.\n+\n 2007-03-30  Rafael Avila de Espindola  <espindola@google.com>\n \n \t* tree.h (get_signed_or_unsigned_type): New."}, {"sha": "0eb88491117f350876687c3d382d54be4bd9d72c", "filename": "gcc/config/avr/avr.md", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54a92b5f680c62ae4a129aece857a934e167809/gcc%2Fconfig%2Favr%2Favr.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54a92b5f680c62ae4a129aece857a934e167809/gcc%2Fconfig%2Favr%2Favr.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.md?ref=d54a92b5f680c62ae4a129aece857a934e167809", "patch": "@@ -283,6 +283,34 @@\n   [(set_attr \"length\" \"2,6,7,2,6,5,2\")\n    (set_attr \"cc\" \"none,clobber,clobber,none,clobber,none,none\")])\n \n+(define_peephole2 ; movw\n+  [(set (match_operand:QI 0 \"even_register_operand\" \"\")\n+        (match_operand:QI 1 \"even_register_operand\" \"\"))\n+   (set (match_operand:QI 2 \"odd_register_operand\" \"\")\n+        (match_operand:QI 3 \"odd_register_operand\" \"\"))]\n+  \"(AVR_HAVE_MOVW\n+    && REGNO (operands[0]) == REGNO (operands[2]) - 1\n+    && REGNO (operands[1]) == REGNO (operands[3]) - 1)\"\n+  [(set (match_dup 4) (match_dup 5))]\n+  {\n+    operands[4] = gen_rtx_REG (HImode, REGNO (operands[0]));\n+    operands[5] = gen_rtx_REG (HImode, REGNO (operands[1]));\n+  })\n+\n+(define_peephole2 ; movw_r\n+  [(set (match_operand:QI 0 \"odd_register_operand\" \"\")\n+        (match_operand:QI 1 \"odd_register_operand\" \"\"))\n+   (set (match_operand:QI 2 \"even_register_operand\" \"\")\n+        (match_operand:QI 3 \"even_register_operand\" \"\"))]\n+  \"(AVR_HAVE_MOVW\n+    && REGNO (operands[2]) == REGNO (operands[0]) - 1\n+    && REGNO (operands[3]) == REGNO (operands[1]) - 1)\"\n+  [(set (match_dup 4) (match_dup 5))]\n+  {\n+    operands[4] = gen_rtx_REG (HImode, REGNO (operands[2]));\n+    operands[5] = gen_rtx_REG (HImode, REGNO (operands[3]));\n+  })\n+\n ;;==========================================================================\n ;; move double word (32 bit)\n "}, {"sha": "291bd85bbe7890aa00a6a142cd92f6ac7d419812", "filename": "gcc/config/avr/predicates.md", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54a92b5f680c62ae4a129aece857a934e167809/gcc%2Fconfig%2Favr%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54a92b5f680c62ae4a129aece857a934e167809/gcc%2Fconfig%2Favr%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Fpredicates.md?ref=d54a92b5f680c62ae4a129aece857a934e167809", "patch": "@@ -28,6 +28,16 @@\n   (and (match_code \"reg\")\n        (match_test \"REGNO (op) >= 16 && REGNO (op) <= 31\")))\n \n+(define_predicate \"even_register_operand\"\n+  (and (match_code \"reg\")\n+       (and (match_test \"REGNO (op) <= 31\")\n+            (match_test \"(REGNO (op) & 1) == 0\"))))\n+\n+(define_predicate \"odd_register_operand\"\n+  (and (match_code \"reg\")\n+       (and (match_test \"REGNO (op) <= 31\")\n+            (match_test \"(REGNO (op) & 1) != 0\"))))\n+\n ;; SP register.\n (define_predicate \"stack_register_operand\"\n   (and (match_code \"reg\")"}]}