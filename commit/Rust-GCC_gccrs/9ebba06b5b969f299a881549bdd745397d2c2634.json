{"sha": "9ebba06b5b969f299a881549bdd745397d2c2634", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWViYmEwNmI1Yjk2OWYyOTlhODgxNTQ5YmRkNzQ1Mzk3ZDJjMjYzNA==", "commit": {"author": {"name": "Claudiu Zissulescu", "email": "claziss@gmail.com", "date": "2020-02-13T10:32:05Z"}, "committer": {"name": "Claudiu Zissulescu", "email": "claziss@gmail.com", "date": "2020-02-13T10:49:12Z"}, "message": "[ARC] Deprecate q-class option.\n\nThis option was used to control the short instruction selection.  However,\nthere is no difference in cycles if we use or not a short instruction,\nand always someone wants a smaller program.\n\ngcc/\nxxxx-xx-xx  Claudiu Zissulescu  <claziss@synopsys.com>\n\n\t* config/arc/arc.c (arc_conditional_register_usage): R0-R3 and\n\tR12-R15 are always in ARCOMPACT16_REGS register class.\n\t* config/arc/arc.opt (mq-class): Deprecate.\n\t* config/arc/constraint.md (\"q\"): Remove dependency on mq-class\n\toption.\n\t* doc/invoke.texi (mq-class): Update text.\n\t* common/config/arc/arc-common.c (arc_option_optimization_table):\n\tUpdate list.\n\ntestsuite/\nxxxx-xx-xx  Claudiu Zissulescu  <claziss@synopsys.com>\n\n\t* gcc.target/arc/nps400-1.c: Update test.", "tree": {"sha": "2a3568869f5b88e05e358bf93cf95376567c5d79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a3568869f5b88e05e358bf93cf95376567c5d79"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9ebba06b5b969f299a881549bdd745397d2c2634", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ebba06b5b969f299a881549bdd745397d2c2634", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ebba06b5b969f299a881549bdd745397d2c2634", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ebba06b5b969f299a881549bdd745397d2c2634/comments", "author": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "claziss", "id": 2761368, "node_id": "MDQ6VXNlcjI3NjEzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claziss", "html_url": "https://github.com/claziss", "followers_url": "https://api.github.com/users/claziss/followers", "following_url": "https://api.github.com/users/claziss/following{/other_user}", "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}", "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claziss/subscriptions", "organizations_url": "https://api.github.com/users/claziss/orgs", "repos_url": "https://api.github.com/users/claziss/repos", "events_url": "https://api.github.com/users/claziss/events{/privacy}", "received_events_url": "https://api.github.com/users/claziss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e57764be555e4a6162ac2776a98d91f93307eccf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e57764be555e4a6162ac2776a98d91f93307eccf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e57764be555e4a6162ac2776a98d91f93307eccf"}], "stats": {"total": 30, "additions": 20, "deletions": 10}, "files": [{"sha": "dc5e403637b48d390017011d8f8c2275b55915b5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -1,3 +1,14 @@\n+2020-02-13  Claudiu Zissulescu  <claziss@synopsys.com>\n+\n+\t* config/arc/arc.c (arc_conditional_register_usage): R0-R3 and\n+\tR12-R15 are always in ARCOMPACT16_REGS register class.\n+\t* config/arc/arc.opt (mq-class): Deprecate.\n+\t* config/arc/constraint.md (\"q\"): Remove dependency on mq-class\n+\toption.\n+\t* doc/invoke.texi (mq-class): Update text.\n+\t* common/config/arc/arc-common.c (arc_option_optimization_table):\n+\tUpdate list.\n+\n 2020-02-13  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* config/arc/arc.c (arc_insn_cost): New function."}, {"sha": "082aa09283df62ae4abbe74b1d886d3825c2e5e5", "filename": "gcc/common/config/arc/arc-common.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fcommon%2Fconfig%2Farc%2Farc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fcommon%2Fconfig%2Farc%2Farc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon%2Fconfig%2Farc%2Farc-common.c?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -56,7 +56,6 @@ static const struct default_options arc_option_optimization_table[] =\n     { OPT_LEVELS_SIZE, OPT_fbranch_count_reg, NULL, 0},\n     { OPT_LEVELS_SIZE, OPT_fdelayed_branch, NULL, 0 },\n     { OPT_LEVELS_SIZE, OPT_fsection_anchors, NULL, 1 },\n-    { OPT_LEVELS_SIZE, OPT_mq_class, NULL, 1 },\n     { OPT_LEVELS_SIZE, OPT_mcase_vector_pcrel, NULL, 1 },\n     { OPT_LEVELS_SIZE, OPT_msize_level_, NULL, 3 },\n     { OPT_LEVELS_SIZE, OPT_mmillicode, NULL, 1 },"}, {"sha": "fe9077ab665369db1d7a7eaaa0b6deca4625557d", "filename": "gcc/config/arc/arc.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fconfig%2Farc%2Farc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fconfig%2Farc%2Farc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Farc.c?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -1427,9 +1427,6 @@ arc_override_options (void)\n   if (flag_no_common == 255)\n     flag_no_common = !TARGET_NO_SDATA_SET;\n \n-  if (TARGET_MIXED_CODE)\n-    TARGET_Q_CLASS = 1;\n-\n   /* Check for small data option */\n   if (!global_options_set.x_g_switch_value && !TARGET_NO_SDATA_SET)\n     g_switch_value = TARGET_LL64 ? 8 : 4;\n@@ -1956,8 +1953,7 @@ arc_conditional_register_usage (void)\n   for (i = 0; i < FIRST_PSEUDO_REGISTER; i++)\n     if (i < ILINK1_REG)\n       {\n-\tif ((TARGET_Q_CLASS || TARGET_RRQ_CLASS)\n-\t    && ((i <= R3_REG) || ((i >= R12_REG) && (i <= R15_REG))))\n+\tif ((i <= R3_REG) || ((i >= R12_REG) && (i <= R15_REG)))\n \t  arc_regno_reg_class[i] = ARCOMPACT16_REGS;\n \telse\n \t  arc_regno_reg_class[i] = GENERAL_REGS;"}, {"sha": "7b994236a514b8e61f2dd229db0ffe2da20ae00c", "filename": "gcc/config/arc/arc.opt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fconfig%2Farc%2Farc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fconfig%2Farc%2Farc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Farc.opt?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -335,7 +335,7 @@ Target Warn(%qs is deprecated)\n Enable compact casesi pattern.\n \n mq-class\n-Target Var(TARGET_Q_CLASS)\n+Target Warn(%qs is deprecated)\n Enable 'q' instruction alternatives.\n \n mexpand-adddi"}, {"sha": "b7a563a72ada533c226f96d8a124b97fdc7ac559", "filename": "gcc/config/arc/constraints.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fconfig%2Farc%2Fconstraints.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fconfig%2Farc%2Fconstraints.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Fconstraints.md?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -53,7 +53,7 @@\n (define_register_constraint \"x\" \"R0_REGS\"\n   \"@code{R0} register.\")\n \n-(define_register_constraint \"q\" \"TARGET_Q_CLASS ? ARCOMPACT16_REGS : NO_REGS\"\n+(define_register_constraint \"q\" \"ARCOMPACT16_REGS\"\n   \"Registers usable in ARCompact 16-bit instructions: @code{r0}-@code{r3},\n    @code{r12}-@code{r15}\")\n "}, {"sha": "bd9ecebf1030190bf0e9a14862e3d5fad9c544e3", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -17845,7 +17845,7 @@ while increasing the instruction count.\n \n @item -mq-class\n @opindex mq-class\n-Enable @samp{q} instruction alternatives.\n+Ths option is deprecated.  Enable @samp{q} instruction alternatives.\n This is the default for @option{-Os}.\n \n @item -mRcq"}, {"sha": "5ac858efb1b7748a1629a320fa933c17a57b2b81", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -1,3 +1,7 @@\n+2020-02-13  Claudiu Zissulescu  <claziss@synopsys.com>\n+\n+\t* gcc.target/arc/nps400-1.c: Update test.\n+\n 2020-02-13  Claudiu Zissulescu  <claziss@synopsys.com>\n \n \t* gcc.target/arc/or-cnst-size2.c: Update test."}, {"sha": "29486a30ee932df5da3e5696681de911f22b85bc", "filename": "gcc/testsuite/gcc.target/arc/nps400-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fnps400-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9ebba06b5b969f299a881549bdd745397d2c2634/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fnps400-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farc%2Fnps400-1.c?ref=9ebba06b5b969f299a881549bdd745397d2c2634", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n /* { dg-skip-if \"\" { ! { clmcpu } } } */\n-/* { dg-options \"-mcpu=nps400 -mq-class -mbitops -munaligned-access -mcmem -O2 -fno-strict-aliasing\" } */\n+/* { dg-options \"-mcpu=nps400 -mbitops -munaligned-access -mcmem -O2 -fno-strict-aliasing\" } */\n \n enum npsdp_mem_space_type {\n   NPSDP_EXTERNAL_MS = 1"}]}