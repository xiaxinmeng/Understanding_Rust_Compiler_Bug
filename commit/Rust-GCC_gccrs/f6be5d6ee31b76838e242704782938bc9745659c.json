{"sha": "f6be5d6ee31b76838e242704782938bc9745659c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZiZTVkNmVlMzFiNzY4MzhlMjQyNzA0NzgyOTM4YmM5NzQ1NjU5Yw==", "commit": {"author": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2021-02-04T05:45:18Z"}, "committer": {"name": "Fran\u00e7ois Dumont", "email": "fdumont@gcc.gnu.org", "date": "2021-02-09T20:56:27Z"}, "message": "libstdc++: Remove execution branch in deque iterator operator-\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/stl_deque.h\n\t(std::operator-(deque::iterator, deque::iterator)): Replace if/then with\n\ta null pointer test.", "tree": {"sha": "8e95d0f65dae44ffeedd13e634d7a5df9a356882", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e95d0f65dae44ffeedd13e634d7a5df9a356882"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6be5d6ee31b76838e242704782938bc9745659c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6be5d6ee31b76838e242704782938bc9745659c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6be5d6ee31b76838e242704782938bc9745659c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6be5d6ee31b76838e242704782938bc9745659c/comments", "author": null, "committer": null, "parents": [{"sha": "790a8e8942b3f5a896ab5897cd209de1d9c382ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/790a8e8942b3f5a896ab5897cd209de1d9c382ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/790a8e8942b3f5a896ab5897cd209de1d9c382ae"}], "stats": {"total": 20, "additions": 8, "deletions": 12}, "files": [{"sha": "8bba7a3740f18086f989f5b420bfb59df39db70f", "filename": "libstdc++-v3/include/bits/stl_deque.h", "status": "modified", "additions": 8, "deletions": 12, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6be5d6ee31b76838e242704782938bc9745659c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_deque.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6be5d6ee31b76838e242704782938bc9745659c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_deque.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_deque.h?ref=f6be5d6ee31b76838e242704782938bc9745659c", "patch": "@@ -352,12 +352,10 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n       friend difference_type\n       operator-(const _Self& __x, const _Self& __y) _GLIBCXX_NOEXCEPT\n       {\n-\tif (__builtin_expect(__x._M_node || __y._M_node, true))\n-\t  return difference_type(_S_buffer_size())\n-\t    * (__x._M_node - __y._M_node - 1) + (__x._M_cur - __x._M_first)\n-\t    + (__y._M_last - __y._M_cur);\n-\n-\treturn 0;\n+\treturn difference_type(_S_buffer_size())\n+\t  * (__x._M_node - __y._M_node - int(__x._M_node != 0))\n+\t  + (__x._M_cur - __x._M_first)\n+\t  + (__y._M_last - __y._M_cur);\n       }\n \n       // _GLIBCXX_RESOLVE_LIB_DEFECTS\n@@ -369,12 +367,10 @@ _GLIBCXX_BEGIN_NAMESPACE_CONTAINER\n \toperator-(const _Self& __x,\n \t\t  const _Deque_iterator<_Tp, _RefR, _PtrR>& __y) _GLIBCXX_NOEXCEPT\n \t{\n-\t  if (__builtin_expect(__x._M_node || __y._M_node, true))\n-\t    return difference_type(_S_buffer_size())\n-\t      * (__x._M_node - __y._M_node - 1) + (__x._M_cur - __x._M_first)\n-\t      + (__y._M_last - __y._M_cur);\n-\n-\t  return 0;\n+\t  return difference_type(_S_buffer_size())\n+\t    * (__x._M_node - __y._M_node - int(__x._M_node != 0))\n+\t    + (__x._M_cur - __x._M_first)\n+\t    + (__y._M_last - __y._M_cur);\n \t}\n \n       friend _Self"}]}