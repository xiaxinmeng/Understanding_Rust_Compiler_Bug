{"sha": "2435c4c1c8cc0a415821b89239a57f45df6dd968", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQzNWM0YzFjOGNjMGE0MTU4MjFiODkyMzlhNTdmNDVkZjZkZDk2OA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-08-29T12:06:00Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-08-29T12:06:00Z"}, "message": "mips.md (*mov[sd]f_on_*): Redefine using :SCALARF.\n\n\t* config/mips/mips.md (*mov[sd]f_on_*): Redefine using :SCALARF.\n\t(mov[sd]fcc): Likewise.\n\nFrom-SVN: r86723", "tree": {"sha": "d5ecaadb2c92c38a6fe551539c14e679de4c9a58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d5ecaadb2c92c38a6fe551539c14e679de4c9a58"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2435c4c1c8cc0a415821b89239a57f45df6dd968", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2435c4c1c8cc0a415821b89239a57f45df6dd968", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2435c4c1c8cc0a415821b89239a57f45df6dd968", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2435c4c1c8cc0a415821b89239a57f45df6dd968/comments", "author": null, "committer": null, "parents": [{"sha": "53d9ac3b1dc712a83f28d4a9a8265eb2a0d0758f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53d9ac3b1dc712a83f28d4a9a8265eb2a0d0758f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53d9ac3b1dc712a83f28d4a9a8265eb2a0d0758f"}], "stats": {"total": 62, "additions": 20, "deletions": 42}, "files": [{"sha": "9145ba4726f75be635ebefa1ad89deaa308e1766", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2435c4c1c8cc0a415821b89239a57f45df6dd968/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2435c4c1c8cc0a415821b89239a57f45df6dd968/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2435c4c1c8cc0a415821b89239a57f45df6dd968", "patch": "@@ -1,3 +1,8 @@\n+2004-08-29  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/mips.md (*mov[sd]f_on_*): Redefine using :SCALARF.\n+\t(mov[sd]fcc): Likewise.\n+\n 2004-08-29  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/mips/mips.md (cmp[sd]f): Redefine using :SCALARF."}, {"sha": "76751c2cc58aec6f5ba198735b9af40a28633c7c", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 15, "deletions": 42, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2435c4c1c8cc0a415821b89239a57f45df6dd968/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2435c4c1c8cc0a415821b89239a57f45df6dd968/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=2435c4c1c8cc0a415821b89239a57f45df6dd968", "patch": "@@ -5548,35 +5548,20 @@ beq\\t%2,%.,1b\\;\\\n   [(set_attr \"type\" \"condmove\")\n    (set_attr \"mode\" \"<GPR:MODE>\")])\n \n-(define_insn \"*movsf_on_<MOVECC:mode>\"\n-  [(set (match_operand:SF 0 \"register_operand\" \"=f,f\")\n-\t(if_then_else:SF\n+(define_insn \"*mov<SCALARF:mode>_on_<MOVECC:mode>\"\n+  [(set (match_operand:SCALARF 0 \"register_operand\" \"=f,f\")\n+\t(if_then_else:SCALARF\n \t (match_operator:MOVECC 4 \"equality_operator\"\n \t\t[(match_operand:MOVECC 1 \"register_operand\" \"<MOVECC:reg>,<MOVECC:reg>\")\n \t\t (const_int 0)])\n-\t (match_operand:SF 2 \"register_operand\" \"f,0\")\n-\t (match_operand:SF 3 \"register_operand\" \"0,f\")))]\n-  \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT\"\n-  \"@\n-    mov%T4.s\\t%0,%2,%1\n-    mov%t4.s\\t%0,%3,%1\"\n-  [(set_attr \"type\" \"condmove\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-(define_insn \"*movdf_on_<MOVECC:mode>\"\n-  [(set (match_operand:DF 0 \"register_operand\" \"=f,f\")\n-\t(if_then_else:DF\n-\t (match_operator:MOVECC 4 \"equality_operator\"\n-\t\t[(match_operand:MOVECC 1 \"register_operand\" \"<MOVECC:reg>,<MOVECC:reg>\")\n-\t\t (const_int 0)])\n-\t (match_operand:DF 2 \"register_operand\" \"f,0\")\n-\t (match_operand:DF 3 \"register_operand\" \"0,f\")))]\n-  \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT && TARGET_DOUBLE_FLOAT\"\n+\t (match_operand:SCALARF 2 \"register_operand\" \"f,0\")\n+\t (match_operand:SCALARF 3 \"register_operand\" \"0,f\")))]\n+  \"ISA_HAS_CONDMOVE\"\n   \"@\n-    mov%T4.d\\t%0,%2,%1\n-    mov%t4.d\\t%0,%3,%1\"\n+    mov%T4.<fmt>\\t%0,%2,%1\n+    mov%t4.<fmt>\\t%0,%3,%1\"\n   [(set_attr \"type\" \"condmove\")\n-   (set_attr \"mode\" \"DF\")])\n+   (set_attr \"mode\" \"<SCALARF:MODE>\")])\n \n ;; These are the main define_expand's used to make conditional moves.\n \n@@ -5592,25 +5577,13 @@ beq\\t%2,%.,1b\\;\\\n   DONE;\n })\n \n-(define_expand \"movsfcc\"\n-  [(set (match_dup 4) (match_operand 1 \"comparison_operator\"))\n-   (set (match_operand:SF 0 \"register_operand\")\n-\t(if_then_else:SF (match_dup 5)\n-\t\t\t (match_operand:SF 2 \"register_operand\")\n-\t\t\t (match_operand:SF 3 \"register_operand\")))]\n-  \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT\"\n-{\n-  gen_conditional_move (operands);\n-  DONE;\n-})\n-\n-(define_expand \"movdfcc\"\n+(define_expand \"mov<mode>cc\"\n   [(set (match_dup 4) (match_operand 1 \"comparison_operator\"))\n-   (set (match_operand:DF 0 \"register_operand\")\n-\t(if_then_else:DF (match_dup 5)\n-\t\t\t (match_operand:DF 2 \"register_operand\")\n-\t\t\t (match_operand:DF 3 \"register_operand\")))]\n-  \"ISA_HAS_CONDMOVE && TARGET_HARD_FLOAT && TARGET_DOUBLE_FLOAT\"\n+   (set (match_operand:SCALARF 0 \"register_operand\")\n+\t(if_then_else:SCALARF (match_dup 5)\n+\t\t\t      (match_operand:SCALARF 2 \"register_operand\")\n+\t\t\t      (match_operand:SCALARF 3 \"register_operand\")))]\n+  \"ISA_HAS_CONDMOVE\"\n {\n   gen_conditional_move (operands);\n   DONE;"}]}