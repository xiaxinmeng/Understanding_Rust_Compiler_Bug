{"sha": "ecc3905a2df096b31501be93eb527c826fbe1219", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNjMzkwNWEyZGYwOTZiMzE1MDFiZTkzZWI1MjdjODI2ZmJlMTIxOQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-04-20T11:01:49Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-20T11:01:49Z"}, "message": "trans.c (gigi): Declare the name of the compilation unit as the first global name at the very...\n\n\t* gcc-interface/trans.c (gigi): Declare the name of the compilation\n\tunit as the first global name at the very beginning.\n\nFrom-SVN: r146398", "tree": {"sha": "8cee2fd99e7bc40a620fd54d6829e4ce3d5c95e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8cee2fd99e7bc40a620fd54d6829e4ce3d5c95e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ecc3905a2df096b31501be93eb527c826fbe1219", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecc3905a2df096b31501be93eb527c826fbe1219", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecc3905a2df096b31501be93eb527c826fbe1219", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecc3905a2df096b31501be93eb527c826fbe1219/comments", "author": null, "committer": null, "parents": [{"sha": "34d01e1d17222f8a4a6f01f9ad1055d0c001ce6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34d01e1d17222f8a4a6f01f9ad1055d0c001ce6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34d01e1d17222f8a4a6f01f9ad1055d0c001ce6a"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "7cb143790724078577eb0198f63a5f94836343bb", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecc3905a2df096b31501be93eb527c826fbe1219/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecc3905a2df096b31501be93eb527c826fbe1219/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ecc3905a2df096b31501be93eb527c826fbe1219", "patch": "@@ -1,3 +1,8 @@\n+2009-04-20  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (gigi): Declare the name of the compilation\n+\tunit as the first global name at the very beginning.\n+\n 2009-04-20  Thomas Quinot  <quinot@adacore.com>\n \n \t* socket.c, g-socthi-vms.adb, g-socthi-vms.ads, g-socthi-vxworks.ads,"}, {"sha": "d28646d293337a55c704a6fb2a928d626ece0f16", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecc3905a2df096b31501be93eb527c826fbe1219/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecc3905a2df096b31501be93eb527c826fbe1219/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=ecc3905a2df096b31501be93eb527c826fbe1219", "patch": "@@ -267,6 +267,13 @@ gigi (Node_Id gnat_root, int max_gnat_node, int number_name,\n \n   type_annotate_only = (gigi_operating_mode == 1);\n \n+  gcc_assert (Nkind (gnat_root) == N_Compilation_Unit);\n+\n+  /* Declare the name of the compilation unit as the first global\n+     name in order to make the middle-end fully deterministic.  */\n+  t = create_concat_name (Defining_Entity (Unit (gnat_root)), NULL);\n+  first_global_object_name = ggc_strdup (IDENTIFIER_POINTER (t));\n+\n   for (i = 0; i < number_files; i++)\n     {\n       /* Use the identifier table to make a permanent copy of the filename as\n@@ -619,13 +626,6 @@ gigi (Node_Id gnat_root, int max_gnat_node, int number_name,\n   if (Exception_Mechanism == Back_End_Exceptions)\n     gnat_init_gcc_eh ();\n \n-  gcc_assert (Nkind (gnat_root) == N_Compilation_Unit);\n-\n-  /* Declare the name of the compilation unit as the first global\n-     name in order to make the middle-end fully deterministic.  */\n-  t = create_concat_name (Defining_Entity (Unit (gnat_root)), NULL);\n-  first_global_object_name = ggc_strdup (IDENTIFIER_POINTER (t));\n-\n   /* Now translate the compilation unit proper.  */\n   start_stmt_group ();\n   Compilation_Unit_to_gnu (gnat_root);"}]}