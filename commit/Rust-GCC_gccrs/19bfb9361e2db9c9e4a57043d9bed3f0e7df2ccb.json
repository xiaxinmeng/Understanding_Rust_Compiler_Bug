{"sha": "19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTliZmI5MzYxZTJkYjljOWU0YTU3MDQzZDliZWQzZjBlN2RmMmNjYg==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2007-09-19T02:35:29Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2007-09-19T02:35:29Z"}, "message": "Restore detection of unsupported TLS.\n\n2007-09-18  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/testsuite\n\tRestore detection of unsupported TLS.\n\n\tRevert this patch:\n\t2007-02-10  Richard Henderson  <rth@redhat.com>\n\n\t* lib/target-supports.exp (check_effective_target_tls): Redefine\n\tto mean non-emulated tls.\n\t* gcc.dg/tls/alias-1.c: Remove tls requirement.\n\t* gcc.dg/tls/asm-1.c, gcc.dg/tls/debug-1.c, gcc.dg/tls/diag-1.c,\n\tgcc.dg/tls/diag-2.c, gcc.dg/tls/diag-3.c, gcc.dg/tls/diag-4.c,\n\tgcc.dg/tls/diag-5.c, gcc.dg/tls/init-1.c, gcc.dg/tls/nonpic-1.c,\n\tgcc.dg/tls/opt-10.c, gcc.dg/tls/opt-5.c, gcc.dg/tls/opt-6.c,\n\tgcc.dg/tls/opt-8.c, gcc.dg/tls/opt-9.c, gcc.dg/tls/pic-1.c,\n\tgcc.dg/tls/struct-1.c, gcc.dg/tls/trivial.c: Likewise.\n\n\tAnd then:\n\t* lib/target-supports.exp (check_effective_target_tls): Use\n\tstronger test for compiler support for TLS.\n\t(check_effective_target_tls_native): New, to test for non-emulated\n\tTLS support.\n\t* g++.dg/gomp/clause-3.C: Use dg-require-effective-target tls_native\n\tinstead of dg-require-effective-target tls.\n\t* g++.dg/gomp/copyin-1.C: Likewise.\n\t* g++.dg/gomp/sharing-1.C: Likewise.\n\t* g++.dg/gomp/tls-1.C: Likewise.\n\t* g++.dg/gomp/tls-2.C: Likewise.\n\t* g++.dg/gomp/tls-3.C: Likewise.\n\t* g++.dg/tls/diag-1.C: Likewise.\n\t* g++.dg/tls/diag-2.C: Likewise.\n\t* g++.dg/tls/diag-3.C: Likewise.\n\t* g++.dg/tls/diag-4.C: Likewise.\n\t* g++.dg/tls/diag-5.C: Likewise.\n\t* g++.dg/tls/init-1.C: Likewise.\n\t* g++.dg/tls/init-2.C: Likewise.\n\t* g++.dg/tls/trivial.C: Likewise.\n\t* gcc.dg/gomp/appendix-a/a.22.1.c: Likewise.\n\t* gcc.dg/gomp/appendix-a/a.22.2.c: Likewise.\n\t* gcc.dg/gomp/appendix-a/a.24.1.c: Likewise.\n\t* gcc.dg/gomp/appendix-a/a.32.1.c: Likewise.\n\t* gcc.dg/gomp/appendix-a/a.33.1.c: Likewise.\n\t* gcc.dg/gomp/clause-1.c: Likewise.\n\t* gcc.dg/gomp/copyin-1.c: Likewise.\n\t* gcc.dg/gomp/sharing-1.c: Likewise.\n\t* gcc.dg/gomp/tls-1.c: Likewise.\n\t* gcc.dg/gomp/tls-2.c: Likewise.\n\t* gcc.dg/tls/alpha-1.c: Likewise.\n\t* gcc.dg/tls/opt-1.c: Likewise.\n\t* gcc.dg/tls/opt-13.c: Likewise.\n\t* gcc.dg/tls/opt-14.c: Likewise.\n\t* gcc.dg/tls/opt-2.c: Likewise.\n\t* gcc.dg/tls/opt-3.c: Likewise.\n\t* gcc.dg/tls/opt-4.c: Likewise.\n\t* gcc.dg/tls/opt-7.c: Likewise.\n\t* gcc.dg/tls/section-1.c: Likewise.\n\t* gfortran.dg/gomp/appendix-a/a.22.1.f90: Likewise.\n\t* gfortran.dg/gomp/appendix-a/a.22.4.f90: Likewise.\n\t* gfortran.dg/gomp/appendix-a/a.22.5.f90: Likewise.\n\t* gfortran.dg/gomp/appendix-a/a.22.6.f90: Likewise.\n\t* gfortran.dg/gomp/appendix-a/a.24.1.f90: Likewise.\n\t* gfortran.dg/gomp/appendix-a/a.32.1.f90: Likewise.\n\t* gfortran.dg/gomp/appendix-a/a.33.1.f90: Likewise.\n\t* gfortran.dg/gomp/crayptr2.f90: Likewise.\n\t* gfortran.dg/gomp/fixed-1.f: Likewise.\n\t* gfortran.dg/gomp/free-1.f90: Likewise.\n\t* gfortran.dg/gomp/omp_threadprivate1.f90: Likewise.\n\t* gfortran.dg/gomp/omp_threadprivate2.f90: Likewise.\n\t* gfortran.dg/gomp/reduction1.f90: Likewise.\n\t* gfortran.dg/gomp/sharing-1.f90: Likewise.\n\nFrom-SVN: r128595", "tree": {"sha": "7059e8b231e8fe532f4ce32777fd123fccc81c00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7059e8b231e8fe532f4ce32777fd123fccc81c00"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8fcded4011e79e7c3c7ea4381d2bee471a1086d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fcded4011e79e7c3c7ea4381d2bee471a1086d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fcded4011e79e7c3c7ea4381d2bee471a1086d8"}], "stats": {"total": 244, "additions": 187, "deletions": 57}, "files": [{"sha": "0f7b6af0e9f8fcca5cf8fdbae8af159f3263bcec", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 71, "deletions": 0, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,3 +1,74 @@\n+2007-09-18  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\tRestore detection of unsupported TLS.\n+\n+\tRevert this patch:\n+\t2007-02-10  Richard Henderson  <rth@redhat.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_tls): Redefine\n+\tto mean non-emulated tls.\n+\t* gcc.dg/tls/alias-1.c: Remove tls requirement.\n+\t* gcc.dg/tls/asm-1.c, gcc.dg/tls/debug-1.c, gcc.dg/tls/diag-1.c,\n+\tgcc.dg/tls/diag-2.c, gcc.dg/tls/diag-3.c, gcc.dg/tls/diag-4.c,\n+\tgcc.dg/tls/diag-5.c, gcc.dg/tls/init-1.c, gcc.dg/tls/nonpic-1.c,\n+\tgcc.dg/tls/opt-10.c, gcc.dg/tls/opt-5.c, gcc.dg/tls/opt-6.c,\n+\tgcc.dg/tls/opt-8.c, gcc.dg/tls/opt-9.c, gcc.dg/tls/pic-1.c,\n+\tgcc.dg/tls/struct-1.c, gcc.dg/tls/trivial.c: Likewise.\n+\n+\tAnd then:\n+\t* lib/target-supports.exp (check_effective_target_tls): Use\n+\tstronger test for compiler support for TLS.\n+\t(check_effective_target_tls_native): New, to test for non-emulated\n+\tTLS support.\n+\t* g++.dg/gomp/clause-3.C: Use dg-require-effective-target tls_native\n+\tinstead of dg-require-effective-target tls.\n+\t* g++.dg/gomp/copyin-1.C: Likewise.\n+\t* g++.dg/gomp/sharing-1.C: Likewise.\n+\t* g++.dg/gomp/tls-1.C: Likewise.\n+\t* g++.dg/gomp/tls-2.C: Likewise.\n+\t* g++.dg/gomp/tls-3.C: Likewise.\n+\t* g++.dg/tls/diag-1.C: Likewise.\n+\t* g++.dg/tls/diag-2.C: Likewise.\n+\t* g++.dg/tls/diag-3.C: Likewise.\n+\t* g++.dg/tls/diag-4.C: Likewise.\n+\t* g++.dg/tls/diag-5.C: Likewise.\n+\t* g++.dg/tls/init-1.C: Likewise.\n+\t* g++.dg/tls/init-2.C: Likewise.\n+\t* g++.dg/tls/trivial.C: Likewise.\n+\t* gcc.dg/gomp/appendix-a/a.22.1.c: Likewise.\n+\t* gcc.dg/gomp/appendix-a/a.22.2.c: Likewise.\n+\t* gcc.dg/gomp/appendix-a/a.24.1.c: Likewise.\n+\t* gcc.dg/gomp/appendix-a/a.32.1.c: Likewise.\n+\t* gcc.dg/gomp/appendix-a/a.33.1.c: Likewise.\n+\t* gcc.dg/gomp/clause-1.c: Likewise.\n+\t* gcc.dg/gomp/copyin-1.c: Likewise.\n+\t* gcc.dg/gomp/sharing-1.c: Likewise.\n+\t* gcc.dg/gomp/tls-1.c: Likewise.\n+\t* gcc.dg/gomp/tls-2.c: Likewise.\n+\t* gcc.dg/tls/alpha-1.c: Likewise.\n+\t* gcc.dg/tls/opt-1.c: Likewise.\n+\t* gcc.dg/tls/opt-13.c: Likewise.\n+\t* gcc.dg/tls/opt-14.c: Likewise.\n+\t* gcc.dg/tls/opt-2.c: Likewise.\n+\t* gcc.dg/tls/opt-3.c: Likewise.\n+\t* gcc.dg/tls/opt-4.c: Likewise.\n+\t* gcc.dg/tls/opt-7.c: Likewise.\n+\t* gcc.dg/tls/section-1.c: Likewise.\n+\t* gfortran.dg/gomp/appendix-a/a.22.1.f90: Likewise.\n+\t* gfortran.dg/gomp/appendix-a/a.22.4.f90: Likewise.\n+\t* gfortran.dg/gomp/appendix-a/a.22.5.f90: Likewise.\n+\t* gfortran.dg/gomp/appendix-a/a.22.6.f90: Likewise.\n+\t* gfortran.dg/gomp/appendix-a/a.24.1.f90: Likewise.\n+\t* gfortran.dg/gomp/appendix-a/a.32.1.f90: Likewise.\n+\t* gfortran.dg/gomp/appendix-a/a.33.1.f90: Likewise.\n+\t* gfortran.dg/gomp/crayptr2.f90: Likewise.\n+\t* gfortran.dg/gomp/fixed-1.f: Likewise.\n+\t* gfortran.dg/gomp/free-1.f90: Likewise.\n+\t* gfortran.dg/gomp/omp_threadprivate1.f90: Likewise.\n+\t* gfortran.dg/gomp/omp_threadprivate2.f90: Likewise.\n+\t* gfortran.dg/gomp/reduction1.f90: Likewise.\n+\t* gfortran.dg/gomp/sharing-1.f90: Likewise.\n+\n 2007-09-18  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n \n \tPR fortran/31119"}, {"sha": "055c189a5587952162405c2fd437df4ad7b9a2a7", "filename": "gcc/testsuite/g++.dg/gomp/clause-3.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fclause-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fclause-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fclause-3.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n #define p parallel\n "}, {"sha": "f984d10b47182f9cfe4902c97b8c9cccd3b06498", "filename": "gcc/testsuite/g++.dg/gomp/copyin-1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fcopyin-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fcopyin-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fcopyin-1.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n int i, j;\n "}, {"sha": "25626ff2028949bfa5f577981db65108a335afa9", "filename": "gcc/testsuite/g++.dg/gomp/sharing-1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fsharing-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fsharing-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fsharing-1.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n int thrglobalvar;\n #pragma omp threadprivate (thrglobalvar)"}, {"sha": "13d2c0d3979656dec807f835f6c61c4ed740bdc0", "filename": "gcc/testsuite/g++.dg/gomp/tls-1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-1.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n int tp1;\n static int tp2;"}, {"sha": "26dbc53e5f8051ec4d5f08b86e048af4059778d0", "filename": "gcc/testsuite/g++.dg/gomp/tls-2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-2.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n extern char buf[];\n #pragma omp threadprivate (buf)\t/* { dg-error \"has incomplete type\" } */"}, {"sha": "96baec9453eef93cec59adb0ea4c3442acf2e837", "filename": "gcc/testsuite/g++.dg/gomp/tls-3.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Ftls-3.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n #define thr threadprivate\n "}, {"sha": "beeeccb0c0bd2e710fcfb1a60cef15597f40e97c", "filename": "gcc/testsuite/g++.dg/tls/diag-1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-1.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // Valid __thread specifiers.\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n __thread int g1;\n extern __thread int g2;"}, {"sha": "b48b7d72fdff62b1dbccc402eb03958de2ad0e55", "filename": "gcc/testsuite/g++.dg/tls/diag-2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-2.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* Invalid __thread specifiers.  */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n __thread extern int g1;\t\t/* { dg-error \"'__thread' before 'extern'\" } */\n __thread static int g2;\t\t/* { dg-error \"'__thread' before 'static'\" } */"}, {"sha": "0a05cff186e053640d81e35d1a1dcc7b47a2a506", "filename": "gcc/testsuite/g++.dg/tls/diag-3.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-3.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // Report invalid extern and __thread combinations.\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n extern int j;\t\t// { dg-error \"previously declared here\" }\n __thread int j;\t\t// { dg-error \"follows non-thread-local\" }"}, {"sha": "6fb9215a668eb6718c7940554d65d0d45cb08496", "filename": "gcc/testsuite/g++.dg/tls/diag-4.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-4.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* Invalid __thread specifiers.  */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n __thread typedef int g4;\t/* { dg-error \"multiple storage classes\" } */\n "}, {"sha": "5859a3d127c109ff3d05500f1d7570edf216347e", "filename": "gcc/testsuite/g++.dg/tls/diag-5.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Fdiag-5.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // PR c++/30536\n // Invalid __thread specifiers.\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n struct A { __thread register int i; }; // { dg-error \"multiple storage classes|storage class specified\" }"}, {"sha": "91a3afe87e41792d40d489f6398cf76a3b5d8190", "filename": "gcc/testsuite/g++.dg/tls/init-1.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Finit-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Finit-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Finit-1.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* Valid initializations.  */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n __thread int i = 42;\n "}, {"sha": "b4407d33a715f42d95ab739a56e7a07fc263e0f1", "filename": "gcc/testsuite/g++.dg/tls/init-2.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Finit-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Finit-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Finit-2.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* Invalid initializations.  */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n extern __thread int i;\n __thread int *p = &i;\t/* { dg-error \"dynamically initialized\" } */"}, {"sha": "6c30da7274744611f4295e59ca8573c3fec90f1f", "filename": "gcc/testsuite/g++.dg/tls/trivial.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Ftrivial.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Ftrivial.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftls%2Ftrivial.C?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,3 +1,3 @@\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n __thread int i;"}, {"sha": "2cc14888c5c426a60488b44aea78a8b5d8146587", "filename": "gcc/testsuite/gcc.dg/gomp/appendix-a/a.22.1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.22.1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.22.1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.22.1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n int counter = 0;\n #pragma omp threadprivate(counter)"}, {"sha": "171bc2094c54d1009d8a69633a3f8d6dcc6b0baa", "filename": "gcc/testsuite/gcc.dg/gomp/appendix-a/a.22.2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.22.2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.22.2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.22.2.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n int\n increment_counter_2 ()"}, {"sha": "5662e70c54fd0aadc17dcf011a2e799001bd9435", "filename": "gcc/testsuite/gcc.dg/gomp/appendix-a/a.24.1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.24.1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.24.1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.24.1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n extern int omp_get_num_threads (void);\n int x, y, t, z[1000];"}, {"sha": "89d841c7956547de09038cb15eb7e37306c3d298", "filename": "gcc/testsuite/gcc.dg/gomp/appendix-a/a.32.1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.32.1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.32.1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.32.1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n #include <stdlib.h>\n float *work;"}, {"sha": "364a71e22a0c6442ce1c8c66d413903b8859be69", "filename": "gcc/testsuite/gcc.dg/gomp/appendix-a/a.33.1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.33.1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.33.1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fappendix-a%2Fa.33.1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n #include <stdio.h>\n float x, y;"}, {"sha": "cfab168af91ede09746ec1ed96e77fb8d2039f44", "filename": "gcc/testsuite/gcc.dg/gomp/clause-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fclause-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fclause-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fclause-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n #define p parallel\n "}, {"sha": "f984d10b47182f9cfe4902c97b8c9cccd3b06498", "filename": "gcc/testsuite/gcc.dg/gomp/copyin-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fcopyin-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fcopyin-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fcopyin-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n int i, j;\n "}, {"sha": "6b53efe4e4ef6a1c73e02e254697a5f30bc90889", "filename": "gcc/testsuite/gcc.dg/gomp/sharing-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsharing-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsharing-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fsharing-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n #include <stdlib.h>\n "}, {"sha": "7a36c2db65ee7269fe8b14ef761346a022f85021", "filename": "gcc/testsuite/gcc.dg/gomp/tls-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Ftls-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Ftls-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Ftls-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n // { dg-do compile }\n-// { dg-require-effective-target tls }\n+// { dg-require-effective-target tls_native }\n \n int tp1;\n static int tp2;"}, {"sha": "26dbc53e5f8051ec4d5f08b86e048af4059778d0", "filename": "gcc/testsuite/gcc.dg/gomp/tls-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Ftls-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Ftls-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Ftls-2.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n extern char buf[];\n #pragma omp threadprivate (buf)\t/* { dg-error \"has incomplete type\" } */"}, {"sha": "28cb47e504190dcac02a68636152c250eb1ad0f9", "filename": "gcc/testsuite/gcc.dg/tls/alias-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Falias-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Falias-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Falias-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do link } */\n /* { dg-require-alias \"\" } */\n /* { dg-require-visibility \"\" } */\n+/* { dg-require-effective-target tls } */\n /* Test that encode_section_info handles the change from externally\n    defined to locally defined (via hidden).   Extracted from glibc.  */\n "}, {"sha": "1f0d6eda1d884fa4420cb1386a5cbe81e68ea5fe", "filename": "gcc/testsuite/gcc.dg/tls/alpha-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Falpha-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Falpha-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Falpha-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,7 +1,7 @@\n /* Make sure that we honor initial-exec.  */\n /* { dg-do compile { target alpha*-*-* } } */\n /* { dg-options \"\" } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n static __thread int xyzzy __attribute__ ((tls_model (\"initial-exec\")));\n int foo(void) { return xyzzy; }"}, {"sha": "b77e550d7bf7f29976b3f5e8d6242182379a1170", "filename": "gcc/testsuite/gcc.dg/tls/asm-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fasm-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fasm-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fasm-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,5 @@\n /* { dg-options \"-Werror\" } */\n+/* { dg-require-effective-target tls } */\n __thread int i;\n \n int foo ()"}, {"sha": "67d7be69cc50c8be3658c30440dce591e61b3449", "filename": "gcc/testsuite/gcc.dg/tls/debug-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdebug-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdebug-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdebug-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do assemble } */\n /* { dg-options \"-g\" } */\n+/* { dg-require-effective-target tls } */\n \n __thread int i;"}, {"sha": "56b570c94a5c74803232ad254ba9e661fe429a34", "filename": "gcc/testsuite/gcc.dg/tls/diag-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,5 @@\n /* Valid __thread specifiers.  */\n+/* { dg-require-effective-target tls } */\n \n __thread int g1;\n extern __thread int g2;"}, {"sha": "8276cb3be4902553c2da9b5d64685480bcf9e51a", "filename": "gcc/testsuite/gcc.dg/tls/diag-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-2.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,5 @@\n /* Invalid __thread specifiers.  */\n+/* { dg-require-effective-target tls } */\n \n __thread extern int g1;\t\t/* { dg-error \"'__thread' before 'extern'\" } */\n __thread static int g2;\t\t/* { dg-error \"'__thread' before 'static'\" } */"}, {"sha": "45d89b43722b74566620b43767408c45282fb043", "filename": "gcc/testsuite/gcc.dg/tls/diag-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-3.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,5 @@\n /* Report invalid extern and __thread combinations.  */\n+/* { dg-require-effective-target tls } */\n \n extern int j;\t\t/* { dg-error \"previous declaration\" } */\n __thread int j;\t\t/* { dg-error \"follows non-thread-local\" } */"}, {"sha": "fed2f3accd33fcfd9e9a341b479b8ac302df760f", "filename": "gcc/testsuite/gcc.dg/tls/diag-4.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-4.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,6 @@\n /* Invalid __thread specifiers.  As diag-4.c but some cases in\n    different orders.  */\n+/* { dg-require-effective-target tls } */\n \n __thread typedef int g4;\t/* { dg-error \"'__thread' used with 'typedef'\" } */\n "}, {"sha": "ac78cb2951d5e6bbb4010b8b112a2ebf0c78c31c", "filename": "gcc/testsuite/gcc.dg/tls/diag-5.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fdiag-5.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,3 +1,4 @@\n /* __thread specifiers on empty declarations.  */\n+/* { dg-require-effective-target tls } */\n \n __thread struct foo; /* { dg-warning \"useless '__thread' in empty declaration\" } */"}, {"sha": "fa4208dce0c1cac31e44f54446e70bfb5ef69678", "filename": "gcc/testsuite/gcc.dg/tls/init-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Finit-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Finit-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Finit-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,5 @@\n /* Invalid initializations.  */\n+/* { dg-require-effective-target tls } */\n \n extern __thread int i;\n int *p = &i;\t/* { dg-error \"initializer element is not constant\" } */"}, {"sha": "9c592a985563850b4ab8158c8aefa3294155860f", "filename": "gcc/testsuite/gcc.dg/tls/nonpic-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fnonpic-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fnonpic-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fnonpic-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2 -ftls-model=initial-exec\" } */\n+/* { dg-require-effective-target tls } */\n \n extern __thread long e1;\n extern __thread int e2;"}, {"sha": "f96bb676838cf8679a8cc8bef2af154e01c78fbb", "filename": "gcc/testsuite/gcc.dg/tls/opt-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,7 +1,7 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2 -fPIC\" } */\n /* { dg-options \"-O2 -fPIC -mtune=i686\" { target { { i?86-*-* x86_64-*-* } && ilp32 } } } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n /* { dg-require-effective-target fpic } */\n \n extern __thread int thr;"}, {"sha": "15dc6861042fb0690b6d84a84b888fd3aeb814bc", "filename": "gcc/testsuite/gcc.dg/tls/opt-10.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-10.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target fpic } */\n /* { dg-options \"-O3 -fpic\" } */\n+/* { dg-require-effective-target tls } */\n \n /* The web pass was creating unrecognisable pic_load_dot_plus_four insns\n    on ARM.  */"}, {"sha": "aadfb288f3fa248fe1c2972da826c85930044451", "filename": "gcc/testsuite/gcc.dg/tls/opt-13.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-13.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2\" } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n __thread struct\n {"}, {"sha": "2549c896742c7ae06466f0b6c46fa47b1090cbd4", "filename": "gcc/testsuite/gcc.dg/tls/opt-14.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-14.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-14.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-14.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -3,7 +3,7 @@\n    used.  */\n /* { dg-do assemble } */\n /* { dg-options \"-O2\" } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n struct __res_state\n {"}, {"sha": "8038d1c6ffb74e42f95cf544bdef7d004d41d4ee", "filename": "gcc/testsuite/gcc.dg/tls/opt-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-2.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -5,7 +5,7 @@\n /* { dg-do link } */\n /* { dg-options \"-O2 -ftls-model=initial-exec\" } */\n /* { dg-options \"-O2 -ftls-model=initial-exec -march=i686\" { target { { i?86-*-* x86_64-*-* } && ilp32 } } } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n __thread int thr;\n "}, {"sha": "61f5bdbbaf245369687d8c74a125ed1f45a29b3c", "filename": "gcc/testsuite/gcc.dg/tls/opt-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-3.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,7 +1,7 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2 -fpic\" } */\n /* { dg-options \"-O2 -fpic -mregparm=3\" { target { { i?86-*-* x86_64-*-* } && ilp32 } } } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n /* { dg-require-effective-target fpic } */\n \n extern __thread int i, j, k;"}, {"sha": "3d7953b47efdae1cea565d5aad87b0c0147f6573", "filename": "gcc/testsuite/gcc.dg/tls/opt-4.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-4.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2\" } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n struct A\n {"}, {"sha": "0ae9f075d7ae50d26bdddcb1411334e05151c0fb", "filename": "gcc/testsuite/gcc.dg/tls/opt-5.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-5.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2\" } */\n+/* { dg-require-effective-target tls } */\n /* Sched1 moved {load_tp} pattern between strlen call and the copy\n    of the hard return value to its pseudo.  This resulted in a\n    reload abort, since the hard register was not spillable.  */"}, {"sha": "8a01c019c10b99cc4e9080ea268ff8fa7d59b94e", "filename": "gcc/testsuite/gcc.dg/tls/opt-6.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-6.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2\" } */\n+/* { dg-require-effective-target tls } */\n \n extern void abort (void);\n extern void exit (int);"}, {"sha": "d3e81f45e1d978057ce31848b7b09a5dede47419", "filename": "gcc/testsuite/gcc.dg/tls/opt-7.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-7.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-O2 -fPIC\" } */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n /* { dg-require-effective-target fpic } */\n \n static __thread void *baz [4] __attribute__((tls_model (\"initial-exec\")));"}, {"sha": "a7331115352c632de00727174fa651717fac326d", "filename": "gcc/testsuite/gcc.dg/tls/opt-8.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-8.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,7 @@\n /* PR 18910 */\n /* { dg-do compile } */\n /* { dg-options \"-O2\" } */\n+/* { dg-require-effective-target tls } */\n \n static __thread void *foo [2];\n void"}, {"sha": "49aa9085fddd0a3837cf5c2cbfb43fa4be2f198a", "filename": "gcc/testsuite/gcc.dg/tls/opt-9.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fopt-9.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -2,6 +2,7 @@\n /* { dg-do compile */\n /* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fPIC\" } */\n+/* { dg-require-effective-target tls } */\n \n struct S { int x[10]; };\n extern __thread struct S s;"}, {"sha": "9108b58aa5034e487ed90e46fae26e70a4c598fe", "filename": "gcc/testsuite/gcc.dg/tls/pic-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fpic-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fpic-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fpic-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fpic -ftls-model=global-dynamic\" } */\n+/* { dg-require-effective-target tls } */\n \n extern __thread long e1;\n extern __thread int e2;"}, {"sha": "1ca2ffb907062bb42e198085b3c718916184d4dc", "filename": "gcc/testsuite/gcc.dg/tls/section-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fsection-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fsection-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fsection-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,6 @@\n /* Verify that we get errors for trying to put TLS data in \n    sections which can't work.  */\n-/* { dg-require-effective-target tls } */\n+/* { dg-require-effective-target tls_native } */\n \n #define A(X)\t__attribute__((section(X)))\n "}, {"sha": "fbe3e3c102e6d671c3bc75239199356c8d910db9", "filename": "gcc/testsuite/gcc.dg/tls/struct-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fstruct-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fstruct-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Fstruct-1.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -3,6 +3,7 @@\n /* { dg-do compile } */\n /* { dg-require-effective-target fpic } */\n /* { dg-options \"-O2 -fpic\" } */\n+/* { dg-require-effective-target tls } */\n \n struct S {\n   int s0, s1, s2, s3;"}, {"sha": "96b8e49a665c4bd2323ef28269c01ac120e98824", "filename": "gcc/testsuite/gcc.dg/tls/trivial.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Ftrivial.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Ftrivial.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftls%2Ftrivial.c?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1 +1,3 @@\n+/* { dg-require-effective-target tls } */\n+\n __thread int i;"}, {"sha": "96b6abc9187d6458747ef661353be13eda0303b7", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.22.1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n       INTEGER FUNCTION INCREMENT_COUNTER()\n         COMMON/A22_COMMON/COUNTER"}, {"sha": "a272af5c7051c2342ad6d0fe64adbcfc3c9210d5", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.22.4.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.4.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n       MODULE A22_MODULE\n       COMMON /T/ A"}, {"sha": "abd911fa687effc79487120f16ead0c650ead439", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.22.5.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.5.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n       SUBROUTINE A22_5_WRONG()\n         COMMON /T/ A"}, {"sha": "1d745932c8fc126c74aca69cfcc6a8362fea1d1a", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.22.6.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.6.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.6.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.22.6.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n        SUBROUTINE A22_6_GOOD()\n              COMMON /T/ A"}, {"sha": "87388e3ec9f61375046d58c7e8e7a835a2e87be1", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.24.1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.24.1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.24.1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.24.1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n       SUBROUTINE A24(A)\n       INTEGER A"}, {"sha": "8bf2010a4379c705cc5a9cbf9f09a411df0a2d6d", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.32.1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.32.1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.32.1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.32.1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n       MODULE M\n         REAL, POINTER, SAVE :: WORK(:)"}, {"sha": "a161d5441d5c5c7d99f0cc243628ab9637aef1f8", "filename": "gcc/testsuite/gfortran.dg/gomp/appendix-a/a.33.1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.33.1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.33.1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fappendix-a%2Fa.33.1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n       SUBROUTINE INIT(A,B)\n       REAL A, B"}, {"sha": "0032080c792337df1179b715d6a723a74e53f4c5", "filename": "gcc/testsuite/gfortran.dg/gomp/crayptr2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fcrayptr2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fcrayptr2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fcrayptr2.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,6 @@\n ! { dg-do compile }\n ! { dg-options \"-fopenmp -fcray-pointer\" }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n module crayptr2\n   integer :: e\t\t! { dg-error \"CRAY POINTEE attribute conflicts with THREADPRIVATE\" }"}, {"sha": "83233567fca5b4195a8ecda6add2f25e9e3f10b0", "filename": "gcc/testsuite/gfortran.dg/gomp/fixed-1.f", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Ffixed-1.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Ffixed-1.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Ffixed-1.f?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,6 @@\n C PR fortran/24493\n C { dg-do compile }\n-C { dg-require-effective-target tls }\n+C { dg-require-effective-target tls_native }\n       INTEGER I, J, K, L, M\n C$OMP THREADPRIVATE(I)\n C SOME COMMENT"}, {"sha": "3503389cea0ba702107ffcb2ab788d534b3e7b54", "filename": "gcc/testsuite/gfortran.dg/gomp/free-1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Ffree-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Ffree-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Ffree-1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,4 @@\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n subroutine foo\n integer, save :: i ! Some comment"}, {"sha": "2380e3bbface1001b74dd71fee87a6edb69de3cd", "filename": "gcc/testsuite/gfortran.dg/gomp/omp_threadprivate1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_threadprivate1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_threadprivate1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_threadprivate1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,4 +1,4 @@\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n       module omp_threadprivate1\n \tcommon /T/ a\n       end module omp_threadprivate1"}, {"sha": "3112afd1bf1695c555f45a7e38923b6daf942e32", "filename": "gcc/testsuite/gfortran.dg/gomp/omp_threadprivate2.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_threadprivate2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_threadprivate2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fomp_threadprivate2.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n       subroutine bad1\n \tdouble precision :: d\t! { dg-error \"isn't SAVEd\" }\n !$omp threadprivate (d)"}, {"sha": "108e5dc4155a943aeaba85294da5a878f3251525", "filename": "gcc/testsuite/gfortran.dg/gomp/reduction1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Freduction1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Freduction1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Freduction1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,6 +1,6 @@\n ! { dg-do compile }\n ! { dg-options \"-fopenmp -fmax-errors=100\" }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n subroutine foo (ia1)\n integer :: i1, i2, i3"}, {"sha": "89bc6a8e397ab94739570e84b0355bebb4884fdc", "filename": "gcc/testsuite/gfortran.dg/gomp/sharing-1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fsharing-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fsharing-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fsharing-1.f90?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -1,5 +1,5 @@\n ! { dg-do compile }\n-! { dg-require-effective-target tls }\n+! { dg-require-effective-target tls_native }\n \n   integer :: thrpriv, thr, i, j, s, g1, g2, m\n   integer, dimension (6) :: p"}, {"sha": "5a39b8608d21b2ebe1b7bda08a6520160e787ef6", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 50, "deletions": 10, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=19bfb9361e2db9c9e4a57043d9bed3f0e7df2ccb", "patch": "@@ -411,7 +411,7 @@ proc check_effective_target_pcc_bitfield_type_matters { } {\n     }]\n }\n \n-# Return 1 if *native* thread local storage (TLS) is supported, 0 otherwise.\n+# Return 1 if thread local storage (TLS) is supported, 0 otherwise.\n #\n # This won't change for different subtargets so cache the result.\n \n@@ -422,35 +422,75 @@ proc check_effective_target_tls {} {\n     if [info exists et_tls_saved] {\n \tverbose \"check_effective_target_tls: using cached result\" 2\n     } else {\n-\tset et_tls_saved 1\n+\tset et_tls_saved 0\n \n \tset src tls[pid].c\n \tset asm tls[pid].S\n \tverbose \"check_effective_target_tls: compiling testfile $src\" 2\n \tset f [open $src \"w\"]\n-\t# Compile a small test program.\n+\t# Compile a small test program.  Make sure that we test accesses\n+\t# as well as declarations.  \n+\tputs $f \"__thread int i;\\n\"\n+\tputs $f \"int f (void) { return i; }\\n\"\n+\tputs $f \"void g (int j) { i = j; }\\n\"\n+\tclose $f\n+\n+\t# Test for thread-local data supported by the platform.\n+\tset comp_output \\\n+\t    [${tool}_target_compile $src $asm assembly \"\"]\n+\tfile delete $src\n+\tif { [string match \"\" $comp_output] } {\n+\t    # No error messages, everything is OK.\n+\t    set et_tls_saved 1\n+\t}\n+\tremove-build-file $asm\n+    }\n+    verbose \"check_effective_target_tls: returning $et_tls_saved\" 2\n+    return $et_tls_saved\n+}\n+\n+# Return 1 if *native* thread local storage (TLS) is supported, 0 otherwise.\n+#\n+# This won't change for different subtargets so cache the result.\n+\n+proc check_effective_target_tls_native {} {\n+    global et_tls_native_saved\n+    global tool\n+\n+    if [info exists et_tls_saved] {\n+\tverbose \"check_effective_target_tls_native: using cached result\" 2\n+    } else {\n+\tset et_tls_native_saved 0\n+\n+\tset src tls[pid].c\n+\tset asm tls[pid].S\n+\tverbose \"check_effective_target_tls_native: compiling testfile $src\" 2\n+\tset f [open $src \"w\"]\n+\t# Compile a small test program.  Make sure that we test accesses\n+\t# as well as declarations.  \n \tputs $f \"__thread int i;\\n\"\n+\tputs $f \"int f (void) { return i; }\\n\"\n+\tputs $f \"void g (int j) { i = j; }\\n\"\n \tclose $f\n \n \t# Test for thread-local data supported by the platform.\n \tset comp_output [${tool}_target_compile $src $asm assembly \"\"]\n \tfile delete $src\n-\tif { [string match \"*not supported*\" $comp_output] } {\n-\t    set et_tls_saved 0\n-\t} else {\n+\tif { [string match \"\" $comp_output] } {\n+\t    # No error messages, everything is OK.\n \t    set fd [open $asm r]\n \t    set text [read $fd]\n \t    close $fd\n \t    if { [string match \"*emutls*\" $text]} {\n-\t\tset et_tls_saved 0\n+\t\tset et_tls_native_saved 0\n \t    } else {\n-\t\tset et_tls_saved 1\n+\t\tset et_tls_native_saved 1\n \t    }\n \t}\n \tremove-build-file $asm\n     }\n-    verbose \"check_effective_target_tls: returning $et_tls_saved\" 2\n-    return $et_tls_saved\n+    verbose \"check_effective_target_tls_native: returning $et_tls_native_saved\" 2\n+    return $et_tls_native_saved\n }\n \n # Return 1 if TLS executables can run correctly, 0 otherwise."}]}