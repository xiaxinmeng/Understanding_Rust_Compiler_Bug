{"sha": "eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWRkYWJjODBjYTBlMmZjZGNmNDVmYzU1YTk2MDQxNDVhNDZiODU3YQ==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2011-02-18T21:19:52Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2011-02-18T21:19:52Z"}, "message": "config.gcc (hppa[12]*-*-hpux11*): Set extra_parts.\n\n\t* config.gcc (hppa[12]*-*-hpux11*): Set extra_parts.\n\t* config/pa/stublib.c (pthread_default_stacksize_np, pthread_mutex_lock,\n\tpthread_mutex_unlock, pthread_once): Reinstate pthread stubs.\n\t* config/pa/t-pa-hpux11: Add rules to build pthread stubs.\n\t* config/pa/t-pa64: Likewise.\n\t* config/pa/pa-hpux11.h (LINK_GCC_C_SEQUENCE_SPEC): Define.\n\nFrom-SVN: r170287", "tree": {"sha": "2fcf40123fae20a3c2770c2d1c299f470549f52f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2fcf40123fae20a3c2770c2d1c299f470549f52f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/comments", "author": null, "committer": null, "parents": [{"sha": "ca3da783ed735b6eec19ca4576ce64a8fcacce65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca3da783ed735b6eec19ca4576ce64a8fcacce65", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca3da783ed735b6eec19ca4576ce64a8fcacce65"}], "stats": {"total": 105, "additions": 104, "deletions": 1}, "files": [{"sha": "43d065c12a08ca2f327dc76b0a0d41171652ea59", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "patch": "@@ -1,3 +1,12 @@\n+2011-02-18  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* config.gcc (hppa[12]*-*-hpux11*): Set extra_parts.\n+\t* config/pa/stublib.c (pthread_default_stacksize_np, pthread_mutex_lock,\n+\tpthread_mutex_unlock, pthread_once): Reinstate pthread stubs.\n+\t* config/pa/t-pa-hpux11: Add rules to build pthread stubs.\n+\t* config/pa/t-pa64: Likewise.\n+\t* config/pa/pa-hpux11.h (LINK_GCC_C_SEQUENCE_SPEC): Define.\n+\n 2011-02-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR driver/47787"}, {"sha": "1d7c8d3bb8f19d254ca705240fcb57e31ea3ea37", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "patch": "@@ -1165,6 +1165,7 @@ hppa[12]*-*-hpux11*)\n \telse\n \t    tmake_file=\"$tmake_file pa/t-slibgcc-dwarf-ver\"\n \tfi\n+\textra_parts=\"libgcc_stub.a\"\n \tcase x${enable_threads} in\n \tx | xyes | xposix )\n \t\tthread_file=posix"}, {"sha": "81dfdf3d1dd8fc3c7a9ffba116ccaa9c3cd08b07", "filename": "gcc/config/pa/pa-hpux11.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h?ref=eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "patch": "@@ -127,6 +127,11 @@ along with GCC; see the file COPYING3.  If not see\n        %{!mt:%{!pthread:-a shared -lc -a archive}}}}\\\n    %{shared:%{mt|pthread:-lpthread}}\"\n \n+/* The libgcc_stub.a library needs to come last.  */\n+#undef LINK_GCC_C_SEQUENCE_SPEC\n+#define LINK_GCC_C_SEQUENCE_SPEC \\\n+  \"%G %L %G %{!nostdlib:%{!nodefaultlibs:%{!shared:-lgcc_stub}}}\"\n+\n #undef STARTFILE_SPEC\n #define STARTFILE_SPEC \\\n   \"%{!shared:%{pg:gcrt0%O%s}%{!pg:%{p:mcrt0%O%s}%{!p:crt0%O%s}} \\"}, {"sha": "d3cf559c8ab58d6b341d64362ba6a3f85f098238", "filename": "gcc/config/pa/stublib.c", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Fstublib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Fstublib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fstublib.c?ref=eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "patch": "@@ -56,3 +56,42 @@ _Jv_RegisterClasses (void *p)\n {\n }\n #endif\n+\n+#ifdef L_pthread_default_stacksize_np\n+int pthread_default_stacksize_np (unsigned long __attribute__((unused)),\n+\t\t\t\t  unsigned long *);\n+int\n+pthread_default_stacksize_np (unsigned long new, unsigned long *old)\n+{\n+  if (old)\n+    *old = 0;\n+  return 0;\n+}\n+#endif\n+\n+#ifdef L_pthread_mutex_lock\n+int pthread_mutex_lock (void);\n+int\n+pthread_mutex_lock (void)\n+{\n+  return 0;\n+}\n+#endif\n+\n+#ifdef L_pthread_mutex_unlock\n+int pthread_mutex_unlock (void);\n+int\n+pthread_mutex_unlock (void)\n+{\n+  return 0;\n+}\n+#endif\n+\n+#ifdef L_pthread_once\n+int pthread_once (void);\n+int\n+pthread_once (void)\n+{\n+  return 0;\n+}\n+#endif"}, {"sha": "4436b4ca640d7fa9d17b6cb1bac35dbd22b2305d", "filename": "gcc/config/pa/t-pa-hpux11", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Ft-pa-hpux11", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Ft-pa-hpux11", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Ft-pa-hpux11?ref=eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "patch": "@@ -1,2 +1,31 @@\n TARGET_LIBGCC2_CFLAGS = -fPIC -frandom-seed=fixed-seed\n LIB2FUNCS_EXTRA=lib2funcs.asm quadlib.c\n+LIBGCCSTUB_OBJS = pthread_default_stacksize_np-stub.o \\\n+\tpthread_mutex_lock-stub.o \\\n+\tpthread_mutex_unlock-stub.o \\\n+\tpthread_once-stub.o\n+\n+stublib.c: $(srcdir)/config/pa/stublib.c\n+\trm -f stublib.c\n+\tcp $(srcdir)/config/pa/stublib.c .\n+\n+pthread_default_stacksize_np-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_default_stacksize_np stublib.c \\\n+\t  -o pthread_default_stacksize_np-stub.o\n+\n+pthread_mutex_lock-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_lock stublib.c \\\n+\t  -o pthread_mutex_lock-stub.o\n+\n+pthread_mutex_unlock-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_unlock stublib.c \\\n+\t  -o pthread_mutex_unlock-stub.o\n+\n+pthread_once-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_once stublib.c \\\n+\t  -o pthread_once-stub.o\n+\n+$(T)libgcc_stub.a: $(LIBGCCSTUB_OBJS)\n+\t-rm -rf $(T)libgcc_stub.a\n+\t$(AR) rc $(T)libgcc_stub.a $(LIBGCCSTUB_OBJS)\n+\t$(RANLIB) $(T)libgcc_stub.a"}, {"sha": "e6ac7a5bb7def1cdd7624543c9fbe709e9a9dab6", "filename": "gcc/config/pa/t-pa64", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Ft-pa64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eddabc80ca0e2fcdcf45fc55a9604145a46b857a/gcc%2Fconfig%2Fpa%2Ft-pa64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Ft-pa64?ref=eddabc80ca0e2fcdcf45fc55a9604145a46b857a", "patch": "@@ -19,7 +19,11 @@\n \n TARGET_LIBGCC2_CFLAGS = -fPIC -Dpa64=1 -DELF=1 -mlong-calls\n LIB2FUNCS_EXTRA = quadlib.c\n-LIBGCCSTUB_OBJS = rfi-stub.o dfi-stub.o jvrc-stub.o cxaf-stub.o\n+LIBGCCSTUB_OBJS = rfi-stub.o dfi-stub.o jvrc-stub.o cxaf-stub.o \\\n+\tpthread_default_stacksize_np-stub.o \\\n+\tpthread_mutex_lock-stub.o \\\n+\tpthread_mutex_unlock-stub.o \\\n+\tpthread_once-stub.o\n \n stublib.c: $(srcdir)/config/pa/stublib.c\n \trm -f stublib.c\n@@ -41,6 +45,22 @@ jvrc-stub.o: stublib.c $(GCC_PASSES)\n \t$(GCC_FOR_TARGET) -c -O2 -DL_Jv_RegisterClasses stublib.c \\\n \t  -o jvrc-stub.o\n \n+pthread_default_stacksize_np-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_default_stacksize_np stublib.c \\\n+\t  -o pthread_default_stacksize_np-stub.o\n+\n+pthread_mutex_lock-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_lock stublib.c \\\n+\t  -o pthread_mutex_lock-stub.o\n+\n+pthread_mutex_unlock-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_mutex_unlock stublib.c \\\n+\t  -o pthread_mutex_unlock-stub.o\n+\n+pthread_once-stub.o: stublib.c $(GCC_PASSES)\n+\t$(GCC_FOR_TARGET) -c -O2 -DL_pthread_once stublib.c \\\n+\t  -o pthread_once-stub.o\n+\n $(T)libgcc_stub.a: $(LIBGCCSTUB_OBJS)\n \t-rm -rf $(T)libgcc_stub.a\n \t$(AR) rc $(T)libgcc_stub.a $(LIBGCCSTUB_OBJS)"}]}