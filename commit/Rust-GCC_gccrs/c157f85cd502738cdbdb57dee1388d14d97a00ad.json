{"sha": "c157f85cd502738cdbdb57dee1388d14d97a00ad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzE1N2Y4NWNkNTAyNzM4Y2RiZGI1N2RlZTEzODhkMTRkOTdhMDBhZA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-10-31T07:14:43Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-10-31T07:14:43Z"}, "message": "c-objc-common.c (c_tree_printer): Handle types correctly.\n\n        * c-objc-common.c (c_tree_printer): Handle types correctly.\n        Factor code a bit.\n\nFrom-SVN: r73121", "tree": {"sha": "059c7084e2e13dc06d4f05204f437a4535dae739", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/059c7084e2e13dc06d4f05204f437a4535dae739"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c157f85cd502738cdbdb57dee1388d14d97a00ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c157f85cd502738cdbdb57dee1388d14d97a00ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c157f85cd502738cdbdb57dee1388d14d97a00ad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c157f85cd502738cdbdb57dee1388d14d97a00ad/comments", "author": null, "committer": null, "parents": [{"sha": "ad37274a974e6cdcba95558e979a99d3d6ac8fd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad37274a974e6cdcba95558e979a99d3d6ac8fd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad37274a974e6cdcba95558e979a99d3d6ac8fd6"}], "stats": {"total": 43, "additions": 30, "deletions": 13}, "files": [{"sha": "fee124fce18c3a8ffe495f115db4f95c660bab25", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c157f85cd502738cdbdb57dee1388d14d97a00ad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c157f85cd502738cdbdb57dee1388d14d97a00ad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c157f85cd502738cdbdb57dee1388d14d97a00ad", "patch": "@@ -1,3 +1,8 @@\n+2003-10-30  Richard Henderson  <rth@redhat.com>\n+\n+\t* c-objc-common.c (c_tree_printer): Handle types correctly.\n+\tFactor code a bit.\n+\n 2003-10-30 Kelley Cook <kcook@gcc.gnu.org>\n \n \t* value-prof.c, web.c: Update to C90."}, {"sha": "e9a4a09ed8d3d52e93bcd320672ca6ad238b1d10", "filename": "gcc/c-objc-common.c", "status": "modified", "additions": 25, "deletions": 13, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c157f85cd502738cdbdb57dee1388d14d97a00ad/gcc%2Fc-objc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c157f85cd502738cdbdb57dee1388d14d97a00ad/gcc%2Fc-objc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-objc-common.c?ref=c157f85cd502738cdbdb57dee1388d14d97a00ad", "patch": "@@ -293,29 +293,41 @@ static bool\n c_tree_printer (pretty_printer *pp, text_info *text)\n {\n   tree t = va_arg (*text->args_ptr, tree);\n+  const char *n = \"({anonymous})\";\n \n   switch (*text->format_spec)\n     {\n     case 'D':\n     case 'F':\n+      if (DECL_NAME (t))\n+\tn = (*lang_hooks.decl_printable_name) (t, 2);\n+      break;\n+\n     case 'T':\n-      {\n-        const char *n = DECL_NAME (t)\n-          ? (*lang_hooks.decl_printable_name) (t, 2)\n-          : \"({anonymous})\";\n-        pp_string (pp, n);\n-      }\n-      return true;\n+      if (TREE_CODE (t) == TYPE_DECL)\n+\t{\n+\t  if (DECL_NAME (t))\n+\t    n = (*lang_hooks.decl_printable_name) (t, 2);\n+\t}\n+      else\n+\t{\n+\t  t = TYPE_NAME (t);\n+\t  if (t)\n+\t    n = IDENTIFIER_POINTER (t);\n+\t}\n+      break;\n \n     case 'E':\n-       if (TREE_CODE (t) == IDENTIFIER_NODE)\n-         {\n-           pp_string (pp, IDENTIFIER_POINTER (t));\n-           return true;\n-         }\n-       return false;\n+      if (TREE_CODE (t) == IDENTIFIER_NODE)\n+\tn = IDENTIFIER_POINTER (t);\n+      else\n+        return false;\n+      break;\n \n     default:\n       return false;\n     }\n+\n+  pp_string (pp, n);\n+  return true;\n }"}]}