{"sha": "fd59d5d4a2ef8a97541a22399480bc1f8e82ceca", "node_id": "C_kwDOANBUbNoAKGZkNTlkNWQ0YTJlZjhhOTc1NDFhMjIzOTk0ODBiYzFmOGU4MmNlY2E", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2022-01-27T19:34:05Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@redhat.com", "date": "2022-01-27T19:34:05Z"}, "message": "c++: Add a couple of CTAD testcases [PR82632]\n\n\tPR c++/82632\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/cpp1z/class-deduction104.C: New test.\n\t* g++.dg/cpp1z/class-deduction105.C: New test.", "tree": {"sha": "ad4d1b3788c93150f919284be6d313cdd4d5052f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad4d1b3788c93150f919284be6d313cdd4d5052f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca/comments", "author": null, "committer": null, "parents": [{"sha": "7eb61a45a171d4f8f5bf4d4f469d42e657c69a6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7eb61a45a171d4f8f5bf4d4f469d42e657c69a6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7eb61a45a171d4f8f5bf4d4f469d42e657c69a6a"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "a34dea04675a9bfdf5e62644a1493b66b8522b83", "filename": "gcc/testsuite/g++.dg/cpp1z/class-deduction104.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fclass-deduction104.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fclass-deduction104.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fclass-deduction104.C?ref=fd59d5d4a2ef8a97541a22399480bc1f8e82ceca", "patch": "@@ -0,0 +1,17 @@\n+// PR c++/82632\n+// { dg-do compile { target c++17 } }\n+\n+template<class T> struct Optional {\n+  template<class U> Optional(U&&);\n+};\n+\n+template<class A> Optional(A) -> Optional<A>;\n+\n+Optional opt(1729);\n+Optional dupe(opt);\n+\n+using ty1 = decltype(opt);\n+using ty1 = Optional<int>;\n+\n+using ty2 = decltype(dupe);\n+using ty2 = Optional<int>;"}, {"sha": "73a9c6b676a7c527c1b508aa9171d5c4e7894c00", "filename": "gcc/testsuite/g++.dg/cpp1z/class-deduction105.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fclass-deduction105.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd59d5d4a2ef8a97541a22399480bc1f8e82ceca/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fclass-deduction105.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fclass-deduction105.C?ref=fd59d5d4a2ef8a97541a22399480bc1f8e82ceca", "patch": "@@ -0,0 +1,17 @@\n+// PR c++/82632\n+// { dg-do compile { target c++17 } }\n+\n+template<class T, int = 1>\n+struct Foo {\n+  Foo() = default;\n+  Foo(const Foo&) = delete;\n+\n+  template<int I>\n+  Foo(const Foo<T, I>&);\n+};\n+\n+template<class T, int I>\n+Foo(Foo<T,I>) -> Foo<T,I+1>;\n+\n+Foo<int> a;\n+Foo b = a;"}]}