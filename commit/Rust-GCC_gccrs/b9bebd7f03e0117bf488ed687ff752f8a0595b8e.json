{"sha": "b9bebd7f03e0117bf488ed687ff752f8a0595b8e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjliZWJkN2YwM2UwMTE3YmY0ODhlZDY4N2ZmNzUyZjhhMDU5NWI4ZQ==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2012-03-29T22:29:10Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2012-03-29T22:29:10Z"}, "message": "tree-ssa-ccp.c (insert_clobbers_for_var): Do not assert that there is a builtin_stack_save in a dominating BB.\n\n2012-03-30  Martin Jambor  <mjambor@suse.cz>\n\n\t* tree-ssa-ccp.c (insert_clobbers_for_var): Do not assert that there\n\tis a builtin_stack_save in a dominating BB.\n\nFrom-SVN: r185982", "tree": {"sha": "45e0a1ca27d731cded69c274303601e4f1f6ac30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45e0a1ca27d731cded69c274303601e4f1f6ac30"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9bebd7f03e0117bf488ed687ff752f8a0595b8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9bebd7f03e0117bf488ed687ff752f8a0595b8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9bebd7f03e0117bf488ed687ff752f8a0595b8e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9bebd7f03e0117bf488ed687ff752f8a0595b8e/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a15d0d03ae76176f7f4195abb2b9d1058d81599a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a15d0d03ae76176f7f4195abb2b9d1058d81599a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a15d0d03ae76176f7f4195abb2b9d1058d81599a"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "22079f8e5a91a90972267c3cc73b944885222220", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9bebd7f03e0117bf488ed687ff752f8a0595b8e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9bebd7f03e0117bf488ed687ff752f8a0595b8e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b9bebd7f03e0117bf488ed687ff752f8a0595b8e", "patch": "@@ -1,3 +1,8 @@\n+2012-03-30  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* tree-ssa-ccp.c (insert_clobbers_for_var): Do not assert that there\n+\tis a builtin_stack_save in a dominating BB.\n+\n 2012-03-29  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/sse.md (avx_h<plusminus_insn>v4df3): Fix results"}, {"sha": "4e86b8db0c32abc7afabed30f68c62e2d45240b6", "filename": "gcc/tree-ssa-ccp.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9bebd7f03e0117bf488ed687ff752f8a0595b8e/gcc%2Ftree-ssa-ccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9bebd7f03e0117bf488ed687ff752f8a0595b8e/gcc%2Ftree-ssa-ccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-ccp.c?ref=b9bebd7f03e0117bf488ed687ff752f8a0595b8e", "patch": "@@ -1764,23 +1764,25 @@ gsi_prev_dom_bb_nondebug (gimple_stmt_iterator *i)\n }\n \n /* Find a BUILT_IN_STACK_SAVE dominating gsi_stmt (I), and insert\n-   a clobber of VAR before each matching BUILT_IN_STACK_RESTORE.  */\n+   a clobber of VAR before each matching BUILT_IN_STACK_RESTORE.\n+\n+   It is possible that BUILT_IN_STACK_SAVE cannot be find in a dominator when a\n+   previous pass (such as DOM) duplicated it along multiple paths to a BB.  In\n+   that case the function gives up without inserting the clobbers.  */\n \n static void\n insert_clobbers_for_var (gimple_stmt_iterator i, tree var)\n {\n-  bool save_found;\n   gimple stmt;\n   tree saved_val;\n   htab_t visited = NULL;\n \n-  for (save_found = false; !gsi_end_p (i); gsi_prev_dom_bb_nondebug (&i))\n+  for (; !gsi_end_p (i); gsi_prev_dom_bb_nondebug (&i))\n     {\n       stmt = gsi_stmt (i);\n \n       if (!gimple_call_builtin_p (stmt, BUILT_IN_STACK_SAVE))\n \tcontinue;\n-      save_found = true;\n \n       saved_val = gimple_call_lhs (stmt);\n       if (saved_val == NULL_TREE)\n@@ -1792,7 +1794,6 @@ insert_clobbers_for_var (gimple_stmt_iterator i, tree var)\n \n   if (visited != NULL)\n     htab_delete (visited);\n-  gcc_assert (save_found);\n }\n \n /* Detects a __builtin_alloca_with_align with constant size argument.  Declares"}]}