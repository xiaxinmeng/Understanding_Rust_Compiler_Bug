{"sha": "890f9edfff1fb106af3395b14e6f17caeb58ae3d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODkwZjllZGZmZjFmYjEwNmFmMzM5NWIxNGU2ZjE3Y2FlYjU4YWUzZA==", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2007-08-31T07:08:40Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@gcc.gnu.org", "date": "2007-08-31T07:08:40Z"}, "message": "xcoff.h (XCOFF_CSECT_DEFAULT_ALIGNMENT_STR): New internal macro.\n\n2007-08-31  Olivier Hainque  <hainque@adacore.com>\n\n\t* config/rs6000/xcoff.h (XCOFF_CSECT_DEFAULT_ALIGNMENT_STR): New\n\tinternal macro. Default alignment factor for csect directives, chosen\n\tto match what BIGGEST_ALIGNMENT allows.\n\t(DATA_SECTION_ASM_OP): Use it.\n\t* config/rs6000/rs6000.c\n\t(rs6000_xcoff_output_readonly_section_asm_op):\n\tUse XCOFF_CSECT_DEFAULT_ALIGNMENT_STR.\n\t(rs6000_xcoff_output_readwrite_section_asm_op): Likewise.\n\nFrom-SVN: r127956", "tree": {"sha": "63d2909d74d7981d03eda9bb8903b66eb8d847fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63d2909d74d7981d03eda9bb8903b66eb8d847fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/890f9edfff1fb106af3395b14e6f17caeb58ae3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/890f9edfff1fb106af3395b14e6f17caeb58ae3d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/890f9edfff1fb106af3395b14e6f17caeb58ae3d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/890f9edfff1fb106af3395b14e6f17caeb58ae3d/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b420396fcf9487f7208a496369f30e2f3c19551e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b420396fcf9487f7208a496369f30e2f3c19551e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b420396fcf9487f7208a496369f30e2f3c19551e"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "524b9f105ae681192a292254d4b2183232840c27", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/890f9edfff1fb106af3395b14e6f17caeb58ae3d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/890f9edfff1fb106af3395b14e6f17caeb58ae3d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=890f9edfff1fb106af3395b14e6f17caeb58ae3d", "patch": "@@ -1,3 +1,14 @@\n+2007-08-31  Olivier Hainque  <hainque@adacore.com>\n+\n+\t* config/rs6000/xcoff.h (XCOFF_CSECT_DEFAULT_ALIGNMENT_STR): New\n+\tinternal macro. Default alignment factor for csect directives, chosen\n+\tto match what BIGGEST_ALIGNMENT allows.\n+\t(DATA_SECTION_ASM_OP): Use it.\n+\t* config/rs6000/rs6000.c\n+\t(rs6000_xcoff_output_readonly_section_asm_op):\n+\tUse XCOFF_CSECT_DEFAULT_ALIGNMENT_STR.\n+\t(rs6000_xcoff_output_readwrite_section_asm_op): Likewise.\n+\t\n 2007-08-31  Olivier Hainque  <hainque@adacore.com>\n \n \t* dbxout.c (dbxout_block): Move declaration within the first"}, {"sha": "83b4ed2d83a6a5d8364bb0a13fdec58299ca105f", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/890f9edfff1fb106af3395b14e6f17caeb58ae3d/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/890f9edfff1fb106af3395b14e6f17caeb58ae3d/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=890f9edfff1fb106af3395b14e6f17caeb58ae3d", "patch": "@@ -20205,17 +20205,19 @@ rs6000_xcoff_asm_globalize_label (FILE *stream, const char *name)\n static void\n rs6000_xcoff_output_readonly_section_asm_op (const void *directive)\n {\n-  fprintf (asm_out_file, \"\\t.csect %s[RO],3\\n\",\n-\t   *(const char *const *) directive);\n+  fprintf (asm_out_file, \"\\t.csect %s[RO],%s\\n\",\n+\t   *(const char *const *) directive,\n+\t   XCOFF_CSECT_DEFAULT_ALIGNMENT_STR);\n }\n \n /* Likewise for read-write sections.  */\n \n static void\n rs6000_xcoff_output_readwrite_section_asm_op (const void *directive)\n {\n-  fprintf (asm_out_file, \"\\t.csect %s[RW],3\\n\",\n-\t   *(const char *const *) directive);\n+  fprintf (asm_out_file, \"\\t.csect %s[RW],%s\\n\",\n+\t   *(const char *const *) directive,\n+\t   XCOFF_CSECT_DEFAULT_ALIGNMENT_STR);\n }\n \n /* A get_unnamed_section callback, used for switching to toc_section.  */"}, {"sha": "c4bceca833c2d19fbb370f7a72fa92f2d9b38d50", "filename": "gcc/config/rs6000/xcoff.h", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/890f9edfff1fb106af3395b14e6f17caeb58ae3d/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/890f9edfff1fb106af3395b14e6f17caeb58ae3d/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fxcoff.h?ref=890f9edfff1fb106af3395b14e6f17caeb58ae3d", "patch": "@@ -60,6 +60,10 @@\n \n #define MAX_OFILE_ALIGNMENT 32768\n \n+/* Default alignment factor for csect directives, chosen to honor\n+   BIGGEST_ALIGNMENT.  */\n+#define XCOFF_CSECT_DEFAULT_ALIGNMENT_STR \"4\"\n+\n /* Return nonzero if this entry is to be written into the constant\n    pool in a special way.  We do so if this is a SYMBOL_REF, LABEL_REF\n    or a CONST containing one of them.  If -mfp-in-toc (the default),\n@@ -277,9 +281,10 @@\n /* Output before instructions.  */\n #define TEXT_SECTION_ASM_OP \"\\t.csect .text[PR]\"\n \n-/* Output before writable data.\n-   Align entire section to BIGGEST_ALIGNMENT.  */\n-#define DATA_SECTION_ASM_OP \"\\t.csect .data[RW],3\"\n+/* Output before writable data.  */\n+#define DATA_SECTION_ASM_OP \\\n+  \"\\t.csect .data[RW],\" XCOFF_CSECT_DEFAULT_ALIGNMENT_STR\n+\n \n /* Define to prevent DWARF2 unwind info in the data section rather\n    than in the .eh_frame section.  We do this because the AIX linker"}]}