{"sha": "1bf0567179b2828650b21eced842742526039651", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWJmMDU2NzE3OWIyODI4NjUwYjIxZWNlZDg0Mjc0MjUyNjAzOTY1MQ==", "commit": {"author": {"name": "Stan Shebs", "email": "shebs@apple.com", "date": "2001-12-29T16:16:51Z"}, "committer": {"name": "Stan Shebs", "email": "shebs@gcc.gnu.org", "date": "2001-12-29T16:16:51Z"}, "message": "objc-act.c (STRING_OBJECT_CLASS_NAME): Remove.\n\n        * objc/objc-act.c (STRING_OBJECT_CLASS_NAME): Remove.\n        (default_constant_string_class_name): New global.\n        (objc_init): Set it.\n        (synth_module_prologue): Use it.\n\nFrom-SVN: r48366", "tree": {"sha": "324c2efd1cbbcec1389487eb6a5de3713aee3c10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/324c2efd1cbbcec1389487eb6a5de3713aee3c10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1bf0567179b2828650b21eced842742526039651", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bf0567179b2828650b21eced842742526039651", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bf0567179b2828650b21eced842742526039651", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bf0567179b2828650b21eced842742526039651/comments", "author": null, "committer": null, "parents": [{"sha": "ad074d60dd99324d514d31a4b3d9152b897f0488", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad074d60dd99324d514d31a4b3d9152b897f0488", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad074d60dd99324d514d31a4b3d9152b897f0488"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "a34e7d76ceec3318643cf1db65d7a4938bef75aa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bf0567179b2828650b21eced842742526039651/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bf0567179b2828650b21eced842742526039651/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1bf0567179b2828650b21eced842742526039651", "patch": "@@ -1,5 +1,10 @@\n 2001-12-29  Stan Shebs  <shebs@apple.com>\n \n+\t* objc/objc-act.c (STRING_OBJECT_CLASS_NAME): Remove.\n+\t(default_constant_string_class_name): New global.\n+\t(objc_init): Set it.\n+\t(synth_module_prologue): Use it.\n+\n \t* objc/objc-act.c: Apply various cosmetic and formatting changes.\n \n 2001-12-29  Kazu Hirata  <kazu@hxi.com>"}, {"sha": "d7c7e740d8e1f8e93f3ad3b0224719388e891fe9", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1bf0567179b2828650b21eced842742526039651/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1bf0567179b2828650b21eced842742526039651/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=1bf0567179b2828650b21eced842742526039651", "patch": "@@ -363,11 +363,6 @@ static void ggc_mark_hash_table\t\t\tPARAMS ((void *));\n #define UTAG_METHOD_PROTOTYPE\t\"_objc_method_prototype\"\n #define UTAG_METHOD_PROTOTYPE_LIST \"_objc__method_prototype_list\"\n \n-#ifdef NEXT_OBJC_RUNTIME\n-#define STRING_OBJECT_CLASS_NAME \"NSConstantString\"\n-#else\n-#define STRING_OBJECT_CLASS_NAME \"NXConstantString\"\n-#endif\n /* Note that the string object global name is only needed for the\n    NeXT runtime.  */\n #define STRING_OBJECT_GLOBAL_NAME \"_NSConstantStringClassReference\"\n@@ -381,6 +376,7 @@ static const char *TAG_GETMETACLASS;\n static const char *TAG_MSGSEND;\n static const char *TAG_MSGSENDSUPER;\n static const char *TAG_EXECCLASS;\n+static const char *default_constant_string_class_name;\n \n /* The OCTI_... enumeration itself is in objc/objc-act.h.  */\n tree objc_global_trees[OCTI_MAX];\n@@ -541,6 +537,7 @@ objc_init (filename)\n       TAG_MSGSEND = \"objc_msgSend\";\n       TAG_MSGSENDSUPER = \"objc_msgSendSuper\";\n       TAG_EXECCLASS = \"__objc_execClass\";\n+      default_constant_string_class_name = \"NSConstantString\";\n     }\n   else\n     {\n@@ -549,6 +546,7 @@ objc_init (filename)\n       TAG_MSGSEND = \"objc_msg_lookup\";\n       TAG_MSGSENDSUPER = \"objc_msg_lookup_super\";\n       TAG_EXECCLASS = \"__objc_exec_class\";\n+      default_constant_string_class_name = \"NXConstantString\";\n       flag_typed_selectors = 1;\n     }\n \n@@ -1204,7 +1202,7 @@ synth_module_prologue ()\n \n   /* Forward declare constant_string_id and constant_string_type.  */\n   if (!constant_string_class_name)\n-    constant_string_class_name = STRING_OBJECT_CLASS_NAME;\n+    constant_string_class_name = default_constant_string_class_name;\n \n   constant_string_id = get_identifier (constant_string_class_name);\n   constant_string_type = xref_tag (RECORD_TYPE, constant_string_id);"}]}