{"sha": "def745b2d3785d8b037e8ffc39b5638ecc5fa4d4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGVmNzQ1YjJkMzc4NWQ4YjAzN2U4ZmZjMzliNTYzOGVjYzVmYTRkNA==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2018-07-31T17:35:50Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2018-07-31T17:35:50Z"}, "message": "AArch64 - add speculation barrier\n\nSimilar to Arm, this adds an unconditional speculation barrier for AArch64.\n\n\t* config/aarch64.md (unspecv): Add UNSPECV_SPECULAION_BARRIER.\n\t(speculation_barrier): New insn.\n\nFrom-SVN: r263170", "tree": {"sha": "424d39aa4f9d1851b4d6a06a84adca8736bf904a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/424d39aa4f9d1851b4d6a06a84adca8736bf904a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4/comments", "author": null, "committer": null, "parents": [{"sha": "bb8b0096829209874018c0997f340a43ca8b0461", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb8b0096829209874018c0997f340a43ca8b0461", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb8b0096829209874018c0997f340a43ca8b0461"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "179f97ad50dd817d36f59eb5fb07f30ef069ce78", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=def745b2d3785d8b037e8ffc39b5638ecc5fa4d4", "patch": "@@ -1,3 +1,8 @@\n+2018-07-31  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* config/aarch64.md (unspecv): Add UNSPECV_SPECULAION_BARRIER.\n+\t(speculation_barrier): New insn.\n+\n 2018-07-31  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* config/arm/unspecs.md (unspecv): Add VUNSPEC_SPECULATION_BARRIER."}, {"sha": "de5230682d02f6ee68d7de841563f9f4bc7a3199", "filename": "gcc/config/aarch64/aarch64.md", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4/gcc%2Fconfig%2Faarch64%2Faarch64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/def745b2d3785d8b037e8ffc39b5638ecc5fa4d4/gcc%2Fconfig%2Faarch64%2Faarch64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.md?ref=def745b2d3785d8b037e8ffc39b5638ecc5fa4d4", "patch": "@@ -205,6 +205,7 @@\n     UNSPECV_SET_FPSR\t\t; Represent assign of FPSR content.\n     UNSPECV_BLOCKAGE\t\t; Represent a blockage\n     UNSPECV_PROBE_STACK_RANGE\t; Represent stack range probing.\n+    UNSPECV_SPECULATION_BARRIER ; Represent speculation barrier.\n   ]\n )\n \n@@ -6554,6 +6555,15 @@\n \t\t   (match_operand 1))\n \t      (clobber (reg:CC CC_REGNUM))])])\n \n+;; Hard speculation barrier.\n+(define_insn \"speculation_barrier\"\n+  [(unspec_volatile [(const_int 0)] UNSPECV_SPECULATION_BARRIER)]\n+  \"\"\n+  \"isb\\;dsb\\\\tsy\"\n+  [(set_attr \"length\" \"8\")\n+   (set_attr \"type\" \"block\")]\n+)\n+\n ;; AdvSIMD Stuff\n (include \"aarch64-simd.md\")\n "}]}