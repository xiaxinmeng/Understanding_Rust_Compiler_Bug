{"sha": "e45b3c75467600eafb89a989301d207da3f31650", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQ1YjNjNzU0Njc2MDBlYWZiODlhOTg5MzAxZDIwN2RhM2YzMTY1MA==", "commit": {"author": {"name": "Erik Schnetter", "email": "schnetter@aei.mpg.de", "date": "2005-12-02T01:25:58Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2005-12-02T01:25:58Z"}, "message": "decl.c (gfc_match_old_kind_spec): Improve handling of old style COMPLEX*N\n\n2005-12-01  Erik Schnetter  <schnetter@aei.mpg.de>\n\n\t* decl.c (gfc_match_old_kind_spec):  Improve handling of old style\n\tCOMPLEX*N\n\nFrom-SVN: r107853", "tree": {"sha": "978c7adea1250bd00e1e5ddfa10e006751049366", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/978c7adea1250bd00e1e5ddfa10e006751049366"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e45b3c75467600eafb89a989301d207da3f31650", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e45b3c75467600eafb89a989301d207da3f31650", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e45b3c75467600eafb89a989301d207da3f31650", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e45b3c75467600eafb89a989301d207da3f31650/comments", "author": null, "committer": null, "parents": [{"sha": "86e1c63beca6f696e15f68ace62480a765b1a52c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86e1c63beca6f696e15f68ace62480a765b1a52c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86e1c63beca6f696e15f68ace62480a765b1a52c"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "ceec7b776fc0ba19fc6acdd69372d17d50eb3437", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e45b3c75467600eafb89a989301d207da3f31650/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e45b3c75467600eafb89a989301d207da3f31650/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=e45b3c75467600eafb89a989301d207da3f31650", "patch": "@@ -1,3 +1,8 @@\n+2005-12-01  Erik Schnetter  <schnetter@aei.mpg.de>\n+\n+\t* decl.c (gfc_match_old_kind_spec):  Improve handling of old style\n+\tCOMPLEX*N\n+\n 2005-12-01  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/24789\n@@ -19,7 +24,6 @@\n \t* invoke.texi: Document -ffree-line-length- and\n \t-ffree-line-length-none\n \n-\n 2005-11-30  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/15809"}, {"sha": "6f047341f3e3768d15e53d1262d65cce3b8a6c76", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e45b3c75467600eafb89a989301d207da3f31650/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e45b3c75467600eafb89a989301d207da3f31650/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=e45b3c75467600eafb89a989301d207da3f31650", "patch": "@@ -1279,6 +1279,7 @@ match\n gfc_match_old_kind_spec (gfc_typespec * ts)\n {\n   match m;\n+  int original_kind;\n \n   if (gfc_match_char ('*') != MATCH_YES)\n     return MATCH_NO;\n@@ -1287,17 +1288,24 @@ gfc_match_old_kind_spec (gfc_typespec * ts)\n   if (m != MATCH_YES)\n     return MATCH_ERROR;\n \n+  original_kind = ts->kind;\n+\n   /* Massage the kind numbers for complex types.  */\n-  if (ts->type == BT_COMPLEX && ts->kind == 8)\n-    ts->kind = 4;\n-  if (ts->type == BT_COMPLEX && ts->kind == 16)\n-    ts->kind = 8;\n+  if (ts->type == BT_COMPLEX)\n+    {\n+      if (ts->kind % 2)\n+        {\n+          gfc_error (\"Old-style type declaration %s*%d not supported at %C\",\n+                     gfc_basic_typename (ts->type), original_kind);\n+          return MATCH_ERROR;\n+        }\n+      ts->kind /= 2;\n+    }\n \n   if (gfc_validate_kind (ts->type, ts->kind, true) < 0)\n     {\n-      gfc_error (\"Old-style kind %d not supported for type %s at %C\",\n-\t\t ts->kind, gfc_basic_typename (ts->type));\n-\n+      gfc_error (\"Old-style type declaration %s*%d not supported at %C\",\n+                 gfc_basic_typename (ts->type), original_kind);\n       return MATCH_ERROR;\n     }\n "}]}