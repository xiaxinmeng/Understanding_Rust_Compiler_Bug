{"sha": "461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYxZDZlYjM4ZTc3ZmIxYTJlY2I4ZjIyNTAyNWRiYzZiNTc0YTVhMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-01-21T11:58:53Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-01-21T11:58:53Z"}, "message": "trans.c (gnat_to_gnu): Use POINTER_PLUS_EXPR in pointer arithmetics.\n\n\t* trans.c (gnat_to_gnu) <N_Free_Statement>: Use POINTER_PLUS_EXPR\n\tin pointer arithmetics.\n\t* utils2.c (build_allocator): Likewise.\n\nFrom-SVN: r131692", "tree": {"sha": "aa77f817652cdf34b0dad8f745745c1b64d9be43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa77f817652cdf34b0dad8f745745c1b64d9be43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/comments", "author": null, "committer": null, "parents": [{"sha": "6cc199f4b6c762c567706625ed0fb4b3939d054f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cc199f4b6c762c567706625ed0fb4b3939d054f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cc199f4b6c762c567706625ed0fb4b3939d054f"}], "stats": {"total": 31, "additions": 25, "deletions": 6}, "files": [{"sha": "f571ec962c2964e469f2300cb3b0217674e3eaca", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "patch": "@@ -1,3 +1,9 @@\n+2008-01-21  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* trans.c (gnat_to_gnu) <N_Free_Statement>: Use POINTER_PLUS_EXPR\n+\tin pointer arithmetics.\n+\t* utils2.c (build_allocator): Likewise.\n+\n 2008-01-17  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* utils.c (build_function_stub): Properly build the call expression."}, {"sha": "c79ed4dbd3fc16517c67a62b5cff2dfb40a2014a", "filename": "gcc/ada/trans.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Fada%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Fada%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ftrans.c?ref=461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "patch": "@@ -4672,10 +4672,9 @@ gnat_to_gnu (Node_Id gnat_node)\n \t\t = (void *)GNU_PTR - (void *)sizeof (void *))  */\n  \t      gnu_ptr\n  \t\t= build_binary_op\n-\t\t    (MINUS_EXPR, ptr_void_type_node,\n+\t\t    (POINTER_PLUS_EXPR, ptr_void_type_node,\n \t\t     convert (ptr_void_type_node, gnu_ptr),\n-\t\t     convert (ptr_void_type_node,\n-\t\t\t      TYPE_SIZE_UNIT (ptr_void_type_node)));\n+\t\t     size_int (-POINTER_SIZE/BITS_PER_UNIT));\n \n  \t      /* GNU_PTR (void *) = *(void **)GNU_PTR  */\n  \t      gnu_ptr"}, {"sha": "a2a7be4c13580cdb5124a83c591b9c619595a69a", "filename": "gcc/ada/utils2.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Fada%2Futils2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Fada%2Futils2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Futils2.c?ref=461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "patch": "@@ -2066,10 +2066,9 @@ build_allocator (tree type, tree init, tree result_type, Entity_Id gnat_proc,\n \t front.  */\n       {\n \ttree ptr_addr\n-\t  = build_binary_op (MINUS_EXPR, ptr_void_type_node,\n+\t  = build_binary_op (POINTER_PLUS_EXPR, ptr_void_type_node,\n \t\t\t     convert (ptr_void_type_node, result),\n-\t\t\t     convert (ptr_void_type_node,\n-\t\t\t\t      TYPE_SIZE_UNIT (ptr_void_type_node)));\n+\t\t\t     size_int (-POINTER_SIZE/BITS_PER_UNIT));\n \n \ttree ptr_ref\n \t  = convert (build_pointer_type (ptr_void_type_node), ptr_addr);"}, {"sha": "e15a98f683984215cf9437d51a470c0bed0ba61d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "patch": "@@ -1,3 +1,7 @@\n+2008-01-21  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/specs/alignment1.ads: New test.\n+\n 2008-01-21  Richard Guenther  <rguenther@suse.de>\n \n \tPR c++/34850"}, {"sha": "cffcba138cafa41fde237e5f41cb249a98bd5773", "filename": "gcc/testsuite/gnat.dg/specs/alignment1.ads", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Falignment1.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Falignment1.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Falignment1.ads?ref=461d6eb38e77fb1a2ecb8f225025dbc6b574a5a1", "patch": "@@ -0,0 +1,11 @@\n+-- { dg-do compile }\n+\n+package Alignment1 is\n+   S : Natural := 20;\n+   pragma Volatile (S);\n+\n+   type Block is array (1 .. S) of Integer;\n+   for Block'Alignment use 128;\n+\n+   B : Block;\n+end;"}]}