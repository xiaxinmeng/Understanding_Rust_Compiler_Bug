{"sha": "1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWIwZDJkMTc4OWE2NjlkNWRmY2I1ZmE3NzYwZmY5ZmI3MGRjNzJjMg==", "commit": {"author": {"name": "Josh Conner", "email": "jconner@apple.com", "date": "2005-08-26T22:42:44Z"}, "committer": {"name": "Josh Conner", "email": "jconner@gcc.gnu.org", "date": "2005-08-26T22:42:44Z"}, "message": "re PR tree-optimization/23584 (ipa-pure-const pass ignores dereferencing a volatile pointer type)\n\n        PR middle-end/23584\n        * ipa-pure-const.c (check_tree): Check for volatile-ness\n        when considering a dereference.\n\nFrom-SVN: r103546", "tree": {"sha": "531275faa3f621ba950fe04ea5a8e2a0b7cdaca9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/531275faa3f621ba950fe04ea5a8e2a0b7cdaca9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2/comments", "author": null, "committer": null, "parents": [{"sha": "24b7d7c318e883bedd854414ae4348cda673f8ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24b7d7c318e883bedd854414ae4348cda673f8ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24b7d7c318e883bedd854414ae4348cda673f8ad"}], "stats": {"total": 19, "additions": 13, "deletions": 6}, "files": [{"sha": "cc3117c92da28016467253a59a44a906ed06925f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2", "patch": "@@ -1,3 +1,9 @@\n+2005-08-26  Josh Conner  <jconner@apple.com>\n+\n+\tPR middle-end/23584\n+\t* ipa-pure-const.c (check_tree): Check for volatile-ness\n+\twhen considering a dereference.\n+\n 2005-08-27  Jakub Jelinek  <jakub@redhat.com>\n \n \t* rtl.h (MEM_IN_STRUCT_P): Fix comment typo."}, {"sha": "c60383118f2f3b9f8297678b4d095dceb5a1d829", "filename": "gcc/ipa-pure-const.c", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2/gcc%2Fipa-pure-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2/gcc%2Fipa-pure-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-pure-const.c?ref=1b0d2d1789a669d5dfcb5fa7760ff9fb70dc72c2", "patch": "@@ -182,13 +182,14 @@ check_tree (funct_state local, tree t, bool checking_write)\n       \n       /* Any indirect reference that occurs on the lhs\n \t disqualifies the function from being pure or const. Any\n-\t indirect reference that occurs on the rhs disqualifies\n-\t the function from being const.  */\n-      if (checking_write) \n+\t indirect reference to a volatile disqualifies the\n+\t function from being pure or const.  Any indirect\n+\t reference that occurs on the rhs disqualifies the\n+\t function from being const.  */\n+      if (checking_write || TREE_THIS_VOLATILE (t)) \n \tlocal->pure_const_state = IPA_NEITHER;\n-      else \n-\tif (local->pure_const_state == IPA_CONST)\n-\t  local->pure_const_state = IPA_PURE;\n+      else if (local->pure_const_state == IPA_CONST)\n+\tlocal->pure_const_state = IPA_PURE;\n     }\n \n   if (SSA_VAR_P (t))"}]}