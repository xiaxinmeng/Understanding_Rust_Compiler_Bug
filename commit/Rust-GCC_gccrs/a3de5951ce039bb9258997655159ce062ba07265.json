{"sha": "a3de5951ce039bb9258997655159ce062ba07265", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNkZTU5NTFjZTAzOWJiOTI1ODk5NzY1NTE1OWNlMDYyYmEwNzI2NQ==", "commit": {"author": {"name": "Andrew MacLeod", "email": "amacleod@redhat.com", "date": "2006-12-07T14:39:37Z"}, "committer": {"name": "Andrew Macleod", "email": "amacleod@gcc.gnu.org", "date": "2006-12-07T14:39:37Z"}, "message": "expr.c (string_constant): Account for non-zero lower bound arrays.\n\n\n2006-12-07  Andrew Macleod  <amacleod@redhat.com>\n\n\t* expr.c (string_constant): Account for non-zero lower bound arrays.\n\nFrom-SVN: r119623", "tree": {"sha": "e1a24f3812cec9e295f4d039e3567910ce12e686", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1a24f3812cec9e295f4d039e3567910ce12e686"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3de5951ce039bb9258997655159ce062ba07265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3de5951ce039bb9258997655159ce062ba07265", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3de5951ce039bb9258997655159ce062ba07265", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3de5951ce039bb9258997655159ce062ba07265/comments", "author": null, "committer": null, "parents": [{"sha": "5eab7e7af0b310eb56474a8978b57387aafc0036", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5eab7e7af0b310eb56474a8978b57387aafc0036", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5eab7e7af0b310eb56474a8978b57387aafc0036"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "3c98eb1ffe902d7e8b469c02ebcaaec626f5be9b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3de5951ce039bb9258997655159ce062ba07265/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3de5951ce039bb9258997655159ce062ba07265/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3de5951ce039bb9258997655159ce062ba07265", "patch": "@@ -1,3 +1,7 @@\n+2006-12-07  Andrew Macleod  <amacleod@redhat.com>\n+\n+\t* expr.c (string_constant): Account for non-zero lower bound arrays.\n+\n 2006-12-07  Richard Guenther  <rguenther@suse.de>\n \n \t* builtins.c (expand_builtin_pow): Adjust predicates for"}, {"sha": "9c2d2a64771c9852db3168cb06afc4fc7997ebcd", "filename": "gcc/expr.c", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3de5951ce039bb9258997655159ce062ba07265/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3de5951ce039bb9258997655159ce062ba07265/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=a3de5951ce039bb9258997655159ce062ba07265", "patch": "@@ -8923,7 +8923,7 @@ is_aligning_offset (tree offset, tree exp)\n tree\n string_constant (tree arg, tree *ptr_offset)\n {\n-  tree array, offset;\n+  tree array, offset, lower_bound;\n   STRIP_NOPS (arg);\n \n   if (TREE_CODE (arg) == ADDR_EXPR)\n@@ -8945,6 +8945,20 @@ string_constant (tree arg, tree *ptr_offset)\n \t  if (TREE_CODE (array) != STRING_CST\n \t      && TREE_CODE (array) != VAR_DECL)\n \t    return 0;\n+\n+\t  /* Check if the array has a non-zero lower bound.  */\n+\t  lower_bound = array_ref_low_bound (TREE_OPERAND (arg, 0));\n+\t  if (!integer_zerop (lower_bound))\n+\t    {\n+\t      /* If the offset and base aren't both constants, return 0.  */\n+\t      if (TREE_CODE (lower_bound) != INTEGER_CST)\n+\t        return 0;\n+\t      if (TREE_CODE (offset) != INTEGER_CST)\n+\t\treturn 0;\n+\t      /* Adjust offset by the lower bound.  */\n+\t      offset = size_diffop (fold_convert (sizetype, offset), \n+\t\t\t\t    fold_convert (sizetype, lower_bound));\n+\t    }\n \t}\n       else\n \treturn 0;"}]}