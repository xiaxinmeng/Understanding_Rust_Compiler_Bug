{"sha": "0f0377f6dde05e7bc08025824b24ce8917cbcee7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGYwMzc3ZjZkZGUwNWU3YmMwODAyNTgyNGIyNGNlODkxN2NiY2VlNw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2004-10-01T15:11:25Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-10-01T15:11:25Z"}, "message": "c-decl.c (c_expand_body): Update call tree_rest_of_compilation.\n\n\t* c-decl.c (c_expand_body): Update call tree_rest_of_compilation.\n\t* cgraphunit.c (cgraph_build_static_cdtor): Likewise.\n\t* toplev.h (tree_rest_of_compilation): Update prototype.\n\t* tree-optimize.c (tree_rest_of_compilation):  Kill nested_p argument.\n\n\t* misc.c (gnat_expand_body): Update call of tree_rest_of_compilation.\n\n\t* semantics.c (expand_body): Update call of tree_rest_of_compilation.\n\n\t* f95-lang.c (gfc_expand_function): Update call of\n\ttree_rest_of_compilation.\n\t* trans-decl.c (gfc_generate_constructors): Likewise.\n\n\t* java.c (java_expand_body): Update call of tree_rest_of_compilation.\n\n\t* treetree.c (treeland_expand_function): Update call of\n\ttree_rest_of_compilation.\n\nFrom-SVN: r88396", "tree": {"sha": "c9a038f7da5c95456d000d806d0b660f3ff619dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c9a038f7da5c95456d000d806d0b660f3ff619dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0f0377f6dde05e7bc08025824b24ce8917cbcee7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f0377f6dde05e7bc08025824b24ce8917cbcee7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f0377f6dde05e7bc08025824b24ce8917cbcee7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f0377f6dde05e7bc08025824b24ce8917cbcee7/comments", "author": null, "committer": null, "parents": [{"sha": "8f28be81e32a7117e0848bb8559e90376570e4d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f28be81e32a7117e0848bb8559e90376570e4d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f28be81e32a7117e0848bb8559e90376570e4d2"}], "stats": {"total": 61, "additions": 41, "deletions": 20}, "files": [{"sha": "80912c3eb1d59d6e282fef6b3f9b202e83412223", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1,3 +1,10 @@\n+2004-10-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* c-decl.c (c_expand_body): Update call tree_rest_of_compilation.\n+\t* cgraphunit.c (cgraph_build_static_cdtor): Likewise.\n+\t* toplev.h (tree_rest_of_compilation): Update prototype.\n+\t* tree-optimize.c (tree_rest_of_compilation):  Kill nested_p argument.\n+\n 2004-10-01  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* tree-cfg.c (cleanup_tree_cfg): Pull a call to"}, {"sha": "c03adf8204c2395cbe8850d0e0c92e1f96bafcf0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1,3 +1,7 @@\n+2004-10-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* misc.c (gnat_expand_body): Update call of tree_rest_of_compilation.\n+\n 2004-09-23  Robert Dewar  <dewar@gnat.com>\n \n \tPR ada/17540"}, {"sha": "f74626ad4ed109c27daa1e21a6ee8cd3a62aaaea", "filename": "gcc/ada/misc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fada%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fada%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmisc.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -649,7 +649,7 @@ gnat_expand_body (tree gnu_decl)\n   if (!DECL_INITIAL (gnu_decl) || DECL_INITIAL (gnu_decl) == error_mark_node)\n     return;\n \n-  tree_rest_of_compilation (gnu_decl, false);\n+  tree_rest_of_compilation (gnu_decl);\n }\n \n /* Adjusts the RLI used to layout a record after all the fields have been"}, {"sha": "7502a07195b910bc13f36630f8099abf00ae4da3", "filename": "gcc/c-decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -6324,7 +6324,7 @@ c_expand_body (tree fndecl)\n       || DECL_INITIAL (fndecl) == error_mark_node)\n     return;\n \n-  tree_rest_of_compilation (fndecl, false);\n+  tree_rest_of_compilation (fndecl);\n \n   if (DECL_STATIC_CONSTRUCTOR (fndecl)\n       && targetm.have_ctors_dtors)"}, {"sha": "5d0a32faad6e375e2222e1918a3137d6936c4349", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -2923,7 +2923,7 @@ cgraph_build_static_cdtor (char which, tree body, int priority)\n \n   /* ??? We will get called LATE in the compilation process.  */\n   if (cgraph_global_info_ready)\n-    tree_rest_of_compilation (decl, false);\n+    tree_rest_of_compilation (decl);\n   else\n     cgraph_finalize_function (decl, 0);\n   "}, {"sha": "d22d49dd15a2521a7ccdae67fe29b2ffb96fd879", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1,3 +1,7 @@\n+2004-10-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* semantics.c (expand_body): Update call of tree_rest_of_compilation.\n+\n 2004-09-30  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* cp-tree.h (struct lang_decl): Shrink by reordering fields and"}, {"sha": "5bb6f3b4d5933c707d80876375f68c499960f2c2", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -2892,7 +2892,7 @@ expand_body (tree fn)\n      generating trees for a function.  */\n   gcc_assert (function_depth == 0);\n \n-  tree_rest_of_compilation (fn, 0);\n+  tree_rest_of_compilation (fn);\n \n   current_function_decl = saved_function;\n "}, {"sha": "a6c885014d67f10e27ca9d83be1d6998931d11f2", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1,3 +1,9 @@\n+2004-10-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* f95-lang.c (gfc_expand_function): Update call of\n+\ttree_rest_of_compilation.\n+\t* trans-decl.c (gfc_generate_constructors): Likewise.\n+\n 2004-09-26  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \t* trans-intrinsic.c: Comment fixes."}, {"sha": "dec03e8256d90a23cad741ae06ecbd3029b471a7", "filename": "gcc/fortran/f95-lang.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ffortran%2Ff95-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ffortran%2Ff95-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ff95-lang.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -196,7 +196,7 @@ tree *ridpointers = NULL;\n static void\n gfc_expand_function (tree fndecl)\n {\n-  tree_rest_of_compilation (fndecl, 0);\n+  tree_rest_of_compilation (fndecl);\n }\n \f\n "}, {"sha": "e4c8fa452573f7a0475096193a2cb902990b5d3f", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -2353,7 +2353,7 @@ gfc_generate_constructors (void)\n   free_after_parsing (cfun);\n   free_after_compilation (cfun);\n \n-  tree_rest_of_compilation (fndecl, 0);\n+  tree_rest_of_compilation (fndecl);\n \n   current_function_decl = NULL_TREE;\n #endif"}, {"sha": "265f5930557ad8acb186db81039342cb7dbafb5d", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1,3 +1,7 @@\n+2004-10-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* java.c (java_expand_body): Update call of tree_rest_of_compilation.\n+\n 2004-10-01  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* lex.c: Fix a comment typo."}, {"sha": "b0a25dc97b9eb73275407851d7eb82e7913275d2", "filename": "gcc/java/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fjava%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Fjava%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fdecl.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1970,7 +1970,7 @@ finish_method (tree fndecl)\n void\n java_expand_body (tree fndecl)\n {\n-  tree_rest_of_compilation (fndecl, 0);\n+  tree_rest_of_compilation (fndecl);\n }\n \n /* We pessimistically marked all methods and fields external until we"}, {"sha": "f0dfaa9eae66c4dc07f3fabef008bdc6c7ed5cfc", "filename": "gcc/toplev.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftoplev.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftoplev.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.h?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -76,7 +76,7 @@ extern void inform (const char *, ...) ATTRIBUTE_GCC_DIAG(1,2);\n extern void rest_of_decl_compilation (tree, int, int);\n extern void rest_of_type_compilation (tree, int);\n extern void rest_of_compilation (void);\n-extern void tree_rest_of_compilation (tree, bool);\n+extern void tree_rest_of_compilation (tree);\n extern void init_tree_optimization_passes (void);\n extern void finish_optimization_passes (void);\n extern bool enable_rtl_dump_file (int);"}, {"sha": "1d145dcf73b12d778cb60c0ce06f5aa6c9e68af2", "filename": "gcc/tree-optimize.c", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftree-optimize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftree-optimize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-optimize.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -565,7 +565,7 @@ update_inlined_to_pointers (struct cgraph_node *node,\n    compilation for FNDECL.  */\n \n void\n-tree_rest_of_compilation (tree fndecl, bool nested_p)\n+tree_rest_of_compilation (tree fndecl)\n {\n   location_t saved_loc;\n   struct cgraph_node *saved_node = NULL, *node;\n@@ -629,11 +629,6 @@ tree_rest_of_compilation (tree fndecl, bool nested_p)\n   if (!vars_to_rename)\n     vars_to_rename = BITMAP_XMALLOC ();\n \n-  /* If this is a nested function, protect the local variables in the stack\n-     above us from being collected while we're compiling this function.  */\n-  if (nested_p)\n-    ggc_push_context ();\n-\n   /* Perform all tree transforms and optimizations.  */\n   execute_pass_list (all_passes);\n \n@@ -689,7 +684,7 @@ tree_rest_of_compilation (tree fndecl, bool nested_p)\n \t}\n     }\n \n-  if (!nested_p && !flag_inline_trees)\n+  if (!flag_inline_trees)\n     {\n       DECL_SAVED_TREE (fndecl) = NULL;\n       if (DECL_STRUCT_FUNCTION (fndecl) == 0\n@@ -708,9 +703,5 @@ tree_rest_of_compilation (tree fndecl, bool nested_p)\n   input_location = saved_loc;\n \n   ggc_collect ();\n-\n-  /* Undo the GC context switch.  */\n-  if (nested_p)\n-    ggc_pop_context ();\n   timevar_pop (TV_EXPAND);\n }"}, {"sha": "6eb1dfcf5535baebd01c7d8e8593ea03c14fdfb5", "filename": "gcc/treelang/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftreelang%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftreelang%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftreelang%2FChangeLog?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1,3 +1,8 @@\n+2004-10-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* treetree.c (treeland_expand_function): Update call of\n+\ttree_rest_of_compilation.\n+\n 2004-09-17  Jeffrey D. Oldham  <oldham@codesourcery.com>\n \t    Zack Weinberg  <zack@codesourcery.com>\n "}, {"sha": "a81b8b9fa36da62d0bcd63ee19ca99188319a28c", "filename": "gcc/treelang/treetree.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftreelang%2Ftreetree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0f0377f6dde05e7bc08025824b24ce8917cbcee7/gcc%2Ftreelang%2Ftreetree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftreelang%2Ftreetree.c?ref=0f0377f6dde05e7bc08025824b24ce8917cbcee7", "patch": "@@ -1278,7 +1278,7 @@ static void\n treelang_expand_function (tree fndecl)\n {\n   /* We have nothing special to do while expanding functions for treelang.  */\n-  tree_rest_of_compilation (fndecl, 0);\n+  tree_rest_of_compilation (fndecl);\n }\n \n #include \"debug.h\" /* for debug_hooks, needed by gt-treelang-treetree.h */"}]}