{"sha": "b6530d0a506320afa4703f2498914f100e51716b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjY1MzBkMGE1MDYzMjBhZmE0NzAzZjI0OTg5MTRmMTAwZTUxNzE2Yg==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2015-02-23T17:51:41Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2015-02-23T17:51:41Z"}, "message": "[PR target/65181] nvptx libgcc: Prevent building \"advanced\" stuff (for example, gcov support)\n\nWhen building GCC against a proper newlib sysroot, the libgcc build will\ninclude more than what's built in the -Dinhibit_libc configuration used when\nbuilding newlib as part of the GCC build process.  See the inhibit_libc logic\nin gcc/configure.ac.\n\nTo avoid...\n\n    ptxas _gcov_indirect_call_topn_profiler.o, line 101; error   : Type or alignment of argument does not match formal parameter 'ptr'\n    ptxas _gcov_indirect_call_topn_profiler.o, line 101; error   : Call has wrong number of parameters\n    ptxas _gcov_indirect_call_topn_profiler.o, line 101; error   : Type or alignment of argument does not match formal parameter 'size'\n    ptxas fatal   : Ptx assembly aborted due to errors\n    nvptx-as: ptxas returned 255 exit status\n    make[2]: *** [_gcov_indirect_call_topn_profiler.o] Error 1\n\n..., \"dumb down\" the libgcc build:\n\n\tlibgcc/\n\tPR target/65181\n\t* config/nvptx/t-nvptx (INHIBIT_LIBC_CFLAGS): Define to\n\t-Dinhibit_libc.\n\nFrom-SVN: r220915", "tree": {"sha": "4583c6709c4427fe5c5572b9bf1f951222dc68fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4583c6709c4427fe5c5572b9bf1f951222dc68fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b6530d0a506320afa4703f2498914f100e51716b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6530d0a506320afa4703f2498914f100e51716b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6530d0a506320afa4703f2498914f100e51716b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6530d0a506320afa4703f2498914f100e51716b/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b0eb429dd8b01800aec906c8f901707627fea7f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0eb429dd8b01800aec906c8f901707627fea7f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0eb429dd8b01800aec906c8f901707627fea7f3"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "df36a8db631574c20c3322ff592fd060a588ba03", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6530d0a506320afa4703f2498914f100e51716b/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6530d0a506320afa4703f2498914f100e51716b/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=b6530d0a506320afa4703f2498914f100e51716b", "patch": "@@ -1,3 +1,9 @@\n+2015-02-23  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\tPR target/65181\n+\t* config/nvptx/t-nvptx (INHIBIT_LIBC_CFLAGS): Define to\n+\t-Dinhibit_libc.\n+\n 2015-02-17  Sandra Loosemore  <sandra@codesourcery.com>\n \n \t* config/arm/bpabi.S (test_div_by_zero): Make label names"}, {"sha": "34d68cca6cd604ed0d553037ba2d9332dad384fa", "filename": "libgcc/config/nvptx/t-nvptx", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6530d0a506320afa4703f2498914f100e51716b/libgcc%2Fconfig%2Fnvptx%2Ft-nvptx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6530d0a506320afa4703f2498914f100e51716b/libgcc%2Fconfig%2Fnvptx%2Ft-nvptx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fnvptx%2Ft-nvptx?ref=b6530d0a506320afa4703f2498914f100e51716b", "patch": "@@ -7,3 +7,8 @@ LIB2FUNCS_EXCLUDE=__main\n \n crt0.o: $(srcdir)/config/nvptx/crt0.s\n \tcp $< $@\n+\n+# Prevent building \"advanced\" stuff (for example, gcov support).  We don't\n+# support it, and it may cause the build to fail, because of alloca usage, for\n+# example.\n+INHIBIT_LIBC_CFLAGS = -Dinhibit_libc"}]}