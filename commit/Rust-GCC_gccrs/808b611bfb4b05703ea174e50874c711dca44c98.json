{"sha": "808b611bfb4b05703ea174e50874c711dca44c98", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODA4YjYxMWJmYjRiMDU3MDNlYTE3NGU1MDg3NGM3MTFkY2E0NGM5OA==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2020-05-22T11:18:34Z"}, "committer": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2020-05-22T11:18:52Z"}, "message": "x86: Handle -mavx512vpopcntdq for -march=native\n\nAdd -mavx512vpopcntdq for -march=native if AVX512VPOPCNTDQ is available.\n\n\tPR target/95258\n\t* config/i386/driver-i386.c (host_detect_local_cpu): Detect\n\tAVX512VPOPCNTDQ.", "tree": {"sha": "3da38d51ca31613cf6a6ac69b102a251849ffd35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3da38d51ca31613cf6a6ac69b102a251849ffd35"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/808b611bfb4b05703ea174e50874c711dca44c98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/808b611bfb4b05703ea174e50874c711dca44c98", "html_url": "https://github.com/Rust-GCC/gccrs/commit/808b611bfb4b05703ea174e50874c711dca44c98", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/808b611bfb4b05703ea174e50874c711dca44c98/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5daf69cfe94c5f81bd59cfab40ad7b9c51930534", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5daf69cfe94c5f81bd59cfab40ad7b9c51930534", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5daf69cfe94c5f81bd59cfab40ad7b9c51930534"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "9106cdb2e72cd20c5a7c46383ce224f927bcca3d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/808b611bfb4b05703ea174e50874c711dca44c98/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/808b611bfb4b05703ea174e50874c711dca44c98/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=808b611bfb4b05703ea174e50874c711dca44c98", "patch": "@@ -1,3 +1,9 @@\n+2020-05-22  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/95258\n+\t* config/i386/driver-i386.c (host_detect_local_cpu): Detect\n+\tAVX512VPOPCNTDQ.\n+\n 2020-05-22  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/95268"}, {"sha": "3a8164007294ce2be028b77864bf76b35fe18631", "filename": "gcc/config/i386/driver-i386.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/808b611bfb4b05703ea174e50874c711dca44c98/gcc%2Fconfig%2Fi386%2Fdriver-i386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/808b611bfb4b05703ea174e50874c711dca44c98/gcc%2Fconfig%2Fi386%2Fdriver-i386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fdriver-i386.c?ref=808b611bfb4b05703ea174e50874c711dca44c98", "patch": "@@ -420,6 +420,7 @@ const char *host_detect_local_cpu (int argc, const char **argv)\n   unsigned int has_avx5124fmaps = 0, has_avx5124vnniw = 0;\n   unsigned int has_gfni = 0, has_avx512vbmi2 = 0;\n   unsigned int has_avx512bitalg = 0;\n+  unsigned int has_avx512vpopcntdq = 0;\n   unsigned int has_shstk = 0;\n   unsigned int has_avx512vnni = 0, has_vaes = 0;\n   unsigned int has_vpclmulqdq = 0;\n@@ -528,6 +529,7 @@ const char *host_detect_local_cpu (int argc, const char **argv)\n       has_vaes = ecx & bit_VAES;\n       has_vpclmulqdq = ecx & bit_VPCLMULQDQ;\n       has_avx512bitalg = ecx & bit_AVX512BITALG;\n+      has_avx512vpopcntdq = ecx & bit_AVX512VPOPCNTDQ;\n       has_movdiri = ecx & bit_MOVDIRI;\n       has_movdir64b = ecx & bit_MOVDIR64B;\n       has_enqcmd = ecx & bit_ENQCMD;\n@@ -1189,6 +1191,7 @@ const char *host_detect_local_cpu (int argc, const char **argv)\n       const char *avx512vp2intersect = has_avx512vp2intersect ? \" -mavx512vp2intersect\" : \" -mno-avx512vp2intersect\";\n       const char *tsxldtrk = has_tsxldtrk ? \" -mtsxldtrk \" : \" -mno-tsxldtrk\";\n       const char *avx512bitalg = has_avx512bitalg ? \" -mavx512bitalg\" : \" -mno-avx512bitalg\";\n+      const char *avx512vpopcntdq = has_avx512vpopcntdq ? \" -mavx512vpopcntdq\" : \" -mno-avx512vpopcntdq\";\n       const char *movdiri = has_movdiri ? \" -mmovdiri\" : \" -mno-movdiri\";\n       const char *movdir64b = has_movdir64b ? \" -mmovdir64b\" : \" -mno-movdir64b\";\n       const char *enqcmd = has_enqcmd ? \" -menqcmd\" : \" -mno-enqcmd\";\n@@ -1210,9 +1213,9 @@ const char *host_detect_local_cpu (int argc, const char **argv)\n \t\t\tavx512ifma, avx512vbmi, avx5124fmaps, avx5124vnniw,\n \t\t\tclwb, mwaitx, clzero, pku, rdpid, gfni, shstk,\n \t\t\tavx512vbmi2, avx512vnni, vaes, vpclmulqdq,\n-\t\t\tavx512bitalg, movdiri, movdir64b, waitpkg, cldemote,\n-\t\t\tptwrite, avx512bf16, enqcmd, avx512vp2intersect,\n-\t\t\tserialize, tsxldtrk, NULL);\n+\t\t\tavx512bitalg, avx512vpopcntdq, movdiri, movdir64b,\n+\t\t\twaitpkg, cldemote, ptwrite, avx512bf16, enqcmd,\n+\t\t\tavx512vp2intersect, serialize, tsxldtrk, NULL);\n     }\n \n done:"}]}