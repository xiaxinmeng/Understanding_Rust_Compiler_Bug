{"sha": "9de2192154a3d5ec055b535aa143a927fcc2c2ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRlMjE5MjE1NGEzZDVlYzA1NWI1MzVhYTE0M2E5MjdmY2MyYzJlZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-12-14T17:13:03Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-12-14T17:13:03Z"}, "message": "trans.c (Call_to_gnu): Set DECL_DISREGARD_INLINE_LIMITS to 0 on the callee if the call is recursive.\n\n\t* gcc-interface/trans.c (Call_to_gnu): Set DECL_DISREGARD_INLINE_LIMITS\n\tto 0 on the callee if the call is recursive.\n\nFrom-SVN: r255648", "tree": {"sha": "7fc95bfc6d53bef0dd47c3785657c8096a0bcb78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7fc95bfc6d53bef0dd47c3785657c8096a0bcb78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9de2192154a3d5ec055b535aa143a927fcc2c2ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9de2192154a3d5ec055b535aa143a927fcc2c2ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9de2192154a3d5ec055b535aa143a927fcc2c2ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9de2192154a3d5ec055b535aa143a927fcc2c2ee/comments", "author": null, "committer": null, "parents": [{"sha": "9df60a5d915668f6b25fae0b76996e6bfd79e38c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9df60a5d915668f6b25fae0b76996e6bfd79e38c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9df60a5d915668f6b25fae0b76996e6bfd79e38c"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "350ac1f8d2555201b7803e596106a08070c3a256", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9de2192154a3d5ec055b535aa143a927fcc2c2ee/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9de2192154a3d5ec055b535aa143a927fcc2c2ee/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=9de2192154a3d5ec055b535aa143a927fcc2c2ee", "patch": "@@ -1,3 +1,8 @@\n+2017-12-14  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (Call_to_gnu): Set DECL_DISREGARD_INLINE_LIMITS\n+\tto 0 on the callee if the call is recursive.\n+\n 2017-12-14  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_field): Do not set the alignment"}, {"sha": "55638a10c23060a5deee29d37674483d99c0f5ea", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9de2192154a3d5ec055b535aa143a927fcc2c2ee/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9de2192154a3d5ec055b535aa143a927fcc2c2ee/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=9de2192154a3d5ec055b535aa143a927fcc2c2ee", "patch": "@@ -4306,10 +4306,16 @@ Call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target,\n       return call_expr;\n     }\n \n-  /* For a call to a nested function, check the inlining status.  */\n-  if (TREE_CODE (gnu_subprog) == FUNCTION_DECL\n-      && decl_function_context (gnu_subprog))\n-    check_inlining_for_nested_subprog (gnu_subprog);\n+  if (TREE_CODE (gnu_subprog) == FUNCTION_DECL)\n+    {\n+      /* For a call to a nested function, check the inlining status.  */\n+      if (decl_function_context (gnu_subprog))\n+\tcheck_inlining_for_nested_subprog (gnu_subprog);\n+\n+      /* For a recursive call, avoid explosion due to recursive inlining.  */\n+      if (gnu_subprog == current_function_decl)\n+\tDECL_DISREGARD_INLINE_LIMITS (gnu_subprog) = 0;\n+    }\n \n   /* The only way we can be making a call via an access type is if Name is an\n      explicit dereference.  In that case, get the list of formal args from the"}]}