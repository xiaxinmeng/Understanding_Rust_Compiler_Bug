{"sha": "7c4a1f088f2caac46f35e54ae06477c9a6f05c0e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2M0YTFmMDg4ZjJjYWFjNDZmMzVlNTRhZTA2NDc3YzlhNmYwNWMwZQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1995-12-31T20:48:17Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1995-12-31T20:48:17Z"}, "message": "sched.c (adjust_priority): Use ADJUST_PRIORITY if its defined.\n\n        * sched.c (adjust_priority): Use ADJUST_PRIORITY if its defined.\n\n        * pa.h (ADJUST_PRIORITY): Define to keep lifetimes of registers\n        that will be allocated to %r1 shorter.\n\nFrom-SVN: r10918", "tree": {"sha": "0f2ad6d972f90d888298a61d802a2b1ba85cbdcf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f2ad6d972f90d888298a61d802a2b1ba85cbdcf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e/comments", "author": null, "committer": null, "parents": [{"sha": "5c7fe359b9a3c07937f88f1b8759163d42991d31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c7fe359b9a3c07937f88f1b8759163d42991d31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c7fe359b9a3c07937f88f1b8759163d42991d31"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "b4557768b4ba5df5a24b2b4f6374ea5338f8b59b", "filename": "gcc/config/pa/pa.h", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e/gcc%2Fconfig%2Fpa%2Fpa.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e/gcc%2Fconfig%2Fpa%2Fpa.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.h?ref=7c4a1f088f2caac46f35e54ae06477c9a6f05c0e", "patch": "@@ -1719,6 +1719,33 @@ while (0)\n #define ADJUST_COST(INSN,LINK,DEP,COST) \\\n   (COST) = pa_adjust_cost (INSN, LINK, DEP, COST)\n \n+/* Adjust scheduling priorities.  We use this to try and keep addil\n+   and the next use of %r1 close together.  */\n+#define ADJUST_PRIORITY(PREV) \\\n+  {\t\t\t\t\t\t\t\t\\\n+    rtx set = single_set (PREV);\t\t\t\t\\\n+    rtx src, dest;\t\t\t\t\t\t\\\n+    if (set)\t\t\t\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\\\n+        src = SET_SRC (set);\t\t\t\t\t\\\n+\tdest = SET_DEST (set);\t\t\t\t\t\\\n+\tif (GET_CODE (src) == LO_SUM\t\t\t\t\\\n+\t    && symbolic_operand (XEXP (src, 1), VOIDmode)\t\\\n+\t    && ! read_only_operand (XEXP (src, 1), VOIDmode))   \\\n+\t  INSN_PRIORITY (PREV) >>= 3;\t\t\t\t\\\n+        else if (GET_CODE (src) == MEM\t\t\t\t\\\n+\t\t && GET_CODE (XEXP (src, 0)) == LO_SUM\t\t\\\n+\t\t && symbolic_operand (XEXP (XEXP (src, 0), 1), VOIDmode)\\\n+\t\t && ! read_only_operand (XEXP (XEXP (src, 0), 1), VOIDmode))\\\n+\t  INSN_PRIORITY (PREV) >>= 1;\t\t\t\t\\\n+\telse if (GET_CODE (dest) == MEM\t\t\t\t\\\n+\t\t && GET_CODE (XEXP (dest, 0)) == LO_SUM\t\t\\\n+\t\t && symbolic_operand (XEXP (XEXP (dest, 0), 1), VOIDmode)\\\n+\t\t && ! read_only_operand (XEXP (XEXP (dest, 0), 1), VOIDmode))\\\n+\t  INSN_PRIORITY (PREV) >>= 3;\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\\\n+  }\n+\n /* Handling the special cases is going to get too complicated for a macro,\n    just call `pa_adjust_insn_length' to do the real work.  */\n #define ADJUST_INSN_LENGTH(INSN, LENGTH)\t\\"}, {"sha": "150f68f604971723a186dd3f1c557c9dc1dc047e", "filename": "gcc/sched.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e/gcc%2Fsched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c4a1f088f2caac46f35e54ae06477c9a6f05c0e/gcc%2Fsched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched.c?ref=7c4a1f088f2caac46f35e54ae06477c9a6f05c0e", "patch": "@@ -2563,6 +2563,9 @@ adjust_priority (prev)\n \t    }\n \t  break;\n \t}\n+#ifdef ADJUST_PRIORITY\n+      ADJUST_PRIORITY (prev);\n+#endif\n     }\n }\n "}]}