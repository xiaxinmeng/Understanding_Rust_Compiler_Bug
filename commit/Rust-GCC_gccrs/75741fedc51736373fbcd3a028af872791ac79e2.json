{"sha": "75741fedc51736373fbcd3a028af872791ac79e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU3NDFmZWRjNTE3MzYzNzNmYmNkM2EwMjhhZjg3Mjc5MWFjNzllMg==", "commit": {"author": {"name": "Ken Werner", "email": "ken.werner@de.ibm.com", "date": "2009-12-03T11:47:11Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2009-12-03T11:47:11Z"}, "message": "spu-elf.h (STARTFILE_SPEC): Add support for gprof startup files.\n\n2009-12-03  Ken Werner  <ken.werner@de.ibm.com>\n\n        * config/spu/spu-elf.h (STARTFILE_SPEC): Add support for gprof\n        startup files.\n        * config/spu/spu-protos.h (spu_function_profiler): Add prototype.\n        * config/spu/spu.c (spu_function_profiler): New function.\n        * config/spu/spu.h (FUNCTION_PROFILER): Invoke\n        spu_function_profiler.\n        (NO_PROFILE_COUNTERS): Define.\n        (PROFILE_BEFORE_PROLOGUE): Likewise.\n\nFrom-SVN: r154942", "tree": {"sha": "7f5f51f98868e2a8b233b4416608dcf28a4a766c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f5f51f98868e2a8b233b4416608dcf28a4a766c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75741fedc51736373fbcd3a028af872791ac79e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75741fedc51736373fbcd3a028af872791ac79e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75741fedc51736373fbcd3a028af872791ac79e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75741fedc51736373fbcd3a028af872791ac79e2/comments", "author": null, "committer": null, "parents": [{"sha": "a27c404027f2a072be6c085ff407977e244624ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a27c404027f2a072be6c085ff407977e244624ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a27c404027f2a072be6c085ff407977e244624ad"}], "stats": {"total": 31, "additions": 27, "deletions": 4}, "files": [{"sha": "ac920ddcc88caf8dfbb12f80d9ab4954b62daaa7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75741fedc51736373fbcd3a028af872791ac79e2", "patch": "@@ -1,3 +1,14 @@\n+2009-12-03  Ken Werner  <ken.werner@de.ibm.com>\n+\n+        * config/spu/spu-elf.h (STARTFILE_SPEC): Add support for gprof\n+        startup files.\n+        * config/spu/spu-protos.h (spu_function_profiler): Add prototype.\n+        * config/spu/spu.c (spu_function_profiler): New function.\n+        * config/spu/spu.h (FUNCTION_PROFILER): Invoke\n+        spu_function_profiler.\n+        (NO_PROFILE_COUNTERS): Define.\n+        (PROFILE_BEFORE_PROLOGUE): Likewise.\n+\n 2009-12-03  Dave Korn  <dave.korn.cygwin@gmail.com>\n \n \t* ggc-page.c (struct free_object): Pull definition out ..."}, {"sha": "967c8abc6176d8fd543f101ae9e9a8832b3b8b63", "filename": "gcc/config/spu/spu-elf.h", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu-elf.h?ref=75741fedc51736373fbcd3a028af872791ac79e2", "patch": "@@ -48,8 +48,9 @@\n    object constructed before entering `main'.  */\n \n #undef  STARTFILE_SPEC \n-#define STARTFILE_SPEC \"%{mstdmain: crt2.o%s} %{!mstdmain: crt1.o%s} \\\n-\t\t\tcrti.o%s crtbegin.o%s\"\n+#define STARTFILE_SPEC \"%{mstdmain: %{pg|p:gcrt2.o%s;:crt2.o%s}}\\\n+                        %{!mstdmain: %{pg|p:gcrt1.o%s;:crt1.o%s}}\\\n+                        crti.o%s crtbegin.o%s\"\n \n #undef  ENDFILE_SPEC\n #define ENDFILE_SPEC   \"crtend.o%s crtn.o%s\""}, {"sha": "32bd25c30c9f77993e14f9e3610807942ec5a4af", "filename": "gcc/config/spu/spu-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu-protos.h?ref=75741fedc51736373fbcd3a028af872791ac79e2", "patch": "@@ -85,6 +85,7 @@ extern void spu_expand_sign_extend (rtx ops[]);\n extern void spu_expand_vector_init (rtx target, rtx vals);\n extern void spu_init_expanders (void);\n extern void spu_split_convert (rtx *);\n+extern void spu_function_profiler (FILE *, int);\n \n /* spu-c.c */\n extern tree spu_resolve_overloaded_builtin (location_t, tree fndecl,"}, {"sha": "3e04c17d790c4f18fdd7933e4968e8f0c3420a1e", "filename": "gcc/config/spu/spu.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.c?ref=75741fedc51736373fbcd3a028af872791ac79e2", "patch": "@@ -7074,4 +7074,11 @@ spu_split_convert (rtx ops[])\n     }\n }\n \n+void\n+spu_function_profiler (FILE * file, int labelno)\n+{\n+  fprintf (file, \"# profile\\n\");\n+  fprintf (file, \"brsl $75,  _mcount\\n\");\n+}\n+\n #include \"gt-spu.h\""}, {"sha": "6d471cea333277bec99e96e4c3604244798c2004", "filename": "gcc/config/spu/spu.h", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75741fedc51736373fbcd3a028af872791ac79e2/gcc%2Fconfig%2Fspu%2Fspu.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.h?ref=75741fedc51736373fbcd3a028af872791ac79e2", "patch": "@@ -393,9 +393,12 @@ targetm.resolve_overloaded_builtin = spu_resolve_overloaded_builtin;\t\\\n \f\n /* Profiling */\n \n-/* Nothing, for now. */\n #define FUNCTION_PROFILER(FILE, LABELNO)  \\\n-   fprintf (FILE, \"\\t\\n\")\n+  spu_function_profiler ((FILE), (LABELNO));\n+\n+#define NO_PROFILE_COUNTERS 1\n+\n+#define PROFILE_BEFORE_PROLOGUE 1\n \n \f\n /* Trampolines */"}]}