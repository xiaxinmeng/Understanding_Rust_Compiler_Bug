{"sha": "5fad6898708af706c5b21647d935112559f2494b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWZhZDY4OTg3MDhhZjcwNmM1YjIxNjQ3ZDkzNTExMjU1OWYyNDk0Yg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-08-14T01:38:53Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-08-14T01:38:53Z"}, "message": "(final_start_function): Always call sdbout_begin_function and\nxcoffout_begin_function, even if no line number info.\n\nFrom-SVN: r10231", "tree": {"sha": "59ff58365f596308c4ffbe10519c9069acba25f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59ff58365f596308c4ffbe10519c9069acba25f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5fad6898708af706c5b21647d935112559f2494b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fad6898708af706c5b21647d935112559f2494b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5fad6898708af706c5b21647d935112559f2494b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fad6898708af706c5b21647d935112559f2494b/comments", "author": null, "committer": null, "parents": [{"sha": "ba418aa40a65738e175e6e49ad5925a414b9fa8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba418aa40a65738e175e6e49ad5925a414b9fa8e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba418aa40a65738e175e6e49ad5925a414b9fa8e"}], "stats": {"total": 28, "additions": 15, "deletions": 13}, "files": [{"sha": "8ab4bdc855a0ff75b52add70b25d596dee9965bc", "filename": "gcc/final.c", "status": "modified", "additions": 15, "deletions": 13, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5fad6898708af706c5b21647d935112559f2494b/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5fad6898708af706c5b21647d935112559f2494b/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=5fad6898708af706c5b21647d935112559f2494b", "patch": "@@ -887,24 +887,26 @@ final_start_function (first, file, optimize)\n      so that the function's address will not appear to be\n      in the last statement of the preceding function.  */\n   if (NOTE_LINE_NUMBER (first) != NOTE_INSN_DELETED)\n-    {\n-      last_linenum = high_block_linenum = high_function_linenum\n-\t= NOTE_LINE_NUMBER (first);\n+    last_linenum = high_block_linenum = high_function_linenum\n+      = NOTE_LINE_NUMBER (first);\n \n-      /* For SDB and XCOFF, the function beginning must be marked between\n-\t the function label and the prologue.  */\n+  /* For SDB and XCOFF, the function beginning must be marked between\n+     the function label and the prologue.  We always need this, even when\n+     -g1 was used.  */\n #ifdef SDB_DEBUGGING_INFO\n-      if (write_symbols == SDB_DEBUG)\n-\tsdbout_begin_function (last_linenum);\n-      else\n+  if (write_symbols == SDB_DEBUG)\n+    sdbout_begin_function (last_linenum);\n+  else\n #endif\n #ifdef XCOFF_DEBUGGING_INFO\n-\tif (write_symbols == XCOFF_DEBUG)\n-\t  xcoffout_begin_function (file, last_linenum);\n-\telse\n+    if (write_symbols == XCOFF_DEBUG)\n+      xcoffout_begin_function (file, last_linenum);\n+    else\n #endif\t  \n-\t  output_source_line (file, first);\n-    }\n+      /* But only output line number for other debug info types if -g2\n+\t or better.  */\n+      if (NOTE_LINE_NUMBER (first) != NOTE_INSN_DELETED)\n+\toutput_source_line (file, first);\n \n #ifdef LEAF_REG_REMAP\n   if (leaf_function)"}]}