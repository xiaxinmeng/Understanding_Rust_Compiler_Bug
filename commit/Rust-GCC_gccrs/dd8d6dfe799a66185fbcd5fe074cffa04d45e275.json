{"sha": "dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ4ZDZkZmU3OTlhNjYxODVmYmNkNWZlMDc0Y2ZmYTA0ZDQ1ZTI3NQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2006-02-15T07:46:39Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2006-02-15T07:46:39Z"}, "message": "re PR libgomp/25938 (libgomp installs header files in version and target independent location)\n\n\tPR libgomp/25938\n\tPR libgomp/25984\nfortran/\n\t* Make-lang.in (install-finclude-dir): New goal.\n\t(fortran.install-common): Depend on install-finclude-dir.\n\t* lang-specs.h: If not -nostdinc, add -I finclude.\nlibgomp/\n\t* Makefile.am (fincludedir): New variable.\n\t(nodist_include_HEADERS): Remove Fortran files.\n\t(nodist_finclude_HEADERS): New variable.\n\t* Makefile.in: Regenerated.\n\nFrom-SVN: r111018", "tree": {"sha": "de43e2887704ae8b3ec08a0cb5c51194fc73b422", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/de43e2887704ae8b3ec08a0cb5c51194fc73b422"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b5b7039effaf21bad366d66ecffa2a0b457c9ae7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5b7039effaf21bad366d66ecffa2a0b457c9ae7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5b7039effaf21bad366d66ecffa2a0b457c9ae7"}], "stats": {"total": 79, "additions": 63, "deletions": 16}, "files": [{"sha": "5c6a3f73817e5651b5c13aa422f21efc7d03bacd", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "patch": "@@ -1,3 +1,11 @@\n+2006-02-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR libgomp/25938\n+\tPR libgomp/25984\n+\t* Make-lang.in (install-finclude-dir): New goal.\n+\t(fortran.install-common): Depend on install-finclude-dir.\n+\t* lang-specs.h: If not -nostdinc, add -I finclude.\n+\n 2006-02-14  Thomas Koenig  <Thomas.Koenig@online.de>\n \n         PR fortran/25045"}, {"sha": "3c704eb34b06e3583652dba206ac06d29ead3b8e", "filename": "gcc/fortran/Make-lang.in", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/gcc%2Ffortran%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/gcc%2Ffortran%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FMake-lang.in?ref=dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "patch": "@@ -172,13 +172,18 @@ $(htmldir)/gfortran/index.html: $(GFORTRAN_TEXI)\n gfortran.pod: $(GFORTRAN_TEXI)\n \t-$(TEXI2POD) < $(srcdir)/fortran/invoke.texi > $@\n \n+# Create or recreate the gfortran private include file directory.\n+install-finclude-dir: installdirs\n+\t-rm -rf $(DESTDIR)$(libsubdir)/finclude\n+\tmkdir $(DESTDIR)$(libsubdir)/finclude\n+\t-chmod a+rx $(DESTDIR)$(libsubdir)/finclude\n #\f\n # Install hooks:\n # f951 is installed elsewhere as part of $(COMPILERS).\n \n # Install the driver program as $(target)-gfortran\n # and also as either gfortran (if native) or $(tooldir)/bin/gfortran.\n-fortran.install-common: installdirs\n+fortran.install-common: install-finclude-dir installdirs\n \t-if [ -f f951$(exeext) ] ; then \\\n \t  rm -f $(DESTDIR)$(bindir)/$(GFORTRAN_INSTALL_NAME)$(exeext); \\\n \t  $(INSTALL_PROGRAM) gfortran$(exeext) $(DESTDIR)$(bindir)/$(GFORTRAN_INSTALL_NAME)$(exeext); \\"}, {"sha": "55c4d1ea19a2fcfc7c3af102a613f4950d8d4f06", "filename": "gcc/fortran/lang-specs.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/gcc%2Ffortran%2Flang-specs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/gcc%2Ffortran%2Flang-specs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang-specs.h?ref=dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "patch": "@@ -15,21 +15,21 @@ This file is licensed under the GPL.  */\n       %{E|M|MM:%(cpp_debug_options)}\\\n       %{!M:%{!MM:%{!E: -o %|.f |\\n\\\n     f951 %|.f %{!ffree-form:-ffixed-form} %(cc1_options) %{J*} %{I*}\\\n-      -fpreprocessed %{!fsyntax-only:%(invoke_as)}}}}\", 0, 0, 0},\n+      -fpreprocessed %{!nostdinc:-I finclude%s} %{!fsyntax-only:%(invoke_as)}}}}\", 0, 0, 0},\n {\".F90\", \"@f95-cpp-input\", 0, 0, 0},\n {\".F95\", \"@f95-cpp-input\", 0, 0, 0},\n {\"@f95-cpp-input\",\n   \"cc1 -E -lang-fortran -traditional-cpp -D_LANGUAGE_FORTRAN %(cpp_options) \\\n       %{E|M|MM:%(cpp_debug_options)}\\\n       %{!M:%{!MM:%{!E: -o %|.f95 |\\n\\\n     f951 %|.f95 %(cc1_options) %{J*} %{I*}\\\n-      -fpreprocessed %{!fsyntax-only:%(invoke_as)}}}}\", 0, 0, 0},\n+      -fpreprocessed %{!nostdinc:-I finclude%s} %{!fsyntax-only:%(invoke_as)}}}}\", 0, 0, 0},\n {\".f90\", \"@f95\", 0, 0, 0},\n {\".f95\", \"@f95\", 0, 0, 0},\n {\"@f95\", \"%{!E:f951 %i %(cc1_options) %{J*} %{I*}\\\n-         %{!fsyntax-only:%(invoke_as)}}\", 0, 0, 0},\n+         %{!nostdinc:-I finclude%s} %{!fsyntax-only:%(invoke_as)}}\", 0, 0, 0},\n {\".f\",   \"@f77\", 0, 0, 0},\n {\".for\", \"@f77\", 0, 0, 0},\n {\".FOR\", \"@f77\", 0, 0, 0},\n {\"@f77\", \"%{!E:f951 %i %{!ffree-form:-ffixed-form} %(cc1_options) %{J*} %{I*}\\\n-         %{!fsyntax-only:%(invoke_as)}}\", 0, 0, 0},\n+         %{!nostdinc:-I finclude%s} %{!fsyntax-only:%(invoke_as)}}\", 0, 0, 0},"}, {"sha": "58c98d476cf3579ec666603ca102076cbe56c83c", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "patch": "@@ -1,3 +1,12 @@\n+2006-02-15  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR libgomp/25938\n+\tPR libgomp/25984\n+\t* Makefile.am (fincludedir): New variable.\n+\t(nodist_include_HEADERS): Remove Fortran files.\n+\t(nodist_finclude_HEADERS): New variable.\n+\t* Makefile.in: Regenerated.\n+\n 2006-02-13  Jakub Jelinek  <jakub@redhat.com>\n \n \t* testsuite/libgomp.fortran/vla7.f90: Add -w to options."}, {"sha": "e4c5389e62d0a473b0250c457b33e8551aa2cfaf", "filename": "libgomp/Makefile.am", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/libgomp%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/libgomp%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FMakefile.am?ref=dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "patch": "@@ -9,6 +9,8 @@ gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)\n config_path = @config_path@\n search_path = $(addprefix $(top_srcdir)/config/, $(config_path)) $(top_srcdir)\n \n+fincludedir = $(libdir)/gcc/$(target_alias)/$(gcc_version)/finclude\n+\n empty =\n space = $(empty) $(empty)\n VPATH = $(subst $(space),:,$(strip $(search_path)))\n@@ -33,9 +35,9 @@ libgomp_la_SOURCES = alloc.c barrier.c critical.c env.c error.c iter.c \\\n \tlock.c mutex.c proc.c sem.c bar.c time.c fortran.c\n \n nodist_noinst_HEADERS = libgomp_f.h\n-nodist_include_HEADERS = omp.h omp_lib.h omp_lib.f90\n+nodist_include_HEADERS = omp.h\n if USE_FORTRAN\n-nodist_include_HEADERS += omp_lib.mod omp_lib_kinds.mod\n+nodist_finclude_HEADERS = omp_lib.h omp_lib.f90 omp_lib.mod omp_lib_kinds.mod\n endif\n \n omp_lib_kinds.mod: omp_lib.mod"}, {"sha": "3ddc85445d274de5cdeee4af62c73a5b862273fe", "filename": "libgomp/Makefile.in", "status": "modified", "additions": 32, "deletions": 9, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/libgomp%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8d6dfe799a66185fbcd5fe074cffa04d45e275/libgomp%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FMakefile.in?ref=dd8d6dfe799a66185fbcd5fe074cffa04d45e275", "patch": "@@ -39,7 +39,6 @@ POST_UNINSTALL = :\n build_triplet = @build@\n host_triplet = @host@\n target_triplet = @target@\n-@USE_FORTRAN_TRUE@am__append_1 = omp_lib.mod omp_lib_kinds.mod\n DIST_COMMON = $(am__configure_deps) $(srcdir)/../config.guess \\\n \t$(srcdir)/../config.sub $(srcdir)/../depcomp \\\n \t$(srcdir)/../install-sh $(srcdir)/../ltmain.sh \\\n@@ -70,7 +69,8 @@ am__vpath_adj = case $$p in \\\n   esac;\n am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;\n am__installdirs = \"$(DESTDIR)$(toolexeclibdir)\" \\\n-\t\"$(DESTDIR)$(includedir)\" \"$(DESTDIR)$(toolexeclibdir)\"\n+\t\"$(DESTDIR)$(fincludedir)\" \"$(DESTDIR)$(includedir)\" \\\n+\t\"$(DESTDIR)$(toolexeclibdir)\"\n toolexeclibLTLIBRARIES_INSTALL = $(INSTALL)\n LTLIBRARIES = $(toolexeclib_LTLIBRARIES)\n libgomp_la_LIBADD =\n@@ -104,10 +104,11 @@ RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \\\n \tinstall-recursive installcheck-recursive installdirs-recursive \\\n \tpdf-recursive ps-recursive uninstall-info-recursive \\\n \tuninstall-recursive\n+nodist_fincludeHEADERS_INSTALL = $(INSTALL_HEADER)\n nodist_includeHEADERS_INSTALL = $(INSTALL_HEADER)\n nodist_toolexeclibHEADERS_INSTALL = $(INSTALL_HEADER)\n-HEADERS = $(nodist_include_HEADERS) $(nodist_noinst_HEADERS) \\\n-\t$(nodist_toolexeclib_HEADERS)\n+HEADERS = $(nodist_finclude_HEADERS) $(nodist_include_HEADERS) \\\n+\t$(nodist_noinst_HEADERS) $(nodist_toolexeclib_HEADERS)\n ETAGS = etags\n CTAGS = ctags\n DIST_SUBDIRS = $(SUBDIRS)\n@@ -245,6 +246,7 @@ ACLOCAL_AMFLAGS = -I ../config\n SUBDIRS = testsuite\n gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)\n search_path = $(addprefix $(top_srcdir)/config/, $(config_path)) $(top_srcdir)\n+fincludedir = $(libdir)/gcc/$(target_alias)/$(gcc_version)/finclude\n empty = \n space = $(empty) $(empty)\n AM_CPPFLAGS = $(addprefix -I, $(search_path))\n@@ -261,7 +263,8 @@ libgomp_la_SOURCES = alloc.c barrier.c critical.c env.c error.c iter.c \\\n \tlock.c mutex.c proc.c sem.c bar.c time.c fortran.c\n \n nodist_noinst_HEADERS = libgomp_f.h\n-nodist_include_HEADERS = omp.h omp_lib.h omp_lib.f90 $(am__append_1)\n+nodist_include_HEADERS = omp.h\n+@USE_FORTRAN_TRUE@nodist_finclude_HEADERS = omp_lib.h omp_lib.f90 omp_lib.mod omp_lib_kinds.mod\n all: config.h\n \t$(MAKE) $(AM_MAKEFLAGS) all-recursive\n \n@@ -431,6 +434,23 @@ distclean-multi:\n maintainer-clean-multi:\n \t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean # $(MAKE)\n uninstall-info-am:\n+install-nodist_fincludeHEADERS: $(nodist_finclude_HEADERS)\n+\t@$(NORMAL_INSTALL)\n+\ttest -z \"$(fincludedir)\" || $(mkdir_p) \"$(DESTDIR)$(fincludedir)\"\n+\t@list='$(nodist_finclude_HEADERS)'; for p in $$list; do \\\n+\t  if test -f \"$$p\"; then d=; else d=\"$(srcdir)/\"; fi; \\\n+\t  f=$(am__strip_dir) \\\n+\t  echo \" $(nodist_fincludeHEADERS_INSTALL) '$$d$$p' '$(DESTDIR)$(fincludedir)/$$f'\"; \\\n+\t  $(nodist_fincludeHEADERS_INSTALL) \"$$d$$p\" \"$(DESTDIR)$(fincludedir)/$$f\"; \\\n+\tdone\n+\n+uninstall-nodist_fincludeHEADERS:\n+\t@$(NORMAL_UNINSTALL)\n+\t@list='$(nodist_finclude_HEADERS)'; for p in $$list; do \\\n+\t  f=$(am__strip_dir) \\\n+\t  echo \" rm -f '$(DESTDIR)$(fincludedir)/$$f'\"; \\\n+\t  rm -f \"$(DESTDIR)$(fincludedir)/$$f\"; \\\n+\tdone\n install-nodist_includeHEADERS: $(nodist_include_HEADERS)\n \t@$(NORMAL_INSTALL)\n \ttest -z \"$(includedir)\" || $(mkdir_p) \"$(DESTDIR)$(includedir)\"\n@@ -745,7 +765,7 @@ check: check-recursive\n all-am: Makefile $(LTLIBRARIES) all-multi $(HEADERS) config.h\n installdirs: installdirs-recursive\n installdirs-am:\n-\tfor dir in \"$(DESTDIR)$(toolexeclibdir)\" \"$(DESTDIR)$(includedir)\" \"$(DESTDIR)$(toolexeclibdir)\"; do \\\n+\tfor dir in \"$(DESTDIR)$(toolexeclibdir)\" \"$(DESTDIR)$(fincludedir)\" \"$(DESTDIR)$(includedir)\" \"$(DESTDIR)$(toolexeclibdir)\"; do \\\n \t  test -z \"$$dir\" || $(mkdir_p) \"$$dir\"; \\\n \tdone\n install: install-recursive\n@@ -794,7 +814,8 @@ info: info-recursive\n \n info-am:\n \n-install-data-am: install-nodist_includeHEADERS\n+install-data-am: install-nodist_fincludeHEADERS \\\n+\tinstall-nodist_includeHEADERS\n \n install-exec-am: install-multi install-nodist_toolexeclibHEADERS \\\n \tinstall-toolexeclibLTLIBRARIES\n@@ -825,7 +846,8 @@ ps: ps-recursive\n \n ps-am:\n \n-uninstall-am: uninstall-info-am uninstall-nodist_includeHEADERS \\\n+uninstall-am: uninstall-info-am uninstall-nodist_fincludeHEADERS \\\n+\tuninstall-nodist_includeHEADERS \\\n \tuninstall-nodist_toolexeclibHEADERS \\\n \tuninstall-toolexeclibLTLIBRARIES\n \n@@ -842,7 +864,7 @@ uninstall-info: uninstall-info-recursive\n \thtml-am info info-am install install-am install-data \\\n \tinstall-data-am install-exec install-exec-am install-info \\\n \tinstall-info-am install-man install-multi \\\n-\tinstall-nodist_includeHEADERS \\\n+\tinstall-nodist_fincludeHEADERS install-nodist_includeHEADERS \\\n \tinstall-nodist_toolexeclibHEADERS install-strip \\\n \tinstall-toolexeclibLTLIBRARIES installcheck installcheck-am \\\n \tinstalldirs installdirs-am maintainer-clean \\\n@@ -851,6 +873,7 @@ uninstall-info: uninstall-info-recursive\n \tmostlyclean-generic mostlyclean-libtool mostlyclean-multi \\\n \tmostlyclean-recursive pdf pdf-am ps ps-am tags tags-recursive \\\n \tuninstall uninstall-am uninstall-info-am \\\n+\tuninstall-nodist_fincludeHEADERS \\\n \tuninstall-nodist_includeHEADERS \\\n \tuninstall-nodist_toolexeclibHEADERS \\\n \tuninstall-toolexeclibLTLIBRARIES"}]}