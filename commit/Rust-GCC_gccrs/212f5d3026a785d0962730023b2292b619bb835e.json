{"sha": "212f5d3026a785d0962730023b2292b619bb835e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjEyZjVkMzAyNmE3ODVkMDk2MjczMDAyM2IyMjkyYjYxOWJiODM1ZQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1999-08-18T03:48:37Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "1999-08-18T03:48:37Z"}, "message": "natThread.cc (sleep): Turn 0 millis and 0 nanos into 1 nano.\n\n\t* java/lang/natThread.cc (sleep): Turn 0 millis and 0 nanos into 1\n\tnano.\n\t* include/quick-threads.h (_Jv_CondWait): Don't round to 0\n\tinappropriately.\n\nFrom-SVN: r28742", "tree": {"sha": "e62ab147ca40a3da56bb8dc266b403a97b282c03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e62ab147ca40a3da56bb8dc266b403a97b282c03"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/212f5d3026a785d0962730023b2292b619bb835e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/212f5d3026a785d0962730023b2292b619bb835e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/212f5d3026a785d0962730023b2292b619bb835e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/212f5d3026a785d0962730023b2292b619bb835e/comments", "author": null, "committer": null, "parents": [{"sha": "1b12a13e40038d786ee0e3e757fe03905ec5eecb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b12a13e40038d786ee0e3e757fe03905ec5eecb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b12a13e40038d786ee0e3e757fe03905ec5eecb"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "d4031dc3a81f83f5e52a3307c57b648dd890999b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/212f5d3026a785d0962730023b2292b619bb835e/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/212f5d3026a785d0962730023b2292b619bb835e/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=212f5d3026a785d0962730023b2292b619bb835e", "patch": "@@ -1,3 +1,10 @@\n+1999-08-17  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* java/lang/natThread.cc (sleep): Turn 0 millis and 0 nanos into 1\n+\tnano.\n+\t* include/quick-threads.h (_Jv_CondWait): Don't round to 0\n+\tinappropriately.\n+\n 1999-08-16  Tom Tromey  <tromey@cygnus.com>\n \n \t* configure: Rebuilt."}, {"sha": "4626add02f9fe7b12ccde3a830c6590a30bf94b0", "filename": "libjava/include/quick-threads.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/212f5d3026a785d0962730023b2292b619bb835e/libjava%2Finclude%2Fquick-threads.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/212f5d3026a785d0962730023b2292b619bb835e/libjava%2Finclude%2Fquick-threads.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fquick-threads.h?ref=212f5d3026a785d0962730023b2292b619bb835e", "patch": "@@ -38,7 +38,11 @@ inline int\n _Jv_CondWait (_Jv_ConditionVariable_t *cv, _Jv_Mutex_t *mu,\n \t      jlong millis, jint nanos)\n {\n-  return coop_condition_variable_wait (cv, mu, millis * 1000 + nanos / 1000);\n+  long micros = millis * 1000 + nanos / 1000;\n+  // Don't round to 0 inappropriately.\n+  if (! micros && (millis || nanos))\n+    micros = 1;\n+  return coop_condition_variable_wait (cv, mu, micros);\n }\n \n inline int"}, {"sha": "9dc192e12c4ff3182d43100d0996a2a306ece9d6", "filename": "libjava/java/lang/natThread.cc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/212f5d3026a785d0962730023b2292b619bb835e/libjava%2Fjava%2Flang%2FnatThread.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/212f5d3026a785d0962730023b2292b619bb835e/libjava%2Fjava%2Flang%2FnatThread.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatThread.cc?ref=212f5d3026a785d0962730023b2292b619bb835e", "patch": "@@ -214,6 +214,9 @@ java::lang::Thread::sleep (jlong millis, jint nanos)\n   if (millis < 0 || nanos < 0 || nanos > 999999)\n     _Jv_Throw (new IllegalArgumentException);\n \n+  if (millis == 0 && nanos == 0)\n+    ++nanos;\n+\n   Thread *current = currentThread ();\n   if (current->isInterrupted ())\n     _Jv_Throw (new InterruptedException);"}]}