{"sha": "a4850ce9b58d12158248dc7fbe1015646757c813", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQ4NTBjZTliNThkMTIxNTgyNDhkYzdmYmUxMDE1NjQ2NzU3YzgxMw==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-11-29T19:50:04Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-11-29T19:50:04Z"}, "message": "re PR c/67106 (ICE: verify_type failed:  type variant differs by TYPE_PACKED. with -g -fpack-struct)\n\n\n\tPR c/67106\n\t* gcc.c-torture/compile/pr67106.c: New testcase.\n\t* c-decl.c: Set TYPE_PACKED in variants.\n\nFrom-SVN: r231049", "tree": {"sha": "5038fae98694c34510484420846183c60625e9c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5038fae98694c34510484420846183c60625e9c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4850ce9b58d12158248dc7fbe1015646757c813", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4850ce9b58d12158248dc7fbe1015646757c813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4850ce9b58d12158248dc7fbe1015646757c813", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4850ce9b58d12158248dc7fbe1015646757c813/comments", "author": null, "committer": null, "parents": [{"sha": "75c8aac3cee7f1a7eda2c58f9b59ce4925509862", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75c8aac3cee7f1a7eda2c58f9b59ce4925509862", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75c8aac3cee7f1a7eda2c58f9b59ce4925509862"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "0655aef6c19dc8bde72f26469ed726b00e74a8bc", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=a4850ce9b58d12158248dc7fbe1015646757c813", "patch": "@@ -1,3 +1,8 @@\n+2015-11-29  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR c/67106\n+\t* c-decl.c: Set TYPE_PACKED in variants.\n+\n 2015-11-27  Martin Liska  <mliska@suse.cz>\n \n \tPR c++/68312"}, {"sha": "31de0a51e56431b0fd0efde6c91f1a71054d2116", "filename": "gcc/c/c-decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Fc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Fc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-decl.c?ref=a4850ce9b58d12158248dc7fbe1015646757c813", "patch": "@@ -7213,7 +7213,8 @@ start_struct (location_t loc, enum tree_code code, tree name,\n     }\n \n   C_TYPE_BEING_DEFINED (ref) = 1;\n-  TYPE_PACKED (ref) = flag_pack_struct;\n+  for (tree v = TYPE_MAIN_VARIANT (ref); v; v = TYPE_NEXT_VARIANT (v))\n+    TYPE_PACKED (v) = flag_pack_struct;\n \n   *enclosing_struct_parse_info = struct_parse_info;\n   struct_parse_info = XNEW (struct c_struct_parse_info);"}, {"sha": "23da95f08e86125a7728ad33b8090c29af1bd4db", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a4850ce9b58d12158248dc7fbe1015646757c813", "patch": "@@ -1,3 +1,8 @@\n+2015-11-29  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR c/67106\n+\t* gcc.c-torture/compile/pr67106.c: New testcase.\n+\n 2015-11-29  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR c/67581"}, {"sha": "2a003e56f2e021f5be3ffaf6d83d936a1962d641", "filename": "gcc/testsuite/gcc.c-torture/compile/pr67106.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr67106.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4850ce9b58d12158248dc7fbe1015646757c813/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr67106.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr67106.c?ref=a4850ce9b58d12158248dc7fbe1015646757c813", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-options \"-g -fpack-struct\" } */\n+typedef struct S S;\n+\n+struct S\n+{\n+  struct\n+  {\n+    S *s;\n+  };\n+  int a;\n+};\n+"}]}