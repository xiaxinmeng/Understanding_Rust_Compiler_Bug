{"sha": "0e081bde913120cdf87ac288c814dfcc9733eacb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGUwODFiZGU5MTMxMjBjZGY4N2FjMjg4YzgxNGRmY2M5NzMzZWFjYg==", "commit": {"author": {"name": "Ilya Enkovich", "email": "ilya.enkovich@intel.com", "date": "2015-04-07T14:06:38Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2015-04-07T14:06:38Z"}, "message": "ipa-comdats.c (ipa_comdats): Visit all thunks to set proper comdat group.\n\ngcc/\n\n\t* ipa-comdats.c (ipa_comdats): Visit all thunks\n\tto set proper comdat group.\n\ngcc/testsuite/\n\n\t* gcc.target/i386/mpx/chkp-thunk-comdat-1.cc: New.\n\t* gcc.target/i386/mpx/chkp-thunk-comdat-2.cc: New.\n\nFrom-SVN: r221896", "tree": {"sha": "8f957240cb28deb74c102eb67e39f84c0ab21990", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f957240cb28deb74c102eb67e39f84c0ab21990"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e081bde913120cdf87ac288c814dfcc9733eacb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e081bde913120cdf87ac288c814dfcc9733eacb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e081bde913120cdf87ac288c814dfcc9733eacb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e081bde913120cdf87ac288c814dfcc9733eacb/comments", "author": {"login": "ienkovich", "id": 18308708, "node_id": "MDQ6VXNlcjE4MzA4NzA4", "avatar_url": "https://avatars.githubusercontent.com/u/18308708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ienkovich", "html_url": "https://github.com/ienkovich", "followers_url": "https://api.github.com/users/ienkovich/followers", "following_url": "https://api.github.com/users/ienkovich/following{/other_user}", "gists_url": "https://api.github.com/users/ienkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ienkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ienkovich/subscriptions", "organizations_url": "https://api.github.com/users/ienkovich/orgs", "repos_url": "https://api.github.com/users/ienkovich/repos", "events_url": "https://api.github.com/users/ienkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/ienkovich/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "23ebaa42a22c616412345a069edb48a6dc25282d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23ebaa42a22c616412345a069edb48a6dc25282d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23ebaa42a22c616412345a069edb48a6dc25282d"}], "stats": {"total": 56, "additions": 55, "deletions": 1}, "files": [{"sha": "7b977dd8933e23e7d410923abd995d2b20c785ce", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0e081bde913120cdf87ac288c814dfcc9733eacb", "patch": "@@ -1,3 +1,8 @@\n+2015-04-07  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\t* ipa-comdats.c (ipa_comdats): Visit all thunks\n+\tto set proper comdat group.\n+\n 2015-04-07  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \tPR target/65489"}, {"sha": "e24359cff19a19217206cd7f2c682f6a79ee331e", "filename": "gcc/ipa-comdats.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Fipa-comdats.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Fipa-comdats.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-comdats.c?ref=0e081bde913120cdf87ac288c814dfcc9733eacb", "patch": "@@ -377,7 +377,7 @@ ipa_comdats (void)\n \t      fprintf (dump_file, \"To group: %s\\n\", IDENTIFIER_POINTER (group));\n \t    }\n \t  if (is_a <cgraph_node *> (symbol))\n-\t   dyn_cast <cgraph_node *>(symbol)->call_for_symbol_and_aliases\n+\t   dyn_cast <cgraph_node *>(symbol)->call_for_symbol_thunks_and_aliases\n \t\t  (set_comdat_group_1,\n \t\t   *comdat_head_map.get (group),\n \t\t   true);"}, {"sha": "a51b9c56abb74d34dd5669c0e1bb487c731b7427", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0e081bde913120cdf87ac288c814dfcc9733eacb", "patch": "@@ -1,3 +1,8 @@\n+2015-04-07  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\t* gcc.target/i386/mpx/chkp-thunk-comdat-1.cc: New.\n+\t* gcc.target/i386/mpx/chkp-thunk-comdat-2.cc: New.\n+\n 2015-04-07  Bin Cheng  <bin.cheng@arm.com>\n \n \t* gcc.target/arm/pr65647.c: Add option \"-mfloat-abi=soft\"."}, {"sha": "26d3c48a6214c6292767171f4724af9b10ff9d91", "filename": "gcc/testsuite/gcc.target/i386/mpx/chkp-thunk-comdat-1.cc", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fchkp-thunk-comdat-1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fchkp-thunk-comdat-1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fchkp-thunk-comdat-1.cc?ref=0e081bde913120cdf87ac288c814dfcc9733eacb", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fcheck-pointer-bounds -mmpx\" } */\n+\n+namespace\n+{\n+  template <int dim>\n+  int __attribute__((noinline))\n+  f1 ()\n+  {\n+    return dim;\n+  }\n+}\n+\n+int\n+test ()\n+{\n+  return f1<3> ();\n+}"}, {"sha": "2b1abe9b67d6c8034f1b7e444a56b967dbf9e058", "filename": "gcc/testsuite/gcc.target/i386/mpx/chkp-thunk-comdat-2.cc", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fchkp-thunk-comdat-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e081bde913120cdf87ac288c814dfcc9733eacb/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fchkp-thunk-comdat-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fmpx%2Fchkp-thunk-comdat-2.cc?ref=0e081bde913120cdf87ac288c814dfcc9733eacb", "patch": "@@ -0,0 +1,26 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fcheck-pointer-bounds -mmpx\" } */\n+\n+class c1\n+{\n+public:\n+  virtual int test1 (const char *);\n+};\n+\n+class c2\n+{\n+public:\n+  int test2 (const char *);\n+};\n+\n+int\n+c1::test1 (const char *)\n+{\n+  return 0;\n+}\n+\n+int\n+c2::test2 (const char *)\n+{\n+  return 0;\n+}"}]}