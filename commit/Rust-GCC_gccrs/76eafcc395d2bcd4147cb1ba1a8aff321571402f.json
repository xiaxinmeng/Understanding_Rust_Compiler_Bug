{"sha": "76eafcc395d2bcd4147cb1ba1a8aff321571402f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzZlYWZjYzM5NWQyYmNkNDE0N2NiMWJhMWE4YWZmMzIxNTcxNDAyZg==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@nextmovesoftware.com", "date": "2020-08-04T15:56:06Z"}, "committer": {"name": "Roger Sayle", "email": "roger@nextmovesoftware.com", "date": "2020-08-04T15:57:34Z"}, "message": "Test case for PR rtl-optimization/60473\n\nPR rtl-optimization/60473 is code quality regression that has\nbeen cured by improvements to register allocation.  For the function\nin the test case, GCC 4.4, 4.5 and 4.6 generated very poor code\nrequiring two mov instructions, and GCC 4.7 and 4.8 (when the PR was\nfiled) produced better but still poor code with one mov instruction.\nSince GCC 4.9 (including current mainline), it generates optimal\ncode with no mov instructions, matching what used to be generated\nin GCC 4.1.\n\n2020-08-04  Roger Sayle  <roger@nextmovesoftware.com>\n\ngcc/testsuite/ChangeLog\n\tPR rtl-optimization/60473\n\t* gcc.target/i386/pr60473.c: New test.", "tree": {"sha": "b3229a1f228034bb4fc5ddfeba8513129d87f9ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3229a1f228034bb4fc5ddfeba8513129d87f9ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76eafcc395d2bcd4147cb1ba1a8aff321571402f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76eafcc395d2bcd4147cb1ba1a8aff321571402f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76eafcc395d2bcd4147cb1ba1a8aff321571402f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76eafcc395d2bcd4147cb1ba1a8aff321571402f/comments", "author": {"login": "rogersayle", "id": 13512313, "node_id": "MDQ6VXNlcjEzNTEyMzEz", "avatar_url": "https://avatars.githubusercontent.com/u/13512313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rogersayle", "html_url": "https://github.com/rogersayle", "followers_url": "https://api.github.com/users/rogersayle/followers", "following_url": "https://api.github.com/users/rogersayle/following{/other_user}", "gists_url": "https://api.github.com/users/rogersayle/gists{/gist_id}", "starred_url": "https://api.github.com/users/rogersayle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rogersayle/subscriptions", "organizations_url": "https://api.github.com/users/rogersayle/orgs", "repos_url": "https://api.github.com/users/rogersayle/repos", "events_url": "https://api.github.com/users/rogersayle/events{/privacy}", "received_events_url": "https://api.github.com/users/rogersayle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rogersayle", "id": 13512313, "node_id": "MDQ6VXNlcjEzNTEyMzEz", "avatar_url": "https://avatars.githubusercontent.com/u/13512313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rogersayle", "html_url": "https://github.com/rogersayle", "followers_url": "https://api.github.com/users/rogersayle/followers", "following_url": "https://api.github.com/users/rogersayle/following{/other_user}", "gists_url": "https://api.github.com/users/rogersayle/gists{/gist_id}", "starred_url": "https://api.github.com/users/rogersayle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rogersayle/subscriptions", "organizations_url": "https://api.github.com/users/rogersayle/orgs", "repos_url": "https://api.github.com/users/rogersayle/repos", "events_url": "https://api.github.com/users/rogersayle/events{/privacy}", "received_events_url": "https://api.github.com/users/rogersayle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca2b8c082c4f16919071c9f8de8db0b33b54c405", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca2b8c082c4f16919071c9f8de8db0b33b54c405", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca2b8c082c4f16919071c9f8de8db0b33b54c405"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "d81962e7b679832efb6fcf6a537380751b335cc1", "filename": "gcc/testsuite/gcc.target/i386/pr60473.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76eafcc395d2bcd4147cb1ba1a8aff321571402f/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr60473.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76eafcc395d2bcd4147cb1ba1a8aff321571402f/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr60473.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr60473.c?ref=76eafcc395d2bcd4147cb1ba1a8aff321571402f", "patch": "@@ -0,0 +1,12 @@\n+/* PR rtl-optimization/60473  */\n+/* { dg-do compile { target { ! ia32 } } } */\n+/* { dg-options \"-O2\" } */\n+\n+unsigned long long foo()\n+{\n+  unsigned long long h,l;\n+  asm volatile (\"rdtsc\": \"=a\" (l), \"=d\" (h));\n+  return l | (h << 32);\n+}\n+\n+/* { dg-final { scan-assembler-not \"mov\" } } */"}]}