{"sha": "a9d2a88c55390736d1e948c0032e4aa79df59eda", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTlkMmE4OGM1NTM5MDczNmQxZTk0OGMwMDMyZTRhYTc5ZGY1OWVkYQ==", "commit": {"author": {"name": "Maxim Kuvyrkov", "email": "maxim@codesourcery.com", "date": "2012-08-16T02:13:21Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2012-08-16T02:13:21Z"}, "message": "Add missing ChangeLog entry for r190406\n\nFrom-SVN: r190436", "tree": {"sha": "962adf21328b8510b3b21f4eaf1dd8032d80b80f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/962adf21328b8510b3b21f4eaf1dd8032d80b80f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9d2a88c55390736d1e948c0032e4aa79df59eda", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9d2a88c55390736d1e948c0032e4aa79df59eda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9d2a88c55390736d1e948c0032e4aa79df59eda", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9d2a88c55390736d1e948c0032e4aa79df59eda/comments", "author": null, "committer": null, "parents": [{"sha": "18efc0dd75dd55353f0b93f129128695289a10cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18efc0dd75dd55353f0b93f129128695289a10cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18efc0dd75dd55353f0b93f129128695289a10cd"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "9cdba8599e548e38d0026d793fd94135ee229c4c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9d2a88c55390736d1e948c0032e4aa79df59eda/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9d2a88c55390736d1e948c0032e4aa79df59eda/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a9d2a88c55390736d1e948c0032e4aa79df59eda", "patch": "@@ -306,6 +306,13 @@\n \t(neon_vdup_n<mode> VX, V32): Likewise.\n \t(neon_vdup_nv2di): Likewise.\n \n+2012-08-14  Maxim Kuvyrkov  <maxim@codesourcery.com>\n+\n+\t* config/mips/mips.md (define_attr accum_in): New instruction\n+\tattribute.  Set it for imadd and fmadd patterns.\n+\t* config/mips/mips.c (mips_linked_madd_p): Use accum_in to extract\n+\taccumulator register.\n+\n 2012-08-14   Diego Novillo  <dnovillo@google.com>\n \n \tMerge from cxx-conversion branch.  Configury."}, {"sha": "248e46eb8b3e4c43b9cee3496860cfcfd4815304", "filename": "gcc/config/mips/mips-dspr2.md", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9d2a88c55390736d1e948c0032e4aa79df59eda/gcc%2Fconfig%2Fmips%2Fmips-dspr2.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9d2a88c55390736d1e948c0032e4aa79df59eda/gcc%2Fconfig%2Fmips%2Fmips-dspr2.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-dspr2.md?ref=a9d2a88c55390736d1e948c0032e4aa79df59eda", "patch": "@@ -68,6 +68,7 @@\n   UNSPEC_DPAQX_SA_W_PH\n   UNSPEC_DPSQX_S_W_PH\n   UNSPEC_DPSQX_SA_W_PH\n+  UNSPEC_ACC_INIT\n ])\n \n (define_insn \"mips_absq_s_qb\"\n@@ -630,3 +631,33 @@\n   [(set_attr \"type\"\t\"dspmacsat\")\n    (set_attr \"accum_in\" \"1\")\n    (set_attr \"mode\"\t\"SI\")])\n+\n+;; Convert  mtlo $ac[1-3],$0  =>  mult $ac[1-3],$0,$0\n+;;          mthi $ac[1-3],$0\n+(define_peephole2\n+  [(set (match_operand:SI 0 \"register_operand\" \"\")\n+\t(const_int 0))\n+   (set (match_operand:SI 1 \"register_operand\" \"\")\n+\t(const_int 0))]\n+  \"ISA_HAS_DSPR2\n+   && !TARGET_MIPS16\n+   && !TARGET_64BIT\n+   && true_regnum (operands[0]) >= DSP_ACC_REG_FIRST\n+   && true_regnum (operands[0]) <= DSP_ACC_REG_LAST\n+   && true_regnum (operands[0]) / 2 == true_regnum (operands[1]) / 2\"\n+  [(parallel [(set (match_dup 0) (const_int 0))\n+\t      (set (match_dup 1) (const_int 0))\n+\t      (unspec [(const_int 0)] UNSPEC_ACC_INIT)])]\n+)\n+\n+(define_insn \"*mips_acc_init\"\n+  [(parallel\n+    [(set (match_operand:SI 0 \"register_operand\" \"=a\") (const_int 0))\n+     (set (match_operand:SI 1 \"register_operand\" \"=a\") (const_int 0))\n+     (unspec [(const_int 0)] UNSPEC_ACC_INIT)])]\n+  \"ISA_HAS_DSPR2\n+   && !TARGET_MIPS16\n+   && !TARGET_64BIT\"\n+  \"mult\\t%q0,$0,$0\\t\\t# Clear ACC HI/LO\"\n+  [(set_attr \"type\"\t\"imul\")\n+   (set_attr \"mode\"\t\"SI\")])"}]}