{"sha": "60aef23e3893b32703adcfbd49037b72ca6b21f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjBhZWYyM2UzODkzYjMyNzAzYWRjZmJkNDkwMzdiNzJjYTZiMjFmMg==", "commit": {"author": {"name": "Daniel Jacobowitz", "email": "dan@codesourcery.com", "date": "2005-11-16T22:10:39Z"}, "committer": {"name": "Daniel Jacobowitz", "email": "drow@gcc.gnu.org", "date": "2005-11-16T22:10:39Z"}, "message": "unwind-ia64.c (uw_advance_context): New.\n\n\t* config/ia64/unwind-ia64.c (uw_advance_context): New.  Call\n\tuw_update_context.\n\t* unwind-dw2.c (uw_advance_context): Likewise.\n\t* unwind-sjlj.c (uw_advance_context): Likewise.  Also call\n\t_Unwind_SjLj_Unregister.\n\t* unwind.inc (_Unwind_ForcedUnwind_Phase2): Call uw_advance_context.\n\nFrom-SVN: r107103", "tree": {"sha": "eee487b7c8a5cd39e5ffc9431300e3caa8c8935e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eee487b7c8a5cd39e5ffc9431300e3caa8c8935e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60aef23e3893b32703adcfbd49037b72ca6b21f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60aef23e3893b32703adcfbd49037b72ca6b21f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60aef23e3893b32703adcfbd49037b72ca6b21f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60aef23e3893b32703adcfbd49037b72ca6b21f2/comments", "author": null, "committer": null, "parents": [{"sha": "0e32bbcc674601f8a59109568a548692bbfa9e24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e32bbcc674601f8a59109568a548692bbfa9e24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e32bbcc674601f8a59109568a548692bbfa9e24"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "d0ef8fc110f19896b1ba30a5eb2b7de11bc33013", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=60aef23e3893b32703adcfbd49037b72ca6b21f2", "patch": "@@ -1,3 +1,12 @@\n+2005-11-16  Daniel Jacobowitz  <dan@codesourcery.com>\n+\n+\t* config/ia64/unwind-ia64.c (uw_advance_context): New.  Call\n+\tuw_update_context.\n+\t* unwind-dw2.c (uw_advance_context): Likewise.\n+\t* unwind-sjlj.c (uw_advance_context): Likewise.  Also call\n+\t_Unwind_SjLj_Unregister.\n+\t* unwind.inc (_Unwind_ForcedUnwind_Phase2): Call uw_advance_context.\n+\n 2005-11-16  Daniel Jacobowitz  <dan@codesourcery.com>\n \n \t* unwind-sjlj.c (_Unwind_GetCFA): Handle the builtin_setjmp case."}, {"sha": "c1be3133fbe83950a783276b2f8b26e1b57b539e", "filename": "gcc/config/ia64/unwind-ia64.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Fconfig%2Fia64%2Funwind-ia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Fconfig%2Fia64%2Funwind-ia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Funwind-ia64.c?ref=60aef23e3893b32703adcfbd49037b72ca6b21f2", "patch": "@@ -2060,6 +2060,12 @@ uw_update_context (struct _Unwind_Context *context, _Unwind_FrameState *fs)\n     }\n }\n \n+static void\n+uw_advance_context (struct _Unwind_Context *context, _Unwind_FrameState *fs)\n+{\n+  uw_update_context (context, fs);\n+}\n+\n /* Fill in CONTEXT for top-of-stack.  The only valid registers at this\n    level will be the return address and the CFA.  Note that CFA = SP+16.  */\n    "}, {"sha": "4626ec6d84cbe364441dcf54041ab6918110541a", "filename": "gcc/unwind-dw2.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Funwind-dw2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Funwind-dw2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-dw2.c?ref=60aef23e3893b32703adcfbd49037b72ca6b21f2", "patch": "@@ -1210,6 +1210,12 @@ uw_update_context (struct _Unwind_Context *context, _Unwind_FrameState *fs)\n   context->ra = __builtin_extract_return_addr\n     (_Unwind_GetPtr (context, fs->retaddr_column));\n }\n+\n+static void\n+uw_advance_context (struct _Unwind_Context *context, _Unwind_FrameState *fs)\n+{\n+  uw_update_context (context, fs);\n+}\n \f\n /* Fill in CONTEXT for top-of-stack.  The only valid registers at this\n    level will be the return address and the CFA.  */"}, {"sha": "4c06aa1f894a2bebc53f9ec155c3c0231a91cba0", "filename": "gcc/unwind-sjlj.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Funwind-sjlj.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Funwind-sjlj.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-sjlj.c?ref=60aef23e3893b32703adcfbd49037b72ca6b21f2", "patch": "@@ -276,6 +276,13 @@ uw_update_context (struct _Unwind_Context *context,\n   context->fc = context->fc->prev;\n }\n \n+static void\n+uw_advance_context (struct _Unwind_Context *context, _Unwind_FrameState *fs)\n+{\n+  _Unwind_SjLj_Unregister (context->fc);\n+  uw_update_context (context, fs);\n+}\n+\n static inline void\n uw_init_context (struct _Unwind_Context *context)\n {"}, {"sha": "b533eb58873286ac22d238450324591492eb4013", "filename": "gcc/unwind.inc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Funwind.inc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60aef23e3893b32703adcfbd49037b72ca6b21f2/gcc%2Funwind.inc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind.inc?ref=60aef23e3893b32703adcfbd49037b72ca6b21f2", "patch": "@@ -184,8 +184,9 @@ _Unwind_ForcedUnwind_Phase2 (struct _Unwind_Exception *exc,\n \t    return _URC_FATAL_PHASE2_ERROR;\n \t}\n \n-      /* Update cur_context to describe the same frame as fs.  */\n-      uw_update_context (context, &fs);\n+      /* Update cur_context to describe the same frame as fs, and discard\n+\t the previous context if necessary.  */\n+      uw_advance_context (context, &fs);\n     }\n \n   return code;"}]}