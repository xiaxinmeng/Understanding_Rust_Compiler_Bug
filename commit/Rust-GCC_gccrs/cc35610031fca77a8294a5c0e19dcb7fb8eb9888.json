{"sha": "cc35610031fca77a8294a5c0e19dcb7fb8eb9888", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2MzNTYxMDAzMWZjYTc3YTgyOTRhNWMwZTE5ZGNiN2ZiOGViOTg4OA==", "commit": {"author": {"name": "Pascal Obry", "email": "obry@gnat.com", "date": "2004-10-27T12:28:25Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2004-10-27T12:28:25Z"}, "message": "s-parame-mingw.adb (Default_Stack_Size): Add some comments.\n\n2004-10-26  Pascal Obry  <obry@gnat.com>\n\n\t* s-parame-mingw.adb (Default_Stack_Size): Add some comments.\n\n\t* s-taprop-mingw.adb (Create_Task): Set initial stack size to 1024. On\n\tWindows only the initial thread stack size can be set so it is good to\n\tstart we a low stack size.\n\tThe OS will adjust the size as needed.\n\nFrom-SVN: r89641", "tree": {"sha": "0db4c40cdc047ab66734576e2532ca51e81ab5ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0db4c40cdc047ab66734576e2532ca51e81ab5ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc35610031fca77a8294a5c0e19dcb7fb8eb9888", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc35610031fca77a8294a5c0e19dcb7fb8eb9888", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc35610031fca77a8294a5c0e19dcb7fb8eb9888", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc35610031fca77a8294a5c0e19dcb7fb8eb9888/comments", "author": null, "committer": null, "parents": [{"sha": "9d96e398afe016d4fcc1def0a5ecfa30517e1455", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d96e398afe016d4fcc1def0a5ecfa30517e1455", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d96e398afe016d4fcc1def0a5ecfa30517e1455"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "88d660fb0f071b8210d2656baf7468d236b299f0", "filename": "gcc/ada/s-parame-mingw.adb", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc35610031fca77a8294a5c0e19dcb7fb8eb9888/gcc%2Fada%2Fs-parame-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc35610031fca77a8294a5c0e19dcb7fb8eb9888/gcc%2Fada%2Fs-parame-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-parame-mingw.adb?ref=cc35610031fca77a8294a5c0e19dcb7fb8eb9888", "patch": "@@ -56,6 +56,12 @@ package body System.Parameters is\n    -- Default_Stack_Size --\n    ------------------------\n \n+   --  Note that on Windows this is not really the default stack size. It\n+   --  is the default used for the stack checking support but there is no\n+   --  way to set the thread stack size at runtime. Only the initial thread\n+   --  stack size can be specified. The real stack size limit is set at\n+   --  link time. See GNU/Linker --stack=x,y option.\n+\n    function Default_Stack_Size return Size_Type is\n    begin\n       return 20 * 1024;"}, {"sha": "e85d90320b7a4e43d5608b17e15b5096fc82c889", "filename": "gcc/ada/s-taprop-mingw.adb", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc35610031fca77a8294a5c0e19dcb7fb8eb9888/gcc%2Fada%2Fs-taprop-mingw.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc35610031fca77a8294a5c0e19dcb7fb8eb9888/gcc%2Fada%2Fs-taprop-mingw.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-taprop-mingw.adb?ref=cc35610031fca77a8294a5c0e19dcb7fb8eb9888", "patch": "@@ -843,6 +843,13 @@ package body System.Task_Primitives.Operations is\n       Priority   : System.Any_Priority;\n       Succeeded  : out Boolean)\n    is\n+      pragma Unreferenced (Stack_Size);\n+\n+      Initial_Stack_Size : constant := 1024;\n+      --  We set the initial stack size to 1024. On Windows there is no way to\n+      --  fix a task stack size. Only the initial stack size can be set, the\n+      --  operating system will raise the task stack size if needed.\n+\n       hTask          : HANDLE;\n       TaskId         : aliased DWORD;\n       pTaskParameter : System.OS_Interface.PVOID;\n@@ -856,7 +863,7 @@ package body System.Task_Primitives.Operations is\n \n       hTask := CreateThread\n          (null,\n-          DWORD (Adjust_Storage_Size (Stack_Size)),\n+          Initial_Stack_Size,\n           Entry_Point,\n           pTaskParameter,\n           DWORD (Create_Suspended),"}]}