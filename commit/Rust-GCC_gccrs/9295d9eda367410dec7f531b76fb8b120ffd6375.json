{"sha": "9295d9eda367410dec7f531b76fb8b120ffd6375", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTI5NWQ5ZWRhMzY3NDEwZGVjN2Y1MzFiNzZmYjhiMTIwZmZkNjM3NQ==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael.morin@tele2.fr", "date": "2009-01-19T22:19:34Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2009-01-19T22:19:34Z"}, "message": "re PR fortran/38859 (ubound and lbound treat structure component references as whole arrays)\n\n2009-01-19  Mikael Morin  <mikael.morin@tele2.fr>\n\n\tPR fortran/38859\n\t* simplify.c (simplify_bound): Don't use array specification\n\tif variable or component has subsequent references.\n\n2009-01-19  Mikael Morin  <mikael.morin@tele2.fr>\n\n\tPR fortran/38859\n\t* gfortran.dg/bound_5.f90: New test.\n\nFrom-SVN: r143501", "tree": {"sha": "f4dece352a8ed71d31519c9053b6277246a3edc4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f4dece352a8ed71d31519c9053b6277246a3edc4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9295d9eda367410dec7f531b76fb8b120ffd6375", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9295d9eda367410dec7f531b76fb8b120ffd6375", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9295d9eda367410dec7f531b76fb8b120ffd6375", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9295d9eda367410dec7f531b76fb8b120ffd6375/comments", "author": null, "committer": null, "parents": [{"sha": "f68211cd04d4083f4c12542f1b56ac09e995f9fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f68211cd04d4083f4c12542f1b56ac09e995f9fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f68211cd04d4083f4c12542f1b56ac09e995f9fd"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "2f33c655d96f4992ca482eba9ac87309637a0075", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=9295d9eda367410dec7f531b76fb8b120ffd6375", "patch": "@@ -1,3 +1,9 @@\n+2009-01-19  Mikael Morin  <mikael.morin@tele2.fr>\n+\n+\tPR fortran/38859\n+\t* simplify.c (simplify_bound): Don't use array specification\n+\tif variable or component has subsequent references.\n+\n 2009-01-17  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/38657"}, {"sha": "c460f312db271bf547ddd03588fc622f4fc11c4d", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=9295d9eda367410dec7f531b76fb8b120ffd6375", "patch": "@@ -2253,7 +2253,10 @@ simplify_bound (gfc_expr *array, gfc_expr *dim, gfc_expr *kind, int upper)\n \t    case AR_FULL:\n \t      /* We're done because 'as' has already been set in the\n \t\t previous iteration.  */\n-\t      goto done;\n+\t      if (!ref->next)\n+\t        goto done;\n+\n+\t    /* Fall through.  */\n \n \t    case AR_SECTION:\n \t    case AR_UNKNOWN:"}, {"sha": "bbe897580dde30e65bf9470bda98c6cebd67d5d8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9295d9eda367410dec7f531b76fb8b120ffd6375", "patch": "@@ -1,3 +1,8 @@\n+2009-01-19  Mikael Morin  <mikael.morin@tele2.fr>\n+\n+\tPR fortran/38859\n+\t* gfortran.dg/bound_5.f90: New test.\n+\n 2009-01-18  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/38736"}, {"sha": "04245d6d869d8ea7e3d12beb48ddcb75960ff8df", "filename": "gcc/testsuite/gfortran.dg/bound_5.f90", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ftestsuite%2Fgfortran.dg%2Fbound_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9295d9eda367410dec7f531b76fb8b120ffd6375/gcc%2Ftestsuite%2Fgfortran.dg%2Fbound_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fbound_5.f90?ref=9295d9eda367410dec7f531b76fb8b120ffd6375", "patch": "@@ -0,0 +1,26 @@\n+! { dg-do run }\n+!\n+! PR fortran/38859\n+! Wrong bounds simplification\n+!\n+! Contributed by Dick Hendrickson <dick.hendrickson@gmail.com>\n+\n+       type x\n+         integer I\n+       end type x\n+       type (x) A(0:5, 2:8)\n+       integer ida(2)\n+\n+       ida = lbound(a)\n+       if (any(ida /= (/0,2/))) call abort\n+\n+       ida = lbound(a%i)\n+       if (any(ida /= (/1,1/))) call abort\n+\n+       ida = ubound(a)\n+       if (any(ida /= (/5,8/))) call abort\n+       \n+       ida = ubound(a%i)\n+       if (any(ida /= (/6,7/))) call abort\n+\n+       end"}]}