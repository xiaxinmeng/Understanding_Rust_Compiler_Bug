{"sha": "bc013f005fb9d4315225ccdd1f5d80c93ffb250b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMwMTNmMDA1ZmI5ZDQzMTUyMjVjY2RkMWY1ZDgwYzkzZmZiMjUwYg==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-07-25T21:02:10Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-07-25T21:02:10Z"}, "message": "cpplib.c (_cpp_check_directive): Issue -Wtraditional warnings for indented directives even if we are skipping.\n\n\t* cpplib.c (_cpp_check_directive): Issue -Wtraditional\n\twarnings for indented directives even if we are skipping.\n\nFrom-SVN: r35256", "tree": {"sha": "ada350f089f1e4c6136bd4c8d2b3cba9658a0a1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ada350f089f1e4c6136bd4c8d2b3cba9658a0a1b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc013f005fb9d4315225ccdd1f5d80c93ffb250b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc013f005fb9d4315225ccdd1f5d80c93ffb250b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc013f005fb9d4315225ccdd1f5d80c93ffb250b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc013f005fb9d4315225ccdd1f5d80c93ffb250b/comments", "author": null, "committer": null, "parents": [{"sha": "f47e40847d4c6dcbecf637540f0f47aaebb75982", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f47e40847d4c6dcbecf637540f0f47aaebb75982", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f47e40847d4c6dcbecf637540f0f47aaebb75982"}], "stats": {"total": 36, "additions": 23, "deletions": 13}, "files": [{"sha": "90527ac01fdbf3f1a854a1c0acc812cfbc62a974", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc013f005fb9d4315225ccdd1f5d80c93ffb250b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc013f005fb9d4315225ccdd1f5d80c93ffb250b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bc013f005fb9d4315225ccdd1f5d80c93ffb250b", "patch": "@@ -1,3 +1,8 @@\n+2000-07-25  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* cpplib.c (_cpp_check_directive): Issue -Wtraditional\n+\twarnings for indented directives even if we are skipping.\n+\n 2000-07-25  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* invoke.texi (strict-prototypes): Remove."}, {"sha": "7d7bbc2fb1a480405415d706a59da8d586404c78", "filename": "gcc/cpplib.c", "status": "modified", "additions": 18, "deletions": 13, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc013f005fb9d4315225ccdd1f5d80c93ffb250b/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc013f005fb9d4315225ccdd1f5d80c93ffb250b/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=bc013f005fb9d4315225ccdd1f5d80c93ffb250b", "patch": "@@ -154,28 +154,33 @@ _cpp_check_directive (pfile, token, bol)\n   for (i = 0; i < N_DIRECTIVES; i++)\n     if (pfile->spec_nodes->dirs[i] == token->val.node)\n       {\n+\t/* In -traditional mode, a directive is ignored unless its #\n+\t   is in column 1.  In code intended to work with K+R compilers,\n+\t   therefore, directives added by C89 must have their # indented,\n+\t   and directives present in traditional C must not.  This is true\n+\t   even of directives in skipped conditional blocks.  */\n+\tif (CPP_WTRADITIONAL (pfile))\n+\t  {\n+\t    if (!bol && dtable[i].origin == KANDR)\n+\t      cpp_warning (pfile,\n+\t\t\t   \"traditional C ignores #%s with the # indented\",\n+\t\t\t   dtable[i].name);\n+\n+\t    if (bol && dtable[i].origin != KANDR)\n+\t      cpp_warning (pfile,\n+\t\t    \"suggest hiding #%s from traditional C with an indented #\",\n+\t\t\t   dtable[i].name);\n+\t  }\n+\n \t/* If we are skipping a failed conditional group, all non-conditional\n \t   directives are ignored.  */\n \tif (pfile->skipping && !(dtable[i].flags & COND))\n \t  return 0;\n \n-\t/* In -traditional mode, a directive is ignored unless its #\n-\t   is in column 1.  */\n-\tif (!bol && dtable[i].origin == KANDR && CPP_WTRADITIONAL (pfile))\n-\t  cpp_warning (pfile, \"traditional C ignores #%s with the # indented\",\n-\t\t       dtable[i].name);\n-\n \t/* Issue -pedantic warnings for extended directives.   */\n \tif (CPP_PEDANTIC (pfile) && dtable[i].origin == EXTENSION)\n \t  cpp_pedwarn (pfile, \"ISO C does not allow #%s\", dtable[i].name);\n \n-\t/* -Wtraditional gives warnings about directives with inappropriate\n-\t   indentation of #.  */\n-\tif (bol && dtable[i].origin != KANDR && CPP_WTRADITIONAL (pfile))\n-\t  cpp_warning (pfile,\n-\t\t    \"suggest hiding #%s from traditional C with an indented #\",\n-\t\t       dtable[i].name);\n-\n \treturn &dtable[i];\n       }\n "}]}