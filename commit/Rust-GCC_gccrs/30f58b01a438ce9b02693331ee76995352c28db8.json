{"sha": "30f58b01a438ce9b02693331ee76995352c28db8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzBmNThiMDFhNDM4Y2U5YjAyNjkzMzMxZWU3Njk5NTM1MmMyOGRiOA==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-01-25T17:41:01Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-01-25T17:41:01Z"}, "message": "i860-protos.h: Remove the prototype for i860_saveregs.\n\n\t* config/i860/i860-protos.h: Remove the prototype for\n\ti860_saveregs.\n\t* config/i860/i860.c (i860_saveregs): Make it static.\n\t(i860_struct_value_rtx): New.\n\t(TARGET_STRUCT_VALUE_RTX): Likewise.\n\t(TARGET_EXPAND_BUILTIN_SAVEREGS): Likewise.\n\t* config/i860/i860.h (STRUCT_VALUE_REGNUM): Rename to\n\tI860_STRUCT_VALUE_REGNUM.\n\t(EXPAND_BUILTIN_SAVEREGS): Remove.\n\nFrom-SVN: r76572", "tree": {"sha": "3420a1c2297e145f74c4c90cd6c50baf4792740d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3420a1c2297e145f74c4c90cd6c50baf4792740d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30f58b01a438ce9b02693331ee76995352c28db8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30f58b01a438ce9b02693331ee76995352c28db8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30f58b01a438ce9b02693331ee76995352c28db8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30f58b01a438ce9b02693331ee76995352c28db8/comments", "author": null, "committer": null, "parents": [{"sha": "341ec19196f69851b0469a2a2ef480d287d081f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/341ec19196f69851b0469a2a2ef480d287d081f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/341ec19196f69851b0469a2a2ef480d287d081f9"}], "stats": {"total": 40, "additions": 30, "deletions": 10}, "files": [{"sha": "937288934a2aff67f44e11d2a20285f0c5c56b2e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=30f58b01a438ce9b02693331ee76995352c28db8", "patch": "@@ -1,3 +1,15 @@\n+2004-01-25  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/i860/i860-protos.h: Remove the prototype for\n+\ti860_saveregs.\n+\t* config/i860/i860.c (i860_saveregs): Make it static.\n+\t(i860_struct_value_rtx): New.\n+\t(TARGET_STRUCT_VALUE_RTX): Likewise.\n+\t(TARGET_EXPAND_BUILTIN_SAVEREGS): Likewise.\n+\t* config/i860/i860.h (STRUCT_VALUE_REGNUM): Rename to\n+\tI860_STRUCT_VALUE_REGNUM.\n+\t(EXPAND_BUILTIN_SAVEREGS): Remove.\n+\n 2004-01-25  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/m68hc11/m68hc11.c (TARGET_STRUCT_VALUE_RTX): New."}, {"sha": "b155b86130d4ebb283de2175b9268567dff501bb", "filename": "gcc/config/i860/i860-protos.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2Fconfig%2Fi860%2Fi860-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2Fconfig%2Fi860%2Fi860-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi860%2Fi860-protos.h?ref=30f58b01a438ce9b02693331ee76995352c28db8", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler, for Intel 860.\n-   Copyright (C) 2000, 2003 Free Software Foundation, Inc.\n+   Copyright (C) 2000, 2003, 2004 Free Software Foundation, Inc.\n    Hacked substantially by Ron Guilmette (rfg@monkeys.com) to cater to\n    the whims of the System V Release 4 assembler.\n \n@@ -44,7 +44,6 @@ extern int load_operand (rtx, enum machine_mode);\n extern int small_int (rtx, enum machine_mode);\n extern int logic_int (rtx, enum machine_mode);\n extern int call_insn_operand (rtx, enum machine_mode);\n-extern rtx i860_saveregs (void);\n #ifdef TREE_CODE\n extern void i860_va_start (tree, rtx);\n extern rtx i860_va_arg (tree, tree);"}, {"sha": "178cab0ad0c3bf3899accef7aed97481618b30c3", "filename": "gcc/config/i860/i860.c", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2Fconfig%2Fi860%2Fi860.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2Fconfig%2Fi860%2Fi860.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi860%2Fi860.c?ref=30f58b01a438ce9b02693331ee76995352c28db8", "patch": "@@ -1,5 +1,5 @@\n /* Subroutines for insn-output.c for Intel i860\n-   Copyright (C) 1989, 1991, 1997, 1998, 1999, 2000, 2001, 2002, 2003\n+   Copyright (C) 1989, 1991, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004\n    Free Software Foundation, Inc.\n    Derived from sparc.c.\n \n@@ -1775,7 +1775,7 @@ i860_output_function_epilogue (FILE *asm_file, HOST_WIDE_INT local_bytes)\n \n /* Expand a library call to __builtin_saveregs.  */\n \n-rtx\n+static rtx\n i860_saveregs (void)\n {\n   rtx fn = gen_rtx_SYMBOL_REF (Pmode, \"__builtin_saveregs\");\n@@ -2101,6 +2101,13 @@ i860_init_libfuncs (void)\n   set_optab_libfunc (umod_optab, SImode, \"*.urem\");\n }\n \n+static rtx\n+i860_struct_value_rtx (tree fntype ATTRIBUTE_UNUSED,\n+\t\t       int incoming ATTRIBUTE_UNUSED)\n+{\n+  return gen_rtx_REG (Pmode, I860_STRUCT_VALUE_REGNUM);\n+}\n+\n /* Initialize the GCC target structure.  */\n #undef TARGET_RTX_COSTS\n #define TARGET_RTX_COSTS i860_rtx_costs\n@@ -2120,4 +2127,10 @@ i860_init_libfuncs (void)\n #undef TARGET_BUILD_BUILTIN_VA_LIST\n #define TARGET_BUILD_BUILTIN_VA_LIST i860_build_builtin_va_list\n \n+#undef TARGET_STRUCT_VALUE_RTX\n+#define TARGET_STRUCT_VALUE_RTX i860_struct_value_rtx\n+\n+#undef TARGET_EXPAND_BUILTIN_SAVEREGS\n+#define TARGET_EXPAND_BUILTIN_SAVEREGS i860_saveregs\n+\n struct gcc_target targetm = TARGET_INITIALIZER;"}, {"sha": "0a518abd4020734f5e0ff5f1b986f68ab2003d19", "filename": "gcc/config/i860/i860.h", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2Fconfig%2Fi860%2Fi860.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30f58b01a438ce9b02693331ee76995352c28db8/gcc%2Fconfig%2Fi860%2Fi860.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi860%2Fi860.h?ref=30f58b01a438ce9b02693331ee76995352c28db8", "patch": "@@ -1,6 +1,6 @@\n /* Definitions of target machine for GNU compiler, for Intel 860.\n    Copyright (C) 1989, 1991, 1993, 1995, 1996, 1997, 1998, 1999, 2000,\n-   2001, 2002, 2003 Free Software Foundation, Inc.\n+   2001, 2002, 2003, 2004 Free Software Foundation, Inc.\n    Hacked substantially by Ron Guilmette (rfg@monkeys.com) to cater to\n    the whims of the System V Release 4 assembler.\n \n@@ -240,7 +240,7 @@ extern int target_flags;\n \n /* Register in which address to store a structure value\n    is passed to a function.  */\n-#define STRUCT_VALUE_REGNUM 16\n+#define I860_STRUCT_VALUE_REGNUM 16\n \n /* Register to use when a source of a floating-point zero is needed.  */\n #define F0_REGNUM\t32\n@@ -567,10 +567,6 @@ struct cumulative_args { int ints, floats; };\n \n #define EXIT_IGNORE_STACK 1\n \n-/* Generate necessary RTL for __builtin_saveregs().  */\n-#define EXPAND_BUILTIN_SAVEREGS() \\\n-  i860_saveregs()\n-\n /* Implement `va_start' for varargs and stdarg.  */\n #define EXPAND_BUILTIN_VA_START(valist, nextarg) \\\n   i860_va_start (valist, nextarg)"}]}