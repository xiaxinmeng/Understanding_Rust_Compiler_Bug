{"sha": "1779dc343a559d1d822e8cbcb998bcde049c5123", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTc3OWRjMzQzYTU1OWQxZDgyMmU4Y2JjYjk5OGJjZGUwNDljNTEyMw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2012-09-10T14:10:09Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-09-10T14:10:09Z"}, "message": "re PR middle-end/54520 (ice in merge_latch_edges with -O3)\n\n2012-09-10  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/54520\n\t* tree-ssa-threadupdate.c (def_split_header_continue_p):\n\tProperly consider sub-loops.\n\n\t* gcc.dg/torture/pr54520.c: New testcase.\n\nFrom-SVN: r191141", "tree": {"sha": "82f94d55b64eee4516e88feb661b06a6158dd92c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82f94d55b64eee4516e88feb661b06a6158dd92c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1779dc343a559d1d822e8cbcb998bcde049c5123", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1779dc343a559d1d822e8cbcb998bcde049c5123", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1779dc343a559d1d822e8cbcb998bcde049c5123", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1779dc343a559d1d822e8cbcb998bcde049c5123/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8f5a5a8ecd12377ea58ca7ddb326db59d6cd6436", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f5a5a8ecd12377ea58ca7ddb326db59d6cd6436", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f5a5a8ecd12377ea58ca7ddb326db59d6cd6436"}], "stats": {"total": 40, "additions": 34, "deletions": 6}, "files": [{"sha": "0e0bc2bdcec5d379f60f104c7183389907306bc1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1779dc343a559d1d822e8cbcb998bcde049c5123", "patch": "@@ -1,3 +1,9 @@\n+2012-09-10  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/54520\n+\t* tree-ssa-threadupdate.c (def_split_header_continue_p):\n+\tProperly consider sub-loops.\n+\n 2012-09-10  Richard Henderson  <rth@redhat.com>\n \n \t* config/alpha/predicates.md (small_symbolic_operand): Disallow"}, {"sha": "bd4b362c188a656fd537c9f94f526d1cba62efcb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1779dc343a559d1d822e8cbcb998bcde049c5123", "patch": "@@ -1,3 +1,8 @@\n+2012-09-10  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/54520\n+\t* gcc.dg/torture/pr54520.c: New testcase.\n+\n 2012-09-10  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/54506"}, {"sha": "5884b2f353a1e1a5136ccc303e0f61126c89eed0", "filename": "gcc/testsuite/gcc.dg/torture/pr54520.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr54520.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr54520.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr54520.c?ref=1779dc343a559d1d822e8cbcb998bcde049c5123", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+\n+char *a;\n+void\n+fn1 ()\n+{\n+  char *p = a;\n+  while (p && *p != '\\0')\n+    {\n+      while (*p == '\\t')\n+\t*p++ = '\\0';\n+      if (*p != '\\0')\n+\tp = 0;\n+    }\n+}"}, {"sha": "ba6d69af9428603a6ea74011d84ec0cd87c54972", "filename": "gcc/tree-ssa-threadupdate.c", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2Ftree-ssa-threadupdate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1779dc343a559d1d822e8cbcb998bcde049c5123/gcc%2Ftree-ssa-threadupdate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-threadupdate.c?ref=1779dc343a559d1d822e8cbcb998bcde049c5123", "patch": "@@ -846,8 +846,9 @@ static bool\n def_split_header_continue_p (const_basic_block bb, const void *data)\n {\n   const_basic_block new_header = (const_basic_block) data;\n-  return (bb->loop_father == new_header->loop_father\n-\t  && bb != new_header);\n+  return (bb != new_header\n+\t  && (loop_depth (bb->loop_father)\n+\t      >= loop_depth (new_header->loop_father)));\n }\n \n /* Thread jumps through the header of LOOP.  Returns true if cfg changes.\n@@ -1031,10 +1032,11 @@ thread_through_loop_header (struct loop *loop, bool may_peel_loop_headers)\n       nblocks = dfs_enumerate_from (header, 0, def_split_header_continue_p,\n \t\t\t\t    bblocks, loop->num_nodes, tgt_bb);\n       for (i = 0; i < nblocks; i++)\n-\t{\n-\t  remove_bb_from_loops (bblocks[i]);\n-\t  add_bb_to_loop (bblocks[i], loop_outer (loop));\n-\t}\n+\tif (bblocks[i]->loop_father == loop)\n+\t  {\n+\t    remove_bb_from_loops (bblocks[i]);\n+\t    add_bb_to_loop (bblocks[i], loop_outer (loop));\n+\t  }\n       free (bblocks);\n \n       /* If the new header has multiple latches mark it so.  */"}]}