{"sha": "c3ef5fda143585ca19dff5a977b6aa87b7a17566", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNlZjVmZGExNDM1ODVjYTE5ZGZmNWE5NzdiNmFhODdiN2ExNzU2Ng==", "commit": {"author": {"name": "Tamar Christina", "email": "tamar.christina@arm.com", "date": "2017-10-26T06:39:56Z"}, "committer": {"name": "Tamar Christina", "email": "tnfchris@gcc.gnu.org", "date": "2017-10-26T06:39:56Z"}, "message": "vect-dot-qi.h: New.\n\n2017-10-26  Tamar Christina  <tamar.christina@arm.com>\n\n\t* gcc.target/aarch64/advsimd-intrinsics/vect-dot-qi.h: New.\n\t* gcc.target/aarch64/advsimd-intrinsics/vdot-compile.c: New.\n\t* gcc.target/aarch64/advsimd-intrinsics/vect-dot-s8.c: New.\n\t* gcc.target/aarch64/advsimd-intrinsics/vect-dot-u8.c: New.\n\nFrom-SVN: r254097", "tree": {"sha": "8659653fca07863f33209c9a9eaa091a8d5a8d0c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8659653fca07863f33209c9a9eaa091a8d5a8d0c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3ef5fda143585ca19dff5a977b6aa87b7a17566", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3ef5fda143585ca19dff5a977b6aa87b7a17566", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3ef5fda143585ca19dff5a977b6aa87b7a17566", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3ef5fda143585ca19dff5a977b6aa87b7a17566/comments", "author": {"login": "TamarChristinaArm", "id": 48126768, "node_id": "MDQ6VXNlcjQ4MTI2NzY4", "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TamarChristinaArm", "html_url": "https://github.com/TamarChristinaArm", "followers_url": "https://api.github.com/users/TamarChristinaArm/followers", "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}", "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}", "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions", "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs", "repos_url": "https://api.github.com/users/TamarChristinaArm/repos", "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}", "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "62fb4acb486f2c17ccba52f60f3288dcfc7c30ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62fb4acb486f2c17ccba52f60f3288dcfc7c30ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62fb4acb486f2c17ccba52f60f3288dcfc7c30ce"}], "stats": {"total": 113, "additions": 113, "deletions": 0}, "files": [{"sha": "cf7095ea308e0ab998a3e1fd812aff76efcb7080", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c3ef5fda143585ca19dff5a977b6aa87b7a17566", "patch": "@@ -1,3 +1,10 @@\n+2017-10-26  Tamar Christina  <tamar.christina@arm.com>\n+\n+\t* gcc.target/aarch64/advsimd-intrinsics/vect-dot-qi.h: New.\n+\t* gcc.target/aarch64/advsimd-intrinsics/vdot-compile.c: New.\n+\t* gcc.target/aarch64/advsimd-intrinsics/vect-dot-s8.c: New.\n+\t* gcc.target/aarch64/advsimd-intrinsics/vect-dot-u8.c: New.\n+\n 2017-10-25  David Malcolm  <dmalcolm@redhat.com>\n \n \tPR c/7356"}, {"sha": "b7378adf8ee5e1b32dfe9fc52cdc1259a5c920c0", "filename": "gcc/testsuite/gcc.target/aarch64/advsimd-intrinsics/vdot-compile.c", "status": "added", "additions": 73, "deletions": 0, "changes": 73, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvdot-compile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvdot-compile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvdot-compile.c?ref=c3ef5fda143585ca19dff5a977b6aa87b7a17566", "patch": "@@ -0,0 +1,73 @@\n+/* { dg-do compile { target { aarch64*-*-* } } } */\n+/* { dg-additional-options \"-O3 -march=armv8.2-a+dotprod\" } */\n+\n+#include <arm_neon.h>\n+\n+/* Unsigned Dot Product instructions.  */\n+\n+uint32x2_t ufoo (uint32x2_t r, uint8x8_t x, uint8x8_t y)\n+{\n+  return vdot_u32 (r, x, y);\n+}\n+\n+uint32x4_t ufooq (uint32x4_t r, uint8x16_t x, uint8x16_t y)\n+{\n+  return vdotq_u32 (r, x, y);\n+}\n+\n+uint32x2_t ufoo_lane (uint32x2_t r, uint8x8_t x, uint8x8_t y)\n+{\n+  return vdot_lane_u32 (r, x, y, 0);\n+}\n+\n+uint32x2_t ufoo_laneq (uint32x2_t r, uint8x8_t x, uint8x16_t y)\n+{\n+  return vdot_laneq_u32 (r, x, y, 0);\n+}\n+\n+uint32x4_t ufooq_lane (uint32x4_t r, uint8x16_t x, uint8x8_t y)\n+{\n+  return vdotq_lane_u32 (r, x, y, 0);\n+}\n+\n+uint32x4_t ufooq_laneq (uint32x4_t r, uint8x16_t x, uint8x16_t y)\n+{\n+  return vdotq_laneq_u32 (r, x, y, 0);\n+}\n+\n+/* Signed Dot Product instructions.  */\n+\n+int32x2_t sfoo (int32x2_t r, int8x8_t x, int8x8_t y)\n+{\n+  return vdot_s32 (r, x, y);\n+}\n+\n+int32x4_t sfooq (int32x4_t r, int8x16_t x, int8x16_t y)\n+{\n+  return vdotq_s32 (r, x, y);\n+}\n+\n+int32x2_t sfoo_lane (int32x2_t r, int8x8_t x, int8x8_t y)\n+{\n+  return vdot_lane_s32 (r, x, y, 0);\n+}\n+\n+int32x2_t sfoo_laneq (int32x2_t r, int8x8_t x, int8x16_t y)\n+{\n+  return vdot_laneq_s32 (r, x, y, 0);\n+}\n+\n+int32x4_t sfooq_lane (int32x4_t r, int8x16_t x, int8x8_t y)\n+{\n+  return vdotq_lane_s32 (r, x, y, 0);\n+}\n+\n+int32x4_t sfooq_laneq (int32x4_t r, int8x16_t x, int8x16_t y)\n+{\n+  return vdotq_laneq_s32 (r, x, y, 0);\n+}\n+\n+/* { dg-final { scan-assembler-times {[us]dot\\tv[0-9]+\\.2s, v[0-9]+\\.8b, v[0-9]+\\.8b} 2 } } */\n+/* { dg-final { scan-assembler-times {[us]dot\\tv[0-9]+\\.2s, v[0-9]+\\.8b, v[0-9]+\\.4b\\[[0-9]+\\]}  4 } } */\n+/* { dg-final { scan-assembler-times {[us]dot\\tv[0-9]+\\.4s, v[0-9]+\\.16b, v[0-9]+\\.16b}  2 } } */\n+/* { dg-final { scan-assembler-times {[us]dot\\tv[0-9]+\\.4s, v[0-9]+\\.16b, v[0-9]+\\.4b\\[[0-9]+\\]}  4 } } */"}, {"sha": "90b00aff95cfef96d1963be17673dc191cc71169", "filename": "gcc/testsuite/gcc.target/aarch64/advsimd-intrinsics/vect-dot-qi.h", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-qi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-qi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-qi.h?ref=c3ef5fda143585ca19dff5a977b6aa87b7a17566", "patch": "@@ -0,0 +1,15 @@\n+TYPE char X[N] __attribute__ ((__aligned__(__BIGGEST_ALIGNMENT__)));\n+TYPE char Y[N] __attribute__ ((__aligned__(__BIGGEST_ALIGNMENT__)));\n+\n+__attribute__ ((noinline)) int\n+foo1(int len) {\n+  int i;\n+  TYPE int result = 0;\n+  TYPE short prod;\n+\n+  for (i=0; i<len; i++) {\n+    prod = X[i] * Y[i];\n+    result += prod;\n+  }\n+  return result;\n+}\n\\ No newline at end of file"}, {"sha": "57b5ef82f855fe401e7e8c798685fa0185c01905", "filename": "gcc/testsuite/gcc.target/aarch64/advsimd-intrinsics/vect-dot-s8.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-s8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-s8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-s8.c?ref=c3ef5fda143585ca19dff5a977b6aa87b7a17566", "patch": "@@ -0,0 +1,9 @@\n+/* { dg-do compile { target { aarch64*-*-* } } } */\n+/* { dg-additional-options \"-O3 -march=armv8.2-a+dotprod\" } */\n+\n+#define N 64\n+#define TYPE signed\n+\n+#include \"vect-dot-qi.h\"\n+\n+/* { dg-final { scan-assembler-times {sdot\\tv[0-9]+\\.4s, v[0-9]+\\.16b, v[0-9]+\\.16b} 4 } } */"}, {"sha": "b2cef318500d6007029d1d9716ab81b83003566f", "filename": "gcc/testsuite/gcc.target/aarch64/advsimd-intrinsics/vect-dot-u8.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-u8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3ef5fda143585ca19dff5a977b6aa87b7a17566/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-u8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fvect-dot-u8.c?ref=c3ef5fda143585ca19dff5a977b6aa87b7a17566", "patch": "@@ -0,0 +1,9 @@\n+/* { dg-do compile { target { aarch64*-*-* } } } */\n+/* { dg-additional-options \"-O3 -march=armv8.2-a+dotprod\" } */\n+\n+#define N 64\n+#define TYPE unsigned\n+\n+#include \"vect-dot-qi.h\"\n+\n+/* { dg-final { scan-assembler-times {udot\\tv[0-9]+\\.4s, v[0-9]+\\.16b, v[0-9]+\\.16b} 4 } } */"}]}