{"sha": "798595680bb04dc570d2d6a46322c35c0de3e482", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzk4NTk1NjgwYmIwNGRjNTcwZDJkNmE0NjMyMmMzNWMwZGUzZTQ4Mg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-08-01T10:11:16Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-08-01T10:11:16Z"}, "message": "[multiple changes]\n\n2014-08-01  Hristian Kirtchev  <kirtchev@adacore.com>\n\n\t* einfo.adb (Is_Hidden_Non_Overridden_Subprogram): Remove the\n\tassertion check as the attribute is defined for all entities.\n\t(Set_Is_Hidden_Non_Overridden_Subprogram): Remove the assertion\n\tcheck as the attribute is defined for all entities.\n\t* einfo.ads Update the documentation of attribute\n\tIs_Hidden_Non_Overridden_Subprogram.\n\t* sem_ch7.adb (Install_Package_Entity): No need to check the\n\tentity kind of the Id.\n\t* sem_ch13.adb (Hide_Matching_Homograph): Update the comment on\n\tusage. Ensure that the homographs are of the same entity kind\n\tand not fully conformant.\n\t(Hide_Non_Overridden_Subprograms): Update the comment on usage.\n\n2014-08-01  Robert Dewar  <dewar@adacore.com>\n\n\t* inline.adb: Minor code reorganization.\n\t* sem_ch12.adb, s-tasdeb.ads: Minor reformatting.\n\nFrom-SVN: r213445", "tree": {"sha": "b1cfe6c1959226b884c158d9f1557fc69342eefc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b1cfe6c1959226b884c158d9f1557fc69342eefc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/798595680bb04dc570d2d6a46322c35c0de3e482", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/798595680bb04dc570d2d6a46322c35c0de3e482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/798595680bb04dc570d2d6a46322c35c0de3e482", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/798595680bb04dc570d2d6a46322c35c0de3e482/comments", "author": null, "committer": null, "parents": [{"sha": "3fe5ceadbbeb824a498db96fc7ee40faed0b45f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fe5ceadbbeb824a498db96fc7ee40faed0b45f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fe5ceadbbeb824a498db96fc7ee40faed0b45f3"}], "stats": {"total": 78, "additions": 47, "deletions": 31}, "files": [{"sha": "444d4f75f3c1710ba277c1dba3978b0052298d74", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -1,3 +1,23 @@\n+2014-08-01  Hristian Kirtchev  <kirtchev@adacore.com>\n+\n+\t* einfo.adb (Is_Hidden_Non_Overridden_Subprogram): Remove the\n+\tassertion check as the attribute is defined for all entities.\n+\t(Set_Is_Hidden_Non_Overridden_Subprogram): Remove the assertion\n+\tcheck as the attribute is defined for all entities.\n+\t* einfo.ads Update the documentation of attribute\n+\tIs_Hidden_Non_Overridden_Subprogram.\n+\t* sem_ch7.adb (Install_Package_Entity): No need to check the\n+\tentity kind of the Id.\n+\t* sem_ch13.adb (Hide_Matching_Homograph): Update the comment on\n+\tusage. Ensure that the homographs are of the same entity kind\n+\tand not fully conformant.\n+\t(Hide_Non_Overridden_Subprograms): Update the comment on usage.\n+\n+2014-08-01  Robert Dewar  <dewar@adacore.com>\n+\n+\t* inline.adb: Minor code reorganization.\n+\t* sem_ch12.adb, s-tasdeb.ads: Minor reformatting.\n+\n 2014-08-01  Robert Dewar  <dewar@adacore.com>\n \n \t* inline.adb, s-os_lib.ads: Minor reformatting."}, {"sha": "3b5219bad58492db32efe5ee566e559b6e15957e", "filename": "gcc/ada/einfo.adb", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Feinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Feinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.adb?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -2068,7 +2068,6 @@ package body Einfo is\n \n    function Is_Hidden_Non_Overridden_Subprogram (Id : E) return B is\n    begin\n-      pragma Assert (Ekind_In (Id, E_Function, E_Procedure));\n       return Flag2 (Id);\n    end Is_Hidden_Non_Overridden_Subprogram;\n \n@@ -4850,7 +4849,6 @@ package body Einfo is\n \n    procedure Set_Is_Hidden_Non_Overridden_Subprogram (Id : E; V : B := True) is\n    begin\n-      pragma Assert (Ekind_In (Id, E_Function, E_Procedure));\n       Set_Flag2 (Id, V);\n    end Set_Is_Hidden_Non_Overridden_Subprogram;\n "}, {"sha": "18de39f100b36ee144d8b3022a1e7359defea576", "filename": "gcc/ada/einfo.ads", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Feinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Feinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.ads?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -2423,9 +2423,9 @@ package Einfo is\n --       Private_Declaration in sem_ch7).\n \n --    Is_Hidden_Non_Overridden_Subprogram (Flag2)\n---       Defined in all entities. Set for implicitly declared non-generic\n---       subprograms that require overriding or are null procedures, and are\n---       hidden by a non-conformant homograph with the same characteristics\n+--       Defined in all entities. Set for implicitly declared subprograms\n+--       that require overriding or are null procedures, and are hidden by\n+--       a non-fully conformant homograph with the same characteristics\n --       (Ada RM 8.3 12.3/2).\n \n --    Is_Hidden_Open_Scope (Flag171)"}, {"sha": "c2865ea93e5d79757f8c934ca91030f4cd10bf3b", "filename": "gcc/ada/inline.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Finline.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Finline.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finline.adb?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -1239,11 +1239,10 @@ package body Inline is\n         and then Msg (Msg'First .. Msg'First + 12) = \"cannot inline\"\n       then\n          declare\n-            Len1 : constant Positive := 13;\n-            --  Length of \"cannot inline\"\n-\n-            Len2 : constant Positive := 31;\n-            --  Length of \"info: no contextual analysis of\"\n+            Len1 : constant Positive :=\n+              String (String'(\"cannot inline\"))'Length;\n+            Len2 : constant Positive :=\n+              String (String'(\"info: no contextual analysis of\"))'Length;\n \n             New_Msg : String (1 .. Msg'Length + Len2 - Len1);\n "}, {"sha": "e0bd0c1e01a5bac89ce13c497b56b7df818d552c", "filename": "gcc/ada/s-tasdeb.ads", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fs-tasdeb.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fs-tasdeb.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-tasdeb.ads?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -153,13 +153,13 @@ package System.Tasking.Debug is\n      (Dependent    : Task_Id;\n       Parent       : Task_Id;\n       Master_Level : Integer);\n-   --  Indicate to Valgrind/Helgrind that the master of Dependent\n-   --  is Parent + Master_Level.\n+   --  Indicate to Valgrind/Helgrind that the master of Dependent is\n+   --  Parent + Master_Level.\n \n    procedure Master_Completed_Hook\n      (Self_ID      : Task_Id;\n       Master_Level : Integer);\n-   --  Indicate to Valgrind/Helgrind that Self_ID has completed\n-   --  the master Master_Level.\n+   --  Indicate to Valgrind/Helgrind that Self_ID has completed the master\n+   --  Master_Level.\n \n end System.Tasking.Debug;"}, {"sha": "6bcc3a10a97df05b483898234424fa785be84d51", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -1674,10 +1674,9 @@ package body Sem_Ch12 is\n                          Present\n                            (Get_First_Parent_With_Ext_Axioms_For_Entity\n                               (Defining_Entity (Analyzed_Formal)))\n-                       and then Ekind (Defining_Entity (Analyzed_Formal))\n-                          = E_Function\n+                       and then Ekind (Defining_Entity (Analyzed_Formal)) =\n+                                                                    E_Function\n                      then\n-\n                         --  If actual is an entity (function or operator),\n                         --  build wrapper for it.\n \n@@ -1700,8 +1699,8 @@ package body Sem_Ch12 is\n                         --  Ditto if formal is an operator with a default.\n \n                         elsif Box_Present (Formal)\n-                           and then Nkind (Defining_Entity (Analyzed_Formal))\n-                             = N_Defining_Operator_Symbol\n+                           and then Nkind (Defining_Entity (Analyzed_Formal)) =\n+                                                    N_Defining_Operator_Symbol\n                         then\n                            Append_To (Assoc,\n                              Build_Wrapper"}, {"sha": "06d57521aef69854598df5ff498d0fd64cbd8b06", "filename": "gcc/ada/sem_ch13.adb", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fsem_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fsem_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch13.adb?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -9936,7 +9936,8 @@ package body Sem_Ch13 is\n    procedure Freeze_Entity_Checks (N : Node_Id) is\n       procedure Hide_Non_Overridden_Subprograms (Typ : Entity_Id);\n       --  Inspect the primitive operations of type Typ and hide all pairs of\n-      --  implicitly declared non-overridden homographs (Ada RM 8.3 12.3/2).\n+      --  implicitly declared non-overridden non-fully conformant homographs\n+      --  (Ada RM 8.3 12.3/2).\n \n       -------------------------------------\n       -- Hide_Non_Overridden_Subprograms --\n@@ -9947,9 +9948,9 @@ package body Sem_Ch13 is\n            (Subp_Id    : Entity_Id;\n             Start_Elmt : Elmt_Id);\n          --  Inspect a list of primitive operations starting with Start_Elmt\n-         --  and find matching implicitly declared non-overridden homographs\n-         --  of Subp_Id. If found, all matches along with Subp_Id are hidden\n-         --  from all visibility.\n+         --  and find matching implicitly declared non-overridden non-fully\n+         --  conformant homographs of Subp_Id. If found, all matches along\n+         --  with Subp_Id are hidden from all visibility.\n \n          function Is_Non_Overridden_Or_Null_Procedure\n            (Subp_Id : Entity_Id) return Boolean;\n@@ -9973,11 +9974,12 @@ package body Sem_Ch13 is\n                Prim := Node (Prim_Elmt);\n \n                --  The current primitive is implicitly declared non-overridden\n-               --  homograph of Subp_Id. Hide both subprograms from visibility.\n+               --  non-fully conformant homograph of Subp_Id. Both subprograms\n+               --  must be hidden from visibility.\n \n                if Chars (Prim) = Chars (Subp_Id)\n-                 and then Ekind (Prim) = Ekind (Subp_Id)\n                  and then Is_Non_Overridden_Or_Null_Procedure (Prim)\n+                 and then not Fully_Conformant (Prim, Subp_Id)\n                then\n                   Set_Is_Hidden_Non_Overridden_Subprogram (Prim);\n                   Set_Is_Immediately_Visible              (Prim, False);\n@@ -10034,8 +10036,8 @@ package body Sem_Ch13 is\n       --  Start of processing for Hide_Non_Overridden_Subprograms\n \n       begin\n-         --  Inspect the list of primitives looking for a non-overriding\n-         --  inherited null procedure.\n+         --  Inspect the list of primitives looking for non-overridden\n+         --  subprograms.\n \n          if Present (Prim_Ops) then\n             Prim_Elmt := First_Elmt (Prim_Ops);\n@@ -10106,7 +10108,7 @@ package body Sem_Ch13 is\n       --  abstract subprograms, null procedures and subprograms that require\n       --  overriding. If this set contains fully conformat homographs, then one\n       --  is chosen arbitrarily (already done during resolution), otherwise all\n-      --  remaining non-conformant homographs must be hidden from visibility\n+      --  remaining non-fully conformant homographs are hidden from visibility\n       --  (Ada RM 8.3 12.3/2).\n \n       if Is_Tagged_Type (E) then"}, {"sha": "5f110ecc34e097a3f4b0ddbc495cf7a4bd8cffb1", "filename": "gcc/ada/sem_ch7.adb", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fsem_ch7.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/798595680bb04dc570d2d6a46322c35c0de3e482/gcc%2Fada%2Fsem_ch7.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch7.adb?ref=798595680bb04dc570d2d6a46322c35c0de3e482", "patch": "@@ -1986,9 +1986,7 @@ package body Sem_Ch7 is\n          --  a tagged type back into visibility if they have non-conformant\n          --  homographs (Ada RM 8.3 12.3/2).\n \n-         elsif Ekind_In (Id, E_Function, E_Procedure)\n-           and then Is_Hidden_Non_Overridden_Subprogram (Id)\n-         then\n+         elsif Is_Hidden_Non_Overridden_Subprogram (Id) then\n             null;\n \n          else"}]}