{"sha": "ccfe725bc63fb3e3f279f1995a13b8b585bd6468", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NmZTcyNWJjNjNmYjNlM2YyNzlmMTk5NWExM2I4YjU4NWJkNjQ2OA==", "commit": {"author": {"name": "Johannes Kanig", "email": "kanig@adacore.com", "date": "2015-01-07T10:24:46Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-01-07T10:24:46Z"}, "message": "lib-xref-spark_specific.adb (Collect_SPARK_Xrefs): Skip unneeded cross ref files.\n\n2015-01-07  Johannes Kanig  <kanig@adacore.com>\n\n\t* lib-xref-spark_specific.adb (Collect_SPARK_Xrefs): Skip unneeded\n\tcross ref files.\n\nFrom-SVN: r219292", "tree": {"sha": "a651ab6a8910f0eadaa57857ed162d057cb3de14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a651ab6a8910f0eadaa57857ed162d057cb3de14"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccfe725bc63fb3e3f279f1995a13b8b585bd6468", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccfe725bc63fb3e3f279f1995a13b8b585bd6468", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccfe725bc63fb3e3f279f1995a13b8b585bd6468", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccfe725bc63fb3e3f279f1995a13b8b585bd6468/comments", "author": {"login": "kanigsson", "id": 169032, "node_id": "MDQ6VXNlcjE2OTAzMg==", "avatar_url": "https://avatars.githubusercontent.com/u/169032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kanigsson", "html_url": "https://github.com/kanigsson", "followers_url": "https://api.github.com/users/kanigsson/followers", "following_url": "https://api.github.com/users/kanigsson/following{/other_user}", "gists_url": "https://api.github.com/users/kanigsson/gists{/gist_id}", "starred_url": "https://api.github.com/users/kanigsson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kanigsson/subscriptions", "organizations_url": "https://api.github.com/users/kanigsson/orgs", "repos_url": "https://api.github.com/users/kanigsson/repos", "events_url": "https://api.github.com/users/kanigsson/events{/privacy}", "received_events_url": "https://api.github.com/users/kanigsson/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ed09416ff9ab07e5491373e9af15563b0a0def34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed09416ff9ab07e5491373e9af15563b0a0def34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed09416ff9ab07e5491373e9af15563b0a0def34"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "526bf38027b7e0ca86a0894f478e54d73f64c38a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccfe725bc63fb3e3f279f1995a13b8b585bd6468/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccfe725bc63fb3e3f279f1995a13b8b585bd6468/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ccfe725bc63fb3e3f279f1995a13b8b585bd6468", "patch": "@@ -1,3 +1,8 @@\n+2015-01-07  Johannes Kanig  <kanig@adacore.com>\n+\n+\t* lib-xref-spark_specific.adb (Collect_SPARK_Xrefs): Skip unneeded\n+\tcross ref files.\n+\n 2015-01-07  Robert Dewar  <dewar@adacore.com>\n \n \t* s-taprop-linux.adb, clean.adb: Minor reformatting."}, {"sha": "b38d65b23dd4894a75161c16c276413bde236940", "filename": "gcc/ada/lib-xref-spark_specific.adb", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccfe725bc63fb3e3f279f1995a13b8b585bd6468/gcc%2Fada%2Flib-xref-spark_specific.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccfe725bc63fb3e3f279f1995a13b8b585bd6468/gcc%2Fada%2Flib-xref-spark_specific.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref-spark_specific.adb?ref=ccfe725bc63fb3e3f279f1995a13b8b585bd6468", "patch": "@@ -889,10 +889,18 @@ package body SPARK_Specific is\n             D2 := D1;\n          end if;\n \n-         Add_SPARK_File\n-           (Ubody => Sdep_Table (D1),\n-            Uspec => Sdep_Table (D2),\n-            Dspec => D2);\n+         --  Some files do not correspond to Ada units, and as such present no\n+         --  interest for SPARK cross references. Skip these files, as printing\n+         --  their name may require printing the full name with spaces, which\n+         --  is not handled in the code doing I/O of SPARK cross references.\n+\n+         if Present (Cunit_Entity (Sdep_Table (D1))) then\n+            Add_SPARK_File\n+              (Ubody => Sdep_Table (D1),\n+               Uspec => Sdep_Table (D2),\n+               Dspec => D2);\n+         end if;\n+\n          D1 := D2 + 1;\n       end loop;\n "}]}