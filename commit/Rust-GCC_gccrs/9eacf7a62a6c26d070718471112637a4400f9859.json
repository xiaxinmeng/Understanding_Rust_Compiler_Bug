{"sha": "9eacf7a62a6c26d070718471112637a4400f9859", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWVhY2Y3YTYyYTZjMjZkMDcwNzE4NDcxMTEyNjM3YTQ0MDBmOTg1OQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-04-17T20:42:16Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-17T20:42:16Z"}, "message": "dwarf2out.c (field_byte_offset): Use the type size as the field size if the latter is not constant.\n\n\t* dwarf2out.c (field_byte_offset): Use the type size as the field size\n\tif the latter is not constant.\n\nFrom-SVN: r146291", "tree": {"sha": "6dc2d8b558da04f44d80b6634d9ce57993de60e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6dc2d8b558da04f44d80b6634d9ce57993de60e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9eacf7a62a6c26d070718471112637a4400f9859", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eacf7a62a6c26d070718471112637a4400f9859", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9eacf7a62a6c26d070718471112637a4400f9859", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eacf7a62a6c26d070718471112637a4400f9859/comments", "author": null, "committer": null, "parents": [{"sha": "5829817786ab80da86c0d3a0a6b97bb653e71530", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5829817786ab80da86c0d3a0a6b97bb653e71530", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5829817786ab80da86c0d3a0a6b97bb653e71530"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "7134327f1294b0a30b0754f67b962f0da21009ff", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eacf7a62a6c26d070718471112637a4400f9859/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eacf7a62a6c26d070718471112637a4400f9859/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9eacf7a62a6c26d070718471112637a4400f9859", "patch": "@@ -1,3 +1,8 @@\n+2009-04-17  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* dwarf2out.c (field_byte_offset): Use the type size as the field size\n+\tif the latter is not constant.\n+\n 2009-04-17  David Edelsohn  <edelsohn@gnu.org>\n \n \t* dbxout.c (xcoff_debug_hooks): Add set_name_debug_nothing."}, {"sha": "d4799b163b53440f92bf026462a4e0e1d5e6d345", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eacf7a62a6c26d070718471112637a4400f9859/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eacf7a62a6c26d070718471112637a4400f9859/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=9eacf7a62a6c26d070718471112637a4400f9859", "patch": "@@ -10900,21 +10900,22 @@ field_byte_offset (const_tree decl)\n       unsigned HOST_WIDE_INT type_size_in_bits;\n \n       type = field_type (decl);\n+      type_size_in_bits = simple_type_size_in_bits (type);\n+      type_align_in_bits = simple_type_align_in_bits (type);\n+\n       field_size_tree = DECL_SIZE (decl);\n \n       /* The size could be unspecified if there was an error, or for\n          a flexible array member.  */\n-      if (! field_size_tree)\n+      if (!field_size_tree)\n         field_size_tree = bitsize_zero_node;\n \n-      /* If we don't know the size of the field, pretend it's a full word.  */\n+      /* If the size of the field is not constant, use the type size.  */\n       if (host_integerp (field_size_tree, 1))\n         field_size_in_bits = tree_low_cst (field_size_tree, 1);\n       else\n-        field_size_in_bits = BITS_PER_WORD;\n+        field_size_in_bits = type_size_in_bits;\n \n-      type_size_in_bits = simple_type_size_in_bits (type);\n-      type_align_in_bits = simple_type_align_in_bits (type);\n       decl_align_in_bits = simple_decl_align_in_bits (decl);\n \n       /* The GCC front-end doesn't make any attempt to keep track of the"}]}