{"sha": "77ece7f52e892587455b17e91e111d3316019b05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdlY2U3ZjUyZTg5MjU4NzQ1NWIxN2U5MWUxMTFkMzMxNjAxOWIwNQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2018-11-13T09:02:33Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2018-11-13T09:02:33Z"}, "message": "misc.c (gnat_init_gcc_eh): Set -fnon-call-exceptions for the runtime on platforms where...\n\n\t* gcc-interface/misc.c (gnat_init_gcc_eh): Set -fnon-call-exceptions\n\tfor the runtime on platforms where System.Machine_Overflow is true.\n\nFrom-SVN: r266057", "tree": {"sha": "ebc2c38be14815fd0625aeab14ea87e52164c90b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ebc2c38be14815fd0625aeab14ea87e52164c90b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77ece7f52e892587455b17e91e111d3316019b05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77ece7f52e892587455b17e91e111d3316019b05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77ece7f52e892587455b17e91e111d3316019b05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77ece7f52e892587455b17e91e111d3316019b05/comments", "author": null, "committer": null, "parents": [{"sha": "0c1e0d63fe0ceabbd04384070f3b59f8bf50de09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c1e0d63fe0ceabbd04384070f3b59f8bf50de09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c1e0d63fe0ceabbd04384070f3b59f8bf50de09"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "5577ddb485851d88c3e8870b32627431aa165753", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77ece7f52e892587455b17e91e111d3316019b05/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77ece7f52e892587455b17e91e111d3316019b05/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=77ece7f52e892587455b17e91e111d3316019b05", "patch": "@@ -1,3 +1,8 @@\n+2018-11-13  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/misc.c (gnat_init_gcc_eh): Set -fnon-call-exceptions\n+\tfor the runtime on platforms where System.Machine_Overflow is true.\n+\n 2018-11-08  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* fe.h (Suppress_Checks): Declare."}, {"sha": "53913c252d8db3e2ca152bbda138c9ac6bc90364", "filename": "gcc/ada/gcc-interface/misc.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77ece7f52e892587455b17e91e111d3316019b05/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77ece7f52e892587455b17e91e111d3316019b05/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fmisc.c?ref=77ece7f52e892587455b17e91e111d3316019b05", "patch": "@@ -405,10 +405,15 @@ gnat_init_gcc_eh (void)\n      as permitted in Ada.\n      Turn off -faggressive-loop-optimizations because it may optimize away\n      out-of-bound array accesses that we want to be able to catch.\n-     If checks are disabled, we use the same settings as the C++ compiler.  */\n+     If checks are disabled, we use the same settings as the C++ compiler,\n+     except for the runtime on platforms where S'Machine_Overflow is true\n+     because the runtime depends on FP (hardware) checks being properly\n+     handled despite being compiled in -gnatp mode.  */\n   flag_exceptions = 1;\n   flag_delete_dead_exceptions = 1;\n-  if (!Suppress_Checks)\n+  if (Suppress_Checks)\n+    flag_non_call_exceptions = Machine_Overflows_On_Target && GNAT_Mode;\n+  else\n     {\n       flag_non_call_exceptions = 1;\n       flag_aggressive_loop_optimizations = 0;"}]}