{"sha": "d8e54c6203f4134b3a9ee7311f885a2dcf476673", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhlNTRjNjIwM2Y0MTM0YjNhOWVlNzMxMWY4ODVhMmRjZjQ3NjY3Mw==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2019-07-23T20:05:48Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2019-07-23T20:05:48Z"}, "message": "Add PR markers to recent DSE changes.  And...\n\n\tPR tree-optimization/86061\n\t* gcc.dg/tree-ssa/pr86061.c: New test.\n\nFrom-SVN: r273745", "tree": {"sha": "17737ee21403cec459220071319c67afb074fdae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/17737ee21403cec459220071319c67afb074fdae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8e54c6203f4134b3a9ee7311f885a2dcf476673", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8e54c6203f4134b3a9ee7311f885a2dcf476673", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8e54c6203f4134b3a9ee7311f885a2dcf476673", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8e54c6203f4134b3a9ee7311f885a2dcf476673/comments", "author": null, "committer": null, "parents": [{"sha": "40768ee0bc9965d109692f884f8588626e01e3fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40768ee0bc9965d109692f884f8588626e01e3fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40768ee0bc9965d109692f884f8588626e01e3fe"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "c6c0f4a70af727fc54bc0fc8b1e8fe0568d76053", "filename": "gcc/ChangeLog", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e54c6203f4134b3a9ee7311f885a2dcf476673/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e54c6203f4134b3a9ee7311f885a2dcf476673/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d8e54c6203f4134b3a9ee7311f885a2dcf476673", "patch": "@@ -400,6 +400,7 @@\n \n 2019-07-19  Jeff Law  <law@redhat.com>\n \n+\tPR tree-optimization/86061\n \t* tree-ssa-dse.c (initialize_ao_ref_for_dse): Handle\n \tstrncpy.  Drop some trivial dead code.\n \t(maybe_trim_memstar_call): Handle strncpy."}, {"sha": "14fe6b9cb27ecbf65e3a3fff165c2a2586c72f58", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e54c6203f4134b3a9ee7311f885a2dcf476673/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e54c6203f4134b3a9ee7311f885a2dcf476673/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d8e54c6203f4134b3a9ee7311f885a2dcf476673", "patch": "@@ -1,3 +1,8 @@\n+2019-07-23  Jeff Law  <law@redhat.com>\n+\n+\tPR tree-optimization/86061\n+\t* gcc.dg/tree-ssa/pr86061.c: New test.\n+\n 2019-07-23  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/83518\n@@ -176,6 +181,7 @@\n \n 2019-07-19  Jeff Law  <law@redhat.com>\n \n+\tPR tree-optimization/86061\n \t* gcc.dg/tree-ssa/ssa-dse-37.c: New test.\n \t* gcc.dg/tree-ssa/ssa-dse-38.c: New test.\n "}, {"sha": "f2b079298c474a011e5fecdc57af3d6dc4566eda", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr86061.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8e54c6203f4134b3a9ee7311f885a2dcf476673/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr86061.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8e54c6203f4134b3a9ee7311f885a2dcf476673/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr86061.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr86061.c?ref=d8e54c6203f4134b3a9ee7311f885a2dcf476673", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-options \"-O2 -fdump-tree-dse-details -fno-tree-fre\" } */\n+\n+\n+struct S { int i; char n[128]; int j; };\n+\n+void f (char*);\n+\n+void g (struct S *p)\n+{\n+  char a[sizeof p->n + 1];\n+\n+  __builtin_memset (a, 0, sizeof a);   // dead store, can be eliminated\n+\n+  __builtin_strncpy (a, p->n, sizeof a - 1);\n+  a[sizeof a - 1] = '\\0';\n+\n+  f (a);\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"Deleted dead call\" 1 \"dse1\" } } */"}]}