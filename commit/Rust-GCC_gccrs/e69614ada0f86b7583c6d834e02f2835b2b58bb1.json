{"sha": "e69614ada0f86b7583c6d834e02f2835b2b58bb1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY5NjE0YWRhMGY4NmI3NTgzYzZkODM0ZTAyZjI4MzViMmI1OGJiMQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-20T13:47:53Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-20T13:47:53Z"}, "message": "[multiple changes]\n\n2009-04-20  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch8.adb (Use_One_Package): In an instance, if two\n\tpotentially_use_visible and non-overloadable homonyms are available\n\tfrom  the actuals of distinct formal packages, retain the current one,\n\twhich was visible in the generic, to prevent spurious visibility\n\terrors.\n\t(End_Use_Package): Restore use_visibility when needed.\n\n2009-04-20  Sergey Rybin  <rybin@adacore.com>\n\n\t* gnat_ugn.texi, vms_data.ads: Update doc.\n\nFrom-SVN: r146424", "tree": {"sha": "4726a2529b577c6e3b6cc8e6c1c3b1c3c998f043", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4726a2529b577c6e3b6cc8e6c1c3b1c3c998f043"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e69614ada0f86b7583c6d834e02f2835b2b58bb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e69614ada0f86b7583c6d834e02f2835b2b58bb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e69614ada0f86b7583c6d834e02f2835b2b58bb1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e69614ada0f86b7583c6d834e02f2835b2b58bb1/comments", "author": null, "committer": null, "parents": [{"sha": "32838704ec63978b0144b8492e2f614f2c7fa3f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32838704ec63978b0144b8492e2f614f2c7fa3f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32838704ec63978b0144b8492e2f614f2c7fa3f9"}], "stats": {"total": 73, "additions": 66, "deletions": 7}, "files": [{"sha": "9df0311b41a2debb1307611bd5db4c35d5a55581", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=e69614ada0f86b7583c6d834e02f2835b2b58bb1", "patch": "@@ -1,3 +1,16 @@\n+2009-04-20  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch8.adb (Use_One_Package): In an instance, if two\n+\tpotentially_use_visible and non-overloadable homonyms are available\n+\tfrom  the actuals of distinct formal packages, retain the current one,\n+\twhich was visible in the generic, to prevent spurious visibility\n+\terrors.\n+\t(End_Use_Package): Restore use_visibility when needed.\n+\n+2009-04-20  Sergey Rybin  <rybin@adacore.com>\n+\n+\t* gnat_ugn.texi, vms_data.ads: Update doc.\n+\n 2009-04-20  Arnaud Charlet  <charlet@adacore.com>\n \n \t* gcc-interface/Make-lang.in: Update dependencies"}, {"sha": "541e6b1e87f3087f146896d1fabff584a5d7c0e3", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=e69614ada0f86b7583c6d834e02f2835b2b58bb1", "patch": "@@ -20346,9 +20346,11 @@ Either a @file{@var{filename}} or an @file{@var{arg_list_filename}} must be supp\n @noindent\n The @command{gnatcheck} tool outputs on @file{stdout} all messages concerning\n rule violations.\n-It also creates, in the current\n-directory, a text file named @file{^gnatcheck.out^GNATCHECK.OUT^} that\n-contains the complete report of the last gnatcheck run. This report contains:\n+It also creates a text file  that\n+contains the complete report of the last gnatcheck run. By default this file is\n+named named @file{^gnatcheck.out^GNATCHECK.OUT^} and it is located in the current\n+directory, @option{^-o^/OUTPUT^} option can be used to change the name and/or\n+location of the report file. This report contains:\n @itemize @bullet\n @item a list of the Ada source files being checked,\n @item a list of enabled and disabled rules,\n@@ -20431,6 +20433,11 @@ in the report file\n Verbose mode; @command{gnatcheck} generates version information and then\n a trace of sources being processed.\n \n+\n+@cindex @option{^-o ^/OUTPUT^} (@command{gnatcheck})\n+@item ^-o ^/OUTPUT=^@var{report_file}\n+Set name of report file file to @var{report_file} .\n+\n @end table\n \n @noindent"}, {"sha": "3f2ff18aaed9dceee775837d48f11c3f99847dff", "filename": "gcc/ada/sem_ch8.adb", "status": "modified", "additions": 34, "deletions": 2, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2Fsem_ch8.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2Fsem_ch8.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch8.adb?ref=e69614ada0f86b7583c6d834e02f2835b2b58bb1", "patch": "@@ -3362,8 +3362,23 @@ package body Sem_Ch8 is\n       if Present (Hidden_By_Use_Clause (N)) then\n          Elmt := First_Elmt (Hidden_By_Use_Clause (N));\n          while Present (Elmt) loop\n-            Set_Is_Immediately_Visible (Node (Elmt));\n-            Next_Elmt (Elmt);\n+            declare\n+               E : constant Entity_Id := Node (Elmt);\n+\n+            begin\n+               --  Reset either Use_Visibility or Direct_Visibility, depending\n+               --  on how the entity was hidden by the use clause.\n+\n+               if In_Use (Scope (E))\n+                 and then Used_As_Generic_Actual (Scope (E))\n+               then\n+                  Set_Is_Potentially_Use_Visible (Node (Elmt));\n+               else\n+                  Set_Is_Immediately_Visible (Node (Elmt));\n+               end if;\n+\n+               Next_Elmt (Elmt);\n+            end;\n          end loop;\n \n          Set_Hidden_By_Use_Clause (N, No_Elist);\n@@ -7079,6 +7094,23 @@ package body Sem_Ch8 is\n                          or else Chars (Prev) = Name_Op_Expon)\n             then\n                goto Next_Usable_Entity;\n+\n+            --  In an instance, two homonyms may become use_visible through the\n+            --  actuals of distinct formal packages. In the generic, only the\n+            --  current one would have been visible, so make the other one\n+            --  not use_visible.\n+\n+            elsif Present (Current_Instance)\n+              and then Is_Potentially_Use_Visible (Prev)\n+              and then not Is_Overloadable (Prev)\n+              and then Scope (Id) /= Scope (Prev)\n+              and then Used_As_Generic_Actual (Scope (Prev))\n+              and then Used_As_Generic_Actual (Scope (Id))\n+              and then List_Containing (Current_Use_Clause (Scope (Prev))) /=\n+                       List_Containing (Current_Use_Clause (Scope (Id)))\n+            then\n+               Set_Is_Potentially_Use_Visible (Prev, False);\n+               Append_Elmt (Prev, Hidden_By_Use_Clause (N));\n             end if;\n \n             Prev := Homonym (Prev);"}, {"sha": "d61a82e5a33a69ef9e7fdde3ec21217f833e713d", "filename": "gcc/ada/vms_data.ads", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2Fvms_data.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e69614ada0f86b7583c6d834e02f2835b2b58bb1/gcc%2Fada%2Fvms_data.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_data.ads?ref=e69614ada0f86b7583c6d834e02f2835b2b58bb1", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1996-2008, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1996-2009, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -875,6 +875,12 @@ package VMS_Data is\n    --   copies of the gnat1 commands spawned to obtain the chop control\n    --   information.\n \n+   S_Check_Out  : aliased constant S := \"/OUTPUT=@\"                &\n+                                             \"-o@\";\n+   --        /OUTPUT=filename\n+   --\n+   --   Specify the name of the output file.\n+\n    Check_Switches : aliased constant Switches :=\n                       (S_Check_Add      'Access,\n                        S_Check_All      'Access,\n@@ -890,7 +896,8 @@ package VMS_Data is\n                        S_Check_Sections 'Access,\n                        S_Check_Short    'Access,\n                        S_Check_Subdirs  'Access,\n-                       S_Check_Verb     'Access);\n+                       S_Check_Verb     'Access,\n+                       S_Check_Out      'Access);\n \n    ----------------------------\n    -- Switches for GNAT CHOP --"}]}