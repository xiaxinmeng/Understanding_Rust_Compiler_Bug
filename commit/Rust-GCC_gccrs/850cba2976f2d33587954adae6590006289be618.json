{"sha": "850cba2976f2d33587954adae6590006289be618", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODUwY2JhMjk3NmYyZDMzNTg3OTU0YWRhZTY1OTAwMDYyODliZTYxOA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-07T06:57:50Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-09-07T06:57:50Z"}, "message": "(duplicate_decls): Set DECL_INLINE in newdecl so it is copied into olddecl.\n\nDon't set DECL_EXTERNAL in olddecl.\nPreserve DECL_UID of olddecl.\n\nFrom-SVN: r2074", "tree": {"sha": "b5f908813c776e1c1811634e7cd6bef331e2b872", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5f908813c776e1c1811634e7cd6bef331e2b872"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/850cba2976f2d33587954adae6590006289be618", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/850cba2976f2d33587954adae6590006289be618", "html_url": "https://github.com/Rust-GCC/gccrs/commit/850cba2976f2d33587954adae6590006289be618", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/850cba2976f2d33587954adae6590006289be618/comments", "author": null, "committer": null, "parents": [{"sha": "08611787e305b57f080a1a5bda084fbf07ffdfa7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08611787e305b57f080a1a5bda084fbf07ffdfa7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08611787e305b57f080a1a5bda084fbf07ffdfa7"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "6a505395f6d7ccfb413590c6859e56934ec8e8ab", "filename": "gcc/c-decl.c", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/850cba2976f2d33587954adae6590006289be618/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/850cba2976f2d33587954adae6590006289be618/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=850cba2976f2d33587954adae6590006289be618", "patch": "@@ -1598,13 +1598,14 @@ duplicate_decls (newdecl, olddecl)\n   else\n     {\n       TREE_STATIC (olddecl) = TREE_STATIC (newdecl);\n-      DECL_EXTERNAL (olddecl) = 0;\n       TREE_PUBLIC (olddecl) = TREE_PUBLIC (newdecl);\n     }\n+\n   /* If either decl says `inline', this fn is inline,\n      unless its definition was passed already.  */\n   if (DECL_INLINE (newdecl) && DECL_INITIAL (olddecl) == 0)\n     DECL_INLINE (olddecl) = 1;\n+  DECL_INLINE (newdecl) = DECL_INLINE (olddecl);\n \n   /* Get rid of any built-in function if new arg types don't match it\n      or if we have a function definition.  */\n@@ -1635,9 +1636,16 @@ duplicate_decls (newdecl, olddecl)\n       DECL_ARGUMENTS (newdecl) = DECL_ARGUMENTS (olddecl);\n     }\n \n-  bcopy ((char *) newdecl + sizeof (struct tree_common),\n-\t (char *) olddecl + sizeof (struct tree_common),\n-\t sizeof (struct tree_decl) - sizeof (struct tree_common));\n+  /* Copy most of the decl-specific fields of NEWDECL into OLDDECL.\n+     But preserve OLDdECL's DECL_UID.  */\n+  {\n+    register unsigned olddecl_uid = DECL_UID (olddecl);\n+\n+    bcopy ((char *) newdecl + sizeof (struct tree_common),\n+\t   (char *) olddecl + sizeof (struct tree_common),\n+\t   sizeof (struct tree_decl) - sizeof (struct tree_common));\n+    DECL_UID (olddecl) = olddecl_uid;\n+  }\n \n   return 1;\n }"}]}