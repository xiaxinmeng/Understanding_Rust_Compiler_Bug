{"sha": "fa9fe7a5a74938c73044fdd2ccd735bf0d703773", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE5ZmU3YTVhNzQ5MzhjNzMwNDRmZGQyY2NkNzM1YmYwZDcwMzc3Mw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-02-01T20:40:31Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-02-01T20:40:31Z"}, "message": "compiler: Don't crash on switch _ := v.(type).\n\nFrom-SVN: r183814", "tree": {"sha": "835b8be9bed5f845cf6ff6de6b7ebfb75d619556", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/835b8be9bed5f845cf6ff6de6b7ebfb75d619556"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa9fe7a5a74938c73044fdd2ccd735bf0d703773", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa9fe7a5a74938c73044fdd2ccd735bf0d703773", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa9fe7a5a74938c73044fdd2ccd735bf0d703773", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa9fe7a5a74938c73044fdd2ccd735bf0d703773/comments", "author": null, "committer": null, "parents": [{"sha": "cf82db162618c202eecf4dd8201d3fa2a5cb521b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf82db162618c202eecf4dd8201d3fa2a5cb521b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf82db162618c202eecf4dd8201d3fa2a5cb521b"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "10abfc036c3b6ced05d2d1f8c9032b0c5c9bb172", "filename": "gcc/go/gofrontend/parse.cc", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa9fe7a5a74938c73044fdd2ccd735bf0d703773/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa9fe7a5a74938c73044fdd2ccd735bf0d703773/gcc%2Fgo%2Fgofrontend%2Fparse.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fparse.cc?ref=fa9fe7a5a74938c73044fdd2ccd735bf0d703773", "patch": "@@ -4311,9 +4311,16 @@ Parse::type_switch_body(Label* label, const Type_switch& type_switch,\n   Named_object* switch_no = NULL;\n   if (!type_switch.name.empty())\n     {\n-      Variable* switch_var = new Variable(NULL, type_switch.expr, false, false,\n-\t\t\t\t\t  false, type_switch.location);\n-      switch_no = this->gogo_->add_variable(type_switch.name, switch_var);\n+      if (Gogo::is_sink_name(type_switch.name))\n+\terror_at(type_switch.location,\n+\t\t \"no new variables on left side of %<:=%>\");\n+      else\n+\t{\n+\t  Variable* switch_var = new Variable(NULL, type_switch.expr, false,\n+\t\t\t\t\t      false, false,\n+\t\t\t\t\t      type_switch.location);\n+\t  switch_no = this->gogo_->add_variable(type_switch.name, switch_var);\n+\t}\n     }\n \n   Type_switch_statement* statement ="}]}