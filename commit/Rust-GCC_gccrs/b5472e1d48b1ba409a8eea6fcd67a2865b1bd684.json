{"sha": "b5472e1d48b1ba409a8eea6fcd67a2865b1bd684", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjU0NzJlMWQ0OGIxYmE0MDlhOGVlYTZmY2Q2N2EyODY1YjFiZDY4NA==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-03-24T16:26:00Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-03-24T16:26:00Z"}, "message": "configure.ac: Check for -Wno-variadic-macros...\n\n\t* configure.ac: Check for -Wno-variadic-macros; don't use\n\t-pedantic (in stage 1 or a simple 'make all') unless it's available,\n\tand if it's available, use it.  Also, clean up check for\n\t-Wno-long-long.\n\t* configure: Regenerate.\n\nFrom-SVN: r79918", "tree": {"sha": "ee36b7e0f0d1fc1ac11d4c511ebdfc462cb9ae3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee36b7e0f0d1fc1ac11d4c511ebdfc462cb9ae3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684/comments", "author": null, "committer": null, "parents": [{"sha": "affb18b2fa81ce88e871e078d71cbc2093c5467c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/affb18b2fa81ce88e871e078d71cbc2093c5467c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/affb18b2fa81ce88e871e078d71cbc2093c5467c"}], "stats": {"total": 220, "additions": 150, "deletions": 70}, "files": [{"sha": "6681f96d97fbc3c3eea28f95964780217f464b87", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b5472e1d48b1ba409a8eea6fcd67a2865b1bd684", "patch": "@@ -1,3 +1,11 @@\n+2004-03-24  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* configure.ac: Check for -Wno-variadic-macros; don't use\n+\t-pedantic (in stage 1 or a simple 'make all') unless it's available,\n+\tand if it's available, use it.  Also, clean up check for\n+\t-Wno-long-long.\n+\t* configure: Regenerate.\n+\n 2004-03-24  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config.gcc (mips64vr-*-elf*, mips64vrel-*-elf*): Remove tm_defines."}, {"sha": "840eae3d38b259e258270101c510277b5fa671eb", "filename": "gcc/configure", "status": "modified", "additions": 111, "deletions": 60, "changes": 171, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=b5472e1d48b1ba409a8eea6fcd67a2865b1bd684", "patch": "@@ -2810,63 +2810,6 @@ fi\n # Check C compiler features\n # -------------------------\n \n-\n-echo \"$as_me:$LINENO: checking whether ${CC-cc} accepts -Wno-long-long\" >&5\n-echo $ECHO_N \"checking whether ${CC-cc} accepts -Wno-long-long... $ECHO_C\" >&6\n-if test \"${ac_cv_prog_cc_no_long_long+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  save_CFLAGS=\"$CFLAGS\"\n-CFLAGS=\"-Wno-long-long\"\n-cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-\n-int\n-main ()\n-{\n-\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_cv_prog_cc_no_long_long=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_cv_prog_cc_no_long_long=no\n-fi\n-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n-CFLAGS=\"$save_CFLAGS\"\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_no_long_long\" >&5\n-echo \"${ECHO_T}$ac_cv_prog_cc_no_long_long\" >&6\n-\n ac_ext=c\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n@@ -3101,6 +3044,7 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n+\n echo \"$as_me:$LINENO: checking for inline\" >&5\n echo $ECHO_N \"checking for inline... $ECHO_C\" >&6\n if test \"${ac_cv_c_inline+set}\" = set; then\n@@ -3783,9 +3727,116 @@ fi\n # Warnings and checking\n # ---------------------\n \n+# Check $CC warning features (if it's GCC).\n+# We want to use -pedantic, but we don't want warnings about\n+# * 'long long'\n+# * variadic macros\n+# So, we only use -pedantic if we can disable those warnings.\n+\n+echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wno-long-long\" >&5\n+echo $ECHO_N \"checking whether ${CC} accepts -Wno-long-long... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_cc_w_no_long_long+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  save_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"-Wno-long-long\"\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_prog_cc_w_no_long_long=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_prog_cc_w_no_long_long=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+  CFLAGS=\"$save_CFLAGS\"\n+\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_no_long_long\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_cc_w_no_long_long\" >&6\n+\n+echo \"$as_me:$LINENO: checking whether ${CC} accepts -Wno-variadic-macros\" >&5\n+echo $ECHO_N \"checking whether ${CC} accepts -Wno-variadic-macros... $ECHO_C\" >&6\n+if test \"${ac_cv_prog_cc_w_no_variadic_macros+set}\" = set; then\n+  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n+else\n+  save_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"-Wno-variadic-macros\"\n+  cat >conftest.$ac_ext <<_ACEOF\n+/* confdefs.h.  */\n+_ACEOF\n+cat confdefs.h >>conftest.$ac_ext\n+cat >>conftest.$ac_ext <<_ACEOF\n+/* end confdefs.h.  */\n+\n+_ACEOF\n+rm -f conftest.$ac_objext\n+if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n+  (eval $ac_compile) 2>conftest.er1\n+  ac_status=$?\n+  grep -v '^ *+' conftest.er1 >conftest.err\n+  rm -f conftest.er1\n+  cat conftest.err >&5\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); } &&\n+\t { ac_try='test -z \"$ac_c_werror_flag\"\t\t\t || test ! -s conftest.err'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; } &&\n+\t { ac_try='test -s conftest.$ac_objext'\n+  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n+  (eval $ac_try) 2>&5\n+  ac_status=$?\n+  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n+  (exit $ac_status); }; }; then\n+  ac_cv_prog_cc_w_no_variadic_macros=yes\n+else\n+  echo \"$as_me: failed program was:\" >&5\n+sed 's/^/| /' conftest.$ac_ext >&5\n+\n+ac_cv_prog_cc_w_no_variadic_macros=no\n+fi\n+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext\n+  CFLAGS=\"$save_CFLAGS\"\n+\n+fi\n+echo \"$as_me:$LINENO: result: $ac_cv_prog_cc_w_no_variadic_macros\" >&5\n+echo \"${ECHO_T}$ac_cv_prog_cc_w_no_variadic_macros\" >&6\n+\n strict1_warn=\n-if test $ac_cv_prog_cc_no_long_long = yes ; then\n-  strict1_warn=\"-pedantic -Wno-long-long\"\n+if test $ac_cv_prog_cc_w_no_long_long = yes \\\n+   && test $ac_cv_prog_cc_w_no_variadic_macros = yes ; then\n+  strict1_warn=\"-pedantic -Wno-long-long -Wno-variadic-macros\"\n fi\n \n \n@@ -5142,7 +5193,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:5145: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:5196: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)"}, {"sha": "9a9318e81efab668e40dfaa123286f259bd0ab22", "filename": "gcc/configure.ac", "status": "modified", "additions": 31, "deletions": 10, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b5472e1d48b1ba409a8eea6fcd67a2865b1bd684/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=b5472e1d48b1ba409a8eea6fcd67a2865b1bd684", "patch": "@@ -274,14 +274,6 @@ AC_SUBST(OUTPUT_OPTION)\n # Check C compiler features\n # -------------------------\n \n-AC_CACHE_CHECK(whether ${CC-cc} accepts -Wno-long-long,\n-ac_cv_prog_cc_no_long_long,\n-[save_CFLAGS=\"$CFLAGS\"\n-CFLAGS=\"-Wno-long-long\"\n-AC_TRY_COMPILE(,,ac_cv_prog_cc_no_long_long=yes,\n-\t       ac_cv_prog_cc_no_long_long=no)\n-CFLAGS=\"$save_CFLAGS\"])\n-\n AC_PROG_CPP\n AC_C_INLINE\n \n@@ -304,9 +296,38 @@ fi\n # Warnings and checking\n # ---------------------\n \n+# Check $CC warning features (if it's GCC).\n+# We want to use -pedantic, but we don't want warnings about\n+# * 'long long'\n+# * variadic macros\n+# So, we only use -pedantic if we can disable those warnings.\n+\n+AC_CACHE_CHECK(\n+  [whether ${CC} accepts -Wno-long-long],\n+  [ac_cv_prog_cc_w_no_long_long],\n+  [save_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"-Wno-long-long\"\n+  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n+                    [ac_cv_prog_cc_w_no_long_long=yes],\n+                    [ac_cv_prog_cc_w_no_long_long=no])\n+  CFLAGS=\"$save_CFLAGS\"\n+  ])\n+\n+AC_CACHE_CHECK(\n+  [whether ${CC} accepts -Wno-variadic-macros],\n+  [ac_cv_prog_cc_w_no_variadic_macros],\n+  [save_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\"-Wno-variadic-macros\"\n+  AC_COMPILE_IFELSE([AC_LANG_SOURCE([[]])],\n+                    [ac_cv_prog_cc_w_no_variadic_macros=yes],\n+                    [ac_cv_prog_cc_w_no_variadic_macros=no])\n+  CFLAGS=\"$save_CFLAGS\"\n+  ])\n+\n strict1_warn=\n-if test $ac_cv_prog_cc_no_long_long = yes ; then\n-  strict1_warn=\"-pedantic -Wno-long-long\"\n+if test $ac_cv_prog_cc_w_no_long_long = yes \\\n+   && test $ac_cv_prog_cc_w_no_variadic_macros = yes ; then\n+  strict1_warn=\"-pedantic -Wno-long-long -Wno-variadic-macros\"\n fi\n AC_SUBST(strict1_warn)\n "}]}