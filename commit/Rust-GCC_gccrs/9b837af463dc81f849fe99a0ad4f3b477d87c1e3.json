{"sha": "9b837af463dc81f849fe99a0ad4f3b477d87c1e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWI4MzdhZjQ2M2RjODFmODQ5ZmU5OWEwYWQ0ZjNiNDc3ZDg3YzFlMw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-07-28T15:33:48Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-07-28T16:01:31Z"}, "message": "c++: tree dump indentation\n\nWe were always forcing an indent, even if there was nothing to indent.\nFixed thusly.\n\n\tgcc/cp/\n\t* ptree.c (cxx_print_decl): Better indentation.", "tree": {"sha": "c5f1b5287dde24e91ecb682033101e821741ef69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c5f1b5287dde24e91ecb682033101e821741ef69"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b837af463dc81f849fe99a0ad4f3b477d87c1e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b837af463dc81f849fe99a0ad4f3b477d87c1e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b837af463dc81f849fe99a0ad4f3b477d87c1e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b837af463dc81f849fe99a0ad4f3b477d87c1e3/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2ddae15e808a41216d5e7a97db8ae69bb7b77464", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ddae15e808a41216d5e7a97db8ae69bb7b77464", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ddae15e808a41216d5e7a97db8ae69bb7b77464"}], "stats": {"total": 30, "additions": 24, "deletions": 6}, "files": [{"sha": "dfc244fdceb27379de9affcea41badea9185ffd3", "filename": "gcc/cp/ptree.c", "status": "modified", "additions": 24, "deletions": 6, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b837af463dc81f849fe99a0ad4f3b477d87c1e3/gcc%2Fcp%2Fptree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b837af463dc81f849fe99a0ad4f3b477d87c1e3/gcc%2Fcp%2Fptree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fptree.c?ref=9b837af463dc81f849fe99a0ad4f3b477d87c1e3", "patch": "@@ -57,17 +57,35 @@ cxx_print_decl (FILE *file, tree node, int indent)\n \t       decl_as_string (node, TFF_TEMPLATE_HEADER));\n     }\n \n-  indent_to (file, indent + 3);\n+  bool need_indent = true;\n+\n   if (DECL_EXTERNAL (node) && DECL_NOT_REALLY_EXTERN (node))\n-    fprintf (file, \" not-really-extern\");\n+    {\n+      if (need_indent)\n+\tindent_to (file, indent + 3);\n+      fprintf (file, \" not-really-extern\");\n+      need_indent = false;\n+    }\n+\n   if (TREE_CODE (node) == FUNCTION_DECL\n       && DECL_PENDING_INLINE_INFO (node))\n-    fprintf (file, \" pending-inline-info %p\",\n-\t     (void *) DECL_PENDING_INLINE_INFO (node));\n+    {\n+      if (need_indent)\n+\tindent_to (file, indent + 3);\n+      fprintf (file, \" pending-inline-info %p\",\n+\t       (void *) DECL_PENDING_INLINE_INFO (node));\n+      need_indent = false;\n+    }\n+  \n   if (VAR_OR_FUNCTION_DECL_P (node)\n       && DECL_TEMPLATE_INFO (node))\n-    fprintf (file, \" template-info %p\",\n-\t     (void *) DECL_TEMPLATE_INFO (node));\n+    {\n+      if (need_indent)\n+\tindent_to (file, indent + 3);\n+      fprintf (file, \" template-info %p\",\n+\t       (void *) DECL_TEMPLATE_INFO (node));\n+      need_indent = false;\n+    }\n }\n \n void"}]}