{"sha": "3599a97bc3f0b10b87d450a7228cb86edffacabf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzU5OWE5N2JjM2YwYjEwYjg3ZDQ1MGE3MjI4Y2I4NmVkZmZhY2FiZg==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2013-10-14T12:47:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2013-10-14T12:47:59Z"}, "message": "prj-attr.adb: New attributes in package Clean: Artifacts_In_Exec_Dir, Artifacts_In_Object_Dir.\n\n2013-10-14  Vincent Celier  <celier@adacore.com>\n\n\t* prj-attr.adb: New attributes in package Clean:\n\tArtifacts_In_Exec_Dir, Artifacts_In_Object_Dir.\n\t* prj-nmsc.adb (Process_Clean (Attributes)): New\n\tprocedure to process attributes Artifacts_In_Exec_Dir and\n\tArtifacts_In_Object_Dir in package Clean.\n\t* prj.ads (Project_Configuration): New components\n\tArtifacts_In_Exec_Dir and Artifacts_In_Object_Dir.\n\t* snames.ads-tmpl: New standard names Artifacts_In_Exec_Dir and\n\tArtifacts_In_Object_Dir used only by gprclean.\n\nFrom-SVN: r203529", "tree": {"sha": "fd4f007ccf3307a8d3eba23929fc847e666f6caf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd4f007ccf3307a8d3eba23929fc847e666f6caf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3599a97bc3f0b10b87d450a7228cb86edffacabf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3599a97bc3f0b10b87d450a7228cb86edffacabf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3599a97bc3f0b10b87d450a7228cb86edffacabf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3599a97bc3f0b10b87d450a7228cb86edffacabf/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f7ea2603f6c28fa91fbf2bf5f79cb2d04cec61c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7ea2603f6c28fa91fbf2bf5f79cb2d04cec61c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7ea2603f6c28fa91fbf2bf5f79cb2d04cec61c7"}], "stats": {"total": 86, "additions": 84, "deletions": 2}, "files": [{"sha": "ce4507636471b719414ac0a002b34ade23cb44da", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=3599a97bc3f0b10b87d450a7228cb86edffacabf", "patch": "@@ -1,3 +1,15 @@\n+2013-10-14  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-attr.adb: New attributes in package Clean:\n+\tArtifacts_In_Exec_Dir, Artifacts_In_Object_Dir.\n+\t* prj-nmsc.adb (Process_Clean (Attributes)): New\n+\tprocedure to process attributes Artifacts_In_Exec_Dir and\n+\tArtifacts_In_Object_Dir in package Clean.\n+\t* prj.ads (Project_Configuration): New components\n+\tArtifacts_In_Exec_Dir and Artifacts_In_Object_Dir.\n+\t* snames.ads-tmpl: New standard names Artifacts_In_Exec_Dir and\n+\tArtifacts_In_Object_Dir used only by gprclean.\n+\n 2013-10-14  Robert Dewar  <dewar@adacore.com>\n \n \t* exp_attr.adb (Expand_N_Attribute_Reference): Add error"}, {"sha": "586fc4f424565092137498dfa41c2e5612ccf791", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=3599a97bc3f0b10b87d450a7228cb86edffacabf", "patch": "@@ -288,6 +288,8 @@ package body Prj.Attr is\n    \"LVswitches#\" &\n    \"Lasource_artifact_extensions#\" &\n    \"Laobject_artifact_extensions#\" &\n+   \"LVartifacts_in_exec_dir#\" &\n+   \"LVartifacts_in_object_dir#\" &\n \n    --  package Cross_Reference\n "}, {"sha": "12a84e555128bc35252b6b0d53ecaa7a08562537", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=3599a97bc3f0b10b87d450a7228cb86edffacabf", "patch": "@@ -1127,6 +1127,9 @@ package body Prj.Nmsc is\n          procedure Process_Builder (Attributes : Variable_Id);\n          --  Process the simple attributes of package Builder\n \n+         procedure Process_Clean (Attributes : Variable_Id);\n+         --  Process the simple attributes of package Clean\n+\n          procedure Process_Clean  (Arrays : Array_Id);\n          --  Process the associated array attributes of package Clean\n \n@@ -1256,6 +1259,55 @@ package body Prj.Nmsc is\n          -- Process_Clean --\n          -------------------\n \n+         procedure Process_Clean (Attributes : Variable_Id) is\n+            Attribute_Id : Variable_Id;\n+            Attribute    : Variable;\n+            List         : String_List_Id;\n+\n+         begin\n+            --  Process non associated array attributes from package Clean\n+\n+            Attribute_Id := Attributes;\n+            while Attribute_Id /= No_Variable loop\n+               Attribute := Shared.Variable_Elements.Table (Attribute_Id);\n+\n+               if not Attribute.Value.Default then\n+                  if Attribute.Name = Name_Artifacts_In_Exec_Dir then\n+\n+                     --  Attribute Artifacts_In_Exec_Dir: the list of file\n+                     --  names to be cleaned in the exec dir of the main\n+                     --  project.\n+\n+                     List := Attribute.Value.Values;\n+\n+                     if List /= Nil_String then\n+                        Put (Into_List =>\n+                               Project.Config.Artifacts_In_Exec_Dir,\n+                             From_List => List,\n+                             In_Tree   => Data.Tree);\n+                     end if;\n+\n+                  elsif Attribute.Name = Name_Artifacts_In_Object_Dir then\n+\n+                     --  Attribute Artifacts_In_Exec_Dir: the list of file\n+                     --  names to be cleaned in the object dir of every\n+                     --  project.\n+\n+                     List := Attribute.Value.Values;\n+\n+                     if List /= Nil_String then\n+                        Put (Into_List =>\n+                               Project.Config.Artifacts_In_Object_Dir,\n+                             From_List => List,\n+                             In_Tree   => Data.Tree);\n+                     end if;\n+                  end if;\n+               end if;\n+\n+               Attribute_Id := Attribute.Next;\n+            end loop;\n+         end Process_Clean;\n+\n          procedure Process_Clean  (Arrays : Array_Id) is\n             Current_Array_Id : Array_Id;\n             Current_Array    : Array_Data;\n@@ -1932,6 +1984,7 @@ package body Prj.Nmsc is\n \n                   --  Process attributes of package Clean\n \n+                  Process_Clean (Element.Decl.Attributes);\n                   Process_Clean (Element.Decl.Arrays);\n \n                when Name_Compiler =>"}, {"sha": "a1da52bdff74c12afaa1f17f5d2c0b9b94bacd8c", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=3599a97bc3f0b10b87d450a7228cb86edffacabf", "patch": "@@ -1133,6 +1133,17 @@ package Prj is\n       Auto_Init_Supported : Boolean := False;\n       --  True if automatic initialisation is supported for shared stand-alone\n       --  libraries.\n+\n+      --  Cleaning\n+\n+      Artifacts_In_Exec_Dir : Name_List_Index := No_Name_List;\n+      --  List of regexp file names to be cleaned in the exec directory of the\n+      --  main project.\n+\n+      Artifacts_In_Object_Dir : Name_List_Index := No_Name_List;\n+      --  List of regexp file names to be cleaned in the object directory of\n+      --  all projects.\n+\n    end record;\n \n    Default_Project_Config : constant Project_Configuration :=\n@@ -1167,7 +1178,9 @@ package Prj is\n                                Lib_Version_Options            => No_Name_List,\n                                Symbolic_Link_Supported        => False,\n                                Lib_Maj_Min_Id_Supported       => False,\n-                               Auto_Init_Supported            => False);\n+                               Auto_Init_Supported            => False,\n+                               Artifacts_In_Exec_Dir          => No_Name_List,\n+                               Artifacts_In_Object_Dir        => No_Name_List);\n \n    -------------------------\n    -- Aggregated projects --"}, {"sha": "69eb42e4fb149da86b52f45d8e34263754c686cc", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3599a97bc3f0b10b87d450a7228cb86edffacabf/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=3599a97bc3f0b10b87d450a7228cb86edffacabf", "patch": "@@ -1221,14 +1221,16 @@ package Snames is\n    --  Additional reserved words and identifiers used in GNAT Project Files\n    --  Note that Name_External is already previously declared.\n \n-   --  The names with the -- GB annotation are only used in gprbuild.\n+   --  Names with a -- GB annotation are only used in gprbuild or gprclean\n \n    Name_Active                             : constant Name_Id := N + $;\n    Name_Aggregate                          : constant Name_Id := N + $;\n    Name_Archive_Builder                    : constant Name_Id := N + $;\n    Name_Archive_Builder_Append_Option      : constant Name_Id := N + $;\n    Name_Archive_Indexer                    : constant Name_Id := N + $;\n    Name_Archive_Suffix                     : constant Name_Id := N + $;\n+   Name_Artifacts_In_Exec_Dir              : constant Name_Id := N + $; -- GB\n+   Name_Artifacts_In_Object_Dir            : constant Name_Id := N + $; -- GB\n    Name_Binder                             : constant Name_Id := N + $;\n    Name_Body_Suffix                        : constant Name_Id := N + $;\n    Name_Builder                            : constant Name_Id := N + $;"}]}