{"sha": "98ef3137bfecd4d2c003b504aed4a8a7aa005625", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThlZjMxMzdiZmVjZDRkMmMwMDNiNTA0YWVkNGE4YTdhYTAwNTYyNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2002-04-15T22:39:10Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2002-04-15T22:39:10Z"}, "message": "re PR c/6290 (ICE compiling altivec code with 3.1)\n\n\tPR c/6290\n\t* config/rs6000/rs6000.c (easy_vector_constant): Return 1 if the\n\tCONST_VECTOR is { 0, ... 0 }.\n\n\t* gcc.dg/altivec-5.c: New test.\n\nFrom-SVN: r52340", "tree": {"sha": "89ac18d79a74a1582a1a97c0a07a63ebf5e6d7ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89ac18d79a74a1582a1a97c0a07a63ebf5e6d7ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98ef3137bfecd4d2c003b504aed4a8a7aa005625", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98ef3137bfecd4d2c003b504aed4a8a7aa005625", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98ef3137bfecd4d2c003b504aed4a8a7aa005625", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98ef3137bfecd4d2c003b504aed4a8a7aa005625/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a6bea8cee1e43ce94242f691e192f186ba9b05df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6bea8cee1e43ce94242f691e192f186ba9b05df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6bea8cee1e43ce94242f691e192f186ba9b05df"}], "stats": {"total": 44, "additions": 36, "deletions": 8}, "files": [{"sha": "915a13c7a2bddb8a945b96041ce8eb1ae75d7286", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=98ef3137bfecd4d2c003b504aed4a8a7aa005625", "patch": "@@ -1,3 +1,9 @@\n+2002-04-16  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/6290\n+\t* config/rs6000/rs6000.c (easy_vector_constant): Return 1 if the\n+\tCONST_VECTOR is { 0, ... 0 }.\n+\n 2002-04-15  Loren J. Rittle  <ljrittle@acm.org>\n \n \t* doc/install.texi (Installing GCC: Configuration): Clarify"}, {"sha": "04098107f752b902d3b018612f1283b55cb6fbdf", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 14, "deletions": 8, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=98ef3137bfecd4d2c003b504aed4a8a7aa005625", "patch": "@@ -1219,18 +1219,24 @@ easy_vector_constant (op)\n \t with CONST0_RTX for the current mode, but let's be safe\n \t instead.  */\n \n-      if (GET_CODE (elt) == CONST_INT && INTVAL (elt) != 0)\n-\treturn 0;\n-\n-      if (GET_CODE (elt) == CONST_DOUBLE\n-\t       && (CONST_DOUBLE_LOW (elt) != 0\n-\t\t   || CONST_DOUBLE_HIGH (elt) != 0))\n-\treturn 0;\n+      switch (GET_CODE (elt))\n+\t{\n+\tcase CONST_INT:\n+\t  if (INTVAL (elt) != 0)\n+\t    return 0;\n+\t  break;\n+\tcase CONST_DOUBLE:\n+\t  if (CONST_DOUBLE_LOW (elt) != 0 || CONST_DOUBLE_HIGH (elt) != 0)\n+\t    return 0;\n+\t  break;\n+\tdefault:\n+\t  return 0;\n+\t}\n     }\n \n   /* We could probably generate a few other constants trivially, but\n      gcc doesn't generate them yet.  FIXME later.  */\n-  return 0;\n+  return 1;\n }\n \n /* Return 1 if the operand is the constant 0.  This works for scalars"}, {"sha": "f5f85153d5961e6fe82a7ca4f228be96414b7d1c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=98ef3137bfecd4d2c003b504aed4a8a7aa005625", "patch": "@@ -1,3 +1,7 @@\n+2002-04-16  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc.dg/altivec-5.c: New test.\n+\n 2002-04-15  Mark Mitchell  <mark@codesourcery.com>\n \n \t* testsuite/lib/chill.exp: Remove."}, {"sha": "61d19d9cd9b7400a996aa59a9d09e7ef8492a828", "filename": "gcc/testsuite/gcc.dg/altivec-5.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2Ftestsuite%2Fgcc.dg%2Faltivec-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98ef3137bfecd4d2c003b504aed4a8a7aa005625/gcc%2Ftestsuite%2Fgcc.dg%2Faltivec-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Faltivec-5.c?ref=98ef3137bfecd4d2c003b504aed4a8a7aa005625", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile { target powerpc-*-* } } */\n+/* { dg-options \"-maltivec -O2\" } */\n+\n+#define vector __attribute__((vector_size(16)))\n+\n+void foo (const unsigned long x,\n+\t  vector signed int a, vector signed int b)\n+{\n+  unsigned char d[64];\n+\n+  __builtin_altivec_stvewx (b, 0, d);\n+}"}]}