{"sha": "d273c40a5568a1e2d048209826bdb778b4b75bde", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI3M2M0MGE1NTY4YTFlMmQwNDgyMDk4MjZiZGI3NzhiNGI3NWJkZQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2019-01-18T11:31:45Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-01-18T11:31:45Z"}, "message": "Update error message prefix in libgcov profiling.\n\n2019-01-18  Martin Liska  <mliska@suse.cz>\n\n\t* libgcov-driver.c (GCOV_PROF_PREFIX): Define.\n\t(gcov_version): Use in gcov_error.\n\t(merge_one_data): Likewise.\n\t(dump_one_gcov): Likewise.\n\nFrom-SVN: r268070", "tree": {"sha": "8c9fcca26671cbf77eb62c9826d917f335e561d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c9fcca26671cbf77eb62c9826d917f335e561d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d273c40a5568a1e2d048209826bdb778b4b75bde", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d273c40a5568a1e2d048209826bdb778b4b75bde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d273c40a5568a1e2d048209826bdb778b4b75bde", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d273c40a5568a1e2d048209826bdb778b4b75bde/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "be9d9fdbed8ae15a25b3a5519414a78546008507", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be9d9fdbed8ae15a25b3a5519414a78546008507", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be9d9fdbed8ae15a25b3a5519414a78546008507"}], "stats": {"total": 26, "additions": 18, "deletions": 8}, "files": [{"sha": "94a8623958f0bfea9dbd09ea4f0c31844be5dfd1", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d273c40a5568a1e2d048209826bdb778b4b75bde/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d273c40a5568a1e2d048209826bdb778b4b75bde/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=d273c40a5568a1e2d048209826bdb778b4b75bde", "patch": "@@ -1,3 +1,10 @@\n+2019-01-18  Martin Liska  <mliska@suse.cz>\n+\n+\t* libgcov-driver.c (GCOV_PROF_PREFIX): Define.\n+\t(gcov_version): Use in gcov_error.\n+\t(merge_one_data): Likewise.\n+\t(dump_one_gcov): Likewise.\n+\n 2019-01-18  Martin Liska  <mliska@suse.cz>\n \n \t* libgcov-driver.c (gcov_version_string): New function."}, {"sha": "5dc51df914f8ac80fbeb564e7be4bb78b268759e", "filename": "libgcc/libgcov-driver.c", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d273c40a5568a1e2d048209826bdb778b4b75bde/libgcc%2Flibgcov-driver.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d273c40a5568a1e2d048209826bdb778b4b75bde/libgcc%2Flibgcov-driver.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-driver.c?ref=d273c40a5568a1e2d048209826bdb778b4b75bde", "patch": "@@ -53,6 +53,8 @@ static void gcov_error_exit (void);\n \n #include \"gcov-io.c\"\n \n+#define GCOV_PROF_PREFIX \"libgcov profiling error:%s:\"\n+\n struct gcov_fn_buffer\n {\n   struct gcov_fn_buffer *next;\n@@ -151,7 +153,7 @@ buffer_fn_data (const char *filename, const struct gcov_info *gi_ptr,\n   return &fn_buffer->next;\n \n fail:\n-  gcov_error (\"profiling:%s:Function %u %s %u \\n\", filename, fn_ix,\n+  gcov_error (GCOV_PROF_PREFIX \"Function %u %s %u \\n\", filename, fn_ix,\n               len ? \"cannot allocate\" : \"counter mismatch\", len ? len : ix);\n \n   return (struct gcov_fn_buffer **)free_fn_data (gi_ptr, fn_buffer, ix);\n@@ -195,7 +197,7 @@ gcov_version (struct gcov_info *ptr, gcov_unsigned_t version,\n       GCOV_UNSIGNED2STRING (v, version);\n       GCOV_UNSIGNED2STRING (e, GCOV_VERSION);\n \n-      gcov_error (\"profiling:%s:Version mismatch - expected %s (%.4s) \"\n+      gcov_error (GCOV_PROF_PREFIX \"Version mismatch - expected %s (%.4s) \"\n \t\t  \"got %s (%.4s)\\n\",\n \t\t  filename? filename : ptr->filename,\n \t\t  gcov_version_string (expected_string, e), e,\n@@ -234,7 +236,7 @@ merge_one_data (const char *filename,\n   if (length != gi_ptr->stamp)\n     {\n       /* Read from a different compilation.  Overwrite the file.  */\n-      gcov_error (\"profiling:%s:overwriting an existing profile data \"\n+      gcov_error (GCOV_PROF_PREFIX \"overwriting an existing profile data \"\n \t\t  \"with a different timestamp\\n\", filename);\n       return 0;\n     }\n@@ -314,15 +316,15 @@ merge_one_data (const char *filename,\n   if (tag)\n     {\n     read_mismatch:;\n-      gcov_error (\"profiling:%s:Merge mismatch for %s %u\\n\",\n+      gcov_error (GCOV_PROF_PREFIX \"Merge mismatch for %s %u\\n\",\n                   filename, f_ix >= 0 ? \"function\" : \"summary\",\n                   f_ix < 0 ? -1 - f_ix : f_ix);\n       return -1;\n     }\n   return 0;\n \n read_error:\n-  gcov_error (\"profiling:%s:%s merging\\n\", filename,\n+  gcov_error (GCOV_PROF_PREFIX \"%s merging\\n\", filename,\n               error < 0 ? \"Overflow\": \"Error\");\n   return -1;\n }\n@@ -520,7 +522,8 @@ dump_one_gcov (struct gcov_info *gi_ptr, struct gcov_filename *gf,\n       /* Merge data from file.  */\n       if (tag != GCOV_DATA_MAGIC)\n         {\n-          gcov_error (\"profiling:%s:Not a gcov data file\\n\", gf->filename);\n+\t  gcov_error (GCOV_PROF_PREFIX \"Not a gcov data file\\n\",\n+\t\t      gf->filename);\n           goto read_fatal;\n         }\n       error = merge_one_data (gf->filename, gi_ptr, &summary);\n@@ -541,8 +544,8 @@ read_fatal:;\n \n   if ((error = gcov_close ()))\n     gcov_error (error  < 0 ?\n-                \"profiling:%s:Overflow writing\\n\" :\n-                \"profiling:%s:Error writing\\n\",\n+\t\tGCOV_PROF_PREFIX \"Overflow writing\\n\" :\n+\t\tGCOV_PROF_PREFIX \"Error writing\\n\",\n                 gf->filename);\n }\n "}]}