{"sha": "dff8943f5465569db3d9f46ceea5ff193c7a5654", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZmODk0M2Y1NDY1NTY5ZGIzZDlmNDZjZWVhNWZmMTkzYzdhNTY1NA==", "commit": {"author": {"name": "Dimitris Papavasiliou", "email": "dpapavas@gmail.com", "date": "2014-05-12T19:12:27Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "2014-05-12T19:12:27Z"}, "message": "invoke.texi: Document new switches -Wno-shadow-ivar, -fno-local-ivars and -fivar-visibility.\n\n2014-05-12  Dimitris Papavasiliou  <dpapavas@gmail.com>\n\n\t    * doc/invoke.texi: Document new switches -Wno-shadow-ivar,\n\t    -fno-local-ivars and -fivar-visibility.\n\t    * c-family/c.opt: Make -Wshadow also implicitly enable\n\t    -Wshadow-ivar.\n\ntestsuite:\n\t    * objc.dg/shadow-1.m: New test.\n\t    * objc.dg/shadow-2.m: New test.\n\t    * objc.dg/ivar-scope-1.m: New test.\n\t    * objc.dg/ivar-scope-2.m: New test.\n\t    * objc.dg/ivar-scope-3.m: New test.\n\t    * objc.dg/ivar-scope-4.m: New test.\n\t    * objc.dg/ivar-visibility-1.m: New test.\n\t    * objc.dg/ivar-visibility-2.m: New test.\n\t    * objc.dg/ivar-visibility-3.m: New test.\n\t    * objc.dg/ivar-visibility-4.m: New test.\n\nFrom-SVN: r210333", "tree": {"sha": "76921db62b2fa142958e02a9f051acc26c3c9cfb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76921db62b2fa142958e02a9f051acc26c3c9cfb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dff8943f5465569db3d9f46ceea5ff193c7a5654", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dff8943f5465569db3d9f46ceea5ff193c7a5654", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dff8943f5465569db3d9f46ceea5ff193c7a5654", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dff8943f5465569db3d9f46ceea5ff193c7a5654/comments", "author": null, "committer": null, "parents": [{"sha": "83afe9ef89a1e6d75c23875f229f13bf5551014e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83afe9ef89a1e6d75c23875f229f13bf5551014e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83afe9ef89a1e6d75c23875f229f13bf5551014e"}], "stats": {"total": 57, "additions": 51, "deletions": 6}, "files": [{"sha": "8f87b69c2e2ee8c9bd4dd512a946bbca7c28ca7e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dff8943f5465569db3d9f46ceea5ff193c7a5654", "patch": "@@ -1,3 +1,10 @@\n+2014-05-12  Dimitris Papavasiliou  <dpapavas@gmail.com>\n+\n+\t* doc/invoke.texi: Document new switches -Wno-shadow-ivar,\n+\t-fno-local-ivars and -fivar-visibility.\n+\t* c-family/c.opt: Make -Wshadow also implicitly enable\n+\t-Wshadow-ivar.\n+\n 2014-05-12  David Wohlferd <dw@LimeGreenSocks.com>\n \n \t* doc/tm.texi: Remove reference to deleted macro."}, {"sha": "c586e659e0f35cf0e9721c077e685d30786b059e", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=dff8943f5465569db3d9f46ceea5ff193c7a5654", "patch": "@@ -690,7 +690,7 @@ ObjC ObjC++ Var(warn_selector) Warning\n Warn if a selector has multiple methods\n \n Wshadow-ivar\n-ObjC ObjC++ Var(warn_shadow_ivar) Init(1) Warning\n+ObjC ObjC++ Var(warn_shadow_ivar) EnabledBy(Wshadow) Init(1) Warning\n Warn if a local declaration hides an instance variable\n \n Wsequence-point"}, {"sha": "da9694cbe7a06523e9e8c1e38df0f54fd1c66389", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 30, "deletions": 5, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=dff8943f5465569db3d9f46ceea5ff193c7a5654", "patch": "@@ -216,6 +216,8 @@ Objective-C and Objective-C++ Dialects}.\n -fobjc-gc @gol\n -fobjc-nilcheck @gol\n -fobjc-std=objc1 @gol\n+-fno-local-ivars @gol\n+-fivar-visibility=@var{public|protected|private|package} @gol\n -freplace-objc-classes @gol\n -fzero-link @gol\n -gen-decls @gol\n@@ -262,7 +264,7 @@ Objective-C and Objective-C++ Dialects}.\n -Wparentheses  -Wpedantic-ms-format -Wno-pedantic-ms-format @gol\n -Wpointer-arith  -Wno-pointer-to-int-cast @gol\n -Wredundant-decls  -Wno-return-local-addr @gol\n--Wreturn-type  -Wsequence-point  -Wshadow @gol\n+-Wreturn-type  -Wsequence-point  -Wshadow  -Wno-shadow-ivar @gol\n -Wsign-compare  -Wsign-conversion -Wfloat-conversion @gol\n -Wsizeof-pointer-memaccess @gol\n -Wstack-protector -Wstack-usage=@var{len} -Wstrict-aliasing @gol\n@@ -2977,6 +2979,22 @@ for individual class implementations to be modified during program execution.\n The GNU runtime currently always retains calls to @code{objc_get_class(\"@dots{}\")}\n regardless of command-line options.\n \n+@item -fno-local-ivars\n+@opindex fno-local-ivars\n+@opindex flocal-ivars\n+By default instance variables in Objective-C can be accessed as if\n+they were local variables from within the methods of the class they're\n+declared in.  This can lead to shadowing between instance variables\n+and other variables declared either locally inside a class method or\n+globally with the same name.  Specifying the @option{-fno-local-ivars}\n+flag disables this behavior thus avoiding variable shadowing issues.\n+\n+@item -fivar-visibility=@var{public|protected|private|package}\n+@opindex fivar-visibility\n+Set the default instance variable visibility to the specified option\n+so that instance variables declared outside the scope of any access\n+modifier directives default to the specified visibility.\n+\n @item -gen-decls\n @opindex gen-decls\n Dump interface declarations for all classes seen in the source file to a\n@@ -4360,10 +4378,17 @@ Do not warn whenever an @samp{#else} or an @samp{#endif} are followed by text.\n @item -Wshadow\n @opindex Wshadow\n @opindex Wno-shadow\n-Warn whenever a local variable or type declaration shadows another variable,\n-parameter, type, or class member (in C++), or whenever a built-in function\n-is shadowed. Note that in C++, the compiler warns if a local variable\n-shadows an explicit typedef, but not if it shadows a struct/class/enum.\n+Warn whenever a local variable or type declaration shadows another\n+variable, parameter, type, class member (in C++), or instance variable\n+(in Objective-C) or whenever a built-in function is shadowed. Note\n+that in C++, the compiler warns if a local variable shadows an\n+explicit typedef, but not if it shadows a struct/class/enum.\n+\n+@item -Wno-shadow-ivar @r{(Objective-C only)}\n+@opindex Wno-shadow-ivar\n+@opindex Wshadow-ivar\n+Do not warn whenever a local variable shadows an instance variable in an\n+Objective-C method.\n \n @item -Wlarger-than=@var{len}\n @opindex Wlarger-than=@var{len}"}, {"sha": "1bd84cfd9f1b2725e1a1de2652bb8cfd8467461f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dff8943f5465569db3d9f46ceea5ff193c7a5654/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dff8943f5465569db3d9f46ceea5ff193c7a5654", "patch": "@@ -1,3 +1,16 @@\n+2014-05-12  Dimitris Papavasiliou  <dpapavas@gmail.com>\n+\n+\t* objc.dg/shadow-1.m: New test.\n+\t* objc.dg/shadow-2.m: New test.\n+\t* objc.dg/ivar-scope-1.m: New test.\n+\t* objc.dg/ivar-scope-2.m: New test.\n+\t* objc.dg/ivar-scope-3.m: New test.\n+\t* objc.dg/ivar-scope-4.m: New test.\n+\t* objc.dg/ivar-visibility-1.m: New test.\n+\t* objc.dg/ivar-visibility-2.m: New test.\n+\t* objc.dg/ivar-visibility-3.m: New test.\n+\t* objc.dg/ivar-visibility-4.m: New test.\n+\n 2014-05-12  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/60127"}]}