{"sha": "4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGE4Y2E2OTBiMGI3M2Y0ZTBiYWU1NDJmZDY5YTFlZTBkOWU3MzEyNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-09-15T17:11:47Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-09-15T17:11:47Z"}, "message": "c-pragma.c (handle_pragma_scalar_storage_order): Expand on error message for non-uniform endianness and issue a warning in C++.\n\n\t* c-pragma.c (handle_pragma_scalar_storage_order): Expand on error\n\tmessage for non-uniform endianness and issue a warning in C++.\n\nFrom-SVN: r252831", "tree": {"sha": "f5d02f2b4122c66d96510962c0ed533abe820c2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5d02f2b4122c66d96510962c0ed533abe820c2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/comments", "author": null, "committer": null, "parents": [{"sha": "f5e37f2ae57a87f8e661967f431e4bed37aceb2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5e37f2ae57a87f8e661967f431e4bed37aceb2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5e37f2ae57a87f8e661967f431e4bed37aceb2d"}], "stats": {"total": 40, "additions": 38, "deletions": 2}, "files": [{"sha": "a3f990d49fd35f05496c7d240f338eef081ba89e", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "patch": "@@ -1,3 +1,8 @@\n+2017-09-15  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-pragma.c (handle_pragma_scalar_storage_order): Expand on error\n+\tmessage for non-uniform endianness and issue a warning in C++.\n+\n 2017-09-15  Jakub Jelinek  <jakub@redhat.com>\n \n \t* c.opt (Wc++1z-compat): Change from option to undocumented alias."}, {"sha": "f7b59b3480726b038c7c323c31380d364480d52d", "filename": "gcc/c-family/c-pragma.c", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Fc-family%2Fc-pragma.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Fc-family%2Fc-pragma.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-pragma.c?ref=4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "patch": "@@ -415,7 +415,19 @@ handle_pragma_scalar_storage_order (cpp_reader *ARG_UNUSED(dummy))\n   tree x;\n \n   if (BYTES_BIG_ENDIAN != WORDS_BIG_ENDIAN)\n-    error (\"scalar_storage_order is not supported\");\n+    {\n+      error (\"scalar_storage_order is not supported because endianness \"\n+\t     \"is not uniform\");\n+      return;\n+    }\n+\n+  if (c_dialect_cxx ())\n+    {\n+      if (warn_unknown_pragmas > in_system_header_at (input_location))\n+\twarning (OPT_Wunknown_pragmas,\n+\t\t \"%<#pragma scalar_storage_order%> is not supported for C++\");\n+      return;\n+    }\n \n   token = pragma_lex (&x);\n   if (token != CPP_NAME)"}, {"sha": "303f700c451dbe9c7264ef491b53ca08bd678857", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "patch": "@@ -1,4 +1,9 @@\n-2017-09-13  Paolo Carlini  <paolo.carlini@oracle.com>\n+2017-09-15  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* g++.dg/sso-1.C: New test.\n+\t* g++.dg/sso-2.C: Likewise.\n+\n+2017-09-15  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/78648\n \t* g++.dg/cpp0x/lambda/lambda-ice21.C: New."}, {"sha": "0f59d0c406928fb5d66a35836c8adbcc32a573ab", "filename": "gcc/testsuite/g++.dg/sso-1.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsso-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsso-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsso-1.C?ref=4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "patch": "@@ -0,0 +1,8 @@\n+/* Test support of scalar_storage_order attribute */\n+\n+/* { dg-do compile } */\n+\n+struct __attribute__((scalar_storage_order(\"little-endian\"))) Rec /* { dg-warning \"attribute ignored\" } */\n+{\n+  int i;\n+};"}, {"sha": "402a61e3b4707aba18e74cddda67f50d1a3ed089", "filename": "gcc/testsuite/g++.dg/sso-2.C", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsso-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsso-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsso-2.C?ref=4a8ca690b0b73f4e0bae542fd69a1ee0d9e73126", "patch": "@@ -0,0 +1,6 @@\n+/* Test support of scalar_storage_order pragma */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-Wall\" } */\n+\n+#pragma scalar_storage_order little-endian /* { dg-warning \"not supported\" } */"}]}