{"sha": "b7e9703c27ee1b02df751646742fb5020a2d2b8c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdlOTcwM2MyN2VlMWIwMmRmNzUxNjQ2NzQyZmI1MDIwYTJkMmI4Yw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2001-07-17T21:44:57Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2001-07-17T21:44:57Z"}, "message": "expr.c (epxand_expr): Convert divisions into multiplications by reciprocals if -ffast-math.\n\n\n\t* expr.c (epxand_expr): Convert divisions into multiplications by\n\treciprocals if -ffast-math.\n\nFrom-SVN: r44090", "tree": {"sha": "c8480e650f798616a3a4925e1f098f4f258e9711", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c8480e650f798616a3a4925e1f098f4f258e9711"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7e9703c27ee1b02df751646742fb5020a2d2b8c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7e9703c27ee1b02df751646742fb5020a2d2b8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7e9703c27ee1b02df751646742fb5020a2d2b8c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7e9703c27ee1b02df751646742fb5020a2d2b8c/comments", "author": null, "committer": null, "parents": [{"sha": "653e276c6536663cda57bda038a9df4e64adb96f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/653e276c6536663cda57bda038a9df4e64adb96f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/653e276c6536663cda57bda038a9df4e64adb96f"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "fda69fb8dbed48c80d70ba9abcc418a69142d31e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7e9703c27ee1b02df751646742fb5020a2d2b8c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7e9703c27ee1b02df751646742fb5020a2d2b8c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b7e9703c27ee1b02df751646742fb5020a2d2b8c", "patch": "@@ -1,3 +1,8 @@\n+Tue Jul 17 23:43:31 CEST 2001  Jan Hubicka  <jh@suse.cz>\n+\n+\t* expr.c (epxand_expr): Convert divisions into multiplications by\n+\treciprocals if -ffast-math.\n+\n 2001-07-17  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* dbxout.c (dbxout_really_begin_function): Rename to"}, {"sha": "041ee908044144a6488edb0855d171c3d03bc3f6", "filename": "gcc/expr.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7e9703c27ee1b02df751646742fb5020a2d2b8c/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7e9703c27ee1b02df751646742fb5020a2d2b8c/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=b7e9703c27ee1b02df751646742fb5020a2d2b8c", "patch": "@@ -7830,6 +7830,16 @@ expand_expr (exp, target, tmode, modifier)\n       return expand_divmod (0, code, mode, op0, op1, target, unsignedp);\n \n     case RDIV_EXPR:\n+      /* Emit a/b as a*(1/b).  Later we may manage CSE the reciprocal saving\n+         expensive divide.  If not, combine will rebuild the original\n+         computation.  */\n+      if (flag_unsafe_math_optimizations && optimize && !optimize_size\n+\t  && !real_onep (TREE_OPERAND (exp, 0)))\n+        return expand_expr (build (MULT_EXPR, type, TREE_OPERAND (exp, 0),\n+\t\t\t\t   build (RDIV_EXPR, type,\n+\t\t\t\t\t  build_real (type, dconst1),\n+\t\t\t\t\t  TREE_OPERAND (exp, 1))),\n+\t\t\t    target, tmode, unsignedp);\n       this_optab = flodiv_optab;\n       goto binop;\n "}]}