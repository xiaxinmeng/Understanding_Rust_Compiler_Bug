{"sha": "a8a6b3dfd3ec2794a21f34169678a48ed8ecae61", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YThhNmIzZGZkM2VjMjc5NGEyMWYzNDE2OTY3OGE0OGVkOGVjYWU2MQ==", "commit": {"author": {"name": "Trevor Saunders", "email": "tbsaunde+gcc@tbsaunde.org", "date": "2015-04-22T00:44:43Z"}, "committer": {"name": "Trevor Saunders", "email": "tbsaunde@gcc.gnu.org", "date": "2015-04-22T00:44:43Z"}, "message": "provide default for RETURN_ADDR_OFFSET\n\ngcc/ChangeLog:\n\n2015-04-21  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n\n\t* defaults.h (RETURN_ADDR_OFFSET): New definition.\n\t* except.c (expand_builtin_extract_return_addr): Remove ifdef\n\tRETURN_ADDR_OFFSET.\n\t(expand_builtin_frob_return_addr): Likewise.\n\nFrom-SVN: r222298", "tree": {"sha": "5e5ff1f30205decc0c878102328c7fed3691df85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e5ff1f30205decc0c878102328c7fed3691df85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61/comments", "author": null, "committer": null, "parents": [{"sha": "058eb3b07a057f208d379aa72ecc06f775e4bf9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/058eb3b07a057f208d379aa72ecc06f775e4bf9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/058eb3b07a057f208d379aa72ecc06f775e4bf9d"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "dc46aa99f99f8eabd21c7b60eca29804b7487d02", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a8a6b3dfd3ec2794a21f34169678a48ed8ecae61", "patch": "@@ -1,3 +1,10 @@\n+2015-04-21  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n+\n+\t* defaults.h (RETURN_ADDR_OFFSET): New definition.\n+\t* except.c (expand_builtin_extract_return_addr): Remove ifdef\n+\tRETURN_ADDR_OFFSET.\n+\t(expand_builtin_frob_return_addr): Likewise.\n+\n 2015-04-21  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* cfgrtl.c (rtl_merge_blocks): Change #if HAVE_cc0 to if (HAVE_cc0)"}, {"sha": "767901acf2921eb683c4c54756e614eb8fa474d4", "filename": "gcc/defaults.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61/gcc%2Fdefaults.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61/gcc%2Fdefaults.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdefaults.h?ref=a8a6b3dfd3ec2794a21f34169678a48ed8ecae61", "patch": "@@ -383,6 +383,11 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #define EH_RETURN_DATA_REGNO(N) INVALID_REGNUM\n #endif\n \n+/* Offset between the eh handler address and entry in eh tables.  */\n+#ifndef RETURN_ADDR_OFFSET\n+#define RETURN_ADDR_OFFSET 0\n+#endif\n+\n /* If we have named section and we support weak symbols, then use the\n    .jcr section for recording java classes which need to be registered\n    at program start-up time.  */"}, {"sha": "750deb56bfecef604e61ea4e7cddf62dc2409551", "filename": "gcc/except.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8a6b3dfd3ec2794a21f34169678a48ed8ecae61/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=a8a6b3dfd3ec2794a21f34169678a48ed8ecae61", "patch": "@@ -2190,9 +2190,8 @@ expand_builtin_extract_return_addr (tree addr_tree)\n #endif\n \n   /* Then adjust to find the real return address.  */\n-#if defined (RETURN_ADDR_OFFSET)\n-  addr = plus_constant (Pmode, addr, RETURN_ADDR_OFFSET);\n-#endif\n+  if (RETURN_ADDR_OFFSET)\n+    addr = plus_constant (Pmode, addr, RETURN_ADDR_OFFSET);\n \n   return addr;\n }\n@@ -2208,10 +2207,11 @@ expand_builtin_frob_return_addr (tree addr_tree)\n \n   addr = convert_memory_address (Pmode, addr);\n \n-#ifdef RETURN_ADDR_OFFSET\n-  addr = force_reg (Pmode, addr);\n-  addr = plus_constant (Pmode, addr, -RETURN_ADDR_OFFSET);\n-#endif\n+  if (RETURN_ADDR_OFFSET)\n+    {\n+      addr = force_reg (Pmode, addr);\n+      addr = plus_constant (Pmode, addr, -RETURN_ADDR_OFFSET);\n+    }\n \n   return addr;\n }"}]}