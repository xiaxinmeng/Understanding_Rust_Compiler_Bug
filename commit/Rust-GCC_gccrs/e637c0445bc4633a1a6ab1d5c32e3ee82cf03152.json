{"sha": "e637c0445bc4633a1a6ab1d5c32e3ee82cf03152", "node_id": "C_kwDOANBUbNoAKGU2MzdjMDQ0NWJjNDYzM2ExYTZhYjFkNWMzMmUzZWU4MmNmMDMxNTI", "commit": {"author": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-10-19T17:30:36Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-10-20T15:06:09Z"}, "message": "Add closures to lints and error checking", "tree": {"sha": "21d3f7c2868074b037210f226612798b725d4caf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/21d3f7c2868074b037210f226612798b725d4caf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "662a7a90305f3c5df24765ec6de6c4e56187ae1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/662a7a90305f3c5df24765ec6de6c4e56187ae1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/662a7a90305f3c5df24765ec6de6c4e56187ae1a"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "3254a982b91a1b6538f80f5e91caca690b8bde22", "filename": "gcc/rust/checks/errors/rust-const-checker.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152/gcc%2Frust%2Fchecks%2Ferrors%2Frust-const-checker.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152/gcc%2Frust%2Fchecks%2Ferrors%2Frust-const-checker.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fchecks%2Ferrors%2Frust-const-checker.cc?ref=e637c0445bc4633a1a6ab1d5c32e3ee82cf03152", "patch": "@@ -383,7 +383,9 @@ ConstChecker::visit (FieldAccessExpr &expr)\n \n void\n ConstChecker::visit (ClosureExpr &expr)\n-{}\n+{\n+  expr.get_expr ()->accept_vis (*this);\n+}\n \n void\n ConstChecker::visit (BlockExpr &expr)"}, {"sha": "55a21590b2eae42161d334cf7b70e802156ce1f0", "filename": "gcc/rust/checks/errors/rust-unsafe-checker.cc", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152/gcc%2Frust%2Fchecks%2Ferrors%2Frust-unsafe-checker.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152/gcc%2Frust%2Fchecks%2Ferrors%2Frust-unsafe-checker.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fchecks%2Ferrors%2Frust-unsafe-checker.cc?ref=e637c0445bc4633a1a6ab1d5c32e3ee82cf03152", "patch": "@@ -454,7 +454,9 @@ UnsafeChecker::visit (FieldAccessExpr &expr)\n \n void\n UnsafeChecker::visit (ClosureExpr &expr)\n-{}\n+{\n+  expr.get_expr ()->accept_vis (*this);\n+}\n \n void\n UnsafeChecker::visit (BlockExpr &expr)"}, {"sha": "ed5ed13c21ee1575a6f64d3de71dabecfdffb8f1", "filename": "gcc/rust/checks/lints/rust-lint-marklive.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152/gcc%2Frust%2Fchecks%2Flints%2Frust-lint-marklive.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e637c0445bc4633a1a6ab1d5c32e3ee82cf03152/gcc%2Frust%2Fchecks%2Flints%2Frust-lint-marklive.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fchecks%2Flints%2Frust-lint-marklive.h?ref=e637c0445bc4633a1a6ab1d5c32e3ee82cf03152", "patch": "@@ -285,6 +285,11 @@ class MarkLive : public MarkLiveBase\n       item->accept_vis (*this);\n   }\n \n+  void visit (HIR::ClosureExpr &expr) override\n+  {\n+    expr.get_expr ()->accept_vis (*this);\n+  }\n+\n private:\n   std::vector<HirId> worklist;\n   std::set<HirId> liveSymbols;"}]}