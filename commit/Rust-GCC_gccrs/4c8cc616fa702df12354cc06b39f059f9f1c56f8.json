{"sha": "4c8cc616fa702df12354cc06b39f059f9f1c56f8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGM4Y2M2MTZmYTcwMmRmMTIzNTRjYzA2YjM5ZjA1OWY5ZjFjNTZmOA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-02-16T13:08:25Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-02-16T13:08:25Z"}, "message": "(special_symbol, check_macro_name, collect_expansion): Don't treat \"L\"\nin \"L'...'\" as identifier.\n\nFrom-SVN: r13660", "tree": {"sha": "4db8aef064f578d498e14c4a1e8bc1694c195d60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4db8aef064f578d498e14c4a1e8bc1694c195d60"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c8cc616fa702df12354cc06b39f059f9f1c56f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c8cc616fa702df12354cc06b39f059f9f1c56f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c8cc616fa702df12354cc06b39f059f9f1c56f8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c8cc616fa702df12354cc06b39f059f9f1c56f8/comments", "author": null, "committer": null, "parents": [{"sha": "21f18241344b658711a5668f376243884ed92e2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21f18241344b658711a5668f376243884ed92e2f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21f18241344b658711a5668f376243884ed92e2f"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "0c0e663020731ab245b54ca26de39dfc5dacf8f5", "filename": "gcc/cpplib.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c8cc616fa702df12354cc06b39f059f9f1c56f8/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c8cc616fa702df12354cc06b39f059f9f1c56f8/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=4c8cc616fa702df12354cc06b39f059f9f1c56f8", "patch": "@@ -1,6 +1,6 @@\n /* CPP Library.\n    Copyright (C) 1986, 87, 89, 92-6, 1997 Free Software Foundation, Inc.\n-   Written by Per Bothner, 1994-95.\n+   Contributed by Per Bothner, 1994-95.\n    Based on CCCP program by Paul Rubin, June 1986\n    Adapted to ANSI C, Richard Stallman, Jan 1987\n \n@@ -1308,7 +1308,8 @@ collect_expansion (pfile, buf, limit, nargs, arglist)\n \t     Don't leave the # in the expansion.  */\n \t  exp_p--;\n \t  SKIP_WHITE_SPACE (p);\n-\t  if (p == limit || ! is_idstart[*p])\n+\t  if (p == limit || ! is_idstart[*p]\n+\t      || (*p == 'L' && p + 1 < limit && (p[1] == '\\'' || p[1] == '\"')))\n \t    cpp_error (pfile,\n \t\t     \"`#' operator is not followed by a macro argument name\");\n \t  else\n@@ -1369,7 +1370,8 @@ collect_expansion (pfile, buf, limit, nargs, arglist)\n       while (p != limit && is_idchar[*p]) p++;\n       id_len = p - id_beg;\n \n-      if (is_idstart[c]) {\n+      if (is_idstart[c]\n+\t  && ! (id_len == 1 && c == 'L' && (*p == '\\'' || *p == '\"'))) {\n \tregister struct arglist *arg;\n \n \tfor (arg = arglist; arg != NULL; arg = arg->next) {\n@@ -1667,7 +1669,8 @@ check_macro_name (pfile, symname, usage)\n   for (p = symname; is_idchar[*p]; p++)\n     ;\n   sym_length = p - symname;\n-  if (sym_length == 0)\n+  if (sym_length == 0\n+      || (sym_length == 1 && *symname == 'L' && (*p == '\\'' || *p == '\"')))\n     cpp_error (pfile, \"invalid %s name\", usage);\n   else if (!is_idstart[*symname]) {\n     U_CHAR *msg;\t\t\t/* what pain...  */\n@@ -2417,6 +2420,8 @@ special_symbol (hp, pfile)\n \n       if (!is_idstart[*ip->cur])\n \tgoto oops;\n+      if (ip->cur[0] == 'L' && (ip->cur[1] == '\\'' || ip->cur[1] == '\"'))\n+\tgoto oops;\n       if (hp = cpp_lookup (pfile, ip->cur, -1, -1))\n \t{\n #if 0"}]}