{"sha": "216c12abf6eccbcf5c5ff1898e8b063a494af40c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE2YzEyYWJmNmVjY2JjZjVjNWZmMTg5OGU4YjA2M2E0OTRhZjQwYw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-06-19T17:37:36Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-06-19T17:37:36Z"}, "message": "re PR driver/57651 (gcc-ar and gcc-nm don't find the lto plugin)\n\n\tPR driver/57651\n\t* gcc-ar.c (main): If not CROSS_DIRECTORY_STRUCTURE, look for\n\tPERSONALITY in $PATH derived prefixes.\n\nFrom-SVN: r200209", "tree": {"sha": "3f763b63f3d29613f9d658ae471c1b4aeb4532bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3f763b63f3d29613f9d658ae471c1b4aeb4532bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/216c12abf6eccbcf5c5ff1898e8b063a494af40c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/216c12abf6eccbcf5c5ff1898e8b063a494af40c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/216c12abf6eccbcf5c5ff1898e8b063a494af40c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/216c12abf6eccbcf5c5ff1898e8b063a494af40c/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ecdbf306757a1c18e29a2920470438453dafe8f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecdbf306757a1c18e29a2920470438453dafe8f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecdbf306757a1c18e29a2920470438453dafe8f8"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "8b6bc6f964b1746fa0a4fa55243ef8c4a056b0dc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/216c12abf6eccbcf5c5ff1898e8b063a494af40c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/216c12abf6eccbcf5c5ff1898e8b063a494af40c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=216c12abf6eccbcf5c5ff1898e8b063a494af40c", "patch": "@@ -1,3 +1,9 @@\n+2013-06-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR driver/57651\n+\t* gcc-ar.c (main): If not CROSS_DIRECTORY_STRUCTURE, look for\n+\tPERSONALITY in $PATH derived prefixes.\n+\n 2013-06-19  Jeff Law  <law@redhat.com>\n \n \t* tree-ssa-forwprop.c (simplify_bitwise_binary_boolean): Fix typo"}, {"sha": "e3ad54b327ead8cb7dc7632ed5987b69d0778fac", "filename": "gcc/gcc-ar.c", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/216c12abf6eccbcf5c5ff1898e8b063a494af40c/gcc%2Fgcc-ar.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/216c12abf6eccbcf5c5ff1898e8b063a494af40c/gcc%2Fgcc-ar.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc-ar.c?ref=216c12abf6eccbcf5c5ff1898e8b063a494af40c", "patch": "@@ -147,21 +147,17 @@ main(int ac, char **av)\n   exe_name = find_a_file (&target_path, PERSONALITY);\n   if (!exe_name)\n     {\n+      const char *real_exe_name = PERSONALITY;\n #ifdef CROSS_DIRECTORY_STRUCTURE\n-      const char *cross_exe_name;\n-\n-      cross_exe_name = concat (target_machine, \"-\", PERSONALITY, NULL);\n-      exe_name = find_a_file (&path, cross_exe_name);\n+      real_exe_name = concat (target_machine, \"-\", PERSONALITY, NULL);\n+#endif\n+      exe_name = find_a_file (&path, real_exe_name);\n       if (!exe_name)\n \t{\n \t  fprintf (stderr, \"%s: Cannot find binary '%s'\\n\", av[0],\n-\t\t   cross_exe_name);\n+\t\t   real_exe_name);\n \t  exit (1);\n \t}\n-#else\n-      fprintf (stderr, \"%s: Cannot find binary '%s'\\n\", av[0], PERSONALITY);\n-      exit (1);\n-#endif\n     }\n \n   /* Create new command line with plugin */"}]}