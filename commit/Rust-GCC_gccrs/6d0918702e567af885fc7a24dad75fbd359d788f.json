{"sha": "6d0918702e567af885fc7a24dad75fbd359d788f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQwOTE4NzAyZTU2N2FmODg1ZmM3YTI0ZGFkNzVmYmQzNTlkNzg4Zg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-02-05T23:27:46Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-02-05T23:27:46Z"}, "message": "re PR java/1866 (Array initializer: undefined reference to `LJv0.0')\n\n\t* expr.c (java_lang_expand_expr): Don't bother recomputing\n\t`length'.  Use rest_of_decl_compilation, not make_decl_rtl.\n\tFixes PR java/1866.\n\nFrom-SVN: r39470", "tree": {"sha": "74e6b4dac5ca2af6422c493d78c40101e2f92e7f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74e6b4dac5ca2af6422c493d78c40101e2f92e7f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d0918702e567af885fc7a24dad75fbd359d788f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d0918702e567af885fc7a24dad75fbd359d788f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d0918702e567af885fc7a24dad75fbd359d788f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d0918702e567af885fc7a24dad75fbd359d788f/comments", "author": null, "committer": null, "parents": [{"sha": "56cf87e779b66135eab2eac40aae1d89d0687a47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56cf87e779b66135eab2eac40aae1d89d0687a47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56cf87e779b66135eab2eac40aae1d89d0687a47"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "de1e16e2b76f9821b216f4a251fcb6af8b41ec33", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d0918702e567af885fc7a24dad75fbd359d788f/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d0918702e567af885fc7a24dad75fbd359d788f/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=6d0918702e567af885fc7a24dad75fbd359d788f", "patch": "@@ -1,3 +1,9 @@\n+2001-02-04  Tom Tromey  <tromey@redhat.com>\n+\n+\t* expr.c (java_lang_expand_expr): Don't bother recomputing\n+\t`length'.  Use rest_of_decl_compilation, not make_decl_rtl.\n+\tFixes PR java/1866.\n+\n 2001-02-05  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n \n \t* parse.y (process_imports): Save the original name of the import"}, {"sha": "70a2fe9127639fbac2f5ed9729b6030647e44e6a", "filename": "gcc/java/expr.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d0918702e567af885fc7a24dad75fbd359d788f/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d0918702e567af885fc7a24dad75fbd359d788f/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=6d0918702e567af885fc7a24dad75fbd359d788f", "patch": "@@ -2388,9 +2388,7 @@ java_lang_expand_expr (exp, target, tmode, modifier)\n \t    FINISH_RECORD_CONSTRUCTOR (temp);\n \t    START_RECORD_CONSTRUCTOR (value, array_type);\n \t    PUSH_SUPER_VALUE (value, temp);\n-\t    /* FIXME: build a new `length' here to get it on the right\n-\t       obstack.  */\n-\t    PUSH_FIELD_VALUE (value, \"length\", build_int_2 (ilength, 0));\n+\t    PUSH_FIELD_VALUE (value, \"length\", length);\n \t    PUSH_FIELD_VALUE (value, \"data\", init);\n \t    FINISH_RECORD_CONSTRUCTOR (value);\n \n@@ -2400,7 +2398,7 @@ java_lang_expand_expr (exp, target, tmode, modifier)\n \t    DECL_INITIAL (init_decl) = value;\n \t    DECL_IGNORED_P (init_decl) = 1;\n \t    TREE_READONLY (init_decl) = 1;\n-\t    make_decl_rtl (init_decl, NULL);\n+\t    rest_of_decl_compilation (init_decl, NULL, 1, 0);\n \t    TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (init_decl)) = 1;\n \t    init = build1 (ADDR_EXPR, TREE_TYPE (exp), init_decl);\n \t    r = expand_expr (init, target, tmode, modifier);\n@@ -2423,7 +2421,7 @@ java_lang_expand_expr (exp, target, tmode, modifier)\n \t    DECL_INITIAL (init_decl) = init;\n \t    DECL_IGNORED_P (init_decl) = 1;\n \t    TREE_READONLY (init_decl) = 1;\n-\t    make_decl_rtl (init_decl, NULL);\n+\t    rest_of_decl_compilation (init_decl, NULL, 1, 0);\n \t    TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (init_decl)) = 1;\n \t    init = init_decl;\n \t  }"}]}