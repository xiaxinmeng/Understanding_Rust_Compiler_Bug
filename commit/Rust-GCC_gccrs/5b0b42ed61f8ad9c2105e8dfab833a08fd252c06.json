{"sha": "5b0b42ed61f8ad9c2105e8dfab833a08fd252c06", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIwYjQyZWQ2MWY4YWQ5YzIxMDVlOGRmYWI4MzNhMDhmZDI1MmMwNg==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2001-10-16T11:18:03Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2001-10-16T11:18:03Z"}, "message": "Forgot this file in last commit.\n\nFrom-SVN: r46284", "tree": {"sha": "5e2d398f08e2204d218569e9ee63f5d81fa1ad66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5e2d398f08e2204d218569e9ee63f5d81fa1ad66"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b0b42ed61f8ad9c2105e8dfab833a08fd252c06", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b0b42ed61f8ad9c2105e8dfab833a08fd252c06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b0b42ed61f8ad9c2105e8dfab833a08fd252c06", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b0b42ed61f8ad9c2105e8dfab833a08fd252c06/comments", "author": null, "committer": null, "parents": [{"sha": "4c7726b172c35bd078bb0f88025670ffddd94a92", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c7726b172c35bd078bb0f88025670ffddd94a92", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c7726b172c35bd078bb0f88025670ffddd94a92"}], "stats": {"total": 27, "additions": 6, "deletions": 21}, "files": [{"sha": "24ca5b1f2b4e02ada04c8c796cbc097d20607301", "filename": "libjava/java/lang/Class.h", "status": "modified", "additions": 6, "deletions": 21, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b0b42ed61f8ad9c2105e8dfab833a08fd252c06/libjava%2Fjava%2Flang%2FClass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b0b42ed61f8ad9c2105e8dfab833a08fd252c06/libjava%2Fjava%2Flang%2FClass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.h?ref=5b0b42ed61f8ad9c2105e8dfab833a08fd252c06", "patch": "@@ -14,7 +14,6 @@ details.  */\n \n #pragma interface\n \n-#include <stddef.h>\n #include <java/lang/Object.h>\n #include <java/lang/String.h>\n #include <java/net/URL.h>\n@@ -54,6 +53,7 @@ enum\n struct _Jv_Field;\n struct _Jv_VTable;\n union _Jv_word;\n+struct _Jv_ArrayVTable;\n \n struct _Jv_Constants\n {\n@@ -217,35 +217,17 @@ class java::lang::Class : public java::lang::Object\n \n   // This constructor is used to create Class object for the primitive\n   // types. See prims.cc.\n-  Class (jobject cname, jbyte sig, jint len, jobject array_vtable)\n-  {    \n-    using namespace java::lang::reflect;\n-    _Jv_Utf8Const *_Jv_makeUtf8Const (char *s, int len);\n-\n+  Class ()\n+  {\n     // C++ ctors set the vtbl pointer to point at an offset inside the vtable\n     // object. That doesn't work for Java, so this hack adjusts it back.\n     ((_Jv_Self *)this)->vtable_ptr -= 2 * sizeof (void *);\n-    \n-    // We must initialize every field of the class.  We do this in the\n-    // same order they are declared in Class.h, except for fields that\n-    // are initialized to NULL.\n-    name = _Jv_makeUtf8Const ((char *) cname, -1);\n-    accflags = Modifier::PUBLIC | Modifier::FINAL | Modifier::ABSTRACT;\n-    method_count = sig;\n-    size_in_bytes = len;\n-    vtable = JV_PRIMITIVE_VTABLE;\n-    state = JV_STATE_DONE;\n-    depth = -1;\n-    if (method_count != 'V')\n-      _Jv_NewArrayClass (this, NULL, (_Jv_VTable *) array_vtable);\n   }\n \n   static java::lang::Class class$;\n \n private:   \n \n-  Class ();\n-\n   void checkMemberAccess (jint flags);\n \n   void initializeClass (void);\n@@ -311,6 +293,9 @@ class java::lang::Class : public java::lang::Object\n   friend jclass _Jv_NewClass (_Jv_Utf8Const *name, jclass superclass,\n \t\t\t      java::lang::ClassLoader *loader);\n \n+  // in prims.cc\n+  friend void _Jv_InitPrimClass (jclass, char *, char, int, _Jv_ArrayVTable *);\n+\n   friend void _Jv_PrepareCompiledClass (jclass);\n   friend void _Jv_PrepareConstantTimeTables (jclass);\n   friend jshort _Jv_GetInterfaces (jclass, _Jv_ifaces *);"}]}