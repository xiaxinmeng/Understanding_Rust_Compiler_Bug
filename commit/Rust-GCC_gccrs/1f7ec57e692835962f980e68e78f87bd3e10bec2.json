{"sha": "1f7ec57e692835962f980e68e78f87bd3e10bec2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWY3ZWM1N2U2OTI4MzU5NjJmOTgwZTY4ZTc4Zjg3YmQzZTEwYmVjMg==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2009-08-02T01:38:27Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2009-08-02T01:38:27Z"}, "message": "gthr-dce.h (CONST_CAST2): Define if not defined.\n\n\t* gthr-dce.h (CONST_CAST2): Define if not defined.\n\t(__gthread_setspecific): Use CONST_CAST2 to fix warning.\n\nFrom-SVN: r150342", "tree": {"sha": "a6be5f3cc40559a9fb27163230b0c81cdd8ca1ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a6be5f3cc40559a9fb27163230b0c81cdd8ca1ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f7ec57e692835962f980e68e78f87bd3e10bec2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f7ec57e692835962f980e68e78f87bd3e10bec2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f7ec57e692835962f980e68e78f87bd3e10bec2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f7ec57e692835962f980e68e78f87bd3e10bec2/comments", "author": null, "committer": null, "parents": [{"sha": "be3e4ef63306c4b0c51d5cbbec6162a97188435d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be3e4ef63306c4b0c51d5cbbec6162a97188435d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be3e4ef63306c4b0c51d5cbbec6162a97188435d"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "f42623d9cbe13aa67144258e284b9b01ae4a9572", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f7ec57e692835962f980e68e78f87bd3e10bec2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f7ec57e692835962f980e68e78f87bd3e10bec2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1f7ec57e692835962f980e68e78f87bd3e10bec2", "patch": "@@ -1,5 +1,8 @@\n 2009-08-01  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n+\t* gthr-dce.h (CONST_CAST2): Define if not defined.\n+\t(__gthread_setspecific): Use CONST_CAST2 to fix warning.\n+\n \t* config.gcc (hppa[12]*-*-hpux10*): Add stdint support.\n \n 2009-04-17  Paolo Bonzini  <bonzini@gnu.org>"}, {"sha": "4226359f0a0e2360b48210aab45ed24adf0875f4", "filename": "gcc/gthr-dce.h", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f7ec57e692835962f980e68e78f87bd3e10bec2/gcc%2Fgthr-dce.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f7ec57e692835962f980e68e78f87bd3e10bec2/gcc%2Fgthr-dce.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgthr-dce.h?ref=1f7ec57e692835962f980e68e78f87bd3e10bec2", "patch": "@@ -37,6 +37,15 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n    DCE threads are based on POSIX threads draft 4, and many things\n    have changed since then.  */\n \n+/* Make sure CONST_CAST2 (original in system.h) is defined.  */\n+#ifndef CONST_CAST2\n+#ifdef __cplusplus\n+#define CONST_CAST2(TOTYPE,FROMTYPE,X) (const_cast<TOTYPE> (X))\n+#else\n+#define CONST_CAST2(TOTYPE,FROMTYPE,X) ((__extension__(union {FROMTYPE _q; TOTYPE _nq;})(X))._nq)\n+#endif\n+#endif\n+\n #define __GTHREADS 1\n \n #include <pthread.h>\n@@ -462,7 +471,8 @@ __gthread_getspecific (__gthread_key_t __key)\n static inline int\n __gthread_setspecific (__gthread_key_t __key, const void *__ptr)\n {\n-  return __gthrw_(pthread_setspecific) (__key, (void *) __ptr);\n+  return __gthrw_(pthread_setspecific)\n+    (__key, CONST_CAST2(void *, const void *, __ptr));\n }\n \n static inline void"}]}