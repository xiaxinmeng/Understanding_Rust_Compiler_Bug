{"sha": "9aec7fb4a9fb06a694b629ca63690d92ba32060b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWFlYzdmYjRhOWZiMDZhNjk0YjYyOWNhNjM2OTBkOTJiYTMyMDYwYg==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2004-03-10T00:26:31Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2004-03-10T00:26:31Z"}, "message": "ia64.md (divsi3): Fix algorithm.\n\n\t* config/ia64/ia64.md (divsi3): Fix algorithm.\n\t  (udivsi3): Ditto.\n\t  (setf_exp_xf): Remove '*' from name.\n\t* testsuite/gcc.dg/20040309-1.c: New test.\n\nFrom-SVN: r79217", "tree": {"sha": "b9db7ac0c8a0e722fe3892bacff5e66d7a74dc50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9db7ac0c8a0e722fe3892bacff5e66d7a74dc50"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9aec7fb4a9fb06a694b629ca63690d92ba32060b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9aec7fb4a9fb06a694b629ca63690d92ba32060b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9aec7fb4a9fb06a694b629ca63690d92ba32060b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9aec7fb4a9fb06a694b629ca63690d92ba32060b/comments", "author": null, "committer": null, "parents": [{"sha": "9acd4a03dd2135cfe47c6c9f23c3d98181004fa4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9acd4a03dd2135cfe47c6c9f23c3d98181004fa4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9acd4a03dd2135cfe47c6c9f23c3d98181004fa4"}], "stats": {"total": 44, "additions": 35, "deletions": 9}, "files": [{"sha": "65b91f7f5a3f4bc9ec1e5741d8f77ffbc7a72642", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9aec7fb4a9fb06a694b629ca63690d92ba32060b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9aec7fb4a9fb06a694b629ca63690d92ba32060b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9aec7fb4a9fb06a694b629ca63690d92ba32060b", "patch": "@@ -1,3 +1,10 @@\n+2004-03-09  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* config/ia64/ia64.md (divsi3): Fix algorithm.\n+\t  (udivsi3): Ditto.\n+\t  (setf_exp_xf): Remove '*' from name.\n+\t* testsuite/gcc.dg/20040309-1.c: New test.\n+\n 2004-03-09  Ian Lance Taylor  <ian@wasabisystems.com>\n \n \t* system.h (SUNOS4_SHARED_LIBRARIES): Poison."}, {"sha": "c12c8f38764a069e8c0fa977c49c130940bc0fc6", "filename": "gcc/config/ia64/ia64.md", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9aec7fb4a9fb06a694b629ca63690d92ba32060b/gcc%2Fconfig%2Fia64%2Fia64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9aec7fb4a9fb06a694b629ca63690d92ba32060b/gcc%2Fconfig%2Fia64%2Fia64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.md?ref=9aec7fb4a9fb06a694b629ca63690d92ba32060b", "patch": "@@ -1840,7 +1840,7 @@\n \t\t(match_operand:SI 2 \"general_operand\" \"\")))]\n   \"TARGET_INLINE_INT_DIV\"\n {\n-  rtx op1_xf, op2_xf, op0_xf, op0_di, twon34;\n+  rtx op1_xf, op2_xf, op0_xf, op0_di, twon34, twon34_exp;\n   REAL_VALUE_TYPE twon34_r;\n \n   op0_xf = gen_reg_rtx (XFmode);\n@@ -1857,9 +1857,10 @@\n   expand_float (op2_xf, operands[2], 0);\n \n   /* 2^-34 */\n-  real_2expN (&twon34_r, -34);\n-  twon34 = CONST_DOUBLE_FROM_REAL_VALUE (twon34_r, XFmode);\n-  twon34 = force_reg (XFmode, twon34);\n+  twon34_exp = gen_reg_rtx (DImode);\n+  emit_move_insn (twon34_exp, GEN_INT (65501));\n+  twon34 = gen_reg_rtx (XFmode);\n+  emit_insn (gen_setf_exp_xf (twon34, twon34_exp));\n \n   emit_insn (gen_divsi3_internal (op0_xf, op1_xf, op2_xf, twon34));\n \n@@ -1897,7 +1898,7 @@\n \t\t (match_operand:SI 2 \"general_operand\" \"\")))]\n   \"TARGET_INLINE_INT_DIV\"\n {\n-  rtx op1_xf, op2_xf, op0_xf, op0_di, twon34;\n+  rtx op1_xf, op2_xf, op0_xf, op0_di, twon34, twon34_exp;\n   REAL_VALUE_TYPE twon34_r;\n \n   op0_xf = gen_reg_rtx (XFmode);\n@@ -1914,9 +1915,10 @@\n   expand_float (op2_xf, operands[2], 1);\n \n   /* 2^-34 */\n-  real_2expN (&twon34_r, -34);\n-  twon34 = CONST_DOUBLE_FROM_REAL_VALUE (twon34_r, XFmode);\n-  twon34 = force_reg (XFmode, twon34);\n+  twon34_exp = gen_reg_rtx (DImode);\n+  emit_move_insn (twon34_exp, GEN_INT (65501));\n+  twon34 = gen_reg_rtx (XFmode);\n+  emit_insn (gen_setf_exp_xf (twon34, twon34_exp));\n \n   emit_insn (gen_divsi3_internal (op0_xf, op1_xf, op2_xf, twon34));\n \n@@ -2712,7 +2714,7 @@\n   [(set_attr \"itanium_class\" \"fmisc\")\n    (set_attr \"predicable\" \"no\")])\n \n-(define_insn \"*setf_exp_xf\"\n+(define_insn \"setf_exp_xf\"\n   [(set (match_operand:XF 0 \"fr_register_operand\" \"=f\")\n         (unspec:XF [(match_operand:DI 1 \"register_operand\" \"r\")]\n                   UNSPEC_SETF_EXP))]"}, {"sha": "736150731c7173eeacaa57edeef6c7132184aa2d", "filename": "gcc/testsuite/gcc.dg/20040309-1.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9aec7fb4a9fb06a694b629ca63690d92ba32060b/gcc%2Ftestsuite%2Fgcc.dg%2F20040309-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9aec7fb4a9fb06a694b629ca63690d92ba32060b/gcc%2Ftestsuite%2Fgcc.dg%2F20040309-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20040309-1.c?ref=9aec7fb4a9fb06a694b629ca63690d92ba32060b", "patch": "@@ -0,0 +1,17 @@\n+/* Test integer mod on ia64.  There was a bug in the inline integer\n+   division code. */\n+\n+/* { dg-do run } */\n+/* { dg-options \"-minline-int-divide-max-throughput\" { target ia64-*-* } } */\n+\n+extern void abort (void);\n+\n+volatile int i = 10;\n+volatile int j = 10;\n+\n+int main()\n+{\n+        int k = i % j;\n+        if (k != 0) abort();\n+\treturn 0;\n+}"}]}