{"sha": "54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRiM2Q1MmMzY2NhODM2YzdjNGMwOGNjOWMwMmVkYTZjMDk2MzcyYQ==", "commit": {"author": {"name": "Dragan Mladjenovic", "email": "dragan.mladjenovic@rt-rk.com", "date": "2020-01-23T15:37:20Z"}, "committer": {"name": "Dragan Mladjenovic", "email": "dragan.mladjenovic@rt-rk.com", "date": "2020-01-23T16:00:03Z"}, "message": "Emit .note.GNU-stack for hard-float linux targets.\n\nlibgcc/ChangeLog:\n\n2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n\n\t* config/mips/gnustack.h: Check for TARGET_LIBC_GNUSTACK also.\n\ngcc/ChangeLog:\n\n2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n\n\t* config.in: Regenerated.\n\t* config/mips/linux.h (NEED_INDICATE_EXEC_STACK): Define to 1\n\tfor TARGET_LIBC_GNUSTACK.\n\t* configure: Regenerated.\n\t* configure.ac: Define TARGET_LIBC_GNUSTACK if glibc version is\n\tfound to be 2.31 or greater.", "tree": {"sha": "7cf41bb0b77d0f5a76441e0ddae8a95cbfe3c30f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7cf41bb0b77d0f5a76441e0ddae8a95cbfe3c30f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/comments", "author": null, "committer": null, "parents": [{"sha": "a3c1e1f2ff88628cb163abc5331af752221eddc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3c1e1f2ff88628cb163abc5331af752221eddc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3c1e1f2ff88628cb163abc5331af752221eddc0"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "840668d965799e22c277947b75fb3f0a327240ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "patch": "@@ -1,3 +1,12 @@\n+2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n+\n+\t* config.in: Regenerated.\n+\t* config/mips/linux.h (NEED_INDICATE_EXEC_STACK): Define to 1\n+\tfor TARGET_LIBC_GNUSTACK.\n+\t* configure: Regenerated.\n+\t* configure.ac: Define TARGET_LIBC_GNUSTACK if glibc version is\n+\tfound to be 2.31 or greater.\n+\n 2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n \n \t* config/mips/linux.h (NEED_INDICATE_EXEC_STACK): Define to"}, {"sha": "54446e58e5f70007e3214d445e82549e3a5e5d19", "filename": "gcc/config/mips/linux.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/gcc%2Fconfig%2Fmips%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/gcc%2Fconfig%2Fmips%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux.h?ref=54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "patch": "@@ -53,4 +53,8 @@ along with GCC; see the file COPYING3.  If not see\n \n #undef NEED_INDICATE_EXEC_STACK\n \n+#ifdef TARGET_LIBC_GNUSTACK\n+#define NEED_INDICATE_EXEC_STACK 1\n+#else\n #define NEED_INDICATE_EXEC_STACK TARGET_SOFT_FLOAT\n+#endif"}, {"sha": "a7521ee99436a7c12159bdde0471dc66d3c4288e", "filename": "gcc/configure.ac", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "patch": "@@ -6247,6 +6247,18 @@ if test x$gcc_cv_libc_provides_hwcap_in_tcb = xyes; then\n \t    [Define if your target C Library provides the AT_HWCAP value in the TCB])\n fi\n \n+# Check if the target LIBC handles PT_GNU_STACK.\n+gcc_cv_libc_gnustack=unknown\n+case \"$target\" in\n+  mips*-*-linux*)\n+    GCC_GLIBC_VERSION_GTE_IFELSE([2], [31], [gcc_cv_libc_gnustack=yes], )\n+    ;;\n+esac\n+if test x$gcc_cv_libc_gnustack = xyes; then\n+  AC_DEFINE(TARGET_LIBC_GNUSTACK, 1,\n+            [Define if your target C Library properly handles PT_GNU_STACK])\n+fi\n+\n AC_MSG_CHECKING(dl_iterate_phdr in target C library)\n gcc_cv_target_dl_iterate_phdr=unknown\n case \"$target\" in"}, {"sha": "bea77b2e00126adf79f76e19c2be79553105bd4b", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "patch": "@@ -1,3 +1,7 @@\n+2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n+\n+\t* config/mips/gnustack.h: Check for TARGET_LIBC_GNUSTACK also.\n+\n 2020-01-23  Dragan Mladjenovic  <dmladjenovic@wavecomp.com>\n \n \t* config/mips/gnustack.h: New file."}, {"sha": "561b3484bfec16a78959ddd1d663bbb3773df10d", "filename": "libgcc/config/mips/gnustack.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/libgcc%2Fconfig%2Fmips%2Fgnustack.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b3d52c3cca836c7c4c08cc9c02eda6c096372a/libgcc%2Fconfig%2Fmips%2Fgnustack.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmips%2Fgnustack.h?ref=54b3d52c3cca836c7c4c08cc9c02eda6c096372a", "patch": "@@ -1,6 +1,6 @@\n #include \"config.h\"\n #if defined(__ELF__) && defined(__linux__)\n-#if defined (__mips_soft_float)\n+#if defined (TARGET_LIBC_GNUSTACK) || defined (__mips_soft_float)\n \t.section .note.GNU-stack,\"\",%progbits\n \t.previous\n #endif"}]}