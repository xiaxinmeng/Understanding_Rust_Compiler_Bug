{"sha": "d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013", "node_id": "C_kwDOANBUbNoAKGQwZDRkY2ZkYjQzOGFmN2M1ZjE1YWZlYmEyY2E3N2VjYmUyYmUwMTM", "commit": {"author": {"name": "Arthur Cohen", "email": "arthur.cohen@embecosm.com", "date": "2022-02-18T14:41:16Z"}, "committer": {"name": "Arthur Cohen", "email": "arthur.cohen@embecosm.com", "date": "2022-02-18T15:46:10Z"}, "message": "macro: Add repetition execution test cases", "tree": {"sha": "ba87dc8ea33d5f3f1c78d8e6bb4ff9c41bfe5b43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba87dc8ea33d5f3f1c78d8e6bb4ff9c41bfe5b43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013/comments", "author": {"login": "CohenArthur", "id": 43524065, "node_id": "MDQ6VXNlcjQzNTI0MDY1", "avatar_url": "https://avatars.githubusercontent.com/u/43524065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CohenArthur", "html_url": "https://github.com/CohenArthur", "followers_url": "https://api.github.com/users/CohenArthur/followers", "following_url": "https://api.github.com/users/CohenArthur/following{/other_user}", "gists_url": "https://api.github.com/users/CohenArthur/gists{/gist_id}", "starred_url": "https://api.github.com/users/CohenArthur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CohenArthur/subscriptions", "organizations_url": "https://api.github.com/users/CohenArthur/orgs", "repos_url": "https://api.github.com/users/CohenArthur/repos", "events_url": "https://api.github.com/users/CohenArthur/events{/privacy}", "received_events_url": "https://api.github.com/users/CohenArthur/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CohenArthur", "id": 43524065, "node_id": "MDQ6VXNlcjQzNTI0MDY1", "avatar_url": "https://avatars.githubusercontent.com/u/43524065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CohenArthur", "html_url": "https://github.com/CohenArthur", "followers_url": "https://api.github.com/users/CohenArthur/followers", "following_url": "https://api.github.com/users/CohenArthur/following{/other_user}", "gists_url": "https://api.github.com/users/CohenArthur/gists{/gist_id}", "starred_url": "https://api.github.com/users/CohenArthur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CohenArthur/subscriptions", "organizations_url": "https://api.github.com/users/CohenArthur/orgs", "repos_url": "https://api.github.com/users/CohenArthur/repos", "events_url": "https://api.github.com/users/CohenArthur/events{/privacy}", "received_events_url": "https://api.github.com/users/CohenArthur/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af789a7079408782f76dc29efa7a8368740dc2ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af789a7079408782f76dc29efa7a8368740dc2ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af789a7079408782f76dc29efa7a8368740dc2ee"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "c1e13e323236666815425b68fe771a32e2617050", "filename": "gcc/testsuite/rust/execute/torture/macros7.rs", "status": "renamed", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros7.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros7.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros7.rs?ref=d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013", "patch": "@@ -1,4 +1,4 @@\n-// { dg-output \"any\\nany\\nany\\nany\\nany\\n\" }\n+// { dg-output \"any\\nany\\nany\\n\" }\n extern \"C\" {\n     fn printf(s: *const i8, ...);\n }\n@@ -8,17 +8,19 @@ fn f() {\n     let s_p = r_s as *const str;\n     let c_p = s_p as *const i8;\n \n-    printf(c_p);\n+    unsafe { printf(c_p); }\n }\n \n macro_rules! any {\n     ($($a:expr)*) => {\n-        $($a;)*\n+        f()\n     }\n }\n \n-fn main() {\n-    any!(); // valid, but does not print anything\n-    any!(f() f());\n-    any!(f() f()    f());\n+fn main() -> i32 {\n+    any!();\n+    any!(a + b);\n+    any!(a + b    14 \"gcc\");\n+\n+    0\n }", "previous_filename": "gcc/testsuite/rust/execute/xfail/macro4.rs"}, {"sha": "2f1e23895727f03eea52fbe1e6ea46592e698b9f", "filename": "gcc/testsuite/rust/execute/torture/macros8.rs", "status": "renamed", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros8.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros8.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros8.rs?ref=d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013", "patch": "@@ -17,7 +17,9 @@ macro_rules! zero_or_one {\n     }\n }\n \n-fn main() {\n+fn main() -> i32 {\n     zero_or_one!();\n     zero_or_one!(f());\n+\n+    0\n }", "previous_filename": "gcc/testsuite/rust/execute/xfail/macro5.rs"}, {"sha": "22dec2a94cc8cb90329fc2f0712024d613d6442d", "filename": "gcc/testsuite/rust/execute/torture/macros9.rs", "status": "renamed", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros9.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros9.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fexecute%2Ftorture%2Fmacros9.rs?ref=d0d4dcfdb438af7c5f15afeba2ca77ecbe2be013", "patch": "@@ -13,11 +13,14 @@ fn f() {\n \n macro_rules! one_or_more {\n     ($($a:expr)+) => {\n-        $($a;)+\n+        f()\n     }\n }\n \n-fn main() {\n+fn main() -> i32 {\n     one_or_more!(f());\n     one_or_more!(f() f());\n+    one_or_more!(f() f() 15 + 12);\n+\n+    0\n }", "previous_filename": "gcc/testsuite/rust/execute/xfail/macro6.rs"}]}