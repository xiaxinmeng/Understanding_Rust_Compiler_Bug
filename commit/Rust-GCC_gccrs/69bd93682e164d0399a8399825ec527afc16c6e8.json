{"sha": "69bd93682e164d0399a8399825ec527afc16c6e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjliZDkzNjgyZTE2NGQwMzk5YTgzOTk4MjVlYzUyN2FmYzE2YzZlOA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-02-06T01:23:41Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-02-06T01:23:41Z"}, "message": "dwarf2out.c (mem_loc_descriptor): Replace ASM_SIMPLIFY_DWARF_ADDR with *targetm.delegitimize_address.\n\n\n\t* dwarf2out.c (mem_loc_descriptor): Replace ASM_SIMPLIFY_DWARF_ADDR\n\twith *targetm.delegitimize_address.\n\t(rtl_for_decl_location): Likewise.\n\t* dwarfout.c (output_mem_loc_descriptor): Likewise.  Include target.h.\n\t* Makefile.in (dwarf2out.c, dwarfout.c): Depend upon $(TARGET_H)\n\n\t* config/i386/i386.h (ASM_SIMPLIFY_DWARF_ADDR): Remove definition.\n\t* config/i386/i386-protos.h (i386_simplify_dwarf_addr): Remove\n\tprototype.\n\t* config/i386/i386.c (ix86_delegitimize_address): Renamed from\n\ti386_simplify_dwarf_addr.  Made static.  Prototyped.\n\t(TARGET_DELEGITIMIZE_ADDRESS): Update definition from\n\ti386_simplify_dwarf_addr to ix86_delegitimize_address.\n\t(ix86_find_base_term): Likewise.\n\t(maybe_get_pool_constant): Likewise.\n\n\t* config/s390/s390.h (ASM_SIMPLIFY_DWARF_ADDR): Remove definition.\n\t* config/s390/s390-protos.h (s390_simplify_dwarf_addr): Remove\n\tprototype.\n\t* config/s390/s390.c (s390_delegitimize_address): Renamed from\n\ts390_simplify_dwarf_addr.  Made static.  Prototyped.\n\t(TARGET_DELEGITIMIZE_ADDRESS): Define as s390_delegitimize_address.\n\nFrom-SVN: r62468", "tree": {"sha": "5844ccac41bfc727491a8560d29229520ef4c884", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5844ccac41bfc727491a8560d29229520ef4c884"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/69bd93682e164d0399a8399825ec527afc16c6e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69bd93682e164d0399a8399825ec527afc16c6e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69bd93682e164d0399a8399825ec527afc16c6e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69bd93682e164d0399a8399825ec527afc16c6e8/comments", "author": null, "committer": null, "parents": [{"sha": "8dde7a2c748cac25a34b5d2d0bb0c1e7dc659368", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dde7a2c748cac25a34b5d2d0bb0c1e7dc659368", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dde7a2c748cac25a34b5d2d0bb0c1e7dc659368"}], "stats": {"total": 89, "additions": 51, "deletions": 38}, "files": [{"sha": "b78f7027913ea035ebef881c0de5ccb5ca945f18", "filename": "gcc/ChangeLog", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -1,3 +1,28 @@\n+2003-02-05  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* dwarf2out.c (mem_loc_descriptor): Replace ASM_SIMPLIFY_DWARF_ADDR\n+\twith *targetm.delegitimize_address.\n+\t(rtl_for_decl_location): Likewise.\n+\t* dwarfout.c (output_mem_loc_descriptor): Likewise.  Include target.h.\n+\t* Makefile.in (dwarf2out.c, dwarfout.c): Depend upon $(TARGET_H)\n+\n+\t* config/i386/i386.h (ASM_SIMPLIFY_DWARF_ADDR): Remove definition.\n+\t* config/i386/i386-protos.h (i386_simplify_dwarf_addr): Remove\n+\tprototype.\n+\t* config/i386/i386.c (ix86_delegitimize_address): Renamed from\n+\ti386_simplify_dwarf_addr.  Made static.  Prototyped.\n+\t(TARGET_DELEGITIMIZE_ADDRESS): Update definition from\n+\ti386_simplify_dwarf_addr to ix86_delegitimize_address.\n+\t(ix86_find_base_term): Likewise.\n+\t(maybe_get_pool_constant): Likewise.\n+\n+\t* config/s390/s390.h (ASM_SIMPLIFY_DWARF_ADDR): Remove definition.\n+\t* config/s390/s390-protos.h (s390_simplify_dwarf_addr): Remove\n+\tprototype.\n+\t* config/s390/s390.c (s390_delegitimize_address): Renamed from\n+\ts390_simplify_dwarf_addr.  Made static.  Prototyped.\n+\t(TARGET_DELEGITIMIZE_ADDRESS): Define as s390_delegitimize_address.\n+\n 2003-02-05  Richard Henderson  <rth@redhat.com>\n \n \tPR c/8602"}, {"sha": "2d1c6c16170d34f74af7aaefac7c32d7445ea0f5", "filename": "gcc/Makefile.in", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -1497,11 +1497,12 @@ sdbout.o : sdbout.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(TREE_H) $(RTL_\n    sdbout.h toplev.h $(TM_P_H) except.h debug.h langhooks.h gt-sdbout.h\n dwarfout.o : dwarfout.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(TREE_H) \\\n    $(RTL_H) dwarf.h flags.h insn-config.h reload.h output.h toplev.h $(TM_P_H) \\\n-   debug.h langhooks.h\n+   debug.h langhooks.h $(TARGET_H)\n dwarf2out.o : dwarf2out.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(TREE_H) \\\n    $(RTL_H) dwarf2.h debug.h flags.h insn-config.h reload.h output.h diagnostic.h real.h \\\n    hard-reg-set.h $(REGS_H) $(EXPR_H) libfuncs.h toplev.h dwarf2out.h varray.h \\\n-   $(GGC_H) except.h dwarf2asm.h $(TM_P_H) langhooks.h $(HASHTAB_H) gt-dwarf2out.h\n+   $(GGC_H) except.h dwarf2asm.h $(TM_P_H) langhooks.h $(HASHTAB_H) \\\n+   gt-dwarf2out.h $(TARGET_H)\n dwarf2asm.o : dwarf2asm.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) flags.h $(RTL_H) \\\n    $(TREE_H) output.h dwarf2asm.h $(TM_P_H) $(GGC_H) gt-dwarf2asm.h\n vmsdbgout.o : vmsdbgout.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(TREE_H) \\"}, {"sha": "c920985b21ffab9e7579656e098696f3ed85a6d4", "filename": "gcc/config/i386/i386-protos.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fi386%2Fi386-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fi386%2Fi386-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-protos.h?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -1,6 +1,6 @@\n /* Definitions of target machine for GNU compiler for IA-32.\n    Copyright (C) 1988, 1992, 1994, 1995, 1996, 1996, 1997, 1998, 1999,\n-   2000, 2001 Free Software Foundation, Inc.\n+   2000, 2001, 2002, 2003 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -121,7 +121,6 @@ extern const char *output_fp_compare PARAMS ((rtx, rtx*, int, int));\n \n extern void i386_dwarf_output_addr_const PARAMS ((FILE*, rtx));\n extern void i386_output_dwarf_dtprel PARAMS ((FILE*, int, rtx));\n-extern rtx i386_simplify_dwarf_addr PARAMS ((rtx));\n \n extern void ix86_expand_clear PARAMS ((rtx));\n extern void ix86_expand_move PARAMS ((enum machine_mode, rtx[]));"}, {"sha": "bb4c22d914d1ea765a9b92de5d27b36d09496736", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -842,6 +842,7 @@ struct ix86_address\n static int ix86_decompose_address PARAMS ((rtx, struct ix86_address *));\n static int ix86_address_cost PARAMS ((rtx));\n static bool ix86_cannot_force_const_mem PARAMS ((rtx));\n+static rtx ix86_delegitimize_address PARAMS ((rtx));\n \n static void ix86_encode_section_info PARAMS ((tree, int)) ATTRIBUTE_UNUSED;\n static const char *ix86_strip_name_encoding PARAMS ((const char *))\n@@ -991,7 +992,7 @@ static enum x86_64_reg_class merge_classes PARAMS ((enum x86_64_reg_class,\n #define TARGET_CANNOT_FORCE_CONST_MEM ix86_cannot_force_const_mem\n \n #undef TARGET_DELEGITIMIZE_ADDRESS\n-#define TARGET_DELEGITIMIZE_ADDRESS i386_simplify_dwarf_addr\n+#define TARGET_DELEGITIMIZE_ADDRESS ix86_delegitimize_address\n \n #undef TARGET_MS_BITFIELD_LAYOUT_P\n #define TARGET_MS_BITFIELD_LAYOUT_P ix86_ms_bitfield_layout_p\n@@ -5371,7 +5372,7 @@ ix86_find_base_term (x)\n       return term;\n     }\n \n-  term = i386_simplify_dwarf_addr (x);\n+  term = ix86_delegitimize_address (x);\n \n   if (GET_CODE (term) != SYMBOL_REF\n       && GET_CODE (term) != LABEL_REF)\n@@ -6605,8 +6606,8 @@ i386_output_dwarf_dtprel (file, size, x)\n    general assembler losage, recognize PIC+GOTOFF and turn it back\n    into a direct symbol reference.  */\n \n-rtx\n-i386_simplify_dwarf_addr (orig_x)\n+static rtx\n+ix86_delegitimize_address (orig_x)\n      rtx orig_x;\n {\n   rtx x = orig_x, y;\n@@ -8036,7 +8037,7 @@ static rtx\n maybe_get_pool_constant (x)\n      rtx x;\n {\n-  x = i386_simplify_dwarf_addr (XEXP (x, 0));\n+  x = ix86_delegitimize_address (XEXP (x, 0));\n \n   if (GET_CODE (x) == SYMBOL_REF && CONSTANT_POOL_ADDRESS_P (x))\n     return get_pool_constant (x);"}, {"sha": "1fa4358c24da844005efda3fadac5377b2623626", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -1,6 +1,6 @@\n /* Definitions of target machine for GNU compiler for IA-32.\n    Copyright (C) 1988, 1992, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n-   2001, 2002 Free Software Foundation, Inc.\n+   2001, 2002, 2003 Free Software Foundation, Inc.\n \n This file is part of GNU CC.\n \n@@ -2842,11 +2842,6 @@ do {\t\t\t\t\t\t\t\t\t\\\n #define ASM_OUTPUT_DWARF_ADDR_CONST(FILE, X) \\\n   i386_dwarf_output_addr_const ((FILE), (X))\n \n-/* Either simplify a location expression, or return the original.  */\n-\n-#define ASM_SIMPLIFY_DWARF_ADDR(X) \\\n-  i386_simplify_dwarf_addr (X)\n-\n /* Emit a dtp-relative reference to a TLS variable.  */\n \n #ifdef HAVE_AS_TLS"}, {"sha": "cb3326c74cf5dee9c039039f8ecb73d6bb1b3768", "filename": "gcc/config/s390/s390-protos.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fs390%2Fs390-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fs390%2Fs390-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390-protos.h?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -76,7 +76,6 @@ extern void s390_output_constant_pool PARAMS ((rtx, rtx));\n extern void s390_trampoline_template PARAMS ((FILE *));\n extern void s390_initialize_trampoline PARAMS ((rtx, rtx, rtx));\n extern rtx s390_gen_rtx_const_DI PARAMS ((int, int));\n-extern rtx s390_simplify_dwarf_addr PARAMS ((rtx));\n extern void s390_machine_dependent_reorg PARAMS ((rtx));\n extern int s390_agen_dep_p PARAMS ((rtx, rtx));\n "}, {"sha": "30e7918d1e3e6d95a08fdb86418146592cc1806d", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -56,6 +56,7 @@ static void s390_select_rtx_section PARAMS ((enum machine_mode, rtx,\n static void s390_encode_section_info PARAMS ((tree, int));\n static const char *s390_strip_name_encoding PARAMS ((const char *));\n static bool s390_cannot_force_const_mem PARAMS ((rtx));\n+static rtx s390_delegitimize_address PARAMS ((rtx));\n static void s390_init_builtins PARAMS ((void));\n static rtx s390_expand_builtin PARAMS ((tree, rtx, rtx, \n \t\t\t\t\tenum machine_mode, int));\n@@ -98,6 +99,9 @@ static int s390_address_cost PARAMS ((rtx));\n #undef TARGET_CANNOT_FORCE_CONST_MEM\n #define TARGET_CANNOT_FORCE_CONST_MEM s390_cannot_force_const_mem\n \n+#undef TARGET_DELEGITIMIZE_ADDRESS\n+#define TARGET_DELEGITIMIZE_ADDRESS s390_delegitimize_address\n+\n #undef  TARGET_INIT_BUILTINS\n #define TARGET_INIT_BUILTINS s390_init_builtins\n #undef  TARGET_EXPAND_BUILTIN\n@@ -3056,8 +3060,8 @@ s390_expand_cmpstr (target, op0, op1, len)\n    general assembler losage, recognize various UNSPEC sequences\n    and turn them back into a direct symbol reference.  */\n \n-rtx\n-s390_simplify_dwarf_addr (orig_x)\n+static rtx\n+s390_delegitimize_address (orig_x)\n      rtx orig_x;\n {\n   rtx x = orig_x, y;"}, {"sha": "dc8775704459b87d4ca5b89354c15f1a99359ce1", "filename": "gcc/config/s390/s390.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fs390%2Fs390.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fconfig%2Fs390%2Fs390.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.h?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -911,10 +911,6 @@ extern int flag_pic;\n /* The LOCAL_LABEL_PREFIX variable is used by dbxelf.h.  */\n #define LOCAL_LABEL_PREFIX \".\"\n \n-/* Either simplify a location expression, or return the original.  */\n-#define ASM_SIMPLIFY_DWARF_ADDR(X) \\\n-  s390_simplify_dwarf_addr (X)\n-\n /* How to refer to registers in assembler output.  This sequence is\n    indexed by compiler's hard-register-number (see above).  */\n #define REGISTER_NAMES\t\t\t\t\t\t\t\\"}, {"sha": "435b5c070d814d71468b30b1c6b159f86ad8887b", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 5, "deletions": 11, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -1,6 +1,6 @@\n /* Output Dwarf2 format symbol table information from the GNU C compiler.\n-   Copyright (C) 1992, 1993, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002\n-   Free Software Foundation, Inc.\n+   Copyright (C) 1992, 1993, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,\n+   2003 Free Software Foundation, Inc.\n    Contributed by Gary Funck (gary@intrepid.com).\n    Derived from DWARF 1 implementation of Ron Guilmette (rfg@monkeys.com).\n    Extensively modified by Jason Merrill (jason@cygnus.com).\n@@ -8270,9 +8270,7 @@ mem_loc_descriptor (rtl, mode)\n      actually within the array.  That's *not* necessarily the same as the\n      zeroth element of the array.  */\n \n-#ifdef ASM_SIMPLIFY_DWARF_ADDR\n-  rtl = ASM_SIMPLIFY_DWARF_ADDR (rtl);\n-#endif\n+  rtl = (*targetm.delegitimize_address) (rtl);\n \n   switch (GET_CODE (rtl))\n     {\n@@ -9370,9 +9368,7 @@ rtl_for_decl_location (decl)\n \t      || (GET_CODE (rtl) == MEM\n \t          && CONSTANT_P (XEXP (rtl, 0)))))\n \t{\n-#ifdef ASM_SIMPLIFY_DWARF_ADDR\n-\t  rtl = ASM_SIMPLIFY_DWARF_ADDR (rtl);\n-#endif\n+\t  rtl = (*targetm.delegitimize_address) (rtl);\n \t  return rtl;\n \t}\n       rtl = NULL_RTX;\n@@ -9478,10 +9474,8 @@ rtl_for_decl_location (decl)\n \t}\n     }\n \n-#ifdef ASM_SIMPLIFY_DWARF_ADDR\n   if (rtl)\n-    rtl = ASM_SIMPLIFY_DWARF_ADDR (rtl);\n-#endif\n+    rtl = (*targetm.delegitimize_address) (rtl);\n \n   /* If we don't look past the constant pool, we risk emitting a\n      reference to a constant pool entry that isn't referenced from"}, {"sha": "07528cda1fc19a205fa822be063acbe206077ff7", "filename": "gcc/dwarfout.c", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fdwarfout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69bd93682e164d0399a8399825ec527afc16c6e8/gcc%2Fdwarfout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarfout.c?ref=69bd93682e164d0399a8399825ec527afc16c6e8", "patch": "@@ -1,6 +1,6 @@\n /* Output Dwarf format symbol table information from the GNU C compiler.\n-   Copyright (C) 1992, 1993, 1995, 1996, 1997, 1998, 2002,\n-   1999, 2000, 2001, 2002 Free Software Foundation, Inc.\n+   Copyright (C) 1992, 1993, 1995, 1996, 1997, 1998, 1999, 2000, 2001,\n+   2002, 2003 Free Software Foundation, Inc.\n    Contributed by Ron Guilmette (rfg@monkeys.com) of Network Computing Devices.\n \n This file is part of GCC.\n@@ -581,6 +581,7 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #include \"toplev.h\"\n #include \"tm_p.h\"\n #include \"debug.h\"\n+#include \"target.h\"\n #include \"langhooks.h\"\n \n /* NOTE: In the comments in this file, many references are made to\n@@ -2097,9 +2098,7 @@ output_mem_loc_descriptor (rtl)\n      which is actually within the array.  That's *not* necessarily the\n      same as the zeroth element of the array.  */\n \n-#ifdef ASM_SIMPLIFY_DWARF_ADDR\n-  rtl = ASM_SIMPLIFY_DWARF_ADDR (rtl);\n-#endif\n+  rtl = (*targetm.delegitimize_address) (rtl);\n \n   switch (GET_CODE (rtl))\n     {"}]}