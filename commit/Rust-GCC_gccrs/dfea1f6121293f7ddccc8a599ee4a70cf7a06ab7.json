{"sha": "dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZlYTFmNjEyMTI5M2Y3ZGRjY2M4YTU5OWVlNGE3MGNmN2EwNmFiNw==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@kss-loka.si", "date": "2005-11-08T06:21:51Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2005-11-08T06:21:51Z"}, "message": "re PR target/19340 (Compilation SEGFAULTs with -O1 -fschedule-insns2 -fsched2-use-traces on an x86 architecture.)\n\n\tPR target/19340\n\t* reg-stack.c (reg_to_stack): Update register liveness also\n\tfor flag_sched2_use_traces.\n\ntestsuite/\n\n\tPR target/19340\n\t* gcc.dg/pr19340.c: New test.\n\nFrom-SVN: r106632", "tree": {"sha": "166d9955cced43acc0779bd5bba06c8452409cf5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/166d9955cced43acc0779bd5bba06c8452409cf5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/comments", "author": null, "committer": null, "parents": [{"sha": "2c9c9afdba87b81834674c14cf9ae5f8ab6aecda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c9c9afdba87b81834674c14cf9ae5f8ab6aecda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c9c9afdba87b81834674c14cf9ae5f8ab6aecda"}], "stats": {"total": 41, "additions": 39, "deletions": 2}, "files": [{"sha": "1e22fd36845138782dcbb7c8123c12f5681deaf0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "patch": "@@ -1,3 +1,9 @@\n+2005-11-08  Uros Bizjak  <uros@kss-loka.si>\n+\n+\tPR target/19340\n+\t* reg-stack.c (reg_to_stack): Update register liveness also\n+\tfor flag_sched2_use_traces.\n+\n 2005-11-08  Alan Modra  <amodra@bigpond.net.au>\n \n \tPR target/23704"}, {"sha": "665311c2b6be889cd15fbe415372ce865aab721a", "filename": "gcc/reg-stack.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2Freg-stack.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2Freg-stack.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freg-stack.c?ref=dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "patch": "@@ -3046,7 +3046,7 @@ reg_to_stack (FILE *file)\n      Also need to rebuild life when superblock scheduling is done\n      as it don't update liveness yet.  */\n   if (!optimize\n-      || (flag_sched2_use_superblocks\n+      || ((flag_sched2_use_superblocks || flag_sched2_use_traces)\n \t  && flag_schedule_insns_after_reload))\n     {\n       count_or_remove_death_notes (NULL, 1);"}, {"sha": "95040bc925a6a2bee78cd21d00d63f5a988d5350", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "patch": "@@ -1,11 +1,16 @@\n+2005-11-08  Uros Bizjak  <uros@kss-loka.si>\n+\n+\tPR target/19340\n+\t* gcc.dg/pr19340.c: New test.\n+\n 2005-11-07  Ian Lance Taylor  <ian@airs.com>\n \n \tPR rtl-optimization/24683\n \t* gcc.dg/pr24683.c: New test.\n \n 2005-11-07  Uros Bizjak  <uros@kss-loka.si>\n \n-\t* gcc.dg/vect/pr24225.c: Add cleanup-coverage-files.\n+\t* gcc.dg/pr24225.c: Add cleanup-coverage-files.\n \t* gcc.dg/vect/pr24300.c: Add cleanup-tree-dump.\n \n 2005-11-07  Uros Bizjak  <uros@kss-loka.si>"}, {"sha": "cac4b0933eeaa69d2e3dda548ebd26e34818502a", "filename": "gcc/testsuite/gcc.dg/pr19340.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2Ftestsuite%2Fgcc.dg%2Fpr19340.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7/gcc%2Ftestsuite%2Fgcc.dg%2Fpr19340.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr19340.c?ref=dfea1f6121293f7ddccc8a599ee4a70cf7a06ab7", "patch": "@@ -0,0 +1,26 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O1 -fschedule-insns2 -fsched2-use-traces\" } */\n+\n+extern double f (double x);\n+\n+double g (int a)\n+{\n+  int b, c, d, e = 0;\n+  double h;\n+\n+  for (d = 0; d < a; d++)\n+    for (c = 0; c < a; c++)\n+      b = 1;\n+\n+  h = (double) e / (double) a;\n+\n+  if (h)\n+    {\n+      h = 1.0 / h;\n+      h = f (h);\n+    }\n+  else\n+    h = 1.0;\n+\n+  return h;\n+}"}]}