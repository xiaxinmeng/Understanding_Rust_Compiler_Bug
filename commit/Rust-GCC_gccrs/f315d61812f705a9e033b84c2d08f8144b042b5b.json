{"sha": "f315d61812f705a9e033b84c2d08f8144b042b5b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjMxNWQ2MTgxMmY3MDVhOWUwMzNiODRjMmQwOGY4MTQ0YjA0MmI1Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-06-25T06:48:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-06-25T06:48:04Z"}, "message": "re PR c++/53594 ([C++11] Spurious -Wuninitialized warning for member with NSDMI)\n\n\tPR c++/53594\n\t* class.c (check_bases_and_members): Avoid -Wuninitialized\n\tdiagnostics for non-static const members or references if they\n\tuse NSDMI.\n\n\t* g++.dg/cpp0x/nsdmi7.C: New test.\n\nFrom-SVN: r188925", "tree": {"sha": "e7c4f438fc953290040022c894b28e566a34a835", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7c4f438fc953290040022c894b28e566a34a835"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f315d61812f705a9e033b84c2d08f8144b042b5b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f315d61812f705a9e033b84c2d08f8144b042b5b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f315d61812f705a9e033b84c2d08f8144b042b5b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f315d61812f705a9e033b84c2d08f8144b042b5b/comments", "author": null, "committer": null, "parents": [{"sha": "511e47fc2fa059e83d412b4598d2c3fcc90dc839", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/511e47fc2fa059e83d412b4598d2c3fcc90dc839", "html_url": "https://github.com/Rust-GCC/gccrs/commit/511e47fc2fa059e83d412b4598d2c3fcc90dc839"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "93233a892b53759f6d0405d09b7bb8a3a044bf76", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f315d61812f705a9e033b84c2d08f8144b042b5b", "patch": "@@ -1,4 +1,11 @@\n-2012-06-16 Ville Voutilainen <ville.voutilainen@gmail.com>\n+2012-06-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/53594\n+\t* class.c (check_bases_and_members): Avoid -Wuninitialized\n+\tdiagnostics for non-static const members or references if they\n+\tuse NSDMI.\n+\n+2012-06-16  Ville Voutilainen  <ville.voutilainen@gmail.com>\n \n \t* parser.c (cp_parser_direct_declarator): Move virt-specifier\n \tparsing after late-specified return type parsing."}, {"sha": "6307e847a40c3eb97ffbaa00aa204f7ee6dd71be", "filename": "gcc/cp/class.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=f315d61812f705a9e033b84c2d08f8144b042b5b", "patch": "@@ -5122,7 +5122,8 @@ check_bases_and_members (tree t)\n \t{\n \t  tree type;\n \n-\t  if (TREE_CODE (field) != FIELD_DECL)\n+\t  if (TREE_CODE (field) != FIELD_DECL\n+\t      || DECL_INITIAL (field) != NULL_TREE)\n \t    continue;\n \n \t  type = TREE_TYPE (field);"}, {"sha": "82bb2d775e21a5ba5a49058c74c349f543bf6a8c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f315d61812f705a9e033b84c2d08f8144b042b5b", "patch": "@@ -1,3 +1,8 @@\n+2012-06-25  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/53594\n+\t* g++.dg/cpp0x/nsdmi7.C: New test.\n+\n 2012-06-24  Kai Tietz  <ktietz@redhat.com>\n \n \t* gcc.target/i386/pr23943.c (size_t): Use compatible type-definition"}, {"sha": "ea1957775ad598b133ea87accabc2c1ad11eb146", "filename": "gcc/testsuite/g++.dg/cpp0x/nsdmi7.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fnsdmi7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f315d61812f705a9e033b84c2d08f8144b042b5b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fnsdmi7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fnsdmi7.C?ref=f315d61812f705a9e033b84c2d08f8144b042b5b", "patch": "@@ -0,0 +1,17 @@\n+// PR c++/53594\n+// { dg-do compile }\n+// { dg-options \"-std=c++11 -Wuninitialized\" }\n+\n+struct A\n+{\n+  const int a = 6;\t// { dg-bogus \"non-static const member\" }\n+  static int b;\n+  int &c = b;\t\t// { dg-bogus \"non-static reference\" }\n+};\n+\n+struct B\n+{\n+  const int d;\t\t// { dg-warning \"non-static const member\" }\n+  int &e;\t\t// { dg-warning \"non-static reference\" }\n+  int f = 7;\n+};"}]}