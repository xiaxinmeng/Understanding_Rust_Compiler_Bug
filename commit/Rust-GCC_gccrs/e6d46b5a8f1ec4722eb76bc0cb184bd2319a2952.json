{"sha": "e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTZkNDZiNWE4ZjFlYzQ3MjJlYjc2YmMwY2IxODRiZDIzMTlhMjk1Mg==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-07-08T18:13:19Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2012-07-08T18:13:19Z"}, "message": "mcf.c: Do not include tm.h, tree.h, and langhooks.h.\n\n\t* mcf.c: Do not include tm.h, tree.h, and langhooks.h.\n\t(dump_fixup_graph): Use current_function_name.\n\t(adjust_cfg_counts): Likewise.\n\t* ira-conflicts.c: Do not include tree.h.\n\t(ira_build_conflicts): Use REG_USERVAR_P instead of DECL_ARTIFICIAL.\n\nFrom-SVN: r189361", "tree": {"sha": "ef43694284cc33f0429bdea4ec67acf874f9e98e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ef43694284cc33f0429bdea4ec67acf874f9e98e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952/comments", "author": null, "committer": null, "parents": [{"sha": "cab4c5107fd3598952fb60e9767e74ef5802225c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cab4c5107fd3598952fb60e9767e74ef5802225c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cab4c5107fd3598952fb60e9767e74ef5802225c"}], "stats": {"total": 29, "additions": 13, "deletions": 16}, "files": [{"sha": "c0883035d9d67a5566e3bcedf08573cf197bdaf6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "patch": "@@ -1,3 +1,11 @@\n+2012-07-08  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\t* mcf.c: Do not include tm.h, tree.h, and langhooks.h.\n+\t(dump_fixup_graph): Use current_function_name.\n+\t(adjust_cfg_counts): Likewise.\n+\t* ira-conflicts.c: Do not include tree.h.\n+\t(ira_build_conflicts): Use REG_USERVAR_P instead of DECL_ARTIFICIAL.\n+\n 2012-07-08  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/51244"}, {"sha": "583629bf5a0262a4e87d02b1694e438298f90fd8", "filename": "gcc/ira-conflicts.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952/gcc%2Fira-conflicts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952/gcc%2Fira-conflicts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fira-conflicts.c?ref=e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "patch": "@@ -25,7 +25,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"tm.h\"\n #include \"regs.h\"\n #include \"rtl.h\"\n-#include \"tree.h\"\t\t/* For DECL_ARTIFICIAL and friends.  */\n #include \"tm_p.h\"\n #include \"target.h\"\n #include \"flags.h\"\n@@ -893,17 +892,12 @@ ira_build_conflicts (void)\n       for (i = 0; i < n; i++)\n \t{\n \t  ira_object_t obj = ALLOCNO_OBJECT (a, i);\n-\t  reg_attrs *attrs = REG_ATTRS (regno_reg_rtx [ALLOCNO_REGNO (a)]);\n-\t  tree decl;\n+\t  rtx allocno_reg = regno_reg_rtx [ALLOCNO_REGNO (a)];\n \n \t  if ((! flag_caller_saves && ALLOCNO_CALLS_CROSSED_NUM (a) != 0)\n \t      /* For debugging purposes don't put user defined variables in\n \t\t callee-clobbered registers.  */\n-\t      || (optimize == 0\n-\t\t  && attrs != NULL\n-\t\t  && (decl = attrs->decl) != NULL\n-\t\t  && VAR_OR_FUNCTION_DECL_P (decl)\n-\t\t  && ! DECL_ARTIFICIAL (decl)))\n+\t      || (optimize == 0 && REG_USERVAR_P (allocno_reg)))\n \t    {\n \t      IOR_HARD_REG_SET (OBJECT_TOTAL_CONFLICT_HARD_REGS (obj),\n \t\t\t\tcall_used_reg_set);"}, {"sha": "d284fc5a4c200d1c9ee2d05d1ba04adda7b58a3e", "filename": "gcc/mcf.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952/gcc%2Fmcf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952/gcc%2Fmcf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmcf.c?ref=e6d46b5a8f1ec4722eb76bc0cb184bd2319a2952", "patch": "@@ -46,13 +46,8 @@ along with GCC; see the file COPYING3.  If not see\n #include \"config.h\"\n #include \"system.h\"\n #include \"coretypes.h\"\n-#include \"tm.h\"\n #include \"basic-block.h\"\n-#include \"tree.h\"\t\t/* FIXME: Only for langhooks.h.  */\n-#include \"langhooks.h\"\n-#include \"tree.h\"\n #include \"gcov-io.h\"\n-\n #include \"profile.h\"\n \n /* CAP_INFINITY: Constant to represent infinite capacity.  */\n@@ -290,7 +285,7 @@ dump_fixup_graph (FILE *file, fixup_graph_type *fixup_graph, const char *msg)\n   fnum_edges = fixup_graph->num_edges;\n \n   fprintf (file, \"\\nDump fixup graph for %s(): %s.\\n\",\n-\t   lang_hooks.decl_printable_name (current_function_decl, 2), msg);\n+\t   current_function_name (), msg);\n   fprintf (file,\n \t   \"There are %d vertices and %d edges. new_exit_index is %d.\\n\\n\",\n \t   fnum_vertices, fnum_edges, fixup_graph->new_exit_index);\n@@ -1280,8 +1275,8 @@ adjust_cfg_counts (fixup_graph_type *fixup_graph)\n   if (dump_file)\n     {\n       fprintf (dump_file, \"\\nCheck %s() CFG flow conservation:\\n\",\n-           lang_hooks.decl_printable_name (current_function_decl, 2));\n-      FOR_BB_BETWEEN (bb, ENTRY_BLOCK_PTR->next_bb, EXIT_BLOCK_PTR, next_bb)\n+\t       current_function_name ());\n+      FOR_EACH_BB (bb)\n         {\n           if ((bb->count != sum_edge_counts (bb->preds))\n                || (bb->count != sum_edge_counts (bb->succs)))"}]}