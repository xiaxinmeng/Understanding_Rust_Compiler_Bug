{"sha": "145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQ1Y2Y3OWI1NzBkOGMxZGJiZDRiZjlkOTYxZDk4MTBjOTRlZmYwZQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2005-02-19T20:29:05Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2005-02-19T20:29:05Z"}, "message": "check.c (gfc_check_selected_int_kind): New function.\n\n\t* check.c (gfc_check_selected_int_kind): New function.\n\t* intrinsic.h: Prototype it.\n\t* intrinsic.c (add_function): Use it.\n\t* simplify (gfc_simplify_ceiling,gfc_simplify_floor): Change\n\t  BT_REAL to BT_INTEGER and use gfc_default_integer_kind.\n\nFrom-SVN: r95291", "tree": {"sha": "b523d96fcbcb331f0063a4fad24ccf13ba1a7555", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b523d96fcbcb331f0063a4fad24ccf13ba1a7555"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/comments", "author": null, "committer": null, "parents": [{"sha": "c60d77d4db7aec48e2fb0997400c4d1177b726aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c60d77d4db7aec48e2fb0997400c4d1177b726aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c60d77d4db7aec48e2fb0997400c4d1177b726aa"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "dea285b397cdbbe8b6a1bb768383c70f09f58632", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "patch": "@@ -1,3 +1,11 @@\n+2005-02-19  Steven G. Kargl  <kargls@comcast.net>\n+  \n+\t* check.c (gfc_check_selected_int_kind): New function.\n+\t* intrinsic.h: Prototype it.\n+\t* intrinsic.c (add_function): Use it.\n+\t* simplify (gfc_simplify_ceiling,gfc_simplify_floor): Change\n+\t  BT_REAL to BT_INTEGER and use gfc_default_integer_kind.\n+\n 2005-02-19  Steven G. Kargl  <kargls@comcast.net>\n   \n \t* check.c (gfc_check_int): improve checking of optional kind"}, {"sha": "7986c968f9b9254cd4b1643070c2d5193c8f5047", "filename": "gcc/fortran/check.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fcheck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fcheck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fcheck.c?ref=145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "patch": "@@ -1553,6 +1553,20 @@ gfc_check_scan (gfc_expr * x, gfc_expr * y, gfc_expr * z)\n }\n \n \n+try\n+gfc_check_selected_int_kind (gfc_expr * r)\n+{\n+\n+  if (type_check (r, 0, BT_INTEGER) == FAILURE)\n+    return FAILURE;\n+\n+  if (scalar_check (r, 0) == FAILURE)\n+    return FAILURE;\n+\n+  return SUCCESS;\n+}\n+\n+\n try\n gfc_check_selected_real_kind (gfc_expr * p, gfc_expr * r)\n {"}, {"sha": "f28317ccd69e036071bd7a2c877a09efa7b8f3f1", "filename": "gcc/fortran/intrinsic.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fintrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fintrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fintrinsic.c?ref=145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "patch": "@@ -1781,7 +1781,7 @@ add_functions (void)\n   make_generic (\"second\", GFC_ISYM_SECOND, GFC_STD_GNU);\n \n   add_sym_1 (\"selected_int_kind\", 0, 1, BT_INTEGER, di,  GFC_STD_F95,\n-\t     NULL, gfc_simplify_selected_int_kind, NULL,\n+\t     gfc_check_selected_int_kind, gfc_simplify_selected_int_kind, NULL,\n \t     r, BT_INTEGER, di, REQUIRED);\n \n   make_generic (\"selected_int_kind\", GFC_ISYM_SI_KIND, GFC_STD_F95);"}, {"sha": "686d179d5a509c9ee2ac4ff952ffd0b920545231", "filename": "gcc/fortran/intrinsic.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fintrinsic.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fintrinsic.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fintrinsic.h?ref=145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "patch": "@@ -94,6 +94,7 @@ try gfc_check_reshape (gfc_expr *, gfc_expr *, gfc_expr *, gfc_expr *);\n try gfc_check_scale (gfc_expr *, gfc_expr *);\n try gfc_check_scan (gfc_expr *, gfc_expr *, gfc_expr *);\n try gfc_check_second_sub (gfc_expr *);\n+try gfc_check_selected_int_kind (gfc_expr *);\n try gfc_check_selected_real_kind (gfc_expr *, gfc_expr *);\n try gfc_check_set_exponent (gfc_expr *, gfc_expr *);\n try gfc_check_shape (gfc_expr *);"}, {"sha": "81bc01599091420a7c4999a1307c1f18246226af", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/145cf79b570d8c1dbbd4bf9d961d9810c94eff0e/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=145cf79b570d8c1dbbd4bf9d961d9810c94eff0e", "patch": "@@ -592,7 +592,7 @@ gfc_simplify_ceiling (gfc_expr * e, gfc_expr * k)\n   gfc_expr *ceil, *result;\n   int kind;\n \n-  kind = get_kind (BT_REAL, k, \"CEILING\", gfc_default_real_kind);\n+  kind = get_kind (BT_INTEGER, k, \"CEILING\", gfc_default_integer_kind);\n   if (kind == -1)\n     return &gfc_bad_expr;\n \n@@ -1017,7 +1017,7 @@ gfc_simplify_floor (gfc_expr * e, gfc_expr * k)\n   mpfr_t floor;\n   int kind;\n \n-  kind = get_kind (BT_REAL, k, \"FLOOR\", gfc_default_real_kind);\n+  kind = get_kind (BT_INTEGER, k, \"FLOOR\", gfc_default_integer_kind);\n   if (kind == -1)\n     gfc_internal_error (\"gfc_simplify_floor(): Bad kind\");\n "}]}