{"sha": "00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBiYjRiNjIwOGNjZDFkZmJlYzlhNmFjMjRhMTA2YmFmYjgwYWUwNA==", "commit": {"author": {"name": "Gavin Koch", "email": "gavin@cygnus.com", "date": "1998-02-12T11:06:08Z"}, "committer": {"name": "Gavin Romig-Koch", "email": "gavin@gcc.gnu.org", "date": "1998-02-12T11:06:08Z"}, "message": "mips.md (trucndihi2,truncdiqi2): Change these to support mips16.\n\n\t* mips.md (trucndihi2,truncdiqi2): Change these to support\n\tmips16.\n\nFrom-SVN: r17868", "tree": {"sha": "b0ce1394436b0dfeb84ae9cee2f2d76fc4ad2538", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b0ce1394436b0dfeb84ae9cee2f2d76fc4ad2538"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04/comments", "author": null, "committer": null, "parents": [{"sha": "3871c609278860dacf2b324449a6d00e550d5121", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3871c609278860dacf2b324449a6d00e550d5121", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3871c609278860dacf2b324449a6d00e550d5121"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "e8fc0c8773ee4abbee5298c25e3eb24f5f8fe96a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04", "patch": "@@ -1,3 +1,8 @@\n+Thu Feb 12 14:04:09 1998  Gavin Koch  <gavin@cygnus.com>\n+\n+\t* mips.md (trucndihi2,truncdiqi2): Change these to support \n+\tmips16.\n+\n Thu Feb 12 11:34:55 1998  Gavin Koch  <gavin@cygnus.com>\n \n \t* mips/mips.c (movdi_operand): Direct referances to symbols"}, {"sha": "2745797610fc642e87200f093bdaf314af168c13", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 20, "deletions": 7, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=00bb4b6208ccd1dfbec9a6ac24a106bafb80ae04", "patch": "@@ -3188,20 +3188,33 @@ move\\\\t%0,%z4\\\\n\\\\\n (define_insn \"truncdihi2\"\n   [(set (match_operand:HI 0 \"register_operand\" \"=d\")\n \t(truncate:HI (match_operand:DI 1 \"se_register_operand\" \"d\")))]\n-  \"TARGET_64BIT && !TARGET_MIPS16\"\n-  \"andi\\\\t%0,%1,0xffff\"\n+  \"TARGET_64BIT\"\n+  \"*\n+{\n+  if (TARGET_MIPS16)\n+    return \\\"dsll\\\\t%0,%1,48\\;dsra\\\\t%0,48\\\";\n+  return \\\"andi\\\\t%0,%1,0xffff\\\";\n+}\"\n   [(set_attr \"type\"\t\"darith\")\n    (set_attr \"mode\"\t\"HI\")\n-   (set_attr \"length\"\t\"1\")])\n-\n+   (set (attr \"length\")\t(if_then_else (eq (symbol_ref \"mips16\") (const_int 0))\n+\t\t\t\t      (const_int 1)\n+\t\t\t\t      (const_int 4)))])\n (define_insn \"truncdiqi2\"\n   [(set (match_operand:QI 0 \"register_operand\" \"=d\")\n \t(truncate:QI (match_operand:DI 1 \"se_register_operand\" \"d\")))]\n-  \"TARGET_64BIT && !TARGET_MIPS16\"\n-  \"andi\\\\t%0,%1,0x00ff\"\n+  \"TARGET_64BIT\"\n+  \"*\n+{\n+  if (TARGET_MIPS16)\n+    return \\\"dsll\\\\t%0,%1,56\\;dsra\\\\t%0,56\\\";\n+  return \\\"andi\\\\t%0,%1,0x00ff\\\"; \n+}\"\n   [(set_attr \"type\"\t\"darith\")\n    (set_attr \"mode\"\t\"QI\")\n-   (set_attr \"length\"\t\"1\")])\n+   (set (attr \"length\")\t(if_then_else (eq (symbol_ref \"mips16\") (const_int 0))\n+\t\t\t\t      (const_int 1)\n+\t\t\t\t      (const_int 4)))])\n \n ;; Combiner patterns to optimize shift/truncate combinations.\n (define_insn \"\""}]}