{"sha": "e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTFjMTEzMmUwYjA4ZTFlY2NjNGIzNjFhZTk3MjVlNWUxMmExYTJjOQ==", "commit": {"author": {"name": "Jason Thorpe", "email": "thorpej@wasabisystems.com", "date": "2002-05-03T21:38:25Z"}, "committer": {"name": "Jason Thorpe", "email": "thorpej@gcc.gnu.org", "date": "2002-05-03T21:38:25Z"}, "message": "netbsd-elf.c (CPP_SUBTARGET_SPEC64): Remove -D__arch64__.\n\n* config/sparc/netbsd-elf.c (CPP_SUBTARGET_SPEC64): Remove\n-D__arch64__.  Add -D_LP64.\n(CPP_ARCH32_SPEC): Redefine to match the non-bi-arch version\nfrom sparc.h.\n(CPP_ARCH64_SPEC): Likewise.\n(NO_BUILTIN_PTRDIFF_TYPE): Undef.\n(NO_BUILTIN_SIZE_TYPE): Undef.\n\nFrom-SVN: r53131", "tree": {"sha": "dc4c2063b6b8ed4bfa164d114f04df4c88f54f3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc4c2063b6b8ed4bfa164d114f04df4c88f54f3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9/comments", "author": null, "committer": null, "parents": [{"sha": "0b2fb0d7353e6a02ef7e672a89cfc9bbacf88e6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b2fb0d7353e6a02ef7e672a89cfc9bbacf88e6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b2fb0d7353e6a02ef7e672a89cfc9bbacf88e6f"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "0e78d529761b2ac3a98a14c2aed1007b8f86744c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9", "patch": "@@ -1,3 +1,13 @@\n+2002-05-03  Jason Thorpe  <thorpej@wasabisystems.com>\n+\n+\t* config/sparc/netbsd-elf.c (CPP_SUBTARGET_SPEC64): Remove\n+\t-D__arch64__.  Add -D_LP64.\n+\t(CPP_ARCH32_SPEC): Redefine to match the non-bi-arch version\n+\tfrom sparc.h.\n+\t(CPP_ARCH64_SPEC): Likewise.\n+\t(NO_BUILTIN_PTRDIFF_TYPE): Undef.\n+\t(NO_BUILTIN_SIZE_TYPE): Undef.\n+\n 2002-05-03  Vladimir Makarov  <vmakarov@redhat.com>\n \n \t* genautomata.c (min_issue_delay_pass_states): Change return type"}, {"sha": "1bf4356b5cac978877dde3b83db82d15150d2e9f", "filename": "gcc/config/sparc/netbsd-elf.h", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9/gcc%2Fconfig%2Fsparc%2Fnetbsd-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9/gcc%2Fconfig%2Fsparc%2Fnetbsd-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fnetbsd-elf.h?ref=e1c1132e0b08e1eccc4b361ae9725e5e12a1a2c9", "patch": "@@ -31,12 +31,28 @@ Boston, MA 02111-1307, USA.  */\n /* CPP defines used for 64 bit code.  */\n #undef CPP_SUBTARGET_SPEC64\n #define CPP_SUBTARGET_SPEC64 \\\n-  \"-D__sparc64__ -D__arch64__ -D__sparc_v9__ %{posix:-D_POSIX_SOURCE}\"\n+  \"-D__sparc64__ -D__sparc_v9__ -D_LP64 %{posix:-D_POSIX_SOURCE}\"\n \n /* CPP defines used for 32 bit code.  */\n #undef CPP_SUBTARGET_SPEC32\n #define CPP_SUBTARGET_SPEC32 \"-D__sparc %{posix:-D_POSIX_SOURCE}\"\n \n+/* CPP_ARCH32_SPEC and CPP_ARCH64_SPEC are wrong from sparc/sparc.h; we\n+   always want the non-SPARC_BI_ARCH versions, since the SPARC_BI_ARCH\n+   versions define __SIZE_TYPE__ and __PTRDIFF_TYPE__ incorrectly for\n+   NetBSD.  */\n+#undef CPP_ARCH32_SPEC\n+#define CPP_ARCH32_SPEC \"-D__GCC_NEW_VARARGS__ -Acpu=sparc -Amachine=sparc\"\n+\n+#undef CPP_ARCH64_SPEC\n+#define CPP_ARCH64_SPEC \"-D__arch64__ -Acpu=sparc64 -Amachine=sparc64\"\n+\n+/* sparc/sparc.h defines NO_BUILTIN_SIZE_TYPE and NO_BUILTIN_PTRDIFF_TYPE\n+   if SPARC_BI_ARCH is defined.  This is wrong for NetBSD; size_t and\n+   ptrdiff_t do not change for 32-bit vs. 64-bit.  */\n+#undef NO_BUILTIN_PTRDIFF_TYPE\n+#undef NO_BUILTIN_SIZE_TYPE\n+\n /* SIZE_TYPE and PTRDIFF_TYPE are wrong from sparc/sparc.h.  */\n #undef SIZE_TYPE\n #define SIZE_TYPE \"long unsigned int\""}]}