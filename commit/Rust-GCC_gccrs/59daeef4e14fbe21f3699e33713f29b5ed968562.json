{"sha": "59daeef4e14fbe21f3699e33713f29b5ed968562", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTlkYWVlZjRlMTRmYmUyMWYzNjk5ZTMzNzEzZjI5YjVlZDk2ODU2Mg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@linaro.org", "date": "2011-07-25T14:51:47Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2011-07-25T14:51:47Z"}, "message": "re PR tree-optimization/49809 (gimple_check failure at -O3)\n\ngcc/\n\tPR tree-optimization/49809\n\t* tree-ssa-phiopt.c (cond_if_else_store_replacement): Use\n\tgimple_get_lhs instead of gimple_assign_lhs.\n\ngcc/testsuite/\n\tPR tree-optimization/49809\n\t* gnat.dg/opt18.adb, gnat.dg/opt18.ads, gnat.dg/opt18_pkg.ads: New\n\ttest.\n\nFrom-SVN: r176750", "tree": {"sha": "cdfa49c7a1ddb854392a47feba4fa5e4346f02fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cdfa49c7a1ddb854392a47feba4fa5e4346f02fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/59daeef4e14fbe21f3699e33713f29b5ed968562", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59daeef4e14fbe21f3699e33713f29b5ed968562", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59daeef4e14fbe21f3699e33713f29b5ed968562", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59daeef4e14fbe21f3699e33713f29b5ed968562/comments", "author": null, "committer": null, "parents": [{"sha": "a024b70f1064beaa99d433f6e82e4cb4c9bf2945", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a024b70f1064beaa99d433f6e82e4cb4c9bf2945", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a024b70f1064beaa99d433f6e82e4cb4c9bf2945"}], "stats": {"total": 102, "additions": 100, "deletions": 2}, "files": [{"sha": "ab7aee0c8c38e175519dcb6b8e88906706050c6a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=59daeef4e14fbe21f3699e33713f29b5ed968562", "patch": "@@ -1,3 +1,9 @@\n+2011-07-25  Richard Sandiford  <richard.sandiford@linaro.org>\n+\n+\tPR tree-optimization/49809\n+\t* tree-ssa-phiopt.c (cond_if_else_store_replacement): Use\n+\tgimple_get_lhs instead of gimple_assign_lhs.\n+\n 2011-07-25  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* system.h [__cplusplus]: Wrap C function declarations in extern \"C\"."}, {"sha": "7a3c590fefef2551c5403c9de01d63ae385d848a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=59daeef4e14fbe21f3699e33713f29b5ed968562", "patch": "@@ -1,3 +1,9 @@\n+2011-07-25  Richard Sandiford  <richard.sandiford@linaro.org>\n+\n+\tPR tree-optimization/49809\n+\t* gnat.dg/opt18.adb, gnat.dg/opt18.ads, gnat.dg/opt18_pkg.ads: New\n+\ttest.\n+\n 2011-07-25  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/49715"}, {"sha": "94c44beb6f7fde972f26415bb840b21aa169eeed", "filename": "gcc/testsuite/gnat.dg/opt18.adb", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18.adb?ref=59daeef4e14fbe21f3699e33713f29b5ed968562", "patch": "@@ -0,0 +1,31 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O3\" }\n+\n+with Opt18_Pkg; use Opt18_Pkg;\n+\n+package body Opt18 is\n+\n+   function Mag (Item : in Cart_Vector_Type) return Float is\n+   begin\n+      return Sqrt (Item (X) * Item (X) + Item (Y) * Item (Y)\n+                   + Item (Z) * Item (Z));\n+   end;\n+\n+   function Unit_Quaternion_To_Mag_Axis (Quaternion : in Unit_Quaternion_Type)\n+   return Mag_Axis_Type is\n+      Sin_Half : Float\n+         := Mag (Cart_Vector_Type'(Quaternion.X, Quaternion.Y, Quaternion.Z));\n+   begin\n+      if Sin_Half > 3.0 * First_Order_Trig then\n+         return\n+            (Mag  => Atan2 (Double_Trig (Unchecked_Trig_Pair (Sin_Half,\n+                                                              Quaternion.S))),\n+             Axis => Unit_Vector_Type'(Quaternion.X / Sin_Half,\n+                                       Quaternion.Y / Sin_Half,\n+                                       Quaternion.Z / Sin_Half));\n+      else\n+         return (0.0, X_Unit);\n+      end if;\n+   end;\n+\n+end Opt18;"}, {"sha": "85c3b634527db630cbb4cdf44a8684e13d6e53fb", "filename": "gcc/testsuite/gnat.dg/opt18.ads", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18.ads?ref=59daeef4e14fbe21f3699e33713f29b5ed968562", "patch": "@@ -0,0 +1,29 @@\n+package Opt18 is\n+\n+   type Cart_Axis_Type is (X, Y, Z);\n+\n+   type Cart_Vector_Type is array (Cart_Axis_Type) of Float;\n+\n+   function Mag (Item : in Cart_Vector_Type) return Float;\n+\n+   type Unit_Vector_Type is array (Cart_Axis_Type) of Float;\n+\n+   type Mag_Axis_Type is\n+   record\n+      Mag  : Float;\n+      Axis : Unit_Vector_Type;\n+   end record;\n+\n+   type Unit_Quaternion_Type is record\n+      X : Float;\n+      Y : Float;\n+      Z : Float;\n+      S : Float;\n+   end record;\n+\n+   function Unit_Quaternion_To_Mag_Axis (Quaternion : in Unit_Quaternion_Type)\n+     return Mag_Axis_Type;\n+\n+   X_Unit : constant Unit_Vector_Type := (1.0, 0.0, 0.0);\n+\n+end Opt18;"}, {"sha": "963fa3c369667738638bc18624d8e9ee536c9e4f", "filename": "gcc/testsuite/gnat.dg/opt18_pkg.ads", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt18_pkg.ads?ref=59daeef4e14fbe21f3699e33713f29b5ed968562", "patch": "@@ -0,0 +1,26 @@\n+package Opt18_Pkg is\n+\n+   pragma Pure;\n+\n+   type Limit_Type is record\n+      Low  : Float;\n+      High : Float;\n+   end record;\n+\n+   function First_Order_Trig return Float;\n+\n+  type Trig_Pair_Type is\n+   record\n+      Sin : Float;\n+      Cos : Float;\n+   end record;\n+\n+   function Atan2 (Trig : in Trig_Pair_Type) return Float;\n+\n+   function Unchecked_Trig_Pair (Sin, Cos : in Float) return Trig_Pair_Type;\n+\n+   function Double_Trig (Trig : in Trig_Pair_Type) return Trig_Pair_Type;\n+\n+   function Sqrt (X : Float) return Float;\n+\n+end Opt18_Pkg;"}, {"sha": "30eea319edcc21e2d7bb2179eb135ace89701043", "filename": "gcc/tree-ssa-phiopt.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftree-ssa-phiopt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/59daeef4e14fbe21f3699e33713f29b5ed968562/gcc%2Ftree-ssa-phiopt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-phiopt.c?ref=59daeef4e14fbe21f3699e33713f29b5ed968562", "patch": "@@ -1454,7 +1454,7 @@ cond_if_else_store_replacement (basic_block then_bb, basic_block else_bb,\n         continue;\n \n       then_store = DR_STMT (then_dr);\n-      then_lhs = gimple_assign_lhs (then_store);\n+      then_lhs = gimple_get_lhs (then_store);\n       found = false;\n \n       FOR_EACH_VEC_ELT (data_reference_p, else_datarefs, j, else_dr)\n@@ -1463,7 +1463,7 @@ cond_if_else_store_replacement (basic_block then_bb, basic_block else_bb,\n             continue;\n \n           else_store = DR_STMT (else_dr);\n-          else_lhs = gimple_assign_lhs (else_store);\n+          else_lhs = gimple_get_lhs (else_store);\n \n           if (operand_equal_p (then_lhs, else_lhs, 0))\n             {"}]}