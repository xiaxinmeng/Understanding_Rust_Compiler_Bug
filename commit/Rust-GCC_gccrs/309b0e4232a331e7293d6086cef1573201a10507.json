{"sha": "309b0e4232a331e7293d6086cef1573201a10507", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzA5YjBlNDIzMmEzMzFlNzI5M2Q2MDg2Y2VmMTU3MzIwMWExMDUwNw==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-08-15T01:13:39Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-08-15T01:13:39Z"}, "message": "finally-1.m: Check that the catch and finally are being called.\n\n2005-08-14  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        * execute/exceptions/finally-1.m: Check that the catch and finally are\n        being called.  Also add a \"return 0;\" at the end of main.\n\nFrom-SVN: r103098", "tree": {"sha": "69b75427b3af439759b9e8caa9a6beb79970e16c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/69b75427b3af439759b9e8caa9a6beb79970e16c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/309b0e4232a331e7293d6086cef1573201a10507", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/309b0e4232a331e7293d6086cef1573201a10507", "html_url": "https://github.com/Rust-GCC/gccrs/commit/309b0e4232a331e7293d6086cef1573201a10507", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/309b0e4232a331e7293d6086cef1573201a10507/comments", "author": null, "committer": null, "parents": [{"sha": "e252987e8ee6a5340b5f54da516d9263656a132d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e252987e8ee6a5340b5f54da516d9263656a132d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e252987e8ee6a5340b5f54da516d9263656a132d"}], "stats": {"total": 65, "additions": 42, "deletions": 23}, "files": [{"sha": "65f56b9ee0496c8ffa28ad721602b01ae969ac63", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/309b0e4232a331e7293d6086cef1573201a10507/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/309b0e4232a331e7293d6086cef1573201a10507/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=309b0e4232a331e7293d6086cef1573201a10507", "patch": "@@ -1,3 +1,8 @@\n+2005-08-14  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t* execute/exceptions/finally-1.m: Check that the catch and finally are\n+\tbeing called.  Also add a \"return 0;\" at the end of main.\n+\n 2005-08-14 Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/21432."}, {"sha": "5f32de2b4e17e93cd427d18b220d8cbe29ee5510", "filename": "gcc/testsuite/objc/execute/exceptions/finally-1.m", "status": "modified", "additions": 37, "deletions": 23, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/309b0e4232a331e7293d6086cef1573201a10507/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fexceptions%2Ffinally-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/309b0e4232a331e7293d6086cef1573201a10507/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fexceptions%2Ffinally-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc%2Fexecute%2Fexceptions%2Ffinally-1.m?ref=309b0e4232a331e7293d6086cef1573201a10507", "patch": "@@ -1,45 +1,59 @@\n #include <objc/Object.h>\n+#include <stdio.h>\n+#include <stdlib.h>\n+\n+static int made_try = 0;\n \n int\n thrower_try_body()\n {\n-        printf(\"Thrower try body\\n\");\n-        return (0);\n+  made_try++;\n+  return (0);\n }\n \n+static int made_finally = 0;\n+\n int\n finally_body()\n {\n-        printf(\"Finally body\\n\");\n-        return (0);\n+  made_finally++;\n+  return (0);\n }\n \n int\n thrower()\n {\n-        @try\n-        {\n-                thrower_try_body();\n-                @throw [Object new];\n-        }\n-        @finally\n-        {\n-                finally_body();\n-        }       // <----- program aborts here.\n-        return 0;\n+  @try\n+  {\n+    thrower_try_body();\n+    @throw [Object new];\n+  }\n+  @finally\n+  {\n+    finally_body();\n+  }     \n+  return 0;\n }\n \n+static int made_catch = 0;\n \n int \n main(int ac, char *av[])\n {\n-        @try\n-        {\n-                thrower();\n-        }\n-        @catch (id exc)\n-        {\n-                printf(\"Got exception of class %s\\n\", [[exc class] name]);\n-                [exc free];\n-        }\n+  @try\n+  {\n+    thrower();\n+  }\n+  @catch (id exc)\n+  {\n+    made_catch++;\n+    [exc free];\n+  }\n+  if (made_try != 1)\n+    abort ();\n+  if (made_finally != 1)\n+    abort ();\n+  if (made_catch != 1)\n+    abort ();\n+  return 0;\n }"}]}