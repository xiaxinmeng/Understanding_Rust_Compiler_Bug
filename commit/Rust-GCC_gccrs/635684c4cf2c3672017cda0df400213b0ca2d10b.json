{"sha": "635684c4cf2c3672017cda0df400213b0ca2d10b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM1Njg0YzRjZjJjMzY3MjAxN2NkYTBkZjQwMDIxM2IwY2EyZDEwYg==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.vnet.ibm.com", "date": "2017-03-24T12:34:19Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2017-03-24T12:34:19Z"}, "message": "re PR tree-optimization/80158 (ICE in all_phi_incrs_profitable)\n\n2017-03-24  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\n\tPR tree-optimization/80158\n\t* gimple-ssa-strength-reduction.c (replace_mult_candidate): When\n\treplacing a candidate statement, also replace it for the\n\tcandidate's alternate interpretation.\n\t(replace_rhs_if_not_dup): Likewise.\n\t(replace_one_candidate): Likewise.\n\n\t* gfortran.fortran-torture/compile/pr80158.f: New file.\n\nFrom-SVN: r246439", "tree": {"sha": "d382d78d79d1cc23614ac44897d54c00113ca88a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d382d78d79d1cc23614ac44897d54c00113ca88a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/635684c4cf2c3672017cda0df400213b0ca2d10b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/635684c4cf2c3672017cda0df400213b0ca2d10b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/635684c4cf2c3672017cda0df400213b0ca2d10b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/635684c4cf2c3672017cda0df400213b0ca2d10b/comments", "author": {"login": "wschmidt-ibm", "id": 5520937, "node_id": "MDQ6VXNlcjU1MjA5Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5520937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wschmidt-ibm", "html_url": "https://github.com/wschmidt-ibm", "followers_url": "https://api.github.com/users/wschmidt-ibm/followers", "following_url": "https://api.github.com/users/wschmidt-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/wschmidt-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wschmidt-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wschmidt-ibm/subscriptions", "organizations_url": "https://api.github.com/users/wschmidt-ibm/orgs", "repos_url": "https://api.github.com/users/wschmidt-ibm/repos", "events_url": "https://api.github.com/users/wschmidt-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/wschmidt-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "76afddf36b915170493dfd0c1f28bb85bec808ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76afddf36b915170493dfd0c1f28bb85bec808ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76afddf36b915170493dfd0c1f28bb85bec808ad"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "8d4adfbb07fbcaa9a3275641d56d0087fe79e8ea", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=635684c4cf2c3672017cda0df400213b0ca2d10b", "patch": "@@ -1,3 +1,12 @@\n+2017-03-24  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\tPR tree-optimization/80158\n+\t* gimple-ssa-strength-reduction.c (replace_mult_candidate): When\n+\treplacing a candidate statement, also replace it for the\n+\tcandidate's alternate interpretation.\n+\t(replace_rhs_if_not_dup): Likewise.\n+\t(replace_one_candidate): Likewise.\n+\n 2017-03-24  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/80167"}, {"sha": "99978ddc3089ec810f79906f6b3f4a89d3e37318", "filename": "gcc/gimple-ssa-strength-reduction.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2Fgimple-ssa-strength-reduction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2Fgimple-ssa-strength-reduction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-strength-reduction.c?ref=635684c4cf2c3672017cda0df400213b0ca2d10b", "patch": "@@ -2089,6 +2089,8 @@ replace_mult_candidate (slsr_cand_t c, tree basis_name, widest_int bump)\n \t  gimple_set_location (copy_stmt, gimple_location (c->cand_stmt));\n \t  gsi_replace (&gsi, copy_stmt, false);\n \t  c->cand_stmt = copy_stmt;\n+\t  if (c->next_interp)\n+\t    lookup_cand (c->next_interp)->cand_stmt = copy_stmt;\n \t  if (dump_file && (dump_flags & TDF_DETAILS))\n \t    stmt_to_print = copy_stmt;\n \t}\n@@ -2118,6 +2120,8 @@ replace_mult_candidate (slsr_cand_t c, tree basis_name, widest_int bump)\n \t\t\t\t\t      basis_name, bump_tree);\n \t      update_stmt (gsi_stmt (gsi));\n               c->cand_stmt = gsi_stmt (gsi);\n+\t      if (c->next_interp)\n+\t\tlookup_cand (c->next_interp)->cand_stmt = gsi_stmt (gsi);\n \t      if (dump_file && (dump_flags & TDF_DETAILS))\n \t\tstmt_to_print = gsi_stmt (gsi);\n \t    }\n@@ -3405,6 +3409,8 @@ replace_rhs_if_not_dup (enum tree_code new_code, tree new_rhs1, tree new_rhs2,\n       gimple_assign_set_rhs_with_ops (&gsi, new_code, new_rhs1, new_rhs2);\n       update_stmt (gsi_stmt (gsi));\n       c->cand_stmt = gsi_stmt (gsi);\n+      if (c->next_interp)\n+\tlookup_cand (c->next_interp)->cand_stmt = gsi_stmt (gsi);\n \n       if (dump_file && (dump_flags & TDF_DETAILS))\n \treturn gsi_stmt (gsi);\n@@ -3511,6 +3517,8 @@ replace_one_candidate (slsr_cand_t c, unsigned i, tree basis_name)\n \t  gimple_assign_set_rhs_with_ops (&gsi, MINUS_EXPR, basis_name, rhs2);\n \t  update_stmt (gsi_stmt (gsi));\n           c->cand_stmt = gsi_stmt (gsi);\n+\t  if (c->next_interp)\n+\t    lookup_cand (c->next_interp)->cand_stmt = gsi_stmt (gsi);\n \n \t  if (dump_file && (dump_flags & TDF_DETAILS))\n \t    stmt_to_print = gsi_stmt (gsi);\n@@ -3532,6 +3540,8 @@ replace_one_candidate (slsr_cand_t c, unsigned i, tree basis_name)\n \t  gimple_set_location (copy_stmt, gimple_location (c->cand_stmt));\n \t  gsi_replace (&gsi, copy_stmt, false);\n \t  c->cand_stmt = copy_stmt;\n+\t  if (c->next_interp)\n+\t    lookup_cand (c->next_interp)->cand_stmt = copy_stmt;\n \n \t  if (dump_file && (dump_flags & TDF_DETAILS))\n \t    stmt_to_print = copy_stmt;\n@@ -3543,6 +3553,8 @@ replace_one_candidate (slsr_cand_t c, unsigned i, tree basis_name)\n \t  gimple_set_location (cast_stmt, gimple_location (c->cand_stmt));\n \t  gsi_replace (&gsi, cast_stmt, false);\n \t  c->cand_stmt = cast_stmt;\n+\t  if (c->next_interp)\n+\t    lookup_cand (c->next_interp)->cand_stmt = cast_stmt;\n \n \t  if (dump_file && (dump_flags & TDF_DETAILS))\n \t    stmt_to_print = cast_stmt;"}, {"sha": "759d2b3fd3c129c3204d131361f08755fa34933c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=635684c4cf2c3672017cda0df400213b0ca2d10b", "patch": "@@ -1,3 +1,8 @@\n+2017-03-24  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\tPR tree-optimization/80158\n+\t* gfortran.fortran-torture/compile/pr80158.f: New file.\n+\n 2017-03-24  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/80167"}, {"sha": "5e3b3f246745bff24021445f27dbf272586ccf0e", "filename": "gcc/testsuite/gfortran.fortran-torture/compile/pr80158.f", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr80158.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/635684c4cf2c3672017cda0df400213b0ca2d10b/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr80158.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr80158.f?ref=635684c4cf2c3672017cda0df400213b0ca2d10b", "patch": "@@ -0,0 +1,16 @@\n+      SUBROUTINE DRPAUL(SMAT,TMAT,EPS,EPT,SIJ,TIJ,WRK,VEC,ARRAY,FMO,\n+     *                  XMKVIR,TMJ,XMI,YMI,ZMI,ZQQ,L1,L1EF,LNA,LNA2,\n+     *                  NAEF,L2,NLOC,NVIR,PROVEC,FOCKMA,MXBF,MXMO2)\n+      DIMENSION CMO(L1,L1),TLOC(LNA,LNA),SMJ(L1,NAEF),XMK(L1,LNA)\n+      DO I = 1,LNA\n+         DO J = 1,LNA\n+            IF (I.LE.NOUT) TLOC(I,J) = ZERO\n+            IF (J.LE.NOUT) TLOC(I,J) = ZERO\n+         END DO\n+         DO NA=1,NOC\n+            IF ( ABS(E(NI)-E(NA)) .GE.TOL) THEN\n+            END IF\n+         END DO\n+      END DO\n+      END\n+      "}]}