{"sha": "63a9328cb8c601377fe73e214b708c4ae0441847", "node_id": "C_kwDOANBUbNoAKDYzYTkzMjhjYjhjNjAxMzc3ZmU3M2UyMTRiNzA4YzRhZTA0NDE4NDc", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2022-02-15T18:09:33Z"}, "committer": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2022-02-15T18:09:33Z"}, "message": "vect: Fix early free\n\nWhen updating the target costs interface, I failed to move the\nfree of the scalar costs beyond the new last use.\n\ngcc/\n\t* tree-vect-slp.cc (vect_bb_vectorization_profitable_p): Fix\n\tuse after free.", "tree": {"sha": "2d55671063caf18256dc0e3f976cc9b4e265352c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d55671063caf18256dc0e3f976cc9b4e265352c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63a9328cb8c601377fe73e214b708c4ae0441847", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63a9328cb8c601377fe73e214b708c4ae0441847", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63a9328cb8c601377fe73e214b708c4ae0441847", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63a9328cb8c601377fe73e214b708c4ae0441847/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6cfb7ffb659fd6b87a21312021ab023a06e8f6be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cfb7ffb659fd6b87a21312021ab023a06e8f6be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cfb7ffb659fd6b87a21312021ab023a06e8f6be"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "273543d37ea76530ebc3011be7ba28d87f0f86ce", "filename": "gcc/tree-vect-slp.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63a9328cb8c601377fe73e214b708c4ae0441847/gcc%2Ftree-vect-slp.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63a9328cb8c601377fe73e214b708c4ae0441847/gcc%2Ftree-vect-slp.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-slp.cc?ref=63a9328cb8c601377fe73e214b708c4ae0441847", "patch": "@@ -5380,7 +5380,6 @@ vect_bb_vectorization_profitable_p (bb_vec_info bb_vinfo,\n       unsigned dummy;\n       finish_cost (scalar_target_cost_data, nullptr,\n \t\t   &dummy, &scalar_cost, &dummy);\n-      delete scalar_target_cost_data;\n \n       /* Complete the target-specific vector cost calculation.  */\n       class vector_costs *vect_target_cost_data = init_cost (bb_vinfo, false);\n@@ -5393,6 +5392,7 @@ vect_bb_vectorization_profitable_p (bb_vec_info bb_vinfo,\n \t     && li_vector_costs[vi].first == vl);\n       finish_cost (vect_target_cost_data, scalar_target_cost_data,\n \t\t   &vec_prologue_cost, &vec_inside_cost, &vec_epilogue_cost);\n+      delete scalar_target_cost_data;\n       delete vect_target_cost_data;\n \n       vec_outside_cost = vec_prologue_cost + vec_epilogue_cost;"}]}