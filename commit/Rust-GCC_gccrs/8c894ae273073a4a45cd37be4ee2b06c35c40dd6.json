{"sha": "8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGM4OTRhZTI3MzA3M2E0YTQ1Y2QzN2JlNGVlMmIwNmMzNWM0MGRkNg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2006-11-15T10:02:21Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2006-11-15T10:02:21Z"}, "message": "re PR fortran/29806 (Error if CONTAINS is present without SUBPROGRAM)\n\nfortran/\n2006-11-15  Tobias Burnus  <burnus@net-b.de>\n\n       PR fortran/29806\n       * parse.c (parse_contained): Check for empty contains statement.\n\ntestsuite/\n2006-11-15  Tobias Burnus  <burnus@net-b.de>\n\n       PR fortran/29806\n       * gfortran.dg/contains.f90: New test.\n       * gfortran.dg/derived_function_interface_1.f90: Add a dg-warning.\n\nFrom-SVN: r118851", "tree": {"sha": "78332997cd410acf5e1ee9d29aece96185e00c78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78332997cd410acf5e1ee9d29aece96185e00c78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "08700251e57a6fe9133fe77a31b098a99abd26e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08700251e57a6fe9133fe77a31b098a99abd26e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08700251e57a6fe9133fe77a31b098a99abd26e8"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "44863998070dcf3bc644d9c3b4fead9b3932f267", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "patch": "@@ -1,3 +1,8 @@\n+2006-11-15  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/29806\n+\t* parse.c (parse_contained): Check for empty contains statement.\n+\n 2006-11-15  Bud Davis <bdavis9659@sbcglobal.net>\n \n \tPR fortran/28974"}, {"sha": "9d8551646667359560e8ab2d46eab02816e86432", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "patch": "@@ -2757,6 +2757,7 @@ parse_contained (int module)\n   gfc_statement st;\n   gfc_symbol *sym;\n   gfc_entry_list *el;\n+  int contains_statements = 0;\n \n   push_state (&s1, COMP_CONTAINS, NULL);\n   parent_ns = gfc_current_ns;\n@@ -2777,6 +2778,7 @@ parse_contained (int module)\n \n \tcase ST_FUNCTION:\n \tcase ST_SUBROUTINE:\n+  contains_statements = 1;\n \t  accept_statement (st);\n \n \t  push_state (&s2,\n@@ -2860,6 +2862,11 @@ parse_contained (int module)\n   gfc_free_namespace (ns);\n \n   pop_state ();\n+  if (!contains_statements)\n+    /* This is valid in Fortran 2008.  */\n+    gfc_notify_std (GFC_STD_GNU, \"Extension: \"\n+                    \"CONTAINS statement without FUNCTION \"\n+                    \"or SUBROUTINE statement at %C\");\n }\n \n "}, {"sha": "0288e558ba95d680f0a3cd39f5e030c83f76e918", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "patch": "@@ -1,3 +1,9 @@\n+2006-11-15  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/29806\n+\t* gfortran.dg/contains.f90: New test.\n+\t* gfortran.dg/derived_function_interface_1.f90: Add a dg-warning.\n+\n 2006-11-15  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/29581"}, {"sha": "221488afbe1bd576e04160d702ece5e0616c7ff7", "filename": "gcc/testsuite/gfortran.dg/contains.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcontains.f90?ref=8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f2003\" }\n+! Check whether empty contains are allowd\n+! PR fortran/29806\n+module x\n+ contains\n+end module x ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE statement\" }\n+\n+program y\n+  contains\n+end program y ! { dg-error \"CONTAINS statement without FUNCTION or SUBROUTINE statement\" }"}, {"sha": "09916be63aed946040c419476c1112f6812ebfa8", "filename": "gcc/testsuite/gfortran.dg/derived_function_interface_1.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ftestsuite%2Fgfortran.dg%2Fderived_function_interface_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c894ae273073a4a45cd37be4ee2b06c35c40dd6/gcc%2Ftestsuite%2Fgfortran.dg%2Fderived_function_interface_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fderived_function_interface_1.f90?ref=8c894ae273073a4a45cd37be4ee2b06c35c40dd6", "patch": "@@ -37,4 +37,4 @@ end function ext_fun\n   type(foo) function fun() ! { dg-error \"already has an explicit interface\" }\n   end function fun  ! { dg-error \"Expecting END PROGRAM\" }\n \n-end\n+end ! { dg-warning \"CONTAINS statement without FUNCTION or SUBROUTINE statement\" }"}]}