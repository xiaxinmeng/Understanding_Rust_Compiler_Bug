{"sha": "fbd33afe4728f16789a37fe0a86fb0079d366b69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJkMzNhZmU0NzI4ZjE2Nzg5YTM3ZmUwYTg2ZmIwMDc5ZDM2NmI2OQ==", "commit": {"author": {"name": "Hongtao Liu", "email": "hongtao.liu@intel.com", "date": "2019-09-19T01:21:39Z"}, "committer": {"name": "Hongtao Liu", "email": "liuhongt@gcc.gnu.org", "date": "2019-09-19T01:21:39Z"}, "message": "Extend pass rpad to handle avx512f vcvtusi2ss vcvtusi2ss 538.imagick_r improved...\n\nExtend pass rpad to handle avx512f vcvtusi2ss vcvtusi2ss\n538.imagick_r improved by 4% with single copy run on SKYLAKE workstation.\n\ngcc/\n\t* config/i386/i386.md\n\t(*floatuns<SWI48:mode><MODEF:mode>2_avx512):\n\tAdd avx_partial_xmm_update.\n\ngcc/testsuie\n\t* gcc.target/i386/pr87007-3.c: New test.\n\nFrom-SVN: r275926", "tree": {"sha": "1b321c2a0da75a359fda48c38705f50294024750", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b321c2a0da75a359fda48c38705f50294024750"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbd33afe4728f16789a37fe0a86fb0079d366b69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbd33afe4728f16789a37fe0a86fb0079d366b69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbd33afe4728f16789a37fe0a86fb0079d366b69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbd33afe4728f16789a37fe0a86fb0079d366b69/comments", "author": {"login": "algebra84", "id": 22926165, "node_id": "MDQ6VXNlcjIyOTI2MTY1", "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algebra84", "html_url": "https://github.com/algebra84", "followers_url": "https://api.github.com/users/algebra84/followers", "following_url": "https://api.github.com/users/algebra84/following{/other_user}", "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}", "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions", "organizations_url": "https://api.github.com/users/algebra84/orgs", "repos_url": "https://api.github.com/users/algebra84/repos", "events_url": "https://api.github.com/users/algebra84/events{/privacy}", "received_events_url": "https://api.github.com/users/algebra84/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a923a4639434f9c845db002c8445e61cf5dda545", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a923a4639434f9c845db002c8445e61cf5dda545", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a923a4639434f9c845db002c8445e61cf5dda545"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "965d78873cdeecd9125fec908c62bc1560ddb0ed", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fbd33afe4728f16789a37fe0a86fb0079d366b69", "patch": "@@ -1,3 +1,9 @@\n+2019-09-19  Hongtao Liu <hongtao.liu@intel.com>\n+\n+\tPR target/87007\n+\t* config/i386.md (*floatuns<SWI48:mode><MODEF:mode>2_avx512):\n+\tAdd avx_partial_xmm_update.\n+\n 2019-09-18  Jim Wilson  <jimw@sifive.com>\n \n \tPR target/91683"}, {"sha": "b7e7d126da29d6ab569ddd7677318e471acd7426", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=fbd33afe4728f16789a37fe0a86fb0079d366b69", "patch": "@@ -5196,6 +5196,7 @@\n   \"TARGET_AVX512F && TARGET_SSE_MATH\"\n   \"vcvtusi2<MODEF:ssemodesuffix><SWI48:rex64suffix>\\t{%1, %0, %0|%0, %0, %1}\"\n   [(set_attr \"type\" \"sseicvt\")\n+   (set_attr \"avx_partial_xmm_update\" \"true\")\n    (set_attr \"prefix\" \"evex\")\n    (set_attr \"mode\" \"<MODEF:MODE>\")])\n "}, {"sha": "20d22de9a943ac711a1f23fea2a34d12a3dc2274", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fbd33afe4728f16789a37fe0a86fb0079d366b69", "patch": "@@ -1,3 +1,8 @@\n+2019-09-19  Hongtao Liu <hongtao.liu@intel.com>\n+\n+\tPR target/87007\n+\t* gcc.target/i386/pr87007-3.c: New test.\n+\n 2019-09-18  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/90878"}, {"sha": "59324fd1a45383a2970ffc6c1e976f9e6920d6c7", "filename": "gcc/testsuite/gcc.target/i386/pr87007-3.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr87007-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbd33afe4728f16789a37fe0a86fb0079d366b69/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr87007-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr87007-3.c?ref=fbd33afe4728f16789a37fe0a86fb0079d366b69", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=skylake-avx512 -mfpmath=sse\" } */\n+\n+extern float f;\n+extern double d;\n+extern unsigned char c;\n+\n+void\n+foo (int n, int k)\n+{\n+  for (int i = 0; i != n; i++)\n+    if(i < k)\n+      d = c;\n+    else\n+      f = c;\n+}\n+\n+/* { dg-final { scan-assembler-times \"vxorps\\[^\\n\\r\\]*xmm\\[0-9\\]\" 1 } } */"}]}