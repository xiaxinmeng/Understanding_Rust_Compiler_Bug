{"sha": "37d57ac9a636f2235f9060e84fb8dd7968abd1dc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzdkNTdhYzlhNjM2ZjIyMzVmOTA2MGU4NGZiOGRkNzk2OGFiZDFkYw==", "commit": {"author": {"name": "Jim Wilson", "email": "jimw@sifive.com", "date": "2018-05-08T21:27:04Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2018-05-08T21:27:04Z"}, "message": "[PATCH] RISC-V: Use new linker emulations for glibc ABI.\n\n\tgcc/\n\t* config/riscv/linux.h (MUSL_ABI_SUFFIX): Delete unnecessary backslash.\n\t(LD_EMUL_SUFFIX): New.\n\t(LINK_SPEC): Use it.\n\nFrom-SVN: r260056", "tree": {"sha": "3dcbb2a8bfc79217ae0e7d7432219e538450b9d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3dcbb2a8bfc79217ae0e7d7432219e538450b9d6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37d57ac9a636f2235f9060e84fb8dd7968abd1dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37d57ac9a636f2235f9060e84fb8dd7968abd1dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37d57ac9a636f2235f9060e84fb8dd7968abd1dc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37d57ac9a636f2235f9060e84fb8dd7968abd1dc/comments", "author": null, "committer": null, "parents": [{"sha": "6d8c870a20aaf46551508ecd5a4f959ac9e9f3fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d8c870a20aaf46551508ecd5a4f959ac9e9f3fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d8c870a20aaf46551508ecd5a4f959ac9e9f3fd"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "56004866e9eb47267ee2ad697a39d01cdbd13d04", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37d57ac9a636f2235f9060e84fb8dd7968abd1dc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37d57ac9a636f2235f9060e84fb8dd7968abd1dc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=37d57ac9a636f2235f9060e84fb8dd7968abd1dc", "patch": "@@ -1,3 +1,9 @@\n+2018-05-08  Jim Wilson  <jimw@sifive.com>\n+\n+\t* config/riscv/linux.h (MUSL_ABI_SUFFIX): Delete unnecessary backslash.\n+\t(LD_EMUL_SUFFIX): New.\n+\t(LINK_SPEC): Use it.\n+\n 2018-05-08  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n \n \t* doc/extend.texi (PowerPC Built-in Functions): Rename this"}, {"sha": "85561846dad2b9e455a2cd88beeeb62d5da05545", "filename": "gcc/config/riscv/linux.h", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37d57ac9a636f2235f9060e84fb8dd7968abd1dc/gcc%2Fconfig%2Friscv%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37d57ac9a636f2235f9060e84fb8dd7968abd1dc/gcc%2Fconfig%2Friscv%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Friscv%2Flinux.h?ref=37d57ac9a636f2235f9060e84fb8dd7968abd1dc", "patch": "@@ -30,7 +30,7 @@ along with GCC; see the file COPYING3.  If not see\n   \"%{mabi=ilp32d:}\" \\\n   \"%{mabi=lp64:-sf}\" \\\n   \"%{mabi=lp64f:-sp}\" \\\n-  \"%{mabi=lp64d:}\" \\\n+  \"%{mabi=lp64d:}\"\n \n #undef MUSL_DYNAMIC_LINKER\n #define MUSL_DYNAMIC_LINKER \"/lib/ld-musl-riscv\" XLEN_SPEC MUSL_ABI_SUFFIX \".so.1\"\n@@ -49,8 +49,16 @@ along with GCC; see the file COPYING3.  If not see\n \n #define CPP_SPEC \"%{pthread:-D_REENTRANT}\"\n \n+#define LD_EMUL_SUFFIX \\\n+  \"%{mabi=lp64d:}\" \\\n+  \"%{mabi=lp64f:_lp64f}\" \\\n+  \"%{mabi=lp64:_lp64}\" \\\n+  \"%{mabi=ilp32d:}\" \\\n+  \"%{mabi=ilp32f:_ilp32f}\" \\\n+  \"%{mabi=ilp32:_ilp32}\"\n+\n #define LINK_SPEC \"\\\n--melf\" XLEN_SPEC \"lriscv \\\n+-melf\" XLEN_SPEC \"lriscv\" LD_EMUL_SUFFIX \" \\\n %{mno-relax:--no-relax} \\\n %{shared} \\\n   %{!shared: \\"}]}