{"sha": "33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNjMjFmNWNjMGQ2NjZiOTU5Y2ZiZTFlNGZkNjVjNzZiYmZkNDMxZQ==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@bitrange.com", "date": "2002-10-30T00:19:59Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2002-10-30T00:19:59Z"}, "message": "toplev.c (rest_of_type_compilation): Return early in case of errors.\n\n\t* toplev.c (rest_of_type_compilation): Return early in case of\n\terrors.\n\t(check_global_declarations): Don't call debug_hooks->global_decl\n\tin case of errors.\n\nFrom-SVN: r58645", "tree": {"sha": "e3bb13d193cf2f5766f2f8c5afb30c82fda3b6eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3bb13d193cf2f5766f2f8c5afb30c82fda3b6eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e/comments", "author": null, "committer": null, "parents": [{"sha": "59db5f7beb633852cb4500d35fc5356abe49bc1f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59db5f7beb633852cb4500d35fc5356abe49bc1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59db5f7beb633852cb4500d35fc5356abe49bc1f"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "73713f022e1354df57776e443a0c9fe03f1ed767", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e", "patch": "@@ -1,3 +1,10 @@\n+2002-10-29  Hans-Peter Nilsson  <hp@bitrange.com>\n+\n+\t* toplev.c (rest_of_type_compilation): Return early in case of\n+\terrors.\n+\t(check_global_declarations): Don't call debug_hooks->global_decl\n+\tin case of errors.\n+\n 2002-10-28  Andreas Bauer  <baueran@in.tum.de>\n \n \t* doc/c-tree.texi (Tree overview): Fix typos."}, {"sha": "2f3d127441d69ff68eb4d1b19cbeb6b274dcf3f8", "filename": "gcc/toplev.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=33c21f5cc0d666b959cfbe1e4fd65c76bbfd431e", "patch": "@@ -2050,9 +2050,14 @@ check_global_declarations (vec, len)\n \t  && (*lang_hooks.decls.warn_unused_global) (decl))\n \twarning_with_decl (decl, \"`%s' defined but not used\");\n \n-      timevar_push (TV_SYMOUT);\n-      (*debug_hooks->global_decl) (decl);\n-      timevar_pop (TV_SYMOUT);\n+      /* Avoid confusing the debug information machinery when there are\n+\t errors.  */\n+      if (errorcount == 0 && sorrycount == 0)\n+\t{\n+\t  timevar_push (TV_SYMOUT);\n+\t  (*debug_hooks->global_decl) (decl);\n+\t  timevar_pop (TV_SYMOUT);\n+\t}\n     }\n }\n \n@@ -2341,6 +2346,11 @@ rest_of_type_compilation (type, toplev)\n      int toplev ATTRIBUTE_UNUSED;\n #endif\n {\n+  /* Avoid confusing the debug information machinery when there are\n+     errors.  */\n+  if (errorcount != 0 || sorrycount != 0)\n+    return;\n+\n   timevar_push (TV_SYMOUT);\n #if defined (DBX_DEBUGGING_INFO) || defined (XCOFF_DEBUGGING_INFO)\n   if (write_symbols == DBX_DEBUG || write_symbols == XCOFF_DEBUG)"}]}