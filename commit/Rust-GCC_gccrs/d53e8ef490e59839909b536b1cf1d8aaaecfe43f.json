{"sha": "d53e8ef490e59839909b536b1cf1d8aaaecfe43f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUzZThlZjQ5MGU1OTgzOTkwOWI1MzZiMWNmMWQ4YWFhZWNmZTQzZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-06-20T14:42:19Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-06-20T14:42:19Z"}, "message": "cfgrtl.c (rtl_verify_edges): Formatting fix.\n\n\t* cfgrtl.c (rtl_verify_edges): Formatting fix.  If bb->preds has any\n\tEDGE_EH edges, verify they are all EDGE_EH.\n\nFrom-SVN: r261803", "tree": {"sha": "1374584b774dedd6843360e3287f6ce7144cdf27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1374584b774dedd6843360e3287f6ce7144cdf27"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d53e8ef490e59839909b536b1cf1d8aaaecfe43f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d53e8ef490e59839909b536b1cf1d8aaaecfe43f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d53e8ef490e59839909b536b1cf1d8aaaecfe43f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d53e8ef490e59839909b536b1cf1d8aaaecfe43f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "335a120f7fc249992772fbabe5ad9375443a0848", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/335a120f7fc249992772fbabe5ad9375443a0848", "html_url": "https://github.com/Rust-GCC/gccrs/commit/335a120f7fc249992772fbabe5ad9375443a0848"}], "stats": {"total": 36, "additions": 27, "deletions": 9}, "files": [{"sha": "86db35fde19825fa209b9734ca9c8a8f2a4b087f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d53e8ef490e59839909b536b1cf1d8aaaecfe43f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d53e8ef490e59839909b536b1cf1d8aaaecfe43f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d53e8ef490e59839909b536b1cf1d8aaaecfe43f", "patch": "@@ -1,3 +1,8 @@\n+2018-06-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* cfgrtl.c (rtl_verify_edges): Formatting fix.  If bb->preds has any\n+\tEDGE_EH edges, verify they are all EDGE_EH.\n+\n 2018-06-20  Maya Rashish  <coypu@sdf.org>\n \n \t* ginclude/stddef.h: Limit #include <machine/ansi.h> to NetBSD."}, {"sha": "19cef2272b67c5ceaf0c71710b6ce9f34f00cf88", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 22, "deletions": 9, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d53e8ef490e59839909b536b1cf1d8aaaecfe43f/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d53e8ef490e59839909b536b1cf1d8aaaecfe43f/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=d53e8ef490e59839909b536b1cf1d8aaaecfe43f", "patch": "@@ -2540,15 +2540,15 @@ rtl_verify_edges (void)\n \t    n_abnormal++;\n \t}\n \n-        if (!has_crossing_edge\n-\t    && JUMP_P (BB_END (bb))\n-\t    && CROSSING_JUMP_P (BB_END (bb)))\n-          {\n-\t    print_rtl_with_bb (stderr, get_insns (), TDF_BLOCKS | TDF_DETAILS);\n-            error (\"Region crossing jump across same section in bb %i\",\n-                   bb->index);\n-            err = 1;\n-          }\n+      if (!has_crossing_edge\n+\t  && JUMP_P (BB_END (bb))\n+\t  && CROSSING_JUMP_P (BB_END (bb)))\n+\t{\n+\t  print_rtl_with_bb (stderr, get_insns (), TDF_BLOCKS | TDF_DETAILS);\n+\t  error (\"Region crossing jump across same section in bb %i\",\n+\t\t bb->index);\n+\t  err = 1;\n+\t}\n \n       if (n_eh && !find_reg_note (BB_END (bb), REG_EH_REGION, NULL_RTX))\n \t{\n@@ -2606,6 +2606,19 @@ rtl_verify_edges (void)\n \t  error (\"abnormal edges for no purpose in bb %i\", bb->index);\n \t  err = 1;\n \t}\n+\n+      int has_eh = -1;\n+      FOR_EACH_EDGE (e, ei, bb->preds)\n+\t{\n+\t  if (has_eh == -1)\n+\t    has_eh = (e->flags & EDGE_EH);\n+\t  if ((e->flags & EDGE_EH) == has_eh)\n+\t    continue;\n+\t  error (\"EH incoming edge mixed with non-EH incoming edges \"\n+\t\t \"in bb %i\", bb->index);\n+\t  err = 1;\n+\t  break;\n+\t}\n     }\n \n   /* If there are partitions, do a sanity check on them: A basic block in"}]}