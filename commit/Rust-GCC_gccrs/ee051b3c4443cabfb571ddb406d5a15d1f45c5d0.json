{"sha": "ee051b3c4443cabfb571ddb406d5a15d1f45c5d0", "node_id": "C_kwDOANBUbNoAKGVlMDUxYjNjNDQ0M2NhYmZiNTcxZGRiNDA2ZDVhMTVkMWY0NWM1ZDA", "commit": {"author": {"name": "liushuyu", "email": "liushuyu011@gmail.com", "date": "2022-07-13T08:20:20Z"}, "committer": {"name": "liushuyu", "email": "liushuyu011@gmail.com", "date": "2022-07-13T08:20:20Z"}, "message": "backend: explain why cdecl is treated differently ...\n\n... when setting up the ABIs\n\nSigned-off-by: Zixing Liu <liushuyu011@gmail.com>", "tree": {"sha": "09afaa39e16c27749014d1e5f9b547503408638c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/09afaa39e16c27749014d1e5f9b547503408638c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee051b3c4443cabfb571ddb406d5a15d1f45c5d0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE6x/rcKrl3aOwzUVJI9HORTRBlDcFAmLOgIQACgkQI9HORTRB\nlDc8XRAAiPH0TIsSQO2KrxM5q/t8LNe5eHhxZi4cfEcM1mHkdriK8fQ18c95CBs3\n+q+3L5d9Bfg+aNEDbfNEwwnCqL16bEYajT1lU4521/bCjQkFFPADnhYjwV4KnykD\nbcgNfLOC4GA0gIihuqdaiulGbTQVMbu9GkTykIA/eNbMXeVH6Xp5R6myu9l6xpBB\ndRKhfS4tYhFTg/mPFi8fuAl3EIoUTfbr60BbdNj1eiye1Mf6RZiMjwGMRqsdNzoM\niEq4ftOivVMkET7+FpOA4CNX/c2Gl2+WTI5dpHWX+gYZT+moJxdvJswzgzq5xki4\n0mFCGTjie5eQfVZUsf6af4GBpLLGVhBh2khBpY7S0sMO3rDkc9tBxYj8MW45yRqN\neVya4dehvDSwtYKukQ65xgELlQe7Imu3Mzri0E1Bw86uGdQH7yC1JTg9jibVF+Wr\nYP9T2Gc75TPo9G70rHdYqtQUGFguklPwjZmO56rueXsN86kaD0Xb2ENZxGHsNsCR\nkdTBbvfTJTBwsNuvhwMlk0YVxzAFuiTXI8whiD1ew2AJwnaQSOYRdx5x17yK5yUf\nOh5UUoIu7VKHn+MTa+mFlkrW+TILmrh3vPokfcWbKHwU+T/FvpGgygtFT/7tlMnM\n9Kz+kAlyCMIrT4lNA72QQqtyQiNwI04/zkazOYE4hbP26xTnSLE=\n=pkTJ\n-----END PGP SIGNATURE-----", "payload": "tree 09afaa39e16c27749014d1e5f9b547503408638c\nparent 26114120fd6e1feb1b3cbbadfa569981df372a9f\nauthor liushuyu <liushuyu011@gmail.com> 1657700420 -0600\ncommitter liushuyu <liushuyu011@gmail.com> 1657700420 -0600\n\nbackend: explain why cdecl is treated differently ...\n\n... when setting up the ABIs\n\nSigned-off-by: Zixing Liu <liushuyu011@gmail.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee051b3c4443cabfb571ddb406d5a15d1f45c5d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee051b3c4443cabfb571ddb406d5a15d1f45c5d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee051b3c4443cabfb571ddb406d5a15d1f45c5d0/comments", "author": {"login": "liushuyu", "id": 6829345, "node_id": "MDQ6VXNlcjY4MjkzNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/6829345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liushuyu", "html_url": "https://github.com/liushuyu", "followers_url": "https://api.github.com/users/liushuyu/followers", "following_url": "https://api.github.com/users/liushuyu/following{/other_user}", "gists_url": "https://api.github.com/users/liushuyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/liushuyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liushuyu/subscriptions", "organizations_url": "https://api.github.com/users/liushuyu/orgs", "repos_url": "https://api.github.com/users/liushuyu/repos", "events_url": "https://api.github.com/users/liushuyu/events{/privacy}", "received_events_url": "https://api.github.com/users/liushuyu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "liushuyu", "id": 6829345, "node_id": "MDQ6VXNlcjY4MjkzNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/6829345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liushuyu", "html_url": "https://github.com/liushuyu", "followers_url": "https://api.github.com/users/liushuyu/followers", "following_url": "https://api.github.com/users/liushuyu/following{/other_user}", "gists_url": "https://api.github.com/users/liushuyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/liushuyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liushuyu/subscriptions", "organizations_url": "https://api.github.com/users/liushuyu/orgs", "repos_url": "https://api.github.com/users/liushuyu/repos", "events_url": "https://api.github.com/users/liushuyu/events{/privacy}", "received_events_url": "https://api.github.com/users/liushuyu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26114120fd6e1feb1b3cbbadfa569981df372a9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26114120fd6e1feb1b3cbbadfa569981df372a9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26114120fd6e1feb1b3cbbadfa569981df372a9f"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "28f39419bec3e4a597dd461ddd096b2f0503049c", "filename": "gcc/rust/backend/rust-compile-base.cc", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee051b3c4443cabfb571ddb406d5a15d1f45c5d0/gcc%2Frust%2Fbackend%2Frust-compile-base.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee051b3c4443cabfb571ddb406d5a15d1f45c5d0/gcc%2Frust%2Fbackend%2Frust-compile-base.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Fbackend%2Frust-compile-base.cc?ref=ee051b3c4443cabfb571ddb406d5a15d1f45c5d0", "patch": "@@ -304,6 +304,12 @@ HIRCompileBase::setup_abi_options (tree fndecl, ABI abi)\n     case Rust::ABI::INTRINSIC:\n     case Rust::ABI::C:\n     case Rust::ABI::CDECL:\n+      // `decl_attributes` function (not the macro) has the side-effect of\n+      // actually switching the codegen backend to use the ABI we annotated.\n+      // However, since `cdecl` is the default ABI GCC will be using, explicitly\n+      // specifying that ABI will cause GCC to emit a warning saying the\n+      // attribute is useless (which is confusing to the user as the attribute\n+      // is added by us).\n       DECL_ATTRIBUTES (fndecl)\n \t= tree_cons (get_identifier (\"cdecl\"), NULL, DECL_ATTRIBUTES (fndecl));\n "}]}