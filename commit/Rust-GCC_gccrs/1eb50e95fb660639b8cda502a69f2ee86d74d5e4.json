{"sha": "1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWViNTBlOTVmYjY2MDYzOWI4Y2RhNTAyYTY5ZjJlZTg2ZDc0ZDVlNA==", "commit": {"author": {"name": "Christian Bruel", "email": "christian.bruel@st.com", "date": "2015-09-17T15:57:59Z"}, "committer": {"name": "Christian Bruel", "email": "chrbr@gcc.gnu.org", "date": "2015-09-17T15:57:59Z"}, "message": "arm.md (*call_value_symbol): Fix operand for interworking.\n\n2015-09-17  Christian Bruel  <christian.bruel@st.com>\n\n\t* config/arm/arm.md (*call_value_symbol): Fix operand for interworking.\n\nFrom-SVN: r227880", "tree": {"sha": "c4cb9a66467da80b0e3cf1109dba2e975a872c6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4cb9a66467da80b0e3cf1109dba2e975a872c6f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/comments", "author": null, "committer": null, "parents": [{"sha": "4e9a8214b871baf45a47bc8b80e1e5ad897f7899", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e9a8214b871baf45a47bc8b80e1e5ad897f7899", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e9a8214b871baf45a47bc8b80e1e5ad897f7899"}], "stats": {"total": 50, "additions": 49, "deletions": 1}, "files": [{"sha": "0faf86b48783f25516ab92b4cfdaacfeb91f0590", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "patch": "@@ -1,3 +1,7 @@\n+2015-09-17  Christian Bruel  <christian.bruel@st.com>\n+\n+\t* config/arm/arm.md (*call_value_symbol): Fix operand for interworking.\n+\n 2015-09-17  Richard Henderson  <rth@redhat.com>\n \n \tPR libstdc++/65913"}, {"sha": "ad5b02e5589ed0aaa47f869c8a1ccb2177e8d1c4", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "patch": "@@ -7891,7 +7891,7 @@\n    /* Switch mode now when possible.  */\n    if (SYMBOL_REF_DECL (op) && !TREE_PUBLIC (SYMBOL_REF_DECL (op))\n         && arm_arch5 && arm_change_mode_p (SYMBOL_REF_DECL (op)))\n-      return NEED_PLT_RELOC ? \\\"blx%?\\\\t%a0(PLT)\\\" : \\\"blx%?\\\\t(%a0)\\\";\n+      return NEED_PLT_RELOC ? \\\"blx%?\\\\t%a1(PLT)\\\" : \\\"blx%?\\\\t(%a1)\\\";\n \n     return NEED_PLT_RELOC ? \\\"bl%?\\\\t%a1(PLT)\\\" : \\\"bl%?\\\\t%a1\\\";\n   }\""}, {"sha": "86ba5b7e919896cb48a32ebe4664b17ef6c52c18", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "patch": "@@ -1,3 +1,7 @@\n+2015-09-17  Christian Bruel  <christian.bruel@st.com>\n+\n+\t* gcc.target/arm/attr_thumb-static2.c: New test.\n+\n 2015-09-17  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/overflow_sum3.adb: New test."}, {"sha": "df8a6c0b46bcb000b76695cade2b1d685d73eab6", "filename": "gcc/testsuite/gcc.target/arm/attr_thumb-static2.c", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr_thumb-static2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1eb50e95fb660639b8cda502a69f2ee86d74d5e4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr_thumb-static2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fattr_thumb-static2.c?ref=1eb50e95fb660639b8cda502a69f2ee86d74d5e4", "patch": "@@ -0,0 +1,40 @@\n+/* Check that interwork between static functions is correctly resolved. */\n+\n+/* { dg-skip-if \"\" { ! { arm_thumb1_ok || arm_thumb2_ok } } } */\n+/* { dg-options \"-O0 -march=armv7-a -mfloat-abi=hard\" } */\n+/* { dg-do compile } */\n+\n+struct _NSPoint\n+{\n+  float x;\n+  float y;\n+};\n+\n+typedef struct _NSPoint NSPoint;\n+\n+static NSPoint\n+__attribute__ ((target(\"arm\")))\n+NSMakePoint (float x, float y)\n+{\n+  NSPoint point;\n+  point.x = x;\n+  point.y = y;\n+  return point;\n+}\n+\n+static NSPoint\n+__attribute__ ((target(\"thumb\")))\n+RelativePoint (NSPoint point, NSPoint refPoint)\n+{\n+  return NSMakePoint (refPoint.x + point.x, refPoint.y + point.y);\n+}\n+\n+NSPoint\n+__attribute__ ((target(\"arm\")))\n+g(NSPoint refPoint)\n+{\n+  float pointA, pointB;\n+  return RelativePoint (NSMakePoint (0, pointA), refPoint);\n+}\n+\n+/* { dg-final { scan-assembler-times \"blx\" 2 } } */"}]}