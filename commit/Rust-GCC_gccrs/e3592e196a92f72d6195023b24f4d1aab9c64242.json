{"sha": "e3592e196a92f72d6195023b24f4d1aab9c64242", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM1OTJlMTk2YTkyZjcyZDYxOTUwMjNiMjRmNGQxYWFiOWM2NDI0Mg==", "commit": {"author": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2015-05-21T17:18:25Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2015-05-21T17:18:25Z"}, "message": "re PR target/66224 (PowerPC _GLIBCXX_READ_MEM_BARRIER too weak)\n\n        PR target/66224\n        * config/cpu/powerpc/atomic_word.h (_GLIBCXX_READ_MEM_BARRIER):\n        Don't use isync. Use lwsync if available.\n        * configure.host (atomic_word_dir) [aix[56789]*]: Delete to use\n        powerpc cpu definition.\n\nFrom-SVN: r223496", "tree": {"sha": "e206a4c4accbe87c6e55763c3910ca85c1d50648", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e206a4c4accbe87c6e55763c3910ca85c1d50648"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3592e196a92f72d6195023b24f4d1aab9c64242", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3592e196a92f72d6195023b24f4d1aab9c64242", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3592e196a92f72d6195023b24f4d1aab9c64242", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3592e196a92f72d6195023b24f4d1aab9c64242/comments", "author": null, "committer": null, "parents": [{"sha": "f3da53751662e7a4e2fd6a1c119565518f1e2c63", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3da53751662e7a4e2fd6a1c119565518f1e2c63", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3da53751662e7a4e2fd6a1c119565518f1e2c63"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "6f2c465a7d145c81f76f0033c023a6d463b2c9c9", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3592e196a92f72d6195023b24f4d1aab9c64242/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3592e196a92f72d6195023b24f4d1aab9c64242/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=e3592e196a92f72d6195023b24f4d1aab9c64242", "patch": "@@ -1,9 +1,17 @@\n+2015-05-21  David Edelsohn  <dje.gcc@gmail.com>\n+\n+\tPR target/66224\n+\t* config/cpu/powerpc/atomic_word.h (_GLIBCXX_READ_MEM_BARRIER):\n+\tDon't use isync. Use lwsync if available.\n+\t* configure.host (atomic_word_dir) [aix[56789]*]: Delete to use\n+\tpowerpc cpu definition.\n+\n 2015-05-21  Jason Merrill  <jason@redhat.com>\n \n \t* libsupc++/del_opv.cc: Suppress -Wsized-deallocation.\n \t* libsupc++/del_op.cc: Likewise.\n \n-2015-05-20  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n+2015-05-20  Fran\u00e7ois Dumont  fdumont@gcc.gnu.org>\n \n \t* include/debug/formatter.h (_GLIBCXX_TYPEID): New macro to simplify\n \tusage of typeid."}, {"sha": "1ceb02cf7028f941cd8ce2db7ac60fa0174e8bfd", "filename": "libstdc++-v3/config/cpu/powerpc/atomic_word.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3592e196a92f72d6195023b24f4d1aab9c64242/libstdc%2B%2B-v3%2Fconfig%2Fcpu%2Fpowerpc%2Fatomic_word.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3592e196a92f72d6195023b24f4d1aab9c64242/libstdc%2B%2B-v3%2Fconfig%2Fcpu%2Fpowerpc%2Fatomic_word.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fcpu%2Fpowerpc%2Fatomic_word.h?ref=e3592e196a92f72d6195023b24f4d1aab9c64242", "patch": "@@ -27,10 +27,11 @@\n \n typedef int _Atomic_word;\n \n-#define _GLIBCXX_READ_MEM_BARRIER __asm __volatile (\"isync\":::\"memory\")\n #ifdef __NO_LWSYNC__\n+#define _GLIBCXX_READ_MEM_BARRIER __asm __volatile (\"sync\":::\"memory\")\n #define _GLIBCXX_WRITE_MEM_BARRIER __asm __volatile (\"sync\":::\"memory\")\n #else\n+#define _GLIBCXX_READ_MEM_BARRIER __asm __volatile (\"lwsync\":::\"memory\")\n #define _GLIBCXX_WRITE_MEM_BARRIER __asm __volatile (\"lwsync\":::\"memory\")\n #endif\n "}, {"sha": "8892f31f2745a92c97beeba1858c087088eae1e4", "filename": "libstdc++-v3/configure.host", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3592e196a92f72d6195023b24f4d1aab9c64242/libstdc%2B%2B-v3%2Fconfigure.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3592e196a92f72d6195023b24f4d1aab9c64242/libstdc%2B%2B-v3%2Fconfigure.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.host?ref=e3592e196a92f72d6195023b24f4d1aab9c64242", "patch": "@@ -219,7 +219,6 @@ case \"${host_os}\" in\n     # Newer versions of AIX only support PowerPC architecture, so use\n     # atomic instructions directly.\n     os_include_dir=\"os/aix\"\n-    atomic_word_dir=\"os/aix\"\n     ;;\n   aix4.[3456789]*)\n     # We set os_include_dir to os/aix only on AIX 4.3 and newer, but"}]}