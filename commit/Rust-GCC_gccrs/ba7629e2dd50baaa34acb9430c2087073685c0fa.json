{"sha": "ba7629e2dd50baaa34acb9430c2087073685c0fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE3NjI5ZTJkZDUwYmFhYTM0YWNiOTQzMGMyMDg3MDczNjg1YzBmYQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2017-05-30T11:08:36Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2017-05-30T11:08:36Z"}, "message": "re PR tree-optimization/80901 (ICE on valid code at -Os and above on x86_64-linux-gnu: in verify_loop_structure, at cfgloop.c:1644)\n\n2017-05-30  Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/80901\n\t* cfgexpand.c (expand_gimple_cond): Match up loop fixup with\n\tsplit_edge code.\n\n\t* gcc.dg/torture/pr80901.c: New testcase.\n\nFrom-SVN: r248681", "tree": {"sha": "ae64df2a7f595668efbb8b7fed58afdfa0b293c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae64df2a7f595668efbb8b7fed58afdfa0b293c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba7629e2dd50baaa34acb9430c2087073685c0fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba7629e2dd50baaa34acb9430c2087073685c0fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba7629e2dd50baaa34acb9430c2087073685c0fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba7629e2dd50baaa34acb9430c2087073685c0fa/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4d3d23fb7d364ce433cf59b7d36d333567990518", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d3d23fb7d364ce433cf59b7d36d333567990518", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d3d23fb7d364ce433cf59b7d36d333567990518"}], "stats": {"total": 52, "additions": 48, "deletions": 4}, "files": [{"sha": "932ab6930a33d407c4aeb11c633541c25c1ea855", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba7629e2dd50baaa34acb9430c2087073685c0fa", "patch": "@@ -1,3 +1,9 @@\n+2017-05-30  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/80901\n+\t* cfgexpand.c (expand_gimple_cond): Match up loop fixup with\n+\tsplit_edge code.\n+\n 2017-05-24  Robin Dapp  <rdapp@linux.vnet.ibm.com>\n \n \t* tree-vect-data-refs.c (vect_get_peeling_costs_all_drs):"}, {"sha": "698d43b60b45085a97d6db1adbdc1850f50db54d", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=ba7629e2dd50baaa34acb9430c2087073685c0fa", "patch": "@@ -2503,10 +2503,11 @@ expand_gimple_cond (basic_block bb, gcond *stmt)\n   false_edge->flags |= EDGE_FALLTHRU;\n   new_bb->count = false_edge->count;\n   new_bb->frequency = EDGE_FREQUENCY (false_edge);\n-  add_bb_to_loop (new_bb, dest->loop_father);\n-  if (dest->loop_father->latch == bb\n-      && dest->loop_father->header == dest)\n-    dest->loop_father->latch = new_bb;\n+  loop_p loop = find_common_loop (bb->loop_father, dest->loop_father);\n+  add_bb_to_loop (new_bb, loop);\n+  if (loop->latch == bb\n+      && loop->header == dest)\n+    loop->latch = new_bb;\n   new_edge = make_edge (new_bb, dest, 0);\n   new_edge->probability = REG_BR_PROB_BASE;\n   new_edge->count = new_bb->count;"}, {"sha": "e40a3ed63134ce05cf0b56b58f39412e0fc32869", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ba7629e2dd50baaa34acb9430c2087073685c0fa", "patch": "@@ -1,3 +1,8 @@\n+2017-05-30  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/80901\n+\t* gcc.dg/torture/pr80901.c: New testcase.\n+\n 2017-05-30  Robin Dapp  <rdapp@linux.vnet.ibm.com>\n \n \t* gcc.target/s390/vector/vec-nopeel-2.c: New test."}, {"sha": "635d93907b2d947c920f1a1dfb28f463563fbccb", "filename": "gcc/testsuite/gcc.dg/torture/pr80901.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80901.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba7629e2dd50baaa34acb9430c2087073685c0fa/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80901.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr80901.c?ref=ba7629e2dd50baaa34acb9430c2087073685c0fa", "patch": "@@ -0,0 +1,32 @@\n+/* { dg-do compile } */\n+\n+int a, b, c, d;\n+\n+int fn1 ()\n+{\n+  int f;\n+  if (d)\n+    while (c)\n+      {\n+\tfor (f = 0; f < 1; f++)\n+\t  {\n+\t    int g[70] = { 0 };\n+\t    if (b)\n+\t      ;\n+\t    else\n+\t      {\n+\t\tint h = !b;\n+\t\tfor (; h; h = 1)\n+\t\t  ;\n+\t      }\n+\t  }\n+\treturn 0;\n+      }\n+  return a;\n+}\n+\n+int main ()\n+{\n+  fn1 ();\n+  return 0;\n+}"}]}