{"sha": "cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2YxYmNmMDZhMTU1YjEwM2M5NjI0NmQyOGUyZTJlNmNlMWExODBhYQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2010-09-25T21:34:45Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-09-25T21:34:45Z"}, "message": "tree-inline.c (copy_bb): Use GSI_CONTINUE_LINKING when inserting new statements because of the return...\n\n\t* tree-inline.c (copy_bb): Use GSI_CONTINUE_LINKING when inserting new\n\tstatements because of the return slot optimization.\n\nFrom-SVN: r164622", "tree": {"sha": "f16c202bbfc408429913becbb1fb0f82f4b96a2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f16c202bbfc408429913becbb1fb0f82f4b96a2e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/comments", "author": null, "committer": null, "parents": [{"sha": "de5142553aa453b81ef97e6f433f2e9de3c3c660", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de5142553aa453b81ef97e6f433f2e9de3c3c660", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de5142553aa453b81ef97e6f433f2e9de3c3c660"}], "stats": {"total": 71, "additions": 70, "deletions": 1}, "files": [{"sha": "4abab8585ee0b5ffd9bce8346caeb71b1584d6f2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "patch": "@@ -1,3 +1,8 @@\n+2010-09-25  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree-inline.c (copy_bb): Use GSI_CONTINUE_LINKING when inserting new\n+\tstatements because of the return slot optimization.\n+\n 2010-09-25  Anatoly Sokolov  <aesok@post.ru>\n \n \t* config/avr/avr.h (CLASS_LIKELY_SPILLED_P): Remove."}, {"sha": "d9853727d4fe51bcb1f3ec2b17e9f7da0012067f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "patch": "@@ -1,3 +1,8 @@\n+2010-09-25  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/return2.ad[sb]: New test.\n+\t* gnat.dg/return2_pkg.ads: New helper.\n+\n 2010-09-25  Daniel Kraft  <d@domob.eu>\n \n \tPR fortran/45776"}, {"sha": "65b7bf045acad023423321498b826de495e5a1ab", "filename": "gcc/testsuite/gnat.dg/return2.adb", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2.adb?ref=cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "patch": "@@ -0,0 +1,33 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O\" }\n+\n+with Return2_Pkg; use Return2_Pkg;\n+\n+package body Return2 is\n+\n+  function Value_Internal (Image : String) return Result_Internal_T is\n+  begin\n+    return (Member => False);\n+  end;\n+\n+  type Result_T is array (1 .. 2) of Result_Internal_T;\n+\n+  function Value (Img : String) return T is\n+    My_F : constant String := F;\n+    Result : Result_T;\n+    Value : T;\n+  begin\n+    for I in Result'Range loop\n+      if G (My_F, I) /= \"\" then\n+        Result (I) := Value_Internal (G (My_F, I));\n+        if Result (I).Member then\n+          Value (Result (I).Data) := True;\n+        else\n+          raise Program_Error;\n+        end if;\n+      end if;\n+    end loop;\n+    return Value;\n+  end;\n+\n+end Return2;"}, {"sha": "3e29910d2c79ea95e7edbb51a4e135a76123c1c6", "filename": "gcc/testsuite/gnat.dg/return2.ads", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2.ads?ref=cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "patch": "@@ -0,0 +1,18 @@\n+package Return2 is\n+\n+  type Kind_T is (One, Two);\n+\n+  type T is array (Kind_T) of Boolean;\n+\n+  type Result_Internal_T (Member : Boolean := False) is record\n+    case Member is\n+      when True =>\n+        Data : Kind_T := Kind_T'First;\n+      when False =>\n+        null;\n+    end case;\n+  end record;\n+\n+  function Value (Img : String) return T;\n+\n+end Return2;"}, {"sha": "f5738654a6d51bc354d9ec79452a17cc2bfbc1b5", "filename": "gcc/testsuite/gnat.dg/return2_pkg.ads", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Freturn2_pkg.ads?ref=cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "patch": "@@ -0,0 +1,7 @@\n+package Return2_Pkg is\n+\n+  function F return String;\n+\n+  function G (Line : String; Index : Positive) return String;\n+\n+end Return2_Pkg;"}, {"sha": "b0627be0d3dbdfff6185b1180be547333e824694", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf1bcf06a155b103c96246d28e2e2e6ce1a180aa/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=cf1bcf06a155b103c96246d28e2e2e6ce1a180aa", "patch": "@@ -1558,7 +1558,8 @@ copy_bb (copy_body_data *id, basic_block bb, int frequency_scale,\n \t  tree new_rhs;\n \t  new_rhs = force_gimple_operand_gsi (&seq_gsi,\n \t\t\t\t\t      gimple_assign_rhs1 (stmt),\n-\t\t\t\t\t      true, NULL, false, GSI_NEW_STMT);\n+\t\t\t\t\t      true, NULL, false,\n+\t\t\t\t\t      GSI_CONTINUE_LINKING);\n \t  gimple_assign_set_rhs1 (stmt, new_rhs);\n \t  id->regimplify = false;\n \t}"}]}