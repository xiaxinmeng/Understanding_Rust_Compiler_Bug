{"sha": "f1b259d59eba8cec9424e55751035117cfbde8a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFiMjU5ZDU5ZWJhOGNlYzk0MjRlNTU3NTEwMzUxMTdjZmJkZThhOQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2005-04-06T11:53:53Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2005-04-06T11:53:53Z"}, "message": "re PR target/17245 (ICE compiling gsl-1.5 statistics/lag1.c)\n\n\tPR target/17245\n\t* config/sparc/sparc.c (legitimate_address_p): Remove 'imm2'.\n\tRevert 2004-10-08 patch.  Reject TFmode LO_SUM in 32-bit mode.\n\nFrom-SVN: r97713", "tree": {"sha": "27f9e9186c39586d6b75b6dd6a920a51cf5bd047", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27f9e9186c39586d6b75b6dd6a920a51cf5bd047"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1b259d59eba8cec9424e55751035117cfbde8a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1b259d59eba8cec9424e55751035117cfbde8a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1b259d59eba8cec9424e55751035117cfbde8a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1b259d59eba8cec9424e55751035117cfbde8a9/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fb201aa43343cb6a14fd0d7bb430fa0c717c6320", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb201aa43343cb6a14fd0d7bb430fa0c717c6320", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb201aa43343cb6a14fd0d7bb430fa0c717c6320"}], "stats": {"total": 32, "additions": 11, "deletions": 21}, "files": [{"sha": "2a839c41542a500a601b21c0188bf842b23c6c01", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1b259d59eba8cec9424e55751035117cfbde8a9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1b259d59eba8cec9424e55751035117cfbde8a9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f1b259d59eba8cec9424e55751035117cfbde8a9", "patch": "@@ -1,3 +1,9 @@\n+2005-04-06  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\tPR target/17245\n+\t* config/sparc/sparc.c (legitimate_address_p): Remove 'imm2'.\n+\tRevert 2004-10-08 patch.  Reject TFmode LO_SUM in 32-bit mode.\n+\n 2005-04-06  Kelley Cook  <kcook@gcc.gnu.org>\n \n \t* Makefile.in (LIBGCC2_CFLAGS): Revert -pipe change."}, {"sha": "241bed4edf6b9a427eae3b9ea7d6718904f75959", "filename": "gcc/config/sparc/sparc.c", "status": "modified", "additions": 5, "deletions": 21, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1b259d59eba8cec9424e55751035117cfbde8a9/gcc%2Fconfig%2Fsparc%2Fsparc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1b259d59eba8cec9424e55751035117cfbde8a9/gcc%2Fconfig%2Fsparc%2Fsparc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.c?ref=f1b259d59eba8cec9424e55751035117cfbde8a9", "patch": "@@ -3500,7 +3500,7 @@ legitimate_pic_operand_p (rtx x)\n int\n legitimate_address_p (enum machine_mode mode, rtx addr, int strict)\n {\n-  rtx rs1 = NULL, rs2 = NULL, imm1 = NULL, imm2;\n+  rtx rs1 = NULL, rs2 = NULL, imm1 = NULL;\n \n   if (REG_P (addr) || GET_CODE (addr) == SUBREG)\n     rs1 = addr;\n@@ -3564,7 +3564,6 @@ legitimate_address_p (enum machine_mode mode, rtx addr, int strict)\n \t       && ! TARGET_CM_MEDMID\n \t       && RTX_OK_FOR_OLO10_P (rs2))\n \t{\n-\t  imm2 = rs2;\n \t  rs2 = NULL;\n \t  imm1 = XEXP (rs1, 1);\n \t  rs1 = XEXP (rs1, 0);\n@@ -3580,25 +3579,10 @@ legitimate_address_p (enum machine_mode mode, rtx addr, int strict)\n       if (! CONSTANT_P (imm1) || tls_symbolic_operand (rs1))\n \treturn 0;\n \n-      if (USE_AS_OFFSETABLE_LO10)\n-\t{\n-\t  /* We can't allow TFmode, because an offset greater than or equal to\n-\t     the alignment (8) may cause the LO_SUM to overflow if !v9.  */\n-\t  if (mode == TFmode && ! TARGET_V9)\n-\t    return 0;\n-\t}\n-      else\n-        {\n-\t  /* We prohibit LO_SUM for TFmode when there are no quad move insns\n-\t     and we consequently need to split.  We do this because LO_SUM\n-\t     is not an offsettable address.  If we get the situation in reload\n-\t     where source and destination of a movtf pattern are both MEMs with\n-\t     LO_SUM address, then only one of them gets converted to an\n-\t     offsettable address.  */\n-\t  if (mode == TFmode\n-\t      && ! (TARGET_FPU && TARGET_ARCH64 && TARGET_HARD_QUAD))\n-\t    return 0;\n-\t}\n+      /* We can't allow TFmode in 32-bit mode, because an offset greater\n+\t than the alignment (8) may cause the LO_SUM to overflow.  */\n+      if (mode == TFmode && !TARGET_64BIT)\n+\treturn 0;\n     }\n   else if (GET_CODE (addr) == CONST_INT && SMALL_INT (addr))\n     return 1;"}]}