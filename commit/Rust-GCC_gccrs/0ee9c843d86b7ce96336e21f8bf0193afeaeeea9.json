{"sha": "0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGVlOWM4NDNkODZiN2NlOTYzMzZlMjFmOGJmMDE5M2FmZWFlZWVhOQ==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2014-08-14T18:56:10Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2014-08-14T18:56:10Z"}, "message": "DR 458\n\n\tDR 458\n\t* ginclude/stdatomic.h (__atomic_type_lock_free): Remove.\n\t(ATOMIC_*_LOCK_FREE): Map to __GCC_ATOMIC_*_LOCK_FREE.\n\n\t* gcc.dg/c11-stdatomic-2.c: New test.\n\nFrom-SVN: r213981", "tree": {"sha": "f1cd78706b1222ecae5a2345776b12d88e3644d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1cd78706b1222ecae5a2345776b12d88e3644d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ba8aa6fca60d3db6375b5f2c1ca6ab57d5ba97da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba8aa6fca60d3db6375b5f2c1ca6ab57d5ba97da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba8aa6fca60d3db6375b5f2c1ca6ab57d5ba97da"}], "stats": {"total": 72, "additions": 48, "deletions": 24}, "files": [{"sha": "8f731ca5d8facd461018bdc4df3d68610528b089", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "patch": "@@ -1,3 +1,9 @@\n+2014-08-14  Marek Polacek  <polacek@redhat.com>\n+\n+\tDR 458\n+\t* ginclude/stdatomic.h (__atomic_type_lock_free): Remove.\n+\t(ATOMIC_*_LOCK_FREE): Map to __GCC_ATOMIC_*_LOCK_FREE.\n+\n 2014-08-14  Tom de Vries  <tom@codesourcery.com>\n \n \t* emit-rtl.h (mem_attrs_eq_p): Remove duplicate declaration."}, {"sha": "26b4b6e53de967220d46f5cf97fd57d7cd5bcc24", "filename": "gcc/ginclude/stdatomic.h", "status": "modified", "additions": 10, "deletions": 24, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2Fginclude%2Fstdatomic.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2Fginclude%2Fstdatomic.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fginclude%2Fstdatomic.h?ref=0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "patch": "@@ -95,30 +95,16 @@ typedef _Atomic __UINTMAX_TYPE__ atomic_uintmax_t;\n #define atomic_signal_fence(MO)\t__atomic_signal_fence  (MO)\n #define atomic_is_lock_free(OBJ) __atomic_is_lock_free (sizeof (*(OBJ)), (OBJ))\n \n-#define __atomic_type_lock_free(T)\t\t\t\t\\\n-  (__atomic_always_lock_free (sizeof (T), (void *) 0)\t\t\\\n-   ? 2\t\t\t\t\t\t\t\t\\\n-   : (__atomic_is_lock_free (sizeof (T), (void *) 0) ? 1 : 0))\n-#define ATOMIC_BOOL_LOCK_FREE\t\t\t\\\n-  __atomic_type_lock_free (atomic_bool)\n-#define ATOMIC_CHAR_LOCK_FREE\t\t\t\\\n-  __atomic_type_lock_free (atomic_char)\n-#define ATOMIC_CHAR16_T_LOCK_FREE\t\t\\\n-  __atomic_type_lock_free (atomic_char16_t)\n-#define ATOMIC_CHAR32_T_LOCK_FREE\t\t\\\n-  __atomic_type_lock_free (atomic_char32_t)\n-#define ATOMIC_WCHAR_T_LOCK_FREE\t\t\\\n-  __atomic_type_lock_free (atomic_wchar_t)\n-#define ATOMIC_SHORT_LOCK_FREE \t\t\t\\\n-  __atomic_type_lock_free (atomic_short)\n-#define ATOMIC_INT_LOCK_FREE \t\t\t\\\n-  __atomic_type_lock_free (atomic_int)\n-#define ATOMIC_LONG_LOCK_FREE\t\t\t\\\n-  __atomic_type_lock_free (atomic_long)\n-#define ATOMIC_LLONG_LOCK_FREE\t\t\t\\\n-  __atomic_type_lock_free (atomic_llong)\n-#define ATOMIC_POINTER_LOCK_FREE\t\t\\\n-  __atomic_type_lock_free (void * _Atomic)\n+#define ATOMIC_BOOL_LOCK_FREE\t\t__GCC_ATOMIC_BOOL_LOCK_FREE\n+#define ATOMIC_CHAR_LOCK_FREE\t\t__GCC_ATOMIC_CHAR_LOCK_FREE\n+#define ATOMIC_CHAR16_T_LOCK_FREE\t__GCC_ATOMIC_CHAR16_T_LOCK_FREE\n+#define ATOMIC_CHAR32_T_LOCK_FREE\t__GCC_ATOMIC_CHAR32_T_LOCK_FREE\n+#define ATOMIC_WCHAR_T_LOCK_FREE\t__GCC_ATOMIC_WCHAR_T_LOCK_FREE\n+#define ATOMIC_SHORT_LOCK_FREE\t\t__GCC_ATOMIC_SHORT_LOCK_FREE\n+#define ATOMIC_INT_LOCK_FREE\t\t__GCC_ATOMIC_INT_LOCK_FREE\n+#define ATOMIC_LONG_LOCK_FREE\t\t__GCC_ATOMIC_LONG_LOCK_FREE\n+#define ATOMIC_LLONG_LOCK_FREE\t\t__GCC_ATOMIC_LLONG_LOCK_FREE\n+#define ATOMIC_POINTER_LOCK_FREE\t__GCC_ATOMIC_POINTER_LOCK_FREE\n \n \n /* Note that these macros require __typeof__ and __auto_type to remove"}, {"sha": "bc879c176a9b452a33dc3cc59c3293a53c287c15", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "patch": "@@ -1,3 +1,8 @@\n+2014-08-14  Marek Polacek  <polacek@redhat.com>\n+\n+\tDR 458\n+\t* gcc.dg/c11-stdatomic-2.c: New test.\n+\n 2014-08-14  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/62106"}, {"sha": "d746b5ce48f91a8dae5a608530e7014c89b76819", "filename": "gcc/testsuite/gcc.dg/c11-stdatomic-2.c", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-stdatomic-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ee9c843d86b7ce96336e21f8bf0193afeaeeea9/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-stdatomic-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-stdatomic-2.c?ref=0ee9c843d86b7ce96336e21f8bf0193afeaeeea9", "patch": "@@ -0,0 +1,27 @@\n+/* Test stdatomic.h header contents.  Test that ATOMIC_*_LOCK_FREE\n+   macros can be used in an #if directive (DR#458).  */\n+/* { dg-do preprocess } */\n+/* { dg-options \"-std=c11 -pedantic-errors\" } */\n+\n+#include <stdatomic.h>\n+\n+#if ATOMIC_BOOL_LOCK_FREE\n+#endif\n+#if ATOMIC_CHAR_LOCK_FREE\n+#endif\n+#if ATOMIC_CHAR16_T_LOCK_FREE\n+#endif\n+#if ATOMIC_CHAR32_T_LOCK_FREE\n+#endif\n+#if ATOMIC_WCHAR_T_LOCK_FREE\n+#endif\n+#if ATOMIC_SHORT_LOCK_FREE\n+#endif\n+#if ATOMIC_INT_LOCK_FREE\n+#endif\n+#if ATOMIC_LONG_LOCK_FREE\n+#endif\n+#if ATOMIC_LLONG_LOCK_FREE\n+#endif\n+#if ATOMIC_POINTER_LOCK_FREE\n+#endif"}]}