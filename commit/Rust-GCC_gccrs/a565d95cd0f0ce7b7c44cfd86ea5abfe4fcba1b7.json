{"sha": "a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTU2NWQ5NWNkMGYwY2U3YjdjNDRjZmQ4NmVhNWFiZmU0ZmNiYTFiNw==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2017-10-27T15:35:37Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2017-10-27T15:35:37Z"}, "message": "tree-vrp.c (check_all_array_refs): Do not use wi->info to smuggle gimple statement locations.\n\n\t* tree-vrp.c (check_all_array_refs): Do not use wi->info to smuggle\n\tgimple statement locations.\n\t(check_array_bounds): Corresponding changes.  Get the statement's\n\tlocation directly from wi->stmt.\n\nFrom-SVN: r254154", "tree": {"sha": "6b16bb412efdbcb1bdc71888bdb086b7a64b68e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b16bb412efdbcb1bdc71888bdb086b7a64b68e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7/comments", "author": null, "committer": null, "parents": [{"sha": "f44d7b243a43db45cedc52ea3bd3f385b8f06f0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f44d7b243a43db45cedc52ea3bd3f385b8f06f0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f44d7b243a43db45cedc52ea3bd3f385b8f06f0d"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "33e275f6b3c5d4cf6daf43cfc1fa0088bc232976", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7", "patch": "@@ -1,3 +1,10 @@\n+2017-10-27  Jeff Law  <law@redhat.com>\n+\n+\t* tree-vrp.c (check_all_array_refs): Do not use wi->info to smuggle\n+\tgimple statement locations.\n+\t(check_array_bounds): Corresponding changes.  Get the statement's\n+\tlocation directly from wi->stmt.\n+\n 2017-10-27  Palmer Dabbelt  <palmer@dabbelt.com>\n \n \tPR target/82717"}, {"sha": "98be68467d7b36179fdc10a5f6b93b5df444031a", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=a565d95cd0f0ce7b7c44cfd86ea5abfe4fcba1b7", "patch": "@@ -6837,10 +6837,7 @@ check_array_bounds (tree *tp, int *walk_subtree, void *data)\n   if (EXPR_HAS_LOCATION (t))\n     location = EXPR_LOCATION (t);\n   else\n-    {\n-      location_t *locp = (location_t *) wi->info;\n-      location = *locp;\n-    }\n+    location = gimple_location (wi->stmt);\n \n   *walk_subtree = TRUE;\n \n@@ -6887,9 +6884,6 @@ check_all_array_refs (void)\n \n \t  memset (&wi, 0, sizeof (wi));\n \n-\t  location_t loc = gimple_location (stmt);\n-\t  wi.info = &loc;\n-\n \t  walk_gimple_op (gsi_stmt (si),\n \t\t\t  check_array_bounds,\n \t\t\t  &wi);"}]}