{"sha": "9c60a01a9c238e216af7cd952c7b785842b6a6a4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM2MGEwMWE5YzIzOGUyMTZhZjdjZDk1MmM3Yjc4NTg0MmI2YTZhNA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2010-12-03T16:56:53Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2010-12-03T16:56:53Z"}, "message": "re PR debug/46123 (ICE: in output_aranges, at dwarf2out.c:11531 with -feliminate-dwarf2-dups -g)\n\n\tPR debug/46123\n\t* dwarf2out.c (gen_tagged_type_die): Don't put local types in\n\ta declaration DIE.\n\nFrom-SVN: r167436", "tree": {"sha": "41053c3354b7bd808d0be7b86cf81ce684cf82d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/41053c3354b7bd808d0be7b86cf81ce684cf82d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c60a01a9c238e216af7cd952c7b785842b6a6a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c60a01a9c238e216af7cd952c7b785842b6a6a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c60a01a9c238e216af7cd952c7b785842b6a6a4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c60a01a9c238e216af7cd952c7b785842b6a6a4/comments", "author": null, "committer": null, "parents": [{"sha": "3ee353e956beac249a08337099ec885ae28bba04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ee353e956beac249a08337099ec885ae28bba04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ee353e956beac249a08337099ec885ae28bba04"}], "stats": {"total": 110, "additions": 110, "deletions": 0}, "files": [{"sha": "338e324b19afda9df3182613bf2d2e5999053c0f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9c60a01a9c238e216af7cd952c7b785842b6a6a4", "patch": "@@ -1,3 +1,9 @@\n+2010-12-03  Jason Merrill  <jason@redhat.com>\n+\n+\tPR debug/46123\n+\t* dwarf2out.c (gen_tagged_type_die): Don't put local types in\n+\ta declaration DIE.\n+\n 2010-12-03  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* config/arm/arm.c (arm_legitimate_index_p): Split"}, {"sha": "acb70ed3368fb27acdc6477e01fb759aeb3e2ccb", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=9c60a01a9c238e216af7cd952c7b785842b6a6a4", "patch": "@@ -20212,6 +20212,10 @@ gen_tagged_type_die (tree type,\n \t out yet, use a NULL context for now; it will be fixed up in\n \t decls_for_scope.  */\n       context_die = lookup_decl_die (TYPE_CONTEXT (type));\n+      /* A declaration DIE doesn't count; nested types need to go in the\n+\t specification.  */\n+      if (context_die && is_declaration_die (context_die))\n+\tcontext_die = NULL;\n       need_pop = 0;\n     }\n   else"}, {"sha": "f46c555621b1707313a22996b29226445ca9ce36", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9c60a01a9c238e216af7cd952c7b785842b6a6a4", "patch": "@@ -1,3 +1,9 @@\n+2010-12-03  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/46123\n+\t* g++.dg/debug/pr46123.C: New test.\n+\t* g++.dg/debug/dwarf2/pr46123.C: New test.\n+\n 2010-12-03  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/46058"}, {"sha": "eee192c26873d8df8ef1e07fffab97ab4cb30af8", "filename": "gcc/testsuite/g++.dg/debug/dwarf2/pr46123.C", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr46123.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr46123.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fdwarf2%2Fpr46123.C?ref=9c60a01a9c238e216af7cd952c7b785842b6a6a4", "patch": "@@ -0,0 +1,47 @@\n+// PR debug/46123\n+// { dg-do compile }\n+// { dg-options \"-gdwarf-4\" }\n+\n+struct foo\n+{\n+  static int bar ()\n+  {\n+    int i;\n+    static int baz = 1;\n+    {\n+      static int baz = 2;\n+      i = baz++;\n+    }\n+    {\n+      struct baz\n+      {\n+\tstatic int m ()\n+\t{\n+\t  static int n;\n+\t  return n += 10;\n+\t}\n+      };\n+      baz a;\n+      i += a.m ();\n+    }\n+    {\n+      static int baz = 3;\n+      i += baz;\n+      baz += 30;\n+    }\n+    i += baz;\n+    baz += 60;\n+    return i;\n+  }\n+};\n+\n+int main ()\n+{\n+  foo x;\n+\n+  if (x.bar () != 16)\n+    return 1;\n+  if (x.bar() != 117)\n+    return 1;\n+  return 0;\n+}"}, {"sha": "9e115cd06da80b1fe382a69c818ba7d1b68a09d6", "filename": "gcc/testsuite/g++.dg/debug/pr46123.C", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fpr46123.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c60a01a9c238e216af7cd952c7b785842b6a6a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fpr46123.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdebug%2Fpr46123.C?ref=9c60a01a9c238e216af7cd952c7b785842b6a6a4", "patch": "@@ -0,0 +1,47 @@\n+// PR debug/46123\n+// { dg-do compile }\n+// { dg-options \"-g -feliminate-dwarf2-dups\" }\n+\n+struct foo\n+{\n+  static int bar ()\n+  {\n+    int i;\n+    static int baz = 1;\n+    {\n+      static int baz = 2;\n+      i = baz++;\n+    }\n+    {\n+      struct baz\n+      {\n+\tstatic int m ()\n+\t{\n+\t  static int n;\n+\t  return n += 10;\n+\t}\n+      };\n+      baz a;\n+      i += a.m ();\n+    }\n+    {\n+      static int baz = 3;\n+      i += baz;\n+      baz += 30;\n+    }\n+    i += baz;\n+    baz += 60;\n+    return i;\n+  }\n+};\n+\n+int main ()\n+{\n+  foo x;\n+\n+  if (x.bar () != 16)\n+    return 1;\n+  if (x.bar() != 117)\n+    return 1;\n+  return 0;\n+}"}]}