{"sha": "8ab1d2e90f3e49593e490bc70199c4b97155f4ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGFiMWQyZTkwZjNlNDk1OTNlNDkwYmM3MDE5OWM0Yjk3MTU1ZjRiYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-01-03T08:52:10Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-01-03T08:52:10Z"}, "message": "re PR debug/54402 (var-tracking does not scale)\n\n\tPR debug/54402\n\t* params.def (PARAM_MAX_VARTRACK_REVERSE_OP_SIZE): New param.\n\t* var-tracking.c (reverse_op): Don't add reverse ops to\n\tVALUEs that have already\n\tPARAM_VALUE (PARAM_MAX_VARTRACK_REVERSE_OP_SIZE) or longer\n\tlocs list.\n\nFrom-SVN: r194834", "tree": {"sha": "ab1c0af1ec8a5ce47a04a16d888444033de856b7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab1c0af1ec8a5ce47a04a16d888444033de856b7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8ab1d2e90f3e49593e490bc70199c4b97155f4ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ab1d2e90f3e49593e490bc70199c4b97155f4ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ab1d2e90f3e49593e490bc70199c4b97155f4ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ab1d2e90f3e49593e490bc70199c4b97155f4ba/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5b9ad1d443bb056576947a6050226c38d106c873", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b9ad1d443bb056576947a6050226c38d106c873", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b9ad1d443bb056576947a6050226c38d106c873"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "0c89cc4ec1b09975a49b7c17f26337c3f58ce499", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ab1d2e90f3e49593e490bc70199c4b97155f4ba/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ab1d2e90f3e49593e490bc70199c4b97155f4ba/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8ab1d2e90f3e49593e490bc70199c4b97155f4ba", "patch": "@@ -1,3 +1,12 @@\n+2013-01-03  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/54402\n+\t* params.def (PARAM_MAX_VARTRACK_REVERSE_OP_SIZE): New param.\n+\t* var-tracking.c (reverse_op): Don't add reverse ops to\n+\tVALUEs that have already\n+\tPARAM_VALUE (PARAM_MAX_VARTRACK_REVERSE_OP_SIZE) or longer\n+\tlocs list.\n+\n 2013-01-02  Gerald Pfeifer  <gerald@pfeifer.com>\n \n \t* doc/contrib.texi: Note years as release manager for Mark Mitchell."}, {"sha": "a307b715f8b61ee14bc6d22ac18d6d6a2ecb971a", "filename": "gcc/params.def", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ab1d2e90f3e49593e490bc70199c4b97155f4ba/gcc%2Fparams.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ab1d2e90f3e49593e490bc70199c4b97155f4ba/gcc%2Fparams.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fparams.def?ref=8ab1d2e90f3e49593e490bc70199c4b97155f4ba", "patch": "@@ -1,6 +1,6 @@\n /* params.def - Run-time parameters.\n    Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n-   2011, 2012\n+   2011, 2012, 2013\n    Free Software Foundation, Inc.\n    Written by Mark Mitchell <mark@codesourcery.com>.\n \n@@ -869,6 +869,14 @@ DEFPARAM (PARAM_MAX_VARTRACK_EXPR_DEPTH,\n \t  \"Max. recursion depth for expanding var tracking expressions\",\n \t  12, 0, 0)\n \n+/* Set maximum length of value location list for which var tracking\n+   should add reverse operations.  */\n+\n+DEFPARAM (PARAM_MAX_VARTRACK_REVERSE_OP_SIZE,\n+\t  \"max-vartrack-reverse-op-size\",\n+\t  \"Max. size of loc list for which reverse ops should be added\",\n+\t  50, 0, 0)\n+\n /* Set minimum insn uid for non-debug insns.  */\n \n DEFPARAM (PARAM_MIN_NONDEBUG_INSN_UID,"}, {"sha": "9f1a5071f3d5bd61474ae585920082d382691365", "filename": "gcc/var-tracking.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8ab1d2e90f3e49593e490bc70199c4b97155f4ba/gcc%2Fvar-tracking.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8ab1d2e90f3e49593e490bc70199c4b97155f4ba/gcc%2Fvar-tracking.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvar-tracking.c?ref=8ab1d2e90f3e49593e490bc70199c4b97155f4ba", "patch": "@@ -1,6 +1,6 @@\n /* Variable tracking routines for the GNU compiler.\n-   Copyright (C) 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010, 2011, 2012\n-   Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010, 2011, 2012,\n+   2013 Free Software Foundation, Inc.\n \n    This file is part of GCC.\n \n@@ -5545,6 +5545,7 @@ reverse_op (rtx val, const_rtx expr, rtx insn)\n   cselib_val *v;\n   struct elt_loc_list *l;\n   enum rtx_code code;\n+  int count;\n \n   if (GET_CODE (expr) != SET)\n     return;\n@@ -5586,10 +5587,13 @@ reverse_op (rtx val, const_rtx expr, rtx insn)\n   /* Adding a reverse op isn't useful if V already has an always valid\n      location.  Ignore ENTRY_VALUE, while it is always constant, we should\n      prefer non-ENTRY_VALUE locations whenever possible.  */\n-  for (l = v->locs; l; l = l->next)\n+  for (l = v->locs, count = 0; l; l = l->next, count++)\n     if (CONSTANT_P (l->loc)\n \t&& (GET_CODE (l->loc) != CONST || !references_value_p (l->loc, 0)))\n       return;\n+    /* Avoid creating too large locs lists.  */\n+    else if (count == PARAM_VALUE (PARAM_MAX_VARTRACK_REVERSE_OP_SIZE))\n+      return;\n \n   switch (GET_CODE (src))\n     {"}]}