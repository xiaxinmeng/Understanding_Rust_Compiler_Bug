{"sha": "be5c4e06871958f2cbd7f091b6b123fb5ee94151", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmU1YzRlMDY4NzE5NThmMmNiZDdmMDkxYjZiMTIzZmI1ZWU5NDE1MQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2017-06-16T21:06:14Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2017-06-16T21:06:14Z"}, "message": "[arm] Rework multilib support\n\n\nIt looks like the fuchsia port relied on inheriting the multilib rules from\nthe bare-metal port (the t-arm-elf makefile fragment), but that has now been\nrewritten on the assuption that the base architecture is ARMv4t; fuchsia\nhas a base architecture of ARMv7-a.\n\nTo account for this, I've cloned the original t-arm-elf rules into a\nnew makefile fragment t-fuchsia and arranged for that to be used when\ntargetting this system.\n\n\t* config/arm/t-fuchsia: New file.\n\t* config.gcc (arm*-*-fuchsia*): Use it.\n\nFrom-SVN: r249305", "tree": {"sha": "518a3bf84169c51c523bdf46c1f22b6eea84a76c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/518a3bf84169c51c523bdf46c1f22b6eea84a76c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be5c4e06871958f2cbd7f091b6b123fb5ee94151", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be5c4e06871958f2cbd7f091b6b123fb5ee94151", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be5c4e06871958f2cbd7f091b6b123fb5ee94151", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be5c4e06871958f2cbd7f091b6b123fb5ee94151/comments", "author": null, "committer": null, "parents": [{"sha": "e61a3cdd259de13884da900ecb5440a9cc466665", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e61a3cdd259de13884da900ecb5440a9cc466665", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e61a3cdd259de13884da900ecb5440a9cc466665"}], "stats": {"total": 40, "additions": 39, "deletions": 1}, "files": [{"sha": "342458179e99896304c77bf508472acc8262dcde", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5c4e06871958f2cbd7f091b6b123fb5ee94151/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5c4e06871958f2cbd7f091b6b123fb5ee94151/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=be5c4e06871958f2cbd7f091b6b123fb5ee94151", "patch": "@@ -1,3 +1,8 @@\n+2017-06-16  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* config/arm/t-fuchsia: New file.\n+\t* config.gcc (arm*-*-fuchsia*): Use it.\n+\n 2017-06-16  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* config/arm/t-symbian: Rewrite for new option infrastructure."}, {"sha": "0518cb7b099824c226a8018e4bd24d45e982abcd", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5c4e06871958f2cbd7f091b6b123fb5ee94151/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5c4e06871958f2cbd7f091b6b123fb5ee94151/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=be5c4e06871958f2cbd7f091b6b123fb5ee94151", "patch": "@@ -1160,7 +1160,7 @@ arm*-*-eabi* | arm*-*-symbianelf* | arm*-*-rtems* | arm*-*-fuchsia*)\n \t  ;;\n \tarm*-*-fuchsia*)\n \t  tm_file=\"${tm_file} fuchsia.h arm/fuchsia-elf.h glibc-stdint.h\"\n-\t  tmake_file=\"${tmake_file} arm/t-bpabi\"\n+\t  tmake_file=\"${tmake_file} arm/t-bpabi arm/t-fuchsia\"\n \t  target_cpu_cname=\"generic-armv7-a\"\n \t  ;;\n \tarm*-*-rtems*)"}, {"sha": "18fc5181f6226feee8b3cc755954d72d87371996", "filename": "gcc/config/arm/t-fuchsia", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be5c4e06871958f2cbd7f091b6b123fb5ee94151/gcc%2Fconfig%2Farm%2Ft-fuchsia", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be5c4e06871958f2cbd7f091b6b123fb5ee94151/gcc%2Fconfig%2Farm%2Ft-fuchsia", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ft-fuchsia?ref=be5c4e06871958f2cbd7f091b6b123fb5ee94151", "patch": "@@ -0,0 +1,33 @@\n+# Copyright (C) 2017 Free Software Foundation, Inc.\n+#\n+# This file is part of GCC.\n+#\n+# GCC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# GCC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+# Reset all the multilib variables.\n+MULTILIB_OPTIONS\t=\n+MULTILIB_DIRNAMES\t=\n+MULTILIB_EXCEPTIONS\t=\n+MULTILIB_REUSE\t\t=\n+MULTILIB_MATCHES\t=\n+MULTILIB_REQUIRED\t=\n+\n+# For compatibility with gcc-7 we build the following multilibs\n+MULTILIB_OPTIONS\t+= marm/mthumb\n+MULTILIB_DIRNAMES\t+= arm thumb\n+\n+MULTILIB_OPTIONS\t+= mfloat-abi=hard\n+MULTILIB_DIRNAMES\t+= fpu\n+MULTILIB_EXCEPTIONS\t+= *mthumb/*mfloat-abi=hard*"}]}