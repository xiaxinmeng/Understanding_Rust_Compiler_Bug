{"sha": "38c3017f257484a6739e2fba821d95794f7f175c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhjMzAxN2YyNTc0ODRhNjczOWUyZmJhODIxZDk1Nzk0ZjdmMTc1Yw==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-03-29T21:54:01Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2020-04-08T07:08:16Z"}, "message": "libphobos: Always build with warning flags enabled\n\nThis moves WARN_DFLAGS from GDCFLAGS to AM_DFLAGS so it is always\nincluded in the build and testsuite of libphobos.  Currently, this\ndoesn't happen as GDCFLAGS is overriden by it being set at the\ntop-level.\n\nlibphobos/ChangeLog:\n\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\t* configure.ac: Substite WARN_DFLAGS independently of GDCFLAGS.\n\t* libdruntime/Makefile.am: Add WARN_DFLAGS to AM_DFLAGS.\n\t* libdruntime/Makefile.in: Regenerate.\n\t* src/Makefile.am: Add WARN_DFLAGS to AM_DFLAGS.\n\t* src/Makefile.in: Regenerate.\n\t* testsuite/Makefile.in: Regenerate.\n\t* testsuite/testsuite_flags.in: Add WARN_DFLAGS to --gdcflags.", "tree": {"sha": "0533df94a36e00c17f59d19a51782eeb690aae35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0533df94a36e00c17f59d19a51782eeb690aae35"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38c3017f257484a6739e2fba821d95794f7f175c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38c3017f257484a6739e2fba821d95794f7f175c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38c3017f257484a6739e2fba821d95794f7f175c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38c3017f257484a6739e2fba821d95794f7f175c/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "845d451e1f73d8a9a84382c3c6d4fca9c8220403", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/845d451e1f73d8a9a84382c3c6d4fca9c8220403", "html_url": "https://github.com/Rust-GCC/gccrs/commit/845d451e1f73d8a9a84382c3c6d4fca9c8220403"}], "stats": {"total": 55, "additions": 44, "deletions": 11}, "files": [{"sha": "a67f2283533a371a1ef898ca9450a6af183e2b51", "filename": "libphobos/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2FChangeLog?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -1,3 +1,15 @@\n+2020-04-08  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* Makefile.in: Regenerate.\n+\t* configure: Regenerate.\n+\t* configure.ac: Substite WARN_DFLAGS independently of GDCFLAGS.\n+\t* libdruntime/Makefile.am: Add WARN_DFLAGS to AM_DFLAGS.\n+\t* libdruntime/Makefile.in: Regenerate.\n+\t* src/Makefile.am: Add WARN_DFLAGS to AM_DFLAGS.\n+\t* src/Makefile.in: Regenerate.\n+\t* testsuite/Makefile.in: Regenerate.\n+\t* testsuite/testsuite_flags.in: Add WARN_DFLAGS to --gdcflags.\n+\n 2020-04-07  Robin Dapp  <rdapp@linux.ibm.com>\n \t    Stefan Liebler  <stli@linux.ibm.com>\n "}, {"sha": "98d35641a95ab2460660a4d8d7a38b31e6739395", "filename": "libphobos/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2FMakefile.in?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -272,6 +272,7 @@ SHELL = @SHELL@\n SPEC_PHOBOS_DEPS = @SPEC_PHOBOS_DEPS@\n STRIP = @STRIP@\n VERSION = @VERSION@\n+WARN_DFLAGS = @WARN_DFLAGS@\n abs_builddir = @abs_builddir@\n abs_srcdir = @abs_srcdir@\n abs_top_builddir = @abs_top_builddir@"}, {"sha": "65e32d88f4568b34a9466f0ffd0e0a3f89ced99b", "filename": "libphobos/configure", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fconfigure?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -633,6 +633,7 @@ ac_subst_vars='am__EXEEXT_FALSE\n am__EXEEXT_TRUE\n LTLIBOBJS\n LIBOBJS\n+WARN_DFLAGS\n GDCFLAGSX\n libtool_VERSION\n SPEC_PHOBOS_DEPS\n@@ -11648,7 +11649,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11651 \"configure\"\n+#line 11652 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11754,7 +11755,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11757 \"configure\"\n+#line 11758 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -15390,15 +15391,18 @@ libtool_VERSION=1:0:0\n \n # Set default flags (after DRUNTIME_WERROR!)\n if test -z \"$GDCFLAGS\"; then\n-    GDCFLAGS=\"-Wall $WERROR_FLAG -g -frelease -O2\"\n+    GDCFLAGS=\"-g -frelease -O2\"\n fi\n \n \n if test -z \"$GDCFLAGSX\"; then\n-    GDCFLAGSX=\"-Wall $WERROR_FLAG -g -fno-release -funittest\"\n+    GDCFLAGSX=\"-g -fno-release -funittest\"\n fi\n \n \n+WARN_DFLAGS=\"-Wall $WERROR_FLAG\"\n+\n+\n # Sanity check for the cross-compilation case:\n ac_fn_c_check_header_mongrel \"$LINENO\" \"stdio.h\" \"ac_cv_header_stdio_h\" \"$ac_includes_default\"\n if test \"x$ac_cv_header_stdio_h\" = xyes; then :"}, {"sha": "09e334d2045a27cb9bf81e977e3a62b6fdc8c6da", "filename": "libphobos/configure.ac", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fconfigure.ac?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -206,15 +206,18 @@ AC_SUBST(libtool_VERSION)\n \n # Set default flags (after DRUNTIME_WERROR!)\n if test -z \"$GDCFLAGS\"; then\n-    GDCFLAGS=\"-Wall $WERROR_FLAG -g -frelease -O2\"\n+    GDCFLAGS=\"-g -frelease -O2\"\n fi\n AC_SUBST(GDCFLAGS)\n \n if test -z \"$GDCFLAGSX\"; then\n-    GDCFLAGSX=\"-Wall $WERROR_FLAG -g -fno-release -funittest\"\n+    GDCFLAGSX=\"-g -fno-release -funittest\"\n fi\n AC_SUBST(GDCFLAGSX)\n \n+WARN_DFLAGS=\"-Wall $WERROR_FLAG\"\n+AC_SUBST(WARN_DFLAGS)\n+\n # Sanity check for the cross-compilation case:\n AC_CHECK_HEADER(stdio.h,:,\n   [AC_MSG_ERROR([cannot find stdio.h.])])"}, {"sha": "b7e4575e0f1698cc8a86bf0ee3e27d8231737e50", "filename": "libphobos/libdruntime/Makefile.am", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Flibdruntime%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Flibdruntime%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2FMakefile.am?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -22,7 +22,9 @@ include $(top_srcdir)/d_rules.am\n D_EXTRA_DFLAGS=-nostdinc -I $(srcdir) -I .\n \n # D flags for compilation\n-AM_DFLAGS=$(phobos_compiler_pic_flag)\n+AM_DFLAGS= \\\n+\t$(phobos_compiler_pic_flag) \\\n+\t$(WARN_DFLAGS)\n \n # Install all D and DI files\n ALL_DRUNTIME_INSTALL_DSOURCES = $(DRUNTIME_DSOURCES) \\"}, {"sha": "61dd0d496e3f58d81d6719bf0bdd808ce6b35a70", "filename": "libphobos/libdruntime/Makefile.in", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Flibdruntime%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Flibdruntime%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2FMakefile.in?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -620,6 +620,7 @@ SHELL = @SHELL@\n SPEC_PHOBOS_DEPS = @SPEC_PHOBOS_DEPS@\n STRIP = @STRIP@\n VERSION = @VERSION@\n+WARN_DFLAGS = @WARN_DFLAGS@\n abs_builddir = @abs_builddir@\n abs_srcdir = @abs_srcdir@\n abs_top_builddir = @abs_top_builddir@\n@@ -712,7 +713,10 @@ libgphobos_la_LINK = $(LIBTOOL) --tag=D $(libgphobos_la_LIBTOOLFLAGS) \\\n D_EXTRA_DFLAGS = -nostdinc -I $(srcdir) -I .\n \n # D flags for compilation\n-AM_DFLAGS = $(phobos_compiler_pic_flag)\n+AM_DFLAGS = \\\n+\t$(phobos_compiler_pic_flag) \\\n+\t$(WARN_DFLAGS)\n+\n \n # Install all D and DI files\n ALL_DRUNTIME_INSTALL_DSOURCES = $(DRUNTIME_DSOURCES) \\"}, {"sha": "5c17538613a095d881ee9b4cb65ece4536526c68", "filename": "libphobos/src/Makefile.am", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fsrc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fsrc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2FMakefile.am?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -23,7 +23,9 @@ D_EXTRA_DFLAGS=-nostdinc -I $(srcdir) \\\n \t-I $(top_srcdir)/libdruntime -I ../libdruntime -I .\n \n # D flags for compilation\n-AM_DFLAGS=$(phobos_compiler_pic_flag)\n+AM_DFLAGS= \\\n+\t$(phobos_compiler_pic_flag) \\\n+\t$(WARN_DFLAGS)\n \n # Install all D files\n ALL_PHOBOS_INSTALL_DSOURCES = $(PHOBOS_DSOURCES)"}, {"sha": "e58dafb5e7c11070912001a20846b12b34dcf083", "filename": "libphobos/src/Makefile.in", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2FMakefile.in?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -343,6 +343,7 @@ SHELL = @SHELL@\n SPEC_PHOBOS_DEPS = @SPEC_PHOBOS_DEPS@\n STRIP = @STRIP@\n VERSION = @VERSION@\n+WARN_DFLAGS = @WARN_DFLAGS@\n abs_builddir = @abs_builddir@\n abs_srcdir = @abs_srcdir@\n abs_top_builddir = @abs_top_builddir@\n@@ -437,7 +438,10 @@ D_EXTRA_DFLAGS = -nostdinc -I $(srcdir) \\\n \n \n # D flags for compilation\n-AM_DFLAGS = $(phobos_compiler_pic_flag)\n+AM_DFLAGS = \\\n+\t$(phobos_compiler_pic_flag) \\\n+\t$(WARN_DFLAGS)\n+\n \n # Install all D files\n ALL_PHOBOS_INSTALL_DSOURCES = $(PHOBOS_DSOURCES)"}, {"sha": "b70a996d95d3b4744de19f5d6c3fdff6c0d163a1", "filename": "libphobos/testsuite/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2FMakefile.in?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -216,6 +216,7 @@ SHELL = @SHELL@\n SPEC_PHOBOS_DEPS = @SPEC_PHOBOS_DEPS@\n STRIP = @STRIP@\n VERSION = @VERSION@\n+WARN_DFLAGS = @WARN_DFLAGS@\n abs_builddir = @abs_builddir@\n abs_srcdir = @abs_srcdir@\n abs_top_builddir = @abs_top_builddir@"}, {"sha": "990221a3d0f1ef34100178328bc978a7f626807d", "filename": "libphobos/testsuite/testsuite_flags.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Ftestsuite%2Ftestsuite_flags.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38c3017f257484a6739e2fba821d95794f7f175c/libphobos%2Ftestsuite%2Ftestsuite_flags.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2Ftestsuite_flags.in?ref=38c3017f257484a6739e2fba821d95794f7f175c", "patch": "@@ -28,7 +28,7 @@ case ${query} in\n       ;;\n     --gdcflags)\n       GDCFLAGS_default=\"-fmessage-length=0 -fno-show-column\"\n-      GDCFLAGS_config=\"@GDCFLAGSX@\"\n+      GDCFLAGS_config=\"@WARN_DFLAGS@ @GDCFLAGSX@\"\n       echo ${GDCFLAGS_default} ${GDCFLAGS_config}\n       ;;\n     --gdcpaths)"}]}