{"sha": "569f538b9d55c4cb780cf03df9357eb61139ba5a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTY5ZjUzOGI5ZDU1YzRjYjc4MGNmMDNkZjkzNTdlYjYxMTM5YmE1YQ==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2007-10-15T13:58:10Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2007-10-15T13:58:10Z"}, "message": "g-soccon-vms.ads: Fix value of MSG_WAITALL.\n\n2007-10-15  Thomas Quinot  <quinot@adacore.com>\n\n\t* g-soccon-vms.ads: Fix value of MSG_WAITALL.\n\n\t* gen-soccon.c: \n\tUpdate documentation to note that OpenVMS 8.3 or later must be used\n\tto generate g-soccon-vms.ads.\n\n\t* atree.adb: Add ??? comment\n\n\t* exp_util.adb: Minor reformatting.\n\tAdd ??? comment in Kill_Dead_Code.\n\nFrom-SVN: r129342", "tree": {"sha": "2491f6865c6cf9f65aa14d5a69bc3ca2ac376d9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2491f6865c6cf9f65aa14d5a69bc3ca2ac376d9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/569f538b9d55c4cb780cf03df9357eb61139ba5a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/569f538b9d55c4cb780cf03df9357eb61139ba5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/569f538b9d55c4cb780cf03df9357eb61139ba5a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/569f538b9d55c4cb780cf03df9357eb61139ba5a/comments", "author": null, "committer": null, "parents": [{"sha": "54df6fd99acba5240ebf37352511e37781dce633", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54df6fd99acba5240ebf37352511e37781dce633", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54df6fd99acba5240ebf37352511e37781dce633"}], "stats": {"total": 30, "additions": 20, "deletions": 10}, "files": [{"sha": "1e8b1ccf1eb15a2e6d01f47f083d3c7c66895fe7", "filename": "gcc/ada/atree.adb", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fatree.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fatree.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fatree.adb?ref=569f538b9d55c4cb780cf03df9357eb61139ba5a", "patch": "@@ -949,6 +949,8 @@ package body Atree is\n       Delete_Field (Field3 (Node));\n       Delete_Field (Field4 (Node));\n       Delete_Field (Field5 (Node));\n+\n+      --  ??? According to spec, Node itself should be deleted as well\n    end Delete_Tree;\n \n    -----------"}, {"sha": "dc181aa15866d1d6c38ee8f1a3fb703e91492bf4", "filename": "gcc/ada/exp_util.adb", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fexp_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fexp_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_util.adb?ref=569f538b9d55c4cb780cf03df9357eb61139ba5a", "patch": "@@ -3402,10 +3402,8 @@ package body Exp_Util is\n            or else Nkind (N) = N_Subprogram_Body\n            or else Nkind (N) = N_Package_Body\n          then\n-            Kill_Dead_Code\n-              (Declarations (N), False);\n-            Kill_Dead_Code\n-              (Statements (Handled_Statement_Sequence (N)));\n+            Kill_Dead_Code (Declarations (N), False);\n+            Kill_Dead_Code (Statements (Handled_Statement_Sequence (N)));\n \n             if Nkind (N) = N_Subprogram_Body then\n                Set_Is_Eliminated (Defining_Entity (N));\n@@ -3415,6 +3413,10 @@ package body Exp_Util is\n             Kill_Dead_Code (Visible_Declarations (Specification (N)));\n             Kill_Dead_Code (Private_Declarations (Specification (N)));\n \n+            --  ??? After this point, Delete_Tree has been called on all\n+            --  declarations in Specification (N), so references to\n+            --  entities therein look suspicious.\n+\n             declare\n                E : Entity_Id := First_Entity (Defining_Entity (N));\n             begin"}, {"sha": "a8aff61fc74c1d497aa6a7651ee4de116f34287c", "filename": "gcc/ada/g-soccon-vms.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fg-soccon-vms.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fg-soccon-vms.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-soccon-vms.ads?ref=569f538b9d55c4cb780cf03df9357eb61139ba5a", "patch": "@@ -138,7 +138,7 @@ package GNAT.Sockets.Constants is\n    MSG_OOB            : constant :=           1; --  Process out-of-band data\n    MSG_PEEK           : constant :=           2; --  Peek at incoming data\n    MSG_EOR            : constant :=           8; --  Send end of record\n-   MSG_WAITALL        : constant :=          64; --  Wait for full reception\n+   MSG_WAITALL        : constant :=         128; --  Wait for full reception\n    MSG_NOSIGNAL       : constant :=          -1; --  No SIGPIPE on send\n    MSG_Forced_Flags   : constant :=           0;\n    --  Flags set on all send(2) calls"}, {"sha": "79701bbad1029468e4306b6689acbeff44f64bf8", "filename": "gcc/ada/gen-soccon.c", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fgen-soccon.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/569f538b9d55c4cb780cf03df9357eb61139ba5a/gcc%2Fada%2Fgen-soccon.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgen-soccon.c?ref=569f538b9d55c4cb780cf03df9357eb61139ba5a", "patch": "@@ -24,11 +24,17 @@\n \n /* This program generates g-soccon.ads */\n \n-/* To build using DEC C:\n-  CC/DEFINE=\"TARGET=\"\"OpenVMS\"\"\" gen-soccon\n-  LINK gen-soccon\n-  RUN gen-soccon\n-*/\n+/*\n+ * To build using DEC C:\n+ *\n+ * CC/DEFINE=\"TARGET=\"\"OpenVMS\"\"\" gen-soccon\n+ * LINK gen-soccon\n+ * RUN gen-soccon\n+ *\n+ * Note: OpenVMS versions older than 8.3 provide an incorrect value in\n+ * the DEC C header files for MSG_WAITALL. To generate the VMS version\n+ * of g-soccon.ads, gen-soccon should be run on an 8.3 or later machine.\n+ */\n \n #ifndef TARGET\n # error Please define TARGET"}]}