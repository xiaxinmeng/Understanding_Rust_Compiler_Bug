{"sha": "c9640b919d6b96fc42820f7876292c3af260f030", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzk2NDBiOTE5ZDZiOTZmYzQyODIwZjc4NzYyOTJjM2FmMjYwZjAzMA==", "commit": {"author": {"name": "Jan Nijtmans", "email": "nijtmans@users.sourceforge.net", "date": "2007-06-28T19:35:25Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2007-06-28T19:35:25Z"}, "message": "re PR libgcj/30999 (support for GCC4.0's fvisibility option in JNIEXPORT macro)\n\n2007-06-28  Jan Nijtmans  <nijtmans@users.sourceforge.net>\n\n\tPR libgcj/30999:\n\t* jni_md.h: Add the possibility to compile jni code with.\n\t-fvisibility=hidden. This causes all symbols to be hidden\n\texcept the JNI functions which need to be exported.\n\nFrom-SVN: r126090", "tree": {"sha": "cd2487f380163aa8e77de5603d31de41e737e555", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd2487f380163aa8e77de5603d31de41e737e555"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9640b919d6b96fc42820f7876292c3af260f030", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9640b919d6b96fc42820f7876292c3af260f030", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9640b919d6b96fc42820f7876292c3af260f030", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9640b919d6b96fc42820f7876292c3af260f030/comments", "author": null, "committer": null, "parents": [{"sha": "83f4c19f6781c69d5dd8069118e86d4cd2653f4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83f4c19f6781c69d5dd8069118e86d4cd2653f4d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83f4c19f6781c69d5dd8069118e86d4cd2653f4d"}], "stats": {"total": 30, "additions": 20, "deletions": 10}, "files": [{"sha": "c6db9fb941324733c8e8a989e3c9c61e38e708c4", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9640b919d6b96fc42820f7876292c3af260f030/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9640b919d6b96fc42820f7876292c3af260f030/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=c9640b919d6b96fc42820f7876292c3af260f030", "patch": "@@ -1,3 +1,10 @@\n+2007-06-28  Jan Nijtmans  <nijtmans@users.sourceforge.net>\n+\n+\tPR libgcj/30999:\n+\t* jni_md.h: Add the possibility to compile jni code with.\n+\t-fvisibility=hidden. This causes all symbols to be hidden\n+\texcept the JNI functions which need to be exported.\n+\n 2007-06-28  Andreas Tobler  <a.tobler@schweiz.org>\n \n \t* testsuite/libjava.jvmti/jvmti-interp.exp (gij_jvmti_test_one): Pass"}, {"sha": "f806bac517989c3638c7ac21db18d1d152160387", "filename": "libjava/include/jni_md.h", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9640b919d6b96fc42820f7876292c3af260f030/libjava%2Finclude%2Fjni_md.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9640b919d6b96fc42820f7876292c3af260f030/libjava%2Finclude%2Fjni_md.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjni_md.h?ref=c9640b919d6b96fc42820f7876292c3af260f030", "patch": "@@ -124,6 +124,19 @@ typedef uint16_t jchar;\n \n #define JNICALL          __stdcall\n \n+#else /* !( _WIN32 || __WIN32__ || WIN32) */\n+\n+#define JNIIMPORT\n+#if defined(__GNUC__) && __GNUC__ > 3\n+#define JNIEXPORT __attribute__ ((visibility(\"default\")))\n+#else\n+#define JNIEXPORT\n+#endif\n+\n+#define JNICALL\n+\n+#endif /* !( _WIN32 || __WIN32__ || WIN32) */\n+\n /* These defines apply to symbols in libgcj */\n #ifdef __GCJ_DLL__\n # ifdef __GCJ_JNI_IMPL__\n@@ -135,14 +148,4 @@ typedef uint16_t jchar;\n # define _CLASSPATH_JNIIMPEXP\n #endif /*  __GCJ_DLL__ */\n \n-#else /* !( _WIN32 || __WIN32__ || WIN32) */\n-\n-#define JNIIMPORT\n-#define JNIEXPORT\n-#define JNICALL\n-#define _CLASSPATH_JNIIMPEXP\n-\n-#endif /* !( _WIN32 || __WIN32__ || WIN32) */\n-\n-\n #endif /* __GCJ_JNI_MD_H__ */"}]}