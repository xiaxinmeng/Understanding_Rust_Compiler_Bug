{"sha": "476013d60bccdca296731062ca8deced5c9c3e3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc2MDEzZDYwYmNjZGNhMjk2NzMxMDYyY2E4ZGVjZWQ1YzljM2UzYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-09-10T21:17:00Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-09-10T21:17:00Z"}, "message": "libgo: Use stat_atim.go on Solaris 12+\n    \n    From Rainer Orth.\n    \n    Solaris 12 changes the stat_[amc]tim members of struct stat from\n    timestruc_t to timespec_t for XPG7 compatiblity, thus breaking the libgo\n    build.  The following patch checks for this change and uses the common\n    stat_atim.go if appropriate.\n    \n    Reviewed-on: https://go-review.googlesource.com/14495\n\nFrom-SVN: r227665", "tree": {"sha": "0c52b22a5b1c8f42de2137e6e300136297897d88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c52b22a5b1c8f42de2137e6e300136297897d88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/476013d60bccdca296731062ca8deced5c9c3e3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/476013d60bccdca296731062ca8deced5c9c3e3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/476013d60bccdca296731062ca8deced5c9c3e3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/476013d60bccdca296731062ca8deced5c9c3e3a/comments", "author": null, "committer": null, "parents": [{"sha": "9a21c05d8d2a58a23782dbcedb4aa6df62282aa0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a21c05d8d2a58a23782dbcedb4aa6df62282aa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a21c05d8d2a58a23782dbcedb4aa6df62282aa0"}], "stats": {"total": 47, "additions": 43, "deletions": 4}, "files": [{"sha": "307348932604cfee4438188dae422f657d6923d4", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476013d60bccdca296731062ca8deced5c9c3e3a/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476013d60bccdca296731062ca8deced5c9c3e3a/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=476013d60bccdca296731062ca8deced5c9c3e3a", "patch": "@@ -1,4 +1,4 @@\n-7ba569544420d1de0eb607707ced6d23f8865186\n+9bac6243d2252b2d043243d6ab1123ba7e90fa53\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "cd1c51de72195a3a4a418d086d7c548f0bea7a06", "filename": "libgo/Makefile.am", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=476013d60bccdca296731062ca8deced5c9c3e3a", "patch": "@@ -880,7 +880,11 @@ endif\n endif\n \n if LIBGO_IS_SOLARIS\n+if HAVE_STAT_TIMESPEC\n+go_os_stat_file = go/os/stat_atim.go\n+else\n go_os_stat_file = go/os/stat_solaris.go\n+endif\n else\n if LIBGO_IS_LINUX\n go_os_stat_file = go/os/stat_atim.go"}, {"sha": "2eb6493091934d952d2b0ff2b4a19c286eb034db", "filename": "libgo/Makefile.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=476013d60bccdca296731062ca8deced5c9c3e3a", "patch": "@@ -1107,14 +1107,15 @@ go_netgo_files = \\\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@go_os_cloexec_file = go/os/sys_unix.go\n @LIBGO_IS_DARWIN_TRUE@@LIBGO_IS_FREEBSD_FALSE@go_os_cloexec_file = go/os/sys_darwin.go\n @LIBGO_IS_FREEBSD_TRUE@go_os_cloexec_file = go/os/sys_freebsd.go\n+@HAVE_STAT_TIMESPEC_FALSE@@LIBGO_IS_SOLARIS_TRUE@go_os_stat_file = go/os/stat_solaris.go\n+@HAVE_STAT_TIMESPEC_TRUE@@LIBGO_IS_SOLARIS_TRUE@go_os_stat_file = go/os/stat_atim.go\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_DRAGONFLY_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_OPENBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@go_os_stat_file = go/os/stat.go\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_DRAGONFLY_TRUE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_FALSE@@LIBGO_IS_OPENBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@go_os_stat_file = go/os/stat_dragonfly.go\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_FALSE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_NETBSD_TRUE@@LIBGO_IS_OPENBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@go_os_stat_file = go/os/stat_atimespec.go\n @LIBGO_IS_DARWIN_FALSE@@LIBGO_IS_FREEBSD_TRUE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_OPENBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@go_os_stat_file = go/os/stat_atimespec.go\n @LIBGO_IS_DARWIN_TRUE@@LIBGO_IS_LINUX_FALSE@@LIBGO_IS_OPENBSD_FALSE@@LIBGO_IS_SOLARIS_FALSE@go_os_stat_file = go/os/stat_atimespec.go\n @LIBGO_IS_LINUX_FALSE@@LIBGO_IS_OPENBSD_TRUE@@LIBGO_IS_SOLARIS_FALSE@go_os_stat_file = go/os/stat_atim.go\n @LIBGO_IS_LINUX_TRUE@@LIBGO_IS_SOLARIS_FALSE@go_os_stat_file = go/os/stat_atim.go\n-@LIBGO_IS_SOLARIS_TRUE@go_os_stat_file = go/os/stat_solaris.go\n @LIBGO_IS_LINUX_FALSE@go_os_pipe_file = go/os/pipe_bsd.go\n @LIBGO_IS_LINUX_TRUE@go_os_pipe_file = go/os/pipe_linux.go\n go_os_files = \\"}, {"sha": "617fe1581483494fd5d0d385c0c56d203d45b6c7", "filename": "libgo/configure", "status": "modified", "additions": 30, "deletions": 2, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=476013d60bccdca296731062ca8deced5c9c3e3a", "patch": "@@ -602,6 +602,8 @@ ac_subst_vars='am__EXEEXT_FALSE\n am__EXEEXT_TRUE\n LTLIBOBJS\n LIBOBJS\n+HAVE_STAT_TIMESPEC_FALSE\n+HAVE_STAT_TIMESPEC_TRUE\n STRUCT_EPOLL_EVENT_FD_OFFSET\n SIZEOF_STRUCT_EPOLL_EVENT\n MATH_FLAG\n@@ -11118,7 +11120,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11121 \"configure\"\n+#line 11123 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11224,7 +11226,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11227 \"configure\"\n+#line 11229 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -15076,6 +15078,28 @@ $as_echo \"$libgo_cv_c_epoll_event_fd_offset\" >&6; }\n STRUCT_EPOLL_EVENT_FD_OFFSET=${libgo_cv_c_epoll_event_fd_offset}\n \n \n+cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <sys/stat.h>\n+\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"timespec_t.*st_atim\" >/dev/null 2>&1; then :\n+  have_stat_timespec=yes\n+else\n+  have_stat_timespec=no\n+fi\n+rm -f conftest*\n+\n+ if test $have_stat_timespec = yes; then\n+  HAVE_STAT_TIMESPEC_TRUE=\n+  HAVE_STAT_TIMESPEC_FALSE='#'\n+else\n+  HAVE_STAT_TIMESPEC_TRUE='#'\n+  HAVE_STAT_TIMESPEC_FALSE=\n+fi\n+\n+\n ac_fn_c_check_type \"$LINENO\" \"struct exception\" \"ac_cv_type_struct_exception\" \"#include <math.h>\n \"\n if test \"x$ac_cv_type_struct_exception\" = x\"\"yes; then :\n@@ -15696,6 +15720,10 @@ if test -z \"${HAVE_WAIT4_TRUE}\" && test -z \"${HAVE_WAIT4_FALSE}\"; then\n   as_fn_error \"conditional \\\"HAVE_WAIT4\\\" was never defined.\n Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n fi\n+if test -z \"${HAVE_STAT_TIMESPEC_TRUE}\" && test -z \"${HAVE_STAT_TIMESPEC_FALSE}\"; then\n+  as_fn_error \"conditional \\\"HAVE_STAT_TIMESPEC\\\" was never defined.\n+Usually this means the macro was only invoked conditionally.\" \"$LINENO\" 5\n+fi\n \n : ${CONFIG_STATUS=./config.status}\n ac_write_fail=0"}, {"sha": "a175d46220d82eb75e2b32e80a359aef53dc352a", "filename": "libgo/configure.ac", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/476013d60bccdca296731062ca8deced5c9c3e3a/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=476013d60bccdca296731062ca8deced5c9c3e3a", "patch": "@@ -645,6 +645,12 @@ AC_CACHE_CHECK([epoll_event data.fd offset],\n STRUCT_EPOLL_EVENT_FD_OFFSET=${libgo_cv_c_epoll_event_fd_offset}\n AC_SUBST(STRUCT_EPOLL_EVENT_FD_OFFSET)\n \n+dnl Check if <sys/stat.h> uses timespec_t for st_?tim members.  Introduced\n+dnl in Solaris 12 for XPG7 compatibility.\n+AC_EGREP_HEADER([timespec_t.*st_atim], [sys/stat.h],\n+\t\t[have_stat_timespec=yes], [have_stat_timespec=no])\n+AM_CONDITIONAL(HAVE_STAT_TIMESPEC, test $have_stat_timespec = yes)\n+\n dnl See if struct exception is defined in <math.h>.\n AC_CHECK_TYPE([struct exception],\n [libgo_has_struct_exception=yes],"}]}