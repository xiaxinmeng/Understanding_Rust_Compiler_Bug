{"sha": "bc8642d6cef0782bc3181ade2ba577e53bcefc15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmM4NjQyZDZjZWYwNzgyYmMzMTgxYWRlMmJhNTc3ZTUzYmNlZmMxNQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2015-10-08T18:57:11Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2015-10-08T18:57:11Z"}, "message": "Round up the SSE register save area only if needed\n\nThere is is no point to round up the SSE register save area to 16 bytes if\nthe incoming stack boundary is less than 16 bytes.\n\n\t* config/i386/i386.c (ix86_compute_frame_layout): Round up the\n\tSSE register save area to 16 bytes only if the incoming stack\n\tboundary is no less than 16 bytes.\n\nFrom-SVN: r228621", "tree": {"sha": "845b51076e952216469c5e571cdda916683ab1b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/845b51076e952216469c5e571cdda916683ab1b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc8642d6cef0782bc3181ade2ba577e53bcefc15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc8642d6cef0782bc3181ade2ba577e53bcefc15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc8642d6cef0782bc3181ade2ba577e53bcefc15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc8642d6cef0782bc3181ade2ba577e53bcefc15/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d1acc3f4d2dbe3619f977f2cacca446bff74e1a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1acc3f4d2dbe3619f977f2cacca446bff74e1a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1acc3f4d2dbe3619f977f2cacca446bff74e1a7"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "428649149456d6d84437bbada6d172eef9254a93", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc8642d6cef0782bc3181ade2ba577e53bcefc15/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc8642d6cef0782bc3181ade2ba577e53bcefc15/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bc8642d6cef0782bc3181ade2ba577e53bcefc15", "patch": "@@ -1,3 +1,9 @@\n+2015-10-08  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config/i386/i386.c (ix86_compute_frame_layout): Round up the\n+\tSSE register save area to 16 bytes only if the incoming stack\n+\tboundary is no less than 16 bytes.\n+\n 2015-10-08  Jeff Law  <law@redhat.com>\n \n \t* tree-ssa-phiopt.c (factor_out_conversion): Add missing calls to"}, {"sha": "4806a7cffa2950fc6dc36f98174a0597d3f4f33b", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc8642d6cef0782bc3181ade2ba577e53bcefc15/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc8642d6cef0782bc3181ade2ba577e53bcefc15/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=bc8642d6cef0782bc3181ade2ba577e53bcefc15", "patch": "@@ -11383,9 +11383,14 @@ ix86_compute_frame_layout (struct ix86_frame *frame)\n   if (frame->nsseregs)\n     {\n       /* The only ABI that has saved SSE registers (Win64) also has a\n-         16-byte aligned default stack, and thus we don't need to be\n-\t within the re-aligned local stack frame to save them.  */\n-      offset = ROUND_UP (offset, 16);\n+\t 16-byte aligned default stack, and thus we don't need to be\n+\t within the re-aligned local stack frame to save them.  In case\n+\t incoming stack boundary is aligned to less than 16 bytes,\n+\t unaligned move of SSE register will be emitted, so there is\n+\t no point to round up the SSE register save area outside the\n+\t re-aligned local stack frame to 16 bytes.  */\n+      if (ix86_incoming_stack_boundary >= 128)\n+\toffset = ROUND_UP (offset, 16);\n       offset += frame->nsseregs * 16;\n     }\n   frame->sse_reg_save_offset = offset;"}]}