{"sha": "d18734b5adea54ddd004e51b8d2593752133596c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDE4NzM0YjVhZGVhNTRkZGQwMDRlNTFiOGQyNTkzNzUyMTMzNTk2Yw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-05-03T17:20:44Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-05-03T17:20:44Z"}, "message": "compiler: avoid crashing on invalid non-integer array length\n    \n    Tweak the array type checking code to avoid crashing on array types\n    whose length expressions are explicit non-integer types (for example,\n    \"float64(10)\"). If such constructs are seen, issue an \"invalid array\n    bound\" error.\n    \n    Fixes golang/go#13486.\n    \n    Reviewed-on: https://go-review.googlesource.com/91975\n\nFrom-SVN: r259900", "tree": {"sha": "ba9e4b659a522fbb2b33848a593ea9f541faf4bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba9e4b659a522fbb2b33848a593ea9f541faf4bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d18734b5adea54ddd004e51b8d2593752133596c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d18734b5adea54ddd004e51b8d2593752133596c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d18734b5adea54ddd004e51b8d2593752133596c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d18734b5adea54ddd004e51b8d2593752133596c/comments", "author": null, "committer": null, "parents": [{"sha": "4e0c5f944ebf4110ddb7ed8352f5bc80fcf0016e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e0c5f944ebf4110ddb7ed8352f5bc80fcf0016e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e0c5f944ebf4110ddb7ed8352f5bc80fcf0016e"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "614333d96d73ab45b2e45a5a90a71f100612873e", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d18734b5adea54ddd004e51b8d2593752133596c/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d18734b5adea54ddd004e51b8d2593752133596c/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=d18734b5adea54ddd004e51b8d2593752133596c", "patch": "@@ -1,4 +1,4 @@\n-e367bffce3d2c49b456fdf41ab097bded2bcbc3b\n+85ca682349af2cb1aa6b1eecac794aeb73d24f15\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "e5f84c51549c0ebd960fd6dd6aa0aa7a853abb4c", "filename": "gcc/go/gofrontend/types.cc", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d18734b5adea54ddd004e51b8d2593752133596c/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d18734b5adea54ddd004e51b8d2593752133596c/gcc%2Fgo%2Fgofrontend%2Ftypes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Ftypes.cc?ref=d18734b5adea54ddd004e51b8d2593752133596c", "patch": "@@ -7016,6 +7016,16 @@ Array_type::verify_length()\n       return false;\n     }\n \n+  // For array types, the length expression can be an untyped constant\n+  // representable as an int, but we don't allow explicitly non-integer\n+  // values such as \"float64(10)\". See issues #13485 and #13486.\n+  if (this->length_->type()->integer_type() == NULL\n+      && !this->length_->type()->is_error_type())\n+    {\n+      go_error_at(this->length_->location(), \"invalid array bound\");\n+      return false;\n+    }\n+\n   Numeric_constant nc;\n   if (!this->length_->numeric_constant_value(&nc))\n     {"}]}