{"sha": "d05ba2205fc7af481d806eab41773f970ad305cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDA1YmEyMjA1ZmM3YWY0ODFkODA2ZWFiNDE3NzNmOTcwYWQzMDVjZg==", "commit": {"author": {"name": "Melissa O'Neill", "email": "oneill@cs.sfu.ca", "date": "1999-05-26T03:04:27Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-05-26T03:04:27Z"}, "message": "getcwd.c (getcwd): If pathname is NULL, then obtain SIZE bytes of space using malloc.\n\nP\n        * getcwd.c (getcwd): If pathname is NULL, then obtain SIZE\n        bytes of space using malloc.\n\nFrom-SVN: r27161", "tree": {"sha": "6822279f8afade103f7210691eba8da4d1507573", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6822279f8afade103f7210691eba8da4d1507573"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d05ba2205fc7af481d806eab41773f970ad305cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d05ba2205fc7af481d806eab41773f970ad305cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d05ba2205fc7af481d806eab41773f970ad305cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d05ba2205fc7af481d806eab41773f970ad305cf/comments", "author": null, "committer": null, "parents": [{"sha": "71cce721af1a8d2e5f9c9508982c35996cdd940e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71cce721af1a8d2e5f9c9508982c35996cdd940e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71cce721af1a8d2e5f9c9508982c35996cdd940e"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "47b1c1eec31e1c680bbb5deb42efb07e84f6a3f6", "filename": "libiberty/getcwd.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d05ba2205fc7af481d806eab41773f970ad305cf/libiberty%2Fgetcwd.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d05ba2205fc7af481d806eab41773f970ad305cf/libiberty%2Fgetcwd.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fgetcwd.c?ref=d05ba2205fc7af481d806eab41773f970ad305cf", "patch": "@@ -14,6 +14,9 @@ DESCRIPTION\n \tcurrent directory's path doesn't fit in LEN characters, the result\n \tis NULL and errno is set.\n \n+\tIf pathname is a null pointer, getcwd() will obtain size bytes of\n+\tspace using malloc.\n+\n BUGS\n \tEmulated via the getwd() call, which is reasonable for most\n \tsystems that do not have getcwd().\n@@ -48,6 +51,13 @@ getcwd (buf, len)\n       errno = ERANGE;\n       return 0;\n     }\n+    if (!buf) {\n+       buf = (char*)malloc(len);\n+       if (!buf) {\n+           errno = ENOMEM;\n+\t   return 0;\n+       }\n+    }\n     strcpy (buf, ourbuf);\n   }\n   return buf;"}]}