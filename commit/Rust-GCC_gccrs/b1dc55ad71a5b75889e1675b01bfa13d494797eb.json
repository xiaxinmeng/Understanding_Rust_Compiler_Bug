{"sha": "b1dc55ad71a5b75889e1675b01bfa13d494797eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjFkYzU1YWQ3MWE1Yjc1ODg5ZTE2NzViMDFiZmExM2Q0OTQ3OTdlYg==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2014-04-22T19:28:43Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2014-04-22T19:28:43Z"}, "message": "re PR fortran/60881 (ICE on dummy argument that extends a type with scalar and scalar coarry components)\n\n2014-04-22  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/60881\n        * trans-expr.c (gfc_trans_subcomponent_assign): Fix handling\n        of scalar coarrays.\n\n2014-04-22  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/60881\n        * coarray/alloc_comp_3.f90: New.\n\nFrom-SVN: r209657", "tree": {"sha": "1d1c0342cdbc11049820c6a53b65a0c4555fe50f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1d1c0342cdbc11049820c6a53b65a0c4555fe50f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b1dc55ad71a5b75889e1675b01bfa13d494797eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1dc55ad71a5b75889e1675b01bfa13d494797eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1dc55ad71a5b75889e1675b01bfa13d494797eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1dc55ad71a5b75889e1675b01bfa13d494797eb/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4a980bdc6e409179867c246b69c0782dd62f7502", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a980bdc6e409179867c246b69c0782dd62f7502", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a980bdc6e409179867c246b69c0782dd62f7502"}], "stats": {"total": 40, "additions": 38, "deletions": 2}, "files": [{"sha": "427c9b15ad85ad28aeb3291d39c355cf805dfdc7", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b1dc55ad71a5b75889e1675b01bfa13d494797eb", "patch": "@@ -1,3 +1,9 @@\n+2014-04-22  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/60881\n+\t* trans-expr.c (gfc_trans_subcomponent_assign): Fix handling\n+\tof scalar coarrays.\n+\n 2014-04-17  Jakub Jelinek  <jakub@redhat.com>\n \n \t* trans-types.c (gfc_init_kinds): Make sure GET_MODE_BITSIZE"}, {"sha": "d6f820c491589c6ec1cc89e16120362d5e02a06f", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=b1dc55ad71a5b75889e1675b01bfa13d494797eb", "patch": "@@ -5989,7 +5989,8 @@ gfc_trans_subcomponent_assign (tree dest, gfc_component * cm, gfc_expr * expr)\n     {\n       gfc_init_se (&se, NULL);\n       /* Pointer component.  */\n-      if (cm->attr.dimension && !cm->attr.proc_pointer)\n+      if ((cm->attr.dimension || cm->attr.codimension)\n+\t  && !cm->attr.proc_pointer)\n \t{\n \t  /* Array pointer.  */\n \t  if (expr->expr_type == EXPR_NULL)\n@@ -6026,7 +6027,8 @@ gfc_trans_subcomponent_assign (tree dest, gfc_component * cm, gfc_expr * expr)\n \t\t\t\t\tgfc_class_initializer (&cm->ts, expr));\n       gfc_add_expr_to_block (&block, tmp);\n     }\n-  else if (cm->attr.dimension && !cm->attr.proc_pointer)\n+  else if ((cm->attr.dimension || cm->attr.codimension)\n+\t   && !cm->attr.proc_pointer)\n     {\n       if (cm->attr.allocatable && expr->expr_type == EXPR_NULL)\n  \tgfc_conv_descriptor_data_set (&block, dest, null_pointer_node);"}, {"sha": "9d0ef96d93a261b9caaba6676e650bbb8f0a1e2c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b1dc55ad71a5b75889e1675b01bfa13d494797eb", "patch": "@@ -1,3 +1,8 @@\n+2014-04-22  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/60881\n+\t* coarray/alloc_comp_3.f90: New.\n+\n 2014-04-22  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/60868"}, {"sha": "cf2d54203287dba2fe12db982cc349105b31abb2", "filename": "gcc/testsuite/gfortran.dg/coarray/alloc_comp_3.f90", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Falloc_comp_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b1dc55ad71a5b75889e1675b01bfa13d494797eb/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Falloc_comp_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Falloc_comp_3.f90?ref=b1dc55ad71a5b75889e1675b01bfa13d494797eb", "patch": "@@ -0,0 +1,23 @@\n+! { dg-do compile }\n+!\n+! PR fortran/60881\n+!\n+! Contributed by Damian Rouson\n+!\n+! Was ICEing before\n+!\n+program main\n+  implicit none\n+  type co_object\n+    logical :: defined=.false.\n+    real, allocatable :: dummy_to_facilitate_extension[:]\n+  end type\n+  type, extends(co_object) :: global_field\n+  end type\n+  type(global_field) T\n+  call assign_local_field(T)\n+contains\n+  subroutine assign_local_field(lhs)\n+    type(global_field) lhs\n+  end subroutine\n+end program"}]}