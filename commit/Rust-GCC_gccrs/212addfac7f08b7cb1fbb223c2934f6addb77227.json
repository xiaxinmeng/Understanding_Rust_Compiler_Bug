{"sha": "212addfac7f08b7cb1fbb223c2934f6addb77227", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjEyYWRkZmFjN2YwOGI3Y2IxZmJiMjIzYzI5MzRmNmFkZGI3NzIyNw==", "commit": {"author": {"name": "Jeffrey Oldham", "email": "oldham@codesourcery.com", "date": "2000-12-28T19:35:56Z"}, "committer": {"name": "Jeffrey D. Oldham", "email": "oldham@gcc.gnu.org", "date": "2000-12-28T19:35:56Z"}, "message": "varasm.c (initializer_constant_valid_p): Indicate subtraction of pointers to the same string constant is absolute.\n\n2000-12-28  Jeffrey Oldham  <oldham@codesourcery.com>\n\n\t* varasm.c (initializer_constant_valid_p): Indicate subtraction of\n\tpointers to the same string constant is absolute.\n\nFrom-SVN: r38514", "tree": {"sha": "21b4d104e3a6523b2bdf308b6a38174f6e35b602", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/21b4d104e3a6523b2bdf308b6a38174f6e35b602"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/212addfac7f08b7cb1fbb223c2934f6addb77227", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/212addfac7f08b7cb1fbb223c2934f6addb77227", "html_url": "https://github.com/Rust-GCC/gccrs/commit/212addfac7f08b7cb1fbb223c2934f6addb77227", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/212addfac7f08b7cb1fbb223c2934f6addb77227/comments", "author": null, "committer": null, "parents": [{"sha": "5da01bc1fbefacc99f7e4cd271583ee4e3c56bcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5da01bc1fbefacc99f7e4cd271583ee4e3c56bcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5da01bc1fbefacc99f7e4cd271583ee4e3c56bcb"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "3230e138815cafbc2e1b15e1b093c995565ca0d4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/212addfac7f08b7cb1fbb223c2934f6addb77227/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/212addfac7f08b7cb1fbb223c2934f6addb77227/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=212addfac7f08b7cb1fbb223c2934f6addb77227", "patch": "@@ -1,3 +1,8 @@\n+2000-12-28  Jeffrey Oldham  <oldham@codesourcery.com>\n+\n+\t* varasm.c (initializer_constant_valid_p): Indicate subtraction of\n+\tpointers to the same string constant is absolute.\n+\n 2000-12-28  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* c-common.c (enum format_type): Add strfmon_format_type."}, {"sha": "8f76f45f7192eee94f3444c3362476eea4029129", "filename": "gcc/varasm.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/212addfac7f08b7cb1fbb223c2934f6addb77227/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/212addfac7f08b7cb1fbb223c2934f6addb77227/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=212addfac7f08b7cb1fbb223c2934f6addb77227", "patch": "@@ -4252,6 +4252,14 @@ initializer_constant_valid_p (value, endtype)\n \t     Then the value is absolute.  */\n \t  if (valid0 == valid1 && valid0 != 0)\n \t    return null_pointer_node;\n+\n+\t  /* Since GCC guarantees that string constants are unique in the\n+\t     generated code, a subtraction between two copies of the same\n+\t     constant string is absolute.  */\n+\t  if (valid0 && TREE_CODE (valid0) == STRING_CST &&\n+\t      valid1 && TREE_CODE (valid1) == STRING_CST &&\n+\t      TREE_STRING_POINTER (valid0) == TREE_STRING_POINTER (valid1))\n+\t    return null_pointer_node;\n \t}\n \n       /* Support differences between labels.  */"}]}