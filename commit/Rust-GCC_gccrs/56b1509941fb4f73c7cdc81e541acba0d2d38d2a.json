{"sha": "56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTZiMTUwOTk0MWZiNGY3M2M3Y2RjODFlNTQxYWNiYTBkMmQzOGQyYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-02-27T15:53:15Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-02-27T15:53:15Z"}, "message": "re PR target/52375 (internal compiler error: in extract_insn, at recog.c:2123 at -O3 -mfpu=neon)\n\n\tPR target/52375\n\t* config/arm/neon.md (vashr<mode>3, vlshr<mode>3): Use\n\ts_register_operand in the test instead of REG_P.  Don't call\n\tgen_reg_rtx if it won't be used.\n\n\t* gcc.target/arm/pr52375.c: New test.\n\t* gcc.c-torture/compile/pr52375.c: New test.\n\nFrom-SVN: r184603", "tree": {"sha": "247a252395048e6449c77cf2815f2df2420cb8b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/247a252395048e6449c77cf2815f2df2420cb8b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0d6d338f5bf4846b4a5b11256b5ca506a9a5fdba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d6d338f5bf4846b4a5b11256b5ca506a9a5fdba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d6d338f5bf4846b4a5b11256b5ca506a9a5fdba"}], "stats": {"total": 46, "additions": 42, "deletions": 4}, "files": [{"sha": "0406ed24da0df50c8ab9adc1585692b737b82553", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "patch": "@@ -1,5 +1,10 @@\n 2012-02-27  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR target/52375\n+\t* config/arm/neon.md (vashr<mode>3, vlshr<mode>3): Use\n+\ts_register_operand in the test instead of REG_P.  Don't call\n+\tgen_reg_rtx if it won't be used.\n+\n \tPR tree-optimization/52376\n \t* ipa-split.c (split_function): Ignore CLOBBER stmts.\n "}, {"sha": "e0d6a0cc10c6b666c6b45554ccb19070ad647936", "filename": "gcc/config/arm/neon.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Fconfig%2Farm%2Fneon.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Fconfig%2Farm%2Fneon.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fneon.md?ref=56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "patch": "@@ -1064,9 +1064,9 @@\n \t\t\t(match_operand:VDQIW 2 \"imm_rshift_or_reg_neon\" \"\")))]\n   \"TARGET_NEON\"\n {\n-  rtx neg = gen_reg_rtx (<MODE>mode);\n-  if (REG_P (operands[2]))\n+  if (s_register_operand (operands[2], <MODE>mode))\n     {\n+      rtx neg = gen_reg_rtx (<MODE>mode);\n       emit_insn (gen_neg<mode>2 (neg, operands[2]));\n       emit_insn (gen_ashl<mode>3_signed (operands[0], operands[1], neg));\n     }\n@@ -1081,9 +1081,9 @@\n \t\t\t(match_operand:VDQIW 2 \"imm_rshift_or_reg_neon\" \"\")))]\n   \"TARGET_NEON\"\n {\n-  rtx neg = gen_reg_rtx (<MODE>mode);\n-  if (REG_P (operands[2]))\n+  if (s_register_operand (operands[2], <MODE>mode))\n     {\n+      rtx neg = gen_reg_rtx (<MODE>mode);\n       emit_insn (gen_neg<mode>2 (neg, operands[2]));\n       emit_insn (gen_ashl<mode>3_unsigned (operands[0], operands[1], neg));\n     }"}, {"sha": "5c9f70cf3c2de7e12613bc5b9d9bd2d6bf7f0da1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "patch": "@@ -1,3 +1,9 @@\n+2012-02-27  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/52375\n+\t* gcc.target/arm/pr52375.c: New test.\n+\t* gcc.c-torture/compile/pr52375.c: New test.\n+\n 2012-02-27  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \t* gfortran.dg/typebound_operator_9.f03: Skip on SPU."}, {"sha": "e6877bb11faa9438be8d8b463d21c9ebf458782d", "filename": "gcc/testsuite/gcc.c-torture/compile/pr52375.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr52375.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr52375.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr52375.c?ref=56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "patch": "@@ -0,0 +1,12 @@\n+/* PR target/52375 */\n+\n+struct C { int c, d; };\n+\n+unsigned\n+foo (struct C *p)\n+{\n+  unsigned int b = 0, i;\n+  for (i = 0; i < 64; i++)\n+    b |= 0x80000000U >> p[i].c;\n+  return b;\n+}"}, {"sha": "0405c6685f62220c7147dbd559c78ceae197dd58", "filename": "gcc/testsuite/gcc.target/arm/pr52375.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr52375.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56b1509941fb4f73c7cdc81e541acba0d2d38d2a/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr52375.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr52375.c?ref=56b1509941fb4f73c7cdc81e541acba0d2d38d2a", "patch": "@@ -0,0 +1,15 @@\n+/* PR target/52375 */\n+/* { dg-do compile } */\n+/* { dg-require-effective-target arm_neon_ok } */\n+/* { dg-options \"-march=armv7-a -mfloat-abi=hard -mfpu=neon -O -ftree-vectorize\" } */\n+\n+struct C { int c, d; };\n+\n+unsigned\n+foo (struct C *p)\n+{\n+  unsigned int b = 0, i;\n+  for (i = 0; i < 64; i++)\n+    b |= 0x80000000U >> p[i].c;\n+  return b;\n+}"}]}