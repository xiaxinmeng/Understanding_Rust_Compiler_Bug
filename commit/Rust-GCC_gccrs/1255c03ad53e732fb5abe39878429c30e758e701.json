{"sha": "1255c03ad53e732fb5abe39878429c30e758e701", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTI1NWMwM2FkNTNlNzMyZmI1YWJlMzk4Nzg0MjljMzBlNzU4ZTcwMQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2011-09-06T10:02:41Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2011-09-06T10:02:41Z"}, "message": "recog.c (asm_labels_ok): New function.\n\n2011-09-06  Tom de Vries  <tom@codesourcery.com>\n\n\t* recog.c (asm_labels_ok): New function.\n\t(check_asm_operands): Use asm_labels_ok.\n\nFrom-SVN: r178580", "tree": {"sha": "7bfad37c59195cfe748e3c0016b11f6589952ce4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7bfad37c59195cfe748e3c0016b11f6589952ce4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1255c03ad53e732fb5abe39878429c30e758e701", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1255c03ad53e732fb5abe39878429c30e758e701", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1255c03ad53e732fb5abe39878429c30e758e701", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1255c03ad53e732fb5abe39878429c30e758e701/comments", "author": null, "committer": null, "parents": [{"sha": "df1771759c3df941c6bbf0fc991f4937ac64bf68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df1771759c3df941c6bbf0fc991f4937ac64bf68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df1771759c3df941c6bbf0fc991f4937ac64bf68"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "a88e2dc91adce6a709bfbd5b0d7a27408b72a678", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1255c03ad53e732fb5abe39878429c30e758e701/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1255c03ad53e732fb5abe39878429c30e758e701/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1255c03ad53e732fb5abe39878429c30e758e701", "patch": "@@ -1,3 +1,8 @@\n+2011-09-06  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* recog.c (asm_labels_ok): New function.\n+\t(check_asm_operands): Use asm_labels_ok.\n+\n 2011-09-05  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \tPR target/49606"}, {"sha": "d3ecb73c4e8fa5e52d14ee4473035a32509dc1b9", "filename": "gcc/recog.c", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1255c03ad53e732fb5abe39878429c30e758e701/gcc%2Frecog.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1255c03ad53e732fb5abe39878429c30e758e701/gcc%2Frecog.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frecog.c?ref=1255c03ad53e732fb5abe39878429c30e758e701", "patch": "@@ -118,6 +118,25 @@ init_recog (void)\n }\n \n \f\n+/* Return true if labels in asm operands BODY are LABEL_REFs.  */\n+\n+static bool\n+asm_labels_ok (rtx body)\n+{\n+  rtx asmop;\n+  int i;\n+\n+  asmop = extract_asm_operands (body);\n+  if (asmop == NULL_RTX)\n+    return true;\n+\n+  for (i = 0; i < ASM_OPERANDS_LABEL_LENGTH (asmop); i++)\n+    if (GET_CODE (ASM_OPERANDS_LABEL (asmop, i)) != LABEL_REF)\n+      return false;\n+\n+  return true;\n+}\n+\n /* Check that X is an insn-body for an `asm' with operands\n    and that the operands mentioned in it are legitimate.  */\n \n@@ -129,6 +148,9 @@ check_asm_operands (rtx x)\n   const char **constraints;\n   int i;\n \n+  if (!asm_labels_ok (x))\n+    return 0;\n+\n   /* Post-reload, be more strict with things.  */\n   if (reload_completed)\n     {"}]}