{"sha": "083385aae90eb4dff408962df34a096b846e081f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDgzMzg1YWFlOTBlYjRkZmY0MDg5NjJkZjM0YTA5NmI4NDZlMDgxZg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-07-08T22:03:57Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-07-08T22:03:57Z"}, "message": "builtins.c (ind_gimplify_va_arg_expr): New.\n\n        * builtins.c (ind_gimplify_va_arg_expr): New.\n        * tree.h (ind_gimplify_va_arg_expr): Declare.\n        * config/arc/arc.c (arc_gimplify_va_arg_expr): Use it.\n\nFrom-SVN: r84317", "tree": {"sha": "a767064497309389e5b9a155da821ede45ddfd78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a767064497309389e5b9a155da821ede45ddfd78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/083385aae90eb4dff408962df34a096b846e081f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/083385aae90eb4dff408962df34a096b846e081f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/083385aae90eb4dff408962df34a096b846e081f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/083385aae90eb4dff408962df34a096b846e081f/comments", "author": null, "committer": null, "parents": [{"sha": "b42271d678018c9ff96567aada65f46d2586b54d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b42271d678018c9ff96567aada65f46d2586b54d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b42271d678018c9ff96567aada65f46d2586b54d"}], "stats": {"total": 24, "additions": 19, "deletions": 5}, "files": [{"sha": "18a2b3a8c765a81c0388aacb44e66d69a9a2d6e8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083385aae90eb4dff408962df34a096b846e081f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083385aae90eb4dff408962df34a096b846e081f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=083385aae90eb4dff408962df34a096b846e081f", "patch": "@@ -1,3 +1,9 @@\n+2004-07-08  Richard Henderson  <rth@redhat.com>\n+\n+\t* builtins.c (ind_gimplify_va_arg_expr): New.\n+\t* tree.h (ind_gimplify_va_arg_expr): Declare.\n+\t* config/arc/arc.c (arc_gimplify_va_arg_expr): Use it.\n+\n 2004-07-08  Jan Beulich  <jbeulich@novell.com>\n \n \t* expmed.c (extract_bit_field): Correct condition to use vec_extract"}, {"sha": "c620d44eeac4c0212cc23404cf2c05d0faf4e180", "filename": "gcc/builtins.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083385aae90eb4dff408962df34a096b846e081f/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083385aae90eb4dff408962df34a096b846e081f/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=083385aae90eb4dff408962df34a096b846e081f", "patch": "@@ -4549,6 +4549,17 @@ std_gimplify_va_arg_expr (tree valist, tree type, tree *pre_p, tree *post_p)\n   return build_fold_indirect_ref (addr);\n }\n \n+/* Like std_gimplify_va_arg_expr, but uses pass-by-reference.  */\n+ \n+tree\n+ind_gimplify_va_arg_expr (tree valist, tree type, tree *pre_p, tree *post_p)\n+{\n+  tree t;\n+  t = build_pointer_type (type);\n+  t = std_gimplify_va_arg_expr (valist, t, pre_p, post_p);\n+  return build_fold_indirect_ref (t);\n+}\n+\n /* Return a dummy expression of type TYPE in order to keep going after an\n    error.  */\n "}, {"sha": "6c3da47438e11ed8684f415979d02ad557b9e7e5", "filename": "gcc/config/arc/arc.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083385aae90eb4dff408962df34a096b846e081f/gcc%2Fconfig%2Farc%2Farc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083385aae90eb4dff408962df34a096b846e081f/gcc%2Fconfig%2Farc%2Farc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Farc.c?ref=083385aae90eb4dff408962df34a096b846e081f", "patch": "@@ -2299,11 +2299,7 @@ arc_gimplify_va_arg_expr (tree valist, tree type, tree *pre_p, tree *post_p)\n      than 8 bytes are passed by reference.  */\n \n   if (AGGREGATE_TYPE_P (type) || int_size_in_bytes (type) > 8)\n-    {\n-      tree type_ptr = build_pointer_type (type);\n-      tree addr = std_gimplify_va_arg_expr (valist, type_ptr, pre_p, post_p);\n-      return build_fold_indirect_ref (addr);\n-    }\n+    return ind_gimplify_va_arg_expr (valist, type, pre_p, post_p);\n \n   return std_gimplify_va_arg_expr (valist, type, pre_p, post_p);\n }"}, {"sha": "af3d1d596e2f64f9273184bedfa3336b02800e25", "filename": "gcc/tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083385aae90eb4dff408962df34a096b846e081f/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083385aae90eb4dff408962df34a096b846e081f/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=083385aae90eb4dff408962df34a096b846e081f", "patch": "@@ -3434,6 +3434,7 @@ extern tree strip_float_extensions (tree);\n extern tree simplify_builtin (tree, int);\n extern tree c_strlen (tree, int);\n extern tree std_gimplify_va_arg_expr (tree, tree, tree *, tree *);\n+extern tree ind_gimplify_va_arg_expr (tree, tree, tree *, tree *);\n \n /* In convert.c */\n extern tree strip_float_extensions (tree);"}]}