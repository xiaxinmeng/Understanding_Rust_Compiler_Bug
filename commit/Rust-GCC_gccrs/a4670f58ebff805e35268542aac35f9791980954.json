{"sha": "a4670f58ebff805e35268542aac35f9791980954", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTQ2NzBmNThlYmZmODA1ZTM1MjY4NTQyYWFjMzVmOTc5MTk4MDk1NA==", "commit": {"author": {"name": "Vladimir N. Makarov", "email": "vmakarov@redhat.com", "date": "2021-03-18T19:58:26Z"}, "committer": {"name": "Vladimir N. Makarov", "email": "vmakarov@redhat.com", "date": "2021-03-18T19:59:15Z"}, "message": "[PR99422] LRA: Use lookup_constraint only for a single constraint in process_address_1.\n\nThis is an additional patch for PR99422.  In process_address_1 we\nlook only at the first constraint in the 1st alternative\nand ignore all other possibilities.  As we don't know what\nalternative and constraint will be used at this stage, we can be sure\nonly for a single constraint with one alternative and should use unknown\nconstraint for all other cases.\n\ngcc/ChangeLog:\n\n\tPR target/99422\n\t* lra-constraints.c (process_address_1): Use lookup_constraint\n\tonly for a single constraint.", "tree": {"sha": "6e64b3485f422e51ff2fa34b9b6060f50f3cf3ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e64b3485f422e51ff2fa34b9b6060f50f3cf3ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a4670f58ebff805e35268542aac35f9791980954", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4670f58ebff805e35268542aac35f9791980954", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a4670f58ebff805e35268542aac35f9791980954", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a4670f58ebff805e35268542aac35f9791980954/comments", "author": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vnmakarov", "id": 9855671, "node_id": "MDQ6VXNlcjk4NTU2NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9855671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmakarov", "html_url": "https://github.com/vnmakarov", "followers_url": "https://api.github.com/users/vnmakarov/followers", "following_url": "https://api.github.com/users/vnmakarov/following{/other_user}", "gists_url": "https://api.github.com/users/vnmakarov/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmakarov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmakarov/subscriptions", "organizations_url": "https://api.github.com/users/vnmakarov/orgs", "repos_url": "https://api.github.com/users/vnmakarov/repos", "events_url": "https://api.github.com/users/vnmakarov/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmakarov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30b10dacd0a8c926c22eab7d4aeb52ff86534acf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30b10dacd0a8c926c22eab7d4aeb52ff86534acf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30b10dacd0a8c926c22eab7d4aeb52ff86534acf"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "64801b6fccedb003230444d915cce4d6334b6b15", "filename": "gcc/lra-constraints.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a4670f58ebff805e35268542aac35f9791980954/gcc%2Flra-constraints.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a4670f58ebff805e35268542aac35f9791980954/gcc%2Flra-constraints.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flra-constraints.c?ref=a4670f58ebff805e35268542aac35f9791980954", "patch": "@@ -3459,7 +3459,12 @@ process_address_1 (int nop, bool check_only_p,\n       constraint\n \t= skip_contraint_modifiers (curr_static_id->operand[dup].constraint);\n     }\n-  cn = lookup_constraint (*constraint == '\\0' ? \"X\" : constraint);\n+  if (*skip_contraint_modifiers (constraint\n+\t\t\t\t + CONSTRAINT_LEN (constraint[0],\n+\t\t\t\t\t\t   constraint)) != '\\0')\n+    cn = CONSTRAINT__UNKNOWN;\n+  else\n+    cn = lookup_constraint (*constraint == '\\0' ? \"X\" : constraint);\n   if (insn_extra_address_constraint (cn)\n       /* When we find an asm operand with an address constraint that\n \t doesn't satisfy address_operand to begin with, we clear"}]}