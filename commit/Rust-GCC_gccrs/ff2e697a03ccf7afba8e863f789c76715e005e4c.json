{"sha": "ff2e697a03ccf7afba8e863f789c76715e005e4c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmYyZTY5N2EwM2NjZjdhZmJhOGU4NjNmNzg5Yzc2NzE1ZTAwNWU0Yw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2011-03-25T10:06:33Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2011-03-25T10:06:33Z"}, "message": "random.h (negative_binomial_distribution<>:: negative_binomial_distribution(_IntType, double), [...]): Tweak construction of _M_gd.\n\n2011-03-25  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* include/bits/random.h (negative_binomial_distribution<>::\n\tnegative_binomial_distribution(_IntType, double),\n\tnegative_binomial_distribution<>::\n\tnegative_binomial_distribution(const param_type&)): Tweak\n\tconstruction of _M_gd.\n\t* include/bits/random.tcc (negative_binomial_distribution<>::\n\toperator()): Adjust.\n\nFrom-SVN: r171443", "tree": {"sha": "c2c00d3744d6db99bffcbbfba5d53c4e3559288b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2c00d3744d6db99bffcbbfba5d53c4e3559288b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff2e697a03ccf7afba8e863f789c76715e005e4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff2e697a03ccf7afba8e863f789c76715e005e4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff2e697a03ccf7afba8e863f789c76715e005e4c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff2e697a03ccf7afba8e863f789c76715e005e4c/comments", "author": null, "committer": null, "parents": [{"sha": "ec6165f8528e46fe0dc3fcd9c6539171e8b2f315", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ec6165f8528e46fe0dc3fcd9c6539171e8b2f315", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ec6165f8528e46fe0dc3fcd9c6539171e8b2f315"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "2facd17af70c22818963b42a09791c17d54ef642", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff2e697a03ccf7afba8e863f789c76715e005e4c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff2e697a03ccf7afba8e863f789c76715e005e4c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=ff2e697a03ccf7afba8e863f789c76715e005e4c", "patch": "@@ -1,3 +1,13 @@\n+2011-03-25  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* include/bits/random.h (negative_binomial_distribution<>::\n+\tnegative_binomial_distribution(_IntType, double),\n+\tnegative_binomial_distribution<>::\n+\tnegative_binomial_distribution(const param_type&)): Tweak\n+\tconstruction of _M_gd.\n+\t* include/bits/random.tcc (negative_binomial_distribution<>::\n+\toperator()): Adjust.\n+\n 2011-03-24  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \t* include/bits/random.h (negative_binomial_distribution<>::"}, {"sha": "7b7f5966b3c79d9cb9e867a4faa3f1ad147f9654", "filename": "libstdc++-v3/include/bits/random.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff2e697a03ccf7afba8e863f789c76715e005e4c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff2e697a03ccf7afba8e863f789c76715e005e4c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.h?ref=ff2e697a03ccf7afba8e863f789c76715e005e4c", "patch": "@@ -3804,12 +3804,12 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n       explicit\n       negative_binomial_distribution(_IntType __k = 1, double __p = 0.5)\n-      : _M_param(__k, __p), _M_gd(__k, 1.0)\n+      : _M_param(__k, __p), _M_gd(__k, (1.0 - __p) / __p)\n       { }\n \n       explicit\n       negative_binomial_distribution(const param_type& __p)\n-      : _M_param(__p), _M_gd(__p.k(), 1.0)\n+      : _M_param(__p), _M_gd(__p.k(), (1.0 - __p.p()) / __p.p())\n       { }\n \n       /**"}, {"sha": "01ee5824cd9f7df64c564e0910d285f749c53f73", "filename": "libstdc++-v3/include/bits/random.tcc", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff2e697a03ccf7afba8e863f789c76715e005e4c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff2e697a03ccf7afba8e863f789c76715e005e4c/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Frandom.tcc?ref=ff2e697a03ccf7afba8e863f789c76715e005e4c", "patch": "@@ -1075,7 +1075,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       return __is;\n     }\n \n-  // This is Leger's algorithm.\n+  // This is Leger's algorithm, also in Devroye, Ch. X, Example 1.5.\n   template<typename _IntType>\n     template<typename _UniformRandomNumberGenerator>\n       typename negative_binomial_distribution<_IntType>::result_type\n@@ -1085,8 +1085,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \tconst double __y = _M_gd(__urng);\n \n \t// XXX Is the constructor too slow?\n-\tstd::poisson_distribution<result_type> __poisson(__y * (1.0 - p())\n-\t\t\t\t\t\t\t / p());\n+\tstd::poisson_distribution<result_type> __poisson(__y);\n \treturn __poisson(__urng);\n       }\n \n@@ -1100,10 +1099,10 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \ttypedef typename std::gamma_distribution<result_type>::param_type\n \t  param_type;\n \t\n-\tconst double __y = _M_gd(__urng, param_type(__p.k(), 1.0));\n+\tconst double __y =\n+\t  _M_gd(__urng, param_type(__p.k(), (1.0 - __p.p()) / __p.p()));\n \n-\tstd::poisson_distribution<result_type> __poisson(__y * (1.0 - __p.p())\n-\t\t\t\t\t\t\t / __p.p() );\n+\tstd::poisson_distribution<result_type> __poisson(__y);\n \treturn __poisson(__urng);\n       }\n "}]}