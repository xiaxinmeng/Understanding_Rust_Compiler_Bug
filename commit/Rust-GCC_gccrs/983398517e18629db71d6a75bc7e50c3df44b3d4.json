{"sha": "983398517e18629db71d6a75bc7e50c3df44b3d4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTgzMzk4NTE3ZTE4NjI5ZGI3MWQ2YTc1YmM3ZTUwYzNkZjQ0YjNkNA==", "commit": {"author": {"name": "Dehao Chen", "email": "dehao@google.com", "date": "2014-05-20T22:25:06Z"}, "committer": {"name": "Dehao Chen", "email": "dehao@gcc.gnu.org", "date": "2014-05-20T22:25:06Z"}, "message": "ipa-inline-transform.c (clone_inlined_nodes): Use min of edge count and callee count to get clone count.\n\n2014-05-20  Dehao Chen  <dehao@google.com>\n\n\t* ipa-inline-transform.c (clone_inlined_nodes): Use min of edge count\n\tand callee count to get clone count.\n\t* tree-inline.c (expand_call_inline): Use callee count instead of bb\n\tcount in copy_body.\n\nFrom-SVN: r210660", "tree": {"sha": "1bd8a95838906705bcd87c8109dcd41dccc7f970", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bd8a95838906705bcd87c8109dcd41dccc7f970"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/983398517e18629db71d6a75bc7e50c3df44b3d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/983398517e18629db71d6a75bc7e50c3df44b3d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/983398517e18629db71d6a75bc7e50c3df44b3d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/983398517e18629db71d6a75bc7e50c3df44b3d4/comments", "author": {"login": "danielcdh", "id": 694263, "node_id": "MDQ6VXNlcjY5NDI2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/694263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielcdh", "html_url": "https://github.com/danielcdh", "followers_url": "https://api.github.com/users/danielcdh/followers", "following_url": "https://api.github.com/users/danielcdh/following{/other_user}", "gists_url": "https://api.github.com/users/danielcdh/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielcdh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielcdh/subscriptions", "organizations_url": "https://api.github.com/users/danielcdh/orgs", "repos_url": "https://api.github.com/users/danielcdh/repos", "events_url": "https://api.github.com/users/danielcdh/events{/privacy}", "received_events_url": "https://api.github.com/users/danielcdh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6ed9c90a5db18fa72928d77d47c0159f75486b45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ed9c90a5db18fa72928d77d47c0159f75486b45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ed9c90a5db18fa72928d77d47c0159f75486b45"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "0b1900e792b2c9f10f154c3ff33c48858dae1f22", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/983398517e18629db71d6a75bc7e50c3df44b3d4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/983398517e18629db71d6a75bc7e50c3df44b3d4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=983398517e18629db71d6a75bc7e50c3df44b3d4", "patch": "@@ -1,3 +1,10 @@\n+2014-05-20  Dehao Chen  <dehao@google.com>\n+\n+\t* ipa-inline-transform.c (clone_inlined_nodes): Use min of edge count\n+\tand callee count to get clone count.\n+\t* tree-inline.c (expand_call_inline): Use callee count instead of bb\n+\tcount in copy_body.\n+\n 2014-05-20  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \tPR rtl-optimization/61243"}, {"sha": "7cd3ff740e0e6ce1a301bc08402b464d1d47676e", "filename": "gcc/ipa-inline-transform.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/983398517e18629db71d6a75bc7e50c3df44b3d4/gcc%2Fipa-inline-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/983398517e18629db71d6a75bc7e50c3df44b3d4/gcc%2Fipa-inline-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-inline-transform.c?ref=983398517e18629db71d6a75bc7e50c3df44b3d4", "patch": "@@ -183,8 +183,9 @@ clone_inlined_nodes (struct cgraph_edge *e, bool duplicate,\n \t  if (freq_scale == -1)\n \t    freq_scale = e->frequency;\n \t  n = cgraph_clone_node (e->callee, e->callee->decl,\n-\t\t\t\t e->count, freq_scale, update_original,\n-\t\t\t\t vNULL, true, inlining_into, NULL);\n+\t\t\t\t MIN (e->count, e->callee->count), freq_scale,\n+\t\t\t\t update_original, vNULL, true, inlining_into,\n+\t\t\t\t NULL);\n \t  cgraph_redirect_edge_callee (e, n);\n \t}\n     }"}, {"sha": "3208c7403f4fc279195a51c63d9ae133f94a17e2", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/983398517e18629db71d6a75bc7e50c3df44b3d4/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/983398517e18629db71d6a75bc7e50c3df44b3d4/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=983398517e18629db71d6a75bc7e50c3df44b3d4", "patch": "@@ -4355,7 +4355,7 @@ expand_call_inline (basic_block bb, gimple stmt, copy_body_data *id)\n      function in any way before this point, as this CALL_EXPR may be\n      a self-referential call; if we're calling ourselves, we need to\n      duplicate our body before altering anything.  */\n-  copy_body (id, bb->count,\n+  copy_body (id, cg_edge->callee->count,\n   \t     GCOV_COMPUTE_SCALE (cg_edge->frequency, CGRAPH_FREQ_BASE),\n \t     bb, return_block, NULL);\n "}]}