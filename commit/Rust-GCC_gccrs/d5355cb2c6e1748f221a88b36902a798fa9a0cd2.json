{"sha": "d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUzNTVjYjJjNmUxNzQ4ZjIyMWE4OGIzNjkwMmE3OThmYTlhMGNkMg==", "commit": {"author": {"name": "John David Anglin", "email": "dave@hiauly1.hia.nrc.ca", "date": "2002-06-15T17:31:32Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2002-06-15T17:31:32Z"}, "message": "Makefile.in (tm_defines): New configuration variable.\n\n\t* Makefile.in (tm_defines): New configuration variable.\n\t(cs-config.h, cs-hconfig.h, cs-tconfig.h): Rename DEFINES to XM_DEFINES.\n\tPass tm_defines in TM_DEFINES.\n\t(cs-tm_p.h): Rename DEFINES to XM_DEFINES.  Pass TM_DEFINES.\n\t* config.gcc (tm_defines): New configuration variable.\n\t(hppa*-*-* | parisc*-*-*): Use tm_defines instead of pa-700.h and\n\tpa-7100.h headers.  Change hppa1* scheduling default to 7100LC.\n\t* configure.in: Substitute tm_defines.\n\t* configure: Rebuilt.\n\t* mkconfig.sh: Rename DEFINES to XM_DEFINES.  Output TM_DEFINES.\n\t* doc/install.texi: Update.\n\t* pa/pa-700.h: Delete file.\n\t* pa/pa-7100.h: Delete file.\n\nFrom-SVN: r54648", "tree": {"sha": "9cc8a7452fc815ed1f99db6300c934bf5fb50b22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9cc8a7452fc815ed1f99db6300c934bf5fb50b22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/comments", "author": null, "committer": null, "parents": [{"sha": "8dcb27ed86eb249675749e35b1440a8ccfd03881", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dcb27ed86eb249675749e35b1440a8ccfd03881", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dcb27ed86eb249675749e35b1440a8ccfd03881"}], "stats": {"total": 118, "additions": 50, "deletions": 68}, "files": [{"sha": "b4eb108b6c97d4aa36f5200b0de674844d02a87d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "patch": "@@ -1,3 +1,19 @@\n+2002-06-15  John David Anglin  <dave@hiauly1.hia.nrc.ca>\n+\n+\t* Makefile.in (tm_defines): New configuration variable.\n+\t(cs-config.h, cs-hconfig.h, cs-tconfig.h): Rename DEFINES to XM_DEFINES.\n+\tPass tm_defines in TM_DEFINES.\n+\t(cs-tm_p.h): Rename DEFINES to XM_DEFINES.  Pass TM_DEFINES.\n+\t* config.gcc (tm_defines): New configuration variable.\n+\t(hppa*-*-* | parisc*-*-*): Use tm_defines instead of pa-700.h and\n+\tpa-7100.h headers.  Change hppa1* scheduling default to 7100LC.\n+\t* configure.in: Substitute tm_defines.\n+\t* configure: Rebuilt.\n+\t* mkconfig.sh: Rename DEFINES to XM_DEFINES.  Output TM_DEFINES.\n+\t* doc/install.texi: Update.\n+\t* pa/pa-700.h: Delete file.\n+\t* pa/pa-7100.h: Delete file.\n+\n 2002-06-15  Roger Sayle  <roger@eyesopen.com>\n \n \t* fold-const.c (comparison_to_compcode): New function to convert"}, {"sha": "dfa18f5e161f161d0131c61b9a5686d0ee5e561f", "filename": "gcc/Makefile.in", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "patch": "@@ -259,6 +259,7 @@ tmake_file=@dep_tmake_file@\n out_file=$(srcdir)/config/@out_file@\n out_object_file=@out_object_file@\n md_file=$(srcdir)/config/@md_file@\n+tm_defines=@tm_defines@\n tm_p_file_list=@tm_p_file_list@\n tm_p_file=@tm_p_file@\n build_xm_file_list=@build_xm_file_list@\n@@ -845,22 +846,26 @@ tconfig.h: cs-tconfig.h ; @true\n tm_p.h: cs-tm_p.h ; @true\n \n cs-config.h: Makefile\n-\tHEADERS=\"$(host_xm_file)\" DEFINES=\"$(host_xm_defines)\" \\\n+\tTM_DEFINES=\"$(tm_defines)\" \\\n+\tHEADERS=\"$(host_xm_file)\" XM_DEFINES=\"$(host_xm_defines)\" \\\n \tTARGET_CPU_DEFAULT=\"$(target_cpu_default)\" \\\n \t$(SHELL) $(srcdir)/mkconfig.sh config.h\n \n cs-hconfig.h: Makefile\n-\tHEADERS=\"$(build_xm_file)\" DEFINES=\"$(build_xm_defines)\" \\\n+\tTM_DEFINES=\"$(tm_defines)\" \\\n+\tHEADERS=\"$(build_xm_file)\" XM_DEFINES=\"$(build_xm_defines)\" \\\n \tTARGET_CPU_DEFAULT=\"$(target_cpu_default)\" \\\n \t$(SHELL) $(srcdir)/mkconfig.sh hconfig.h\n \n cs-tconfig.h: Makefile\n-\tHEADERS=\"$(xm_file)\" DEFINES=\"$(xm_defines)\" \\\n+\tTM_DEFINES=\"$(tm_defines)\" \\\n+\tHEADERS=\"$(xm_file)\" XM_DEFINES=\"$(xm_defines)\" \\\n \tTARGET_CPU_DEFAULT=\"\" \\\n \t$(SHELL) $(srcdir)/mkconfig.sh tconfig.h\n \n cs-tm_p.h: Makefile\n-\tHEADERS=\"$(tm_p_file)\" DEFINES=\"\" TARGET_CPU_DEFAULT=\"\" \\\n+\tTM_DEFINES=\"\" \\\n+\tHEADERS=\"$(tm_p_file)\" XM_DEFINES=\"\" TARGET_CPU_DEFAULT=\"\" \\\n \t$(SHELL) $(srcdir)/mkconfig.sh tm_p.h\n \n # Don't automatically run autoconf, since configure.in might be accidentally"}, {"sha": "16b701160bce71762860207233670c281e9caa96", "filename": "gcc/config.gcc", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "patch": "@@ -45,6 +45,8 @@\n #\n #  cpu_type\t\tThe name of the cpu, if different from machine.\n #\n+#  tm_defines\t\tList of target macros to define for all compilations.\n+#\n #  tm_file\t\tA list of target macro files, if different from\n #\t\t\t\"$cpu_type/$cpu_type.h\". Usually it's constructed\n #\t\t\tper target in a way like this:\n@@ -188,6 +190,7 @@ extra_host_objs=\n extra_gcc_objs=\n c_target_objs=\n cxx_target_objs=\n+tm_defines=\n xm_defines=\n float_format=\n # Set this to force installation and use of collect2.\n@@ -2850,11 +2853,8 @@ hppa*-*-* | parisc*-*-*)\n \t\ttarget_cpu_default2=\"MASK_GAS|MASK_JUMP_IN_DELAY\"\n \tfi\n \tcase $machine in\n-\t\thppa1.0* | parisc1.0*)\n-\t\t\ttm_file=\"pa/pa-700.h ${tm_file}\"\n-\t\t\t;;\n-\t\thppa1.1* | parisc1.1*)\n-\t\t\ttm_file=\"pa/pa-7100.h ${tm_file}\"\n+\t\thppa1* | parisc1*)\n+\t\t\ttm_defines=\"TARGET_SCHED_DEFAULT=\\\\\\\"7100LC\\\\\\\"\"\n \t\t\t;;\n \tesac\n \t;;"}, {"sha": "3529a299e963d4e190bff8498fa6f3467ca14c4c", "filename": "gcc/config/pa/pa-700.h", "status": "removed", "additions": 0, "deletions": 24, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dcb27ed86eb249675749e35b1440a8ccfd03881/gcc%2Fconfig%2Fpa%2Fpa-700.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dcb27ed86eb249675749e35b1440a8ccfd03881/gcc%2Fconfig%2Fpa%2Fpa-700.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-700.h?ref=8dcb27ed86eb249675749e35b1440a8ccfd03881", "patch": "@@ -1,24 +0,0 @@\n-/* Definitions of target machine for GNU compiler, for HPs using the\n-   PA700 scheduling model.\n-   Copyright (C) 2002 Free Software Foundation, Inc.\n-\n-This file is part of GNU CC.\n-\n-GNU CC is free software; you can redistribute it and/or modify\n-it under the terms of the GNU General Public License as published by\n-the Free Software Foundation; either version 2, or (at your option)\n-any later version.\n-\n-GNU CC is distributed in the hope that it will be useful,\n-but WITHOUT ANY WARRANTY; without even the implied warranty of\n-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-GNU General Public License for more details.\n-\n-You should have received a copy of the GNU General Public License\n-along with GNU CC; see the file COPYING.  If not, write to\n-the Free Software Foundation, 59 Temple Place - Suite 330,\n-Boston, MA 02111-1307, USA.  */\n-\n-#ifndef TARGET_SCHED_DEFAULT\n-#define TARGET_SCHED_DEFAULT \"700\"\n-#endif"}, {"sha": "7f450a41659c6a83c5346b165261c1a09ed52644", "filename": "gcc/config/pa/pa-7100.h", "status": "removed", "additions": 0, "deletions": 24, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dcb27ed86eb249675749e35b1440a8ccfd03881/gcc%2Fconfig%2Fpa%2Fpa-7100.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dcb27ed86eb249675749e35b1440a8ccfd03881/gcc%2Fconfig%2Fpa%2Fpa-7100.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-7100.h?ref=8dcb27ed86eb249675749e35b1440a8ccfd03881", "patch": "@@ -1,24 +0,0 @@\n-/* Definitions of target machine for GNU compiler, for HPs using the\n-   PA7100 scheduling model.\n-   Copyright (C) 2002 Free Software Foundation, Inc.\n-\n-This file is part of GNU CC.\n-\n-GNU CC is free software; you can redistribute it and/or modify\n-it under the terms of the GNU General Public License as published by\n-the Free Software Foundation; either version 2, or (at your option)\n-any later version.\n-\n-GNU CC is distributed in the hope that it will be useful,\n-but WITHOUT ANY WARRANTY; without even the implied warranty of\n-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-GNU General Public License for more details.\n-\n-You should have received a copy of the GNU General Public License\n-along with GNU CC; see the file COPYING.  If not, write to\n-the Free Software Foundation, 59 Temple Place - Suite 330,\n-Boston, MA 02111-1307, USA.  */\n-\n-#ifndef TARGET_SCHED_DEFAULT\n-#define TARGET_SCHED_DEFAULT \"7100\"\n-#endif"}, {"sha": "c414fcf82d159537e7ced6d32eaa4da698b79a13", "filename": "gcc/configure", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "patch": "@@ -2244,7 +2244,7 @@ EOF\n fi\n \n # Find some useful tools\n-for ac_prog in gawk mawk nawk awk\n+for ac_prog in mawk gawk nawk awk\n do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n@@ -8371,6 +8371,7 @@ ${CONFIG_SHELL-/bin/sh} $srcdir/configure.frag $srcdir \"$subdirs\" \"$dep_host_xma\n \n \n \n+\n \n \n # Echo that links are built\n@@ -8684,6 +8685,7 @@ s%@symbolic_link@%$symbolic_link%g\n s%@thread_file@%$thread_file%g\n s%@tm_file_list@%$tm_file_list%g\n s%@tm_file@%$tm_file%g\n+s%@tm_defines@%$tm_defines%g\n s%@tm_p_file_list@%$tm_p_file_list%g\n s%@tm_p_file@%$tm_p_file%g\n s%@xm_file@%$xm_file%g"}, {"sha": "355f174448b9e3f7e32a06abdbff8419f2951df6", "filename": "gcc/configure.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "patch": "@@ -2595,6 +2595,7 @@ AC_SUBST(symbolic_link)\n AC_SUBST(thread_file)\n AC_SUBST(tm_file_list)\n AC_SUBST(tm_file)\n+AC_SUBST(tm_defines)\n AC_SUBST(tm_p_file_list)\n AC_SUBST(tm_p_file)\n AC_SUBST(xm_file)"}, {"sha": "c087bdfa62d284df8ed5cafb1f46b500031dd276", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "patch": "@@ -1997,12 +1997,11 @@ If you wish to use pa-risc 2.0 architecture support, you must use either\n the HP assembler, gas/binutils 2.11 or a recent\n @uref{ftp://sources.redhat.com/pub/binutils/snapshots,,snapshot of gas}.\n \n-There are three default scheduling models for instructions.  They\n-are PROCESSOR_700, PROCESSOR_7100 and PROCESSOR_8000.  They are selected\n-based on the the pa-risc architecture specified for the target machine\n-when configuring.  PROCESSOR_8000 is the default model.  PROCESSOR_700\n-and PROCESSOR_7100 are selected by specifying either @samp{hppa1.0} or\n-@samp{hppa1.1}, respectively.\n+There are two default scheduling models for instructions.  These are\n+PROCESSOR_7100LC and PROCESSOR_8000.  They are selected from the pa-risc\n+architecture specified for the target machine when configuring.\n+PROCESSOR_8000 is the default.  PROCESSOR_7100LC is selected when\n+the target is a @samp{hppa1*} machine.\n \n The PROCESSOR_8000 model is not well suited to older processors.  Thus,\n it is important to completely specify the machine architecture when"}, {"sha": "cc87ccb37e8cea670cb3bef9c620287e9506ee38", "filename": "gcc/mkconfig.sh", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fmkconfig.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5355cb2c6e1748f221a88b36902a798fa9a0cd2/gcc%2Fmkconfig.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmkconfig.sh?ref=d5355cb2c6e1748f221a88b36902a798fa9a0cd2", "patch": "@@ -2,11 +2,11 @@\n \n # Generate gcc's config.h, which is not your normal autoconf-generated\n # config.h (that's auto-(host|build).h).  $1 is the file to generate.\n-# HEADERS, DEFINES, and possibly TARGET_CPU_DEFAULT are expected to be\n-# set in the environment.\n+# TM_DEFINES, HEADERS, XM_DEFINES, and possibly TARGET_CPU_DEFAULT are\n+# expected to be set in the environment.\n \n if [ -z \"$1\" ]; then\n-    echo \"Usage: HEADERS='list' DEFINES='list' mkconfig.sh FILE\" >&2\n+    echo \"Usage: TM_DEFINES='list' HEADERS='list' XM_DEFINES='list' mkconfig.sh FILE\" >&2\n     exit 1\n fi\n \n@@ -19,6 +19,13 @@ if [ \"$TARGET_CPU_DEFAULT\" != \"\" ]; then\n     echo \"#define TARGET_CPU_DEFAULT ($TARGET_CPU_DEFAULT)\" >> ${output}T\n fi\n \n+# Provide defines for other target machine macros to be used everywhere.\n+for def in $TM_DEFINES; do\n+    echo \"#ifndef $def\" | sed 's/=.*//' >> ${output}T\n+    echo \"# define $def\" | sed 's/=/ /' >> ${output}T\n+    echo \"#endif\" >> ${output}T\n+done\n+\n # The first entry in HEADERS may be auto-host.h or auto-build.h;\n # it wants to be included even when not -DIN_GCC.\n if [ -n \"$HEADERS\" ]; then\n@@ -63,7 +70,7 @@ if [ -n \"$HEADERS\" ]; then\n     echo '#endif' >> ${output}T\n fi\n \n-for def in $DEFINES; do\n+for def in $XM_DEFINES; do\n     echo \"#ifndef $def\" | sed 's/=.*//' >> ${output}T\n     echo \"# define $def\" | sed 's/=/ /' >> ${output}T\n     echo \"#endif\" >> ${output}T"}]}