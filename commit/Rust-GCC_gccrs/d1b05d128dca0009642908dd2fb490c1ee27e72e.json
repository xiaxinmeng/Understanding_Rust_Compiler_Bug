{"sha": "d1b05d128dca0009642908dd2fb490c1ee27e72e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFiMDVkMTI4ZGNhMDAwOTY0MjkwOGRkMmZiNDkwYzFlZTI3ZTcyZQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2018-08-01T08:16:48Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2018-08-01T08:16:48Z"}, "message": "rs6000 - add speculation_barrier pattern\n\nThis patch reworks the existing rs6000_speculation_barrier pattern to\nwork with the new __builtin_sepculation_safe_value() intrinsic.  The\nchange is trivial as it simply requires renaming the existing speculation\nbarrier pattern.\n\nSo the total patch is to delete 14 characters!\n\n\t* config/rs6000/rs6000.md (speculation_barrier): Renamed from\n\trs6000_speculation_barrier.\n\t* config/rs6000/rs6000.c (rs6000_expand_builtin): Adjust for\n\tnew barrier pattern name.\n\nFrom-SVN: r263197", "tree": {"sha": "666fbf4907a416bc86347044c7e407cba6510155", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/666fbf4907a416bc86347044c7e407cba6510155"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1b05d128dca0009642908dd2fb490c1ee27e72e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1b05d128dca0009642908dd2fb490c1ee27e72e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1b05d128dca0009642908dd2fb490c1ee27e72e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1b05d128dca0009642908dd2fb490c1ee27e72e/comments", "author": null, "committer": null, "parents": [{"sha": "31e962f2dd67eef0f148b60696df9d95cc1dd713", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31e962f2dd67eef0f148b60696df9d95cc1dd713", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31e962f2dd67eef0f148b60696df9d95cc1dd713"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "54cd8f91020f1f3753ae8dd642cc244e19ce70e3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1b05d128dca0009642908dd2fb490c1ee27e72e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1b05d128dca0009642908dd2fb490c1ee27e72e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d1b05d128dca0009642908dd2fb490c1ee27e72e", "patch": "@@ -1,3 +1,10 @@\n+2018-08-01  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* config/rs6000/rs6000.md (speculation_barrier): Renamed from\n+\trs6000_speculation_barrier.\n+\t* config/rs6000/rs6000.c (rs6000_expand_builtin): Adjust for\n+\tnew barrier pattern name.\n+\n 2018-08-01  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* config/i386/i386.md (unspecv): Add UNSPECV_SPECULATION_BARRIER."}, {"sha": "c2af4b869073c082877db069c99b5239bca69172", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1b05d128dca0009642908dd2fb490c1ee27e72e/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1b05d128dca0009642908dd2fb490c1ee27e72e/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=d1b05d128dca0009642908dd2fb490c1ee27e72e", "patch": "@@ -15836,7 +15836,7 @@ rs6000_expand_builtin (tree exp, rtx target, rtx subtarget ATTRIBUTE_UNUSED,\n \n     case MISC_BUILTIN_SPEC_BARRIER:\n       {\n-\temit_insn (gen_rs6000_speculation_barrier ());\n+\temit_insn (gen_speculation_barrier ());\n \treturn NULL_RTX;\n       }\n "}, {"sha": "d70b01b8ca78c98e0b334ad1f1b84716246d88db", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1b05d128dca0009642908dd2fb490c1ee27e72e/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1b05d128dca0009642908dd2fb490c1ee27e72e/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=d1b05d128dca0009642908dd2fb490c1ee27e72e", "patch": "@@ -12641,7 +12641,7 @@\n   return \"ori 2,2,0\";\n })\n \n-(define_insn \"rs6000_speculation_barrier\"\n+(define_insn \"speculation_barrier\"\n   [(unspec_volatile:BLK [(const_int 0)] UNSPECV_SPEC_BARRIER)]\n   \"\"\n   \"ori 31,31,0\")"}]}