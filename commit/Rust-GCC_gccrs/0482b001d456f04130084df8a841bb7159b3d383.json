{"sha": "0482b001d456f04130084df8a841bb7159b3d383", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ4MmIwMDFkNDU2ZjA0MTMwMDg0ZGY4YTg0MWJiNzE1OWIzZDM4Mw==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-12-14T19:29:48Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-12-14T19:29:48Z"}, "message": "Dump default defs for arguments, static chain and decl-by-reference\n\n2015-12-14  Tom de Vries  <tom@codesourcery.com>\n\n\tPR other/68882\n\t* gimple-pretty-print.c (dump_ssaname_info_to_file): New function.\n\t* gimple-pretty-print.h (dump_ssaname_info_to_file): Declare.\n\t* tree-cfg.c (dump_default_def): New function.\n\t(dump_function_to_file): Dump default defs for arguments, static chain,\n\tand decl-by-reference.\n\nFrom-SVN: r231630", "tree": {"sha": "d2ea519d48685aff6d60a5381ab876c40bc43bc7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d2ea519d48685aff6d60a5381ab876c40bc43bc7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0482b001d456f04130084df8a841bb7159b3d383", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0482b001d456f04130084df8a841bb7159b3d383", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0482b001d456f04130084df8a841bb7159b3d383", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0482b001d456f04130084df8a841bb7159b3d383/comments", "author": null, "committer": null, "parents": [{"sha": "44eba92d0a0594bda5b53fcb3c8f84f164c653b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44eba92d0a0594bda5b53fcb3c8f84f164c653b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44eba92d0a0594bda5b53fcb3c8f84f164c653b6"}], "stats": {"total": 67, "additions": 67, "deletions": 0}, "files": [{"sha": "f21f69cbea9d452c9c0f62f5df11776efa857e56", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0482b001d456f04130084df8a841bb7159b3d383/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0482b001d456f04130084df8a841bb7159b3d383/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0482b001d456f04130084df8a841bb7159b3d383", "patch": "@@ -1,3 +1,12 @@\n+2015-12-14  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR other/68882\n+\t* gimple-pretty-print.c (dump_ssaname_info_to_file): New function.\n+\t* gimple-pretty-print.h (dump_ssaname_info_to_file): Declare.\n+\t* tree-cfg.c (dump_default_def): New function.\n+\t(dump_function_to_file): Dump default defs for arguments, static chain,\n+\tand decl-by-reference.\n+\n 2015-12-14  Nathan Sidwell  <nathan@acm.org>\n \n \t* config/nvptx/nvptx.h (PARM_BOUNDARY): Set to 32."}, {"sha": "01e9b6b004c8f7f65274189821db2f75c7dd9432", "filename": "gcc/gimple-pretty-print.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0482b001d456f04130084df8a841bb7159b3d383/gcc%2Fgimple-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0482b001d456f04130084df8a841bb7159b3d383/gcc%2Fgimple-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-pretty-print.c?ref=0482b001d456f04130084df8a841bb7159b3d383", "patch": "@@ -1887,6 +1887,17 @@ dump_ssaname_info (pretty_printer *buffer, tree node, int spc)\n     }\n }\n \n+/* As dump_ssaname_info, but dump to FILE.  */\n+\n+void\n+dump_ssaname_info_to_file (FILE *file, tree node, int spc)\n+{\n+  pretty_printer buffer;\n+  pp_needs_newline (&buffer) = true;\n+  buffer.buffer->stream = file;\n+  dump_ssaname_info (&buffer, node, spc);\n+  pp_flush (&buffer);\n+}\n \n /* Dump a PHI node PHI.  BUFFER, SPC and FLAGS are as in pp_gimple_stmt_1.\n    The caller is responsible for calling pp_flush on BUFFER to finalize"}, {"sha": "740965f96f47599bf0b56d8322a1630dbaf58085", "filename": "gcc/gimple-pretty-print.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0482b001d456f04130084df8a841bb7159b3d383/gcc%2Fgimple-pretty-print.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0482b001d456f04130084df8a841bb7159b3d383/gcc%2Fgimple-pretty-print.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-pretty-print.h?ref=0482b001d456f04130084df8a841bb7159b3d383", "patch": "@@ -34,5 +34,6 @@ extern void print_gimple_expr (FILE *, gimple *, int, int);\n extern void pp_gimple_stmt_1 (pretty_printer *, gimple *, int, int);\n extern void gimple_dump_bb (FILE *, basic_block, int, int);\n extern void gimple_dump_bb_for_graph (pretty_printer *, basic_block);\n+extern void dump_ssaname_info_to_file (FILE *, tree, int);\n \n #endif /* ! GCC_GIMPLE_PRETTY_PRINT_H */"}, {"sha": "5aad9ee3149695bc7aa0c501ff95573580a0e1f8", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0482b001d456f04130084df8a841bb7159b3d383/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0482b001d456f04130084df8a841bb7159b3d383/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=0482b001d456f04130084df8a841bb7159b3d383", "patch": "@@ -7312,6 +7312,23 @@ move_sese_region_to_fn (struct function *dest_cfun, basic_block entry_bb,\n   return bb;\n }\n \n+/* Dump default def DEF to file FILE using FLAGS and indentation\n+   SPC.  */\n+\n+static void\n+dump_default_def (FILE *file, tree def, int spc, int flags)\n+{\n+  for (int i = 0; i < spc; ++i)\n+    fprintf (file, \" \");\n+  dump_ssaname_info_to_file (file, def, spc);\n+\n+  print_generic_expr (file, TREE_TYPE (def), flags);\n+  fprintf (file, \" \");\n+  print_generic_expr (file, def, flags);\n+  fprintf (file, \" = \");\n+  print_generic_expr (file, SSA_NAME_VAR (def), flags);\n+  fprintf (file, \";\\n\");\n+}\n \n /* Dump FUNCTION_DECL FN to file FILE using FLAGS (see TDF_* in dumpfile.h)\n    */\n@@ -7391,6 +7408,35 @@ dump_function_to_file (tree fndecl, FILE *file, int flags)\n       ignore_topmost_bind = true;\n \n       fprintf (file, \"{\\n\");\n+      if (gimple_in_ssa_p (fun)\n+\t  && (flags & TDF_ALIAS))\n+\t{\n+\t  for (arg = DECL_ARGUMENTS (fndecl); arg != NULL;\n+\t       arg = DECL_CHAIN (arg))\n+\t    {\n+\t      tree def = ssa_default_def (fun, arg);\n+\t      if (def)\n+\t\tdump_default_def (file, def, 2, flags);\n+\t    }\n+\n+\t  tree res = DECL_RESULT (fun->decl);\n+\t  if (res != NULL_TREE\n+\t      && DECL_BY_REFERENCE (res))\n+\t    {\n+\t      tree def = ssa_default_def (fun, res);\n+\t      if (def)\n+\t\tdump_default_def (file, def, 2, flags);\n+\t    }\n+\n+\t  tree static_chain = fun->static_chain_decl;\n+\t  if (static_chain != NULL_TREE)\n+\t    {\n+\t      tree def = ssa_default_def (fun, static_chain);\n+\t      if (def)\n+\t\tdump_default_def (file, def, 2, flags);\n+\t    }\n+\t}\n+\n       if (!vec_safe_is_empty (fun->local_decls))\n \tFOR_EACH_LOCAL_DECL (fun, ix, var)\n \t  {"}]}