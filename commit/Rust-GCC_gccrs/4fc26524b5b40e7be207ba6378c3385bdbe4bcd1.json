{"sha": "4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGZjMjY1MjRiNWI0MGU3YmUyMDdiYTYzNzhjMzM4NWJkYmU0YmNkMQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-29T10:28:55Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-29T10:28:55Z"}, "message": "[multiple changes]\n\n2009-04-29  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_disp.adb (Check_Dispatching_Operation): if the dispatching\n\toperation is a body without previous spec, update the list of\n\tprimitive operations to ensure that cross-reference information is\n\tup-to-date.\n\n\t* sem_ch12.adb (Build_Instance_Compilation_Unit_Nodes): When creating a\n\tnew compilation unit node for the instance declaration, keep the\n\tcontext items of the original unit on it, so that the context of the\n\tinstance body only holds the context inherited from the generic body.\n\n2009-04-29  Bob Duff  <duff@adacore.com>\n\n\t* sem_res.adb: Minor comment fix.\n\nFrom-SVN: r146945", "tree": {"sha": "b72d92a8a2ecf450a2641b76b6e8d9505038ac4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b72d92a8a2ecf450a2641b76b6e8d9505038ac4a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/comments", "author": null, "committer": null, "parents": [{"sha": "7f4c190364aeb00a399ac594d56099603323855d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f4c190364aeb00a399ac594d56099603323855d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f4c190364aeb00a399ac594d56099603323855d"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "c8767f10f5862ea316918358875e9305e0c88eab", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "patch": "@@ -1,3 +1,19 @@\n+2009-04-29  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_disp.adb (Check_Dispatching_Operation): if the dispatching\n+\toperation is a body without previous spec, update the list of\n+\tprimitive operations to ensure that cross-reference information is\n+\tup-to-date.\n+\n+\t* sem_ch12.adb (Build_Instance_Compilation_Unit_Nodes): When creating a\n+\tnew compilation unit node for the instance declaration, keep the\n+\tcontext items of the original unit on it, so that the context of the\n+\tinstance body only holds the context inherited from the generic body.\n+\n+2009-04-29  Bob Duff  <duff@adacore.com>\n+\n+\t* sem_res.adb: Minor comment fix.\n+\n 2009-04-29  Thomas Quinot  <quinot@adacore.com>\n \n \t* sem_elim.adb: Minor reformatting"}, {"sha": "9a4f1e34b41fe0f2ffabe2d10d3bf8374f6a2203", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "patch": "@@ -4360,16 +4360,19 @@ package body Sem_Ch12 is\n       Old_Main   : constant Entity_Id := Cunit_Entity (Main_Unit);\n \n    begin\n-      --  A new compilation unit node is built for the instance declaration\n+      --  A new compilation unit node is built for the instance declaration.\n+      --  Place the context of the compilation this declaration, so that it\n+      --  it is processed before the instance in CodePeer.\n \n       Decl_Cunit :=\n         Make_Compilation_Unit (Sloc (N),\n-          Context_Items  => Empty_List,\n+          Context_Items  => Context_Items (Parent (N)),\n           Unit           => Act_Decl,\n           Aux_Decls_Node =>\n             Make_Compilation_Unit_Aux (Sloc (N)));\n \n       Set_Parent_Spec   (Act_Decl, Parent_Spec (N));\n+      Set_Context_Items (Parent (N), Empty_List);\n \n       --  The new compilation unit is linked to its body, but both share the\n       --  same file, so we do not set Body_Required on the new unit so as not"}, {"sha": "c44c8e8d0fcc7cde08779609170f9d8e1967bae1", "filename": "gcc/ada/sem_disp.adb", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2Fsem_disp.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2Fsem_disp.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_disp.adb?ref=4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2008, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2009, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -865,7 +865,14 @@ package body Sem_Disp is\n                                 Prim    => Subp));\n                            end if;\n \n-                           Generate_Reference (Tagged_Type, Subp, 'p', False);\n+                           --  Indicate that this is an overriding operation,\n+                           --  and replace the overriden entry in the list of\n+                           --  primitive operations, which is used for xref\n+                           --  generation subsequently.\n+\n+                           Generate_Reference (Tagged_Type, Subp, 'P', False);\n+                           Override_Dispatching_Operation\n+                             (Tagged_Type, Old_Subp, Subp);\n                         end if;\n                      end if;\n                   end if;"}, {"sha": "c6f79de4915381a50db68ac28b2ea3a3638ce90c", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4fc26524b5b40e7be207ba6378c3385bdbe4bcd1/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=4fc26524b5b40e7be207ba6378c3385bdbe4bcd1", "patch": "@@ -6977,7 +6977,7 @@ package body Sem_Res is\n    begin\n       --  The parser folds an enormous sequence of concatenations of string\n       --  literals into \"\" & \"...\", where the Is_Folded_In_Parser flag is set\n-      --  in the right. If the expression resolves to a predefined \"&\"\n+      --  in the right operand. If the expression resolves to a predefined \"&\"\n       --  operator, all is well. Otherwise, the parser's folding is wrong, so\n       --  we give an error. See P_Simple_Expression in Par.Ch4.\n "}]}