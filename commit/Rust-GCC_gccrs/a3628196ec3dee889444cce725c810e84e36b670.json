{"sha": "a3628196ec3dee889444cce725c810e84e36b670", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTM2MjgxOTZlYzNkZWU4ODk0NDRjY2U3MjVjODEwZTg0ZTM2YjY3MA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-07-19T21:22:04Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-07-19T21:22:04Z"}, "message": "gimple-fold.c (canonicalize_constructor_val): Strip only useless type conversions.\n\n\t* gimple-fold.c (canonicalize_constructor_val): Strip only useless type\n\tconversions.\n\nFrom-SVN: r189685", "tree": {"sha": "38cb017fd903c3620a5e88ecf3ae36249695c729", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38cb017fd903c3620a5e88ecf3ae36249695c729"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3628196ec3dee889444cce725c810e84e36b670", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3628196ec3dee889444cce725c810e84e36b670", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3628196ec3dee889444cce725c810e84e36b670", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3628196ec3dee889444cce725c810e84e36b670/comments", "author": null, "committer": null, "parents": [{"sha": "b42ff0a550777b45ca004460ef55f50f8f0e34c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b42ff0a550777b45ca004460ef55f50f8f0e34c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b42ff0a550777b45ca004460ef55f50f8f0e34c9"}], "stats": {"total": 55, "additions": 54, "deletions": 1}, "files": [{"sha": "1a3d4017f516454b1bd61077251b98bf2d4bc67d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3628196ec3dee889444cce725c810e84e36b670/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3628196ec3dee889444cce725c810e84e36b670/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3628196ec3dee889444cce725c810e84e36b670", "patch": "@@ -1,3 +1,8 @@\n+2012-07-19  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gimple-fold.c (canonicalize_constructor_val): Strip only useless type\n+\tconversions.\n+\n 2012-07-19  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/53942"}, {"sha": "ccdeb34677f6680dbb3cc479284b1b2ab4e58256", "filename": "gcc/gimple-fold.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Fgimple-fold.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Fgimple-fold.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-fold.c?ref=a3628196ec3dee889444cce725c810e84e36b670", "patch": "@@ -139,7 +139,7 @@ can_refer_decl_in_current_unit_p (tree decl, tree from_decl)\n tree\n canonicalize_constructor_val (tree cval, tree from_decl)\n {\n-  STRIP_NOPS (cval);\n+  STRIP_USELESS_TYPE_CONVERSION (cval);\n   if (TREE_CODE (cval) == POINTER_PLUS_EXPR\n       && TREE_CODE (TREE_OPERAND (cval, 1)) == INTEGER_CST)\n     {"}, {"sha": "740d26bdf35ed5ee155b415946ad567b526b8a49", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a3628196ec3dee889444cce725c810e84e36b670", "patch": "@@ -1,3 +1,8 @@\n+2012-07-19  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/aggr20.ad[sb]: New test.\n+\t* gnat.dg/aggr20_pkg.ads: New helper.\n+\n 2012-07-19  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/derived_type3.adb: New test."}, {"sha": "85111e25b4eee8b01c7c337614400f8c2758c6c3", "filename": "gcc/testsuite/gnat.dg/aggr20.adb", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20.adb?ref=a3628196ec3dee889444cce725c810e84e36b670", "patch": "@@ -0,0 +1,10 @@\n+-- { dg-do compile }\n+\n+package body Aggr20 is\n+\n+   procedure Proc (R : out Rec3) is\n+   begin\n+      R := (Callback => Nil_Rec2);\n+   end;\n+\n+end Aggr20;"}, {"sha": "6405cae9dfb550a25f885869ae7805d2b2a98235", "filename": "gcc/testsuite/gnat.dg/aggr20.ads", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20.ads?ref=a3628196ec3dee889444cce725c810e84e36b670", "patch": "@@ -0,0 +1,24 @@\n+with Aggr20_Pkg; use Aggr20_Pkg;\n+with System;\n+\n+package Aggr20 is\n+\n+   type Rec1 is record\n+      Address : System.Address;\n+   end record;\n+\n+   Nil_Rec1 : constant Rec1 := (Address => Default_Nil_Address);\n+\n+   type Rec2 is record\n+      Callback : Rec1;\n+   end record;\n+\n+   Nil_Rec2 : constant Rec2 := (Callback => Nil_Rec1);\n+\n+   type Rec3 is record\n+      Callback : Rec2;\n+   end record;\n+\n+   procedure Proc (R : out Rec3);\n+\n+end Aggr20;"}, {"sha": "66f5bd58045a2f989925657039fa9bee9ae93075", "filename": "gcc/testsuite/gnat.dg/aggr20_pkg.ads", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3628196ec3dee889444cce725c810e84e36b670/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Faggr20_pkg.ads?ref=a3628196ec3dee889444cce725c810e84e36b670", "patch": "@@ -0,0 +1,9 @@\n+with System;\n+\n+package Aggr20_Pkg is\n+\n+   procedure Proc;\n+\n+   Default_Nil_Address : constant System.Address := Proc'Address;\n+\n+end Aggr20_Pkg;"}]}