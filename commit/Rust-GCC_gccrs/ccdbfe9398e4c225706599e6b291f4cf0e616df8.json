{"sha": "ccdbfe9398e4c225706599e6b291f4cf0e616df8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2NkYmZlOTM5OGU0YzIyNTcwNjU5OWU2YjI5MWY0Y2YwZTYxNmRmOA==", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.vnet.ibm.com", "date": "2012-09-11T12:23:25Z"}, "committer": {"name": "William Schmidt", "email": "wschmidt@gcc.gnu.org", "date": "2012-09-11T12:23:25Z"}, "message": "re PR middle-end/55492 (__atomic_load doesn't match ACQUIRE memory model)\n\n2012-09-11  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n\n\tPR tree-optimization/55492\n\t* doc/invoke.texi (max-slsr-cand-scan): New description.\n\t* gimple-ssa-strength-reduction.c (find_basis_for_candidate): Limit\n\tthe time spent searching for a basis.\n\t* params.def (PARAM_MAX_SLSR_CANDIDATE_SCAN): New param.\n\nFrom-SVN: r191178", "tree": {"sha": "3a554aee711b2212e5a769dd87e1616f33de6dbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3a554aee711b2212e5a769dd87e1616f33de6dbb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ccdbfe9398e4c225706599e6b291f4cf0e616df8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccdbfe9398e4c225706599e6b291f4cf0e616df8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ccdbfe9398e4c225706599e6b291f4cf0e616df8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ccdbfe9398e4c225706599e6b291f4cf0e616df8/comments", "author": {"login": "wschmidt-ibm", "id": 5520937, "node_id": "MDQ6VXNlcjU1MjA5Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5520937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wschmidt-ibm", "html_url": "https://github.com/wschmidt-ibm", "followers_url": "https://api.github.com/users/wschmidt-ibm/followers", "following_url": "https://api.github.com/users/wschmidt-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/wschmidt-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/wschmidt-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wschmidt-ibm/subscriptions", "organizations_url": "https://api.github.com/users/wschmidt-ibm/orgs", "repos_url": "https://api.github.com/users/wschmidt-ibm/repos", "events_url": "https://api.github.com/users/wschmidt-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/wschmidt-ibm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b8f4e58fbcd3fa19e8bdc65652e58b5c7f8d6f42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8f4e58fbcd3fa19e8bdc65652e58b5c7f8d6f42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8f4e58fbcd3fa19e8bdc65652e58b5c7f8d6f42"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "c4b237c284b1f7cffe64bbb1b48f798e68d90c19", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ccdbfe9398e4c225706599e6b291f4cf0e616df8", "patch": "@@ -1,3 +1,11 @@\n+2012-09-11  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n+\n+\tPR tree-optimization/55492\n+\t* doc/invoke.texi (max-slsr-cand-scan): New description.\n+\t* gimple-ssa-strength-reduction.c (find_basis_for_candidate): Limit\n+\tthe time spent searching for a basis.\n+\t* params.def (PARAM_MAX_SLSR_CANDIDATE_SCAN): New param.\n+\n 2012-09-11  Richard Guenther  <rguenther@suse.de>\n \n \t* gimple.h (gimple_register_type): Remove."}, {"sha": "1a854b06a6766eb82198b733f3ac9274aa01654e", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=ccdbfe9398e4c225706599e6b291f4cf0e616df8", "patch": "@@ -9407,6 +9407,11 @@ having a regular register file and accurate register pressure classes.\n See @file{haifa-sched.c} in the GCC sources for more details.\n \n The default choice depends on the target.\n+\n+@item max-slsr-cand-scan\n+Set the maximum number of existing candidates that will be considered when\n+seeking a basis for a new straight-line strength reduction candidate.\n+\n @end table\n @end table\n "}, {"sha": "87684b3054362c3bceb050478d01cd8bfff81f9c", "filename": "gcc/gimple-ssa-strength-reduction.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2Fgimple-ssa-strength-reduction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2Fgimple-ssa-strength-reduction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-ssa-strength-reduction.c?ref=ccdbfe9398e4c225706599e6b291f4cf0e616df8", "patch": "@@ -54,6 +54,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"domwalk.h\"\n #include \"pointer-set.h\"\n #include \"expmed.h\"\n+#include \"params.h\"\n \f\n /* Information about a strength reduction candidate.  Each statement\n    in the candidate table represents an expression of one of the\n@@ -353,10 +354,14 @@ find_basis_for_candidate (slsr_cand_t c)\n   cand_chain_t chain;\n   slsr_cand_t basis = NULL;\n \n+  // Limit potential of N^2 behavior for long candidate chains.\n+  int iters = 0;\n+  int max_iters = PARAM_VALUE (PARAM_MAX_SLSR_CANDIDATE_SCAN);\n+\n   mapping_key.base_expr = c->base_expr;\n   chain = (cand_chain_t) htab_find (base_cand_map, &mapping_key);\n \n-  for (; chain; chain = chain->next)\n+  for (; chain && iters < max_iters; chain = chain->next, ++iters)\n     {\n       slsr_cand_t one_basis = chain->cand;\n "}, {"sha": "a4c930b9e3cc4abd293e76230c8e58c24088645f", "filename": "gcc/params.def", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2Fparams.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ccdbfe9398e4c225706599e6b291f4cf0e616df8/gcc%2Fparams.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fparams.def?ref=ccdbfe9398e4c225706599e6b291f4cf0e616df8", "patch": "@@ -979,6 +979,13 @@ DEFPARAM (PARAM_SCHED_PRESSURE_ALGORITHM,\n \t  \"Which -fsched-pressure algorithm to apply\",\n \t  1, 1, 2)\n \n+/* Maximum length of candidate scans in straight-line strength reduction.  */\n+DEFPARAM (PARAM_MAX_SLSR_CANDIDATE_SCAN,\n+\t  \"max-slsr-cand-scan\",\n+\t  \"Maximum length of candidate scans for straight-line \"\n+\t  \"strength reduction\",\n+\t  50, 1, 999999)\n+\n /*\n Local variables:\n mode:c"}]}