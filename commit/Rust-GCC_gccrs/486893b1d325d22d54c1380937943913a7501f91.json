{"sha": "486893b1d325d22d54c1380937943913a7501f91", "node_id": "C_kwDOANBUbNoAKDQ4Njg5M2IxZDMyNWQyMmQ1NGMxMzgwOTM3OTQzOTEzYTc1MDFmOTE", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2022-06-27T13:34:16Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gnu.org", "date": "2022-06-27T13:34:16Z"}, "message": "libstdc++: check for openat with dirfd in std::filesystem\n\nIn the recent patch to check for openat, I missed an occurrence of\ndirfd in std::filesystem.\n\n\nfor  libstdc++-v3/ChangeLog\n\n\t* src/c++17/fs_dir.cc (dir_and_pathname): Use dirfd if\n\t_GLIBCXX_HAVE_OPENAT.", "tree": {"sha": "56c01059b4766fe3d08c3f1fd6ee52cc030f64e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56c01059b4766fe3d08c3f1fd6ee52cc030f64e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/486893b1d325d22d54c1380937943913a7501f91", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/486893b1d325d22d54c1380937943913a7501f91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/486893b1d325d22d54c1380937943913a7501f91", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/486893b1d325d22d54c1380937943913a7501f91/comments", "author": null, "committer": null, "parents": [{"sha": "ca35ebaec8369b0c722d82e1f81687ba52a6e43f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca35ebaec8369b0c722d82e1f81687ba52a6e43f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca35ebaec8369b0c722d82e1f81687ba52a6e43f"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "25b33baa875fb417fae34f4b03513b5fd68e9f7b", "filename": "libstdc++-v3/src/c++17/fs_dir.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/486893b1d325d22d54c1380937943913a7501f91/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2Ffs_dir.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/486893b1d325d22d54c1380937943913a7501f91/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2Ffs_dir.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2Ffs_dir.cc?ref=486893b1d325d22d54c1380937943913a7501f91", "patch": "@@ -124,7 +124,7 @@ struct fs::_Dir : _Dir_base\n   dir_and_pathname() const noexcept\n   {\n     const fs::path& p = entry.path();\n-#if _GLIBCXX_HAVE_DIRFD\n+#if _GLIBCXX_HAVE_DIRFD && _GLIBCXX_HAVE_OPENAT\n     if (!p.empty())\n       return {::dirfd(this->dirp), std::prev(p.end())->c_str()};\n #endif"}]}