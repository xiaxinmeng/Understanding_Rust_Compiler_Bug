{"sha": "fbe91804589555b48f00e1e26b98096745fc6882", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmJlOTE4MDQ1ODk1NTViNDhmMDBlMWUyNmI5ODA5Njc0NWZjNjg4Mg==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2017-04-25T14:10:52Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2017-04-25T14:10:52Z"}, "message": "C++: fix-it hint for removing stray semicolons\n\ngcc/cp/ChangeLog:\n\t* parser.c (cp_parser_member_declaration): Add fix-it hint\n\tfor removing stray semicolons.\n\ngcc/testsuite/ChangeLog:\n\t* g++.dg/semicolon-fixits.C: New test case.\n\nFrom-SVN: r247244", "tree": {"sha": "95dffe7a23f7b79c3d296372f0180e4047adeda3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95dffe7a23f7b79c3d296372f0180e4047adeda3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fbe91804589555b48f00e1e26b98096745fc6882", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbe91804589555b48f00e1e26b98096745fc6882", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fbe91804589555b48f00e1e26b98096745fc6882", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fbe91804589555b48f00e1e26b98096745fc6882/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1c4ea66f24bc3801448d5c88847fc97d4e2767ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c4ea66f24bc3801448d5c88847fc97d4e2767ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c4ea66f24bc3801448d5c88847fc97d4e2767ee"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "9c8ad1077e452b763e10d3c1eeeb6af2b5a8fa07", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=fbe91804589555b48f00e1e26b98096745fc6882", "patch": "@@ -1,3 +1,8 @@\n+2017-04-25  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* parser.c (cp_parser_member_declaration): Add fix-it hint\n+\tfor removing stray semicolons.\n+\n 2017-04-25  David Malcolm  <dmalcolm@redhat.com>\n \n \t* name-lookup.c (get_std_name_hint): New function."}, {"sha": "c9780f801db5a43fdd5410d785401ef164fb5a8e", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=fbe91804589555b48f00e1e26b98096745fc6882", "patch": "@@ -23127,7 +23127,11 @@ cp_parser_member_declaration (cp_parser* parser)\n \t{\n \t  cp_token *token = cp_lexer_peek_token (parser->lexer);\n \t  if (!in_system_header_at (token->location))\n-\t    pedwarn (token->location, OPT_Wpedantic, \"extra %<;%>\");\n+\t    {\n+\t      gcc_rich_location richloc (token->location);\n+\t      richloc.add_fixit_remove ();\n+\t      pedwarn_at_rich_loc (&richloc, OPT_Wpedantic, \"extra %<;%>\");\n+\t    }\n \t}\n       else\n \t{"}, {"sha": "2c00ce853985518026f3e4e42d89895683a8a62a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fbe91804589555b48f00e1e26b98096745fc6882", "patch": "@@ -1,3 +1,7 @@\n+2017-04-25  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* g++.dg/semicolon-fixits.C: New test case.\n+\n 2017-04-25  David Malcolm  <dmalcolm@redhat.com>\n \n \t* gcc.dg/semicolon-fixits.c: New test case."}, {"sha": "a9cc783b1725ae34a02ebe06cdcc62f7741986bb", "filename": "gcc/testsuite/g++.dg/semicolon-fixits.C", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsemicolon-fixits.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fbe91804589555b48f00e1e26b98096745fc6882/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsemicolon-fixits.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fsemicolon-fixits.C?ref=fbe91804589555b48f00e1e26b98096745fc6882", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-options \"-fdiagnostics-show-caret -Wpedantic\" } */\n+\n+/* Struct with extra semicolon.  */\n+struct s1 { int i;; }; /* { dg-warning \"19: extra .;.\" } */\n+/* { dg-begin-multiline-output \"\" }\n+ struct s1 { int i;; };\n+                   ^\n+                   -\n+   { dg-end-multiline-output \"\" } */\n+\n+/* Union with extra semicolon.  */\n+union u1 { int i;; }; /* { dg-warning \"18: extra .;.\" } */\n+/* { dg-begin-multiline-output \"\" }\n+ union u1 { int i;; };\n+                  ^\n+                  -\n+   { dg-end-multiline-output \"\" } */"}]}