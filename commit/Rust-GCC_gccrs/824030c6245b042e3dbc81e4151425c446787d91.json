{"sha": "824030c6245b042e3dbc81e4151425c446787d91", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODI0MDMwYzYyNDViMDQyZTNkYmM4MWU0MTUxNDI1YzQ0Njc4N2Q5MQ==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@redhat.com", "date": "2002-06-03T17:59:29Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2002-06-03T17:59:29Z"}, "message": "configure.in: Support cross-compiling.\n\n\t* configure.in: Support cross-compiling.\n\t* configure: Regenerate.\n\t* aclocal.m4 (gcc_AC_COMPILE_CHECK_SIZEOF): New.\n\t(gcc_AC_EXAMINE_OBJECT): New.\n\t(fastjar_AC_COMPILE_C_BIGENDIAN): New.\n\nFrom-SVN: r54216", "tree": {"sha": "c4ddc8ca6594c2bdf82174fd665a3501c24db843", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c4ddc8ca6594c2bdf82174fd665a3501c24db843"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/824030c6245b042e3dbc81e4151425c446787d91", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/824030c6245b042e3dbc81e4151425c446787d91", "html_url": "https://github.com/Rust-GCC/gccrs/commit/824030c6245b042e3dbc81e4151425c446787d91", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/824030c6245b042e3dbc81e4151425c446787d91/comments", "author": null, "committer": null, "parents": [{"sha": "a1a56c25fbbb4ca8503513ffffda229011a6b711", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1a56c25fbbb4ca8503513ffffda229011a6b711", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1a56c25fbbb4ca8503513ffffda229011a6b711"}], "stats": {"total": 611, "additions": 351, "deletions": 260}, "files": [{"sha": "42cc98ab390492ff5931945bf297653ee4cd59c4", "filename": "fastjar/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2FChangeLog?ref=824030c6245b042e3dbc81e4151425c446787d91", "patch": "@@ -1,3 +1,11 @@\n+2002-06-03  Geoffrey Keating  <geoffk@redhat.com>\n+\n+\t* configure.in: Support cross-compiling.\n+\t* configure: Regenerate.\n+\t* aclocal.m4 (gcc_AC_COMPILE_CHECK_SIZEOF): New.\n+\t(gcc_AC_EXAMINE_OBJECT): New.\n+\t(fastjar_AC_COMPILE_C_BIGENDIAN): New.\n+\n 2002-03-18  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n \n \t* jartool.c (expand_options): Handle tar-style argument list with a"}, {"sha": "ed682bbd09066ed53f4ad3ab51c0f9b51fa2ca05", "filename": "fastjar/aclocal.m4", "status": "modified", "additions": 111, "deletions": 0, "changes": 111, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Faclocal.m4?ref=824030c6245b042e3dbc81e4151425c446787d91", "patch": "@@ -158,3 +158,114 @@ else\n   $1_FALSE=\n fi])\n \n+dnl Host type sizes probe.\n+dnl By Kaveh R. Ghazi.  One typo fixed since.\n+dnl\n+AC_DEFUN([gcc_AC_COMPILE_CHECK_SIZEOF],\n+[changequote(<<, >>)dnl\n+dnl The name to #define.\n+define(<<AC_TYPE_NAME>>, translit(sizeof_$1, [a-z *], [A-Z_P]))dnl\n+dnl The cache variable name.\n+define(<<AC_CV_NAME>>, translit(ac_cv_sizeof_$1, [ *], [_p]))dnl\n+changequote([, ])dnl\n+AC_MSG_CHECKING(size of $1)\n+AC_CACHE_VAL(AC_CV_NAME,\n+[for ac_size in 4 8 1 2 16 $3 ; do # List sizes in rough order of prevalence.\n+  AC_TRY_COMPILE([#include \"confdefs.h\"\n+#include <sys/types.h>\n+$2\n+], [switch (0) case 0: case (sizeof ($1) == $ac_size):;], AC_CV_NAME=$ac_size)\n+  if test x$AC_CV_NAME != x ; then break; fi\n+done\n+])\n+if test x$AC_CV_NAME = x ; then\n+  AC_MSG_ERROR([cannot determine a size for $1])\n+fi\n+AC_MSG_RESULT($AC_CV_NAME)\n+AC_DEFINE_UNQUOTED(AC_TYPE_NAME, $AC_CV_NAME, [The number of bytes in type $1])\n+undefine([AC_TYPE_NAME])dnl\n+undefine([AC_CV_NAME])dnl\n+])\n+\n+dnl Utility macro used by next two tests.\n+dnl AC_EXAMINE_OBJECT(C source code,\n+dnl\tcommands examining object file,\n+dnl\t[commands to run if compile failed]):\n+dnl\n+dnl Compile the source code to an object file; then convert it into a\n+dnl printable representation.  All unprintable characters and\n+dnl asterisks (*) are replaced by dots (.).  All white space is\n+dnl deleted.  Newlines (ASCII 0x10) in the input are preserved in the\n+dnl output, but runs of newlines are compressed to a single newline.\n+dnl Finally, line breaks are forcibly inserted so that no line is\n+dnl longer than 80 columns and the file ends with a newline.  The\n+dnl result of all this processing is in the file conftest.dmp, which\n+dnl may be examined by the commands in the second argument.\n+dnl\n+AC_DEFUN([gcc_AC_EXAMINE_OBJECT],\n+[AC_LANG_SAVE\n+AC_LANG_C\n+dnl Next bit cribbed from AC_TRY_COMPILE.\n+cat > conftest.$ac_ext <<EOF\n+[#line __oline__ \"configure\"\n+#include \"confdefs.h\"\n+$1\n+]EOF\n+if AC_TRY_EVAL(ac_compile); then\n+  od -c conftest.o |\n+    sed ['s/^[0-7]*[ \t]*/ /\n+\t  s/\\*/./g\n+\t  s/ \\\\n/*/g\n+\t  s/ [0-9][0-9][0-9]/./g\n+\t  s/  \\\\[^ ]/./g'] |\n+    tr -d '\n+ ' | tr -s '*' '\n+' | fold | sed '$a\\\n+' > conftest.dmp\n+  $2\n+ifelse($3, , , else\n+  $3\n+)dnl\n+fi\n+rm -rf conftest*\n+AC_LANG_RESTORE])\n+\n+dnl Host endianness probe.\n+dnl Differs from AC_C_BIGENDIAN in that it does not require\n+dnl running a program on the host.\n+dnl\n+AC_DEFUN([fastjar_AC_COMPILE_C_BIGENDIAN],\n+[AC_CACHE_CHECK(byte ordering, ac_cv_c_compile_endian,\n+[ac_cv_c_compile_endian=unknown\n+gcc_AC_EXAMINE_OBJECT([\n+#ifdef HAVE_LIMITS_H\n+# include <limits.h>\n+#endif\n+/* This structure must have no internal padding.  */\n+  struct {\n+    char prefix[sizeof \"\\nendian:\" - 1];\n+    short word;\n+    char postfix[2];\n+ } tester = {\n+    \"\\nendian:\",\n+#if SIZEOF_SHORT == 4\n+    ('A' << (CHAR_BIT * 3)) | ('B' << (CHAR_BIT * 2)) |\n+#endif\n+    ('A' << CHAR_BIT) | 'B',\n+    'X', '\\n'\n+};],\n+ [if   grep 'endian:AB' conftest.dmp >/dev/null 2>&1; then\n+    ac_cv_c_compile_endian=big-endian\n+  elif grep 'endian:BA' conftest.dmp >/dev/null 2>&1; then\n+    ac_cv_c_compile_endian=little-endian\n+  fi])\n+])\n+if test $ac_cv_c_compile_endian = unknown; then\n+  AC_MSG_ERROR([*** unable to determine endianness])\n+elif test $ac_cv_c_compile_endian = big-endian; then\n+  AC_DEFINE(WORDS_BIG_ENDIAN, 1,\n+  [Define if the host machine stores words of multi-word integers in\n+   big-endian order.])\n+fi\n+])\n+"}, {"sha": "f96a4ddd6221fcc3fed63b66f4f2f1f547f5cc19", "filename": "fastjar/configure", "status": "modified", "additions": 226, "deletions": 254, "changes": 480, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fconfigure?ref=824030c6245b042e3dbc81e4151425c446787d91", "patch": "@@ -33,7 +33,6 @@ program_suffix=NONE\n program_transform_name=s,x,x,\n silent=\n site=\n-sitefile=\n srcdir=\n target=NONE\n verbose=\n@@ -148,7 +147,6 @@ Configuration:\n   --help                  print this message\n   --no-create             do not create output files\n   --quiet, --silent       do not print \\`checking...' messages\n-  --site-file=FILE        use FILE as the site file\n   --version               print the version of autoconf that created configure\n Directory and file names:\n   --prefix=PREFIX         install architecture-independent files in PREFIX\n@@ -319,11 +317,6 @@ EOF\n   -site=* | --site=* | --sit=*)\n     site=\"$ac_optarg\" ;;\n \n-  -site-file | --site-file | --site-fil | --site-fi | --site-f)\n-    ac_prev=sitefile ;;\n-  -site-file=* | --site-file=* | --site-fil=* | --site-fi=* | --site-f=*)\n-    sitefile=\"$ac_optarg\" ;;\n-\n   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)\n     ac_prev=srcdir ;;\n   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)\n@@ -489,16 +482,12 @@ fi\n srcdir=`echo \"${srcdir}\" | sed 's%\\([^/]\\)/*$%\\1%'`\n \n # Prefer explicitly selected file to automatically selected ones.\n-if test -z \"$sitefile\"; then\n-  if test -z \"$CONFIG_SITE\"; then\n-    if test \"x$prefix\" != xNONE; then\n-      CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n-    else\n-      CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n-    fi\n+if test -z \"$CONFIG_SITE\"; then\n+  if test \"x$prefix\" != xNONE; then\n+    CONFIG_SITE=\"$prefix/share/config.site $prefix/etc/config.site\"\n+  else\n+    CONFIG_SITE=\"$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site\"\n   fi\n-else\n-  CONFIG_SITE=\"$sitefile\"\n fi\n for ac_site_file in $CONFIG_SITE; do\n   if test -r \"$ac_site_file\"; then\n@@ -568,7 +557,7 @@ ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:572: checking for a BSD compatible install\" >&5\n+echo \"configure:561: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -621,7 +610,7 @@ test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n echo $ac_n \"checking whether build environment is sane\"\"... $ac_c\" 1>&6\n-echo \"configure:625: checking whether build environment is sane\" >&5\n+echo \"configure:614: checking whether build environment is sane\" >&5\n # Just in case\n sleep 1\n echo timestamp > conftestfile\n@@ -678,7 +667,7 @@ test \"$program_suffix\" != NONE &&\n test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:682: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:671: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -724,7 +713,7 @@ EOF\n \n missing_dir=`cd $ac_aux_dir && pwd`\n echo $ac_n \"checking for working aclocal\"\"... $ac_c\" 1>&6\n-echo \"configure:728: checking for working aclocal\" >&5\n+echo \"configure:717: checking for working aclocal\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -737,7 +726,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoconf\"\"... $ac_c\" 1>&6\n-echo \"configure:741: checking for working autoconf\" >&5\n+echo \"configure:730: checking for working autoconf\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -750,7 +739,7 @@ else\n fi\n \n echo $ac_n \"checking for working automake\"\"... $ac_c\" 1>&6\n-echo \"configure:754: checking for working automake\" >&5\n+echo \"configure:743: checking for working automake\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -763,7 +752,7 @@ else\n fi\n \n echo $ac_n \"checking for working autoheader\"\"... $ac_c\" 1>&6\n-echo \"configure:767: checking for working autoheader\" >&5\n+echo \"configure:756: checking for working autoheader\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -776,7 +765,7 @@ else\n fi\n \n echo $ac_n \"checking for working makeinfo\"\"... $ac_c\" 1>&6\n-echo \"configure:780: checking for working makeinfo\" >&5\n+echo \"configure:769: checking for working makeinfo\" >&5\n # Run test in a subshell; some versions of sh will print an error if\n # an executable is not found, even if stderr is redirected.\n # Redirect stdin to placate older versions of autoconf.  Sigh.\n@@ -796,7 +785,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:800: checking for $ac_word\" >&5\n+echo \"configure:789: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -826,7 +815,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:830: checking for $ac_word\" >&5\n+echo \"configure:819: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -877,7 +866,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:881: checking for $ac_word\" >&5\n+echo \"configure:870: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -909,7 +898,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:913: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:902: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -920,12 +909,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 924 \"configure\"\n+#line 913 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:929: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:918: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -951,12 +940,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:955: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:944: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:960: checking whether we are using GNU C\" >&5\n+echo \"configure:949: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -965,7 +954,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:969: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:958: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -984,7 +973,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:988: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:977: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1027,7 +1016,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1031: checking for a BSD compatible install\" >&5\n+echo \"configure:1020: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1082,7 +1071,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n # Extract the first word of \"rm\", so it can be a program name with args.\n set dummy rm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1086: checking for $ac_word\" >&5\n+echo \"configure:1075: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_RM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1118,7 +1107,7 @@ fi\n # Extract the first word of \"cp\", so it can be a program name with args.\n set dummy cp; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1122: checking for $ac_word\" >&5\n+echo \"configure:1111: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_CP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1154,7 +1143,7 @@ fi\n # Extract the first word of \"strip\", so it can be a program name with args.\n set dummy strip; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1158: checking for $ac_word\" >&5\n+echo \"configure:1147: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_STRIP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1190,7 +1179,7 @@ fi\n # Extract the first word of \"chmod\", so it can be a program name with args.\n set dummy chmod; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1194: checking for $ac_word\" >&5\n+echo \"configure:1183: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_CHMOD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1224,12 +1213,12 @@ else\n fi\n \n echo $ac_n \"checking for Cygwin environment\"\"... $ac_c\" 1>&6\n-echo \"configure:1228: checking for Cygwin environment\" >&5\n+echo \"configure:1217: checking for Cygwin environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_cygwin'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1233 \"configure\"\n+#line 1222 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -1240,7 +1229,7 @@ int main() {\n return __CYGWIN__;\n ; return 0; }\n EOF\n-if { (eval echo configure:1244: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1233: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_cygwin=yes\n else\n@@ -1257,19 +1246,19 @@ echo \"$ac_t\"\"$ac_cv_cygwin\" 1>&6\n CYGWIN=\n test \"$ac_cv_cygwin\" = yes && CYGWIN=yes\n echo $ac_n \"checking for mingw32 environment\"\"... $ac_c\" 1>&6\n-echo \"configure:1261: checking for mingw32 environment\" >&5\n+echo \"configure:1250: checking for mingw32 environment\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_mingw32'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1266 \"configure\"\n+#line 1255 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n return __MINGW32__;\n ; return 0; }\n EOF\n-if { (eval echo configure:1273: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1262: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_mingw32=yes\n else\n@@ -1288,7 +1277,7 @@ test \"$ac_cv_mingw32\" = yes && MINGW32=yes\n \n \n echo $ac_n \"checking for executable suffix\"\"... $ac_c\" 1>&6\n-echo \"configure:1292: checking for executable suffix\" >&5\n+echo \"configure:1281: checking for executable suffix\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_exeext'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1298,10 +1287,10 @@ else\n   rm -f conftest*\n   echo 'int main () { return 0; }' > conftest.$ac_ext\n   ac_cv_exeext=\n-  if { (eval echo configure:1302: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n+  if { (eval echo configure:1291: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; }; then\n     for file in conftest.*; do\n       case $file in\n-      *.c | *.o | *.obj | *.ilk | *.pdb) ;;\n+      *.c | *.o | *.obj) ;;\n       *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;\n       esac\n     done\n@@ -1320,7 +1309,7 @@ ac_exeext=$EXEEXT\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:1324: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:1313: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -1353,20 +1342,20 @@ for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr that defines DIR\"\"... $ac_c\" 1>&6\n-echo \"configure:1357: checking for $ac_hdr that defines DIR\" >&5\n+echo \"configure:1346: checking for $ac_hdr that defines DIR\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1362 \"configure\"\n+#line 1351 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <$ac_hdr>\n int main() {\n DIR *dirp = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:1370: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1359: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"ac_cv_header_dirent_$ac_safe=yes\"\n else\n@@ -1391,15 +1380,15 @@ done\n # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.\n if test $ac_header_dirent = dirent.h; then\n echo $ac_n \"checking for opendir in -ldir\"\"... $ac_c\" 1>&6\n-echo \"configure:1395: checking for opendir in -ldir\" >&5\n+echo \"configure:1384: checking for opendir in -ldir\" >&5\n ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-ldir  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1403 \"configure\"\n+#line 1392 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1410,7 +1399,7 @@ int main() {\n opendir()\n ; return 0; }\n EOF\n-if { (eval echo configure:1414: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1403: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1432,15 +1421,15 @@ fi\n \n else\n echo $ac_n \"checking for opendir in -lx\"\"... $ac_c\" 1>&6\n-echo \"configure:1436: checking for opendir in -lx\" >&5\n+echo \"configure:1425: checking for opendir in -lx\" >&5\n ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lx  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1444 \"configure\"\n+#line 1433 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1451,7 +1440,7 @@ int main() {\n opendir()\n ; return 0; }\n EOF\n-if { (eval echo configure:1455: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1444: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1474,7 +1463,7 @@ fi\n fi\n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1478: checking how to run the C preprocessor\" >&5\n+echo \"configure:1467: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1489,13 +1478,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1493 \"configure\"\n+#line 1482 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1499: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1488: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1506,13 +1495,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1510 \"configure\"\n+#line 1499 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1516: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1505: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1523,13 +1512,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1527 \"configure\"\n+#line 1516 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1533: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1522: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1554,20 +1543,20 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1558: checking for ANSI C header files\" >&5\n+echo \"configure:1547: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1563 \"configure\"\n+#line 1552 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1571: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1560: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1584,7 +1573,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1588 \"configure\"\n+#line 1577 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1602,7 +1591,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1606 \"configure\"\n+#line 1595 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1623,7 +1612,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1627 \"configure\"\n+#line 1616 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1634,7 +1623,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1638: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1627: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1658,20 +1647,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1662: checking whether struct tm is in sys/time.h or time.h\" >&5\n+echo \"configure:1651: checking whether struct tm is in sys/time.h or time.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1667 \"configure\"\n+#line 1656 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <time.h>\n int main() {\n struct tm *tp; tp->tm_sec;\n ; return 0; }\n EOF\n-if { (eval echo configure:1675: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1664: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm=time.h\n else\n@@ -1695,17 +1684,17 @@ for ac_hdr in fcntl.h unistd.h sys/param.h stdlib.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1699: checking for $ac_hdr\" >&5\n+echo \"configure:1688: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1704 \"configure\"\n+#line 1693 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1709: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1698: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1733,12 +1722,12 @@ done\n \n \n echo $ac_n \"checking for off_t\"\"... $ac_c\" 1>&6\n-echo \"configure:1737: checking for off_t\" >&5\n+echo \"configure:1726: checking for off_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_off_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1742 \"configure\"\n+#line 1731 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -1766,20 +1755,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether struct tm is in sys/time.h or time.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1770: checking whether struct tm is in sys/time.h or time.h\" >&5\n+echo \"configure:1759: checking whether struct tm is in sys/time.h or time.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tm'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1775 \"configure\"\n+#line 1764 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <time.h>\n int main() {\n struct tm *tp; tp->tm_sec;\n ; return 0; }\n EOF\n-if { (eval echo configure:1783: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1772: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tm=time.h\n else\n@@ -1801,37 +1790,37 @@ fi\n \n \n echo $ac_n \"checking size of char\"\"... $ac_c\" 1>&6\n-echo \"configure:1805: checking size of char\" >&5\n+echo \"configure:1794: checking size of char\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_char'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-  if test \"$cross_compiling\" = yes; then\n-    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n-else\n+  for ac_size in 4 8 1 2 16  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1813 \"configure\"\n+#line 1800 \"configure\"\n #include \"confdefs.h\"\n-#include <stdio.h>\n-main()\n-{\n-  FILE *f=fopen(\"conftestval\", \"w\");\n-  if (!f) exit(1);\n-  fprintf(f, \"%d\\n\", sizeof(char));\n-  exit(0);\n-}\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+\n+\n+int main() {\n+switch (0) case 0: case (sizeof (char) == $ac_size):;\n+; return 0; }\n EOF\n-if { (eval echo configure:1824: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n-then\n-  ac_cv_sizeof_char=`cat conftestval`\n+if { (eval echo configure:1810: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_sizeof_char=$ac_size\n else\n   echo \"configure: failed program was:\" >&5\n   cat conftest.$ac_ext >&5\n-  rm -fr conftest*\n-  ac_cv_sizeof_char=0\n fi\n-rm -fr conftest*\n+rm -f conftest*\n+  if test x$ac_cv_sizeof_char != x ; then break; fi\n+done\n+\n fi\n \n+if test x$ac_cv_sizeof_char = x ; then\n+  { echo \"configure: error: cannot determine a size for char\" 1>&2; exit 1; }\n fi\n echo \"$ac_t\"\"$ac_cv_sizeof_char\" 1>&6\n cat >> confdefs.h <<EOF\n@@ -1840,37 +1829,37 @@ EOF\n \n \n echo $ac_n \"checking size of short\"\"... $ac_c\" 1>&6\n-echo \"configure:1844: checking size of short\" >&5\n+echo \"configure:1833: checking size of short\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_short'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-  if test \"$cross_compiling\" = yes; then\n-    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n-else\n+  for ac_size in 4 8 1 2 16  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1852 \"configure\"\n+#line 1839 \"configure\"\n #include \"confdefs.h\"\n-#include <stdio.h>\n-main()\n-{\n-  FILE *f=fopen(\"conftestval\", \"w\");\n-  if (!f) exit(1);\n-  fprintf(f, \"%d\\n\", sizeof(short));\n-  exit(0);\n-}\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+\n+\n+int main() {\n+switch (0) case 0: case (sizeof (short) == $ac_size):;\n+; return 0; }\n EOF\n-if { (eval echo configure:1863: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n-then\n-  ac_cv_sizeof_short=`cat conftestval`\n+if { (eval echo configure:1849: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_sizeof_short=$ac_size\n else\n   echo \"configure: failed program was:\" >&5\n   cat conftest.$ac_ext >&5\n-  rm -fr conftest*\n-  ac_cv_sizeof_short=0\n fi\n-rm -fr conftest*\n+rm -f conftest*\n+  if test x$ac_cv_sizeof_short != x ; then break; fi\n+done\n+\n fi\n \n+if test x$ac_cv_sizeof_short = x ; then\n+  { echo \"configure: error: cannot determine a size for short\" 1>&2; exit 1; }\n fi\n echo \"$ac_t\"\"$ac_cv_sizeof_short\" 1>&6\n cat >> confdefs.h <<EOF\n@@ -1879,37 +1868,37 @@ EOF\n \n \n echo $ac_n \"checking size of int\"\"... $ac_c\" 1>&6\n-echo \"configure:1883: checking size of int\" >&5\n+echo \"configure:1872: checking size of int\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_int'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-  if test \"$cross_compiling\" = yes; then\n-    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n-else\n+  for ac_size in 4 8 1 2 16  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1891 \"configure\"\n+#line 1878 \"configure\"\n #include \"confdefs.h\"\n-#include <stdio.h>\n-main()\n-{\n-  FILE *f=fopen(\"conftestval\", \"w\");\n-  if (!f) exit(1);\n-  fprintf(f, \"%d\\n\", sizeof(int));\n-  exit(0);\n-}\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+\n+\n+int main() {\n+switch (0) case 0: case (sizeof (int) == $ac_size):;\n+; return 0; }\n EOF\n-if { (eval echo configure:1902: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n-then\n-  ac_cv_sizeof_int=`cat conftestval`\n+if { (eval echo configure:1888: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_sizeof_int=$ac_size\n else\n   echo \"configure: failed program was:\" >&5\n   cat conftest.$ac_ext >&5\n-  rm -fr conftest*\n-  ac_cv_sizeof_int=0\n fi\n-rm -fr conftest*\n+rm -f conftest*\n+  if test x$ac_cv_sizeof_int != x ; then break; fi\n+done\n+\n fi\n \n+if test x$ac_cv_sizeof_int = x ; then\n+  { echo \"configure: error: cannot determine a size for int\" 1>&2; exit 1; }\n fi\n echo \"$ac_t\"\"$ac_cv_sizeof_int\" 1>&6\n cat >> confdefs.h <<EOF\n@@ -1918,37 +1907,37 @@ EOF\n \n \n echo $ac_n \"checking size of long\"\"... $ac_c\" 1>&6\n-echo \"configure:1922: checking size of long\" >&5\n+echo \"configure:1911: checking size of long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-  if test \"$cross_compiling\" = yes; then\n-    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n-else\n+  for ac_size in 4 8 1 2 16  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1930 \"configure\"\n+#line 1917 \"configure\"\n #include \"confdefs.h\"\n-#include <stdio.h>\n-main()\n-{\n-  FILE *f=fopen(\"conftestval\", \"w\");\n-  if (!f) exit(1);\n-  fprintf(f, \"%d\\n\", sizeof(long));\n-  exit(0);\n-}\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+\n+\n+int main() {\n+switch (0) case 0: case (sizeof (long) == $ac_size):;\n+; return 0; }\n EOF\n-if { (eval echo configure:1941: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n-then\n-  ac_cv_sizeof_long=`cat conftestval`\n+if { (eval echo configure:1927: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_sizeof_long=$ac_size\n else\n   echo \"configure: failed program was:\" >&5\n   cat conftest.$ac_ext >&5\n-  rm -fr conftest*\n-  ac_cv_sizeof_long=0\n fi\n-rm -fr conftest*\n+rm -f conftest*\n+  if test x$ac_cv_sizeof_long != x ; then break; fi\n+done\n+\n fi\n \n+if test x$ac_cv_sizeof_long = x ; then\n+  { echo \"configure: error: cannot determine a size for long\" 1>&2; exit 1; }\n fi\n echo \"$ac_t\"\"$ac_cv_sizeof_long\" 1>&6\n cat >> confdefs.h <<EOF\n@@ -1957,37 +1946,37 @@ EOF\n \n \n echo $ac_n \"checking size of long long\"\"... $ac_c\" 1>&6\n-echo \"configure:1961: checking size of long long\" >&5\n+echo \"configure:1950: checking size of long long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-  if test \"$cross_compiling\" = yes; then\n-    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n-else\n+  for ac_size in 4 8 1 2 16  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1969 \"configure\"\n+#line 1956 \"configure\"\n #include \"confdefs.h\"\n-#include <stdio.h>\n-main()\n-{\n-  FILE *f=fopen(\"conftestval\", \"w\");\n-  if (!f) exit(1);\n-  fprintf(f, \"%d\\n\", sizeof(long long));\n-  exit(0);\n-}\n+#include \"confdefs.h\"\n+#include <sys/types.h>\n+\n+\n+int main() {\n+switch (0) case 0: case (sizeof (long long) == $ac_size):;\n+; return 0; }\n EOF\n-if { (eval echo configure:1980: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n-then\n-  ac_cv_sizeof_long_long=`cat conftestval`\n+if { (eval echo configure:1966: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_sizeof_long_long=$ac_size\n else\n   echo \"configure: failed program was:\" >&5\n   cat conftest.$ac_ext >&5\n-  rm -fr conftest*\n-  ac_cv_sizeof_long_long=0\n fi\n-rm -fr conftest*\n+rm -f conftest*\n+  if test x$ac_cv_sizeof_long_long != x ; then break; fi\n+done\n+\n fi\n \n+if test x$ac_cv_sizeof_long_long = x ; then\n+  { echo \"configure: error: cannot determine a size for long long\" 1>&2; exit 1; }\n fi\n echo \"$ac_t\"\"$ac_cv_sizeof_long_long\" 1>&6\n cat >> confdefs.h <<EOF\n@@ -1996,92 +1985,75 @@ EOF\n \n \n \n-echo $ac_n \"checking whether byte ordering is bigendian\"\"... $ac_c\" 1>&6\n-echo \"configure:2001: checking whether byte ordering is bigendian\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_c_bigendian'+set}'`\\\" = set\"; then\n+echo $ac_n \"checking byte ordering\"\"... $ac_c\" 1>&6\n+echo \"configure:1990: checking byte ordering\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_c_compile_endian'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n-  ac_cv_c_bigendian=unknown\n-# See if sys/param.h defines the BYTE_ORDER macro.\n-cat > conftest.$ac_ext <<EOF\n-#line 2008 \"configure\"\n-#include \"confdefs.h\"\n-#include <sys/types.h>\n-#include <sys/param.h>\n-int main() {\n+  ac_cv_c_compile_endian=unknown\n+\n+ac_ext=c\n+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+cross_compiling=$ac_cv_prog_cc_cross\n \n-#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN\n- bogus endian macros\n-#endif\n-; return 0; }\n-EOF\n-if { (eval echo configure:2019: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n-  rm -rf conftest*\n-  # It does; now see whether it defined to BIG_ENDIAN or not.\n cat > conftest.$ac_ext <<EOF\n-#line 2023 \"configure\"\n+#line 2004 \"configure\"\n #include \"confdefs.h\"\n-#include <sys/types.h>\n-#include <sys/param.h>\n-int main() {\n \n-#if BYTE_ORDER != BIG_ENDIAN\n- not big endian\n+#ifdef HAVE_LIMITS_H\n+# include <limits.h>\n #endif\n-; return 0; }\n-EOF\n-if { (eval echo configure:2034: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n-  rm -rf conftest*\n-  ac_cv_c_bigendian=yes\n-else\n-  echo \"configure: failed program was:\" >&5\n-  cat conftest.$ac_ext >&5\n-  rm -rf conftest*\n-  ac_cv_c_bigendian=no\n-fi\n-rm -f conftest*\n-else\n-  echo \"configure: failed program was:\" >&5\n-  cat conftest.$ac_ext >&5\n-fi\n-rm -f conftest*\n-if test $ac_cv_c_bigendian = unknown; then\n-if test \"$cross_compiling\" = yes; then\n-    { echo \"configure: error: can not run test program while cross compiling\" 1>&2; exit 1; }\n-else\n-  cat > conftest.$ac_ext <<EOF\n-#line 2054 \"configure\"\n-#include \"confdefs.h\"\n-main () {\n-  /* Are we little or big endian?  From Harbison&Steele.  */\n-  union\n-  {\n-    long l;\n-    char c[sizeof (long)];\n-  } u;\n-  u.l = 1;\n-  exit (u.c[sizeof (long) - 1] == 1);\n-}\n+/* This structure must have no internal padding.  */\n+  struct {\n+    char prefix[sizeof \"\\nendian:\" - 1];\n+    short word;\n+    char postfix[2];\n+ } tester = {\n+    \"\\nendian:\",\n+#if SIZEOF_SHORT == 4\n+    ('A' << (CHAR_BIT * 3)) | ('B' << (CHAR_BIT * 2)) |\n+#endif\n+    ('A' << CHAR_BIT) | 'B',\n+    'X', '\\n'\n+};\n EOF\n-if { (eval echo configure:2067: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n-then\n-  ac_cv_c_bigendian=no\n-else\n-  echo \"configure: failed program was:\" >&5\n-  cat conftest.$ac_ext >&5\n-  rm -fr conftest*\n-  ac_cv_c_bigendian=yes\n-fi\n-rm -fr conftest*\n+if { (eval echo configure:2024: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  od -c conftest.o |\n+    sed 's/^[0-7]*[ \t]*/ /\n+\t  s/\\*/./g\n+\t  s/ \\\\n/*/g\n+\t  s/ [0-9][0-9][0-9]/./g\n+\t  s/  \\\\[^ ]/./g' |\n+    tr -d '\n+ ' | tr -s '*' '\n+' | fold | sed '$a\\\n+' > conftest.dmp\n+  if   grep 'endian:AB' conftest.dmp >/dev/null 2>&1; then\n+    ac_cv_c_compile_endian=big-endian\n+  elif grep 'endian:BA' conftest.dmp >/dev/null 2>&1; then\n+    ac_cv_c_compile_endian=little-endian\n+  fi\n fi\n+rm -rf conftest*\n+ac_ext=c\n+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n+ac_cpp='$CPP $CPPFLAGS'\n+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+cross_compiling=$ac_cv_prog_cc_cross\n+\n \n-fi\n fi\n \n-echo \"$ac_t\"\"$ac_cv_c_bigendian\" 1>&6\n-if test $ac_cv_c_bigendian = yes; then\n+echo \"$ac_t\"\"$ac_cv_c_compile_endian\" 1>&6\n+if test $ac_cv_c_compile_endian = unknown; then\n+  { echo \"configure: error: *** unable to determine endianness\" 1>&2; exit 1; }\n+elif test $ac_cv_c_compile_endian = big-endian; then\n   cat >> confdefs.h <<\\EOF\n-#define WORDS_BIGENDIAN 1\n+#define WORDS_BIG_ENDIAN 1\n EOF\n \n fi\n@@ -2100,15 +2072,15 @@ ZINCS=\n use_zlib=maybe\n if test \"$with_system_zlib\" = yes; then\n    echo $ac_n \"checking for deflate in -lz\"\"... $ac_c\" 1>&6\n-echo \"configure:2104: checking for deflate in -lz\" >&5\n+echo \"configure:2076: checking for deflate in -lz\" >&5\n ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lz  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 2112 \"configure\"\n+#line 2084 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -2119,7 +2091,7 @@ int main() {\n deflate()\n ; return 0; }\n EOF\n-if { (eval echo configure:2123: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2095: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else"}, {"sha": "b27a8665aeb8699e5e9f898dec91d07e96177cab", "filename": "fastjar/configure.in", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/824030c6245b042e3dbc81e4151425c446787d91/fastjar%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fastjar%2Fconfigure.in?ref=824030c6245b042e3dbc81e4151425c446787d91", "patch": "@@ -31,14 +31,14 @@ AC_TYPE_OFF_T\n AC_STRUCT_TM\n \n dnl Check for type-widths\n-AC_CHECK_SIZEOF(char)\n-AC_CHECK_SIZEOF(short)\n-AC_CHECK_SIZEOF(int)\n-AC_CHECK_SIZEOF(long)\n-AC_CHECK_SIZEOF(long long)\n+gcc_AC_COMPILE_CHECK_SIZEOF(char)\n+gcc_AC_COMPILE_CHECK_SIZEOF(short)\n+gcc_AC_COMPILE_CHECK_SIZEOF(int)\n+gcc_AC_COMPILE_CHECK_SIZEOF(long)\n+gcc_AC_COMPILE_CHECK_SIZEOF(long long)\n \n dnl Check byte order\n-AC_C_BIGENDIAN\n+fastjar_AC_COMPILE_C_BIGENDIAN\n \n AC_ARG_WITH(system-zlib,\n [  --with-system-zlib      use installed libz])"}]}