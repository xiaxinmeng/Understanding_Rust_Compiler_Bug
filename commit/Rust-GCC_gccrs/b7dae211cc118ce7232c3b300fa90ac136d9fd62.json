{"sha": "b7dae211cc118ce7232c3b300fa90ac136d9fd62", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdkYWUyMTFjYzExOGNlNzIzMmMzYjMwMGZhOTBhYzEzNmQ5ZmQ2Mg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2009-10-17T15:40:53Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2009-10-17T15:40:53Z"}, "message": "lto-streamer-in.c (lto_input_location): Try to reuse previous maps.\n\n2009-10-17  Richard Guenther  <rguenther@suse.de>\n\n\t* lto-streamer-in.c (lto_input_location): Try to reuse\n\tprevious maps.\n\nFrom-SVN: r152953", "tree": {"sha": "dd8378404eaca9c09dec44f00935d8df7b4649d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd8378404eaca9c09dec44f00935d8df7b4649d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7dae211cc118ce7232c3b300fa90ac136d9fd62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7dae211cc118ce7232c3b300fa90ac136d9fd62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7dae211cc118ce7232c3b300fa90ac136d9fd62", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7dae211cc118ce7232c3b300fa90ac136d9fd62/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "96d356ef3f1fa86c4077012ac16e186ac34aaf3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96d356ef3f1fa86c4077012ac16e186ac34aaf3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96d356ef3f1fa86c4077012ac16e186ac34aaf3e"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "230f396c6c16694b56ba701ea486883f65218022", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7dae211cc118ce7232c3b300fa90ac136d9fd62/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7dae211cc118ce7232c3b300fa90ac136d9fd62/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b7dae211cc118ce7232c3b300fa90ac136d9fd62", "patch": "@@ -1,3 +1,8 @@\n+2009-10-17  Richard Guenther  <rguenther@suse.de>\n+\n+\t* lto-streamer-in.c (lto_input_location): Try to reuse\n+\tprevious maps.\n+\n 2009-10-17  Richard Guenther  <rguenther@suse.de>\n \n \t* lto-streamer-in.c (input_gimple_stmt): Fixup FIELD_DECL"}, {"sha": "4f7551d0d171911760b659ac044c5382a6b3a70a", "filename": "gcc/lto-streamer-in.c", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7dae211cc118ce7232c3b300fa90ac136d9fd62/gcc%2Flto-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7dae211cc118ce7232c3b300fa90ac136d9fd62/gcc%2Flto-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-streamer-in.c?ref=b7dae211cc118ce7232c3b300fa90ac136d9fd62", "patch": "@@ -274,26 +274,30 @@ static location_t\n lto_input_location (struct lto_input_block *ib, struct data_in *data_in)\n {\n   expanded_location xloc;\n-  location_t loc;\n \n   xloc.file = input_string (data_in, ib);\n   if (xloc.file == NULL)\n     return UNKNOWN_LOCATION;\n \n+  xloc.file = canon_file_name (xloc.file);\n   xloc.line = lto_input_sleb128 (ib);\n   xloc.column = lto_input_sleb128 (ib);\n \n-  if (data_in->current_file)\n-    linemap_add (line_table, LC_LEAVE, false, NULL, 0);\n+  if (data_in->current_file != xloc.file)\n+    {\n+      if (data_in->current_file)\n+\tlinemap_add (line_table, LC_LEAVE, false, NULL, 0);\n \n-  data_in->current_file = canon_file_name (xloc.file);\n+      linemap_add (line_table, LC_ENTER, false, xloc.file, xloc.line);\n+    }\n+  else if (data_in->current_line != xloc.line)\n+    linemap_line_start (line_table, xloc.line, xloc.column);\n+\n+  data_in->current_file = xloc.file;\n   data_in->current_line = xloc.line;\n   data_in->current_col = xloc.column;\n \n-  linemap_add (line_table, LC_ENTER, false, data_in->current_file, xloc.line);\n-  LINEMAP_POSITION_FOR_COLUMN (loc, line_table, xloc.column);\n-\n-  return loc;\n+  return linemap_position_for_column (line_table, xloc.column);\n }\n \n "}]}