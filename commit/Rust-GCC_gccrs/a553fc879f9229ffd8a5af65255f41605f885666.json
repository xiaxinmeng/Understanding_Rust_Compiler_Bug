{"sha": "a553fc879f9229ffd8a5af65255f41605f885666", "node_id": "C_kwDOANBUbNoAKGE1NTNmYzg3OWY5MjI5ZmZkOGE1YWY2NTI1NWY0MTYwNWY4ODU2NjY", "commit": {"author": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-02-25T21:45:35Z"}, "committer": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-02-25T21:45:35Z"}, "message": "Disable tower socket runtest\n\nThe projects-pim-run-pass-tower.exp test blocks indefinitely\non some platforms.  This patch disables it for now - it should\nbe enabled once a cross platform fix for RTint.mod is found.\n\ngcc/testsuite/ChangeLog:\n\n\t* gm2/projects/pim/run/pass/tower/projects-pim-run-pass-tower.exp\n\t(gm2_run_tower_test): New global variable.  Add conditional\n\tbefore invoking gm2-local-exec.\n\nSigned-off-by: Gaius Mulley <gaiusmod2@gmail.com>", "tree": {"sha": "ea5209f029c5a1a21645ca21f3dd9beb66f2a512", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea5209f029c5a1a21645ca21f3dd9beb66f2a512"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a553fc879f9229ffd8a5af65255f41605f885666", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a553fc879f9229ffd8a5af65255f41605f885666", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a553fc879f9229ffd8a5af65255f41605f885666", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a553fc879f9229ffd8a5af65255f41605f885666/comments", "author": null, "committer": null, "parents": [{"sha": "5c638095e7e0fa4de4e4f7326384a86830b25732", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c638095e7e0fa4de4e4f7326384a86830b25732", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c638095e7e0fa4de4e4f7326384a86830b25732"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "927dbc5da667a587a47a21e2f374f465f80753cb", "filename": "gcc/testsuite/gm2/projects/pim/run/pass/tower/projects-pim-run-pass-tower.exp", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a553fc879f9229ffd8a5af65255f41605f885666/gcc%2Ftestsuite%2Fgm2%2Fprojects%2Fpim%2Frun%2Fpass%2Ftower%2Fprojects-pim-run-pass-tower.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a553fc879f9229ffd8a5af65255f41605f885666/gcc%2Ftestsuite%2Fgm2%2Fprojects%2Fpim%2Frun%2Fpass%2Ftower%2Fprojects-pim-run-pass-tower.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgm2%2Fprojects%2Fpim%2Frun%2Fpass%2Ftower%2Fprojects-pim-run-pass-tower.exp?ref=a553fc879f9229ffd8a5af65255f41605f885666", "patch": "@@ -29,6 +29,7 @@ load_lib gm2-simple.exp\n gm2_init_cor \"${srcdir}/${subdir}\" -g\n gm2_link_obj \"advflex.o AdvCmd.o AdvIntroduction.o AdvMap.o AdvMath.o AdvParse.o AdvSound.o AdvSystem.o AdvTreasure.o AdvUtil.o DrawG.o DrawL.o Lock.o ProcArgs.o Screen.o Window.o SocketControl.o\"\n \n+set gm2_run_tower_test 0\n \n proc gm2-local-exec { testcase execname mapfile } {\n     global tool;\n@@ -105,6 +106,11 @@ foreach testcase [lsort [glob -nocomplain $srcdir/$subdir/Dungeon.mod]] {\n \n     global tmpdir;\n     set executable $tmpdir/[file tail [file rootname $testcase].x];\n-    gm2-local-exec ${testcase} ${executable} $srcdir/$subdir/star\n+\n+    if { ${gm2_run_tower_test} } then {\n+        gm2-local-exec ${testcase} ${executable} $srcdir/$subdir/star\n+    } else {\n+\tverbose \"not running tower socket test\" 1\n+    }\n     remote_file build delete ${executable};\n }"}]}