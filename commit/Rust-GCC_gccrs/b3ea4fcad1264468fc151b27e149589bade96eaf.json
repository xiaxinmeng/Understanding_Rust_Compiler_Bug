{"sha": "b3ea4fcad1264468fc151b27e149589bade96eaf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNlYTRmY2FkMTI2NDQ2OGZjMTUxYjI3ZTE0OTU4OWJhZGU5NmVhZg==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1996-06-07T07:32:54Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1996-06-07T07:32:54Z"}, "message": "fixincludes: When running find...\n\n* fixincludes:  When running find, add \"/.\" to directory name\nto force expanding symlinks to directories.\n\nFrom-SVN: r12211", "tree": {"sha": "c3c7d70ddd73998b739fd78c96b1d4faf07bc4f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3c7d70ddd73998b739fd78c96b1d4faf07bc4f5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3ea4fcad1264468fc151b27e149589bade96eaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3ea4fcad1264468fc151b27e149589bade96eaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3ea4fcad1264468fc151b27e149589bade96eaf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3ea4fcad1264468fc151b27e149589bade96eaf/comments", "author": null, "committer": null, "parents": [{"sha": "35e93fb4de2c65d0db5ae0112db911cdcd90a818", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35e93fb4de2c65d0db5ae0112db911cdcd90a818", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35e93fb4de2c65d0db5ae0112db911cdcd90a818"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "5ecdd7c0127c8ec282059c3fa94c02f3c7a474a8", "filename": "gcc/fixincludes", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3ea4fcad1264468fc151b27e149589bade96eaf/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3ea4fcad1264468fc151b27e149589bade96eaf/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=b3ea4fcad1264468fc151b27e149589bade96eaf", "patch": "@@ -75,22 +75,19 @@ do\n     for d in $dirs\n     do\n \techo \" Searching $INPUT/$d\"\n-\tif [ \"$d\" != . ]\n-\tthen\n-\t    d=$d/.\n-\tfi\n \n \t# Find all directories under $d, relative to $d, excluding $d itself.\n-        files=\"$files `find $d -type d -print | \\\n-\t\t       sed -e '/\\/\\.$/d' -e '/^\\.$/d'`\"\n+\t# (The /. is needed after $d in case $d is a symlink.)\n+        files=\"$files `find $d/. -type d -print | \\\n+\t\t       sed -e '/\\/\\.$/d' -e 's@/./@/@g'`\"\n \t# Find all links to directories.\n \t# Using `-exec test -d' in find fails on some systems,\n \t# and trying to run test via sh fails on others,\n \t# so this is the simplest alternative left.\n \t# First find all the links, then test each one.\n \ttheselinks=\n \t$LINKS && \\\n-\t  theselinks=`find $d -type l -print`\n+\t  theselinks=`find $d/. -type l -print | sed -e 's@/./@/@g'`\n \tfor d1 in $theselinks --dummy--\n \tdo\n \t    # If the link points to a directory,\n@@ -185,7 +182,7 @@ if $LINKS; then\n \t  # root area.\n \t  for file2 in $files; do\n \t    case $file2 in\n-\t      $file/./*)\n+\t      $file/*)\n \t\tdupdir=${LIB}/root$x/`echo $file2 | sed -n \"s|^${file}/||p\"`\n \t\techo \"Duplicating ${file}'s ${dupdir}\"\n \t\tif [ -d ${dupdir} ]"}]}