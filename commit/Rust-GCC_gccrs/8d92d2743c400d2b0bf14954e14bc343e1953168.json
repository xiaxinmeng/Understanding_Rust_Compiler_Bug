{"sha": "8d92d2743c400d2b0bf14954e14bc343e1953168", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ5MmQyNzQzYzQwMGQyYjBiZjE0OTU0ZTE0YmMzNDNlMTk1MzE2OA==", "commit": {"author": {"name": "Petar Jovanovic", "email": "petar.jovanovic@rt-rk.com", "date": "2015-04-29T20:28:52Z"}, "committer": {"name": "Catherine Moore", "email": "clm@gcc.gnu.org", "date": "2015-04-29T20:28:52Z"}, "message": "mips.h (CRT_CALL_STATIC_FUNCTION): Fix the macro to use la/jalr instead of jal.\n\ngcc/ChangeLog:\n\n2015-04-21  Petar Jovanovic  <petar.jovanovic@rt-rk.com>\n\n\t* config/mips/mips.h (CRT_CALL_STATIC_FUNCTION): Fix the macro to use\n\tla/jalr instead of jal.\n\ngcc/testsuite/ChangeLog:\n\n2015-04-21  Petar Jovanovic  <petar.jovanovic@rt-rk.com>\n\n\t* gcc.target/mips/call-from-init.c: New test.\n\t* gcc.target/mips/mips.exp: Add section_start to mips_option_groups.\n\nFrom-SVN: r222589", "tree": {"sha": "a41bdb0346a871eff002147ce7843828b3e88e17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a41bdb0346a871eff002147ce7843828b3e88e17"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d92d2743c400d2b0bf14954e14bc343e1953168", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d92d2743c400d2b0bf14954e14bc343e1953168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d92d2743c400d2b0bf14954e14bc343e1953168", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d92d2743c400d2b0bf14954e14bc343e1953168/comments", "author": {"login": "petar-jovanovic", "id": 275751, "node_id": "MDQ6VXNlcjI3NTc1MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/275751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petar-jovanovic", "html_url": "https://github.com/petar-jovanovic", "followers_url": "https://api.github.com/users/petar-jovanovic/followers", "following_url": "https://api.github.com/users/petar-jovanovic/following{/other_user}", "gists_url": "https://api.github.com/users/petar-jovanovic/gists{/gist_id}", "starred_url": "https://api.github.com/users/petar-jovanovic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petar-jovanovic/subscriptions", "organizations_url": "https://api.github.com/users/petar-jovanovic/orgs", "repos_url": "https://api.github.com/users/petar-jovanovic/repos", "events_url": "https://api.github.com/users/petar-jovanovic/events{/privacy}", "received_events_url": "https://api.github.com/users/petar-jovanovic/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3c908a5b5c5bf5693dd2c5a3f1858867d1b96034", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c908a5b5c5bf5693dd2c5a3f1858867d1b96034", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c908a5b5c5bf5693dd2c5a3f1858867d1b96034"}], "stats": {"total": 46, "additions": 42, "deletions": 4}, "files": [{"sha": "3b363b04f72dd432f351f517f7cbe9ef8d4a41ac", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d92d2743c400d2b0bf14954e14bc343e1953168", "patch": "@@ -1,3 +1,8 @@\n+2015-04-29  Petar Jovanovic  <petar.jovanovic@rt-rk.com>\n+\n+\t* config/mips/mips.h (CRT_CALL_STATIC_FUNCTION): Fix the macro to use\n+\tla/jalr instead of jal.\n+\n 2015-04-29  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/65871"}, {"sha": "4bd83f50092cf523616b8c57e5233568fb05ed37", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=8d92d2743c400d2b0bf14954e14bc343e1953168", "patch": "@@ -3034,11 +3034,11 @@ while (0)\n \tnop\\n\\\n 1:\t.cpload $31\\n\\\n \t.set reorder\\n\\\n-\tjal \" USER_LABEL_PREFIX #FUNC \"\\n\\\n+\tla $25, \" USER_LABEL_PREFIX #FUNC \"\\n\\\n+\tjalr $25\\n\\\n \t.set pop\\n\\\n \t\" TEXT_SECTION_ASM_OP);\n-#elif ((defined _ABIN32 && _MIPS_SIM == _ABIN32) \\\n-       || (defined _ABI64 && _MIPS_SIM == _ABI64))\n+#elif (defined _ABIN32 && _MIPS_SIM == _ABIN32)\n #define CRT_CALL_STATIC_FUNCTION(SECTION_OP, FUNC)\t\\\n    asm (SECTION_OP \"\\n\\\n \t.set push\\n\\\n@@ -3048,7 +3048,22 @@ while (0)\n \tnop\\n\\\n 1:\t.set reorder\\n\\\n \t.cpsetup $31, $2, 1b\\n\\\n-\tjal \" USER_LABEL_PREFIX #FUNC \"\\n\\\n+\tla $25, \" USER_LABEL_PREFIX #FUNC \"\\n\\\n+\tjalr $25\\n\\\n+\t.set pop\\n\\\n+\t\" TEXT_SECTION_ASM_OP);\n+#elif (defined _ABI64 && _MIPS_SIM == _ABI64)\n+#define CRT_CALL_STATIC_FUNCTION(SECTION_OP, FUNC)\t\\\n+   asm (SECTION_OP \"\\n\\\n+\t.set push\\n\\\n+\t.set nomips16\\n\\\n+\t.set noreorder\\n\\\n+\tbal 1f\\n\\\n+\tnop\\n\\\n+1:\t.set reorder\\n\\\n+\t.cpsetup $31, $2, 1b\\n\\\n+\tdla $25, \" USER_LABEL_PREFIX #FUNC \"\\n\\\n+\tjalr $25\\n\\\n \t.set pop\\n\\\n \t\" TEXT_SECTION_ASM_OP);\n #endif"}, {"sha": "7aebfecff77151b0c1a15ddd90891b38236e5fd9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8d92d2743c400d2b0bf14954e14bc343e1953168", "patch": "@@ -1,3 +1,8 @@\n+2015-04-29  Petar Jovanovic  <petar.jovanovic@rt-rk.com>\n+\n+\t* gcc.target/mips/call-from-init.c: New test.\n+\t* gcc.target/mips/mips.exp: Add section_start to mips_option_groups.\n+\n 2015-04-29  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/65871"}, {"sha": "9c6ac002e45cf63f1fd1c0543057a16b6cbd7c33", "filename": "gcc/testsuite/gcc.target/mips/call-from-init.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fcall-from-init.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fcall-from-init.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fcall-from-init.c?ref=8d92d2743c400d2b0bf14954e14bc343e1953168", "patch": "@@ -0,0 +1,12 @@\n+/* Check that __do_global_ctors_aux can be reached from .init section that\n+   is in a different (256MB) region. */\n+/* { dg-do run { target { \"mips*-*-linux*\" } } } */\n+/* { dg-skip-if \"\" { \"mips*-sde-elf mips*-mti-elf mips*-img-elf\" } } */\n+/* { dg-options \"-Wl,--section-start=.init=0x0FFF0000\" } */\n+/* { dg-options \"-Wl,--section-start=.text=0x10000000\" } */\n+/* { dg-options \"-mips32r2\" } */\n+\n+int\n+main (void) {\n+  return 0;\n+}"}, {"sha": "1dd4173b6d7a339b7251204cc3e6cb7d3d6c5941", "filename": "gcc/testsuite/gcc.target/mips/mips.exp", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d92d2743c400d2b0bf14954e14bc343e1953168/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fmips.exp?ref=8d92d2743c400d2b0bf14954e14bc343e1953168", "patch": "@@ -254,6 +254,7 @@ set mips_option_groups {\n     madd \"HAS_MADD\"\n     maddps \"HAS_MADDPS\"\n     lsa \"(|!)HAS_LSA\"\n+    section_start \"-Wl,--section-start=.*\"\n }\n \n for { set option 0 } { $option < 32 } { incr option } {"}]}