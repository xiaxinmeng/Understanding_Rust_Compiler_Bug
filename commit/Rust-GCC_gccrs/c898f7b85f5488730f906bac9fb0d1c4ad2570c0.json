{"sha": "c898f7b85f5488730f906bac9fb0d1c4ad2570c0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzg5OGY3Yjg1ZjU0ODg3MzBmOTA2YmFjOWZiMGQxYzRhZDI1NzBjMA==", "commit": {"author": {"name": "Torvald Riegel", "email": "triegel@redhat.com", "date": "2011-12-24T01:42:48Z"}, "committer": {"name": "Torvald Riegel", "email": "torvald@gcc.gnu.org", "date": "2011-12-24T01:42:48Z"}, "message": "libitm: Don't enforce privatization safety if already in serial mode.\n\n\tlibitm/\n\t* beginend.cc (GTM::gtm_thread::trycommit): Don't enforce\n\tprivatization safety if already in serial mode.\n\nFrom-SVN: r182676", "tree": {"sha": "e009d551aaef7b58ada2c219361dd260fdadd8ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e009d551aaef7b58ada2c219361dd260fdadd8ce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c898f7b85f5488730f906bac9fb0d1c4ad2570c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c898f7b85f5488730f906bac9fb0d1c4ad2570c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c898f7b85f5488730f906bac9fb0d1c4ad2570c0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c898f7b85f5488730f906bac9fb0d1c4ad2570c0/comments", "author": {"login": "triegelrh", "id": 62400967, "node_id": "MDQ6VXNlcjYyNDAwOTY3", "avatar_url": "https://avatars.githubusercontent.com/u/62400967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/triegelrh", "html_url": "https://github.com/triegelrh", "followers_url": "https://api.github.com/users/triegelrh/followers", "following_url": "https://api.github.com/users/triegelrh/following{/other_user}", "gists_url": "https://api.github.com/users/triegelrh/gists{/gist_id}", "starred_url": "https://api.github.com/users/triegelrh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/triegelrh/subscriptions", "organizations_url": "https://api.github.com/users/triegelrh/orgs", "repos_url": "https://api.github.com/users/triegelrh/repos", "events_url": "https://api.github.com/users/triegelrh/events{/privacy}", "received_events_url": "https://api.github.com/users/triegelrh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "610e39013598f4f3bc66c117c3402c07b517cfa0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/610e39013598f4f3bc66c117c3402c07b517cfa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/610e39013598f4f3bc66c117c3402c07b517cfa0"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "d2f0fd752f084cf9c14efe0a9c550957c296daf9", "filename": "libitm/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c898f7b85f5488730f906bac9fb0d1c4ad2570c0/libitm%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c898f7b85f5488730f906bac9fb0d1c4ad2570c0/libitm%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FChangeLog?ref=c898f7b85f5488730f906bac9fb0d1c4ad2570c0", "patch": "@@ -1,3 +1,8 @@\n+2011-12-24  Torvald Riegel  <triegel@redhat.com>\n+\n+\t* beginend.cc (GTM::gtm_thread::trycommit): Don't enforce\n+\tprivatization safety if already in serial mode.\n+\n 2011-12-24  Torvald Riegel  <triegel@redhat.com>\n \n \t* beginend.cc (GTM::gtm_thread::restart): Add and handle"}, {"sha": "797548192eb1641e91502175982ffb7bbf151cff", "filename": "libitm/beginend.cc", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c898f7b85f5488730f906bac9fb0d1c4ad2570c0/libitm%2Fbeginend.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c898f7b85f5488730f906bac9fb0d1c4ad2570c0/libitm%2Fbeginend.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fbeginend.cc?ref=c898f7b85f5488730f906bac9fb0d1c4ad2570c0", "patch": "@@ -457,7 +457,12 @@ GTM::gtm_thread::trycommit ()\n       // The transaction is now inactive. Everything that we still have to do\n       // will not synchronize with other transactions anymore.\n       if (state & gtm_thread::STATE_SERIAL)\n-\tgtm_thread::serial_lock.write_unlock ();\n+        {\n+          gtm_thread::serial_lock.write_unlock ();\n+          // There are no other active transactions, so there's no need to\n+          // enforce privatization safety.\n+          priv_time = 0;\n+        }\n       else\n \tgtm_thread::serial_lock.read_unlock (this);\n       state = 0;"}]}