{"sha": "beea27550eb8be53affa33bdd8a32714b7166c60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmVlYTI3NTUwZWI4YmU1M2FmZmEzM2JkZDhhMzI3MTRiNzE2NmM2MA==", "commit": {"author": {"name": "Jie Zhang", "email": "jie@codesourcery.com", "date": "2011-02-05T12:06:18Z"}, "committer": {"name": "Jie Zhang", "email": "jiez@gcc.gnu.org", "date": "2011-02-05T12:06:18Z"}, "message": "re PR rtl-optimization/42631 (\"-fcompare-debug failure\" with \"-O1 -funroll-loops\")\n\n\tPR debug/42631\n\t* web.c (entry_register): Don't clobber the number of the\n\tfirst uninitialized reference in used[].\n\n\ttestsuite/\n\tPR debug/42631\n\t* gcc.dg/pr42631.c: Update test.\n\t* gcc.dg/pr42631-2.c: New test.\n\nFrom-SVN: r169851", "tree": {"sha": "a89f09befdf6264a67eab321cdb66ca533fd5129", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a89f09befdf6264a67eab321cdb66ca533fd5129"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/beea27550eb8be53affa33bdd8a32714b7166c60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/beea27550eb8be53affa33bdd8a32714b7166c60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/beea27550eb8be53affa33bdd8a32714b7166c60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/beea27550eb8be53affa33bdd8a32714b7166c60/comments", "author": null, "committer": null, "parents": [{"sha": "991fcb7a01b62d7e35ec2175aa0438585c74acab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/991fcb7a01b62d7e35ec2175aa0438585c74acab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/991fcb7a01b62d7e35ec2175aa0438585c74acab"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "de08bab31e921ee4ff5d6440d45191439ba671a7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=beea27550eb8be53affa33bdd8a32714b7166c60", "patch": "@@ -1,3 +1,9 @@\n+2011-02-05  Jie Zhang  <jie@codesourcery.com>\n+\n+\tPR debug/42631\n+\t* web.c (entry_register): Don't clobber the number of the\n+\tfirst uninitialized reference in used[].\n+\n 2011-02-04  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tPR tree-optimization/46194"}, {"sha": "89053c20e6dfbaea56dc4d6ee230b3c8a0771042", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=beea27550eb8be53affa33bdd8a32714b7166c60", "patch": "@@ -1,3 +1,9 @@\n+2011-02-05  Jie Zhang  <jie@codesourcery.com>\n+\n+\tPR debug/42631\n+\t* gcc.dg/pr42631.c: Update test.\n+\t* gcc.dg/pr42631-2.c: New test.\n+\n 2001-02-05  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/47574"}, {"sha": "a5da2de3f4b4a61275e0829ea97cbe18545ca33e", "filename": "gcc/testsuite/gcc.dg/pr42631-2.c", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42631-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42631-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42631-2.c?ref=beea27550eb8be53affa33bdd8a32714b7166c60", "patch": "@@ -0,0 +1,9 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -funroll-loops -fdump-rtl-web\" } */\n+\n+foo()\n+{\n+}\n+\n+/* { dg-final { scan-rtl-dump-not \"Web oldreg\" \"web\" } } */\n+/* { dg-final { cleanup-rtl-dump \"web\" } } */"}, {"sha": "3d6c229a01633e50131dd9c8b7263cfce5f63c10", "filename": "gcc/testsuite/gcc.dg/pr42631.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42631.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42631.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr42631.c?ref=beea27550eb8be53affa33bdd8a32714b7166c60", "patch": "@@ -14,10 +14,13 @@\n    combine uninitialized uses into a single web.  */\n \n /* { dg-do compile } */\n-/* { dg-options \"-g -O1 -funroll-loops -fcompare-debug\" } */\n+/* { dg-options \"-g -O1 -funroll-loops -fcompare-debug -fdump-rtl-web\" } */\n \n void foo()\n {\n   unsigned k;\n   while (--k > 0);\n }\n+\n+/* { dg-final { scan-rtl-dump-not \"Web oldreg\" \"web\" } } */\n+/* { dg-final { cleanup-rtl-dump \"web\" } } */"}, {"sha": "7014aa55dc74e0c34167db7aec1e012ad40a6dd6", "filename": "gcc/web.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Fweb.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/beea27550eb8be53affa33bdd8a32714b7166c60/gcc%2Fweb.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fweb.c?ref=beea27550eb8be53affa33bdd8a32714b7166c60", "patch": "@@ -260,7 +260,11 @@ entry_register (struct web_entry *entry, df_ref ref, unsigned int *used)\n      and there won't be any use for the other values when we get to\n      this point.  */\n   if (used[REGNO (reg)] != 1)\n-    newreg = reg, used[REGNO (reg)] = 1;\n+    {\n+      newreg = reg;\n+      if (!used[REGNO (reg)])\n+\tused[REGNO (reg)] = 1;\n+    }\n   else\n     {\n       newreg = gen_reg_rtx (GET_MODE (reg));"}]}