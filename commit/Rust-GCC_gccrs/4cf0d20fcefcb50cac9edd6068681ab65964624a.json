{"sha": "4cf0d20fcefcb50cac9edd6068681ab65964624a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNmMGQyMGZjZWZjYjUwY2FjOWVkZDYwNjg2ODFhYjY1OTY0NjI0YQ==", "commit": {"author": {"name": "Andrew Haley", "email": "aph@redhat.com", "date": "2003-01-14T19:26:21Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2003-01-14T19:26:21Z"}, "message": "natRuntime.cc (_load): StackTrace access needs to be in a try block.\n\n2003-01-14  Andrew Haley  <aph@redhat.com>\n\n        * java/lang/natRuntime.cc (_load): StackTrace access needs to be\n        in a try block.\n\nFrom-SVN: r61293", "tree": {"sha": "2e17559f497789f129243a293ab395fab51b8f1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2e17559f497789f129243a293ab395fab51b8f1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4cf0d20fcefcb50cac9edd6068681ab65964624a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cf0d20fcefcb50cac9edd6068681ab65964624a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4cf0d20fcefcb50cac9edd6068681ab65964624a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4cf0d20fcefcb50cac9edd6068681ab65964624a/comments", "author": {"login": "theRealAph", "id": 254637, "node_id": "MDQ6VXNlcjI1NDYzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/254637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theRealAph", "html_url": "https://github.com/theRealAph", "followers_url": "https://api.github.com/users/theRealAph/followers", "following_url": "https://api.github.com/users/theRealAph/following{/other_user}", "gists_url": "https://api.github.com/users/theRealAph/gists{/gist_id}", "starred_url": "https://api.github.com/users/theRealAph/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theRealAph/subscriptions", "organizations_url": "https://api.github.com/users/theRealAph/orgs", "repos_url": "https://api.github.com/users/theRealAph/repos", "events_url": "https://api.github.com/users/theRealAph/events{/privacy}", "received_events_url": "https://api.github.com/users/theRealAph/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d9bbf3f7431f127a29e80a51bf1b61a52ab8e172", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9bbf3f7431f127a29e80a51bf1b61a52ab8e172", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9bbf3f7431f127a29e80a51bf1b61a52ab8e172"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "43897310dc14da0fc7d2d09a5c0188a32e8d01b8", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cf0d20fcefcb50cac9edd6068681ab65964624a/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cf0d20fcefcb50cac9edd6068681ab65964624a/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=4cf0d20fcefcb50cac9edd6068681ab65964624a", "patch": "@@ -1,3 +1,8 @@\n+2003-01-14  Andrew Haley  <aph@redhat.com>\n+\n+\t* java/lang/natRuntime.cc (_load): StackTrace access needs to be\n+\tin a try block.\n+\n 2003-01-10  Andrew Haley  <aph@redhat.com>\n \n \t* include/dwarf2-signal.h: Remove x86_64."}, {"sha": "f74a1e76bcf0c71abe0e4290258f1bb75897f901", "filename": "libjava/java/lang/natRuntime.cc", "status": "modified", "additions": 16, "deletions": 8, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4cf0d20fcefcb50cac9edd6068681ab65964624a/libjava%2Fjava%2Flang%2FnatRuntime.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4cf0d20fcefcb50cac9edd6068681ab65964624a/libjava%2Fjava%2Flang%2FnatRuntime.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatRuntime.cc?ref=4cf0d20fcefcb50cac9edd6068681ab65964624a", "patch": "@@ -29,6 +29,7 @@ details.  */\n #include <java/lang/ConcreteProcess.h>\n #include <java/lang/ClassLoader.h>\n #include <gnu/gcj/runtime/StackTrace.h>\n+#include <java/lang/ArrayIndexOutOfBoundsException.h>\n \n #include <jni.h>\n \n@@ -181,19 +182,26 @@ java::lang::Runtime::_load (jstring path, jboolean do_search)\n       ClassLoader *sys = ClassLoader::getSystemClassLoader();\n       ClassLoader *look = NULL;\n       gnu::gcj::runtime::StackTrace *t = new gnu::gcj::runtime::StackTrace(10);\n-      for (int i = 0; i < 10; ++i)\n-\t{\n-\t  jclass klass = t->classAt(i);\n-\t  if (klass != NULL)\n+      try\n+      \t{\n+\t  for (int i = 0; i < 10; ++i)\n \t    {\n-\t      ClassLoader *loader = klass->getClassLoaderInternal();\n-\t      if (loader != NULL && loader != sys)\n+\t      jclass klass = t->classAt(i);\n+\t      if (klass != NULL)\n \t\t{\n-\t\t  look = loader;\n-\t\t  break;\n+\t\t  ClassLoader *loader = klass->getClassLoaderInternal();\n+\t\t  if (loader != NULL && loader != sys)\n+\t\t    {\n+\t\t      look = loader;\n+\t\t      break;\n+\t\t    }\n \t\t}\n \t    }\n \t}\n+      catch (::java::lang::ArrayIndexOutOfBoundsException *e)\n+\t{\n+\t}\n+\n       if (look != NULL)\n \t{\n \t  // Don't include solib prefix in string passed to"}]}