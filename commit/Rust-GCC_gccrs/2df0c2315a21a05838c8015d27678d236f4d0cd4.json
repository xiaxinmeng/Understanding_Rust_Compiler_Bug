{"sha": "2df0c2315a21a05838c8015d27678d236f4d0cd4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRmMGMyMzE1YTIxYTA1ODM4YzgwMTVkMjc2NzhkMjM2ZjRkMGNkNA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2019-11-01T20:12:30Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2019-11-01T20:12:30Z"}, "message": "Fix nodiscard test failures.\n\n\t* g++.dg/cpp2a/nodiscard-once.C: Expect nodiscard warning.\n\t* g++.dg/cpp2a/nodiscard-reason.C: Adjust expected warnings.\n\nFrom-SVN: r277719", "tree": {"sha": "58f6f3514a5f39fc2fc242cda1c6b5cd122ddb9a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58f6f3514a5f39fc2fc242cda1c6b5cd122ddb9a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2df0c2315a21a05838c8015d27678d236f4d0cd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2df0c2315a21a05838c8015d27678d236f4d0cd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2df0c2315a21a05838c8015d27678d236f4d0cd4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2df0c2315a21a05838c8015d27678d236f4d0cd4/comments", "author": null, "committer": null, "parents": [{"sha": "2028ce454f4d9424aaf05c27b20f13ea52748caf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2028ce454f4d9424aaf05c27b20f13ea52748caf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2028ce454f4d9424aaf05c27b20f13ea52748caf"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "78349715aaea4e2d5b3333aa828b2315eda0c63b", "filename": "gcc/testsuite/g++.dg/cpp2a/nodiscard-once.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2df0c2315a21a05838c8015d27678d236f4d0cd4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-once.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2df0c2315a21a05838c8015d27678d236f4d0cd4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-once.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-once.C?ref=2df0c2315a21a05838c8015d27678d236f4d0cd4", "patch": "@@ -7,6 +7,6 @@\n void\n test (void)\n {\n-  check1 ();\n+  check1 ();\t\t\t// { dg-warning \"nodiscard\" }\n   (void) check1 ();\n }"}, {"sha": "5fda058c9eece681d261a3e7dcd9d68a75653620", "filename": "gcc/testsuite/g++.dg/cpp2a/nodiscard-reason.C", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2df0c2315a21a05838c8015d27678d236f4d0cd4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2df0c2315a21a05838c8015d27678d236f4d0cd4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fnodiscard-reason.C?ref=2df0c2315a21a05838c8015d27678d236f4d0cd4", "patch": "@@ -13,8 +13,8 @@ typedef struct { char big[1024]; fnt fn; } C;\n struct [[nodiscard(\"exact_D_message\")]] D { int i; D(); ~D(); };\n \n NODIS E check1 (void);\n-NODIS void check2 (void); /* { dg-warning \"10:.nodiscard\\[^\\n\\r]*exact_message\" } */\n-NODIS int foo;         /* { dg-warning \"9:.nodiscard\\[^\\n\\r]*exact_message\" } */\n+NODIS void check2 (void); /* { dg-warning \"12:.nodiscard\\[^\\n\\r]*void\" } */\n+NODIS int foo;         /* { dg-warning \"11:.nodiscard\\[^\\n\\r]*class\" } */\n int bar (void);\n NODISAI E check3 (void) { return (E)bar (); }\n NODIS A check4 (void);\n@@ -173,23 +173,23 @@ test (void)\n     return;\n   i += (k ? check3 : check11) ();\n   i += ({ (k ? check3 : check11) (); });\n-  (k ? check3 : check11) (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n+  (k ? check3 : check11) (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   (void) (k ? check3 : check11) ();\n-  (k ? check3 : check11) (), bar (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_inline_message\" } */\n+  (k ? check3 : check11) (), bar (); /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n   if (pcheck1 ())\n     return;\n   i += pcheck1 ();\n   i += ({ pcheck1 (); });\n-  pcheck1 ();          /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n+  pcheck1 ();          /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_\" } */\n   (void) pcheck1 ();\n-  pcheck1 (), bar ();  /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n+  pcheck1 (), bar ();  /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_\" } */\n   if (pcheck3 ())\n     return;\n   i += pcheck3 ();\n   i += ({ pcheck3 (); });\n-  pcheck3 ();          /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n+  pcheck3 ();          /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_\" } */\n   (void) pcheck3 ();\n-  pcheck3 (), bar ();  /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_E_message\" } */\n+  pcheck3 (), bar ();  /* { dg-warning \"nodiscard\\[^\\n\\r]*exact_\" } */\n   d = check12 ();\n   if (d.i)\n     return;"}]}