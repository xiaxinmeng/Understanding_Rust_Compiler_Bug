{"sha": "9c68e2abe294a48385224cd7617eca0720144b5c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM2OGUyYWJlMjk0YTQ4Mzg1MjI0Y2Q3NjE3ZWNhMDcyMDE0NGI1Yw==", "commit": {"author": {"name": "Tamar Christina", "email": "tamar.christina@arm.com", "date": "2021-03-30T13:16:03Z"}, "committer": {"name": "Tamar Christina", "email": "tamar.christina@arm.com", "date": "2021-03-30T13:16:03Z"}, "message": "slp: reject non-multiple of 2 laned SLP trees (PR99825)\n\nTWO_OPERANDS allows any order or number of combinations of + and - operations\nbut the pattern matcher only supports pairs of operations.\n\nThis patch has the pattern matcher for complex numbers reject SLP trees where\nthe lanes are not a multiple of 2.\n\ngcc/ChangeLog:\n\n\tPR tree-optimization/99825\n\t* tree-vect-slp-patterns.c (vect_check_evenodd_blend):\n\tReject non-mult 2 lanes.\n\ngcc/testsuite/ChangeLog:\n\n\tPR tree-optimization/99825\n\t* gfortran.dg/vect/pr99825.f90: New test.", "tree": {"sha": "ca2f23791d9eea0b50e619a244a9b5f8968f538f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca2f23791d9eea0b50e619a244a9b5f8968f538f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c68e2abe294a48385224cd7617eca0720144b5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c68e2abe294a48385224cd7617eca0720144b5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c68e2abe294a48385224cd7617eca0720144b5c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c68e2abe294a48385224cd7617eca0720144b5c/comments", "author": {"login": "TamarChristinaArm", "id": 48126768, "node_id": "MDQ6VXNlcjQ4MTI2NzY4", "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TamarChristinaArm", "html_url": "https://github.com/TamarChristinaArm", "followers_url": "https://api.github.com/users/TamarChristinaArm/followers", "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}", "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}", "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions", "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs", "repos_url": "https://api.github.com/users/TamarChristinaArm/repos", "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}", "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TamarChristinaArm", "id": 48126768, "node_id": "MDQ6VXNlcjQ4MTI2NzY4", "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TamarChristinaArm", "html_url": "https://github.com/TamarChristinaArm", "followers_url": "https://api.github.com/users/TamarChristinaArm/followers", "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}", "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}", "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions", "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs", "repos_url": "https://api.github.com/users/TamarChristinaArm/repos", "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}", "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "b1423df32254e80dc2958b95083831173011afed", "filename": "gcc/testsuite/gfortran.dg/vect/pr99825.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c68e2abe294a48385224cd7617eca0720144b5c/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr99825.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c68e2abe294a48385224cd7617eca0720144b5c/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr99825.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fvect%2Fpr99825.f90?ref=9c68e2abe294a48385224cd7617eca0720144b5c", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do compile }\n+! { dg-additional-options \"-march=armv8.3-a -O3\" { target { aarch64*-*-* } } }\n+\n+program main\n+  complex, dimension(3, 2) :: a\n+  complex, dimension(2, 4) :: b\n+  complex, dimension(3, 4) :: c, res1\n+\n+  data a /0, (-5., -7.), (11., -13.), 0, 0, 0/\n+  data b /0, 0, 0, 0, 0, 0, 0, 0/\n+  data res1 /0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0/\n+\n+  c = matmul(a, conjg(b))\n+  if (any(res1 /= c)) stop 2\n+end program main"}, {"sha": "b25655c987698fcca684444377e3bc83ff7f3426", "filename": "gcc/tree-vect-slp-patterns.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c68e2abe294a48385224cd7617eca0720144b5c/gcc%2Ftree-vect-slp-patterns.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c68e2abe294a48385224cd7617eca0720144b5c/gcc%2Ftree-vect-slp-patterns.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-slp-patterns.c?ref=9c68e2abe294a48385224cd7617eca0720144b5c", "patch": "@@ -332,7 +332,8 @@ static inline bool\n vect_check_evenodd_blend (lane_permutation_t &permutes,\n \t\t\t unsigned even, unsigned odd)\n {\n-  if (permutes.length () == 0)\n+  if (permutes.length () == 0\n+      || permutes.length () % 2 != 0)\n     return false;\n \n   unsigned val[2] = {even, odd};"}]}